var nse=Object.create;var Kh=Object.defineProperty,rse=Object.defineProperties,ise=Object.getOwnPropertyDescriptor,ose=Object.getOwnPropertyDescriptors,ase=Object.getOwnPropertyNames,Qh=Object.getOwnPropertySymbols,sse=Object.getPrototypeOf,Vw=Object.prototype.hasOwnProperty,sO=Object.prototype.propertyIsEnumerable;var Aw=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e);var aO=(e,t,n)=>t in e?Kh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x=(e,t)=>{for(var n in t||={})Vw.call(t,n)&&aO(e,n,t[n]);if(Qh)for(var n of Qh(t))sO.call(t,n)&&aO(e,n,t[n]);return e},k=(e,t)=>rse(e,ose(t));var _4=e=>typeof e=="symbol"?e:e+"",ie=(e,t)=>{var n={};for(var r in e)Vw.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Qh)for(var r of Qh(e))t.indexOf(r)<0&&sO.call(e,r)&&(n[r]=e[r]);return n};var cse=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),xr=(e,t)=>{for(var n in t)Kh(e,n,{get:t[n],enumerable:!0})},lse=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ase(t))!Vw.call(e,i)&&i!==n&&Kh(e,i,{get:()=>t[i],enumerable:!(r=ise(t,i))||r.enumerable});return e};var use=(e,t,n)=>(n=e!=null?nse(sse(e)):{},lse(t||!e||!e.__esModule?Kh(n,"default",{value:e,enumerable:!0}):n,e));var Ut=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{s(n.next(c))}catch(l){i(l)}},a=c=>{try{s(n.throw(c))}catch(l){i(l)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);s((n=n.apply(e,t)).next())}),fse=function(e,t){this[0]=e,this[1]=t};var cO=e=>{var t=e[Aw("asyncIterator")],n=!1,r,i={};return t==null?(t=e[Aw("iterator")](),r=o=>i[o]=a=>t[o](a)):(t=t.call(e),r=o=>i[o]=a=>{if(n){if(n=!1,o==="throw")throw a;return a}return n=!0,{done:!1,value:new fse(new Promise(s=>{var c=t[o](a);if(!(c instanceof Object))throw TypeError("Object expected");s(c)}),1)}}),i[Aw("iterator")]=()=>i,r("next"),"throw"in t?r("throw"):i.throw=o=>{throw o},"return"in t&&r("return"),i};var uG=cse((dXe,lG)=>{"use strict";var U7e=/("(?:[^\\"]|\\.)*")|[:,]/g;lG.exports=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function a(s,c,l){var u,f,d,p,h,m,g,v,y,C,b,M;if(s&&typeof s.toJSON=="function"&&(s=s.toJSON()),b=JSON.stringify(s,o),b===void 0)return b;if(g=i-c.length-l,b.length<=g&&(y=b.replace(U7e,function(S,w){return w||S+" "}),y.length<=g))return y;if(o!=null&&(s=JSON.parse(b),o=void 0),typeof s=="object"&&s!==null){if(v=c+r,d=[],f=0,Array.isArray(s))for(C="[",u="]",g=s.length;f<g;f++)d.push(a(s[f],v,f===g-1?0:1)||"null");else for(C="{",u="}",m=Object.keys(s),g=m.length;f<g;f++)p=m[f],h=JSON.stringify(p)+": ",M=a(s[p],v,h.length+(f===g-1?0:1)),M!==void 0&&d.push(h+M);if(d.length>0)return[C,r+d.join(`,
`+v),u].join(`
`+c)}return b}(t,"",0)}});var lO=null;var Nw=1,_w=Symbol("SIGNAL");function Br(e){let t=lO;return lO=e,t}var uO={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function dse(e){if(!(Iw(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Nw)){if(!e.producerMustRecompute(e)&&!kw(e)){e.dirty=!1,e.lastCleanEpoch=Nw;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Nw}}function fO(e){return e&&(e.nextProducerIndex=0),Br(e)}function dO(e,t){if(Br(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Iw(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Tw(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function kw(e){Zh(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(dse(n),r!==n.version))return!0}return!1}function pO(e){if(Zh(e),Iw(e))for(let t=0;t<e.producerNode.length;t++)Tw(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Tw(e,t){if(pse(e),Zh(e),e.liveConsumerNode.length===1)for(let r=0;r<e.producerNode.length;r++)Tw(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Zh(i),i.producerIndexOfThis[r]=t}}function Iw(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Zh(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function pse(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function hse(){throw new Error}var mse=hse;function hO(e){mse=e}function Ge(e){return typeof e=="function"}function q0(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Jh=q0(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function H8(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var or=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Ge(r))try{r()}catch(o){t=o instanceof Jh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{mO(o)}catch(a){t=t??[],a instanceof Jh?t=[...t,...a.errors]:t.push(a)}}if(t)throw new Jh(t)}}add(t){var n;if(t&&t!==this)if(this.closed)mO(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&H8(n,t)}remove(t){let{_finalizers:n}=this;n&&H8(n,t),t instanceof e&&t._removeParent(this)}};or.EMPTY=(()=>{let e=new or;return e.closed=!0,e})();var Fw=or.EMPTY;function em(e){return e instanceof or||e&&"closed"in e&&Ge(e.remove)&&Ge(e.add)&&Ge(e.unsubscribe)}function mO(e){Ge(e)?e():e.unsubscribe()}var d2={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var G0={setTimeout(e,t,...n){let{delegate:r}=G0;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=G0;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function tm(e){G0.setTimeout(()=>{let{onUnhandledError:t}=d2;if(t)t(e);else throw e})}function L8(){}var gO=Rw("C",void 0,void 0);function vO(e){return Rw("E",void 0,e)}function yO(e){return Rw("N",e,void 0)}function Rw(e,t,n){return{kind:e,value:t,error:n}}var k4=null;function W0(e){if(d2.useDeprecatedSynchronousErrorHandling){let t=!k4;if(t&&(k4={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=k4;if(k4=null,n)throw r}}else e()}function xO(e){d2.useDeprecatedSynchronousErrorHandling&&k4&&(k4.errorThrown=!0,k4.error=e)}var T4=class extends or{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,em(t)&&t.add(this)):this.destination=yse}static create(t,n,r){return new Y0(t,n,r)}next(t){this.isStopped?Pw(yO(t),this):this._next(t)}error(t){this.isStopped?Pw(vO(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Pw(gO,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},gse=Function.prototype.bind;function Ow(e,t){return gse.call(e,t)}var $w=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){nm(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){nm(r)}else nm(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){nm(n)}}},Y0=class extends T4{constructor(t,n,r){super();let i;if(Ge(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&d2.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Ow(t.next,o),error:t.error&&Ow(t.error,o),complete:t.complete&&Ow(t.complete,o)}):i=t}this.destination=new $w(i)}};function nm(e){d2.useDeprecatedSynchronousErrorHandling?xO(e):tm(e)}function vse(e){throw e}function Pw(e,t){let{onStoppedNotification:n}=d2;n&&G0.setTimeout(()=>n(e,t))}var yse={closed:!0,next:L8,error:vse,complete:L8};var X0=typeof Symbol=="function"&&Symbol.observable||"@@observable";function G1(e){return e}function Bw(...e){return Uw(e)}function Uw(e){return e.length===0?G1:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var wt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Cse(n)?n:new Y0(n,r,i);return W0(()=>{let{operator:a,source:s}=this;o.add(a?a.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=CO(r),new r((i,o)=>{let a=new Y0({next:s=>{try{n(s)}catch(c){o(c),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[X0](){return this}pipe(...n){return Uw(n)(this)}toPromise(n){return n=CO(n),new n((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return e.create=t=>new e(t),e})();function CO(e){var t;return(t=e??d2.Promise)!==null&&t!==void 0?t:Promise}function xse(e){return e&&Ge(e.next)&&Ge(e.error)&&Ge(e.complete)}function Cse(e){return e&&e instanceof T4||xse(e)&&em(e)}function jw(e){return Ge(e?.lift)}function mt(e){return t=>{if(jw(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ut(e,t,n,r,i){return new qw(e,t,n,r,i)}var qw=class extends T4{constructor(t,n,r,i,o,a){super(t),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(s){try{n(s)}catch(c){t.error(c)}}:super._next,this._error=i?function(s){try{i(s)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(s){t.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Q0(){return mt((e,t)=>{let n=null;e._refCount++;let r=ut(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var K0=class extends wt{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,jw(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new or;let n=this.getSubject();t.add(this.source.subscribe(ut(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=or.EMPTY)}return t}refCount(){return Q0()(this)}};var bO=q0(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var f1=(()=>{class e extends wt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new rm(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new bO}next(n){W0(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){W0(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){W0(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Fw:(this.currentObservers=null,o.push(n),new or(()=>{this.currentObservers=null,H8(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new wt;return n.source=this,n}}return e.create=(t,n)=>new rm(t,n),e})(),rm=class extends f1{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Fw}};var On=class extends f1{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Mo=new wt(e=>e.complete());function MO(e){return e&&Ge(e.schedule)}function wO(e){return e[e.length-1]}function im(e){return Ge(wO(e))?e.pop():void 0}function Wc(e){return MO(wO(e))?e.pop():void 0}function EO(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(e,t||[])).next())})}function SO(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function I4(e){return this instanceof I4?(this.v=e,this):new I4(e)}function DO(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(d){r[d]&&(i[d]=function(p){return new Promise(function(h,m){o.push([d,p,h,m])>1||s(d,p)})})}function s(d,p){try{c(r[d](p))}catch(h){f(o[0][3],h)}}function c(d){d.value instanceof I4?Promise.resolve(d.value.v).then(l,u):f(o[0][2],d)}function l(d){s("next",d)}function u(d){s("throw",d)}function f(d,p){d(p),o.shift(),o.length&&s(o[0][0],o[0][1])}}function zO(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof SO=="function"?SO(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(s,c){a=e[o](a),i(s,c,a.done,a.value)})}}function i(o,a,s,c){Promise.resolve(c).then(function(l){o({value:l,done:s})},a)}}var om=e=>e&&typeof e.length=="number"&&typeof e!="function";function am(e){return Ge(e?.then)}function sm(e){return Ge(e[X0])}function cm(e){return Symbol.asyncIterator&&Ge(e?.[Symbol.asyncIterator])}function lm(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function bse(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var um=bse();function fm(e){return Ge(e?.[um])}function dm(e){return DO(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield I4(n.read());if(i)return yield I4(void 0);yield yield I4(r)}}finally{n.releaseLock()}})}function pm(e){return Ge(e?.getReader)}function Gn(e){if(e instanceof wt)return e;if(e!=null){if(sm(e))return Mse(e);if(om(e))return wse(e);if(am(e))return Sse(e);if(cm(e))return HO(e);if(fm(e))return Ese(e);if(pm(e))return Dse(e)}throw lm(e)}function Mse(e){return new wt(t=>{let n=e[X0]();if(Ge(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function wse(e){return new wt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Sse(e){return new wt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,tm)})}function Ese(e){return new wt(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function HO(e){return new wt(t=>{zse(e,t).catch(n=>t.error(n))})}function Dse(e){return HO(dm(e))}function zse(e,t){var n,r,i,o;return EO(this,void 0,void 0,function*(){try{for(n=zO(e);r=yield n.next(),!r.done;){let a=r.value;if(t.next(a),t.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function d1(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function hm(e,t=0){return mt((n,r)=>{n.subscribe(ut(r,i=>d1(r,e,()=>r.next(i),t),()=>d1(r,e,()=>r.complete(),t),i=>d1(r,e,()=>r.error(i),t)))})}function mm(e,t=0){return mt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function LO(e,t){return Gn(e).pipe(mm(t),hm(t))}function AO(e,t){return Gn(e).pipe(mm(t),hm(t))}function VO(e,t){return new wt(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function NO(e,t){return new wt(n=>{let r;return d1(n,t,()=>{r=e[um](),d1(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){n.error(a);return}o?n.complete():n.next(i)},0,!0)}),()=>Ge(r?.return)&&r.return()})}function gm(e,t){if(!e)throw new Error("Iterable cannot be null");return new wt(n=>{d1(n,t,()=>{let r=e[Symbol.asyncIterator]();d1(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function _O(e,t){return gm(dm(e),t)}function kO(e,t){if(e!=null){if(sm(e))return LO(e,t);if(om(e))return VO(e,t);if(am(e))return AO(e,t);if(cm(e))return gm(e,t);if(fm(e))return NO(e,t);if(pm(e))return _O(e,t)}throw lm(e)}function en(e,t){return t?kO(e,t):Gn(e)}function ke(...e){let t=Wc(e);return en(e,t)}function Z0(e,t){let n=Ge(e)?e:()=>e,r=i=>i.error(n());return new wt(t?i=>t.schedule(r,0,i):r)}function Gw(e){return!!e&&(e instanceof wt||Ge(e.lift)&&Ge(e.subscribe))}var Ss=q0(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Ke(e,t){return mt((n,r)=>{let i=0;n.subscribe(ut(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:Hse}=Array;function Lse(e,t){return Hse(t)?e(...t):e(t)}function vm(e){return Ke(t=>Lse(e,t))}var{isArray:Ase}=Array,{getPrototypeOf:Vse,prototype:Nse,keys:_se}=Object;function ym(e){if(e.length===1){let t=e[0];if(Ase(t))return{args:t,keys:null};if(kse(t)){let n=_se(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function kse(e){return e&&typeof e=="object"&&Vse(e)===Nse}function xm(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function A8(...e){let t=Wc(e),n=im(e),{args:r,keys:i}=ym(e);if(r.length===0)return en([],t);let o=new wt(Tse(r,t,i?a=>xm(i,a):G1));return n?o.pipe(vm(n)):o}function Tse(e,t,n=G1){return r=>{TO(t,()=>{let{length:i}=e,o=new Array(i),a=i,s=i;for(let c=0;c<i;c++)TO(t,()=>{let l=en(e[c],t),u=!1;l.subscribe(ut(r,f=>{o[c]=f,u||(u=!0,s--),s||r.next(n(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function TO(e,t,n){e?d1(n,e,t):t()}function IO(e,t,n,r,i,o,a,s){let c=[],l=0,u=0,f=!1,d=()=>{f&&!c.length&&!l&&t.complete()},p=m=>l<r?h(m):c.push(m),h=m=>{o&&t.next(m),l++;let g=!1;Gn(n(m,u++)).subscribe(ut(t,v=>{i?.(v),o?p(v):t.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<r;){let v=c.shift();a?d1(t,a,()=>h(v)):h(v)}d()}catch(v){t.error(v)}}))};return e.subscribe(ut(t,p,()=>{f=!0,d()})),()=>{s?.()}}function Wn(e,t,n=1/0){return Ge(t)?Wn((r,i)=>Ke((o,a)=>t(r,o,i,a))(Gn(e(r,i))),n):(typeof t=="number"&&(n=t),mt((r,i)=>IO(r,i,e,n)))}function Yc(e=1/0){return Wn(G1,e)}function FO(){return Yc(1)}function J0(...e){return FO()(en(e,Wc(e)))}function Cm(e){return new wt(t=>{Gn(e()).subscribe(t)})}function Ww(...e){let t=im(e),{args:n,keys:r}=ym(e),i=new wt(o=>{let{length:a}=n;if(!a){o.complete();return}let s=new Array(a),c=a,l=a;for(let u=0;u<a;u++){let f=!1;Gn(n[u]).subscribe(ut(o,d=>{f||(f=!0,l--),s[u]=d},()=>c--,void 0,()=>{(!c||!f)&&(l||o.next(r?xm(r,s):s),o.complete())}))}});return t?i.pipe(vm(t)):i}function p1(e,t){return mt((n,r)=>{let i=0;n.subscribe(ut(r,o=>e.call(t,o,i++)&&r.next(o)))})}function Xc(e){return mt((t,n)=>{let r=null,i=!1,o;r=t.subscribe(ut(n,void 0,void 0,a=>{o=Gn(e(a,Xc(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function RO(e,t,n,r,i){return(o,a)=>{let s=n,c=t,l=0;o.subscribe(ut(a,u=>{let f=l++;c=s?e(c,u,f):(s=!0,u),r&&a.next(c)},i&&(()=>{s&&a.next(c),a.complete()})))}}function Es(e,t){return Ge(t)?Wn(e,t,1):Wn(e,1)}function Qc(e){return mt((t,n)=>{let r=!1;t.subscribe(ut(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function ye(e){return e<=0?()=>Mo:mt((t,n)=>{let r=0;t.subscribe(ut(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Yw(e){return Ke(()=>e)}function bm(e=Ise){return mt((t,n)=>{let r=!1;t.subscribe(ut(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function Ise(){return new Ss}function Kc(e){return mt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function ma(e,t){let n=arguments.length>=2;return r=>r.pipe(e?p1((i,o)=>e(i,o,r)):G1,ye(1),n?Qc(t):bm(()=>new Ss))}function e6(e){return e<=0?()=>Mo:mt((t,n)=>{let r=[];t.subscribe(ut(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Xw(e,t){let n=arguments.length>=2;return r=>r.pipe(e?p1((i,o)=>e(i,o,r)):G1,e6(1),n?Qc(t):bm(()=>new Ss))}function Qw(e,t){return mt(RO(e,t,arguments.length>=2,!0))}function Kw(...e){let t=Wc(e);return mt((n,r)=>{(t?J0(e,n,t):J0(e,n)).subscribe(r)})}function h1(e,t){return mt((n,r)=>{let i=null,o=0,a=!1,s=()=>a&&!i&&r.complete();n.subscribe(ut(r,c=>{i?.unsubscribe();let l=0,u=o++;Gn(e(c,u)).subscribe(i=ut(r,f=>r.next(t?t(c,f,u,l++):f),()=>{i=null,s()}))},()=>{a=!0,s()}))})}function Zw(e){return mt((t,n)=>{Gn(e).subscribe(ut(n,()=>n.complete(),L8)),!n.closed&&t.subscribe(n)})}function ar(e,t,n){let r=Ge(e)||t||n?{next:e,error:t,complete:n}:e;return r?mt((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let s=!0;i.subscribe(ut(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;s=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;s=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;s&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):G1}var DP="https://g.co/ng/security#xss",xe=class extends Error{constructor(t,n){super(n9(t,n)),this.code=t}};function n9(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}var mS=class extends f1{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),a=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),a=c.complete?.bind(c)}this.__isAsync&&(o=Jw(o),i&&(i=Jw(i)),a&&(a=Jw(a)));let s=super.subscribe({next:i,error:o,complete:a});return t instanceof or&&t.add(s),s}};function Jw(e){return t=>{setTimeout(e,void 0,t)}}var jt=mS;var rt=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(rt||{});function Pi(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Pi).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function OO(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var zP=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(zP||{}),ya=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(ya||{});function j8(e){return{toString:e}.toString()}var Pn=globalThis;var s6={},wo=[];function Gt(e){for(let t in e)if(e[t]===Gt)return t;throw Error("Could not find renamed property on target object.")}function Fse(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}var Rse=Gt({\u0275cmp:Gt}),Ose=Gt({\u0275dir:Gt}),Pse=Gt({\u0275pipe:Gt}),$se=Gt({\u0275mod:Gt}),Tm=Gt({\u0275fac:Gt}),V8=Gt({__NG_ELEMENT_ID__:Gt}),PO=Gt({__NG_ENV_ID__:Gt}),Ur=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Ur||{});function HP(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function gS(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],a=n[r++],s=n[r++];e.setAttribute(t,a,s,o)}else{let o=i,a=n[++r];Bse(o)?e.setProperty(t,o,a):e.setAttribute(t,o,a),r++}}return r}function LP(e){return e===3||e===4||e===6}function Bse(e){return e.charCodeAt(0)===64}function _8(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?$O(e,n,i,null,t[++r]):$O(e,n,i,null,null))}}return e}function $O(e,t,n,r,i){let o=0,a=e.length;if(t===-1)a=-1;else for(;o<e.length;){let s=e[o++];if(typeof s=="number"){if(s===t){a=-1;break}else if(s>t){a=o-1;break}}}for(;o<e.length;){let s=e[o];if(typeof s=="number")break;if(s===n){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}a!==-1&&(e.splice(a,0,t),o=a+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var AP="ng-template";function Use(e,t,n){let r=0,i=!0;for(;r<e.length;){let o=e[r++];if(typeof o=="string"&&i){let a=e[r++];if(n&&o==="class"&&HP(a.toLowerCase(),t,0)!==-1)return!0}else if(o===1){for(;r<e.length&&typeof(o=e[r++])=="string";)if(o.toLowerCase()===t)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function VP(e){return e.type===4&&e.value!==AP}function jse(e,t,n){let r=e.type===4&&!n?AP:e.value;return t===r}function qse(e,t,n){let r=4,i=e.attrs||[],o=Yse(i),a=!1;for(let s=0;s<t.length;s++){let c=t[s];if(typeof c=="number"){if(!a&&!p2(r)&&!p2(c))return!1;if(a&&p2(c))continue;a=!1,r=c|r&1;continue}if(!a)if(r&4){if(r=2|r&1,c!==""&&!jse(e,c,n)||c===""&&t.length===1){if(p2(r))return!1;a=!0}}else{let l=r&8?c:t[++s];if(r&8&&e.attrs!==null){if(!Use(e.attrs,l,n)){if(p2(r))return!1;a=!0}continue}let u=r&8?"class":c,f=Gse(u,i,VP(e),n);if(f===-1){if(p2(r))return!1;a=!0;continue}if(l!==""){let d;f>o?d="":d=i[f+1].toLowerCase();let p=r&8?d:null;if(p&&HP(p,l,0)!==-1||r&2&&l!==d){if(p2(r))return!1;a=!0}}}}return p2(r)||a}function p2(e){return(e&1)===0}function Gse(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let a=t[i];if(a===e)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let s=t[++i];for(;typeof s=="string";)s=t[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return Xse(t,e)}function NP(e,t,n=!1){for(let r=0;r<t.length;r++)if(qse(e,t[r],n))return!0;return!1}function Wse(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function Yse(e){for(let t=0;t<e.length;t++){let n=e[t];if(LP(n))return t}return e.length}function Xse(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Qse(e,t){e:for(let n=0;n<t.length;n++){let r=t[n];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function BO(e,t){return e?":not("+t.trim()+")":t}function Kse(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let a=e[n];if(typeof a=="string")if(r&2){let s=e[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!p2(a)&&(t+=BO(o,i),i=""),r=a,o=o||!p2(r);n++}return i!==""&&(t+=BO(o,i)),t}function Zse(e){return e.map(Kse).join(",")}function Jse(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!p2(i))break;i=o}r++}return{attrs:t,classes:n}}function Ce(e){return j8(()=>{let t=FP(e),n=k(x({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===zP.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||ya.Emulated,styles:e.styles||wo,_:null,schemas:e.schemas||null,tView:null,id:""});RP(n);let r=e.dependencies;return n.directiveDefs=jO(r,!1),n.pipeDefs=jO(r,!0),n.id=nce(n),n})}function ece(e){return e3(e)||_P(e)}function tce(e){return e!==null}function Cr(e){return j8(()=>({type:e.type,bootstrap:e.bootstrap||wo,declarations:e.declarations||wo,imports:e.imports||wo,exports:e.exports||wo,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function UO(e,t){if(e==null)return s6;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,a,s=Ur.None;Array.isArray(i)?(s=i[0],o=i[1],a=i[2]??o):(o=i,a=i),t?(n[o]=s!==Ur.None?[r,s]:r,t[o]=a):n[o]=r}return n}function kt(e){return j8(()=>{let t=FP(e);return RP(t),t})}function vE(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone===!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function e3(e){return e[Rse]||null}function _P(e){return e[Ose]||null}function kP(e){return e[Pse]||null}function TP(e){let t=e3(e)||_P(e)||kP(e);return t!==null?t.standalone:!1}function IP(e,t){let n=e[$se]||null;if(!n&&t===!0)throw new Error(`Type ${Pi(e)} does not have '\u0275mod' property.`);return n}function FP(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||s6,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||wo,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:UO(e.inputs,t),outputs:UO(e.outputs),debugInfo:null}}function RP(e){e.features?.forEach(t=>t(e))}function jO(e,t){if(!e)return null;let n=t?kP:ece;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(tce)}function nce(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}var As=0,Ye=1,$e=2,jr=3,h2=4,W1=5,k8=6,T8=7,So=8,c6=9,Ds=10,zn=11,I8=12,qO=13,m6=14,m2=15,q8=16,t6=17,zs=18,r9=19,OP=20,Jc=21,eS=22,P4=23,$i=25,PP=1;var $4=7,Im=8,l6=9,g1=10,yE=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(yE||{});function R4(e){return Array.isArray(e)&&typeof e[PP]=="object"}function Vs(e){return Array.isArray(e)&&e[PP]===!0}function xE(e){return(e.flags&4)!==0}function i9(e){return e.componentOffset>-1}function o9(e){return(e.flags&1)===1}function t3(e){return!!e.template}function rce(e){return(e[$e]&512)!==0}var ice="svg",oce="math",ace=!1;function sce(){return ace}function xa(e){for(;Array.isArray(e);)e=e[As];return e}function $P(e,t){return xa(t[e])}function Eo(e,t){return xa(t[e.index])}function CE(e,t){return e.data[t]}function BP(e,t){return e[t]}function i3(e,t){let n=t[e];return R4(n)?n:n[As]}function cce(e){return(e[$e]&4)===4}function bE(e){return(e[$e]&128)===128}function lce(e){return Vs(e[jr])}function u6(e,t){return t==null?null:e[t]}function UP(e){e[t6]=0}function uce(e){e[$e]&1024||(e[$e]|=1024,bE(e)&&F8(e))}function fce(e,t){for(;e>0;)t=t[m6],e--;return t}function ME(e){return!!(e[$e]&9216||e[P4]?.dirty)}function vS(e){ME(e)?F8(e):e[$e]&64&&(sce()?(e[$e]|=1024,F8(e)):e[Ds].changeDetectionScheduler?.notify())}function F8(e){e[Ds].changeDetectionScheduler?.notify();let t=R8(e);for(;t!==null&&!(t[$e]&8192||(t[$e]|=8192,!bE(t)));)t=R8(t)}function jP(e,t){if((e[$e]&256)===256)throw new xe(911,!1);e[Jc]===null&&(e[Jc]=[]),e[Jc].push(t)}function dce(e,t){if(e[Jc]===null)return;let n=e[Jc].indexOf(t);n!==-1&&e[Jc].splice(n,1)}function R8(e){let t=e[jr];return Vs(t)?t[jr]:t}var Je={lFrame:ZP(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function pce(){return Je.lFrame.elementDepthCount}function hce(){Je.lFrame.elementDepthCount++}function mce(){Je.lFrame.elementDepthCount--}function qP(){return Je.bindingsEnabled}function GP(){return Je.skipHydrationRootTNode!==null}function gce(e){return Je.skipHydrationRootTNode===e}function vce(){Je.skipHydrationRootTNode=null}function it(){return Je.lFrame.lView}function Yn(){return Je.lFrame.tView}function fi(e){return Je.lFrame.contextLView=e,e[So]}function di(e){return Je.lFrame.contextLView=null,e}function pi(){let e=WP();for(;e!==null&&e.type===64;)e=e.parent;return e}function WP(){return Je.lFrame.currentTNode}function yce(){let e=Je.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Q4(e,t){let n=Je.lFrame;n.currentTNode=e,n.isParent=t}function wE(){return Je.lFrame.isParent}function SE(){Je.lFrame.isParent=!1}function xce(){return Je.lFrame.contextLView}function EE(){let e=Je.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Cce(){return Je.lFrame.bindingIndex}function bce(e){return Je.lFrame.bindingIndex=e}function g6(){return Je.lFrame.bindingIndex++}function YP(e){let t=Je.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Mce(){return Je.lFrame.inI18n}function wce(e,t){let n=Je.lFrame;n.bindingIndex=n.bindingRootIndex=e,yS(t)}function Sce(){return Je.lFrame.currentDirectiveIndex}function yS(e){Je.lFrame.currentDirectiveIndex=e}function Ece(e){let t=Je.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function XP(){return Je.lFrame.currentQueryIndex}function DE(e){Je.lFrame.currentQueryIndex=e}function Dce(e){let t=e[Ye];return t.type===2?t.declTNode:t.type===1?e[W1]:null}function QP(e,t,n){if(n&rt.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&rt.Host);)if(i=Dce(o),i===null||(o=o[m6],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=Je.lFrame=KP();return r.currentTNode=t,r.lView=e,!0}function zE(e){let t=KP(),n=e[Ye];Je.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function KP(){let e=Je.lFrame,t=e===null?null:e.child;return t===null?ZP(e):t}function ZP(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function JP(){let e=Je.lFrame;return Je.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var e$=JP;function HE(){let e=JP();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function zce(e){return(Je.lFrame.contextLView=fce(e,Je.lFrame.contextLView))[So]}function K4(){return Je.lFrame.selectedIndex}function B4(e){Je.lFrame.selectedIndex=e}function a9(){let e=Je.lFrame;return CE(e.tView,e.selectedIndex)}function Hce(){return Je.lFrame.currentNamespace}var t$=!0;function s9(){return t$}function c9(e){t$=e}function Lce(){return v6(pi(),it())}function v6(e,t){return new qr(Eo(e,t))}var qr=(()=>{let t=class t{constructor(r){this.nativeElement=r}};t.__NG_ELEMENT_ID__=Lce;let e=t;return e})();function Ace(e){return e instanceof qr?e.nativeElement:e}function Vce(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function Nce(e){return e.flat(Number.POSITIVE_INFINITY)}function LE(e,t){e.forEach(n=>Array.isArray(n)?LE(n,t):t(n))}function n$(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Fm(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function _ce(e,t){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function kce(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function Tce(e,t,n){let r=G8(e,t);return r>=0?e[r|1]=n:(r=~r,kce(e,r,t,n)),r}function tS(e,t){let n=G8(e,t);if(n>=0)return e[n|1]}function G8(e,t){return Ice(e,t,1)}function Ice(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),a=e[o<<n];if(t===a)return o<<n;a>t?i=o:r=o+1}return~(i<<n)}function Fce(){return this._results[Symbol.iterator]()}var xS=class e{get changes(){return this._changes??=new jt}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Fce)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=Nce(t);(this._changesDetected=!Vce(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function r$(e){return(e.flags&128)===128}var CS;function i$(e){CS=e}function o$(){if(CS!==void 0)return CS;if(typeof document<"u")return document;throw new xe(210,!1)}function ue(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function br(e){return{providers:e.providers||[],imports:e.imports||[]}}function l9(e){return GO(e,s$)||GO(e,c$)}function a$(e){return l9(e)!==null}function GO(e,t){return e.hasOwnProperty(t)?e[t]:null}function Rce(e){let t=e&&(e[s$]||e[c$]);return t||null}function WO(e){return e&&(e.hasOwnProperty(YO)||e.hasOwnProperty(Oce))?e[YO]:null}var s$=Gt({\u0275prov:Gt}),YO=Gt({\u0275inj:Gt}),c$=Gt({ngInjectableDef:Gt}),Oce=Gt({ngInjectorDef:Gt}),ze=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ue({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}},u9=new ze("",{providedIn:"root",factory:()=>Pce}),Pce="ng",AE=new ze(""),Ma=new ze("",{providedIn:"platform",factory:()=>"unknown"});var VE=new ze("",{providedIn:"root",factory:()=>o$().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var $ce=Gt({__forward_ref__:Gt});function wa(e){return e.__forward_ref__=wa,e.toString=function(){return Pi(this())},e}function Oi(e){return l$(e)?e():e}function l$(e){return typeof e=="function"&&e.hasOwnProperty($ce)&&e.__forward_ref__===wa}function u$(e){return e&&!!e.\u0275providers}function U4(e){return typeof e=="string"?e:e==null?"":String(e)}function Bce(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():U4(e)}function Uce(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new xe(-200,e)}function NE(e,t){throw new xe(-201,!1)}var bS;function f$(){return bS}function m1(e){let t=bS;return bS=e,t}function d$(e,t,n){let r=l9(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&rt.Optional)return null;if(t!==void 0)return t;NE(e,"Injector")}var jce={},O8=jce,MS="__NG_DI_FLAG__",Rm="ngTempTokenPath",qce="ngTokenPath",Gce=/\n/gm,Wce="\u0275",XO="__source",o6;function Yce(){return o6}function Zc(e){let t=o6;return o6=e,t}function Xce(e,t=rt.Default){if(o6===void 0)throw new xe(-203,!1);return o6===null?d$(e,void 0,t):o6.get(e,t&rt.Optional?null:void 0,t)}function ge(e,t=rt.Default){return(f$()||Xce)(Oi(e),t)}function ce(e,t=rt.Default){return ge(e,f9(t))}function f9(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function wS(e){let t=[];for(let n=0;n<e.length;n++){let r=Oi(e[n]);if(Array.isArray(r)){if(r.length===0)throw new xe(900,!1);let i,o=rt.Default;for(let a=0;a<r.length;a++){let s=r[a],c=Qce(s);typeof c=="number"?c===-1?i=s.token:o|=c:i=s}t.push(ge(i,o))}else t.push(ge(r))}return t}function p$(e,t){return e[MS]=t,e.prototype[MS]=t,e}function Qce(e){return e[MS]}function Kce(e,t,n,r){let i=e[Rm];throw t[XO]&&i.unshift(t[XO]),e.message=Zce(`
`+e.message,i,n,r),e[qce]=i,e[Rm]=null,e}function Zce(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==Wce?e.slice(2):e;let i=Pi(t);if(Array.isArray(t))i=t.map(Pi).join(" -> ");else if(typeof t=="object"){let o=[];for(let a in t)if(t.hasOwnProperty(a)){let s=t[a];o.push(a+":"+(typeof s=="string"?JSON.stringify(s):Pi(s)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Gce,`
  `)}`}var Jce="h",e3e="b";var t3e=()=>null;function _E(e,t,n=!1){return t3e(e,t,n)}var Mm="__parameters__";function n3e(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function h$(e,t,n){return j8(()=>{let r=n3e(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let a=new i(...o);return s.annotation=a,s;function s(c,l,u){let f=c.hasOwnProperty(Mm)?c[Mm]:Object.defineProperty(c,Mm,{value:[]})[Mm];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(a),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var d9=p$(h$("Optional"),8);var kE=p$(h$("SkipSelf"),4);function j4(e,t){let n=e.hasOwnProperty(Tm);return n?e[Tm]:null}var f6=new ze(""),m$=new ze("",-1),g$=new ze(""),Om=class{get(t,n=O8){if(n===O8){let r=new Error(`NullInjectorError: No provider for ${Pi(t)}!`);throw r.name="NullInjectorError",r}return n}};function p9(e){return{\u0275providers:e}}function r3e(...e){return{\u0275providers:v$(!0,e),\u0275fromNgModule:!0}}function v$(e,...t){let n=[],r=new Set,i,o=a=>{n.push(a)};return LE(t,a=>{let s=a;SS(s,o,[],r)&&(i||=[],i.push(s))}),i!==void 0&&y$(i,o),n}function y$(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];TE(i,o=>{t(o,r)})}}function SS(e,t,n,r){if(e=Oi(e),!e)return!1;let i=null,o=WO(e),a=!o&&e3(e);if(!o&&!a){let c=e.ngModule;if(o=WO(c),o)i=c;else return!1}else{if(a&&!a.standalone)return!1;i=e}let s=r.has(i);if(a){if(s)return!1;if(r.add(i),a.dependencies){let c=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let l of c)SS(l,t,n,r)}}else if(o){if(o.imports!=null&&!s){r.add(i);let l;try{LE(o.imports,u=>{SS(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&y$(l,t)}if(!s){let l=j4(i)||(()=>new i);t({provide:i,useFactory:l,deps:wo},i),t({provide:g$,useValue:i,multi:!0},i),t({provide:f6,useValue:()=>ge(i),multi:!0},i)}let c=o.providers;if(c!=null&&!s){let l=e;TE(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function TE(e,t){for(let n of e)u$(n)&&(n=n.\u0275providers),Array.isArray(n)?TE(n,t):t(n)}var i3e=Gt({provide:String,useValue:Gt});function x$(e){return e!==null&&typeof e=="object"&&i3e in e}function o3e(e){return!!(e&&e.useExisting)}function a3e(e){return!!(e&&e.useFactory)}function d6(e){return typeof e=="function"}function s3e(e){return!!e.useClass}var h9=new ze(""),Lm={},c3e={},nS;function IE(){return nS===void 0&&(nS=new Om),nS}var Bi=class{},P8=class extends Bi{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,DS(t,a=>this.processProvider(a)),this.records.set(m$,n6(void 0,this)),i.has("environment")&&this.records.set(Bi,n6(void 0,this));let o=this.records.get(h9);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(g$,wo,rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=Zc(this),r=m1(void 0),i;try{return t()}finally{Zc(n),m1(r)}}get(t,n=O8,r=rt.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(PO))return t[PO](this);r=f9(r);let i,o=Zc(this),a=m1(void 0);try{if(!(r&rt.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=p3e(t)&&l9(t);l&&this.injectableDefInScope(l)?c=n6(ES(t),Lm):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let s=r&rt.Self?IE():this.parent;return n=r&rt.Optional&&n===O8?null:n,s.get(t,n)}catch(s){if(s.name==="NullInjectorError"){if((s[Rm]=s[Rm]||[]).unshift(Pi(t)),o)throw s;return Kce(s,t,"R3InjectorError",this.source)}else throw s}finally{m1(a),Zc(o)}}resolveInjectorInitializers(){let t=Zc(this),n=m1(void 0),r;try{let i=this.get(f6,wo,rt.Self);for(let o of i)o()}finally{Zc(t),m1(n)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Pi(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(t){t=Oi(t);let n=d6(t)?t:Oi(t&&t.provide),r=u3e(t);if(!d6(t)&&t.multi===!0){let i=this.records.get(n);i||(i=n6(void 0,Lm,!0),i.factory=()=>wS(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Lm&&(n.value=c3e,n.value=n.factory()),typeof n.value=="object"&&n.value&&d3e(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Oi(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ES(e){let t=l9(e),n=t!==null?t.factory:j4(e);if(n!==null)return n;if(e instanceof ze)throw new xe(204,!1);if(e instanceof Function)return l3e(e);throw new xe(204,!1)}function l3e(e){if(e.length>0)throw new xe(204,!1);let n=Rce(e);return n!==null?()=>n.factory(e):()=>new e}function u3e(e){if(x$(e))return n6(void 0,e.useValue);{let t=C$(e);return n6(t,Lm)}}function C$(e,t,n){let r;if(d6(e)){let i=Oi(e);return j4(i)||ES(i)}else if(x$(e))r=()=>Oi(e.useValue);else if(a3e(e))r=()=>e.useFactory(...wS(e.deps||[]));else if(o3e(e))r=()=>ge(Oi(e.useExisting));else{let i=Oi(e&&(e.useClass||e.provide));if(f3e(e))r=()=>new i(...wS(e.deps));else return j4(i)||ES(i)}return r}function n6(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function f3e(e){return!!e.deps}function d3e(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function p3e(e){return typeof e=="function"||typeof e=="object"&&e instanceof ze}function DS(e,t){for(let n of e)Array.isArray(n)?DS(n,t):n&&u$(n)?DS(n.\u0275providers,t):t(n)}function Sa(e,t){e instanceof P8&&e.assertNotDestroyed();let n,r=Zc(e),i=m1(void 0);try{return t()}finally{Zc(r),m1(i)}}function h3e(e){if(!f$()&&!Yce())throw new xe(-203,!1)}function m3e(e){let t=Pn.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function g3e(e){return typeof e=="function"}var zS=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function b$(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function Do(){return M$}function M$(e){return e.type.prototype.ngOnChanges&&(e.setInput=y3e),v3e}Do.ngInherit=!0;function v3e(){let e=S$(this),t=e?.current;if(t){let n=e.previous;if(n===s6)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function y3e(e,t,n,r,i){let o=this.declaredInputs[r],a=S$(e)||x3e(e,{previous:s6,current:null}),s=a.current||(a.current={}),c=a.previous,l=c[o];s[o]=new zS(l&&l.currentValue,n,c===s6),b$(e,t,i,n)}var w$="__ngSimpleChanges__";function S$(e){return e[w$]||null}function x3e(e,t){return e[w$]=t}var QO=null;var ga=function(e,t,n){QO?.(e,t,n)};function C3e(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let a=M$(t);(n.preOrderHooks??=[]).push(e,a),(n.preOrderCheckHooks??=[]).push(e,a)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function m9(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:s,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;a&&(e.contentHooks??=[]).push(-n,a),s&&((e.contentHooks??=[]).push(n,s),(e.contentCheckHooks??=[]).push(n,s)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Am(e,t,n){E$(e,t,3,n)}function Vm(e,t,n,r){(e[$e]&3)===n&&E$(e,t,n,r)}function rS(e,t){let n=e[$e];(n&3)===t&&(n&=16383,n+=1,e[$e]=n)}function E$(e,t,n,r){let i=r!==void 0?e[t6]&65535:0,o=r??-1,a=t.length-1,s=0;for(let c=i;c<a;c++)if(typeof t[c+1]=="number"){if(s=t[c],r!=null&&s>=r)break}else t[c]<0&&(e[t6]+=65536),(s<o||o==-1)&&(b3e(e,n,t,c),e[t6]=(e[t6]&4294901760)+c+2),c++}function KO(e,t){ga(4,e,t);let n=Br(null);try{t.call(e)}finally{Br(n),ga(5,e,t)}}function b3e(e,t,n,r){let i=n[r]<0,o=n[r+1],a=i?-n[r]:n[r],s=e[a];i?e[$e]>>14<e[t6]>>16&&(e[$e]&3)===t&&(e[$e]+=16384,KO(s,o)):KO(s,o)}var a6=-1,q4=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function M3e(e){return e instanceof q4}function w3e(e){return(e.flags&8)!==0}function S3e(e){return(e.flags&16)!==0}function D$(e){return e!==a6}function Pm(e){return e&32767}function E3e(e){return e>>16}function $m(e,t){let n=E3e(e),r=t;for(;n>0;)r=r[m6],n--;return r}var HS=!0;function Bm(e){let t=HS;return HS=e,t}var D3e=256,z$=D3e-1,H$=5,z3e=0,va={};function H3e(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(V8)&&(r=n[V8]),r==null&&(r=n[V8]=z3e++);let i=r&z$,o=1<<i;t.data[e+(i>>H$)]|=o}function Um(e,t){let n=L$(e,t);if(n!==-1)return n;let r=t[Ye];r.firstCreatePass&&(e.injectorIndex=t.length,iS(r.data,e),iS(t,null),iS(r.blueprint,null));let i=FE(e,t),o=e.injectorIndex;if(D$(i)){let a=Pm(i),s=$m(i,t),c=s[Ye].data;for(let l=0;l<8;l++)t[o+l]=s[a+l]|c[a+l]}return t[o+8]=i,o}function iS(e,t){e.push(0,0,0,0,0,0,0,0,t)}function L$(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function FE(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=k$(i),r===null)return a6;if(n++,i=i[m6],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return a6}function LS(e,t,n){H3e(e,t,n)}function L3e(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(LP(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===t)return n[i+1];i=i+2}}}return null}function A$(e,t,n){if(n&rt.Optional||e!==void 0)return e;NE(t,"NodeInjector")}function V$(e,t,n,r){if(n&rt.Optional&&r===void 0&&(r=null),!(n&(rt.Self|rt.Host))){let i=e[c6],o=m1(void 0);try{return i?i.get(t,r,n&rt.Optional):d$(t,r,n&rt.Optional)}finally{m1(o)}}return A$(r,t,n)}function N$(e,t,n,r=rt.Default,i){if(e!==null){if(t[$e]&2048&&!(r&rt.Self)){let a=_3e(e,t,n,r,va);if(a!==va)return a}let o=_$(e,t,n,r,va);if(o!==va)return o}return V$(t,n,r,i)}function _$(e,t,n,r,i){let o=V3e(n);if(typeof o=="function"){if(!QP(t,e,r))return r&rt.Host?A$(i,n,r):V$(t,n,r,i);try{let a;if(a=o(r),a==null&&!(r&rt.Optional))NE(n);else return a}finally{e$()}}else if(typeof o=="number"){let a=null,s=L$(e,t),c=a6,l=r&rt.Host?t[m2][W1]:null;for((s===-1||r&rt.SkipSelf)&&(c=s===-1?FE(e,t):t[s+8],c===a6||!JO(r,!1)?s=-1:(a=t[Ye],s=Pm(c),t=$m(c,t)));s!==-1;){let u=t[Ye];if(ZO(o,s,u.data)){let f=A3e(s,t,n,a,r,l);if(f!==va)return f}c=t[s+8],c!==a6&&JO(r,t[Ye].data[s+8]===l)&&ZO(o,s,t)?(a=u,s=Pm(c),t=$m(c,t)):s=-1}}return i}function A3e(e,t,n,r,i,o){let a=t[Ye],s=a.data[e+8],c=r==null?i9(s)&&HS:r!=a&&(s.type&3)!==0,l=i&rt.Host&&o===s,u=Nm(s,a,n,c,l);return u!==null?G4(t,a,u,s):va}function Nm(e,t,n,r,i){let o=e.providerIndexes,a=t.data,s=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,f=r?s:s+u,d=i?s+u:l;for(let p=f;p<d;p++){let h=a[p];if(p<c&&n===h||p>=c&&h.type===n)return p}if(i){let p=a[c];if(p&&t3(p)&&p.type===n)return c}return null}function G4(e,t,n,r){let i=e[n],o=t.data;if(M3e(i)){let a=i;a.resolving&&Uce(Bce(o[n]));let s=Bm(a.canSeeViewProviders);a.resolving=!0;let c,l=a.injectImpl?m1(a.injectImpl):null,u=QP(e,r,rt.Default);try{i=e[n]=a.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&C3e(n,o[n],t)}finally{l!==null&&m1(l),Bm(s),a.resolving=!1,e$()}}return i}function V3e(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(V8)?e[V8]:void 0;return typeof t=="number"?t>=0?t&z$:N3e:t}function ZO(e,t,n){let r=1<<e;return!!(n[t+(e>>H$)]&r)}function JO(e,t){return!(e&rt.Self)&&!(e&rt.Host&&t)}var O4=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return N$(this._tNode,this._lView,t,f9(r),n)}};function N3e(){return new O4(pi(),it())}function Ea(e){return j8(()=>{let t=e.prototype.constructor,n=t[Tm]||AS(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[Tm]||AS(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function AS(e){return l$(e)?()=>{let t=AS(Oi(e));return t&&t()}:j4(e)}function _3e(e,t,n,r,i){let o=e,a=t;for(;o!==null&&a!==null&&a[$e]&2048&&!(a[$e]&512);){let s=_$(o,a,n,r|rt.Self,va);if(s!==va)return s;let c=o.parent;if(!c){let l=a[OP];if(l){let u=l.get(n,va,r);if(u!==va)return u}c=k$(a),a=a[m6]}o=c}return i}function k$(e){let t=e[Ye],n=t.type;return n===2?t.declTNode:n===1?e[W1]:null}function RE(e){return L3e(pi(),e)}function eP(e,t=null,n=null,r){let i=T$(e,t,n,r);return i.resolveInjectorInitializers(),i}function T$(e,t=null,n=null,r,i=new Set){let o=[n||wo,r3e(e)];return r=r||(typeof e=="object"?void 0:Pi(e)),new P8(o,t||IE(),r||null,i)}var g2=(()=>{let t=class t{static create(r,i){if(Array.isArray(r))return eP({name:""},i,r,"");{let o=r.name??"";return eP({name:o},r.parent,r.providers,o)}}};t.THROW_IF_NOT_FOUND=O8,t.NULL=new Om,t.\u0275prov=ue({token:t,providedIn:"any",factory:()=>ge(m$)}),t.__NG_ELEMENT_ID__=-1;let e=t;return e})(),k3e="ngOriginalError";function oS(e){return e[k3e]}var Ca=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&oS(t);for(;n&&oS(n);)n=oS(n);return n||null}},I$=new ze("",{providedIn:"root",factory:()=>ce(Ca).handleError.bind(void 0)});var F$=!1,T3e=new ze("",{providedIn:"root",factory:()=>F$}),wm;function I3e(){if(wm===void 0&&(wm=null,Pn.trustedTypes))try{wm=Pn.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return wm}function g9(e){return I3e()?.createHTML(e)||e}var Sm;function R$(){if(Sm===void 0&&(Sm=null,Pn.trustedTypes))try{Sm=Pn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Sm}function tP(e){return R$()?.createHTML(e)||e}function nP(e){return R$()?.createScriptURL(e)||e}var Hs=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${DP})`}},VS=class extends Hs{getTypeName(){return"HTML"}},NS=class extends Hs{getTypeName(){return"Style"}},_S=class extends Hs{getTypeName(){return"Script"}},kS=class extends Hs{getTypeName(){return"URL"}},TS=class extends Hs{getTypeName(){return"ResourceURL"}};function v2(e){return e instanceof Hs?e.changingThisBreaksApplicationSecurity:e}function Ns(e,t){let n=F3e(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${DP})`)}return n===t}function F3e(e){return e instanceof Hs&&e.getTypeName()||null}function O$(e){return new VS(e)}function P$(e){return new NS(e)}function $$(e){return new _S(e)}function B$(e){return new kS(e)}function U$(e){return new TS(e)}function R3e(e){let t=new FS(e);return O3e()?new IS(t):t}var IS=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let n=new window.DOMParser().parseFromString(g9(t),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch{return null}}},FS=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let n=this.inertDocument.createElement("template");return n.innerHTML=g9(t),n}};function O3e(){try{return!!new window.DOMParser().parseFromString(g9(""),"text/html")}catch{return!1}}var P3e=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function v9(e){return e=String(e),e.match(P3e)?e:"unsafe:"+e}function _s(e){let t={};for(let n of e.split(","))t[n]=!0;return t}function W8(...e){let t={};for(let n of e)for(let r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}var j$=_s("area,br,col,hr,img,wbr"),q$=_s("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),G$=_s("rp,rt"),$3e=W8(G$,q$),B3e=W8(q$,_s("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),U3e=W8(G$,_s("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rP=W8(j$,B3e,U3e,$3e),W$=_s("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),j3e=_s("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),q3e=_s("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),G3e=W8(W$,j3e,q3e),W3e=_s("script,style,template"),RS=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,r=!0;for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){n=n.firstChild;continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}}return this.buf.join("")}startElement(t){let n=t.nodeName.toLowerCase();if(!rP.hasOwnProperty(n))return this.sanitizedSomething=!0,!W3e.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=t.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),a=o.name,s=a.toLowerCase();if(!G3e.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let c=o.value;W$[s]&&(c=v9(c)),this.buf.push(" ",a,'="',iP(c),'"')}return this.buf.push(">"),!0}endElement(t){let n=t.nodeName.toLowerCase();rP.hasOwnProperty(n)&&!j$.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(iP(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}},Y3e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,X3e=/([^\#-~ |!])/g;function iP(e){return e.replace(/&/g,"&amp;").replace(Y3e,function(t){let n=t.charCodeAt(0),r=t.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(X3e,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Em;function OE(e,t){let n=null;try{Em=Em||R3e(e);let r=t?String(t):"";n=Em.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Em.getInertBodyElement(r)}while(r!==o);let s=new RS().sanitizeChildren(oP(n)||n);return g9(s)}finally{if(n){let r=oP(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function oP(e){return"content"in e&&Q3e(e)?e.content:null}function Q3e(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var y2=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(y2||{});function Y$(e){let t=PE();return t?tP(t.sanitize(y2.HTML,e)||""):Ns(e,"HTML")?tP(v2(e)):OE(o$(),U4(e))}function K3e(e){let t=PE();return t?t.sanitize(y2.URL,e)||"":Ns(e,"URL")?v2(e):v9(U4(e))}function Z3e(e){let t=PE();if(t)return nP(t.sanitize(y2.RESOURCE_URL,e)||"");if(Ns(e,"ResourceURL"))return nP(v2(e));throw new xe(904,!1)}function J3e(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?Z3e:K3e}function X$(e,t,n){return J3e(t,n)(e)}function PE(){let e=it();return e&&e[Ds].sanitizer}var e4e=/^>|^->|<!--|-->|--!>|<!-$/g,t4e=/(<|>)/g,n4e="\u200B$1\u200B";function r4e(e){return e.replace(e4e,t=>t.replace(t4e,n4e))}var Q$=new Map,i4e=0;function o4e(){return i4e++}function a4e(e){Q$.set(e[r9],e)}function s4e(e){Q$.delete(e[r9])}var aP="__ngContext__";function n3(e,t){R4(t)?(e[aP]=t[r9],a4e(t)):e[aP]=t}function K$(e){return e instanceof Function?e():e}function c4e(e){return(e??ce(g2)).get(Ma)==="browser"}var Ls=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Ls||{}),l4e;function $E(e,t){return l4e(e,t)}function r6(e,t,n,r,i){if(r!=null){let o,a=!1;Vs(r)?o=r:R4(r)&&(a=!0,r=r[As]);let s=xa(r);e===0&&n!==null?i==null?nB(t,n,s):qm(t,n,s,i||null,!0):e===1&&n!==null?qm(t,n,s,i||null,!0):e===2?E4e(t,s,a):e===3&&t.destroyNode(s),o!=null&&z4e(t,e,o,n,i)}}function u4e(e,t){return e.createText(t)}function f4e(e,t,n){e.setValue(t,n)}function d4e(e,t){return e.createComment(r4e(t))}function Z$(e,t,n){return e.createElement(t,n)}function p4e(e,t){J$(e,t),t[As]=null,t[W1]=null}function h4e(e,t,n,r,i,o){r[As]=i,r[W1]=t,x9(e,r,n,1,i,o)}function J$(e,t){x9(e,t,t[zn],2,null,null)}function m4e(e){let t=e[I8];if(!t)return aS(e[Ye],e);for(;t;){let n=null;if(R4(t))n=t[I8];else{let r=t[g1];r&&(n=r)}if(!n){for(;t&&!t[h2]&&t!==e;)R4(t)&&aS(t[Ye],t),t=t[jr];t===null&&(t=e),R4(t)&&aS(t[Ye],t),n=t&&t[h2]}t=n}}function g4e(e,t,n,r){let i=g1+r,o=n.length;r>0&&(n[i-1][h2]=t),r<o-g1?(t[h2]=n[i],n$(n,g1+r,t)):(n.push(t),t[h2]=null),t[jr]=n;let a=t[q8];a!==null&&n!==a&&v4e(a,t);let s=t[zs];s!==null&&s.insertView(e),vS(t),t[$e]|=128}function v4e(e,t){let n=e[l6],i=t[jr][jr][m2];t[m2]!==i&&(e[$e]|=yE.HasTransplantedViews),n===null?e[l6]=[t]:n.push(t)}function eB(e,t){let n=e[l6],r=n.indexOf(t);n.splice(r,1)}function jm(e,t){if(e.length<=g1)return;let n=g1+t,r=e[n];if(r){let i=r[q8];i!==null&&i!==e&&eB(i,r),t>0&&(e[n-1][h2]=r[h2]);let o=Fm(e,g1+t);p4e(r[Ye],r);let a=o[zs];a!==null&&a.detachView(o[Ye]),r[jr]=null,r[h2]=null,r[$e]&=-129}return r}function BE(e,t){if(!(t[$e]&256)){let n=t[zn];n.destroyNode&&x9(e,t,n,3,null,null),m4e(t)}}function aS(e,t){if(!(t[$e]&256)){t[$e]&=-129,t[$e]|=256,t[P4]&&pO(t[P4]),x4e(e,t),y4e(e,t),t[Ye].type===1&&t[zn].destroy();let n=t[q8];if(n!==null&&Vs(t[jr])){n!==t[jr]&&eB(n,t);let r=t[zs];r!==null&&r.detachView(e)}s4e(t)}}function y4e(e,t){let n=e.cleanup,r=t[T8];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[n[o+1]];n[o].call(a)}r!==null&&(t[T8]=null);let i=t[Jc];if(i!==null){t[Jc]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}}function x4e(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof q4)){let o=n[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let s=i[o[a]],c=o[a+1];ga(4,s,c);try{c.call(s)}finally{ga(5,s,c)}}else{ga(4,i,o);try{o.call(i)}finally{ga(5,i,o)}}}}}function tB(e,t,n){return C4e(e,t.parent,n)}function C4e(e,t,n){let r=t;for(;r!==null&&r.type&40;)t=r,r=t.parent;if(r===null)return n[As];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===ya.None||o===ya.Emulated)return null}return Eo(r,n)}}function qm(e,t,n,r,i){e.insertBefore(t,n,r,i)}function nB(e,t,n){e.appendChild(t,n)}function sP(e,t,n,r,i){r!==null?qm(e,t,n,r,i):nB(e,t,n)}function b4e(e,t,n,r){e.removeChild(t,n,r)}function UE(e,t){return e.parentNode(t)}function M4e(e,t){return e.nextSibling(t)}function rB(e,t,n){return S4e(e,t,n)}function w4e(e,t,n){return e.type&40?Eo(e,n):null}var S4e=w4e,cP;function y9(e,t,n,r){let i=tB(e,r,t),o=t[zn],a=r.parent||t[W1],s=rB(a,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)sP(o,i,n[c],s,!1);else sP(o,i,n,s,!1);cP!==void 0&&cP(o,r,t,n,i)}function _m(e,t){if(t!==null){let n=t.type;if(n&3)return Eo(t,e);if(n&4)return OS(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return _m(e,r);{let i=e[t.index];return Vs(i)?OS(-1,i):xa(i)}}else{if(n&32)return $E(t,e)()||xa(e[t.index]);{let r=iB(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=R8(e[m2]);return _m(i,r)}else return _m(e,t.next)}}}return null}function iB(e,t){if(t!==null){let r=e[m2][W1],i=t.projection;return r.projection[i]}return null}function OS(e,t){let n=g1+e+1;if(n<t.length){let r=t[n],i=r[Ye].firstChild;if(i!==null)return _m(r,i)}return t[$4]}function E4e(e,t,n){let r=UE(e,t);r&&b4e(e,r,t,n)}function jE(e,t,n,r,i,o,a){for(;n!=null;){let s=r[n.index],c=n.type;if(a&&t===0&&(s&&n3(xa(s),r),n.flags|=2),(n.flags&32)!==32)if(c&8)jE(e,t,n.child,r,i,o,!1),r6(t,e,i,s,o);else if(c&32){let l=$E(n,r),u;for(;u=l();)r6(t,e,i,u,o);r6(t,e,i,s,o)}else c&16?oB(e,t,r,n,i,o):r6(t,e,i,s,o);n=a?n.projectionNext:n.next}}function x9(e,t,n,r,i,o){jE(n,r,e.firstChild,t,i,o,!1)}function D4e(e,t,n){let r=t[zn],i=tB(e,n,t),o=n.parent||t[W1],a=rB(o,n,t);oB(r,0,t,n,i,a)}function oB(e,t,n,r,i,o){let a=n[m2],c=a[W1].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];r6(t,e,i,u,o)}else{let l=c,u=a[jr];r$(r)&&(l.flags|=128),jE(e,t,l,u,i,o,!0)}}function z4e(e,t,n,r,i){let o=n[$4],a=xa(n);o!==a&&r6(t,e,r,o,i);for(let s=g1;s<n.length;s++){let c=n[s];x9(c[Ye],c,e,t,r,o)}}function H4e(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Ls.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ls.Important),e.setStyle(n,r,i,o))}}function L4e(e,t,n){e.setAttribute(t,"style",n)}function aB(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function sB(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&gS(e,t,r),i!==null&&aB(e,t,i),o!==null&&L4e(e,t,o)}var Da={};function O(e=1){cB(Yn(),it(),K4()+e,!1)}function cB(e,t,n,r){if(!r)if((t[$e]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Am(t,o,n)}else{let o=e.preOrderHooks;o!==null&&Vm(t,o,0,n)}B4(n)}function W(e,t=rt.Default){let n=it();if(n===null)return ge(e,t);let r=pi();return N$(r,n,Oi(e),t)}function lB(){let e="invalid";throw new Error(e)}function uB(e,t,n,r,i,o){let a=Br(null);try{let s=null;i&Ur.SignalBased&&(s=t[r][_w]),s!==null&&s.transformFn!==void 0&&(o=s.transformFn(o)),i&Ur.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(t,o)),e.setInput!==null?e.setInput(t,s,o,n,r):b$(t,s,r,o)}finally{Br(a)}}function A4e(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)B4(~i);else{let o=i,a=n[++r],s=n[++r];wce(a,o);let c=t[o];s(2,c)}}}finally{B4(-1)}}function C9(e,t,n,r,i,o,a,s,c,l,u){let f=t.blueprint.slice();return f[As]=i,f[$e]=r|4|128|8|64,(l!==null||e&&e[$e]&2048)&&(f[$e]|=2048),UP(f),f[jr]=f[m6]=e,f[So]=n,f[Ds]=a||e&&e[Ds],f[zn]=s||e&&e[zn],f[c6]=c||e&&e[c6]||null,f[W1]=o,f[r9]=o4e(),f[k8]=u,f[OP]=l,f[m2]=t.type==2?e[m2]:f,f}function y6(e,t,n,r,i){let o=e.data[t];if(o===null)o=V4e(e,t,n,r,i),Mce()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let a=yce();o.injectorIndex=a===null?-1:a.injectorIndex}return Q4(o,!0),o}function V4e(e,t,n,r,i){let o=WP(),a=wE(),s=a?o:o&&o.parent,c=e.data[t]=F4e(e,s,n,t,r,i);return e.firstChild===null&&(e.firstChild=c),o!==null&&(a?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function fB(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function dB(e,t,n,r,i){let o=K4(),a=r&2;try{B4(-1),a&&t.length>$i&&cB(e,t,$i,!1),ga(a?2:0,i),n(r,i)}finally{B4(o),ga(a?3:1,i)}}function qE(e,t,n){if(xE(t)){let r=Br(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let a=i;a<o;a++){let s=e.data[a];if(s.contentQueries){let c=n[a];s.contentQueries(1,c,a)}}}finally{Br(r)}}}function GE(e,t,n){qP()&&(U4e(e,t,n,Eo(n,t)),(n.flags&64)===64&&mB(e,t,n))}function WE(e,t,n=Eo){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],s=a===-1?n(t,e):e[a];e[i++]=s}}}function pB(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=YE(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function YE(e,t,n,r,i,o,a,s,c,l,u){let f=$i+r,d=f+i,p=N4e(f,d),h=typeof l=="function"?l():l;return p[Ye]={type:e,blueprint:p,template:n,queries:null,viewQuery:s,declTNode:t,data:p.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:c,consts:h,incompleteFirstPass:!1,ssrId:u}}function N4e(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Da);return n}function _4e(e,t,n,r){let o=r.get(T3e,F$)||n===ya.ShadowDom,a=e.selectRootElement(t,o);return k4e(a),a}function k4e(e){T4e(e)}var T4e=()=>null;function I4e(e,t,n,r){let i=yB(t);i.push(n),e.firstCreatePass&&xB(e).push(r,i.length-1)}function F4e(e,t,n,r,i,o){let a=t?t.injectorIndex:-1,s=0;return GP()&&(s|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function lP(e,t,n,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let a=t[o];if(a===void 0)continue;r??={};let s,c=Ur.None;Array.isArray(a)?(s=a[0],c=a[1]):s=a;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}e===0?uP(r,n,l,s,c):uP(r,n,l,s)}return r}function uP(e,t,n,r,i){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,r):o=e[n]=[t,r],i!==void 0&&o.push(i)}function R4e(e,t,n){let r=t.directiveStart,i=t.directiveEnd,o=e.data,a=t.attrs,s=[],c=null,l=null;for(let u=r;u<i;u++){let f=o[u],d=n?n.get(f):null,p=d?d.inputs:null,h=d?d.outputs:null;c=lP(0,f.inputs,u,c,p),l=lP(1,f.outputs,u,l,h);let m=c!==null&&a!==null&&!VP(t)?ele(c,u,a):null;s.push(m)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=s,t.inputs=c,t.outputs=l}function O4e(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function XE(e,t,n,r,i,o,a,s){let c=Eo(t,n),l=t.inputs,u;!s&&l!=null&&(u=l[r])?(KE(e,n,u,r,i),i9(t)&&P4e(n,t.index)):t.type&3?(r=O4e(r),i=a!=null?a(i,t.value||"",r):i,o.setProperty(c,r,i)):t.type&12}function P4e(e,t){let n=i3(t,e);n[$e]&16||(n[$e]|=64)}function QE(e,t,n,r){if(qP()){let i=r===null?null:{"":-1},o=q4e(e,n),a,s;o===null?a=s=null:[a,s]=o,a!==null&&hB(e,t,n,a,i,s),i&&G4e(n,r,i)}n.mergedAttrs=_8(n.mergedAttrs,n.attrs)}function hB(e,t,n,r,i,o){for(let l=0;l<r.length;l++)LS(Um(n,t),e,r[l].type);Y4e(n,e.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let a=!1,s=!1,c=fB(e,t,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=_8(n.mergedAttrs,u.hostAttrs),X4e(e,n,t,c,u),W4e(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let f=u.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),a=!0),!s&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),s=!0),c++}R4e(e,n,o)}function $4e(e,t,n,r,i){let o=i.hostBindings;if(o){let a=e.hostBindingOpCodes;a===null&&(a=e.hostBindingOpCodes=[]);let s=~t.index;B4e(a)!=s&&a.push(s),a.push(n,r,o)}}function B4e(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function U4e(e,t,n,r){let i=n.directiveStart,o=n.directiveEnd;i9(n)&&Q4e(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||Um(n,t),n3(r,t);let a=n.initialInputs;for(let s=i;s<o;s++){let c=e.data[s],l=G4(t,e,s,n);if(n3(l,t),a!==null&&J4e(t,s-i,l,c,n,a),t3(c)){let u=i3(n.index,t);u[So]=G4(t,e,s,n)}}}function mB(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,a=Sce();try{B4(o);for(let s=r;s<i;s++){let c=e.data[s],l=t[s];yS(s),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&j4e(c,l)}}finally{B4(-1),yS(a)}}function j4e(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function q4e(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let a=n[o];if(NP(t,a.selectors,!1))if(r||(r=[]),t3(a))if(a.findHostDirectiveDefs!==null){let s=[];i=i||new Map,a.findHostDirectiveDefs(a,s,i),r.unshift(...s,a);let c=s.length;PS(e,t,c)}else r.unshift(a),PS(e,t,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return r===null?null:[r,i]}function PS(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function G4e(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new xe(-301,!1);r.push(t[i],o)}}}function W4e(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;t3(t)&&(n[""]=e)}}function Y4e(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function X4e(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=j4(i.type,!0)),a=new q4(o,t3(i),W);e.blueprint[r]=a,n[r]=a,$4e(e,t,r,fB(e,n,i.hostVars,Da),i)}function Q4e(e,t,n){let r=Eo(t,e),i=pB(n),o=e[Ds].rendererFactory,a=16;n.signals?a=4096:n.onPush&&(a=64);let s=b9(e,C9(e,i,null,a,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=s}function K4e(e,t,n,r,i,o){let a=Eo(e,t);Z4e(t[zn],a,o,e.value,n,r,i)}function Z4e(e,t,n,r,i,o,a){if(o==null)e.removeAttribute(t,i,n);else{let s=a==null?U4(o):a(o,r||"",i);e.setAttribute(t,i,s,n)}}function J4e(e,t,n,r,i,o){let a=o[t];if(a!==null)for(let s=0;s<a.length;){let c=a[s++],l=a[s++],u=a[s++],f=a[s++];uB(r,n,c,l,u,f)}}function ele(e,t,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let a=e[o];for(let s=0;s<a.length;s+=3)if(a[s]===t){r.push(o,a[s+1],a[s+2],n[i+1]);break}}i+=2}return r}function gB(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function vB(e,t){let n=e.contentQueries;if(n!==null){let r=Br(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a!==-1){let s=e.data[a];DE(o),s.contentQueries(2,t[a],a)}}}finally{Br(r)}}}function b9(e,t){return e[I8]?e[qO][h2]=t:e[I8]=t,e[qO]=t,t}function $S(e,t,n){DE(0);let r=Br(null);try{t(e,n)}finally{Br(r)}}function yB(e){return e[T8]||(e[T8]=[])}function xB(e){return e.cleanup||(e.cleanup=[])}function CB(e,t){let n=e[c6],r=n?n.get(Ca,null):null;r&&r.handleError(t)}function KE(e,t,n,r,i){for(let o=0;o<n.length;){let a=n[o++],s=n[o++],c=n[o++],l=t[a],u=e.data[a];uB(u,l,r,s,c,i)}}function bB(e,t,n){let r=$P(t,e);f4e(e[zn],r,n)}function tle(e,t){let n=i3(t,e),r=n[Ye];nle(r,n);let i=n[As];i!==null&&n[k8]===null&&(n[k8]=_E(i,n[c6])),ZE(r,n,n[So])}function nle(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function ZE(e,t,n){zE(t);try{let r=e.viewQuery;r!==null&&$S(1,r,n);let i=e.template;i!==null&&dB(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[zs]?.finishViewCreation(e),e.staticContentQueries&&vB(e,t),e.staticViewQueries&&$S(2,e.viewQuery,n);let o=e.components;o!==null&&rle(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[$e]&=-5,HE()}}function rle(e,t){for(let n=0;n<t.length;n++)tle(e,t[n])}function MB(e,t,n,r){let i=t.tView,a=e[$e]&4096?4096:16,s=C9(e,i,n,a,null,t,null,null,null,r?.injector??null,r?.dehydratedView??null),c=e[t.index];s[q8]=c;let l=e[zs];return l!==null&&(s[zs]=l.createEmbeddedView(i)),ZE(i,s,n),s}function ile(e,t){let n=g1+t;if(n<e.length)return e[n]}function BS(e,t){return!t||t.firstChild===null||r$(e)}function wB(e,t,n,r=!0){let i=t[Ye];if(g4e(i,t,e,n),r){let a=OS(n,e),s=t[zn],c=UE(s,e[$4]);c!==null&&h4e(i,e[W1],s,t,c,a)}let o=t[k8];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ole(e,t){let n=jm(e,t);return n!==void 0&&BE(n[Ye],n),n}function Gm(e,t,n,r,i=!1){for(;n!==null;){let o=t[n.index];o!==null&&r.push(xa(o)),Vs(o)&&ale(o,r);let a=n.type;if(a&8)Gm(e,t,n.child,r);else if(a&32){let s=$E(n,t),c;for(;c=s();)r.push(c)}else if(a&16){let s=iB(t,n);if(Array.isArray(s))r.push(...s);else{let c=R8(t[m2]);Gm(c[Ye],c,s,r,!0)}}n=i?n.projectionNext:n.next}return r}function ale(e,t){for(let n=g1;n<e.length;n++){let r=e[n],i=r[Ye].firstChild;i!==null&&Gm(r[Ye],r,i,t)}e[$4]!==e[As]&&t.push(e[$4])}var SB=[];function sle(e){return e[P4]??cle(e)}function cle(e){let t=SB.pop()??Object.create(ule);return t.lView=e,t}function lle(e){e.lView[P4]!==e&&(e.lView=null,SB.push(e))}var ule=k(x({},uO),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{F8(e.lView)},consumerOnSignalRead(){this.lView[P4]=this}});function EB(e){return zB(e[I8])}function DB(e){return zB(e[h2])}function zB(e){for(;e!==null&&!Vs(e);)e=e[h2];return e}var HB=100;function LB(e,t=!0,n=0){let r=e[Ds],i=r.rendererFactory,o=!1;o||i.begin?.();try{fle(e,n)}catch(a){throw t&&CB(e,a),a}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function fle(e,t){US(e,t);let n=0;for(;ME(e);){if(n===HB)throw new xe(103,!1);n++,US(e,1)}}function dle(e,t,n,r){let i=t[$e];if((i&256)===256)return;let o=!1;!o&&t[Ds].inlineEffectRunner?.flush(),zE(t);let a=null,s=null;!o&&ple(e)&&(s=sle(t),a=fO(s));try{UP(t),bce(e.bindingStartIndex),n!==null&&dB(e,t,n,2,r);let c=(i&3)===3;if(!o)if(c){let f=e.preOrderCheckHooks;f!==null&&Am(t,f,null)}else{let f=e.preOrderHooks;f!==null&&Vm(t,f,0,null),rS(t,0)}if(hle(t),AB(t,0),e.contentQueries!==null&&vB(e,t),!o)if(c){let f=e.contentCheckHooks;f!==null&&Am(t,f)}else{let f=e.contentHooks;f!==null&&Vm(t,f,1),rS(t,1)}A4e(e,t);let l=e.components;l!==null&&NB(t,l,0);let u=e.viewQuery;if(u!==null&&$S(2,u,r),!o)if(c){let f=e.viewCheckHooks;f!==null&&Am(t,f)}else{let f=e.viewHooks;f!==null&&Vm(t,f,2),rS(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[eS]){for(let f of t[eS])f();t[eS]=null}o||(t[$e]&=-73)}catch(c){throw F8(t),c}finally{s!==null&&(dO(s,a),lle(s)),HE()}}function ple(e){return e.type!==2}function AB(e,t){for(let n=EB(e);n!==null;n=DB(n))for(let r=g1;r<n.length;r++){let i=n[r];VB(i,t)}}function hle(e){for(let t=EB(e);t!==null;t=DB(t)){if(!(t[$e]&yE.HasTransplantedViews))continue;let n=t[l6];for(let r=0;r<n.length;r++){let i=n[r],o=i[jr];uce(i)}}}function mle(e,t,n){let r=i3(t,e);VB(r,n)}function VB(e,t){bE(e)&&US(e,t)}function US(e,t){let r=e[Ye],i=e[$e],o=e[P4],a=!!(t===0&&i&16);if(a||=!!(i&64&&t===0),a||=!!(i&1024),a||=!!(o?.dirty&&kw(o)),o&&(o.dirty=!1),e[$e]&=-9217,a)dle(r,e,r.template,e[So]);else if(i&8192){AB(e,1);let s=r.components;s!==null&&NB(e,s,1)}}function NB(e,t,n){for(let r=0;r<t.length;r++)mle(e,t[r],n)}function JE(e){for(e[Ds].changeDetectionScheduler?.notify();e;){e[$e]|=64;let t=R8(e);if(rce(e)&&!t)return e;e=t}return null}var W4=class{get rootNodes(){let t=this._lView,n=t[Ye];return Gm(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[So]}set context(t){this._lView[So]=t}get destroyed(){return(this._lView[$e]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[jr];if(Vs(t)){let n=t[Im],r=n?n.indexOf(this):-1;r>-1&&(jm(t,r),Fm(n,r))}this._attachedToViewContainer=!1}BE(this._lView[Ye],this._lView)}onDestroy(t){jP(this._lView,t)}markForCheck(){JE(this._cdRefInjectingView||this._lView)}detach(){this._lView[$e]&=-129}reattach(){vS(this._lView),this._lView[$e]|=128}detectChanges(){this._lView[$e]|=1024,LB(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,J$(this._lView[Ye],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=t,vS(this._lView)}},Y4=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=yle;let e=t;return e})(),gle=Y4,vle=class extends gle{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=MB(this._declarationLView,this._declarationTContainer,t,{injector:n,dehydratedView:r});return new W4(i)}};function yle(){return M9(pi(),it())}function M9(e,t){return e.type&4?new vle(t,e,v6(e,t)):null}var _Ge=new RegExp(`^(\\d+)*(${e3e}|${Jce})*(.*)`);var xle=()=>null;function jS(e,t){return xle(e,t)}var qS=class{},GS=class{},Wm=class{};function Cle(e){let t=Error(`No component factory found for ${Pi(e)}.`);return t[ble]=e,t}var ble="ngComponent";var WS=class{resolveComponentFactory(t){throw Cle(t)}},w9=(()=>{let t=class t{};t.NULL=new WS;let e=t;return e})(),$8=class{},Y1=(()=>{let t=class t{constructor(){this.destroyNode=null}};t.__NG_ELEMENT_ID__=()=>Mle();let e=t;return e})();function Mle(){let e=it(),t=pi(),n=i3(t.index,e);return(R4(n)?n:e)[zn]}var wle=(()=>{let t=class t{};t.\u0275prov=ue({token:t,providedIn:"root",factory:()=>null});let e=t;return e})(),sS={};function Sle(e){return typeof e=="function"&&e[_w]!==void 0}var fP=new Set;function Y8(e){fP.has(e)||(fP.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function _B(e){return Sle(e)&&typeof e.set=="function"}function eD(e){let t=Br(null);try{return e()}finally{Br(t)}}function kB(e){return Dle(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function Ele(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function Dle(e){return e!==null&&(typeof e=="function"||typeof e=="object")}var YS=class{constructor(){}supports(t){return kB(t)}create(t){return new XS(t)}},zle=(e,t)=>t,XS=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||zle}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let a=!r||n&&n.currentIndex<dP(r,i,o)?n:r,s=dP(a,i,o),c=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(n=n._next,a.previousIndex==null)i++;else{o||(o=[]);let l=s-i,u=c-i;if(l!=u){for(let d=0;d<l;d++){let p=d<o.length?o[d]:o[d]=0,h=p+d;u<=h&&h<l&&(o[d]=p+1)}let f=a.previousIndex;o[f]=u-l}}s!==c&&t(a,s,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!kB(t))throw new xe(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,a;if(Array.isArray(t)){this.length=t.length;for(let s=0;s<this.length;s++)o=t[s],a=this._trackByFn(s,o),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,o,a,s),r=!0):(r&&(n=this._verifyReinsertion(n,o,a,s)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,Ele(t,s=>{a=this._trackByFn(i,s),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,s,a,i),r=!0):(r&&(n=this._verifyReinsertion(n,s,a,i)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new QS(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Ym),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ym),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},QS=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},KS=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Ym=class{constructor(){this.map=new Map}put(t){let n=t.trackById,r=this.map.get(n);r||(r=new KS,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function dP(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function pP(){return new tD([new YS])}var tD=(()=>{let t=class t{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new t(r)}static extend(r){return{provide:t,useFactory:i=>t.create(r,i||pP()),deps:[[t,new kE,new d9]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new xe(901,!1)}};t.\u0275prov=ue({token:t,providedIn:"root",factory:pP});let e=t;return e})();var ks=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=Hle;let e=t;return e})();function Hle(e){return Lle(pi(),it(),(e&16)===16)}function Lle(e,t,n){if(i9(e)&&!n){let r=i3(e.index,t);return new W4(r,r)}else if(e.type&47){let r=t[m2];return new W4(r,t)}return null}var TB=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=Ale,t.__NG_ENV_ID__=r=>r;let e=t;return e})(),ZS=class extends TB{constructor(t){super(),this._lView=t}onDestroy(t){return jP(this._lView,t),()=>dce(this._lView,t)}};function Ale(){return new ZS(it())}function hP(...e){}function Vle(){let e=typeof Pn.requestAnimationFrame=="function",t=Pn[e?"requestAnimationFrame":"setTimeout"],n=Pn[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}var qt=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jt(!1),this.onMicrotaskEmpty=new jt(!1),this.onStable=new jt(!1),this.onError=new jt(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=Vle().nativeRequestAnimationFrame,kle(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new xe(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,t,Nle,hP,hP);try{return o.runTask(a,n,r)}finally{o.cancelTask(a)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},Nle={};function nD(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function _le(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Pn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,JS(e),e.isCheckStableRunning=!0,nD(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),JS(e))}function kle(e){let t=()=>{_le(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,a,s)=>{if(Tle(s))return n.invokeTask(i,o,a,s);try{return mP(e),n.invokeTask(i,o,a,s)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),gP(e)}},onInvoke:(n,r,i,o,a,s,c)=>{try{return mP(e),n.invoke(i,o,a,s,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),gP(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,JS(e),nD(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function JS(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function mP(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function gP(e){e._nesting--,nD(e)}var eE=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jt,this.onMicrotaskEmpty=new jt,this.onStable=new jt,this.onError=new jt}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function Tle(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}function Ile(e="zone.js",t){return e==="noop"?new eE:e==="zone.js"?new qt(t):e}var i6=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(i6||{}),Fle={destroy(){}};function rD(e,t){!t&&h3e(rD);let n=t?.injector??ce(g2);if(!c4e(n))return Fle;Y8("NgAfterNextRender");let r=n.get(iD),i=r.handler??=new nE,o=t?.phase??i6.MixedReadWrite,a=()=>{i.unregister(c),s()},s=n.get(TB).onDestroy(a),c=new tE(n,o,()=>{a(),e()});return i.register(c),{destroy:a}}var tE=class{constructor(t,n,r){this.phase=n,this.callbackFn=r,this.zone=t.get(qt),this.errorHandler=t.get(Ca,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(t){this.errorHandler?.handleError(t)}}},nE=class{constructor(){this.executingCallbacks=!1,this.buckets={[i6.EarlyRead]:new Set,[i6.Write]:new Set,[i6.MixedReadWrite]:new Set,[i6.Read]:new Set},this.deferredCallbacks=new Set}register(t){(this.executingCallbacks?this.deferredCallbacks:this.buckets[t.phase]).add(t)}unregister(t){this.buckets[t.phase].delete(t),this.deferredCallbacks.delete(t)}execute(){this.executingCallbacks=!0;for(let t of Object.values(this.buckets))for(let n of t)n.invoke();this.executingCallbacks=!1;for(let t of this.deferredCallbacks)this.buckets[t.phase].add(t);this.deferredCallbacks.clear()}destroy(){for(let t of Object.values(this.buckets))t.clear();this.deferredCallbacks.clear()}},iD=(()=>{let t=class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=ue({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();function Xm(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let a=0;a<t.length;a++){let s=t[a];if(typeof s=="number")o=s;else if(o==1)i=OO(i,s);else if(o==2){let c=s,l=t[++a];r=OO(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Qm=class extends w9{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=e3(t);return new p6(n,this.ngModule)}};function vP(e){let t=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let r=e[n];r!==void 0&&t.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return t}function Rle(e){let t=e.toLowerCase();return t==="svg"?ice:t==="math"?oce:null}var rE=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=f9(r);let i=this.injector.get(t,sS,r);return i!==sS||n===sS?i:this.parentInjector.get(t,n,r)}},p6=class extends Wm{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=vP(t.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return vP(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=Zse(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){i=i||this.ngModule;let o=i instanceof Bi?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new rE(t,o):t,s=a.get($8,null);if(s===null)throw new xe(407,!1);let c=a.get(wle,null),l=a.get(iD,null),u=a.get(qS,null),f={rendererFactory:s,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:u},d=s.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",h=r?_4e(d,r,this.componentDef.encapsulation,a):Z$(d,p,Rle(p)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let g=null;h!==null&&(g=_E(h,a,!0));let v=YE(0,null,null,1,0,null,null,null,null,null,null),y=C9(null,v,null,m,null,null,f,d,a,null,g);zE(y);let C,b;try{let M=this.componentDef,S,w=null;M.findHostDirectiveDefs?(S=[],w=new Map,M.findHostDirectiveDefs(M,S,w),S.push(M)):S=[M];let E=Ole(y,h),D=Ple(E,h,M,S,y,f,d);b=CE(v,$i),h&&Ule(d,M,h,r),n!==void 0&&jle(b,this.ngContentSelectors,n),C=Ble(D,M,S,w,y,[qle]),ZE(v,y,null)}finally{HE()}return new iE(this.componentType,C,v6(b,y),y,b)}},iE=class extends GS{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new W4(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;KE(o[Ye],o,i,t,n),this.previousInputValues.set(t,n);let a=i3(this._tNode.index,o);JE(a)}}get injector(){return new O4(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Ole(e,t){let n=e[Ye],r=$i;return e[r]=t,y6(n,r,2,"#host",null)}function Ple(e,t,n,r,i,o,a){let s=i[Ye];$le(r,e,t,a);let c=null;t!==null&&(c=_E(t,i[c6]));let l=o.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let f=C9(i,pB(n),null,u,i[e.index],e,o,l,null,null,c);return s.firstCreatePass&&PS(s,e,r.length-1),b9(i,f),i[e.index]=f}function $le(e,t,n,r){for(let i of e)t.mergedAttrs=_8(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(Xm(t,t.mergedAttrs,!0),n!==null&&sB(r,n,t))}function Ble(e,t,n,r,i,o){let a=pi(),s=i[Ye],c=Eo(a,i);hB(s,i,a,n,null,r);for(let u=0;u<n.length;u++){let f=a.directiveStart+u,d=G4(i,s,f,a);n3(d,i)}mB(s,i,a),c&&n3(c,i);let l=G4(i,s,a.directiveStart+a.componentOffset,a);if(e[So]=i[So]=l,o!==null)for(let u of o)u(l,t);return qE(s,a,i),l}function Ule(e,t,n,r){if(r)gS(e,n,["ng-version","17.2.3"]);else{let{attrs:i,classes:o}=Jse(t.selectors[0]);i&&gS(e,n,i),o&&o.length>0&&aB(e,n,o.join(" "))}}function jle(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function qle(){let e=pi();m9(it()[Ye],e)}var o3=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=Gle;let e=t;return e})();function Gle(){let e=pi();return FB(e,it())}var Wle=o3,IB=class extends Wle{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return v6(this._hostTNode,this._hostLView)}get injector(){return new O4(this._hostTNode,this._hostLView)}get parentInjector(){let t=FE(this._hostTNode,this._hostLView);if(D$(t)){let n=$m(t,this._hostLView),r=Pm(t),i=n[Ye].data[r+8];return new O4(i,n)}else return new O4(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=yP(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-g1}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=jS(this._lContainer,t.ssrId),s=t.createEmbeddedViewImpl(n||{},o,a);return this.insertImpl(s,i,BS(this._hostTNode,a)),s}createComponent(t,n,r,i,o){let a=t&&!g3e(t),s;if(a)s=n;else{let h=n||{};s=h.index,r=h.injector,i=h.projectableNodes,o=h.environmentInjector||h.ngModuleRef}let c=a?t:new p6(e3(t)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let m=(a?l:this.parentInjector).get(Bi,null);m&&(o=m)}let u=e3(c.componentType??{}),f=jS(this._lContainer,u?.id??null),d=f?.firstChild??null,p=c.create(l,i,d,o);return this.insertImpl(p.hostView,s,BS(this._hostTNode,f)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(lce(i)){let s=this.indexOf(t);if(s!==-1)this.detach(s);else{let c=i[jr],l=new IB(c,c[W1],c[jr]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),a=this._lContainer;return wB(a,i,o,r),t.attachToViewContainerRef(),n$(cS(a),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=yP(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=jm(this._lContainer,n);r&&(Fm(cS(this._lContainer),n),BE(r[Ye],r))}detach(t){let n=this._adjustIndex(t,-1),r=jm(this._lContainer,n);return r&&Fm(cS(this._lContainer),n)!=null?new W4(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function yP(e){return e[Im]}function cS(e){return e[Im]||(e[Im]=[])}function FB(e,t){let n,r=t[e.index];return Vs(r)?n=r:(n=gB(r,t,null,e),t[e.index]=n,b9(t,n)),Xle(n,t,e,r),new IB(n,e,t)}function Yle(e,t){let n=e[zn],r=n.createComment(""),i=Eo(t,e),o=UE(n,i);return qm(n,o,r,M4e(n,i),!1),r}var Xle=Zle,Qle=()=>!1;function Kle(e,t,n){return Qle(e,t,n)}function Zle(e,t,n,r){if(e[$4])return;let i;n.type&8?i=xa(r):i=Yle(t,n),e[$4]=i}var oE=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},aE=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let a=n.getByIndex(o),s=this.queries[a.indexInDeclarationView];i.push(s.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)oD(t,n).matches!==null&&this.queries[n].setDirty()}},sE=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=a0e(t):this.predicate=t}},cE=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},lE=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,n,Jle(n,o)),this.matchTNodeWithReadOption(t,n,Nm(n,t,o,!1,!1))}else r===Y4?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Nm(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===qr||i===o3||i===Y4&&n.type&4)this.addMatch(n.index,-2);else{let o=Nm(n,t,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function Jle(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function e0e(e,t){return e.type&11?v6(e,t):e.type&4?M9(e,t):null}function t0e(e,t,n,r){return n===-1?e0e(t,e):n===-2?n0e(e,t,r):G4(e,e[Ye],n,t)}function n0e(e,t,n){if(n===qr)return v6(t,e);if(n===Y4)return M9(t,e);if(n===o3)return FB(t,e)}function RB(e,t,n,r){let i=t[zs].queries[r];if(i.matches===null){let o=e.data,a=n.matches,s=[];for(let c=0;a!==null&&c<a.length;c+=2){let l=a[c];if(l<0)s.push(null);else{let u=o[l];s.push(t0e(t,u,a[c+1],n.metadata.read))}}i.matches=s}return i.matches}function uE(e,t,n,r){let i=e.queries.getByIndex(n),o=i.matches;if(o!==null){let a=RB(e,t,i,n);for(let s=0;s<o.length;s+=2){let c=o[s];if(c>0)r.push(a[s/2]);else{let l=o[s+1],u=t[-c];for(let f=g1;f<u.length;f++){let d=u[f];d[q8]===d[jr]&&uE(d[Ye],d,l,r)}if(u[l6]!==null){let f=u[l6];for(let d=0;d<f.length;d++){let p=f[d];uE(p[Ye],p,l,r)}}}}}return r}function r0e(e,t){return e[zs].queries[t].queryList}function i0e(e,t,n){let r=new xS((n&4)===4);return I4e(e,t,r,r.destroy),(t[zs]??=new aE).queries.push(new oE(r))-1}function o0e(e,t,n,r){let i=Yn();if(i.firstCreatePass){let o=pi();s0e(i,new sE(t,n,r),o.index),c0e(i,e),(n&2)===2&&(i.staticContentQueries=!0)}return i0e(i,it(),n)}function a0e(e){return e.split(",").map(t=>t.trim())}function s0e(e,t,n){e.queries===null&&(e.queries=new cE),e.queries.track(new lE(t,n))}function c0e(e,t){let n=e.contentQueries||(e.contentQueries=[]),r=n.length?n[n.length-1]:-1;t!==r&&n.push(e.queries.length-1,t)}function oD(e,t){return e.queries.getByIndex(t)}function l0e(e,t){let n=e[Ye],r=oD(n,t);return r.crossesNgTemplate?uE(n,e,t,[]):RB(n,e,r,t)}function u0e(e){let t=[],n=new Map;function r(i){let o=n.get(i);if(!o){let a=e(i);n.set(i,o=a.then(h0e))}return o}return Km.forEach((i,o)=>{let a=[];i.templateUrl&&a.push(r(i.templateUrl).then(l=>{i.template=l}));let s=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=s,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,u=i.styleUrls;i.styleUrls.forEach((f,d)=>{s.push(""),a.push(r(f).then(p=>{s[l+d]=p,u.splice(u.indexOf(f),1),u.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&a.push(r(i.styleUrl).then(l=>{s.push(l),i.styleUrl=void 0}));let c=Promise.all(a).then(()=>m0e(o));t.push(c)}),d0e(),Promise.all(t).then(()=>{})}var Km=new Map,f0e=new Set;function d0e(){let e=Km;return Km=new Map,e}function p0e(){return Km.size===0}function h0e(e){return typeof e=="string"?e:e.text()}function m0e(e){f0e.delete(e)}function g0e(e){return Object.getPrototypeOf(e.prototype).constructor}function sr(e){let t=g0e(e.type),n=!0,r=[e];for(;t;){let i;if(t3(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new xe(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let a=e;a.inputs=Dm(e.inputs),a.inputTransforms=Dm(e.inputTransforms),a.declaredInputs=Dm(e.declaredInputs),a.outputs=Dm(e.outputs);let s=i.hostBindings;s&&b0e(e,s);let c=i.viewQuery,l=i.contentQueries;if(c&&x0e(e,c),l&&C0e(e,l),v0e(e,i),Fse(e.outputs,i.outputs),t3(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let a=0;a<o.length;a++){let s=o[a];s&&s.ngInherit&&s(e),s===sr&&(n=!1)}}t=Object.getPrototypeOf(t)}y0e(r)}function v0e(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=t.inputTransforms[i]}}}function y0e(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=_8(i.hostAttrs,n=_8(n,i.hostAttrs))}}function Dm(e){return e===s6?{}:e===wo?[]:e}function x0e(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function C0e(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function b0e(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function aD(e){let t=e.inputConfig,n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}e.inputTransforms=n}var r3=class{},B8=class{};var Zm=class extends r3{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Qm(this);let i=IP(t);this._bootstrapComponents=K$(i.bootstrap),this._r3Injector=T$(t,n,[{provide:r3,useValue:this},{provide:w9,useValue:this.componentFactoryResolver},...r],Pi(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Jm=class extends B8{constructor(t){super(),this.moduleType=t}create(t){return new Zm(this.moduleType,t,[])}};function M0e(e,t,n){return new Zm(e,t,n)}var fE=class extends r3{constructor(t){super(),this.componentFactoryResolver=new Qm(this),this.instance=null;let n=new P8([...t.providers,{provide:r3,useValue:this},{provide:w9,useValue:this.componentFactoryResolver}],t.parent||IE(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function S9(e,t,n=null){return new fE({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var Z4=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new On(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function OB(e,t,n){return e[t]=n}function w0e(e,t){return e[t]}function ba(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function S0e(e,t,n,r){let i=ba(e,t,n);return ba(e,t+1,r)||i}function E0e(e,t,n,r,i,o,a,s,c){let l=t.consts,u=y6(t,e,4,a||null,u6(l,s));QE(t,n,u,u6(l,c)),m9(t,u);let f=u.tView=YE(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,u),f.queries=t.queries.embeddedTView(u)),u}function st(e,t,n,r,i,o,a,s){let c=it(),l=Yn(),u=e+$i,f=l.firstCreatePass?E0e(u,l,c,t,n,r,i,o,a):l.data[u];Q4(f,!1);let d=D0e(l,c,f,e);s9()&&y9(l,c,d,f),n3(d,c);let p=gB(d,c,d,f);return c[u]=p,b9(c,p),Kle(p,f,c),o9(f)&&GE(l,c,f),a!=null&&WE(c,f,s),st}var D0e=z0e;function z0e(e,t,n,r){return c9(!0),t[zn].createComment("")}function x6(e,t,n,r){let i=it(),o=g6();if(ba(i,o,t)){let a=Yn(),s=a9();K4e(s,i,e,t,n,r)}return x6}function H0e(e,t,n,r){return ba(e,g6(),n)?t+U4(n)+r:Da}function L0e(e,t,n,r,i,o){let a=Cce(),s=S0e(e,a,n,i);return YP(2),s?t+U4(n)+r+U4(i)+o:Da}function zm(e,t){return e<<17|t<<2}function X4(e){return e>>17&32767}function A0e(e){return(e&2)==2}function V0e(e,t){return e&131071|t<<17}function dE(e){return e|2}function h6(e){return(e&131068)>>2}function lS(e,t){return e&-131069|t<<2}function N0e(e){return(e&1)===1}function pE(e){return e|1}function _0e(e,t,n,r,i,o){let a=o?t.classBindings:t.styleBindings,s=X4(a),c=h6(a);e[r]=n;let l=!1,u;if(Array.isArray(n)){let f=n;u=f[1],(u===null||G8(f,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let d=X4(e[s+1]);e[r+1]=zm(d,s),d!==0&&(e[d+1]=lS(e[d+1],r)),e[s+1]=V0e(e[s+1],r)}else e[r+1]=zm(s,0),s!==0&&(e[s+1]=lS(e[s+1],r)),s=r;else e[r+1]=zm(c,0),s===0?s=r:e[c+1]=lS(e[c+1],r),c=r;l&&(e[r+1]=dE(e[r+1])),xP(e,u,r,!0),xP(e,u,r,!1),k0e(t,u,e,r,o),a=zm(s,c),o?t.classBindings=a:t.styleBindings=a}function k0e(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&G8(o,t)>=0&&(n[r+1]=pE(n[r+1]))}function xP(e,t,n,r){let i=e[n+1],o=t===null,a=r?X4(i):h6(i),s=!1;for(;a!==0&&(s===!1||o);){let c=e[a],l=e[a+1];T0e(c,t)&&(s=!0,e[a+1]=r?pE(l):dE(l)),a=r?X4(l):h6(l)}s&&(e[n+1]=r?dE(i):pE(i))}function T0e(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?G8(e,t)>=0:!1}function se(e,t,n){let r=it(),i=g6();if(ba(r,i,t)){let o=Yn(),a=a9();XE(o,a,r,e,t,r[zn],n,!1)}return se}function CP(e,t,n,r,i){let o=t.inputs,a=i?"class":"style";KE(e,n,o[a],a,r)}function X8(e,t){return I0e(e,t,null,!0),X8}function I0e(e,t,n,r){let i=it(),o=Yn(),a=YP(2);if(o.firstUpdatePass&&R0e(o,e,a,r),t!==Da&&ba(i,a,t)){let s=o.data[K4()];U0e(o,s,i,i[zn],e,i[a+1]=j0e(t,n),r,a)}}function F0e(e,t){return t>=e.expandoStartIndex}function R0e(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[K4()],a=F0e(e,n);q0e(o,r)&&t===null&&!a&&(t=!1),t=O0e(i,o,t,r),_0e(i,o,t,n,a,r)}}function O0e(e,t,n,r){let i=Ece(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=uS(null,e,t,n,r),n=U8(n,t.attrs,r),o=null);else{let a=t.directiveStylingLast;if(a===-1||e[a]!==i)if(n=uS(i,e,t,n,r),o===null){let c=P0e(e,t,r);c!==void 0&&Array.isArray(c)&&(c=uS(null,e,t,c[1],r),c=U8(c,t.attrs,r),$0e(e,t,r,c))}else o=B0e(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function P0e(e,t,n){let r=n?t.classBindings:t.styleBindings;if(h6(r)!==0)return e[X4(r)]}function $0e(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[X4(i)]=r}function B0e(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let a=e[o].hostAttrs;r=U8(r,a,n)}return U8(r,t.attrs,n)}function uS(e,t,n,r,i){let o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(s===-1?s=n.directiveStart:s++;s<a&&(o=t[s],r=U8(r,o.hostAttrs,i),o!==e);)s++;return e!==null&&(n.directiveStylingLast=s),r}function U8(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];typeof a=="number"?i=a:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Tce(e,a,n?!0:t[++o]))}return e===void 0?null:e}function U0e(e,t,n,r,i,o,a,s){if(!(t.type&3))return;let c=e.data,l=c[s+1],u=N0e(l)?bP(c,t,n,i,h6(l),a):void 0;if(!e9(u)){e9(o)||A0e(l)&&(o=bP(c,null,n,i,s,a));let f=$P(K4(),n);H4e(r,a,f,i,o)}}function bP(e,t,n,r,i,o){let a=t===null,s;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,f=u===null,d=n[i+1];d===Da&&(d=f?wo:void 0);let p=f?tS(d,r):u===r?d:void 0;if(l&&!e9(p)&&(p=tS(c,r)),e9(p)&&(s=p,a))return s;let h=e[i+1];i=a?X4(h):h6(h)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(s=tS(c,r))}return s}function e9(e){return e!==void 0}function j0e(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Pi(v2(e)))),e}function q0e(e,t){return(e.flags&(t?8:16))!==0}function a3(e,t,n){Y8("NgControlFlow");let r=it(),i=g6(),o=G0e(r,$i+e),a=0;if(ba(r,i,t)){let s=Br(null);try{if(ole(o,a),t!==-1){let c=W0e(r[Ye],$i+t),l=jS(o,c.tView.ssrId),u=MB(r,c,n,{dehydratedView:l});wB(o,u,a,BS(c,l))}}finally{Br(s)}}else{let s=ile(o,a);s!==void 0&&(s[So]=n)}}function G0e(e,t){return e[t]}function W0e(e,t){return CE(e,t)}function Y0e(e,t,n,r,i,o){let a=t.consts,s=u6(a,i),c=y6(t,e,2,r,s);return QE(t,n,c,u6(a,o)),c.attrs!==null&&Xm(c,c.attrs,!1),c.mergedAttrs!==null&&Xm(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function V(e,t,n,r){let i=it(),o=Yn(),a=$i+e,s=i[zn],c=o.firstCreatePass?Y0e(a,o,i,t,n,r):o.data[a],l=X0e(o,i,c,s,t,e);i[a]=l;let u=o9(c);return Q4(c,!0),sB(s,l,c),(c.flags&32)!==32&&s9()&&y9(o,i,l,c),pce()===0&&n3(l,i),hce(),u&&(GE(o,i,c),qE(o,c,i)),r!==null&&WE(i,c),V}function N(){let e=pi();wE()?SE():(e=e.parent,Q4(e,!1));let t=e;gce(t)&&vce(),mce();let n=Yn();return n.firstCreatePass&&(m9(n,e),xE(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&w3e(t)&&CP(n,t,it(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&S3e(t)&&CP(n,t,it(),t.stylesWithoutHost,!1),N}function ht(e,t,n,r){return V(e,t,n,r),N(),ht}var X0e=(e,t,n,r,i,o)=>(c9(!0),Z$(r,i,Hce()));function Q0e(e,t,n,r,i){let o=t.consts,a=u6(o,r),s=y6(t,e,8,"ng-container",a);a!==null&&Xm(s,a,!0);let c=u6(o,i);return QE(t,n,s,c),t.queries!==null&&t.queries.elementStart(t,s),s}function v1(e,t,n){let r=it(),i=Yn(),o=e+$i,a=i.firstCreatePass?Q0e(o,i,r,t,n):i.data[o];Q4(a,!0);let s=K0e(i,r,a,e);return r[o]=s,s9()&&y9(i,r,s,a),n3(s,r),o9(a)&&(GE(i,r,a),qE(i,a,r)),n!=null&&WE(r,a),v1}function y1(){let e=pi(),t=Yn();return wE()?SE():(e=e.parent,Q4(e,!1)),t.firstCreatePass&&(m9(t,e),xE(e)&&t.queries.elementEnd(e)),y1}var K0e=(e,t,n,r)=>(c9(!0),d4e(t[zn],""));function X1(){return it()}function sD(e,t,n){let r=it(),i=g6();if(ba(r,i,t)){let o=Yn(),a=a9();XE(o,a,r,e,t,r[zn],n,!0)}return sD}var F4=void 0;function Z0e(e){let t=e,n=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var J0e=["en",[["a","p"],["AM","PM"],F4],[["AM","PM"],F4,F4],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],F4,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],F4,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",F4,"{1} 'at' {0}",F4],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Z0e],fS={};function zo(e){let t=e6e(e),n=MP(t);if(n)return n;let r=t.split("-")[0];if(n=MP(r),n)return n;if(r==="en")return J0e;throw new xe(701,!1)}function MP(e){return e in fS||(fS[e]=Pn.ng&&Pn.ng.common&&Pn.ng.common.locales&&Pn.ng.common.locales[e]),fS[e]}var $n=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}($n||{});function e6e(e){return e.toLowerCase().replace(/_/g,"-")}var t9="en-US";var t6e=t9;function n6e(e){typeof e=="string"&&(t6e=e.toLowerCase().replace(/_/g,"-"))}function Fe(e,t,n,r){let i=it(),o=Yn(),a=pi();return PB(o,i,i[zn],a,e,t,r),Fe}function r6e(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===n&&i[o+1]===r){let s=t[T8],c=i[o+2];return s.length>c?s[c]:null}typeof a=="string"&&(o+=2)}return null}function PB(e,t,n,r,i,o,a){let s=o9(r),l=e.firstCreatePass&&xB(e),u=t[So],f=yB(t),d=!0;if(r.type&3||a){let m=Eo(r,t),g=a?a(m):m,v=f.length,y=a?b=>a(xa(b[r.index])):r.index,C=null;if(!a&&s&&(C=r6e(e,t,i,r.index)),C!==null){let b=C.__ngLastListenerFn__||C;b.__ngNextListenerFn__=o,C.__ngLastListenerFn__=o,d=!1}else{o=SP(r,t,u,o,!1);let b=n.listen(g,i,o);f.push(o,b),l&&l.push(i,y,v,v+1)}}else o=SP(r,t,u,o,!1);let p=r.outputs,h;if(d&&p!==null&&(h=p[i])){let m=h.length;if(m)for(let g=0;g<m;g+=2){let v=h[g],y=h[g+1],M=t[v][y].subscribe(o),S=f.length;if(f.push(o,M),l){let w=typeof M=="function"?S+1:-(S+1);l.push(i,r.index,S,w)}}}}function wP(e,t,n,r){try{return ga(6,t,n),n(r)!==!1}catch(i){return CB(e,i),!1}finally{ga(7,t,n)}}function SP(e,t,n,r,i){return function o(a){if(a===Function)return r;let s=e.componentOffset>-1?i3(e.index,t):t;JE(s);let c=wP(t,n,r,a),l=o.__ngNextListenerFn__;for(;l;)c=wP(t,n,l,a)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&a.preventDefault(),c}}function ot(e=1){return zce(e)}function i6e(e,t){let n=null,r=Wse(e);for(let i=0;i<t.length;i++){let o=t[i];if(o==="*"){n=i;continue}if(r===null?NP(e,o,!0):Qse(r,o))return i}return n}function $B(e){let t=it()[m2][W1];if(!t.projection){let n=e?e.length:1,r=t.projection=_ce(n,null),i=r.slice(),o=t.child;for(;o!==null;){let a=e?i6e(o,e):0;a!==null&&(i[a]?i[a].projectionNext=o:r[a]=o,i[a]=o),o=o.next}}}function BB(e,t=0,n){let r=it(),i=Yn(),o=y6(i,$i+e,16,null,n||null);o.projection===null&&(o.projection=t),SE(),(!r[k8]||GP())&&(o.flags&32)!==32&&D4e(i,r,o)}function UB(e,t,n,r){o0e(e,t,n,r)}function jB(e){let t=it(),n=Yn(),r=XP();DE(r+1);let i=oD(n,r);if(e.dirty&&cce(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=l0e(t,r);e.reset(o,Ace),e.notifyOnChanges()}return!0}return!1}function qB(){return r0e(it(),XP())}function o6e(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function J4(e){let t=xce();return BP(t,$i+e)}function I(e,t=""){let n=it(),r=Yn(),i=e+$i,o=r.firstCreatePass?y6(r,i,1,t,null):r.data[i],a=a6e(r,n,o,t,e);n[i]=a,s9()&&y9(r,n,a,o),Q4(o,!1)}var a6e=(e,t,n,r,i)=>(c9(!0),u4e(t[zn],r));function Q1(e){return be("",e,""),Q1}function be(e,t,n){let r=it(),i=H0e(r,e,t,n);return i!==Da&&bB(r,K4(),i),be}function Q8(e,t,n,r,i){let o=it(),a=L0e(o,e,t,n,r,i);return a!==Da&&bB(o,K4(),a),Q8}function Wt(e,t,n){_B(t)&&(t=t());let r=it(),i=g6();if(ba(r,i,t)){let o=Yn(),a=a9();XE(o,a,r,e,t,r[zn],n,!1)}return Wt}function tn(e,t){let n=_B(e);return n&&e.set(t),n}function Yt(e,t){let n=it(),r=Yn(),i=pi();return PB(r,n,n[zn],i,e,t),Yt}function s6e(e,t,n){let r=Yn();if(r.firstCreatePass){let i=t3(e);hE(n,r.data,r.blueprint,i,!0),hE(t,r.data,r.blueprint,i,!1)}}function hE(e,t,n,r,i){if(e=Oi(e),Array.isArray(e))for(let o=0;o<e.length;o++)hE(e[o],t,n,r,i);else{let o=Yn(),a=it(),s=pi(),c=d6(e)?e:Oi(e.provide),l=C$(e),u=s.providerIndexes&1048575,f=s.directiveStart,d=s.providerIndexes>>20;if(d6(e)||!e.multi){let p=new q4(l,i,W),h=pS(c,t,i?u:u+d,f);h===-1?(LS(Um(s,a),o,c),dS(o,e,t.length),t.push(c),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),n.push(p),a.push(p)):(n[h]=p,a[h]=p)}else{let p=pS(c,t,u+d,f),h=pS(c,t,u,u+d),m=p>=0&&n[p],g=h>=0&&n[h];if(i&&!g||!i&&!m){LS(Um(s,a),o,c);let v=u6e(i?l6e:c6e,n.length,i,r,l);!i&&g&&(n[h].providerFactory=v),dS(o,e,t.length,0),t.push(c),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),n.push(v),a.push(v)}else{let v=GB(n[i?h:p],l,!i&&r);dS(o,e,p>-1?p:h,v)}!i&&r&&g&&n[h].componentProviders++}}}function dS(e,t,n,r){let i=d6(t),o=s3e(t);if(i||o){let c=(o?Oi(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function GB(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function pS(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function c6e(e,t,n,r){return mE(this.multi,[])}function l6e(e,t,n,r){let i=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,s=G4(n,n[Ye],this.providerFactory.index,r);o=s.slice(0,a),mE(i,o);for(let c=a;c<s.length;c++)o.push(s[c])}else o=[],mE(i,o);return o}function mE(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function u6e(e,t,n,r,i){let o=new q4(e,n,W);return o.multi=[],o.index=t,o.componentProviders=0,GB(o,i,r&&!n),o}function s3(e,t=[]){return n=>{n.providersResolver=(r,i)=>s6e(r,i?i(e):e,t)}}var f6e=(()=>{let t=class t{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=v$(!1,r.type),o=i.length>0?S9([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=ue({token:t,providedIn:"environment",factory:()=>new t(ge(Bi))});let e=t;return e})();function K8(e){Y8("NgStandalone"),e.getStandaloneInjector=t=>t.get(f6e).getOrCreateStandaloneInjector(e)}function c3(e,t,n){let r=EE()+e,i=it();return i[r]===Da?OB(i,r,n?t.call(n):t()):w0e(i,r)}function WB(e,t,n,r){return YB(it(),EE(),e,t,n,r)}function d6e(e,t){let n=e[t];return n===Da?void 0:n}function YB(e,t,n,r,i,o){let a=t+n;return ba(e,a,i)?OB(e,a+1,o?r.call(o,i):r(i)):d6e(e,a+1)}function hi(e,t){let n=Yn(),r,i=e+$i;n.firstCreatePass?(r=p6e(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=j4(r.type,!0)),a,s=m1(W);try{let c=Bm(!1),l=o();return Bm(c),o6e(n,it(),i,l),l}finally{m1(s)}}function p6e(e,t){if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(e===r.name)return r}}function mi(e,t,n){let r=e+$i,i=it(),o=BP(i,r);return h6e(i,r)?YB(i,EE(),t,o.transform,n,o):o.transform(n)}function h6e(e,t){return e[Ye].data[t].pure}function Ts(e,t){return M9(e,t)}var Hm=null;function m6e(e){Hm!==null&&(e.defaultEncapsulation!==Hm.defaultEncapsulation||e.preserveWhitespaces!==Hm.preserveWhitespaces)||(Hm=e)}var E9=(()=>{let t=class t{log(r){console.log(r)}warn(r){console.warn(r)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();var cD=new ze(""),Z8=new ze(""),D9=(()=>{let t=class t{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,lD||(g6e(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==a),r()},i)),this._callbacks.push({doneCb:r,timeoutId:a,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};t.\u0275fac=function(i){return new(i||t)(ge(qt),ge(z9),ge(Z8))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),z9=(()=>{let t=class t{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return lD?.findTestabilityInTree(this,r,i)??null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();function g6e(e){lD=e}var lD;function l3(e){return!!e&&typeof e.then=="function"}function uD(e){return!!e&&typeof e.subscribe=="function"}var H9=new ze(""),XB=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=ce(H9,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let a=o();if(l3(a))r.push(a);else if(uD(a)){let s=new Promise((c,l)=>{a.subscribe({complete:c,error:l})});r.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),L9=new ze("");function v6e(){hO(()=>{throw new xe(600,!1)})}function y6e(e){return e.isBoundToModule}function x6e(e,t,n){try{let r=n();return l3(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}function QB(e,t){return Array.isArray(t)?t.reduce(QB,e):x(x({},e),t)}var el=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ce(I$),this.afterRenderEffectManager=ce(iD),this.componentTypes=[],this.components=[],this.isStable=ce(Z4).hasPendingTasks.pipe(Ke(r=>!r)),this._injector=ce(Bi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Wm;if(!this._injector.get(XB).done){let p=!o&&TP(r),h=!1;throw new xe(405,h)}let s;o?s=r:s=this._injector.get(w9).resolveComponentFactory(r),this.componentTypes.push(s.componentType);let c=y6e(s)?void 0:this._injector.get(r3),l=i||s.selector,u=s.create(g2.NULL,[],l,c),f=u.location.nativeElement,d=u.injector.get(cD,null);return d?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),km(this.components,u),d?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new xe(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===HB)throw new xe(103,!1);let o=r===0;for(let{_lView:a,notifyErrorHandler:s}of this._views)!o&&!hS(a)||this.detectChangesInView(a,s,o);if(r++,i.executeInternalCallbacks(),!this._views.some(({_lView:a})=>hS(a))&&(i.execute(),!this._views.some(({_lView:a})=>hS(a))))break}}detectChangesInView(r,i,o){let a;o?(a=0,r[$e]|=1024):r[$e]&64?a=0:a=1,LB(r,i,a)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;km(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(L9,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>km(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new xe(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function km(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function hS(e){return ME(e)}var gE=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},A9=(()=>{let t=class t{compileModuleSync(r){return new Jm(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=IP(r),a=K$(o.declarations).reduce((s,c)=>{let l=e3(c);return l&&s.push(new p6(l)),s},[]);return new gE(i,a)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),C6e=new ze("");function b6e(e,t,n){let r=new Jm(n);return Promise.resolve(r)}function EP(e){for(let t=e.length-1;t>=0;t--)if(e[t]!==void 0)return e[t]}var M6e=(()=>{let t=class t{constructor(){this.zone=ce(qt),this.applicationRef=ce(el)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function w6e(e){return[{provide:qt,useFactory:e},{provide:f6,multi:!0,useFactory:()=>{let t=ce(M6e,{optional:!0});return()=>t.initialize()}},{provide:f6,multi:!0,useFactory:()=>{let t=ce(D6e);return()=>{t.initialize()}}},{provide:I$,useFactory:S6e}]}function S6e(){let e=ce(qt),t=ce(Ca);return n=>e.runOutsideAngular(()=>t.handleError(n))}function E6e(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var D6e=(()=>{let t=class t{constructor(){this.subscription=new or,this.initialized=!1,this.zone=ce(qt),this.pendingTasks=ce(Z4)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{qt.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{qt.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function z6e(){return typeof $localize<"u"&&$localize.locale||t9}var V9=new ze("",{providedIn:"root",factory:()=>ce(V9,rt.Optional|rt.SkipSelf)||z6e()});var KB=new ze(""),ZB=(()=>{let t=class t{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=Ile(i?.ngZone,E6e({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let a=M0e(r.moduleType,this.injector,w6e(()=>o)),s=a.injector.get(Ca,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:l=>{s.handleError(l)}});a.onDestroy(()=>{km(this._modules,a),c.unsubscribe()})}),x6e(s,o,()=>{let c=a.injector.get(XB);return c.runInitializers(),c.donePromise.then(()=>{let l=a.injector.get(V9,t9);return n6e(l||t9),this._moduleDoBootstrap(a),a})})})}bootstrapModule(r,i=[]){let o=QB({},i);return b6e(this.injector,o,r).then(a=>this.bootstrapModuleFactory(a,o))}_moduleDoBootstrap(r){let i=r.injector.get(el);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new xe(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(KB,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};t.\u0275fac=function(i){return new(i||t)(ge(g2))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})(),N8=null,JB=new ze("");function H6e(e){if(N8&&!N8.get(JB,!1))throw new xe(400,!1);v6e(),N8=e;let t=e.get(ZB);return V6e(e),t}function fD(e,t,n=[]){let r=`Platform: ${t}`,i=new ze(r);return(o=[])=>{let a=eU();if(!a||a.injector.get(JB,!1)){let s=[...n,...o,{provide:i,useValue:!0}];e?e(s):H6e(L6e(s,r))}return A6e(i)}}function L6e(e=[],t){return g2.create({name:t,providers:[{provide:h9,useValue:"platform"},{provide:KB,useValue:new Set([()=>N8=null])},...e]})}function A6e(e){let t=eU();if(!t)throw new xe(401,!1);return t}function eU(){return N8?.get(ZB)??null}function V6e(e){e.get(AE,null)?.forEach(n=>n())}var tU=fD(null,"core",[]),nU=(()=>{let t=class t{constructor(r){}};t.\u0275fac=function(i){return new(i||t)(ge(el))},t.\u0275mod=Cr({type:t}),t.\u0275inj=br({});let e=t;return e})();function tl(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function rU(e){let t=e3(e);if(!t)return null;let n=new p6(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var uU=null;function za(){return uU}function fU(e){uU??=e}var P9=class{};var Gr=new ze(""),wD=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(N6e),providedIn:"platform"});let e=t;return e})(),dU=new ze(""),N6e=(()=>{let t=class t extends wD{constructor(){super(),this._doc=ce(Gr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return za().getBaseHref(this._doc)}onPopState(r){let i=za().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=za().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>new t,providedIn:"platform"});let e=t;return e})();function SD(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function iU(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function Fs(e){return e&&e[0]!=="?"?"?"+e:e}var Ps=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(ED),providedIn:"root"});let e=t;return e})(),pU=new ze(""),ED=(()=>{let t=class t extends Ps{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ce(Gr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return SD(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Fs(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,a){let s=this.prepareExternalUrl(o+Fs(a));this._platformLocation.pushState(r,i,s)}replaceState(r,i,o,a){let s=this.prepareExternalUrl(o+Fs(a));this._platformLocation.replaceState(r,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(i){return new(i||t)(ge(wD),ge(pU,8))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),hU=(()=>{let t=class t extends Ps{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=SD(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,a){let s=this.prepareExternalUrl(o+Fs(a));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(r,i,s)}replaceState(r,i,o,a){let s=this.prepareExternalUrl(o+Fs(a));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(i){return new(i||t)(ge(wD),ge(pU,8))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),b6=(()=>{let t=class t{constructor(r){this._subject=new jt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=T6e(iU(oU(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Fs(i))}normalize(r){return t.stripTrailingSlash(k6e(this._basePath,oU(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Fs(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Fs(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};t.normalizeQueryParams=Fs,t.joinWithSlash=SD,t.stripTrailingSlash=iU,t.\u0275fac=function(i){return new(i||t)(ge(Ps))},t.\u0275prov=ue({token:t,factory:()=>_6e(),providedIn:"root"});let e=t;return e})();function _6e(){return new b6(ge(Ps))}function k6e(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function oU(e){return e.replace(/\/index.html$/,"")}function T6e(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var Ui=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}(Ui||{}),Xt=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}(Xt||{}),K1=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}(K1||{}),Rs=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e.Infinity=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}(Rs||{});function I6e(e){return zo(e)[$n.LocaleId]}function F6e(e,t,n){let r=zo(e),i=[r[$n.DayPeriodsFormat],r[$n.DayPeriodsStandalone]],o=Ho(i,t);return Ho(o,n)}function R6e(e,t,n){let r=zo(e),i=[r[$n.DaysFormat],r[$n.DaysStandalone]],o=Ho(i,t);return Ho(o,n)}function O6e(e,t,n){let r=zo(e),i=[r[$n.MonthsFormat],r[$n.MonthsStandalone]],o=Ho(i,t);return Ho(o,n)}function P6e(e,t){let r=zo(e)[$n.Eras];return Ho(r,t)}function N9(e,t){let n=zo(e);return Ho(n[$n.DateFormat],t)}function _9(e,t){let n=zo(e);return Ho(n[$n.TimeFormat],t)}function k9(e,t){let r=zo(e)[$n.DateTimeFormat];return Ho(r,t)}function B9(e,t){let n=zo(e),r=n[$n.NumberSymbols][t];if(typeof r>"u"){if(t===Rs.CurrencyDecimal)return n[$n.NumberSymbols][Rs.Decimal];if(t===Rs.CurrencyGroup)return n[$n.NumberSymbols][Rs.Group]}return r}function mU(e){if(!e[$n.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[$n.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function $6e(e){let t=zo(e);return mU(t),(t[$n.ExtraData][2]||[]).map(r=>typeof r=="string"?dD(r):[dD(r[0]),dD(r[1])])}function B6e(e,t,n){let r=zo(e);mU(r);let i=[r[$n.ExtraData][0],r[$n.ExtraData][1]],o=Ho(i,t)||[];return Ho(o,n)||[]}function Ho(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new Error("Locale data API: locale data undefined")}function dD(e){let[t,n]=e.split(":");return{hours:+t,minutes:+n}}var U6e=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,T9={},j6e=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Os=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}(Os||{}),At=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}(At||{}),Lt=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}(Lt||{});function q6e(e,t,n,r){let i=eue(e);t=Is(n,t)||t;let a=[],s;for(;t;)if(s=j6e.exec(t),s){a=a.concat(s.slice(1));let u=a.pop();if(!u)break;t=u}else{a.push(t);break}let c=i.getTimezoneOffset();r&&(c=vU(r,c),i=J6e(i,r,!0));let l="";return a.forEach(u=>{let f=K6e(u);l+=f?f(i,n,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function $9(e,t,n){let r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function Is(e,t){let n=I6e(e);if(T9[n]??={},T9[n][t])return T9[n][t];let r="";switch(t){case"shortDate":r=N9(e,K1.Short);break;case"mediumDate":r=N9(e,K1.Medium);break;case"longDate":r=N9(e,K1.Long);break;case"fullDate":r=N9(e,K1.Full);break;case"shortTime":r=_9(e,K1.Short);break;case"mediumTime":r=_9(e,K1.Medium);break;case"longTime":r=_9(e,K1.Long);break;case"fullTime":r=_9(e,K1.Full);break;case"short":let i=Is(e,"shortTime"),o=Is(e,"shortDate");r=I9(k9(e,K1.Short),[i,o]);break;case"medium":let a=Is(e,"mediumTime"),s=Is(e,"mediumDate");r=I9(k9(e,K1.Medium),[a,s]);break;case"long":let c=Is(e,"longTime"),l=Is(e,"longDate");r=I9(k9(e,K1.Long),[c,l]);break;case"full":let u=Is(e,"fullTime"),f=Is(e,"fullDate");r=I9(k9(e,K1.Full),[u,f]);break}return r&&(T9[n][t]=r),r}function I9(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,r){return t!=null&&r in t?t[r]:n})),e}function x2(e,t,n="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=-e+1:(e=-e,o=n));let a=String(e);for(;a.length<t;)a="0"+a;return r&&(a=a.slice(a.length-t)),o+a}function G6e(e,t){return x2(e,3).substring(0,t)}function Xn(e,t,n=0,r=!1,i=!1){return function(o,a){let s=W6e(e,o);if((n>0||s>-n)&&(s+=n),e===At.Hours)s===0&&n===-12&&(s=12);else if(e===At.FractionalSeconds)return G6e(s,t);let c=B9(a,Rs.MinusSign);return x2(s,t,c,r,i)}}function W6e(e,t){switch(e){case At.FullYear:return t.getFullYear();case At.Month:return t.getMonth();case At.Date:return t.getDate();case At.Hours:return t.getHours();case At.Minutes:return t.getMinutes();case At.Seconds:return t.getSeconds();case At.FractionalSeconds:return t.getMilliseconds();case At.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}function nn(e,t,n=Ui.Format,r=!1){return function(i,o){return Y6e(i,o,e,t,n,r)}}function Y6e(e,t,n,r,i,o){switch(n){case Lt.Months:return O6e(t,i,r)[e.getMonth()];case Lt.Days:return R6e(t,i,r)[e.getDay()];case Lt.DayPeriods:let a=e.getHours(),s=e.getMinutes();if(o){let l=$6e(t),u=B6e(t,i,r),f=l.findIndex(d=>{if(Array.isArray(d)){let[p,h]=d,m=a>=p.hours&&s>=p.minutes,g=a<h.hours||a===h.hours&&s<h.minutes;if(p.hours<h.hours){if(m&&g)return!0}else if(m||g)return!0}else if(d.hours===a&&d.minutes===s)return!0;return!1});if(f!==-1)return u[f]}return F6e(t,i,r)[a<12?0:1];case Lt.Eras:return P6e(t,r)[e.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function F9(e){return function(t,n,r){let i=-1*r,o=B9(n,Rs.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case Os.Short:return(i>=0?"+":"")+x2(a,2,o)+x2(Math.abs(i%60),2,o);case Os.ShortGMT:return"GMT"+(i>=0?"+":"")+x2(a,1,o);case Os.Long:return"GMT"+(i>=0?"+":"")+x2(a,2,o)+":"+x2(Math.abs(i%60),2,o);case Os.Extended:return r===0?"Z":(i>=0?"+":"")+x2(a,2,o)+":"+x2(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${e}"`)}}}var X6e=0,O9=4;function Q6e(e){let t=$9(e,X6e,1).getDay();return $9(e,0,1+(t<=O9?O9:O9+7)-t)}function gU(e){let t=e.getDay(),n=t===0?-3:O9-t;return $9(e.getFullYear(),e.getMonth(),e.getDate()+n)}function pD(e,t=!1){return function(n,r){let i;if(t){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,a=n.getDate();i=1+Math.floor((a+o)/7)}else{let o=gU(n),a=Q6e(o.getFullYear()),s=o.getTime()-a.getTime();i=1+Math.round(s/6048e5)}return x2(i,e,B9(r,Rs.MinusSign))}}function R9(e,t=!1){return function(n,r){let o=gU(n).getFullYear();return x2(o,e,B9(r,Rs.MinusSign),t)}}var hD={};function K6e(e){if(hD[e])return hD[e];let t;switch(e){case"G":case"GG":case"GGG":t=nn(Lt.Eras,Xt.Abbreviated);break;case"GGGG":t=nn(Lt.Eras,Xt.Wide);break;case"GGGGG":t=nn(Lt.Eras,Xt.Narrow);break;case"y":t=Xn(At.FullYear,1,0,!1,!0);break;case"yy":t=Xn(At.FullYear,2,0,!0,!0);break;case"yyy":t=Xn(At.FullYear,3,0,!1,!0);break;case"yyyy":t=Xn(At.FullYear,4,0,!1,!0);break;case"Y":t=R9(1);break;case"YY":t=R9(2,!0);break;case"YYY":t=R9(3);break;case"YYYY":t=R9(4);break;case"M":case"L":t=Xn(At.Month,1,1);break;case"MM":case"LL":t=Xn(At.Month,2,1);break;case"MMM":t=nn(Lt.Months,Xt.Abbreviated);break;case"MMMM":t=nn(Lt.Months,Xt.Wide);break;case"MMMMM":t=nn(Lt.Months,Xt.Narrow);break;case"LLL":t=nn(Lt.Months,Xt.Abbreviated,Ui.Standalone);break;case"LLLL":t=nn(Lt.Months,Xt.Wide,Ui.Standalone);break;case"LLLLL":t=nn(Lt.Months,Xt.Narrow,Ui.Standalone);break;case"w":t=pD(1);break;case"ww":t=pD(2);break;case"W":t=pD(1,!0);break;case"d":t=Xn(At.Date,1);break;case"dd":t=Xn(At.Date,2);break;case"c":case"cc":t=Xn(At.Day,1);break;case"ccc":t=nn(Lt.Days,Xt.Abbreviated,Ui.Standalone);break;case"cccc":t=nn(Lt.Days,Xt.Wide,Ui.Standalone);break;case"ccccc":t=nn(Lt.Days,Xt.Narrow,Ui.Standalone);break;case"cccccc":t=nn(Lt.Days,Xt.Short,Ui.Standalone);break;case"E":case"EE":case"EEE":t=nn(Lt.Days,Xt.Abbreviated);break;case"EEEE":t=nn(Lt.Days,Xt.Wide);break;case"EEEEE":t=nn(Lt.Days,Xt.Narrow);break;case"EEEEEE":t=nn(Lt.Days,Xt.Short);break;case"a":case"aa":case"aaa":t=nn(Lt.DayPeriods,Xt.Abbreviated);break;case"aaaa":t=nn(Lt.DayPeriods,Xt.Wide);break;case"aaaaa":t=nn(Lt.DayPeriods,Xt.Narrow);break;case"b":case"bb":case"bbb":t=nn(Lt.DayPeriods,Xt.Abbreviated,Ui.Standalone,!0);break;case"bbbb":t=nn(Lt.DayPeriods,Xt.Wide,Ui.Standalone,!0);break;case"bbbbb":t=nn(Lt.DayPeriods,Xt.Narrow,Ui.Standalone,!0);break;case"B":case"BB":case"BBB":t=nn(Lt.DayPeriods,Xt.Abbreviated,Ui.Format,!0);break;case"BBBB":t=nn(Lt.DayPeriods,Xt.Wide,Ui.Format,!0);break;case"BBBBB":t=nn(Lt.DayPeriods,Xt.Narrow,Ui.Format,!0);break;case"h":t=Xn(At.Hours,1,-12);break;case"hh":t=Xn(At.Hours,2,-12);break;case"H":t=Xn(At.Hours,1);break;case"HH":t=Xn(At.Hours,2);break;case"m":t=Xn(At.Minutes,1);break;case"mm":t=Xn(At.Minutes,2);break;case"s":t=Xn(At.Seconds,1);break;case"ss":t=Xn(At.Seconds,2);break;case"S":t=Xn(At.FractionalSeconds,1);break;case"SS":t=Xn(At.FractionalSeconds,2);break;case"SSS":t=Xn(At.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=F9(Os.Short);break;case"ZZZZZ":t=F9(Os.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=F9(Os.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=F9(Os.Long);break;default:return null}return hD[e]=t,t}function vU(e,t){e=e.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function Z6e(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function J6e(e,t,n){let r=n?-1:1,i=e.getTimezoneOffset(),o=vU(t,i);return Z6e(e,r*(o-i))}function eue(e){if(aU(e))return e;if(typeof e=="number"&&!isNaN(e))return new Date(e);if(typeof e=="string"){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){let[i,o=1,a=1]=e.split("-").map(s=>+s);return $9(i,o-1,a)}let n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let r;if(r=e.match(U6e))return tue(r)}let t=new Date(e);if(!aU(t))throw new Error(`Unable to convert "${e}" into a date`);return t}function tue(e){let t=new Date(0),n=0,r=0,i=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));let a=Number(e[4]||0)-n,s=Number(e[5]||0)-r,c=Number(e[6]||0),l=Math.floor(parseFloat("0."+(e[7]||0))*1e3);return o.call(t,a,s,c,l),t}function aU(e){return e instanceof Date&&!isNaN(e.valueOf())}function U9(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var mD=/\s+/,sU=[],yU=(()=>{let t=class t{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=sU,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(mD):sU}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(mD):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(mD).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};t.\u0275fac=function(i){return new(i||t)(W(qr),W(Y1))},t.\u0275dir=kt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[Ur.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let e=t;return e})();var gD=class{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},gi=(()=>{let t=class t{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,a,s)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new gD(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(a===null?void 0:a);else if(a!==null){let c=i.get(a);i.move(c,s),cU(c,o)}});for(let o=0,a=i.length;o<a;o++){let c=i.get(o).context;c.index=o,c.count=a,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let a=i.get(o.currentIndex);cU(a,o)})}static ngTemplateContextGuard(r,i){return!0}};t.\u0275fac=function(i){return new(i||t)(W(o3),W(Y4),W(tD))},t.\u0275dir=kt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let e=t;return e})();function cU(e,t){e.context.$implicit=t.item}var x1=(()=>{let t=class t{constructor(r,i){this._viewContainer=r,this._context=new vD,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){lU("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){lU("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};t.\u0275fac=function(i){return new(i||t)(W(o3),W(Y4))},t.\u0275dir=kt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let e=t;return e})(),vD=class{constructor(){this.$implicit=null,this.ngIf=null}};function lU(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${Pi(t)}'.`)}function xU(e,t){return new xe(2100,!1)}var yD=class{createSubscription(t,n){return eD(()=>t.subscribe({next:n,error:r=>{throw r}}))}dispose(t){eD(()=>t.unsubscribe())}},xD=class{createSubscription(t,n){return t.then(n,r=>{throw r})}dispose(t){}},nue=new xD,rue=new yD,j9=(()=>{let t=class t{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(l3(r))return nue;if(uD(r))return rue;throw xU(t,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};t.\u0275fac=function(i){return new(i||t)(W(ks,16))},t.\u0275pipe=vE({name:"async",type:t,pure:!1,standalone:!0});let e=t;return e})();var iue="mediumDate",oue=new ze(""),aue=new ze(""),Lo=(()=>{let t=class t{constructor(r,i,o){this.locale=r,this.defaultTimezone=i,this.defaultOptions=o}transform(r,i,o,a){if(r==null||r===""||r!==r)return null;try{let s=i??this.defaultOptions?.dateFormat??iue,c=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return q6e(r,s,a||this.locale,c)}catch(s){throw xU(t,s.message)}}};t.\u0275fac=function(i){return new(i||t)(W(V9,16),W(oue,24),W(aue,24))},t.\u0275pipe=vE({name:"date",type:t,pure:!0,standalone:!0});let e=t;return e})();var q9=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Cr({type:t}),t.\u0275inj=br({});let e=t;return e})(),DD="browser",sue="server";function cue(e){return e===DD}function zD(e){return e===sue}var CU=(()=>{let t=class t{};t.\u0275prov=ue({token:t,providedIn:"root",factory:()=>cue(ce(Ma))?new CD(ce(Gr),window):new bD});let e=t;return e})(),CD=class{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let n=lue(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function lue(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let a=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(a)return a}i=r.nextNode()}}return null}var bD=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},C6=class{};var e5=class{},W9=class{},nl=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),a=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let a=this.headers.get(n);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}break}}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var LD=class{encodeKey(t){return bU(t)}encodeValue(t){return bU(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function due(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[a,s]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=n.get(a)||[];c.push(s),n.set(a,c)}),n}var pue=/%(\d[a-f0-9])/gi,hue={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function bU(e){return encodeURIComponent(e).replace(pue,(t,n)=>hue[n]??t)}function G9(e){return`${e}`}var u3=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new LD,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=due(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],i=Array.isArray(r)?r.map(G9):[G9(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(G9(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(G9(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var AD=class{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function mue(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function MU(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function wU(e){return typeof Blob<"u"&&e instanceof Blob}function SU(e){return typeof FormData<"u"&&e instanceof FormData}function gue(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var J8=class e{constructor(t,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(mue(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new nl,this.context??=new AD,!this.params)this.params=new u3,this.urlWithParams=n;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=n;else{let s=n.indexOf("?"),c=s===-1?"?":s<n.length-1?"&":"";this.urlWithParams=n+c+a}}}serializeBody(){return this.body===null?null:MU(this.body)||wU(this.body)||SU(this.body)||gue(this.body)||typeof this.body=="string"?this.body:this.body instanceof u3?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||SU(this.body)?null:wU(this.body)?this.body.type||null:MU(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof u3?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.body!==void 0?t.body:this.body,a=t.withCredentials!==void 0?t.withCredentials:this.withCredentials,s=t.reportProgress!==void 0?t.reportProgress:this.reportProgress,c=t.headers||this.headers,l=t.params||this.params,u=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((f,d)=>f.set(d,t.setHeaders[d]),c)),t.setParams&&(l=Object.keys(t.setParams).reduce((f,d)=>f.set(d,t.setParams[d]),l)),new e(n,r,o,{params:l,headers:c,context:u,reportProgress:s,responseType:i,withCredentials:a})}},M6=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(M6||{}),t5=class{constructor(t,n=X9.Ok,r="OK"){this.headers=t.headers||new nl,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},VD=class e extends t5{constructor(t={}){super(t),this.type=M6.ResponseHeader}clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},w6=class e extends t5{constructor(t={}){super(t),this.type=M6.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Y9=class extends t5{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},X9=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(X9||{});function HD(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var $s=(()=>{let t=class t{constructor(r){this.handler=r}request(r,i,o={}){let a;if(r instanceof J8)a=r;else{let l;o.headers instanceof nl?l=o.headers:l=new nl(o.headers);let u;o.params&&(o.params instanceof u3?u=o.params:u=new u3({fromObject:o.params})),a=new J8(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let s=ke(a).pipe(Es(l=>this.handler.handle(l)));if(r instanceof J8||o.observe==="events")return s;let c=s.pipe(p1(l=>l instanceof w6));switch(o.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return c.pipe(Ke(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(Ke(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(Ke(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(Ke(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new u3().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,HD(o,i))}post(r,i,o={}){return this.request("POST",r,HD(o,i))}put(r,i,o={}){return this.request("PUT",r,HD(o,i))}};t.\u0275fac=function(i){return new(i||t)(ge(e5))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function HU(e,t){return t(e)}function vue(e,t){return(n,r)=>t.intercept(n,{handle:i=>e(i,r)})}function yue(e,t,n){return(r,i)=>Sa(n,()=>t(r,o=>e(o,i)))}var ND=new ze(""),_D=new ze(""),xue=new ze(""),Cue=new ze("");function bue(){let e=null;return(t,n)=>{e===null&&(e=(ce(ND,{optional:!0})??[]).reduceRight(vue,HU));let r=ce(Z4),i=r.add();return e(t,n).pipe(Kc(()=>r.remove(i)))}}var EU=(()=>{let t=class t extends e5{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=ce(Z4);let o=ce(Cue,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(_D),...this.injector.get(xue,[])]));this.chain=o.reduceRight((a,s)=>yue(a,s,this.injector),HU)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(Kc(()=>this.pendingTasks.remove(i)))}};t.\u0275fac=function(i){return new(i||t)(ge(W9),ge(Bi))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();var Mue=/^\)\]\}',?\n/;function wue(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var DU=(()=>{let t=class t{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new xe(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?en(i.\u0275loadImpl()):ke(null)).pipe(h1(()=>new wt(a=>{let s=i.build();if(s.open(r.method,r.urlWithParams),r.withCredentials&&(s.withCredentials=!0),r.headers.forEach((g,v)=>s.setRequestHeader(g,v.join(","))),r.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let g=r.detectContentTypeHeader();g!==null&&s.setRequestHeader("Content-Type",g)}if(r.responseType){let g=r.responseType.toLowerCase();s.responseType=g!=="json"?g:"text"}let c=r.serializeBody(),l=null,u=()=>{if(l!==null)return l;let g=s.statusText||"OK",v=new nl(s.getAllResponseHeaders()),y=wue(s)||r.url;return l=new VD({headers:v,status:s.status,statusText:g,url:y}),l},f=()=>{let{headers:g,status:v,statusText:y,url:C}=u(),b=null;v!==X9.NoContent&&(b=typeof s.response>"u"?s.responseText:s.response),v===0&&(v=b?X9.Ok:0);let M=v>=200&&v<300;if(r.responseType==="json"&&typeof b=="string"){let S=b;b=b.replace(Mue,"");try{b=b!==""?JSON.parse(b):null}catch(w){b=S,M&&(M=!1,b={error:w,text:b})}}M?(a.next(new w6({body:b,headers:g,status:v,statusText:y,url:C||void 0})),a.complete()):a.error(new Y9({error:b,headers:g,status:v,statusText:y,url:C||void 0}))},d=g=>{let{url:v}=u(),y=new Y9({error:g,status:s.status||0,statusText:s.statusText||"Unknown Error",url:v||void 0});a.error(y)},p=!1,h=g=>{p||(a.next(u()),p=!0);let v={type:M6.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),r.responseType==="text"&&s.responseText&&(v.partialText=s.responseText),a.next(v)},m=g=>{let v={type:M6.UploadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),a.next(v)};return s.addEventListener("load",f),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),r.reportProgress&&(s.addEventListener("progress",h),c!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(c),a.next({type:M6.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",f),s.removeEventListener("timeout",d),r.reportProgress&&(s.removeEventListener("progress",h),c!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}};t.\u0275fac=function(i){return new(i||t)(ge(C6))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),LU=new ze(""),Sue="XSRF-TOKEN",Eue=new ze("",{providedIn:"root",factory:()=>Sue}),Due="X-XSRF-TOKEN",zue=new ze("",{providedIn:"root",factory:()=>Due}),Q9=class{},Hue=(()=>{let t=class t{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=U9(r,this.cookieName),this.lastCookieString=r),this.lastToken}};t.\u0275fac=function(i){return new(i||t)(ge(Gr),ge(Ma),ge(Eue))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function Lue(e,t){let n=e.url.toLowerCase();if(!ce(LU)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let r=ce(Q9).getToken(),i=ce(zue);return r!=null&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),t(e)}var AU=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(AU||{});function Aue(e,t){return{\u0275kind:e,\u0275providers:t}}function Vue(...e){let t=[$s,DU,EU,{provide:e5,useExisting:EU},{provide:W9,useExisting:DU},{provide:_D,useValue:Lue,multi:!0},{provide:LU,useValue:!0},{provide:Q9,useClass:Hue}];for(let n of e)t.push(...n.\u0275providers);return p9(t)}var zU=new ze("");function Nue(){return Aue(AU.LegacyInterceptors,[{provide:zU,useFactory:bue},{provide:_D,useExisting:zU,multi:!0}])}var VU=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Cr({type:t}),t.\u0275inj=br({providers:[Vue(Nue())]});let e=t;return e})();var ID=class extends P9{constructor(){super(...arguments),this.supportsDOMEvents=!0}},FD=class e extends ID{static makeCurrent(){fU(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=_ue();return n==null?null:kue(n)}resetBaseElement(){n5=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return U9(document.cookie,t)}},n5=null;function _ue(){return n5=n5||document.querySelector("base"),n5?n5.getAttribute("href"):null}function kue(e){return new URL(e,document.baseURI).pathname}var RD=class{addToWindow(t){Pn.getAngularTestability=(r,i=!0)=>{let o=t.findTestabilityInTree(r,i);if(o==null)throw new xe(5103,!1);return o},Pn.getAllAngularTestabilities=()=>t.getAllTestabilities(),Pn.getAllAngularRootElements=()=>t.getAllRootElements();let n=r=>{let i=Pn.getAllAngularTestabilities(),o=i.length,a=function(){o--,o==0&&r()};i.forEach(s=>{s.whenStable(a)})};Pn.frameworkStabilizers||(Pn.frameworkStabilizers=[]),Pn.frameworkStabilizers.push(n)}findTestabilityInTree(t,n,r){if(n==null)return null;let i=t.getTestability(n);return i??(r?za().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},Tue=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),OD=new ze(""),TU=(()=>{let t=class t{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(a=>a.supports(r)),!i)throw new xe(5101,!1);return this._eventNameToPlugin.set(r,i),i}};t.\u0275fac=function(i){return new(i||t)(ge(OD),ge(qt))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),Z9=class{constructor(t){this._doc=t}},kD="ng-app-id",IU=(()=>{let t=class t{constructor(r,i,o,a={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=zD(a),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${kD}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let a=o.get(r);return a.usage+=i,a.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,a=o?.get(i);if(a?.parentNode===r)return o.delete(i),a.removeAttribute(kD),a;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(kD,this.appId),r.appendChild(s),s}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),a=this.styleRef,s=a.get(i)?.elements;s?s.push(o):a.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};t.\u0275fac=function(i){return new(i||t)(ge(Gr),ge(u9),ge(VE,8),ge(Ma))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),TD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$D=/%COMP%/g,FU="%COMP%",Iue=`_nghost-${FU}`,Fue=`_ngcontent-${FU}`,Rue=!0,Oue=new ze("",{providedIn:"root",factory:()=>Rue});function Pue(e){return Fue.replace($D,e)}function $ue(e){return Iue.replace($D,e)}function RU(e,t){return t.map(n=>n.replace($D,e))}var NU=(()=>{let t=class t{constructor(r,i,o,a,s,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=a,this.doc=s,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=zD(c),this.defaultRenderer=new r5(r,s,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ya.ShadowDom&&(i=k(x({},i),{encapsulation:ya.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof J9?o.applyToHost(r):o instanceof i5&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,a=o.get(i.id);if(!a){let s=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case ya.Emulated:a=new J9(l,u,i,this.appId,f,s,c,d);break;case ya.ShadowDom:return new PD(l,u,r,i,s,c,this.nonce,d);default:a=new i5(l,u,i,f,s,c,d);break}o.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(i){return new(i||t)(ge(TU),ge(IU),ge(u9),ge(Oue),ge(Gr),ge(Ma),ge(qt),ge(VE))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),r5=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(TD[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(_U(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(_U(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new xe(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=TD[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=TD[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Ls.DashCase|Ls.Important)?t.style.setProperty(n,r,i&Ls.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Ls.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=za().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function _U(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var PD=class extends r5{constructor(t,n,r,i,o,a,s,c){super(t,o,a,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=RU(i.id,i.styles);for(let u of l){let f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=u,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},i5=class extends r5{constructor(t,n,r,i,o,a,s,c){super(t,o,a,s),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?RU(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},J9=class extends i5{constructor(t,n,r,i,o,a,s,c){let l=i+"-"+r.id;super(t,n,r,o,a,s,c,l),this.contentAttr=Pue(l),this.hostAttr=$ue(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},Bue=(()=>{let t=class t extends Z9{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};t.\u0275fac=function(i){return new(i||t)(ge(Gr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),kU=["alt","control","meta","shift"],Uue={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jue={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},que=(()=>{let t=class t extends Z9{constructor(r){super(r)}supports(r){return t.parseEventName(r)!=null}addEventListener(r,i,o){let a=t.parseEventName(i),s=t.eventCallback(a.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>za().onAndCancel(r,a.domEventName,s))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let a=t._normalizeKey(i.pop()),s="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),s="code."),kU.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=a,i.length!=0||a.length===0)return null;let l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(r,i){let o=Uue[r.key]||r.key,a="";return i.indexOf("code.")>-1&&(o=r.code,a="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),kU.forEach(s=>{if(s!==o){let c=jue[s];c(r)&&(a+=s+".")}}),a+=o,a===i)}static eventCallback(r,i,o){return a=>{t.matchEventFullKeyCode(a,r)&&o.runGuarded(()=>i(a))}}static _normalizeKey(r){return r==="esc"?"escape":r}};t.\u0275fac=function(i){return new(i||t)(ge(Gr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function Gue(){FD.makeCurrent()}function Wue(){return new Ca}function Yue(){return i$(document),document}var Xue=[{provide:Ma,useValue:DD},{provide:AE,useValue:Gue,multi:!0},{provide:Gr,useFactory:Yue,deps:[]}],OU=fD(tU,"browser",Xue),Que=new ze(""),Kue=[{provide:Z8,useClass:RD,deps:[]},{provide:cD,useClass:D9,deps:[qt,z9,Z8]},{provide:D9,useClass:D9,deps:[qt,z9,Z8]}],Zue=[{provide:h9,useValue:"root"},{provide:Ca,useFactory:Wue,deps:[]},{provide:OD,useClass:Bue,multi:!0,deps:[Gr,qt,Ma]},{provide:OD,useClass:que,multi:!0,deps:[Gr]},NU,IU,TU,{provide:$8,useExisting:NU},{provide:C6,useClass:Tue,deps:[]},[]],PU=(()=>{let t=class t{constructor(r){}static withServerTransition(r){return{ngModule:t,providers:[{provide:u9,useValue:r.appId}]}}};t.\u0275fac=function(i){return new(i||t)(ge(Que,12))},t.\u0275mod=Cr({type:t}),t.\u0275inj=br({providers:[...Zue,...Kue],imports:[q9,nU]});let e=t;return e})();var $U=(()=>{let t=class t{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};t.\u0275fac=function(i){return new(i||t)(ge(Gr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var BD=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:function(i){let o=null;return i?o=new(i||t):o=ge(Jue),o},providedIn:"root"});let e=t;return e})(),Jue=(()=>{let t=class t extends BD{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case y2.NONE:return i;case y2.HTML:return Ns(i,"HTML")?v2(i):OE(this._doc,String(i)).toString();case y2.STYLE:return Ns(i,"Style")?v2(i):i;case y2.SCRIPT:if(Ns(i,"Script"))return v2(i);throw new xe(5200,!1);case y2.URL:return Ns(i,"URL")?v2(i):v9(String(i));case y2.RESOURCE_URL:if(Ns(i,"ResourceURL"))return v2(i);throw new xe(5201,!1);default:throw new xe(5202,!1)}}bypassSecurityTrustHtml(r){return O$(r)}bypassSecurityTrustStyle(r){return P$(r)}bypassSecurityTrustScript(r){return $$(r)}bypassSecurityTrustUrl(r){return B$(r)}bypassSecurityTrustResourceUrl(r){return U$(r)}};t.\u0275fac=function(i){return new(i||t)(ge(Gr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var QU=(()=>{let t=class t{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};t.\u0275fac=function(i){return new(i||t)(W(Y1),W(qr))},t.\u0275dir=kt({type:t});let e=t;return e})(),l5=(()=>{let t=class t extends QU{};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ea(t)))(o||t)}})(),t.\u0275dir=kt({type:t,features:[sr]});let e=t;return e})(),D6=new ze(""),efe={provide:D6,useExisting:wa(()=>rl),multi:!0},rl=(()=>{let t=class t extends l5{writeValue(r){this.setProperty("checked",r)}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ea(t)))(o||t)}})(),t.\u0275dir=kt({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){i&1&&Fe("change",function(s){return o.onChange(s.target.checked)})("blur",function(){return o.onTouched()})},features:[s3([efe]),sr]});let e=t;return e})(),tfe={provide:D6,useExisting:wa(()=>b1),multi:!0};function nfe(){let e=za()?za().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var rfe=new ze(""),b1=(()=>{let t=class t extends QU{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!nfe())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};t.\u0275fac=function(i){return new(i||t)(W(Y1),W(qr),W(rfe,8))},t.\u0275dir=kt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Fe("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[s3([tfe]),sr]});let e=t;return e})();var KU=new ze(""),ZU=new ze("");function JU(e){return e!=null}function ej(e){return l3(e)?en(e):e}function tj(e){let t={};return e.forEach(n=>{t=n!=null?x(x({},t),n):t}),Object.keys(t).length===0?null:t}function nj(e,t){return t.map(n=>n(e))}function ife(e){return!e.validate}function rj(e){return e.map(t=>ife(t)?t:n=>t.validate(n))}function ofe(e){if(!e)return null;let t=e.filter(JU);return t.length==0?null:function(n){return tj(nj(n,t))}}function qD(e){return e!=null?ofe(rj(e)):null}function afe(e){if(!e)return null;let t=e.filter(JU);return t.length==0?null:function(n){let r=nj(n,t).map(ej);return Ww(r).pipe(Ke(tj))}}function GD(e){return e!=null?afe(rj(e)):null}function BU(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function sfe(e){return e._rawValidators}function cfe(e){return e._rawAsyncValidators}function jD(e){return e?Array.isArray(e)?e:[e]:[]}function tg(e,t){return Array.isArray(e)?e.includes(t):e===t}function UU(e,t){let n=jD(t);return jD(e).forEach(i=>{tg(n,i)||n.push(i)}),n}function jU(e,t){return jD(t).filter(n=>!tg(e,n))}var ng=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=qD(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=GD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},E6=class extends ng{get formDirective(){return null}get path(){return null}},c5=class extends ng{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},rg=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},lfe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},$We=k(x({},lfe),{"[class.ng-submitted]":"isSubmitted"}),vi=(()=>{let t=class t extends rg{constructor(r){super(r)}};t.\u0275fac=function(i){return new(i||t)(W(c5,2))},t.\u0275dir=kt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&X8("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[sr]});let e=t;return e})(),Ha=(()=>{let t=class t extends rg{constructor(r){super(r)}};t.\u0275fac=function(i){return new(i||t)(W(E6,10))},t.\u0275dir=kt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&X8("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[sr]});let e=t;return e})();var o5="VALID",eg="INVALID",S6="PENDING",a5="DISABLED";function ij(e){return(ag(e)?e.validators:e)||null}function ufe(e){return Array.isArray(e)?qD(e):e||null}function oj(e,t){return(ag(t)?t.asyncValidators:e)||null}function ffe(e){return Array.isArray(e)?GD(e):e||null}function ag(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function dfe(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new xe(1e3,"");if(!r[n])throw new xe(1001,"")}function pfe(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new xe(1002,"")})}var ig=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===o5}get invalid(){return this.status===eg}get pending(){return this.status==S6}get disabled(){return this.status===a5}get enabled(){return this.status!==a5}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(UU(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(UU(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(jU(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(jU(t,this._rawAsyncValidators))}hasValidator(t){return tg(this._rawValidators,t)}hasAsyncValidator(t){return tg(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=S6,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=a5,this.errors=null,this._forEachChild(r=>{r.disable(k(x({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(k(x({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=o5,this._forEachChild(r=>{r.enable(k(x({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(k(x({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===o5||this.status===S6)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?a5:o5}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=S6,this._hasOwnPendingAsyncValidator=!0;let n=ej(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new jt,this.statusChanges=new jt}_calculateStatus(){return this._allControlsDisabled()?a5:this.errors?eg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(S6)?S6:this._anyControlsHaveStatus(eg)?eg:o5}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ag(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=ufe(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=ffe(this._rawAsyncValidators)}},og=class extends ig{constructor(t,n,r){super(ij(n),oj(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){pfe(this,!0,t),Object.keys(t).forEach(r=>{dfe(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var WD=new ze("CallSetDisabledState",{providedIn:"root",factory:()=>YD}),YD="always";function hfe(e,t){return[...t.path,e]}function aj(e,t,n=YD){sj(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),gfe(e,t),yfe(e,t),vfe(e,t),mfe(e,t)}function qU(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function mfe(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function sj(e,t){let n=sfe(e);t.validator!==null?e.setValidators(BU(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=cfe(e);t.asyncValidator!==null?e.setAsyncValidators(BU(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();qU(t._rawValidators,i),qU(t._rawAsyncValidators,i)}function gfe(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&cj(e,t)})}function vfe(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&cj(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function cj(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function yfe(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function xfe(e,t){e==null,sj(e,t)}function Cfe(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function bfe(e){return Object.getPrototypeOf(e.constructor)===l5}function Mfe(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function wfe(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===b1?n=o:bfe(o)?r=o:i=o}),i||r||n||null}var Sfe={provide:E6,useExisting:wa(()=>C2)},s5=Promise.resolve(),C2=(()=>{let t=class t extends E6{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new jt,this.form=new og({},qD(r),GD(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){s5.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),aj(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){s5.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){s5.then(()=>{let i=this._findContainer(r.path),o=new og({});xfe(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){s5.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){s5.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,Mfe(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};t.\u0275fac=function(i){return new(i||t)(W(KU,10),W(ZU,10),W(WD,8))},t.\u0275dir=kt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&Fe("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{options:[Ur.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s3([Sfe]),sr]});let e=t;return e})();function GU(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function WU(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var Efe=class extends ig{constructor(t=null,n,r){super(ij(n),oj(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ag(n)&&(n.nonNullable||n.initialValueIsDefault)&&(WU(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){GU(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){GU(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){WU(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Dfe={provide:c5,useExisting:wa(()=>Wr)},YU=Promise.resolve(),Wr=(()=>{let t=class t extends c5{constructor(r,i,o,a,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this.control=new Efe,this._registered=!1,this.name="",this.update=new jt,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=wfe(this,a)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),Cfe(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){aj(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){YU.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&tl(i);YU.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?hfe(r,this._parent):[r]}};t.\u0275fac=function(i){return new(i||t)(W(E6,9),W(KU,10),W(ZU,10),W(D6,10),W(ks,8),W(WD,8))},t.\u0275dir=kt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Ur.None,"disabled","isDisabled"],model:[Ur.None,"ngModel","model"],options:[Ur.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[s3([Dfe]),sr,Do]});let e=t;return e})(),La=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=kt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let e=t;return e})(),zfe={provide:D6,useExisting:wa(()=>XD),multi:!0},XD=(()=>{let t=class t extends l5{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ea(t)))(o||t)}})(),t.\u0275dir=kt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&Fe("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},features:[s3([zfe]),sr]});let e=t;return e})();var Hfe={provide:D6,useExisting:wa(()=>z6),multi:!0};function lj(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function Lfe(e){return e.split(":")[0]}var z6=(()=>{let t=class t extends l5{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),o=lj(i,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=Lfe(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ea(t)))(o||t)}})(),t.\u0275dir=kt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&Fe("change",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[s3([Hfe]),sr]});let e=t;return e})(),sg=(()=>{let t=class t{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(lj(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(i){return new(i||t)(W(qr),W(Y1),W(z6,9))},t.\u0275dir=kt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let e=t;return e})(),Afe={provide:D6,useExisting:wa(()=>uj),multi:!0};function XU(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function Vfe(e){return e.split(":")[0]}var uj=(()=>{let t=class t extends l5{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let o=r.map(a=>this._getOptionId(a));i=(a,s)=>{a._setSelected(o.indexOf(s.toString())>-1)}}else i=(o,a)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let o=[],a=i.selectedOptions;if(a!==void 0){let s=a;for(let c=0;c<s.length;c++){let l=s[c],u=this._getOptionValue(l.value);o.push(u)}}else{let s=i.options;for(let c=0;c<s.length;c++){let l=s[c];if(l.selected){let u=this._getOptionValue(l.value);o.push(u)}}}this.value=o,r(o)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=Vfe(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ea(t)))(o||t)}})(),t.\u0275dir=kt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&Fe("change",function(s){return o.onChange(s.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[s3([Afe]),sr]});let e=t;return e})(),cg=(()=>{let t=class t{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(XU(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(XU(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(i){return new(i||t)(W(qr),W(Y1),W(uj,9))},t.\u0275dir=kt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let e=t;return e})();var Nfe=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Cr({type:t}),t.\u0275inj=br({});let e=t;return e})();var fj=(()=>{let t=class t{static withConfig(r){return{ngModule:t,providers:[{provide:WD,useValue:r.callSetDisabledState??YD}]}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Cr({type:t}),t.\u0275inj=br({imports:[Nfe]});let e=t;return e})();function dj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dj(Object(n),!0).forEach(function(r){cr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cg(e){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(e)}function _fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kfe(e,t,n){return t&&pj(e.prototype,t),n&&pj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fz(e,t){return Ife(e)||Rfe(e,t)||Rj(e,t)||Pfe()}function y5(e){return Tfe(e)||Ffe(e)||Rj(e)||Ofe()}function Tfe(e){if(Array.isArray(e))return ez(e)}function Ife(e){if(Array.isArray(e))return e}function Ffe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(c){o=!0,s=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function Rj(e,t){if(e){if(typeof e=="string")return ez(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ez(e,t)}}function ez(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ofe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hj=function(){},dz={},Oj={},Pj=null,$j={mark:hj,measure:hj};try{typeof window<"u"&&(dz=window),typeof document<"u"&&(Oj=document),typeof MutationObserver<"u"&&(Pj=MutationObserver),typeof performance<"u"&&($j=performance)}catch{}var $fe=dz.navigator||{},mj=$fe.userAgent,gj=mj===void 0?"":mj,p3=dz,ln=Oj,vj=Pj,lg=$j,jWe=!!p3.document,qs=!!ln.documentElement&&!!ln.head&&typeof ln.addEventListener=="function"&&typeof ln.createElement=="function",Bj=~gj.indexOf("MSIE")||~gj.indexOf("Trident/"),ug,fg,dg,pg,hg,Bs="___FONT_AWESOME___",tz=16,Uj="fa",jj="svg-inline--fa",al="data-fa-i2svg",nz="data-fa-pseudo-element",Bfe="data-fa-pseudo-element-pending",pz="data-prefix",hz="data-icon",yj="fontawesome-i2svg",Ufe="async",jfe=["HTML","HEAD","STYLE","SCRIPT"],qj=function(){try{return!0}catch{return!1}}(),cn="classic",Hn="sharp",mz=[cn,Hn];function x5(e){return new Proxy(e,{get:function(n,r){return r in n?n[r]:n[cn]}})}var p5=x5((ug={},cr(ug,cn,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),cr(ug,Hn,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),ug)),h5=x5((fg={},cr(fg,cn,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),cr(fg,Hn,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),fg)),m5=x5((dg={},cr(dg,cn,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),cr(dg,Hn,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),dg)),qfe=x5((pg={},cr(pg,cn,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),cr(pg,Hn,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),pg)),Gfe=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,Gj="fa-layers-text",Wfe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,Yfe=x5((hg={},cr(hg,cn,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),cr(hg,Hn,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),hg)),Wj=[1,2,3,4,5,6,7,8,9,10],Xfe=Wj.concat([11,12,13,14,15,16,17,18,19,20]),Qfe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],il={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},g5=new Set;Object.keys(h5[cn]).map(g5.add.bind(g5));Object.keys(h5[Hn]).map(g5.add.bind(g5));var Kfe=[].concat(mz,y5(g5),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",il.GROUP,il.SWAP_OPACITY,il.PRIMARY,il.SECONDARY]).concat(Wj.map(function(e){return"".concat(e,"x")})).concat(Xfe.map(function(e){return"w-".concat(e)})),f5=p3.FontAwesomeConfig||{};function Zfe(e){var t=ln.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function Jfe(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}ln&&typeof ln.querySelector=="function"&&(xj=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]],xj.forEach(function(e){var t=fz(e,2),n=t[0],r=t[1],i=Jfe(Zfe(n));i!=null&&(f5[r]=i)}));var xj,Yj={styleDefault:"solid",familyDefault:"classic",cssPrefix:Uj,replacementClass:jj,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};f5.familyPrefix&&(f5.cssPrefix=f5.familyPrefix);var V6=ve(ve({},Yj),f5);V6.autoReplaceSvg||(V6.observeMutations=!1);var He={};Object.keys(Yj).forEach(function(e){Object.defineProperty(He,e,{enumerable:!0,set:function(n){V6[e]=n,d5.forEach(function(r){return r(He)})},get:function(){return V6[e]}})});Object.defineProperty(He,"familyPrefix",{enumerable:!0,set:function(t){V6.cssPrefix=t,d5.forEach(function(n){return n(He)})},get:function(){return V6.cssPrefix}});p3.FontAwesomeConfig=He;var d5=[];function e8e(e){return d5.push(e),function(){d5.splice(d5.indexOf(e),1)}}var d3=tz,Aa={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function t8e(e){if(!(!e||!qs)){var t=ln.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=ln.head.childNodes,r=null,i=n.length-1;i>-1;i--){var o=n[i],a=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(r=o)}return ln.head.insertBefore(t,r),e}}var n8e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function v5(){for(var e=12,t="";e-- >0;)t+=n8e[Math.random()*62|0];return t}function N6(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function gz(e){return e.classList?N6(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function Xj(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r8e(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,'="').concat(Xj(e[n]),'" ')},"").trim()}function wg(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")},"")}function vz(e){return e.size!==Aa.size||e.x!==Aa.x||e.y!==Aa.y||e.rotate!==Aa.rotate||e.flipX||e.flipY}function i8e(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(t.x*32,", ").concat(t.y*32,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)"),c={transform:"".concat(o," ").concat(a," ").concat(s)},l={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:c,path:l}}function o8e(e){var t=e.transform,n=e.width,r=n===void 0?tz:n,i=e.height,o=i===void 0?tz:i,a=e.startCentered,s=a===void 0?!1:a,c="";return s&&Bj?c+="translate(".concat(t.x/d3-r/2,"em, ").concat(t.y/d3-o/2,"em) "):s?c+="translate(calc(-50% + ".concat(t.x/d3,"em), calc(-50% + ").concat(t.y/d3,"em)) "):c+="translate(".concat(t.x/d3,"em, ").concat(t.y/d3,"em) "),c+="scale(".concat(t.size/d3*(t.flipX?-1:1),", ").concat(t.size/d3*(t.flipY?-1:1),") "),c+="rotate(".concat(t.rotate,"deg) "),c}var a8e=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function Qj(){var e=Uj,t=jj,n=He.cssPrefix,r=He.replacementClass,i=a8e;if(n!==e||r!==t){var o=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(o,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(s,".".concat(r))}return i}var Cj=!1;function QD(){He.autoAddCss&&!Cj&&(t8e(Qj()),Cj=!0)}var s8e={mixout:function(){return{dom:{css:Qj,insertCss:QD}}},hooks:function(){return{beforeDOMElementCreation:function(){QD()},beforeI2svg:function(){QD()}}}},Us=p3||{};Us[Bs]||(Us[Bs]={});Us[Bs].styles||(Us[Bs].styles={});Us[Bs].hooks||(Us[Bs].hooks={});Us[Bs].shims||(Us[Bs].shims=[]);var b2=Us[Bs],Kj=[],c8e=function e(){ln.removeEventListener("DOMContentLoaded",e),bg=1,Kj.map(function(t){return t()})},bg=!1;qs&&(bg=(ln.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ln.readyState),bg||ln.addEventListener("DOMContentLoaded",c8e));function l8e(e){qs&&(bg?setTimeout(e,0):Kj.push(e))}function C5(e){var t=e.tag,n=e.attributes,r=n===void 0?{}:n,i=e.children,o=i===void 0?[]:i;return typeof e=="string"?Xj(e):"<".concat(t," ").concat(r8e(r),">").concat(o.map(C5).join(""),"</").concat(t,">")}function bj(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}var u8e=function(t,n){return function(r,i,o,a){return t.call(n,r,i,o,a)}},KD=function(t,n,r,i){var o=Object.keys(t),a=o.length,s=i!==void 0?u8e(n,i):n,c,l,u;for(r===void 0?(c=1,u=t[o[0]]):(c=0,u=r);c<a;c++)l=o[c],u=s(u,t[l],l,t);return u};function f8e(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);(o&64512)==56320?t.push(((i&1023)<<10)+(o&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}function rz(e){var t=f8e(e);return t.length===1?t[0].toString(16):null}function d8e(e,t){var n=e.length,r=e.charCodeAt(t),i;return r>=55296&&r<=56319&&n>t+1&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function Mj(e){return Object.keys(e).reduce(function(t,n){var r=e[n],i=!!r.icon;return i?t[r.iconName]=r.icon:t[n]=r,t},{})}function iz(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,o=Mj(t);typeof b2.hooks.addPack=="function"&&!i?b2.hooks.addPack(e,Mj(t)):b2.styles[e]=ve(ve({},b2.styles[e]||{}),o),e==="fas"&&iz("fa",t)}var mg,gg,vg,H6=b2.styles,p8e=b2.shims,h8e=(mg={},cr(mg,cn,Object.values(m5[cn])),cr(mg,Hn,Object.values(m5[Hn])),mg),yz=null,Zj={},Jj={},eq={},tq={},nq={},m8e=(gg={},cr(gg,cn,Object.keys(p5[cn])),cr(gg,Hn,Object.keys(p5[Hn])),gg);function g8e(e){return~Kfe.indexOf(e)}function v8e(e,t){var n=t.split("-"),r=n[0],i=n.slice(1).join("-");return r===e&&i!==""&&!g8e(i)?i:null}var rq=function(){var t=function(o){return KD(H6,function(a,s,c){return a[c]=KD(s,o,{}),a},{})};Zj=t(function(i,o,a){if(o[3]&&(i[o[3]]=a),o[2]){var s=o[2].filter(function(c){return typeof c=="number"});s.forEach(function(c){i[c.toString(16)]=a})}return i}),Jj=t(function(i,o,a){if(i[a]=a,o[2]){var s=o[2].filter(function(c){return typeof c=="string"});s.forEach(function(c){i[c]=a})}return i}),nq=t(function(i,o,a){var s=o[2];return i[a]=a,s.forEach(function(c){i[c]=a}),i});var n="far"in H6||He.autoFetchSvg,r=KD(p8e,function(i,o){var a=o[0],s=o[1],c=o[2];return s==="far"&&!n&&(s="fas"),typeof a=="string"&&(i.names[a]={prefix:s,iconName:c}),typeof a=="number"&&(i.unicodes[a.toString(16)]={prefix:s,iconName:c}),i},{names:{},unicodes:{}});eq=r.names,tq=r.unicodes,yz=Sg(He.styleDefault,{family:He.familyDefault})};e8e(function(e){yz=Sg(e.styleDefault,{family:He.familyDefault})});rq();function xz(e,t){return(Zj[e]||{})[t]}function y8e(e,t){return(Jj[e]||{})[t]}function ol(e,t){return(nq[e]||{})[t]}function iq(e){return eq[e]||{prefix:null,iconName:null}}function x8e(e){var t=tq[e],n=xz("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function h3(){return yz}var Cz=function(){return{prefix:null,iconName:null,rest:[]}};function Sg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.family,r=n===void 0?cn:n,i=p5[r][e],o=h5[r][e]||h5[r][i],a=e in b2.styles?e:null;return o||a||null}var wj=(vg={},cr(vg,cn,Object.keys(m5[cn])),cr(vg,Hn,Object.keys(m5[Hn])),vg);function Eg(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,i=r===void 0?!1:r,o=(t={},cr(t,cn,"".concat(He.cssPrefix,"-").concat(cn)),cr(t,Hn,"".concat(He.cssPrefix,"-").concat(Hn)),t),a=null,s=cn;(e.includes(o[cn])||e.some(function(l){return wj[cn].includes(l)}))&&(s=cn),(e.includes(o[Hn])||e.some(function(l){return wj[Hn].includes(l)}))&&(s=Hn);var c=e.reduce(function(l,u){var f=v8e(He.cssPrefix,u);if(H6[u]?(u=h8e[s].includes(u)?qfe[s][u]:u,a=u,l.prefix=u):m8e[s].indexOf(u)>-1?(a=u,l.prefix=Sg(u,{family:s})):f?l.iconName=f:u!==He.replacementClass&&u!==o[cn]&&u!==o[Hn]&&l.rest.push(u),!i&&l.prefix&&l.iconName){var d=a==="fa"?iq(l.iconName):{},p=ol(l.prefix,l.iconName);d.prefix&&(a=null),l.iconName=d.iconName||p||l.iconName,l.prefix=d.prefix||l.prefix,l.prefix==="far"&&!H6.far&&H6.fas&&!He.autoFetchSvg&&(l.prefix="fas")}return l},Cz());return(e.includes("fa-brands")||e.includes("fab"))&&(c.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(c.prefix="fad"),!c.prefix&&s===Hn&&(H6.fass||He.autoFetchSvg)&&(c.prefix="fass",c.iconName=ol(c.prefix,c.iconName)||c.iconName),(c.prefix==="fa"||a==="fa")&&(c.prefix=h3()||"fas"),c}var C8e=function(){function e(){_fe(this,e),this.definitions={}}return kfe(e,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.reduce(this._pullDefinitions,{});Object.keys(a).forEach(function(s){n.definitions[s]=ve(ve({},n.definitions[s]||{}),a[s]),iz(s,a[s]);var c=m5[cn][s];c&&iz(c,a[s]),rq()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(o){var a=i[o],s=a.prefix,c=a.iconName,l=a.icon,u=l[2];n[s]||(n[s]={}),u.length>0&&u.forEach(function(f){typeof f=="string"&&(n[s][f]=l)}),n[s][c]=l}),n}}]),e}(),Sj=[],L6={},A6={},b8e=Object.keys(A6);function M8e(e,t){var n=t.mixoutsTo;return Sj=e,L6={},Object.keys(A6).forEach(function(r){b8e.indexOf(r)===-1&&delete A6[r]}),Sj.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(a){typeof i[a]=="function"&&(n[a]=i[a]),Cg(i[a])==="object"&&Object.keys(i[a]).forEach(function(s){n[a]||(n[a]={}),n[a][s]=i[a][s]})}),r.hooks){var o=r.hooks();Object.keys(o).forEach(function(a){L6[a]||(L6[a]=[]),L6[a].push(o[a])})}r.provides&&r.provides(A6)}),n}function oz(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=L6[e]||[];return o.forEach(function(a){t=a.apply(null,[t].concat(r))}),t}function sl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=L6[e]||[];i.forEach(function(o){o.apply(null,n)})}function js(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return A6[e]?A6[e].apply(null,t):void 0}function az(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,n=e.prefix||h3();if(t)return t=ol(n,t)||t,bj(oq.definitions,n,t)||bj(b2.styles,n,t)}var oq=new C8e,w8e=function(){He.autoReplaceSvg=!1,He.observeMutations=!1,sl("noAuto")},S8e={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return qs?(sl("beforeI2svg",t),js("pseudoElements2svg",t),js("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot;He.autoReplaceSvg===!1&&(He.autoReplaceSvg=!0),He.observeMutations=!0,l8e(function(){D8e({autoReplaceSvgRoot:n}),sl("watch",t)})}},E8e={icon:function(t){if(t===null)return null;if(Cg(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:ol(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var n=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],r=Sg(t[0]);return{prefix:r,iconName:ol(r,n)||n}}if(typeof t=="string"&&(t.indexOf("".concat(He.cssPrefix,"-"))>-1||t.match(Gfe))){var i=Eg(t.split(" "),{skipLookups:!0});return{prefix:i.prefix||h3(),iconName:ol(i.prefix,i.iconName)||i.iconName}}if(typeof t=="string"){var o=h3();return{prefix:o,iconName:ol(o,t)||t}}}},Z1={noAuto:w8e,config:He,dom:S8e,parse:E8e,library:oq,findIconDefinition:az,toHtml:C5},D8e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot,r=n===void 0?ln:n;(Object.keys(b2.styles).length>0||He.autoFetchSvg)&&qs&&He.autoReplaceSvg&&Z1.dom.i2svg({node:r})};function Dg(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(r){return C5(r)})}}),Object.defineProperty(e,"node",{get:function(){if(qs){var r=ln.createElement("div");return r.innerHTML=e.html,r.children}}}),e}function z8e(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,o=e.styles,a=e.transform;if(vz(a)&&n.found&&!r.found){var s=n.width,c=n.height,l={x:s/c/2,y:.5};i.style=wg(ve(ve({},o),{},{"transform-origin":"".concat(l.x+a.x/16,"em ").concat(l.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}function H8e(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,o=e.symbol,a=o===!0?"".concat(t,"-").concat(He.cssPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ve(ve({},i),{},{id:a}),children:r}]}]}function bz(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,o=e.iconName,a=e.transform,s=e.symbol,c=e.title,l=e.maskId,u=e.titleId,f=e.extra,d=e.watchable,p=d===void 0?!1:d,h=r.found?r:n,m=h.width,g=h.height,v=i==="fak",y=[He.replacementClass,o?"".concat(He.cssPrefix,"-").concat(o):""].filter(function(D){return f.classes.indexOf(D)===-1}).filter(function(D){return D!==""||!!D}).concat(f.classes).join(" "),C={children:[],attributes:ve(ve({},f.attributes),{},{"data-prefix":i,"data-icon":o,class:y,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},b=v&&!~f.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};p&&(C.attributes[al]=""),c&&(C.children.push({tag:"title",attributes:{id:C.attributes["aria-labelledby"]||"title-".concat(u||v5())},children:[c]}),delete C.attributes.title);var M=ve(ve({},C),{},{prefix:i,iconName:o,main:n,mask:r,maskId:l,transform:a,symbol:s,styles:ve(ve({},b),f.styles)}),S=r.found&&n.found?js("generateAbstractMask",M)||{children:[],attributes:{}}:js("generateAbstractIcon",M)||{children:[],attributes:{}},w=S.children,E=S.attributes;return M.children=w,M.attributes=E,s?H8e(M):z8e(M)}function Ej(e){var t=e.content,n=e.width,r=e.height,i=e.transform,o=e.title,a=e.extra,s=e.watchable,c=s===void 0?!1:s,l=ve(ve(ve({},a.attributes),o?{title:o}:{}),{},{class:a.classes.join(" ")});c&&(l[al]="");var u=ve({},a.styles);vz(i)&&(u.transform=o8e({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var f=wg(u);f.length>0&&(l.style=f);var d=[];return d.push({tag:"span",attributes:l,children:[t]}),o&&d.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),d}function L8e(e){var t=e.content,n=e.title,r=e.extra,i=ve(ve(ve({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),o=wg(r.styles);o.length>0&&(i.style=o);var a=[];return a.push({tag:"span",attributes:i,children:[t]}),n&&a.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),a}var ZD=b2.styles;function sz(e){var t=e[0],n=e[1],r=e.slice(4),i=fz(r,1),o=i[0],a=null;return Array.isArray(o)?a={tag:"g",attributes:{class:"".concat(He.cssPrefix,"-").concat(il.GROUP)},children:[{tag:"path",attributes:{class:"".concat(He.cssPrefix,"-").concat(il.SECONDARY),fill:"currentColor",d:o[0]}},{tag:"path",attributes:{class:"".concat(He.cssPrefix,"-").concat(il.PRIMARY),fill:"currentColor",d:o[1]}}]}:a={tag:"path",attributes:{fill:"currentColor",d:o}},{found:!0,width:t,height:n,icon:a}}var A8e={found:!1,width:512,height:512};function V8e(e,t){!qj&&!He.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function cz(e,t){var n=t;return t==="fa"&&He.styleDefault!==null&&(t=h3()),new Promise(function(r,i){var o={found:!1,width:512,height:512,icon:js("missingIconAbstract")||{}};if(n==="fa"){var a=iq(e)||{};e=a.iconName||e,t=a.prefix||t}if(e&&t&&ZD[t]&&ZD[t][e]){var s=ZD[t][e];return r(sz(s))}V8e(e,t),r(ve(ve({},A8e),{},{icon:He.showMissingIcons&&e?js("missingIconAbstract")||{}:{}}))})}var Dj=function(){},lz=He.measurePerformance&&lg&&lg.mark&&lg.measure?lg:{mark:Dj,measure:Dj},u5='FA "6.5.1"',N8e=function(t){return lz.mark("".concat(u5," ").concat(t," begins")),function(){return aq(t)}},aq=function(t){lz.mark("".concat(u5," ").concat(t," ends")),lz.measure("".concat(u5," ").concat(t),"".concat(u5," ").concat(t," begins"),"".concat(u5," ").concat(t," ends"))},Mz={begin:N8e,end:aq},yg=function(){};function zj(e){var t=e.getAttribute?e.getAttribute(al):null;return typeof t=="string"}function _8e(e){var t=e.getAttribute?e.getAttribute(pz):null,n=e.getAttribute?e.getAttribute(hz):null;return t&&n}function k8e(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(He.replacementClass)}function T8e(){if(He.autoReplaceSvg===!0)return xg.replace;var e=xg[He.autoReplaceSvg];return e||xg.replace}function I8e(e){return ln.createElementNS("http://www.w3.org/2000/svg",e)}function F8e(e){return ln.createElement(e)}function sq(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.ceFn,r=n===void 0?e.tag==="svg"?I8e:F8e:n;if(typeof e=="string")return ln.createTextNode(e);var i=r(e.tag);Object.keys(e.attributes||[]).forEach(function(a){i.setAttribute(a,e.attributes[a])});var o=e.children||[];return o.forEach(function(a){i.appendChild(sq(a,{ceFn:r}))}),i}function R8e(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var xg={replace:function(t){var n=t[0];if(n.parentNode)if(t[1].forEach(function(i){n.parentNode.insertBefore(sq(i),n)}),n.getAttribute(al)===null&&He.keepOriginalSource){var r=ln.createComment(R8e(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(t){var n=t[0],r=t[1];if(~gz(n).indexOf(He.replacementClass))return xg.replace(t);var i=new RegExp("".concat(He.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var o=r[0].attributes.class.split(" ").reduce(function(s,c){return c===He.replacementClass||c.match(i)?s.toSvg.push(c):s.toNode.push(c),s},{toNode:[],toSvg:[]});r[0].attributes.class=o.toSvg.join(" "),o.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",o.toNode.join(" "))}var a=r.map(function(s){return C5(s)}).join(`
`);n.setAttribute(al,""),n.innerHTML=a}};function Hj(e){e()}function cq(e,t){var n=typeof t=="function"?t:yg;if(e.length===0)n();else{var r=Hj;He.mutateApproach===Ufe&&(r=p3.requestAnimationFrame||Hj),r(function(){var i=T8e(),o=Mz.begin("mutate");e.map(i),o(),n()})}}var wz=!1;function lq(){wz=!0}function uz(){wz=!1}var Mg=null;function Lj(e){if(vj&&He.observeMutations){var t=e.treeCallback,n=t===void 0?yg:t,r=e.nodeCallback,i=r===void 0?yg:r,o=e.pseudoElementsCallback,a=o===void 0?yg:o,s=e.observeMutationsRoot,c=s===void 0?ln:s;Mg=new vj(function(l){if(!wz){var u=h3();N6(l).forEach(function(f){if(f.type==="childList"&&f.addedNodes.length>0&&!zj(f.addedNodes[0])&&(He.searchPseudoElements&&a(f.target),n(f.target)),f.type==="attributes"&&f.target.parentNode&&He.searchPseudoElements&&a(f.target.parentNode),f.type==="attributes"&&zj(f.target)&&~Qfe.indexOf(f.attributeName))if(f.attributeName==="class"&&_8e(f.target)){var d=Eg(gz(f.target)),p=d.prefix,h=d.iconName;f.target.setAttribute(pz,p||u),h&&f.target.setAttribute(hz,h)}else k8e(f.target)&&i(f.target)})}}),qs&&Mg.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function O8e(){Mg&&Mg.disconnect()}function P8e(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce(function(r,i){var o=i.split(":"),a=o[0],s=o.slice(1);return a&&s.length>0&&(r[a]=s.join(":").trim()),r},{})),n}function $8e(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=e.innerText!==void 0?e.innerText.trim():"",i=Eg(gz(e));return i.prefix||(i.prefix=h3()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=y8e(i.prefix,e.innerText)||xz(i.prefix,rz(e.innerText))),!i.iconName&&He.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function B8e(e){var t=N6(e.attributes).reduce(function(i,o){return i.name!=="class"&&i.name!=="style"&&(i[o.name]=o.value),i},{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return He.autoA11y&&(n?t["aria-labelledby"]="".concat(He.replacementClass,"-title-").concat(r||v5()):(t["aria-hidden"]="true",t.focusable="false")),t}function U8e(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Aa,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Aj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=$8e(e),r=n.iconName,i=n.prefix,o=n.rest,a=B8e(e),s=oz("parseNodeAttributes",{},e),c=t.styleParser?P8e(e):[];return ve({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:Aa,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:o,styles:c,attributes:a}},s)}var j8e=b2.styles;function uq(e){var t=He.autoReplaceSvg==="nest"?Aj(e,{styleParser:!1}):Aj(e);return~t.extra.classes.indexOf(Gj)?js("generateLayersText",e,t):js("generateSvgReplacementMutation",e,t)}var m3=new Set;mz.map(function(e){m3.add("fa-".concat(e))});Object.keys(p5[cn]).map(m3.add.bind(m3));Object.keys(p5[Hn]).map(m3.add.bind(m3));m3=y5(m3);function Vj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!qs)return Promise.resolve();var n=ln.documentElement.classList,r=function(f){return n.add("".concat(yj,"-").concat(f))},i=function(f){return n.remove("".concat(yj,"-").concat(f))},o=He.autoFetchSvg?m3:mz.map(function(u){return"fa-".concat(u)}).concat(Object.keys(j8e));o.includes("fa")||o.push("fa");var a=[".".concat(Gj,":not([").concat(al,"])")].concat(o.map(function(u){return".".concat(u,":not([").concat(al,"])")})).join(", ");if(a.length===0)return Promise.resolve();var s=[];try{s=N6(e.querySelectorAll(a))}catch{}if(s.length>0)r("pending"),i("complete");else return Promise.resolve();var c=Mz.begin("onTree"),l=s.reduce(function(u,f){try{var d=uq(f);d&&u.push(d)}catch(p){qj||p.name==="MissingIcon"&&console.error(p)}return u},[]);return new Promise(function(u,f){Promise.all(l).then(function(d){cq(d,function(){r("active"),r("complete"),i("pending"),typeof t=="function"&&t(),c(),u()})}).catch(function(d){c(),f(d)})})}function q8e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;uq(e).then(function(n){n&&cq([n],t)})}function G8e(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(t||{}).icon?t:az(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:az(i||{})),e(r,ve(ve({},n),{},{mask:i}))}}var W8e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?Aa:r,o=n.symbol,a=o===void 0?!1:o,s=n.mask,c=s===void 0?null:s,l=n.maskId,u=l===void 0?null:l,f=n.title,d=f===void 0?null:f,p=n.titleId,h=p===void 0?null:p,m=n.classes,g=m===void 0?[]:m,v=n.attributes,y=v===void 0?{}:v,C=n.styles,b=C===void 0?{}:C;if(t){var M=t.prefix,S=t.iconName,w=t.icon;return Dg(ve({type:"icon"},t),function(){return sl("beforeDOMElementCreation",{iconDefinition:t,params:n}),He.autoA11y&&(d?y["aria-labelledby"]="".concat(He.replacementClass,"-title-").concat(h||v5()):(y["aria-hidden"]="true",y.focusable="false")),bz({icons:{main:sz(w),mask:c?sz(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:M,iconName:S,transform:ve(ve({},Aa),i),symbol:a,title:d,maskId:u,titleId:h,extra:{attributes:y,styles:b,classes:g}})})}},Y8e={mixout:function(){return{icon:G8e(W8e)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=Vj,n.nodeCallback=q8e,n}}},provides:function(t){t.i2svg=function(n){var r=n.node,i=r===void 0?ln:r,o=n.callback,a=o===void 0?function(){}:o;return Vj(i,a)},t.generateSvgReplacementMutation=function(n,r){var i=r.iconName,o=r.title,a=r.titleId,s=r.prefix,c=r.transform,l=r.symbol,u=r.mask,f=r.maskId,d=r.extra;return new Promise(function(p,h){Promise.all([cz(i,s),u.iconName?cz(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=fz(m,2),v=g[0],y=g[1];p([n,bz({icons:{main:v,mask:y},prefix:s,iconName:i,transform:c,symbol:l,maskId:f,title:o,titleId:a,extra:d,watchable:!0})])}).catch(h)})},t.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,o=n.main,a=n.transform,s=n.styles,c=wg(s);c.length>0&&(i.style=c);var l;return vz(a)&&(l=js("generateAbstractTransformGrouping",{main:o,transform:a,containerWidth:o.width,iconWidth:o.width})),r.push(l||o.icon),{children:r,attributes:i}}}},X8e={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,o=i===void 0?[]:i;return Dg({type:"layer"},function(){sl("beforeDOMElementCreation",{assembler:n,params:r});var a=[];return n(function(s){Array.isArray(s)?s.map(function(c){a=a.concat(c.abstract)}):a=a.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(He.cssPrefix,"-layers")].concat(y5(o)).join(" ")},children:a}]})}}}},Q8e={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,o=i===void 0?null:i,a=r.classes,s=a===void 0?[]:a,c=r.attributes,l=c===void 0?{}:c,u=r.styles,f=u===void 0?{}:u;return Dg({type:"counter",content:n},function(){return sl("beforeDOMElementCreation",{content:n,params:r}),L8e({content:n.toString(),title:o,extra:{attributes:l,styles:f,classes:["".concat(He.cssPrefix,"-layers-counter")].concat(y5(s))}})})}}}},K8e={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,o=i===void 0?Aa:i,a=r.title,s=a===void 0?null:a,c=r.classes,l=c===void 0?[]:c,u=r.attributes,f=u===void 0?{}:u,d=r.styles,p=d===void 0?{}:d;return Dg({type:"text",content:n},function(){return sl("beforeDOMElementCreation",{content:n,params:r}),Ej({content:n,transform:ve(ve({},Aa),o),title:s,extra:{attributes:f,styles:p,classes:["".concat(He.cssPrefix,"-layers-text")].concat(y5(l))}})})}}},provides:function(t){t.generateLayersText=function(n,r){var i=r.title,o=r.transform,a=r.extra,s=null,c=null;if(Bj){var l=parseInt(getComputedStyle(n).fontSize,10),u=n.getBoundingClientRect();s=u.width/l,c=u.height/l}return He.autoA11y&&!i&&(a.attributes["aria-hidden"]="true"),Promise.resolve([n,Ej({content:n.innerHTML,width:s,height:c,transform:o,title:i,extra:a,watchable:!0})])}}},Z8e=new RegExp('"',"ug"),Nj=[1105920,1112319];function J8e(e){var t=e.replace(Z8e,""),n=d8e(t,0),r=n>=Nj[0]&&n<=Nj[1],i=t.length===2?t[0]===t[1]:!1;return{value:rz(i?t[0]:t),isSecondary:r||i}}function _j(e,t){var n="".concat(Bfe).concat(t.replace(":","-"));return new Promise(function(r,i){if(e.getAttribute(n)!==null)return r();var o=N6(e.children),a=o.filter(function(w){return w.getAttribute(nz)===t})[0],s=p3.getComputedStyle(e,t),c=s.getPropertyValue("font-family").match(Wfe),l=s.getPropertyValue("font-weight"),u=s.getPropertyValue("content");if(a&&!c)return e.removeChild(a),r();if(c&&u!=="none"&&u!==""){var f=s.getPropertyValue("content"),d=~["Sharp"].indexOf(c[2])?Hn:cn,p=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?h5[d][c[2].toLowerCase()]:Yfe[d][l],h=J8e(f),m=h.value,g=h.isSecondary,v=c[0].startsWith("FontAwesome"),y=xz(p,m),C=y;if(v){var b=x8e(m);b.iconName&&b.prefix&&(y=b.iconName,p=b.prefix)}if(y&&!g&&(!a||a.getAttribute(pz)!==p||a.getAttribute(hz)!==C)){e.setAttribute(n,C),a&&e.removeChild(a);var M=U8e(),S=M.extra;S.attributes[nz]=t,cz(y,p).then(function(w){var E=bz(ve(ve({},M),{},{icons:{main:w,mask:Cz()},prefix:p,iconName:C,extra:S,watchable:!0})),D=ln.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(D,e.firstChild):e.appendChild(D),D.outerHTML=E.map(function(z){return C5(z)}).join(`
`),e.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function e5e(e){return Promise.all([_j(e,"::before"),_j(e,"::after")])}function t5e(e){return e.parentNode!==document.head&&!~jfe.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(nz)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function kj(e){if(qs)return new Promise(function(t,n){var r=N6(e.querySelectorAll("*")).filter(t5e).map(e5e),i=Mz.begin("searchPseudoElements");lq(),Promise.all(r).then(function(){i(),uz(),t()}).catch(function(){i(),uz(),n()})})}var n5e={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=kj,n}}},provides:function(t){t.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?ln:r;He.searchPseudoElements&&kj(i)}}},Tj=!1,r5e={mixout:function(){return{dom:{unwatch:function(){lq(),Tj=!0}}}},hooks:function(){return{bootstrap:function(){Lj(oz("mutationObserverCallbacks",{}))},noAuto:function(){O8e()},watch:function(n){var r=n.observeMutationsRoot;Tj?uz():Lj(oz("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},Ij=function(t){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(r,i){var o=i.toLowerCase().split("-"),a=o[0],s=o.slice(1).join("-");if(a&&s==="h")return r.flipX=!0,r;if(a&&s==="v")return r.flipY=!0,r;if(s=parseFloat(s),isNaN(s))return r;switch(a){case"grow":r.size=r.size+s;break;case"shrink":r.size=r.size-s;break;case"left":r.x=r.x-s;break;case"right":r.x=r.x+s;break;case"up":r.y=r.y-s;break;case"down":r.y=r.y+s;break;case"rotate":r.rotate=r.rotate+s;break}return r},n)},i5e={mixout:function(){return{parse:{transform:function(n){return Ij(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=Ij(i)),n}}},provides:function(t){t.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,o=n.containerWidth,a=n.iconWidth,s={transform:"translate(".concat(o/2," 256)")},c="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),f={transform:"".concat(c," ").concat(l," ").concat(u)},d={transform:"translate(".concat(a/2*-1," -256)")},p={outer:s,inner:f,path:d};return{tag:"g",attributes:ve({},p.outer),children:[{tag:"g",attributes:ve({},p.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:ve(ve({},r.icon.attributes),p.path)}]}]}}}},JD={x:0,y:0,width:"100%",height:"100%"};function Fj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function o5e(e){return e.tag==="g"?e.children:[e]}var a5e={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),o=i?Eg(i.split(" ").map(function(a){return a.trim()})):Cz();return o.prefix||(o.prefix=h3()),n.mask=o,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(t){t.generateAbstractMask=function(n){var r=n.children,i=n.attributes,o=n.main,a=n.mask,s=n.maskId,c=n.transform,l=o.width,u=o.icon,f=a.width,d=a.icon,p=i8e({transform:c,containerWidth:f,iconWidth:l}),h={tag:"rect",attributes:ve(ve({},JD),{},{fill:"white"})},m=u.children?{children:u.children.map(Fj)}:{},g={tag:"g",attributes:ve({},p.inner),children:[Fj(ve({tag:u.tag,attributes:ve(ve({},u.attributes),p.path)},m))]},v={tag:"g",attributes:ve({},p.outer),children:[g]},y="mask-".concat(s||v5()),C="clip-".concat(s||v5()),b={tag:"mask",attributes:ve(ve({},JD),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,v]},M={tag:"defs",children:[{tag:"clipPath",attributes:{id:C},children:o5e(d)},b]};return r.push(M,{tag:"rect",attributes:ve({fill:"currentColor","clip-path":"url(#".concat(C,")"),mask:"url(#".concat(y,")")},JD)}),{children:r,attributes:i}}}},s5e={provides:function(t){var n=!1;p3.matchMedia&&(n=p3.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},o={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:ve(ve({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var a=ve(ve({},o),{},{attributeName:"opacity"}),s={tag:"circle",attributes:ve(ve({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||s.children.push({tag:"animate",attributes:ve(ve({},o),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:ve(ve({},a),{},{values:"1;0;1;1;0;1;"})}),r.push(s),r.push({tag:"path",attributes:ve(ve({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:ve(ve({},a),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:ve(ve({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:ve(ve({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},c5e={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),o=i===null?!1:i===""?!0:i;return n.symbol=o,n}}}},l5e=[s8e,Y8e,X8e,Q8e,K8e,n5e,r5e,i5e,a5e,s5e,c5e];M8e(l5e,{mixoutsTo:Z1});var qWe=Z1.noAuto,GWe=Z1.config,WWe=Z1.library,YWe=Z1.dom,fq=Z1.parse,XWe=Z1.findIconDefinition,QWe=Z1.toHtml,dq=Z1.icon,KWe=Z1.layer,u5e=Z1.text,f5e=Z1.counter;var d5e=["*"],p5e=e=>{throw new Error(`Could not find icon with iconName=${e.iconName} and prefix=${e.prefix} in the icon library.`)},h5e=()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")},m5e=e=>{let t={[`fa-${e.animation}`]:e.animation!=null&&!e.animation.startsWith("spin"),"fa-spin":e.animation==="spin"||e.animation==="spin-reverse","fa-spin-pulse":e.animation==="spin-pulse"||e.animation==="spin-pulse-reverse","fa-spin-reverse":e.animation==="spin-reverse"||e.animation==="spin-pulse-reverse","fa-pulse":e.animation==="spin-pulse"||e.animation==="spin-pulse-reverse","fa-fw":e.fixedWidth,"fa-border":e.border,"fa-inverse":e.inverse,"fa-layers-counter":e.counter,"fa-flip-horizontal":e.flip==="horizontal"||e.flip==="both","fa-flip-vertical":e.flip==="vertical"||e.flip==="both",[`fa-${e.size}`]:e.size!==null,[`fa-rotate-${e.rotate}`]:e.rotate!==null,[`fa-pull-${e.pull}`]:e.pull!==null,[`fa-stack-${e.stackItemSize}`]:e.stackItemSize!=null};return Object.keys(t).map(n=>t[n]?n:null).filter(n=>n)},g5e=e=>e.prefix!==void 0&&e.iconName!==void 0,v5e=(e,t)=>g5e(e)?e:typeof e=="string"?{prefix:t,iconName:e}:{prefix:e[0],iconName:e[1]},y5e=(()=>{let t=class t{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),x5e=(()=>{let t=class t{constructor(){this.definitions={}}addIcons(...r){for(let i of r){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(let o of i.icon[2])typeof o=="string"&&(this.definitions[i.prefix][o]=i)}}addIconPacks(...r){for(let i of r){let o=Object.keys(i).map(a=>i[a]);this.addIcons(...o)}}getIconDefinition(r,i){return r in this.definitions&&i in this.definitions[r]?this.definitions[r][i]:null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),C5e=(()=>{let t=class t{constructor(){this.stackItemSize="1x"}ngOnChanges(r){if("size"in r)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=kt({type:t,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},standalone:!0,features:[Do]});let e=t;return e})(),b5e=(()=>{let t=class t{constructor(r,i){this.renderer=r,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(r){"size"in r&&(r.size.currentValue!=null&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${r.size.currentValue}`),r.size.previousValue!=null&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${r.size.previousValue}`))}};t.\u0275fac=function(i){return new(i||t)(W(Y1),W(qr))},t.\u0275cmp=Ce({type:t,selectors:[["fa-stack"]],inputs:{size:"size"},standalone:!0,features:[Do,K8],ngContentSelectors:d5e,decls:1,vars:0,template:function(i,o){i&1&&($B(),BB(0))},encapsulation:2});let e=t;return e})(),zg=(()=>{let t=class t{set spin(r){this.animation=r?"spin":void 0}set pulse(r){this.animation=r?"spin-pulse":void 0}constructor(r,i,o,a,s){this.sanitizer=r,this.config=i,this.iconLibrary=o,this.stackItem=a,this.classes=[],s!=null&&a==null&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(r){if(this.icon==null&&this.config.fallbackIcon==null){h5e();return}if(r){let i=this.icon!=null?this.icon:this.config.fallbackIcon,o=this.findIconDefinition(i);if(o!=null){let a=this.buildParams();this.renderIcon(o,a)}}}render(){this.ngOnChanges({})}findIconDefinition(r){let i=v5e(r,this.config.defaultPrefix);if("icon"in i)return i;let o=this.iconLibrary.getIconDefinition(i.prefix,i.iconName);return o??(p5e(i),null)}buildParams(){let r={flip:this.flip,animation:this.animation,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:typeof this.fixedWidth=="boolean"?this.fixedWidth:this.config.fixedWidth,stackItemSize:this.stackItem!=null?this.stackItem.stackItemSize:null},i=typeof this.transform=="string"?fq.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...m5e(r),...this.classes],mask:this.mask!=null?this.findIconDefinition(this.mask):null,styles:this.styles!=null?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(r,i){let o=dq(r,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(o.html.join(`
`))}};t.\u0275fac=function(i){return new(i||t)(W(BD),W(y5e),W(x5e),W(C5e,8),W(b5e,8))},t.\u0275cmp=Ce({type:t,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(i,o){i&2&&(sD("innerHTML",o.renderedIconHTML,Y$),x6("title",o.title))},inputs:{icon:"icon",title:"title",animation:"animation",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},standalone:!0,features:[Do,K8],decls:0,vars:0,template:function(i,o){},encapsulation:2});let e=t;return e})();var pq=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Cr({type:t}),t.\u0275inj=br({});let e=t;return e})();var Ze="primary",T5=Symbol("RouteTitle"),Hz=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function F6(e){return new Hz(e)}function M5e(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],s=e[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function w5e(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Va(e[n],t[n]))return!1;return!0}function Va(e,t){let n=e?Lz(e):void 0,r=t?Lz(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!wq(e[i],t[i]))return!1;return!0}function Lz(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function wq(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function Sq(e){return e.length>0?e[e.length-1]:null}function x3(e){return Gw(e)?e:l3(e)?en(Promise.resolve(e)):ke(e)}var S5e={exact:Dq,subset:zq},Eq={exact:E5e,subset:D5e,ignored:()=>!0};function mq(e,t,n){return S5e[n.paths](e.root,t.root,n.matrixParams)&&Eq[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function E5e(e,t){return Va(e,t)}function Dq(e,t,n){if(!ll(e.segments,t.segments)||!Ag(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!Dq(e.children[r],t.children[r],n))return!1;return!0}function D5e(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>wq(e[n],t[n]))}function zq(e,t,n){return Hq(e,t,t.segments,n)}function Hq(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!ll(i,n)||t.hasChildren()||!Ag(i,n,r))}else if(e.segments.length===n.length){if(!ll(e.segments,n)||!Ag(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!zq(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!ll(e.segments,i)||!Ag(e.segments,i,r)||!e.children[Ze]?!1:Hq(e.children[Ze],t,o,r)}}function Ag(e,t,n){return t.every((r,i)=>Eq[n](e[i].parameters,r.parameters))}var g3=class{constructor(t=new Nt([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=F6(this.queryParams),this._queryParamMap}toString(){return L5e.serialize(this)}},Nt=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vg(this)}},cl=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=F6(this.parameters),this._parameterMap}toString(){return Aq(this)}};function z5e(e,t){return ll(e,t)&&e.every((n,r)=>Va(n.parameters,t[r].parameters))}function ll(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function H5e(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===Ze&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==Ze&&(n=n.concat(t(i,r)))}),n}var I5=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>new z5,providedIn:"root"});let e=t;return e})(),z5=class{parse(t){let n=new Vz(t);return new g3(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${b5(t.root,!0)}`,r=N5e(t.queryParams),i=typeof t.fragment=="string"?`#${A5e(t.fragment)}`:"";return`${n}${r}${i}`}},L5e=new z5;function Vg(e){return e.segments.map(t=>Aq(t)).join("/")}function b5(e,t){if(!e.hasChildren())return Vg(e);if(t){let n=e.children[Ze]?b5(e.children[Ze],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==Ze&&r.push(`${i}:${b5(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=H5e(e,(r,i)=>i===Ze?[b5(e.children[Ze],!1)]:[`${i}:${b5(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[Ze]!=null?`${Vg(e)}/${n[0]}`:`${Vg(e)}/(${n.join("//")})`}}function Lq(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hg(e){return Lq(e).replace(/%3B/gi,";")}function A5e(e){return encodeURI(e)}function Az(e){return Lq(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ng(e){return decodeURIComponent(e)}function gq(e){return Ng(e.replace(/\+/g,"%20"))}function Aq(e){return`${Az(e.path)}${V5e(e.parameters)}`}function V5e(e){return Object.entries(e).map(([t,n])=>`;${Az(t)}=${Az(n)}`).join("")}function N5e(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Hg(n)}=${Hg(i)}`).join("&"):`${Hg(n)}=${Hg(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var _5e=/^[^\/()?;#]+/;function Sz(e){let t=e.match(_5e);return t?t[0]:""}var k5e=/^[^\/()?;=#]+/;function T5e(e){let t=e.match(k5e);return t?t[0]:""}var I5e=/^[^=?&#]+/;function F5e(e){let t=e.match(I5e);return t?t[0]:""}var R5e=/^[^&#]+/;function O5e(e){let t=e.match(R5e);return t?t[0]:""}var Vz=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nt([],{}):new Nt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Ze]=new Nt(t,n)),r}parseSegment(){let t=Sz(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new xe(4009,!1);return this.capture(t),new cl(Ng(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=T5e(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Sz(this.remaining);i&&(r=i,this.capture(r))}t[Ng(n)]=Ng(r)}parseQueryParam(t){let n=F5e(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let a=O5e(this.remaining);a&&(r=a,this.capture(r))}let i=gq(n),o=gq(r);if(t.hasOwnProperty(i)){let a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Sz(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new xe(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Ze);let a=this.parseChildren();n[o]=Object.keys(a).length===1?a[Ze]:new Nt([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new xe(4011,!1)}};function Vq(e){return e.segments.length>0?new Nt([],{[Ze]:e}):e}function Nq(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=Nq(i);if(r===Ze&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))t[a]=s;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new Nt(e.segments,t);return P5e(n)}function P5e(e){if(e.numberOfChildren===1&&e.children[Ze]){let t=e.children[Ze];return new Nt(e.segments.concat(t.segments),t.children)}return e}function R6(e){return e instanceof g3}function $5e(e,t,n=null,r=null){let i=_q(e);return kq(i,t,n,r)}function _q(e){let t;function n(o){let a={};for(let c of o.children){let l=n(c);a[c.outlet]=l}let s=new Nt(o.url,a);return o===e&&(t=s),s}let r=n(e.root),i=Vq(r);return t??i}function kq(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return Ez(i,i,i,n,r);let o=B5e(t);if(o.toRoot())return Ez(i,i,new Nt([],{}),n,r);let a=U5e(o,i,e),s=a.processChildren?S5(a.segmentGroup,a.index,o.commands):Iq(a.segmentGroup,a.index,o.commands);return Ez(i,a.segmentGroup,s,n,r)}function _g(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function H5(e){return typeof e=="object"&&e!=null&&e.outlets}function Ez(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let a;e===t?a=n:a=Tq(e,t,n);let s=Vq(Nq(a));return new g3(s,o,i)}function Tq(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=Tq(o,t,n)}),new Nt(e.segments,r)}var kg=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&_g(r[0]))throw new xe(4003,!1);let i=r.find(H5);if(i&&i!==Sq(r))throw new xe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function B5e(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new kg(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([c,l])=>{s[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:s}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((s,c)=>{c==0&&s==="."||(c==0&&s===""?n=!0:s===".."?t++:s!=""&&i.push(s))}),i):[...i,o]},[]);return new kg(n,t,r)}var T6=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function U5e(e,t,n){if(e.isAbsolute)return new T6(t,!0,0);if(!n)return new T6(t,!1,NaN);if(n.parent===null)return new T6(n,!0,0);let r=_g(e.commands[0])?0:1,i=n.segments.length-1+r;return j5e(n,i,e.numberOfDoubleDots)}function j5e(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new xe(4005,!1);i=r.segments.length}return new T6(r,!1,i-o)}function q5e(e){return H5(e[0])?e[0].outlets:{[Ze]:e}}function Iq(e,t,n){if(e??=new Nt([],{}),e.segments.length===0&&e.hasChildren())return S5(e,t,n);let r=G5e(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new Nt(e.segments.slice(0,r.pathIndex),{});return o.children[Ze]=new Nt(e.segments.slice(r.pathIndex),e.children),S5(o,0,i)}else return r.match&&i.length===0?new Nt(e.segments,{}):r.match&&!e.hasChildren()?Nz(e,t,n):r.match?S5(e,0,i):Nz(e,t,n)}function S5(e,t,n){if(n.length===0)return new Nt(e.segments,{});{let r=q5e(n),i={};if(Object.keys(r).some(o=>o!==Ze)&&e.children[Ze]&&e.numberOfChildren===1&&e.children[Ze].segments.length===0){let o=S5(e.children[Ze],t,n);return new Nt(e.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=Iq(e.children[o],t,a))}),Object.entries(e.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new Nt(e.segments,i)}}function G5e(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let a=e.segments[i],s=n[r];if(H5(s))break;let c=`${s}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!yq(c,l,a))return o;r+=2}else{if(!yq(c,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Nz(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(H5(o)){let c=W5e(o.outlets);return new Nt(r,c)}if(i===0&&_g(n[0])){let c=e.segments[t];r.push(new cl(c.path,vq(n[0]))),i++;continue}let a=H5(o)?o.outlets[Ze]:`${o}`,s=i<n.length-1?n[i+1]:null;a&&s&&_g(s)?(r.push(new cl(a,vq(s))),i+=2):(r.push(new cl(a,{})),i++)}return new Nt(r,{})}function W5e(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Nz(new Nt([],{}),0,r))}),t}function vq(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function yq(e,t,n){return e==n.path&&Va(t,n.parameters)}var E5="imperative",Mr=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Mr||{}),Vo=class{constructor(t,n){this.id=t,this.url=n}},O6=class extends Vo{constructor(t,n,r="imperative",i=null){super(t,n),this.type=Mr.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},M2=class extends Vo{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=Mr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ao=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Ao||{}),Tg=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Tg||{}),v3=class extends Vo{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Mr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},y3=class extends Vo{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Mr.NavigationSkipped}},L5=class extends Vo{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=Mr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ig=class extends Vo{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Mr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_z=class extends Vo{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Mr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kz=class extends Vo{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Mr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Tz=class extends Vo{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Mr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Iz=class extends Vo{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Mr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fz=class{constructor(t){this.route=t,this.type=Mr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Rz=class{constructor(t){this.route=t,this.type=Mr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Oz=class{constructor(t){this.snapshot=t,this.type=Mr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pz=class{constructor(t){this.snapshot=t,this.type=Mr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$z=class{constructor(t){this.snapshot=t,this.type=Mr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bz=class{constructor(t){this.snapshot=t,this.type=Mr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fg=class{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=Mr.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},A5=class{},V5=class{constructor(t){this.url=t}};var Uz=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new F5,this.attachRef=null}},F5=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Uz,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Rg=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=jz(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=jz(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=qz(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return qz(t,this._root).map(n=>n.value)}};function jz(e,t){if(e===t.value)return t;for(let n of t.children){let r=jz(e,n);if(r)return r}return null}function qz(e,t){if(e===t.value)return[t];for(let n of t.children){let r=qz(e,n);if(r.length)return r.unshift(t),r}return[]}var J1=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function k6(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Og=class extends Rg{constructor(t,n){super(t),this.snapshot=n,tH(this,t)}toString(){return this.snapshot.toString()}};function Fq(e){let t=Y5e(e),n=new On([new cl("",{})]),r=new On({}),i=new On({}),o=new On({}),a=new On(""),s=new Vt(n,r,o,a,i,Ze,e,t.root);return s.snapshot=t.root,new Og(new J1(s,[]),t)}function Y5e(e){let t={},n={},r={},i="",o=new N5([],t,r,i,n,Ze,e,null,{});return new Pg("",new J1(o,[]))}var Vt=class{constructor(t,n,r,i,o,a,s,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ke(l=>l[T5]))??ke(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ke(t=>F6(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ke(t=>F6(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function eH(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:x(x({},t.params),e.params),data:x(x({},t.data),e.data),resolve:x(x(x(x({},e.data),t.data),i?.data),e._resolvedData)}:r={params:x({},e.params),data:x({},e.data),resolve:x(x({},e.data),e._resolvedData??{})},i&&Oq(i)&&(r.resolve[T5]=i.title),r}var N5=class{get title(){return this.data?.[T5]}constructor(t,n,r,i,o,a,s,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=F6(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=F6(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Pg=class extends Rg{constructor(t,n){super(n),this.url=t,tH(this,n)}toString(){return Rq(this._root)}};function tH(e,t){t.value._routerState=e,t.children.forEach(n=>tH(e,n))}function Rq(e){let t=e.children.length>0?` { ${e.children.map(Rq).join(", ")} } `:"";return`${e.value}${t}`}function Dz(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Va(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Va(t.params,n.params)||e.paramsSubject.next(n.params),w5e(t.url,n.url)||e.urlSubject.next(n.url),Va(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Gz(e,t){let n=Va(e.params,t.params)&&z5e(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Gz(e.parent,t.parent))}function Oq(e){return typeof e.title=="string"||e.title===null}var nH=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ze,this.activateEvents=new jt,this.deactivateEvents=new jt,this.attachEvents=new jt,this.detachEvents=new jt,this.parentContexts=ce(F5),this.location=ce(o3),this.changeDetector=ce(ks),this.environmentInjector=ce(Bi),this.inputBinder=ce(qg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new xe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new xe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new xe(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new xe(4013,!1);this._activatedRoute=r;let o=this.location,s=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Wz(r,c,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=kt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Do]});let e=t;return e})(),Wz=class{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Vt?this.route:t===F5?this.childContexts:this.parent.get(t,n)}},qg=new ze(""),xq=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=A8([i.queryParams,i.params,i.data]).pipe(h1(([a,s,c],l)=>(c=x(x(x({},a),s),c),l===0?ke(c):Promise.resolve(c)))).subscribe(a=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let s=rU(i.component);if(!s){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of s.inputs)r.activatedComponentRef.setInput(c,a[c])});this.outletDataSubscriptions.set(r,o)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function X5e(e,t,n){let r=_5(e,t._root,n?n._root:void 0);return new Og(r,t)}function _5(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=Q5e(e,t,n);return new J1(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(s=>_5(e,s)),a}}let r=K5e(t.value),i=t.children.map(o=>_5(e,o));return new J1(r,i)}}function Q5e(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return _5(e,r,i);return _5(e,r)})}function K5e(e){return new Vt(new On(e.url),new On(e.params),new On(e.queryParams),new On(e.fragment),new On(e.data),e.outlet,e.component,e)}var Pq="ngNavigationCancelingError";function $q(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=R6(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=Bq(!1,Ao.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Bq(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Pq]=!0,n.cancellationCode=t,n}function Z5e(e){return Uq(e)&&R6(e.url)}function Uq(e){return!!e&&e[Pq]}var J5e=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Ce({type:t,selectors:[["ng-component"]],standalone:!0,features:[K8],decls:1,vars:0,template:function(i,o){i&1&&ht(0,"router-outlet")},dependencies:[nH],encapsulation:2});let e=t;return e})();function ede(e,t){return e.providers&&!e._injector&&(e._injector=S9(e.providers,t,`Route: ${e.path}`)),e._injector??t}function rH(e){let t=e.children&&e.children.map(rH),n=t?k(x({},e),{children:t}):x({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ze&&(n.component=J5e),n}function Na(e){return e.outlet||Ze}function tde(e,t){let n=e.filter(r=>Na(r)===t);return n.push(...e.filter(r=>Na(r)!==t)),n}function R5(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var nde=(e,t,n,r)=>Ke(i=>(new Yz(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),Yz=class{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Dz(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=k6(n);t.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=k6(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),s=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:s})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=k6(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=k6(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Bz(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Pz(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(Dz(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Dz(s.route.value),this.activateChildRoutes(t,null,a.children)}else{let s=R5(i.snapshot);a.attachRef=null,a.route=i,a.injector=s,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,r)}},$g=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},I6=class{constructor(t,n){this.component=t,this.route=n}};function rde(e,t,n){let r=e._root,i=t?t._root:null;return M5(r,i,n,[r.value])}function ide(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function $6(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!a$(e)?e:t.get(e):r}function M5(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=k6(t);return e.children.forEach(a=>{ode(a,o[a.value.outlet],n,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>D5(s,n.getContext(a),i)),i}function ode(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,a=t?t.value:null,s=n?n.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let c=ade(a,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new $g(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?M5(e,t,s?s.children:null,r,i):M5(e,t,n,r,i),c&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new I6(s.outlet.component,a))}else a&&D5(t,s,i),i.canActivateChecks.push(new $g(r)),o.component?M5(e,null,s?s.children:null,r,i):M5(e,null,n,r,i);return i}function ade(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!ll(e.url,t.url);case"pathParamsOrQueryParamsChange":return!ll(e.url,t.url)||!Va(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gz(e,t)||!Va(e.queryParams,t.queryParams);case"paramsChange":default:return!Gz(e,t)}}function D5(e,t,n){let r=k6(e),i=e.value;Object.entries(r).forEach(([o,a])=>{i.component?t?D5(a,t.children.getContext(o),n):D5(a,null,n):D5(a,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new I6(t.outlet.component,i)):n.canDeactivateChecks.push(new I6(null,i)):n.canDeactivateChecks.push(new I6(null,i))}function O5(e){return typeof e=="function"}function sde(e){return typeof e=="boolean"}function cde(e){return e&&O5(e.canLoad)}function lde(e){return e&&O5(e.canActivate)}function ude(e){return e&&O5(e.canActivateChild)}function fde(e){return e&&O5(e.canDeactivate)}function dde(e){return e&&O5(e.canMatch)}function jq(e){return e instanceof Ss||e?.name==="EmptyError"}var Lg=Symbol("INITIAL_VALUE");function P6(){return h1(e=>A8(e.map(t=>t.pipe(ye(1),Kw(Lg)))).pipe(Ke(t=>{for(let n of t)if(n!==!0){if(n===Lg)return Lg;if(n===!1||n instanceof g3)return n}return!0}),p1(t=>t!==Lg),ye(1)))}function pde(e,t){return Wn(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return a.length===0&&o.length===0?ke(k(x({},n),{guardsResult:!0})):hde(a,r,i,e).pipe(Wn(s=>s&&sde(s)?mde(r,o,e,t):ke(s)),Ke(s=>k(x({},n),{guardsResult:s})))})}function hde(e,t,n,r){return en(e).pipe(Wn(i=>Cde(i.component,i.route,n,t,r)),ma(i=>i!==!0,!0))}function mde(e,t,n,r){return en(t).pipe(Es(i=>J0(vde(i.route.parent,r),gde(i.route,r),xde(e,i.path,n),yde(e,i.route,n))),ma(i=>i!==!0,!0))}function gde(e,t){return e!==null&&t&&t(new $z(e)),ke(!0)}function vde(e,t){return e!==null&&t&&t(new Oz(e)),ke(!0)}function yde(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return ke(!0);let i=r.map(o=>Cm(()=>{let a=R5(t)??n,s=$6(o,a),c=lde(s)?s.canActivate(t,e):Sa(a,()=>s(t,e));return x3(c).pipe(ma())}));return ke(i).pipe(P6())}function xde(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(a=>ide(a)).filter(a=>a!==null).map(a=>Cm(()=>{let s=a.guards.map(c=>{let l=R5(a.node)??n,u=$6(c,l),f=ude(u)?u.canActivateChild(r,e):Sa(l,()=>u(r,e));return x3(f).pipe(ma())});return ke(s).pipe(P6())}));return ke(o).pipe(P6())}function Cde(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return ke(!0);let a=o.map(s=>{let c=R5(t)??i,l=$6(s,c),u=fde(l)?l.canDeactivate(e,t,n,r):Sa(c,()=>l(e,t,n,r));return x3(u).pipe(ma())});return ke(a).pipe(P6())}function bde(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return ke(!0);let o=i.map(a=>{let s=$6(a,e),c=cde(s)?s.canLoad(t,n):Sa(e,()=>s(t,n));return x3(c)});return ke(o).pipe(P6(),qq(r))}function qq(e){return Bw(ar(t=>{if(R6(t))throw $q(e,t)}),Ke(t=>t===!0))}function Mde(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return ke(!0);let o=i.map(a=>{let s=$6(a,e),c=dde(s)?s.canMatch(t,n):Sa(e,()=>s(t,n));return x3(c)});return ke(o).pipe(P6(),qq(r))}var k5=class{constructor(t){this.segmentGroup=t||null}},Bg=class extends Error{constructor(t){super(),this.urlTree=t}};function _6(e){return Z0(new k5(e))}function wde(e){return Z0(new xe(4e3,!1))}function Sde(e){return Z0(Bq(!1,Ao.GuardRejected))}var Xz=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ke(r);if(i.numberOfChildren>1||!i.children[Ze])return wde(t.redirectTo);i=i.children[Ze]}}applyRedirectCommands(t,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n.startsWith("/"))throw new Bg(i);return i}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new g3(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let s=o.substring(1);r[i]=n[s]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),a={};return Object.entries(n.children).forEach(([s,c])=>{a[s]=this.createSegmentGroup(t,c,r,i)}),new Nt(o,a)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new xe(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},Qz={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ede(e,t,n,r,i){let o=iH(e,t,n);return o.matched?(r=ede(t,r),Mde(r,t,n,i).pipe(Ke(a=>a===!0?o:x({},Qz)))):ke(o)}function iH(e,t,n){if(t.path==="**")return Dde(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?x({},Qz):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||M5e)(n,e,t);if(!i)return x({},Qz);let o={};Object.entries(i.posParams??{}).forEach(([s,c])=>{o[s]=c.path});let a=i.consumed.length>0?x(x({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function Dde(e){return{matched:!0,parameters:e.length>0?Sq(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function Cq(e,t,n,r){return n.length>0&&Lde(e,n,r)?{segmentGroup:new Nt(t,Hde(r,new Nt(n,e.children))),slicedSegments:[]}:n.length===0&&Ade(e,n,r)?{segmentGroup:new Nt(e.segments,zde(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Nt(e.segments,e.children),slicedSegments:n}}function zde(e,t,n,r){let i={};for(let o of n)if(Gg(e,t,o)&&!r[Na(o)]){let a=new Nt([],{});i[Na(o)]=a}return x(x({},r),i)}function Hde(e,t){let n={};n[Ze]=t;for(let r of e)if(r.path===""&&Na(r)!==Ze){let i=new Nt([],{});n[Na(r)]=i}return n}function Lde(e,t,n){return n.some(r=>Gg(e,t,r)&&Na(r)!==Ze)}function Ade(e,t,n){return n.some(r=>Gg(e,t,r))}function Gg(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Vde(e,t,n,r){return Na(e)!==r&&(r===Ze||!Gg(t,n,e))?!1:iH(t,e,n).matched}function Nde(e,t,n){return t.length===0&&!e.children[n]}var Kz=class{};function _de(e,t,n,r,i,o,a="emptyOnly"){return new Zz(e,t,n,r,i,a,o).recognize()}var kde=31,Zz=class{constructor(t,n,r,i,o,a,s){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new Xz(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new xe(4002,`'${t.segmentGroup}'`)}recognize(){let t=Cq(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Ke(n=>{let r=new N5([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ze,this.rootComponentType,null,{}),i=new J1(r,n),o=new Pg("",i),a=$5e(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root,null),{state:o,tree:a}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,Ze).pipe(Xc(r=>{if(r instanceof Bg)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof k5?this.noMatchError(r):r}))}inheritParamsAndData(t,n){let r=t.value,i=eH(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(t,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0).pipe(Ke(o=>o instanceof J1?[o]:[]))}processChildren(t,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return en(i).pipe(Es(o=>{let a=r.children[o],s=tde(n,o);return this.processSegmentGroup(t,s,a,o)}),Qw((o,a)=>(o.push(...a),o)),Qc(null),Xw(),Wn(o=>{if(o===null)return _6(r);let a=Gq(o);return Tde(a),ke(a)}))}processSegment(t,n,r,i,o,a){return en(n).pipe(Es(s=>this.processSegmentAgainstRoute(s._injector??t,n,s,r,i,o,a).pipe(Xc(c=>{if(c instanceof k5)return ke(null);throw c}))),ma(s=>!!s),Xc(s=>{if(jq(s))return Nde(r,i,o)?ke(new Kz):_6(r);throw s}))}processSegmentAgainstRoute(t,n,r,i,o,a,s){return Vde(r,i,o,a)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,a):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,a):_6(i):_6(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,a){let{matched:s,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=iH(n,i,o);if(!s)return _6(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>kde&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,f).pipe(Wn(d=>this.processSegment(t,r,n,d.concat(u),a,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){let a=Ede(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(h1(s=>s.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(h1(({routes:c})=>{let l=r._loadedInjector??t,{consumedSegments:u,remainingSegments:f,parameters:d}=s,p=new N5(u,d,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,Fde(r),Na(r),r.component??r._loadedComponent??null,r,Rde(r)),{segmentGroup:h,slicedSegments:m}=Cq(n,u,f,c);if(m.length===0&&h.hasChildren())return this.processChildren(l,c,h).pipe(Ke(v=>v===null?null:new J1(p,v)));if(c.length===0&&m.length===0)return ke(new J1(p,[]));let g=Na(r)===o;return this.processSegment(l,c,h,m,g?Ze:o,!0).pipe(Ke(v=>new J1(p,v instanceof J1?[v]:[])))}))):_6(n)))}getChildConfig(t,n,r){return n.children?ke({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?ke({routes:n._loadedRoutes,injector:n._loadedInjector}):bde(t,n,r,this.urlSerializer).pipe(Wn(i=>i?this.configLoader.loadChildren(t,n).pipe(ar(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):Sde(n))):ke({routes:[],injector:t})}};function Tde(e){e.sort((t,n)=>t.value.outlet===Ze?-1:n.value.outlet===Ze?1:t.value.outlet.localeCompare(n.value.outlet))}function Ide(e){let t=e.value.routeConfig;return t&&t.path===""}function Gq(e){let t=[],n=new Set;for(let r of e){if(!Ide(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=Gq(r.children);t.push(new J1(r.value,i))}return t.filter(r=>!n.has(r))}function Fde(e){return e.data||{}}function Rde(e){return e.resolve||{}}function Ode(e,t,n,r,i,o){return Wn(a=>_de(e,t,n,r,a.extractedUrl,i,o).pipe(Ke(({state:s,tree:c})=>k(x({},a),{targetSnapshot:s,urlAfterRedirects:c}))))}function Pde(e,t){return Wn(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ke(n);let o=new Set(i.map(c=>c.route)),a=new Set;for(let c of o)if(!a.has(c))for(let l of Wq(c))a.add(l);let s=0;return en(a).pipe(Es(c=>o.has(c)?$de(c,r,e,t):(c.data=eH(c,c.parent,e).resolve,ke(void 0))),ar(()=>s++),e6(1),Wn(c=>s===a.size?ke(n):Mo))})}function Wq(e){let t=e.children.map(n=>Wq(n)).flat();return[e,...t]}function $de(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!Oq(i)&&(o[T5]=i.title),Bde(o,e,t,r).pipe(Ke(a=>(e._resolvedData=a,e.data=eH(e,e.parent,n).resolve,null)))}function Bde(e,t,n,r){let i=Lz(e);if(i.length===0)return ke({});let o={};return en(i).pipe(Wn(a=>Ude(e[a],t,n,r).pipe(ma(),ar(s=>{o[a]=s}))),e6(1),Yw(o),Xc(a=>jq(a)?Mo:Z0(a)))}function Ude(e,t,n,r){let i=R5(t)??r,o=$6(e,i),a=o.resolve?o.resolve(t,n):Sa(i,()=>o(t,n));return x3(a)}function zz(e){return h1(t=>{let n=e(t);return n?en(n).pipe(Ke(()=>t)):ke(t)})}var Yq=(()=>{let t=class t{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(a=>a.outlet===Ze);return i}getResolvedTitleForRoute(r){return r.data[T5]}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(jde),providedIn:"root"});let e=t;return e})(),jde=(()=>{let t=class t extends Yq{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};t.\u0275fac=function(i){return new(i||t)(ge($U))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),P5=new ze("",{providedIn:"root",factory:()=>({})}),Ug=new ze(""),oH=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ce(A9)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ke(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=x3(r.loadComponent()).pipe(Ke(Xq),ar(a=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a}),Kc(()=>{this.componentLoaders.delete(r)})),o=new K0(i,()=>new f1).pipe(Q0());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ke({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let a=qde(i,this.compiler,r,this.onLoadEndListener).pipe(Kc(()=>{this.childrenLoaders.delete(i)})),s=new K0(a,()=>new f1).pipe(Q0());return this.childrenLoaders.set(i,s),s}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function qde(e,t,n,r){return x3(e.loadChildren()).pipe(Ke(Xq),Wn(i=>i instanceof B8||Array.isArray(i)?ke(i):en(t.compileModuleAsync(i))),Ke(i=>{r&&r(e);let o,a,s=!1;return Array.isArray(i)?(a=i,s=!0):(o=i.create(n).injector,a=o.get(Ug,[],{optional:!0,self:!0}).flat()),{routes:a.map(rH),injector:o}}))}function Gde(e){return e&&typeof e=="object"&&"default"in e}function Xq(e){return Gde(e)?e.default:e}var aH=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(Wde),providedIn:"root"});let e=t;return e})(),Wde=(()=>{let t=class t{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Qq=new ze(""),Kq=new ze("");function Yde(e,t,n){let r=e.get(Kq),i=e.get(Gr);return e.get(qt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,a=new Promise(l=>{o=l}),s=i.startViewTransition(()=>(o(),Xde(e))),{onViewTransitionCreated:c}=r;return c&&Sa(e,()=>c({transition:s,from:t,to:n})),a})}function Xde(e){return new Promise(t=>{rD(t,{injector:e})})}var sH=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new f1,this.transitionAbortSubject=new f1,this.configLoader=ce(oH),this.environmentInjector=ce(Bi),this.urlSerializer=ce(I5),this.rootContexts=ce(F5),this.location=ce(b6),this.inputBindingEnabled=ce(qg,{optional:!0})!==null,this.titleStrategy=ce(Yq),this.options=ce(P5,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ce(aH),this.createViewTransition=ce(Qq,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ke(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Fz(o)),i=o=>this.events.next(new Rz(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(k(x(x({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new On({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:E5,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(p1(a=>a.id!==0),Ke(a=>k(x({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),h1(a=>{this.currentTransition=a;let s=!1,c=!1;return ke(a).pipe(ar(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?k(x({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),h1(l=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&f!=="reload"){let d="";return this.events.next(new y3(l.id,this.urlSerializer.serialize(l.rawUrl),d,Tg.IgnoredSameUrlNavigation)),l.resolve(null),Mo}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ke(l).pipe(h1(d=>{let p=this.transitions?.getValue();return this.events.next(new O6(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),p!==this.transitions?.getValue()?Mo:Promise.resolve(d)}),Ode(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ar(d=>{a.targetSnapshot=d.targetSnapshot,a.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=k(x({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let p=new Ig(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:p,source:h,restoredState:m,extras:g}=l,v=new O6(d,this.urlSerializer.serialize(p),h,m);this.events.next(v);let y=Fq(this.rootComponentType).snapshot;return this.currentTransition=a=k(x({},l),{targetSnapshot:y,urlAfterRedirects:p,extras:k(x({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,ke(a)}else{let d="";return this.events.next(new y3(l.id,this.urlSerializer.serialize(l.extractedUrl),d,Tg.IgnoredByUrlHandlingStrategy)),l.resolve(null),Mo}}),ar(l=>{let u=new _z(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Ke(l=>(this.currentTransition=a=k(x({},l),{guards:rde(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),a)),pde(this.environmentInjector,l=>this.events.next(l)),ar(l=>{if(a.guardsResult=l.guardsResult,R6(l.guardsResult))throw $q(this.urlSerializer,l.guardsResult);let u=new kz(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),p1(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ao.GuardRejected),!1)),zz(l=>{if(l.guards.canActivateChecks.length)return ke(l).pipe(ar(u=>{let f=new Tz(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),h1(u=>{let f=!1;return ke(u).pipe(Pde(this.paramsInheritanceStrategy,this.environmentInjector),ar({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",Ao.NoDataFromResolver)}}))}),ar(u=>{let f=new Iz(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),zz(l=>{let u=f=>{let d=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(f.routeConfig).pipe(ar(p=>{f.component=p}),Ke(()=>{})));for(let p of f.children)d.push(...u(p));return d};return A8(u(l.targetSnapshot.root)).pipe(Qc(null),ye(1))}),zz(()=>this.afterPreactivation()),h1(()=>{let{currentSnapshot:l,targetSnapshot:u}=a,f=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return f?en(f).pipe(Ke(()=>a)):ke(a)}),Ke(l=>{let u=X5e(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=a=k(x({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,a}),ar(()=>{this.events.next(new A5)}),nde(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ye(1),ar({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new M2(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Zw(this.transitionAbortSubject.pipe(ar(l=>{throw l}))),Kc(()=>{!s&&!c&&this.cancelNavigationTransition(a,"",Ao.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),Xc(l=>{if(c=!0,Uq(l))this.events.next(new v3(a.id,this.urlSerializer.serialize(a.extractedUrl),l.message,l.cancellationCode)),Z5e(l)?this.events.next(new V5(l.url)):a.resolve(!1);else{this.events.next(new L5(a.id,this.urlSerializer.serialize(a.extractedUrl),l,a.targetSnapshot??void 0));try{a.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(u)}}return Mo}))}))}cancelNavigationTransition(r,i,o){let a=new v3(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(a),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Qde(e){return e!==E5}var Kde=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(Zde),providedIn:"root"});let e=t;return e})(),Jz=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},Zde=(()=>{let t=class t extends Jz{};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ea(t)))(o||t)}})(),t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Zq=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(Jde),providedIn:"root"});let e=t;return e})(),Jde=(()=>{let t=class t extends Zq{constructor(){super(...arguments),this.location=ce(b6),this.urlSerializer=ce(I5),this.options=ce(P5,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ce(aH),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new g3,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Fq(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof O6)this.stateMemento=this.createStateMemento();else if(r instanceof y3)this.rawUrlTree=i.initialUrl;else if(r instanceof Ig){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof A5?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof v3&&(r.code===Ao.GuardRejected||r.code===Ao.NoDataFromResolver)?this.restoreHistory(i):r instanceof L5?this.restoreHistory(i,!0):r instanceof M2&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let a=this.browserPageId,s=x(x({},i.extras.state),this.generateNgRouterState(i.id,a));this.location.replaceState(o,"",s)}else{let a=x(x({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",a)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,a=this.currentPageId-o;a!==0?this.location.historyGo(a):this.currentUrlTree===r.finalUrl&&a===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ea(t)))(o||t)}})(),t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),w5=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(w5||{});function Jq(e,t){e.events.pipe(p1(n=>n instanceof M2||n instanceof v3||n instanceof L5||n instanceof y3),Ke(n=>n instanceof M2||n instanceof y3?w5.COMPLETE:(n instanceof v3?n.code===Ao.Redirect||n.code===Ao.SupersededByNewNavigation:!1)?w5.REDIRECTING:w5.FAILED),p1(n=>n!==w5.REDIRECTING),ye(1)).subscribe(()=>{t()})}function e7e(e){throw e}var t7e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},n7e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Qt=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=ce(E9),this.stateManager=ce(Zq),this.options=ce(P5,{optional:!0})||{},this.pendingTasks=ce(Z4),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ce(sH),this.urlSerializer=ce(I5),this.location=ce(b6),this.urlHandlingStrategy=ce(aH),this._events=new f1,this.errorHandler=this.options.errorHandler||e7e,this.navigated=!1,this.routeReuseStrategy=ce(Kde),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ce(Ug,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ce(qg,{optional:!0}),this.eventsSubscription=new or,this.isNgZoneEnabled=ce(qt)instanceof qt&&qt.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(o!==null&&a!==null){if(this.stateManager.handleRouterEvent(i,a),i instanceof v3&&i.code!==Ao.Redirect&&i.code!==Ao.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof M2)this.navigated=!0;else if(i instanceof V5){let s=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Qde(o.source)};this.scheduleNavigation(s,E5,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}i7e(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),E5,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let a={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let l=x({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(a.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,s,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(rH),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:a,fragment:s,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,f=null;switch(c){case"merge":f=x(x({},this.currentUrlTree.queryParams),a);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=a||null}f!==null&&(f=this.removeEmptyProps(f));let d;try{let p=o?o.snapshot:this.routerState.snapshot.root;d=_q(p)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),d=this.currentUrlTree.root}return kq(d,r,f,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=R6(r)?r:this.parseUrl(r),a=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(a,E5,null,i)}navigate(r,i={skipLocationChange:!1}){return r7e(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=x({},t7e):i===!1?o=x({},n7e):o=i,R6(r))return mq(this.currentUrlTree,r,o);let a=this.parseUrl(r);return mq(this.currentUrlTree,a,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,a])=>(a!=null&&(i[o]=a),i),{})}scheduleNavigation(r,i,o,a,s){if(this.disposed)return Promise.resolve(!1);let c,l,u;s?(c=s.resolve,l=s.reject,u=s.promise):u=new Promise((d,p)=>{c=d,l=p});let f=this.pendingTasks.add();return Jq(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:a,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function r7e(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new xe(4008,!1)}function i7e(e){return!(e instanceof A5)&&!(e instanceof V5)}var hn=(()=>{let t=class t{constructor(r,i,o,a,s,c){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=a,this.el=s,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new f1,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof M2&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,a,s){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||o||a||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:X$(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,a=this.el.nativeElement;i!==null?o.setAttribute(a,r,i):o.removeAttribute(a,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};t.\u0275fac=function(i){return new(i||t)(W(Qt),W(Vt),RE("tabindex"),W(Y1),W(qr),W(Ps))},t.\u0275dir=kt({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&Fe("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&x6("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Ur.HasDecoratorInputTransform,"preserveFragment","preserveFragment",tl],skipLocationChange:[Ur.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",tl],replaceUrl:[Ur.HasDecoratorInputTransform,"replaceUrl","replaceUrl",tl],routerLink:"routerLink"},standalone:!0,features:[aD,Do]});let e=t;return e})(),eG=(()=>{let t=class t{get isActive(){return this._isActive}constructor(r,i,o,a,s){this.router=r,this.element=i,this.renderer=o,this.cdr=a,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new jt,this.routerEventsSubscription=r.events.subscribe(c=>{c instanceof M2&&this.update()})}ngAfterContentInit(){ke(this.links.changes,ke(null)).pipe(Yc()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let r=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=en(r).pipe(Yc()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(r){let i=Array.isArray(r)?r:r.split(" ");this.classes=i.filter(o=>!!o)}ngOnChanges(r){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let r=this.hasActiveLinks();this._isActive!==r&&(this._isActive=r,this.cdr.markForCheck(),this.classes.forEach(i=>{r?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),r&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(r))})}isLinkActive(r){let i=o7e(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{let a=o.urlTree;return a?r.isActive(a,i):!1}}hasActiveLinks(){let r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.links.some(r)}};t.\u0275fac=function(i){return new(i||t)(W(Qt),W(qr),W(Y1),W(ks),W(hn,8))},t.\u0275dir=kt({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(i,o,a){if(i&1&&UB(a,hn,5),i&2){let s;jB(s=qB())&&(o.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Do]});let e=t;return e})();function o7e(e){return!!e.paths}var jg=class{};var a7e=(()=>{let t=class t{constructor(r,i,o,a,s){this.router=r,this.injector=o,this.preloadingStrategy=a,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(p1(r=>r instanceof M2),Es(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let a of i){a.providers&&!a._injector&&(a._injector=S9(a.providers,r,`Route: ${a.path}`));let s=a._injector??r,c=a._loadedInjector??s;(a.loadChildren&&!a._loadedRoutes&&a.canLoad===void 0||a.loadComponent&&!a._loadedComponent)&&o.push(this.preloadConfig(s,a)),(a.children||a._loadedRoutes)&&o.push(this.processRoutes(c,a.children??a._loadedRoutes))}return en(o).pipe(Yc())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=ke(null);let a=o.pipe(Wn(s=>s===null?ke(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??r,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return en([a,s]).pipe(Yc())}else return a})}};t.\u0275fac=function(i){return new(i||t)(ge(Qt),ge(A9),ge(Bi),ge(jg),ge(oH))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),tG=new ze(""),s7e=(()=>{let t=class t{constructor(r,i,o,a,s={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=a,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof O6?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof M2?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof y3&&r.code===Tg.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Fg&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Fg(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(i){lB()},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function c7e(e){return e.routerState.root}function $5(e,t){return{\u0275kind:e,\u0275providers:t}}function l7e(){let e=ce(g2);return t=>{let n=e.get(el);if(t!==n.components[0])return;let r=e.get(Qt),i=e.get(nG);e.get(cH)===1&&r.initialNavigation(),e.get(rG,null,rt.Optional)?.setUpPreloading(),e.get(tG,null,rt.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var nG=new ze("",{factory:()=>new f1}),cH=new ze("",{providedIn:"root",factory:()=>1});function u7e(){return $5(2,[{provide:cH,useValue:0},{provide:H9,multi:!0,deps:[g2],useFactory:t=>{let n=t.get(dU,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=t.get(Qt),o=t.get(nG);Jq(i,()=>{r(!0)}),t.get(sH).afterPreactivation=()=>(r(!0),o.closed?ke(void 0):o),i.initialNavigation()}))}}])}function f7e(){return $5(3,[{provide:H9,multi:!0,useFactory:()=>{let t=ce(Qt);return()=>{t.setUpLocationChangeListener()}}},{provide:cH,useValue:2}])}var rG=new ze("");function d7e(e){return $5(0,[{provide:rG,useExisting:a7e},{provide:jg,useExisting:e}])}function p7e(){return $5(8,[xq,{provide:qg,useExisting:xq}])}function h7e(e){let t=[{provide:Qq,useValue:Yde},{provide:Kq,useValue:x({skipNextTransition:!!e?.skipInitialTransition},e)}];return $5(9,t)}var bq=new ze("ROUTER_FORROOT_GUARD"),m7e=[b6,{provide:I5,useClass:z5},Qt,F5,{provide:Vt,useFactory:c7e,deps:[Qt]},oH,[]],lH=(()=>{let t=class t{constructor(r){}static forRoot(r,i){return{ngModule:t,providers:[m7e,[],{provide:Ug,multi:!0,useValue:r},{provide:bq,useFactory:x7e,deps:[[Qt,new d9,new kE]]},{provide:P5,useValue:i||{}},i?.useHash?v7e():y7e(),g7e(),i?.preloadingStrategy?d7e(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?C7e(i):[],i?.bindToComponentInputs?p7e().\u0275providers:[],i?.enableViewTransitions?h7e().\u0275providers:[],b7e()]}}static forChild(r){return{ngModule:t,providers:[{provide:Ug,multi:!0,useValue:r}]}}};t.\u0275fac=function(i){return new(i||t)(ge(bq,8))},t.\u0275mod=Cr({type:t}),t.\u0275inj=br({});let e=t;return e})();function g7e(){return{provide:tG,useFactory:()=>{let e=ce(CU),t=ce(qt),n=ce(P5),r=ce(sH),i=ce(I5);return n.scrollOffset&&e.setOffset(n.scrollOffset),new s7e(i,r,e,t,n)}}}function v7e(){return{provide:Ps,useClass:hU}}function y7e(){return{provide:Ps,useClass:ED}}function x7e(e){return"guarded"}function C7e(e){return[e.initialNavigation==="disabled"?f7e().\u0275providers:[],e.initialNavigation==="enabledBlocking"?u7e().\u0275providers:[]]}var Mq=new ze("");function b7e(){return[{provide:Mq,useFactory:l7e},{provide:L9,multi:!0,useExisting:Mq}]}var _a=class{constructor(t){Object.assign(this,t)}toString(){return JSON.stringify(this)}get ViewUrl(){throw new Error("ViewUrl not implemented")}get EditUrl(){throw new Error("EditUrl not implemented")}get DeleteUrl(){throw new Error("DeleteUrl not implemented")}};var lr=class extends _a{constructor(t){super(t)}get ViewUrl(){return["/goals",this.Id]}get EditUrl(){return["/goals",this.Id,"edit"]}get DeleteUrl(){return["/goals",this.Id,"delete"]}};var No=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var B5="customServerUrl",B6=(()=>{let t=class t extends No{constructor(){super()}getCustomServerUrl(){return localStorage.getItem(B5)}setCustomServerUrl(r){return Wg.endpoint=r,localStorage.setItem(B5,r)}clearCustomServerUrl(){localStorage.removeItem(B5)}isCustomServerUrlSet(){return this.getCustomServerUrl()!==null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Wg={endpoint:localStorage.getItem(B5)??""};function Kt(e){return Wg.endpoint+e}var Qn=(()=>{let t=class t extends No{constructor(r){super(),this.http=r}listGoals(){let r=Kt("/goals");return this.http.get(r)}findGoals(r){let i=Kt(`/goals?q=${r}`);return this.http.get(i)}getGoal(r){let i=Kt(`/goals/${r}`);return this.http.get(i)}createGoal(r){let i=Kt("/goals");return this.http.post(i,r)}updateGoal(r){let i=Kt(`/goals/${r.Id}`);return this.http.put(i,r)}deleteGoal(r){let i=Kt(`/goals/${r}`);return this.http.delete(i)}getGoalTasks(r){let i=Kt(`/goals/${r}/tasks`);return this.http.get(i)}getGoalHabits(r){let i=Kt(`/goals/${r}/habits`);return this.http.get(i)}};t.\u0275fac=function(i){return new(i||t)(ge($s))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();var uH=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(ye(1)).subscribe(i=>{this.model=new lr(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteGoal(this.model?.Id).pipe(ye(1)).subscribe(()=>this.router.navigateByUrl("/goals"))}};t.\u0275fac=function(i){return new(i||t)(W(Qn),W(Vt),W(Qt))},t.\u0275cmp=Ce({type:t,selectors:[["app-delete-page"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),N(),V(2,"p"),I(3,` Deleting this model will make it unrecoverable.
`),N(),V(4,"button",0),Fe("click",function(){return o.deleteModel()}),I(5),N()),i&2&&(O(),be("Delete ",o.model==null?null:o.model.Name,"?"),O(4),be(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();var M1=class extends _a{constructor(t){super(t)}get ViewUrl(){return["/habits",this.Id]}get EditUrl(){return["/habits",this.Id,"edit"]}get DeleteUrl(){return["/habits",this.Id,"delete"]}get TimesCompletedToday(){let t=new Date().toLocaleDateString().split("T")[0];return this.CompletedDates?.filter(n=>n===t).length??0}get IsCompletedToday(){return this.IsQuantifiable?this.TimesCompletedToday>=this.TargetValue:this.TimesCompletedToday>0}get FormattedCompletedDates(){let t=[];if(this.AntiHabit){let n=new Date,r=new Date(this.CreatedAt);for(let i=r;i<=n;i.setDate(i.getDate()+1)){let o=i.toLocaleDateString().split("T")[0];(!this.CompletedDates||!this.CompletedDates.includes(o))&&t.push(o)}}else t=this.CompletedDates?.map(n=>new Date(n).toLocaleDateString().split("T")[0]??[]);return t??[]}};var eo=class extends _a{constructor(t){super(t),this.Importance=1}get ViewUrl(){return["/tasks",this.Id]}get EditUrl(){return["/tasks",this.Id,"edit"]}get DeleteUrl(){return["/tasks",this.Id,"delete"]}get ImportanceHuman(){let t={1:"Low",2:"Low-Medium",3:"Medium",4:"Medium-High",5:"High"};return this.Importance in t?t[this.Importance]:"Unknown Importance"}get isOverdue(){let t=new Date,n=new Date(this.CompleteBy);return t>n}};function M7e(e,t){if(e&1&&(V(0,"li")(1,"a",4),I(2),N()()),e&2){let n=t.$implicit;O(),se("routerLink",n.ViewUrl),O(),be(" ",n.Name," ")}}function w7e(e,t){if(e&1&&(V(0,"li")(1,"a",4),I(2),N()()),e&2){let n=t.$implicit;O(),se("routerLink",n.ViewUrl),O(),be(" ",n.Name," ")}}var fH=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(ye(1)).subscribe(i=>{this.model=new lr(i.data),this.api.getGoalHabits(r).pipe(ye(1)).subscribe(o=>{this.associatedHabits=o.data.map(a=>new M1(a))}),this.api.getGoalTasks(r).pipe(ye(1)).subscribe(o=>{this.associatedTasks=o.data.map(a=>new eo(a))})})}};t.\u0275fac=function(i){return new(i||t)(W(Qn),W(Vt))},t.\u0275cmp=Ce({type:t,selectors:[["app-goal-page"]],decls:20,vars:11,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right","uk-margin-small-top",3,"routerLink"],[1,"uk-button-danger","uk-button","uk-margin-small-top",3,"routerLink"],[1,"uk-text-default"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),N(),V(2,"button",0),I(3),N(),V(4,"button",1),I(5),N(),V(6,"pre",2),I(7),N(),ht(8,"hr"),V(9,"p"),I(10),hi(11,"date"),N(),V(12,"p"),I(13,"Associated Habits:"),N(),V(14,"ul"),st(15,M7e,3,2,"li",3),N(),V(16,"p"),I(17,"Associated Tasks:"),N(),V(18,"ul"),st(19,w7e,3,2,"li",3),N()),i&2&&(O(),be("Goal: ",o.model==null?null:o.model.Name,""),O(),se("routerLink",o.model==null?null:o.model.EditUrl),O(),be(" Edit: ",o.model==null?null:o.model.Name,`
`),O(),se("routerLink",o.model==null?null:o.model.DeleteUrl),O(),be(" Delete: ",o.model==null?null:o.model.Name,`
`),O(2),be("    ",o.model==null?null:o.model.Description,`
`),O(3),be(" Complete By: ",mi(11,9,o.model==null?null:o.model.CompleteBy),`
`),O(5),se("ngForOf",o.associatedHabits),O(4),se("ngForOf",o.associatedTasks))},dependencies:[gi,hn,Lo],encapsulation:2});let e=t;return e})();function S7e(e,t){if(e&1&&(v1(0),V(1,"p",10),I(2),N(),y1()),e&2){let n=ot().$implicit;O(2),be(" ",n.Description," ")}}function E7e(e,t){if(e&1){let n=X1();V(0,"tr")(1,"td")(2,"input",6),Yt("ngModelChange",function(i){let a=fi(n).$implicit;return tn(a.Completed,i)||(a.Completed=i),di(i)}),Fe("change",function(){let o=fi(n).$implicit,a=ot();return di(a.updateGoal(o))}),N()(),V(3,"td")(4,"a",7),I(5),N()(),V(6,"td",3),st(7,S7e,3,1,"ng-container",8),N(),V(8,"td")(9,"a",9),I(10,"View"),N()()()}if(e&2){let n=t.$implicit;ot();let r=J4(21);O(2),Wt("ngModel",n.Completed),O(2),se("routerLink",n.ViewUrl),O(),be(" ",n.Name," "),O(2),se("ngIf",n.Description)("ngIfElse",r),O(2),se("routerLink",n.ViewUrl)}}function D7e(e,t){e&1&&(V(0,"i"),I(1,"No description provided."),N())}var dH=(()=>{let t=class t{constructor(r){this.api=r,this.goals=[]}ngOnInit(){this.api.listGoals().pipe(ye(1)).subscribe(r=>{this.goals=r.data.map(i=>new lr(i))})}updateGoal(r){this.api.updateGoal(r).pipe(ye(1)).subscribe(i=>{r=new lr(i.data)})}};t.\u0275fac=function(i){return new(i||t)(W(Qn))},t.\u0275cmp=Ce({type:t,selectors:[["app-goals-page"]],decls:22,vars:1,consts:[[1,"list-header"],["routerLink","/goals/new",1,"uk-button","uk-button-primary"],[1,"uk-table","uk-table-striped"],[1,"hide-in-mobile"],[4,"ngFor","ngForOf"],["defaultDescription",""],["type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange","change"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[4,"ngIf","ngIfElse"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],[1,"description"]],template:function(i,o){i&1&&(V(0,"div",0)(1,"h1"),I(2,"Goals"),N(),V(3,"section")(4,"nav")(5,"a",1),I(6,"New Goal"),N()()()(),V(7,"section")(8,"table",2)(9,"thead")(10,"tr"),ht(11,"th"),V(12,"th"),I(13,"Name"),N(),V(14,"th",3),I(15,"Description"),N(),V(16,"th"),I(17,"Action"),N()()(),V(18,"tbody"),st(19,E7e,11,6,"tr",4),N()()(),st(20,D7e,2,0,"ng-template",null,5,Ts)),i&2&&(O(19),se("ngForOf",o.goals))},dependencies:[gi,x1,hn,rl,vi,Wr],styles:["p.description[_ngcontent-%COMP%]{text-wrap:nowrap;padding-right:10rem;width:28rem;overflow:hidden}"]});let e=t;return e})();var ul=(()=>{let t=class t{constructor(){this.model={}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=kt({type:t,selectors:[["app-abstract-form"]],inputs:{creating:"creating",model:"model"}});let e=t;return e})();function z7e(e,t){e&1&&(V(0,"h1"),I(1,"Create Goal"),N())}function H7e(e,t){if(e&1&&(V(0,"h1"),I(1),N()),e&2){let n=ot();O(),be("Edit Goal: ",n.model.Name,"")}}var U5=(()=>{let t=class t extends ul{constructor(r,i){super(),this.api=r,this.router=i}submitForm(){let r=new lr(this.model);if(this.creating){this.api.createGoal(r).pipe(ye(1)).subscribe(()=>{this.router.navigate(["/goals"])});return}this.api.updateGoal(r).pipe(ye(1)).subscribe(()=>{this.router.navigate(r.ViewUrl)})}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString()}};t.\u0275fac=function(i){return new(i||t)(W(Qn),W(Qt))},t.\u0275cmp=Ce({type:t,selectors:[["app-goal-form"]],features:[sr],decls:15,vars:4,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(st(0,z7e,2,0,"h1")(1,H7e,2,1),V(2,"form",0,1)(4,"label",2),I(5,"Goal Name"),N(),V(6,"input",3),Yt("ngModelChange",function(s){return tn(o.model.Name,s)||(o.model.Name=s),s}),N(),V(7,"label",4),I(8," Goal Description "),N(),V(9,"textarea",5),Yt("ngModelChange",function(s){return tn(o.model.Description,s)||(o.model.Description=s),s}),N(),V(10,"label",6),I(11,"Complete By"),N(),V(12,"input",7),Fe("change",function(s){return o.updateCompleteBy(s)}),N(),V(13,"button",8),Fe("click",function(){return o.submitForm()}),I(14),N()()),i&2&&(a3(0,o.creating?0:1),O(6),Wt("ngModel",o.model.Name),O(3),Wt("ngModel",o.model.Description),O(5),be(" ",o.creating?"Create":"Update"," Goal "))},dependencies:[La,b1,vi,Ha,Wr,C2]});let e=t;return e})();var pH=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Ce({type:t,selectors:[["app-new-goal-page"]],decls:1,vars:1,consts:[[3,"creating"]],template:function(i,o){i&1&&ht(0,"app-goal-form",0),i&2&&se("creating",!0)},dependencies:[U5],encapsulation:2});let e=t;return e})();var _o=(()=>{let t=class t extends No{constructor(r){super(),this.http=r}getHabits(){let r=Kt("/habits");return this.http.get(r)}getHabit(r){let i=Kt(`/habits/${r}`);return this.http.get(i)}createHabit(r){let i=Kt("/habits");return this.http.post(i,r)}updateHabit(r){let i=Kt(`/habits/${r.Id}`);return this.http.put(i,r)}deleteHabit(r){let i=Kt(`/habits/${r}`);return this.http.delete(i)}};t.\u0275fac=function(i){return new(i||t)(ge($s))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();var hH=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(ye(1)).subscribe(i=>{this.model=new M1(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteHabit(this.model?.Id).pipe(ye(1)).subscribe(()=>this.router.navigateByUrl("/"))}};t.\u0275fac=function(i){return new(i||t)(W(_o),W(Vt),W(Qt))},t.\u0275cmp=Ce({type:t,selectors:[["app-delete-habit-page"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),N(),V(2,"p"),I(3,` Deleting this model will make it unrecoverable.
`),N(),V(4,"button",0),Fe("click",function(){return o.deleteModel()}),I(5),N()),i&2&&(O(),be("Delete ",o.model==null?null:o.model.Name,"?"),O(4),be(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();var Yg={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]};var Xg={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]};var aG={$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:"container",data:{values:[]},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"date",timeUnit:"date",type:"ordinal",title:"Day",axis:{tickCount:{timeUnit:"day",step:1}}},y:{field:"date",timeUnit:"month",type:"ordinal",title:"Month",scale:{domain:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},color:{field:"count",type:"quantitative",title:"Count",condition:{test:"datum.count === 0",value:"transparent"},legend:null}}};var mH={};xr(mH,{JsonPatchError:()=>Ln,_areEquals:()=>W5,applyOperation:()=>fl,applyPatch:()=>j6,applyReducer:()=>k7e,deepClone:()=>N7e,getValueByPointer:()=>ev,validate:()=>cG,validator:()=>tv});var A7e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),V7e=Object.prototype.hasOwnProperty;function Kg(e,t){return V7e.call(e,t)}function Zg(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Kg(e,i)&&r.push(i);return r}function Yr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Jg(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function ka(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function q5(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Qg(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Qg(e[t]))return!0}else if(typeof e=="object"){for(var r=Zg(e),i=r.length,o=0;o<i;o++)if(Qg(e[r[o]]))return!0}}return!1}function sG(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var G5=function(e){A7e(t,e);function t(n,r,i,o,a){var s=this.constructor,c=e.call(this,sG(n,{name:r,index:i,operation:o,tree:a}))||this;return c.name=r,c.index=i,c.operation=o,c.tree=a,Object.setPrototypeOf(c,s.prototype),c.message=sG(n,{name:r,index:i,operation:o,tree:a}),c}return t}(Error);var Ln=G5,N7e=Yr,U6={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=ev(n,this.path);r&&(r=Yr(r));var i=fl(n,{op:"remove",path:this.from}).removed;return fl(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=ev(n,this.from);return fl(n,{op:"add",path:this.path,value:Yr(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:W5(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},_7e={add:function(e,t,n){return Jg(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:U6.move,copy:U6.copy,test:U6.test,_get:U6._get};function ev(e,t){if(t=="")return e;var n={op:"_get",path:t};return fl(e,n),n.value}function fl(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):tv(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=ev(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=W5(e,t.value),a.test===!1)throw new Ln("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new Ln("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}}else{r||(e=Yr(e));var s=t.path||"",c=s.split("/"),l=e,u=1,f=c.length,d=void 0,p=void 0,h=void 0;for(typeof n=="function"?h=n:h=tv;;){if(p=c[u],p&&p.indexOf("~")!=-1&&(p=q5(p)),i&&(p=="__proto__"||p=="prototype"&&u>0&&c[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[p]===void 0?d=c.slice(0,u).join("/"):u==f-1&&(d=t.path),d!==void 0&&h(t,0,e,d)),u++,Array.isArray(l)){if(p==="-")p=l.length;else{if(n&&!Jg(p))throw new Ln("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);Jg(p)&&(p=~~p)}if(u>=f){if(n&&t.op==="add"&&p>l.length)throw new Ln("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var a=_7e[t.op].call(t,l,p,e);if(a.test===!1)throw new Ln("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(u>=f){var a=U6[t.op].call(t,l,p,e);if(a.test===!1)throw new Ln("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}if(l=l[p],n&&u<f&&(!l||typeof l!="object"))throw new Ln("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function j6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ln("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Yr(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=fl(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function k7e(e,t,n){var r=fl(e,t);if(r.test===!1)throw new Ln("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function tv(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ln("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(U6[e.op]){if(typeof e.path!="string")throw new Ln("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ln('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ln("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ln("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Qg(e.value))throw new Ln("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Ln("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ln("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},s=cG([a],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ln("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ln("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function cG(e,t,n){try{if(!Array.isArray(e))throw new Ln("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)j6(Yr(t),Yr(e),n||!0);else{n=n||tv;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ln)return i;throw i}}function W5(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,a;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!W5(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var s=Object.keys(e);if(o=s.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(s[i]))return!1;for(i=o;i--!==0;)if(a=s[i],!W5(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}var xH={};xr(xH,{compare:()=>B7e,generate:()=>gH,observe:()=>$7e,unobserve:()=>P7e});var vH=new WeakMap,T7e=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),I7e=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function F7e(e){return vH.get(e)}function R7e(e,t){return e.observers.get(t)}function O7e(e,t){e.observers.delete(t.callback)}function P7e(e,t){t.unobserve()}function $7e(e,t){var n=[],r,i=F7e(e);if(!i)i=new T7e(e),vH.set(e,i);else{var o=R7e(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Yr(e),t){r.callback=t,r.next=null;var a=function(){gH(r)},s=function(){clearTimeout(r.next),r.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return r.patches=n,r.object=e,r.unobserve=function(){gH(r),clearTimeout(r.next),O7e(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},i.observers.set(t,new I7e(t,r)),r}function gH(e,t){t===void 0&&(t=!1);var n=vH.get(e.object);yH(n.value,e.object,e.patches,"",t),e.patches.length&&j6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function yH(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=Zg(t),a=Zg(e),s=!1,c=!1,l=a.length-1;l>=0;l--){var u=a[l],f=e[u];if(Kg(t,u)&&!(t[u]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof f=="object"&&f!=null&&typeof d=="object"&&d!=null&&Array.isArray(f)===Array.isArray(d)?yH(f,d,n,r+"/"+ka(u),i):f!==d&&(s=!0,i&&n.push({op:"test",path:r+"/"+ka(u),value:Yr(f)}),n.push({op:"replace",path:r+"/"+ka(u),value:Yr(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+ka(u),value:Yr(f)}),n.push({op:"remove",path:r+"/"+ka(u)}),c=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}),s=!0)}if(!(!c&&o.length==a.length))for(var l=0;l<o.length;l++){var u=o[l];!Kg(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+ka(u),value:Yr(t[u])})}}}function B7e(e,t,n){n===void 0&&(n=!1);var r=[];return yH(e,t,r,"",n),r}var sXe=Object.assign({},mH,xH,{JsonPatchError:G5,deepClone:Yr,escapePathComponent:ka,unescapePathComponent:q5});var Ew=use(uG());var SI={};xr(SI,{Bounds:()=>Vn,CanvasHandler:()=>dc,CanvasRenderer:()=>V7,DATE:()=>Xi,DAY:()=>Xr,DAYOFYEAR:()=>Oa,Dataflow:()=>V3,Debug:()=>bH,Error:()=>X5,EventStream:()=>su,Gradient:()=>QV,GroupItem:()=>I7,HOURS:()=>D1,Handler:()=>Z3,HybridHandler:()=>wN,HybridRenderer:()=>px,Info:()=>CH,Item:()=>T7,MILLISECONDS:()=>Oo,MINUTES:()=>z1,MONTH:()=>Qr,Marks:()=>Zi,MultiPulse:()=>_v,None:()=>pG,Operator:()=>Tt,Parameters:()=>_d,Pulse:()=>rc,QUARTER:()=>Yi,RenderType:()=>pc,Renderer:()=>oo,ResourceLoader:()=>eN,SECONDS:()=>ro,SVGHandler:()=>gN,SVGRenderer:()=>wx,SVGStringRenderer:()=>MN,Scenegraph:()=>Mx,TIME_UNITS:()=>xv,Transform:()=>$,View:()=>KT,WEEK:()=>Kn,Warn:()=>iv,YEAR:()=>Sr,accessor:()=>yi,accessorFields:()=>ur,accessorName:()=>un,array:()=>te,ascending:()=>td,bandwidthNRD:()=>Fv,bin:()=>UL,bootstrapCI:()=>jL,boundClip:()=>EN,boundContext:()=>F7,boundItem:()=>BV,boundMark:()=>WQ,boundStroke:()=>Ka,changeset:()=>oc,clampRange:()=>HH,codegenExpression:()=>_C,compare:()=>ed,constant:()=>gn,cumulativeLogNormal:()=>Uv,cumulativeNormal:()=>Id,cumulativeUniform:()=>Wv,dayofyear:()=>gL,debounce:()=>nd,defaultLocale:()=>Ld,definition:()=>kv,densityLogNormal:()=>Bv,densityNormal:()=>Rv,densityUniform:()=>Gv,domChild:()=>mr,domClear:()=>qo,domCreate:()=>G3,domFind:()=>mN,dotbin:()=>qL,error:()=>B,expressionFunction:()=>Tn,extend:()=>_e,extent:()=>ji,extentIndex:()=>LH,falsy:()=>Ws,fastmap:()=>C3,field:()=>wr,flush:()=>AH,font:()=>Cx,fontFamily:()=>P7,fontSize:()=>Za,format:()=>Dv,formatLocale:()=>Hd,formats:()=>IL,hasOwnProperty:()=>de,id:()=>q6,identity:()=>An,inferType:()=>NW,inferTypes:()=>_W,ingest:()=>ct,inherits:()=>ee,inrange:()=>b3,interpolate:()=>x7,interpolateColors:()=>Su,interpolateRange:()=>Uy,intersect:()=>SN,intersectBoxLine:()=>Du,intersectPath:()=>tN,intersectPoint:()=>nN,intersectRule:()=>IQ,isArray:()=>F,isBoolean:()=>w1,isDate:()=>S2,isFunction:()=>Te,isIterable:()=>VH,isNumber:()=>Pe,isObject:()=>ne,isRegExp:()=>NH,isString:()=>Q,isTuple:()=>wl,key:()=>rd,lerp:()=>_H,lineHeight:()=>Q3,loader:()=>ou,locale:()=>Sv,logger:()=>Q5,lruCache:()=>kH,markup:()=>bN,merge:()=>TH,mergeConfig:()=>Ia,multiLineOffset:()=>xx,one:()=>Ta,pad:()=>IH,panLinear:()=>MH,panLog:()=>wH,panPow:()=>SH,panSymlog:()=>EH,parse:()=>Xne,parseExpression:()=>nf,parseSelector:()=>Hi,path:()=>zl,pathCurves:()=>KV,pathEqual:()=>SK,pathParse:()=>Wl,pathRectangle:()=>VQ,pathRender:()=>zu,pathSymbols:()=>AQ,pathTrail:()=>NQ,peek:()=>je,point:()=>$7,projection:()=>dp,quantileLogNormal:()=>jv,quantileNormal:()=>Fd,quantileUniform:()=>Yv,quantiles:()=>Tv,quantizeInterpolator:()=>jy,quarter:()=>DH,quartiles:()=>Iv,random:()=>Qi,randomInteger:()=>r9e,randomKDE:()=>Pv,randomLCG:()=>n9e,randomLogNormal:()=>GL,randomMixture:()=>WL,randomNormal:()=>Ov,randomUniform:()=>YL,read:()=>RL,regressionConstant:()=>Xv,regressionExp:()=>QL,regressionLinear:()=>Kv,regressionLoess:()=>JL,regressionLog:()=>XL,regressionPoly:()=>ZL,regressionPow:()=>KL,regressionQuad:()=>Zv,renderModule:()=>B7,repeat:()=>Y5,resetDefaultLocale:()=>HW,resetSVGClipId:()=>kQ,resetSVGDefIds:()=>$xe,responseType:()=>FL,runtimeContext:()=>RC,sampleCurve:()=>lu,sampleLogNormal:()=>$v,sampleNormal:()=>Td,sampleUniform:()=>qv,scale:()=>ft,sceneEqual:()=>DN,sceneFromJSON:()=>XQ,scenePickVisit:()=>ix,sceneToJSON:()=>YQ,sceneVisit:()=>N2,sceneZOrder:()=>rN,scheme:()=>C7,serializeXML:()=>dK,setHybridRendererOptions:()=>Fxe,setRandom:()=>e9e,span:()=>Xs,splitAccessPath:()=>ko,stringValue:()=>Z,textMetrics:()=>H1,timeBin:()=>DL,timeFloor:()=>CL,timeFormatLocale:()=>Ml,timeInterval:()=>ec,timeOffset:()=>ML,timeSequence:()=>SL,timeUnitSpecifier:()=>hL,timeUnits:()=>Cv,toBoolean:()=>id,toDate:()=>od,toNumber:()=>Bn,toSet:()=>dr,toString:()=>ad,transform:()=>BL,transforms:()=>ic,truncate:()=>FH,truthy:()=>fr,tupleid:()=>De,typeParsers:()=>_L,utcFloor:()=>bL,utcInterval:()=>tc,utcOffset:()=>wL,utcSequence:()=>EL,utcdayofyear:()=>yL,utcquarter:()=>zH,utcweek:()=>xL,version:()=>JAe,visitArray:()=>Qs,week:()=>vL,writeConfig:()=>Ys,zero:()=>w2,zoomLinear:()=>K5,zoomLog:()=>Z5,zoomPow:()=>G6,zoomSymlog:()=>J5});function yi(e,t,n){return e.fields=t||[],e.fname=n,e}function un(e){return e==null?null:e.fname}function ur(e){return e==null?null:e.fields}function dG(e){return e.length===1?j7e(e[0]):q7e(e)}var j7e=e=>function(t){return t[e]},q7e=e=>{let t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function B(e){throw Error(e)}function ko(e){let t=[],n=e.length,r=null,i=0,o="",a,s,c;e=e+"";function l(){t.push(o+e.substring(a,s)),o="",a=s+1}for(a=s=0;s<n;++s)if(c=e[s],c==="\\")o+=e.substring(a,s++),a=s;else if(c===r)l(),r=null,i=-1;else{if(r)continue;a===i&&c==='"'||a===i&&c==="'"?(a=s+1,r=c):c==="."&&!i?s>a?l():a=s+1:c==="["?(s>a&&l(),i=a=s+1):c==="]"&&(i||B("Access path missing open bracket: "+e),i>0&&l(),i=0,a=s+1)}return i&&B("Access path missing closing bracket: "+e),r&&B("Access path missing closing quote: "+e),s>a&&(s++,l()),t}function wr(e,t,n){let r=ko(e);return e=r.length===1?r[0]:e,yi((n&&n.get||dG)(r),[e],t||e)}var q6=wr("id"),An=yi(e=>e,[],"identity"),w2=yi(()=>0,[],"zero"),Ta=yi(()=>1,[],"one"),fr=yi(()=>!0,[],"true"),Ws=yi(()=>!1,[],"false");function G7e(e,t,n){let r=[t].concat([].slice.call(n));console[e].apply(console,r)}var pG=0,X5=1,iv=2,CH=3,bH=4;function Q5(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:G7e,r=e||pG;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=X5&&n(t||"error","ERROR",arguments),this},warn(){return r>=iv&&n(t||"warn","WARN",arguments),this},info(){return r>=CH&&n(t||"log","INFO",arguments),this},debug(){return r>=bH&&n(t||"log","DEBUG",arguments),this}}}var F=Array.isArray;function ne(e){return e===Object(e)}var fG=e=>e!=="__proto__";function Ia(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(let o in i)if(o==="signals")r.signals=W7e(r.signals,i.signals);else{let a=o==="legend"?{layout:1}:o==="style"?!0:null;Ys(r,o,i[o],a)}return r},{})}function Ys(e,t,n,r){if(!fG(t))return;let i,o;if(ne(n)&&!F(n)){o=ne(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Ys(o,i,n[i]):fG(i)&&(o[i]=n[i])}else e[t]=n}function W7e(e,t){if(e==null)return t;let n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function je(e){return e[e.length-1]}function Bn(e){return e==null||e===""?null:+e}var hG=e=>t=>e*Math.exp(t),mG=e=>t=>Math.log(e*t),gG=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),vG=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,rv=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function ov(e,t,n,r){let i=n(e[0]),o=n(je(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function MH(e,t){return ov(e,t,Bn,An)}function wH(e,t){var n=Math.sign(e[0]);return ov(e,t,mG(n),hG(n))}function SH(e,t,n){return ov(e,t,rv(n),rv(1/n))}function EH(e,t,n){return ov(e,t,gG(n),vG(n))}function av(e,t,n,r,i){let o=r(e[0]),a=r(je(e)),s=t!=null?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function K5(e,t,n){return av(e,t,n,Bn,An)}function Z5(e,t,n){let r=Math.sign(e[0]);return av(e,t,n,mG(r),hG(r))}function G6(e,t,n,r){return av(e,t,n,rv(r),rv(1/r))}function J5(e,t,n,r){return av(e,t,n,gG(r),vG(r))}function DH(e){return 1+~~(new Date(e).getMonth()/3)}function zH(e){return 1+~~(new Date(e).getUTCMonth()/3)}function te(e){return e!=null?F(e)?e:[e]:[]}function HH(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Te(e){return typeof e=="function"}var Y7e="descending";function ed(e,t,n){n=n||{},t=te(t)||[];let r=[],i=[],o={},a=n.comparator||X7e;return te(e).forEach((s,c)=>{s!=null&&(r.push(t[c]===Y7e?-1:1),i.push(s=Te(s)?s:wr(s,null,n)),(ur(s)||[]).forEach(l=>o[l]=1))}),i.length===0?null:yi(a(i,r),Object.keys(o))}var td=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),X7e=(e,t)=>e.length===1?Q7e(e[0],t[0]):K7e(e,t,e.length),Q7e=(e,t)=>function(n,r){return td(e(n),e(r))*t},K7e=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;a===0&&++s<n;)o=e[s],a=td(o(r),o(i));return a*t[s]});function gn(e){return Te(e)?e:()=>e}function nd(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function _e(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function ji(e,t){let n=0,r,i,o,a;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=a=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>a&&(a=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=a=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>a&&(a=i))}return[o,a]}function LH(e,t){let n=e.length,r=-1,i,o,a,s,c;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=c=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,c=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=c=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,c=r))}return[s,c]}var Z7e=Object.prototype.hasOwnProperty;function de(e,t){return Z7e.call(e,t)}var nv={};function C3(e){let t={},n;function r(o){return de(t,o)&&t[o]!==nv}let i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,a){return r(o)||(++i.size,t[o]===nv&&--i.empty),t[o]=a,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=nv),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){let o={},a=0;for(let s in t){let c=t[s];c!==nv&&(!n||!n(c))&&(o[s]=c,++a)}i.size=a,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function AH(e,t,n,r,i,o){if(!n&&n!==0)return o;let a=+n,s=e[0],c=je(e),l;c<s&&(l=s,s=c,c=l),l=Math.abs(t-s);let u=Math.abs(c-t);return l<u&&l<=a?r:u<=a?i:o}function ee(e,t,n){let r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),_e(r,n)}function b3(e,t,n,r){let i=t[0],o=t[t.length-1],a;return i>o&&(a=i,i=o,o=a),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function w1(e){return typeof e=="boolean"}function S2(e){return Object.prototype.toString.call(e)==="[object Date]"}function VH(e){return e&&Te(e[Symbol.iterator])}function Pe(e){return typeof e=="number"}function NH(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Q(e){return typeof e=="string"}function rd(e,t,n){e&&(e=t?te(e).map(s=>s.replace(/\\(.)/g,"$1")):te(e));let r=e&&e.length,i=n&&n.get||dG,o=s=>i(t?[s]:ko(s)),a;if(!r)a=function(){return""};else if(r===1){let s=o(e[0]);a=function(c){return""+s(c)}}else{let s=e.map(o);a=function(c){let l=""+s[0](c),u=0;for(;++u<r;)l+="|"+s[u](c);return l}}return yi(a,e,"key")}function _H(e,t){let n=e[0],r=je(e),i=+t;return i?i===1?r:n+i*(r-n):n}var J7e=1e4;function kH(e){e=+e||J7e;let t,n,r,i=()=>{t={},n={},r=0},o=(a,s)=>(++r>e&&(n=t,t={},r=1),t[a]=s);return i(),{clear:i,has:a=>de(t,a)||de(n,a),get:a=>de(t,a)?t[a]:de(n,a)?o(a,n[a]):void 0,set:(a,s)=>de(t,a)?t[a]=s:o(a,s)}}function TH(e,t,n,r){let i=t.length,o=n.length;if(!o)return t;if(!i)return n;let a=r||new t.constructor(i+o),s=0,c=0,l=0;for(;s<i&&c<o;++l)a[l]=e(t[s],n[c])>0?n[c++]:t[s++];for(;s<i;++s,++l)a[l]=t[s];for(;c<o;++c,++l)a[l]=n[c];return a}function Y5(e,t){let n="";for(;--t>=0;)n+=e;return n}function IH(e,t,n,r){let i=n||" ",o=e+"",a=t-o.length;return a<=0?o:r==="left"?Y5(i,a)+o:r==="center"?Y5(i,~~(a/2))+o+Y5(i,Math.ceil(a/2)):o+Y5(i,a)}function Xs(e){return e&&je(e)-e[0]||0}function Z(e){return F(e)?"["+e.map(Z)+"]":ne(e)||Q(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function id(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}var epe=e=>Pe(e)||S2(e)?e:Date.parse(e);function od(e,t){return t=t||epe,e==null||e===""?null:t(e)}function ad(e){return e==null||e===""?null:e+""}function dr(e){let t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function FH(e,t,n,r){let i=r??"\u2026",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:n==="left"?i+o.slice(a-s):n==="center"?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function Qs(e,t,n){if(e)if(t){let r=e.length;for(let i=0;i<r;++i){let o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var yG={},RH={},OH=34,sd=10,PH=13;function CG(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function tpe(e,t){var n=CG(e);return function(r,i){return t(n(r),i,e)}}function xG(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function S1(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function npe(e){return e<0?"-"+S1(-e,6):e>9999?"+"+S1(e,6):S1(e,4)}function rpe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":npe(e.getUTCFullYear(),4)+"-"+S1(e.getUTCMonth()+1,2)+"-"+S1(e.getUTCDate(),2)+(i?"T"+S1(t,2)+":"+S1(n,2)+":"+S1(r,2)+"."+S1(i,3)+"Z":r?"T"+S1(t,2)+":"+S1(n,2)+":"+S1(r,2)+"Z":n||t?"T"+S1(t,2)+":"+S1(n,2)+"Z":"")}function $H(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var p,h,m=i(f,function(g,v){if(p)return p(g,v-1);h=g,p=d?tpe(g,d):CG(g)});return m.columns=h||[],m}function i(f,d){var p=[],h=f.length,m=0,g=0,v,y=h<=0,C=!1;f.charCodeAt(h-1)===sd&&--h,f.charCodeAt(h-1)===PH&&--h;function b(){if(y)return RH;if(C)return C=!1,yG;var S,w=m,E;if(f.charCodeAt(w)===OH){for(;m++<h&&f.charCodeAt(m)!==OH||f.charCodeAt(++m)===OH;);return(S=m)>=h?y=!0:(E=f.charCodeAt(m++))===sd?C=!0:E===PH&&(C=!0,f.charCodeAt(m)===sd&&++m),f.slice(w+1,S-1).replace(/""/g,'"')}for(;m<h;){if((E=f.charCodeAt(S=m++))===sd)C=!0;else if(E===PH)C=!0,f.charCodeAt(m)===sd&&++m;else if(E!==n)continue;return f.slice(w,S)}return y=!0,f.slice(w,h)}for(;(v=b())!==RH;){for(var M=[];v!==yG&&v!==RH;)M.push(v),v=b();d&&(M=d(M,g++))==null||p.push(M)}return p}function o(f,d){return f.map(function(p){return d.map(function(h){return u(p[h])}).join(e)})}function a(f,d){return d==null&&(d=xG(f)),[d.map(u).join(e)].concat(o(f,d)).join(`
`)}function s(f,d){return d==null&&(d=xG(f)),o(f,d).join(`
`)}function c(f){return f.map(l).join(`
`)}function l(f){return f.map(u).join(e)}function u(f){return f==null?"":f instanceof Date?rpe(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:c,formatRow:l,formatValue:u}}function BH(e){return e}function sv(e){if(e==null)return BH;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(s,c){c||(t=n=0);var l=2,u=s.length,f=new Array(u);for(f[0]=(t+=s[0])*r+o,f[1]=(n+=s[1])*i+a;l<u;)f[l]=s[l],++l;return f}}function bG(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function UH(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return MG(e,n)})}:MG(e,t)}function MG(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=cv(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function cv(e,t){var n=sv(e.transform),r=e.arcs;function i(u,f){f.length&&f.pop();for(var d=r[u<0?~u:u],p=0,h=d.length;p<h;++p)f.push(n(d[p],p));u<0&&bG(f,h)}function o(u){return n(u)}function a(u){for(var f=[],d=0,p=u.length;d<p;++d)i(u[d],f);return f.length<2&&f.push(f[0]),f}function s(u){for(var f=a(u);f.length<4;)f.push(f[0]);return f}function c(u){return u.map(s)}function l(u){var f=u.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(l)};case"Point":d=o(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(o);break;case"LineString":d=a(u.arcs);break;case"MultiLineString":d=u.arcs.map(a);break;case"Polygon":d=c(u.arcs);break;case"MultiPolygon":d=u.arcs.map(c);break;default:return null}return{type:f,coordinates:d}}return l(t)}function jH(e,t){var n={},r={},i={},o=[],a=-1;t.forEach(function(l,u){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++a],t[a]=l,t[u]=d)}),t.forEach(function(l){var u=s(l),f=u[0],d=u[1],p,h;if(p=i[f])if(delete i[p.end],p.push(l),p.end=d,h=r[d]){delete r[h.start];var m=h===p?p:p.concat(h);r[m.start=p.start]=i[m.end=h.end]=m}else r[p.start]=i[p.end]=p;else if(p=r[d])if(delete r[p.start],p.unshift(l),p.start=f,h=i[f]){delete i[h.end];var g=h===p?p:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[p.start]=i[p.end]=p;else p=[l],r[p.start=f]=i[p.end=d]=p});function s(l){var u=e.arcs[l<0?~l:l],f=u[0],d;return e.transform?(d=[0,0],u.forEach(function(p){d[0]+=p[0],d[1]+=p[1]})):d=u[u.length-1],l<0?[d,f]:[f,d]}function c(l,u){for(var f in l){var d=l[f];delete u[d.start],delete d.start,delete d.end,d.forEach(function(p){n[p<0?~p:p]=1}),o.push(d)}}return c(i,r),c(r,i),t.forEach(function(l){n[l<0?~l:l]||o.push([l])}),o}function qH(e){return cv(e,wG.apply(this,arguments))}function wG(e,t,n){var r,i,o;if(arguments.length>1)r=ipe(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:jH(e,r)}}function ipe(e,t,n){var r=[],i=[],o;function a(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function s(f){f.forEach(a)}function c(f){f.forEach(s)}function l(f){f.forEach(c)}function u(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(u);break;case"LineString":s(f.arcs);break;case"MultiLineString":case"Polygon":c(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return u(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function xi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function GH(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function to(e){let t,n,r;e.length!==2?(t=xi,n=(s,c)=>xi(e(s),c),r=(s,c)=>e(s)-c):(t=e===xi||e===GH?e:spe,n=e,r=e);function i(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{let f=l+u>>>1;n(s[f],c)<0?l=f+1:u=f}while(l<u)}return l}function o(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{let f=l+u>>>1;n(s[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function a(s,c,l=0,u=s.length){let f=i(s,c,l,u-1);return f>l&&r(s[f-1],c)>-r(s[f],c)?f-1:f}return{left:i,center:a,right:o}}function spe(){return 0}function cd(e){return e===null?NaN:+e}function*SG(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}var EG=to(xi),dl=EG.right,WH=EG.left,cpe=to(cd).center,E2=dl;function YH(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i))}if(n>1)return o/(n-1)}function lv(e,t){let n=YH(e,t);return n&&Math.sqrt(n)}var vn=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){let n=this._partials,r=0;for(let i=0;i<this._n&&i<32;i++){let o=n[i],a=t+o,s=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);s&&(n[r++]=s),t=a}return n[r]=t,this._n=r+1,this}valueOf(){let t=this._partials,n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}};var W6=class extends Map{constructor(t,n=HG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let[r,i]of t)this.set(r,i)}get(t){return super.get(XH(this,t))}has(t){return super.has(XH(this,t))}set(t,n){return super.set(DG(this,t),n)}delete(t){return super.delete(zG(this,t))}},Ks=class extends Set{constructor(t,n=HG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let r of t)this.add(r)}has(t){return super.has(XH(this,t))}add(t){return super.add(DG(this,t))}delete(t){return super.delete(zG(this,t))}};function XH({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function DG({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function zG({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function HG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function uv(e,t){return Array.from(t,n=>e[n])}function LG(e=xi){if(e===xi)return QH;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{let r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function QH(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var lpe=Math.sqrt(50),upe=Math.sqrt(10),fpe=Math.sqrt(2);function fv(e,t,n){let r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=lpe?10:o>=upe?5:o>=fpe?2:1,s,c,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(e*l),c=Math.round(t*l),s/l<e&&++s,c/l>t&&--c,l=-l):(l=Math.pow(10,i)*a,s=Math.round(e/l),c=Math.round(t/l),s*l<e&&++s,c*l>t&&--c),c<s&&.5<=n&&n<2?fv(e,t,n*2):[s,c,l]}function pl(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];let r=t<e,[i,o,a]=r?fv(t,e,n):fv(e,t,n);if(!(o>=i))return[];let s=o-i+1,c=new Array(s);if(r)if(a<0)for(let l=0;l<s;++l)c[l]=(o-l)/-a;else for(let l=0;l<s;++l)c[l]=(o-l)*a;else if(a<0)for(let l=0;l<s;++l)c[l]=(i+l)/-a;else for(let l=0;l<s;++l)c[l]=(i+l)*a;return c}function ld(e,t,n){return t=+t,e=+e,n=+n,fv(e,t,n)[2]}function qi(e,t,n){t=+t,e=+e,n=+n;let r=t<e,i=r?ld(t,e,n):ld(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function To(e,t){let n;if(t===void 0)for(let r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function hl(e,t){let n;if(t===void 0)for(let r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function dv(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?QH:LG(i);r>n;){if(r-n>600){let c=r-n+1,l=t-n+1,u=Math.log(c),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(c-f)/c)*(l-c/2<0?-1:1),p=Math.max(n,Math.floor(t-l*f/c+d)),h=Math.min(r,Math.floor(t+(c-l)*f/c+d));dv(e,t,p,h,i)}let o=e[t],a=n,s=r;for(ud(e,n,t),i(e[r],o)>0&&ud(e,n,r);a<s;){for(ud(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}i(e[n],o)===0?ud(e,n,s):(++s,ud(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function ud(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function ml(e,t,n){if(e=Float64Array.from(SG(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return hl(e);if(t>=1)return To(e);var r,i=(r-1)*t,o=Math.floor(i),a=To(dv(e,o).subarray(0,o+1)),s=hl(e.subarray(o+1));return a+(s-a)*(i-o)}}function fd(e,t,n=cd){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(i-o)}}function pv(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function Y6(e,t){return ml(e,.5,t)}function*ppe(e){for(let t of e)yield*cO(t)}function X6(e){return Array.from(ppe(e))}function Un(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function Q6(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function hv(e,...t){e=new Ks(e),t=t.map(hpe);e:for(let n of e)for(let r of t)if(!r.has(n)){e.delete(n);continue e}return e}function hpe(e){return e instanceof Ks?e:new Ks(e)}function mv(...e){let t=new Ks;for(let n of e)for(let r of n)t.add(r);return t}function AG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function gl(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Fa(e){return e=gl(Math.abs(e)),e?e[1]:NaN}function VG(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function NG(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var mpe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function no(e){if(!(t=mpe.exec(e)))throw new Error("invalid format: "+e);var t;return new gv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}no.prototype=gv.prototype;function gv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}gv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _G(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var KH;function kG(e,t){var n=gl(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(KH=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+gl(e,Math.max(0,t+o-1))[0]}function ZH(e,t){var n=gl(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var JH={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:AG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ZH(e*100,t),r:ZH,s:kG,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function eL(e){return e}var TG=Array.prototype.map,IG=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function dd(e){var t=e.grouping===void 0||e.thousands===void 0?eL:VG(TG.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?eL:NG(TG.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(f){f=no(f);var d=f.fill,p=f.align,h=f.sign,m=f.symbol,g=f.zero,v=f.width,y=f.comma,C=f.precision,b=f.trim,M=f.type;M==="n"?(y=!0,M="g"):JH[M]||(C===void 0&&(C=12),b=!0,M="g"),(g||d==="0"&&p==="=")&&(g=!0,d="0",p="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",w=m==="$"?r:/[%p]/.test(M)?a:"",E=JH[M],D=/[defgprs%]/.test(M);C=C===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function z(H){var j=S,L=w,_,A,T;if(M==="c")L=E(H)+L,H="";else{H=+H;var G=H<0||1/H<0;if(H=isNaN(H)?c:E(Math.abs(H),C),b&&(H=_G(H)),G&&+H==0&&h!=="+"&&(G=!1),j=(G?h==="("?h:s:h==="-"||h==="("?"":h)+j,L=(M==="s"?IG[8+KH/3]:"")+L+(G&&h==="("?")":""),D){for(_=-1,A=H.length;++_<A;)if(T=H.charCodeAt(_),48>T||T>57){L=(T===46?i+H.slice(_+1):H.slice(_))+L,H=H.slice(0,_);break}}}y&&!g&&(H=t(H,1/0));var X=j.length+H.length+L.length,J=X<v?new Array(v-X+1).join(d):"";switch(y&&g&&(H=t(J+H,J.length?v-L.length:1/0),J=""),p){case"<":H=j+H+L+J;break;case"=":H=j+J+H+L;break;case"^":H=J.slice(0,X=J.length>>1)+j+H+L+J.slice(X);break;default:H=J+j+H+L;break}return o(H)}return z.toString=function(){return f+""},z}function u(f,d){var p=l((f=no(f),f.type="f",f)),h=Math.max(-8,Math.min(8,Math.floor(Fa(d)/3)))*3,m=Math.pow(10,-h),g=IG[8+h/3];return function(v){return p(m*v)+g}}return{format:l,formatPrefix:u}}var vv,M3,K6;tL({thousands:",",grouping:[3],currency:["$",""]});function tL(e){return vv=dd(e),M3=vv.format,K6=vv.formatPrefix,vv}function pd(e){return Math.max(0,-Fa(Math.abs(e)))}function hd(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fa(t)/3)))*3-Fa(Math.abs(e)))}function md(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Fa(t)-Fa(e))+1}var nL=new Date,rL=new Date;function Zt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{let a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{let c=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return c;let l;do c.push(l=new Date(+o)),t(o,s),e(o);while(l<o&&o<a);return c},i.filter=o=>Zt(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(nL.setTime(+o),rL.setTime(+a),e(nL),e(rL),Math.floor(n(nL,rL))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}var D2=Zt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);D2.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Zt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):D2);var FG=D2.range;var Ci=Zt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*1e3)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds()),RG=Ci.range;var w3=Zt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getMinutes()),gpe=w3.range,S3=Zt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes()),vpe=S3.range;var E3=Zt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3-e.getMinutes()*6e4)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getHours()),ype=E3.range,D3=Zt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours()),xpe=D3.range;var E1=Zt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1),Cpe=E1.range,Io=Zt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1),bpe=Io.range,yv=Zt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5)),Mpe=yv.range;function xl(e){return Zt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/6048e5)}var Fo=xl(0),Z6=xl(1),PG=xl(2),$G=xl(3),z3=xl(4),BG=xl(5),UG=xl(6),jG=Fo.range,wpe=Z6.range,Spe=PG.range,Epe=$G.range,Dpe=z3.range,zpe=BG.range,Hpe=UG.range;function Cl(e){return Zt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/6048e5)}var Ro=Cl(0),J6=Cl(1),qG=Cl(2),GG=Cl(3),H3=Cl(4),WG=Cl(5),YG=Cl(6),XG=Ro.range,Lpe=J6.range,Ape=qG.range,Vpe=GG.range,Npe=H3.range,_pe=WG.range,kpe=YG.range;var Zs=Zt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),Tpe=Zs.range,Js=Zt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),Ipe=Js.range;var Gi=Zt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Gi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});var Fpe=Gi.range,Wi=Zt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Wi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});var Rpe=Wi.range;function KG(e,t,n,r,i,o){let a=[[Ci,1,1e3],[Ci,5,5*1e3],[Ci,15,15*1e3],[Ci,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[r,1,864e5],[r,2,2*864e5],[n,1,6048e5],[t,1,2592e6],[t,3,3*2592e6],[e,1,31536e6]];function s(l,u,f){let d=u<l;d&&([l,u]=[u,l]);let p=f&&typeof f.range=="function"?f:c(l,u,f),h=p?p.range(l,+u+1):[];return d?h.reverse():h}function c(l,u,f){let d=Math.abs(u-l)/f,p=to(([,,g])=>g).right(a,d);if(p===a.length)return e.every(qi(l/31536e6,u/31536e6,f));if(p===0)return D2.every(Math.max(qi(l,u,f),1));let[h,m]=a[d/a[p-1][2]<a[p][2]/d?p-1:p];return h.every(m)}return[s,c]}var[iL,oL]=KG(Wi,Js,Ro,yv,D3,S3),[aL,sL]=KG(Gi,Zs,Fo,E1,E3,w3);var Sr="year",Yi="quarter",Qr="month",Kn="week",Xi="date",Xr="day",Oa="dayofyear",D1="hours",z1="minutes",ro="seconds",Oo="milliseconds",xv=[Sr,Yi,Qr,Kn,Xi,Xr,Oa,D1,z1,ro,Oo],cL=xv.reduce((e,t,n)=>(e[t]=1+n,e),{});function Cv(e){let t=te(e).slice(),n={};return t.length||B("Missing time unit."),t.forEach(i=>{de(cL,i)?n[i]=1:B(`Invalid time unit: ${i}.`)}),(n[Kn]||n[Xr]?1:0)+(n[Yi]||n[Qr]||n[Xi]?1:0)+(n[Oa]?1:0)>1&&B(`Incompatible time units: ${e}`),t.sort((i,o)=>cL[i]-cL[o]),t}var Ppe={[Sr]:"%Y ",[Yi]:"Q%q ",[Qr]:"%b ",[Xi]:"%d ",[Kn]:"W%U ",[Xr]:"%a ",[Oa]:"%j ",[D1]:"%H:00",[z1]:"00:%M",[ro]:":%S",[Oo]:".%L",[`${Sr}-${Qr}`]:"%Y-%m ",[`${Sr}-${Qr}-${Xi}`]:"%Y-%m-%d ",[`${D1}-${z1}`]:"%H:%M"};function hL(e,t){let n=_e({},Ppe,t),r=Cv(e),i=r.length,o="",a=0,s,c;for(a=0;a<i;)for(s=r.length;s>a;--s)if(c=r.slice(a,s).join("-"),n[c]!=null){o+=n[c],a=s;break}return o.trim()}var bl=new Date;function mL(e){return bl.setFullYear(e),bl.setMonth(0),bl.setDate(1),bl.setHours(0,0,0,0),bl}function gL(e){return eW(new Date(e))}function vL(e){return lL(new Date(e))}function eW(e){return E1.count(mL(e.getFullYear())-1,e)}function lL(e){return Fo.count(mL(e.getFullYear())-1,e)}function uL(e){return mL(e).getDay()}function $pe(e,t,n,r,i,o,a){if(0<=e&&e<100){let s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function yL(e){return tW(new Date(e))}function xL(e){return fL(new Date(e))}function tW(e){let t=Date.UTC(e.getUTCFullYear(),0,1);return Io.count(t-1,e)}function fL(e){let t=Date.UTC(e.getUTCFullYear(),0,1);return Ro.count(t-1,e)}function dL(e){return bl.setTime(Date.UTC(e,0,1)),bl.getUTCDay()}function Bpe(e,t,n,r,i,o,a){if(0<=e&&e<100){let s=new Date(Date.UTC(-1,t,n,r,i,o,a));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(e,t,n,r,i,o,a))}function nW(e,t,n,r,i){let o=t||1,a=je(e),s=(v,y,C)=>(C=C||v,Upe(n[C],r[C],v===a&&o,y)),c=new Date,l=dr(e),u=l[Sr]?s(Sr):gn(2012),f=l[Qr]?s(Qr):l[Yi]?s(Yi):w2,d=l[Kn]&&l[Xr]?s(Xr,1,Kn+Xr):l[Kn]?s(Kn,1):l[Xr]?s(Xr,1):l[Xi]?s(Xi,1):l[Oa]?s(Oa,1):Ta,p=l[D1]?s(D1):w2,h=l[z1]?s(z1):w2,m=l[ro]?s(ro):w2,g=l[Oo]?s(Oo):w2;return function(v){c.setTime(+v);let y=u(c);return i(y,f(c),d(c,y),p(c),h(c),m(c),g(c))}}function Upe(e,t,n,r){let i=n<=1?e:r?(o,a)=>r+n*Math.floor((e(o,a)-r)/n):(o,a)=>n*Math.floor(e(o,a)/n);return t?(o,a)=>t(i(o,a),a):i}function eu(e,t,n){return t+e*7-(n+6)%7}var jpe={[Sr]:e=>e.getFullYear(),[Yi]:e=>Math.floor(e.getMonth()/3),[Qr]:e=>e.getMonth(),[Xi]:e=>e.getDate(),[D1]:e=>e.getHours(),[z1]:e=>e.getMinutes(),[ro]:e=>e.getSeconds(),[Oo]:e=>e.getMilliseconds(),[Oa]:e=>eW(e),[Kn]:e=>lL(e),[Kn+Xr]:(e,t)=>eu(lL(e),e.getDay(),uL(t)),[Xr]:(e,t)=>eu(1,e.getDay(),uL(t))},qpe={[Yi]:e=>3*e,[Kn]:(e,t)=>eu(e,0,uL(t))};function CL(e,t){return nW(e,t||1,jpe,qpe,$pe)}var Gpe={[Sr]:e=>e.getUTCFullYear(),[Yi]:e=>Math.floor(e.getUTCMonth()/3),[Qr]:e=>e.getUTCMonth(),[Xi]:e=>e.getUTCDate(),[D1]:e=>e.getUTCHours(),[z1]:e=>e.getUTCMinutes(),[ro]:e=>e.getUTCSeconds(),[Oo]:e=>e.getUTCMilliseconds(),[Oa]:e=>tW(e),[Kn]:e=>fL(e),[Xr]:(e,t)=>eu(1,e.getUTCDay(),dL(t)),[Kn+Xr]:(e,t)=>eu(fL(e),e.getUTCDay(),dL(t))},Wpe={[Yi]:e=>3*e,[Kn]:(e,t)=>eu(e,0,dL(t))};function bL(e,t){return nW(e,t||1,Gpe,Wpe,Bpe)}var Ype={[Sr]:Gi,[Yi]:Zs.every(3),[Qr]:Zs,[Kn]:Fo,[Xi]:E1,[Xr]:E1,[Oa]:E1,[D1]:E3,[z1]:w3,[ro]:Ci,[Oo]:D2},Xpe={[Sr]:Wi,[Yi]:Js.every(3),[Qr]:Js,[Kn]:Ro,[Xi]:Io,[Xr]:Io,[Oa]:Io,[D1]:D3,[z1]:S3,[ro]:Ci,[Oo]:D2};function ec(e){return Ype[e]}function tc(e){return Xpe[e]}function rW(e,t,n){return e?e.offset(t,n):void 0}function ML(e,t,n){return rW(ec(e),t,n)}function wL(e,t,n){return rW(tc(e),t,n)}function iW(e,t,n,r){return e?e.range(t,n,r):void 0}function SL(e,t,n,r){return iW(ec(e),t,n,r)}function EL(e,t,n,r){return iW(tc(e),t,n,r)}var yd=1e3,xd=yd*60,Cd=xd*60,bv=Cd*24,Qpe=bv*7,ZG=bv*30,pL=bv*365,oW=[Sr,Qr,Xi,D1,z1,ro,Oo],bd=oW.slice(0,-1),Md=bd.slice(0,-1),wd=Md.slice(0,-1),Kpe=wd.slice(0,-1),Zpe=[Sr,Kn],JG=[Sr,Qr],aW=[Sr],vd=[[bd,1,yd],[bd,5,5*yd],[bd,15,15*yd],[bd,30,30*yd],[Md,1,xd],[Md,5,5*xd],[Md,15,15*xd],[Md,30,30*xd],[wd,1,Cd],[wd,3,3*Cd],[wd,6,6*Cd],[wd,12,12*Cd],[Kpe,1,bv],[Zpe,1,Qpe],[JG,1,ZG],[JG,3,3*ZG],[aW,1,pL]];function DL(e){let t=e.extent,n=e.maxbins||40,r=Math.abs(Xs(t))/n,i=to(s=>s[2]).right(vd,r),o,a;return i===vd.length?(o=aW,a=qi(t[0]/pL,t[1]/pL,n)):i?(i=vd[r/vd[i-1][2]<vd[i][2]/r?i-1:i],o=i[0],a=i[1]):(o=oW,a=Math.max(qi(t[0],t[1],n),1)),{units:o,step:a}}function zL(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function HL(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Sd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function tu(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,c=e.shortMonths,l=Ed(i),u=Dd(i),f=Ed(o),d=Dd(o),p=Ed(a),h=Dd(a),m=Ed(s),g=Dd(s),v=Ed(c),y=Dd(c),C={a:G,A:X,b:J,B:Se,c:null,d:dW,e:dW,f:bhe,g:Vhe,G:_he,H:yhe,I:xhe,j:Che,L:vW,m:Mhe,M:whe,p:Ee,q:Xe,Q:mW,s:gW,S:She,u:Ehe,U:Dhe,V:zhe,w:Hhe,W:Lhe,x:null,X:null,y:Ahe,Y:Nhe,Z:khe,"%":hW},b={a:St,A:lt,b:Jt,B:ws,c:null,d:pW,e:pW,f:Rhe,g:Yhe,G:Qhe,H:The,I:Ihe,j:Fhe,L:xW,m:Ohe,M:Phe,p:j0,q:N4,Q:mW,s:gW,S:$he,u:Bhe,U:Uhe,V:jhe,w:qhe,W:Ghe,x:null,X:null,y:Whe,Y:Xhe,Z:Khe,"%":hW},M={a:z,A:H,b:j,B:L,c:_,d:uW,e:uW,f:hhe,g:lW,G:cW,H:fW,I:fW,j:uhe,L:phe,m:lhe,M:fhe,p:D,q:che,Q:ghe,s:vhe,S:dhe,u:rhe,U:ihe,V:ohe,w:nhe,W:ahe,x:A,X:T,y:lW,Y:cW,Z:she,"%":mhe};C.x=S(n,C),C.X=S(r,C),C.c=S(t,C),b.x=S(n,b),b.X=S(r,b),b.c=S(t,b);function S(me,Qe){return function(nt){var oe=[],$r=-1,Ht=0,li=me.length,ui,ha,z8;for(nt instanceof Date||(nt=new Date(+nt));++$r<li;)me.charCodeAt($r)===37&&(oe.push(me.slice(Ht,$r)),(ha=sW[ui=me.charAt(++$r)])!=null?ui=me.charAt(++$r):ha=ui==="e"?" ":"0",(z8=Qe[ui])&&(ui=z8(nt,ha)),oe.push(ui),Ht=$r+1);return oe.push(me.slice(Ht,$r)),oe.join("")}}function w(me,Qe){return function(nt){var oe=Sd(1900,void 0,1),$r=E(oe,me,nt+="",0),Ht,li;if($r!=nt.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(Qe&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(Ht=HL(Sd(oe.y,0,1)),li=Ht.getUTCDay(),Ht=li>4||li===0?J6.ceil(Ht):J6(Ht),Ht=Io.offset(Ht,(oe.V-1)*7),oe.y=Ht.getUTCFullYear(),oe.m=Ht.getUTCMonth(),oe.d=Ht.getUTCDate()+(oe.w+6)%7):(Ht=zL(Sd(oe.y,0,1)),li=Ht.getDay(),Ht=li>4||li===0?Z6.ceil(Ht):Z6(Ht),Ht=E1.offset(Ht,(oe.V-1)*7),oe.y=Ht.getFullYear(),oe.m=Ht.getMonth(),oe.d=Ht.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),li="Z"in oe?HL(Sd(oe.y,0,1)).getUTCDay():zL(Sd(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(li+5)%7:oe.w+oe.U*7-(li+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,HL(oe)):zL(oe)}}function E(me,Qe,nt,oe){for(var $r=0,Ht=Qe.length,li=nt.length,ui,ha;$r<Ht;){if(oe>=li)return-1;if(ui=Qe.charCodeAt($r++),ui===37){if(ui=Qe.charAt($r++),ha=M[ui in sW?Qe.charAt($r++):ui],!ha||(oe=ha(me,nt,oe))<0)return-1}else if(ui!=nt.charCodeAt(oe++))return-1}return oe}function D(me,Qe,nt){var oe=l.exec(Qe.slice(nt));return oe?(me.p=u.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function z(me,Qe,nt){var oe=p.exec(Qe.slice(nt));return oe?(me.w=h.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function H(me,Qe,nt){var oe=f.exec(Qe.slice(nt));return oe?(me.w=d.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function j(me,Qe,nt){var oe=v.exec(Qe.slice(nt));return oe?(me.m=y.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function L(me,Qe,nt){var oe=m.exec(Qe.slice(nt));return oe?(me.m=g.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function _(me,Qe,nt){return E(me,t,Qe,nt)}function A(me,Qe,nt){return E(me,n,Qe,nt)}function T(me,Qe,nt){return E(me,r,Qe,nt)}function G(me){return a[me.getDay()]}function X(me){return o[me.getDay()]}function J(me){return c[me.getMonth()]}function Se(me){return s[me.getMonth()]}function Ee(me){return i[+(me.getHours()>=12)]}function Xe(me){return 1+~~(me.getMonth()/3)}function St(me){return a[me.getUTCDay()]}function lt(me){return o[me.getUTCDay()]}function Jt(me){return c[me.getUTCMonth()]}function ws(me){return s[me.getUTCMonth()]}function j0(me){return i[+(me.getUTCHours()>=12)]}function N4(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var Qe=S(me+="",C);return Qe.toString=function(){return me},Qe},parse:function(me){var Qe=w(me+="",!1);return Qe.toString=function(){return me},Qe},utcFormat:function(me){var Qe=S(me+="",b);return Qe.toString=function(){return me},Qe},utcParse:function(me){var Qe=w(me+="",!0);return Qe.toString=function(){return me},Qe}}}var sW={"-":"",_:" ",0:"0"},Er=/^\s*\d+/,Jpe=/^%/,ehe=/[\\^$*+?|[\]().{}]/g;function Et(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function the(e){return e.replace(ehe,"\\$&")}function Ed(e){return new RegExp("^(?:"+e.map(the).join("|")+")","i")}function Dd(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function nhe(e,t,n){var r=Er.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function rhe(e,t,n){var r=Er.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function ihe(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function ohe(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ahe(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function cW(e,t,n){var r=Er.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function lW(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function she(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function che(e,t,n){var r=Er.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function lhe(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function uW(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function uhe(e,t,n){var r=Er.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function fW(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function fhe(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function dhe(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function phe(e,t,n){var r=Er.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function hhe(e,t,n){var r=Er.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function mhe(e,t,n){var r=Jpe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ghe(e,t,n){var r=Er.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function vhe(e,t,n){var r=Er.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function dW(e,t){return Et(e.getDate(),t,2)}function yhe(e,t){return Et(e.getHours(),t,2)}function xhe(e,t){return Et(e.getHours()%12||12,t,2)}function Che(e,t){return Et(1+E1.count(Gi(e),e),t,3)}function vW(e,t){return Et(e.getMilliseconds(),t,3)}function bhe(e,t){return vW(e,t)+"000"}function Mhe(e,t){return Et(e.getMonth()+1,t,2)}function whe(e,t){return Et(e.getMinutes(),t,2)}function She(e,t){return Et(e.getSeconds(),t,2)}function Ehe(e){var t=e.getDay();return t===0?7:t}function Dhe(e,t){return Et(Fo.count(Gi(e)-1,e),t,2)}function yW(e){var t=e.getDay();return t>=4||t===0?z3(e):z3.ceil(e)}function zhe(e,t){return e=yW(e),Et(z3.count(Gi(e),e)+(Gi(e).getDay()===4),t,2)}function Hhe(e){return e.getDay()}function Lhe(e,t){return Et(Z6.count(Gi(e)-1,e),t,2)}function Ahe(e,t){return Et(e.getFullYear()%100,t,2)}function Vhe(e,t){return e=yW(e),Et(e.getFullYear()%100,t,2)}function Nhe(e,t){return Et(e.getFullYear()%1e4,t,4)}function _he(e,t){var n=e.getDay();return e=n>=4||n===0?z3(e):z3.ceil(e),Et(e.getFullYear()%1e4,t,4)}function khe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Et(t/60|0,"0",2)+Et(t%60,"0",2)}function pW(e,t){return Et(e.getUTCDate(),t,2)}function The(e,t){return Et(e.getUTCHours(),t,2)}function Ihe(e,t){return Et(e.getUTCHours()%12||12,t,2)}function Fhe(e,t){return Et(1+Io.count(Wi(e),e),t,3)}function xW(e,t){return Et(e.getUTCMilliseconds(),t,3)}function Rhe(e,t){return xW(e,t)+"000"}function Ohe(e,t){return Et(e.getUTCMonth()+1,t,2)}function Phe(e,t){return Et(e.getUTCMinutes(),t,2)}function $he(e,t){return Et(e.getUTCSeconds(),t,2)}function Bhe(e){var t=e.getUTCDay();return t===0?7:t}function Uhe(e,t){return Et(Ro.count(Wi(e)-1,e),t,2)}function CW(e){var t=e.getUTCDay();return t>=4||t===0?H3(e):H3.ceil(e)}function jhe(e,t){return e=CW(e),Et(H3.count(Wi(e),e)+(Wi(e).getUTCDay()===4),t,2)}function qhe(e){return e.getUTCDay()}function Ghe(e,t){return Et(J6.count(Wi(e)-1,e),t,2)}function Whe(e,t){return Et(e.getUTCFullYear()%100,t,2)}function Yhe(e,t){return e=CW(e),Et(e.getUTCFullYear()%100,t,2)}function Xhe(e,t){return Et(e.getUTCFullYear()%1e4,t,4)}function Qhe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?H3(e):H3.ceil(e),Et(e.getUTCFullYear()%1e4,t,4)}function Khe(){return"+0000"}function hW(){return"%"}function mW(e){return+e}function gW(e){return Math.floor(+e/1e3)}var nu,ru,Mv,iu,wv;LL({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function LL(e){return nu=tu(e),ru=nu.format,Mv=nu.parse,iu=nu.utcFormat,wv=nu.utcParse,nu}function zd(e){let t={};return n=>t[n]||(t[n]=e(n))}function Zhe(e,t){return n=>{let r=e(n),i=r.indexOf(t);if(i<0)return r;let o=Jhe(r,i),a=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+a}}function Jhe(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function MW(e){let t=zd(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){let i=no(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Zhe(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,a){a=no(a??",f");let s=qi(r,i,o),c=Math.max(Math.abs(r),Math.abs(i)),l;if(a.precision==null)switch(a.type){case"s":return isNaN(l=hd(s,c))||(a.precision=l),n(a,c);case"":case"e":case"g":case"p":case"r":{isNaN(l=md(s,c))||(a.precision=l-(a.type==="e"));break}case"f":case"%":{isNaN(l=pd(s))||(a.precision=l-(a.type==="%")*2);break}}return t(a)}}}var AL;wW();function wW(){return AL=MW({format:M3,formatPrefix:K6})}function SW(e){return MW(dd(e))}function Hd(e){return arguments.length?AL=SW(e):AL}function bW(e,t,n){n=n||{},ne(n)||B(`Invalid time multi-format specifier: ${n}`);let r=t(ro),i=t(z1),o=t(D1),a=t(Xi),s=t(Kn),c=t(Qr),l=t(Yi),u=t(Sr),f=e(n[Oo]||".%L"),d=e(n[ro]||":%S"),p=e(n[z1]||"%I:%M"),h=e(n[D1]||"%I %p"),m=e(n[Xi]||n[Xr]||"%a %d"),g=e(n[Kn]||"%b %d"),v=e(n[Qr]||"%B"),y=e(n[Yi]||"%B"),C=e(n[Sr]||"%Y");return b=>(r(b)<b?f:i(b)<b?d:o(b)<b?p:a(b)<b?h:c(b)<b?s(b)<b?m:g:u(b)<b?l(b)<b?v:y:C)(b)}function EW(e){let t=zd(e.format),n=zd(e.utcFormat);return{timeFormat:r=>Q(r)?t(r):bW(t,ec,r),utcFormat:r=>Q(r)?n(r):bW(n,tc,r),timeParse:zd(e.parse),utcParse:zd(e.utcParse)}}var VL;DW();function DW(){return VL=EW({format:ru,parse:Mv,utcFormat:iu,utcParse:wv})}function zW(e){return EW(tu(e))}function Ml(e){return arguments.length?VL=zW(e):VL}var NL=(e,t)=>_e({},e,t);function Sv(e,t){let n=e?SW(e):Hd(),r=t?zW(t):Ml();return NL(n,r)}function Ld(e,t){let n=arguments.length;return n&&n!==2&&B("defaultLocale expects either zero or two arguments."),n?NL(Hd(e),Ml(t)):NL(Hd(),Ml())}function HW(){return wW(),DW(),Ld()}var eme=/^(data:|([A-Za-z]+:)?\/\/)/,tme=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,nme=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,LW="file://";function rme(e,t){return n=>({options:n||{},sanitize:ome,load:ime,fileAccess:!!t,file:ame(t),http:cme(e)})}function ime(e,t){return Ut(this,null,function*(){let n=yield this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)})}function ome(e,t){return Ut(this,null,function*(){t=_e({},this.options,t);let n=this.fileAccess,r={href:null},i,o,a,s=tme.test(e.replace(nme,""));(e==null||typeof e!="string"||!s)&&B("Sanitize failure, invalid URI: "+Z(e));let c=eme.test(e);return(a=t.baseURL)&&!c&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),o=(i=e.startsWith(LW))||t.mode==="file"||t.mode!=="http"&&!c&&n,i?e=e.slice(LW.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r})}function ame(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):sme}function sme(){return Ut(this,null,function*(){B("No file system access.")})}function cme(e){return e?function(t,n){return Ut(this,null,function*(){let r=_e({},this.options.http,n),i=n&&n.response,o=yield e(t,r);return o.ok?Te(o[i])?o[i]():o.text():B(o.status+""+o.statusText)})}:lme}function lme(){return Ut(this,null,function*(){B("No HTTP fetch method available.")})}var ume=e=>e!=null&&e===e,fme=e=>e==="true"||e==="false"||e===!0||e===!1,dme=e=>!Number.isNaN(Date.parse(e)),VW=e=>!Number.isNaN(+e)&&!(e instanceof Date),pme=e=>VW(e)&&Number.isInteger(+e),_L={boolean:id,integer:Bn,number:Bn,date:od,string:ad,unknown:An},Ev=[fme,pme,VW,dme],hme=["boolean","integer","number","date"];function NW(e,t){if(!e||!e.length)return"unknown";let n=e.length,r=Ev.length,i=Ev.map((o,a)=>a+1);for(let o=0,a=0,s,c;o<n;++o)for(c=t?e[o][t]:e[o],s=0;s<r;++s)if(i[s]&&ume(c)&&!Ev[s](c)&&(i[s]=0,++a,a===Ev.length))return"string";return hme[i.reduce((o,a)=>o===0?a:o,0)-1]}function _W(e,t){return t.reduce((n,r)=>(n[r]=NW(e,r),n),{})}function AW(e){let t=function(n,r){let i={delimiter:e};return kL(n,r?_e(r,i):i)};return t.responseType="text",t}function kL(e,t){return t.header&&(e=t.header.map(Z).join(t.delimiter)+`
`+e),$H(t.delimiter).parse(e+"")}kL.responseType="text";function mme(e){return typeof Buffer=="function"&&Te(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function TL(e,t){let n=t&&t.property?wr(t.property):An;return ne(e)&&!mme(e)?gme(n(e),t):n(JSON.parse(e))}TL.responseType="json";function gme(e,t){return!F(e)&&VH(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}var vme={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function kW(e,t){let n,r,i,o;return e=TL(e,t),t&&t.feature?(n=UH,i=t.feature):t&&t.mesh?(n=qH,i=t.mesh,o=vme[t.filter]):B("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):B("Invalid TopoJSON object: "+i),r&&r.features||[r]}kW.responseType="json";var Dv={dsv:kL,csv:AW(","),tsv:AW("	"),json:TL,topojson:kW};function IL(e,t){return arguments.length>1?(Dv[e]=t,this):de(Dv,e)?Dv[e]:null}function FL(e){let t=IL(e);return t&&t.responseType||"text"}function RL(e,t,n,r){t=t||{};let i=IL(t.type||"json");return i||B("Unknown data format type: "+t.type),e=i(e,t),t.parse&&yme(e,t.parse,n,r),de(e,"columns")&&delete e.columns,e}function yme(e,t,n,r){if(!e.length)return;let i=Ml();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),a,s,c,l,u,f;t==="auto"&&(t=_W(e,o)),o=Object.keys(t);let d=o.map(p=>{let h=t[p],m,g;if(h&&(h.startsWith("date:")||h.startsWith("utc:")))return m=h.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!_L[h])throw Error("Illegal format pattern: "+p+":"+h);return _L[h]});for(c=0,u=e.length,f=o.length;c<u;++c)for(a=e[c],l=0;l<f;++l)s=o[l],a[s]=d[l](a[s])}var ou=rme(typeof fetch<"u"&&fetch,null);function Av(e){let t=e||An,n=[],r={};return n.add=i=>{let o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{let o=t(i);if(r[o]){r[o]=0;let a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}function Nd(e,t){return Ut(this,null,function*(){try{yield t(e)}catch(n){e.error(n)}})}var $W=Symbol("vega_id"),xme=1;function wl(e){return!!(e&&De(e))}function De(e){return e[$W]}function BW(e,t){return e[$W]=t,e}function ct(e){let t=e===Object(e)?e:{data:e};return De(t)?t:BW(t,xme++)}function Vv(e){return Sl(e,ct({}))}function Sl(e,t){for(let n in e)t[n]=e[n];return t}function Nv(e,t){return BW(t,De(e))}function $a(e,t){return e?t?(n,r)=>e(n,r)||De(t(n))-De(t(r)):(n,r)=>e(n,r)||De(n)-De(r):null}function PL(e){return e&&e.constructor===oc}function oc(){let e=[],t=[],n=[],r=[],i=[],o=null,a=!1;return{constructor:oc,insert(s){let c=te(s),l=c.length;for(let u=0;u<l;++u)e.push(c[u]);return this},remove(s){let c=Te(s)?r:t,l=te(s),u=l.length;for(let f=0;f<u;++f)c.push(l[f]);return this},modify(s,c,l){let u={field:c,value:gn(l)};return Te(s)?(u.filter=s,i.push(u)):(u.tuple=s,n.push(u)),this},encode(s,c){return Te(s)?i.push({filter:s,field:c}):n.push({tuple:s,field:c}),this},clean(s){return o=s,this},reflow(){return a=!0,this},pulse(s,c){let l={},u={},f,d,p,h,m,g;for(f=0,d=c.length;f<d;++f)l[De(c[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[De(m)]=-1;for(f=0,d=r.length;f<d;++f)h=r[f],c.forEach(y=>{h(y)&&(l[De(y)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=De(m),l[g]?l[g]=1:s.add.push(ct(e[f]));for(f=0,d=c.length;f<d;++f)m=c[f],l[De(m)]<0&&s.rem.push(m);function v(y,C,b){b?y[C]=b(y):s.encode=C,a||(u[De(y)]=y)}for(f=0,d=n.length;f<d;++f)p=n[f],m=p.tuple,h=p.field,g=l[De(m)],g>0&&(v(m,h,p.value),s.modifies(h));for(f=0,d=i.length;f<d;++f)p=i[f],h=p.filter,c.forEach(y=>{h(y)&&l[De(y)]>0&&v(y,p.field,p.value)}),s.modifies(p.field);if(a)s.mod=t.length||r.length?c.filter(y=>l[De(y)]>0):c.slice();else for(g in u)s.mod.push(u[g]);return(o||o==null&&(t.length||r.length))&&s.clean(!0),s}}}var Hv="_:mod:_";function _d(){Object.defineProperty(this,Hv,{writable:!0,value:{}})}_d.prototype={set(e,t,n,r){let i=this,o=i[e],a=i[Hv];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=F(n)?1+n.length:-1),i},modified(e,t){let n=this[Hv];if(arguments.length){if(F(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(let r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[Hv]={},this}};var Cme=0,bme="pulse",Mme=new _d,wme=1,Sme=2;function Tt(e,t,n,r){this.id=++Cme,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function TW(e){return function(t){let n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Tt.prototype={targets(){return this._targets||(this._targets=Av(q6))},set(e){return this.value!==e?(this.value=e,1):0},skip:TW(wme),modified:TW(Sme),parameters(e,t,n){t=t!==!1;let r=this._argval=this._argval||new _d,i=this._argops=this._argops||[],o=[],a,s,c,l,u=(f,d,p)=>{p instanceof Tt?(p!==this&&(t&&p.targets().add(this),o.push(p)),i.push({op:p,name:f,index:d})):r.set(f,d,p)};for(a in e)if(s=e[a],a===bme)te(s).forEach(f=>{f instanceof Tt?f!==this&&(f.targets().add(this),o.push(f)):B("Pulse parameters must be operator instances.")}),this.source=s;else if(F(s))for(r.set(a,-1,Array(c=s.length)),l=0;l<c;++l)u(a,l,s[l]);else u(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){let t=this._argval||Mme,n=this._argops,r,i,o,a;if(n){let s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){let e=this._argops,t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){let t=this._update;if(t){let n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Eme(e,t,n,r){let i=1,o;return e instanceof Tt?o=e:e&&e.prototype instanceof Tt?o=new e:Te(e)?o=new Tt(null,e):(i=0,o=new Tt(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function Dme(e,t){let n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}var zme=0;function su(e,t,n){this.id=++zme,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function L3(e,t,n){return new su(e,t,n)}su.prototype={_filter:fr,_apply:An,targets(){return this._targets||(this._targets=Av(q6))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){let t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){let t=L3(e);return this.targets().add(t),t},apply(e){let t=L3(null,e);return this.targets().add(t),t},merge(){let e=L3();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{let n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){let t=L3();return this.targets().add(L3(null,null,nd(e,n=>{let r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(L3(null,null,()=>n=!0)),t.targets().add(L3(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=fr,this._targets=null}};function Hme(e,t,n,r){let i=this,o=L3(n,r),a=function(l){l.dataflow=i;try{o.receive(l)}catch(u){i.error(u)}finally{i.run()}},s;typeof e=="string"&&typeof document<"u"?s=document.querySelectorAll(e):s=te(e);let c=s.length;for(let l=0;l<c;++l)s[l].addEventListener(t,a);return o}function Lme(e,t){let n=this.locale();return RL(e,t,n.timeParse,n.utcParse)}function Ame(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}function Vme(e,t){return Ut(this,null,function*(){let n=this,r=0,i;try{i=yield n.loader().load(e,{context:"dataflow",response:FL(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}})}function Nme(e,t,n){return Ut(this,null,function*(){let r=this,i=r._pending||_me(r);i.requests+=1;let o=yield r.request(t,n);return r.pulse(e,r.changeset().remove(fr).insert(o.data||[])),i.done(),o})}function _me(e){let t,n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}var kme={skip:!0};function Tme(e,t,n,r,i){return(e instanceof Tt?Fme:Ime)(this,e,t,n,r,i),this}function Ime(e,t,n,r,i,o){let a=_e({},o,kme),s,c;Te(n)||(n=gn(n)),r===void 0?s=l=>e.touch(n(l)):Te(r)?(c=new Tt(null,r,i,!1),s=l=>{c.evaluate(l);let u=n(l),f=c.value;PL(f)?e.pulse(u,f,o):e.update(u,f,a)}):s=l=>e.update(n(l),r,a),t.apply(s)}function Fme(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{let a=o||{},s=new Tt(null,Rme(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}function Rme(e,t){return t=Te(t)?t:gn(t),e?function(n,r){let i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function Ome(e){e.rank=++this._rank}function Pme(e){let t=[e],n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&B("Cycle detected in dataflow graph.")}var Lv={},Pa=1,A3=2,nc=4,$me=Pa|A3,IW=Pa|nc,au=Pa|A3|nc,FW=8,Ad=16,RW=32,OW=64;function rc(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function OL(e,t){let n=[];return Qs(e,t,r=>n.push(r)),n}function PW(e,t){let n={};return e.visit(t,r=>{n[De(r)]=1}),r=>n[De(r)]?null:r}function zv(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}rc.prototype={StopPropagation:Lv,ADD:Pa,REM:A3,MOD:nc,ADD_REM:$me,ADD_MOD:IW,ALL:au,REFLOW:FW,SOURCE:Ad,NO_SOURCE:RW,NO_FIELDS:OW,fork(e){return new rc(this.dataflow).init(this,e)},clone(){let e=this.fork(au);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(au|Ad)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new rc(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){let n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&OW)&&(n.fields=e.fields),t&Pa?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&A3?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&nc?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&RW?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){let t=e||au;return t&Pa&&this.add.length||t&A3&&this.rem.length||t&nc&&this.mod.length},reflow(e){if(e)return this.fork(au).reflow();let t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(nc,PW(this,Pa))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){let t=this.fields||(this.fields={});return F(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){let n=this.fields;return(t||this.mod.length)&&n?arguments.length?F(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){let n=this;return e&Pa&&(n.addF=zv(n.addF,t)),e&A3&&(n.remF=zv(n.remF,t)),e&nc&&(n.modF=zv(n.modF,t)),e&Ad&&(n.srcF=zv(n.srcF,t)),n},materialize(e){e=e||au;let t=this;return e&Pa&&t.addF&&(t.add=OL(t.add,t.addF),t.addF=null),e&A3&&t.remF&&(t.rem=OL(t.rem,t.remF),t.remF=null),e&nc&&t.modF&&(t.mod=OL(t.mod,t.modF),t.modF=null),e&Ad&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){let n=this,r=t;if(e&Ad)return Qs(n.source,n.srcF,r),n;e&Pa&&Qs(n.add,n.addF,r),e&A3&&Qs(n.rem,n.remF,r),e&nc&&Qs(n.mod,n.modF,r);let i=n.source;if(e&FW&&i){let o=n.add.length+n.mod.length;o===i.length||(o?Qs(i,PW(n,IW),r):Qs(i,n.srcF,r))}return n}};function _v(e,t,n,r){let i=this,o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(let a of n)if(a.stamp===t){if(a.fields){let s=i.fields||(i.fields={});for(let c in a.fields)s[c]=1}a.changed(i.ADD)&&(o|=i.ADD),a.changed(i.REM)&&(o|=i.REM),a.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}ee(_v,rc,{fork(e){let t=new rc(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){let t=this,n=t.fields;return n&&t.changes&t.MOD?F(e)?e.some(r=>n[r]):n[e]:0},filter(){B("MultiPulse does not support filtering.")},materialize(){B("MultiPulse does not support materialization.")},visit(e,t){let n=this,r=n.pulses,i=r.length,o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});function Bme(e,t,n){return Ut(this,null,function*(){let r=this,i=[];if(r._pulse)return UW(r);if(r._pending&&(yield r._pending),t&&(yield Nd(r,t)),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;let o=++r._clock;r._pulse=new rc(r,o,e),r._touched.forEach(u=>r._enqueue(u,!0)),r._touched=Av(q6);let a=0,s,c,l;try{for(;r._heap.size()>0;){if(s=r._heap.pop(),s.rank!==s.qrank){r._enqueue(s,!0);continue}c=s.run(r._getPulse(s,e)),c.then?c=yield c:c.async&&(i.push(c.async),c=Lv),c!==Lv&&s._targets&&s._targets.forEach(u=>r._enqueue(u)),++a}}catch(u){r._heap.clear(),l=u}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${a} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){let u=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<u.length;++f)yield Nd(r,u[f].callback)}return n&&(yield Nd(r,n)),i.length&&Promise.all(i).then(u=>r.runAsync(null,()=>{u.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r})}function Ume(e,t,n){return Ut(this,null,function*(){for(;this._running;)yield this._running;let r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running})}function jme(e,t,n){return this._pulse?UW(this):(this.evaluate(e,t,n),this)}function qme(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function UW(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Gme(e,t){let n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Wme(e,t){let n=e.source,r=this._clock;return n&&F(n)?new _v(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Yme(this._pulse,n&&n.pulse)}function Yme(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Lv&&(e.source=t.source),e)}var $L={skip:!1,force:!1};function Xme(e,t){let n=t||$L;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Qme(e,t,n){let r=n||$L;return(e.set(t)||r.force)&&this.touch(e,r),this}function Kme(e,t,n){this.touch(e,n||$L);let r=new rc(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Zme(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),jW(t,0,t.length-1,e)),pop:()=>{let n=t.pop(),r;return t.length?(r=t[0],t[0]=n,Jme(t,0,e)):r=n,r}}}function jW(e,t,n,r){let i,o,a=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(a,i)<0){e[n]=i,n=o;continue}break}return e[n]=a}function Jme(e,t,n){let r=t,i=e.length,o=e[t],a=(t<<1)+1,s;for(;a<i;)s=a+1,s<i&&n(e[a],e[s])>=0&&(a=s),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=o,jW(e,r,t,n)}function V3(){this.logger(Q5()),this.logLevel(X5),this._clock=0,this._rank=0,this._locale=Ld();try{this._loader=ou()}catch{}this._touched=Av(q6),this._input={},this._pulse=null,this._heap=Zme((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Vd(e){return function(){return this._log[e].apply(this,arguments)}}V3.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Vd("error"),warn:Vd("warn"),info:Vd("info"),debug:Vd("debug"),logLevel:Vd("level"),cleanThreshold:1e4,add:Eme,connect:Dme,rank:Ome,rerank:Pme,pulse:Kme,touch:Xme,update:Qme,changeset:oc,ingest:Ame,parse:Lme,preload:Nme,request:Vme,events:Hme,on:Tme,evaluate:Bme,run:jme,runAsync:Ume,runAfter:qme,_enqueue:Gme,_getPulse:Wme};function $(e,t){Tt.call(this,e,null,t)}ee($,Tt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){let t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});var ic={};function kv(e){let t=BL(e);return t&&t.Definition||null}function BL(e){return e=e&&e.toLowerCase(),de(ic,e)?ic[e]:null}var HA={};xr(HA,{aggregate:()=>N3,bin:()=>iA,collect:()=>oA,compare:()=>nY,countpattern:()=>aA,cross:()=>sA,density:()=>cA,dotbin:()=>uA,expression:()=>sY,extent:()=>fA,facet:()=>ey,field:()=>cY,filter:()=>pA,flatten:()=>hA,fold:()=>mA,formula:()=>gA,generate:()=>lY,impute:()=>vA,joinaggregate:()=>yA,kde:()=>xA,key:()=>uY,load:()=>fY,lookup:()=>CA,multiextent:()=>dY,multivalues:()=>pY,params:()=>hY,pivot:()=>bA,prefacet:()=>mY,project:()=>MA,proxy:()=>gY,quantile:()=>wA,relay:()=>vY,sample:()=>SA,sequence:()=>EA,sieve:()=>yY,subflow:()=>dA,timeunit:()=>DA,tupleindex:()=>CY,values:()=>bY,window:()=>zA});function*WW(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Tv(e,t,n){let r=Float64Array.from(WW(e,n));return r.sort(xi),t.map(i=>fd(r,i))}function Iv(e,t){return Tv(e,[.25,.5,.75],t)}function Fv(e,t){let n=e.length,r=lv(e,t),i=Iv(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function UL(e){let t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2],o=e.extent[0],a=e.extent[1],s,c,l,u,f,d,p=e.span||a-o||Math.abs(o)||1;if(e.step)s=e.step;else if(e.steps){for(u=p/t,f=0,d=e.steps.length;f<d&&e.steps[f]<u;++f);s=e.steps[Math.max(0,f-1)]}else{for(c=Math.ceil(Math.log(t)/r),l=e.minstep||0,s=Math.max(l,Math.pow(n,Math.round(Math.log(p)/r)-c));Math.ceil(p/s)>t;)s*=n;for(f=0,d=i.length;f<d;++f)u=s/i[f],u>=l&&p/u<=t&&(s=u)}u=Math.log(s);let h=u>=0?0:~~(-u/r)+1,m=Math.pow(n,-h-1);return(e.nice||e.nice===void 0)&&(u=Math.floor(o/s+m)*s,o=o<u?u-s:u,a=Math.ceil(a/s)*s),{start:o,stop:a===o?o+s:a,step:s}}var Qi=Math.random;function e9e(e){Qi=e}function jL(e,t,n,r){if(!e.length)return[void 0,void 0];let i=Float64Array.from(WW(e,r)),o=i.length,a=t,s,c,l,u;for(l=0,u=Array(a);l<a;++l){for(s=0,c=0;c<o;++c)s+=i[~~(Qi()*o)];u[l]=s/o}return u.sort(xi),[ml(u,n/2),ml(u,1-n/2)]}function qL(e,t,n,r){r=r||(d=>d);let i=e.length,o=new Float64Array(i),a=0,s=1,c=r(e[0]),l=c,u=c+t,f;for(;s<i;++s){if(f=r(e[s]),f>=u){for(l=(c+l)/2;a<s;++a)o[a]=l;u=f+t,c=f}l=f}for(l=(c+l)/2;a<s;++a)o[a]=l;return n?t9e(o,t+t/4):o}function t9e(e,t){let n=e.length,r=0,i=1,o,a;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(a=i+(r+o-i-i>>1);a<i;)e[a++]=e[i];for(;a>i;)e[a--]=e[r]}r=i,i=o}return e}function n9e(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function r9e(e,t){t==null&&(t=e,e=0);let n,r,i,o={min(a){return arguments.length?(n=a||0,i=r-n,o):n},max(a){return arguments.length?(r=a||0,i=r-n,o):r},sample(){return n+Math.floor(i*Qi())},pdf(a){return a===Math.floor(a)&&a>=n&&a<r?1/i:0},cdf(a){let s=Math.floor(a);return s<n?0:s>=r?1:(s-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return o.min(e).max(t)}var YW=Math.sqrt(2*Math.PI),i9e=Math.SQRT2,kd=NaN;function Td(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(kd===kd)n=kd,kd=NaN;else{do n=Qi()*2-1,r=Qi()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,kd=r*o}return e+n*t}function Rv(e,t,n){n=n??1;let r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*YW)}function Id(e,t,n){t=t||0,n=n??1;let r=(e-t)/n,i=Math.abs(r),o;if(i>37)o=0;else{let a=Math.exp(-i*i/2),s;i<7.07106781186547?(s=.0352624965998911*i+.700383064443688,s=s*i+6.37396220353165,s=s*i+33.912866078383,s=s*i+112.079291497871,s=s*i+221.213596169931,s=s*i+220.206867912376,o=a*s,s=.0883883476483184*i+1.75566716318264,s=s*i+16.064177579207,s=s*i+86.7807322029461,s=s*i+296.564248779674,s=s*i+637.333633378831,s=s*i+793.826512519948,s=s*i+440.413735824752,o=o/s):(s=i+.65,s=i+4/s,s=i+3/s,s=i+2/s,s=i+1/s,o=a/s/2.506628274631)}return r>0?1-o:o}function Fd(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*i9e*o9e(2*e-1)}function o9e(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Ov(e,t){let n,r,i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>Td(n,r),pdf:o=>Rv(o,n,r),cdf:o=>Id(o,n,r),icdf:o=>Fd(o,n,r)};return i.mean(e).stdev(t)}function Pv(e,t){let n=Ov(),r=0,i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=Fv(e)),i):t},sample(){return e[~~(Qi()*r)]+t*n.sample()},pdf(o){let a=0,s=0;for(;s<r;++s)a+=n.pdf((o-e[s])/t);return a/t/r},cdf(o){let a=0,s=0;for(;s<r;++s)a+=n.cdf((o-e[s])/t);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function $v(e,t){return e=e||0,t=t??1,Math.exp(e+Td()*t)}function Bv(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;let r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*YW*e)}function Uv(e,t,n){return Id(Math.log(e),t,n)}function jv(e,t,n){return Math.exp(Fd(e,t,n))}function GL(e,t){let n,r,i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>$v(n,r),pdf:o=>Bv(o,n,r),cdf:o=>Uv(o,n,r),icdf:o=>jv(o,n,r)};return i.mean(e).stdev(t)}function WL(e,t){let n=0,r;function i(a){let s=[],c=0,l;for(l=0;l<n;++l)c+=s[l]=a[l]==null?1:+a[l];for(l=0;l<n;++l)s[l]/=c;return s}let o={weights(a){return arguments.length?(r=i(t=a||[]),o):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),o.weights(t)):e},sample(){let a=Qi(),s=e[n-1],c=r[0],l=0;for(;l<n-1;c+=r[++l])if(a<c){s=e[l];break}return s.sample()},pdf(a){let s=0,c=0;for(;c<n;++c)s+=r[c]*e[c].pdf(a);return s},cdf(a){let s=0,c=0;for(;c<n;++c)s+=r[c]*e[c].cdf(a);return s},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function qv(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Qi()}function Gv(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Wv(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Yv(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function YL(e,t){let n,r,i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>qv(n,r),pdf:o=>Gv(o,n,r),cdf:o=>Wv(o,n,r),icdf:o=>Yv(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Xv(e,t,n){let r=0,i=0;for(let o of e){let a=n(o);t(o)==null||a==null||isNaN(a)||(r+=(a-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Rd(e,t,n,r){let i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function Qv(e,t,n,r){e=e.filter(p=>{let h=t(p),m=n(p);return h!=null&&(h=+h)>=h&&m!=null&&(m=+m)>=m}),r&&e.sort((p,h)=>t(p)-t(h));let i=e.length,o=new Float64Array(i),a=new Float64Array(i),s=0,c=0,l=0,u,f,d;for(d of e)o[s]=u=+t(d),a[s]=f=+n(d),++s,c+=(u-c)/s,l+=(f-l)/s;for(s=0;s<i;++s)o[s]-=c,a[s]-=l;return[o,a,c,l]}function Od(e,t,n,r){let i=-1,o,a;for(let s of e)o=t(s),a=n(s),o!=null&&(o=+o)>=o&&a!=null&&(a=+a)>=a&&r(o,a,++i)}function cu(e,t,n,r,i){let o=0,a=0;return Od(e,t,n,(s,c)=>{let l=c-i(s),u=c-r;o+=l*l,a+=u*u}),1-o/a}function Kv(e,t,n){let r=0,i=0,o=0,a=0,s=0;Od(e,t,n,(u,f)=>{++s,r+=(u-r)/s,i+=(f-i)/s,o+=(u*f-o)/s,a+=(u*u-a)/s});let c=Rd(r,i,o,a),l=u=>c[0]+c[1]*u;return{coef:c,predict:l,rSquared:cu(e,t,n,i,l)}}function XL(e,t,n){let r=0,i=0,o=0,a=0,s=0;Od(e,t,n,(u,f)=>{++s,u=Math.log(u),r+=(u-r)/s,i+=(f-i)/s,o+=(u*f-o)/s,a+=(u*u-a)/s});let c=Rd(r,i,o,a),l=u=>c[0]+c[1]*Math.log(u);return{coef:c,predict:l,rSquared:cu(e,t,n,i,l)}}function QL(e,t,n){let[r,i,o,a]=Qv(e,t,n),s=0,c=0,l=0,u=0,f=0,d,p,h;Od(e,t,n,(y,C)=>{d=r[f++],p=Math.log(C),h=d*C,s+=(C*p-s)/f,c+=(h-c)/f,l+=(h*p-l)/f,u+=(d*h-u)/f});let[m,g]=Rd(c/a,s/a,l/a,u/a),v=y=>Math.exp(m+g*(y-o));return{coef:[Math.exp(m-g*o),g],predict:v,rSquared:cu(e,t,n,a,v)}}function KL(e,t,n){let r=0,i=0,o=0,a=0,s=0,c=0;Od(e,t,n,(f,d)=>{let p=Math.log(f),h=Math.log(d);++c,r+=(p-r)/c,i+=(h-i)/c,o+=(p*h-o)/c,a+=(p*p-a)/c,s+=(d-s)/c});let l=Rd(r,i,o,a),u=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:u,rSquared:cu(e,t,n,s,u)}}function Zv(e,t,n){let[r,i,o,a]=Qv(e,t,n),s=r.length,c=0,l=0,u=0,f=0,d=0,p,h,m,g;for(p=0;p<s;)h=r[p],m=i[p++],g=h*h,c+=(g-c)/p,l+=(g*h-l)/p,u+=(g*g-u)/p,f+=(h*m-f)/p,d+=(g*m-d)/p;let v=u-c*c,y=c*v-l*l,C=(d*c-f*l)/y,b=(f*v-d*l)/y,M=-C*c,S=w=>(w=w-o,C*w*w+b*w+M+a);return{coef:[M-b*o+C*o*o+a,b-2*C*o,C],predict:S,rSquared:cu(e,t,n,a,S)}}function ZL(e,t,n,r){if(r===0)return Xv(e,t,n);if(r===1)return Kv(e,t,n);if(r===2)return Zv(e,t,n);let[i,o,a,s]=Qv(e,t,n),c=i.length,l=[],u=[],f=r+1,d,p,h,m,g;for(d=0;d<f;++d){for(h=0,m=0;h<c;++h)m+=Math.pow(i[h],d)*o[h];for(l.push(m),g=new Float64Array(f),p=0;p<f;++p){for(h=0,m=0;h<c;++h)m+=Math.pow(i[h],d+p);g[p]=m}u.push(g)}u.push(l);let v=s9e(u),y=C=>{C-=a;let b=s+v[0]+v[1]*C+v[2]*C*C;for(d=3;d<f;++d)b+=v[d]*Math.pow(C,d);return b};return{coef:a9e(f,v,-a,s),predict:y,rSquared:cu(e,t,n,s,y)}}function a9e(e,t,n,r){let i=Array(e),o,a,s,c;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],c=1,i[o]+=s,a=1;a<=o;++a)c*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*c;return i[0]+=r,i}function s9e(e){let t=e.length-1,n=[],r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}var qW=2,GW=1e-12;function JL(e,t,n,r){let[i,o,a,s]=Qv(e,t,n,!0),c=i.length,l=Math.max(2,~~(r*c)),u=new Float64Array(c),f=new Float64Array(c),d=new Float64Array(c).fill(1);for(let p=-1;++p<=qW;){let h=[0,l-1];for(let g=0;g<c;++g){let v=i[g],y=h[0],C=h[1],b=v-i[y]>i[C]-v?y:C,M=0,S=0,w=0,E=0,D=0,z=1/Math.abs(i[b]-v||1);for(let L=y;L<=C;++L){let _=i[L],A=o[L],T=c9e(Math.abs(v-_)*z)*d[L],G=_*T;M+=T,S+=G,w+=A*T,E+=A*G,D+=_*G}let[H,j]=Rd(S/M,w/M,E/M,D/M);u[g]=H+j*v,f[g]=Math.abs(o[g]-u[g]),l9e(i,g+1,h)}if(p===qW)break;let m=Y6(f);if(Math.abs(m)<GW)break;for(let g=0,v,y;g<c;++g)v=f[g]/(6*m),d[g]=v>=1?GW:(y=1-v*v)*y}return u9e(i,u,a,s)}function c9e(e){return(e=1-e*e*e)*e*e}function l9e(e,t,n){let r=e[t],i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function u9e(e,t,n,r){let i=e.length,o=[],a=0,s=0,c=[],l;for(;a<i;++a)l=e[a]+n,c[0]===l?c[1]+=(t[a]-c[1])/++s:(s=0,c[1]+=r,c=[l,t[a]],o.push(c));return c[1]+=r,o}var f9e=.5*Math.PI/180;function lu(e,t,n,r){n=n||25,r=Math.max(n,r||200);let i=m=>[m,e(m)],o=t[0],a=t[1],s=a-o,c=s/r,l=[i(o)],u=[];if(n===r){for(let m=1;m<r;++m)l.push(i(o+m/n*s));return l.push(i(a)),l}else{u.push(i(a));for(let m=n;--m>0;)u.push(i(o+m/n*s))}let f=l[0],d=u[u.length-1],p=1/s,h=d9e(f[1],u);for(;d;){let m=i((f[0]+d[0])/2);m[0]-f[0]>=c&&p9e(f,m,d,p,h)>f9e?u.push(m):(f=d,l.push(d),u.pop()),d=u[u.length-1]}return l}function d9e(e,t){let n=e,r=e,i=t.length;for(let o=0;o<i;++o){let a=t[o][1];a<n&&(n=a),a>r&&(r=a)}return 1/(r-n)}function p9e(e,t,n,r,i){let o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),a=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-a)}function h9e(e){return t=>{let n=e.length,r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function nA(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:h9e(e)}function KW(e,t,n){return n||e+(t?"_"+t:"")}var eA=()=>{},m9e={init:eA,add:eA,rem:eA,idx:0},Pd={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Bd=Object.keys(Pd).filter(e=>e!=="__count__");function g9e(e,t){return(n,r)=>_e({name:e,aggregate_param:r,out:n||e},m9e,t)}[...Bd,"__count__"].forEach(e=>{Pd[e]=g9e(e,Pd[e])});function ZW(e,t,n){return Pd[e](n,t)}function JW(e,t){return e.idx-t.idx}function v9e(e){let t={};e.forEach(r=>t[r.name]=r);let n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=Pd[i]())})};return e.forEach(n),Object.values(t).sort(JW)}function y9e(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function x9e(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function C9e(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function b9e(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function eY(e,t){let n=t||An,r=v9e(e),i=e.slice().sort(JW);function o(a){this._ops=r,this._out=i,this.cell=a,this.init()}return o.prototype.init=y9e,o.prototype.add=x9e,o.prototype.rem=C9e,o.prototype.set=b9e,o.prototype.get=n,o.fields=e.map(a=>a.out),o}function rA(e){this._key=e?wr(e):De,this.reset()}var Kr=rA.prototype;Kr.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Kr.add=function(e){this._add.push(e)};Kr.rem=function(e){this._rem.push(e)};Kr.values=function(){if(this._get=null,this._rem.length===0)return this._add;let e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={},s,c,l;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,c=0;s<r;++s)a[n(l=e[s])]?a[n(l)]=0:o[c++]=l;return this._rem=[],this._add=o};Kr.distinct=function(e){let t=this.values(),n={},r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",de(n,o)||(n[o]=1,++i);return i};Kr.extent=function(e){if(this._get!==e||!this._ext){let t=this.values(),n=LH(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Kr.argmin=function(e){return this.extent(e)[0]||{}};Kr.argmax=function(e){return this.extent(e)[1]||{}};Kr.min=function(e){let t=this.extent(e)[0];return t!=null?e(t):void 0};Kr.max=function(e){let t=this.extent(e)[1];return t!=null?e(t):void 0};Kr.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Iv(this.values(),e),this._get=e),this._q};Kr.q1=function(e){return this.quartile(e)[0]};Kr.q2=function(e){return this.quartile(e)[1]};Kr.q3=function(e){return this.quartile(e)[2]};Kr.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=jL(this.values(),1e3,.05,e),this._get=e),this._ci};Kr.ci0=function(e){return this.ci(e)[0]};Kr.ci1=function(e){return this.ci(e)[1]};function N3(e){$.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}N3.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Bd},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ee(N3,$,{transform(e,t){let n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){let e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(s){let c,l,u,f;for(c in s)for(u=s[c].tuple,l=0;l<i;++l)r[l][f=u[n[l]]]=f}o(e._prev),o(t);function a(s,c,l){let u=n[l],f=r[l++];for(let d in f){let p=s?s+"|"+d:d;c[u]=f[d],l<i?a(p,c,l):t[p]||e.cell(p,c)}}a("",{},0)},init(e){let t=this._inputs=[],n=this._outputs=[],r={};function i(y){let C=te(ur(y)),b=C.length,M=0,S;for(;M<b;++M)r[S=C[M]]||(r[S]=1,t.push(S))}this._dims=te(e.groupby),this._dnames=this._dims.map(y=>{let C=un(y);return i(y),n.push(C),C}),this.cellkey=e.key?e.key:nA(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];let o=e.fields||[null],a=e.ops||["count"],s=e.aggregate_params||[null],c=e.as||[],l=o.length,u={},f,d,p,h,m,g,v;for(l!==a.length&&B("Unmatched number of fields and aggregate ops."),v=0;v<l;++v){if(f=o[v],d=a[v],p=s[v]||null,f==null&&d!=="count"&&B("Null aggregate field specified."),m=un(f),g=KW(d,m,c[v]),n.push(g),d==="count"){this._counts.push(g);continue}h=u[m],h||(i(f),h=u[m]=[],h.field=f,this._measures.push(h)),d!=="count"&&(this._countOnly=!1),h.push(ZW(d,p,g))}return this._measures=this._measures.map(y=>eY(y,y.field)),Object.create(null)},cellkey:nA(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){let n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){let r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new rA),n},newtuple(e,t){let n=this._dnames,r=this._dims,i=r.length,o={};for(let a=0;a<i;++a)o[n[a]]=r[a](e);return t?Nv(t.tuple,o):ct(o)},clean(){let e=this.value;for(let t in e)e[t].num===0&&delete e[t]},add(e){let t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);let r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){let t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);let r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){let t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){let r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){let t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod,c,l,u,f;if(r)for(l in r)c=r[l],(!i||c.num)&&a.push(c.tuple);for(u=0,f=this._alen;u<f;++u)o.push(this.celltuple(t[u])),t[u]=null;for(u=0,f=this._mlen;u<f;++u)c=n[u],(c.num===0&&i?a:s).push(this.celltuple(c)),n[u]=null;return this._alen=this._mlen=0,this._prev=null,e}});var M9e=1e-14;function iA(e){$.call(this,null,e)}iA.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ee(iA,$,{transform(e,t){let n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,a=e.as||["bin0","bin1"],s=a[0],c=a[1],l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(ur(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?u=>{let f=r(u);u[s]=f,u[c]=f==null?null:i+o*(1+(f-i)/o)}:u=>u[s]=r(u)),t.modifies(n?a:s)},_bins(e){if(this.value&&!e.modified())return this.value;let t=e.field,n=UL(e),r=n.step,i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,a,s;(a=e.anchor)!=null&&(s=a-(i+r*Math.floor((a-i)/r)),i+=s,o+=s);let c=function(l){let u=Bn(t(l));return u==null?null:u<i?-1/0:u>o?1/0:(u=Math.max(i,Math.min(u,o-r)),i+r*Math.floor(M9e+(u-i)/r))};return c.start=i,c.stop=n.stop,c.step=r,this.value=yi(c,ur(t),e.name||"bin_"+un(t))}});function tY(e,t,n){let r=e,i=t||[],o=n||[],a={},s=0;return{add:c=>o.push(c),remove:c=>a[r(c)]=++s,size:()=>i.length,data:(c,l)=>(s&&(i=i.filter(u=>!a[r(u)]),a={},s=0),l&&c&&i.sort(c),o.length&&(i=c?TH(c,i,o.sort(c)):i.concat(o),o=[]),i)}}function oA(e){$.call(this,[],e)}oA.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ee(oA,$,{transform(e,t){let n=t.fork(t.ALL),r=tY(De,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data($a(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function nY(e){Tt.call(this,null,w9e,e)}ee(nY,Tt);function w9e(e){return this.value&&!e.modified()?this.value:ed(e.fields,e.orders)}function aA(e){$.call(this,null,e)}aA.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function S9e(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ee(aA,$,{transform(e,t){let n=f=>d=>{for(var p=S9e(s(d),e.case,o)||[],h,m=0,g=p.length;m<g;++m)a.test(h=p[m])||f(h)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,c=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),u=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,u)),this._finish(t,c)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){let n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS),s,c,l;for(s in n)c=r[s],l=n[s]||0,!c&&l?(r[s]=c=ct({}),c[i]=s,c[o]=l,a.add.push(c)):l===0?(c&&a.rem.push(c),n[s]=null,r[s]=null):c[o]!==l&&(c[o]=l,a.mod.push(c));return a.modifies(t)}});function sA(e){$.call(this,null,e)}sA.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ee(sA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter"),s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=E9e(s,i,o,e.filter||fr)):n.mod=s,n.source=this.value,n.modifies(r)}});function E9e(e,t,n,r){for(var i=[],o={},a=e.length,s=0,c,l;s<a;++s)for(o[t]=l=e[s],c=0;c<a;++c)o[n]=e[c],r(o)&&(i.push(ct(o)),o={},o[t]=l);return i}var XW={kde:Pv,mixture:WL,normal:Ov,lognormal:GL,uniform:YL},D9e="distributions",QW="function",z9e="field";function rY(e,t){let n=e[QW];de(XW,n)||B("Unknown distribution function: "+n);let r=XW[n]();for(let i in e)i===z9e?r.data((e.from||t()).map(e[i])):i===D9e?r[i](e[i].map(o=>rY(o,t))):typeof r[i]===QW&&r[i](e[i]);return r}function cA(e){$.call(this,null,e)}var iY=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],H9e={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:iY},{name:"weights",type:"number",array:!0}]};cA.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:iY.concat(H9e)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ee(cA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=rY(e.distribution,L9e(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200,a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&B("Invalid density method: "+a),!e.extent&&!r.data&&B("Missing density extent parameter."),a=r[a];let s=e.as||["value","density"],c=e.extent||ji(r.data()),l=lu(a,c,i,o).map(u=>{let f={};return f[s[0]]=u[0],f[s[1]]=u[1],ct(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function L9e(e){return()=>e.materialize(e.SOURCE).source}function oY(e,t){return e?e.map((n,r)=>t[r]||un(n)):null}function lA(e,t,n){let r=[],i=f=>f(c),o,a,s,c,l,u;if(t==null)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)c=e[a],l=t.map(i),u=o[l],u||(o[l]=u=[],u.dims=l,r.push(u)),u.push(n(c));return r}var aY="bin";function uA(e){$.call(this,null,e)}uA.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:aY}]};var A9e=(e,t)=>Xs(ji(e,t))/30;ee(uA,$,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;let n=t.materialize(t.SOURCE).source,r=lA(t.source,e.groupby,An),i=e.smooth||!1,o=e.field,a=e.step||A9e(n,o),s=$a((h,m)=>o(h)-o(m)),c=e.as||aY,l=r.length,u=1/0,f=-1/0,d=0,p;for(;d<l;++d){let h=r[d].sort(s);p=-1;for(let m of qL(h,a,i,o))m<u&&(u=m),m>f&&(f=m),h[++p][c]=m}return this.value={start:u,stop:f,step:a},t.reflow(!0).modifies(c)}});function sY(e){Tt.call(this,null,V9e,e),this.modified(!0)}ee(sY,Tt);function V9e(e){let t=e.expr;return this.value&&!e.modified("expr")?this.value:yi(n=>t(n,e),ur(t),un(t))}function fA(e){$.call(this,[void 0,void 0],e)}fA.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ee(fA,$,{transform(e,t){let n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field"),o=n[0],a=n[1];if((i||o==null)&&(o=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,s=>{let c=Bn(r(s));c!=null&&(c<o&&(o=c),c>a&&(a=c))}),!Number.isFinite(o)||!Number.isFinite(a)){let s=un(r);s&&(s=` for field "${s}"`),t.dataflow.warn(`Infinite extent${s}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}});function dA(e,t){Tt.call(this,e),this.parent=t,this.count=0}ee(dA,Tt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function ey(e){$.call(this,{},e),this._keys=C3();let t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ee(ey,$,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){let i=this.value,o=de(i,e)&&i[e],a,s;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(s=r||(s=this._group[e])&&s.tuple,a=n.dataflow,o=new dA(n.fork(n.NO_SOURCE),this),a.add(o).connect(t(a,e,s)),i[e]=o,this.activate(o)),o},clean(){let e=this.value,t=0;for(let n in e)if(e[n].count===0){let r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){let n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){let t=this._targets,n=t.length,r=e?e.length:0,i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){let n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,a=e.modified("key"),s=c=>this.subflow(c,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,c=>{let l=De(c),u=o.get(l);u!==void 0&&(o.delete(l),s(u).rem(c))}),t.visit(t.ADD,c=>{let l=r(c);o.set(De(c),l),s(l).add(c)}),a||t.modified(r.fields)?t.visit(t.MOD,c=>{let l=De(c),u=o.get(l),f=r(c);u===f?s(f).mod(c):(o.set(l,f),s(u).rem(c),s(f).add(c))}):t.changed(t.MOD)&&t.visit(t.MOD,c=>{s(o.get(De(c))).mod(c)}),a&&t.visit(t.REFLOW,c=>{let l=De(c),u=o.get(l),f=r(c);u!==f&&(o.set(l,f),s(u).rem(c),s(f).add(c))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function cY(e){Tt.call(this,null,N9e,e)}ee(cY,Tt);function N9e(e){return this.value&&!e.modified()?this.value:F(e.name)?te(e.name).map(t=>wr(t)):wr(e.name,e.as)}function pA(e){$.call(this,C3(),e)}pA.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ee(pA,$,{transform(e,t){let n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,c=e.expr,l=!0;t.visit(t.REM,f=>{let d=De(f);r.has(d)?r.delete(d):a.push(f)}),t.visit(t.ADD,f=>{c(f,e)?o.push(f):r.set(De(f),1)});function u(f){let d=De(f),p=c(f,e),h=r.get(d);p&&h?(r.delete(d),o.push(f)):!p&&!h?(r.set(d,1),a.push(f)):l&&p&&!h&&s.push(f)}return t.visit(t.MOD,u),e.modified()&&(l=!1,t.visit(t.REFLOW,u)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function hA(e){$.call(this,[],e)}hA.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ee(hA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=oY(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,s=>{let c=r.map(h=>h(s)),l=c.reduce((h,m)=>Math.max(h,m.length),0),u=0,f,d,p;for(;u<l;++u){for(d=Vv(s),f=0;f<a;++f)d[i[f]]=(p=c[f][u])==null?null:p;o&&(d[o]=u),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function mA(e){$.call(this,[],e)}mA.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ee(mA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(un),o=e.as||["key","value"],a=o[0],s=o[1],c=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let u=0,f;u<c;++u)f=Vv(l),f[a]=i[u],f[s]=r[u](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function gA(e){$.call(this,null,e)}gA.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ee(gA,$,{transform(e,t){let n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,a=>a[r]=n(a,e))}});function lY(e){$.call(this,[],e)}ee(lY,$,{transform(e,t){let n=t.fork(t.ALL),r=e.generator,i=this.value,o=e.size-i.length,a,s,c;if(o>0){for(a=[];--o>=0;)a.push(c=ct(r(e))),i.push(c);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else s=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(s):s,i=i.slice(-o);return n.source=this.value=i,n}});var Jv={value:"value",median:Y6,mean:pv,min:hl,max:To},_9e=[];function vA(e){$.call(this,[],e)}vA.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function k9e(e){var t=e.method||Jv.value,n;if(Jv[t]==null)B("Unrecognized imputation method: "+t);else return t===Jv.value?(n=e.value!==void 0?e.value:0,()=>n):Jv[t]}function T9e(e){let t=e.field;return n=>n?t(n):NaN}ee(vA,$,{transform(e,t){var n=t.fork(t.ALL),r=k9e(e),i=T9e(e),o=un(e.field),a=un(e.key),s=(e.groupby||[]).map(un),c=I9e(t.source,e.groupby,e.key,e.keyvals),l=[],u=this.value,f=c.domain.length,d,p,h,m,g,v,y,C,b,M;for(g=0,C=c.length;g<C;++g)for(d=c[g],h=d.values,p=NaN,y=0;y<f;++y)if(d[y]==null){for(m=c.domain[y],M={_impute:!0},v=0,b=h.length;v<b;++v)M[s[v]]=h[v];M[a]=m,M[o]=Number.isNaN(p)?p=r(d,i):p,l.push(ct(M))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),u.length&&(n.rem=n.materialize(n.REM).rem.concat(u)),this.value=l,n}});function I9e(e,t,n,r){var i=v=>v(g),o=[],a=r?r.slice():[],s={},c={},l,u,f,d,p,h,m,g;for(a.forEach((v,y)=>s[v]=y+1),d=0,m=e.length;d<m;++d)g=e[d],h=n(g),p=s[h]||(s[h]=a.push(h)),u=(l=t?t.map(i):_9e)+"",(f=c[u])||(f=c[u]=[],o.push(f),f.values=l),f[p-1]=g;return o.domain=a,o}function yA(e){N3.call(this,e)}yA.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Bd},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ee(yA,N3,{transform(e,t){let n=this,r=e.modified(),i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{_e(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){let e=this._adds,t=this._mods,n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function xA(e){$.call(this,null,e)}xA.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ee(xA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=lA(r,e.groupby,e.field),o=(e.groupby||[]).map(un),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",c=e.as||["value","density"],l=[],u=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;s!=="pdf"&&s!=="cdf"&&B("Invalid density method: "+s),e.resolve==="shared"&&(u||(u=ji(r,e.field)),f=d=e.steps||d),i.forEach(p=>{let h=Pv(p,a)[s],m=e.counts?p.length:1,g=u||ji(p);lu(h,g,f,d).forEach(v=>{let y={};for(let C=0;C<o.length;++C)y[o[C]]=p.dims[C];y[c[0]]=v[0],y[c[1]]=v[1]*m,l.push(ct(y))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function uY(e){Tt.call(this,null,F9e,e)}ee(uY,Tt);function F9e(e){return this.value&&!e.modified()?this.value:rd(e.fields,e.flat)}function fY(e){$.call(this,[],e),this._pending=null}ee(fY,$,{transform(e,t){let n=t.dataflow;return this._pending?tA(this,t,this._pending):R9e(e)?t.StopPropagation:e.values?tA(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=te(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>tA(this,t,te(r.data)))}});function R9e(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function tA(e,t,n){n.forEach(ct);let r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function CA(e){$.call(this,{},e)}CA.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ee(CA,$,{transform(e,t){let n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,a=e.modified(),s=n.length,c=a?t.SOURCE:t.ADD,l=t,u=e.as,f,d,p;return i?(d=i.length,s>1&&!u&&B('Multi-field lookup requires explicit "as" parameter.'),u&&u.length!==s*d&&B('The "as" parameter has too few output field names.'),u=u||i.map(un),f=function(h){for(var m=0,g=0,v,y;m<s;++m)if(y=r.get(n[m](h)),y==null)for(v=0;v<d;++v,++g)h[u[g]]=o;else for(v=0;v<d;++v,++g)h[u[g]]=i[v](y)}):(u||B("Missing output field names."),f=function(h){for(var m=0,g;m<s;++m)g=r.get(n[m](h)),h[u[m]]=g??o}),a?l=t.reflow(!0):(p=n.some(h=>t.modified(h.fields)),c|=p?t.MOD:0),t.visit(c,f),l.modifies(u)}});function dY(e){Tt.call(this,null,O9e,e)}ee(dY,Tt);function O9e(e){if(this.value&&!e.modified())return this.value;let t=e.extents,n=t.length,r=1/0,i=-1/0,o,a;for(o=0;o<n;++o)a=t[o],a[0]<r&&(r=a[0]),a[1]>i&&(i=a[1]);return[r,i]}function pY(e){Tt.call(this,null,P9e,e)}ee(pY,Tt);function P9e(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function hY(e){$.call(this,null,e)}ee(hY,$,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function bA(e){N3.call(this,e)}bA.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Bd,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ee(bA,N3,{_transform:N3.prototype.transform,transform(e,t){return this._transform($9e(e,t),t)}});function $9e(e,t){let n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=ur(n).concat(ur(r)),a=U9e(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>i),fields:a.map(s=>B9e(s,n,r,o)),as:a.map(s=>s+""),modified:e.modified.bind(e)}}function B9e(e,t,n,r){return yi(i=>t(i)===e?n(i):NaN,r,e+"")}function U9e(e,t,n){let r={},i=[];return n.visit(n.SOURCE,o=>{let a=e(o);r[a]||(r[a]=1,i.push(a))}),i.sort(td),t?i.slice(0,t):i}function mY(e){ey.call(this,e)}ee(mY,ey,{transform(e,t){let n=e.subflow,r=e.field,i=o=>this.subflow(De(o),n,t,o);return(e.modified("field")||r&&t.modified(ur(r)))&&B("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{let a=i(o);r(o).forEach(s=>a.mod(s))}),t.visit(t.ADD,o=>{let a=i(o);r(o).forEach(s=>a.add(ct(s)))}),t.visit(t.REM,o=>{let a=i(o);r(o).forEach(s=>a.rem(s))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function MA(e){$.call(this,null,e)}MA.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ee(MA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=oY(e.fields,e.as||[]),o=r?(s,c)=>j9e(s,c,r,i):Sl,a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,s=>{let c=De(s);n.rem.push(a[c]),a[c]=null}),t.visit(t.ADD,s=>{let c=o(s,ct({}));a[De(s)]=c,n.add.push(c)}),t.visit(t.MOD,s=>{n.mod.push(o(s,a[De(s)]))}),n}});function j9e(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function gY(e){$.call(this,null,e)}ee(gY,$,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function wA(e){$.call(this,null,e)}wA.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};var q9e=1e-14;ee(wA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;let i=t.materialize(t.SOURCE).source,o=lA(i,e.groupby,e.field),a=(e.groupby||[]).map(un),s=[],c=e.step||.01,l=e.probs||Un(c/2,1-q9e,c),u=l.length;return o.forEach(f=>{let d=Tv(f,l);for(let p=0;p<u;++p){let h={};for(let m=0;m<a.length;++m)h[a[m]]=f.dims[m];h[r[0]]=l[p],h[r[1]]=d[p],s.push(ct(h))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}});function vY(e){$.call(this,null,e)}ee(vY,$,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{let o=De(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{let o=Vv(i);r[De(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{let o=r[De(i)];for(let a in i)o[a]=i[a],n.modifies(a);n.mod.push(o)})),n}});function SA(e){$.call(this,[],e),this.count=0}SA.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ee(SA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((u,f)=>(u[De(f)]=1,u),{}),a=this.value,s=this.count,c=0;function l(u){let f,d;a.length<i?a.push(u):(d=~~((s+1)*Qi()),d<a.length&&d>=c&&(f=a[d],o[De(f)]&&n.rem.push(f),a[d]=u)),++s}if(t.rem.length&&(t.visit(t.REM,u=>{let f=De(u);o[f]&&(o[f]=-1,n.rem.push(u)),--s}),a=a.filter(u=>o[De(u)]!==-1)),(t.rem.length||r)&&a.length<i&&t.source&&(c=s=a.length,t.visit(t.SOURCE,u=>{o[De(u)]||l(u)}),c=-1),r&&a.length>i){let u=a.length-i;for(let f=0;f<u;++f)o[De(a[f])]=-1,n.rem.push(a[f]);a=a.slice(u)}return t.mod.length&&t.visit(t.MOD,u=>{o[De(u)]&&n.mod.push(u)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||c<0)&&(n.add=a.filter(u=>!o[De(u)])),this.count=s,this.value=n.source=a,n}});function EA(e){$.call(this,null,e)}EA.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ee(EA,$,{transform(e,t){if(this.value&&!e.modified())return;let n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Un(e.start,e.stop,e.step||1).map(i=>{let o={};return o[r]=i,ct(o)}),n.add=t.add.concat(this.value),n}});function yY(e){$.call(this,null,e),this.modified(!0)}ee(yY,$,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function DA(e){$.call(this,null,e)}var xY=["unit0","unit1"];DA.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:xv,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:xY}]};ee(DA,$,{transform(e,t){let n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),a=(i?tc:ec)(o.unit).offset,s=e.as||xY,c=s[0],l=s[1],u=o.step,f=o.start||1/0,d=o.stop||-1/0,p=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ur(n)))&&(t=t.reflow(!0),p=t.SOURCE,f=1/0,d=-1/0),t.visit(p,h=>{let m=n(h),g,v;m==null?(h[c]=null,r&&(h[l]=null)):(h[c]=g=v=o(m),r&&(h[l]=v=a(g,u)),g<f&&(f=g),v>d&&(d=v))}),o.start=f,o.stop=d,t.modifies(r?s:c)},_floor(e,t){let n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:DL({extent:e.extent||ji(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=Cv(r),a=this.value||{},s=(n?bL:CL)(o,i);return s.unit=je(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}});function CY(e){$.call(this,C3(),e)}ee(CY,$,{transform(e,t){let n=t.dataflow,r=e.field,i=this.value,o=s=>i.set(r(s),s),a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,s=>i.delete(r(s))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function bY(e){$.call(this,null,e)}ee(bY,$,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort($a(e.sort)):t.source).map(e.field))}});function G9e(e,t,n,r){let i=$d[e](t,n);return{init:i.init||w2,update:function(o,a){a[r]=i.next(o)}}}var $d={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{let n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{let n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){let e=$d.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{let n=t.data,r=t.compare,i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||B("ntile num must be greater than zero.");let n=$d.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{let r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{let r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||B("nth_value nth must be greater than zero."),{next:n=>{let r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{let r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{let i=r.data;return r.index<=n?t:(n=W9e(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function W9e(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}var Y9e=Object.keys($d);function MY(e){let t=te(e.ops),n=te(e.fields),r=te(e.params),i=te(e.aggregate_params),o=te(e.as),a=this.outputs=[],s=this.windows=[],c={},l={},u=[],f=[],d=!0;function p(h){te(ur(h)).forEach(m=>c[m]=1)}p(e.sort),t.forEach((h,m)=>{let g=n[m],v=r[m],y=i[m]||null,C=un(g),b=KW(h,C,o[m]);if(p(g),a.push(b),de($d,h))s.push(G9e(h,g,v,b));else{if(g==null&&h!=="count"&&B("Null aggregate field specified."),h==="count"){u.push(b);return}d=!1;let M=l[C];M||(M=l[C]=[],M.field=g,f.push(M)),M.push(ZW(h,y,b))}}),(u.length||f.length)&&(this.cell=X9e(f,u,d)),this.inputs=Object.keys(c)}var wY=MY.prototype;wY.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};wY.update=function(e,t){let n=this.cell,r=this.windows,i=e.data,o=r&&r.length,a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)};function X9e(e,t,n){e=e.map(c=>eY(c,c.field));let r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new rA;return r.add=function(c){if(r.num+=1,!n){s&&s.add(c);for(let l=0;l<i;++l)o[l].add(o[l].get(c),c)}},r.rem=function(c){if(r.num-=1,!n){s&&s.rem(c);for(let l=0;l<i;++l)o[l].rem(o[l].get(c),c)}},r.set=function(c){let l,u;for(s&&s.values(),l=0,u=t.length;l<u;++l)c[t[l]]=r.num;if(!n)for(l=0,u=o.length;l<u;++l)o[l].set(c)},r.init=function(){r.num=0,s&&s.reset();for(let c=0;c<i;++c)o[c].init()},r}function zA(e){$.call(this,{},e),this._mlen=0,this._mods=[]}zA.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Y9e.concat(Bd)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ee(zA,$,{transform(e,t){this.stamp=t.stamp;let n=e.modified(),r=$a(e.sort),i=nA(e.groupby),o=s=>this.group(i(s)),a=this.state;(!a||n)&&(a=this.state=new MY(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,s=>o(s).add(s))):(t.visit(t.REM,s=>o(s).remove(s)),t.visit(t.ADD,s=>o(s).add(s)));for(let s=0,c=this._mlen;s<c;++s)Q9e(this._mods[s],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=tY(De),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Q9e(e,t,n,r){let i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),c=s.length,l=o?to(i):null,u={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||gn(-1)};t.init();for(let f=0;f<c;++f)K9e(u,a,f,c),o&&Z9e(u,l),t.update(u,s[f])}function K9e(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Z9e(e,t){let n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}var IN={};xr(IN,{bound:()=>UK,identifier:()=>TN,mark:()=>jK,overlap:()=>qK,render:()=>WK,viewlayout:()=>XK});function gt(e){return function(){return e}}var LA=Math.abs,Zr=Math.atan2,_3=Math.cos,SY=Math.max,ty=Math.min,z2=Math.sin,ac=Math.sqrt,Dr=1e-12,k3=Math.PI,Ud=k3/2,ny=2*k3;function EY(e){return e>1?0:e<-1?k3:Math.acos(e)}function AA(e){return e>=1?Ud:e<=-1?-Ud:Math.asin(e)}var VA=Math.PI,NA=2*VA,El=1e-6,J9e=NA-El;function DY(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ege(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return DY;let n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}var Dl=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?DY:ege(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,c=r-t,l=i-n,u=a-t,f=s-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>El)if(!(Math.abs(f*c-l*u)>El)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-a,h=i-s,m=c*c+l*l,g=p*p+h*h,v=Math.sqrt(m),y=Math.sqrt(d),C=o*Math.tan((VA-Math.acos((m+d-g)/(2*v*y)))/2),b=C/y,M=C/v;Math.abs(b-1)>El&&this._append`L${t+b*u},${n+b*f}`,this._append`A${o},${o},0,0,${+(f*p>u*h)},${this._x1=t+M*c},${this._y1=n+M*l}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),c=r*Math.sin(i),l=t+s,u=n+c,f=1^a,d=a?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>El||Math.abs(this._y1-u)>El)&&this._append`L${l},${u}`,r&&(d<0&&(d=d%NA+NA),d>J9e?this._append`A${r},${r},0,1,${f},${t-s},${n-c}A${r},${r},0,1,${f},${this._x1=l},${this._y1=u}`:d>El&&this._append`A${r},${r},0,${+(d>=VA)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function zl(){return new Dl}zl.prototype=Dl.prototype;function T3(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{let r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Dl(t)}function tge(e){return e.innerRadius}function nge(e){return e.outerRadius}function rge(e){return e.startAngle}function ige(e){return e.endAngle}function oge(e){return e&&e.padAngle}function age(e,t,n,r,i,o,a,s){var c=n-e,l=r-t,u=a-i,f=s-o,d=f*c-u*l;if(!(d*d<Dr))return d=(u*(t-o)-f*(e-i))/d,[e+d*c,t+d*l]}function ry(e,t,n,r,i,o,a){var s=e-n,c=t-r,l=(a?o:-o)/ac(s*s+c*c),u=l*c,f=-l*s,d=e+u,p=t+f,h=n+u,m=r+f,g=(d+h)/2,v=(p+m)/2,y=h-d,C=m-p,b=y*y+C*C,M=i-o,S=d*m-h*p,w=(C<0?-1:1)*ac(SY(0,M*M*b-S*S)),E=(S*C-y*w)/b,D=(-S*y-C*w)/b,z=(S*C+y*w)/b,H=(-S*y+C*w)/b,j=E-g,L=D-v,_=z-g,A=H-v;return j*j+L*L>_*_+A*A&&(E=z,D=H),{cx:E,cy:D,x01:-u,y01:-f,x11:E*(i/M-1),y11:D*(i/M-1)}}function _A(){var e=tge,t=nge,n=gt(0),r=null,i=rge,o=ige,a=oge,s=null,c=T3(l);function l(){var u,f,d=+e.apply(this,arguments),p=+t.apply(this,arguments),h=i.apply(this,arguments)-Ud,m=o.apply(this,arguments)-Ud,g=LA(m-h),v=m>h;if(s||(s=u=c()),p<d&&(f=p,p=d,d=f),!(p>Dr))s.moveTo(0,0);else if(g>ny-Dr)s.moveTo(p*_3(h),p*z2(h)),s.arc(0,0,p,h,m,!v),d>Dr&&(s.moveTo(d*_3(m),d*z2(m)),s.arc(0,0,d,m,h,v));else{var y=h,C=m,b=h,M=m,S=g,w=g,E=a.apply(this,arguments)/2,D=E>Dr&&(r?+r.apply(this,arguments):ac(d*d+p*p)),z=ty(LA(p-d)/2,+n.apply(this,arguments)),H=z,j=z,L,_;if(D>Dr){var A=AA(D/d*z2(E)),T=AA(D/p*z2(E));(S-=A*2)>Dr?(A*=v?1:-1,b+=A,M-=A):(S=0,b=M=(h+m)/2),(w-=T*2)>Dr?(T*=v?1:-1,y+=T,C-=T):(w=0,y=C=(h+m)/2)}var G=p*_3(y),X=p*z2(y),J=d*_3(M),Se=d*z2(M);if(z>Dr){var Ee=p*_3(C),Xe=p*z2(C),St=d*_3(b),lt=d*z2(b),Jt;if(g<k3)if(Jt=age(G,X,St,lt,Ee,Xe,J,Se)){var ws=G-Jt[0],j0=X-Jt[1],N4=Ee-Jt[0],me=Xe-Jt[1],Qe=1/z2(EY((ws*N4+j0*me)/(ac(ws*ws+j0*j0)*ac(N4*N4+me*me)))/2),nt=ac(Jt[0]*Jt[0]+Jt[1]*Jt[1]);H=ty(z,(d-nt)/(Qe-1)),j=ty(z,(p-nt)/(Qe+1))}else H=j=0}w>Dr?j>Dr?(L=ry(St,lt,G,X,p,j,v),_=ry(Ee,Xe,J,Se,p,j,v),s.moveTo(L.cx+L.x01,L.cy+L.y01),j<z?s.arc(L.cx,L.cy,j,Zr(L.y01,L.x01),Zr(_.y01,_.x01),!v):(s.arc(L.cx,L.cy,j,Zr(L.y01,L.x01),Zr(L.y11,L.x11),!v),s.arc(0,0,p,Zr(L.cy+L.y11,L.cx+L.x11),Zr(_.cy+_.y11,_.cx+_.x11),!v),s.arc(_.cx,_.cy,j,Zr(_.y11,_.x11),Zr(_.y01,_.x01),!v))):(s.moveTo(G,X),s.arc(0,0,p,y,C,!v)):s.moveTo(G,X),!(d>Dr)||!(S>Dr)?s.lineTo(J,Se):H>Dr?(L=ry(J,Se,Ee,Xe,d,-H,v),_=ry(G,X,St,lt,d,-H,v),s.lineTo(L.cx+L.x01,L.cy+L.y01),H<z?s.arc(L.cx,L.cy,H,Zr(L.y01,L.x01),Zr(_.y01,_.x01),!v):(s.arc(L.cx,L.cy,H,Zr(L.y01,L.x01),Zr(L.y11,L.x11),!v),s.arc(0,0,d,Zr(L.cy+L.y11,L.cx+L.x11),Zr(_.cy+_.y11,_.cx+_.x11),v),s.arc(_.cx,_.cy,H,Zr(_.y11,_.x11),Zr(_.y01,_.x01),!v))):s.arc(0,0,d,M,b,v)}if(s.closePath(),u)return s=null,u+""||null}return l.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-k3/2;return[_3(f)*u,z2(f)*u]},l.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:gt(+u),l):e},l.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:gt(+u),l):t},l.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:gt(+u),l):n},l.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:gt(+u),l):r},l.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:gt(+u),l):i},l.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:gt(+u),l):o},l.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:gt(+u),l):a},l.context=function(u){return arguments.length?(s=u??null,l):s},l}var SJe=Array.prototype.slice;function iy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zY(e){this._context=e}zY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Hl(e){return new zY(e)}function oy(e){return e[0]}function ay(e){return e[1]}function jd(e,t){var n=gt(!0),r=null,i=Hl,o=null,a=T3(s);e=typeof e=="function"?e:e===void 0?oy:gt(e),t=typeof t=="function"?t:t===void 0?ay:gt(t);function s(c){var l,u=(c=iy(c)).length,f,d=!1,p;for(r==null&&(o=i(p=a())),l=0;l<=u;++l)!(l<u&&n(f=c[l],l,c))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,l,c),+t(f,l,c));if(p)return o=null,p+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:gt(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:gt(+c),s):t},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:gt(!!c),s):n},s.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),s):i},s.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),s):r},s}function sy(e,t,n){var r=null,i=gt(!0),o=null,a=Hl,s=null,c=T3(l);e=typeof e=="function"?e:e===void 0?oy:gt(+e),t=typeof t=="function"?t:t===void 0?gt(0):gt(+t),n=typeof n=="function"?n:n===void 0?ay:gt(+n);function l(f){var d,p,h,m=(f=iy(f)).length,g,v=!1,y,C=new Array(m),b=new Array(m);for(o==null&&(s=a(y=c())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===v)if(v=!v)p=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=d-1;h>=p;--h)s.point(C[h],b[h]);s.lineEnd(),s.areaEnd()}v&&(C[d]=+e(g,d,f),b[d]=+t(g,d,f),s.point(r?+r(g,d,f):C[d],n?+n(g,d,f):b[d]))}if(y)return s=null,y+""||null}function u(){return jd().defined(i).curve(a).context(o)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:gt(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:gt(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:gt(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:gt(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:gt(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:gt(+f),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:gt(!!f),l):i},l.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),l):a},l.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),l):o},l}var HY={draw(e,t){let n=ac(t/k3);e.moveTo(n,0),e.arc(0,0,n,0,ny)}};function cy(e,t){let n=null,r=T3(i);e=typeof e=="function"?e:gt(e||HY),t=typeof t=="function"?t:gt(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:gt(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:gt(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Po(){}function uu(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function qd(e){this._context=e}qd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:uu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:uu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kA(e){return new qd(e)}function LY(e){this._context=e}LY.prototype={areaStart:Po,areaEnd:Po,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:uu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function TA(e){return new LY(e)}function AY(e){this._context=e}AY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:uu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function IA(e){return new AY(e)}function VY(e,t){this._basis=new qd(e),this._beta=t}VY.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,a=t[n]-i,s=-1,c;++s<=n;)c=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+c*o),this._beta*t[s]+(1-this._beta)*(i+c*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var FA=function e(t){function n(r){return t===1?new qd(r):new VY(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function fu(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function ly(e,t){this._context=e,this._k=(1-t)/6}ly.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:fu(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:fu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var RA=function e(t){function n(r){return new ly(r,t)}return n.tension=function(r){return e(+r)},n}(0);function uy(e,t){this._context=e,this._k=(1-t)/6}uy.prototype={areaStart:Po,areaEnd:Po,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:fu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var OA=function e(t){function n(r){return new uy(r,t)}return n.tension=function(r){return e(+r)},n}(0);function fy(e,t){this._context=e,this._k=(1-t)/6}fy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:fu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var PA=function e(t){function n(r){return new fy(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Gd(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>Dr){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>Dr){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*l+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function NY(e,t){this._context=e,this._alpha=t}NY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Gd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var $A=function e(t){function n(r){return t?new NY(r,t):new ly(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function _Y(e,t){this._context=e,this._alpha=t}_Y.prototype={areaStart:Po,areaEnd:Po,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Gd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var BA=function e(t){function n(r){return t?new _Y(r,t):new uy(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function kY(e,t){this._context=e,this._alpha=t}kY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Gd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var UA=function e(t){function n(r){return t?new kY(r,t):new fy(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function TY(e){this._context=e}TY.prototype={areaStart:Po,areaEnd:Po,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function jA(e){return new TY(e)}function IY(e){return e<0?-1:1}function FY(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(IY(o)+IY(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function RY(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function qA(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function dy(e){this._context=e}dy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qA(this,this._t0,RY(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,qA(this,RY(this,n=FY(this,e,t)),n);break;default:qA(this,this._t0,n=FY(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function OY(e){this._context=new PY(e)}(OY.prototype=Object.create(dy.prototype)).point=function(e,t){dy.prototype.point.call(this,t,e)};function PY(e){this._context=e}PY.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function GA(e){return new dy(e)}function WA(e){return new OY(e)}function BY(e){this._context=e}BY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=$Y(e),i=$Y(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function $Y(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function YA(e){return new BY(e)}function py(e,t){this._context=e,this._t=t}py.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function XA(e){return new py(e,.5)}function QA(e){return new py(e,0)}function KA(e){return new py(e,1)}function $o(e,t){if(typeof document<"u"&&document.createElement){let n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}var UY=()=>typeof Image<"u"?Image:null;function Zn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ba(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}var du=Symbol("implicit");function Ll(){var e=new W6,t=[],n=[],r=du;function i(o){let a=e.get(o);if(a===void 0){if(r!==du)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new W6;for(let a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Ll(t,n).unknown(r)},Zn.apply(i,arguments),i}var fV={};xr(fV,{interpolate:()=>bi,interpolateArray:()=>mX,interpolateBasis:()=>by,interpolateBasisClosed:()=>My,interpolateCubehelix:()=>_X,interpolateCubehelixLong:()=>kX,interpolateDate:()=>Sy,interpolateDiscrete:()=>gX,interpolateHcl:()=>AX,interpolateHclLong:()=>VX,interpolateHsl:()=>zX,interpolateHslLong:()=>HX,interpolateHue:()=>vX,interpolateLab:()=>uV,interpolateNumber:()=>Mi,interpolateNumberArray:()=>vu,interpolateObject:()=>Ey,interpolateRgb:()=>Qd,interpolateRgbBasis:()=>pX,interpolateRgbBasisClosed:()=>hX,interpolateRound:()=>Ga,interpolateString:()=>Dy,interpolateTransformCss:()=>MX,interpolateTransformSvg:()=>wX,interpolateZoom:()=>EX,piecewise:()=>Il,quantize:()=>TX});function sc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function I3(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ja(){}var F3=.7,Nl=1/F3,pu="\\s*([+-]?\\d+)\\s*",Wd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ua="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cge=/^#([0-9a-f]{3,8})$/,lge=new RegExp(`^rgb\\(${pu},${pu},${pu}\\)$`),uge=new RegExp(`^rgb\\(${Ua},${Ua},${Ua}\\)$`),fge=new RegExp(`^rgba\\(${pu},${pu},${pu},${Wd}\\)$`),dge=new RegExp(`^rgba\\(${Ua},${Ua},${Ua},${Wd}\\)$`),pge=new RegExp(`^hsl\\(${Wd},${Ua},${Ua}\\)$`),hge=new RegExp(`^hsla\\(${Wd},${Ua},${Ua},${Wd}\\)$`),jY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sc(ja,R3,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:qY,formatHex:qY,formatHex8:mge,formatHsl:gge,formatRgb:GY,toString:GY});function qY(){return this.rgb().formatHex()}function mge(){return this.rgb().formatHex8()}function gge(){return ZY(this).formatHsl()}function GY(){return this.rgb().formatRgb()}function R3(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=cge.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?WY(t):n===3?new Jn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?hy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?hy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lge.exec(e))?new Jn(t[1],t[2],t[3],1):(t=uge.exec(e))?new Jn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fge.exec(e))?hy(t[1],t[2],t[3],t[4]):(t=dge.exec(e))?hy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pge.exec(e))?QY(t[1],t[2]/100,t[3]/100,1):(t=hge.exec(e))?QY(t[1],t[2]/100,t[3]/100,t[4]):jY.hasOwnProperty(e)?WY(jY[e]):e==="transparent"?new Jn(NaN,NaN,NaN,0):null}function WY(e){return new Jn(e>>16&255,e>>8&255,e&255,1)}function hy(e,t,n,r){return r<=0&&(e=t=n=NaN),new Jn(e,t,n,r)}function Yd(e){return e instanceof ja||(e=R3(e)),e?(e=e.rgb(),new Jn(e.r,e.g,e.b,e.opacity)):new Jn}function Bo(e,t,n,r){return arguments.length===1?Yd(e):new Jn(e,t,n,r??1)}function Jn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}sc(Jn,Bo,I3(ja,{brighter(e){return e=e==null?Nl:Math.pow(Nl,e),new Jn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?F3:Math.pow(F3,e),new Jn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Jn(Vl(this.r),Vl(this.g),Vl(this.b),gy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YY,formatHex:YY,formatHex8:vge,formatRgb:XY,toString:XY}));function YY(){return`#${Al(this.r)}${Al(this.g)}${Al(this.b)}`}function vge(){return`#${Al(this.r)}${Al(this.g)}${Al(this.b)}${Al((isNaN(this.opacity)?1:this.opacity)*255)}`}function XY(){let e=gy(this.opacity);return`${e===1?"rgb(":"rgba("}${Vl(this.r)}, ${Vl(this.g)}, ${Vl(this.b)}${e===1?")":`, ${e})`}`}function gy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Vl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Al(e){return e=Vl(e),(e<16?"0":"")+e.toString(16)}function QY(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new H2(e,t,n,r)}function ZY(e){if(e instanceof H2)return new H2(e.h,e.s,e.l,e.opacity);if(e instanceof ja||(e=R3(e)),!e)return new H2;if(e instanceof H2)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new H2(a,s,c,e.opacity)}function _l(e,t,n,r){return arguments.length===1?ZY(e):new H2(e,t,n,r??1)}function H2(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}sc(H2,_l,I3(ja,{brighter(e){return e=e==null?Nl:Math.pow(Nl,e),new H2(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?F3:Math.pow(F3,e),new H2(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Jn(ZA(e>=240?e-240:e+120,i,r),ZA(e,i,r),ZA(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new H2(KY(this.h),my(this.s),my(this.l),gy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=gy(this.opacity);return`${e===1?"hsl(":"hsla("}${KY(this.h)}, ${my(this.s)*100}%, ${my(this.l)*100}%${e===1?")":`, ${e})`}`}}));function KY(e){return e=(e||0)%360,e<0?e+360:e}function my(e){return Math.max(0,Math.min(1,e||0))}function ZA(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var vy=Math.PI/180,yy=180/Math.PI;var xy=18,JY=.96422,eX=1,tX=.82521,nX=4/29,hu=6/29,rX=3*hu*hu,yge=hu*hu*hu;function iX(e){if(e instanceof qa)return new qa(e.l,e.a,e.b,e.opacity);if(e instanceof cc)return oX(e);e instanceof Jn||(e=Yd(e));var t=nV(e.r),n=nV(e.g),r=nV(e.b),i=JA((.2225045*t+.7168786*n+.0606169*r)/eX),o,a;return t===n&&n===r?o=a=i:(o=JA((.4360747*t+.3850649*n+.1430804*r)/JY),a=JA((.0139322*t+.0971045*n+.7141733*r)/tX)),new qa(116*i-16,500*(o-i),200*(i-a),e.opacity)}function O3(e,t,n,r){return arguments.length===1?iX(e):new qa(e,t,n,r??1)}function qa(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}sc(qa,O3,I3(ja,{brighter(e){return new qa(this.l+xy*(e??1),this.a,this.b,this.opacity)},darker(e){return new qa(this.l-xy*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=JY*eV(t),e=eX*eV(e),n=tX*eV(n),new Jn(tV(3.1338561*t-1.6168667*e-.4906146*n),tV(-.9787684*t+1.9161415*e+.033454*n),tV(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function JA(e){return e>yge?Math.pow(e,1/3):e/rX+nX}function eV(e){return e>hu?e*e*e:rX*(e-nX)}function tV(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function nV(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function xge(e){if(e instanceof cc)return new cc(e.h,e.c,e.l,e.opacity);if(e instanceof qa||(e=iX(e)),e.a===0&&e.b===0)return new cc(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*yy;return new cc(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function kl(e,t,n,r){return arguments.length===1?xge(e):new cc(e,t,n,r??1)}function cc(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function oX(e){if(isNaN(e.h))return new qa(e.l,0,0,e.opacity);var t=e.h*vy;return new qa(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}sc(cc,kl,I3(ja,{brighter(e){return new cc(this.h,this.c,this.l+xy*(e??1),this.opacity)},darker(e){return new cc(this.h,this.c,this.l-xy*(e??1),this.opacity)},rgb(){return oX(this).rgb()}}));var lX=-.14861,rV=1.78277,iV=-.29227,Cy=-.90649,Xd=1.97294,aX=Xd*Cy,sX=Xd*rV,cX=rV*iV-Cy*lX;function Cge(e){if(e instanceof Tl)return new Tl(e.h,e.s,e.l,e.opacity);e instanceof Jn||(e=Yd(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(cX*r+aX*t-sX*n)/(cX+aX-sX),o=r-i,a=(Xd*(n-i)-iV*o)/Cy,s=Math.sqrt(a*a+o*o)/(Xd*i*(1-i)),c=s?Math.atan2(a,o)*yy-120:NaN;return new Tl(c<0?c+360:c,s,i,e.opacity)}function mu(e,t,n,r){return arguments.length===1?Cge(e):new Tl(e,t,n,r??1)}function Tl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}sc(Tl,mu,I3(ja,{brighter(e){return e=e==null?Nl:Math.pow(Nl,e),new Tl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?F3:Math.pow(F3,e),new Tl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*vy,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Jn(255*(t+n*(lX*r+rV*i)),255*(t+n*(iV*r+Cy*i)),255*(t+n*(Xd*r)),this.opacity)}}));function oV(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function by(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return oV((n-r/t)*t,a,i,o,s)}}function My(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return oV((n-r/t)*t,i,o,a,s)}}var gu=e=>()=>e;function uX(e,t){return function(n){return e+n*t}}function bge(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function P3(e,t){var n=t-e;return n?uX(e,n>180||n<-180?n-360*Math.round(n/360):n):gu(isNaN(e)?t:e)}function fX(e){return(e=+e)==1?yn:function(t,n){return n-t?bge(t,n,e):gu(isNaN(t)?n:t)}}function yn(e,t){var n=t-e;return n?uX(e,n):gu(isNaN(e)?t:e)}var Qd=function e(t){var n=fX(t);function r(i,o){var a=n((i=Bo(i)).r,(o=Bo(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),l=yn(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function dX(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=Bo(t[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=e(r),i=e(i),o=e(o),s.opacity=1,function(c){return s.r=r(c),s.g=i(c),s.b=o(c),s+""}}}var pX=dX(by),hX=dX(My);function vu(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function wy(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function mX(e,t){return(wy(t)?vu:aV)(e,t)}function aV(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=bi(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Sy(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Mi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ey(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=bi(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var cV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sV=new RegExp(cV.source,"g");function Mge(e){return function(){return e}}function wge(e){return function(t){return e(t)+""}}function Dy(e,t){var n=cV.lastIndex=sV.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(e=e+"",t=t+"";(r=cV.exec(e))&&(i=sV.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:Mi(r,i)})),n=sV.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?wge(c[0].x):Mge(t):(t=c.length,function(l){for(var u=0,f;u<t;++u)s[(f=c[u]).i]=f.x(l);return s.join("")})}function bi(e,t){var n=typeof t,r;return t==null||n==="boolean"?gu(t):(n==="number"?Mi:n==="string"?(r=R3(t))?(t=r,Qd):Dy:t instanceof R3?Qd:t instanceof Date?Sy:wy(t)?vu:Array.isArray(t)?aV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ey:Mi)(e,t)}function gX(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function vX(e,t){var n=P3(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Ga(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var yX=180/Math.PI,zy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lV(e,t,n,r,i,o){var a,s,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*yX,skewX:Math.atan(c)*yX,scaleX:a,scaleY:s}}var Hy;function xX(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?zy:lV(t.a,t.b,t.c,t.d,t.e,t.f)}function CX(e){return e==null?zy:(Hy||(Hy=document.createElementNS("http://www.w3.org/2000/svg","g")),Hy.setAttribute("transform",e),(e=Hy.transform.baseVal.consolidate())?(e=e.matrix,lV(e.a,e.b,e.c,e.d,e.e,e.f)):zy)}function bX(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,d,p,h){if(l!==f||u!==d){var m=p.push("translate(",null,t,null,n);h.push({i:m-4,x:Mi(l,f)},{i:m-2,x:Mi(u,d)})}else(f||d)&&p.push("translate("+f+t+d+n)}function a(l,u,f,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Mi(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function s(l,u,f,d){l!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Mi(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,d,p,h){if(l!==f||u!==d){var m=p.push(i(p)+"scale(",null,",",null,")");h.push({i:m-4,x:Mi(l,f)},{i:m-2,x:Mi(u,d)})}else(f!==1||d!==1)&&p.push(i(p)+"scale("+f+","+d+")")}return function(l,u){var f=[],d=[];return l=e(l),u=e(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,d),a(l.rotate,u.rotate,f,d),s(l.skewX,u.skewX,f,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,d),l=u=null,function(p){for(var h=-1,m=d.length,g;++h<m;)f[(g=d[h]).i]=g.x(p);return f.join("")}}}var MX=bX(xX,"px, ","px)","deg)"),wX=bX(CX,", ",")",")");var Sge=1e-12;function SX(e){return((e=Math.exp(e))+1/e)/2}function Ege(e){return((e=Math.exp(e))-1/e)/2}function Dge(e){return((e=Math.exp(2*e))-1)/(e+1)}var EX=function e(t,n,r){function i(o,a){var s=o[0],c=o[1],l=o[2],u=a[0],f=a[1],d=a[2],p=u-s,h=f-c,m=p*p+h*h,g,v;if(m<Sge)v=Math.log(d/l)/t,g=function(w){return[s+w*p,c+w*h,l*Math.exp(t*w*v)]};else{var y=Math.sqrt(m),C=(d*d-l*l+r*m)/(2*l*n*y),b=(d*d-l*l-r*m)/(2*d*n*y),M=Math.log(Math.sqrt(C*C+1)-C),S=Math.log(Math.sqrt(b*b+1)-b);v=(S-M)/t,g=function(w){var E=w*v,D=SX(M),z=l/(n*y)*(D*Dge(t*E+M)-Ege(M));return[s+z*p,c+z*h,l*D/SX(t*E+M)]}}return g.duration=v*1e3*t/Math.SQRT2,g}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return e(a,s,c)},i}(Math.SQRT2,2,4);function DX(e){return function(t,n){var r=e((t=_l(t)).h,(n=_l(n)).h),i=yn(t.s,n.s),o=yn(t.l,n.l),a=yn(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=o(s),t.opacity=a(s),t+""}}}var zX=DX(P3),HX=DX(yn);function uV(e,t){var n=yn((e=O3(e)).l,(t=O3(t)).l),r=yn(e.a,t.a),i=yn(e.b,t.b),o=yn(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=o(a),e+""}}function LX(e){return function(t,n){var r=e((t=kl(t)).h,(n=kl(n)).h),i=yn(t.c,n.c),o=yn(t.l,n.l),a=yn(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=o(s),t.opacity=a(s),t+""}}}var AX=LX(P3),VX=LX(yn);function NX(e){return function t(n){n=+n;function r(i,o){var a=e((i=mu(i)).h,(o=mu(o)).h),s=yn(i.s,o.s),c=yn(i.l,o.l),l=yn(i.opacity,o.opacity);return function(u){return i.h=a(u),i.s=s(u),i.l=c(Math.pow(u,n)),i.opacity=l(u),i+""}}return r.gamma=t,r}(1)}var _X=NX(P3),kX=NX(yn);function Il(e,t){t===void 0&&(t=e,e=bi);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function TX(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function dV(e){return function(){return e}}function yu(e){return+e}var IX=[0,1];function Jr(e){return e}function pV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:dV(isNaN(t)?NaN:.5)}function zge(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Hge(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=pV(i,r),o=n(a,o)):(r=pV(r,i),o=n(o,a)),function(s){return o(r(s))}}function Lge(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=pV(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var c=E2(e,s,1,r)-1;return o[c](i[c](s))}}function Wa(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Fl(){var e=IX,t=IX,n=bi,r,i,o,a=Jr,s,c,l;function u(){var d=Math.min(e.length,t.length);return a!==Jr&&(a=zge(e[0],e[d-1])),s=d>2?Lge:Hge,c=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(c||(c=s(e.map(r),t,n)))(r(a(d)))}return f.invert=function(d){return a(i((l||(l=s(t,e.map(r),Mi)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,yu),u()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Ga,u()},f.clamp=function(d){return arguments.length?(a=d?!0:Jr,u()):a!==Jr},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,p){return r=d,i=p,u()}}function Kd(){return Fl()(Jr,Jr)}function xu(e,t,n,r){var i=qi(e,t,n),o;switch(r=no(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=hd(i,a))&&(r.precision=o),K6(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=md(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=pd(i))&&(r.precision=o-(r.type==="%")*2);break}}return M3(r)}function io(e){var t=e.domain;return e.ticks=function(n){var r=t();return pl(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return xu(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],s=r[o],c,l,u=10;for(s<a&&(l=a,a=s,s=l,l=i,i=o,o=l);u-- >0;){if(l=ld(a,s,n),l===c)return r[i]=a,r[o]=s,t(r);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;c=l}return e},e}function Zd(){var e=Kd();return e.copy=function(){return Wa(e,Zd())},Zn.apply(e,arguments),io(e)}function Jd(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,yu),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Jd(e).unknown(t)},e=arguments.length?Array.from(e,yu):[0,1],io(n)}function e7(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function FX(e){return Math.log(e)}function RX(e){return Math.exp(e)}function Age(e){return-Math.log(-e)}function Vge(e){return-Math.exp(-e)}function Nge(e){return isFinite(e)?+("1e"+e):e<0?0:e}function _ge(e){return e===10?Nge:e===Math.E?Math.exp:t=>Math.pow(e,t)}function kge(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function OX(e){return(t,n)=>-e(-t,n)}function t7(e){let t=e(FX,RX),n=t.domain,r=10,i,o;function a(){return i=kge(r),o=_ge(r),n()[0]<0?(i=OX(i),o=OX(o),e(Age,Vge)):e(FX,RX),t}return t.base=function(s){return arguments.length?(r=+s,a()):r},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=s=>{let c=n(),l=c[0],u=c[c.length-1],f=u<l;f&&([l,u]=[u,l]);let d=i(l),p=i(u),h,m,g=s==null?10:+s,v=[];if(!(r%1)&&p-d<g){if(d=Math.floor(d),p=Math.ceil(p),l>0){for(;d<=p;++d)for(h=1;h<r;++h)if(m=d<0?h/o(-d):h*o(d),!(m<l)){if(m>u)break;v.push(m)}}else for(;d<=p;++d)for(h=r-1;h>=1;--h)if(m=d>0?h/o(-d):h*o(d),!(m<l)){if(m>u)break;v.push(m)}v.length*2<g&&(v=pl(l,u,g))}else v=pl(d,p,Math.min(p-d,g)).map(o);return f?v.reverse():v},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=no(c)).precision==null&&(c.trim=!0),c=M3(c)),s===1/0)return c;let l=Math.max(1,r*s/t.ticks().length);return u=>{let f=u/o(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=l?c(u):""}},t.nice=()=>n(e7(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),t}function n7(){let e=t7(Fl()).domain([1,10]);return e.copy=()=>Wa(e,n7()).base(e.base()),Zn.apply(e,arguments),e}function PX(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function $X(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function r7(e){var t=1,n=e(PX(t),$X(t));return n.constant=function(r){return arguments.length?e(PX(t=+r),$X(t)):t},io(n)}function i7(){var e=r7(Fl());return e.copy=function(){return Wa(e,i7()).constant(e.constant())},Zn.apply(e,arguments)}function BX(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Tge(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Ige(e){return e<0?-e*e:e*e}function o7(e){var t=e(Jr,Jr),n=1;function r(){return n===1?e(Jr,Jr):n===.5?e(Tge,Ige):e(BX(n),BX(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},io(t)}function Cu(){var e=o7(Fl());return e.copy=function(){return Wa(e,Cu()).exponent(e.exponent())},Zn.apply(e,arguments),e}function hV(){return Cu.apply(null,arguments).exponent(.5)}function a7(){var e=[],t=[],n=[],r;function i(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=fd(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:t[E2(n,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(xi),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return a7().domain(e).range(t).unknown(r)},Zn.apply(o,arguments)}function s7(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function a(c){return c!=null&&c<=c?i[E2(r,c,0,n)]:o}function s(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return a}return a.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},a.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,s()):i.slice()},a.invertExtent=function(c){var l=i.indexOf(c);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},a.unknown=function(c){return arguments.length&&(o=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return s7().domain([e,t]).range(i).unknown(o)},Zn.apply(io(a),arguments)}function c7(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[E2(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return c7().domain(e).range(t).unknown(n)},Zn.apply(i,arguments)}function Fge(e){return new Date(e)}function Rge(e){return e instanceof Date?+e:+new Date(+e)}function Ly(e,t,n,r,i,o,a,s,c,l){var u=Kd(),f=u.invert,d=u.domain,p=l(".%L"),h=l(":%S"),m=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),y=l("%b %d"),C=l("%B"),b=l("%Y");function M(S){return(c(S)<S?p:s(S)<S?h:a(S)<S?m:o(S)<S?g:r(S)<S?i(S)<S?v:y:n(S)<S?C:b)(S)}return u.invert=function(S){return new Date(f(S))},u.domain=function(S){return arguments.length?d(Array.from(S,Rge)):d().map(Fge)},u.ticks=function(S){var w=d();return e(w[0],w[w.length-1],S??10)},u.tickFormat=function(S,w){return w==null?M:l(w)},u.nice=function(S){var w=d();return(!S||typeof S.range!="function")&&(S=t(w[0],w[w.length-1],S??10)),S?d(e7(w,S)):u},u.copy=function(){return Wa(u,Ly(e,t,n,r,i,o,a,s,c,l))},u}function Ay(){return Zn.apply(Ly(aL,sL,Gi,Zs,Fo,E1,E3,w3,Ci,ru).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Vy(){return Zn.apply(Ly(iL,oL,Wi,Js,Ro,Io,D3,S3,Ci,iu).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ny(){var e=0,t=1,n,r,i,o,a=Jr,s=!1,c;function l(f){return f==null||isNaN(f=+f)?c:a(i===0?.5:(f=(o(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(s=!!f,l):s},l.interpolator=function(f){return arguments.length?(a=f,l):a};function u(f){return function(d){var p,h;return arguments.length?([p,h]=d,a=f(p,h),l):[a(0),a(1)]}}return l.range=u(bi),l.rangeRound=u(Ga),l.unknown=function(f){return arguments.length?(c=f,l):c},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function lc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function bu(){var e=io(Ny()(Jr));return e.copy=function(){return lc(e,bu())},Ba.apply(e,arguments)}function _y(){var e=t7(Ny()).domain([1,10]);return e.copy=function(){return lc(e,_y()).base(e.base())},Ba.apply(e,arguments)}function ky(){var e=r7(Ny());return e.copy=function(){return lc(e,ky()).constant(e.constant())},Ba.apply(e,arguments)}function l7(){var e=o7(Ny());return e.copy=function(){return lc(e,l7()).exponent(e.exponent())},Ba.apply(e,arguments)}function mV(){return l7.apply(null,arguments).exponent(.5)}function Ty(){var e=0,t=.5,n=1,r=1,i,o,a,s,c,l=Jr,u,f=!1,d;function p(m){return isNaN(m=+m)?d:(m=.5+((m=+u(m))-o)*(r*m<r*o?s:c),l(f?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,n]=m,i=u(e=+e),o=u(t=+t),a=u(n=+n),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,p):[e,t,n]},p.clamp=function(m){return arguments.length?(f=!!m,p):f},p.interpolator=function(m){return arguments.length?(l=m,p):l};function h(m){return function(g){var v,y,C;return arguments.length?([v,y,C]=g,l=Il(m,[v,y,C]),p):[l(0),l(.5),l(1)]}}return p.range=h(bi),p.rangeRound=h(Ga),p.unknown=function(m){return arguments.length?(d=m,p):d},function(m){return u=m,i=m(e),o=m(t),a=m(n),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,p}}function u7(){var e=io(Ty()(Jr));return e.copy=function(){return lc(e,u7())},Ba.apply(e,arguments)}function Iy(){var e=t7(Ty()).domain([.1,1,10]);return e.copy=function(){return lc(e,Iy()).base(e.base())},Ba.apply(e,arguments)}function Fy(){var e=r7(Ty());return e.copy=function(){return lc(e,Fy()).constant(e.constant())},Ba.apply(e,arguments)}function f7(){var e=o7(Ty());return e.copy=function(){return lc(e,f7()).exponent(e.exponent())},Ba.apply(e,arguments)}function gV(){return f7.apply(null,arguments).exponent(.5)}function d7(e,t,n){let r=e-t+n*2;return e?r>0?r:1:0}var Pge="identity",Ol="linear",Ya="log",Mu="pow",wu="sqrt",p7="symlog",$3="time",B3="utc",L2="sequential",Pl="diverging",Rl="quantile",h7="quantize",m7="threshold",Oy="ordinal",Py="point",yV="band",$y="bin-ordinal",pr="continuous",g7="discrete",v7="discretizing",Uo="interpolating",xV="temporal";function $ge(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Bge(e){return function(t){let n=e.range(),r=t[0],i=t[1],o=-1,a,s,c,l;for(i<r&&(s=r,r=i,i=s),c=0,l=n.length;c<l;++c)n[c]>=r&&n[c]<=i&&(o<0&&(o=c),a=c);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function CV(){let e=Ll().unknown(void 0),t=e.domain,n=e.range,r=[0,1],i,o,a=!1,s=0,c=0,l=.5;delete e.unknown;function u(){let f=t().length,d=r[1]<r[0],p=r[1-d],h=d7(f,s,c),m=r[d-0];i=(p-m)/(h||1),a&&(i=Math.floor(i)),m+=(p-m-i*(f-s))*l,o=i*(1-s),a&&(m=Math.round(m),o=Math.round(o));let g=Un(f).map(v=>m+i*v);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),u()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],u()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,u()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,u()):a},e.padding=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),s=c,u()):s},e.paddingInner=function(f){return arguments.length?(s=Math.max(0,Math.min(1,f)),u()):s},e.paddingOuter=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),u()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;let d=r[1]<r[0],p=d?n().reverse():n(),h=p.length-1,m=+f[0],g=+f[1],v,y,C;if(!(m!==m||g!==g)&&(g<m&&(C=m,m=g,g=C),!(g<p[0]||m>r[1-d])))return v=Math.max(0,dl(p,m)-1),y=m===g?v:dl(p,g)-1,m-p[v]>o+1e-10&&++v,d&&(C=v,v=h-y,y=h-C),v>y?void 0:t().slice(v,y+1)},e.invert=function(f){let d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return CV().domain(t()).range(r).round(a).paddingInner(s).paddingOuter(c).align(l)},u()}function GX(e){let t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return GX(t())},e}function Uge(){return GX(CV().paddingInner(1))}var jge=Array.prototype.map;function qge(e){return jge.call(e,Bn)}var Gge=Array.prototype.slice;function WX(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(E2(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=qge(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Gge.call(r),n):t.slice()},n.tickFormat=function(r,i){return xu(e[0],je(e),r??10,i)},n.copy=function(){return WX().domain(n.domain()).range(n.range())},n}var Ry=new Map,YX=Symbol("vega_scale");function bV(e){return e[YX]=!0,e}function XX(e){return e&&e[YX]===!0}function Wge(e,t,n){let r=function(){let o=t();return o.invertRange||(o.invertRange=o.invert?$ge(o):o.invertExtent?Bge(o):void 0),o.type=e,bV(o)};return r.metadata=dr(te(n)),r}function ft(e,t,n){return arguments.length>1?(Ry.set(e,Wge(e,t,n)),this):MV(e)?Ry.get(e):void 0}ft(Pge,Jd);ft(Ol,Zd,pr);ft(Ya,n7,[pr,Ya]);ft(Mu,Cu,pr);ft(wu,hV,pr);ft(p7,i7,pr);ft($3,Ay,[pr,xV]);ft(B3,Vy,[pr,xV]);ft(L2,bu,[pr,Uo]);ft(`${L2}-${Ol}`,bu,[pr,Uo]);ft(`${L2}-${Ya}`,_y,[pr,Uo,Ya]);ft(`${L2}-${Mu}`,l7,[pr,Uo]);ft(`${L2}-${wu}`,mV,[pr,Uo]);ft(`${L2}-${p7}`,ky,[pr,Uo]);ft(`${Pl}-${Ol}`,u7,[pr,Uo]);ft(`${Pl}-${Ya}`,Iy,[pr,Uo,Ya]);ft(`${Pl}-${Mu}`,f7,[pr,Uo]);ft(`${Pl}-${wu}`,gV,[pr,Uo]);ft(`${Pl}-${p7}`,Fy,[pr,Uo]);ft(Rl,a7,[v7,Rl]);ft(h7,s7,v7);ft(m7,c7,v7);ft($y,WX,[g7,v7]);ft(Oy,Ll,g7);ft(yV,CV,g7);ft(Py,Uge,g7);function MV(e){return Ry.has(e)}function $l(e,t){let n=Ry.get(e);return n&&n.metadata[t]}function y7(e){return $l(e,pr)}function U3(e){return $l(e,g7)}function By(e){return $l(e,v7)}function wV(e){return $l(e,Ya)}function Yge(e){return $l(e,xV)}function SV(e){return $l(e,Uo)}function EV(e){return $l(e,Rl)}var Xge=["clamp","base","constant","exponent"];function Uy(e,t){let n=t[0],r=je(t)-n;return function(i){return e(n+i*r)}}function Su(e,t,n){return Il(x7(t||"rgb",n),e)}function jy(e,t){let n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function qy(e,t,n){let r=n-t,i,o,a;return!r||!Number.isFinite(r)?gn(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=ft(o)().domain([t,n]).range([0,1]),Xge.forEach(s=>e[s]?a[s](e[s]()):0),a)}function x7(e,t){let n=fV[Qge(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Qge(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}var Kge={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Zge={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function QX(e){let t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function KX(e,t){for(let n in e)C7(n,t(e[n]))}var UX={};KX(Zge,QX);KX(Kge,e=>Su(QX(e)));function C7(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(UX[e]=t,this):UX[e]}var b7="symbol",Jge="discrete",ZX="gradient",eve=e=>F(e)?e.map(t=>String(t)):String(e),tve=(e,t)=>e[1]-t[1],nve=(e,t)=>t[1]-e[1];function Gy(e,t,n){let r;return Pe(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Xs(e.domain())/n||1)+1))),ne(t)&&(r=t.step,t=t.interval),Q(t)&&(t=e.type===$3?ec(t):e.type==B3?tc(t):B("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function DV(e,t,n){let r=e.range(),i=r[0],o=je(r),a=tve;if(i>o&&(r=o,o=i,i=r,a=nve),i=Math.floor(i),o=Math.ceil(o),t=t.map(s=>[s,e(s)]).filter(s=>i<=s[1]&&s[1]<=o).sort(a).map(s=>s[0]),n>0&&t.length>1){let s=[t[0],je(t)];for(;t.length>n&&t.length>=3;)t=t.filter((c,l)=>!(l%2));t.length<3&&(t=s)}return t}function Wy(e,t){return e.bins?DV(e,e.bins):e.ticks?e.ticks(t):e.domain()}function zV(e,t,n,r,i,o){let a=t.type,s=eve;if(a===$3||i===$3)s=e.timeFormat(r);else if(a===B3||i===B3)s=e.utcFormat(r);else if(wV(a)){let c=e.formatFloat(r);if(o||t.bins)s=c;else{let l=JX(t,n,!1);s=u=>l(u)?c(u):""}}else if(t.tickFormat){let c=t.domain();s=e.formatSpan(c[0],c[c.length-1],n,r)}else r&&(s=e.format(r));return s}function JX(e,t,n){let r=Wy(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=c=>{let l=c/Math.pow(i,Math.round(Math.log(c)/o));return l*i<i-.5&&(l*=i),l<=a};return n?r.filter(s):s}var vV={[Rl]:"quantiles",[h7]:"thresholds",[m7]:"domain"},eQ={[Rl]:"quantiles",[h7]:"domain"};function HV(e,t){return e.bins?ove(e.bins):e.type===Ya?JX(e,t,!0):vV[e.type]?ive(e[vV[e.type]]()):Wy(e,t)}function rve(e,t,n){let r=t[eQ[t.type]](),i=r.length,o=i>1?r[1]-r[0]:r[0],a;for(a=1;a<i;++a)o=Math.min(o,r[a]-r[a-1]);return e.formatSpan(0,o,3*10,n)}function ive(e){let t=[-1/0].concat(e);return t.max=1/0,t}function ove(e){let t=e.slice(0,-1);return t.max=je(e),t}var ave=e=>vV[e.type]||e.bins;function LV(e,t,n,r,i,o,a){let s=eQ[t.type]&&o!==$3&&o!==B3?rve(e,t,i):zV(e,t,n,i,o,a);return r===b7&&ave(t)?sve(s):r===Jge?cve(s):lve(s)}var sve=e=>(t,n,r)=>{let i=jX(r[n+1],jX(r.max,1/0)),o=qX(t,e),a=qX(i,e);return o&&a?o+" \u2013 "+a:a?"< "+a:"\u2265 "+o},jX=(e,t)=>e??t,cve=e=>(t,n)=>n?e(t):null,lve=e=>t=>e(t),qX=(e,t)=>Number.isFinite(e)?t(e):null;function tQ(e){let t=e.domain(),n=t.length-1,r=+t[0],i=+je(t),o=i-r;if(e.type===m7){let a=n?o/n:.1;r-=a,i+=a,o=i-r}return a=>(a-r)/o}function uve(e,t,n,r){let i=r||t.type;return Q(n)&&Yge(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===$3?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===B3?e.utcFormat("%A, %d %B %Y, %X UTC"):LV(e,t,5,null,n,r,!0)}function AV(e,t,n){n=n||{};let r=Math.max(3,n.maxlen||7),i=uve(e,t,n.format,n.formatType);if(By(t.type)){let o=HV(t).slice(1).map(i),a=o.length;return`${a} boundar${a===1?"y":"ies"}: ${o.join(", ")}`}else if(U3(t.type)){let o=t.domain(),a=o.length,s=a>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${a} value${a===1?"":"s"}: ${s}`}else{let o=t.domain();return`values from ${i(o[0])} to ${i(je(o))}`}}var zQ=0;function fve(){zQ=0}var nx="p_";function XV(e){return e&&e.gradient}function HQ(e,t,n){let r=e.gradient,i=e.id,o=r==="radial"?nx:"";return i||(i=e.id="gradient_"+zQ++,r==="radial"?(e.x1=Xa(e.x1,.5),e.y1=Xa(e.y1,.5),e.r1=Xa(e.r1,0),e.x2=Xa(e.x2,.5),e.y2=Xa(e.y2,.5),e.r2=Xa(e.r2,.5),o=nx):(e.x1=Xa(e.x1,0),e.y1=Xa(e.y1,0),e.x2=Xa(e.x2,1),e.y2=Xa(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function Xa(e,t){return e??t}function QV(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}var nQ={basis:{curve:kA},"basis-closed":{curve:TA},"basis-open":{curve:IA},bundle:{curve:FA,tension:"beta",value:.85},cardinal:{curve:RA,tension:"tension",value:0},"cardinal-open":{curve:PA,tension:"tension",value:0},"cardinal-closed":{curve:OA,tension:"tension",value:0},"catmull-rom":{curve:$A,tension:"alpha",value:.5},"catmull-rom-closed":{curve:BA,tension:"alpha",value:.5},"catmull-rom-open":{curve:UA,tension:"alpha",value:.5},linear:{curve:Hl},"linear-closed":{curve:jA},monotone:{horizontal:WA,vertical:GA},natural:{curve:YA},step:{curve:XA},"step-after":{curve:KA},"step-before":{curve:QA}};function KV(e,t,n){var r=de(nQ,e)&&nQ[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}var dve={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},pve=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,hve=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,mve=/^((\s+,?\s*)|(,\s*))/,gve=/^[01]/;function Wl(e){let t=[];return(e.match(pve)||[]).forEach(r=>{let i=r[0],o=i.toLowerCase(),a=dve[o],s=vve(o,a,r.slice(1).trim()),c=s.length;if(c<a||c&&c%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...s.slice(0,a)]),c!==a){o==="m"&&(i=i==="M"?"L":"l");for(let l=a;l<c;l+=a)t.push([i,...s.slice(l,l+a)])}}),t}function vve(e,t,n){let r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){let a=e==="a"&&(o===3||o===4)?gve:hve,s=n.slice(i).match(a);if(s===null)throw Error("Invalid SVG path, incorrect parameter type");i+=s[0].length,r.push(+s[0]);let c=n.slice(i).match(mve);c!==null&&(i+=c[0].length)}return r}var X3=Math.PI/180,yve=1e-14,Bl=Math.PI/2,Qa=Math.PI*2,Eu=Math.sqrt(3)/2,VV={},NV={},LQ=[].join;function xve(e,t,n,r,i,o,a,s,c){let l=LQ.call(arguments);if(VV[l])return VV[l];let u=a*X3,f=Math.sin(u),d=Math.cos(u);n=Math.abs(n),r=Math.abs(r);let p=d*(s-e)*.5+f*(c-t)*.5,h=d*(c-t)*.5-f*(s-e)*.5,m=p*p/(n*n)+h*h/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);let g=d/n,v=f/n,y=-f/r,C=d/r,b=g*s+v*c,M=y*s+C*c,S=g*e+v*t,w=y*e+C*t,D=1/((S-b)*(S-b)+(w-M)*(w-M))-.25;D<0&&(D=0);let z=Math.sqrt(D);o==i&&(z=-z);let H=.5*(b+S)-z*(w-M),j=.5*(M+w)+z*(S-b),L=Math.atan2(M-j,b-H),A=Math.atan2(w-j,S-H)-L;A<0&&o===1?A+=Qa:A>0&&o===0&&(A-=Qa);let T=Math.ceil(Math.abs(A/(Bl+.001))),G=[];for(let X=0;X<T;++X){let J=L+X*A/T,Se=L+(X+1)*A/T;G[X]=[H,j,J,Se,n,r,f,d]}return VV[l]=G}function Cve(e){let t=LQ.call(e);if(NV[t])return NV[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7];let u=l*a,f=-c*s,d=c*a,p=l*s,h=Math.cos(i),m=Math.sin(i),g=Math.cos(o),v=Math.sin(o),y=.5*(o-i),C=Math.sin(y*.5),b=8/3*C*C/Math.sin(y),M=n+h-b*m,S=r+m+b*h,w=n+g,E=r+v,D=w+b*v,z=E-b*g;return NV[t]=[u*M+f*S,d*M+p*S,u*D+f*z,d*D+p*z,u*w+f*E,d*w+p*E]}var jo=["l",0,0,0,0,0,0,0];function bve(e,t,n){let r=jo[0]=e[0];if(r==="a"||r==="A")jo[1]=t*e[1],jo[2]=n*e[2],jo[3]=e[3],jo[4]=e[4],jo[5]=e[5],jo[6]=t*e[6],jo[7]=n*e[7];else if(r==="h"||r==="H")jo[1]=t*e[1];else if(r==="v"||r==="V")jo[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)jo[i]=(i%2==1?t:n)*e[i];return jo}function zu(e,t,n,r,i,o){var a,s=null,c=0,l=0,u=0,f=0,d,p,h,m,g=0,v=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var y=0,C=t.length;y<C;++y){switch(a=t[y],(i!==1||o!==1)&&(a=bve(a,i,o)),a[0]){case"l":c+=a[1],l+=a[2],e.lineTo(c+n,l+r);break;case"L":c=a[1],l=a[2],e.lineTo(c+n,l+r);break;case"h":c+=a[1],e.lineTo(c+n,l+r);break;case"H":c=a[1],e.lineTo(c+n,l+r);break;case"v":l+=a[1],e.lineTo(c+n,l+r);break;case"V":l=a[1],e.lineTo(c+n,l+r);break;case"m":c+=a[1],l+=a[2],g=c,v=l,e.moveTo(c+n,l+r);break;case"M":c=a[1],l=a[2],g=c,v=l,e.moveTo(c+n,l+r);break;case"c":d=c+a[5],p=l+a[6],u=c+a[3],f=l+a[4],e.bezierCurveTo(c+a[1]+n,l+a[2]+r,u+n,f+r,d+n,p+r),c=d,l=p;break;case"C":c=a[5],l=a[6],u=a[3],f=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,u+n,f+r,c+n,l+r);break;case"s":d=c+a[3],p=l+a[4],u=2*c-u,f=2*l-f,e.bezierCurveTo(u+n,f+r,c+a[1]+n,l+a[2]+r,d+n,p+r),u=c+a[1],f=l+a[2],c=d,l=p;break;case"S":d=a[3],p=a[4],u=2*c-u,f=2*l-f,e.bezierCurveTo(u+n,f+r,a[1]+n,a[2]+r,d+n,p+r),c=d,l=p,u=a[1],f=a[2];break;case"q":d=c+a[3],p=l+a[4],u=c+a[1],f=l+a[2],e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p;break;case"Q":d=a[3],p=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,d+n,p+r),c=d,l=p,u=a[1],f=a[2];break;case"t":d=c+a[1],p=l+a[2],s[0].match(/[QqTt]/)===null?(u=c,f=l):s[0]==="t"?(u=2*c-h,f=2*l-m):s[0]==="q"&&(u=2*c-u,f=2*l-f),h=u,m=f,e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p,u=c+a[1],f=l+a[2];break;case"T":d=a[1],p=a[2],u=2*c-u,f=2*l-f,e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p;break;case"a":rQ(e,c+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+c+n,a[7]+l+r]),c+=a[6],l+=a[7];break;case"A":rQ(e,c+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),c=a[6],l=a[7];break;case"z":case"Z":c=g,l=v,e.closePath();break}s=a}}function rQ(e,t,n,r){let i=xve(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){let a=Cve(i[o]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}var iQ=.5773502691896257,oQ={circle:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Qa)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Eu*n,i=r-n*iQ,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Eu*n,i=r-n*iQ;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Eu*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Eu*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Eu*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Eu*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function AQ(e){return de(oQ,e)?oQ[e]:Mve(e)}var _V={};function Mve(e){if(!de(_V,e)){let t=Wl(e);_V[e]={draw:function(n,r){zu(n,t,0,0,Math.sqrt(r)/2)}}}return _V[e]}var j3=.448084975506;function wve(e){return e.x}function Sve(e){return e.y}function Eve(e){return e.width}function Dve(e){return e.height}function uc(e){return typeof e=="function"?e:()=>+e}function Yy(e,t,n){return Math.max(t,Math.min(e,n))}function VQ(){var e=wve,t=Sve,n=Eve,r=Dve,i=uc(0),o=i,a=i,s=i,c=null;function l(u,f,d){var p,h=f??+e.call(this,u),m=d??+t.call(this,u),g=+n.call(this,u),v=+r.call(this,u),y=Math.min(g,v)/2,C=Yy(+i.call(this,u),0,y),b=Yy(+o.call(this,u),0,y),M=Yy(+a.call(this,u),0,y),S=Yy(+s.call(this,u),0,y);if(c||(c=p=zl()),C<=0&&b<=0&&M<=0&&S<=0)c.rect(h,m,g,v);else{var w=h+g,E=m+v;c.moveTo(h+C,m),c.lineTo(w-b,m),c.bezierCurveTo(w-j3*b,m,w,m+j3*b,w,m+b),c.lineTo(w,E-S),c.bezierCurveTo(w,E-j3*S,w-j3*S,E,w-S,E),c.lineTo(h+M,E),c.bezierCurveTo(h+j3*M,E,h,E-j3*M,h,E-M),c.lineTo(h,m+C),c.bezierCurveTo(h,m+j3*C,h+j3*C,m,h+C,m),c.closePath()}if(p)return c=null,p+""||null}return l.x=function(u){return arguments.length?(e=uc(u),l):e},l.y=function(u){return arguments.length?(t=uc(u),l):t},l.width=function(u){return arguments.length?(n=uc(u),l):n},l.height=function(u){return arguments.length?(r=uc(u),l):r},l.cornerRadius=function(u,f,d,p){return arguments.length?(i=uc(u),o=f!=null?uc(f):i,s=d!=null?uc(d):i,a=p!=null?uc(p):o,l):i},l.context=function(u){return arguments.length?(c=u??null,l):c},l}function NQ(){var e,t,n,r,i=null,o,a,s,c;function l(f,d,p){let h=p/2;if(o){var m=s-d,g=f-a;if(m||g){var v=Math.hypot(m,g),y=(m/=v)*c,C=(g/=v)*c,b=Math.atan2(g,m);i.moveTo(a-y,s-C),i.lineTo(f-m*h,d-g*h),i.arc(f,d,h,b-Math.PI,b),i.lineTo(a+y,s+C),i.arc(a,s,c,b,b+Math.PI)}else i.arc(f,d,h,0,Qa);i.closePath()}else o=1;a=f,s=d,c=h}function u(f){var d,p=f.length,h,m=!1,g;for(i==null&&(i=g=zl()),d=0;d<=p;++d)!(d<p&&r(h=f[d],d,f))===m&&(m=!m)&&(o=0),m&&l(+e(h,d,f),+t(h,d,f),+n(h,d,f));if(g)return i=null,g+""||null}return u.x=function(f){return arguments.length?(e=f,u):e},u.y=function(f){return arguments.length?(t=f,u):t},u.size=function(f){return arguments.length?(n=f,u):n},u.defined=function(f){return arguments.length?(r=f,u):r},u.context=function(f){return arguments.length?(f==null?i=null:i=f,u):i},u}function N7(e,t){return e??t}var _7=e=>e.x||0,k7=e=>e.y||0,zve=e=>e.width||0,Hve=e=>e.height||0,Lve=e=>(e.x||0)+(e.width||0),Ave=e=>(e.y||0)+(e.height||0),Vve=e=>e.startAngle||0,Nve=e=>e.endAngle||0,_ve=e=>e.padAngle||0,kve=e=>e.innerRadius||0,Tve=e=>e.outerRadius||0,Ive=e=>e.cornerRadius||0,Fve=e=>N7(e.cornerRadiusTopLeft,e.cornerRadius)||0,Rve=e=>N7(e.cornerRadiusTopRight,e.cornerRadius)||0,Ove=e=>N7(e.cornerRadiusBottomRight,e.cornerRadius)||0,Pve=e=>N7(e.cornerRadiusBottomLeft,e.cornerRadius)||0,$ve=e=>N7(e.size,64),Bve=e=>e.size||1,hx=e=>e.defined!==!1,Uve=e=>AQ(e.shape||"circle"),jve=_A().startAngle(Vve).endAngle(Nve).padAngle(_ve).innerRadius(kve).outerRadius(Tve).cornerRadius(Ive),qve=sy().x(_7).y1(k7).y0(Ave).defined(hx),Gve=sy().y(k7).x1(_7).x0(Lve).defined(hx),Wve=jd().x(_7).y(k7).defined(hx),Yve=VQ().x(_7).y(k7).width(zve).height(Hve).cornerRadius(Fve,Rve,Ove,Pve),Xve=cy().type(Uve).size($ve),Qve=NQ().x(_7).y(k7).defined(hx).size(Bve);function ZV(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Kve(e,t){return jve.context(e)(t)}function Zve(e,t){let n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Gve:qve).curve(KV(r,n.orient,n.tension)).context(e)(t)}function Jve(e,t){let n=t[0],r=n.interpolate||"linear";return Wve.curve(KV(r,n.orient,n.tension)).context(e)(t)}function Au(e,t,n,r){return Yve.context(e)(t,n,r)}function eye(e,t){return(t.mark.shape||t.shape).context(e)(t)}function tye(e,t){return Xve.context(e)(t)}function nye(e,t){return Qve.context(e)(t)}var _Q=1;function kQ(){_Q=1}function JV(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+_Q++),a=i.clipping[o]||(i.clipping[o]={id:o});return Te(r)?a.path=r(null):ZV(n)?a.path=Au(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function Vn(e){this.clear(),e&&this.union(e)}Vn.prototype={clone(){return new Vn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){let r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),c=Math.sin(e),l=t-t*s+n*c,u=n-t*c-n*s;return[s*r-c*i+l,c*r+s*i+u,s*r-c*a+l,c*r+s*a+u,s*o-c*i+l,c*o+s*i+u,s*o-c*a+l,c*o+s*a+u]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function T7(e){this.mark=e,this.bounds=this.bounds||new Vn}function I7(e){T7.call(this,e),this.items=this.items||[]}ee(I7,T7);function eN(e){this._pending=0,this._loader=e||ou()}function aQ(e){e._pending+=1}function M7(e){e._pending-=1}eN.prototype={pending(){return this._pending},sanitizeURL(e){let t=this;return aQ(t),t._loader.sanitize(e,{context:"href"}).then(n=>(M7(t),n)).catch(()=>(M7(t),null))},loadImage(e){let t=this,n=UY();return aQ(t),t._loader.sanitize(e,{context:"image"}).then(r=>{let i=r.href;if(!i||!n)throw{url:i};let o=new n,a=de(r,"crossOrigin")?r.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>M7(t),o.onerror=()=>M7(t),o.src=i,o}).catch(r=>(M7(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){let e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function Ka(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){let r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?rye(t,r):0))}return e}function rye(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}var iye=Qa-1e-8,mx,Xy,Qy,ql,RV,Ky,OV,PV,q3=(e,t)=>mx.add(e,t),Zy=(e,t)=>q3(Xy=e,Qy=t),sQ=e=>q3(e,mx.y1),cQ=e=>q3(mx.x1,e),Ul=(e,t)=>RV*e+OV*t,jl=(e,t)=>Ky*e+PV*t,kV=(e,t)=>q3(Ul(e,t),jl(e,t)),TV=(e,t)=>Zy(Ul(e,t),jl(e,t));function F7(e,t){return mx=e,t?(ql=t*X3,RV=PV=Math.cos(ql),Ky=Math.sin(ql),OV=-Ky):(RV=PV=1,ql=Ky=OV=0),oye}var oye={beginPath(){},closePath(){},moveTo:TV,lineTo:TV,rect(e,t,n,r){ql?(kV(e+n,t),kV(e+n,t+r),kV(e,t+r),TV(e,t)):(q3(e+n,t+r),Zy(e,t))},quadraticCurveTo(e,t,n,r){let i=Ul(e,t),o=jl(e,t),a=Ul(n,r),s=jl(n,r);lQ(Xy,i,a,sQ),lQ(Qy,o,s,cQ),Zy(a,s)},bezierCurveTo(e,t,n,r,i,o){let a=Ul(e,t),s=jl(e,t),c=Ul(n,r),l=jl(n,r),u=Ul(i,o),f=jl(i,o);uQ(Xy,a,c,u,sQ),uQ(Qy,s,l,f,cQ),Zy(u,f)},arc(e,t,n,r,i,o){if(r+=ql,i+=ql,Xy=n*Math.cos(i)+e,Qy=n*Math.sin(i)+t,Math.abs(i-r)>iye)q3(e-n,t-n),q3(e+n,t+n);else{let a=l=>q3(n*Math.cos(l)+e,n*Math.sin(l)+t),s,c;if(a(r),a(i),i!==r)if(r=r%Qa,r<0&&(r+=Qa),i=i%Qa,i<0&&(i+=Qa),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=Qa,s=r-r%Bl,c=0;c<4&&s>i;++c,s-=Bl)a(s);else for(s=r-r%Bl+Bl,c=0;c<4&&s<i;++c,s=s+Bl)a(s)}}};function lQ(e,t,n,r){let i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function uQ(e,t,n,r,i){let o=r-e+3*t-3*n,a=e+n-2*t,s=e-t,c=0,l=0,u;Math.abs(o)>yve?(u=a*a+s*o,u>=0&&(u=Math.sqrt(u),c=(-a+u)/o,l=(-a-u)/o)):c=.5*s/a,0<c&&c<1&&i(fQ(c,e,t,n,r)),0<l&&l<1&&i(fQ(l,e,t,n,r))}function fQ(e,t,n,r,i){let o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var Y3=(Y3=$o(1,1))?Y3.getContext("2d"):null,$V=new Vn;function tN(e){return function(t,n){if(!Y3)return!0;e(Y3,t),$V.clear().union(t.bounds).intersect(n).round();let{x1:r,y1:i,x2:o,y2:a}=$V;for(let s=i;s<=a;++s)for(let c=r;c<=o;++c)if(Y3.isPointInPath(c,s))return!0;return!1}}function nN(e,t){return t.contains(e.x||0,e.y||0)}function TQ(e,t){let n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects($V.set(n,r,n+i,r+o))}function IQ(e,t){let n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return Du(t,n,r,i,o)}function Du(e,t,n,r,i){let{x1:o,y1:a,x2:s,y2:c}=e,l=r-t,u=i-n,f=0,d=1,p,h,m,g;for(g=0;g<4;++g){if(g===0&&(p=-l,h=-(o-t)),g===1&&(p=l,h=s-t),g===2&&(p=-u,h=-(a-n)),g===3&&(p=u,h=c-n),Math.abs(p)<1e-10&&h<0)return!1;if(m=h/p,p<0){if(m>d)return!1;m>f&&(f=m)}else if(p>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function Hu(e,t){e.globalCompositeOperation=t.blend||"source-over"}function A2(e,t){return e??t}function dQ(e,t){let n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function aye(e,t,n){let r=n.width(),i=n.height(),o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+A2(t.x1,.5)*r,n.y1+A2(t.y1,.5)*i,Math.max(r,i)*A2(t.r1,0),n.x1+A2(t.x2,.5)*r,n.y1+A2(t.y2,.5)*i,Math.max(r,i)*A2(t.r2,.5));else{let a=A2(t.x1,0),s=A2(t.y1,0),c=A2(t.x2,1),l=A2(t.y2,0);if(a===c||s===l||r===i)o=e.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+c*r,n.y1+l*i);else{let u=$o(Math.ceil(r),Math.ceil(i)),f=u.getContext("2d");return f.scale(r,i),f.fillStyle=dQ(f.createLinearGradient(a,s,c,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(u,"no-repeat")}}return dQ(o,t.stops)}function FQ(e,t,n){return XV(n)?aye(e,n,t.bounds):n}function rx(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=FQ(e,t,t.fill),!0):!1}var sye=[];function Lu(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=FQ(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||sye),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function cye(e,t){return e.zindex-t.zindex||e.index-t.index}function rN(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(cye)}function N2(e,t){var n=e.items,r,i;if(!n||!n.length)return;let o=rN(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function ix(e,t){var n=e.items,r,i;if(!n||!n.length)return null;let o=rN(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function iN(e){return function(t,n,r){N2(n,i=>{(!r||r.intersects(i.bounds))&&RQ(e,t,i,i)})}}function lye(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&RQ(e,t,n.items[0],n.items)}}function RQ(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Hu(t,n),n.fill&&rx(t,n,i)&&t.fill(),n.stroke&&Lu(t,n,i)&&t.stroke()))}function gx(e){return e=e||fr,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,ix(n,s=>{let c=s.bounds;if(!(c&&!c.contains(o,a)||!c)&&e(t,s,r,i,o,a))return s})}}function R7(e,t){return function(n,r,i,o){var a=Array.isArray(r)?r[0]:r,s=t??a.fill,c=a.stroke&&n.isPointInStroke,l,u;return c&&(l=a.strokeWidth,u=a.strokeCap,n.lineWidth=l??1,n.lineCap=u??"butt"),e(n,r)?!1:s&&n.isPointInPath(i,o)||c&&n.isPointInStroke(i,o)}}function oN(e){return gx(R7(e))}function Gl(e,t){return"translate("+e+","+t+")"}function aN(e){return"rotate("+e+")"}function uye(e,t){return"scale("+e+","+t+")"}function OQ(e){return Gl(e.x||0,e.y||0)}function fye(e){return Gl(e.x||0,e.y||0)+(e.angle?" "+aN(e.angle):"")}function dye(e){return Gl(e.x||0,e.y||0)+(e.angle?" "+aN(e.angle):"")+(e.scaleX||e.scaleY?" "+uye(e.scaleX||1,e.scaleY||1):"")}function sN(e,t,n){function r(a,s){a("transform",fye(s)),a("d",t(null,s))}function i(a,s){return t(F7(a,s.angle),s),Ka(a,s).translate(s.x||0,s.y||0)}function o(a,s){var c=s.x||0,l=s.y||0,u=s.angle||0;a.translate(c,l),u&&a.rotate(u*=X3),a.beginPath(),t(a,s),u&&a.rotate(-u),a.translate(-c,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:iN(o),pick:oN(o),isect:n||tN(o)}}var pye=sN("arc",Kve);function hye(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,a,s;--i>=0;)e[i].defined!==!1&&(s=Math.abs(e[i][r]-n),s<o&&(o=s,a=e[i]));return a}function mye(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,a;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],a=i*i+o*o,a<n))return e[r];return null}function gye(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function cN(e,t,n){function r(c,l){var u=l.mark.items;u.length&&c("d",t(null,u))}function i(c,l){var u=l.items;return u.length===0?c:(t(F7(c),u),Ka(c,u[0]))}function o(c,l){c.beginPath(),t(c,l)}let a=R7(o);function s(c,l,u,f,d,p){var h=l.items,m=l.bounds;return!h||!h.length||m&&!m.contains(d,p)?null:(u*=c.pixelRatio,f*=c.pixelRatio,a(c,h,u,f)?h[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:lye(o),pick:s,isect:nN,tip:n}}var vye=cN("area",Zve,hye);function yye(e,t){var n=t.clip;e.save(),Te(n)?(e.beginPath(),n(e),e.clip()):PQ(e,t.group)}function PQ(e,t){e.beginPath(),ZV(t)?Au(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function $Q(e){let t=A2(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function xye(e,t){e("transform",OQ(t))}function BQ(e,t){let n=$Q(t);e("d",Au(null,t,n,n))}function Cye(e,t){e("class","background"),e("aria-hidden",!0),BQ(e,t)}function bye(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?BQ(e,t):e("d","")}function Mye(e,t,n){let r=t.clip?JV(n,t,t):null;e("clip-path",r)}function wye(e,t){if(!t.clip&&t.items){let n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Ka(e,t),e.translate(t.x||0,t.y||0)}function H7(e,t,n,r){let i=$Q(t);e.beginPath(),Au(e,t,(n||0)+i,(r||0)+i)}var Sye=R7(H7),Eye=R7(H7,!1),Dye=R7(H7,!0);function zye(e,t,n,r){N2(t,i=>{let o=i.x||0,a=i.y||0,s=i.strokeForeground,c=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&c&&(H7(e,i,o,a),Hu(e,i),i.fill&&rx(e,i,c)&&e.fill(),i.stroke&&!s&&Lu(e,i,c)&&e.stroke()),e.save(),e.translate(o,a),i.clip&&PQ(e,i),n&&n.translate(-o,-a),N2(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(o,a),e.restore(),s&&i.stroke&&c&&(H7(e,i,o,a),Hu(e,i),Lu(e,i,c)&&e.stroke())})}function Hye(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;let a=n*e.pixelRatio,s=r*e.pixelRatio;return ix(t,c=>{let l,u,f,d=c.bounds;if(d&&!d.contains(i,o))return;u=c.x||0,f=c.y||0;let p=u+(c.width||0),h=f+(c.height||0),m=c.clip;if(m&&(i<u||i>p||o<f||o>h))return;if(e.save(),e.translate(u,f),u=i-u,f=o-f,m&&ZV(c)&&!Dye(e,c,a,s))return e.restore(),null;let g=c.strokeForeground,v=t.interactive!==!1;return v&&g&&c.stroke&&Eye(e,c,a,s)?(e.restore(),c):(l=ix(c,y=>Lye(y,u,f)?this.pick(y,n,r,u,f):null),!l&&v&&(c.fill||!g&&c.stroke)&&Sye(e,c,a,s)&&(l=c),e.restore(),l||null)})}function Lye(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Aye={type:"group",tag:"g",nested:!1,attr:xye,bound:wye,draw:zye,pick:Hye,isect:TQ,content:Mye,background:Cye,foreground:bye},L7={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function lN(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function uN(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function fN(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function vx(e,t){return e==="center"?t/2:e==="right"?t:0}function yx(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Vye(e,t,n){let r=lN(t,n),i=uN(t,r),o=fN(t,r),a=(t.x||0)-vx(t.align,i),s=(t.y||0)-yx(t.baseline,o),c=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",c,L7["xmlns:xlink"],"xlink:href"),e("transform",Gl(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Nye(e,t){let n=t.image,r=uN(t,n),i=fN(t,n),o=(t.x||0)-vx(t.align,r),a=(t.y||0)-yx(t.baseline,i);return e.set(o,a,o+r,a+i)}function _ye(e,t,n){N2(t,r=>{if(n&&!n.intersects(r.bounds))return;let i=lN(r,this),o=uN(r,i),a=fN(r,i);if(o===0||a===0)return;let s=(r.x||0)-vx(r.align,o),c=(r.y||0)-yx(r.baseline,a),l,u,f,d;r.aspect!==!1&&(u=i.width/i.height,f=r.width/r.height,u===u&&f===f&&u!==f&&(f<u?(d=o/u,c+=(a-d)/2,a=d):(d=a*u,s+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(Hu(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,s,c,o,a))})}var kye={type:"image",tag:"image",nested:!1,attr:Vye,bound:Nye,draw:_ye,pick:gx(),isect:fr,get:lN,xOffset:vx,yOffset:yx},Tye=cN("line",Jve,mye);function Iye(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",dye(t)),e("d",t.path)}function Jy(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*X3,c=t.pathCache;(!c||c.path!==n)&&((t.pathCache=c=Wl(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),zu(e,c,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):zu(e,c,r,i,o,a)}function Fye(e,t){return Jy(F7(e,t.angle),t)?e.set(0,0,0,0):Ka(e,t,!0)}var Rye={type:"path",tag:"path",nested:!1,attr:Iye,bound:Fye,draw:iN(Jy),pick:oN(Jy),isect:tN(Jy)};function Oye(e,t){e("d",Au(null,t))}function Pye(e,t){var n,r;return Ka(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function pQ(e,t){e.beginPath(),Au(e,t)}var $ye={type:"rect",tag:"path",nested:!1,attr:Oye,bound:Pye,draw:iN(pQ),pick:oN(pQ),isect:TQ};function Bye(e,t){e("transform",OQ(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Uye(e,t){var n,r;return Ka(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function UQ(e,t,n){var r,i,o,a;return t.stroke&&Lu(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0):!1}function jye(e,t,n){N2(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&UQ(e,r,i)&&(Hu(e,r),e.stroke())}})}function qye(e,t,n,r){return e.isPointInStroke?UQ(e,t,1)&&e.isPointInStroke(n,r):!1}var Gye={type:"rule",tag:"line",nested:!1,attr:Bye,bound:Uye,draw:jye,pick:gx(qye),isect:IQ},Wye=sN("shape",eye),Yye=sN("symbol",tye,nN),hQ=kH(),H1={height:Za,measureWidth:dN,estimateWidth:ox,width:ox,canvas:jQ};jQ(!0);function jQ(e){H1.width=e&&Y3?dN:ox}function ox(e,t){return qQ(K3(e,t),Za(e))}function qQ(e,t){return~~(.8*e.length*t)}function dN(e,t){return Za(e)<=0||!(t=K3(e,t))?0:GQ(t,Cx(e))}function GQ(e,t){let n=`(${t}) ${e}`,r=hQ.get(n);return r===void 0&&(Y3.font=t,r=Y3.measureText(e).width,hQ.set(n,r)),r}function Za(e){return e.fontSize!=null?+e.fontSize||0:11}function Q3(e){return e.lineHeight!=null?e.lineHeight:Za(e)+2}function Xye(e){return F(e)?e.length>1?e:e[0]:e}function O7(e){return Xye(e.lineBreak&&e.text&&!F(e.text)?e.text.split(e.lineBreak):e.text)}function xx(e){let t=O7(e);return(F(t)?t.length-1:0)*Q3(e)}function K3(e,t){let n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Kye(e,n):n}function Qye(e){if(H1.width===dN){let t=Cx(e);return n=>GQ(n,t)}else if(H1.width===ox){let t=Za(e);return n=>qQ(n,t)}else return t=>H1.width(e,t)}function Kye(e,t){var n=+e.limit,r=Qye(e);if(r(t)<n)return t;var i=e.ellipsis||"\u2026",o=e.dir==="rtl",a=0,s=t.length,c;if(n-=r(i),o){for(;a<s;)c=a+s>>>1,r(t.slice(c))>n?a=c+1:s=c;return i+t.slice(a)}else{for(;a<s;)c=1+(a+s>>>1),r(t.slice(0,c))<n?a=c:s=c-1;return t.slice(0,a)+i}}function P7(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Cx(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Za(e)+"px "+P7(e,t)}function pN(e){var t=e.baseline,n=Za(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Q3(e):t==="line-bottom"?.29*n-.5*Q3(e):0)}var Zye={left:"start",center:"middle",right:"end"},E7=new Vn;function bx(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Bl,t+=r*Math.cos(i),n+=r*Math.sin(i)),E7.x1=t,E7.y1=n,E7}function Jye(e,t){var n=t.dx||0,r=(t.dy||0)+pN(t),i=bx(t),o=i.x1,a=i.y1,s=t.angle||0,c;e("text-anchor",Zye[t.align]||"start"),s?(c=Gl(o,a)+" "+aN(s),(n||r)&&(c+=" "+Gl(n,r))):c=Gl(o+n,a+r),e("transform",c)}function hN(e,t,n){var r=H1.height(t),i=t.align,o=bx(t),a=o.x1,s=o.y1,c=t.dx||0,l=(t.dy||0)+pN(t)-Math.round(.8*r),u=O7(t),f;if(F(u)?(r+=Q3(t)*(u.length-1),f=u.reduce((d,p)=>Math.max(d,H1.width(t,p)),0)):f=H1.width(t,u),i==="center"?c-=f/2:i==="right"&&(c-=f),e.set(c+=a,l+=s,c+f,l+r),t.angle&&!n)e.rotate(t.angle*X3,a,s);else if(n===2)return e.rotatedPoints(t.angle*X3,a,s);return e}function exe(e,t,n){N2(t,r=>{var i=r.opacity==null?1:r.opacity,o,a,s,c,l,u,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=Cx(r),e.textAlign=r.align||"left",o=bx(r),a=o.x1,s=o.y1,r.angle&&(e.save(),e.translate(a,s),e.rotate(r.angle*X3),a=s=0),a+=r.dx||0,s+=(r.dy||0)+pN(r),u=O7(r),Hu(e,r),F(u))for(l=Q3(r),c=0;c<u.length;++c)f=K3(r,u[c]),r.fill&&rx(e,r,i)&&e.fillText(f,a,s),r.stroke&&Lu(e,r,i)&&e.strokeText(f,a,s),s+=l;else f=K3(r,u),r.fill&&rx(e,r,i)&&e.fillText(f,a,s),r.stroke&&Lu(e,r,i)&&e.strokeText(f,a,s);r.angle&&e.restore()}})}function txe(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=bx(t),s=a.x1,c=a.y1,l=hN(E7,t,1),u=-t.angle*X3,f=Math.cos(u),d=Math.sin(u),p=f*i-d*o+(s-f*s+d*c),h=d*i+f*o+(c-d*s-f*c);return l.contains(p,h)}function nxe(e,t){let n=hN(E7,e,2);return Du(t,n[0],n[1],n[2],n[3])||Du(t,n[0],n[1],n[4],n[5])||Du(t,n[4],n[5],n[6],n[7])||Du(t,n[2],n[3],n[6],n[7])}var rxe={type:"text",tag:"text",nested:!1,attr:Jye,bound:hN,draw:exe,pick:gx(txe),isect:nxe},ixe=cN("trail",nye,gye),Zi={arc:pye,area:vye,group:Aye,image:kye,line:Tye,path:Rye,rect:$ye,rule:Gye,shape:Wye,symbol:Yye,text:rxe,trail:ixe};function BV(e,t,n){var r=Zi[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Vn),e,n)}var mQ={mark:null};function WQ(e,t,n){var r=Zi[e.marktype],i=r.bound,o=e.items,a=o&&o.length,s,c,l,u;if(r.nested)return a?l=o[0]:(mQ.mark=e,l=mQ),u=BV(l,i,n),t=t&&t.union(u)||u,t;if(t=t||e.bounds&&e.bounds.clear()||new Vn,a)for(s=0,c=o.length;s<c;++s)t.union(BV(o[s],i,n));return e.bounds=t}var oxe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function YQ(e,t){return JSON.stringify(e,oxe,t)}function XQ(e){let t=typeof e=="string"?JSON.parse(e):e;return QQ(t)}function QQ(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&QQ(n[i]);return t&&WQ(e),e}function Mx(e){arguments.length?this.root=XQ(e):(this.root=KQ({marktype:"group",name:"root",role:"frame"}),this.root.items=[new I7(this.root)])}Mx.prototype={toJSON(e){return YQ(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];let r=KQ(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function KQ(e,t){let n={bounds:new Vn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function G3(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function mN(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function mr(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=G3(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function qo(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function ZQ(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function $7(e,t){let n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function axe(e,t,n,r){var i=e&&e.mark,o,a;if(i&&(o=Zi[i.marktype]).tip){for(a=$7(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=o.tip(i.items,a)}return e}function Z3(e,t){this._active=null,this._handlers={},this._loader=e||ou(),this._tooltip=t||sxe}function sxe(e,t,n,r){e.element().setAttribute("title",r||"")}Z3.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){let t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(let r in t)n.push(...t[r]);return n},eventName(e){let t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{let i=new MouseEvent(e.type,e),o=G3(null,"a");for(let a in r)o.setAttribute(a,r[a]);o.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=axe(t,e,this.canvas(),this._origin);let r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){let t=this.canvas();if(!t)return;let n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),a=i.height(),s=i.x1+r[0]+n.left,c=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,c+=e.y||0;return{x:s,y:c,width:o,height:a,left:s,top:c,right:s+o,bottom:c+a}}};function oo(e){this._el=null,this._bgcolor=null,this._loader=new eN(e)}oo.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e,t){let n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){let n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){let i=n._call;n._ready=n._loader.ready().then(o=>{o&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};var cxe="keydown",lxe="keypress",uxe="keyup",JQ="dragenter",ex="dragleave",eK="dragover",UV="pointerdown",fxe="pointerup",ax="pointermove",D7="pointerout",tK="pointerover",jV="mousedown",dxe="mouseup",nK="mousemove",qV="mouseout",rK="mouseover",sx="click",pxe="dblclick",hxe="wheel",iK="mousewheel",cx="touchstart",lx="touchmove",ux="touchend",mxe=[cxe,lxe,uxe,JQ,ex,eK,UV,fxe,ax,D7,tK,jV,dxe,nK,qV,rK,sx,pxe,hxe,iK,cx,lx,ux],GV=ax,A7=D7,WV=sx;function dc(e,t){Z3.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}var gxe=e=>e===cx||e===lx||e===ux?[cx,lx,ux]:[e];function gQ(e,t){gxe(t).forEach(n=>vxe(e,n))}function vxe(e,t){let n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function S7(e,t,n){t.forEach(r=>e.fire(r,n))}function vQ(e,t,n){return function(r){let i=this._active,o=this.pickEvent(r);o===i?S7(this,e,r):((!i||!i.exit)&&S7(this,n,r),this._active=o,S7(this,t,r),S7(this,e,r))}}function yQ(e){return function(t){S7(this,e,t),this._active=null}}ee(dc,Z3,{initialize(e,t,n){return this._canvas=e&&mN(e,"canvas"),[sx,jV,UV,ax,D7,ex].forEach(r=>gQ(this,r)),Z3.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:mxe,DOMMouseScroll(e){this.fire(iK,e)},pointermove:vQ([ax,nK],[tK,rK],[D7,qV]),dragover:vQ([eK],[JQ],[ex]),pointerout:yQ([D7,qV]),dragleave:yQ([ex]),pointerdown(e){this._down=this._active,this.fire(UV,e)},mousedown(e){this._down=this._active,this.fire(jV,e)},click(e){this._down===this._active&&(this.fire(sx,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(cx,e,!0)},touchmove(e){this.fire(lx,e,!0)},touchend(e){this.fire(ux,e,!0),this._touch=null},fire(e,t,n){let r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===WV&&r&&r.href?this.handleHref(t,r,r.href):(e===GV||e===A7)&&this.handleTooltip(t,r,e!==A7),i)for(let o=0,a=i.length;o<a;++o)i[o].handler.call(this._obj,t,r)},on(e,t){let n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(gQ(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){let n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){let t=$7(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){let o=this.context();return Zi[e.marktype].pick.call(this,o,e,t,n,r,i)}});function yxe(){return typeof window<"u"&&window.devicePixelRatio||1}function xxe(e,t,n,r,i,o){let a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,s=e.getContext("2d"),c=a?yxe():i;e.width=t*c,e.height=n*c;for(let l in o)s[l]=o[l];return a&&c!==1&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=c,s.setTransform(c,0,0,c,c*r[0],c*r[1]),e}function V7(e){oo.call(this,e),this._options={},this._redraw=!1,this._dirty=new Vn,this._tempb=new Vn}var xQ=oo.prototype,Cxe=(e,t,n)=>new Vn().set(0,0,t,n).translate(-e[0],-e[1]);function bxe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}ee(V7,oo,{initialize(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:$o(1,1,this._options.type),e&&this._canvas&&(qo(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),xQ.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(xQ.resize.call(this,e,t,n,r),this._canvas)xxe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let i=this._options.externalContext;i||B("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){let t=this._tempb.clear().union(e.bounds),n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){let n=this.context(),r=this._origin,i=this._width,o=this._height,a=this._dirty,s=Cxe(r,i,o);n.save();let c=this._redraw||a.empty()?(this._redraw=!1,s.expand(1)):bxe(n,s.intersect(a),r);return this.clear(-r[0],-r[1],i,o),this.draw(n,e,c,t),n.restore(),a.clear(),this},draw(e,t,n,r){if(t.marktype!=="group"&&r!=null&&!r.includes(t.marktype))return;let i=Zi[t.marktype];t.clip&&yye(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()},clear(e,t,n,r){let i=this._options,o=this.context();i.type!=="pdf"&&!i.externalContext&&o.clearRect(e,t,n,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});function gN(e,t){Z3.call(this,e,t);let n=this;n._hrefHandler=YV(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=YV(n,(r,i)=>{n.handleTooltip(r,i,r.type!==A7)})}var YV=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};ee(gN,Z3,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(WV,this._hrefHandler),r.removeEventListener(GV,this._tooltipHandler),r.removeEventListener(A7,this._tooltipHandler)),this._svg=r=e&&mN(e,"svg"),r&&(r.addEventListener(WV,this._hrefHandler),r.addEventListener(GV,this._tooltipHandler),r.addEventListener(A7,this._tooltipHandler)),Z3.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){let n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){let o={type:e,handler:t,listener:YV(this,t)};(r[n]||(r[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){let n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});var oK="aria-hidden",vN="aria-label",yN="role",xN="aria-roledescription",aK="graphics-object",CN="graphics-symbol",sK=(e,t,n)=>({[yN]:e,[xN]:t,[vN]:n||void 0}),Mxe=dr(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),CQ={axis:{desc:"axis",caption:Exe},legend:{desc:"legend",caption:Dxe},"title-text":{desc:"title",caption:e=>`Title text '${MQ(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${MQ(e)}'`}},bQ={ariaRole:yN,ariaRoleDescription:xN,description:vN};function cK(e,t){let n=t.aria===!1;if(e(oK,n||void 0),n||t.description==null)for(let r in bQ)e(bQ[r],void 0);else{let r=t.mark.marktype;e(vN,t.description),e(yN,t.ariaRole||(r==="group"?aK:CN)),e(xN,t.ariaRoleDescription||`${r} mark`)}}function lK(e){return e.aria===!1?{[oK]:!0}:Mxe[e.role]?null:CQ[e.role]?Sxe(e,CQ[e.role]):wxe(e)}function wxe(e){let t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return sK(n?aK:CN,`${t} mark container`,e.description)}function Sxe(e,t){try{let n=e.items[0],r=t.caption||(()=>"");return sK(t.role||CN,t.desc,n.description||r(n))}catch{return null}}function MQ(e){return te(e.text).join(" ")}function Exe(e){let t=e.datum,n=e.orient,r=t.title?uK(e):null,i=e.context,o=i.scales[t.scale].value,a=i.dataflow.locale(),s=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${U3(s)?"discrete":s} scale with ${AV(a,o,e)}`}function Dxe(e){let t=e.datum,n=t.title?uK(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),a=e.context,s=a.scales[i[o[0]]].value,c=a.dataflow.locale();return Hxe(r)+(n?` titled '${n}'`:"")+` for ${zxe(o)} with ${AV(c,s,e)}`}function uK(e){try{return te(je(e.items).items[0].text).join(" ")}catch{return null}}function zxe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+je(e)}function Hxe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}var fK=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Lxe=e=>fK(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function bN(){let e="",t="",n="",r=[],i=()=>t=n="",o=c=>{t&&(e+=`${t}>${n}`,i()),r.push(c)},a=(c,l)=>(l!=null&&(t+=` ${c}="${Lxe(l)}"`),s),s={open(c){o(c),t="<"+c;for(var l=arguments.length,u=new Array(l>1?l-1:0),f=1;f<l;f++)u[f-1]=arguments[f];for(let d of u)for(let p in d)a(p,d[p]);return s},close(){let c=r.pop();return t?e+=t+(n?`>${n}</${c}>`:"/>"):e+=`</${c}>`,i(),s},attr:a,text:c=>(n+=fK(c),s),toString:()=>e};return s}var dK=e=>pK(bN(),e)+"";function pK(e,t){if(e.open(t.tagName),t.hasAttributes()){let n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){let n=t.childNodes;for(let r of n)r.nodeType===3?e.text(r.nodeValue):pK(e,r)}return e.close()}var fx={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},dx={blend:"mix-blend-mode"},hK={fill:"none","stroke-miterlimit":10},w7=0,wQ="http://www.w3.org/2000/xmlns/",hr=L7.xmlns;function wx(e){oo.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var IV=oo.prototype;ee(wx,oo,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=mr(e,0,"svg",hr),this._svg.setAttributeNS(wQ,"xmlns",hr),this._svg.setAttributeNS(wQ,"xmlns:xlink",L7["xmlns:xlink"]),this._svg.setAttribute("version",L7.version),this._svg.setAttribute("class","marks"),qo(e,1),this._root=mr(this._svg,w7,"g",hr),W3(this._root,hK),qo(this._svg,w7+1)),this.background(this._bgcolor),IV.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),IV.background.apply(this,arguments)},resize(e,t,n,r){return IV.resize.call(this,e,t,n,r),this._svg&&(W3(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){let e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=mr(e,w7,"rect",hr),W3(n,{width:this._width,height:this._height,fill:t}));let r=dK(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),qo(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;let e=this._dirty;if(!e.length||!this._dirtyID)return!0;let t=++this._dirtyID,n,r,i,o,a,s,c;for(a=0,s=e.length;a<s;++a)if(n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=Zi[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,SQ(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){o.nested&&r.items.length?(c=r.items[0],c._svg&&this._update(o,c._svg,c)):n._svg&&(c=n._svg.parentNode,c&&c.removeChild(n._svg)),n._svg=null;continue}n=o.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,SQ(n,t)):this._update(o,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,r){if(!this.isDirty(t))return t._svg;let i=this._svg,o=t.marktype,a=Zi[o],s=t.interactive===!1?"none":null,c=a.tag==="g",l=EQ(t,e,n,"g",i);if(o!=="group"&&r!=null&&!r.includes(o))return qo(l,0),t._svg;l.setAttribute("class",ZQ(t));let u=lK(t);for(let h in u)Ki(l,h,u[h]);c||Ki(l,"pointer-events",s),Ki(l,"clip-path",t.clip?JV(this,t,t.group):null);let f=null,d=0,p=h=>{let m=this.isDirty(h),g=EQ(h,l,f,a.tag,i);m&&(this._update(a,g,h),c&&Nxe(this,g,h,r)),f=g,++d};return a.nested?t.items.length&&p(t.items[0]):N2(t,p),qo(l,d),l},_update(e,t,n){fc=t,wi=t.__values__,cK(z7,n),e.attr(z7,n,this);let r=kxe[e.type];r&&r.call(this,e,t,n),fc&&this.style(fc,n)},style(e,t){if(t!=null){for(let n in fx){let r=n==="font"?P7(t):t[n];if(r===wi[n])continue;let i=fx[n];r==null?e.removeAttribute(i):(XV(r)&&(r=HQ(r,this._defs.gradient,mK())),e.setAttribute(i,r+"")),wi[n]=r}for(let n in dx)tx(e,dx[n],t[n])}},defs(){let e=this._svg,t=this._defs,n=t.el,r=0;for(let i in t.gradient)n||(t.el=n=mr(e,w7+1,"defs",hr)),r=Axe(n,t.gradient[i],r);for(let i in t.clipping)n||(t.el=n=mr(e,w7+1,"defs",hr)),r=Vxe(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):qo(n,r))},_clearDefs(){let e=this._defs;e.gradient={},e.clipping={}}});function SQ(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Axe(e,t,n){let r,i,o;if(t.gradient==="radial"){let a=mr(e,n++,"pattern",hr);W3(a,{id:nx+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=mr(a,0,"rect",hr),W3(a,{width:1,height:1,fill:`url(${mK()}#${t.id})`}),e=mr(e,n++,"radialGradient",hr),W3(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=mr(e,n++,"linearGradient",hr),W3(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=mr(e,r,"stop",hr),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return qo(e,r),n}function Vxe(e,t,n){let r;return e=mr(e,n,"clipPath",hr),e.setAttribute("id",t.id),t.path?(r=mr(e,0,"path",hr),r.setAttribute("d",t.path)):(r=mr(e,0,"rect",hr),W3(r,{x:0,y:0,width:t.width,height:t.height})),qo(e,1),n+1}function Nxe(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;N2(n,a=>{i=e.mark(t,a,i,r),++o}),qo(t,1+o)}function EQ(e,t,n,r,i){let o=e._svg,a;if(!o&&(a=t.ownerDocument,o=G3(a,r,hr),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){let s=G3(a,"path",hr);o.appendChild(s),s.__data__=e;let c=G3(a,"g",hr);o.appendChild(c),c.__data__=e;let l=G3(a,"path",hr);o.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(o.ownerSVGElement!==i||_xe(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function _xe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}var fc=null,wi=null,kxe={group(e,t,n){let r=fc=t.childNodes[2];wi=r.__values__,e.foreground(z7,n,this),wi=t.__values__,fc=t.childNodes[1],e.content(z7,n,this);let i=fc=t.childNodes[0];e.background(z7,n,this);let o=n.mark.interactive===!1?"none":null;if(o!==wi.events&&(Ki(r,"pointer-events",o),Ki(i,"pointer-events",o),wi.events=o),n.strokeForeground&&n.stroke){let a=n.fill;Ki(r,"display",null),this.style(i,n),Ki(i,"stroke",null),a&&(n.fill=null),wi=r.__values__,this.style(r,n),a&&(n.fill=a),fc=null}else Ki(r,"display","none")},image(e,t,n){n.smooth===!1?(tx(t,"image-rendering","optimizeSpeed"),tx(t,"image-rendering","pixelated")):tx(t,"image-rendering",null)},text(e,t,n){let r=O7(n),i,o,a,s;F(r)?(o=r.map(c=>K3(n,c)),i=o.join(`
`),i!==wi.text&&(qo(t,0),a=t.ownerDocument,s=Q3(n),o.forEach((c,l)=>{let u=G3(a,"tspan",hr);u.__data__=n,u.textContent=c,l&&(u.setAttribute("x",0),u.setAttribute("dy",s)),t.appendChild(u)}),wi.text=i)):(o=K3(n,r),o!==wi.text&&(t.textContent=o,wi.text=o)),Ki(t,"font-family",P7(n)),Ki(t,"font-size",Za(n)+"px"),Ki(t,"font-style",n.fontStyle),Ki(t,"font-variant",n.fontVariant),Ki(t,"font-weight",n.fontWeight)}};function z7(e,t,n){t!==wi[e]&&(n?Txe(fc,e,t,n):Ki(fc,e,t),wi[e]=t)}function tx(e,t,n){n!==wi[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),wi[t]=n)}function W3(e,t){for(let n in t)Ki(e,n,t[n])}function Ki(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Txe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function mK(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function MN(e){oo.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}ee(MN,oo,{svg(){return this._text},_render(e){let t=bN();t.open("svg",_e({},L7,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",hK,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){let n=Zi[t.marktype],r=n.tag,i=[cK,n.attr];e.open("g",{class:ZQ(t),"clip-path":t.clip?JV(this,t,t.group):null},lK(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});let o=a=>{let s=this.href(a);if(s&&e.open("a",s),e.open(r,this.attr(t,a,i,r!=="g"?r:null)),r==="text"){let c=O7(a);if(F(c)){let l={x:0,dy:Q3(a)};for(let u=0;u<c.length;++u)e.open("tspan",u?l:null).text(K3(a,c[u])).close()}else e.text(K3(a,c))}else if(r==="g"){let c=a.strokeForeground,l=a.fill,u=a.stroke;c&&u&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),N2(a,f=>this.mark(e,f)),e.close(),c&&u?(l&&(a.fill=null),a.stroke=u,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),l&&(a.fill=l)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),s&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):N2(t,o),e.close()},href(e){let t=e.href,n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){let i={},o=(a,s,c,l)=>{i[l||a]=s};return Array.isArray(n)?n.forEach(a=>a(o,t,this)):n(o,t,this),r&&Ixe(i,t,e,r,this._defs),i},defs(e){let t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(let i in t){let o=t[i],a=o.stops;o.gradient==="radial"?(e.open("pattern",{id:nx+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:i,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let s=0;s<a.length;++s)e.open("stop",{offset:a[s].offset,"stop-color":a[s].color}).close();e.close()}for(let i in n){let o=n[i];e.open("clipPath",{id:i}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});function Ixe(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=P7(t),e["font-size"]=Za(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(let a in fx){let s=t[a],c=fx[a];s==="transparent"&&(c==="fill"||c==="stroke")||s!=null&&(XV(s)&&(s=HQ(s,i.gradient,"")),e[c]=s)}for(let a in dx){let s=t[a];s!=null&&(o=o||[],o.push(`${dx[a]}: ${s};`))}return o&&(e.style=o.join(" ")),e}var V2={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Fxe(e){V2.svgMarkTypes=e.svgMarkTypes??["text"],V2.svgOnTop=e.svgOnTop??!0,V2.debug=e.debug??!1}function px(e){oo.call(this,e),this._svgRenderer=new wx(e),this._canvasRenderer=new V7(e)}var DQ=oo.prototype;ee(px,oo,{initialize(e,t,n,r,i){this._root_el=mr(e,0,"div");let o=mr(this._root_el,0,"div"),a=mr(this._root_el,1,"div");return this._root_el.style.position="relative",V2.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=V2.svgOnTop?a:o,this._canvasEl=V2.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),DQ.initialize.call(this,e,t,n,r,i)},dirty(e){return V2.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){let r=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(i=>!V2.svgMarkTypes.includes(i));this._svgRenderer.render(e,V2.svgMarkTypes),this._canvasRenderer.render(e,r)},resize(e,t,n,r){return DQ.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background(e){return V2.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function wN(e,t){dc.call(this,e,t)}ee(wN,dc,{initialize(e,t,n){let r=mr(mr(e,0,"div"),V2.svgOnTop?0:1,"div");return dc.prototype.initialize.call(this,r,t,n)}});var gK="canvas",vK="hybrid",yK="png",xK="svg",CK="none",pc={Canvas:gK,PNG:yK,SVG:xK,Hybrid:vK,None:CK},Yl={};Yl[gK]=Yl[yK]={renderer:V7,headless:V7,handler:dc};Yl[xK]={renderer:wx,headless:MN,handler:gN};Yl[vK]={renderer:px,headless:px,handler:wN};Yl[CK]={};function B7(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Yl[e]=t,this):Yl[e]}function SN(e,t,n){let r=[],i=new Vn().union(t),o=e.marktype;return o?bK(e,i,n,r):o==="group"?MK(e,i,n,r):B("Intersect scene must be mark node or group item.")}function bK(e,t,n,r){if(Rxe(e,t,n)){let i=e.items,o=e.marktype,a=i.length,s=0;if(o==="group")for(;s<a;++s)MK(i[s],t,n,r);else for(let c=Zi[o].isect;s<a;++s){let l=i[s];wK(l,t,c)&&r.push(l)}}return r}function Rxe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function MK(e,t,n,r){n&&n(e.mark)&&wK(e,t,Zi.group.isect)&&r.push(e);let i=e.items,o=i&&i.length;if(o){let a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let c=0;c<o;++c)bK(i[c],t,n,r);t.translate(a,s)}return r}function wK(e,t,n){let r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}var FV=new Vn;function EN(e){let t=e.clip;if(Te(t))t(F7(FV.clear()));else if(t)FV.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(FV)}var Oxe=1e-9;function DN(e,t,n){return e===t?!0:n==="path"?SK(e,t):e instanceof Date&&t instanceof Date?+e==+t:Pe(e)&&Pe(t)?Math.abs(e-t)<=Oxe:!e||!t||!ne(e)&&!ne(t)?e==t:Pxe(e,t)}function SK(e,t){return DN(Wl(e),Wl(t))}function Pxe(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!DN(e[i],t[i],i))return!1;return typeof e==typeof t}function $xe(){kQ(),fve()}var _u="top",_2="left",k2="right",t4="bottom",Bxe="top-left",Uxe="top-right",jxe="bottom-left",qxe="bottom-right",LN="start",zN="middle",Ji="end",Gxe="x",Wxe="y",Hx="group",AN="axis",VN="title",Yxe="frame",Xxe="scope",NN="legend",kK="row-header",TK="row-footer",IK="row-title",FK="column-header",RK="column-footer",OK="column-title",Qxe="padding",Kxe="symbol",PK="fit",$K="fit-x",BK="fit-y",Zxe="pad",_N="none",Sx="all",HN="each",kN="flush",J3="column",e4="row";function UK(e){$.call(this,null,e)}ee(UK,$,{transform(e,t){let n=t.dataflow,r=e.mark,i=r.marktype,o=Zi[i],a=o.bound,s=r.bounds,c;if(o.nested)r.items.length&&n.dirty(r.items[0]),s=Ex(r,a),r.items.forEach(l=>{l.bounds.clear().union(s)});else if(i===Hx||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),s.clear(),r.items.forEach(l=>s.union(Ex(l,a))),r.role){case AN:case NN:case VN:t.reflow()}else c=t.changed(t.REM),t.visit(t.ADD,l=>{s.union(Ex(l,a))}),t.visit(t.MOD,l=>{c=c||s.alignsWith(l.bounds),n.dirty(l),s.union(Ex(l,a))}),c&&(s.clear(),r.items.forEach(l=>s.union(l.bounds)));return EN(r),t.modifies("bounds")}});function Ex(e,t,n){return t(e.bounds.clear(),e,n)}var EK=":vega_identifier:";function TN(e){$.call(this,0,e)}TN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ee(TN,$,{transform(e,t){let n=Jxe(t.dataflow),r=e.as,i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function Jxe(e){return e._signals[EK]||(e._signals[EK]=e.add(0))}function jK(e){$.call(this,null,e)}ee(jK,$,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,eCe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);let r=n.marktype===Hx?I7:T7;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function eCe(e){let t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function qK(e){$.call(this,null,e)}var DK={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!GK(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},GK=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),zK=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(GK(i,o=e[n].bounds,t))return!0},tCe=e=>{let t=e.bounds;return t.width()>1&&t.height()>1},nCe=(e,t,n)=>{var r=e.range(),i=new Vn;return t===_u||t===t4?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},HK=e=>(e.forEach(t=>t.opacity=1),e),LK=(e,t)=>e.reflow(t.modified()).modifies("opacity");ee(qK,$,{transform(e,t){let n=DK[e.method]||DK.parity,r=e.separation||0,i=t.materialize(t.SOURCE).source,o,a;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(HK(i),t=LK(t,e)),t;if(i=i.filter(tCe),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=HK(i),t=LK(t,e),o.length>=3&&zK(o,r)){do o=n(o,r);while(o.length>=3&&zK(o,r));o.length<3&&!je(i).opacity&&(o.length>1&&(je(o).opacity=0),je(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=nCe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(c=>{a(c)||(c.opacity=0)}));let s=o[0].mark.bounds.clear();return i.forEach(c=>{c.opacity&&s.union(c.bounds)}),t}});function WK(e){$.call(this,null,e)}ee(WK,$,{transform(e,t){let n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){let r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});var Si=new Vn;function Nu(e,t,n){return e[t]===n?0:(e[t]=n,1)}function rCe(e){var t=e.items[0].orient;return t===_2||t===k2}function iCe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function oCe(e,t,n,r){var i=t.items[0],o=i.datum,a=i.translate!=null?i.translate:.5,s=i.orient,c=iCe(o),l=i.range,u=i.offset,f=i.position,d=i.minExtent,p=i.maxExtent,h=o.title&&i.items[c[2]].items[0],m=i.titlePadding,g=i.bounds,v=h&&xx(h),y=0,C=0,b,M;switch(Si.clear().union(g),g.clear(),(b=c[0])>-1&&g.union(i.items[b].bounds),(b=c[1])>-1&&g.union(i.items[b].bounds),s){case _u:y=f||0,C=-u,M=Math.max(d,Math.min(p,-g.y1)),g.add(0,-M).add(l,0),h&&Dx(e,h,M,m,v,0,-1,g);break;case _2:y=-u,C=f||0,M=Math.max(d,Math.min(p,-g.x1)),g.add(-M,0).add(0,l),h&&Dx(e,h,M,m,v,1,-1,g);break;case k2:y=n+u,C=f||0,M=Math.max(d,Math.min(p,g.x2)),g.add(0,0).add(M,l),h&&Dx(e,h,M,m,v,1,1,g);break;case t4:y=f||0,C=r+u,M=Math.max(d,Math.min(p,g.y2)),g.add(0,0).add(l,M),h&&Dx(e,h,M,m,0,0,1,g);break;default:y=i.x,C=i.y}return Ka(g.translate(y,C),i),Nu(i,"x",y+a)|Nu(i,"y",C+a)&&(i.bounds=Si,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function Dx(e,t,n,r,i,o,a,s){let c=t.bounds;if(t.auto){let l=a*(n+i+r),u=0,f=0;e.dirty(t),o?u=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(c.translate(-u,-f)),e.dirty(t)}s.union(c)}var AK=(e,t)=>Math.floor(Math.min(e,t)),VK=(e,t)=>Math.ceil(Math.max(e,t));function aCe(e){var t=e.items,n=t.length,r=0,i,o;let a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===Hx)switch(i.role){case AN:case NN:case VN:break;case kK:a.rowheaders.push(...o);break;case TK:a.rowfooters.push(...o);break;case FK:a.colheaders.push(...o);break;case RK:a.colfooters.push(...o);break;case IK:a.rowtitle=o[0];break;case OK:a.coltitle=o[0];break;default:a.marks.push(...o)}return a}function sCe(e){return new Vn().set(0,0,e.width||0,e.height||0)}function cCe(e){let t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function xn(e,t,n){let r=ne(e)?e[t]:e;return r??(n!==void 0?n:0)}function NK(e){return e<0?Math.ceil(-e):0}function YK(e,t,n){var r=!n.nodirty,i=n.bounds===kN?sCe:cCe,o=Si.set(0,0,0,0),a=xn(n.align,J3),s=xn(n.align,e4),c=xn(n.padding,J3),l=xn(n.padding,e4),u=n.columns||t.length,f=u<=0?1:Math.ceil(t.length/u),d=t.length,p=Array(d),h=Array(u),m=0,g=Array(d),v=Array(f),y=0,C=Array(d),b=Array(d),M=Array(d),S,w,E,D,z,H,j,L,_,A,T;for(w=0;w<u;++w)h[w]=0;for(w=0;w<f;++w)v[w]=0;for(w=0;w<d;++w)H=t[w],z=M[w]=i(H),H.x=H.x||0,C[w]=0,H.y=H.y||0,b[w]=0,E=w%u,D=~~(w/u),m=Math.max(m,j=Math.ceil(z.x2)),y=Math.max(y,L=Math.ceil(z.y2)),h[E]=Math.max(h[E],j),v[D]=Math.max(v[D],L),p[w]=c+NK(z.x1),g[w]=l+NK(z.y1),r&&e.dirty(t[w]);for(w=0;w<d;++w)w%u===0&&(p[w]=0),w<u&&(g[w]=0);if(a===HN)for(E=1;E<u;++E){for(T=0,w=E;w<d;w+=u)T<p[w]&&(T=p[w]);for(w=E;w<d;w+=u)p[w]=T+h[E-1]}else if(a===Sx){for(T=0,w=0;w<d;++w)w%u&&T<p[w]&&(T=p[w]);for(w=0;w<d;++w)w%u&&(p[w]=T+m)}else for(a=!1,E=1;E<u;++E)for(w=E;w<d;w+=u)p[w]+=h[E-1];if(s===HN)for(D=1;D<f;++D){for(T=0,w=D*u,S=w+u;w<S;++w)T<g[w]&&(T=g[w]);for(w=D*u;w<S;++w)g[w]=T+v[D-1]}else if(s===Sx){for(T=0,w=u;w<d;++w)T<g[w]&&(T=g[w]);for(w=u;w<d;++w)g[w]=T+y}else for(s=!1,D=1;D<f;++D)for(w=D*u,S=w+u;w<S;++w)g[w]+=v[D-1];for(_=0,w=0;w<d;++w)_=p[w]+(w%u?_:0),C[w]+=_-t[w].x;for(E=0;E<u;++E)for(A=0,w=E;w<d;w+=u)A+=g[w],b[w]+=A-t[w].y;if(a&&xn(n.center,J3)&&f>1)for(w=0;w<d;++w)z=a===Sx?m:h[w%u],_=z-M[w].x2-t[w].x-C[w],_>0&&(C[w]+=_/2);if(s&&xn(n.center,e4)&&u!==1)for(w=0;w<d;++w)z=s===Sx?y:v[~~(w/u)],A=z-M[w].y2-t[w].y-b[w],A>0&&(b[w]+=A/2);for(w=0;w<d;++w)o.union(M[w].translate(C[w],b[w]));switch(_=xn(n.anchor,Gxe),A=xn(n.anchor,Wxe),xn(n.anchor,J3)){case Ji:_-=o.width();break;case zN:_-=o.width()/2}switch(xn(n.anchor,e4)){case Ji:A-=o.height();break;case zN:A-=o.height()/2}for(_=Math.round(_),A=Math.round(A),o.clear(),w=0;w<d;++w)t[w].mark.bounds.clear();for(w=0;w<d;++w)H=t[w],H.x+=C[w]+=_,H.y+=b[w]+=A,o.union(H.mark.bounds.union(H.bounds.translate(C[w],b[w]))),r&&e.dirty(H);return o}function lCe(e,t,n){var r=aCe(t),i=r.marks,o=n.bounds===kN?uCe:fCe,a=n.offset,s=n.columns||i.length,c=s<=0?1:Math.ceil(i.length/s),l=c*s,u,f,d,p,h,m,g;let v=YK(e,i,n);v.empty()&&v.set(0,0,0,0),r.rowheaders&&(m=xn(n.headerBand,e4,null),u=zx(e,r.rowheaders,i,s,c,-xn(a,"rowHeader"),AK,0,o,"x1",0,s,1,m)),r.colheaders&&(m=xn(n.headerBand,J3,null),f=zx(e,r.colheaders,i,s,s,-xn(a,"columnHeader"),AK,1,o,"y1",0,1,s,m)),r.rowfooters&&(m=xn(n.footerBand,e4,null),d=zx(e,r.rowfooters,i,s,c,xn(a,"rowFooter"),VK,0,o,"x2",s-1,s,1,m)),r.colfooters&&(m=xn(n.footerBand,J3,null),p=zx(e,r.colfooters,i,s,s,xn(a,"columnFooter"),VK,1,o,"y2",l-s,1,s,m)),r.rowtitle&&(h=xn(n.titleAnchor,e4),g=xn(a,"rowTitle"),g=h===Ji?d+g:u-g,m=xn(n.titleBand,e4,.5),_K(e,r.rowtitle,g,0,v,m)),r.coltitle&&(h=xn(n.titleAnchor,J3),g=xn(a,"columnTitle"),g=h===Ji?p+g:f-g,m=xn(n.titleBand,J3,.5),_K(e,r.coltitle,g,1,v,m))}function uCe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function fCe(e,t){return e.bounds[t]}function zx(e,t,n,r,i,o,a,s,c,l,u,f,d,p){var h=n.length,m=0,g=0,v,y,C,b,M,S,w,E,D;if(!h)return m;for(v=u;v<h;v+=f)n[v]&&(m=a(m,c(n[v],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=o,y=0,b=t.length;y<b;++y)e.dirty(t[y]),t[y].mark.bounds.clear();for(v=u,y=0,b=t.length;y<b;++y,v+=f){for(S=t[y],M=S.mark.bounds,C=v;C>=0&&(w=n[C])==null;C-=d);s?(E=p==null?w.x:Math.round(w.bounds.x1+p*w.bounds.width()),D=m):(E=m,D=p==null?w.y:Math.round(w.bounds.y1+p*w.bounds.height())),M.union(S.bounds.translate(E-(S.x||0),D-(S.y||0))),S.x=E,S.y=D,e.dirty(S),g=a(g,M[l])}return g}function _K(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function dCe(e,t){let n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function pCe(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function hCe(e,t,n,r,i,o,a){let s=dCe(n,t),c=pCe(e,s("offset",0)),l=s("anchor",LN),u=l===Ji?1:l===zN?.5:0,f={align:HN,bounds:s("bounds",kN),columns:s("direction")==="vertical"?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case _2:f.anchor={x:Math.floor(r.x1)-c,column:Ji,y:u*(a||r.height()+2*r.y1),row:l};break;case k2:f.anchor={x:Math.ceil(r.x2)+c,y:u*(a||r.height()+2*r.y1),row:l};break;case _u:f.anchor={y:Math.floor(i.y1)-c,row:Ji,x:u*(o||i.width()+2*i.x1),column:l};break;case t4:f.anchor={y:Math.ceil(i.y2)+c,x:u*(o||i.width()+2*i.x1),column:l};break;case Bxe:f.anchor={x:c,y:c};break;case Uxe:f.anchor={x:o-c,y:c,column:Ji};break;case jxe:f.anchor={x:c,y:a-c,row:Ji};break;case qxe:f.anchor={x:o-c,y:a-c,column:Ji,row:Ji};break}return f}function mCe(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,a=n.x,s=n.y,c,l;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),vCe(e,n,n.items[0].items[0]),o=gCe(n,o),c=2*n.padding,l=2*n.padding,o.empty()||(c=Math.ceil(o.width()+c),l=Math.ceil(o.height()+l)),r.type===Kxe&&yCe(n.items[0].items[0].items[0].items),i!==_N&&(n.x=a=0,n.y=s=0),n.width=c,n.height=l,Ka(o.set(a,s,a+c,s+l),n),n.mark.bounds.clear().union(o),n}function gCe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function vCe(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&U7(e,n,i,o);else{var a=t.items[1].items[0],s=a.anchor,c=t.titlePadding||0,l=r-a.x,u=r-a.y;switch(a.orient){case _2:i+=Math.ceil(a.bounds.width())+c;break;case k2:case t4:break;default:o+=a.bounds.height()+c}switch((i||o)&&U7(e,n,i,o),a.orient){case _2:u+=Vu(t,n,a,s,1,1);break;case k2:l+=Vu(t,n,a,Ji,0,0)+c,u+=Vu(t,n,a,s,1,1);break;case t4:l+=Vu(t,n,a,s,0,0),u+=Vu(t,n,a,Ji,-1,0,1)+c;break;default:l+=Vu(t,n,a,s,0,0)}(l||u)&&U7(e,a,l,u),(l=Math.round(a.bounds.x1-r))<0&&(U7(e,n,-l,0),U7(e,a,-l,0))}}function Vu(e,t,n,r,i,o,a){let s=e.datum.type!=="symbol",c=n.datum.vgrad,l=s&&(o||!c)&&!a?t.items[0]:t,u=l.bounds[i?"y2":"x2"]-e.padding,f=c&&o?u:0,d=c&&o?0:u,p=i<=0?0:xx(n);return Math.round(r===LN?f:r===Ji?d-p:.5*(u-p))}function U7(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function yCe(e){let t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function xCe(e,t,n,r,i){var o=t.items[0],a=o.frame,s=o.orient,c=o.anchor,l=o.offset,u=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],p=s===_2||s===k2?r:n,h=0,m=0,g=0,v=0,y=0,C;if(a!==Hx?s===_2?(h=i.y2,p=i.y1):s===k2?(h=i.y1,p=i.y2):(h=i.x1,p=i.x2):s===_2&&(h=r,p=0),C=c===LN?h:c===Ji?p:(h+p)/2,d&&d.text){switch(s){case _u:case t4:y=f.bounds.height()+u;break;case _2:v=f.bounds.width()+u;break;case k2:v=-f.bounds.width()-u;break}Si.clear().union(d.bounds),Si.translate(v-(d.x||0),y-(d.y||0)),Nu(d,"x",v)|Nu(d,"y",y)&&(e.dirty(d),d.bounds.clear().union(Si),d.mark.bounds.clear().union(Si),e.dirty(d)),Si.clear().union(d.bounds)}else Si.clear();switch(Si.union(f.bounds),s){case _u:m=C,g=i.y1-Si.height()-l;break;case _2:m=i.x1-Si.width()-l,g=C;break;case k2:m=i.x2+Si.width()+l,g=C;break;case t4:m=C,g=i.y2+l;break;default:m=o.x,g=o.y}return Nu(o,"x",m)|Nu(o,"y",g)&&(Si.translate(m,g),e.dirty(o),o.bounds.clear().union(Si),t.bounds.clear().union(Si),e.dirty(o)),o.bounds}function XK(e){$.call(this,null,e)}ee(XK,$,{transform(e,t){let n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&lCe(n,r,e.layout),bCe(n,r,e)}),CCe(e.mark.group)?t.reflow():t}});function CCe(e){return e&&e.mark.role!=="legend-entry"}function bCe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),a=new Vn().set(0,0,i,o),s=a.clone(),c=a.clone(),l=[],u,f,d,p,h,m;for(h=0,m=r.length;h<m;++h)switch(f=r[h],f.role){case AN:p=rCe(f)?s:c,p.union(oCe(e,f,i,o));break;case VN:u=f;break;case NN:l.push(mCe(e,f));break;case Yxe:case Xxe:case kK:case TK:case IK:case FK:case RK:case OK:s.union(f.bounds),c.union(f.bounds);break;default:a.union(f.bounds)}if(l.length){let g={};l.forEach(v=>{d=v.orient||k2,d!==_N&&(g[d]||(g[d]=[])).push(v)});for(let v in g){let y=g[v];YK(e,y,hCe(y,v,n.legends,s,c,i,o))}l.forEach(v=>{let y=v.bounds;if(y.equals(v._bounds)||(v.bounds=v._bounds,e.dirty(v),v.bounds=y,e.dirty(v)),n.autosize&&(n.autosize.type===PK||n.autosize.type===$K||n.autosize.type===BK))switch(v.orient){case _2:case k2:a.add(y.x1,0).add(y.x2,0);break;case _u:case t4:a.add(0,y.y1).add(0,y.y2)}else a.union(y)})}a.union(s).union(c),u&&a.union(xCe(e,u,i,o,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),MCe(e,t,a,n)}function MCe(e,t,n,r){let i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,c=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),u=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1)),d=Math.max(0,Math.ceil(n.x2-c)),p=Math.max(0,Math.ceil(n.y2-u));if(i.contains===Qxe){let h=e.padding();a-=h.left+h.right,s-=h.top+h.bottom}o===_N?(l=0,f=0,c=a,u=s):o===PK?(c=Math.max(0,a-l-d),u=Math.max(0,s-f-p)):o===$K?(c=Math.max(0,a-l-d),s=u+f+p):o===BK?(a=c+l+d,u=Math.max(0,s-f-p)):o===Zxe&&(a=c+l+d,s=u+f+p),e._resizeView(a,s,c,u,[l,f],i.resize)}var $N={};xr($N,{axisticks:()=>JK,datajoin:()=>eZ,encode:()=>tZ,legendentries:()=>nZ,linkpath:()=>RN,pie:()=>ON,scale:()=>sZ,sortitems:()=>lZ,stack:()=>PN});function JK(e){$.call(this,null,e)}ee(JK,$,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,s=Gy(o,a,e.minstep),c=e.format||zV(n,o,s,e.formatSpecifier,e.formatType,!!e.values),l=e.values?DV(o,e.values,s):Wy(o,s);return i&&(r.rem=i),i=l.map((u,f)=>ct({index:f/(l.length-1||1),value:u,label:c(u)})),e.extra&&i.length&&i.push(ct({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function eZ(e){$.call(this,null,e)}function wCe(){return ct({})}function SCe(e){let t=C3().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ee(eZ,$,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||wCe,o=e.key||De,a=this.value;return F(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&B("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=SCe(o)),t.visit(t.ADD,s=>{let c=o(s),l=a.get(c);l?l.exit?(a.empty--,r.add.push(l)):r.mod.push(l):(l=i(s),a.set(c,l),r.add.push(l)),l.datum=s,l.exit=!1}),t.visit(t.MOD,s=>{let c=o(s),l=a.get(c);l&&(l.datum=s,r.mod.push(l))}),t.visit(t.REM,s=>{let c=o(s),l=a.get(c);s===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}});function tZ(e){$.call(this,null,e)}ee(tZ,$,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(F(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var a=o==="enter",s=i.update||Ws,c=i.enter||Ws,l=i.exit||Ws,u=(o&&!a?i[o]:s)||Ws;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{c(f,e),s(f,e)}),n.modifies(c.output),n.modifies(s.output),u!==Ws&&u!==s&&(t.visit(t.ADD,f=>{u(f,e)}),n.modifies(u.output))),t.changed(t.REM)&&l!==Ws&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),a||u!==Ws){let f=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(f,d=>{let p=c(d,e)||r;(u(d,e)||p)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)):t.visit(f,d=>{(u(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)}return n.changed()?n:t.StopPropagation}});function nZ(e){$.call(this,[],e)}ee(nZ,$,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||b7,a=e.scale,s=+e.limit,c=Gy(a,e.count==null?5:e.count,e.minstep),l=!!e.values||o===b7,u=e.format||LV(n,a,c,o,e.formatSpecifier,e.formatType,l),f=e.values||HV(a,c),d,p,h,m,g;return i&&(r.rem=i),o===b7?(s&&f.length>s?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,s-1),g=!0):i=f,Te(h=e.size)?(!e.values&&a(i[0])===0&&(i=i.slice(1)),m=i.reduce((v,y)=>Math.max(v,h(y,e)),0)):h=gn(m=h||8),i=i.map((v,y)=>ct({index:y,label:u(v,y,i),value:v,offset:m,size:h(v,e)})),g&&(g=f[i.length],i.push(ct({index:i.length,label:`\u2026${f.length-i.length} entries`,value:g,offset:m,size:h(g,e)})))):o===ZX?(d=a.domain(),p=qy(a,d[0],je(d)),f.length<3&&!e.values&&d[0]!==je(d)&&(f=[d[0],je(d)]),i=f.map((v,y)=>ct({index:y,label:u(v,y,f),value:v,perc:p(v)}))):(h=f.length-1,p=tQ(a),i=f.map((v,y)=>ct({index:y,label:u(v,y,f),value:v,perc:y?p(v):0,perc2:y===h?1:p(f[y+1])}))),r.source=i,r.add=i,this.value=i,r}});var ECe=e=>e.source.x,DCe=e=>e.source.y,zCe=e=>e.target.x,HCe=e=>e.target.y;function RN(e){$.call(this,{},e)}RN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ee(RN,$,{transform(e,t){var n=e.sourceX||ECe,r=e.sourceY||DCe,i=e.targetX||zCe,o=e.targetY||HCe,a=e.as||"path",s=e.orient||"vertical",c=e.shape||"line",l=QK.get(c+"-"+s)||QK.get(c);return l||B("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,u=>{u[a]=l(n(u),r(u),i(u),o(u))}),t.reflow(e.modified()).modifies(a)}});var rZ=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,LCe=(e,t,n,r)=>rZ(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),iZ=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.hypot(i,o)/2,s=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+s+" 0 1 "+n+","+r},ACe=(e,t,n,r)=>iZ(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),oZ=(e,t,n,r)=>{let i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},VCe=(e,t,n,r)=>oZ(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),NCe=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,_Ce=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,kCe=(e,t,n,r)=>{let i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),c=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(c?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},TCe=(e,t,n,r)=>{let i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},ICe=(e,t,n,r)=>{let i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},FCe=(e,t,n,r)=>{let i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),c=(t+r)/2;return"M"+t*i+","+t*o+"C"+c*i+","+c*o+" "+c*a+","+c*s+" "+r*a+","+r*s},QK=C3({line:rZ,"line-radial":LCe,arc:iZ,"arc-radial":ACe,curve:oZ,"curve-radial":VCe,"orthogonal-horizontal":NCe,"orthogonal-vertical":_Ce,"orthogonal-radial":kCe,"diagonal-horizontal":TCe,"diagonal-vertical":ICe,"diagonal-radial":FCe});function ON(e){$.call(this,null,e)}ON.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ee(ON,$,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||Ta,a=e.startAngle||0,s=e.endAngle!=null?e.endAngle:2*Math.PI,c=t.source,l=c.map(o),u=l.length,f=a,d=(s-a)/Q6(l),p=Un(u),h,m,g;for(e.sort&&p.sort((v,y)=>l[v]-l[y]),h=0;h<u;++h)g=l[p[h]],m=c[p[h]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});var RCe=5;function OCe(e){let t=e.type;return!e.bins&&(t===Ol||t===Mu||t===wu)}function aZ(e){return y7(e)&&e!==L2}var PCe=dr(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function sZ(e){$.call(this,null,e),this.modified(!0)}ee(sZ,$,{transform(e,t){var n=t.dataflow,r=this.value,i=$Ce(e);(!r||i!==r.type)&&(this.value=r=ft(i)());for(i in e)if(!PCe[i]){if(i==="padding"&&aZ(r.type))continue;Te(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return WCe(r,e,GCe(r,e,UCe(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function $Ce(e){var t=e.type,n="",r;return t===L2?L2+"-"+Ol:(BCe(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?L2+"-":r===3?Pl+"-":""),(n+t||Ol).toLowerCase())}function BCe(e){let t=e.type;return y7(t)&&t!==$3&&t!==B3&&(e.scheme||e.range&&e.range.length&&e.range.every(Q))}function UCe(e,t,n){let r=jCe(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,a=t.zero||t.zero===void 0&&OCe(e),s,c;if(!i)return 0;if(aZ(o)&&t.padding&&i[0]!==je(i)&&(i=qCe(o,i,t.range,t.padding,t.exponent,t.constant)),(a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(s=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[s]<0&&(i[s]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[s]=t.domainMax),t.domainMid!=null)){c=t.domainMid;let l=c>i[s]?s+1:c<i[0]?0:s;l!==s&&n.warn("Scale domainMid exceeds domain min or max.",c),i.splice(l,0,c)}return e.domain(cZ(o,i,n)),o===Oy&&e.unknown(t.domainImplicit?du:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Gy(e,t.nice)||null),i.length}function jCe(e,t,n){return t?(e.domain(cZ(e.type,t,n)),t.length):-1}function qCe(e,t,n,r,i,o){var a=Math.abs(je(n)-n[0]),s=a/(a-2*r),c=e===Ya?Z5(t,null,s):e===wu?G6(t,null,s,.5):e===Mu?G6(t,null,s,i||1):e===p7?J5(t,null,s,o||1):K5(t,null,s);return t=t.slice(),t[0]=c[0],t[t.length-1]=c[1],t}function cZ(e,t,n){if(wV(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Z(t))}return t}function GCe(e,t,n){let r=t.bins;if(r&&!F(r)){let i=e.domain(),o=i[0],a=je(i),s=r.step,c=r.start==null?o:r.start,l=r.stop==null?a:r.stop;s||B("Scale bins parameter missing step property."),c<o&&(c=s*Math.ceil(o/s)),l>a&&(l=s*Math.floor(a/s)),r=Un(c,l+s/2,s)}return r?e.bins=r:e.bins&&delete e.bins,e.type===$y&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function WCe(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=YCe(r,t,n);else if(t.scheme&&(o=XCe(r,t,n),Te(o))){if(e.interpolator)return e.interpolator(o);B(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&SV(r))return e.interpolator(Su(FN(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(x7(t.interpolate,t.interpolateGamma)):Te(e.round)?e.round(i):Te(e.rangeRound)&&e.interpolate(i?Ga:bi),o&&e.range(FN(o,t.reverse))}function YCe(e,t,n){e!==yV&&e!==Py&&B("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===Py?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*d7(n,i,r)]}function XCe(e,t,n){var r=t.schemeExtent,i,o;return F(t.scheme)?o=Su(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=C7(i),o||B(`Unrecognized scheme name: ${t.scheme}`)),n=e===m7?n+1:e===$y?n-1:e===Rl||e===h7?+t.schemeCount||RCe:n,SV(e)?KK(o,r,t.reverse):Te(o)?jy(KK(o,r),n):e===Oy?o:o.slice(0,n)}function KK(e,t,n){return Te(e)&&(t||n)?Uy(e,FN(t||[0,1],n)):e}function FN(e,t){return t?e.slice().reverse():e}function lZ(e){$.call(this,null,e)}ee(lZ,$,{transform(e,t){let n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort($a(e.sort)),this.modified(n),t}});var ZK="zero",uZ="center",fZ="normalize",dZ=["y0","y1"];function PN(e){$.call(this,null,e)}PN.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:ZK,values:[ZK,uZ,fZ]},{name:"as",type:"string",array:!0,length:2,default:dZ}]};ee(PN,$,{transform(e,t){var n=e.as||dZ,r=n[0],i=n[1],o=$a(e.sort),a=e.field||Ta,s=e.offset===uZ?QCe:e.offset===fZ?KCe:ZCe,c,l,u,f;for(c=JCe(t.source,e.groupby,o,a),l=0,u=c.length,f=c.max;l<u;++l)s(c[l],f,a,r,i);return t.reflow(e.modified()).modifies(n)}});function QCe(e,t,n,r,i){for(var o=(t-e.sum)/2,a=e.length,s=0,c;s<a;++s)c=e[s],c[r]=o,c[i]=o+=Math.abs(n(c))}function KCe(e,t,n,r,i){for(var o=1/e.sum,a=0,s=e.length,c=0,l=0,u;c<s;++c)u=e[c],u[r]=a,u[i]=a=o*(l+=Math.abs(n(u)))}function ZCe(e,t,n,r,i){for(var o=0,a=0,s=e.length,c=0,l,u;c<s;++c)u=e[c],l=+n(u),l<0?(u[r]=a,u[i]=a+=l):(u[r]=o,u[i]=o+=l)}function JCe(e,t,n,r){var i=[],o=m=>m(u),a,s,c,l,u,f,d,p,h;if(t==null)i.push(e.slice());else for(a={},s=0,c=e.length;s<c;++s)u=e[s],f=t.map(o),d=a[f],d||(a[f]=d=[],i.push(d)),d.push(u);for(f=0,h=0,l=i.length;f<l;++f){for(d=i[f],s=0,p=0,c=d.length;s<c;++s)p+=Math.abs(r(d[s]));d.sum=p,p>h&&(h=p),n&&d.sort(n)}return i.max=h,i}var ok={};xr(ok,{contour:()=>K_,geojson:()=>J_,geopath:()=>ek,geopoint:()=>tk,geoshape:()=>nk,graticule:()=>rk,heatmap:()=>ik,isocontour:()=>X_,kde2d:()=>Q_,projection:()=>MJ});var he=1e-6,Xl=1e-12,Be=Math.PI,Rt=Be/2,ku=Be/4,jn=Be*2,Ot=180/Be,Re=Be/180,Ie=Math.abs,Go=Math.atan,Nn=Math.atan2,pe=Math.cos,j7=Math.ceil,Lx=Math.exp;var Ax=Math.hypot,Ql=Math.log,Vx=Math.pow,fe=Math.sin,Ei=Math.sign||function(e){return e>0?1:e<0?-1:0},Pt=Math.sqrt,Tu=Math.tan;function Nx(e){return e>1?0:e<-1?Be:Math.acos(e)}function fn(e){return e>1?Rt:e<-1?-Rt:Math.asin(e)}function dn(){}function _x(e,t){e&&hZ.hasOwnProperty(e.type)&&hZ[e.type](e,t)}var pZ={Feature:function(e,t){_x(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)_x(n[r].geometry,t)}},hZ={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){BN(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)BN(n[r],t,0)},Polygon:function(e,t){mZ(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)mZ(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)_x(n[r],t)}};function BN(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function mZ(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)BN(e[n],t,1);t.polygonEnd()}function L1(e,t){e&&pZ.hasOwnProperty(e.type)?pZ[e.type](e,t):_x(e,t)}var q7=new vn,kx=new vn,gZ,vZ,UN,jN,qN,T2={point:dn,lineStart:dn,lineEnd:dn,polygonStart:function(){q7=new vn,T2.lineStart=ebe,T2.lineEnd=tbe},polygonEnd:function(){var e=+q7;kx.add(e<0?jn+e:e),this.lineStart=this.lineEnd=this.point=dn},sphere:function(){kx.add(jn)}};function ebe(){T2.point=nbe}function tbe(){yZ(gZ,vZ)}function nbe(e,t){T2.point=yZ,gZ=e,vZ=t,e*=Re,t*=Re,UN=e,jN=pe(t=t/2+ku),qN=fe(t)}function yZ(e,t){e*=Re,t*=Re,t=t/2+ku;var n=e-UN,r=n>=0?1:-1,i=r*n,o=pe(t),a=fe(t),s=qN*a,c=jN*o+s*pe(i),l=s*r*fe(i);q7.add(Nn(l,c)),UN=e,jN=o,qN=a}function GN(e){return kx=new vn,L1(e,T2),kx*2}function Kl(e){return[Nn(e[1],e[0]),fn(e[2])]}function Wo(e){var t=e[0],n=e[1],r=pe(n);return[r*pe(t),r*fe(t),fe(n)]}function G7(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function hc(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Tx(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function W7(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Zl(e){var t=Pt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Mn,A1,_n,so,Jl,MZ,wZ,Iu,Y7,n4,gc,mc={point:WN,lineStart:xZ,lineEnd:CZ,polygonStart:function(){mc.point=EZ,mc.lineStart=rbe,mc.lineEnd=ibe,Y7=new vn,T2.polygonStart()},polygonEnd:function(){T2.polygonEnd(),mc.point=WN,mc.lineStart=xZ,mc.lineEnd=CZ,q7<0?(Mn=-(_n=180),A1=-(so=90)):Y7>he?so=90:Y7<-he&&(A1=-90),gc[0]=Mn,gc[1]=_n},sphere:function(){Mn=-(_n=180),A1=-(so=90)}};function WN(e,t){n4.push(gc=[Mn=e,_n=e]),t<A1&&(A1=t),t>so&&(so=t)}function SZ(e,t){var n=Wo([e*Re,t*Re]);if(Iu){var r=hc(Iu,n),i=[r[1],-r[0],0],o=hc(i,r);Zl(o),o=Kl(o);var a=e-Jl,s=a>0?1:-1,c=o[0]*Ot*s,l,u=Ie(a)>180;u^(s*Jl<c&&c<s*e)?(l=o[1]*Ot,l>so&&(so=l)):(c=(c+360)%360-180,u^(s*Jl<c&&c<s*e)?(l=-o[1]*Ot,l<A1&&(A1=l)):(t<A1&&(A1=t),t>so&&(so=t))),u?e<Jl?ao(Mn,e)>ao(Mn,_n)&&(_n=e):ao(e,_n)>ao(Mn,_n)&&(Mn=e):_n>=Mn?(e<Mn&&(Mn=e),e>_n&&(_n=e)):e>Jl?ao(Mn,e)>ao(Mn,_n)&&(_n=e):ao(e,_n)>ao(Mn,_n)&&(Mn=e)}else n4.push(gc=[Mn=e,_n=e]);t<A1&&(A1=t),t>so&&(so=t),Iu=n,Jl=e}function xZ(){mc.point=SZ}function CZ(){gc[0]=Mn,gc[1]=_n,mc.point=WN,Iu=null}function EZ(e,t){if(Iu){var n=e-Jl;Y7.add(Ie(n)>180?n+(n>0?360:-360):n)}else MZ=e,wZ=t;T2.point(e,t),SZ(e,t)}function rbe(){T2.lineStart()}function ibe(){EZ(MZ,wZ),T2.lineEnd(),Ie(Y7)>he&&(Mn=-(_n=180)),gc[0]=Mn,gc[1]=_n,Iu=null}function ao(e,t){return(t-=e)<0?t+360:t}function obe(e,t){return e[0]-t[0]}function bZ(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function YN(e){var t,n,r,i,o,a,s;if(so=_n=-(Mn=A1=1/0),n4=[],L1(e,mc),n=n4.length){for(n4.sort(obe),t=1,r=n4[0],o=[r];t<n;++t)i=n4[t],bZ(r,i[0])||bZ(r,i[1])?(ao(r[0],i[1])>ao(r[0],r[1])&&(r[1]=i[1]),ao(i[0],r[1])>ao(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(s=ao(r[1],i[0]))>a&&(a=s,Mn=i[0],_n=r[1])}return n4=gc=null,Mn===1/0||A1===1/0?[[NaN,NaN],[NaN,NaN]]:[[Mn,A1],[_n,so]]}var X7,Ix,Fx,Rx,Ox,Px,$x,Bx,XN,QN,KN,HZ,LZ,e1,t1,n1,I2={sphere:dn,point:ZN,lineStart:DZ,lineEnd:zZ,polygonStart:function(){I2.lineStart=cbe,I2.lineEnd=lbe},polygonEnd:function(){I2.lineStart=DZ,I2.lineEnd=zZ}};function ZN(e,t){e*=Re,t*=Re;var n=pe(t);Q7(n*pe(e),n*fe(e),fe(t))}function Q7(e,t,n){++X7,Fx+=(e-Fx)/X7,Rx+=(t-Rx)/X7,Ox+=(n-Ox)/X7}function DZ(){I2.point=abe}function abe(e,t){e*=Re,t*=Re;var n=pe(t);e1=n*pe(e),t1=n*fe(e),n1=fe(t),I2.point=sbe,Q7(e1,t1,n1)}function sbe(e,t){e*=Re,t*=Re;var n=pe(t),r=n*pe(e),i=n*fe(e),o=fe(t),a=Nn(Pt((a=t1*o-n1*i)*a+(a=n1*r-e1*o)*a+(a=e1*i-t1*r)*a),e1*r+t1*i+n1*o);Ix+=a,Px+=a*(e1+(e1=r)),$x+=a*(t1+(t1=i)),Bx+=a*(n1+(n1=o)),Q7(e1,t1,n1)}function zZ(){I2.point=ZN}function cbe(){I2.point=ube}function lbe(){AZ(HZ,LZ),I2.point=ZN}function ube(e,t){HZ=e,LZ=t,e*=Re,t*=Re,I2.point=AZ;var n=pe(t);e1=n*pe(e),t1=n*fe(e),n1=fe(t),Q7(e1,t1,n1)}function AZ(e,t){e*=Re,t*=Re;var n=pe(t),r=n*pe(e),i=n*fe(e),o=fe(t),a=t1*o-n1*i,s=n1*r-e1*o,c=e1*i-t1*r,l=Ax(a,s,c),u=fn(l),f=l&&-u/l;XN.add(f*a),QN.add(f*s),KN.add(f*c),Ix+=u,Px+=u*(e1+(e1=r)),$x+=u*(t1+(t1=i)),Bx+=u*(n1+(n1=o)),Q7(e1,t1,n1)}function JN(e){X7=Ix=Fx=Rx=Ox=Px=$x=Bx=0,XN=new vn,QN=new vn,KN=new vn,L1(e,I2);var t=+XN,n=+QN,r=+KN,i=Ax(t,n,r);return i<Xl&&(t=Px,n=$x,r=Bx,Ix<he&&(t=Fx,n=Rx,r=Ox),i=Ax(t,n,r),i<Xl)?[NaN,NaN]:[Nn(n,t)*Ot,fn(r/i)*Ot]}function K7(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function e_(e,t){return Ie(e)>Be&&(e-=Math.round(e/jn)*jn),[e,t]}e_.invert=e_;function t_(e,t,n){return(e%=jn)?t||n?K7(NZ(e),_Z(t,n)):NZ(e):t||n?_Z(t,n):e_}function VZ(e){return function(t,n){return t+=e,Ie(t)>Be&&(t-=Math.round(t/jn)*jn),[t,n]}}function NZ(e){var t=VZ(e);return t.invert=VZ(-e),t}function _Z(e,t){var n=pe(e),r=fe(e),i=pe(t),o=fe(t);function a(s,c){var l=pe(c),u=pe(s)*l,f=fe(s)*l,d=fe(c),p=d*n+u*r;return[Nn(f*i-p*o,u*n-d*r),fn(p*i+f*o)]}return a.invert=function(s,c){var l=pe(c),u=pe(s)*l,f=fe(s)*l,d=fe(c),p=d*i-f*o;return[Nn(f*i+d*o,u*n+p*r),fn(p*n-u*r)]},a}function kZ(e){e=t_(e[0]*Re,e[1]*Re,e.length>2?e[2]*Re:0);function t(n){return n=e(n[0]*Re,n[1]*Re),n[0]*=Ot,n[1]*=Ot,n}return t.invert=function(n){return n=e.invert(n[0]*Re,n[1]*Re),n[0]*=Ot,n[1]*=Ot,n},t}function IZ(e,t,n,r,i,o){if(n){var a=pe(t),s=fe(t),c=r*n;i==null?(i=t+r*jn,o=t-c/2):(i=TZ(a,i),o=TZ(a,o),(r>0?i<o:i>o)&&(i+=r*jn));for(var l,u=i;r>0?u>o:u<o;u-=c)l=Kl([a,-s*pe(u),-s*fe(u)]),e.point(l[0],l[1])}}function TZ(e,t){t=Wo(t),t[0]-=e,Zl(t);var n=Nx(-t[1]);return((-t[2]<0?-n:n)+jn-he)%jn}function Ux(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:dn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Fu(e,t){return Ie(e[0]-t[0])<he&&Ie(e[1]-t[1])<he}function jx(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function qx(e,t,n,r,i){var o=[],a=[],s,c;if(e.forEach(function(h){if(!((m=h.length-1)<=0)){var m,g=h[0],v=h[m],y;if(Fu(g,v)){if(!g[2]&&!v[2]){for(i.lineStart(),s=0;s<m;++s)i.point((g=h[s])[0],g[1]);i.lineEnd();return}v[0]+=2*he}o.push(y=new jx(g,h,null,!0)),a.push(y.o=new jx(g,null,y,!1)),o.push(y=new jx(v,h,null,!1)),a.push(y.o=new jx(v,null,y,!0))}}),!!o.length){for(a.sort(t),FZ(o),FZ(a),s=0,c=a.length;s<c;++s)a[s].e=n=!n;for(var l=o[0],u,f;;){for(var d=l,p=!0;d.v;)if((d=d.n)===l)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,c=u.length;s<c;++s)i.point((f=u[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(u=d.p.z,s=u.length-1;s>=0;--s)i.point((f=u[s])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,u=d.z,p=!p}while(!d.v);i.lineEnd()}}}function FZ(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function n_(e){return Ie(e[0])<=Be?e[0]:Ei(e[0])*((Ie(e[0])+Be)%jn-Be)}function RZ(e,t){var n=n_(t),r=t[1],i=fe(r),o=[fe(n),-pe(n),0],a=0,s=0,c=new vn;i===1?r=Rt+he:i===-1&&(r=-Rt-he);for(var l=0,u=e.length;l<u;++l)if(d=(f=e[l]).length)for(var f,d,p=f[d-1],h=n_(p),m=p[1]/2+ku,g=fe(m),v=pe(m),y=0;y<d;++y,h=b,g=S,v=w,p=C){var C=f[y],b=n_(C),M=C[1]/2+ku,S=fe(M),w=pe(M),E=b-h,D=E>=0?1:-1,z=D*E,H=z>Be,j=g*S;if(c.add(Nn(j*D*fe(z),v*w+j*pe(z))),a+=H?E+D*jn:E,H^h>=n^b>=n){var L=hc(Wo(p),Wo(C));Zl(L);var _=hc(o,L);Zl(_);var A=(H^E>=0?-1:1)*fn(_[2]);(r>A||r===A&&(L[0]||L[1]))&&(s+=H^E>=0?1:-1)}}return(a<-he||a<he&&c<-Xl)^s&1}function Gx(e,t,n,r){return function(i){var o=t(i),a=Ux(),s=t(a),c=!1,l,u,f,d={point:p,lineStart:m,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=C,u=[],l=[]},polygonEnd:function(){d.point=p,d.lineStart=m,d.lineEnd=g,u=X6(u);var b=RZ(l,r);u.length?(c||(i.polygonStart(),c=!0),qx(u,dbe,b,n,i)):b&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),u=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(b,M){e(b,M)&&i.point(b,M)}function h(b,M){o.point(b,M)}function m(){d.point=h,o.lineStart()}function g(){d.point=p,o.lineEnd()}function v(b,M){f.push([b,M]),s.point(b,M)}function y(){s.lineStart(),f=[]}function C(){v(f[0][0],f[0][1]),s.lineEnd();var b=s.clean(),M=a.result(),S,w=M.length,E,D,z;if(f.pop(),l.push(f),f=null,!!w){if(b&1){if(D=M[0],(E=D.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),S=0;S<E;++S)i.point((z=D[S])[0],z[1]);i.lineEnd()}return}w>1&&b&2&&M.push(M.pop().concat(M.shift())),u.push(M.filter(fbe))}}return d}}function fbe(e){return e.length>1}function dbe(e,t){return((e=e.x)[0]<0?e[1]-Rt-he:Rt-e[1])-((t=t.x)[0]<0?t[1]-Rt-he:Rt-t[1])}var r_=Gx(function(){return!0},pbe,mbe,[-Be,-Rt]);function pbe(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var s=o>0?Be:-Be,c=Ie(o-t);Ie(c-Be)<he?(e.point(t,n=(n+a)/2>0?Rt:-Rt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),i=0):r!==s&&c>=Be&&(Ie(t-r)<he&&(t-=r*he),Ie(o-s)<he&&(o-=s*he),n=hbe(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=o,n=a),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function hbe(e,t,n,r){var i,o,a=fe(e-n);return Ie(a)>he?Go((fe(t)*(o=pe(r))*fe(n)-fe(r)*(i=pe(t))*fe(e))/(i*o*a)):(t+r)/2}function mbe(e,t,n,r){var i;if(e==null)i=n*Rt,r.point(-Be,i),r.point(0,i),r.point(Be,i),r.point(Be,0),r.point(Be,-i),r.point(0,-i),r.point(-Be,-i),r.point(-Be,0),r.point(-Be,i);else if(Ie(e[0]-t[0])>he){var o=e[0]<t[0]?Be:-Be;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function OZ(e){var t=pe(e),n=6*Re,r=t>0,i=Ie(t)>he;function o(u,f,d,p){IZ(p,e,n,d,u,f)}function a(u,f){return pe(u)*pe(f)>t}function s(u){var f,d,p,h,m;return{lineStart:function(){h=p=!1,m=1},point:function(g,v){var y=[g,v],C,b=a(g,v),M=r?b?0:l(g,v):b?l(g+(g<0?Be:-Be),v):0;if(!f&&(h=p=b)&&u.lineStart(),b!==p&&(C=c(f,y),(!C||Fu(f,C)||Fu(y,C))&&(y[2]=1)),b!==p)m=0,b?(u.lineStart(),C=c(y,f),u.point(C[0],C[1])):(C=c(f,y),u.point(C[0],C[1],2),u.lineEnd()),f=C;else if(i&&f&&r^b){var S;!(M&d)&&(S=c(y,f,!0))&&(m=0,r?(u.lineStart(),u.point(S[0][0],S[0][1]),u.point(S[1][0],S[1][1]),u.lineEnd()):(u.point(S[1][0],S[1][1]),u.lineEnd(),u.lineStart(),u.point(S[0][0],S[0][1],3)))}b&&(!f||!Fu(f,y))&&u.point(y[0],y[1]),f=y,p=b,d=M},lineEnd:function(){p&&u.lineEnd(),f=null},clean:function(){return m|(h&&p)<<1}}}function c(u,f,d){var p=Wo(u),h=Wo(f),m=[1,0,0],g=hc(p,h),v=G7(g,g),y=g[0],C=v-y*y;if(!C)return!d&&u;var b=t*v/C,M=-t*y/C,S=hc(m,g),w=W7(m,b),E=W7(g,M);Tx(w,E);var D=S,z=G7(w,D),H=G7(D,D),j=z*z-H*(G7(w,w)-1);if(!(j<0)){var L=Pt(j),_=W7(D,(-z-L)/H);if(Tx(_,w),_=Kl(_),!d)return _;var A=u[0],T=f[0],G=u[1],X=f[1],J;T<A&&(J=A,A=T,T=J);var Se=T-A,Ee=Ie(Se-Be)<he,Xe=Ee||Se<he;if(!Ee&&X<G&&(J=G,G=X,X=J),Xe?Ee?G+X>0^_[1]<(Ie(_[0]-A)<he?G:X):G<=_[1]&&_[1]<=X:Se>Be^(A<=_[0]&&_[0]<=T)){var St=W7(D,(-z+L)/H);return Tx(St,w),[_,Kl(St)]}}}function l(u,f){var d=r?e:Be-e,p=0;return u<-d?p|=1:u>d&&(p|=2),f<-d?p|=4:f>d&&(p|=8),p}return Gx(a,s,o,r?[0,-e]:[-Be,e-Be])}function PZ(e,t,n,r,i,o){var a=e[0],s=e[1],c=t[0],l=t[1],u=0,f=1,d=c-a,p=l-s,h;if(h=n-a,!(!d&&h>0)){if(h/=d,d<0){if(h<u)return;h<f&&(f=h)}else if(d>0){if(h>f)return;h>u&&(u=h)}if(h=i-a,!(!d&&h<0)){if(h/=d,d<0){if(h>f)return;h>u&&(u=h)}else if(d>0){if(h<u)return;h<f&&(f=h)}if(h=r-s,!(!p&&h>0)){if(h/=p,p<0){if(h<u)return;h<f&&(f=h)}else if(p>0){if(h>f)return;h>u&&(u=h)}if(h=o-s,!(!p&&h<0)){if(h/=p,p<0){if(h>f)return;h>u&&(u=h)}else if(p>0){if(h<u)return;h<f&&(f=h)}return u>0&&(e[0]=a+u*d,e[1]=s+u*p),f<1&&(t[0]=a+f*d,t[1]=s+f*p),!0}}}}}var Z7=1e9,Wx=-Z7;function J7(e,t,n,r){function i(l,u){return e<=l&&l<=n&&t<=u&&u<=r}function o(l,u,f,d){var p=0,h=0;if(l==null||(p=a(l,f))!==(h=a(u,f))||c(l,u)<0^f>0)do d.point(p===0||p===3?e:n,p>1?r:t);while((p=(p+f+4)%4)!==h);else d.point(u[0],u[1])}function a(l,u){return Ie(l[0]-e)<he?u>0?0:3:Ie(l[0]-n)<he?u>0?2:1:Ie(l[1]-t)<he?u>0?1:0:u>0?3:2}function s(l,u){return c(l.x,u.x)}function c(l,u){var f=a(l,1),d=a(u,1);return f!==d?f-d:f===0?u[1]-l[1]:f===1?l[0]-u[0]:f===2?l[1]-u[1]:u[0]-l[0]}return function(l){var u=l,f=Ux(),d,p,h,m,g,v,y,C,b,M,S,w={point:E,lineStart:j,lineEnd:L,polygonStart:z,polygonEnd:H};function E(A,T){i(A,T)&&u.point(A,T)}function D(){for(var A=0,T=0,G=p.length;T<G;++T)for(var X=p[T],J=1,Se=X.length,Ee=X[0],Xe,St,lt=Ee[0],Jt=Ee[1];J<Se;++J)Xe=lt,St=Jt,Ee=X[J],lt=Ee[0],Jt=Ee[1],St<=r?Jt>r&&(lt-Xe)*(r-St)>(Jt-St)*(e-Xe)&&++A:Jt<=r&&(lt-Xe)*(r-St)<(Jt-St)*(e-Xe)&&--A;return A}function z(){u=f,d=[],p=[],S=!0}function H(){var A=D(),T=S&&A,G=(d=X6(d)).length;(T||G)&&(l.polygonStart(),T&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),G&&qx(d,s,A,o,l),l.polygonEnd()),u=l,d=p=h=null}function j(){w.point=_,p&&p.push(h=[]),M=!0,b=!1,y=C=NaN}function L(){d&&(_(m,g),v&&b&&f.rejoin(),d.push(f.result())),w.point=E,b&&u.lineEnd()}function _(A,T){var G=i(A,T);if(p&&h.push([A,T]),M)m=A,g=T,v=G,M=!1,G&&(u.lineStart(),u.point(A,T));else if(G&&b)u.point(A,T);else{var X=[y=Math.max(Wx,Math.min(Z7,y)),C=Math.max(Wx,Math.min(Z7,C))],J=[A=Math.max(Wx,Math.min(Z7,A)),T=Math.max(Wx,Math.min(Z7,T))];PZ(X,J,e,t,n,r)?(b||(u.lineStart(),u.point(X[0],X[1])),u.point(J[0],J[1]),G||u.lineEnd(),S=!1):G&&(u.lineStart(),u.point(A,T),S=!1)}y=A,C=T,b=G}return w}}function $Z(e,t,n){var r=Un(e,t-he,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function BZ(e,t,n){var r=Un(e,t-he,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function Yx(){var e,t,n,r,i,o,a,s,c=10,l=c,u=90,f=360,d,p,h,m,g=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return Un(j7(r/u)*u,n,u).map(h).concat(Un(j7(s/f)*f,a,f).map(m)).concat(Un(j7(t/c)*c,e,c).filter(function(C){return Ie(C%u)>he}).map(d)).concat(Un(j7(o/l)*l,i,l).filter(function(C){return Ie(C%f)>he}).map(p))}return v.lines=function(){return y().map(function(C){return{type:"LineString",coordinates:C}})},v.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(m(a).slice(1),h(n).reverse().slice(1),m(s).reverse().slice(1))]}},v.extent=function(C){return arguments.length?v.extentMajor(C).extentMinor(C):v.extentMinor()},v.extentMajor=function(C){return arguments.length?(r=+C[0][0],n=+C[1][0],s=+C[0][1],a=+C[1][1],r>n&&(C=r,r=n,n=C),s>a&&(C=s,s=a,a=C),v.precision(g)):[[r,s],[n,a]]},v.extentMinor=function(C){return arguments.length?(t=+C[0][0],e=+C[1][0],o=+C[0][1],i=+C[1][1],t>e&&(C=t,t=e,e=C),o>i&&(C=o,o=i,i=C),v.precision(g)):[[t,o],[e,i]]},v.step=function(C){return arguments.length?v.stepMajor(C).stepMinor(C):v.stepMinor()},v.stepMajor=function(C){return arguments.length?(u=+C[0],f=+C[1],v):[u,f]},v.stepMinor=function(C){return arguments.length?(c=+C[0],l=+C[1],v):[c,l]},v.precision=function(C){return arguments.length?(g=+C,d=$Z(o,i,90),p=BZ(t,e,g),h=$Z(s,a,90),m=BZ(r,n,g),v):g},v.extentMajor([[-180,-90+he],[180,90-he]]).extentMinor([[-180,-80-he],[180,80+he]])}var r4=e=>e;var i_=new vn,o_=new vn,UZ,jZ,a_,s_,i4={point:dn,lineStart:dn,lineEnd:dn,polygonStart:function(){i4.lineStart=gbe,i4.lineEnd=ybe},polygonEnd:function(){i4.lineStart=i4.lineEnd=i4.point=dn,i_.add(Ie(o_)),o_=new vn},result:function(){var e=i_/2;return i_=new vn,e}};function gbe(){i4.point=vbe}function vbe(e,t){i4.point=qZ,UZ=a_=e,jZ=s_=t}function qZ(e,t){o_.add(s_*e-a_*t),a_=e,s_=t}function ybe(){qZ(UZ,jZ)}var c_=i4;var Ru=1/0,Xx=Ru,ep=-Ru,Qx=ep,xbe={point:Cbe,lineStart:dn,lineEnd:dn,polygonStart:dn,polygonEnd:dn,result:function(){var e=[[Ru,Xx],[ep,Qx]];return ep=Qx=-(Xx=Ru=1/0),e}};function Cbe(e,t){e<Ru&&(Ru=e),e>ep&&(ep=e),t<Xx&&(Xx=t),t>Qx&&(Qx=t)}var Ou=xbe;var l_=0,u_=0,tp=0,Kx=0,Zx=0,Pu=0,f_=0,d_=0,np=0,YZ,XZ,Ja,es,F2={point:e0,lineStart:GZ,lineEnd:WZ,polygonStart:function(){F2.lineStart=wbe,F2.lineEnd=Sbe},polygonEnd:function(){F2.point=e0,F2.lineStart=GZ,F2.lineEnd=WZ},result:function(){var e=np?[f_/np,d_/np]:Pu?[Kx/Pu,Zx/Pu]:tp?[l_/tp,u_/tp]:[NaN,NaN];return l_=u_=tp=Kx=Zx=Pu=f_=d_=np=0,e}};function e0(e,t){l_+=e,u_+=t,++tp}function GZ(){F2.point=bbe}function bbe(e,t){F2.point=Mbe,e0(Ja=e,es=t)}function Mbe(e,t){var n=e-Ja,r=t-es,i=Pt(n*n+r*r);Kx+=i*(Ja+e)/2,Zx+=i*(es+t)/2,Pu+=i,e0(Ja=e,es=t)}function WZ(){F2.point=e0}function wbe(){F2.point=Ebe}function Sbe(){QZ(YZ,XZ)}function Ebe(e,t){F2.point=QZ,e0(YZ=Ja=e,XZ=es=t)}function QZ(e,t){var n=e-Ja,r=t-es,i=Pt(n*n+r*r);Kx+=i*(Ja+e)/2,Zx+=i*(es+t)/2,Pu+=i,i=es*e-Ja*t,f_+=i*(Ja+e),d_+=i*(es+t),np+=i*3,e0(Ja=e,es=t)}var p_=F2;function Jx(e){this._context=e}Jx.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,jn);break}}},result:dn};var m_=new vn,h_,KZ,ZZ,rp,ip,eC={point:dn,lineStart:function(){eC.point=Dbe},lineEnd:function(){h_&&JZ(KZ,ZZ),eC.point=dn},polygonStart:function(){h_=!0},polygonEnd:function(){h_=null},result:function(){var e=+m_;return m_=new vn,e}};function Dbe(e,t){eC.point=JZ,KZ=rp=e,ZZ=ip=t}function JZ(e,t){rp-=e,ip-=t,m_.add(Pt(rp*rp+ip*ip)),rp=e,ip=t}var g_=eC;var eJ,tC,tJ,nJ,op=class{constructor(t){this._append=t==null?rJ:zbe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==tJ||this._append!==tC){let r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,tJ=r,tC=this._append,nJ=this._,this._=i}this._+=nJ;break}}}result(){let t=this._;return this._="",t.length?t:null}};function rJ(e){let t=1;this._+=e[0];for(let n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function zbe(e){let t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return rJ;if(t!==eJ){let n=10**t;eJ=t,tC=function(i){let o=1;this._+=i[0];for(let a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return tC}function nC(e,t){let n=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),L1(s,i(o))),o.result()}return a.area=function(s){return L1(s,i(c_)),c_.result()},a.measure=function(s){return L1(s,i(g_)),g_.result()},a.bounds=function(s){return L1(s,i(Ou)),Ou.result()},a.centroid=function(s){return L1(s,i(p_)),p_.result()},a.projection=function(s){return arguments.length?(i=s==null?(e=null,r4):(e=s).stream,a):e},a.context=function(s){return arguments.length?(o=s==null?(t=null,new op(n)):new Jx(t=s),typeof r!="function"&&o.pointRadius(r),a):t},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{let c=Math.floor(s);if(!(c>=0))throw new RangeError(`invalid digits: ${s}`);n=c}return t===null&&(o=new op(n)),a},a.projection(e).digits(n).context(t)}function t0(e){return function(t){var n=new v_;for(var r in e)n[r]=e[r];return n.stream=t,n}}function v_(){}v_.prototype={constructor:v_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function y_(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),L1(n,e.stream(Ou)),t(Ou.result()),r!=null&&e.clipExtent(r),e}function n0(e,t,n){return y_(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,c=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,c])},n)}function $u(e,t,n){return n0(e,[[0,0],t],n)}function Bu(e,t,n){return y_(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];e.scale(150*o).translate([a,s])},n)}function Uu(e,t,n){return y_(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,s])},n)}var iJ=16,Hbe=pe(30*Re);function x_(e,t){return+t?Abe(e,t):Lbe(e)}function Lbe(e){return t0({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Abe(e,t){function n(r,i,o,a,s,c,l,u,f,d,p,h,m,g){var v=l-r,y=u-i,C=v*v+y*y;if(C>4*t&&m--){var b=a+d,M=s+p,S=c+h,w=Pt(b*b+M*M+S*S),E=fn(S/=w),D=Ie(Ie(S)-1)<he||Ie(o-f)<he?(o+f)/2:Nn(M,b),z=e(D,E),H=z[0],j=z[1],L=H-r,_=j-i,A=y*L-v*_;(A*A/C>t||Ie((v*L+y*_)/C-.5)>.3||a*d+s*p+c*h<Hbe)&&(n(r,i,o,a,s,c,H,j,D,b/=w,M/=w,S,m,g),g.point(H,j),n(H,j,D,b,M,S,l,u,f,d,p,h,m,g))}}return function(r){var i,o,a,s,c,l,u,f,d,p,h,m,g={point:v,lineStart:y,lineEnd:b,polygonStart:function(){r.polygonStart(),g.lineStart=M},polygonEnd:function(){r.polygonEnd(),g.lineStart=y}};function v(E,D){E=e(E,D),r.point(E[0],E[1])}function y(){f=NaN,g.point=C,r.lineStart()}function C(E,D){var z=Wo([E,D]),H=e(E,D);n(f,d,u,p,h,m,f=H[0],d=H[1],u=E,p=z[0],h=z[1],m=z[2],iJ,r),r.point(f,d)}function b(){g.point=v,r.lineEnd()}function M(){y(),g.point=S,g.lineEnd=w}function S(E,D){C(i=E,D),o=f,a=d,s=p,c=h,l=m,g.point=C}function w(){n(f,d,u,p,h,m,o,a,i,s,c,l,iJ,r),g.lineEnd=b,b()}return g}}var Vbe=t0({point:function(e,t){this.stream.point(e*Re,t*Re)}});function Nbe(e){return t0({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function _be(e,t,n,r,i){function o(a,s){return a*=r,s*=i,[t+e*a,n-e*s]}return o.invert=function(a,s){return[(a-t)/e*r,(n-s)/e*i]},o}function oJ(e,t,n,r,i,o){if(!o)return _be(e,t,n,r,i);var a=pe(o),s=fe(o),c=a*e,l=s*e,u=a/e,f=s/e,d=(s*n-a*t)/e,p=(s*t+a*n)/e;function h(m,g){return m*=r,g*=i,[c*m-l*g+t,n-l*m-c*g]}return h.invert=function(m,g){return[r*(u*m-f*g+d),i*(p-f*m-u*g)]},h}function kn(e){return rC(function(){return e})()}function rC(e){var t,n=150,r=480,i=250,o=0,a=0,s=0,c=0,l=0,u,f=0,d=1,p=1,h=null,m=r_,g=null,v,y,C,b=r4,M=.5,S,w,E,D,z;function H(A){return E(A[0]*Re,A[1]*Re)}function j(A){return A=E.invert(A[0],A[1]),A&&[A[0]*Ot,A[1]*Ot]}H.stream=function(A){return D&&z===A?D:D=Vbe(Nbe(u)(m(S(b(z=A)))))},H.preclip=function(A){return arguments.length?(m=A,h=void 0,_()):m},H.postclip=function(A){return arguments.length?(b=A,g=v=y=C=null,_()):b},H.clipAngle=function(A){return arguments.length?(m=+A?OZ(h=A*Re):(h=null,r_),_()):h*Ot},H.clipExtent=function(A){return arguments.length?(b=A==null?(g=v=y=C=null,r4):J7(g=+A[0][0],v=+A[0][1],y=+A[1][0],C=+A[1][1]),_()):g==null?null:[[g,v],[y,C]]},H.scale=function(A){return arguments.length?(n=+A,L()):n},H.translate=function(A){return arguments.length?(r=+A[0],i=+A[1],L()):[r,i]},H.center=function(A){return arguments.length?(o=A[0]%360*Re,a=A[1]%360*Re,L()):[o*Ot,a*Ot]},H.rotate=function(A){return arguments.length?(s=A[0]%360*Re,c=A[1]%360*Re,l=A.length>2?A[2]%360*Re:0,L()):[s*Ot,c*Ot,l*Ot]},H.angle=function(A){return arguments.length?(f=A%360*Re,L()):f*Ot},H.reflectX=function(A){return arguments.length?(d=A?-1:1,L()):d<0},H.reflectY=function(A){return arguments.length?(p=A?-1:1,L()):p<0},H.precision=function(A){return arguments.length?(S=x_(w,M=A*A),_()):Pt(M)},H.fitExtent=function(A,T){return n0(H,A,T)},H.fitSize=function(A,T){return $u(H,A,T)},H.fitWidth=function(A,T){return Bu(H,A,T)},H.fitHeight=function(A,T){return Uu(H,A,T)};function L(){var A=oJ(n,0,0,d,p,f).apply(null,t(o,a)),T=oJ(n,r-A[0],i-A[1],d,p,f);return u=t_(s,c,l),w=K7(t,T),E=K7(u,w),S=x_(w,M),_()}function _(){return D=z=null,H}return function(){return t=e.apply(this,arguments),H.invert=t.invert&&j,L()}}function ju(e){var t=0,n=Be/3,r=rC(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Re,n=o[1]*Re):[t*Ot,n*Ot]},i}function aJ(e){var t=pe(e);function n(r,i){return[r*t,fe(i)/t]}return n.invert=function(r,i){return[r/t,fn(i*t)]},n}function sJ(e,t){var n=fe(e),r=(n+fe(t))/2;if(Ie(r)<he)return aJ(e);var i=1+n*(2*r-n),o=Pt(i)/r;function a(s,c){var l=Pt(i-2*r*fe(c))/r;return[l*fe(s*=r),o-l*pe(s)]}return a.invert=function(s,c){var l=o-c,u=Nn(s,Ie(l))*Ei(l);return l*r<0&&(u-=Be*Ei(s)*Ei(l)),[u/r,fn((i-(s*s+l*l)*r*r)/(2*r))]},a}function o4(){return ju(sJ).scale(155.424).center([0,33.6442])}function ap(){return o4().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function kbe(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function C_(){var e,t,n=ap(),r,i=o4().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=o4().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,c,l={point:function(d,p){c=[d,p]}};function u(d){var p=d[0],h=d[1];return c=null,r.point(p,h),c||(o.point(p,h),c)||(s.point(p,h),c)}u.invert=function(d){var p=n.scale(),h=n.translate(),m=(d[0]-h[0])/p,g=(d[1]-h[1])/p;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(d)},u.stream=function(d){return e&&t===d?e:e=kbe([n.stream(t=d),i.stream(d),a.stream(d)])},u.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),a.precision(d),f()):n.precision()},u.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),a.scale(d),u.translate(n.translate())):n.scale()},u.translate=function(d){if(!arguments.length)return n.translate();var p=n.scale(),h=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[h-.455*p,m-.238*p],[h+.455*p,m+.238*p]]).stream(l),o=i.translate([h-.307*p,m+.201*p]).clipExtent([[h-.425*p+he,m+.12*p+he],[h-.214*p-he,m+.234*p-he]]).stream(l),s=a.translate([h-.205*p,m+.212*p]).clipExtent([[h-.214*p+he,m+.166*p+he],[h-.115*p-he,m+.234*p-he]]).stream(l),f()},u.fitExtent=function(d,p){return n0(u,d,p)},u.fitSize=function(d,p){return $u(u,d,p)},u.fitWidth=function(d,p){return Bu(u,d,p)},u.fitHeight=function(d,p){return Uu(u,d,p)};function f(){return e=t=null,u}return u.scale(1070)}function iC(e){return function(t,n){var r=pe(t),i=pe(n),o=e(r*i);return o===1/0?[2,0]:[o*i*fe(t),o*fe(n)]}}function ts(e){return function(t,n){var r=Pt(t*t+n*n),i=e(r),o=fe(i),a=pe(i);return[Nn(t*o,r*a),fn(r&&n*o/r)]}}var b_=iC(function(e){return Pt(2/(1+e))});b_.invert=ts(function(e){return 2*fn(e/2)});function M_(){return kn(b_).scale(124.75).clipAngle(180-.001)}var w_=iC(function(e){return(e=Nx(e))&&e/fe(e)});w_.invert=ts(function(e){return e});function S_(){return kn(w_).scale(79.4188).clipAngle(180-.001)}function qu(e,t){return[e,Ql(Tu((Rt+t)/2))]}qu.invert=function(e,t){return[e,2*Go(Lx(t))-Rt]};function E_(){return D_(qu).scale(961/jn)}function D_(e){var t=kn(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,s,c,l;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?a=s=c=l=null:(a=+f[0][0],s=+f[0][1],c=+f[1][0],l=+f[1][1]),u()):a==null?null:[[a,s],[c,l]]};function u(){var f=Be*r(),d=t(kZ(t.rotate()).invert([0,0]));return o(a==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===qu?[[Math.max(d[0]-f,a),s],[Math.min(d[0]+f,c),l]]:[[a,Math.max(d[1]-f,s)],[c,Math.min(d[1]+f,l)]])}return u()}function oC(e){return Tu((Rt+e)/2)}function cJ(e,t){var n=pe(e),r=e===t?fe(e):Ql(n/pe(t))/Ql(oC(t)/oC(e)),i=n*Vx(oC(e),r)/r;if(!r)return qu;function o(a,s){i>0?s<-Rt+he&&(s=-Rt+he):s>Rt-he&&(s=Rt-he);var c=i/Vx(oC(s),r);return[c*fe(r*a),i-c*pe(r*a)]}return o.invert=function(a,s){var c=i-s,l=Ei(r)*Pt(a*a+c*c),u=Nn(a,Ie(c))*Ei(c);return c*r<0&&(u-=Be*Ei(a)*Ei(c)),[u/r,2*Go(Vx(i/l,1/r))-Rt]},o}function z_(){return ju(cJ).scale(109.5).parallels([30,30])}function Gu(e,t){return[e,t]}Gu.invert=Gu;function H_(){return kn(Gu).scale(152.63)}function lJ(e,t){var n=pe(e),r=e===t?fe(e):(n-pe(t))/(t-e),i=n/r+e;if(Ie(r)<he)return Gu;function o(a,s){var c=i-s,l=r*a;return[c*fe(l),i-c*pe(l)]}return o.invert=function(a,s){var c=i-s,l=Nn(a,Ie(c))*Ei(c);return c*r<0&&(l-=Be*Ei(a)*Ei(c)),[l/r,i-Ei(r)*Pt(a*a+c*c)]},o}function L_(){return ju(lJ).scale(131.154).center([0,13.9389])}var sp=1.340264,cp=-.081106,lp=893e-6,up=.003796,aC=Pt(3)/2,Tbe=12;function A_(e,t){var n=fn(aC*fe(t)),r=n*n,i=r*r*r;return[e*pe(n)/(aC*(sp+3*cp*r+i*(7*lp+9*up*r))),n*(sp+cp*r+i*(lp+up*r))]}A_.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,s,c;o<Tbe&&(s=n*(sp+cp*r+i*(lp+up*r))-t,c=sp+3*cp*r+i*(7*lp+9*up*r),n-=a=s/c,r=n*n,i=r*r*r,!(Ie(a)<Xl));++o);return[aC*e*(sp+3*cp*r+i*(7*lp+9*up*r))/pe(n),fn(fe(n)/aC)]};function V_(){return kn(A_).scale(177.158)}function N_(e,t){var n=pe(t),r=pe(e)*n;return[n*fe(e)/r,fe(t)/r]}N_.invert=ts(Go);function __(){return kn(N_).scale(144.049).clipAngle(60)}function k_(){var e=1,t=0,n=0,r=1,i=1,o=0,a,s,c=null,l,u,f,d=1,p=1,h=t0({point:function(b,M){var S=C([b,M]);this.stream.point(S[0],S[1])}}),m=r4,g,v;function y(){return d=e*r,p=e*i,g=v=null,C}function C(b){var M=b[0]*d,S=b[1]*p;if(o){var w=S*a-M*s;M=M*a+S*s,S=w}return[M+t,S+n]}return C.invert=function(b){var M=b[0]-t,S=b[1]-n;if(o){var w=S*a+M*s;M=M*a-S*s,S=w}return[M/d,S/p]},C.stream=function(b){return g&&v===b?g:g=h(m(v=b))},C.postclip=function(b){return arguments.length?(m=b,c=l=u=f=null,y()):m},C.clipExtent=function(b){return arguments.length?(m=b==null?(c=l=u=f=null,r4):J7(c=+b[0][0],l=+b[0][1],u=+b[1][0],f=+b[1][1]),y()):c==null?null:[[c,l],[u,f]]},C.scale=function(b){return arguments.length?(e=+b,y()):e},C.translate=function(b){return arguments.length?(t=+b[0],n=+b[1],y()):[t,n]},C.angle=function(b){return arguments.length?(o=b%360*Re,s=fe(o),a=pe(o),y()):o*Ot},C.reflectX=function(b){return arguments.length?(r=b?-1:1,y()):r<0},C.reflectY=function(b){return arguments.length?(i=b?-1:1,y()):i<0},C.fitExtent=function(b,M){return n0(C,b,M)},C.fitSize=function(b,M){return $u(C,b,M)},C.fitWidth=function(b,M){return Bu(C,b,M)},C.fitHeight=function(b,M){return Uu(C,b,M)},C}function T_(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}T_.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,a=o*o;n-=i=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(Ie(i)>he&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function I_(){return kn(T_).scale(175.295)}function F_(e,t){return[pe(t)*fe(e),fe(t)]}F_.invert=ts(fn);function R_(){return kn(F_).scale(249.5).clipAngle(90+he)}function O_(e,t){var n=pe(t),r=1+pe(e)*n;return[n*fe(e)/r,fe(t)/r]}O_.invert=ts(function(e){return 2*Go(e)});function P_(){return kn(O_).scale(250).clipAngle(142)}function $_(e,t){return[Ql(Tu((Rt+t)/2)),-e]}$_.invert=function(e,t){return[-t,2*Go(Lx(e))-Rt]};function B_(){var e=D_($_),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var uJ=Math.abs;var cC=Math.cos;var fp=Math.sin;var fJ=1e-6;var a4=Math.PI,sC=a4/2,Mat=a4/4;var U_=dJ(2),wat=dJ(a4),Sat=a4*2,Eat=180/a4,Dat=a4/180;function j_(e){return e>1?sC:e<-1?-sC:Math.asin(e)}function dJ(e){return e>0?Math.sqrt(e):0}function Ibe(e,t){var n=e*fp(t),r=30,i;do t-=i=(t+fp(t)-n)/(1+cC(t));while(uJ(i)>fJ&&--r>0);return t/2}function Fbe(e,t,n){function r(i,o){return[e*i*cC(o=Ibe(n,o)),t*fp(o)]}return r.invert=function(i,o){return o=j_(o/t),[i/(e*cC(o)),j_((2*o+fp(2*o))/n)]},r}var pJ=Fbe(U_/sC,U_,a4);function q_(){return kn(pJ).scale(169.529)}var Rbe=nC(),uC=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Obe(e,t){return function n(){let r=t();return r.type=e,r.path=nC().projection(r),r.copy=r.copy||function(){let i=n();return uC.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},bV(r)}}function dp(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(lC[e]=Obe(e,t),this):lC[e]||null}function G_(e){return e&&e.path||Rbe}var lC={albers:ap,albersusa:C_,azimuthalequalarea:M_,azimuthalequidistant:S_,conicconformal:z_,conicequalarea:o4,conicequidistant:L_,equalEarth:V_,equirectangular:H_,gnomonic:__,identity:k_,mercator:E_,mollweide:q_,naturalEarth1:I_,orthographic:R_,stereographic:P_,transversemercator:B_};for(let e in lC)dp(e,lC[e]);function Pbe(){}var vc=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function gJ(){var e=1,t=1,n=s;function r(c,l){return l.map(u=>i(c,u))}function i(c,l){var u=[],f=[];return o(c,l,d=>{n(d,c,l),$be(d)>0?u.push([d]):f.push(d)}),f.forEach(d=>{for(var p=0,h=u.length,m;p<h;++p)if(Bbe((m=u[p])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:u}}function o(c,l,u){var f=new Array,d=new Array,p,h,m,g,v,y;for(p=h=-1,g=c[0]>=l,vc[g<<1].forEach(C);++p<e-1;)m=g,g=c[p+1]>=l,vc[m|g<<1].forEach(C);for(vc[g<<0].forEach(C);++h<t-1;){for(p=-1,g=c[h*e+e]>=l,v=c[h*e]>=l,vc[g<<1|v<<2].forEach(C);++p<e-1;)m=g,g=c[h*e+e+p+1]>=l,y=v,v=c[h*e+p+1]>=l,vc[m|g<<1|v<<2|y<<3].forEach(C);vc[g|v<<3].forEach(C)}for(p=-1,v=c[h*e]>=l,vc[v<<2].forEach(C);++p<e-1;)y=v,v=c[h*e+p+1]>=l,vc[v<<2|y<<3].forEach(C);vc[v<<3].forEach(C);function C(b){var M=[b[0][0]+p,b[0][1]+h],S=[b[1][0]+p,b[1][1]+h],w=a(M),E=a(S),D,z;(D=d[w])?(z=f[E])?(delete d[D.end],delete f[z.start],D===z?(D.ring.push(S),u(D.ring)):f[D.start]=d[z.end]={start:D.start,end:z.end,ring:D.ring.concat(z.ring)}):(delete d[D.end],D.ring.push(S),d[D.end=E]=D):(D=f[E])?(z=d[w])?(delete f[D.start],delete d[z.end],D===z?(D.ring.push(S),u(D.ring)):f[z.start]=d[D.end]={start:z.start,end:D.end,ring:z.ring.concat(D.ring)}):(delete f[D.start],D.ring.unshift(M),f[D.start=w]=D):f[w]=d[E]={start:w,end:E,ring:[M,S]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function s(c,l,u){c.forEach(f=>{var d=f[0],p=f[1],h=d|0,m=p|0,g,v=l[m*e+h];d>0&&d<e&&h===d&&(g=l[m*e+h-1],f[0]=d+(u-g)/(v-g)-.5),p>0&&p<t&&m===p&&(g=l[(m-1)*e+h],f[1]=p+(u-g)/(v-g)-.5)})}return r.contour=i,r.size=function(c){if(!arguments.length)return[e,t];var l=Math.floor(c[0]),u=Math.floor(c[1]);return l>=0&&u>=0||B("invalid size"),e=l,t=u,r},r.smooth=function(c){return arguments.length?(n=c?s:Pbe,r):n===s},r}function $be(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Bbe(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Ube(e,t[n]))return i;return 0}function Ube(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var c=e[o],l=c[0],u=c[1],f=e[s],d=f[0],p=f[1];if(jbe(c,f,t))return 0;u>r!=p>r&&n<(d-l)*(r-u)/(p-u)+l&&(i=-i)}return i}function jbe(e,t,n){var r;return qbe(e,t,n)&&Gbe(e[r=+(e[0]===t[0])],n[r],t[r])}function qbe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Gbe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function vJ(e,t,n){return function(r){var i=ji(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,c=t?qi(o,a,e):s/(e+1);return Un(o+c,a,c)}}function X_(e){$.call(this,null,e)}X_.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ee(X_,$,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||An,o=gJ().smooth(e.smooth!==!1),a=e.thresholds||Wbe(r,i,e),s=e.as===null?null:e.as||"contour",c=[];return r.forEach(l=>{let u=i(l),f=o.size([u.width,u.height])(u.values,F(a)?a:a(u.values));Ybe(f,u,l,e),f.forEach(d=>{c.push(Sl(l,ct(s!=null?{[s]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function Wbe(e,t,n){let r=vJ(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>To(t(i).values)))}function Ybe(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Te(i)&&(i=i(n,r)),Te(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;let a=(Pe(i)?i:i[0])||1,s=(Pe(i)?i:i[1])||1,c=o&&o[0]||0,l=o&&o[1]||0;e.forEach(yJ(t,a,s,c,l))}function yJ(e,t,n,r,i){let o=e.x1||0,a=e.y1||0,s=t*n<0;function c(f){f.forEach(l)}function l(f){s&&f.reverse(),f.forEach(u)}function u(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-a)*n+i}return function(f){return f.coordinates.forEach(c),f}}function hJ(e,t,n){let r=e>=0?e:Fv(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function W_(e){return Te(e)?e:gn(+e)}function xJ(){var e=c=>c[0],t=c=>c[1],n=Ta,r=[-1,-1],i=960,o=500,a=2;function s(c,l){let u=hJ(r[0],c,e)>>a,f=hJ(r[1],c,t)>>a,d=u?u+2:0,p=f?f+2:0,h=2*d+(i>>a),m=2*p+(o>>a),g=new Float32Array(h*m),v=new Float32Array(h*m),y=g;c.forEach(b=>{let M=d+(+e(b)>>a),S=p+(+t(b)>>a);M>=0&&M<h&&S>=0&&S<m&&(g[M+S*h]+=+n(b))}),u>0&&f>0?(Wu(h,m,g,v,u),Yu(h,m,v,g,f),Wu(h,m,g,v,u),Yu(h,m,v,g,f),Wu(h,m,g,v,u),Yu(h,m,v,g,f)):u>0?(Wu(h,m,g,v,u),Wu(h,m,v,g,u),Wu(h,m,g,v,u),y=v):f>0&&(Yu(h,m,g,v,f),Yu(h,m,v,g,f),Yu(h,m,g,v,f),y=v);let C=l?Math.pow(2,-2*a):1/Q6(y);for(let b=0,M=h*m;b<M;++b)y[b]*=C;return{values:y,scale:1<<a,width:h,height:m,x1:d,y1:p,x2:d+(i>>a),y2:p+(o>>a)}}return s.x=function(c){return arguments.length?(e=W_(c),s):e},s.y=function(c){return arguments.length?(t=W_(c),s):t},s.weight=function(c){return arguments.length?(n=W_(c),s):n},s.size=function(c){if(!arguments.length)return[i,o];var l=+c[0],u=+c[1];return l>=0&&u>=0||B("invalid size"),i=l,o=u,s},s.cellSize=function(c){return arguments.length?((c=+c)>=1||B("invalid cell size"),a=Math.floor(Math.log(c)/Math.LN2),s):1<<a},s.bandwidth=function(c){return arguments.length?(c=te(c),c.length===1&&(c=[+c[0],+c[0]]),c.length!==2&&B("invalid bandwidth"),r=c,s):r},s}function Wu(e,t,n,r,i){let o=(i<<1)+1;for(let a=0;a<t;++a)for(let s=0,c=0;s<e+i;++s)s<e&&(c+=n[s+a*e]),s>=i&&(s>=o&&(c-=n[s-o+a*e]),r[s-i+a*e]=c/Math.min(s+1,e-1+o-s,o))}function Yu(e,t,n,r,i){let o=(i<<1)+1;for(let a=0;a<e;++a)for(let s=0,c=0;s<t+i;++s)s<t&&(c+=n[a+s*e]),s>=i&&(s>=o&&(c-=n[a+(s-o)*e]),r[a+(s-i)*e]=c/Math.min(s+1,t-1+o-s,o))}function Q_(e){$.call(this,null,e)}Q_.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var Xbe=["x","y","weight","size","cellSize","bandwidth"];function CJ(e,t){return Xbe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ee(Q_,$,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Qbe(r,e.groupby),o=(e.groupby||[]).map(un),a=CJ(xJ(),e),s=e.as||"grid",c=[];function l(u,f){for(let d=0;d<o.length;++d)u[o[d]]=f[d];return u}return c=i.map(u=>ct(l({[s]:a(u,e.counts)},u.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function Qbe(e,t){var n=[],r=u=>u(s),i,o,a,s,c,l;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],c=t.map(r),l=i[c],l||(i[c]=l=[],l.dims=c,n.push(l)),l.push(s);return n}function K_(e){$.call(this,null,e)}K_.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ee(K_,$,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=gJ().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||vJ(e.count||10,e.nice,!!i),a=e.size,s,c;return i||(i=t.materialize(t.SOURCE).source,s=CJ(xJ(),e)(i,!0),c=yJ(s,s.scale||1,s.scale||1,0,0),a=[s.width,s.height],i=s.values),o=F(o)?o:o(i),i=r.size(a)(i,o),c&&i.forEach(c),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(ct),n}});var Y_="Feature",Z_="FeatureCollection",Kbe="MultiPoint";function J_(e){$.call(this,null,e)}J_.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ee(J_,$,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],a=i&&i[1],s=e.geojson||!i&&An,c=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(ur(s))||o&&t.modified(ur(o))||a&&t.modified(ur(a)),(!this.value||l)&&(c=t.SOURCE,this._features=n=[],this._points=r=[]),s&&t.visit(c,u=>n.push(s(u))),o&&a&&(t.visit(c,u=>{var f=o(u),d=a(u);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:Y_,geometry:{type:Kbe,coordinates:r}})),this.value={type:Z_,features:n}}});function ek(e){$.call(this,null,e)}ek.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ee(ek,$,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||An,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=G_(e.projection),n.materialize().reflow()):a=i===An||t.modified(i.fields)?n.ADD_MOD:n.ADD;let s=Zbe(r,e.pointRadius);return n.visit(a,c=>c[o]=r(i(c))),r.pointRadius(s),n.modifies(o)}});function Zbe(e,t){let n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function tk(e){$.call(this,null,e)}tk.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ee(tk,$,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],a=o[0],s=o[1],c;function l(u){let f=n([r(u),i(u)]);f?(u[a]=f[0],u[s]=f[1]):(u[a]=void 0,u[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(c=t.modified(r.fields)||t.modified(i.fields),t.visit(c?t.ADD_MOD:t.ADD,l)),t.modifies(o)}});function nk(e){$.call(this,null,e)}nk.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ee(nk,$,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=Jbe(G_(e.projection),e.field||wr("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,a=>a[i]=r),n.modifies(i)}});function Jbe(e,t,n){let r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),a=e.pointRadius(n)(t(i));return e.pointRadius(o),a};return r.context=i=>(e.context(i),r),r}function rk(e){$.call(this,[],e),this.generator=Yx()}rk.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ee(rk,$,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(let o in e)Te(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(Nv(n[0],i)):t.add.push(ct(i)),n[0]=i,t}});function ik(e){$.call(this,null,e)}ik.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ee(ik,$,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||An,o=tMe(e.opacity,e),a=eMe(e.color,e),s=e.as||"image",c={$x:0,$y:0,$value:0,$max:r?To(n.map(l=>To(i(l).values))):0};return n.forEach(l=>{let u=i(l),f=_e({},l,c);r||(f.$max=To(u.values||[])),l[s]=nMe(u,f,a.dep?a:gn(a(f)),o.dep?o:gn(o(f)))}),t.reflow(!0).modifies(s)}});function eMe(e,t){let n;return Te(e)?(n=r=>Bo(e(r,t)),n.dep=bJ(e)):n=gn(Bo(e||"#888")),n}function tMe(e,t){let n;return Te(e)?(n=r=>e(r,t),n.dep=bJ(e)):e?n=gn(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function bJ(e){if(!Te(e))return!1;let t=dr(ur(e));return t.$x||t.$y||t.$value||t.$max}function nMe(e,t,n,r){let i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,c=e.x2||i,l=e.y2||o,u=e.values,f=u?g=>u[g]:w2,d=$o(c-a,l-s),p=d.getContext("2d"),h=p.getImageData(0,0,c-a,l-s),m=h.data;for(let g=s,v=0;g<l;++g){t.$y=g-s;for(let y=a,C=g*i;y<c;++y,v+=4){t.$x=y-a,t.$value=f(y+C);let b=n(t);m[v+0]=b.r,m[v+1]=b.g,m[v+2]=b.b,m[v+3]=~~(255*r(t))}}return p.putImageData(h,0,0),d}function MJ(e){$.call(this,null,e),this.modified(!0)}ee(MJ,$,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=iMe(e.type),uC.forEach(r=>{e[r]!=null&&mJ(n,r,e[r])})):uC.forEach(r=>{e.modified(r)&&mJ(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&rMe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function rMe(e,t){let n=oMe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function iMe(e){let t=dp((e||"mercator").toLowerCase());return t||B("Unrecognized projection type: "+e),t()}function mJ(e,t,n){Te(e[t])&&e[t](n)}function oMe(e){return e=te(e),e.length===1?e[0]:{type:Z_,features:e.reduce((t,n)=>t.concat(aMe(n)),[])}}function aMe(e){return e.type===Z_?e.features:te(e).filter(t=>t!=null).map(t=>t.type===Y_?t:{type:Y_,geometry:t})}var xk={};xr(xk,{force:()=>yk});function ak(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,a=n.length,s,c=0,l=0;for(o=0;o<a;++o)s=n[o],c+=s.x,l+=s.y;for(c=(c/a-e)*r,l=(l/a-t)*r,o=0;o<a;++o)s=n[o],s.x-=c,s.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function wJ(e){let t=+this._x.call(null,e),n=+this._y.call(null,e);return SJ(this.cover(t,n),t,n,e)}function SJ(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,a={data:r},s=e._x0,c=e._y0,l=e._x1,u=e._y1,f,d,p,h,m,g,v,y;if(!o)return e._root=a,e;for(;o.length;)if((m=t>=(f=(s+l)/2))?s=f:l=f,(g=n>=(d=(c+u)/2))?c=d:u=d,i=o,!(o=o[v=g<<1|m]))return i[v]=a,e;if(p=+e._x.call(null,o.data),h=+e._y.call(null,o.data),t===p&&n===h)return a.next=o,i?i[v]=a:e._root=a,e;do i=i?i[v]=new Array(4):e._root=new Array(4),(m=t>=(f=(s+l)/2))?s=f:l=f,(g=n>=(d=(c+u)/2))?c=d:u=d;while((v=g<<1|m)===(y=(h>=d)<<1|p>=f));return i[y]=o,i[v]=a,e}function EJ(e){var t,n,r=e.length,i,o,a=new Array(r),s=new Array(r),c=1/0,l=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=i,s[n]=o,i<c&&(c=i),i>u&&(u=i),o<l&&(l=o),o>f&&(f=o));if(c>u||l>f)return this;for(this.cover(c,l).cover(u,f),n=0;n<r;++n)SJ(this,a[n],s[n],e[n]);return this}function DJ(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a=i-n||1,s=this._root,c,l;n>e||e>=i||r>t||t>=o;)switch(l=(t<r)<<1|e<n,c=new Array(4),c[l]=s,s=c,a*=2,l){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function zJ(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function HJ(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function zr(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function LJ(e,t,n){var r,i=this._x0,o=this._y0,a,s,c,l,u=this._x1,f=this._y1,d=[],p=this._root,h,m;for(p&&d.push(new zr(p,i,o,u,f)),n==null?n=1/0:(i=e-n,o=t-n,u=e+n,f=t+n,n*=n);h=d.pop();)if(!(!(p=h.node)||(a=h.x0)>u||(s=h.y0)>f||(c=h.x1)<i||(l=h.y1)<o))if(p.length){var g=(a+c)/2,v=(s+l)/2;d.push(new zr(p[3],g,v,c,l),new zr(p[2],a,v,g,l),new zr(p[1],g,s,c,v),new zr(p[0],a,s,g,v)),(m=(t>=v)<<1|e>=g)&&(h=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=h)}else{var y=e-+this._x.call(null,p.data),C=t-+this._y.call(null,p.data),b=y*y+C*C;if(b<n){var M=Math.sqrt(n=b);i=e-M,o=t-M,u=e+M,f=t+M,r=p.data}}return r}function AJ(e){if(isNaN(u=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,a=this._x0,s=this._y0,c=this._x1,l=this._y1,u,f,d,p,h,m,g,v;if(!n)return this;if(n.length)for(;;){if((h=u>=(d=(a+c)/2))?a=d:c=d,(m=f>=(p=(s+l)/2))?s=p:l=p,t=n,!(n=n[g=m<<1|h]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,v=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[g]=o:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=o,this)}function VJ(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function NJ(){return this._root}function _J(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function kJ(e){var t=[],n,r=this._root,i,o,a,s,c;for(r&&t.push(new zr(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,a=n.y0,s=n.x1,c=n.y1)&&r.length){var l=(o+s)/2,u=(a+c)/2;(i=r[3])&&t.push(new zr(i,l,u,s,c)),(i=r[2])&&t.push(new zr(i,o,u,l,c)),(i=r[1])&&t.push(new zr(i,l,a,s,u)),(i=r[0])&&t.push(new zr(i,o,a,l,u))}return this}function TJ(e){var t=[],n=[],r;for(this._root&&t.push(new zr(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,c=r.x1,l=r.y1,u=(a+c)/2,f=(s+l)/2;(o=i[0])&&t.push(new zr(o,a,s,u,f)),(o=i[1])&&t.push(new zr(o,u,s,c,f)),(o=i[2])&&t.push(new zr(o,a,f,u,l)),(o=i[3])&&t.push(new zr(o,u,f,c,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function IJ(e){return e[0]}function FJ(e){return arguments.length?(this._x=e,this):this._x}function RJ(e){return e[1]}function OJ(e){return arguments.length?(this._y=e,this):this._y}function r0(e,t,n){var r=new sk(t??IJ,n??RJ,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function sk(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function PJ(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var r1=r0.prototype=sk.prototype;r1.copy=function(){var e=new sk(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=PJ(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=PJ(r));return e};r1.add=wJ;r1.addAll=EJ;r1.cover=DJ;r1.data=zJ;r1.extent=HJ;r1.find=LJ;r1.remove=AJ;r1.removeAll=VJ;r1.root=NJ;r1.size=_J;r1.visit=kJ;r1.visitAfter=TJ;r1.x=FJ;r1.y=OJ;function er(e){return function(){return e}}function R2(e){return(e()-.5)*1e-6}function sMe(e){return e.x+e.vx}function cMe(e){return e.y+e.vy}function ck(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=er(e==null?1:+e));function a(){for(var l,u=t.length,f,d,p,h,m,g,v=0;v<o;++v)for(f=r0(t,sMe,cMe).visitAfter(s),l=0;l<u;++l)d=t[l],m=n[d.index],g=m*m,p=d.x+d.vx,h=d.y+d.vy,f.visit(y);function y(C,b,M,S,w){var E=C.data,D=C.r,z=m+D;if(E){if(E.index>d.index){var H=p-E.x-E.vx,j=h-E.y-E.vy,L=H*H+j*j;L<z*z&&(H===0&&(H=R2(r),L+=H*H),j===0&&(j=R2(r),L+=j*j),L=(z-(L=Math.sqrt(L)))/L*i,d.vx+=(H*=L)*(z=(D*=D)/(g+D)),d.vy+=(j*=L)*z,E.vx-=H*(z=1-z),E.vy-=j*z)}return}return b>p+z||S<p-z||M>h+z||w<h-z}}function s(l){if(l.data)return l.r=n[l.data.index];for(var u=l.r=0;u<4;++u)l[u]&&l[u].r>l.r&&(l.r=l[u].r)}function c(){if(t){var l,u=t.length,f;for(n=new Array(u),l=0;l<u;++l)f=t[l],n[f.index]=+e(f,l,t)}}return a.initialize=function(l,u){t=l,r=u,c()},a.iterations=function(l){return arguments.length?(o=+l,a):o},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(e=typeof l=="function"?l:er(+l),c(),a):e},a}function lMe(e){return e.index}function $J(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function lk(e){var t=lMe,n=f,r,i=er(30),o,a,s,c,l,u=1;e==null&&(e=[]);function f(g){return 1/Math.min(s[g.source.index],s[g.target.index])}function d(g){for(var v=0,y=e.length;v<u;++v)for(var C=0,b,M,S,w,E,D,z;C<y;++C)b=e[C],M=b.source,S=b.target,w=S.x+S.vx-M.x-M.vx||R2(l),E=S.y+S.vy-M.y-M.vy||R2(l),D=Math.sqrt(w*w+E*E),D=(D-o[C])/D*g*r[C],w*=D,E*=D,S.vx-=w*(z=c[C]),S.vy-=E*z,M.vx+=w*(z=1-z),M.vy+=E*z}function p(){if(a){var g,v=a.length,y=e.length,C=new Map(a.map((M,S)=>[t(M,S,a),M])),b;for(g=0,s=new Array(v);g<y;++g)b=e[g],b.index=g,typeof b.source!="object"&&(b.source=$J(C,b.source)),typeof b.target!="object"&&(b.target=$J(C,b.target)),s[b.source.index]=(s[b.source.index]||0)+1,s[b.target.index]=(s[b.target.index]||0)+1;for(g=0,c=new Array(y);g<y;++g)b=e[g],c[g]=s[b.source.index]/(s[b.source.index]+s[b.target.index]);r=new Array(y),h(),o=new Array(y),m()}}function h(){if(a)for(var g=0,v=e.length;g<v;++g)r[g]=+n(e[g],g,e)}function m(){if(a)for(var g=0,v=e.length;g<v;++g)o[g]=+i(e[g],g,e)}return d.initialize=function(g,v){a=g,l=v,p()},d.links=function(g){return arguments.length?(e=g,p(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(u=+g,d):u},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:er(+g),h(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:er(+g),m(),d):i},d}var uMe={value:()=>{}};function UJ(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new fC(n)}function fC(e){this._=e}function fMe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}fC.prototype=UJ.prototype={constructor:fC,on:function(e,t){var n=this._,r=fMe(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=dMe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=BJ(n[i],e.name,t);else if(t==null)for(i in n)n[i]=BJ(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new fC(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function dMe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function BJ(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=uMe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var uk=UJ;var Xu=0,hp=0,pp=0,qJ=1e3,dC,mp,pC=0,i0=0,hC=0,gp=typeof performance=="object"&&performance.now?performance:Date,GJ=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function yp(){return i0||(GJ(pMe),i0=gp.now()+hC)}function pMe(){i0=0}function vp(){this._call=this._time=this._next=null}vp.prototype=mC.prototype={constructor:vp,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?yp():+n)+(t==null?0:+t),!this._next&&mp!==this&&(mp?mp._next=this:dC=this,mp=this),this._call=e,this._time=n,fk()},stop:function(){this._call&&(this._call=null,this._time=1/0,fk())}};function mC(e,t,n){var r=new vp;return r.restart(e,t,n),r}function WJ(){yp(),++Xu;for(var e=dC,t;e;)(t=i0-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Xu}function jJ(){i0=(pC=gp.now())+hC,Xu=hp=0;try{WJ()}finally{Xu=0,mMe(),i0=0}}function hMe(){var e=gp.now(),t=e-pC;t>qJ&&(hC-=t,pC=e)}function mMe(){for(var e,t=dC,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:dC=n);mp=e,fk(r)}function fk(e){if(!Xu){hp&&(hp=clearTimeout(hp));var t=e-i0;t>24?(e<1/0&&(hp=setTimeout(jJ,e-gp.now()-hC)),pp&&(pp=clearInterval(pp))):(pp||(pC=gp.now(),pp=setInterval(hMe,qJ)),Xu=1,GJ(jJ))}}function dk(e,t,n){var r=new vp,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,a,s){a=+a,s=s==null?yp():+s,r._restart(function c(l){l+=i,r._restart(c,i+=a,s),o(l)},a,s)},r.restart(e,t,n),r)}function YJ(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function XJ(e){return e.x}function QJ(e){return e.y}var gMe=10,vMe=Math.PI*(3-Math.sqrt(5));function pk(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,c=mC(f),l=uk("tick","end"),u=YJ();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(c.stop(),l.call("end",t))}function d(m){var g,v=e.length,y;m===void 0&&(m=1);for(var C=0;C<m;++C)for(n+=(o-n)*i,s.forEach(function(b){b(n)}),g=0;g<v;++g)y=e[g],y.fx==null?y.x+=y.vx*=a:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=a:(y.y=y.fy,y.vy=0);return t}function p(){for(var m=0,g=e.length,v;m<g;++m){if(v=e[m],v.index=m,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var y=gMe*Math.sqrt(.5+m),C=m*vMe;v.x=y*Math.cos(C),v.y=y*Math.sin(C)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function h(m){return m.initialize&&m.initialize(e,u),m}return p(),t={tick:d,restart:function(){return c.restart(f),t},stop:function(){return c.stop(),t},nodes:function(m){return arguments.length?(e=m,p(),s.forEach(h),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(o=+m,t):o},velocityDecay:function(m){return arguments.length?(a=1-m,t):1-a},randomSource:function(m){return arguments.length?(u=m,s.forEach(h),t):u},force:function(m,g){return arguments.length>1?(g==null?s.delete(m):s.set(m,h(g)),t):s.get(m)},find:function(m,g,v){var y=0,C=e.length,b,M,S,w,E;for(v==null?v=1/0:v*=v,y=0;y<C;++y)w=e[y],b=m-w.x,M=g-w.y,S=b*b+M*M,S<v&&(E=w,v=S);return E},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function hk(){var e,t,n,r,i=er(-30),o,a=1,s=1/0,c=.81;function l(p){var h,m=e.length,g=r0(e,XJ,QJ).visitAfter(f);for(r=p,h=0;h<m;++h)t=e[h],g.visit(d)}function u(){if(e){var p,h=e.length,m;for(o=new Array(h),p=0;p<h;++p)m=e[p],o[m.index]=+i(m,p,e)}}function f(p){var h=0,m,g,v=0,y,C,b;if(p.length){for(y=C=b=0;b<4;++b)(m=p[b])&&(g=Math.abs(m.value))&&(h+=m.value,v+=g,y+=g*m.x,C+=g*m.y);p.x=y/v,p.y=C/v}else{m=p,m.x=m.data.x,m.y=m.data.y;do h+=o[m.data.index];while(m=m.next)}p.value=h}function d(p,h,m,g){if(!p.value)return!0;var v=p.x-t.x,y=p.y-t.y,C=g-h,b=v*v+y*y;if(C*C/c<b)return b<s&&(v===0&&(v=R2(n),b+=v*v),y===0&&(y=R2(n),b+=y*y),b<a&&(b=Math.sqrt(a*b)),t.vx+=v*p.value*r/b,t.vy+=y*p.value*r/b),!0;if(p.length||b>=s)return;(p.data!==t||p.next)&&(v===0&&(v=R2(n),b+=v*v),y===0&&(y=R2(n),b+=y*y),b<a&&(b=Math.sqrt(a*b)));do p.data!==t&&(C=o[p.data.index]*r/b,t.vx+=v*C,t.vy+=y*C);while(p=p.next)}return l.initialize=function(p,h){e=p,n=h,u()},l.strength=function(p){return arguments.length?(i=typeof p=="function"?p:er(+p),u(),l):i},l.distanceMin=function(p){return arguments.length?(a=p*p,l):Math.sqrt(a)},l.distanceMax=function(p){return arguments.length?(s=p*p,l):Math.sqrt(s)},l.theta=function(p){return arguments.length?(c=p*p,l):Math.sqrt(c)},l}function mk(e){var t=er(.1),n,r,i;typeof e!="function"&&(e=er(e==null?0:+e));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vx+=(i[c]-u.x)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:er(+s),a(),o):t},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:er(+s),a(),o):e},o}function gk(e){var t=er(.1),n,r,i;typeof e!="function"&&(e=er(e==null?0:+e));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vy+=(i[c]-u.y)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:er(+s),a(),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:er(+s),a(),o):e},o}var KJ={center:ak,collide:ck,nbody:hk,link:lk,x:mk,y:gk},xp="forces",vk=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],yMe=["static","iterations"],ZJ=["x","y","vx","vy"];function yk(e){$.call(this,null,e)}yk.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:ZJ}]};ee(yk,$,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(vk),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&JJ(n,e,0,t)):(this.value=n=CMe(t.source,e),n.on("tick",xMe(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(yMe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){let n=t.dataflow;for(let s=this._argops,c=0,l=s.length,u;c<l;++c)if(u=s[c],!(u.name!==xp||u.op._argval.force!=="link")){for(var r=u.op._argops,i=0,o=r.length,a;i<o;++i)if(r[i].name==="links"&&(a=r[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(ZJ)}});function xMe(e,t){return()=>e.touch(t).run()}function CMe(e,t){let n=pk(e),r=n.stop,i=n.restart,o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),JJ(n,t,!0).on("end",()=>o=!0)}function JJ(e,t,n,r){var i=te(t.forces),o,a,s,c;for(o=0,a=vk.length;o<a;++o)s=vk[o],s!==xp&&t.modified(s)&&e[s](t[s]);for(o=0,a=i.length;o<a;++o)c=xp+o,s=n||t.modified(xp,o)?MMe(i[o]):r&&bMe(i[o],r)?e.force(c):null,s&&e.force(c,s);for(a=e.numForces||0;o<a;++o)e.force(xp+o,null);return e.numForces=i.length,e}function bMe(e,t){var n,r;for(n in e)if(Te(r=e[n])&&t.modified(ur(r)))return 1;return 0}function MMe(e){var t,n;de(KJ,e.force)||B("Unrecognized force: "+e.force),t=KJ[e.force]();for(n in e)Te(t[n])&&wMe(t[n],e[n],e);return t}function wMe(e,t,n){e(Te(t)?r=>t(r,n):t)}var Qk={};xr(Qk,{nest:()=>Uk,pack:()=>jk,partition:()=>qk,stratify:()=>Gk,tree:()=>Wk,treelinks:()=>Yk,treemap:()=>Xk});function SMe(e,t){return e.parent===t.parent?1:2}function EMe(e){return e.reduce(DMe,0)/e.length}function DMe(e,t){return e+t.x}function zMe(e){return 1+e.reduce(HMe,0)}function HMe(e,t){return Math.max(e,t.y)}function LMe(e){for(var t;t=e.children;)e=t[0];return e}function AMe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Ck(){var e=SMe,t=1,n=1,r=!1;function i(o){var a,s=0;o.eachAfter(function(d){var p=d.children;p?(d.x=EMe(p),d.y=zMe(p)):(d.x=a?s+=e(d,a):0,d.y=0,a=d)});var c=LMe(o),l=AMe(o),u=c.x-e(c,l)/2,f=l.x+e(l,c)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-u)/(f-u)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function VMe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function eee(){return this.eachAfter(VMe)}function tee(e,t){let n=-1;for(let r of this)e.call(t,r,++n,this);return this}function nee(e,t){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function ree(e,t){for(var n=this,r=[n],i=[],o,a,s,c=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)e.call(t,n,++c,this);return this}function iee(e,t){let n=-1;for(let r of this)if(e.call(t,r,++n,this))return r}function oee(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function aee(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function see(e){for(var t=this,n=NMe(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function NMe(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function cee(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function lee(){return Array.from(this)}function uee(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function fee(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*dee(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function Qu(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=TMe)):t===void 0&&(t=kMe);for(var n=new yc(e),r,i=[n],o,a,s,c;r=i.pop();)if((a=t(r.data))&&(c=(a=Array.from(a)).length))for(r.children=a,s=c-1;s>=0;--s)i.push(o=a[s]=new yc(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(bk)}function _Me(){return Qu(this).eachBefore(IMe)}function kMe(e){return e.children}function TMe(e){return Array.isArray(e)?e[1]:null}function IMe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function bk(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function yc(e){this.data=e,this.depth=this.height=0,this.parent=null}yc.prototype=Qu.prototype={constructor:yc,count:eee,each:tee,eachAfter:ree,eachBefore:nee,find:iee,sum:oee,sort:aee,path:see,ancestors:cee,descendants:lee,leaves:uee,links:fee,copy:_Me,[Symbol.iterator]:dee};function Ku(e){return e==null?null:Mk(e)}function Mk(e){if(typeof e!="function")throw new Error;return e}function xc(){return 0}function s4(e){return function(){return e}}function pee(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function hee(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mee(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function gee(e,t){for(var n=0,r=(e=mee(Array.from(e),t)).length,i=[],o,a;n<r;)o=e[n],a&&vee(a,o)?++n:(a=RMe(i=FMe(i,o)),n=0);return a}function FMe(e,t){var n,r;if(wk(t,e))return[t];for(n=0;n<e.length;++n)if(gC(t,e[n])&&wk(Cp(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(gC(Cp(e[n],e[r]),t)&&gC(Cp(e[n],t),e[r])&&gC(Cp(e[r],t),e[n])&&wk(yee(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function gC(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function vee(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function wk(e,t){for(var n=0;n<t.length;++n)if(!vee(e,t[n]))return!1;return!0}function RMe(e){switch(e.length){case 1:return OMe(e[0]);case 2:return Cp(e[0],e[1]);case 3:return yee(e[0],e[1],e[2])}}function OMe(e){return{x:e.x,y:e.y,r:e.r}}function Cp(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,c=o-n,l=a-r,u=s-i,f=Math.sqrt(c*c+l*l);return{x:(n+o+c/f*u)/2,y:(r+a+l/f*u)/2,r:(f+i+s)/2}}function yee(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,c=t.r,l=n.x,u=n.y,f=n.r,d=r-a,p=r-l,h=i-s,m=i-u,g=c-o,v=f-o,y=r*r+i*i-o*o,C=y-a*a-s*s+c*c,b=y-l*l-u*u+f*f,M=p*h-d*m,S=(h*b-m*C)/(M*2)-r,w=(m*g-h*v)/M,E=(p*C-d*b)/(M*2)-i,D=(d*v-p*g)/M,z=w*w+D*D-1,H=2*(o+S*w+E*D),j=S*S+E*E-o*o,L=-(Math.abs(z)>1e-6?(H+Math.sqrt(H*H-4*z*j))/(2*z):j/H);return{x:r+S+w*L,y:i+E+D*L,r:L}}function xee(e,t,n){var r=e.x-t.x,i,o,a=e.y-t.y,s,c,l=r*r+a*a;l?(o=t.r+n.r,o*=o,c=e.r+n.r,c*=c,o>c?(i=(l+c-o)/(2*l),s=Math.sqrt(Math.max(0,c/l-i*i)),n.x=e.x-i*r-s*a,n.y=e.y-i*a+s*r):(i=(l+o-c)/(2*l),s=Math.sqrt(Math.max(0,o/l-i*i)),n.x=t.x+i*r-s*a,n.y=t.y+i*a+s*r)):(n.x=t.x+n.r,n.y=t.y)}function Cee(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function bee(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function vC(e){this._=e,this.next=null,this.previous=null}function Mee(e,t){if(!(o=(e=hee(e)).length))return 0;var n,r,i,o,a,s,c,l,u,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;xee(r,n,i=e[2]),n=new vC(n),r=new vC(r),i=new vC(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(c=3;c<o;++c){xee(n._,r._,i=e[c]),i=new vC(i),l=r.next,u=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Cee(l._,i._)){r=l,n.next=r,r.previous=n,--c;continue e}f+=l._.r,l=l.next}else{if(Cee(u._,i._)){n=u,n.next=r,r.previous=n,--c;continue e}d+=u._.r,u=u.previous}while(l!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=bee(n);(i=i.next)!==r;)(s=bee(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=gee(n,t),c=0;c<o;++c)n=e[c],n.x-=i.x,n.y-=i.y;return i.r}function PMe(e){return Math.sqrt(e.value)}function Ek(){var e=null,t=1,n=1,r=xc;function i(o){let a=pee();return o.x=t/2,o.y=n/2,e?o.eachBefore(wee(e)).eachAfter(Sk(r,.5,a)).eachBefore(See(1)):o.eachBefore(wee(PMe)).eachAfter(Sk(xc,1,a)).eachAfter(Sk(r,o.r/Math.min(t,n),a)).eachBefore(See(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=Ku(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:s4(+o),i):r},i}function wee(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Sk(e,t,n){return function(r){if(i=r.children){var i,o,a=i.length,s=e(r)*t||0,c;if(s)for(o=0;o<a;++o)i[o].r+=s;if(c=Mee(i,n),s)for(o=0;o<a;++o)i[o].r-=s;r.r=c+s}}}function See(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function yC(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function O2(e,t,n,r,i){for(var o=e.children,a,s=-1,c=o.length,l=e.value&&(r-t)/e.value;++s<c;)a=o[s],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*l}function Dk(){var e=1,t=1,n=0,r=!1;function i(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/s,a.eachBefore(o(t,s)),r&&a.eachBefore(yC),a}function o(a,s){return function(c){c.children&&O2(c,c.x0,a*(c.depth+1)/s,c.x1,a*(c.depth+2)/s);var l=c.x0,u=c.y0,f=c.x1-n,d=c.y1-n;f<l&&(l=f=(l+f)/2),d<u&&(u=d=(u+d)/2),c.x0=l,c.y0=u,c.x1=f,c.y1=d}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var $Me={depth:-1},Eee={},zk={};function BMe(e){return e.id}function UMe(e){return e.parentId}function xC(){var e=BMe,t=UMe,n;function r(i){var o=Array.from(i),a=e,s=t,c,l,u,f,d,p,h,m,g=new Map;if(n!=null){let v=o.map((b,M)=>jMe(n(b,M,i))),y=v.map(Dee),C=new Set(v).add("");for(let b of y)C.has(b)||(C.add(b),v.push(b),y.push(Dee(b)),o.push(zk));a=(b,M)=>v[M],s=(b,M)=>y[M]}for(u=0,c=o.length;u<c;++u)l=o[u],p=o[u]=new yc(l),(h=a(l,u,i))!=null&&(h+="")&&(m=p.id=h,g.set(m,g.has(m)?Eee:p)),(h=s(l,u,i))!=null&&(h+="")&&(p.parent=h);for(u=0;u<c;++u)if(p=o[u],h=p.parent){if(d=g.get(h),!d)throw new Error("missing: "+h);if(d===Eee)throw new Error("ambiguous: "+h);d.children?d.children.push(p):d.children=[p],p.parent=d}else{if(f)throw new Error("multiple roots");f=p}if(!f)throw new Error("no root");if(n!=null){for(;f.data===zk&&f.children.length===1;)f=f.children[0],--c;for(let v=o.length-1;v>=0&&(p=o[v],p.data===zk);--v)p.data=null}if(f.parent=$Me,f.eachBefore(function(v){v.depth=v.parent.depth+1,--c}).eachBefore(bk),f.parent=null,c>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=Ku(i),r):e},r.parentId=function(i){return arguments.length?(t=Ku(i),r):t},r.path=function(i){return arguments.length?(n=Ku(i),r):n},r}function jMe(e){e=`${e}`;let t=e.length;return Hk(e,t-1)&&!Hk(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Dee(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Hk(e,t););return e.slice(0,t)}function Hk(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function qMe(e,t){return e.parent===t.parent?1:2}function Lk(e){var t=e.children;return t?t[0]:e.t}function Ak(e){var t=e.children;return t?t[t.length-1]:e.t}function GMe(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function WMe(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function YMe(e,t,n){return e.a.parent===t.parent?e.a:n}function CC(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}CC.prototype=Object.create(yc.prototype);function XMe(e){for(var t=new CC(e,0),n,r=[t],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new CC(o[a],a)),i.parent=n;return(t.parent=new CC(null,0)).children=[t],t}function Vk(){var e=qMe,t=1,n=1,r=null;function i(l){var u=XMe(l);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)l.eachBefore(c);else{var f=l,d=l,p=l;l.eachBefore(function(y){y.x<f.x&&(f=y),y.x>d.x&&(d=y),y.depth>p.depth&&(p=y)});var h=f===d?1:e(f,d)/2,m=h-f.x,g=t/(d.x+h+m),v=n/(p.depth||1);l.eachBefore(function(y){y.x=(y.x+m)*g,y.y=y.depth*v})}return l}function o(l){var u=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(u){WMe(l);var p=(u[0].z+u[u.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-p):l.z=p}else d&&(l.z=d.z+e(l._,d._));l.parent.A=s(l,d,l.parent.A||f[0])}function a(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function s(l,u,f){if(u){for(var d=l,p=l,h=u,m=d.parent.children[0],g=d.m,v=p.m,y=h.m,C=m.m,b;h=Ak(h),d=Lk(d),h&&d;)m=Lk(m),p=Ak(p),p.a=l,b=h.z+y-d.z-g+e(h._,d._),b>0&&(GMe(YMe(h,l,f),l,b),g+=b,v+=b),y+=h.m,g+=d.m,C+=m.m,v+=p.m;h&&!Ak(p)&&(p.t=h,p.m+=y-v),d&&!Lk(m)&&(m.t=d,m.m+=g-C,f=l)}return f}function c(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function Cc(e,t,n,r,i){for(var o=e.children,a,s=-1,c=o.length,l=e.value&&(i-n)/e.value;++s<c;)a=o[s],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*l}var Nk=(1+Math.sqrt(5))/2;function _k(e,t,n,r,i,o){for(var a=[],s=t.children,c,l,u=0,f=0,d=s.length,p,h,m=t.value,g,v,y,C,b,M,S;u<d;){p=i-n,h=o-r;do g=s[f++].value;while(!g&&f<d);for(v=y=g,M=Math.max(h/p,p/h)/(m*e),S=g*g*M,b=Math.max(y/S,S/v);f<d;++f){if(g+=l=s[f].value,l<v&&(v=l),l>y&&(y=l),S=g*g*M,C=Math.max(y/S,S/v),C>b){g-=l;break}b=C}a.push(c={value:g,dice:p<h,children:s.slice(u,f)}),c.dice?O2(c,n,r,i,m?r+=h*g/m:o):Cc(c,n,r,m?n+=p*g/m:i,o),m-=g,u=f}return a}var bp=function e(t){function n(r,i,o,a,s){_k(t,r,i,o,a,s)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Nk);function kk(){var e=bp,t=!1,n=1,r=1,i=[0],o=xc,a=xc,s=xc,c=xc,l=xc;function u(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(yC),d}function f(d){var p=i[d.depth],h=d.x0+p,m=d.y0+p,g=d.x1-p,v=d.y1-p;g<h&&(h=g=(h+g)/2),v<m&&(m=v=(m+v)/2),d.x0=h,d.y0=m,d.x1=g,d.y1=v,d.children&&(p=i[d.depth+1]=o(d)/2,h+=l(d)-p,m+=a(d)-p,g-=s(d)-p,v-=c(d)-p,g<h&&(h=g=(h+g)/2),v<m&&(m=v=(m+v)/2),e(d,h,m,g,v))}return u.round=function(d){return arguments.length?(t=!!d,u):t},u.size=function(d){return arguments.length?(n=+d[0],r=+d[1],u):[n,r]},u.tile=function(d){return arguments.length?(e=Mk(d),u):e},u.padding=function(d){return arguments.length?u.paddingInner(d).paddingOuter(d):u.paddingInner()},u.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:s4(+d),u):o},u.paddingOuter=function(d){return arguments.length?u.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):u.paddingTop()},u.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:s4(+d),u):a},u.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:s4(+d),u):s},u.paddingBottom=function(d){return arguments.length?(c=typeof d=="function"?d:s4(+d),u):c},u.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:s4(+d),u):l},u}function Tk(e,t,n,r,i){var o=e.children,a,s=o.length,c,l=new Array(s+1);for(l[0]=c=a=0;a<s;++a)l[a+1]=c+=o[a].value;u(0,s,e.value,t,n,r,i);function u(f,d,p,h,m,g,v){if(f>=d-1){var y=o[f];y.x0=h,y.y0=m,y.x1=g,y.y1=v;return}for(var C=l[f],b=p/2+C,M=f+1,S=d-1;M<S;){var w=M+S>>>1;l[w]<b?M=w+1:S=w}b-l[M-1]<l[M]-b&&f+1<M&&--M;var E=l[M]-C,D=p-E;if(g-h>v-m){var z=p?(h*D+g*E)/p:g;u(f,M,E,h,m,z,v),u(M,d,D,z,m,g,v)}else{var H=p?(m*D+v*E)/p:v;u(f,M,E,h,m,g,H),u(M,d,D,h,H,g,v)}}}function Ik(e,t,n,r,i){(e.depth&1?Cc:O2)(e,t,n,r,i)}var Fk=function e(t){function n(r,i,o,a,s){if((c=r._squarify)&&c.ratio===t)for(var c,l,u,f,d=-1,p,h=c.length,m=r.value;++d<h;){for(l=c[d],u=l.children,f=l.value=0,p=u.length;f<p;++f)l.value+=u[f].value;l.dice?O2(l,i,o,a,m?o+=(s-o)*l.value/m:s):Cc(l,i,o,m?i+=(a-i)*l.value/m:a,s),m-=l.value}else r._squarify=c=_k(t,r,i,o,a,s),c.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Nk);function Rk(e,t,n){let r={};return e.each(i=>{let o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function Uk(e){$.call(this,null,e)}Uk.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var QMe=e=>e.values;ee(Uk,$,{transform(e,t){t.source||B("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(a=>{a.children&&wl(a.data)&&i.rem.push(a.data)}),this.value=o=Qu({values:te(e.keys).reduce((a,s)=>(a.key(s),a),KMe()).entries(i.source)},QMe),n&&o.each(a=>{a.children&&(a=ct(a.data),i.add.push(a),i.source.push(a))}),Rk(o,De,De)),i.source.root=o,i}});function KMe(){let e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;let a=i.length,s=e[o++],c={},l={},u=-1,f,d,p;for(;++u<a;)f=s(d=i[u])+"",(p=c[f])?p.push(d):c[f]=[d];for(f in c)l[f]=n(c[f],o);return l}function r(i,o){if(++o>e.length)return i;let a=[];for(let s in i)a.push({key:s,values:r(i[s],o)});return a}return t}function bc(e){$.call(this,null,e)}var ZMe=(e,t)=>e.parent===t.parent?1:2;ee(bc,$,{transform(e,t){(!t.source||!t.source.root)&&B(this.constructor.name+" transform requires a backing tree data source.");let n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort($a(e.sort,a=>a.data)),JMe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?ZMe:Ta);try{this.value=n(i)}catch(a){B(a)}return i.each(a=>ewe(a,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function JMe(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function ewe(e,t,n){let r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}var Ok=["x","y","r","depth","children"];function jk(e){bc.call(this,e)}jk.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Ok.length,default:Ok}]};ee(jk,bc,{layout:Ek,params:["radius","size","padding"],fields:Ok});var Pk=["x0","y0","x1","y1","depth","children"];function qk(e){bc.call(this,e)}qk.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Pk.length,default:Pk}]};ee(qk,bc,{layout:Dk,params:["size","round","padding"],fields:Pk});function Gk(e){$.call(this,null,e)}Gk.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ee(Gk,$,{transform(e,t){t.source||B("Stratify transform requires an upstream data source.");let n=this.value,r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?Rk(xC().id(e.key).parentId(e.parentKey)(i.source),e.key,fr):Rk(xC()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});var zee={tidy:Vk,cluster:Ck},$k=["x","y","depth","children"];function Wk(e){bc.call(this,e)}Wk.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:$k.length,default:$k}]};ee(Wk,bc,{layout(e){let t=e||"tidy";if(de(zee,t))return zee[t]();B("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:$k});function Yk(e){$.call(this,[],e)}Yk.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ee(Yk,$,{transform(e,t){let n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||B("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,a=>o[De(a)]=1),r.each(a=>{let s=a.data,c=a.parent&&a.parent.data;c&&o[De(s)]&&o[De(c)]&&i.add.push(ct({source:c,target:s}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>o[De(a)]=1),n.forEach(a=>{(o[De(a.source)]||o[De(a.target)])&&i.mod.push(a)})),i}});var Hee={binary:Tk,dice:O2,slice:Cc,slicedice:Ik,squarify:bp,resquarify:Fk},Bk=["x0","y0","x1","y1","depth","children"];function Xk(e){bc.call(this,e)}Xk.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Bk.length,default:Bk}]};ee(Xk,bc,{layout(){let e=kk();return e.ratio=t=>{let n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{de(Hee,t)?e.tile(Hee[t]):B("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:Bk});var sT={};xr(sT,{label:()=>aT});var Kk=4278190080;function twe(e,t){let n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function nwe(e,t,n,r,i){let o=e.width,a=e.height,s=r||i,c=$o(o,a).getContext("2d"),l=$o(o,a).getContext("2d"),u=s&&$o(o,a).getContext("2d");n.forEach(E=>bC(c,E,!1)),bC(l,t,!1),s&&bC(u,t,!0);let f=Zk(c,o,a),d=Zk(l,o,a),p=s&&Zk(u,o,a),h=e.bitmap(),m=s&&e.bitmap(),g,v,y,C,b,M,S,w;for(v=0;v<a;++v)for(g=0;g<o;++g)b=v*o+g,M=f[b]&Kk,w=d[b]&Kk,S=s&&p[b]&Kk,(M||S||w)&&(y=e(g),C=e(v),!i&&(M||w)&&h.set(y,C),s&&(M||S)&&m.set(y,C));return[h,m]}function Zk(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function bC(e,t,n){if(!t.length)return;let r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>bC(e,o.items,n))}):Zi[r].draw(e,{items:n?t.map(rwe):t})}function rwe(e){let t=Sl(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?k(x({},t),{strokeOpacity:1,stroke:"#000",fillOpacity:0}):t}var Mc=5,i1=31,Mp=32,c4=new Uint32Array(Mp+1),P2=new Uint32Array(Mp+1);P2[0]=0;c4[0]=~P2[0];for(let e=1;e<=Mp;++e)P2[e]=P2[e-1]<<1|1,c4[e]=~P2[e];function iwe(e,t){let n=new Uint32Array(~~((e*t+Mp)/Mp));function r(o,a){n[o]|=a}function i(o,a){n[o]&=a}return{array:n,get:(o,a)=>{let s=a*e+o;return n[s>>>Mc]&1<<(s&i1)},set:(o,a)=>{let s=a*e+o;r(s>>>Mc,1<<(s&i1))},clear:(o,a)=>{let s=a*e+o;i(s>>>Mc,~(1<<(s&i1)))},getRange:(o,a,s,c)=>{let l=c,u,f,d,p;for(;l>=a;--l)if(u=l*e+o,f=l*e+s,d=u>>>Mc,p=f>>>Mc,d===p){if(n[d]&c4[u&i1]&P2[(f&i1)+1])return!0}else{if(n[d]&c4[u&i1]||n[p]&P2[(f&i1)+1])return!0;for(let h=d+1;h<p;++h)if(n[h])return!0}return!1},setRange:(o,a,s,c)=>{let l,u,f,d,p;for(;a<=c;++a)if(l=a*e+o,u=a*e+s,f=l>>>Mc,d=u>>>Mc,f===d)r(f,c4[l&i1]&P2[(u&i1)+1]);else for(r(f,c4[l&i1]),r(d,P2[(u&i1)+1]),p=f+1;p<d;++p)r(p,4294967295)},clearRange:(o,a,s,c)=>{let l,u,f,d,p;for(;a<=c;++a)if(l=a*e+o,u=a*e+s,f=l>>>Mc,d=u>>>Mc,f===d)i(f,P2[l&i1]|c4[(u&i1)+1]);else for(i(f,P2[l&i1]),i(d,c4[(u&i1)+1]),p=f+1;p<d;++p)i(p,0)},outOfBounds:(o,a,s,c)=>o<0||a<0||c>=t||s>=e}}function owe(e,t,n){let r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=s=>~~((s+n)/r);return a.invert=s=>s*r-n,a.bitmap=()=>iwe(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function awe(e,t,n,r){let i=e.width,o=e.height;return function(a){let s=a.datum.datum.items[r].items,c=s.length,l=a.datum.fontSize,u=H1.width(a.datum,a.datum.text),f=0,d,p,h,m,g,v,y;for(let C=0;C<c;++C)d=s[C].x,h=s[C].y,p=s[C].x2===void 0?d:s[C].x2,m=s[C].y2===void 0?h:s[C].y2,g=(d+p)/2,v=(h+m)/2,y=Math.abs(p-d+m-h),y>=f&&(f=y,a.x=g,a.y=v);return g=u/2,v=l/2,d=a.x-g,p=a.x+g,h=a.y-v,m=a.y+v,a.align="center",d<0&&p<=i?a.align="left":0<=d&&i<p&&(a.align="right"),a.baseline="middle",h<0&&m<=o?a.baseline="top":0<=h&&o<m&&(a.baseline="bottom"),!0}}function MC(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function l4(e,t,n,r,i,o,a,s){let c=i*o/(r*2),l=e(t-c),u=e(t+c),f=e(n-(o=o/2)),d=e(n+o);return a.outOfBounds(l,f,u,d)||a.getRange(l,f,u,d)||s&&s.getRange(l,f,u,d)}function swe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1];function c(l,u,f,d,p){let h=e.invert(l),m=e.invert(u),g=f,v=o,y;if(!MC(h,m,d,p,i,o)&&!l4(e,h,m,p,d,g,a,s)&&!l4(e,h,m,p,d,p,a,null)){for(;v-g>=1;)y=(g+v)/2,l4(e,h,m,p,d,y,a,s)?v=y:g=y;if(g>f)return[h,m,g,!0]}}return function(l){let u=l.datum.datum.items[r].items,f=u.length,d=l.datum.fontSize,p=H1.width(l.datum,l.datum.text),h=n?d:0,m=!1,g=!1,v=0,y,C,b,M,S,w,E,D,z,H,j,L,_,A,T,G,X;for(let J=0;J<f;++J){for(y=u[J].x,b=u[J].y,C=u[J].x2===void 0?y:u[J].x2,M=u[J].y2===void 0?b:u[J].y2,y>C&&(X=y,y=C,C=X),b>M&&(X=b,b=M,M=X),z=e(y),j=e(C),H=~~((z+j)/2),L=e(b),A=e(M),_=~~((L+A)/2),E=H;E>=z;--E)for(D=_;D>=L;--D)G=c(E,D,h,p,d),G&&([l.x,l.y,h,m]=G);for(E=H;E<=j;++E)for(D=_;D<=A;++D)G=c(E,D,h,p,d),G&&([l.x,l.y,h,m]=G);!m&&!n&&(T=Math.abs(C-y+M-b),S=(y+C)/2,w=(b+M)/2,T>=v&&!MC(S,w,p,d,i,o)&&!l4(e,S,w,d,p,d,a,null)&&(v=T,l.x=S,l.y=w,g=!0))}return m||g?(S=p/2,w=d/2,a.setRange(e(l.x-S),e(l.y-w),e(l.x+S),e(l.y+w)),l.align="center",l.baseline="middle",!0):!1}}var cwe=[-1,-1,1,1],lwe=[-1,1,-1,1];function uwe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1],c=e.bitmap();return function(l){let u=l.datum.datum.items[r].items,f=u.length,d=l.datum.fontSize,p=H1.width(l.datum,l.datum.text),h=[],m=n?d:0,g=!1,v=!1,y=0,C,b,M,S,w,E,D,z,H,j,L,_;for(let A=0;A<f;++A){for(C=u[A].x,M=u[A].y,b=u[A].x2===void 0?C:u[A].x2,S=u[A].y2===void 0?M:u[A].y2,h.push([e((C+b)/2),e((M+S)/2)]);h.length;)if([D,z]=h.pop(),!(a.get(D,z)||s.get(D,z)||c.get(D,z))){c.set(D,z);for(let T=0;T<4;++T)w=D+cwe[T],E=z+lwe[T],c.outOfBounds(w,E,w,E)||h.push([w,E]);if(w=e.invert(D),E=e.invert(z),H=m,j=o,!MC(w,E,p,d,i,o)&&!l4(e,w,E,d,p,H,a,s)&&!l4(e,w,E,d,p,d,a,null)){for(;j-H>=1;)L=(H+j)/2,l4(e,w,E,d,p,L,a,s)?j=L:H=L;H>m&&(l.x=w,l.y=E,m=H,g=!0)}}!g&&!n&&(_=Math.abs(b-C+S-M),w=(C+b)/2,E=(M+S)/2,_>=y&&!MC(w,E,p,d,i,o)&&!l4(e,w,E,d,p,d,a,null)&&(y=_,l.x=w,l.y=E,v=!0))}return g||v?(w=p/2,E=d/2,a.setRange(e(l.x-w),e(l.y-E),e(l.x+w),e(l.y+E)),l.align="center",l.baseline="middle",!0):!1}}var fwe=["right","center","left"],dwe=["bottom","middle","top"];function pwe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1],c=r.length;return function(l){let u=l.boundary,f=l.datum.fontSize;if(u[2]<0||u[5]<0||u[0]>i||u[3]>o)return!1;let d=l.textWidth??0,p,h,m,g,v,y,C,b,M,S,w,E,D,z,H;for(let j=0;j<c;++j){if(p=(n[j]&3)-1,h=(n[j]>>>2&3)-1,m=p===0&&h===0||r[j]<0,g=p&&h?Math.SQRT1_2:1,v=r[j]<0?-1:1,y=u[1+p]+r[j]*p*g,w=u[4+h]+v*f*h/2+r[j]*h*g,b=w-f/2,M=w+f/2,E=e(y),z=e(b),H=e(M),!d)if(Lee(E,E,z,H,a,s,y,y,b,M,u,m))d=H1.width(l.datum,l.datum.text);else continue;if(S=y+v*d*p/2,y=S-d/2,C=S+d/2,E=e(y),D=e(C),Lee(E,D,z,H,a,s,y,C,b,M,u,m))return l.x=p?p*v<0?C:y:S,l.y=h?h*v<0?M:b:w,l.align=fwe[p*v+1],l.baseline=dwe[h*v+1],a.setRange(E,z,D,H),!0}return!1}}function Lee(e,t,n,r,i,o,a,s,c,l,u,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}var Jk=0,eT=4,tT=8,nT=0,rT=1,iT=2,hwe={"top-left":Jk+nT,top:Jk+rT,"top-right":Jk+iT,left:eT+nT,middle:eT+rT,right:eT+iT,"bottom-left":tT+nT,bottom:tT+rT,"bottom-right":tT+iT},mwe={naive:awe,"reduced-search":swe,floodfill:uwe};function gwe(e,t,n,r,i,o,a,s,c,l,u){if(!e.length)return e;let f=Math.max(r.length,i.length),d=vwe(r,f),p=ywe(i,f),h=xwe(e[0].datum),m=h==="group"&&e[0].datum.items[c].marktype,g=m==="area",v=Cwe(h,m,s,c),y=l===null||l===1/0,C=g&&u==="naive",b=-1,M=-1,S=e.map(z=>{let H=y?H1.width(z,z.text):void 0;return b=Math.max(b,H),M=Math.max(M,z.fontSize),{datum:z,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(z),textWidth:H}});l=l===null||l===1/0?Math.max(b,M)+Math.max(...r):l;let w=owe(t[0],t[1],l),E;if(!C){n&&S.sort((j,L)=>n(j.datum,L.datum));let z=!1;for(let j=0;j<p.length&&!z;++j)z=p[j]===5||d[j]<0;let H=(h&&a||g)&&e.map(j=>j.datum);E=o.length||H?nwe(w,H||[],o,z,g):twe(w,a&&S)}let D=g?mwe[u](w,E,a,c):pwe(w,E,p,d);return S.forEach(z=>z.opacity=+D(z)),S}function vwe(e,t){let n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function ywe(e,t){let n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=hwe[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function xwe(e){return e&&e.mark&&e.mark.marktype}function Cwe(e,t,n,r){let i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{let a=o.datum.items[r].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:o=>{let a=o.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}var oT=["x","y","opacity","align","baseline"],Aee=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function aT(e){$.call(this,null,e)}aT.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Aee},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:oT.length,default:oT}]};ee(aT,$,{transform(e,t){function n(o){let a=e[o];return Te(a)&&t.modified(a.fields)}let r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&B("Size parameter should be specified as a [width, height] array.");let i=e.as||oT;return gwe(t.materialize(t.SOURCE).source||[],e.size,e.sort,te(e.offset==null?1:e.offset),te(e.anchor||Aee),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{let a=o.datum;a[i[0]]=o.x,a[i[1]]=o.y,a[i[2]]=o.opacity,a[i[3]]=o.align,a[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});var fT={};xr(fT,{loess:()=>lT,regression:()=>uT});function Vee(e,t){var n=[],r=function(u){return u(s)},i,o,a,s,c,l;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],c=t.map(r),l=i[c],l||(i[c]=l=[],l.dims=c,n.push(l)),l.push(s);return n}function lT(e){$.call(this,null,e)}lT.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ee(lT,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=Vee(r,e.groupby),o=(e.groupby||[]).map(un),a=o.length,s=e.as||[un(e.x),un(e.y)],c=[];i.forEach(l=>{JL(l,e.x,e.y,e.bandwidth||.3).forEach(u=>{let f={};for(let d=0;d<a;++d)f[o[d]]=l.dims[d];f[s[0]]=u[0],f[s[1]]=u[1],c.push(ct(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});var cT={constant:Xv,linear:Kv,log:XL,exp:QL,pow:KL,quad:Zv,poly:ZL},bwe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function uT(e){$.call(this,null,e)}uT.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(cT)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ee(uT,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=Vee(r,e.groupby),o=(e.groupby||[]).map(un),a=e.method||"linear",s=e.order==null?3:e.order,c=bwe(a,s),l=e.as||[un(e.x),un(e.y)],u=cT[a],f=[],d=e.extent;de(cT,a)||B("Invalid regression method: "+a),d!=null&&a==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(p=>{if(p.length<=c){t.dataflow.warn("Skipping regression with more parameters than data points.");return}let m=u(p,e.x,e.y,s);if(e.params){f.push(ct({keys:p.dims,coef:m.coef,rSquared:m.rSquared}));return}let g=d||ji(p,e.x),v=y=>{let C={};for(let b=0;b<o.length;++b)C[o[b]]=p.dims[b];C[l[0]]=y[0],C[l[1]]=y[1],f.push(ct(C))};a==="linear"||a==="constant"?g.forEach(y=>v([y,m.predict(y)])):lu(m.predict,g,25,200).forEach(v)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});var hT={};xr(hT,{voronoi:()=>pT});var vt=11102230246251565e-32,tr=134217729,wp=(3+8*vt)*vt;function o0(e,t,n,r,i){let o,a,s,c,l=t[0],u=r[0],f=0,d=0;u>l==u>-l?(o=l,l=t[++f]):(o=u,u=r[++d]);let p=0;if(f<e&&d<n)for(u>l==u>-l?(a=l+o,s=o-(a-l),l=t[++f]):(a=u+o,s=o-(a-u),u=r[++d]),o=a,s!==0&&(i[p++]=s);f<e&&d<n;)u>l==u>-l?(a=o+l,c=a-o,s=o-(a-c)+(l-c),l=t[++f]):(a=o+u,c=a-o,s=o-(a-c)+(u-c),u=r[++d]),o=a,s!==0&&(i[p++]=s);for(;f<e;)a=o+l,c=a-o,s=o-(a-c)+(l-c),l=t[++f],o=a,s!==0&&(i[p++]=s);for(;d<n;)a=o+u,c=a-o,s=o-(a-c)+(u-c),u=r[++d],o=a,s!==0&&(i[p++]=s);return(o!==0||p===0)&&(i[p++]=o),p}function Sp(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function re(e){return new Float64Array(e)}var Mwe=(3+16*vt)*vt,wwe=(2+12*vt)*vt,Swe=(9+64*vt)*vt*vt,Zu=re(4),Nee=re(8),_ee=re(12),kee=re(16),o1=re(4);function Ewe(e,t,n,r,i,o,a){let s,c,l,u,f,d,p,h,m,g,v,y,C,b,M,S,w,E,D=e-i,z=n-i,H=t-o,j=r-o;b=D*j,d=tr*D,p=d-(d-D),h=D-p,d=tr*j,m=d-(d-j),g=j-m,M=h*g-(b-p*m-h*m-p*g),S=H*z,d=tr*H,p=d-(d-H),h=H-p,d=tr*z,m=d-(d-z),g=z-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,Zu[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,Zu[1]=C-(v+f)+(f-S),E=y+v,f=E-y,Zu[2]=y-(E-f)+(v-f),Zu[3]=E;let L=Sp(4,Zu),_=wwe*a;if(L>=_||-L>=_||(f=e-D,s=e-(D+f)+(f-i),f=n-z,l=n-(z+f)+(f-i),f=t-H,c=t-(H+f)+(f-o),f=r-j,u=r-(j+f)+(f-o),s===0&&c===0&&l===0&&u===0)||(_=Swe*a+wp*Math.abs(L),L+=D*u+j*s-(H*l+z*c),L>=_||-L>=_))return L;b=s*j,d=tr*s,p=d-(d-s),h=s-p,d=tr*j,m=d-(d-j),g=j-m,M=h*g-(b-p*m-h*m-p*g),S=c*z,d=tr*c,p=d-(d-c),h=c-p,d=tr*z,m=d-(d-z),g=z-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,o1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,o1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,o1[2]=y-(E-f)+(v-f),o1[3]=E;let A=o0(4,Zu,4,o1,Nee);b=D*u,d=tr*D,p=d-(d-D),h=D-p,d=tr*u,m=d-(d-u),g=u-m,M=h*g-(b-p*m-h*m-p*g),S=H*l,d=tr*H,p=d-(d-H),h=H-p,d=tr*l,m=d-(d-l),g=l-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,o1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,o1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,o1[2]=y-(E-f)+(v-f),o1[3]=E;let T=o0(A,Nee,4,o1,_ee);b=s*u,d=tr*s,p=d-(d-s),h=s-p,d=tr*u,m=d-(d-u),g=u-m,M=h*g-(b-p*m-h*m-p*g),S=c*l,d=tr*c,p=d-(d-c),h=c-p,d=tr*l,m=d-(d-l),g=l-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,o1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,o1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,o1[2]=y-(E-f)+(v-f),o1[3]=E;let G=o0(T,_ee,4,o1,kee);return kee[G-1]}function Ju(e,t,n,r,i,o){let a=(t-o)*(n-i),s=(e-i)*(r-o),c=a-s,l=Math.abs(a+s);return Math.abs(c)>=Mwe*l?c:-Ewe(e,t,n,r,i,o,l)}var n4t=(7+56*vt)*vt,r4t=(3+28*vt)*vt,i4t=(26+288*vt)*vt*vt,o4t=re(4),a4t=re(4),s4t=re(4),c4t=re(4),l4t=re(4),u4t=re(4),f4t=re(4),d4t=re(4),p4t=re(4),h4t=re(8),m4t=re(8),g4t=re(8),v4t=re(4),y4t=re(8),x4t=re(8),C4t=re(8),b4t=re(12),M4t=re(192),w4t=re(192);var D4t=(10+96*vt)*vt,z4t=(4+48*vt)*vt,H4t=(44+576*vt)*vt*vt,L4t=re(4),A4t=re(4),V4t=re(4),N4t=re(4),_4t=re(4),k4t=re(4),T4t=re(4),I4t=re(4),F4t=re(8),R4t=re(8),O4t=re(8),P4t=re(8),$4t=re(8),B4t=re(8),U4t=re(8),j4t=re(8),q4t=re(8),G4t=re(4),W4t=re(4),Y4t=re(4),X4t=re(8),Q4t=re(16),K4t=re(16),Z4t=re(16),J4t=re(32),elt=re(32),tlt=re(48),nlt=re(64),rlt=re(1152),ilt=re(1152);var clt=(16+224*vt)*vt,llt=(5+72*vt)*vt,ult=(71+1408*vt)*vt*vt,flt=re(4),dlt=re(4),plt=re(4),hlt=re(4),mlt=re(4),glt=re(4),vlt=re(4),ylt=re(4),xlt=re(4),Clt=re(4),blt=re(24),Mlt=re(24),wlt=re(24),Slt=re(24),Elt=re(24),Dlt=re(24),zlt=re(24),Hlt=re(24),Llt=re(24),Alt=re(24),Vlt=re(1152),Nlt=re(1152),_lt=re(1152),klt=re(1152),Tlt=re(1152),Ilt=re(2304),Flt=re(2304),Rlt=re(3456),Olt=re(5760),Plt=re(8),$lt=re(8),Blt=re(8),Ult=re(16),jlt=re(24),qlt=re(48),Glt=re(48),Wlt=re(96),Ylt=re(192),Xlt=re(384),Qlt=re(384),Klt=re(384),Zlt=re(768);var Jlt=re(96),e0t=re(96),t0t=re(96),n0t=re(1152);var Iee=Math.pow(2,-52),wC=new Uint32Array(512),Dp=class e{static from(t,n=Vwe,r=Nwe){let i=t.length,o=new Float64Array(i*2);for(let a=0;a<i;a++){let s=t[a];o[2*a]=n(s),o[2*a+1]=r(s)}return new e(o)}constructor(t){let n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;let r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){let{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,a=t.length>>1,s=1/0,c=1/0,l=-1/0,u=-1/0;for(let D=0;D<a;D++){let z=t[2*D],H=t[2*D+1];z<s&&(s=z),H<c&&(c=H),z>l&&(l=z),H>u&&(u=H),this._ids[D]=D}let f=(s+l)/2,d=(c+u)/2,p,h,m;for(let D=0,z=1/0;D<a;D++){let H=dT(f,d,t[2*D],t[2*D+1]);H<z&&(p=D,z=H)}let g=t[2*p],v=t[2*p+1];for(let D=0,z=1/0;D<a;D++){if(D===p)continue;let H=dT(g,v,t[2*D],t[2*D+1]);H<z&&H>0&&(h=D,z=H)}let y=t[2*h],C=t[2*h+1],b=1/0;for(let D=0;D<a;D++){if(D===p||D===h)continue;let z=Lwe(g,v,y,C,t[2*D],t[2*D+1]);z<b&&(m=D,b=z)}let M=t[2*m],S=t[2*m+1];if(b===1/0){for(let H=0;H<a;H++)this._dists[H]=t[2*H]-t[0]||t[2*H+1]-t[1];ef(this._ids,this._dists,0,a-1);let D=new Uint32Array(a),z=0;for(let H=0,j=-1/0;H<a;H++){let L=this._ids[H],_=this._dists[L];_>j&&(D[z++]=L,j=_)}this.hull=D.subarray(0,z),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Ju(g,v,y,C,M,S)<0){let D=h,z=y,H=C;h=m,y=M,C=S,m=D,M=z,S=H}let w=Awe(g,v,y,C,M,S);this._cx=w.x,this._cy=w.y;for(let D=0;D<a;D++)this._dists[D]=dT(t[2*D],t[2*D+1],w.x,w.y);ef(this._ids,this._dists,0,a-1),this._hullStart=p;let E=3;r[p]=n[m]=h,r[h]=n[p]=m,r[m]=n[h]=p,i[p]=0,i[h]=1,i[m]=2,o.fill(-1),o[this._hashKey(g,v)]=p,o[this._hashKey(y,C)]=h,o[this._hashKey(M,S)]=m,this.trianglesLen=0,this._addTriangle(p,h,m,-1,-1,-1);for(let D=0,z,H;D<this._ids.length;D++){let j=this._ids[D],L=t[2*j],_=t[2*j+1];if(D>0&&Math.abs(L-z)<=Iee&&Math.abs(_-H)<=Iee||(z=L,H=_,j===p||j===h||j===m))continue;let A=0;for(let Se=0,Ee=this._hashKey(L,_);Se<this._hashSize&&(A=o[(Ee+Se)%this._hashSize],!(A!==-1&&A!==r[A]));Se++);A=n[A];let T=A,G;for(;G=r[T],Ju(L,_,t[2*T],t[2*T+1],t[2*G],t[2*G+1])>=0;)if(T=G,T===A){T=-1;break}if(T===-1)continue;let X=this._addTriangle(T,j,r[T],-1,-1,i[T]);i[j]=this._legalize(X+2),i[T]=X,E++;let J=r[T];for(;G=r[J],Ju(L,_,t[2*J],t[2*J+1],t[2*G],t[2*G+1])<0;)X=this._addTriangle(J,j,G,i[j],-1,i[J]),i[j]=this._legalize(X+2),r[J]=J,E--,J=G;if(T===A)for(;G=n[T],Ju(L,_,t[2*G],t[2*G+1],t[2*T],t[2*T+1])<0;)X=this._addTriangle(G,j,T,-1,i[T],i[G]),this._legalize(X+2),i[G]=X,r[T]=T,E--,T=G;this._hullStart=n[j]=T,r[T]=n[J]=j,r[j]=J,o[this._hashKey(L,_)]=j,o[this._hashKey(t[2*T],t[2*T+1])]=T}this.hull=new Uint32Array(E);for(let D=0,z=this._hullStart;D<E;D++)this.hull[D]=z,z=r[z];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(zwe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){let{_triangles:n,_halfedges:r,coords:i}=this,o=0,a=0;for(;;){let s=r[t],c=t-t%3;if(a=c+(t+2)%3,s===-1){if(o===0)break;t=wC[--o];continue}let l=s-s%3,u=c+(t+1)%3,f=l+(s+2)%3,d=n[a],p=n[t],h=n[u],m=n[f];if(Hwe(i[2*d],i[2*d+1],i[2*p],i[2*p+1],i[2*h],i[2*h+1],i[2*m],i[2*m+1])){n[t]=m,n[s]=d;let v=r[f];if(v===-1){let C=this._hullStart;do{if(this._hullTri[C]===f){this._hullTri[C]=t;break}C=this._hullPrev[C]}while(C!==this._hullStart)}this._link(t,v),this._link(s,r[a]),this._link(a,f);let y=l+(s+1)%3;o<wC.length&&(wC[o++]=y)}else{if(o===0)break;t=wC[--o]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,a){let s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=n,this._triangles[s+2]=r,this._link(s,i),this._link(s+1,o),this._link(s+2,a),this.trianglesLen+=3,s}};function zwe(e,t){let n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function dT(e,t,n,r){let i=e-n,o=t-r;return i*i+o*o}function Hwe(e,t,n,r,i,o,a,s){let c=e-a,l=t-s,u=n-a,f=r-s,d=i-a,p=o-s,h=c*c+l*l,m=u*u+f*f,g=d*d+p*p;return c*(f*g-m*p)-l*(u*g-m*d)+h*(u*p-f*d)<0}function Lwe(e,t,n,r,i,o){let a=n-e,s=r-t,c=i-e,l=o-t,u=a*a+s*s,f=c*c+l*l,d=.5/(a*l-s*c),p=(l*u-s*f)*d,h=(a*f-c*u)*d;return p*p+h*h}function Awe(e,t,n,r,i,o){let a=n-e,s=r-t,c=i-e,l=o-t,u=a*a+s*s,f=c*c+l*l,d=.5/(a*l-s*c),p=e+(l*u-s*f)*d,h=t+(a*f-c*u)*d;return{x:p,y:h}}function ef(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){let o=e[i],a=t[o],s=i-1;for(;s>=n&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=o}else{let i=n+r>>1,o=n+1,a=r;Ep(e,i,o),t[e[n]]>t[e[r]]&&Ep(e,n,r),t[e[o]]>t[e[r]]&&Ep(e,o,r),t[e[n]]>t[e[o]]&&Ep(e,n,o);let s=e[o],c=t[s];for(;;){do o++;while(t[e[o]]<c);do a--;while(t[e[a]]>c);if(a<o)break;Ep(e,o,a)}e[n+1]=e[a],e[a]=s,r-o+1>=a-n?(ef(e,t,o,r),ef(e,t,n,a-1)):(ef(e,t,n,a-1),ef(e,t,o,r))}}function Ep(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function Vwe(e){return e[0]}function Nwe(e){return e[1]}var $2=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;let i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}};var a0=class{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}};var SC=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this,o,a,s=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,v=r.length,y,C;m<v;m+=3,g+=2){let b=r[m]*2,M=r[m+1]*2,S=r[m+2]*2,w=t[b],E=t[b+1],D=t[M],z=t[M+1],H=t[S],j=t[S+1],L=D-w,_=z-E,A=H-w,T=j-E,G=(L*T-_*A)*2;if(Math.abs(G)<1e-9){if(o===void 0){o=a=0;for(let J of n)o+=t[J*2],a+=t[J*2+1];o/=n.length,a/=n.length}let X=1e9*Math.sign((o-w)*T-(a-E)*A);y=(w+H)/2-X*T,C=(E+j)/2+X*A}else{let X=1/G,J=L*L+_*_,Se=A*A+T*T;y=w+(T*J-_*Se)*X,C=E+(L*Se-A*J)*X}s[g]=y,s[g+1]=C}let c=n[n.length-1],l,u=c*4,f,d=t[2*c],p,h=t[2*c+1];i.fill(0);for(let m=0;m<n.length;++m)c=n[m],l=u,f=d,p=h,u=c*4,d=t[2*c],h=t[2*c+1],i[l+2]=i[u]=p-h,i[l+3]=i[u+1]=d-f}render(t){let n=t==null?t=new $2:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:a,vectors:s}=this;if(o.length<=1)return null;for(let u=0,f=r.length;u<f;++u){let d=r[u];if(d<u)continue;let p=Math.floor(u/3)*2,h=Math.floor(d/3)*2,m=a[p],g=a[p+1],v=a[h],y=a[h+1];this._renderSegment(m,g,v,y,t)}let c,l=o[o.length-1];for(let u=0;u<o.length;++u){c=l,l=o[u];let f=Math.floor(i[l]/3)*2,d=a[f],p=a[f+1],h=c*4,m=this._project(d,p,s[h+2],s[h+3]);m&&this._renderSegment(d,p,m[0],m[1],t)}return n&&n.value()}renderBounds(t){let n=t==null?t=new $2:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){let r=n==null?n=new $2:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let a=2;a<o;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),r&&r.value()}*cellPolygons(){let{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){let i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){let n=new a0;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let a,s=this._regioncode(t,n),c=this._regioncode(r,i);s===0&&c===0?(o.moveTo(t,n),o.lineTo(r,i)):(a=this._clipSegment(t,n,r,i,s,c))&&(o.moveTo(a[0],a[1]),o.lineTo(a[2],a[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){let n=this._clip(t);if(n)for(let r of this.delaunay.neighbors(t)){let i=this._clip(r);if(i){e:for(let o=0,a=n.length;o<a;o+=2)for(let s=0,c=i.length;s<c;s+=2)if(n[o]===i[s]&&n[o+1]===i[s+1]&&n[(o+2)%a]===i[(s+c-2)%c]&&n[(o+3)%a]===i[(s+c-1)%c]){yield r;break e}}}}_cell(t){let{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,a=r[t];if(a===-1)return null;let s=[],c=a;do{let l=Math.floor(c/3);if(s.push(n[l*2],n[l*2+1]),c=c%3===2?c-2:c+1,o[c]!==t)break;c=i[c]}while(c!==a&&c!==-1);return s}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let n=this._cell(t);if(n===null)return null;let{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){let r=n.length,i=null,o,a,s=n[r-2],c=n[r-1],l,u=this._regioncode(s,c),f,d=0;for(let p=0;p<r;p+=2)if(o=s,a=c,s=n[p],c=n[p+1],l=u,u=this._regioncode(s,c),l===0&&u===0)f=d,d=0,i?i.push(s,c):i=[s,c];else{let h,m,g,v,y;if(l===0){if((h=this._clipSegment(o,a,s,c,l,u))===null)continue;[m,g,v,y]=h}else{if((h=this._clipSegment(s,c,o,a,u,l))===null)continue;[v,y,m,g]=h,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(v,y),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(v,y):i=[v,y]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,a){let s=o<a;for(s&&([t,n,r,i,o,a]=[r,i,t,n,a,o]);;){if(o===0&&a===0)return s?[r,i,t,n]:[t,n,r,i];if(o&a)return null;let c,l,u=o||a;u&8?(c=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):u&4?(c=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):u&2?(l=n+(i-n)*(this.xmax-t)/(r-t),c=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),c=this.xmin),o?(t=c,n=l,o=this._regioncode(t,n)):(r=c,i=l,a=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,a){let s=Array.from(n),c;if((c=this._project(s[0],s[1],r,i))&&s.unshift(c[0],c[1]),(c=this._project(s[s.length-2],s[s.length-1],o,a))&&s.push(c[0],c[1]),s=this._clipFinite(t,s))for(let l=0,u=s.length,f,d=this._edgecode(s[u-2],s[u-1]);l<u;l+=2)f=d,d=this._edgecode(s[l],s[l+1]),f&&d&&(l=this._edge(t,f,d,s,l),u=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,n,r,i,o){for(;n!==r;){let a,s;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,s=this.ymin;break}(i[o]!==a||i[o+1]!==s)&&this.contains(t,a,s)&&(i.splice(o,0,a,s),o+=2)}return o}_project(t,n,r,i){let o=1/0,a,s,c;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<o&&(c=this.ymin,s=t+(o=a)*r)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<o&&(c=this.ymax,s=t+(o=a)*r)}if(r>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/r)<o&&(s=this.xmax,c=n+(o=a)*i)}else if(r<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/r)<o&&(s=this.xmin,c=n+(o=a)*i)}return[s,c]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){let r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};var _we=2*Math.PI,tf=Math.pow;function kwe(e){return e[0]}function Twe(e){return e[1]}function Iwe(e){let{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){let i=2*t[r],o=2*t[r+1],a=2*t[r+2];if((n[a]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function Fwe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}var zp=class e{static from(t,n=kwe,r=Twe,i){return new e("length"in t?Rwe(t,n,r,i):Float64Array.from(Owe(t,n,r,i)))}constructor(t){this._delaunator=new Dp(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Iwe(t)){this.collinear=Int32Array.from({length:n.length/2},(d,p)=>p).sort((d,p)=>n[2*d]-n[2*p]||n[2*d+1]-n[2*p+1]);let c=this.collinear[0],l=this.collinear[this.collinear.length-1],u=[n[2*c],n[2*c+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let d=0,p=n.length/2;d<p;++d){let h=Fwe(n[2*d],n[2*d+1],f);n[2*d]=h[0],n[2*d+1]=h[1]}this._delaunator=new Dp(n)}else delete this.collinear;let r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let c=0,l=r.length;c<l;++c){let u=o[c%3===2?c-2:c+1];(r[c]===-1||a[u]===-1)&&(a[u]=c)}for(let c=0,l=i.length;c<l;++c)s[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],a[i[0]]=1,i.length===2&&(a[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new SC(this,t)}*neighbors(t){let{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:a,collinear:s}=this;if(s){let f=s.indexOf(t);f>0&&(yield s[f-1]),f<s.length-1&&(yield s[f+1]);return}let c=n[t];if(c===-1)return;let l=c,u=-1;do{if(yield u=a[l],l=l%3===2?l-2:l+1,a[l]!==t)return;if(l=o[l],l===-1){let f=r[(i[t]+1)%r.length];f!==u&&(yield f);return}}while(l!==c)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;let i=r,o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){let{inedges:i,hull:o,_hullIndex:a,halfedges:s,triangles:c,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let u=t,f=tf(n-l[t*2],2)+tf(r-l[t*2+1],2),d=i[t],p=d;do{let h=c[p],m=tf(n-l[h*2],2)+tf(r-l[h*2+1],2);if(m<f&&(f=m,u=h),p=p%3===2?p-2:p+1,c[p]!==t)break;if(p=s[p],p===-1){if(p=o[(a[t]+1)%o.length],p!==h&&tf(n-l[p*2],2)+tf(r-l[p*2+1],2)<f)return p;break}}while(p!==d);return u}render(t){let n=t==null?t=new $2:void 0,{points:r,halfedges:i,triangles:o}=this;for(let a=0,s=i.length;a<s;++a){let c=i[a];if(c<a)continue;let l=o[a]*2,u=o[c]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;let r=t==null?t=new $2:void 0,{points:i}=this;for(let o=0,a=i.length;o<a;o+=2){let s=i[o],c=i[o+1];t.moveTo(s+n,c),t.arc(s,c,n,0,_we)}return r&&r.value()}renderHull(t){let n=t==null?t=new $2:void 0,{hull:r,points:i}=this,o=r[0]*2,a=r.length;t.moveTo(i[o],i[o+1]);for(let s=1;s<a;++s){let c=2*r[s];t.lineTo(i[c],i[c+1])}return t.closePath(),n&&n.value()}hullPolygon(){let t=new a0;return this.renderHull(t),t.value()}renderTriangle(t,n){let r=n==null?n=new $2:void 0,{points:i,triangles:o}=this,a=o[t*=3]*2,s=o[t+1]*2,c=o[t+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[s],i[s+1]),n.lineTo(i[c],i[c+1]),n.closePath(),r&&r.value()}*trianglePolygons(){let{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){let n=new a0;return this.renderTriangle(t,n),n.value()}};function Rwe(e,t,n,r){let i=e.length,o=new Float64Array(i*2);for(let a=0;a<i;++a){let s=e[a];o[a*2]=t.call(r,s,a,e),o[a*2+1]=n.call(r,s,a,e)}return o}function*Owe(e,t,n,r){let i=0;for(let o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function pT(e){$.call(this,null,e)}pT.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var Pwe=[-1e5,-1e5,1e5,1e5];ee(pT,$,{transform(e,t){let n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Pwe;let o=this.value=zp.from(r,e.x,e.y).voronoi(i);for(let a=0,s=r.length;a<s;++a){let c=o.cellPolygon(a);r[a][n]=c&&!Bwe(c)?$we(c):null}return t.reflow(e.modified()).modifies(n)}});function $we(e){let t=e[0][0],n=e[0][1],r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Bwe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}var vT={};xr(vT,{wordcloud:()=>gT});var mT=Math.PI/180,Hp=64,EC=2048;function Uwe(){var e=[256,256],t,n,r,i,o,a,s,c=Fee,l=[],u=Math.random,f={};f.layout=function(){for(var h=d($o()),m=Xwe((e[0]>>5)*e[1]),g=null,v=l.length,y=-1,C=[],b=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:o(S),rotate:a(S),size:~~(r(S)+1e-14),padding:s(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,w)=>w.size-S.size);++y<v;){var M=b[y];M.x=e[0]*(u()+.5)>>1,M.y=e[1]*(u()+.5)>>1,jwe(h,M,b,y),M.hasText&&p(m,M,g)&&(C.push(M),g?Gwe(g,M):g=[{x:M.x+M.x0,y:M.y+M.y0},{x:M.x+M.x1,y:M.y+M.y1}],M.x-=e[0]>>1,M.y-=e[1]>>1)}return C};function d(h){h.width=h.height=1;var m=Math.sqrt(h.getContext("2d").getImageData(0,0,1,1).data.length>>2);h.width=(Hp<<5)/m,h.height=EC/m;var g=h.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function p(h,m,g){for(var v=m.x,y=m.y,C=Math.sqrt(e[0]*e[0]+e[1]*e[1]),b=c(e),M=u()<.5?1:-1,S=-M,w,E,D;(w=b(S+=M))&&(E=~~w[0],D=~~w[1],!(Math.min(Math.abs(E),Math.abs(D))>=C));)if(m.x=v+E,m.y=y+D,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!qwe(m,h,e[0]))&&(!g||Wwe(m,g))){for(var z=m.sprite,H=m.width>>5,j=e[0]>>5,L=m.x-(H<<4),_=L&127,A=32-_,T=m.y1-m.y0,G=(m.y+m.y0)*j+(L>>5),X,J=0;J<T;J++){X=0;for(var Se=0;Se<=H;Se++)h[G+Se]|=X<<A|(Se<H?(X=z[J*H+Se])>>>_:0);G+=j}return m.sprite=null,!0}return!1}return f.words=function(h){return arguments.length?(l=h,f):l},f.size=function(h){return arguments.length?(e=[+h[0],+h[1]],f):e},f.font=function(h){return arguments.length?(n=s0(h),f):n},f.fontStyle=function(h){return arguments.length?(i=s0(h),f):i},f.fontWeight=function(h){return arguments.length?(o=s0(h),f):o},f.rotate=function(h){return arguments.length?(a=s0(h),f):a},f.text=function(h){return arguments.length?(t=s0(h),f):t},f.spiral=function(h){return arguments.length?(c=Qwe[h]||h,f):c},f.fontSize=function(h){return arguments.length?(r=s0(h),f):r},f.padding=function(h){return arguments.length?(s=s0(h),f):s},f.random=function(h){return arguments.length?(u=h,f):u},f}function jwe(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(Hp<<5)/o,EC/o);var a=0,s=0,c=0,l=n.length,u,f,d,p,h;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,u=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*mT),g=Math.cos(t.rotate*mT),v=u*g,y=u*m,C=d*g,b=d*m;u=Math.max(Math.abs(v+b),Math.abs(v-b))+31>>5<<5,d=~~Math.max(Math.abs(y+C),Math.abs(y-C))}else u=u+31>>5<<5;if(d>c&&(c=d),a+u>=Hp<<5&&(a=0,s+=c,c=0),s+d>=EC)break;i.translate((a+(u>>1))/o,(s+(d>>1))/o),t.rotate&&i.rotate(t.rotate*mT),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=u,t.height=d,t.xoff=a,t.yoff=s,t.x1=u>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=u}for(var M=i.getImageData(0,0,(Hp<<5)/o,EC/o).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(u=t.width,f=u>>5,d=t.y1-t.y0,p=0;p<d*f;p++)S[p]=0;if(a=t.xoff,a==null)return;s=t.yoff;var w=0,E=-1;for(h=0;h<d;h++){for(p=0;p<u;p++){var D=f*h+(p>>5),z=M[(s+h)*(Hp<<5)+(a+p)<<2]?1<<31-p%32:0;S[D]|=z,w|=z}w?E=h:(t.y0++,d--,h--,s++)}t.y1=t.y0+E,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function qwe(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),a=o&127,s=32-a,c=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),u,f=0;f<c;f++){u=0;for(var d=0;d<=i;d++)if((u<<s|(d<i?(u=r[f*i+d])>>>a:0))&t[l+d])return!0;l+=n}return!1}function Gwe(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Wwe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Fee(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Ywe(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var a=o<0?-1:1;switch(Math.sqrt(1+4*a*o)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Xwe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function s0(e){return typeof e=="function"?e:function(){return e}}var Qwe={archimedean:Fee,rectangular:Ywe},Ree=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Kwe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function gT(e){$.call(this,Uwe(),e)}gT.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Ree}]};ee(gT,$,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&B("Wordcloud size dimensions must be non-zero.");function n(h){let m=e[h];return Te(m)&&t.modified(m.fields)}let r=e.modified();if(!(r||t.changed(t.ADD_REM)||Kwe.some(n)))return;let i=t.materialize(t.SOURCE).source,o=this.value,a=e.as||Ree,s=e.fontSize||14,c;if(Te(s)?c=e.fontSizeRange:s=gn(s),c){let h=s,m=ft("sqrt")().domain(ji(i,h)).range(c);s=g=>m(h(g))}i.forEach(h=>{h[a[0]]=NaN,h[a[1]]=NaN,h[a[3]]=0});let l=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(Qi).layout(),u=o.size(),f=u[0]>>1,d=u[1]>>1,p=l.length;for(let h=0,m,g;h<p;++h)m=l[h],g=m.datum,g[a[0]]=m.x+f,g[a[1]]=m.y+d,g[a[2]]=m.font,g[a[3]]=m.size,g[a[4]]=m.style,g[a[5]]=m.weight,g[a[6]]=m.rotate;return t.reflow(r).modifies(a)}});var CT={};xr(CT,{crossfilter:()=>yT,resolvefilter:()=>xT});var Zwe=e=>new Uint8Array(e),Jwe=e=>new Uint16Array(e),Lp=e=>new Uint32Array(e);function eSe(){let e=8,t=[],n=Lp(0),r=DC(0,e),i=DC(0,e);return{data:()=>t,seen:()=>n=tSe(n,t.length),add(o){for(let a=0,s=t.length,c=o.length,l;a<c;++a)l=o[a],l._index=s++,t.push(l)},remove(o,a){let s=t.length,c=Array(s-o),l=t,u,f,d;for(f=0;!a[f]&&f<s;++f)c[f]=t[f],l[f]=f;for(d=f;f<s;++f)u=t[f],a[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],c[d]=u,u._index=d++),r[f]=0;return t=c,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,a){r[o]|=a},clear(o,a){r[o]&=~a},resize(o,a){let s=r.length;(o>s||a>e)&&(e=Math.max(a,e),r=DC(o,e,r),i=DC(o,e))}}}function tSe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function DC(e,t,n){let r=(t<257?Zwe:t<65537?Jwe:Lp)(e);return n&&r.set(n),r}function Oee(e,t,n){let r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){let a=this,s=a.bisect(a.range,i.value),c=i.index,l=s[0],u=s[1],f=c.length,d;for(d=0;d<l;++d)o[c[d]]|=r;for(d=u;d<f;++d)o[c[d]]|=r;return a}}}function Pee(){let e=Lp(0),t=[],n=0;function r(s,c,l){if(!c.length)return[];let u=n,f=c.length,d=Lp(f),p=Array(f),h,m,g;for(g=0;g<f;++g)p[g]=s(c[g]),d[g]=g;if(p=nSe(p,d),u)h=t,m=e,t=Array(u+f),e=Lp(u+f),rSe(l,h,m,u,p,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=p,e=d}return n=u+f,{index:d,value:p}}function i(s,c){let l=n,u,f,d;for(f=0;!c[e[f]]&&f<l;++f);for(d=f;f<l;++f)c[u=e[f]]||(e[d]=u,t[d]=t[f],++d);n=l-s}function o(s){for(let c=0,l=n;c<l;++c)e[c]=s[e[c]]}function a(s,c){let l;return c?l=c.length:(c=t,l=n),[WH(c,s[0],0,l),dl(c,s[1],0,l)]}return{insert:r,remove:i,bisect:a,reindex:o,index:()=>e,size:()=>n}}function nSe(e,t){return e.sort.call(t,(n,r)=>{let i=e[n],o=e[r];return i<o?-1:i>o?1:0}),uv(e,t)}function rSe(e,t,n,r,i,o,a,s,c){let l=0,u=0,f;for(f=0;l<r&&u<a;++f)t[l]<i[u]?(s[f]=t[l],c[f]=n[l++]):(s[f]=i[u],c[f]=o[u++]+e);for(;l<r;++l,++f)s[f]=t[l],c[f]=n[l];for(;u<a;++u,++f)s[f]=i[u],c[f]=o[u]+e}function yT(e){$.call(this,eSe(),e),this._indices=null,this._dims=null}yT.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ee(yT,$,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){let n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length,s=0,c,l;for(;s<a;++s)c=n[s].fname,l=i[c]||(i[c]=Pee()),o.push(Oee(l,s,r[s]));return this.eval(e,t)},reinit(e,t){let n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,c=s.curr(),l=s.prev(),u=s.all(),f=n.rem=n.add,d=n.mod,p=i.length,h={},m,g,v,y,C,b,M,S,w;if(l.set(c),t.rem.length&&(C=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(b={},y=t.mod,M=0,S=y.length;M<S;++M)b[y[M]._index]=1;for(M=0;M<p;++M)w=r[M],(!a[M]||e.modified("fields",M)||t.modified(w.fields))&&(v=w.fname,(m=h[v])||(o[v]=g=Pee(),h[v]=m=g.insert(w,t.source,0)),a[M]=Oee(g,M,i[M]).onAdd(m,c));for(M=0,S=s.data().length;M<S;++M)C[M]||(l[M]!==c[M]?f.push(M):b[M]&&c[M]!==u&&d.push(M));return s.mask=(1<<p)-1,n},eval(e,t){let n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){let r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,c={},l=n.add,u=i.size()+r.length,f=o.length,d=i.size(),p,h,m;i.resize(u,f),i.add(r);let g=i.curr(),v=i.prev(),y=i.all();for(p=0;p<f;++p)h=s[p].fname,m=c[h]||(c[h]=a[h].insert(s[p],r,d)),o[p].onAdd(m,g);for(;d<u;++d)v[d]=y,g[d]!==y&&l.push(d)},modify(e,t){let n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod,s,c,l;for(s=0,c=a.length;s<c;++s)l=a[s]._index,i[l]!==o&&n.push(l)},remove(e,t,n){let r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),c={},l=n.rem,u=t.rem,f,d,p,h;for(f=0,d=u.length;f<d;++f)p=u[f]._index,c[p]=1,a[p]=h=o[p],o[p]=s,h!==s&&l.push(p);for(p in r)r[p].remove(d,c);return this.reindex(t,d,c),c},reindex(e,t,n){let r=this._indices,i=this.value;e.runAfter(()=>{let o=i.remove(t,n);for(let a in r)r[a].reindex(o)})},update(e,t,n){let r=this._dims,i=e.query,o=t.stamp,a=r.length,s=0,c,l;for(n.filters=0,l=0;l<a;++l)e.modified("query",l)&&(c=l,++s);if(s===1)s=r[c].one,this.incrementOne(r[c],i[c],n.add,n.rem);else for(l=0,s=0;l<a;++l)e.modified("query",l)&&(s|=r[l].one,this.incrementAll(r[l],i[l],o,n.add),n.rem=n.add);return s},incrementAll(e,t,n,r){let i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),c=e.index(),l=e.bisect(e.range),u=e.bisect(t),f=u[0],d=u[1],p=l[0],h=l[1],m=e.one,g,v,y;if(f<p)for(g=f,v=Math.min(p,d);g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;else if(f>p)for(g=p,v=Math.min(f,h);g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;if(d>h)for(g=Math.max(f,h),v=d;g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;else if(d<h)for(g=Math.max(p,d),v=h;g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;e.range=t.slice()},incrementOne(e,t,n,r){let i=this.value,o=i.curr(),a=e.index(),s=e.bisect(e.range),c=e.bisect(t),l=c[0],u=c[1],f=s[0],d=s[1],p=e.one,h,m,g;if(l<f)for(h=l,m=Math.min(f,u);h<m;++h)g=a[h],o[g]^=p,n.push(g);else if(l>f)for(h=f,m=Math.min(l,d);h<m;++h)g=a[h],o[g]^=p,r.push(g);if(u>d)for(h=Math.max(l,d),m=u;h<m;++h)g=a[h],o[g]^=p,n.push(g);else if(u<d)for(h=Math.max(f,u),m=d;h<m;++h)g=a[h],o[g]^=p,r.push(g);e.range=t.slice()}});function xT(e){$.call(this,null,e)}xT.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ee(xT,$,{transform(e,t){let n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;let o=t.fork(t.ALL),a=r.data(),s=r.curr(),c=r.prev(),l=u=>s[u]&n?null:a[u];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,u=>{let f=s[u]&n;return!f&&f^c[u]&n?a[u]:null}),o.filter(o.REM,u=>{let f=s[u]&n;return f&&!(f^(f^c[u]&n))?a[u]:null})):(o.filter(o.ADD,l),o.filter(o.REM,u=>(s[u]&n)===i?a[u]:null)),o.filter(o.SOURCE,u=>l(u._index))}});var iSe="RawCode",Sc="Literal",oSe="Property",aSe="Identifier",sSe="ArrayExpression",cSe="BinaryExpression",DT="CallExpression",lSe="ConditionalExpression",uSe="LogicalExpression",fSe="MemberExpression",dSe="ObjectExpression",pSe="UnaryExpression";function B2(e){this.type=e}B2.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=hSe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function hSe(e){switch(e.type){case sSe:return e.elements;case cSe:case uSe:return[e.left,e.right];case DT:return[e.callee].concat(e.arguments);case lSe:return[e.test,e.consequent,e.alternate];case fSe:return[e.object,e.property];case dSe:return e.properties;case oSe:return[e.key,e.value];case pSe:return[e.argument];case aSe:case Sc:case iSe:default:return[]}}var ns,we,q,Di,It,LC=1,kp=2,c0=3,u4=4,AC=5,u0=6,V1=7,Tp=8,mSe=9;ns={};ns[LC]="Boolean";ns[kp]="<end>";ns[c0]="Identifier";ns[u4]="Keyword";ns[AC]="Null";ns[u0]="Numeric";ns[V1]="Punctuator";ns[Tp]="String";ns[mSe]="RegularExpression";var gSe="ArrayExpression",vSe="BinaryExpression",ySe="CallExpression",xSe="ConditionalExpression",Yee="Identifier",CSe="Literal",bSe="LogicalExpression",MSe="MemberExpression",wSe="ObjectExpression",SSe="Property",ESe="UnaryExpression",Hr="Unexpected token %0",DSe="Unexpected number",zSe="Unexpected string",HSe="Unexpected identifier",LSe="Unexpected reserved word",ASe="Unexpected end of input",ST="Invalid regular expression",bT="Invalid regular expression: missing /",Xee="Octal literals are not allowed in strict mode.",VSe="Duplicate data property in object literal not allowed in strict mode",ei="ILLEGAL",Np="Disabled.",NSe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),_Se=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function VC(e,t){if(!e)throw new Error("ASSERT: "+t)}function wc(e){return e>=48&&e<=57}function zT(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Vp(e){return"01234567".indexOf(e)>=0}function kSe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function _p(e){return e===10||e===13||e===8232||e===8233}function Ip(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&NSe.test(String.fromCharCode(e))}function HC(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&_Se.test(String.fromCharCode(e))}var TSe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Qee(){for(;q<Di;){let e=we.charCodeAt(q);if(kSe(e)||_p(e))++q;else break}}function ET(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)q<Di&&zT(we[q])?(r=we[q++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Dt({},Hr,ei);return String.fromCharCode(i)}function ISe(){var e,t,n,r;for(e=we[q],t=0,e==="}"&&Dt({},Hr,ei);q<Di&&(e=we[q++],!!zT(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Dt({},Hr,ei),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function Kee(){var e,t;for(e=we.charCodeAt(q++),t=String.fromCharCode(e),e===92&&(we.charCodeAt(q)!==117&&Dt({},Hr,ei),++q,e=ET("u"),(!e||e==="\\"||!Ip(e.charCodeAt(0)))&&Dt({},Hr,ei),t=e);q<Di&&(e=we.charCodeAt(q),!!HC(e));)++q,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),we.charCodeAt(q)!==117&&Dt({},Hr,ei),++q,e=ET("u"),(!e||e==="\\"||!HC(e.charCodeAt(0)))&&Dt({},Hr,ei),t+=e);return t}function FSe(){var e,t;for(e=q++;q<Di;){if(t=we.charCodeAt(q),t===92)return q=e,Kee();if(HC(t))++q;else break}return we.slice(e,q)}function RSe(){var e,t,n;return e=q,t=we.charCodeAt(q)===92?Kee():FSe(),t.length===1?n=c0:TSe.hasOwnProperty(t)?n=u4:t==="null"?n=AC:t==="true"||t==="false"?n=LC:n=c0,{type:n,value:t,start:e,end:q}}function MT(){var e=q,t=we.charCodeAt(q),n,r=we[q],i,o,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++q,{type:V1,value:String.fromCharCode(t),start:e,end:q};default:if(n=we.charCodeAt(q+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return q+=2,{type:V1,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:q};case 33:case 61:return q+=2,we.charCodeAt(q)===61&&++q,{type:V1,value:we.slice(e,q),start:e,end:q}}}if(a=we.substr(q,4),a===">>>=")return q+=4,{type:V1,value:a,start:e,end:q};if(o=a.substr(0,3),o===">>>"||o==="<<="||o===">>=")return q+=3,{type:V1,value:o,start:e,end:q};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return q+=2,{type:V1,value:i,start:e,end:q};if(i==="//"&&Dt({},Hr,ei),"<>=!+-*%&|^/".indexOf(r)>=0)return++q,{type:V1,value:r,start:e,end:q};Dt({},Hr,ei)}function OSe(e){let t="";for(;q<Di&&zT(we[q]);)t+=we[q++];return t.length===0&&Dt({},Hr,ei),Ip(we.charCodeAt(q))&&Dt({},Hr,ei),{type:u0,value:parseInt("0x"+t,16),start:e,end:q}}function PSe(e){let t="0"+we[q++];for(;q<Di&&Vp(we[q]);)t+=we[q++];return(Ip(we.charCodeAt(q))||wc(we.charCodeAt(q)))&&Dt({},Hr,ei),{type:u0,value:parseInt(t,8),octal:!0,start:e,end:q}}function $ee(){var e,t,n;if(n=we[q],VC(wc(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=q,e="",n!=="."){if(e=we[q++],n=we[q],e==="0"){if(n==="x"||n==="X")return++q,OSe(t);if(Vp(n))return PSe(t);n&&wc(n.charCodeAt(0))&&Dt({},Hr,ei)}for(;wc(we.charCodeAt(q));)e+=we[q++];n=we[q]}if(n==="."){for(e+=we[q++];wc(we.charCodeAt(q));)e+=we[q++];n=we[q]}if(n==="e"||n==="E")if(e+=we[q++],n=we[q],(n==="+"||n==="-")&&(e+=we[q++]),wc(we.charCodeAt(q)))for(;wc(we.charCodeAt(q));)e+=we[q++];else Dt({},Hr,ei);return Ip(we.charCodeAt(q))&&Dt({},Hr,ei),{type:u0,value:parseFloat(e),start:t,end:q}}function $Se(){var e="",t,n,r,i,o=!1;for(t=we[q],VC(t==="'"||t==='"',"String literal must starts with a quote"),n=q,++q;q<Di;)if(r=we[q++],r===t){t="";break}else if(r==="\\")if(r=we[q++],!r||!_p(r.charCodeAt(0)))switch(r){case"u":case"x":we[q]==="{"?(++q,e+=ISe()):e+=ET(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Vp(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),q<Di&&Vp(we[q])&&(o=!0,i=i*8+"01234567".indexOf(we[q++]),"0123".indexOf(r)>=0&&q<Di&&Vp(we[q])&&(i=i*8+"01234567".indexOf(we[q++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&we[q]===`
`&&++q;else{if(_p(r.charCodeAt(0)))break;e+=r}return t!==""&&Dt({},Hr,ei),{type:Tp,value:e,octal:o,start:n,end:q}}function BSe(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Dt({},ST)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Dt({},ST)}try{return new RegExp(e,t)}catch{return null}}function USe(){var e,t,n,r,i;for(e=we[q],VC(e==="/","Regular expression literal must start with a slash"),t=we[q++],n=!1,r=!1;q<Di;)if(e=we[q++],t+=e,e==="\\")e=we[q++],_p(e.charCodeAt(0))&&Dt({},bT),t+=e;else if(_p(e.charCodeAt(0)))Dt({},bT);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Dt({},bT),i=t.substr(1,t.length-2),{value:i,literal:t}}function jSe(){var e,t,n;for(t="",n="";q<Di&&(e=we[q],!!HC(e.charCodeAt(0)));)++q,e==="\\"&&q<Di?Dt({},Hr,ei):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Dt({},ST,n),{value:n,literal:t}}function qSe(){var e,t,n,r;return It=null,Qee(),e=q,t=USe(),n=jSe(),r=BSe(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:q}}function GSe(e){return e.type===c0||e.type===u4||e.type===LC||e.type===AC}function Zee(){if(Qee(),q>=Di)return{type:kp,start:q,end:q};let e=we.charCodeAt(q);return Ip(e)?RSe():e===40||e===41||e===59?MT():e===39||e===34?$Se():e===46?wc(we.charCodeAt(q+1))?$ee():MT():wc(e)?$ee():MT()}function N1(){let e=It;return q=e.end,It=Zee(),q=e.end,e}function Jee(){let e=q;It=Zee(),q=e}function WSe(e){let t=new B2(gSe);return t.elements=e,t}function Bee(e,t,n){let r=new B2(e==="||"||e==="&&"?bSe:vSe);return r.operator=e,r.left=t,r.right=n,r}function YSe(e,t){let n=new B2(ySe);return n.callee=e,n.arguments=t,n}function XSe(e,t,n){let r=new B2(xSe);return r.test=e,r.consequent=t,r.alternate=n,r}function HT(e){let t=new B2(Yee);return t.name=e,t}function Ap(e){let t=new B2(CSe);return t.value=e.value,t.raw=we.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Uee(e,t,n){let r=new B2(MSe);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function QSe(e){let t=new B2(wSe);return t.properties=e,t}function jee(e,t,n){let r=new B2(SSe);return r.key=t,r.value=n,r.kind=e,r}function KSe(e,t){let n=new B2(ESe);return n.operator=e,n.argument=t,n.prefix=!0,n}function Dt(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,a)=>(VC(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=q,n.description=i,n}function NC(e){e.type===kp&&Dt(e,ASe),e.type===u0&&Dt(e,DSe),e.type===Tp&&Dt(e,zSe),e.type===c0&&Dt(e,HSe),e.type===u4&&Dt(e,LSe),Dt(e,Hr,e.value)}function zi(e){let t=N1();(t.type!==V1||t.value!==e)&&NC(t)}function pn(e){return It.type===V1&&It.value===e}function wT(e){return It.type===u4&&It.value===e}function ZSe(){let e=[];for(q=It.start,zi("[");!pn("]");)pn(",")?(N1(),e.push(null)):(e.push(l0()),pn("]")||zi(","));return N1(),WSe(e)}function qee(){q=It.start;let e=N1();return e.type===Tp||e.type===u0?(e.octal&&Dt(e,Xee),Ap(e)):HT(e.value)}function JSe(){var e,t,n,r;if(q=It.start,e=It,e.type===c0)return n=qee(),zi(":"),r=l0(),jee("init",n,r);if(e.type===kp||e.type===V1)NC(e);else return t=qee(),zi(":"),r=l0(),jee("init",t,r)}function eEe(){var e=[],t,n,r,i={},o=String;for(q=It.start,zi("{");!pn("}");)t=JSe(),t.key.type===Yee?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Dt({},VSe):i[r]=!0,e.push(t),pn("}")||zi(",");return zi("}"),QSe(e)}function tEe(){zi("(");let e=LT();return zi(")"),e}var nEe={if:1};function rEe(){var e,t,n;if(pn("("))return tEe();if(pn("["))return ZSe();if(pn("{"))return eEe();if(e=It.type,q=It.start,e===c0||nEe[It.value])n=HT(N1().value);else if(e===Tp||e===u0)It.octal&&Dt(It,Xee),n=Ap(N1());else{if(e===u4)throw new Error(Np);e===LC?(t=N1(),t.value=t.value==="true",n=Ap(t)):e===AC?(t=N1(),t.value=null,n=Ap(t)):pn("/")||pn("/=")?(n=Ap(qSe()),Jee()):NC(N1())}return n}function iEe(){let e=[];if(zi("("),!pn(")"))for(;q<Di&&(e.push(l0()),!pn(")"));)zi(",");return zi(")"),e}function oEe(){q=It.start;let e=N1();return GSe(e)||NC(e),HT(e.value)}function aEe(){return zi("."),oEe()}function sEe(){zi("[");let e=LT();return zi("]"),e}function cEe(){var e,t,n;for(e=rEe();;)if(pn("."))n=aEe(),e=Uee(".",e,n);else if(pn("("))t=iEe(),e=YSe(e,t);else if(pn("["))n=sEe(),e=Uee("[",e,n);else break;return e}function Gee(){let e=cEe();if(It.type===V1&&(pn("++")||pn("--")))throw new Error(Np);return e}function zC(){var e,t;if(It.type!==V1&&It.type!==u4)t=Gee();else{if(pn("++")||pn("--"))throw new Error(Np);if(pn("+")||pn("-")||pn("~")||pn("!"))e=N1(),t=zC(),t=KSe(e.value,t);else{if(wT("delete")||wT("void")||wT("typeof"))throw new Error(Np);t=Gee()}}return t}function Wee(e){let t=0;if(e.type!==V1&&e.type!==u4)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function lEe(){var e,t,n,r,i,o,a,s,c,l;if(e=It,c=zC(),r=It,i=Wee(r),i===0)return c;for(r.prec=i,N1(),t=[e,It],a=zC(),o=[c,r,a];(i=Wee(It))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,c=o.pop(),t.pop(),n=Bee(s,c,a),o.push(n);r=N1(),r.prec=i,o.push(r),t.push(It),n=zC(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=Bee(o[l-1].value,o[l-2],n),l-=2;return n}function l0(){var e,t,n;return e=lEe(),pn("?")&&(N1(),t=l0(),zi(":"),n=l0(),e=XSe(e,t,n)),e}function LT(){let e=l0();if(pn(","))throw new Error(Np);return e}function nf(e){we=e,q=0,Di=we.length,It=null,Jee();let t=LT();if(It.type!==kp)throw new Error("Unexpect token after expression.");return t}var AT={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function VT(e){function t(a,s,c,l){let u=e(s[0]);return c&&(u=c+"("+u+")",c.lastIndexOf("new ",0)===0&&(u="("+u+")")),u+"."+a+(l<0?"":l===0?"()":"("+s.slice(1).map(e).join(",")+")")}function n(a,s,c){return l=>t(a,l,s,c)}let r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&B("Missing arguments to clamp function."),a.length>3&&B("Too many arguments to clamp function.");let s=a.map(e);return"Math.max("+s[1]+", Math.min("+s[2]+","+s[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(a){a.length<3&&B("Missing arguments to if function."),a.length>3&&B("Too many arguments to if function.");let s=a.map(e);return"("+s[0]+"?"+s[1]+":"+s[2]+")"}}}function uEe(e){let t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function _C(e){e=e||{};let t=e.allowed?dr(e.allowed):{},n=e.forbidden?dr(e.forbidden):{},r=e.constants||AT,i=(e.functions||VT)(f),o=e.globalvar,a=e.fieldvar,s=Te(o)?o:h=>`${o}["${h}"]`,c={},l={},u=0;function f(h){if(Q(h))return h;let m=d[h.type];return m==null&&B("Unsupported type: "+h.type),m(h)}let d={Literal:h=>h.raw,Identifier:h=>{let m=h.name;return u>0?m:de(n,m)?B("Illegal identifier: "+m):de(r,m)?r[m]:de(t,m)?m:(c[m]=1,s(m))},MemberExpression:h=>{let m=!h.computed,g=f(h.object);m&&(u+=1);let v=f(h.property);return g===a&&(l[uEe(v)]=1),m&&(u-=1),g+(m?"."+v:"["+v+"]")},CallExpression:h=>{h.callee.type!=="Identifier"&&B("Illegal callee type: "+h.callee.type);let m=h.callee.name,g=h.arguments,v=de(i,m)&&i[m];return v||B("Unrecognized function: "+m),Te(v)?v(g):v+"("+g.map(f).join(",")+")"},ArrayExpression:h=>"["+h.elements.map(f).join(",")+"]",BinaryExpression:h=>"("+f(h.left)+" "+h.operator+" "+f(h.right)+")",UnaryExpression:h=>"("+h.operator+f(h.argument)+")",ConditionalExpression:h=>"("+f(h.test)+"?"+f(h.consequent)+":"+f(h.alternate)+")",LogicalExpression:h=>"("+f(h.left)+h.operator+f(h.right)+")",ObjectExpression:h=>"{"+h.properties.map(f).join(",")+"}",Property:h=>{u+=1;let m=f(h.key);return u-=1,m+":"+f(h.value)}};function p(h){let m={code:f(h),globals:Object.keys(c),fields:Object.keys(l)};return c={},l={},m}return p.functions=i,p.constants=r,p}var ete=Symbol("vega_selection_getter");function ite(e){return(!e.getter||!e.getter[ete])&&(e.getter=wr(e.field),e.getter[ete]=!0),e.getter}var _T="intersect",tte="union",fEe="vlMulti",dEe="vlPoint",nte="or",pEe="and",rs="_vgsid_",Fp=wr(rs),hEe="E",mEe="R",gEe="R-E",vEe="R-LE",yEe="R-RE",kC="index:unit";function rte(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,a,s;o<i;++o)if(s=n[o],a=ite(s)(e),S2(a)&&(a=Bn(a)),S2(r[o])&&(r[o]=Bn(r[o])),F(r[o])&&S2(r[o][0])&&(r[o]=r[o].map(Bn)),s.type===hEe){if(F(r[o])?r[o].indexOf(a)<0:a!==r[o])return!1}else if(s.type===mEe){if(!b3(a,r[o]))return!1}else if(s.type===yEe){if(!b3(a,r[o],!0,!1))return!1}else if(s.type===gEe){if(!b3(a,r[o],!1,!1))return!1}else if(s.type===vEe&&!b3(a,r[o],!1,!0))return!1;return!0}function ote(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[kC]&&r[kC].value:void 0,a=n===_T,s=i.length,c=0,l,u,f,d,p;c<s;++c)if(l=i[c],o&&a){if(u=u||{},f=u[d=l.unit]||0,f===-1)continue;if(p=rte(t,l),u[d]=p?-1:++f,p&&o.size===1)return!0;if(!p&&f===o.get(d).count)return!1}else if(p=rte(t,l),a^p)return p;return s&&a}var ate=to(Fp),xEe=ate.left,CEe=ate.right;function ste(e,t,n){let r=this.context.data[e],i=r?r.values.value:[],o=r?r[kC]&&r[kC].value:void 0,a=n===_T,s=Fp(t),c=xEe(i,s);if(c===i.length||Fp(i[c])!==s)return!1;if(o&&a){if(o.size===1)return!0;if(CEe(i,s)-c<o.size)return!1}return!0}function cte(e,t){return e.map(n=>_e(t.fields?{values:t.fields.map(r=>ite(r)(n.datum))}:{[rs]:Fp(n.datum)},t))}function lte(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],a={},s={},c={},l,u,f,d,p,h,m,g,v,y,C=o.length,b=0,M,S;b<C;++b)if(l=o[b],d=l.unit,u=l.fields,f=l.values,u&&f){for(M=0,S=u.length;M<S;++M)p=u[M],m=a[p.field]||(a[p.field]={}),g=m[d]||(m[d]=[]),c[p.field]=v=p.type.charAt(0),y=NT[`${v}_union`],m[d]=y(g,te(f[M]));n&&(g=s[d]||(s[d]=[]),g.push(te(f).reduce((w,E,D)=>(w[u[D].field]=E,w),{})))}else p=rs,h=Fp(l),m=a[p]||(a[p]={}),g=m[d]||(m[d]=[]),g.push(h),n&&(g=s[d]||(s[d]=[]),g.push({[rs]:h}));if(t=t||tte,a[rs]?a[rs]=NT[`${rs}_${t}`](...Object.values(a[rs])):Object.keys(a).forEach(w=>{a[w]=Object.keys(a[w]).map(E=>a[w][E]).reduce((E,D)=>E===void 0?D:NT[`${c[w]}_${t}`](E,D))}),o=Object.keys(s),n&&o.length){let w=r?dEe:fEe;a[w]=t===tte?{[nte]:o.reduce((E,D)=>(E.push(...s[D]),E),[])}:{[pEe]:o.map(E=>({[nte]:s[E]}))}}return a}var NT={[`${rs}_union`]:mv,[`${rs}_intersect`]:hv,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Bn(t[0]),r=Bn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Bn(t[0]),r=Bn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}},bEe=":",MEe="@";function TC(e,t,n,r){t[0].type!==Sc&&B("First argument to selection functions must be a string literal.");let i=t[0].value,o=t.length>=2&&je(t).value,a="unit",s=MEe+a,c=bEe+i;o===_T&&!de(r,s)&&(r[s]=n.getData(i).indataRef(n,a)),de(r,c)||(r[c]=n.getData(i).tuplesRef())}function pte(e){let t=this.context.data[e];return t?t.values.value:[]}function wEe(e,t,n){let r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function SEe(e,t){let n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(fr).insert(t)),1}function EEe(e,t,n){if(e){let r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}var Rp=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},DEe=Rp("format"),hte=Rp("timeFormat"),zEe=Rp("utcFormat"),HEe=Rp("timeParse"),LEe=Rp("utcParse"),IC=new Date(2e3,0,1);function FC(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(IC.setYear(2e3),IC.setMonth(e),IC.setDate(t),hte.call(this,IC,n))}function AEe(e){return FC.call(this,e,1,"%B")}function VEe(e){return FC.call(this,e,1,"%b")}function NEe(e){return FC.call(this,0,2+e,"%A")}function _Ee(e){return FC.call(this,0,2+e,"%a")}var kEe=":",TEe="@",TT="%",mte="$";function RT(e,t,n,r){t[0].type!==Sc&&B("First argument to data functions must be a string literal.");let i=t[0].value,o=kEe+i;if(!de(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function IEe(e,t,n,r){t[0].type!==Sc&&B("First argument to indata must be a string literal."),t[1].type!==Sc&&B("Second argument to indata must be a string literal.");let i=t[0].value,o=t[1].value,a=TEe+o;de(a,r)||(r[a]=n.getData(i).indataRef(n,o))}function a1(e,t,n,r){if(t[0].type===Sc)ute(n,r,t[0].value);else for(e in n.scales)ute(n,r,e)}function ute(e,t,n){let r=TT+n;if(!de(t,r))try{t[r]=e.scaleRef(n)}catch{}}function is(e,t){if(Te(e))return e;if(Q(e)){let n=t.scales[e];return n&&XX(n.value)?n.value:void 0}}function FEe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=a1,n._range=a1,n._scale=a1;let r=i=>"_["+(i.type===Sc?Z(TT+i.value):Z(TT)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function OT(e,t){return function(n,r,i){if(n){let o=is(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}var REe=OT("area",GN),OEe=OT("bounds",YN),PEe=OT("centroid",JN);function $Ee(e,t){let n=is(e,(t||this).context);return n&&n.scale()}function BEe(e){let t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function PT(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function UEe(){return PT(this.context.dataflow,"warn",arguments)}function jEe(){return PT(this.context.dataflow,"info",arguments)}function qEe(){return PT(this.context.dataflow,"debug",arguments)}function kT(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function IT(e){let t=Bo(e),n=kT(t.r),r=kT(t.g),i=kT(t.b);return .2126*n+.7152*r+.0722*i}function GEe(e,t){let n=IT(e),r=IT(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function WEe(){let e=[].slice.call(arguments);return e.unshift({}),_e(...e)}function gte(e,t){return e===t||e!==e&&t!==t?!0:F(e)?F(t)&&e.length===t.length?YEe(e,t):!1:ne(e)&&ne(t)?vte(e,t):!1}function YEe(e,t){for(let n=0,r=e.length;n<r;++n)if(!gte(e[n],t[n]))return!1;return!0}function vte(e,t){for(let n in e)if(!gte(e[n],t[n]))return!1;return!0}function fte(e){return t=>vte(e,t)}function XEe(e,t,n,r,i,o){let a=this.context.dataflow,s=this.context.data[e],c=s.input,l=a.stamp(),u=s.changes,f,d;if(a._trigger===!1||!(c.value.length||t||r))return 0;if((!u||u.stamp<l)&&(s.changes=u=a.changeset(),u.stamp=l,a.runAfter(()=>{s.modified=!0,a.pulse(c,u).run()},!0,1)),n&&(f=n===!0?fr:F(n)||wl(n)?n:fte(n),u.remove(f)),t&&u.insert(t),r&&(f=fte(r),c.value.some(f)?u.remove(f):u.insert(r)),i)for(d in o)u.modify(i,d,o[d]);return 1}function QEe(e){let t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function KEe(e){let t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}var dte={};function ZEe(e,t){let n=dte[t]||(dte[t]=wr(t));return F(e)?e.map(n):n(e)}function $T(e){return F(e)||ArrayBuffer.isView(e)?e:null}function BT(e){return $T(e)||(Q(e)?e:null)}function JEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $T(e).join(...n)}function eDe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return BT(e).indexOf(...n)}function tDe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return BT(e).lastIndexOf(...n)}function nDe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return BT(e).slice(...n)}function rDe(e,t,n){return Te(n)&&B("Function argument passed to replace."),String(e).replace(t,n)}function iDe(e){return $T(e).slice().reverse()}function oDe(e,t,n){return d7(e||0,t||0,n||0)}function aDe(e,t){let n=is(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function sDe(e,t){let n=is(e,(t||this).context);return n?n.copy():void 0}function cDe(e,t){let n=is(e,(t||this).context);return n?n.domain():[]}function lDe(e,t,n){let r=is(e,(n||this).context);return r?F(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function uDe(e,t){let n=is(e,(t||this).context);return n&&n.range?n.range():[]}function fDe(e,t,n){let r=is(e,(n||this).context);return r?r(t):void 0}function dDe(e,t,n,r,i){e=is(e,(i||this).context);let o=QV(t,n),a=e.domain(),s=a[0],c=je(a),l=An;return c-s?l=qy(e,s,c):e=(e.interpolator?ft("sequential")().interpolator(e.interpolator()):ft("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,c=1]),e.ticks&&(a=e.ticks(+r||15),s!==a[0]&&a.unshift(s),c!==je(a)&&a.push(c)),a.forEach(u=>o.stop(l(u),e(u))),o}function pDe(e,t,n){let r=is(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function hDe(e){let t=null;return function(n){return n?zu(n,t=t||Wl(e)):e}}var yte=e=>e.data;function xte(e,t){let n=pte.call(t,e);return n.root&&n.root.lookup||{}}function mDe(e,t,n){let r=xte(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(yte):void 0}function gDe(e,t){let n=xte(e,this)[t];return n?n.ancestors().map(yte):void 0}var Cte=()=>typeof window<"u"&&window||null;function vDe(){let e=Cte();return e?e.screen:{}}function yDe(){let e=Cte();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function xDe(){let e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function bte(e,t,n){if(!e)return[];let[r,i]=e,o=new Vn().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return SN(a,o,CDe(t))}function CDe(e){let t=null;if(e){let n=te(e.marktype),r=te(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function bDe(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=te(e);let i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function MDe(e){return te(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function wDe(e,t,n){let{x:r,y:i,mark:o}=n,a=new Vn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(let[c,l]of t)c<a.x1&&(a.x1=c),c>a.x2&&(a.x2=c),l<a.y1&&(a.y1=l),l>a.y2&&(a.y2=l);return a.translate(r,i),bte([[a.x1,a.y1],[a.x2,a.y2]],e,o).filter(c=>SDe(c.x,c.y,t))}function SDe(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){let[a,s]=n[o],[c,l]=n[i];l>t!=s>t&&e<(a-c)*(t-l)/(s-l)+c&&r++}return r&1}var rf={random(){return Qi()},cumulativeNormal:Id,cumulativeLogNormal:Uv,cumulativeUniform:Wv,densityNormal:Rv,densityLogNormal:Bv,densityUniform:Gv,quantileNormal:Fd,quantileLogNormal:jv,quantileUniform:Yv,sampleNormal:Td,sampleLogNormal:$v,sampleUniform:qv,isArray:F,isBoolean:w1,isDate:S2,isDefined(e){return e!==void 0},isNumber:Pe,isObject:ne,isRegExp:NH,isString:Q,isTuple:wl,isValid(e){return e!=null&&e===e},toBoolean:id,toDate(e){return od(e)},toNumber:Bn,toString:ad,indexof:eDe,join:JEe,lastindexof:tDe,replace:rDe,reverse:iDe,slice:nDe,flush:AH,lerp:_H,merge:WEe,pad:IH,peek:je,pluck:ZEe,span:Xs,inrange:b3,truncate:FH,rgb:Bo,lab:O3,hcl:kl,hsl:_l,luminance:IT,contrast:GEe,sequence:Un,format:DEe,utcFormat:zEe,utcParse:LEe,utcOffset:wL,utcSequence:EL,timeFormat:hte,timeParse:HEe,timeOffset:ML,timeSequence:SL,timeUnitSpecifier:hL,monthFormat:AEe,monthAbbrevFormat:VEe,dayFormat:NEe,dayAbbrevFormat:_Ee,quarter:DH,utcquarter:zH,week:vL,utcweek:xL,dayofyear:gL,utcdayofyear:yL,warn:UEe,info:jEe,debug:qEe,extent(e){return ji(e)},inScope:BEe,intersect:bte,clampRange:HH,pinchDistance:QEe,pinchAngle:KEe,screen:vDe,containerSize:xDe,windowSize:yDe,bandspace:oDe,setdata:SEe,pathShape:hDe,panLinear:MH,panLog:wH,panPow:SH,panSymlog:EH,zoomLinear:K5,zoomLog:Z5,zoomPow:G6,zoomSymlog:J5,encode:EEe,modify:XEe,lassoAppend:bDe,lassoPath:MDe,intersectLasso:wDe},EDe=["view","item","group","xy","x","y"],DDe="event.vega.",Mte="this.",UT={},wte={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Z(mte+e)}]`,functions:zDe,constants:AT,visitors:UT},FT=_C(wte);function zDe(e){let t=VT(e);EDe.forEach(n=>t[n]=DDe+n);for(let n in rf)t[n]=Mte+n;return _e(t,FEe(e,rf,UT)),t}function Tn(e,t,n){return arguments.length===1?rf[e]:(rf[e]=t,n&&(UT[e]=n),FT&&(FT.functions[e]=Mte+e),this)}Tn("bandwidth",aDe,a1);Tn("copy",sDe,a1);Tn("domain",cDe,a1);Tn("range",uDe,a1);Tn("invert",lDe,a1);Tn("scale",fDe,a1);Tn("gradient",dDe,a1);Tn("geoArea",REe,a1);Tn("geoBounds",OEe,a1);Tn("geoCentroid",PEe,a1);Tn("geoShape",pDe,a1);Tn("geoScale",$Ee,a1);Tn("indata",wEe,IEe);Tn("data",pte,RT);Tn("treePath",mDe,RT);Tn("treeAncestors",gDe,RT);Tn("vlSelectionTest",ote,TC);Tn("vlSelectionIdTest",ste,TC);Tn("vlSelectionResolve",lte,TC);Tn("vlSelectionTuples",cte);function U2(e,t){let n={},r;try{e=Q(e)?e:Z(e)+"",r=nf(e)}catch{B("Expression parse error: "+e)}r.visit(o=>{if(o.type!==DT)return;let a=o.callee.name,s=wte.visitors[a];s&&s(a,o.arguments,t,n)});let i=FT(r);return i.globals.forEach(o=>{let a=mte+o;!de(n,a)&&t.getSignal(o)&&(n[a]=t.signalRef(o))}),{$expr:_e({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function HDe(e){let t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}var LDe=dr(["rule"]),Ste=dr(["group","image","rect"]);function ADe(e,t){let n="";return LDe[t]||(e.x2&&(e.x?(Ste[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Ste[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function jT(e){return(e+"").toLowerCase()}function VDe(e){return jT(e)==="operator"}function NDe(e){return jT(e)==="collect"}function Op(e,t,n){n.endsWith(";")||(n="return("+n+");");let r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function _De(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var kDe={operator:(e,t)=>Op(e,["_"],t.code),parameter:(e,t)=>Op(e,["datum","_"],t.code),event:(e,t)=>Op(e,["event"],t.code),handler:(e,t)=>{let n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Op(e,["_","event"],n)},encode:(e,t)=>{let{marktype:n,channels:r}=t,i="var o=item,datum=o.datum,m=0,$;";for(let o in r){let a="o["+Z(o)+"]";i+=`$=${r[o].code};if(${a}!==$)${a}=$,m=1;`}return i+=ADe(r,n),i+="return m;",Op(e,["item","_"],i)},codegen:{get(e){let t=`[${e.map(Z).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n,r=(o,a)=>{let s=t[a],c,l;return o.path?(c=`a${o.path}`,l=`b${o.path}`):((n=n||{})["f"+a]=o,c=`this.f${a}(a)`,l=`this.f${a}(b)`),_De(c,l,-s,s)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function TDe(e){let t=this;VDe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function IDe(e){let t=this;if(e.params){let n=t.get(e.id);n||B("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function FDe(e,t){t=t||{};let n=this;for(let r in e){let i=e[r];t[r]=F(i)?i.map(o=>Ete(o,n,t)):Ete(i,n,t)}return t}function Ete(e,t,n){if(!e||!ne(e))return e;for(let r=0,i=Dte.length,o;r<i;++r)if(o=Dte[r],de(e,o.key))return o.parse(e,t,n);return e}var Dte=[{key:"$ref",parse:RDe},{key:"$key",parse:PDe},{key:"$expr",parse:ODe},{key:"$field",parse:$De},{key:"$encode",parse:UDe},{key:"$compare",parse:BDe},{key:"$context",parse:jDe},{key:"$subflow",parse:qDe},{key:"$tupleid",parse:GDe}];function RDe(e,t){return t.get(e.$ref)||B("Operator not defined: "+e.$ref)}function ODe(e,t,n){e.$params&&t.parseParameters(e.$params,n);let r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=yi(t.parameterExpression(e.$expr),e.$fields))}function PDe(e,t){let n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=rd(e.$key,e.$flat,t.expr.codegen))}function $De(e,t){if(!e.$field)return null;let n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=wr(e.$field,e.$name,t.expr.codegen))}function BDe(e,t){let n="c:"+e.$compare+"_"+e.$order,r=te(e.$compare).map(i=>i&&i.$tupleid?De:i);return t.fn[n]||(t.fn[n]=ed(r,e.$order,t.expr.codegen))}function UDe(e,t){let n=e.$encode,r={};for(let i in n){let o=n[i];r[i]=yi(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function jDe(e,t){return t}function qDe(e,t){let n=e.$subflow;return function(r,i,o){let a=t.fork().parse(n),s=a.get(n.operators[0].id),c=a.signals.parent;return c&&c.set(o),s.detachSubflow=()=>t.detach(a),s}}function GDe(){return De}function WDe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&B("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function YDe(e){var t=this,n=ne(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,a=void 0;r||B("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(a=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,a)}var XDe={skip:!0};function QDe(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{let a=t.signals[o];e.signals(o,a)&&(r[o]=a.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{let a=t.data[o];e.data(o,a)&&(i[o]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function KDe(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],XDe)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(fr).insert(r[o]))}),(e.subcontext||[]).forEach((o,a)=>{let s=t.subcontext[a];s&&s.setState(o)})}function RC(e,t,n,r){return new Hte(e,t,n,r)}function Hte(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||kDe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function zte(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}Hte.prototype=zte.prototype={fork(){let e=new zte(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);let t=Object.keys(e.nodes);for(let n of t)e.nodes[n]._targets=null;for(let n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){let n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),NDe(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(let o in e.data){let a=n.data[o]||(n.data[o]={});e.data[o].forEach(s=>a[s]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[jT(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:HDe,parseOperator:TDe,parseOperatorParameters:IDe,parseParameters:FDe,parseStream:WDe,parseUpdate:YDe,getState:QDe,setState:KDe};function ZDe(e){let t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Fte(t,e.description()))}function Fte(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function JDe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}var qT="default";function eze(e){let t=e._signals.cursor||(e._signals.cursor=e.add({user:qT,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{let i=t.value,o=i?Q(i)?i:i.user:qT,a=r.item&&r.item.cursor||null;return i&&o===i.user&&a==i.item?i:{user:o,item:a}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Q(r)||(i=r.item,r=r.user),WT(e,r&&r!==qT?r:i||r),i},{cursor:t})}function WT(e,t){let n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function $C(e,t){var n=e._runtime.data;return de(n,t)||B("Unrecognized data set: "+t),n[t]}function tze(e,t){return arguments.length<2?$C(this,e).values.value:UC.call(this,e,oc().remove(fr).insert(t))}function UC(e,t){PL(t)||B("Second argument to changes must be a changeset.");let n=$C(this,e);return n.modified=!0,this.pulse(n.input,t)}function nze(e,t){return UC.call(this,e,oc().insert(t))}function rze(e,t){return UC.call(this,e,oc().remove(t))}function Rte(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Ote(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function jC(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function ize(e){var t=jC(e),n=Rte(e),r=Ote(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function oze(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,a,s;return i&&(s=jC(e),a=t.changedTouches?t.changedTouches[0]:t,o=$7(a,i),o[0]-=s[0],o[1]-=s[1]),t.dataflow=e,t.item=n,t.vega=aze(e,n,o),t}function aze(e,t,n){let r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(a){var s=r,c;if(a){for(c=t;c;c=c.mark.group)if(c.mark.name===a){s=c;break}}return s&&s.mark&&s.mark.interactive?s:{}}function o(a){if(!a)return n;Q(a)&&(a=i(a));let s=n.slice();for(;a;)s[0]-=a.x||0,s[1]-=a.y||0,a=a.mark&&a.mark.group;return s}return{view:gn(e),item:gn(t||{}),group:i,xy:o,x:a=>o(a)[0],y:a=>o(a)[1]}}var Lte="view",sze="timer",cze="window",lze={trap:!1};function uze(e){let t=_e({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{F(r[o])&&(r[o]=dr(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Pte(e,t,n,r){e._eventListeners.push({type:n,sources:te(t),handler:r})}function fze(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function OC(e,t,n){let r=e._eventConfig&&e._eventConfig[t];return r===!1||ne(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function dze(e,t,n){var r=this,i=new su(n),o=function(l,u){r.runAsync(null,()=>{e===Lte&&fze(r,t)&&l.preventDefault(),i.receive(oze(r,l,u))})},a;if(e===sze)OC(r,"timer",t)&&r.timer(o,t);else if(e===Lte)OC(r,"view",t)&&r.addEventListener(t,o,lze);else if(e===cze?OC(r,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&OC(r,"selector",t)&&(a=Array.from(document.querySelectorAll(e))),!a)r.warn("Can not resolve event source: "+e);else{for(var s=0,c=a.length;s<c;++s)a[s].addEventListener(t,o);Pte(r,a,t,o)}return i}function Ate(e){return e.item}function Vte(e){return e.item.mark.source}function Nte(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function pze(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Ate),Vte,Nte(e)),this.on(this.events("view","pointerout",Ate),Vte,Nte(t)),this}function hze(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,o;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(o=n[r],i=o.sources.length;--i>=0;)o.sources[i].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this}function co(e,t,n){let r=document.createElement(e);for(let i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}var mze="vega-bind",gze="vega-bind-name",vze="vega-bind-radio";function yze(e,t,n){if(!t)return;let r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,a)})}},r.debounce&&(i.update=nd(r.debounce,i.update))),(r.input==null&&r.element?xze:bze)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function xze(e,t,n,r){let i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),Pte(r,t,i,o),e.set=a=>{t.value=a,t.dispatchEvent(Cze(i))}}function Cze(e){return typeof Event<"u"?new Event(e):{type:e}}function bze(e,t,n,r){let i=r.signal(n.signal),o=co("div",{class:mze}),a=n.input==="radio"?o:o.appendChild(co("label"));a.appendChild(co("span",{class:gze},n.name||n.signal)),t.appendChild(o);let s=Mze;switch(n.input){case"checkbox":s=wze;break;case"select":s=Sze;break;case"radio":s=Eze;break;case"range":s=Dze;break}s(e,a,n,i)}function Mze(e,t,n,r){let i=co("input");for(let o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function wze(e,t,n,r){let i={type:"checkbox",name:n.signal};r&&(i.checked=!0);let o=co("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=a=>o.checked=!!a||null}function Sze(e,t,n,r){let i=co("select",{name:n.signal}),o=n.labels||[];n.options.forEach((a,s)=>{let c={value:a};BC(a,r)&&(c.selected=!0),i.appendChild(co("option",c,(o[s]||a)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=a=>{for(let s=0,c=n.options.length;s<c;++s)if(BC(n.options[s],a)){i.selectedIndex=s;return}}}function Eze(e,t,n,r){let i=co("span",{class:vze}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((a,s)=>{let c={type:"radio",name:n.signal,value:a};BC(a,r)&&(c.checked=!0);let l=co("input",c);l.addEventListener("change",()=>e.update(a));let u=co("label",{},(o[s]||a)+"");return u.prepend(l),i.appendChild(u),l}),e.set=a=>{let s=e.elements,c=s.length;for(let l=0;l<c;++l)BC(s[l].value,a)&&(s[l].checked=!0)}}function Dze(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;let i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||qi(o,i,100),s=co("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;let c=co("span",{},+r);t.appendChild(s),t.appendChild(c);let l=()=>{c.textContent=s.value,e.update(+s.value)};s.addEventListener("input",l),s.addEventListener("change",l),e.elements=[s],e.set=u=>{s.value=u,c.textContent=u}}function BC(e,t){return e===t||e+""==t+""}function $te(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,Rte(e),Ote(e),jC(e),i,o).background(e.background())}function YT(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function zze(e,t,n,r){let i=new r(e.loader(),YT(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,jC(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function Hze(e,t){let n=this,r=n._renderType,i=n._eventConfig.bind,o=B7(r);e=n._el=e?GT(n,e,!0):null,ZDe(n),o||n.error("Unrecognized renderer type: "+r);let a=o.handler||dc,s=e?o.renderer:o.headless;return n._renderer=s?$te(n,n._renderer,e,s):null,n._handler=zze(n,n._handler,e,a),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=GT(n,t,!0):e.appendChild(co("form",{class:"vega-bindings"})),n._bind.forEach(c=>{c.param.element&&i!=="container"&&(c.element=GT(n,c.param.element,!!c.param.input))}),n._bind.forEach(c=>{yze(n,c.element||t,c)})),n}function GT(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}var Pp=e=>+e||0,Lze=e=>({top:e,bottom:e,left:e,right:e});function _te(e){return ne(e)?{top:Pp(e.top),bottom:Pp(e.bottom),left:Pp(e.left),right:Pp(e.right)}:Lze(Pp(e))}function XT(e,t,n,r){return Ut(this,null,function*(){let i=B7(t),o=i&&i.headless;return o||B("Unrecognized renderer type: "+t),yield e.runAsync(),$te(e,null,null,o,n,r).renderAsync(e._scenegraph.root)})}function Aze(e,t){return Ut(this,null,function*(){e!==pc.Canvas&&e!==pc.SVG&&e!==pc.PNG&&B("Unrecognized image type: "+e);let n=yield XT(this,e,t);return e===pc.SVG?Vze(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")})}function Vze(e,t){let n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function Nze(e,t){return Ut(this,null,function*(){return(yield XT(this,pc.Canvas,e,t)).canvas()})}function _ze(e){return Ut(this,null,function*(){return(yield XT(this,pc.SVG,e)).svg()})}function kze(e,t,n){return RC(e,ic,rf,n).parse(t)}function Tze(e){var t=this._runtime.scales;return de(t,e)||B("Unrecognized scale or projection: "+e),t[e].value}var Bte="width",Ute="height",QT="padding",kte={skip:!0};function jte(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===QT?r.left+r.right:0)}function qte(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===QT?r.top+r.bottom:0)}function Ize(e){var t=e._signals,n=t[Bte],r=t[Ute],i=t[QT];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,s=>{e._width=s.size,e._viewWidth=jte(e,s.size),o()},{size:n}),e._resizeHeight=e.add(null,s=>{e._height=s.size,e._viewHeight=qte(e,s.size),o()},{size:r});let a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function Fze(e,t,n,r,i,o){this.runAfter(a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(Bte,n,kte),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(Ute,r,kte),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter(c=>c.resize())},!1,1)}function Rze(e){return this._runtime.getState(e||{data:Oze,signals:Pze,recurse:!0})}function Oze(e,t){return t.modified&&F(t.input.value)&&!e.startsWith("_:vega:_")}function Pze(e,t){return!(e==="parent"||t instanceof ic.proxy)}function $ze(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Bze(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(dk(n,t))}function Uze(e,t,n,r){let i=e.element();i&&i.setAttribute("title",jze(r))}function jze(e){return e==null?"":F(e)?Gte(e):ne(e)&&!S2(e)?qze(e):e+""}function qze(e){return Object.keys(e).map(t=>{let n=e[t];return t+": "+(F(n)?Gte(n):Wte(n))}).join(`
`)}function Gte(e){return"["+e.map(Wte).join(", ")+"]"}function Wte(e){return F(e)?"[\u2026]":ne(e)&&!S2(e)?"{\u2026}":e}function Gze(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null,t=()=>{e?.();let n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function KT(e,t){let n=this;if(t=t||{},V3.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){let o=_e({},e.locale,t.locale);n.locale(Sv(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||pc.Canvas,n._scenegraph=new Mx;let r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Uze,n._redraw=!0,n._handler=new dc().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=uze(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);let i=kze(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:_e({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=jte(n,n._width),n._viewHeight=qte(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Ize(n),JDe(n),eze(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function PC(e,t){return de(e._signals,t)?e._signals[t]:B("Unrecognized signal name: "+Z(t))}function Yte(e,t){let n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Tte(e,t,n,r){let i=Yte(n,r);return i||(i=YT(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Ite(e,t,n){let r=Yte(t,n);return r&&t._targets.remove(r),e}ee(KT,V3,{evaluate(e,t,n){return Ut(this,null,function*(){if(yield V3.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,ize(this)),yield this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&Nd(this,n),this})},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){let t=e!=null?e+"":null;return t!==this._desc&&Fte(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){let r=PC(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",_te(e)):_te(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(B7(e)||B("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(V3.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(PC(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Fze,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=YT(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){let t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Tte(this,e,PC(this,e),t)},removeSignalListener(e,t){return Ite(this,PC(this,e),t)},addDataListener(e,t){return Tte(this,e,$C(this,e).values,t)},removeDataListener(e,t){return Ite(this,$C(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){let t=WT(this,null);this._globalCursor=!!e,t&&WT(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Bze,events:dze,finalize:hze,hover:pze,data:tze,change:UC,insert:nze,remove:rze,scale:Tze,initialize:Hze,toImageURL:Aze,toCanvas:Nze,toSVG:_ze,getState:Rze,setState:$ze,_watchPixelRatio:Gze});var Wze="view",qC="[",GC="]",Xte="{",Qte="}",Yze=":",Kte=",",Xze="@",Qze=">",Kze=/[[\]{}]/,Zze={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Zte,Jte;function Hi(e,t,n){return Zte=t||Wze,Jte=n||Zze,ene(e.trim()).map(ZT)}function Jze(e){return Jte[e]}function $p(e,t,n,r,i){let o=e.length,a=0,s;for(;t<o;++t){if(s=e[t],!a&&s===n)return t;i&&i.indexOf(s)>=0?--a:r&&r.indexOf(s)>=0&&++a}return t}function ene(e){let t=[],n=e.length,r=0,i=0;for(;i<n;)i=$p(e,i,Kte,qC+Xte,GC+Qte),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function ZT(e){return e[0]==="["?eHe(e):tHe(e)}function eHe(e){let t=e.length,n=1,r;if(n=$p(e,n,GC,qC,GC),n===t)throw"Empty between selector: "+e;if(r=ene(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Qze)throw"Expected '>' after between selector: "+e;r=r.map(ZT);let i=ZT(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function tHe(e){let t={source:Zte},n=[],r=[0,0],i=0,o=0,a=e.length,s=0,c,l;if(e[a-1]===Qte){if(s=e.lastIndexOf(Xte),s>=0){try{r=nHe(e.substring(s+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,s).trim(),a=e.length}else throw"Unmatched right brace: "+e;s=0}if(!a)throw e;if(e[0]===Xze&&(i=++s),c=$p(e,s,Yze),c<a&&(n.push(e.substring(o,c).trim()),o=s=++c),s=$p(e,s,qC),s===a)n.push(e.substring(o,a).trim());else if(n.push(e.substring(o,s).trim()),l=[],o=++s,o===a)throw"Unmatched left bracket: "+e;for(;s<a;){if(s=$p(e,s,GC),s===a)throw"Unmatched left bracket: "+e;if(l.push(e.substring(o,s).trim()),s<a-1&&e[++s]!==qC)throw"Expected left bracket: "+e;o=++s}if(!(a=n.length)||Kze.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],i?t.markname=n[0].slice(1):Jze(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function nHe(e){let t=e.split(Kte);if(!e.length||t.length>2)throw e;return t.map(n=>{let r=+n;if(r!==r)throw e;return r})}function rHe(e){return ne(e)?e:{type:e||"pad"}}var Bp=e=>+e||0,iHe=e=>({top:e,bottom:e,left:e,right:e});function oHe(e){return ne(e)?e.signal?e:{top:Bp(e.top),bottom:Bp(e.bottom),left:Bp(e.left),right:Bp(e.right)}:iHe(Bp(e))}var Lr=e=>ne(e)&&!F(e)?_e({},e):{value:e};function tne(e,t,n,r){return n!=null?(ne(n)&&!F(n)||F(n)&&n.length&&ne(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function ti(e,t,n){for(let r in t)tne(e,r,t[r]);for(let r in n)tne(e,r,n[r],"update")}function uf(e,t,n){for(let r in t)n&&de(n,r)||(e[r]=_e(e[r]||{},t[r]));return e}function af(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}var lI="mark",uI="frame",fI="scope",aHe="axis",sHe="axis-domain",cHe="axis-grid",lHe="axis-label",uHe="axis-tick",fHe="axis-title",dHe="legend",pHe="legend-band",hHe="legend-entry",mHe="legend-gradient",Cne="legend-label",gHe="legend-symbol",vHe="legend-title",yHe="title",xHe="title-text",CHe="title-subtitle";function bHe(e,t,n,r,i){let o={},a={},s,c,l,u;c="lineBreak",t==="text"&&i[c]!=null&&!af(c,e)&&JT(o,c,i[c]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),u=n===uI?i.group:n===lI?_e({},i.mark,i[t]):null;for(c in u)l=af(c,e)||(c==="fill"||c==="stroke")&&(af("fill",e)||af("stroke",e)),l||JT(o,c,u[c]);te(r).forEach(f=>{let d=i.style&&i.style[f];for(let p in d)af(p,e)||JT(o,p,d[p])}),e=_e({},e);for(c in o)u=o[c],u.signal?(s=s||{})[c]=u:a[c]=u;return e.enter=_e(a,e.enter),s&&(e.update=_e(s,e.update)),e}function JT(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}var bne=e=>Q(e)?Z(e):e.signal?`(${e.signal})`:Mne(e);function eb(e){if(e.gradient!=null)return wHe(e);let t=e.signal?`(${e.signal})`:e.color?MHe(e.color):e.field!=null?Mne(e.field):e.value!==void 0?Z(e.value):void 0;return e.scale!=null&&(t=SHe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${YC(e.exponent)})`),e.mult!=null&&(t+=`*${YC(e.mult)}`),e.offset!=null&&(t+=`+${YC(e.offset)}`),e.round&&(t=`round(${t})`),t}var WC=(e,t,n,r)=>`(${e}(${[t,n,r].map(eb).join(",")})+'')`;function MHe(e){return e.c?WC("hcl",e.h,e.c,e.l):e.h||e.s?WC("hsl",e.h,e.s,e.l):e.l||e.a?WC("lab",e.l,e.a,e.b):e.r||e.g||e.b?WC("rgb",e.r,e.g,e.b):null}function wHe(e){let t=[e.start,e.stop,e.count].map(n=>n==null?null:Z(n));for(;t.length&&je(t)==null;)t.pop();return t.unshift(bne(e.gradient)),`gradient(${t.join(",")})`}function YC(e){return ne(e)?"("+eb(e)+")":e}function Mne(e){return wne(ne(e)?e:{datum:e})}function wne(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):B("Invalid field reference: "+Z(e));return e.signal||(r=Q(r)?ko(r).map(Z).join("]["):wne(r)),t+"["+r+"]"}function SHe(e,t){let n=bne(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+YC(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function EHe(e){let t="";return e.forEach(n=>{let r=eb(n);t+=n.test?`(${n.test})?${r}:`:r}),je(t)===":"&&(t+="null"),t}function Sne(e,t,n,r,i,o){let a={};o=o||{},o.encoders={$encode:a},e=bHe(e,t,n,r,i.config);for(let s in e)a[s]=DHe(e[s],t,o,i);return o}function DHe(e,t,n,r){let i={},o={};for(let a in e)e[a]!=null&&(i[a]=HHe(zHe(e[a]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function zHe(e){return F(e)?EHe(e):eb(e)}function HHe(e,t,n,r){let i=U2(e,t);return i.$fields.forEach(o=>r[o]=1),_e(n,i.$params),i.$expr}var LHe="outer",AHe=["value","update","init","react","bind"];function nne(e,t){B(e+' for "outer" push: '+Z(t))}function Ene(e,t){let n=e.name;if(e.push===LHe)t.signals[n]||nne("No prior signal definition",n),AHe.forEach(r=>{e[r]!==void 0&&nne("Invalid property ",r)});else{let r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function nI(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function tb(e,t,n,r){return new nI(e,t,n,r)}function JC(e,t){return tb("operator",e,t)}function Ve(e){let t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function qp(e,t){return t?{$field:e,$name:t}:{$field:e}}var rI=qp("key");function rne(e,t){return{$compare:e,$order:t}}function VHe(e,t){let n={$key:e};return t&&(n.$flat=!0),n}var NHe="ascending",_He="descending";function kHe(e){return ne(e)?(e.order===_He?"-":"+")+nb(e.op,e.field):""}function nb(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}var dI="scope",iI="view";function gr(e){return e&&e.signal}function THe(e){return e&&e.expr}function XC(e){if(gr(e))return!0;if(ne(e)){for(let t in e)if(XC(e[t]))return!0}return!1}function j2(e,t){return e??t}function d0(e){return e&&e.signal||e}var ine="timer";function Gp(e,t){return(e.merge?FHe:e.stream?RHe:e.type?OHe:B("Invalid stream specification: "+Z(e)))(e,t)}function IHe(e){return e===dI?iI:e||iI}function FHe(e,t){let n=e.merge.map(i=>Gp(i,t)),r=pI({merge:n},e,t);return t.addStream(r).id}function RHe(e,t){let n=Gp(e.stream,t),r=pI({stream:n},e,t);return t.addStream(r).id}function OHe(e,t){let n;e.type===ine?(n=t.event(ine,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(IHe(e.source),e.type);let r=pI({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function pI(e,t,n){let r=t.between;return r&&(r.length!==2&&B('Stream "between" parameter must have 2 entries: '+Z(t)),e.between=[Gp(r[0],n),Gp(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(PHe(t.marktype,t.markname,t.markrole)),t.source===dI&&r.push("inScope(event.item)"),r.length&&(e.filter=U2("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function PHe(e,t,n){let r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}var $He={code:"_.$value",ast:{type:"Identifier",value:"value"}};function BHe(e,t,n){let r=e.encode,i={target:n},o=e.events,a=e.update,s=[];o||B("Signal update missing events specification."),Q(o)&&(o=Hi(o,t.isSubscope()?dI:iI)),o=te(o).filter(c=>c.signal||c.scale?(s.push(c),0):1),s.length>1&&(s=[jHe(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),r!=null&&(a&&B("Signal encode and update are mutually exclusive."),a="encode(item(),"+Z(r)+")"),i.update=Q(a)?U2(a,t):a.expr!=null?U2(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:$He,$params:{$value:t.signalRef(a.signal)}}:B("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach(c=>t.addUpdate(_e(UHe(c,t),i)))}function UHe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Gp(e,t)}}function jHe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function qHe(e,t){let n=t.getSignal(e.name),r=e.update;e.init&&(r?B("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=U2(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>BHe(i,t,n.id))}var $t=e=>(t,n,r)=>tb(e,n,t||void 0,r),Dne=$t("aggregate"),GHe=$t("axisticks"),zne=$t("bound"),G2=$t("collect"),one=$t("compare"),WHe=$t("datajoin"),Hne=$t("encode"),YHe=$t("expression"),XHe=$t("facet"),QHe=$t("field"),KHe=$t("key"),ZHe=$t("legendentries"),JHe=$t("load"),eLe=$t("mark"),tLe=$t("multiextent"),nLe=$t("multivalues"),rLe=$t("overlap"),iLe=$t("params"),Lne=$t("prefacet"),oLe=$t("projection"),aLe=$t("proxy"),sLe=$t("relay"),Ane=$t("render"),cLe=$t("scale"),h0=$t("sieve"),lLe=$t("sortitems"),Vne=$t("viewlayout"),uLe=$t("values"),fLe=0,Nne={min:"min",max:"max",count:"sum"};function dLe(e,t){let n=e.type||"linear";MV(n)||B("Unrecognized scale type: "+Z(n)),t.addScale(e.name,{type:n,domain:void 0})}function pLe(e,t){let n=t.getScale(e.name).params,r;n.domain=_ne(e.domain,e,t),e.range!=null&&(n.range=Tne(e,t,n)),e.interpolate!=null&&wLe(e.interpolate,n),e.nice!=null&&(n.nice=MLe(e.nice,t)),e.bins!=null&&(n.bins=bLe(e.bins,t));for(r in e)de(n,r)||r==="name"||(n[r]=Yo(e[r],t))}function Yo(e,t){return ne(e)?e.signal?t.signalRef(e.signal):B("Unsupported object: "+Z(e)):e}function QC(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Yo(n,t))}function rb(e){B("Can not find data set: "+Z(e))}function _ne(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&B("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(F(e)?hLe:e.fields?gLe:mLe)(e,t,n)}function hLe(e,t,n){return e.map(r=>Yo(r,n))}function mLe(e,t,n){let r=n.getData(e.data);return r||rb(e.data),U3(t.type)?r.valuesRef(n,e.field,kne(e.sort,!1)):EV(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function gLe(e,t,n){let r=e.data,i=e.fields.reduce((o,a)=>(a=Q(a)?{data:r,field:a}:F(a)||a.signal?vLe(a,n):a,o.push(a),o),[]);return(U3(t.type)?yLe:EV(t.type)?xLe:CLe)(e,n,i)}function vLe(e,t){let n="_:vega:_"+fLe++,r=G2({});if(F(e))r.value={$ingest:e};else if(e.signal){let i="setdata("+Z(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,h0({})]),{data:n,field:"data"}}function yLe(e,t,n){let r=kne(e.sort,!0),i,o,a=n.map(l=>{let u=t.getData(l.data);return u||rb(l.data),u.countsRef(t,l.field,r)}),s={groupby:rI,pulse:a};r&&(i=r.op||"count",o=r.field?nb(i,r.field):"count",s.ops=[Nne[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(Dne(s));let c=t.add(G2({pulse:Ve(i)}));return o=t.add(uLe({field:rI,sort:t.sortRef(r),pulse:Ve(c)})),Ve(o)}function kne(e,t){return e&&(!e.field&&!e.op?ne(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?B("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Nne[e.op]&&B("Multiple domain scales can not be sorted using "+e.op)),e}function xLe(e,t,n){let r=n.map(i=>{let o=t.getData(i.data);return o||rb(i.data),o.domainRef(t,i.field)});return Ve(t.add(nLe({values:r})))}function CLe(e,t,n){let r=n.map(i=>{let o=t.getData(i.data);return o||rb(i.data),o.extentRef(t,i.field)});return Ve(t.add(tLe({extents:r})))}function bLe(e,t){return e.signal||F(e)?QC(e,t):t.objectProperty(e)}function MLe(e,t){return e.signal?t.signalRef(e.signal):ne(e)?{interval:Yo(e.interval),step:Yo(e.step)}:Yo(e)}function wLe(e,t){t.interpolate=Yo(e.type||e),e.gamma!=null&&(t.interpolateGamma=Yo(e.gamma))}function Tne(e,t,n){let r=t.config.range,i=e.range;if(i.signal)return t.signalRef(i.signal);if(Q(i)){if(r&&de(r,i))return e=_e({},e,{range:r[i]}),Tne(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=U3(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:B("Unrecognized scale range value: "+Z(i))}else if(i.scheme){n.scheme=F(i.scheme)?QC(i.scheme,t):Yo(i.scheme,t),i.extent&&(n.schemeExtent=QC(i.extent,t)),i.count&&(n.schemeCount=Yo(i.count,t));return}else if(i.step){n.rangeStep=Yo(i.step,t);return}else{if(U3(e.type)&&!F(i))return _ne(i,e,t);F(i)||B("Unsupported range type: "+Z(i))}return i.map(o=>(F(o)?QC:Yo)(o,t))}function SLe(e,t){let n=t.config.projection||{},r={};for(let i in e)i!=="name"&&(r[i]=oI(e[i],i,t));for(let i in n)r[i]==null&&(r[i]=oI(n[i],i,t));t.addProjection(e.name,r)}function oI(e,t,n){return F(e)?e.map(r=>oI(r,t,n)):ne(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:B("Unsupported parameter object: "+Z(e)):e}var W2="top",ff="left",df="right",f4="bottom",Ine="center",ELe="vertical",DLe="start",zLe="middle",HLe="end",aI="index",hI="label",LLe="offset",lf="perc",ALe="perc2",Xo="value",Yp="guide-label",mI="guide-title",VLe="group-title",NLe="group-subtitle",ane="symbol",KC="gradient",sI="discrete",cI="size",_Le="shape",kLe="fill",TLe="stroke",ILe="strokeWidth",FLe="strokeDash",RLe="opacity",gI=[cI,_Le,kLe,TLe,ILe,FLe,RLe],Xp={name:1,style:1,interactive:1},yt={value:0},Qo={value:1},ib="group",Fne="rect",vI="rule",OLe="symbol",m0="text";function Wp(e){return e.type=ib,e.interactive=e.interactive||!1,e}function _1(e,t){let n=(r,i)=>j2(e[r],j2(t[r],i));return n.isVertical=r=>ELe===j2(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>j2(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>j2(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>j2(e.columns,j2(t.columns,+n.isVertical(!0))),n}function Rne(e,t){let n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function PLe(e,t,n){let r=t.config.style[n];return r&&r[e]}function ob(e,t,n){return`item.anchor === '${DLe}' ? ${e} : item.anchor === '${HLe}' ? ${t} : ${n}`}var yI=ob(Z(ff),Z(df),Z(Ine));function $Le(e){let t=e("tickBand"),n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ne(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function One(e,t){return t?e?ne(e)?Object.assign({},e,{offset:One(e.offset,t)}):{value:e,offset:t}:t:e}function lo(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=uf(e.encode,t,Xp)):e.interactive=!1,e}function BLe(e,t,n,r){let i=_1(e,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength(),c,l,u,f,d;o?(l=[0,1],u=[0,0],f=a,d=s):(l=[0,0],u=[1,0],f=s,d=a);let p={enter:c={opacity:yt,x:yt,y:yt,width:Lr(f),height:Lr(d)},update:_e({},c,{opacity:Qo,fill:{gradient:t,start:l,stop:u}}),exit:{opacity:yt}};return ti(p,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),lo({type:Fne,role:mHe,encode:p},r)}function ULe(e,t,n,r,i){let o=_1(e,n),a=o.isVertical(),s=o.gradientThickness(),c=o.gradientLength(),l,u,f,d,p="";a?(l="y",f="y2",u="x",d="width",p="1-"):(l="x",f="x2",u="y",d="height");let h={opacity:yt,fill:{scale:t,field:Xo}};h[l]={signal:p+"datum."+lf,mult:c},h[u]=yt,h[f]={signal:p+"datum."+ALe,mult:c},h[d]=Lr(s);let m={enter:h,update:_e({},h,{opacity:Qo}),exit:{opacity:yt}};return ti(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),lo({type:Fne,role:pHe,key:Xo,from:i,encode:m},r)}var jLe=`datum.${lf}<=0?"${ff}":datum.${lf}>=1?"${df}":"${Ine}"`,qLe=`datum.${lf}<=0?"${f4}":datum.${lf}>=1?"${W2}":"${zLe}"`;function sne(e,t,n,r){let i=_1(e,t),o=i.isVertical(),a=Lr(i.gradientThickness()),s=i.gradientLength(),c=i("labelOverlap"),l,u,f,d,p="",h={enter:l={opacity:yt},update:u={opacity:Qo,text:{field:hI}},exit:{opacity:yt}};return ti(h,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:j2(e.labelLimit,t.gradientLabelLimit)}),o?(l.align={value:"left"},l.baseline=u.baseline={signal:qLe},f="y",d="x",p="1-"):(l.align=u.align={signal:jLe},l.baseline={value:"top"},f="x",d="y"),l[f]=u[f]={signal:p+"datum."+lf,mult:s},l[d]=u[d]=a,a.offset=j2(e.labelOffset,t.gradientLabelOffset)||0,c=c?{separation:i("labelSeparation"),method:c,order:"datum."+aI}:void 0,lo({type:m0,role:Cne,style:Yp,key:Xo,from:r,encode:h,overlap:c},n)}function GLe(e,t,n,r,i){let o=_1(e,t),a=n.entries,s=!!(a&&a.interactive),c=a?a.name:void 0,l=o("clipHeight"),u=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${LLe} : datum.${cI}`,p=l?Lr(l):{field:cI},h=`datum.${aI}`,m=`max(1, ${i})`,g,v,y,C,b;p.mult=.5,g={enter:v={opacity:yt,x:{signal:d,mult:.5,offset:u},y:p},update:y={opacity:Qo,x:v.x,y:v.y},exit:{opacity:yt}};let M=null,S=null;e.fill||(M=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),ti(g,{fill:o("symbolFillColor",M),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",S),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),gI.forEach(z=>{e[z]&&(y[z]=v[z]={scale:e[z],field:Xo})});let w=lo({type:OLe,role:gHe,key:Xo,from:f,clip:l?!0:void 0,encode:g},n.symbols),E=Lr(u);E.offset=o("labelOffset"),g={enter:v={opacity:yt,x:{signal:d,offset:E},y:p},update:y={opacity:Qo,text:{field:hI},x:v.x,y:v.y},exit:{opacity:yt}},ti(g,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});let D=lo({type:m0,role:Cne,style:Yp,key:Xo,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:yt,height:l?Lr(l):yt,opacity:yt},exit:{opacity:yt},update:y={opacity:Qo,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(C=`ceil(item.mark.items.length / ${m})`,y.row.signal=`${h}%${C}`,y.column.signal=`floor(${h} / ${C})`,b={field:["row",h]}):(y.row.signal=`floor(${h} / ${m})`,y.column.signal=`${h} % ${m}`,b={field:h}),y.column.signal=`(${i})?${y.column.signal}:${h}`,r={facet:{data:r,name:"value",groupby:aI}},Wp({role:fI,from:r,encode:uf(g,a,Xp),marks:[w,D],name:c,interactive:s,sort:b})}function WLe(e,t){let n=_1(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}var xI='item.orient === "left"',CI='item.orient === "right"',ab=`(${xI} || ${CI})`,YLe=`datum.vgrad && ${ab}`,XLe=ob('"top"','"bottom"','"middle"'),QLe=ob('"right"','"left"','"center"'),KLe=`datum.vgrad && ${CI} ? (${QLe}) : (${ab} && !(datum.vgrad && ${xI})) ? "left" : ${yI}`,ZLe=`item._anchor || (${ab} ? "middle" : "start")`,JLe=`${YLe} ? (${xI} ? -90 : 90) : 0`,eAe=`${ab} ? (datum.vgrad ? (${CI} ? "bottom" : "top") : ${XLe}) : "top"`;function tAe(e,t,n,r){let i=_1(e,t),o={enter:{opacity:yt},update:{opacity:Qo,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:yt}};return ti(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:ZLe},angle:{signal:JLe},align:{signal:KLe},baseline:{signal:eAe},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),lo({type:m0,role:vHe,style:mI,from:r,encode:o},n)}function nAe(e,t){let n;return ne(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+cne(e.path)+")":e.sphere&&(n="geoShape("+cne(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function cne(e){return ne(e)&&e.signal?e.signal:Z(e)}function Pne(e){let t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===ib?fI:t||lI}function rAe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Pne(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function iAe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function bI(e,t){let n=kv(e.type);n||B("Unrecognized transform type: "+Z(e.type));let r=tb(n.type.toLowerCase(),null,$ne(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function $ne(e,t,n){let r={},i=e.params.length;for(let o=0;o<i;++o){let a=e.params[o];r[a.name]=oAe(a,t,n)}return r}function oAe(e,t,n){let r=e.type,i=t[e.name];if(r==="index")return aAe(e,t,n);if(i===void 0){e.required&&B("Missing required "+Z(t.type)+" parameter: "+Z(e.name));return}else{if(r==="param")return sAe(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!gr(i)?i.map(o=>lne(e,o,n)):lne(e,i,n)}function lne(e,t,n){let r=e.type;if(gr(t))return fne(r)?B("Expression references can not be signals."):eI(r)?n.fieldRef(t):dne(r)?n.compareRef(t):n.signalRef(t.signal);{let i=e.expr||eI(r);return i&&cAe(t)?n.exprRef(t.expr,t.as):i&&lAe(t)?qp(t.field,t.as):fne(r)?U2(t,n):uAe(r)?Ve(n.getData(t).values):eI(r)?qp(t):dne(r)?n.compareRef(t):t}}function aAe(e,t,n){return Q(t.from)||B('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function sAe(e,t,n){let r=t[e.name];return e.array?(F(r)||B("Expected an array of sub-parameters. Instead: "+Z(r)),r.map(i=>une(e,i,n))):une(e,r,n)}function une(e,t,n){let r=e.params.length,i;for(let a=0;a<r;++a){i=e.params[a];for(let s in i.key)if(i.key[s]!==t[s]){i=null;break}if(i)break}i||B("Unsupported parameter: "+Z(t));let o=_e($ne(i,t,n),i.key);return Ve(n.add(iLe(o)))}var cAe=e=>e&&e.expr,lAe=e=>e&&e.field,uAe=e=>e==="data",fne=e=>e==="expr",eI=e=>e==="field",dne=e=>e==="compare";function fAe(e,t,n){let r,i,o,a,s;return e?(r=e.facet)&&(t||B("Only group marks can be faceted."),r.field!=null?a=s=ZC(r,n):(e.data?s=Ve(n.getData(e.data).aggregate):(o=bI(_e({type:"aggregate",groupby:te(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=ZC(r,n),a=s=Ve(n.add(o))),i=n.keyRef(r.groupby,!0))):a=Ve(n.add(G2(null,[{}]))),a||(a=ZC(e,n)),{key:i,pulse:a,parent:s}}function ZC(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ve(t.getData(e.data).output)}function p0(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}p0.fromEntries=function(e,t){let n=t.length,r=t[n-1],i=t[n-2],o=t[0],a=null,s=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=Ve(t[s-1]),e.add(t[s]),t[s].type==="aggregate"&&(a=t[s]);return new p0(e,o,i,r,a)};function Bne(e){return Q(e)?e:null}function pne(e,t,n){let r=nb(n.op,n.field),i;if(t.ops){for(let o=0,a=t.as.length;o<a;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function Up(e,t,n,r,i,o,a){let s=t[n]||(t[n]={}),c=kHe(o),l=Bne(i),u,f;if(l!=null&&(e=t.scope,l=l+(c?"|"+c:""),u=s[l]),!u){let d=o?{field:rI,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:Ve(t.output)};c&&(d.sort=e.sortRef(o)),f=e.add(tb(r,void 0,d)),a&&(t.index[i]=f),u=Ve(f),l!=null&&(s[l]=u)}return u}p0.prototype={countsRef(e,t,n){let r=this,i=r.counts||(r.counts={}),o=Bne(t),a,s,c;return o!=null&&(e=r.scope,a=i[o]),a?n&&n.field&&pne(e,a.agg.params,n):(c={groupby:e.fieldRef(t,"key"),pulse:Ve(r.output)},n&&n.field&&pne(e,c,n),s=e.add(Dne(c)),a=e.add(G2({pulse:Ve(s)})),a={agg:s,ref:Ve(a)},o!=null&&(i[o]=a)),a.ref},tuplesRef(){return Ve(this.values)},extentRef(e,t){return Up(e,this,"extent","extent",t,!1)},domainRef(e,t){return Up(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Up(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Up(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Up(e,this,"indata","tupleindex",t,!0,!0)}};function dAe(e,t,n){let r=e.from.facet,i=r.name,o=ZC(r,t),a;r.name||B("Facet must have a name: "+Z(r)),r.data||B("Facet must reference a data set: "+Z(r)),r.field?a=t.add(Lne({field:t.fieldRef(r.field),pulse:o})):r.groupby?a=t.add(XHe({key:t.keyRef(r.groupby),group:Ve(t.proxy(n.parent)),pulse:o})):B("Facet must specify groupby or field: "+Z(r));let s=t.fork(),c=s.add(G2()),l=s.add(h0({pulse:Ve(c)}));s.addData(i,new p0(s,c,c,l)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}function pAe(e,t,n){let r=t.add(Lne({pulse:n.pulse})),i=t.fork();i.add(h0()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function Une(e,t,n){let r=e.remove,i=e.insert,o=e.toggle,a=e.modify,s=e.values,c=t.add(JC()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,o,a,s].map(f=>f??"null").join(",")+"),0)",u=U2(l,t);c.update=u.$expr,c.params=u.$params}function sb(e,t){let n=Pne(e),r=e.type===ib,i=e.from&&e.from.facet,o=e.overlap,a=e.layout||n===fI||n===uI,s,c,l,u,f,d,p,h=n===lI||a||i,m=fAe(e.from,r,t);c=t.add(WHe({key:m.key||(e.key?qp(e.key):void 0),pulse:m.pulse,clean:!r}));let g=Ve(c);c=l=t.add(G2({pulse:g})),c=t.add(eLe({markdef:rAe(e),interactive:iAe(e.interactive,t),clip:nAe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ve(c)}));let v=Ve(c);c=u=t.add(Hne(Sne(e.encode,e.type,n,e.style,t,{mod:!1,pulse:v}))),c.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{let w=bI(S,t),E=w.metadata;(E.generates||E.changes)&&B("Mark transforms should not generate new data."),E.nomod||(u.params.mod=!0),w.params.pulse=Ve(c),t.add(c=w)}),e.sort&&(c=t.add(lLe({sort:t.compareRef(e.sort),pulse:Ve(c)})));let y=Ve(c);(i||a)&&(a=t.add(Vne({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:y})),d=Ve(a));let C=t.add(zne({mark:v,pulse:d||y}));p=Ve(C),r&&(h&&(s=t.operators,s.pop(),a&&s.pop()),t.pushState(y,d||p,g),i?dAe(e,t,m):h?pAe(e,t,m):t.parse(e),t.popState(),h&&(a&&s.push(a),s.push(C))),o&&(p=hAe(o,p,t));let b=t.add(Ane({pulse:p})),M=t.add(h0({pulse:Ve(b)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new p0(t,l,b,M)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&B("Marks only support modify triggers."),Une(S,t,f)}))}function hAe(e,t,n){let r=e.method,i=e.bound,o=e.separation,a={separation:gr(o)?n.signalRef(o.signal):o,method:gr(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),i){let s=i.tolerance;a.boundTolerance=gr(s)?n.signalRef(s.signal):+s,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return Ve(n.add(rLe(a)))}function mAe(e,t){let n=t.config.legend,r=e.encode||{},i=_1(e,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,c=o.style,l={},u=0,f,d,p;gI.forEach(C=>e[C]?(l[C]=e[C],u=u||e[C]):0),u||B("Missing valid scale for legend.");let h=gAe(e,t.scaleType(u)),m={title:e.title!=null,scales:l,type:h,vgrad:h!=="symbol"&&i.isVertical()},g=Ve(t.add(G2(null,[m]))),v={enter:{x:{value:0},y:{value:0}}},y=Ve(t.add(ZHe(d={type:h,scale:t.scaleRef(u),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return h===KC?(p=[BLe(e,u,n,r.gradient),sne(e,n,r.labels,y)],d.count=d.count||t.signalRef(`max(2,2*floor((${d0(i.gradientLength())})/100))`)):h===sI?p=[ULe(e,u,n,r.gradient,y),sne(e,n,r.labels,y)]:(f=WLe(e,n),p=[GLe(e,n,r,y,d0(f.columns))],d.size=xAe(e,t,p[0].marks)),p=[Wp({role:hHe,from:g,encode:v,marks:p,layout:f,interactive:s})],m.title&&p.push(tAe(e,n,r.title,g)),sb(Wp({role:dHe,from:g,encode:uf(yAe(i,e,n),o,Xp),marks:p,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:c}),t)}function gAe(e,t){let n=e.type||ane;return!e.type&&vAe(e)===1&&(e.fill||e.stroke)&&(n=y7(t)?KC:By(t)?sI:ane),n!==KC?n:By(t)?sI:KC}function vAe(e){return gI.reduce((t,n)=>t+(e[n]?1:0),0)}function yAe(e,t,n){let r={enter:{},update:{}};return ti(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function xAe(e,t,n){let r=d0(hne("size",e,n)),i=d0(hne("strokeWidth",e,n)),o=d0(CAe(n[1].encode,t,Yp));return U2(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function hne(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Rne(e,n[0].encode)}function CAe(e,t,n){return Rne("fontSize",e)||PLe("fontSize",t,n)}var bAe=`item.orient==="${ff}"?-90:item.orient==="${df}"?90:0`;function MAe(e,t){e=Q(e)?{text:e}:e;let n=_1(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,c=[],l={},u=Ve(t.add(G2(null,[l])));return c.push(EAe(e,n,wAe(e),u)),e.subtitle&&c.push(DAe(e,n,r.subtitle,u)),sb(Wp({role:yHe,from:u,encode:SAe(n,i),marks:c,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function wAe(e){let t=e.encode;return t&&t.title||_e({name:e.name,interactive:e.interactive,style:e.style},t)}function SAe(e,t){let n={enter:{},update:{}};return ti(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:yI},angle:{signal:bAe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),uf(n,t,Xp)}function EAe(e,t,n,r){let i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ti(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),lo({type:m0,role:xHe,style:VLe,from:r,encode:a},n)}function DAe(e,t,n,r){let i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ti(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),lo({type:m0,role:CHe,style:NLe,from:r,encode:a},n)}function zAe(e,t){let n=[];e.transform&&e.transform.forEach(r=>{n.push(bI(r,t))}),e.on&&e.on.forEach(r=>{Une(r,t,e.name)}),t.addDataPipeline(e.name,HAe(e,t,n))}function HAe(e,t,n){let r=[],i=null,o=!1,a=!1,s,c,l,u,f;for(e.values?gr(e.values)||XC(e.format)?(r.push(mne(t,e)),r.push(i=f0())):r.push(i=f0({$ingest:e.values,$format:e.format})):e.url?XC(e.url)||XC(e.format)?(r.push(mne(t,e)),r.push(i=f0())):r.push(i=f0({$request:e.url,$format:e.format})):e.source&&(i=s=te(e.source).map(d=>Ve(t.getData(d).output)),r.push(null)),c=0,l=n.length;c<l;++c)u=n[c],f=u.metadata,!i&&!f.source&&r.push(i=f0()),r.push(u),f.generates&&(a=!0),f.modifies&&!a&&(o=!0),f.source?i=u:f.changes&&(i=null);return s&&(l=s.length-1,r[0]=sLe({derive:o,pulse:l?s:s[0]}),(o||l)&&r.splice(1,0,f0())),i||r.push(f0()),r.push(h0({})),r}function f0(e){let t=G2({},e);return t.metadata={source:!0},t}function mne(e,t){return JHe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}var jne=e=>e===f4||e===W2,cb=(e,t,n)=>gr(e)?NAe(e.signal,t,n):e===ff||e===W2?t:n,Ar=(e,t,n)=>gr(e)?AAe(e.signal,t,n):jne(e)?t:n,q2=(e,t,n)=>gr(e)?VAe(e.signal,t,n):jne(e)?n:t,qne=(e,t,n)=>gr(e)?_Ae(e.signal,t,n):e===W2?{value:t}:{value:n},LAe=(e,t,n)=>gr(e)?kAe(e.signal,t,n):e===df?{value:t}:{value:n},AAe=(e,t,n)=>Gne(`${e} === '${W2}' || ${e} === '${f4}'`,t,n),VAe=(e,t,n)=>Gne(`${e} !== '${W2}' && ${e} !== '${f4}'`,t,n),NAe=(e,t,n)=>MI(`${e} === '${ff}' || ${e} === '${W2}'`,t,n),_Ae=(e,t,n)=>MI(`${e} === '${W2}'`,t,n),kAe=(e,t,n)=>MI(`${e} === '${df}'`,t,n),Gne=(e,t,n)=>(t=t!=null?Lr(t):t,n=n!=null?Lr(n):n,gne(t)&&gne(n)?(t=t?t.signal||Z(t.value):null,n=n?n.signal||Z(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[_e({test:e},t)].concat(n||[])),gne=e=>e==null||Object.keys(e).length===1,MI=(e,t,n)=>({signal:`${e} ? (${sf(t)}) : (${sf(n)})`}),TAe=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${ff}' ? (${sf(r)}) : `:"")+(n!=null?`${e} === '${f4}' ? (${sf(n)}) : `:"")+(i!=null?`${e} === '${df}' ? (${sf(i)}) : `:"")+(t!=null?`${e} === '${W2}' ? (${sf(t)}) : `:"")+"(null)"}),sf=e=>gr(e)?e.signal:e==null?null:Z(e),IAe=(e,t)=>t===0?0:gr(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},cf=(e,t)=>{let n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function of(e,t,n,r){let i;if(t&&de(t,e))return t[e];if(de(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[mI][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Yp][i]}return null}function vne(e){let t={};for(let n of e)if(n)for(let r in n)t[r]=1;return Object.keys(t)}function FAe(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,s,c,l;if(gr(a)){let f=vne([n.axisX,n.axisY]),d=vne([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);s={};for(l of f)s[l]=Ar(a,of(l,n.axisX,i,r),of(l,n.axisY,i,r));c={};for(l of d)c[l]=TAe(a.signal,of(l,n.axisTop,i,r),of(l,n.axisBottom,i,r),of(l,n.axisLeft,i,r),of(l,n.axisRight,i,r))}else s=a===W2||a===f4?n.axisX:n.axisY,c=n["axis"+a[0].toUpperCase()+a.slice(1)];return s||c||o?_e({},i,s,c,o):i}function RAe(e,t,n,r){let i=_1(e,t),o=e.orient,a,s,c={enter:a={opacity:yt},update:s={opacity:Qo},exit:{opacity:yt}};ti(c,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});let l=yne(e,0),u=yne(e,1);return a.x=s.x=Ar(o,l,yt),a.x2=s.x2=Ar(o,u),a.y=s.y=q2(o,l,yt),a.y2=s.y2=q2(o,u),lo({type:vI,role:sHe,from:r,encode:c},n)}function yne(e,t){return{scale:e.scale,range:t}}function OAe(e,t,n,r,i){let o=_1(e,t),a=e.orient,s=e.gridScale,c=cb(a,1,-1),l=PAe(e.offset,c),u,f,d,p={enter:u={opacity:yt},update:d={opacity:Qo},exit:f={opacity:yt}};ti(p,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});let h={scale:e.scale,field:Xo,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},m=Ar(a,{signal:"height"},{signal:"width"}),g=s?{scale:s,range:0,mult:c,offset:l}:{value:0,offset:l},v=s?{scale:s,range:1,mult:c,offset:l}:_e(m,{mult:c,offset:l});return u.x=d.x=Ar(a,h,g),u.y=d.y=q2(a,h,g),u.x2=d.x2=q2(a,v),u.y2=d.y2=Ar(a,v),f.x=Ar(a,h),f.y=q2(a,h),lo({type:vI,role:cHe,key:Xo,from:r,encode:p},n)}function PAe(e,t){if(t!==1)if(!ne(e))e=gr(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=_e({},e);for(;n.mult!=null;)if(ne(n.mult))n=n.mult=_e({},n.mult);else return n.mult=gr(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function $Ae(e,t,n,r,i,o){let a=_1(e,t),s=e.orient,c=cb(s,-1,1),l,u,f,d={enter:l={opacity:yt},update:f={opacity:Qo},exit:u={opacity:yt}};ti(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});let p=Lr(i);p.mult=c;let h={scale:e.scale,field:Xo,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return f.y=l.y=Ar(s,yt,h),f.y2=l.y2=Ar(s,p),u.x=Ar(s,h),f.x=l.x=q2(s,yt,h),f.x2=l.x2=q2(s,p),u.y=q2(s,h),lo({type:vI,role:uHe,key:Xo,from:r,encode:d},n)}function tI(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function BAe(e,t,n,r,i,o){let a=_1(e,t),s=e.orient,c=e.scale,l=cb(s,-1,1),u=d0(a("labelFlush")),f=d0(a("labelFlushOffset")),d=a("labelAlign"),p=a("labelBaseline"),h=u===0||!!u,m,g=Lr(i);g.mult=l,g.offset=Lr(a("labelPadding")||0),g.offset.mult=l;let v={scale:c,field:Xo,band:.5,offset:One(o.offset,a("labelOffset"))},y=Ar(s,h?tI(c,u,'"left"','"right"','"center"'):{value:"center"},LAe(s,"left","right")),C=Ar(s,qne(s,"bottom","top"),h?tI(c,u,'"top"','"bottom"','"middle"'):{value:"middle"}),b=tI(c,u,`-(${f})`,f,0);h=h&&f;let M={opacity:yt,x:Ar(s,v,g),y:q2(s,v,g)},S={enter:M,update:m={opacity:Qo,text:{field:hI},x:M.x,y:M.y,align:y,baseline:C},exit:{opacity:yt,x:M.x,y:M.y}};ti(S,{dx:!d&&h?Ar(s,b):null,dy:!p&&h?q2(s,b):null}),ti(S,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:p});let w=a("labelBound"),E=a("labelOverlap");return E=E||w?{separation:a("labelSeparation"),method:E,order:"datum.index",bound:w?{scale:c,orient:s,tolerance:w}:null}:void 0,m.align!==y&&(m.align=cf(m.align,y)),m.baseline!==C&&(m.baseline=cf(m.baseline,C)),lo({type:m0,role:lHe,style:Yp,key:Xo,from:r,encode:S,overlap:E},n)}function UAe(e,t,n,r){let i=_1(e,t),o=e.orient,a=cb(o,-1,1),s,c,l={enter:s={opacity:yt,anchor:Lr(i("titleAnchor",null)),align:{signal:yI}},update:c=_e({},s,{opacity:Qo,text:Lr(e.title)}),exit:{opacity:yt}},u={signal:`lerp(range("${e.scale}"), ${ob(0,1,.5)})`};return c.x=Ar(o,u),c.y=q2(o,u),s.angle=Ar(o,yt,IAe(a,90)),s.baseline=Ar(o,qne(o,f4,W2),{value:f4}),c.angle=s.angle,c.baseline=s.baseline,ti(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),jAe(i,o,l,n),l.update.align=cf(l.update.align,s.align),l.update.angle=cf(l.update.angle,s.angle),l.update.baseline=cf(l.update.baseline,s.baseline),lo({type:m0,role:fHe,style:mI,from:r,encode:l},n)}function jAe(e,t,n,r){let i=(s,c)=>s!=null?(n.update[c]=cf(Lr(s),n.update[c]),!1):!af(c,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?Lr(a):Ar(t,Lr(a),Lr(o))}function qAe(e,t){let n=FAe(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,c=_1(e,n),l=$Le(c),u={scale:e.scale,ticks:!!c("ticks"),labels:!!c("labels"),grid:!!c("grid"),domain:!!c("domain"),title:e.title!=null},f=Ve(t.add(G2({},[u]))),d=Ve(t.add(GHe({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),p=[],h;return u.grid&&p.push(OAe(e,n,r.grid,d,l)),u.ticks&&(h=c("tickSize"),p.push($Ae(e,n,r.ticks,d,h,l))),u.labels&&(h=u.ticks?h:0,p.push(BAe(e,n,r.labels,d,h,l))),u.domain&&p.push(RAe(e,n,r.domain,f)),u.title&&p.push(UAe(e,n,r.title,f)),sb(Wp({role:aHe,from:f,encode:uf(GAe(c,e),i,Xp),marks:p,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:o,interactive:a,style:s}),t)}function GAe(e,t){let n={enter:{},update:{}};return ti(n,{orient:e("orient"),offset:e("offset")||0,position:j2(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Wne(e,t,n){let r=te(e.signals),i=te(e.scales);return n||r.forEach(o=>Ene(o,t)),te(e.projections).forEach(o=>SLe(o,t)),i.forEach(o=>dLe(o,t)),te(e.data).forEach(o=>zAe(o,t)),i.forEach(o=>pLe(o,t)),(n||r).forEach(o=>qHe(o,t)),te(e.axes).forEach(o=>qAe(o,t)),te(e.marks).forEach(o=>sb(o,t)),te(e.legends).forEach(o=>mAe(o,t)),e.title&&MAe(e.title,t),t.parseLambdas(),t}var WAe=e=>uf({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function YAe(e,t){let n=t.config,r=Ve(t.root=t.add(JC())),i=XAe(e,n);i.forEach(l=>Ene(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;let o=t.add(G2()),a=t.add(Hne(Sne(WAe(e.encode),ib,uI,e.style,t,{pulse:Ve(o)}))),s=t.add(Vne({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Ve(a)}));t.operators.pop(),t.pushState(Ve(a),Ve(s),null),Wne(e,t,i),t.operators.push(s);let c=t.add(zne({mark:r,pulse:Ve(s)}));return c=t.add(Ane({pulse:Ve(c)})),c=t.add(h0({pulse:Ve(c)})),t.addData("root",new p0(t,o,o,c)),t}function jp(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function XAe(e,t){let n=a=>j2(e[a],t[a]),r=[jp("background",n("background")),jp("autosize",rHe(n("autosize"))),jp("padding",oHe(n("padding"))),jp("width",n("width")||0),jp("height",n("height")||0)],i=r.reduce((a,s)=>(a[s.name]=s,a),{}),o={};return te(e.signals).forEach(a=>{de(i,a.name)?a=_e(i[a.name],a):r.push(a),o[a.name]=a}),te(t.signals).forEach(a=>{!de(o,a.name)&&!de(i,a.name)&&r.push(a)}),r}function Yne(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function xne(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Yne.prototype=xne.prototype={parse(e){return Wne(e,this)},fork(){return new xne(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){let t=e instanceof nI?Ve(e):e;return this.add(aLe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let a,s;r&&(a=r.data||(r.data={}),s=a[i]||(a[i]=[]),s.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(let r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Ve(this.add(h0({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ve(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return je(this._parent)},encode(){return je(this._encode)},lookup(){return je(this._lookup)},markpath(){let e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Q(e))return qp(e,t);e.signal||B("Unsupported field reference: "+Z(e));let n=e.signal,r=this.field[n];if(!r){let i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Ve(this.add(QHe(i)))}return r},compareRef(e){let t=!1,n=o=>gr(o)?(t=!0,this.signalRef(o.signal)):THe(o)?(t=!0,this.exprRef(o.expr)):o,r=te(e.field).map(n),i=te(e.order).map(n);return t?Ve(this.add(one({fields:r,orders:i}))):rne(r,i)},keyRef(e,t){let n=!1,r=o=>gr(o)?(n=!0,Ve(i[o.signal])):o,i=this.signals;return e=te(e).map(r),n?Ve(this.add(KHe({fields:e,flat:t}))):VHe(e,t)},sortRef(e){if(!e)return e;let t=nb(e.op,e.field),n=e.order||NHe;return n.signal?Ve(this.add(one({fields:t,orders:this.signalRef(n.signal)}))):rne(t,n)},event(e,t){let n=e+":"+t;if(!this.events[n]){let r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return de(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&B("Duplicate signal name: "+Z(e));let n=t instanceof nI?t:this.add(JC(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||B("Unrecognized signal name: "+Z(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ve(this.signals[e]):(de(this.lambdas,e)||(this.lambdas[e]=this.add(JC(null))),Ve(this.lambdas[e]))},parseLambdas(){let e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){let r=e[t],i=U2(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ne(e)?e:this.signalRef(e.signal||wI(e))},exprRef(e,t){let n={expr:U2(e,this)};return t&&(n.expr.$name=t),Ve(this.add(YHe(n)))},addBinding(e,t){this.bindings||B("Nested signals do not support binding: "+Z(e)),this.bindings.push(_e({signal:e},t))},addScaleProj(e,t){de(this.scales,e)&&B("Duplicate scale or projection name: "+Z(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,cLe(t))},addProjection(e,t){this.addScaleProj(e,oLe(t))},getScale(e){return this.scales[e]||B("Unrecognized scale name: "+Z(e)),this.scales[e]},scaleRef(e){return Ve(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return de(this.data,e)&&B("Duplicate data set name: "+Z(e)),this.data[e]=t},getData(e){return this.data[e]||B("Undefined data set name: "+Z(e)),this.data[e]},addDataPipeline(e,t){return de(this.data,e)&&B("Duplicate data set name: "+Z(e)),this.addData(e,p0.fromEntries(this,t))}};function wI(e){return(F(e)?QAe:KAe)(e)}function QAe(e){let t=e.length,n="[";for(let r=0;r<t;++r){let i=e[r];n+=(r>0?",":"")+(ne(i)?i.signal||wI(i):Z(i))}return n+"]"}function KAe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Z(r)+":"+(ne(i)?i.signal||wI(i):Z(i));return t+"}"}function ZAe(){let e="sans-serif",r="#4c78a8",i="#000",o="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Xne(e,t,n){return ne(e)||B("Input Vega specification must be an object."),t=Ia(ZAe(),t,e.config),YAe(e,new Yne(t,n)).toRuntime()}var JAe="5.28.0";_e(ic,HA,IN,$N,ok,xk,sT,Qk,fT,hT,vT,CT);function eVe(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var tVe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},nVe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},rVe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e},iVe=Array.prototype.slice,g0=(e,t,n)=>{let r=n?n(t[0]):t[0];return r[e].apply(r,iVe.call(t,1))},oVe=(e,t,n,r,i,o,a)=>new Date(e,t||0,n??1,r||0,i||0,o||0,a||0),aVe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:oVe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return g0("join",arguments)},indexof:function(){return g0("indexOf",arguments)},lastindexof:function(){return g0("lastIndexOf",arguments)},slice:function(){return g0("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return g0("substring",arguments,String)},split:function(){return g0("split",arguments,String)},replace:function(){return g0("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)},sVe=["view","item","group","xy","x","y"],EI=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&EI.add(setImmediate);var cVe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{let n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:tVe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{let n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);let i=e(t.property);if(n&&(e.memberDepth-=1),EI.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{let n=t.arguments,r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||aVe[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>nVe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>rVe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;let i=e(r.key);return e.memberDepth-=1,EI.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function Qp(e,t,n,r,i,o){let a=s=>cVe[s.type](a,s);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=r,a.event=i,a.item=o,sVe.forEach(s=>a.fn[s]=function(){return i.vega[s](...arguments)}),a(e)}var Qne={operator(e,t){let n=t.ast,r=e.functions;return i=>Qp(n,r,i)},parameter(e,t){let n=t.ast,r=e.functions;return(i,o)=>Qp(n,r,o,i)},event(e,t){let n=t.ast,r=e.functions;return i=>Qp(n,r,void 0,void 0,i)},handler(e,t){let n=t.ast,r=e.functions;return(i,o)=>{let a=o.item&&o.item.datum;return Qp(n,r,i,a,o)}},encode(e,t){let{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(a,s)=>{let c=a.datum,l=0,u;for(let f in r)u=Qp(r[f].ast,i,s,c,void 0,a),a[f]!==u&&(a[f]=u,l=1);return n!=="rule"&&eVe(a,r,o),l}}};var yR={};xr(yR,{accessPathDepth:()=>v0,accessPathWithDatum:()=>Jp,compile:()=>oae,contains:()=>Ae,deepEqual:()=>Vr,deleteNestedProperty:()=>Zp,duplicate:()=>le,entries:()=>k1,every:()=>pb,fieldIntersection:()=>mb,flatAccessWithDatum:()=>AI,getFirstDefined:()=>at,hasIntersection:()=>hb,hash:()=>Me,internalField:()=>NI,isBoolean:()=>hf,isEmpty:()=>We,isEqual:()=>fVe,isInternalField:()=>ere,isNullOrFalse:()=>db,isNumeric:()=>th,keys:()=>R,logicalExpr:()=>pf,mergeDeep:()=>HI,never:()=>zI,normalize:()=>DM,normalizeAngle:()=>h4,omit:()=>In,pick:()=>Ec,prefixGenerator:()=>DI,removePathFromField:()=>eh,replaceAll:()=>Y2,replacePathInField:()=>nr,resetIdCounter:()=>pVe,setEqual:()=>LI,some:()=>os,stringify:()=>pt,titleCase:()=>p4,unique:()=>Li,uniqueId:()=>VI,vals:()=>rn,varName:()=>dt,version:()=>jIe});var Kne={name:"vega-lite",author:'Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',version:"5.16.3",collaborators:["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-Lite is a concise high-level language for interactive visualization.",keywords:["vega","chart","visualization"],main:"build/vega-lite.js",unpkg:"build/vega-lite.min.js",jsdelivr:"build/vega-lite.min.js",module:"build/src/index",types:"build/src/index.d.ts",bin:{vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},files:["bin","build","src","vega-lite*","tsconfig.json"],scripts:{changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@babel/core":"^7.22.10","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-alias":"^5.0.0","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^25.0.4","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.2.1","@rollup/plugin-terser":"^0.4.3","@types/chai":"^4.3.5","@types/d3":"^7.4.0","@types/jest":"^29.5.4","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^6.4.1","@typescript-eslint/parser":"^6.4.1",ajv:"^8.12.0","ajv-formats":"^2.1.1",chai:"^4.3.7",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.0.0",d3:"^7.8.5","del-cli":"^5.0.0",eslint:"^8.47.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.8.0",jest:"^29.6.3","jest-dev-server":"^9.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.0.2",puppeteer:"^15.0.0","release-it":"^16.1.5",rollup:"^3.28.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3",serve:"^14.2.1",terser:"^5.19.2","ts-jest":"^29.1.1","ts-json-schema-generator":"^1.3.0",typescript:"~5.2.2","vega-cli":"^5.25.0","vega-datasets":"^2.7.0","vega-embed":"^6.22.2","vega-tooltip":"^0.33.0","yaml-front-matter":"^4.1.1"},dependencies:{"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},peerDependencies:{vega:"^5.24.0"},engines:{node:">=18"}};function lb(e){return!!e.or}function ub(e){return!!e.and}function fb(e){return!!e.not}function Kp(e,t){if(fb(e))Kp(e.not,t);else if(ub(e))for(let n of e.and)Kp(n,t);else if(lb(e))for(let n of e.or)Kp(n,t);else t(e)}function d4(e,t){return fb(e)?{not:d4(e.not,t)}:ub(e)?{and:e.and.map(n=>d4(n,t))}:lb(e)?{or:e.or.map(n=>d4(n,t))}:t(e)}var le=structuredClone;function zI(e){throw new Error(e)}function Ec(e,t){let n={};for(let r of t)de(e,r)&&(n[r]=e[r]);return n}function In(e,t){let n=x({},e);for(let r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>pt(e)).join(",")})`};function Me(e){if(Pe(e))return e;let t=Q(e)?e:pt(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function db(e){return e===!1||e===null}function Ae(e,t){return e.includes(t)}function os(e,t){let n=0;for(let[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function pb(e,t){let n=0;for(let[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function HI(e,...t){for(let n of t)uVe(e,n??{});return e}function uVe(e,t){for(let n of R(t))Ys(e,n,t[n],!0)}function Li(e,t){let n=[],r={},i;for(let o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function fVe(e,t){let n=R(e),r=R(t);if(n.length!==r.length)return!1;for(let i of n)if(e[i]!==t[i])return!1;return!0}function LI(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function hb(e,t){for(let n of e)if(t.has(n))return!0;return!1}function DI(e){let t=new Set;for(let n of e){let i=ko(n).map((a,s)=>s===0?a:`[${a}]`),o=i.map((a,s)=>i.slice(0,s+1).join(""));for(let a of o)t.add(a)}return t}function mb(e,t){return e===void 0||t===void 0?!0:hb(DI(e),DI(t))}function We(e){return R(e).length===0}var R=Object.keys,rn=Object.values,k1=Object.entries;function hf(e){return e===!0||e===!1}function dt(e){let t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function pf(e,t){return fb(e)?`!(${pf(e.not,t)})`:ub(e)?`(${e.and.map(n=>pf(n,t)).join(") && (")})`:lb(e)?`(${e.or.map(n=>pf(n,t)).join(") || (")})`:t(e)}function Zp(e,t){if(t.length===0)return!0;let n=t.shift();return n in e&&Zp(e[n],t)&&delete e[n],We(e)}function p4(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Jp(e,t="datum"){let n=ko(e),r=[];for(let i=1;i<=n.length;i++){let o=`[${n.slice(0,i).map(Z).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function AI(e,t="datum"){return`${t}[${Z(ko(e).join("."))}]`}function dVe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function nr(e){return`${ko(e).map(dVe).join("\\.")}`}function Y2(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function eh(e){return`${ko(e).join(".")}`}function v0(e){return e?ko(e).length:0}function at(...e){for(let t of e)if(t!==void 0)return t}var Jne=42;function VI(e){let t=++Jne;return e?String(e)+t:t}function pVe(){Jne=42}function NI(e){return ere(e)?e:`__${e}`}function ere(e){return e.startsWith("__")}function h4(e){if(e!==void 0)return(e%360+360)%360}function th(e){return Pe(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}var Zne=Object.getPrototypeOf(structuredClone({}));function Vr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Vr(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Vr(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Zne.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Zne.toString)return e.toString()===t.toString();let i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){let o=i[r];if(!Vr(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function pt(e){let t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");let a=t.push(r)-1,s=Object.keys(r).sort();for(o="",i=0;i<s.length;i++){let c=s[i],l=n(r[c]);l&&(o&&(o+=","),o+=JSON.stringify(c)+":"+l)}return t.splice(a,1),`{${o}}`}(e)}var T1="row",I1="column",mf="facet",xt="x",on="y",F1="x2",uo="y2",Ko="xOffset",as="yOffset",Ai="radius",X2="radius2",ni="theta",Q2="theta2",ri="latitude",ii="longitude",Vi="latitude2",oi="longitude2",Fn="color",Ni="fill",_i="stroke",wn="shape",R1="size",K2="angle",s1="opacity",fo="fillOpacity",po="strokeOpacity",ho="strokeWidth",mo="strokeDash",y0="text",m4="order",x0="detail",gf="key",Dc="tooltip",vf="href",yf="url",xf="description",hVe={x:1,y:1,x2:1,y2:1},are={theta:1,theta2:1,radius:1,radius2:1};function _I(e){return e in are}var kI={longitude:1,longitude2:1,latitude:1,latitude2:1};function vb(e){switch(e){case ri:return"y";case Vi:return"y2";case ii:return"x";case oi:return"x2"}}function yb(e){return e in kI}var sre=R(kI),TI=k(x(x(x({},hVe),are),kI),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function zc(e){return e===Fn||e===Ni||e===_i}var cre={row:1,column:1,facet:1},Nr=R(cre),II=x(x({},TI),cre),lre=R(II),tre=II,{order:X6t,detail:Q6t,tooltip:K6t}=tre,ure=ie(tre,["order","detail","tooltip"]),nre=ure,{row:Z6t,column:J6t,facet:eut}=nre,fre=ie(nre,["row","column","facet"]),tut=R(ure),nut=R(fre);function dre(e){return!!fre[e]}function xb(e){return!!II[e]}var pre=[F1,uo,Vi,oi,Q2,X2];function Cb(e){return go(e)!==e}function go(e){switch(e){case F1:return xt;case uo:return on;case Vi:return ri;case oi:return ii;case Q2:return ni;case X2:return Ai}return e}function Zo(e){if(_I(e))switch(e){case ni:return"startAngle";case Q2:return"endAngle";case Ai:return"outerRadius";case X2:return"innerRadius"}return e}function _r(e){switch(e){case xt:return F1;case on:return uo;case ri:return Vi;case ii:return oi;case ni:return Q2;case Ai:return X2}}function Sn(e){switch(e){case xt:case F1:return"width";case on:case uo:return"height"}}function FI(e){switch(e){case xt:return"xOffset";case on:return"yOffset";case F1:return"x2Offset";case uo:return"y2Offset";case ni:return"thetaOffset";case Ai:return"radiusOffset";case Q2:return"theta2Offset";case X2:return"radius2Offset"}}function Cf(e){switch(e){case xt:return"xOffset";case on:return"yOffset"}}function hre(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}var mre=R(TI),rre=TI,{x:rut,y:iut,x2:out,y2:aut,xOffset:sut,yOffset:cut,latitude:lut,longitude:uut,latitude2:fut,longitude2:dut,theta:put,theta2:hut,radius:mut,radius2:gut}=rre,RI=ie(rre,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),gre=R(RI),OI={x:1,y:1},vr=R(OI);function Ct(e){return e in OI}var bb={theta:1,radius:1},vre=R(bb);function g4(e){return e==="width"?xt:on}var PI={xOffset:1,yOffset:1},vut=R(PI);function Hc(e){return e in PI}var ire=RI,{text:yut,tooltip:xut,href:Cut,url:but,description:Mut,detail:wut,key:Sut,order:Eut}=ire,yre=ie(ire,["text","tooltip","href","url","description","detail","key","order"]),xre=R(yre);function Cre(e){return!!RI[e]}function bre(e){switch(e){case Fn:case Ni:case _i:case R1:case wn:case s1:case ho:case mo:return!0;case fo:case po:case K2:return!1}}var Mre=x(x(x(x({},OI),bb),PI),yre),v4=R(Mre);function kr(e){return!!Mre[e]}function wre(e,t){return gVe(e)[t]}var Sre={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},ore=Sre,{geoshape:Dut}=ore,mVe=ie(ore,["geoshape"]);function gVe(e){switch(e){case Fn:case Ni:case _i:case xf:case x0:case gf:case Dc:case vf:case m4:case s1:case fo:case po:case ho:case mf:case T1:case I1:return Sre;case xt:case on:case Ko:case as:case ri:case ii:return mVe;case F1:case uo:case Vi:case oi:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case R1:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case mo:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case wn:return{point:"always",geoshape:"always"};case y0:return{text:"always"};case K2:return{point:"always",square:"always",text:"always"};case yf:return{image:"always"};case ni:return{text:"always",arc:"always"};case Ai:return{text:"always",arc:"always"};case Q2:case X2:return{arc:"always"}}}function Mb(e){switch(e){case xt:case on:case ni:case Ai:case Ko:case as:case R1:case K2:case ho:case s1:case fo:case po:case F1:case uo:case Q2:case X2:return;case mf:case T1:case I1:case wn:case mo:case y0:case Dc:case vf:case yf:case xf:return"discrete";case Fn:case Ni:case _i:return"flexible";case ri:case ii:case Vi:case oi:case x0:case gf:case m4:return}}var yVe={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Ere={count:1,min:1,max:1};function vo(e){return!!e&&!!e.argmin}function Jo(e){return!!e&&!!e.argmax}function bf(e){return Q(e)&&!!yVe[e]}var xVe=new Set(["count","valid","missing","distinct"]);function wb(e){return Q(e)&&xVe.has(e)}function Dre(e){return Q(e)&&Ae(["min","max"],e)}var zre=new Set(["count","sum","distinct","valid","missing"]),Hre=new Set(["mean","average","median","q1","q3","min","max"]);function Sb(e){return w1(e)&&(e=wf(e,void 0)),"bin"+R(e).map(t=>Mf(e[t])?dt(`_${t}_${k1(e[t])}`):dt(`_${t}_${e[t]}`)).join("")}function et(e){return e===!0||Z2(e)&&!e.binned}function an(e){return e==="binned"||Z2(e)&&e.binned===!0}function Z2(e){return ne(e)}function Mf(e){return e?.param}function $I(e){switch(e){case T1:case I1:case R1:case Fn:case Ni:case _i:case ho:case s1:case fo:case po:case wn:return 6;case mo:return 4;default:return 10}}function y4(e){return!!e?.expr}function rr(e){let t=R(e||{}),n={};for(let r of t)n[r]=Tr(e[r]);return n}function Eb(e){let b=e,{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:a,color:s,subtitleColor:c,subtitleFont:l,subtitleFontSize:u,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:p,subtitlePadding:h}=b,m=ie(b,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),g=x(x({},m),s?{fill:s}:{}),v=x(x(x(x(x(x({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),o!==void 0?{angle:o}:{}),a!==void 0?{limit:a}:{}),y=x(x(x(x(x(x(x({},c?{subtitleColor:c}:{}),l?{subtitleFont:l}:{}),u?{subtitleFontSize:u}:{}),f?{subtitleFontStyle:f}:{}),d?{subtitleFontWeight:d}:{}),p?{subtitleLineHeight:p}:{}),h?{subtitlePadding:h}:{}),C=Ec(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:C,nonMarkTitleProperties:v,subtitle:y}}function J2(e){return Q(e)||F(e)&&Q(e[0])}function ae(e){return!!e?.signal}function ki(e){return!!e.step}function Lre(e){return F(e)?!1:"fields"in e&&!("data"in e)}function Are(e){return F(e)?!1:"fields"in e&&"data"in e}function ea(e){return F(e)?!1:"field"in e&&"data"in e}var CVe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Vre=R(CVe),Nre={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Db=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function zb(e){let t=F(e.condition)?e.condition.map(_re):_re(e.condition);return k(x({},Tr(e)),{condition:t})}function Tr(e){if(y4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return e}function _re(e){if(y4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return e}function tt(e){if(y4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return ae(e)?e:e!==void 0?{value:e}:void 0}function kre(e){return ae(e)?e.signal:Z(e)}function BI(e){return ae(e)?e.signal:Z(e.value)}function c1(e){return ae(e)?e.signal:e==null?null:Z(e)}function Tre(e,t,n){for(let r of n){let i=yo(r,t.markDef,t.config);i!==void 0&&(e[r]=tt(i))}return e}function UI(e){return[].concat(e.type,e.style??[])}function Ue(e,t,n,r={}){let{vgChannel:i,ignoreVgConfig:o}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:yo(e,t,n,r)}function yo(e,t,n,{vgChannel:r}={}){return at(r?nh(e,t,n.style):void 0,nh(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function nh(e,t,n){return jI(e,UI(t),n)}function jI(e,t,n){t=te(t);let r;for(let i of t){let o=n[i];o&&o[e]!==void 0&&(r=o[e])}return r}function Hb(e,t){return te(e).reduce((n,r)=>(n.field.push(K(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function qI(e,t){let n=[...e];return t.forEach(r=>{for(let i of n)if(Vr(i,r))return;n.push(r)}),n}function GI(e,t){return Vr(e,t)||!t?e:e?[...te(e),...te(t)].join(", "):t}function Lb(e,t){let n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((J2(n)||ae(n))&&(J2(r)||ae(r)))return{explicit:e.explicit,value:GI(n,r)};if(J2(n)||ae(n))return{explicit:e.explicit,value:n};if(J2(r)||ae(r))return{explicit:e.explicit,value:r};if(!J2(n)&&!ae(n)&&!J2(r)&&!ae(r))return{explicit:e.explicit,value:qI(n,r)};throw new Error("It should never reach here")}var P={};xr(P,{ADD_SAME_CHILD_TWICE:()=>UVe,CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN:()=>mNe,CONCAT_CANNOT_SHARE_AXIS:()=>PVe,FACETED_INDEPENDENT_DIFFERENT_SOURCES:()=>NNe,FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES:()=>_Ne,FACETED_INDEPENDENT_SAME_SOURCE:()=>kNe,FIT_NON_SINGLE:()=>MVe,INTERVAL_INITIALIZED_WITH_POS:()=>FVe,INVALID_CHANNEL_FOR_AXIS:()=>TNe,LEGEND_BINDINGS_MUST_HAVE_PROJECTION:()=>_Ve,LINE_WITH_VARYING_SIZE:()=>iNe,MORE_THAN_ONE_SORT:()=>VNe,NEEDS_SAME_SELECTION:()=>IVe,NO_FIELDS_NEEDS_AS:()=>qVe,REPLACE_ANGLE_WITH_THETA:()=>YVe,SCALE_BINDINGS_CONTINUOUS:()=>NVe,cannotApplySizeToNonOrientedMark:()=>bNe,cannotLookupVariableParameter:()=>kVe,cannotProjectAggregate:()=>HVe,cannotProjectOnChannelWithoutField:()=>zVe,cannotStackNonLinearScale:()=>FNe,cannotStackRangedMark:()=>INe,cannotUseRelativeBandSizeWithNonBandScale:()=>vNe,cannotUseScalePropertyWithNonColor:()=>gNe,channelRequiredForBinned:()=>qNe,channelShouldBeDiscrete:()=>cNe,channelShouldBeDiscreteOrDiscretizing:()=>lNe,channelShouldNotBeUsedForBinned:()=>GNe,columnsNotSupportByRowCol:()=>OVe,containerSizeNonSingle:()=>wVe,containerSizeNotCompatibleWithAutosize:()=>SVe,customFormatTypeNotAllowed:()=>GVe,differentParse:()=>BVe,discreteChannelCannotEncode:()=>fNe,domainRequiredForThresholdScale:()=>WNe,domainSortDropped:()=>ANe,droppedDay:()=>PNe,droppingColor:()=>tNe,droppingFit:()=>EVe,emptyFieldDef:()=>rNe,errorBand1DNotSupport:()=>jNe,errorBarCenterAndExtentAreNotNeeded:()=>$Ne,errorBarCenterIsUsedWithWrongExtent:()=>BNe,errorBarContinuousAxisHasCustomizedAggregate:()=>UNe,facetChannelDropped:()=>uNe,incompatibleChannel:()=>oNe,independentScaleMeansIndependentGuide:()=>LNe,invalidAggregate:()=>JVe,invalidEncodingChannel:()=>sNe,invalidFieldType:()=>KVe,invalidFieldTypeForCountAggregate:()=>ZVe,invalidSpec:()=>bVe,invalidTimeUnit:()=>ONe,invalidTransformIgnored:()=>jVe,lineWithRange:()=>pNe,mergeConflictingDomainProperty:()=>HNe,mergeConflictingProperty:()=>zNe,missingFieldType:()=>eNe,nearestNotSupportForContinuous:()=>LVe,noSameUnitLookup:()=>TVe,noSuchRepeatedValue:()=>RVe,offsetEncodingScaleIgnored:()=>aNe,offsetNestedInsideContinuousPositionScaleDropped:()=>XVe,orientOverridden:()=>hNe,primitiveChannelDef:()=>QVe,projectionOverridden:()=>WVe,rangeMarkAlignmentCannotBeExpression:()=>dNe,relativeBandSizeNotSupported:()=>nNe,scalePropertyNotWorkWithScaleType:()=>SNe,scaleTypeNotWorkWithChannel:()=>MNe,scaleTypeNotWorkWithFieldDef:()=>wNe,scaleTypeNotWorkWithMark:()=>ENe,selectionNotFound:()=>VVe,selectionNotSupported:()=>AVe,stackNonSummativeAggregate:()=>RNe,stepDropped:()=>DNe,unaggregateDomainHasNoEffectForRawField:()=>yNe,unaggregateDomainWithNonSharedDomainOp:()=>xNe,unaggregatedDomainWithLogScale:()=>CNe,unknownField:()=>DVe,unrecognizedParse:()=>$Ve});function bVe(e){return`Invalid specification ${pt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}var MVe='Autosize "fit" only works for single views and layered views.';function wVe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function SVe(e){let t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function EVe(e){return e?`Dropping "fit-${e}" because spec has discrete ${Sn(e)}.`:'Dropping "fit" because spec has discrete size.'}function DVe(e){return`Unknown field for ${e}. Cannot calculate view size.`}function zVe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function HVe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function LVe(e){return`The "nearest" transform is not supported for ${e} marks.`}function AVe(e){return`Selection not supported for ${e} yet.`}function VVe(e){return`Cannot find a selection named "${e}".`}var NVe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",_Ve="Legend bindings are only supported for selections over an individual field or encoding channel.";function kVe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function TVe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}var IVe="The same selection must be used to override scale domains in a layered view.",FVe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function RVe(e){return`Unknown repeated value "${e}".`}function OVe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}var PVe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function $Ve(e){return`Unrecognized parse "${e}".`}function BVe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}var UVe="Attempt to add the same child twice.";function jVe(e){return`Ignoring an invalid transform: ${pt(e)}.`}var qVe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function GVe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function WVe(e){let{parentProjection:t,projection:n}=e;return`Layer's shared projection ${pt(t)} is overridden by a child projection ${pt(n)}.`}var YVe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function XVe(e){return`${e}Offset dropped because ${e} is continuous`}function QVe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${pt(n)}}.`}function KVe(e){return`Invalid field type "${e}".`}function ZVe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function JVe(e){return`Invalid aggregation operator "${e}".`}function eNe(e,t){return`Missing type for channel "${e}", using "${t}" instead.`}function tNe(e,t){let{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function nNe(e){return`Position range does not support relative band size for ${e}.`}function rNe(e,t){return`Dropping ${pt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}var iNe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function oNe(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function aNe(e){return`${e} encoding has no scale, so specified scale is ignored.`}function sNe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function cNe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function lNe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function uNe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function fNe(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function dNe(e){return`The ${e} for range marks cannot be an expression`}function pNe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function hNe(e,t){return`Specified orient "${e}" overridden with "${t}".`}var mNe="Custom domain scale cannot be unioned with default field-based domain.";function gNe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function vNe(e){return`Cannot use the relative band size with ${e} scale.`}function yNe(e){return`Using unaggregated domain with raw field has no effect (${pt(e)}).`}function xNe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function CNe(e){return`Unaggregated domain is currently unsupported for log scale (${pt(e)}).`}function bNe(e){return`Cannot apply size to non-oriented mark "${e}".`}function MNe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function wNe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function SNe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function ENe(e,t){return`Scale type "${t}" does not work with mark "${e}".`}function DNe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function zNe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${pt(n)} and ${pt(r)}). Using ${pt(n)}.`}function HNe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${pt(n)} and ${pt(r)}). Using the union of the two domains.`}function LNe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function ANe(e){return`Dropping sort property ${pt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}var VNe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",NNe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",_Ne="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",kNe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",TNe="Invalid channel for axis.";function INe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function FNe(e){return`Cannot stack non-linear scale (${e}).`}function RNe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function ONe(e,t){return`Invalid ${e}: ${pt(t)}.`}function PNe(e){return`Dropping day from datetime ${pt(e)} as day cannot be combined with other units.`}function $Ne(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function BNe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function UNe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function jNe(e){return`1D error band does not support ${e}.`}function qNe(e){return`Channel ${e} is required for "binned" bin.`}function GNe(e){return`Channel ${e} should not be used with "binned" bin.`}function WNe(e){return`Domain for ${e} is required for threshold scale.`}var YNe,Ire=Q5(iv),Sf=Ire;YNe=new WeakMap;function Fre(e){return Sf=e,Sf}function Rre(){return Sf=Ire,Sf}function U(...e){Sf.warn(...e)}function Ore(...e){Sf.debug(...e)}function e2(e){if(e&&ne(e)){for(let t of Ab)if(t in e)return!0}return!1}var Pre=["january","february","march","april","may","june","july","august","september","october","november","december"],XNe=Pre.map(e=>e.substr(0,3)),$re=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],QNe=$re.map(e=>e.substr(0,3));function KNe(e){if(th(e)&&(e=+e),Pe(e))return e>4&&U(P.invalidTimeUnit("quarter",e)),e-1;throw new Error(P.invalidTimeUnit("quarter",e))}function ZNe(e){if(th(e)&&(e=+e),Pe(e))return e-1;{let t=e.toLowerCase(),n=Pre.indexOf(t);if(n!==-1)return n;let r=t.substr(0,3),i=XNe.indexOf(r);if(i!==-1)return i;throw new Error(P.invalidTimeUnit("month",e))}}function JNe(e){if(th(e)&&(e=+e),Pe(e))return e%7;{let t=e.toLowerCase(),n=$re.indexOf(t);if(n!==-1)return n;let r=t.substr(0,3),i=QNe.indexOf(r);if(i!==-1)return i;throw new Error(P.invalidTimeUnit("day",e))}}function WI(e,t){let n=[];if(t&&e.day!==void 0&&R(e).length>1&&(U(P.droppedDay(e)),e=le(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){let r=t?ZNe(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){let r=t?KNe(e.quarter):e.quarter;n.push(Pe(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){let r=t?JNe(e.day):e.day;n.push(Pe(r)?r+1:`${r}+1`)}else n.push(1);for(let r of["hours","minutes","seconds","milliseconds"]){let i=e[r];n.push(typeof i>"u"?0:i)}return n}function ta(e){let n=WI(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Bre(e){let n=WI(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Ure(e){let t=WI(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}var jre={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Ab=R(jre);function qre(e){return!!jre[e]}var e_e={binnedyear:1,binnedyearquarter:1,binnedyearquartermonth:1,binnedyearmonth:1,binnedyearmonthdate:1,binnedyearmonthdatehours:1,binnedyearmonthdatehoursminutes:1,binnedyearmonthdatehoursminutesseconds:1,binnedyearweek:1,binnedyearweekday:1,binnedyearweekdayhours:1,binnedyearweekdayhoursminutes:1,binnedyearweekdayhoursminutesseconds:1,binnedyeardayofyear:1},t_e={binnedutcyear:1,binnedutcyearquarter:1,binnedutcyearquartermonth:1,binnedutcyearmonth:1,binnedutcyearmonthdate:1,binnedutcyearmonthdatehours:1,binnedutcyearmonthdatehoursminutes:1,binnedutcyearmonthdatehoursminutesseconds:1,binnedutcyearweek:1,binnedutcyearweekday:1,binnedutcyearweekdayhours:1,binnedutcyearweekdayhoursminutes:1,binnedutcyearweekdayhoursminutesseconds:1,binnedutcyeardayofyear:1},uft=x(x({},e_e),t_e);function na(e){return ne(e)?e.binned:Gre(e)}function Gre(e){return e&&e.startsWith("binned")}function YI(e){return e.startsWith("utc")}function n_e(e){return e.substring(3)}var r_e={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Ef(e){return Ab.filter(t=>Wre(e,t))}function XI(e){let t=Ef(e);return t[t.length-1]}function Wre(e,t){let n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Yre(e,t,{end:n}={end:!1}){let r=Jp(t),i=YI(e)?"utc":"";function o(c){return c==="quarter"?`(${i}quarter(${r})-1)`:`${i}${c}(${r})`}let a,s={};for(let c of Ab)Wre(e,c)&&(s[c]=o(c),a=c);return n&&(s[a]+="+1"),Bre(s)}function QI(e){if(!e)return;let t=Ef(e);return`timeUnitSpecifier(${pt(t)}, ${pt(r_e)})`}function Xre(e,t,n){if(!e)return;let r=QI(e);return`${n||YI(e)?"utc":"time"}Format(${t}, ${r})`}function sn(e){if(!e)return;let t;return Q(e)?Gre(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ne(e)&&(t=x(x({},e),e.unit?{unit:e.unit}:{})),YI(t.unit)&&(t.utc=!0,t.unit=n_e(t.unit)),t}function Qre(e){let r=sn(e),{utc:t}=r,n=ie(r,["utc"]);return n.unit?(t?"utc":"")+R(n).map(i=>dt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+R(n).map(i=>dt(`_${i}_${n[i]}`)).join("")}function Vb(e,t=n=>n){let n=sn(e),r=XI(n.unit);if(r&&r!=="day"){let i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:a}=KI(r,n.step),s=k(x({},i),{[a]:+i[a]+o});return`${t(ta(s))} - ${t(ta(i))}`}}var i_e={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function o_e(e){return!!i_e[e]}function KI(e,t=1){if(o_e(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Kre(e){return e?.param}function Nb(e){return!!e?.field&&e.equal!==void 0}function _b(e){return!!e?.field&&e.lt!==void 0}function kb(e){return!!e?.field&&e.lte!==void 0}function Tb(e){return!!e?.field&&e.gt!==void 0}function Ib(e){return!!e?.field&&e.gte!==void 0}function Fb(e){if(e?.field){if(F(e.range)&&e.range.length===2)return!0;if(ae(e.range))return!0}return!1}function Rb(e){return!!e?.field&&(F(e.oneOf)||F(e.in))}function a_e(e){return!!e?.field&&e.valid!==void 0}function ZI(e){return Rb(e)||Nb(e)||Fb(e)||_b(e)||Tb(e)||kb(e)||Ib(e)}function ss(e,t){return C0(e,{timeUnit:t,wrapTime:!0})}function s_e(e,t){return e.map(n=>ss(n,t))}function Ob(e,t=!0){let{field:n}=e,r=sn(e.timeUnit),{unit:i,binned:o}=r||{},a=K(e,{expr:"datum"}),s=i?`time(${o?a:Yre(i,n)})`:a;if(Nb(e))return`${s}===${ss(e.equal,i)}`;if(_b(e)){let c=e.lt;return`${s}<${ss(c,i)}`}else if(Tb(e)){let c=e.gt;return`${s}>${ss(c,i)}`}else if(kb(e)){let c=e.lte;return`${s}<=${ss(c,i)}`}else if(Ib(e)){let c=e.gte;return`${s}>=${ss(c,i)}`}else{if(Rb(e))return`indexof([${s_e(e.oneOf,i).join(",")}], ${s}) !== -1`;if(a_e(e))return rh(s,e.valid);if(Fb(e)){let{range:c}=e,l=ae(c)?{signal:`${c.signal}[0]`}:c[0],u=ae(c)?{signal:`${c.signal}[1]`}:c[1];if(l!==null&&u!==null&&t)return"inrange("+s+", ["+ss(l,i)+", "+ss(u,i)+"])";let f=[];return l!==null&&f.push(`${s} >= ${ss(l,i)}`),u!==null&&f.push(`${s} <= ${ss(u,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${pt(e)}`)}function rh(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Zre(e){return ZI(e)&&e.timeUnit?k(x({},e),{timeUnit:sn(e.timeUnit)}):e}var Df={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Jre(e){return e==="quantitative"||e==="temporal"}function Pb(e){return e==="ordinal"||e==="nominal"}var t2=Df.quantitative,ih=Df.ordinal,cs=Df.temporal,oh=Df.nominal,ra=Df.geojson,bft=R(Df);function eie(e){if(e)switch(e=e.toLowerCase(),e){case"q":case t2:return"quantitative";case"t":case cs:return"temporal";case"o":case ih:return"ordinal";case"n":case oh:return"nominal";case ra:return"geojson"}}var Ir={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},ah={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},Hft=R(ah);function nie(e,t){let n=ah[e],r=ah[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}var c_e={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function JI(e){return c_e[e]}var rie=new Set(["linear","log","pow","sqrt","symlog"]),iie=new Set([...rie,"time","utc"]);function eF(e){return rie.has(e)}var oie=new Set(["quantile","quantize","threshold"]),l_e=new Set([...iie,...oie,"sequential","identity"]),u_e=new Set(["ordinal","bin-ordinal","point","band"]);function Ft(e){return u_e.has(e)}function Rn(e){return l_e.has(e)}function O1(e){return iie.has(e)}function Lc(e){return oie.has(e)}var aie={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function sie(e){return!Q(e)&&!!e.name}function tF(e){return e?.param}function cie(e){return e?.unionWith}function lie(e){return ne(e)&&"field"in e}var uie={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},Lft=R(uie),tie=uie,{type:Aft,domain:Vft,range:Nft,rangeMax:_ft,rangeMin:kft,scheme:Tft}=tie,f_e=ie(tie,["type","domain","range","rangeMax","rangeMin","scheme"]),fie=R(f_e);function sh(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return O1(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return O1(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return O1(e);case"nice":return O1(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Rn(e)&&!Ae(["log","time","utc","threshold","quantile"],e)}}function $b(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return zc(e)?void 0:P.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function die(e,t){return Ae([ih,oh],t)?e===void 0||Ft(e):t===cs?Ae([Ir.TIME,Ir.UTC,void 0],e):t===t2?eF(e)||Lc(e)||e===void 0:!0}function pie(e,t,n=!1){if(!kr(e))return!1;switch(e){case xt:case on:case Ko:case as:case ni:case Ai:return O1(t)||t==="band"?!0:t==="point"?!n:!1;case R1:case ho:case s1:case fo:case po:case K2:return O1(t)||Lc(t)||Ae(["band","point","ordinal"],t);case Fn:case Ni:case _i:return t!=="band";case mo:case wn:return t==="ordinal"||Lc(t)}}var l1={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},nF=l1.arc,b0=l1.area,M0=l1.bar,hie=l1.image,w0=l1.line,zf=l1.point,mie=l1.rect,Hf=l1.rule,Bb=l1.text,ch=l1.tick,gie=l1.trail,lh=l1.circle,uh=l1.square,Ub=l1.geoshape;function Ti(e){return["line","area","trail"].includes(e)}function Ac(e){return["rect","bar","image","arc"].includes(e)}var vie=new Set(R(l1));function ai(e){return e.type}var d_e=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],p_e=["fill","fillOpacity"],yie=[...d_e,...p_e],h_e={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},rF=R(h_e),xie={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},Cie={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},m_e={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},jb=R(m_e);function ls(e){return e&&e.band!=null}var bie={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Mie=5,wie={binSpacing:1,continuousBandSize:Mie,minBandSize:.25,timeUnitBandPosition:.5},Sie={binSpacing:0,continuousBandSize:Mie,minBandSize:.25,timeUnitBandPosition:.5},Eie={thickness:1};function Die(e){return ai(e)?e.type:e}function Af(e){let{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,a=dh(e);return Y(n)&&!wb(n.aggregate)&&i&&O1(i.get("type"))?v_e({fieldDef:n,channel:t,markDef:r,ref:a,config:o}):a}function v_e({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Ti(n.type)?r:Ue("invalid",n,i)===null?[y_e(e,t),r]:r}function y_e(e,t){let n=fh(e,!0),i=go(t)==="y"?{field:{group:"height"}}:{value:0};return x({test:n},i)}function fh(e,t=!0){return rh(Q(e)?e:K(e,{expr:"datum"}),!t)}function zie(e){let{datum:t}=e;return e2(t)?ta(t):`${pt(t)}`}function us(e,t,n,r){let i={};if(t&&(i.scale=t),Ii(e)){let{datum:o}=e;e2(o)?i.signal=ta(o):ae(o)?i.signal=o.signal:y4(o)?i.signal=o.expr:i.value=o}else i.field=K(e,n);if(r){let{offset:o,band:a}=r;o&&(i.offset=o),a&&(i.band=a)}return i}function Lf({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:a=.5}){let s=!ae(a)&&0<a&&a<1?"datum":void 0,c=K(t,{expr:s,suffix:i}),l=n!==void 0?K(n,{expr:s}):K(t,{suffix:o,expr:s}),u={};if(a===0||a===1){u.scale=e;let f=a===0?c:l;u.field=f}else{let f=ae(a)?`(1-${a.signal}) * ${c} + ${a.signal} * ${l}`:`${1-a} * ${c} + ${a} * ${l}`;u.signal=`scale("${e}", ${f})`}return r&&(u.offset=r),u}function Hie({scaleName:e,fieldDef:t}){let n=K(t,{expr:"datum"}),r=K(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function dh({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:c,defaultRef:l,bandPosition:u}){if(t){if(Ne(t)){let f=a?.get("type");if(En(t)){u??(u=P1({fieldDef:t,fieldDef2:n,markDef:r,config:i}));let{bin:d,timeUnit:p,type:h}=t;if(et(d)||u&&p&&h===cs)return s?.impute?us(t,o,{binSuffix:"mid"},{offset:c}):u&&!Ft(f)?Lf({scaleName:o,fieldOrDatumDef:t,bandPosition:u,offset:c}):us(t,o,fs(t,e)?{binSuffix:"range"}:{},{offset:c});if(an(d)){if(Y(n))return Lf({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:u,offset:c});{let m=e===xt?F1:uo;U(P.channelRequiredForBinned(m))}}}return us(t,o,Ft(f)?{binSuffix:"range"}:{},{offset:c,band:f==="band"?u??t.bandPosition??.5:void 0})}else if(ir(t)){let f=t.value,d=c?{offset:c}:{};return x(x({},S0(e,f)),d)}}return Te(l)&&(l=l()),l&&x(x({},l),c?{offset:c}:{})}function S0(e,t){return Ae(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ae(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:tt(t)}function ds(e){return e&&e!=="number"&&e!=="time"}function Aie(e,t,n){return`${e}(${t}${n?`, ${pt(n)}`:""})`}var x_e=" \u2013 ";function Vf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){if(ds(n))return xo({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});let a=Vie(e,r,i),s=Vc(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(s==="quantitative"){if(i&&o.normalizedNumberFormatType)return xo({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return xo({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(s==="temporal"&&o.timeFormatType&&Y(e)&&e.timeUnit===void 0)return xo({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(_c(e)){let c=b_e({field:a,timeUnit:Y(e)?sn(e.timeUnit)?.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:n2(e)&&e.scale?.type===Ir.UTC});return c?{signal:c}:void 0}if(t=iF({type:s,specifiedFormat:t,config:o,normalizeStack:i}),Y(e)&&et(e.bin)){let c=K(e,{expr:r,binSuffix:"end"});return{signal:E0(a,c,t,n,o)}}else return t||Vc(e)==="quantitative"?{signal:`${Nie(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function Vie(e,t,n){return Y(e)?n?`${K(e,{expr:t,suffix:"end"})}-${K(e,{expr:t,suffix:"start"})}`:K(e,{expr:t}):zie(e)}function xo({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a??(a=Vie(e,r,i)),a!=="datum.value"&&Y(e)&&et(e.bin)){let s=K(e,{expr:r,binSuffix:"end"});return{signal:E0(a,s,t,n,o)}}return{signal:Aie(n,a,t)}}function Gb(e,t,n,r,i,o){if(!(Q(r)&&ds(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Vc(e)==="quantitative"&&(i.normalizedNumberFormatType&&Nc(e)&&e.stack==="normalize"||i.numberFormatType))){if(Nc(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return iF({type:"quantitative",config:i,normalizeStack:!0});if(_c(e)){let a=Y(e)?sn(e.timeUnit)?.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:C_e({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return iF({type:t,specifiedFormat:n,config:i})}}function Wb(e,t,n){if(e&&(ae(e)||e==="number"||e==="time"))return e;if(_c(t)&&n!=="time"&&n!=="utc")return Y(t)&&sn(t?.timeUnit)?.utc?"utc":"time"}function iF({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Q(t))return t;if(e===t2)return r?n.normalizedNumberFormat:n.numberFormat}function C_e({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:QI(t)}:r?void 0:n.timeFormat)}function Nie(e,t){return`format(${e}, "${t||""}")`}function Lie(e,t,n,r){return ds(n)?Aie(n,e,t):Nie(e,(Q(t)?t:void 0)??r.numberFormat)}function E0(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return E0(e,t,i.numberFormat,i.numberFormatType,i);let o=Lie(e,n,r,i),a=Lie(t,n,r,i);return`${rh(e,!1)} ? "null" : ${o} + "${x_e}" + ${a}`}function b_e({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Q(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):Xre(t,e,o)}var x4="min",M_e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function oF(e){return e in M_e}function Yb(e){return!!e?.encoding}function Fr(e){return e&&(e.op==="count"||!!e.field)}function Xb(e){return e&&F(e)}function ps(e){return"row"in e||"column"in e}function Qb(e){return!!e&&"header"in e}function kc(e){return"facet"in e}function _ie(e){return e.param}function kie(e){return e&&!Q(e)&&"repeat"in e}function aF(e){let{field:t,timeUnit:n,bin:r,aggregate:i}=e;return k(x(x(x({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:t})}function Zb(e){return"sort"in e}function P1({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Ne(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Y(e)){let{timeUnit:i,bin:o}=e;if(i&&!t)return yo("timeUnitBandPosition",n,r);if(et(o))return .5}}function sF({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){let s=Sn(e),c=Ue(a?"size":s,r,i,{vgChannel:s});if(c!==void 0)return c;if(Y(t)){let{timeUnit:l,bin:u}=t;if(l&&!n)return{band:yo("timeUnitBandSize",r,i)};if(et(u)&&!Ft(o))return{band:1}}if(Ac(r.type))return o?Ft(o)?i[r.type]?.discreteBandSize||{band:1}:i[r.type]?.continuousBandSize:i[r.type]?.discreteBandSize}function Jb(e,t,n,r){return et(e.bin)||e.timeUnit&&En(e)&&e.type==="temporal"?P1({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function eM(e){return e&&!!e.sort&&!e.field}function C4(e){return e&&"condition"in e}function _f(e){let t=e?.condition;return!!t&&!F(t)&&Y(t)}function b4(e){let t=e?.condition;return!!t&&!F(t)&&Ne(t)}function Tie(e){let t=e?.condition;return!!t&&(F(t)||ir(t))}function Y(e){return e&&(!!e.field||e.aggregate==="count")}function Vc(e){return e?.type}function Ii(e){return e&&"datum"in e}function ia(e){return En(e)&&!ph(e)||hh(e)}function cF(e){return En(e)&&e.type==="quantitative"&&!e.bin||hh(e)}function hh(e){return Ii(e)&&Pe(e.datum)}function Ne(e){return Y(e)||Ii(e)}function En(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function ir(e){return e&&"value"in e&&"value"in e}function n2(e){return e&&("scale"in e||"sort"in e)}function Nc(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function Iie(e){return e&&"legend"in e}function Fie(e){return e&&("format"in e||"formatType"in e)}function Rie(e){return In(e,["legend","axis","header","scale"])}function w_e(e){return"op"in e}function K(e,t={}){let n=e.field,r=t.prefix,i=t.suffix,o="";if(E_e(e))n=NI("count");else{let a;if(!t.nofn)if(w_e(e))a=e.op;else{let{bin:s,aggregate:c,timeUnit:l}=e;et(s)?(a=Sb(s),i=(t.binSuffix??"")+(t.suffix??"")):c?Jo(c)?(o=`["${n}"]`,n=`argmax_${c.argmax}`):vo(c)?(o=`["${n}"]`,n=`argmin_${c.argmin}`):a=String(c):l&&!na(l)&&(a=Qre(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}a&&(n=n?`${a}_${n}`:a)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?eh(n):t.expr?AI(n,t.expr)+o:nr(n)+o}function ph(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Y(e)&&!!e.bin;case"temporal":return!1}throw new Error(P.invalidFieldType(e.type))}function S_e(e){return n2(e)&&Lc(e.scale?.type)}function E_e(e){return e.aggregate==="count"}function D_e(e,t){let{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(et(r))return`${n} (binned)`;if(i&&!na(i)){let a=sn(i)?.unit;if(a)return`${n} (${Ef(a).join("-")})`}else if(o)return Jo(o)?`${n} for max ${o.argmax}`:vo(o)?`${n} for min ${o.argmin}`:`${p4(o)} of ${n}`;return n}function z_e(e){let{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Jo(t))return`${i} for argmax(${t.argmax})`;if(vo(t))return`${i} for argmin(${t.argmin})`;let o=r&&!na(r)?sn(r):void 0,a=t||o?.unit||o?.maxbins&&"timeunit"||et(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}var Oie=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return z_e(e);default:return D_e(e,t)}},Pie=Oie;function lF(e){Pie=e}function $ie(){lF(Oie)}function hs(e,t,{allowDisabling:n,includeDefault:r=!0}){let i=tM(e)?.title;if(!Y(e))return i??e.title;let o=e,a=r?mh(o,t):void 0;return n?at(i,o.title,a):i??o.title??a}function tM(e){if(Nc(e)&&e.axis)return e.axis;if(Iie(e)&&e.legend)return e.legend;if(Qb(e)&&e.header)return e.header}function mh(e,t){return Pie(e,t)}function kf(e){if(Fie(e)){let{format:t,formatType:n}=e;return{format:t,formatType:n}}else{let t=tM(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function H_e(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Zb(e)&&F(e.sort))return"ordinal";let{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Jo(n)&&!vo(n))return"quantitative";if(n2(e)&&e.scale?.type)switch(ah[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function si(e){if(Y(e))return e;if(_f(e))return e.condition}function _t(e){if(Ne(e))return e;if(b4(e))return e.condition}function uF(e,t,n,r={}){if(Q(e)||Pe(e)||w1(e)){let i=Q(e)?"string":Pe(e)?"number":"boolean";return U(P.primitiveChannelDef(t,i,e)),{value:e}}return Ne(e)?Kb(e,t,n,r):b4(e)?k(x({},e),{condition:Kb(e.condition,t,n,r)}):e}function Kb(e,t,n,r){if(Fie(e)){let i=e,{format:a,formatType:s}=i,c=ie(i,["format","formatType"]);if(ds(s)&&!n.customFormatTypes)return U(P.customFormatTypeNotAllowed(t)),Kb(c,t,n,r)}else{let a=Nc(e)?"axis":Iie(e)?"legend":Qb(e)?"header":null;if(a&&e[a]){let o=e[a],{format:s,formatType:c}=o,l=ie(o,["format","formatType"]);if(ds(c)&&!n.customFormatTypes)return U(P.customFormatTypeNotAllowed(t)),Kb(k(x({},e),{[a]:l}),t,n,r)}}return Y(e)?gh(e,t,r):L_e(e)}function L_e(e){let t=e.type;if(t)return e;let{datum:n}=e;return t=Pe(n)?"quantitative":Q(n)?"nominal":e2(n)?"temporal":void 0,k(x({},e),{type:t})}function gh(e,t,{compositeMark:n=!1}={}){let{aggregate:r,timeUnit:i,bin:o,field:a}=e,s=x({},e);if(!n&&r&&!bf(r)&&!Jo(r)&&!vo(r)&&(U(P.invalidAggregate(r)),delete s.aggregate),i&&(s.timeUnit=sn(i)),a&&(s.field=`${a}`),et(o)&&(s.bin=wf(o,t)),an(o)&&!Ct(t)&&U(P.channelShouldNotBeUsedForBinned(t)),En(s)){let{type:l}=s,u=eie(l);l!==u&&(s.type=u),l!=="quantitative"&&wb(r)&&(U(P.invalidFieldTypeForCountAggregate(l,r)),s.type="quantitative")}else if(!Cb(t)){let l=H_e(s,t);s.type=l}if(En(s)){let{compatible:l,warning:u}=A_e(s,t)||{};l===!1&&U(u)}if(Zb(s)&&Q(s.sort)){let{sort:l}=s;if(oF(l))return k(x({},s),{sort:{encoding:l}});let u=l.substr(1);if(l.charAt(0)==="-"&&oF(u))return k(x({},s),{sort:{encoding:u,order:"descending"}})}if(Qb(s)){let{header:l}=s;if(l){let c=l,{orient:u}=c,f=ie(c,["orient"]);if(u)return k(x({},s),{header:k(x({},f),{labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u})})}}return s}function wf(e,t){return w1(e)?{maxbins:$I(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?k(x({},e),{maxbins:$I(t)}):e}var Nf={compatible:!0};function A_e(e,t){let n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case T1:case I1:case mf:return ph(e)?Nf:{compatible:!1,warning:P.channelShouldBeDiscrete(t)};case xt:case on:case Ko:case as:case Fn:case Ni:case _i:case y0:case x0:case gf:case Dc:case vf:case yf:case K2:case ni:case Ai:case xf:return Nf;case ii:case oi:case ri:case Vi:return n!==t2?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Nf;case s1:case fo:case po:case ho:case R1:case Q2:case X2:case F1:case uo:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Nf;case wn:case mo:return!ph(e)&&!S_e(e)?{compatible:!1,warning:P.channelShouldBeDiscreteOrDiscretizing(t)}:Nf;case m4:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Nf}}function _c(e){let{formatType:t}=kf(e);return t==="time"||!t&&V_e(e)}function V_e(e){return e&&(e.type==="temporal"||Y(e)&&!!e.timeUnit)}function C0(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){let o=t&&sn(t)?.unit,a=o||n==="temporal",s;return y4(e)?s=e.expr:ae(e)?s=e.signal:e2(e)?(a=!0,s=ta(e)):(Q(e)||Pe(e))&&a&&(s=`datetime(${pt(e)})`,qre(o)&&(Pe(e)&&e<1e4||Q(e)&&isNaN(Date.parse(e)))&&(s=ta({[o]:e}))),s?r&&a?`time(${s})`:s:i?void 0:pt(e)}function nM(e,t){let{type:n}=e;return t.map(r=>{let i=Y(e)&&!na(e.timeUnit)?e.timeUnit:void 0,o=C0(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function fs(e,t){return et(e.bin)?kr(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}var fF={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Tc(e){return e?.condition}var rM=["domain","grid","labels","ticks","title"],Bie={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},dF={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Uie=k(x({},dF),{style:1,labelExpr:1,encoding:1});function pF(e){return!!Uie[e]}var N8t=R(Uie),__e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},hF=R(__e);function yr(e){return"mark"in e}var ms=class{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return yr(t)?Die(t.mark)===this.name:!1}};function gs(e,t){let n=e&&e[t];return n?F(n)?os(n,r=>!!r.field):Y(n)||_f(n):!1}function mF(e,t){let n=e&&e[t];return n?F(n)?os(n,r=>!!r.field):Y(n)||Ii(n)||b4(n):!1}function iM(e,t){if(Ct(t)){let n=e[t];if((Y(n)||Ii(n))&&(Pb(n.type)||Y(n)&&n.timeUnit)){let r=Cf(t);return mF(e,r)}}return!1}function Tf(e){return os(lre,t=>{if(gs(e,t)){let n=e[t];if(F(n))return os(n,r=>!!r.aggregate);{let r=si(n);return r&&!!r.aggregate}}return!1})}function oM(e,t){let n=[],r=[],i=[],o=[],a={};return vh(e,(s,c)=>{if(Y(s)){let l=s,{field:u,aggregate:f,bin:d,timeUnit:p}=l,h=ie(l,["field","aggregate","bin","timeUnit"]);if(f||p||d){let g=tM(s)?.title,v=K(s,{forAs:!0}),y=k(x(x({},g?[]:{title:hs(s,t,{allowDisabling:!0})}),h),{field:v});if(f){let C;if(Jo(f)?(C="argmax",v=K({op:"argmax",field:f.argmax},{forAs:!0}),y.field=`${v}.${u}`):vo(f)?(C="argmin",v=K({op:"argmin",field:f.argmin},{forAs:!0}),y.field=`${v}.${u}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(C=f),C){let b={op:C,as:v};u&&(b.field=u),o.push(b)}}else if(n.push(v),En(s)&&et(d)){if(r.push({bin:d,field:u,as:v}),n.push(K(s,{binSuffix:"end"})),fs(s,c)&&n.push(K(s,{binSuffix:"range"})),Ct(c)){let C={field:`${v}_end`};a[`${c}2`]=C}y.bin="binned",Cb(c)||(y.type=t2)}else if(p&&!na(p)){i.push({timeUnit:p,field:u,as:v});let C=En(s)&&s.type!==cs&&"time";C&&(c===y0||c===Dc?y.formatType=C:Cre(c)?y.legend=x({formatType:C},y.legend):Ct(c)&&(y.axis=x({formatType:C},y.axis)))}a[c]=y}else n.push(u),a[c]=e[c]}else a[c]=e[c]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function k_e(e,t,n){let r=wre(t,n);if(r){if(r==="binned"){let i=e[t===F1?xt:on];return!!(Y(i)&&Y(e[t])&&an(i.bin))}}else return!1;return!0}function jie(e,t,n,r){let i={};for(let o of R(e))xb(o)||U(P.invalidEncodingChannel(o));for(let o of mre){if(!e[o])continue;let a=e[o];if(Hc(o)){let s=hre(o),c=i[s];if(Y(c)&&Jre(c.type)&&Y(a)&&!c.timeUnit){U(P.offsetNestedInsideContinuousPositionScaleDropped(s));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(U(P.REPLACE_ANGLE_WITH_THETA),o=ni),!k_e(e,o,t)){U(P.incompatibleChannel(o,t));continue}if(o===R1&&t==="line"&&si(e[o])?.aggregate){U(P.LINE_WITH_VARYING_SIZE);continue}if(o===Fn&&(n?"fill"in e:"stroke"in e)){U(P.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===x0||o===m4&&!F(a)&&!ir(a)||o===Dc&&F(a)){if(a){if(o===m4){let s=e[o];if(eM(s)){i[o]=s;continue}}i[o]=te(a).reduce((s,c)=>(Y(c)?s.push(gh(c,o)):U(P.emptyFieldDef(c,o)),s),[])}}else{if(o===Dc&&a===null)i[o]=null;else if(!Y(a)&&!Ii(a)&&!ir(a)&&!C4(a)&&!ae(a)){U(P.emptyFieldDef(a,o));continue}i[o]=uF(a,o,r)}}return i}function M4(e,t){let n={};for(let r of R(e)){let i=uF(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function qie(e){let t=[];for(let n of R(e))if(gs(e,n)){let r=e[n],i=te(r);for(let o of i)Y(o)?t.push(o):_f(o)&&t.push(o.condition)}return t}function vh(e,t,n){if(e)for(let r of R(e)){let i=e[r];if(F(i))for(let o of i)t.call(n,o,r);else t.call(n,i,r)}}function Gie(e,t,n,r){return e?R(e).reduce((i,o)=>{let a=e[o];return F(a)?a.reduce((s,c)=>t.call(r,s,c,o),i):t.call(r,i,a,o)},n):n}function aM(e,t){return R(t).reduce((n,r)=>{switch(r){case xt:case on:case vf:case xf:case yf:case F1:case uo:case Ko:case as:case ni:case Q2:case Ai:case X2:case ri:case ii:case Vi:case oi:case y0:case wn:case K2:case Dc:return n;case m4:if(e==="line"||e==="trail")return n;case x0:case gf:{let i=t[r];if(F(i)||Y(i))for(let o of te(i))o.aggregate||n.push(K(o,{}));return n}case R1:if(e==="trail")return n;case Fn:case Ni:case _i:case s1:case fo:case po:case mo:case ho:{let i=si(t[r]);return i&&!i.aggregate&&n.push(K(i,{})),n}}},[])}function Wie(e){let o=e,{tooltip:t}=o,n=ie(o,["tooltip"]);if(!t)return{filteredEncoding:n};let r,i;if(F(t)){for(let a of t)a.aggregate?(r||(r=[]),r.push(a)):(i||(i=[]),i.push(a));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return F(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function yh(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};let i=e.map(({fieldPrefix:a,titlePrefix:s})=>{let c=r?` of ${cM(t)}`:"";return{field:a+t.field,type:t.type,title:ae(s)?{signal:`${s}"${escape(c)}"`}:s+c}}),o=qie(n).map(Rie);return{tooltip:[...i,...Li(o,Me)]}}function cM(e){let{title:t,field:n}=e;return at(t,n)}function If(e,t,n,r,i){let{scale:o,axis:a}=n;return({partName:s,mark:c,positionPrefix:l,endPositionPrefix:u=void 0,extraEncoding:f={}})=>{let d=cM(n);return gF(e,s,i,{mark:c,encoding:x(x(x({[t]:x(x(x({field:`${l}_${n.field}`,type:n.type},d!==void 0?{title:d}:{}),o!==void 0?{scale:o}:{}),a!==void 0?{axis:a}:{})},Q(u)?{[`${t}2`]:{field:`${u}_${n.field}`}}:{}),r),f)})}}function gF(e,t,n,r){let{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||e[t]===void 0&&n[t]?[k(x({},r),{mark:x(k(x(x(x(x(x({},n[t]),i?{clip:i}:{}),o?{color:o}:{}),a?{opacity:a}:{}),ai(r.mark)?r.mark:{type:r.mark}),{style:`${s}-${String(t)}`}),w1(e[t])?{}:e[t])})]:[]}function lM(e,t,n){let{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],c=r[`${i}Error2`];return{continuousAxisChannelDef:sM(o,n),continuousAxisChannelDef2:sM(a,n),continuousAxisChannelDefError:sM(s,n),continuousAxisChannelDefError2:sM(c,n),continuousAxis:i}}function sM(e,t){if(e?.aggregate){let n=e,{aggregate:r}=n,i=ie(n,["aggregate"]);return r!==t&&U(P.errorBarContinuousAxisHasCustomizedAggregate(r,t)),i}else return e}function uM(e,t){let{mark:n,encoding:r}=e,{x:i,y:o}=r;if(ai(n)&&n.orient)return n.orient;if(ia(i)){if(ia(o)){let a=Y(i)&&i.aggregate,s=Y(o)&&o.aggregate;if(!a&&s===t)return"vertical";if(!s&&a===t)return"horizontal";if(a===t&&s===t)throw new Error("Both x and y cannot have aggregate");return _c(o)&&!_c(i)?"horizontal":"vertical"}return"horizontal"}else{if(ia(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}var xh="boxplot",Yie=["box","median","outliers","rule","ticks"],Xie=new ms(xh,vF);function Qie(e){return Pe(e)?"tukey":e}function vF(e,{config:t}){e=k(x({},e),{encoding:M4(e.encoding,t)});let ui=e,{mark:n,encoding:r,params:i,projection:o}=ui,a=ie(ui,["mark","encoding","params","projection"]),s=ai(n)?n:{type:n};i&&U(P.selectionNotSupported("boxplot"));let c=s.extent??t.boxplot.extent,l=Ue("size",s,t),u=s.invalid,f=Qie(c),{bins:d,timeUnits:p,transform:h,continuousAxisChannelDef:m,continuousAxis:g,groupby:v,aggregate:y,encodingWithoutContinuousAxis:C,ticksOrient:b,boxOrient:M,customTooltipWithoutAggregatedField:S}=I_e(e,c,t),ha=C,{color:w,size:E}=ha,D=ie(ha,["color","size"]),z=tse=>If(s,g,m,tse,t.boxplot),H=z(D),j=z(C),L=z(x(x({},D),E?{size:E}:{})),_=yh([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,C),A={type:"tick",color:"black",opacity:1,orient:b,invalid:u,aria:!1},T=f==="min-max"?_:yh([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,C),G=[...H({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:T}),...H({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:T}),...H({partName:"ticks",mark:A,positionPrefix:"lower_whisker",extraEncoding:T}),...H({partName:"ticks",mark:A,positionPrefix:"upper_whisker",extraEncoding:T})],X=[...f!=="tukey"?G:[],...j({partName:"box",mark:k(x({type:"bar"},l?{size:l}:{}),{orient:M,invalid:u,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:_}),...L({partName:"median",mark:k(x(x({type:"tick",invalid:u},ne(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),l?{size:l}:{}),{orient:b,aria:!1}),positionPrefix:"mid_box",extraEncoding:_})];if(f==="min-max")return k(x({},a),{transform:(a.transform??[]).concat(h),layer:X});let J=`datum["lower_box_${m.field}"]`,Se=`datum["upper_box_${m.field}"]`,Ee=`(${Se} - ${J})`,Xe=`${J} - ${c} * ${Ee}`,St=`${Se} + ${c} * ${Ee}`,lt=`datum["${m.field}"]`,Jt={joinaggregate:Kie(m.field),groupby:v},ws={transform:[{filter:`(${Xe} <= ${lt}) && (${lt} <= ${St})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...y],groupby:v}],layer:G},z8=D,{tooltip:j0}=z8,N4=ie(z8,["tooltip"]),{scale:me,axis:Qe}=m,nt=cM(m),oe=In(Qe,["title"]),$r=gF(s,"outliers",t.boxplot,{transform:[{filter:`(${lt} < ${Xe}) || (${lt} > ${St})`}],mark:"point",encoding:x(x(x({[g]:x(x(x({field:m.field,type:m.type},nt!==void 0?{title:nt}:{}),me!==void 0?{scale:me}:{}),We(oe)?{}:{axis:oe})},N4),w?{color:w}:{}),S?{tooltip:S}:{})})[0],Ht,li=[...d,...p,Jt];return $r?Ht={transform:li,layer:[$r,ws]}:(Ht=ws,Ht.transform.unshift(...li)),k(x({},a),{layer:[Ht,{transform:h,layer:X}]})}function Kie(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function I_e(e,t,n){let r=uM(e,xh),{continuousAxisChannelDef:i,continuousAxis:o}=lM(e,r,xh),a=i.field,s=Qie(t),c=[...Kie(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:(s==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(s==="min-max"?"upper_whisker_":"max_")+a}],l=s==="min-max"||s==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],S=e.encoding,{[o]:u}=S,f=ie(S,[_4(o)]),{customTooltipWithoutAggregatedField:d,filteredEncoding:p}=Wie(f),{bins:h,timeUnits:m,aggregate:g,groupby:v,encoding:y}=oM(p,n),C=r==="vertical"?"horizontal":"vertical",b=r,M=[...h,...m,{aggregate:[...g,...c],groupby:v},...l];return{bins:h,timeUnits:m,transform:M,groupby:v,aggregate:g,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:y,ticksOrient:C,boxOrient:b,customTooltipWithoutAggregatedField:d}}var fM="errorbar",Jie=["ticks","rule"],e1e=new ms(fM,yF);function yF(e,{config:t}){e=k(x({},e),{encoding:M4(e.encoding,t)});let{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:c,tooltipEncoding:l}=xF(e,fM,t);delete o.size;let u=If(s,i,r,o,t.errorbar),f=s.thickness,d=s.size,p=x(x({type:"tick",orient:a,aria:!1},f!==void 0?{thickness:f}:{}),d!==void 0?{size:d}:{}),h=[...u({partName:"ticks",mark:p,positionPrefix:"lower",extraEncoding:l}),...u({partName:"ticks",mark:p,positionPrefix:"upper",extraEncoding:l}),...u({partName:"rule",mark:x({type:"rule",ariaRoleDescription:"errorbar"},f!==void 0?{size:f}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return x(k(x({},c),{transform:n}),h.length>1?{layer:h}:x({},h[0]))}function F_e(e,t){let{encoding:n}=e;if(R_e(n))return{orient:uM(e,t),inputType:"raw"};let r=O_e(n),i=P_e(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);let s=n.x2,c=n.y2;if(Ne(s)&&Ne(c))throw new Error(`${t} cannot have both x2 and y2`);if(Ne(s)){if(ia(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Ne(c)){if(ia(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{let s=n.xError,c=n.xError2,l=n.yError,u=n.yError2;if(Ne(c)&&!Ne(s))throw new Error(`${t} cannot have xError2 without xError`);if(Ne(u)&&!Ne(l))throw new Error(`${t} cannot have yError2 without yError`);if(Ne(s)&&Ne(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Ne(s)){if(ia(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Ne(l)){if(ia(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function R_e(e){return(Ne(e.x)||Ne(e.y))&&!Ne(e.x2)&&!Ne(e.y2)&&!Ne(e.xError)&&!Ne(e.xError2)&&!Ne(e.yError)&&!Ne(e.yError2)}function O_e(e){return Ne(e.x2)||Ne(e.y2)}function P_e(e){return Ne(e.xError)||Ne(e.xError2)||Ne(e.yError)||Ne(e.yError2)}function xF(e,t,n){var X,J,Se;let G=e,{mark:r,encoding:i,params:o,projection:a}=G,s=ie(G,["mark","encoding","params","projection"]),c=ai(r)?r:{type:r};o&&U(P.selectionNotSupported(t));let{orient:l,inputType:u}=F_e(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:h,continuousAxis:m}=lM(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:v,tooltipSummary:y,tooltipTitleWithFieldName:C}=$_e(c,f,d,p,h,u,t,n),Ee=i,{[m]:b,[X=m==="x"?"x2":"y2"]:M,[J=m==="x"?"xError":"yError"]:S,[Se=m==="x"?"xError2":"yError2"]:w}=Ee,E=ie(Ee,[_4(m),_4(X),_4(J),_4(Se)]),{bins:D,timeUnits:z,aggregate:H,groupby:j,encoding:L}=oM(E,n),_=[...H,...g],A=u!=="raw"?[]:j,T=yh(y,f,L,C);return{transform:[...s.transform??[],...D,...z,..._.length===0?[]:[{aggregate:_,groupby:A}],...v],groupby:A,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:L,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:s,tooltipEncoding:T}}function $_e(e,t,n,r,i,o,a,s){let c=[],l=[],u=t.field,f,d=!1;if(o==="raw"){let p=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":s.errorbar.center,h=e.extent?e.extent:p==="mean"?"stderr":"iqr";if(p==="median"!=(h==="iqr")&&U(P.errorBarCenterIsUsedWithWrongExtent(p,h,a)),h==="stderr"||h==="stdev")c=[{op:h,field:u,as:`extent_${u}`},{op:p,field:u,as:`center_${u}`}],l=[{calculate:`datum["center_${u}"] + datum["extent_${u}"]`,as:`upper_${u}`},{calculate:`datum["center_${u}"] - datum["extent_${u}"]`,as:`lower_${u}`}],f=[{fieldPrefix:"center_",titlePrefix:p4(p)},{fieldPrefix:"upper_",titlePrefix:Zie(p,h,"+")},{fieldPrefix:"lower_",titlePrefix:Zie(p,h,"-")}],d=!0;else{let m,g,v;h==="ci"?(m="mean",g="ci0",v="ci1"):(m="median",g="q1",v="q3"),c=[{op:g,field:u,as:`lower_${u}`},{op:v,field:u,as:`upper_${u}`},{op:m,field:u,as:`center_${u}`}],f=[{fieldPrefix:"upper_",titlePrefix:hs({field:u,aggregate:v,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:hs({field:u,aggregate:g,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:hs({field:u,aggregate:m,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&U(P.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${u}`},{calculate:`datum["${u}"]`,as:`lower_${u}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:u}],l=[{calculate:`datum["${u}"] + datum["${r.field}"]`,as:`upper_${u}`}],i?l.push({calculate:`datum["${u}"] + datum["${i.field}"]`,as:`lower_${u}`}):l.push({calculate:`datum["${u}"] - datum["${r.field}"]`,as:`lower_${u}`}));for(let p of l)f.push({fieldPrefix:p.as.substring(0,6),titlePrefix:Y2(Y2(p.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:c,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Zie(e,t,n){return`${p4(e)} ${n} ${t}`}var dM="errorband",t1e=["band","borders"],n1e=new ms(dM,CF);function CF(e,{config:t}){e=k(x({},e),{encoding:M4(e.encoding,t)});let{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:c}=xF(e,dM,t),l=a,u=If(l,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0,d={type:f?"area":"rect"},p={type:f?"line":"rule"},h=x(x({},l.interpolate?{interpolate:l.interpolate}:{}),l.tension&&l.interpolate?{tension:l.tension}:{});return f?(d=k(x(x({},d),h),{ariaRoleDescription:"errorband"}),p=k(x(x({},p),h),{aria:!1})):l.interpolate?U(P.errorBand1DNotSupport("interpolate")):l.tension&&U(P.errorBand1DNotSupport("tension")),k(x({},s),{transform:n,layer:[...u({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c}),...u({partName:"borders",mark:p,positionPrefix:"lower",extraEncoding:c}),...u({partName:"borders",mark:p,positionPrefix:"upper",extraEncoding:c})]})}var r1e={};function bF(e,t,n){let r=new ms(e,t);r1e[e]={normalizer:r,parts:n}}function i1e(){return R(r1e)}bF(xh,vF,Yie);bF(fM,yF,Jie);bF(dM,CF,t1e);var o1e=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"];var MF={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},wF={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},a1e=R(MF),s1e=R(wF),B_e={header:1,headerRow:1,headerColumn:1,headerFacet:1},SF=R(B_e);var pM=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],c1e={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},EF={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},F5t=R(EF);var ci="_vgsid_",l1e={point:{on:"click",fields:[ci],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Ch(e){return e==="legend"||!!e?.legend}function hM(e){return Ch(e)&&ne(e)}function Ff(e){return!!e?.select}function mM(e){let t=[];for(let r of e||[]){if(Ff(r))continue;let n=r,{expr:i,bind:o}=n,a=ie(n,["expr","bind"]);if(o&&i){let s=k(x({},a),{bind:o,init:i});t.push(s)}else{let s=x(x(x({},a),i?{update:i}:{}),o?{bind:o}:{});t.push(s)}}return t}function DF(e){return w4(e)||Rf(e)||bh(e)}function bh(e){return"concat"in e}function w4(e){return"vconcat"in e}function Rf(e){return"hconcat"in e}function zF({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function $1(e){return ne(e)&&e.step!==void 0}function HF(e){return e.view||e.width||e.height}var LF=20,U_e={align:1,bounds:1,center:1,columns:1,spacing:1},j_e=R(U_e);function u1e(e,t,n){let r=n[t],i={},{spacing:o,columns:a}=r;o!==void 0&&(i.spacing=o),a!==void 0&&(kc(e)&&!ps(e.facet)||bh(e))&&(i.columns=a),w4(e)&&(i.columns=1);for(let s of j_e)if(e[s]!==void 0)if(s==="spacing"){let c=e[s];i[s]=Pe(c)?c:{row:c.row??o,column:c.column??o}}else i[s]=e[s];return i}function Mh(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function D0(e,t){let n=Of(e,t);return $1(n)?n.step:p1e}function Of(e,t){let n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return at(n,{step:e.step})}var p1e=20,q_e={continuousWidth:200,continuousHeight:200,step:p1e};var G_e={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:q_e,mark:Cie,arc:{},area:{},bar:wie,circle:{},geoshape:{},image:{},line:{},point:{},rect:Sie,rule:{color:"black"},square:{},text:{color:"black"},tick:Eie,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:aie,projection:{},legend:c1e,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:l1e,style:{},title:{},facet:{spacing:LF},concat:{spacing:LF},normalizedNumberFormat:".0%"},Ic=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],f1e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},d1e={blue:Ic[0],orange:Ic[1],red:Ic[2],teal:Ic[3],green:Ic[4],yellow:Ic[5],purple:Ic[6],pink:Ic[7],brown:Ic[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function W_e(e={}){return{signals:[{name:"color",value:ne(e)?x(x({},d1e),e):d1e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Y_e(e){return{signals:[{name:"fontSize",value:ne(e)?x(x({},f1e),e):f1e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function X_e(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function h1e(e){let t=R(e||{}),n={};for(let r of t){let i=e[r];n[r]=Tc(i)?zb(i):Tr(i)}return n}function Q_e(e){let t=R(e),n={};for(let r of t)n[r]=h1e(e[r]);return n}var K_e=[...jb,...hF,...SF,"background","padding","legend","lineBreak","scale","style","title","view"];function gM(e={}){let c=e,{color:t,font:n,fontSize:r,selection:i}=c,o=ie(c,["color","font","fontSize","selection"]),a=Ia({},le(G_e),n?X_e(n):{},t?W_e(t):{},r?Y_e(r):{},o||{});i&&Ys(a,"selection",i,!0);let s=In(a,K_e);for(let l of["background","lineBreak","padding"])a[l]&&(s[l]=Tr(a[l]));for(let l of jb)a[l]&&(s[l]=rr(a[l]));for(let l of hF)a[l]&&(s[l]=h1e(a[l]));for(let l of SF)a[l]&&(s[l]=rr(a[l]));return a.legend&&(s.legend=rr(a.legend)),a.scale&&(s.scale=rr(a.scale)),a.style&&(s.style=Q_e(a.style)),a.title&&(s.title=rr(a.title)),a.view&&(s.view=rr(a.view)),s}var Z_e=new Set(["view",...vie]),J_e=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],eke=x({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},xie);function m1e(e){e=le(e);for(let t of J_e)delete e[t];if(e.axis)for(let t in e.axis)Tc(e.axis[t])&&delete e.axis[t];if(e.legend)for(let t of o1e)delete e.legend[t];if(e.mark){for(let t of rF)delete e.mark[t];e.mark.tooltip&&ne(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(mM(e.params)),delete e.params);for(let t of Z_e){for(let r of rF)delete e[t][r];let n=eke[t];if(n)for(let r of n)delete e[t][r];nke(e,t)}for(let t of i1e())delete e[t];tke(e);for(let t in e)ne(e[t])&&We(e[t])&&delete e[t];return We(e)?void 0:e}function tke(e){let{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=Eb(e.title);We(t)||(e.style["group-title"]=x(x({},e.style["group-title"]),t)),We(n)||(e.style["group-subtitle"]=x(x({},e.style["group-subtitle"]),n)),We(r)?delete e.title:e.title=r}function nke(e,t,n,r){let i=r?e[t][r]:e[t];t==="view"&&(n="cell");let o=x(x({},i),e.style[n??t]);We(o)||(e.style[n??t]=o),r||delete e[t]}function Fc(e){return"layer"in e}function AF(e){return"repeat"in e}function g1e(e){return!F(e.repeat)&&e.repeat.layer}var S4=class{map(t,n){return kc(t)?this.mapFacet(t,n):AF(t)?this.mapRepeat(t,n):Rf(t)?this.mapHConcat(t,n):w4(t)?this.mapVConcat(t,n):bh(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Fc(t))return this.mapLayer(t,n);if(yr(t))return this.mapUnit(t,n);throw new Error(P.invalidSpec(t))}mapLayer(t,n){return k(x({},t),{layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))})}mapHConcat(t,n){return k(x({},t),{hconcat:t.hconcat.map(r=>this.map(r,n))})}mapVConcat(t,n){return k(x({},t),{vconcat:t.vconcat.map(r=>this.map(r,n))})}mapConcat(t,n){let o=t,{concat:r}=o,i=ie(o,["concat"]);return k(x({},i),{concat:r.map(a=>this.map(a,n))})}mapFacet(t,n){return k(x({},t),{spec:this.map(t.spec,n)})}mapRepeat(t,n){return k(x({},t),{spec:this.map(t.spec,n)})}};var rke={zero:1,center:1,normalize:1};function ike(e){return e in rke}var oke=new Set([nF,M0,b0,Hf,zf,lh,uh,w0,Bb,ch]),ake=new Set([M0,b0,nF]);function Pf(e){return Y(e)&&Vc(e)==="quantitative"&&!e.bin}function v1e(e,t,{orient:n,type:r}){let i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),a=e[t],s=e[i];if(Y(a)&&Y(s))if(Pf(a)&&Pf(s)){if(a.stack)return t;if(s.stack)return i;let c=Y(a)&&!!a.aggregate,l=Y(s)&&!!s.aggregate;if(c!==l)return c?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Pf(a))return t;if(Pf(s))return i}else{if(Pf(a))return o&&n==="vertical"?void 0:t;if(Pf(s))return o&&n==="horizontal"?void 0:i}}function ske(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function vM(e,t){let n=ai(e)?e:{type:e},r=n.type;if(!oke.has(r))return null;let i=v1e(t,"x",n)||v1e(t,"theta",n);if(!i)return null;let o=t[i],a=Y(o)?K(o,{}):void 0,s=ske(i),c=[],l=new Set;if(t[s]){let m=t[s],g=Y(m)?K(m,{}):void 0;g&&g!==a&&(c.push(s),l.add(g))}let u=s==="x"?"xOffset":"yOffset",f=t[u],d=Y(f)?K(f,{}):void 0;d&&d!==a&&(c.push(u),l.add(d));let p=gre.reduce((m,g)=>{if(g!=="tooltip"&&gs(t,g)){let v=t[g];for(let y of te(v)){let C=si(y);if(C.aggregate)continue;let b=K(C,{});(!b||!l.has(b))&&m.push({channel:g,fieldDef:C})}}return m},[]),h;return o.stack!==void 0?w1(o.stack)?h=o.stack?"zero":null:h=o.stack:ake.has(r)&&(h="zero"),!h||!ike(h)||Tf(t)&&p.length===0?null:o?.scale?.type&&o?.scale?.type!==Ir.LINEAR?(o?.stack&&U(P.cannotStackNonLinearScale(o.scale.type)),null):Ne(t[_r(i)])?(o.stack!==void 0&&U(P.cannotStackRangedMark(i)),null):(Y(o)&&o.aggregate&&!zre.has(o.aggregate)&&U(P.stackNonSummativeAggregate(o.aggregate)),{groupbyChannels:c,groupbyFields:l,fieldChannel:i,impute:o.impute===null?!1:Ti(r),stackBy:p,offset:h})}function yM(e,t,n){let r=rr(e),i=Ue("orient",r,n);if(r.orient=uke(r.type,t,i),i!==void 0&&i!==r.orient&&U(P.orientOverridden(r.orient,i)),r.type==="bar"&&r.orient){let s=Ue("cornerRadiusEnd",r,n);if(s!==void 0){let c=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:bie[r.orient];for(let l of c)r[l]=s;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}return Ue("opacity",r,n)===void 0&&(r.opacity=lke(r.type,t)),Ue("cursor",r,n)===void 0&&(r.cursor=cke(r,t,n)),r}function cke(e,t,n){return t.href||e.href||Ue("href",e,n)?"pointer":e.cursor}function lke(e,t){if(Ae([zf,ch,lh,uh],e)&&!Tf(t))return .7}function y1e(e,t,{graticule:n}){if(n)return!1;let r=yo("filled",e,t),i=e.type;return at(r,i!==zf&&i!==w0&&i!==Hf)}function uke(e,t,n){switch(e){case zf:case lh:case uh:case Bb:case mie:case hie:return}let{x:r,y:i,x2:o,y2:a}=t;switch(e){case M0:if(Y(r)&&(an(r.bin)||Y(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Y(i)&&(an(i.bin)||Y(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o)return(Y(r)&&r.type===t2&&!et(r.bin)||hh(r))&&Y(i)&&an(i.bin)?"horizontal":"vertical";if(!a)return(Y(i)&&i.type===t2&&!et(i.bin)||hh(i))&&Y(r)&&an(r.bin)?"vertical":"horizontal"}case Hf:if(o&&!(Y(r)&&an(r.bin))&&a&&!(Y(i)&&an(i.bin)))return;case b0:if(a)return Y(i)&&an(i.bin)?"horizontal":"vertical";if(o)return Y(r)&&an(r.bin)?"vertical":"horizontal";if(e===Hf){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case w0:case ch:{let s=cF(r),c=cF(i);if(n)return n;if(s&&!c)return e!=="tick"?"horizontal":"vertical";if(!s&&c)return e!=="tick"?"vertical":"horizontal";if(s&&c)return"vertical";{let l=En(r)&&r.type===cs,u=En(i)&&i.type===cs;if(l&&!u)return"vertical";if(!l&&u)return"horizontal"}return}}return"vertical"}function fke(e){let i=e,{point:t,line:n}=i,r=ie(i,["point","line"]);return R(r).length>1?r:r.type}function dke(e){for(let t of["line","area","rule","trail"])e[t]&&(e=k(x({},e),{[t]:In(e[t],["point","line"])}));return e}function VF(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ne(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ne(t.point)?t.point:{}:void 0}function x1e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}var xM=class{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(yr(t)){let{mark:r,encoding:i}=t,o=ai(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!VF(o,n[o.type],i);case"area":return!!VF(o,n[o.type],i)||!!x1e(o,n[o.type])}}return!1}run(t,n,r){let{config:i}=n,y=t,{params:o,projection:a,mark:s,name:c,encoding:l}=y,u=ie(y,["params","projection","mark","name","encoding"]),f=M4(l,i),d=ai(s)?s:{type:s},p=VF(d,i[d.type],f),h=d.type==="area"&&x1e(d,i[d.type]),m=[k(x({name:c},o?{params:o}:{}),{mark:fke(x(x({},d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{}),d)),encoding:In(f,["shape"])})],g=vM(yM(d,f,i),f),v=f;if(g){let{fieldChannel:C,offset:b}=g;v=k(x({},f),{[C]:x(x({},f[C]),b?{stack:b}:{})})}return v=In(v,["y2","x2"]),h&&m.push(k(x({},a?{projection:a}:{}),{mark:x(x({type:"line"},Ec(d,["clip","interpolate","tension","tooltip"])),h),encoding:v})),p&&m.push(k(x({},a?{projection:a}:{}),{mark:x(x({type:"point",opacity:1,filled:!0},Ec(d,["clip","tooltip"])),p),encoding:v})),r(k(x({},u),{layer:m}),k(x({},n),{config:dke(i)}))}};function M1e(e,t){return t?ps(e)?S1e(e,t):w1e(e,t):e}function CM(e,t){return t?S1e(e,t):e}function NF(e,t,n){let r=t[e];if(kie(r)){if(r.repeat in n)return k(x({},t),{[e]:n[r.repeat]});U(P.noSuchRepeatedValue(r.repeat));return}return t}function w1e(e,t){if(e=NF("field",e,t),e!==void 0){if(e===null)return null;if(Zb(e)&&Fr(e.sort)){let n=NF("field",e.sort,t);e=x(x({},e),n?{sort:n}:{})}return e}}function C1e(e,t){if(Y(e))return w1e(e,t);{let n=NF("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function b1e(e,t){if(Ne(e)){let r=C1e(e,t);if(r)return r;if(C4(e))return{condition:e.condition}}else{if(b4(e)){let r=C1e(e.condition,t);if(r)return k(x({},e),{condition:r});{let n=e,{condition:i}=n;return ie(n,["condition"])}}return e}}function S1e(e,t){let n={};for(let r in e)if(de(e,r)){let i=e[r];if(F(i))n[r]=i.map(o=>b1e(o,t)).filter(o=>o);else{let o=b1e(i,t);o!==void 0&&(n[r]=o)}}return n}var bM=class{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(yr(t)){let{encoding:n,mark:r}=t;if(r==="line"||ai(r)&&r.type==="line")for(let i of pre){let o=go(i),a=n[o];if(n[i]&&(Y(a)&&!an(a.bin)||Ii(a)))return!0}}return!1}run(t,n,r){let{encoding:i,mark:o}=t;return U(P.lineWithRange(!!i.x2,!!i.y2)),r(k(x({},t),{mark:ne(o)?k(x({},o),{type:"rule"}):"rule"}),n)}};var MM=class extends S4{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Xie,e1e,n1e,new xM,new bM]}map(t,n){if(yr(t)){let r=gs(t.encoding,T1),i=gs(t.encoding,I1),o=gs(t.encoding,mf);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){let{parentEncoding:r,parentProjection:i}=n,o=CM(t.encoding,n.repeater),a=x(x(x({},t),t.name?{name:[n.repeaterPrefix,t.name].filter(c=>c).join("_")}:{}),o?{encoding:o}:{});if(r||i)return this.mapUnitWithParentEncodingOrProjection(a,n);let s=this.mapLayerOrUnit.bind(this);for(let c of this.nonFacetUnitNormalizers)if(c.hasMatchingType(a,n.config))return c.run(a,n,s);return a}mapRepeat(t,n){return g1e(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){let f=t,{repeat:r,spec:i}=f,o=ie(f,["repeat","spec"]),{row:a,column:s,layer:c}=r,{repeater:l={},repeaterPrefix:u=""}=n;return a||s?this.mapRepeat(k(x({},t),{repeat:x(x({},a?{row:a}:{}),s?{column:s}:{}),spec:{repeat:{layer:c},spec:i}}),n):k(x({},o),{layer:c.map(d=>{let p=k(x({},l),{layer:d}),h=`${(i.name?`${i.name}_`:"")+u}child__layer_${dt(d)}`,m=this.mapLayerOrUnit(i,k(x({},n),{repeater:p,repeaterPrefix:h}));return m.name=h,m})})}mapNonLayerRepeat(t,n){let h=t,{repeat:r,spec:i,data:o}=h,a=ie(h,["repeat","spec","data"]);!F(r)&&t.columns&&(t=In(t,["columns"]),U(P.columnsNotSupportByRowCol("repeat")));let s=[],{repeater:c={},repeaterPrefix:l=""}=n,u=!F(r)&&r.row||[c?c.row:null],f=!F(r)&&r.column||[c?c.column:null],d=F(r)&&r||[c?c.repeat:null];for(let m of d)for(let g of u)for(let v of f){let y={repeat:m,row:g,column:v,layer:c.layer},C=(i.name?`${i.name}_`:"")+l+"child__"+(F(r)?`${dt(m)}`:(r.row?`row_${dt(g)}`:"")+(r.column?`column_${dt(v)}`:"")),b=this.map(i,k(x({},n),{repeater:y,repeaterPrefix:C}));b.name=C,s.push(In(b,["data"]))}let p=F(r)?t.columns:r.column?r.column.length:1;return k(x({data:i.data??o,align:"all"},a),{columns:p,concat:s})}mapFacet(t,n){let{facet:r}=t;return ps(r)&&t.columns&&(t=In(t,["columns"]),U(P.columnsNotSupportByRowCol("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){let{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:a,config:s}=n,c=D1e({parentProjection:a,projection:i}),l=E1e({parentEncoding:o,encoding:CM(r,n.repeater)});return this.mapUnit(x(x(x({},t),c?{projection:c}:{}),l?{encoding:l}:{}),{config:s})}mapFacetedUnit(t,n){let y=t.encoding,{row:r,column:i,facet:o}=y,a=ie(y,["row","column","facet"]),C=t,{mark:s,width:c,projection:l,height:u,view:f,params:d,encoding:p}=C,h=ie(C,["mark","width","projection","height","view","params","encoding"]),{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),v=CM(a,n.repeater);return this.mapFacet(k(x(x({},h),g),{facet:m,spec:x(k(x(x(x(x({},c?{width:c}:{}),u?{height:u}:{}),f?{view:f}:{}),l?{projection:l}:{}),{mark:s,encoding:v}),d?{params:d}:{})}),n)}getFacetMappingAndLayout(t,n){let{row:r,column:i,facet:o}=t;if(r||i){o&&U(P.facetChannelDropped([...r?[T1]:[],...i?[I1]:[]]));let c={},l={};for(let u of[T1,I1]){let f=t[u];if(f){let a=f,{align:d,center:p,spacing:h,columns:m}=a,g=ie(a,["align","center","spacing","columns"]);c[u]=g;for(let v of["align","center","spacing"])f[v]!==void 0&&(l[v]??(l[v]={}),l[v][u]=f[v])}}return{facetMapping:c,layout:l}}else{let s=o,{align:c,center:l,spacing:u,columns:f}=s,d=ie(s,["align","center","spacing","columns"]);return{facetMapping:M1e(d,n.repeater),layout:x(x(x(x({},c?{align:c}:{}),l?{center:l}:{}),u?{spacing:u}:{}),f?{columns:f}:{})}}}mapLayer(t,o){var a=o,{parentEncoding:n,parentProjection:r}=a,i=ie(a,["parentEncoding","parentProjection"]);let f=t,{encoding:s,projection:c}=f,l=ie(f,["encoding","projection"]),u=k(x({},i),{parentEncoding:E1e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:D1e({parentProjection:r,projection:c})});return super.mapLayer(x(x({},l),t.name?{name:[u.repeaterPrefix,t.name].filter(d=>d).join("_")}:{}),u)}};function E1e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){let i=new Set([...R(e),...R(t)]);for(let o of i){let a=t[o],s=e[o];if(Ne(a)){let c=x(x({},s),a);r[o]=c}else b4(a)?r[o]=k(x({},a),{condition:x(x({},s),a.condition)}):a||a===null?r[o]=a:(n||ir(s)||ae(s)||Ne(s)||F(s))&&(r[o]=s)}}else r=t;return!r||We(r)?void 0:r}function D1e(e){let{parentProjection:t,projection:n}=e;return t&&n&&U(P.projectionOverridden({parentProjection:t,projection:n})),n??t}function wh(e){return"filter"in e}function z1e(e){return e?.stop!==void 0}function wM(e){return"lookup"in e}function H1e(e){return"data"in e}function L1e(e){return"param"in e}function A1e(e){return"pivot"in e}function V1e(e){return"density"in e}function N1e(e){return"quantile"in e}function _1e(e){return"regression"in e}function k1e(e){return"loess"in e}function T1e(e){return"sample"in e}function I1e(e){return"window"in e}function F1e(e){return"joinaggregate"in e}function R1e(e){return"flatten"in e}function O1e(e){return"calculate"in e}function SM(e){return"bin"in e}function P1e(e){return"impute"in e}function $1e(e){return"timeUnit"in e}function B1e(e){return"aggregate"in e}function U1e(e){return"stack"in e}function j1e(e){return"fold"in e}function q1e(e){return"extent"in e&&!("density"in e)}function G1e(e){return e.map(t=>wh(t)?{filter:d4(t.filter,Zre)}:t)}var EM=class extends S4{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=W1e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=W1e(t,n),t.encoding){let r={};for(let[i,o]of k1(t.encoding))r[i]=Y1e(o,n);t=k(x({},t),{encoding:r})}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){let o=t,{selection:r}=o,i=ie(o,["selection"]);return r?k(x({},i),{params:k1(r).map(([a,s])=>{let d=s,{init:c,bind:l,empty:u}=d,f=ie(d,["init","bind","empty"]);f.type==="single"?(f.type="point",f.toggle=!1):f.type==="multi"&&(f.type="point"),n.emptySelections[a]=u!=="none";for(let p of rn(n.selectionPredicates[a]??{}))p.empty=u!=="none";return{name:a,value:c,select:f,bind:l}})}):t}};function W1e(e,t){let i=e,{transform:n}=i,r=ie(i,["transform"]);if(n){let o=n.map(a=>{if(wh(a))return{filter:_F(a,t)};if(SM(a)&&Z2(a.bin))return k(x({},a),{bin:X1e(a.bin)});if(wM(a)){let s=a.from,{selection:c}=s,l=ie(s,["selection"]);return c?k(x({},a),{from:x({param:c},l)}):a}return a});return k(x({},r),{transform:o})}return e}function Y1e(e,t){let n=le(e);if(Y(n)&&Z2(n.bin)&&(n.bin=X1e(n.bin)),n2(n)&&n.scale?.domain?.selection){let r=n.scale.domain,{selection:o}=r,a=ie(r,["selection"]);n.scale.domain=x(x({},a),o?{param:o}:{})}if(C4(n))if(F(n.condition))n.condition=n.condition.map(o=>{let u=o,{selection:a,param:s,test:c}=u,l=ie(u,["selection","param","test"]);return s?o:k(x({},l),{test:_F(o,t)})});else{let i=Y1e(n.condition,t),{selection:o,param:a,test:s}=i,c=ie(i,["selection","param","test"]);n.condition=a?n.condition:k(x({},c),{test:_F(n.condition,t)})}return n}function X1e(e){let t=e.extent;if(t?.selection){let n=t,{selection:r}=n,i=ie(n,["selection"]);return k(x({},e),{extent:k(x({},i),{param:r})})}return e}function _F(e,t){let n=r=>d4(r,i=>{var o;let a=t.emptySelections[i]??!0,s={param:i,empty:a};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(s),s});return e.selection?n(e.selection):d4(e.test||e.filter,r=>r.selection?n(r.selection):r)}var $f=class extends S4{map(t,n){let r=n.selections??[];if(t.params&&!yr(t)){let i=[];for(let o of t.params)Ff(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){let r=n.selections;if(!r||!r.length)return t;let i=(n.path??[]).concat(t.name),o=[];for(let a of r)if(!a.views||!a.views.length)o.push(a);else for(let s of a.views)(Q(s)&&(s===t.name||i.includes(s))||F(s)&&s.map(c=>i.indexOf(c)).every((c,l,u)=>c!==-1&&(l===0||c>u[l-1])))&&o.push(a);return o.length&&(t.params=o),t}};for(let e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){let t=$f.prototype[e];$f.prototype[e]=function(n,r){return t.call(this,n,pke(n,r))}}function pke(e,t){return e.name?k(x({},t),{path:(t.path??[]).concat(e.name)}):t}function DM(e,t){t===void 0&&(t=gM(e.config));let n=vke(e,t),{width:r,height:i}=e,o=yke(n,{width:r,height:i,autosize:e.autosize},t);return x(x({},n),o?{autosize:o}:{})}var hke=new MM,mke=new EM,gke=new $f;function vke(e,t={}){let n={config:t};return gke.map(hke.map(mke.map(e,n),n),n)}function Q1e(e){return Q(e)?{type:e}:e??{}}function yke(e,t,n){let{width:r,height:i}=t,o=yr(e)||Fc(e),a={};o?r=="container"&&i=="container"?(a.type="fit",a.contains="padding"):r=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(r=="container"&&(U(P.containerSizeNonSingle("width")),r=void 0),i=="container"&&(U(P.containerSizeNonSingle("height")),i=void 0));let s=x(x(x({type:"pad"},a),n?Q1e(n.autosize):{}),Q1e(e.autosize));if(s.type==="fit"&&!o&&(U(P.FIT_NON_SINGLE),s.type="pad"),r=="container"&&!(s.type=="fit"||s.type=="fit-x")&&U(P.containerSizeNotCompatibleWithAutosize("width")),i=="container"&&!(s.type=="fit"||s.type=="fit-y")&&U(P.containerSizeNotCompatibleWithAutosize("height")),!Vr(s,{type:"pad"}))return s}function K1e(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function Z1e(e){return e?`fit-${g4(e)}`:"fit"}var xke=["background","padding"];function kF(e,t){let n={};for(let r of xke)e&&e[r]!==void 0&&(n[r]=Tr(e[r]));return t&&(n.params=e.params),n}var Fi=class e{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new e(le(this.explicit),le(this.implicit))}combine(){return x(x({},this.explicit),this.implicit)}get(t){return at(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(let n of R(t.combine())){let r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}};function r2(e){return{explicit:!0,value:e}}function Ri(e){return{explicit:!1,value:e}}function zM(e){return(t,n,r,i)=>{let o=e(t.value,n.value);return o>0?t:o<0?n:Bf(t,n,r,i)}}function Bf(e,t,n,r){return e.explicit&&t.explicit&&U(P.mergeConflictingProperty(n,r,e.value,t.value)),e}function B1(e,t,n,r,i=Bf){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Vr(e.value,t.value)?e:i(e,t,n,r)}var HM=class extends Fi{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){let t=super.clone();return t.parseNothing=this.parseNothing,t}};function Rc(e){return"url"in e}function z0(e){return"values"in e}function LM(e){return"name"in e&&!Rc(e)&&!z0(e)&&!oa(e)}function oa(e){return e&&(TF(e)||IF(e)||Sh(e))}function TF(e){return"sequence"in e}function IF(e){return"sphere"in e}function Sh(e){return"graticule"in e}var bt=function(e){return e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e}(bt||{});function FF(e){let o=e,{signals:t,hasLegend:n,index:r}=o,i=ie(o,["signals","hasLegend","index"]);return i.field=nr(i.field),i}function Oc(e,t=!0,n=An){if(F(e)){let r=e.map(i=>Oc(i,t,n));return t?`[${r.join(", ")}]`:r}else if(e2(e))return n(t?ta(e):Ure(e));return t?n(pt(e)):e}function J1e(e,t){for(let n of rn(e.component.selection??{})){let r=n.name,i=`${r}${u1}, ${n.resolve==="global"?"true":`{unit: ${sa(e)}}`}`;for(let o of Uf)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+ooe,on:[{events:{signal:n.name+u1},update:`modify(${Z(n.name+aa)}, ${i})`}]})}return OF(t)}function eoe(e,t){if(e.component.selection&&R(e.component.selection).length){let n=Z(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Hi("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return OF(t)}function toe(e,t){let n=!1;for(let r of rn(e.component.selection??{})){let i=r.name,o=Z(i+aa);if(t.filter(s=>s.name===i).length===0){let s=r.resolve==="global"?"union":r.resolve,c=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${AM}(${o}, ${Z(s)}${c}`})}n=!0;for(let s of Uf)s.defined(r)&&s.topLevelSignals&&(t=s.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),OF(t)}function noe(e,t){let n=[...t],r=sa(e,{escape:!1});for(let i of rn(e.component.selection??{})){let o={name:i.name+aa};if(i.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:ci}}]),i.init){let s=i.project.items.map(FF);o.values=i.project.hasSelectionId?i.init.map(c=>({unit:r,[ci]:Oc(c,!1)[0]})):i.init.map(c=>({unit:r,fields:s,values:Oc(c,!1)}))}n.filter(s=>s.name===i.name+aa).length||n.push(o)}return n}function RF(e,t){for(let n of rn(e.component.selection??{}))for(let r of Uf)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function roe(e,t){for(let n of e.children)Mt(n)&&(t=RF(n,t));return t}function ioe(e,t,n,r){let i=VM(e,t.param,t);return{signal:Rn(n.get("type"))&&F(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function OF(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}var Le=class{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){U(P.ADD_SAME_CHILD_TWICE);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){let n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(let n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){let n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){let t=this._parent,n=t.parent;for(let i of this._children)i.parent=t;this._children=[],t.removeChild(this);let r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}},Dn=class extends Le{clone(){let t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${VI()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}};function PF(e){return e.as!==void 0}function aoe(e){return`${e}_end`}var i2=class e extends Le{clone(){return new e(null,le(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){let r=n.reduceFieldDef((i,o,a)=>{let{field:s,timeUnit:c}=o;if(c){let l;if(na(c)){if(Mt(n)){let{mark:u,markDef:f,config:d}=n,p=P1({fieldDef:o,markDef:f,config:d});(Ac(u)||p)&&(l={timeUnit:sn(c),field:s})}}else l={as:K(o,{forAs:!0}),field:s,timeUnit:c};if(Mt(n)){let{mark:u,markDef:f,config:d}=n,p=P1({fieldDef:o,markDef:f,config:d});Ac(u)&&Ct(a)&&p!==.5&&(l.rectBandPosition=p)}l&&(i[Me(l)]=l)}return i},{});return We(r)?null:new e(t,r)}static makeFromTransform(t,n){let s=x({},n),{timeUnit:r}=s,i=ie(s,["timeUnit"]),o=sn(r),a=k(x({},i),{timeUnit:o});return new e(t,{[Me(a)]:a})}merge(t){this.timeUnits=x({},this.timeUnits);for(let n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(let n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){let n={};for(let[r,i]of k1(this.timeUnits)){let o=PF(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(rn(this.timeUnits).map(t=>PF(t)?t.as:aoe(t.field)))}dependentFields(){return new Set(rn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Me(this.timeUnits)}`}assemble(){let t=[];for(let r of rn(this.timeUnits)){let{rectBandPosition:i}=r,o=sn(r.timeUnit);if(PF(r)){let{field:a,as:s}=r,n=o,{unit:c,utc:l}=n,u=ie(n,["unit","utc"]),f=[s,`${s}_end`];t.push(k(x(x(x({field:nr(a),type:"timeunit"},c?{units:Ef(c)}:{}),l?{timezone:"utc"}:{}),u),{as:f})),t.push(...soe(f,i,o))}else if(r){let{field:a}=r,s=a.replaceAll("\\.","."),c=loe({timeUnit:o,field:s}),l=aoe(s);t.push({type:"formula",expr:c,as:l}),t.push(...soe([s,l],i,o))}}return t}},H0="offsetted_rect_start",L0="offsetted_rect_end";function loe({timeUnit:e,field:t,reverse:n}){let{unit:r,utc:i}=e,o=XI(r),{part:a,step:s}=KI(o,e.step);return`${i?"utcOffset":"timeOffset"}('${a}', datum['${t}'], ${n?-s:s})`}function soe([e,t],n,r){if(n!==void 0&&n!==.5){let i=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:coe([loe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${H0}`},{type:"formula",expr:coe([i,o],n+.5),as:`${e}_${L0}`}]}return[]}function coe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}var Pc="_tuple_fields",$F=class{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}},Cke={defined:()=>!0,parse:(e,t,n)=>{let r=t.name,i=t.project??(t.project=new $F),o={},a={},s=new Set,c=(h,m)=>{let g=m==="visual"?h.channel:h.field,v=dt(`${r}_${g}`);for(let y=1;s.has(v);y++)v=dt(`${r}_${g}_${y}`);return s.add(v),{[m]:v}},l=t.type,u=e.config.selection[l],f=n.value!==void 0?te(n.value):null,{fields:d,encodings:p}=ne(n.select)?n.select:{};if(!d&&!p&&f){for(let h of f)if(ne(h))for(let m of R(h))dre(m)?(p||(p=[])).push(m):l==="interval"?(U(P.INTERVAL_INITIALIZED_WITH_POS),p=u.encodings):(d??(d=[])).push(m)}!d&&!p&&(p=u.encodings,"fields"in u&&(d=u.fields));for(let h of p??[]){let m=e.fieldDef(h);if(m){let g=m.field;if(m.aggregate){U(P.cannotProjectAggregate(h,m.aggregate));continue}else if(!g){U(P.cannotProjectOnChannelWithoutField(h));continue}if(m.timeUnit&&!na(m.timeUnit)){g=e.vgField(h);let v={timeUnit:m.timeUnit,as:g,field:m.field};a[Me(v)]=v}if(!o[g]){let v=l==="interval"&&kr(h)&&Rn(e.getScaleComponent(h).get("type"))?"R":m.bin?"R-RE":"E",y={field:g,channel:h,type:v,index:i.items.length};y.signals=x(x({},c(y,"data")),c(y,"visual")),i.items.push(o[g]=y),i.hasField[g]=o[g],i.hasSelectionId=i.hasSelectionId||g===ci,yb(h)?(y.geoChannel=h,y.channel=vb(h),i.hasChannel[y.channel]=o[g]):i.hasChannel[h]=o[g]}}else U(P.cannotProjectOnChannelWithoutField(h))}for(let h of d??[]){if(i.hasField[h])continue;let m={type:"E",field:h,index:i.items.length};m.signals=x({},c(m,"data")),i.items.push(m),i.hasField[h]=m,i.hasSelectionId=i.hasSelectionId||h===ci}f&&(t.init=f.map(h=>i.items.map(m=>ne(h)?h[m.geoChannel||m.channel]!==void 0?h[m.geoChannel||m.channel]:h[m.field]:h))),We(a)||(i.timeUnit=new i2(null,a))},signals:(e,t,n)=>{let r=t.name+Pc;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(FF)})}},uoe=Cke;var bke={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{let n=t.scales=[];for(let r of t.project.items){let i=r.channel;if(!kr(i))continue;let o=e.getScaleComponent(i),a=o?o.get("type"):void 0;if(!o||!Rn(a)){U(P.SCALE_BINDINGS_CONTINUOUS);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{let r=t.scales.filter(a=>n.filter(s=>s.name===a.signals.data).length===0);if(!e.parent||foe(e)||r.length===0)return n;let i=n.filter(a=>a.name===t.name)[0],o=i.update;if(o.indexOf(AM)>=0)i.update=`{${r.map(a=>`${Z(nr(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(let a of r){let s=`${Z(nr(a.field))}: ${a.signals.data}`;o.includes(s)||(o=`${o.substring(0,o.length-1)}, ${s}}`)}i.update=o}return n.concat(r.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!foe(e))for(let r of t.scales){let i=n.filter(o=>o.name===r.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}},Co=bke;function Eh(e,t){return`domain(${Z(e.scaleName(t))})`}function foe(e){return e.parent&&o2(e.parent)&&!e.parent.parent}var $c="_brush",doe="_scale_trigger",Dh="geo_interval_init_tick",poe="_init",Mke="_center",wke={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){let i=x({},ne(n.select)?n.select:{});i.fields=[ci],i.encodings||(i.encodings=n.value?R(n.value):[ii,ri]),n.select=x({type:"interval"},i)}if(t.translate&&!Co.defined(t)){let i=`!event.item || event.item.mark.name !== ${Z(t.name+$c)}`;for(let o of t.events){if(!o.between){U(`${o} is not an ordered event stream for interval selections.`);continue}let a=te((r=o.between[0]).filter??(r.filter=[]));a.indexOf(i)<0&&a.push(i)}}},signals:(e,t,n)=>{let r=t.name,i=r+u1,o=rn(t.project.hasChannel).filter(s=>s.channel===xt||s.channel===on),a=t.init?t.init[0]:null;if(n.push(...o.reduce((s,c)=>s.concat(Ske(e,t,c,a&&a[c.index])),[])),e.hasProjection){let s=Z(e.projectionName()),c=e.projectionName()+Mke,{x:l,y:u}=t.project.hasChannel,f=l&&l.signals.visual,d=u&&u.signals.visual,p=l?a&&a[l.index]:`${c}[0]`,h=u?a&&a[u.index]:`${c}[1]`,m=M=>e.getSizeSignalRef(M).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;a&&(n.unshift({name:r+poe,init:`[scale(${s}, [${l?p[0]:p}, ${u?h[0]:h}]), scale(${s}, [${l?p[1]:p}, ${u?h[1]:h}])]`}),(!l||!u)&&(n.find(S=>S.name===c)||n.unshift({name:c,update:`invert(${s}, [${m("width")}/2, ${m("height")}/2])`})));let v=`intersect(${g}, {markname: ${Z(e.getName("marks"))}}, unit.mark)`,y=`{unit: ${sa(e)}}`,C=`vlSelectionTuples(${v}, ${y})`,b=o.map(M=>M.signals.visual);return n.concat({name:i,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...a?[{signal:Dh}]:[]],update:C}]})}else{if(!Co.defined(t)){let l=r+doe,u=o.map(f=>{let d=f.channel,{data:p,visual:h}=f.signals,m=Z(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),v=Rn(g)?"+":"";return`(!isArray(${p}) || (${v}invert(${m}, ${h})[0] === ${v}${p}[0] && ${v}invert(${m}, ${h})[1] === ${v}${p}[1]))`});u.length&&n.push({name:l,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:u.join(" && ")+` ? ${l} : {}`}]})}let s=o.map(l=>l.signals.data),c=`unit: ${sa(e)}, fields: ${r+Pc}, values`;return n.concat(x(x({name:i},a?{init:`{${c}: ${Oc(a)}}`}:{}),s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${c}: [${s}]} : null`}]}:{}))}},topLevelSignals:(e,t,n)=>(Mt(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===Dh).length||n.unshift({name:Dh,value:null,on:[{events:"timer{1}",update:`${Dh} === null ? {} : ${Dh}`}]})),n),marks:(e,t,n)=>{let r=t.name,{x:i,y:o}=t.project.hasChannel,a=i?.signals.visual,s=o?.signals.visual,c=`data(${Z(t.name+aa)})`;if(Co.defined(t)||!i&&!o)return n;let l={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:o!==void 0?{signal:`${s}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${s}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(let g of R(l))l[g]=[x({test:`${c}.length && ${c}[0].unit === ${sa(e)}`},l[g]),{value:0}];let m=t.mark,{fill:u,fillOpacity:f,cursor:d}=m,p=ie(m,["fill","fillOpacity","cursor"]),h=R(p).reduce((g,v)=>(g[v]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,o!==void 0&&`${s}[0] !== ${s}[1]`].filter(y=>y).join(" && "),value:p[v]},{value:null}],g),{});return[{name:`${r+$c}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:u},fillOpacity:{value:f}},update:l}},...n,{name:r+$c,type:"rect",clip:!0,encode:{enter:k(x({},d?{cursor:{value:d}}:{}),{fill:{value:"transparent"}}),update:x(x({},l),h)}}]}},hoe=wke;function Ske(e,t,n,r){let i=!e.hasProjection,o=n.channel,a=n.signals.visual,s=Z(i?e.scaleName(o):e.projectionName()),c=d=>`scale(${s}, ${d})`,l=e.getSizeSignalRef(o===xt?"width":"height").signal,u=`${o}(unit)`,f=t.events.reduce((d,p)=>[...d,{events:p.between[0],update:`[${u}, ${u}]`},{events:p,update:`[${a}[0], clamp(${u}, 0, ${l})]`}],[]);if(i){let d=n.signals.data,p=Co.defined(t),h=e.getScaleComponent(o),m=h?h.get("type"):void 0,g=r?{init:Oc(r,!0,c)}:{value:[]};return f.push({events:{signal:t.name+doe},update:Rn(m)?`[${c(`${d}[0]`)}, ${c(`${d}[1]`)}]`:"[0, 0]"}),p?[{name:d,on:[]}]:[k(x({name:a},g),{on:f}),k(x({name:d},r?{init:Oc(r)}:{}),{on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${s}, ${a})`}]})]}else{let d=o===xt?0:1,p=t.name+poe,h=r?{init:`[${p}[0][${d}], ${p}[1][${d}]]`}:{value:[]};return[k(x({name:a},h),{on:f})]}}var Eke={defined:e=>e.type==="point",signals:(e,t,n)=>{let r=t.name,i=r+Pc,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=rn(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+$c):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),c=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${s?` && ${s}`:""}`,l=`unit: ${sa(e)}, `;if(t.project.hasSelectionId)l+=`${ci}: ${a}[${Z(ci)}]`;else{let f=o.items.map(d=>e.fieldDef(d.channel)?.bin?`[${a}[${Z(e.vgField(d.channel,{}))}], ${a}[${Z(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${a}[${Z(d.field)}]`).join(", ");l+=`fields: ${i}, values: [${f}]`}let u=t.events;return n.concat([{name:r+u1,on:u?[{events:u,update:`${c} ? {${l}} : null`,force:!0}]:[]}])}},moe=Eke;function U1(e,t,n,r){let i=C4(t)&&t.condition,o=r(t);if(i){let s=te(i).map(c=>{let l=r(c);if(_ie(c)){let{param:u,empty:f}=c,d=NM(e,{param:u,empty:f});return x({test:d},l)}else{let u=A0(e,c.test);return x({test:u},l)}});return{[n]:[...s,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function E4(e,t="text"){let n=e.encoding[t];return U1(e,n,t,r=>jf(r,e.config))}function jf(e,t,n="datum"){if(e){if(ir(e))return tt(e.value);if(Ne(e)){let{format:r,formatType:i}=kf(e);return Vf({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function qf(e,t={}){let{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if(F(a))return{tooltip:BF({tooltip:a},o,i,t)};{let s=t.reactiveGeom?"datum.datum":"datum";return U1(e,a,"tooltip",c=>{let l=jf(c,i,s);if(l)return l;if(c===null)return;let u=Ue("tooltip",r,i);if(u===!0&&(u={content:"encoding"}),Q(u))return{value:u};if(ne(u))return ae(u)?u:u.content==="encoding"?BF(n,o,i,t):{signal:s}})}}function UF(e,t,n,{reactiveGeom:r}={}){let i=x(x({},n),n.tooltipFormat),o={},a=r?"datum.datum":"datum",s=[];function c(u,f){let d=go(f),p=En(u)?u:k(x({},u),{type:e[d].type}),h=p.title||mh(p,i),m=te(h).join(", ").replaceAll(/"/g,'\\"'),g;if(Ct(f)){let v=f==="x"?"x2":"y2",y=si(e[v]);if(an(p.bin)&&y){let C=K(p,{expr:a}),b=K(y,{expr:a}),{format:M,formatType:S}=kf(p);g=E0(C,b,M,S,i),o[v]=!0}}if((Ct(f)||f===ni||f===Ai)&&t&&t.fieldChannel===f&&t.offset==="normalize"){let{format:v,formatType:y}=kf(p);g=Vf({fieldOrDatumDef:p,format:v,formatType:y,expr:a,config:i,normalizeStack:!0}).signal}g??(g=jf(p,i,a).signal),s.push({channel:f,key:m,value:g})}vh(e,(u,f)=>{Y(u)?c(u,f):_f(u)&&c(u.condition,f)});let l={};for(let{channel:u,key:f,value:d}of s)!o[u]&&!l[f]&&(l[f]=d);return l}function BF(e,t,n,{reactiveGeom:r}={}){let i=UF(e,t,n,{reactiveGeom:r}),o=k1(i).map(([a,s])=>`"${a}": ${s}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function jF(e){let{markDef:t,config:n}=e,r=Ue("aria",t,n);return r===!1?{}:x(x(x({},r?{aria:r}:{}),Dke(e)),zke(e))}function Dke(e){let{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};let i=Ue("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in Nre?{}:{ariaRoleDescription:{value:t}}}function zke(e){let{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return U1(e,o,"description",c=>jf(c,e.config));let a=Ue("description",n,r);if(a!=null)return{description:tt(a)};if(r.aria===!1)return{};let s=UF(t,i,r);if(!We(s))return{description:{signal:k1(s).map(([c,l],u)=>`"${u>0?"; ":""}${c}: " + (${l})`).join(" + ")}}}function Bt(e,t,n={}){let{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n,{defaultRef:s,defaultValue:c}=n;s===void 0&&(c??(c=Ue(e,r,o,{vgChannel:a,ignoreVgConfig:!0})),c!==void 0&&(s=tt(c)));let l=i[e];return U1(t,l,a??e,u=>dh({channel:e,channelDef:u,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s}))}function Gf(e,t={filled:void 0}){let{markDef:n,encoding:r,config:i}=e,{type:o}=n,a=t.filled??Ue("filled",n,i),s=Ae(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,c=Ue(a===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[a===!0&&"color"]??s,l=Ue(a===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[a===!1&&"color"],u=a?"fill":"stroke",f=x(x({},c?{fill:tt(c)}:{}),l?{stroke:tt(l)}:{});return n.color&&(a?n.fill:n.stroke)&&U(P.droppingColor("property",{fill:"fill"in n,stroke:"stroke"in n})),x(x(x(x({},f),Bt("color",e,{vgChannel:u,defaultValue:a?c:l})),Bt("fill",e,{defaultValue:r.fill?c:void 0})),Bt("stroke",e,{defaultValue:r.stroke?l:void 0}))}function goe(e){let{encoding:t,mark:n}=e,r=t.order;return!Ti(n)&&ir(r)?U1(e,r,"zindex",i=>tt(i.value)):{}}function Bc({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){let o=`${e}Offset`,a=t[o],s=n[o];if((o==="xOffset"||o==="yOffset")&&s)return{offsetType:"encoding",offset:dh({channel:o,channelDef:s,markDef:t,config:r?.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:tt(a),bandPosition:i})};let c=t[o];return c?{offsetType:"visual",offset:c}:{}}function Cn(e,t,{defaultPos:n,vgChannel:r}){let{encoding:i,markDef:o,config:a,stack:s}=t,c=i[e],l=i[_r(e)],u=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:p}=Bc({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),h=zh({model:t,defaultPos:n,channel:e,scaleName:u,scale:f}),m=!c&&Ct(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Hke({channel:e,channelDef:c,channel2Def:l,markDef:o,config:a,scaleName:u,scale:f,stack:s,offset:d,defaultRef:h,bandPosition:p==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function Hke(e){let{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(Ne(n)&&i&&t===i.fieldChannel){if(Y(n)){let s=n.bandPosition;if(s===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(s=.5),s!==void 0)return Lf({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:s,offset:o})}return us(n,r,{suffix:"end"},{offset:o})}return Af(e)}function zh({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){let{markDef:o,config:a}=e;return()=>{let s=go(n),c=Zo(n),l=Ue(n,o,a,{vgChannel:c});if(l!==void 0)return S0(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){let u=i.get("type");if(!Ae([Ir.LOG,Ir.TIME,Ir.UTC],u)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return s==="y"?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{let u=e[Sn(n)];return k(x({},u),{mult:.5})}}}}var Lke={left:"x",center:"xc",right:"x2"},Ake={top:"y",middle:"yc",bottom:"y2"};function _M(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Zo(e);let i=e==="x"?"align":"baseline",o=Ue(i,t,n),a;return ae(o)?(U(P.rangeMarkAlignmentCannotBeExpression(i)),a=void 0):a=o,e==="x"?Lke[a||(r==="top"?"left":"center")]:Ake[a||r]}function D4(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Hh(e,t,{defaultPos:n,defaultPos2:r}):Cn(e,t,{defaultPos:n})}function Hh(e,t,{defaultPos:n,defaultPos2:r}){let{markDef:i,config:o}=t,a=_r(e),s=Sn(e),c=Vke(t,r,a),l=c[s]?_M(e,i,o):Zo(e);return x(x({},Cn(e,t,{defaultPos:n,vgChannel:l})),c)}function Vke(e,t,n){let{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,c=go(n),l=Sn(n),u=Zo(n),f=r[c],d=e.scaleName(c),p=e.getScaleComponent(c),{offset:h}=n in r||n in o?Bc({channel:n,markDef:o,encoding:r,model:e}):Bc({channel:c,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){let g=Sn(n),v=e.markDef[g];return v!=null?{[g]:{value:v}}:{[u]:{field:e.getName(n)}}}let m=Nke({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:s,scaleName:d,scale:p,stack:a,offset:h,defaultRef:void 0});return m!==void 0?{[u]:m}:kM(n,o)||kM(n,{[n]:nh(n,o,s.style),[l]:nh(l,o,s.style)})||kM(n,s[i])||kM(n,s.mark)||{[u]:zh({model:e,defaultPos:t,channel:n,scaleName:d,scale:p})()}}function Nke({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:c,defaultRef:l}){return Ne(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?us(t,o,{suffix:"start"},{offset:c}):Af({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:c,defaultRef:l})}function kM(e,t){let n=Sn(e),r=Zo(e);if(t[r]!==void 0)return{[r]:S0(e,t[r])};if(t[e]!==void 0)return{[r]:S0(e,t[e])};if(t[n]){let i=t[n];if(ls(i))U(P.relativeBandSizeNotSupported(n));else return{[n]:S0(e,i)}}}function j1(e,t){let{config:n,encoding:r,markDef:i}=e,o=i.type,a=_r(t),s=Sn(t),c=r[t],l=r[a],u=e.getScaleComponent(t),f=u?u.get("type"):void 0,d=i.orient,p=r[s]??r.size??Ue("size",i,n,{vgChannel:s}),h=FI(t),m=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Y(c)&&(et(c.bin)||an(c.bin)||c.timeUnit&&!l)&&!(p&&!ls(p))&&!r[h]&&!Ft(f)?Tke({fieldDef:c,fieldDef2:l,channel:t,model:e}):(Ne(c)&&Ft(f)||m)&&!l?kke(c,t,e):Hh(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function _ke(e,t,n,r,i,o,a){if(ls(i))if(n){let c=n.get("type");if(c==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);let u=yo("minBandSize",{type:a},r);return{signal:u?`max(${c1(u)}, ${l})`:l}}else i.band!==1&&(U(P.cannotUseRelativeBandSizeWithNonBandScale(c)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(ae(i))return i;if(i)return{value:i}}if(n){let c=n.get("range");if(ki(c)&&Pe(c.step))return{value:c.step-2}}if(!o){let{bandPaddingInner:c,barBandPaddingInner:l,rectBandPaddingInner:u}=r.scale,f=at(c,a==="bar"?l:u);if(ae(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Pe(f))return{signal:`${1-f} * ${e}`}}return{value:D0(r.view,e)-2}}function kke(e,t,n){let{markDef:r,encoding:i,config:o,stack:a}=n,s=r.orient,c=n.scaleName(t),l=n.getScaleComponent(t),u=Sn(t),f=_r(t),d=FI(t),p=n.scaleName(d),h=n.getScaleComponent(Cf(t)),m=s==="horizontal"&&t==="y"||s==="vertical"&&t==="x",g;(i.size||r.size)&&(m?g=Bt("size",n,{vgChannel:u,defaultRef:tt(r.size)}):U(P.cannotApplySizeToNonOrientedMark(r.type)));let v=!!g,y=sF({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(l||h)?.get("type"),useVlSizeChannel:m});g=g||{[u]:_ke(u,p||c,h||l,o,y,!!e,r.type)};let C=(l||h)?.get("type")==="band"&&ls(y)&&!v?"top":"middle",b=_M(t,r,o,C),M=b==="xc"||b==="yc",{offset:S,offsetType:w}=Bc({channel:t,markDef:r,encoding:i,model:n,bandPosition:M?.5:0}),E=Af({channel:t,channelDef:e,markDef:r,config:o,scaleName:c,scale:l,stack:a,offset:S,defaultRef:zh({model:n,defaultPos:"mid",channel:t,scaleName:c,scale:l}),bandPosition:M?w==="encoding"?0:.5:ae(y)?{signal:`(1-${y})/2`}:ls(y)?(1-y.band)/2:0});if(u)return x({[b]:E},g);{let D=Zo(f),z=g[u],H=S?k(x({},z),{offset:S}):z;return{[b]:E,[D]:F(E)?[E[0],k(x({},E[1]),{offset:H})]:k(x({},E),{offset:H})}}}function voe(e,t,n,r,i,o,a){if(_I(e))return 0;let s=e==="x"||e==="y2",c=s?-t/2:t/2;if(ae(n)||ae(i)||ae(r)||o){let l=c1(n),u=c1(i),f=c1(r),d=c1(o),h=o?`(${a} < ${d} ? ${s?"":"-"}0.5 * (${d} - (${a})) : ${c})`:c,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",v=u?`(${u} + ${h})`:h;return{signal:m+g+v}}else return i=i||0,r+(n?-i-c:+i+c)}function Tke({fieldDef:e,fieldDef2:t,channel:n,model:r}){let{config:i,markDef:o,encoding:a}=r,s=r.getScaleComponent(n),c=r.scaleName(n),l=s?s.get("type"):void 0,u=s.get("reverse"),f=sF({channel:n,fieldDef:e,markDef:o,config:i,scaleType:l}),p=r.component.axes[n]?.[0]?.get("translate")??.5,h=Ct(n)?Ue("binSpacing",o,i)??0:0,m=_r(n),g=Zo(n),v=Zo(m),y=yo("minBandSize",o,i),{offset:C}=Bc({channel:n,markDef:o,encoding:a,model:r,bandPosition:0}),{offset:b}=Bc({channel:m,markDef:o,encoding:a,model:r,bandPosition:0}),M=Hie({fieldDef:e,scaleName:c}),S=voe(n,h,u,p,C,y,M),w=voe(m,h,u,p,b??C,y,M),E=ae(f)?{signal:`(1-${f.signal})/2`}:ls(f)?(1-f.band)/2:.5,D=P1({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(et(e.bin)||e.timeUnit){let z=e.timeUnit&&D!==.5;return{[v]:yoe({fieldDef:e,scaleName:c,bandPosition:E,offset:w,useRectOffsetField:z}),[g]:yoe({fieldDef:e,scaleName:c,bandPosition:ae(E)?{signal:`1-${E.signal}`}:1-E,offset:S,useRectOffsetField:z})}}else if(an(e.bin)){let z=us(e,c,{},{offset:w});if(Y(t))return{[v]:z,[g]:us(t,c,{},{offset:S})};if(Z2(e.bin)&&e.bin.step)return{[v]:z,[g]:{signal:`scale("${c}", ${K(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}U(P.channelRequiredForBinned(m))}function yoe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return Lf(x({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r},i?{startSuffix:H0,endSuffix:L0}:{}))}var Ike=new Set(["aria","width","height"]);function bn(e,t){let{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Gf(e):{};return x(x(x(x(x(x(x(x(x(x(x(x({},Fke(e.markDef,t)),xoe(e,"fill",n)),xoe(e,"stroke",r)),Bt("opacity",e)),Bt("fillOpacity",e)),Bt("strokeOpacity",e)),Bt("strokeWidth",e)),Bt("strokeDash",e)),goe(e)),qf(e)),E4(e,"href")),jF(e))}function xoe(e,t,n){let{config:r,mark:i,markDef:o}=e;if(Ue("invalid",o,r)==="hide"&&n&&!Ti(i)){let s=Rke(e,{invalid:!0,channels:v4});if(s)return{[t]:[{test:s,value:null},...te(n)]}}return n?{[t]:n}:{}}function Fke(e,t){return Vre.reduce((n,r)=>(!Ike.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=tt(e[r])),n),{})}function Rke(e,{invalid:t=!1,channels:n}){let r=n.reduce((o,a)=>{let s=e.getScaleComponent(a);if(s){let c=s.get("type"),l=e.vgField(a,{expr:"datum"});l&&Rn(c)&&(o[l]=!0)}return o},{}),i=R(r);if(i.length>0){let o=t?"||":"&&";return i.map(a=>fh(a,t)).join(` ${o} `)}}function Wf(e){let{config:t,markDef:n}=e;if(Ue("invalid",n,t)){let i=Oke(e,{channels:vr});if(i)return{defined:{signal:i}}}return{}}function Oke(e,{invalid:t=!1,channels:n}){let r=n.reduce((o,a)=>{let s=e.getScaleComponent(a);if(s){let c=s.get("type"),l=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});l&&Rn(c)&&(o[l]=!0)}return o},{}),i=R(r);if(i.length>0){let o=t?"||":"&&";return i.map(a=>fh(a,t)).join(` ${o} `)}}function TM(e,t){if(t!==void 0)return{[e]:tt(t)}}var qF="voronoi",Pke={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(let n of t.events)n.markname=e.getName(qF)},marks:(e,t,n)=>{let{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Ti(o))return U(P.nearestNotSupportForContinuous(o)),n;let a={name:e.getName(qF),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:x({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},qf(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},s=0,c=!1;return n.forEach((l,u)=>{let f=l.name??"";f===e.component.mark[0].name?s=u:f.indexOf(qF)>=0&&(c=!0)}),c||n.splice(s+1,0,a),n}},IM=Pke;var $ke={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Ch(e.bind),parse:(e,t,n)=>RM(t,n),topLevelSignals:(e,t,n)=>{let r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],s=IM.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((c,l)=>{let u=dt(`${r}_${c.field}`);n.filter(d=>d.name===u).length||n.unshift(k(x({name:u},a?{init:Oc(a[l])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${Z(c.field)}] : null`}]:[],bind:o[c.field]??o[c.channel]??o}))}),n},signals:(e,t,n)=>{let r=t.name,i=t.project,o=n.filter(l=>l.name===r+u1)[0],a=r+Pc,s=i.items.map(l=>dt(`${r}_${l.field}`)),c=s.map(l=>`${l} !== null`).join(" && ");return s.length&&(o.update=`${c} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},FM=$ke;var Yf="_toggle",Bke={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Yf,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{let n=t.name+u1,r=t.name+Yf;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${sa(e)}}, `)+`${r} ? ${n} : null`}},OM=Bke;var Uke={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Q(t.clear)?Hi(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(FM.defined(t))for(let r of t.project.items){let i=n.findIndex(o=>o.name===dt(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(let i of t.project.items){let o=n.findIndex(a=>a.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){let a=n.findIndex(s=>s.name===i.signals.data);r(a,"null")}}else{let i=n.findIndex(o=>o.name===t.name+u1);r(i,"null"),OM.defined(t)&&(i=n.findIndex(o=>o.name===t.name+Yf),r(i,"false"))}return n}},Coe=Uke;var boe={defined:e=>{let t=e.resolve==="global"&&e.bind&&Ch(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ci;return t&&!n&&U(P.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),t&&n},parse:(e,t,n)=>{let r=le(n);if(r.select=Q(r.select)?{type:r.select,toggle:t.toggle}:k(x({},r.select),{toggle:t.toggle}),RM(t,r),ne(n.select)&&(n.select.on||n.select.clear)){let a='event.item && indexof(event.item.mark.role, "legend") < 0';for(let s of t.events)s.filter=te(s.filter??[]),s.filter.includes(a)||s.filter.push(a)}let i=hM(t.bind)?t.bind.legend:"click",o=Q(i)?Hi(i,"view"):te(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{let r=t.name,i=hM(t.bind)&&t.bind.legend,o=a=>s=>{let c=le(s);return c.markname=a,c};for(let a of t.project.items){if(!a.hasLegend)continue;let s=`${dt(a.field)}_legend`,c=`${r}_${s}`;if(n.filter(u=>u.name===c).length===0){let u=i.merge.map(o(`${s}_symbols`)).concat(i.merge.map(o(`${s}_labels`))).concat(i.merge.map(o(`${s}_entries`)));n.unshift(k(x({name:c},t.init?{}:{value:null}),{on:[{events:u,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${c}`,force:!0}]}))}}return n},signals:(e,t,n)=>{let r=t.name,i=t.project,o=n.find(d=>d.name===r+u1),a=r+Pc,s=i.items.filter(d=>d.hasLegend).map(d=>dt(`${r}_${dt(d.field)}_legend`)),l=`${s.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map(d=>({signal:d})),update:l}):s.length>0&&(o.update=l,delete o.value,delete o.on);let u=n.find(d=>d.name===r+Yf),f=hM(t.bind)&&t.bind.legend;return u&&(t.events?u.on.push(k(x({},u.on[0]),{events:f})):u.on[0].events=f),n}},Moe=boe;function woe(e,t,n){let r=e.fieldDef(t)?.field;for(let i of rn(e.component.selection??{})){let o=i.project.hasField[r]??i.project.hasChannel[t];if(o&&boe.defined(i)){let a=n.get("selections")??[];a.push(i.name),n.set("selections",a,!1),o.hasLegend=!0}}}var Eoe="_translate_anchor",Doe="_translate_delta",jke={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{let r=t.name,i=Co.defined(t),o=r+Eoe,{x:a,y:s}=t.project.hasChannel,c=Hi(t.translate,"scope");return i||(c=c.map(l=>(l.between[0].markname=r+$c,l))),n.push({name:o,value:{},on:[{events:c.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?`, extent_x: ${i?Eh(e,xt):`slice(${a.signals.visual})`}`:"")+(s!==void 0?`, extent_y: ${i?Eh(e,on):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+Doe,value:{},on:[{events:c,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),a!==void 0&&Soe(e,t,a,"width",n),s!==void 0&&Soe(e,t,s,"height",n),n}},zoe=jke;function Soe(e,t,n,r,i){let o=t.name,a=o+Eoe,s=o+Doe,c=n.channel,l=Co.defined(t),u=i.filter(M=>M.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(c),p=d&&d.get("type"),h=d&&d.get("reverse"),m=l?c===xt?h?"":"-":h?"-":"":"",g=`${a}.extent_${c}`,v=`${m}${s}.${c} / ${l?`${f}`:`span(${g})`}`,y=!l||!d?"panLinear":p==="log"?"panLog":p==="symlog"?"panSymlog":p==="pow"?"panPow":"panLinear",C=l?p==="pow"?`, ${d.get("exponent")??1}`:p==="symlog"?`, ${d.get("constant")??1}`:"":"",b=`${y}(${g}, ${v}${C})`;u.on.push({events:{signal:s},update:l?b:`clampRange(${b}, 0, ${f})`})}var Loe="_zoom_anchor",Aoe="_zoom_delta",qke={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{let r=t.name,i=Co.defined(t),o=r+Aoe,{x:a,y:s}=t.project.hasChannel,c=Z(e.scaleName(xt)),l=Z(e.scaleName(on)),u=Hi(t.zoom,"scope");return i||(u=u.map(f=>(f.markname=r+$c,f))),n.push({name:r+Loe,on:[{events:u,update:i?"{"+[c?`x: invert(${c}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:u,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&Hoe(e,t,a,"width",n),s!==void 0&&Hoe(e,t,s,"height",n),n}},Voe=qke;function Hoe(e,t,n,r,i){let o=t.name,a=n.channel,s=Co.defined(t),c=i.filter(y=>y.name===n.signals[s?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,u=e.getScaleComponent(a),f=u&&u.get("type"),d=s?Eh(e,a):c.name,p=o+Aoe,h=`${o}${Loe}.${a}`,m=!s||!u?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=s?f==="pow"?`, ${u.get("exponent")??1}`:f==="symlog"?`, ${u.get("constant")??1}`:"":"",v=`${m}(${d}, ${h}, ${p}${g})`;c.on.push({events:{signal:p},update:s?v:`clampRange(${v}, 0, ${l})`})}var aa="_store",u1="_tuple",ooe="_modify";var AM="vlSelectionResolve",Uf=[moe,hoe,uoe,OM,FM,Co,Moe,Coe,zoe,Voe,IM];function Gke(e){let t=e.parent;for(;t&&!Rr(t);)t=t.parent;return t}function sa(e,{escape:t}={escape:!0}){let n=t?Z(e.name):e.name,r=Gke(e);if(r){let{facet:i}=r;for(let o of Nr)i[o]&&(n+=` + '__facet_${o}_' + (facet[${Z(r.vgField(o))}])`)}return n}function Lh(e){return rn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function RM(e,t){(Q(t.select)||!t.select.on)&&delete e.events,(Q(t.select)||!t.select.clear)&&delete e.clear,(Q(t.select)||!t.select.toggle)&&delete e.toggle}function GF(e){let t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...GF(e.object)),t.push(...GF(e.property))),t)}function Noe(e){return e.object.type==="MemberExpression"?Noe(e.object):e.object.name==="datum"}function PM(e){let t=nf(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&Noe(r)&&n.add(GF(r).slice(1).join("."))}),n}var vs=class e extends Le{clone(){return new e(null,this.model,le(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=A0(this.model,this.filter,this),this._dependentFields=PM(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}};function _oe(e,t){let n={},r=e.config.selection;if(!t||!t.length)return n;for(let i of t){let o=dt(i.name),a=i.select,s=Q(a)?a:a.type,c=ne(a)?le(a):{type:s},l=r[s];for(let d in l)d==="fields"||d==="encodings"||(d==="mark"&&(c[d]=x(x({},l[d]),c[d])),(c[d]===void 0||c[d]===!0)&&(c[d]=le(l[d]??c[d])));let u=n[o]=k(x({},c),{name:o,type:s,init:i.value,bind:i.bind,events:Q(c.on)?Hi(c.on,"scope"):te(le(c.on))}),f=le(i);for(let d of Uf)d.defined(u)&&d.parse&&d.parse(e,u,f)}return n}function NM(e,t,n,r="datum"){let i=Q(t)?t:t.param,o=dt(i),a=Z(o+aa),s;try{s=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(s.project.timeUnit){let d=n??e.component.data.raw,p=s.project.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p}let c=s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=s.resolve==="global"?")":`, ${Z(s.resolve)})`,u=`${c}${a}, ${r}${l}`,f=`length(data(${a}))`;return t.empty===!1?`${f} && ${u}`:`!${f} || ${u}`}function VM(e,t,n){let r=dt(t),i=n.encoding,o=n.field,a;try{a=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=a.project.items[0].field,a.project.items.length>1&&U(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Z(o)}.`);else if(i&&!o){let s=a.project.items.filter(c=>c.channel===i);!s.length||s.length>1?(o=a.project.items[0].field,U((s.length?"Multiple ":"No ")+`matching ${Z(i)} encoding found for selection ${Z(n.param)}. Using "field": ${Z(o)}.`)):o=s[0].field}return`${a.name}[${Z(nr(o))}]`}function koe(e,t){for(let[n,r]of k1(e.component.selection??{})){let i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Dn(new vs(t,e,{param:n}),i,bt.Lookup,e.component.data.outputNodeRefCounts)}}function A0(e,t,n){return pf(t,r=>Q(r)?r:Kre(r)?NM(e,r,n):Ob(r))}function Wke(e,t){if(e)return F(e)&&!J2(e)?e.map(n=>mh(n,t)).join(", "):e}function WF(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function Xf(e,t,n,r={header:!1}){let f=e.combine(),{disable:i,orient:o,scale:a,labelExpr:s,title:c,zindex:l}=f,u=ie(f,["disable","orient","scale","labelExpr","title","zindex"]);if(!i){for(let p in u){let h=Bie[p],m=u[p];if(h&&h!==t&&h!=="both")delete u[p];else if(Tc(m)){let d=m,{condition:g}=d,v=ie(d,["condition"]),y=te(g),C=fF[p];if(C){let{vgProp:b,part:M}=C,S=[...y.map(w=>{let z=w,{test:E}=z,D=ie(z,["test"]);return x({test:A0(null,E)},D)}),v];WF(u,M,b,S),delete u[p]}else if(C===null){let b={signal:y.map(M=>{let E=M,{test:S}=E,w=ie(E,["test"]);return`${A0(null,S)} ? ${BI(w)} : `}).join("")+BI(v)};u[p]=b}}else if(ae(m)){let g=fF[p];if(g){let{vgProp:v,part:y}=g;WF(u,y,v,m),delete u[p]}}Ae(["labelAlign","labelBaseline"],p)&&u[p]===null&&delete u[p]}if(t==="grid"){if(!u.grid)return;if(u.encode){let{grid:p}=u.encode;u.encode=x({},p?{grid:p}:{}),We(u.encode)&&delete u.encode}return k(x({scale:a,orient:o},u),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:at(l,0)})}else{if(!r.header&&e.mainExtracted)return;if(s!==void 0){let h=s;u.encode?.labels?.update&&ae(u.encode.labels.update.text)&&(h=Y2(s,"datum.label",u.encode.labels.update.text.signal)),WF(u,"labels","text",{signal:h})}if(u.labelAlign===null&&delete u.labelAlign,u.encode){for(let h of rM)e.hasAxisPart(h)||delete u.encode[h];We(u.encode)&&delete u.encode}let p=Wke(c,n);return k(x(x(x({scale:a,orient:o,grid:!1},p?{title:p}:{}),u),n.aria===!1?{aria:!1}:{}),{zindex:at(l,0)})}}}function $M(e){let{axes:t}=e.component,n=[];for(let r of vr)if(t[r]){for(let i of t[r])if(!i.get("disable")&&!i.get("gridScale")){let o=r==="x"?"height":"width",a=e.getSizeSignalRef(o).signal;o!==a&&n.push({name:o,update:a})}}return n}function Toe(e,t){let{x:n=[],y:r=[]}=e;return[...n.map(i=>Xf(i,"grid",t)),...r.map(i=>Xf(i,"grid",t)),...n.map(i=>Xf(i,"main",t)),...r.map(i=>Xf(i,"main",t))].filter(i=>i)}function Ioe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){let o=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},s=t[n==="x"?"axisTop":"axisRight"]||{},c=new Set([...R(a),...R(s)]),l={};for(let u of c.values())l[u]={signal:`${r.signal} === "${o}" ? ${c1(a[u])} : ${c1(s[u])}`};return l}return t[i]})])}function Foe(e,t,n,r){let i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:eF(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",a=ae(n)?"axisOrient":`axis${p4(n)}`,s=[...i,...i.map(l=>o+l.substr(4))],c=["axis",a,o];return{vlOnlyAxisConfig:Ioe(s,r,e,n),vgAxisConfig:Ioe(c,r,e,n),axisConfigStyle:Yke([...c,...s],r)}}function Yke(e,t){let n=[{}];for(let r of e){let i=t[r]?.style;if(i){i=te(i);for(let o of i)n.push(t.style[o])}}return Object.assign.apply(null,n)}function Ah(e,t,n,r={}){let i=jI(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(let o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(r[o]?.[e]!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}var XF={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Xke(n,e),gridScale:({model:e,channel:t})=>Qke(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||KF(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||QF(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Kke(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Zke(t.type,n,Y(t)&&!!t.timeUnit,Y(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{let o=e==="x"?"width":e==="y"?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??Jke({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},tickMinStep:eTe,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;let r=ZF(t,n);if(r!==void 0)return r;let i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",a=t.fieldDef(o);return qI(i?[aF(i)]:[],Y(a)?[aF(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>tTe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??nTe(n,t)};function Xke(e,t){return!Ft(e)&&Y(t)&&!et(t?.bin)&&!an(t?.bin)}function Qke(e,t){let n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Roe(e,t,n,r,i){let o=t?.labelAngle;if(o!==void 0)return ae(o)?o:h4(o);{let{configValue:a}=Ah("labelAngle",r,t?.style,i);return a!==void 0?h4(a):n===xt&&Ae([oh,ih],e.type)&&!(Y(e)&&e.timeUnit)?270:void 0}}function YF(e){return`(((${e.signal} % 360) + 360) % 360)`}function QF(e,t,n,r){if(e!==void 0)if(n==="x"){if(ae(e)){let i=YF(e),o=ae(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(ae(t)){let i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(ae(e)){let i=YF(e),o=ae(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(ae(t)){let i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function KF(e,t,n){if(e===void 0)return;let r=n==="x",i=r?0:90,o=r?"bottom":"left";if(ae(e)){let a=YF(e),s=ae(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${a} + 90)`:a} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${s} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(ae(t)){let a=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${a} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function Kke(e,t){if(t==="x"&&Ae(["quantitative","temporal"],e))return!0}function Zke(e,t,n,r){if(n&&!ne(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Ooe(e){return e==="x"?"bottom":"left"}function Jke({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){if(!r&&!Ft(t)&&t!=="log"){if(Y(e)){if(et(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ae(["month","hours","day","quarter"],sn(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function eTe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Y(t)){let{timeUnit:n}=t;if(n){let r=Vb(n);if(r)return{signal:r}}}}function ZF(e,t){let n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;if(o&&a)return GI(o,a);if(o)return o;if(a)return a;if(o!==void 0)return o;if(a!==void 0)return a}function tTe(e,t){let n=e.values;if(F(n))return nM(t,n);if(ae(n))return n}function nTe(e,t){return e==="rect"&&ph(t)?1:0}var V0=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=PM(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(n2(r)&&Xb(r.sort)){let{field:o,timeUnit:a}=r,s=r.sort,c=s.map((l,u)=>`${Ob({field:o,timeUnit:a,equal:l})} ? ${u} : `).join("")+s.length;t=new e(t,{calculate:c,as:ys(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Me(this.transform)}`}};function ys(e,t,n){return K(e,x({prefix:t,suffix:"sort_index"},n??{}))}function Qf(e,t){return Ae(["top","bottom"],t)?"column":Ae(["left","right"],t)||e==="row"?"row":"column"}function Uc(e,t,n,r){let i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return at((t||{})[e],i[e],n.header[e])}function Vh(e,t,n,r){let i={};for(let o of e){let a=Uc(o,t||{},n,r);a!==void 0&&(i[o]=a)}return i}var Kf=["row","column"],Zf=["header","footer"];function Poe(e,t){let n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=Vh(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),c=Qf(t,s),l=h4(a);return{name:`${t}-title`,type:"group",role:`${c}-title`,title:x(x(x(k(x({text:n},t==="row"?{orient:"left"}:{}),{style:"guide-title"}),Boe(l,c)),$oe(c,l,o)),qoe(r,i,t,a1e,MF))}}function $oe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}let r=KF(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Boe(e,t){let n=QF(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Uoe(e,t){let n=e.component.layoutHeaders[t],r=[];for(let i of Zf)if(n[i])for(let o of n[i]){let a=iTe(e,t,i,n,o);a!=null&&r.push(a)}return r}function rTe(e,t){let{sort:n}=e;return Fr(n)?{field:K(n,{expr:"datum"}),order:n.order??"ascending"}:F(n)?{field:ys(e,t,{expr:"datum"}),order:"ascending"}:{field:K(e,{expr:"datum"}),order:n??"ascending"}}function BM(e,t,n){let{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:c}=Vh(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Vf({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,u=Qf(t,s);return x(x(x(k(x({text:{signal:c?Y2(Y2(c,"datum.label",l),"datum.value",K(e,{expr:"parent"})):l}},t==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),Boe(o,u)),$oe(u,o,a)),qoe(n,e,t,s1e,wF))}function iTe(e,t,n,r,i){if(i){let o=null,{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){let{labelOrient:f}=Vh(["labelOrient"],a.header,s,t);(t==="row"&&!Ae(["top","bottom"],f)||t==="column"&&!Ae(["left","right"],f))&&(o=BM(a,t,s))}let c=Rr(e)&&!ps(e.facet),l=i.axes,u=l?.length>0;if(o||u){let f=t==="row"?"height":"width";return x(x(x(x(x({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:rTe(a,t)}:{}),u&&c?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{}),u?{axes:l}:{})}}return null}var oTe={column:{start:0,end:1},row:{start:1,end:0}};function aTe(e,t){return oTe[t][e]}function joe(e,t){let n={};for(let r of Nr){let i=e[r];if(i?.facetFieldDef){let{titleAnchor:o,titleOrient:a}=Vh(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),s=Qf(r,a),c=aTe(o,s);c!==void 0&&(n[s]=c)}}return We(n)?void 0:n}function qoe(e,t,n,r,i){let o={};for(let a of r){if(!i[a])continue;let s=Uc(a,t?.header,e,n);s!==void 0&&(o[i[a]]=s)}return o}function Jf(e){return[...UM(e,"width"),...UM(e,"height"),...UM(e,"childWidth"),...UM(e,"childHeight")]}function UM(e,t){let n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];let i=e.getSizeSignalRef(t).signal;if(r==="step"){let o=e.getScaleComponent(n);if(o){let a=o.get("type"),s=o.get("range");if(Ft(a)&&ki(s)){let c=e.scaleName(n);return Rr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Goe(c,s)]:[Goe(c,s),{name:i,update:JF(c,o,`domain('${c}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){let o=i.endsWith("width"),a=o?"containerSize()[0]":"containerSize()[1]",s=Mh(e.config.view,o?"width":"height"),c=`isFinite(${a}) ? ${a} : ${s}`;return[{name:i,init:c,on:[{update:c,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Goe(e,t){let n=`${e}_step`;return ae(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function JF(e,t,n){let r=t.get("type"),i=t.get("padding"),o=at(t.get("paddingOuter"),i),a=t.get("paddingInner");return a=r==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${c1(a)}, ${c1(o)}) * ${e}_step`}function jM(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function qM(e,t){return R(e).reduce((n,r)=>{let i=e[r];return x(x({},n),U1(t,i,r,o=>tt(o.value)))},{})}function GM(e,t){if(Rr(t))return e==="theta"?"independent":"shared";if(o2(t))return"shared";if(t8(t))return Ct(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function e8(e,t){let n=e.scale[t],r=Ct(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&U(P.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}var sTe=k(x({},EF),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),eR=R(sTe),WM=class extends Fi{};var tR={symbols:cTe,gradient:lTe,labels:uTe,entries:fTe};function cTe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;let{markDef:a,encoding:s,config:c,mark:l}=n,u=a.filled&&l!=="trail",f=x(x({},Tre({},n,yie)),Gf(n,{filled:u})),d=i.get("symbolOpacity")??c.legend.symbolOpacity,p=i.get("symbolFillColor")??c.legend.symbolFillColor,h=i.get("symbolStrokeColor")??c.legend.symbolStrokeColor,m=d===void 0?Woe(s.opacity)??a.opacity:void 0;if(f.fill){if(r==="fill"||u&&r===Fn)delete f.fill;else if(f.fill.field)p?delete f.fill:(f.fill=tt(c.legend.symbolBaseFillColor??"black"),f.fillOpacity=tt(m??1));else if(F(f.fill)){let g=YM(s.fill??s.color)??a.fill??(u&&a.color);g&&(f.fill=tt(g))}}if(f.stroke){if(r==="stroke"||!u&&r===Fn)delete f.stroke;else if(f.stroke.field||h)delete f.stroke;else if(F(f.stroke)){let g=at(YM(s.stroke||s.color),a.stroke,u?a.color:void 0);g&&(f.stroke={value:g})}}if(r!==s1){let g=Y(t)&&Xoe(n,i,t);g?f.opacity=[x({test:g},tt(m??1)),tt(c.legend.unselectedOpacity)]:m&&(f.opacity=tt(m))}return f=x(x({},f),e),We(f)?void 0:f}function lTe(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;let{config:i,markDef:o,encoding:a}=t,s={},l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?Woe(a.opacity)||o.opacity:void 0;return l&&(s.opacity=tt(l)),s=x(x({},s),e),We(s)?void 0:s}function uTe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){let o=n.legend(r)||{},a=n.config,s=Y(t)?Xoe(n,i,t):void 0,c=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:l,formatType:u}=o,f;ds(u)?f=xo({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:u,config:a}):l===void 0&&u===void 0&&a.customFormatTypes&&(t.type==="quantitative"&&a.numberFormatType?f=xo({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):t.type==="temporal"&&a.timeFormatType&&Y(t)&&t.timeUnit===void 0&&(f=xo({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));let d=x(x(x({},c?{opacity:c}:{}),f?{text:f}:{}),e);return We(d)?void 0:d}function fTe(e,{legendCmpt:t}){return t.get("selections")?.length?k(x({},e),{fill:{value:"transparent"}}):e}function Woe(e){return Yoe(e,(t,n)=>Math.max(t,n.value))}function YM(e){return Yoe(e,(t,n)=>at(t,n.value))}function Yoe(e,t){if(Tie(e))return te(e.condition).reduce(t,e.value);if(ir(e))return e.value}function Xoe(e,t,n){let r=t.get("selections");if(!r?.length)return;let i=Z(n.field);return r.map(o=>`(!length(data(${Z(dt(o)+aa)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}var nR={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{let{format:r,formatType:i}=t;return Gb(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{let{formatType:r}=e;return Wb(r,t,n)},gradientLength:e=>{let{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??gTe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??vTe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??pTe(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>hs(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(zc(n)&&O1(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>dTe(t,e)};function dTe(e,t){let n=e.values;if(F(n))return nM(t,n);if(ae(n))return n}function pTe(e,t,n,r){if(t!=="shape"){let i=YM(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Koe(e){let{legend:t}=e;return at(t.type,hTe(e))}function hTe({channel:e,timeUnit:t,scaleType:n}){if(zc(e)){if(Ae(["quarter","month","day"],t))return"symbol";if(O1(n))return"gradient"}return"symbol"}function Zoe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??mTe(n,t)}function mTe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function gTe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){let{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:c}=e;if(O1(i))return n==="horizontal"?r==="top"||r==="bottom"?Qoe(t,"width",a,o):a:Qoe(t,"height",c,s)}function Qoe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function vTe(e){if(Ae(["quantile","threshold","log","symlog"],e))return"greedy"}function rR(e){let t=Mt(e)?yTe(e):MTe(e);return e.component.legends=t,t}function yTe(e){let{encoding:t}=e,n={};for(let r of[Fn,...pM]){let i=_t(t[r]);!i||!e.getScaleComponent(r)||r===wn&&Y(i)&&i.type===ra||(n[r]=bTe(e,r))}return n}function xTe(e,t){let n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function CTe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===r?.title)return!0}return e===(n||{})[t]}function bTe(e,t){let n=e.legend(t),{markDef:r,encoding:i,config:o}=e,a=o.legend,s=new WM({},xTe(e,t));woe(e,t,s);let c=n!==void 0?!n:a.disable;if(s.set("disable",c,n!==void 0),c)return s;n=n||{};let l=e.getScaleComponent(t).get("type"),u=_t(i[t]),f=Y(u)?sn(u.timeUnit)?.unit:void 0,d=n.orient||o.legend.orient||"right",p=Koe({legend:n,channel:t,timeUnit:f,scaleType:l}),h=Zoe({legend:n,legendType:p,orient:d,legendConfig:a}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:u,legendConfig:a,config:o,scaleType:l,orient:d,legendType:p,direction:h};for(let b of eR){if(p==="gradient"&&b.startsWith("symbol")||p==="symbol"&&b.startsWith("gradient"))continue;let M=b in nR?nR[b](m):n[b];if(M!==void 0){let S=CTe(M,b,n,e.fieldDef(t));(S||o.legend[b]===void 0)&&s.set(b,M,S)}}let g=n?.encoding??{},v=s.get("selections"),y={},C={fieldOrDatumDef:u,model:e,channel:t,legendCmpt:s,legendType:p};for(let b of["labels","legend","title","symbols","gradient","entries"]){let M=qM(g[b]??{},e),S=b in tR?tR[b](M,C):M;S!==void 0&&!We(S)&&(y[b]=k(x(x({},v?.length&&Y(u)?{name:`${dt(u.field)}_legend_${b}`}:{}),v?.length?{interactive:!!v}:{}),{update:S}))}return We(y)||s.set("encode",y,!!n?.encoding),s}function MTe(e){let{legends:t,resolve:n}=e.component;for(let r of e.children){rR(r);for(let i of R(r.component.legends))n.legend[i]=e8(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=iR(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(let r of R(t))for(let i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function iR(e,t){if(!e)return t.clone();let n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(let o of eR){let a=B1(e.getWithExplicit(o),t.getWithExplicit(o),o,"legend",(s,c)=>{switch(o){case"symbolType":return wTe(s,c);case"title":return Lb(s,c);case"type":return i=!0,Ri("symbol")}return Bf(s,c,o,"legend")});e.setWithExplicit(o,a)}return i&&(e.implicit?.encode?.gradient&&Zp(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&Zp(e.explicit,["encode","gradient"])),e}function wTe(e,t){return t.value==="circle"?t:e}function STe(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function XM(e){let t=e.component.legends,n={};for(let i of R(t)){let o=e.getScaleComponent(i),a=pt(o.get("domains"));if(n[a])for(let s of n[a])iR(s,t[i])||n[a].push(t[i]);else n[a]=[t[i].clone()]}return rn(n).flat().map(i=>ETe(i,e.config)).filter(i=>i!==void 0)}function ETe(e,t){let a=e.combine(),{disable:n,labelExpr:r,selections:i}=a,o=ie(a,["disable","labelExpr","selections"]);if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),o.encode?.symbols){let s=o.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!o.stroke&&(s.stroke={value:"transparent"});for(let c of pM)o[c]&&delete s[c]}if(o.title||delete o.title,r!==void 0){let s=r;o.encode?.labels?.update&&ae(o.encode.labels.update.text)&&(s=Y2(r,"datum.label",o.encode.labels.update.text.signal)),STe(o,"labels","text",{signal:s})}return o}}function Joe(e){return o2(e)||t8(e)?DTe(e):e2e(e)}function DTe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),e2e(e))}function e2e(e){let t=e.component.projection;if(!t||t.merged)return[];let n=t.combine(),{name:r}=n;if(t.data){let i={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},o=t.data.reduce((a,s)=>{let c=ae(s)?s.signal:`data('${e.lookupDataSource(s)}')`;return Ae(a,c)||a.push(c),a},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[x({name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}else return[x({name:r,translate:{signal:"[width / 2, height / 2]"}},n)]}var t2e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];var Nh=class extends Fi{constructor(t,n,r,i){super(x({},n),{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}};function oR(e){e.component.projection=Mt(e)?zTe(e):ATe(e)}function zTe(e){if(e.hasProjection){let t=rr(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?HTe(e):void 0,o=new Nh(e.projectionName(!0),x(x({},rr(e.config.projection)??{}),t??{}),r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function HTe(e){let t=[],{encoding:n}=e;for(let r of[[ii,ri],[oi,Vi]])(_t(n[r[0]])||_t(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(wn)&&e.typedFieldDef(wn).type===ra&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(bt.Main)),t}function LTe(e,t){let n=pb(t2e,i=>!!(!de(e.explicit,i)&&!de(t.explicit,i)||de(e.explicit,i)&&de(t.explicit,i)&&Vr(e.get(i),t.get(i))));if(Vr(e.size,t.size)){if(n)return e;if(Vr(e.explicit,{}))return t;if(Vr(t.explicit,{}))return e}return null}function ATe(e){if(e.children.length===0)return;let t;for(let r of e.children)oR(r);let n=pb(e.children,r=>{let i=r.component.projection;if(i)if(t){let o=LTe(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){let r=e.projectionName(!0),i=new Nh(r,t.specifiedProjection,t.size,le(t.data));for(let o of e.children){let a=o.component.projection;a&&(a.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(a.get("name"),r),a.merged=!0)}return i}}function VTe(e,t,n,r){if(fs(t,n)){let i=Mt(e)?e.axis(n)??e.legend(n)??{}:{},o=K(t,{expr:"datum"}),a=K(t,{expr:"datum",binSuffix:"end"});return{formulaAs:K(t,{binSuffix:"range",forAs:!0}),formula:E0(o,a,i.format,i.formatType,r)}}return{}}function r2e(e,t){return`${Sb(e)}_${t}`}function NTe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function n8(e,t,n){let r=wf(n,void 0)??{},i=r2e(r,t);return e.getName(`${i}_bins`)}function _Te(e){return"as"in e}function n2e(e,t,n){let r,i;_Te(e)?r=Q(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[K(e,{forAs:!0}),K(e,{binSuffix:"end",forAs:!0})];let o=x({},wf(t,void 0)),a=r2e(o,e.field),{signal:s,extentSignal:c}=NTe(n,a);if(Mf(o.extent)){let u=o.extent;i=VM(n,u.param,u),delete o.extent}let l=x(x(x({bin:o,field:e.field,as:[r]},s?{signal:s}:{}),c?{extentSignal:c}:{}),i?{span:i}:{});return{key:a,binComponent:l}}var ca=class e extends Le{clone(){return new e(null,le(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){let r=n.reduceFieldDef((i,o,a)=>{if(En(o)&&et(o.bin)){let{key:s,binComponent:c}=n2e(o,o.bin,n);i[s]=x(x(x({},c),i[s]),VTe(n,o,a,n.config))}return i},{});return We(r)?null:new e(t,r)}static makeFromTransform(t,n,r){let{key:i,binComponent:o}=n2e(n,n.bin,r);return new e(t,{[i]:o})}merge(t,n){for(let r of R(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Li([...this.bins[r].as,...t.bins[r].as],Me)):this.bins[r]=t.bins[r];for(let r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(rn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(rn(this.bins).map(t=>t.field))}hash(){return`Bin ${Me(this.bins)}`}assemble(){return rn(this.bins).flatMap(t=>{let n=[],[r,...i]=t.as,c=t.bin,{extent:o}=c,a=ie(c,["extent"]),s=x(x(x({type:"bin",field:nr(t.field),as:r,signal:t.signal},Mf(o)?{extent:null}:{extent:o}),t.span?{span:{signal:`span(${t.span})`}}:{}),a);!o&&t.extentSignal&&(n.push({type:"extent",field:nr(t.field),signal:t.extentSignal}),s.extent={signal:t.extentSignal}),n.push(s);for(let l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:K({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}};function kTe(e,t,n,r){let i=Mt(r)?r.encoding[_r(t)]:void 0;if(En(n)&&Mt(r)&&Jb(n,i,r.markDef,r.config)){e.add(K(n,{})),e.add(K(n,{suffix:"end"}));let{mark:o,markDef:a,config:s}=r,c=P1({fieldDef:n,markDef:a,config:s});Ac(o)&&c!==.5&&Ct(t)&&(e.add(K(n,{suffix:H0})),e.add(K(n,{suffix:L0}))),n.bin&&fs(n,t)&&e.add(K(n,{binSuffix:"range"}))}else if(yb(t)){let o=vb(t);e.add(r.getName(o))}else e.add(K(n));return n2(n)&&lie(n.scale?.range)&&e.add(n.scale.range.field),e}function TTe(e,t){for(let n of R(t)){let r=t[n];for(let i of R(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}var bo=class e extends Le{clone(){return new e(null,new Set(this.dimensions),le(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(a=>{a.aggregate&&(r=!0)});let i={},o=new Set;return!r||(n.forEachFieldDef((a,s)=>{let{aggregate:c,field:l}=a;if(c)if(c==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([K(a,{forAs:!0})]);else{if(vo(c)||Jo(c)){let u=vo(c)?"argmin":"argmax",f=c[u];i[f]??(i[f]={}),i[f][u]=new Set([K({op:u,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][c]=new Set([K(a,{forAs:!0})]);kr(s)&&n.scaleDomain(s)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([K({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([K({field:l,aggregate:"max"},{forAs:!0})]))}else kTe(o,s,a,n)}),o.size+R(i).length===0)?null:new e(t,o,i)}static makeFromTransform(t,n){let r=new Set,i={};for(let o of n.aggregate){let{op:a,field:s,as:c}=o;a&&(a==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([c||K(o,{forAs:!0})])):(i[s]??(i[s]={}),i[s][a]=new Set([c||K(o,{forAs:!0})])))}for(let o of n.groupby??[])r.add(o);return r.size+R(i).length===0?null:new e(t,r,i)}merge(t){return LI(this.dimensions,t.dimensions)?(TTe(this.measures,t.measures),!0):(Ore("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...R(this.measures)])}producedFields(){let t=new Set;for(let n of R(this.measures))for(let r of R(this.measures[n])){let i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Me({dimensions:this.dimensions,measures:this.measures})}`}assemble(){let t=[],n=[],r=[];for(let o of R(this.measures))for(let a of R(this.measures[o]))for(let s of this.measures[o][a])r.push(s),t.push(a),n.push(o==="*"?null:nr(o));return{type:"aggregate",groupby:[...this.dimensions].map(nr),ops:t,fields:n,as:r}}};var s2=class extends Le{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(let o of Nr){let a=n.facet[o];if(a){let{bin:s,sort:c}=a;this[o]=x({name:n.getName(`${o}_domain`),fields:[K(a),...et(s)?[K(a,{binSuffix:"end"})]:[]]},Fr(c)?{sortField:c}:F(c)?{sortIndexField:ys(a,o)}:{})}}this.childModel=n.child}hash(){let t="Facet";for(let n of Nr)this[n]&&(t+=` ${n.charAt(0)}:${Me(this[n])}`);return t}get fields(){let t=[];for(let n of Nr)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){let t=new Set(this.fields);for(let n of Nr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){let t={};for(let n of vr){let r=this.childModel.component.scales[n];if(r&&!r.merged){let i=r.get("type"),o=r.get("range");if(Ft(i)&&ki(o)){let a=z4(this.childModel,n),s=r8(a);s?t[n]=s:U(P.unknownField(n))}}}return t}assembleRowColumnHeaderData(t,n,r){let i={row:"y",column:"x",facet:void 0}[t],o=[],a=[],s=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),a.push("max")):(o.push(r[i]),a.push("distinct")),s.push(`distinct_${r[i]}`));let{sortField:c,sortIndexField:l}=this[t];if(c){let{op:u=x4,field:f}=c;o.push(f),a.push(u),s.push(K(c,{forAs:!0}))}else l&&(o.push(l),a.push("max"),s.push(l));return{name:this[t].name,source:n??this.data,transform:[x({type:"aggregate",groupby:this[t].fields},o.length?{fields:o,ops:a,as:s}:{})]}}assembleFacetHeaderData(t){let{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(let c of Kf){for(let l of Zf){let u=(r[c]&&r[c][l])??[];for(let f of u)if(f.axes?.length>0){o[c]=!0;break}}if(o[c]){let l=`length(data("${this.facet.name}"))`,u=c==="row"?n?{signal:`ceil(${l} / ${n})`}:1:n?{signal:`min(${l}, ${n})`}:{signal:l};i.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:u}]})}}let{row:a,column:s}=o;return(a||s)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){let t=[],n=null,r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:a}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;let s=[].concat(r.x??[],r.y??[]),c=s.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:c}]})}for(let s of[I1,T1])this[s]&&t.push(this.assembleRowColumnHeaderData(s,n,r));if(a){let s=this.assembleFacetHeaderData(r);s&&t.push(...s)}return t}};function i2e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function ITe(e,t){let n=Jp(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){let r=i2e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){let r=i2e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return U(P.unrecognizedParse(t)),null}function o2e(e){let t={};return Kp(e.filter,n=>{if(ZI(n)){let r=null;Nb(n)?r=Tr(n.equal):kb(n)?r=Tr(n.lte):_b(n)?r=Tr(n.lt):Tb(n)?r=Tr(n.gt):Ib(n)?r=Tr(n.gte):Fb(n)?r=n.range[0]:Rb(n)&&(r=(n.oneOf??n.in)[0]),r&&(e2(r)?t[n.field]="date":Pe(r)?t[n.field]="number":Q(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function a2e(e){let t={};function n(r){_c(r)?t[r.field]="date":r.type==="quantitative"&&Dre(r.aggregate)?t[r.field]="number":v0(r.field)>1?r.field in t||(t[r.field]="flatten"):n2(r)&&Fr(r.sort)&&v0(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Mt(e)||Rr(e))&&e.forEachFieldDef((r,i)=>{if(En(r))n(r);else{let o=go(i),a=e.fieldDef(o);n(k(x({},r),{type:a.type}))}}),Mt(e)){let{mark:r,markDef:i,encoding:o}=e;if(Ti(r)&&!e.encoding.order){let a=i.orient==="horizontal"?"y":"x",s=o[a];Y(s)&&s.type==="quantitative"&&!(s.field in t)&&(t[s.field]="number")}}return t}function s2e(e){let t={};if(Mt(e)&&e.component.selection)for(let n of R(e.component.selection)){let r=e.component.selection[n];for(let i of r.project.items)!i.channel&&v0(i.field)>1&&(t[i.field]="flatten")}return t}var Or=class e extends Le{clone(){return new e(null,le(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Me(this._parse)}`}static makeExplicit(t,n,r){let i={},o=n.data;return!oa(o)&&o?.format?.parse&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(let s of R(r)){let c=i.getWithExplicit(s);c.value!==void 0&&(c.explicit||c.value===r[s]||c.value==="derived"||r[s]==="flatten"?delete r[s]:U(P.differentParse(s,r[s],c.value)))}for(let s of R(n)){let c=i.get(s);c!==void 0&&(c===n[s]?delete n[s]:U(P.differentParse(s,n[s],c)))}let o=new Fi(n,r);i.copyAll(o);let a={};for(let s of R(o.combine())){let c=o.get(s);c!==null&&(a[s]=c)}return R(a).length===0||i.parseNothing?null:new e(t,a)}get parse(){return this._parse}merge(t){this._parse=x(x({},this._parse),t.parse),t.remove()}assembleFormatParse(){let t={};for(let n of R(this._parse)){let r=this._parse[n];v0(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(R(this._parse))}dependentFields(){return new Set(R(this._parse))}assembleTransforms(t=!1){return R(this._parse).filter(n=>t?v0(n)>1:!0).map(n=>{let r=ITe(n,this._parse[n]);return r?{type:"formula",expr:r,as:eh(n)}:null}).filter(n=>n!==null)}};var la=class e extends Le{clone(){return new e(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ci])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ci}}};var H4=class e extends Le{clone(){return new e(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Me(this.params)}`}assemble(){return x({type:"graticule"},this.params===!0?{}:this.params)}};var L4=class e extends Le{clone(){return new e(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Me(this.params)}`}assemble(){return x({type:"sequence"},this.params)}};var q1=class extends Le{constructor(t){super(null),t??(t={name:"source"});let n;if(oa(t)||(n=t.format?x({},In(t.format,["parse"])):{}),z0(t))this._data={values:t.values};else if(Rc(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Ae(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else IF(t)?this._data={values:[{type:"Sphere"}]}:(LM(t)||oa(t))&&(this._data={});this._generator=oa(t),t.name&&(this._name=t.name),n&&!We(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return k(x({name:this._name},this._data),{transform:[]})}};var c2e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},FTe=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},_h;function QM(e){return e instanceof q1||e instanceof H4||e instanceof L4}var i8=class{constructor(){_h.set(this,void 0),c2e(this,_h,!1,"f")}setModified(){c2e(this,_h,!0,"f")}get modifiedFlag(){return FTe(this,_h,"f")}};_h=new WeakMap;var xs=class extends i8{getNodeDepths(t,n,r){r.set(t,n);for(let i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){let r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(let i of r)this.run(i[0]);return this.modifiedFlag}},o8=class extends i8{optimize(t){this.run(t);for(let n of t.children)this.optimize(n);return this.modifiedFlag}};var KM=class extends o8{mergeNodes(t,n){let r=n.shift();for(let i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){let n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(let i of R(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}},ZM=class extends o8{constructor(t){super(),this.requiresSelectionId=t&&Lh(t)}run(t){t instanceof la&&(this.requiresSelectionId&&(QM(t.parent)||t.parent instanceof bo||t.parent instanceof Or)||(this.setModified(),t.remove()))}},JM=class extends i8{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof i2&&(r=t.producedFields(),hb(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(let i of t.children)this.run(i,new Set([...n,...r]))}},ew=class extends o8{constructor(){super()}run(t){t instanceof Dn&&!t.isRequired()&&(this.setModified(),t.remove())}},tw=class extends xs{run(t){if(!QM(t)&&!(t.numChildren()>1)){for(let n of t.children)if(n instanceof Or)if(t instanceof Or)this.setModified(),t.merge(n);else{if(mb(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}},nw=class extends xs{run(t){let n=[...t.children],r=t.children.filter(i=>i instanceof Or);if(t.numChildren()>1&&r.length>=1){let i={},o=new Set;for(let a of r){let s=a.parse;for(let c of R(s))c in i?i[c]!==s[c]&&o.add(c):i[c]=s[c]}for(let a of o)delete i[a];if(!We(i)){this.setModified();let a=new Or(t,i);for(let s of n){if(s instanceof Or)for(let c of R(i))delete s.parse[c];t.removeChild(s),s.parent=a,s instanceof Or&&R(s.parse).length===0&&s.remove()}}}}},rw=class extends xs{run(t){t instanceof Dn||t.numChildren()>0||t instanceof s2||t instanceof q1||(this.setModified(),t.remove())}},iw=class extends xs{run(t){let n=t.children.filter(i=>i instanceof i2),r=n.pop();for(let i of n)this.setModified(),r.merge(i)}},ow=class extends xs{run(t){let n=t.children.filter(i=>i instanceof bo),r={};for(let i of n){let o=Me(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(let i of R(r)){let o=r[i];if(o.length>1){let a=o.pop();for(let s of o)a.merge(s)&&(t.removeChild(s),s.parent=a,s.remove(),this.setModified())}}}},aw=class extends xs{constructor(t){super(),this.model=t}run(t){let n=!(QM(t)||t instanceof vs||t instanceof Or||t instanceof la),r=[],i=[];for(let o of t.children)o instanceof ca&&(n&&!mb(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){let o=r.pop();for(let a of r)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof ca?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){let o=i.pop();for(let a of i)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}},sw=class extends xs{run(t){let n=[...t.children];if(!os(n,a=>a instanceof Dn)||t.numChildren()<=1)return;let i=[],o;for(let a of n)if(a instanceof Dn){let s=a;for(;s.numChildren()===1;){let[c]=s.children;if(c instanceof Dn)s=c;else break}i.push(...s.children),o?(t.removeChild(a),a.parent=o.parent,o.parent.removeChild(o),o.parent=s,this.setModified()):o=s}else i.push(a);if(i.length){this.setModified();for(let a of i)a.parent.removeChild(a),a.parent=o}}};var ua=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Li(this.transform.groupby.concat(t),n=>n)}dependentFields(){let t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??K(t)}hash(){return`JoinAggregateTransform ${Me(this.transform)}`}assemble(){let t=[],n=[],r=[];for(let o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);let i=this.transform.groupby;return x({type:"joinaggregate",as:r,ops:n,fields:t},i!==void 0?{groupby:i}:{})}};function OTe(e){return e.stack.stackBy.reduce((t,n)=>{let r=n.fieldDef,i=K(r);return i&&t.push(i),t},[])}function PTe(e){return F(e)&&e.every(t=>Q(t))&&e.length>1}var Cs=class e extends Le{clone(){return new e(null,le(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){let{stack:r,groupby:i,as:o,offset:a="zero"}=n,s=[],c=[];if(n.sort!==void 0)for(let f of n.sort)s.push(f.field),c.push(at(f.order,"ascending"));let l={field:s,order:c},u;return PTe(o)?u=o:Q(o)?u=[o,`${o}_end`]:u=[`${n.stack}_start`,`${n.stack}_end`],new e(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:a,sort:l,facetby:[],as:u})}static makeFromEncoding(t,n){let r=n.stack,{encoding:i}=n;if(!r)return null;let{groupbyChannels:o,fieldChannel:a,offset:s,impute:c}=r,l=o.map(p=>{let h=i[p];return si(h)}).filter(p=>!!p),u=OTe(n),f=n.encoding.order,d;if(F(f)||Y(f))d=Hb(f);else{let p=eM(f)?f.sort:a==="y"?"descending":"ascending";d=u.reduce((h,m)=>(h.field.push(m),h.order.push(p),h),{field:[],order:[]})}return new e(t,{dimensionFieldDefs:l,stackField:n.vgField(a),facetby:[],stackby:u,sort:d,offset:s,impute:c,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){let t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Me(this._stack)}`}getGroupbyFields(){let{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[K(i,{binSuffix:"mid"})]:[K(i,{}),K(i,{binSuffix:"end"})]:[K(i)]).flat():r??[]}assemble(){let t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:a,offset:s,impute:c,as:l}=this._stack;if(c)for(let u of r){let{bandPosition:f=.5,bin:d}=u;if(d){let p=K(u,{expr:"datum"}),h=K(u,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${p}+${1-f}*${h}`,as:K(u,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:K(u,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:l,offset:s}),t}};var jc=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Li(this.transform.groupby.concat(t),n=>n)}dependentFields(){let t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??K(t)}hash(){return`WindowTransform ${Me(this.transform)}`}assemble(){let t=[],n=[],r=[],i=[];for(let f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);let o=this.transform.frame,a=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>bf(f)))return x({type:"joinaggregate",as:r,ops:n,fields:t},a!==void 0?{groupby:a}:{});let s=[],c=[];if(this.transform.sort!==void 0)for(let f of this.transform.sort)s.push(f.field),c.push(f.order??"ascending");let l={field:s,order:c},u=this.transform.ignorePeers;return x(x(x({type:"window",params:i,as:r,ops:n,fields:t,sort:l},u!==void 0?{ignorePeers:u}:{}),a!==void 0?{groupby:a}:{}),o!==void 0?{frame:o}:{})}};function $Te(e){function t(n){if(!(n instanceof s2)){let r=n.clone();if(r instanceof Dn){let i=kh+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof bo||r instanceof Cs||r instanceof jc||r instanceof ua)&&r.addDimensions(e.fields);for(let i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function cw(e){if(e instanceof s2)if(e.numChildren()===1&&!(e.children[0]instanceof Dn)){let t=e.children[0];(t instanceof bo||t instanceof Cs||t instanceof jc||t instanceof ua)&&t.addDimensions(e.fields),t.swapWithParent(),cw(e)}else{let t=e.model.component.data.main;l2e(t);let n=$Te(e),r=e.children.map(n).flat();for(let i of r)i.parent=t}else e.children.map(cw)}function l2e(e){if(e instanceof Dn&&e.type===bt.Main&&e.numChildren()===1){let t=e.children[0];t instanceof s2||(t.swapWithParent(),l2e(e))}}var kh="scale_",lw=5;function aR(e){for(let t of e){for(let n of t.children)if(n.parent!==t)return!1;if(!aR(t.children))return!1}return!0}function fa(e,t){let n=!1;for(let r of t)n=e.optimize(r)||n;return n}function u2e(e,t,n){let r=e.sources,i=!1;return i=fa(new ew,r)||i,i=fa(new ZM(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=fa(new rw,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=fa(new tw,r)||i,i=fa(new aw(t),r)||i,i=fa(new JM,r)||i,i=fa(new nw,r)||i,i=fa(new ow,r)||i,i=fa(new iw,r)||i,i=fa(new KM,r)||i,i=fa(new sw,r)||i),e.sources=r,i}function f2e(e,t){aR(e.sources);let n=0,r=0;for(let i=0;i<lw&&u2e(e,t,!0);i++)n++;e.sources.map(cw);for(let i=0;i<lw&&u2e(e,t,!1);i++)r++;aR(e.sources),Math.max(n,r)===lw&&U(`Maximum optimization runs(${lw}) reached.`)}var qn=class e{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new e(()=>t(n))}};function uR(e){Mt(e)?BTe(e):UTe(e)}function BTe(e){let t=e.component.scales;for(let n of R(t)){let r=qTe(e,n);if(t[n].setWithExplicit("domains",r),WTe(e,n),e.component.data.isFaceted){let o=e;for(;!Rr(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(let s of r.value)ea(s)&&(s.data=kh+s.data.replace(kh,""))}}}function UTe(e){for(let n of e.children)uR(n);let t=e.component.scales;for(let n of R(t)){let r,i=null;for(let o of e.children){let a=o.component.scales[n];if(a){r===void 0?r=a.getWithExplicit("domains"):r=B1(r,a.getWithExplicit("domains"),"domains","scale",lR);let s=a.get("selectionExtent");i&&s&&i.param!==s.param&&U(P.NEEDS_SAME_SELECTION),i=s}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function jTe(e,t,n,r){if(e==="unaggregated"){let{valid:i,reason:o}=d2e(t,n);if(!i){U(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){let{valid:i}=d2e(t,n);if(i)return"unaggregated"}return e}function qTe(e,t){let n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=jTe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=k(x({},e.specifiedScales[t]),{domain:i})),t==="x"&&_t(r.x2)?_t(r.x)?B1(A4(n,i,e,"x"),A4(n,i,e,"x2"),"domain","scale",lR):A4(n,i,e,"x2"):t==="y"&&_t(r.y2)?_t(r.y)?B1(A4(n,i,e,"y"),A4(n,i,e,"y2"),"domain","scale",lR):A4(n,i,e,"y2"):A4(n,i,e,t)}function GTe(e,t,n){return e.map(r=>({signal:`{data: ${C0(r,{timeUnit:n,type:t})}}`}))}function sR(e,t,n){let r=sn(n)?.unit;return t==="temporal"||r?GTe(e,t,r):[e]}function A4(e,t,n,r){let{encoding:i,markDef:o,mark:a,config:s,stack:c}=n,l=_t(i[r]),{type:u}=l,f=l.timeUnit;if(cie(t)){let h=A4(e,void 0,n,r),m=sR(t.unionWith,u,f);return r2([...m,...h.value])}else{if(ae(t))return r2([t]);if(t&&t!=="unaggregated"&&!tF(t))return r2(sR(t,u,f))}if(c&&r===c.fieldChannel){if(c.offset==="normalize")return Ri([[0,1]]);let h=n.requestDataName(bt.Main);return Ri([{data:h,field:n.vgField(r,{suffix:"start"})},{data:h,field:n.vgField(r,{suffix:"end"})}])}let d=kr(r)&&Y(l)?YTe(n,r,e):void 0;if(Ii(l)){let h=sR([l.datum],u,f);return Ri(h)}let p=l;if(t==="unaggregated"){let h=n.requestDataName(bt.Main),{field:m}=l;return Ri([{data:h,field:K({field:m,aggregate:"min"})},{data:h,field:K({field:m,aggregate:"max"})}])}else if(et(p.bin)){if(Ft(e))return e==="bin-ordinal"?Ri([]):Ri([{data:hf(d)?n.requestDataName(bt.Main):n.requestDataName(bt.Raw),field:n.vgField(r,fs(p,r)?{binSuffix:"range"}:{}),sort:d===!0||!ne(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{let{bin:h}=p;if(et(h)){let m=n8(n,p.field,h);return Ri([new qn(()=>{let g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Ri([{data:n.requestDataName(bt.Main),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Ae(["time","utc"],e)){let h=i[_r(r)];if(Jb(p,h,o,s)){let m=n.requestDataName(bt.Main),g=P1({fieldDef:p,fieldDef2:h,markDef:o,config:s}),v=Ac(a)&&g!==.5&&Ct(r);return Ri([{data:m,field:n.vgField(r,v?{suffix:H0}:{})},{data:m,field:n.vgField(r,{suffix:v?L0:"end"})}])}}return d?Ri([{data:hf(d)?n.requestDataName(bt.Main):n.requestDataName(bt.Raw),field:n.vgField(r),sort:d}]):Ri([{data:n.requestDataName(bt.Main),field:n.vgField(r)}])}function cR(e,t){let{op:n,field:r,order:i}=e;return x(x({op:n??(t?"sum":x4)},r?{field:nr(r)}:{}),i?{order:i}:{})}function WTe(e,t){let n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t)?.bin,o=tF(r)&&r,a=Z2(i)&&Mf(i.extent)&&i.extent;(o||a)&&n.set("selectionExtent",o??a,!0)}function YTe(e,t,n){if(!Ft(n))return;let r=e.fieldDef(t),i=r.sort;if(Xb(i))return{op:"min",field:ys(r,t),order:"ascending"};let{stack:o}=e,a=o?new Set([...o.groupbyFields,...o.stackBy.map(s=>s.fieldDef.field)]):void 0;if(Fr(i)){let s=o&&!a.has(i.field);return cR(i,s)}else if(Yb(i)){let{encoding:s,order:c}=i,l=e.fieldDef(s),{aggregate:u,field:f}=l,d=o&&!a.has(f);if(vo(u)||Jo(u))return cR({field:K(l),order:c},d);if(bf(u)||!u)return cR({op:u,field:f,order:c},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ae(["ascending",void 0],i))return!0}}function d2e(e,t){let{aggregate:n,type:r}=e;return n?Q(n)&&!Hre.has(n)?{valid:!1,reason:P.unaggregateDomainWithNonSharedDomainOp(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:P.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:P.unaggregateDomainHasNoEffectForRawField(e)}}function lR(e,t,n,r){return e.explicit&&t.explicit&&U(P.mergeConflictingDomainProperty(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function XTe(e){let t=Li(e.map(a=>{if(ea(a)){let s=a,{sort:c}=s;return ie(s,["sort"])}return a}),Me),n=Li(e.map(a=>{if(ea(a)){let s=a.sort;return s!==void 0&&!hf(s)&&("op"in s&&s.op==="count"&&delete s.field,s.order==="ascending"&&delete s.order),s}}).filter(a=>a!==void 0),Me);if(t.length===0)return;if(t.length===1){let a=e[0];if(ea(a)&&n.length>0){let s=n[0];if(n.length>1){U(P.MORE_THAN_ONE_SORT);let c=n.filter(l=>ne(l)&&"op"in l&&l.op!=="min");n.every(l=>ne(l)&&"op"in l)&&c.length===1?s=c[0]:s=!0}else if(ne(s)&&"field"in s){let c=s.field;a.field===c&&(s=s.order?{order:s.order}:!0)}return k(x({},a),{sort:s})}return a}let r=Li(n.map(a=>hf(a)||!("op"in a)||Q(a.op)&&a.op in Ere?a:(U(P.domainSortDropped(a)),!0)),Me),i;r.length===1?i=r[0]:r.length>1&&(U(P.MORE_THAN_ONE_SORT),i=!0);let o=Li(e.map(a=>ea(a)?a.data:null),a=>a);return o.length===1&&o[0]!==null?x({data:o[0],fields:t.map(s=>s.field)},i?{sort:i}:{}):x({fields:t},i?{sort:i}:{})}function r8(e){if(ea(e)&&Q(e.field))return e.field;if(Lre(e)){let t;for(let n of e.fields)if(ea(n)&&Q(n.field)){if(!t)t=n.field;else if(t!==n.field)return U(P.FACETED_INDEPENDENT_DIFFERENT_SOURCES),t}return U(P.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),t}else if(Are(e)){U(P.FACETED_INDEPENDENT_SAME_SOURCE);let t=e.fields[0];return Q(t)?t:void 0}}function z4(e,t){let r=e.component.scales[t].get("domains").map(i=>(ea(i)&&(i.data=e.lookupDataSource(i.data)),i));return XTe(r)}function fR(e){return o2(e)||t8(e)?e.children.reduce((t,n)=>t.concat(fR(n)),p2e(e)):p2e(e)}function p2e(e){return R(e.component.scales).reduce((t,n)=>{let r=e.component.scales[n];if(r.merged)return t;let i=r.combine(),m=i,{name:o,type:a,selectionExtent:s,domains:c,range:l,reverse:u}=m,f=ie(m,["name","type","selectionExtent","domains","range","reverse"]),d=QTe(i.range,o,n,e),p=z4(e,n),h=s?ioe(e,s,r,p):null;return t.push(x(x(k(x(x({name:o,type:a},p?{domain:p}:{}),h?{domainRaw:h}:{}),{range:d}),u!==void 0?{reverse:u}:{}),f)),t},[])}function QTe(e,t,n,r){if(Ct(n)){if(ki(e))return{step:{signal:`${t}_step`}}}else if(ne(e)&&ea(e))return k(x({},e),{data:r.lookupDataSource(e.data)});return e}var Th=class extends Fi{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:os(this.get("domains"),t=>F(t)&&t.length===2&&Pe(t[0])&&t[0]<=0&&Pe(t[1])&&t[1]>=0)}};var KTe=["range","scheme"];function v2e(e){let t=e.component.scales;for(let n of v4){let r=t[n];if(!r)continue;let i=ZTe(n,e);r.setWithExplicit("range",i)}}function h2e(e,t){let n=e.fieldDef(t);if(n?.bin){let{bin:r,field:i}=n,o=Sn(t),a=e.getName(o);if(ne(r)&&r.binned&&r.step!==void 0)return new qn(()=>{let s=e.scaleName(t),c=`(domain("${s}")[1] - domain("${s}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${c})`});if(et(r)){let s=n8(e,i,r);return new qn(()=>{let c=e.getSignalName(s),l=`(${c}.stop - ${c}.start) / ${c}.step`;return`${e.getSignalName(a)} / (${l})`})}}}function ZTe(e,t){let n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(let f of KTe)if(n[f]!==void 0){let d=sh(o,f),p=$b(e,f);if(!d)U(P.scalePropertyNotWorkWithScaleType(o,f,e));else if(p)U(p);else switch(f){case"range":{let h=n.range;if(F(h)){if(Ct(e))return r2(h.map(m=>{if(m==="width"||m==="height"){let g=t.getName(m),v=t.getSignalName.bind(t);return qn.fromName(v,g)}return m}))}else if(ne(h))return r2({data:t.requestDataName(bt.Main),field:h.field,sort:{op:"min",field:t.vgField(e)}});return r2(h)}case"scheme":return r2(JTe(n[f]))}}let a=e===xt||e==="xOffset"?"width":"height",s=r[a];if($1(s)){if(Ct(e))if(Ft(o)){let f=x2e(s,t,e);if(f)return r2({step:f})}else U(P.stepDropped(a));else if(Hc(e)){let f=e===Ko?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){let h=C2e(s,o);if(h)return r2(h)}}}let{rangeMin:c,rangeMax:l}=n,u=eIe(e,t);return(c!==void 0||l!==void 0)&&sh(o,"rangeMin")&&F(u)&&u.length===2?r2([c??u[0],l??u[1]]):Ri(u)}function JTe(e){return sie(e)?x({scheme:e.name},In(e,["name"])):{scheme:e}}function y2e(e,t,n,{center:r}={}){let i=Sn(e),o=t.getName(i),a=t.getSignalName.bind(t);return e===on&&Rn(n)?r?[qn.fromName(s=>`${a(s)}/2`,o),qn.fromName(s=>`-${a(s)}/2`,o)]:[qn.fromName(a,o),0]:r?[qn.fromName(s=>`-${a(s)}/2`,o),qn.fromName(s=>`${a(s)}/2`,o)]:[0,qn.fromName(a,o)]}function eIe(e,t){let{size:n,config:r,mark:i,encoding:o}=t,{type:a}=_t(o[e]),c=t.getScaleComponent(e).get("type"),{domain:l,domainMid:u}=t.specifiedScales[e];switch(e){case xt:case on:{if(Ae(["point","band"],c)){let f=b2e(e,n,r.view);if($1(f))return{step:x2e(f,t,e)}}return y2e(e,t,c)}case Ko:case as:return tIe(e,t,c);case R1:{let f=t.component.scales[e].get("zero"),d=M2e(i,f,r),p=iIe(i,n,t,r);return Lc(c)?rIe(d,p,nIe(c,r,l,e)):[d,p]}case ni:return[0,Math.PI*2];case K2:return[0,360];case Ai:return[0,new qn(()=>{let f=t.getSignalName("width"),d=t.getSignalName("height");return`min(${f},${d})/2`})];case ho:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case mo:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case wn:return"symbol";case Fn:case Ni:case _i:return c==="ordinal"?a==="nominal"?"category":"ordinal":u!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case s1:case fo:case po:return[r.scale.minOpacity,r.scale.maxOpacity]}}function x2e(e,t,n){let{encoding:r}=t,i=t.getScaleComponent(n),o=Cf(n),a=r[o];if(zF({step:e,offsetIsDiscrete:Ne(a)&&Pb(a.type)})==="offset"&&mF(r,o)){let c=t.getScaleComponent(o),u=`domain('${t.scaleName(o)}').length`;if(c.get("type")==="band"){let d=c.get("paddingInner")??c.get("padding")??0,p=c.get("paddingOuter")??c.get("padding")??0;u=`bandspace(${u}, ${d}, ${p})`}let f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${u} / (1-${kre(f)})`}}else return e.step}function C2e(e,t){if(zF({step:e,offsetIsDiscrete:Ft(t)})==="offset")return{step:e.step}}function tIe(e,t,n){let r=e===Ko?"x":"y",i=t.getScaleComponent(r);if(!i)return y2e(r,t,n,{center:!0});let o=i.get("type"),a=t.scaleName(r),{markDef:s,config:c}=t;if(o==="band"){let l=b2e(r,t.size,t.config.view);if($1(l)){let u=C2e(l,n);if(u)return u}return[0,{signal:`bandwidth('${a}')`}]}else{let l=t.encoding[r];if(Y(l)&&l.timeUnit){let u=Vb(l.timeUnit,h=>`scale('${a}', ${h})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=P1({fieldDef:l,markDef:s,config:c})-.5,p=d!==0?` + ${d}`:"";if(f){let h=ae(f)?`${f.signal}/2`+p:`${f/2+d}`,m=ae(f)?`(1 - ${f.signal}/2)`+p:`${1-f/2+d}`;return[{signal:`${h} * (${u})`},{signal:`${m} * (${u})`}]}return[0,{signal:u}]}return zI(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function b2e(e,t,n){let r=e===xt?"width":"height",i=t[r];return i||Of(n,r)}function nIe(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&F(n)?n.length+1:(U(P.domainRequiredForThresholdScale(r)),3)}}function rIe(e,t,n){let r=()=>{let i=c1(t),o=c1(e),a=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${a}, ${a})`};return ae(t)?new qn(r):{signal:r()}}function M2e(e,t,n){if(t)return ae(t)?{signal:`${t.signal} ? 0 : ${M2e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(P.incompatibleChannel("size",e))}var m2e=.95;function iIe(e,t,n,r){let i={x:h2e(n,"x"),y:h2e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;let o=g2e(t,i,r.view);return Pe(o)?o-1:new qn(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;let o=g2e(t,i,r.view);return Pe(o)?Math.pow(m2e*o,2):new qn(()=>`pow(${m2e} * ${o.signal}, 2)`)}}throw new Error(P.incompatibleChannel("size",e))}function g2e(e,t,n){let r=$1(e.width)?e.width.step:D0(n,"width"),i=$1(e.height)?e.height.step:D0(n,"height");return t.x||t.y?new qn(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function dR(e,t){Mt(e)?oIe(e,t):S2e(e,t)}function oIe(e,t){let n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(let s of R(n)){let c=a[s],l=n[s],u=e.getScaleComponent(s),f=_t(i[s]),d=c[t],p=u.get("type"),h=u.get("padding"),m=u.get("paddingInner"),g=sh(p,t),v=$b(s,t);if(d!==void 0&&(g?v&&U(v):U(P.scalePropertyNotWorkWithScaleType(p,t,s))),g&&v===void 0)if(d!==void 0){let y=f.timeUnit,C=f.type;switch(t){case"domainMax":case"domainMin":e2(c[t])||C==="temporal"||y?l.set(t,{signal:C0(c[t],{type:C,timeUnit:y})},!0):l.set(t,c[t],!0);break;default:l.copyKeyFromObject(t,c)}}else{let y=t in w2e?w2e[t]({model:e,channel:s,fieldOrDatumDef:f,scaleType:p,scalePadding:h,scalePaddingInner:m,domain:c.domain,domainMin:c.domainMin,domainMax:c.domainMax,markDef:o,config:r,hasNestedOffsetScale:iM(i,s),hasSecondaryRangeChannel:!!i[_r(s)]}):r.scale[t];y!==void 0&&l.set(t,y,!1)}}}var w2e={bins:({model:e,fieldOrDatumDef:t})=>Y(t)?aIe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>sIe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>cIe(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>lIe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>uIe(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>fIe(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{let i=Y(e)?e.sort:void 0;return dIe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:a})=>pIe(e,t,n,r,i,o.scale,a)};function pR(e){Mt(e)?v2e(e):S2e(e,"range")}function S2e(e,t){let n=e.component.scales;for(let r of e.children)t==="range"?pR(r):dR(r,t);for(let r of R(n)){let i;for(let o of e.children){let a=o.component.scales[r];if(a){let s=a.getWithExplicit(t);i=B1(i,s,t,"scale",zM((c,l)=>{switch(t){case"range":return c.step&&l.step?c.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function aIe(e,t){let n=t.bin;if(et(n)){let r=n8(e,t.field,n);return new qn(()=>e.getSignalName(r))}else if(an(n)&&Z2(n)&&n.step!==void 0)return{step:n.step}}function sIe(e,t){if(Ae([Fn,Ni,_i],e)&&t!=="nominal")return"hcl"}function cIe(e,t,n,r,i,o){if(!(si(o)?.bin||F(n)||i!=null||r!=null||Ae([Ir.TIME,Ir.UTC],e)))return Ct(t)?!0:void 0}function lIe(e,t,n,r,i,o){if(Ct(e)){if(O1(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;let{type:a,orient:s}=i;if(a==="bar"&&!(Y(r)&&(r.bin||r.timeUnit))&&(s==="vertical"&&e==="x"||s==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Ir.POINT)return n.pointPadding}}function uIe(e,t,n,r,i,o=!1){if(e===void 0){if(Ct(t)){let{bandPaddingInner:a,barBandPaddingInner:s,rectBandPaddingInner:c,bandWithNestedOffsetPaddingInner:l}=i;return o?l:at(a,n==="bar"?s:c)}else if(Hc(t)&&r===Ir.BAND)return i.offsetBandPaddingInner}}function fIe(e,t,n,r,i,o=!1){if(e===void 0){if(Ct(t)){let{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:s}=i;if(o)return s;if(n===Ir.BAND)return at(a,ae(r)?{signal:`${r.signal}/2`}:r/2)}else if(Hc(t)){if(n===Ir.POINT)return .5;if(n===Ir.BAND)return i.offsetBandPaddingOuter}}}function dIe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Rn(e)&&t==="descending"?ae(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Rn(e)&&t==="descending")return!0}function pIe(e,t,n,r,i,o,a){if(!!n&&n!=="unaggregated"&&Rn(i)){if(F(n)){let c=n[0],l=n[n.length-1];if(Pe(c)&&c<=0&&Pe(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Lc(i))return!0;if(!(Y(t)&&t.bin)&&Ae([...vr,...vre],e)){let{orient:c,type:l}=r;return Ae(["bar","area","line","trail"],l)&&(c==="horizontal"&&e==="y"||c==="vertical"&&e==="x")?!1:Ae(["bar","area"],l)&&!a?!0:o?.zero}return!1}function E2e(e,t,n,r,i=!1){let o=hIe(t,n,r,i),{type:a}=e;return kr(t)?a!==void 0?pie(t,a)?Y(n)&&!die(a,n.type)?(U(P.scaleTypeNotWorkWithFieldDef(a,o)),o):a:(U(P.scaleTypeNotWorkWithChannel(t,a,o)),o):o:null}function hIe(e,t,n,r){switch(t.type){case"nominal":case"ordinal":{if(zc(e)||Mb(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&U(P.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(Ct(e)||Hc(e)){if(Ae(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in bb)return"band";let i=n[Sn(e)];return ls(i)||Nc(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return zc(e)?"time":Mb(e)==="discrete"?(U(P.discreteChannelCannotEncode(e,"temporal")),"ordinal"):Y(t)&&t.timeUnit&&sn(t.timeUnit).utc?"utc":"time";case"quantitative":return zc(e)?Y(t)&&et(t.bin)?"bin-ordinal":"linear":Mb(e)==="discrete"?(U(P.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(P.invalidFieldType(t.type))}function D2e(e,{ignoreRange:t}={}){z2e(e),uR(e);for(let n of fie)dR(e,n);t||pR(e)}function z2e(e){Mt(e)?e.component.scales=mIe(e):e.component.scales=vIe(e)}function mIe(e){let{encoding:t,mark:n,markDef:r}=e,i={};for(let o of v4){let a=_t(t[o]);if(a&&n===Ub&&o===wn&&a.type===ra)continue;let s=a&&a.scale;if(a&&s!==null&&s!==!1){s??(s={});let c=iM(t,o),l=E2e(s,o,a,r,c);i[o]=new Th(e.scaleName(`${o}`,!0),{value:l,explicit:s.type===l})}}return i}var gIe=zM((e,t)=>JI(e)-JI(t));function vIe(e){var t;let n=e.component.scales={},r={},i=e.component.resolve;for(let o of e.children){z2e(o);for(let a of R(o.component.scales))if((t=i.scale)[a]??(t[a]=GM(a,e)),i.scale[a]==="shared"){let s=r[a],c=o.component.scales[a].getWithExplicit("type");s?nie(s.value,c.value)?r[a]=B1(s,c,"type","scale",gIe):(i.scale[a]="independent",delete r[a]):r[a]=c}}for(let o of R(r)){let a=e.scaleName(o,!0),s=r[o];n[o]=new Th(a,s);for(let c of e.children){let l=c.component.scales[o];l&&(c.renameScale(l.get("name"),a),l.merged=!0)}}return n}var Ih=class{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}};function Mt(e){return e?.type==="unit"}function Rr(e){return e?.type==="facet"}function t8(e){return e?.type==="concat"}function o2(e){return e?.type==="layer"}var N0=class{constructor(t,n,r,i,o,a,s){this.type=n,this.parent=r,this.config=o,this.correctDataNames=c=>(c.from?.data&&(c.from.data=this.lookupDataSource(c.from.data)),c.from?.facet?.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c),this.parent=r,this.config=o,this.view=rr(s),this.name=t.name??i,this.title=J2(t.title)?{text:t.title}:t.title?rr(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Ih,this.projectionNameMap=r?r.projectionNameMap:new Ih,this.signalNameMap=r?r.signalNameMap:new Ih,this.data=t.data,this.description=t.description,this.transforms=G1e(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:u1e(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:kc(t)||r?.component.data.isFaceted&&t.data===void 0},layoutSize:new Fi,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:x({scale:{},axis:{},legend:{}},a?le(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){D2e(this)}parseProjection(){oR(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){rR(this)}assembleEncodeFromView(t){let o=t,{style:n}=o,r=ie(o,["style"]),i={};for(let a of R(r)){let s=r[a];s!==void 0&&(i[a]=tt(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=tt(this.description)),this.type==="unit"||this.type==="layer")?x({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n??{}):We(n)?void 0:n}assembleLayout(){if(!this.layout)return;let a=this.layout,{spacing:t}=a,n=ie(a,["spacing"]),{component:r,config:i}=this,o=joe(r.layoutHeaders,i);return x(x(x({padding:t},this.assembleDefaultLayout()),n),o?{titleBand:o}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){let{layoutHeaders:t}=this.component,n=[];for(let r of Nr)t[r].title&&n.push(Poe(this,r));for(let r of Kf)n=n.concat(Uoe(this,r));return n}assembleAxes(){return Toe(this.component.axes,this.config)}assembleLegends(){return XM(this)}assembleProjections(){return Joe(this)}assembleTitle(){let i=this.title??{},{encoding:t}=i,n=ie(i,["encoding"]),r=x(x(x({},Eb(this.config.title).nonMarkTitleProperties),n),t?{encode:{update:t}}:{});if(r.text)return Ae(["unit","layer"],this.type)?Ae(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),We(r)?void 0:r}assembleGroup(t=[]){let n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);let r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());let i=!this.parent||Rr(this.parent)?fR(this):[];i.length>0&&(n.scales=i);let o=this.assembleAxes();o.length>0&&(n.axes=o);let a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return dt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(bt[t].toLowerCase())}requestDataName(t){let n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Rr(this.parent)){let n=jM(t),r=g4(n),i=this.component.scales[r];if(i&&!i.merged){let o=i.get("type"),a=i.get("range");if(Ft(o)&&ki(a)){let s=i.get("name"),c=z4(this,r),l=r8(c);if(l){let u=K({aggregate:"distinct",field:l},{expr:"datum"});return{signal:JF(s,i,u)}}else return U(P.unknownField(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){let n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(xb(t)&&kr(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");let n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(P.selectionNotFound(n));return r}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}},a8=class extends N0{vgField(t,n={}){let r=this.fieldDef(t);if(r)return K(r,n)}reduceFieldDef(t,n){return Gie(this.getMapping(),(r,i,o)=>{let a=si(i);return a?t(r,a,o):r},n)}forEachFieldDef(t,n){vh(this.getMapping(),(r,i)=>{let o=si(r);o&&t(o,i)},n)}};var s8=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Me(this.transform)}`}assemble(){let i=this.transform,{density:t}=i,n=ie(i,["density"]),r=x({type:"kde",field:t},n);return this.transform.groupby&&(r.resolve="shared"),r}};var c8=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Me(this.transform)}`}assemble(){let{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}};var l8=class e extends Le{clone(){return new e(null,x({},this.filter))}constructor(t,n){super(t),this.filter=n}static make(t,n){let{config:r,mark:i,markDef:o}=n;if(Ue("invalid",o,r)!=="filter")return null;let s=n.reduceFieldDef((c,l,u)=>{let f=kr(u)&&n.getScaleComponent(u);if(f){let d=f.get("type");Rn(d)&&l.aggregate!=="count"&&!Ti(i)&&(c[l.field]=l)}return c},{});return R(s).length?new e(t,s):null}dependentFields(){return new Set(R(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Me(this.filter)}`}assemble(){let t=R(this.filter).reduce((n,r)=>{let i=this.filter[r],o=K(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):i.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}};var u8=class e extends Le{clone(){return new e(this.parent,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,a)=>i[a]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Me(this.transform)}`}assemble(){let{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}};var f8=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Me(this.transform)}`}assemble(){let{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}};var d8=class e extends Le{clone(){return new e(null,le(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(let i of[[ii,ri],[oi,Vi]]){let o=i.map(a=>{let s=_t(n.encoding[a]);return Y(s)?s.field:Ii(s)?{expr:`${s.datum}`}:ir(s)?{expr:`${s.value}`}:void 0});(o[0]||o[1])&&(t=new e(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(wn)){let i=n.typedFieldDef(wn);i.type===ra&&(t=new e(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){let t=(this.fields??[]).filter(Q);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Me(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],k(x(x({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}};var p8=class e extends Le{clone(){return new e(null,this.projection,le(this.fields),le(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(let r of[[ii,ri],[oi,Vi]]){let i=r.map(a=>{let s=_t(n.encoding[a]);return Y(s)?s.field:Ii(s)?{expr:`${s.datum}`}:ir(s)?{expr:`${s.value}`}:void 0}),o=r[0]===oi?"2":"";(i[0]||i[1])&&(t=new e(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Q))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Me(this.fields)} ${Me(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}};var _0=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){let{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new e(t,n)}static makeFromEncoding(t,n){let r=n.encoding,i=r.x,o=r.y;if(Y(i)&&Y(o)){let a=i.impute?i:o.impute?o:void 0;if(a===void 0)return;let s=i.impute?o:o.impute?i:void 0,{method:c,value:l,frame:u,keyvals:f}=a.impute,d=aM(n.mark,r);return new e(t,x(x(x(x(x({impute:a.field,key:s.field},c?{method:c}:{}),l!==void 0?{value:l}:{}),u?{frame:u}:{}),f!==void 0?{keyvals:f}:{}),d.length?{groupby:d}:{}))}return null}hash(){return`Impute ${Me(this.transform)}`}assemble(){let{impute:t,key:n,keyvals:r,method:i,groupby:o,value:a,frame:s=[null,null]}=this.transform,c=k(x(k(x({type:"impute",field:t,key:n},r?{keyvals:z1e(r)?this.processSequence(r):r}:{}),{method:"value"}),o?{groupby:o}:{}),{value:!i||i==="value"?a:null});if(i&&i!=="value"){let l=x({type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:s,ignorePeers:!1},o?{groupby:o}:{}),u={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[c,l,u]}else return[c]}};var h8=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Me(this.transform)}`}assemble(){let o=this.transform,{loess:t,on:n}=o,r=ie(o,["loess","on"]);return x({type:"loess",x:n,y:t},r)}};var m8=class e extends Le{clone(){return new e(null,le(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){let o=n.component.data.sources,{from:a}=r,s=null;if(H1e(a)){let c=hR(a.data,o);c||(c=new q1(a.data),o.push(c));let l=n.getName(`lookup_${i}`);s=new Dn(c,l,bt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=s}else if(L1e(a)){let c=a.param;r=x({as:c},r);let l;try{l=n.getSelectionComponent(dt(c),c)}catch{throw new Error(P.cannotLookupVariableParameter(c))}if(s=l.materialized,!s)throw new Error(P.noSameUnitLookup(c))}return new e(t,r,s.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?te(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Me({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=x({values:this.transform.from.fields},this.transform.as?{as:te(this.transform.as)}:{});else{let n=this.transform.as;Q(n)||(U(P.NO_FIELDS_NEEDS_AS),n="_lookup"),t={as:[n]}}return x(x({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}};var g8=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Me(this.transform)}`}assemble(){let i=this.transform,{quantile:t}=i,n=ie(i,["quantile"]);return x({type:"quantile",field:t},n)}};var v8=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Me(this.transform)}`}assemble(){let o=this.transform,{regression:t,on:n}=o,r=ie(o,["regression","on"]);return x({type:"regression",x:n,y:t},r)}};var y8=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Li((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Me(this.transform)}`}assemble(){let{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return x(x(x({type:"pivot",field:t,value:n},i!==void 0?{limit:i}:{}),o!==void 0?{op:o}:{}),r!==void 0?{groupby:r}:{})}};var x8=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Me(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}};function H2e(e){let t=0;function n(r,i){if(r instanceof q1&&!r.isGenerator&&!Rc(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Or&&(r.parent instanceof q1&&!i.source?(i.format=k(x({},i.format??{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof s2){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof H4||r instanceof L4||r instanceof l8||r instanceof vs||r instanceof V0||r instanceof p8||r instanceof bo||r instanceof m8||r instanceof jc||r instanceof ua||r instanceof f8||r instanceof u8||r instanceof s8||r instanceof h8||r instanceof g8||r instanceof v8||r instanceof la||r instanceof x8||r instanceof y8||r instanceof c8)&&i.transform.push(r.assemble()),(r instanceof ca||r instanceof i2||r instanceof _0||r instanceof Cs||r instanceof d8)&&i.transform.push(...r.assemble()),r instanceof Dn&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Dn?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Dn&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(let a of r.children)n(a,{name:null,source:o,transform:[]});break}}}return n}function L2e(e){let t=[],n=H2e(t);for(let r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function A2e(e,t){let n=[],r=H2e(n),i=0;for(let a of e.sources){a.hasName()||(a.dataName=`source_${i++}`);let s=a.assemble();r(a,s)}for(let a of n)a.transform.length===0&&delete a.transform;let o=0;for(let[a,s]of n.entries())(s.transform??[]).length===0&&!s.source&&n.splice(o++,0,n.splice(a,1)[0]);for(let a of n)for(let s of a.transform??[])s.type==="lookup"&&(s.from=e.outputNodes[s.from].getSource());for(let a of n)a.name in t&&(a.values=t[a.name]);return n}function yIe(e){return e==="top"||e==="left"||ae(e)?"header":"footer"}function N2e(e){for(let t of Nr)xIe(e,t);V2e(e,"x"),V2e(e,"y")}function xIe(e,t){let{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){let a=n[t],s=Uc("title",null,r,t),c=hs(a,r,{allowDisabling:!0,includeDefault:s===void 0||!!s});i.component.layoutHeaders[t].title&&(c=F(c)?c.join(", "):c,c+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);let l=Uc("labelOrient",a.header,r,t),u=a.header!==null?at(a.header?.labels,r.header.labels,!0):!1,f=Ae(["bottom","right"],l)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?c:null,facetFieldDef:a,[f]:t==="facet"?[]:[_2e(e,t,u)]}}}function _2e(e,t,n){let r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function V2e(e,t){let{child:n}=e;if(n.component.axes[t]){let{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=e8(i,t),i.axis[t]==="shared"){let o=t==="x"?"column":"row",a=r[o];for(let s of n.component.axes[t]){let c=yIe(s.get("orient"));a[c]??(a[c]=[_2e(e,o,!1)]);let l=Xf(s,"main",e.config,{header:!0});l&&a[c][0].axes.push(l),s.mainExtracted=!0}}}}function k2e(e){fw(e),uw(e,"width"),uw(e,"height")}function T2e(e){fw(e);let t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";uw(e,t),uw(e,n)}function fw(e){for(let t of e.children)t.parseLayoutSize()}function uw(e,t){let n=jM(t),r=g4(n),i=e.component.resolve,o=e.component.layoutSize,a;for(let s of e.children){let c=s.component.layoutSize.getWithExplicit(n),l=i.scale[r]??GM(r,e);if(l==="independent"&&c.value==="step"){a=void 0;break}if(a){if(l==="independent"&&a.value!==c.value){a=void 0;break}a=B1(a,c,n,"")}else a=c}if(a){for(let s of e.children)e.renameSignal(s.getName(n),e.getName(t)),s.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function I2e(e){let{size:t,component:n}=e;for(let r of vr){let i=Sn(r);if(t[i]){let o=t[i];n.layoutSize.set(i,$1(o)?"step":o,!0)}else{let o=CIe(e,i);n.layoutSize.set(i,o,!1)}}}function CIe(e,t){let n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){let o=i.get("type"),a=i.get("range");if(Ft(o)){let s=Of(r.view,t);return ki(a)||$1(s)?"step":s}else return Mh(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return Mh(r.view,t);{let o=Of(r.view,t);return $1(o)?o.step:o}}}function dw(e,t,n){return K(t,x({suffix:`by_${K(e)}`},n??{}))}var pw=class e extends a8{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=C8(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!ps(t))return{facet:this.initFacetFieldDef(t,"facet")};let n=R(t),r={};for(let i of n){if(![T1,I1].includes(i)){U(P.incompatibleChannel(i,"facet"));break}let o=t[i];if(o.field===void 0){U(P.emptyFieldDef(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){let r=gh(t,n);return r.header?r.header=rr(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=V4(this),this.child.parseData()}parseLayoutSize(){fw(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),N2e(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){let t={};for(let n of Nr)for(let r of Zf){let i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:a}=i;if(a){let s=Uc("titleOrient",a.header,this.config,n);if(["right","bottom"].includes(s)){let c=Qf(n,s);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[c]="end"}}if(o?.[0]){let s=n==="row"?"height":"width",c=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(s)&&(t[c]??(t[c]={}),t[c][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){let{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0,i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),k(x(x({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof e))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof e?x(x({},this.channelHasField("column")?{encode:{update:{columns:{field:K(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){let t=[],n=[],r=[];if(this.child instanceof e){if(this.child.channelHasField("column")){let i=K(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(let i of vr){let o=this.child.component.scales[i];if(o&&!o.merged){let a=o.get("type"),s=o.get("range");if(Ft(a)&&ki(s)){let c=z4(this.child,i),l=r8(c);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):U(P.unknownField(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){let{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:a,as:s}=this.getCardinalityAggregateForChild(),c=[];for(let u of Nr){let f=this.facet[u];if(f){c.push(K(f));let{bin:d,sort:p}=f;if(et(d)&&c.push(K(f,{binSuffix:"end"})),Fr(p)){let{field:h,op:m=x4}=p,g=dw(f,p);r&&i?(o.push(g),a.push("max"),s.push(g)):(o.push(h),a.push(m),s.push(g))}else if(F(p)){let h=ys(f,u);o.push(h),a.push("max"),s.push(h)}}}let l=!!r&&!!i;return x({name:t,data:n,groupby:c},l||o.length>0?{aggregate:x(x({},l?{cross:l}:{}),o.length?{fields:o,ops:a,as:s}:{})}:{})}facetSortFields(t){let{facet:n}=this,r=n[t];return r?Fr(r.sort)?[dw(r,r.sort,{expr:"datum"})]:F(r.sort)?[ys(r,t,{expr:"datum"})]:[K(r,{expr:"datum"})]:[]}facetSortOrder(t){let{facet:n}=this,r=n[t];if(r){let{sort:i}=r;return[(Fr(i)?i.order:!F(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){let{facet:t,config:n}=this;if(t.facet)return BM(t.facet,"facet",n);let r={row:["top","bottom"],column:["left","right"]};for(let i of Kf)if(t[i]){let o=Uc("labelOrient",t[i]?.header,n,i);if(r[i].includes(o))return BM(t[i],i,n)}}assembleMarks(){let{child:t}=this,n=this.component.data.facetRoot,r=L2e(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[x(x(x(k(x(x({name:this.getName("cell"),type:"group"},o?{title:o}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:Nr.map(c=>this.facetSortFields(c)).flat(),order:Nr.map(c=>this.facetSortOrder(c)).flat()}}),r.length>0?{data:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup(eoe(this,[])))]}getMapping(){return this.facet}};function F2e(e,t){let{row:n,column:r}=t;if(n&&r){let i=null;for(let o of[n,r])if(Fr(o.sort)){let{field:a,op:s=x4}=o.sort;e=i=new ua(e,{joinaggregate:[{op:s,field:a,as:dw(o,o.sort,{forAs:!0})}],groupby:[K(o)]})}return i}return null}function hR(e,t){for(let n of t){let r=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;let i=e.format?.mesh,o=r.format?.feature;if(i&&o)continue;let a=e.format?.feature;if((a||o)&&a!==o)continue;let s=r.format?.mesh;if(!((i||s)&&i!==s)){if(z0(e)&&z0(r)){if(Vr(e.values,r.values))return n}else if(Rc(e)&&Rc(r)){if(e.url===r.url)return n}else if(LM(e)&&e.name===n.dataName)return n}}return null}function bIe(e,t){if(e.data||!e.parent){if(e.data===null){let r=new q1({values:[]});return t.push(r),r}let n=hR(e.data,t);if(n)return oa(e.data)||(n.data.format=HI({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{let r=new q1(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function MIe(e,t,n){let r=0;for(let i of t.transforms){let o,a;if(O1e(i))a=e=new V0(e,i),o="derived";else if(wh(i)){let s=o2e(i);a=e=Or.makeWithAncestors(e,{},s,n)??e,e=new vs(e,t,i.filter)}else if(SM(i))a=e=ca.makeFromTransform(e,i,t),o="number";else if($1e(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new Or(e,{[i.field]:o}),n.set(i.field,o,!1)),a=e=i2.makeFromTransform(e,i);else if(B1e(i))a=e=bo.makeFromTransform(e,i),o="number",Lh(t)&&(e=new la(e));else if(wM(i))a=e=m8.make(e,t,i,r++),o="derived";else if(I1e(i))a=e=new jc(e,i),o="number";else if(F1e(i))a=e=new ua(e,i),o="number";else if(U1e(i))a=e=Cs.makeFromTransform(e,i),o="derived";else if(j1e(i))a=e=new f8(e,i),o="derived";else if(q1e(i))a=e=new c8(e,i),o="derived";else if(R1e(i))a=e=new u8(e,i),o="derived";else if(A1e(i))a=e=new y8(e,i),o="derived";else if(T1e(i))e=new x8(e,i);else if(P1e(i))a=e=_0.makeFromTransform(e,i),o="derived";else if(V1e(i))a=e=new s8(e,i),o="derived";else if(N1e(i))a=e=new g8(e,i),o="derived";else if(_1e(i))a=e=new v8(e,i),o="derived";else if(k1e(i))a=e=new h8(e,i),o="derived";else{U(P.invalidTransformIgnored(i));continue}if(a&&o!==void 0)for(let s of a.producedFields()??[])n.set(s,o,!1)}return e}function V4(e){let t=bIe(e,e.component.data.sources),{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,a=!(i&&(oa(i)||Rc(i)||z0(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new HM;oa(i)?(TF(i)?t=new L4(t,i.sequence):Sh(i)&&(t=new H4(t,i.graticule)),a.parseNothing=!0):i?.format?.parse===null&&(a.parseNothing=!0),t=Or.makeExplicit(t,e,a)??t,t=new la(t);let s=e.parent&&o2(e.parent);(Mt(e)||Rr(e))&&s&&(t=ca.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=MIe(t,e,a));let c=s2e(e),l=a2e(e);t=Or.makeWithAncestors(t,{},x(x({},c),l),a)??t,Mt(e)&&(t=d8.parseAll(t,e),t=p8.parseAll(t,e)),(Mt(e)||Rr(e))&&(s||(t=ca.makeFromEncoding(t,e)??t),t=i2.makeFromEncoding(t,e)??t,t=V0.parseAllForSortIndex(t,e));let u=e.getDataName(bt.Raw),f=new Dn(t,u,bt.Raw,r);if(n[u]=f,t=f,Mt(e)){let m=bo.makeFromEncoding(t,e);m&&(t=m,Lh(e)&&(t=new la(t))),t=_0.makeFromEncoding(t,e)??t,t=Cs.makeFromEncoding(t,e)??t}Mt(e)&&(t=l8.make(t,e)??t);let d=e.getDataName(bt.Main),p=new Dn(t,d,bt.Main,r);n[d]=p,t=p,Mt(e)&&koe(e,p);let h=null;if(Rr(e)){let m=e.getName("facet");t=F2e(t,e.facet)??t,h=new s2(t,e,m,p.getSource()),n[m]=h}return k(x({},e.component.data),{outputNodes:n,outputNodeRefCounts:r,raw:f,main:p,facetRoot:h,ancestorParse:a})}var hw=class extends N0{constructor(t,n,r,i){super(t,"concat",n,r,i,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&U(P.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(t).map((o,a)=>C8(o,this,this.getName(`concat_${a}`),void 0,i))}parseData(){this.component.data=V4(this);for(let t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(let t of this.children){t.parseSelections();for(let n of R(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(let t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(let t of this.children)t.parseAxesAndHeaders()}getChildren(t){return w4(t)?t.vconcat:Rf(t)?t.hconcat:t.concat}parseLayoutSize(){T2e(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){let t=Jf(this);for(let n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{let n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return x(x(x(x({type:"group",name:t.getName("group")},n?{title:n}:{}),r?{style:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){let t=this.layout.columns;return k(x({},t!=null?{columns:t}:{}),{bounds:"full",align:"each"})}};function wIe(e){return e===!1||e===null}var SIe=k(x({disable:1,gridScale:1,scale:1},dF),{labelExpr:1,encode:1}),mR=R(SIe),mw=class e extends Fi{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new e(le(this.explicit),le(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!wIe(this.get(t))}hasOrientSignalRef(){return ae(this.explicit.orient)}};function R2e(e,t,n){let{encoding:r,config:i}=e,o=_t(r[t])??_t(r[_r(t)]),a=e.axis(t)||{},{format:s,formatType:c}=a;if(ds(c))return x({text:xo({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:c,config:i})},n);if(s===void 0&&c===void 0&&i.customFormatTypes){if(Vc(o)==="quantitative"){if(Nc(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return x({text:xo({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i})},n);if(i.numberFormatType)return x({text:xo({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i})},n)}if(Vc(o)==="temporal"&&i.timeFormatType&&Y(o)&&!o.timeUnit)return x({text:xo({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i})},n)}return n}function O2e(e){return vr.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[VIe(n,e)]),t),{})}var DIe={bottom:"top",top:"bottom",left:"right",right:"left"};function P2e(e){let{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(let i of e.children){i.parseAxesAndHeaders();for(let o of R(i.component.axes))n.axis[o]=e8(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=zIe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(let i of vr){for(let o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(let a of o.component.axes[i]){let{value:s,explicit:c}=a.getWithExplicit("orient");if(!ae(s)){if(r[s]>0&&!c){let l=DIe[s];r[s]>r[l]&&a.set("orient",l,!1)}r[s]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(let[o,a]of(t[i]||[]).entries())o>0&&a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function zIe(e,t){if(e){if(e.length!==t.length)return;let n=e.length;for(let r=0;r<n;r++){let i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){let a=i.getWithExplicit("orient"),s=o.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;e[r]=HIe(i,o)}}}else return t.map(n=>n.clone());return e}function HIe(e,t){for(let n of mR){let r=B1(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return Lb(i,o);case"gridScale":return{explicit:i.explicit,value:at(i.value,o.value)}}return Bf(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function LIe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(ae(n.labelAngle)?n.labelAngle:h4(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===ZF(r,i))return!0}return e===n[t]}var AIe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function VIe(e,t){let n=t.axis(e),r=new mw,i=_t(t.encoding[e]),{mark:o,config:a}=t,s=n?.orient||a[e==="x"?"axisX":"axisY"]?.orient||a.axis?.orient||Ooe(e),c=t.getScaleComponent(e).get("type"),l=Foe(e,c,s,t.config),u=n!==void 0?!n:Ah("disable",a.style,n?.style,l).configValue;if(r.set("disable",u,n!==void 0),u)return r;n=n||{};let f=Roe(i,n,e,a.style,l),d=Wb(n.formatType,i,c),p=Gb(i,i.type,n.format,n.formatType,a,!0),h={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:c,orient:s,labelAngle:f,format:p,formatType:d,mark:o,config:a};for(let v of mR){let y=v in XF?XF[v](h):pF(v)?n[v]:void 0,C=y!==void 0,b=LIe(y,v,n,t,e);if(C&&b)r.set(v,y,b);else{let{configValue:M=void 0,configFrom:S=void 0}=pF(v)&&v!=="values"?Ah(v,a.style,n.style,l):{},w=M!==void 0;C&&!w?r.set(v,y,b):(S!=="vgAxisConfig"||AIe.has(v)&&w||Tc(M)||ae(M))&&r.set(v,M,!1)}}let m=n.encoding??{},g=rM.reduce((v,y)=>{if(!r.hasAxisPart(y))return v;let C=qM(m[y]??{},t),b=y==="labels"?R2e(t,e,C):C;return b!==void 0&&!We(b)&&(v[y]={update:b}),v},{});return We(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function $2e({encoding:e,size:t}){for(let n of vr){let r=Sn(n);$1(t[r])&&ia(e[n])&&(delete t[r],U(P.stepDropped(r)))}return t}var B2e={vgMark:"arc",encodeEntry:e=>x(x(x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Cn("x",e,{defaultPos:"mid"})),Cn("y",e,{defaultPos:"mid"})),j1(e,"radius")),j1(e,"theta"))};var U2e={vgMark:"area",encodeEntry:e=>x(x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),D4("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"})),D4("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"})),Wf(e))};var j2e={vgMark:"rect",encodeEntry:e=>x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),j1(e,"x")),j1(e,"y"))};var q2e={vgMark:"shape",encodeEntry:e=>x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{let{encoding:t}=e,n=t.shape;return[x({type:"geoshape",projection:e.projectionName()},n&&Y(n)&&n.type===ra?{field:K(n,{expr:"datum"})}:{})]}};var G2e={vgMark:"image",encodeEntry:e=>x(x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),j1(e,"x")),j1(e,"y")),E4(e,"url"))};var W2e={vgMark:"line",encodeEntry:e=>x(x(x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Cn("x",e,{defaultPos:"mid"})),Cn("y",e,{defaultPos:"mid"})),Bt("size",e,{vgChannel:"strokeWidth"})),Wf(e))},Y2e={vgMark:"trail",encodeEntry:e=>x(x(x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Cn("x",e,{defaultPos:"mid"})),Cn("y",e,{defaultPos:"mid"})),Bt("size",e)),Wf(e))};function gR(e,t){let{config:n}=e;return x(x(x(x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Cn("x",e,{defaultPos:"mid"})),Cn("y",e,{defaultPos:"mid"})),Bt("size",e)),Bt("angle",e)),NIe(e,n,t))}function NIe(e,t,n){return n?{shape:{value:n}}:Bt("shape",e)}var X2e={vgMark:"symbol",encodeEntry:e=>gR(e)},Q2e={vgMark:"symbol",encodeEntry:e=>gR(e,"circle")},K2e={vgMark:"symbol",encodeEntry:e=>gR(e,"square")};var Z2e={vgMark:"rect",encodeEntry:e=>x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),j1(e,"x")),j1(e,"y"))};var J2e={vgMark:"rule",encodeEntry:e=>{let{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:x(x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),D4("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),D4("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),Bt("size",e,{vgChannel:"strokeWidth"}))}};var eae={vgMark:"text",encodeEntry:e=>{let{config:t,encoding:n}=e;return x(x(x(x(x(x(x(x(x(x({},bn(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Cn("x",e,{defaultPos:"mid"})),Cn("y",e,{defaultPos:"mid"})),E4(e)),Bt("size",e,{vgChannel:"fontSize"})),Bt("angle",e)),TM("align",_Ie(e.markDef,n,t))),TM("baseline",kIe(e.markDef,n,t))),Cn("radius",e,{defaultPos:null})),Cn("theta",e,{defaultPos:null}))}};function _Ie(e,t,n){if(Ue("align",e,n)===void 0)return"center"}function kIe(e,t,n){if(Ue("baseline",e,n)===void 0)return"middle"}var tae={vgMark:"rect",encodeEntry:e=>{let{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",o=r==="horizontal"?"height":"width";return k(x(x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Cn("x",e,{defaultPos:"mid",vgChannel:"xc"})),Cn("y",e,{defaultPos:"mid",vgChannel:"yc"})),Bt("size",e,{defaultValue:TIe(e),vgChannel:i})),{[o]:tt(Ue("thickness",n,t))})}};function TIe(e){let{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",o=e.getScaleComponent(r==="horizontal"?"x":"y"),a=Ue("size",n,t,{vgChannel:i})??t.tick.bandSize;if(a!==void 0)return a;{let s=o?o.get("range"):void 0;return s&&ki(s)&&Pe(s.step)?s.step*3/4:D0(t.view,i)*3/4}}var gw={arc:B2e,area:U2e,bar:j2e,circle:Q2e,geoshape:q2e,image:G2e,line:W2e,point:X2e,rect:Z2e,rule:J2e,square:K2e,text:eae,tick:tae,trail:Y2e};function iae(e){if(Ae([w0,b0,gie],e.mark)){let t=aM(e.mark,e.encoding);if(t.length>0)return IIe(e,t)}else if(e.mark===M0){let t=Db.some(n=>Ue(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return FIe(e)}return vR(e)}var nae="faceted_path_";function IIe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:nae+e.requestDataName(bt.Main),data:e.requestDataName(bt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:vR(e,{fromPrefix:nae})}]}var rae="stack_group_";function FIe(e){let[t]=vR(e,{fromPrefix:rae}),n=e.scaleName(e.stack.fieldChannel),r=(l={})=>e.vgField(e.stack.fieldChannel,l),i=(l,u)=>{let f=[r({prefix:"min",suffix:"start",expr:u}),r({prefix:"max",suffix:"start",expr:u}),r({prefix:"min",suffix:"end",expr:u}),r({prefix:"max",suffix:"end",expr:u})];return`${l}(${f.map(d=>`scale('${n}',${d})`).join(",")})`},o,a;e.stack.fieldChannel==="x"?(o=k(x({},Ec(t.encode.update,["y","yc","y2","height",...Db])),{x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}}),a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update=k(x({},In(t.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(o=k(x({},Ec(t.encode.update,["x","xc","x2","width"])),{y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}}),a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update=k(x({},In(t.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(let l of Db){let u=yo(l,e.markDef,e.config);t.encode.update[l]?(o[l]=t.encode.update[l],delete t.encode.update[l]):u&&(o[l]=tt(u)),u&&(t.encode.update[l]={value:0})}let s=[];if(e.stack.groupbyChannels?.length>0)for(let l of e.stack.groupbyChannels){let u=e.fieldDef(l),f=K(u);f&&s.push(f),(u?.bin||u?.timeUnit)&&s.push(K(u,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((l,u)=>{if(t.encode.update[u])return k(x({},l),{[u]:t.encode.update[u]});{let f=yo(u,e.markDef,e.config);return f!==void 0?k(x({},l),{[u]:tt(f)}):l}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(bt.Main),name:rae+e.requestDataName(bt.Main),groupby:s,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}function RIe(e){let{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,a=t.order;if(!(!F(a)&&ir(a)&&db(a.value)||!a&&db(Ue("order",i,o)))){if((F(a)||Y(a))&&!n)return Hb(a,{expr:"datum"});if(Ti(r)){let s=i.orient==="horizontal"?"y":"x",c=t[s];if(Y(c)){let l=c.sort;if(F(l))return{field:K(c,{prefix:s,suffix:"sort_index",expr:"datum"})};if(Fr(l))return{field:K({aggregate:Tf(e.encoding)?l.op:void 0,field:l.field},{expr:"datum"})};if(Yb(l)){let u=e.fieldDef(l.encoding);return{field:K(u,{expr:"datum"}),order:l.order}}else return l===null?void 0:{field:K(c,{binSuffix:e.stack?.impute?"mid":void 0,expr:"datum"})}}return}}}function vR(e,t={fromPrefix:""}){let{mark:n,markDef:r,encoding:i,config:o}=e,a=at(r.clip,OIe(e),PIe(e)),s=UI(r),c=i.key,l=RIe(e),u=$Ie(e),f=Ue("aria",r,o),d=gw[n].postEncodingTransform?gw[n].postEncodingTransform(e):null;return[x(k(x(x(x(x(x(x({name:e.getName("marks"),type:gw[n].vgMark},a?{clip:!0}:{}),s?{style:s}:{}),c?{key:c.field}:{}),l?{sort:l}:{}),u||{}),f===!1?{aria:f}:{}),{from:{data:t.fromPrefix+e.requestDataName(bt.Main)},encode:{update:gw[n].encodeEntry(e)}}),d?{transform:d}:{})]}function OIe(e){let t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function PIe(e){let t=e.component.projection;return t&&!t.isFit?!0:void 0}function $Ie(e){if(!e.component.selection)return null;let t=R(e.component.selection).length,n=t,r=e.parent;for(;r&&n===0;)n=R(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip}:null}var b8=class extends a8{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,HF(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];let a=ai(t.mark)?x({},t.mark):{type:t.mark},s=a.type;a.filled===void 0&&(a.filled=y1e(a,o,{graticule:t.data&&Sh(t.data)}));let c=this.encoding=jie(t.encoding||{},s,a.filled,o);this.markDef=yM(a,c,o),this.size=$2e({encoding:c,size:HF(t)?x(x(x({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):i}),this.stack=vM(this.markDef,c),this.specifiedScales=this.initScales(s,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegends(c),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Ff(l))}get hasProjection(){let{encoding:t}=this,n=this.mark===Ub,r=t&&sre.some(i=>Ne(t[i]));return n||r}scaleDomain(t){let n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return v4.reduce((r,i)=>{let o=_t(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){let{domain:n,range:r}=t,i=rr(t);return F(n)&&(i.domain=n.map(Tr)),F(r)&&(i.range=r.map(Tr)),i}initAxes(t){return vr.reduce((n,r)=>{let i=t[r];if(Ne(i)||r===xt&&Ne(t.x2)||r===on&&Ne(t.y2)){let o=Ne(i)?i.axis:void 0;n[r]=o&&this.initAxis(x({},o))}return n},{})}initAxis(t){let n=R(t),r={};for(let i of n){let o=t[i];r[i]=Tc(o)?zb(o):Tr(o)}return r}initLegends(t){return xre.reduce((n,r)=>{let i=_t(t[r]);if(i&&bre(r)){let o=i.legend;n[r]=o&&rr(o)}return n},{})}parseData(){this.component.data=V4(this)}parseLayoutSize(){I2e(this)}parseSelections(){this.component.selection=_oe(this,this.selection)}parseMarkGroup(){this.component.mark=iae(this)}parseAxesAndHeaders(){this.component.axes=O2e(this)}assembleSelectionTopLevelSignals(t){return toe(this,t)}assembleSignals(){return[...$M(this),...J1e(this,[])]}assembleSelectionData(t){return noe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Jf(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!o2(this.parent))&&(t=RF(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){let{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return gs(this.encoding,t)}fieldDef(t){let n=this.encoding[t];return si(n)}typedFieldDef(t){let n=this.fieldDef(t);return En(n)?n:null}};var vw=class e extends N0{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);let a=x(x(x({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((s,c)=>{if(Fc(s))return new e(s,this,this.getName(`layer_${c}`),a,o);if(yr(s))return new b8(s,this,this.getName(`layer_${c}`),a,o);throw new Error(P.invalidSpec(s))})}parseData(){this.component.data=V4(this);for(let t of this.children)t.parseData()}parseLayoutSize(){k2e(this)}parseSelections(){this.component.selection={};for(let t of this.children){t.parseSelections();for(let n of R(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(let t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){P2e(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),$M(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Jf(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){let t=new Set;for(let r of this.children)for(let i of te(r.assembleGroupStyle()))t.add(i);let n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(let n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return roe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),XM(this))}};function C8(e,t,n,r,i){if(kc(e))return new pw(e,t,n,i);if(Fc(e))return new vw(e,t,n,r,i);if(yr(e))return new b8(e,t,n,r,i);if(DF(e))return new hw(e,t,n,i);throw new Error(P.invalidSpec(e))}function oae(e,t={}){t.logger&&Fre(t.logger),t.fieldTitle&&lF(t.fieldTitle);try{let n=gM(Ia(t.config,e.config)),r=DM(e,n),i=C8(r,null,"",void 0,n);return i.parse(),f2e(i.component.data,i),{spec:UIe(i,BIe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Rre(),t.fieldTitle&&$ie()}}function BIe(e,t,n,r){let i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Q(t)&&(t={type:t}),i&&o&&K1e(t.type)){if(i==="step"&&o==="step")U(P.droppingFit()),t.type="pad";else if(i==="step"||o==="step"){let a=i==="step"?"width":"height";U(P.droppingFit(g4(a)));let s=a==="width"?"height":"width";t.type=Z1e(s)}}return x(x(x({},R(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t}),kF(n,!1)),kF(e,!0))}function UIe(e,t,n={},r){let i=e.config?m1e(e.config):void 0,o=[].concat(e.assembleSelectionData([]),A2e(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),c=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0),u=e.assembleLayoutSignals();u=u.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);let p=t,{params:f}=p,d=ie(p,["params"]);return x(x(x(x(k(x(x(x(x(x({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),d),s?{title:s}:{}),c?{style:c}:{}),l?{encode:{update:l}}:{}),{data:o}),a.length>0?{projections:a}:{}),e.assembleGroup([...u,...e.assembleSelectionTopLevelSignals([]),...mM(f)])),i?{config:i}:{}),r?{usermeta:r}:{})}var jIe=Kne.version;function qIe(e){let[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var xR=qIe;var ER={};xr(ER,{carbong10:()=>BFe,carbong100:()=>jFe,carbong90:()=>UFe,carbonwhite:()=>$Fe,dark:()=>fFe,excel:()=>dFe,fivethirtyeight:()=>mFe,ggplot2:()=>gFe,googlecharts:()=>HFe,latimes:()=>CFe,powerbi:()=>RFe,quartz:()=>bFe,urbaninstitute:()=>zFe,version:()=>qFe,vox:()=>MFe});var GIe="vega-themes",WIe="2.14.0",YIe="Themes for stylized Vega and Vega-Lite visualizations.",XIe=["vega","vega-lite","themes","style"],QIe="BSD-3-Clause",KIe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},ZIe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],JIe="build/vega-themes.js",eFe="build/vega-themes.module.js",tFe="build/vega-themes.min.js",nFe="build/vega-themes.min.js",rFe="build/vega-themes.module.d.ts",iFe={type:"git",url:"https://github.com/vega/vega-themes.git"},oFe=["src","build"],aFe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},sFe={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},cFe={vega:"*","vega-lite":"*"},lFe={},uFe={name:GIe,version:WIe,description:YIe,keywords:XIe,license:QIe,author:KIe,contributors:ZIe,main:JIe,module:eFe,unpkg:tFe,jsdelivr:nFe,types:rFe,repository:iFe,files:oFe,scripts:aFe,devDependencies:sFe,peerDependencies:cFe,dependencies:lFe},M8="#fff",aae="#888",fFe={background:"#333",view:{stroke:aae},title:{color:M8,subtitleColor:M8},style:{"guide-label":{fill:M8},"guide-title":{fill:M8}},axis:{domainColor:M8,gridColor:aae,tickColor:M8}},k0="#4572a7",dFe={background:"#fff",arc:{fill:k0},area:{fill:k0},line:{stroke:k0,strokeWidth:2},path:{stroke:k0},rect:{fill:k0},shape:{stroke:k0},symbol:{fill:k0,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},T0="#30a2da",CR="#cbcbcb",pFe="#999",hFe="#333",sae="#f0f0f0",cae="#333",mFe={arc:{fill:T0},area:{fill:T0},axis:{domainColor:CR,grid:!0,gridColor:CR,gridWidth:1,labelColor:pFe,labelFontSize:10,titleColor:hFe,tickColor:CR,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:sae,group:{fill:sae},legend:{labelColor:cae,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:cae,titleFontSize:14,titlePadding:10},line:{stroke:T0,strokeWidth:2},path:{stroke:T0,strokeWidth:.5},rect:{fill:T0},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:T0},bar:{binSpacing:2,fill:T0,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},I0="#000",gFe={group:{fill:"#e5e5e5"},arc:{fill:I0},area:{fill:I0},line:{stroke:I0},path:{stroke:I0},rect:{fill:I0},shape:{stroke:I0},symbol:{fill:I0,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},vFe=22,yFe="normal",lae="Benton Gothic, sans-serif",uae=11.5,xFe="normal",F0="#82c6df",bR="Benton Gothic Bold, sans-serif",fae="normal",dae=13,Fh={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},CFe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:bR,fontSize:vFe,fontWeight:yFe},arc:{fill:F0},area:{fill:F0},line:{stroke:F0,strokeWidth:2},path:{stroke:F0},rect:{fill:F0},shape:{stroke:F0},symbol:{fill:F0,size:30},axis:{labelFont:lae,labelFontSize:uae,labelFontWeight:xFe,titleFont:bR,titleFontSize:dae,titleFontWeight:fae},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:lae,labelFontSize:uae,symbolType:"square",titleFont:bR,titleFontSize:dae,titleFontWeight:fae},range:{category:Fh["category-6"],diverging:Fh["fireandice-6"],heatmap:Fh["fire-7"],ordinal:Fh["fire-7"],ramp:Fh["fire-7"]}},R0="#ab5787",yw="#979797",bFe={background:"#f9f9f9",arc:{fill:R0},area:{fill:R0},line:{stroke:R0},path:{stroke:R0},rect:{fill:R0},shape:{stroke:R0},symbol:{fill:R0,size:30},axis:{domainColor:yw,domainWidth:.5,gridWidth:.2,labelColor:yw,tickColor:yw,tickWidth:.2,titleColor:yw},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},O0="#3e5c69",MFe={background:"#fff",arc:{fill:O0},area:{fill:O0},line:{stroke:O0},path:{stroke:O0},rect:{fill:O0},shape:{stroke:O0},symbol:{fill:O0},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},c2="#1696d2",pae="#000000",wFe="#FFFFFF",xw="Lato",MR="Lato",SFe="Lato",EFe="#DEDDDD",DFe=18,Rh={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},zFe={background:wFe,title:{anchor:"start",fontSize:DFe,font:xw},axisX:{domain:!0,domainColor:pae,domainWidth:1,grid:!1,labelFontSize:12,labelFont:MR,labelAngle:0,tickColor:pae,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:xw},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:EFe,gridWidth:1,labelFontSize:12,labelFont:MR,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:xw,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:MR,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:xw,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Rh["six-groups-cat-1"],diverging:Rh["diverging-colors"],heatmap:Rh["diverging-colors"],ordinal:Rh["six-groups-seq"],ramp:Rh["shades-blue"]},area:{fill:c2},rect:{fill:c2},line:{color:c2,stroke:c2,strokeWidth:5},trail:{color:c2,stroke:c2,strokeWidth:0,size:1},path:{stroke:c2,strokeWidth:.5},point:{filled:!0},text:{font:SFe,color:c2,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:c2,stroke:null}},arc:{fill:c2},shape:{stroke:c2},symbol:{fill:c2,size:30}},P0="#3366CC",hae="#ccc",Cw="Arial, sans-serif",HFe={arc:{fill:P0},area:{fill:P0},path:{stroke:P0},rect:{fill:P0},shape:{stroke:P0},symbol:{stroke:P0},circle:{fill:P0},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Cw,fontSize:12},"guide-title":{font:Cw,fontSize:12},"group-title":{font:Cw,fontSize:12}},title:{font:Cw,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:hae,tickColor:hae,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},SR=e=>e*(1/3+1),mae=SR(9),gae=SR(10),vae=SR(12),Oh="Segoe UI",yae="wf_standard-font, helvetica, arial, sans-serif",xae="#252423",Ph="#605E5C",Cae="transparent",LFe="#C8C6C4",da="#118DFF",AFe="#12239E",VFe="#E66C37",NFe="#6B007B",_Fe="#E044A7",kFe="#744EC2",TFe="#D9B300",IFe="#D64550",wae=da,Sae="#DEEFFF",bae=[Sae,wae],FFe=[Sae,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",wae],RFe={view:{stroke:Cae},background:Cae,font:Oh,header:{titleFont:yae,titleFontSize:vae,titleColor:xae,labelFont:Oh,labelFontSize:gae,labelColor:Ph},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Ph,labelFontSize:mae,titleFont:yae,titleColor:xae,titleFontSize:vae,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:LFe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:da},line:{stroke:da,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Oh,fontSize:mae,fill:Ph},arc:{fill:da},area:{fill:da,line:!0,opacity:.6},path:{stroke:da},rect:{fill:da},point:{fill:da,filled:!0,size:75},shape:{stroke:da},symbol:{fill:da,strokeWidth:1.5,size:50},legend:{titleFont:Oh,titleFontWeight:"bold",titleColor:Ph,labelFont:Oh,labelFontSize:gae,labelColor:Ph,symbolType:"circle",symbolSize:75},range:{category:[da,AFe,VFe,NFe,_Fe,kFe,TFe,IFe],diverging:bae,heatmap:bae,ordinal:FFe}},wR='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Mae=400,OFe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],PFe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function bw({type:e,background:t}){let n=e==="dark"?"#161616":"#ffffff",r=e==="dark"?"#f4f4f4":"#161616",i=e==="dark"?OFe:PFe,o=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:wR,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:wR,fill:r,fontWeight:Mae},"guide-title":{font:wR,fill:r,fontWeight:Mae}},range:{category:i,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}var $Fe=bw({type:"light",background:"#ffffff"}),BFe=bw({type:"light",background:"#f4f4f4"}),UFe=bw({type:"dark",background:"#262626"}),jFe=bw({type:"dark",background:"#161616"}),qFe=uFe.version;var GFe="vega-tooltip",WFe="0.34.0",YFe="A tooltip plugin for Vega-Lite and Vega visualizations.",XFe=["vega-lite","vega","tooltip"],QFe={type:"git",url:"https://github.com/vega/vega-tooltip.git"},KFe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},ZFe=["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],JFe="BSD-3-Clause",eRe={url:"https://github.com/vega/vega-tooltip/issues"},tRe="https://github.com/vega/vega-tooltip#readme",nRe="build/vega-tooltip.js",rRe="build/vega-tooltip.module.js",iRe="build/vega-tooltip.min.js",oRe="build/vega-tooltip.min.js",aRe="build/vega-tooltip.module.d.ts",sRe=["src","build","types"],cRe={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"rimraf build && rimraf src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prepare:"yarn copy:data",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},lRe={"@babel/core":"^7.22.10","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.10","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@types/jest":"^29.5.3","@typescript-eslint/eslint-plugin":"^6.3.0","@typescript-eslint/parser":"^6.3.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.46.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","gh-pages":"^6.1.0",jest:"^29.6.2","jest-environment-jsdom":"^29.6.2",path:"^0.12.7",prettier:"^3.0.1","release-it":"^16.1.3",rollup:"^4.6.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.3",sass:"^1.64.2",typescript:"~5.3.2","vega-datasets":"^2.7.0","vega-typings":"^0.24.2"},uRe={"vega-util":"^1.17.2"},fRe={name:GFe,version:WFe,description:YFe,keywords:XFe,repository:QFe,author:KFe,collaborators:ZFe,license:JFe,bugs:eRe,homepage:tRe,main:nRe,module:rRe,unpkg:iRe,jsdelivr:oRe,types:aRe,files:sRe,scripts:cRe,devDependencies:lRe,dependencies:uRe};function dRe(e,t,n,r){if(F(e))return`[${e.map(o=>t(Q(o)?o:Eae(o,n))).join(", ")}]`;if(ne(e)){let o="",i=e,{title:a,image:s}=i,c=ie(i,["title","image"]);a&&(o+=`<h2>${t(a)}</h2>`),s&&(o+=`<img src="${new URL(t(s),r||location.href).href}">`);let l=Object.keys(c);if(l.length>0){o+="<table>";for(let u of l){let f=c[u];f!==void 0&&(ne(f)&&(f=Eae(f,n)),o+=`<tr><td class="key">${t(u)}</td><td class="value">${t(f)}</td></tr>`)}o+="</table>"}return o||"{}"}return t(e)}function pRe(e){let t=[];return function(n,r){if(typeof r!="object"||r===null)return r;let i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Eae(e,t){return JSON.stringify(e,pRe(t))}var hRe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`,Dae="vg-tooltip-element",mRe={offsetX:10,offsetY:10,id:Dae,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:gRe,maxDepth:2,formatTooltip:dRe,baseURL:""};function gRe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function vRe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return hRe.toString().replace(Dae,e)}function yRe(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}var Mw=class{constructor(t){this.options=x(x({},mRe),t);let n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){let r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=vRe(n);let i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);let{x:o,y:a}=yRe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${a}px`,this.el.style.left=`${o}px`}},DAt=fRe.version;function xRe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var DR,zae;function CRe(){return zae||(zae=1,DR=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),DR}var bRe=zt;zt.Node=U0;zt.create=zt;function zt(e){var t=this;if(t instanceof zt||(t=new zt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}zt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};zt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};zt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};zt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)wRe(this,arguments[e]);return this.length};zt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)SRe(this,arguments[e]);return this.length};zt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};zt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};zt.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};zt.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};zt.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};zt.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};zt.prototype.map=function(e,t){t=t||this;for(var n=new zt,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};zt.prototype.mapReverse=function(e,t){t=t||this;for(var n=new zt,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};zt.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};zt.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};zt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};zt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};zt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new zt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};zt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new zt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};zt.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var o=[],r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=MRe(this,i,n[r]);return o};zt.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function MRe(e,t,n){var r=t===e.head?new U0(n,null,t,e):new U0(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function wRe(e,t){e.tail=new U0(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function SRe(e,t){e.head=new U0(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function U0(e,t,n,r){if(!(this instanceof U0))return new U0(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{CRe()(zt)}catch{}var ERe=bRe,$0=Symbol("max"),Gc=Symbol("length"),w8=Symbol("lengthCalculator"),Uh=Symbol("allowStale"),B0=Symbol("maxAge"),qc=Symbol("dispose"),Hae=Symbol("noDisposeOnSet"),Pr=Symbol("lruList"),pa=Symbol("cache"),$ae=Symbol("updateAgeOnGet"),zR=()=>1,VR=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[$0]=t.max||1/0;let n=t.length||zR;if(this[w8]=typeof n!="function"?zR:n,this[Uh]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[B0]=t.maxAge||0,this[qc]=t.dispose,this[Hae]=t.noDisposeOnSet||!1,this[$ae]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[$0]=t||1/0,$h(this)}get max(){return this[$0]}set allowStale(t){this[Uh]=!!t}get allowStale(){return this[Uh]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[B0]=t,$h(this)}get maxAge(){return this[B0]}set lengthCalculator(t){typeof t!="function"&&(t=zR),t!==this[w8]&&(this[w8]=t,this[Gc]=0,this[Pr].forEach(n=>{n.length=this[w8](n.value,n.key),this[Gc]+=n.length})),$h(this)}get lengthCalculator(){return this[w8]}get length(){return this[Gc]}get itemCount(){return this[Pr].length}rforEach(t,n){n=n||this;for(let r=this[Pr].tail;r!==null;){let i=r.prev;Lae(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Pr].head;r!==null;){let i=r.next;Lae(this,t,r,n),r=i}}keys(){return this[Pr].toArray().map(t=>t.key)}values(){return this[Pr].toArray().map(t=>t.value)}reset(){this[qc]&&this[Pr]&&this[Pr].length&&this[Pr].forEach(t=>this[qc](t.key,t.value)),this[pa]=new Map,this[Pr]=new ERe,this[Gc]=0}dump(){return this[Pr].map(t=>Dw(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Pr]}set(t,n,r){if(r=r||this[B0],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,o=this[w8](n,t);if(this[pa].has(t)){if(o>this[$0])return E8(this,this[pa].get(t)),!1;let c=this[pa].get(t).value;return this[qc]&&(this[Hae]||this[qc](t,c.value)),c.now=i,c.maxAge=r,c.value=n,this[Gc]+=o-c.length,c.length=o,this.get(t),$h(this),!0}let a=new NR(t,n,o,i,r);return a.length>this[$0]?(this[qc]&&this[qc](t,n),!1):(this[Gc]+=a.length,this[Pr].unshift(a),this[pa].set(t,this[Pr].head),$h(this),!0)}has(t){if(!this[pa].has(t))return!1;let n=this[pa].get(t).value;return!Dw(this,n)}get(t){return HR(this,t,!0)}peek(t){return HR(this,t,!1)}pop(){let t=this[Pr].tail;return t?(E8(this,t),t.value):null}del(t){E8(this,this[pa].get(t))}load(t){this.reset();let n=Date.now();for(let r=t.length-1;r>=0;r--){let i=t[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let a=o-n;a>0&&this.set(i.k,i.v,a)}}}prune(){this[pa].forEach((t,n)=>HR(this,n,!1))}},HR=(e,t,n)=>{let r=e[pa].get(t);if(r){let i=r.value;if(Dw(e,i)){if(E8(e,r),!e[Uh])return}else n&&(e[$ae]&&(r.value.now=Date.now()),e[Pr].unshiftNode(r));return i.value}},Dw=(e,t)=>{if(!t||!t.maxAge&&!e[B0])return!1;let n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[B0]&&n>e[B0]},$h=e=>{if(e[Gc]>e[$0])for(let t=e[Pr].tail;e[Gc]>e[$0]&&t!==null;){let n=t.prev;E8(e,t),t=n}},E8=(e,t)=>{if(t){let n=t.value;e[qc]&&e[qc](n.key,n.value),e[Gc]-=n.length,e[pa].delete(n.key),e[Pr].removeNode(t)}},NR=class{constructor(t,n,r,i,o){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}},Lae=(e,t,n,r)=>{let i=n.value;Dw(e,i)&&(E8(e,n),e[Uh]||(i=void 0)),i&&t.call(r,i.value,i.key,e)},DRe=VR,zRe=Object.freeze({loose:!0}),HRe=Object.freeze({}),LRe=e=>e?typeof e!="object"?zRe:e:HRe,kR=LRe,_R={exports:{}},ARe="2.0.0",Bae=256,VRe=Number.MAX_SAFE_INTEGER||9007199254740991,NRe=16,_Re=Bae-6,kRe=["major","premajor","minor","preminor","patch","prepatch","prerelease"],TR={MAX_LENGTH:Bae,MAX_SAFE_COMPONENT_LENGTH:NRe,MAX_SAFE_BUILD_LENGTH:_Re,MAX_SAFE_INTEGER:VRe,RELEASE_TYPES:kRe,SEMVER_SPEC_VERSION:ARe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},TRe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},Hw=TRe;(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=TR,o=Hw;t=e.exports={};let a=t.re=[],s=t.safeRe=[],c=t.src=[],l=t.t={},u=0,f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],p=m=>{for(let[g,v]of d)m=m.split(`${g}*`).join(`${g}{0,${v}}`).split(`${g}+`).join(`${g}{1,${v}}`);return m},h=(m,g,v)=>{let y=p(g),C=u++;o(m,C,g),l[m]=C,c[C]=g,a[C]=new RegExp(g,v?"g":void 0),s[C]=new RegExp(y,v?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),h("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${f}+`),h("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),h("FULL",`^${c[l.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),h("LOOSE",`^${c[l.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),h("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),h("COERCERTL",c[l.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(_R,_R.exports);var IR=_R.exports,Aae=/^[0-9]+$/,Uae=(e,t)=>{let n=Aae.test(e),r=Aae.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},IRe=(e,t)=>Uae(t,e),FRe={compareIdentifiers:Uae,rcompareIdentifiers:IRe},ww=Hw,{MAX_LENGTH:Vae,MAX_SAFE_INTEGER:Sw}=TR,{safeRe:Nae,t:_ae}=IR,RRe=kR,{compareIdentifiers:S8}=FRe,ORe=class bs{constructor(t,n){if(n=RRe(n),t instanceof bs){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Vae)throw new TypeError(`version is longer than ${Vae} characters`);ww("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=t.trim().match(n.loose?Nae[_ae.LOOSE]:Nae[_ae.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Sw||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Sw||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Sw||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<Sw)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(ww("SemVer.compare",this.version,this.options,t),!(t instanceof bs)){if(typeof t=="string"&&t===this.version)return 0;t=new bs(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof bs||(t=new bs(t,this.options)),S8(this.major,t.major)||S8(this.minor,t.minor)||S8(this.patch,t.patch)}comparePre(t){if(t instanceof bs||(t=new bs(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=t.prerelease[n];if(ww("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return S8(r,i)}while(++n)}compareBuild(t){t instanceof bs||(t=new bs(t,this.options));let n=0;do{let r=this.build[n],i=t.build[n];if(ww("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return S8(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),S8(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}},FR=ORe,kae=FR,PRe=(e,t,n)=>new kae(e,n).compare(new kae(t,n)),D8=PRe,$Re=D8,BRe=(e,t,n)=>$Re(e,t,n)===0,URe=BRe,jRe=D8,qRe=(e,t,n)=>jRe(e,t,n)!==0,GRe=qRe,WRe=D8,YRe=(e,t,n)=>WRe(e,t,n)>0,XRe=YRe,QRe=D8,KRe=(e,t,n)=>QRe(e,t,n)>=0,ZRe=KRe,JRe=D8,eOe=(e,t,n)=>JRe(e,t,n)<0,tOe=eOe,nOe=D8,rOe=(e,t,n)=>nOe(e,t,n)<=0,iOe=rOe,oOe=URe,aOe=GRe,sOe=XRe,cOe=ZRe,lOe=tOe,uOe=iOe,fOe=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return oOe(e,n,r);case"!=":return aOe(e,n,r);case">":return sOe(e,n,r);case">=":return cOe(e,n,r);case"<":return lOe(e,n,r);case"<=":return uOe(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}},dOe=fOe,LR,Tae;function pOe(){if(Tae)return LR;Tae=1;let e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,f){if(f=n(f),u instanceof t){if(u.loose===!!f.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),a("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(u){let f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=u.match(f);if(!d)throw new TypeError(`Invalid comparator: ${u}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new s(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(a("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new s(u,this.options)}catch{return!1}return o(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new c(this.value,f).test(u.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||o(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||o(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}LR=t;let n=kR,{safeRe:r,t:i}=IR,o=dOe,a=Hw,s=FR,c=jae();return LR}var AR,Iae;function jae(){if(Iae)return AR;Iae=1;class e{constructor(_,A){if(A=r(A),_ instanceof e)return _.loose===!!A.loose&&_.includePrerelease===!!A.includePrerelease?_:new e(_.raw,A);if(_ instanceof i)return this.raw=_.value,this.set=[[_]],this.format(),this;if(this.options=A,this.loose=!!A.loose,this.includePrerelease=!!A.includePrerelease,this.raw=_.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(T=>this.parseRange(T.trim())).filter(T=>T.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let T=this.set[0];if(this.set=this.set.filter(G=>!h(G[0])),this.set.length===0)this.set=[T];else if(this.set.length>1){for(let G of this.set)if(G.length===1&&m(G[0])){this.set=[G];break}}}this.format()}format(){return this.range=this.set.map(_=>_.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(_){let T=((this.options.includePrerelease&&d)|(this.options.loose&&p))+":"+_,G=n.get(T);if(G)return G;let X=this.options.loose,J=X?s[c.HYPHENRANGELOOSE]:s[c.HYPHENRANGE];_=_.replace(J,H(this.options.includePrerelease)),o("hyphen replace",_),_=_.replace(s[c.COMPARATORTRIM],l),o("comparator trim",_),_=_.replace(s[c.TILDETRIM],u),o("tilde trim",_),_=_.replace(s[c.CARETTRIM],f),o("caret trim",_);let Se=_.split(" ").map(lt=>v(lt,this.options)).join(" ").split(/\s+/).map(lt=>z(lt,this.options));X&&(Se=Se.filter(lt=>(o("loose invalid filter",lt,this.options),!!lt.match(s[c.COMPARATORLOOSE])))),o("range list",Se);let Ee=new Map,Xe=Se.map(lt=>new i(lt,this.options));for(let lt of Xe){if(h(lt))return[lt];Ee.set(lt.value,lt)}Ee.size>1&&Ee.has("")&&Ee.delete("");let St=[...Ee.values()];return n.set(T,St),St}intersects(_,A){if(!(_ instanceof e))throw new TypeError("a Range is required");return this.set.some(T=>g(T,A)&&_.set.some(G=>g(G,A)&&T.every(X=>G.every(J=>X.intersects(J,A)))))}test(_){if(!_)return!1;if(typeof _=="string")try{_=new a(_,this.options)}catch{return!1}for(let A=0;A<this.set.length;A++)if(j(this.set[A],_,this.options))return!0;return!1}}AR=e;let t=DRe,n=new t({max:1e3}),r=kR,i=pOe(),o=Hw,a=FR,{safeRe:s,t:c,comparatorTrimReplace:l,tildeTrimReplace:u,caretTrimReplace:f}=IR,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:p}=TR,h=L=>L.value==="<0.0.0-0",m=L=>L.value==="",g=(L,_)=>{let A=!0,T=L.slice(),G=T.pop();for(;A&&T.length;)A=T.every(X=>G.intersects(X,_)),G=T.pop();return A},v=(L,_)=>(o("comp",L,_),L=M(L,_),o("caret",L),L=C(L,_),o("tildes",L),L=w(L,_),o("xrange",L),L=D(L,_),o("stars",L),L),y=L=>!L||L.toLowerCase()==="x"||L==="*",C=(L,_)=>L.trim().split(/\s+/).map(A=>b(A,_)).join(" "),b=(L,_)=>{let A=_.loose?s[c.TILDELOOSE]:s[c.TILDE];return L.replace(A,(T,G,X,J,Se)=>{o("tilde",L,T,G,X,J,Se);let Ee;return y(G)?Ee="":y(X)?Ee=`>=${G}.0.0 <${+G+1}.0.0-0`:y(J)?Ee=`>=${G}.${X}.0 <${G}.${+X+1}.0-0`:Se?(o("replaceTilde pr",Se),Ee=`>=${G}.${X}.${J}-${Se} <${G}.${+X+1}.0-0`):Ee=`>=${G}.${X}.${J} <${G}.${+X+1}.0-0`,o("tilde return",Ee),Ee})},M=(L,_)=>L.trim().split(/\s+/).map(A=>S(A,_)).join(" "),S=(L,_)=>{o("caret",L,_);let A=_.loose?s[c.CARETLOOSE]:s[c.CARET],T=_.includePrerelease?"-0":"";return L.replace(A,(G,X,J,Se,Ee)=>{o("caret",L,G,X,J,Se,Ee);let Xe;return y(X)?Xe="":y(J)?Xe=`>=${X}.0.0${T} <${+X+1}.0.0-0`:y(Se)?X==="0"?Xe=`>=${X}.${J}.0${T} <${X}.${+J+1}.0-0`:Xe=`>=${X}.${J}.0${T} <${+X+1}.0.0-0`:Ee?(o("replaceCaret pr",Ee),X==="0"?J==="0"?Xe=`>=${X}.${J}.${Se}-${Ee} <${X}.${J}.${+Se+1}-0`:Xe=`>=${X}.${J}.${Se}-${Ee} <${X}.${+J+1}.0-0`:Xe=`>=${X}.${J}.${Se}-${Ee} <${+X+1}.0.0-0`):(o("no pr"),X==="0"?J==="0"?Xe=`>=${X}.${J}.${Se}${T} <${X}.${J}.${+Se+1}-0`:Xe=`>=${X}.${J}.${Se}${T} <${X}.${+J+1}.0-0`:Xe=`>=${X}.${J}.${Se} <${+X+1}.0.0-0`),o("caret return",Xe),Xe})},w=(L,_)=>(o("replaceXRanges",L,_),L.split(/\s+/).map(A=>E(A,_)).join(" ")),E=(L,_)=>{L=L.trim();let A=_.loose?s[c.XRANGELOOSE]:s[c.XRANGE];return L.replace(A,(T,G,X,J,Se,Ee)=>{o("xRange",L,T,G,X,J,Se,Ee);let Xe=y(X),St=Xe||y(J),lt=St||y(Se),Jt=lt;return G==="="&&Jt&&(G=""),Ee=_.includePrerelease?"-0":"",Xe?G===">"||G==="<"?T="<0.0.0-0":T="*":G&&Jt?(St&&(J=0),Se=0,G===">"?(G=">=",St?(X=+X+1,J=0,Se=0):(J=+J+1,Se=0)):G==="<="&&(G="<",St?X=+X+1:J=+J+1),G==="<"&&(Ee="-0"),T=`${G+X}.${J}.${Se}${Ee}`):St?T=`>=${X}.0.0${Ee} <${+X+1}.0.0-0`:lt&&(T=`>=${X}.${J}.0${Ee} <${X}.${+J+1}.0-0`),o("xRange return",T),T})},D=(L,_)=>(o("replaceStars",L,_),L.trim().replace(s[c.STAR],"")),z=(L,_)=>(o("replaceGTE0",L,_),L.trim().replace(s[_.includePrerelease?c.GTE0PRE:c.GTE0],"")),H=L=>(_,A,T,G,X,J,Se,Ee,Xe,St,lt,Jt,ws)=>(y(T)?A="":y(G)?A=`>=${T}.0.0${L?"-0":""}`:y(X)?A=`>=${T}.${G}.0${L?"-0":""}`:J?A=`>=${A}`:A=`>=${A}${L?"-0":""}`,y(Xe)?Ee="":y(St)?Ee=`<${+Xe+1}.0.0-0`:y(lt)?Ee=`<${Xe}.${+St+1}.0-0`:Jt?Ee=`<=${Xe}.${St}.${lt}-${Jt}`:L?Ee=`<${Xe}.${St}.${+lt+1}-0`:Ee=`<=${Ee}`,`${A} ${Ee}`.trim()),j=(L,_,A)=>{for(let T=0;T<L.length;T++)if(!L[T].test(_))return!1;if(_.prerelease.length&&!A.includePrerelease){for(let T=0;T<L.length;T++)if(o(L[T].semver),L[T].semver!==i.ANY&&L[T].semver.prerelease.length>0){let G=L[T].semver;if(G.major===_.major&&G.minor===_.minor&&G.patch===_.patch)return!0}return!1}return!0};return AR}var hOe=jae(),mOe=(e,t,n)=>{try{t=new hOe(t,n)}catch{return!1}return t.test(e)},gOe=mOe,qae=xRe(gOe);function vOe(e,t,n){let r=e.open(t),i=1e4,o=250,{origin:a}=new URL(t),s=~~(i/o);function c(u){u.source===r&&(s=0,e.removeEventListener("message",c,!1))}e.addEventListener("message",c,!1);function l(){s<=0||(r.postMessage(n,a),setTimeout(l,o),s-=1)}setTimeout(l,o)}var yOe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Gae(e,...t){for(let n of t)xOe(e,n);return e}function xOe(e,t){for(let n of Object.keys(t))Ys(e,n,t[n],!0)}var COe="vega-embed",bOe="6.24.0",MOe="Publish Vega visualizations as embedded web components.",wOe=["vega","data","visualization","component","embed"],SOe={type:"git",url:"http://github.com/vega/vega-embed.git"},EOe={name:"UW Interactive Data Lab",url:"http://idl.cs.washington.edu"},DOe=[{name:"Dominik Moritz",url:"https://www.domoritz.de"}],zOe={url:"https://github.com/vega/vega-embed/issues"},HOe="https://github.com/vega/vega-embed#readme",LOe="BSD-3-Clause",AOe="build/vega-embed.js",VOe="build/vega-embed.module.js",NOe="build/vega-embed.min.js",_Oe="build/vega-embed.min.js",kOe="build/vega-embed.module.d.ts",TOe=["src","build","patches"],IOe={"@babel/core":"^7.23.6","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.23.6","@babel/preset-env":"^7.23.6","@babel/preset-typescript":"^7.23.3","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-commonjs":"25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/jest":"^29.5.11","@types/semver":"^7.5.6","@typescript-eslint/eslint-plugin":"^6.14.0","@typescript-eslint/parser":"^6.14.0","browser-sync":"^2.29.3",concurrently:"^8.2.2","del-cli":"^5.1.0",eslint:"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.6.0","eslint-plugin-prettier":"^5.0.1",jest:"^29.7.0","jest-canvas-mock":"^2.5.2","jest-environment-jsdom":"^29.7.0","patch-package":"^8.0.0","postinstall-postinstall":"^2.1.0",prettier:"^3.1.1","release-it":"^17.0.1",rollup:"4.9.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",sass:"^1.69.5",typescript:"^5.3.3",vega:"^5.22.1","vega-lite":"^5.2.0"},FOe={vega:"^5.21.0","vega-lite":"*"},ROe={"fast-json-patch":"^3.1.1","json-stringify-pretty-compact":"^3.0.0",semver:"^7.5.4",tslib:"^2.6.2","vega-interpreter":"^1.0.5","vega-schema-url-parser":"^2.2.0","vega-themes":"^2.14.0","vega-tooltip":"^0.34.0"},OOe=["yallist"],POe={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"del-cli build src/style.ts",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start --directory -s -f build *.html",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},$Oe={name:COe,version:bOe,description:MOe,keywords:wOe,repository:SOe,author:EOe,contributors:DOe,bugs:zOe,homepage:HOe,license:LOe,main:AOe,module:VOe,unpkg:NOe,jsdelivr:_Oe,types:kOe,files:TOe,devDependencies:IOe,peerDependencies:FOe,dependencies:ROe,bundledDependencies:OOe,scripts:POe},kAt=$Oe.version,Ms=SI,jh=yR,Fae=typeof window<"u"?window:void 0;jh===void 0&&Fae?.vl?.compile&&(jh=Fae.vl);var BOe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},UOe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Bh={vega:"Vega","vega-lite":"Vega-Lite"},zw={vega:Ms.version,"vega-lite":jh?jh.version:"not available"},jOe={vega:e=>e,"vega-lite":(e,t)=>jh.compile(e,{config:t}).spec},qOe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,GOe="chart-wrapper";function WOe(e){return typeof e=="function"}function Rae(e,t,n,r){let i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+o),a.document.title=`${Bh[r]} JSON Source`}function YOe(e,t){if(e.$schema){let n=xR(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Bh[n.library]}, but mode argument sets ${Bh[t]??t}.`);let r=n.library;return qae(zw[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Bh[r]} ${n.version}, but the current version of ${Bh[r]} is v${zw[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Wae(e){return!!(e&&"load"in e)}function Oae(e){return Wae(e)?e:Ms.loader(e)}function XOe(e){let t=e.usermeta?.embedOptions??{};return Q(t.defaultStyle)&&(t.defaultStyle=!1),t}function Yae(r,i){return Ut(this,arguments,function*(e,t,n={}){let o,a;Q(t)?(a=Oae(n.loader),o=JSON.parse(yield a.load(t))):o=t;let s=XOe(o),c=s.loader;(!a||c)&&(a=Oae(n.loader??c));let l=yield Pae(s,a),u=yield Pae(n,a),f=k(x({},Gae(u,l)),{config:Ia(u.config??{},l.config??{})});return yield KOe(e,o,f,a)})}function Pae(e,t){return Ut(this,null,function*(){let n=Q(e.config)?JSON.parse(yield t.load(e.config)):e.config??{},r=Q(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return x(x(x({},e),r?{patch:r}:{}),n?{config:n}:{})})}function QOe(e){let t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}function KOe(i,o){return Ut(this,arguments,function*(e,t,n={},r){let a=n.theme?Ia(ER[n.theme],n.config??{}):n.config,s=w1(n.actions)?n.actions:Gae({},BOe,n.actions??{}),c=x(x({},UOe),n.i18n),l=n.renderer??"canvas",u=n.logLevel??Ms.Warn,f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){let w="vega-embed-style",{root:E,rootContainer:D}=QOe(d);if(!E.getElementById(w)){let z=document.createElement("style");z.id=w,z.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?yOe.toString():n.defaultStyle,D.appendChild(z)}}let p=YOe(t,n.mode),h=jOe[p](t,a);if(p==="vega-lite"&&h.$schema){let w=xR(h.$schema);qae(zw.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${zw.vega}.`)}d.classList.add("vega-embed"),s&&d.classList.add("has-actions"),d.innerHTML="";let m=d;if(s){let w=document.createElement("div");w.classList.add(GOe),d.appendChild(w),m=w}let g=n.patch;if(g&&(h=g instanceof Function?g(h):j6(h,g,!0,!1).newDocument),n.formatLocale&&Ms.formatLocale(n.formatLocale),n.timeFormatLocale&&Ms.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(let w in n.expressionFunctions){let E=n.expressionFunctions[w];"fn"in E?Ms.expressionFunction(w,E.fn,E.visitor):E instanceof Function&&Ms.expressionFunction(w,E)}let{ast:v}=n,y=Ms.parse(h,p==="vega-lite"?{}:a,{ast:v}),C=new(n.viewClass||Ms.View)(y,x({loader:r,logLevel:u,renderer:l},v?{expr:Ms.expressionInterpreter??n.expr??Qne}:{}));if(C.addSignalListener("autosize",(w,E)=>{let{type:D}=E;D=="fit-x"?(m.classList.add("fit-x"),m.classList.remove("fit-y")):D=="fit-y"?(m.classList.remove("fit-x"),m.classList.add("fit-y")):D=="fit"?m.classList.add("fit-x","fit-y"):m.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){let{loader:w,tooltip:E}=n,D=w&&!Wae(w)?w?.baseURL:void 0,z=WOe(E)?E:new Mw(x({baseURL:D},E===!0?{}:E)).call;C.tooltip(z)}let{hover:b}=n;if(b===void 0&&(b=p==="vega"),b){let{hoverSet:w,updateSet:E}=typeof b=="boolean"?{}:b;C.hover(w,E)}n&&(n.width!=null&&C.width(n.width),n.height!=null&&C.height(n.height),n.padding!=null&&C.padding(n.padding)),yield C.initialize(m,n.bind).runAsync();let M;if(s!==!1){let w=d;if(n.defaultStyle!==!1||n.forceActionsMenu){let D=document.createElement("details");D.title=c.CLICK_TO_VIEW_ACTIONS,d.append(D),w=D;let z=document.createElement("summary");z.innerHTML=qOe,D.append(z),M=H=>{D.contains(H.target)||D.removeAttribute("open")},document.addEventListener("click",M)}let E=document.createElement("div");if(w.append(E),E.classList.add("vega-actions"),s===!0||s.export!==!1){for(let D of["svg","png"])if(s===!0||s.export===!0||s.export[D]){let z=c[`${D.toUpperCase()}_ACTION`],H=document.createElement("a"),j=ne(n.scaleFactor)?n.scaleFactor[D]:n.scaleFactor;H.text=z,H.href="#",H.target="_blank",H.download=`${f}.${D}`,H.addEventListener("mousedown",function(L){return Ut(this,null,function*(){L.preventDefault();let _=yield C.toImageURL(D,j);this.href=_})}),E.append(H)}}if(s===!0||s.source!==!1){let D=document.createElement("a");D.text=c.SOURCE_ACTION,D.href="#",D.addEventListener("click",function(z){Rae((0,Ew.default)(t),n.sourceHeader??"",n.sourceFooter??"",p),z.preventDefault()}),E.append(D)}if(p==="vega-lite"&&(s===!0||s.compiled!==!1)){let D=document.createElement("a");D.text=c.COMPILED_ACTION,D.href="#",D.addEventListener("click",function(z){Rae((0,Ew.default)(h),n.sourceHeader??"",n.sourceFooter??"","vega"),z.preventDefault()}),E.append(D)}if(s===!0||s.editor!==!1){let D=n.editorUrl??"https://vega.github.io/editor/",z=document.createElement("a");z.text=c.EDITOR_ACTION,z.href="#",z.addEventListener("click",function(H){vOe(window,D,{config:a,mode:p,renderer:l,spec:(0,Ew.default)(t)}),H.preventDefault()}),E.append(z)}}function S(){M&&document.removeEventListener("click",M),C.finalize()}return{view:C,spec:t,vgSpec:h,finalize:S,embedOptions:n}})}var RR=(()=>{let t=class t{constructor(){this.data=[],this.spec=aG}ngAfterViewInit(){return Ut(this,null,function*(){this.spec=this.addDataToSpec(this.data,this.spec),this.chart=yield Yae("#calendar-element",this.spec)})}addDataToSpec(r,i){let o=i;return o.data.values=this.formatData(r),o}formatData(r){let i=Array.from(new Set(r)),o=i.map(u=>new Date(u).getFullYear()),a=Math.min(...o),s=Math.max(...o),c={};for(let u=a;u<=s;u++)for(let f=1;f<=12;f++)for(let d=1;d<=31;d++){let p=new Date(u,f-1,d).toLocaleDateString().split("T")[0];c[p]=0}return i.forEach(u=>{let f=new Date(u).toLocaleDateString().split("T")[0];c[f]+=1}),Object.entries(c).map(([u,f])=>({date:u,count:f}))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Ce({type:t,selectors:[["app-calendar-heatmap"]],inputs:{data:"data"},decls:1,vars:0,consts:[["id","calendar-element"]],template:function(i,o){i&1&&ht(0,"div",0)},styles:["#calendar-element[_ngcontent-%COMP%]{position:relative;width:100%}"]});let e=t;return e})();function JOe(e,t){if(e&1&&(V(0,"p"),I(1),N()),e&2){let n=ot();O(),Q8(" Completed Value: ",n.model==null?null:n.model.TimesCompletedToday," / ",n.model==null?null:n.model.TargetValue,`
`)}}function ePe(e,t){if(e&1&&(V(0,"p"),I(1," Associated Goal: "),V(2,"a",5),I(3),N()()),e&2){let n=ot();O(2),se("routerLink",n.goalModel.ViewUrl),O(),be(" ",n.goalModel.Name," ")}}function tPe(e,t){if(e&1&&(V(0,"li"),I(1),hi(2,"date"),N()),e&2){let n=t.$implicit;O(),be(" ",mi(2,1,n)," ")}}function nPe(e,t){if(e&1&&(v1(0),ht(1,"app-calendar-heatmap",6),y1()),e&2){let n=ot();O(),se("data",n.model.FormattedCompletedDates)}}var OR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.goalApi=o,this.faCheck=Xg,this.faXmark=Yg,this.recentCompletedDates=[]}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(ye(1)).subscribe(i=>{this.model=new M1(i.data);let o=this.model?.CompletedDates??[],a=Array.from(new Set(o));this.recentCompletedDates=a.slice(-7),this.model?.Goal&&this.goalApi.getGoal(this.model?.Goal).pipe(ye(1)).subscribe(s=>{this.goalModel=new lr(s.data)})})}};t.\u0275fac=function(i){return new(i||t)(W(_o),W(Vt),W(Qn))},t.\u0275cmp=Ce({type:t,selectors:[["app-habit-page"]],decls:19,vars:11,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right","uk-margin-small-top",3,"routerLink"],[1,"uk-button-danger","uk-button","uk-margin-small-top",3,"routerLink"],[3,"icon"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"routerLink"],[3,"data"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),N(),V(2,"button",0),I(3),N(),V(4,"button",1),I(5),N(),V(6,"p"),I(7),N(),ht(8,"hr"),V(9,"p"),I(10," Is Anti Habit: "),ht(11,"fa-icon",2),N(),st(12,JOe,2,2,"p",3)(13,ePe,4,2,"p",3),V(14,"h2"),I(15,"Completed Dates"),N(),V(16,"ul"),st(17,tPe,3,3,"li",4),N(),st(18,nPe,2,1,"ng-container",3)),i&2&&(O(),be("Habit: ",o.model==null?null:o.model.Name,""),O(),se("routerLink",o.model==null?null:o.model.EditUrl),O(),be(" Edit: ",o.model==null?null:o.model.Name,`
`),O(),se("routerLink",o.model==null?null:o.model.DeleteUrl),O(),be(" Delete: ",o.model==null?null:o.model.Name,`
`),O(2),be(" ",o.model==null?null:o.model.Description,`
`),O(4),se("icon",o.model!=null&&o.model.AntiHabit?o.faCheck:o.faXmark),O(),se("ngIf",o.model==null?null:o.model.IsQuantifiable),O(),se("ngIf",o.goalModel),O(4),se("ngForOf",o.recentCompletedDates),O(),se("ngIf",o.model))},dependencies:[gi,x1,hn,zg,RR,Lo],encapsulation:2});let e=t;return e})();var PR=(()=>{let t=class t{constructor(){}onRightClick(r){r.preventDefault()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=kt({type:t,selectors:[["","appNoContextMenu",""]],hostBindings:function(i,o){i&1&&Fe("contextmenu",function(s){return o.onRightClick(s)})}});let e=t;return e})();function iPe(e,t){if(e&1){let n=X1();V(0,"input",12),Fe("change",function(){fi(n);let i=ot().$implicit,o=ot();return di(o.changeState.emit(i))}),N()}if(e&2){let n=ot().$implicit;se("checked",n.IsCompletedToday)}}function oPe(e,t){if(e&1){let n=X1();V(0,"button",13),Fe("click",function(){fi(n);let i=ot().$implicit,o=ot();return di(o.changeState.emit(i))})("contextmenu",function(){fi(n);let i=ot().$implicit,o=ot();return di(o.decrementState.emit(i))}),I(1),N()}if(e&2){let n=ot().$implicit,r;O(),be(" ",(r=n==null?null:n.TimesCompletedToday)!==null&&r!==void 0?r:0," ")}}function aPe(e,t){if(e&1&&(v1(0),V(1,"p",14),I(2),N(),y1()),e&2){let n=ot().$implicit;O(2),be(" ",n.Description," ")}}function sPe(e,t){if(e&1&&(V(0,"tr")(1,"td"),st(2,iPe,1,1,"input",7)(3,oPe,2,1),N(),V(4,"td")(5,"a",8),I(6),N()(),V(7,"td",1),st(8,aPe,3,1,"ng-container",9),N(),V(9,"td",2),ht(10,"fa-icon",10),N(),V(11,"td")(12,"a",11),I(13,"View"),N()()()),e&2){let n=t.$implicit,r=ot(),i=J4(19);O(2),a3(2,!n.IsQuantifiable||n.IsCompletedToday?2:3),O(3),se("routerLink",n.ViewUrl),O(),Q1(n.Name),O(2),se("ngIf",n.Description)("ngIfElse",i),O(2),se("icon",n.AntiHabit?r.faCheck:r.faXmark),O(2),se("routerLink",n.ViewUrl)}}function cPe(e,t){}function lPe(e,t){}function uPe(e,t){e&1&&(V(0,"i"),I(1,"No description"),N())}var $R=(()=>{let t=class t{constructor(){this.faCheck=Xg,this.faXmark=Yg,this.models=[],this.changeState=new jt,this.decrementState=new jt}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Ce({type:t,selectors:[["app-habits-table"]],inputs:{models:"models"},outputs:{changeState:"changeState",decrementState:"decrementState"},decls:20,vars:1,consts:[[1,"uk-table","uk-table-striped","uk-table-middle"],[1,"hide-in-mobile"],[1,"centered"],[4,"ngFor","ngForOf"],["quantifiableAction",""],["booleanAction",""],["defaultDescription",""],["type","checkbox","class","uk-checkbox",3,"checked"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[4,"ngIf","ngIfElse"],[3,"icon"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],["type","checkbox",1,"uk-checkbox",3,"checked","change"],["appNoContextMenu","",1,"uk-button","uk-button-default","increment-button",3,"click","contextmenu"],[1,"description"]],template:function(i,o){i&1&&(V(0,"table",0)(1,"thead")(2,"tr"),ht(3,"th"),V(4,"th"),I(5,"Name"),N(),V(6,"th",1),I(7,"Description"),N(),V(8,"th",2),I(9,"Anti"),N(),V(10,"th"),I(11,"Action"),N()()(),V(12,"tbody"),st(13,sPe,14,7,"tr",3),N()(),st(14,cPe,0,0,"ng-template",null,4,Ts)(16,lPe,0,0,"ng-template",null,5,Ts)(18,uPe,2,0,"ng-template",null,6,Ts)),i&2&&(O(13),se("ngForOf",o.models))},dependencies:[gi,x1,hn,zg,PR],styles:["p.description[_ngcontent-%COMP%]{text-wrap:nowrap;padding-right:10rem;width:28rem;overflow:hidden}.increment-button[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:center;align-items:center;padding:0rem;height:1.6rem;width:1.6rem;border:1px solid #999}.centered[_ngcontent-%COMP%]{display:flex;justify-content:center}"]});let e=t;return e})();function dPe(e,t){if(e&1){let n=X1();V(0,"section")(1,"h2"),I(2,"Completed Habits"),N(),V(3,"app-habits-table",4),Fe("changeState",function(i){fi(n);let o=ot();return di(o.uncompleteHabit(i))}),N()()}if(e&2){let n=ot();O(3),se("models",n.completedHabits)}}var BR=(()=>{let t=class t{constructor(r){this.api=r,this.habits=[]}get inCompleteHabits(){return this.habits.filter(r=>!this.isCompletedToday(r))}get completedHabits(){return this.habits.filter(r=>!r.AntiHabit&&this.isCompletedToday(r))}get failedAntiHabits(){return this.habits.filter(r=>r.AntiHabit&&this.isCompletedToday(r))}ngOnInit(){this.api.getHabits().pipe(ye(1)).subscribe(r=>{this.habits=r.data.map(i=>new M1(i))})}completeHabit(r){r.CompletedDates?.length||(r.CompletedDates=[]),r.CompletedDates.push(new Date().toLocaleDateString()),this.api.updateHabit(r).pipe(ye(1)).subscribe(i=>{r=new M1(i.data)})}uncompleteHabit(r){let i=new Date().toLocaleDateString(),o=r.CompletedDates.findIndex(a=>{let s=new Date(a).toLocaleDateString();return i===s});r.CompletedDates.splice(o,1),this.api.updateHabit(r).pipe(ye(1)).subscribe(a=>{r=new M1(a.data)})}isCompletedToday(r){return r.IsCompletedToday}};t.\u0275fac=function(i){return new(i||t)(W(_o))},t.\u0275cmp=Ce({type:t,selectors:[["app-list-page"]],decls:10,vars:2,consts:[[1,"list-header"],["routerLink","/habits/new",1,"uk-button","uk-button-primary"],[3,"models","changeState","decrementState"],[4,"ngIf"],[3,"models","changeState"]],template:function(i,o){i&1&&(V(0,"div",0)(1,"h1"),I(2,"Habits"),N(),V(3,"nav")(4,"a",1),I(5,"New Habit"),N()()(),V(6,"main")(7,"section")(8,"app-habits-table",2),Fe("changeState",function(s){return o.completeHabit(s)})("decrementState",function(s){return o.uncompleteHabit(s)}),N()(),st(9,dPe,4,1,"section",3),N()),i&2&&(O(8),se("models",o.inCompleteHabits),O(),se("ngIf",o.completedHabits.length>0))},dependencies:[x1,hn,$R]});let e=t;return e})();function pPe(e,t){e&1&&(V(0,"h1"),I(1,"Create Habit"),N())}function hPe(e,t){if(e&1&&(V(0,"h1"),I(1),N()),e&2){let n=ot();O(),be("Edit Habit: ",n.model.Name,"")}}function mPe(e,t){if(e&1&&(v1(0),V(1,"option",16),I(2),N(),y1()),e&2){let n=t.$implicit;O(),se("value",n.Id),O(),Q1(n.Name)}}function gPe(e,t){if(e&1){let n=X1();V(0,"div",17)(1,"label",18),I(2," Target Value "),V(3,"input",19),Yt("ngModelChange",function(i){fi(n);let o=ot();return tn(o.model.TargetValue,i)||(o.model.TargetValue=i),di(i)}),N()()()}if(e&2){let n=ot();O(3),Wt("ngModel",n.model.TargetValue)}}var qh=(()=>{let t=class t extends ul{constructor(r,i,o){super(),this.router=r,this.api=i,this.goalApi=o,this.goals$=new On([])}ngOnInit(){this.goalApi.listGoals().pipe(ye(1)).subscribe(r=>this.goals$.next(r.data.map(i=>new lr(i))))}submitForm(){let r=new M1(this.model);this.creating&&this.api.createHabit(r).pipe(ye(1)).subscribe(()=>this.router.navigate(["/"])),this.api.updateHabit(r).pipe(ye(1)).subscribe(()=>this.router.navigate(r.ViewUrl))}};t.\u0275fac=function(i){return new(i||t)(W(Qt),W(_o),W(Qn))},t.\u0275cmp=Ce({type:t,selectors:[["app-habit-form"]],features:[sr],decls:26,vars:11,consts:[["action",""],["ngForm",""],["for","new-habit-input",1,"uk-form-label"],["id","new-habit-input","name","new-habit-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-habit-description",1,"uk-form-label"],["id","new-habit-description","name","new-habit-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","associated-goal",1,"uk-form-label"],["name","associated-goal","id","associated-goal",1,"uk-input",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["id","boolean-selectors"],["for","anti-habit",1,"uk-form-label"],["id","anti-habit","name","anti-habit","type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange"],["for","quantifiable-habit",1,"uk-form-label"],["id","quantifiable-habit","name","quantifiable-habit","type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange"],["class","uk-form-label target-value",4,"ngIf"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"],[3,"value"],[1,"uk-form-label","target-value"],["for","target-value"],["name","target-value","type","number","placeholder","eg. 5 (km run)",1,"uk-input",3,"ngModel","ngModelChange"]],template:function(i,o){i&1&&(st(0,pPe,2,0,"h1")(1,hPe,2,1),V(2,"form",0,1)(4,"label",2),I(5,"Habit Name"),N(),V(6,"input",3),Yt("ngModelChange",function(s){return tn(o.model.Name,s)||(o.model.Name=s),s}),N(),V(7,"label",4),I(8," Habit Description "),N(),V(9,"textarea",5),Yt("ngModelChange",function(s){return tn(o.model.Description,s)||(o.model.Description=s),s}),N(),V(10,"label",6),I(11,"Associated Goal"),N(),V(12,"select",7),Yt("ngModelChange",function(s){return tn(o.model.Goal,s)||(o.model.Goal=s),s}),st(13,mPe,3,2,"ng-container",8),hi(14,"async"),N(),V(15,"div",9)(16,"label",10)(17,"input",11),Yt("ngModelChange",function(s){return tn(o.model.AntiHabit,s)||(o.model.AntiHabit=s),s}),N(),I(18," Anti Habit "),N(),V(19,"label",12)(20,"input",13),Yt("ngModelChange",function(s){return tn(o.model.IsQuantifiable,s)||(o.model.IsQuantifiable=s),s}),N(),I(21," Quantifiable "),N()(),st(22,gPe,4,1,"div",14),V(23,"div")(24,"button",15),Fe("click",function(){return o.submitForm()}),I(25),N()()()),i&2&&(a3(0,o.creating?0:1),O(6),Wt("ngModel",o.model.Name),O(3),Wt("ngModel",o.model.Description),O(3),Wt("ngModel",o.model.Goal),O(),se("ngForOf",mi(14,9,o.goals$)),O(4),Wt("ngModel",o.model.AntiHabit),O(3),Wt("ngModel",o.model.IsQuantifiable),O(2),se("ngIf",o.model.IsQuantifiable),O(3),be(" ",o.creating?"Create":"Update"," Habit "))},dependencies:[gi,x1,La,sg,cg,b1,XD,rl,z6,vi,Ha,Wr,C2,j9],styles:["#boolean-selectors[_ngcontent-%COMP%]{margin-top:.5rem;margin-right:.5rem}#boolean-selectors[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:1rem}.target-value[_ngcontent-%COMP%]{margin-top:1rem}"]});let e=t;return e})();var UR=(()=>{let t=class t{constructor(){this.partialModel={CreatedAt:new Date().toLocaleDateString()}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Ce({type:t,selectors:[["app-new-page"]],decls:1,vars:2,consts:[[3,"creating","model"]],template:function(i,o){i&1&&ht(0,"app-habit-form",0),i&2&&se("creating",!0)("model",o.partialModel)},dependencies:[qh],encapsulation:2});let e=t;return e})();var jR=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Ce({type:t,selectors:[["app-schedule-page"]],decls:2,vars:0,template:function(i,o){i&1&&(V(0,"h1"),I(1,"Schedule"),N())},encapsulation:2});let e=t;return e})();var l2=(()=>{let t=class t extends No{constructor(r){super(),this.http=r}getTodaysRemainingTasks(){throw new Error("Not implemented")}getTasks(){let r=Kt("/tasks");return this.http.get(r)}getTask(r){let i=Kt(`/tasks/${r}`);return this.http.get(i)}createTask(r){let i=Kt("/tasks");return this.http.post(i,r)}updateTask(r){let i=Kt(`/tasks/${r.Id}`);return this.http.put(i,r)}deleteTask(r){let i=Kt(`/tasks/${r}`);return this.http.delete(i)}};t.\u0275fac=function(i){return new(i||t)(ge($s))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();var qR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(ye(1)).subscribe(i=>{this.model=new eo(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteTask(this.model?.Id).pipe(ye(1)).subscribe(()=>this.router.navigateByUrl("/tasks"))}};t.\u0275fac=function(i){return new(i||t)(W(l2),W(Vt),W(Qt))},t.\u0275cmp=Ce({type:t,selectors:[["app-delete-task-page"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),N(),V(2,"p"),I(3,` Deleting this model will make it unrecoverable.
`),N(),V(4,"button",0),Fe("click",function(){return o.deleteModel()}),I(5),N()),i&2&&(O(),be("Delete ",o.model==null?null:o.model.Name,"?"),O(4),be(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();function vPe(e,t){if(e&1&&(v1(0),V(1,"p",10),I(2),N(),y1()),e&2){let n=ot().$implicit;O(2),be(" ",n.Description," ")}}function yPe(e,t){if(e&1&&(v1(0),I(1),hi(2,"date"),y1()),e&2){let n=ot().$implicit;O(),be(" ",mi(2,1,n.CompleteBy)," ")}}var xPe=e=>({"overdue-task":e});function CPe(e,t){if(e&1){let n=X1();V(0,"tr",5)(1,"td")(2,"input",6),Yt("ngModelChange",function(i){let a=fi(n).$implicit;return tn(a.Completed,i)||(a.Completed=i),di(i)}),Fe("change",function(){let o=fi(n).$implicit,a=ot();return di(a.changeState.emit(o))}),N()(),V(3,"td")(4,"a",7),I(5),N()(),V(6,"td",1),st(7,vPe,3,1,"ng-container",8),N(),V(8,"td",1),I(9),N(),V(10,"td"),st(11,yPe,3,3,"ng-container",8),N(),V(12,"td")(13,"a",9),I(14,"View"),N()()()}if(e&2){let n=t.$implicit;ot();let r=J4(17),i=J4(19);se("ngClass",WB(10,xPe,n.isOverdue)),O(2),Wt("ngModel",n.Completed),O(2),se("routerLink",n.ViewUrl),O(),be(" ",n.Name," "),O(2),se("ngIf",n.Description)("ngIfElse",r),O(2),Q1(n.ImportanceHuman),O(2),se("ngIf",n.CompleteBy)("ngIfElse",i),O(2),se("routerLink",n.ViewUrl)}}function bPe(e,t){e&1&&(V(0,"i"),I(1,"No description"),N())}function MPe(e,t){e&1&&(V(0,"i"),I(1,"No date set"),N())}var GR=(()=>{let t=class t{constructor(){this.models=[],this.changeState=new jt}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Ce({type:t,selectors:[["app-tasks-table"]],inputs:{models:"models"},outputs:{changeState:"changeState"},decls:20,vars:1,consts:[[1,"uk-table","uk-table-striped"],[1,"hide-in-mobile"],[3,"ngClass",4,"ngFor","ngForOf"],["defaultDescription",""],["defaultCompleteBy",""],[3,"ngClass"],["type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange","change"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[4,"ngIf","ngIfElse"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],[1,"description"]],template:function(i,o){i&1&&(V(0,"table",0)(1,"thead")(2,"tr"),ht(3,"th"),V(4,"th"),I(5,"Name"),N(),V(6,"th",1),I(7,"Description"),N(),V(8,"th",1),I(9,"Importance"),N(),V(10,"th"),I(11,"Due Date"),N(),V(12,"th"),I(13,"Action"),N()()(),V(14,"tbody"),st(15,CPe,15,12,"tr",2),N()(),st(16,bPe,2,0,"ng-template",null,3,Ts)(18,MPe,2,0,"ng-template",null,4,Ts)),i&2&&(O(15),se("ngForOf",o.models))},dependencies:[yU,gi,x1,hn,rl,vi,Wr,Lo]});let e=t;return e})();function SPe(e,t){if(e&1){let n=X1();V(0,"section")(1,"h2"),I(2,"Completed Tasks"),N(),V(3,"app-tasks-table",3),Fe("changeState",function(i){fi(n);let o=ot();return di(o.updateTask(i))}),N()()}if(e&2){let n=ot();O(3),se("models",n.completedTasks)}}var WR=(()=>{let t=class t{constructor(r){this.api=r,this.tasks=[]}get completedTasks(){return this.tasks.filter(r=>r.Completed)}get incompleteTasks(){return this.tasks.filter(r=>!r.Completed)}ngOnInit(){this.api.getTasks().pipe(ye(1)).subscribe(r=>{this.tasks=r.data.map(i=>new eo(i))})}updateTask(r){this.api.updateTask(r).pipe(ye(1)).subscribe(i=>{r=new eo(i.data)})}};t.\u0275fac=function(i){return new(i||t)(W(l2))},t.\u0275cmp=Ce({type:t,selectors:[["app-tasks-page"]],decls:9,vars:2,consts:[[1,"list-header"],["routerLink","/tasks/new",1,"uk-button","uk-button-primary"],[1,"incompleteTasks.length",">","0"],[3,"models","changeState"],[4,"ngIf"]],template:function(i,o){i&1&&(V(0,"div",0)(1,"h1"),I(2,"Tasks"),N(),V(3,"nav")(4,"a",1),I(5,"New Task"),N()()(),V(6,"section",2)(7,"app-tasks-table",3),Fe("changeState",function(s){return o.updateTask(s)}),N()(),st(8,SPe,4,1,"section",4)),i&2&&(O(7),se("models",o.incompleteTasks),O(),se("ngIf",o.completedTasks.length>0))},dependencies:[x1,hn,GR],styles:[".overdue-task[_ngcontent-%COMP%]{color:#f5222d}"]});let e=t;return e})();function EPe(e,t){e&1&&(V(0,"h1"),I(1,"Create a New Task"),N())}function DPe(e,t){if(e&1&&(V(0,"h1"),I(1),N()),e&2){let n=ot();O(),be("Edit Task: ",n.model.Name,"")}}function zPe(e,t){if(e&1&&(v1(0),V(1,"option",19),I(2),N(),y1()),e&2){let n=t.$implicit;O(),se("value",n.Id),O(),Q1(n.Name)}}var Wh=(()=>{let t=class t extends ul{constructor(r,i,o){super(),this.api=r,this.goalApi=i,this.router=o,this.goals$=new On([])}ngOnInit(){this.goalApi.listGoals().pipe(ye(1)).subscribe(r=>this.goals$.next(r.data.map(i=>new lr(i))))}submitForm(){let r=new eo(this.model);if(this.creating){this.api.createTask(r).pipe(ye(1)).subscribe(()=>this.router.navigate(["/tasks"]));return}this.api.updateTask(r).pipe(ye(1)).subscribe(()=>this.router.navigate(r.ViewUrl))}updateImportance(r){let i=r.target.value;this.model.Importance=parseInt(i,10)}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString()}};t.\u0275fac=function(i){return new(i||t)(W(l2),W(Qn),W(Qt))},t.\u0275cmp=Ce({type:t,selectors:[["app-task-form"]],features:[sr],decls:33,vars:8,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","importance-input",1,"uk-form-label"],["id","importance-input","name","importance-input",1,"uk-input",3,"change"],["value","1","selected",""],["value","2"],["value","3"],["value","4"],["value","5"],["for","associated-goal",1,"uk-form-label"],["name","associated-goal","id","associated-goal",1,"uk-input",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"],[3,"value"]],template:function(i,o){i&1&&(st(0,EPe,2,0,"h1")(1,DPe,2,1),V(2,"form",0,1)(4,"label",2),I(5,"Task Name"),N(),V(6,"input",3),Yt("ngModelChange",function(s){return tn(o.model.Name,s)||(o.model.Name=s),s}),N(),V(7,"label",4),I(8," Task Description "),N(),V(9,"textarea",5),Yt("ngModelChange",function(s){return tn(o.model.Description,s)||(o.model.Description=s),s}),N(),V(10,"label",6),I(11," Importance (low number = low importance; high number = high importance) "),N(),V(12,"select",7),Fe("change",function(s){return o.updateImportance(s)}),V(13,"option",8),I(14,"Low"),N(),V(15,"option",9),I(16,"Low-Medium"),N(),V(17,"option",10),I(18,"Medium"),N(),V(19,"option",11),I(20,"Medium-High"),N(),V(21,"option",12),I(22,"High"),N()(),V(23,"label",13),I(24,"Associated Goal"),N(),V(25,"select",14),Yt("ngModelChange",function(s){return tn(o.model.Goal,s)||(o.model.Goal=s),s}),st(26,zPe,3,2,"ng-container",15),hi(27,"async"),N(),V(28,"label",16),I(29,"Complete By"),N(),V(30,"input",17),Fe("change",function(s){return o.updateCompleteBy(s)}),N(),V(31,"button",18),Fe("click",function(){return o.submitForm()}),I(32),N()()),i&2&&(a3(0,o.creating?0:1),O(6),Wt("ngModel",o.model.Name),O(3),Wt("ngModel",o.model.Description),O(16),Wt("ngModel",o.model.Goal),O(),se("ngForOf",mi(27,6,o.goals$)),O(6),be(" ",o.creating?"Create":"Update"," Task "))},dependencies:[gi,La,sg,cg,b1,z6,vi,Ha,Wr,C2,j9]});let e=t;return e})();var YR=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Ce({type:t,selectors:[["app-new-task-page"]],decls:1,vars:1,consts:[[3,"creating"]],template:function(i,o){i&1&&ht(0,"app-task-form",0),i&2&&se("creating",!0)},dependencies:[Wh],encapsulation:2});let e=t;return e})();var XR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.goalApi=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(ye(1)).subscribe(i=>{this.model=new eo(i.data),this.goalApi.getGoal(this.model?.Goal).pipe(ye(1)).subscribe(o=>{this.goalModel=new lr(o.data)})})}};t.\u0275fac=function(i){return new(i||t)(W(l2),W(Vt),W(Qn))},t.\u0275cmp=Ce({type:t,selectors:[["app-task-page"]],decls:17,vars:13,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right","uk-margin-small-top",3,"routerLink"],[1,"uk-button-danger","uk-button","uk-margin-small-top",3,"routerLink"],[3,"routerLink"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),N(),V(2,"button",0),I(3),N(),V(4,"button",1),I(5),N(),V(6,"p"),I(7),N(),V(8,"p"),I(9),N(),V(10,"p"),I(11),hi(12,"date"),N(),V(13,"p"),I(14," Associated Goal: "),V(15,"a",2),I(16),N()()),i&2&&(O(),Q8(" Task: ",o.model==null?null:o.model.Name," (",o.model!=null&&o.model.Completed?"Completed":"Incomplete",`)
`),O(),se("routerLink",o.model==null?null:o.model.EditUrl),O(),be(" Edit: ",o.model==null?null:o.model.Name,`
`),O(),se("routerLink",o.model==null?null:o.model.DeleteUrl),O(),be(" Delete: ",o.model==null?null:o.model.Name,`
`),O(2),be(" ",o.model==null?null:o.model.Description,`
`),O(2),be("Importance: ",o.model==null?null:o.model.ImportanceHuman,""),O(2),be("Complete By: ",mi(12,11,o.model==null?null:o.model.CompleteBy),""),O(4),se("routerLink",o.goalModel==null?null:o.goalModel.ViewUrl),O(),be(" ",o.goalModel==null?null:o.goalModel.Name," "))},dependencies:[hn,Lo],encapsulation:2});let e=t;return e})();var u2=class extends _a{constructor(t){super(t)}get ViewUrl(){return["/logbook",this.Id]}get EditUrl(){return["/logbook",this.Id,"edit"]}get DeleteUrl(){return["/logbook",this.Id,"delete"]}};var f2=(()=>{let t=class t extends No{constructor(r){super(),this.http=r}getLogbooks(){let r=Kt("/logbooks");return this.http.get(r)}getLogbook(r){let i=Kt(`/logbooks/${r}`);return this.http.get(i)}createLogbook(r){let i=Kt("/logbooks");return this.http.post(i,r)}updateLogbook(r){let i=Kt(`/logbooks/${r.Id}`);return this.http.put(i,r)}deleteLogbook(r){let i=Kt(`/logbooks/${r}`);return this.http.delete(i)}};t.\u0275fac=function(i){return new(i||t)(ge($s))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function HPe(e,t){if(e&1&&(V(0,"tr")(1,"td")(2,"a",4),I(3),N()(),V(4,"td"),I(5),hi(6,"date"),N(),V(7,"td")(8,"a",5),I(9," View "),N()()()),e&2){let n=t.$implicit;O(2),se("routerLink",n.ViewUrl),O(),be(" ",n.Name," "),O(2),Q1(mi(6,4,n.CreatedAt)),O(3),se("routerLink",n.ViewUrl)}}var QR=(()=>{let t=class t{constructor(r){this.api=r,this.logbooks=[]}ngOnInit(){this.api.getLogbooks().pipe(ye(1)).subscribe(r=>{this.logbooks=r.data.map(i=>new u2(i))})}};t.\u0275fac=function(i){return new(i||t)(W(f2))},t.\u0275cmp=Ce({type:t,selectors:[["app-list"]],decls:19,vars:1,consts:[[1,"list-header"],["routerLink","/logbook/new",1,"uk-button","uk-button-primary"],[1,"uk-table"],[4,"ngFor","ngForOf"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"]],template:function(i,o){i&1&&(V(0,"div",0)(1,"h1"),I(2,"Logbook"),N(),V(3,"section")(4,"nav")(5,"a",1),I(6,"New Entry"),N()()()(),V(7,"section")(8,"table",2)(9,"thead")(10,"tr")(11,"th"),I(12,"Name"),N(),V(13,"th"),I(14,"Created"),N(),V(15,"th"),I(16,"Action"),N()()(),V(17,"tbody"),st(18,HPe,10,6,"tr",3),N()()()),i&2&&(O(18),se("ngForOf",o.logbooks))},dependencies:[gi,hn,Lo]});let e=t;return e})();var KR=(()=>{let t=class t{constructor(r,i){this.router=r,this.api=i,this.model={CreatedAt:new Date().toLocaleDateString()}}submitForm(){let r=new u2(this.model);this.api.createLogbook(r).subscribe(()=>this.router.navigateByUrl("/logbook"))}};t.\u0275fac=function(i){return new(i||t)(W(Qt),W(f2))},t.\u0275cmp=Ce({type:t,selectors:[["app-new"]],decls:12,vars:2,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","20",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(V(0,"h1"),I(1,"New Logbook"),N(),V(2,"form",0,1)(4,"label",2),I(5,"Logbook Name"),N(),V(6,"input",3),Yt("ngModelChange",function(s){return tn(o.model.Name,s)||(o.model.Name=s),s}),N(),V(7,"label",4),I(8," Content "),N(),V(9,"textarea",5),Yt("ngModelChange",function(s){return tn(o.model.Content,s)||(o.model.Content=s),s}),N(),V(10,"button",6),Fe("click",function(){return o.submitForm()}),I(11," Add Logbook Entry "),N()()),i&2&&(O(6),Wt("ngModel",o.model.Name),O(3),Wt("ngModel",o.model.Content))},dependencies:[La,b1,vi,Ha,Wr,C2]});let e=t;return e})();var ZR=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getLogbook(r).pipe(ye(1)).subscribe(i=>{this.model=new u2(i.data)})}};t.\u0275fac=function(i){return new(i||t)(W(f2),W(Vt))},t.\u0275cmp=Ce({type:t,selectors:[["app-show"]],decls:11,vars:9,consts:[[1,"uk-button","uk-button-secondary","uk-margin-small-right",3,"routerLink"],[1,"uk-button","uk-button-danger",3,"routerLink"],[1,"uk-text-default"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),N(),V(2,"button",0),I(3),N(),V(4,"button",1),I(5),N(),V(6,"div",2),I(7),hi(8,"date"),N(),V(9,"pre"),I(10),N()),i&2&&(O(),be("Task: ",o.model==null?null:o.model.Name,""),O(),se("routerLink",o.model==null?null:o.model.EditUrl),O(),be(" Edit: ",o.model==null?null:o.model.Name,`
`),O(),se("routerLink",o.model==null?null:o.model.DeleteUrl),O(),be(" Delete: ",o.model==null?null:o.model.Name,`
`),O(2),be("Created: ",mi(8,7,o.model==null?null:o.model.CreatedAt),""),O(3),be("    ",o.model==null?null:o.model.Content,`
`))},dependencies:[hn,Lo]});let e=t;return e})();var JR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getLogbook(r).pipe(ye(1)).subscribe(i=>{this.model=new u2(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteLogbook(this.model?.Id).pipe(ye(1)).subscribe(()=>this.router.navigateByUrl("/logbook"))}};t.\u0275fac=function(i){return new(i||t)(W(f2),W(Vt),W(Qt))},t.\u0275cmp=Ce({type:t,selectors:[["app-delete"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),N(),V(2,"p"),I(3,` Deleting this model will make it unrecoverable.
`),N(),V(4,"button",0),Fe("click",function(){return o.deleteModel()}),I(5),N()),i&2&&(O(),be("Delete ",o.model==null?null:o.model.Name,"?"),O(4),be(" Delete ",o.model==null?null:o.model.Name,`
`))}});let e=t;return e})();var eO=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(ye(1)).subscribe(i=>{this.model=i.data})}};t.\u0275fac=function(i){return new(i||t)(W(Qn),W(Vt))},t.\u0275cmp=Ce({type:t,selectors:[["app-update"]],decls:1,vars:2,consts:[[3,"creating","model"]],template:function(i,o){i&1&&ht(0,"app-goal-form",0),i&2&&se("creating",!1)("model",o.model)},dependencies:[U5],encapsulation:2});let e=t;return e})();var tO=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(ye(1)).subscribe(i=>{this.model=i.data})}};t.\u0275fac=function(i){return new(i||t)(W(_o),W(Vt))},t.\u0275cmp=Ce({type:t,selectors:[["app-update"]],decls:1,vars:2,consts:[[3,"creating","model"]],template:function(i,o){i&1&&ht(0,"app-habit-form",0),i&2&&se("creating",!1)("model",o.model)},dependencies:[qh],encapsulation:2});let e=t;return e})();var nO=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(ye(1)).subscribe(i=>{this.model=i.data})}};t.\u0275fac=function(i){return new(i||t)(W(l2),W(Vt))},t.\u0275cmp=Ce({type:t,selectors:[["app-update"]],decls:1,vars:2,consts:[[3,"creating","model"]],template:function(i,o){i&1&&ht(0,"app-task-form",0),i&2&&se("creating",!1)("model",o.model)},dependencies:[Wh],encapsulation:2});let e=t;return e})();var rO=(()=>{let t=class t{constructor(r){this.configService=r,this.customServerUrl=this.configService.getCustomServerUrl()??"",this.formFeedback=""}saveCustomServerUrl(){this.customServerUrl?(this.configService.setCustomServerUrl(this.customServerUrl),this.formFeedback="Custom server URL saved!"):this.formFeedback="Please enter a valid server URL."}clearCustomServerUrl(){this.customServerUrl="",this.configService.clearCustomServerUrl(),this.formFeedback="Custom server URL cleared!"}};t.\u0275fac=function(i){return new(i||t)(W(B6))},t.\u0275cmp=Ce({type:t,selectors:[["app-configure"]],decls:28,vars:2,consts:[["href","https://github.com/hudson-newey/habit-tracker/tree/main/server"],["href","https://github.com/hudson-newey/habit-tracker"],["type","text","placeholder","Server URL",1,"uk-input",3,"ngModel","ngModelChange"],[1,"action-buttons"],["id","save-server-button",1,"uk-button","uk-button-primary",3,"click"],["id","remove-server-button",1,"uk-button","uk-button-danger",3,"click"],[1,"uk-text-secondary"]],template:function(i,o){i&1&&(V(0,"h1"),I(1,"Configure"),N(),V(2,"p"),I(3," This web app is intended to be used with the GoLang API found "),V(4,"a",0),I(5,"on GitHub"),N(),I(6,`.
`),N(),V(7,"p"),I(8,` It is possible to use this app without the API, but you will not be able to sync your Todo items and Habits between devices.
`),N(),V(9,"p"),I(10," You are free to use this GitHub pages hosted version of the application with your own hosted server (or without) by inputting the custom URL below, or you can host your own instance of the server, client and mobile application using the code available "),V(11,"a",1),I(12,"here"),N(),I(13,`.
`),N(),V(14,"section")(15,"h2"),I(16,"Custom Server URL"),N(),V(17,"p"),I(18," If you are using a custom server, please input the URL below. If you are using the habit tracker without device syncing, you can leave this blank. "),N(),V(19,"input",2),Yt("ngModelChange",function(s){return tn(o.customServerUrl,s)||(o.customServerUrl=s),s}),N(),V(20,"div",3)(21,"button",4),Fe("click",function(){return o.saveCustomServerUrl()}),I(22," Save "),N(),V(23,"button",5),Fe("click",function(){return o.clearCustomServerUrl()}),I(24," Remove Server "),N()(),ht(25,"div"),V(26,"p",6),I(27),N()()),i&2&&(O(19),Wt("ngModel",o.customServerUrl),O(8),Q1(o.formFeedback))},dependencies:[b1,vi,Wr],styles:[".action-buttons[_ngcontent-%COMP%]{margin-top:.5rem}.action-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:.5rem}"]});let e=t;return e})();var iO=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getLogbook(r).pipe(ye(1)).subscribe(i=>{this.model=i.data})}submitForm(){let r=new u2(this.model);this.api.updateLogbook(r).pipe(ye(1)).subscribe(()=>{this.router.navigate(r.ViewUrl)})}};t.\u0275fac=function(i){return new(i||t)(W(f2),W(Vt),W(Qt))},t.\u0275cmp=Ce({type:t,selectors:[["app-edit"]],decls:12,vars:3,consts:[["action",""],["ngForm",""],["for","logbook-name-input",1,"uk-form-label"],["id","logbook-name-input","name","logbook-name-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","logbook-content-input",1,"uk-form-label"],["id","logbook-content-input","name","logbook-content-input","rows","20",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),N(),V(2,"form",0,1)(4,"label",2),I(5,"Logbook Name"),N(),V(6,"input",3),Yt("ngModelChange",function(s){return tn(o.model.Name,s)||(o.model.Name=s),s}),N(),V(7,"label",4),I(8,"Logbook Content"),N(),V(9,"textarea",5),Yt("ngModelChange",function(s){return tn(o.model.Content,s)||(o.model.Content=s),s}),N(),V(10,"button",6),Fe("click",function(){return o.submitForm()}),I(11," Update Logbook Entry "),N()()),i&2&&(O(),be("Edit: ",o.model.Name,""),O(5),Wt("ngModel",o.model.Name),O(3),Wt("ngModel",o.model.Content))},dependencies:[La,b1,vi,Ha,Wr,C2]});let e=t;return e})();var LPe=[{path:"goals",component:dH},{path:"goals/new",component:pH},{path:"goals/:id",component:fH},{path:"goals/:id/delete",component:uH},{path:"goals/:id/edit",component:eO},{path:"",component:BR},{path:"habits/new",component:UR},{path:"habits/:id",component:OR},{path:"habits/:id/delete",component:hH},{path:"habits/:id/edit",component:tO},{path:"tasks",component:WR},{path:"tasks/new",component:YR},{path:"tasks/:id",component:XR},{path:"tasks/:id/delete",component:qR},{path:"tasks/:id/edit",component:nO},{path:"logbook",component:QR},{path:"logbook/new",component:KR},{path:"logbook/:id",component:ZR},{path:"logbook/:id/delete",component:JR},{path:"logbook/:id/edit",component:iO},{path:"schedule",component:jR},{path:"configure",component:rO}],Kae=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Cr({type:t}),t.\u0275inj=br({imports:[lH.forRoot(LPe),lH]});let e=t;return e})();var APe=()=>["/"],VPe=()=>({exact:!0}),Xh=()=>["uk-active"],oO=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Ce({type:t,selectors:[["app-navbar"]],decls:23,vars:14,consts:[[1,"uk-navbar-container","uk-navbar-transparent"],[1,"uk-container","navbar-container"],[1,"uk-navbar-left"],["routerLinkActive","uk-active",1,"uk-navbar-item","uk-logo",3,"routerLink"],[1,"uk-nav-primary","hide-in-mobile"],[1,"uk-navbar-nav"],[3,"routerLinkActiveOptions","routerLinkActive"],["routerLink","/",1,"uk-link","uk-navbar-item"],[3,"routerLinkActive"],["routerLink","/goals",1,"uk-link","uk-navbar-item"],["routerLink","/tasks",1,"uk-link","uk-navbar-item"],["routerLink","/logbook",1,"uk-link","uk-navbar-item"],[1,"navbar-right","hide-in-mobile"],["routerLink","/configure",1,"uk-link-muted","uk-navbar-item"]],template:function(i,o){i&1&&(V(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"strong",4),I(5,"Goal Tracker"),N()(),V(6,"ul",5)(7,"li",6)(8,"a",7),I(9,"Habits"),N()(),V(10,"li",8)(11,"a",9),I(12,"Goals"),N()(),V(13,"li",8)(14,"a",10),I(15,"Tasks"),N()(),V(16,"li",8)(17,"a",11),I(18,"Logbook"),N()(),V(19,"span",12)(20,"li",8)(21,"a",13),I(22,"Configure Server"),N()()()()()()()),i&2&&(O(3),se("routerLink",c3(7,APe)),O(4),se("routerLinkActiveOptions",c3(8,VPe))("routerLinkActive",c3(9,Xh)),O(3),se("routerLinkActive",c3(10,Xh)),O(3),se("routerLinkActive",c3(11,Xh)),O(3),se("routerLinkActive",c3(12,Xh)),O(4),se("routerLinkActive",c3(13,Xh)))},dependencies:[hn,eG],styles:[".navbar-right[_ngcontent-%COMP%]{position:absolute;right:5em}"]});let e=t;return e})();var Zae=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Ce({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"light-dark"],[1,"main-content"]],template:function(i,o){i&1&&(V(0,"div",0),ht(1,"app-navbar"),V(2,"div",1),ht(3,"router-outlet"),N()())},dependencies:[nH,oO],styles:[".main-content[_ngcontent-%COMP%]{position:relative;margin:auto;width:60%;margin-top:2rem}@media screen and (max-width: 768px){.main-content[_ngcontent-%COMP%]{width:calc(100% - 2.4rem);margin-left:1.2rem}}"]});let e=t;return e})();var Lw=(()=>{let t=class t extends No{constructor(){super()}applyApiRequest(r){let i=r.url.split("/")[1],o=Number(r.url.split("/")[2]),a=r.body;localStorage.getItem(i)===null&&this.updateTable(i,"[]");let s=this.tableValue(i);if(r.method==="GET"&&o){if(i==="goals"&&r.url.split("/").length>3){let l=r.url.split("/")[3],u=this.tableValue(l).filter(f=>f.Goal===String(o));return console.log(u),u}return s.find(l=>l.Id===o)}if(r.method==="POST"){let l=JSON.parse(JSON.stringify(a));l.Id=this.nextTableId(i),s.push(l),this.updateTable(i,JSON.stringify(s))}if(r.method==="DELETE"){let l=s.findIndex(u=>u.Id===o);s.splice(l,1),this.updateTable(i,JSON.stringify(s))}if(r.method==="PUT"){let l=s.findIndex(u=>u.Id===o);s[l]=a,this.updateTable(i,JSON.stringify(s))}return this.tableValue(i)}tableValue(r){return JSON.parse(localStorage.getItem(r))??[]}nextTableId(r){let i=this.tableValue(r);return i.length===0?1:Math.max(...i.map(o=>o.Id))+1}updateTable(r,i){localStorage.removeItem(r),localStorage.setItem(r,i)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Jae=(()=>{let t=class t{constructor(r,i){this.config=r,this.virtualDb=i}intercept(r,i){if(this.config.isCustomServerUrlSet())return i.handle(r);let o=this.virtualDb.applyApiRequest(r);return ke(new w6({status:200,body:{data:o}}))}};t.\u0275fac=function(i){return new(i||t)(ge(B6),ge(Lw))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();var kPe=[_o,Qn,l2,B6,f2,Lw];var ese=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Cr({type:t,bootstrap:[Zae]}),t.\u0275inj=br({providers:[{provide:ND,useClass:Jae,multi:!0},...kPe],imports:[q9,PU,Kae,fj,VU,pq]});let e=t;return e})();OU().bootstrapModule(ese).catch(e=>console.error(e));
