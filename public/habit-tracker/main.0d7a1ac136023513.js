"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[179],{538:(cf,Ud,rt)=>{var T3={};rt.r(T3),rt.d(T3,{JsonPatchError:()=>_n,_areEquals:()=>n5,applyOperation:()=>_4,applyPatch:()=>im,applyReducer:()=>knt,deepClone:()=>Ant,getValueByPointer:()=>rm,validate:()=>Hte,validator:()=>am});var bi={};rt.r(bi),rt.d(bi,{compare:()=>Bnt,generate:()=>uH,observe:()=>$nt,unobserve:()=>Pnt});var jo={};rt.r(jo),rt.d(jo,{aggregate:()=>Dc,bin:()=>RS,collect:()=>OS,compare:()=>e2e,countpattern:()=>PS,cross:()=>$S,density:()=>BS,dotbin:()=>jS,expression:()=>o2e,extent:()=>qS,facet:()=>Bm,field:()=>c2e,filter:()=>WS,flatten:()=>YS,fold:()=>XS,formula:()=>QS,generate:()=>l2e,impute:()=>ZS,joinaggregate:()=>KS,kde:()=>JS,key:()=>u2e,load:()=>f2e,lookup:()=>tE,multiextent:()=>d2e,multivalues:()=>h2e,params:()=>p2e,pivot:()=>nE,prefacet:()=>m2e,project:()=>rE,proxy:()=>g2e,quantile:()=>iE,relay:()=>v2e,sample:()=>aE,sequence:()=>sE,sieve:()=>y2e,subflow:()=>GS,timeunit:()=>oE,tupleindex:()=>b2e,values:()=>M2e,window:()=>cE});var Xl={};rt.r(Xl),rt.d(Xl,{interpolate:()=>Ic,interpolateArray:()=>cst,interpolateBasis:()=>sre,interpolateBasisClosed:()=>ore,interpolateCubehelix:()=>Qst,interpolateCubehelixLong:()=>Zst,interpolateDate:()=>dre,interpolateDiscrete:()=>Nst,interpolateHcl:()=>Wst,interpolateHclLong:()=>Yst,interpolateHsl:()=>Ust,interpolateHslLong:()=>jst,interpolateHue:()=>kst,interpolateLab:()=>Gst,interpolateNumber:()=>Bi,interpolateNumberArray:()=>wE,interpolateObject:()=>hre,interpolateRgb:()=>_E,interpolateRgbBasis:()=>sst,interpolateRgbBasisClosed:()=>ost,interpolateRound:()=>T5,interpolateString:()=>pre,interpolateTransformCss:()=>Fst,interpolateTransformSvg:()=>Rst,interpolateZoom:()=>Bst,piecewise:()=>TE,quantize:()=>Kst});var qo={};rt.r(qo),rt.d(qo,{bound:()=>pse,identifier:()=>uD,mark:()=>gse,overlap:()=>vse,render:()=>wse,viewlayout:()=>Vse});var Ql={};rt.r(Ql),rt.d(Ql,{axisticks:()=>Lse,datajoin:()=>Ase,encode:()=>Nse,legendentries:()=>kse,linkpath:()=>fD,pie:()=>dD,scale:()=>Pse,sortitems:()=>Use,stack:()=>pD});var g1={};rt.r(g1),rt.d(g1,{contour:()=>GD,geojson:()=>XD,geopath:()=>QD,geopoint:()=>ZD,geoshape:()=>KD,graticule:()=>JD,heatmap:()=>eL,isocontour:()=>UD,kde2d:()=>qD,projection:()=>cce});var I3={};rt.r(I3),rt.d(I3,{force:()=>sL});var lf={};rt.r(lf),rt.d(lf,{nest:()=>mL,pack:()=>vL,partition:()=>CL,stratify:()=>bL,tree:()=>_L,treelinks:()=>wL,treemap:()=>zL});var F3={};rt.r(F3),rt.d(F3,{label:()=>TL});var sr={};rt.r(sr),rt.d(sr,{loess:()=>IL,regression:()=>RL});var ks={};rt.r(ks),rt.d(ks,{voronoi:()=>hA});var R3={};rt.r(R3),rt.d(R3,{wordcloud:()=>mA});var O3={};rt.r(O3),rt.d(O3,{crossfilter:()=>gA,resolvefilter:()=>vA});var P3={};rt.r(P3),rt.d(P3,{Bounds:()=>Rn,CanvasHandler:()=>Wc,CanvasRenderer:()=>r7,DATE:()=>j2,DAY:()=>B1,DAYOFYEAR:()=>Qa,Dataflow:()=>A6,Debug:()=>Dte,Error:()=>hH,EventStream:()=>Nm,Gradient:()=>Tie,GroupItem:()=>Hg,HOURS:()=>wr,Handler:()=>Gc,HybridHandler:()=>JV,HybridRenderer:()=>Kg,Info:()=>Vte,Item:()=>zg,MILLISECONDS:()=>Pi,MINUTES:()=>xr,MONTH:()=>$1,Marks:()=>Sr,MultiPulse:()=>dS,None:()=>Ete,Operator:()=>jt,Parameters:()=>Am,Pulse:()=>Vc,QUARTER:()=>U2,RenderType:()=>Xc,Renderer:()=>Er,ResourceLoader:()=>pV,SECONDS:()=>ti,SVGHandler:()=>jV,SVGRenderer:()=>Qg,SVGStringRenderer:()=>KV,Scenegraph:()=>FV,TIME_UNITS:()=>IH,Transform:()=>Y,View:()=>U4e,WEEK:()=>Wn,Warn:()=>pH,YEAR:()=>x1,accessor:()=>$2,accessorFields:()=>F1,accessorName:()=>wn,array:()=>me,ascending:()=>um,bandwidthNRD:()=>bS,bin:()=>T1e,bootstrapCI:()=>I1e,boundClip:()=>rse,boundContext:()=>W5,boundItem:()=>IV,boundMark:()=>pae,boundStroke:()=>yo,changeset:()=>E4,clampRange:()=>Bte,codegenExpression:()=>R3e,compare:()=>CH,constant:()=>P1,cumulativeLogNormal:()=>HS,cumulativeNormal:()=>Rm,cumulativeUniform:()=>DS,dayofyear:()=>gne,debounce:()=>bH,defaultLocale:()=>KH,definition:()=>S1e,densityLogNormal:()=>zS,densityNormal:()=>MS,densityUniform:()=>VS,domChild:()=>Xn,domClear:()=>oi,domCreate:()=>qc,domFind:()=>RV,dotbin:()=>F1e,error:()=>Z,expressionFunction:()=>An,extend:()=>et,extent:()=>Wa,extentIndex:()=>Ute,falsy:()=>Mc,fastmap:()=>y6,field:()=>Kr,flush:()=>jte,font:()=>Og,fontFamily:()=>K5,fontSize:()=>is,format:()=>zm,formatLocale:()=>wm,formats:()=>sS,hasOwnProperty:()=>Ne,id:()=>r5,identity:()=>R1,inferType:()=>l1e,inferTypes:()=>u1e,ingest:()=>xt,inherits:()=>le,inrange:()=>C6,interpolate:()=>nV,interpolateColors:()=>bg,interpolateRange:()=>yie,intersect:()=>Jae,intersectBoxLine:()=>W6,intersectPath:()=>MV,intersectPoint:()=>_V,intersectRule:()=>Jie,isArray:()=>K,isBoolean:()=>_c,isDate:()=>wc,isFunction:()=>Je,isIterable:()=>qte,isNumber:()=>mt,isObject:()=>ve,isRegExp:()=>Gte,isString:()=>ge,isTuple:()=>Vm,key:()=>MH,lerp:()=>Wte,lineHeight:()=>Uc,loader:()=>Hm,locale:()=>s1e,logger:()=>mH,lruCache:()=>Yte,markup:()=>QV,merge:()=>Xte,mergeConfig:()=>g6,multiLineOffset:()=>NV,one:()=>m6,pad:()=>Qte,panLinear:()=>Ite,panLog:()=>Fte,panPow:()=>Rte,panSymlog:()=>Ote,parse:()=>smt,parseExpression:()=>HA,parseSelector:()=>f3,path:()=>Zm,pathCurves:()=>cV,pathEqual:()=>ise,pathParse:()=>j6,pathRectangle:()=>Bie,pathRender:()=>B5,pathSymbols:()=>$ie,pathTrail:()=>Uie,peek:()=>lt,point:()=>$g,projection:()=>BD,quantileLogNormal:()=>SS,quantileNormal:()=>Om,quantileUniform:()=>LS,quantiles:()=>yS,quantizeInterpolator:()=>Cie,quarter:()=>Pte,quartiles:()=>CS,random:()=>ni,randomInteger:()=>tit,randomKDE:()=>wS,randomLCG:()=>eit,randomLogNormal:()=>O1e,randomMixture:()=>P1e,randomNormal:()=>_S,randomUniform:()=>$1e,read:()=>p1e,regressionConstant:()=>AS,regressionExp:()=>U1e,regressionLinear:()=>NS,regressionLoess:()=>Y1e,regressionLog:()=>B1e,regressionPoly:()=>q1e,regressionPow:()=>j1e,regressionQuad:()=>kS,renderModule:()=>Jg,repeat:()=>i5,resetDefaultLocale:()=>Y2t,resetSVGClipId:()=>qie,resetSVGDefIds:()=>r4t,responseType:()=>h1e,runtimeContext:()=>w4e,sampleCurve:()=>$m,sampleLogNormal:()=>xS,sampleNormal:()=>Fm,sampleUniform:()=>ES,scale:()=>yt,sceneEqual:()=>tD,sceneFromJSON:()=>gae,scenePickVisit:()=>Ng,sceneToJSON:()=>mae,sceneVisit:()=>qi,sceneZOrder:()=>wV,scheme:()=>rV,serializeXML:()=>Pae,setHybridRendererOptions:()=>J3t,setRandom:()=>Krt,span:()=>a5,splitAccessPath:()=>Ga,stringValue:()=>ue,textMetrics:()=>Hr,timeBin:()=>Tne,timeFloor:()=>wne,timeFormatLocale:()=>b5,timeInterval:()=>E6,timeOffset:()=>Hne,timeSequence:()=>Vne,timeUnitSpecifier:()=>mne,timeUnits:()=>RH,toBoolean:()=>_H,toDate:()=>wH,toNumber:()=>O1,toSet:()=>Oi,toString:()=>xH,transform:()=>E1e,transforms:()=>N6,truncate:()=>Zte,truthy:()=>Jr,tupleid:()=>ke,typeParsers:()=>rS,utcFloor:()=>xne,utcInterval:()=>V6,utcOffset:()=>Sne,utcSequence:()=>Dne,utcdayofyear:()=>Cne,utcquarter:()=>$te,utcweek:()=>bne,version:()=>omt,visitArray:()=>xc,week:()=>vne,writeConfig:()=>v6,zero:()=>bc,zoomLinear:()=>gH,zoomLog:()=>vH,zoomPow:()=>lm,zoomSymlog:()=>yH});var or={};rt.r(or),rt.d(or,{accessPathDepth:()=>Vu,accessPathWithDatum:()=>PN,compile:()=>Ewt,contains:()=>ct,deepEqual:()=>Or,deleteNestedProperty:()=>Yy,duplicate:()=>qe,entries:()=>h3,every:()=>IN,fieldIntersection:()=>ON,flatAccessWithDatum:()=>Qle,getFirstDefined:()=>Nn,hasIntersection:()=>FN,hash:()=>ot,internalField:()=>Jle,isBoolean:()=>od,isEmpty:()=>$t,isEqual:()=>bmt,isInternalField:()=>e0e,isNullOrFalse:()=>TN,isNumeric:()=>Xy,keys:()=>te,logicalExpr:()=>cd,mergeDeep:()=>Yle,never:()=>Wle,normalize:()=>kue,normalizeAngle:()=>ud,omit:()=>er,pick:()=>Eu,prefixGenerator:()=>RN,removePathFromField:()=>$N,replaceAll:()=>vl,replacePathInField:()=>hi,resetIdCounter:()=>_mt,setEqual:()=>Xle,some:()=>gl,stringify:()=>Bt,titleCase:()=>ld,unique:()=>vs,uniqueId:()=>Kle,vals:()=>D1,varName:()=>dn,version:()=>Lwt});var Go={};function At(e){return"function"==typeof e}function $3(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}rt.r(Go),rt.d(Go,{carbong10:()=>Ext,carbong100:()=>Dxt,carbong90:()=>Vxt,carbonwhite:()=>Sxt,dark:()=>Kwt,excel:()=>Jwt,fivethirtyeight:()=>nxt,ggplot2:()=>rxt,googlecharts:()=>mxt,latimes:()=>oxt,powerbi:()=>xxt,quartz:()=>cxt,urbaninstitute:()=>pxt,version:()=>Lxt,vox:()=>lxt});const Mi=$3(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function B3(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class K1{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const a of n)a.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(At(r))try{r()}catch(a){t=a instanceof Mi?a.errors:[a]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const a of i)try{rI(a)}catch(s){t=t??[],s instanceof Mi?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Mi(t)}}add(t){var n;if(t&&t!==this)if(this.closed)rI(t);else{if(t instanceof K1){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&B3(n,t)}remove(t){const{_finalizers:n}=this;n&&B3(n,t),t instanceof K1&&t._removeParent(this)}}K1.EMPTY=(()=>{const e=new K1;return e.closed=!0,e})();const jd=K1.EMPTY;function nI(e){return e instanceof K1||e&&"closed"in e&&At(e.remove)&&At(e.add)&&At(e.unsubscribe)}function rI(e){At(e)?e():e.unsubscribe()}const U3={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},qd={setTimeout(e,t,...n){const{delegate:r}=qd;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=qd;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function iI(e){qd.setTimeout(()=>{const{onUnhandledError:t}=U3;if(!t)throw e;t(e)})}function vb(){}const j5e=yb("C",void 0,void 0);function yb(e,t,n){return{kind:e,value:t,error:n}}let j3=null;function Gd(e){if(U3.useDeprecatedSynchronousErrorHandling){const t=!j3;if(t&&(j3={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=j3;if(j3=null,n)throw r}}else e()}class Cb extends K1{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,nI(t)&&t.add(this)):this.destination=Z5e}static create(t,n,r){return new uf(t,n,r)}next(t){this.isStopped?Mb(function G5e(e){return yb("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Mb(function q5e(e){return yb("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Mb(j5e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Y5e=Function.prototype.bind;function bb(e,t){return Y5e.call(e,t)}class X5e{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Wd(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Wd(r)}else Wd(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Wd(n)}}}class uf extends Cb{constructor(t,n,r){let i;if(super(),At(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let a;this&&U3.useDeprecatedNextContext?(a=Object.create(t),a.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&bb(t.next,a),error:t.error&&bb(t.error,a),complete:t.complete&&bb(t.complete,a)}):i=t}this.destination=new X5e(i)}}function Wd(e){U3.useDeprecatedSynchronousErrorHandling?function W5e(e){U3.useDeprecatedSynchronousErrorHandling&&j3&&(j3.errorThrown=!0,j3.error=e)}(e):iI(e)}function Mb(e,t){const{onStoppedNotification:n}=U3;n&&qd.setTimeout(()=>n(e,t))}const Z5e={closed:!0,next:vb,error:function Q5e(e){throw e},complete:vb},_b="function"==typeof Symbol&&Symbol.observable||"@@observable";function Wo(e){return e}function aI(e){return 0===e.length?Wo:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}let Sn=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const a=function e7e(e){return e&&e instanceof Cb||function J5e(e){return e&&At(e.next)&&At(e.error)&&At(e.complete)}(e)&&nI(e)}(n)?n:new uf(n,r,i);return Gd(()=>{const{operator:s,source:o}=this;a.add(s?s.call(a,o):o?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=sI(r))((i,a)=>{const s=new uf({next:o=>{try{n(o)}catch(c){a(c),s.unsubscribe()}},error:a,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[_b](){return this}pipe(...n){return aI(n)(this)}toPromise(n){return new(n=sI(n))((r,i)=>{let a;this.subscribe(s=>a=s,s=>i(s),()=>r(a))})}}return e.create=t=>new e(t),e})();function sI(e){var t;return null!==(t=e??U3.Promise)&&void 0!==t?t:Promise}const t7e=$3(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let _i=(()=>{class e extends Sn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new oI(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new t7e}next(n){Gd(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Gd(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Gd(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:a}=this;return r||i?jd:(this.currentObservers=null,a.push(n),new K1(()=>{this.currentObservers=null,B3(a,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:a}=this;r?n.error(i):a&&n.complete()}asObservable(){const n=new Sn;return n.source=this,n}}return e.create=(t,n)=>new oI(t,n),e})();class oI extends _i{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:jd}}function cI(e){return At(e?.lift)}function On(e){return t=>{if(cI(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Tn(e,t,n,r,i){return new n7e(e,t,n,r,i)}class n7e extends Cb{constructor(t,n,r,i,a,s){super(t),this.onFinalize=a,this.shouldUnsubscribe=s,this._next=n?function(o){try{n(o)}catch(c){t.error(c)}}:super._next,this._error=i?function(o){try{i(o)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(o){t.error(o)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Mt(e,t){return On((n,r)=>{let i=0;n.subscribe(Tn(r,a=>{r.next(e.call(t,a,i++))}))})}function Yo(e){return this instanceof Yo?(this.v=e,this):new Yo(e)}function dI(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function Hb(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(s){return new Promise(function(o,c){!function i(a,s,o,c){Promise.resolve(c).then(function(l){a({value:l,done:o})},s)}(o,c,(s=e[a](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const hI=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function pI(e){return At(e?.then)}function mI(e){return At(e[_b])}function gI(e){return Symbol.asyncIterator&&At(e?.[Symbol.asyncIterator])}function vI(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const yI=function x7e(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function CI(e){return At(e?.[yI])}function bI(e){return function fI(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),a=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(d){r[d]&&(i[d]=function(h){return new Promise(function(p,m){a.push([d,h,p,m])>1||o(d,h)})})}function o(d,h){try{!function c(d){d.value instanceof Yo?Promise.resolve(d.value.v).then(l,u):f(a[0][2],d)}(r[d](h))}catch(p){f(a[0][3],p)}}function l(d){o("next",d)}function u(d){o("throw",d)}function f(d,h){d(h),a.shift(),a.length&&o(a[0][0],a[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield Yo(n.read());if(i)return yield Yo(void 0);yield yield Yo(r)}}finally{n.releaseLock()}})}function MI(e){return At(e?.getReader)}function cr(e){if(e instanceof Sn)return e;if(null!=e){if(mI(e))return function z7e(e){return new Sn(t=>{const n=e[_b]();if(At(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(hI(e))return function H7e(e){return new Sn(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(pI(e))return function S7e(e){return new Sn(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,iI)})}(e);if(gI(e))return _I(e);if(CI(e))return function E7e(e){return new Sn(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(MI(e))return function V7e(e){return _I(bI(e))}(e)}throw vI(e)}function _I(e){return new Sn(t=>{(function D7e(e,t){var n,r,i,a;return function lI(e,t,n,r){return new(n||(n=Promise))(function(a,s){function o(u){try{l(r.next(u))}catch(f){s(f)}}function c(u){try{l(r.throw(u))}catch(f){s(f)}}function l(u){u.done?a(u.value):function i(a){return a instanceof n?a:new n(function(s){s(a)})}(u.value).then(o,c)}l((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=dI(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(a=n.return)&&(yield a.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Ts(e,t,n,r=0,i=!1){const a=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(a),!i)return a}function v1(e,t,n=1/0){return At(t)?v1((r,i)=>Mt((a,s)=>t(r,a,i,s))(cr(e(r,i))),n):("number"==typeof t&&(n=t),On((r,i)=>function L7e(e,t,n,r,i,a,s,o){const c=[];let l=0,u=0,f=!1;const d=()=>{f&&!c.length&&!l&&t.complete()},h=m=>l<r?p(m):c.push(m),p=m=>{a&&t.next(m),l++;let g=!1;cr(n(m,u++)).subscribe(Tn(t,v=>{i?.(v),a?h(v):t.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<r;){const v=c.shift();s?Ts(t,s,()=>p(v)):p(v)}d()}catch(v){t.error(v)}}))};return e.subscribe(Tn(t,h,()=>{f=!0,d()})),()=>{o?.()}}(r,i,e,n)))}function Zl(e=1/0){return v1(Wo,e)}const Ma=new Sn(e=>e.complete());function Sb(e){return e[e.length-1]}function wI(e){return At(Sb(e))?e.pop():void 0}function ff(e){return function N7e(e){return e&&At(e.schedule)}(Sb(e))?e.pop():void 0}function xI(e,t=0){return On((n,r)=>{n.subscribe(Tn(r,i=>Ts(r,e,()=>r.next(i),t),()=>Ts(r,e,()=>r.complete(),t),i=>Ts(r,e,()=>r.error(i),t)))})}function zI(e,t=0){return On((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function HI(e,t){if(!e)throw new Error("Iterable cannot be null");return new Sn(n=>{Ts(n,t,()=>{const r=e[Symbol.asyncIterator]();Ts(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Pn(e,t){return t?function P7e(e,t){if(null!=e){if(mI(e))return function T7e(e,t){return cr(e).pipe(zI(t),xI(t))}(e,t);if(hI(e))return function F7e(e,t){return new Sn(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(pI(e))return function I7e(e,t){return cr(e).pipe(zI(t),xI(t))}(e,t);if(gI(e))return HI(e,t);if(CI(e))return function R7e(e,t){return new Sn(n=>{let r;return Ts(n,t,()=>{r=e[yI](),Ts(n,t,()=>{let i,a;try{({value:i,done:a}=r.next())}catch(s){return void n.error(s)}a?n.complete():n.next(i)},0,!0)}),()=>At(r?.return)&&r.return()})}(e,t);if(MI(e))return function O7e(e,t){return HI(bI(e),t)}(e,t)}throw vI(e)}(e,t):cr(e)}class E2 extends _i{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function Ce(...e){return Pn(e,ff(e))}function SI(e={}){const{connector:t=(()=>new _i),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return a=>{let s,o,c,l=0,u=!1,f=!1;const d=()=>{o?.unsubscribe(),o=void 0},h=()=>{d(),s=c=void 0,u=f=!1},p=()=>{const m=s;h(),m?.unsubscribe()};return On((m,g)=>{l++,!f&&!u&&d();const v=c=c??t();g.add(()=>{l--,0===l&&!f&&!u&&(o=Eb(p,i))}),v.subscribe(g),!s&&l>0&&(s=new uf({next:y=>v.next(y),error:y=>{f=!0,d(),o=Eb(h,n,y),v.error(y)},complete:()=>{u=!0,d(),o=Eb(h,r),v.complete()}}),cr(m).subscribe(s))})(a)}}function Eb(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new uf({next:()=>{r.unsubscribe(),e()}});return cr(t(...n)).subscribe(r)}function wi(e,t){return On((n,r)=>{let i=null,a=0,s=!1;const o=()=>s&&!i&&r.complete();n.subscribe(Tn(r,c=>{i?.unsubscribe();let l=0;const u=a++;cr(e(c,u)).subscribe(i=Tn(r,f=>r.next(t?t(c,f,u,l++):f),()=>{i=null,o()}))},()=>{s=!0,o()}))})}function U7e(e,t){return e===t}function Nt(e){for(let t in e)if(e[t]===Nt)return t;throw Error("Could not find renamed property on target object.")}function Yd(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function $n(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map($n).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Vb(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const j7e=Nt({__forward_ref__:Nt});function qt(e){return e.__forward_ref__=qt,e.toString=function(){return $n(this())},e}function je(e){return Db(e)?e():e}function Db(e){return"function"==typeof e&&e.hasOwnProperty(j7e)&&e.__forward_ref__===qt}function Lb(e){return e&&!!e.\u0275providers}const EI="https://g.co/ng/security#xss";class ie extends Error{constructor(t,n){super(function Xd(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function Ge(e){return"string"==typeof e?e:null==e?"":String(e)}function Ab(e,t){throw new ie(-201,!1)}function Ur(e,t){null==e&&function $e(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function xe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ur(e){return{providers:e.providers||[],imports:e.imports||[]}}function Qd(e){return VI(e,Kd)||VI(e,DI)}function VI(e,t){return e.hasOwnProperty(t)?e[t]:null}function Zd(e){return e&&(e.hasOwnProperty(Nb)||e.hasOwnProperty(K7e))?e[Nb]:null}const Kd=Nt({\u0275prov:Nt}),Nb=Nt({\u0275inj:Nt}),DI=Nt({ngInjectableDef:Nt}),K7e=Nt({ngInjectorDef:Nt});var at=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(at||{});let kb;function V2(e){const t=kb;return kb=e,t}function AI(e,t,n){const r=Qd(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&at.Optional?null:void 0!==t?t:void Ab($n(e))}const Gt=globalThis;class Me{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=xe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const df={},Ob="__NG_DI_FLAG__",Jd="ngTempTokenPath",tde=/\n/gm,kI="__source";let Kl;function Xo(e){const t=Kl;return Kl=e,t}function ide(e,t=at.Default){if(void 0===Kl)throw new ie(-203,!1);return null===Kl?AI(e,void 0,t):Kl.get(e,t&at.Optional?null:void 0,t)}function ze(e,t=at.Default){return(function LI(){return kb}()||ide)(je(e),t)}function be(e,t=at.Default){return ze(e,eh(t))}function eh(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Pb(e){const t=[];for(let n=0;n<e.length;n++){const r=je(e[n]);if(Array.isArray(r)){if(0===r.length)throw new ie(900,!1);let i,a=at.Default;for(let s=0;s<r.length;s++){const o=r[s],c=ade(o);"number"==typeof c?-1===c?i=o.token:a|=c:i=o}t.push(ze(i,a))}else t.push(ze(r))}return t}function hf(e,t){return e[Ob]=t,e.prototype[Ob]=t,e}function ade(e){return e[Ob]}function Is(e){return{toString:e}.toString()}var th=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(th||{}),xi=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(xi||{});const _a={},gt=[],nh=Nt({\u0275cmp:Nt}),$b=Nt({\u0275dir:Nt}),Bb=Nt({\u0275pipe:Nt}),II=Nt({\u0275mod:Nt}),Fs=Nt({\u0275fac:Nt}),pf=Nt({__NG_ELEMENT_ID__:Nt}),FI=Nt({__NG_ENV_ID__:Nt});function RI(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const a=t.length;if(i+a===r||e.charCodeAt(i+a)<=32)return i}n=i+1}}function Ub(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const a=n[r++],s=n[r++],o=n[r++];e.setAttribute(t,s,o,a)}else{const a=i,s=n[++r];PI(a)?e.setProperty(t,a,s):e.setAttribute(t,a,s),r++}}return r}function OI(e){return 3===e||4===e||6===e}function PI(e){return 64===e.charCodeAt(0)}function mf(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||$I(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function $I(e,t,n,r,i){let a=0,s=e.length;if(-1===t)s=-1;else for(;a<e.length;){const o=e[a++];if("number"==typeof o){if(o===t){s=-1;break}if(o>t){s=a-1;break}}}for(;a<e.length;){const o=e[a];if("number"==typeof o)break;if(o===n){if(null===r)return void(null!==i&&(e[a+1]=i));if(r===e[a+1])return void(e[a+2]=i)}a++,null!==r&&a++,null!==i&&a++}-1!==s&&(e.splice(s,0,t),a=s+1),e.splice(a++,0,n),null!==r&&e.splice(a++,0,r),null!==i&&e.splice(a++,0,i)}const BI="ng-template";function cde(e,t,n){let r=0,i=!0;for(;r<e.length;){let a=e[r++];if("string"==typeof a&&i){const s=e[r++];if(n&&"class"===a&&-1!==RI(s.toLowerCase(),t,0))return!0}else{if(1===a){for(;r<e.length&&"string"==typeof(a=e[r++]);)if(a.toLowerCase()===t)return!0;return!1}"number"==typeof a&&(i=!1)}}return!1}function UI(e){return 4===e.type&&e.value!==BI}function lde(e,t,n){return t===(4!==e.type||n?e.value:BI)}function ude(e,t,n){let r=4;const i=e.attrs||[],a=function hde(e){for(let t=0;t<e.length;t++)if(OI(e[t]))return t;return e.length}(i);let s=!1;for(let o=0;o<t.length;o++){const c=t[o];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!lde(e,c,n)||""===c&&1===t.length){if(zi(r))return!1;s=!0}}else{const l=8&r?c:t[++o];if(8&r&&null!==e.attrs){if(!cde(e.attrs,l,n)){if(zi(r))return!1;s=!0}continue}const f=fde(8&r?"class":c,i,UI(e),n);if(-1===f){if(zi(r))return!1;s=!0;continue}if(""!==l){let d;d=f>a?"":i[f+1].toLowerCase();const h=8&r?d:null;if(h&&-1!==RI(h,l,0)||2&r&&l!==d){if(zi(r))return!1;s=!0}}}}else{if(!s&&!zi(r)&&!zi(c))return!1;if(s&&zi(c))continue;s=!1,r=c|1&r}}return zi(r)||s}function zi(e){return 0==(1&e)}function fde(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let a=!1;for(;i<t.length;){const s=t[i];if(s===e)return i;if(3===s||6===s)a=!0;else{if(1===s||2===s){let o=t[++i];for(;"string"==typeof o;)o=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=a?1:2}return-1}return function pde(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function jI(e,t,n=!1){for(let r=0;r<t.length;r++)if(ude(e,t[r],n))return!0;return!1}function mde(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function qI(e,t){return e?":not("+t.trim()+")":t}function gde(e){let t=e[0],n=1,r=2,i="",a=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const o=e[++n];i+="["+s+(o.length>0?'="'+o+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!zi(s)&&(t+=qI(a,i),i=""),r=s,a=a||!zi(r);n++}return""!==i&&(t+=qI(a,i)),t}function kt(e){return Is(()=>{const t=WI(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===th.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||xi.Emulated,styles:e.styles||gt,_:null,schemas:e.schemas||null,tView:null,id:""};YI(n);const r=e.dependencies;return n.directiveDefs=rh(r,!1),n.pipeDefs=rh(r,!0),n.id=function xde(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function bde(e){return ft(e)||y1(e)}function Mde(e){return null!==e}function jr(e){return Is(()=>({type:e.type,bootstrap:e.bootstrap||gt,declarations:e.declarations||gt,imports:e.imports||gt,exports:e.exports||gt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function GI(e,t){if(null==e)return _a;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),n[i]=r,t&&(t[i]=a)}return n}function Be(e){return Is(()=>{const t=WI(e);return YI(t),t})}function D2(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function ft(e){return e[nh]||null}function y1(e){return e[$b]||null}function J1(e){return e[Bb]||null}function fr(e,t){const n=e[II]||null;if(!n&&!0===t)throw new Error(`Type ${$n(e)} does not have '\u0275mod' property.`);return n}function WI(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||_a,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||gt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:GI(e.inputs,t),outputs:GI(e.outputs)}}function YI(e){e.features?.forEach(t=>t(e))}function rh(e,t){if(!e)return null;const n=t?J1:bde;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(Mde)}const yn=0,ye=1,Ze=2,on=3,Hi=4,gf=5,A1=6,e0=7,En=8,Qo=9,t0=10,We=11,vf=12,XI=13,n0=14,Vn=15,yf=16,r0=17,wa=18,Cf=19,QI=20,Zo=21,Rs=22,bf=23,Mf=24,st=25,jb=1,ZI=2,xa=7,a0=9,C1=11;function L2(e){return Array.isArray(e)&&"object"==typeof e[jb]}function e2(e){return Array.isArray(e)&&!0===e[jb]}function qb(e){return 0!=(4&e.flags)}function G3(e){return e.componentOffset>-1}function ah(e){return 1==(1&e.flags)}function Si(e){return!!e.template}function Gb(e){return 0!=(512&e[Ze])}function W3(e,t){return e.hasOwnProperty(Fs)?e[Fs]:null}let b1=null,sh=!1;function qr(e){const t=b1;return b1=e,t}const eF={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function nF(e){if(!wf(e)||e.dirty){if(!e.producerMustRecompute(e)&&!aF(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function iF(e){e.dirty=!0,function rF(e){if(void 0===e.liveConsumerNode)return;const t=sh;sh=!0;try{for(const n of e.liveConsumerNode)n.dirty||iF(n)}finally{sh=t}}(e),e.consumerMarkedDirty?.(e)}function Yb(e){return e&&(e.nextProducerIndex=0),qr(e)}function Xb(e,t){if(qr(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(wf(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)oh(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function aF(e){s0(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(nF(n),r!==n.version))return!0}return!1}function sF(e){if(s0(e),wf(e))for(let t=0;t<e.producerNode.length;t++)oh(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function oh(e,t){if(function cF(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),s0(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)oh(e.producerNode[r],e.producerIndexOfThis[r]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];s0(i),i.producerIndexOfThis[r]=t}}function wf(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function s0(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let lF=null;function dF(e){const t=qr(null);try{return e()}finally{qr(t)}}const hF=()=>{},Fde=(()=>({...eF,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:hF}))();class Rde{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function t2(){return pF}function pF(e){return e.type.prototype.ngOnChanges&&(e.setInput=Pde),Ode}function Ode(){const e=gF(this),t=e?.current;if(t){const n=e.previous;if(n===_a)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Pde(e,t,n,r){const i=this.declaredInputs[n],a=gF(e)||function $de(e,t){return e[mF]=t}(e,{previous:_a,current:null}),s=a.current||(a.current={}),o=a.previous,c=o[i];s[i]=new Rde(c&&c.currentValue,t,o===_a),e[r]=t}t2.ngInherit=!0;const mF="__ngSimpleChanges__";function gF(e){return e[mF]||null}const za=function(e,t,n){};function Wt(e){for(;Array.isArray(e);)e=e[yn];return e}function ch(e,t){return Wt(t[e])}function A2(e,t){return Wt(t[e.index])}function CF(e,t){return e.data[t]}function o0(e,t){return e[t]}function dr(e,t){const n=t[e];return L2(n)?n:n[yn]}function Jo(e,t){return null==t?null:e[t]}function bF(e){e[r0]=0}function Wde(e){1024&e[Ze]||(e[Ze]|=1024,_F(e,1))}function MF(e){1024&e[Ze]&&(e[Ze]&=-1025,_F(e,-1))}function _F(e,t){let n=e[on];if(null===n)return;n[gf]+=t;let r=n;for(n=n[on];null!==n&&(1===t&&1===r[gf]||-1===t&&0===r[gf]);)n[gf]+=t,r=n,n=n[on]}const Ue={lFrame:NF(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function zF(){return Ue.bindingsEnabled}function c0(){return null!==Ue.skipHydrationRootTNode}function ee(){return Ue.lFrame.lView}function dt(){return Ue.lFrame.tView}function Ha(e){return Ue.lFrame.contextLView=e,e[En]}function Sa(e){return Ue.lFrame.contextLView=null,e}function M1(){let e=HF();for(;null!==e&&64===e.type;)e=e.parent;return e}function HF(){return Ue.lFrame.currentTNode}function Ea(e,t){const n=Ue.lFrame;n.currentTNode=e,n.isParent=t}function eM(){return Ue.lFrame.isParent}function tM(){Ue.lFrame.isParent=!1}function n2(){const e=Ue.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function l0(){return Ue.lFrame.bindingIndex++}function Ps(e){const t=Ue.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function ahe(e,t){const n=Ue.lFrame;n.bindingIndex=n.bindingRootIndex=e,nM(t)}function nM(e){Ue.lFrame.currentDirectiveIndex=e}function DF(){return Ue.lFrame.currentQueryIndex}function iM(e){Ue.lFrame.currentQueryIndex=e}function ohe(e){const t=e[ye];return 2===t.type?t.declTNode:1===t.type?e[A1]:null}function LF(e,t,n){if(n&at.SkipSelf){let i=t,a=e;for(;!(i=i.parent,null!==i||n&at.Host||(i=ohe(a),null===i||(a=a[n0],10&i.type))););if(null===i)return!1;t=i,e=a}const r=Ue.lFrame=AF();return r.currentTNode=t,r.lView=e,!0}function aM(e){const t=AF(),n=e[ye];Ue.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function AF(){const e=Ue.lFrame,t=null===e?null:e.child;return null===t?NF(e):t}function NF(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function kF(){const e=Ue.lFrame;return Ue.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const TF=kF;function sM(){const e=kF();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function r2(){return Ue.lFrame.selectedIndex}function Y3(e){Ue.lFrame.selectedIndex=e}function pn(){const e=Ue.lFrame;return CF(e.tView,e.selectedIndex)}let FF=!0;function lh(){return FF}function ec(e){FF=e}function uh(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const a=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:o,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=a;s&&(e.contentHooks??=[]).push(-n,s),o&&((e.contentHooks??=[]).push(n,o),(e.contentCheckHooks??=[]).push(n,o)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),null!=u&&(e.destroyHooks??=[]).push(n,u)}}function fh(e,t,n){RF(e,t,3,n)}function dh(e,t,n,r){(3&e[Ze])===n&&RF(e,t,n,r)}function oM(e,t){let n=e[Ze];(3&n)===t&&(n&=8191,n+=1,e[Ze]=n)}function RF(e,t,n,r){const a=r??-1,s=t.length-1;let o=0;for(let c=void 0!==r?65535&e[r0]:0;c<s;c++)if("number"==typeof t[c+1]){if(o=t[c],null!=r&&o>=r)break}else t[c]<0&&(e[r0]+=65536),(o<a||-1==a)&&(mhe(e,n,t,c),e[r0]=(4294901760&e[r0])+c+2),c++}function OF(e,t){za(4,e,t);const n=qr(null);try{t.call(e)}finally{qr(n),za(5,e,t)}}function mhe(e,t,n,r){const i=n[r]<0,a=n[r+1],o=e[i?-n[r]:n[r]];i?e[Ze]>>13<e[r0]>>16&&(3&e[Ze])===t&&(e[Ze]+=8192,OF(o,a)):OF(o,a)}const u0=-1;class zf{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function lM(e){return e!==u0}function Hf(e){return 32767&e}function Sf(e,t){let n=function Che(e){return e>>16}(e),r=t;for(;n>0;)r=r[n0],n--;return r}let uM=!0;function hh(e){const t=uM;return uM=e,t}const PF=255,$F=5;let bhe=0;const Va={};function ph(e,t){const n=BF(e,t);if(-1!==n)return n;const r=t[ye];r.firstCreatePass&&(e.injectorIndex=t.length,fM(r.data,e),fM(t,null),fM(r.blueprint,null));const i=mh(e,t),a=e.injectorIndex;if(lM(i)){const s=Hf(i),o=Sf(i,t),c=o[ye].data;for(let l=0;l<8;l++)t[a+l]=o[s+l]|c[s+l]}return t[a+8]=i,a}function fM(e,t){e.push(0,0,0,0,0,0,0,0,t)}function BF(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function mh(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=XF(i),null===r)return u0;if(n++,i=i[n0],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return u0}function dM(e,t,n){!function Mhe(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(pf)&&(r=n[pf]),null==r&&(r=n[pf]=bhe++);const i=r&PF;t.data[e+(i>>$F)]|=1<<i}(e,t,n)}function UF(e,t,n){if(n&at.Optional||void 0!==e)return e;Ab()}function jF(e,t,n,r){if(n&at.Optional&&void 0===r&&(r=null),!(n&(at.Self|at.Host))){const i=e[Qo],a=V2(void 0);try{return i?i.get(t,r,n&at.Optional):AI(t,r,n&at.Optional)}finally{V2(a)}}return UF(r,0,n)}function qF(e,t,n,r=at.Default,i){if(null!==e){if(2048&t[Ze]&&!(r&at.Self)){const s=function She(e,t,n,r,i){let a=e,s=t;for(;null!==a&&null!==s&&2048&s[Ze]&&!(512&s[Ze]);){const o=GF(a,s,n,r|at.Self,Va);if(o!==Va)return o;let c=a.parent;if(!c){const l=s[QI];if(l){const u=l.get(n,Va,r);if(u!==Va)return u}c=XF(s),s=s[n0]}a=c}return i}(e,t,n,r,Va);if(s!==Va)return s}const a=GF(e,t,n,r,Va);if(a!==Va)return a}return jF(t,n,r,i)}function GF(e,t,n,r,i){const a=function xhe(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(pf)?e[pf]:void 0;return"number"==typeof t?t>=0?t&PF:Hhe:t}(n);if("function"==typeof a){if(!LF(t,e,r))return r&at.Host?UF(i,0,r):jF(t,n,r,i);try{let s;if(s=a(r),null!=s||r&at.Optional)return s;Ab()}finally{TF()}}else if("number"==typeof a){let s=null,o=BF(e,t),c=u0,l=r&at.Host?t[Vn][A1]:null;for((-1===o||r&at.SkipSelf)&&(c=-1===o?mh(e,t):t[o+8],c!==u0&&YF(r,!1)?(s=t[ye],o=Hf(c),t=Sf(c,t)):o=-1);-1!==o;){const u=t[ye];if(WF(a,o,u.data)){const f=whe(o,t,n,s,r,l);if(f!==Va)return f}c=t[o+8],c!==u0&&YF(r,t[ye].data[o+8]===l)&&WF(a,o,t)?(s=u,o=Hf(c),t=Sf(c,t)):o=-1}}return i}function whe(e,t,n,r,i,a){const s=t[ye],o=s.data[e+8],u=gh(o,s,n,null==r?G3(o)&&uM:r!=s&&0!=(3&o.type),i&at.Host&&a===o);return null!==u?X3(t,s,u,o):Va}function gh(e,t,n,r,i){const a=e.providerIndexes,s=t.data,o=1048575&a,c=e.directiveStart,u=a>>20,d=i?o+u:e.directiveEnd;for(let h=r?o:o+u;h<d;h++){const p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){const h=s[c];if(h&&Si(h)&&h.type===n)return c}return null}function X3(e,t,n,r){let i=e[n];const a=t.data;if(function ghe(e){return e instanceof zf}(i)){const s=i;s.resolving&&function q7e(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new ie(-200,`Circular dependency in DI detected for ${e}${n}`)}(function zt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Ge(e)}(a[n]));const o=hh(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?V2(s.injectImpl):null;LF(e,r,at.Default);try{i=e[n]=s.factory(void 0,a,e,r),t.firstCreatePass&&n>=r.directiveStart&&function phe(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:a}=t.type.prototype;if(r){const s=pF(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),a&&((n.preOrderHooks??=[]).push(e,a),(n.preOrderCheckHooks??=[]).push(e,a))}(n,a[n],t)}finally{null!==l&&V2(l),hh(o),s.resolving=!1,TF()}}return i}function WF(e,t,n){return!!(n[t+(e>>$F)]&1<<e)}function YF(e,t){return!(e&at.Self||e&at.Host&&t)}class a2{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return qF(this._tNode,this._lView,t,eh(r),n)}}function Hhe(){return new a2(M1(),ee())}function _1(e){return Is(()=>{const t=e.prototype.constructor,n=t[Fs]||hM(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const a=i[Fs]||hM(i);if(a&&a!==n)return a;i=Object.getPrototypeOf(i)}return a=>new a})}function hM(e){return Db(e)?()=>{const t=hM(je(e));return t&&t()}:W3(e)}function XF(e){const t=e[ye],n=t.type;return 2===n?t.declTNode:1===n?e[A1]:null}const d0="__parameters__";function p0(e,t,n){return Is(()=>{const r=function pM(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...a){if(this instanceof i)return r.apply(this,a),this;const s=new i(...a);return o.annotation=s,o;function o(c,l,u){const f=c.hasOwnProperty(d0)?c[d0]:Object.defineProperty(c,d0,{value:[]})[d0];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function g0(e,t){e.forEach(n=>Array.isArray(n)?g0(n,t):t(n))}function ZF(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function yh(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Df(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}function hr(e,t,n){let r=v0(e,t);return r>=0?e[1|r]=n:(r=~r,function khe(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function mM(e,t){const n=v0(e,t);if(n>=0)return e[1|n]}function v0(e,t){return function KF(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){const a=r+(i-r>>1),s=e[a<<n];if(t===s)return a<<n;s>t?i=a:r=a+1}return~(i<<n)}(e,t,1)}const bh=hf(p0("Optional"),8),Mh=hf(p0("SkipSelf"),4);function Hh(e){return 128==(128&e.flags)}var tc=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(tc||{});const t9e=/^>|^->|<!--|-->|--!>|<!-$/g,n9e=/(<|>)/g,r9e="\u200b$1\u200b";const bM=new Map;let i9e=0;const _M="__ngContext__";function N1(e,t){L2(t)?(e[_M]=t[Cf],function s9e(e){bM.set(e[Cf],e)}(t)):e[_M]=t}let wM;function xM(e,t){return wM(e,t)}function Nf(e){const t=e[on];return e2(t)?t[on]:t}function yR(e){return bR(e[vf])}function CR(e){return bR(e[Hi])}function bR(e){for(;null!==e&&!e2(e);)e=e[Hi];return e}function b0(e,t,n,r,i){if(null!=r){let a,s=!1;e2(r)?a=r:L2(r)&&(s=!0,r=r[yn]);const o=Wt(r);0===e&&null!==n?null==i?xR(t,n,o):Q3(t,n,o,i||null,!0):1===e&&null!==n?Q3(t,n,o,i||null,!0):2===e?function Nh(e,t,n){const r=Lh(e,t);r&&function z9e(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,o,s):3===e&&t.destroyNode(o),null!=a&&function E9e(e,t,n,r,i){const a=n[xa];a!==Wt(n)&&b0(t,e,r,a,i);for(let o=C1;o<n.length;o++){const c=n[o];Tf(c[ye],c,e,t,r,a)}}(t,e,a,n,i)}}function zM(e,t){return e.createComment(function uR(e){return e.replace(t9e,t=>t.replace(n9e,r9e))}(t))}function Vh(e,t,n){return e.createElement(t,n)}function _R(e,t){const n=e[a0],r=n.indexOf(t);MF(t),n.splice(r,1)}function Dh(e,t){if(e.length<=C1)return;const n=C1+t,r=e[n];if(r){const i=r[yf];null!==i&&i!==e&&_R(i,r),t>0&&(e[n-1][Hi]=r[Hi]);const a=yh(e,C1+t);!function v9e(e,t){Tf(e,t,t[We],2,null,null),t[yn]=null,t[A1]=null}(r[ye],r);const s=a[wa];null!==s&&s.detachView(a[ye]),r[on]=null,r[Hi]=null,r[Ze]&=-129}return r}function HM(e,t){if(!(256&t[Ze])){const n=t[We];t[bf]&&sF(t[bf]),t[Mf]&&sF(t[Mf]),n.destroyNode&&Tf(e,t,n,3,null,null),function b9e(e){let t=e[vf];if(!t)return SM(e[ye],e);for(;t;){let n=null;if(L2(t))n=t[vf];else{const r=t[C1];r&&(n=r)}if(!n){for(;t&&!t[Hi]&&t!==e;)L2(t)&&SM(t[ye],t),t=t[on];null===t&&(t=e),L2(t)&&SM(t[ye],t),n=t&&t[Hi]}t=n}}(t)}}function SM(e,t){if(!(256&t[Ze])){t[Ze]&=-129,t[Ze]|=256,function x9e(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof zf)){const a=n[r+1];if(Array.isArray(a))for(let s=0;s<a.length;s+=2){const o=i[a[s]],c=a[s+1];za(4,o,c);try{c.call(o)}finally{za(5,o,c)}}else{za(4,i,a);try{a.call(i)}finally{za(5,i,a)}}}}}(e,t),function w9e(e,t){const n=e.cleanup,r=t[e0];if(null!==n)for(let a=0;a<n.length-1;a+=2)if("string"==typeof n[a]){const s=n[a+3];s>=0?r[s]():r[-s].unsubscribe(),a+=2}else n[a].call(r[n[a+1]]);null!==r&&(t[e0]=null);const i=t[Zo];if(null!==i){t[Zo]=null;for(let a=0;a<i.length;a++)(0,i[a])()}}(e,t),1===t[ye].type&&t[We].destroy();const n=t[yf];if(null!==n&&e2(t[on])){n!==t[on]&&_R(n,t);const r=t[wa];null!==r&&r.detachView(e)}!function o9e(e){bM.delete(e[Cf])}(t)}}function EM(e,t,n){return function wR(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[yn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:a}=e.data[r.directiveStart+i];if(a===xi.None||a===xi.Emulated)return null}return A2(r,n)}}(e,t.parent,n)}function Q3(e,t,n,r,i){e.insertBefore(t,n,r,i)}function xR(e,t,n){e.appendChild(t,n)}function zR(e,t,n,r,i){null!==r?Q3(e,t,n,r,i):xR(e,t,n)}function Lh(e,t){return e.parentNode(t)}function HR(e,t,n){return ER(e,t,n)}let VM,kh,NM,Th,ER=function SR(e,t,n){return 40&e.type?A2(e,n):null};function Ah(e,t,n,r){const i=EM(e,r,t),a=t[We],o=HR(r.parent||t[A1],r,t);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)zR(a,i,n[c],o,!1);else zR(a,i,n,o,!1);void 0!==VM&&VM(a,r,t,n,i)}function kf(e,t){if(null!==t){const n=t.type;if(3&n)return A2(t,e);if(4&n)return DM(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return kf(e,r);{const i=e[t.index];return e2(i)?DM(-1,i):Wt(i)}}if(32&n)return xM(t,e)()||Wt(e[t.index]);{const r=DR(e,t);return null!==r?Array.isArray(r)?r[0]:kf(Nf(e[Vn]),r):kf(e,t.next)}}return null}function DR(e,t){return null!==t?e[Vn][A1].projection[t.projection]:null}function DM(e,t){const n=C1+e+1;if(n<t.length){const r=t[n],i=r[ye].firstChild;if(null!==i)return kf(r,i)}return t[xa]}function LM(e,t,n,r,i,a,s){for(;null!=n;){const o=r[n.index],c=n.type;if(s&&0===t&&(o&&N1(Wt(o),r),n.flags|=2),32!=(32&n.flags))if(8&c)LM(e,t,n.child,r,i,a,!1),b0(t,e,i,o,a);else if(32&c){const l=xM(n,r);let u;for(;u=l();)b0(t,e,i,u,a);b0(t,e,i,o,a)}else 16&c?AR(e,t,r,n,i,a):b0(t,e,i,o,a);n=s?n.projectionNext:n.next}}function Tf(e,t,n,r,i,a){LM(n,r,e.firstChild,t,i,a,!1)}function AR(e,t,n,r,i,a){const s=n[Vn],c=s[A1].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)b0(t,e,i,c[l],a);else{let l=c;const u=s[on];Hh(r)&&(l.flags|=128),LM(e,t,l,u,i,a,!0)}}function NR(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function kR(e,t,n){const{mergedAttrs:r,classes:i,styles:a}=n;null!==r&&Ub(e,t,r),null!==i&&NR(e,t,i),null!==a&&function D9e(e,t,n){e.setAttribute(t,"style",n)}(e,t,a)}function M0(e){return function AM(){if(void 0===kh&&(kh=null,Gt.trustedTypes))try{kh=Gt.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return kh}()?.createHTML(e)||e}function _0(){if(void 0!==NM)return NM;if(typeof document<"u")return document;throw new ie(210,!1)}function kM(){if(void 0===Th&&(Th=null,Gt.trustedTypes))try{Th=Gt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Th}function TR(e){return kM()?.createHTML(e)||e}function FR(e){return kM()?.createScriptURL(e)||e}class Z3{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${EI})`}}class T9e extends Z3{getTypeName(){return"HTML"}}class I9e extends Z3{getTypeName(){return"Style"}}class F9e extends Z3{getTypeName(){return"Script"}}class R9e extends Z3{getTypeName(){return"URL"}}class O9e extends Z3{getTypeName(){return"ResourceURL"}}function pr(e){return e instanceof Z3?e.changingThisBreaksApplicationSecurity:e}function Da(e,t){const n=function P9e(e){return e instanceof Z3&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${EI})`)}return n===t}class G9e{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const n=(new window.DOMParser).parseFromString(M0(t),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch{return null}}}class W9e{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const n=this.inertDocument.createElement("template");return n.innerHTML=M0(t),n}}const X9e=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ih(e){return(e=String(e)).match(X9e)?e:"unsafe:"+e}function $s(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function If(...e){const t={};for(const n of e)for(const r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}const OR=$s("area,br,col,hr,img,wbr"),PR=$s("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$R=$s("rp,rt"),TM=If(OR,If(PR,$s("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),If($R,$s("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),If($R,PR)),IM=$s("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),BR=If(IM,$s("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$s("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Q9e=$s("script,style,template");class Z9e{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,r=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(t){const n=t.nodeName.toLowerCase();if(!TM.hasOwnProperty(n))return this.sanitizedSomething=!0,!Q9e.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=t.attributes;for(let i=0;i<r.length;i++){const a=r.item(i),s=a.name,o=s.toLowerCase();if(!BR.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let c=a.value;IM[o]&&(c=Ih(c)),this.buf.push(" ",s,'="',UR(c),'"')}return this.buf.push(">"),!0}endElement(t){const n=t.nodeName.toLowerCase();TM.hasOwnProperty(n)&&!OR.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(UR(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}}const K9e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,J9e=/([^\#-~ |!])/g;function UR(e){return e.replace(/&/g,"&amp;").replace(K9e,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(J9e,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Fh;function jR(e,t){let n=null;try{Fh=Fh||function RR(e){const t=new W9e(e);return function Y9e(){try{return!!(new window.DOMParser).parseFromString(M0(""),"text/html")}catch{return!1}}()?new G9e(t):t}(e);let r=t?String(t):"";n=Fh.getInertBodyElement(r);let i=5,a=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=a,a=n.innerHTML,n=Fh.getInertBodyElement(r)}while(r!==a);return M0((new Z9e).sanitizeChildren(FM(n)||n))}finally{if(n){const r=FM(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function FM(e){return"content"in e&&function epe(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Wr=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Wr||{});function qR(e){const t=Ff();return t?TR(t.sanitize(Wr.HTML,e)||""):Da(e,"HTML")?TR(pr(e)):jR(_0(),Ge(e))}function GR(e){const t=Ff();return t?t.sanitize(Wr.URL,e)||"":Da(e,"URL")?pr(e):Ih(Ge(e))}function WR(e){const t=Ff();if(t)return FR(t.sanitize(Wr.RESOURCE_URL,e)||"");if(Da(e,"ResourceURL"))return FR(pr(e));throw new ie(904,!1)}function Ff(){const e=ee();return e&&e[t0].sanitizer}const Rf=new Me("ENVIRONMENT_INITIALIZER"),XR=new Me("INJECTOR",-1),QR=new Me("INJECTOR_DEF_TYPES");class RM{get(t,n=df){if(n===df){const r=new Error(`NullInjectorError: No provider for ${$n(t)}!`);throw r.name="NullInjectorError",r}return n}}function spe(...e){return{\u0275providers:ZR(0,e),\u0275fromNgModule:!0}}function ZR(e,...t){const n=[],r=new Set;let i;const a=s=>{n.push(s)};return g0(t,s=>{const o=s;Rh(o,a,[],r)&&(i||=[],i.push(o))}),void 0!==i&&KR(i,a),n}function KR(e,t){for(let n=0;n<e.length;n++){const{ngModule:r,providers:i}=e[n];PM(i,a=>{t(a,r)})}}function Rh(e,t,n,r){if(!(e=je(e)))return!1;let i=null,a=Zd(e);const s=!a&&ft(e);if(a||s){if(s&&!s.standalone)return!1;i=e}else{const c=e.ngModule;if(a=Zd(c),!a)return!1;i=c}const o=r.has(i);if(s){if(o)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)Rh(l,t,n,r)}}else{if(!a)return!1;{if(null!=a.imports&&!o){let l;r.add(i);try{g0(a.imports,u=>{Rh(u,t,n,r)&&(l||=[],l.push(u))})}finally{}void 0!==l&&KR(l,t)}if(!o){const l=W3(i)||(()=>new i);t({provide:i,useFactory:l,deps:gt},i),t({provide:QR,useValue:i,multi:!0},i),t({provide:Rf,useValue:()=>ze(i),multi:!0},i)}const c=a.providers;if(null!=c&&!o){const l=e;PM(c,u=>{t(u,l)})}}}return i!==e&&void 0!==e.providers}function PM(e,t){for(let n of e)Lb(n)&&(n=n.\u0275providers),Array.isArray(n)?PM(n,t):t(n)}const ope=Nt({provide:String,useValue:Nt});function $M(e){return null!==e&&"object"==typeof e&&ope in e}function K3(e){return"function"==typeof e}const BM=new Me("Set Injector scope."),Oh={},lpe={};let UM;function Ph(){return void 0===UM&&(UM=new RM),UM}class mr{}class w0 extends mr{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qM(t,s=>this.processProvider(s)),this.records.set(XR,x0(void 0,this)),i.has("environment")&&this.records.set(mr,x0(void 0,this));const a=this.records.get(BM);null!=a&&"string"==typeof a.value&&this.scopes.add(a.value),this.injectorDefTypes=new Set(this.get(QR.multi,gt,at.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=Xo(this),r=V2(void 0);try{return t()}finally{Xo(n),V2(r)}}get(t,n=df,r=at.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(FI))return t[FI](this);r=eh(r);const a=Xo(this),s=V2(void 0);try{if(!(r&at.SkipSelf)){let c=this.records.get(t);if(void 0===c){const l=function ppe(e){return"function"==typeof e||"object"==typeof e&&e instanceof Me}(t)&&Qd(t);c=l&&this.injectableDefInScope(l)?x0(jM(t),Oh):null,this.records.set(t,c)}if(null!=c)return this.hydrate(t,c)}return(r&at.Self?Ph():this.parent).get(t,n=r&at.Optional&&n===df?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[Jd]=o[Jd]||[]).unshift($n(t)),a)throw o;return function sde(e,t,n,r){const i=e[Jd];throw t[kI]&&i.unshift(t[kI]),e.message=function ode(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=$n(t);if(Array.isArray(t))i=t.map($n).join(" -> ");else if("object"==typeof t){let a=[];for(let s in t)if(t.hasOwnProperty(s)){let o=t[s];a.push(s+":"+("string"==typeof o?JSON.stringify(o):$n(o)))}i=`{${a.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(tde,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[Jd]=null,e}(o,t,"R3InjectorError",this.source)}throw o}finally{V2(s),Xo(a)}}resolveInjectorInitializers(){const t=Xo(this),n=V2(void 0);try{const i=this.get(Rf.multi,gt,at.Self);for(const a of i)a()}finally{Xo(t),V2(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push($n(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ie(205,!1)}processProvider(t){let n=K3(t=je(t))?t:je(t&&t.provide);const r=function fpe(e){return $M(e)?x0(void 0,e.useValue):x0(tO(e),Oh)}(t);if(K3(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=x0(void 0,Oh,!0),i.factory=()=>Pb(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Oh&&(n.value=lpe,n.value=n.factory()),"object"==typeof n.value&&n.value&&function hpe(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=je(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function jM(e){const t=Qd(e),n=null!==t?t.factory:W3(e);if(null!==n)return n;if(e instanceof Me)throw new ie(204,!1);if(e instanceof Function)return function upe(e){const t=e.length;if(t>0)throw Df(t,"?"),new ie(204,!1);const n=function Z7e(e){return e&&(e[Kd]||e[DI])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new ie(204,!1)}function tO(e,t,n){let r;if(K3(e)){const i=je(e);return W3(i)||jM(i)}if($M(e))r=()=>je(e.useValue);else if(function eO(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Pb(e.deps||[]));else if(function JR(e){return!(!e||!e.useExisting)}(e))r=()=>ze(je(e.useExisting));else{const i=je(e&&(e.useClass||e.provide));if(!function dpe(e){return!!e.deps}(e))return W3(i)||jM(i);r=()=>new i(...Pb(e.deps))}return r}function x0(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function qM(e,t){for(const n of e)Array.isArray(n)?qM(n,t):n&&Lb(n)?qM(n.\u0275providers,t):t(n)}const $h=new Me("AppId",{providedIn:"root",factory:()=>mpe}),mpe="ng",nO=new Me("Platform Initializer"),J3=new Me("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),rO=new Me("CSP nonce",{providedIn:"root",factory:()=>_0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let iO=(e,t,n)=>null;function JM(e,t,n=!1){return iO(e,t,n)}class zpe{}class oO{}class Spe{resolveComponentFactory(t){throw function Hpe(e){const t=Error(`No component factory found for ${$n(e)}.`);return t.ngComponent=e,t}(t)}}let Wh=(()=>{class e{static#e=this.NULL=new Spe}return e})();function Epe(){return S0(M1(),ee())}function S0(e,t){return new k2(A2(e,t))}let k2=(()=>{class e{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=Epe}return e})();function Vpe(e){return e instanceof k2?e.nativeElement:e}class lO{}let La=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Dpe(){const e=ee(),n=dr(M1().index,e);return(L2(n)?n:e)[We]}()}return e})(),Lpe=(()=>{class e{static#e=this.\u0275prov=xe({token:e,providedIn:"root",factory:()=>null})}return e})();class $f{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ape=new $f("16.2.12"),n_={};function hO(e,t=null,n=null,r){const i=pO(e,t,n,r);return i.resolveInjectorInitializers(),i}function pO(e,t=null,n=null,r,i=new Set){const a=[n||gt,spe(e)];return r=r||("object"==typeof e?void 0:$n(e)),new w0(a,t||Ph(),r||null,i)}let T2=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=df;static#t=this.NULL=new RM;static create(n,r){if(Array.isArray(n))return hO({name:""},r,n,"");{const i=n.name??"";return hO({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=xe({token:e,providedIn:"any",factory:()=>ze(XR)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function i_(e){return e.ngOriginalError}class Bs{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&i_(t);for(;n&&i_(n);)n=i_(n);return n||null}}function s_(e){return t=>{setTimeout(e,void 0,t)}}const Cn=class Ope extends _i{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,a=n||(()=>null),s=r;if(t&&"object"==typeof t){const c=t;i=c.next?.bind(c),a=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(a=s_(a),i&&(i=s_(i)),s&&(s=s_(s)));const o=super.subscribe({next:i,error:a,complete:s});return t instanceof K1&&t.add(o),o}};function gO(...e){}class Yt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Cn(!1),this.onMicrotaskEmpty=new Cn(!1),this.onStable=new Cn(!1),this.onError=new Cn(!1),typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Ppe(){const e="function"==typeof Gt.requestAnimationFrame;let t=Gt[e?"requestAnimationFrame":"setTimeout"],n=Gt[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function Upe(e){const t=()=>{!function Bpe(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Gt,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,c_(e),e.isCheckStableRunning=!0,o_(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),c_(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,a,s,o)=>{if(function qpe(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(o))return n.invokeTask(i,a,s,o);try{return vO(e),n.invokeTask(i,a,s,o)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||e.shouldCoalesceRunChangeDetection)&&t(),yO(e)}},onInvoke:(n,r,i,a,s,o,c)=>{try{return vO(e),n.invoke(i,a,s,o,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),yO(e)}},onHasTask:(n,r,i,a)=>{n.hasTask(i,a),r===i&&("microTask"==a.change?(e._hasPendingMicrotasks=a.microTask,c_(e),o_(e)):"macroTask"==a.change&&(e.hasPendingMacrotasks=a.macroTask))},onHandleError:(n,r,i,a)=>(n.handleError(i,a),e.runOutsideAngular(()=>e.onError.emit(a)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yt.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(Yt.isInAngularZone())throw new ie(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const a=this._inner,s=a.scheduleEventTask("NgZoneEvent: "+i,t,$pe,gO,gO);try{return a.runTask(s,n,r)}finally{a.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const $pe={};function o_(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function c_(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function vO(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function yO(e){e._nesting--,o_(e)}class jpe{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Cn,this.onMicrotaskEmpty=new Cn,this.onStable=new Cn,this.onError=new Cn}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const CO=new Me("",{providedIn:"root",factory:bO});function bO(){const e=be(Yt);let t=!0;return function $7e(...e){const t=ff(e),n=function k7e(e,t){return"number"==typeof Sb(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?cr(r[0]):Zl(n)(Pn(r,t)):Ma}(new Sn(i=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{i.next(t),i.complete()})}),new Sn(i=>{let a;e.runOutsideAngular(()=>{a=e.onStable.subscribe(()=>{Yt.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,i.next(!0))})})});const s=e.onUnstable.subscribe(()=>{Yt.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{i.next(!1)}))});return()=>{a.unsubscribe(),s.unsubscribe()}}).pipe(SI()))}function Us(e){return e instanceof Function?e():e}let l_=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=xe({token:e,providedIn:"root",factory:()=>new e})}return e})();function Bf(e){for(;e;){e[Ze]|=64;const t=Nf(e);if(Gb(e)&&!t)return e;e=t}return null}const zO=new Me("",{providedIn:"root",factory:()=>!1});let Xh=null;function VO(e,t){return e[t]??AO()}function DO(e,t){const n=AO();n.producerNode?.length&&(e[t]=Xh,n.lView=e,Xh=LO())}const tme={...eF,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Bf(e.lView)},lView:null};function LO(){return Object.create(tme)}function AO(){return Xh??=LO(),Xh}const Xe={};function X(e){NO(dt(),ee(),r2()+e,!1)}function NO(e,t,n,r){if(!r)if(3==(3&t[Ze])){const a=e.preOrderCheckHooks;null!==a&&fh(t,a,n)}else{const a=e.preOrderHooks;null!==a&&dh(t,a,0,n)}Y3(n)}function q(e,t=at.Default){const n=ee();return null===n?ze(e,t):qF(M1(),n,je(e),t)}function Qh(e,t,n,r,i,a,s,o,c,l,u){const f=t.blueprint.slice();return f[yn]=i,f[Ze]=140|r,(null!==l||e&&2048&e[Ze])&&(f[Ze]|=2048),bF(f),f[on]=f[n0]=e,f[En]=n,f[t0]=s||e&&e[t0],f[We]=o||e&&e[We],f[Qo]=c||e&&e[Qo]||null,f[A1]=a,f[Cf]=function a9e(){return i9e++}(),f[Rs]=u,f[QI]=l,f[Vn]=2==t.type?e[Vn]:f,f}function D0(e,t,n,r,i){let a=e.data[t];if(null===a)a=function u_(e,t,n,r,i){const a=HF(),s=eM(),c=e.data[t]=function lme(e,t,n,r,i,a){let s=t?t.injectorIndex:-1,o=0;return c0()&&(o|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:o,providerIndexes:0,value:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?a:a&&a.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=c),null!==a&&(s?null==a.child&&null!==c.parent&&(a.child=c):null===a.next&&(a.next=c,c.prev=a)),c}(e,t,n,r,i),function ihe(){return Ue.lFrame.inI18n}()&&(a.flags|=32);else if(64&a.type){a.type=n,a.value=r,a.attrs=i;const s=function xf(){const e=Ue.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();a.injectorIndex=null===s?-1:s.injectorIndex}return Ea(a,!0),a}function Uf(e,t,n,r){if(0===n)return-1;const i=t.length;for(let a=0;a<n;a++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function TO(e,t,n,r,i){const a=VO(t,bf),s=r2(),o=2&r;try{Y3(-1),o&&t.length>st&&NO(e,t,st,!1),za(o?2:0,i);const l=o?a:null,u=Yb(l);try{null!==l&&(l.dirty=!1),n(r,i)}finally{Xb(l,u)}}finally{o&&null===t[bf]&&DO(t,bf),Y3(s),za(o?3:1,i)}}function f_(e,t,n){if(qb(t)){const r=qr(null);try{const a=t.directiveEnd;for(let s=t.directiveStart;s<a;s++){const o=e.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}finally{qr(r)}}}function d_(e,t,n){zF()&&(function gme(e,t,n,r){const i=n.directiveStart,a=n.directiveEnd;G3(n)&&function wme(e,t,n){const r=A2(t,e),i=IO(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const o=Zh(e,Qh(e,i,null,s,r,t,null,e[t0].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=o}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||ph(n,t),N1(r,t);const s=n.initialInputs;for(let o=i;o<a;o++){const c=e.data[o],l=X3(t,e,o,n);N1(l,t),null!==s&&xme(0,o-i,l,c,0,s),Si(c)&&(dr(n.index,t)[En]=X3(t,e,o,n))}}(e,t,n,A2(n,t)),64==(64&n.flags)&&$O(e,t,n))}function h_(e,t,n=A2){const r=t.localNames;if(null!==r){let i=t.index+1;for(let a=0;a<r.length;a+=2){const s=r[a+1],o=-1===s?n(t,e):e[s];e[i++]=o}}}function IO(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=p_(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function p_(e,t,n,r,i,a,s,o,c,l,u){const f=st+r,d=f+i,h=function rme(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Xe);return n}(f,d),p="function"==typeof l?l():l;return h[ye]={type:e,blueprint:h,template:n,queries:null,viewQuery:o,declTNode:t,data:h.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}let FO=e=>null;function RO(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const a=e[i];null===r?OO(n,t,i,a):r.hasOwnProperty(i)&&OO(n,t,r[i],a)}return n}function OO(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function gr(e,t,n,r,i,a,s,o){const c=A2(t,n);let u,l=t.inputs;!o&&null!=l&&(u=l[r])?(C_(e,n,u,r,i),G3(t)&&function dme(e,t){const n=dr(t,e);16&n[Ze]||(n[Ze]|=64)}(n,t.index)):3&t.type&&(r=function fme(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=s?s(i,t.value||"",r):i,a.setProperty(c,r,i))}function m_(e,t,n,r){if(zF()){const i=null===r?null:{"":-1},a=function yme(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let a=0;a<n.length;a++){const s=n[a];if(jI(t,s.selectors,!1))if(r||(r=[]),Si(s))if(null!==s.findHostDirectiveDefs){const o=[];i=i||new Map,s.findHostDirectiveDefs(s,o,i),r.unshift(...o,s),g_(e,t,o.length)}else r.unshift(s),g_(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(e,n);let s,o;null===a?s=o=null:[s,o]=a,null!==s&&PO(e,t,n,s,i,o),i&&function Cme(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const a=n[t[i+1]];if(null==a)throw new ie(-301,!1);r.push(t[i],a)}}}(n,r,i)}n.mergedAttrs=mf(n.mergedAttrs,n.attrs)}function PO(e,t,n,r,i,a){for(let l=0;l<r.length;l++)dM(ph(n,t),e,r[l].type);!function Mme(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let l=0;l<r.length;l++){const u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,o=!1,c=Uf(e,t,r.length,null);for(let l=0;l<r.length;l++){const u=r[l];n.mergedAttrs=mf(n.mergedAttrs,u.hostAttrs),_me(e,n,t,c,u),bme(c,u,i),null!==u.contentQueries&&(n.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(n.flags|=64);const f=u.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!o&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),o=!0),c++}!function ume(e,t,n){const i=t.directiveEnd,a=e.data,s=t.attrs,o=[];let c=null,l=null;for(let u=t.directiveStart;u<i;u++){const f=a[u],d=n?n.get(f):null,p=d?d.outputs:null;c=RO(f.inputs,u,c,d?d.inputs:null),l=RO(f.outputs,u,l,p);const m=null===c||null===s||UI(t)?null:zme(c,u,s);o.push(m)}null!==c&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=o,t.inputs=c,t.outputs=l}(e,n,a)}function $O(e,t,n){const r=n.directiveStart,i=n.directiveEnd,a=n.index,s=function she(){return Ue.lFrame.currentDirectiveIndex}();try{Y3(a);for(let o=r;o<i;o++){const c=e.data[o],l=t[o];nM(o),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&vme(c,l)}}finally{Y3(-1),nM(s)}}function vme(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function g_(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function bme(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Si(t)&&(n[""]=e)}}function _me(e,t,n,r,i){e.data[r]=i;const a=i.factory||(i.factory=W3(i.type)),s=new zf(a,Si(i),q);e.blueprint[r]=s,n[r]=s,function pme(e,t,n,r,i){const a=i.hostBindings;if(a){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const o=~t.index;(function mme(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=o&&s.push(o),s.push(n,r,a)}}(e,t,r,Uf(e,n,i.hostVars,Xe),i)}function Aa(e,t,n,r,i,a){const s=A2(e,t);!function v_(e,t,n,r,i,a,s){if(null==a)e.removeAttribute(t,i,n);else{const o=null==s?Ge(a):s(a,r||"",i);e.setAttribute(t,i,o,n)}}(t[We],s,a,e.value,n,r,i)}function xme(e,t,n,r,i,a){const s=a[t];if(null!==s)for(let o=0;o<s.length;)BO(r,n,s[o++],s[o++],s[o++])}function BO(e,t,n,r,i){const a=qr(null);try{const s=e.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(t,i)),null!==e.setInput?e.setInput(t,i,n,r):t[r]=i}finally{qr(a)}}function zme(e,t,n){let r=null,i=0;for(;i<n.length;){const a=n[i];if(0!==a)if(5!==a){if("number"==typeof a)break;if(e.hasOwnProperty(a)){null===r&&(r=[]);const s=e[a];for(let o=0;o<s.length;o+=2)if(s[o]===t){r.push(a,s[o+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function UO(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null,null]}function jO(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const a=n[r+1];if(-1!==a){const s=e.data[a];iM(n[r]),s.contentQueries(2,t[a],a)}}}function Zh(e,t){return e[vf]?e[XI][Hi]=t:e[vf]=t,e[XI]=t,t}function y_(e,t,n){iM(0);const r=qr(null);try{t(e,n)}finally{qr(r)}}function qO(e){return e[e0]||(e[e0]=[])}function GO(e){return e.cleanup||(e.cleanup=[])}function YO(e,t){const n=e[Qo],r=n?n.get(Bs,null):null;r&&r.handleError(t)}function C_(e,t,n,r,i){for(let a=0;a<n.length;){const s=n[a++],o=n[a++];BO(e.data[s],t[s],r,o,i)}}function js(e,t,n){const r=ch(t,e);!function MR(e,t,n){e.setValue(t,n)}(e[We],r,n)}function Hme(e,t){const n=dr(t,e),r=n[ye];!function Sme(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const i=n[yn];null!==i&&null===n[Rs]&&(n[Rs]=JM(i,n[Qo])),b_(r,n,n[En])}function b_(e,t,n){aM(t);try{const r=e.viewQuery;null!==r&&y_(1,r,n);const i=e.template;null!==i&&TO(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&jO(e,t),e.staticViewQueries&&y_(2,e.viewQuery,n);const a=e.components;null!==a&&function Eme(e,t){for(let n=0;n<t.length;n++)Hme(e,t[n])}(t,a)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[Ze]&=-5,sM()}}let XO=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const a=typeof Zone>"u"?null:Zone.current,s=function Ide(e,t,n){const r=Object.create(Fde);n&&(r.consumerAllowSignalWrites=!0),r.fn=e,r.schedule=t;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>iF(r),run:()=>{if(r.dirty=!1,r.hasRun&&!aF(r))return;r.hasRun=!0;const s=Yb(r);try{r.cleanupFn(),r.cleanupFn=hF,r.fn(i)}finally{Xb(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(n,l=>{this.all.has(l)&&this.queue.set(l,a)},i);let o;this.all.add(s),s.notify();const c=()=>{s.cleanup(),o?.(),this.all.delete(s),this.queue.delete(s)};return o=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=xe({token:e,providedIn:"root",factory:()=>new e})}return e})();function Kh(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,a=0;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?a=o:1==a?i=Vb(i,o):2==a&&(r=Vb(r,o+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function jf(e,t,n,r,i=!1){for(;null!==n;){const a=t[n.index];null!==a&&r.push(Wt(a)),e2(a)&&QO(a,r);const s=n.type;if(8&s)jf(e,t,n.child,r);else if(32&s){const o=xM(n,t);let c;for(;c=o();)r.push(c)}else if(16&s){const o=DR(t,n);if(Array.isArray(o))r.push(...o);else{const c=Nf(t[Vn]);jf(c[ye],c,o,r,!0)}}n=i?n.projectionNext:n.next}return r}function QO(e,t){for(let n=C1;n<e.length;n++){const r=e[n],i=r[ye].firstChild;null!==i&&jf(r[ye],r,i,t)}e[xa]!==e[yn]&&t.push(e[xa])}function Jh(e,t,n,r=!0){const i=t[t0],a=i.rendererFactory,s=i.afterRenderEventManager;a.begin?.(),s?.begin();try{ZO(e,t,e.template,n)}catch(c){throw r&&YO(t,c),c}finally{a.end?.(),i.effectManager?.flush(),s?.end()}}function ZO(e,t,n,r){const i=t[Ze];if(256!=(256&i)){t[t0].effectManager?.flush(),aM(t);try{bF(t),function EF(e){return Ue.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&TO(e,t,n,2,r);const s=3==(3&i);if(s){const l=e.preOrderCheckHooks;null!==l&&fh(t,l,null)}else{const l=e.preOrderHooks;null!==l&&dh(t,l,0,null),oM(t,0)}if(function Lme(e){for(let t=yR(e);null!==t;t=CR(t)){if(!t[ZI])continue;const n=t[a0];for(let r=0;r<n.length;r++){Wde(n[r])}}}(t),KO(t,2),null!==e.contentQueries&&jO(e,t),s){const l=e.contentCheckHooks;null!==l&&fh(t,l)}else{const l=e.contentHooks;null!==l&&dh(t,l,1),oM(t,1)}!function nme(e,t){const n=e.hostBindingOpCodes;if(null===n)return;const r=VO(t,Mf);try{for(let i=0;i<n.length;i++){const a=n[i];if(a<0)Y3(~a);else{const s=a,o=n[++i],c=n[++i];ahe(o,s),r.dirty=!1;const l=Yb(r);try{c(2,t[s])}finally{Xb(r,l)}}}}finally{null===t[Mf]&&DO(t,Mf),Y3(-1)}}(e,t);const o=e.components;null!==o&&eP(t,o,0);const c=e.viewQuery;if(null!==c&&y_(2,c,r),s){const l=e.viewCheckHooks;null!==l&&fh(t,l)}else{const l=e.viewHooks;null!==l&&dh(t,l,2),oM(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[Ze]&=-73,MF(t)}finally{sM()}}}function KO(e,t){for(let n=yR(e);null!==n;n=CR(n))for(let r=C1;r<n.length;r++)JO(n[r],t)}function Ame(e,t,n){JO(dr(t,e),n)}function JO(e,t){if(!function qde(e){return 128==(128&e[Ze])}(e))return;const n=e[ye],r=e[Ze];if(80&r&&0===t||1024&r||2===t)ZO(n,e,n.template,e[En]);else if(e[gf]>0){KO(e,1);const i=n.components;null!==i&&eP(e,i,1)}}function eP(e,t,n){for(let r=0;r<t.length;r++)Ame(e,t[r],n)}class qf{get rootNodes(){const t=this._lView,n=t[ye];return jf(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[En]}set context(t){this._lView[En]=t}get destroyed(){return 256==(256&this._lView[Ze])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[on];if(e2(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(Dh(t,r),yh(n,r))}this._attachedToViewContainer=!1}HM(this._lView[ye],this._lView)}onDestroy(t){!function wF(e,t){if(256==(256&e[Ze]))throw new ie(911,!1);null===e[Zo]&&(e[Zo]=[]),e[Zo].push(t)}(this._lView,t)}markForCheck(){Bf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ze]&=-129}reattach(){this._lView[Ze]|=128}detectChanges(){Jh(this._lView[ye],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function C9e(e,t){Tf(e,t,t[We],2,null,null)}(this._lView[ye],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=t}}class Nme extends qf{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Jh(t[ye],t,t[En],!1)}checkNoChanges(){}get context(){return null}}class tP extends Wh{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=ft(t);return new Gf(n,this.ngModule)}}function nP(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class Tme{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=eh(r);const i=this.injector.get(t,n_,r);return i!==n_||n===n_?i:this.parentInjector.get(t,n,r)}}class Gf extends oO{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=nP(t.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return nP(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function vde(e){return e.map(gde).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let a=(i=i||this.ngModule)instanceof mr?i:i?.injector;a&&null!==this.componentDef.getStandaloneInjector&&(a=this.componentDef.getStandaloneInjector(a)||a);const s=a?new Tme(t,a):t,o=s.get(lO,null);if(null===o)throw new ie(407,!1);const f={rendererFactory:o,sanitizer:s.get(Lpe,null),effectManager:s.get(XO,null),afterRenderEventManager:s.get(l_,null)},d=o.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?function ime(e,t,n,r){const a=r.get(zO,!1)||n===xi.ShadowDom,s=e.selectRootElement(t,a);return function ame(e){FO(e)}(s),s}(d,r,this.componentDef.encapsulation,s):Vh(d,h,function kme(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(h)),v=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let y=null;null!==p&&(y=JM(p,s,!0));const C=p_(0,null,null,1,0,null,null,null,null,null,null),b=Qh(null,C,null,v,null,null,f,d,s,null,y);let M,w;aM(b);try{const _=this.componentDef;let z,S=null;_.findHostDirectiveDefs?(z=[],S=new Map,_.findHostDirectiveDefs(_,z,S),z.push(_)):z=[_];const D=function Fme(e,t){const n=e[ye],r=st;return e[r]=t,D0(n,r,2,"#host",null)}(b,p),L=function Rme(e,t,n,r,i,a,s){const o=i[ye];!function Ome(e,t,n,r){for(const i of e)t.mergedAttrs=mf(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(Kh(t,t.mergedAttrs,!0),null!==n&&kR(r,n,t))}(r,e,t,s);let c=null;null!==t&&(c=JM(t,i[Qo]));const l=a.rendererFactory.createRenderer(t,n);let u=16;n.signals?u=4096:n.onPush&&(u=64);const f=Qh(i,IO(n),null,u,i[e.index],e,a,l,null,null,c);return o.firstCreatePass&&g_(o,e,r.length-1),Zh(i,f),i[e.index]=f}(D,p,_,z,b,f,d);w=CF(C,st),p&&function $me(e,t,n,r){if(r)Ub(e,n,["ng-version",Ape.full]);else{const{attrs:i,classes:a}=function yde(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let a=e[r];if("string"==typeof a)2===i?""!==a&&t.push(a,e[++r]):8===i&&n.push(a);else{if(!zi(i))break;i=a}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&Ub(e,n,i),a&&a.length>0&&NR(e,n,a.join(" "))}}(d,_,p,r),void 0!==n&&function Bme(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const a=n[i];r.push(null!=a?Array.from(a):null)}}(w,this.ngContentSelectors,n),M=function Pme(e,t,n,r,i,a){const s=M1(),o=i[ye],c=A2(s,i);PO(o,i,s,n,null,r);for(let u=0;u<n.length;u++)N1(X3(i,o,s.directiveStart+u,s),i);$O(o,i,s),c&&N1(c,i);const l=X3(i,o,s.directiveStart+s.componentOffset,s);if(e[En]=i[En]=l,null!==a)for(const u of a)u(l,t);return f_(o,s,e),l}(L,_,z,S,b,[Ume]),b_(C,b,null)}finally{sM()}return new Ime(this.componentType,M,S0(w,b),b,w)}}class Ime extends zpe{constructor(t,n,r,i,a){super(),this.location=r,this._rootLView=i,this._tNode=a,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Nme(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const a=this._rootLView;C_(a[ye],a,i,t,n),this.previousInputValues.set(t,n),Bf(dr(this._tNode.index,a))}}get injector(){return new a2(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function Ume(){const e=M1();uh(ee()[ye],e)}function Tt(e){let t=function rP(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const r=[e];for(;t;){let i;if(Si(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new ie(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);const s=e;s.inputs=e9(e.inputs),s.inputTransforms=e9(e.inputTransforms),s.declaredInputs=e9(e.declaredInputs),s.outputs=e9(e.outputs);const o=i.hostBindings;o&&Wme(e,o);const c=i.viewQuery,l=i.contentQueries;if(c&&qme(e,c),l&&Gme(e,l),Yd(e.inputs,i.inputs),Yd(e.declaredInputs,i.declaredInputs),Yd(e.outputs,i.outputs),null!==i.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),Yd(s.inputTransforms,i.inputTransforms)),Si(i)&&i.data.animation){const u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const a=i.features;if(a)for(let s=0;s<a.length;s++){const o=a[s];o&&o.ngInherit&&o(e),o===Tt&&(n=!1)}}t=Object.getPrototypeOf(t)}!function jme(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=mf(i.hostAttrs,n=mf(n,i.hostAttrs))}}(r)}function e9(e){return e===_a?{}:e===gt?[]:e}function qme(e,t){const n=e.viewQuery;e.viewQuery=n?(r,i)=>{t(r,i),n(r,i)}:t}function Gme(e,t){const n=e.contentQueries;e.contentQueries=n?(r,i,a)=>{t(r,i,a),n(r,i,a)}:t}function Wme(e,t){const n=e.hostBindings;e.hostBindings=n?(r,i)=>{t(r,i),n(r,i)}:t}function oP(e){const t=e.inputConfig,n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}e.inputTransforms=n}function t9(e){return!!M_(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function M_(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Na(e,t,n){return e[t]=n}function k1(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Ei(e,t,n,r){const i=ee();return k1(i,l0(),t)&&(dt(),Aa(pn(),i,e,t,n,r)),Ei}function N0(e,t,n,r,i,a){const o=function e4(e,t,n,r){const i=k1(e,t,n);return k1(e,t+1,r)||i}(e,function Os(){return Ue.lFrame.bindingIndex}(),n,i);return Ps(2),o?t+Ge(n)+r+Ge(i)+a:Xe}function It(e,t,n,r,i,a,s,o){const c=ee(),l=dt(),u=e+st,f=l.firstCreatePass?function yge(e,t,n,r,i,a,s,o,c){const l=t.consts,u=D0(t,e,4,s||null,Jo(l,o));m_(t,n,u,Jo(l,c)),uh(t,u);const f=u.tView=p_(2,u,r,i,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return null!==t.queries&&(t.queries.template(t,u),f.queries=t.queries.embeddedTView(u)),u}(u,l,c,t,n,r,i,a,s):l.data[u];Ea(f,!1);const d=bP(l,c,f,e);lh()&&Ah(l,c,d,f),N1(d,c),Zh(c,c[u]=UO(d,c,d,f)),ah(f)&&d_(l,c,f),null!=s&&h_(c,f,o)}let bP=function MP(e,t,n,r){return ec(!0),t[We].createComment("")};function qs(e){return o0(function rhe(){return Ue.lFrame.contextLView}(),st+e)}function de(e,t,n){const r=ee();return k1(r,l0(),t)&&gr(dt(),pn(),r,e,t,r[We],n,!1),de}function S_(e,t,n,r,i){const s=i?"class":"style";C_(e,n,t.inputs[s],s,r)}function I(e,t,n,r){const i=ee(),a=dt(),s=st+e,o=i[We],c=a.firstCreatePass?function _ge(e,t,n,r,i,a){const s=t.consts,c=D0(t,e,2,r,Jo(s,i));return m_(t,n,c,Jo(s,a)),null!==c.attrs&&Kh(c,c.attrs,!1),null!==c.mergedAttrs&&Kh(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(s,a,i,t,n,r):a.data[s],l=_P(a,i,c,o,t,e);i[s]=l;const u=ah(c);return Ea(c,!0),kR(o,l,c),32!=(32&c.flags)&&lh()&&Ah(a,i,l,c),0===function Xde(){return Ue.lFrame.elementDepthCount}()&&N1(l,i),function Qde(){Ue.lFrame.elementDepthCount++}(),u&&(d_(a,i,c),f_(a,c,i)),null!==r&&h_(i,c),I}function F(){let e=M1();eM()?tM():(e=e.parent,Ea(e,!1));const t=e;(function Kde(e){return Ue.skipHydrationRootTNode===e})(t)&&function nhe(){Ue.skipHydrationRootTNode=null}(),function Zde(){Ue.lFrame.elementDepthCount--}();const n=dt();return n.firstCreatePass&&(uh(n,e),qb(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function vhe(e){return 0!=(8&e.flags)}(t)&&S_(n,t,ee(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function yhe(e){return 0!=(16&e.flags)}(t)&&S_(n,t,ee(),t.stylesWithoutHost,!1),F}function Un(e,t,n,r){return I(e,t,n,r),F(),Un}let _P=(e,t,n,r,i,a)=>(ec(!0),Vh(r,i,function IF(){return Ue.lFrame.currentNamespace}()));function I2(e,t,n){const r=ee(),i=dt(),a=e+st,s=i.firstCreatePass?function zge(e,t,n,r,i){const a=t.consts,s=Jo(a,r),o=D0(t,e,8,"ng-container",s);return null!==s&&Kh(o,s,!0),m_(t,n,o,Jo(a,i)),null!==t.queries&&t.queries.elementStart(t,o),o}(a,i,r,t,n):i.data[a];Ea(s,!0);const o=xP(i,r,s,e);return r[a]=o,lh()&&Ah(i,r,o,s),N1(o,r),ah(s)&&(d_(i,r,s),f_(i,s,r)),null!=n&&h_(r,s),I2}function F2(){let e=M1();const t=dt();return eM()?tM():(e=e.parent,Ea(e,!1)),t.firstCreatePass&&(uh(t,e),qb(e)&&t.queries.elementEnd(e)),F2}let xP=(e,t,n,r)=>(ec(!0),zM(t[We],""));function t4(){return ee()}function Zf(e){return!!e&&"function"==typeof e.then}function zP(e){return!!e&&"function"==typeof e.subscribe}function Ae(e,t,n,r){const i=ee(),a=dt(),s=M1();return function SP(e,t,n,r,i,a,s){const o=ah(r),l=e.firstCreatePass&&GO(e),u=t[En],f=qO(t);let d=!0;if(3&r.type||s){const m=A2(r,t),g=s?s(m):m,v=f.length,y=s?b=>s(Wt(b[r.index])):r.index;let C=null;if(!s&&o&&(C=function Ege(e,t,n,r){const i=e.cleanup;if(null!=i)for(let a=0;a<i.length-1;a+=2){const s=i[a];if(s===n&&i[a+1]===r){const o=t[e0],c=i[a+2];return o.length>c?o[c]:null}"string"==typeof s&&(a+=2)}return null}(e,t,i,r.index)),null!==C)(C.__ngLastListenerFn__||C).__ngNextListenerFn__=a,C.__ngLastListenerFn__=a,d=!1;else{a=VP(r,t,u,a,!1);const b=n.listen(g,i,a);f.push(a,b),l&&l.push(i,y,v,v+1)}}else a=VP(r,t,u,a,!1);const h=r.outputs;let p;if(d&&null!==h&&(p=h[i])){const m=p.length;if(m)for(let g=0;g<m;g+=2){const M=t[p[g]][p[g+1]].subscribe(a),w=f.length;f.push(a,M),l&&l.push(i,r.index,w,-(w+1))}}}(a,i,i[We],s,e,t,r),Ae}function EP(e,t,n,r){try{return za(6,t,n),!1!==n(r)}catch(i){return YO(e,i),!1}finally{za(7,t,n)}}function VP(e,t,n,r,i){return function a(s){if(s===Function)return r;Bf(e.componentOffset>-1?dr(e.index,t):t);let c=EP(t,n,r,s),l=a.__ngNextListenerFn__;for(;l;)c=EP(t,n,l,s)&&c,l=l.__ngNextListenerFn__;return i&&!1===c&&s.preventDefault(),c}}function Kt(e=1){return function che(e){return(Ue.lFrame.contextLView=function lhe(e,t){for(;e>0;)t=t[n0],e--;return t}(e,Ue.lFrame.contextLView))[En]}(e)}function Vge(e,t){let n=null;const r=function dde(e){const t=e.attrs;if(null!=t){const n=t.indexOf(5);if(!(1&n))return t[n+1]}return null}(e);for(let i=0;i<t.length;i++){const a=t[i];if("*"!==a){if(null===r?jI(e,a,!0):mde(r,a))return i}else n=i}return n}function s9(e,t){return e<<17|t<<2}function nc(e){return e>>17&32767}function V_(e){return 2|e}function n4(e){return(131068&e)>>2}function D_(e,t){return-131069&e|t<<2}function L_(e){return 1|e}function $P(e,t,n,r,i){const a=e[n+1],s=null===t;let o=r?nc(a):n4(a),c=!1;for(;0!==o&&(!1===c||s);){const u=e[o+1];Tge(e[o],t)&&(c=!0,e[o+1]=r?L_(u):V_(u)),o=r?nc(u):n4(u)}c&&(e[n+1]=r?V_(a):L_(a))}function Tge(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&v0(e,t)>=0}function o9(e,t){return function Vi(e,t,n,r){const i=ee(),a=dt(),s=Ps(2);a.firstUpdatePass&&function QP(e,t,n,r){const i=e.data;if(null===i[n+1]){const a=i[r2()],s=function XP(e,t){return t>=e.expandoStartIndex}(e,n);(function e$(e,t){return 0!=(e.flags&(t?8:16))})(a,r)&&null===t&&!s&&(t=!1),t=function jge(e,t,n,r){const i=function rM(e){const t=Ue.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let a=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=Kf(n=A_(null,e,t,n,r),t.attrs,r),a=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==i)if(n=A_(i,e,t,n,r),null===a){let c=function qge(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==n4(r))return e[nc(r)]}(e,t,r);void 0!==c&&Array.isArray(c)&&(c=A_(null,e,t,c[1],r),c=Kf(c,t.attrs,r),function Gge(e,t,n,r){e[nc(n?t.classBindings:t.styleBindings)]=r}(e,t,r,c))}else a=function Wge(e,t,n){let r;const i=t.directiveEnd;for(let a=1+t.directiveStylingLast;a<i;a++)r=Kf(r,e[a].hostAttrs,n);return Kf(r,t.attrs,n)}(e,t,r)}return void 0!==a&&(r?t.residualClasses=a:t.residualStyles=a),n}(i,a,t,r),function Nge(e,t,n,r,i,a){let s=a?t.classBindings:t.styleBindings,o=nc(s),c=n4(s);e[r]=n;let u,l=!1;if(Array.isArray(n)?(u=n[1],(null===u||v0(n,u)>0)&&(l=!0)):u=n,i)if(0!==c){const d=nc(e[o+1]);e[r+1]=s9(d,o),0!==d&&(e[d+1]=D_(e[d+1],r)),e[o+1]=function Lge(e,t){return 131071&e|t<<17}(e[o+1],r)}else e[r+1]=s9(o,0),0!==o&&(e[o+1]=D_(e[o+1],r)),o=r;else e[r+1]=s9(c,0),0===o?o=r:e[c+1]=D_(e[c+1],r),c=r;l&&(e[r+1]=V_(e[r+1])),$P(e,u,r,!0),$P(e,u,r,!1),function kge(e,t,n,r,i){const a=i?e.residualClasses:e.residualStyles;null!=a&&"string"==typeof t&&v0(a,t)>=0&&(n[r+1]=L_(n[r+1]))}(t,u,e,r,a),s=s9(o,c),a?t.classBindings=s:t.styleBindings=s}(i,a,t,n,s,r)}}(a,e,s,r),t!==Xe&&k1(i,s,t)&&function KP(e,t,n,r,i,a,s,o){if(!(3&t.type))return;const c=e.data,l=c[o+1],u=function Age(e){return 1==(1&e)}(l)?JP(c,t,n,i,n4(l),s):void 0;c9(u)||(c9(a)||function Dge(e){return 2==(2&e)}(l)&&(a=JP(c,null,n,i,o,s)),function V9e(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let a=-1===r.indexOf("-")?void 0:tc.DashCase;null==i?e.removeStyle(n,r,a):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),a|=tc.Important),e.setStyle(n,r,i,a))}}(r,s,ch(r2(),n),i,a))}(a,a.data[r2()],i,i[We],e,i[s+1]=function Zge(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=$n(pr(e)))),e}(t,n),r,s)}(e,t,null,!0),o9}function A_(e,t,n,r,i){let a=null;const s=n.directiveEnd;let o=n.directiveStylingLast;for(-1===o?o=n.directiveStart:o++;o<s&&(a=t[o],r=Kf(r,a.hostAttrs,i),a!==e);)o++;return null!==e&&(n.directiveStylingLast=o),r}function Kf(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let a=0;a<t.length;a++){const s=t[a];"number"==typeof s?i=s:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),hr(e,s,!!n||t[++a]))}return void 0===e?null:e}function JP(e,t,n,r,i,a){const s=null===t;let o;for(;i>0;){const c=e[i],l=Array.isArray(c),u=l?c[1]:c,f=null===u;let d=n[i+1];d===Xe&&(d=f?gt:void 0);let h=f?mM(d,r):u===r?d:void 0;if(l&&!c9(h)&&(h=mM(c,r)),c9(h)&&(o=h,s))return o;const p=e[i+1];i=s?nc(p):n4(p)}if(null!==t){let c=a?t.residualClasses:t.residualStyles;null!=c&&(o=mM(c,r))}return o}function c9(e){return void 0!==e}function P(e,t=""){const n=ee(),r=dt(),i=e+st,a=r.firstCreatePass?D0(r,i,1,t,null):r.data[i],s=t$(r,n,a,t,e);n[i]=s,lh()&&Ah(r,n,s,a),Ea(a,!1)}let t$=(e,t,n,r,i)=>(ec(!0),function Eh(e,t){return e.createText(t)}(t[We],r));function R2(e){return Qe("",e,""),R2}function Qe(e,t,n){const r=ee(),i=function A0(e,t,n,r){return k1(e,l0(),n)?t+Ge(n)+r:Xe}(r,e,t,n);return i!==Xe&&js(r,r2(),i),Qe}function N_(e,t,n,r,i){const a=ee(),s=N0(a,e,t,n,r,i);return s!==Xe&&js(a,r2(),s),N_}function k_(e,t,n){const r=ee();return k1(r,l0(),t)&&gr(dt(),pn(),r,e,t,r[We],n,!0),k_}const r4=void 0;var Cve=["en",[["a","p"],["AM","PM"],r4],[["AM","PM"],r4,r4],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],r4,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],r4,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",r4,"{1} 'at' {0}",r4],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function yve(e){const n=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let $0={};function s2(e){const t=function bve(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=b$(t);if(n)return n;const r=t.split("-")[0];if(n=b$(r),n)return n;if("en"===r)return Cve;throw new ie(701,!1)}function b$(e){return e in $0||($0[e]=Gt.ng&&Gt.ng.common&&Gt.ng.common.locales&&Gt.ng.common.locales[e]),$0[e]}var Xt=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Xt||{});const B0="en-US";let M$=B0;function F_(e,t,n,r,i){if(e=je(e),Array.isArray(e))for(let a=0;a<e.length;a++)F_(e[a],t,n,r,i);else{const a=dt(),s=ee(),o=M1();let c=K3(e)?e:je(e.provide);const l=tO(e),u=1048575&o.providerIndexes,f=o.directiveStart,d=o.providerIndexes>>20;if(K3(e)||!e.multi){const h=new zf(l,i,q),p=O_(c,t,i?u:u+d,f);-1===p?(dM(ph(o,s),a,c),R_(a,e,t.length),t.push(c),o.directiveStart++,o.directiveEnd++,i&&(o.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{const h=O_(c,t,u+d,f),p=O_(c,t,u,u+d),g=p>=0&&n[p];if(i&&!g||!i&&!(h>=0&&n[h])){dM(ph(o,s),a,c);const v=function yye(e,t,n,r,i){const a=new zf(e,n,q);return a.multi=[],a.index=t,a.componentProviders=0,G$(a,i,r&&!n),a}(i?vye:gye,n.length,i,r,l);!i&&g&&(n[p].providerFactory=v),R_(a,e,t.length,0),t.push(c),o.directiveStart++,o.directiveEnd++,i&&(o.providerIndexes+=1048576),n.push(v),s.push(v)}else R_(a,e,h>-1?h:p,G$(n[i?p:h],l,!i&&r));!i&&r&&g&&n[p].componentProviders++}}}function R_(e,t,n,r){const i=K3(t),a=function cpe(e){return!!e.useClass}(t);if(i||a){const c=(a?je(t.useClass):t).prototype.ngOnDestroy;if(c){const l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const u=l.indexOf(n);-1===u?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function G$(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function O_(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function gye(e,t,n,r){return P_(this.multi,[])}function vye(e,t,n,r){const i=this.multi;let a;if(this.providerFactory){const s=this.providerFactory.componentProviders,o=X3(n,n[ye],this.providerFactory.index,r);a=o.slice(0,s),P_(i,a);for(let c=s;c<o.length;c++)a.push(o[c])}else a=[],P_(i,a);return a}function P_(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function cn(e,t=[]){return n=>{n.providersResolver=(r,i)=>function mye(e,t,n){const r=dt();if(r.firstCreatePass){const i=Si(e);F_(n,r.data,r.blueprint,i,!0),F_(t,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,t)}}class i4{}class W${}class $_ extends i4{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new tP(this);const i=fr(t);this._bootstrapComponents=Us(i.bootstrap),this._r3Injector=pO(t,n,[{provide:i4,useValue:this},{provide:Wh,useValue:this.componentFactoryResolver},...r],$n(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class B_ extends W${constructor(t){super(),this.moduleType=t}create(t){return new $_(this.moduleType,t,[])}}class Y$ extends i4{constructor(t){super(),this.componentFactoryResolver=new tP(this),this.instance=null;const n=new w0([...t.providers,{provide:i4,useValue:this},{provide:Wh,useValue:this.componentFactoryResolver}],t.parent||Ph(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function U_(e,t,n=null){return new Y$({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}let Mye=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=ZR(0,n.type),i=r.length>0?U_([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=xe({token:e,providedIn:"environment",factory:()=>new e(ze(mr))})}return e})();function X$(e){e.getStandaloneInjector=t=>t.get(Mye).getOrCreateStandaloneInjector(e)}function Gs(e,t,n){const r=n2()+e,i=ee();return i[r]===Xe?Na(i,r,n?t.call(n):t()):function Wf(e,t){return e[t]}(i,r)}function h9(e,t,n,r){return nB(ee(),n2(),e,t,n,r)}function nB(e,t,n,r,i,a){const s=t+n;return k1(e,s,i)?Na(e,s+1,a?r.call(a,i):r(i)):function i8(e,t){const n=e[t];return n===Xe?void 0:n}(e,s+1)}function Ia(e,t){const n=dt();let r;const i=e+st;n.firstCreatePass?(r=function Rye(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const a=r.factory||(r.factory=W3(r.type)),o=V2(q);try{const c=hh(!1),l=a();return hh(c),function Mge(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,ee(),i,l),l}finally{V2(o)}}function Fa(e,t,n){const r=e+st,i=ee(),a=o0(i,r);return function a8(e,t){return e[ye].data[t].pure}(i,r)?nB(i,n2(),t,a.transform,n,a):a.transform(n)}function Uye(){return this._results[Symbol.iterator]()}class q_{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Cn)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=q_.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Uye)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const r=this;r.dirty=!1;const i=function Gr(e){return e.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function Ahe(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],a=t[r];if(n&&(i=n(i),a=n(a)),a!==i)return!1}return!0}(r._results,i,n))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function qye(e,t,n,r=!0){const i=t[ye];if(function M9e(e,t,n,r){const i=C1+r,a=n.length;r>0&&(n[i-1][Hi]=t),r<a-C1?(t[Hi]=n[i],ZF(n,C1+r,t)):(n.push(t),t[Hi]=null),t[on]=n;const s=t[yf];null!==s&&n!==s&&function _9e(e,t){const n=e[a0];t[Vn]!==t[on][on][Vn]&&(e[ZI]=!0),null===n?e[a0]=[t]:n.push(t)}(s,t);const o=t[wa];null!==o&&o.insertView(e),t[Ze]|=128}(i,t,e,n),r){const a=DM(n,e),s=t[We],o=Lh(s,e[xa]);null!==o&&function y9e(e,t,n,r,i,a){r[yn]=i,r[A1]=t,Tf(e,r,n,1,i,a)}(i,e[A1],s,t,o,a)}}let Ws=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=Yye}return e})();const Gye=Ws,Wye=class extends Gye{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){const i=function jye(e,t,n,r){const i=t.tView,o=Qh(e,i,n,4096&e[Ze]?4096:16,null,t,null,null,null,r?.injector??null,r?.hydrationInfo??null);o[yf]=e[t.index];const l=e[wa];return null!==l&&(o[wa]=l.createEmbeddedView(i)),b_(i,o,n),o}(this._declarationLView,this._declarationTContainer,t,{injector:n,hydrationInfo:r});return new qf(i)}};function Yye(){return p9(M1(),ee())}function p9(e,t){return 4&e.type?new Wye(t,e,S0(e,t)):null}let Li=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=eCe}return e})();function eCe(){return hB(M1(),ee())}const tCe=Li,fB=class extends tCe{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return S0(this._hostTNode,this._hostLView)}get injector(){return new a2(this._hostTNode,this._hostLView)}get parentInjector(){const t=mh(this._hostTNode,this._hostLView);if(lM(t)){const n=Sf(t,this._hostLView),r=Hf(t);return new a2(n[ye].data[r+8],n)}return new a2(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=dB(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-C1}createEmbeddedView(t,n,r){let i,a;"number"==typeof r?i=r:null!=r&&(i=r.index,a=r.injector);const o=t.createEmbeddedViewImpl(n||{},a,null);return this.insertImpl(o,i,false),o}createComponent(t,n,r,i,a){const s=t&&!function Vf(e){return"function"==typeof e}(t);let o;if(s)o=n;else{const m=n||{};o=m.index,r=m.injector,i=m.projectableNodes,a=m.environmentInjector||m.ngModuleRef}const c=s?t:new Gf(ft(t)),l=r||this.parentInjector;if(!a&&null==c.ngModule){const g=(s?l:this.parentInjector).get(mr,null);g&&(a=g)}ft(c.componentType??{});const h=c.create(l,i,null,a);return this.insertImpl(h.hostView,o,false),h}insert(t,n){return this.insertImpl(t,n,!1)}insertImpl(t,n,r){const i=t._lView;if(function Gde(e){return e2(e[on])}(i)){const c=this.indexOf(t);if(-1!==c)this.detach(c);else{const l=i[on],u=new fB(l,l[A1],l[on]);u.detach(u.indexOf(t))}}const s=this._adjustIndex(n),o=this._lContainer;return qye(o,i,s,!r),t.attachToViewContainerRef(),ZF(G_(o),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=dB(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Dh(this._lContainer,n);r&&(yh(G_(this._lContainer),n),HM(r[ye],r))}detach(t){const n=this._adjustIndex(t,-1),r=Dh(this._lContainer,n);return r&&null!=yh(G_(this._lContainer),n)?new qf(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function dB(e){return e[8]}function G_(e){return e[8]||(e[8]=[])}function hB(e,t){let n;const r=t[e.index];return e2(r)?n=r:(n=UO(r,t,null,e),t[e.index]=n,Zh(t,n)),pB(n,t,e,r),new fB(n,e,t)}let pB=function mB(e,t,n,r){if(e[xa])return;let i;i=8&n.type?Wt(r):function nCe(e,t){const n=e[We],r=n.createComment(""),i=A2(t,e);return Q3(n,Lh(n,i),r,function H9e(e,t){return e.nextSibling(t)}(n,i),!1),r}(t,n),e[xa]=i};class W_{constructor(t){this.queryList=t,this.matches=null}clone(){return new W_(this.queryList)}setDirty(){this.queryList.setDirty()}}class Y_{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[];for(let a=0;a<r;a++){const s=n.getByIndex(a);i.push(this.queries[s.indexInDeclarationView].clone())}return new Y_(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==wB(t,n).matches&&this.queries[n].setDirty()}}class gB{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}}class X_{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,a=this.getByIndex(r).embeddedTView(t,i);a&&(a.indexInDeclarationView=r,null!==n?n.push(a):n=[a])}return null!==n?new X_(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Q_{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new Q_(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const a=r[i];this.matchTNodeWithReadOption(t,n,aCe(n,a)),this.matchTNodeWithReadOption(t,n,gh(n,t,a,!1,!1))}else r===Ws?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,gh(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===k2||i===Li||i===Ws&&4&n.type)this.addMatch(n.index,-2);else{const a=gh(n,t,i,!1,!1);null!==a&&this.addMatch(n.index,a)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function aCe(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function oCe(e,t,n,r){return-1===n?function sCe(e,t){return 11&e.type?S0(e,t):4&e.type?p9(e,t):null}(t,e):-2===n?function cCe(e,t,n){return n===k2?S0(t,e):n===Ws?p9(t,e):n===Li?hB(t,e):void 0}(e,t,r):X3(e,e[ye],n,t)}function vB(e,t,n,r){const i=t[wa].queries[r];if(null===i.matches){const a=e.data,s=n.matches,o=[];for(let c=0;c<s.length;c+=2){const l=s[c];o.push(l<0?null:oCe(t,a[l],s[c+1],n.metadata.read))}i.matches=o}return i.matches}function Z_(e,t,n,r){const i=e.queries.getByIndex(n),a=i.matches;if(null!==a){const s=vB(e,t,i,n);for(let o=0;o<a.length;o+=2){const c=a[o];if(c>0)r.push(s[o/2]);else{const l=a[o+1],u=t[-c];for(let f=C1;f<u.length;f++){const d=u[f];d[yf]===d[on]&&Z_(d[ye],d,l,r)}if(null!==u[a0]){const f=u[a0];for(let d=0;d<f.length;d++){const h=f[d];Z_(h[ye],h,l,r)}}}}}return r}function yB(e){const t=ee(),n=dt(),r=DF();iM(r+1);const i=wB(n,r);if(e.dirty&&function jde(e){return 4==(4&e[Ze])}(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const a=i.crossesNgTemplate?Z_(n,t,r,[]):vB(n,t,i,r);e.reset(a,Vpe),e.notifyOnChanges()}return!0}return!1}function CB(e,t,n,r){const i=dt();if(i.firstCreatePass){const a=M1();(function _B(e,t,n){null===e.queries&&(e.queries=new X_),e.queries.track(new Q_(t,n))})(i,new gB(t,n,r),a.index),function fCe(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}!function MB(e,t,n){const r=new q_(4==(4&n));(function cme(e,t,n,r){const i=qO(t);i.push(n),e.firstCreatePass&&GO(e).push(r,i.length-1)})(e,t,r,r.destroy),null===t[wa]&&(t[wa]=new Y_),t[wa].queries.push(new W_(r))}(i,ee(),n)}function wB(e,t){return e.queries.getByIndex(t)}function s8(e,t){return p9(e,t)}const rw=new Me("Application Initializer");let iw=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=be(rw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const a=i();if(Zf(a))n.push(a);else if(zP(a)){const s=new Promise((o,c)=>{a.subscribe({complete:o,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),PB=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const Ys=new Me("LocaleId",{providedIn:"root",factory:()=>be(Ys,at.Optional|at.SkipSelf)||function ACe(){return typeof $localize<"u"&&$localize.locale||B0}()});let v9=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new E2(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class TCe{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let $B=(()=>{class e{compileModuleSync(n){return new B_(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),a=Us(fr(n).declarations).reduce((s,o)=>{const c=ft(o);return c&&s.push(new Gf(c)),s},[]);return new TCe(r,a)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const qB=new Me(""),C9=new Me("");let lw,ow=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,lw||(function rbe(e){lw=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let a=-1;r&&r>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==a),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:a,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||e)(ze(Yt),ze(cw),ze(C9))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac})}return e})(),cw=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return lw?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),rc=null;const GB=new Me("AllowMultipleToken"),uw=new Me("PlatformDestroyListeners"),fw=new Me("appBootstrapListener");class YB{constructor(t,n){this.name=t,this.token=n}}function QB(e,t,n=[]){const r=`Platform: ${t}`,i=new Me(r);return(a=[])=>{let s=dw();if(!s||s.injector.get(GB,!1)){const o=[...n,...a,{provide:i,useValue:!0}];e?e(o):function sbe(e){if(rc&&!rc.get(GB,!1))throw new ie(400,!1);(function WB(){!function Lde(e){lF=e}(()=>{throw new ie(600,!1)})})(),rc=e;const t=e.get(KB);(function XB(e){e.get(nO,null)?.forEach(n=>n())})(e)}(function ZB(e=[],t){return T2.create({name:t,providers:[{provide:BM,useValue:"platform"},{provide:uw,useValue:new Set([()=>rc=null])},...e]})}(o,r))}return function cbe(e){const t=dw();if(!t)throw new ie(401,!1);return t}()}}function dw(){return rc?.get(KB)??null}let KB=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function lbe(e="zone.js",t){return"noop"===e?new jpe:"zone.js"===e?new Yt(t):e}(r?.ngZone,function JB(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const a=function bye(e,t,n){return new $_(e,t,n)}(n.moduleType,this.injector,function iU(e){return[{provide:Yt,useFactory:e},{provide:Rf,multi:!0,useFactory:()=>{const t=be(fbe,{optional:!0});return()=>t.initialize()}},{provide:rU,useFactory:ube},{provide:CO,useFactory:bO}]}(()=>i)),s=a.injector.get(Bs,null);return i.runOutsideAngular(()=>{const o=i.onError.subscribe({next:c=>{s.handleError(c)}});a.onDestroy(()=>{b9(this._modules,a),o.unsubscribe()})}),function eU(e,t,n){try{const r=n();return Zf(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,i,()=>{const o=a.injector.get(iw);return o.runInitializers(),o.donePromise.then(()=>(function _$(e){Ur(e,"Expected localeId to be defined"),"string"==typeof e&&(M$=e.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Ys,B0)||B0),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,r=[]){const i=tU({},r);return function ibe(e,t,n){const r=new B_(n);return Promise.resolve(r)}(0,0,n).then(a=>this.bootstrapModuleFactory(a,i))}_moduleDoBootstrap(n){const r=n.injector.get(q0);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new ie(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ie(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(uw,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||e)(ze(T2))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function tU(e,t){return Array.isArray(t)?t.reduce(tU,e):{...e,...t}}let q0=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=be(rU),this.zoneIsStable=be(CO),this.componentTypes=[],this.components=[],this.isStable=be(v9).hasPendingTasks.pipe(wi(n=>n?Ce(!1):this.zoneIsStable),function B7e(e,t=Wo){return e=e??U7e,On((n,r)=>{let i,a=!0;n.subscribe(Tn(r,s=>{const o=t(s);(a||!e(i,o))&&(a=!1,i=o,r.next(s))}))})}(),SI()),this._injector=be(mr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof oO;if(!this._injector.get(iw).done)throw!i&&function Jl(e){const t=ft(e)||y1(e)||J1(e);return null!==t&&t.standalone}(n),new ie(405,!1);let s;s=i?n:this._injector.get(Wh).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const o=function abe(e){return e.isBoundToModule}(s)?void 0:this._injector.get(i4),l=s.create(T2.NULL,[],r||s.selector,o),u=l.location.nativeElement,f=l.injector.get(qB,null);return f?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),b9(this.components,l),f?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new ie(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;b9(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(fw,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>b9(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ie(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function b9(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const rU=new Me("",{providedIn:"root",factory:()=>be(Bs).handleError.bind(void 0)});function ube(){const e=be(Yt),t=be(Bs);return n=>e.runOutsideAngular(()=>t.handleError(n))}let fbe=(()=>{class e{constructor(){this.zone=be(Yt),this.applicationRef=be(q0)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();let M9=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=hbe}return e})();function hbe(e){return function pbe(e,t,n){if(G3(e)&&!n){const r=dr(e.index,t);return new qf(r,r)}return 47&e.type?new qf(t[Vn],t):null}(M1(),ee(),16==(16&e))}class cU{constructor(){}supports(t){return t9(t)}create(t){return new bbe(t)}}const Cbe=(e,t)=>t;class bbe{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Cbe}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,a=null;for(;n||r;){const s=!r||n&&n.currentIndex<uU(r,i,a)?n:r,o=uU(s,i,a),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{a||(a=[]);const l=o-i,u=c-i;if(l!=u){for(let d=0;d<l;d++){const h=d<a.length?a[d]:a[d]=0,p=h+d;u<=p&&p<l&&(a[d]=h+1)}a[s.previousIndex]=u-l}}o!==c&&t(s,o,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!t9(t))throw new ie(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,a,s,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let o=0;o<this.length;o++)a=t[o],s=this._trackByFn(o,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,o),r=!0),n=n._next}else i=0,function ege(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,o=>{s=this._trackByFn(i,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,i)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let a;return null===t?a=this._itTail:(a=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,a,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,a,i)):t=this._addAfter(new Mbe(n,r),a,i),t}_verifyReinsertion(t,n,r,i){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==a?t=this._reinsertAfter(a,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,a=t._nextRemoved;return null===i?this._removalsHead=a:i._nextRemoved=a,null===a?this._removalsTail=i:a._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new lU),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lU),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Mbe{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _be{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class lU{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new _be,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uU(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class fU{constructor(){}supports(t){return t instanceof Map||M_(t)}create(){return new wbe}}class wbe{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||M_(t)))throw new ie(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const a=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,a)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const r=t._prev;return n._next=t,n._prev=r,t._prev=n,r&&(r._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const i=this._records.get(t);this._maybeAddToChanges(i,n);const a=i._prev,s=i._next;return a&&(a._next=s),s&&(s._prev=a),i._next=null,i._prev=null,i}const r=new xbe(t);return this._records.set(t,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(r=>n(t[r],r))}}class xbe{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function dU(){return new x9([new cU])}let x9=(()=>{class e{static#e=this.\u0275prov=xe({token:e,providedIn:"root",factory:dU});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||dU()),deps:[[e,new Mh,new bh]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new ie(901,!1)}}return e})();function hU(){return new l8([new fU])}let l8=(()=>{class e{static#e=this.\u0275prov=xe({token:e,providedIn:"root",factory:hU});constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||hU()),deps:[[e,new Mh,new bh]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new ie(901,!1)}}return e})();const Sbe=QB(null,"core",[]);let Ebe=(()=>{class e{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||e)(ze(q0))};static#t=this.\u0275mod=jr({type:e});static#n=this.\u0275inj=ur({})}return e})();function G0(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}let yw=null;function ic(){return yw}class Bbe{}const c2=new Me("DocumentToken");let Cw=(()=>{class e{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:function(){return be(jbe)},providedIn:"platform"})}return e})();const Ube=new Me("Location Initialized");let jbe=(()=>{class e extends Cw{constructor(){super(),this._doc=be(c2),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ic().getBaseHref(this._doc)}onPopState(n){const r=ic().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ic().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:function(){return new e},providedIn:"platform"})}return e})();function bw(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function _U(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Xs(e){return e&&"?"!==e[0]?"?"+e:e}let s4=(()=>{class e{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:function(){return be(xU)},providedIn:"root"})}return e})();const wU=new Me("appBaseHref");let xU=(()=>{class e extends s4{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??be(c2).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return bw(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Xs(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,a){const s=this.prepareExternalUrl(i+Xs(a));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,a){const s=this.prepareExternalUrl(i+Xs(a));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||e)(ze(Cw),ze(wU,8))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),qbe=(()=>{class e extends s4{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=bw(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,a){let s=this.prepareExternalUrl(i+Xs(a));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,a){let s=this.prepareExternalUrl(i+Xs(a));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||e)(ze(Cw),ze(wU,8))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac})}return e})(),Mw=(()=>{class e{constructor(n){this._subject=new Cn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function Ybe(e){if(new RegExp("^(https?:)?//").test(e)){const[,n]=e.split(/\/\/[^\/]+/);return n}return e}(_U(zU(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Xs(r))}normalize(n){return e.stripTrailingSlash(function Wbe(e,t){if(!e||!t.startsWith(e))return t;const n=t.substring(e.length);return""===n||["/",";","?","#"].includes(n[0])?n:t}(this._basePath,zU(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Xs(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Xs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=Xs;static#t=this.joinWithSlash=bw;static#n=this.stripTrailingSlash=_U;static#r=this.\u0275fac=function(r){return new(r||e)(ze(s4))};static#i=this.\u0275prov=xe({token:e,factory:function(){return function Gbe(){return new Mw(ze(s4))}()},providedIn:"root"})}return e})();function zU(e){return e.replace(/\/index.html$/,"")}var l2=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}(l2||{}),Ut=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}(Ut||{}),vr=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}(vr||{}),Dn=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e.Infinity=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}(Dn||{});function S9(e,t){return Qr(s2(e)[Xt.DateFormat],t)}function E9(e,t){return Qr(s2(e)[Xt.TimeFormat],t)}function V9(e,t){return Qr(s2(e)[Xt.DateTimeFormat],t)}function Xr(e,t){const n=s2(e),r=n[Xt.NumberSymbols][t];if(typeof r>"u"){if(t===Dn.CurrencyDecimal)return n[Xt.NumberSymbols][Dn.Decimal];if(t===Dn.CurrencyGroup)return n[Xt.NumberSymbols][Dn.Group]}return r}function SU(e){if(!e[Xt.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[Xt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Qr(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new Error("Locale data API: locale data undefined")}function ww(e){const[t,n]=e.split(":");return{hours:+t,minutes:+n}}const cMe=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,u8={},lMe=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Qs=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}(Qs||{}),_t=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}(_t||{}),wt=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}(wt||{});function uMe(e,t,n,r){let i=function CMe(e){if(DU(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[i,a=1,s=1]=e.split("-").map(o=>+o);return D9(i,a-1,s)}const n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let r;if(r=e.match(cMe))return function bMe(e){const t=new Date(0);let n=0,r=0;const i=e[8]?t.setUTCFullYear:t.setFullYear,a=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));const s=Number(e[4]||0)-n,o=Number(e[5]||0)-r,c=Number(e[6]||0),l=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return a.call(t,s,o,c,l),t}(r)}const t=new Date(e);if(!DU(t))throw new Error(`Unable to convert "${e}" into a date`);return t}(e);t=Zs(n,t)||t;let o,s=[];for(;t;){if(o=lMe.exec(t),!o){s.push(t);break}{s=s.concat(o.slice(1));const u=s.pop();if(!u)break;t=u}}let c=i.getTimezoneOffset();r&&(c=VU(r,c),i=function yMe(e,t,n){const r=n?-1:1,i=e.getTimezoneOffset();return function vMe(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,r*(VU(t,i)-i))}(i,r,!0));let l="";return s.forEach(u=>{const f=function gMe(e){if(zw[e])return zw[e];let t;switch(e){case"G":case"GG":case"GGG":t=Qt(wt.Eras,Ut.Abbreviated);break;case"GGGG":t=Qt(wt.Eras,Ut.Wide);break;case"GGGGG":t=Qt(wt.Eras,Ut.Narrow);break;case"y":t=In(_t.FullYear,1,0,!1,!0);break;case"yy":t=In(_t.FullYear,2,0,!0,!0);break;case"yyy":t=In(_t.FullYear,3,0,!1,!0);break;case"yyyy":t=In(_t.FullYear,4,0,!1,!0);break;case"Y":t=k9(1);break;case"YY":t=k9(2,!0);break;case"YYY":t=k9(3);break;case"YYYY":t=k9(4);break;case"M":case"L":t=In(_t.Month,1,1);break;case"MM":case"LL":t=In(_t.Month,2,1);break;case"MMM":t=Qt(wt.Months,Ut.Abbreviated);break;case"MMMM":t=Qt(wt.Months,Ut.Wide);break;case"MMMMM":t=Qt(wt.Months,Ut.Narrow);break;case"LLL":t=Qt(wt.Months,Ut.Abbreviated,l2.Standalone);break;case"LLLL":t=Qt(wt.Months,Ut.Wide,l2.Standalone);break;case"LLLLL":t=Qt(wt.Months,Ut.Narrow,l2.Standalone);break;case"w":t=xw(1);break;case"ww":t=xw(2);break;case"W":t=xw(1,!0);break;case"d":t=In(_t.Date,1);break;case"dd":t=In(_t.Date,2);break;case"c":case"cc":t=In(_t.Day,1);break;case"ccc":t=Qt(wt.Days,Ut.Abbreviated,l2.Standalone);break;case"cccc":t=Qt(wt.Days,Ut.Wide,l2.Standalone);break;case"ccccc":t=Qt(wt.Days,Ut.Narrow,l2.Standalone);break;case"cccccc":t=Qt(wt.Days,Ut.Short,l2.Standalone);break;case"E":case"EE":case"EEE":t=Qt(wt.Days,Ut.Abbreviated);break;case"EEEE":t=Qt(wt.Days,Ut.Wide);break;case"EEEEE":t=Qt(wt.Days,Ut.Narrow);break;case"EEEEEE":t=Qt(wt.Days,Ut.Short);break;case"a":case"aa":case"aaa":t=Qt(wt.DayPeriods,Ut.Abbreviated);break;case"aaaa":t=Qt(wt.DayPeriods,Ut.Wide);break;case"aaaaa":t=Qt(wt.DayPeriods,Ut.Narrow);break;case"b":case"bb":case"bbb":t=Qt(wt.DayPeriods,Ut.Abbreviated,l2.Standalone,!0);break;case"bbbb":t=Qt(wt.DayPeriods,Ut.Wide,l2.Standalone,!0);break;case"bbbbb":t=Qt(wt.DayPeriods,Ut.Narrow,l2.Standalone,!0);break;case"B":case"BB":case"BBB":t=Qt(wt.DayPeriods,Ut.Abbreviated,l2.Format,!0);break;case"BBBB":t=Qt(wt.DayPeriods,Ut.Wide,l2.Format,!0);break;case"BBBBB":t=Qt(wt.DayPeriods,Ut.Narrow,l2.Format,!0);break;case"h":t=In(_t.Hours,1,-12);break;case"hh":t=In(_t.Hours,2,-12);break;case"H":t=In(_t.Hours,1);break;case"HH":t=In(_t.Hours,2);break;case"m":t=In(_t.Minutes,1);break;case"mm":t=In(_t.Minutes,2);break;case"s":t=In(_t.Seconds,1);break;case"ss":t=In(_t.Seconds,2);break;case"S":t=In(_t.FractionalSeconds,1);break;case"SS":t=In(_t.FractionalSeconds,2);break;case"SSS":t=In(_t.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=A9(Qs.Short);break;case"ZZZZZ":t=A9(Qs.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=A9(Qs.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=A9(Qs.Long);break;default:return null}return zw[e]=t,t}(u);l+=f?f(i,n,c):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function D9(e,t,n){const r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function Zs(e,t){const n=function Qbe(e){return s2(e)[Xt.LocaleId]}(e);if(u8[n]=u8[n]||{},u8[n][t])return u8[n][t];let r="";switch(t){case"shortDate":r=S9(e,vr.Short);break;case"mediumDate":r=S9(e,vr.Medium);break;case"longDate":r=S9(e,vr.Long);break;case"fullDate":r=S9(e,vr.Full);break;case"shortTime":r=E9(e,vr.Short);break;case"mediumTime":r=E9(e,vr.Medium);break;case"longTime":r=E9(e,vr.Long);break;case"fullTime":r=E9(e,vr.Full);break;case"short":const i=Zs(e,"shortTime"),a=Zs(e,"shortDate");r=L9(V9(e,vr.Short),[i,a]);break;case"medium":const s=Zs(e,"mediumTime"),o=Zs(e,"mediumDate");r=L9(V9(e,vr.Medium),[s,o]);break;case"long":const c=Zs(e,"longTime"),l=Zs(e,"longDate");r=L9(V9(e,vr.Long),[c,l]);break;case"full":const u=Zs(e,"fullTime"),f=Zs(e,"fullDate");r=L9(V9(e,vr.Full),[u,f])}return r&&(u8[n][t]=r),r}function L9(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,r){return null!=t&&r in t?t[r]:n})),e}function Ai(e,t,n="-",r,i){let a="";(e<0||i&&e<=0)&&(i?e=1-e:(e=-e,a=n));let s=String(e);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),a+s}function In(e,t,n=0,r=!1,i=!1){return function(a,s){let o=function dMe(e,t){switch(e){case _t.FullYear:return t.getFullYear();case _t.Month:return t.getMonth();case _t.Date:return t.getDate();case _t.Hours:return t.getHours();case _t.Minutes:return t.getMinutes();case _t.Seconds:return t.getSeconds();case _t.FractionalSeconds:return t.getMilliseconds();case _t.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,a);if((n>0||o>-n)&&(o+=n),e===_t.Hours)0===o&&-12===n&&(o=12);else if(e===_t.FractionalSeconds)return function fMe(e,t){return Ai(e,3).substring(0,t)}(o,t);const c=Xr(s,Dn.MinusSign);return Ai(o,t,c,r,i)}}function Qt(e,t,n=l2.Format,r=!1){return function(i,a){return function hMe(e,t,n,r,i,a){switch(n){case wt.Months:return function Jbe(e,t,n){const r=s2(e),a=Qr([r[Xt.MonthsFormat],r[Xt.MonthsStandalone]],t);return Qr(a,n)}(t,i,r)[e.getMonth()];case wt.Days:return function Kbe(e,t,n){const r=s2(e),a=Qr([r[Xt.DaysFormat],r[Xt.DaysStandalone]],t);return Qr(a,n)}(t,i,r)[e.getDay()];case wt.DayPeriods:const s=e.getHours(),o=e.getMinutes();if(a){const l=function rMe(e){const t=s2(e);return SU(t),(t[Xt.ExtraData][2]||[]).map(r=>"string"==typeof r?ww(r):[ww(r[0]),ww(r[1])])}(t),u=function iMe(e,t,n){const r=s2(e);SU(r);const a=Qr([r[Xt.ExtraData][0],r[Xt.ExtraData][1]],t)||[];return Qr(a,n)||[]}(t,i,r),f=l.findIndex(d=>{if(Array.isArray(d)){const[h,p]=d,m=s>=h.hours&&o>=h.minutes,g=s<p.hours||s===p.hours&&o<p.minutes;if(h.hours<p.hours){if(m&&g)return!0}else if(m||g)return!0}else if(d.hours===s&&d.minutes===o)return!0;return!1});if(-1!==f)return u[f]}return function Zbe(e,t,n){const r=s2(e),a=Qr([r[Xt.DayPeriodsFormat],r[Xt.DayPeriodsStandalone]],t);return Qr(a,n)}(t,i,r)[s<12?0:1];case wt.Eras:return function eMe(e,t){return Qr(s2(e)[Xt.Eras],t)}(t,r)[e.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(i,a,e,t,n,r)}}function A9(e){return function(t,n,r){const i=-1*r,a=Xr(n,Dn.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case Qs.Short:return(i>=0?"+":"")+Ai(s,2,a)+Ai(Math.abs(i%60),2,a);case Qs.ShortGMT:return"GMT"+(i>=0?"+":"")+Ai(s,1,a);case Qs.Long:return"GMT"+(i>=0?"+":"")+Ai(s,2,a)+":"+Ai(Math.abs(i%60),2,a);case Qs.Extended:return 0===r?"Z":(i>=0?"+":"")+Ai(s,2,a)+":"+Ai(Math.abs(i%60),2,a);default:throw new Error(`Unknown zone width "${e}"`)}}}const pMe=0,N9=4;function EU(e){return D9(e.getFullYear(),e.getMonth(),e.getDate()+(N9-e.getDay()))}function xw(e,t=!1){return function(n,r){let i;if(t){const a=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+a)/7)}else{const a=EU(n),s=function mMe(e){const t=D9(e,pMe,1).getDay();return D9(e,0,1+(t<=N9?N9:N9+7)-t)}(a.getFullYear()),o=a.getTime()-s.getTime();i=1+Math.round(o/6048e5)}return Ai(i,e,Xr(r,Dn.MinusSign))}}function k9(e,t=!1){return function(n,r){return Ai(EU(n).getFullYear(),e,Xr(r,Dn.MinusSign),t)}}const zw={};function VU(e,t){e=e.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function DU(e){return e instanceof Date&&!isNaN(e.valueOf())}function kU(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,a]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(a)}return null}const Lw=/\s+/,TU=[];let IU=(()=>{class e{constructor(n,r,i,a){this._iterableDiffers=n,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this.initialClasses=TU,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(Lw):TU}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(Lw):n}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const r of n)this._updateState(r,!0);else if(null!=n)for(const r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){const i=this.stateMap.get(n);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){(n=n.trim()).length>0&&n.split(Lw).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||e)(q(x9),q(l8),q(k2),q(La))};static#t=this.\u0275dir=Be({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return e})();class NMe{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ks=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,a,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new NMe(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===a?void 0:a);else if(null!==a){const o=r.get(a);r.move(o,s),RU(o,i)}});for(let i=0,a=r.length;i<a;i++){const o=r.get(i).context;o.index=i,o.count=a,o.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{RU(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(q(Li),q(Ws),q(x9))};static#t=this.\u0275dir=Be({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return e})();function RU(e,t){e.context.$implicit=t.item}let d8=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new kMe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){OU("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){OU("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(q(Li),q(Ws))};static#t=this.\u0275dir=Be({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return e})();class kMe{constructor(){this.$implicit=null,this.ngIf=null}}function OU(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${$n(t)}'.`)}function Ni(e,t){return new ie(2100,!1)}class FMe{createSubscription(t,n){return dF(()=>t.subscribe({next:n,error:r=>{throw r}}))}dispose(t){dF(()=>t.unsubscribe())}}class RMe{createSubscription(t,n){return t.then(n,r=>{throw r})}dispose(t){}}const OMe=new RMe,PMe=new FMe;let kw=(()=>{class e{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(Zf(n))return OMe;if(zP(n))return PMe;throw Ni()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||e)(q(M9,16))};static#t=this.\u0275pipe=D2({name:"async",type:e,pure:!1,standalone:!0})}return e})();const GMe=new Me("DATE_PIPE_DEFAULT_TIMEZONE"),WMe=new Me("DATE_PIPE_DEFAULT_OPTIONS");let o4=(()=>{class e{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,a){if(null==n||""===n||n!=n)return null;try{return uMe(n,r??this.defaultOptions?.dateFormat??"mediumDate",a||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw Ni()}}static#e=this.\u0275fac=function(r){return new(r||e)(q(Ys,16),q(GMe,24),q(WMe,24))};static#t=this.\u0275pipe=D2({name:"date",type:e,pure:!0,standalone:!0})}return e})(),BU=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=jr({type:e});static#n=this.\u0275inj=ur({})}return e})();function jU(e){return"server"===e}let s_e=(()=>{class e{static#e=this.\u0275prov=xe({token:e,providedIn:"root",factory:()=>new o_e(ze(c2),window)})}return e})();class o_e{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function c_e(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const s=a.getElementById(t)||a.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.supportsScrolling()&&(this.window.history.scrollRestoration=t)}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class qU{}class L_e extends Bbe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ow extends L_e{static makeCurrent(){!function $be(e){yw||(yw=e)}(new Ow)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function A_e(){return p8=p8||document.querySelector("base"),p8?p8.getAttribute("href"):null}();return null==n?null:function N_e(e){R9=R9||document.createElement("a"),R9.setAttribute("href",e);const t=R9.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){p8=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return kU(document.cookie,t)}}let R9,p8=null,T_e=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac})}return e})();const Pw=new Me("EventManagerPlugins");let QU=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(a=>a.supports(n)),!r)throw new ie(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||e)(ze(Pw),ze(Yt))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac})}return e})();class ZU{constructor(t){this._doc=t}}const $w="ng-app-id";let KU=(()=>{class e{constructor(n,r,i,a={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=jU(a),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${$w}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const a=i.get(n);return a.usage+=r,a.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===n)return i.delete(r),a.removeAttribute($w),a;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute($w,this.appId),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const a=this.styleRef,s=a.get(r)?.elements;s?s.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||e)(ze(c2),ze($h),ze(rO,8),ze(J3))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac})}return e})();const Bw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Uw=/%COMP%/g,O_e=new Me("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function ej(e,t){return t.map(n=>n.replace(Uw,e))}let tj=(()=>{class e{constructor(n,r,i,a,s,o,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=s,this.platformId=o,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=jU(o),this.defaultRenderer=new jw(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===xi.ShadowDom&&(r={...r,encapsulation:xi.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof rj?i.applyToHost(n):i instanceof qw&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const s=this.doc,o=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case xi.Emulated:a=new rj(c,l,r,this.appId,u,s,o,f);break;case xi.ShadowDom:return new U_e(c,l,n,r,s,o,this.nonce,f);default:a=new qw(c,l,r,u,s,o,f)}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||e)(ze(QU),ze(KU),ze($h),ze(O_e),ze(c2),ze(J3),ze(Yt),ze(rO))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac})}return e})();class jw{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Bw[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(nj(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(nj(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new ie(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const a=Bw[i];a?t.setAttributeNS(a,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=Bw[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(tc.DashCase|tc.Important)?t.style.setProperty(n,r,i&tc.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&tc.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=ic().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function nj(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class U_e extends jw{constructor(t,n,r,i,a,s,o,c){super(t,a,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=ej(i.id,i.styles);for(const u of l){const f=document.createElement("style");o&&f.setAttribute("nonce",o),f.textContent=u,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class qw extends jw{constructor(t,n,r,i,a,s,o,c){super(t,a,s,o),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?ej(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class rj extends qw{constructor(t,n,r,i,a,s,o,c){const l=i+"-"+r.id;super(t,n,r,a,s,o,c,l),this.contentAttr=function P_e(e){return"_ngcontent-%COMP%".replace(Uw,e)}(l),this.hostAttr=function $_e(e){return"_nghost-%COMP%".replace(Uw,e)}(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let j_e=(()=>{class e extends ZU{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||e)(ze(c2))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac})}return e})();const ij=["alt","control","meta","shift"],q_e={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},G_e={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let W_e=(()=>{class e extends ZU{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const a=e.parseEventName(r),s=e.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ic().onAndCancel(n,a.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=e._normalizeKey(r.pop());let s="",o=r.indexOf("code");if(o>-1&&(r.splice(o,1),s="code."),ij.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=a,0!=r.length||0===a.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=q_e[n.key]||n.key,a="";return r.indexOf("code.")>-1&&(i=n.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ij.forEach(s=>{s!==i&&(0,G_e[s])(n)&&(a+=s+".")}),a+=i,a===r)}static eventCallback(n,r,i){return a=>{e.matchEventFullKeyCode(a,n)&&i.runGuarded(()=>r(a))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||e)(ze(c2))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac})}return e})();const sj=[{provide:J3,useValue:"browser"},{provide:nO,useValue:function Y_e(){Ow.makeCurrent()},multi:!0},{provide:c2,useFactory:function Q_e(){return function k9e(e){NM=e}(document),document},deps:[]}],Z_e=QB(Sbe,"browser",sj),K_e=new Me(""),oj=[{provide:C9,useClass:class k_e{addToWindow(t){Gt.getAngularTestability=(r,i=!0)=>{const a=t.findTestabilityInTree(r,i);if(null==a)throw new ie(5103,!1);return a},Gt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Gt.getAllAngularRootElements=()=>t.getAllRootElements(),Gt.frameworkStabilizers||(Gt.frameworkStabilizers=[]),Gt.frameworkStabilizers.push(r=>{const i=Gt.getAllAngularTestabilities();let a=i.length,s=!1;const o=function(c){s=s||c,a--,0==a&&r(s)};i.forEach(c=>{c.whenStable(o)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?ic().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:qB,useClass:ow,deps:[Yt,cw,C9]},{provide:ow,useClass:ow,deps:[Yt,cw,C9]}],cj=[{provide:BM,useValue:"root"},{provide:Bs,useFactory:function X_e(){return new Bs},deps:[]},{provide:Pw,useClass:j_e,multi:!0,deps:[c2,Yt,J3]},{provide:Pw,useClass:W_e,multi:!0,deps:[c2]},tj,KU,QU,{provide:lO,useExisting:tj},{provide:qU,useClass:T_e,deps:[]},[]];let J_e=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:$h,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||e)(ze(K_e,12))};static#t=this.\u0275mod=jr({type:e});static#n=this.\u0275inj=ur({providers:[...cj,...oj],imports:[BU,Ebe]})}return e})(),lj=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||e)(ze(c2))};static#t=this.\u0275prov=xe({token:e,factory:function(r){let i=null;return i=r?new r:function twe(){return new lj(ze(c2))}(),i},providedIn:"root"})}return e})();typeof window<"u"&&window;let dj=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:function(r){let i=null;return i=r?new(r||e):ze(hj),i},providedIn:"root"})}return e})(),hj=(()=>{class e extends dj{constructor(n){super(),this._doc=n}sanitize(n,r){if(null==r)return null;switch(n){case Wr.NONE:return r;case Wr.HTML:return Da(r,"HTML")?pr(r):jR(this._doc,String(r)).toString();case Wr.STYLE:return Da(r,"Style")?pr(r):r;case Wr.SCRIPT:if(Da(r,"Script"))return pr(r);throw new ie(5200,!1);case Wr.URL:return Da(r,"URL")?pr(r):Ih(String(r));case Wr.RESOURCE_URL:if(Da(r,"ResourceURL"))return pr(r);throw new ie(5201,!1);default:throw new ie(5202,!1)}}bypassSecurityTrustHtml(n){return function $9e(e){return new T9e(e)}(n)}bypassSecurityTrustStyle(n){return function B9e(e){return new I9e(e)}(n)}bypassSecurityTrustScript(n){return function U9e(e){return new F9e(e)}(n)}bypassSecurityTrustUrl(n){return function j9e(e){return new R9e(e)}(n)}bypassSecurityTrustResourceUrl(n){return function q9e(e){return new O9e(e)}(n)}static#e=this.\u0275fac=function(r){return new(r||e)(ze(c2))};static#t=this.\u0275prov=xe({token:e,factory:function(r){let i=null;return i=r?new r:function awe(e){return new hj(e.get(c2))}(ze(T2)),i},providedIn:"root"})}return e})();function Y0(e,t){return At(t)?v1(e,t,1):v1(e,1)}function Js(e,t){return On((n,r)=>{let i=0;n.subscribe(Tn(r,a=>e.call(t,a,i++)&&r.next(a)))})}function m8(e){return On((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}class O9{}class P9{}class Ra{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),a=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(s):this.headers.set(a,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ra?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new Ra;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Ra?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,n);const i=("a"===t.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const a=t.value;if(a){let s=this.headers.get(n);if(!s)return;s=s.filter(o=>-1===a.indexOf(o)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(t,n){const r=(Array.isArray(n)?n:[n]).map(a=>a.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class swe{encodeKey(t){return mj(t)}encodeValue(t){return mj(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const cwe=/%(\d[a-f0-9])/gi,lwe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function mj(e){return encodeURIComponent(e).replace(cwe,(t,n)=>lwe[n]??t)}function $9(e){return`${e}`}class sc{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new swe,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function owe(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[s,o]=-1==a?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,a)),t.decodeValue(i.slice(a+1))],c=n.get(s)||[];c.push(o),n.set(s,c)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const r=t.fromObject[n],i=Array.isArray(r)?r.map($9):[$9(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(a=>{n.push({param:r,value:a,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new sc({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push($9(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf($9(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class uwe{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function gj(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function vj(e){return typeof Blob<"u"&&e instanceof Blob}function yj(e){return typeof FormData<"u"&&e instanceof FormData}class g8{constructor(t,n,r,i){let a;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function fwe(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Ra),this.context||(this.context=new uwe),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const o=n.indexOf("?");this.urlWithParams=n+(-1===o?"?":o<n.length-1?"&":"")+s}}else this.params=new sc,this.urlWithParams=n}serializeBody(){return null===this.body?null:gj(this.body)||vj(this.body)||yj(this.body)||function dwe(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof sc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||yj(this.body)?null:vj(this.body)?this.body.type||null:gj(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof sc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,a=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,o=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let c=t.headers||this.headers,l=t.params||this.params;const u=t.context??this.context;return void 0!==t.setHeaders&&(c=Object.keys(t.setHeaders).reduce((f,d)=>f.set(d,t.setHeaders[d]),c)),t.setParams&&(l=Object.keys(t.setParams).reduce((f,d)=>f.set(d,t.setParams[d]),l)),new g8(n,r,a,{params:l,headers:c,context:u,reportProgress:o,responseType:i,withCredentials:s})}}var X0=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(X0||{});class Ww{constructor(t,n=200,r="OK"){this.headers=t.headers||new Ra,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Yw extends Ww{constructor(t={}){super(t),this.type=X0.ResponseHeader}clone(t={}){return new Yw({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class c4 extends Ww{constructor(t={}){super(t),this.type=X0.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new c4({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Cj extends Ww{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Xw(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let v8=(()=>{class e{constructor(n){this.handler=n}request(n,r,i={}){let a;if(n instanceof g8)a=n;else{let c,l;c=i.headers instanceof Ra?i.headers:new Ra(i.headers),i.params&&(l=i.params instanceof sc?i.params:new sc({fromObject:i.params})),a=new g8(n,r,void 0!==i.body?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=Ce(a).pipe(Y0(c=>this.handler.handle(c)));if(n instanceof g8||"events"===i.observe)return s;const o=s.pipe(Js(c=>c instanceof c4));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return o.pipe(Mt(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return o.pipe(Mt(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return o.pipe(Mt(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return o.pipe(Mt(c=>c.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new sc).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Xw(i,r))}post(n,r,i={}){return this.request("POST",n,Xw(i,r))}put(n,r,i={}){return this.request("PUT",n,Xw(i,r))}static#e=this.\u0275fac=function(r){return new(r||e)(ze(O9))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac})}return e})();function _j(e,t){return t(e)}function pwe(e,t){return(n,r)=>t.intercept(n,{handle:i=>e(i,r)})}const wj=new Me(""),y8=new Me(""),xj=new Me("");function gwe(){let e=null;return(t,n)=>{null===e&&(e=(be(wj,{optional:!0})??[]).reduceRight(pwe,_j));const r=be(v9),i=r.add();return e(t,n).pipe(m8(()=>r.remove(i)))}}let zj=(()=>{class e extends O9{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=be(v9)}handle(n){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(y8),...this.injector.get(xj,[])]));this.chain=i.reduceRight((a,s)=>function mwe(e,t,n){return(r,i)=>n.runInContext(()=>t(r,a=>e(a,i)))}(a,s,this.injector),_j)}const r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(m8(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||e)(ze(P9),ze(mr))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac})}return e})();const bwe=/^\)\]\}',?\n/;let Sj=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new ie(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?Pn(r.\u0275loadImpl()):Ce(null)).pipe(wi(()=>new Sn(a=>{const s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((m,g)=>s.setRequestHeader(m,g.join(","))),n.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const m=n.detectContentTypeHeader();null!==m&&s.setRequestHeader("Content-Type",m)}if(n.responseType){const m=n.responseType.toLowerCase();s.responseType="json"!==m?m:"text"}const o=n.serializeBody();let c=null;const l=()=>{if(null!==c)return c;const m=s.statusText||"OK",g=new Ra(s.getAllResponseHeaders()),v=function Mwe(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(s)||n.url;return c=new Yw({headers:g,status:s.status,statusText:m,url:v}),c},u=()=>{let{headers:m,status:g,statusText:v,url:y}=l(),C=null;204!==g&&(C=typeof s.response>"u"?s.responseText:s.response),0===g&&(g=C?200:0);let b=g>=200&&g<300;if("json"===n.responseType&&"string"==typeof C){const M=C;C=C.replace(bwe,"");try{C=""!==C?JSON.parse(C):null}catch(w){C=M,b&&(b=!1,C={error:w,text:C})}}b?(a.next(new c4({body:C,headers:m,status:g,statusText:v,url:y||void 0})),a.complete()):a.error(new Cj({error:C,headers:m,status:g,statusText:v,url:y||void 0}))},f=m=>{const{url:g}=l(),v=new Cj({error:m,status:s.status||0,statusText:s.statusText||"Unknown Error",url:g||void 0});a.error(v)};let d=!1;const h=m=>{d||(a.next(l()),d=!0);let g={type:X0.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),"text"===n.responseType&&s.responseText&&(g.partialText=s.responseText),a.next(g)},p=m=>{let g={type:X0.UploadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),a.next(g)};return s.addEventListener("load",u),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),n.reportProgress&&(s.addEventListener("progress",h),null!==o&&s.upload&&s.upload.addEventListener("progress",p)),s.send(o),a.next({type:X0.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",u),s.removeEventListener("timeout",f),n.reportProgress&&(s.removeEventListener("progress",h),null!==o&&s.upload&&s.upload.removeEventListener("progress",p)),s.readyState!==s.DONE&&s.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||e)(ze(qU))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac})}return e})();const Qw=new Me("XSRF_ENABLED"),Ej=new Me("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Vj=new Me("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Dj{}let xwe=(()=>{class e{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=kU(n,this.cookieName),this.lastCookieString=n),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||e)(ze(c2),ze(J3),ze(Ej))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac})}return e})();function zwe(e,t){const n=e.url.toLowerCase();if(!be(Qw)||"GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t(e);const r=be(Dj).getToken(),i=be(Vj);return null!=r&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),t(e)}var oc=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(oc||{});function Hwe(...e){const t=[v8,Sj,zj,{provide:O9,useExisting:zj},{provide:P9,useExisting:Sj},{provide:y8,useValue:zwe,multi:!0},{provide:Qw,useValue:!0},{provide:Dj,useClass:xwe}];for(const n of e)t.push(...n.\u0275providers);return function OM(e){return{\u0275providers:e}}(t)}const Lj=new Me("LEGACY_INTERCEPTOR_FN");function Swe(){return function l4(e,t){return{\u0275kind:e,\u0275providers:t}}(oc.LegacyInterceptors,[{provide:Lj,useFactory:gwe},{provide:y8,useExisting:Lj,multi:!0}])}let Ewe=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=jr({type:e});static#n=this.\u0275inj=ur({providers:[Hwe(Swe())]})}return e})();const{isArray:kwe}=Array,{getPrototypeOf:Twe,prototype:Iwe,keys:Fwe}=Object;function Aj(e){if(1===e.length){const t=e[0];if(kwe(t))return{args:t,keys:null};if(function Rwe(e){return e&&"object"==typeof e&&Twe(e)===Iwe}(t)){const n=Fwe(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}const{isArray:Owe}=Array;function Nj(e){return Mt(t=>function Pwe(e,t){return Owe(t)?e(...t):e(t)}(e,t))}function kj(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}let Tj=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||e)(q(La),q(k2))};static#t=this.\u0275dir=Be({type:e})}return e})(),u4=(()=>{class e extends Tj{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=_1(e)))(i||e)}}();static#t=this.\u0275dir=Be({type:e,features:[Tt]})}return e})();const Oa=new Me("NgValueAccessor"),Bwe={provide:Oa,useExisting:qt(()=>Q0),multi:!0};let Q0=(()=>{class e extends u4{writeValue(n){this.setProperty("checked",n)}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=_1(e)))(i||e)}}();static#t=this.\u0275dir=Be({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){1&r&&Ae("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},features:[cn([Bwe]),Tt]})}return e})();const Uwe={provide:Oa,useExisting:qt(()=>ki),multi:!0},qwe=new Me("CompositionEventMode");let ki=(()=>{class e extends Tj{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function jwe(){const e=ic()?ic().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||e)(q(La),q(k2),q(qwe,8))};static#t=this.\u0275dir=Be({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Ae("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[cn([Uwe]),Tt]})}return e})();const T1=new Me("NgValidators"),lc=new Me("NgAsyncValidators");function qj(e){return null!=e}function Gj(e){return Zf(e)?Pn(e):e}function Wj(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function Yj(e,t){return t.map(n=>n(e))}function Xj(e){return e.map(t=>function Wwe(e){return!e.validate}(t)?t:n=>t.validate(n))}function Zw(e){return null!=e?function Qj(e){if(!e)return null;const t=e.filter(qj);return 0==t.length?null:function(n){return Wj(Yj(n,t))}}(Xj(e)):null}function Kw(e){return null!=e?function Zj(e){if(!e)return null;const t=e.filter(qj);return 0==t.length?null:function(n){return function $we(...e){const t=wI(e),{args:n,keys:r}=Aj(e),i=new Sn(a=>{const{length:s}=n;if(!s)return void a.complete();const o=new Array(s);let c=s,l=s;for(let u=0;u<s;u++){let f=!1;cr(n[u]).subscribe(Tn(a,d=>{f||(f=!0,l--),o[u]=d},()=>c--,void 0,()=>{(!c||!f)&&(l||a.next(r?kj(r,o):o),a.complete())}))}});return t?i.pipe(Nj(t)):i}(Yj(n,t).map(Gj)).pipe(Mt(Wj))}}(Xj(e)):null}function Kj(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Jw(e){return e?Array.isArray(e)?e:[e]:[]}function j9(e,t){return Array.isArray(e)?e.includes(t):e===t}function tq(e,t){const n=Jw(t);return Jw(e).forEach(i=>{j9(n,i)||n.push(i)}),n}function nq(e,t){return Jw(t).filter(n=>!j9(e,n))}class rq{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Zw(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Kw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class u2 extends rq{get formDirective(){return null}get path(){return null}}class uc extends rq{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class iq{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ti=(()=>{class e extends iq{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||e)(q(uc,2))};static#t=this.\u0275dir=Be({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&o9("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Tt]})}return e})(),fc=(()=>{class e extends iq{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||e)(q(u2,10))};static#t=this.\u0275dir=Be({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&o9("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Tt]})}return e})();const C8="VALID",G9="INVALID",Z0="PENDING",b8="DISABLED";function nx(e){return(W9(e)?e.validators:e)||null}function rx(e,t){return(W9(t)?t.asyncValidators:e)||null}function W9(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class cq{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===C8}get invalid(){return this.status===G9}get pending(){return this.status==Z0}get disabled(){return this.status===b8}get enabled(){return this.status!==b8}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(tq(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(tq(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(nq(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(nq(t,this._rawAsyncValidators))}hasValidator(t){return j9(this._rawValidators,t)}hasAsyncValidator(t){return j9(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Z0,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=b8,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=C8,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===C8||this.status===Z0)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?b8:C8}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Z0,this._hasOwnPendingAsyncValidator=!0;const n=Gj(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Cn,this.statusChanges=new Cn}_calculateStatus(){return this._allControlsDisabled()?b8:this.errors?G9:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Z0)?Z0:this._anyControlsHaveStatus(G9)?G9:C8}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){W9(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function Zwe(e){return Array.isArray(e)?Zw(e):e||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function Kwe(e){return Array.isArray(e)?Kw(e):e||null}(this._rawAsyncValidators)}}class ix extends cq{constructor(t,n,r){super(nx(n),rx(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){(function oq(e,t,n){e._forEachChild((r,i)=>{if(void 0===n[i])throw new ie(1002,"")})})(this,0,t),Object.keys(t).forEach(r=>{(function sq(e,t,n){const r=e.controls;if(!(t?Object.keys(r):r).length)throw new ie(1e3,"");if(!r[n])throw new ie(1001,"")})(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(Object.keys(t).forEach(r=>{const i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,a)=>{r=n(r,i,a)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const K0=new Me("CallSetDisabledState",{providedIn:"root",factory:()=>Y9}),Y9="always";function M8(e,t,n=Y9){ax(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||"always"===n)&&t.valueAccessor.setDisabledState?.(e.disabled),function txe(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&lq(e,t)})}(e,t),function rxe(e,t){const n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function nxe(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&lq(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function exe(e,t){if(t.valueAccessor.setDisabledState){const n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function Z9(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function ax(e,t){const n=function Jj(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(Kj(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=function eq(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(Kj(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();Z9(t._rawValidators,i),Z9(t._rawAsyncValidators,i)}function lq(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}const cxe={provide:u2,useExisting:qt(()=>Pa)},_8=(()=>Promise.resolve())();let Pa=(()=>{class e extends u2{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Cn,this.form=new ix({},Zw(n),Kw(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){_8.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),M8(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){_8.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){_8.then(()=>{const r=this._findContainer(n.path),i=new ix({});(function uq(e,t){ax(e,t)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){_8.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){_8.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function fq(e,t){e._syncPendingControls(),t.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(r){return new(r||e)(q(T1,10),q(lc,10),q(K0,8))};static#t=this.\u0275dir=Be({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Ae("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[cn([cxe]),Tt]})}return e})();function dq(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function hq(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const pq=class extends cq{constructor(t=null,n,r){super(nx(n),rx(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),W9(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=hq(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){dq(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){dq(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){hq(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},fxe={provide:uc,useExisting:qt(()=>Zr)},vq=(()=>Promise.resolve())();let Zr=(()=>{class e extends uc{constructor(n,r,i,a,s,o){super(),this._changeDetectorRef=s,this.callSetDisabledState=o,this.control=new pq,this._registered=!1,this.name="",this.update=new Cn,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function cx(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(a=>{a.constructor===ki?n=a:function sxe(e){return Object.getPrototypeOf(e.constructor)===u4}(a)?r=a:i=a}),i||r||n||null}(0,a)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function ox(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){M8(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){vq.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&G0(r);vq.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function X9(e,t){return[...t.path,e]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||e)(q(u2,9),q(T1,10),q(lc,10),q(Oa,10),q(M9,8),q(K0,8))};static#t=this.\u0275dir=Be({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[cn([fxe]),Tt,t2]})}return e})(),dc=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=Be({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return e})(),Cq=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=jr({type:e});static#n=this.\u0275inj=ur({})}return e})();const Mxe={provide:Oa,useExisting:qt(()=>w8),multi:!0};function Hq(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let w8=(()=>{class e extends u4{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const i=Hq(this._getOptionId(n),n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){const r=function _xe(e){return e.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=_1(e)))(i||e)}}();static#t=this.\u0275dir=Be({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&Ae("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[cn([Mxe]),Tt]})}return e})(),J9=(()=>{class e{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(Hq(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||e)(q(k2),q(La),q(w8,9))};static#t=this.\u0275dir=Be({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return e})();const wxe={provide:Oa,useExisting:qt(()=>dx),multi:!0};function Sq(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let dx=(()=>{class e extends u4{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let r;if(this.value=n,Array.isArray(n)){const i=n.map(a=>this._getOptionId(a));r=(a,s)=>{a._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const s=a;for(let o=0;o<s.length;o++){const l=this._getOptionValue(s[o].value);i.push(l)}}else{const s=r.options;for(let o=0;o<s.length;o++){const c=s[o];if(c.selected){const l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){const r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){const r=function xxe(e){return e.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=_1(e)))(i||e)}}();static#t=this.\u0275dir=Be({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&Ae("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[cn([wxe]),Tt]})}return e})(),ep=(()=>{class e{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(Sq(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(Sq(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||e)(q(k2),q(La),q(dx,9))};static#t=this.\u0275dir=Be({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return e})(),Nxe=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=jr({type:e});static#n=this.\u0275inj=ur({imports:[Cq]})}return e})(),Txe=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:K0,useValue:n.callSetDisabledState??Y9}]}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=jr({type:e});static#n=this.\u0275inj=ur({imports:[Nxe]})}return e})();function Fq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fq(Object(n),!0).forEach(function(r){qn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fq(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tp(e){return(tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Rq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function px(e,t){return function Pxe(e){if(Array.isArray(e))return e}(e)||function Bxe(e,t){var n=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var s,o,r=[],i=!0,a=!1;try{for(n=n.call(e);!(i=(s=n.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(c){a=!0,o=c}finally{try{!i&&null!=n.return&&n.return()}finally{if(a)throw o}}return r}}(e,t)||Oq(e,t)||function jxe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z8(e){return function Oxe(e){if(Array.isArray(e))return mx(e)}(e)||function $xe(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Oq(e)||function Uxe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oq(e,t){if(e){if("string"==typeof e)return mx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mx(e,t)}}function mx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pq=function(){},gx={},$q={},Bq=null,Uq={mark:Pq,measure:Pq};try{typeof window<"u"&&(gx=window),typeof document<"u"&&($q=document),typeof MutationObserver<"u"&&(Bq=MutationObserver),typeof performance<"u"&&(Uq=performance)}catch{}var ip,ap,sp,op,cp,jq=(gx.navigator||{}).userAgent,qq=void 0===jq?"":jq,hc=gx,Jt=$q,Gq=Bq,rp=Uq,eo=!!Jt.documentElement&&!!Jt.head&&"function"==typeof Jt.addEventListener&&"function"==typeof Jt.createElement,Wq=~qq.indexOf("MSIE")||~qq.indexOf("Trident/"),to="___FONT_AWESOME___",Yq="fa",Xq="svg-inline--fa",d4="data-fa-i2svg",yx="data-fa-pseudo-element",Gxe="data-fa-pseudo-element-pending",Cx="data-prefix",bx="data-icon",Qq="fontawesome-i2svg",Wxe="async",Yxe=["HTML","HEAD","STYLE","SCRIPT"],Zq=function(){try{return!0}catch{return!1}}(),en="classic",Mn="sharp",Mx=[en,Mn];function H8(e){return new Proxy(e,{get:function(n,r){return r in n?n[r]:n[en]}})}var S8=H8((qn(ip={},en,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),qn(ip,Mn,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),ip)),E8=H8((qn(ap={},en,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),qn(ap,Mn,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),ap)),V8=H8((qn(sp={},en,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),qn(sp,Mn,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),sp)),Xxe=H8((qn(op={},en,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),qn(op,Mn,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),op)),Qxe=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,Kq="fa-layers-text",Zxe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,Kxe=H8((qn(cp={},en,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),qn(cp,Mn,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),cp)),Jq=[1,2,3,4,5,6,7,8,9,10],Jxe=Jq.concat([11,12,13,14,15,16,17,18,19,20]),eze=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],h4={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},D8=new Set;Object.keys(E8[en]).map(D8.add.bind(D8)),Object.keys(E8[Mn]).map(D8.add.bind(D8));var tze=[].concat(Mx,z8(D8),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",h4.GROUP,h4.SWAP_OPACITY,h4.PRIMARY,h4.SECONDARY]).concat(Jq.map(function(e){return"".concat(e,"x")})).concat(Jxe.map(function(e){return"w-".concat(e)})),L8=hc.FontAwesomeConfig||{};Jt&&"function"==typeof Jt.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(e){var t=px(e,2),r=t[1],i=function rze(e){return""===e||"false"!==e&&("true"===e||e)}(function nze(e){var t=Jt.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(t[0]));null!=i&&(L8[r]=i)});var eG={styleDefault:"solid",familyDefault:"classic",cssPrefix:Yq,replacementClass:Xq,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};L8.familyPrefix&&(L8.cssPrefix=L8.familyPrefix);var J0=we(we({},eG),L8);J0.autoReplaceSvg||(J0.observeMutations=!1);var De={};Object.keys(eG).forEach(function(e){Object.defineProperty(De,e,{enumerable:!0,set:function(n){J0[e]=n,A8.forEach(function(r){return r(De)})},get:function(){return J0[e]}})}),Object.defineProperty(De,"familyPrefix",{enumerable:!0,set:function(t){J0.cssPrefix=t,A8.forEach(function(n){return n(De)})},get:function(){return J0.cssPrefix}}),hc.FontAwesomeConfig=De;var A8=[],$a={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1},oze="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function N8(){for(var e=12,t="";e-- >0;)t+=oze[62*Math.random()|0];return t}function e6(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function _x(e){return e.classList?e6(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function tG(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function lp(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")},"")}function wx(e){return e.size!==$a.size||e.x!==$a.x||e.y!==$a.y||e.rotate!==$a.rotate||e.flipX||e.flipY}var fze=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function nG(){var e=Yq,t=Xq,n=De.cssPrefix,r=De.replacementClass,i=fze;if(n!==e||r!==t){var a=new RegExp("\\.".concat(e,"\\-"),"g"),s=new RegExp("\\--".concat(e,"\\-"),"g"),o=new RegExp("\\.".concat(t),"g");i=i.replace(a,".".concat(n,"-")).replace(s,"--".concat(n,"-")).replace(o,".".concat(r))}return i}var rG=!1;function xx(){De.autoAddCss&&!rG&&(function sze(e){if(e&&eo){var t=Jt.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=Jt.head.childNodes,r=null,i=n.length-1;i>-1;i--){var a=n[i],s=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(s)>-1&&(r=a)}Jt.head.insertBefore(t,r)}}(nG()),rG=!0)}var dze={mixout:function(){return{dom:{css:nG,insertCss:xx}}},hooks:function(){return{beforeDOMElementCreation:function(){xx()},beforeI2svg:function(){xx()}}}},no=hc||{};no[to]||(no[to]={}),no[to].styles||(no[to].styles={}),no[to].hooks||(no[to].hooks={}),no[to].shims||(no[to].shims=[]);var Ii=no[to],iG=[],up=!1;function k8(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,a=void 0===i?[]:i;return"string"==typeof e?tG(e):"<".concat(t," ").concat(function cze(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,'="').concat(tG(e[n]),'" ')},"").trim()}(r),">").concat(a.map(k8).join(""),"</").concat(t,">")}function aG(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}eo&&((up=(Jt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Jt.readyState))||Jt.addEventListener("DOMContentLoaded",function e(){Jt.removeEventListener("DOMContentLoaded",e),up=1,iG.map(function(t){return t()})}));var zx=function(t,n,r,i){var c,l,u,a=Object.keys(t),s=a.length,o=void 0!==i?function(t,n){return function(r,i,a,s){return t.call(n,r,i,a,s)}}(n,i):n;for(void 0===r?(c=1,u=t[a[0]]):(c=0,u=r);c<s;c++)u=o(u,t[l=a[c]],l,t);return u};function Hx(e){var t=function gze(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);return 1===t.length?t[0].toString(16):null}function sG(e){return Object.keys(e).reduce(function(t,n){var r=e[n];return r.icon?t[r.iconName]=r.icon:t[n]=r,t},{})}function Sx(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,i=void 0!==r&&r,a=sG(t);"function"!=typeof Ii.hooks.addPack||i?Ii.styles[e]=we(we({},Ii.styles[e]||{}),a):Ii.hooks.addPack(e,sG(t)),"fas"===e&&Sx("fa",t)}var fp,dp,hp,t6=Ii.styles,yze=Ii.shims,Cze=(qn(fp={},en,Object.values(V8[en])),qn(fp,Mn,Object.values(V8[Mn])),fp),Ex=null,oG={},cG={},lG={},uG={},fG={},bze=(qn(dp={},en,Object.keys(S8[en])),qn(dp,Mn,Object.keys(S8[Mn])),dp);var dG=function(){var t=function(a){return zx(t6,function(s,o,c){return s[c]=zx(o,a,{}),s},{})};oG=t(function(i,a,s){return a[3]&&(i[a[3]]=s),a[2]&&a[2].filter(function(c){return"number"==typeof c}).forEach(function(c){i[c.toString(16)]=s}),i}),cG=t(function(i,a,s){return i[s]=s,a[2]&&a[2].filter(function(c){return"string"==typeof c}).forEach(function(c){i[c]=s}),i}),fG=t(function(i,a,s){var o=a[2];return i[s]=s,o.forEach(function(c){i[c]=s}),i});var n="far"in t6||De.autoFetchSvg,r=zx(yze,function(i,a){var s=a[0],o=a[1],c=a[2];return"far"===o&&!n&&(o="fas"),"string"==typeof s&&(i.names[s]={prefix:o,iconName:c}),"number"==typeof s&&(i.unicodes[s.toString(16)]={prefix:o,iconName:c}),i},{names:{},unicodes:{}});lG=r.names,uG=r.unicodes,Ex=pp(De.styleDefault,{family:De.familyDefault})};function Vx(e,t){return(oG[e]||{})[t]}function p4(e,t){return(fG[e]||{})[t]}function hG(e){return lG[e]||{prefix:null,iconName:null}}function mc(){return Ex}(function aze(e){A8.push(e)})(function(e){Ex=pp(e.styleDefault,{family:De.familyDefault})}),dG();var Dx=function(){return{prefix:null,iconName:null,rest:[]}};function pp(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,r=void 0===n?en:n;return E8[r][e]||E8[r][S8[r][e]]||(e in Ii.styles?e:null)||null}var pG=(qn(hp={},en,Object.keys(V8[en])),qn(hp,Mn,Object.keys(V8[Mn])),hp);function mp(e){var t,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,i=void 0!==r&&r,a=(qn(t={},en,"".concat(De.cssPrefix,"-").concat(en)),qn(t,Mn,"".concat(De.cssPrefix,"-").concat(Mn)),t),s=null,o=en;(e.includes(a[en])||e.some(function(l){return pG[en].includes(l)}))&&(o=en),(e.includes(a[Mn])||e.some(function(l){return pG[Mn].includes(l)}))&&(o=Mn);var c=e.reduce(function(l,u){var f=function _ze(e,t){var n=t.split("-"),r=n[0],i=n.slice(1).join("-");return r!==e||""===i||function Mze(e){return~tze.indexOf(e)}(i)?null:i}(De.cssPrefix,u);if(t6[u]?(u=Cze[o].includes(u)?Xxe[o][u]:u,s=u,l.prefix=u):bze[o].indexOf(u)>-1?(s=u,l.prefix=pp(u,{family:o})):f?l.iconName=f:u!==De.replacementClass&&u!==a[en]&&u!==a[Mn]&&l.rest.push(u),!i&&l.prefix&&l.iconName){var d="fa"===s?hG(l.iconName):{},h=p4(l.prefix,l.iconName);d.prefix&&(s=null),l.iconName=d.iconName||h||l.iconName,l.prefix=d.prefix||l.prefix,"far"===l.prefix&&!t6.far&&t6.fas&&!De.autoFetchSvg&&(l.prefix="fas")}return l},Dx());return(e.includes("fa-brands")||e.includes("fab"))&&(c.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(c.prefix="fad"),!c.prefix&&o===Mn&&(t6.fass||De.autoFetchSvg)&&(c.prefix="fass",c.iconName=p4(c.prefix,c.iconName)||c.iconName),("fa"===c.prefix||"fa"===s)&&(c.prefix=mc()||"fas"),c}var zze=function(){function e(){(function Ixe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.definitions={}}return function Fxe(e,t,n){t&&Rq(e.prototype,t),n&&Rq(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.reduce(this._pullDefinitions,{});Object.keys(s).forEach(function(o){n.definitions[o]=we(we({},n.definitions[o]||{}),s[o]),Sx(o,s[o]);var c=V8[en][o];c&&Sx(c,s[o]),dG()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(a){var s=i[a],o=s.prefix,c=s.iconName,l=s.icon,u=l[2];n[o]||(n[o]={}),u.length>0&&u.forEach(function(f){"string"==typeof f&&(n[o][f]=l)}),n[o][c]=l}),n}}]),e}(),mG=[],n6={},r6={},Hze=Object.keys(r6);function Lx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(n6[e]||[]).forEach(function(s){t=s.apply(null,[t].concat(r))}),t}function m4(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(n6[e]||[]).forEach(function(a){a.apply(null,n)})}function ro(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return r6[e]?r6[e].apply(null,t):void 0}function Ax(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||mc();if(t)return t=p4(n,t)||t,aG(gG.definitions,n,t)||aG(Ii.styles,n,t)}var gG=new zze,Vze={i2svg:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return eo?(m4("beforeI2svg",t),ro("pseudoElements2svg",t),ro("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.autoReplaceSvgRoot;!1===De.autoReplaceSvg&&(De.autoReplaceSvg=!0),De.observeMutations=!0,function pze(e){eo&&(up?setTimeout(e,0):iG.push(e))}(function(){Lze({autoReplaceSvgRoot:n}),m4("watch",t)})}},yr={noAuto:function(){De.autoReplaceSvg=!1,De.observeMutations=!1,m4("noAuto")},config:De,dom:Vze,parse:{icon:function(t){if(null===t)return null;if("object"===tp(t)&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:p4(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&2===t.length){var n=0===t[1].indexOf("fa-")?t[1].slice(3):t[1],r=pp(t[0]);return{prefix:r,iconName:p4(r,n)||n}}if("string"==typeof t&&(t.indexOf("".concat(De.cssPrefix,"-"))>-1||t.match(Qxe))){var i=mp(t.split(" "),{skipLookups:!0});return{prefix:i.prefix||mc(),iconName:p4(i.prefix,i.iconName)||i.iconName}}if("string"==typeof t){var a=mc();return{prefix:a,iconName:p4(a,t)||t}}}},library:gG,findIconDefinition:Ax,toHtml:k8},Lze=function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,r=void 0===n?Jt:n;(Object.keys(Ii.styles).length>0||De.autoFetchSvg)&&eo&&De.autoReplaceSvg&&yr.dom.i2svg({node:r})};function gp(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(r){return k8(r)})}}),Object.defineProperty(e,"node",{get:function(){if(eo){var r=Jt.createElement("div");return r.innerHTML=e.html,r.children}}}),e}function Nx(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,a=e.iconName,s=e.transform,o=e.symbol,c=e.title,l=e.maskId,u=e.titleId,f=e.extra,d=e.watchable,h=void 0!==d&&d,p=r.found?r:n,m=p.width,g=p.height,v="fak"===i,y=[De.replacementClass,a?"".concat(De.cssPrefix,"-").concat(a):""].filter(function(S){return-1===f.classes.indexOf(S)}).filter(function(S){return""!==S||!!S}).concat(f.classes).join(" "),C={children:[],attributes:we(we({},f.attributes),{},{"data-prefix":i,"data-icon":a,class:y,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},b=v&&!~f.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};h&&(C.attributes[d4]=""),c&&(C.children.push({tag:"title",attributes:{id:C.attributes["aria-labelledby"]||"title-".concat(u||N8())},children:[c]}),delete C.attributes.title);var M=we(we({},C),{},{prefix:i,iconName:a,main:n,mask:r,maskId:l,transform:s,symbol:o,styles:we(we({},b),f.styles)}),w=r.found&&n.found?ro("generateAbstractMask",M)||{children:[],attributes:{}}:ro("generateAbstractIcon",M)||{children:[],attributes:{}},z=w.attributes;return M.children=w.children,M.attributes=z,o?function Nze(e){var n=e.iconName,r=e.children,i=e.attributes,a=e.symbol,s=!0===a?"".concat(e.prefix,"-").concat(De.cssPrefix,"-").concat(n):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:we(we({},i),{},{id:s}),children:r}]}]}(M):function Aze(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,a=e.styles,s=e.transform;if(wx(s)&&n.found&&!r.found){var l={x:n.width/n.height/2,y:.5};i.style=lp(we(we({},a),{},{"transform-origin":"".concat(l.x+s.x/16,"em ").concat(l.y+s.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(M)}function vG(e){var t=e.content,n=e.width,r=e.height,i=e.transform,a=e.title,s=e.extra,o=e.watchable,c=void 0!==o&&o,l=we(we(we({},s.attributes),a?{title:a}:{}),{},{class:s.classes.join(" ")});c&&(l[d4]="");var u=we({},s.styles);wx(i)&&(u.transform=function uze(e){var t=e.transform,n=e.width,i=e.height,a=void 0===i?16:i,s=e.startCentered,o=void 0!==s&&s,c="";return c+=o&&Wq?"translate(".concat(t.x/16-(void 0===n?16:n)/2,"em, ").concat(t.y/16-a/2,"em) "):o?"translate(calc(-50% + ".concat(t.x/16,"em), calc(-50% + ").concat(t.y/16,"em)) "):"translate(".concat(t.x/16,"em, ").concat(t.y/16,"em) "),(c+="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "))+"rotate(".concat(t.rotate,"deg) ")}({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var f=lp(u);f.length>0&&(l.style=f);var d=[];return d.push({tag:"span",attributes:l,children:[t]}),a&&d.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),d}var kx=Ii.styles;function Tx(e){var t=e[0],n=e[1],a=px(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(a)?{tag:"g",attributes:{class:"".concat(De.cssPrefix,"-").concat(h4.GROUP)},children:[{tag:"path",attributes:{class:"".concat(De.cssPrefix,"-").concat(h4.SECONDARY),fill:"currentColor",d:a[0]}},{tag:"path",attributes:{class:"".concat(De.cssPrefix,"-").concat(h4.PRIMARY),fill:"currentColor",d:a[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:a}}}}var Tze={found:!1,width:512,height:512};function Ix(e,t){var n=t;return"fa"===t&&null!==De.styleDefault&&(t=mc()),new Promise(function(r,i){if(ro("missingIconAbstract"),"fa"===n){var s=hG(e)||{};e=s.iconName||e,t=s.prefix||t}if(e&&t&&kx[t]&&kx[t][e])return r(Tx(kx[t][e]));(function Ize(e,t){!Zq&&!De.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))})(e,t),r(we(we({},Tze),{},{icon:De.showMissingIcons&&e&&ro("missingIconAbstract")||{}}))})}var yG=function(){},Fx=De.measurePerformance&&rp&&rp.mark&&rp.measure?rp:{mark:yG,measure:yG},T8='FA "6.5.1"',CG=function(t){Fx.mark("".concat(T8," ").concat(t," ends")),Fx.measure("".concat(T8," ").concat(t),"".concat(T8," ").concat(t," begins"),"".concat(T8," ").concat(t," ends"))},Rx={begin:function(t){return Fx.mark("".concat(T8," ").concat(t," begins")),function(){return CG(t)}},end:CG},vp=function(){};function bG(e){return"string"==typeof(e.getAttribute?e.getAttribute(d4):null)}function $ze(e){return Jt.createElementNS("http://www.w3.org/2000/svg",e)}function Bze(e){return Jt.createElement(e)}function MG(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,r=void 0===n?"svg"===e.tag?$ze:Bze:n;if("string"==typeof e)return Jt.createTextNode(e);var i=r(e.tag);return Object.keys(e.attributes||[]).forEach(function(s){i.setAttribute(s,e.attributes[s])}),(e.children||[]).forEach(function(s){i.appendChild(MG(s,{ceFn:r}))}),i}var yp={replace:function(t){var n=t[0];if(n.parentNode)if(t[1].forEach(function(i){n.parentNode.insertBefore(MG(i),n)}),null===n.getAttribute(d4)&&De.keepOriginalSource){var r=Jt.createComment(function Uze(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(t){var n=t[0],r=t[1];if(~_x(n).indexOf(De.replacementClass))return yp.replace(t);var i=new RegExp("".concat(De.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var a=r[0].attributes.class.split(" ").reduce(function(o,c){return c===De.replacementClass||c.match(i)?o.toSvg.push(c):o.toNode.push(c),o},{toNode:[],toSvg:[]});r[0].attributes.class=a.toSvg.join(" "),0===a.toNode.length?n.removeAttribute("class"):n.setAttribute("class",a.toNode.join(" "))}var s=r.map(function(o){return k8(o)}).join("\n");n.setAttribute(d4,""),n.innerHTML=s}};function _G(e){e()}function wG(e,t){var n="function"==typeof t?t:vp;if(0===e.length)n();else{var r=_G;De.mutateApproach===Wxe&&(r=hc.requestAnimationFrame||_G),r(function(){var i=function Pze(){return!0===De.autoReplaceSvg?yp.replace:yp[De.autoReplaceSvg]||yp.replace}(),a=Rx.begin("mutate");e.map(i),a(),n()})}}var Ox=!1;function xG(){Ox=!0}function Px(){Ox=!1}var Cp=null;function zG(e){if(Gq&&De.observeMutations){var t=e.treeCallback,n=void 0===t?vp:t,r=e.nodeCallback,i=void 0===r?vp:r,a=e.pseudoElementsCallback,s=void 0===a?vp:a,o=e.observeMutationsRoot,c=void 0===o?Jt:o;Cp=new Gq(function(l){if(!Ox){var u=mc();e6(l).forEach(function(f){if("childList"===f.type&&f.addedNodes.length>0&&!bG(f.addedNodes[0])&&(De.searchPseudoElements&&s(f.target),n(f.target)),"attributes"===f.type&&f.target.parentNode&&De.searchPseudoElements&&s(f.target.parentNode),"attributes"===f.type&&bG(f.target)&&~eze.indexOf(f.attributeName))if("class"===f.attributeName&&function Rze(e){var t=e.getAttribute?e.getAttribute(Cx):null,n=e.getAttribute?e.getAttribute(bx):null;return t&&n}(f.target)){var d=mp(_x(f.target)),p=d.iconName;f.target.setAttribute(Cx,d.prefix||u),p&&f.target.setAttribute(bx,p)}else(function Oze(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(De.replacementClass)})(f.target)&&i(f.target)})}}),eo&&Cp.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function HG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=function Gze(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",i=mp(_x(e));return i.prefix||(i.prefix=mc()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=function wze(e,t){return(cG[e]||{})[t]}(i.prefix,e.innerText)||Vx(i.prefix,Hx(e.innerText))),!i.iconName&&De.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}(e),r=n.iconName,i=n.prefix,a=n.rest,s=function Wze(e){var t=e6(e.attributes).reduce(function(i,a){return"class"!==i.name&&"style"!==i.name&&(i[a.name]=a.value),i},{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return De.autoA11y&&(n?t["aria-labelledby"]="".concat(De.replacementClass,"-title-").concat(r||N8()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),o=Lx("parseNodeAttributes",{},e),c=t.styleParser?function qze(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce(function(r,i){var a=i.split(":"),s=a[0],o=a.slice(1);return s&&o.length>0&&(r[s]=o.join(":").trim()),r},{})),n}(e):[];return we({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:$a,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:a,styles:c,attributes:s}},o)}var Xze=Ii.styles;function SG(e){var t="nest"===De.autoReplaceSvg?HG(e,{styleParser:!1}):HG(e);return~t.extra.classes.indexOf(Kq)?ro("generateLayersText",e,t):ro("generateSvgReplacementMutation",e,t)}var gc=new Set;function EG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!eo)return Promise.resolve();var n=Jt.documentElement.classList,r=function(f){return n.add("".concat(Qq,"-").concat(f))},i=function(f){return n.remove("".concat(Qq,"-").concat(f))},a=De.autoFetchSvg?gc:Mx.map(function(u){return"fa-".concat(u)}).concat(Object.keys(Xze));a.includes("fa")||a.push("fa");var s=[".".concat(Kq,":not([").concat(d4,"])")].concat(a.map(function(u){return".".concat(u,":not([").concat(d4,"])")})).join(", ");if(0===s.length)return Promise.resolve();var o=[];try{o=e6(e.querySelectorAll(s))}catch{}if(!(o.length>0))return Promise.resolve();r("pending"),i("complete");var c=Rx.begin("onTree"),l=o.reduce(function(u,f){try{var d=SG(f);d&&u.push(d)}catch(h){Zq||"MissingIcon"===h.name&&console.error(h)}return u},[]);return new Promise(function(u,f){Promise.all(l).then(function(d){wG(d,function(){r("active"),r("complete"),i("pending"),"function"==typeof t&&t(),c(),u()})}).catch(function(d){c(),f(d)})})}function Qze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;SG(e).then(function(n){n&&wG([n],t)})}Mx.map(function(e){gc.add("fa-".concat(e))}),Object.keys(S8[en]).map(gc.add.bind(gc)),Object.keys(S8[Mn]).map(gc.add.bind(gc)),gc=z8(gc);var Kze=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.transform,i=void 0===r?$a:r,a=n.symbol,s=void 0!==a&&a,o=n.mask,c=void 0===o?null:o,l=n.maskId,u=void 0===l?null:l,f=n.title,d=void 0===f?null:f,h=n.titleId,p=void 0===h?null:h,m=n.classes,g=void 0===m?[]:m,v=n.attributes,y=void 0===v?{}:v,C=n.styles,b=void 0===C?{}:C;if(t){var M=t.prefix,w=t.iconName,_=t.icon;return gp(we({type:"icon"},t),function(){return m4("beforeDOMElementCreation",{iconDefinition:t,params:n}),De.autoA11y&&(d?y["aria-labelledby"]="".concat(De.replacementClass,"-title-").concat(p||N8()):(y["aria-hidden"]="true",y.focusable="false")),Nx({icons:{main:Tx(_),mask:c?Tx(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:M,iconName:w,transform:we(we({},$a),i),symbol:s,title:d,maskId:u,titleId:p,extra:{attributes:y,styles:b,classes:g}})})}},Jze={mixout:function(){return{icon:(e=Kze,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:Ax(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:Ax(i||{})),e(r,we(we({},n),{},{mask:i}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=EG,n.nodeCallback=Qze,n}}},provides:function(t){t.i2svg=function(n){var r=n.node,a=n.callback;return EG(void 0===r?Jt:r,void 0===a?function(){}:a)},t.generateSvgReplacementMutation=function(n,r){var i=r.iconName,a=r.title,s=r.titleId,o=r.prefix,c=r.transform,l=r.symbol,u=r.mask,f=r.maskId,d=r.extra;return new Promise(function(h,p){Promise.all([Ix(i,o),u.iconName?Ix(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=px(m,2);h([n,Nx({icons:{main:g[0],mask:g[1]},prefix:o,iconName:i,transform:c,symbol:l,maskId:f,title:a,titleId:s,extra:d,watchable:!0})])}).catch(p)})},t.generateAbstractIcon=function(n){var l,r=n.children,i=n.attributes,a=n.main,s=n.transform,c=lp(n.styles);return c.length>0&&(i.style=c),wx(s)&&(l=ro("generateAbstractTransformGrouping",{main:a,transform:s,containerWidth:a.width,iconWidth:a.width})),r.push(l||a.icon),{children:r,attributes:i}}}},eHe={mixout:function(){return{layer:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.classes,a=void 0===i?[]:i;return gp({type:"layer"},function(){m4("beforeDOMElementCreation",{assembler:n,params:r});var s=[];return n(function(o){Array.isArray(o)?o.map(function(c){s=s.concat(c.abstract)}):s=s.concat(o.abstract)}),[{tag:"span",attributes:{class:["".concat(De.cssPrefix,"-layers")].concat(z8(a)).join(" ")},children:s}]})}}}},tHe={mixout:function(){return{counter:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.title,a=void 0===i?null:i,s=r.classes,o=void 0===s?[]:s,c=r.attributes,l=void 0===c?{}:c,u=r.styles,f=void 0===u?{}:u;return gp({type:"counter",content:n},function(){return m4("beforeDOMElementCreation",{content:n,params:r}),function kze(e){var t=e.content,n=e.title,r=e.extra,i=we(we(we({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),a=lp(r.styles);a.length>0&&(i.style=a);var s=[];return s.push({tag:"span",attributes:i,children:[t]}),n&&s.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),s}({content:n.toString(),title:a,extra:{attributes:l,styles:f,classes:["".concat(De.cssPrefix,"-layers-counter")].concat(z8(o))}})})}}}},nHe={mixout:function(){return{text:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.transform,a=void 0===i?$a:i,s=r.title,o=void 0===s?null:s,c=r.classes,l=void 0===c?[]:c,u=r.attributes,f=void 0===u?{}:u,d=r.styles,h=void 0===d?{}:d;return gp({type:"text",content:n},function(){return m4("beforeDOMElementCreation",{content:n,params:r}),vG({content:n,transform:we(we({},$a),a),title:o,extra:{attributes:f,styles:h,classes:["".concat(De.cssPrefix,"-layers-text")].concat(z8(l))}})})}}},provides:function(t){t.generateLayersText=function(n,r){var i=r.title,a=r.transform,s=r.extra,o=null,c=null;if(Wq){var l=parseInt(getComputedStyle(n).fontSize,10),u=n.getBoundingClientRect();o=u.width/l,c=u.height/l}return De.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([n,vG({content:n.innerHTML,width:o,height:c,transform:a,title:i,extra:s,watchable:!0})])}}},rHe=new RegExp('"',"ug"),VG=[1105920,1112319];function DG(e,t){var n="".concat(Gxe).concat(t.replace(":","-"));return new Promise(function(r,i){if(null!==e.getAttribute(n))return r();var s=e6(e.children).filter(function(_){return _.getAttribute(yx)===t})[0],o=hc.getComputedStyle(e,t),c=o.getPropertyValue("font-family").match(Zxe),l=o.getPropertyValue("font-weight"),u=o.getPropertyValue("content");if(s&&!c)return e.removeChild(s),r();if(c&&"none"!==u&&""!==u){var f=o.getPropertyValue("content"),d=~["Sharp"].indexOf(c[2])?Mn:en,h=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?E8[d][c[2].toLowerCase()]:Kxe[d][l],p=function iHe(e){var t=e.replace(rHe,""),n=function vze(e,t){var i,n=e.length,r=e.charCodeAt(t);return r>=55296&&r<=56319&&n>t+1&&(i=e.charCodeAt(t+1))>=56320&&i<=57343?1024*(r-55296)+i-56320+65536:r}(t,0),r=n>=VG[0]&&n<=VG[1],i=2===t.length&&t[0]===t[1];return{value:Hx(i?t[0]:t),isSecondary:r||i}}(f),m=p.value,g=p.isSecondary,v=c[0].startsWith("FontAwesome"),y=Vx(h,m),C=y;if(v){var b=function xze(e){var t=uG[e],n=Vx("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(m);b.iconName&&b.prefix&&(y=b.iconName,h=b.prefix)}if(!y||g||s&&s.getAttribute(Cx)===h&&s.getAttribute(bx)===C)r();else{e.setAttribute(n,C),s&&e.removeChild(s);var M=function Yze(){return{iconName:null,title:null,titleId:null,prefix:null,transform:$a,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}(),w=M.extra;w.attributes[yx]=t,Ix(y,h).then(function(_){var z=Nx(we(we({},M),{},{icons:{main:_,mask:Dx()},prefix:h,iconName:C,extra:w,watchable:!0})),S=Jt.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===t?e.insertBefore(S,e.firstChild):e.appendChild(S),S.outerHTML=z.map(function(D){return k8(D)}).join("\n"),e.removeAttribute(n),r()}).catch(i)}}else r()})}function aHe(e){return Promise.all([DG(e,"::before"),DG(e,"::after")])}function sHe(e){return!(e.parentNode===document.head||~Yxe.indexOf(e.tagName.toUpperCase())||e.getAttribute(yx)||e.parentNode&&"svg"===e.parentNode.tagName)}function LG(e){if(eo)return new Promise(function(t,n){var r=e6(e.querySelectorAll("*")).filter(sHe).map(aHe),i=Rx.begin("searchPseudoElements");xG(),Promise.all(r).then(function(){i(),Px(),t()}).catch(function(){i(),Px(),n()})})}var AG=!1,NG=function(t){return t.toLowerCase().split(" ").reduce(function(r,i){var a=i.toLowerCase().split("-"),s=a[0],o=a.slice(1).join("-");if(s&&"h"===o)return r.flipX=!0,r;if(s&&"v"===o)return r.flipY=!0,r;if(o=parseFloat(o),isNaN(o))return r;switch(s){case"grow":r.size=r.size+o;break;case"shrink":r.size=r.size-o;break;case"left":r.x=r.x-o;break;case"right":r.x=r.x+o;break;case"up":r.y=r.y-o;break;case"down":r.y=r.y+o;break;case"rotate":r.rotate=r.rotate+o}return r},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},$x={x:0,y:0,width:"100%",height:"100%"};function kG(e){return e.attributes&&(e.attributes.fill||!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e.attributes.fill="black"),e}var fHe={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),a=i?mp(i.split(" ").map(function(s){return s.trim()})):Dx();return a.prefix||(a.prefix=mc()),n.mask=a,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(t){t.generateAbstractMask=function(n){var e,r=n.children,i=n.attributes,a=n.main,s=n.mask,o=n.maskId,u=a.icon,d=s.icon,h=function lze(e){var t=e.transform,r=e.iconWidth,i={transform:"translate(".concat(e.containerWidth/2," 256)")},a="translate(".concat(32*t.x,", ").concat(32*t.y,") "),s="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),o="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(a," ").concat(s," ").concat(o)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:n.transform,containerWidth:s.width,iconWidth:a.width}),p={tag:"rect",attributes:we(we({},$x),{},{fill:"white"})},m=u.children?{children:u.children.map(kG)}:{},g={tag:"g",attributes:we({},h.inner),children:[kG(we({tag:u.tag,attributes:we(we({},u.attributes),h.path)},m))]},v={tag:"g",attributes:we({},h.outer),children:[g]},y="mask-".concat(o||N8()),C="clip-".concat(o||N8()),b={tag:"mask",attributes:we(we({},$x),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,v]},M={tag:"defs",children:[{tag:"clipPath",attributes:{id:C},children:(e=d,"g"===e.tag?e.children:[e])},b]};return r.push(M,{tag:"rect",attributes:we({fill:"currentColor","clip-path":"url(#".concat(C,")"),mask:"url(#".concat(y,")")},$x)}),{children:r,attributes:i}}}};!function Sze(e,t){var n=t.mixoutsTo;mG=e,n6={},Object.keys(r6).forEach(function(r){-1===Hze.indexOf(r)&&delete r6[r]}),mG.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(s){"function"==typeof i[s]&&(n[s]=i[s]),"object"===tp(i[s])&&Object.keys(i[s]).forEach(function(o){n[s]||(n[s]={}),n[s][o]=i[s][o]})}),r.hooks){var a=r.hooks();Object.keys(a).forEach(function(s){n6[s]||(n6[s]=[]),n6[s].push(a[s])})}r.provides&&r.provides(r6)})}([dze,Jze,eHe,tHe,nHe,{hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=LG,n}}},provides:function(t){t.pseudoElements2svg=function(n){var r=n.node;De.searchPseudoElements&&LG(void 0===r?Jt:r)}}},{mixout:function(){return{dom:{unwatch:function(){xG(),AG=!0}}}},hooks:function(){return{bootstrap:function(){zG(Lx("mutationObserverCallbacks",{}))},noAuto:function(){!function jze(){Cp&&Cp.disconnect()}()},watch:function(n){var r=n.observeMutationsRoot;AG?Px():zG(Lx("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},{mixout:function(){return{parse:{transform:function(n){return NG(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=NG(i)),n}}},provides:function(t){t.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,s=n.iconWidth,o={transform:"translate(".concat(n.containerWidth/2," 256)")},c="translate(".concat(32*i.x,", ").concat(32*i.y,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),h={outer:o,inner:{transform:"".concat(c," ").concat(l," ").concat(u)},path:{transform:"translate(".concat(s/2*-1," -256)")}};return{tag:"g",attributes:we({},h.outer),children:[{tag:"g",attributes:we({},h.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:we(we({},r.icon.attributes),h.path)}]}]}}}},fHe,{provides:function(t){var n=!1;hc.matchMedia&&(n=hc.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},a={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:we(we({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var s=we(we({},a),{},{attributeName:"opacity"}),o={tag:"circle",attributes:we(we({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||o.children.push({tag:"animate",attributes:we(we({},a),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:we(we({},s),{},{values:"1;0;1;1;0;1;"})}),r.push(o),r.push({tag:"path",attributes:we(we({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:we(we({},s),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:we(we({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:we(we({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},{hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol");return n.symbol=null!==i&&(""===i||i),n}}}}],{mixoutsTo:yr});var mHe=yr.parse,gHe=yr.icon;const vHe=["*"],bHe=e=>{const t={[`fa-${e.animation}`]:null!=e.animation&&!e.animation.startsWith("spin"),"fa-spin":"spin"===e.animation||"spin-reverse"===e.animation,"fa-spin-pulse":"spin-pulse"===e.animation||"spin-pulse-reverse"===e.animation,"fa-spin-reverse":"spin-reverse"===e.animation||"spin-pulse-reverse"===e.animation,"fa-pulse":"spin-pulse"===e.animation||"spin-pulse-reverse"===e.animation,"fa-fw":e.fixedWidth,"fa-border":e.border,"fa-inverse":e.inverse,"fa-layers-counter":e.counter,"fa-flip-horizontal":"horizontal"===e.flip||"both"===e.flip,"fa-flip-vertical":"vertical"===e.flip||"both"===e.flip,[`fa-${e.size}`]:null!==e.size,[`fa-rotate-${e.rotate}`]:null!==e.rotate,[`fa-pull-${e.pull}`]:null!==e.pull,[`fa-stack-${e.stackItemSize}`]:null!=e.stackItemSize};return Object.keys(t).map(n=>t[n]?n:null).filter(n=>n)};let wHe=(()=>{class e{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),xHe=(()=>{class e{constructor(){this.definitions={}}addIcons(...n){for(const r of n){r.prefix in this.definitions||(this.definitions[r.prefix]={}),this.definitions[r.prefix][r.iconName]=r;for(const i of r.icon[2])"string"==typeof i&&(this.definitions[r.prefix][i]=r)}}addIconPacks(...n){for(const r of n){const i=Object.keys(r).map(a=>r[a]);this.addIcons(...i)}}getIconDefinition(n,r){return n in this.definitions&&r in this.definitions[n]?this.definitions[n][r]:null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),zHe=(()=>{class e{constructor(){this.stackItemSize="1x"}ngOnChanges(n){if("size"in n)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=Be({type:e,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[t2]})}return e})(),HHe=(()=>{class e{constructor(n,r){this.renderer=n,this.elementRef=r}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(n){"size"in n&&(null!=n.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${n.size.currentValue}`),null!=n.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${n.size.previousValue}`))}static#e=this.\u0275fac=function(r){return new(r||e)(q(La),q(k2))};static#t=this.\u0275cmp=kt({type:e,selectors:[["fa-stack"]],inputs:{size:"size"},features:[t2],ngContentSelectors:vHe,decls:1,vars:0,template:function(r,i){1&r&&(function DP(e){const t=ee()[Vn][A1];if(!t.projection){const r=t.projection=Df(e?e.length:1,null),i=r.slice();let a=t.child;for(;null!==a;){const s=e?Vge(a,e):0;null!==s&&(i[s]?i[s].projectionNext=a:r[s]=a,i[s]=a),a=a.next}}}(),function LP(e,t=0,n){const r=ee(),i=dt(),a=D0(i,st+e,16,null,n||null);null===a.projection&&(a.projection=t),tM(),(!r[Rs]||c0())&&32!=(32&a.flags)&&function S9e(e,t,n){AR(t[We],0,t,n,EM(e,n,t),HR(n.parent||t[A1],n,t))}(i,r,a)}(0))},encapsulation:2})}return e})(),TG=(()=>{class e{set spin(n){this.animation=n?"spin":void 0}set pulse(n){this.animation=n?"spin-pulse":void 0}constructor(n,r,i,a,s){this.sanitizer=n,this.config=r,this.iconLibrary=i,this.stackItem=a,this.classes=[],null!=s&&null==a&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(n){if(null!=this.icon||null!=this.config.fallbackIcon){if(n){const i=this.findIconDefinition(null!=this.icon?this.icon:this.config.fallbackIcon);if(null!=i){const a=this.buildParams();this.renderIcon(i,a)}}}else(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})()}render(){this.ngOnChanges({})}findIconDefinition(n){const r=((e,t)=>(e=>void 0!==e.prefix&&void 0!==e.iconName)(e)?e:"string"==typeof e?{prefix:t,iconName:e}:{prefix:e[0],iconName:e[1]})(n,this.config.defaultPrefix);return"icon"in r?r:this.iconLibrary.getIconDefinition(r.prefix,r.iconName)??((e=>{throw new Error(`Could not find icon with iconName=${e.iconName} and prefix=${e.prefix} in the icon library.`)})(r),null)}buildParams(){const n={flip:this.flip,animation:this.animation,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},r="string"==typeof this.transform?mHe.transform(this.transform):this.transform;return{title:this.title,transform:r,classes:[...bHe(n),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(n,r){const i=gHe(n,r);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(i.html.join("\n"))}static#e=this.\u0275fac=function(r){return new(r||e)(q(dj),q(wHe),q(xHe),q(zHe,8),q(HHe,8))};static#t=this.\u0275cmp=kt({type:e,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(r,i){2&r&&(k_("innerHTML",i.renderedIconHTML,qR),Ei("title",i.title))},inputs:{icon:"icon",title:"title",animation:"animation",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[t2],decls:0,vars:0,template:function(r,i){},encapsulation:2})}return e})(),SHe=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=jr({type:e});static#n=this.\u0275inj=ur({})}return e})();function Bx(...e){const t=ff(e),n=wI(e),{args:r,keys:i}=Aj(e);if(0===r.length)return Pn([],t);const a=new Sn(function VHe(e,t,n=Wo){return r=>{IG(t,()=>{const{length:i}=e,a=new Array(i);let s=i,o=i;for(let c=0;c<i;c++)IG(t,()=>{const l=Pn(e[c],t);let u=!1;l.subscribe(Tn(r,f=>{a[c]=f,u||(u=!0,o--),o||r.next(n(a.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,i?s=>kj(i,s):Wo));return n?a.pipe(Nj(n)):a}function IG(e,t,n){e?Ts(n,e,t):t()}const bp=$3(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Ux(...e){return function DHe(){return Zl(1)}()(Pn(e,ff(e)))}function FG(e){return new Sn(t=>{cr(e()).subscribe(t)})}function I8(e,t){const n=At(e)?e:()=>e,r=i=>i.error(n());return new Sn(t?i=>t.schedule(r,0,i):r)}function jx(){return On((e,t)=>{let n=null;e._refCount++;const r=Tn(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,a=n;n=null,i&&(!a||i===a)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class RG extends Sn{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,cI(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new K1;const n=this.getSubject();t.add(this.source.subscribe(Tn(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=K1.EMPTY)}return t}refCount(){return jx()(this)}}function tt(e){return e<=0?()=>Ma:On((t,n)=>{let r=0;t.subscribe(Tn(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Mp(e){return On((t,n)=>{let r=!1;t.subscribe(Tn(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function OG(e=AHe){return On((t,n)=>{let r=!1;t.subscribe(Tn(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function AHe(){return new bp}function g4(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Js((i,a)=>e(i,a,r)):Wo,tt(1),n?Mp(t):OG(()=>new bp))}function I1(e,t,n){const r=At(e)||t||n?{next:e,error:t,complete:n}:e;return r?On((i,a)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let o=!0;i.subscribe(Tn(a,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),a.next(c)},()=>{var c;o=!1,null===(c=r.complete)||void 0===c||c.call(r),a.complete()},c=>{var l;o=!1,null===(l=r.error)||void 0===l||l.call(r,c),a.error(c)},()=>{var c,l;o&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):Wo}function v4(e){return On((t,n)=>{let a,r=null,i=!1;r=t.subscribe(Tn(n,void 0,void 0,s=>{a=cr(e(s,v4(e)(t))),r?(r.unsubscribe(),r=null,a.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(n))})}function qx(e){return e<=0?()=>Ma:On((t,n)=>{let r=[];t.subscribe(Tn(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}const Ke="primary",F8=Symbol("RouteTitle");class RHe{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function i6(e){return new RHe(e)}function OHe(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let a=0;a<r.length;a++){const s=r[a],o=e[a];if(s.startsWith(":"))i[s.substring(1)]=o;else if(s!==o.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Ba(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let a=0;a<n.length;a++)if(i=n[a],!PG(e[i],t[i]))return!1;return!0}function PG(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,a)=>r[a]===i)}return e===t}function $G(e){return e.length>0?e[e.length-1]:null}function vc(e){return function EHe(e){return!!e&&(e instanceof Sn||At(e.lift)&&At(e.subscribe))}(e)?e:Zf(e)?Pn(Promise.resolve(e)):Ce(e)}const $He={exact:function jG(e,t,n){if(!y4(e.segments,t.segments)||!_p(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!jG(e.children[r],t.children[r],n))return!1;return!0},subset:qG},BG={exact:function BHe(e,t){return Ba(e,t)},subset:function UHe(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>PG(e[n],t[n]))},ignored:()=>!0};function UG(e,t,n){return $He[n.paths](e.root,t.root,n.matrixParams)&&BG[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function qG(e,t,n){return GG(e,t,t.segments,n)}function GG(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!y4(i,n)||t.hasChildren()||!_p(i,n,r))}if(e.segments.length===n.length){if(!y4(e.segments,n)||!_p(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!qG(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),a=n.slice(e.segments.length);return!!(y4(e.segments,i)&&_p(e.segments,i,r)&&e.children[Ke])&&GG(e.children[Ke],t,a,r)}}function _p(e,t,n){return t.every((r,i)=>BG[n](e[i].parameters,r.parameters))}class a6{constructor(t=new Ft([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=i6(this.queryParams)),this._queryParamMap}toString(){return GHe.serialize(this)}}class Ft{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wp(this)}}class R8{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=i6(this.parameters)),this._parameterMap}toString(){return XG(this)}}function y4(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}let O8=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:function(){return new Gx},providedIn:"root"})}return e})();class Gx{parse(t){const n=new rSe(t);return new a6(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${P8(t.root,!0)}`,r=function XHe(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${xp(n)}=${xp(i)}`).join("&"):`${xp(n)}=${xp(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function WHe(e){return encodeURI(e)}(t.fragment)}`:""}`}}const GHe=new Gx;function wp(e){return e.segments.map(t=>XG(t)).join("/")}function P8(e,t){if(!e.hasChildren())return wp(e);if(t){const n=e.children[Ke]?P8(e.children[Ke],!1):"",r=[];return Object.entries(e.children).forEach(([i,a])=>{i!==Ke&&r.push(`${i}:${P8(a,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function qHe(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===Ke&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==Ke&&(n=n.concat(t(i,r)))}),n}(e,(r,i)=>i===Ke?[P8(e.children[Ke],!1)]:[`${i}:${P8(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Ke]?`${wp(e)}/${n[0]}`:`${wp(e)}/(${n.join("//")})`}}function WG(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xp(e){return WG(e).replace(/%3B/gi,";")}function Wx(e){return WG(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zp(e){return decodeURIComponent(e)}function YG(e){return zp(e.replace(/\+/g,"%20"))}function XG(e){return`${Wx(e.path)}${function YHe(e){return Object.keys(e).map(t=>`;${Wx(t)}=${Wx(e[t])}`).join("")}(e.parameters)}`}const QHe=/^[^\/()?;#]+/;function Yx(e){const t=e.match(QHe);return t?t[0]:""}const ZHe=/^[^\/()?;=#]+/,JHe=/^[^=?&#]+/,tSe=/^[^&#]+/;class rSe{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ft([],{}):new Ft([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Ke]=new Ft(t,n)),r}parseSegment(){const t=Yx(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new ie(4009,!1);return this.capture(t),new R8(zp(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=function KHe(e){const t=e.match(ZHe);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Yx(this.remaining);i&&(r=i,this.capture(r))}t[zp(n)]=zp(r)}parseQueryParam(t){const n=function eSe(e){const t=e.match(JHe);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function nSe(e){const t=e.match(tSe);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=YG(n),a=YG(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(a)}else t[i]=a}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Yx(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new ie(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):t&&(a=Ke);const s=this.parseChildren();n[a]=1===Object.keys(s).length?s[Ke]:new Ft([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new ie(4011,!1)}}function QG(e){return e.segments.length>0?new Ft([],{[Ke]:e}):e}function ZG(e){const t={};for(const r of Object.keys(e.children)){const a=ZG(e.children[r]);if(r===Ke&&0===a.segments.length&&a.hasChildren())for(const[s,o]of Object.entries(a.children))t[s]=o;else(a.segments.length>0||a.hasChildren())&&(t[r]=a)}return function iSe(e){if(1===e.numberOfChildren&&e.children[Ke]){const t=e.children[Ke];return new Ft(e.segments.concat(t.segments),t.children)}return e}(new Ft(e.segments,t))}function C4(e){return e instanceof a6}function KG(e){let t;const i=QG(function n(a){const s={};for(const c of a.children){const l=n(c);s[c.outlet]=l}const o=new Ft(a.url,s);return a===e&&(t=o),o}(e.root));return t??i}function JG(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(0===t.length)return Xx(i,i,i,n,r);const a=function sSe(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new tW(!0,0,e);let t=0,n=!1;const r=e.reduce((i,a,s)=>{if("object"==typeof a&&null!=a){if(a.outlets){const o={};return Object.entries(a.outlets).forEach(([c,l])=>{o[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:o}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===s?(a.split("/").forEach((o,c)=>{0==c&&"."===o||(0==c&&""===o?n=!0:".."===o?t++:""!=o&&i.push(o))}),i):[...i,a]},[]);return new tW(n,t,r)}(t);if(a.toRoot())return Xx(i,i,new Ft([],{}),n,r);const s=function oSe(e,t,n){if(e.isAbsolute)return new Sp(t,!0,0);if(!n)return new Sp(t,!1,NaN);if(null===n.parent)return new Sp(n,!0,0);const r=Hp(e.commands[0])?0:1;return function cSe(e,t,n){let r=e,i=t,a=n;for(;a>i;){if(a-=i,r=r.parent,!r)throw new ie(4005,!1);i=r.segments.length}return new Sp(r,!1,i-a)}(n,n.segments.length-1+r,e.numberOfDoubleDots)}(a,i,e),o=s.processChildren?B8(s.segmentGroup,s.index,a.commands):nW(s.segmentGroup,s.index,a.commands);return Xx(i,s.segmentGroup,o,n,r)}function Hp(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function $8(e){return"object"==typeof e&&null!=e&&e.outlets}function Xx(e,t,n,r,i){let s,a={};r&&Object.entries(r).forEach(([c,l])=>{a[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=e===t?n:eW(e,t,n);const o=QG(ZG(s));return new a6(o,a,i)}function eW(e,t,n){const r={};return Object.entries(e.children).forEach(([i,a])=>{r[i]=a===t?n:eW(a,t,n)}),new Ft(e.segments,r)}class tW{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Hp(r[0]))throw new ie(4003,!1);const i=r.find($8);if(i&&i!==$G(r))throw new ie(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Sp{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function nW(e,t,n){if(e||(e=new Ft([],{})),0===e.segments.length&&e.hasChildren())return B8(e,t,n);const r=function uSe(e,t,n){let r=0,i=t;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return a;const s=e.segments[i],o=n[r];if($8(o))break;const c=`${o}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!iW(c,l,s))return a;r+=2}else{if(!iW(c,{},s))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const a=new Ft(e.segments.slice(0,r.pathIndex),{});return a.children[Ke]=new Ft(e.segments.slice(r.pathIndex),e.children),B8(a,0,i)}return r.match&&0===i.length?new Ft(e.segments,{}):r.match&&!e.hasChildren()?Qx(e,t,n):r.match?B8(e,0,i):Qx(e,t,n)}function B8(e,t,n){if(0===n.length)return new Ft(e.segments,{});{const r=function lSe(e){return $8(e[0])?e[0].outlets:{[Ke]:e}}(n),i={};if(Object.keys(r).some(a=>a!==Ke)&&e.children[Ke]&&1===e.numberOfChildren&&0===e.children[Ke].segments.length){const a=B8(e.children[Ke],t,n);return new Ft(e.segments,a.children)}return Object.entries(r).forEach(([a,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[a]=nW(e.children[a],t,s))}),Object.entries(e.children).forEach(([a,s])=>{void 0===r[a]&&(i[a]=s)}),new Ft(e.segments,i)}}function Qx(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const a=n[i];if($8(a)){const c=fSe(a.outlets);return new Ft(r,c)}if(0===i&&Hp(n[0])){r.push(new R8(e.segments[t].path,rW(n[0]))),i++;continue}const s=$8(a)?a.outlets[Ke]:`${a}`,o=i<n.length-1?n[i+1]:null;s&&o&&Hp(o)?(r.push(new R8(s,rW(o))),i+=2):(r.push(new R8(s,{})),i++)}return new Ft(r,{})}function fSe(e){const t={};return Object.entries(e).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(t[n]=Qx(new Ft([],{}),0,r))}),t}function rW(e){const t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function iW(e,t,n){return e==n.path&&Ba(t,n.parameters)}const U8="imperative";class Ua{constructor(t,n){this.id=t,this.url=n}}class Ep extends Ua{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class yc extends Ua{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class j8 extends Ua{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class s6 extends Ua{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=16}}class Vp extends Ua{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class aW extends Ua{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dSe extends Ua{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hSe extends Ua{constructor(t,n,r,i,a){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class pSe extends Ua{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mSe extends Ua{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gSe{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vSe{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ySe{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CSe{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bSe{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class MSe{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sW{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Zx{}class Kx{constructor(t){this.url=t}}class _Se{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new q8,this.attachRef=null}}let q8=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new _Se,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class oW{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=Jx(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=Jx(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=ez(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return ez(t,this._root).map(n=>n.value)}}function Jx(e,t){if(e===t.value)return t;for(const n of t.children){const r=Jx(e,n);if(r)return r}return null}function ez(e,t){if(e===t.value)return[t];for(const n of t.children){const r=ez(e,n);if(r.length)return r.unshift(t),r}return[]}class io{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function o6(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class cW extends oW{constructor(t,n){super(t),this.snapshot=n,tz(this,t)}toString(){return this.snapshot.toString()}}function lW(e,t){const n=function wSe(e,t){const s=new Dp([],{},{},"",{},Ke,t,null,{});return new fW("",new io(s,[]))}(0,t),r=new E2([new R8("",{})]),i=new E2({}),a=new E2({}),s=new E2({}),o=new E2(""),c=new w1(r,i,s,o,a,Ke,t,n.root);return c.snapshot=n.root,new cW(new io(c,[]),n)}class w1{constructor(t,n,r,i,a,s,o,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=s,this.component=o,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Mt(l=>l[F8]))??Ce(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Mt(t=>i6(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Mt(t=>i6(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function uW(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],a=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function xSe(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Dp{get title(){return this.data?.[F8]}constructor(t,n,r,i,a,s,o,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=s,this.component=o,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=i6(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=i6(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fW extends oW{constructor(t,n){super(n),this.url=t,tz(this,n)}toString(){return dW(this._root)}}function tz(e,t){t.value._routerState=e,t.children.forEach(n=>tz(e,n))}function dW(e){const t=e.children.length>0?` { ${e.children.map(dW).join(", ")} } `:"";return`${e.value}${t}`}function nz(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Ba(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Ba(t.params,n.params)||e.paramsSubject.next(n.params),function PHe(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Ba(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.urlSubject.next(n.url),Ba(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function rz(e,t){const n=Ba(e.params,t.params)&&function jHe(e,t){return y4(e,t)&&e.every((n,r)=>Ba(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||rz(e.parent,t.parent))}let iz=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ke,this.activateEvents=new Cn,this.deactivateEvents=new Cn,this.attachEvents=new Cn,this.detachEvents=new Cn,this.parentContexts=be(q8),this.location=be(Li),this.changeDetector=be(M9),this.environmentInjector=be(mr),this.inputBinder=be(Lp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ie(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ie(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ie(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new ie(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,o=this.parentContexts.getOrCreateContext(this.name).children,c=new zSe(n,o,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=Be({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[t2]})}return e})();class zSe{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===w1?this.route:t===q8?this.childContexts:this.parent.get(t,n)}}const Lp=new Me("");let hW=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=Bx([r.queryParams,r.params,r.data]).pipe(wi(([a,s,o],c)=>(o={...a,...s,...o},0===c?Ce(o):Promise.resolve(o)))).subscribe(a=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function Pbe(e){const t=ft(e);if(!t)return null;const n=new Gf(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}(r.component);if(s)for(const{templateName:o}of s.inputs)n.activatedComponentRef.setInput(o,a[o]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac})}return e})();function G8(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function SSe(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return G8(e,r,i);return G8(e,r)})}(e,t,n);return new io(r,i)}{if(e.shouldAttach(t.value)){const a=e.retrieve(t.value);if(null!==a){const s=a.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(o=>G8(e,o)),s}}const r=function ESe(e){return new w1(new E2(e.url),new E2(e.params),new E2(e.queryParams),new E2(e.fragment),new E2(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(a=>G8(e,a));return new io(r,i)}}const az="ngNavigationCancelingError";function pW(e,t){const{redirectTo:n,navigationBehaviorOptions:r}=C4(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=mW(!1,0,t);return i.url=n,i.navigationBehaviorOptions=r,i}function mW(e,t,n){const r=new Error("NavigationCancelingError: "+(e||""));return r[az]=!0,r.cancellationCode=t,n&&(r.url=n),r}function gW(e){return e&&e[az]}let vW=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=kt({type:e,selectors:[["ng-component"]],standalone:!0,features:[X$],decls:1,vars:0,template:function(r,i){1&r&&Un(0,"router-outlet")},dependencies:[iz],encapsulation:2})}return e})();function sz(e){const t=e.children&&e.children.map(sz),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ke&&(n.component=vW),n}function Fi(e){return e.outlet||Ke}function W8(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class ISe{constructor(t,n,r,i,a){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),nz(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=o6(n);t.children.forEach(a=>{const s=a.value.outlet;this.deactivateRoutes(a,i[s],r),delete i[s]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(t,n,r){const i=t.value,a=n?n.value:null;if(i===a)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else a&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,a=o6(t);for(const s of Object.keys(a))this.deactivateRouteAndItsChildren(a[s],i);if(r&&r.outlet){const s=r.outlet.detach(),o=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:o})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,a=o6(t);for(const s of Object.keys(a))this.deactivateRouteAndItsChildren(a[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){const i=o6(n);t.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new MSe(a.value.snapshot))}),t.children.length&&this.forwardEvent(new CSe(t.value.snapshot))}activateRoutes(t,n,r){const i=t.value,a=n?n.value:null;if(nz(i),i===a)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const o=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(o.contexts),s.attachRef=o.componentRef,s.route=o.route.value,s.outlet&&s.outlet.attach(o.componentRef,o.route.value),nz(o.route.value),this.activateChildRoutes(t,null,s.children)}else{const o=W8(i.snapshot);s.attachRef=null,s.route=i,s.injector=o,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}}class yW{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Ap{constructor(t,n){this.component=t,this.route=n}}function FSe(e,t,n){const r=e._root;return Y8(r,t?t._root:null,n,[r.value])}function c6(e,t){const n=Symbol(),r=t.get(e,n);return r===n?"function"!=typeof e||function Q7e(e){return null!==Qd(e)}(e)?t.get(e):e:r}function Y8(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=o6(t);return e.children.forEach(s=>{(function OSe(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=e.value,s=t?t.value:null,o=n?n.getContext(e.value.outlet):null;if(s&&a.routeConfig===s.routeConfig){const c=function PSe(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!y4(e.url,t.url);case"pathParamsOrQueryParamsChange":return!y4(e.url,t.url)||!Ba(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rz(e,t)||!Ba(e.queryParams,t.queryParams);default:return!rz(e,t)}}(s,a,a.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new yW(r)):(a.data=s.data,a._resolvedData=s._resolvedData),Y8(e,t,a.component?o?o.children:null:n,r,i),c&&o&&o.outlet&&o.outlet.isActivated&&i.canDeactivateChecks.push(new Ap(o.outlet.component,s))}else s&&X8(t,o,i),i.canActivateChecks.push(new yW(r)),Y8(e,null,a.component?o?o.children:null:n,r,i)})(s,a[s.value.outlet],n,r.concat([s.value]),i),delete a[s.value.outlet]}),Object.entries(a).forEach(([s,o])=>X8(o,n.getContext(s),i)),i}function X8(e,t,n){const r=o6(e),i=e.value;Object.entries(r).forEach(([a,s])=>{X8(s,i.component?t?t.children.getContext(a):null:t,n)}),n.canDeactivateChecks.push(new Ap(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function Q8(e){return"function"==typeof e}function CW(e){return e instanceof bp||"EmptyError"===e?.name}const Np=Symbol("INITIAL_VALUE");function l6(){return wi(e=>Bx(e.map(t=>t.pipe(tt(1),function LHe(...e){const t=ff(e);return On((n,r)=>{(t?Ux(e,n,t):Ux(e,n)).subscribe(r)})}(Np)))).pipe(Mt(t=>{for(const n of t)if(!0!==n){if(n===Np)return Np;if(!1===n||n instanceof a6)return n}return!0}),Js(t=>t!==Np),tt(1)))}function bW(e){return function K5e(...e){return aI(e)}(I1(t=>{if(C4(t))throw pW(0,t)}),Mt(t=>!0===t))}class kp{constructor(t){this.segmentGroup=t||null}}class MW{constructor(t){this.urlTree=t}}function u6(e){return I8(new kp(e))}function _W(e){return I8(new MW(e))}class sEe{constructor(t,n){this.urlSerializer=t,this.urlTree=n}noMatchError(t){return new ie(4002,!1)}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ce(r);if(i.numberOfChildren>1||!i.children[Ke])return I8(new ie(4e3,!1));i=i.children[Ke]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreateUrlTree(t,n,r,i){const a=this.createSegmentGroup(t,n.root,r,i);return new a6(a,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return Object.entries(t).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const o=a.substring(1);r[i]=n[o]}else r[i]=a}),r}createSegmentGroup(t,n,r,i){const a=this.createSegments(t,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([o,c])=>{s[o]=this.createSegmentGroup(t,c,r,i)}),new Ft(a,s)}createSegments(t,n,r,i){return n.map(a=>a.path.startsWith(":")?this.findPosParam(t,a,i):this.findOrReturn(a,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new ie(4001,!1);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}const oz={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function oEe(e,t,n,r,i){const a=cz(e,t,n);return a.matched?(r=function DSe(e,t){return e.providers&&!e._injector&&(e._injector=U_(e.providers,t,`Route: ${e.path}`)),e._injector??t}(t,r),function rEe(e,t,n,r){const i=t.canMatch;return i&&0!==i.length?Ce(i.map(s=>{const o=c6(s,e);return vc(function GSe(e){return e&&Q8(e.canMatch)}(o)?o.canMatch(t,n):e.runInContext(()=>o(t,n)))})).pipe(l6(),bW()):Ce(!0)}(r,t,n).pipe(Mt(s=>!0===s?a:{...oz}))):Ce(a)}function cz(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...oz}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(t.matcher||OHe)(n,e,t);if(!i)return{...oz};const a={};Object.entries(i.posParams??{}).forEach(([o,c])=>{a[o]=c.path});const s=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function wW(e,t,n,r){return n.length>0&&function uEe(e,t,n){return n.some(r=>Tp(e,t,r)&&Fi(r)!==Ke)}(e,n,r)?{segmentGroup:new Ft(t,lEe(r,new Ft(n,e.children))),slicedSegments:[]}:0===n.length&&function fEe(e,t,n){return n.some(r=>Tp(e,t,r))}(e,n,r)?{segmentGroup:new Ft(e.segments,cEe(e,0,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Ft(e.segments,e.children),slicedSegments:n}}function cEe(e,t,n,r,i){const a={};for(const s of r)if(Tp(e,n,s)&&!i[Fi(s)]){const o=new Ft([],{});a[Fi(s)]=o}return{...i,...a}}function lEe(e,t){const n={};n[Ke]=t;for(const r of e)if(""===r.path&&Fi(r)!==Ke){const i=new Ft([],{});n[Fi(r)]=i}return n}function Tp(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}class mEe{constructor(t,n,r,i,a,s,o){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=s,this.urlSerializer=o,this.allowRedirects=!0,this.applyRedirects=new sEe(this.urlSerializer,this.urlTree)}noMatchError(t){return new ie(4002,!1)}recognize(){const t=wW(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Ke).pipe(v4(n=>{if(n instanceof MW)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof kp?this.noMatchError(n):n}),Mt(n=>{const r=new Dp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ke,this.rootComponentType,null,{}),i=new io(r,n),a=new fW("",i),s=function aSe(e,t,n=null,r=null){return JG(KG(e),t,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(a._root),{state:a,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,Ke).pipe(v4(r=>{throw r instanceof kp?this.noMatchError(r):r}))}inheritParamsAndData(t){const n=t.value,r=uW(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0)}processChildren(t,n,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return Pn(i).pipe(Y0(a=>{const s=r.children[a],o=function kSe(e,t){const n=e.filter(r=>Fi(r)===t);return n.push(...e.filter(r=>Fi(r)!==t)),n}(n,a);return this.processSegmentGroup(t,o,s,a)}),function kHe(e,t){return On(function NHe(e,t,n,r,i){return(a,s)=>{let o=n,c=t,l=0;a.subscribe(Tn(s,u=>{const f=l++;c=o?e(c,u,f):(o=!0,u),r&&s.next(c)},i&&(()=>{o&&s.next(c),s.complete()})))}}(e,t,arguments.length>=2,!0))}((a,s)=>(a.push(...s),a)),Mp(null),function THe(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Js((i,a)=>e(i,a,r)):Wo,qx(1),n?Mp(t):OG(()=>new bp))}(),v1(a=>{if(null===a)return u6(r);const s=xW(a);return function gEe(e){e.sort((t,n)=>t.value.outlet===Ke?-1:n.value.outlet===Ke?1:t.value.outlet.localeCompare(n.value.outlet))}(s),Ce(s)}))}processSegment(t,n,r,i,a,s){return Pn(n).pipe(Y0(o=>this.processSegmentAgainstRoute(o._injector??t,n,o,r,i,a,s).pipe(v4(c=>{if(c instanceof kp)return Ce(null);throw c}))),g4(o=>!!o),v4(o=>{if(CW(o))return function hEe(e,t,n){return 0===t.length&&!e.children[n]}(r,i,a)?Ce([]):u6(r);throw o}))}processSegmentAgainstRoute(t,n,r,i,a,s,o){return function dEe(e,t,n,r){return!!(Fi(e)===r||r!==Ke&&Tp(t,n,e))&&("**"===e.path||cz(t,e,n).matched)}(r,i,a,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,i,r,a,s,o):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,a,s):u6(i):u6(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,a,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,a,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?_W(a):this.applyRedirects.lineralizeSegments(r,a).pipe(v1(s=>{const o=new Ft(s,{});return this.processSegment(t,n,o,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,a,s){const{matched:o,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=cz(n,i,a);if(!o)return u6(n);const f=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return i.redirectTo.startsWith("/")?_W(f):this.applyRedirects.lineralizeSegments(i,f).pipe(v1(d=>this.processSegment(t,r,n,d.concat(l),s,!1)))}matchSegmentAgainstRoute(t,n,r,i,a,s){let o;if("**"===r.path){const c=i.length>0?$G(i).parameters:{};o=Ce({snapshot:new Dp(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zW(r),Fi(r),r.component??r._loadedComponent??null,r,HW(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else o=oEe(n,r,i,t).pipe(Mt(({matched:c,consumedSegments:l,remainingSegments:u,parameters:f})=>c?{snapshot:new Dp(l,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zW(r),Fi(r),r.component??r._loadedComponent??null,r,HW(r)),consumedSegments:l,remainingSegments:u}:null));return o.pipe(wi(c=>null===c?u6(n):this.getChildConfig(t=r._injector??t,r,i).pipe(wi(({routes:l})=>{const u=r._loadedInjector??t,{snapshot:f,consumedSegments:d,remainingSegments:h}=c,{segmentGroup:p,slicedSegments:m}=wW(n,d,h,l);if(0===m.length&&p.hasChildren())return this.processChildren(u,l,p).pipe(Mt(v=>null===v?null:[new io(f,v)]));if(0===l.length&&0===m.length)return Ce([new io(f,[])]);const g=Fi(r)===a;return this.processSegment(u,l,p,m,g?Ke:a,!0).pipe(Mt(v=>[new io(f,v)]))}))))}getChildConfig(t,n,r){return n.children?Ce({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?Ce({routes:n._loadedRoutes,injector:n._loadedInjector}):function nEe(e,t,n,r){const i=t.canLoad;return void 0===i||0===i.length?Ce(!0):Ce(i.map(s=>{const o=c6(s,e);return vc(function BSe(e){return e&&Q8(e.canLoad)}(o)?o.canLoad(t,n):e.runInContext(()=>o(t,n)))})).pipe(l6(),bW())}(t,n,r).pipe(v1(i=>i?this.configLoader.loadChildren(t,n).pipe(I1(a=>{n._loadedRoutes=a.routes,n._loadedInjector=a.injector})):function aEe(e){return I8(mW(!1,3))}())):Ce({routes:[],injector:t})}}function vEe(e){const t=e.value.routeConfig;return t&&""===t.path}function xW(e){const t=[],n=new Set;for(const r of e){if(!vEe(r)){t.push(r);continue}const i=t.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=xW(r.children);t.push(new io(r.value,i))}return t.filter(r=>!n.has(r))}function zW(e){return e.data||{}}function HW(e){return e.resolve||{}}function SW(e){return"string"==typeof e.title||null===e.title}function lz(e){return wi(t=>{const n=e(t);return n?Pn(n).pipe(Mt(()=>t)):Ce(t)})}const f6=new Me("ROUTES");let uz=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=be($B)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Ce(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=vc(n.loadComponent()).pipe(Mt(EW),I1(a=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=a}),m8(()=>{this.componentLoaders.delete(n)})),i=new RG(r,()=>new _i).pipe(jx());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ce({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=function xEe(e,t,n,r){return vc(e.loadChildren()).pipe(Mt(EW),v1(i=>i instanceof W$||Array.isArray(i)?Ce(i):Pn(t.compileModuleAsync(i))),Mt(i=>{r&&r(e);let a,s,o=!1;return Array.isArray(i)?(s=i,!0):(a=i.create(n).injector,s=a.get(f6,[],{optional:!0,self:!0}).flat()),{routes:s.map(sz),injector:a}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(m8(()=>{this.childrenLoaders.delete(r)})),s=new RG(a,()=>new _i).pipe(jx());return this.childrenLoaders.set(r,s),s}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function EW(e){return function zEe(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let Ip=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new _i,this.transitionAbortSubject=new _i,this.configLoader=be(uz),this.environmentInjector=be(mr),this.urlSerializer=be(O8),this.rootContexts=be(q8),this.inputBindingEnabled=null!==be(Lp,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ce(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new vSe(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new gSe(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new E2({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:U8,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Js(a=>0!==a.id),Mt(a=>({...a,extractedUrl:n.urlHandlingStrategy.extract(a.rawUrl)})),wi(a=>{this.currentTransition=a;let s=!1,o=!1;return Ce(a).pipe(I1(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),wi(c=>{const l=c.currentBrowserUrl.toString(),u=!n.navigated||c.extractedUrl.toString()!==l||l!==c.currentUrlTree.toString();if(!u&&"reload"!==(c.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const d="";return this.events.next(new s6(c.id,this.urlSerializer.serialize(c.rawUrl),d,0)),c.resolve(null),Ma}if(n.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Ce(c).pipe(wi(d=>{const h=this.transitions?.getValue();return this.events.next(new Ep(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?Ma:Promise.resolve(d)}),function yEe(e,t,n,r,i,a){return v1(s=>function pEe(e,t,n,r,i,a,s="emptyOnly"){return new mEe(e,t,n,r,i,s,a).recognize()}(e,t,n,r,s.extractedUrl,i,a).pipe(Mt(({state:o,tree:c})=>({...s,targetSnapshot:o,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),I1(d=>{a.targetSnapshot=d.targetSnapshot,a.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects};const h=new aW(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(u&&n.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:d,extractedUrl:h,source:p,restoredState:m,extras:g}=c,v=new Ep(d,this.urlSerializer.serialize(h),p,m);this.events.next(v);const y=lW(0,this.rootComponentType).snapshot;return this.currentTransition=a={...c,targetSnapshot:y,urlAfterRedirects:h,extras:{...g,skipLocationChange:!1,replaceUrl:!1}},Ce(a)}{const d="";return this.events.next(new s6(c.id,this.urlSerializer.serialize(c.extractedUrl),d,1)),c.resolve(null),Ma}}),I1(c=>{const l=new dSe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Mt(c=>(this.currentTransition=a={...c,guards:FSe(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},a)),function YSe(e,t){return v1(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:s}}=n;return 0===s.length&&0===a.length?Ce({...n,guardsResult:!0}):function XSe(e,t,n,r){return Pn(e).pipe(v1(i=>function tEe(e,t,n,r,i){const a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return a&&0!==a.length?Ce(a.map(o=>{const c=W8(t)??i,l=c6(o,c);return vc(function qSe(e){return e&&Q8(e.canDeactivate)}(l)?l.canDeactivate(e,t,n,r):c.runInContext(()=>l(e,t,n,r))).pipe(g4())})).pipe(l6()):Ce(!0)}(i.component,i.route,n,t,r)),g4(i=>!0!==i,!0))}(s,r,i,e).pipe(v1(o=>o&&function $Se(e){return"boolean"==typeof e}(o)?function QSe(e,t,n,r){return Pn(t).pipe(Y0(i=>Ux(function KSe(e,t){return null!==e&&t&&t(new ySe(e)),Ce(!0)}(i.route.parent,r),function ZSe(e,t){return null!==e&&t&&t(new bSe(e)),Ce(!0)}(i.route,r),function eEe(e,t,n){const r=t[t.length-1],a=t.slice(0,t.length-1).reverse().map(s=>function RSe(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(s)).filter(s=>null!==s).map(s=>FG(()=>Ce(s.guards.map(c=>{const l=W8(s.node)??n,u=c6(c,l);return vc(function jSe(e){return e&&Q8(e.canActivateChild)}(u)?u.canActivateChild(r,e):l.runInContext(()=>u(r,e))).pipe(g4())})).pipe(l6())));return Ce(a).pipe(l6())}(e,i.path,n),function JSe(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Ce(!0);const i=r.map(a=>FG(()=>{const s=W8(t)??n,o=c6(a,s);return vc(function USe(e){return e&&Q8(e.canActivate)}(o)?o.canActivate(t,e):s.runInContext(()=>o(t,e))).pipe(g4())}));return Ce(i).pipe(l6())}(e,i.route,n))),g4(i=>!0!==i,!0))}(r,a,e,t):Ce(o)),Mt(o=>({...n,guardsResult:o})))})}(this.environmentInjector,c=>this.events.next(c)),I1(c=>{if(a.guardsResult=c.guardsResult,C4(c.guardsResult))throw pW(0,c.guardsResult);const l=new hSe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Js(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),lz(c=>{if(c.guards.canActivateChecks.length)return Ce(c).pipe(I1(l=>{const u=new pSe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),wi(l=>{let u=!1;return Ce(l).pipe(function CEe(e,t){return v1(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Ce(n);let a=0;return Pn(i).pipe(Y0(s=>function bEe(e,t,n,r){const i=e.routeConfig,a=e._resolve;return void 0!==i?.title&&!SW(i)&&(a[F8]=i.title),function MEe(e,t,n,r){const i=function _Ee(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return Ce({});const a={};return Pn(i).pipe(v1(s=>function wEe(e,t,n,r){const i=W8(t)??r,a=c6(e,i);return vc(a.resolve?a.resolve(t,n):i.runInContext(()=>a(t,n)))}(e[s],t,n,r).pipe(g4(),I1(o=>{a[s]=o}))),qx(1),function IHe(e){return Mt(()=>e)}(a),v4(s=>CW(s)?Ma:I8(s)))}(a,e,t,r).pipe(Mt(s=>(e._resolvedData=s,e.data=uW(e,n).resolve,i&&SW(i)&&(e.data[F8]=i.title),null)))}(s.route,r,e,t)),I1(()=>a++),qx(1),v1(s=>a===i.length?Ce(n):Ma))})}(n.paramsInheritanceStrategy,this.environmentInjector),I1({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",2)}}))}),I1(l=>{const u=new mSe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),lz(c=>{const l=u=>{const f=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(u.routeConfig).pipe(I1(d=>{u.component=d}),Mt(()=>{})));for(const d of u.children)f.push(...l(d));return f};return Bx(l(c.targetSnapshot.root)).pipe(Mp(),tt(1))}),lz(()=>this.afterPreactivation()),Mt(c=>{const l=function HSe(e,t,n){const r=G8(e,t._root,n?n._root:void 0);return new cW(r,t)}(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=a={...c,targetRouterState:l},a}),I1(()=>{this.events.next(new Zx)}),((e,t,n,r)=>Mt(i=>(new ISe(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)))(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),tt(1),I1({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new yc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),n.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),function FHe(e){return On((t,n)=>{cr(e).subscribe(Tn(n,()=>n.complete(),vb)),!n.closed&&t.subscribe(n)})}(this.transitionAbortSubject.pipe(I1(c=>{throw c}))),m8(()=>{s||o||this.cancelNavigationTransition(a,"",1),this.currentNavigation?.id===a.id&&(this.currentNavigation=null)}),v4(c=>{if(o=!0,gW(c))this.events.next(new j8(a.id,this.urlSerializer.serialize(a.extractedUrl),c.message,c.cancellationCode)),function VSe(e){return gW(e)&&C4(e.url)}(c)?this.events.next(new Kx(c.url)):a.resolve(!1);else{this.events.next(new Vp(a.id,this.urlSerializer.serialize(a.extractedUrl),c,a.targetSnapshot??void 0));try{a.resolve(n.errorHandler(c))}catch(l){a.reject(l)}}return Ma}))}))}cancelNavigationTransition(n,r,i){const a=new j8(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(a),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function VW(e){return e!==U8}let DW=(()=>{class e{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Ke);return r}getResolvedTitleForRoute(n){return n.data[F8]}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:function(){return be(HEe)},providedIn:"root"})}return e})(),HEe=(()=>{class e extends DW{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||e)(ze(lj))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),SEe=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:function(){return be(VEe)},providedIn:"root"})}return e})();class EEe{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}let VEe=(()=>{class e extends EEe{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=_1(e)))(i||e)}}();static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Fp=new Me("",{providedIn:"root",factory:()=>({})});let DEe=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:function(){return be(LEe)},providedIn:"root"})}return e})(),LEe=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Z8=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Z8||{});function LW(e,t){e.events.pipe(Js(n=>n instanceof yc||n instanceof j8||n instanceof Vp||n instanceof s6),Mt(n=>n instanceof yc||n instanceof s6?Z8.COMPLETE:n instanceof j8&&(0===n.code||1===n.code)?Z8.REDIRECTING:Z8.FAILED),Js(n=>n!==Z8.REDIRECTING),tt(1)).subscribe(()=>{t()})}function AEe(e){throw e}function NEe(e,t,n){return t.parse("/")}const kEe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TEe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let mn=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=be(PB),this.isNgZoneEnabled=!1,this._events=new _i,this.options=be(Fp,{optional:!0})||{},this.pendingTasks=be(v9),this.errorHandler=this.options.errorHandler||AEe,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||NEe,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=be(DEe),this.routeReuseStrategy=be(SEe),this.titleStrategy=be(DW),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=be(f6,{optional:!0})?.flat()??[],this.navigationTransitions=be(Ip),this.urlSerializer=be(O8),this.location=be(Mw),this.componentInputBindingEnabled=!!be(Lp,{optional:!0}),this.eventsSubscription=new K1,this.isNgZoneEnabled=be(Yt)instanceof Yt&&Yt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new a6,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=lW(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(AW(r)&&this._events.next(r));if(r instanceof Ep)VW(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof s6)this.rawUrlTree=i.rawUrl;else if(r instanceof aW){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const a=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(a,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof Zx)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof j8)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof Kx){const a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),s={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||VW(i.source)};this.scheduleNavigation(a,U8,null,s,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Vp&&this.restoreHistory(i,!0),r instanceof yc&&(this.navigated=!0),AW(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),U8,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const a={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(a.state=c)}const o=this.parseUrl(n);this.scheduleNavigation(o,r,s,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(sz),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:a,fragment:s,queryParamsHandling:o,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s;let f,u=null;switch(o){case"merge":u={...this.currentUrlTree.queryParams,...a};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=a||null}null!==u&&(u=this.removeEmptyProps(u));try{f=KG(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),f=this.currentUrlTree.root}return JG(f,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=C4(n)?n:this.parseUrl(n),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,U8,null,r)}navigate(n,r={skipLocationChange:!1}){return function IEe(e){for(let t=0;t<e.length;t++)if(null==e[t])throw new ie(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...kEe}:!1===r?{...TEe}:r,C4(n))return UG(this.currentUrlTree,n,i);const a=this.parseUrl(n);return UG(this.currentUrlTree,a,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const a=n[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(n,r,i,a,s){if(this.disposed)return Promise.resolve(!1);let o,c,l;s?(o=s.resolve,c=s.reject,l=s.promise):l=new Promise((f,d)=>{o=f,c=d});const u=this.pendingTasks.add();return LW(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:a,resolve:o,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",a)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-this.browserPageId;0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function AW(e){return!(e instanceof Zx||e instanceof Kx)}let Ri=(()=>{class e{constructor(n,r,i,a,s,o){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=s,this.locationStrategy=o,this.href=null,this.commands=null,this.onChanges=new _i,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof yc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,a,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||a||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function YR(e,t,n){return function ape(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?WR:GR}(t,n)(e)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,n,r):i.removeAttribute(a,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||e)(q(mn),q(w1),function vh(e){return function _he(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const a=n[i];if(OI(a))break;if(0===a)i+=2;else if("number"==typeof a)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(a===t)return n[i+1];i+=2}}}return null}(M1(),e)}("tabindex"),q(La),q(k2),q(s4))};static#t=this.\u0275dir=Be({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Ae("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Ei("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",G0],skipLocationChange:["skipLocationChange","skipLocationChange",G0],replaceUrl:["replaceUrl","replaceUrl",G0],routerLink:"routerLink"},standalone:!0,features:[oP,t2]})}return e})(),NW=(()=>{class e{get isActive(){return this._isActive}constructor(n,r,i,a,s){this.router=n,this.element=r,this.renderer=i,this.cdr=a,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Cn,this.routerEventsSubscription=n.events.subscribe(o=>{o instanceof yc&&this.update()})}ngAfterContentInit(){Ce(this.links.changes,Ce(null)).pipe(Zl()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Pn(n).pipe(Zl()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){const r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const n=this.hasActiveLinks();this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(n))})}isLinkActive(n){const r=function FEe(e){return!!e.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&n.isActive(i.urlTree,r)}hasActiveLinks(){const n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static#e=this.\u0275fac=function(r){return new(r||e)(q(mn),q(k2),q(La),q(M9),q(Ri,8))};static#t=this.\u0275dir=Be({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,a){if(1&r&&CB(a,Ri,5),2&r){let s;yB(s=function bB(){return function uCe(e,t){return e[wa].queries[t].queryList}(ee(),DF())}())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[t2]})}return e})();class kW{}let REe=(()=>{class e{constructor(n,r,i,a,s){this.router=n,this.injector=i,this.preloadingStrategy=a,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Js(n=>n instanceof yc),Y0(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=U_(a.providers,n,`Route: ${a.path}`));const s=a._injector??n,o=a._loadedInjector??s;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(s,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(o,a.children??a._loadedRoutes))}return Pn(i).pipe(Zl())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):Ce(null);const a=i.pipe(v1(s=>null===s?Ce(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?Pn([a,this.loader.loadComponent(r)]).pipe(Zl()):a})}static#e=this.\u0275fac=function(r){return new(r||e)(ze(mn),ze($B),ze(mr),ze(kW),ze(uz))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const fz=new Me("");let TW=(()=>{class e{constructor(n,r,i,a,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Ep?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof yc?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof s6&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof sW&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new sW(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function kO(){throw new Error("invalid")}()};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac})}return e})();function ao(e,t){return{\u0275kind:e,\u0275providers:t}}function FW(){const e=be(T2);return t=>{const n=e.get(q0);if(t!==n.components[0])return;const r=e.get(mn),i=e.get(RW);1===e.get(dz)&&r.initialNavigation(),e.get(OW,null,at.Optional)?.setUpPreloading(),e.get(fz,null,at.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const RW=new Me("",{factory:()=>new _i}),dz=new Me("",{providedIn:"root",factory:()=>1}),OW=new Me("");function BEe(e){return ao(0,[{provide:OW,useExisting:REe},{provide:kW,useExisting:e}])}const PW=new Me("ROUTER_FORROOT_GUARD"),jEe=[Mw,{provide:O8,useClass:Gx},mn,q8,{provide:w1,useFactory:function IW(e){return e.routerState.root},deps:[mn]},uz,[]];function qEe(){return new YB("Router",mn)}let $W=(()=>{class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[jEe,[],{provide:f6,multi:!0,useValue:n},{provide:PW,useFactory:XEe,deps:[[mn,new bh,new Mh]]},{provide:Fp,useValue:r||{}},r?.useHash?{provide:s4,useClass:qbe}:{provide:s4,useClass:xU},{provide:fz,useFactory:()=>{const e=be(s_e),t=be(Yt),n=be(Fp),r=be(Ip),i=be(O8);return n.scrollOffset&&e.setOffset(n.scrollOffset),new TW(i,r,e,t,n)}},r?.preloadingStrategy?BEe(r.preloadingStrategy).\u0275providers:[],{provide:YB,multi:!0,useFactory:qEe},r?.initialNavigation?QEe(r):[],r?.bindToComponentInputs?ao(8,[hW,{provide:Lp,useExisting:hW}]).\u0275providers:[],[{provide:BW,useFactory:FW},{provide:fw,multi:!0,useExisting:BW}]]}}static forChild(n){return{ngModule:e,providers:[{provide:f6,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||e)(ze(PW,8))};static#t=this.\u0275mod=jr({type:e});static#n=this.\u0275inj=ur({})}return e})();function XEe(e){return"guarded"}function QEe(e){return["disabled"===e.initialNavigation?ao(3,[{provide:rw,multi:!0,useFactory:()=>{const t=be(mn);return()=>{t.setUpLocationChangeListener()}}},{provide:dz,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?ao(2,[{provide:dz,useValue:0},{provide:rw,multi:!0,deps:[T2],useFactory:t=>{const n=t.get(Ube,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=t.get(mn),a=t.get(RW);LW(i,()=>{r(!0)}),t.get(Ip).afterPreactivation=()=>(r(!0),a.closed?Ce(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const BW=new Me("");class Rp{constructor(t){Object.assign(this,t)}toString(){return JSON.stringify(this)}get ViewUrl(){throw new Error("ViewUrl not implemented")}get EditUrl(){throw new Error("EditUrl not implemented")}get DeleteUrl(){throw new Error("DeleteUrl not implemented")}}class ja extends Rp{constructor(t){super(t)}get ViewUrl(){return["/goals",this.Id]}get EditUrl(){return["/goals",this.Id,"edit"]}get DeleteUrl(){return["/goals",this.Id,"delete"]}}let d6=(()=>{class e{constructor(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Op="customServerUrl";let hz=(()=>{class e extends d6{constructor(){super()}getCustomServerUrl(){return localStorage.getItem(Op)}setCustomServerUrl(n){return tn.endpoint=n,localStorage.setItem(Op,n)}clearCustomServerUrl(){localStorage.removeItem(Op)}isCustomServerUrlSet(){return null!==this.getCustomServerUrl()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const tn={production:!0,endpoint:localStorage.getItem(Op)??""};function gn(e){return tn.endpoint+e}let qa=(()=>{class e extends d6{constructor(n){super(),this.http=n}listGoals(){if(tn.production){const n=gn("/goals");return this.http.get(n)}return console.debug("/goals"),Ce({data:[{Id:"1",Name:"Fake Goal",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},{Id:"1",Name:"Fake Goal",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},{Id:"1",Name:"Fake Goal",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},{Id:"1",Name:"Fake Goal",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},{Id:"1",Name:"Fake Goal",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1}],message:"success"})}findGoals(n){if(tn.production){const r=gn(`/goals?q=${n}`);return this.http.get(r)}return console.debug(n),Ce({data:[{Id:"1",Name:"Fake Goal",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},{Id:"1",Name:"Fake Goal",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},{Id:"1",Name:"Fake Goal",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},{Id:"1",Name:"Fake Goal",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},{Id:"1",Name:"Fake Goal",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1}],message:"success"})}getGoal(n){if(tn.production){const r=gn(`/goals/${n}`);return this.http.get(r)}return console.debug(n),Ce({data:{Id:"1",Name:"Fake Goal",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},message:"success"})}createGoal(n){if(tn.production){const r=gn("/goals");return this.http.post(r,n)}return console.debug(n),Ce({data:{Id:"1",Name:"Fake Goal",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},message:"success"})}updateGoal(n){if(tn.production){const r=gn(`/goals/${n.Id}`);return this.http.put(r,n)}return console.debug(n),Ce({data:{Id:"1",Name:"Fake Goal",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},message:"success"})}deleteGoal(n){if(tn.production){const r=gn(`/goals/${n}`);return this.http.delete(r)}return console.debug(n),Ce(void 0)}getGoalTasks(n){if(tn.production){const r=gn(`/goals/${n}/tasks`);return this.http.get(r)}return console.debug(n),Ce({data:[{Id:"1",Name:"Fake Task",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},{Id:"1",Name:"Fake Task",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},{Id:"1",Name:"Fake Task",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},{Id:"1",Name:"Fake Task",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},{Id:"1",Name:"Fake Task",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1}],message:"success"})}getGoalHabits(n){if(tn.production){const r=gn(`/goals/${n}/habits`);return this.http.get(r)}return console.debug(n),Ce({data:[{Id:"1",Name:"Fake Habit",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",CompletedDates:["2020-01-01"]},{Id:"1",Name:"Fake Habit",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",CompletedDates:["2020-01-01"]},{Id:"1",Name:"Fake Habit",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",CompletedDates:["2020-01-01"]},{Id:"1",Name:"Fake Habit",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",CompletedDates:["2020-01-01"]},{Id:"1",Name:"Fake Habit",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",CompletedDates:["2020-01-01"]}],message:"success"})}static#e=this.\u0275fac=function(r){return new(r||e)(ze(v8))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),UW=(()=>{class e{constructor(n,r,i){this.api=n,this.route=r,this.router=i}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");this.api.getGoal(n).pipe(tt(1)).subscribe(r=>{this.model=new ja(r.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteGoal(this.model?.Id).pipe(tt(1)).subscribe(()=>this.router.navigateByUrl("/goals"))}static#e=this.\u0275fac=function(r){return new(r||e)(q(qa),q(w1),q(mn))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-delete-page"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(r,i){1&r&&(I(0,"h1"),P(1),F(),I(2,"p"),P(3," Deleting this model will make it unrecoverable.\n"),F(),I(4,"button",0),Ae("click",function(){return i.deleteModel()}),P(5),F()),2&r&&(X(1),Qe("Delete ",null==i.model?null:i.model.Name,"?"),X(4),Qe(" Delete ",null==i.model?null:i.model.Name,"\n"))},encapsulation:2})}return e})();class Cc extends Rp{constructor(t){super(t)}get ViewUrl(){return["/habits",this.Id]}get EditUrl(){return["/habits",this.Id,"edit"]}get DeleteUrl(){return["/habits",this.Id,"delete"]}get FormattedCompletedDates(){if(this.AntiHabit){const t=new Date,r=[];for(let i=new Date(this.CreatedAt);i<=t;i.setDate(i.getDate()+1)){const a=i.toLocaleDateString().split("T")[0];(!this.CompletedDates||!this.CompletedDates.includes(a))&&r.push(a)}return r}return this.CompletedDates?.map(t=>new Date(t).toLocaleDateString().split("T")[0])}}class b4 extends Rp{constructor(t){super(t)}get ViewUrl(){return["/tasks",this.Id]}get EditUrl(){return["/tasks",this.Id,"edit"]}get DeleteUrl(){return["/tasks",this.Id,"delete"]}get ImportanceHuman(){const t={1:"Low",2:"Low-Medium",3:"Medium",4:"Medium-High",5:"High"};return this.Importance in t?t[this.Importance]:"Unknown Importance"}get isOverdue(){return new Date>new Date(this.CompleteBy)}}function KEe(e,t){if(1&e&&(I(0,"li")(1,"a",4),P(2),F()()),2&e){const n=t.$implicit;X(1),de("routerLink",n.ViewUrl),X(1),Qe(" ",n.Name," ")}}function JEe(e,t){if(1&e&&(I(0,"li")(1,"a",4),P(2),F()()),2&e){const n=t.$implicit;X(1),de("routerLink",n.ViewUrl),X(1),Qe(" ",n.Name," ")}}let jW=(()=>{class e{constructor(n,r){this.api=n,this.route=r}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");this.api.getGoal(n).pipe(tt(1)).subscribe(r=>{this.model=new ja(r.data),this.api.getGoalHabits(n).pipe(tt(1)).subscribe(i=>{this.associatedHabits=i.data.map(a=>new Cc(a))}),this.api.getGoalTasks(n).pipe(tt(1)).subscribe(i=>{this.associatedTasks=i.data.map(a=>new b4(a))})})}static#e=this.\u0275fac=function(r){return new(r||e)(q(qa),q(w1))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-goal-page"]],decls:20,vars:11,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right",3,"routerLink"],[1,"uk-button-danger","uk-button",3,"routerLink"],[1,"uk-text-default"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(r,i){1&r&&(I(0,"h1"),P(1),F(),I(2,"button",0),P(3),F(),I(4,"button",1),P(5),F(),I(6,"pre",2),P(7),F(),Un(8,"hr"),I(9,"p"),P(10),Ia(11,"date"),F(),I(12,"p"),P(13,"Associated Habits:"),F(),I(14,"ul"),It(15,KEe,3,2,"li",3),F(),I(16,"p"),P(17,"Associated Tasks:"),F(),I(18,"ul"),It(19,JEe,3,2,"li",3),F()),2&r&&(X(1),Qe("Goal: ",null==i.model?null:i.model.Name,""),X(1),de("routerLink",null==i.model?null:i.model.EditUrl),X(1),Qe(" Edit: ",null==i.model?null:i.model.Name,"\n"),X(1),de("routerLink",null==i.model?null:i.model.DeleteUrl),X(1),Qe(" Delete: ",null==i.model?null:i.model.Name,"\n"),X(2),Qe("    ",null==i.model?null:i.model.Description,"\n"),X(3),Qe(" Complete By: ",Fa(11,9,null==i.model?null:i.model.CompleteBy),"\n"),X(5),de("ngForOf",i.associatedHabits),X(4),de("ngForOf",i.associatedTasks))},dependencies:[Ks,Ri,o4],encapsulation:2})}return e})();function eVe(e,t){if(1&e&&(I2(0),I(1,"p",9),P(2),F(),F2()),2&e){const n=Kt().$implicit;X(2),Qe(" ",n.Description," ")}}const tVe=function(e){return["/goals",e,"delete"]};function nVe(e,t){if(1&e){const n=t4();I(0,"tr")(1,"td")(2,"input",5),Ae("ngModelChange",function(i){return Sa(Ha(n).$implicit.Completed=i)})("change",function(){const a=Ha(n).$implicit;return Sa(Kt().updateGoal(a))}),F()(),I(3,"td"),P(4),F(),I(5,"td",2),It(6,eVe,3,1,"ng-container",6),F(),I(7,"td")(8,"a",7),P(9,"View"),F(),I(10,"a",8),P(11,"Delete"),F()()()}if(2&e){const n=t.$implicit;Kt();const r=qs(20);X(2),de("ngModel",n.Completed),X(2),R2(n.Name),X(2),de("ngIf",n.Description)("ngIfElse",r),X(2),de("routerLink",n.ViewUrl),X(2),de("routerLink",h9(6,tVe,n.Id))}}function rVe(e,t){1&e&&(I(0,"i"),P(1,"No description provided."),F())}let qW=(()=>{class e{constructor(n){this.api=n,this.goals=[]}ngOnInit(){this.api.listGoals().pipe(tt(1)).subscribe(n=>{this.goals=n.data.map(r=>new ja(r))})}updateGoal(n){this.api.updateGoal(n).pipe(tt(1)).subscribe(r=>{n=new ja(r.data)})}static#e=this.\u0275fac=function(r){return new(r||e)(q(qa))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-goals-page"]],decls:21,vars:1,consts:[["routerLink","/goals/new",1,"uk-button","uk-button-default"],[1,"uk-table","uk-table-striped"],[1,"hide-in-mobile"],[4,"ngFor","ngForOf"],["defaultDescription",""],["type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange","change"],[4,"ngIf","ngIfElse"],[1,"uk-button-small","uk-button-primary","uk-margin-small-right",3,"routerLink"],[1,"uk-button-small","uk-button-danger",3,"routerLink"],[1,"description"]],template:function(r,i){1&r&&(I(0,"h1"),P(1,"Goals"),F(),I(2,"section")(3,"nav")(4,"a",0),P(5,"New Goal"),F()()(),I(6,"section")(7,"table",1)(8,"thead")(9,"tr"),Un(10,"th"),I(11,"th"),P(12,"Name"),F(),I(13,"th",2),P(14,"Description"),F(),I(15,"th"),P(16,"Action"),F()()(),I(17,"tbody"),It(18,nVe,12,8,"tr",3),F()()(),It(19,rVe,2,0,"ng-template",null,4,s8)),2&r&&(X(18),de("ngForOf",i.goals))},dependencies:[Ks,d8,Ri,Q0,Ti,Zr],styles:["p.description[_ngcontent-%COMP%]{text-wrap:nowrap;padding-right:10rem;width:28rem;overflow:hidden}@media screen and (max-width: 768px){.hide-in-mobile[_ngcontent-%COMP%]{display:none}}"]})}return e})(),GW=(()=>{class e{constructor(n,r){this.api=n,this.router=r,this.model={}}submitForm(){const n=new ja(this.model);n.Completed=!1,this.api.createGoal(n).pipe(tt(1)).subscribe(()=>this.router.navigateByUrl("/goals"))}updateCompleteBy(n){const r=new Date(n.target.value);this.model.CompleteBy=r.toLocaleDateString()}static#e=this.\u0275fac=function(r){return new(r||e)(q(qa),q(mn))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-new-goal-page"]],decls:15,vars:2,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(r,i){1&r&&(I(0,"h1"),P(1,"New Goal"),F(),I(2,"form",0,1)(4,"label",2),P(5,"Goal Name"),F(),I(6,"input",3),Ae("ngModelChange",function(s){return i.model.Name=s}),F(),I(7,"label",4),P(8," Goal Description "),F(),I(9,"textarea",5),Ae("ngModelChange",function(s){return i.model.Description=s}),F(),I(10,"label",6),P(11,"Complete By"),F(),I(12,"input",7),Ae("change",function(s){return i.updateCompleteBy(s)}),F(),I(13,"button",8),Ae("click",function(){return i.submitForm()}),P(14," Add New Goal "),F()()),2&r&&(X(6),de("ngModel",i.model.Name),X(3),de("ngModel",i.model.Description))},dependencies:[dc,ki,Ti,fc,Zr,Pa],encapsulation:2})}return e})(),h6=(()=>{class e extends d6{constructor(n){super(),this.http=n}getHabits(){if(tn.production){const n=gn("/habits");return this.http.get(n)}return console.debug("/habits"),Ce({data:[{Id:"1",Name:"Fake Habit",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",CompletedDates:["2020-01-01"]},{Id:"1",Name:"Fake Habit",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",CompletedDates:["2020-01-01"]},{Id:"1",Name:"Fake Habit",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",CompletedDates:["2020-01-01"]},{Id:"1",Name:"Fake Habit",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",CompletedDates:["2020-01-01"]},{Id:"1",Name:"Fake Habit",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",CompletedDates:["2020-01-01"]}],message:"success"})}getHabit(n){if(tn.production){const r=gn(`/habits/${n}`);return this.http.get(r)}return console.debug(n),Ce({data:{Id:"1",Name:"Fake Habit",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",CompletedDates:["2020-01-01"]},message:"success"})}createHabit(n){if(tn.production){const r=gn("/habits");return this.http.post(r,n)}return console.debug(n),Ce({data:{Id:"1",Name:"Fake Habit",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",CompletedDates:["2020-01-01"]},message:"success"})}updateHabit(n){if(tn.production){const r=gn(`/habits/${n.Id}`);return this.http.put(r,n)}return console.debug(n),Ce({data:{Id:"1",Name:"Fake Habit",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",CompletedDates:["2020-01-01"]},message:"success"})}deleteHabit(n){if(tn.production){const r=gn(`/habits/${n}`);return this.http.delete(r)}return console.debug(n),Ce(void 0)}static#e=this.\u0275fac=function(r){return new(r||e)(ze(v8))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),WW=(()=>{class e{constructor(n,r,i){this.api=n,this.route=r,this.router=i}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");this.api.getHabit(n).pipe(tt(1)).subscribe(r=>{this.model=new Cc(r.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteHabit(this.model?.Id).pipe(tt(1)).subscribe(()=>this.router.navigateByUrl("/"))}static#e=this.\u0275fac=function(r){return new(r||e)(q(h6),q(w1),q(mn))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-delete-habit-page"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(r,i){1&r&&(I(0,"h1"),P(1),F(),I(2,"p"),P(3," Deleting this model will make it unrecoverable.\n"),F(),I(4,"button",0),Ae("click",function(){return i.deleteModel()}),P(5),F()),2&r&&(X(1),Qe("Delete ",null==i.model?null:i.model.Name,"?"),X(4),Qe(" Delete ",null==i.model?null:i.model.Name,"\n"))},encapsulation:2})}return e})();var M4={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},Jz={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]};function Mte(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(l){return void n(l)}o.done?t(c):Promise.resolve(c).then(r,i)}function Fn(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(c){Mte(a,r,i,s,o,"next",c)}function o(c){Mte(a,r,i,s,o,"throw",c)}s(void 0)})}}const Vnt=JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v5.json","width":"container","data":{"values":[]},"mark":{"type":"rect","tooltip":true},"encoding":{"x":{"field":"date","timeUnit":"date","type":"ordinal","title":"Day","axis":{"tickCount":{"timeUnit":"day","step":1}}},"y":{"field":"date","timeUnit":"month","type":"ordinal","title":"Month","scale":{"domain":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},"color":{"field":"count","type":"quantitative","title":"Count","condition":{"test":"datum.count === 0","value":"transparent"},"legend":null},"tooltip":[{"field":"count","type":"quantitative","title":"Count"}]}}');var e,Dnt=(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])})(t,n)},function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Lnt=Object.prototype.hasOwnProperty;function nm(e,t){return Lnt.call(e,t)}function sH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)nm(e,i)&&r.push(i);return r}function _r(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function oH(e){for(var r,t=0,n=e.length;t<n;){if(!((r=e.charCodeAt(t))>=48&&r<=57))return!1;t++}return!0}function so(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function _te(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function cH(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(cH(e[t]))return!0}else if("object"==typeof e)for(var r=sH(e),i=r.length,a=0;a<i;a++)if(cH(e[r[a]]))return!0;return!1}function xte(e,t){var n=[e];for(var r in t){var i="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join("\n")}var zte=function(e){function t(n,r,i,a,s){var o=this.constructor,c=e.call(this,xte(n,{name:r,index:i,operation:a,tree:s}))||this;return c.name=r,c.index=i,c.operation=a,c.tree=s,Object.setPrototypeOf(c,o.prototype),c.message=xte(n,{name:r,index:i,operation:a,tree:s}),c}return Dnt(t,e),t}(Error),_n=zte,Ant=_r,p6={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=rm(n,this.path);r&&(r=_r(r));var i=_4(n,{op:"remove",path:this.from}).removed;return _4(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=rm(n,this.from);return _4(n,{op:"add",path:this.path,value:_r(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:n5(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Nnt={add:function(e,t,n){return oH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:p6.move,copy:p6.copy,test:p6.test,_get:p6._get};function rm(e,t){if(""==t)return e;var n={op:"_get",path:t};return _4(e,n),n.value}function _4(e,t,n,r,i,a){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===a&&(a=0),n&&("function"==typeof n?n(t,0,e,t.path):am(t,0)),""===t.path){var s={newDocument:e};if("add"===t.op)return s.newDocument=t.value,s;if("replace"===t.op)return s.newDocument=t.value,s.removed=e,s;if("move"===t.op||"copy"===t.op)return s.newDocument=rm(e,t.from),"move"===t.op&&(s.removed=e),s;if("test"===t.op){if(s.test=n5(e,t.value),!1===s.test)throw new _n("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s.newDocument=e,s}if("remove"===t.op)return s.removed=e,s.newDocument=null,s;if("_get"===t.op)return t.value=e,s;if(n)throw new _n("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return s}r||(e=_r(e));var c=(t.path||"").split("/"),l=e,u=1,f=c.length,d=void 0,h=void 0,p=void 0;for(p="function"==typeof n?n:am;;){if((h=c[u])&&-1!=h.indexOf("~")&&(h=_te(h)),i&&("__proto__"==h||"prototype"==h&&u>0&&"constructor"==c[u-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===d&&(void 0===l[h]?d=c.slice(0,u).join("/"):u==f-1&&(d=t.path),void 0!==d&&p(t,0,e,d)),u++,Array.isArray(l)){if("-"===h)h=l.length;else{if(n&&!oH(h))throw new _n("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);oH(h)&&(h=~~h)}if(u>=f){if(n&&"add"===t.op&&h>l.length)throw new _n("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);if(!1===(s=Nnt[t.op].call(t,l,h,e)).test)throw new _n("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}}else if(u>=f){if(!1===(s=p6[t.op].call(t,l,h,e)).test)throw new _n("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}if(l=l[h],n&&u<f&&(!l||"object"!=typeof l))throw new _n("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}function im(e,t,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(t))throw new _n("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=_r(e));for(var a=new Array(t.length),s=0,o=t.length;s<o;s++)a[s]=_4(e,t[s],n,!0,i,s),e=a[s].newDocument;return a.newDocument=e,a}function knt(e,t,n){var r=_4(e,t);if(!1===r.test)throw new _n("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function am(e,t,n,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new _n("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!p6[e.op])throw new _n("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new _n("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new _n('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new _n("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new _n("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&cH(e.value))throw new _n("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var i=e.path.split("/").length,a=r.split("/").length;if(i!==a+1&&i!==a)throw new _n("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new _n("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var o=Hte([{op:"_get",path:e.from,value:void 0}],n);if(o&&"OPERATION_PATH_UNRESOLVABLE"===o.name)throw new _n("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function Hte(e,t,n){try{if(!Array.isArray(e))throw new _n("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)im(_r(t),_r(e),n||!0);else{n=n||am;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof _n)return i;throw i}}function n5(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var i,a,s,n=Array.isArray(e),r=Array.isArray(t);if(n&&r){if((a=e.length)!=t.length)return!1;for(i=a;0!=i--;)if(!n5(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var o=Object.keys(e);if((a=o.length)!==Object.keys(t).length)return!1;for(i=a;0!=i--;)if(!t.hasOwnProperty(o[i]))return!1;for(i=a;0!=i--;)if(!n5(e[s=o[i]],t[s]))return!1;return!0}return e!=e&&t!=t}var lH=new WeakMap,Tnt=function e(t){this.observers=new Map,this.obj=t},Int=function e(t,n){this.callback=t,this.observer=n};function Pnt(e,t){t.unobserve()}function $nt(e,t){var r,i=function Fnt(e){return lH.get(e)}(e);if(i){var a=function Rnt(e,t){return e.observers.get(t)}(i,t);r=a&&a.observer}else i=new Tnt(e),lH.set(e,i);if(r)return r;if(r={},i.value=_r(e),t){r.callback=t,r.next=null;var s=function(){uH(r)},o=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return r.patches=[],r.object=e,r.unobserve=function(){uH(r),clearTimeout(r.next),function Ont(e,t){e.observers.delete(t.callback)}(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},i.observers.set(t,new Int(t,r)),r}function uH(e,t){void 0===t&&(t=!1);var n=lH.get(e.object);fH(n.value,e.object,e.patches,"",t),e.patches.length&&im(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function fH(e,t,n,r,i){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var a=sH(t),s=sH(e),c=!1,l=s.length-1;l>=0;l--){var f=e[u=s[l]];if(!nm(t,u)||void 0===t[u]&&void 0!==f&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+so(u),value:_r(f)}),n.push({op:"remove",path:r+"/"+so(u)}),c=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}));else{var d=t[u];"object"==typeof f&&null!=f&&"object"==typeof d&&null!=d&&Array.isArray(f)===Array.isArray(d)?fH(f,d,n,r+"/"+so(u),i):f!==d&&(i&&n.push({op:"test",path:r+"/"+so(u),value:_r(f)}),n.push({op:"replace",path:r+"/"+so(u),value:_r(d)}))}}if(c||a.length!=s.length)for(l=0;l<a.length;l++){var u;!nm(e,u=a[l])&&void 0!==t[u]&&n.push({op:"add",path:r+"/"+so(u),value:_r(t[u])})}}}function Bnt(e,t,n){void 0===n&&(n=!1);var r=[];return fH(e,t,r,"",n),r}Object.assign({},T3,bi,{JsonPatchError:zte,deepClone:_r,escapePathComponent:so,unescapePathComponent:_te});var Unt=rt(829),dH=rt.n(Unt);function $2(e,t,n){return e.fields=t||[],e.fname=n,e}function wn(e){return null==e?null:e.fname}function F1(e){return null==e?null:e.fields}function Ste(e){return 1===e.length?jnt(e[0]):qnt(e)}const jnt=e=>function(t){return t[e]},qnt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Z(e){throw Error(e)}function Ga(e){const t=[],n=e.length;let s,o,c,r=null,i=0,a="";function l(){t.push(a+e.substring(s,o)),a="",s=o+1}for(e+="",s=o=0;o<n;++o)if(c=e[o],"\\"===c)a+=e.substring(s,o++),s=o;else if(c===r)l(),r=null,i=-1;else{if(r)continue;s===i&&'"'===c||s===i&&"'"===c?(s=o+1,r=c):"."!==c||i?"["===c?(o>s&&l(),i=s=o+1):"]"===c&&(i||Z("Access path missing open bracket: "+e),i>0&&l(),i=0,s=o+1):o>s?l():s=o+1}return i&&Z("Access path missing closing bracket: "+e),r&&Z("Access path missing closing quote: "+e),o>s&&(o++,l()),t}function Kr(e,t,n){const r=Ga(e);return e=1===r.length?r[0]:e,$2((n&&n.get||Ste)(r),[e],t||e)}const r5=Kr("id"),R1=$2(e=>e,[],"identity"),bc=$2(()=>0,[],"zero"),m6=$2(()=>1,[],"one"),Jr=$2(()=>!0,[],"true"),Mc=$2(()=>!1,[],"false");function Gnt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const Ete=0,hH=1,pH=2,Vte=3,Dte=4;function mH(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gnt,r=e||Ete;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=hH&&n(t||"error","ERROR",arguments),this},warn(){return r>=pH&&n(t||"warn","WARN",arguments),this},info(){return r>=Vte&&n(t||"log","INFO",arguments),this},debug(){return r>=Dte&&n(t||"log","DEBUG",arguments),this}}}var K=Array.isArray;function ve(e){return e===Object(e)}const Lte=e=>"__proto__"!==e;function g6(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const a in i)"signals"===a?r.signals=Wnt(r.signals,i.signals):v6(r,a,i[a],"legend"===a?{layout:1}:"style"===a||null);return r},{})}function v6(e,t,n,r){if(!Lte(t))return;let i,a;if(ve(n)&&!K(n))for(i in a=ve(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[i])?v6(a,i,n[i]):Lte(i)&&(a[i]=n[i]);else e[t]=n}function Wnt(e,t){if(null==e)return t;const n={},r=[];function i(a){n[a.name]||(n[a.name]=1,r.push(a))}return t.forEach(i),e.forEach(i),r}function lt(e){return e[e.length-1]}function O1(e){return null==e||""===e?null:+e}const Ate=e=>t=>e*Math.exp(t),Nte=e=>t=>Math.log(e*t),kte=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),Tte=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,sm=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function om(e,t,n,r){const i=n(e[0]),a=n(lt(e)),s=(a-i)*t;return[r(i-s),r(a-s)]}function Ite(e,t){return om(e,t,O1,R1)}function Fte(e,t){var n=Math.sign(e[0]);return om(e,t,Nte(n),Ate(n))}function Rte(e,t,n){return om(e,t,sm(n),sm(1/n))}function Ote(e,t,n){return om(e,t,kte(n),Tte(n))}function cm(e,t,n,r,i){const a=r(e[0]),s=r(lt(e)),o=null!=t?r(t):(a+s)/2;return[i(o+(a-o)*n),i(o+(s-o)*n)]}function gH(e,t,n){return cm(e,t,n,O1,R1)}function vH(e,t,n){const r=Math.sign(e[0]);return cm(e,t,n,Nte(r),Ate(r))}function lm(e,t,n,r){return cm(e,t,n,sm(r),sm(1/r))}function yH(e,t,n,r){return cm(e,t,n,kte(r),Tte(r))}function Pte(e){return 1+~~(new Date(e).getMonth()/3)}function $te(e){return 1+~~(new Date(e).getUTCMonth()/3)}function me(e){return null!=e?K(e)?e:[e]:[]}function Bte(e,t,n){let a,r=e[0],i=e[1];return i<r&&(a=i,i=r,r=a),a=i-r,a>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-a),r+a]}function Je(e){return"function"==typeof e}const Ynt="descending";function CH(e,t,n){n=n||{},t=me(t)||[];const r=[],i=[],a={},s=n.comparator||Xnt;return me(e).forEach((o,c)=>{null!=o&&(r.push(t[c]===Ynt?-1:1),i.push(o=Je(o)?o:Kr(o,null,n)),(F1(o)||[]).forEach(l=>a[l]=1))}),0===i.length?null:$2(s(i,r),Object.keys(a))}const um=(e,t)=>(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0),Xnt=(e,t)=>1===e.length?Qnt(e[0],t[0]):Znt(e,t,e.length),Qnt=(e,t)=>function(n,r){return um(e(n),e(r))*t},Znt=(e,t,n)=>(t.push(0),function(r,i){let a,s=0,o=-1;for(;0===s&&++o<n;)a=e[o],s=um(a(r),a(i));return s*t[o]});function P1(e){return Je(e)?e:()=>e}function bH(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function et(e){for(let t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r],t)e[n]=t[n];return e}function Wa(e,t){let r,i,a,s,n=0;if(e&&(r=e.length))if(null==t){for(i=e[n];n<r&&(null==i||i!=i);i=e[++n]);for(a=s=i;n<r;++n)i=e[n],null!=i&&(i<a&&(a=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(null==i||i!=i);i=t(e[++n]));for(a=s=i;n<r;++n)i=t(e[n]),null!=i&&(i<a&&(a=i),i>s&&(s=i))}return[a,s]}function Ute(e,t){const n=e.length;let i,a,s,o,c,r=-1;if(null==t){for(;++r<n;)if(a=e[r],null!=a&&a>=a){i=s=a;break}if(r===n)return[-1,-1];for(o=c=r;++r<n;)a=e[r],null!=a&&(i>a&&(i=a,o=r),s<a&&(s=a,c=r))}else{for(;++r<n;)if(a=t(e[r],r,e),null!=a&&a>=a){i=s=a;break}if(r===n)return[-1,-1];for(o=c=r;++r<n;)a=t(e[r],r,e),null!=a&&(i>a&&(i=a,o=r),s<a&&(s=a,c=r))}return[o,c]}const Knt=Object.prototype.hasOwnProperty;function Ne(e,t){return Knt.call(e,t)}const fm={};function y6(e){let n,t={};function r(a){return Ne(t,a)&&t[a]!==fm}const i={size:0,empty:0,object:t,has:r,get:a=>r(a)?t[a]:void 0,set(a,s){return r(a)||(++i.size,t[a]===fm&&--i.empty),t[a]=s,this},delete(a){return r(a)&&(--i.size,++i.empty,t[a]=fm),this},clear(){i.size=i.empty=0,i.object=t={}},test(a){return arguments.length?(n=a,i):n},clean(){const a={};let s=0;for(const o in t){const c=t[o];c!==fm&&(!n||!n(c))&&(a[o]=c,++s)}i.size=s,i.empty=0,i.object=t=a}};return e&&Object.keys(e).forEach(a=>{i.set(a,e[a])}),i}function jte(e,t,n,r,i,a){if(!n&&0!==n)return a;const s=+n;let l,o=e[0],c=lt(e);c<o&&(l=o,o=c,c=l),l=Math.abs(t-o);const u=Math.abs(c-t);return l<u&&l<=s?r:u<=s?i:a}function le(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),et(r,n)}function C6(e,t,n,r){let s,i=t[0],a=t[t.length-1];return i>a&&(s=i,i=a,a=s),r=void 0===r||r,((n=void 0===n||n)?i<=e:i<e)&&(r?e<=a:e<a)}function _c(e){return"boolean"==typeof e}function wc(e){return"[object Date]"===Object.prototype.toString.call(e)}function qte(e){return e&&Je(e[Symbol.iterator])}function mt(e){return"number"==typeof e}function Gte(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function ge(e){return"string"==typeof e}function MH(e,t,n){e&&(e=t?me(e).map(o=>o.replace(/\\(.)/g,"$1")):me(e));const r=e&&e.length,i=n&&n.get||Ste,a=o=>i(t?[o]:Ga(o));let s;if(r)if(1===r){const o=a(e[0]);s=function(c){return""+o(c)}}else{const o=e.map(a);s=function(c){let l=""+o[0](c),u=0;for(;++u<r;)l+="|"+o[u](c);return l}}else s=function(){return""};return $2(s,e,"key")}function Wte(e,t){const n=e[0],r=lt(e),i=+t;return i?1===i?r:n+i*(r-n):n}const Jnt=1e4;function Yte(e){let t,n,r;e=+e||Jnt;const i=()=>{t={},n={},r=0},a=(s,o)=>(++r>e&&(n=t,t={},r=1),t[s]=o);return i(),{clear:i,has:s=>Ne(t,s)||Ne(n,s),get:s=>Ne(t,s)?t[s]:Ne(n,s)?a(s,n[s]):void 0,set:(s,o)=>Ne(t,s)?t[s]=o:a(s,o)}}function Xte(e,t,n,r){const i=t.length,a=n.length;if(!a)return t;if(!i)return n;const s=r||new t.constructor(i+a);let o=0,c=0,l=0;for(;o<i&&c<a;++l)s[l]=e(t[o],n[c])>0?n[c++]:t[o++];for(;o<i;++o,++l)s[l]=t[o];for(;c<a;++c,++l)s[l]=n[c];return s}function i5(e,t){let n="";for(;--t>=0;)n+=e;return n}function Qte(e,t,n,r){const i=n||" ",a=e+"",s=t-a.length;return s<=0?a:"left"===r?i5(i,s)+a:"center"===r?i5(i,~~(s/2))+a+i5(i,Math.ceil(s/2)):a+i5(i,s)}function a5(e){return e&&lt(e)-e[0]||0}function ue(e){return K(e)?"["+e.map(ue)+"]":ve(e)||ge(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function _H(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e||!e)}const e1t=e=>mt(e)||wc(e)?e:Date.parse(e);function wH(e,t){return t=t||e1t,null==e||""===e?null:t(e)}function xH(e){return null==e||""===e?null:e+""}function Oi(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function Zte(e,t,n,r){const i=r??"\u2026",a=e+"",s=a.length,o=Math.max(0,t-i.length);return s<=t?a:"left"===n?i+a.slice(s-o):"center"===n?a.slice(0,Math.ceil(o/2))+i+a.slice(s-~~(o/2)):a.slice(0,o)+i}function xc(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const a=t(e[i]);a&&n(a,i,e)}}else e.forEach(n)}var Kte={},zH={},HH=34,s5=10,SH=13;function Jte(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function ene(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function B2(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function i1t(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function i(f,d){var v,h=[],p=f.length,m=0,g=0,y=p<=0,C=!1;function b(){if(y)return zH;if(C)return C=!1,Kte;var w,z,_=m;if(f.charCodeAt(_)===HH){for(;m++<p&&f.charCodeAt(m)!==HH||f.charCodeAt(++m)===HH;);return(w=m)>=p?y=!0:(z=f.charCodeAt(m++))===s5?C=!0:z===SH&&(C=!0,f.charCodeAt(m)===s5&&++m),f.slice(_+1,w-1).replace(/""/g,'"')}for(;m<p;){if((z=f.charCodeAt(w=m++))===s5)C=!0;else if(z===SH)C=!0,f.charCodeAt(m)===s5&&++m;else if(z!==n)continue;return f.slice(_,w)}return y=!0,f.slice(_,p)}for(f.charCodeAt(p-1)===s5&&--p,f.charCodeAt(p-1)===SH&&--p;(v=b())!==zH;){for(var M=[];v!==Kte&&v!==zH;)M.push(v),v=b();d&&null==(M=d(M,g++))||h.push(M)}return h}function a(f,d){return f.map(function(h){return d.map(function(p){return u(h[p])}).join(e)})}function l(f){return f.map(u).join(e)}function u(f){return null==f?"":f instanceof Date?function r1t(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function n1t(e){return e<0?"-"+B2(-e,6):e>9999?"+"+B2(e,6):B2(e,4)}(e.getUTCFullYear())+"-"+B2(e.getUTCMonth()+1,2)+"-"+B2(e.getUTCDate(),2)+(i?"T"+B2(t,2)+":"+B2(n,2)+":"+B2(r,2)+"."+B2(i,3)+"Z":r?"T"+B2(t,2)+":"+B2(n,2)+":"+B2(r,2)+"Z":n||t?"T"+B2(t,2)+":"+B2(n,2)+"Z":"")}(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:function r(f,d){var h,p,m=i(f,function(g,v){if(h)return h(g,v-1);p=g,h=d?function t1t(e,t){var n=Jte(e);return function(r,i){return t(n(r),i,e)}}(g,d):Jte(g)});return m.columns=p||[],m},parseRows:i,format:function s(f,d){return null==d&&(d=ene(f)),[d.map(u).join(e)].concat(a(f,d)).join("\n")},formatBody:function o(f,d){return null==d&&(d=ene(f)),a(f,d).join("\n")},formatRows:function c(f){return f.map(l).join("\n")},formatRow:l,formatValue:u}}function s1t(e){return e}function c1t(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(n){return tne(e,n)})}:tne(e,t)}function tne(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,a=nne(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function nne(e,t){var n=function o1t(e){if(null==e)return s1t;var t,n,r=e.scale[0],i=e.scale[1],a=e.translate[0],s=e.translate[1];return function(o,c){c||(t=n=0);var l=2,u=o.length,f=new Array(u);for(f[0]=(t+=o[0])*r+a,f[1]=(n+=o[1])*i+s;l<u;)f[l]=o[l],++l;return f}}(e.transform),r=e.arcs;function i(u,f){f.length&&f.pop();for(var d=r[u<0?~u:u],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));u<0&&function a1t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(f,p)}function a(u){return n(u)}function s(u){for(var f=[],d=0,h=u.length;d<h;++d)i(u[d],f);return f.length<2&&f.push(f[0]),f}function o(u){for(var f=s(u);f.length<4;)f.push(f[0]);return f}function c(u){return u.map(o)}return function l(u){var d,f=u.type;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(l)};case"Point":d=a(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(a);break;case"LineString":d=s(u.arcs);break;case"MultiLineString":d=u.arcs.map(s);break;case"Polygon":d=c(u.arcs);break;case"MultiPolygon":d=u.arcs.map(c);break;default:return null}return{type:f,coordinates:d}}(t)}function l1t(e,t){var n={},r={},i={},a=[],s=-1;function c(l,u){for(var f in l){var d=l[f];delete u[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),a.push(d)}}return t.forEach(function(l,u){var d,f=e.arcs[l<0?~l:l];f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++s],t[s]=l,t[u]=d)}),t.forEach(function(l){var h,p,u=function o(l){var d,u=e.arcs[l<0?~l:l],f=u[0];return e.transform?(d=[0,0],u.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=u[u.length-1],l<0?[d,f]:[f,d]}(l),f=u[0],d=u[1];if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else r[(h=[l]).start=f]=i[h.end=d]=h}),c(i,r),c(r,i),t.forEach(function(l){n[l<0?~l:l]||a.push([l])}),a}function u1t(e){return nne(e,f1t.apply(this,arguments))}function f1t(e,t,n){var r,i,a;if(arguments.length>1)r=function d1t(e,t,n){var a,r=[],i=[];function s(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:a})}function o(f){f.forEach(s)}function c(f){f.forEach(o)}return function u(f){switch(a=f,f.type){case"GeometryCollection":f.geometries.forEach(u);break;case"LineString":o(f.arcs);break;case"MultiLineString":case"Polygon":c(f.arcs);break;case"MultiPolygon":!function l(f){f.forEach(c)}(f.arcs)}}(t),i.forEach(null==n?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}(0,t,n);else for(i=0,r=new Array(a=e.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:l1t(e,r)}}const h1t=Math.sqrt(50),p1t=Math.sqrt(10),m1t=Math.sqrt(2);function dm(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=h1t?10:a>=p1t?5:a>=m1t?2:1;let o,c,l;return i<0?(l=Math.pow(10,-i)/s,o=Math.round(e*l),c=Math.round(t*l),o/l<e&&++o,c/l>t&&--c,l=-l):(l=Math.pow(10,i)*s,o=Math.round(e/l),c=Math.round(t/l),o*l<e&&++o,c*l>t&&--c),c<o&&.5<=n&&n<2?dm(e,t,2*n):[o,c,l]}function EH(e,t,n){if(!((n=+n)>0))return[];if((e=+e)==(t=+t))return[e];const r=t<e,[i,a,s]=r?dm(t,e,n):dm(e,t,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let l=0;l<o;++l)c[l]=(a-l)/-s;else for(let l=0;l<o;++l)c[l]=(a-l)*s;else if(s<0)for(let l=0;l<o;++l)c[l]=(i+l)/-s;else for(let l=0;l<o;++l)c[l]=(i+l)*s;return c}function VH(e,t,n){return dm(e=+e,t=+t,n=+n)[2]}function zc(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?VH(t,e,n):VH(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}var sne,g1t=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function w4(e){if(!(t=g1t.exec(e)))throw new Error("invalid format: "+e);var t;return new DH({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function DH(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function hm(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function b6(e){return(e=hm(Math.abs(e)))?e[1]:NaN}function rne(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(b6(t)/3)))-b6(Math.abs(e)))}function ine(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,b6(t)-b6(e))+1}function ane(e){return Math.max(0,-b6(Math.abs(e)))}function one(e,t){var n=hm(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}w4.prototype=DH.prototype,DH.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const cne={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function v1t(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>one(100*e,t),r:one,s:function M1t(e,t){var n=hm(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(sne=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+hm(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function lne(e){return e}var pm,mm,LH,une=Array.prototype.map,fne=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function dne(e){var t=void 0===e.grouping||void 0===e.thousands?lne:function y1t(e,t){return function(n,r){for(var i=n.length,a=[],s=0,o=e[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}(une.call(e.grouping,Number),e.thousands+""),n=void 0===e.currency?"":e.currency[0]+"",r=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",a=void 0===e.numerals?lne:function C1t(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}(une.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",o=void 0===e.minus?"\u2212":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function l(f){var d=(f=w4(f)).fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,v=f.width,y=f.comma,C=f.precision,b=f.trim,M=f.type;"n"===M?(y=!0,M="g"):cne[M]||(void 0===C&&(C=12),b=!0,M="g"),(g||"0"===d&&"="===h)&&(g=!0,d="0",h="=");var w="$"===m?n:"#"===m&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",_="$"===m?r:/[%p]/.test(M)?s:"",z=cne[M],S=/[defgprs%]/.test(M);function D(L){var x,H,V,R=w,N=_;if("c"===M)N=z(L)+N,L="";else{var T=(L=+L)<0||1/L<0;if(L=isNaN(L)?c:z(Math.abs(L),C),b&&(L=function b1t(e){e:for(var i,t=e.length,n=1,r=-1;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(i+1):e}(L)),T&&0==+L&&"+"!==p&&(T=!1),R=(T?"("===p?p:o:"-"===p||"("===p?"":p)+R,N=("s"===M?fne[8+sne/3]:"")+N+(T&&"("===p?")":""),S)for(x=-1,H=L.length;++x<H;)if(48>(V=L.charCodeAt(x))||V>57){N=(46===V?i+L.slice(x+1):L.slice(x))+N,L=L.slice(0,x);break}}y&&!g&&(L=t(L,1/0));var E=R.length+L.length+N.length,k=E<v?new Array(v-E+1).join(d):"";switch(y&&g&&(L=t(k+L,k.length?v-N.length:1/0),k=""),h){case"<":L=R+L+N+k;break;case"=":L=R+k+L+N;break;case"^":L=k.slice(0,E=k.length>>1)+R+L+N+k.slice(E);break;default:L=k+R+L+N}return a(L)}return C=void 0===C?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C)),D.toString=function(){return f+""},D}return{format:l,formatPrefix:function u(f,d){var h=l(((f=w4(f)).type="f",f)),p=3*Math.max(-8,Math.min(8,Math.floor(b6(d)/3))),m=Math.pow(10,-p),g=fne[8+p/3];return function(v){return h(m*v)+g}}}}!function _1t(e){pm=dne(e),mm=pm.format,LH=pm.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});const AH=new Date,NH=new Date;function Gn(e,t,n,r){function i(a){return e(a=0===arguments.length?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(t(a=new Date(+a),null==s?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=null==o?1:Math.floor(o),!(a<s&&o>0))return c;let l;do{c.push(l=new Date(+a)),t(a,o),e(a)}while(l<a&&a<s);return c},i.filter=a=>Gn(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),n&&(i.count=(a,s)=>(AH.setTime(+a),NH.setTime(+s),e(AH),e(NH),Math.floor(n(AH,NH))),i.every=a=>(a=Math.floor(a),isFinite(a)&&a>0?a>1?i.filter(r?s=>r(s)%a==0:s=>i.count(0,s)%a==0):i:null)),i}const oo=1e3,ei=6e4,co=60*ei,lo=24*co,kH=7*lo,TH=365*lo,uo=Gn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ei)/lo,e=>e.getDate()-1),Hc=Gn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/lo,e=>e.getUTCDate()-1),pne=Gn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/lo,e=>Math.floor(e/lo));function x4(e){return Gn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+7*n)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ei)/kH)}const M6=x4(0),gm=x4(1),_6=(x4(2),x4(3),x4(4));function z4(e){return Gn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+7*n)},(t,n)=>(n-t)/kH)}x4(5),x4(6);const w6=z4(0),vm=z4(1),x6=(z4(2),z4(3),z4(4)),Ya=(z4(5),z4(6),Gn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));Ya.every=e=>isFinite(e=Math.floor(e))&&e>0?Gn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null;const Xa=Gn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Xa.every=e=>isFinite(e=Math.floor(e))&&e>0?Gn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null;const o5=Gn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth()),c5=Gn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth()),ym=Gn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*oo-e.getMinutes()*ei)},(e,t)=>{e.setTime(+e+t*co)},(e,t)=>(t-e)/co,e=>e.getHours()),Cm=Gn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*co)},(e,t)=>(t-e)/co,e=>e.getUTCHours()),bm=Gn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*oo)},(e,t)=>{e.setTime(+e+t*ei)},(e,t)=>(t-e)/ei,e=>e.getMinutes()),Mm=Gn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ei)},(e,t)=>(t-e)/ei,e=>e.getUTCMinutes()),fo=Gn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*oo)},(e,t)=>(t-e)/oo,e=>e.getUTCSeconds()),z6=Gn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);function ho(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function L1t(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function H6(e){let t,n,r;function i(o,c,l=0,u=o.length){if(l<u){if(0!==t(c,c))return u;do{const f=l+u>>>1;n(o[f],c)<0?l=f+1:u=f}while(l<u)}return l}return 2!==e.length?(t=ho,n=(o,c)=>ho(e(o),c),r=(o,c)=>e(o)-c):(t=e===ho||e===L1t?e:A1t,n=e,r=e),{left:i,center:function s(o,c,l=0,u=o.length){const f=i(o,c,l,u-1);return f>l&&r(o[f-1],c)>-r(o[f],c)?f-1:f},right:function a(o,c,l=0,u=o.length){if(l<u){if(0!==t(c,c))return u;do{const f=l+u>>>1;n(o[f],c)<=0?l=f+1:u=f}while(l<u)}return l}}}function A1t(){return 0}z6.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?Gn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):z6:null);const x1="year",U2="quarter",$1="month",Wn="week",j2="date",B1="day",Qa="dayofyear",wr="hours",xr="minutes",ti="seconds",Pi="milliseconds",IH=[x1,U2,$1,Wn,j2,B1,Qa,wr,xr,ti,Pi],FH=IH.reduce((e,t,n)=>(e[t]=1+n,e),{});function RH(e){const t=me(e).slice(),n={};return t.length||Z("Missing time unit."),t.forEach(i=>{Ne(FH,i)?n[i]=1:Z(`Invalid time unit: ${i}.`)}),(n[Wn]||n[B1]?1:0)+(n[U2]||n[$1]||n[j2]?1:0)+(n[Qa]?1:0)>1&&Z(`Incompatible time units: ${e}`),t.sort((i,a)=>FH[i]-FH[a]),t}const N1t={[x1]:"%Y ",[U2]:"Q%q ",[$1]:"%b ",[j2]:"%d ",[Wn]:"W%U ",[B1]:"%a ",[Qa]:"%j ",[wr]:"%H:00",[xr]:"00:%M",[ti]:":%S",[Pi]:".%L",[`${x1}-${$1}`]:"%Y-%m ",[`${x1}-${$1}-${j2}`]:"%Y-%m-%d ",[`${wr}-${xr}`]:"%H:%M"};function mne(e,t){const n=et({},N1t,t),r=RH(e),i=r.length;let o,c,a="",s=0;for(s=0;s<i;)for(o=r.length;o>s;--o)if(c=r.slice(s,o).join("-"),null!=n[c]){a+=n[c],s=o;break}return a.trim()}const H4=new Date;function OH(e){return H4.setFullYear(e),H4.setMonth(0),H4.setDate(1),H4.setHours(0,0,0,0),H4}function gne(e){return yne(new Date(e))}function vne(e){return PH(new Date(e))}function yne(e){return uo.count(OH(e.getFullYear())-1,e)}function PH(e){return M6.count(OH(e.getFullYear())-1,e)}function $H(e){return OH(e).getDay()}function k1t(e,t,n,r,i,a,s){if(0<=e&&e<100){const o=new Date(-1,t,n,r,i,a,s);return o.setFullYear(e),o}return new Date(e,t,n,r,i,a,s)}function Cne(e){return Mne(new Date(e))}function bne(e){return BH(new Date(e))}function Mne(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Hc.count(t-1,e)}function BH(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return w6.count(t-1,e)}function UH(e){return H4.setTime(Date.UTC(e,0,1)),H4.getUTCDay()}function T1t(e,t,n,r,i,a,s){if(0<=e&&e<100){const o=new Date(Date.UTC(-1,t,n,r,i,a,s));return o.setUTCFullYear(n.y),o}return new Date(Date.UTC(e,t,n,r,i,a,s))}function _ne(e,t,n,r,i){const a=t||1,s=lt(e),o=(v,y,C)=>function I1t(e,t,n,r){const i=n<=1?e:r?(a,s)=>r+n*Math.floor((e(a,s)-r)/n):(a,s)=>n*Math.floor(e(a,s)/n);return t?(a,s)=>t(i(a,s),s):i}(n[C=C||v],r[C],v===s&&a,y),c=new Date,l=Oi(e),u=l[x1]?o(x1):P1(2012),f=l[$1]?o($1):l[U2]?o(U2):bc,d=l[Wn]&&l[B1]?o(B1,1,Wn+B1):l[Wn]?o(Wn,1):l[B1]?o(B1,1):l[j2]?o(j2,1):l[Qa]?o(Qa,1):m6,h=l[wr]?o(wr):bc,p=l[xr]?o(xr):bc,m=l[ti]?o(ti):bc,g=l[Pi]?o(Pi):bc;return function(v){c.setTime(+v);const y=u(c);return i(y,f(c),d(c,y),h(c),p(c),m(c),g(c))}}function S6(e,t,n){return t+7*e-(n+6)%7}const F1t={[x1]:e=>e.getFullYear(),[U2]:e=>Math.floor(e.getMonth()/3),[$1]:e=>e.getMonth(),[j2]:e=>e.getDate(),[wr]:e=>e.getHours(),[xr]:e=>e.getMinutes(),[ti]:e=>e.getSeconds(),[Pi]:e=>e.getMilliseconds(),[Qa]:e=>yne(e),[Wn]:e=>PH(e),[Wn+B1]:(e,t)=>S6(PH(e),e.getDay(),$H(t)),[B1]:(e,t)=>S6(1,e.getDay(),$H(t))},R1t={[U2]:e=>3*e,[Wn]:(e,t)=>S6(e,0,$H(t))};function wne(e,t){return _ne(e,t||1,F1t,R1t,k1t)}const O1t={[x1]:e=>e.getUTCFullYear(),[U2]:e=>Math.floor(e.getUTCMonth()/3),[$1]:e=>e.getUTCMonth(),[j2]:e=>e.getUTCDate(),[wr]:e=>e.getUTCHours(),[xr]:e=>e.getUTCMinutes(),[ti]:e=>e.getUTCSeconds(),[Pi]:e=>e.getUTCMilliseconds(),[Qa]:e=>Mne(e),[Wn]:e=>BH(e),[B1]:(e,t)=>S6(1,e.getUTCDay(),UH(t)),[Wn+B1]:(e,t)=>S6(BH(e),e.getUTCDay(),UH(t))},P1t={[U2]:e=>3*e,[Wn]:(e,t)=>S6(e,0,UH(t))};function xne(e,t){return _ne(e,t||1,O1t,P1t,T1t)}const $1t={[x1]:Ya,[U2]:o5.every(3),[$1]:o5,[Wn]:M6,[j2]:uo,[B1]:uo,[Qa]:uo,[wr]:ym,[xr]:bm,[ti]:fo,[Pi]:z6},B1t={[x1]:Xa,[U2]:c5.every(3),[$1]:c5,[Wn]:w6,[j2]:Hc,[B1]:Hc,[Qa]:Hc,[wr]:Cm,[xr]:Mm,[ti]:fo,[Pi]:z6};function E6(e){return $1t[e]}function V6(e){return B1t[e]}function zne(e,t,n){return e?e.offset(t,n):void 0}function Hne(e,t,n){return zne(E6(e),t,n)}function Sne(e,t,n){return zne(V6(e),t,n)}function Ene(e,t,n,r){return e?e.range(t,n,r):void 0}function Vne(e,t,n,r){return Ene(E6(e),t,n,r)}function Dne(e,t,n,r){return Ene(V6(e),t,n,r)}const u5=6e4,f5=60*u5,jH=31536e6,Ane=[x1,$1,j2,wr,xr,ti,Pi],d5=Ane.slice(0,-1),h5=d5.slice(0,-1),p5=h5.slice(0,-1),j1t=p5.slice(0,-1),Nne=[x1,$1],kne=[x1],m5=[[d5,1,1e3],[d5,5,5e3],[d5,15,15e3],[d5,30,3e4],[h5,1,u5],[h5,5,5*u5],[h5,15,15*u5],[h5,30,30*u5],[p5,1,f5],[p5,3,3*f5],[p5,6,6*f5],[p5,12,12*f5],[j1t,1,864e5],[[x1,Wn],1,6048e5],[Nne,1,2592e6],[Nne,3,7776e6],[kne,1,jH]];function Tne(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(a5(t))/n;let a,s,i=H6(o=>o[2]).right(m5,r);return i===m5.length?(a=kne,s=zc(t[0]/jH,t[1]/jH,n)):i?(i=m5[r/m5[i-1][2]<m5[i][2]/r?i-1:i],a=i[0],s=i[1]):(a=Ane,s=Math.max(zc(t[0],t[1],n),1)),{units:a,step:s}}function qH(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function GH(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function g5(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Ine(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,s=e.shortDays,o=e.months,c=e.shortMonths,l=v5(i),u=y5(i),f=v5(a),d=y5(a),h=v5(s),p=y5(s),m=v5(o),g=y5(o),v=v5(c),y=y5(c),C={a:function T(W){return s[W.getDay()]},A:function E(W){return a[W.getDay()]},b:function k(W){return c[W.getMonth()]},B:function A(W){return o[W.getMonth()]},c:null,d:Bne,e:Bne,f:p2t,g:x2t,G:H2t,H:f2t,I:d2t,j:h2t,L:Une,m:m2t,M:g2t,p:function O(W){return i[+(W.getHours()>=12)]},q:function B(W){return 1+~~(W.getMonth()/3)},Q:Xne,s:Qne,S:v2t,u:y2t,U:C2t,V:b2t,w:M2t,W:_2t,x:null,X:null,y:w2t,Y:z2t,Z:S2t,"%":Yne},b={a:function U(W){return s[W.getUTCDay()]},A:function $(W){return a[W.getUTCDay()]},b:function G(W){return c[W.getUTCMonth()]},B:function se(W){return o[W.getUTCMonth()]},c:null,d:qne,e:qne,f:L2t,g:$2t,G:U2t,H:E2t,I:V2t,j:D2t,L:Gne,m:A2t,M:N2t,p:function J(W){return i[+(W.getUTCHours()>=12)]},q:function he(W){return 1+~~(W.getUTCMonth()/3)},Q:Xne,s:Qne,S:k2t,u:T2t,U:I2t,V:F2t,w:R2t,W:O2t,x:null,X:null,y:P2t,Y:B2t,Z:j2t,"%":Yne},M={a:function D(W,ne,re){var j=h.exec(ne.slice(re));return j?(W.w=p.get(j[0].toLowerCase()),re+j[0].length):-1},A:function L(W,ne,re){var j=f.exec(ne.slice(re));return j?(W.w=d.get(j[0].toLowerCase()),re+j[0].length):-1},b:function R(W,ne,re){var j=v.exec(ne.slice(re));return j?(W.m=y.get(j[0].toLowerCase()),re+j[0].length):-1},B:function N(W,ne,re){var j=m.exec(ne.slice(re));return j?(W.m=g.get(j[0].toLowerCase()),re+j[0].length):-1},c:function x(W,ne,re){return z(W,t,ne,re)},d:Pne,e:Pne,f:o2t,g:One,G:Rne,H:$ne,I:$ne,j:r2t,L:s2t,m:n2t,M:i2t,p:function S(W,ne,re){var j=l.exec(ne.slice(re));return j?(W.p=u.get(j[0].toLowerCase()),re+j[0].length):-1},q:t2t,Q:l2t,s:u2t,S:a2t,u:Q1t,U:Z1t,V:K1t,w:X1t,W:J1t,x:function H(W,ne,re){return z(W,n,ne,re)},X:function V(W,ne,re){return z(W,r,ne,re)},y:One,Y:Rne,Z:e2t,"%":c2t};function w(W,ne){return function(re){var Ee,Re,Lt,j=[],pe=-1,_e=0,Pe=W.length;for(re instanceof Date||(re=new Date(+re));++pe<Pe;)37===W.charCodeAt(pe)&&(j.push(W.slice(_e,pe)),null!=(Re=Fne[Ee=W.charAt(++pe)])?Ee=W.charAt(++pe):Re="e"===Ee?" ":"0",(Lt=ne[Ee])&&(Ee=Lt(re,Re)),j.push(Ee),_e=pe+1);return j.push(W.slice(_e,pe)),j.join("")}}function _(W,ne){return function(re){var _e,Pe,j=g5(1900,void 0,1);if(z(j,W,re+="",0)!=re.length)return null;if("Q"in j)return new Date(j.Q);if("s"in j)return new Date(1e3*j.s+("L"in j?j.L:0));if(ne&&!("Z"in j)&&(j.Z=0),"p"in j&&(j.H=j.H%12+12*j.p),void 0===j.m&&(j.m="q"in j?j.q:0),"V"in j){if(j.V<1||j.V>53)return null;"w"in j||(j.w=1),"Z"in j?(Pe=(_e=GH(g5(j.y,0,1))).getUTCDay(),_e=Pe>4||0===Pe?vm.ceil(_e):vm(_e),_e=Hc.offset(_e,7*(j.V-1)),j.y=_e.getUTCFullYear(),j.m=_e.getUTCMonth(),j.d=_e.getUTCDate()+(j.w+6)%7):(Pe=(_e=qH(g5(j.y,0,1))).getDay(),_e=Pe>4||0===Pe?gm.ceil(_e):gm(_e),_e=uo.offset(_e,7*(j.V-1)),j.y=_e.getFullYear(),j.m=_e.getMonth(),j.d=_e.getDate()+(j.w+6)%7)}else("W"in j||"U"in j)&&("w"in j||(j.w="u"in j?j.u%7:"W"in j?1:0),Pe="Z"in j?GH(g5(j.y,0,1)).getUTCDay():qH(g5(j.y,0,1)).getDay(),j.m=0,j.d="W"in j?(j.w+6)%7+7*j.W-(Pe+5)%7:j.w+7*j.U-(Pe+6)%7);return"Z"in j?(j.H+=j.Z/100|0,j.M+=j.Z%100,GH(j)):qH(j)}}function z(W,ne,re,j){for(var Ee,Re,pe=0,_e=ne.length,Pe=re.length;pe<_e;){if(j>=Pe)return-1;if(37===(Ee=ne.charCodeAt(pe++))){if(Ee=ne.charAt(pe++),!(Re=M[Ee in Fne?ne.charAt(pe++):Ee])||(j=Re(W,re,j))<0)return-1}else if(Ee!=re.charCodeAt(j++))return-1}return j}return C.x=w(n,C),C.X=w(r,C),C.c=w(t,C),b.x=w(n,b),b.X=w(r,b),b.c=w(t,b),{format:function(W){var ne=w(W+="",C);return ne.toString=function(){return W},ne},parse:function(W){var ne=_(W+="",!1);return ne.toString=function(){return W},ne},utcFormat:function(W){var ne=w(W+="",b);return ne.toString=function(){return W},ne},utcParse:function(W){var ne=_(W+="",!0);return ne.toString=function(){return W},ne}}}var D6,WH,Zne,YH,Kne,Fne={"-":"",_:" ",0:"0"},e1=/^\s*\d+/,G1t=/^%/,W1t=/[\\^$*+?|[\]().{}]/g;function vt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function Y1t(e){return e.replace(W1t,"\\$&")}function v5(e){return new RegExp("^(?:"+e.map(Y1t).join("|")+")","i")}function y5(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function X1t(e,t,n){var r=e1.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Q1t(e,t,n){var r=e1.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Z1t(e,t,n){var r=e1.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function K1t(e,t,n){var r=e1.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function J1t(e,t,n){var r=e1.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Rne(e,t,n){var r=e1.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function One(e,t,n){var r=e1.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function e2t(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function t2t(e,t,n){var r=e1.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function n2t(e,t,n){var r=e1.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Pne(e,t,n){var r=e1.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function r2t(e,t,n){var r=e1.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function $ne(e,t,n){var r=e1.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function i2t(e,t,n){var r=e1.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function a2t(e,t,n){var r=e1.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function s2t(e,t,n){var r=e1.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function o2t(e,t,n){var r=e1.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function c2t(e,t,n){var r=G1t.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function l2t(e,t,n){var r=e1.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function u2t(e,t,n){var r=e1.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Bne(e,t){return vt(e.getDate(),t,2)}function f2t(e,t){return vt(e.getHours(),t,2)}function d2t(e,t){return vt(e.getHours()%12||12,t,2)}function h2t(e,t){return vt(1+uo.count(Ya(e),e),t,3)}function Une(e,t){return vt(e.getMilliseconds(),t,3)}function p2t(e,t){return Une(e,t)+"000"}function m2t(e,t){return vt(e.getMonth()+1,t,2)}function g2t(e,t){return vt(e.getMinutes(),t,2)}function v2t(e,t){return vt(e.getSeconds(),t,2)}function y2t(e){var t=e.getDay();return 0===t?7:t}function C2t(e,t){return vt(M6.count(Ya(e)-1,e),t,2)}function jne(e){var t=e.getDay();return t>=4||0===t?_6(e):_6.ceil(e)}function b2t(e,t){return e=jne(e),vt(_6.count(Ya(e),e)+(4===Ya(e).getDay()),t,2)}function M2t(e){return e.getDay()}function _2t(e,t){return vt(gm.count(Ya(e)-1,e),t,2)}function w2t(e,t){return vt(e.getFullYear()%100,t,2)}function x2t(e,t){return vt((e=jne(e)).getFullYear()%100,t,2)}function z2t(e,t){return vt(e.getFullYear()%1e4,t,4)}function H2t(e,t){var n=e.getDay();return vt((e=n>=4||0===n?_6(e):_6.ceil(e)).getFullYear()%1e4,t,4)}function S2t(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+vt(t/60|0,"0",2)+vt(t%60,"0",2)}function qne(e,t){return vt(e.getUTCDate(),t,2)}function E2t(e,t){return vt(e.getUTCHours(),t,2)}function V2t(e,t){return vt(e.getUTCHours()%12||12,t,2)}function D2t(e,t){return vt(1+Hc.count(Xa(e),e),t,3)}function Gne(e,t){return vt(e.getUTCMilliseconds(),t,3)}function L2t(e,t){return Gne(e,t)+"000"}function A2t(e,t){return vt(e.getUTCMonth()+1,t,2)}function N2t(e,t){return vt(e.getUTCMinutes(),t,2)}function k2t(e,t){return vt(e.getUTCSeconds(),t,2)}function T2t(e){var t=e.getUTCDay();return 0===t?7:t}function I2t(e,t){return vt(w6.count(Xa(e)-1,e),t,2)}function Wne(e){var t=e.getUTCDay();return t>=4||0===t?x6(e):x6.ceil(e)}function F2t(e,t){return e=Wne(e),vt(x6.count(Xa(e),e)+(4===Xa(e).getUTCDay()),t,2)}function R2t(e){return e.getUTCDay()}function O2t(e,t){return vt(vm.count(Xa(e)-1,e),t,2)}function P2t(e,t){return vt(e.getUTCFullYear()%100,t,2)}function $2t(e,t){return vt((e=Wne(e)).getUTCFullYear()%100,t,2)}function B2t(e,t){return vt(e.getUTCFullYear()%1e4,t,4)}function U2t(e,t){var n=e.getUTCDay();return vt((e=n>=4||0===n?x6(e):x6.ceil(e)).getUTCFullYear()%1e4,t,4)}function j2t(){return"+0000"}function Yne(){return"%"}function Xne(e){return+e}function Qne(e){return Math.floor(+e/1e3)}function C5(e){const t={};return n=>t[n]||(t[n]=e(n))}function Jne(e){const t=C5(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=w4(r||",");if(null==i.precision){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1}return function G2t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let a=function W2t(e,t){let r,n=e.lastIndexOf("e");if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}(r,i);const s=a<r.length?r.slice(a):"";for(;--a>i;)if("0"!==r[a]){++a;break}return r.slice(0,a)+s}}(t(i),t(".1f")(1)[1])}return t(i)},formatSpan(r,i,a,s){s=w4(s??",f");const o=zc(r,i,a),c=Math.max(Math.abs(r),Math.abs(i));let l;if(null==s.precision)switch(s.type){case"s":return isNaN(l=rne(o,c))||(s.precision=l),n(s,c);case"":case"e":case"g":case"p":case"r":isNaN(l=ine(o,c))||(s.precision=l-("e"===s.type));break;case"f":case"%":isNaN(l=ane(o))||(s.precision=l-2*("%"===s.type))}return t(s)}}}let XH,QH;function e1e(){return XH=Jne({format:mm,formatPrefix:LH})}function t1e(e){return Jne(dne(e))}function wm(e){return arguments.length?XH=t1e(e):XH}function n1e(e,t,n){ve(n=n||{})||Z(`Invalid time multi-format specifier: ${n}`);const r=t(ti),i=t(xr),a=t(wr),s=t(j2),o=t(Wn),c=t($1),l=t(U2),u=t(x1),f=e(n[Pi]||".%L"),d=e(n[ti]||":%S"),h=e(n[xr]||"%I:%M"),p=e(n[wr]||"%I %p"),m=e(n[j2]||n[B1]||"%a %d"),g=e(n[Wn]||"%b %d"),v=e(n[$1]||"%B"),y=e(n[U2]||"%B"),C=e(n[x1]||"%Y");return b=>(r(b)<b?f:i(b)<b?d:a(b)<b?h:s(b)<b?p:c(b)<b?o(b)<b?m:g:u(b)<b?l(b)<b?v:y:C)(b)}function r1e(e){const t=C5(e.format),n=C5(e.utcFormat);return{timeFormat:r=>ge(r)?t(r):n1e(t,E6,r),utcFormat:r=>ge(r)?n(r):n1e(n,V6,r),timeParse:C5(e.parse),utcParse:C5(e.utcParse)}}function i1e(){return QH=r1e({format:WH,parse:Zne,utcFormat:YH,utcParse:Kne})}function a1e(e){return r1e(Ine(e))}function b5(e){return arguments.length?QH=a1e(e):QH}!function q2t(e){D6=Ine(e),WH=D6.format,Zne=D6.parse,YH=D6.utcFormat,Kne=D6.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),e1e(),i1e();const ZH=(e,t)=>et({},e,t);function s1e(e,t){const n=e?t1e(e):wm(),r=t?a1e(t):b5();return ZH(n,r)}function KH(e,t){const n=arguments.length;return n&&2!==n&&Z("defaultLocale expects either zero or two arguments."),n?ZH(wm(e),b5(t)):ZH(wm(),b5())}function Y2t(){return e1e(),i1e(),KH()}const X2t=/^(data:|([A-Za-z]+:)?\/\/)/,Q2t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Z2t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,o1e="file://";function J2t(e,t){return JH.apply(this,arguments)}function JH(){return JH=Fn(function*(e,t){const n=yield this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}),JH.apply(this,arguments)}function ert(e,t){return eS.apply(this,arguments)}function eS(){return eS=Fn(function*(e,t){t=et({},this.options,t);const n=this.fileAccess,r={href:null};let i,a,s;const o=Q2t.test(e.replace(Z2t,""));(null==e||"string"!=typeof e||!o)&&Z("Sanitize failure, invalid URI: "+ue(e));const c=X2t.test(e);return(s=t.baseURL)&&!c&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),a=(i=e.startsWith(o1e))||"file"===t.mode||"http"!==t.mode&&!c&&n,i?e=e.slice(o1e.length):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!a}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),"image"===t.context&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}),eS.apply(this,arguments)}function trt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,a)=>{i?r(i):n(a)})}):nrt}function nrt(){return tS.apply(this,arguments)}function tS(){return(tS=Fn(function*(){Z("No file system access.")})).apply(this,arguments)}function rrt(e){return e?function(){var t=Fn(function*(n,r){const i=et({},this.options.http,r),a=r&&r.response,s=yield e(n,i);return s.ok?Je(s[a])?s[a]():s.text():Z(s.status+""+s.statusText)});return function(n,r){return t.apply(this,arguments)}}():irt}function irt(){return nS.apply(this,arguments)}function nS(){return(nS=Fn(function*(){Z("No HTTP fetch method available.")})).apply(this,arguments)}const art=e=>null!=e&&e==e,c1e=e=>!(Number.isNaN(+e)||e instanceof Date),rS={boolean:_H,integer:O1,number:O1,date:wH,string:xH,unknown:R1},xm=[e=>"true"===e||"false"===e||!0===e||!1===e,e=>c1e(e)&&Number.isInteger(+e),c1e,e=>!Number.isNaN(Date.parse(e))],lrt=["boolean","integer","number","date"];function l1e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=xm.length,i=xm.map((a,s)=>s+1);for(let o,c,a=0,s=0;a<n;++a)for(c=t?e[a][t]:e[a],o=0;o<r;++o)if(i[o]&&art(c)&&!xm[o](c)&&(i[o]=0,++s,s===xm.length))return"string";return lrt[i.reduce((a,s)=>0===a?s:a,0)-1]}function u1e(e,t){return t.reduce((n,r)=>(n[r]=l1e(e,r),n),{})}function f1e(e){const t=function(n,r){const i={delimiter:e};return iS(n,r?et(r,i):i)};return t.responseType="text",t}function iS(e,t){return t.header&&(e=t.header.map(ue).join(t.delimiter)+"\n"+e),i1t(t.delimiter).parse(e+"")}function aS(e,t){const n=t&&t.property?Kr(t.property):R1;return ve(e)&&!function urt(e){return!("function"!=typeof Buffer||!Je(Buffer.isBuffer))&&Buffer.isBuffer(e)}(e)?function frt(e,t){return!K(e)&&qte(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}(n(e),t):n(JSON.parse(e))}iS.responseType="text",aS.responseType="json";const drt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function d1e(e,t){let n,r,i,a;return e=aS(e,t),t&&t.feature?(n=c1t,i=t.feature):t&&t.mesh?(n=u1t,i=t.mesh,a=drt[t.filter]):Z("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,a):Z("Invalid TopoJSON object: "+i),r&&r.features||[r]}d1e.responseType="json";const zm={dsv:iS,csv:f1e(","),tsv:f1e("\t"),json:aS,topojson:d1e};function sS(e,t){return arguments.length>1?(zm[e]=t,this):Ne(zm,e)?zm[e]:null}function h1e(e){const t=sS(e);return t&&t.responseType||"text"}function p1e(e,t,n,r){const i=sS((t=t||{}).type||"json");return i||Z("Unknown data format type: "+t.type),e=i(e,t),t.parse&&function hrt(e,t,n,r){if(!e.length)return;const i=b5();n=n||i.timeParse,r=r||i.utcParse;let s,o,c,l,u,f,a=e.columns||Object.keys(e[0]);"auto"===t&&(t=u1e(e,a)),a=Object.keys(t);const d=a.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],("'"===g[0]&&"'"===g[g.length-1]||'"'===g[0]&&'"'===g[g.length-1])&&(g=g.slice(1,-1)),("utc"===m[0]?r:n)(g);if(!rS[p])throw Error("Illegal format pattern: "+h+":"+p);return rS[p]});for(c=0,u=e.length,f=a.length;c<u;++c)for(s=e[c],l=0;l<f;++l)o=a[l],s[o]=d[l](s[o])}(e,t.parse,n,r),Ne(e,"columns")&&delete e.columns,e}const Hm=function K2t(e,t){return n=>({options:n||{},sanitize:ert,load:J2t,fileAccess:!!t,file:trt(t),http:rrt(e)})}(typeof fetch<"u"&&fetch,null);function Sm(e){const t=e||R1,n=[],r={};return n.add=i=>{const a=t(i);return r[a]||(r[a]=1,n.push(i)),n},n.remove=i=>{const a=t(i);if(r[a]){r[a]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}function Em(e,t){return oS.apply(this,arguments)}function oS(){return oS=Fn(function*(e,t){try{yield t(e)}catch(n){e.error(n)}}),oS.apply(this,arguments)}const m1e=Symbol("vega_id");let prt=1;function Vm(e){return!(!e||!ke(e))}function ke(e){return e[m1e]}function g1e(e,t){return e[m1e]=t,e}function xt(e){const t=e===Object(e)?e:{data:e};return ke(t)?t:g1e(t,prt++)}function cS(e){return Dm(e,xt({}))}function Dm(e,t){for(const n in e)t[n]=e[n];return t}function v1e(e,t){return g1e(t,ke(e))}function S4(e,t){return e?t?(n,r)=>e(n,r)||ke(t(n))-ke(t(r)):(n,r)=>e(n,r)||ke(n)-ke(r):null}function y1e(e){return e&&e.constructor===E4}function E4(){const e=[],t=[],n=[],r=[],i=[];let a=null,s=!1;return{constructor:E4,insert(o){const c=me(o),l=c.length;for(let u=0;u<l;++u)e.push(c[u]);return this},remove(o){const c=Je(o)?r:t,l=me(o),u=l.length;for(let f=0;f<u;++f)c.push(l[f]);return this},modify(o,c,l){const u={field:c,value:P1(l)};return Je(o)?(u.filter=o,i.push(u)):(u.tuple=o,n.push(u)),this},encode(o,c){return Je(o)?i.push({filter:o,field:c}):n.push({tuple:o,field:c}),this},clean(o){return a=o,this},reflow(){return s=!0,this},pulse(o,c){const l={},u={};let f,d,h,p,m,g;for(f=0,d=c.length;f<d;++f)l[ke(c[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[ke(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],c.forEach(y=>{p(y)&&(l[ke(y)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=ke(m),l[g]?l[g]=1:o.add.push(xt(e[f]));for(f=0,d=c.length;f<d;++f)m=c[f],l[ke(m)]<0&&o.rem.push(m);function v(y,C,b){b?y[C]=b(y):o.encode=C,s||(u[ke(y)]=y)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[ke(m)],g>0&&(v(m,p,h.value),o.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,c.forEach(y=>{p(y)&&l[ke(y)]>0&&v(y,h.field,h.value)}),o.modifies(h.field);if(s)o.mod=t.length||r.length?c.filter(y=>l[ke(y)]>0):c.slice();else for(g in u)o.mod.push(u[g]);return(a||null==a&&(t.length||r.length))&&o.clean(!0),o}}}const Lm="_:mod:_";function Am(){Object.defineProperty(this,Lm,{writable:!0,value:{}})}Am.prototype={set(e,t,n,r){const i=this,a=i[e],s=i[Lm];return null!=t&&t>=0?(a[t]!==n||r)&&(a[t]=n,s[t+":"+e]=-1,s[e]=-1):(a!==n||r)&&(i[e]=n,s[e]=K(n)?1+n.length:-1),i},modified(e,t){const n=this[Lm];if(!arguments.length){for(const r in n)if(n[r])return!0;return!1}if(K(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}return null!=t&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[Lm]={},this}};let mrt=0;const vrt=new Am;function jt(e,t,n,r){this.id=++mrt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function C1e(e){return function(t){const n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}jt.prototype={targets(){return this._targets||(this._targets=Sm(r5))},set(e){return this.value!==e?(this.value=e,1):0},skip:C1e(1),modified:C1e(2),parameters(e,t,n){t=!1!==t;const r=this._argval=this._argval||new Am,i=this._argops=this._argops||[],a=[];let s,o,c,l;const u=(f,d,h)=>{h instanceof jt?(h!==this&&(t&&h.targets().add(this),a.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(s in e)if(o=e[s],"pulse"===s)me(o).forEach(f=>{f instanceof jt?f!==this&&(f.targets().add(this),a.push(f)):Z("Pulse parameters must be operator instances.")}),this.source=o;else if(K(o))for(r.set(s,-1,Array(c=o.length)),l=0;l<c;++l)u(s,l,o[l]);else u(s,-1,o);return this.marshall().clear(),n&&(i.initonly=!0),a},marshall(e){const t=this._argval||vrt,n=this._argops;let r,i,a,s;if(n){const o=n.length;for(i=0;i<o;++i)r=n[i],a=r.op,s=a.modified()&&a.stamp===e,t.set(r.name,r.index,a.value,s);if(n.initonly){for(i=0;i<o;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};let _rt=0;function Nm(e,t,n){this.id=++_rt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Sc(e,t,n){return new Nm(e,t,n)}function lS(){return lS=Fn(function*(e,t){const n=this;let i,r=0;try{i=yield n.loader().load(e,{context:"dataflow",response:h1e(t&&t.type)});try{i=n.parse(i,t)}catch(a){r=-2,n.warn("Data ingestion failed",e,a)}}catch(a){r=-1,n.warn("Loading failed",e,a)}return{data:i,status:r}}),lS.apply(this,arguments)}function uS(){return uS=Fn(function*(e,t,n){const r=this,i=r._pending||function Ert(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{0==--n.requests&&(e._pending=null,t(e))},e._pending=n}(r);i.requests+=1;const a=yield r.request(t,n);return r.pulse(e,r.changeset().remove(Jr).insert(a.data||[])),i.done(),a}),uS.apply(this,arguments)}Nm.prototype={_filter:Jr,_apply:R1,targets(){return this._targets||(this._targets=Sm(r5))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Sc(e);return this.targets().add(t),t},apply(e){const t=Sc(null,e);return this.targets().add(t),t},merge(){const e=Sc();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Sc();return this.targets().add(Sc(null,null,bH(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Sc(null,null,()=>n=!0)),t.targets().add(Sc(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Jr,this._targets=null}};const Vrt={skip:!0};function Lrt(e,t,n,r,i,a){const s=et({},a,Vrt);let o,c;Je(n)||(n=P1(n)),void 0===r?o=l=>e.touch(n(l)):Je(r)?(c=new jt(null,r,i,!1),o=l=>{c.evaluate(l);const u=n(l),f=c.value;y1e(f)?e.pulse(u,f,a):e.update(u,f,s)}):o=l=>e.update(n(l),r,s),t.apply(o)}function Art(e,t,n,r,i,a){if(void 0===r)t.targets().add(n);else{const s=a||{},o=new jt(null,function Nrt(e,t){return t=Je(t)?t:P1(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}(n,r),i,!1);o.modified(s.force),o.rank=t.rank,t.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),e.connect(n,[o]))}}const km={};function Vc(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function fS(e,t){const n=[];return xc(e,t,r=>n.push(r)),n}function x1e(e,t){const n={};return e.visit(t,r=>{n[ke(r)]=1}),r=>n[ke(r)]?null:r}function Tm(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}function dS(e,t,n,r){const i=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const o=i.fields||(i.fields={});for(const c in s.fields)o[c]=1}s.changed(i.ADD)&&(a|=i.ADD),s.changed(i.REM)&&(a|=i.REM),s.changed(i.MOD)&&(a|=i.MOD)}this.changes=a}function hS(){return hS=Fn(function*(e,t,n){const r=this,i=[];if(r._pulse)return z1e(r);if(r._pending&&(yield r._pending),t&&(yield Em(r,t)),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const a=++r._clock;r._pulse=new Vc(r,a,e),r._touched.forEach(u=>r._enqueue(u,!0)),r._touched=Sm(r5);let o,c,l,s=0;try{for(;r._heap.size()>0;)o=r._heap.pop(),o.rank===o.qrank?(c=o.run(r._getPulse(o,e)),c.then?c=yield c:c.async&&(i.push(c.async),c=km),c!==km&&o._targets&&o._targets.forEach(u=>r._enqueue(u)),++s):r._enqueue(o,!0)}catch(u){r._heap.clear(),l=u}if(r._input={},r._pulse=null,r.debug(`Pulse ${a}: ${s} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const u=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<u.length;++f)yield Em(r,u[f].callback)}return n&&(yield Em(r,n)),i.length&&Promise.all(i).then(u=>r.runAsync(null,()=>{u.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}),hS.apply(this,arguments)}function pS(){return pS=Fn(function*(e,t,n){for(;this._running;)yield this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}),pS.apply(this,arguments)}function z1e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}Vc.prototype={StopPropagation:km,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(e){return new Vc(this.dataflow).init(this,e)},clone(){const e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Vc(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(64&t)&&(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},reflow(e){if(e)return this.fork(7).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,x1e(this,1))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return K(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?K(e)?e.some(r=>n[r]):n[e]:!!n)},filter(e,t){const n=this;return 1&e&&(n.addF=Tm(n.addF,t)),2&e&&(n.remF=Tm(n.remF,t)),4&e&&(n.modF=Tm(n.modF,t)),16&e&&(n.srcF=Tm(n.srcF,t)),n},materialize(e){const t=this;return 1&(e=e||7)&&t.addF&&(t.add=fS(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=fS(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=fS(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(16&e)return xc(n.source,n.srcF,r),n;1&e&&xc(n.add,n.addF,r),2&e&&xc(n.rem,n.remF,r),4&e&&xc(n.mod,n.modF,r);const i=n.source;if(8&e&&i){const a=n.add.length+n.mod.length;a===i.length||xc(i,a?x1e(n,5):n.srcF,r)}return n}},le(dS,Vc,{fork(e){const t=new Vc(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?K(e)?e.some(r=>n[r]):n[e]:0},filter(){Z("MultiPulse does not support filtering.")},materialize(){Z("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let a=0;if(e&n.SOURCE)for(;a<i;++a)r[a].visit(e,t);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(e,t);return n}});const mS={skip:!1,force:!1};function H1e(e,t,n,r){let i,a;const s=e[n];for(;n>t&&(a=n-1>>1,i=e[a],r(s,i)<0);)e[n]=i,n=a;return e[n]=s}function A6(){this.logger(mH()),this.logLevel(hH),this._clock=0,this._rank=0,this._locale=KH();try{this._loader=Hm()}catch{}this._touched=Sm(r5),this._input={},this._pulse=null,this._heap=function Wrt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),H1e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,function Yrt(e,t,n){const r=t,i=e.length,a=e[t];let o,s=1+(t<<1);for(;s<i;)o=s+1,o<i&&n(e[s],e[o])>=0&&(s=o),e[t]=e[s],s=1+((t=s)<<1);e[t]=a,H1e(e,r,t,n)}(t,0,e)):r=n,r}}}((e,t)=>e.qrank-t.qrank),this._postrun=[]}function _5(e){return function(){return this._log[e].apply(this,arguments)}}function Y(e,t){jt.call(this,e,null,t)}A6.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:_5("error"),warn:_5("warn"),info:_5("info"),debug:_5("debug"),logLevel:_5("level"),cleanThreshold:1e4,add:function brt(e,t,n,r){let a,i=1;return e instanceof jt?a=e:e&&e.prototype instanceof jt?a=new e:Je(e)?a=new jt(null,e):(i=0,a=new jt(e,t)),this.rank(a),i&&(r=n,n=t),n&&this.connect(a,a.parameters(n,r)),this.touch(a),a},connect:function Mrt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank)return void this.rerank(e)},rank:function krt(e){e.rank=++this._rank},rerank:function Trt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Z("Cycle detected in dataflow graph.")},pulse:function Grt(e,t,n){this.touch(e,n||mS);const r=new Vc(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this},touch:function jrt(e,t){const n=t||mS;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},update:function qrt(e,t,n){const r=n||mS;return(e.set(t)||r.force)&&this.touch(e,r),this},changeset:E4,ingest:function zrt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))},parse:function xrt(e,t){const n=this.locale();return p1e(e,t,n.timeParse,n.utcParse)},preload:function Srt(e,t,n){return uS.apply(this,arguments)},request:function Hrt(e,t){return lS.apply(this,arguments)},events:function wrt(e,t,n,r){const i=this,a=Sc(n,r),s=function(l){l.dataflow=i;try{a.receive(l)}catch(u){i.error(u)}finally{i.run()}};let o;o="string"==typeof e&&typeof document<"u"?document.querySelectorAll(e):me(e);const c=o.length;for(let l=0;l<c;++l)o[l].addEventListener(t,s);return a},on:function Drt(e,t,n,r,i){return(e instanceof jt?Art:Lrt)(this,e,t,n,r,i),this},evaluate:function Frt(e,t,n){return hS.apply(this,arguments)},run:function Ort(e,t,n){return this._pulse?z1e(this):(this.evaluate(e,t,n),this)},runAsync:function Rrt(e,t,n){return pS.apply(this,arguments)},runAfter:function Prt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}},_enqueue:function $rt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},_getPulse:function Brt(e,t){const n=e.source,r=this._clock;return n&&K(n)?new dS(this,r,n.map(i=>i.pulse),t):this._input[e.id]||function Urt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==km&&(e.source=t.source),e)}(this._pulse,n&&n.pulse)}},le(Y,jt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const N6={};function S1e(e){const t=E1e(e);return t&&t.Definition||null}function E1e(e){return e=e&&e.toLowerCase(),Ne(N6,e)?N6[e]:null}function V4(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function gS(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function Im(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function D1e(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=void 0===i?Im:function V1e(e=ho){if(e===ho)return Im;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}(i);r>n;){if(r-n>600){const c=r-n+1,l=t-n+1,u=Math.log(c),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(c-f)/c)*(l-c/2<0?-1:1);D1e(e,t,Math.max(n,Math.floor(t-l*f/c+d)),Math.min(r,Math.floor(t+(c-l)*f/c+d)),i)}const a=e[t];let s=n,o=r;for(w5(e,n,t),i(e[r],a)>0&&w5(e,n,r);s<o;){for(w5(e,s,o),++s,--o;i(e[s],a)<0;)++s;for(;i(e[o],a)>0;)--o}0===i(e[n],a)?w5(e,n,o):(++o,w5(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function w5(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function L1e(e){return null===e?NaN:+e}function vS(e,t,n){if(e=Float64Array.from(function*Xrt(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return gS(e);if(t>=1)return V4(e);var r,i=(r-1)*t,a=Math.floor(i),s=V4(D1e(e,a).subarray(0,a+1));return s+(gS(e.subarray(a+1))-s)*(i-a)}}function A1e(e,t,n=L1e){if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),s=+n(e[a],a,e);return s+(+n(e[a+1],a+1,e)-s)*(i-a)}}function N1e(e,t){return vS(e,.5,t)}function*k1e(e,t){if(null==t)for(let n of e)null!=n&&""!==n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),null!=r&&""!==r&&(r=+r)>=r&&(yield r)}}function yS(e,t,n){const r=Float64Array.from(k1e(e,n));return r.sort(ho),t.map(i=>A1e(r,i))}function CS(e,t){return yS(e,[.25,.5,.75],t)}function bS(e,t){const n=e.length,r=function Zrt(e,t){const n=function Qrt(e,t){let r,n=0,i=0,a=0;if(void 0===t)for(let s of e)null!=s&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i));else{let s=-1;for(let o of e)null!=(o=t(o,++s,e))&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i))}if(n>1)return a/(n-1)}(e,t);return n&&Math.sqrt(n)}(e,t),i=CS(e,t);return 1.06*(Math.min(r,(i[2]-i[0])/1.34)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function T1e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o,c,l,u,f,d,a=e.extent[0],s=e.extent[1];const h=e.span||s-a||Math.abs(a)||1;if(e.step)o=e.step;else if(e.steps){for(u=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<u;++f);o=e.steps[Math.max(0,f-1)]}else{for(c=Math.ceil(Math.log(t)/r),l=e.minstep||0,o=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-c));Math.ceil(h/o)>t;)o*=n;for(f=0,d=i.length;f<d;++f)u=o/i[f],u>=l&&h/u<=t&&(o=u)}u=Math.log(o);const m=Math.pow(n,-(u>=0?0:1+~~(-u/r))-1);return(e.nice||void 0===e.nice)&&(u=Math.floor(a/o+m)*o,a=a<u?u-o:u,s=Math.ceil(s/o)*o),{start:a,stop:s===a?a+o:s,step:o}}var ni=Math.random;function Krt(e){ni=e}function I1e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(k1e(e,r)),a=i.length,s=t;let o,c,l,u;for(l=0,u=Array(s);l<s;++l){for(o=0,c=0;c<a;++c)o+=i[~~(ni()*a)];u[l]=o/a}return u.sort(ho),[vS(u,n/2),vS(u,1-n/2)]}function F1e(e,t,n,r){r=r||(d=>d);const i=e.length,a=new Float64Array(i);let f,s=0,o=1,c=r(e[0]),l=c,u=c+t;for(;o<i;++o){if(f=r(e[o]),f>=u){for(l=(c+l)/2;s<o;++s)a[s]=l;u=f+t,c=f}l=f}for(l=(c+l)/2;s<o;++s)a[s]=l;return n?function Jrt(e,t){const n=e.length;let a,s,r=0,i=1;for(;e[r]===e[i];)++i;for(;i<n;){for(a=i+1;e[i]===e[a];)++a;if(e[i]-e[i-1]<t){for(s=i+(r+a-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=a}return e}(a,t+t/4):a}function eit(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}}function tit(e,t){let n,r,i;null==t&&(t=e,e=0);const a={min(s){return arguments.length?(n=s||0,i=r-n,a):n},max(s){return arguments.length?(r=s||0,i=r-n,a):r},sample:()=>n+Math.floor(i*ni()),pdf:s=>s===Math.floor(s)&&s>=n&&s<r?1/i:0,cdf(s){const o=Math.floor(s);return o<n?0:o>=r?1:(o-n+1)/i},icdf:s=>s>=0&&s<=1?n-1+Math.floor(s*i):NaN};return a.min(e).max(t)}const R1e=Math.sqrt(2*Math.PI),nit=Math.SQRT2;let x5=NaN;function Fm(e,t){e=e||0,t=t??1;let i,a,n=0,r=0;if(x5==x5)n=x5,x5=NaN;else{do{n=2*ni()-1,r=2*ni()-1,i=n*n+r*r}while(0===i||i>1);a=Math.sqrt(-2*Math.log(i)/i),n*=a,x5=r*a}return e+n*t}function MS(e,t,n){const r=(e-(t||0))/(n=n??1);return Math.exp(-.5*r*r)/(n*R1e)}function Rm(e,t,n){const r=(e-(t=t||0))/(n=n??1),i=Math.abs(r);let a;if(i>37)a=0;else{const s=Math.exp(-i*i/2);let o;i<7.07106781186547?(o=.0352624965998911*i+.700383064443688,o=o*i+6.37396220353165,o=o*i+33.912866078383,o=o*i+112.079291497871,o=o*i+221.213596169931,o=o*i+220.206867912376,a=s*o,o=.0883883476483184*i+1.75566716318264,o=o*i+16.064177579207,o=o*i+86.7807322029461,o=o*i+296.564248779674,o=o*i+637.333633378831,o=o*i+793.826512519948,o=o*i+440.413735824752,a/=o):(o=i+.65,o=i+4/o,o=i+3/o,o=i+2/o,o=i+1/o,a=s/o/2.506628274631)}return r>0?1-a:a}function Om(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*nit*function rit(e){let n,t=-Math.log((1-e)*(1+e));return t<6.25?(t-=3.125,n=-364441206401782e-35,n=n*t-16850591381820166e-35,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=n*t-1333171662854621e-31,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=n*t-4054566272975207e-29,n=n*t-8151934197605472e-29,n=26335093153082323e-28+n*t,n=n*t-12975133253453532e-27,n=n*t-5415412054294628e-26,n=1.0512122733215323e-9+n*t,n=n*t-4.112633980346984e-9,n=n*t-2.9070369957882005e-8,n=4.2347877827932404e-7+n*t,n=n*t-13654692000834679e-22,n=n*t-13882523362786469e-21,n=.00018673420803405714+n*t,n=n*t-.000740702534166267,n=n*t-.006033670871430149,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=2.2137376921775787e-9,n=9.075656193888539e-8+n*t,n=n*t-2.7517406297064545e-7,n=1.8239629214389228e-8+n*t,n=15027403968909828e-22+n*t,n=n*t-4013867526981546e-21,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=n*t-47318229009055734e-21,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=n*t-.0003550375203628475,n=.0009532893797373805+n*t,n=n*t-.0016882755560235047,n=.002491442096107851+n*t,n=n*t-.003751208507569241,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=n*t-2.555641816996525e-10,n=1.5076572693500548e-9+n*t,n=n*t-3.789465440126737e-9,n=7.61570120807834e-9+n*t,n=n*t-1.496002662714924e-8,n=2.914795345090108e-8+n*t,n=n*t-6.771199775845234e-8,n=2.2900482228026655e-7+n*t,n=n*t-9.9298272942317e-7,n=4526062597223154e-21+n*t,n=n*t-1968177810553167e-20,n=7599527703001776e-20+n*t,n=n*t-.00021503011930044477,n=n*t-.00013871931833623122,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}(2*e-1)}function _S(e,t){let n,r;const i={mean(a){return arguments.length?(n=a||0,i):n},stdev(a){return arguments.length?(r=a??1,i):r},sample:()=>Fm(n,r),pdf:a=>MS(a,n,r),cdf:a=>Rm(a,n,r),icdf:a=>Om(a,n,r)};return i.mean(e).stdev(t)}function wS(e,t){const n=_S();let r=0;const i={data(a){return arguments.length?(e=a,r=a?a.length:0,i.bandwidth(t)):e},bandwidth(a){return arguments.length?(!(t=a)&&e&&(t=bS(e)),i):t},sample:()=>e[~~(ni()*r)]+t*n.sample(),pdf(a){let s=0,o=0;for(;o<r;++o)s+=n.pdf((a-e[o])/t);return s/t/r},cdf(a){let s=0,o=0;for(;o<r;++o)s+=n.cdf((a-e[o])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function xS(e,t){return e=e||0,t=t??1,Math.exp(e+Fm()*t)}function zS(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*R1e*e)}function HS(e,t,n){return Rm(Math.log(e),t,n)}function SS(e,t,n){return Math.exp(Om(e,t,n))}function O1e(e,t){let n,r;const i={mean(a){return arguments.length?(n=a||0,i):n},stdev(a){return arguments.length?(r=a??1,i):r},sample:()=>xS(n,r),pdf:a=>zS(a,n,r),cdf:a=>HS(a,n,r),icdf:a=>SS(a,n,r)};return i.mean(e).stdev(t)}function P1e(e,t){let r,n=0;const a={weights(s){return arguments.length?(r=function i(s){const o=[];let l,c=0;for(l=0;l<n;++l)c+=o[l]=null==s[l]?1:+s[l];for(l=0;l<n;++l)o[l]/=c;return o}(t=s||[]),a):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),a.weights(t)):e},sample(){const s=ni();let o=e[n-1],c=r[0],l=0;for(;l<n-1;c+=r[++l])if(s<c){o=e[l];break}return o.sample()},pdf(s){let o=0,c=0;for(;c<n;++c)o+=r[c]*e[c].pdf(s);return o},cdf(s){let o=0,c=0;for(;c<n;++c)o+=r[c]*e[c].cdf(s);return o},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function ES(e,t){return null==t&&(t=e??1,e=0),e+(t-e)*ni()}function VS(e,t,n){return null==n&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function DS(e,t,n){return null==n&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function LS(e,t,n){return null==n&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function $1e(e,t){let n,r;const i={min(a){return arguments.length?(n=a||0,i):n},max(a){return arguments.length?(r=a??1,i):r},sample:()=>ES(n,r),pdf:a=>VS(a,n,r),cdf:a=>DS(a,n,r),icdf:a=>LS(a,n,r)};return null==t&&(t=e??1,e=0),i.min(e).max(t)}function AS(e,t,n){let r=0,i=0;for(const a of e){const s=n(a);null==t(a)||null==s||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function z5(e,t,n,r){const i=r-e*e,a=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-a*e,a]}function Pm(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return null!=p&&(p=+p)>=p&&null!=m&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,a=new Float64Array(i),s=new Float64Array(i);let u,f,d,o=0,c=0,l=0;for(d of e)a[o]=u=+t(d),s[o]=f=+n(d),++o,c+=(u-c)/o,l+=(f-l)/o;for(o=0;o<i;++o)a[o]-=c,s[o]-=l;return[a,s,c,l]}function H5(e,t,n,r){let a,s,i=-1;for(const o of e)a=t(o),s=n(o),null!=a&&(a=+a)>=a&&null!=s&&(s=+s)>=s&&r(a,s,++i)}function k6(e,t,n,r,i){let a=0,s=0;return H5(e,t,n,(o,c)=>{const l=c-i(o),u=c-r;a+=l*l,s+=u*u}),1-a/s}function NS(e,t,n){let r=0,i=0,a=0,s=0,o=0;H5(e,t,n,(u,f)=>{++o,r+=(u-r)/o,i+=(f-i)/o,a+=(u*f-a)/o,s+=(u*u-s)/o});const c=z5(r,i,a,s),l=u=>c[0]+c[1]*u;return{coef:c,predict:l,rSquared:k6(e,t,n,i,l)}}function B1e(e,t,n){let r=0,i=0,a=0,s=0,o=0;H5(e,t,n,(u,f)=>{++o,u=Math.log(u),r+=(u-r)/o,i+=(f-i)/o,a+=(u*f-a)/o,s+=(u*u-s)/o});const c=z5(r,i,a,s),l=u=>c[0]+c[1]*Math.log(u);return{coef:c,predict:l,rSquared:k6(e,t,n,i,l)}}function U1e(e,t,n){const[r,i,a,s]=Pm(e,t,n);let d,h,p,o=0,c=0,l=0,u=0,f=0;H5(e,t,n,(y,C)=>{d=r[f++],h=Math.log(C),p=d*C,o+=(C*h-o)/f,c+=(p-c)/f,l+=(p*h-l)/f,u+=(d*p-u)/f});const[m,g]=z5(c/s,o/s,l/s,u/s),v=y=>Math.exp(m+g*(y-a));return{coef:[Math.exp(m-g*a),g],predict:v,rSquared:k6(e,t,n,s,v)}}function j1e(e,t,n){let r=0,i=0,a=0,s=0,o=0,c=0;H5(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++c,r+=(h-r)/c,i+=(p-i)/c,a+=(h*p-a)/c,s+=(h*h-s)/c,o+=(d-o)/c});const l=z5(r,i,a,s),u=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:u,rSquared:k6(e,t,n,o,u)}}function kS(e,t,n){const[r,i,a,s]=Pm(e,t,n),o=r.length;let h,p,m,g,c=0,l=0,u=0,f=0,d=0;for(h=0;h<o;)p=r[h],m=i[h++],g=p*p,c+=(g-c)/h,l+=(g*p-l)/h,u+=(g*g-u)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const v=u-c*c,y=c*v-l*l,C=(d*c-f*l)/y,b=(f*v-d*l)/y,M=-C*c,w=_=>C*(_-=a)*_+b*_+M+s;return{coef:[M-b*a+C*a*a+s,b-2*C*a,C],predict:w,rSquared:k6(e,t,n,s,w)}}function q1e(e,t,n,r){if(0===r)return AS(e,t,n);if(1===r)return NS(e,t,n);if(2===r)return kS(e,t,n);const[i,a,s,o]=Pm(e,t,n),c=i.length,l=[],u=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<c;++p)m+=Math.pow(i[p],d)*a[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<c;++p)m+=Math.pow(i[p],d+h);g[h]=m}u.push(g)}u.push(l);const v=function ait(e){const t=e.length-1,n=[];let r,i,a,s,o;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(a=r;a<t+1;++a)o=e[a][r],e[a][r]=e[a][s],e[a][s]=o;for(i=r+1;i<t;++i)for(a=t;a>=r;a--)e[a][i]-=e[a][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(o=0,a=i+1;a<t;++a)o+=e[a][i]*n[a];n[i]=(e[t][i]-o)/e[i][i]}return n}(u),y=C=>{let b=o+v[0]+v[1]*(C-=s)+v[2]*C*C;for(d=3;d<f;++d)b+=v[d]*Math.pow(C,d);return b};return{coef:iit(f,v,-s,o),predict:y,rSquared:k6(e,t,n,o,y)}}function iit(e,t,n,r){const i=Array(e);let a,s,o,c;for(a=0;a<e;++a)i[a]=0;for(a=e-1;a>=0;--a)for(o=t[a],c=1,i[a]+=o,s=1;s<=a;++s)c*=(a+1-s)/s,i[a-s]+=o*Math.pow(n,s)*c;return i[0]+=r,i}const G1e=2,W1e=1e-12;function Y1e(e,t,n,r){const[i,a,s,o]=Pm(e,t,n,!0),c=i.length,l=Math.max(2,~~(r*c)),u=new Float64Array(c),f=new Float64Array(c),d=new Float64Array(c).fill(1);for(let h=-1;++h<=G1e;){const p=[0,l-1];for(let g=0;g<c;++g){const v=i[g],y=p[0],C=p[1];let M=0,w=0,_=0,z=0,S=0;const D=1/Math.abs(i[v-i[y]>i[C]-v?y:C]-v||1);for(let N=y;N<=C;++N){const x=i[N],H=a[N],V=sit(Math.abs(v-x)*D)*d[N],T=x*V;M+=V,w+=T,_+=H*V,z+=H*T,S+=x*T}const[L,R]=z5(w/M,_/M,z/M,S/M);u[g]=L+R*v,f[g]=Math.abs(a[g]-u[g]),oit(i,g+1,p)}if(h===G1e)break;const m=N1e(f);if(Math.abs(m)<W1e)break;for(let v,y,g=0;g<c;++g)v=f[g]/(6*m),d[g]=v>=1?W1e:(y=1-v*v)*y}return function cit(e,t,n,r){const i=e.length,a=[];let l,s=0,o=0,c=[];for(;s<i;++s)l=e[s]+n,c[0]===l?c[1]+=(t[s]-c[1])/++o:(o=0,c[1]+=r,c=[l,t[s]],a.push(c));return c[1]+=r,a}(i,u,s,o)}function sit(e){return(e=1-e*e*e)*e*e}function oit(e,t,n){const r=e[t];let i=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>i&&e[a]-r<=r-e[i];)n[0]=++i,n[1]=a,++a}const lit=.5*Math.PI/180;function $m(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],a=t[0],s=t[1],o=s-a,c=o/r,l=[i(a)],u=[];if(n===r){for(let m=1;m<r;++m)l.push(i(a+m/n*o));return l.push(i(s)),l}u.push(i(s));for(let m=n;--m>0;)u.push(i(a+m/n*o));let f=l[0],d=u[u.length-1];const h=1/o,p=function uit(e,t){let n=e,r=e;const i=t.length;for(let a=0;a<i;++a){const s=t[a][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}(f[1],u);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=c&&fit(f,m,d,h,p)>lit?u.push(m):(f=d,l.push(d),u.pop()),d=u[u.length-1]}return l}function fit(e,t,n,r,i){const a=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(a-s)}function zr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}function TS(e){return e&&e.length?1===e.length?e[0]:function hit(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}(e):function(){return""}}function X1e(e,t,n){return n||e+(t?"_"+t:"")}const IS=()=>{},pit={init:IS,add:IS,rem:IS,idx:0},S5={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||void 0===e.min)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||void 0===e.max)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},E5=Object.keys(S5).filter(e=>"__count__"!==e);function Q1e(e,t,n){return S5[e](n,t)}function Z1e(e,t){return e.idx-t.idx}function vit(){this.valid=0,this.missing=0,this._ops.forEach(e=>null==e.aggregate_param?e.init(this):e.init(this,e.aggregate_param))}function yit(e,t){null!=e&&""!==e?e==e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t))):++this.missing}function Cit(e,t){null!=e&&""!==e?e==e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t))):--this.missing}function bit(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function K1e(e,t){const n=t||R1,r=function git(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=S5[i]())})};return e.forEach(n),Object.values(t).sort(Z1e)}(e),i=e.slice().sort(Z1e);function a(s){this._ops=r,this._out=i,this.cell=s,this.init()}return a.prototype.init=vit,a.prototype.add=yit,a.prototype.rem=Cit,a.prototype.set=bit,a.prototype.get=n,a.fields=e.map(s=>s.out),a}function FS(e){this._key=e?Kr(e):ke,this.reset()}[...E5,"__count__"].forEach(e=>{S5[e]=function mit(e,t){return(n,r)=>et({name:e,aggregate_param:r,out:n||e},pit,t)}(e,S5[e])});const z1=FS.prototype;function Dc(e){Y.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function RS(e){Y.call(this,null,e)}function J1e(e,t,n){const r=e;let i=t||[],a=n||[],s={},o=0;return{add:c=>a.push(c),remove:c=>s[r(c)]=++o,size:()=>i.length,data:(c,l)=>(o&&(i=i.filter(u=>!s[r(u)]),s={},o=0),l&&c&&i.sort(c),a.length&&(i=c?Xte(c,i,a.sort(c)):i.concat(a),a=[]),i)}}function OS(e){Y.call(this,[],e)}function e2e(e){jt.call(this,null,_it,e)}function _it(e){return this.value&&!e.modified()?this.value:CH(e.fields,e.orders)}function PS(e){Y.call(this,null,e)}function $S(e){Y.call(this,null,e)}z1.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},z1.add=function(e){this._add.push(e)},z1.rem=function(e){this._rem.push(e)},z1.values=function(){if(this._get=null,0===this._rem.length)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,a=Array(r-i),s={};let o,c,l;for(o=0;o<i;++o)s[n(t[o])]=1;for(o=0,c=0;o<r;++o)s[n(l=e[o])]?s[n(l)]=0:a[c++]=l;return this._rem=[],this._add=a},z1.distinct=function(e){const t=this.values(),n={};let a,r=t.length,i=0;for(;--r>=0;)a=e(t[r])+"",Ne(n,a)||(n[a]=1,++i);return i},z1.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=Ute(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},z1.argmin=function(e){return this.extent(e)[0]||{}},z1.argmax=function(e){return this.extent(e)[1]||{}},z1.min=function(e){const t=this.extent(e)[0];return null!=t?e(t):void 0},z1.max=function(e){const t=this.extent(e)[1];return null!=t?e(t):void 0},z1.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=CS(this.values(),e),this._get=e),this._q},z1.q1=function(e){return this.quartile(e)[0]},z1.q2=function(e){return this.quartile(e)[1]},z1.q3=function(e){return this.quartile(e)[2]},z1.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=I1e(this.values(),1e3,.05,e),this._get=e),this._ci},z1.ci0=function(e){return this.ci(e)[0]},z1.ci1=function(e){return this.ci(e)[1]},Dc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:E5},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},le(Dc,Y,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),r.modifies(n._outputs),n._drop=!1!==e.drop,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function a(o){let c,l,u,f;for(c in o)for(u=o[c].tuple,l=0;l<i;++l)r[l][f=u[n[l]]]=f}a(e._prev),a(t),function s(o,c,l){const u=n[l],f=r[l++];for(const d in f){const h=o?o+"|"+d:d;c[u]=f[d],l<i?s(h,c,l):t[h]||e.cell(h,c)}}("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(y){const C=me(F1(y)),b=C.length;let w,M=0;for(;M<b;++M)r[w=C[M]]||(r[w]=1,t.push(w))}this._dims=me(e.groupby),this._dnames=this._dims.map(y=>{const C=wn(y);return i(y),n.push(C),C}),this.cellkey=e.key?e.key:TS(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],o=e.aggregate_params||[null],c=e.as||[],l=a.length,u={};let f,d,h,p,m,g,v;for(l!==s.length&&Z("Unmatched number of fields and aggregate ops."),v=0;v<l;++v)f=a[v],d=s[v],h=o[v]||null,null==f&&"count"!==d&&Z("Null aggregate field specified."),m=wn(f),g=X1e(d,m,c[v]),n.push(g),"count"!==d?(p=u[m],p||(i(f),p=u[m]=[],p.field=f,this._measures.push(p)),"count"!==d&&(this._countOnly=!1),p.push(Q1e(d,h,g))):this._counts.push(g);return this._measures=this._measures.map(y=>K1e(y,y.field)),Object.create(null)},cellkey:TS(),cell(e,t){let n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let a=0;a<i;++a)n.agg[a]=new r[a](n)}return n.store&&(n.data=new FS),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,a={};for(let s=0;s<i;++s)a[n[s]]=r[s](e);return t?v1e(t.tuple,a):xt(a)},clean(){const e=this.value;for(const t in e)0===e[t].num&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,a=r.length;i<a;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,a=r.length;i<a;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,a=r.length;i<a;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,a=e.add,s=e.rem,o=e.mod;let c,l,u,f;if(r)for(l in r)c=r[l],(!i||c.num)&&s.push(c.tuple);for(u=0,f=this._alen;u<f;++u)a.push(this.celltuple(t[u])),t[u]=null;for(u=0,f=this._mlen;u<f;++u)c=n[u],(0===c.num&&i?s:o).push(this.celltuple(c)),n[u]=null;return this._alen=this._mlen=0,this._prev=null,e}}),RS.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},le(RS,Y,{transform(e,t){const n=!1!==e.interval,r=this._bins(e),i=r.start,a=r.step,s=e.as||["bin0","bin1"],o=s[0],c=s[1];let l;return l=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(F1(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?u=>{const f=r(u);u[o]=f,u[c]=null==f?null:i+a*(1+(f-i)/a)}:u=>u[o]=r(u)),t.modifies(n?s:o)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=T1e(e),r=n.step;let s,o,i=n.start,a=i+Math.ceil((n.stop-i)/r)*r;null!=(s=e.anchor)&&(o=s-(i+r*Math.floor((s-i)/r)),i+=o,a+=o);const c=function(l){let u=O1(t(l));return null==u?null:u<i?-1/0:u>a?1/0:(u=Math.max(i,Math.min(u,a-r)),i+r*Math.floor(1e-14+(u-i)/r))};return c.start=i,c.stop=n.stop,c.step=r,this.value=$2(c,F1(t),e.name||"bin_"+wn(t))}}),OS.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},le(OS,Y,{transform(e,t){const n=t.fork(t.ALL),r=J1e(ke,this.value,n.materialize(n.ADD).add),i=e.sort,a=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(S4(i),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}}),le(e2e,jt),PS.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},le(PS,Y,{transform(e,t){const n=f=>d=>{for(var p,h=function wit(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(o(d),e.case,a)||[],m=0,g=h.length;m<g;++m)s.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,a=this._match,s=this._stop,o=e.field,c=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),u=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,u)),this._finish(t,c)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,c,l;for(o in n)c=r[o],l=n[o]||0,!c&&l?(r[o]=c=xt({}),c[i]=o,c[a]=l,s.add.push(c)):0===l?(c&&s.rem.push(c),n[o]=null,r[o]=null):c[a]!==l&&(c[a]=l,s.mod.push(c));return s.modifies(t)}}),$S.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},le($S,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],a=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return s?(o&&(n.rem=o),o=t.materialize(t.SOURCE).source,n.add=this.value=function xit(e,t,n,r){for(var c,l,i=[],a={},s=e.length,o=0;o<s;++o)for(a[t]=l=e[o],c=0;c<s;++c)a[n]=e[c],r(a)&&(i.push(xt(a)),(a={})[t]=l);return i}(o,i,a,e.filter||Jr)):n.mod=o,n.source=this.value,n.modifies(r)}});const t2e={kde:wS,mixture:P1e,normal:_S,lognormal:O1e,uniform:$1e};function r2e(e,t){const n=e.function;Ne(t2e,n)||Z("Unknown distribution function: "+n);const r=t2e[n]();for(const i in e)"field"===i?r.data((e.from||t()).map(e[i])):"distributions"===i?r[i](e[i].map(a=>r2e(a,t))):"function"==typeof r[i]&&r[i](e[i]);return r}function BS(e){Y.call(this,null,e)}const i2e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}];function a2e(e,t){return e?e.map((n,r)=>t[r]||wn(n)):null}function US(e,t,n){const r=[],i=f=>f(c);let a,s,o,c,l,u;if(null==t)r.push(e.map(n));else for(a={},s=0,o=e.length;s<o;++s)c=e[s],l=t.map(i),u=a[l],u||(a[l]=u=[],u.dims=l,r.push(u)),u.push(n(c));return r}function jS(e){Y.call(this,null,e)}function o2e(e){jt.call(this,null,Dit,e),this.modified(!0)}function Dit(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:$2(n=>t(n,e),F1(t),wn(t))}function qS(e){Y.call(this,[void 0,void 0],e)}function GS(e,t){jt.call(this,e),this.parent=t,this.count=0}function Bm(e){Y.call(this,{},e),this._keys=y6();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}function c2e(e){jt.call(this,null,Lit,e)}function Lit(e){return this.value&&!e.modified()?this.value:K(e.name)?me(e.name).map(t=>Kr(t)):Kr(e.name,e.as)}function WS(e){Y.call(this,y6(),e)}function YS(e){Y.call(this,[],e)}function XS(e){Y.call(this,[],e)}function QS(e){Y.call(this,null,e)}function l2e(e){Y.call(this,[],e)}BS.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:i2e.concat({key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:i2e},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,default:["value","density"]}]},le(BS,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=r2e(e.distribution,function Eit(e){return()=>e.materialize(e.SOURCE).source}(t)),i=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let s=e.method||"pdf";"pdf"!==s&&"cdf"!==s&&Z("Invalid density method: "+s),!e.extent&&!r.data&&Z("Missing density extent parameter."),s=r[s];const o=e.as||["value","density"],l=$m(s,e.extent||Wa(r.data()),i,a).map(u=>{const f={};return f[o[0]]=u[0],f[o[1]]=u[1],xt(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}}),jS.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]},le(jS,Y,{transform(e,t){if(this.value&&!e.modified()&&!t.changed())return t;const n=t.materialize(t.SOURCE).source,r=US(t.source,e.groupby,R1),i=e.smooth||!1,a=e.field,s=e.step||((e,t)=>a5(Wa(e,t))/30)(n,a),o=S4((p,m)=>a(p)-a(m)),c=e.as||"bin",l=r.length;let h,u=1/0,f=-1/0,d=0;for(;d<l;++d){const p=r[d].sort(o);h=-1;for(const m of F1e(p,s,i,a))m<u&&(u=m),m>f&&(f=m),p[++h][c]=m}return this.value={start:u,stop:f,step:s},t.reflow(!0).modifies(c)}}),le(o2e,jt),qS.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},le(qS,Y,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let a=n[0],s=n[1];if((i||null==a)&&(a=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,o=>{const c=O1(r(o));null!=c&&(c<a&&(a=c),c>s&&(s=c))}),!Number.isFinite(a)||!Number.isFinite(s)){let o=wn(r);o&&(o=` for field "${o}"`),t.dataflow.warn(`Infinite extent${o}: [${a}, ${s}]`),a=s=void 0}this.value=[a,s]}}),le(GS,jt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}}),le(Bm,Y,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s,o,a=Ne(i,e)&&i[e];return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(o=r||(o=this._group[e])&&o.tuple,s=n.dataflow,a=new GS(n.fork(n.NO_SOURCE),this),s.add(a).connect(t(s,e,o)),i[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(0===e[n].count){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&null!=t[i];++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,a=this._keys,s=e.modified("key"),o=c=>this.subflow(c,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,c=>{const l=ke(c),u=a.get(l);void 0!==u&&(a.delete(l),o(u).rem(c))}),t.visit(t.ADD,c=>{const l=r(c);a.set(ke(c),l),o(l).add(c)}),s||t.modified(r.fields)?t.visit(t.MOD,c=>{const l=ke(c),u=a.get(l),f=r(c);u===f?o(f).mod(c):(a.set(l,f),o(u).rem(c),o(f).add(c))}):t.changed(t.MOD)&&t.visit(t.MOD,c=>{o(a.get(ke(c))).mod(c)}),s&&t.visit(t.REFLOW,c=>{const l=ke(c),u=a.get(l),f=r(c);u!==f&&(a.set(l,f),o(u).rem(c),o(f).add(c))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}}),le(c2e,jt),WS.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},le(WS,Y,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),a=i.add,s=i.rem,o=i.mod,c=e.expr;let l=!0;function u(f){const d=ke(f),h=c(f,e),p=r.get(d);h&&p?(r.delete(d),a.push(f)):h||p?l&&h&&!p&&o.push(f):(r.set(d,1),s.push(f))}return t.visit(t.REM,f=>{const d=ke(f);r.has(d)?r.delete(d):s.push(f)}),t.visit(t.ADD,f=>{c(f,e)?a.push(f):r.set(ke(f),1)}),t.visit(t.MOD,u),e.modified()&&(l=!1,t.visit(t.REFLOW,u)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}}),YS.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},le(YS,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=a2e(r,e.as||[]),a=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,o=>{const c=r.map(p=>p(o)),l=c.reduce((p,m)=>Math.max(p,m.length),0);let f,d,h,u=0;for(;u<l;++u){for(d=cS(o),f=0;f<s;++f)d[i[f]]=null==(h=c[f][u])?null:h;a&&(d[a]=u),n.add.push(d)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(i)}}),XS.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},le(XS,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(wn),a=e.as||["key","value"],s=a[0],o=a[1],c=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let f,u=0;u<c;++u)f=cS(l),f[s]=i[u],f[o]=r[u](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(a)}}),QS.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},le(QS,Y,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),a=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(a,s=>s[r]=n(s,e))}}),le(l2e,Y,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let s,o,c,i=this.value,a=e.size-i.length;if(a>0){for(s=[];--a>=0;)s.push(c=xt(r(e))),i.push(c);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else o=i.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,i=i.slice(-a);return n.source=this.value=i,n}});const Um={value:"value",median:N1e,mean:function dit(e,t){let n=0,r=0;if(void 0===t)for(let i of e)null!=i&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)null!=(a=t(a,++i,e))&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n},min:gS,max:V4},Ait=[];function ZS(e){Y.call(this,[],e)}function KS(e){Dc.call(this,e)}function JS(e){Y.call(this,null,e)}function u2e(e){jt.call(this,null,Iit,e)}function Iit(e){return this.value&&!e.modified()?this.value:MH(e.fields,e.flat)}function f2e(e){Y.call(this,[],e),this._pending=null}function eE(e,t,n){n.forEach(xt);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function tE(e){Y.call(this,{},e)}function d2e(e){jt.call(this,null,Rit,e)}function Rit(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let a,s,r=1/0,i=-1/0;for(a=0;a<n;++a)s=t[a],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function h2e(e){jt.call(this,null,Oit,e)}function Oit(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function p2e(e){Y.call(this,null,e)}function nE(e){Dc.call(this,e)}function m2e(e){Bm.call(this,e)}function rE(e){Y.call(this,null,e)}function g2e(e){Y.call(this,null,e)}function iE(e){Y.call(this,null,e)}function v2e(e){Y.call(this,null,e)}function aE(e){Y.call(this,[],e),this.count=0}function sE(e){Y.call(this,null,e)}function y2e(e){Y.call(this,null,e),this.modified(!0)}function oE(e){Y.call(this,null,e)}ZS.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},le(ZS,Y,{transform(e,t){var d,h,p,m,g,v,y,C,b,M,n=t.fork(t.ALL),r=function Nit(e){var n,t=e.method||Um.value;if(null!=Um[t])return t===Um.value?(n=void 0!==e.value?e.value:0,()=>n):Um[t];Z("Unrecognized imputation method: "+t)}(e),i=function kit(e){const t=e.field;return n=>n?t(n):NaN}(e),a=wn(e.field),s=wn(e.key),o=(e.groupby||[]).map(wn),c=function Tit(e,t,n,r){var l,u,f,d,h,p,m,g,i=v=>v(g),a=[],s=r?r.slice():[],o={},c={};for(s.forEach((v,y)=>o[v]=y+1),d=0,m=e.length;d<m;++d)p=n(g=e[d]),h=o[p]||(o[p]=s.push(p)),(f=c[u=(l=t?t.map(i):Ait)+""])||(f=c[u]=[],a.push(f),f.values=l),f[h-1]=g;return a.domain=s,a}(t.source,e.groupby,e.key,e.keyvals),l=[],u=this.value,f=c.domain.length;for(g=0,C=c.length;g<C;++g)for(p=(d=c[g]).values,h=NaN,y=0;y<f;++y)if(null==d[y]){for(m=c.domain[y],M={_impute:!0},v=0,b=p.length;v<b;++v)M[o[v]]=p[v];M[s]=m,M[a]=Number.isNaN(h)?h=r(d,i):h,l.push(xt(M))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),u.length&&(n.rem=n.materialize(n.REM).rem.concat(u)),this.value=l,n}}),KS.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:E5},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},le(KS,Dc,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(i=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{et(a,i[n.cellkey(a)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}}),JS.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},le(JS,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=US(r,e.groupby,e.field),a=(e.groupby||[]).map(wn),s=e.bandwidth,o=e.cumulative?"cdf":"pdf",c=e.as||["value","density"],l=[];let u=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;"pdf"!==o&&"cdf"!==o&&Z("Invalid density method: "+o),"shared"===e.resolve&&(u||(u=Wa(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=wS(h,s)[o],m=e.counts?h.length:1;$m(p,u||Wa(h),f,d).forEach(v=>{const y={};for(let C=0;C<a.length;++C)y[a[C]]=h.dims[C];y[c[0]]=v[0],y[c[1]]=v[1]*m,l.push(xt(y))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}}),le(u2e,jt),le(f2e,Y,{transform(e,t){const n=t.dataflow;return this._pending?eE(this,t,this._pending):function Fit(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e)?t.StopPropagation:e.values?eE(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=me(i.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(r=>eE(this,t,me(r.data)))}}),tE.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},le(tE,Y,{transform(e,t){const n=e.fields,r=e.index,i=e.values,a=null==e.default?null:e.default,s=e.modified(),o=n.length;let f,d,h,c=s?t.SOURCE:t.ADD,l=t,u=e.as;return i?(d=i.length,o>1&&!u&&Z('Multi-field lookup requires explicit "as" parameter.'),u&&u.length!==o*d&&Z('The "as" parameter has too few output field names.'),u=u||i.map(wn),f=function(p){for(var v,y,m=0,g=0;m<o;++m)if(null==(y=r.get(n[m](p))))for(v=0;v<d;++v,++g)p[u[g]]=a;else for(v=0;v<d;++v,++g)p[u[g]]=i[v](y)}):(u||Z("Missing output field names."),f=function(p){for(var g,m=0;m<o;++m)g=r.get(n[m](p)),p[u[m]]=g??a}),s?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),c|=h?t.MOD:0),t.visit(c,f),l.modifies(u)}}),le(d2e,jt),le(h2e,jt),le(p2e,Y,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),nE.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:E5,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},le(nE,Dc,{_transform:Dc.prototype.transform,transform(e,t){return this._transform(function Pit(e,t){const n=e.field,r=e.value,i=("count"===e.op?"__count__":e.op)||"sum",a=F1(n).concat(F1(r)),s=function Bit(e,t,n){const r={},i=[];return n.visit(n.SOURCE,a=>{const s=e(a);r[s]||(r[s]=1,i.push(s))}),i.sort(um),t?i.slice(0,t):i}(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(o=>function $it(e,t,n,r){return $2(i=>t(i)===e?n(i):NaN,r,e+"")}(o,n,r,a)),as:s.map(o=>o+""),modified:e.modified.bind(e)}}(e,t),t)}}),le(m2e,Bm,{transform(e,t){const n=e.subflow,r=e.field,i=a=>this.subflow(ke(a),n,t,a);return(e.modified("field")||r&&t.modified(F1(r)))&&Z("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,a=>{const s=i(a);r(a).forEach(o=>s.mod(o))}),t.visit(t.ADD,a=>{const s=i(a);r(a).forEach(o=>s.add(xt(o)))}),t.visit(t.REM,a=>{const s=i(a);r(a).forEach(o=>s.rem(o))})):(t.visit(t.MOD,a=>i(a).mod(a)),t.visit(t.ADD,a=>i(a).add(a)),t.visit(t.REM,a=>i(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}}),rE.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},le(rE,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=a2e(e.fields,e.as||[]),a=r?(o,c)=>function Uit(e,t,n,r){for(let i=0,a=n.length;i<a;++i)t[r[i]]=n[i](e);return t}(o,c,r,i):Dm;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,o=>{const c=ke(o);n.rem.push(s[c]),s[c]=null}),t.visit(t.ADD,o=>{const c=a(o,xt({}));s[ke(o)]=c,n.add.push(c)}),t.visit(t.MOD,o=>{n.mod.push(a(o,s[ke(o)]))}),n}}),le(g2e,Y,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}}),iE.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]},le(iE,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const a=US(t.materialize(t.SOURCE).source,e.groupby,e.field),s=(e.groupby||[]).map(wn),o=[],c=e.step||.01,l=e.probs||zr(c/2,1-1e-14,c),u=l.length;return a.forEach(f=>{const d=yS(f,l);for(let h=0;h<u;++h){const p={};for(let m=0;m<s.length;++m)p[s[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],o.push(xt(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}}),le(v2e,Y,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const a=ke(i);n.rem.push(r[a]),r[a]=null}),t.visit(t.ADD,i=>{const a=cS(i);r[ke(i)]=a,n.add.push(a)}),t.visit(t.MOD,i=>{const a=r[ke(i)];for(const s in i)a[s]=i[s],n.modifies(s);n.mod.push(a)})),n}}),aE.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},le(aE,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,a=this.value.reduce((u,f)=>(u[ke(f)]=1,u),{});let s=this.value,o=this.count,c=0;function l(u){let f,d;s.length<i?s.push(u):(d=~~((o+1)*ni()),d<s.length&&d>=c&&(f=s[d],a[ke(f)]&&n.rem.push(f),s[d]=u)),++o}if(t.rem.length&&(t.visit(t.REM,u=>{const f=ke(u);a[f]&&(a[f]=-1,n.rem.push(u)),--o}),s=s.filter(u=>-1!==a[ke(u)])),(t.rem.length||r)&&s.length<i&&t.source&&(c=o=s.length,t.visit(t.SOURCE,u=>{a[ke(u)]||l(u)}),c=-1),r&&s.length>i){const u=s.length-i;for(let f=0;f<u;++f)a[ke(s[f])]=-1,n.rem.push(s[f]);s=s.slice(u)}return t.mod.length&&t.visit(t.MOD,u=>{a[ke(u)]&&n.mod.push(u)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||c<0)&&(n.add=s.filter(u=>!a[ke(u)])),this.count=o,this.value=n.source=s,n}}),sE.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},le(sE,Y,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=zr(e.start,e.stop,e.step||1).map(i=>{const a={};return a[r]=i,xt(a)}),n.add=t.add.concat(this.value),n}}),le(y2e,Y,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});const C2e=["unit0","unit1"];function b2e(e){Y.call(this,y6(),e)}function M2e(e){Y.call(this,null,e)}oE.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:IH,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:C2e}]},le(oE,Y,{transform(e,t){const n=e.field,r=!1!==e.interval,i="utc"===e.timezone,a=this._floor(e,t),s=(i?V6:E6)(a.unit).offset,o=e.as||C2e,c=o[0],l=o[1],u=a.step;let f=a.start||1/0,d=a.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(F1(n)))&&(h=(t=t.reflow(!0)).SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,v;null==m?(p[c]=null,r&&(p[l]=null)):(p[c]=g=v=a(m),r&&(p[l]=v=s(g,u)),g<f&&(f=g),v>d&&(d=v))}),a.start=f,a.stop=d,t.modifies(r?o:c)},_floor(e,t){const n="utc"===e.timezone,{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:Tne({extent:e.extent||Wa(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=RH(r),s=this.value||{},o=(n?xne:wne)(a,i);return o.unit=lt(a),o.units=a,o.step=i,o.start=s.start,o.stop=s.stop,this.value=o}}),le(b2e,Y,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,a=o=>i.set(r(o),o);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,o=>i.delete(r(o))),t.visit(t.ADD,a)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}}),le(M2e,Y,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(S4(e.sort)):t.source).map(e.field))}});const V5={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=V5.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){(t=+t)>0||Z("ntile num must be greater than zero.");const n=V5.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return(t=+t)>0||Z("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return null!=r?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=function Git(e,t,n){for(let r=t.length;n<r;++n)if(null!=e(t[n]))return n;return-1}(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}},Wit=Object.keys(V5);function _2e(e){const t=me(e.ops),n=me(e.fields),r=me(e.params),i=me(e.aggregate_params),a=me(e.as),s=this.outputs=[],o=this.windows=[],c={},l={},u=[],f=[];let d=!0;function h(p){me(F1(p)).forEach(m=>c[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],v=r[m],y=i[m]||null,C=wn(g),b=X1e(p,C,a[m]);if(h(g),s.push(b),Ne(V5,p))o.push(function qit(e,t,n,r){const i=V5[e](t,n);return{init:i.init||bc,update:function(a,s){s[r]=i.next(a)}}}(p,g,v,b));else{if(null==g&&"count"!==p&&Z("Null aggregate field specified."),"count"===p)return void u.push(b);d=!1;let M=l[C];M||(M=l[C]=[],M.field=g,f.push(M)),M.push(Q1e(p,y,b))}}),(u.length||f.length)&&(this.cell=function Yit(e,t,n){e=e.map(c=>K1e(c,c.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,a=r.agg=Array(i),s=0;s<i;++s)a[s]=new e[s](r);if(r.store)var o=r.data=new FS;return r.add=function(c){if(r.num+=1,!n){o&&o.add(c);for(let l=0;l<i;++l)a[l].add(a[l].get(c),c)}},r.rem=function(c){if(r.num-=1,!n){o&&o.rem(c);for(let l=0;l<i;++l)a[l].rem(a[l].get(c),c)}},r.set=function(c){let l,u;for(o&&o.values(),l=0,u=t.length;l<u;++l)c[t[l]]=r.num;if(!n)for(l=0,u=a.length;l<u;++l)a[l].set(c)},r.init=function(){r.num=0,o&&o.reset();for(let c=0;c<i;++c)a[c].init()},r}(f,u,d)),this.inputs=Object.keys(c)}const w2e=_2e.prototype;function cE(e){Y.call(this,{},e),this._mlen=0,this._mods=[]}function Xit(e,t,n,r){const i=r.sort,a=i&&!r.ignorePeers,s=r.frame||[null,0],o=e.data(n),c=o.length,l=a?H6(i):null,u={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:i||P1(-1)};t.init();for(let f=0;f<c;++f)Qit(u,s,f,c),a&&Zit(u,l),t.update(u,o[f])}function Qit(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Zit(e,t){const n=e.i0,r=e.i1-1,i=e.compare,a=e.data,s=a.length-1;n>0&&!i(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),r<s&&!i(a[r],a[r+1])&&(e.i1=t.right(a,a[r]))}function jm(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function qm(e){this._context=e}function Lc(){}function x2e(e){this._context=e}function z2e(e){this._context=e}function H2e(e,t){this._basis=new qm(e),this._beta=t}w2e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()},w2e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,a=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<a;++s)r[s].update(e,t)},cE.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Wit.concat(E5)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},le(cE,Y,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=S4(e.sort),i=TS(e.groupby),a=o=>this.group(i(o));let s=this.state;(!s||n)&&(s=this.state=new _2e(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,o=>a(o).add(o))):(t.visit(t.REM,o=>a(o).remove(o)),t.visit(t.ADD,o=>a(o).add(o)));for(let o=0,c=this._mlen;o<c;++o)Xit(this._mods[o],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=J1e(ke),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}}),qm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jm(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},x2e.prototype={areaStart:Lc,areaEnd:Lc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:jm(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},z2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:jm(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},H2e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var c,r=e[0],i=t[0],a=e[n]-r,s=t[n]-i,o=-1;++o<=n;)this._basis.point(this._beta*e[o]+(1-this._beta)*(r+(c=o/n)*a),this._beta*t[o]+(1-this._beta)*(i+c*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const tat=function e(t){function n(r){return 1===t?new qm(r):new H2e(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function Gm(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function lE(e,t){this._context=e,this._k=(1-t)/6}lE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Gm(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Gm(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const nat=function e(t){function n(r){return new lE(r,t)}return n.tension=function(r){return e(+r)},n}(0);function uE(e,t){this._context=e,this._k=(1-t)/6}uE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Gm(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const rat=function e(t){function n(r){return new uE(r,t)}return n.tension=function(r){return e(+r)},n}(0);function fE(e,t){this._context=e,this._k=(1-t)/6}fE.prototype={areaStart:Lc,areaEnd:Lc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Gm(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const iat=function e(t){function n(r){return new fE(r,t)}return n.tension=function(r){return e(+r)},n}(0),S2e=Math.abs,U1=Math.atan2,mo=Math.cos,aat=Math.max,T6=Math.min,q2=Math.sin,nn=Math.sqrt,j1=1e-12,Ac=Math.PI,Wm=Ac/2,D5=2*Ac;function E2e(e){return e>=1?Wm:e<=-1?-Wm:Math.asin(e)}function dE(e,t,n){var r=e._x1,i=e._y1,a=e._x2,s=e._y2;if(e._l01_a>j1){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>j1){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/u,s=(s*l+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,a,s,e._x2,e._y2)}function V2e(e,t){this._context=e,this._alpha=t}V2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:dE(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const oat=function e(t){function n(r){return t?new V2e(r,t):new lE(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function D2e(e,t){this._context=e,this._alpha=t}D2e.prototype={areaStart:Lc,areaEnd:Lc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:dE(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const cat=function e(t){function n(r){return t?new D2e(r,t):new fE(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function L2e(e,t){this._context=e,this._alpha=t}L2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:dE(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const lat=function e(t){function n(r){return t?new L2e(r,t):new uE(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function A2e(e){this._context=e}function hE(e){return new A2e(e)}function N2e(e){this._context=e}function k2e(e){return e<0?-1:1}function T2e(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(k2e(a)+k2e(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function I2e(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function pE(e,t,n){var r=e._x0,a=e._x1,s=e._y1,o=(a-r)/3;e._context.bezierCurveTo(r+o,e._y0+o*t,a-o,s-o*n,a,s)}function Ym(e){this._context=e}function F2e(e){this._context=new R2e(e)}function R2e(e){this._context=e}function O2e(e){this._context=e}function P2e(e){var t,r,n=e.length-1,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)a[t]-=r=i[t]/a[t-1],s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Xm(e,t){this._context=e,this._t=t}function Ht(e){return function(){return e}}A2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},N2e.prototype={areaStart:Lc,areaEnd:Lc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Ym.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pE(this,this._t0,I2e(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,pE(this,I2e(this,n=T2e(this,e,t)),n);break;default:pE(this,this._t0,n=T2e(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(F2e.prototype=Object.create(Ym.prototype)).point=function(e,t){Ym.prototype.point.call(this,t,e)},R2e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},O2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=P2e(e),i=P2e(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Xm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};const mE=Math.PI,gE=2*mE,D4=1e-6,vat=gE-D4;function $2e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class Qm{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?$2e:function yat(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return $2e;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,(a=+a)<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-t,l=i-n,u=s-t,f=o-n,d=u*u+f*f;if(null===this._x1)this._append`M${this._x1=t},${this._y1=n}`;else if(d>D4)if(Math.abs(f*c-l*u)>D4&&a){let h=r-s,p=i-o,m=c*c+l*l,g=h*h+p*p,v=Math.sqrt(m),y=Math.sqrt(d),C=a*Math.tan((mE-Math.acos((m+d-g)/(2*v*y)))/2),b=C/y,M=C/v;Math.abs(b-1)>D4&&this._append`L${t+b*u},${n+b*f}`,this._append`A${a},${a},0,0,${+(f*h>u*p)},${this._x1=t+M*c},${this._y1=n+M*l}`}else this._append`L${this._x1=t},${this._y1=n}`}arc(t,n,r,i,a,s){if(t=+t,n=+n,s=!!s,(r=+r)<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),l=t+o,u=n+c,f=1^s,d=s?i-a:a-i;null===this._x1?this._append`M${l},${u}`:(Math.abs(this._x1-l)>D4||Math.abs(this._y1-u)>D4)&&this._append`L${l},${u}`,r&&(d<0&&(d=d%gE+gE),d>vat?this._append`A${r},${r},0,1,${f},${t-o},${n-c}A${r},${r},0,1,${f},${this._x1=l},${this._y1=u}`:d>D4&&this._append`A${r},${r},0,${+(d>=mE)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Zm(){return new Qm}function Km(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Qm(t)}function Cat(e){return e.innerRadius}function bat(e){return e.outerRadius}function Mat(e){return e.startAngle}function _at(e){return e.endAngle}function wat(e){return e&&e.padAngle}function Jm(e,t,n,r,i,a,s){var o=e-n,c=t-r,l=(s?a:-a)/nn(o*o+c*c),u=l*c,f=-l*o,d=e+u,h=t+f,p=n+u,m=r+f,g=(d+p)/2,v=(h+m)/2,y=p-d,C=m-h,b=y*y+C*C,M=i-a,w=d*m-p*h,_=(C<0?-1:1)*nn(aat(0,M*M*b-w*w)),z=(w*C-y*_)/b,S=(-w*y-C*_)/b,D=(w*C+y*_)/b,L=(-w*y+C*_)/b,R=z-g,N=S-v,x=D-g,H=L-v;return R*R+N*N>x*x+H*H&&(z=D,S=L),{cx:z,cy:S,x01:-u,y01:-f,x11:z*(i/M-1),y11:S*(i/M-1)}}function B2e(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function U2e(e){return e[0]}function j2e(e){return e[1]}function q2e(e,t){var n=Ht(!0),r=null,i=hE,a=null,s=Km(o);function o(c){var l,f,h,u=(c=B2e(c)).length,d=!1;for(null==r&&(a=i(h=s())),l=0;l<=u;++l)!(l<u&&n(f=c[l],l,c))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+e(f,l,c),+t(f,l,c));if(h)return a=null,h+""||null}return e="function"==typeof e?e:void 0===e?U2e:Ht(e),t="function"==typeof t?t:void 0===t?j2e:Ht(t),o.x=function(c){return arguments.length?(e="function"==typeof c?c:Ht(+c),o):e},o.y=function(c){return arguments.length?(t="function"==typeof c?c:Ht(+c),o):t},o.defined=function(c){return arguments.length?(n="function"==typeof c?c:Ht(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,null!=r&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(null==c?r=a=null:a=i(r=c),o):r},o}function G2e(e,t,n){var r=null,i=Ht(!0),a=null,s=hE,o=null,c=Km(l);function l(f){var d,h,p,g,y,m=(f=B2e(f)).length,v=!1,C=new Array(m),b=new Array(m);for(null==a&&(o=s(y=c())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===v)if(v=!v)h=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=d-1;p>=h;--p)o.point(C[p],b[p]);o.lineEnd(),o.areaEnd()}v&&(C[d]=+e(g,d,f),b[d]=+t(g,d,f),o.point(r?+r(g,d,f):C[d],n?+n(g,d,f):b[d]))}if(y)return o=null,y+""||null}function u(){return q2e().defined(i).curve(s).context(a)}return e="function"==typeof e?e:void 0===e?U2e:Ht(+e),t="function"==typeof t?t:Ht(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?j2e:Ht(+n),l.x=function(f){return arguments.length?(e="function"==typeof f?f:Ht(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e="function"==typeof f?f:Ht(+f),l):e},l.x1=function(f){return arguments.length?(r=null==f?null:"function"==typeof f?f:Ht(+f),l):r},l.y=function(f){return arguments.length?(t="function"==typeof f?f:Ht(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t="function"==typeof f?f:Ht(+f),l):t},l.y1=function(f){return arguments.length?(n=null==f?null:"function"==typeof f?f:Ht(+f),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(f){return arguments.length?(i="function"==typeof f?f:Ht(!!f),l):i},l.curve=function(f){return arguments.length?(s=f,null!=a&&(o=s(a)),l):s},l.context=function(f){return arguments.length?(null==f?a=o=null:o=s(a=f),l):a},l}Zm.prototype=Qm.prototype,nn(3);const vE={draw(e,t){const n=nn(t/Ac);e.moveTo(n,0),e.arc(0,0,n,0,D5)}};nn(1/3),q2(Ac/10),q2(7*Ac/10);function Nc(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}q2(D5/10),mo(D5/10),nn(3),nn(3),nn(3),nn(12);const X2e=H6(ho),eg=X2e.right,Wat=X2e.left,L5=(H6(L1e),eg);function I6(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function A5(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function kc(){}var F6=1/.7,R6="\\s*([+-]?\\d+)\\s*",N5="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ka="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yat=/^#([0-9a-f]{3,8})$/,Xat=new RegExp(`^rgb\\(${R6},${R6},${R6}\\)$`),Qat=new RegExp(`^rgb\\(${Ka},${Ka},${Ka}\\)$`),Zat=new RegExp(`^rgba\\(${R6},${R6},${R6},${N5}\\)$`),Kat=new RegExp(`^rgba\\(${Ka},${Ka},${Ka},${N5}\\)$`),Jat=new RegExp(`^hsl\\(${N5},${Ka},${Ka}\\)$`),est=new RegExp(`^hsla\\(${N5},${Ka},${Ka},${N5}\\)$`),Q2e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Z2e(){return this.rgb().formatHex()}function K2e(){return this.rgb().formatRgb()}function k5(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Yat.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?J2e(t):3===n?new t1(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?tg(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?tg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Xat.exec(e))?new t1(t[1],t[2],t[3],1):(t=Qat.exec(e))?new t1(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Zat.exec(e))?tg(t[1],t[2],t[3],t[4]):(t=Kat.exec(e))?tg(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Jat.exec(e))?nre(t[1],t[2]/100,t[3]/100,1):(t=est.exec(e))?nre(t[1],t[2]/100,t[3]/100,t[4]):Q2e.hasOwnProperty(e)?J2e(Q2e[e]):"transparent"===e?new t1(NaN,NaN,NaN,0):null}function J2e(e){return new t1(e>>16&255,e>>8&255,255&e,1)}function tg(e,t,n,r){return r<=0&&(e=t=n=NaN),new t1(e,t,n,r)}function bE(e){return e instanceof kc||(e=k5(e)),e?new t1((e=e.rgb()).r,e.g,e.b,e.opacity):new t1}function Tc(e,t,n,r){return 1===arguments.length?bE(e):new t1(e,t,n,r??1)}function t1(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function ere(){return`#${N4(this.r)}${N4(this.g)}${N4(this.b)}`}function tre(){const e=ng(this.opacity);return`${1===e?"rgb(":"rgba("}${A4(this.r)}, ${A4(this.g)}, ${A4(this.b)}${1===e?")":`, ${e})`}`}function ng(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function A4(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function N4(e){return((e=A4(e))<16?"0":"")+e.toString(16)}function nre(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new $i(e,t,n,r)}function rre(e){if(e instanceof $i)return new $i(e.h,e.s,e.l,e.opacity);if(e instanceof kc||(e=k5(e)),!e)return new $i;if(e instanceof $i)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(s=t===a?(n-r)/o+6*(n<r):n===a?(r-t)/o+2:(t-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new $i(s,o,c,e.opacity)}function rg(e,t,n,r){return 1===arguments.length?rre(e):new $i(e,t,n,r??1)}function $i(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function ire(e){return(e=(e||0)%360)<0?e+360:e}function ig(e){return Math.max(0,Math.min(1,e||0))}function ME(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function are(e,t,n,r,i){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*r+s*i)/6}function sre(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1];return are((n-r/t)*t,r>0?e[r-1]:2*i-a,i,a,r<t-1?e[r+2]:2*a-i)}}function ore(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t);return are((n-r/t)*t,e[(r+t-1)%t],e[r%t],e[(r+1)%t],e[(r+2)%t])}}I6(kc,k5,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Z2e,formatHex:Z2e,formatHex8:function tst(){return this.rgb().formatHex8()},formatHsl:function nst(){return rre(this).formatHsl()},formatRgb:K2e,toString:K2e}),I6(t1,Tc,A5(kc,{brighter(e){return e=null==e?F6:Math.pow(F6,e),new t1(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new t1(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new t1(A4(this.r),A4(this.g),A4(this.b),ng(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ere,formatHex:ere,formatHex8:function rst(){return`#${N4(this.r)}${N4(this.g)}${N4(this.b)}${N4(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:tre,toString:tre})),I6($i,rg,A5(kc,{brighter(e){return e=null==e?F6:Math.pow(F6,e),new $i(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new $i(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new t1(ME(e>=240?e-240:e+120,i,r),ME(e,i,r),ME(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new $i(ire(this.h),ig(this.s),ig(this.l),ng(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ng(this.opacity);return`${1===e?"hsl(":"hsla("}${ire(this.h)}, ${100*ig(this.s)}%, ${100*ig(this.l)}%${1===e?")":`, ${e})`}`}}));const ag=e=>()=>e;function cre(e,t){return function(n){return e+n*t}}function sg(e,t){var n=t-e;return n?cre(e,n>180||n<-180?n-360*Math.round(n/360):n):ag(isNaN(e)?t:e)}function n1(e,t){var n=t-e;return n?cre(e,n):ag(isNaN(e)?t:e)}const _E=function e(t){var n=function ast(e){return 1==(e=+e)?n1:function(t,n){return n-t?function ist(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):ag(isNaN(t)?n:t)}}(t);function r(i,a){var s=n((i=Tc(i)).r,(a=Tc(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),l=n1(i.opacity,a.opacity);return function(u){return i.r=s(u),i.g=o(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function lre(e){return function(t){var s,o,n=t.length,r=new Array(n),i=new Array(n),a=new Array(n);for(s=0;s<n;++s)o=Tc(t[s]),r[s]=o.r||0,i[s]=o.g||0,a[s]=o.b||0;return r=e(r),i=e(i),a=e(a),o.opacity=1,function(c){return o.r=r(c),o.g=i(c),o.b=a(c),o+""}}}var sst=lre(sre),ost=lre(ore);function wE(e,t){t||(t=[]);var i,n=e?Math.min(t.length,e.length):0,r=t.slice();return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function ure(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function cst(e,t){return(ure(t)?wE:fre)(e,t)}function fre(e,t){var s,n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n);for(s=0;s<r;++s)i[s]=Ic(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function dre(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Bi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function hre(e,t){var i,n={},r={};for(i in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)i in e?n[i]=Ic(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var xE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zE=new RegExp(xE.source,"g");function pre(e,t){var r,i,a,n=xE.lastIndex=zE.lastIndex=0,s=-1,o=[],c=[];for(e+="",t+="";(r=xE.exec(e))&&(i=zE.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Bi(r,i)})),n=zE.lastIndex;return n<t.length&&(a=t.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?function ust(e){return function(t){return e(t)+""}}(c[0].x):function lst(e){return function(){return e}}(t):(t=c.length,function(l){for(var f,u=0;u<t;++u)o[(f=c[u]).i]=f.x(l);return o.join("")})}function Ic(e,t){var r,n=typeof t;return null==t||"boolean"===n?ag(t):("number"===n?Bi:"string"===n?(r=k5(t))?(t=r,_E):pre:t instanceof k5?_E:t instanceof Date?dre:ure(t)?wE:Array.isArray(t)?fre:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?hre:Bi)(e,t)}function T5(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function HE(e){return+e}var mre=[0,1];function G2(e){return e}function SE(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function fst(e){return function(){return e}}(isNaN(t)?NaN:.5)}function hst(e,t,n){var r=e[0],i=e[1],a=t[0],s=t[1];return i<r?(r=SE(i,r),a=n(s,a)):(r=SE(r,i),a=n(a,s)),function(o){return a(r(o))}}function pst(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=SE(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(o){var c=L5(e,o,1,r)-1;return a[c](i[c](o))}}function I5(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function og(){var r,i,a,o,c,l,e=mre,t=mre,n=Ic,s=G2;function u(){var d=Math.min(e.length,t.length);return s!==G2&&(s=function dst(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}(e[0],e[d-1])),o=d>2?pst:hst,c=l=null,f}function f(d){return null==d||isNaN(d=+d)?a:(c||(c=o(e.map(r),t,n)))(r(s(d)))}return f.invert=function(d){return s(i((l||(l=o(t,e.map(r),Bi)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,HE),u()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=T5,u()},f.clamp=function(d){return arguments.length?(s=!!d||G2,u()):s!==G2},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(a=d,f):a},function(d,h){return r=d,i=h,u()}}function gre(){return og()(G2,G2)}function Ja(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Fc(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}function vre(e,t,n,r){var a,i=zc(e,t,n);switch((r=w4(r??",f")).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null==r.precision&&!isNaN(a=rne(i,s))&&(r.precision=a),LH(r,s);case"":case"e":case"g":case"p":case"r":null==r.precision&&!isNaN(a=ine(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-("e"===r.type));break;case"f":case"%":null==r.precision&&!isNaN(a=ane(i))&&(r.precision=a-2*("%"===r.type))}return mm(r)}function k4(e){var t=e.domain;return e.ticks=function(n){var r=t();return EH(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return vre(i[0],i[i.length-1],n??10,r)},e.nice=function(n){null==n&&(n=10);var c,l,r=t(),i=0,a=r.length-1,s=r[i],o=r[a],u=10;for(o<s&&(l=s,s=o,o=l,l=i,i=a,a=l);u-- >0;){if((l=VH(s,o,n))===c)return r[i]=s,r[a]=o,t(r);if(l>0)s=Math.floor(s/l)*l,o=Math.ceil(o/l)*l;else{if(!(l<0))break;s=Math.ceil(s*l)/l,o=Math.floor(o*l)/l}c=l}return e},e}function bre(e,t){var s,n=0,r=(e=e.slice()).length-1,i=e[n],a=e[r];return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),e[n]=t.floor(i),e[r]=t.ceil(a),e}function Mre(e){return Math.log(e)}function _re(e){return Math.exp(e)}function mst(e){return-Math.log(-e)}function gst(e){return-Math.exp(-e)}function vst(e){return isFinite(e)?+("1e"+e):e<0?0:e}function wre(e){return(t,n)=>-e(-t,n)}function EE(e){const t=e(Mre,_re),n=t.domain;let i,a,r=10;function s(){return i=function Cst(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(r),a=function yst(e){return 10===e?vst:e===Math.E?Math.exp:t=>Math.pow(e,t)}(r),n()[0]<0?(i=wre(i),a=wre(a),e(mst,gst)):e(Mre,_re),t}return t.base=function(o){return arguments.length?(r=+o,s()):r},t.domain=function(o){return arguments.length?(n(o),s()):n()},t.ticks=o=>{const c=n();let l=c[0],u=c[c.length-1];const f=u<l;f&&([l,u]=[u,l]);let p,m,d=i(l),h=i(u);const g=null==o?10:+o;let v=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/a(-d):p*a(d),!(m<l)){if(m>u)break;v.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/a(-d):p*a(d),!(m<l)){if(m>u)break;v.push(m)}2*v.length<g&&(v=EH(l,u,g))}else v=EH(d,h,Math.min(h-d,g)).map(a);return f?v.reverse():v},t.tickFormat=(o,c)=>{if(null==o&&(o=10),null==c&&(c=10===r?"s":","),"function"!=typeof c&&(!(r%1)&&null==(c=w4(c)).precision&&(c.trim=!0),c=mm(c)),o===1/0)return c;const l=Math.max(1,r*o/t.ticks().length);return u=>{let f=u/a(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=l?c(u):""}},t.nice=()=>n(bre(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),t}function zre(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function bst(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Mst(e){return e<0?-e*e:e*e}function VE(e){var t=e(G2,G2),n=1;return t.exponent=function(i){return arguments.length?(n=+i,function r(){return 1===n?e(G2,G2):.5===n?e(bst,Mst):e(zre(n),zre(1/n))}()):n},k4(t)}function DE(){var e=VE(og());return e.copy=function(){return I5(e,DE()).exponent(e.exponent())},Ja.apply(e,arguments),e}function Hre(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Sre(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function LE(e){var t=1,n=e(Hre(t),Sre(t));return n.constant=function(r){return arguments.length?e(Hre(t=+r),Sre(t)):t},k4(n)}function Vre(e,t,n,r,i,a){const s=[[fo,1,oo],[fo,5,5e3],[fo,15,15e3],[fo,30,3e4],[a,1,ei],[a,5,5*ei],[a,15,15*ei],[a,30,30*ei],[i,1,co],[i,3,3*co],[i,6,6*co],[i,12,12*co],[r,1,lo],[r,2,2*lo],[n,1,kH],[t,1,2592e6],[t,3,7776e6],[e,1,TH]];function c(l,u,f){const d=Math.abs(u-l)/f,h=H6(([,,g])=>g).right(s,d);if(h===s.length)return e.every(zc(l/TH,u/TH,f));if(0===h)return z6.every(Math.max(zc(l,u,f),1));const[p,m]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return p.every(m)}return[function o(l,u,f){const d=u<l;d&&([l,u]=[u,l]);const h=f&&"function"==typeof f.range?f:c(l,u,f),p=h?h.range(l,+u+1):[];return d?p.reverse():p},c]}const[wst,xst]=Vre(Xa,c5,w6,pne,Cm,Mm),[zst,Hst]=Vre(Ya,o5,M6,uo,ym,bm);function Sst(e){return new Date(e)}function Est(e){return e instanceof Date?+e:+new Date(+e)}function AE(e,t,n,r,i,a,s,o,c,l){var u=gre(),f=u.invert,d=u.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),y=l("%b %d"),C=l("%B"),b=l("%Y");function M(w){return(c(w)<w?h:o(w)<w?p:s(w)<w?m:a(w)<w?g:r(w)<w?i(w)<w?v:y:n(w)<w?C:b)(w)}return u.invert=function(w){return new Date(f(w))},u.domain=function(w){return arguments.length?d(Array.from(w,Est)):d().map(Sst)},u.ticks=function(w){var _=d();return e(_[0],_[_.length-1],w??10)},u.tickFormat=function(w,_){return null==_?M:l(_)},u.nice=function(w){var _=d();return(!w||"function"!=typeof w.range)&&(w=t(_[0],_[_.length-1],w??10)),w?d(bre(_,w)):u},u.copy=function(){return I5(u,AE(e,t,n,r,i,a,s,o,c,l))},u}function cg(){var n,r,i,a,c,e=0,t=1,s=G2,o=!1;function l(f){return null==f||isNaN(f=+f)?c:s(0===i?.5:(f=(a(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}function u(f){return function(d){var h,p;return arguments.length?([h,p]=d,s=f(h,p),l):[s(0),s(1)]}}return l.domain=function(f){return arguments.length?([e,t]=f,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(o=!!f,l):o},l.interpolator=function(f){return arguments.length?(s=f,l):s},l.range=u(Ic),l.rangeRound=u(T5),l.unknown=function(f){return arguments.length?(c=f,l):c},function(f){return a=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Rc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function NE(){var e=k4(cg()(G2));return e.copy=function(){return Rc(e,NE())},Fc.apply(e,arguments)}function kE(){var e=VE(cg());return e.copy=function(){return Rc(e,kE()).exponent(e.exponent())},Fc.apply(e,arguments)}function TE(e,t){void 0===t&&(t=e,e=Ic);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function lg(){var i,a,s,o,c,u,d,e=0,t=.5,n=1,r=1,l=G2,f=!1;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+u(m))-a)*(r*m<r*a?o:c),l(f?Math.max(0,Math.min(1,m)):m))}function p(m){return function(g){var v,y,C;return arguments.length?([v,y,C]=g,l=TE(m,[v,y,C]),h):[l(0),l(.5),l(1)]}}return h.domain=function(m){return arguments.length?([e,t,n]=m,i=u(e=+e),a=u(t=+t),s=u(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l},h.range=p(Ic),h.rangeRound=p(T5),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return u=m,i=m(e),a=m(t),s=m(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,h}}function IE(){var e=VE(lg());return e.copy=function(){return Rc(e,IE()).exponent(e.exponent())},Fc.apply(e,arguments)}class Rre extends Map{constructor(t,n=$re){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(FE(this,t))}has(t){return super.has(FE(this,t))}set(t,n){return super.set(Ore(this,t),n)}delete(t){return super.delete(Pre(this,t))}}class ug extends Set{constructor(t,n=$re){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const r of t)this.add(r)}has(t){return super.has(FE(this,t))}add(t){return super.add(Ore(this,t))}delete(t){return super.delete(Pre(this,t))}}function FE({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Ore({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Pre({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function $re(e){return null!==e&&"object"==typeof e?e.valueOf():e}const RE=Symbol("implicit");function OE(){var e=new Rre,t=[],n=[],r=RE;function i(a){let s=e.get(a);if(void 0===s){if(r!==RE)return r;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Rre;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return OE(t,n).unknown(r)},Ja.apply(i,arguments),i}function Nst(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function kst(e,t){var n=sg(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}var fg,Bre=180/Math.PI,PE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ure(e,t,n,r,i,a){var s,o,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,c/=o),e*r<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Bre,skewX:Math.atan(c)*Bre,scaleX:s,scaleY:o}}function jre(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}return function(l,u){var f=[],d=[];return l=e(l),u=e(u),function a(l,u,f,d,h,p){if(l!==f||u!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Bi(l,f)},{i:m-2,x:Bi(u,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}(l.translateX,l.translateY,u.translateX,u.translateY,f,d),function s(l,u,f,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Bi(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}(l.rotate,u.rotate,f,d),function o(l,u,f,d){l!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Bi(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}(l.skewX,u.skewX,f,d),function c(l,u,f,d,h,p){if(l!==f||u!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Bi(l,f)},{i:m-2,x:Bi(u,d)})}else(1!==f||1!==d)&&h.push(i(h)+"scale("+f+","+d+")")}(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,d),l=u=null,function(h){for(var g,p=-1,m=d.length;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var Fst=jre(function Tst(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?PE:Ure(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),Rst=jre(function Ist(e){return null!=e&&(fg||(fg=document.createElementNS("http://www.w3.org/2000/svg","g")),fg.setAttribute("transform",e),e=fg.transform.baseVal.consolidate())?Ure((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):PE},", ",")",")");function qre(e){return((e=Math.exp(e))+1/e)/2}const Bst=function e(t,n,r){function i(a,s){var g,v,o=a[0],c=a[1],l=a[2],d=s[2],h=s[0]-o,p=s[1]-c,m=h*h+p*p;if(m<1e-12)v=Math.log(d/l)/t,g=function(_){return[o+_*h,c+_*p,l*Math.exp(t*_*v)]};else{var y=Math.sqrt(m),C=(d*d-l*l+r*m)/(2*l*n*y),b=(d*d-l*l-r*m)/(2*d*n*y),M=Math.log(Math.sqrt(C*C+1)-C),w=Math.log(Math.sqrt(b*b+1)-b);v=(w-M)/t,g=function(_){var z=_*v,S=qre(M),D=l/(n*y)*(S*function $st(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*z+M)-function Pst(e){return((e=Math.exp(e))-1/e)/2}(M));return[o+D*h,c+D*p,l*S/qre(t*z+M)]}}return g.duration=1e3*v*t/Math.SQRT2,g}return i.rho=function(a){var s=Math.max(.001,+a),o=s*s;return e(s,o,o*o)},i}(Math.SQRT2,2,4);function Gre(e){return function(t,n){var r=e((t=rg(t)).h,(n=rg(n)).h),i=n1(t.s,n.s),a=n1(t.l,n.l),s=n1(t.opacity,n.opacity);return function(o){return t.h=r(o),t.s=i(o),t.l=a(o),t.opacity=s(o),t+""}}}const Ust=Gre(sg);var jst=Gre(n1);const Wre=Math.PI/180,Yre=180/Math.PI,Xre=.96422,Qre=1,Zre=.82521,Kre=4/29,O6=6/29,Jre=3*O6*O6,qst=O6*O6*O6;function eie(e){if(e instanceof Ui)return new Ui(e.l,e.a,e.b,e.opacity);if(e instanceof es)return nie(e);e instanceof t1||(e=bE(e));var a,s,t=jE(e.r),n=jE(e.g),r=jE(e.b),i=$E((.2225045*t+.7168786*n+.0606169*r)/Qre);return t===n&&n===r?a=s=i:(a=$E((.4360747*t+.3850649*n+.1430804*r)/Xre),s=$E((.0139322*t+.0971045*n+.7141733*r)/Zre)),new Ui(116*i-16,500*(a-i),200*(i-s),e.opacity)}function hg(e,t,n,r){return 1===arguments.length?eie(e):new Ui(e,t,n,r??1)}function Ui(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function $E(e){return e>qst?Math.pow(e,1/3):e/Jre+Kre}function BE(e){return e>O6?e*e*e:Jre*(e-Kre)}function UE(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function jE(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function pg(e,t,n,r){return 1===arguments.length?function tie(e){if(e instanceof es)return new es(e.h,e.c,e.l,e.opacity);if(e instanceof Ui||(e=eie(e)),0===e.a&&0===e.b)return new es(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Yre;return new es(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new es(e,t,n,r??1)}function es(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function nie(e){if(isNaN(e.h))return new Ui(e.l,0,0,e.opacity);var t=e.h*Wre;return new Ui(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function Gst(e,t){var n=n1((e=hg(e)).l,(t=hg(t)).l),r=n1(e.a,t.a),i=n1(e.b,t.b),a=n1(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=a(s),e+""}}function rie(e){return function(t,n){var r=e((t=pg(t)).h,(n=pg(n)).h),i=n1(t.c,n.c),a=n1(t.l,n.l),s=n1(t.opacity,n.opacity);return function(o){return t.h=r(o),t.c=i(o),t.l=a(o),t.opacity=s(o),t+""}}}I6(Ui,hg,A5(kc,{brighter(e){return new Ui(this.l+18*(e??1),this.a,this.b,this.opacity)},darker(e){return new Ui(this.l-18*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new t1(UE(3.1338561*(t=Xre*BE(t))-1.6168667*(e=Qre*BE(e))-.4906146*(n=Zre*BE(n))),UE(-.9787684*t+1.9161415*e+.033454*n),UE(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),I6(es,pg,A5(kc,{brighter(e){return new es(this.h,this.c,this.l+18*(e??1),this.opacity)},darker(e){return new es(this.h,this.c,this.l-18*(e??1),this.opacity)},rgb(){return nie(this).rgb()}}));const Wst=rie(sg);var Yst=rie(n1),qE=1.78277,GE=-.29227,mg=-.90649,F5=1.97294,aie=F5*mg,sie=F5*qE,oie=qE*GE- -.14861*mg;function WE(e,t,n,r){return 1===arguments.length?function Xst(e){if(e instanceof T4)return new T4(e.h,e.s,e.l,e.opacity);e instanceof t1||(e=bE(e));var n=e.g/255,r=e.b/255,i=(oie*r+aie*(e.r/255)-sie*n)/(oie+aie-sie),a=r-i,s=(F5*(n-i)-GE*a)/mg,o=Math.sqrt(s*s+a*a)/(F5*i*(1-i)),c=o?Math.atan2(s,a)*Yre-120:NaN;return new T4(c<0?c+360:c,o,i,e.opacity)}(e):new T4(e,t,n,r??1)}function T4(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function cie(e){return function t(n){function r(i,a){var s=e((i=WE(i)).h,(a=WE(a)).h),o=n1(i.s,a.s),c=n1(i.l,a.l),l=n1(i.opacity,a.opacity);return function(u){return i.h=s(u),i.s=o(u),i.l=c(Math.pow(u,n)),i.opacity=l(u),i+""}}return n=+n,r.gamma=t,r}(1)}I6(T4,WE,A5(kc,{brighter(e){return e=null==e?F6:Math.pow(F6,e),new T4(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new T4(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Wre,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new t1(255*(t+n*(-.14861*r+qE*i)),255*(t+n*(GE*r+mg*i)),255*(t+n*(F5*r)),this.opacity)}}));const Qst=cie(sg);var Zst=cie(n1);function Kst(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function YE(e,t,n){const r=e-t+2*n;return e?r>0?r:1:0}const P6="linear",go="log",R5="pow",O5="sqrt",gg="symlog",I4="time",F4="utc",ts="sequential",$6="diverging",B6="quantile",vg="quantize",yg="threshold",XE="ordinal",QE="point",ZE="bin-ordinal",Yn="continuous",P5="discrete",$5="discretizing",ai="interpolating",KE="temporal";function JE(){const e=OE().unknown(void 0),t=e.domain,n=e.range;let i,a,r=[0,1],s=!1,o=0,c=0,l=.5;function u(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=YE(f,o,c);let m=r[d-0];i=(h-m)/(p||1),s&&(i=Math.floor(i)),m+=(h-m-i*(f-o))*l,a=i*(1-o),s&&(m=Math.round(m),a=Math.round(a));const g=zr(f).map(v=>m+i*v);return n(d?g.reverse():g)}return delete e.unknown,e.domain=function(f){return arguments.length?(t(f),u()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],u()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],s=!0,u()},e.bandwidth=function(){return a},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,u()):s},e.padding=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),o=c,u()):o},e.paddingInner=function(f){return arguments.length?(o=Math.max(0,Math.min(1,f)),u()):o},e.paddingOuter=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),u()):l},e.invertRange=function(f){if(null==f[0]||null==f[1])return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let v,y,C,m=+f[0],g=+f[1];return m!=m||g!=g||(g<m&&(C=m,m=g,g=C),g<h[0]||m>r[1-d])?void 0:(v=Math.max(0,eg(h,m)-1),y=m===g?v:eg(h,g)-1,m-h[v]>a+1e-10&&++v,d&&(C=v,v=p-y,y=p-C),v>y?void 0:t().slice(v,y+1))},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return JE().domain(t()).range(r).round(s).paddingInner(o).paddingOuter(c).align(l)},u()}function uie(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return uie(t())},e}var rot=Array.prototype.map;const aot=Array.prototype.slice,Cg=new Map,die=Symbol("vega_scale");function hie(e){return e[die]=!0,e}function yt(e,t,n){return arguments.length>1?(Cg.set(e,function oot(e,t,n){const r=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?function eot(e){return function(t){let i,n=t[0],r=t[1];return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}(a):a.invertExtent?function tot(e){return function(t){const n=e.range();let s,o,c,l,r=t[0],i=t[1],a=-1;for(i<r&&(o=r,r=i,i=o),c=0,l=n.length;c<l;++c)n[c]>=r&&n[c]<=i&&(a<0&&(a=c),s=c);if(!(a<0))return r=e.invertExtent(n[a]),i=e.invertExtent(n[s]),[void 0===r[0]?r[1]:r[0],void 0===i[1]?i[0]:i[1]]}}(a):void 0),a.type=e,hie(a)};return r.metadata=Oi(me(n)),r}(e,t,n)),this):pie(e)?Cg.get(e):void 0}function pie(e){return Cg.has(e)}function R4(e,t){const n=Cg.get(e);return n&&n.metadata[t]}function eV(e){return R4(e,Yn)}function U6(e){return R4(e,P5)}function tV(e){return R4(e,$5)}function mie(e){return R4(e,go)}function gie(e){return R4(e,ai)}function vie(e){return R4(e,B6)}yt("identity",function Cre(e){var t;function n(r){return null==r||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,HE),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Cre(e).unknown(t)},e=arguments.length?Array.from(e,HE):[0,1],k4(n)}),yt(P6,function yre(){var e=gre();return e.copy=function(){return I5(e,yre())},Ja.apply(e,arguments),k4(e)},Yn),yt(go,function xre(){const e=EE(og()).domain([1,10]);return e.copy=()=>I5(e,xre()).base(e.base()),Ja.apply(e,arguments),e},[Yn,go]),yt(R5,DE,Yn),yt(O5,function _st(){return DE.apply(null,arguments).exponent(.5)},Yn),yt(gg,function Ere(){var e=LE(og());return e.copy=function(){return I5(e,Ere()).constant(e.constant())},Ja.apply(e,arguments)},Yn),yt(I4,function Vst(){return Ja.apply(AE(zst,Hst,Ya,o5,M6,uo,ym,bm,fo,WH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},[Yn,KE]),yt(F4,function Dst(){return Ja.apply(AE(wst,xst,Xa,c5,w6,Hc,Cm,Mm,fo,YH).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},[Yn,KE]),yt(ts,NE,[Yn,ai]),yt(`${ts}-${P6}`,NE,[Yn,ai]),yt(`${ts}-${go}`,function Dre(){var e=EE(cg()).domain([1,10]);return e.copy=function(){return Rc(e,Dre()).base(e.base())},Fc.apply(e,arguments)},[Yn,ai,go]),yt(`${ts}-${R5}`,kE,[Yn,ai]),yt(`${ts}-${O5}`,function Lst(){return kE.apply(null,arguments).exponent(.5)},[Yn,ai]),yt(`${ts}-${gg}`,function Lre(){var e=LE(cg());return e.copy=function(){return Rc(e,Lre()).constant(e.constant())},Fc.apply(e,arguments)},[Yn,ai]),yt(`${$6}-${P6}`,function Are(){var e=k4(lg()(G2));return e.copy=function(){return Rc(e,Are())},Fc.apply(e,arguments)},[Yn,ai]),yt(`${$6}-${go}`,function Nre(){var e=EE(lg()).domain([.1,1,10]);return e.copy=function(){return Rc(e,Nre()).base(e.base())},Fc.apply(e,arguments)},[Yn,ai,go]),yt(`${$6}-${R5}`,IE,[Yn,ai]),yt(`${$6}-${O5}`,function Ast(){return IE.apply(null,arguments).exponent(.5)},[Yn,ai]),yt(`${$6}-${gg}`,function kre(){var e=LE(lg());return e.copy=function(){return Rc(e,kre()).constant(e.constant())},Fc.apply(e,arguments)},[Yn,ai]),yt(B6,function Tre(){var r,e=[],t=[],n=[];function i(){var s=0,o=Math.max(1,t.length);for(n=new Array(o-1);++s<o;)n[s-1]=A1e(e,s/o);return a}function a(s){return null==s||isNaN(s=+s)?r:t[L5(n,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)null!=o&&!isNaN(o=+o)&&e.push(o);return e.sort(ho),i()},a.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return Tre().domain(e).range(t).unknown(r)},Ja.apply(a,arguments)},[$5,B6]),yt(vg,function Ire(){var a,e=0,t=1,n=1,r=[.5],i=[0,1];function s(c){return null!=c&&c<=c?i[L5(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var l=i.indexOf(c);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return Ire().domain([e,t]).range(i).unknown(a)},Ja.apply(k4(s),arguments)},$5),yt(yg,function Fre(){var n,e=[.5],t=[0,1],r=1;function i(a){return null!=a&&a<=a?t[L5(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return Fre().domain(e).range(t).unknown(n)},Ja.apply(i,arguments)},$5),yt(ZE,function fie(){let e=[],t=[];function n(r){return null==r||r!=r?void 0:t[(L5(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=function iot(e){return rot.call(e,O1)}(r),n):e.slice()},n.range=function(r){return arguments.length?(t=aot.call(r),n):t.slice()},n.tickFormat=function(r,i){return vre(e[0],lt(e),r??10,i)},n.copy=function(){return fie().domain(n.domain()).range(n.range())},n},[P5,$5]),yt(XE,OE,P5),yt("band",JE,P5),yt(QE,function not(){return uie(JE().paddingInner(1))},P5);const lot=["clamp","base","constant","exponent"];function yie(e,t){const n=t[0],r=lt(t)-n;return function(i){return e(n+i*r)}}function bg(e,t,n){return TE(nV(t||"rgb",n),e)}function Cie(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function bie(e,t,n){const r=n-t;let i,a,s;return r&&Number.isFinite(r)?(i=(a=e.type).indexOf("-"),a=i<0?a:a.slice(i+1),s=yt(a)().domain([t,n]).range([0,1]),lot.forEach(o=>e[o]?s[o](e[o]()):0),s):P1(.5)}function nV(e,t){const n=Xl[function uot(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function Mie(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function _ie(e,t){for(const n in e)rV(n,t(e[n]))}const wie={};function rV(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(wie[e]=t,this):wie[e]}_ie({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},Mie),_ie({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},e=>bg(Mie(e)));const Mg="symbol",hot="discrete",mot=e=>K(e)?e.map(t=>String(t)):String(e),got=(e,t)=>e[1]-t[1],vot=(e,t)=>t[1]-e[1];function iV(e,t,n){let r;return mt(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,Math.floor(a5(e.domain())/n||1)+1))),ve(t)&&(r=t.step,t=t.interval),ge(t)&&(t=e.type===I4?E6(t):e.type==F4?V6(t):Z("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function xie(e,t,n){let r=e.range(),i=r[0],a=lt(r),s=got;if(i>a&&(r=a,a=i,i=r,s=vot),i=Math.floor(i),a=Math.ceil(a),t=t.map(o=>[o,e(o)]).filter(o=>i<=o[1]&&o[1]<=a).sort(s).map(o=>o[0]),n>0&&t.length>1){const o=[t[0],lt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((c,l)=>!(l%2));t.length<3&&(t=o)}return t}function aV(e,t){return e.bins?xie(e,e.bins):e.ticks?e.ticks(t):e.domain()}function zie(e,t,n,r,i,a){const s=t.type;let o=mot;if(s===I4||i===I4)o=e.timeFormat(r);else if(s===F4||i===F4)o=e.utcFormat(r);else if(mie(s)){const c=e.formatFloat(r);if(a||t.bins)o=c;else{const l=Hie(t,n,!1);o=u=>l(u)?c(u):""}}else if(t.tickFormat){const c=t.domain();o=e.formatSpan(c[0],c[c.length-1],n,r)}else r&&(o=e.format(r));return o}function Hie(e,t,n){const r=aV(e,t),i=e.base(),a=Math.log(i),s=Math.max(1,i*t/r.length),o=c=>{let l=c/Math.pow(i,Math.round(Math.log(c)/a));return l*i<i-.5&&(l*=i),l<=s};return n?r.filter(o):o}const sV={[B6]:"quantiles",[vg]:"thresholds",[yg]:"domain"},Sie={[B6]:"quantiles",[vg]:"domain"};function Eie(e,t){return e.bins?function bot(e){const t=e.slice(0,-1);return t.max=lt(e),t}(e.bins):e.type===go?Hie(e,t,!0):sV[e.type]?function Cot(e){const t=[-1/0].concat(e);return t.max=1/0,t}(e[sV[e.type]]()):aV(e,t)}const Mot=e=>sV[e.type]||e.bins;function Vie(e,t,n,r,i,a,s){const o=Sie[t.type]&&a!==I4&&a!==F4?function yot(e,t,n){const r=t[Sie[t.type]](),i=r.length;let s,a=i>1?r[1]-r[0]:r[0];for(s=1;s<i;++s)a=Math.min(a,r[s]-r[s-1]);return e.formatSpan(0,a,30,n)}(e,t,i):zie(e,t,n,i,a,s);return r===Mg&&Mot(t)?_ot(o):r===hot?wot(o):xot(o)}const _ot=e=>(t,n,r)=>{const i=Die(r[n+1],Die(r.max,1/0)),a=Lie(t,e),s=Lie(i,e);return a&&s?a+" \u2013 "+s:s?"< "+s:"\u2265 "+a},Die=(e,t)=>e??t,wot=e=>(t,n)=>n?e(t):null,xot=e=>t=>e(t),Lie=(e,t)=>Number.isFinite(e)?t(e):null;function Aie(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=function Hot(e,t,n,r){const i=r||t.type;return ge(n)&&function cot(e){return R4(e,KE)}(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||i!==I4?n||i!==F4?Vie(e,t,5,null,n,r,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}(e,t,n.format,n.formatType);if(tV(t.type)){const a=Eie(t).slice(1).map(i),s=a.length;return`${s} boundar${1===s?"y":"ies"}: ${a.join(", ")}`}if(U6(t.type)){const a=t.domain(),s=a.length;return`${s} value${1===s?"":"s"}: ${s>r?a.slice(0,r-2).map(i).join(", ")+", ending with "+a.slice(-1).map(i):a.map(i).join(", ")}`}{const a=t.domain();return`values from ${i(a[0])} to ${i(lt(a))}`}}let Nie=0;function oV(e){return e&&e.gradient}function kie(e,t,n){const r=e.gradient;let i=e.id,a="radial"===r?"p_":"";return i||(i=e.id="gradient_"+Nie++,"radial"===r?(e.x1=ns(e.x1,.5),e.y1=ns(e.y1,.5),e.r1=ns(e.r1,0),e.x2=ns(e.x2,.5),e.y2=ns(e.y2,.5),e.r2=ns(e.r2,.5),a="p_"):(e.x1=ns(e.x1,0),e.y1=ns(e.y1,0),e.x2=ns(e.x2,1),e.y2=ns(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+a+i+")"}function ns(e,t){return e??t}function Tie(e,t){var r,n=[];return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,a){return n.push({offset:i,color:a}),r}}}const Iie={basis:{curve:function Kit(e){return new qm(e)}},"basis-closed":{curve:function Jit(e){return new x2e(e)}},"basis-open":{curve:function eat(e){return new z2e(e)}},bundle:{curve:tat,tension:"beta",value:.85},cardinal:{curve:nat,tension:"tension",value:0},"cardinal-open":{curve:rat,tension:"tension",value:0},"cardinal-closed":{curve:iat,tension:"tension",value:0},"catmull-rom":{curve:oat,tension:"alpha",value:.5},"catmull-rom-closed":{curve:cat,tension:"alpha",value:.5},"catmull-rom-open":{curve:lat,tension:"alpha",value:.5},linear:{curve:hE},"linear-closed":{curve:function uat(e){return new N2e(e)}},monotone:{horizontal:function dat(e){return new F2e(e)},vertical:function fat(e){return new Ym(e)}},natural:{curve:function hat(e){return new O2e(e)}},step:{curve:function pat(e){return new Xm(e,.5)}},"step-after":{curve:function gat(e){return new Xm(e,1)}},"step-before":{curve:function mat(e){return new Xm(e,0)}}};function cV(e,t,n){var r=Ne(Iie,e)&&Iie[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}const Eot={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Vot=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Dot=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Lot=/^((\s+,?\s*)|(,\s*))/,Aot=/^[01]/;function j6(e){const t=[];return(e.match(Vot)||[]).forEach(r=>{let i=r[0];const a=i.toLowerCase(),s=Eot[a],o=function Not(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let a=0;a<t;++a){const s="a"!==e||3!==a&&4!==a?Dot:Aot,o=n.slice(i).match(s);if(null===o)throw Error("Invalid SVG path, incorrect parameter type");i+=o[0].length,r.push(+o[0]);const c=n.slice(i).match(Lot);null!==c&&(i+=c[0].length)}return r}(a,s,r.slice(1).trim()),c=o.length;if(c<s||c&&c%s!=0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...o.slice(0,s)]),c!==s){"m"===a&&(i="M"===i?"L":"l");for(let l=s;l<c;l+=s)t.push([i,...o.slice(l,l+s)])}}),t}const Oc=Math.PI/180,O4=Math.PI/2,rs=2*Math.PI,q6=Math.sqrt(3)/2;var lV={},uV={},Fie=[].join;function Iot(e){const t=Fie.call(e);if(uV[t])return uV[t];var n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],l=e[7];const u=l*s,f=-c*o,d=c*s,h=l*o,p=Math.cos(i),m=Math.sin(i),g=Math.cos(a),v=Math.sin(a),y=.5*(a-i),C=Math.sin(.5*y),b=8/3*C*C/Math.sin(y),M=n+p-b*m,w=r+m+b*p,_=n+g,z=r+v,S=_+b*v,D=z-b*g;return uV[t]=[u*M+f*w,d*M+h*w,u*S+f*D,d*S+h*D,u*_+f*z,d*_+h*z]}const si=["l",0,0,0,0,0,0,0];function Fot(e,t,n){const r=si[0]=e[0];if("a"===r||"A"===r)si[1]=t*e[1],si[2]=n*e[2],si[3]=e[3],si[4]=e[4],si[5]=e[5],si[6]=t*e[6],si[7]=n*e[7];else if("h"===r||"H"===r)si[1]=t*e[1];else if("v"===r||"V"===r)si[1]=n*e[1];else for(var i=1,a=e.length;i<a;++i)si[i]=(i%2==1?t:n)*e[i];return si}function B5(e,t,n,r,i,a){var s,d,h,p,m,o=null,c=0,l=0,u=0,f=0,g=0,v=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==a&&(a=i),e.beginPath&&e.beginPath();for(var y=0,C=t.length;y<C;++y){switch(s=t[y],(1!==i||1!==a)&&(s=Fot(s,i,a)),s[0]){case"l":e.lineTo((c+=s[1])+n,(l+=s[2])+r);break;case"L":e.lineTo((c=s[1])+n,(l=s[2])+r);break;case"h":e.lineTo((c+=s[1])+n,l+r);break;case"H":e.lineTo((c=s[1])+n,l+r);break;case"v":e.lineTo(c+n,(l+=s[1])+r);break;case"V":e.lineTo(c+n,(l=s[1])+r);break;case"m":g=c+=s[1],v=l+=s[2],e.moveTo(c+n,l+r);break;case"M":g=c=s[1],v=l=s[2],e.moveTo(c+n,l+r);break;case"c":e.bezierCurveTo(c+s[1]+n,l+s[2]+r,(u=c+s[3])+n,(f=l+s[4])+r,(d=c+s[5])+n,(h=l+s[6])+r),c=d,l=h;break;case"C":e.bezierCurveTo(s[1]+n,s[2]+r,(u=s[3])+n,(f=s[4])+r,(c=s[5])+n,(l=s[6])+r);break;case"s":e.bezierCurveTo((u=2*c-u)+n,(f=2*l-f)+r,c+s[1]+n,l+s[2]+r,(d=c+s[3])+n,(h=l+s[4])+r),u=c+s[1],f=l+s[2],c=d,l=h;break;case"S":e.bezierCurveTo((u=2*c-u)+n,(f=2*l-f)+r,s[1]+n,s[2]+r,(d=s[3])+n,(h=s[4])+r),c=d,l=h,u=s[1],f=s[2];break;case"q":e.quadraticCurveTo((u=c+s[1])+n,(f=l+s[2])+r,(d=c+s[3])+n,(h=l+s[4])+r),c=d,l=h;break;case"Q":e.quadraticCurveTo(s[1]+n,s[2]+r,(d=s[3])+n,(h=s[4])+r),c=d,l=h,u=s[1],f=s[2];break;case"t":d=c+s[1],h=l+s[2],null===o[0].match(/[QqTt]/)?(u=c,f=l):"t"===o[0]?(u=2*c-p,f=2*l-m):"q"===o[0]&&(u=2*c-u,f=2*l-f),p=u,m=f,e.quadraticCurveTo(u+n,f+r,d+n,h+r),u=(c=d)+s[1],f=(l=h)+s[2];break;case"T":e.quadraticCurveTo((u=2*c-u)+n,(f=2*l-f)+r,(d=s[1])+n,(h=s[2])+r),c=d,l=h;break;case"a":Rie(e,c+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+c+n,s[7]+l+r]),c+=s[6],l+=s[7];break;case"A":Rie(e,c+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),c=s[6],l=s[7];break;case"z":case"Z":c=g,l=v,e.closePath()}o=s}}function Rie(e,t,n,r){const i=function Tot(e,t,n,r,i,a,s,o,c){const l=Fie.call(arguments);if(lV[l])return lV[l];const u=s*Oc,f=Math.sin(u),d=Math.cos(u),h=d*(o-e)*.5+f*(c-t)*.5,p=d*(c-t)*.5-f*(o-e)*.5;let m=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,v=f/n,y=-f/r,C=d/r,b=g*o+v*c,M=y*o+C*c,w=g*e+v*t,_=y*e+C*t;let S=1/((w-b)*(w-b)+(_-M)*(_-M))-.25;S<0&&(S=0);let D=Math.sqrt(S);a==i&&(D=-D);const L=.5*(b+w)-D*(_-M),R=.5*(M+_)+D*(w-b),N=Math.atan2(M-R,b-L);let H=Math.atan2(_-R,w-L)-N;H<0&&1===a?H+=rs:H>0&&0===a&&(H-=rs);const V=Math.ceil(Math.abs(H/(O4+.001))),T=[];for(let E=0;E<V;++E)T[E]=[L,R,N+E*H/V,N+(E+1)*H/V,n,r,f,d];return lV[l]=T}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let a=0;a<i.length;++a){const s=Iot(i[a]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const Oie=.5773502691896257,Pie={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,rs)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,a=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-a),e.lineTo(i,-a),e.lineTo(0,-n),e.lineTo(-i,-a),e.lineTo(-r,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=q6*n,i=r-n*Oie,a=n/4;e.moveTo(0,-r-i),e.lineTo(-a,r-i),e.lineTo(a,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=q6*n,i=r-n*Oie;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=q6*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=q6*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=q6*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=q6*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function $ie(e){return Ne(Pie,e)?Pie[e]:function Rot(e){if(!Ne(fV,e)){const t=j6(e);fV[e]={draw:function(n,r){B5(n,t,0,0,Math.sqrt(r)/2)}}}return fV[e]}(e)}var fV={};const Pc=.448084975506;function Oot(e){return e.x}function Pot(e){return e.y}function $ot(e){return e.width}function Bot(e){return e.height}function vo(e){return"function"==typeof e?e:()=>+e}function wg(e,t,n){return Math.max(t,Math.min(e,n))}function Bie(){var e=Oot,t=Pot,n=$ot,r=Bot,i=vo(0),a=i,s=i,o=i,c=null;function l(u,f,d){var h,p=f??+e.call(this,u),m=d??+t.call(this,u),g=+n.call(this,u),v=+r.call(this,u),y=Math.min(g,v)/2,C=wg(+i.call(this,u),0,y),b=wg(+a.call(this,u),0,y),M=wg(+s.call(this,u),0,y),w=wg(+o.call(this,u),0,y);if(c||(c=h=Zm()),C<=0&&b<=0&&M<=0&&w<=0)c.rect(p,m,g,v);else{var _=p+g,z=m+v;c.moveTo(p+C,m),c.lineTo(_-b,m),c.bezierCurveTo(_-Pc*b,m,_,m+Pc*b,_,m+b),c.lineTo(_,z-w),c.bezierCurveTo(_,z-Pc*w,_-Pc*w,z,_-w,z),c.lineTo(p+M,z),c.bezierCurveTo(p+Pc*M,z,p,z-Pc*M,p,z-M),c.lineTo(p,m+C),c.bezierCurveTo(p,m+Pc*C,p+Pc*C,m,p+C,m),c.closePath()}if(h)return c=null,h+""||null}return l.x=function(u){return arguments.length?(e=vo(u),l):e},l.y=function(u){return arguments.length?(t=vo(u),l):t},l.width=function(u){return arguments.length?(n=vo(u),l):n},l.height=function(u){return arguments.length?(r=vo(u),l):r},l.cornerRadius=function(u,f,d,h){return arguments.length?(i=vo(u),a=null!=f?vo(f):i,o=null!=d?vo(d):i,s=null!=h?vo(h):a,l):i},l.context=function(u){return arguments.length?(c=u??null,l):c},l}function Uie(){var e,t,n,r,a,s,o,c,i=null;function l(f,d,h){const p=h/2;if(a){var m=o-d,g=f-s;if(m||g){var v=Math.hypot(m,g),y=(m/=v)*c,C=(g/=v)*c,b=Math.atan2(g,m);i.moveTo(s-y,o-C),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,b-Math.PI,b),i.lineTo(s+y,o+C),i.arc(s,o,c,b,b+Math.PI)}else i.arc(f,d,p,0,rs);i.closePath()}else a=1;s=f,o=d,c=p}function u(f){var d,p,g,h=f.length,m=!1;for(null==i&&(i=g=Zm()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(a=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return u.x=function(f){return arguments.length?(e=f,u):e},u.y=function(f){return arguments.length?(t=f,u):t},u.size=function(f){return arguments.length?(n=f,u):n},u.defined=function(f){return arguments.length?(r=f,u):r},u.context=function(f){return arguments.length?(i=null==f?null:f,u):i},u}function U5(e,t){return e??t}const j5=e=>e.x||0,q5=e=>e.y||0,xg=e=>!1!==e.defined,sct=function zat(){var e=Cat,t=bat,n=Ht(0),r=null,i=Mat,a=_at,s=wat,o=null,c=Km(l);function l(){var u,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-Wm,m=a.apply(this,arguments)-Wm,g=S2e(m-p),v=m>p;if(o||(o=u=c()),h<d&&(f=h,h=d,d=f),h>j1)if(g>D5-j1)o.moveTo(h*mo(p),h*q2(p)),o.arc(0,0,h,p,m,!v),d>j1&&(o.moveTo(d*mo(m),d*q2(m)),o.arc(0,0,d,m,p,v));else{var N,x,y=p,C=m,b=p,M=m,w=g,_=g,z=s.apply(this,arguments)/2,S=z>j1&&(r?+r.apply(this,arguments):nn(d*d+h*h)),D=T6(S2e(h-d)/2,+n.apply(this,arguments)),L=D,R=D;if(S>j1){var H=E2e(S/d*q2(z)),V=E2e(S/h*q2(z));(w-=2*H)>j1?(b+=H*=v?1:-1,M-=H):(w=0,b=M=(p+m)/2),(_-=2*V)>j1?(y+=V*=v?1:-1,C-=V):(_=0,y=C=(p+m)/2)}var T=h*mo(y),E=h*q2(y),k=d*mo(M),A=d*q2(M);if(D>j1){var G,O=h*mo(C),B=h*q2(C),U=d*mo(b),$=d*q2(b);if(g<Ac)if(G=function xat(e,t,n,r,i,a,s,o){var c=n-e,l=r-t,u=s-i,f=o-a,d=f*c-u*l;if(!(d*d<j1))return[e+(d=(u*(t-a)-f*(e-i))/d)*c,t+d*l]}(T,E,U,$,O,B,k,A)){var se=T-G[0],J=E-G[1],he=O-G[0],W=B-G[1],ne=1/q2(function sat(e){return e>1?0:e<-1?Ac:Math.acos(e)}((se*he+J*W)/(nn(se*se+J*J)*nn(he*he+W*W)))/2),re=nn(G[0]*G[0]+G[1]*G[1]);L=T6(D,(d-re)/(ne-1)),R=T6(D,(h-re)/(ne+1))}else L=R=0}_>j1?R>j1?(N=Jm(U,$,T,E,h,R,v),x=Jm(O,B,k,A,h,R,v),o.moveTo(N.cx+N.x01,N.cy+N.y01),R<D?o.arc(N.cx,N.cy,R,U1(N.y01,N.x01),U1(x.y01,x.x01),!v):(o.arc(N.cx,N.cy,R,U1(N.y01,N.x01),U1(N.y11,N.x11),!v),o.arc(0,0,h,U1(N.cy+N.y11,N.cx+N.x11),U1(x.cy+x.y11,x.cx+x.x11),!v),o.arc(x.cx,x.cy,R,U1(x.y11,x.x11),U1(x.y01,x.x01),!v))):(o.moveTo(T,E),o.arc(0,0,h,y,C,!v)):o.moveTo(T,E),d>j1&&w>j1?L>j1?(N=Jm(k,A,O,B,d,-L,v),x=Jm(T,E,U,$,d,-L,v),o.lineTo(N.cx+N.x01,N.cy+N.y01),L<D?o.arc(N.cx,N.cy,L,U1(N.y01,N.x01),U1(x.y01,x.x01),!v):(o.arc(N.cx,N.cy,L,U1(N.y01,N.x01),U1(N.y11,N.x11),!v),o.arc(0,0,d,U1(N.cy+N.y11,N.cx+N.x11),U1(x.cy+x.y11,x.cx+x.x11),v),o.arc(x.cx,x.cy,L,U1(x.y11,x.x11),U1(x.y01,x.x01),!v))):o.arc(0,0,d,M,b,v):o.lineTo(k,A)}else o.moveTo(0,0);if(o.closePath(),u)return o=null,u+""||null}return l.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Ac/2;return[mo(f)*u,q2(f)*u]},l.innerRadius=function(u){return arguments.length?(e="function"==typeof u?u:Ht(+u),l):e},l.outerRadius=function(u){return arguments.length?(t="function"==typeof u?u:Ht(+u),l):t},l.cornerRadius=function(u){return arguments.length?(n="function"==typeof u?u:Ht(+u),l):n},l.padRadius=function(u){return arguments.length?(r=null==u?null:"function"==typeof u?u:Ht(+u),l):r},l.startAngle=function(u){return arguments.length?(i="function"==typeof u?u:Ht(+u),l):i},l.endAngle=function(u){return arguments.length?(a="function"==typeof u?u:Ht(+u),l):a},l.padAngle=function(u){return arguments.length?(s="function"==typeof u?u:Ht(+u),l):s},l.context=function(u){return arguments.length?(o=u??null,l):o},l}().startAngle(e=>e.startAngle||0).endAngle(e=>e.endAngle||0).padAngle(e=>e.padAngle||0).innerRadius(e=>e.innerRadius||0).outerRadius(e=>e.outerRadius||0).cornerRadius(e=>e.cornerRadius||0),oct=G2e().x(j5).y1(q5).y0(e=>(e.y||0)+(e.height||0)).defined(xg),cct=G2e().y(q5).x1(j5).x0(e=>(e.x||0)+(e.width||0)).defined(xg),lct=q2e().x(j5).y(q5).defined(xg),uct=Bie().x(j5).y(q5).width(e=>e.width||0).height(e=>e.height||0).cornerRadius(e=>U5(e.cornerRadiusTopLeft,e.cornerRadius)||0,e=>U5(e.cornerRadiusTopRight,e.cornerRadius)||0,e=>U5(e.cornerRadiusBottomRight,e.cornerRadius)||0,e=>U5(e.cornerRadiusBottomLeft,e.cornerRadius)||0),fct=function qat(e,t){let n=null,r=Km(i);function i(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return e="function"==typeof e?e:Ht(e||vE),t="function"==typeof t?t:Ht(void 0===t?64:+t),i.type=function(a){return arguments.length?(e="function"==typeof a?a:Ht(a),i):e},i.size=function(a){return arguments.length?(t="function"==typeof a?a:Ht(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}().type(e=>$ie(e.shape||"circle")).size(e=>U5(e.size,64)),dct=Uie().x(j5).y(q5).defined(xg).size(e=>e.size||1);function dV(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function G6(e,t,n,r){return uct.context(e)(t,n,r)}var jie=1;function qie(){jie=1}function hV(e,t,n){var r=t.clip,i=e._defs,a=t.clip_id||(t.clip_id="clip"+jie++),s=i.clipping[a]||(i.clipping[a]={id:a});return Je(r)?s.path=r(null):dV(n)?s.path=G6(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+a+")"}function Rn(e){this.clear(),e&&this.union(e)}function zg(e){this.mark=e,this.bounds=this.bounds||new Rn}function Hg(e){zg.call(this,e),this.items=this.items||[]}function pV(e){this._pending=0,this._loader=e||Hm()}function Gie(e){e._pending+=1}function G5(e){e._pending-=1}function yo(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){const r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function Cct(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e}Rn.prototype={clone(){return new Rn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:a,y2:s}=this,o=Math.cos(e),c=Math.sin(e),l=t-t*o+n*c,u=n-t*c-n*o;return[o*r-c*i+l,c*r+o*i+u,o*r-c*s+l,c*r+o*s+u,o*a-c*i+l,c*a+o*i+u,o*a-c*s+l,c*a+o*s+u]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},le(Hg,zg),pV.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return Gie(t),t._loader.sanitize(e,{context:"href"}).then(n=>(G5(t),n)).catch(()=>(G5(t),null))},loadImage(e){const t=this,n=typeof Image<"u"?Image:null;return Gie(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const a=new n,s=Ne(r,"crossOrigin")?r.crossOrigin:"anonymous";return null!=s&&(a.crossOrigin=s),a.onload=()=>G5(t),a.onerror=()=>G5(t),a.src=i,a}).catch(r=>(G5(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{!function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}(!1)})}};const bct=rs-1e-8;let Sg,Eg,Vg,P4,mV,Dg,gV,vV;const $c=(e,t)=>Sg.add(e,t),Lg=(e,t)=>$c(Eg=e,Vg=t),Wie=e=>$c(e,Sg.y1),Yie=e=>$c(Sg.x1,e),$4=(e,t)=>mV*e+gV*t,B4=(e,t)=>Dg*e+vV*t,yV=(e,t)=>$c($4(e,t),B4(e,t)),CV=(e,t)=>Lg($4(e,t),B4(e,t));function W5(e,t){return Sg=e,t?(P4=t*Oc,mV=vV=Math.cos(P4),Dg=Math.sin(P4),gV=-Dg):(mV=vV=1,P4=Dg=gV=0),Mct}const Mct={beginPath(){},closePath(){},moveTo:CV,lineTo:CV,rect(e,t,n,r){P4?(yV(e+n,t),yV(e+n,t+r),yV(e,t+r),CV(e,t)):($c(e+n,t+r),Lg(e,t))},quadraticCurveTo(e,t,n,r){const i=$4(e,t),a=B4(e,t),s=$4(n,r),o=B4(n,r);Xie(Eg,i,s,Wie),Xie(Vg,a,o,Yie),Lg(s,o)},bezierCurveTo(e,t,n,r,i,a){const s=$4(e,t),o=B4(e,t),c=$4(n,r),l=B4(n,r),u=$4(i,a),f=B4(i,a);Qie(Eg,s,c,u,Wie),Qie(Vg,o,l,f,Yie),Lg(u,f)},arc(e,t,n,r,i,a){if(r+=P4,i+=P4,Eg=n*Math.cos(i)+e,Vg=n*Math.sin(i)+t,Math.abs(i-r)>bct)$c(e-n,t-n),$c(e+n,t+n);else{const s=l=>$c(n*Math.cos(l)+e,n*Math.sin(l)+t);let o,c;if(s(r),s(i),i!==r)if((r%=rs)<0&&(r+=rs),(i%=rs)<0&&(i+=rs),i<r&&(a=!a,o=r,r=i,i=o),a)for(i-=rs,o=r-r%O4,c=0;c<4&&o>i;++c,o-=O4)s(o);else for(o=r-r%O4+O4,c=0;c<4&&o<i;++c,o+=O4)s(o)}}};function Xie(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Qie(e,t,n,r,i){const a=r-e+3*t-3*n,s=e+n-2*t,o=e-t;let u,c=0,l=0;Math.abs(a)>1e-14?(u=s*s+o*a,u>=0&&(u=Math.sqrt(u),c=(-s+u)/a,l=(-s-u)/a)):c=.5*o/s,0<c&&c<1&&i(Zie(c,e,t,n,r)),0<l&&l<1&&i(Zie(l,e,t,n,r))}function Zie(e,t,n,r,i){const a=1-e,s=a*a,o=e*e;return s*a*t+3*s*e*n+3*a*o*r+o*e*i}var Bc=(Bc=Nc(1,1))?Bc.getContext("2d"):null;const bV=new Rn;function MV(e){return function(t,n){if(!Bc)return!0;e(Bc,t),bV.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:a,y2:s}=bV;for(let o=i;o<=s;++o)for(let c=r;c<=a;++c)if(Bc.isPointInPath(c,o))return!0;return!1}}function _V(e,t){return t.contains(e.x||0,e.y||0)}function Kie(e,t){const n=e.x||0,r=e.y||0;return t.intersects(bV.set(n,r,n+(e.width||0),r+(e.height||0)))}function Jie(e,t){const n=e.x||0,r=e.y||0;return W6(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}function W6(e,t,n,r,i){const{x1:a,y1:s,x2:o,y2:c}=e,l=r-t,u=i-n;let h,p,m,g,f=0,d=1;for(g=0;g<4;++g){if(0===g&&(h=-l,p=-(a-t)),1===g&&(h=l,p=o-t),2===g&&(h=-u,p=-(s-n)),3===g&&(h=u,p=c-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function Y6(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ji(e,t){return e??t}function eae(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function tae(e,t,n){return oV(n)?function _ct(e,t,n){const r=n.width(),i=n.height();let a;if("radial"===t.gradient)a=e.createRadialGradient(n.x1+ji(t.x1,.5)*r,n.y1+ji(t.y1,.5)*i,Math.max(r,i)*ji(t.r1,0),n.x1+ji(t.x2,.5)*r,n.y1+ji(t.y2,.5)*i,Math.max(r,i)*ji(t.r2,.5));else{const s=ji(t.x1,0),o=ji(t.y1,0),c=ji(t.x2,1),l=ji(t.y2,0);if(s!==c&&o!==l&&r!==i){const u=Nc(Math.ceil(r),Math.ceil(i)),f=u.getContext("2d");return f.scale(r,i),f.fillStyle=eae(f.createLinearGradient(s,o,c,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(u,"no-repeat")}a=e.createLinearGradient(n.x1+s*r,n.y1+o*i,n.x1+c*r,n.y1+l*i)}return eae(a,t.stops)}(e,n,t.bounds):n}function Ag(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=tae(e,t,t.fill),!0)}var wct=[];function X6(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&(n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=tae(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||wct),e.lineDashOffset=t.strokeDashOffset||0),!0)}function xct(e,t){return e.zindex-t.zindex||e.index-t.index}function wV(e){if(!e.zdirty)return e.zitems;var r,i,a,t=e.items,n=[];for(i=0,a=t.length;i<a;++i)(r=t[i]).index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(xct)}function qi(e,t){var r,i,n=e.items;if(!n||!n.length)return;const a=wV(e);if(a&&a.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=a}for(r=0,i=n.length;r<i;++r)t(n[r])}function Ng(e,t){var r,i,n=e.items;if(!n||!n.length)return null;const a=wV(e);for(a&&a.length&&(n=a),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===a)for(i=(n=e.items).length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r;return null}function xV(e){return function(t,n,r){qi(n,i=>{(!r||r.intersects(i.bounds))&&nae(e,t,i,i)})}}function zct(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&nae(e,t,n.items[0],n.items)}}function nae(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(Y6(t,n),n.fill&&Ag(t,n,i)&&t.fill(),n.stroke&&X6(t,n,i)&&t.stroke()))}function kg(e){return e=e||Jr,function(t,n,r,i,a,s){return r*=t.pixelRatio,i*=t.pixelRatio,Ng(n,o=>{const c=o.bounds;if((!c||c.contains(a,s))&&c&&e(t,o,r,i,a,s))return o})}}function Y5(e,t){return function(n,r,i,a){var u,s=Array.isArray(r)?r[0]:r,o=t??s.fill,c=s.stroke&&n.isPointInStroke;return c&&(u=s.strokeCap,n.lineWidth=s.strokeWidth??1,n.lineCap=u??"butt"),!e(n,r)&&(o&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function zV(e){return kg(Y5(e))}function U4(e,t){return"translate("+e+","+t+")"}function HV(e){return"rotate("+e+")"}function rae(e){return U4(e.x||0,e.y||0)}function SV(e,t,n){function a(s,o){var c=o.x||0,l=o.y||0,u=o.angle||0;s.translate(c,l),u&&s.rotate(u*=Oc),s.beginPath(),t(s,o),u&&s.rotate(-u),s.translate(-c,-l)}return{type:e,tag:"path",nested:!1,attr:function r(s,o){s("transform",function Sct(e){return U4(e.x||0,e.y||0)+(e.angle?" "+HV(e.angle):"")}(o)),s("d",t(null,o))},bound:function i(s,o){return t(W5(s,o.angle),o),yo(s,o).translate(o.x||0,o.y||0)},draw:xV(a),pick:zV(a),isect:n||MV(a)}}var Vct=SV("arc",function hct(e,t){return sct.context(e)(t)});function EV(e,t,n){function a(c,l){c.beginPath(),t(c,l)}const s=Y5(a);return{type:e,tag:"path",nested:!0,attr:function r(c,l){var u=l.mark.items;u.length&&c("d",t(null,u))},bound:function i(c,l){var u=l.items;return 0===u.length?c:(t(W5(c),u),yo(c,u[0]))},draw:zct(a),pick:function o(c,l,u,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:s(c,p,u*=c.pixelRatio,f*=c.pixelRatio)?p[0]:null},isect:_V,tip:n}}var Nct=EV("area",function pct(e,t){const n=t[0];return("horizontal"===n.orient?cct:oct).curve(cV(n.interpolate||"linear",n.orient,n.tension)).context(e)(t)},function Dct(e,t){for(var s,o,n="horizontal"===e[0].orient?t[1]:t[0],r="horizontal"===e[0].orient?"y":"x",i=e.length,a=1/0;--i>=0;)!1!==e[i].defined&&(o=Math.abs(e[i][r]-n))<a&&(a=o,s=e[i]);return s});function iae(e,t){e.beginPath(),dV(t)?G6(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function aae(e){const t=ji(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function sae(e,t){const n=aae(t);e("d",G6(null,t,n,n))}function X5(e,t,n,r){const i=aae(t);e.beginPath(),G6(e,t,(n||0)+i,(r||0)+i)}const Pct=Y5(X5),$ct=Y5(X5,!1),Bct=Y5(X5,!0);var Gct={type:"group",tag:"g",nested:!1,attr:function Tct(e,t){e("transform",rae(t))},bound:function Oct(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),yo(e,t),e.translate(t.x||0,t.y||0)},draw:function Uct(e,t,n,r){qi(t,i=>{const a=i.x||0,s=i.y||0,o=i.strokeForeground,c=null==i.opacity?1:i.opacity;(i.stroke||i.fill)&&c&&(X5(e,i,a,s),Y6(e,i),i.fill&&Ag(e,i,c)&&e.fill(),i.stroke&&!o&&X6(e,i,c)&&e.stroke()),e.save(),e.translate(a,s),i.clip&&iae(e,i),n&&n.translate(-a,-s),qi(i,l=>{("group"===l.marktype||null==r||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(a,s),e.restore(),o&&i.stroke&&c&&(X5(e,i,a,s),Y6(e,i),X6(e,i,c)&&e.stroke())})},pick:function jct(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a)||!t.items)return null;const s=n*e.pixelRatio,o=r*e.pixelRatio;return Ng(t,c=>{let l,u,f;const d=c.bounds;if(d&&!d.contains(i,a))return;u=c.x||0,f=c.y||0;const m=c.clip;if(m&&(i<u||i>u+(c.width||0)||a<f||a>f+(c.height||0)))return;if(e.save(),e.translate(u,f),u=i-u,f=a-f,m&&dV(c)&&!Bct(e,c,s,o))return e.restore(),null;const g=c.strokeForeground,v=!1!==t.interactive;return v&&g&&c.stroke&&$ct(e,c,s,o)?(e.restore(),c):(l=Ng(c,y=>function qct(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(y,u,f)?this.pick(y,n,r,u,f):null),!l&&v&&(c.fill||!g&&c.stroke)&&Pct(e,c,s,o)&&(l=c),e.restore(),l||null)})},isect:Kie,content:function Rct(e,t,n){e("clip-path",t.clip?hV(n,t,t):null)},background:function Ict(e,t){e("class","background"),e("aria-hidden",!0),sae(e,t)},foreground:function Fct(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?sae(e,t):e("d","")}},Q5={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function VV(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function DV(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function LV(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function Tg(e,t){return"center"===e?t/2:"right"===e?t:0}function Ig(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var Qct={type:"image",tag:"image",nested:!1,attr:function Wct(e,t,n){const r=VV(t,n),i=DV(t,r),a=LV(t,r),s=(t.x||0)-Tg(t.align,i),o=(t.y||0)-Ig(t.baseline,a);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",Q5["xmlns:xlink"],"xlink:href"),e("transform",U4(s,o)),e("width",i),e("height",a),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function Yct(e,t){const n=t.image,r=DV(t,n),i=LV(t,n),a=(t.x||0)-Tg(t.align,r),s=(t.y||0)-Ig(t.baseline,i);return e.set(a,s,a+r,s+i)},draw:function Xct(e,t,n){qi(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=VV(r,this);let a=DV(r,i),s=LV(r,i);if(0===a||0===s)return;let l,u,f,d,o=(r.x||0)-Tg(r.align,a),c=(r.y||0)-Ig(r.baseline,s);!1!==r.aspect&&(u=i.width/i.height,f=r.width/r.height,u==u&&f==f&&u!==f&&(f<u?(d=a/u,c+=(s-d)/2,s=d):(d=s*u,o+=(a-d)/2,a=d))),(i.complete||i.toDataURL)&&(Y6(e,r),e.globalAlpha=null!=(l=r.opacity)?l:1,e.imageSmoothingEnabled=!1!==r.smooth,e.drawImage(i,o,c,a,s))})},pick:kg(),isect:Jr,get:VV,xOffset:Tg,yOffset:Ig},Zct=EV("line",function mct(e,t){const n=t[0];return lct.curve(cV(n.interpolate||"linear",n.orient,n.tension)).context(e)(t)},function Lct(e,t){for(var i,a,n=Math.pow(e[0].strokeWidth||1,2),r=e.length;--r>=0;)if(!1!==e[r].defined&&(i=e[r].x-t[0])*i+(a=e[r].y-t[1])*a<n)return e[r];return null});function Fg(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,i=t.y||0,a=t.scaleX||1,s=t.scaleY||1,o=(t.angle||0)*Oc,c=t.pathCache;(!c||c.path!==n)&&((t.pathCache=c=j6(n)).path=n),o&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(o),B5(e,c,0,0,a,s),e.rotate(-o),e.translate(-r,-i)):B5(e,c,r,i,a,s)}var e3t={type:"path",tag:"path",nested:!1,attr:function Kct(e,t){(1!==(t.scaleX||1)||1!==(t.scaleY||1))&&e("vector-effect","non-scaling-stroke"),e("transform",function Ect(e){return U4(e.x||0,e.y||0)+(e.angle?" "+HV(e.angle):"")+(e.scaleX||e.scaleY?" "+function Hct(e,t){return"scale("+e+","+t+")"}(e.scaleX||1,e.scaleY||1):"")}(t)),e("d",t.path)},bound:function Jct(e,t){return Fg(W5(e,t.angle),t)?e.set(0,0,0,0):yo(e,t,!0)},draw:xV(Fg),pick:zV(Fg),isect:MV(Fg)};function oae(e,t){e.beginPath(),G6(e,t)}var r3t={type:"rect",tag:"path",nested:!1,attr:function t3t(e,t){e("d",G6(null,t))},bound:function n3t(e,t){var n,r;return yo(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:xV(oae),pick:zV(oae),isect:Kie};function cae(e,t,n){var r,i,a,s;return!(!t.stroke||!X6(e,t,n)||(r=t.x||0,i=t.y||0,a=null!=t.x2?t.x2:r,s=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(a,s),0))}var c3t={type:"rule",tag:"line",nested:!1,attr:function i3t(e,t){e("transform",rae(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function a3t(e,t){var n,r;return yo(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function s3t(e,t,n){qi(t,r=>{if(!n||n.intersects(r.bounds)){var i=null==r.opacity?1:r.opacity;i&&cae(e,r,i)&&(Y6(e,r),e.stroke())}})},pick:kg(function o3t(e,t,n,r){return!!e.isPointInStroke&&cae(e,t,1)&&e.isPointInStroke(n,r)}),isect:Jie},l3t=SV("shape",function gct(e,t){return(t.mark.shape||t.shape).context(e)(t)}),u3t=SV("symbol",function vct(e,t){return fct.context(e)(t)},_V);const lae=Yte();var Hr={height:is,measureWidth:AV,estimateWidth:Rg,width:Rg,canvas:uae};function uae(e){Hr.width=e&&Bc?AV:Rg}function Rg(e,t){return fae(jc(e,t),is(e))}function fae(e,t){return~~(.8*e.length*t)}function AV(e,t){return is(e)<=0||!(t=jc(e,t))?0:dae(t,Og(e))}function dae(e,t){const n=`(${t}) ${e}`;let r=lae.get(n);return void 0===r&&(Bc.font=t,r=Bc.measureText(e).width,lae.set(n,r)),r}function is(e){return null!=e.fontSize?+e.fontSize||0:11}function Uc(e){return null!=e.lineHeight?e.lineHeight:is(e)+2}function Z5(e){return function f3t(e){return K(e)?e.length>1?e:e[0]:e}(e.lineBreak&&e.text&&!K(e.text)?e.text.split(e.lineBreak):e.text)}function NV(e){const t=Z5(e);return(K(t)?t.length-1:0)*Uc(e)}function jc(e,t){const n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function h3t(e,t){var n=+e.limit,r=function d3t(e){if(Hr.width===AV){const t=Og(e);return n=>dae(n,t)}if(Hr.width===Rg){const t=is(e);return n=>fae(n,t)}return t=>Hr.width(e,t)}(e);if(r(t)<n)return t;var c,i=e.ellipsis||"\u2026",a="rtl"===e.dir,s=0,o=t.length;if(n-=r(i),a){for(;s<o;)r(t.slice(c=s+o>>>1))>n?s=c+1:o=c;return i+t.slice(s)}for(;s<o;)r(t.slice(0,c=1+(s+o>>>1)))<n?s=c:o=c-1;return t.slice(0,s)+i}(e,n):n}function K5(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Og(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+is(e)+"px "+K5(e,t)}function kV(e){var t=e.baseline,n=is(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*Uc(e):"line-bottom"===t?.29*n-.5*Uc(e):0)}uae(!0);const p3t={left:"start",center:"middle",right:"end"},J5=new Rn;function Pg(e){var i,t=e.x||0,n=e.y||0,r=e.radius||0;return r&&(i=(e.theta||0)-O4,t+=r*Math.cos(i),n+=r*Math.sin(i)),J5.x1=t,J5.y1=n,J5}function TV(e,t,n){var f,r=Hr.height(t),i=t.align,a=Pg(t),s=a.x1,o=a.y1,c=t.dx||0,l=(t.dy||0)+kV(t)-Math.round(.8*r),u=Z5(t);if(K(u)?(r+=Uc(t)*(u.length-1),f=u.reduce((d,h)=>Math.max(d,Hr.width(t,h)),0)):f=Hr.width(t,u),"center"===i?c-=f/2:"right"===i&&(c-=f),e.set(c+=s,l+=o,c+f,l+r),t.angle&&!n)e.rotate(t.angle*Oc,s,o);else if(2===n)return e.rotatedPoints(t.angle*Oc,s,o);return e}var C3t={type:"text",tag:"text",nested:!1,attr:function m3t(e,t){var c,n=t.dx||0,r=(t.dy||0)+kV(t),i=Pg(t),a=i.x1,s=i.y1,o=t.angle||0;e("text-anchor",p3t[t.align]||"start"),o?(c=U4(a,s)+" "+HV(o),(n||r)&&(c+=" "+U4(n,r))):c=U4(a+n,s+r),e("transform",c)},bound:TV,draw:function g3t(e,t,n){qi(t,r=>{var a,s,o,c,l,u,f,i=null==r.opacity?1:r.opacity;if(!(n&&!n.intersects(r.bounds)||0===i||r.fontSize<=0||null==r.text||0===r.text.length)){if(e.font=Og(r),e.textAlign=r.align||"left",s=(a=Pg(r)).x1,o=a.y1,r.angle&&(e.save(),e.translate(s,o),e.rotate(r.angle*Oc),s=o=0),s+=r.dx||0,o+=(r.dy||0)+kV(r),u=Z5(r),Y6(e,r),K(u))for(l=Uc(r),c=0;c<u.length;++c)f=jc(r,u[c]),r.fill&&Ag(e,r,i)&&e.fillText(f,s,o),r.stroke&&X6(e,r,i)&&e.strokeText(f,s,o),o+=l;else f=jc(r,u),r.fill&&Ag(e,r,i)&&e.fillText(f,s,o),r.stroke&&X6(e,r,i)&&e.strokeText(f,s,o);r.angle&&e.restore()}})},pick:kg(function v3t(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=Pg(t),o=s.x1,c=s.y1,l=TV(J5,t,1),u=-t.angle*Oc,f=Math.cos(u),d=Math.sin(u);return l.contains(f*i-d*a+(o-f*o+d*c),d*i+f*a+(c-d*o-f*c))}),isect:function y3t(e,t){const n=TV(J5,e,2);return W6(t,n[0],n[1],n[2],n[3])||W6(t,n[0],n[1],n[4],n[5])||W6(t,n[4],n[5],n[6],n[7])||W6(t,n[2],n[3],n[6],n[7])}},b3t=EV("trail",function yct(e,t){return dct.context(e)(t)},function Act(e,t){for(var r,i,n=e.length;--n>=0;)if(!1!==e[n].defined&&(r=e[n].x-t[0])*r+(i=e[n].y-t[1])*i<(r=e[n].size||1)*r)return e[n];return null}),Sr={arc:Vct,area:Nct,group:Gct,image:Qct,line:Zct,path:e3t,rect:r3t,rule:c3t,shape:l3t,symbol:u3t,text:C3t,trail:b3t};function IV(e,t,n){var r=Sr[e.mark.marktype];return r.nested&&(e=e.mark),(t||r.bound)(e.bounds||(e.bounds=new Rn),e,n)}var hae={mark:null};function pae(e,t,n){var o,c,l,u,r=Sr[e.marktype],i=r.bound,a=e.items,s=a&&a.length;if(r.nested)return s?l=a[0]:(hae.mark=e,l=hae),u=IV(l,i,n),t&&t.union(u)||u;if(t=t||e.bounds&&e.bounds.clear()||new Rn,s)for(o=0,c=a.length;o<c;++o)t.union(IV(a[o],i,n));return e.bounds=t}const M3t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function mae(e,t){return JSON.stringify(e,M3t,t)}function gae(e){return vae("string"==typeof e?JSON.parse(e):e)}function vae(e){var r,i,a,t=e.marktype,n=e.items;if(n)for(i=0,a=n.length;i<a;++i)n[i][r=t?"mark":"group"]=e,n[i].zindex&&(n[i][r].zdirty=!0),"group"===(t||r)&&vae(n[i]);return t&&pae(e),e}function FV(e){arguments.length?this.root=gae(e):(this.root=yae({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Hg(this.root)])}function yae(e,t){const n={bounds:new Rn,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function qc(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function RV(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Xn(e,t,n,r){var a,i=e.childNodes[t];return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(a=i||null,i=qc(e.ownerDocument,n,r),e.insertBefore(i,a)),i}function oi(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Cae(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function $g(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Gc(e,t){this._active=null,this._handlers={},this._loader=e||Hm(),this._tooltip=t||w3t}function w3t(e,t,n,r){e.element().setAttribute("title",r||"")}function Er(e){this._el=null,this._bgcolor=null,this._loader=new pV(e)}FV.prototype={toJSON(e){return mae(this.root,e||0)},mark(e,t,n){const r=yae(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},Gc.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),a=qc(null,"a");for(const s in r)a.setAttribute(s,r[s]);a.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){t&&null!=t.tooltip&&(t=function _3t(e,t,n,r){var a,s,i=e&&e.mark;if(i&&(a=Sr[i.marktype]).tip){for((s=$g(t,n))[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=a.tip(i.items,s)}return e}(t,e,this.canvas(),this._origin),this._tooltip.call(this._obj,this,e,t,n&&t&&t.tooltip||null))},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,a=i.width(),s=i.height();let o=i.x1+r[0]+n.left,c=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)o+=e.x||0,c+=e.y||0;return{x:o,y:c,width:a,height:s,left:o,top:c,right:o+a,bottom:c+s}}},Er.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e,t){const n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){const n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(a=>{a&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const Bg="dragleave",OV="pointerdown",Ug="pointermove",e7="pointerout",_ae="pointerover",PV="mousedown",$V="mouseout",jg="click",zae="mousewheel",qg="touchstart",Gg="touchmove",Wg="touchend",BV=Ug,t7=e7,UV=jg;function Wc(e,t){Gc.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}function Hae(e,t){(e=>e===qg||e===Gg||e===Wg?[qg,Gg,Wg]:[e])(t).forEach(n=>function N3t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}(e,n))}function n7(e,t,n){t.forEach(r=>e.fire(r,n))}function Sae(e,t,n){return function(r){const i=this._active,a=this.pickEvent(r);a===i||((!i||!i.exit)&&n7(this,n,r),this._active=a,n7(this,t,r)),n7(this,e,r)}}function Eae(e){return function(t){n7(this,e,t),this._active=null}}function r7(e){Er.call(this,e),this._options={},this._redraw=!1,this._dirty=new Rn,this._tempb=new Rn}le(Wc,Gc,{initialize(e,t,n){return this._canvas=e&&RV(e,"canvas"),[jg,PV,OV,Ug,e7,Bg].forEach(r=>Hae(this,r)),Gc.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup","dragenter",Bg,"dragover",OV,"pointerup",Ug,e7,_ae,PV,"mouseup","mousemove",$V,"mouseover",jg,"dblclick","wheel",zae,qg,Gg,Wg],DOMMouseScroll(e){this.fire(zae,e)},pointermove:Sae([Ug,"mousemove"],[_ae,"mouseover"],[e7,$V]),dragover:Sae(["dragover"],["dragenter"],[Bg]),pointerout:Eae([e7,$V]),dragleave:Eae([Bg]),pointerdown(e){this._down=this._active,this.fire(OV,e)},mousedown(e){this._down=this._active,this.fire(PV,e)},click(e){this._down===this._active&&(this.fire(jg,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(qg,e,!0)},touchmove(e){this.fire(Gg,e,!0)},touchend(e){this.fire(Wg,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===UV&&r&&r.href?this.handleHref(t,r,r.href):(e===BV||e===t7)&&this.handleTooltip(t,r,e!==t7),i)for(let a=0,s=i.length;a<s;++a)i[a].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(Hae(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=$g(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const a=this.context();return Sr[e.marktype].pick.call(this,a,e,t,n,r,i)}});const Vae=Er.prototype;function jV(e,t){Gc.call(this,e,t);const n=this;n._hrefHandler=qV(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=qV(n,(r,i)=>{n.handleTooltip(r,i,r.type!==t7)})}le(r7,Er,{initialize(e,t,n,r,i,a){return this._options=a||{},this._canvas=this._options.externalContext?null:Nc(1,1),e&&this._canvas&&(oi(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Vae.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(Vae.resize.call(this,e,t,n,r),this._canvas)!function T3t(e,t,n,r,i,a){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&null!=e.parentNode,o=e.getContext("2d"),c=s?function k3t(){return typeof window<"u"&&window.devicePixelRatio||1}():i;e.width=t*c,e.height=n*c;for(const l in a)o[l]=a[l];return s&&1!==c&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=c,o.setTransform(c,0,0,c,c*r[0],c*r[1]),e}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||Z("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){const n=this.context(),r=this._origin,i=this._width,a=this._height,s=this._dirty,o=((e,t,n)=>(new Rn).set(0,0,t,n).translate(-e[0],-e[1]))(r,i,a);n.save();const c=this._redraw||s.empty()?(this._redraw=!1,o.expand(1)):function F3t(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(n,o.intersect(s),r);return this.clear(-r[0],-r[1],i,a),this.draw(n,e,c,t),n.restore(),s.clear(),this},draw(e,t,n,r){if("group"!==t.marktype&&null!=r&&!r.includes(t.marktype))return;const i=Sr[t.marktype];t.clip&&function kct(e,t){var n=t.clip;e.save(),Je(n)?(e.beginPath(),n(e),e.clip()):iae(e,t.group)}(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,a=this.context();"pdf"!==i.type&&!i.externalContext&&a.clearRect(e,t,n,r),null!=this._bgcolor&&(a.fillStyle=this._bgcolor,a.fillRect(e,t,n,r))}});const qV=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};le(jV,Gc,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(UV,this._hrefHandler),r.removeEventListener(BV,this._tooltipHandler),r.removeEventListener(t7,this._tooltipHandler)),this._svg=r=e&&RV(e,"svg"),r&&(r.addEventListener(UV,this._hrefHandler),r.addEventListener(BV,this._tooltipHandler),r.addEventListener(t7,this._tooltipHandler)),Gc.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const a={type:e,handler:t,listener:qV(this,t)};(r[n]||(r[n]=[])).push(a),this._svg&&this._svg.addEventListener(n,a.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const Dae="aria-hidden",GV="aria-label",WV="role",YV="aria-roledescription",Lae="graphics-object",XV="graphics-symbol",Aae=(e,t,n)=>({[WV]:e,[YV]:t,[GV]:n||void 0}),R3t=Oi(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Nae={axis:{desc:"axis",caption:function $3t(e){const t=e.datum,n=e.orient,r=t.title?Rae(e):null,i=e.context,a=i.scales[t.scale].value,s=i.dataflow.locale(),o=a.type;return("left"===n||"right"===n?"Y":"X")+"-axis"+(r?` titled '${r}'`:"")+` for a ${U6(o)?"discrete":o} scale with ${Aie(s,a,e)}`}},legend:{desc:"legend",caption:function B3t(e){const t=e.datum,n=t.title?Rae(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,a=Object.keys(i),s=e.context,o=s.scales[i[a[0]]].value,c=s.dataflow.locale();return function j3t(e){return e.length?e[0].toUpperCase()+e.slice(1):e}(r)+(n?` titled '${n}'`:"")+` for ${function U3t(e){return e=e.map(t=>t+("fill"===t||"stroke"===t?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+lt(e)}(a)} with ${Aie(c,o,e)}`}},"title-text":{desc:"title",caption:e=>`Title text '${Fae(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Fae(e)}'`}},kae={ariaRole:WV,ariaRoleDescription:YV,description:GV};function Tae(e,t){const n=!1===t.aria;if(e(Dae,n||void 0),n||null==t.description)for(const r in kae)e(kae[r],void 0);else{const r=t.mark.marktype;e(GV,t.description),e(WV,t.ariaRole||("group"===r?Lae:XV)),e(YV,t.ariaRoleDescription||`${r} mark`)}}function Iae(e){return!1===e.aria?{[Dae]:!0}:R3t[e.role]?null:Nae[e.role]?function P3t(e,t){try{const n=e.items[0];return Aae(t.role||XV,t.desc,n.description||(t.caption||(()=>""))(n))}catch{return null}}(e,Nae[e.role]):function O3t(e){const t=e.marktype,n="group"===t||"text"===t||e.items.some(r=>null!=r.description&&!1!==r.aria);return Aae(n?Lae:XV,`${t} mark container`,e.description)}(e)}function Fae(e){return me(e.text).join(" ")}function Rae(e){try{return me(lt(e.items).items[0].text).join(" ")}catch{return null}}const Oae=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),q3t=e=>Oae(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function QV(){let e="",t="",n="";const r=[],i=()=>t=n="",s=(c,l)=>(null!=l&&(t+=` ${c}="${q3t(l)}"`),o),o={open(c){(c=>{t&&(e+=`${t}>${n}`,i()),r.push(c)})(c),t="<"+c;for(var l=arguments.length,u=new Array(l>1?l-1:0),f=1;f<l;f++)u[f-1]=arguments[f];for(const d of u)for(const h in d)s(h,d[h]);return o},close(){const c=r.pop();return e+=t?t+(n?`>${n}</${c}>`:"/>"):`</${c}>`,i(),o},attr:s,text:c=>(n+=Oae(c),o),toString:()=>e};return o}const Pae=e=>$ae(QV(),e)+"";function $ae(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)3===r.nodeType?e.text(r.nodeValue):$ae(e,r)}return e.close()}const Yg={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Xg={blend:"mix-blend-mode"},Bae={fill:"none","stroke-miterlimit":10},Uae="http://www.w3.org/2000/xmlns/",Qn=Q5.xmlns;function Qg(e){Er.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const ZV=Er.prototype;function jae(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function G3t(e,t,n){let r,i,a;if("radial"===t.gradient){let s=Xn(e,n++,"pattern",Qn);Yc(s,{id:"p_"+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=Xn(s,0,"rect",Qn),Yc(s,{width:1,height:1,fill:`url(${Gae()}#${t.id})`}),Yc(e=Xn(e,n++,"radialGradient",Qn),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else Yc(e=Xn(e,n++,"linearGradient",Qn),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)a=Xn(e,r,"stop",Qn),a.setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);return oi(e,r),n}function W3t(e,t,n){let r;return(e=Xn(e,n,"clipPath",Qn)).setAttribute("id",t.id),t.path?(r=Xn(e,0,"path",Qn),r.setAttribute("d",t.path)):(r=Xn(e,0,"rect",Qn),Yc(r,{x:0,y:0,width:t.width,height:t.height})),oi(e,1),n+1}function qae(e,t,n,r,i){let s,a=e._svg;if(!a&&(s=t.ownerDocument,a=qc(s,r,Qn),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},"g"===r))){const o=qc(s,"path",Qn);a.appendChild(o),o.__data__=e;const c=qc(s,"g",Qn);a.appendChild(c),c.__data__=e;const l=qc(s,"path",Qn);a.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(a.ownerSVGElement!==i||function X3t(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}le(Qg,Er,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=Xn(e,0,"svg",Qn),this._svg.setAttributeNS(Uae,"xmlns",Qn),this._svg.setAttributeNS(Uae,"xmlns:xlink",Q5["xmlns:xlink"]),this._svg.setAttribute("version",Q5.version),this._svg.setAttribute("class","marks"),oi(e,1),this._root=Xn(this._svg,0,"g",Qn),Yc(this._root,Bae),oi(this._svg,1)),this.background(this._bgcolor),ZV.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),ZV.background.apply(this,arguments)},resize(e,t,n,r){return ZV.resize.call(this,e,t,n,r),this._svg&&(Yc(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=Xn(e,0,"rect",Qn),Yc(n,{width:this._width,height:this._height,fill:t}));const r=Pae(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),oi(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,a,s,o,c;for(s=0,o=e.length;s<o;++s)if(n=e[s],r=n.mark,r.marktype!==i&&(i=r.marktype,a=Sr[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,jae(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){a.nested&&r.items.length?(c=r.items[0],c._svg&&this._update(a,c._svg,c)):n._svg&&(c=n._svg.parentNode,c&&c.removeChild(n._svg)),n._svg=null;continue}n=a.nested?r.items[0]:n,n._update!==t&&(n._svg&&n._svg.ownerSVGElement?this._update(a,n._svg,n):(this._dirtyAll=!1,jae(n,t)),n._update=t)}return!this._dirtyAll},mark(e,t,n,r){if(!this.isDirty(t))return t._svg;const i=this._svg,a=t.marktype,s=Sr[a],o=!1===t.interactive?"none":null,c="g"===s.tag,l=qae(t,e,n,"g",i);if("group"!==a&&null!=r&&!r.includes(a))return oi(l,0),t._svg;l.setAttribute("class",Cae(t));const u=Iae(t);for(const p in u)f2(l,p,u[p]);c||f2(l,"pointer-events",o),f2(l,"clip-path",t.clip?hV(this,t,t.group):null);let f=null,d=0;const h=p=>{const m=this.isDirty(p),g=qae(p,l,f,s.tag,i);m&&(this._update(s,g,p),c&&function Y3t(e,t,n,r){t=t.lastChild.previousSibling;let i,a=0;qi(n,s=>{i=e.mark(t,s,i,r),++a}),oi(t,1+a)}(this,g,p,r)),f=g,++d};return s.nested?t.items.length&&h(t.items[0]):qi(t,h),oi(l,d),l},_update(e,t,n){Co=t,q1=t.__values__,Tae(a7,n),e.attr(a7,n,this);const r=Q3t[e.type];r&&r.call(this,e,t,n),Co&&this.style(Co,n)},style(e,t){if(null!=t){for(const n in Yg){let r="font"===n?K5(t):t[n];if(r===q1[n])continue;const i=Yg[n];null==r?e.removeAttribute(i):(oV(r)&&(r=kie(r,this._defs.gradient,Gae())),e.setAttribute(i,r+"")),q1[n]=r}for(const n in Xg)Zg(e,Xg[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=Xn(e,1,"defs",Qn)),r=G3t(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=Xn(e,1,"defs",Qn)),r=W3t(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):oi(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});let Co=null,q1=null;const Q3t={group(e,t,n){const r=Co=t.childNodes[2];q1=r.__values__,e.foreground(a7,n,this),q1=t.__values__,Co=t.childNodes[1],e.content(a7,n,this);const i=Co=t.childNodes[0];e.background(a7,n,this);const a=!1===n.mark.interactive?"none":null;if(a!==q1.events&&(f2(r,"pointer-events",a),f2(i,"pointer-events",a),q1.events=a),n.strokeForeground&&n.stroke){const s=n.fill;f2(r,"display",null),this.style(i,n),f2(i,"stroke",null),s&&(n.fill=null),q1=r.__values__,this.style(r,n),s&&(n.fill=s),Co=null}else f2(r,"display","none")},image(e,t,n){!1===n.smooth?(Zg(t,"image-rendering","optimizeSpeed"),Zg(t,"image-rendering","pixelated")):Zg(t,"image-rendering",null)},text(e,t,n){const r=Z5(n);let i,a,s,o;K(r)?(a=r.map(c=>jc(n,c)),i=a.join("\n"),i!==q1.text&&(oi(t,0),s=t.ownerDocument,o=Uc(n),a.forEach((c,l)=>{const u=qc(s,"tspan",Qn);u.__data__=n,u.textContent=c,l&&(u.setAttribute("x",0),u.setAttribute("dy",o)),t.appendChild(u)}),q1.text=i)):(a=jc(n,r),a!==q1.text&&(t.textContent=a,q1.text=a)),f2(t,"font-family",K5(n)),f2(t,"font-size",is(n)+"px"),f2(t,"font-style",n.fontStyle),f2(t,"font-variant",n.fontVariant),f2(t,"font-weight",n.fontWeight)}};function a7(e,t,n){t!==q1[e]&&(n?function Z3t(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}(Co,e,t,n):f2(Co,e,t),q1[e]=t)}function Zg(e,t,n){n!==q1[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),q1[t]=n)}function Yc(e,t){for(const n in t)f2(e,n,t[n])}function f2(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function Gae(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function KV(e){Er.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}le(KV,Er,{svg(){return this._text},_render(e){const t=QV();t.open("svg",et({},Q5,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",Bae,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=Sr[t.marktype],r=n.tag,i=[Tae,n.attr];e.open("g",{class:Cae(t),"clip-path":t.clip?hV(this,t,t.group):null},Iae(t),{"pointer-events":"g"!==r&&!1===t.interactive?"none":null});const a=s=>{const o=this.href(s);if(o&&e.open("a",o),e.open(r,this.attr(t,s,i,"g"!==r?r:null)),"text"===r){const c=Z5(s);if(K(c)){const l={x:0,dy:Uc(s)};for(let u=0;u<c.length;++u)e.open("tspan",u?l:null).text(jc(s,c[u])).close()}else e.text(jc(s,c))}else if("g"===r){const c=s.strokeForeground,l=s.fill,u=s.stroke;c&&u&&(s.stroke=null),e.open("path",this.attr(t,s,n.background,"bgrect")).close(),e.open("g",this.attr(t,s,n.content)),qi(s,f=>this.mark(e,f)),e.close(),c&&u?(l&&(s.fill=null),s.stroke=u,e.open("path",this.attr(t,s,n.foreground,"bgrect")).close(),l&&(s.fill=l)):e.open("path",this.attr(t,s,n.foreground,"bgfore")).close()}e.close(),o&&e.close()};return n.nested?t.items&&t.items.length&&a(t.items[0]):qi(t,a),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},a=(s,o,c,l)=>{i[l||s]=o};return Array.isArray(n)?n.forEach(s=>s(a,t,this)):n(a,t,this),r&&function K3t(e,t,n,r,i){let a;if(null==t||("bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none"),"bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill)))return e;"image"===r&&!1===t.smooth&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),"text"===r&&(e["font-family"]=K5(t),e["font-size"]=is(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in Yg){let o=t[s];const c=Yg[s];"transparent"===o&&("fill"===c||"stroke"===c)||null!=o&&(oV(o)&&(o=kie(o,i.gradient,"")),e[c]=o)}for(const s in Xg){const o=t[s];null!=o&&(a=a||[],a.push(`${Xg[s]}: ${o};`))}a&&(e.style=a.join(" "))}(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const a=t[i],s=a.stops;"radial"===a.gradient?(e.open("pattern",{id:"p_"+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:a.x1,fy:a.y1,fr:a.r1,cx:a.x2,cy:a.y2,r:a.r2})):e.open("linearGradient",{id:i,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2});for(let o=0;o<s.length;++o)e.open("stop",{offset:s[o].offset,"stop-color":s[o].color}).close();e.close()}for(const i in n){const a=n[i];e.open("clipPath",{id:i}),a.path?e.open("path",{d:a.path}).close():e.open("rect",{x:0,y:0,width:a.width,height:a.height}).close(),e.close()}e.close()}}});const Gi={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function J3t(e){Gi.svgMarkTypes=e.svgMarkTypes??["text"],Gi.svgOnTop=e.svgOnTop??!0,Gi.debug=e.debug??!1}function Kg(e){Er.call(this,e),this._svgRenderer=new Qg(e),this._canvasRenderer=new r7(e)}const Wae=Er.prototype;function JV(e,t){Wc.call(this,e,t)}le(Kg,Er,{initialize(e,t,n,r,i){this._root_el=Xn(e,0,"div");const a=Xn(this._root_el,0,"div"),s=Xn(this._root_el,1,"div");return this._root_el.style.position="relative",Gi.debug||(a.style.height="100%",s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.height="100%",s.style.width="100%"),this._svgEl=Gi.svgOnTop?s:a,this._canvasEl=Gi.svgOnTop?a:s,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),Wae.initialize.call(this,e,t,n,r,i)},dirty(e){return Gi.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){const r=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(i=>!Gi.svgMarkTypes.includes(i));this._svgRenderer.render(e,Gi.svgMarkTypes),this._canvasRenderer.render(e,r)},resize(e,t,n,r){return Wae.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background(e){return Gi.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}}),le(JV,Wc,{initialize(e,t,n){const r=Xn(Xn(e,0,"div"),Gi.svgOnTop?0:1,"div");return Wc.prototype.initialize.call(this,r,t,n)}});const Xc={Canvas:"canvas",PNG:"png",SVG:"svg",Hybrid:"hybrid",None:"none"},j4={};function Jg(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(j4[e]=t,this):j4[e]}function Jae(e,t,n){const r=[],i=(new Rn).union(t),a=e.marktype;return a?ese(e,i,n,r):"group"===a?tse(e,i,n,r):Z("Intersect scene must be mark node or group item.")}function ese(e,t,n,r){if(function e4t(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){const i=e.items,a=e.marktype,s=i.length;let o=0;if("group"===a)for(;o<s;++o)tse(i[o],t,n,r);else for(const c=Sr[a].isect;o<s;++o){const l=i[o];nse(l,t,c)&&r.push(l)}}return r}function tse(e,t,n,r){n&&n(e.mark)&&nse(e,t,Sr.group.isect)&&r.push(e);const i=e.items,a=i&&i.length;if(a){const s=e.x||0,o=e.y||0;t.translate(-s,-o);for(let c=0;c<a;++c)ese(i[c],t,n,r);t.translate(s,o)}return r}function nse(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}j4.canvas=j4.png={renderer:r7,headless:r7,handler:Wc},j4.svg={renderer:Qg,headless:KV,handler:jV},j4.hybrid={renderer:Kg,headless:Kg,handler:JV},j4.none={};const eD=new Rn;function rse(e){const t=e.clip;if(Je(t))t(W5(eD.clear()));else{if(!t)return;eD.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(eD)}const t4t=1e-9;function tD(e,t,n){return e===t||("path"===n?ise(e,t):e instanceof Date&&t instanceof Date?+e==+t:mt(e)&&mt(t)?Math.abs(e-t)<=t4t:e&&t&&(ve(e)||ve(t))?function n4t(e,t){var i,a,n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(n.sort(),r.sort(),a=n.length-1;a>=0;a--)if(n[a]!=r[a])return!1;for(a=n.length-1;a>=0;a--)if(!tD(e[i=n[a]],t[i],i))return!1;return typeof e==typeof t}(e,t):e==t)}function ise(e,t){return tD(j6(e),j6(t))}function r4t(){qie(),function Sot(){Nie=0}()}const Q6="top",Wi="left",Yi="right",Qc="bottom",nD="start",rD="middle",d2="end",c4t="x",l4t="y",ev="group",iD="axis",aD="title",sD="legend",ase="row-header",sse="row-footer",cse="column-header",lse="column-footer",use="column-title",oD="none",tv="all",cD="each",lD="flush",Zc="column",Kc="row";function pse(e){Y.call(this,null,e)}function nv(e,t,n){return t(e.bounds.clear(),e,n)}le(pse,Y,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,a=Sr[i],s=a.bound;let c,o=r.bounds;if(a.nested)r.items.length&&n.dirty(r.items[0]),o=nv(r,s),r.items.forEach(l=>{l.bounds.clear().union(o)});else if(i===ev||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),o.clear(),r.items.forEach(l=>o.union(nv(l,s))),r.role){case iD:case sD:case aD:t.reflow()}else c=t.changed(t.REM),t.visit(t.ADD,l=>{o.union(nv(l,s))}),t.visit(t.MOD,l=>{c=c||o.alignsWith(l.bounds),n.dirty(l),o.union(nv(l,s))}),c&&(o.clear(),r.items.forEach(l=>o.union(l.bounds)));return rse(r),t.modifies("bounds")}});const mse=":vega_identifier:";function uD(e){Y.call(this,0,e)}function gse(e){Y.call(this,null,e)}function vse(e){Y.call(this,null,e)}uD.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},le(uD,Y,{transform(e,t){const n=function m4t(e){return e._signals[mse]||(e._signals[mse]=e.add(0))}(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,a=>a[r]=a[r]||++i),n.set(this.value=i),t}}),le(gse,Y,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,function g4t(e){const t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===ev?Hg:zg;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});const yse={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>i&&Cse(n.bounds,r.bounds,t)?r.opacity=0:(n=r,1))}},Cse=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),bse=(e,t)=>{for(var a,n=1,r=e.length,i=e[0].bounds;n<r;i=a,++n)if(Cse(i,a=e[n].bounds,t))return!0},v4t=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Mse=e=>(e.forEach(t=>t.opacity=1),e),_se=(e,t)=>e.reflow(t.modified()).modifies("opacity");function wse(e){Y.call(this,null,e)}le(vse,Y,{transform(e,t){const n=yse[e.method]||yse.parity,r=e.separation||0;let a,s,i=t.materialize(t.SOURCE).source;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Mse(i),t=_se(t,e)),t;if(i=i.filter(v4t),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),a=Mse(i),t=_se(t,e),a.length>=3&&bse(a,r)){do{a=n(a,r)}while(a.length>=3&&bse(a,r));a.length<3&&!lt(i).opacity&&(a.length>1&&(lt(a).opacity=0),lt(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=((e,t,n)=>{var r=e.range(),i=new Rn;return t===Q6||t===Qc?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),a=>i.encloses(a.bounds)})(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(c=>{s(c)||(c.opacity=0)}));const o=a[0].mark.bounds.clear();return i.forEach(c=>{c.opacity&&o.union(c.bounds)}),t}}),le(wse,Y,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const G1=new Rn;function Z6(e,t,n){return e[t]===n?0:(e[t]=n,1)}function C4t(e){var t=e.items[0].orient;return t===Wi||t===Yi}function M4t(e,t,n,r){var b,M,i=t.items[0],a=i.datum,s=null!=i.translate?i.translate:.5,o=i.orient,c=function b4t(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(a),l=i.range,u=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=a.title&&i.items[c[2]].items[0],m=i.titlePadding,g=i.bounds,v=p&&NV(p),y=0,C=0;switch(G1.clear().union(g),g.clear(),(b=c[0])>-1&&g.union(i.items[b].bounds),(b=c[1])>-1&&g.union(i.items[b].bounds),o){case Q6:y=f||0,C=-u,M=Math.max(d,Math.min(h,-g.y1)),g.add(0,-M).add(l,0),p&&rv(e,p,M,m,v,0,-1,g);break;case Wi:y=-u,C=f||0,M=Math.max(d,Math.min(h,-g.x1)),g.add(-M,0).add(0,l),p&&rv(e,p,M,m,v,1,-1,g);break;case Yi:y=n+u,C=f||0,M=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(M,l),p&&rv(e,p,M,m,v,1,1,g);break;case Qc:y=f||0,C=r+u,M=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,M),p&&rv(e,p,M,m,0,0,1,g);break;default:y=i.x,C=i.y}return yo(g.translate(y,C),i),Z6(i,"x",y+s)|Z6(i,"y",C+s)&&(i.bounds=G1,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function rv(e,t,n,r,i,a,s,o){const c=t.bounds;if(t.auto){const l=s*(n+i+r);let u=0,f=0;e.dirty(t),a?u=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(c.translate(-u,-f)),e.dirty(t)}o.union(c)}const xse=(e,t)=>Math.floor(Math.min(e,t)),zse=(e,t)=>Math.ceil(Math.max(e,t));function w4t(e){return(new Rn).set(0,0,e.width||0,e.height||0)}function x4t(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function ln(e,t,n){return(ve(e)?e[t]:e)??(void 0!==n?n:0)}function Hse(e){return e<0?Math.ceil(-e):0}function Sse(e,t,n){var w,_,z,S,D,L,R,N,x,H,V,r=!n.nodirty,i=n.bounds===lD?w4t:x4t,a=G1.set(0,0,0,0),s=ln(n.align,Zc),o=ln(n.align,Kc),c=ln(n.padding,Zc),l=ln(n.padding,Kc),u=n.columns||t.length,f=u<=0?1:Math.ceil(t.length/u),d=t.length,h=Array(d),p=Array(u),m=0,g=Array(d),v=Array(f),y=0,C=Array(d),b=Array(d),M=Array(d);for(_=0;_<u;++_)p[_]=0;for(_=0;_<f;++_)v[_]=0;for(_=0;_<d;++_)D=M[_]=i(L=t[_]),L.x=L.x||0,C[_]=0,L.y=L.y||0,b[_]=0,z=_%u,S=~~(_/u),m=Math.max(m,R=Math.ceil(D.x2)),y=Math.max(y,N=Math.ceil(D.y2)),p[z]=Math.max(p[z],R),v[S]=Math.max(v[S],N),h[_]=c+Hse(D.x1),g[_]=l+Hse(D.y1),r&&e.dirty(t[_]);for(_=0;_<d;++_)_%u==0&&(h[_]=0),_<u&&(g[_]=0);if(s===cD)for(z=1;z<u;++z){for(V=0,_=z;_<d;_+=u)V<h[_]&&(V=h[_]);for(_=z;_<d;_+=u)h[_]=V+p[z-1]}else if(s===tv){for(V=0,_=0;_<d;++_)_%u&&V<h[_]&&(V=h[_]);for(_=0;_<d;++_)_%u&&(h[_]=V+m)}else for(s=!1,z=1;z<u;++z)for(_=z;_<d;_+=u)h[_]+=p[z-1];if(o===cD)for(S=1;S<f;++S){for(V=0,w=(_=S*u)+u;_<w;++_)V<g[_]&&(V=g[_]);for(_=S*u;_<w;++_)g[_]=V+v[S-1]}else if(o===tv){for(V=0,_=u;_<d;++_)V<g[_]&&(V=g[_]);for(_=u;_<d;++_)g[_]=V+y}else for(o=!1,S=1;S<f;++S)for(w=(_=S*u)+u;_<w;++_)g[_]+=v[S-1];for(x=0,_=0;_<d;++_)C[_]+=(x=h[_]+(_%u?x:0))-t[_].x;for(z=0;z<u;++z)for(H=0,_=z;_<d;_+=u)b[_]+=(H+=g[_])-t[_].y;if(s&&ln(n.center,Zc)&&f>1)for(_=0;_<d;++_)(x=(D=s===tv?m:p[_%u])-M[_].x2-t[_].x-C[_])>0&&(C[_]+=x/2);if(o&&ln(n.center,Kc)&&1!==u)for(_=0;_<d;++_)(H=(D=o===tv?y:v[~~(_/u)])-M[_].y2-t[_].y-b[_])>0&&(b[_]+=H/2);for(_=0;_<d;++_)a.union(M[_].translate(C[_],b[_]));switch(x=ln(n.anchor,c4t),H=ln(n.anchor,l4t),ln(n.anchor,Zc)){case d2:x-=a.width();break;case rD:x-=a.width()/2}switch(ln(n.anchor,Kc)){case d2:H-=a.height();break;case rD:H-=a.height()/2}for(x=Math.round(x),H=Math.round(H),a.clear(),_=0;_<d;++_)t[_].mark.bounds.clear();for(_=0;_<d;++_)(L=t[_]).x+=C[_]+=x,L.y+=b[_]+=H,a.union(L.mark.bounds.union(L.bounds.translate(C[_],b[_]))),r&&e.dirty(L);return a}function H4t(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function S4t(e,t){return e.bounds[t]}function iv(e,t,n,r,i,a,s,o,c,l,u,f,d,h){var v,y,C,b,M,w,_,z,S,p=n.length,m=0,g=0;if(!p)return m;for(v=u;v<p;v+=f)n[v]&&(m=s(m,c(n[v],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=a,y=0,b=t.length;y<b;++y)e.dirty(t[y]),t[y].mark.bounds.clear();for(v=u,y=0,b=t.length;y<b;++y,v+=f){for(M=(w=t[y]).mark.bounds,C=v;C>=0&&null==(_=n[C]);C-=d);o?(z=null==h?_.x:Math.round(_.bounds.x1+h*_.bounds.width()),S=m):(z=m,S=null==h?_.y:Math.round(_.bounds.y1+h*_.bounds.height())),M.union(w.bounds.translate(z-(w.x||0),S-(w.y||0))),w.x=z,w.y=S,e.dirty(w),g=s(g,M[l])}return g}function Ese(e,t,n,r,i,a){if(t){e.dirty(t);var s=n,o=n;r?s=Math.round(i.x1+a*i.width()):o=Math.round(i.y1+a*i.height()),t.bounds.translate(s-(t.x||0),o-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=o,e.dirty(t)}}function D4t(e,t,n,r,i,a,s){const o=function E4t(e,t){const n=e[t]||{};return(r,i)=>null!=n[r]?n[r]:null!=e[r]?e[r]:i}(n,t),c=function V4t(e,t){let n=-1/0;return e.forEach(r=>{null!=r.offset&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}(e,o("offset",0)),l=o("anchor",nD),u=l===d2?1:l===rD?.5:0,f={align:cD,bounds:o("bounds",lD),columns:"vertical"===o("direction")?1:e.length,padding:o("margin",8),center:o("center"),nodirty:!0};switch(t){case Wi:f.anchor={x:Math.floor(r.x1)-c,column:d2,y:u*(s||r.height()+2*r.y1),row:l};break;case Yi:f.anchor={x:Math.ceil(r.x2)+c,y:u*(s||r.height()+2*r.y1),row:l};break;case Q6:f.anchor={y:Math.floor(i.y1)-c,row:d2,x:u*(a||i.width()+2*i.x1),column:l};break;case Qc:f.anchor={y:Math.ceil(i.y2)+c,x:u*(a||i.width()+2*i.x1),column:l};break;case"top-left":f.anchor={x:c,y:c};break;case"top-right":f.anchor={x:a-c,y:c,column:d2};break;case"bottom-left":f.anchor={x:c,y:s-c,row:d2};break;case"bottom-right":f.anchor={x:a-c,y:s-c,column:d2,row:d2}}return f}function L4t(e,t){var c,l,n=t.items[0],r=n.datum,i=n.orient,a=n.bounds,s=n.x,o=n.y;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),function N4t(e,t,n){var r=t.padding,i=r-n.x,a=r-n.y;if(t.datum.title){var s=t.items[1].items[0],o=s.anchor,c=t.titlePadding||0,l=r-s.x,u=r-s.y;switch(s.orient){case Wi:i+=Math.ceil(s.bounds.width())+c;break;case Yi:case Qc:break;default:a+=s.bounds.height()+c}switch((i||a)&&s7(e,n,i,a),s.orient){case Wi:u+=K6(t,n,s,o,1,1);break;case Yi:l+=K6(t,n,s,d2,0,0)+c,u+=K6(t,n,s,o,1,1);break;case Qc:l+=K6(t,n,s,o,0,0),u+=K6(t,n,s,d2,-1,0,1)+c;break;default:l+=K6(t,n,s,o,0,0)}(l||u)&&s7(e,s,l,u),(l=Math.round(s.bounds.x1-r))<0&&(s7(e,n,-l,0),s7(e,s,-l,0))}else(i||a)&&s7(e,n,i,a)}(e,n,n.items[0].items[0]),a=function A4t(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}(n,a),c=2*n.padding,l=2*n.padding,a.empty()||(c=Math.ceil(a.width()+c),l=Math.ceil(a.height()+l)),"symbol"===r.type&&function k4t(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}(n.items[0].items[0].items[0].items),i!==oD&&(n.x=s=0,n.y=o=0),n.width=c,n.height=l,yo(a.set(s,o,s+c,o+l),n),n.mark.bounds.clear().union(a),n}function K6(e,t,n,r,i,a,s){const c=n.datum.vgrad,u=("symbol"===e.datum.type||!a&&c||s?t:t.items[0]).bounds[i?"y2":"x2"]-e.padding,f=c&&a?u:0,d=c&&a?0:u,h=i<=0?0:NV(n);return Math.round(r===nD?f:r===d2?d-h:.5*(u-h))}function s7(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Vse(e){Y.call(this,null,e)}function Dse(e,t){let n=0;if(void 0===t)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Lse(e){Y.call(this,null,e)}function Ase(e){Y.call(this,null,e)}function O4t(){return xt({})}function Nse(e){Y.call(this,null,e)}function kse(e){Y.call(this,[],e)}le(Vse,Y,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&function z4t(e,t,n){var u,f,d,h,p,m,g,r=function _4t(e){var i,a,t=e.items,n=t.length,r=0;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(a=(i=t[r]).items,i.marktype===ev)switch(i.role){case iD:case sD:case aD:break;case ase:s.rowheaders.push(...a);break;case sse:s.rowfooters.push(...a);break;case cse:s.colheaders.push(...a);break;case lse:s.colfooters.push(...a);break;case"row-title":s.rowtitle=a[0];break;case use:s.coltitle=a[0];break;default:s.marks.push(...a)}return s}(t),i=r.marks,a=n.bounds===lD?H4t:S4t,s=n.offset,o=n.columns||i.length,c=o<=0?1:Math.ceil(i.length/o),l=c*o;const v=Sse(e,i,n);v.empty()&&v.set(0,0,0,0),r.rowheaders&&(m=ln(n.headerBand,Kc,null),u=iv(e,r.rowheaders,i,0,c,-ln(s,"rowHeader"),xse,0,a,"x1",0,o,1,m)),r.colheaders&&(m=ln(n.headerBand,Zc,null),f=iv(e,r.colheaders,i,0,o,-ln(s,"columnHeader"),xse,1,a,"y1",0,1,o,m)),r.rowfooters&&(m=ln(n.footerBand,Kc,null),d=iv(e,r.rowfooters,i,0,c,ln(s,"rowFooter"),zse,0,a,"x2",o-1,o,1,m)),r.colfooters&&(m=ln(n.footerBand,Zc,null),h=iv(e,r.colfooters,i,0,o,ln(s,"columnFooter"),zse,1,a,"y2",l-o,1,o,m)),r.rowtitle&&(p=ln(n.titleAnchor,Kc),g=ln(s,"rowTitle"),g=p===d2?d+g:u-g,m=ln(n.titleBand,Kc,.5),Ese(e,r.rowtitle,g,0,v,m)),r.coltitle&&(p=ln(n.titleAnchor,Zc),g=ln(s,"columnTitle"),g=p===d2?h+g:f-g,m=ln(n.titleBand,Zc,.5),Ese(e,r.coltitle,g,1,v,m))}(n,r,e.layout),function F4t(e,t,n){var u,f,d,p,m,r=t.items,i=Math.max(0,t.width||0),a=Math.max(0,t.height||0),s=(new Rn).set(0,0,i,a),o=s.clone(),c=s.clone(),l=[];for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case iD:(C4t(f)?o:c).union(M4t(e,f,i,a));break;case aD:u=f;break;case sD:l.push(L4t(e,f));break;case"frame":case"scope":case ase:case sse:case"row-title":case cse:case lse:case use:o.union(f.bounds),c.union(f.bounds);break;default:s.union(f.bounds)}if(l.length){const g={};l.forEach(v=>{(d=v.orient||Yi)!==oD&&(g[d]||(g[d]=[])).push(v)});for(const v in g){const y=g[v];Sse(e,y,D4t(y,v,n.legends,o,c,i,a))}l.forEach(v=>{const y=v.bounds;if(y.equals(v._bounds)||(v.bounds=v._bounds,e.dirty(v),v.bounds=y,e.dirty(v)),!n.autosize||"fit"!==n.autosize.type&&"fit-x"!==n.autosize.type&&"fit-y"!==n.autosize.type)s.union(y);else switch(v.orient){case Wi:case Yi:s.add(y.x1,0).add(y.x2,0);break;case Q6:case Qc:s.add(0,y.y1).add(0,y.y2)}})}s.union(o).union(c),u&&s.union(function T4t(e,t,n,r,i){var C,a=t.items[0],o=a.orient,c=a.anchor,l=a.offset,u=a.padding,f=a.items[0].items[0],d=a.items[1]&&a.items[1].items[0],h=o===Wi||o===Yi?r:n,p=0,m=0,g=0,v=0,y=0;if(a.frame!==ev?o===Wi?(p=i.y2,h=i.y1):o===Yi?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):o===Wi&&(p=r,h=0),C=c===nD?p:c===d2?h:(p+h)/2,d&&d.text){switch(o){case Q6:case Qc:y=f.bounds.height()+u;break;case Wi:v=f.bounds.width()+u;break;case Yi:v=-f.bounds.width()-u}G1.clear().union(d.bounds),G1.translate(v-(d.x||0),y-(d.y||0)),Z6(d,"x",v)|Z6(d,"y",y)&&(e.dirty(d),d.bounds.clear().union(G1),d.mark.bounds.clear().union(G1),e.dirty(d)),G1.clear().union(d.bounds)}else G1.clear();switch(G1.union(f.bounds),o){case Q6:m=C,g=i.y1-G1.height()-l;break;case Wi:m=i.x1-G1.width()-l,g=C;break;case Yi:m=i.x2+G1.width()+l,g=C;break;case Qc:m=C,g=i.y2+l;break;default:m=a.x,g=a.y}return Z6(a,"x",m)|Z6(a,"y",g)&&(G1.translate(m,g),e.dirty(a),a.bounds.clear().union(G1),t.bounds.clear().union(G1),e.dirty(a)),a.bounds}(e,u,i,a,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),function R4t(e,t,n,r){const i=r.autosize||{},a=i.type;if(e._autosize<1||!a)return;let s=e._width,o=e._height,c=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),u=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-c)),h=Math.max(0,Math.ceil(n.y2-u));if("padding"===i.contains){const p=e.padding();s-=p.left+p.right,o-=p.top+p.bottom}a===oD?(l=0,f=0,c=s,u=o):"fit"===a?(c=Math.max(0,s-l-d),u=Math.max(0,o-f-h)):"fit-x"===a?(c=Math.max(0,s-l-d),o=u+f+h):"fit-y"===a?(s=c+l+d,u=Math.max(0,o-f-h)):"pad"===a&&(s=c+l+d,o=u+f+h),e._resizeView(s,o,c,u,[l,f],i.resize)}(e,t,s,n)}(n,r,e)}),function I4t(e){return e&&"legend-entry"!==e.mark.role}(e.mark.group)?t.reflow():t}}),le(Lse,Y,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,a=e.scale,o=iV(a,null==e.count?e.values?e.values.length:10:e.count,e.minstep),c=e.format||zie(n,a,o,e.formatSpecifier,e.formatType,!!e.values),l=e.values?xie(a,e.values,o):aV(a,o);return i&&(r.rem=i),i=l.map((u,f)=>xt({index:f/(l.length-1||1),value:u,label:c(u)})),e.extra&&i.length&&i.push(xt({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}}),le(Ase,Y,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||O4t,a=e.key||ke,s=this.value;return K(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(a))&&Z("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=function P4t(e){const t=y6().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}(a)),t.visit(t.ADD,o=>{const c=a(o);let l=s.get(c);l?l.exit?(s.empty--,r.add.push(l)):r.mod.push(l):(l=i(o),s.set(c,l),r.add.push(l)),l.datum=o,l.exit=!1}),t.visit(t.MOD,o=>{const c=a(o),l=s.get(c);l&&(l.datum=o,r.mod.push(l))}),t.visit(t.REM,o=>{const c=a(o),l=s.get(c);o===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}}),le(Nse,Y,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,a=t.encode;if(K(a)){if(!n.changed()&&!a.every(f=>i[f]))return t.StopPropagation;a=a[0],n.encode=null}var s="enter"===a,o=i.update||Mc,c=i.enter||Mc,l=i.exit||Mc,u=(a&&!s?i[a]:o)||Mc;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{c(f,e),o(f,e)}),n.modifies(c.output),n.modifies(o.output),u!==Mc&&u!==o&&(t.visit(t.ADD,f=>{u(f,e)}),n.modifies(u.output))),t.changed(t.REM)&&l!==Mc&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),s||u!==Mc){const f=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(f,d=>{const h=c(d,e)||r;(u(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)):t.visit(f,d=>{(u(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)}return n.changed()?n:t.StopPropagation}}),le(kse,Y,{transform(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var d,h,p,m,g,n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,a=e.type||Mg,s=e.scale,o=+e.limit,c=iV(s,null==e.count?5:e.count,e.minstep),u=e.format||Vie(n,s,c,a,e.formatSpecifier,e.formatType,!!e.values||a===Mg),f=e.values||Eie(s,c);return i&&(r.rem=i),a===Mg?(o&&f.length>o?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,o-1),g=!0):i=f,Je(p=e.size)?(!e.values&&0===s(i[0])&&(i=i.slice(1)),m=i.reduce((v,y)=>Math.max(v,p(y,e)),0)):p=P1(m=p||8),i=i.map((v,y)=>xt({index:y,label:u(v,y,i),value:v,offset:m,size:p(v,e)})),g&&i.push(xt({index:i.length,label:`\u2026${f.length-i.length} entries`,value:g=f[i.length],offset:m,size:p(g,e)}))):"gradient"===a?(d=s.domain(),h=bie(s,d[0],lt(d)),f.length<3&&!e.values&&d[0]!==lt(d)&&(f=[d[0],lt(d)]),i=f.map((v,y)=>xt({index:y,label:u(v,y,f),value:v,perc:h(v)}))):(p=f.length-1,h=function zot(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+lt(t),a=i-r;if(e.type===yg){const s=n?a/n:.1;r-=s,i+=s,a=i-r}return s=>(s-r)/a}(s),i=f.map((v,y)=>xt({index:y,label:u(v,y,f),value:v,perc:y?h(v):0,perc2:y===p?1:h(f[y+1])}))),r.source=i,r.add=i,this.value=i,r}});const $4t=e=>e.source.x,B4t=e=>e.source.y,U4t=e=>e.target.x,j4t=e=>e.target.y;function fD(e){Y.call(this,{},e)}fD.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},le(fD,Y,{transform(e,t){var n=e.sourceX||$4t,r=e.sourceY||B4t,i=e.targetX||U4t,a=e.targetY||j4t,s=e.as||"path",c=e.shape||"line",l=Rse.get(c+"-"+(e.orient||"vertical"))||Rse.get(c);return l||Z("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,u=>{u[s]=l(n(u),r(u),i(u),a(u))}),t.reflow(e.modified()).modifies(s)}});const Tse=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,Ise=(e,t,n,r)=>{var i=n-e,a=r-t,s=Math.hypot(i,a)/2;return"M"+e+","+t+"A"+s+","+s+" "+180*Math.atan2(a,i)/Math.PI+" 0 1 "+n+","+r},Fse=(e,t,n,r)=>{const i=n-e,a=r-t,s=.2*(i+a),o=.2*(a-i);return"M"+e+","+t+"C"+(e+s)+","+(t+o)+" "+(n+o)+","+(r-s)+" "+n+","+r},Rse=y6({line:Tse,"line-radial":(e,t,n,r)=>Tse(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),arc:Ise,"arc-radial":(e,t,n,r)=>Ise(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),curve:Fse,"curve-radial":(e,t,n,r)=>Fse(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),"orthogonal-horizontal":(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,"orthogonal-vertical":(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,"orthogonal-radial":(e,t,n,r)=>{const i=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n);return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*s+","+t*o+"L"+r*s+","+r*o},"diagonal-horizontal":(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":(e,t,n,r)=>{const i=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),c=(t+r)/2;return"M"+t*i+","+t*a+"C"+c*i+","+c*a+" "+c*s+","+c*o+" "+r*s+","+r*o}});function dD(e){Y.call(this,null,e)}dD.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},le(dD,Y,{transform(e,t){var p,m,g,n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.startAngle||0,o=null!=e.endAngle?e.endAngle:2*Math.PI,c=t.source,l=c.map(e.field||m6),u=l.length,f=s,d=(o-s)/Dse(l),h=zr(u);for(e.sort&&h.sort((v,y)=>l[v]-l[y]),p=0;p<u;++p)g=l[h[p]],(m=c[h[p]])[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});function Ose(e){return eV(e)&&e!==ts}const X4t=Oi(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Pse(e){Y.call(this,null,e),this.modified(!0)}function $se(e,t,n){return mie(e)&&Math.abs(t.reduce((i,a)=>i+(a<0?-1:a>0?1:0),0))!==t.length&&n.warn("Log scale domain includes zero: "+ue(t)),t}function Bse(e,t,n){return Je(e)&&(t||n)?yie(e,hD(t||[0,1],n)):e}function hD(e,t){return t?e.slice().reverse():e}function Use(e){Y.call(this,null,e)}le(Pse,Y,{transform(e,t){var n=t.dataflow,r=this.value,i=function Q4t(e){var r,t=e.type,n="";return t===ts?ts+"-"+P6:(function Z4t(e){const t=e.type;return eV(t)&&t!==I4&&t!==F4&&(e.scheme||e.range&&e.range.length&&e.range.every(ge))}(e)&&(n=2===(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?ts+"-":3===r?$6+"-":""),(n+t||P6).toLowerCase())}(e);for(i in(!r||i!==r.type)&&(this.value=r=yt(i)()),e)if(!X4t[i]){if("padding"===i&&Ose(r.type))continue;Je(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return function nlt(e,t,n){var r=e.type,i=t.round||!1,a=t.range;if(null!=t.rangeStep)a=function rlt(e,t,n){return"band"!==e&&e!==QE&&Z("Only band and point scales support rangeStep."),[0,t.rangeStep*YE(n,e===QE?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0,(null!=t.paddingOuter?t.paddingOuter:t.padding)||0)]}(r,t,n);else if(t.scheme&&(a=function ilt(e,t,n){var a,r=t.schemeExtent;return K(t.scheme)?a=bg(t.scheme,t.interpolate,t.interpolateGamma):(a=rV(t.scheme.toLowerCase()))||Z(`Unrecognized scheme name: ${t.scheme}`),n=e===yg?n+1:e===ZE?n-1:e===B6||e===vg?+t.schemeCount||5:n,gie(e)?Bse(a,r,t.reverse):Je(a)?Cie(Bse(a,r),n):e===XE?a:a.slice(0,n)}(r,t,n),Je(a))){if(e.interpolator)return e.interpolator(a);Z(`Scale type ${r} does not support interpolating color schemes.`)}if(a&&gie(r))return e.interpolator(bg(hD(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(nV(t.interpolate,t.interpolateGamma)):Je(e.round)?e.round(i):Je(e.rangeRound)&&e.interpolate(i?T5:Ic),a&&e.range(hD(a,t.reverse))}(r,e,function tlt(e,t,n){let r=t.bins;if(r&&!K(r)){const i=e.domain(),a=i[0],s=lt(i),o=r.step;let c=null==r.start?a:r.start,l=null==r.stop?s:r.stop;o||Z("Scale bins parameter missing step property."),c<a&&(c=o*Math.ceil(a/o)),l>s&&(l=o*Math.floor(s/o)),r=zr(c,l+o/2,o)}return r?e.bins=r:e.bins&&delete e.bins,e.type===ZE&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}(r,e,function K4t(e,t,n){const r=function J4t(e,t,n){return t?(e.domain($se(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(r>-1)return r;var o,c,i=t.domain,a=e.type,s=t.zero||void 0===t.zero&&function Y4t(e){const t=e.type;return!e.bins&&(t===P6||t===R5||t===O5)}(e);if(!i)return 0;if(Ose(a)&&t.padding&&i[0]!==lt(i)&&(i=function elt(e,t,n,r,i,a){var s=Math.abs(lt(n)-n[0]),o=s/(s-2*r),c=e===go?vH(t,null,o):e===O5?lm(t,null,o,.5):e===R5?lm(t,null,o,i||1):e===gg?yH(t,null,o,a||1):gH(t,null,o);return(t=t.slice())[0]=c[0],t[t.length-1]=c[1],t}(a,i,t.range,t.padding,t.exponent,t.constant)),(s||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(o=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[o]<0&&(i[o]=0)),null!=t.domainMin&&(i[0]=t.domainMin),null!=t.domainMax&&(i[o]=t.domainMax),null!=t.domainMid)){const l=(c=t.domainMid)>i[o]?o+1:c<i[0]?0:o;l!==o&&n.warn("Scale domainMid exceeds domain min or max.",c),i.splice(l,0,c)}return e.domain($se(a,i,n)),a===XE&&e.unknown(t.domainImplicit?RE:void 0),t.nice&&e.nice&&e.nice(!0!==t.nice&&iV(e,t.nice)||null),i.length}(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),le(Use,Y,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(S4(e.sort)),this.modified(n),t}});const Wse=["y0","y1"];function pD(e){Y.call(this,null,e)}function alt(e,t,n,r,i){for(var c,a=(t-e.sum)/2,s=e.length,o=0;o<s;++o)(c=e[o])[r]=a,c[i]=a+=Math.abs(n(c))}function slt(e,t,n,r,i){for(var u,a=1/e.sum,s=0,o=e.length,c=0,l=0;c<o;++c)(u=e[c])[r]=s,u[i]=s=a*(l+=Math.abs(n(u)))}function olt(e,t,n,r,i){for(var l,u,a=0,s=0,o=e.length,c=0;c<o;++c)(l=+n(u=e[c]))<0?(u[r]=s,u[i]=s+=l):(u[r]=a,u[i]=a+=l)}pD.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:Wse}]},le(pD,Y,{transform(e,t){var c,l,u,f,n=e.as||Wse,r=n[0],i=n[1],a=S4(e.sort),s=e.field||m6,o="center"===e.offset?alt:"normalize"===e.offset?slt:olt;for(c=function clt(e,t,n,r){var s,o,c,l,u,f,d,h,p,i=[],a=m=>m(u);if(null==t)i.push(e.slice());else for(s={},o=0,c=e.length;o<c;++o)u=e[o],(d=s[f=t.map(a)])||(s[f]=d=[],i.push(d)),d.push(u);for(f=0,p=0,l=i.length;f<l;++f){for(o=0,h=0,c=(d=i[f]).length;o<c;++o)h+=Math.abs(r(d[o]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}(t.source,e.groupby,a,s),l=0,u=c.length,f=c.max;l<u;++l)o(c[l],f,s,r,i);return t.reflow(e.modified()).modifies(n)}});const o7=e=>e;function av(e,t){e&&Xse.hasOwnProperty(e.type)&&Xse[e.type](e,t)}var Yse={Feature:function(e,t){av(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)av(n[r].geometry,t)}},Xse={Sphere:function(e,t){t.sphere()},Point:function(e,t){t.point((e=e.coordinates)[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)t.point((e=n[r])[0],e[1],e[2])},LineString:function(e,t){mD(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)mD(n[r],t,0)},Polygon:function(e,t){Qse(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Qse(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)av(n[r],t)}};function mD(e,t,n){var a,r=-1,i=e.length-n;for(t.lineStart();++r<i;)t.point((a=e[r])[0],a[1],a[2]);t.lineEnd()}function Qse(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)mD(e[n],t,1);t.polygonEnd()}function bo(e,t){e&&Yse.hasOwnProperty(e.type)?Yse[e.type](e,t):av(e,t)}class H1{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],s=t+a,o=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);o&&(n[r++]=o),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let r,i,a,n=this._n,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,a=i-(s-r),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(i=2*a,r=s+i,i==r-s&&(s=r))}return s}}var Ie=1e-6,sv=1e-12,it=Math.PI,xn=it/2,ov=it/4,h2=2*it,Ln=180/it,nt=it/180,ut=Math.abs,J6=Math.atan,ci=Math.atan2,Oe=Math.cos,cv=Math.ceil,Zse=Math.exp,gD=(Math,Math.hypot),lv=Math.log,vD=Math.pow,Le=Math.sin,li=Math.sign||function(e){return e>0?1:e<0?-1:0},p2=Math.sqrt,yD=Math.tan;function Kse(e){return e>1?0:e<-1?it:Math.acos(e)}function W2(e){return e>1?xn:e<-1?-xn:Math.asin(e)}function S1(){}var Jse,eoe,MD,_D,CD=new H1,bD=new H1,Jc={point:S1,lineStart:S1,lineEnd:S1,polygonStart:function(){Jc.lineStart=llt,Jc.lineEnd=flt},polygonEnd:function(){Jc.lineStart=Jc.lineEnd=Jc.point=S1,CD.add(ut(bD)),bD=new H1},result:function(){var e=CD/2;return CD=new H1,e}};function llt(){Jc.point=ult}function ult(e,t){Jc.point=toe,Jse=MD=e,eoe=_D=t}function toe(e,t){bD.add(_D*e-MD*t),MD=e,_D=t}function flt(){toe(Jse,eoe)}const noe=Jc;var eu=1/0,uv=eu,c7=-eu,fv=c7,dlt={point:function hlt(e,t){e<eu&&(eu=e),e>c7&&(c7=e),t<uv&&(uv=t),t>fv&&(fv=t)},lineStart:S1,lineEnd:S1,polygonStart:S1,polygonEnd:S1,result:function(){var e=[[eu,uv],[c7,fv]];return c7=fv=-(uv=eu=1/0),e}};const dv=dlt;var roe,ioe,as,ss,wD=0,xD=0,l7=0,hv=0,pv=0,tu=0,zD=0,HD=0,u7=0,Xi={point:q4,lineStart:aoe,lineEnd:soe,polygonStart:function(){Xi.lineStart=glt,Xi.lineEnd=vlt},polygonEnd:function(){Xi.point=q4,Xi.lineStart=aoe,Xi.lineEnd=soe},result:function(){var e=u7?[zD/u7,HD/u7]:tu?[hv/tu,pv/tu]:l7?[wD/l7,xD/l7]:[NaN,NaN];return wD=xD=l7=hv=pv=tu=zD=HD=u7=0,e}};function q4(e,t){wD+=e,xD+=t,++l7}function aoe(){Xi.point=plt}function plt(e,t){Xi.point=mlt,q4(as=e,ss=t)}function mlt(e,t){var n=e-as,r=t-ss,i=p2(n*n+r*r);hv+=i*(as+e)/2,pv+=i*(ss+t)/2,tu+=i,q4(as=e,ss=t)}function soe(){Xi.point=q4}function glt(){Xi.point=ylt}function vlt(){ooe(roe,ioe)}function ylt(e,t){Xi.point=ooe,q4(roe=as=e,ioe=ss=t)}function ooe(e,t){var n=e-as,r=t-ss,i=p2(n*n+r*r);hv+=i*(as+e)/2,pv+=i*(ss+t)/2,tu+=i,zD+=(i=ss*e-as*t)*(as+e),HD+=i*(ss+t),u7+=3*i,q4(as=e,ss=t)}const coe=Xi;function loe(e){this._context=e}loe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,h2)}},result:S1};var ED,uoe,foe,f7,d7,SD=new H1,mv={point:S1,lineStart:function(){mv.point=Clt},lineEnd:function(){ED&&doe(uoe,foe),mv.point=S1},polygonStart:function(){ED=!0},polygonEnd:function(){ED=null},result:function(){var e=+SD;return SD=new H1,e}};function Clt(e,t){mv.point=doe,uoe=f7=e,foe=d7=t}function doe(e,t){SD.add(p2((f7-=e)*f7+(d7-=t)*d7)),f7=e,d7=t}const hoe=mv;let poe,gv,moe,goe;class voe{constructor(t){this._append=null==t?yoe:function blt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return yoe;if(t!==poe){const n=10**t;poe=t,gv=function(i){let a=1;this._+=i[0];for(const s=i.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return gv}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:this._append`M${t},${n}`,this._point=1;break;case 1:this._append`L${t},${n}`;break;default:if(this._append`M${t},${n}`,this._radius!==moe||this._append!==gv){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,moe=r,gv=this._append,goe=this._,this._=i}this._+=goe}}result(){const t=this._;return this._="",t.length?t:null}}function yoe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Coe(e,t){let i,a,n=3,r=4.5;function s(o){return o&&("function"==typeof r&&a.pointRadius(+r.apply(this,arguments)),bo(o,i(a))),a.result()}return s.area=function(o){return bo(o,i(noe)),noe.result()},s.measure=function(o){return bo(o,i(hoe)),hoe.result()},s.bounds=function(o){return bo(o,i(dv)),dv.result()},s.centroid=function(o){return bo(o,i(coe)),coe.result()},s.projection=function(o){return arguments.length?(i=null==o?(e=null,o7):(e=o).stream,s):e},s.context=function(o){return arguments.length?(a=null==o?(t=null,new voe(n)):new loe(t=o),"function"!=typeof r&&a.pointRadius(r),s):t},s.pointRadius=function(o){return arguments.length?(r="function"==typeof o?o:(a.pointRadius(+o),+o),s):r},s.digits=function(o){if(!arguments.length)return n;if(null==o)n=null;else{const c=Math.floor(o);if(!(c>=0))throw new RangeError(`invalid digits: ${o}`);n=c}return null===t&&(a=new voe(n)),s},s.projection(e).digits(n).context(t)}function boe(){var t,e=[];return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:S1,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function vv(e,t){return ut(e[0]-t[0])<Ie&&ut(e[1]-t[1])<Ie}function yv(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Moe(e,t,n,r,i){var o,c,a=[],s=[];if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,y,g=p[0],v=p[m];if(vv(g,v)){if(!g[2]&&!v[2]){for(i.lineStart(),o=0;o<m;++o)i.point((g=p[o])[0],g[1]);return void i.lineEnd()}v[0]+=2*Ie}a.push(y=new yv(g,p,null,!0)),s.push(y.o=new yv(g,null,y,!1)),a.push(y=new yv(v,p,null,!1)),s.push(y.o=new yv(v,null,y,!0))}}),a.length){for(s.sort(t),_oe(a),_oe(s),o=0,c=s.length;o<c;++o)s[o].e=n=!n;for(var u,f,l=a[0];;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(o=0,c=u.length;o<c;++o)i.point((f=u[o])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(o=(u=d.p.z).length-1;o>=0;--o)i.point((f=u[o])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}u=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}}function _oe(e){if(t=e.length){for(var t,i,n=0,r=e[0];++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Cv(e){return[ci(e[1],e[0]),W2(e[2])]}function G4(e){var t=e[0],n=e[1],r=Oe(n);return[r*Oe(t),r*Le(t),Le(n)]}function bv(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function nu(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function VD(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Mv(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function _v(e){var t=p2(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function DD(e){return ut(e[0])<=it?e[0]:li(e[0])*((ut(e[0])+it)%h2-it)}function woe(e){return Array.from(function*_lt(e){for(const t of e)yield*t}(e))}function xoe(e,t,n,r){return function(i){var l,u,f,a=t(i),s=boe(),o=t(s),c=!1,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=C,u=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,u=woe(u);var b=function Mlt(e,t){var n=DD(t),r=t[1],i=Le(r),a=[Le(n),-Oe(n),0],s=0,o=0,c=new H1;1===i?r=xn+Ie:-1===i&&(r=-xn-Ie);for(var l=0,u=e.length;l<u;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=DD(h),m=h[1]/2+ov,g=Le(m),v=Oe(m),y=0;y<d;++y,p=b,g=w,v=_,h=C){var C=f[y],b=DD(C),M=C[1]/2+ov,w=Le(M),_=Oe(M),z=b-p,S=z>=0?1:-1,D=S*z,L=D>it,R=g*w;if(c.add(ci(R*S*Le(D),v*_+R*Oe(D))),s+=L?z+S*h2:z,L^p>=n^b>=n){var N=nu(G4(h),G4(C));_v(N);var x=nu(a,N);_v(x);var H=(L^z>=0?-1:1)*W2(x[2]);(r>H||r===H&&(N[0]||N[1]))&&(o+=L^z>=0?1:-1)}}return(s<-Ie||s<Ie&&c<-sv)^1&o}(l,r);u.length?(c||(i.polygonStart(),c=!0),Moe(u,xlt,b,n,i)):b&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),u=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(b,M){e(b,M)&&i.point(b,M)}function p(b,M){a.point(b,M)}function m(){d.point=p,a.lineStart()}function g(){d.point=h,a.lineEnd()}function v(b,M){f.push([b,M]),o.point(b,M)}function y(){o.lineStart(),f=[]}function C(){v(f[0][0],f[0][1]),o.lineEnd();var w,z,S,D,b=o.clean(),M=s.result(),_=M.length;if(f.pop(),l.push(f),f=null,_){if(1&b){if((z=(S=M[0]).length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),w=0;w<z;++w)i.point((D=S[w])[0],D[1]);i.lineEnd()}return}_>1&&2&b&&M.push(M.pop().concat(M.shift())),u.push(M.filter(wlt))}}return d}}function wlt(e){return e.length>1}function xlt(e,t){return((e=e.x)[0]<0?e[1]-xn-Ie:xn-e[1])-((t=t.x)[0]<0?t[1]-xn-Ie:xn-t[1])}const zoe=xoe(function(){return!0},function zlt(e){var i,t=NaN,n=NaN,r=NaN;return{lineStart:function(){e.lineStart(),i=1},point:function(a,s){var o=a>0?it:-it,c=ut(a-t);ut(c-it)<Ie?(e.point(t,n=(n+s)/2>0?xn:-xn),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(a,n),i=0):r!==o&&c>=it&&(ut(t-r)<Ie&&(t-=r*Ie),ut(a-o)<Ie&&(a-=o*Ie),n=function Hlt(e,t,n,r){var i,a,s=Le(e-n);return ut(s)>Ie?J6((Le(t)*(a=Oe(r))*Le(n)-Le(r)*(i=Oe(t))*Le(e))/(i*a*s)):(t+r)/2}(t,n,a,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(o,n),i=0),e.point(t=a,n=s),r=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}},function Slt(e,t,n,r){var i;if(null==e)r.point(-it,i=n*xn),r.point(0,i),r.point(it,i),r.point(it,0),r.point(it,-i),r.point(0,-i),r.point(-it,-i),r.point(-it,0),r.point(-it,i);else if(ut(e[0]-t[0])>Ie){var a=e[0]<t[0]?it:-it;r.point(-a,i=n*a/2),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])},[-it,-xn]);function Soe(e,t){(t=G4(t))[0]-=e,_v(t);var n=Kse(-t[1]);return((-t[2]<0?-n:n)+h2-Ie)%h2}var h7=1e9,wv=-h7;function Eoe(e,t,n,r){function i(l,u){return e<=l&&l<=n&&t<=u&&u<=r}function a(l,u,f,d){var h=0,p=0;if(null==l||(h=s(l,f))!==(p=s(u,f))||c(l,u)<0^f>0)do{d.point(0===h||3===h?e:n,h>1?r:t)}while((h=(h+f+4)%4)!==p);else d.point(u[0],u[1])}function s(l,u){return ut(l[0]-e)<Ie?u>0?0:3:ut(l[0]-n)<Ie?u>0?2:1:ut(l[1]-t)<Ie?u>0?1:0:u>0?3:2}function o(l,u){return c(l.x,u.x)}function c(l,u){var f=s(l,1),d=s(u,1);return f!==d?f-d:0===f?u[1]-l[1]:1===f?l[0]-u[0]:2===f?l[1]-u[1]:u[0]-l[0]}return function(l){var d,h,p,m,g,v,y,C,b,M,w,u=l,f=boe(),_={point:z,lineStart:function R(){_.point=x,h&&h.push(p=[]),M=!0,b=!1,y=C=NaN},lineEnd:function N(){d&&(x(m,g),v&&b&&f.rejoin(),d.push(f.result())),_.point=z,b&&u.lineEnd()},polygonStart:function D(){u=f,d=[],h=[],w=!0},polygonEnd:function L(){var H=function S(){for(var H=0,V=0,T=h.length;V<T;++V)for(var B,U,E=h[V],k=1,A=E.length,O=E[0],$=O[0],G=O[1];k<A;++k)B=$,U=G,$=(O=E[k])[0],G=O[1],U<=r?G>r&&($-B)*(r-U)>(G-U)*(e-B)&&++H:G<=r&&($-B)*(r-U)<(G-U)*(e-B)&&--H;return H}(),V=w&&H,T=(d=woe(d)).length;(V||T)&&(l.polygonStart(),V&&(l.lineStart(),a(null,null,1,l),l.lineEnd()),T&&Moe(d,o,H,a,l),l.polygonEnd()),u=l,d=h=p=null}};function z(H,V){i(H,V)&&u.point(H,V)}function x(H,V){var T=i(H,V);if(h&&p.push([H,V]),M)m=H,g=V,v=T,M=!1,T&&(u.lineStart(),u.point(H,V));else if(T&&b)u.point(H,V);else{var E=[y=Math.max(wv,Math.min(h7,y)),C=Math.max(wv,Math.min(h7,C))],k=[H=Math.max(wv,Math.min(h7,H)),V=Math.max(wv,Math.min(h7,V))];!function Vlt(e,t,n,r,i,a){var p,s=e[0],o=e[1],u=0,f=1,d=t[0]-s,h=t[1]-o;if(p=n-s,d||!(p>0)){if(p/=d,d<0){if(p<u)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>u&&(u=p)}if(p=i-s,d||!(p<0)){if(p/=d,d<0){if(p>f)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<f&&(f=p)}if(p=r-o,h||!(p>0)){if(p/=h,h<0){if(p<u)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>u&&(u=p)}if(p=a-o,h||!(p<0)){if(p/=h,h<0){if(p>f)return;p>u&&(u=p)}else if(h>0){if(p<u)return;p<f&&(f=p)}return u>0&&(e[0]=s+u*d,e[1]=o+u*h),f<1&&(t[0]=s+f*d,t[1]=o+f*h),!0}}}}}(E,k,e,t,n,r)?T&&(u.lineStart(),u.point(H,V),w=!1):(b||(u.lineStart(),u.point(E[0],E[1])),u.point(k[0],k[1]),T||u.lineEnd(),w=!1)}y=H,C=V,b=T}return _}}function LD(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return(r=t.invert(r,i))&&e.invert(r[0],r[1])}),n}function AD(e,t){return ut(e)>it&&(e-=Math.round(e/h2)*h2),[e,t]}function Voe(e,t,n){return(e%=h2)?t||n?LD(Loe(e),Aoe(t,n)):Loe(e):t||n?Aoe(t,n):AD}function Doe(e){return function(t,n){return ut(t+=e)>it&&(t-=Math.round(t/h2)*h2),[t,n]}}function Loe(e){var t=Doe(e);return t.invert=Doe(-e),t}function Aoe(e,t){var n=Oe(e),r=Le(e),i=Oe(t),a=Le(t);function s(o,c){var l=Oe(c),u=Oe(o)*l,f=Le(o)*l,d=Le(c),h=d*n+u*r;return[ci(f*i-h*a,u*n-d*r),W2(h*i+f*a)]}return s.invert=function(o,c){var l=Oe(c),u=Oe(o)*l,f=Le(o)*l,d=Le(c),h=d*i-f*a;return[ci(f*i+d*a,u*n+h*r),W2(h*n-u*r)]},s}function p7(e){return function(t){var n=new ND;for(var r in e)n[r]=e[r];return n.stream=t,n}}function ND(){}function kD(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),bo(n,e.stream(dv)),t(dv.result()),null!=r&&e.clipExtent(r),e}function xv(e,t,n){return kD(e,function(r){var i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),o=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,c=+t[0][1]+(a-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,c])},n)}function TD(e,t,n){return xv(e,[[0,0],t],n)}function ID(e,t,n){return kD(e,function(r){var i=+t,a=i/(r[1][0]-r[0][0]),s=(i-a*(r[1][0]+r[0][0]))/2,o=-a*r[0][1];e.scale(150*a).translate([s,o])},n)}function FD(e,t,n){return kD(e,function(r){var i=+t,a=i/(r[1][1]-r[0][1]),s=-a*r[0][0],o=(i-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,o])},n)}AD.invert=AD,ND.prototype={constructor:ND,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Noe=16,Llt=Oe(30*nt);function koe(e,t){return+t?function Nlt(e,t){function n(r,i,a,s,o,c,l,u,f,d,h,p,m,g){var v=l-r,y=u-i,C=v*v+y*y;if(C>4*t&&m--){var b=s+d,M=o+h,w=c+p,_=p2(b*b+M*M+w*w),z=W2(w/=_),S=ut(ut(w)-1)<Ie||ut(a-f)<Ie?(a+f)/2:ci(M,b),D=e(S,z),L=D[0],R=D[1],N=L-r,x=R-i,H=y*N-v*x;(H*H/C>t||ut((v*N+y*x)/C-.5)>.3||s*d+o*h+c*p<Llt)&&(n(r,i,a,s,o,c,L,R,S,b/=_,M/=_,w,m,g),g.point(L,R),n(L,R,S,b,M,w,l,u,f,d,h,p,m,g))}}return function(r){var i,a,s,o,c,l,u,f,d,h,p,m,g={point:v,lineStart:y,lineEnd:b,polygonStart:function(){r.polygonStart(),g.lineStart=M},polygonEnd:function(){r.polygonEnd(),g.lineStart=y}};function v(z,S){z=e(z,S),r.point(z[0],z[1])}function y(){f=NaN,g.point=C,r.lineStart()}function C(z,S){var D=G4([z,S]),L=e(z,S);n(f,d,u,h,p,m,f=L[0],d=L[1],u=z,h=D[0],p=D[1],m=D[2],Noe,r),r.point(f,d)}function b(){g.point=v,r.lineEnd()}function M(){y(),g.point=w,g.lineEnd=_}function w(z,S){C(i=z,S),a=f,s=d,o=h,c=p,l=m,g.point=C}function _(){n(f,d,u,h,p,m,a,s,i,o,c,l,Noe,r),g.lineEnd=b,b()}return g}}(e,t):function Alt(e){return p7({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var klt=p7({point:function(e,t){this.stream.point(e*nt,t*nt)}});function Toe(e,t,n,r,i,a){if(!a)return function Ilt(e,t,n,r,i){function a(s,o){return[t+e*(s*=r),n-e*(o*=i)]}return a.invert=function(s,o){return[(s-t)/e*r,(n-o)/e*i]},a}(e,t,n,r,i);var s=Oe(a),o=Le(a),c=s*e,l=o*e,u=s/e,f=o/e,d=(o*n-s*t)/e,h=(o*t+s*n)/e;function p(m,g){return[c*(m*=r)-l*(g*=i)+t,n-l*m-c*g]}return p.invert=function(m,g){return[r*(u*m-f*g+d),i*(h-f*m-u*g)]},p}function os(e){return Ioe(function(){return e})()}function Ioe(e){var t,u,v,y,C,w,_,z,S,D,n=150,r=480,i=250,a=0,s=0,o=0,c=0,l=0,f=0,d=1,h=1,p=null,m=zoe,g=null,b=o7,M=.5;function L(H){return z(H[0]*nt,H[1]*nt)}function R(H){return(H=z.invert(H[0],H[1]))&&[H[0]*Ln,H[1]*Ln]}function N(){var H=Toe(n,0,0,d,h,f).apply(null,t(a,s)),V=Toe(n,r-H[0],i-H[1],d,h,f);return u=Voe(o,c,l),_=LD(t,V),z=LD(u,_),w=koe(_,M),x()}function x(){return S=D=null,L}return L.stream=function(H){return S&&D===H?S:S=klt(function Tlt(e){return p7({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(u)(m(w(b(D=H)))))},L.preclip=function(H){return arguments.length?(m=H,p=void 0,x()):m},L.postclip=function(H){return arguments.length?(b=H,g=v=y=C=null,x()):b},L.clipAngle=function(H){return arguments.length?(m=+H?function Elt(e){var t=Oe(e),n=6*nt,r=t>0,i=ut(t)>Ie;function s(u,f){return Oe(u)*Oe(f)>t}function c(u,f,d){var m=[1,0,0],g=nu(G4(u),G4(f)),v=bv(g,g),y=g[0],C=v-y*y;if(!C)return!d&&u;var b=t*v/C,M=-t*y/C,w=nu(m,g),_=Mv(m,b);VD(_,Mv(g,M));var S=w,D=bv(_,S),L=bv(S,S),R=D*D-L*(bv(_,_)-1);if(!(R<0)){var N=p2(R),x=Mv(S,(-D-N)/L);if(VD(x,_),x=Cv(x),!d)return x;var k,H=u[0],V=f[0],T=u[1],E=f[1];V<H&&(k=H,H=V,V=k);var A=V-H,O=ut(A-it)<Ie;if(!O&&E<T&&(k=T,T=E,E=k),O||A<Ie?O?T+E>0^x[1]<(ut(x[0]-H)<Ie?T:E):T<=x[1]&&x[1]<=E:A>it^(H<=x[0]&&x[0]<=V)){var U=Mv(S,(-D+N)/L);return VD(U,_),[x,Cv(U)]}}}function l(u,f){var d=r?e:it-e,h=0;return u<-d?h|=1:u>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return xoe(s,function o(u){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,v){var C,y=[g,v],b=s(g,v),M=r?b?0:l(g,v):b?l(g+(g<0?it:-it),v):0;if(!f&&(p=h=b)&&u.lineStart(),b!==h&&(!(C=c(f,y))||vv(f,C)||vv(y,C))&&(y[2]=1),b!==h)m=0,b?(u.lineStart(),C=c(y,f),u.point(C[0],C[1])):(C=c(f,y),u.point(C[0],C[1],2),u.lineEnd()),f=C;else if(i&&f&&r^b){var w;!(M&d)&&(w=c(y,f,!0))&&(m=0,r?(u.lineStart(),u.point(w[0][0],w[0][1]),u.point(w[1][0],w[1][1]),u.lineEnd()):(u.point(w[1][0],w[1][1]),u.lineEnd(),u.lineStart(),u.point(w[0][0],w[0][1],3)))}b&&(!f||!vv(f,y))&&u.point(y[0],y[1]),f=y,h=b,d=M},lineEnd:function(){h&&u.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}},function a(u,f,d,h){!function Hoe(e,t,n,r,i,a){if(n){var s=Oe(t),o=Le(t),c=r*n;null==i?(i=t+r*h2,a=t-c/2):(i=Soe(s,i),a=Soe(s,a),(r>0?i<a:i>a)&&(i+=r*h2));for(var l,u=i;r>0?u>a:u<a;u-=c)l=Cv([s,-o*Oe(u),-o*Le(u)]),e.point(l[0],l[1])}}(h,e,n,d,u,f)},r?[0,-e]:[-it,e-it])}(p=H*nt):(p=null,zoe),x()):p*Ln},L.clipExtent=function(H){return arguments.length?(b=null==H?(g=v=y=C=null,o7):Eoe(g=+H[0][0],v=+H[0][1],y=+H[1][0],C=+H[1][1]),x()):null==g?null:[[g,v],[y,C]]},L.scale=function(H){return arguments.length?(n=+H,N()):n},L.translate=function(H){return arguments.length?(r=+H[0],i=+H[1],N()):[r,i]},L.center=function(H){return arguments.length?(a=H[0]%360*nt,s=H[1]%360*nt,N()):[a*Ln,s*Ln]},L.rotate=function(H){return arguments.length?(o=H[0]%360*nt,c=H[1]%360*nt,l=H.length>2?H[2]%360*nt:0,N()):[o*Ln,c*Ln,l*Ln]},L.angle=function(H){return arguments.length?(f=H%360*nt,N()):f*Ln},L.reflectX=function(H){return arguments.length?(d=H?-1:1,N()):d<0},L.reflectY=function(H){return arguments.length?(h=H?-1:1,N()):h<0},L.precision=function(H){return arguments.length?(w=koe(_,M=H*H),x()):p2(M)},L.fitExtent=function(H,V){return xv(L,H,V)},L.fitSize=function(H,V){return TD(L,H,V)},L.fitWidth=function(H,V){return ID(L,H,V)},L.fitHeight=function(H,V){return FD(L,H,V)},function(){return t=e.apply(this,arguments),L.invert=t.invert&&R,N()}}function RD(e){var t=0,n=it/3,r=Ioe(e),i=r(t,n);return i.parallels=function(a){return arguments.length?r(t=a[0]*nt,n=a[1]*nt):[t*Ln,n*Ln]},i}function Rlt(e,t){var n=Le(e),r=(n+Le(t))/2;if(ut(r)<Ie)return function Flt(e){var t=Oe(e);function n(r,i){return[r*t,Le(i)/t]}return n.invert=function(r,i){return[r/t,W2(i*t)]},n}(e);var i=1+n*(2*r-n),a=p2(i)/r;function s(o,c){var l=p2(i-2*r*Le(c))/r;return[l*Le(o*=r),a-l*Oe(o)]}return s.invert=function(o,c){var l=a-c,u=ci(o,ut(l))*li(l);return l*r<0&&(u-=it*li(o)*li(l)),[u/r,W2((i-(o*o+l*l)*r*r)/(2*r))]},s}function zv(){return RD(Rlt).scale(155.424).center([0,33.6442])}function Foe(){return zv().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Roe(e){return function(t,n){var r=Oe(t),i=Oe(n),a=e(r*i);return a===1/0?[2,0]:[a*i*Le(t),a*Le(n)]}}function m7(e){return function(t,n){var r=p2(t*t+n*n),i=e(r),a=Le(i),s=Oe(i);return[ci(t*a,r*s),W2(r&&n*a/r)]}}var Ooe=Roe(function(e){return p2(2/(1+e))});Ooe.invert=m7(function(e){return 2*W2(e/2)});var Poe=Roe(function(e){return(e=Kse(e))&&e/Le(e)});function Hv(e,t){return[e,lv(yD((xn+t)/2))]}function $oe(e){var o,c,l,t=os(e),n=t.center,r=t.scale,i=t.translate,a=t.clipExtent,s=null;function u(){var f=it*r(),d=t(function Dlt(e){function t(n){return(n=e(n[0]*nt,n[1]*nt))[0]*=Ln,n[1]*=Ln,n}return e=Voe(e[0]*nt,e[1]*nt,e.length>2?e[2]*nt:0),t.invert=function(n){return(n=e.invert(n[0]*nt,n[1]*nt))[0]*=Ln,n[1]*=Ln,n},t}(t.rotate()).invert([0,0]));return a(null==s?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===Hv?[[Math.max(d[0]-f,s),o],[Math.min(d[0]+f,c),l]]:[[s,Math.max(d[1]-f,o)],[c,Math.min(d[1]+f,l)]])}return t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(null==f?s=o=c=l=null:(s=+f[0][0],o=+f[0][1],c=+f[1][0],l=+f[1][1]),u()):null==s?null:[[s,o],[c,l]]},u()}function Sv(e){return yD((xn+e)/2)}function jlt(e,t){var n=Oe(e),r=e===t?Le(e):lv(n/Oe(t))/lv(Sv(t)/Sv(e)),i=n*vD(Sv(e),r)/r;if(!r)return Hv;function a(s,o){i>0?o<-xn+Ie&&(o=-xn+Ie):o>xn-Ie&&(o=xn-Ie);var c=i/vD(Sv(o),r);return[c*Le(r*s),i-c*Oe(r*s)]}return a.invert=function(s,o){var c=i-o,l=li(r)*p2(s*s+c*c),u=ci(s,ut(c))*li(c);return c*r<0&&(u-=it*li(s)*li(c)),[u/r,2*J6(vD(i/l,1/r))-xn]},a}function Ev(e,t){return[e,t]}function Wlt(e,t){var n=Oe(e),r=e===t?Le(e):(n-Oe(t))/(t-e),i=n/r+e;if(ut(r)<Ie)return Ev;function a(s,o){var c=i-o,l=r*s;return[c*Le(l),i-c*Oe(l)]}return a.invert=function(s,o){var c=i-o,l=ci(s,ut(c))*li(c);return c*r<0&&(l-=it*li(s)*li(c)),[l/r,i-li(r)*p2(s*s+c*c)]},a}Poe.invert=m7(function(e){return e}),Hv.invert=function(e,t){return[e,2*J6(Zse(t))-xn]},Ev.invert=Ev;var g7=1.340264,v7=-.081106,y7=893e-6,C7=.003796,Vv=p2(3)/2;function Boe(e,t){var n=W2(Vv*Le(t)),r=n*n,i=r*r*r;return[e*Oe(n)/(Vv*(g7+3*v7*r+i*(7*y7+9*C7*r))),n*(g7+v7*r+i*(y7+C7*r))]}function Uoe(e,t){var n=Oe(t),r=Oe(e)*n;return[n*Le(e)/r,Le(t)/r]}function joe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function qoe(e,t){return[Oe(t)*Le(e),Le(t)]}function Goe(e,t){var n=Oe(t),r=1+Oe(e)*n;return[n*Le(e)/r,Le(t)/r]}function Woe(e,t){return[lv(yD((xn+t)/2)),-e]}Boe.invert=function(e,t){for(var s,n=t,r=n*n,i=r*r*r,a=0;a<12&&(i=(r=(n-=s=(n*(g7+v7*r+i*(y7+C7*r))-t)/(g7+3*v7*r+i*(7*y7+9*C7*r)))*n)*r*r,!(ut(s)<sv));++a);return[Vv*e*(g7+3*v7*r+i*(7*y7+9*C7*r))/Oe(n),W2(Le(n)/Vv)]},Uoe.invert=m7(J6),joe.invert=function(e,t){var i,n=t,r=25;do{var a=n*n,s=a*a;n-=i=(n*(1.007226+a*(.015085+s*(.028874*a-.044475-.005916*s)))-t)/(1.007226+a*(.045255+s*(.259866*a-.311325-.005916*11*s)))}while(ut(i)>Ie&&--r>0);return[e/(.8707+(a=n*n)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),n]},qoe.invert=m7(W2),Goe.invert=m7(function(e){return 2*J6(e)}),Woe.invert=function(e,t){return[-t,2*J6(Zse(e))-xn]};var r0t=Math.abs,OD=(Math,Math,Math,Math.cos),Dv=(Math,Math,Math,Math,Math,Math,Math,Math,Math.sin),i0t=(Math,1e-6),e3=Math.PI,PD=e3/2,Xoe=(Math,Lv(2));function Qoe(e){return e>1?PD:e<-1?-PD:Math.asin(e)}function Lv(e){return e>0?Math.sqrt(e):0}function a0t(e,t){var i,n=e*Dv(t),r=30;do{t-=i=(t+Dv(t)-n)/(1+OD(t))}while(r0t(i)>i0t&&--r>0);return t/2}Lv(e3);var o0t=function s0t(e,t,n){function r(i,a){return[e*i*OD(a=a0t(n,a)),t*Dv(a)]}return r.invert=function(i,a){return a=Qoe(a/t),[i/(e*OD(a)),Qoe((2*a+Dv(2*a))/n)]},r}(Xoe/PD,Xoe,e3);const l0t=Coe(),$D=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function BD(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Av[e]=function u0t(e,t){return function n(){const r=t();return r.type=e,r.path=Coe().projection(r),r.copy=r.copy||function(){const i=n();return $D.forEach(a=>{r[a]&&i[a](r[a]())}),i.path.pointRadius(r.path.pointRadius()),i},hie(r)}}(e,t),this):Av[e]||null}function Zoe(e){return e&&e.path||l0t}const Av={albers:Foe,albersusa:function Plt(){var e,t,r,a,o,c,n=Foe(),i=zv().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=zv().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(d,h){c=[d,h]}};function u(d){var h=d[0],p=d[1];return c=null,r.point(h,p),c||(a.point(h,p),c)||(o.point(h,p),c)}function f(){return e=t=null,u}return u.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?s:n).invert(d)},u.stream=function(d){return e&&t===d?e:e=function Olt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}([n.stream(t=d),i.stream(d),s.stream(d)])},u.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),f()):n.precision()},u.scale=function(d){return arguments.length?(n.scale(d),i.scale(.35*d),s.scale(d),u.translate(n.translate())):n.scale()},u.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),a=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Ie,m+.12*h+Ie],[p-.214*h-Ie,m+.234*h-Ie]]).stream(l),o=s.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Ie,m+.166*h+Ie],[p-.115*h-Ie,m+.234*h-Ie]]).stream(l),f()},u.fitExtent=function(d,h){return xv(u,d,h)},u.fitSize=function(d,h){return TD(u,d,h)},u.fitWidth=function(d,h){return ID(u,d,h)},u.fitHeight=function(d,h){return FD(u,d,h)},u.scale(1070)},azimuthalequalarea:function $lt(){return os(Ooe).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function Blt(){return os(Poe).scale(79.4188).clipAngle(179.999)},conicconformal:function qlt(){return RD(jlt).scale(109.5).parallels([30,30])},conicequalarea:zv,conicequidistant:function Ylt(){return RD(Wlt).scale(131.154).center([0,13.9389])},equalEarth:function Qlt(){return os(Boe).scale(177.158)},equirectangular:function Glt(){return os(Ev).scale(152.63)},gnomonic:function Zlt(){return os(Uoe).scale(144.049).clipAngle(60)},identity:function Klt(){var s,o,l,u,f,g,v,e=1,t=0,n=0,r=1,i=1,a=0,c=null,d=1,h=1,p=p7({point:function(b,M){var w=C([b,M]);this.stream.point(w[0],w[1])}}),m=o7;function y(){return d=e*r,h=e*i,g=v=null,C}function C(b){var M=b[0]*d,w=b[1]*h;if(a){var _=w*s-M*o;M=M*s+w*o,w=_}return[M+t,w+n]}return C.invert=function(b){var M=b[0]-t,w=b[1]-n;if(a){var _=w*s+M*o;M=M*s-w*o,w=_}return[M/d,w/h]},C.stream=function(b){return g&&v===b?g:g=p(m(v=b))},C.postclip=function(b){return arguments.length?(m=b,c=l=u=f=null,y()):m},C.clipExtent=function(b){return arguments.length?(m=null==b?(c=l=u=f=null,o7):Eoe(c=+b[0][0],l=+b[0][1],u=+b[1][0],f=+b[1][1]),y()):null==c?null:[[c,l],[u,f]]},C.scale=function(b){return arguments.length?(e=+b,y()):e},C.translate=function(b){return arguments.length?(t=+b[0],n=+b[1],y()):[t,n]},C.angle=function(b){return arguments.length?(o=Le(a=b%360*nt),s=Oe(a),y()):a*Ln},C.reflectX=function(b){return arguments.length?(r=b?-1:1,y()):r<0},C.reflectY=function(b){return arguments.length?(i=b?-1:1,y()):i<0},C.fitExtent=function(b,M){return xv(C,b,M)},C.fitSize=function(b,M){return TD(C,b,M)},C.fitWidth=function(b,M){return ID(C,b,M)},C.fitHeight=function(b,M){return FD(C,b,M)},C},mercator:function Ult(){return $oe(Hv).scale(961/h2)},mollweide:function c0t(){return os(o0t).scale(169.529)},naturalEarth1:function Jlt(){return os(joe).scale(175.295)},orthographic:function e0t(){return os(qoe).scale(249.5).clipAngle(90+Ie)},stereographic:function t0t(){return os(Goe).scale(250).clipAngle(142)},transversemercator:function n0t(){var e=$oe(Woe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):[(r=t())[1],-r[0]]},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):[(r=n())[0],r[1],r[2]-90]},n([0,0,90]).scale(159.155)}};for(const e in Av)BD(e,Av[e]);function Koe(e,t,n){var r=zr(e,t-Ie,n).concat(t);return function(i){return r.map(function(a){return[i,a]})}}function Joe(e,t,n){var r=zr(e,t-Ie,n).concat(t);return function(i){return r.map(function(a){return[a,i]})}}function f0t(){}const Mo=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function tce(){var e=1,t=1,n=o;function r(c,l){return l.map(u=>i(c,u))}function i(c,l){var u=[],f=[];return function a(c,l,u){var h,p,g,v,y,f=new Array,d=new Array;for(h=p=-1,Mo[(g=c[0]>=l)<<1].forEach(C);++h<e-1;)Mo[g|(g=c[h+1]>=l)<<1].forEach(C);for(Mo[g<<0].forEach(C);++p<t-1;){for(h=-1,Mo[(g=c[p*e+e]>=l)<<1|(v=c[p*e]>=l)<<2].forEach(C);++h<e-1;)y=v,Mo[g|(g=c[p*e+e+h+1]>=l)<<1|(v=c[p*e+h+1]>=l)<<2|y<<3].forEach(C);Mo[g|v<<3].forEach(C)}for(h=-1,Mo[(v=c[p*e]>=l)<<2].forEach(C);++h<e-1;)y=v,Mo[(v=c[p*e+h+1]>=l)<<2|y<<3].forEach(C);function C(b){var S,D,M=[b[0][0]+h,b[0][1]+p],w=[b[1][0]+h,b[1][1]+p],_=s(M),z=s(w);(S=d[_])?(D=f[z])?(delete d[S.end],delete f[D.start],S===D?(S.ring.push(w),u(S.ring)):f[S.start]=d[D.end]={start:S.start,end:D.end,ring:S.ring.concat(D.ring)}):(delete d[S.end],S.ring.push(w),d[S.end=z]=S):(S=f[z])?(D=d[_])?(delete f[S.start],delete d[D.end],S===D?(S.ring.push(w),u(S.ring)):f[D.start]=d[S.end]={start:D.start,end:S.end,ring:D.ring.concat(S.ring)}):(delete f[S.start],S.ring.unshift(M),f[S.start=_]=S):f[_]=d[z]={start:_,end:z,ring:[M,w]}}Mo[v<<3].forEach(C)}(c,l,d=>{n(d,c,l),function d0t(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(d)>0?u.push([d]):f.push(d)}),f.forEach(d=>{for(var m,h=0,p=u.length;h<p;++h)if(-1!==h0t((m=u[h])[0],d))return void m.push(d)}),{type:"MultiPolygon",value:l,coordinates:u}}function s(c){return 2*c[0]+c[1]*(e+1)*4}function o(c,l,u){c.forEach(f=>{var g,d=f[0],h=f[1],p=0|d,m=0|h,v=l[m*e+p];d>0&&d<e&&p===d&&(f[0]=d+(u-(g=l[m*e+p-1]))/(v-g)-.5),h>0&&h<t&&m===h&&(f[1]=h+(u-(g=l[(m-1)*e+p]))/(v-g)-.5)})}return r.contour=i,r.size=function(c){if(!arguments.length)return[e,t];var l=Math.floor(c[0]),u=Math.floor(c[1]);return l>=0&&u>=0||Z("invalid size"),e=l,t=u,r},r.smooth=function(c){return arguments.length?(n=c?o:f0t,r):n===o},r}function h0t(e,t){for(var i,n=-1,r=t.length;++n<r;)if(i=p0t(e,t[n]))return i;return 0}function p0t(e,t){for(var n=t[0],r=t[1],i=-1,a=0,s=e.length,o=s-1;a<s;o=a++){var c=e[a],l=c[0],u=c[1],f=e[o],d=f[0],h=f[1];if(m0t(c,f,t))return 0;u>r!=h>r&&n<(d-l)*(r-u)/(h-u)+l&&(i=-i)}return i}function m0t(e,t,n){var r;return function g0t(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&function v0t(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}(e[r=+(e[0]===t[0])],n[r],t[r])}function nce(e,t,n){return function(r){var i=Wa(r),a=n?Math.min(i[0],0):i[0],s=i[1],o=s-a,c=t?zc(a,s,e):o/(e+1);return zr(a+c,s,c)}}function UD(e){Y.call(this,null,e)}function rce(e,t,n,r,i){const a=e.x1||0,s=e.y1||0,o=t*n<0;function c(f){f.forEach(l)}function l(f){o&&f.reverse(),f.forEach(u)}function u(f){f[0]=(f[0]-a)*t+r,f[1]=(f[1]-s)*n+i}return function(f){return f.coordinates.forEach(c),f}}function ice(e,t,n){const r=e>=0?e:bS(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function jD(e){return Je(e)?e:P1(+e)}function ace(){var e=c=>c[0],t=c=>c[1],n=m6,r=[-1,-1],i=960,a=500,s=2;function o(c,l){const u=ice(r[0],c,e)>>s,f=ice(r[1],c,t)>>s,d=u?u+2:0,h=f?f+2:0,p=2*d+(i>>s),m=2*h+(a>>s),g=new Float32Array(p*m),v=new Float32Array(p*m);let y=g;c.forEach(b=>{const M=d+(+e(b)>>s),w=h+(+t(b)>>s);M>=0&&M<p&&w>=0&&w<m&&(g[M+w*p]+=+n(b))}),u>0&&f>0?(ru(p,m,g,v,u),iu(p,m,v,g,f),ru(p,m,g,v,u),iu(p,m,v,g,f),ru(p,m,g,v,u),iu(p,m,v,g,f)):u>0?(ru(p,m,g,v,u),ru(p,m,v,g,u),ru(p,m,g,v,u),y=v):f>0&&(iu(p,m,g,v,f),iu(p,m,v,g,f),iu(p,m,g,v,f),y=v);const C=l?Math.pow(2,-2*s):1/Dse(y);for(let b=0,M=p*m;b<M;++b)y[b]*=C;return{values:y,scale:1<<s,width:p,height:m,x1:d,y1:h,x2:d+(i>>s),y2:h+(a>>s)}}return o.x=function(c){return arguments.length?(e=jD(c),o):e},o.y=function(c){return arguments.length?(t=jD(c),o):t},o.weight=function(c){return arguments.length?(n=jD(c),o):n},o.size=function(c){if(!arguments.length)return[i,a];var l=+c[0],u=+c[1];return l>=0&&u>=0||Z("invalid size"),i=l,a=u,o},o.cellSize=function(c){return arguments.length?((c=+c)>=1||Z("invalid cell size"),s=Math.floor(Math.log(c)/Math.LN2),o):1<<s},o.bandwidth=function(c){return arguments.length?(1===(c=me(c)).length&&(c=[+c[0],+c[0]]),2!==c.length&&Z("invalid bandwidth"),r=c,o):r},o}function ru(e,t,n,r,i){const a=1+(i<<1);for(let s=0;s<t;++s)for(let o=0,c=0;o<e+i;++o)o<e&&(c+=n[o+s*e]),o>=i&&(o>=a&&(c-=n[o-a+s*e]),r[o-i+s*e]=c/Math.min(o+1,e-1+a-o,a))}function iu(e,t,n,r,i){const a=1+(i<<1);for(let s=0;s<e;++s)for(let o=0,c=0;o<t+i;++o)o<t&&(c+=n[s+o*e]),o>=i&&(o>=a&&(c-=n[s+(o-a)*e]),r[s+(o-i)*e]=c/Math.min(o+1,t-1+a-o,a))}function qD(e){Y.call(this,null,e)}UD.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},le(UD,Y,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||R1,a=tce().smooth(!1!==e.smooth),s=e.thresholds||function y0t(e,t,n){const r=nce(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(e.map(i=>V4(t(i).values)))}(r,i,e),o=null===e.as?null:e.as||"contour",c=[];return r.forEach(l=>{const u=i(l),f=a.size([u.width,u.height])(u.values,K(s)?s:s(u.values));(function C0t(e,t,n,r){let i=r.scale||t.scale,a=r.translate||t.translate;if(Je(i)&&(i=i(n,r)),Je(a)&&(a=a(n,r)),(1===i||null==i)&&!a)return;const s=(mt(i)?i:i[0])||1,o=(mt(i)?i:i[1])||1;e.forEach(rce(t,s,o,a&&a[0]||0,a&&a[1]||0))})(f,u,l,e),f.forEach(d=>{c.push(Dm(l,xt(null!=o?{[o]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}}),qD.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const b0t=["x","y","weight","size","cellSize","bandwidth"];function sce(e,t){return b0t.forEach(n=>null!=t[n]?e[n](t[n]):0),e}function GD(e){Y.call(this,null,e)}le(qD,Y,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var c,n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=function M0t(e,t){var i,a,s,o,c,l,n=[],r=u=>u(o);if(null==t)n.push(e);else for(i={},a=0,s=e.length;a<s;++a)o=e[a],(l=i[c=t.map(r)])||(i[c]=l=[],l.dims=c,n.push(l)),l.push(o);return n}(t.materialize(t.SOURCE).source,e.groupby),a=(e.groupby||[]).map(wn),s=sce(ace(),e),o=e.as||"grid";return c=i.map(u=>xt(function l(u,f){for(let d=0;d<a.length;++d)u[a[d]]=f[d];return u}({[o]:s(u,e.counts)},u.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}}),GD.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},le(GD,Y,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var o,c,n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=tce().smooth(!1!==e.smooth),i=e.values,a=e.thresholds||nce(e.count||10,e.nice,!!i),s=e.size;return i||(i=t.materialize(t.SOURCE).source,c=rce(o=sce(ace(),e)(i,!0),o.scale||1,o.scale||1,0,0),s=[o.width,o.height],i=o.values),a=K(a)?a:a(i),i=r.size(s)(i,a),c&&i.forEach(c),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(xt),n}});const WD="Feature",YD="FeatureCollection";function XD(e){Y.call(this,null,e)}function QD(e){Y.call(this,null,e)}function ZD(e){Y.call(this,null,e)}function KD(e){Y.call(this,null,e)}function JD(e){Y.call(this,[],e),this.generator=function ece(){var e,t,n,r,i,a,s,o,d,h,p,m,c=10,l=c,u=90,f=360,g=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return zr(cv(r/u)*u,n,u).map(p).concat(zr(cv(o/f)*f,s,f).map(m)).concat(zr(cv(t/c)*c,e,c).filter(function(C){return ut(C%u)>Ie}).map(d)).concat(zr(cv(a/l)*l,i,l).filter(function(C){return ut(C%f)>Ie}).map(h))}return v.lines=function(){return y().map(function(C){return{type:"LineString",coordinates:C}})},v.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(s).slice(1),p(n).reverse().slice(1),m(o).reverse().slice(1))]}},v.extent=function(C){return arguments.length?v.extentMajor(C).extentMinor(C):v.extentMinor()},v.extentMajor=function(C){return arguments.length?(o=+C[0][1],s=+C[1][1],(r=+C[0][0])>(n=+C[1][0])&&(C=r,r=n,n=C),o>s&&(C=o,o=s,s=C),v.precision(g)):[[r,o],[n,s]]},v.extentMinor=function(C){return arguments.length?(a=+C[0][1],i=+C[1][1],(t=+C[0][0])>(e=+C[1][0])&&(C=t,t=e,e=C),a>i&&(C=a,a=i,i=C),v.precision(g)):[[t,a],[e,i]]},v.step=function(C){return arguments.length?v.stepMajor(C).stepMinor(C):v.stepMinor()},v.stepMajor=function(C){return arguments.length?(u=+C[0],f=+C[1],v):[u,f]},v.stepMinor=function(C){return arguments.length?(c=+C[0],l=+C[1],v):[c,l]},v.precision=function(C){return arguments.length?(g=+C,d=Koe(a,i,90),h=Joe(t,e,g),p=Koe(o,s,90),m=Joe(r,n,g),v):g},v.extentMajor([[-180,-90+Ie],[180,90-Ie]]).extentMinor([[-180,-80-Ie],[180,80+Ie]])}()}function eL(e){Y.call(this,null,e)}function oce(e){if(!Je(e))return!1;const t=Oi(F1(e));return t.$x||t.$y||t.$value||t.$max}function cce(e){Y.call(this,null,e),this.modified(!0)}function lce(e,t,n){Je(e[t])&&e[t](n)}function uce(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,f,d,h,p,m,g,v,y,a=e._root,s={data:r},o=e._x0,c=e._y0,l=e._x1,u=e._y1;if(!a)return e._root=s,e;for(;a.length;)if((m=t>=(f=(o+l)/2))?o=f:l=f,(g=n>=(d=(c+u)/2))?c=d:u=d,i=a,!(a=a[v=g<<1|m]))return i[v]=s,e;if(h=+e._x.call(null,a.data),p=+e._y.call(null,a.data),t===h&&n===p)return s.next=a,i?i[v]=s:e._root=s,e;do{i=i?i[v]=new Array(4):e._root=new Array(4),(m=t>=(f=(o+l)/2))?o=f:l=f,(g=n>=(d=(c+u)/2))?c=d:u=d}while((v=g<<1|m)==(y=(p>=d)<<1|h>=f));return i[y]=a,i[v]=s,e}function m2(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function q0t(e){return e[0]}function W0t(e){return e[1]}function tL(e,t,n){var r=new nL(t??q0t,n??W0t,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function nL(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function fce(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}XD.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},le(XD,Y,{transform(e,t){var l,n=this._features,r=this._points,i=e.fields,a=i&&i[0],s=i&&i[1],o=e.geojson||!i&&R1,c=t.ADD;l=e.modified()||t.changed(t.REM)||t.modified(F1(o))||a&&t.modified(F1(a))||s&&t.modified(F1(s)),(!this.value||l)&&(c=t.SOURCE,this._features=n=[],this._points=r=[]),o&&t.visit(c,u=>n.push(o(u))),a&&s&&(t.visit(c,u=>{var f=a(u),d=s(u);null!=f&&null!=d&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:WD,geometry:{type:"MultiPoint",coordinates:r}})),this.value={type:YD,features:n}}}),QD.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},le(QD,Y,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||R1,a=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=Zoe(e.projection),n.materialize().reflow()):s=i===R1||t.modified(i.fields)?n.ADD_MOD:n.ADD;const o=function w0t(e,t){const n=e.pointRadius();return e.context(null),null!=t&&e.pointRadius(t),n}(r,e.pointRadius);return n.visit(s,c=>c[a]=r(i(c))),r.pointRadius(o),n.modifies(a)}}),ZD.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},le(ZD,Y,{transform(e,t){var c,n=e.projection,r=e.fields[0],i=e.fields[1],a=e.as||["x","y"],s=a[0],o=a[1];function l(u){const f=n([r(u),i(u)]);f?(u[s]=f[0],u[o]=f[1]):(u[s]=void 0,u[o]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(c=t.modified(r.fields)||t.modified(i.fields),t.visit(c?t.ADD_MOD:t.ADD,l)),t.modifies(a)}}),KD.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},le(KD,Y,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",a=n.ADD;return(!r||e.modified())&&(this.value=r=function x0t(e,t,n){const r=null==n?i=>e(t(i)):i=>{var a=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(a),s};return r.context=i=>(e.context(i),r),r}(Zoe(e.projection),e.field||Kr("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,s=>s[i]=r),n.modifies(i)}}),JD.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},le(JD,Y,{transform(e,t){var i,n=this.value,r=this.generator;if(!n.length||e.modified())for(const a in e)Je(r[a])&&r[a](e[a]);return i=r(),n.length?t.mod.push(v1e(n[0],i)):t.add.push(xt(i)),n[0]=i,t}}),eL.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},le(eL,Y,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r="shared"===e.resolve,i=e.field||R1,a=function H0t(e,t){let n;return Je(e)?(n=r=>e(r,t),n.dep=oce(e)):e?n=P1(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}(e.opacity,e),s=function z0t(e,t){let n;return Je(e)?(n=r=>Tc(e(r,t)),n.dep=oce(e)):n=P1(Tc(e||"#888")),n}(e.color,e),o=e.as||"image",c={$x:0,$y:0,$value:0,$max:r?V4(n.map(l=>V4(i(l).values))):0};return n.forEach(l=>{const u=i(l),f=et({},l,c);r||(f.$max=V4(u.values||[])),l[o]=function S0t(e,t,n,r){const i=e.width,s=e.x1||0,o=e.y1||0,c=e.x2||i,l=e.y2||e.height,u=e.values,f=u?g=>u[g]:bc,d=Nc(c-s,l-o),h=d.getContext("2d"),p=h.getImageData(0,0,c-s,l-o),m=p.data;for(let g=o,v=0;g<l;++g){t.$y=g-o;for(let y=s,C=g*i;y<c;++y,v+=4){t.$x=y-s,t.$value=f(y+C);const b=n(t);m[v+0]=b.r,m[v+1]=b.g,m[v+2]=b.b,m[v+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}(u,f,s.dep?s:P1(s(f)),a.dep?a:P1(a(f)))}),t.reflow(!0).modifies(o)}}),le(cce,Y,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=function V0t(e){const t=BD((e||"mercator").toLowerCase());return t||Z("Unrecognized projection type: "+e),t()}(e.type),$D.forEach(r=>{null!=e[r]&&lce(n,r,e[r])})):$D.forEach(r=>{e.modified(r)&&lce(n,r,e[r])}),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function E0t(e,t){const n=function D0t(e){return 1===(e=me(e)).length?e[0]:{type:YD,features:e.reduce((t,n)=>t.concat(function L0t(e){return e.type===YD?e.features:me(e).filter(t=>null!=t).map(t=>t.type===WD?t:{type:WD,geometry:t})}(n)),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});var g2=tL.prototype=nL.prototype;function v2(e){return function(){return e}}function t3(e){return 1e-6*(e()-.5)}function X0t(e){return e.x+e.vx}function Q0t(e){return e.y+e.vy}g2.copy=function(){var n,r,e=new nL(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root;if(!t)return e;if(!t.length)return e._root=fce(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=fce(r));return e},g2.add=function N0t(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return uce(this.cover(t,n),t,n,e)},g2.addAll=function k0t(e){var t,n,i,a,r=e.length,s=new Array(r),o=new Array(r),c=1/0,l=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=i,o[n]=a,i<c&&(c=i),i>u&&(u=i),a<l&&(l=a),a>f&&(f=a));if(c>u||l>f)return this;for(this.cover(c,l).cover(u,f),n=0;n<r;++n)uce(this,s[n],o[n],e[n]);return this},g2.cover=function T0t(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{for(var c,l,s=i-n||1,o=this._root;n>e||e>=i||r>t||t>=a;)switch(l=(t<r)<<1|e<n,c=new Array(4),c[l]=o,o=c,s*=2,l){case 0:i=n+s,a=r+s;break;case 1:n=i-s,a=r+s;break;case 2:i=n+s,r=a-s;break;case 3:n=i-s,r=a-s}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},g2.data=function I0t(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e},g2.extent=function F0t(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},g2.find=function R0t(e,t,n){var r,s,o,c,l,p,m,i=this._x0,a=this._y0,u=this._x1,f=this._y1,d=[],h=this._root;for(h&&d.push(new m2(h,i,a,u,f)),null==n?n=1/0:(i=e-n,a=t-n,u=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(s=p.x0)>u||(o=p.y0)>f||(c=p.x1)<i||(l=p.y1)<a))if(h.length){var g=(s+c)/2,v=(o+l)/2;d.push(new m2(h[3],g,v,c,l),new m2(h[2],s,v,g,l),new m2(h[1],g,o,c,v),new m2(h[0],s,o,g,v)),(m=(t>=v)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var y=e-+this._x.call(null,h.data),C=t-+this._y.call(null,h.data),b=y*y+C*C;if(b<n){var M=Math.sqrt(n=b);i=e-M,a=t-M,u=e+M,f=t+M,r=h.data}}return r},g2.remove=function O0t(e){if(isNaN(u=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,r,i,a,u,f,d,h,p,m,g,v,n=this._root,s=this._x0,o=this._y0,c=this._x1,l=this._y1;if(!n)return this;if(n.length)for(;;){if((p=u>=(d=(s+c)/2))?s=d:c=d,(m=f>=(h=(o+l)/2))?o=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,v=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):t?(a?t[g]=a:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=a,this)},g2.removeAll=function P0t(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},g2.root=function $0t(){return this._root},g2.size=function B0t(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e},g2.visit=function U0t(e){var n,i,a,s,o,c,t=[],r=this._root;for(r&&t.push(new m2(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,a=n.x0,s=n.y0,o=n.x1,c=n.y1)&&r.length){var l=(a+o)/2,u=(s+c)/2;(i=r[3])&&t.push(new m2(i,l,u,o,c)),(i=r[2])&&t.push(new m2(i,a,u,l,c)),(i=r[1])&&t.push(new m2(i,l,s,o,u)),(i=r[0])&&t.push(new m2(i,a,s,l,u))}return this},g2.visitAfter=function j0t(e){var r,t=[],n=[];for(this._root&&t.push(new m2(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var a,s=r.x0,o=r.y0,c=r.x1,l=r.y1,u=(s+c)/2,f=(o+l)/2;(a=i[0])&&t.push(new m2(a,s,o,u,f)),(a=i[1])&&t.push(new m2(a,u,o,c,f)),(a=i[2])&&t.push(new m2(a,s,f,u,l)),(a=i[3])&&t.push(new m2(a,u,f,c,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this},g2.x=function G0t(e){return arguments.length?(this._x=e,this):this._x},g2.y=function Y0t(e){return arguments.length?(this._y=e,this):this._y};var K0t={value:()=>{}};function dce(){for(var r,e=0,t=arguments.length,n={};e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Nv(n)}function Nv(e){this._=e}function e6t(e,t){for(var i,n=0,r=e.length;n<r;++n)if((i=e[n]).name===t)return i.value}function hce(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=K0t,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Nv.prototype=dce.prototype={constructor:Nv,on:function(e,t){var i,n=this._,r=function J0t(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}(e+"",n),a=-1,s=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(i=(e=r[a]).type)n[i]=hce(n[i],e.name,t);else if(null==t)for(i in n)n[i]=hce(n[i],e.name,null);return this}for(;++a<s;)if((i=(e=r[a]).type)&&(i=e6t(n[i],e.name)))return i},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Nv(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var i,a,n=new Array(i),r=0;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=0,i=(a=this._[e]).length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};const t6t=dce;var kv,w7,au=0,M7=0,_7=0,pce=1e3,Tv=0,W4=0,Iv=0,x7="object"==typeof performance&&performance.now?performance:Date,mce="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function rL(){return W4||(mce(n6t),W4=x7.now()+Iv)}function n6t(){W4=0}function Fv(){this._call=this._time=this._next=null}function gce(e,t,n){var r=new Fv;return r.restart(e,t,n),r}function vce(){W4=(Tv=x7.now())+Iv,au=M7=0;try{!function r6t(){rL(),++au;for(var t,e=kv;e;)(t=W4-e._time)>=0&&e._call.call(void 0,t),e=e._next;--au}()}finally{au=0,function a6t(){for(var e,n,t=kv,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:kv=n);w7=e,iL(r)}(),W4=0}}function i6t(){var e=x7.now(),t=e-Tv;t>pce&&(Iv-=t,Tv=e)}function iL(e){au||(M7&&(M7=clearTimeout(M7)),e-W4>24?(e<1/0&&(M7=setTimeout(vce,e-x7.now()-Iv)),_7&&(_7=clearInterval(_7))):(_7||(Tv=x7.now(),_7=setInterval(i6t,pce)),au=1,mce(vce)))}Fv.prototype=gce.prototype={constructor:Fv,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?rL():+n)+(null==t?0:+t),!this._next&&w7!==this&&(w7?w7._next=this:kv=this,w7=this),this._call=e,this._time=n,iL()},stop:function(){this._call&&(this._call=null,this._time=1/0,iL())}};function l6t(e){return e.x}function u6t(e){return e.y}var d6t=Math.PI*(3-Math.sqrt(5));function m6t(e){return e.index}function Cce(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}const bce={center:function A0t(e,t){var n,r=1;function i(){var a,o,s=n.length,c=0,l=0;for(a=0;a<s;++a)c+=(o=n[a]).x,l+=o.y;for(c=(c/s-e)*r,l=(l/s-t)*r,a=0;a<s;++a)(o=n[a]).x-=c,o.y-=l}return null==e&&(e=0),null==t&&(t=0),i.initialize=function(a){n=a},i.x=function(a){return arguments.length?(e=+a,i):e},i.y=function(a){return arguments.length?(t=+a,i):t},i.strength=function(a){return arguments.length?(r=+a,i):r},i},collide:function Z0t(e){var t,n,r,i=1,a=1;function s(){for(var l,f,d,h,p,m,g,u=t.length,v=0;v<a;++v)for(f=tL(t,X0t,Q0t).visitAfter(o),l=0;l<u;++l)g=(m=n[(d=t[l]).index])*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(y);function y(C,b,M,w,_){var z=C.data,S=C.r,D=m+S;if(!z)return b>h+D||w<h-D||M>p+D||_<p-D;if(z.index>d.index){var L=h-z.x-z.vx,R=p-z.y-z.vy,N=L*L+R*R;N<D*D&&(0===L&&(N+=(L=t3(r))*L),0===R&&(N+=(R=t3(r))*R),N=(D-(N=Math.sqrt(N)))/N*i,d.vx+=(L*=N)*(D=(S*=S)/(g+S)),d.vy+=(R*=N)*D,z.vx-=L*(D=1-D),z.vy-=R*D)}}}function o(l){if(l.data)return l.r=n[l.data.index];for(var u=l.r=0;u<4;++u)l[u]&&l[u].r>l.r&&(l.r=l[u].r)}function c(){if(t){var l,f,u=t.length;for(n=new Array(u),l=0;l<u;++l)n[(f=t[l]).index]=+e(f,l,t)}}return"function"!=typeof e&&(e=v2(null==e?1:+e)),s.initialize=function(l,u){t=l,r=u,c()},s.iterations=function(l){return arguments.length?(a=+l,s):a},s.strength=function(l){return arguments.length?(i=+l,s):i},s.radius=function(l){return arguments.length?(e="function"==typeof l?l:v2(+l),c(),s):e},s},nbody:function p6t(){var e,t,n,r,a,i=v2(-30),s=1,o=1/0,c=.81;function l(h){var p,m=e.length,g=tL(e,l6t,u6t).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function u(){if(e){var h,m,p=e.length;for(a=new Array(p),h=0;h<p;++h)a[(m=e[h]).index]=+i(m,h,e)}}function f(h){var m,g,y,C,b,p=0,v=0;if(h.length){for(y=C=b=0;b<4;++b)(m=h[b])&&(g=Math.abs(m.value))&&(p+=m.value,v+=g,y+=g*m.x,C+=g*m.y);h.x=y/v,h.y=C/v}else{(m=h).x=m.data.x,m.y=m.data.y;do{p+=a[m.data.index]}while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var v=h.x-t.x,y=h.y-t.y,C=g-p,b=v*v+y*y;if(C*C/c<b)return b<o&&(0===v&&(b+=(v=t3(n))*v),0===y&&(b+=(y=t3(n))*y),b<s&&(b=Math.sqrt(s*b)),t.vx+=v*h.value*r/b,t.vy+=y*h.value*r/b),!0;if(!(h.length||b>=o)){(h.data!==t||h.next)&&(0===v&&(b+=(v=t3(n))*v),0===y&&(b+=(y=t3(n))*y),b<s&&(b=Math.sqrt(s*b)));do{h.data!==t&&(t.vx+=v*(C=a[h.data.index]*r/b),t.vy+=y*C)}while(h=h.next)}}return l.initialize=function(h,p){e=h,n=p,u()},l.strength=function(h){return arguments.length?(i="function"==typeof h?h:v2(+h),u(),l):i},l.distanceMin=function(h){return arguments.length?(s=h*h,l):Math.sqrt(s)},l.distanceMax=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.theta=function(h){return arguments.length?(c=h*h,l):Math.sqrt(c)},l},link:function g6t(e){var r,a,s,o,c,l,t=m6t,n=function f(g){return 1/Math.min(o[g.source.index],o[g.target.index])},i=v2(30),u=1;function d(g){for(var v=0,y=e.length;v<u;++v)for(var b,M,w,_,z,S,D,C=0;C<y;++C)_=(w=(b=e[C]).target).x+w.vx-(M=b.source).x-M.vx||t3(l),z=w.y+w.vy-M.y-M.vy||t3(l),z*=S=((S=Math.sqrt(_*_+z*z))-a[C])/S*g*r[C],w.vx-=(_*=S)*(D=c[C]),w.vy-=z*D,M.vx+=_*(D=1-D),M.vy+=z*D}function h(){if(s){var g,b,v=s.length,y=e.length,C=new Map(s.map((M,w)=>[t(M,w,s),M]));for(g=0,o=new Array(v);g<y;++g)(b=e[g]).index=g,"object"!=typeof b.source&&(b.source=Cce(C,b.source)),"object"!=typeof b.target&&(b.target=Cce(C,b.target)),o[b.source.index]=(o[b.source.index]||0)+1,o[b.target.index]=(o[b.target.index]||0)+1;for(g=0,c=new Array(y);g<y;++g)c[g]=o[(b=e[g]).source.index]/(o[b.source.index]+o[b.target.index]);r=new Array(y),p(),a=new Array(y),m()}}function p(){if(s)for(var g=0,v=e.length;g<v;++g)r[g]=+n(e[g],g,e)}function m(){if(s)for(var g=0,v=e.length;g<v;++g)a[g]=+i(e[g],g,e)}return null==e&&(e=[]),d.initialize=function(g,v){s=g,l=v,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(u=+g,d):u},d.strength=function(g){return arguments.length?(n="function"==typeof g?g:v2(+g),p(),d):n},d.distance=function(g){return arguments.length?(i="function"==typeof g?g:v2(+g),m(),d):i},d},x:function v6t(e){var n,r,i,t=v2(.1);function a(o){for(var u,c=0,l=n.length;c<l;++c)(u=n[c]).vx+=(i[c]-u.x)*r[c]*o}function s(){if(n){var o,c=n.length;for(r=new Array(c),i=new Array(c),o=0;o<c;++o)r[o]=isNaN(i[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return"function"!=typeof e&&(e=v2(null==e?0:+e)),a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t="function"==typeof o?o:v2(+o),s(),a):t},a.x=function(o){return arguments.length?(e="function"==typeof o?o:v2(+o),s(),a):e},a},y:function y6t(e){var n,r,i,t=v2(.1);function a(o){for(var u,c=0,l=n.length;c<l;++c)(u=n[c]).vy+=(i[c]-u.y)*r[c]*o}function s(){if(n){var o,c=n.length;for(r=new Array(c),i=new Array(c),o=0;o<c;++o)r[o]=isNaN(i[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return"function"!=typeof e&&(e=v2(null==e?0:+e)),a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t="function"==typeof o?o:v2(+o),s(),a):t},a.y=function(o){return arguments.length?(e="function"==typeof o?o:v2(+o),s(),a):e},a}},z7="forces",aL=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],C6t=["static","iterations"],Mce=["x","y","vx","vy"];function sL(e){Y.call(this,null,e)}function _ce(e,t,n,r){var a,s,o,c,i=me(t.forces);for(a=0,s=aL.length;a<s;++a)(o=aL[a])!==z7&&t.modified(o)&&e[o](t[o]);for(a=0,s=i.length;a<s;++a)c=z7+a,(o=n||t.modified(z7,a)?w6t(i[a]):r&&_6t(i[a],r)?e.force(c):null)&&e.force(c,o);for(s=e.numForces||0;a<s;++a)e.force(z7+a,null);return e.numForces=i.length,e}function _6t(e,t){var n,r;for(n in e)if(Je(r=e[n])&&t.modified(F1(r)))return 1;return 0}function w6t(e){var t,n;for(n in Ne(bce,e.force)||Z("Unrecognized force: "+e.force),t=bce[e.force](),e)Je(t[n])&&x6t(t[n],e[n],e);return t}function x6t(e,t,n){e(Je(t)?r=>t(r,n):t)}function z6t(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function oL(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=B6t)):void 0===t&&(t=$6t);for(var r,a,s,o,c,n=new su(e),i=[n];r=i.pop();)if((s=t(r.data))&&(c=(s=Array.from(s)).length))for(r.children=s,o=c-1;o>=0;--o)i.push(a=s[o]=new su(s[o])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(wce)}function $6t(e){return e.children}function B6t(e){return Array.isArray(e)?e[1]:null}function U6t(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function wce(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function su(e){this.data=e,this.depth=this.height=0,this.parent=null}function Rv(e){return null==e?null:xce(e)}function xce(e){if("function"!=typeof e)throw new Error;return e}function Y4(){return 0}function ou(e){return function(){return e}}sL.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Mce}]},le(sL,Y,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(aL),a=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&_ce(n,e,0,t)):(this.value=n=function M6t(e,t){const n=function h6t(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,s=.6,o=new Map,c=gce(f),l=t6t("tick","end"),u=function c6t(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}();function f(){d(),l.call("tick",t),n<r&&(c.stop(),l.call("end",t))}function d(m){var g,y,v=e.length;void 0===m&&(m=1);for(var C=0;C<m;++C)for(n+=(a-n)*i,o.forEach(function(b){b(n)}),g=0;g<v;++g)null==(y=e[g]).fx?y.x+=y.vx*=s:(y.x=y.fx,y.vx=0),null==y.fy?y.y+=y.vy*=s:(y.y=y.fy,y.vy=0);return t}function h(){for(var v,m=0,g=e.length;m<g;++m){if((v=e[m]).index=m,null!=v.fx&&(v.x=v.fx),null!=v.fy&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var y=10*Math.sqrt(.5+m),C=m*d6t;v.x=y*Math.cos(C),v.y=y*Math.sin(C)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function p(m){return m.initialize&&m.initialize(e,u),m}return null==e&&(e=[]),h(),t={tick:d,restart:function(){return c.restart(f),t},stop:function(){return c.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),o.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(a=+m,t):a},velocityDecay:function(m){return arguments.length?(s=1-m,t):1-s},randomSource:function(m){return arguments.length?(u=m,o.forEach(p),t):u},force:function(m,g){return arguments.length>1?(null==g?o.delete(m):o.set(m,p(g)),t):o.get(m)},find:function(m,g,v){var b,M,w,_,z,y=0,C=e.length;for(null==v?v=1/0:v*=v,y=0;y<C;++y)(w=(b=m-(_=e[y]).x)*b+(M=g-_.y)*M)<v&&(z=_,v=w);return z},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}(e),r=n.stop,i=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,i()),n.stop=()=>(a=!0,r()),_ce(n,t,!0).on("end",()=>a=!0)}(t.source,e),n.on("tick",function b6t(e,t){return()=>e.touch(t).run()}(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(C6t)||t.changed()&&e.restart)if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation;return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let u,o=this._argops,c=0,l=o.length;c<l;++c)if(u=o[c],u.name===z7&&"link"===u.op._argval.force)for(var s,r=u.op._argops,i=0,a=r.length;i<a;++i)if("links"===r[i].name&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}return t.reflow(e.modified()).modifies(Mce)}}),su.prototype=oL.prototype={constructor:su,count:function H6t(){return this.eachAfter(z6t)},each:function S6t(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function V6t(e,t){for(var a,s,o,n=this,r=[n],i=[],c=-1;n=r.pop();)if(i.push(n),a=n.children)for(s=0,o=a.length;s<o;++s)r.push(a[s]);for(;n=i.pop();)e.call(t,n,++c,this);return this},eachBefore:function E6t(e,t){for(var i,a,n=this,r=[n],s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this},find:function D6t(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function L6t(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})},sort:function A6t(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function N6t(e){for(var t=this,n=function k6t(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)r.push(t=t.parent);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function T6t(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function I6t(){return Array.from(this)},leaves:function F6t(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function R6t(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function P6t(){return oL(this).eachBefore(U6t)},[Symbol.iterator]:function*O6t(){var t,r,i,a,e=this,n=[e];do{for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,a=r.length;i<a;++i)n.push(r[i])}while(n.length)}};function X6t(e,t){var n,r;if(cL(t,e))return[t];for(n=0;n<e.length;++n)if(Ov(t,e[n])&&cL(H7(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Ov(H7(e[n],e[r]),t)&&Ov(H7(e[n],t),e[r])&&Ov(H7(e[r],t),e[n])&&cL(Ece(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Ov(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function Sce(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function cL(e,t){for(var n=0;n<t.length;++n)if(!Sce(e,t[n]))return!1;return!0}function Q6t(e){switch(e.length){case 1:return function Z6t(e){return{x:e.x,y:e.y,r:e.r}}(e[0]);case 2:return H7(e[0],e[1]);case 3:return Ece(e[0],e[1],e[2])}}function H7(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,s=t.y,o=t.r,c=a-n,l=s-r,u=o-i,f=Math.sqrt(c*c+l*l);return{x:(n+a+c/f*u)/2,y:(r+s+l/f*u)/2,r:(f+i+o)/2}}function Ece(e,t,n){var r=e.x,i=e.y,a=e.r,s=t.x,o=t.y,c=t.r,l=n.x,u=n.y,f=n.r,d=r-s,h=r-l,p=i-o,m=i-u,g=c-a,v=f-a,y=r*r+i*i-a*a,C=y-s*s-o*o+c*c,b=y-l*l-u*u+f*f,M=h*p-d*m,w=(p*b-m*C)/(2*M)-r,_=(m*g-p*v)/M,z=(h*C-d*b)/(2*M)-i,S=(d*v-h*g)/M,D=_*_+S*S-1,L=2*(a+w*_+z*S),R=w*w+z*z-a*a,N=-(Math.abs(D)>1e-6?(L+Math.sqrt(L*L-4*D*R))/(2*D):R/L);return{x:r+w+_*N,y:i+z+S*N,r:N}}function Vce(e,t,n){var i,a,o,c,r=e.x-t.x,s=e.y-t.y,l=r*r+s*s;l?(a=t.r+n.r,c=e.r+n.r,(a*=a)>(c*=c)?(i=(l+c-a)/(2*l),o=Math.sqrt(Math.max(0,c/l-i*i)),n.x=e.x-i*r-o*s,n.y=e.y-i*s+o*r):(i=(l+a-c)/(2*l),o=Math.sqrt(Math.max(0,a/l-i*i)),n.x=t.x+i*r-o*s,n.y=t.y+i*s+o*r)):(n.x=t.x+n.r,n.y=t.y)}function Dce(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Lce(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function Pv(e){this._=e,this.next=null,this.previous=null}function Ace(e,t){if(!(a=(e=function W6t(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}(e)).length))return 0;var n,r,i,a,s,o,c,l,u,f,d;if((n=e[0]).x=0,n.y=0,!(a>1))return n.r;if(n.x=-(r=e[1]).r,r.x=n.r,r.y=0,!(a>2))return n.r+r.r;Vce(r,n,i=e[2]),n=new Pv(n),r=new Pv(r),i=new Pv(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(c=3;c<a;++c){Vce(n._,r._,i=e[c]),i=new Pv(i),l=r.next,u=n.previous,f=r._.r,d=n._.r;do{if(f<=d){if(Dce(l._,i._)){n.next=r=l,r.previous=n,--c;continue e}f+=l._.r,l=l.next}else{if(Dce(u._,i._)){(n=u).next=r,r.previous=n,--c;continue e}d+=u._.r,u=u.previous}}while(l!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=Lce(n);(i=i.next)!==r;)(o=Lce(i))<s&&(n=i,s=o);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=function Hce(e,t){for(var a,s,n=0,r=(e=function Y6t(e,t){let r,i,n=e.length;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}(Array.from(e),t)).length,i=[];n<r;)a=e[n],s&&Sce(s,a)?++n:(s=Q6t(i=X6t(i,a)),n=0);return s}(n,t),c=0;c<a;++c)(n=e[c]).x-=i.x,n.y-=i.y;return i.r}function K6t(e){return Math.sqrt(e.value)}function Nce(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function lL(e,t,n){return function(r){if(i=r.children){var i,a,c,s=i.length,o=e(r)*t||0;if(o)for(a=0;a<s;++a)i[a].r+=o;if(c=Ace(i,n),o)for(a=0;a<s;++a)i[a].r-=o;r.r=c+o}}}function kce(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Tce(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function S7(e,t,n,r,i){for(var s,a=e.children,o=-1,c=a.length,l=e.value&&(r-t)/e.value;++o<c;)(s=a[o]).y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*l}var tut={depth:-1},Ice={},uL={};function nut(e){return e.id}function rut(e){return e.parentId}function Fce(){var n,e=nut,t=rut;function r(i){var c,l,u,f,d,h,p,m,a=Array.from(i),s=e,o=t,g=new Map;if(null!=n){const v=a.map((b,M)=>function iut(e){let t=(e=`${e}`).length;return fL(e,t-1)&&!fL(e,t-2)&&(e=e.slice(0,-1)),"/"===e[0]?e:`/${e}`}(n(b,M,i))),y=v.map(Rce),C=new Set(v).add("");for(const b of y)C.has(b)||(C.add(b),v.push(b),y.push(Rce(b)),a.push(uL));s=(b,M)=>v[M],o=(b,M)=>y[M]}for(u=0,c=a.length;u<c;++u)h=a[u]=new su(l=a[u]),null!=(p=s(l,u,i))&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?Ice:h)),null!=(p=o(l,u,i))&&(p+="")&&(h.parent=p);for(u=0;u<c;++u)if(p=(h=a[u]).parent){if(!(d=g.get(p)))throw new Error("missing: "+p);if(d===Ice)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(null!=n){for(;f.data===uL&&1===f.children.length;)f=f.children[0],--c;for(let v=a.length-1;v>=0&&(h=a[v]).data===uL;--v)h.data=null}if(f.parent=tut,f.eachBefore(function(v){v.depth=v.parent.depth+1,--c}).eachBefore(wce),f.parent=null,c>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=Rv(i),r):e},r.parentId=function(i){return arguments.length?(t=Rv(i),r):t},r.path=function(i){return arguments.length?(n=Rv(i),r):n},r}function Rce(e){let t=e.length;if(t<2)return"";for(;--t>1&&!fL(e,t););return e.slice(0,t)}function fL(e,t){if("/"===e[t]){let n=0;for(;t>0&&"\\"===e[--t];)++n;if(!(1&n))return!0}return!1}function aut(e,t){return e.parent===t.parent?1:2}function dL(e){var t=e.children;return t?t[0]:e.t}function hL(e){var t=e.children;return t?t[t.length-1]:e.t}function sut(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function cut(e,t,n){return e.a.parent===t.parent?e.a:n}function $v(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function fut(e,t){return e.parent===t.parent?1:2}function hut(e,t){return e+t.x}function mut(e,t){return Math.max(e,t.y)}function Bv(e,t,n,r,i){for(var s,a=e.children,o=-1,c=a.length,l=e.value&&(i-n)/e.value;++o<c;)(s=a[o]).x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*l}$v.prototype=Object.create(su.prototype);var Oce=(1+Math.sqrt(5))/2;function Pce(e,t,n,r,i,a){for(var c,l,h,p,g,v,y,C,b,M,w,s=[],o=t.children,u=0,f=0,d=o.length,m=t.value;u<d;){h=i-n,p=a-r;do{g=o[f++].value}while(!g&&f<d);for(v=y=g,w=g*g*(M=Math.max(p/h,h/p)/(m*e)),b=Math.max(y/w,w/v);f<d;++f){if(g+=l=o[f].value,l<v&&(v=l),l>y&&(y=l),w=g*g*M,(C=Math.max(y/w,w/v))>b){g-=l;break}b=C}s.push(c={value:g,dice:h<p,children:o.slice(u,f)}),c.dice?S7(c,n,r,i,m?r+=p*g/m:a):Bv(c,n,r,m?n+=h*g/m:i,a),m-=g,u=f}return s}const $ce=function e(t){function n(r,i,a,s,o){Pce(t,r,i,a,s,o)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Oce),Mut=function e(t){function n(r,i,a,s,o){if((c=r._squarify)&&c.ratio===t)for(var c,l,u,f,h,d=-1,p=c.length,m=r.value;++d<p;){for(u=(l=c[d]).children,f=l.value=0,h=u.length;f<h;++f)l.value+=u[f].value;l.dice?S7(l,i,a,s,m?a+=(o-a)*l.value/m:o):Bv(l,i,a,m?i+=(s-i)*l.value/m:s,o),m-=l.value}else r._squarify=c=Pce(t,r,i,a,s,o),c.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Oce);function pL(e,t,n){const r={};return e.each(i=>{const a=i.data;n(a)&&(r[t(a)]=i)}),e.lookup=r,e}function mL(e){Y.call(this,null,e)}mL.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const wut=e=>e.values;function xut(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,a){if(a>=e.length)return i;const s=i.length,o=e[a++],c={},l={};let f,d,h,u=-1;for(;++u<s;)f=o(d=i[u])+"",(h=c[f])?h.push(d):c[f]=[d];for(f in c)l[f]=n(c[f],a);return l}function r(i,a){if(++a>e.length)return i;const s=[];for(const o in i)s.push({key:o,values:r(i[o],a)});return s}return t}function _o(e){Y.call(this,null,e)}le(mL,Y,{transform(e,t){t.source||Z("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),a=this.value;return(!a||r||t.changed())&&(a&&a.each(s=>{s.children&&Vm(s.data)&&i.rem.push(s.data)}),this.value=a=oL({values:me(e.keys).reduce((s,o)=>(s.key(o),s),xut()).entries(i.source)},wut),n&&a.each(s=>{s.children&&(s=xt(s.data),i.add.push(s),i.source.push(s))}),pL(a,ke,ke)),i.source.root=a,i}});const zut=(e,t)=>e.parent===t.parent?1:2;le(_o,Y,{transform(e,t){(!t.source||!t.source.root)&&Z(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,a=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(S4(e.sort,s=>s.data)),function Hut(e,t,n){for(let r,i=0,a=t.length;i<a;++i)r=t[i],r in n&&e[r](n[r])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?zut:m6);try{this.value=n(i)}catch(s){Z(s)}return i.each(s=>function Sut(e,t,n){const r=e.data,i=t.length-1;for(let a=0;a<i;++a)r[n[a]]=e[t[a]];r[n[i]]=e.children?e.children.length:0}(s,r,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});const gL=["x","y","r","depth","children"];function vL(e){_o.call(this,e)}vL.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:gL.length,default:gL}]},le(vL,_o,{layout:function J6t(){var e=null,t=1,n=1,r=Y4;function i(a){const s=function G6t(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}();return a.x=t/2,a.y=n/2,e?a.eachBefore(Nce(e)).eachAfter(lL(r,.5,s)).eachBefore(kce(1)):a.eachBefore(Nce(K6t)).eachAfter(lL(Y4,1,s)).eachAfter(lL(r,a.r/Math.min(t,n),s)).eachBefore(kce(Math.min(t,n)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(e=Rv(a),i):e},i.size=function(a){return arguments.length?(t=+a[0],n=+a[1],i):[t,n]},i.padding=function(a){return arguments.length?(r="function"==typeof a?a:ou(+a),i):r},i},params:["radius","size","padding"],fields:gL});const yL=["x0","y0","x1","y1","depth","children"];function CL(e){_o.call(this,e)}function bL(e){Y.call(this,null,e)}CL.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:yL.length,default:yL}]},le(CL,_o,{layout:function eut(){var e=1,t=1,n=0,r=!1;function i(s){var o=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/o,s.eachBefore(function a(s,o){return function(c){c.children&&S7(c,c.x0,s*(c.depth+1)/o,c.x1,s*(c.depth+2)/o);var l=c.x0,u=c.y0,f=c.x1-n,d=c.y1-n;f<l&&(l=f=(l+f)/2),d<u&&(u=d=(u+d)/2),c.x0=l,c.y0=u,c.x1=f,c.y1=d}}(t,o)),r&&s.eachBefore(Tce),s}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i},params:["size","round","padding"],fields:yL}),bL.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},le(bL,Y,{transform(e,t){t.source||Z("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),a=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),a&&(n=i.source.length?pL(Fce().id(e.key).parentId(e.parentKey)(i.source),e.key,Jr):pL(Fce()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Bce={tidy:function uut(){var e=aut,t=1,n=1,r=null;function i(l){var u=function lut(e){for(var n,i,a,s,o,t=new $v(e,0),r=[t];n=r.pop();)if(a=n._.children)for(n.children=new Array(o=a.length),s=o-1;s>=0;--s)r.push(i=n.children[s]=new $v(a[s],s)),i.parent=n;return(t.parent=new $v(null,0)).children=[t],t}(l);if(u.eachAfter(a),u.parent.m=-u.z,u.eachBefore(s),r)l.eachBefore(c);else{var f=l,d=l,h=l;l.eachBefore(function(y){y.x<f.x&&(f=y),y.x>d.x&&(d=y),y.depth>h.depth&&(h=y)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),v=n/(h.depth||1);l.eachBefore(function(y){y.x=(y.x+m)*g,y.y=y.depth*v})}return l}function a(l){var u=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(u){!function out(e){for(var a,t=0,n=0,r=e.children,i=r.length;--i>=0;)(a=r[i]).z+=t,a.m+=t,t+=a.s+(n+=a.c)}(l);var h=(u[0].z+u[u.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=function o(l,u,f){if(u){for(var b,d=l,h=l,p=u,m=d.parent.children[0],g=d.m,v=h.m,y=p.m,C=m.m;p=hL(p),d=dL(d),p&&d;)m=dL(m),(h=hL(h)).a=l,(b=p.z+y-d.z-g+e(p._,d._))>0&&(sut(cut(p,l,f),l,b),g+=b,v+=b),y+=p.m,g+=d.m,C+=m.m,v+=h.m;p&&!hL(h)&&(h.t=p,h.m+=y-v),d&&!dL(m)&&(m.t=d,m.m+=g-C,f=l)}return f}(l,d,l.parent.A||f[0])}function s(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function c(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i},cluster:function yut(){var e=fut,t=1,n=1,r=!1;function i(a){var s,o=0;a.eachAfter(function(d){var h=d.children;h?(d.x=function dut(e){return e.reduce(hut,0)/e.length}(h),d.y=function put(e){return 1+e.reduce(mut,0)}(h)):(d.x=s?o+=e(d,s):0,d.y=0,s=d)});var c=function gut(e){for(var t;t=e.children;)e=t[0];return e}(a),l=function vut(e){for(var t;t=e.children;)e=t[t.length-1];return e}(a),u=c.x-e(c,l)/2,f=l.x+e(l,c)/2;return a.eachAfter(r?function(d){d.x=(d.x-a.x)*t,d.y=(a.y-d.y)*n}:function(d){d.x=(d.x-u)/(f-u)*t,d.y=(1-(a.y?d.y/a.y:1))*n})}return i.separation=function(a){return arguments.length?(e=a,i):e},i.size=function(a){return arguments.length?(r=!1,t=+a[0],n=+a[1],i):r?null:[t,n]},i.nodeSize=function(a){return arguments.length?(r=!0,t=+a[0],n=+a[1],i):r?[t,n]:null},i}},ML=["x","y","depth","children"];function _L(e){_o.call(this,e)}function wL(e){Y.call(this,[],e)}_L.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:ML.length,default:ML}]},le(_L,_o,{layout(e){const t=e||"tidy";if(Ne(Bce,t))return Bce[t]();Z("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:ML}),wL.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},le(wL,Y,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),a={};return r||Z("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>a[ke(s)]=1),r.each(s=>{const o=s.data,c=s.parent&&s.parent.data;c&&a[ke(o)]&&a[ke(c)]&&i.add.push(xt({source:c,target:o}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>a[ke(s)]=1),n.forEach(s=>{(a[ke(s.source)]||a[ke(s.target)])&&i.mod.push(s)})),i}});const Uce={binary:function Cut(e,t,n,r,i){var s,c,a=e.children,o=a.length,l=new Array(o+1);for(l[0]=c=s=0;s<o;++s)l[s+1]=c+=a[s].value;!function u(f,d,h,p,m,g,v){if(f>=d-1){var y=a[f];return y.x0=p,y.y0=m,y.x1=g,void(y.y1=v)}for(var C=l[f],b=h/2+C,M=f+1,w=d-1;M<w;){var _=M+w>>>1;l[_]<b?M=_+1:w=_}b-l[M-1]<l[M]-b&&f+1<M&&--M;var z=l[M]-C,S=h-z;if(g-p>v-m){var D=h?(p*S+g*z)/h:g;u(f,M,z,p,m,D,v),u(M,d,S,D,m,g,v)}else{var L=h?(m*S+v*z)/h:v;u(f,M,z,p,m,g,L),u(M,d,S,p,L,g,v)}}(0,o,e.value,t,n,r,i)},dice:S7,slice:Bv,slicedice:function but(e,t,n,r,i){(1&e.depth?Bv:S7)(e,t,n,r,i)},squarify:$ce,resquarify:Mut},xL=["x0","y0","x1","y1","depth","children"];function zL(e){_o.call(this,e)}zL.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:xL.length,default:xL}]},le(zL,_o,{layout(){const e=function _ut(){var e=$ce,t=!1,n=1,r=1,i=[0],a=Y4,s=Y4,o=Y4,c=Y4,l=Y4;function u(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(Tce),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,v=d.y1-h;g<p&&(p=g=(p+g)/2),v<m&&(m=v=(m+v)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=v,d.children&&(h=i[d.depth+1]=a(d)/2,p+=l(d)-h,m+=s(d)-h,(g-=o(d)-h)<p&&(p=g=(p+g)/2),(v-=c(d)-h)<m&&(m=v=(m+v)/2),e(d,p,m,g,v))}return u.round=function(d){return arguments.length?(t=!!d,u):t},u.size=function(d){return arguments.length?(n=+d[0],r=+d[1],u):[n,r]},u.tile=function(d){return arguments.length?(e=xce(d),u):e},u.padding=function(d){return arguments.length?u.paddingInner(d).paddingOuter(d):u.paddingInner()},u.paddingInner=function(d){return arguments.length?(a="function"==typeof d?d:ou(+d),u):a},u.paddingOuter=function(d){return arguments.length?u.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):u.paddingTop()},u.paddingTop=function(d){return arguments.length?(s="function"==typeof d?d:ou(+d),u):s},u.paddingRight=function(d){return arguments.length?(o="function"==typeof d?d:ou(+d),u):o},u.paddingBottom=function(d){return arguments.length?(c="function"==typeof d?d:ou(+d),u):c},u.paddingLeft=function(d){return arguments.length?(l="function"==typeof d?d:ou(+d),u):l},u}();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ne(Uce,t)?e.tile(Uce[t]):Z("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:xL});const HL=4278190080;function SL(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function Uv(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;"group"===r?t.forEach(i=>{i.items.forEach(a=>Uv(e,a.items,n))}):Sr[r].draw(e,{items:n?t.map(Dut):t})}function Dut(e){const t=Dm(e,{});return t.stroke&&0!==t.strokeOpacity||t.fill&&0!==t.fillOpacity?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const wo=5,y2=31,E7=32,n3=new Uint32Array(E7+1),Qi=new Uint32Array(E7+1);Qi[0]=0,n3[0]=~Qi[0];for(let e=1;e<=E7;++e)Qi[e]=Qi[e-1]<<1|1,n3[e]=~Qi[e];function jv(e,t,n,r,i,a){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>a}function r3(e,t,n,r,i,a,s,o){const c=i*a/(2*r),l=e(t-c),u=e(t+c),f=e(n-(a/=2)),d=e(n+a);return s.outOfBounds(l,f,u,d)||s.getRange(l,f,u,d)||o&&o.getRange(l,f,u,d)}const Tut=[-1,-1,1,1],Iut=[-1,1,-1,1],Rut=["right","center","left"],Out=["bottom","middle","top"];function jce(e,t,n,r,i,a,s,o,c,l,u,f){return!(i.outOfBounds(e,n,t,r)||(f&&a||i).getRange(e,n,t,r))}const $ut={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},But={naive:function Nut(e,t,n,r){const i=e.width,a=e.height;return function(s){const o=s.datum.datum.items[r].items,c=o.length,l=s.datum.fontSize,u=Hr.width(s.datum,s.datum.text);let d,h,p,m,g,v,y,f=0;for(let C=0;C<c;++C)d=o[C].x,p=o[C].y,h=void 0===o[C].x2?d:o[C].x2,m=void 0===o[C].y2?p:o[C].y2,g=(d+h)/2,v=(p+m)/2,y=Math.abs(h-d+m-p),y>=f&&(f=y,s.x=g,s.y=v);return g=u/2,v=l/2,d=s.x-g,h=s.x+g,p=s.y-v,m=s.y+v,s.align="center",d<0&&h<=i?s.align="left":0<=d&&i<h&&(s.align="right"),s.baseline="middle",p<0&&m<=a?s.baseline="top":0<=p&&a<m&&(s.baseline="bottom"),!0}},"reduced-search":function kut(e,t,n,r){const i=e.width,a=e.height,s=t[0],o=t[1];function c(l,u,f,d,h){const p=e.invert(l),m=e.invert(u);let y,g=f,v=a;if(!jv(p,m,d,h,i,a)&&!r3(e,p,m,h,d,g,s,o)&&!r3(e,p,m,h,d,h,s,null)){for(;v-g>=1;)y=(g+v)/2,r3(e,p,m,h,d,y,s,o)?v=y:g=y;if(g>f)return[p,m,g,!0]}}return function(l){const u=l.datum.datum.items[r].items,f=u.length,d=l.datum.fontSize,h=Hr.width(l.datum,l.datum.text);let y,C,b,M,w,_,z,S,D,L,R,N,x,H,V,T,E,p=n?d:0,m=!1,g=!1,v=0;for(let k=0;k<f;++k){for(y=u[k].x,b=u[k].y,C=void 0===u[k].x2?y:u[k].x2,M=void 0===u[k].y2?b:u[k].y2,y>C&&(E=y,y=C,C=E),b>M&&(E=b,b=M,M=E),D=e(y),R=e(C),L=~~((D+R)/2),N=e(b),H=e(M),x=~~((N+H)/2),z=L;z>=D;--z)for(S=x;S>=N;--S)T=c(z,S,p,h,d),T&&([l.x,l.y,p,m]=T);for(z=L;z<=R;++z)for(S=x;S<=H;++S)T=c(z,S,p,h,d),T&&([l.x,l.y,p,m]=T);!m&&!n&&(V=Math.abs(C-y+M-b),w=(y+C)/2,_=(b+M)/2,V>=v&&!jv(w,_,h,d,i,a)&&!r3(e,w,_,d,h,d,s,null)&&(v=V,l.x=w,l.y=_,g=!0))}return!(!m&&!g||(w=h/2,_=d/2,s.setRange(e(l.x-w),e(l.y-_),e(l.x+w),e(l.y+_)),l.align="center",l.baseline="middle",0))}},floodfill:function Fut(e,t,n,r){const i=e.width,a=e.height,s=t[0],o=t[1],c=e.bitmap();return function(l){const u=l.datum.datum.items[r].items,f=u.length,d=l.datum.fontSize,h=Hr.width(l.datum,l.datum.text),p=[];let C,b,M,w,_,z,S,D,L,R,N,x,m=n?d:0,g=!1,v=!1,y=0;for(let H=0;H<f;++H){for(C=u[H].x,M=u[H].y,b=void 0===u[H].x2?C:u[H].x2,w=void 0===u[H].y2?M:u[H].y2,p.push([e((C+b)/2),e((M+w)/2)]);p.length;)if([S,D]=p.pop(),!(s.get(S,D)||o.get(S,D)||c.get(S,D))){c.set(S,D);for(let V=0;V<4;++V)_=S+Tut[V],z=D+Iut[V],c.outOfBounds(_,z,_,z)||p.push([_,z]);if(_=e.invert(S),z=e.invert(D),L=m,R=a,!jv(_,z,h,d,i,a)&&!r3(e,_,z,d,h,L,s,o)&&!r3(e,_,z,d,h,d,s,null)){for(;R-L>=1;)N=(L+R)/2,r3(e,_,z,d,h,N,s,o)?R=N:L=N;L>m&&(l.x=_,l.y=z,m=L,g=!0)}}!g&&!n&&(x=Math.abs(b-C+w-M),_=(C+b)/2,z=(M+w)/2,x>=y&&!jv(_,z,h,d,i,a)&&!r3(e,_,z,d,h,d,s,null)&&(y=x,l.x=_,l.y=z,v=!0))}return!(!g&&!v||(_=h/2,z=d/2,s.setRange(e(l.x-_),e(l.y-z),e(l.x+_),e(l.y+z)),l.align="center",l.baseline="middle",0))}}};function Uut(e,t,n,r,i,a,s,o,c,l,u){if(!e.length)return e;const f=Math.max(r.length,i.length),d=function jut(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}(r,f),h=function qut(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=$ut[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}(i,f),p=function Gut(e){return e&&e.mark&&e.mark.marktype}(e[0].datum),m="group"===p&&e[0].datum.items[c].marktype,g="area"===m,v=function Wut(e,t,n,r){const i=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?"line"===e||"area"===e?a=>i(a.datum):"line"===t?a=>{const s=a.datum.items[r].items;return i(s.length?s["start"===n?0:s.length-1]:{x:NaN,y:NaN})}:a=>{const s=a.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}(p,m,o,c),y=null===l||l===1/0,C=g&&"naive"===u;let b=-1,M=-1;const w=e.map(D=>{const L=y?Hr.width(D,D.text):void 0;return b=Math.max(b,L),M=Math.max(M,D.fontSize),{datum:D,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(D),textWidth:L}});l=null===l||l===1/0?Math.max(b,M)+Math.max(...r):l;const _=function Aut(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),a=~~((t+2*n+r)/r),s=o=>~~((o+n)/r);return s.invert=o=>o*r-n,s.bitmap=()=>function Lut(e,t){const n=new Uint32Array(~~((e*t+E7)/E7));function r(a,s){n[a]|=s}function i(a,s){n[a]&=s}return{array:n,get:(a,s)=>{const o=s*e+a;return n[o>>>wo]&1<<(o&y2)},set:(a,s)=>{const o=s*e+a;r(o>>>wo,1<<(o&y2))},clear:(a,s)=>{const o=s*e+a;i(o>>>wo,~(1<<(o&y2)))},getRange:(a,s,o,c)=>{let u,f,d,h,l=c;for(;l>=s;--l)if(u=l*e+a,f=l*e+o,d=u>>>wo,h=f>>>wo,d===h){if(n[d]&n3[u&y2]&Qi[1+(f&y2)])return!0}else{if(n[d]&n3[u&y2]||n[h]&Qi[1+(f&y2)])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(a,s,o,c)=>{let l,u,f,d,h;for(;s<=c;++s)if(l=s*e+a,u=s*e+o,f=l>>>wo,d=u>>>wo,f===d)r(f,n3[l&y2]&Qi[1+(u&y2)]);else for(r(f,n3[l&y2]),r(d,Qi[1+(u&y2)]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(a,s,o,c)=>{let l,u,f,d,h;for(;s<=c;++s)if(l=s*e+a,u=s*e+o,f=l>>>wo,d=u>>>wo,f===d)i(f,Qi[l&y2]|n3[1+(u&y2)]);else for(i(f,Qi[l&y2]),i(d,n3[1+(u&y2)]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(a,s,o,c)=>a<0||s<0||c>=t||o>=e}}(i,a),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}(t[0],t[1],l);let z;if(!C){n&&w.sort((R,N)=>n(R.datum,N.datum));let D=!1;for(let R=0;R<h.length&&!D;++R)D=5===h[R]||d[R]<0;const L=(p&&s||g)&&e.map(R=>R.datum);z=a.length||L?function Vut(e,t,n,r,i){const a=e.width,s=e.height,o=r||i,c=Nc(a,s).getContext("2d"),l=Nc(a,s).getContext("2d"),u=o&&Nc(a,s).getContext("2d");n.forEach(z=>Uv(c,z,!1)),Uv(l,t,!1),o&&Uv(u,t,!0);const f=SL(c,a,s),d=SL(l,a,s),h=o&&SL(u,a,s),p=e.bitmap(),m=o&&e.bitmap();let g,v,y,C,b,M,w,_;for(v=0;v<s;++v)for(g=0;g<a;++g)b=v*a+g,M=f[b]&HL,_=d[b]&HL,w=o&&h[b]&HL,(M||w||_)&&(y=e(g),C=e(v),!i&&(M||_)&&p.set(y,C),o&&(M||w)&&m.set(y,C));return[p,m]}(_,L||[],a,D,g):function Eut(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}(_,s&&w)}const S=g?But[u](_,z,s,c):function Put(e,t,n,r){const i=e.width,a=e.height,s=t[0],o=t[1],c=r.length;return function(l){const u=l.boundary,f=l.datum.fontSize;if(u[2]<0||u[5]<0||u[0]>i||u[3]>a)return!1;let h,p,m,g,v,y,C,b,M,w,_,z,S,D,L,d=l.textWidth??0;for(let R=0;R<c;++R){if(h=(3&n[R])-1,p=(n[R]>>>2&3)-1,m=0===h&&0===p||r[R]<0,g=h&&p?Math.SQRT1_2:1,v=r[R]<0?-1:1,y=u[1+h]+r[R]*h*g,_=u[4+p]+v*f*p/2+r[R]*p*g,b=_-f/2,M=_+f/2,z=e(y),D=e(b),L=e(M),!d){if(!jce(z,z,D,L,s,o,0,0,0,0,0,m))continue;d=Hr.width(l.datum,l.datum.text)}if(w=y+v*d*h/2,y=w-d/2,C=w+d/2,z=e(y),S=e(C),jce(z,S,D,L,s,o,0,0,0,0,0,m))return l.x=h?h*v<0?C:y:w,l.y=p?p*v<0?M:b:_,l.align=Rut[h*v+1],l.baseline=Out[p*v+1],s.setRange(z,D,S,L),!0}return!1}}(_,z,h,d);return w.forEach(D=>D.opacity=+S(D)),w}const kL=["x","y","opacity","align","baseline"],qce=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function TL(e){Y.call(this,null,e)}function Gce(e,t){var i,a,s,o,c,l,n=[],r=function(u){return u(o)};if(null==t)n.push(e);else for(i={},a=0,s=e.length;a<s;++a)o=e[a],(l=i[c=t.map(r)])||(i[c]=l=[],l.dims=c,n.push(l)),l.push(o);return n}function IL(e){Y.call(this,null,e)}TL.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:qce},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:kL.length,default:kL}]},le(TL,Y,{transform(e,t){const r=e.modified();if(!(r||t.changed(t.ADD_REM)||function n(a){const s=e[a];return Je(s)&&t.modified(s.fields)}("sort")))return;(!e.size||2!==e.size.length)&&Z("Size parameter should be specified as a [width, height] array.");const i=e.as||kL;return Uut(t.materialize(t.SOURCE).source||[],e.size,e.sort,me(null==e.offset?1:e.offset),me(e.anchor||qce),e.avoidMarks||[],!1!==e.avoidBaseMark,e.lineAnchor||"end",e.markIndex||0,void 0===e.padding?0:e.padding,e.method||"naive").forEach(a=>{const s=a.datum;s[i[0]]=a.x,s[i[1]]=a.y,s[i[2]]=a.opacity,s[i[3]]=a.align,s[i[4]]=a.baseline}),t.reflow(r).modifies(i)}}),IL.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},le(IL,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=Gce(t.materialize(t.SOURCE).source,e.groupby),a=(e.groupby||[]).map(wn),s=a.length,o=e.as||[wn(e.x),wn(e.y)],c=[];i.forEach(l=>{Y1e(l,e.x,e.y,e.bandwidth||.3).forEach(u=>{const f={};for(let d=0;d<s;++d)f[a[d]]=l.dims[d];f[o[0]]=u[0],f[o[1]]=u[1],c.push(xt(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const FL={constant:AS,linear:NS,log:B1e,exp:U1e,pow:j1e,quad:kS,poly:q1e};function RL(e){Y.call(this,null,e)}RL.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(FL)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},le(RL,Y,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=Gce(t.materialize(t.SOURCE).source,e.groupby),a=(e.groupby||[]).map(wn),s=e.method||"linear",o=null==e.order?3:e.order,c=((e,t)=>"poly"===e?t:"quad"===e?2:1)(s,o),l=e.as||[wn(e.x),wn(e.y)],u=FL[s],f=[];let d=e.extent;Ne(FL,s)||Z("Invalid regression method: "+s),null!=d&&"log"===s&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=c)return void t.dataflow.warn("Skipping regression with more parameters than data points.");const m=u(h,e.x,e.y,o);if(e.params)return void f.push(xt({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));const g=d||Wa(h,e.x),v=y=>{const C={};for(let b=0;b<a.length;++b)C[a[b]]=h.dims[b];C[l[0]]=y[0],C[l[1]]=y[1],f.push(xt(C))};"linear"===s||"constant"===s?g.forEach(y=>v([y,m.predict(y)])):$m(m.predict,g,25,200).forEach(v)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const Zn=134217729;function V7(e,t,n,r,i){let a,s,o,c,l=t[0],u=r[0],f=0,d=0;u>l==u>-l?(a=l,l=t[++f]):(a=u,u=r[++d]);let h=0;if(f<e&&d<n)for(u>l==u>-l?(s=l+a,o=a-(s-l),l=t[++f]):(s=u+a,o=a-(s-u),u=r[++d]),a=s,0!==o&&(i[h++]=o);f<e&&d<n;)u>l==u>-l?(s=a+l,c=s-a,o=a-(s-c)+(l-c),l=t[++f]):(s=a+u,c=s-a,o=a-(s-c)+(u-c),u=r[++d]),a=s,0!==o&&(i[h++]=o);for(;f<e;)s=a+l,c=s-a,o=a-(s-c)+(l-c),l=t[++f],a=s,0!==o&&(i[h++]=o);for(;d<n;)s=a+u,c=s-a,o=a-(s-c)+(u-c),u=r[++d],a=s,0!==o&&(i[h++]=o);return(0!==a||0===h)&&(i[h++]=a),h}function ae(e){return new Float64Array(e)}const cu=ae(4),Wce=ae(8),Yce=ae(12),Xce=ae(16),C2=ae(4);function qv(e,t,n,r,i,a){const s=(t-a)*(n-i),o=(e-i)*(r-a),c=s-o,l=Math.abs(s+o);return Math.abs(c)>=33306690738754716e-32*l?c:-function eft(e,t,n,r,i,a,s){let o,c,l,u,f,d,h,p,m,g,v,y,C,b,M,w,_,z;const S=e-i,D=n-i,L=t-a,R=r-a;b=S*R,d=Zn*S,h=d-(d-S),p=S-h,d=Zn*R,m=d-(d-R),g=R-m,M=p*g-(b-h*m-p*m-h*g),w=L*D,d=Zn*L,h=d-(d-L),p=L-h,d=Zn*D,m=d-(d-D),g=D-m,_=p*g-(w-h*m-p*m-h*g),v=M-_,f=M-v,cu[0]=M-(v+f)+(f-_),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-w,f=C-v,cu[1]=C-(v+f)+(f-w),z=y+v,f=z-y,cu[2]=y-(z-f)+(v-f),cu[3]=z;let N=function Qut(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}(4,cu),x=22204460492503146e-32*s;if(N>=x||-N>=x||(f=e-S,o=e-(S+f)+(f-i),f=n-D,l=n-(D+f)+(f-i),f=t-L,c=t-(L+f)+(f-a),f=r-R,u=r-(R+f)+(f-a),0===o&&0===c&&0===l&&0===u)||(x=11093356479670487e-47*s+33306690738754706e-32*Math.abs(N),N+=S*u+R*o-(L*l+D*c),N>=x||-N>=x))return N;b=o*R,d=Zn*o,h=d-(d-o),p=o-h,d=Zn*R,m=d-(d-R),g=R-m,M=p*g-(b-h*m-p*m-h*g),w=c*D,d=Zn*c,h=d-(d-c),p=c-h,d=Zn*D,m=d-(d-D),g=D-m,_=p*g-(w-h*m-p*m-h*g),v=M-_,f=M-v,C2[0]=M-(v+f)+(f-_),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-w,f=C-v,C2[1]=C-(v+f)+(f-w),z=y+v,f=z-y,C2[2]=y-(z-f)+(v-f),C2[3]=z;const H=V7(4,cu,4,C2,Wce);b=S*u,d=Zn*S,h=d-(d-S),p=S-h,d=Zn*u,m=d-(d-u),g=u-m,M=p*g-(b-h*m-p*m-h*g),w=L*l,d=Zn*L,h=d-(d-L),p=L-h,d=Zn*l,m=d-(d-l),g=l-m,_=p*g-(w-h*m-p*m-h*g),v=M-_,f=M-v,C2[0]=M-(v+f)+(f-_),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-w,f=C-v,C2[1]=C-(v+f)+(f-w),z=y+v,f=z-y,C2[2]=y-(z-f)+(v-f),C2[3]=z;const V=V7(H,Wce,4,C2,Yce);b=o*u,d=Zn*o,h=d-(d-o),p=o-h,d=Zn*u,m=d-(d-u),g=u-m,M=p*g-(b-h*m-p*m-h*g),w=c*l,d=Zn*c,h=d-(d-c),p=c-h,d=Zn*l,m=d-(d-l),g=l-m,_=p*g-(w-h*m-p*m-h*g),v=M-_,f=M-v,C2[0]=M-(v+f)+(f-_),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-w,f=C-v,C2[1]=C-(v+f)+(f-w),z=y+v,f=z-y,C2[2]=y-(z-f)+(v-f),C2[3]=z;const T=V7(V,Yce,4,C2,Xce);return Xce[T-1]}(e,t,n,r,i,a,l)}ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(8),ae(8),ae(8),ae(4),ae(8),ae(8),ae(8),ae(12),ae(192),ae(192),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(8),ae(8),ae(8),ae(8),ae(8),ae(8),ae(8),ae(8),ae(8),ae(4),ae(4),ae(4),ae(8),ae(16),ae(16),ae(16),ae(32),ae(32),ae(48),ae(64),ae(1152),ae(1152),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(4),ae(24),ae(24),ae(24),ae(24),ae(24),ae(24),ae(24),ae(24),ae(24),ae(24),ae(1152),ae(1152),ae(1152),ae(1152),ae(1152),ae(2304),ae(2304),ae(3456),ae(5760),ae(8),ae(8),ae(8),ae(16),ae(24),ae(48),ae(48),ae(96),ae(192),ae(384),ae(384),ae(384),ae(768),ae(96),ae(96),ae(96),ae(1152);const g3e=Math.pow(2,-52),ty=new Uint32Array(512);class ny{static from(t,n=bft,r=Mft){const i=t.length,a=new Float64Array(2*i);for(let s=0;s<i;s++){const o=t[s];a[2*s]=n(o),a[2*s+1]=r(o)}return new ny(a)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:a}=this,s=t.length>>1;let o=1/0,c=1/0,l=-1/0,u=-1/0;for(let S=0;S<s;S++){const D=t[2*S],L=t[2*S+1];D<o&&(o=D),L<c&&(c=L),D>l&&(l=D),L>u&&(u=L),this._ids[S]=S}const f=(o+l)/2,d=(c+u)/2;let h,p,m;for(let S=0,D=1/0;S<s;S++){const L=uA(f,d,t[2*S],t[2*S+1]);L<D&&(h=S,D=L)}const g=t[2*h],v=t[2*h+1];for(let S=0,D=1/0;S<s;S++){if(S===h)continue;const L=uA(g,v,t[2*S],t[2*S+1]);L<D&&L>0&&(p=S,D=L)}let y=t[2*p],C=t[2*p+1],b=1/0;for(let S=0;S<s;S++){if(S===h||S===p)continue;const D=yft(g,v,y,C,t[2*S],t[2*S+1]);D<b&&(m=S,b=D)}let M=t[2*m],w=t[2*m+1];if(b===1/0){for(let L=0;L<s;L++)this._dists[L]=t[2*L]-t[0]||t[2*L+1]-t[1];gu(this._ids,this._dists,0,s-1);const S=new Uint32Array(s);let D=0;for(let L=0,R=-1/0;L<s;L++){const N=this._ids[L],x=this._dists[N];x>R&&(S[D++]=N,R=x)}return this.hull=S.subarray(0,D),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(qv(g,v,y,C,M,w)<0){const S=p,D=y,L=C;p=m,y=M,C=w,m=S,M=D,w=L}const _=function Cft(e,t,n,r,i,a){const s=n-e,o=r-t,c=i-e,l=a-t,u=s*s+o*o,f=c*c+l*l,d=.5/(s*l-o*c);return{x:e+(l*u-o*f)*d,y:t+(s*f-c*u)*d}}(g,v,y,C,M,w);this._cx=_.x,this._cy=_.y;for(let S=0;S<s;S++)this._dists[S]=uA(t[2*S],t[2*S+1],_.x,_.y);gu(this._ids,this._dists,0,s-1),this._hullStart=h;let z=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,a.fill(-1),a[this._hashKey(g,v)]=h,a[this._hashKey(y,C)]=p,a[this._hashKey(M,w)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let D,L,S=0;S<this._ids.length;S++){const R=this._ids[S],N=t[2*R],x=t[2*R+1];if(S>0&&Math.abs(N-D)<=g3e&&Math.abs(x-L)<=g3e||(D=N,L=x,R===h||R===p||R===m))continue;let H=0;for(let A=0,O=this._hashKey(N,x);A<this._hashSize&&(H=a[(O+A)%this._hashSize],-1===H||H===r[H]);A++);H=n[H];let T,V=H;for(;T=r[V],qv(N,x,t[2*V],t[2*V+1],t[2*T],t[2*T+1])>=0;)if(V=T,V===H){V=-1;break}if(-1===V)continue;let E=this._addTriangle(V,R,r[V],-1,-1,i[V]);i[R]=this._legalize(E+2),i[V]=E,z++;let k=r[V];for(;T=r[k],qv(N,x,t[2*k],t[2*k+1],t[2*T],t[2*T+1])<0;)E=this._addTriangle(k,R,T,i[R],-1,i[k]),i[R]=this._legalize(E+2),r[k]=k,z--,k=T;if(V===H)for(;T=n[V],qv(N,x,t[2*T],t[2*T+1],t[2*V],t[2*V+1])<0;)E=this._addTriangle(T,R,V,-1,i[V],i[T]),this._legalize(E+2),i[T]=E,r[V]=V,z--,V=T;this._hullStart=n[R]=V,r[V]=n[k]=R,r[R]=k,a[this._hashKey(N,x)]=R,a[this._hashKey(t[2*V],t[2*V+1])]=V}this.hull=new Uint32Array(z);for(let S=0,D=this._hullStart;S<z;S++)this.hull[S]=D,D=r[D];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function gft(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let a=0,s=0;for(;;){const o=r[t],c=t-t%3;if(s=c+(t+2)%3,-1===o){if(0===a)break;t=ty[--a];continue}const l=o-o%3,f=l+(o+2)%3,d=n[s],h=n[t],p=n[c+(t+1)%3],m=n[f];if(vft(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[o]=d;const v=r[f];if(-1===v){let C=this._hullStart;do{if(this._hullTri[C]===f){this._hullTri[C]=t;break}C=this._hullPrev[C]}while(C!==this._hullStart)}this._link(t,v),this._link(o,r[s]),this._link(s,f),a<ty.length&&(ty[a++]=l+(o+1)%3)}else{if(0===a)break;t=ty[--a]}}return s}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,a,s){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=r,this._link(o,i),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function uA(e,t,n,r){const i=e-n,a=t-r;return i*i+a*a}function vft(e,t,n,r,i,a,s,o){const c=e-s,l=t-o,u=n-s,f=r-o,d=i-s,h=a-o,m=u*u+f*f,g=d*d+h*h;return c*(f*g-m*h)-l*(u*g-m*d)+(c*c+l*l)*(u*h-f*d)<0}function yft(e,t,n,r,i,a){const s=n-e,o=r-t,c=i-e,l=a-t,u=s*s+o*o,f=c*c+l*l,d=.5/(s*l-o*c),h=(l*u-o*f)*d,p=(s*f-c*u)*d;return h*h+p*p}function gu(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const a=e[i],s=t[a];let o=i-1;for(;o>=n&&t[e[o]]>s;)e[o+1]=e[o--];e[o+1]=a}else{let a=n+1,s=r;N7(e,n+r>>1,a),t[e[n]]>t[e[r]]&&N7(e,n,r),t[e[a]]>t[e[r]]&&N7(e,a,r),t[e[n]]>t[e[a]]&&N7(e,n,a);const o=e[a],c=t[o];for(;;){do{a++}while(t[e[a]]<c);do{s--}while(t[e[s]]>c);if(s<a)break;N7(e,a,s)}e[n+1]=e[s],e[s]=o,r-a+1>=s-n?(gu(e,t,a,r),gu(e,t,n,s-1)):(gu(e,t,n,s-1),gu(e,t,a,r))}}function N7(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function bft(e){return e[0]}function Mft(e){return e[1]}class rl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){const i=(t=+t)+(r=+r),a=n=+n;if(r<0)throw new Error("negative radius");null===this._x1?this._+=`M${i},${a}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-a)>1e-6)&&(this._+="L"+i+","+a),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=a}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class fA{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class _ft{constructor(t,[n,r,i,a]=[0,0,960,500]){if(!((i=+i)>=(n=+n)&&(a=+a)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=i,this.xmin=n,this.ymax=a,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let y,C,m=0,g=0,v=r.length;m<v;m+=3,g+=2){const b=2*r[m],M=2*r[m+1],w=2*r[m+2],_=t[b],z=t[b+1],L=t[w],R=t[w+1],N=t[M]-_,x=t[M+1]-z,H=L-_,V=R-z,T=2*(N*V-x*H);if(Math.abs(T)<1e-9){if(void 0===a){a=s=0;for(const k of n)a+=t[2*k],s+=t[2*k+1];a/=n.length,s/=n.length}const E=1e9*Math.sign((a-_)*V-(s-z)*H);y=(_+L)/2-E*V,C=(z+R)/2+E*H}else{const E=1/T,k=N*N+x*x,A=H*H+V*V;y=_+(V*k-x*A)*E,C=z+(N*A-H*k)*E}o[g]=y,o[g+1]=C}let l,f,h,c=n[n.length-1],u=4*c,d=t[2*c],p=t[2*c+1];i.fill(0);for(let m=0;m<n.length;++m)c=n[m],l=u,f=d,h=p,u=4*c,d=t[2*c],p=t[2*c+1],i[l+2]=i[u]=h-p,i[l+3]=i[u+1]=d-f}render(t){const n=null==t?t=new rl:void 0,{delaunay:{halfedges:r,inedges:i,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let u=0,f=r.length;u<f;++u){const d=r[u];if(d<u)continue;const h=2*Math.floor(u/3),p=2*Math.floor(d/3);this._renderSegment(s[h],s[h+1],s[p],s[p+1],t)}let c,l=a[a.length-1];for(let u=0;u<a.length;++u){c=l,l=a[u];const f=2*Math.floor(i[l]/3),d=s[f],h=s[f+1],p=4*c,m=this._project(d,h,o[p+2],o[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=null==t?t=new rl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=null==n?n=new rl:void 0,i=this._clip(t);if(null===i||!i.length)return;n.moveTo(i[0],i[1]);let a=i.length;for(;i[0]===i[a-2]&&i[1]===i[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new fA;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,a){let s;const o=this._regioncode(t,n),c=this._regioncode(r,i);0===o&&0===c?(a.moveTo(t,n),a.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,o,c))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,n,r){return(n=+n)==n&&(r=+r)==r&&this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i)e:for(let a=0,s=n.length;a<s;a+=2)for(let o=0,c=i.length;o<c;o+=2)if(n[a]===i[o]&&n[a+1]===i[o+1]&&n[(a+2)%s]===i[(o+c-2)%c]&&n[(a+3)%s]===i[(o+c-1)%c]){yield r;break e}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:a}}=this,s=r[t];if(-1===s)return null;const o=[];let c=s;do{const l=Math.floor(c/3);if(o.push(n[2*l],n[2*l+1]),c=c%3==2?c-2:c+1,a[c]!==t)break;c=i[c]}while(c!==s&&-1!==c);return o}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(null===n)return null;const{vectors:r}=this,i=4*t;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let a,s,l,f,i=null,o=n[r-2],c=n[r-1],u=this._regioncode(o,c),d=0;for(let h=0;h<r;h+=2)if(a=o,s=c,o=n[h],c=n[h+1],l=u,u=this._regioncode(o,c),0===l&&0===u)f=d,d=0,i?i.push(o,c):i=[o,c];else{let p,m,g,v,y;if(0===l){if(null===(p=this._clipSegment(a,s,o,c,l,u)))continue;[m,g,v,y]=p}else{if(null===(p=this._clipSegment(o,c,a,s,u,l)))continue;[v,y,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(v,y),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(v,y):i=[v,y]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,a,s){const o=a<s;for(o&&([t,n,r,i,a,s]=[r,i,t,n,s,a]);;){if(0===a&&0===s)return o?[r,i,t,n]:[t,n,r,i];if(a&s)return null;let c,l,u=a||s;8&u?(c=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):4&u?(c=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):2&u?(l=n+(i-n)*(this.xmax-t)/(r-t),c=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),c=this.xmin),a?a=this._regioncode(t=c,n=l):s=this._regioncode(r=c,i=l)}}_clipInfinite(t,n,r,i,a,s){let c,o=Array.from(n);if((c=this._project(o[0],o[1],r,i))&&o.unshift(c[0],c[1]),(c=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(c[0],c[1]),o=this._clipFinite(t,o))for(let f,l=0,u=o.length,d=this._edgecode(o[u-2],o[u-1]);l<u;l+=2)f=d,d=this._edgecode(o[l],o[l+1]),f&&d&&(l=this._edge(t,f,d,o,l),u=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(t,n,r,i,a){for(;n!==r;){let s,o;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,o=this.ymin}(i[a]!==s||i[a+1]!==o)&&this.contains(t,s,o)&&(i.splice(a,0,s,o),a+=2)}return a}_project(t,n,r,i){let s,o,c,a=1/0;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<a&&(c=this.ymin,o=t+(a=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<a&&(c=this.ymax,o=t+(a=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<a&&(o=this.xmax,c=n+(a=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<a&&(o=this.xmin,c=n+(a=s)*i)}return[o,c]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}}const wft=2*Math.PI,vu=Math.pow;function xft(e){return e[0]}function zft(e){return e[1]}function Sft(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class dA{static from(t,n=xft,r=zft,i){return new dA("length"in t?function Eft(e,t,n,r){const i=e.length,a=new Float64Array(2*i);for(let s=0;s<i;++s){const o=e[s];a[2*s]=t.call(r,o,s,e),a[2*s+1]=n.call(r,o,s,e)}return a}(t,n,r,i):Float64Array.from(function*Vft(e,t,n,r){let i=0;for(const a of e)yield t.call(r,a,i,e),yield n.call(r,a,i,e),++i}(t,n,r,i)))}constructor(t){this._delaunator=new ny(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function Hft(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],a=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[a+1]-n[i+1])-(n[a]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const c=this.collinear[0],l=this.collinear[this.collinear.length-1],u=[n[2*c],n[2*c+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Sft(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new ny(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let c=0,l=r.length;c<l;++c){const u=a[c%3==2?c-2:c+1];(-1===r[c]||-1===s[u])&&(s[u]=c)}for(let c=0,l=i.length;c<l;++c)o[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,2===i.length&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new _ft(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:a,triangles:s,collinear:o}=this;if(o){const f=o.indexOf(t);return f>0&&(yield o[f-1]),void(f<o.length-1&&(yield o[f+1]))}const c=n[t];if(-1===c)return;let l=c,u=-1;do{if(yield u=s[l],l=l%3==2?l-2:l+1,s[l]!==t)return;if(l=a[l],-1===l){const f=r[(i[t]+1)%r.length];return void(f!==u&&(yield f))}}while(l!==c)}find(t,n,r=0){if((t=+t)!=t||(n=+n)!=n)return-1;const i=r;let a;for(;(a=this._step(r,t,n))>=0&&a!==r&&a!==i;)r=a;return a}_step(t,n,r){const{inedges:i,hull:a,_hullIndex:s,halfedges:o,triangles:c,points:l}=this;if(-1===i[t]||!l.length)return(t+1)%(l.length>>1);let u=t,f=vu(n-l[2*t],2)+vu(r-l[2*t+1],2);const d=i[t];let h=d;do{let p=c[h];const m=vu(n-l[2*p],2)+vu(r-l[2*p+1],2);if(m<f&&(f=m,u=p),h=h%3==2?h-2:h+1,c[h]!==t)break;if(h=o[h],-1===h){if(h=a[(s[t]+1)%a.length],h!==p&&vu(n-l[2*h],2)+vu(r-l[2*h+1],2)<f)return h;break}}while(h!==d);return u}render(t){const n=null==t?t=new rl:void 0,{points:r,halfedges:i,triangles:a}=this;for(let s=0,o=i.length;s<o;++s){const c=i[s];if(c<s)continue;const l=2*a[s],u=2*a[c];t.moveTo(r[l],r[l+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){void 0===n&&(!t||"function"!=typeof t.moveTo)&&(n=t,t=null),n=null==n?2:+n;const r=null==t?t=new rl:void 0,{points:i}=this;for(let a=0,s=i.length;a<s;a+=2){const o=i[a],c=i[a+1];t.moveTo(o+n,c),t.arc(o,c,n,0,wft)}return r&&r.value()}renderHull(t){const n=null==t?t=new rl:void 0,{hull:r,points:i}=this,a=2*r[0],s=r.length;t.moveTo(i[a],i[a+1]);for(let o=1;o<s;++o){const c=2*r[o];t.lineTo(i[c],i[c+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new fA;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=null==n?n=new rl:void 0,{points:i,triangles:a}=this,s=2*a[t*=3],o=2*a[t+1],c=2*a[t+2];return n.moveTo(i[s],i[s+1]),n.lineTo(i[o],i[o+1]),n.lineTo(i[c],i[c+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new fA;return this.renderTriangle(t,n),n.value()}}function hA(e){Y.call(this,null,e)}hA.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Dft=[-1e5,-1e5,1e5,1e5];function Lft(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Aft(e){return 2===e.length&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}le(hA,Y,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Dft;const a=this.value=dA.from(r,e.x,e.y).voronoi(i);for(let s=0,o=r.length;s<o;++s){const c=a.cellPolygon(s);r[s][n]=c&&!Aft(c)?Lft(c):null}return t.reflow(e.modified()).modifies(n)}});var pA=Math.PI/180,k7=64,ry=2048;function kft(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,(k7<<5)/a,ry/a);var u,f,d,h,p,s=0,o=0,c=0,l=n.length;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,u=i.measureText(t.text+"m").width*a,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*pA),g=Math.cos(t.rotate*pA),v=u*g,y=u*m,C=d*g,b=d*m;u=Math.max(Math.abs(v+b),Math.abs(v-b))+31>>5<<5,d=~~Math.max(Math.abs(y+C),Math.abs(y-C))}else u=u+31>>5<<5;if(d>c&&(c=d),s+u>=k7<<5&&(s=0,o+=c,c=0),o+d>=ry)break;i.translate((s+(u>>1))/a,(o+(d>>1))/a),t.rotate&&i.rotate(t.rotate*pA),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=u,t.height=d,t.xoff=s,t.yoff=o,t.x1=u>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=u}for(var M=i.getImageData(0,0,(k7<<5)/a,ry/a).data,w=[];--r>=0;)if((t=n[r]).hasText){for(f=(u=t.width)>>5,d=t.y1-t.y0,h=0;h<d*f;h++)w[h]=0;if(null==(s=t.xoff))return;o=t.yoff;var _=0,z=-1;for(p=0;p<d;p++){for(h=0;h<u;h++){var D=M[(o+p)*(k7<<5)+(s+h)<<2]?1<<31-h%32:0;w[f*p+(h>>5)]|=D,_|=D}_?z=p:(t.y0++,d--,p--,o++)}t.y1=t.y0+z,t.sprite=w.slice(0,(t.y1-t.y0)*f)}}}function Tft(e,t,n){for(var u,r=e.sprite,i=e.width>>5,a=e.x-(i<<4),s=127&a,o=32-s,c=e.y1-e.y0,l=(e.y+e.y0)*(n>>=5)+(a>>5),f=0;f<c;f++){u=0;for(var d=0;d<=i;d++)if((u<<o|(d<i?(u=r[f*i+d])>>>s:0))&t[l+d])return!0;l+=n}return!1}function Ift(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Fft(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function y3e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function il(e){return"function"==typeof e?e:function(){return e}}var Pft={archimedean:y3e,rectangular:function Rft(e){var n=4*e[0]/e[1],r=0,i=0;return function(a){var s=a<0?-1:1;switch(Math.sqrt(1+4*s*a)-s&3){case 0:r+=n;break;case 1:i+=4;break;case 2:r-=n;break;default:i-=4}return[r,i]}}};const C3e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],$ft=["text","font","rotate","fontSize","fontStyle","fontWeight"];function mA(e){Y.call(this,function Nft(){var t,n,r,i,a,s,o,e=[256,256],c=y3e,l=[],u=Math.random,f={};function h(p,m,g){for(var _,z,S,v=m.x,y=m.y,C=Math.sqrt(e[0]*e[0]+e[1]*e[1]),b=c(e),M=u()<.5?1:-1,w=-M;(_=b(w+=M))&&(z=~~_[0],S=~~_[1],!(Math.min(Math.abs(z),Math.abs(S))>=C));)if(m.x=v+z,m.y=y+S,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!Tft(m,p,e[0]))&&(!g||Fft(m,g))){for(var E,D=m.sprite,L=m.width>>5,R=e[0]>>5,N=m.x-(L<<4),x=127&N,H=32-x,V=m.y1-m.y0,T=(m.y+m.y0)*R+(N>>5),k=0;k<V;k++){E=0;for(var A=0;A<=L;A++)p[T+A]|=E<<H|(A<L?(E=D[k*L+A])>>>x:0);T+=R}return m.sprite=null,!0}return!1}return f.layout=function(){for(var p=function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(k7<<5)/m,p.height=ry/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}(Nc()),m=function Oft(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}((e[0]>>5)*e[1]),g=null,v=l.length,y=-1,C=[],b=l.map(w=>({text:t(w),font:n(w),style:i(w),weight:a(w),rotate:s(w),size:~~(r(w)+1e-14),padding:o(w),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:w})).sort((w,_)=>_.size-w.size);++y<v;){var M=b[y];M.x=e[0]*(u()+.5)>>1,M.y=e[1]*(u()+.5)>>1,kft(p,M,b,y),M.hasText&&h(m,M,g)&&(C.push(M),g?Ift(g,M):g=[{x:M.x+M.x0,y:M.y+M.y0},{x:M.x+M.x1,y:M.y+M.y1}],M.x-=e[0]>>1,M.y-=e[1]>>1)}return C},f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=il(p),f):n},f.fontStyle=function(p){return arguments.length?(i=il(p),f):i},f.fontWeight=function(p){return arguments.length?(a=il(p),f):a},f.rotate=function(p){return arguments.length?(s=il(p),f):s},f.text=function(p){return arguments.length?(t=il(p),f):t},f.spiral=function(p){return arguments.length?(c=Pft[p]||p,f):c},f.fontSize=function(p){return arguments.length?(r=il(p),f):r},f.padding=function(p){return arguments.length?(o=il(p),f):o},f.random=function(p){return arguments.length?(u=p,f):u},f}(),e)}mA.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:C3e}]},le(mA,Y,{transform(e,t){e.size&&(!e.size[0]||!e.size[1])&&Z("Wordcloud size dimensions must be non-zero.");const r=e.modified();if(!(r||t.changed(t.ADD_REM)||$ft.some(function n(p){const m=e[p];return Je(m)&&t.modified(m.fields)})))return;const i=t.materialize(t.SOURCE).source,a=this.value,s=e.as||C3e;let c,o=e.fontSize||14;if(Je(o)?c=e.fontSizeRange:o=P1(o),c){const p=o,m=yt("sqrt")().domain(Wa(i,p)).range(c);o=g=>m(p(g))}i.forEach(p=>{p[s[0]]=NaN,p[s[1]]=NaN,p[s[3]]=0});const l=a.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(o).random(ni).layout(),u=a.size(),f=u[0]>>1,d=u[1]>>1,h=l.length;for(let m,g,p=0;p<h;++p)m=l[p],g=m.datum,g[s[0]]=m.x+f,g[s[1]]=m.y+d,g[s[2]]=m.font,g[s[3]]=m.size,g[s[4]]=m.style,g[s[5]]=m.weight,g[s[6]]=m.rotate;return t.reflow(r).modifies(s)}});const Uft=e=>new Uint8Array(e),jft=e=>new Uint16Array(e),T7=e=>new Uint32Array(e);function iy(e,t,n){const r=(t<257?Uft:t<65537?jft:T7)(e);return n&&r.set(n),r}function b3e(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,a){const s=this,o=s.bisect(s.range,i.value),c=i.index,l=o[0],u=o[1],f=c.length;let d;for(d=0;d<l;++d)a[c[d]]|=r;for(d=u;d<f;++d)a[c[d]]|=r;return s}}}function M3e(){let e=T7(0),t=[],n=0;return{insert:function r(o,c,l){if(!c.length)return[];const u=n,f=c.length,d=T7(f);let p,m,g,h=Array(f);for(g=0;g<f;++g)h[g]=o(c[g]),d[g]=g;if(h=function Wft(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],a=e[r];return i<a?-1:i>a?1:0}),function Bft(e,t){return Array.from(t,n=>e[n])}(e,t)}(h,d),u)p=t,m=e,t=Array(u+f),e=T7(u+f),function Yft(e,t,n,r,i,a,s,o,c){let f,l=0,u=0;for(f=0;l<r&&u<s;++f)t[l]<i[u]?(o[f]=t[l],c[f]=n[l++]):(o[f]=i[u],c[f]=a[u++]+e);for(;l<r;++l,++f)o[f]=t[l],c[f]=n[l];for(;u<s;++u,++f)o[f]=i[u],c[f]=a[u]+e}(l,p,m,u,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=u+f,{index:d,value:h}},remove:function i(o,c){const l=n;let u,f,d;for(f=0;!c[e[f]]&&f<l;++f);for(d=f;f<l;++f)c[u=e[f]]||(e[d]=u,t[d]=t[f],++d);n=l-o},bisect:function s(o,c){let l;return c?l=c.length:(c=t,l=n),[Wat(c,o[0],0,l),eg(c,o[1],0,l)]},reindex:function a(o){for(let c=0,l=n;c<l;++c)e[c]=o[e[c]]},index:()=>e,size:()=>n}}function gA(e){Y.call(this,function qft(){let e=8,t=[],n=T7(0),r=iy(0,e),i=iy(0,e);return{data:()=>t,seen:()=>n=function Gft(e,t,n){return e.length>=t?e:((n=n||new e.constructor(t)).set(e),n)}(n,t.length),add(a){for(let l,s=0,o=t.length,c=a.length;s<c;++s)l=a[s],l._index=o++,t.push(l)},remove(a,s){const o=t.length,c=Array(o-a),l=t;let u,f,d;for(f=0;!s[f]&&f<o;++f)c[f]=t[f],l[f]=f;for(d=f;f<o;++f)u=t[f],s[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],c[d]=u,u._index=d++),r[f]=0;return t=c,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:a=>i[a]=r[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,s){r[a]|=s},clear(a,s){r[a]&=~s},resize(a,s){(a>r.length||s>e)&&(e=Math.max(s,e),r=iy(a,e,r),i=iy(a,e))}}}(),e),this._indices=null,this._dims=null}function vA(e){Y.call(this,null,e)}gA.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},le(gA,Y,{transform(e,t){return this._dims?e.modified("fields")||e.fields.some(r=>t.modified(r.fields))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},a=this._dims=[],s=r.length;let c,l,o=0;for(;o<s;++o)c=n[o].fname,l=i[c]||(i[c]=M3e()),a.push(b3e(l,o,r[o]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,a=this._indices,s=this._dims,o=this.value,c=o.curr(),l=o.prev(),u=o.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,v,y,C,b,M,w,_;if(l.set(c),t.rem.length&&(C=this.remove(e,t,n)),t.add.length&&o.add(t.add),t.mod.length)for(b={},y=t.mod,M=0,w=y.length;M<w;++M)b[y[M]._index]=1;for(M=0;M<h;++M)_=r[M],(!s[M]||e.modified("fields",M)||t.modified(_.fields))&&(v=_.fname,(m=p[v])||(a[v]=g=M3e(),p[v]=m=g.insert(_,t.source,0)),s[M]=b3e(g,M,i[M]).onAdd(m,c));for(M=0,w=o.data().length;M<w;++M)C[M]||(l[M]!==c[M]?f.push(M):b[M]&&c[M]!==u&&d.push(M));return o.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,a=this._dims,s=this._indices,o=e.fields,c={},l=n.add,u=i.size()+r.length,f=a.length;let h,p,m,d=i.size();i.resize(u,f),i.add(r);const g=i.curr(),v=i.prev(),y=i.all();for(h=0;h<f;++h)p=o[h].fname,m=c[p]||(c[p]=s[p].insert(o[h],r,d)),a[h].onAdd(m,g);for(;d<u;++d)v[d]=y,g[d]!==y&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),a=r.all(),s=e.mod;let o,c,l;for(o=0,c=s.length;o<c;++o)l=s[o]._index,i[l]!==a&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,a=i.curr(),s=i.prev(),o=i.all(),c={},l=n.rem,u=t.rem;let f,d,h,p;for(f=0,d=u.length;f<d;++f)h=u[f]._index,c[h]=1,s[h]=p=a[h],a[h]=o,p!==o&&l.push(h);for(h in r)r[h].remove(d,c);return this.reindex(t,d,c),c},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const a=i.remove(t,n);for(const s in r)r[s].reindex(a)})},update(e,t,n){const r=this._dims,i=e.query,a=t.stamp,s=r.length;let c,l,o=0;for(n.filters=0,l=0;l<s;++l)e.modified("query",l)&&(c=l,++o);if(1===o)o=r[c].one,this.incrementOne(r[c],i[c],n.add,n.rem);else for(l=0,o=0;l<s;++l)e.modified("query",l)&&(o|=r[l].one,this.incrementAll(r[l],i[l],a,n.add),n.rem=n.add);return o},incrementAll(e,t,n,r){const i=this.value,a=i.seen(),s=i.curr(),o=i.prev(),c=e.index(),l=e.bisect(e.range),u=e.bisect(t),f=u[0],d=u[1],h=l[0],p=l[1],m=e.one;let g,v,y;if(f<h)for(g=f,v=Math.min(h,d);g<v;++g)y=c[g],a[y]!==n&&(o[y]=s[y],a[y]=n,r.push(y)),s[y]^=m;else if(f>h)for(g=h,v=Math.min(f,p);g<v;++g)y=c[g],a[y]!==n&&(o[y]=s[y],a[y]=n,r.push(y)),s[y]^=m;if(d>p)for(g=Math.max(f,p),v=d;g<v;++g)y=c[g],a[y]!==n&&(o[y]=s[y],a[y]=n,r.push(y)),s[y]^=m;else if(d<p)for(g=Math.max(h,d),v=p;g<v;++g)y=c[g],a[y]!==n&&(o[y]=s[y],a[y]=n,r.push(y)),s[y]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const a=this.value.curr(),s=e.index(),o=e.bisect(e.range),c=e.bisect(t),l=c[0],u=c[1],f=o[0],d=o[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,u);p<m;++p)g=s[p],a[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=s[p],a[g]^=h,r.push(g);if(u>d)for(p=Math.max(l,d),m=u;p<m;++p)g=s[p],a[g]^=h,n.push(g);else if(u<d)for(p=Math.max(f,u),m=d;p<m;++p)g=s[p],a[g]^=h,r.push(g);e.range=t.slice()}}),vA.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},le(vA,Y,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const a=t.fork(t.ALL),s=r.data(),o=r.curr(),c=r.prev(),l=u=>o[u]&n?null:s[u];return a.filter(a.MOD,l),i&i-1?(a.filter(a.ADD,u=>{const f=o[u]&n;return!f&&f^c[u]&n?s[u]:null}),a.filter(a.REM,u=>{const f=o[u]&n;return!f||f^f^c[u]&n?null:s[u]})):(a.filter(a.ADD,l),a.filter(a.REM,u=>(o[u]&n)===i?s[u]:null)),a.filter(a.SOURCE,u=>l(u._index))}});const al="Literal",_3e="CallExpression";function Ji(e){this.type=e}Ji.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=function a8t(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case _3e:return[e.callee].concat(e.arguments);case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];default:return[]}}(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};var ds,Se,Q,W1,Rt,ay=1,I7=2,sl=3,l3=4,sy=5,ol=6,Q2=7,F7=8;(ds={})[ay]="Boolean",ds[I7]="<end>",ds[sl]="Identifier",ds[l3]="Keyword",ds[sy]="Null",ds[ol]="Numeric",ds[Q2]="Punctuator",ds[F7]="String",ds[9]="RegularExpression";var o8t="ArrayExpression",c8t="BinaryExpression",l8t="CallExpression",u8t="ConditionalExpression",w3e="Identifier",f8t="Literal",d8t="LogicalExpression",h8t="MemberExpression",p8t="ObjectExpression",m8t="Property",g8t="UnaryExpression",r1="Unexpected token %0",v8t="Unexpected number",y8t="Unexpected string",C8t="Unexpected identifier",b8t="Unexpected reserved word",M8t="Unexpected end of input",yA="Invalid regular expression",CA="Invalid regular expression: missing /",x3e="Octal literals are not allowed in strict mode.",_8t="Duplicate data property in object literal not allowed in strict mode",E1="ILLEGAL",R7="Disabled.",w8t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),x8t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function oy(e,t){if(!e)throw new Error("ASSERT: "+t)}function xo(e){return e>=48&&e<=57}function bA(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function O7(e){return"01234567".indexOf(e)>=0}function z8t(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function P7(e){return 10===e||13===e||8232===e||8233===e}function $7(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&w8t.test(String.fromCharCode(e))}function cy(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&x8t.test(String.fromCharCode(e))}const H8t={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function z3e(){for(;Q<W1;){const e=Se.charCodeAt(Q);if(!z8t(e)&&!P7(e))break;++Q}}function MA(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)Q<W1&&bA(Se[Q])?(r=Se[Q++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):Ct({},r1,E1);return String.fromCharCode(i)}function S8t(){var e,t;for(t=0,"}"===(e=Se[Q])&&Ct({},r1,E1);Q<W1&&bA(e=Se[Q++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&Ct({},r1,E1),t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}function H3e(){var e,t;for(e=Se.charCodeAt(Q++),t=String.fromCharCode(e),92===e&&(117!==Se.charCodeAt(Q)&&Ct({},r1,E1),++Q,(!(e=MA("u"))||"\\"===e||!$7(e.charCodeAt(0)))&&Ct({},r1,E1),t=e);Q<W1&&cy(e=Se.charCodeAt(Q));)++Q,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==Se.charCodeAt(Q)&&Ct({},r1,E1),++Q,(!(e=MA("u"))||"\\"===e||!cy(e.charCodeAt(0)))&&Ct({},r1,E1),t+=e);return t}function _A(){var n,i,a,s,e=Q,t=Se.charCodeAt(Q),r=Se[Q];switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Q,{type:Q2,value:String.fromCharCode(t),start:e,end:Q};default:if(61===(n=Se.charCodeAt(Q+1)))switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Q+=2,{type:Q2,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Q};case 33:case 61:return 61===Se.charCodeAt(Q+=2)&&++Q,{type:Q2,value:Se.slice(e,Q),start:e,end:Q}}}return">>>="===(s=Se.substr(Q,4))?{type:Q2,value:s,start:e,end:Q+=4}:">>>"===(a=s.substr(0,3))||"<<="===a||">>="===a?{type:Q2,value:a,start:e,end:Q+=3}:r===(i=a.substr(0,2))[1]&&"+-<>&|".indexOf(r)>=0||"=>"===i?{type:Q2,value:i,start:e,end:Q+=2}:("//"===i&&Ct({},r1,E1),"<>=!+-*%&|^/".indexOf(r)>=0?(++Q,{type:Q2,value:r,start:e,end:Q}):void Ct({},r1,E1))}function S3e(){var e,t,n;if(oy(xo((n=Se[Q]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=Q,e="","."!==n){if(e=Se[Q++],n=Se[Q],"0"===e){if("x"===n||"X"===n)return++Q,function D8t(e){let t="";for(;Q<W1&&bA(Se[Q]);)t+=Se[Q++];return 0===t.length&&Ct({},r1,E1),$7(Se.charCodeAt(Q))&&Ct({},r1,E1),{type:ol,value:parseInt("0x"+t,16),start:e,end:Q}}(t);if(O7(n))return function L8t(e){let t="0"+Se[Q++];for(;Q<W1&&O7(Se[Q]);)t+=Se[Q++];return($7(Se.charCodeAt(Q))||xo(Se.charCodeAt(Q)))&&Ct({},r1,E1),{type:ol,value:parseInt(t,8),octal:!0,start:e,end:Q}}(t);n&&xo(n.charCodeAt(0))&&Ct({},r1,E1)}for(;xo(Se.charCodeAt(Q));)e+=Se[Q++];n=Se[Q]}if("."===n){for(e+=Se[Q++];xo(Se.charCodeAt(Q));)e+=Se[Q++];n=Se[Q]}if("e"===n||"E"===n)if(e+=Se[Q++],("+"===(n=Se[Q])||"-"===n)&&(e+=Se[Q++]),xo(Se.charCodeAt(Q)))for(;xo(Se.charCodeAt(Q));)e+=Se[Q++];else Ct({},r1,E1);return $7(Se.charCodeAt(Q))&&Ct({},r1,E1),{type:ol,value:parseFloat(e),start:t,end:Q}}function E3e(){if(z3e(),Q>=W1)return{type:I7,start:Q,end:Q};const e=Se.charCodeAt(Q);return $7(e)?function V8t(){var e,t;return e=Q,t=92===Se.charCodeAt(Q)?H3e():function E8t(){var e,t;for(e=Q++;Q<W1;){if(92===(t=Se.charCodeAt(Q)))return Q=e,H3e();if(!cy(t))break;++Q}return Se.slice(e,Q)}(),{type:1===t.length?sl:H8t.hasOwnProperty(t)?l3:"null"===t?sy:"true"===t||"false"===t?ay:sl,value:t,start:e,end:Q}}():40===e||41===e||59===e?_A():39===e||34===e?function A8t(){var t,n,r,i,e="",a=!1;for(oy("'"===(t=Se[Q])||'"'===t,"String literal must starts with a quote"),n=Q,++Q;Q<W1;){if((r=Se[Q++])===t){t="";break}if("\\"===r)if((r=Se[Q++])&&P7(r.charCodeAt(0)))"\r"===r&&"\n"===Se[Q]&&++Q;else switch(r){case"u":case"x":"{"===Se[Q]?(++Q,e+=S8t()):e+=MA(r);break;case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:O7(r)?(0!==(i="01234567".indexOf(r))&&(a=!0),Q<W1&&O7(Se[Q])&&(a=!0,i=8*i+"01234567".indexOf(Se[Q++]),"0123".indexOf(r)>=0&&Q<W1&&O7(Se[Q])&&(i=8*i+"01234567".indexOf(Se[Q++]))),e+=String.fromCharCode(i)):e+=r}else{if(P7(r.charCodeAt(0)))break;e+=r}}return""!==t&&Ct({},r1,E1),{type:F7,value:e,octal:a,start:n,end:Q}}():46===e?xo(Se.charCodeAt(Q+1))?S3e():_A():xo(e)?S3e():_A()}function Z2(){const e=Rt;return Q=e.end,Rt=E3e(),Q=e.end,e}function V3e(){const e=Q;Rt=E3e(),Q=e}function D3e(e,t,n){const r=new Ji("||"===e||"&&"===e?d8t:c8t);return r.operator=e,r.left=t,r.right=n,r}function O8t(e,t){const n=new Ji(l8t);return n.callee=e,n.arguments=t,n}function wA(e){const t=new Ji(w3e);return t.name=e,t}function B7(e){const t=new Ji(f8t);return t.value=e.value,t.raw=Se.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function L3e(e,t,n){const r=new Ji(h8t);return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function A3e(e,t,n){const r=new Ji(m8t);return r.key=t,r.value=n,r.kind=e,r}function Ct(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(a,s)=>(oy(s<r.length,"Message reference must be in range"),r[s]));throw(n=new Error(i)).index=Q,n.description=i,n}function ly(e){e.type===I7&&Ct(e,M8t),e.type===ol&&Ct(e,v8t),e.type===F7&&Ct(e,y8t),e.type===sl&&Ct(e,C8t),e.type===l3&&Ct(e,b8t),Ct(e,r1,e.value)}function Y1(e){const t=Z2();(t.type!==Q2||t.value!==e)&&ly(t)}function rn(e){return Rt.type===Q2&&Rt.value===e}function xA(e){return Rt.type===l3&&Rt.value===e}function N3e(){Q=Rt.start;const e=Z2();return e.type===F7||e.type===ol?(e.octal&&Ct(e,x3e),B7(e)):wA(e.value)}function j8t(){var e,t,n;return Q=Rt.start,(e=Rt).type===sl?(n=N3e(),Y1(":"),A3e("init",n,cl())):e.type!==I7&&e.type!==Q2?(t=N3e(),Y1(":"),A3e("init",t,cl())):void ly(e)}const W8t={if:1};function Y8t(){var e,t,n;if(rn("("))return function G8t(){Y1("(");const e=zA();return Y1(")"),e}();if(rn("["))return function U8t(){const e=[];for(Q=Rt.start,Y1("[");!rn("]");)rn(",")?(Z2(),e.push(null)):(e.push(cl()),rn("]")||Y1(","));return Z2(),function R8t(e){const t=new Ji(o8t);return t.elements=e,t}(e)}();if(rn("{"))return function q8t(){var t,r,e=[],i={},a=String;for(Q=Rt.start,Y1("{");!rn("}");)r="$"+((t=j8t()).key.type===w3e?t.key.name:a(t.key.value)),Object.prototype.hasOwnProperty.call(i,r)?Ct({},_8t):i[r]=!0,e.push(t),rn("}")||Y1(",");return Y1("}"),function $8t(e){const t=new Ji(p8t);return t.properties=e,t}(e)}();if(Q=Rt.start,(e=Rt.type)===sl||W8t[Rt.value])n=wA(Z2().value);else if(e===F7||e===ol)Rt.octal&&Ct(Rt,x3e),n=B7(Z2());else{if(e===l3)throw new Error(R7);e===ay?((t=Z2()).value="true"===t.value,n=B7(t)):e===sy?((t=Z2()).value=null,n=B7(t)):rn("/")||rn("/=")?(n=B7(function I8t(){var e,t,n,r;return Rt=null,z3e(),e=Q,t=function k8t(){var e,t,n,r;for(oy("/"===(e=Se[Q]),"Regular expression literal must start with a slash"),t=Se[Q++],n=!1,r=!1;Q<W1;)if(t+=e=Se[Q++],"\\"===e)P7((e=Se[Q++]).charCodeAt(0))&&Ct({},CA),t+=e;else if(P7(e.charCodeAt(0)))Ct({},CA);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||Ct({},CA),{value:t.substr(1,t.length-2),literal:t}}(),n=function T8t(){var e,t,n;for(t="",n="";Q<W1&&cy((e=Se[Q]).charCodeAt(0));)++Q,"\\"===e&&Q<W1?Ct({},r1,E1):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ct({},yA,n),{value:n,literal:t}}(),r=function N8t(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Ct({},yA)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ct({},yA)}try{return new RegExp(e,t)}catch{return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Q}}()),V3e()):ly(Z2())}return n}function X8t(){const e=[];if(Y1("("),!rn(")"))for(;Q<W1&&(e.push(cl()),!rn(")"));)Y1(",");return Y1(")"),e}function Q8t(){Q=Rt.start;const e=Z2();return function F8t(e){return e.type===sl||e.type===l3||e.type===ay||e.type===sy}(e)||ly(e),wA(e.value)}function K8t(){Y1("[");const e=zA();return Y1("]"),e}function k3e(){const e=function J8t(){var e;for(e=Y8t();;)if(rn("."))Y1("."),e=L3e(".",e,Q8t());else if(rn("("))e=O8t(e,X8t());else{if(!rn("["))break;e=L3e("[",e,K8t())}return e}();if(Rt.type===Q2&&(rn("++")||rn("--")))throw new Error(R7);return e}function uy(){var e,t;if(Rt.type!==Q2&&Rt.type!==l3)t=k3e();else{if(rn("++")||rn("--"))throw new Error(R7);if(rn("+")||rn("-")||rn("~")||rn("!"))e=Z2(),t=uy(),t=function B8t(e,t){const n=new Ji(g8t);return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(xA("delete")||xA("void")||xA("typeof"))throw new Error(R7);t=k3e()}}return t}function T3e(e){let t=0;if(e.type!==Q2&&e.type!==l3)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function cl(){var e,t;return e=function e5t(){var e,t,n,r,i,a,s,o,c,l;if(e=Rt,c=uy(),0===(i=T3e(r=Rt)))return c;for(r.prec=i,Z2(),t=[e,Rt],a=[c,r,s=uy()];(i=T3e(Rt))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)s=a.pop(),o=a.pop().value,c=a.pop(),t.pop(),n=D3e(o,c,s),a.push(n);(r=Z2()).prec=i,a.push(r),t.push(Rt),n=uy(),a.push(n)}for(n=a[l=a.length-1],t.pop();l>1;)t.pop(),n=D3e(a[l-1].value,a[l-2],n),l-=2;return n}(),rn("?")&&(Z2(),t=cl(),Y1(":"),e=function P8t(e,t,n){const r=new Ji(u8t);return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,cl())),e}function zA(){const e=cl();if(rn(","))throw new Error(R7);return e}function HA(e){Q=0,W1=(Se=e).length,Rt=null,V3e();const t=zA();if(Rt.type!==I7)throw new Error("Unexpect token after expression.");return t}var I3e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function F3e(e){function n(s,o,c){return l=>function t(s,o,c,l){let u=e(o[0]);return c&&(u=c+"("+u+")",0===c.lastIndexOf("new ",0)&&(u="("+u+")")),u+"."+s+(l<0?"":0===l?"()":"("+o.slice(1).map(e).join(",")+")")}(s,l,o,c)}const r="new Date",i="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&Z("Missing arguments to clamp function."),s.length>3&&Z("Too many arguments to clamp function.");const o=s.map(e);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:a,test:n("test",a),if:function(s){s.length<3&&Z("Missing arguments to if function."),s.length>3&&Z("Too many arguments to if function.");const o=s.map(e);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function R3e(e){const t=(e=e||{}).allowed?Oi(e.allowed):{},n=e.forbidden?Oi(e.forbidden):{},r=e.constants||I3e,i=(e.functions||F3e)(f),a=e.globalvar,s=e.fieldvar,o=Je(a)?a:p=>`${a}["${p}"]`;let c={},l={},u=0;function f(p){if(ge(p))return p;const m=d[p.type];return null==m&&Z("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return u>0?m:Ne(n,m)?Z("Illegal identifier: "+m):Ne(r,m)?r[m]:Ne(t,m)?m:(c[m]=1,o(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(u+=1);const v=f(p.property);return g===s&&(l[function t5t(e){const t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(v)]=1),m&&(u-=1),g+(m?"."+v:"["+v+"]")},CallExpression:p=>{"Identifier"!==p.callee.type&&Z("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,v=Ne(i,m)&&i[m];return v||Z("Unrecognized function: "+m),Je(v)?v(g):v+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{u+=1;const m=f(p.key);return u-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(c),fields:Object.keys(l)};return c={},l={},m}return h.functions=i,h.constants=r,h}var O3e,P3e,SA,EA,VA,fy=new H1,dy=new H1,hs={point:S1,lineStart:S1,lineEnd:S1,polygonStart:function(){fy=new H1,hs.lineStart=n5t,hs.lineEnd=r5t},polygonEnd:function(){var e=+fy;dy.add(e<0?h2+e:e),this.lineStart=this.lineEnd=this.point=S1},sphere:function(){dy.add(h2)}};function n5t(){hs.point=i5t}function r5t(){$3e(O3e,P3e)}function i5t(e,t){hs.point=$3e,O3e=e,P3e=t,SA=e*=nt,EA=Oe(t=(t*=nt)/2+ov),VA=Le(t)}function $3e(e,t){var n=(e*=nt)-SA,r=n>=0?1:-1,i=r*n,a=Oe(t=(t*=nt)/2+ov),s=Le(t),o=VA*s,c=EA*a+o*Oe(i),l=o*r*Le(i);fy.add(ci(l,c)),SA=e,EA=a,VA=s}var vn,K2,zn,Tr,ll,B3e,U3e,yu,U7,u3,zo,Ho={point:DA,lineStart:q3e,lineEnd:G3e,polygonStart:function(){Ho.point=W3e,Ho.lineStart=s5t,Ho.lineEnd=o5t,U7=new H1,hs.polygonStart()},polygonEnd:function(){hs.polygonEnd(),Ho.point=DA,Ho.lineStart=q3e,Ho.lineEnd=G3e,fy<0?(vn=-(zn=180),K2=-(Tr=90)):U7>Ie?Tr=90:U7<-Ie&&(K2=-90),zo[0]=vn,zo[1]=zn},sphere:function(){vn=-(zn=180),K2=-(Tr=90)}};function DA(e,t){u3.push(zo=[vn=e,zn=e]),t<K2&&(K2=t),t>Tr&&(Tr=t)}function j3e(e,t){var n=G4([e*nt,t*nt]);if(yu){var r=nu(yu,n),a=nu([r[1],-r[0],0],r);_v(a),a=Cv(a);var l,s=e-ll,o=s>0?1:-1,c=a[0]*Ln*o,u=ut(s)>180;u^(o*ll<c&&c<o*e)?(l=a[1]*Ln)>Tr&&(Tr=l):u^(o*ll<(c=(c+360)%360-180)&&c<o*e)?(l=-a[1]*Ln)<K2&&(K2=l):(t<K2&&(K2=t),t>Tr&&(Tr=t)),u?e<ll?Ir(vn,e)>Ir(vn,zn)&&(zn=e):Ir(e,zn)>Ir(vn,zn)&&(vn=e):zn>=vn?(e<vn&&(vn=e),e>zn&&(zn=e)):e>ll?Ir(vn,e)>Ir(vn,zn)&&(zn=e):Ir(e,zn)>Ir(vn,zn)&&(vn=e)}else u3.push(zo=[vn=e,zn=e]);t<K2&&(K2=t),t>Tr&&(Tr=t),yu=n,ll=e}function q3e(){Ho.point=j3e}function G3e(){zo[0]=vn,zo[1]=zn,Ho.point=DA,yu=null}function W3e(e,t){if(yu){var n=e-ll;U7.add(ut(n)>180?n+(n>0?360:-360):n)}else B3e=e,U3e=t;hs.point(e,t),j3e(e,t)}function s5t(){hs.lineStart()}function o5t(){W3e(B3e,U3e),hs.lineEnd(),ut(U7)>Ie&&(vn=-(zn=180)),zo[0]=vn,zo[1]=zn,yu=null}function Ir(e,t){return(t-=e)<0?t+360:t}function c5t(e,t){return e[0]-t[0]}function Y3e(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var j7,hy,py,my,gy,vy,yy,Cy,LA,AA,NA,X3e,Q3e,_2,w2,x2,ea={sphere:S1,point:kA,lineStart:Z3e,lineEnd:K3e,polygonStart:function(){ea.lineStart=d5t,ea.lineEnd=h5t},polygonEnd:function(){ea.lineStart=Z3e,ea.lineEnd=K3e}};function kA(e,t){e*=nt;var n=Oe(t*=nt);q7(n*Oe(e),n*Le(e),Le(t))}function q7(e,t,n){++j7,py+=(e-py)/j7,my+=(t-my)/j7,gy+=(n-gy)/j7}function Z3e(){ea.point=u5t}function u5t(e,t){e*=nt;var n=Oe(t*=nt);_2=n*Oe(e),w2=n*Le(e),x2=Le(t),ea.point=f5t,q7(_2,w2,x2)}function f5t(e,t){e*=nt;var n=Oe(t*=nt),r=n*Oe(e),i=n*Le(e),a=Le(t),s=ci(p2((s=w2*a-x2*i)*s+(s=x2*r-_2*a)*s+(s=_2*i-w2*r)*s),_2*r+w2*i+x2*a);hy+=s,vy+=s*(_2+(_2=r)),yy+=s*(w2+(w2=i)),Cy+=s*(x2+(x2=a)),q7(_2,w2,x2)}function K3e(){ea.point=kA}function d5t(){ea.point=p5t}function h5t(){J3e(X3e,Q3e),ea.point=kA}function p5t(e,t){X3e=e,Q3e=t,e*=nt,t*=nt,ea.point=J3e;var n=Oe(t);_2=n*Oe(e),w2=n*Le(e),x2=Le(t),q7(_2,w2,x2)}function J3e(e,t){e*=nt;var n=Oe(t*=nt),r=n*Oe(e),i=n*Le(e),a=Le(t),s=w2*a-x2*i,o=x2*r-_2*a,c=_2*i-w2*r,l=gD(s,o,c),u=W2(l),f=l&&-u/l;LA.add(f*s),AA.add(f*o),NA.add(f*c),hy+=u,vy+=u*(_2+(_2=r)),yy+=u*(w2+(w2=i)),Cy+=u*(x2+(x2=a)),q7(_2,w2,x2)}function y5t(e){return e instanceof ug?e:new ug(e)}const e4e=Symbol("vega_selection_getter");function t4e(e){return(!e.getter||!e.getter[e4e])&&(e.getter=Kr(e.field),e.getter[e4e]=!0),e.getter}const TA="intersect",ps="_vgsid_",G7=Kr(ps),by="index:unit";function i4e(e,t){for(var s,o,n=t.fields,r=t.values,i=n.length,a=0;a<i;++a)if(wc(s=t4e(o=n[a])(e))&&(s=O1(s)),wc(r[a])&&(r[a]=O1(r[a])),K(r[a])&&wc(r[a][0])&&(r[a]=r[a].map(O1)),"E"===o.type){if(K(r[a])?r[a].indexOf(s)<0:s!==r[a])return!1}else if("R"===o.type){if(!C6(s,r[a]))return!1}else if("R-RE"===o.type){if(!C6(s,r[a],!0,!1))return!1}else if("R-E"===o.type){if(!C6(s,r[a],!1,!1))return!1}else if("R-LE"===o.type&&!C6(s,r[a],!1,!0))return!1;return!0}const a4e=H6(G7),E5t=a4e.left,V5t=a4e.right;var IA={[`${ps}_union`]:function g5t(...e){const t=new ug;for(const n of e)for(const r of n)t.add(r);return t},[`${ps}_intersect`]:function v5t(e,...t){e=new ug(e),t=t.map(y5t);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e},E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=O1(t[0]),r=O1(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=O1(t[0]),r=O1(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};function FA(e,t,n,r){t[0].type!==al&&Z("First argument to selection functions must be a string literal.");const i=t[0].value,s="unit",o="@"+s,c=":"+i;(t.length>=2&&lt(t).value)===TA&&!Ne(r,o)&&(r[o]=n.getData(i).indataRef(n,s)),Ne(r,c)||(r[c]=n.getData(i).tuplesRef())}function s4e(e){const t=this.context.data[e];return t?t.values.value:[]}const W7=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},R5t=W7("format"),o4e=W7("timeFormat"),O5t=W7("utcFormat"),P5t=W7("timeParse"),$5t=W7("utcParse"),My=new Date(2e3,0,1);function _y(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(My.setYear(2e3),My.setMonth(e),My.setDate(t),o4e.call(this,My,n)):""}const RA="%",c4e="$";function OA(e,t,n,r){t[0].type!==al&&Z("First argument to data functions must be a string literal.");const i=t[0].value,a=":"+i;if(!Ne(a,r))try{r[a]=n.getData(i).tuplesRef()}catch{}}function z2(e,t,n,r){if(t[0].type===al)l4e(n,r,t[0].value);else for(e in n.scales)l4e(n,r,e)}function l4e(e,t,n){const r=RA+n;if(!Ne(t,r))try{t[r]=e.scaleRef(n)}catch{}}function ms(e,t){if(Je(e))return e;if(ge(e)){const n=t.scales[e];return n&&function sot(e){return e&&!0===e[die]}(n.value)?n.value:void 0}}function PA(e,t){return function(n,r,i){if(n){const a=ms(n,(i||this).context);return a&&a.path[e](r)}return t(r)}}const Q5t=PA("area",function a5t(e){return dy=new H1,bo(e,hs),2*dy}),Z5t=PA("bounds",function l5t(e){var t,n,r,i,a,s,o;if(Tr=zn=-(vn=K2=1/0),u3=[],bo(e,Ho),n=u3.length){for(u3.sort(c5t),t=1,a=[r=u3[0]];t<n;++t)Y3e(r,(i=u3[t])[0])||Y3e(r,i[1])?(Ir(r[0],i[1])>Ir(r[0],r[1])&&(r[1]=i[1]),Ir(i[0],r[1])>Ir(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(s=-1/0,t=0,r=a[n=a.length-1];t<=n;r=i,++t)(o=Ir(r[1],(i=a[t])[0]))>s&&(s=o,vn=i[0],zn=r[1])}return u3=zo=null,vn===1/0||K2===1/0?[[NaN,NaN],[NaN,NaN]]:[[vn,K2],[zn,Tr]]}),K5t=PA("centroid",function m5t(e){j7=hy=py=my=gy=vy=yy=Cy=0,LA=new H1,AA=new H1,NA=new H1,bo(e,ea);var t=+LA,n=+AA,r=+NA,i=gD(t,n,r);return i<sv&&(t=vy,n=yy,r=Cy,hy<Ie&&(t=py,n=my,r=gy),(i=gD(t,n,r))<sv)?[NaN,NaN]:[ci(n,t)*Ln,W2(r/i)*Ln]});function $A(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function BA(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function UA(e){const t=Tc(e);return.2126*BA(t.r)+.7152*BA(t.g)+.0722*BA(t.b)}function u4e(e,t){return e===t||e!=e&&t!=t||(K(e)?!(!K(t)||e.length!==t.length)&&function s7t(e,t){for(let n=0,r=e.length;n<r;++n)if(!u4e(e[n],t[n]))return!1;return!0}(e,t):!(!ve(e)||!ve(t))&&f4e(e,t))}function f4e(e,t){for(const n in e)if(!u4e(e[n],t[n]))return!1;return!0}function d4e(e){return t=>f4e(e,t)}const h4e={};function jA(e){return K(e)||ArrayBuffer.isView(e)?e:null}function qA(e){return jA(e)||(ge(e)?e:null)}const p4e=e=>e.data;function m4e(e,t){const n=s4e.call(t,e);return n.root&&n.root.lookup||{}}const g4e=()=>typeof window<"u"&&window||null;function v4e(e,t,n){if(!e)return[];const[r,i]=e,a=(new Rn).set(r[0],r[1],i[0],i[1]);return Jae(n||this.context.dataflow.scenegraph().root,a,function A7t(e){let t=null;if(e){const n=me(e.marktype),r=me(e.markname);t=i=>(!n.length||n.some(a=>i.marktype===a))&&(!r.length||r.some(a=>i.name===a))}return t}(t))}const Y7={random:()=>ni(),cumulativeNormal:Rm,cumulativeLogNormal:HS,cumulativeUniform:DS,densityNormal:MS,densityLogNormal:zS,densityUniform:VS,quantileNormal:Om,quantileLogNormal:SS,quantileUniform:LS,sampleNormal:Fm,sampleLogNormal:xS,sampleUniform:ES,isArray:K,isBoolean:_c,isDate:wc,isDefined:e=>void 0!==e,isNumber:mt,isObject:ve,isRegExp:Gte,isString:ge,isTuple:Vm,isValid:e=>null!=e&&e==e,toBoolean:_H,toDate:e=>wH(e),toNumber:O1,toString:xH,indexof:function d7t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qA(e).indexOf(...n)},join:function f7t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jA(e).join(...n)},lastindexof:function h7t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qA(e).lastIndexOf(...n)},replace:function m7t(e,t,n){return Je(n)&&Z("Function argument passed to replace."),String(e).replace(t,n)},reverse:function g7t(e){return jA(e).slice().reverse()},slice:function p7t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qA(e).slice(...n)},flush:jte,lerp:Wte,merge:function a7t(){const e=[].slice.call(arguments);return e.unshift({}),et(...e)},pad:Qte,peek:lt,pluck:function u7t(e,t){const n=h4e[t]||(h4e[t]=Kr(t));return K(e)?e.map(n):n(e)},span:a5,inrange:C6,truncate:Zte,rgb:Tc,lab:hg,hcl:pg,hsl:rg,luminance:UA,contrast:function i7t(e,t){const n=UA(e),r=UA(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:zr,format:R5t,utcFormat:O5t,utcParse:$5t,utcOffset:Sne,utcSequence:Dne,timeFormat:o4e,timeParse:P5t,timeOffset:Hne,timeSequence:Vne,timeUnitSpecifier:mne,monthFormat:function B5t(e){return _y.call(this,e,1,"%B")},monthAbbrevFormat:function U5t(e){return _y.call(this,e,1,"%b")},dayFormat:function j5t(e){return _y.call(this,0,2+e,"%A")},dayAbbrevFormat:function q5t(e){return _y.call(this,0,2+e,"%a")},quarter:Pte,utcquarter:$te,week:vne,utcweek:bne,dayofyear:gne,utcdayofyear:Cne,warn:function t7t(){return $A(this.context.dataflow,"warn",arguments)},info:function n7t(){return $A(this.context.dataflow,"info",arguments)},debug:function r7t(){return $A(this.context.dataflow,"debug",arguments)},extent:e=>Wa(e),inScope:function e7t(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:v4e,clampRange:Bte,pinchDistance:function c7t(e){const t=e.touches;return Math.hypot(t[0].clientX-t[1].clientX,t[0].clientY-t[1].clientY)},pinchAngle:function l7t(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function V7t(){const e=g4e();return e?e.screen:{}},containerSize:function L7t(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function D7t(){const e=g4e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function v7t(e,t,n){return YE(e||0,t||0,n||0)},setdata:function I5t(e,t){const n=this.context.dataflow;return n.pulse(this.context.data[e].input,n.changeset().remove(Jr).insert(t)),1},pathShape:function H7t(e){let t=null;return function(n){return n?B5(n,t=t||j6(e)):e}},panLinear:Ite,panLog:Fte,panPow:Rte,panSymlog:Ote,zoomLinear:gH,zoomLog:vH,zoomPow:lm,zoomSymlog:yH,encode:function F5t(e,t,n){if(e){const r=this.context.dataflow;r.pulse(e.mark.source,r.changeset().encode(e,t))}return void 0!==n?n:e},modify:function o7t(e,t,n,r,i,a){const s=this.context.dataflow,o=this.context.data[e],c=o.input,l=s.stamp();let f,d,u=o.changes;if(!1===s._trigger||!(c.value.length||t||r))return 0;if((!u||u.stamp<l)&&(o.changes=u=s.changeset(),u.stamp=l,s.runAfter(()=>{o.modified=!0,s.pulse(c,u).run()},!0,1)),n&&(f=!0===n?Jr:K(n)||Vm(n)?n:d4e(n),u.remove(f)),t&&u.insert(t),r&&(f=d4e(r),c.value.some(f)?u.remove(f):u.insert(r)),i)for(d in a)u.modify(i,d,a[d]);return 1},lassoAppend:function N7t(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;const i=(e=me(e))[e.length-1];return void 0===i||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e},lassoPath:function k7t(e){return me(e).reduce((t,n,r)=>{let[i,a]=n;return t+(0==r?`M ${i},${a} `:r===e.length-1?" Z":`L ${i},${a} `)},"")},intersectLasso:function T7t(e,t,n){const{x:r,y:i,mark:a}=n,s=(new Rn).set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[c,l]of t)c<s.x1&&(s.x1=c),c>s.x2&&(s.x2=c),l<s.y1&&(s.y1=l),l>s.y2&&(s.y2=l);return s.translate(r,i),v4e([[s.x1,s.y1],[s.x2,s.y2]],e,a).filter(c=>function I7t(e,t,n){let r=0;for(let i=0,a=n.length-1;i<n.length;a=i++){const[s,o]=n[a],[c,l]=n[i];l>t!=o>t&&e<(s-c)*(t-l)/(o-l)+c&&r++}return 1&r}(c.x,c.y,t))}},F7t=["view","item","group","xy","x","y"],y4e="this.",GA={},C4e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ue(c4e+e)}]`,functions:function O7t(e){const t=F3e(e);F7t.forEach(n=>t[n]="event.vega."+n);for(const n in Y7)t[n]=y4e+n;return et(t,function X5t(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=z2,n._range=z2,n._scale=z2;const r=i=>"_["+(i.type===al?ue(RA+i.value):ue(RA)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}(e,Y7,GA)),t},constants:I3e,visitors:GA},WA=R3e(C4e);function An(e,t,n){return 1===arguments.length?Y7[e]:(Y7[e]=t,n&&(GA[e]=n),WA&&(WA.functions[e]=y4e+e),this)}function gs(e,t){const n={};let r;try{r=HA(e=ge(e)?e:ue(e)+"")}catch{Z("Expression parse error: "+e)}r.visit(a=>{if(a.type!==_3e)return;const s=a.callee.name,o=C4e.visitors[s];o&&o(s,a.arguments,t,n)});const i=WA(r);return i.globals.forEach(a=>{const s=c4e+a;!Ne(n,s)&&t.getSignal(a)&&(n[s]=t.signalRef(a))}),{$expr:et({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}An("bandwidth",function y7t(e,t){const n=ms(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0},z2),An("copy",function C7t(e,t){const n=ms(e,(t||this).context);return n?n.copy():void 0},z2),An("domain",function b7t(e,t){const n=ms(e,(t||this).context);return n?n.domain():[]},z2),An("range",function _7t(e,t){const n=ms(e,(t||this).context);return n&&n.range?n.range():[]},z2),An("invert",function M7t(e,t,n){const r=ms(e,(n||this).context);return r?K(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0},z2),An("scale",function w7t(e,t,n){const r=ms(e,(n||this).context);return r?r(t):void 0},z2),An("gradient",function x7t(e,t,n,r,i){e=ms(e,(i||this).context);const a=Tie(t,n);let s=e.domain(),o=s[0],c=lt(s),l=R1;return c-o?l=bie(e,o,c):e=(e.interpolator?yt("sequential")().interpolator(e.interpolator()):yt("linear")().interpolate(e.interpolate()).range(e.range())).domain([o=0,c=1]),e.ticks&&(s=e.ticks(+r||15),o!==s[0]&&s.unshift(o),c!==lt(s)&&s.push(c)),s.forEach(u=>a.stop(l(u),e(u))),a},z2),An("geoArea",Q5t,z2),An("geoBounds",Z5t,z2),An("geoCentroid",K5t,z2),An("geoShape",function z7t(e,t,n){const r=ms(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}},z2),An("geoScale",function J5t(e,t){const n=ms(e,(t||this).context);return n&&n.scale()},z2),An("indata",function T5t(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count},function Y5t(e,t,n,r){t[0].type!==al&&Z("First argument to indata must be a string literal."),t[1].type!==al&&Z("Second argument to indata must be a string literal.");const i=t[0].value,a=t[1].value,s="@"+a;Ne(s,r)||(r[s]=n.getData(i).indataRef(n,a))}),An("data",s4e,OA),An("treePath",function S7t(e,t,n){const r=m4e(e,this),i=r[t],a=r[n];return i&&a?i.path(a).map(p4e):void 0},OA),An("treeAncestors",function E7t(e,t){const n=m4e(e,this)[t];return n?n.ancestors().map(p4e):void 0},OA),An("vlSelectionTest",function S5t(e,t,n){for(var l,u,f,d,h,r=this.context.data[e],i=r?r.values.value:[],a=r?r[by]&&r[by].value:void 0,s=n===TA,o=i.length,c=0;c<o;++c)if(l=i[c],a&&s){if(-1===(f=(u=u||{})[d=l.unit]||0))continue;if(h=i4e(t,l),u[d]=h?-1:++f,h&&1===a.size)return!0;if(!h&&f===a.get(d).count)return!1}else if(s^(h=i4e(t,l)))return h;return o&&s},FA),An("vlSelectionIdTest",function D5t(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],a=r?r[by]&&r[by].value:void 0,s=n===TA,o=G7(t),c=E5t(i,o);if(c===i.length||G7(i[c])!==o)return!1;if(a&&s){if(1===a.size)return!0;if(V5t(i,o)-c<a.size)return!1}return!0},FA),An("vlSelectionResolve",function A5t(e,t,n,r){for(var l,u,f,d,h,p,m,g,v,M,w,i=this.context.data[e],a=i?i.values.value:[],s={},o={},c={},C=a.length,b=0;b<C;++b)if(d=(l=a[b]).unit,f=l.values,(u=l.fields)&&f){for(M=0,w=u.length;M<w;++M)g=(m=s[(h=u[M]).field]||(s[h.field]={}))[d]||(m[d]=[]),c[h.field]=v=h.type.charAt(0),m[d]=(0,IA[`${v}_union`])(g,me(f[M]));n&&(g=o[d]||(o[d]=[])).push(me(f).reduce((_,z,S)=>(_[u[S].field]=z,_),{}))}else h=ps,p=G7(l),(g=(m=s[h]||(s[h]={}))[d]||(m[d]=[])).push(p),n&&(g=o[d]||(o[d]=[])).push({[ps]:p});return t=t||"union",s[ps]?s[ps]=IA[`${ps}_${t}`](...Object.values(s[ps])):Object.keys(s).forEach(_=>{s[_]=Object.keys(s[_]).map(z=>s[_][z]).reduce((z,S)=>void 0===z?S:IA[`${c[_]}_${t}`](z,S))}),a=Object.keys(o),n&&a.length&&(s[r?"vlPoint":"vlMulti"]="union"===t?{or:a.reduce((z,S)=>(z.push(...o[S]),z),[])}:{and:a.map(z=>({or:o[z]}))}),s},FA),An("vlSelectionTuples",function L5t(e,t){return e.map(n=>et(t.fields?{values:t.fields.map(r=>t4e(r)(n.datum))}:{[ps]:G7(n.datum)},t))});const $7t=Oi(["rule"]),b4e=Oi(["group","image","rect"]);function YA(e){return(e+"").toLowerCase()}function X7(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}var G7t={operator:(e,t)=>X7(e,["_"],t.code),parameter:(e,t)=>X7(e,["datum","_"],t.code),event:(e,t)=>X7(e,["event"],t.code),handler:(e,t)=>X7(e,["_","event"],`var datum=event.item&&event.item.datum;return ${t.code};`),encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const a in r){const s="o["+ue(a)+"]";i+=`$=${r[a].code};if(${s}!==$)${s}=$,m=1;`}return i+=function B7t(e,t){let n="";return $7t[t]||(e.x2&&(e.x?(b4e[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(b4e[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(r,n),i+="return m;",X7(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(ue).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=Function("a","b","var u, v; return "+e.map((a,s)=>{const o=t[s];let c,l;return a.path?(c=`a${a.path}`,l=`b${a.path}`):((n=n||{})["f"+s]=a,c=`this.f${s}(a)`,l=`this.f${s}(b)`),function q7t(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}\n  : (u > v || v == null) && u != null ? ${r}\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}\n  : v !== v && u === u ? ${r} : `}(c,l,-o,o)}).join("")+"0;");return n?i.bind(n):i}}};function M4e(e,t,n){if(!e||!ve(e))return e;for(let a,r=0,i=_4e.length;r<i;++r)if(a=_4e[r],Ne(e,a.key))return a.parse(e,t,n);return e}var _4e=[{key:"$ref",parse:function Q7t(e,t){return t.get(e.$ref)||Z("Operator not defined: "+e.$ref)}},{key:"$key",parse:function K7t(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=MH(e.$key,e.$flat,t.expr.codegen))}},{key:"$expr",parse:function Z7t(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=$2(t.parameterExpression(e.$expr),e.$fields))}},{key:"$field",parse:function J7t(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Kr(e.$field,e.$name,t.expr.codegen))}},{key:"$encode",parse:function tdt(e,t){const n=e.$encode,r={};for(const i in n){const a=n[i];r[i]=$2(t.encodeExpression(a.$expr),a.$fields),r[i].output=a.$output}return r}},{key:"$compare",parse:function edt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=me(e.$compare).map(i=>i&&i.$tupleid?ke:i);return t.fn[n]||(t.fn[n]=CH(r,e.$order,t.expr.codegen))}},{key:"$context",parse:function ndt(e,t){return t}},{key:"$subflow",parse:function rdt(e,t){const n=e.$subflow;return function(r,i,a){const s=t.fork().parse(n),o=s.get(n.operators[0].id),c=s.signals.parent;return c&&c.set(a),o.detachSubflow=()=>t.detach(s),o}}},{key:"$tupleid",parse:function idt(){return ke}}];const odt={skip:!0};function w4e(e,t,n,r){return new x4e(e,t,n,r)}function x4e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||G7t,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function z4e(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function H4e(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}x4e.prototype=z4e.prototype={fork(){const e=new z4e(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),function j7t(e){return"collect"===YA(e)}(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(r.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),r.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const s=n.data[a]||(n.data[a]={});e.data[a].forEach(o=>s[o]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[YA(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:function P7t(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()},parseOperator:function W7t(e){const t=this;!function U7t(e){return"operator"===YA(e)}(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?t.operatorExpression(e.update):null)},parseOperatorParameters:function Y7t(e){const t=this;if(e.params){const n=t.get(e.id);n||Z("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}},parseParameters:function X7t(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=K(i)?i.map(a=>M4e(a,n,t)):M4e(i,n,t)}return t},parseStream:function adt(e){var i,t=this,n=null!=e.filter?t.eventExpression(e.filter):void 0,r=null!=e.stream?t.get(e.stream):void 0;e.source?r=t.events(e.source,e.type,n):e.merge&&(r=(i=e.merge.map(a=>t.get(a)))[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(a=>t.get(a)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),null!=e.throttle&&(r=r.throttle(+e.throttle)),null!=e.debounce&&(r=r.debounce(+e.debounce)),null==r&&Z("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)},parseUpdate:function sdt(e){var i,t=this,n=ve(n=e.source)?n.$ref:n,r=t.get(n),a=e.update,s=void 0;r||Z("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(s=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,r,i,a,s)},getState:function cdt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(a=>{const s=t.signals[a];e.signals(a,s)&&(r[a]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(a=>{const s=t.data[a];e.data(a,s)&&(i[a]=s.input.value)})}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n},setState:function ldt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(a=>{n.update(t.signals[a],i[a],odt)}),Object.keys(r||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(Jr).insert(r[a]))}),(e.subcontext||[]).forEach((a,s)=>{const o=t.subcontext[s];o&&o.setState(a)})}};const XA="default";function QA(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return null==t?n.style.removeProperty("cursor"):n.style.cursor=t}function wy(e,t){var n=e._runtime.data;return Ne(n,t)||Z("Unrecognized data set: "+t),n[t]}function xy(e,t){y1e(t)||Z("Second argument to changes must be a changeset.");const n=wy(this,e);return n.modified=!0,this.pulse(n.input,t)}function S4e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function E4e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function zy(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}const _dt={trap:!1};function D4e(e,t,n,r){e._eventListeners.push({type:n,sources:me(t),handler:r})}function Hy(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return!(!1===r||ve(r)&&!r[n])||(e.warn(`Blocked ${t} ${n} event listener.`),!1)}function L4e(e){return e.item}function A4e(e){return e.item.mark.source}function N4e(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Fr(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return null!=n&&(r.textContent=n),r}const Edt="vega-bind",Vdt="vega-bind-name",Ddt="vega-bind-radio";function Ldt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=bH(r.debounce,i.update))),(null==r.input&&r.element?Adt:kdt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Adt(e,t,n,r){const i=n.event||"input",a=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,a),D4e(r,t,i,a),e.set=s=>{t.value=s,t.dispatchEvent(function Ndt(e){return typeof Event<"u"?new Event(e):{type:e}}(i))}}function kdt(e,t,n,r){const i=r.signal(n.signal),a=Fr("div",{class:Edt}),s="radio"===n.input?a:a.appendChild(Fr("label"));s.appendChild(Fr("span",{class:Vdt},n.name||n.signal)),t.appendChild(a);let o=Tdt;switch(n.input){case"checkbox":o=Idt;break;case"select":o=Fdt;break;case"radio":o=Rdt;break;case"range":o=Odt}o(e,s,n,i)}function Tdt(e,t,n,r){const i=Fr("input");for(const a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=a=>i.value=a}function Idt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const a=Fr("input",i);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=s=>a.checked=!!s||null}function Fdt(e,t,n,r){const i=Fr("select",{name:n.signal}),a=n.labels||[];n.options.forEach((s,o)=>{const c={value:s};Sy(s,r)&&(c.selected=!0),i.appendChild(Fr("option",c,(a[o]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let o=0,c=n.options.length;o<c;++o)if(Sy(n.options[o],s))return void(i.selectedIndex=o)}}function Rdt(e,t,n,r){const i=Fr("span",{class:Ddt}),a=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,o)=>{const c={type:"radio",name:n.signal,value:s};Sy(s,r)&&(c.checked=!0);const l=Fr("input",c);l.addEventListener("change",()=>e.update(s));const u=Fr("label",{},(a[o]||s)+"");return u.prepend(l),i.appendChild(u),l}),e.set=s=>{const o=e.elements,c=o.length;for(let l=0;l<c;++l)Sy(o[l].value,s)&&(o[l].checked=!0)}}function Odt(e,t,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;const i=null!=n.max?n.max:Math.max(100,+r)||100,a=n.min||Math.min(0,i,+r)||0,s=n.step||zc(a,i,100),o=Fr("input",{type:"range",name:n.signal,min:a,max:i,step:s});o.value=r;const c=Fr("span",{},+r);t.appendChild(o),t.appendChild(c);const l=()=>{c.textContent=o.value,e.update(+o.value)};o.addEventListener("input",l),o.addEventListener("change",l),e.elements=[o],e.set=u=>{o.value=u,c.textContent=u}}function Sy(e,t){return e===t||e+""==t+""}function k4e(e,t,n,r,i,a){return(t=t||new r(e.loader())).initialize(n,S4e(e),E4e(e),zy(e),i,a).background(e.background())}function ZA(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function KA(e,t,n){if("string"==typeof t){if(!(typeof document<"u"))return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const Q7=e=>+e||0;function T4e(e){return ve(e)?{top:Q7(e.top),bottom:Q7(e.bottom),left:Q7(e.left),right:Q7(e.right)}:(e=>({top:e,bottom:e,left:e,right:e}))(Q7(e))}function JA(e,t,n,r){return eN.apply(this,arguments)}function eN(){return eN=Fn(function*(e,t,n,r){const i=Jg(t),a=i&&i.headless;return a||Z("Unrecognized renderer type: "+t),yield e.runAsync(),k4e(e,null,null,a,n,r).renderAsync(e._scenegraph.root)}),eN.apply(this,arguments)}function tN(){return tN=Fn(function*(e,t){e!==Xc.Canvas&&e!==Xc.SVG&&e!==Xc.PNG&&Z("Unrecognized image type: "+e);const n=yield JA(this,e,t);return e===Xc.SVG?function jdt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}),tN.apply(this,arguments)}function nN(){return nN=Fn(function*(e,t){return(yield JA(this,Xc.Canvas,e,t)).canvas()}),nN.apply(this,arguments)}function rN(){return rN=Fn(function*(e){return(yield JA(this,Xc.SVG,e)).svg()}),rN.apply(this,arguments)}var I4e="width",F4e="height",iN="padding",R4e={skip:!0};function O4e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===iN?r.left+r.right:0)}function P4e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===iN?r.top+r.bottom:0)}function Kdt(e,t){return t.modified&&K(t.input.value)&&!e.startsWith("_:vega:_")}function Jdt(e,t){return!("parent"===e||t instanceof N6.proxy)}function nht(e,t,n,r){const i=e.element();i&&i.setAttribute("title",function rht(e){return null==e?"":K(e)?$4e(e):ve(e)&&!wc(e)?function iht(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(K(n)?$4e(n):B4e(n))}).join("\n")}(e):e+""}(r))}function $4e(e){return"["+e.map(B4e).join(", ")+"]"}function B4e(e){return K(e)?"[\u2026]":ve(e)&&!wc(e)?"{\u2026}":e}function U4e(e,t){const n=this;if(t=t||{},A6.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),null!=t.logLevel&&n.logLevel(t.logLevel),t.locale||e.locale){const a=et({},e.locale,t.locale);n.locale(s1e(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Xc.Canvas,n._scenegraph=new FV;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||nht,n._redraw=!0,n._handler=(new Wc).scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function wdt(e){const t=et({defaults:{}},e),n=(r,i)=>{i.forEach(a=>{K(r[a])&&(r[a]=Oi(r[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=function Wdt(e,t,n){return w4e(e,N6,Y7,n).parse(t)}(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:et({},a)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=O4e(n,n._width),n._viewHeight=P4e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function Xdt(e){var t=e._signals,n=t[I4e],r=t[F4e],i=t[iN];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=O4e(e,o.size),a()},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=P4e(e,o.size),a()},{size:r});const s=e.add(null,a,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}(n),function ddt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}(n),function hdt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:XA,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,a=i?ge(i)?i:i.user:XA,s=r.item&&r.item.cursor||null;return i&&a===i.user&&s==i.item?i:{user:a,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return ge(r)||(i=r.item,r=r.user),QA(e,r&&r!==XA?r:i||r),i},{cursor:t})}(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function Ey(e,t){return Ne(e._signals,t)?e._signals[t]:Z("Unrecognized signal name: "+ue(t))}function j4e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function q4e(e,t,n,r){let i=j4e(n,r);return i||(i=ZA(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function G4e(e,t,n){const r=j4e(t,n);return r&&t._targets.remove(r),e}le(U4e,A6,{evaluate(e,t,n){var r=this;return Fn(function*(){if(yield A6.prototype.evaluate.call(r,e,t),r._redraw||r._resize)try{r._renderer&&(r._resize&&(r._resize=0,function vdt(e){var t=zy(e),n=S4e(e),r=E4e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(a){e.error(a)}})}(r)),yield r._renderer.renderAsync(r._scenegraph.root)),r._redraw=!1}catch(i){r.error(i)}return n&&Em(r,n),r})()},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=null!=e?e+"":null;return t!==this._desc&&H4e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=Ey(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",T4e(e)):T4e(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Jg(e)||Z("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(A6.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Ey(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function Qdt(e,t,n,r,i,a){this.runAfter(s=>{let o=0;s._autosize=0,s.width()!==n&&(o=1,s.signal(I4e,n,R4e),s._resizeWidth.skip(!0)),s.height()!==r&&(o=1,s.signal(F4e,r,R4e),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),o&&s.run("enter"),a&&s.runAfter(c=>c.resize())},!1,1)},addEventListener(e,t,n){let r=t;return n&&!1===n.trap||(r=ZA(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var i,a,n=this._handler.handlers(e),r=n.length;--r>=0;)if(i=n[r].handler,e===(a=n[r].type)&&(t===i||t===i.raw)){this._handler.off(a,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return q4e(this,e,Ey(this,e),t)},removeSignalListener(e,t){return G4e(this,Ey(this,e),t)},addDataListener(e,t){return q4e(this,e,wy(this,e).values,t)},removeDataListener(e,t){return G4e(this,wy(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=QA(this,null);this._globalCursor=!!e,t&&QA(this,t)}return this}return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:function tht(e,t){this._timers.push(function udt(e,t,n){var r=new Fv,i=t;return null==t?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(a,s,o){s=+s,o=null==o?rL():+o,r._restart(function c(l){l+=i,r._restart(c,i+=s,o),a(l)},s,o)},r.restart(e,t,n),r)}(function n(r){e({timestamp:Date.now(),elapsed:r})},t))},events:function zdt(e,t,n){var s,r=this,i=new Nm(n),a=function(l,u){r.runAsync(null,()=>{"view"===e&&function xdt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[t]:i?!i[t]:e.preventDefault()))}(r,t)&&l.preventDefault(),i.receive(function ydt(e,t,n){var a,o,r=e._renderer,i=r&&r.canvas();return i&&(o=zy(e),(a=$g(t.changedTouches?t.changedTouches[0]:t,i))[0]-=o[0],a[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=function Cdt(e,t,n){const r=t?"group"===t.mark.marktype?t:t.mark.group:null;function i(s){var c,o=r;if(s)for(c=t;c;c=c.mark.group)if(c.mark.name===s){o=c;break}return o&&o.mark&&o.mark.interactive?o:{}}function a(s){if(!s)return n;ge(s)&&(s=i(s));const o=n.slice();for(;s;)o[0]-=s.x||0,o[1]-=s.y||0,s=s.mark&&s.mark.group;return o}return{view:P1(e),item:P1(t||{}),group:i,xy:a,x:s=>a(s)[0],y:s=>a(s)[1]}}(e,n,a),t}(r,l,u))})};if("timer"===e)Hy(r,"timer",t)&&r.timer(a,t);else if("view"===e)Hy(r,"view",t)&&r.addEventListener(t,a,_dt);else if("window"===e?Hy(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&Hy(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),s){for(var o=0,c=s.length;o<c;++o)s[o].addEventListener(t,a);D4e(r,s,t,a)}else r.warn("Can not resolve event source: "+e);return i},finalize:function Sdt(){var r,i,a,e=this._tooltip,t=this._timers,n=this._eventListeners;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(i=(a=n[r]).sources.length;--i>=0;)a.sources[i].removeEventListener(a.type,a.handler);return e&&e.call(this,this._handler,null,null,null),this},hover:function Hdt(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","pointerover",L4e),A4e,N4e(e)),this.on(this.events("view","pointerout",L4e),A4e,N4e(t)),this},data:function pdt(e,t){return arguments.length<2?wy(this,e).values.value:xy.call(this,e,E4().remove(Jr).insert(t))},change:xy,insert:function mdt(e,t){return xy.call(this,e,E4().insert(t))},remove:function gdt(e,t){return xy.call(this,e,E4().remove(t))},scale:function Ydt(e){var t=this._runtime.scales;return Ne(t,e)||Z("Unrecognized scale or projection: "+e),t[e].value},initialize:function $dt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,a=Jg(r);e=n._el=e?KA(n,e,!0):null,function fdt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),H4e(t,e.description()))}(n),a||n.error("Unrecognized renderer type: "+r);const s=a.handler||Wc,o=e?a.renderer:a.headless;return n._renderer=o?k4e(n,n._renderer,e,o):null,n._handler=function Pdt(e,t,n,r){const i=new r(e.loader(),ZA(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,zy(e),e);return t&&t.handlers().forEach(a=>{i.on(a.type,a.handler)}),i}(n,n._handler,e,s),n._redraw=!0,e&&"none"!==i&&(t=t?n._elBind=KA(n,t,!0):e.appendChild(Fr("form",{class:"vega-bindings"})),n._bind.forEach(c=>{c.param.element&&"container"!==i&&(c.element=KA(n,c.param.element,!!c.param.input))}),n._bind.forEach(c=>{Ldt(n,c.element||t,c)})),n},toImageURL:function Udt(e,t){return tN.apply(this,arguments)},toCanvas:function qdt(e,t){return nN.apply(this,arguments)},toSVG:function Gdt(e){return rN.apply(this,arguments)},getState:function Zdt(e){return this._runtime.getState(e||{data:Kdt,signals:Jdt,recurse:!0})},setState:function eht(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this},_watchPixelRatio:function aht(){if("canvas"===this.renderer()&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}});const sht="view",Vy="[",Dy="]",W4e="{",Y4e="}",oht=":",X4e=",",cht="@",lht=">",uht=/[[\]{}]/,fht={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Q4e,Z4e;function f3(e,t,n){return Q4e=t||sht,Z4e=n||fht,K4e(e.trim()).map(aN)}function Z7(e,t,n,r,i){const a=e.length;let o,s=0;for(;t<a;++t){if(o=e[t],!s&&o===n)return t;i&&i.indexOf(o)>=0?--s:r&&r.indexOf(o)>=0&&++s}return t}function K4e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Z7(e,i,X4e,Vy+W4e,Dy+Y4e),t.push(e.substring(r,i).trim()),r=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function aN(e){return"["===e[0]?function hht(e){const t=e.length;let r,n=1;if(n=Z7(e,n,Dy,Vy,Dy),n===t)throw"Empty between selector: "+e;if(r=K4e(e.substring(1,n)),2!==r.length)throw"Between selector must have two elements: "+e;if((e=e.slice(n+1).trim())[0]!==lht)throw"Expected '>' after between selector: "+e;r=r.map(aN);const i=aN(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}(e):function pht(e){const t={source:Q4e},n=[];let c,l,r=[0,0],i=0,a=0,s=e.length,o=0;if(e[s-1]===Y4e){if(o=e.lastIndexOf(W4e),!(o>=0))throw"Unmatched right brace: "+e;try{r=function mht(e){const t=e.split(X4e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!=r)throw e;return r})}(e.substring(o+1,s-1))}catch{throw"Invalid throttle specification: "+e}s=(e=e.slice(0,o).trim()).length,o=0}if(!s)throw e;if(e[0]===cht&&(i=++o),c=Z7(e,o,oht),c<s&&(n.push(e.substring(a,c).trim()),a=o=++c),o=Z7(e,o,Vy),o===s)n.push(e.substring(a,s).trim());else if(n.push(e.substring(a,o).trim()),l=[],a=++o,a===s)throw"Unmatched left bracket: "+e;for(;o<s;){if(o=Z7(e,o,Dy),o===s)throw"Unmatched left bracket: "+e;if(l.push(e.substring(a,o).trim()),o<s-1&&e[++o]!==Vy)throw"Expected left bracket: "+e;a=++o}if(!(s=n.length)||uht.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):function dht(e){return Z4e[e]}(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1)),null!=l&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}(e)}function ght(e){return ve(e)?e:{type:e||"pad"}}const K7=e=>+e||0,vht=e=>({top:e,bottom:e,left:e,right:e});function yht(e){return ve(e)?e.signal?e:{top:K7(e.top),bottom:K7(e.bottom),left:K7(e.left),right:K7(e.right)}:vht(K7(e))}const i1=e=>ve(e)&&!K(e)?et({},e):{value:e};function J4e(e,t,n,r){return null!=n?(ve(n)&&!K(n)||K(n)&&n.length&&ve(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function V1(e,t,n){for(const r in t)J4e(e,r,t[r]);for(const r in n)J4e(e,r,n[r],"update")}function Cu(e,t,n){for(const r in t)n&&Ne(n,r)||(e[r]=et(e[r]||{},t[r]));return e}function bu(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const sN="mark",oN="frame",cN="scope",Cht="axis",bht="axis-domain",Mht="axis-grid",_ht="axis-label",wht="axis-tick",xht="axis-title",zht="legend",Hht="legend-band",Sht="legend-entry",Eht="legend-gradient",ele="legend-label",Vht="legend-symbol",Dht="legend-title",Lht="title",Aht="title-text",Nht="title-subtitle";function lN(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const tle=e=>ge(e)?ue(e):e.signal?`(${e.signal})`:nle(e);function Ly(e){if(null!=e.gradient)return function Iht(e){const t=[e.start,e.stop,e.count].map(n=>null==n?null:ue(n));for(;t.length&&null==lt(t);)t.pop();return t.unshift(tle(e.gradient)),`gradient(${t.join(",")})`}(e);let t=e.signal?`(${e.signal})`:e.color?function Tht(e){return e.c?Ay("hcl",e.h,e.c,e.l):e.h||e.s?Ay("hsl",e.h,e.s,e.l):e.l||e.a?Ay("lab",e.l,e.a,e.b):e.r||e.g||e.b?Ay("rgb",e.r,e.g,e.b):null}(e.color):null!=e.field?nle(e.field):void 0!==e.value?ue(e.value):void 0;return null!=e.scale&&(t=function Fht(e,t){const n=tle(e.scale);return null!=e.range?t=`lerp(_range(${n}), ${+e.range})`:(void 0!==t&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(1==+e.band?"":"*"+Ny(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),null==t&&(t="0")),t}(e,t)),void 0===t&&(t=null),null!=e.exponent&&(t=`pow(${t},${Ny(e.exponent)})`),null!=e.mult&&(t+=`*${Ny(e.mult)}`),null!=e.offset&&(t+=`+${Ny(e.offset)}`),e.round&&(t=`round(${t})`),t}const Ay=(e,t,n,r)=>`(${e}(${[t,n,r].map(Ly).join(",")})+'')`;function Ny(e){return ve(e)?"("+Ly(e)+")":e}function nle(e){return rle(ve(e)?e:{datum:e})}function rle(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Z("Invalid field reference: "+ue(e));return e.signal||(r=ge(r)?Ga(r).map(ue).join("]["):rle(r)),t+"["+r+"]"}function ile(e,t,n,r,i,a){const s={};(a=a||{}).encoders={$encode:s},e=function kht(e,t,n,r,i){const a={},s={};let o,c,l,u;for(c in c="lineBreak","text"===t&&null!=i[c]&&!bu(c,e)&&lN(a,c,i[c]),("legend"==n||String(n).startsWith("axis"))&&(n=null),u=n===oN?i.group:n===sN?et({},i.mark,i[t]):null,u)l=bu(c,e)||("fill"===c||"stroke"===c)&&(bu("fill",e)||bu("stroke",e)),l||lN(a,c,u[c]);for(c in me(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)bu(h,e)||lN(a,h,d[h])}),e=et({},e),a)u=a[c],u.signal?(o=o||{})[c]=u:s[c]=u;return e.enter=et(s,e.enter),o&&(e.update=et(o,e.update)),e}(e,t,n,r,i.config);for(const o in e)s[o]=Oht(e[o],t,a,i);return a}function Oht(e,t,n,r){const i={},a={};for(const s in e)null!=e[s]&&(i[s]=$ht(Pht(e[s]),r,n,a));return{$expr:{marktype:t,channels:i},$fields:Object.keys(a),$output:Object.keys(e)}}function Pht(e){return K(e)?function Rht(e){let t="";return e.forEach(n=>{const r=Ly(n);t+=n.test?`(${n.test})?${r}:`:r}),":"===lt(t)&&(t+="null"),t}(e):Ly(e)}function $ht(e,t,n,r){const i=gs(e,t);return i.$fields.forEach(a=>r[a]=1),et(n,i.$params),i.$expr}const Bht="outer",Uht=["value","update","init","react","bind"];function ale(e,t){Z(e+' for "outer" push: '+ue(t))}function sle(e,t){const n=e.name;if(e.push===Bht)t.signals[n]||ale("No prior signal definition",n),Uht.forEach(r=>{void 0!==e[r]&&ale("Invalid property ",r)});else{const r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function uN(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function ky(e,t,n,r){return new uN(e,t,n,r)}function Ty(e,t){return ky("operator",e,t)}function Te(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function J7(e,t){return t?{$field:e,$name:t}:{$field:e}}const fN=J7("key");function ole(e,t){return{$compare:e,$order:t}}function Iy(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const dN="scope",hN="view";function Kn(e){return e&&e.signal}function Fy(e){if(Kn(e))return!0;if(ve(e))for(const t in e)if(Fy(e[t]))return!0;return!1}function ta(e,t){return e??t}function ul(e){return e&&e.signal||e}const cle="timer";function ed(e,t){return(e.merge?Qht:e.stream?Zht:e.type?Kht:Z("Invalid stream specification: "+ue(e)))(e,t)}function Qht(e,t){const r=pN({merge:e.merge.map(i=>ed(i,t))},e,t);return t.addStream(r).id}function Zht(e,t){const r=pN({stream:ed(e.stream,t)},e,t);return t.addStream(r).id}function Kht(e,t){let n;e.type===cle?(n=t.event(cle,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(function Xht(e){return e===dN?hN:e||hN}(e.source),e.type);const r=pN({stream:n},e,t);return 1===Object.keys(r).length?n:t.addStream(r).id}function pN(e,t,n){let r=t.between;return r&&(2!==r.length&&Z('Stream "between" parameter must have 2 entries: '+ue(t)),e.between=[ed(r[0],n),ed(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(function Jht(e,t,n){const r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),t.source===dN&&r.push("inScope(event.item)"),r.length&&(e.filter=gs("("+r.join(")&&(")+")",n).$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}const e9t={code:"_.$value",ast:{type:"Identifier",value:"value"}};function r9t(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}const Pt=e=>(t,n,r)=>ky(e,n,t||void 0,r),lle=Pt("aggregate"),a9t=Pt("axisticks"),ule=Pt("bound"),na=Pt("collect"),fle=Pt("compare"),s9t=Pt("datajoin"),dle=Pt("encode"),o9t=Pt("expression"),c9t=Pt("facet"),l9t=Pt("field"),u9t=Pt("key"),f9t=Pt("legendentries"),d9t=Pt("load"),h9t=Pt("mark"),p9t=Pt("multiextent"),m9t=Pt("multivalues"),g9t=Pt("overlap"),v9t=Pt("params"),hle=Pt("prefacet"),y9t=Pt("projection"),C9t=Pt("proxy"),b9t=Pt("relay"),ple=Pt("render"),M9t=Pt("scale"),fl=Pt("sieve"),_9t=Pt("sortitems"),mle=Pt("viewlayout"),w9t=Pt("values");let x9t=0;const gle={min:"min",max:"max",count:"sum"};function H9t(e,t){const n=t.getScale(e.name).params;let r;for(r in n.domain=vle(e.domain,e,t),null!=e.range&&(n.range=Cle(e,t,n)),null!=e.interpolate&&function I9t(e,t){t.interpolate=ui(e.type||e),null!=e.gamma&&(t.interpolateGamma=ui(e.gamma))}(e.interpolate,n),null!=e.nice&&(n.nice=function T9t(e){return ve(e)?{interval:ui(e.interval),step:ui(e.step)}:ui(e)}(e.nice)),null!=e.bins&&(n.bins=function k9t(e,t){return e.signal||K(e)?Ry(e,t):t.objectProperty(e)}(e.bins,t)),e)Ne(n,r)||"name"===r||(n[r]=ui(e[r],t))}function ui(e,t){return ve(e)?e.signal?t.signalRef(e.signal):Z("Unsupported object: "+ue(e)):e}function Ry(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>ui(n,t))}function Oy(e){Z("Can not find data set: "+ue(e))}function vle(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(K(e)?S9t:e.fields?V9t:E9t)(e,t,n);(null!=t.domainMin||null!=t.domainMax)&&Z("No scale domain defined for domainMin/domainMax to override.")}function S9t(e,t,n){return e.map(r=>ui(r,n))}function E9t(e,t,n){const r=n.getData(e.data);return r||Oy(e.data),U6(t.type)?r.valuesRef(n,e.field,yle(e.sort,!1)):vie(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function V9t(e,t,n){const r=e.data,i=e.fields.reduce((a,s)=>(s=ge(s)?{data:r,field:s}:K(s)||s.signal?function D9t(e,t){const n="_:vega:_"+x9t++,r=na({});if(K(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+ue(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,fl({})]),{data:n,field:"data"}}(s,n):s,a.push(s),a),[]);return(U6(t.type)?L9t:vie(t.type)?A9t:N9t)(e,n,i)}function L9t(e,t,n){const r=yle(e.sort,!0);let i,a;const s=n.map(l=>{const u=t.getData(l.data);return u||Oy(l.data),u.countsRef(t,l.field,r)}),o={groupby:fN,pulse:s};r&&(i=r.op||"count",a=r.field?Iy(i,r.field):"count",o.ops=[gle[i]],o.fields=[t.fieldRef(a)],o.as=[a]),i=t.add(lle(o));const c=t.add(na({pulse:Te(i)}));return a=t.add(w9t({field:fN,sort:t.sortRef(r),pulse:Te(c)})),Te(a)}function yle(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!gle[e.op]&&Z("Multiple domain scales can not be sorted using "+e.op):Z("No field provided for sort aggregate op: "+e.op):ve(e)?e.field="key":e={field:"key"}),e}function A9t(e,t,n){const r=n.map(i=>{const a=t.getData(i.data);return a||Oy(i.data),a.domainRef(t,i.field)});return Te(t.add(m9t({values:r})))}function N9t(e,t,n){const r=n.map(i=>{const a=t.getData(i.data);return a||Oy(i.data),a.extentRef(t,i.field)});return Te(t.add(p9t({extents:r})))}function Cle(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(ge(i)){if(r&&Ne(r,i))return Cle(e=et({},e,{range:r[i]}),t,n);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=U6(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Z("Unrecognized scale range value: "+ue(i))}else{if(i.scheme)return n.scheme=K(i.scheme)?Ry(i.scheme,t):ui(i.scheme,t),i.extent&&(n.schemeExtent=Ry(i.extent,t)),void(i.count&&(n.schemeCount=ui(i.count,t)));if(i.step)return void(n.rangeStep=ui(i.step,t));if(U6(e.type)&&!K(i))return vle(i,e,t);K(i)||Z("Unsupported range type: "+ue(i))}return i.map(a=>(K(a)?Ry:ui)(a,t))}function mN(e,t,n){return K(e)?e.map(r=>mN(r,t,n)):ve(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:Z("Unsupported parameter object: "+ue(e)):e}const ra="top",Mu="left",_u="right",d3="bottom",R9t="vertical",O9t="start",$9t="end",gN="index",vN="label",B9t="offset",wu="perc",U9t="perc2",fi="value",td="guide-label",yN="guide-title",j9t="group-title",q9t="group-subtitle",Mle="symbol",Py="gradient",CN="discrete",bN="size",MN=[bN,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],nd={name:1,style:1,interactive:1},pt={value:0},di={value:1},$y="group",_le="rect",_N="rule",G9t="symbol",dl="text";function rd(e){return e.type=$y,e.interactive=e.interactive||!1,e}function J2(e,t){const n=(r,i)=>ta(e[r],ta(t[r],i));return n.isVertical=r=>R9t===ta(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>ta(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>ta(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>ta(e.columns,ta(t.columns,+n.isVertical(!0))),n}function wle(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function By(e,t,n){return`item.anchor === '${O9t}' ? ${e} : item.anchor === '${$9t}' ? ${t} : ${n}`}const wN=By(ue(Mu),ue(_u),ue("center"));function xle(e,t){return t?e?ve(e)?Object.assign({},e,{offset:xle(e.offset,t)}):{value:e,offset:t}:t:e}function Rr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Cu(e.encode,t,nd)):e.interactive=!1,e}function X9t(e,t,n,r){const i=J2(e,n),a=i.isVertical(),s=i.gradientThickness(),o=i.gradientLength();let c,l,u,f,d;a?(l=[0,1],u=[0,0],f=s,d=o):(l=[0,0],u=[1,0],f=o,d=s);const h={enter:c={opacity:pt,x:pt,y:pt,width:i1(f),height:i1(d)},update:et({},c,{opacity:di,fill:{gradient:t,start:l,stop:u}}),exit:{opacity:pt}};return V1(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Rr({type:_le,role:Eht,encode:h},r)}function Q9t(e,t,n,r,i){const a=J2(e,n),s=a.isVertical(),o=a.gradientThickness(),c=a.gradientLength();let l,u,f,d,h="";s?(l="y",f="y2",u="x",d="width",h="1-"):(l="x",f="x2",u="y",d="height");const p={opacity:pt,fill:{scale:t,field:fi}};p[l]={signal:h+"datum."+wu,mult:c},p[u]=pt,p[f]={signal:h+"datum."+U9t,mult:c},p[d]=i1(o);const m={enter:p,update:et({},p,{opacity:di}),exit:{opacity:pt}};return V1(m,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),Rr({type:_le,role:Hht,key:fi,from:i,encode:m},r)}const Z9t=`datum.${wu}<=0?"${Mu}":datum.${wu}>=1?"${_u}":"center"`,K9t=`datum.${wu}<=0?"${d3}":datum.${wu}>=1?"${ra}":"middle"`;function zle(e,t,n,r){const i=J2(e,t),a=i.isVertical(),s=i1(i.gradientThickness()),o=i.gradientLength();let l,u,f,d,c=i("labelOverlap"),h="";const p={enter:l={opacity:pt},update:u={opacity:di,text:{field:vN}},exit:{opacity:pt}};return V1(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:ta(e.labelLimit,t.gradientLabelLimit)}),a?(l.align={value:"left"},l.baseline=u.baseline={signal:K9t},f="y",d="x",h="1-"):(l.align=u.align={signal:Z9t},l.baseline={value:"top"},f="x",d="y"),l[f]=u[f]={signal:h+"datum."+wu,mult:o},l[d]=u[d]=s,s.offset=ta(e.labelOffset,t.gradientLabelOffset)||0,c=c?{separation:i("labelSeparation"),method:c,order:"datum."+gN}:void 0,Rr({type:dl,role:ele,style:td,key:fi,from:r,encode:p,overlap:c},n)}function J9t(e,t,n,r,i){const a=J2(e,t),s=n.entries,o=!(!s||!s.interactive),c=s?s.name:void 0,l=a("clipHeight"),u=a("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${B9t} : datum.${bN}`,h=l?i1(l):{field:bN},p=`datum.${gN}`,m=`max(1, ${i})`;let g,v,y,C,b;h.mult=.5,g={enter:v={opacity:pt,x:{signal:d,mult:.5,offset:u},y:h},update:y={opacity:di,x:v.x,y:v.y},exit:{opacity:pt}};let M=null,w=null;e.fill||(M=t.symbolBaseFillColor,w=t.symbolBaseStrokeColor),V1(g,{fill:a("symbolFillColor",M),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",w),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),MN.forEach(D=>{e[D]&&(y[D]=v[D]={scale:e[D],field:fi})});const _=Rr({type:G9t,role:Vht,key:fi,from:f,clip:!!l||void 0,encode:g},n.symbols),z=i1(u);z.offset=a("labelOffset"),g={enter:v={opacity:pt,x:{signal:d,offset:z},y:h},update:y={opacity:di,text:{field:vN},x:v.x,y:v.y},exit:{opacity:pt}},V1(g,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const S=Rr({type:dl,role:ele,style:td,key:fi,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:pt,height:l?i1(l):pt,opacity:pt},exit:{opacity:pt},update:y={opacity:di,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(C=`ceil(item.mark.items.length / ${m})`,y.row.signal=`${p}%${C}`,y.column.signal=`floor(${p} / ${C})`,b={field:["row",p]}):(y.row.signal=`floor(${p} / ${m})`,y.column.signal=`${p} % ${m}`,b={field:p}),y.column.signal=`(${i})?${y.column.signal}:${p}`,rd({role:cN,from:r={facet:{data:r,name:"value",groupby:gN}},encode:Cu(g,s,nd),marks:[_,S],name:c,interactive:o,sort:b})}const xN='item.orient === "left"',zN='item.orient === "right"',Uy=`(${xN} || ${zN})`,tpt=`datum.vgrad && ${Uy}`,npt=By('"top"','"bottom"','"middle"'),ipt=`datum.vgrad && ${zN} ? (${By('"right"','"left"','"center"')}) : (${Uy} && !(datum.vgrad && ${xN})) ? "left" : ${wN}`,apt=`item._anchor || (${Uy} ? "middle" : "start")`,spt=`${tpt} ? (${xN} ? -90 : 90) : 0`,opt=`${Uy} ? (datum.vgrad ? (${zN} ? "bottom" : "top") : ${npt}) : "top"`;function lpt(e,t){let n;return ve(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Hle(e.path)+")":e.sphere&&(n="geoShape("+Hle(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Hle(e){return ve(e)&&e.signal?e.signal:ue(e)}function Sle(e){const t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")&&t.indexOf("title")?e.type===$y?cN:t||sN:t}function upt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Sle(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function fpt(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}function HN(e,t){const n=S1e(e.type);n||Z("Unrecognized transform type: "+ue(e.type));const r=ky(n.type.toLowerCase(),null,Ele(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Ele(e,t,n){const r={},i=e.params.length;for(let a=0;a<i;++a){const s=e.params[a];r[s.name]=dpt(s,t,n)}return r}function dpt(e,t,n){const r=e.type,i=t[e.name];return"index"===r?function hpt(e,t,n){return ge(t.from)||Z('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==i?"param"===r?function ppt(e,t,n){const r=t[e.name];return e.array?(K(r)||Z("Expected an array of sub-parameters. Instead: "+ue(r)),r.map(i=>Dle(e,i,n))):Dle(e,r,n)}(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!Kn(i)?i.map(a=>Vle(e,a,n)):Vle(e,i,n):void(e.required&&Z("Missing required "+ue(t.type)+" parameter: "+ue(e.name)))}function Vle(e,t,n){const r=e.type;if(Kn(t))return Lle(r)?Z("Expression references can not be signals."):SN(r)?n.fieldRef(t):Ale(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||SN(r);return i&&mpt(t)?n.exprRef(t.expr,t.as):i&&gpt(t)?J7(t.field,t.as):Lle(r)?gs(t,n):vpt(r)?Te(n.getData(t).values):SN(r)?J7(t):Ale(r)?n.compareRef(t):t}}function Dle(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const o in i.key)if(i.key[o]!==t[o]){i=null;break}if(i)break}i||Z("Unsupported parameter: "+ue(t));const a=et(Ele(i,t,n),i.key);return Te(n.add(v9t(a)))}const mpt=e=>e&&e.expr,gpt=e=>e&&e.field,vpt=e=>"data"===e,Lle=e=>"expr"===e,SN=e=>"field"===e,Ale=e=>"compare"===e;function jy(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Te(t.getData(e.data).output)}function hl(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function Nle(e){return ge(e)?e:null}function kle(e,t,n){const r=Iy(n.op,n.field);let i;if(t.ops){for(let a=0,s=t.as.length;a<s;++a)if(t.as[a]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function id(e,t,n,r,i,a,s){const o=t[n]||(t[n]={}),c=function Wht(e){return ve(e)?("descending"===e.order?"-":"+")+Iy(e.op,e.field):""}(a);let u,f,l=Nle(i);if(null!=l&&(e=t.scope,l+=c?"|"+c:"",u=o[l]),!u){const d=a?{field:fN,pulse:t.countsRef(e,i,a)}:{field:e.fieldRef(i),pulse:Te(t.output)};c&&(d.sort=e.sortRef(a)),f=e.add(ky(r,void 0,d)),s&&(t.index[i]=f),u=Te(f),null!=l&&(o[l]=u)}return u}function Tle(e,t,n){const r=e.remove,i=e.insert,a=e.toggle,s=e.modify,o=e.values,c=t.add(Ty()),u=gs("if("+e.trigger+',modify("'+n+'",'+[i,r,a,s,o].map(f=>f??"null").join(",")+"),0)",t);c.update=u.$expr,c.params=u.$params}function qy(e,t){const n=Sle(e),r=e.type===$y,i=e.from&&e.from.facet,a=e.overlap;let o,c,l,u,f,d,h,s=e.layout||n===cN||n===oN;const p=n===sN||s||i,m=function ypt(e,t,n){let r,i,a,s,o;return e?(r=e.facet)&&(t||Z("Only group marks can be faceted."),null!=r.field?s=o=jy(r,n):(e.data?o=Te(n.getData(e.data).aggregate):(a=HN(et({type:"aggregate",groupby:me(r.groupby)},r.aggregate),n),a.params.key=n.keyRef(r.groupby),a.params.pulse=jy(r,n),s=o=Te(n.add(a))),i=n.keyRef(r.groupby,!0))):s=Te(n.add(na(null,[{}]))),s||(s=jy(e,n)),{key:i,pulse:s,parent:o}}(e.from,r,t);c=t.add(s9t({key:m.key||(e.key?J7(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Te(c);c=l=t.add(na({pulse:g})),c=t.add(h9t({markdef:upt(e),interactive:fpt(e.interactive,t),clip:lpt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Te(c)}));const v=Te(c);c=u=t.add(dle(ile(e.encode,e.type,n,e.style,t,{mod:!1,pulse:v}))),c.params.parent=t.encode(),e.transform&&e.transform.forEach(w=>{const _=HN(w,t),z=_.metadata;(z.generates||z.changes)&&Z("Mark transforms should not generate new data."),z.nomod||(u.params.mod=!0),_.params.pulse=Te(c),t.add(c=_)}),e.sort&&(c=t.add(_9t({sort:t.compareRef(e.sort),pulse:Te(c)})));const y=Te(c);(i||s)&&(s=t.add(mle({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:y})),d=Te(s));const C=t.add(ule({mark:v,pulse:d||y}));h=Te(C),r&&(p&&(o=t.operators,o.pop(),s&&o.pop()),t.pushState(y,d||h,g),i?function Cpt(e,t,n){const r=e.from.facet,i=r.name,a=jy(r,t);let s;r.name||Z("Facet must have a name: "+ue(r)),r.data||Z("Facet must reference a data set: "+ue(r)),r.field?s=t.add(hle({field:t.fieldRef(r.field),pulse:a})):r.groupby?s=t.add(c9t({key:t.keyRef(r.groupby),group:Te(t.proxy(n.parent)),pulse:a})):Z("Facet must specify groupby or field: "+ue(r));const o=t.fork(),c=o.add(na()),l=o.add(fl({pulse:Te(c)}));o.addData(i,new hl(o,c,c,l)),o.addSignal("parent",null),s.params.subflow={$subflow:o.parse(e).toRuntime()}}(e,t,m):p?function bpt(e,t,n){const r=t.add(hle({pulse:n.pulse})),i=t.fork();i.add(fl()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}(e,t,m):t.parse(e),t.popState(),p&&(s&&o.push(s),o.push(C))),a&&(h=function Mpt(e,t,n){const r=e.method,i=e.bound,a=e.separation,s={separation:Kn(a)?n.signalRef(a.signal):a,method:Kn(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const o=i.tolerance;s.boundTolerance=Kn(o)?n.signalRef(o.signal):+o,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return Te(n.add(g9t(s)))}(a,h,t));const b=t.add(ple({pulse:h})),M=t.add(fl({pulse:Te(b)},void 0,t.parent()));null!=e.name&&(f=e.name,t.addData(f,new hl(t,l,b,M)),e.on&&e.on.forEach(w=>{(w.insert||w.remove||w.toggle)&&Z("Marks only support modify triggers."),Tle(w,t,f)}))}function zpt(e,t,n){const r={enter:{},update:{}};return V1(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function Ile(e,t,n){return t[e]?`scale("${t[e]}",datum)`:wle(e,n[0].encode)}hl.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let a=t[0],s=null,o=1;for(a&&"load"===a.type&&(a=t[1]),e.add(t[0]);o<n;++o)t[o].params.pulse=Te(t[o-1]),e.add(t[o]),"aggregate"===t[o].type&&(s=t[o]);return new hl(e,a,i,r,s)},hl.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),a=Nle(t);let s,o,c;return null!=a&&(e=r.scope,s=i[a]),s?n&&n.field&&kle(e,s.agg.params,n):(c={groupby:e.fieldRef(t,"key"),pulse:Te(r.output)},n&&n.field&&kle(e,c,n),o=e.add(lle(c)),s=e.add(na({pulse:Te(o)})),s={agg:o,ref:Te(s)},null!=a&&(i[a]=s)),s.ref},tuplesRef(){return Te(this.values)},extentRef(e,t){return id(e,this,"extent","extent",t,!1)},domainRef(e,t){return id(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return id(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return id(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return id(e,this,"indata","tupleindex",t,!0,!0)}};const Ept=`item.orient==="${Mu}"?-90:item.orient==="${_u}"?90:0`;function Lpt(e,t){const n={enter:{},update:{}};return V1(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:wN},angle:{signal:Ept},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Cu(n,t,nd)}function pl(e){const t=na({},e);return t.metadata={source:!0},t}function Fle(e,t){return d9t({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Rle=e=>e===d3||e===ra,Gy=(e,t,n)=>Kn(e)?Opt(e.signal,t,n):e===Mu||e===ra?t:n,a1=(e,t,n)=>Kn(e)?Fpt(e.signal,t,n):Rle(e)?t:n,ia=(e,t,n)=>Kn(e)?Rpt(e.signal,t,n):Rle(e)?n:t,Ole=(e,t,n)=>Kn(e)?Ppt(e.signal,t,n):e===ra?{value:t}:{value:n},Ipt=(e,t,n)=>Kn(e)?$pt(e.signal,t,n):e===_u?{value:t}:{value:n},Fpt=(e,t,n)=>Ple(`${e} === '${ra}' || ${e} === '${d3}'`,t,n),Rpt=(e,t,n)=>Ple(`${e} !== '${ra}' && ${e} !== '${d3}'`,t,n),Opt=(e,t,n)=>EN(`${e} === '${Mu}' || ${e} === '${ra}'`,t,n),Ppt=(e,t,n)=>EN(`${e} === '${ra}'`,t,n),$pt=(e,t,n)=>EN(`${e} === '${_u}'`,t,n),Ple=(e,t,n)=>(t=null!=t?i1(t):t,n=null!=n?i1(n):n,$le(t)&&$le(n)?{signal:`${e} ? (${t=t?t.signal||ue(t.value):null}) : (${n=n?n.signal||ue(n.value):null})`}:[et({test:e},t)].concat(n||[])),$le=e=>null==e||1===Object.keys(e).length,EN=(e,t,n)=>({signal:`${e} ? (${xu(t)}) : (${xu(n)})`}),Bpt=(e,t,n,r,i)=>({signal:(null!=r?`${e} === '${Mu}' ? (${xu(r)}) : `:"")+(null!=n?`${e} === '${d3}' ? (${xu(n)}) : `:"")+(null!=i?`${e} === '${_u}' ? (${xu(i)}) : `:"")+(null!=t?`${e} === '${ra}' ? (${xu(t)}) : `:"")+"(null)"}),xu=e=>Kn(e)?e.signal:null==e?null:ue(e),Upt=(e,t)=>0===t?0:Kn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},zu=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Hu(e,t,n,r){let i;if(t&&Ne(t,e))return t[e];if(Ne(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[yN][i]}if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[td][i]}return null}function Ble(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Ule(e,t){return{scale:e.scale,range:t}}function VN(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Kpt(e,t){const n=function jpt(e,t){var o,c,l,n=t.config,r=n.style,i=n.axis,a="band"===t.scaleType(e.scale)&&n.axisBand,s=e.orient;if(Kn(s)){const f=Ble([n.axisX,n.axisY]),d=Ble([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);for(l of(o={},f))o[l]=a1(s,Hu(l,n.axisX,i,r),Hu(l,n.axisY,i,r));for(l of(c={},d))c[l]=Bpt(s.signal,Hu(l,n.axisTop,i,r),Hu(l,n.axisBottom,i,r),Hu(l,n.axisLeft,i,r),Hu(l,n.axisRight,i,r))}else o=s===ra||s===d3?n.axisX:n.axisY,c=n["axis"+s[0].toUpperCase()+s.slice(1)];return o||c||a?et({},i,o,c,a):i}(e,t),r=e.encode||{},i=r.axis||{},a=i.name||void 0,s=i.interactive,o=i.style,c=J2(e,n),l=function Y9t(e){const t=e("tickBand");let r,i,n=e("tickOffset");return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ve(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):"extent"===t?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}(c),u={scale:e.scale,ticks:!!c("ticks"),labels:!!c("labels"),grid:!!c("grid"),domain:!!c("domain"),title:null!=e.title},f=Te(t.add(na({},[u]))),d=Te(t.add(a9t({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return u.grid&&h.push(function Gpt(e,t,n,r,i){const a=J2(e,t),s=e.orient,o=e.gridScale,c=Gy(s,1,-1),l=function Wpt(e,t){if(1!==t)if(ve(e)){let n=e=et({},e);for(;null!=n.mult;){if(!ve(n.mult))return n.mult=Kn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n=n.mult=et({},n.mult)}n.mult=t}else e=Kn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);return e}(e.offset,c);let u,f,d;const h={enter:u={opacity:pt},update:d={opacity:di},exit:f={opacity:pt}};V1(h,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const p={scale:e.scale,field:fi,band:i.band,extra:i.extra,offset:i.offset,round:a("tickRound")},m=a1(s,{signal:"height"},{signal:"width"}),g=o?{scale:o,range:0,mult:c,offset:l}:{value:0,offset:l},v=o?{scale:o,range:1,mult:c,offset:l}:et(m,{mult:c,offset:l});return u.x=d.x=a1(s,p,g),u.y=d.y=ia(s,p,g),u.x2=d.x2=ia(s,v),u.y2=d.y2=a1(s,v),f.x=a1(s,p),f.y=ia(s,p),Rr({type:_N,role:Mht,key:fi,from:r,encode:h},n)}(e,n,r.grid,d,l)),u.ticks&&(p=c("tickSize"),h.push(function Ypt(e,t,n,r,i,a){const s=J2(e,t),o=e.orient,c=Gy(o,-1,1);let l,u,f;const d={enter:l={opacity:pt},update:f={opacity:di},exit:u={opacity:pt}};V1(d,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=i1(i);h.mult=c;const p={scale:e.scale,field:fi,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")};return f.y=l.y=a1(o,pt,p),f.y2=l.y2=a1(o,h),u.x=a1(o,p),f.x=l.x=ia(o,pt,p),f.x2=l.x2=ia(o,h),u.y=ia(o,p),Rr({type:_N,role:wht,key:fi,from:r,encode:d},n)}(e,n,r.ticks,d,p,l))),u.labels&&(p=u.ticks?p:0,h.push(function Xpt(e,t,n,r,i,a){const s=J2(e,t),o=e.orient,c=e.scale,l=Gy(o,-1,1),u=ul(s("labelFlush")),f=ul(s("labelFlushOffset")),d=s("labelAlign"),h=s("labelBaseline");let m,p=0===u||!!u;const g=i1(i);g.mult=l,g.offset=i1(s("labelPadding")||0),g.offset.mult=l;const v={scale:c,field:fi,band:.5,offset:xle(a.offset,s("labelOffset"))},y=a1(o,p?VN(c,u,'"left"','"right"','"center"'):{value:"center"},Ipt(o,"left","right")),C=a1(o,Ole(o,"bottom","top"),p?VN(c,u,'"top"','"bottom"','"middle"'):{value:"middle"}),b=VN(c,u,`-(${f})`,f,0);p=p&&f;const M={opacity:pt,x:a1(o,v,g),y:ia(o,v,g)},w={enter:M,update:m={opacity:di,text:{field:vN},x:M.x,y:M.y,align:y,baseline:C},exit:{opacity:pt,x:M.x,y:M.y}};V1(w,{dx:!d&&p?a1(o,b):null,dy:!h&&p?ia(o,b):null}),V1(w,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:d,baseline:h});const _=s("labelBound");let z=s("labelOverlap");return z=z||_?{separation:s("labelSeparation"),method:z,order:"datum.index",bound:_?{scale:c,orient:o,tolerance:_}:null}:void 0,m.align!==y&&(m.align=zu(m.align,y)),m.baseline!==C&&(m.baseline=zu(m.baseline,C)),Rr({type:dl,role:_ht,style:td,key:fi,from:r,encode:w,overlap:z},n)}(e,n,r.labels,d,p,l))),u.domain&&h.push(function qpt(e,t,n,r){const i=J2(e,t),a=e.orient;let s,o;const c={enter:s={opacity:pt},update:o={opacity:di},exit:{opacity:pt}};V1(c,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Ule(e,0),u=Ule(e,1);return s.x=o.x=a1(a,l,pt),s.x2=o.x2=a1(a,u),s.y=o.y=ia(a,l,pt),s.y2=o.y2=ia(a,u),Rr({type:_N,role:bht,from:r,encode:c},n)}(e,n,r.domain,f)),u.title&&h.push(function Qpt(e,t,n,r){const i=J2(e,t),a=e.orient,s=Gy(a,-1,1);let o,c;const l={enter:o={opacity:pt,anchor:i1(i("titleAnchor",null)),align:{signal:wN}},update:c=et({},o,{opacity:di,text:i1(e.title)}),exit:{opacity:pt}},u={signal:`lerp(range("${e.scale}"), ${By(0,1,.5)})`};return c.x=a1(a,u),c.y=ia(a,u),o.angle=a1(a,pt,Upt(s,90)),o.baseline=a1(a,Ole(a,d3,ra),{value:d3}),c.angle=o.angle,c.baseline=o.baseline,V1(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),function Zpt(e,t,n,r){const i=(o,c)=>null!=o?(n.update[c]=zu(i1(o),n.update[c]),!1):!bu(c,r),a=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===a?i1(s):a1(t,i1(s),i1(a))}(i,a,l,n),l.update.align=zu(l.update.align,o.align),l.update.angle=zu(l.update.angle,o.angle),l.update.baseline=zu(l.update.baseline,o.baseline),Rr({type:dl,role:xht,style:yN,from:r,encode:l},n)}(e,n,r.title,f)),qy(rd({role:Cht,from:f,encode:Cu(Jpt(c,e),i,nd),marks:h,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:a,interactive:s,style:o}),t)}function Jpt(e,t){const n={enter:{},update:{}};return V1(n,{orient:e("orient"),offset:e("offset")||0,position:ta(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function jle(e,t,n){const r=me(e.signals),i=me(e.scales);return n||r.forEach(a=>sle(a,t)),me(e.projections).forEach(a=>function F9t(e,t){const n=t.config.projection||{},r={};for(const i in e)"name"!==i&&(r[i]=mN(e[i],i,t));for(const i in n)null==r[i]&&(r[i]=mN(n[i],i,t));t.addProjection(e.name,r)}(a,t)),i.forEach(a=>function z9t(e,t){const n=e.type||"linear";pie(n)||Z("Unrecognized scale type: "+ue(n)),t.addScale(e.name,{type:n,domain:void 0})}(a,t)),me(e.data).forEach(a=>function kpt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(HN(r,t))}),e.on&&e.on.forEach(r=>{Tle(r,t,e.name)}),t.addDataPipeline(e.name,function Tpt(e,t,n){const r=[];let o,c,l,u,f,i=null,a=!1,s=!1;for(e.values?Kn(e.values)||Fy(e.format)?(r.push(Fle(t,e)),r.push(i=pl())):r.push(i=pl({$ingest:e.values,$format:e.format})):e.url?Fy(e.url)||Fy(e.format)?(r.push(Fle(t,e)),r.push(i=pl())):r.push(i=pl({$request:e.url,$format:e.format})):e.source&&(i=o=me(e.source).map(d=>Te(t.getData(d).output)),r.push(null)),c=0,l=n.length;c<l;++c)u=n[c],f=u.metadata,!i&&!f.source&&r.push(i=pl()),r.push(u),f.generates&&(s=!0),f.modifies&&!s&&(a=!0),f.source?i=u:f.changes&&(i=null);return o&&(l=o.length-1,r[0]=b9t({derive:a,pulse:l?o:o[0]}),(a||l)&&r.splice(1,0,pl())),i||r.push(pl()),r.push(fl({})),r}(e,t,n))}(a,t)),i.forEach(a=>H9t(a,t)),(n||r).forEach(a=>function i9t(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Z("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=gs(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>function t9t(e,t,n){const r=e.encode,i={target:n};let a=e.events,s=e.update,o=[];a||Z("Signal update missing events specification."),ge(a)&&(a=f3(a,t.isSubscope()?dN:hN)),a=me(a).filter(c=>c.signal||c.scale?(o.push(c),0):1),o.length>1&&(o=[r9t(o)]),a.length&&o.push(a.length>1?{merge:a}:a[0]),null!=r&&(s&&Z("Signal encode and update are mutually exclusive."),s="encode(item(),"+ue(r)+")"),i.update=ge(s)?gs(s,t):null!=s.expr?gs(s.expr,t):null!=s.value?s.value:null!=s.signal?{$expr:e9t,$params:{$value:t.signalRef(s.signal)}}:Z("Invalid signal update specification."),e.force&&(i.options={force:!0}),o.forEach(c=>t.addUpdate(et(function n9t(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):ed(e,t)}}(c,t),i)))}(i,t,n.id))}(a,t)),me(e.axes).forEach(a=>Kpt(a,t)),me(e.marks).forEach(a=>qy(a,t)),me(e.legends).forEach(a=>function _pt(e,t){const n=t.config.legend,r=e.encode||{},i=J2(e,n),a=r.legend||{},s=a.name||void 0,o=a.interactive,c=a.style,l={};let f,d,h,u=0;MN.forEach(C=>e[C]?(l[C]=e[C],u=u||e[C]):0),u||Z("Missing valid scale for legend.");const p=function wpt(e,t){let n=e.type||Mle;return!e.type&&1===function xpt(e){return MN.reduce((t,n)=>t+(e[n]?1:0),0)}(e)&&(e.fill||e.stroke)&&(n=eV(t)?Py:tV(t)?CN:Mle),n!==Py?n:tV(t)?CN:Py}(e,t.scaleType(u)),m={title:null!=e.title,scales:l,type:p,vgrad:"symbol"!==p&&i.isVertical()},g=Te(t.add(na(null,[m]))),y=Te(t.add(f9t(d={type:p,scale:t.scaleRef(u),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===Py?(h=[X9t(e,u,n,r.gradient),zle(e,n,r.labels,y)],d.count=d.count||t.signalRef(`max(2,2*floor((${ul(i.gradientLength())})/100))`)):p===CN?h=[Q9t(e,u,n,r.gradient,y),zle(e,n,r.labels,y)]:(f=function ept(e,t){const n=J2(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,n),h=[J9t(e,n,r,y,ul(f.columns))],d.size=function Hpt(e,t,n){const r=ul(Ile("size",e,n)),i=ul(Ile("strokeWidth",e,n)),a=ul(function Spt(e,t,n){return wle("fontSize",e)||function W9t(e,t,n){const r=t.config.style[n];return r&&r[e]}("fontSize",t,n)}(n[1].encode,t,td));return gs(`max(ceil(sqrt(${r})+${i}),${a})`,t)}(e,t,h[0].marks)),h=[rd({role:Sht,from:g,encode:{enter:{x:{value:0},y:{value:0}}},marks:h,layout:f,interactive:o})],m.title&&h.push(function cpt(e,t,n,r){const i=J2(e,t),a={enter:{opacity:pt},update:{opacity:di,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:pt}};return V1(a,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:apt},angle:{signal:spt},align:{signal:ipt},baseline:{signal:opt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Rr({type:dl,role:Dht,style:yN,from:r,encode:a},n)}(e,n,r.title,g)),qy(rd({role:zht,from:g,encode:Cu(zpt(i,e,n),a,nd),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:o,style:c}),t)}(a,t)),e.title&&function Vpt(e,t){const n=J2(e=ge(e)?{text:e}:e,t.config.title),r=e.encode||{},i=r.group||{},a=i.name||void 0,s=i.interactive,o=i.style,c=[],u=Te(t.add(na(null,[{}])));return c.push(function Apt(e,t,n,r){const i={value:0},s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return V1(s,{text:e.text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Rr({type:dl,role:Aht,style:j9t,from:r,encode:s},n)}(e,n,function Dpt(e){const t=e.encode;return t&&t.title||et({name:e.name,interactive:e.interactive,style:e.style},t)}(e),u)),e.subtitle&&c.push(function Npt(e,t,n,r){const i={value:0},s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return V1(s,{text:e.subtitle,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Rr({type:dl,role:Nht,style:q9t,from:r,encode:s},n)}(e,n,r.subtitle,u)),qy(rd({role:Lht,from:u,encode:Lpt(n,i),marks:c,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:s,style:o}),t)}(e.title,t),t.parseLambdas(),t}const emt=e=>Cu({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function ad(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function qle(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Gle(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function DN(e){return(K(e)?rmt:imt)(e)}function rmt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(ve(i)?i.signal||DN(i):ue(i))}return n+"]"}function imt(e){let r,i,t="{",n=0;for(r in e)i=e[r],t+=(++n>1?",":"")+ue(r)+":"+(ve(i)?i.signal||DN(i):ue(i));return t+"}"}function smt(e,t,n){return ve(e)||Z("Input Vega specification must be an object."),function tmt(e,t){const n=t.config,r=Te(t.root=t.add(Ty())),i=function nmt(e,t){const n=s=>ta(e[s],t[s]),r=[ad("background",n("background")),ad("autosize",ght(n("autosize"))),ad("padding",yht(n("padding"))),ad("width",n("width")||0),ad("height",n("height")||0)],i=r.reduce((s,o)=>(s[o.name]=o,s),{}),a={};return me(e.signals).forEach(s=>{Ne(i,s.name)?s=et(i[s.name],s):r.push(s),a[s.name]=s}),me(t.signals).forEach(s=>{!Ne(a,s.name)&&!Ne(i,s.name)&&r.push(s)}),r}(e,n);i.forEach(l=>sle(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(na()),s=t.add(dle(ile(emt(e.encode),$y,oN,e.style,t,{pulse:Te(a)}))),o=t.add(mle({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Te(s)}));t.operators.pop(),t.pushState(Te(s),Te(o),null),jle(e,t,i),t.operators.push(o);let c=t.add(ule({mark:r,pulse:Te(o)}));return c=t.add(ple({pulse:Te(c)})),c=t.add(fl({pulse:Te(c)})),t.addData("root",new hl(t,a,a,c)),t}(e,new qle(t=g6(function amt(){const e="sans-serif",r="#4c78a8",i="#000",a="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),t,e.config),n)).toRuntime()}qle.prototype=Gle.prototype={parse(e){return jle(e,this)},fork(){return new Gle(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof uN?Te(e):e;return this.add(C9t({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,a){let s,o;r&&(s=r.data||(r.data={}),o=s[i]||(s[i]=[]),o.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Te(this.add(fl({pulse:e})))),this._parent.push(t),this._lookup.push(n?Te(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return lt(this._parent)},encode(){return lt(this._encode)},lookup(){return lt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(ge(e))return J7(e,t);e.signal||Z("Unsupported field reference: "+ue(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Te(this.add(l9t(i)))}return r},compareRef(e){let t=!1;const n=a=>Kn(a)?(t=!0,this.signalRef(a.signal)):function Yht(e){return e&&e.expr}(a)?(t=!0,this.exprRef(a.expr)):a,r=me(e.field).map(n),i=me(e.order).map(n);return t?Te(this.add(fle({fields:r,orders:i}))):ole(r,i)},keyRef(e,t){let n=!1;const i=this.signals;return e=me(e).map(a=>Kn(a)?(n=!0,Te(i[a.signal])):a),n?Te(this.add(u9t({fields:e,flat:t}))):function jht(e,t){const n={$key:e};return t&&(n.$flat=!0),n}(e,t)},sortRef(e){if(!e)return e;const t=Iy(e.op,e.field),n=e.order||"ascending";return n.signal?Te(this.add(fle({fields:t,orders:this.signalRef(n.signal)}))):ole(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Ne(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Z("Duplicate signal name: "+ue(e));const n=t instanceof uN?t:this.add(Ty(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Z("Unrecognized signal name: "+ue(e)),this.signals[e]},signalRef(e){return this.signals[e]?Te(this.signals[e]):(Ne(this.lambdas,e)||(this.lambdas[e]=this.add(Ty(null))),Te(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=gs(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return e&&ve(e)?this.signalRef(e.signal||DN(e)):e},exprRef(e,t){const n={expr:gs(e,this)};return t&&(n.expr.$name=t),Te(this.add(o9t(n)))},addBinding(e,t){this.bindings||Z("Nested signals do not support binding: "+ue(e)),this.bindings.push(et({signal:e},t))},addScaleProj(e,t){Ne(this.scales,e)&&Z("Duplicate scale or projection name: "+ue(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,M9t(t))},addProjection(e,t){this.addScaleProj(e,y9t(t))},getScale(e){return this.scales[e]||Z("Unrecognized scale name: "+ue(e)),this.scales[e]},scaleRef(e){return Te(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ne(this.data,e)&&Z("Duplicate data set name: "+ue(e)),this.data[e]=t},getData(e){return this.data[e]||Z("Undefined data set name: "+ue(e)),this.data[e]},addDataPipeline(e,t){return Ne(this.data,e)&&Z("Duplicate data set name: "+ue(e)),this.addData(e,hl.fromEntries(this,t))}};var omt="5.27.0";et(N6,jo,qo,Ql,g1,I3,F3,lf,sr,ks,R3,O3);var lmt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},umt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},fmt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const dmt=Array.prototype.slice,ml=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,dmt.call(t,1))};var pmt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:(e,t,n,r,i,a,s)=>new Date(e,t||0,n??1,r||0,i||0,a||0,s||0),date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return ml("join",arguments)},indexof:function(){return ml("indexOf",arguments)},lastindexof:function(){return ml("lastIndexOf",arguments)},slice:function(){return ml("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return ml("substring",arguments,String)},split:function(){return ml("split",arguments,String)},replace:function(){return ml("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const mmt=["view","item","group","xy","x","y"],LN=new Set([Function,eval,setTimeout,setInterval]);"function"==typeof setImmediate&&LN.add(setImmediate);const gmt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:"datum"===n?e.datum:"event"===n?e.event:"item"===n?e.item:lmt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),!LN.has(r[i]))return r[i];console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`)},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),"if"===r?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||pmt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>umt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>fmt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>"&&"===t.operator?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,LN.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function sd(e,t,n,r,i,a){const s=o=>gmt[o.type](s,o);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=a,mmt.forEach(o=>s.fn[o]=function(){return i.vega[o](...arguments)}),s(e)}var vmt={operator(e,t){const n=t.ast,r=e.functions;return i=>sd(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,a)=>sd(n,r,a,i)},event(e,t){const n=t.ast,r=e.functions;return i=>sd(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,a)=>sd(n,r,i,a.item&&a.item.datum,a)},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,a="group"===n||"image"===n||"rect"===n;return(s,o)=>{const c=s.datum;let u,l=0;for(const f in r)u=sd(r[f].ast,i,o,c,void 0,s),s[f]!==u&&(s[f]=u,l=1);return"rule"!==n&&function cmt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}(s,r,a),l}}};function AN(e){return!!e.or}function NN(e){return!!e.and}function kN(e){return!!e.not}function Wy(e,t){if(kN(e))Wy(e.not,t);else if(NN(e))for(const n of e.and)Wy(n,t);else if(AN(e))for(const n of e.or)Wy(n,t);else t(e)}function Su(e,t){return kN(e)?{not:Su(e.not,t)}:NN(e)?{and:e.and.map(n=>Su(n,t))}:AN(e)?{or:e.or.map(n=>Su(n,t))}:t(e)}const qe=structuredClone;function Wle(e){throw new Error(e)}function Eu(e,t){const n={};for(const r of t)Ne(e,r)&&(n[r]=e[r]);return n}function er(e,t){const n={...e};for(const r of t)delete n[r];return n}function ot(e){if(mt(e))return e;const t=ge(e)?e:Bt(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r),n&=n;return n}function TN(e){return!1===e||null===e}function ct(e,t){return e.includes(t)}function gl(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function IN(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function Yle(e,...t){for(const n of t)Cmt(e,n??{});return e}function Cmt(e,t){for(const n of te(t))v6(e,n,t[n],!0)}function vs(e,t){const n=[],r={};let i;for(const a of e)i=t(a),!(i in r)&&(r[i]=1,n.push(a));return n}function bmt(e,t){const n=te(e),r=te(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function Xle(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function FN(e,t){for(const n of e)if(t.has(n))return!0;return!1}function RN(e){const t=new Set;for(const n of e){const i=Ga(n).map((s,o)=>0===o?s:`[${s}]`),a=i.map((s,o)=>i.slice(0,o+1).join(""));for(const s of a)t.add(s)}return t}function ON(e,t){return void 0===e||void 0===t||FN(RN(e),RN(t))}function $t(e){return 0===te(e).length}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Bt(e)).join(",")})`};const te=Object.keys,D1=Object.values,h3=Object.entries;function od(e){return!0===e||!1===e}function dn(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function cd(e,t){return kN(e)?`!(${cd(e.not,t)})`:NN(e)?`(${e.and.map(n=>cd(n,t)).join(") && (")})`:AN(e)?`(${e.or.map(n=>cd(n,t)).join(") || (")})`:t(e)}function Yy(e,t){if(0===t.length)return!0;const n=t.shift();return n in e&&Yy(e[n],t)&&delete e[n],$t(e)}function ld(e){return e.charAt(0).toUpperCase()+e.substr(1)}function PN(e,t="datum"){const n=Ga(e),r=[];for(let i=1;i<=n.length;i++){const a=`[${n.slice(0,i).map(ue).join("][")}]`;r.push(`${t}${a}`)}return r.join(" && ")}function Qle(e,t="datum"){return`${t}[${ue(Ga(e).join("."))}]`}function Mmt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function hi(e){return`${Ga(e).map(Mmt).join("\\.")}`}function vl(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function $N(e){return`${Ga(e).join(".")}`}function Vu(e){return e?Ga(e).length:0}function Nn(...e){for(const t of e)if(void 0!==t)return t}let Zle=42;function Kle(e){const t=++Zle;return e?String(e)+t:t}function _mt(){Zle=42}function Jle(e){return e0e(e)?e:`__${e}`}function e0e(e){return e.startsWith("__")}function ud(e){if(void 0!==e)return(e%360+360)%360}function Xy(e){return!!mt(e)||!isNaN(e)&&!isNaN(parseFloat(e))}const t0e=Object.getPrototypeOf(structuredClone({}));function Or(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;0!=r--;)if(!Or(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Or(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;0!=r--;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==t0e.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==t0e.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!=r--;){const a=i[r];if(!Or(e[a],t[a]))return!1}return!0}return e!=e&&t!=t}function Bt(e){const t=[];return function n(r){if(r&&r.toJSON&&"function"==typeof r.toJSON&&(r=r.toJSON()),void 0===r)return;if("number"==typeof r)return isFinite(r)?""+r:"null";if("object"!=typeof r)return JSON.stringify(r);let i,a;if(Array.isArray(r)){for(a="[",i=0;i<r.length;i++)i&&(a+=","),a+=n(r[i])||"null";return a+"]"}if(null===r)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const s=t.push(r)-1,o=Object.keys(r).sort();for(a="",i=0;i<o.length;i++){const c=o[i],l=n(r[c]);l&&(a&&(a+=","),a+=JSON.stringify(c)+":"+l)}return t.splice(s,1),`{${a}}`}(e)}const So="row",Eo="column",Qy="facet",hn="x",s1="y",aa="x2",ys="y2",p3="xOffset",Du="yOffset",sa="radius",Vo="radius2",pi="theta",Do="theta2",oa="latitude",ca="longitude",la="latitude2",mi="longitude2",tr="color",Cs="fill",bs="stroke",nr="shape",Lo="size",yl="angle",Ao="opacity",m3="fillOpacity",g3="strokeOpacity",v3="strokeWidth",y3="strokeDash",fd="text",Lu="order",dd="detail",Zy="key",Cl="tooltip",Ky="href",Jy="url",eC="description",n0e={theta:1,theta2:1,radius:1,radius2:1};function r0e(e){return e in n0e}const BN={longitude:1,longitude2:1,latitude:1,latitude2:1};function i0e(e){switch(e){case oa:return"y";case la:return"y2";case ca:return"x";case mi:return"x2"}}function a0e(e){return e in BN}const xmt=te(BN),UN={x:1,y:1,x2:1,y2:1,...n0e,...BN,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Au(e){return e===tr||e===Cs||e===bs}const s0e={row:1,column:1,facet:1},gi=te(s0e),jN={...UN,...s0e},zmt=te(jN),{order:rIt,detail:iIt,tooltip:aIt,...o0e}=jN,{row:sIt,column:oIt,facet:cIt,...c0e}=o0e;function Hmt(e){return!!c0e[e]}function l0e(e){return!!jN[e]}te(o0e),te(c0e);const Smt=[aa,ys,la,mi,Do,Vo];function u0e(e){return bl(e)!==e}function bl(e){switch(e){case aa:return hn;case ys:return s1;case la:return oa;case mi:return ca;case Do:return pi;case Vo:return sa}return e}function C3(e){if(r0e(e))switch(e){case pi:return"startAngle";case Do:return"endAngle";case sa:return"outerRadius";case Vo:return"innerRadius"}return e}function Ms(e){switch(e){case hn:return aa;case s1:return ys;case oa:return la;case ca:return mi;case pi:return Do;case sa:return Vo}}function rr(e){switch(e){case hn:case aa:return"width";case s1:case ys:return"height"}}function f0e(e){switch(e){case hn:return"xOffset";case s1:return"yOffset";case aa:return"x2Offset";case ys:return"y2Offset";case pi:return"thetaOffset";case sa:return"radiusOffset";case Do:return"theta2Offset";case Vo:return"radius2Offset"}}function qN(e){switch(e){case hn:return"xOffset";case s1:return"yOffset"}}function Emt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Vmt=te(UN),{x:fIt,y:dIt,x2:hIt,y2:pIt,xOffset:mIt,yOffset:gIt,latitude:vIt,longitude:yIt,latitude2:CIt,longitude2:bIt,theta:MIt,theta2:_It,radius:wIt,radius2:xIt,...GN}=UN,Dmt=te(GN),WN={x:1,y:1},_s=te(WN);function kn(e){return e in WN}const YN={theta:1,radius:1},Lmt=te(YN);function tC(e){return"width"===e?hn:s1}const XN={xOffset:1,yOffset:1};function hd(e){return e in XN}te(XN);const{text:HIt,tooltip:SIt,href:EIt,url:VIt,description:DIt,detail:LIt,key:AIt,order:NIt,...d0e}=GN,Amt=te(d0e),h0e={...WN,...YN,...XN,...d0e},nC=te(h0e);function No(e){return!!h0e[e]}const p0e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:kIt,...Imt}=p0e;function QN(e){switch(e){case hn:case s1:case pi:case sa:case p3:case Du:case Lo:case yl:case v3:case Ao:case m3:case g3:case aa:case ys:case Do:case Vo:return;case Qy:case So:case Eo:case nr:case y3:case fd:case Cl:case Ky:case Jy:case eC:return"discrete";case tr:case Cs:case bs:return"flexible";case oa:case ca:case la:case mi:case dd:case Zy:case Lu:return}}const Rmt={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Omt={count:1,min:1,max:1};function ko(e){return!!e&&!!e.argmin}function b3(e){return!!e&&!!e.argmax}function ZN(e){return ge(e)&&!!Rmt[e]}const Pmt=new Set(["count","valid","missing","distinct"]);function m0e(e){return ge(e)&&Pmt.has(e)}const Bmt=new Set(["count","sum","distinct","valid","missing"]),Umt=new Set(["mean","average","median","q1","q3","min","max"]);function g0e(e){return _c(e)&&(e=wC(e,void 0)),"bin"+te(e).map(t=>rC(e[t])?dn(`_${t}_${h3(e[t])}`):dn(`_${t}_${e[t]}`)).join("")}function Zt(e){return!0===e||Ml(e)&&!e.binned}function L1(e){return"binned"===e||Ml(e)&&!0===e.binned}function Ml(e){return ve(e)}function rC(e){return e?.param}function v0e(e){switch(e){case So:case Eo:case Lo:case tr:case Cs:case bs:case v3:case Ao:case m3:case g3:case nr:return 6;case y3:return 4;default:return 10}}function pd(e){return!!e?.expr}function ir(e){const t=te(e||{}),n={};for(const r of t)n[r]=Pr(e[r]);return n}function y0e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:a,limit:s,color:o,subtitleColor:c,subtitleFont:l,subtitleFontSize:u,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,v={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...void 0!==a?{angle:a}:{},...void 0!==s?{limit:s}:{}},y={...c?{subtitleColor:c}:{},...l?{subtitleFont:l}:{},...u?{subtitleFontSize:u}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}};return{titleMarkConfig:{...m,...o?{fill:o}:{}},subtitleMarkConfig:Eu(e,["align","baseline","dx","dy","limit"]),nonMarkTitleProperties:v,subtitle:y}}function M3(e){return ge(e)||K(e)&&ge(e[0])}function Ve(e){return!!e?.signal}function _3(e){return!!e.step}function To(e){return!K(e)&&"field"in e&&"data"in e}const Gmt=te({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),Wmt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},KN=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function C0e(e){const t=K(e.condition)?e.condition.map(b0e):b0e(e.condition);return{...Pr(e),condition:t}}function Pr(e){if(pd(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function b0e(e){if(pd(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function an(e){if(pd(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Ve(e)?e:void 0!==e?{value:e}:void 0}function Ymt(e){return Ve(e)?e.signal:ue(e)}function M0e(e){return Ve(e)?e.signal:ue(e.value)}function ua(e){return Ve(e)?e.signal:null==e?null:ue(e)}function Xmt(e,t,n){for(const r of n){const i=Io(r,t.markDef,t.config);void 0!==i&&(e[r]=an(i))}return e}function _0e(e){return[].concat(e.type,e.style??[])}function Dt(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:a}=r;return i&&void 0!==t[i]?t[i]:void 0!==t[e]?t[e]:!a||i&&i!==e?Io(e,t,n,r):void 0}function Io(e,t,n,{vgChannel:r}={}){return Nn(r?iC(e,t,n.style):void 0,iC(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function iC(e,t,n){return w0e(e,_0e(t),n)}function w0e(e,t,n){let r;t=me(t);for(const i of t){const a=n[i];a&&void 0!==a[e]&&(r=a[e])}return r}function x0e(e,t){return me(e).reduce((n,r)=>(n.field.push(fe(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function z0e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Or(i,r))return;n.push(r)}),n}function H0e(e,t){return Or(e,t)||!t?e:e?[...me(e),...me(t)].join(", "):t}function S0e(e,t){const n=e.value,r=t.value;if(null==n||null===r)return{explicit:e.explicit,value:null};if((M3(n)||Ve(n))&&(M3(r)||Ve(r)))return{explicit:e.explicit,value:H0e(n,r)};if(M3(n)||Ve(n))return{explicit:e.explicit,value:n};if(M3(r)||Ve(r))return{explicit:e.explicit,value:r};if(!(M3(n)||Ve(n)||M3(r)||Ve(r)))return{explicit:e.explicit,value:z0e(n,r)};throw new Error("It should never reach here")}function JN(e){return`Invalid specification ${Bt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Qmt='Autosize "fit" only works for single views and layered views.';function E0e(e){return("width"==e?"Width":"Height")+' "container" only works for single views and layered views.'}function V0e(e){return`${"width"==e?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==e?"x":"y"}".`}function D0e(e){return e?`Dropping "fit-${e}" because spec has discrete ${rr(e)}.`:'Dropping "fit" because spec has discrete size.'}function ek(e){return`Unknown field for ${e}. Cannot calculate view size.`}function L0e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Zmt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function A0e(e){return`Selection not supported for ${e} yet.`}function N0e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}function k0e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}function ugt(e){return`Ignoring an invalid transform: ${Bt(e)}.`}function T0e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function pgt(e){return`${e}Offset dropped because ${e} is continuous`}function I0e(e){return`Invalid field type "${e}".`}function F0e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function tk(e,t){return`Dropping ${Bt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}function aC(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function bgt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Mgt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function _gt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function nk(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${"ordinal"===t?"order":"magnitude"}.`}function Vgt(e){return`Using unaggregated domain with raw field has no effect (${Bt(e)}).`}function Dgt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Lgt(e){return`Unaggregated domain is currently unsupported for log scale (${Bt(e)}).`}function R0e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function O0e(e){return`The step for "${e}" is dropped because the ${"width"===e?"x":"y"} is continuous.`}const P0e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.";function sC(e,t){return`Invalid ${e}: ${Bt(t)}.`}function $0e(e){return`1D error band does not support ${e}.`}function B0e(e){return`Channel ${e} is required for "binned" bin.`}const U0e=mH(pH);let ws=U0e;function oe(...e){ws.warn(...e)}function _l(e){if(e&&ve(e))for(const t of ik)if(t in e)return!0;return!1}const q0e=["january","february","march","april","may","june","july","august","september","october","november","december"],tvt=q0e.map(e=>e.substr(0,3)),G0e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],nvt=G0e.map(e=>e.substr(0,3));function rk(e,t){const n=[];if(t&&void 0!==e.day&&te(e).length>1&&(oe(function qgt(e){return`Dropping day from datetime ${Bt(e)} as day cannot be combined with other units.`}(e)),delete(e=qe(e)).day),n.push(void 0!==e.year?e.year:2012),void 0!==e.month){const r=t?function ivt(e){if(Xy(e)&&(e=+e),mt(e))return e-1;{const t=e.toLowerCase(),n=q0e.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=tvt.indexOf(r);if(-1!==i)return i;throw new Error(sC("month",e))}}(e.month):e.month;n.push(r)}else if(void 0!==e.quarter){const r=t?function rvt(e){if(Xy(e)&&(e=+e),mt(e))return e>4&&oe(sC("quarter",e)),e-1;throw new Error(sC("quarter",e))}(e.quarter):e.quarter;n.push(mt(r)?3*r:`${r}*3`)}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){const r=t?function avt(e){if(Xy(e)&&(e=+e),mt(e))return e%7;{const t=e.toLowerCase(),n=G0e.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=nvt.indexOf(r);if(-1!==i)return i;throw new Error(sC("day",e))}}(e.day):e.day;n.push(mt(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function wl(e){const n=rk(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}const W0e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},ik=te(W0e);function xl(e){return ve(e)?e.binned:Y0e(e)}function Y0e(e){return e&&e.startsWith("binned")}function ak(e){return e.startsWith("utc")}const uvt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function oC(e){return ik.filter(t=>Q0e(e,t))}function X0e(e){const t=oC(e);return t[t.length-1]}function Q0e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&"seconds"===t&&"i"===e.charAt(n-1)||e.length>n+3&&"day"===t&&"o"===e.charAt(n+3)||n>0&&"year"===t&&"f"===e.charAt(n-1))}function Z0e(e){if(e)return`timeUnitSpecifier(${Bt(oC(e))}, ${Bt(uvt)})`}function o1(e){if(!e)return;let t;return ge(e)?t=Y0e(e)?{unit:e.substring(6),binned:!0}:{unit:e}:ve(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),ak(t.unit)&&(t.utc=!0,t.unit=function lvt(e){return e.substring(3)}(t.unit)),t}function K0e(e,t=(n=>n)){const n=o1(e),r=X0e(n.unit);if(r&&"day"!==r){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:s}=J0e(r,n.step);return`${t(wl({...i,[s]:+i[s]+a}))} - ${t(wl(i))}`}}const pvt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function J0e(e,t=1){if(function mvt(e){return!!pvt[e]}(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:3*t};case"week":return{part:"date",step:7*t}}}function sk(e){return!!e?.field&&void 0!==e.equal}function ok(e){return!!e?.field&&void 0!==e.lt}function ck(e){return!!e?.field&&void 0!==e.lte}function lk(e){return!!e?.field&&void 0!==e.gt}function uk(e){return!!e?.field&&void 0!==e.gte}function fk(e){if(e?.field){if(K(e.range)&&2===e.range.length)return!0;if(Ve(e.range))return!0}return!1}function dk(e){return!!e?.field&&(K(e.oneOf)||K(e.in))}function e6e(e){return dk(e)||sk(e)||fk(e)||ok(e)||lk(e)||ck(e)||uk(e)}function xs(e,t){return xC(e,{timeUnit:t,wrapTime:!0})}function t6e(e,t=!0){const{field:n}=e,r=o1(e.timeUnit),{unit:i,binned:a}=r||{},s=fe(e,{expr:"datum"}),o=i?`time(${a?s:function fvt(e,t,{end:n}={end:!1}){const r=PN(t),i=ak(e)?"utc":"";function a(c){return"quarter"===c?`(${i}quarter(${r})-1)`:`${i}${c}(${r})`}let s;const o={};for(const c of ik)Q0e(e,c)&&(o[c]=a(c),s=c);return n&&(o[s]+="+1"),function svt(e){const n=rk(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}(o)}(i,n)})`:s;if(sk(e))return`${o}===${xs(e.equal,i)}`;if(ok(e))return`${o}<${xs(e.lt,i)}`;if(lk(e))return`${o}>${xs(e.gt,i)}`;if(ck(e))return`${o}<=${xs(e.lte,i)}`;if(uk(e))return`${o}>=${xs(e.gte,i)}`;if(dk(e))return`indexof([${function yvt(e,t){return e.map(n=>xs(n,t))}(e.oneOf,i).join(",")}], ${o}) !== -1`;if(function vvt(e){return!!e?.field&&void 0!==e.valid}(e))return hk(o,e.valid);if(fk(e)){const{range:c}=e,l=Ve(c)?{signal:`${c.signal}[0]`}:c[0],u=Ve(c)?{signal:`${c.signal}[1]`}:c[1];if(null!==l&&null!==u&&t)return"inrange("+o+", ["+xs(l,i)+", "+xs(u,i)+"])";const f=[];return null!==l&&f.push(`${o} >= ${xs(l,i)}`),null!==u&&f.push(`${o} <= ${xs(u,i)}`),f.length>0?f.join(" && "):"true"}throw new Error(`Invalid field predicate: ${Bt(e)}`)}function hk(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Cvt(e){return e6e(e)&&e.timeUnit?{...e,timeUnit:o1(e.timeUnit)}:e}const zl={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function bvt(e){return"quantitative"===e||"temporal"===e}function n6e(e){return"ordinal"===e||"nominal"===e}const Hl=zl.quantitative,pk=zl.ordinal,Nu=zl.temporal,mk=zl.nominal,ku=zl.geojson;te(zl);const ar={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},cC={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function _vt(e,t){const n=cC[e],r=cC[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}te(cC);const wvt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function r6e(e){return wvt[e]}const i6e=new Set(["linear","log","pow","sqrt","symlog"]),a6e=new Set([...i6e,"time","utc"]);function s6e(e){return i6e.has(e)}const o6e=new Set(["quantile","quantize","threshold"]),xvt=new Set([...a6e,...o6e,"sequential","identity"]),zvt=new Set(["ordinal","bin-ordinal","point","band"]);function c1(e){return zvt.has(e)}function $r(e){return xvt.has(e)}function fa(e){return a6e.has(e)}function Tu(e){return o6e.has(e)}function c6e(e){return e?.param}const l6e={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:nFt,domain:rFt,range:iFt,rangeMax:aFt,rangeMin:sFt,scheme:oFt,...Dvt}=(te(l6e),l6e),Lvt=te(Dvt);function gk(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return fa(e)||"band"===e||"point"===e;case"padding":case"rangeMin":case"rangeMax":return fa(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return"band"===e;case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return fa(e);case"nice":return fa(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return $r(e)&&!ct(["log","time","utc","threshold","quantile"],e)}}function u6e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Au(e)?void 0:function Sgt(e){return`Cannot use the scale property "${e}" with non-color channel.`}(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const X1={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},f6e=X1.arc,lC=X1.area,uC=X1.bar,kvt=X1.image,fC=X1.line,dC=X1.point,Tvt=X1.rect,hC=X1.rule,d6e=X1.text,vk=X1.tick,Ivt=X1.trail,yk=X1.circle,Ck=X1.square,h6e=X1.geoshape;function x3(e){return["line","area","trail"].includes(e)}function gd(e){return["rect","bar","image","arc"].includes(e)}const p6e=new Set(te(X1));function da(e){return e.type}const Ovt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],m6e=te({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),g6e=te({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function Sl(e){return e&&null!=e.band}const Bvt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]};function bk(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:a}=e,s=_k(e);return ce(n)&&!m0e(n.aggregate)&&i&&fa(i.get("type"))?function Wvt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return x3(n.type)?r:null===Dt("invalid",n,i)?[Yvt(e,t),r]:r}({fieldDef:n,channel:t,markDef:r,ref:s,config:a}):s}function Yvt(e,t){return{test:Mk(e,!0),..."y"===bl(t)?{field:{group:"height"}}:{value:0}}}function Mk(e,t=!0){return hk(ge(e)?e:fe(e,{expr:"datum"}),!t)}function El(e,t,n,r){const i={};if(t&&(i.scale=t),Hs(e)){const{datum:a}=e;_l(a)?i.signal=wl(a):Ve(a)?i.signal=a.signal:pd(a)?i.signal=a.expr:i.value=a}else i.field=fe(e,n);if(r){const{offset:a,band:s}=r;a&&(i.offset=a),s&&(i.band=s)}return i}function pC({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:a="end",bandPosition:s=.5}){const o=!Ve(s)&&0<s&&s<1?"datum":void 0,c=fe(t,{expr:o,suffix:i}),l=void 0!==n?fe(n,{expr:o}):fe(t,{suffix:a,expr:o}),u={};if(0===s||1===s)u.scale=e,u.field=0===s?c:l;else{const f=Ve(s)?`(1-${s.signal}) * ${c} + ${s.signal} * ${l}`:`${1-s} * ${c} + ${s} * ${l}`;u.signal=`scale("${e}", ${f})`}return r&&(u.offset=r),u}function _k({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:a,scale:s,stack:o,offset:c,defaultRef:l,bandPosition:u}){if(t){if(Ye(t)){const f=s?.get("type");if(H2(t)){u??(u=z3({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Zt(d)||u&&h&&p===Nu)return o?.impute?El(t,a,{binSuffix:"mid"},{offset:c}):u&&!c1(f)?pC({scaleName:a,fieldOrDatumDef:t,bandPosition:u,offset:c}):El(t,a,Md(t,e)?{binSuffix:"range"}:{},{offset:c});if(L1(d)){if(ce(n))return pC({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:u,offset:c});oe(B0e(e===hn?aa:ys))}}return El(t,a,c1(f)?{binSuffix:"range"}:{},{offset:c,band:"band"===f?u??t.bandPosition??.5:void 0})}if(pa(t)){const d=c?{offset:c}:{};return{...vd(e,t.value),...d}}}return Je(l)&&(l=l()),l&&{...l,...c?{offset:c}:{}}}function vd(e,t){return ct(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:ct(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:an(t)}function Vl(e){return e&&"number"!==e&&"time"!==e}function y6e(e,t,n){return`${e}(${t}${n?`, ${Bt(n)}`:""})`}const Zvt=" \u2013 ";function wk({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:a}){if(Vl(n))return ha({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:a});const s=C6e(e,r,i),o=Iu(e);if(void 0===t&&void 0===n&&a.customFormatTypes){if("quantitative"===o){if(i&&a.normalizedNumberFormatType)return ha({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:r,config:a});if(a.numberFormatType)return ha({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:r,config:a})}if("temporal"===o&&a.timeFormatType&&ce(e)&&void 0===e.timeUnit)return ha({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:r,config:a})}if(Pu(e)){const c=function Jvt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:a}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:`${a?"utc":"time"}Format(${e}, '${n=ge(n)?n:i}')`:function dvt(e,t,n){if(!e)return;const r=Z0e(e);return`${n||ak(e)?"utc":"time"}Format(${t}, ${r})`}(t,e,a)}({field:s,timeUnit:ce(e)?o1(e.timeUnit)?.unit:void 0,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:Dl(e)&&e.scale?.type===ar.UTC});return c?{signal:c}:void 0}return t=xk({type:o,specifiedFormat:t,config:a,normalizeStack:i}),ce(e)&&Zt(e.bin)?{signal:yd(s,fe(e,{expr:r,binSuffix:"end"}),t,n,a)}:t||"quantitative"===Iu(e)?{signal:`${_6e(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function C6e(e,t,n){return ce(e)?n?`${fe(e,{expr:t,suffix:"end"})}-${fe(e,{expr:t,suffix:"start"})}`:fe(e,{expr:t}):function Xvt(e){const{datum:t}=e;return _l(t)?wl(t):`${Bt(t)}`}(e)}function ha({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:a,field:s}){return s??(s=C6e(e,r,i)),"datum.value"!==s&&ce(e)&&Zt(e.bin)?{signal:yd(s,fe(e,{expr:r,binSuffix:"end"}),t,n,a)}:{signal:y6e(n,s,t)}}function b6e(e,t,n,r,i,a){if(!(ge(r)&&Vl(r)||void 0===n&&void 0===r&&i.customFormatTypes&&"quantitative"===Iu(e)&&(i.normalizedNumberFormatType&&Fu(e)&&"normalize"===e.stack||i.numberFormatType))){if(Fu(e)&&"normalize"===e.stack&&i.normalizedNumberFormat)return xk({type:"quantitative",config:i,normalizeStack:!0});if(Pu(e)){const s=ce(e)?o1(e.timeUnit)?.unit:void 0;return void 0===s&&i.customFormatTypes&&i.timeFormatType?void 0:function Kvt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:Z0e(t)}:r?void 0:n.timeFormat)}({specifiedFormat:n,timeUnit:s,config:i,omitTimeFormatConfig:a})}return xk({type:t,specifiedFormat:n,config:i})}}function M6e(e,t,n){return e&&(Ve(e)||"number"===e||"time"===e)?e:Pu(t)&&"time"!==n&&"utc"!==n?ce(t)&&o1(t?.timeUnit)?.utc?"utc":"time":void 0}function xk({type:e,specifiedFormat:t,config:n,normalizeStack:r}){return ge(t)?t:e===Hl?r?n.normalizedNumberFormat:n.numberFormat:void 0}function _6e(e,t){return`format(${e}, "${t||""}")`}function w6e(e,t,n,r){return Vl(n)?y6e(n,e,t):_6e(e,(ge(t)?t:void 0)??r.numberFormat)}function yd(e,t,n,r,i){if(void 0===n&&void 0===r&&i.customFormatTypes&&i.numberFormatType)return yd(e,t,i.numberFormat,i.numberFormatType,i);const a=w6e(e,n,r,i),s=w6e(t,n,r,i);return`${hk(e,!1)} ? "null" : ${a} + "${Zvt}" + ${s}`}const mC="min",eyt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function x6e(e){return e in eyt}function z6e(e){return!!e?.encoding}function zs(e){return e&&("count"===e.op||!!e.field)}function H6e(e){return e&&K(e)}function Cd(e){return"row"in e||"column"in e}function zk(e){return!!e&&"header"in e}function gC(e){return"facet"in e}function S6e(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Hk(e){return"sort"in e}function z3({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Ye(e)&&void 0!==e.bandPosition)return e.bandPosition;if(ce(e)){const{timeUnit:i,bin:a}=e;if(i&&!t)return Io("timeUnitBandPosition",n,r);if(Zt(a))return.5}}function E6e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:a,useVlSizeChannel:s}){const o=rr(e),c=Dt(s?"size":o,r,i,{vgChannel:o});if(void 0!==c)return c;if(ce(t)){const{timeUnit:l,bin:u}=t;if(l&&!n)return{band:Io("timeUnitBandSize",r,i)};if(Zt(u)&&!c1(a))return{band:1}}return gd(r.type)?a?c1(a)?i[r.type]?.discreteBandSize||{band:1}:i[r.type]?.continuousBandSize:i[r.type]?.discreteBandSize:void 0}function V6e(e,t,n,r){return!!(Zt(e.bin)||e.timeUnit&&H2(e)&&"temporal"===e.type)&&void 0!==z3({fieldDef:e,fieldDef2:t,markDef:n,config:r})}function D6e(e){return e&&!!e.sort&&!e.field}function vC(e){return e&&"condition"in e}function yC(e){const t=e?.condition;return!!t&&!K(t)&&ce(t)}function bd(e){const t=e?.condition;return!!t&&!K(t)&&Ye(t)}function ce(e){return e&&(!!e.field||"count"===e.aggregate)}function Iu(e){return e?.type}function Hs(e){return e&&"datum"in e}function H3(e){return H2(e)&&!bC(e)||CC(e)}function L6e(e){return H2(e)&&"quantitative"===e.type&&!e.bin||CC(e)}function CC(e){return Hs(e)&&mt(e.datum)}function Ye(e){return ce(e)||Hs(e)}function H2(e){return e&&("field"in e||"count"===e.aggregate)&&"type"in e}function pa(e){return e&&"value"in e&&"value"in e}function Dl(e){return e&&("scale"in e||"sort"in e)}function Fu(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function A6e(e){return e&&"legend"in e}function N6e(e){return e&&("format"in e||"formatType"in e)}function iyt(e){return er(e,["legend","axis","header","scale"])}function fe(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,a="";if(function oyt(e){return"count"===e.aggregate}(e))n=Jle("count");else{let s;if(!t.nofn)if(function ayt(e){return"op"in e}(e))s=e.op;else{const{bin:o,aggregate:c,timeUnit:l}=e;Zt(o)?(s=g0e(o),i=(t.binSuffix??"")+(t.suffix??"")):c?b3(c)?(a=`["${n}"]`,n=`argmax_${c.argmax}`):ko(c)?(a=`["${n}"]`,n=`argmin_${c.argmin}`):s=String(c):l&&!xl(l)&&(s=function hvt(e){const{utc:t,...n}=o1(e);return n.unit?(t?"utc":"")+te(n).map(r=>dn(`${"unit"===r?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+te(n).map(r=>dn(`_${r}_${n[r]}`)).join("")}(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?$N(n):t.expr?Qle(n,t.expr)+a:hi(n)+a}function bC(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ce(e)&&!!e.bin;case"temporal":return!1}throw new Error(I0e(e.type))}const k6e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return function lyt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(b3(t))return`${i} for argmax(${t.argmax})`;if(ko(t))return`${i} for argmin(${t.argmin})`;const a=r&&!xl(r)?o1(r):void 0,s=t||a?.unit||a?.maxbins&&"timeunit"||Zt(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}(e);default:return function cyt(e,t){const{field:n,bin:r,timeUnit:i,aggregate:a}=e;if("count"===a)return t.countTitle;if(Zt(r))return`${n} (binned)`;if(i&&!xl(i)){const s=o1(i)?.unit;if(s)return`${n} (${oC(s).join("-")})`}else if(a)return b3(a)?`${n} for max ${a.argmax}`:ko(a)?`${n} for min ${a.argmin}`:`${ld(a)} of ${n}`;return n}(e,t)}};let T6e=k6e;function I6e(e){T6e=e}function Ru(e,t,{allowDisabling:n,includeDefault:r=!0}){const i=Sk(e)?.title;if(!ce(e))return i??e.title;const a=e,s=r?Ek(a,t):void 0;return n?Nn(i,a.title,s):i??a.title??s}function Sk(e){return Fu(e)&&e.axis?e.axis:A6e(e)&&e.legend?e.legend:zk(e)&&e.header?e.header:void 0}function Ek(e,t){return T6e(e,t)}function MC(e){if(N6e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}{const t=Sk(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function Ss(e){return ce(e)?e:yC(e)?e.condition:void 0}function Jn(e){return Ye(e)?e:bd(e)?e.condition:void 0}function F6e(e,t,n,r={}){return ge(e)||mt(e)||_c(e)?(oe(function mgt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Bt(n)}}.`}(t,ge(e)?"string":mt(e)?"number":"boolean",e)),{value:e}):Ye(e)?_C(e,t,n,r):bd(e)?{...e,condition:_C(e.condition,t,n,r)}:e}function _C(e,t,n,r){if(N6e(e)){const{format:i,formatType:a,...s}=e;if(Vl(a)&&!n.customFormatTypes)return oe(T0e(t)),_C(s,t,n,r)}else{const i=Fu(e)?"axis":A6e(e)?"legend":zk(e)?"header":null;if(i&&e[i]){const{format:a,formatType:s,...o}=e[i];if(Vl(s)&&!n.customFormatTypes)return oe(T0e(t)),_C({...e,[i]:o},t,n,r)}}return ce(e)?Vk(e,t,r):function dyt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=mt(n)?"quantitative":ge(n)?"nominal":_l(n)?"temporal":void 0,{...e,type:t}}(e)}function Vk(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:a,field:s}=e,o={...e};if(!n&&r&&!ZN(r)&&!b3(r)&&!ko(r)&&(oe(function vgt(e){return`Invalid aggregation operator "${e}".`}(r)),delete o.aggregate),i&&(o.timeUnit=o1(i)),s&&(o.field=`${s}`),Zt(a)&&(o.bin=wC(a,t)),L1(a)&&!kn(t)&&oe(function Xgt(e){return`Channel ${e} should not be used with "binned" bin.`}(t)),H2(o)){const{type:c}=o,l=function Mvt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Hl:return"quantitative";case"t":case Nu:return"temporal";case"o":case pk:return"ordinal";case"n":case mk:return"nominal";case ku:return"geojson"}}(c);c!==l&&(o.type=l),"quantitative"!==c&&m0e(r)&&(oe(function ggt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}(c,r)),o.type="quantitative")}else if(!u0e(t)){const c=function fyt(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Hk(e)&&K(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!b3(n)&&!ko(n))return"quantitative";if(Dl(e)&&e.scale?.type)switch(cC[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(o,t);o.type=c}if(H2(o)){const{compatible:c,warning:l}=function hyt(e,t){const n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case So:case Eo:case Qy:return bC(e)?Ou:{compatible:!1,warning:Mgt(t)};case hn:case s1:case p3:case Du:case tr:case Cs:case bs:case fd:case dd:case Zy:case Cl:case Ky:case Jy:case yl:case pi:case sa:case eC:return Ou;case ca:case mi:case oa:case la:return n!==Hl?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Ou;case Ao:case m3:case g3:case v3:case Lo:case Do:case Vo:case aa:case ys:return"nominal"!==n||e.sort?Ou:{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`};case nr:case y3:return bC(e)||function syt(e){return Dl(e)&&Tu(e.scale?.type)}(e)?Ou:{compatible:!1,warning:_gt(t)};case Lu:return"nominal"!==e.type||"sort"in e?Ou:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}(o,t)||{};!1===c&&oe(l)}if(Hk(o)&&ge(o.sort)){const{sort:c}=o;if(x6e(c))return{...o,sort:{encoding:c}};const l=c.substr(1);if("-"===c.charAt(0)&&x6e(l))return{...o,sort:{encoding:l,order:"descending"}}}if(zk(o)){const{header:c}=o;if(c){const{orient:l,...u}=c;if(l)return{...o,header:{...u,labelOrient:c.labelOrient||l,titleOrient:c.titleOrient||l}}}}return o}function wC(e,t){return _c(e)?{maxbins:v0e(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:{...e,maxbins:v0e(t)}}const Ou={compatible:!0};function Pu(e){const{formatType:t}=MC(e);return"time"===t||!t&&function pyt(e){return e&&("temporal"===e.type||ce(e)&&!!e.timeUnit)}(e)}function xC(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){const a=t&&o1(t)?.unit;let o,s=a||"temporal"===n;return pd(e)?o=e.expr:Ve(e)?o=e.signal:_l(e)?(s=!0,o=wl(e)):(ge(e)||mt(e))&&s&&(o=`datetime(${Bt(e)})`,function cvt(e){return!!W0e[e]}(a)&&(mt(e)&&e<1e4||ge(e)&&isNaN(Date.parse(e)))&&(o=wl({[a]:e}))),o?r&&s?`time(${o})`:o:i?void 0:Bt(e)}function R6e(e,t){const{type:n}=e;return t.map(r=>{const a=xC(r,{timeUnit:ce(e)&&!xl(e.timeUnit)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==a?{signal:a}:r})}function Md(e,t){return Zt(e.bin)?No(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const O6e={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function _d(e){return e?.condition}const P6e=["domain","grid","labels","ticks","title"],myt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},$6e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},B6e={...$6e,style:1,labelExpr:1,encoding:1};function U6e(e){return!!B6e[e]}te(B6e);const j6e=te({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function Fo(e){return"mark"in e}class zC{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return!!Fo(t)&&function Gvt(e){return da(e)?e.type:e}(t.mark)===this.name}}function Ll(e,t){const n=e&&e[t];return!!n&&(K(n)?gl(n,r=>!!r.field):ce(n)||yC(n))}function q6e(e,t){const n=e&&e[t];return!!n&&(K(n)?gl(n,r=>!!r.field):ce(n)||Hs(n)||bd(n))}function G6e(e,t){if(kn(t)){const n=e[t];if((ce(n)||Hs(n))&&(n6e(n.type)||ce(n)&&n.timeUnit))return q6e(e,qN(t))}return!1}function Dk(e){return gl(zmt,t=>{if(Ll(e,t)){const n=e[t];if(K(n))return gl(n,r=>!!r.aggregate);{const r=Ss(n);return r&&!!r.aggregate}}return!1})}function W6e(e,t){const n=[],r=[],i=[],a=[],s={};return Lk(e,(o,c)=>{if(ce(o)){const{field:l,aggregate:u,bin:f,timeUnit:d,...h}=o;if(u||d||f){const m=Sk(o)?.title;let g=fe(o,{forAs:!0});const v={...m?[]:{title:Ru(o,t,{allowDisabling:!0})},...h,field:g};if(u){let y;if(b3(u)?(y="argmax",g=fe({op:"argmax",field:u.argmax},{forAs:!0}),v.field=`${g}.${l}`):ko(u)?(y="argmin",g=fe({op:"argmin",field:u.argmin},{forAs:!0}),v.field=`${g}.${l}`):"boxplot"!==u&&"errorbar"!==u&&"errorband"!==u&&(y=u),y){const C={op:y,as:g};l&&(C.field=l),a.push(C)}}else if(n.push(g),H2(o)&&Zt(f))r.push({bin:f,field:l,as:g}),n.push(fe(o,{binSuffix:"end"})),Md(o,c)&&n.push(fe(o,{binSuffix:"range"})),kn(c)&&(s[`${c}2`]={field:`${g}_end`}),v.bin="binned",u0e(c)||(v.type=Hl);else if(d&&!xl(d)){i.push({timeUnit:d,field:l,as:g});const y=H2(o)&&o.type!==Nu&&"time";y&&(c===fd||c===Cl?v.formatType=y:function Nmt(e){return!!GN[e]}(c)?v.legend={formatType:y,...v.legend}:kn(c)&&(v.axis={formatType:y,...v.axis}))}s[c]=v}else n.push(l),s[c]=e[c]}else s[c]=e[c]}),{bins:r,timeUnits:i,aggregate:a,groupby:n,encoding:s}}function gyt(e,t,n){const r=function Tmt(e,t){return function Fmt(e){switch(e){case tr:case Cs:case bs:case eC:case dd:case Zy:case Cl:case Ky:case Lu:case Ao:case m3:case g3:case v3:case Qy:case So:case Eo:return p0e;case hn:case s1:case p3:case Du:case oa:case ca:return Imt;case aa:case ys:case la:case mi:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Lo:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case y3:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case nr:return{point:"always",geoshape:"always"};case fd:return{text:"always"};case yl:return{point:"always",square:"always",text:"always"};case Jy:return{image:"always"};case pi:case sa:return{text:"always",arc:"always"};case Do:case Vo:return{arc:"always"}}}(e)[t]}(t,n);if(!r)return!1;if("binned"===r){const i=e[t===aa?hn:s1];return!!(ce(i)&&ce(e[t])&&L1(i.bin))}return!0}function HC(e,t){const n={};for(const r of te(e)){const i=F6e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Lk(e,t,n){if(e)for(const r of te(e)){const i=e[r];if(K(i))for(const a of i)t.call(n,a,r);else t.call(n,i,r)}}function Y6e(e,t){return te(t).reduce((n,r)=>{switch(r){case hn:case s1:case Ky:case eC:case Jy:case aa:case ys:case p3:case Du:case pi:case Do:case sa:case Vo:case oa:case ca:case la:case mi:case fd:case nr:case yl:case Cl:return n;case Lu:if("line"===e||"trail"===e)return n;case dd:case Zy:{const i=t[r];if(K(i)||ce(i))for(const a of me(i))a.aggregate||n.push(fe(a,{}));return n}case Lo:if("trail"===e)return n;case tr:case Cs:case bs:case Ao:case m3:case g3:case y3:case v3:{const i=Ss(t[r]);return i&&!i.aggregate&&n.push(fe(i,{})),n}}},[])}function Ak(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:o})=>{const c=r?` of ${Nk(t)}`:"";return{field:s+t.field,type:t.type,title:Ve(o)?{signal:`${o}"${escape(c)}"`}:o+c}}),a=function yyt(e){const t=[];for(const n of te(e))if(Ll(e,n)){const i=me(e[n]);for(const a of i)ce(a)?t.push(a):yC(a)&&t.push(a.condition)}return t}(n).map(iyt);return{tooltip:[...i,...vs(a,ot)]}}function Nk(e){const{title:t,field:n}=e;return Nn(t,n)}function kk(e,t,n,r,i){const{scale:a,axis:s}=n;return({partName:o,mark:c,positionPrefix:l,endPositionPrefix:u,extraEncoding:f={}})=>{const d=Nk(n);return X6e(e,o,i,{mark:c,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...void 0!==d?{title:d}:{},...void 0!==a?{scale:a}:{},...void 0!==s?{axis:s}:{}},...ge(u)?{[`${t}2`]:{field:`${u}_${n.field}`}}:{},...r,...f}})}}function X6e(e,t,n,r){const{clip:i,color:a,opacity:s}=e,o=e.type;return e[t]||void 0===e[t]&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...a?{color:a}:{},...s?{opacity:s}:{},...da(r.mark)?r.mark:{type:r.mark},style:`${o}-${String(t)}`,..._c(e[t])?{}:e[t]}}]:[]}function Q6e(e,t,n){const{encoding:r}=e,i="vertical"===t?"y":"x",s=r[`${i}2`],o=r[`${i}Error`],c=r[`${i}Error2`];return{continuousAxisChannelDef:SC(r[i],n),continuousAxisChannelDef2:SC(s,n),continuousAxisChannelDefError:SC(o,n),continuousAxisChannelDefError2:SC(c,n),continuousAxis:i}}function SC(e,t){if(e?.aggregate){const{aggregate:n,...r}=e;return n!==t&&oe(function Ygt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}(n,t)),r}return e}function Z6e(e,t){const{mark:n,encoding:r}=e,{x:i,y:a}=r;if(da(n)&&n.orient)return n.orient;if(H3(i)){if(H3(a)){const s=ce(i)&&i.aggregate,o=ce(a)&&a.aggregate;if(!s&&o===t)return"vertical";if(!o&&s===t)return"horizontal";if(s===t&&o===t)throw new Error("Both x and y cannot have aggregate");return Pu(a)&&!Pu(i)?"horizontal":"vertical"}return"horizontal"}if(H3(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}const EC="boxplot",_yt=new zC(EC,J6e);function K6e(e){return mt(e)?"tukey":e}function J6e(e,{config:t}){e={...e,encoding:HC(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:a,...s}=e,o=da(n)?n:{type:n};i&&oe(A0e("boxplot"));const c=o.extent??t.boxplot.extent,l=Dt("size",o,t),u=o.invalid,f=K6e(c),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:v,aggregate:y,encodingWithoutContinuousAxis:C,ticksOrient:b,boxOrient:M,customTooltipWithoutAggregatedField:w}=function wyt(e,t,n){const r=Z6e(e,EC),{continuousAxisChannelDef:i,continuousAxis:a}=Q6e(e,r,EC),s=i.field,o=K6e(t),c=[...eue(s),{op:"median",field:s,as:`mid_box_${s}`},{op:"min",field:s,as:("min-max"===o?"lower_whisker_":"min_")+s},{op:"max",field:s,as:("min-max"===o?"upper_whisker_":"max_")+s}],l="min-max"===o||"tukey"===o?[]:[{calculate:`datum["upper_box_${s}"] - datum["lower_box_${s}"]`,as:`iqr_${s}`},{calculate:`min(datum["upper_box_${s}"] + datum["iqr_${s}"] * ${t}, datum["max_${s}"])`,as:`upper_whisker_${s}`},{calculate:`max(datum["lower_box_${s}"] - datum["iqr_${s}"] * ${t}, datum["min_${s}"])`,as:`lower_whisker_${s}`}],{[a]:u,...f}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:h}=function byt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(K(t)){for(const a of t)a.aggregate?(r||(r=[]),r.push(a)):(i||(i=[]),i.push(a));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return K(i)&&1===i.length&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}(f),{bins:p,timeUnits:m,aggregate:g,groupby:v,encoding:y}=W6e(h,n),C="vertical"===r?"horizontal":"vertical",b=r;return{bins:p,timeUnits:m,transform:[...p,...m,{aggregate:[...g,...c],groupby:v},...l],groupby:v,aggregate:g,continuousAxisChannelDef:i,continuousAxis:a,encodingWithoutContinuousAxis:y,ticksOrient:C,boxOrient:b,customTooltipWithoutAggregatedField:d}}(e,c,t),{color:_,size:z,...S}=C,D=Ee=>kk(o,g,m,Ee,t.boxplot),L=D(S),R=D(C),N=D({...S,...z?{size:z}:{}}),x=Ak([{fieldPrefix:"min-max"===f?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===f?"lower_whisker_":"min_",titlePrefix:"Min"}],m,C),H={type:"tick",color:"black",opacity:1,orient:b,invalid:u,aria:!1},V="min-max"===f?x:Ak([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,C),T=[...L({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:V}),...L({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:V}),...L({partName:"ticks",mark:H,positionPrefix:"lower_whisker",extraEncoding:V}),...L({partName:"ticks",mark:H,positionPrefix:"upper_whisker",extraEncoding:V})],E=[..."tukey"!==f?T:[],...R({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:M,invalid:u,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:x}),...N({partName:"median",mark:{type:"tick",invalid:u,...ve(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:b,aria:!1},positionPrefix:"mid_box",extraEncoding:x})];if("min-max"===f)return{...s,transform:(s.transform??[]).concat(p),layer:E};const k=`datum["lower_box_${m.field}"]`,A=`datum["upper_box_${m.field}"]`,O=`(${A} - ${k})`,B=`${k} - ${c} * ${O}`,U=`${A} + ${c} * ${O}`,$=`datum["${m.field}"]`,G={joinaggregate:eue(m.field),groupby:v},se={transform:[{filter:`(${B} <= ${$}) && (${$} <= ${U})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...y],groupby:v}],layer:T},{tooltip:J,...he}=S,{scale:W,axis:ne}=m,re=Nk(m),j=er(ne,["title"]),pe=X6e(o,"outliers",t.boxplot,{transform:[{filter:`(${$} < ${B}) || (${$} > ${U})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...void 0!==re?{title:re}:{},...void 0!==W?{scale:W}:{},...$t(j)?{}:{axis:j}},...he,..._?{color:_}:{},...w?{tooltip:w}:{}}})[0];let _e;const Pe=[...d,...h,G];return pe?_e={transform:Pe,layer:[pe,se]}:(_e=se,_e.transform.unshift(...Pe)),{...s,layer:[_e,{transform:p,layer:E}]}}function eue(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}const Tk="errorbar",zyt=new zC(Tk,tue);function tue(e,{config:t}){e={...e,encoding:HC(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:a,ticksOrient:s,markDef:o,outerSpec:c,tooltipEncoding:l}=nue(e,Tk,t);delete a.size;const u=kk(o,i,r,a,t.errorbar),f=o.thickness,d=o.size,h={type:"tick",orient:s,aria:!1,...void 0!==f?{thickness:f}:{},...void 0!==d?{size:d}:{}},p=[...u({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...u({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...u({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...void 0!==f?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...c,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function nue(e,t,n){const{mark:r,encoding:i,params:a,projection:s,...o}=e,c=da(r)?r:{type:r};a&&oe(A0e(t));const{orient:l,inputType:u}=function Hyt(e,t){const{encoding:n}=e;if(function Syt(e){return(Ye(e.x)||Ye(e.y))&&!Ye(e.x2)&&!Ye(e.y2)&&!Ye(e.xError)&&!Ye(e.xError2)&&!Ye(e.yError)&&!Ye(e.yError2)}(n))return{orient:Z6e(e,t),inputType:"raw"};const r=function Eyt(e){return Ye(e.x2)||Ye(e.y2)}(n),i=function Vyt(e){return Ye(e.xError)||Ye(e.xError2)||Ye(e.yError)||Ye(e.yError2)}(n),a=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const o=n.x2,c=n.y2;if(Ye(o)&&Ye(c))throw new Error(`${t} cannot have both x2 and y2`);if(Ye(o)){if(H3(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}if(Ye(c)){if(H3(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}{const o=n.xError,l=n.yError,u=n.yError2;if(Ye(n.xError2)&&!Ye(o))throw new Error(`${t} cannot have xError2 without xError`);if(Ye(u)&&!Ye(l))throw new Error(`${t} cannot have yError2 without yError`);if(Ye(o)&&Ye(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Ye(o)){if(H3(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(Ye(l)){if(H3(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=Q6e(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:v,tooltipSummary:y,tooltipTitleWithFieldName:C}=function Dyt(e,t,n,r,i,a,s,o){let c=[],l=[];const u=t.field;let f,d=!1;if("raw"===a){const h=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":o.errorbar.center,p=e.extent?e.extent:"mean"===h?"stderr":"iqr";if("median"===h!=("iqr"===p)&&oe(function Wgt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}(h,p,s)),"stderr"===p||"stdev"===p)c=[{op:p,field:u,as:`extent_${u}`},{op:h,field:u,as:`center_${u}`}],l=[{calculate:`datum["center_${u}"] + datum["extent_${u}"]`,as:`upper_${u}`},{calculate:`datum["center_${u}"] - datum["extent_${u}"]`,as:`lower_${u}`}],f=[{fieldPrefix:"center_",titlePrefix:ld(h)},{fieldPrefix:"upper_",titlePrefix:rue(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:rue(h,p,"-")}],d=!0;else{let m,g,v;"ci"===p?(m="mean",g="ci0",v="ci1"):(m="median",g="q1",v="q3"),c=[{op:g,field:u,as:`lower_${u}`},{op:v,field:u,as:`upper_${u}`},{op:m,field:u,as:`center_${u}`}],f=[{fieldPrefix:"upper_",titlePrefix:Ru({field:u,aggregate:v,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Ru({field:u,aggregate:g,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Ru({field:u,aggregate:m,type:"quantitative"},o,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&oe(function Ggt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}(e.center,e.extent)),"aggregated-upper-lower"===a?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${u}`},{calculate:`datum["${u}"]`,as:`lower_${u}`}]):"aggregated-error"===a&&(f=[{fieldPrefix:"",titlePrefix:u}],l=[{calculate:`datum["${u}"] + datum["${r.field}"]`,as:`upper_${u}`}],l.push(i?{calculate:`datum["${u}"] + datum["${i.field}"]`,as:`lower_${u}`}:{calculate:`datum["${u}"] - datum["${r.field}"]`,as:`lower_${u}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:vl(vl(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:c,tooltipSummary:f,tooltipTitleWithFieldName:d}}(c,f,d,h,p,u,t,n),{[m]:b,["x"===m?"x2":"y2"]:M,["x"===m?"xError":"yError"]:w,["x"===m?"xError2":"yError2"]:_,...z}=i,{bins:S,timeUnits:D,aggregate:L,groupby:R,encoding:N}=W6e(z,n),x=[...L,...g],H="raw"!==u?[]:R,V=Ak(y,f,N,C);return{transform:[...o.transform??[],...S,...D,...0===x.length?[]:[{aggregate:x,groupby:H}],...v],groupby:H,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:N,ticksOrient:"vertical"===l?"horizontal":"vertical",markDef:c,outerSpec:o,tooltipEncoding:V}}function rue(e,t,n){return`${ld(e)} ${n} ${t}`}const Ik="errorband",Ayt=new zC(Ik,iue);function iue(e,{config:t}){e={...e,encoding:HC(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:a,markDef:s,outerSpec:o,tooltipEncoding:c}=nue(e,Ik,t),l=s,u=kk(l,i,r,a,t.errorband),f=void 0!==e.encoding.x&&void 0!==e.encoding.y;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?oe($0e("interpolate")):l.tension&&oe($0e("tension")),{...o,transform:n,layer:[...u({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c}),...u({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:c}),...u({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:c})]}}const Fk={};function Rk(e,t,n){const r=new zC(e,t);Fk[e]={normalizer:r,parts:n}}Rk(EC,J6e,["box","median","outliers","rule","ticks"]),Rk(Tk,tue,["ticks","rule"]),Rk(Ik,iue,["band","borders"]);const kyt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],aue={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},sue={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Tyt=te(aue),Iyt=te(sue),oue=te({header:1,headerRow:1,headerColumn:1,headerFacet:1}),cue=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],lue={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ma=(te(lue),"_vgsid_"),Ryt={point:{on:"click",fields:[ma],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Ok(e){return"legend"===e||!!e?.legend}function Pk(e){return Ok(e)&&ve(e)}function $k(e){return!!e?.select}function uue(e){const t=[];for(const n of e||[]){if($k(n))continue;const{expr:r,bind:i,...a}=n;if(i&&r){const s={...a,bind:i,init:r};t.push(s)}else{const s={...a,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function Bk(e){return"concat"in e}function VC(e){return"vconcat"in e}function Uk(e){return"hconcat"in e}function fue({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Es(e){return ve(e)&&void 0!==e.step}function due(e){return e.view||e.width||e.height}const Pyt=te({align:1,bounds:1,center:1,columns:1,spacing:1});function jk(e,t){return e[t]??e["width"===t?"continuousWidth":"continuousHeight"]}function DC(e,t){const n=LC(e,t);return Es(n)?n.step:pue}function LC(e,t){return Nn(e[t]??e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}const pue=20,Uyt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:pue},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:{binSpacing:1,continuousBandSize:5,minBandSize:.25,timeUnitBandPosition:.5},circle:{},geoshape:{},image:{},line:{},point:{},rect:{binSpacing:0,continuousBandSize:5,minBandSize:.25,timeUnitBandPosition:.5},rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Ryt,style:{},title:{},facet:{spacing:20},concat:{spacing:20},normalizedNumberFormat:".0%"},Ro=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],mue={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},gue={blue:Ro[0],orange:Ro[1],red:Ro[2],teal:Ro[3],green:Ro[4],yellow:Ro[5],purple:Ro[6],pink:Ro[7],brown:Ro[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function vue(e){const t=te(e||{}),n={};for(const r of t){const i=e[r];n[r]=_d(i)?C0e(i):Pr(i)}return n}const Yyt=[...g6e,...j6e,...oue,"background","padding","legend","lineBreak","scale","style","title","view"];function yue(e={}){const{color:t,font:n,fontSize:r,selection:i,...a}=e,s=g6({},qe(Uyt),n?function Gyt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}(n):{},t?function jyt(e={}){return{signals:[{name:"color",value:ve(e)?{...gue,...e}:gue}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(t):{},r?function qyt(e){return{signals:[{name:"fontSize",value:ve(e)?{...mue,...e}:mue}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(r):{},a||{});i&&v6(s,"selection",i,!0);const o=er(s,Yyt);for(const c of["background","lineBreak","padding"])s[c]&&(o[c]=Pr(s[c]));for(const c of g6e)s[c]&&(o[c]=ir(s[c]));for(const c of j6e)s[c]&&(o[c]=vue(s[c]));for(const c of oue)s[c]&&(o[c]=ir(s[c]));return s.legend&&(o.legend=ir(s.legend)),s.scale&&(o.scale=ir(s.scale)),s.style&&(o.style=function Wyt(e){const t=te(e),n={};for(const r of t)n[r]=vue(e[r]);return n}(s.style)),s.title&&(o.title=ir(s.title)),s.view&&(o.view=ir(s.view)),o}const Xyt=new Set(["view",...p6e]),Qyt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Zyt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]};function eCt(e,t,n,r){"view"===t&&(n="cell");const a={...r?e[t][r]:e[t],...e.style[n??t]};$t(a)||(e.style[n??t]=a),r||delete e[t]}function AC(e){return"layer"in e}class qk{map(t,n){return gC(t)?this.mapFacet(t,n):function tCt(e){return"repeat"in e}(t)?this.mapRepeat(t,n):Uk(t)?this.mapHConcat(t,n):VC(t)?this.mapVConcat(t,n):Bk(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(AC(t))return this.mapLayer(t,n);if(Fo(t))return this.mapUnit(t,n);throw new Error(JN(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const rCt={zero:1,center:1,normalize:1},aCt=new Set([f6e,uC,lC,hC,dC,yk,Ck,fC,d6e,vk]),sCt=new Set([uC,lC,f6e]);function $u(e){return ce(e)&&"quantitative"===Iu(e)&&!e.bin}function Cue(e,t,{orient:n,type:r}){const i="x"===t?"y":"radius",a="x"===t&&["bar","area"].includes(r),s=e[t],o=e[i];if(ce(s)&&ce(o))if($u(s)&&$u(o)){if(s.stack)return t;if(o.stack)return i;const c=ce(s)&&!!s.aggregate;if(c!==(ce(o)&&!!o.aggregate))return c?t:i;if(a){if("vertical"===n)return i;if("horizontal"===n)return t}}else{if($u(s))return t;if($u(o))return i}else{if($u(s))return a&&"vertical"===n?void 0:t;if($u(o))return a&&"horizontal"===n?void 0:i}}function bue(e,t){const n=da(e)?e:{type:e},r=n.type;if(!aCt.has(r))return null;const i=Cue(t,"x",n)||Cue(t,"theta",n);if(!i)return null;const a=t[i],s=ce(a)?fe(a,{}):void 0,o=function oCt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(i),c=[],l=new Set;if(t[o]){const m=t[o],g=ce(m)?fe(m,{}):void 0;g&&g!==s&&(c.push(o),l.add(g))}const u="x"===o?"xOffset":"yOffset",f=t[u],d=ce(f)?fe(f,{}):void 0;d&&d!==s&&(c.push(u),l.add(d));const h=Dmt.reduce((m,g)=>{if("tooltip"!==g&&Ll(t,g)){const v=t[g];for(const y of me(v)){const C=Ss(y);if(C.aggregate)continue;const b=fe(C,{});(!b||!l.has(b))&&m.push({channel:g,fieldDef:C})}}return m},[]);let p;return void 0!==a.stack?p=_c(a.stack)?a.stack?"zero":null:a.stack:sCt.has(r)&&(p="zero"),!p||!function iCt(e){return e in rCt}(p)||Dk(t)&&0===h.length?null:a?.scale?.type&&a?.scale?.type!==ar.LINEAR?(a?.stack&&oe(function Ugt(e){return`Cannot stack non-linear scale (${e}).`}(a.scale.type)),null):Ye(t[Ms(i)])?(void 0!==a.stack&&oe(function Bgt(e){return`Cannot stack "${e}" if there is already "${e}2".`}(i)),null):(ce(a)&&a.aggregate&&!Bmt.has(a.aggregate)&&oe(function jgt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}(a.aggregate)),{groupbyChannels:c,groupbyFields:l,fieldChannel:i,impute:null!==a.impute&&x3(r),stackBy:h,offset:p})}function Mue(e,t,n){const r=ir(e),i=Dt("orient",r,n);if(r.orient=function fCt(e,t,n){switch(e){case dC:case yk:case Ck:case d6e:case Tvt:case kvt:return}const{x:r,y:i,x2:a,y2:s}=t;switch(e){case uC:if(ce(r)&&(L1(r.bin)||ce(i)&&i.aggregate&&!r.aggregate))return"vertical";if(ce(i)&&(L1(i.bin)||ce(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||a){if(n)return n;if(!a)return(ce(r)&&r.type===Hl&&!Zt(r.bin)||CC(r))&&ce(i)&&L1(i.bin)?"horizontal":"vertical";if(!s)return(ce(i)&&i.type===Hl&&!Zt(i.bin)||CC(i))&&ce(r)&&L1(r.bin)?"vertical":"horizontal"}case hC:if(a&&(!ce(r)||!L1(r.bin))&&s&&(!ce(i)||!L1(i.bin)))return;case lC:if(s)return ce(i)&&L1(i.bin)?"horizontal":"vertical";if(a)return ce(r)&&L1(r.bin)?"vertical":"horizontal";if(e===hC){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case fC:case vk:{const o=L6e(r),c=L6e(i);if(n)return n;if(o&&!c)return"tick"!==e?"horizontal":"vertical";if(!o&&c)return"tick"!==e?"vertical":"horizontal";if(o&&c)return"vertical";{const l=H2(r)&&r.type===Nu,u=H2(i)&&i.type===Nu;if(l&&!u)return"vertical";if(!l&&u)return"horizontal"}return}}return"vertical"}(r.type,t,i),void 0!==i&&i!==r.orient&&oe(function Hgt(e,t){return`Specified orient "${e}" overridden with "${t}".`}(r.orient,i)),"bar"===r.type&&r.orient){const o=Dt("cornerRadiusEnd",r,n);if(void 0!==o){const c="horizontal"===r.orient&&t.x2||"vertical"===r.orient&&t.y2?["cornerRadius"]:Bvt[r.orient];for(const l of c)r[l]=o;void 0!==r.cornerRadiusEnd&&delete r.cornerRadiusEnd}}return void 0===Dt("opacity",r,n)&&(r.opacity=function lCt(e,t){if(ct([dC,vk,yk,Ck],e)&&!Dk(t))return.7}(r.type,t)),void 0===Dt("cursor",r,n)&&(r.cursor=function cCt(e,t,n){return t.href||e.href||Dt("href",e,n)?"pointer":e.cursor}(r,t,n)),r}function dCt(e){const{point:t,line:n,...r}=e;return te(r).length>1?r:r.type}function hCt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:er(e[t],["point","line"])});return e}function Gk(e,t={},n){return"transparent"===e.point?{opacity:0}:e.point?ve(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?ve(t.point)?t.point:{}:void 0}function _ue(e,t={}){return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}class pCt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Fo(t)){const{mark:r,encoding:i}=t,a=da(r)?r:{type:r};switch(a.type){case"line":case"rule":case"trail":return!!Gk(a,n[a.type],i);case"area":return!!Gk(a,n[a.type],i)||!!_ue(a,n[a.type])}}return!1}run(t,n,r){const{config:i}=n,{params:a,projection:s,mark:o,name:c,encoding:l,...u}=t,f=HC(l,i),d=da(o)?o:{type:o},h=Gk(d,i[d.type],f),p="area"===d.type&&_ue(d,i[d.type]),m=[{name:c,...a?{params:a}:{},mark:dCt({..."area"===d.type&&void 0===d.opacity&&void 0===d.fillOpacity?{opacity:.7}:{},...d}),encoding:er(f,["shape"])}],g=bue(Mue(d,f,i),f);let v=f;if(g){const{fieldChannel:y,offset:C}=g;v={...f,[y]:{...f[y],...C?{stack:C}:{}}}}return v=er(v,["y2","x2"]),p&&m.push({...s?{projection:s}:{},mark:{type:"line",...Eu(d,["clip","interpolate","tension","tooltip"]),...p},encoding:v}),h&&m.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...Eu(d,["clip","tooltip"]),...h},encoding:v}),r({...u,layer:m},{...n,config:hCt(i)})}}function mCt(e,t){return t?Cd(e)?Hue(e,t):wue(e,t):e}function Wk(e,t){return t?Hue(e,t):e}function Yk(e,t,n){const r=t[e];return function nyt(e){return e&&!ge(e)&&"repeat"in e}(r)?r.repeat in n?{...t,[e]:n[r.repeat]}:void oe(function sgt(e){return`Unknown repeated value "${e}".`}(r.repeat)):t}function wue(e,t){if(void 0!==(e=Yk("field",e,t))){if(null===e)return null;if(Hk(e)&&zs(e.sort)){const n=Yk("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function xue(e,t){if(ce(e))return wue(e,t);{const n=Yk("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function zue(e,t){if(!Ye(e)){if(bd(e)){const n=xue(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}{const n=xue(e,t);if(n)return n;if(vC(e))return{condition:e.condition}}}function Hue(e,t){const n={};for(const r in e)if(Ne(e,r)){const i=e[r];if(K(i))n[r]=i.map(a=>zue(a,t)).filter(a=>a);else{const a=zue(i,t);void 0!==a&&(n[r]=a)}}return n}class gCt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Fo(t)){const{encoding:n,mark:r}=t;if("line"===r||da(r)&&"line"===r.type)for(const i of Smt){const s=n[bl(i)];if(n[i]&&(ce(s)&&!L1(s.bin)||Hs(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:a}=t;return oe(function zgt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}(!!i.x2,!!i.y2)),r({...t,mark:ve(a)?{...a,type:"rule"}:"rule"},n)}}function Sue({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...te(e),...te(t)]);for(const a of i){const s=t[a],o=e[a];if(Ye(s)){const c={...o,...s};r[a]=c}else bd(s)?r[a]={...s,condition:{...o,...s.condition}}:s||null===s?r[a]=s:(n||pa(o)||Ve(o)||Ye(o)||K(o))&&(r[a]=o)}}else r=t;return!r||$t(r)?void 0:r}function Eue(e){const{parentProjection:t,projection:n}=e;return t&&n&&oe(function dgt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Bt(t)} is overridden by a child projection ${Bt(n)}.`}({parentProjection:t,projection:n})),n??t}function Xk(e){return"filter"in e}function yCt(e){return void 0!==e?.stop}function Vue(e){return"lookup"in e}function MCt(e){return"pivot"in e}function _Ct(e){return"density"in e}function wCt(e){return"quantile"in e}function xCt(e){return"regression"in e}function zCt(e){return"loess"in e}function HCt(e){return"sample"in e}function SCt(e){return"window"in e}function ECt(e){return"joinaggregate"in e}function VCt(e){return"flatten"in e}function DCt(e){return"calculate"in e}function Due(e){return"bin"in e}function LCt(e){return"impute"in e}function ACt(e){return"timeUnit"in e}function NCt(e){return"aggregate"in e}function kCt(e){return"stack"in e}function TCt(e){return"fold"in e}function ICt(e){return"extent"in e&&!("density"in e)}function Lue(e,t){const{transform:n,...r}=e;return n?{...r,transform:n.map(a=>{if(Xk(a))return{filter:Qk(a,t)};if(Due(a)&&Ml(a.bin))return{...a,bin:Nue(a.bin)};if(Vue(a)){const{selection:s,...o}=a.from;return s?{...a,from:{param:s,...o}}:a}return a})}:e}function Aue(e,t){const n=qe(e);if(ce(n)&&Ml(n.bin)&&(n.bin=Nue(n.bin)),Dl(n)&&n.scale?.domain?.selection){const{selection:r,...i}=n.scale.domain;n.scale.domain={...i,...r?{param:r}:{}}}if(vC(n))if(K(n.condition))n.condition=n.condition.map(r=>{const{selection:i,param:a,test:s,...o}=r;return a?r:{...o,test:Qk(r,t)}});else{const{selection:r,param:i,test:a,...s}=Aue(n.condition,t);n.condition=i?n.condition:{...s,test:Qk(n.condition,t)}}return n}function Nue(e){const t=e.extent;if(t?.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function Qk(e,t){const n=r=>Su(r,i=>{var a;const o={param:i,empty:t.emptySelections[i]??!0};return(a=t.selectionPredicates)[i]??(a[i]=[]),t.selectionPredicates[i].push(o),o});return e.selection?n(e.selection):Su(e.test||e.filter,r=>r.selection?n(r.selection):r)}class Zk extends qk{map(t,n){const r=n.selections??[];if(t.params&&!Fo(t)){const i=[];for(const a of t.params)$k(a)?r.push(a):i.push(a);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),a=[];for(const s of r)if(s.views&&s.views.length)for(const o of s.views)(ge(o)&&(o===t.name||i.includes(o))||K(o)&&o.map(c=>i.indexOf(c)).every((c,l,u)=>-1!==c&&(0===l||c>u[l-1])))&&a.push(s);else a.push(s);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=Zk.prototype[e];Zk.prototype[e]=function(n,r){return t.call(this,n,OCt(n,r))}}function OCt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function kue(e,t){void 0===t&&(t=yue(e.config));const n=function UCt(e,t={}){const n={config:t};return BCt.map(PCt.map($Ct.map(e,n),n),n)}(e,t),{width:r,height:i}=e,a=function jCt(e,t,n){let{width:r,height:i}=t;const a=Fo(e)||AC(e),s={};a?"container"==r&&"container"==i?(s.type="fit",s.contains="padding"):"container"==r?(s.type="fit-x",s.contains="padding"):"container"==i&&(s.type="fit-y",s.contains="padding"):("container"==r&&(oe(E0e("width")),r=void 0),"container"==i&&(oe(E0e("height")),i=void 0));const o={type:"pad",...s,...n?Tue(n.autosize):{},...Tue(e.autosize)};if("fit"===o.type&&!a&&(oe(Qmt),o.type="pad"),"container"==r&&!("fit"==o.type||"fit-x"==o.type)&&oe(V0e("width")),"container"==i&&!("fit"==o.type||"fit-y"==o.type)&&oe(V0e("height")),!Or(o,{type:"pad"}))return o}(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const PCt=new class vCt extends qk{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[_yt,zyt,Ayt,new pCt,new gCt]}map(t,n){if(Fo(t)){const r=Ll(t.encoding,So),i=Ll(t.encoding,Eo),a=Ll(t.encoding,Qy);if(r||i||a)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,a=Wk(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(c=>c).join("_")}:{},...a?{encoding:a}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(s,n);const o=this.mapLayerOrUnit.bind(this);for(const c of this.nonFacetUnitNormalizers)if(c.hasMatchingType(s,n.config))return c.run(s,n,o);return s}mapRepeat(t,n){return function nCt(e){return!K(e.repeat)&&e.repeat.layer}(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...a}=t,{row:s,column:o,layer:c}=r,{repeater:l={},repeaterPrefix:u=""}=n;return s||o?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...o?{column:o}:{}},spec:{repeat:{layer:c},spec:i}},n):{...a,layer:c.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+u}child__layer_${dn(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:a,...s}=t;!K(r)&&t.columns&&(t=er(t,["columns"]),oe(N0e("repeat")));const o=[],{repeater:c={},repeaterPrefix:l=""}=n,u=!K(r)&&r.row||[c?c.row:null],f=!K(r)&&r.column||[c?c.column:null],d=K(r)&&r||[c?c.repeat:null];for(const p of d)for(const m of u)for(const g of f){const v={repeat:p,row:m,column:g,layer:c.layer},y=(i.name?`${i.name}_`:"")+l+"child__"+(K(r)?`${dn(p)}`:(r.row?`row_${dn(m)}`:"")+(r.column?`column_${dn(g)}`:"")),C=this.map(i,{...n,repeater:v,repeaterPrefix:y});C.name=y,o.push(er(C,["data"]))}const h=K(r)?t.columns:r.column?r.column.length:1;return{data:i.data??a,align:"all",...s,columns:h,concat:o}}mapFacet(t,n){const{facet:r}=t;return Cd(r)&&t.columns&&(t=er(t,["columns"]),oe(N0e("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:a,parentProjection:s,config:o}=n,c=Eue({parentProjection:s,projection:i}),l=Sue({parentEncoding:a,encoding:Wk(r,n.repeater)});return this.mapUnit({...t,...c?{projection:c}:{},...l?{encoding:l}:{}},{config:o})}mapFacetedUnit(t,n){const{row:r,column:i,facet:a,...s}=t.encoding,{mark:o,width:c,projection:l,height:u,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:a},n),v=Wk(s,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...c?{width:c}:{},...u?{height:u}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:o,encoding:v,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:a}=t;if(r||i){a&&oe(function wgt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}([...r?[So]:[],...i?[Eo]:[]]));const s={},o={};for(const c of[So,Eo]){const l=t[c];if(l){const{align:u,center:f,spacing:d,columns:h,...p}=l;s[c]=p;for(const m of["align","center","spacing"])void 0!==l[m]&&(o[m]??(o[m]={}),o[m][c]=l[m])}}return{facetMapping:s,layout:o}}{const{align:s,center:o,spacing:c,columns:l,...u}=a;return{facetMapping:mCt(u,n.repeater),layout:{...s?{align:s}:{},...o?{center:o}:{},...c?{spacing:c}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:a,projection:s,...o}=t,c={...i,parentEncoding:Sue({parentEncoding:n,encoding:a,layer:!0}),parentProjection:Eue({parentProjection:r,projection:s})};return super.mapLayer({...o,...t.name?{name:[c.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},c)}},$Ct=new class RCt extends qk{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Lue(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if((t=Lue(t,n)).encoding){const r={};for(const[i,a]of h3(t.encoding))r[i]=Aue(a,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:h3(r).map(([a,s])=>{const{init:o,bind:c,empty:l,...u}=s;"single"===u.type?(u.type="point",u.toggle=!1):"multi"===u.type&&(u.type="point"),n.emptySelections[a]="none"!==l;for(const f of D1(n.selectionPredicates[a]??{}))f.empty="none"!==l;return{name:a,value:o,select:u,bind:c}})}:t}},BCt=new Zk;function Tue(e){return ge(e)?{type:e}:e??{}}const WCt=["background","padding"];function Iue(e,t){const n={};for(const r of WCt)e&&void 0!==e[r]&&(n[r]=Pr(e[r]));return t&&(n.params=e.params),n}class Oo{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Oo(qe(this.explicit),qe(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Nn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return void 0!==this.explicit[t]?{explicit:!0,value:this.explicit[t]}:void 0!==this.implicit[t]?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){void 0!==n&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){void 0!==n[t]?this.set(t,n[t],!0):void 0!==r[t]&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){void 0!==n[t]&&this.set(t,n[t],!0)}copyAll(t){for(const n of te(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Vs(e){return{explicit:!0,value:e}}function Br(e){return{explicit:!1,value:e}}function Fue(e){return(t,n,r,i)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:NC(t,n,r,i)}}function NC(e,t,n,r){return e.explicit&&t.explicit&&oe(function Tgt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Bt(n)} and ${Bt(r)}). Using ${Bt(n)}.`}(n,r,e.value,t.value)),e}function S3(e,t,n,r,i=NC){return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Or(e.value,t.value)?e:i(e,t,n,r)}class YCt extends Oo{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Bu(e){return"url"in e}function wd(e){return"values"in e}function Rue(e){return"name"in e&&!Bu(e)&&!wd(e)&&!E3(e)}function E3(e){return e&&(Oue(e)||Pue(e)||Kk(e))}function Oue(e){return"sequence"in e}function Pue(e){return"sphere"in e}function Kk(e){return"graticule"in e}var sn=function(e){return e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e}(sn||{});function $ue(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=hi(i.field),i}function Al(e,t=!0,n=R1){if(K(e)){const r=e.map(i=>Al(i,t,n));return t?`[${r.join(", ")}]`:r}return _l(e)?n(t?wl(e):function ovt(e){const t=rk(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}(e)):t?n(Bt(e)):e}function XCt(e,t){for(const n of D1(e.component.selection??{})){const r=n.name;let i=`${r}${D3}, ${"global"===n.resolve?"true":`{unit: ${kl(e)}}`}`;for(const a of PC)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(i=a.modifyExpr(e,n,i)));t.push({name:r+Ebt,on:[{events:{signal:n.name+D3},update:`modify(${ue(n.name+Nl)}, ${i})`}]})}return Jk(t)}function QCt(e,t){if(e.component.selection&&te(e.component.selection).length){const n=ue(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:f3("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Jk(t)}function Bue(e,t){for(const n of D1(e.component.selection??{}))for(const r of PC)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Jk(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Ot{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){this._children.includes(t)?oe("Attempt to add the same child twice."):void 0!==n?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class S2 extends Ot{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${Kle()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function eT(e){return void 0!==e.as}function Uue(e){return`${e}_end`}class Ds extends Ot{clone(){return new Ds(null,qe(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,a,s)=>{const{field:o,timeUnit:c}=a;if(c){let l;if(xl(c)){if(Hn(n)){const{mark:u,markDef:f,config:d}=n,h=z3({fieldDef:a,markDef:f,config:d});(gd(u)||h)&&(l={timeUnit:o1(c),field:o})}}else l={as:fe(a,{forAs:!0}),field:o,timeUnit:c};if(Hn(n)){const{mark:u,markDef:f,config:d}=n,h=z3({fieldDef:a,markDef:f,config:d});gd(u)&&kn(s)&&.5!==h&&(l.rectBandPosition=h)}l&&(i[ot(l)]=l)}return i},{});return $t(r)?null:new Ds(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s={...i,timeUnit:o1(r)};return new Ds(t,{[ot(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of h3(this.timeUnits)){const a=eT(i)?i.as:`${i.field}_end`;t.has(a)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(D1(this.timeUnits).map(t=>eT(t)?t.as:Uue(t.field)))}dependentFields(){return new Set(D1(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${ot(this.timeUnits)}`}assemble(){const t=[];for(const n of D1(this.timeUnits)){const{rectBandPosition:r}=n,i=o1(n.timeUnit);if(eT(n)){const{field:a,as:s}=n,{unit:o,utc:c,...l}=i,u=[s,`${s}_end`];t.push({field:hi(a),type:"timeunit",...o?{units:oC(o)}:{},...c?{timezone:"utc"}:{},...l,as:u}),t.push(...que(u,r,i))}else if(n){const{field:a}=n,s=a.replaceAll("\\.","."),o=jue({timeUnit:i,field:s}),c=Uue(s);t.push({type:"formula",expr:o,as:c}),t.push(...que([s,c],r,i))}}return t}}const kC="offsetted_rect_start",TC="offsetted_rect_end";function jue({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,a=X0e(r),{part:s,step:o}=J0e(a,e.step);return`${i?"utcOffset":"timeOffset"}('${s}', datum['${t}'], ${n?-o:o})`}function que([e,t],n,r){if(void 0!==n&&.5!==n){const i=`datum['${e}']`,a=`datum['${t}']`;return[{type:"formula",expr:Gue([jue({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${kC}`},{type:"formula",expr:Gue([i,a],n+.5),as:`${e}_${TC}`}]}return[]}function Gue([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const xd="_tuple_fields";class tbt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const nbt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new tbt),a={},s={},o=new Set,c=(p,m)=>{const g="visual"===m?p.channel:p.field;let v=dn(`${r}_${g}`);for(let y=1;o.has(v);y++)v=dn(`${r}_${g}_${y}`);return o.add(v),{[m]:v}},l=t.type,u=e.config.selection[l],f=void 0!==n.value?me(n.value):null;let{fields:d,encodings:h}=ve(n.select)?n.select:{};if(!d&&!h&&f)for(const p of f)if(ve(p))for(const m of te(p))Hmt(m)?(h||(h=[])).push(m):"interval"===l?(oe('Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.'),h=u.encodings):(d??(d=[])).push(m);!d&&!h&&(h=u.encodings,"fields"in u&&(d=u.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){oe(Zmt(p,m.aggregate));continue}if(!g){oe(L0e(p));continue}if(m.timeUnit&&!xl(m.timeUnit)){g=e.vgField(p);const v={timeUnit:m.timeUnit,as:g,field:m.field};s[ot(v)]=v}if(!a[g]){const y={field:g,channel:p,type:"interval"===l&&No(p)&&$r(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",index:i.items.length};y.signals={...c(y,"data"),...c(y,"visual")},i.items.push(a[g]=y),i.hasField[g]=a[g],i.hasSelectionId=i.hasSelectionId||g===ma,a0e(p)?(y.geoChannel=p,y.channel=i0e(p),i.hasChannel[y.channel]=a[g]):i.hasChannel[p]=a[g]}}else oe(L0e(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...c(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===ma}f&&(t.init=f.map(p=>i.items.map(m=>ve(p)?void 0!==p[m.geoChannel||m.channel]?p[m.geoChannel||m.channel]:p[m.field]:p))),$t(s)||(i.timeUnit=new Ds(null,s))},signals:(e,t,n)=>{const r=t.name+xd;return n.filter(a=>a.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map($ue)})}},Po={defined:e=>"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind,parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!No(i))continue;const a=e.getScaleComponent(i),s=a?a.get("type"):void 0;a&&$r(s)?(a.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)):oe("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>0===n.filter(o=>o.name===s.signals.data).length);if(!e.parent||Wue(e)||0===r.length)return n;const i=n.filter(s=>s.name===t.name)[0];let a=i.update;if(a.indexOf(gfe)>=0)i.update=`{${r.map(s=>`${ue(hi(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const o=`${ue(hi(s.field))}: ${s.signals.data}`;a.includes(o)||(a=`${a.substring(0,a.length-1)}, ${o}}`)}i.update=a}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Wue(e))for(const r of t.scales){const i=n.filter(a=>a.name===r.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}};function tT(e,t){return`domain(${ue(e.scaleName(t))})`}function Wue(e){return e.parent&&Ku(e.parent)&&!e.parent.parent}const Uu="_brush",Yue="_scale_trigger",zd="geo_interval_init_tick",ibt={defined:e=>"interval"===e.type,parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...ve(n.select)?n.select:{}};i.fields=[ma],i.encodings||(i.encodings=n.value?te(n.value):[ca,oa]),n.select={type:"interval",...i}}if(t.translate&&!Po.defined(t)){const i=`!event.item || event.item.mark.name !== ${ue(t.name+Uu)}`;for(const a of t.events){if(!a.between){oe(`${a} is not an ordered event stream for interval selections.`);continue}const s=me((r=a.between[0]).filter??(r.filter=[]));s.indexOf(i)<0&&s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+D3,a=D1(t.project.hasChannel).filter(o=>o.channel===hn||o.channel===s1),s=t.init?t.init[0]:null;if(n.push(...a.reduce((o,c)=>o.concat(function abt(e,t,n,r){const i=!e.hasProjection,a=n.channel,s=n.signals.visual,o=ue(i?e.scaleName(a):e.projectionName()),c=d=>`scale(${o}, ${d})`,l=e.getSizeSignalRef(a===hn?"width":"height").signal,u=`${a}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${u}, ${u}]`},{events:h,update:`[${s}[0], clamp(${u}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=Po.defined(t),p=e.getScaleComponent(a),m=p?p.get("type"):void 0,g=r?{init:Al(r,!0,c)}:{value:[]};return f.push({events:{signal:t.name+Yue},update:$r(m)?`[${c(`${d}[0]`)}, ${c(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:s,...g,on:f},{name:d,...r?{init:Al(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${o}, ${s})`}]}]}{const d=a===hn?0:1,h=t.name+"_init";return[{name:s,...r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]},on:f}]}}(e,t,c,s&&s[c.index])),[])),e.hasProjection){const o=ue(e.projectionName()),c=e.projectionName()+"_center",{x:l,y:u}=t.project.hasChannel,f=l&&l.signals.visual,d=u&&u.signals.visual,h=l?s&&s[l.index]:`${c}[0]`,p=u?s&&s[u.index]:`${c}[1]`,m=M=>e.getSizeSignalRef(M).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;s&&(n.unshift({name:r+"_init",init:`[scale(${o}, [${l?h[0]:h}, ${u?p[0]:p}]), scale(${o}, [${l?h[1]:h}, ${u?p[1]:p}])]`}),(!l||!u)&&(n.find(w=>w.name===c)||n.unshift({name:c,update:`invert(${o}, [${m("width")}/2, ${m("height")}/2])`})));const C=`vlSelectionTuples(intersect(${g}, {markname: ${ue(e.getName("marks"))}}, unit.mark), {unit: ${kl(e)}})`,b=a.map(M=>M.signals.visual);return n.concat({name:i,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...s?[{signal:zd}]:[]],update:C}]})}{if(!Po.defined(t)){const l=r+Yue,u=a.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=ue(e.scaleName(d)),v=$r(e.getScaleComponent(d).get("type"))?"+":"";return`(!isArray(${h}) || (${v}invert(${m}, ${p})[0] === ${v}${h}[0] && ${v}invert(${m}, ${p})[1] === ${v}${h}[1]))`});u.length&&n.push({name:l,value:{},on:[{events:a.map(f=>({scale:e.scaleName(f.channel)})),update:u.join(" && ")+` ? ${l} : {}`}]})}const o=a.map(l=>l.signals.data),c=`unit: ${kl(e)}, fields: ${r+xd}, values`;return n.concat({name:i,...s?{init:`{${c}: ${Al(s)}}`}:{},...o.length?{on:[{events:[{signal:o.join(" || ")}],update:`${o.join(" && ")} ? {${c}: [${o}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Hn(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===zd).length||n.unshift({name:zd,value:null,on:[{events:"timer{1}",update:`${zd} === null ? {} : ${zd}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:a}=t.project.hasChannel,s=i?.signals.visual,o=a?.signals.visual,c=`data(${ue(t.name+Nl)})`;if(Po.defined(t)||!i&&!a)return n;const l={x:void 0!==i?{signal:`${s}[0]`}:{value:0},y:void 0!==a?{signal:`${o}[0]`}:{value:0},x2:void 0!==i?{signal:`${s}[1]`}:{field:{group:"width"}},y2:void 0!==a?{signal:`${o}[1]`}:{field:{group:"height"}}};if("global"===t.resolve)for(const m of te(l))l[m]=[{test:`${c}.length && ${c}[0].unit === ${kl(e)}`,...l[m]},{value:0}];const{fill:u,fillOpacity:f,cursor:d,...h}=t.mark,p=te(h).reduce((m,g)=>(m[g]=[{test:[void 0!==i&&`${s}[0] !== ${s}[1]`,void 0!==a&&`${o}[0] !== ${o}[1]`].filter(v=>v).join(" && "),value:h[g]},{value:null}],m),{});return[{name:`${r+Uu}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:u},fillOpacity:{value:f}},update:l}},...n,{name:r+Uu,type:"rect",clip:!0,encode:{enter:{...d?{cursor:{value:d}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}},sbt={defined:e=>"point"===e.type,signals:(e,t,n)=>{const r=t.name,i=r+xd,a=t.project,s="(item().isVoronoi ? datum.datum : datum)",o=D1(e.component.selection??{}).reduce((f,d)=>"interval"===d.type?f.concat(d.name+Uu):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),c="datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0"+(o?` && ${o}`:"");let l=`unit: ${kl(e)}, `;l+=t.project.hasSelectionId?`${ma}: ${s}[${ue(ma)}]`:`fields: ${i}, values: [${a.items.map(d=>e.fieldDef(d.channel)?.bin?`[${s}[${ue(e.vgField(d.channel,{}))}], ${s}[${ue(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${s}[${ue(d.field)}]`).join(", ")}]`;const u=t.events;return n.concat([{name:r+D3,on:u?[{events:u,update:`${c} ? {${l}} : null`,force:!0}]:[]}])}};function ju(e,t,n,r){const i=vC(t)&&t.condition,a=r(t);return i?{[n]:[...me(i).map(c=>{const l=r(c);if(function tyt(e){return e.param}(c)){const{param:u,empty:f}=c;return{test:bfe(e,{param:u,empty:f}),...l}}return{test:$C(e,c.test),...l}}),...void 0!==a?[a]:[]]}:void 0!==a?{[n]:a}:{}}function nT(e,t="text"){return ju(e,e.encoding[t],t,r=>IC(r,e.config))}function IC(e,t,n="datum"){if(e){if(pa(e))return an(e.value);if(Ye(e)){const{format:r,formatType:i}=MC(e);return wk({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Que(e,t={}){const{encoding:n,markDef:r,config:i,stack:a}=e,s=n.tooltip;if(K(s))return{tooltip:Kue({tooltip:s},a,i,t)};{const o=t.reactiveGeom?"datum.datum":"datum";return ju(e,s,"tooltip",c=>{const l=IC(c,i,o);if(l)return l;if(null===c)return;let u=Dt("tooltip",r,i);return!0===u&&(u={content:"encoding"}),ge(u)?{value:u}:ve(u)?Ve(u)?u:"encoding"===u.content?Kue(n,a,i,t):{signal:o}:void 0})}}function Zue(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},a={},s=r?"datum.datum":"datum",o=[];function c(u,f){const d=bl(f),h=H2(u)?u:{...u,type:e[d].type},m=me(h.title||Ek(h,i)).join(", ").replaceAll(/"/g,'\\"');let g;if(kn(f)){const v="x"===f?"x2":"y2",y=Ss(e[v]);if(L1(h.bin)&&y){const C=fe(h,{expr:s}),b=fe(y,{expr:s}),{format:M,formatType:w}=MC(h);g=yd(C,b,M,w,i),a[v]=!0}}if((kn(f)||f===pi||f===sa)&&t&&t.fieldChannel===f&&"normalize"===t.offset){const{format:v,formatType:y}=MC(h);g=wk({fieldOrDatumDef:h,format:v,formatType:y,expr:s,config:i,normalizeStack:!0}).signal}g??(g=IC(h,i,s).signal),o.push({channel:f,key:m,value:g})}Lk(e,(u,f)=>{ce(u)?c(u,f):yC(u)&&c(u.condition,f)});const l={};for(const{channel:u,key:f,value:d}of o)!a[u]&&!l[f]&&(l[f]=d);return l}function Kue(e,t,n,{reactiveGeom:r}={}){const i=Zue(e,t,n,{reactiveGeom:r}),a=h3(i).map(([s,o])=>`"${s}": ${o}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function obt(e){const{markDef:t,config:n}=e,r=Dt("aria",t,n);return!1===r?{}:{...r?{aria:r}:{},...cbt(e),...lbt(e)}}function cbt(e){const{mark:t,markDef:n,config:r}=e;if(!1===r.aria)return{};const i=Dt("ariaRoleDescription",n,r);return null!=i?{ariaRoleDescription:{value:i}}:t in Wmt?{}:{ariaRoleDescription:{value:t}}}function lbt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,a=t.description;if(a)return ju(e,a,"description",c=>IC(c,e.config));const s=Dt("description",n,r);if(null!=s)return{description:an(s)};if(!1===r.aria)return{};const o=Zue(t,i,r);return $t(o)?void 0:{description:{signal:h3(o).map(([c,l],u)=>`"${u>0?"; ":""}${c}: " + (${l})`).join(" + ")}}}function l1(e,t,n={}){const{markDef:r,encoding:i,config:a}=t,{vgChannel:s}=n;let{defaultRef:o,defaultValue:c}=n;return void 0===o&&(c??(c=Dt(e,r,a,{vgChannel:s,ignoreVgConfig:!0})),void 0!==c&&(o=an(c))),ju(t,i[e],s??e,u=>_k({channel:e,channelDef:u,markDef:r,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:o}))}function Jue(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:a}=n,s=t.filled??Dt("filled",n,i),o=ct(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,c=Dt(!0===s?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[!0===s&&"color"]??o,l=Dt(!1===s?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[!1===s&&"color"],u=s?"fill":"stroke",f={...c?{fill:an(c)}:{},...l?{stroke:an(l)}:{}};return n.color&&(s?n.fill:n.stroke)&&oe(F0e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...l1("color",e,{vgChannel:u,defaultValue:s?c:l}),...l1("fill",e,{defaultValue:r.fill?c:void 0}),...l1("stroke",e,{defaultValue:r.stroke?l:void 0})}}function ubt(e){const{encoding:t,mark:n}=e,r=t.order;return!x3(n)&&pa(r)?ju(e,r,"zindex",i=>an(i.value)):{}}function qu({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const a=`${e}Offset`,s=t[a],o=n[a];if(("xOffset"===a||"yOffset"===a)&&o)return{offsetType:"encoding",offset:_k({channel:a,channelDef:o,markDef:t,config:r?.config,scaleName:r.scaleName(a),scale:r.getScaleComponent(a),stack:null,defaultRef:an(s),bandPosition:i})};const c=t[a];return c?{offsetType:"visual",offset:c}:{}}function Q1(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:a,config:s,stack:o}=t,c=i[e],l=i[Ms(e)],u=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=qu({channel:e,markDef:a,encoding:i,model:t,bandPosition:.5}),p=rT({model:t,defaultPos:n,channel:e,scaleName:u,scale:f}),m=!c&&kn(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:function fbt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:a,markDef:s}=e;if(Ye(n)&&i&&t===i.fieldChannel){if(ce(n)){let o=n.bandPosition;if(void 0===o&&"text"===s.type&&("radius"===t||"theta"===t)&&(o=.5),void 0!==o)return pC({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:o,offset:a})}return El(n,r,{suffix:"end"},{offset:a})}return bk(e)}({channel:e,channelDef:c,channel2Def:l,markDef:a,config:s,scaleName:u,scale:f,stack:o,offset:d,defaultRef:p,bandPosition:"encoding"===h?0:void 0});return m?{[r||e]:m}:void 0}function rT({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:a,config:s}=e;return()=>{const o=bl(n),c=C3(n),l=Dt(n,a,s,{vgChannel:c});if(void 0!==l)return vd(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const u=i.get("type");if(!ct([ar.LOG,ar.TIME,ar.UTC],u)&&i.domainDefinitelyIncludesZero())return{scale:r,value:0}}if("zeroOrMin"===t)return"y"===o?{field:{group:"height"}}:{value:0};switch(o){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[rr(n)],mult:.5}}}}const dbt={left:"x",center:"xc",right:"x2"},hbt={top:"y",middle:"yc",bottom:"y2"};function efe(e,t,n,r="middle"){if("radius"===e||"theta"===e)return C3(e);const i="x"===e?"align":"baseline",a=Dt(i,t,n);let s;return Ve(a)?(oe(function xgt(e){return`The ${e} for range marks cannot be an expression`}(i)),s=void 0):s=a,"x"===e?dbt[s||("top"===r?"left":"center")]:hbt[s||r]}function FC(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?tfe(e,t,{defaultPos:n,defaultPos2:r}):Q1(e,t,{defaultPos:n})}function tfe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:a}=t,s=Ms(e),o=rr(e),c=function pbt(e,t,n){const{encoding:r,mark:i,markDef:a,stack:s,config:o}=e,c=bl(n),l=rr(n),u=C3(n),f=r[c],d=e.scaleName(c),h=e.getScaleComponent(c),{offset:p}=qu(n in r||n in a?{channel:n,markDef:a,encoding:r,model:e}:{channel:c,markDef:a,encoding:r,model:e});if(!f&&("x2"===n||"y2"===n)&&(r.latitude||r.longitude)){const g=rr(n),v=e.markDef[g];return null!=v?{[g]:{value:v}}:{[u]:{field:e.getName(n)}}}const m=function mbt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:a,scale:s,stack:o,offset:c,defaultRef:l}){return Ye(t)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?El(t,a,{suffix:"start"},{offset:c}):bk({channel:e,channelDef:n,scaleName:a,scale:s,stack:o,markDef:r,config:i,offset:c,defaultRef:l})}({channel:n,channelDef:f,channel2Def:r[n],markDef:a,config:o,scaleName:d,scale:h,stack:s,offset:p,defaultRef:void 0});return void 0!==m?{[u]:m}:RC(n,a)||RC(n,{[n]:iC(n,a,o.style),[l]:iC(l,a,o.style)})||RC(n,o[i])||RC(n,o.mark)||{[u]:rT({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}(t,r,s);return{...Q1(e,t,{defaultPos:n,vgChannel:c[o]?efe(e,i,a):C3(e)}),...c}}function RC(e,t){const n=rr(e),r=C3(e);if(void 0!==t[r])return{[r]:vd(e,t[r])};if(void 0!==t[e])return{[r]:vd(e,t[e])};if(t[n]){const i=t[n];if(!Sl(i))return{[n]:vd(e,i)};oe(function ygt(e){return`Position range does not support relative band size for ${e}.`}(n))}}function V3(e,t){const{config:n,encoding:r,markDef:i}=e,a=i.type,s=Ms(t),o=rr(t),c=r[t],l=r[s],u=e.getScaleComponent(t),f=u?u.get("type"):void 0,d=i.orient,h=r[o]??r.size??Dt("size",i,n,{vgChannel:o}),p=f0e(t),m="bar"===a&&("x"===t?"vertical"===d:"horizontal"===d);return!ce(c)||!(Zt(c.bin)||L1(c.bin)||c.timeUnit&&!l)||h&&!Sl(h)||r[p]||c1(f)?(Ye(c)&&c1(f)||m)&&!l?function vbt(e,t,n){const{markDef:r,encoding:i,config:a,stack:s}=n,o=r.orient,c=n.scaleName(t),l=n.getScaleComponent(t),u=rr(t),f=Ms(t),d=f0e(t),h=n.scaleName(d),p=n.getScaleComponent(qN(t)),m="horizontal"===o&&"y"===t||"vertical"===o&&"x"===t;let g;(i.size||r.size)&&(m?g=l1("size",n,{vgChannel:u,defaultRef:an(r.size)}):oe(function Agt(e){return`Cannot apply size to non-oriented mark "${e}".`}(r.type)));const v=!!g,y=E6e({channel:t,fieldDef:e,markDef:r,config:a,scaleType:(l||p)?.get("type"),useVlSizeChannel:m});g=g||{[u]:gbt(u,h||c,p||l,a,y,!!e,r.type)};const b=efe(t,r,a,"band"===(l||p)?.get("type")&&Sl(y)&&!v?"top":"middle"),M="xc"===b||"yc"===b,{offset:w,offsetType:_}=qu({channel:t,markDef:r,encoding:i,model:n,bandPosition:M?.5:0}),z=bk({channel:t,channelDef:e,markDef:r,config:a,scaleName:c,scale:l,stack:s,offset:w,defaultRef:rT({model:n,defaultPos:"mid",channel:t,scaleName:c,scale:l}),bandPosition:M?"encoding"===_?0:.5:Ve(y)?{signal:`(1-${y})/2`}:Sl(y)?(1-y.band)/2:0});if(u)return{[b]:z,...g};{const S=C3(f),D=g[u],L=w?{...D,offset:w}:D;return{[b]:z,[S]:K(z)?[z[0],{...z[1],offset:L}]:{...z,offset:L}}}}(c,t,e):tfe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"}):function ybt({fieldDef:e,fieldDef2:t,channel:n,model:r}){const{config:i,markDef:a,encoding:s}=r,o=r.getScaleComponent(n),c=r.scaleName(n),l=o?o.get("type"):void 0,u=o.get("reverse"),f=E6e({channel:n,fieldDef:e,markDef:a,config:i,scaleType:l}),h=r.component.axes[n]?.[0]?.get("translate")??.5,p=kn(n)?Dt("binSpacing",a,i)??0:0,m=Ms(n),g=C3(n),v=C3(m),y=Io("minBandSize",a,i),{offset:C}=qu({channel:n,markDef:a,encoding:s,model:r,bandPosition:0}),{offset:b}=qu({channel:m,markDef:a,encoding:s,model:r,bandPosition:0}),M=function Qvt({scaleName:e,fieldDef:t}){const n=fe(t,{expr:"datum"});return`abs(scale("${e}", ${fe(t,{expr:"datum",suffix:"end"})}) - scale("${e}", ${n}))`}({fieldDef:e,scaleName:c}),w=nfe(n,p,u,h,C,y,M),_=nfe(m,p,u,h,b??C,y,M),z=Ve(f)?{signal:`(1-${f.signal})/2`}:Sl(f)?(1-f.band)/2:.5,S=z3({fieldDef:e,fieldDef2:t,markDef:a,config:i});if(Zt(e.bin)||e.timeUnit){const D=e.timeUnit&&.5!==S;return{[v]:rfe({fieldDef:e,scaleName:c,bandPosition:z,offset:_,useRectOffsetField:D}),[g]:rfe({fieldDef:e,scaleName:c,bandPosition:Ve(z)?{signal:`1-${z.signal}`}:1-z,offset:w,useRectOffsetField:D})}}if(L1(e.bin)){const D=El(e,c,{},{offset:_});if(ce(t))return{[v]:D,[g]:El(t,c,{},{offset:w})};if(Ml(e.bin)&&e.bin.step)return{[v]:D,[g]:{signal:`scale("${c}", ${fe(e,{expr:"datum"})} + ${e.bin.step})`,offset:w}}}oe(B0e(m))}({fieldDef:c,fieldDef2:l,channel:t,model:e})}function gbt(e,t,n,r,i,a,s){if(Sl(i)){if(!n)return{mult:i.band,field:{group:e}};{const c=n.get("type");if("band"===c){let l=`bandwidth('${t}')`;1!==i.band&&(l=`${i.band} * ${l}`);const u=Io("minBandSize",{type:s},r);return{signal:u?`max(${ua(u)}, ${l})`:l}}1!==i.band&&(oe(function Egt(e){return`Cannot use the relative band size with ${e} scale.`}(c)),i=void 0)}}else{if(Ve(i))return i;if(i)return{value:i}}if(n){const c=n.get("range");if(_3(c)&&mt(c.step))return{value:c.step-2}}if(!a){const{bandPaddingInner:c,barBandPaddingInner:l,rectBandPaddingInner:u}=r.scale,f=Nn(c,"bar"===s?l:u);if(Ve(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(mt(f))return{signal:`${1-f} * ${e}`}}return{value:DC(r.view,e)-2}}function nfe(e,t,n,r,i,a,s){if(r0e(e))return 0;const o="x"===e||"y2"===e,c=o?-t/2:t/2;if(Ve(n)||Ve(i)||Ve(r)||a){const l=ua(n),u=ua(i),f=ua(r),d=ua(a),p=a?`(${s} < ${d} ? ${o?"":"-"}0.5 * (${d} - (${s})) : ${c})`:c;return{signal:(f?`${f} + `:"")+(l?`(${l} ? -1 : 1) * `:"")+(u?`(${u} + ${p})`:p)}}return i=i||0,r+(n?-i-c:+i+c)}function rfe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return pC({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:kC,endSuffix:TC}:{}})}const Cbt=new Set(["aria","width","height"]);function vi(e,t){const{fill:n,stroke:r}="include"===t.color?Jue(e):{};return{...bbt(e.markDef,t),...ife(e,"fill",n),...ife(e,"stroke",r),...l1("opacity",e),...l1("fillOpacity",e),...l1("strokeOpacity",e),...l1("strokeWidth",e),...l1("strokeDash",e),...ubt(e),...Que(e),...nT(e,"href"),...obt(e)}}function ife(e,t,n){const{config:r,mark:i,markDef:a}=e;if("hide"===Dt("invalid",a,r)&&n&&!x3(i)){const o=function Mbt(e,{invalid:t=!1,channels:n}){const r=n.reduce((a,s)=>{const o=e.getScaleComponent(s);if(o){const c=o.get("type"),l=e.vgField(s,{expr:"datum"});l&&$r(c)&&(a[l]=!0)}return a},{}),i=te(r);if(i.length>0){const a=t?"||":"&&";return i.map(s=>Mk(s,t)).join(` ${a} `)}}(e,{invalid:!0,channels:nC});if(o)return{[t]:[{test:o,value:null},...me(n)]}}return n?{[t]:n}:{}}function bbt(e,t){return Gmt.reduce((n,r)=>(!Cbt.has(r)&&void 0!==e[r]&&"ignore"!==t[r]&&(n[r]=an(e[r])),n),{})}function iT(e){const{config:t,markDef:n}=e;if(Dt("invalid",n,t)){const i=function _bt(e,{invalid:t=!1,channels:n}){const r=n.reduce((a,s)=>{const o=e.getScaleComponent(s);if(o){const c=o.get("type"),l=e.vgField(s,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});l&&$r(c)&&(a[l]=!0)}return a},{}),i=te(r);if(i.length>0){const a=t?"||":"&&";return i.map(s=>Mk(s,t)).join(` ${a} `)}}(e,{channels:_s});if(i)return{defined:{signal:i}}}return{}}function afe(e,t){if(void 0!==t)return{[e]:an(t)}}const aT="voronoi",sfe={defined:e=>"point"===e.type&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(aT)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,a=e.mark;if(x3(a))return oe(function Kmt(e){return`The "nearest" transform is not supported for ${e} marks.`}(a)),n;const s={name:e.getName(aT),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Que(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let o=0,c=!1;return n.forEach((l,u)=>{const f=l.name??"";f===e.component.mark[0].name?o=u:f.indexOf(aT)>=0&&(c=!0)}),c||n.splice(o+1,0,s),n}},ofe={defined:e=>"point"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!Ok(e.bind),parse:(e,t,n)=>vfe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,a=t.bind,s=t.init&&t.init[0],o=sfe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((c,l)=>{const u=dn(`${r}_${c.field}`);n.filter(d=>d.name===u).length||n.unshift({name:u,...s?{init:Al(s[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${o}[${ue(c.field)}] : null`}]:[],bind:a[c.field]??a[c.channel]??a})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,a=n.filter(l=>l.name===r+D3)[0],s=r+xd,o=i.items.map(l=>dn(`${r}_${l.field}`)),c=o.map(l=>`${l} !== null`).join(" && ");return o.length&&(a.update=`${c} ? {fields: ${s}, values: [${o.join(", ")}]} : null`),delete a.value,delete a.on,n}},OC="_toggle",cfe={defined:e=>"point"===e.type&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+OC,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+D3,r=t.name+OC;return`${r} ? null : ${n}, `+("global"===t.resolve?`${r} ? null : true, `:`${r} ? null : {unit: ${kl(e)}}, `)+`${r} ? ${n} : null`}},wbt={defined:e=>void 0!==e.clear&&!1!==e.clear,parse:(e,t)=>{t.clear&&(t.clear=ge(t.clear)?f3(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(ofe.defined(t))for(const r of t.project.items){const i=n.findIndex(a=>a.name===dn(`${t.name}_${r.field}`));-1!==i&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,a){-1!==i&&n[i].on&&n[i].on.push({events:t.clear,update:a})}if("interval"===t.type)for(const i of t.project.items){const a=n.findIndex(s=>s.name===i.signals.visual);r(a,"[0, 0]"),-1===a&&r(n.findIndex(o=>o.name===i.signals.data),"null")}else{let i=n.findIndex(a=>a.name===t.name+D3);r(i,"null"),cfe.defined(t)&&(i=n.findIndex(a=>a.name===t.name+OC),r(i,"false"))}return n}},lfe={defined:e=>{const t="global"===e.resolve&&e.bind&&Ok(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==ma;return t&&!n&&oe("Legend bindings are only supported for selections over an individual field or encoding channel."),t&&n},parse:(e,t,n)=>{const r=qe(n);if(r.select=ge(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},vfe(t,r),ve(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const o of t.events)o.filter=me(o.filter??[]),o.filter.includes(s)||o.filter.push(s)}const i=Pk(t.bind)?t.bind.legend:"click",a=ge(i)?f3(i,"view"):me(i);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=Pk(t.bind)&&t.bind.legend,a=s=>o=>{const c=qe(o);return c.markname=s,c};for(const s of t.project.items){if(!s.hasLegend)continue;const o=`${dn(s.field)}_legend`,c=`${r}_${o}`;if(0===n.filter(u=>u.name===c).length){const u=i.merge.map(a(`${o}_symbols`)).concat(i.merge.map(a(`${o}_labels`))).concat(i.merge.map(a(`${o}_entries`)));n.unshift({name:c,...t.init?{}:{value:null},on:[{events:u,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${c}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,a=n.find(d=>d.name===r+D3),s=r+xd,o=i.items.filter(d=>d.hasLegend).map(d=>dn(`${r}_${dn(d.field)}_legend`)),l=`${o.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${s}, values: [${o.join(", ")}]} : null`;t.events&&o.length>0?a.on.push({events:o.map(d=>({signal:d})),update:l}):o.length>0&&(a.update=l,delete a.value,delete a.on);const u=n.find(d=>d.name===r+OC),f=Pk(t.bind)&&t.bind.legend;return u&&(t.events?u.on.push({...u.on[0],events:f}):u.on[0].events=f),n}},ufe="_translate_anchor",ffe="_translate_delta",Hbt={defined:e=>"interval"===e.type&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Po.defined(t),a=r+ufe,{x:s,y:o}=t.project.hasChannel;let c=f3(t.translate,"scope");return i||(c=c.map(l=>(l.between[0].markname=r+Uu,l))),n.push({name:a,value:{},on:[{events:c.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==s?`, extent_x: ${i?tT(e,hn):`slice(${s.signals.visual})`}`:"")+(void 0!==o?`, extent_y: ${i?tT(e,s1):`slice(${o.signals.visual})`}`:"")+"}"}]},{name:r+ffe,value:{},on:[{events:c,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),void 0!==s&&dfe(e,t,s,"width",n),void 0!==o&&dfe(e,t,o,"height",n),n}};function dfe(e,t,n,r,i){const a=t.name,s=a+ufe,o=a+ffe,c=n.channel,l=Po.defined(t),u=i.filter(M=>M.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(c),h=d&&d.get("type"),p=d&&d.get("reverse"),g=`${s}.extent_${c}`,b=`${l&&d?"log"===h?"panLog":"symlog"===h?"panSymlog":"pow"===h?"panPow":"panLinear":"panLinear"}(${g}, ${l?c===hn?p?"":"-":p?"-":"":""}${o}.${c} / ${l?`${f}`:`span(${g})`}${l?"pow"===h?`, ${d.get("exponent")??1}`:"symlog"===h?`, ${d.get("constant")??1}`:"":""})`;u.on.push({events:{signal:o},update:l?b:`clampRange(${b}, 0, ${f})`})}const hfe="_zoom_anchor",pfe="_zoom_delta",Sbt={defined:e=>"interval"===e.type&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Po.defined(t),a=r+pfe,{x:s,y:o}=t.project.hasChannel,c=ue(e.scaleName(hn)),l=ue(e.scaleName(s1));let u=f3(t.zoom,"scope");return i||(u=u.map(f=>(f.markname=r+Uu,f))),n.push({name:r+hfe,on:[{events:u,update:i?"{"+[c?`x: invert(${c}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:u,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==s&&mfe(e,t,s,"width",n),void 0!==o&&mfe(e,t,o,"height",n),n}};function mfe(e,t,n,r,i){const a=t.name,s=n.channel,o=Po.defined(t),c=i.filter(y=>y.name===n.signals[o?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,u=e.getScaleComponent(s),f=u&&u.get("type"),d=o?tT(e,s):c.name,h=a+pfe,v=`${o&&u?"log"===f?"zoomLog":"symlog"===f?"zoomSymlog":"pow"===f?"zoomPow":"zoomLinear":"zoomLinear"}(${d}, ${a}${hfe}.${s}, ${h}${o?"pow"===f?`, ${u.get("exponent")??1}`:"symlog"===f?`, ${u.get("constant")??1}`:"":""})`;c.on.push({events:{signal:h},update:o?v:`clampRange(${v}, 0, ${l})`})}const Nl="_store",D3="_tuple",Ebt="_modify",gfe="vlSelectionResolve",PC=[sbt,ibt,nbt,cfe,ofe,Po,lfe,wbt,Hbt,Sbt,sfe];function kl(e,{escape:t}={escape:!0}){let n=t?ue(e.name):e.name;const r=function Vbt(e){let t=e.parent;for(;t&&!ya(t);)t=t.parent;return t}(e);if(r){const{facet:i}=r;for(const a of gi)i[a]&&(n+=` + '__facet_${a}_' + (facet[${ue(r.vgField(a))}])`)}return n}function sT(e){return D1(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function vfe(e,t){(ge(t.select)||!t.select.on)&&delete e.events,(ge(t.select)||!t.select.clear)&&delete e.clear,(ge(t.select)||!t.select.toggle)&&delete e.toggle}function oT(e){const t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push(...oT(e.object)),t.push(...oT(e.property))),t)}function yfe(e){return"MemberExpression"===e.object.type?yfe(e.object):"datum"===e.object.name}function Cfe(e){const t=HA(e),n=new Set;return t.visit(r=>{"MemberExpression"===r.type&&yfe(r)&&n.add(oT(r).slice(1).join("."))}),n}class Gu extends Ot{clone(){return new Gu(null,this.model,qe(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=$C(this.model,this.filter,this),this._dependentFields=Cfe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function bfe(e,t,n,r="datum"){const i=ge(t)?t:t.param,a=dn(i),s=ue(a+Nl);let o;try{o=e.getSelectionComponent(a,i)}catch{return`!!${a}`}if(o.project.timeUnit){const d=n??e.component.data.raw,h=o.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=`${o.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest("}${s}, ${r}${"global"===o.resolve?")":`, ${ue(o.resolve)})`}`,f=`length(data(${s}))`;return!1===t.empty?`${f} && ${u}`:`!${f} || ${u}`}function Mfe(e,t,n){const r=dn(t),i=n.encoding;let s,a=n.field;try{s=e.getSelectionComponent(r,t)}catch{return r}if(i||a){if(i&&!a){const o=s.project.items.filter(c=>c.channel===i);!o.length||o.length>1?(a=s.project.items[0].field,oe((o.length?"Multiple ":"No ")+`matching ${ue(i)} encoding found for selection ${ue(n.param)}. Using "field": ${ue(a)}.`)):a=o[0].field}}else a=s.project.items[0].field,s.project.items.length>1&&oe(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ue(a)}.`);return`${s.name}[${ue(hi(a))}]`}function $C(e,t,n){return cd(t,r=>ge(r)?r:function gvt(e){return e?.param}(r)?bfe(e,r,n):t6e(r))}function cT(e,t,n,r){var i,a;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(a=e.encode[t]).update??(a.update={}),e.encode[t].update[n]=r}function Hd(e,t,n,r={header:!1}){const{disable:i,orient:a,scale:s,labelExpr:o,title:c,zindex:l,...u}=e.combine();if(!i){for(const f in u){const d=myt[f],h=u[f];if(d&&d!==t&&"both"!==d)delete u[f];else if(_d(h)){const{condition:p,...m}=h,g=me(p),v=O6e[f];if(v){const{vgProp:y,part:C}=v;cT(u,C,y,[...g.map(M=>{const{test:w,..._}=M;return{test:$C(null,w),..._}}),m]),delete u[f]}else if(null===v){const y={signal:g.map(C=>{const{test:b,...M}=C;return`${$C(null,b)} ? ${M0e(M)} : `}).join("")+M0e(m)};u[f]=y}}else if(Ve(h)){const p=O6e[f];if(p){const{vgProp:m,part:g}=p;cT(u,g,m,h),delete u[f]}}ct(["labelAlign","labelBaseline"],f)&&null===u[f]&&delete u[f]}if("grid"===t){if(!u.grid)return;if(u.encode){const{grid:f}=u.encode;u.encode={...f?{grid:f}:{}},$t(u.encode)&&delete u.encode}return{scale:s,orient:a,...u,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Nn(l,0)}}{if(!r.header&&e.mainExtracted)return;if(void 0!==o){let d=o;u.encode?.labels?.update&&Ve(u.encode.labels.update.text)&&(d=vl(o,"datum.label",u.encode.labels.update.text.signal)),cT(u,"labels","text",{signal:d})}if(null===u.labelAlign&&delete u.labelAlign,u.encode){for(const d of P6e)e.hasAxisPart(d)||delete u.encode[d];$t(u.encode)&&delete u.encode}const f=function Abt(e,t){if(e)return K(e)&&!M3(e)?e.map(n=>Ek(n,t)).join(", "):e}(c,n);return{scale:s,orient:a,grid:!1,...f?{title:f}:{},...u,...!1===n.aria?{aria:!1}:{},zindex:Nn(l,0)}}}}function _fe(e){const{axes:t}=e.component,n=[];for(const r of _s)if(t[r])for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const a="x"===r?"height":"width",s=e.getSizeSignalRef(a).signal;a!==s&&n.push({name:a,update:s})}return n}function wfe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if("axisOrient"===i){const a="x"===n?"bottom":"left",s=t["x"===n?"axisBottom":"axisLeft"]||{},o=t["x"===n?"axisTop":"axisRight"]||{},c=new Set([...te(s),...te(o)]),l={};for(const u of c.values())l[u]={signal:`${r.signal} === "${a}" ? ${ua(s[u])} : ${ua(o[u])}`};return l}return t[i]})])}function Tbt(e,t){const n=[{}];for(const r of e){let i=t[r]?.style;if(i){i=me(i);for(const a of i)n.push(t.style[a])}}return Object.assign.apply(null,n)}function lT(e,t,n,r={}){const i=w0e(e,n,t);if(void 0!==i)return{configFrom:"style",configValue:i};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==r[a]?.[e])return{configFrom:a,configValue:r[a][e]};return{}}const xfe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??function Ibt(e,t){return!c1(e)&&ce(t)&&!Zt(t?.bin)&&!L1(t?.bin)}(n,e),gridScale:({model:e,channel:t})=>function Fbt(e,t){const n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Hfe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||zfe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??function Obt(e,t){if("x"===t&&ct(["quantitative","temporal"],e))return!0}(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??function Pbt(e,t,n,r){if(n&&!ve(r)||"nominal"!==e&&"ordinal"!==e)return"log"!==t&&"symlog"!==t||"greedy"}(t.type,n,ce(t)&&!!t.timeUnit,ce(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const a="x"===e?"width":"y"===e?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return n.tickCount??function Bbt({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){if(!r&&!c1(t)&&"log"!==t){if(ce(e)){if(Zt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&ct(["month","hours","day","quarter"],o1(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:function Ubt({format:e,fieldOrDatumDef:t}){if("d"===e)return 1;if(ce(t)){const{timeUnit:n}=t;if(n){const r=K0e(n);if(r)return{signal:r}}}},title:({axis:e,model:t,channel:n})=>{if(void 0!==e.title)return e.title;const r=Sfe(t,n);if(void 0!==r)return r;const i=t.typedFieldDef(n),s=t.fieldDef("x"===n?"x2":"y2");return z0e(i?[S6e(i)]:[],ce(s)?[S6e(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>function jbt(e,t){const n=e.values;return K(n)?R6e(t,n):Ve(n)?n:void 0}(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??function qbt(e,t){return"rect"===e&&bC(t)?1:0}(n,t)};function uT(e){return`(((${e.signal} % 360) + 360) % 360)`}function zfe(e,t,n,r){if(void 0!==e){if("x"===n){if(Ve(e)){const i=uT(e);return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${Ve(t)?`(${t.signal} === "top")`:"top"===t} ? "bottom" : "top"`}}return 45<e&&e<135||225<e&&e<315?"middle":Ve(t)?{signal:`${t.signal} ${e<=45||315<=e?"===":"!=="} "top" ? "bottom" : "top"`}:(e<=45||315<=e)==("top"===t)?"bottom":"top"}if(Ve(e)){const i=uT(e);return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${Ve(t)?`(${t.signal} === "left")`:"left"===t} ? "top" : "bottom"`}}return e<=45||315<=e||135<=e&&e<=225?r?"middle":null:Ve(t)?{signal:`${t.signal} ${45<=e&&e<=135?"===":"!=="} "left" ? "top" : "bottom"`}:(45<=e&&e<=135)==("left"===t)?"top":"bottom"}}function Hfe(e,t,n){if(void 0===e)return;const r="x"===n,i=r?0:90,a=r?"bottom":"left";if(Ve(e)){const s=uT(e);return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${Ve(t)?`(${t.signal} === "${a}")`:t===a} ? "left" : "right"`}}return(e+i)%180==0?r?null:"center":Ve(t)?{signal:`${t.signal} ${i<e&&e<180+i?"===":"!=="} "${a}" ? "left" : "right"`}:(i<e&&e<180+i)==(t===a)?"left":"right"}function Sfe(e,t){const n="x"===t?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),a=r?r.title:void 0,s=i?i.title:void 0;return a&&s?H0e(a,s):a||s||(void 0!==a?a:void 0!==s?s:void 0)}class Wu extends Ot{clone(){return new Wu(null,qe(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Cfe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Dl(r)&&H6e(r.sort)){const{field:a,timeUnit:s}=r,o=r.sort,c=o.map((l,u)=>`${t6e({field:a,timeUnit:s,equal:l})} ? ${u} : `).join("")+o.length;t=new Wu(t,{calculate:c,as:Yu(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${ot(this.transform)}`}}function Yu(e,t,n){return fe(e,{prefix:t,suffix:"sort_index",...n??{}})}function BC(e,t){return ct(["top","bottom"],t)?"column":ct(["left","right"],t)||"row"===e?"row":"column"}function Xu(e,t,n,r){return Nn((t||{})[e],("row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet)[e],n.header[e])}function UC(e,t,n,r){const i={};for(const a of e){const s=Xu(a,t||{},n,r);void 0!==s&&(i[a]=s)}return i}const fT=["row","column"],dT=["header","footer"];function Gbt(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:s,titleOrient:o}=UC(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),c=BC(t,o),l=ud(s);return{name:`${t}-title`,type:"group",role:`${c}-title`,title:{text:n,..."row"===t?{orient:"left"}:{},style:"guide-title",...Vfe(l,c),...Efe(c,l,a),...Dfe(r,i,t,Tyt,aue)}}}function Efe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Hfe(t,"row"===e?"left":"top","row"===e?"y":"x");return r?{align:r}:{}}function Vfe(e,t){const n=zfe(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function Wbt(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of dT)if(n[i])for(const a of n[i]){const s=Xbt(e,t,i,n,a);null!=s&&r.push(s)}return r}function Ybt(e,t){const{sort:n}=e;return zs(n)?{field:fe(n,{expr:"datum"}),order:n.order??"ascending"}:K(n)?{field:Yu(e,t,{expr:"datum"}),order:"ascending"}:{field:fe(e,{expr:"datum"}),order:n??"ascending"}}function hT(e,t,n){const{format:r,formatType:i,labelAngle:a,labelAnchor:s,labelOrient:o,labelExpr:c}=UC(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=wk({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,u=BC(t,o);return{text:{signal:c?vl(vl(c,"datum.label",l),"datum.value",fe(e,{expr:"parent"})):l},..."row"===t?{orient:"left"}:{},style:"guide-label",frame:"group",...Vfe(a,u),...Efe(u,a,s),...Dfe(n,e,t,Iyt,sue)}}function Xbt(e,t,n,r,i){if(i){let a=null;const{facetFieldDef:s}=r,o=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:f}=UC(["labelOrient"],s.header,o,t);("row"===t&&!ct(["top","bottom"],f)||"column"===t&&!ct(["left","right"],f))&&(a=hT(s,t,o))}const c=ya(e)&&!Cd(e.facet),l=i.axes,u=l?.length>0;if(a||u){const f="row"===t?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Ybt(s,t)}:{},...u&&c?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...u?{axes:l}:{}}}}return null}const Qbt={column:{start:0,end:1},row:{start:1,end:0}};function Zbt(e,t){return Qbt[t][e]}function Dfe(e,t,n,r,i){const a={};for(const s of r){if(!i[s])continue;const o=Xu(s,t?.header,e,n);void 0!==o&&(a[i[s]]=o)}return a}function pT(e){return[...jC(e,"width"),...jC(e,"height"),...jC(e,"childWidth"),...jC(e,"childHeight")]}function jC(e,t){const n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];const i=e.getSizeSignalRef(t).signal;if("step"===r){const a=e.getScaleComponent(n);if(a){const s=a.get("type"),o=a.get("range");if(c1(s)&&_3(o)){const c=e.scaleName(n);return ya(e.parent)&&"independent"===e.parent.component.resolve.scale[n]?[Lfe(c,o)]:[Lfe(c,o),{name:i,update:Afe(c,a,`domain('${c}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){const a=i.endsWith("width"),s=a?"containerSize()[0]":"containerSize()[1]",c=`isFinite(${s}) ? ${s} : ${jk(e.config.view,a?"width":"height")}`;return[{name:i,init:c,on:[{update:c,events:"window:resize"}]}]}return[{name:i,value:r}]}function Lfe(e,t){const n=`${e}_step`;return Ve(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Afe(e,t,n){const r=t.get("type"),i=t.get("padding"),a=Nn(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s="band"===r?void 0!==s?s:i:1,`bandspace(${n}, ${ua(s)}, ${ua(a)}) * ${e}_step`}function Nfe(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function kfe(e,t){return te(e).reduce((n,r)=>({...n,...ju(t,e[r],r,a=>an(a.value))}),{})}function Tfe(e,t){if(ya(t))return"theta"===e?"independent":"shared";if(Ku(t))return"shared";if(VT(t))return kn(e)||"theta"===e||"radius"===e?"independent":"shared";throw new Error("invalid model type for resolve")}function mT(e,t){const n=e.scale[t],r=kn(t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&oe(function Fgt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}(t)),"independent"):e[r][t]||"shared"}const Jbt={...lue,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Ife=te(Jbt);class eMt extends Oo{}const Ffe={symbols:function tMt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:a}){if("symbol"!==a)return;const{markDef:s,encoding:o,config:c,mark:l}=n,u=s.filled&&"trail"!==l;let f={...Xmt({},n,Ovt),...Jue(n,{filled:u})};const d=i.get("symbolOpacity")??c.legend.symbolOpacity,h=i.get("symbolFillColor")??c.legend.symbolFillColor,p=i.get("symbolStrokeColor")??c.legend.symbolStrokeColor,m=void 0===d?Rfe(o.opacity)??s.opacity:void 0;if(f.fill)if("fill"===r||u&&r===tr)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=an(c.legend.symbolBaseFillColor??"black"),f.fillOpacity=an(m??1));else if(K(f.fill)){const g=gT(o.fill??o.color)??s.fill??(u&&s.color);g&&(f.fill=an(g))}if(f.stroke)if("stroke"===r||!u&&r===tr)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(K(f.stroke)){const g=Nn(gT(o.stroke||o.color),s.stroke,u?s.color:void 0);g&&(f.stroke={value:g})}if(r!==Ao){const g=ce(t)&&Pfe(0,i,t);g?f.opacity=[{test:g,...an(m??1)},an(c.legend.unselectedOpacity)]:m&&(f.opacity=an(m))}return f={...f,...e},$t(f)?void 0:f},gradient:function nMt(e,{model:t,legendType:n,legendCmpt:r}){if("gradient"!==n)return;const{config:i,markDef:a,encoding:s}=t;let o={};const l=void 0===(r.get("gradientOpacity")??i.legend.gradientOpacity)?Rfe(s.opacity)||a.opacity:void 0;return l&&(o.opacity=an(l)),o={...o,...e},$t(o)?void 0:o},labels:function rMt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const a=n.legend(r)||{},s=n.config,o=ce(t)?Pfe(0,i,t):void 0,c=o?[{test:o,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:l,formatType:u}=a;let f;Vl(u)?f=ha({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:u,config:s}):void 0===l&&void 0===u&&s.customFormatTypes&&("quantitative"===t.type&&s.numberFormatType?f=ha({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):"temporal"===t.type&&s.timeFormatType&&ce(t)&&void 0===t.timeUnit&&(f=ha({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const d={...c?{opacity:c}:{},...f?{text:f}:{},...e};return $t(d)?void 0:d},entries:function iMt(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}};function Rfe(e){return Ofe(e,(t,n)=>Math.max(t,n.value))}function gT(e){return Ofe(e,(t,n)=>Nn(t,n.value))}function Ofe(e,t){return function ryt(e){const t=e?.condition;return!!t&&(K(t)||pa(t))}(e)?me(e.condition).reduce(t,e.value):pa(e)?e.value:void 0}function Pfe(e,t,n){const r=t.get("selections");if(!r?.length)return;const i=ue(n.field);return r.map(a=>`(!length(data(${ue(dn(a)+Nl)})) || (${a}[${i}] && indexof(${a}[${i}], datum.value) >= 0))`).join(" || ")}const $fe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return b6e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return M6e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??function fMt({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:s,gradientVerticalMaxLength:o,gradientVerticalMinLength:c}=e;if(fa(i))return"horizontal"===n?"top"===r||"bottom"===r?Bfe(t,"width",s,a):s:Bfe(t,"height",c,o)}(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??function dMt(e){if(ct(["quantile","threshold","log","symlog"],e))return"greedy"}(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??function sMt(e,t,n,r){if("shape"!==t){const i=gT(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Ru(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Au(n)&&fa(t)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:({fieldOrDatumDef:e,legend:t})=>function aMt(e,t){const n=e.values;return K(n)?R6e(t,n):Ve(n)?n:void 0}(t,e)};function Bfe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Ufe(e){const t=Hn(e)?function hMt(e){const{encoding:t}=e,n={};for(const r of[tr,...cue]){const i=Jn(t[r]);!i||!e.getScaleComponent(r)||r===nr&&ce(i)&&i.type===ku||(n[r]=gMt(e,r))}return n}(e):function vMt(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){Ufe(r);for(const i of te(r.component.legends))n.legend[i]=mT(e.component.resolve,i),"shared"===n.legend[i]&&(t[i]=jfe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of te(t))for(const i of e.children)i.component.legends[r]&&"shared"===n.legend[r]&&delete i.component.legends[r];return t}(e);return e.component.legends=t,t}function mMt(e,t,n,r){switch(t){case"disable":return void 0!==n;case"values":return!!n?.values;case"title":if("title"===t&&e===r?.title)return!0}return e===(n||{})[t]}function gMt(e,t){let n=e.legend(t);const{markDef:r,encoding:i,config:a}=e,s=a.legend,o=new eMt({},function pMt(e,t){const n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}(e,t));!function zbt(e,t,n){const r=e.fieldDef(t)?.field;for(const i of D1(e.component.selection??{})){const a=i.project.hasField[r]??i.project.hasChannel[t];if(a&&lfe.defined(i)){const s=n.get("selections")??[];s.push(i.name),n.set("selections",s,!1),a.hasLegend=!0}}}(e,t,o);const c=void 0!==n?!n:s.disable;if(o.set("disable",c,void 0!==n),c)return o;n=n||{};const l=e.getScaleComponent(t).get("type"),u=Jn(i[t]),f=ce(u)?o1(u.timeUnit)?.unit:void 0,d=n.orient||a.legend.orient||"right",h=function oMt(e){const{legend:t}=e;return Nn(t.type,function cMt({channel:e,timeUnit:t,scaleType:n}){if(Au(e)){if(ct(["quarter","month","day"],t))return"symbol";if(fa(n))return"gradient"}return"symbol"}(e))}({legend:n,channel:t,timeUnit:f,scaleType:l}),p=function lMt({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??function uMt(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(n,t)}({legend:n,legendType:h,orient:d,legendConfig:s}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:u,legendConfig:s,config:a,scaleType:l,orient:d,legendType:h,direction:p};for(const b of Ife){if("gradient"===h&&b.startsWith("symbol")||"symbol"===h&&b.startsWith("gradient"))continue;const M=b in $fe?$fe[b](m):n[b];if(void 0!==M){const w=mMt(M,b,n,e.fieldDef(t));(w||void 0===a.legend[b])&&o.set(b,M,w)}}const g=n?.encoding??{},v=o.get("selections"),y={},C={fieldOrDatumDef:u,model:e,channel:t,legendCmpt:o,legendType:h};for(const b of["labels","legend","title","symbols","gradient","entries"]){const M=kfe(g[b]??{},e),w=b in Ffe?Ffe[b](M,C):M;void 0!==w&&!$t(w)&&(y[b]={...v?.length&&ce(u)?{name:`${dn(u.field)}_legend_${b}`}:{},...v?.length?{interactive:!!v}:{},update:w})}return $t(y)||o.set("encode",y,!!n?.encoding),o}function jfe(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const a of Ife){const s=S3(e.getWithExplicit(a),t.getWithExplicit(a),a,"legend",(o,c)=>{switch(a){case"symbolType":return yMt(o,c);case"title":return S0e(o,c);case"type":return i=!0,Br("symbol")}return NC(o,c,a,"legend")});e.setWithExplicit(a,s)}return i&&(e.implicit?.encode?.gradient&&Yy(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&Yy(e.explicit,["encode","gradient"])),e}function yMt(e,t){return"circle"===t.value?t:e}function qfe(e){const t=e.component.legends,n={};for(const i of te(t)){const s=Bt(e.getScaleComponent(i).get("domains"));if(n[s])for(const o of n[s])jfe(o,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return D1(n).flat().map(i=>function bMt(e,t){const{disable:n,labelExpr:r,selections:i,...a}=e.combine();if(!n){if(!1===t.aria&&null==a.aria&&(a.aria=!1),a.encode?.symbols){const s=a.encode.symbols.update;s.fill&&"transparent"!==s.fill.value&&!s.stroke&&!a.stroke&&(s.stroke={value:"transparent"});for(const o of cue)a[o]&&delete s[o]}if(a.title||delete a.title,void 0!==r){let s=r;a.encode?.labels?.update&&Ve(a.encode.labels.update.text)&&(s=vl(r,"datum.label",a.encode.labels.update.text.signal)),function CMt(e,t,n,r){var i,a;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(a=e.encode[t]).update??(a.update={}),e.encode[t].update[n]=r}(a,"labels","text",{signal:s})}return a}}(i,e.config)).filter(i=>void 0!==i)}function Gfe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},a=t.data.reduce((s,o)=>{const c=Ve(o)?o.signal:`data('${e.lookupDataSource(o)}')`;return ct(s,c)||s.push(c),s},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const wMt=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Wfe extends Oo{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function Yfe(e){e.component.projection=Hn(e)?function xMt(e){if(e.hasProjection){const t=ir(e.specifiedProjection),n=!(t&&(null!=t.scale||null!=t.translate)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?function zMt(e){const t=[],{encoding:n}=e;for(const r of[[ca,oa],[mi,la]])(Jn(n[r[0]])||Jn(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(nr)&&e.typedFieldDef(nr).type===ku&&t.push({signal:e.getName(`geojson_${t.length}`)}),0===t.length&&t.push(e.requestDataName(sn.Main)),t}(e):void 0,a=new Wfe(e.projectionName(!0),{...ir(e.config.projection)??{},...t??{}},r,i);return a.get("type")||a.set("type","equalEarth",!1),a}}(e):function SMt(e){if(0===e.children.length)return;let t;for(const r of e.children)Yfe(r);const n=IN(e.children,r=>{const i=r.component.projection;if(i){if(t){const a=function HMt(e,t){const n=IN(wMt,i=>!!(!Ne(e.explicit,i)&&!Ne(t.explicit,i)||Ne(e.explicit,i)&&Ne(t.explicit,i)&&Or(e.get(i),t.get(i))));if(Or(e.size,t.size)){if(n)return e;if(Or(e.explicit,{}))return t;if(Or(t.explicit,{}))return e}return null}(t,i);return a&&(t=a),!!a}return t=i,!0}return!0});if(t&&n){const r=e.projectionName(!0),i=new Wfe(r,t.specifiedProjection,t.size,qe(t.data));for(const a of e.children){const s=a.component.projection;s&&(s.isFit&&i.data.push(...a.component.projection.data),a.renameProjection(s.get("name"),r),s.merged=!0)}return i}}(e)}function EMt(e,t,n,r){if(Md(t,n)){const i=Hn(e)?e.axis(n)??e.legend(n)??{}:{},a=fe(t,{expr:"datum"}),s=fe(t,{expr:"datum",binSuffix:"end"});return{formulaAs:fe(t,{binSuffix:"range",forAs:!0}),formula:yd(a,s,i.format,i.formatType,r)}}return{}}function Xfe(e,t){return`${g0e(e)}_${t}`}function vT(e,t,n){const i=Xfe(wC(n,void 0)??{},t);return e.getName(`${i}_bins`)}function Qfe(e,t,n){let r,i;r=function DMt(e){return"as"in e}(e)?ge(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:[fe(e,{forAs:!0}),fe(e,{binSuffix:"end",forAs:!0})];const a={...wC(t,void 0)},s=Xfe(a,e.field),{signal:o,extentSignal:c}=function VMt(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}(n,s);if(rC(a.extent)){const u=a.extent;i=Mfe(n,u.param,u),delete a.extent}return{key:s,binComponent:{bin:a,field:e.field,as:[r],...o?{signal:o}:{},...c?{extentSignal:c}:{},...i?{span:i}:{}}}}class Ls extends Ot{clone(){return new Ls(null,qe(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,a,s)=>{if(H2(a)&&Zt(a.bin)){const{key:o,binComponent:c}=Qfe(a,a.bin,n);i[o]={...c,...i[o],...EMt(n,a,s,n.config)}}return i},{});return $t(r)?null:new Ls(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:a}=Qfe(n,n.bin,r);return new Ls(t,{[i]:a})}merge(t,n){for(const r of te(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=vs([...this.bins[r].as,...t.bins[r].as],ot)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(D1(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(D1(this.bins).map(t=>t.field))}hash(){return`Bin ${ot(this.bins)}`}assemble(){return D1(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:a,...s}=t.bin,o={type:"bin",field:hi(t.field),as:r,signal:t.signal,...rC(a)?{extent:null}:{extent:a},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!a&&t.extentSignal&&(n.push({type:"extent",field:hi(t.field),signal:t.extentSignal}),o.extent={signal:t.extentSignal}),n.push(o);for(const c of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:fe({field:r[l]},{expr:"datum"}),as:c[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}class ga extends Ot{clone(){return new ga(null,new Set(this.dimensions),qe(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(s=>{s.aggregate&&(r=!0)});const i={},a=new Set;return r&&(n.forEachFieldDef((s,o)=>{const{aggregate:c,field:l}=s;if(c)if("count"===c)i["*"]??(i["*"]={}),i["*"].count=new Set([fe(s,{forAs:!0})]);else{if(ko(c)||b3(c)){const u=ko(c)?"argmin":"argmax",f=c[u];i[f]??(i[f]={}),i[f][u]=new Set([fe({op:u,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][c]=new Set([fe(s,{forAs:!0})]);No(o)&&"unaggregated"===n.scaleDomain(o)&&(i[l]??(i[l]={}),i[l].min=new Set([fe({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([fe({field:l,aggregate:"max"},{forAs:!0})]))}else!function LMt(e,t,n,r){const i=Hn(r)?r.encoding[Ms(t)]:void 0;if(H2(n)&&Hn(r)&&V6e(n,i,r.markDef,r.config)){e.add(fe(n,{})),e.add(fe(n,{suffix:"end"}));const{mark:a,markDef:s,config:o}=r,c=z3({fieldDef:n,markDef:s,config:o});gd(a)&&.5!==c&&kn(t)&&(e.add(fe(n,{suffix:kC})),e.add(fe(n,{suffix:TC}))),n.bin&&Md(n,t)&&e.add(fe(n,{binSuffix:"range"}))}else if(a0e(t)){const a=i0e(t);e.add(r.getName(a))}else e.add(fe(n));return Dl(n)&&function Vvt(e){return ve(e)&&"field"in e}(n.scale?.range)&&e.add(n.scale.range.field),e}(a,o,s,n)}),a.size+te(i).length!==0)?new ga(t,a,i):null}static makeFromTransform(t,n){const r=new Set,i={};for(const a of n.aggregate){const{op:s,field:o,as:c}=a;s&&("count"===s?(i["*"]??(i["*"]={}),i["*"].count=new Set([c||fe(a,{forAs:!0})])):(i[o]??(i[o]={}),i[o][s]=new Set([c||fe(a,{forAs:!0})])))}for(const a of n.groupby??[])r.add(a);return r.size+te(i).length===0?null:new ga(t,r,i)}merge(t){return Xle(this.dimensions,t.dimensions)?(function AMt(e,t){for(const n of te(t)){const r=t[n];for(const i of te(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}(this.measures,t.measures),!0):(function evt(...e){ws.debug(...e)}("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...te(this.measures)])}producedFields(){const t=new Set;for(const n of te(this.measures))for(const r of te(this.measures[n])){const i=this.measures[n][r];0===i.size?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${ot({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const a of te(this.measures))for(const s of te(this.measures[a]))for(const o of this.measures[a][s])r.push(o),t.push(s),n.push("*"===a?null:hi(a));return{type:"aggregate",groupby:[...this.dimensions].map(hi),ops:t,fields:n,as:r}}}class Qu extends Ot{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const a of gi){const s=n.facet[a];if(s){const{bin:o,sort:c}=s;this[a]={name:n.getName(`${a}_domain`),fields:[fe(s),...Zt(o)?[fe(s,{binSuffix:"end"})]:[]],...zs(c)?{sortField:c}:K(c)?{sortIndexField:Yu(s,a)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of gi)this[n]&&(t+=` ${n.charAt(0)}:${ot(this[n])}`);return t}get fields(){const t=[];for(const n of gi)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of gi)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of _s){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),a=r.get("range");if(c1(i)&&_3(a)){const o=ST(GC(this.childModel,n));o?t[n]=o:oe(ek(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],a=[],s=[],o=[];i&&r&&r[i]&&(n?(a.push(`distinct_${r[i]}`),s.push("max")):(a.push(r[i]),s.push("distinct")),o.push(`distinct_${r[i]}`));const{sortField:c,sortIndexField:l}=this[t];if(c){const{op:u=mC,field:f}=c;a.push(f),s.push(u),o.push(fe(c,{forAs:!0}))}else l&&(a.push(l),s.push("max"),o.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...a.length?{fields:a,ops:s,as:o}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],a={};for(const c of fT){for(const l of dT){const u=(r[c]&&r[c][l])??[];for(const f of u)if(f.axes?.length>0){a[c]=!0;break}}if(a[c]){const l=`length(data("${this.facet.name}"))`;i.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:"row"===c?n?{signal:`ceil(${l} / ${n})`}:1:n?{signal:`min(${l}, ${n})`}:{signal:l}}]})}}const{row:s,column:o}=a;return(s||o)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:a,facet:s}=this;if(i&&a&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const o=[].concat(r.x??[],r.y??[]),c=o.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:c}]})}for(const o of[Eo,So])this[o]&&t.push(this.assembleRowColumnHeaderData(o,n,r));if(s){const o=this.assembleFacetHeaderData(r);o&&t.push(...o)}return t}}function Zfe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function kMt(e){const t={};return Wy(e.filter,n=>{if(e6e(n)){let r=null;sk(n)?r=Pr(n.equal):ck(n)?r=Pr(n.lte):ok(n)?r=Pr(n.lt):lk(n)?r=Pr(n.gt):uk(n)?r=Pr(n.gte):fk(n)?r=n.range[0]:dk(n)&&(r=(n.oneOf??n.in)[0]),r&&(_l(r)?t[n.field]="date":mt(r)?t[n.field]="number":ge(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}class Z1 extends Ot{clone(){return new Z1(null,qe(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${ot(this._parse)}`}static makeExplicit(t,n,r){let i={};const a=n.data;return!E3(a)&&a?.format?.parse&&(i=a.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const o of te(r)){const c=i.getWithExplicit(o);void 0!==c.value&&(c.explicit||c.value===r[o]||"derived"===c.value||"flatten"===r[o]?delete r[o]:oe(k0e(o,r[o],c.value)))}for(const o of te(n)){const c=i.get(o);void 0!==c&&(c===n[o]?delete n[o]:oe(k0e(o,n[o],c)))}const a=new Oo(n,r);i.copyAll(a);const s={};for(const o of te(a.combine())){const c=a.get(o);null!==c&&(s[o]=c)}return 0===te(s).length||i.parseNothing?null:new Z1(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of te(this._parse)){const r=this._parse[n];1===Vu(n)&&(t[n]=r)}return t}producedFields(){return new Set(te(this._parse))}dependentFields(){return new Set(te(this._parse))}assembleTransforms(t=!1){return te(this._parse).filter(n=>!t||Vu(n)>1).map(n=>{const r=function NMt(e,t){const n=PN(e);return"number"===t?`toNumber(${n})`:"boolean"===t?`toBoolean(${n})`:"string"===t?`toString(${n})`:"date"===t?`toDate(${n})`:"flatten"===t?n:t.startsWith("date:")?`timeParse(${n},'${Zfe(t.slice(5,t.length))}')`:t.startsWith("utc:")?`utcParse(${n},'${Zfe(t.slice(4,t.length))}')`:(oe(function cgt(e){return`Unrecognized parse "${e}".`}(t)),null)}(n,this._parse[n]);return r?{type:"formula",expr:r,as:$N(n)}:null}).filter(n=>null!==n)}}class L3 extends Ot{clone(){return new L3(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ma])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ma}}}class Sd extends Ot{clone(){return new Sd(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${ot(this.params)}`}assemble(){return{type:"graticule",...!0===this.params?{}:this.params}}}class Ed extends Ot{clone(){return new Ed(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${ot(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Tl extends Ot{constructor(t){let n;if(super(null),t??(t={name:"source"}),E3(t)||(n=t.format?{...er(t.format,["parse"])}:{}),wd(t))this._data={values:t.values};else if(Bu(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];ct(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else Pue(t)?this._data={values:[{type:"Sphere"}]}:(Rue(t)||E3(t))&&(this._data={});this._generator=E3(t),t.name&&(this._name=t.name),n&&!$t(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Vd,Kfe=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};function yT(e){return e instanceof Tl||e instanceof Sd||e instanceof Ed}class CT{constructor(){Vd.set(this,void 0),Kfe(this,Vd,!1,"f")}setModified(){Kfe(this,Vd,!0,"f")}get modifiedFlag(){return function(e,t,n,r){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}(this,Vd)}}Vd=new WeakMap;class Il extends CT{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,a)=>a[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class bT extends CT{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class RMt extends bT{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)void 0===r[n[i]]?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of te(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class OMt extends bT{constructor(t){super(),this.requiresSelectionId=t&&sT(t)}run(t){t instanceof L3&&(this.requiresSelectionId&&(yT(t.parent)||t.parent instanceof ga||t.parent instanceof Z1)||(this.setModified(),t.remove()))}}class PMt extends CT{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Ds&&(r=t.producedFields(),FN(r,n)&&(this.setModified(),t.removeFormulas(n),0===t.producedFields.length&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class $Mt extends bT{constructor(){super()}run(t){t instanceof S2&&!t.isRequired()&&(this.setModified(),t.remove())}}class BMt extends Il{run(t){if(!(yT(t)||t.numChildren()>1))for(const n of t.children)if(n instanceof Z1)if(t instanceof Z1)this.setModified(),t.merge(n);else{if(ON(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}class UMt extends Il{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Z1);if(t.numChildren()>1&&r.length>=1){const i={},a=new Set;for(const s of r){const o=s.parse;for(const c of te(o))c in i?i[c]!==o[c]&&a.add(c):i[c]=o[c]}for(const s of a)delete i[s];if(!$t(i)){this.setModified();const s=new Z1(t,i);for(const o of n){if(o instanceof Z1)for(const c of te(i))delete o.parse[c];t.removeChild(o),o.parent=s,o instanceof Z1&&0===te(o.parse).length&&o.remove()}}}}}class jMt extends Il{run(t){t instanceof S2||t.numChildren()>0||t instanceof Qu||t instanceof Tl||(this.setModified(),t.remove())}}class qMt extends Il{run(t){const n=t.children.filter(i=>i instanceof Ds),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class GMt extends Il{run(t){const n=t.children.filter(i=>i instanceof ga),r={};for(const i of n){const a=ot(i.groupBy);a in r||(r[a]=[]),r[a].push(i)}for(const i of te(r)){const a=r[i];if(a.length>1){const s=a.pop();for(const o of a)s.merge(o)&&(t.removeChild(o),o.parent=s,o.remove(),this.setModified())}}}}class WMt extends Il{constructor(t){super(),this.model=t}run(t){const n=!(yT(t)||t instanceof Gu||t instanceof Z1||t instanceof L3),r=[],i=[];for(const a of t.children)a instanceof Ls&&(n&&!ON(t.producedFields(),a.dependentFields())?r.push(a):i.push(a));if(r.length>0){const a=r.pop();for(const s of r)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Ls?t.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(i.length>1){const a=i.pop();for(const s of i)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class YMt extends Il{run(t){const n=[...t.children];if(!gl(n,s=>s instanceof S2)||t.numChildren()<=1)return;const i=[];let a;for(const s of n)if(s instanceof S2){let o=s;for(;1===o.numChildren();){const[c]=o.children;if(!(c instanceof S2))break;o=c}i.push(...o.children),a?(t.removeChild(s),s.parent=a.parent,a.parent.removeChild(a),a.parent=o,this.setModified()):a=o}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=a}}}class Fl extends Ot{clone(){return new Fl(null,qe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=vs(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>void 0!==n).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??fe(t)}hash(){return`JoinAggregateTransform ${ot(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const a of this.transform.joinaggregate)n.push(a.op),r.push(this.getDefaultName(a)),t.push(void 0===a.field?null:a.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...void 0!==i?{groupby:i}:{}}}}class $o extends Ot{clone(){return new $o(null,qe(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:a,offset:s="zero"}=n,o=[],c=[];if(void 0!==n.sort)for(const f of n.sort)o.push(f.field),c.push(Nn(f.order,"ascending"));const l={field:o,order:c};let u;return u=function QMt(e){return K(e)&&e.every(t=>ge(t))&&e.length>1}(a)?a:ge(a)?[a,`${a}_end`]:[`${n.stack}_start`,`${n.stack}_end`],new $o(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:s,sort:l,facetby:[],as:u})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:a,fieldChannel:s,offset:o,impute:c}=r,l=a.map(h=>Ss(i[h])).filter(h=>!!h),u=function XMt(e){return e.stack.stackBy.reduce((t,n)=>{const i=fe(n.fieldDef);return i&&t.push(i),t},[])}(n),f=n.encoding.order;let d;if(K(f)||ce(f))d=x0e(f);else{const h=D6e(f)?f.sort:"y"===s?"descending":"ascending";d=u.reduce((p,m)=>(p.field.push(m),p.order.push(h),p),{field:[],order:[]})}return new $o(t,{dimensionFieldDefs:l,stackField:n.vgField(s),facetby:[],stackby:u,sort:d,offset:o,impute:c,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${ot(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[fe(i,{binSuffix:"mid"})]:[fe(i,{}),fe(i,{binSuffix:"end"})]:[fe(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:a,sort:s,offset:o,impute:c,as:l}=this._stack;if(c)for(const u of r){const{bandPosition:f=.5,bin:d}=u;if(d){const h=fe(u,{expr:"datum"}),p=fe(u,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:fe(u,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...a,...n],key:fe(u,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:s,as:l,offset:o}),t}}class Zu extends Ot{clone(){return new Zu(null,qe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=vs(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>void 0!==n).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??fe(t)}hash(){return`WindowTransform ${ot(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(void 0===f.param?null:f.param),t.push(void 0===f.field?null:f.field);const a=this.transform.frame,s=this.transform.groupby;if(a&&null===a[0]&&null===a[1]&&n.every(f=>ZN(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...void 0!==s?{groupby:s}:{}};const o=[],c=[];if(void 0!==this.transform.sort)for(const f of this.transform.sort)o.push(f.field),c.push(f.order??"ascending");const u=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:{field:o,order:c},...void 0!==u?{ignorePeers:u}:{},...void 0!==s?{groupby:s}:{},...void 0!==a?{frame:a}:{}}}}function MT(e){if(e instanceof Qu)if(1!==e.numChildren()||e.children[0]instanceof S2){const t=e.model.component.data.main;Jfe(t);const n=function ZMt(e){return function t(n){if(!(n instanceof Qu)){const r=n.clone();if(r instanceof S2){const i=_T+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof ga||r instanceof $o||r instanceof Zu||r instanceof Fl)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}}(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else{const t=e.children[0];(t instanceof ga||t instanceof $o||t instanceof Zu||t instanceof Fl)&&t.addDimensions(e.fields),t.swapWithParent(),MT(e)}else e.children.map(MT)}function Jfe(e){if(e instanceof S2&&e.type===sn.Main&&1===e.numChildren()){const t=e.children[0];t instanceof Qu||(t.swapWithParent(),Jfe(e))}}const _T="scale_",qC=5;function wT(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!wT(t.children))return!1}return!0}function va(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function e8e(e,t,n){let r=e.sources,i=!1;return i=va(new $Mt,r)||i,i=va(new OMt(t),r)||i,r=r.filter(a=>a.numChildren()>0),i=va(new jMt,r)||i,r=r.filter(a=>a.numChildren()>0),n||(i=va(new BMt,r)||i,i=va(new WMt(t),r)||i,i=va(new PMt,r)||i,i=va(new UMt,r)||i,i=va(new GMt,r)||i,i=va(new qMt,r)||i,i=va(new RMt,r)||i,i=va(new YMt,r)||i),e.sources=r,i}class u1{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new u1(()=>t(n))}}function t8e(e){Hn(e)?function JMt(e){const t=e.component.scales;for(const n of te(t)){const r=n_t(e,n);if(t[n].setWithExplicit("domains",r),i_t(e,n),e.component.data.isFaceted){let a=e;for(;!ya(a)&&a.parent;)a=a.parent;if("shared"===a.component.resolve.scale[n])for(const o of r.value)To(o)&&(o.data=_T+o.data.replace(_T,""))}}}(e):function e_t(e){for(const n of e.children)t8e(n);const t=e.component.scales;for(const n of te(t)){let r,i=null;for(const a of e.children){const s=a.component.scales[n];if(s){r=void 0===r?s.getWithExplicit("domains"):S3(r,s.getWithExplicit("domains"),"domains","scale",HT);const o=s.get("selectionExtent");i&&o&&i.param!==o.param&&oe("The same selection must be used to override scale domains in a layered view."),i=o}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}(e)}function n_t(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=function t_t(e,t,n,r){if("unaggregated"===e){const{valid:i,reason:a}=n8e(t,n);if(!i)return void oe(a)}else if(void 0===e&&r.useUnaggregatedDomain){const{valid:i}=n8e(t,n);if(i)return"unaggregated"}return e}(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),"x"===t&&Jn(r.x2)?Jn(r.x)?S3(A3(n,i,e,"x"),A3(n,i,e,"x2"),"domain","scale",HT):A3(n,i,e,"x2"):"y"===t&&Jn(r.y2)?Jn(r.y)?S3(A3(n,i,e,"y"),A3(n,i,e,"y2"),"domain","scale",HT):A3(n,i,e,"y2"):A3(n,i,e,t)}function xT(e,t,n){const r=o1(n)?.unit;return"temporal"===t||r?function r_t(e,t,n){return e.map(r=>({signal:`{data: ${xC(r,{timeUnit:n,type:t})}}`}))}(e,t,r):[e]}function A3(e,t,n,r){const{encoding:i,markDef:a,mark:s,config:o,stack:c}=n,l=Jn(i[r]),{type:u}=l,f=l.timeUnit;if(function Evt(e){return e?.unionWith}(t)){const p=A3(e,void 0,n,r);return Vs([...xT(t.unionWith,u,f),...p.value])}if(Ve(t))return Vs([t]);if(t&&"unaggregated"!==t&&!c6e(t))return Vs(xT(t,u,f));if(c&&r===c.fieldChannel){if("normalize"===c.offset)return Br([[0,1]]);const p=n.requestDataName(sn.Main);return Br([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=No(r)&&ce(l)?function a_t(e,t,n){if(!c1(n))return;const r=e.fieldDef(t),i=r.sort;if(H6e(i))return{op:"min",field:Yu(r,t),order:"ascending"};const{stack:a}=e,s=a?new Set([...a.groupbyFields,...a.stackBy.map(o=>o.fieldDef.field)]):void 0;if(zs(i))return zT(i,a&&!s.has(i.field));if(z6e(i)){const{encoding:o,order:c}=i,l=e.fieldDef(o),{aggregate:u,field:f}=l,d=a&&!s.has(f);if(ko(u)||b3(u))return zT({field:fe(l),order:c},d);if(ZN(u)||!u)return zT({op:u,field:f,order:c},d)}else{if("descending"===i)return{op:"min",field:e.vgField(t),order:"descending"};if(ct(["ascending",void 0],i))return!0}}(n,r,e):void 0;if(Hs(l))return Br(xT([l.datum],u,f));const h=l;if("unaggregated"===t){const p=n.requestDataName(sn.Main),{field:m}=l;return Br([{data:p,field:fe({field:m,aggregate:"min"})},{data:p,field:fe({field:m,aggregate:"max"})}])}if(Zt(h.bin)){if(c1(e))return Br("bin-ordinal"===e?[]:[{data:od(d)?n.requestDataName(sn.Main):n.requestDataName(sn.Raw),field:n.vgField(r,Md(h,r)?{binSuffix:"range"}:{}),sort:!0!==d&&ve(d)?d:{field:n.vgField(r,{}),op:"min"}}]);{const{bin:p}=h;if(Zt(p)){const m=vT(n,h.field,p);return Br([new u1(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}return Br([{data:n.requestDataName(sn.Main),field:n.vgField(r,{})}])}}if(h.timeUnit&&ct(["time","utc"],e)){const p=i[Ms(r)];if(V6e(h,p,a,o)){const m=n.requestDataName(sn.Main),g=z3({fieldDef:h,fieldDef2:p,markDef:a,config:o}),v=gd(s)&&.5!==g&&kn(r);return Br([{data:m,field:n.vgField(r,v?{suffix:kC}:{})},{data:m,field:n.vgField(r,{suffix:v?TC:"end"})}])}}return Br(d?[{data:od(d)?n.requestDataName(sn.Main):n.requestDataName(sn.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(sn.Main),field:n.vgField(r)}])}function zT(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":mC),...r?{field:hi(r)}:{},...i?{order:i}:{}}}function i_t(e,t){const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t)?.bin,a=c6e(r)&&r,s=Ml(i)&&rC(i.extent)&&i.extent;(a||s)&&n.set("selectionExtent",a??s,!0)}function n8e(e,t){const{aggregate:n,type:r}=e;return n?ge(n)&&!Umt.has(n)?{valid:!1,reason:Dgt(n)}:"quantitative"===r&&"log"===t?{valid:!1,reason:Lgt(e)}:{valid:!0}:{valid:!1,reason:Vgt(e)}}function HT(e,t,n,r){return e.explicit&&t.explicit&&oe(function Igt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Bt(n)} and ${Bt(r)}). Using the union of the two domains.`}(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function ST(e){if(To(e)&&ge(e.field))return e.field;if(function jmt(e){return!K(e)&&"fields"in e&&!("data"in e)}(e)){let t;for(const n of e.fields)if(To(n)&&ge(n.field))if(t){if(t!==n.field)return oe("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),t}else t=n.field;return oe("Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."),t}if(function qmt(e){return!K(e)&&"fields"in e&&"data"in e}(e)){oe("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.");const t=e.fields[0];return ge(t)?t:void 0}}function GC(e,t){return function s_t(e){const t=vs(e.map(s=>{if(To(s)){const{sort:o,...c}=s;return c}return s}),ot),n=vs(e.map(s=>{if(To(s)){const o=s.sort;return void 0!==o&&!od(o)&&("op"in o&&"count"===o.op&&delete o.field,"ascending"===o.order&&delete o.order),o}}).filter(s=>void 0!==s),ot);if(0===t.length)return;if(1===t.length){const s=e[0];if(To(s)&&n.length>0){let o=n[0];if(n.length>1){oe(P0e);const c=n.filter(l=>ve(l)&&"op"in l&&"min"!==l.op);o=!n.every(l=>ve(l)&&"op"in l)||1!==c.length||c[0]}else ve(o)&&"field"in o&&s.field===o.field&&(o=!o.order||{order:o.order});return{...s,sort:o}}return s}const r=vs(n.map(s=>od(s)||!("op"in s)||ge(s.op)&&s.op in Omt?s:(oe(function Rgt(e){return`Dropping sort property ${Bt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}(s)),!0)),ot);let i;1===r.length?i=r[0]:r.length>1&&(oe(P0e),i=!0);const a=vs(e.map(s=>To(s)?s.data:null),s=>s);return 1===a.length&&null!==a[0]?{data:a[0],fields:t.map(o=>o.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}(e.component.scales[t].get("domains").map(i=>(To(i)&&(i.data=e.lookupDataSource(i.data)),i)))}function r8e(e){return Ku(e)||VT(e)?e.children.reduce((t,n)=>t.concat(r8e(n)),i8e(e)):i8e(e)}function i8e(e){return te(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:a,type:s,selectionExtent:o,domains:c,range:l,reverse:u,...f}=i,d=function o_t(e,t,n,r){if(kn(n)){if(_3(e))return{step:{signal:`${t}_step`}}}else if(ve(e)&&To(e))return{...e,data:r.lookupDataSource(e.data)};return e}(i.range,a,n,e),h=GC(e,n),p=o?function ebt(e,t,n,r){const i=Mfe(e,t.param,t);return{signal:$r(n.get("type"))&&K(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}(e,o,r,h):null;return t.push({name:a,type:s,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...void 0!==u?{reverse:u}:{},...f}),t},[])}class a8e extends Oo{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||gl(this.get("domains"),t=>K(t)&&2===t.length&&mt(t[0])&&t[0]<=0&&mt(t[1])&&t[1]>=0)}}const c_t=["range","scheme"];function s8e(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:r,field:i}=n,a=rr(t),s=e.getName(a);if(ve(r)&&r.binned&&void 0!==r.step)return new u1(()=>{const o=e.scaleName(t),c=`(domain("${o}")[1] - domain("${o}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${c})`});if(Zt(r)){const o=vT(e,i,r);return new u1(()=>{const c=e.getSignalName(o),l=`(${c}.stop - ${c}.start) / ${c}.step`;return`${e.getSignalName(s)} / (${l})`})}}}function u_t(e,t){const n=t.specifiedScales[e],{size:r}=t,a=t.getScaleComponent(e).get("type");for(const f of c_t)if(void 0!==n[f]){const d=gk(a,f),h=u6e(e,f);if(d)if(h)oe(h);else switch(f){case"range":{const p=n.range;if(K(p)){if(kn(e))return Vs(p.map(m=>{if("width"===m||"height"===m){const g=t.getName(m),v=t.getSignalName.bind(t);return u1.fromName(v,g)}return m}))}else if(ve(p))return Vs({data:t.requestDataName(sn.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Vs(p)}case"scheme":return Vs(f_t(n[f]))}else oe(R0e(a,f,e))}const s=e===hn||"xOffset"===e?"width":"height",o=r[s];if(Es(o))if(kn(e))if(c1(a)){const f=c8e(o,t,e);if(f)return Vs({step:f})}else oe(O0e(s));else if(hd(e)&&"band"===t.getScaleComponent(e===p3?"x":"y").get("type")){const p=l8e(o,a);if(p)return Vs(p)}const{rangeMin:c,rangeMax:l}=n,u=function d_t(e,t){const{size:n,config:r,mark:i,encoding:a}=t,{type:s}=Jn(a[e]),c=t.getScaleComponent(e).get("type"),{domain:l,domainMid:u}=t.specifiedScales[e];switch(e){case hn:case s1:if(ct(["point","band"],c)){const f=u8e(e,n,r.view);if(Es(f))return{step:c8e(f,t,e)}}return o8e(e,t,c);case p3:case Du:return function h_t(e,t,n){const r=e===p3?"x":"y",i=t.getScaleComponent(r);if(!i)return o8e(r,t,n,{center:!0});const a=i.get("type"),s=t.scaleName(r),{markDef:o,config:c}=t;if("band"===a){const l=u8e(r,t.size,t.config.view);if(Es(l)){const u=l8e(l,n);if(u)return u}return[0,{signal:`bandwidth('${s}')`}]}{const l=t.encoding[r];if(ce(l)&&l.timeUnit){const u=K0e(l.timeUnit,p=>`scale('${s}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=z3({fieldDef:l,markDef:o,config:c})-.5,h=0!==d?` + ${d}`:"";return f?[{signal:`${Ve(f)?`${f.signal}/2`+h:`${f/2+d}`} * (${u})`},{signal:`${Ve(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`} * (${u})`}]:[0,{signal:u}]}return Wle(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}(e,t,c);case Lo:{const d=f8e(i,t.component.scales[e].get("zero"),r),h=function g_t(e,t,n,r){const i={x:s8e(n,"x"),y:s8e(n,"y")};switch(e){case"bar":case"tick":{if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;const a=h8e(t,i,r.view);return mt(a)?a-1:new u1(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const a=h8e(t,i,r.view);return mt(a)?Math.pow(d8e*a,2):new u1(()=>`pow(${d8e} * ${a.signal}, 2)`)}}throw new Error(aC("size",e))}(i,n,t,r);return Tu(c)?function m_t(e,t,n){const r=()=>{const i=ua(t),a=ua(e),s=`(${i} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${i} + ${s}, ${s})`};return Ve(t)?new u1(r):{signal:r()}}(d,h,function p_t(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&K(n)?n.length+1:(oe(function Qgt(e){return`Domain for ${e} is required for threshold scale.`}(r)),3)}}(c,r,l,e)):[d,h]}case pi:return[0,2*Math.PI];case yl:return[0,360];case sa:return[0,new u1(()=>`min(${t.getSignalName("width")},${t.getSignalName("height")})/2`)];case v3:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case y3:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case nr:return"symbol";case tr:case Cs:case bs:return"ordinal"===c?"nominal"===s?"category":"ordinal":void 0!==u?"diverging":"rect"===i||"geoshape"===i?"heatmap":"ramp";case Ao:case m3:case g3:return[r.scale.minOpacity,r.scale.maxOpacity]}}(e,t);return(void 0!==c||void 0!==l)&&gk(a,"rangeMin")&&K(u)&&2===u.length?Vs([c??u[0],l??u[1]]):Br(u)}function f_t(e){return function Svt(e){return!ge(e)&&!!e.name}(e)?{scheme:e.name,...er(e,["name"])}:{scheme:e}}function o8e(e,t,n,{center:r}={}){const i=rr(e),a=t.getName(i),s=t.getSignalName.bind(t);return e===s1&&$r(n)?r?[u1.fromName(o=>`${s(o)}/2`,a),u1.fromName(o=>`-${s(o)}/2`,a)]:[u1.fromName(s,a),0]:r?[u1.fromName(o=>`-${s(o)}/2`,a),u1.fromName(o=>`${s(o)}/2`,a)]:[0,u1.fromName(s,a)]}function c8e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),a=qN(n),s=r[a];if("offset"===fue({step:e,offsetIsDiscrete:Ye(s)&&n6e(s.type)})&&q6e(r,a)){const c=t.getScaleComponent(a);let u=`domain('${t.scaleName(a)}').length`;"band"===c.get("type")&&(u=`bandspace(${u}, ${c.get("paddingInner")??c.get("padding")??0}, ${c.get("paddingOuter")??c.get("padding")??0})`);const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${u} / (1-${Ymt(f)})`}}return e.step}function l8e(e,t){if("offset"===fue({step:e,offsetIsDiscrete:c1(t)}))return{step:e.step}}function u8e(e,t,n){const r=e===hn?"width":"height";return t[r]||LC(n,r)}function f8e(e,t,n){if(t)return Ve(t)?{signal:`${t.signal} ? 0 : ${f8e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(aC("size",e))}const d8e=.95;function h8e(e,t,n){const r=Es(e.width)?e.width.step:DC(n,"width"),i=Es(e.height)?e.height.step:DC(n,"height");return t.x||t.y?new u1(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function p8e(e,t){Hn(e)?function v_t(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:a,specifiedScales:s}=e;for(const o of te(n)){const c=s[o],l=n[o],u=e.getScaleComponent(o),f=Jn(i[o]),d=c[t],h=u.get("type"),p=u.get("padding"),m=u.get("paddingInner"),g=gk(h,t),v=u6e(o,t);if(void 0!==d&&(g?v&&oe(v):oe(R0e(h,t,o))),g&&void 0===v)if(void 0!==d){const y=f.timeUnit,C=f.type;switch(t){case"domainMax":case"domainMin":_l(c[t])||"temporal"===C||y?l.set(t,{signal:xC(c[t],{type:C,timeUnit:y})},!0):l.set(t,c[t],!0);break;default:l.copyKeyFromObject(t,c)}}else{const y=t in m8e?m8e[t]({model:e,channel:o,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:c.domain,domainMin:c.domainMin,domainMax:c.domainMax,markDef:a,config:r,hasNestedOffsetScale:G6e(i,o),hasSecondaryRangeChannel:!!i[Ms(o)]}):r.scale[t];void 0!==y&&l.set(t,y,!1)}}}(e,t):v8e(e,t)}const m8e={bins:({model:e,fieldOrDatumDef:t})=>ce(t)?function y_t(e,t){const n=t.bin;if(Zt(n)){const r=vT(e,t.field,n);return new u1(()=>e.getSignalName(r))}if(L1(n)&&Ml(n)&&void 0!==n.step)return{step:n.step}}(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>function C_t(e,t){if(ct([tr,Cs,bs],e)&&"nominal"!==t)return"hcl"}(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:a})=>function b_t(e,t,n,r,i,a){if(!(Ss(a)?.bin||K(n)||null!=i||null!=r||ct([ar.TIME,ar.UTC],e)))return!!kn(t)||void 0}(e,t,n,r,i,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>function M_t(e,t,n,r,i,a){if(kn(e)){if(fa(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:s,orient:o}=i;if("bar"===s&&(!ce(r)||!r.bin&&!r.timeUnit)&&("vertical"===o&&"x"===e||"horizontal"===o&&"y"===e))return a.continuousBandSize}if(t===ar.POINT)return n.pointPadding}}(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:a})=>function __t(e,t,n,r,i,a=!1){if(void 0===e){if(kn(t)){const{bandPaddingInner:s,barBandPaddingInner:o,rectBandPaddingInner:c,bandWithNestedOffsetPaddingInner:l}=i;return a?l:Nn(s,"bar"===n?o:c)}if(hd(t)&&r===ar.BAND)return i.offsetBandPaddingInner}}(e,t,n.type,r,i.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:a})=>function w_t(e,t,n,r,i,a=!1){if(void 0===e)if(kn(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:o}=i;if(a)return o;if(n===ar.BAND)return Nn(s,Ve(r)?{signal:`${r.signal}/2`}:r/2)}else if(hd(t)){if(n===ar.POINT)return.5;if(n===ar.BAND)return i.offsetBandPaddingOuter}}(e,t,n,r,i.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>function x_t(e,t,n,r){return"x"===n&&void 0!==r.xReverse?$r(e)&&"descending"===t?Ve(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse:!(!$r(e)||"descending"!==t)||void 0}(t,ce(e)?e.sort:void 0,n,r.scale),zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:a,hasSecondaryRangeChannel:s})=>function z_t(e,t,n,r,i,a,s){if(n&&"unaggregated"!==n&&$r(i)){if(K(n)){const c=n[0],l=n[n.length-1];if(mt(c)&&c<=0&&mt(l)&&l>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!Tu(i))return!0;if((!ce(t)||!t.bin)&&ct([..._s,...Lmt],e)){const{orient:c,type:l}=r;return(!ct(["bar","area","line","trail"],l)||!("horizontal"===c&&"y"===e||"vertical"===c&&"x"===e))&&(!(!ct(["bar","area"],l)||s)||a?.zero)}return!1}(e,t,n,r,i,a.scale,s)};function g8e(e){Hn(e)?function l_t(e){const t=e.component.scales;for(const n of nC){const r=t[n];if(!r)continue;const i=u_t(n,e);r.setWithExplicit("range",i)}}(e):v8e(e,"range")}function v8e(e,t){const n=e.component.scales;for(const r of e.children)"range"===t?g8e(r):p8e(r,t);for(const r of te(n)){let i;for(const a of e.children){const s=a.component.scales[r];s&&(i=S3(i,s.getWithExplicit(t),t,"scale",Fue((c,l)=>"range"===t&&c.step&&l.step?c.step-l.step:0)))}n[r].setWithExplicit(t,i)}}function H_t(e,t,n,r,i=!1){const a=function S_t(e,t,n,r){switch(t.type){case"nominal":case"ordinal":if(Au(e)||"discrete"===QN(e))return"shape"===e&&"ordinal"===t.type&&oe(nk(e,"ordinal")),"ordinal";if(kn(e)||hd(e)){if(ct(["rect","bar","image","rule"],n.type)||r)return"band"}else if("arc"===n.type&&e in YN)return"band";return Sl(n[rr(e)])||Fu(t)&&t.axis?.tickBand?"band":"point";case"temporal":return Au(e)?"time":"discrete"===QN(e)?(oe(nk(e,"temporal")),"ordinal"):ce(t)&&t.timeUnit&&o1(t.timeUnit).utc?"utc":"time";case"quantitative":return Au(e)?ce(t)&&Zt(t.bin)?"bin-ordinal":"linear":"discrete"===QN(e)?(oe(nk(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(I0e(t.type))}(t,n,r,i),{type:s}=e;return No(t)?void 0!==s?function Nvt(e,t,n=!1){if(!No(e))return!1;switch(e){case hn:case s1:case p3:case Du:case pi:case sa:return!(!fa(t)&&"band"!==t)||"point"===t&&!n;case Lo:case v3:case Ao:case m3:case g3:case yl:return fa(t)||Tu(t)||ct(["band","point","ordinal"],t);case tr:case Cs:case bs:return"band"!==t;case y3:case nr:return"ordinal"===t||Tu(t)}}(t,s)?ce(n)&&!function Avt(e,t){return ct([pk,mk],t)?void 0===e||c1(e):t===Nu?ct([ar.TIME,ar.UTC,void 0],e):t!==Hl||s6e(e)||Tu(e)||void 0===e}(s,n.type)?(oe(function kgt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}(s,a)),a):s:(oe(function Ngt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}(t,s,a)),a):a:null}function y8e(e){e.component.scales=Hn(e)?function V_t(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const a of nC){const s=Jn(t[a]);if(s&&n===h6e&&a===nr&&s.type===ku)continue;let o=s&&s.scale;if(s&&null!==o&&!1!==o){o??(o={});const l=H_t(o,a,s,r,G6e(t,a));i[a]=new a8e(e.scaleName(`${a}`,!0),{value:l,explicit:o.type===l})}}return i}(e):function L_t(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const a of e.children){y8e(a);for(const s of te(a.component.scales))if((t=i.scale)[s]??(t[s]=Tfe(s,e)),"shared"===i.scale[s]){const o=r[s],c=a.component.scales[s].getWithExplicit("type");o?_vt(o.value,c.value)?r[s]=S3(o,c,"type","scale",D_t):(i.scale[s]="independent",delete r[s]):r[s]=c}}for(const a of te(r)){const s=e.scaleName(a,!0);n[a]=new a8e(s,r[a]);for(const c of e.children){const l=c.component.scales[a];l&&(c.renameScale(l.get("name"),s),l.merged=!0)}}return n}(e)}const D_t=Fue((e,t)=>r6e(e)-r6e(t));class ET{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return void 0!==this.nameMap[t]}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Hn(e){return"unit"===e?.type}function ya(e){return"facet"===e?.type}function VT(e){return"concat"===e?.type}function Ku(e){return"layer"===e?.type}class DT{constructor(t,n,r,i,a,s,o){this.type=n,this.parent=r,this.config=a,this.correctDataNames=c=>(c.from?.data&&(c.from.data=this.lookupDataSource(c.from.data)),c.from?.facet?.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c),this.parent=r,this.config=a,this.view=ir(o),this.name=t.name??i,this.title=M3(t.title)?{text:t.title}:t.title?ir(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new ET,this.projectionNameMap=r?r.projectionNameMap:new ET,this.signalNameMap=r?r.signalNameMap:new ET,this.data=t.data,this.description=t.description,this.transforms=function FCt(e){return e.map(t=>Xk(t)?{filter:Su(t.filter,Cvt)}:t)}(t.transform??[]),this.layout="layer"===n||"unit"===n?{}:function $yt(e,t,n){const r=n[t],i={},{spacing:a,columns:s}=r;void 0!==a&&(i.spacing=a),void 0!==s&&(gC(e)&&!Cd(e.facet)||Bk(e))&&(i.columns=s),VC(e)&&(i.columns=1);for(const o of Pyt)if(void 0!==e[o])if("spacing"===o){const c=e[o];i[o]=mt(c)?c:{row:c.row??a,column:c.column??a}}else i[o]=e[o];return i}(t,n,a),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:gC(t)||r?.component.data.isFaceted&&void 0===t.data},layoutSize:new Oo,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?qe(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function E_t(e,{ignoreRange:t}={}){y8e(e),t8e(e);for(const n of Lvt)p8e(e,n);t||g8e(e)}(this)}parseProjection(){Yfe(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Ufe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const a of te(r)){const s=r[a];void 0!==s&&(i[a]=an(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),t||(this.description&&(n.description=an(this.description)),"unit"!==this.type&&"layer"!==this.type)?$t(n)?void 0:n:{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n??{}}}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,a=function Kbt(e,t){const n={};for(const r of gi){const i=e[r];if(i?.facetFieldDef){const{titleAnchor:a,titleOrient:s}=UC(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),o=BC(r,s),c=Zbt(a,o);void 0!==c&&(n[o]=c)}}return $t(n)?void 0:n}(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of gi)t[r].title&&n.push(Gbt(this,r));for(const r of fT)n=n.concat(Wbt(this,r));return n}assembleAxes(){return function Nbt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>Hd(i,"grid",t)),...r.map(i=>Hd(i,"grid",t)),...n.map(i=>Hd(i,"main",t)),...r.map(i=>Hd(i,"main",t))].filter(i=>i)}(this.component.axes,this.config)}assembleLegends(){return qfe(this)}assembleProjections(){return function MMt(e){return Ku(e)||VT(e)?function _Mt(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Gfe(e))}(e):Gfe(e)}(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...y0e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return ct(["unit","layer"],this.type)?ct(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),$t(r)?void 0:r}assembleGroup(t=[]){const n={};(t=t.concat(this.assembleSignals())).length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||ya(this.parent)?r8e(this):[];i.length>0&&(n.scales=i);const a=this.assembleAxes();a.length>0&&(n.axes=a);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return dn((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(sn[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(ya(this.parent)){const r=tC(Nfe(t)),i=this.component.scales[r];if(i&&!i.merged){const a=i.get("type"),s=i.get("range");if(c1(a)&&_3(s)){const o=i.get("name"),l=ST(GC(this,r));return l?{signal:Afe(o,i,fe({aggregate:"distinct",field:l},{expr:"datum"}))}:(oe(ek(r)),null)}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){return n?this.getName(t):l0e(t)&&No(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0}projectionName(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(function Jmt(e){return`Cannot find a selection named "${e}".`}(n));return r}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class C8e extends DT{vgField(t,n={}){const r=this.fieldDef(t);if(r)return fe(r,n)}reduceFieldDef(t,n){return function Cyt(e,t,n,r){return e?te(e).reduce((i,a)=>{const s=e[a];return K(s)?s.reduce((o,c)=>t.call(r,o,c,a),i):t.call(r,i,s,a)},n):n}(this.getMapping(),(r,i,a)=>{const s=Ss(i);return s?t(r,s,a):r},n)}forEachFieldDef(t,n){Lk(this.getMapping(),(r,i)=>{const a=Ss(r);a&&t(a,i)},n)}}class WC extends Ot{clone(){return new WC(null,qe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qe(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${ot(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return this.transform.groupby&&(r.resolve="shared"),r}}class YC extends Ot{clone(){return new YC(null,qe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qe(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${ot(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class Dd extends Ot{clone(){return new Dd(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:a}=n;if("filter"!==Dt("invalid",a,r))return null;const o=n.reduceFieldDef((c,l,u)=>{const f=No(u)&&n.getScaleComponent(u);return f&&$r(f.get("type"))&&"count"!==l.aggregate&&!x3(i)&&(c[l.field]=l),c},{});return te(o).length?new Dd(t,o):null}dependentFields(){return new Set(te(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${ot(this.filter)}`}assemble(){const t=te(this.filter).reduce((n,r)=>{const i=this.filter[r],a=fe(i,{expr:"datum"});return null!==i&&("temporal"===i.type?n.push(`(isDate(${a}) || (isValid(${a}) && isFinite(+${a})))`):"quantitative"===i.type&&(n.push(`isValid(${a})`),n.push(`isFinite(+${a})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class XC extends Ot{clone(){return new XC(this.parent,qe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qe(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((a,s)=>i[s]??a)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${ot(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class QC extends Ot{clone(){return new QC(null,qe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qe(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${ot(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Ju extends Ot{clone(){return new Ju(null,qe(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[ca,oa],[mi,la]]){const a=i.map(s=>{const o=Jn(n.encoding[s]);return ce(o)?o.field:Hs(o)?{expr:`${o.datum}`}:pa(o)?{expr:`${o.value}`}:void 0});(a[0]||a[1])&&(t=new Ju(t,a,null,n.getName("geojson_"+r++)))}if(n.channelHasField(nr)){const i=n.typedFieldDef(nr);i.type===ku&&(t=new Ju(t,null,i.field,n.getName("geojson_"+r++)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(ge);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${ot(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Ld extends Ot{clone(){return new Ld(null,this.projection,qe(this.fields),qe(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[ca,oa],[mi,la]]){const i=r.map(s=>{const o=Jn(n.encoding[s]);return ce(o)?o.field:Hs(o)?{expr:`${o.datum}`}:pa(o)?{expr:`${o.value}`}:void 0}),a=r[0]===mi?"2":"";(i[0]||i[1])&&(t=new Ld(t,n.projectionName(),i,[n.getName(`x${a}`),n.getName(`y${a}`)]))}return t}dependentFields(){return new Set(this.fields.filter(ge))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${ot(this.fields)} ${ot(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Rl extends Ot{clone(){return new Rl(null,qe(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Rl(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,a=r.y;if(ce(i)&&ce(a)){const s=i.impute?i:a.impute?a:void 0;if(void 0===s)return;const o=i.impute?a:a.impute?i:void 0,{method:c,value:l,frame:u,keyvals:f}=s.impute,d=Y6e(n.mark,r);return new Rl(t,{impute:s.field,key:o.field,...c?{method:c}:{},...void 0!==l?{value:l}:{},...u?{frame:u}:{},...void 0!==f?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${ot(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:a,value:s,frame:o=[null,null]}=this.transform,c={type:"impute",field:t,key:n,...r?{keyvals:yCt(r)?this.processSequence(r):r}:{},method:"value",...a?{groupby:a}:{},value:i&&"value"!==i?null:s};return i&&"value"!==i?[c,{type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:o,ignorePeers:!1,...a?{groupby:a}:{}},{type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t}]:[c]}}class ZC extends Ot{clone(){return new ZC(null,qe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qe(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${ot(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class Ad extends Ot{clone(){return new Ad(null,qe(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const a=n.component.data.sources,{from:s}=r;let o=null;if(function CCt(e){return"data"in e}(s)){let c=w8e(s.data,a);c||(c=new Tl(s.data),a.push(c));const l=n.getName(`lookup_${i}`);o=new S2(c,l,sn.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=o}else if(function bCt(e){return"param"in e}(s)){const c=s.param;let l;r={as:c,...r};try{l=n.getSelectionComponent(dn(c),c)}catch{throw new Error(function ngt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}(c))}if(o=l.materialized,!o)throw new Error(function rgt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}(c))}return new Ad(t,r,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?me(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${ot({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:me(this.transform.as)}:{}};else{let n=this.transform.as;ge(n)||(oe('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class KC extends Ot{clone(){return new KC(null,qe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qe(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${ot(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class JC extends Ot{clone(){return new JC(null,qe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qe(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${ot(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class eb extends Ot{clone(){return new eb(null,qe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=vs((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${ot(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:a}=this.transform;return{type:"pivot",field:t,value:n,...void 0!==i?{limit:i}:{},...void 0!==a?{op:a}:{},...void 0!==r?{groupby:r}:{}}}}class tb extends Ot{clone(){return new tb(null,qe(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${ot(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function b8e(e){let t=0;return function n(r,i){if(r instanceof Tl&&!r.isGenerator&&!Bu(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Z1&&(r.parent instanceof Tl&&!i.source?(i.format={...i.format??{},parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof Qu)return i.name||(i.name="data_"+t++),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,void e.push(...r.assemble());switch((r instanceof Sd||r instanceof Ed||r instanceof Dd||r instanceof Gu||r instanceof Wu||r instanceof Ld||r instanceof ga||r instanceof Ad||r instanceof Zu||r instanceof Fl||r instanceof QC||r instanceof XC||r instanceof WC||r instanceof ZC||r instanceof KC||r instanceof JC||r instanceof L3||r instanceof tb||r instanceof eb||r instanceof YC)&&i.transform.push(r.assemble()),(r instanceof Ls||r instanceof Ds||r instanceof Rl||r instanceof $o||r instanceof Ju)&&i.transform.push(...r.assemble()),r instanceof S2&&(i.source&&0===i.transform.length?r.setSource(i.source):r.parent instanceof S2?r.setSource(i.name):(i.name||(i.name="data_"+t++),r.setSource(i.name),1===r.numChildren()&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof S2&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name="data_"+t++);let a=i.name;!i.source||i.transform.length>0?e.push(i):a=i.source;for(const s of r.children)n(s,{name:null,source:a,transform:[]});break}}}}function k_t(e){return"top"===e||"left"===e||Ve(e)?"header":"footer"}function I_t(e,t){const{facet:n,config:r,child:i,component:a}=e;if(e.channelHasField(t)){const s=n[t],o=Xu("title",null,r,t);let c=Ru(s,r,{allowDisabling:!0,includeDefault:void 0===o||!!o});i.component.layoutHeaders[t].title&&(c=K(c)?c.join(", "):c,c+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const l=Xu("labelOrient",s.header,r,t),u=null!==s.header&&Nn(s.header?.labels,r.header.labels,!0),f=ct(["bottom","right"],l)?"footer":"header";a.layoutHeaders[t]={title:null!==s.header?c:null,facetFieldDef:s,[f]:"facet"===t?[]:[M8e(e,t,u)]}}}function M8e(e,t,n){const r="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function _8e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=mT(i,t),"shared"===i.axis[t]){const a="x"===t?"column":"row",s=r[a];for(const o of n.component.axes[t]){const c=k_t(o.get("orient"));s[c]??(s[c]=[M8e(e,a,!1)]);const l=Hd(o,"main",e.config,{header:!0});l&&s[c][0].axes.push(l),o.mainExtracted=!0}}}}function LT(e){for(const t of e.children)t.parseLayoutSize()}function nb(e,t){const n=Nfe(t),r=tC(n),i=e.component.resolve,a=e.component.layoutSize;let s;for(const o of e.children){const c=o.component.layoutSize.getWithExplicit(n),l=i.scale[r]??Tfe(r,e);if("independent"===l&&"step"===c.value){s=void 0;break}if(s){if("independent"===l&&s.value!==c.value){s=void 0;break}s=S3(s,c,n,"")}else s=c}if(s){for(const o of e.children)e.renameSignal(o.getName(n),e.getName(t)),o.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,s)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function P_t(e,t){const r=e.config,i=e.getScaleComponent("width"===t?"x":"y");if(i){const a=i.get("type"),s=i.get("range");if(c1(a)){const o=LC(r.view,t);return _3(s)||Es(o)?"step":o}return jk(r.view,t)}if(e.hasProjection||"arc"===e.mark)return jk(r.view,t);{const a=LC(r.view,t);return Es(a)?a.step:a}}function AT(e,t,n){return fe(t,{suffix:`by_${fe(e)}`,...n??{}})}class Nd extends C8e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=FT(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Cd(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=te(t),r={};for(const i of n){if(![So,Eo].includes(i)){oe(aC(i,"facet"));break}const a=t[i];if(void 0===a.field){oe(tk(a,i));break}r[i]=this.initFacetFieldDef(a,i)}return r}initFacetFieldDef(t,n){const r=Vk(t,n);return r.header?r.header=ir(r.header):null===r.header&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=rb(this),this.child.parseData()}parseLayoutSize(){LT(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function T_t(e){for(const t of gi)I_t(e,t);_8e(e,"x"),_8e(e,"y")}(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of gi)for(const r of dT){const i=this.component.layoutHeaders[n],a=i[r],{facetFieldDef:s}=i;if(s){const o=Xu("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(o)){const c=BC(n,o);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[c]="end"}}if(a?.[0]){const c="header"===r?"headerBand":"footerBand";"facet"!==n&&!this.child.component.layoutSize.get("row"===n?"height":"width")&&(t[c]??(t[c]={}),t[c][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset["row"===n?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&"independent"===this.component.resolve.scale.x||!t&&"independent"===this.component.resolve.scale.y)&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Nd))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Nd?{...this.channelHasField("column")?{encode:{update:{columns:{field:fe(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Nd){if(this.child.channelHasField("column")){const i=fe(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of _s){const a=this.child.component.scales[i];if(a&&!a.merged){const s=a.get("type"),o=a.get("range");if(c1(s)&&_3(o)){const l=ST(GC(this.child,i));l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):oe(ek(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:a,ops:s,as:o}=this.getCardinalityAggregateForChild(),c=[];for(const u of gi){const f=this.facet[u];if(f){c.push(fe(f));const{bin:d,sort:h}=f;if(Zt(d)&&c.push(fe(f,{binSuffix:"end"})),zs(h)){const{field:p,op:m=mC}=h,g=AT(f,h);r&&i?(a.push(g),s.push("max"),o.push(g)):(a.push(p),s.push(m),o.push(g))}else if(K(h)){const p=Yu(f,u);a.push(p),s.push("max"),o.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:c,...l||a.length>0?{aggregate:{...l?{cross:l}:{},...a.length?{fields:a,ops:s,as:o}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?zs(r.sort)?[AT(r,r.sort,{expr:"datum"})]:K(r.sort)?[Yu(r,t,{expr:"datum"})]:[fe(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(zs(i)?i.order:!K(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return hT(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const i of fT)if(t[i]){const a=Xu("labelOrient",t[i]?.header,n,i);if(r[i].includes(a))return hT(t[i],i,n)}}assembleMarks(){const{child:t}=this,r=function A_t(e){const t=[],n=b8e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}(this.component.data.facetRoot),i=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...a?{title:a}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:gi.map(c=>this.facetSortFields(c)).flat(),order:gi.map(c=>this.facetSortOrder(c)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(QCt(this,[]))}]}getMapping(){return this.facet}}function w8e(e,t){for(const n of t){const r=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const i=e.format?.mesh,a=r.format?.feature;if(i&&a)continue;const s=e.format?.feature;if((s||a)&&s!==a)continue;const o=r.format?.mesh;if(!i&&!o||i===o)if(wd(e)&&wd(r)){if(Or(e.values,r.values))return n}else if(Bu(e)&&Bu(r)){if(e.url===r.url)return n}else if(Rue(e)&&e.name===n.dataName)return n}return null}function rb(e){let t=function B_t(e,t){if(e.data||!e.parent){if(null===e.data){const r=new Tl({values:[]});return t.push(r),r}const n=w8e(e.data,t);if(n)return E3(e.data)||(n.data.format=Yle({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Tl(e.data);return t.push(r),r}}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=i&&(E3(i)||Bu(i)||wd(i))||!e.parent?new YCt:e.parent.component.data.ancestorParse.clone();E3(i)?(Oue(i)?t=new Ed(t,i.sequence):Kk(i)&&(t=new Sd(t,i.graticule)),s.parseNothing=!0):null===i?.format?.parse&&(s.parseNothing=!0),t=Z1.makeExplicit(t,e,s)??t,t=new L3(t);const o=e.parent&&Ku(e.parent);(Hn(e)||ya(e))&&o&&(t=Ls.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=function U_t(e,t,n){let r=0;for(const i of t.transforms){let a,s;if(DCt(i))s=e=new Wu(e,i),a="derived";else if(Xk(i)){const o=kMt(i);s=e=Z1.makeWithAncestors(e,{},o,n)??e,e=new Gu(e,t,i.filter)}else if(Due(i))s=e=Ls.makeFromTransform(e,i,t),a="number";else if(ACt(i))a="date",void 0===n.getWithExplicit(i.field).value&&(e=new Z1(e,{[i.field]:a}),n.set(i.field,a,!1)),s=e=Ds.makeFromTransform(e,i);else if(NCt(i))s=e=ga.makeFromTransform(e,i),a="number",sT(t)&&(e=new L3(e));else if(Vue(i))s=e=Ad.make(e,t,i,r++),a="derived";else if(SCt(i))s=e=new Zu(e,i),a="number";else if(ECt(i))s=e=new Fl(e,i),a="number";else if(kCt(i))s=e=$o.makeFromTransform(e,i),a="derived";else if(TCt(i))s=e=new QC(e,i),a="derived";else if(ICt(i))s=e=new YC(e,i),a="derived";else if(VCt(i))s=e=new XC(e,i),a="derived";else if(MCt(i))s=e=new eb(e,i),a="derived";else if(HCt(i))e=new tb(e,i);else if(LCt(i))s=e=Rl.makeFromTransform(e,i),a="derived";else if(_Ct(i))s=e=new WC(e,i),a="derived";else if(wCt(i))s=e=new KC(e,i),a="derived";else if(xCt(i))s=e=new JC(e,i),a="derived";else{if(!zCt(i)){oe(ugt(i));continue}s=e=new ZC(e,i),a="derived"}if(s&&void 0!==a)for(const o of s.producedFields()??[])n.set(o,a,!1)}return e}(t,e,s));const c=function IMt(e){const t={};if(Hn(e)&&e.component.selection)for(const n of te(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Vu(i.field)>1&&(t[i.field]="flatten")}return t}(e),l=function TMt(e){const t={};function n(r){Pu(r)?t[r.field]="date":"quantitative"===r.type&&function $mt(e){return ge(e)&&ct(["min","max"],e)}(r.aggregate)?t[r.field]="number":Vu(r.field)>1?r.field in t||(t[r.field]="flatten"):Dl(r)&&zs(r.sort)&&Vu(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Hn(e)||ya(e))&&e.forEachFieldDef((r,i)=>{if(H2(r))n(r);else{const a=bl(i),s=e.fieldDef(a);n({...r,type:s.type})}}),Hn(e)){const{mark:r,markDef:i,encoding:a}=e;if(x3(r)&&!e.encoding.order){const o=a["horizontal"===i.orient?"y":"x"];ce(o)&&"quantitative"===o.type&&!(o.field in t)&&(t[o.field]="number")}}return t}(e);t=Z1.makeWithAncestors(t,{},{...c,...l},s)??t,Hn(e)&&(t=Ju.parseAll(t,e),t=Ld.parseAll(t,e)),(Hn(e)||ya(e))&&(o||(t=Ls.makeFromEncoding(t,e)??t),t=Ds.makeFromEncoding(t,e)??t,t=Wu.parseAllForSortIndex(t,e));const u=e.getDataName(sn.Raw),f=new S2(t,u,sn.Raw,r);if(n[u]=f,t=f,Hn(e)){const m=ga.makeFromEncoding(t,e);m&&(t=m,sT(e)&&(t=new L3(t))),t=Rl.makeFromEncoding(t,e)??t,t=$o.makeFromEncoding(t,e)??t}Hn(e)&&(t=Dd.make(t,e)??t);const d=e.getDataName(sn.Main),h=new S2(t,d,sn.Main,r);n[d]=h,t=h,Hn(e)&&function Lbt(e,t){for(const[n,r]of h3(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new S2(new Gu(t,e,{param:n}),i,sn.Lookup,e.component.data.outputNodeRefCounts)}}(e,h);let p=null;if(ya(e)){const m=e.getName("facet");t=function $_t(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const a of[n,r])if(zs(a.sort)){const{field:s,op:o=mC}=a.sort;e=i=new Fl(e,{joinaggregate:[{op:o,field:s,as:AT(a,a.sort,{forAs:!0})}],groupby:[fe(a)]})}return i}return null}(t,e.facet)??t,p=new Qu(t,e,m,h.getSource()),n[m]=p}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:h,facetRoot:p,ancestorParse:s}}class j_t extends DT{constructor(t,n,r,i){super(t,"concat",n,r,i,t.resolve),("shared"===t.resolve?.axis?.x||"shared"===t.resolve?.axis?.y)&&oe("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."),this.children=this.getChildren(t).map((a,s)=>FT(a,this,this.getName(`concat_${s}`),void 0,i))}parseData(){this.component.data=rb(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of te(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return VC(t)?t.vconcat:Uk(t)?t.hconcat:t.concat}parseLayoutSize(){!function R_t(e){LT(e);const n=void 0===e.layout.columns?"height":"childHeight";nb(e,1===e.layout.columns?"width":"childWidth"),nb(e,n)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=pT(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...null!=t?{columns:t}:{},bounds:"full",align:"each"}}}const G_t={disable:1,gridScale:1,scale:1,...$6e,labelExpr:1,encode:1},x8e=te(G_t);class NT extends Oo{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new NT(qe(this.explicit),qe(this.implicit),this.mainExtracted)}hasAxisPart(t){return"axis"===t||("grid"===t||"title"===t?!!this.get(t):!function q_t(e){return!1===e||null===e}(this.get(t)))}hasOrientSignalRef(){return Ve(this.explicit.orient)}}const X_t={bottom:"top",top:"bottom",left:"right",right:"left"};function Z_t(e,t){if(!e)return t.map(n=>n.clone());{if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],a=t[r];if(!!i!=!!a)return;if(i&&a){const s=i.getWithExplicit("orient"),o=a.getWithExplicit("orient");if(s.explicit&&o.explicit&&s.value!==o.value)return;e[r]=K_t(i,a)}}}return e}function K_t(e,t){for(const n of x8e){const r=S3(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,a)=>{switch(n){case"title":return S0e(i,a);case"gridScale":return{explicit:i.explicit,value:Nn(i.value,a.value)}}return NC(i,a,n,"axis")});e.setWithExplicit(n,r)}return e}function J_t(e,t,n,r,i){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Ve(n.labelAngle)?n.labelAngle:ud(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Sfe(r,i))return!0}return e===n[t]}const ewt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function twt(e,t){let n=t.axis(e);const r=new NT,i=Jn(t.encoding[e]),{mark:a,config:s}=t,o=n?.orient||s["x"===e?"axisX":"axisY"]?.orient||s.axis?.orient||function $bt(e){return"x"===e?"bottom":"left"}(e),c=t.getScaleComponent(e).get("type"),l=function kbt(e,t,n,r){const i="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:s6e(t)?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[],a="x"===e?"axisX":"axisY",s=Ve(n)?"axisOrient":`axis${ld(n)}`,o=[...i,...i.map(l=>a+l.substr(4))],c=["axis",s,a];return{vlOnlyAxisConfig:wfe(o,r,e,n),vgAxisConfig:wfe(c,r,e,n),axisConfigStyle:Tbt([...c,...o],r)}}(e,c,o,t.config),u=void 0!==n?!n:lT("disable",s.style,n?.style,l).configValue;if(r.set("disable",u,void 0!==n),u)return r;n=n||{};const f=function Rbt(e,t,n,r,i){const a=t?.labelAngle;if(void 0!==a)return Ve(a)?a:ud(a);{const{configValue:s}=lT("labelAngle",r,t?.style,i);return void 0!==s?ud(s):n!==hn||!ct([mk,pk],e.type)||ce(e)&&e.timeUnit?void 0:270}}(i,n,e,s.style,l),d=M6e(n.formatType,i,c),h=b6e(i,i.type,n.format,n.formatType,s,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:c,orient:o,labelAngle:f,format:h,formatType:d,mark:a,config:s};for(const v of x8e){const y=v in xfe?xfe[v](p):U6e(v)?n[v]:void 0,C=void 0!==y,b=J_t(y,v,n,t,e);if(C&&b)r.set(v,y,b);else{const{configValue:M,configFrom:w}=U6e(v)&&"values"!==v?lT(v,s.style,n.style,l):{},_=void 0!==M;C&&!_?r.set(v,y,b):("vgAxisConfig"!==w||ewt.has(v)&&_||_d(M)||Ve(M))&&r.set(v,M,!1)}}const m=n.encoding??{},g=P6e.reduce((v,y)=>{if(!r.hasAxisPart(y))return v;const C=kfe(m[y]??{},t),b="labels"===y?function W_t(e,t,n){const{encoding:r,config:i}=e,a=Jn(r[t])??Jn(r[Ms(t)]),s=e.axis(t)||{},{format:o,formatType:c}=s;if(Vl(c))return{text:ha({fieldOrDatumDef:a,field:"datum.value",format:o,formatType:c,config:i}),...n};if(void 0===o&&void 0===c&&i.customFormatTypes){if("quantitative"===Iu(a)){if(Fu(a)&&"normalize"===a.stack&&i.normalizedNumberFormatType)return{text:ha({fieldOrDatumDef:a,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:ha({fieldOrDatumDef:a,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if("temporal"===Iu(a)&&i.timeFormatType&&ce(a)&&!a.timeUnit)return{text:ha({fieldOrDatumDef:a,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}(t,e,C):C;return void 0!==b&&!$t(b)&&(v[y]={update:b}),v},{});return $t(g)||r.set("encode",g,!!n.encoding||void 0!==n.labelAngle),r}const rwt={vgMark:"arc",encodeEntry:e=>({...vi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Q1("x",e,{defaultPos:"mid"}),...Q1("y",e,{defaultPos:"mid"}),...V3(e,"radius"),...V3(e,"theta")})},iwt={vgMark:"area",encodeEntry:e=>({...vi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...FC("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient}),...FC("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient}),...iT(e)})},awt={vgMark:"rect",encodeEntry:e=>({...vi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...V3(e,"x"),...V3(e,"y")})},swt={vgMark:"shape",encodeEntry:e=>({...vi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&ce(n)&&n.type===ku?{field:fe(n,{expr:"datum"})}:{}}]}},owt={vgMark:"image",encodeEntry:e=>({...vi(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...V3(e,"x"),...V3(e,"y"),...nT(e,"url")})},cwt={vgMark:"line",encodeEntry:e=>({...vi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Q1("x",e,{defaultPos:"mid"}),...Q1("y",e,{defaultPos:"mid"}),...l1("size",e,{vgChannel:"strokeWidth"}),...iT(e)})},lwt={vgMark:"trail",encodeEntry:e=>({...vi(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Q1("x",e,{defaultPos:"mid"}),...Q1("y",e,{defaultPos:"mid"}),...l1("size",e),...iT(e)})};function kT(e,t){const{config:n}=e;return{...vi(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Q1("x",e,{defaultPos:"mid"}),...Q1("y",e,{defaultPos:"mid"}),...l1("size",e),...l1("angle",e),...uwt(e,0,t)}}function uwt(e,t,n){return n?{shape:{value:n}}:l1("shape",e)}const fwt={vgMark:"symbol",encodeEntry:e=>kT(e)},dwt={vgMark:"symbol",encodeEntry:e=>kT(e,"circle")},hwt={vgMark:"symbol",encodeEntry:e=>kT(e,"square")},pwt={vgMark:"rect",encodeEntry:e=>({...vi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...V3(e,"x"),...V3(e,"y")})},mwt={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?{...vi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...FC("x",e,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n}),...FC("y",e,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n}),...l1("size",e,{vgChannel:"strokeWidth"})}:{}}},gwt={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...vi(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Q1("x",e,{defaultPos:"mid"}),...Q1("y",e,{defaultPos:"mid"}),...nT(e),...l1("size",e,{vgChannel:"fontSize"}),...l1("angle",e),...afe("align",vwt(e.markDef,0,t)),...afe("baseline",ywt(e.markDef,0,t)),...Q1("radius",e,{defaultPos:null}),...Q1("theta",e,{defaultPos:null})}}};function vwt(e,t,n){if(void 0===Dt("align",e,n))return"center"}function ywt(e,t,n){if(void 0===Dt("baseline",e,n))return"middle"}const Cwt={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i="horizontal"===r?"width":"height",a="horizontal"===r?"height":"width";return{...vi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Q1("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Q1("y",e,{defaultPos:"mid",vgChannel:"yc"}),...l1("size",e,{defaultValue:bwt(e),vgChannel:i}),[a]:an(Dt("thickness",n,t))}}};function bwt(e){const{config:t,markDef:n}=e,{orient:r}=n,i="horizontal"===r?"width":"height",a=e.getScaleComponent("horizontal"===r?"x":"y"),s=Dt("size",n,t,{vgChannel:i})??t.tick.bandSize;if(void 0!==s)return s;{const o=a?a.get("range"):void 0;return o&&_3(o)&&mt(o.step)?3*o.step/4:3*DC(t.view,i)/4}}const ib={arc:rwt,area:iwt,bar:awt,circle:dwt,geoshape:swt,image:owt,line:cwt,point:fwt,rect:pwt,rule:mwt,square:hwt,text:gwt,tick:Cwt,trail:lwt};const z8e="faceted_path_",H8e="stack_group_";function TT(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:a}=e,s=Nn(r.clip,function zwt(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!(!t?.get("selectionExtent")&&!n?.get("selectionExtent"))||void 0}(e),function Hwt(e){const t=e.component.projection;return!(!t||t.isFit)||void 0}(e)),o=_0e(r),c=i.key,l=function xwt(e){const{encoding:t,stack:n,mark:r,markDef:i,config:a}=e,s=t.order;if(!(!K(s)&&pa(s)&&TN(s.value)||!s&&TN(Dt("order",i,a)))){if((K(s)||ce(s))&&!n)return x0e(s,{expr:"datum"});if(x3(r)){const o="horizontal"===i.orient?"y":"x",c=t[o];if(ce(c)){const l=c.sort;return K(l)?{field:fe(c,{prefix:o,suffix:"sort_index",expr:"datum"})}:zs(l)?{field:fe({aggregate:Dk(e.encoding)?l.op:void 0,field:l.field},{expr:"datum"})}:z6e(l)?{field:fe(e.fieldDef(l.encoding),{expr:"datum"}),order:l.order}:null===l?void 0:{field:fe(c,{binSuffix:e.stack?.impute?"mid":void 0,expr:"datum"})}}return}}}(e),u=function Swt(e){if(!e.component.selection)return null;const t=te(e.component.selection).length;let n=t,r=e.parent;for(;r&&0===n;)n=te(r.component.selection).length,r=r.parent;return n?{interactive:t>0||"geoshape"===e.mark||!!e.encoding.tooltip}:null}(e),f=Dt("aria",r,a),d=ib[n].postEncodingTransform?ib[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:ib[n].vgMark,...s?{clip:!0}:{},...o?{style:o}:{},...c?{key:c.field}:{},...l?{sort:l}:{},...u||{},...!1===f?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(sn.Main)},encode:{update:ib[n].encodeEntry(e)},...d?{transform:d}:{}}]}class S8e extends C8e{constructor(t,n,r,i={},a){super(t,"unit",n,r,a,void 0,due(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const s=da(t.mark)?{...t.mark}:{type:t.mark},o=s.type;void 0===s.filled&&(s.filled=function uCt(e,t,{graticule:n}){if(n)return!1;const r=Io("filled",e,t),i=e.type;return Nn(r,i!==dC&&i!==fC&&i!==hC)}(s,a,{graticule:t.data&&Kk(t.data)}));const c=this.encoding=function vyt(e,t,n,r){const i={};for(const a of te(e))l0e(a)||oe(bgt(a));for(let a of Vmt){if(!e[a])continue;const s=e[a];if(hd(a)){const o=Emt(a),c=i[o];if(ce(c)&&bvt(c.type)&&ce(s)&&!c.timeUnit){oe(pgt(o));continue}}if("angle"===a&&"arc"===t&&!e.theta&&(oe("Arc marks uses theta channel rather than angle, replacing angle with theta."),a=pi),gyt(e,a,t))if(a===Lo&&"line"===t&&Ss(e[a])?.aggregate)oe("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.");else if(a===tr&&(n?"fill"in e:"stroke"in e))oe(F0e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));else if(a===dd||a===Lu&&!K(s)&&!pa(s)||a===Cl&&K(s)){if(s){if(a===Lu){const o=e[a];if(D6e(o)){i[a]=o;continue}}i[a]=me(s).reduce((o,c)=>(ce(c)?o.push(Vk(c,a)):oe(tk(c,a)),o),[])}}else{if(a===Cl&&null===s)i[a]=null;else if(!(ce(s)||Hs(s)||pa(s)||vC(s)||Ve(s))){oe(tk(s,a));continue}i[a]=F6e(s,a,r)}else oe(aC(a,t))}return i}(t.encoding||{},o,s.filled,a);this.markDef=Mue(s,c,a),this.size=function nwt({encoding:e,size:t}){for(const n of _s){const r=rr(n);Es(t[r])&&H3(e[n])&&(delete t[r],oe(O0e(r)))}return t}({encoding:c,size:due(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=bue(this.markDef,c),this.specifiedScales=this.initScales(o,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegends(c),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>$k(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===h6e,r=t&&xmt.some(i=>Ye(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return nC.reduce((r,i)=>{const a=Jn(n[i]);return a&&(r[i]=this.initScale(a.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=ir(t);return K(n)&&(i.domain=n.map(Pr)),K(r)&&(i.range=r.map(Pr)),i}initAxes(t){return _s.reduce((n,r)=>{const i=t[r];if(Ye(i)||r===hn&&Ye(t.x2)||r===s1&&Ye(t.y2)){const a=Ye(i)?i.axis:void 0;n[r]=a&&this.initAxis({...a})}return n},{})}initAxis(t){const n=te(t),r={};for(const i of n){const a=t[i];r[i]=_d(a)?C0e(a):Pr(a)}return r}initLegends(t){return Amt.reduce((n,r)=>{const i=Jn(t[r]);if(i&&function kmt(e){switch(e){case tr:case Cs:case bs:case Lo:case nr:case Ao:case v3:case y3:return!0;case m3:case g3:case yl:return!1}}(r)){const a=i.legend;n[r]=a&&ir(a)}return n},{})}parseData(){this.component.data=rb(this)}parseLayoutSize(){!function O_t(e){const{size:t,component:n}=e;for(const r of _s){const i=rr(r);if(t[i]){const a=t[i];n.layoutSize.set(i,Es(a)?"step":a,!0)}else{const a=P_t(e,i);n.layoutSize.set(i,a,!1)}}}(this)}parseSelections(){this.component.selection=function Dbt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const a=dn(i.name),s=i.select,o=ge(s)?s:s.type,c=ve(s)?qe(s):{type:o},l=r[o];for(const d in l)"fields"===d||"encodings"===d||("mark"===d&&(c[d]={...l[d],...c[d]}),(void 0===c[d]||!0===c[d])&&(c[d]=qe(l[d]??c[d])));const u=n[a]={...c,name:a,type:o,init:i.value,bind:i.bind,events:ge(c.on)?f3(c.on,"scope"):me(qe(c.on))},f=qe(i);for(const d of PC)d.defined(u)&&d.parse&&d.parse(e,u,f)}return n}(this,this.selection)}parseMarkGroup(){this.component.mark=function Mwt(e){if(ct([fC,lC,Ivt],e.mark)){const t=Y6e(e.mark,e.encoding);if(t.length>0)return function _wt(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:z8e+e.requestDataName(sn.Main),data:e.requestDataName(sn.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:TT(e,{fromPrefix:z8e})}]}(e,t)}else if(e.mark===uC){const t=KN.some(n=>Dt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return function wwt(e){const[t]=TT(e,{fromPrefix:H8e}),n=e.scaleName(e.stack.fieldChannel),r=(l={})=>e.vgField(e.stack.fieldChannel,l),i=(l,u)=>`${l}(${[r({prefix:"min",suffix:"start",expr:u}),r({prefix:"max",suffix:"start",expr:u}),r({prefix:"min",suffix:"end",expr:u}),r({prefix:"max",suffix:"end",expr:u})].map(d=>`scale('${n}',${d})`).join(",")})`;let a,s;"x"===e.stack.fieldChannel?(a={...Eu(t.encode.update,["y","yc","y2","height",...KN]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...er(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...Eu(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...er(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const l of KN){const u=Io(l,e.markDef,e.config);t.encode.update[l]?(a[l]=t.encode.update[l],delete t.encode.update[l]):u&&(a[l]=an(u)),u&&(t.encode.update[l]={value:0})}const o=[];if(e.stack.groupbyChannels?.length>0)for(const l of e.stack.groupbyChannels){const u=e.fieldDef(l),f=fe(u);f&&o.push(f),(u?.bin||u?.timeUnit)&&o.push(fe(u,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((l,u)=>{if(t.encode.update[u])return{...l,[u]:t.encode.update[u]};{const f=Io(u,e.markDef,e.config);return void 0!==f?{...l,[u]:an(f)}:l}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(sn.Main),name:H8e+e.requestDataName(sn.Main),groupby:o,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}(e)}return TT(e)}(this)}parseAxesAndHeaders(){this.component.axes=function Y_t(e){return _s.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[twt(n,e)]),t),{})}(this)}assembleSelectionTopLevelSignals(t){return function ZCt(e,t){let n=!1;for(const r of D1(e.component.selection??{})){const i=r.name,a=ue(i+Nl);if(0===t.filter(o=>o.name===i).length){const c="point"===r.type?", true, true)":")";t.push({name:r.name,update:`${gfe}(${a}, ${ue("global"===r.resolve?"union":r.resolve)}${c}`})}n=!0;for(const o of PC)o.defined(r)&&o.topLevelSignals&&(t=o.topLevelSignals(e,r,t))}return n&&0===t.filter(i=>"unit"===i.name).length&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Jk(t)}(this,t)}assembleSignals(){return[..._fe(this),...XCt(this,[])]}assembleSelectionData(t){return function KCt(e,t){const n=[...t],r=kl(e,{escape:!1});for(const i of D1(e.component.selection??{})){const a={name:i.name+Nl};if(i.project.hasSelectionId&&(a.transform=[{type:"collect",sort:{field:ma}}]),i.init){const o=i.project.items.map($ue);a.values=i.init.map(i.project.hasSelectionId?c=>({unit:r,[ma]:Al(c,!1)[0]}):c=>({unit:r,fields:o,values:Al(c,!1)}))}n.filter(o=>o.name===i.name+Nl).length||n.push(a)}return n}(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return pT(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Ku(this.parent))&&(t=Bue(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return void 0!==t?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Ll(this.encoding,t)}fieldDef(t){return Ss(this.encoding[t])}typedFieldDef(t){const n=this.fieldDef(t);return H2(n)?n:null}}class IT extends DT{constructor(t,n,r,i,a){super(t,"layer",n,r,a,t.resolve,t.view);const s={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((o,c)=>{if(AC(o))return new IT(o,this,this.getName(`layer_${c}`),s,a);if(Fo(o))return new S8e(o,this,this.getName(`layer_${c}`),s,a);throw new Error(JN(o))})}parseData(){this.component.data=rb(this);for(const t of this.children)t.parseData()}parseLayoutSize(){!function F_t(e){LT(e),nb(e,"width"),nb(e,"height")}(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of te(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){!function Q_t(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const a of te(i.component.axes))n.axis[a]=mT(e.component.resolve,a),"shared"===n.axis[a]&&(t[a]=Z_t(t[a],i.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const i of _s){for(const a of e.children)if(a.component.axes[i]){if("independent"===n.axis[i]){t[i]=(t[i]??[]).concat(a.component.axes[i]);for(const s of a.component.axes[i]){const{value:o,explicit:c}=s.getWithExplicit("orient");if(!Ve(o)){if(r[o]>0&&!c){const l=X_t[o];r[o]>r[l]&&s.set("orient",l,!1)}r[o]++}}}delete a.component.axes[i]}if("independent"===n.axis[i]&&t[i]&&t[i].length>1)for(const[a,s]of(t[i]||[]).entries())a>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),_fe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),pT(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of me(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:1===n.length?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return function JCt(e,t){for(const n of e.children)Hn(n)&&(t=Bue(n,t));return t}(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),qfe(this))}}function FT(e,t,n,r,i){if(gC(e))return new Nd(e,t,n,i);if(AC(e))return new IT(e,t,n,r,i);if(Fo(e))return new S8e(e,t,n,r,i);if(function Oyt(e){return VC(e)||Uk(e)||Bk(e)}(e))return new j_t(e,t,n,i);throw new Error(JN(e))}function Ewt(e,t={}){t.logger&&function Jgt(e){ws=e}(t.logger),t.fieldTitle&&I6e(t.fieldTitle);try{const n=yue(g6(t.config,e.config)),r=kue(e,n),i=FT(r,null,"",void 0,n);return i.parse(),function KMt(e,t){wT(e.sources);let n=0,r=0;for(let i=0;i<qC&&e8e(e,t,!0);i++)n++;e.sources.map(MT);for(let i=0;i<qC&&e8e(e,t,!1);i++)r++;wT(e.sources),Math.max(n,r)===qC&&oe(`Maximum optimization runs(${qC}) reached.`)}(i.component.data,i),{spec:Dwt(i,Vwt(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&function j0e(){return ws=U0e,ws}(),t.fieldTitle&&function uyt(){I6e(k6e)}()}}function Vwt(e,t,n,r){const i=r.component.layoutSize.get("width"),a=r.component.layoutSize.get("height");if(void 0===t?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):ge(t)&&(t={type:t}),i&&a&&function qCt(e){return"fit"===e||"fit-x"===e||"fit-y"===e}(t.type))if("step"===i&&"step"===a)oe(D0e()),t.type="pad";else if("step"===i||"step"===a){const s="step"===i?"width":"height";oe(D0e(tC(s))),t.type=function GCt(e){return e?`fit-${tC(e)}`:"fit"}("width"===s?"height":"width")}return{...1===te(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t},...Iue(n,!1),...Iue(e,!0)}}function Dwt(e,t,n={},r){const i=e.config?function Kyt(e){e=qe(e);for(const t of Qyt)delete e[t];if(e.axis)for(const t in e.axis)_d(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of kyt)delete e.legend[t];if(e.mark){for(const t of m6e)delete e.mark[t];e.mark.tooltip&&ve(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(uue(e.params)),delete e.params);for(const t of Xyt){for(const r of m6e)delete e[t][r];const n=Zyt[t];if(n)for(const r of n)delete e[t][r];eCt(e,t)}for(const t of function Nyt(){return te(Fk)}())delete e[t];!function Jyt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=y0e(e.title);$t(t)||(e.style["group-title"]={...e.style["group-title"],...t}),$t(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),$t(r)?delete e.title:e.title=r}(e);for(const t in e)ve(e[t])&&$t(e[t])&&delete e[t];return $t(e)?void 0:e}(e.config):void 0,a=[].concat(e.assembleSelectionData([]),function N_t(e,t){const n=[],r=b8e(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName="source_"+i++);const o=s.assemble();r(s,o)}for(const s of n)0===s.transform.length&&delete s.transform;let a=0;for(const[s,o]of n.entries())0===(o.transform??[]).length&&!o.source&&n.splice(a++,0,n.splice(s,1)[0]);for(const s of n)for(const o of s.transform??[])"lookup"===o.type&&(o.from=e.outputNodes[o.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}(e.component.data,n)),s=e.assembleProjections(),o=e.assembleTitle(),c=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let u=e.assembleLayoutSignals();u=u.filter(h=>"width"!==h.name&&"height"!==h.name||void 0===h.value||(t[h.name]=+h.value,!1));const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...o?{title:o}:{},...c?{style:c}:{},...l?{encode:{update:l}}:{},data:a,...s.length>0?{projections:s}:{},...e.assembleGroup([...u,...e.assembleSelectionTopLevelSignals([]),...uue(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Lwt="5.16.3",E8e=function Awt(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}};const ef="#fff",Kwt={background:"#333",view:{stroke:"#888"},title:{color:ef,subtitleColor:ef},style:{"guide-label":{fill:ef},"guide-title":{fill:ef}},axis:{domainColor:ef,gridColor:"#888",tickColor:ef}},Ol="#4572a7",Jwt={background:"#fff",arc:{fill:Ol},area:{fill:Ol},line:{stroke:Ol,strokeWidth:2},path:{stroke:Ol},rect:{fill:Ol},shape:{stroke:Ol},symbol:{fill:Ol,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Pl="#30a2da",RT="#cbcbcb",nxt={arc:{fill:Pl},area:{fill:Pl},axis:{domainColor:RT,grid:!0,gridColor:RT,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:RT,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:Pl,strokeWidth:2},path:{stroke:Pl,strokeWidth:.5},rect:{fill:Pl},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Pl},bar:{binSpacing:2,fill:Pl,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},$l="#000",rxt={group:{fill:"#e5e5e5"},arc:{fill:$l},area:{fill:$l},line:{stroke:$l},path:{stroke:$l},rect:{fill:$l},shape:{stroke:$l},symbol:{fill:$l,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},A8e="Benton Gothic, sans-serif",Bl="#82c6df",OT="Benton Gothic Bold, sans-serif",kd={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},oxt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:OT,fontSize:22,fontWeight:"normal"},arc:{fill:Bl},area:{fill:Bl},line:{stroke:Bl,strokeWidth:2},path:{stroke:Bl},rect:{fill:Bl},shape:{stroke:Bl},symbol:{fill:Bl,size:30},axis:{labelFont:A8e,labelFontSize:11.5,labelFontWeight:"normal",titleFont:OT,titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:A8e,labelFontSize:11.5,symbolType:"square",titleFont:OT,titleFontSize:13,titleFontWeight:"normal"},range:{category:kd["category-6"],diverging:kd["fireandice-6"],heatmap:kd["fire-7"],ordinal:kd["fire-7"],ramp:kd["fire-7"]}},Ul="#ab5787",ab="#979797",cxt={background:"#f9f9f9",arc:{fill:Ul},area:{fill:Ul},line:{stroke:Ul},path:{stroke:Ul},rect:{fill:Ul},shape:{stroke:Ul},symbol:{fill:Ul,size:30},axis:{domainColor:ab,domainWidth:.5,gridWidth:.2,labelColor:ab,tickColor:ab,tickWidth:.2,titleColor:ab},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},jl="#3e5c69",lxt={background:"#fff",arc:{fill:jl},area:{fill:jl},line:{stroke:jl},path:{stroke:jl},rect:{fill:jl},shape:{stroke:jl},symbol:{fill:jl},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},yi="#1696d2",sb="Lato",PT="Lato",Td={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},pxt={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:sb},axisX:{domain:!0,domainColor:"#000000",domainWidth:1,grid:!1,labelFontSize:12,labelFont:PT,labelAngle:0,tickColor:"#000000",tickSize:5,titleFontSize:12,titlePadding:10,titleFont:sb},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:PT,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:sb,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:PT,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:sb,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Td["six-groups-cat-1"],diverging:Td["diverging-colors"],heatmap:Td["diverging-colors"],ordinal:Td["six-groups-seq"],ramp:Td["shades-blue"]},area:{fill:yi},rect:{fill:yi},line:{color:yi,stroke:yi,strokeWidth:5},trail:{color:yi,stroke:yi,strokeWidth:0,size:1},path:{stroke:yi,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:yi,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:yi,stroke:null}},arc:{fill:yi},shape:{stroke:yi},symbol:{fill:yi,size:30}},ql="#3366CC",ob="Arial, sans-serif",mxt={arc:{fill:ql},area:{fill:ql},path:{stroke:ql},rect:{fill:ql},shape:{stroke:ql},symbol:{stroke:ql},circle:{fill:ql},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:ob,fontSize:12},"guide-title":{font:ob,fontSize:12},"group-title":{font:ob,fontSize:12}},title:{font:ob,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:"#ccc",tickColor:"#ccc",domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},$T=e=>e*(1/3+1),R8e=$T(9),O8e=$T(10),P8e=$T(12),Id="Segoe UI",$8e="wf_standard-font, helvetica, arial, sans-serif",Fd="#605E5C",U8e="transparent",Ca="#118DFF",G8e=["#DEEFFF",Ca],xxt={view:{stroke:U8e},background:U8e,font:Id,header:{titleFont:$8e,titleFontSize:P8e,titleColor:"#252423",labelFont:Id,labelFontSize:O8e,labelColor:Fd},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Fd,labelFontSize:R8e,titleFont:$8e,titleColor:"#252423",titleFontSize:P8e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:"#C8C6C4",gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Ca},line:{stroke:Ca,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Id,fontSize:R8e,fill:Fd},arc:{fill:Ca},area:{fill:Ca,line:!0,opacity:.6},path:{stroke:Ca},rect:{fill:Ca},point:{fill:Ca,filled:!0,size:75},shape:{stroke:Ca},symbol:{fill:Ca,strokeWidth:1.5,size:50},legend:{titleFont:Id,titleFontWeight:"bold",titleColor:Fd,labelFont:Id,labelFontSize:O8e,labelColor:Fd,symbolType:"circle",symbolSize:75},range:{category:[Ca,"#12239E","#E66C37","#6B007B","#E044A7","#744EC2","#D9B300","#D64550"],diverging:G8e,heatmap:G8e,ordinal:["#DEEFFF","#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Ca]}},BT='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',zxt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Hxt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function cb({type:e,background:t}){const n="dark"===e?"#161616":"#ffffff",r="dark"===e?"#f4f4f4":"#161616",a="dark"===e?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:BT,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:BT,fill:r,fontWeight:400},"guide-title":{font:BT,fill:r,fontWeight:400}},range:{category:"dark"===e?zxt:Hxt,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Sxt=cb({type:"light",background:"#ffffff"}),Ext=cb({type:"light",background:"#f4f4f4"}),Vxt=cb({type:"dark",background:"#262626"}),Dxt=cb({type:"dark",background:"#161616"}),Lxt="2.14.0";function Y8e(e,t){return JSON.stringify(e,function Jxt(e){const t=[];return function(n,r){if("object"!=typeof r||null===r)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}(t))}const X8e="vg-tooltip-element",tzt={offsetX:10,offsetY:10,id:X8e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function nzt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2,formatTooltip:function Kxt(e,t,n,r){if(K(e))return`[${e.map(i=>t(ge(i)?i:Y8e(i,n))).join(", ")}]`;if(ve(e)){let i="";const{title:a,image:s,...o}=e;a&&(i+=`<h2>${t(a)}</h2>`),s&&(i+=`<img src="${new URL(t(s),r||location.href).href}">`);const c=Object.keys(o);if(c.length>0){i+="<table>";for(const l of c){let u=o[l];void 0!==u&&(ve(u)&&(u=Y8e(u,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(u)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)},baseURL:""};class Q8e{constructor(t){this.options={...tzt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=function rzt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.visible {\n  visibility: visible;\n}\n#vg-tooltip-element h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#vg-tooltip-element table {\n  border-spacing: 0;\n}\n#vg-tooltip-element table tr {\n  border: none;\n}\n#vg-tooltip-element table tr td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#vg-tooltip-element table tr td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#vg-tooltip-element table tr td.value {\n  display: block;\n  max-width: 300px;\n  max-height: 7em;\n  text-align: left;\n}\n#vg-tooltip-element.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#vg-tooltip-element.dark-theme td.key {\n  color: #bfbfbf;\n}\n".toString().replace(X8e,e)}(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),null==i||""===i)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:s}=function izt(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let a=e.clientY+r;return a+t.height>window.innerHeight&&(a=+e.clientY-r-t.height),{x:i,y:a}}(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${s}px`,this.el.style.left=`${a}px`}}function azt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var UT,Z8e,ozt=bt;function bt(e){var t=this;if(t instanceof bt||(t=new bt),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}function czt(e,t,n){var r=t===e.head?new Gl(n,null,t,e):new Gl(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function lzt(e,t){e.tail=new Gl(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function uzt(e,t){e.head=new Gl(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Gl(e,t,n,r){if(!(this instanceof Gl))return new Gl(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}bt.Node=Gl,bt.create=bt,bt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},bt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},bt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},bt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)lzt(this,arguments[e]);return this.length},bt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)uzt(this,arguments[e]);return this.length},bt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},bt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},bt.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},bt.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},bt.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},bt.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},bt.prototype.map=function(e,t){t=t||this;for(var n=new bt,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},bt.prototype.mapReverse=function(e,t){t=t||this;for(var n=new bt,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},bt.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},bt.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},bt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},bt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},bt.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new bt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;for(;null!==i&&r<t;r++,i=i.next)n.push(i.value);return n},bt.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new bt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;null!==i&&r>t;r--)i=i.prev;for(;null!==i&&r>e;r--,i=i.prev)n.push(i.value);return n},bt.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;var a=[];for(r=0;i&&r<t;r++)a.push(i.value),i=this.removeNode(i);for(null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev),r=0;r<n.length;r++)i=czt(this,i,n[r]);return a},bt.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{!function szt(){return Z8e||(Z8e=1,UT=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),UT}()(bt)}catch{}const fzt=ozt,Wl=Symbol("max"),Bo=Symbol("length"),tf=Symbol("lengthCalculator"),Rd=Symbol("allowStale"),Yl=Symbol("maxAge"),Uo=Symbol("dispose"),K8e=Symbol("noDisposeOnSet"),f1=Symbol("lruList"),ba=Symbol("cache"),J8e=Symbol("updateAgeOnGet"),jT=()=>1,qT=(e,t,n)=>{const r=e[ba].get(t);if(r){const i=r.value;if(lb(e,i)){if(nf(e,r),!e[Rd])return}else n&&(e[J8e]&&(r.value.now=Date.now()),e[f1].unshiftNode(r));return i.value}},lb=(e,t)=>{if(!t||!t.maxAge&&!e[Yl])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Yl]&&n>e[Yl]},Od=e=>{if(e[Bo]>e[Wl])for(let t=e[f1].tail;e[Bo]>e[Wl]&&null!==t;){const n=t.prev;nf(e,t),t=n}},nf=(e,t)=>{if(t){const n=t.value;e[Uo]&&e[Uo](n.key,n.value),e[Bo]-=n.length,e[ba].delete(n.key),e[f1].removeNode(t)}};class hzt{constructor(t,n,r,i,a){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=a||0}}const e5e=(e,t,n,r)=>{let i=n.value;lb(e,i)&&(nf(e,n),e[Rd]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};const mzt=Object.freeze({loose:!0}),gzt=Object.freeze({});var GT=e=>e?"object"!=typeof e?mzt:e:gzt,WT={exports:{}},YT={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ub="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=YT,a=ub,s=(t=e.exports={}).re=[],o=t.safeRe=[],c=t.src=[],l=t.t={};let u=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],p=(m,g,v)=>{const y=(m=>{for(const[g,v]of d)m=m.split(`${g}*`).join(`${g}{0,${v}}`).split(`${g}+`).join(`${g}{1,${v}}`);return m})(g),C=u++;a(m,C,g),l[m]=C,c[C]=g,s[C]=new RegExp(g,v?"g":void 0),o[C]=new RegExp(y,v?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),p("FULL",`^${c[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),p("LOOSE",`^${c[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),p("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),p("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),p("COERCERTL",c[l.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(WT,WT.exports);var XT=WT.exports;const n5e=/^[0-9]+$/,r5e=(e,t)=>{const n=n5e.test(e),r=n5e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};var Mzt={compareIdentifiers:r5e,rcompareIdentifiers:(e,t)=>r5e(t,e)};const fb=ub,{MAX_LENGTH:i5e,MAX_SAFE_INTEGER:db}=YT,{safeRe:a5e,t:s5e}=XT,_zt=GT,{compareIdentifiers:rf}=Mzt;var QT=class Ns{constructor(t,n){if(n=_zt(n),t instanceof Ns){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>i5e)throw new TypeError(`version is longer than ${i5e} characters`);fb("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?a5e[s5e.LOOSE]:a5e[s5e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>db||this.major<0)throw new TypeError("Invalid major version");if(this.minor>db||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>db||this.patch<0)throw new TypeError("Invalid patch version");this.prerelease=r[4]?r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const a=+i;if(a>=0&&a<db)return a}return i}):[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(fb("SemVer.compare",this.version,this.options,t),!(t instanceof Ns)){if("string"==typeof t&&t===this.version)return 0;t=new Ns(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Ns||(t=new Ns(t,this.options)),rf(this.major,t.major)||rf(this.minor,t.minor)||rf(this.patch,t.patch)}comparePre(t){if(t instanceof Ns||(t=new Ns(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(fb("prerelease compare",n,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return rf(r,i)}while(++n)}compareBuild(t){t instanceof Ns||(t=new Ns(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(fb("prerelease compare",n,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return rf(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[i];else{let a=this.prerelease.length;for(;--a>=0;)"number"==typeof this.prerelease[a]&&(this.prerelease[a]++,a=-2);if(-1===a){if(n===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let a=[n,i];!1===r&&(a=[n]),0===rf(this.prerelease[0],n)?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const o5e=QT;var af=(e,t,n)=>new o5e(e,n).compare(new o5e(t,n));const wzt=af,zzt=af,Szt=af,Vzt=af,Lzt=af,Nzt=af;var ZT,c5e,KT,l5e,$zt=(e,t,n,r)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return((e,t,n)=>0===wzt(e,t,n))(e,n,r);case"!=":return((e,t,n)=>0!==zzt(e,t,n))(e,n,r);case">":return((e,t,n)=>Szt(e,t,n)>0)(e,n,r);case">=":return((e,t,n)=>Vzt(e,t,n)>=0)(e,n,r);case"<":return((e,t,n)=>Lzt(e,t,n)<0)(e,n,r);case"<=":return((e,t,n)=>Nzt(e,t,n)<=0)(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};const Uzt=function u5e(){if(l5e)return KT;l5e=1;class e{constructor(x,H){if(H=r(H),x instanceof e)return x.loose===!!H.loose&&x.includePrerelease===!!H.includePrerelease?x:new e(x.raw,H);if(x instanceof i)return this.raw=x.value,this.set=[[x]],this.format(),this;if(this.options=H,this.loose=!!H.loose,this.includePrerelease=!!H.includePrerelease,this.raw=x.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(V=>this.parseRange(V.trim())).filter(V=>V.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const V=this.set[0];if(this.set=this.set.filter(T=>!p(T[0])),0===this.set.length)this.set=[V];else if(this.set.length>1)for(const T of this.set)if(1===T.length&&m(T[0])){this.set=[T];break}}this.format()}format(){return this.range=this.set.map(x=>x.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(x){const V=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+x,T=n.get(V);if(T)return T;const E=this.options.loose;x=x.replace(E?o[c.HYPHENRANGELOOSE]:o[c.HYPHENRANGE],L(this.options.includePrerelease)),a("hyphen replace",x),x=x.replace(o[c.COMPARATORTRIM],l),a("comparator trim",x),x=x.replace(o[c.TILDETRIM],u),a("tilde trim",x),x=x.replace(o[c.CARETTRIM],f),a("caret trim",x);let A=x.split(" ").map($=>v($,this.options)).join(" ").split(/\s+/).map($=>D($,this.options));E&&(A=A.filter($=>(a("loose invalid filter",$,this.options),!!$.match(o[c.COMPARATORLOOSE])))),a("range list",A);const O=new Map,B=A.map($=>new i($,this.options));for(const $ of B){if(p($))return[$];O.set($.value,$)}O.size>1&&O.has("")&&O.delete("");const U=[...O.values()];return n.set(V,U),U}intersects(x,H){if(!(x instanceof e))throw new TypeError("a Range is required");return this.set.some(V=>g(V,H)&&x.set.some(T=>g(T,H)&&V.every(E=>T.every(k=>E.intersects(k,H)))))}test(x){if(!x)return!1;if("string"==typeof x)try{x=new s(x,this.options)}catch{return!1}for(let H=0;H<this.set.length;H++)if(R(this.set[H],x,this.options))return!0;return!1}}KT=e;const n=new class dzt{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[Wl]=t.max||1/0;const n=t.length||jT;if(this[tf]="function"!=typeof n?jT:n,this[Rd]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[Yl]=t.maxAge||0,this[Uo]=t.dispose,this[K8e]=t.noDisposeOnSet||!1,this[J8e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[Wl]=t||1/0,Od(this)}get max(){return this[Wl]}set allowStale(t){this[Rd]=!!t}get allowStale(){return this[Rd]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[Yl]=t,Od(this)}get maxAge(){return this[Yl]}set lengthCalculator(t){"function"!=typeof t&&(t=jT),t!==this[tf]&&(this[tf]=t,this[Bo]=0,this[f1].forEach(n=>{n.length=this[tf](n.value,n.key),this[Bo]+=n.length})),Od(this)}get lengthCalculator(){return this[tf]}get length(){return this[Bo]}get itemCount(){return this[f1].length}rforEach(t,n){n=n||this;for(let r=this[f1].tail;null!==r;){const i=r.prev;e5e(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[f1].head;null!==r;){const i=r.next;e5e(this,t,r,n),r=i}}keys(){return this[f1].toArray().map(t=>t.key)}values(){return this[f1].toArray().map(t=>t.value)}reset(){this[Uo]&&this[f1]&&this[f1].length&&this[f1].forEach(t=>this[Uo](t.key,t.value)),this[ba]=new Map,this[f1]=new fzt,this[Bo]=0}dump(){return this[f1].map(t=>!lb(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[f1]}set(t,n,r){if((r=r||this[Yl])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const i=r?Date.now():0,a=this[tf](n,t);if(this[ba].has(t)){if(a>this[Wl])return nf(this,this[ba].get(t)),!1;const c=this[ba].get(t).value;return this[Uo]&&(this[K8e]||this[Uo](t,c.value)),c.now=i,c.maxAge=r,c.value=n,this[Bo]+=a-c.length,c.length=a,this.get(t),Od(this),!0}const s=new hzt(t,n,a,i,r);return s.length>this[Wl]?(this[Uo]&&this[Uo](t,n),!1):(this[Bo]+=s.length,this[f1].unshift(s),this[ba].set(t,this[f1].head),Od(this),!0)}has(t){if(!this[ba].has(t))return!1;const n=this[ba].get(t).value;return!lb(this,n)}get(t){return qT(this,t,!0)}peek(t){return qT(this,t,!1)}pop(){const t=this[f1].tail;return t?(nf(this,t),t.value):null}del(t){nf(this,this[ba].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],a=i.e||0;if(0===a)this.set(i.k,i.v);else{const s=a-n;s>0&&this.set(i.k,i.v,s)}}}prune(){this[ba].forEach((t,n)=>qT(this,n,!1))}}({max:1e3}),r=GT,i=function Bzt(){if(c5e)return ZT;c5e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,f){if(f=n(f),u instanceof t){if(u.loose===!!f.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),s("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.value=this.semver===e?"":this.operator+this.semver.version,s("comp",this)}parse(u){const d=u.match(this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR]);if(!d)throw new TypeError(`Invalid comparator: ${u}`);this.operator=void 0!==d[1]?d[1]:"","="===this.operator&&(this.operator=""),this.semver=d[2]?new o(d[2],this.options.loose):e}toString(){return this.value}test(u){if(s("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if("string"==typeof u)try{u=new o(u,this.options)}catch{return!1}return a(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof t))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new c(u.value,f).test(this.value):""===u.operator?""===u.value||new c(this.value,f).test(u.semver):!((f=n(f)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===u.value)||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))||!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||a(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||a(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}ZT=t;const n=GT,{safeRe:r,t:i}=XT,a=$zt,s=ub,o=QT,c=u5e();return ZT}(),a=ub,s=QT,{safeRe:o,t:c,comparatorTrimReplace:l,tildeTrimReplace:u,caretTrimReplace:f}=XT,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=YT,p=N=>"<0.0.0-0"===N.value,m=N=>""===N.value,g=(N,x)=>{let H=!0;const V=N.slice();let T=V.pop();for(;H&&V.length;)H=V.every(E=>T.intersects(E,x)),T=V.pop();return H},v=(N,x)=>(a("comp",N,x),N=M(N,x),a("caret",N),N=C(N,x),a("tildes",N),N=_(N,x),a("xrange",N),N=S(N,x),a("stars",N),N),y=N=>!N||"x"===N.toLowerCase()||"*"===N,C=(N,x)=>N.trim().split(/\s+/).map(H=>b(H,x)).join(" "),b=(N,x)=>N.replace(x.loose?o[c.TILDELOOSE]:o[c.TILDE],(V,T,E,k,A)=>{let O;return a("tilde",N,V,T,E,k,A),y(T)?O="":y(E)?O=`>=${T}.0.0 <${+T+1}.0.0-0`:y(k)?O=`>=${T}.${E}.0 <${T}.${+E+1}.0-0`:A?(a("replaceTilde pr",A),O=`>=${T}.${E}.${k}-${A} <${T}.${+E+1}.0-0`):O=`>=${T}.${E}.${k} <${T}.${+E+1}.0-0`,a("tilde return",O),O}),M=(N,x)=>N.trim().split(/\s+/).map(H=>w(H,x)).join(" "),w=(N,x)=>{a("caret",N,x);const V=x.includePrerelease?"-0":"";return N.replace(x.loose?o[c.CARETLOOSE]:o[c.CARET],(T,E,k,A,O)=>{let B;return a("caret",N,T,E,k,A,O),y(E)?B="":y(k)?B=`>=${E}.0.0${V} <${+E+1}.0.0-0`:y(A)?B="0"===E?`>=${E}.${k}.0${V} <${E}.${+k+1}.0-0`:`>=${E}.${k}.0${V} <${+E+1}.0.0-0`:O?(a("replaceCaret pr",O),B="0"===E?"0"===k?`>=${E}.${k}.${A}-${O} <${E}.${k}.${+A+1}-0`:`>=${E}.${k}.${A}-${O} <${E}.${+k+1}.0-0`:`>=${E}.${k}.${A}-${O} <${+E+1}.0.0-0`):(a("no pr"),B="0"===E?"0"===k?`>=${E}.${k}.${A}${V} <${E}.${k}.${+A+1}-0`:`>=${E}.${k}.${A}${V} <${E}.${+k+1}.0-0`:`>=${E}.${k}.${A} <${+E+1}.0.0-0`),a("caret return",B),B})},_=(N,x)=>(a("replaceXRanges",N,x),N.split(/\s+/).map(H=>z(H,x)).join(" ")),z=(N,x)=>(N=N.trim()).replace(x.loose?o[c.XRANGELOOSE]:o[c.XRANGE],(V,T,E,k,A,O)=>{a("xRange",N,V,T,E,k,A,O);const B=y(E),U=B||y(k),$=U||y(A);return"="===T&&$&&(T=""),O=x.includePrerelease?"-0":"",B?V=">"===T||"<"===T?"<0.0.0-0":"*":T&&$?(U&&(k=0),A=0,">"===T?(T=">=",U?(E=+E+1,k=0,A=0):(k=+k+1,A=0)):"<="===T&&(T="<",U?E=+E+1:k=+k+1),"<"===T&&(O="-0"),V=`${T+E}.${k}.${A}${O}`):U?V=`>=${E}.0.0${O} <${+E+1}.0.0-0`:$&&(V=`>=${E}.${k}.0${O} <${E}.${+k+1}.0-0`),a("xRange return",V),V}),S=(N,x)=>(a("replaceStars",N,x),N.trim().replace(o[c.STAR],"")),D=(N,x)=>(a("replaceGTE0",N,x),N.trim().replace(o[x.includePrerelease?c.GTE0PRE:c.GTE0],"")),L=N=>(x,H,V,T,E,k,A,O,B,U,$,G,se)=>`${H=y(V)?"":y(T)?`>=${V}.0.0${N?"-0":""}`:y(E)?`>=${V}.${T}.0${N?"-0":""}`:k?`>=${H}`:`>=${H}${N?"-0":""}`} ${O=y(B)?"":y(U)?`<${+B+1}.0.0-0`:y($)?`<${B}.${+U+1}.0-0`:G?`<=${B}.${U}.${$}-${G}`:N?`<${B}.${U}.${+$+1}-0`:`<=${O}`}`.trim(),R=(N,x,H)=>{for(let V=0;V<N.length;V++)if(!N[V].test(x))return!1;if(x.prerelease.length&&!H.includePrerelease){for(let V=0;V<N.length;V++)if(a(N[V].semver),N[V].semver!==i.ANY&&N[V].semver.prerelease.length>0){const T=N[V].semver;if(T.major===x.major&&T.minor===x.minor&&T.patch===x.patch)return!0}return!1}return!0};return KT}();var jzt=(e,t,n)=>{try{t=new Uzt(t,n)}catch{return!1}return t.test(e)},f5e=azt(jzt),Gzt='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: "";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n';function d5e(e,...t){for(const n of t)Wzt(e,n);return e}function Wzt(e,t){for(const n of Object.keys(t))v6(e,n,t[n],!0)}const As=P3;let Pd=or;const h5e=typeof window<"u"?window:void 0;void 0===Pd&&h5e?.vl?.compile&&(Pd=h5e.vl);const gHt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},vHt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},$d={vega:"Vega","vega-lite":"Vega-Lite"},hb={vega:As.version,"vega-lite":Pd?Pd.version:"not available"},yHt={vega:e=>e,"vega-lite":(e,t)=>Pd.compile(e,{config:t}).spec},CHt='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',bHt="chart-wrapper";function p5e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+a),s.document.title=`${$d[r]} JSON Source`}function m5e(e){return!(!e||!("load"in e))}function g5e(e){return m5e(e)?e:As.loader(e)}function JT(){return JT=Fn(function*(e,t,n={}){let r,i;ge(t)?(i=g5e(n.loader),r=JSON.parse(yield i.load(t))):r=t;const a=function wHt(e){const t=e.usermeta?.embedOptions??{};return ge(t.defaultStyle)&&(t.defaultStyle=!1),t}(r),s=a.loader;(!i||s)&&(i=g5e(n.loader??s));const o=yield v5e(a,i),c=yield v5e(n,i),l={...d5e(c,o),config:g6(c.config??{},o.config??{})};return yield function HHt(e,t){return tI.apply(this,arguments)}(e,r,l,i)}),JT.apply(this,arguments)}function v5e(e,t){return eI.apply(this,arguments)}function eI(){return eI=Fn(function*(e,t){const n=ge(e.config)?JSON.parse(yield t.load(e.config)):e.config??{},r=ge(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}),eI.apply(this,arguments)}function tI(){return tI=Fn(function*(e,t,n={},r){const i=n.theme?g6(Go[n.theme],n.config??{}):n.config,a=_c(n.actions)?n.actions:d5e({},gHt,n.actions??{}),s={...vHt,...n.i18n},o=n.renderer??"canvas",c=n.logLevel??As.Warn,l=n.downloadFileName??"visualization",u="string"==typeof e?document.querySelector(e):e;if(!u)throw new Error(`${e} does not exist`);if(!1!==n.defaultStyle){const M="vega-embed-style",{root:w,rootContainer:_}=function zHt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}(u);if(!w.getElementById(M)){const z=document.createElement("style");z.id=M,z.innerHTML=void 0===n.defaultStyle||!0===n.defaultStyle?Gzt.toString():n.defaultStyle,_.appendChild(z)}}const f=function _Ht(e,t){if(e.$schema){const n=E8e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${$d[n.library]}, but mode argument sets ${$d[t]??t}.`);const r=n.library;return f5e(hb[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${$d[r]} ${n.version}, but the current version of ${$d[r]} is v${hb[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}(t,n.mode);let d=yHt[f](t,i);if("vega-lite"===f&&d.$schema){const M=E8e(d.$schema);f5e(hb.vega,`^${M.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${M.version}, but current version is v${hb.vega}.`)}u.classList.add("vega-embed"),a&&u.classList.add("has-actions"),u.innerHTML="";let h=u;if(a){const M=document.createElement("div");M.classList.add(bHt),u.appendChild(M),h=M}const p=n.patch;if(p&&(d=p instanceof Function?p(d):im(d,p,!0,!1).newDocument),n.formatLocale&&As.formatLocale(n.formatLocale),n.timeFormatLocale&&As.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const M in n.expressionFunctions){const w=n.expressionFunctions[M];"fn"in w?As.expressionFunction(M,w.fn,w.visitor):w instanceof Function&&As.expressionFunction(M,w)}const{ast:m}=n,g=As.parse(d,"vega-lite"===f?{}:i,{ast:m}),v=new(n.viewClass||As.View)(g,{loader:r,logLevel:c,renderer:o,...m?{expr:As.expressionInterpreter??n.expr??vmt}:{}});if(v.addSignalListener("autosize",(M,w)=>{const{type:_}=w;"fit-x"==_?(h.classList.add("fit-x"),h.classList.remove("fit-y")):"fit-y"==_?(h.classList.remove("fit-x"),h.classList.add("fit-y")):"fit"==_?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),!1!==n.tooltip){const{loader:M,tooltip:w}=n,_=M&&!m5e(M)?M?.baseURL:void 0,z=function MHt(e){return"function"==typeof e}(w)?w:new Q8e({baseURL:_,...!0===w?{}:w}).call;v.tooltip(z)}let C,{hover:y}=n;if(void 0===y&&(y="vega"===f),y){const{hoverSet:M,updateSet:w}="boolean"==typeof y?{}:y;v.hover(M,w)}if(n&&(null!=n.width&&v.width(n.width),null!=n.height&&v.height(n.height),null!=n.padding&&v.padding(n.padding)),yield v.initialize(h,n.bind).runAsync(),!1!==a){let M=u;if(!1!==n.defaultStyle||n.forceActionsMenu){const _=document.createElement("details");_.title=s.CLICK_TO_VIEW_ACTIONS,u.append(_),M=_;const z=document.createElement("summary");z.innerHTML=CHt,_.append(z),C=S=>{_.contains(S.target)||_.removeAttribute("open")},document.addEventListener("click",C)}const w=document.createElement("div");if(M.append(w),w.classList.add("vega-actions"),!0===a||!1!==a.export)for(const _ of["svg","png"])if(!0===a||!0===a.export||a.export[_]){const z=s[`${_.toUpperCase()}_ACTION`],S=document.createElement("a"),D=ve(n.scaleFactor)?n.scaleFactor[_]:n.scaleFactor;S.text=z,S.href="#",S.target="_blank",S.download=`${l}.${_}`,S.addEventListener("mousedown",function(){var L=Fn(function*(R){R.preventDefault();const N=yield v.toImageURL(_,D);this.href=N});return function(R){return L.apply(this,arguments)}}()),w.append(S)}if(!0===a||!1!==a.source){const _=document.createElement("a");_.text=s.SOURCE_ACTION,_.href="#",_.addEventListener("click",function(z){p5e(dH()(t),n.sourceHeader??"",n.sourceFooter??"",f),z.preventDefault()}),w.append(_)}if("vega-lite"===f&&(!0===a||!1!==a.compiled)){const _=document.createElement("a");_.text=s.COMPILED_ACTION,_.href="#",_.addEventListener("click",function(z){p5e(dH()(d),n.sourceHeader??"",n.sourceFooter??"","vega"),z.preventDefault()}),w.append(_)}if(!0===a||!1!==a.editor){const _=n.editorUrl??"https://vega.github.io/editor/",z=document.createElement("a");z.text=s.EDITOR_ACTION,z.href="#",z.addEventListener("click",function(S){(function qzt(e,t,n){const r=e.open(t),{origin:s}=new URL(t);let o=40;e.addEventListener("message",function c(u){u.source===r&&(o=0,e.removeEventListener("message",c,!1))},!1),setTimeout(function l(){o<=0||(r.postMessage(n,s),setTimeout(l,250),o-=1)},250)})(window,_,{config:i,mode:f,renderer:o,spec:dH()(t)}),S.preventDefault()}),w.append(z)}}return{view:v,spec:t,vgSpec:d,finalize:function b(){C&&document.removeEventListener("click",C),v.finalize()},embedOptions:n}}),tI.apply(this,arguments)}let y5e=(()=>{class e{constructor(){this.data=[],this.spec=Vnt}ngAfterViewInit(){var n=this;return Fn(function*(){n.spec=n.addDataToSpec(n.data,n.spec),n.chart=yield function xHt(e,t){return JT.apply(this,arguments)}("#calendar-element",n.spec)})()}addDataToSpec(n,r){const i=r;return i.data.values=this.formatData(n),i}formatData(n){const r=Array.from(new Set(n)),i=r.map(l=>new Date(l).getFullYear()),a=Math.min(...i),s=Math.max(...i),o={};for(let l=a;l<=s;l++)for(let u=1;u<=12;u++)for(let f=1;f<=31;f++){const d=new Date(l,u-1,f).toLocaleDateString().split("T")[0];o[d]=0}return r.forEach(l=>{const u=new Date(l).toLocaleDateString().split("T")[0];o[u]+=1}),Object.entries(o).map(([l,u])=>({date:l,count:u}))}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-calendar-heatmap"]],inputs:{data:"data"},decls:1,vars:0,consts:[["id","calendar-element"]],template:function(r,i){1&r&&Un(0,"div",0)},styles:["#calendar-element[_ngcontent-%COMP%]{position:relative;width:100%}"]})}return e})();function SHt(e,t){if(1&e&&(I(0,"li"),P(1),Ia(2,"date"),F()),2&e){const n=t.$implicit;X(1),Qe(" ",Fa(2,1,n)," ")}}const C5e=function(){return[]};function EHt(e,t){if(1&e&&(I2(0),Un(1,"app-calendar-heatmap",6),F2()),2&e){const n=Kt();X(1),de("data",n.model.FormattedCompletedDates?n.model.FormattedCompletedDates:Gs(1,C5e))}}let b5e=(()=>{class e{constructor(n,r,i){this.api=n,this.route=r,this.goalApi=i,this.faCheck=Jz,this.faXmark=M4}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");this.api.getHabit(n).pipe(tt(1)).subscribe(r=>{this.model=new Cc(r.data),this.model?.Goal&&this.goalApi.getGoal(this.model?.Goal).pipe(tt(1)).subscribe(i=>{this.goalModel=new ja(i.data)})})}static#e=this.\u0275fac=function(r){return new(r||e)(q(h6),q(w1),q(qa))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-habit-page"]],decls:22,vars:12,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right",3,"routerLink"],[1,"uk-button-danger","uk-button",3,"routerLink"],[3,"icon"],[3,"routerLink"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"data"]],template:function(r,i){if(1&r&&(I(0,"h1"),P(1),F(),I(2,"button",0),P(3),F(),I(4,"button",1),P(5),F(),I(6,"p"),P(7),F(),Un(8,"hr"),I(9,"span"),P(10," Is Anti Habit: "),Un(11,"fa-icon",2),F(),I(12,"p"),P(13," Associated Goal: "),I(14,"a",3),P(15),F()(),Un(16,"hr"),I(17,"h2"),P(18,"Completed Dates"),F(),I(19,"ul"),It(20,SHt,3,3,"li",4),F(),It(21,EHt,2,2,"ng-container",5)),2&r){let a;X(1),Qe("Habit: ",null==i.model?null:i.model.Name,""),X(1),de("routerLink",null==i.model?null:i.model.EditUrl),X(1),Qe(" Edit: ",null==i.model?null:i.model.Name,"\n"),X(1),de("routerLink",null==i.model?null:i.model.DeleteUrl),X(1),Qe(" Delete: ",null==i.model?null:i.model.Name,"\n"),X(2),Qe(" ",null==i.model?null:i.model.Description,"\n"),X(4),de("icon",null!=i.model&&i.model.AntiHabit?i.faCheck:i.faXmark),X(3),de("routerLink",null==i.goalModel?null:i.goalModel.ViewUrl),X(1),Qe(" ",null==i.goalModel?null:i.goalModel.Name," "),X(5),de("ngForOf",null!==(a=null==i.model?null:i.model.FormattedCompletedDates)&&void 0!==a?a:Gs(11,C5e)),X(1),de("ngIf",i.model)}},dependencies:[Ks,d8,Ri,TG,y5e,o4],encapsulation:2})}return e})();function VHt(e,t){if(1&e&&(I2(0),I(1,"p",10),P(2),F(),F2()),2&e){const n=Kt().$implicit;X(2),Qe(" ",n.Description," ")}}function DHt(e,t){if(1&e){const n=t4();I(0,"tr")(1,"td")(2,"input",6),Ae("change",function(){const a=Ha(n).$implicit;return Sa(Kt().completeHabit(a))}),F()(),I(3,"td"),P(4),F(),I(5,"td",2),It(6,VHt,3,1,"ng-container",7),F(),I(7,"td"),Un(8,"fa-icon",8),F(),I(9,"td",2),P(10," aaa "),F(),I(11,"td")(12,"a",9),P(13,"View"),F()()()}if(2&e){const n=t.$implicit,r=Kt(),i=qs(26);X(4),R2(n.Name),X(2),de("ngIf",n.Description)("ngIfElse",i),X(2),de("icon",n.AntiHabit?r.faCheck:r.faXmark),X(4),de("routerLink",n.ViewUrl)}}function LHt(e,t){if(1&e&&(I2(0),I(1,"p",10),P(2),F(),F2()),2&e){const n=Kt().$implicit;X(2),Qe(" ",n.Description," ")}}function AHt(e,t){if(1&e){const n=t4();I(0,"tr")(1,"td")(2,"input",12),Ae("change",function(){const a=Ha(n).$implicit;return Sa(Kt(2).uncompleteHabit(a))}),F()(),I(3,"td"),P(4),F(),I(5,"td",2),It(6,LHt,3,1,"ng-container",7),F(),I(7,"td"),Un(8,"fa-icon",8),F(),I(9,"td",2),P(10,"test"),F(),I(11,"td")(12,"a",13),P(13,"View"),F()()()}if(2&e){const n=t.$implicit,r=Kt(2),i=qs(26);X(4),R2(n.Name),X(2),de("ngIf",n.Description)("ngIfElse",i),X(2),de("icon",n.AntiHabit?r.faCheck:r.faXmark),X(4),de("routerLink",n.ViewUrl)}}function NHt(e,t){if(1&e&&(I(0,"section")(1,"h2"),P(2,"Completed Habits"),F(),I(3,"table",11)(4,"thead")(5,"tr")(6,"th"),P(7,"Completed"),F(),I(8,"th"),P(9,"Name"),F(),I(10,"th",2),P(11,"Description"),F(),I(12,"th"),P(13,"Anti Habit"),F(),I(14,"th",2),P(15,"Associated Goal"),F(),I(16,"th"),P(17,"Action"),F()()(),I(18,"tbody"),It(19,AHt,14,5,"tr",3),F()()()),2&e){const n=Kt();X(19),de("ngForOf",n.completedHabits)}}function kHt(e,t){if(1&e&&(I2(0),I(1,"p",10),P(2),F(),F2()),2&e){const n=Kt().$implicit;X(2),Qe(" ",n.Description," ")}}function THt(e,t){if(1&e){const n=t4();I(0,"tr")(1,"td")(2,"input",12),Ae("change",function(){const a=Ha(n).$implicit;return Sa(Kt(2).uncompleteHabit(a))}),F()(),I(3,"td"),P(4),F(),I(5,"td",2),It(6,kHt,3,1,"ng-container",7),F(),I(7,"td"),Un(8,"fa-icon",8),F(),I(9,"td",2),P(10,"test"),F(),I(11,"td")(12,"a",13),P(13,"View"),F()()()}if(2&e){const n=t.$implicit,r=Kt(2),i=qs(26);X(4),R2(n.Name),X(2),de("ngIf",n.Description)("ngIfElse",i),X(2),de("icon",n.AntiHabit?r.faCheck:r.faXmark),X(4),de("routerLink",n.ViewUrl)}}function IHt(e,t){if(1&e&&(I(0,"section")(1,"h2"),P(2,"Failed Anti Habits"),F(),I(3,"table",11)(4,"thead")(5,"tr"),Un(6,"th"),I(7,"th"),P(8,"Name"),F(),I(9,"th",2),P(10,"Description"),F(),I(11,"th"),P(12,"Anti Habit"),F(),I(13,"th",2),P(14,"Associated Goal"),F(),I(15,"th"),P(16,"Action"),F()()(),I(17,"tbody"),It(18,THt,14,5,"tr",3),F()()()),2&e){const n=Kt();X(18),de("ngForOf",n.failedAntiHabits)}}function FHt(e,t){1&e&&(I(0,"i"),P(1,"No description"),F())}let M5e=(()=>{class e{constructor(n){this.api=n,this.habits=[],this.faCheck=Jz,this.faXmark=M4}get inCompleteHabits(){return this.habits.filter(n=>!this.isCompletedToday(n))}get completedHabits(){return this.habits.filter(n=>!n.AntiHabit&&this.isCompletedToday(n))}get failedAntiHabits(){return this.habits.filter(n=>n.AntiHabit&&this.isCompletedToday(n))}ngOnInit(){this.api.getHabits().pipe(tt(1)).subscribe(n=>{this.habits=n.data.map(r=>new Cc(r))})}completeHabit(n){n.CompletedDates?.length||(n.CompletedDates=[]),n.CompletedDates.push((new Date).toLocaleDateString()),this.api.updateHabit(n).pipe(tt(1)).subscribe(r=>{n=new Cc(r.data)})}uncompleteHabit(n){const r=(new Date).toLocaleDateString(),i=n.CompletedDates.findIndex(a=>{const s=new Date(a).toLocaleDateString();return r===s});n.CompletedDates.splice(i,1),this.api.updateHabit(n).pipe(tt(1)).subscribe(a=>{n=new Cc(a.data)})}isCompletedToday(n){const r=n.CompletedDates?.at(-1)?.split("T")[0],i=(new Date)?.toLocaleDateString()?.split("T")[0];return r===i}static#e=this.\u0275fac=function(r){return new(r||e)(q(h6))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-list-page"]],decls:27,vars:3,consts:[["routerLink","/habits/new",1,"uk-button","uk-button-default"],[1,"uk-table","uk-table-striped"],[1,"hide-in-mobile"],[4,"ngFor","ngForOf"],[4,"ngIf"],["defaultDescription",""],["type","checkbox",1,"uk-checkbox",3,"change"],[4,"ngIf","ngIfElse"],[3,"icon"],[1,"uk-button-small","uk-button-primary","uk-margin-small-right",3,"routerLink"],[1,"description"],[1,"uk-table","uk-table-striped","uk-text-muted"],["type","checkbox","checked","",1,"uk-checkbox",3,"change"],[1,"uk-button-small","uk-button-primary",3,"routerLink"]],template:function(r,i){1&r&&(I(0,"h1"),P(1,"Habit Tracker"),F(),I(2,"section")(3,"nav")(4,"a",0),P(5,"New Habit"),F()()(),I(6,"section")(7,"table",1)(8,"thead")(9,"tr"),Un(10,"th"),I(11,"th"),P(12,"Name"),F(),I(13,"th",2),P(14,"Description"),F(),I(15,"th"),P(16,"Anti Habit"),F(),I(17,"th",2),P(18,"Associated Goal"),F(),I(19,"th"),P(20,"Action"),F()()(),I(21,"tbody"),It(22,DHt,14,5,"tr",3),F()()(),It(23,NHt,20,1,"section",4),It(24,IHt,19,1,"section",4),It(25,FHt,2,0,"ng-template",null,5,s8)),2&r&&(X(22),de("ngForOf",i.inCompleteHabits),X(1),de("ngIf",i.completedHabits.length>0),X(1),de("ngIf",i.failedAntiHabits.length>0))},dependencies:[Ks,d8,Ri,TG],styles:["p.description[_ngcontent-%COMP%]{text-wrap:nowrap;padding-right:10rem;width:28rem;overflow:hidden}@media screen and (max-width: 768px){.hide-in-mobile[_ngcontent-%COMP%]{display:none}}"]})}return e})();function RHt(e,t){if(1&e&&(I2(0),I(1,"option",12),P(2),F(),F2()),2&e){const n=t.$implicit;X(1),de("value",n.Id),X(1),R2(n.Name)}}let _5e=(()=>{class e{constructor(n,r,i){this.router=n,this.api=r,this.goalApi=i,this.model={CreatedAt:(new Date).toLocaleDateString()},this.goals$=new E2([])}ngOnInit(){this.goalApi.listGoals().pipe(tt(1)).subscribe(n=>this.goals$.next(n.data.map(r=>new ja(r))))}submitForm(){const n=new Cc(this.model);this.api.createHabit(n).pipe(tt(1)).subscribe(()=>this.router.navigateByUrl("/"))}static#e=this.\u0275fac=function(r){return new(r||e)(q(mn),q(h6),q(qa))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-new-page"]],decls:21,vars:7,consts:[["action",""],["ngForm",""],["for","new-habit-input",1,"uk-form-label"],["id","new-habit-input","name","new-habit-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-habit-description",1,"uk-form-label"],["id","new-habit-description","name","new-habit-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","associated-goal",1,"uk-form-label"],["name","associated-goal","id","associated-goal",1,"uk-input",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","checkbox","name","anti-habit","id","anti-habit",1,"uk-checkbox",3,"ngModel","ngModelChange"],["for","anti-habit",1,"uk-form-label"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"],[3,"value"]],template:function(r,i){1&r&&(I(0,"h1"),P(1,"Add New Habit"),F(),I(2,"form",0,1)(4,"label",2),P(5,"Habit Name"),F(),I(6,"input",3),Ae("ngModelChange",function(s){return i.model.Name=s}),F(),I(7,"label",4),P(8," Habit Description "),F(),I(9,"textarea",5),Ae("ngModelChange",function(s){return i.model.Description=s}),F(),I(10,"label",6),P(11,"Associated Goal"),F(),I(12,"select",7),Ae("ngModelChange",function(s){return i.model.Goal=s}),It(13,RHt,3,2,"ng-container",8),Ia(14,"async"),F(),I(15,"input",9),Ae("ngModelChange",function(s){return i.model.AntiHabit=s}),F(),I(16,"label",10),P(17,"Anti Habit"),F(),I(18,"div")(19,"button",11),Ae("click",function(){return i.submitForm()}),P(20," Add New Habit "),F()()()),2&r&&(X(6),de("ngModel",i.model.Name),X(3),de("ngModel",i.model.Description),X(3),de("ngModel",i.model.Goal),X(1),de("ngForOf",Fa(14,5,i.goals$)),X(2),de("ngModel",i.model.AntiHabit))},dependencies:[Ks,dc,J9,ep,ki,Q0,w8,Ti,fc,Zr,Pa,kw],encapsulation:2})}return e})(),w5e=(()=>{class e{constructor(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-schedule-page"]],decls:2,vars:0,template:function(r,i){1&r&&(I(0,"h1"),P(1,"Schedule"),F())},encapsulation:2})}return e})(),sf=(()=>{class e extends d6{constructor(n){super(),this.http=n}getTodaysRemainingTasks(){throw new Error("Not implemented")}getTasks(){if(tn.production){const n=gn("/tasks");return this.http.get(n)}return console.debug("/tasks"),Ce({data:[{Id:"1",Name:"Fake Task",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},{Id:"1",Name:"Fake Task",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},{Id:"1",Name:"Fake Task",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},{Id:"1",Name:"Fake Task",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},{Id:"1",Name:"Fake Task",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1}],message:"success"})}getTask(n){if(tn.production){const r=gn(`/tasks/${n}`);return this.http.get(r)}return console.debug(n),Ce({data:{Id:"1",Name:"Fake Task",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},message:"success"})}createTask(n){if(tn.production){const r=gn("/tasks");return this.http.post(r,n)}return console.debug(n),Ce({data:{Id:"1",Name:"Fake Task",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},message:"success"})}updateTask(n){if(tn.production){const r=gn(`/tasks/${n.Id}`);return this.http.put(r,n)}return console.debug(n),Ce({data:{Id:"1",Name:"Fake Task",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1},message:"success"})}deleteTask(n){if(tn.production){const r=gn(`/tasks/${n}`);return this.http.delete(r)}return console.debug(n),Ce(void 0)}static#e=this.\u0275fac=function(r){return new(r||e)(ze(v8))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),x5e=(()=>{class e{constructor(n,r,i){this.api=n,this.route=r,this.router=i}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");this.api.getTask(n).pipe(tt(1)).subscribe(r=>{this.model=new b4(r.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteTask(this.model?.Id).pipe(tt(1)).subscribe(()=>this.router.navigateByUrl("/tasks"))}static#e=this.\u0275fac=function(r){return new(r||e)(q(sf),q(w1),q(mn))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-delete-task-page"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(r,i){1&r&&(I(0,"h1"),P(1),F(),I(2,"p"),P(3," Deleting this model will make it unrecoverable.\n"),F(),I(4,"button",0),Ae("click",function(){return i.deleteModel()}),P(5),F()),2&r&&(X(1),Qe("Delete ",null==i.model?null:i.model.Name,"?"),X(4),Qe(" Delete ",null==i.model?null:i.model.Name,"\n"))},encapsulation:2})}return e})();function OHt(e,t){if(1&e&&(I2(0),I(1,"p",12),P(2),F(),F2()),2&e){const n=Kt().$implicit;X(2),Qe(" ",n.Description," ")}}function PHt(e,t){if(1&e&&(I2(0),P(1),Ia(2,"date"),F2()),2&e){const n=Kt().$implicit;X(1),Qe(" ",Fa(2,1,n.CompleteBy)," ")}}const $Ht=function(e){return{"overdue-task":e}},BHt=function(e){return["/tasks",e,"delete"]};function UHt(e,t){if(1&e){const n=t4();I(0,"tr",7)(1,"td")(2,"input",8),Ae("ngModelChange",function(i){return Sa(Ha(n).$implicit.Completed=i)})("change",function(){const a=Ha(n).$implicit;return Sa(Kt().updateTask(a))}),F()(),I(3,"td"),P(4),F(),I(5,"td",2),It(6,OHt,3,1,"ng-container",9),F(),I(7,"td",2),P(8),F(),I(9,"td"),It(10,PHt,3,3,"ng-container",9),F(),I(11,"td")(12,"a",10),P(13,"View"),F(),I(14,"a",11),P(15,"Delete"),F()()()}if(2&e){const n=t.$implicit;Kt();const r=qs(25),i=qs(27);de("ngClass",h9(10,$Ht,n.isOverdue)),X(2),de("ngModel",n.Completed),X(2),R2(n.Name),X(2),de("ngIf",n.Description)("ngIfElse",r),X(2),R2(n.ImportanceHuman),X(2),de("ngIf",n.CompleteBy)("ngIfElse",i),X(2),de("routerLink",n.ViewUrl),X(2),de("routerLink",h9(12,BHt,n.Id))}}function jHt(e,t){if(1&e&&(I2(0),I(1,"p",12),P(2),F(),F2()),2&e){const n=Kt().$implicit;X(2),Qe(" ",n.Description," ")}}function qHt(e,t){if(1&e&&(I2(0),P(1),Ia(2,"date"),F2()),2&e){const n=Kt().$implicit;X(1),Qe(" ",Fa(2,1,n.CompleteBy)," ")}}function GHt(e,t){if(1&e){const n=t4();I(0,"tr")(1,"td")(2,"input",8),Ae("ngModelChange",function(i){return Sa(Ha(n).$implicit.Completed=i)})("change",function(){const a=Ha(n).$implicit;return Sa(Kt(2).updateTask(a))}),F()(),I(3,"td"),P(4),F(),I(5,"td"),It(6,jHt,3,1,"ng-container",9),F(),I(7,"td"),P(8),F(),It(9,qHt,3,3,"ng-container",9),I(10,"td")(11,"a",15),P(12,"View"),F()()()}if(2&e){const n=t.$implicit;Kt(2);const r=qs(25),i=qs(27);X(2),de("ngModel",n.Completed),X(2),R2(n.Name),X(2),de("ngIf",n.Description)("ngIfElse",r),X(2),Qe(" ",n.ImportanceHuman," "),X(1),de("ngIf",n.CompleteBy)("ngIfElse",i),X(2),de("routerLink",n.ViewUrl)}}function WHt(e,t){if(1&e&&(I(0,"section")(1,"h2"),P(2,"Completed Tasks"),F(),I(3,"table",13)(4,"thead")(5,"tr")(6,"th"),P(7,"Completed"),F(),I(8,"th"),P(9,"Name"),F(),I(10,"th"),P(11,"Description"),F(),I(12,"th"),P(13,"Importance"),F(),I(14,"th"),P(15,"Complete By"),F(),I(16,"th"),P(17,"Action"),F()()(),I(18,"tbody"),It(19,GHt,13,8,"tr",14),F()()()),2&e){const n=Kt();X(19),de("ngForOf",n.completedTasks)}}function YHt(e,t){1&e&&(I(0,"i"),P(1,"No description"),F())}function XHt(e,t){1&e&&(I(0,"i"),P(1,"No date set"),F())}let z5e=(()=>{class e{constructor(n){this.api=n,this.tasks=[]}get completedTasks(){return this.tasks.filter(n=>n.Completed)}get incompleteTasks(){return this.tasks.filter(n=>!n.Completed)}ngOnInit(){this.api.getTasks().pipe(tt(1)).subscribe(n=>{this.tasks=n.data.map(r=>new b4(r))})}updateTask(n){this.api.updateTask(n).pipe(tt(1)).subscribe(r=>{n=new b4(r.data)})}static#e=this.\u0275fac=function(r){return new(r||e)(q(sf))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-tasks-page"]],decls:28,vars:2,consts:[["routerLink","/tasks/new",1,"uk-button","uk-button-default"],[1,"uk-table","uk-table-striped"],[1,"hide-in-mobile"],[3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],["defaultDescription",""],["defaultCompleteBy",""],[3,"ngClass"],["type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange","change"],[4,"ngIf","ngIfElse"],[1,"uk-button-small","uk-button-primary","uk-margin-small-right",3,"routerLink"],[1,"uk-button-small","uk-button-danger",3,"routerLink"],[1,"description"],[1,"uk-table","uk-table-striped","uk-text-muted"],[4,"ngFor","ngForOf"],[1,"uk-button-small","uk-button-primary",3,"routerLink"]],template:function(r,i){1&r&&(I(0,"h1"),P(1,"All Tasks"),F(),I(2,"section")(3,"nav")(4,"a",0),P(5,"New Task"),F()()(),I(6,"section")(7,"table",1)(8,"thead")(9,"tr"),Un(10,"th"),I(11,"th"),P(12,"Name"),F(),I(13,"th",2),P(14,"Description"),F(),I(15,"th",2),P(16,"Importance"),F(),I(17,"th"),P(18,"Complete By"),F(),I(19,"th"),P(20,"Action"),F()()(),I(21,"tbody"),It(22,UHt,16,14,"tr",3),F()()(),It(23,WHt,20,1,"section",4),It(24,YHt,2,0,"ng-template",null,5,s8),It(26,XHt,2,0,"ng-template",null,6,s8)),2&r&&(X(22),de("ngForOf",i.incompleteTasks),X(1),de("ngIf",i.completedTasks.length>0))},dependencies:[IU,Ks,d8,Ri,Q0,Ti,Zr,o4],styles:[".overdue-task[_ngcontent-%COMP%]{color:#f5222d}@media screen and (max-width: 768px){.hide-in-mobile[_ngcontent-%COMP%]{display:none}}"]})}return e})();function QHt(e,t){if(1&e&&(I2(0),I(1,"option",19),P(2),F(),F2()),2&e){const n=t.$implicit;X(1),de("value",n.Id),X(1),R2(n.Name)}}let H5e=(()=>{class e{constructor(n,r,i){this.router=n,this.api=r,this.goalApi=i,this.model={Importance:1},this.goals$=new E2([])}ngOnInit(){this.goalApi.listGoals().pipe(tt(1)).subscribe(n=>this.goals$.next(n.data.map(r=>new ja(r))))}submitForm(){const n=new b4(this.model);n.Completed=!1,this.api.createTask(n).pipe(tt(1)).subscribe(()=>this.router.navigateByUrl("/tasks"))}updateImportance(n){this.model.Importance=parseInt(n.target.value,10)}updateCompleteBy(n){const r=new Date(n.target.value);this.model.CompleteBy=r.toLocaleDateString()}static#e=this.\u0275fac=function(r){return new(r||e)(q(mn),q(sf),q(qa))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-new-task-page"]],decls:33,vars:6,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","importance-input",1,"uk-form-label"],["id","importance-input","name","importance-input",1,"uk-input",3,"change"],["value","1","selected",""],["value","2"],["value","3"],["value","4"],["value","5"],["for","associated-goal",1,"uk-form-label"],["name","associated-goal","id","associated-goal",1,"uk-input",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"],[3,"value"]],template:function(r,i){1&r&&(I(0,"h1"),P(1,"New Task"),F(),I(2,"form",0,1)(4,"label",2),P(5,"Task Name"),F(),I(6,"input",3),Ae("ngModelChange",function(s){return i.model.Name=s}),F(),I(7,"label",4),P(8," Task Description "),F(),I(9,"textarea",5),Ae("ngModelChange",function(s){return i.model.Description=s}),F(),I(10,"label",6),P(11," Importance (low number = low importance; high number = high importance) "),F(),I(12,"select",7),Ae("change",function(s){return i.updateImportance(s)}),I(13,"option",8),P(14,"Low"),F(),I(15,"option",9),P(16,"Low-Medium"),F(),I(17,"option",10),P(18,"Medium"),F(),I(19,"option",11),P(20,"Medium-High"),F(),I(21,"option",12),P(22,"High"),F()(),I(23,"label",13),P(24,"Associated Goal"),F(),I(25,"select",14),Ae("ngModelChange",function(s){return i.model.Goal=s}),It(26,QHt,3,2,"ng-container",15),Ia(27,"async"),F(),I(28,"label",16),P(29,"Complete By"),F(),I(30,"input",17),Ae("change",function(s){return i.updateCompleteBy(s)}),F(),I(31,"button",18),Ae("click",function(){return i.submitForm()}),P(32," Add New Task "),F()()),2&r&&(X(6),de("ngModel",i.model.Name),X(3),de("ngModel",i.model.Description),X(16),de("ngModel",i.model.Goal),X(1),de("ngForOf",Fa(27,4,i.goals$)))},dependencies:[Ks,dc,J9,ep,ki,w8,Ti,fc,Zr,Pa,kw],encapsulation:2})}return e})(),S5e=(()=>{class e{constructor(n,r,i){this.api=n,this.route=r,this.goalApi=i}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");this.api.getTask(n).pipe(tt(1)).subscribe(r=>{this.model=new b4(r.data),this.goalApi.getGoal(this.model?.Goal).pipe(tt(1)).subscribe(i=>{this.goalModel=new ja(i.data)})})}static#e=this.\u0275fac=function(r){return new(r||e)(q(sf),q(w1),q(qa))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-task-page"]],decls:17,vars:13,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right",3,"routerLink"],[1,"uk-button-danger","uk-button",3,"routerLink"],[3,"routerLink"]],template:function(r,i){1&r&&(I(0,"h1"),P(1),F(),I(2,"button",0),P(3),F(),I(4,"button",1),P(5),F(),I(6,"p"),P(7),F(),I(8,"p"),P(9),F(),I(10,"p"),P(11),Ia(12,"date"),F(),I(13,"p"),P(14," Associated Goal: "),I(15,"a",2),P(16),F()()),2&r&&(X(1),N_(" Task: ",null==i.model?null:i.model.Name," (",null!=i.model&&i.model.Completed?"Completed":"Incomplete",")\n"),X(1),de("routerLink",null==i.model?null:i.model.EditUrl),X(1),Qe(" Edit: ",null==i.model?null:i.model.Name,"\n"),X(1),de("routerLink",null==i.model?null:i.model.DeleteUrl),X(1),Qe(" Delete: ",null==i.model?null:i.model.Name,"\n"),X(2),Qe(" ",null==i.model?null:i.model.Description,"\n"),X(2),Qe("Importance: ",null==i.model?null:i.model.ImportanceHuman,""),X(2),Qe("Complete By: ",Fa(12,11,null==i.model?null:i.model.CompleteBy),""),X(4),de("routerLink",null==i.goalModel?null:i.goalModel.ViewUrl),X(1),Qe(" ",null==i.goalModel?null:i.goalModel.Name," "))},dependencies:[Ri,o4],encapsulation:2})}return e})();class pb extends Rp{constructor(t){super(t)}get ViewUrl(){return["/logbook",this.Id]}get DeleteUrl(){return["/logbook",this.Id,"delete"]}}let mb=(()=>{class e extends d6{constructor(n){super(),this.http=n}getLogbooks(){if(tn.production){const n=gn("/logbooks");return this.http.get(n)}return console.debug("/logbook"),Ce({data:[{Id:"1",Name:"Fake Logbook Entry",Content:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api"},{Id:"1",Name:"Fake Logbook Entry",Content:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api"},{Id:"1",Name:"Fake Logbook Entry",Content:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api"},{Id:"1",Name:"Fake Logbook Entry",Content:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api"},{Id:"1",Name:"Fake Logbook Entry",Content:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api"}],message:"success"})}getLogbook(n){if(tn.production){const r=gn(`/logbooks/${n}`);return this.http.get(r)}return console.debug(n),Ce({data:{Id:"1",Name:"Fake Logbook Entry",Content:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api"},message:"success"})}createLogbook(n){if(tn.production){const r=gn("/logbooks");return this.http.post(r,n)}return console.debug(n),Ce({data:{Id:"1",Name:"Fake Logbook Entry",Content:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api"},message:"success"})}updateLogbook(n){if(tn.production){const r=gn(`/logbooks/${n.Id}`);return this.http.put(r,n)}return console.debug(n),Ce({data:{Id:"1",Name:"Fake Logbook Entry",Content:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api"},message:"success"})}deleteLogbook(n){if(tn.production){const r=gn(`/logbooks/${n}`);return this.http.delete(r)}return console.debug(n),Ce(void 0)}static#e=this.\u0275fac=function(r){return new(r||e)(ze(v8))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ZHt(e,t){if(1&e&&(I(0,"tr")(1,"td"),P(2),F(),I(3,"td"),P(4),Ia(5,"date"),F(),I(6,"td")(7,"a",3),P(8," View "),F(),I(9,"a",4),P(10," Delete "),F()()()),2&e){const n=t.$implicit;X(2),R2(n.Name),X(2),R2(Fa(5,4,n.CreatedAt)),X(3),de("routerLink",n.ViewUrl),X(2),de("routerLink",n.DeleteUrl)}}let E5e=(()=>{class e{constructor(n){this.api=n,this.logbooks=[]}ngOnInit(){this.api.getLogbooks().pipe(tt(1)).subscribe(n=>{this.logbooks=n.data.map(r=>new pb(r))})}static#e=this.\u0275fac=function(r){return new(r||e)(q(mb))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-list"]],decls:18,vars:1,consts:[["routerLink","/logbook/new",1,"uk-button","uk-button-default"],[1,"uk-table"],[4,"ngFor","ngForOf"],[1,"uk-button-small","uk-button-primary","uk-margin-small-right",3,"routerLink"],[1,"uk-button-small","uk-button-danger",3,"routerLink"]],template:function(r,i){1&r&&(I(0,"h1"),P(1,"Logbook Entries"),F(),I(2,"section")(3,"nav")(4,"a",0),P(5,"New Entry"),F()()(),I(6,"section")(7,"table",1)(8,"thead")(9,"tr")(10,"th"),P(11,"Name"),F(),I(12,"th"),P(13,"Created At"),F(),I(14,"th"),P(15,"Action"),F()()(),I(16,"tbody"),It(17,ZHt,11,6,"tr",2),F()()()),2&r&&(X(17),de("ngForOf",i.logbooks))},dependencies:[Ks,Ri,o4]})}return e})(),V5e=(()=>{class e{constructor(n,r){this.router=n,this.api=r,this.model={CreatedAt:(new Date).toLocaleDateString()}}submitForm(){const n=new pb(this.model);this.api.createLogbook(n).subscribe(()=>this.router.navigateByUrl("/logbook"))}static#e=this.\u0275fac=function(r){return new(r||e)(q(mn),q(mb))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-new"]],decls:12,vars:2,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","20",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(r,i){1&r&&(I(0,"h1"),P(1,"New Task"),F(),I(2,"form",0,1)(4,"label",2),P(5,"Task Name"),F(),I(6,"input",3),Ae("ngModelChange",function(s){return i.model.Name=s}),F(),I(7,"label",4),P(8," Content "),F(),I(9,"textarea",5),Ae("ngModelChange",function(s){return i.model.Content=s}),F(),I(10,"button",6),Ae("click",function(){return i.submitForm()}),P(11," Add Logbook Entry "),F()()),2&r&&(X(6),de("ngModel",i.model.Name),X(3),de("ngModel",i.model.Content))},dependencies:[dc,ki,Ti,fc,Zr,Pa]})}return e})(),D5e=(()=>{class e{constructor(n,r){this.api=n,this.route=r}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");this.api.getLogbook(n).pipe(tt(1)).subscribe(r=>{this.model=new pb(r.data)})}static#e=this.\u0275fac=function(r){return new(r||e)(q(mb),q(w1))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-show"]],decls:7,vars:5,consts:[[1,"uk-text-default"]],template:function(r,i){1&r&&(I(0,"h1"),P(1),F(),I(2,"span",0),P(3),Ia(4,"date"),F(),I(5,"pre"),P(6),F()),2&r&&(X(1),Qe("Task: ",null==i.model?null:i.model.Name,""),X(2),Qe("Created: ",Fa(4,3,null==i.model?null:i.model.CreatedAt),""),X(3),Qe("    ",null==i.model?null:i.model.Content,"\n"))},dependencies:[o4]})}return e})(),L5e=(()=>{class e{constructor(n,r,i){this.api=n,this.route=r,this.router=i}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");this.api.getLogbook(n).pipe(tt(1)).subscribe(r=>{this.model=new pb(r.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteLogbook(this.model?.Id).pipe(tt(1)).subscribe(()=>this.router.navigateByUrl("/logbook"))}static#e=this.\u0275fac=function(r){return new(r||e)(q(mb),q(w1),q(mn))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-delete"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(r,i){1&r&&(I(0,"h1"),P(1),F(),I(2,"p"),P(3," Deleting this model will make it unrecoverable.\n"),F(),I(4,"button",0),Ae("click",function(){return i.deleteModel()}),P(5),F()),2&r&&(X(1),Qe("Delete ",null==i.model?null:i.model.Name,"?"),X(4),Qe(" Delete ",null==i.model?null:i.model.Name,"\n"))}})}return e})(),A5e=(()=>{class e{constructor(n,r,i){this.api=n,this.route=r,this.router=i,this.model={}}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");this.api.getGoal(n).pipe(tt(1)).subscribe(r=>{this.model=r.data})}submitForm(){const n=new ja(this.model);this.api.updateGoal(n).pipe(tt(1)).subscribe(()=>this.router.navigateByUrl("/goals"))}updateCompleteBy(n){const r=new Date(n.target.value);this.model.CompleteBy=r.toLocaleDateString()}static#e=this.\u0275fac=function(r){return new(r||e)(q(qa),q(w1),q(mn))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-update"]],decls:15,vars:4,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"value","change"],["type","submit",1,"uk-button","uk-button-secondary","uk-margin-top",3,"click"]],template:function(r,i){1&r&&(I(0,"h1"),P(1),F(),I(2,"form",0,1)(4,"label",2),P(5,"Goal Name"),F(),I(6,"input",3),Ae("ngModelChange",function(s){return i.model.Name=s}),F(),I(7,"label",4),P(8," Goal Description "),F(),I(9,"textarea",5),Ae("ngModelChange",function(s){return i.model.Description=s}),F(),I(10,"label",6),P(11,"Complete By"),F(),I(12,"input",7),Ae("change",function(s){return i.updateCompleteBy(s)}),F(),I(13,"button",8),Ae("click",function(){return i.submitForm()}),P(14," Update Goal "),F()()),2&r&&(X(1),Qe("Edit: ",i.model.Name,""),X(5),de("ngModel",i.model.Name),X(3),de("ngModel",i.model.Description),X(3),de("value",i.model.CompleteBy))},dependencies:[dc,ki,Ti,fc,Zr,Pa]})}return e})(),N5e=(()=>{class e{constructor(n,r,i){this.api=n,this.route=r,this.router=i,this.model={}}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");this.api.getHabit(n).pipe(tt(1)).subscribe(r=>{this.model=r.data})}submitForm(){const n=new Cc(this.model);this.api.updateHabit(n).pipe(tt(1)).subscribe(()=>this.router.navigateByUrl("/"))}static#e=this.\u0275fac=function(r){return new(r||e)(q(h6),q(w1),q(mn))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-update"]],decls:16,vars:3,consts:[["action",""],["ngForm",""],["for","new-habit-input",1,"uk-form-label"],["id","new-habit-input","name","new-habit-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-habit-description",1,"uk-form-label"],["id","new-habit-description","name","new-habit-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","checkbox","name","anti-habit","id","anti-habit",1,"uk-checkbox",3,"ngModel","ngModelChange"],["for","anti-habit",1,"uk-form-label"],["type","submit",1,"uk-button","uk-button-secondary","uk-margin-top",3,"click"]],template:function(r,i){1&r&&(I(0,"p"),P(1,"update works!"),F(),I(2,"form",0,1)(4,"label",2),P(5,"Habit Name"),F(),I(6,"input",3),Ae("ngModelChange",function(s){return i.model.Name=s}),F(),I(7,"label",4),P(8," Habit Description "),F(),I(9,"textarea",5),Ae("ngModelChange",function(s){return i.model.Description=s}),F(),I(10,"input",6),Ae("ngModelChange",function(s){return i.model.AntiHabit=s}),F(),I(11,"label",7),P(12,"Anti Habit"),F(),I(13,"div")(14,"button",8),Ae("click",function(){return i.submitForm()}),P(15," Update Habit "),F()()()),2&r&&(X(6),de("ngModel",i.model.Name),X(3),de("ngModel",i.model.Description),X(1),de("ngModel",i.model.AntiHabit))},dependencies:[dc,ki,Q0,Ti,fc,Zr,Pa]})}return e})(),k5e=(()=>{class e{constructor(n,r,i){this.api=n,this.route=r,this.router=i,this.model={}}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");this.api.getTask(n).pipe(tt(1)).subscribe(r=>{this.model=r.data})}submitForm(){const n=new b4(this.model);this.api.updateTask(n).pipe(tt(1)).subscribe(()=>this.router.navigateByUrl("/tasks"))}updateImportance(n){this.model.Importance=parseInt(n.target.value,10)}updateCompleteBy(n){const r=new Date(n.target.value);this.model.CompleteBy=r.toLocaleDateString()}static#e=this.\u0275fac=function(r){return new(r||e)(q(sf),q(w1),q(mn))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-update"]],decls:28,vars:3,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","importance-input",1,"uk-form-label"],["id","importance-input","name","importance-input",1,"uk-input",3,"change"],["value","1","selected",""],["value","2"],["value","3"],["value","4"],["value","5"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-secondary","uk-margin-top",3,"click"]],template:function(r,i){1&r&&(I(0,"h1"),P(1),F(),I(2,"form",0,1)(4,"label",2),P(5,"Task Name"),F(),I(6,"input",3),Ae("ngModelChange",function(s){return i.model.Name=s}),F(),I(7,"label",4),P(8," Task Description "),F(),I(9,"textarea",5),Ae("ngModelChange",function(s){return i.model.Description=s}),F(),I(10,"label",6),P(11," Importance (low number = low importance; high number = high importance) "),F(),I(12,"select",7),Ae("change",function(s){return i.updateImportance(s)}),I(13,"option",8),P(14,"Low"),F(),I(15,"option",9),P(16,"Low-Medium"),F(),I(17,"option",10),P(18,"Medium"),F(),I(19,"option",11),P(20,"Medium-High"),F(),I(21,"option",12),P(22,"High"),F()(),I(23,"label",13),P(24,"Complete By"),F(),I(25,"input",14),Ae("change",function(s){return i.updateCompleteBy(s)}),F(),I(26,"button",15),Ae("click",function(){return i.submitForm()}),P(27," Update Task "),F()()),2&r&&(X(1),Qe("Edit: ",i.model.Name,""),X(5),de("ngModel",i.model.Name),X(3),de("ngModel",i.model.Description))},dependencies:[dc,J9,ep,ki,Ti,fc,Zr,Pa]})}return e})(),T5e=(()=>{class e{constructor(n){this.configService=n,this.customServerUrl=this.configService.getCustomServerUrl()??"",this.formFeedback=""}saveCustomServerUrl(){this.customServerUrl?(this.configService.setCustomServerUrl(this.customServerUrl),this.formFeedback="Custom server URL saved!"):this.formFeedback="Please enter a valid server URL."}clearCustomServerUrl(){this.customServerUrl="",this.configService.clearCustomServerUrl(),this.formFeedback="Custom server URL cleared!"}static#e=this.\u0275fac=function(r){return new(r||e)(q(hz))};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-configure"]],decls:28,vars:2,consts:[["href","https://github.com/hudson-newey/habit-tracker/tree/main/server"],["href","https://github.com/hudson-newey/habit-tracker"],["type","text","placeholder","Server URL",1,"uk-input",3,"ngModel","ngModelChange"],[1,"action-buttons"],["id","save-server-button",1,"uk-button","uk-button-primary",3,"click"],["id","remove-server-button",1,"uk-button","uk-button-danger",3,"click"],[1,"uk-text-secondary"]],template:function(r,i){1&r&&(I(0,"h1"),P(1,"Configure"),F(),I(2,"p"),P(3," This web app is intended to be used with the GoLang API found "),I(4,"a",0),P(5,"on GitHub"),F(),P(6,".\n"),F(),I(7,"p"),P(8," It is possible to use this app without the API, but you will not be able to sync your Todo items and Habits between devices.\n"),F(),I(9,"p"),P(10," You are free to use this GitHub pages hosted version of the application with your own hosted server (or without) by inputting the custom URL below, or you can host your own instance of the server, client and mobile application using the code available "),I(11,"a",1),P(12,"here"),F(),P(13,".\n"),F(),I(14,"section")(15,"h2"),P(16,"Custom Server URL"),F(),I(17,"p"),P(18," If you are using a custom server, please input the URL below. If you are using the habit tracker without device syncing, you can leave this blank. "),F(),I(19,"input",2),Ae("ngModelChange",function(s){return i.customServerUrl=s}),F(),I(20,"div",3)(21,"button",4),Ae("click",function(){return i.saveCustomServerUrl()}),P(22," Save "),F(),I(23,"button",5),Ae("click",function(){return i.clearCustomServerUrl()}),P(24," Remove Server "),F()(),Un(25,"div"),I(26,"p",6),P(27),F()()),2&r&&(X(19),de("ngModel",i.customServerUrl),X(8),R2(i.formFeedback))},dependencies:[ki,Ti,Zr],styles:[".action-buttons[_ngcontent-%COMP%]{margin-top:.5rem}.action-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:.5rem}"]})}return e})();const KHt=[{path:"goals",component:qW},{path:"goals/new",component:GW},{path:"goals/:id",component:jW},{path:"goals/:id/delete",component:UW},{path:"goals/:id/edit",component:A5e},{path:"",component:M5e},{path:"habits/new",component:_5e},{path:"habits/:id",component:b5e},{path:"habits/:id/delete",component:WW},{path:"habits/:id/edit",component:N5e},{path:"tasks",component:z5e},{path:"tasks/new",component:H5e},{path:"tasks/:id",component:S5e},{path:"tasks/:id/delete",component:x5e},{path:"tasks/:id/edit",component:k5e},{path:"logbook",component:E5e},{path:"logbook/new",component:V5e},{path:"logbook/:id",component:D5e},{path:"logbook/:id/delete",component:L5e},{path:"schedule",component:w5e},{path:"configure",component:T5e}];let JHt=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=jr({type:e});static#n=this.\u0275inj=ur({imports:[$W.forRoot(KHt),$W]})}return e})();const eSt=function(){return{exact:!0}},Bd=function(){return["uk-active"]};let I5e=(()=>{class e{constructor(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-navbar"]],decls:22,vars:12,consts:[[1,"uk-navbar-container","navbar-container"],[1,"uk-container","navbar-container"],[1,"uk-navbar-left"],[1,"uk-nav-primary","hide-in-mobile"],[1,"uk-navbar-nav"],[3,"routerLinkActiveOptions","routerLinkActive"],["routerLink","/",1,"uk-link","uk-navbar-item"],[3,"routerLinkActive"],["routerLink","/goals",1,"uk-link","uk-navbar-item"],["routerLink","/tasks",1,"uk-link","uk-navbar-item"],["routerLink","/logbook",1,"uk-link","uk-navbar-item"],[1,"navbar-right","hide-in-mobile"],["routerLink","/configure",1,"uk-link-muted","uk-navbar-item"]],template:function(r,i){1&r&&(I(0,"nav",0)(1,"div",1)(2,"div",2)(3,"strong",3),P(4,"Goal Tracker"),F(),I(5,"ul",4)(6,"li",5)(7,"a",6),P(8,"Habits"),F()(),I(9,"li",7)(10,"a",8),P(11,"Goals"),F()(),I(12,"li",7)(13,"a",9),P(14,"Tasks"),F()(),I(15,"li",7)(16,"a",10),P(17,"Logbook"),F()(),I(18,"span",11)(19,"li",7)(20,"a",12),P(21,"Configure Server"),F()()()()()()()),2&r&&(X(6),de("routerLinkActiveOptions",Gs(6,eSt))("routerLinkActive",Gs(7,Bd)),X(3),de("routerLinkActive",Gs(8,Bd)),X(3),de("routerLinkActive",Gs(9,Bd)),X(3),de("routerLinkActive",Gs(10,Bd)),X(4),de("routerLinkActive",Gs(11,Bd)))},dependencies:[Ri,NW],styles:[".navbar-right[_ngcontent-%COMP%]{position:absolute;right:5em}@media screen and (max-width: 768px){.hide-in-mobile[_ngcontent-%COMP%]{display:none}}"]})}return e})(),tSt=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=kt({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"main-content"]],template:function(r,i){1&r&&(Un(0,"app-navbar"),I(1,"div",0),Un(2,"router-outlet"),F())},dependencies:[iz,I5e],styles:[".main-content[_ngcontent-%COMP%]{position:relative;margin:auto;width:60%;margin-top:2rem}@media screen and (max-width: 768px){.main-content[_ngcontent-%COMP%]{width:calc(100% - 2.4rem);margin-left:1.2rem}}"]})}return e})(),F5e=(()=>{class e extends d6{constructor(){super()}applyApiRequest(n){const r=n.url.split("/")[1],i=Number(n.url.split("/")[2]),a=n.body;null===localStorage.getItem(r)&&localStorage.setItem(r,"[]");const s=this.tableValue(r);if("GET"===n.method&&i){if("goals"===r&&n.url.split("/").length>3){const c=n.url.split("/")[3],l=this.tableValue(c).filter(u=>u.Goal=i);return console.log(l),l}return s.find(c=>c.Id===i)}if("POST"===n.method){const c=JSON.parse(JSON.stringify(a));c.Id=this.nextTableId(r),s.push(c),localStorage.setItem(r,JSON.stringify(s))}if("DELETE"===n.method){const c=s.findIndex(l=>l.Id===i);s.splice(c,1),localStorage.setItem(r,JSON.stringify(s))}if("PUT"===n.method){const c=s.findIndex(l=>l.Id===i);s[c]=a,localStorage.setItem(r,JSON.stringify(s))}return this.tableValue(r)}tableValue(n){return JSON.parse(localStorage.getItem(n))??[]}nextTableId(n){const r=this.tableValue(n);return 0===r.length?1:Math.max(...r.map(i=>Number(i.Id)))+1}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),rSt=(()=>{class e{constructor(n,r){this.config=n,this.virtualDb=r}intercept(n,r){if(this.config.isCustomServerUrlSet())return r.handle(n);const i=this.virtualDb.applyApiRequest(n);return Ce(new c4({status:200,body:{data:i}}))}static#e=this.\u0275fac=function(r){return new(r||e)(ze(hz),ze(F5e))};static#t=this.\u0275prov=xe({token:e,factory:e.\u0275fac})}return e})();const iSt=[h6,qa,sf,hz,F5e];let aSt=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=jr({type:e,bootstrap:[tSt]});static#n=this.\u0275inj=ur({providers:[{provide:wj,useClass:rSt,multi:!0},...iSt],imports:[BU,J_e,JHt,Txe,Ewe,SHe]})}return e})();Z_e().bootstrapModule(aSt).catch(e=>console.error(e))},829:cf=>{var Ud=/("(?:[^\\"]|\\.)*")|[:,]/g;cf.exports=function(T3,bi){var jo,Xl,qo;return bi=bi||{},jo=JSON.stringify([1],void 0,void 0===bi.indent?2:bi.indent).slice(2,-3),Xl=""===jo?1/0:void 0===bi.maxLength?80:bi.maxLength,qo=bi.replacer,function Ql(g1,I3,lf){var F3,sr,ks,R3,O3,P3,or,Go,At,$3,Mi,B3;if(g1&&"function"==typeof g1.toJSON&&(g1=g1.toJSON()),void 0===(Mi=JSON.stringify(g1,qo)))return Mi;if(Mi.length<=(or=Xl-I3.length-lf)&&(At=Mi.replace(Ud,function(K1,jd){return jd||K1+" "})).length<=or)return At;if(null!=qo&&(g1=JSON.parse(Mi),qo=void 0),"object"==typeof g1&&null!==g1){if(Go=I3+jo,ks=[],sr=0,Array.isArray(g1))for($3="[",F3="]",or=g1.length;sr<or;sr++)ks.push(Ql(g1[sr],Go,sr===or-1?0:1)||"null");else for($3="{",F3="}",or=(P3=Object.keys(g1)).length;sr<or;sr++)R3=P3[sr],O3=JSON.stringify(R3)+": ",void 0!==(B3=Ql(g1[R3],Go,O3.length+(sr===or-1?0:1)))&&ks.push(O3+B3);if(ks.length>0)return[$3,jo+ks.join(",\n"+Go),F3].join("\n"+I3)}return Mi}(T3,"",0)}}},cf=>{cf(cf.s=538)}]);