var Zae=Object.create;var Zh=Object.defineProperty,Jae=Object.defineProperties,ese=Object.getOwnPropertyDescriptor,tse=Object.getOwnPropertyDescriptors,nse=Object.getOwnPropertyNames,Kh=Object.getOwnPropertySymbols,rse=Object.getPrototypeOf,Aw=Object.prototype.hasOwnProperty,oO=Object.prototype.propertyIsEnumerable;var Lw=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e);var iO=(e,t,n)=>t in e?Zh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x=(e,t)=>{for(var n in t||={})Aw.call(t,n)&&iO(e,n,t[n]);if(Kh)for(var n of Kh(t))oO.call(t,n)&&iO(e,n,t[n]);return e},k=(e,t)=>Jae(e,tse(t));var R4=e=>typeof e=="symbol"?e:e+"",ie=(e,t)=>{var n={};for(var r in e)Aw.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Kh)for(var r of Kh(e))t.indexOf(r)<0&&oO.call(e,r)&&(n[r]=e[r]);return n};var ise=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),br=(e,t)=>{for(var n in t)Zh(e,n,{get:t[n],enumerable:!0})},ose=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of nse(t))!Aw.call(e,i)&&i!==n&&Zh(e,i,{get:()=>t[i],enumerable:!(r=ese(t,i))||r.enumerable});return e};var ase=(e,t,n)=>(n=e!=null?Zae(rse(e)):{},ose(t||!e||!e.__esModule?Zh(n,"default",{value:e,enumerable:!0}):n,e));var Gt=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{s(n.next(c))}catch(l){i(l)}},a=c=>{try{s(n.throw(c))}catch(l){i(l)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);s((n=n.apply(e,t)).next())}),sse=function(e,t){this[0]=e,this[1]=t};var aO=e=>{var t=e[Lw("asyncIterator")],n=!1,r,i={};return t==null?(t=e[Lw("iterator")](),r=o=>i[o]=a=>t[o](a)):(t=t.call(e),r=o=>i[o]=a=>{if(n){if(n=!1,o==="throw")throw a;return a}return n=!0,{done:!1,value:new sse(new Promise(s=>{var c=t[o](a);if(!(c instanceof Object))throw TypeError("Object expected");s(c)}),1)}}),i[Lw("iterator")]=()=>i,r("next"),"throw"in t?r("throw"):i.throw=o=>{throw o},"return"in t&&r("return"),i};var cG=ise((dXe,sG)=>{"use strict";var F7e=/("(?:[^\\"]|\\.)*")|[:,]/g;sG.exports=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function a(s,c,l){var u,f,d,p,h,m,g,v,y,C,b,M;if(s&&typeof s.toJSON=="function"&&(s=s.toJSON()),b=JSON.stringify(s,o),b===void 0)return b;if(g=i-c.length-l,b.length<=g&&(y=b.replace(F7e,function(S,w){return w||S+" "}),y.length<=g))return y;if(o!=null&&(s=JSON.parse(b),o=void 0),typeof s=="object"&&s!==null){if(v=c+r,d=[],f=0,Array.isArray(s))for(C="[",u="]",g=s.length;f<g;f++)d.push(a(s[f],v,f===g-1?0:1)||"null");else for(C="{",u="}",m=Object.keys(s),g=m.length;f<g;f++)p=m[f],h=JSON.stringify(p)+": ",M=a(s[p],v,h.length+(f===g-1?0:1)),M!==void 0&&d.push(h+M);if(d.length>0)return[C,r+d.join(`,
`+v),u].join(`
`+c)}return b}(t,"",0)}});var sO=null;var Vw=1,Nw=Symbol("SIGNAL");function qr(e){let t=sO;return sO=e,t}var cO={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function cse(e){if(!(Tw(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Vw)){if(!e.producerMustRecompute(e)&&!_w(e)){e.dirty=!1,e.lastCleanEpoch=Vw;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Vw}}function lO(e){return e&&(e.nextProducerIndex=0),qr(e)}function uO(e,t){if(qr(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Tw(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)kw(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function _w(e){Jh(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(cse(n),r!==n.version))return!0}return!1}function fO(e){if(Jh(e),Tw(e))for(let t=0;t<e.producerNode.length;t++)kw(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function kw(e,t){if(lse(e),Jh(e),e.liveConsumerNode.length===1)for(let r=0;r<e.producerNode.length;r++)kw(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Jh(i),i.producerIndexOfThis[r]=t}}function Tw(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Jh(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function lse(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function use(){throw new Error}var fse=use;function dO(e){fse=e}function qe(e){return typeof e=="function"}function Y0(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var em=Y0(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function _8(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var lr=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(qe(r))try{r()}catch(o){t=o instanceof em?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{pO(o)}catch(a){t=t??[],a instanceof em?t=[...t,...a.errors]:t.push(a)}}if(t)throw new em(t)}}add(t){var n;if(t&&t!==this)if(this.closed)pO(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&_8(n,t)}remove(t){let{_finalizers:n}=this;n&&_8(n,t),t instanceof e&&t._removeParent(this)}};lr.EMPTY=(()=>{let e=new lr;return e.closed=!0,e})();var Iw=lr.EMPTY;function tm(e){return e instanceof lr||e&&"closed"in e&&qe(e.remove)&&qe(e.add)&&qe(e.unsubscribe)}function pO(e){qe(e)?e():e.unsubscribe()}var v2={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var X0={setTimeout(e,t,...n){let{delegate:r}=X0;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=X0;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function nm(e){X0.setTimeout(()=>{let{onUnhandledError:t}=v2;if(t)t(e);else throw e})}function k8(){}var hO=Fw("C",void 0,void 0);function mO(e){return Fw("E",void 0,e)}function gO(e){return Fw("N",e,void 0)}function Fw(e,t,n){return{kind:e,value:t,error:n}}var O4=null;function Q0(e){if(v2.useDeprecatedSynchronousErrorHandling){let t=!O4;if(t&&(O4={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=O4;if(O4=null,n)throw r}}else e()}function vO(e){v2.useDeprecatedSynchronousErrorHandling&&O4&&(O4.errorThrown=!0,O4.error=e)}var P4=class extends lr{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,tm(t)&&t.add(this)):this.destination=hse}static create(t,n,r){return new K0(t,n,r)}next(t){this.isStopped?Ow(gO(t),this):this._next(t)}error(t){this.isStopped?Ow(mO(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Ow(hO,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},dse=Function.prototype.bind;function Rw(e,t){return dse.call(e,t)}var Pw=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){rm(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){rm(r)}else rm(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){rm(n)}}},K0=class extends P4{constructor(t,n,r){super();let i;if(qe(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&v2.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Rw(t.next,o),error:t.error&&Rw(t.error,o),complete:t.complete&&Rw(t.complete,o)}):i=t}this.destination=new Pw(i)}};function rm(e){v2.useDeprecatedSynchronousErrorHandling?vO(e):nm(e)}function pse(e){throw e}function Ow(e,t){let{onStoppedNotification:n}=v2;n&&X0.setTimeout(()=>n(e,t))}var hse={closed:!0,next:k8,error:pse,complete:k8};var Z0=typeof Symbol=="function"&&Symbol.observable||"@@observable";function J1(e){return e}function $w(...e){return Bw(e)}function Bw(e){return e.length===0?J1:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var Mt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=gse(n)?n:new K0(n,r,i);return Q0(()=>{let{operator:a,source:s}=this;o.add(a?a.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=yO(r),new r((i,o)=>{let a=new K0({next:s=>{try{n(s)}catch(c){o(c),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Z0](){return this}pipe(...n){return Bw(n)(this)}toPromise(n){return n=yO(n),new n((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return e.create=t=>new e(t),e})();function yO(e){var t;return(t=e??v2.Promise)!==null&&t!==void 0?t:Promise}function mse(e){return e&&qe(e.next)&&qe(e.error)&&qe(e.complete)}function gse(e){return e&&e instanceof P4||mse(e)&&tm(e)}function Uw(e){return qe(e?.lift)}function dt(e){return t=>{if(Uw(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ct(e,t,n,r,i){return new jw(e,t,n,r,i)}var jw=class extends P4{constructor(t,n,r,i,o,a){super(t),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(s){try{n(s)}catch(c){t.error(c)}}:super._next,this._error=i?function(s){try{i(s)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(s){t.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function J0(){return dt((e,t)=>{let n=null;e._refCount++;let r=ct(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var e6=class extends Mt{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Uw(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new lr;let n=this.getSubject();t.add(this.source.subscribe(ct(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=lr.EMPTY)}return t}refCount(){return J0()(this)}};var xO=Y0(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var v1=(()=>{class e extends Mt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new im(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new xO}next(n){Q0(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Q0(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Q0(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Iw:(this.currentObservers=null,o.push(n),new lr(()=>{this.currentObservers=null,_8(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Mt;return n.source=this,n}}return e.create=(t,n)=>new im(t,n),e})(),im=class extends v1{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Iw}};var Pn=class extends v1{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Lo=new Mt(e=>e.complete());function CO(e){return e&&qe(e.schedule)}function bO(e){return e[e.length-1]}function om(e){return qe(bO(e))?e.pop():void 0}function e3(e){return CO(bO(e))?e.pop():void 0}function wO(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(e,t||[])).next())})}function MO(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $4(e){return this instanceof $4?(this.v=e,this):new $4(e)}function SO(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(d){r[d]&&(i[d]=function(p){return new Promise(function(h,m){o.push([d,p,h,m])>1||s(d,p)})})}function s(d,p){try{c(r[d](p))}catch(h){f(o[0][3],h)}}function c(d){d.value instanceof $4?Promise.resolve(d.value.v).then(l,u):f(o[0][2],d)}function l(d){s("next",d)}function u(d){s("throw",d)}function f(d,p){d(p),o.shift(),o.length&&s(o[0][0],o[0][1])}}function EO(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof MO=="function"?MO(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(s,c){a=e[o](a),i(s,c,a.done,a.value)})}}function i(o,a,s,c){Promise.resolve(c).then(function(l){o({value:l,done:s})},a)}}var am=e=>e&&typeof e.length=="number"&&typeof e!="function";function sm(e){return qe(e?.then)}function cm(e){return qe(e[Z0])}function lm(e){return Symbol.asyncIterator&&qe(e?.[Symbol.asyncIterator])}function um(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function vse(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var fm=vse();function dm(e){return qe(e?.[fm])}function pm(e){return SO(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield $4(n.read());if(i)return yield $4(void 0);yield yield $4(r)}}finally{n.releaseLock()}})}function hm(e){return qe(e?.getReader)}function Xn(e){if(e instanceof Mt)return e;if(e!=null){if(cm(e))return yse(e);if(am(e))return xse(e);if(sm(e))return Cse(e);if(lm(e))return DO(e);if(dm(e))return bse(e);if(hm(e))return Mse(e)}throw um(e)}function yse(e){return new Mt(t=>{let n=e[Z0]();if(qe(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function xse(e){return new Mt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Cse(e){return new Mt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,nm)})}function bse(e){return new Mt(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function DO(e){return new Mt(t=>{wse(e,t).catch(n=>t.error(n))})}function Mse(e){return DO(pm(e))}function wse(e,t){var n,r,i,o;return wO(this,void 0,void 0,function*(){try{for(n=EO(e);r=yield n.next(),!r.done;){let a=r.value;if(t.next(a),t.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function y1(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function mm(e,t=0){return dt((n,r)=>{n.subscribe(ct(r,i=>y1(r,e,()=>r.next(i),t),()=>y1(r,e,()=>r.complete(),t),i=>y1(r,e,()=>r.error(i),t)))})}function gm(e,t=0){return dt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function zO(e,t){return Xn(e).pipe(gm(t),mm(t))}function HO(e,t){return Xn(e).pipe(gm(t),mm(t))}function LO(e,t){return new Mt(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function AO(e,t){return new Mt(n=>{let r;return y1(n,t,()=>{r=e[fm](),y1(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){n.error(a);return}o?n.complete():n.next(i)},0,!0)}),()=>qe(r?.return)&&r.return()})}function vm(e,t){if(!e)throw new Error("Iterable cannot be null");return new Mt(n=>{y1(n,t,()=>{let r=e[Symbol.asyncIterator]();y1(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function VO(e,t){return vm(pm(e),t)}function NO(e,t){if(e!=null){if(cm(e))return zO(e,t);if(am(e))return LO(e,t);if(sm(e))return HO(e,t);if(lm(e))return vm(e,t);if(dm(e))return AO(e,t);if(hm(e))return VO(e,t)}throw um(e)}function tn(e,t){return t?NO(e,t):Xn(e)}function se(...e){let t=e3(e);return tn(e,t)}function t6(e,t){let n=qe(e)?e:()=>e,r=i=>i.error(n());return new Mt(t?i=>t.schedule(r,0,i):r)}function qw(e){return!!e&&(e instanceof Mt||qe(e.lift)&&qe(e.subscribe))}var Ls=Y0(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Ke(e,t){return dt((n,r)=>{let i=0;n.subscribe(ct(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:Sse}=Array;function Ese(e,t){return Sse(t)?e(...t):e(t)}function ym(e){return Ke(t=>Ese(e,t))}var{isArray:Dse}=Array,{getPrototypeOf:zse,prototype:Hse,keys:Lse}=Object;function xm(e){if(e.length===1){let t=e[0];if(Dse(t))return{args:t,keys:null};if(Ase(t)){let n=Lse(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function Ase(e){return e&&typeof e=="object"&&zse(e)===Hse}function Cm(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function T8(...e){let t=e3(e),n=om(e),{args:r,keys:i}=xm(e);if(r.length===0)return tn([],t);let o=new Mt(Vse(r,t,i?a=>Cm(i,a):J1));return n?o.pipe(ym(n)):o}function Vse(e,t,n=J1){return r=>{_O(t,()=>{let{length:i}=e,o=new Array(i),a=i,s=i;for(let c=0;c<i;c++)_O(t,()=>{let l=tn(e[c],t),u=!1;l.subscribe(ct(r,f=>{o[c]=f,u||(u=!0,s--),s||r.next(n(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function _O(e,t,n){e?y1(n,e,t):t()}function kO(e,t,n,r,i,o,a,s){let c=[],l=0,u=0,f=!1,d=()=>{f&&!c.length&&!l&&t.complete()},p=m=>l<r?h(m):c.push(m),h=m=>{o&&t.next(m),l++;let g=!1;Xn(n(m,u++)).subscribe(ct(t,v=>{i?.(v),o?p(v):t.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<r;){let v=c.shift();a?y1(t,a,()=>h(v)):h(v)}d()}catch(v){t.error(v)}}))};return e.subscribe(ct(t,p,()=>{f=!0,d()})),()=>{s?.()}}function Qn(e,t,n=1/0){return qe(t)?Qn((r,i)=>Ke((o,a)=>t(r,o,i,a))(Xn(e(r,i))),n):(typeof t=="number"&&(n=t),dt((r,i)=>kO(r,i,e,n)))}function t3(e=1/0){return Qn(J1,e)}function TO(){return t3(1)}function n6(...e){return TO()(tn(e,e3(e)))}function bm(e){return new Mt(t=>{Xn(e()).subscribe(t)})}function Gw(...e){let t=om(e),{args:n,keys:r}=xm(e),i=new Mt(o=>{let{length:a}=n;if(!a){o.complete();return}let s=new Array(a),c=a,l=a;for(let u=0;u<a;u++){let f=!1;Xn(n[u]).subscribe(ct(o,d=>{f||(f=!0,l--),s[u]=d},()=>c--,void 0,()=>{(!c||!f)&&(l||o.next(r?Cm(r,s):s),o.complete())}))}});return t?i.pipe(ym(t)):i}function x1(e,t){return dt((n,r)=>{let i=0;n.subscribe(ct(r,o=>e.call(t,o,i++)&&r.next(o)))})}function n3(e){return dt((t,n)=>{let r=null,i=!1,o;r=t.subscribe(ct(n,void 0,void 0,a=>{o=Xn(e(a,n3(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function IO(e,t,n,r,i){return(o,a)=>{let s=n,c=t,l=0;o.subscribe(ct(a,u=>{let f=l++;c=s?e(c,u,f):(s=!0,u),r&&a.next(c)},i&&(()=>{s&&a.next(c),a.complete()})))}}function As(e,t){return qe(t)?Qn(e,t,1):Qn(e,1)}function r3(e){return dt((t,n)=>{let r=!1;t.subscribe(ct(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function be(e){return e<=0?()=>Lo:dt((t,n)=>{let r=0;t.subscribe(ct(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Ww(e){return Ke(()=>e)}function Mm(e=Nse){return dt((t,n)=>{let r=!1;t.subscribe(ct(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function Nse(){return new Ls}function i3(e){return dt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function xa(e,t){let n=arguments.length>=2;return r=>r.pipe(e?x1((i,o)=>e(i,o,r)):J1,be(1),n?r3(t):Mm(()=>new Ls))}function r6(e){return e<=0?()=>Lo:dt((t,n)=>{let r=[];t.subscribe(ct(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Yw(e,t){let n=arguments.length>=2;return r=>r.pipe(e?x1((i,o)=>e(i,o,r)):J1,r6(1),n?r3(t):Mm(()=>new Ls))}function Xw(e,t){return dt(IO(e,t,arguments.length>=2,!0))}function Qw(...e){let t=e3(e);return dt((n,r)=>{(t?n6(e,n,t):n6(e,n)).subscribe(r)})}function C1(e,t){return dt((n,r)=>{let i=null,o=0,a=!1,s=()=>a&&!i&&r.complete();n.subscribe(ct(r,c=>{i?.unsubscribe();let l=0,u=o++;Xn(e(c,u)).subscribe(i=ct(r,f=>r.next(t?t(c,f,u,l++):f),()=>{i=null,s()}))},()=>{a=!0,s()}))})}function Kw(e){return dt((t,n)=>{Xn(e).subscribe(ct(n,()=>n.complete(),k8)),!n.closed&&t.subscribe(n)})}function ur(e,t,n){let r=qe(e)||t||n?{next:e,error:t,complete:n}:e;return r?dt((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let s=!0;i.subscribe(ct(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;s=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;s=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;s&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):J1}var SP="https://g.co/ng/security#xss",xe=class extends Error{constructor(t,n){super(r9(t,n)),this.code=t}};function r9(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}var hS=class extends v1{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),a=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),a=c.complete?.bind(c)}this.__isAsync&&(o=Zw(o),i&&(i=Zw(i)),a&&(a=Zw(a)));let s=super.subscribe({next:i,error:o,complete:a});return t instanceof lr&&t.add(s),s}};function Zw(e){return t=>{setTimeout(e,void 0,t)}}var Wt=hS;var rt=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(rt||{});function Bi(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Bi).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function FO(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var EP=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(EP||{}),Ma=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Ma||{});function X8(e){return{toString:e}.toString()}var $n=globalThis;var u6={},Ao=[];function Xt(e){for(let t in e)if(e[t]===Xt)return t;throw Error("Could not find renamed property on target object.")}function _se(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}var kse=Xt({\u0275cmp:Xt}),Tse=Xt({\u0275dir:Xt}),Ise=Xt({\u0275pipe:Xt}),Fse=Xt({\u0275mod:Xt}),Im=Xt({\u0275fac:Xt}),I8=Xt({__NG_ELEMENT_ID__:Xt}),RO=Xt({__NG_ENV_ID__:Xt}),Gr=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Gr||{});function DP(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function mS(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],a=n[r++],s=n[r++];e.setAttribute(t,a,s,o)}else{let o=i,a=n[++r];Rse(o)?e.setProperty(t,o,a):e.setAttribute(t,o,a),r++}}return r}function zP(e){return e===3||e===4||e===6}function Rse(e){return e.charCodeAt(0)===64}function R8(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?OO(e,n,i,null,t[++r]):OO(e,n,i,null,null))}}return e}function OO(e,t,n,r,i){let o=0,a=e.length;if(t===-1)a=-1;else for(;o<e.length;){let s=e[o++];if(typeof s=="number"){if(s===t){a=-1;break}else if(s>t){a=o-1;break}}}for(;o<e.length;){let s=e[o];if(typeof s=="number")break;if(s===n){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}a!==-1&&(e.splice(a,0,t),o=a+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var HP="ng-template";function Ose(e,t,n){let r=0,i=!0;for(;r<e.length;){let o=e[r++];if(typeof o=="string"&&i){let a=e[r++];if(n&&o==="class"&&DP(a.toLowerCase(),t,0)!==-1)return!0}else if(o===1){for(;r<e.length&&typeof(o=e[r++])=="string";)if(o.toLowerCase()===t)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function LP(e){return e.type===4&&e.value!==HP}function Pse(e,t,n){let r=e.type===4&&!n?HP:e.value;return t===r}function $se(e,t,n){let r=4,i=e.attrs||[],o=jse(i),a=!1;for(let s=0;s<t.length;s++){let c=t[s];if(typeof c=="number"){if(!a&&!y2(r)&&!y2(c))return!1;if(a&&y2(c))continue;a=!1,r=c|r&1;continue}if(!a)if(r&4){if(r=2|r&1,c!==""&&!Pse(e,c,n)||c===""&&t.length===1){if(y2(r))return!1;a=!0}}else{let l=r&8?c:t[++s];if(r&8&&e.attrs!==null){if(!Ose(e.attrs,l,n)){if(y2(r))return!1;a=!0}continue}let u=r&8?"class":c,f=Bse(u,i,LP(e),n);if(f===-1){if(y2(r))return!1;a=!0;continue}if(l!==""){let d;f>o?d="":d=i[f+1].toLowerCase();let p=r&8?d:null;if(p&&DP(p,l,0)!==-1||r&2&&l!==d){if(y2(r))return!1;a=!0}}}}return y2(r)||a}function y2(e){return(e&1)===0}function Bse(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let a=t[i];if(a===e)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let s=t[++i];for(;typeof s=="string";)s=t[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return qse(t,e)}function AP(e,t,n=!1){for(let r=0;r<t.length;r++)if($se(e,t[r],n))return!0;return!1}function Use(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function jse(e){for(let t=0;t<e.length;t++){let n=e[t];if(zP(n))return t}return e.length}function qse(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Gse(e,t){e:for(let n=0;n<t.length;n++){let r=t[n];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function PO(e,t){return e?":not("+t.trim()+")":t}function Wse(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let a=e[n];if(typeof a=="string")if(r&2){let s=e[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!y2(a)&&(t+=PO(o,i),i=""),r=a,o=o||!y2(r);n++}return i!==""&&(t+=PO(o,i)),t}function Yse(e){return e.map(Wse).join(",")}function Xse(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!y2(i))break;i=o}r++}return{attrs:t,classes:n}}function Le(e){return X8(()=>{let t=TP(e),n=k(x({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===EP.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Ma.Emulated,styles:e.styles||Ao,_:null,schemas:e.schemas||null,tView:null,id:""});IP(n);let r=e.dependencies;return n.directiveDefs=BO(r,!1),n.pipeDefs=BO(r,!0),n.id=Zse(n),n})}function Qse(e){return s3(e)||VP(e)}function Kse(e){return e!==null}function Mr(e){return X8(()=>({type:e.type,bootstrap:e.bootstrap||Ao,declarations:e.declarations||Ao,imports:e.imports||Ao,exports:e.exports||Ao,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function $O(e,t){if(e==null)return u6;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,a,s=Gr.None;Array.isArray(i)?(s=i[0],o=i[1],a=i[2]??o):(o=i,a=i),t?(n[o]=s!==Gr.None?[r,s]:r,t[o]=a):n[o]=r}return n}function Qt(e){return X8(()=>{let t=TP(e);return IP(t),t})}function gE(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone===!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function s3(e){return e[kse]||null}function VP(e){return e[Tse]||null}function NP(e){return e[Ise]||null}function _P(e){let t=s3(e)||VP(e)||NP(e);return t!==null?t.standalone:!1}function kP(e,t){let n=e[Fse]||null;if(!n&&t===!0)throw new Error(`Type ${Bi(e)} does not have '\u0275mod' property.`);return n}function TP(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||u6,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Ao,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$O(e.inputs,t),outputs:$O(e.outputs),debugInfo:null}}function IP(e){e.features?.forEach(t=>t(e))}function BO(e,t){if(!e)return null;let n=t?NP:Qse;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(Kse)}function Zse(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}var Ts=0,Ye=1,Pe=2,Wr=3,x2=4,eo=5,O8=6,P8=7,Vo=8,f6=9,Vs=10,zn=11,$8=12,UO=13,y6=14,C2=15,Q8=16,i6=17,Ns=18,i9=19,FP=20,a3=21,Jw=22,q4=23,Ui=25,RP=1;var G4=7,Fm=8,d6=9,M1=10,vE=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(vE||{});function U4(e){return Array.isArray(e)&&typeof e[RP]=="object"}function Is(e){return Array.isArray(e)&&e[RP]===!0}function yE(e){return(e.flags&4)!==0}function o9(e){return e.componentOffset>-1}function a9(e){return(e.flags&1)===1}function c3(e){return!!e.template}function Jse(e){return(e[Pe]&512)!==0}var ece="svg",tce="math",nce=!1;function rce(){return nce}function wa(e){for(;Array.isArray(e);)e=e[Ts];return e}function OP(e,t){return wa(t[e])}function No(e,t){return wa(t[e.index])}function xE(e,t){return e.data[t]}function PP(e,t){return e[t]}function f3(e,t){let n=t[e];return U4(n)?n:n[Ts]}function ice(e){return(e[Pe]&4)===4}function CE(e){return(e[Pe]&128)===128}function oce(e){return Is(e[Wr])}function p6(e,t){return t==null?null:e[t]}function $P(e){e[i6]=0}function ace(e){e[Pe]&1024||(e[Pe]|=1024,CE(e)&&B8(e))}function sce(e,t){for(;e>0;)t=t[y6],e--;return t}function bE(e){return!!(e[Pe]&9216||e[q4]?.dirty)}function gS(e){bE(e)?B8(e):e[Pe]&64&&(rce()?(e[Pe]|=1024,B8(e)):e[Vs].changeDetectionScheduler?.notify())}function B8(e){e[Vs].changeDetectionScheduler?.notify();let t=U8(e);for(;t!==null&&!(t[Pe]&8192||(t[Pe]|=8192,!CE(t)));)t=U8(t)}function BP(e,t){if((e[Pe]&256)===256)throw new xe(911,!1);e[a3]===null&&(e[a3]=[]),e[a3].push(t)}function cce(e,t){if(e[a3]===null)return;let n=e[a3].indexOf(t);n!==-1&&e[a3].splice(n,1)}function U8(e){let t=e[Wr];return Is(t)?t[Wr]:t}var Je={lFrame:QP(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function lce(){return Je.lFrame.elementDepthCount}function uce(){Je.lFrame.elementDepthCount++}function fce(){Je.lFrame.elementDepthCount--}function UP(){return Je.bindingsEnabled}function jP(){return Je.skipHydrationRootTNode!==null}function dce(e){return Je.skipHydrationRootTNode===e}function pce(){Je.skipHydrationRootTNode=null}function it(){return Je.lFrame.lView}function Kn(){return Je.lFrame.tView}function pi(e){return Je.lFrame.contextLView=e,e[Vo]}function hi(e){return Je.lFrame.contextLView=null,e}function mi(){let e=qP();for(;e!==null&&e.type===64;)e=e.parent;return e}function qP(){return Je.lFrame.currentTNode}function hce(){let e=Je.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function tl(e,t){let n=Je.lFrame;n.currentTNode=e,n.isParent=t}function ME(){return Je.lFrame.isParent}function wE(){Je.lFrame.isParent=!1}function mce(){return Je.lFrame.contextLView}function SE(){let e=Je.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function gce(){return Je.lFrame.bindingIndex}function vce(e){return Je.lFrame.bindingIndex=e}function x6(){return Je.lFrame.bindingIndex++}function GP(e){let t=Je.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function yce(){return Je.lFrame.inI18n}function xce(e,t){let n=Je.lFrame;n.bindingIndex=n.bindingRootIndex=e,vS(t)}function Cce(){return Je.lFrame.currentDirectiveIndex}function vS(e){Je.lFrame.currentDirectiveIndex=e}function bce(e){let t=Je.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function WP(){return Je.lFrame.currentQueryIndex}function EE(e){Je.lFrame.currentQueryIndex=e}function Mce(e){let t=e[Ye];return t.type===2?t.declTNode:t.type===1?e[eo]:null}function YP(e,t,n){if(n&rt.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&rt.Host);)if(i=Mce(o),i===null||(o=o[y6],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=Je.lFrame=XP();return r.currentTNode=t,r.lView=e,!0}function DE(e){let t=XP(),n=e[Ye];Je.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function XP(){let e=Je.lFrame,t=e===null?null:e.child;return t===null?QP(e):t}function QP(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function KP(){let e=Je.lFrame;return Je.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var ZP=KP;function zE(){let e=KP();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function wce(e){return(Je.lFrame.contextLView=sce(e,Je.lFrame.contextLView))[Vo]}function nl(){return Je.lFrame.selectedIndex}function W4(e){Je.lFrame.selectedIndex=e}function s9(){let e=Je.lFrame;return xE(e.tView,e.selectedIndex)}function Sce(){return Je.lFrame.currentNamespace}var JP=!0;function c9(){return JP}function l9(e){JP=e}function Ece(){return C6(mi(),it())}function C6(e,t){return new Yr(No(e,t))}var Yr=(()=>{let t=class t{constructor(r){this.nativeElement=r}};t.__NG_ELEMENT_ID__=Ece;let e=t;return e})();function Dce(e){return e instanceof Yr?e.nativeElement:e}function zce(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function Hce(e){return e.flat(Number.POSITIVE_INFINITY)}function HE(e,t){e.forEach(n=>Array.isArray(n)?HE(n,t):t(n))}function e$(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Rm(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Lce(e,t){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function Ace(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function Vce(e,t,n){let r=K8(e,t);return r>=0?e[r|1]=n:(r=~r,Ace(e,r,t,n)),r}function eS(e,t){let n=K8(e,t);if(n>=0)return e[n|1]}function K8(e,t){return Nce(e,t,1)}function Nce(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),a=e[o<<n];if(t===a)return o<<n;a>t?i=o:r=o+1}return~(i<<n)}function _ce(){return this._results[Symbol.iterator]()}var yS=class e{get changes(){return this._changes??=new Wt}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=_ce)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=Hce(t);(this._changesDetected=!zce(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function t$(e){return(e.flags&128)===128}var xS;function n$(e){xS=e}function r$(){if(xS!==void 0)return xS;if(typeof document<"u")return document;throw new xe(210,!1)}function ue(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function wr(e){return{providers:e.providers||[],imports:e.imports||[]}}function u9(e){return jO(e,o$)||jO(e,a$)}function i$(e){return u9(e)!==null}function jO(e,t){return e.hasOwnProperty(t)?e[t]:null}function kce(e){let t=e&&(e[o$]||e[a$]);return t||null}function qO(e){return e&&(e.hasOwnProperty(GO)||e.hasOwnProperty(Tce))?e[GO]:null}var o$=Xt({\u0275prov:Xt}),GO=Xt({\u0275inj:Xt}),a$=Xt({ngInjectableDef:Xt}),Tce=Xt({ngInjectorDef:Xt}),De=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ue({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}},f9=new De("",{providedIn:"root",factory:()=>Ice}),Ice="ng",LE=new De(""),Da=new De("",{providedIn:"platform",factory:()=>"unknown"});var AE=new De("",{providedIn:"root",factory:()=>r$().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Fce=Xt({__forward_ref__:Xt});function za(e){return e.__forward_ref__=za,e.toString=function(){return Bi(this())},e}function $i(e){return s$(e)?e():e}function s$(e){return typeof e=="function"&&e.hasOwnProperty(Fce)&&e.__forward_ref__===za}function c$(e){return e&&!!e.\u0275providers}function Y4(e){return typeof e=="string"?e:e==null?"":String(e)}function Rce(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Y4(e)}function Oce(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new xe(-200,e)}function VE(e,t){throw new xe(-201,!1)}var CS;function l$(){return CS}function b1(e){let t=CS;return CS=e,t}function u$(e,t,n){let r=u9(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&rt.Optional)return null;if(t!==void 0)return t;VE(e,"Injector")}var Pce={},j8=Pce,bS="__NG_DI_FLAG__",Om="ngTempTokenPath",$ce="ngTokenPath",Bce=/\n/gm,Uce="\u0275",WO="__source",c6;function jce(){return c6}function o3(e){let t=c6;return c6=e,t}function qce(e,t=rt.Default){if(c6===void 0)throw new xe(-203,!1);return c6===null?u$(e,void 0,t):c6.get(e,t&rt.Optional?null:void 0,t)}function ge(e,t=rt.Default){return(l$()||qce)($i(e),t)}function ce(e,t=rt.Default){return ge(e,d9(t))}function d9(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function MS(e){let t=[];for(let n=0;n<e.length;n++){let r=$i(e[n]);if(Array.isArray(r)){if(r.length===0)throw new xe(900,!1);let i,o=rt.Default;for(let a=0;a<r.length;a++){let s=r[a],c=Gce(s);typeof c=="number"?c===-1?i=s.token:o|=c:i=s}t.push(ge(i,o))}else t.push(ge(r))}return t}function f$(e,t){return e[bS]=t,e.prototype[bS]=t,e}function Gce(e){return e[bS]}function Wce(e,t,n,r){let i=e[Om];throw t[WO]&&i.unshift(t[WO]),e.message=Yce(`
`+e.message,i,n,r),e[$ce]=i,e[Om]=null,e}function Yce(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==Uce?e.slice(2):e;let i=Bi(t);if(Array.isArray(t))i=t.map(Bi).join(" -> ");else if(typeof t=="object"){let o=[];for(let a in t)if(t.hasOwnProperty(a)){let s=t[a];o.push(a+":"+(typeof s=="string"?JSON.stringify(s):Bi(s)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Bce,`
  `)}`}var Xce="h",Qce="b";var Kce=()=>null;function NE(e,t,n=!1){return Kce(e,t,n)}var wm="__parameters__";function Zce(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function d$(e,t,n){return X8(()=>{let r=Zce(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let a=new i(...o);return s.annotation=a,s;function s(c,l,u){let f=c.hasOwnProperty(wm)?c[wm]:Object.defineProperty(c,wm,{value:[]})[wm];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(a),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var p9=f$(d$("Optional"),8);var _E=f$(d$("SkipSelf"),4);function X4(e,t){let n=e.hasOwnProperty(Im);return n?e[Im]:null}var h6=new De(""),p$=new De("",-1),h$=new De(""),Pm=class{get(t,n=j8){if(n===j8){let r=new Error(`NullInjectorError: No provider for ${Bi(t)}!`);throw r.name="NullInjectorError",r}return n}};function h9(e){return{\u0275providers:e}}function Jce(...e){return{\u0275providers:m$(!0,e),\u0275fromNgModule:!0}}function m$(e,...t){let n=[],r=new Set,i,o=a=>{n.push(a)};return HE(t,a=>{let s=a;wS(s,o,[],r)&&(i||=[],i.push(s))}),i!==void 0&&g$(i,o),n}function g$(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];kE(i,o=>{t(o,r)})}}function wS(e,t,n,r){if(e=$i(e),!e)return!1;let i=null,o=qO(e),a=!o&&s3(e);if(!o&&!a){let c=e.ngModule;if(o=qO(c),o)i=c;else return!1}else{if(a&&!a.standalone)return!1;i=e}let s=r.has(i);if(a){if(s)return!1;if(r.add(i),a.dependencies){let c=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let l of c)wS(l,t,n,r)}}else if(o){if(o.imports!=null&&!s){r.add(i);let l;try{HE(o.imports,u=>{wS(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&g$(l,t)}if(!s){let l=X4(i)||(()=>new i);t({provide:i,useFactory:l,deps:Ao},i),t({provide:h$,useValue:i,multi:!0},i),t({provide:h6,useValue:()=>ge(i),multi:!0},i)}let c=o.providers;if(c!=null&&!s){let l=e;kE(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function kE(e,t){for(let n of e)c$(n)&&(n=n.\u0275providers),Array.isArray(n)?kE(n,t):t(n)}var e3e=Xt({provide:String,useValue:Xt});function v$(e){return e!==null&&typeof e=="object"&&e3e in e}function t3e(e){return!!(e&&e.useExisting)}function n3e(e){return!!(e&&e.useFactory)}function m6(e){return typeof e=="function"}function r3e(e){return!!e.useClass}var m9=new De(""),Am={},i3e={},tS;function TE(){return tS===void 0&&(tS=new Pm),tS}var ji=class{},q8=class extends ji{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ES(t,a=>this.processProvider(a)),this.records.set(p$,o6(void 0,this)),i.has("environment")&&this.records.set(ji,o6(void 0,this));let o=this.records.get(m9);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(h$,Ao,rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=o3(this),r=b1(void 0),i;try{return t()}finally{o3(n),b1(r)}}get(t,n=j8,r=rt.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(RO))return t[RO](this);r=d9(r);let i,o=o3(this),a=b1(void 0);try{if(!(r&rt.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=l3e(t)&&u9(t);l&&this.injectableDefInScope(l)?c=o6(SS(t),Am):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let s=r&rt.Self?TE():this.parent;return n=r&rt.Optional&&n===j8?null:n,s.get(t,n)}catch(s){if(s.name==="NullInjectorError"){if((s[Om]=s[Om]||[]).unshift(Bi(t)),o)throw s;return Wce(s,t,"R3InjectorError",this.source)}else throw s}finally{b1(a),o3(o)}}resolveInjectorInitializers(){let t=o3(this),n=b1(void 0),r;try{let i=this.get(h6,Ao,rt.Self);for(let o of i)o()}finally{o3(t),b1(n)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Bi(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(t){t=$i(t);let n=m6(t)?t:$i(t&&t.provide),r=a3e(t);if(!m6(t)&&t.multi===!0){let i=this.records.get(n);i||(i=o6(void 0,Am,!0),i.factory=()=>MS(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Am&&(n.value=i3e,n.value=n.factory()),typeof n.value=="object"&&n.value&&c3e(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;let n=$i(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function SS(e){let t=u9(e),n=t!==null?t.factory:X4(e);if(n!==null)return n;if(e instanceof De)throw new xe(204,!1);if(e instanceof Function)return o3e(e);throw new xe(204,!1)}function o3e(e){if(e.length>0)throw new xe(204,!1);let n=kce(e);return n!==null?()=>n.factory(e):()=>new e}function a3e(e){if(v$(e))return o6(void 0,e.useValue);{let t=y$(e);return o6(t,Am)}}function y$(e,t,n){let r;if(m6(e)){let i=$i(e);return X4(i)||SS(i)}else if(v$(e))r=()=>$i(e.useValue);else if(n3e(e))r=()=>e.useFactory(...MS(e.deps||[]));else if(t3e(e))r=()=>ge($i(e.useExisting));else{let i=$i(e&&(e.useClass||e.provide));if(s3e(e))r=()=>new i(...MS(e.deps));else return X4(i)||SS(i)}return r}function o6(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function s3e(e){return!!e.deps}function c3e(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function l3e(e){return typeof e=="function"||typeof e=="object"&&e instanceof De}function ES(e,t){for(let n of e)Array.isArray(n)?ES(n,t):n&&c$(n)?ES(n.\u0275providers,t):t(n)}function Ha(e,t){e instanceof q8&&e.assertNotDestroyed();let n,r=o3(e),i=b1(void 0);try{return t()}finally{o3(r),b1(i)}}function u3e(e){if(!l$()&&!jce())throw new xe(-203,!1)}function f3e(e){let t=$n.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function d3e(e){return typeof e=="function"}var DS=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function x$(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function _o(){return C$}function C$(e){return e.type.prototype.ngOnChanges&&(e.setInput=h3e),p3e}_o.ngInherit=!0;function p3e(){let e=M$(this),t=e?.current;if(t){let n=e.previous;if(n===u6)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function h3e(e,t,n,r,i){let o=this.declaredInputs[r],a=M$(e)||m3e(e,{previous:u6,current:null}),s=a.current||(a.current={}),c=a.previous,l=c[o];s[o]=new DS(l&&l.currentValue,n,c===u6),x$(e,t,i,n)}var b$="__ngSimpleChanges__";function M$(e){return e[b$]||null}function m3e(e,t){return e[b$]=t}var YO=null;var Ca=function(e,t,n){YO?.(e,t,n)};function g3e(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let a=C$(t);(n.preOrderHooks??=[]).push(e,a),(n.preOrderCheckHooks??=[]).push(e,a)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function g9(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:s,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;a&&(e.contentHooks??=[]).push(-n,a),s&&((e.contentHooks??=[]).push(n,s),(e.contentCheckHooks??=[]).push(n,s)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Vm(e,t,n){w$(e,t,3,n)}function Nm(e,t,n,r){(e[Pe]&3)===n&&w$(e,t,n,r)}function nS(e,t){let n=e[Pe];(n&3)===t&&(n&=16383,n+=1,e[Pe]=n)}function w$(e,t,n,r){let i=r!==void 0?e[i6]&65535:0,o=r??-1,a=t.length-1,s=0;for(let c=i;c<a;c++)if(typeof t[c+1]=="number"){if(s=t[c],r!=null&&s>=r)break}else t[c]<0&&(e[i6]+=65536),(s<o||o==-1)&&(v3e(e,n,t,c),e[i6]=(e[i6]&4294901760)+c+2),c++}function XO(e,t){Ca(4,e,t);let n=qr(null);try{t.call(e)}finally{qr(n),Ca(5,e,t)}}function v3e(e,t,n,r){let i=n[r]<0,o=n[r+1],a=i?-n[r]:n[r],s=e[a];i?e[Pe]>>14<e[i6]>>16&&(e[Pe]&3)===t&&(e[Pe]+=16384,XO(s,o)):XO(s,o)}var l6=-1,Q4=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function y3e(e){return e instanceof Q4}function x3e(e){return(e.flags&8)!==0}function C3e(e){return(e.flags&16)!==0}function S$(e){return e!==l6}function $m(e){return e&32767}function b3e(e){return e>>16}function Bm(e,t){let n=b3e(e),r=t;for(;n>0;)r=r[y6],n--;return r}var zS=!0;function Um(e){let t=zS;return zS=e,t}var M3e=256,E$=M3e-1,D$=5,w3e=0,ba={};function S3e(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(I8)&&(r=n[I8]),r==null&&(r=n[I8]=w3e++);let i=r&E$,o=1<<i;t.data[e+(i>>D$)]|=o}function jm(e,t){let n=z$(e,t);if(n!==-1)return n;let r=t[Ye];r.firstCreatePass&&(e.injectorIndex=t.length,rS(r.data,e),rS(t,null),rS(r.blueprint,null));let i=IE(e,t),o=e.injectorIndex;if(S$(i)){let a=$m(i),s=Bm(i,t),c=s[Ye].data;for(let l=0;l<8;l++)t[o+l]=s[a+l]|c[a+l]}return t[o+8]=i,o}function rS(e,t){e.push(0,0,0,0,0,0,0,0,t)}function z$(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function IE(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=N$(i),r===null)return l6;if(n++,i=i[y6],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return l6}function HS(e,t,n){S3e(e,t,n)}function E3e(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(zP(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===t)return n[i+1];i=i+2}}}return null}function H$(e,t,n){if(n&rt.Optional||e!==void 0)return e;VE(t,"NodeInjector")}function L$(e,t,n,r){if(n&rt.Optional&&r===void 0&&(r=null),!(n&(rt.Self|rt.Host))){let i=e[f6],o=b1(void 0);try{return i?i.get(t,r,n&rt.Optional):u$(t,r,n&rt.Optional)}finally{b1(o)}}return H$(r,t,n)}function A$(e,t,n,r=rt.Default,i){if(e!==null){if(t[Pe]&2048&&!(r&rt.Self)){let a=L3e(e,t,n,r,ba);if(a!==ba)return a}let o=V$(e,t,n,r,ba);if(o!==ba)return o}return L$(t,n,r,i)}function V$(e,t,n,r,i){let o=z3e(n);if(typeof o=="function"){if(!YP(t,e,r))return r&rt.Host?H$(i,n,r):L$(t,n,r,i);try{let a;if(a=o(r),a==null&&!(r&rt.Optional))VE(n);else return a}finally{ZP()}}else if(typeof o=="number"){let a=null,s=z$(e,t),c=l6,l=r&rt.Host?t[C2][eo]:null;for((s===-1||r&rt.SkipSelf)&&(c=s===-1?IE(e,t):t[s+8],c===l6||!KO(r,!1)?s=-1:(a=t[Ye],s=$m(c),t=Bm(c,t)));s!==-1;){let u=t[Ye];if(QO(o,s,u.data)){let f=D3e(s,t,n,a,r,l);if(f!==ba)return f}c=t[s+8],c!==l6&&KO(r,t[Ye].data[s+8]===l)&&QO(o,s,t)?(a=u,s=$m(c),t=Bm(c,t)):s=-1}}return i}function D3e(e,t,n,r,i,o){let a=t[Ye],s=a.data[e+8],c=r==null?o9(s)&&zS:r!=a&&(s.type&3)!==0,l=i&rt.Host&&o===s,u=_m(s,a,n,c,l);return u!==null?K4(t,a,u,s):ba}function _m(e,t,n,r,i){let o=e.providerIndexes,a=t.data,s=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,f=r?s:s+u,d=i?s+u:l;for(let p=f;p<d;p++){let h=a[p];if(p<c&&n===h||p>=c&&h.type===n)return p}if(i){let p=a[c];if(p&&c3(p)&&p.type===n)return c}return null}function K4(e,t,n,r){let i=e[n],o=t.data;if(y3e(i)){let a=i;a.resolving&&Oce(Rce(o[n]));let s=Um(a.canSeeViewProviders);a.resolving=!0;let c,l=a.injectImpl?b1(a.injectImpl):null,u=YP(e,r,rt.Default);try{i=e[n]=a.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&g3e(n,o[n],t)}finally{l!==null&&b1(l),Um(s),a.resolving=!1,ZP()}}return i}function z3e(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(I8)?e[I8]:void 0;return typeof t=="number"?t>=0?t&E$:H3e:t}function QO(e,t,n){let r=1<<e;return!!(n[t+(e>>D$)]&r)}function KO(e,t){return!(e&rt.Self)&&!(e&rt.Host&&t)}var j4=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return A$(this._tNode,this._lView,t,d9(r),n)}};function H3e(){return new j4(mi(),it())}function La(e){return X8(()=>{let t=e.prototype.constructor,n=t[Im]||LS(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[Im]||LS(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function LS(e){return s$(e)?()=>{let t=LS($i(e));return t&&t()}:X4(e)}function L3e(e,t,n,r,i){let o=e,a=t;for(;o!==null&&a!==null&&a[Pe]&2048&&!(a[Pe]&512);){let s=V$(o,a,n,r|rt.Self,ba);if(s!==ba)return s;let c=o.parent;if(!c){let l=a[FP];if(l){let u=l.get(n,ba,r);if(u!==ba)return u}c=N$(a),a=a[y6]}o=c}return i}function N$(e){let t=e[Ye],n=t.type;return n===2?t.declTNode:n===1?e[eo]:null}function FE(e){return E3e(mi(),e)}function ZO(e,t=null,n=null,r){let i=_$(e,t,n,r);return i.resolveInjectorInitializers(),i}function _$(e,t=null,n=null,r,i=new Set){let o=[n||Ao,Jce(e)];return r=r||(typeof e=="object"?void 0:Bi(e)),new q8(o,t||TE(),r||null,i)}var b2=(()=>{let t=class t{static create(r,i){if(Array.isArray(r))return ZO({name:""},i,r,"");{let o=r.name??"";return ZO({name:o},r.parent,r.providers,o)}}};t.THROW_IF_NOT_FOUND=j8,t.NULL=new Pm,t.\u0275prov=ue({token:t,providedIn:"any",factory:()=>ge(p$)}),t.__NG_ELEMENT_ID__=-1;let e=t;return e})(),A3e="ngOriginalError";function iS(e){return e[A3e]}var Sa=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&iS(t);for(;n&&iS(n);)n=iS(n);return n||null}},k$=new De("",{providedIn:"root",factory:()=>ce(Sa).handleError.bind(void 0)});var T$=!1,V3e=new De("",{providedIn:"root",factory:()=>T$}),Sm;function N3e(){if(Sm===void 0&&(Sm=null,$n.trustedTypes))try{Sm=$n.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Sm}function v9(e){return N3e()?.createHTML(e)||e}var Em;function I$(){if(Em===void 0&&(Em=null,$n.trustedTypes))try{Em=$n.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Em}function JO(e){return I$()?.createHTML(e)||e}function eP(e){return I$()?.createScriptURL(e)||e}var _s=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${SP})`}},AS=class extends _s{getTypeName(){return"HTML"}},VS=class extends _s{getTypeName(){return"Style"}},NS=class extends _s{getTypeName(){return"Script"}},_S=class extends _s{getTypeName(){return"URL"}},kS=class extends _s{getTypeName(){return"ResourceURL"}};function M2(e){return e instanceof _s?e.changingThisBreaksApplicationSecurity:e}function Fs(e,t){let n=_3e(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${SP})`)}return n===t}function _3e(e){return e instanceof _s&&e.getTypeName()||null}function F$(e){return new AS(e)}function R$(e){return new VS(e)}function O$(e){return new NS(e)}function P$(e){return new _S(e)}function $$(e){return new kS(e)}function k3e(e){let t=new IS(e);return T3e()?new TS(t):t}var TS=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let n=new window.DOMParser().parseFromString(v9(t),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch{return null}}},IS=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let n=this.inertDocument.createElement("template");return n.innerHTML=v9(t),n}};function T3e(){try{return!!new window.DOMParser().parseFromString(v9(""),"text/html")}catch{return!1}}var I3e=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function y9(e){return e=String(e),e.match(I3e)?e:"unsafe:"+e}function Rs(e){let t={};for(let n of e.split(","))t[n]=!0;return t}function Z8(...e){let t={};for(let n of e)for(let r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}var B$=Rs("area,br,col,hr,img,wbr"),U$=Rs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),j$=Rs("rp,rt"),F3e=Z8(j$,U$),R3e=Z8(U$,Rs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),O3e=Z8(j$,Rs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tP=Z8(B$,R3e,O3e,F3e),q$=Rs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),P3e=Rs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$3e=Rs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),B3e=Z8(q$,P3e,$3e),U3e=Rs("script,style,template"),FS=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,r=!0;for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){n=n.firstChild;continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}}return this.buf.join("")}startElement(t){let n=t.nodeName.toLowerCase();if(!tP.hasOwnProperty(n))return this.sanitizedSomething=!0,!U3e.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=t.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),a=o.name,s=a.toLowerCase();if(!B3e.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let c=o.value;q$[s]&&(c=y9(c)),this.buf.push(" ",a,'="',nP(c),'"')}return this.buf.push(">"),!0}endElement(t){let n=t.nodeName.toLowerCase();tP.hasOwnProperty(n)&&!B$.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(nP(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}},j3e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,q3e=/([^\#-~ |!])/g;function nP(e){return e.replace(/&/g,"&amp;").replace(j3e,function(t){let n=t.charCodeAt(0),r=t.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(q3e,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Dm;function RE(e,t){let n=null;try{Dm=Dm||k3e(e);let r=t?String(t):"";n=Dm.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Dm.getInertBodyElement(r)}while(r!==o);let s=new FS().sanitizeChildren(rP(n)||n);return v9(s)}finally{if(n){let r=rP(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function rP(e){return"content"in e&&G3e(e)?e.content:null}function G3e(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var w2=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(w2||{});function G$(e){let t=OE();return t?JO(t.sanitize(w2.HTML,e)||""):Fs(e,"HTML")?JO(M2(e)):RE(r$(),Y4(e))}function W3e(e){let t=OE();return t?t.sanitize(w2.URL,e)||"":Fs(e,"URL")?M2(e):y9(Y4(e))}function Y3e(e){let t=OE();if(t)return eP(t.sanitize(w2.RESOURCE_URL,e)||"");if(Fs(e,"ResourceURL"))return eP(M2(e));throw new xe(904,!1)}function X3e(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?Y3e:W3e}function W$(e,t,n){return X3e(t,n)(e)}function OE(){let e=it();return e&&e[Vs].sanitizer}var Q3e=/^>|^->|<!--|-->|--!>|<!-$/g,K3e=/(<|>)/g,Z3e="\u200B$1\u200B";function J3e(e){return e.replace(Q3e,t=>t.replace(K3e,Z3e))}var Y$=new Map,e4e=0;function t4e(){return e4e++}function n4e(e){Y$.set(e[i9],e)}function r4e(e){Y$.delete(e[i9])}var iP="__ngContext__";function l3(e,t){U4(t)?(e[iP]=t[i9],n4e(t)):e[iP]=t}function X$(e){return e instanceof Function?e():e}function i4e(e){return(e??ce(b2)).get(Da)==="browser"}var ks=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(ks||{}),o4e;function PE(e,t){return o4e(e,t)}function a6(e,t,n,r,i){if(r!=null){let o,a=!1;Is(r)?o=r:U4(r)&&(a=!0,r=r[Ts]);let s=wa(r);e===0&&n!==null?i==null?eB(t,n,s):Gm(t,n,s,i||null,!0):e===1&&n!==null?Gm(t,n,s,i||null,!0):e===2?b4e(t,s,a):e===3&&t.destroyNode(s),o!=null&&w4e(t,e,o,n,i)}}function a4e(e,t){return e.createText(t)}function s4e(e,t,n){e.setValue(t,n)}function c4e(e,t){return e.createComment(J3e(t))}function Q$(e,t,n){return e.createElement(t,n)}function l4e(e,t){K$(e,t),t[Ts]=null,t[eo]=null}function u4e(e,t,n,r,i,o){r[Ts]=i,r[eo]=t,C9(e,r,n,1,i,o)}function K$(e,t){C9(e,t,t[zn],2,null,null)}function f4e(e){let t=e[$8];if(!t)return oS(e[Ye],e);for(;t;){let n=null;if(U4(t))n=t[$8];else{let r=t[M1];r&&(n=r)}if(!n){for(;t&&!t[x2]&&t!==e;)U4(t)&&oS(t[Ye],t),t=t[Wr];t===null&&(t=e),U4(t)&&oS(t[Ye],t),n=t&&t[x2]}t=n}}function d4e(e,t,n,r){let i=M1+r,o=n.length;r>0&&(n[i-1][x2]=t),r<o-M1?(t[x2]=n[i],e$(n,M1+r,t)):(n.push(t),t[x2]=null),t[Wr]=n;let a=t[Q8];a!==null&&n!==a&&p4e(a,t);let s=t[Ns];s!==null&&s.insertView(e),gS(t),t[Pe]|=128}function p4e(e,t){let n=e[d6],i=t[Wr][Wr][C2];t[C2]!==i&&(e[Pe]|=vE.HasTransplantedViews),n===null?e[d6]=[t]:n.push(t)}function Z$(e,t){let n=e[d6],r=n.indexOf(t);n.splice(r,1)}function qm(e,t){if(e.length<=M1)return;let n=M1+t,r=e[n];if(r){let i=r[Q8];i!==null&&i!==e&&Z$(i,r),t>0&&(e[n-1][x2]=r[x2]);let o=Rm(e,M1+t);l4e(r[Ye],r);let a=o[Ns];a!==null&&a.detachView(o[Ye]),r[Wr]=null,r[x2]=null,r[Pe]&=-129}return r}function $E(e,t){if(!(t[Pe]&256)){let n=t[zn];n.destroyNode&&C9(e,t,n,3,null,null),f4e(t)}}function oS(e,t){if(!(t[Pe]&256)){t[Pe]&=-129,t[Pe]|=256,t[q4]&&fO(t[q4]),m4e(e,t),h4e(e,t),t[Ye].type===1&&t[zn].destroy();let n=t[Q8];if(n!==null&&Is(t[Wr])){n!==t[Wr]&&Z$(n,t);let r=t[Ns];r!==null&&r.detachView(e)}r4e(t)}}function h4e(e,t){let n=e.cleanup,r=t[P8];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[n[o+1]];n[o].call(a)}r!==null&&(t[P8]=null);let i=t[a3];if(i!==null){t[a3]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}}function m4e(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Q4)){let o=n[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let s=i[o[a]],c=o[a+1];Ca(4,s,c);try{c.call(s)}finally{Ca(5,s,c)}}else{Ca(4,i,o);try{o.call(i)}finally{Ca(5,i,o)}}}}}function J$(e,t,n){return g4e(e,t.parent,n)}function g4e(e,t,n){let r=t;for(;r!==null&&r.type&40;)t=r,r=t.parent;if(r===null)return n[Ts];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===Ma.None||o===Ma.Emulated)return null}return No(r,n)}}function Gm(e,t,n,r,i){e.insertBefore(t,n,r,i)}function eB(e,t,n){e.appendChild(t,n)}function oP(e,t,n,r,i){r!==null?Gm(e,t,n,r,i):eB(e,t,n)}function v4e(e,t,n,r){e.removeChild(t,n,r)}function BE(e,t){return e.parentNode(t)}function y4e(e,t){return e.nextSibling(t)}function tB(e,t,n){return C4e(e,t,n)}function x4e(e,t,n){return e.type&40?No(e,n):null}var C4e=x4e,aP;function x9(e,t,n,r){let i=J$(e,r,t),o=t[zn],a=r.parent||t[eo],s=tB(a,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)oP(o,i,n[c],s,!1);else oP(o,i,n,s,!1);aP!==void 0&&aP(o,r,t,n,i)}function km(e,t){if(t!==null){let n=t.type;if(n&3)return No(t,e);if(n&4)return RS(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return km(e,r);{let i=e[t.index];return Is(i)?RS(-1,i):wa(i)}}else{if(n&32)return PE(t,e)()||wa(e[t.index]);{let r=nB(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=U8(e[C2]);return km(i,r)}else return km(e,t.next)}}}return null}function nB(e,t){if(t!==null){let r=e[C2][eo],i=t.projection;return r.projection[i]}return null}function RS(e,t){let n=M1+e+1;if(n<t.length){let r=t[n],i=r[Ye].firstChild;if(i!==null)return km(r,i)}return t[G4]}function b4e(e,t,n){let r=BE(e,t);r&&v4e(e,r,t,n)}function UE(e,t,n,r,i,o,a){for(;n!=null;){let s=r[n.index],c=n.type;if(a&&t===0&&(s&&l3(wa(s),r),n.flags|=2),(n.flags&32)!==32)if(c&8)UE(e,t,n.child,r,i,o,!1),a6(t,e,i,s,o);else if(c&32){let l=PE(n,r),u;for(;u=l();)a6(t,e,i,u,o);a6(t,e,i,s,o)}else c&16?rB(e,t,r,n,i,o):a6(t,e,i,s,o);n=a?n.projectionNext:n.next}}function C9(e,t,n,r,i,o){UE(n,r,e.firstChild,t,i,o,!1)}function M4e(e,t,n){let r=t[zn],i=J$(e,n,t),o=n.parent||t[eo],a=tB(o,n,t);rB(r,0,t,n,i,a)}function rB(e,t,n,r,i,o){let a=n[C2],c=a[eo].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];a6(t,e,i,u,o)}else{let l=c,u=a[Wr];t$(r)&&(l.flags|=128),UE(e,t,l,u,i,o,!0)}}function w4e(e,t,n,r,i){let o=n[G4],a=wa(n);o!==a&&a6(t,e,r,o,i);for(let s=M1;s<n.length;s++){let c=n[s];C9(c[Ye],c,e,t,r,o)}}function S4e(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:ks.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ks.Important),e.setStyle(n,r,i,o))}}function E4e(e,t,n){e.setAttribute(t,"style",n)}function iB(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function oB(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&mS(e,t,r),i!==null&&iB(e,t,i),o!==null&&E4e(e,t,o)}var Aa={};function P(e=1){aB(Kn(),it(),nl()+e,!1)}function aB(e,t,n,r){if(!r)if((t[Pe]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Vm(t,o,n)}else{let o=e.preOrderHooks;o!==null&&Nm(t,o,0,n)}W4(n)}function W(e,t=rt.Default){let n=it();if(n===null)return ge(e,t);let r=mi();return A$(r,n,$i(e),t)}function sB(){let e="invalid";throw new Error(e)}function cB(e,t,n,r,i,o){let a=qr(null);try{let s=null;i&Gr.SignalBased&&(s=t[r][Nw]),s!==null&&s.transformFn!==void 0&&(o=s.transformFn(o)),i&Gr.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(t,o)),e.setInput!==null?e.setInput(t,s,o,n,r):x$(t,s,r,o)}finally{qr(a)}}function D4e(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)W4(~i);else{let o=i,a=n[++r],s=n[++r];xce(a,o);let c=t[o];s(2,c)}}}finally{W4(-1)}}function b9(e,t,n,r,i,o,a,s,c,l,u){let f=t.blueprint.slice();return f[Ts]=i,f[Pe]=r|4|128|8|64,(l!==null||e&&e[Pe]&2048)&&(f[Pe]|=2048),$P(f),f[Wr]=f[y6]=e,f[Vo]=n,f[Vs]=a||e&&e[Vs],f[zn]=s||e&&e[zn],f[f6]=c||e&&e[f6]||null,f[eo]=o,f[i9]=t4e(),f[O8]=u,f[FP]=l,f[C2]=t.type==2?e[C2]:f,f}function b6(e,t,n,r,i){let o=e.data[t];if(o===null)o=z4e(e,t,n,r,i),yce()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let a=hce();o.injectorIndex=a===null?-1:a.injectorIndex}return tl(o,!0),o}function z4e(e,t,n,r,i){let o=qP(),a=ME(),s=a?o:o&&o.parent,c=e.data[t]=_4e(e,s,n,t,r,i);return e.firstChild===null&&(e.firstChild=c),o!==null&&(a?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function lB(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function uB(e,t,n,r,i){let o=nl(),a=r&2;try{W4(-1),a&&t.length>Ui&&aB(e,t,Ui,!1),Ca(a?2:0,i),n(r,i)}finally{W4(o),Ca(a?3:1,i)}}function jE(e,t,n){if(yE(t)){let r=qr(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let a=i;a<o;a++){let s=e.data[a];if(s.contentQueries){let c=n[a];s.contentQueries(1,c,a)}}}finally{qr(r)}}}function qE(e,t,n){UP()&&(O4e(e,t,n,No(n,t)),(n.flags&64)===64&&pB(e,t,n))}function GE(e,t,n=No){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],s=a===-1?n(t,e):e[a];e[i++]=s}}}function fB(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=WE(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function WE(e,t,n,r,i,o,a,s,c,l,u){let f=Ui+r,d=f+i,p=H4e(f,d),h=typeof l=="function"?l():l;return p[Ye]={type:e,blueprint:p,template:n,queries:null,viewQuery:s,declTNode:t,data:p.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:c,consts:h,incompleteFirstPass:!1,ssrId:u}}function H4e(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Aa);return n}function L4e(e,t,n,r){let o=r.get(V3e,T$)||n===Ma.ShadowDom,a=e.selectRootElement(t,o);return A4e(a),a}function A4e(e){V4e(e)}var V4e=()=>null;function N4e(e,t,n,r){let i=gB(t);i.push(n),e.firstCreatePass&&vB(e).push(r,i.length-1)}function _4e(e,t,n,r,i,o){let a=t?t.injectorIndex:-1,s=0;return jP()&&(s|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function sP(e,t,n,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let a=t[o];if(a===void 0)continue;r??={};let s,c=Gr.None;Array.isArray(a)?(s=a[0],c=a[1]):s=a;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}e===0?cP(r,n,l,s,c):cP(r,n,l,s)}return r}function cP(e,t,n,r,i){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,r):o=e[n]=[t,r],i!==void 0&&o.push(i)}function k4e(e,t,n){let r=t.directiveStart,i=t.directiveEnd,o=e.data,a=t.attrs,s=[],c=null,l=null;for(let u=r;u<i;u++){let f=o[u],d=n?n.get(f):null,p=d?d.inputs:null,h=d?d.outputs:null;c=sP(0,f.inputs,u,c,p),l=sP(1,f.outputs,u,l,h);let m=c!==null&&a!==null&&!LP(t)?Q4e(c,u,a):null;s.push(m)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=s,t.inputs=c,t.outputs=l}function T4e(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function YE(e,t,n,r,i,o,a,s){let c=No(t,n),l=t.inputs,u;!s&&l!=null&&(u=l[r])?(QE(e,n,u,r,i),o9(t)&&I4e(n,t.index)):t.type&3?(r=T4e(r),i=a!=null?a(i,t.value||"",r):i,o.setProperty(c,r,i)):t.type&12}function I4e(e,t){let n=f3(t,e);n[Pe]&16||(n[Pe]|=64)}function XE(e,t,n,r){if(UP()){let i=r===null?null:{"":-1},o=$4e(e,n),a,s;o===null?a=s=null:[a,s]=o,a!==null&&dB(e,t,n,a,i,s),i&&B4e(n,r,i)}n.mergedAttrs=R8(n.mergedAttrs,n.attrs)}function dB(e,t,n,r,i,o){for(let l=0;l<r.length;l++)HS(jm(n,t),e,r[l].type);j4e(n,e.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let a=!1,s=!1,c=lB(e,t,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=R8(n.mergedAttrs,u.hostAttrs),q4e(e,n,t,c,u),U4e(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let f=u.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),a=!0),!s&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),s=!0),c++}k4e(e,n,o)}function F4e(e,t,n,r,i){let o=i.hostBindings;if(o){let a=e.hostBindingOpCodes;a===null&&(a=e.hostBindingOpCodes=[]);let s=~t.index;R4e(a)!=s&&a.push(s),a.push(n,r,o)}}function R4e(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function O4e(e,t,n,r){let i=n.directiveStart,o=n.directiveEnd;o9(n)&&G4e(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||jm(n,t),l3(r,t);let a=n.initialInputs;for(let s=i;s<o;s++){let c=e.data[s],l=K4(t,e,s,n);if(l3(l,t),a!==null&&X4e(t,s-i,l,c,n,a),c3(c)){let u=f3(n.index,t);u[Vo]=K4(t,e,s,n)}}}function pB(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,a=Cce();try{W4(o);for(let s=r;s<i;s++){let c=e.data[s],l=t[s];vS(s),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&P4e(c,l)}}finally{W4(-1),vS(a)}}function P4e(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function $4e(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let a=n[o];if(AP(t,a.selectors,!1))if(r||(r=[]),c3(a))if(a.findHostDirectiveDefs!==null){let s=[];i=i||new Map,a.findHostDirectiveDefs(a,s,i),r.unshift(...s,a);let c=s.length;OS(e,t,c)}else r.unshift(a),OS(e,t,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return r===null?null:[r,i]}function OS(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function B4e(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new xe(-301,!1);r.push(t[i],o)}}}function U4e(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;c3(t)&&(n[""]=e)}}function j4e(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function q4e(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=X4(i.type,!0)),a=new Q4(o,c3(i),W);e.blueprint[r]=a,n[r]=a,F4e(e,t,r,lB(e,n,i.hostVars,Aa),i)}function G4e(e,t,n){let r=No(t,e),i=fB(n),o=e[Vs].rendererFactory,a=16;n.signals?a=4096:n.onPush&&(a=64);let s=M9(e,b9(e,i,null,a,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=s}function W4e(e,t,n,r,i,o){let a=No(e,t);Y4e(t[zn],a,o,e.value,n,r,i)}function Y4e(e,t,n,r,i,o,a){if(o==null)e.removeAttribute(t,i,n);else{let s=a==null?Y4(o):a(o,r||"",i);e.setAttribute(t,i,s,n)}}function X4e(e,t,n,r,i,o){let a=o[t];if(a!==null)for(let s=0;s<a.length;){let c=a[s++],l=a[s++],u=a[s++],f=a[s++];cB(r,n,c,l,u,f)}}function Q4e(e,t,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let a=e[o];for(let s=0;s<a.length;s+=3)if(a[s]===t){r.push(o,a[s+1],a[s+2],n[i+1]);break}}i+=2}return r}function hB(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function mB(e,t){let n=e.contentQueries;if(n!==null){let r=qr(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a!==-1){let s=e.data[a];EE(o),s.contentQueries(2,t[a],a)}}}finally{qr(r)}}}function M9(e,t){return e[$8]?e[UO][x2]=t:e[$8]=t,e[UO]=t,t}function PS(e,t,n){EE(0);let r=qr(null);try{t(e,n)}finally{qr(r)}}function gB(e){return e[P8]||(e[P8]=[])}function vB(e){return e.cleanup||(e.cleanup=[])}function yB(e,t){let n=e[f6],r=n?n.get(Sa,null):null;r&&r.handleError(t)}function QE(e,t,n,r,i){for(let o=0;o<n.length;){let a=n[o++],s=n[o++],c=n[o++],l=t[a],u=e.data[a];cB(u,l,r,s,c,i)}}function xB(e,t,n){let r=OP(t,e);s4e(e[zn],r,n)}function K4e(e,t){let n=f3(t,e),r=n[Ye];Z4e(r,n);let i=n[Ts];i!==null&&n[O8]===null&&(n[O8]=NE(i,n[f6])),KE(r,n,n[Vo])}function Z4e(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function KE(e,t,n){DE(t);try{let r=e.viewQuery;r!==null&&PS(1,r,n);let i=e.template;i!==null&&uB(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Ns]?.finishViewCreation(e),e.staticContentQueries&&mB(e,t),e.staticViewQueries&&PS(2,e.viewQuery,n);let o=e.components;o!==null&&J4e(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[Pe]&=-5,zE()}}function J4e(e,t){for(let n=0;n<t.length;n++)K4e(e,t[n])}function CB(e,t,n,r){let i=t.tView,a=e[Pe]&4096?4096:16,s=b9(e,i,n,a,null,t,null,null,null,r?.injector??null,r?.dehydratedView??null),c=e[t.index];s[Q8]=c;let l=e[Ns];return l!==null&&(s[Ns]=l.createEmbeddedView(i)),KE(i,s,n),s}function ele(e,t){let n=M1+t;if(n<e.length)return e[n]}function $S(e,t){return!t||t.firstChild===null||t$(e)}function bB(e,t,n,r=!0){let i=t[Ye];if(d4e(i,t,e,n),r){let a=RS(n,e),s=t[zn],c=BE(s,e[G4]);c!==null&&u4e(i,e[eo],s,t,c,a)}let o=t[O8];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function tle(e,t){let n=qm(e,t);return n!==void 0&&$E(n[Ye],n),n}function Wm(e,t,n,r,i=!1){for(;n!==null;){let o=t[n.index];o!==null&&r.push(wa(o)),Is(o)&&nle(o,r);let a=n.type;if(a&8)Wm(e,t,n.child,r);else if(a&32){let s=PE(n,t),c;for(;c=s();)r.push(c)}else if(a&16){let s=nB(t,n);if(Array.isArray(s))r.push(...s);else{let c=U8(t[C2]);Wm(c[Ye],c,s,r,!0)}}n=i?n.projectionNext:n.next}return r}function nle(e,t){for(let n=M1;n<e.length;n++){let r=e[n],i=r[Ye].firstChild;i!==null&&Wm(r[Ye],r,i,t)}e[G4]!==e[Ts]&&t.push(e[G4])}var MB=[];function rle(e){return e[q4]??ile(e)}function ile(e){let t=MB.pop()??Object.create(ale);return t.lView=e,t}function ole(e){e.lView[q4]!==e&&(e.lView=null,MB.push(e))}var ale=k(x({},cO),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{B8(e.lView)},consumerOnSignalRead(){this.lView[q4]=this}});function wB(e){return EB(e[$8])}function SB(e){return EB(e[x2])}function EB(e){for(;e!==null&&!Is(e);)e=e[x2];return e}var DB=100;function zB(e,t=!0,n=0){let r=e[Vs],i=r.rendererFactory,o=!1;o||i.begin?.();try{sle(e,n)}catch(a){throw t&&yB(e,a),a}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function sle(e,t){BS(e,t);let n=0;for(;bE(e);){if(n===DB)throw new xe(103,!1);n++,BS(e,1)}}function cle(e,t,n,r){let i=t[Pe];if((i&256)===256)return;let o=!1;!o&&t[Vs].inlineEffectRunner?.flush(),DE(t);let a=null,s=null;!o&&lle(e)&&(s=rle(t),a=lO(s));try{$P(t),vce(e.bindingStartIndex),n!==null&&uB(e,t,n,2,r);let c=(i&3)===3;if(!o)if(c){let f=e.preOrderCheckHooks;f!==null&&Vm(t,f,null)}else{let f=e.preOrderHooks;f!==null&&Nm(t,f,0,null),nS(t,0)}if(ule(t),HB(t,0),e.contentQueries!==null&&mB(e,t),!o)if(c){let f=e.contentCheckHooks;f!==null&&Vm(t,f)}else{let f=e.contentHooks;f!==null&&Nm(t,f,1),nS(t,1)}D4e(e,t);let l=e.components;l!==null&&AB(t,l,0);let u=e.viewQuery;if(u!==null&&PS(2,u,r),!o)if(c){let f=e.viewCheckHooks;f!==null&&Vm(t,f)}else{let f=e.viewHooks;f!==null&&Nm(t,f,2),nS(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Jw]){for(let f of t[Jw])f();t[Jw]=null}o||(t[Pe]&=-73)}catch(c){throw B8(t),c}finally{s!==null&&(uO(s,a),ole(s)),zE()}}function lle(e){return e.type!==2}function HB(e,t){for(let n=wB(e);n!==null;n=SB(n))for(let r=M1;r<n.length;r++){let i=n[r];LB(i,t)}}function ule(e){for(let t=wB(e);t!==null;t=SB(t)){if(!(t[Pe]&vE.HasTransplantedViews))continue;let n=t[d6];for(let r=0;r<n.length;r++){let i=n[r],o=i[Wr];ace(i)}}}function fle(e,t,n){let r=f3(t,e);LB(r,n)}function LB(e,t){CE(e)&&BS(e,t)}function BS(e,t){let r=e[Ye],i=e[Pe],o=e[q4],a=!!(t===0&&i&16);if(a||=!!(i&64&&t===0),a||=!!(i&1024),a||=!!(o?.dirty&&_w(o)),o&&(o.dirty=!1),e[Pe]&=-9217,a)cle(r,e,r.template,e[Vo]);else if(i&8192){HB(e,1);let s=r.components;s!==null&&AB(e,s,1)}}function AB(e,t,n){for(let r=0;r<t.length;r++)fle(e,t[r],n)}function ZE(e){for(e[Vs].changeDetectionScheduler?.notify();e;){e[Pe]|=64;let t=U8(e);if(Jse(e)&&!t)return e;e=t}return null}var Z4=class{get rootNodes(){let t=this._lView,n=t[Ye];return Wm(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vo]}set context(t){this._lView[Vo]=t}get destroyed(){return(this._lView[Pe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Wr];if(Is(t)){let n=t[Fm],r=n?n.indexOf(this):-1;r>-1&&(qm(t,r),Rm(n,r))}this._attachedToViewContainer=!1}$E(this._lView[Ye],this._lView)}onDestroy(t){BP(this._lView,t)}markForCheck(){ZE(this._cdRefInjectingView||this._lView)}detach(){this._lView[Pe]&=-129}reattach(){gS(this._lView),this._lView[Pe]|=128}detectChanges(){this._lView[Pe]|=1024,zB(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,K$(this._lView[Ye],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=t,gS(this._lView)}},J4=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=hle;let e=t;return e})(),dle=J4,ple=class extends dle{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=CB(this._declarationLView,this._declarationTContainer,t,{injector:n,dehydratedView:r});return new Z4(i)}};function hle(){return w9(mi(),it())}function w9(e,t){return e.type&4?new ple(t,e,C6(e,t)):null}var SGe=new RegExp(`^(\\d+)*(${Qce}|${Xce})*(.*)`);var mle=()=>null;function US(e,t){return mle(e,t)}var jS=class{},qS=class{},Ym=class{};function gle(e){let t=Error(`No component factory found for ${Bi(e)}.`);return t[vle]=e,t}var vle="ngComponent";var GS=class{resolveComponentFactory(t){throw gle(t)}},S9=(()=>{let t=class t{};t.NULL=new GS;let e=t;return e})(),G8=class{},to=(()=>{let t=class t{constructor(){this.destroyNode=null}};t.__NG_ELEMENT_ID__=()=>yle();let e=t;return e})();function yle(){let e=it(),t=mi(),n=f3(t.index,e);return(U4(n)?n:e)[zn]}var xle=(()=>{let t=class t{};t.\u0275prov=ue({token:t,providedIn:"root",factory:()=>null});let e=t;return e})(),aS={};function Cle(e){return typeof e=="function"&&e[Nw]!==void 0}var lP=new Set;function J8(e){lP.has(e)||(lP.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function VB(e){return Cle(e)&&typeof e.set=="function"}function JE(e){let t=qr(null);try{return e()}finally{qr(t)}}function NB(e){return Mle(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function ble(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function Mle(e){return e!==null&&(typeof e=="function"||typeof e=="object")}var WS=class{constructor(){}supports(t){return NB(t)}create(t){return new YS(t)}},wle=(e,t)=>t,YS=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||wle}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let a=!r||n&&n.currentIndex<uP(r,i,o)?n:r,s=uP(a,i,o),c=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(n=n._next,a.previousIndex==null)i++;else{o||(o=[]);let l=s-i,u=c-i;if(l!=u){for(let d=0;d<l;d++){let p=d<o.length?o[d]:o[d]=0,h=p+d;u<=h&&h<l&&(o[d]=p+1)}let f=a.previousIndex;o[f]=u-l}}s!==c&&t(a,s,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!NB(t))throw new xe(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,a;if(Array.isArray(t)){this.length=t.length;for(let s=0;s<this.length;s++)o=t[s],a=this._trackByFn(s,o),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,o,a,s),r=!0):(r&&(n=this._verifyReinsertion(n,o,a,s)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,ble(t,s=>{a=this._trackByFn(i,s),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,s,a,i),r=!0):(r&&(n=this._verifyReinsertion(n,s,a,i)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new XS(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Xm),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Xm),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},XS=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},QS=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Xm=class{constructor(){this.map=new Map}put(t){let n=t.trackById,r=this.map.get(n);r||(r=new QS,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function uP(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function fP(){return new eD([new WS])}var eD=(()=>{let t=class t{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new t(r)}static extend(r){return{provide:t,useFactory:i=>t.create(r,i||fP()),deps:[[t,new _E,new p9]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new xe(901,!1)}};t.\u0275prov=ue({token:t,providedIn:"root",factory:fP});let e=t;return e})();var Os=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=Sle;let e=t;return e})();function Sle(e){return Ele(mi(),it(),(e&16)===16)}function Ele(e,t,n){if(o9(e)&&!n){let r=f3(e.index,t);return new Z4(r,r)}else if(e.type&47){let r=t[C2];return new Z4(r,t)}return null}var _B=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=Dle,t.__NG_ENV_ID__=r=>r;let e=t;return e})(),KS=class extends _B{constructor(t){super(),this._lView=t}onDestroy(t){return BP(this._lView,t),()=>cce(this._lView,t)}};function Dle(){return new KS(it())}function dP(...e){}function zle(){let e=typeof $n.requestAnimationFrame=="function",t=$n[e?"requestAnimationFrame":"setTimeout"],n=$n[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}var Yt=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Wt(!1),this.onMicrotaskEmpty=new Wt(!1),this.onStable=new Wt(!1),this.onError=new Wt(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=zle().nativeRequestAnimationFrame,Ale(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new xe(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,t,Hle,dP,dP);try{return o.runTask(a,n,r)}finally{o.cancelTask(a)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},Hle={};function tD(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Lle(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call($n,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,ZS(e),e.isCheckStableRunning=!0,tD(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),ZS(e))}function Ale(e){let t=()=>{Lle(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,a,s)=>{if(Vle(s))return n.invokeTask(i,o,a,s);try{return pP(e),n.invokeTask(i,o,a,s)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),hP(e)}},onInvoke:(n,r,i,o,a,s,c)=>{try{return pP(e),n.invoke(i,o,a,s,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),hP(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,ZS(e),tD(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function ZS(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function pP(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function hP(e){e._nesting--,tD(e)}var JS=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wt,this.onMicrotaskEmpty=new Wt,this.onStable=new Wt,this.onError=new Wt}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function Vle(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}function Nle(e="zone.js",t){return e==="noop"?new JS:e==="zone.js"?new Yt(t):e}var s6=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(s6||{}),_le={destroy(){}};function nD(e,t){!t&&u3e(nD);let n=t?.injector??ce(b2);if(!i4e(n))return _le;J8("NgAfterNextRender");let r=n.get(rD),i=r.handler??=new tE,o=t?.phase??s6.MixedReadWrite,a=()=>{i.unregister(c),s()},s=n.get(_B).onDestroy(a),c=new eE(n,o,()=>{a(),e()});return i.register(c),{destroy:a}}var eE=class{constructor(t,n,r){this.phase=n,this.callbackFn=r,this.zone=t.get(Yt),this.errorHandler=t.get(Sa,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(t){this.errorHandler?.handleError(t)}}},tE=class{constructor(){this.executingCallbacks=!1,this.buckets={[s6.EarlyRead]:new Set,[s6.Write]:new Set,[s6.MixedReadWrite]:new Set,[s6.Read]:new Set},this.deferredCallbacks=new Set}register(t){(this.executingCallbacks?this.deferredCallbacks:this.buckets[t.phase]).add(t)}unregister(t){this.buckets[t.phase].delete(t),this.deferredCallbacks.delete(t)}execute(){this.executingCallbacks=!0;for(let t of Object.values(this.buckets))for(let n of t)n.invoke();this.executingCallbacks=!1;for(let t of this.deferredCallbacks)this.buckets[t.phase].add(t);this.deferredCallbacks.clear()}destroy(){for(let t of Object.values(this.buckets))t.clear();this.deferredCallbacks.clear()}},rD=(()=>{let t=class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=ue({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();function Qm(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let a=0;a<t.length;a++){let s=t[a];if(typeof s=="number")o=s;else if(o==1)i=FO(i,s);else if(o==2){let c=s,l=t[++a];r=FO(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Km=class extends S9{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=s3(t);return new g6(n,this.ngModule)}};function mP(e){let t=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let r=e[n];r!==void 0&&t.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return t}function kle(e){let t=e.toLowerCase();return t==="svg"?ece:t==="math"?tce:null}var nE=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=d9(r);let i=this.injector.get(t,aS,r);return i!==aS||n===aS?i:this.parentInjector.get(t,n,r)}},g6=class extends Ym{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=mP(t.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return mP(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=Yse(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){i=i||this.ngModule;let o=i instanceof ji?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new nE(t,o):t,s=a.get(G8,null);if(s===null)throw new xe(407,!1);let c=a.get(xle,null),l=a.get(rD,null),u=a.get(jS,null),f={rendererFactory:s,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:u},d=s.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",h=r?L4e(d,r,this.componentDef.encapsulation,a):Q$(d,p,kle(p)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let g=null;h!==null&&(g=NE(h,a,!0));let v=WE(0,null,null,1,0,null,null,null,null,null,null),y=b9(null,v,null,m,null,null,f,d,a,null,g);DE(y);let C,b;try{let M=this.componentDef,S,w=null;M.findHostDirectiveDefs?(S=[],w=new Map,M.findHostDirectiveDefs(M,S,w),S.push(M)):S=[M];let E=Tle(y,h),D=Ile(E,h,M,S,y,f,d);b=xE(v,Ui),h&&Ole(d,M,h,r),n!==void 0&&Ple(b,this.ngContentSelectors,n),C=Rle(D,M,S,w,y,[$le]),KE(v,y,null)}finally{zE()}return new rE(this.componentType,C,C6(b,y),y,b)}},rE=class extends qS{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Z4(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;QE(o[Ye],o,i,t,n),this.previousInputValues.set(t,n);let a=f3(this._tNode.index,o);ZE(a)}}get injector(){return new j4(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Tle(e,t){let n=e[Ye],r=Ui;return e[r]=t,b6(n,r,2,"#host",null)}function Ile(e,t,n,r,i,o,a){let s=i[Ye];Fle(r,e,t,a);let c=null;t!==null&&(c=NE(t,i[f6]));let l=o.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let f=b9(i,fB(n),null,u,i[e.index],e,o,l,null,null,c);return s.firstCreatePass&&OS(s,e,r.length-1),M9(i,f),i[e.index]=f}function Fle(e,t,n,r){for(let i of e)t.mergedAttrs=R8(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(Qm(t,t.mergedAttrs,!0),n!==null&&oB(r,n,t))}function Rle(e,t,n,r,i,o){let a=mi(),s=i[Ye],c=No(a,i);dB(s,i,a,n,null,r);for(let u=0;u<n.length;u++){let f=a.directiveStart+u,d=K4(i,s,f,a);l3(d,i)}pB(s,i,a),c&&l3(c,i);let l=K4(i,s,a.directiveStart+a.componentOffset,a);if(e[Vo]=i[Vo]=l,o!==null)for(let u of o)u(l,t);return jE(s,a,i),l}function Ole(e,t,n,r){if(r)mS(e,n,["ng-version","17.2.3"]);else{let{attrs:i,classes:o}=Xse(t.selectors[0]);i&&mS(e,n,i),o&&o.length>0&&iB(e,n,o.join(" "))}}function Ple(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function $le(){let e=mi();g9(it()[Ye],e)}var d3=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=Ble;let e=t;return e})();function Ble(){let e=mi();return TB(e,it())}var Ule=d3,kB=class extends Ule{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return C6(this._hostTNode,this._hostLView)}get injector(){return new j4(this._hostTNode,this._hostLView)}get parentInjector(){let t=IE(this._hostTNode,this._hostLView);if(S$(t)){let n=Bm(t,this._hostLView),r=$m(t),i=n[Ye].data[r+8];return new j4(i,n)}else return new j4(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=gP(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-M1}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=US(this._lContainer,t.ssrId),s=t.createEmbeddedViewImpl(n||{},o,a);return this.insertImpl(s,i,$S(this._hostTNode,a)),s}createComponent(t,n,r,i,o){let a=t&&!d3e(t),s;if(a)s=n;else{let h=n||{};s=h.index,r=h.injector,i=h.projectableNodes,o=h.environmentInjector||h.ngModuleRef}let c=a?t:new g6(s3(t)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let m=(a?l:this.parentInjector).get(ji,null);m&&(o=m)}let u=s3(c.componentType??{}),f=US(this._lContainer,u?.id??null),d=f?.firstChild??null,p=c.create(l,i,d,o);return this.insertImpl(p.hostView,s,$S(this._hostTNode,f)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(oce(i)){let s=this.indexOf(t);if(s!==-1)this.detach(s);else{let c=i[Wr],l=new kB(c,c[eo],c[Wr]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),a=this._lContainer;return bB(a,i,o,r),t.attachToViewContainerRef(),e$(sS(a),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=gP(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=qm(this._lContainer,n);r&&(Rm(sS(this._lContainer),n),$E(r[Ye],r))}detach(t){let n=this._adjustIndex(t,-1),r=qm(this._lContainer,n);return r&&Rm(sS(this._lContainer),n)!=null?new Z4(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function gP(e){return e[Fm]}function sS(e){return e[Fm]||(e[Fm]=[])}function TB(e,t){let n,r=t[e.index];return Is(r)?n=r:(n=hB(r,t,null,e),t[e.index]=n,M9(t,n)),qle(n,t,e,r),new kB(n,e,t)}function jle(e,t){let n=e[zn],r=n.createComment(""),i=No(t,e),o=BE(n,i);return Gm(n,o,r,y4e(n,i),!1),r}var qle=Yle,Gle=()=>!1;function Wle(e,t,n){return Gle(e,t,n)}function Yle(e,t,n,r){if(e[G4])return;let i;n.type&8?i=wa(r):i=jle(t,n),e[G4]=i}var iE=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},oE=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let a=n.getByIndex(o),s=this.queries[a.indexInDeclarationView];i.push(s.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)iD(t,n).matches!==null&&this.queries[n].setDirty()}},aE=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=n0e(t):this.predicate=t}},sE=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},cE=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,n,Xle(n,o)),this.matchTNodeWithReadOption(t,n,_m(n,t,o,!1,!1))}else r===J4?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,_m(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Yr||i===d3||i===J4&&n.type&4)this.addMatch(n.index,-2);else{let o=_m(n,t,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function Xle(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function Qle(e,t){return e.type&11?C6(e,t):e.type&4?w9(e,t):null}function Kle(e,t,n,r){return n===-1?Qle(t,e):n===-2?Zle(e,t,r):K4(e,e[Ye],n,t)}function Zle(e,t,n){if(n===Yr)return C6(t,e);if(n===J4)return w9(t,e);if(n===d3)return TB(t,e)}function IB(e,t,n,r){let i=t[Ns].queries[r];if(i.matches===null){let o=e.data,a=n.matches,s=[];for(let c=0;a!==null&&c<a.length;c+=2){let l=a[c];if(l<0)s.push(null);else{let u=o[l];s.push(Kle(t,u,a[c+1],n.metadata.read))}}i.matches=s}return i.matches}function lE(e,t,n,r){let i=e.queries.getByIndex(n),o=i.matches;if(o!==null){let a=IB(e,t,i,n);for(let s=0;s<o.length;s+=2){let c=o[s];if(c>0)r.push(a[s/2]);else{let l=o[s+1],u=t[-c];for(let f=M1;f<u.length;f++){let d=u[f];d[Q8]===d[Wr]&&lE(d[Ye],d,l,r)}if(u[d6]!==null){let f=u[d6];for(let d=0;d<f.length;d++){let p=f[d];lE(p[Ye],p,l,r)}}}}}return r}function Jle(e,t){return e[Ns].queries[t].queryList}function e0e(e,t,n){let r=new yS((n&4)===4);return N4e(e,t,r,r.destroy),(t[Ns]??=new oE).queries.push(new iE(r))-1}function t0e(e,t,n,r){let i=Kn();if(i.firstCreatePass){let o=mi();r0e(i,new aE(t,n,r),o.index),i0e(i,e),(n&2)===2&&(i.staticContentQueries=!0)}return e0e(i,it(),n)}function n0e(e){return e.split(",").map(t=>t.trim())}function r0e(e,t,n){e.queries===null&&(e.queries=new sE),e.queries.track(new cE(t,n))}function i0e(e,t){let n=e.contentQueries||(e.contentQueries=[]),r=n.length?n[n.length-1]:-1;t!==r&&n.push(e.queries.length-1,t)}function iD(e,t){return e.queries.getByIndex(t)}function o0e(e,t){let n=e[Ye],r=iD(n,t);return r.crossesNgTemplate?lE(n,e,t,[]):IB(n,e,r,t)}function a0e(e){let t=[],n=new Map;function r(i){let o=n.get(i);if(!o){let a=e(i);n.set(i,o=a.then(u0e))}return o}return Zm.forEach((i,o)=>{let a=[];i.templateUrl&&a.push(r(i.templateUrl).then(l=>{i.template=l}));let s=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=s,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,u=i.styleUrls;i.styleUrls.forEach((f,d)=>{s.push(""),a.push(r(f).then(p=>{s[l+d]=p,u.splice(u.indexOf(f),1),u.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&a.push(r(i.styleUrl).then(l=>{s.push(l),i.styleUrl=void 0}));let c=Promise.all(a).then(()=>f0e(o));t.push(c)}),c0e(),Promise.all(t).then(()=>{})}var Zm=new Map,s0e=new Set;function c0e(){let e=Zm;return Zm=new Map,e}function l0e(){return Zm.size===0}function u0e(e){return typeof e=="string"?e:e.text()}function f0e(e){s0e.delete(e)}function d0e(e){return Object.getPrototypeOf(e.prototype).constructor}function no(e){let t=d0e(e.type),n=!0,r=[e];for(;t;){let i;if(c3(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new xe(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let a=e;a.inputs=zm(e.inputs),a.inputTransforms=zm(e.inputTransforms),a.declaredInputs=zm(e.declaredInputs),a.outputs=zm(e.outputs);let s=i.hostBindings;s&&v0e(e,s);let c=i.viewQuery,l=i.contentQueries;if(c&&m0e(e,c),l&&g0e(e,l),p0e(e,i),_se(e.outputs,i.outputs),c3(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let a=0;a<o.length;a++){let s=o[a];s&&s.ngInherit&&s(e),s===no&&(n=!1)}}t=Object.getPrototypeOf(t)}h0e(r)}function p0e(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=t.inputTransforms[i]}}}function h0e(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=R8(i.hostAttrs,n=R8(n,i.hostAttrs))}}function zm(e){return e===u6?{}:e===Ao?[]:e}function m0e(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function g0e(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function v0e(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function oD(e){let t=e.inputConfig,n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}e.inputTransforms=n}var u3=class{},W8=class{};var Jm=class extends u3{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Km(this);let i=kP(t);this._bootstrapComponents=X$(i.bootstrap),this._r3Injector=_$(t,n,[{provide:u3,useValue:this},{provide:S9,useValue:this.componentFactoryResolver},...r],Bi(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},e9=class extends W8{constructor(t){super(),this.moduleType=t}create(t){return new Jm(this.moduleType,t,[])}};function y0e(e,t,n){return new Jm(e,t,n)}var uE=class extends u3{constructor(t){super(),this.componentFactoryResolver=new Km(this),this.instance=null;let n=new q8([...t.providers,{provide:u3,useValue:this},{provide:S9,useValue:this.componentFactoryResolver}],t.parent||TE(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function E9(e,t,n=null){return new uE({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var rl=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Pn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function FB(e,t,n){return e[t]=n}function x0e(e,t){return e[t]}function Ea(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function C0e(e,t,n,r){let i=Ea(e,t,n);return Ea(e,t+1,r)||i}function b0e(e,t,n,r,i,o,a,s,c){let l=t.consts,u=b6(t,e,4,a||null,p6(l,s));XE(t,n,u,p6(l,c)),g9(t,u);let f=u.tView=WE(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,u),f.queries=t.queries.embeddedTView(u)),u}function wt(e,t,n,r,i,o,a,s){let c=it(),l=Kn(),u=e+Ui,f=l.firstCreatePass?b0e(u,l,c,t,n,r,i,o,a):l.data[u];tl(f,!1);let d=M0e(l,c,f,e);c9()&&x9(l,c,d,f),l3(d,c);let p=hB(d,c,d,f);return c[u]=p,M9(c,p),Wle(p,f,c),a9(f)&&qE(l,c,f),a!=null&&GE(c,f,s),wt}var M0e=w0e;function w0e(e,t,n,r){return l9(!0),t[zn].createComment("")}function M6(e,t,n,r){let i=it(),o=x6();if(Ea(i,o,t)){let a=Kn(),s=s9();W4e(s,i,e,t,n,r)}return M6}function S0e(e,t,n,r){return Ea(e,x6(),n)?t+Y4(n)+r:Aa}function E0e(e,t,n,r,i,o){let a=gce(),s=C0e(e,a,n,i);return GP(2),s?t+Y4(n)+r+Y4(i)+o:Aa}function Hm(e,t){return e<<17|t<<2}function el(e){return e>>17&32767}function D0e(e){return(e&2)==2}function z0e(e,t){return e&131071|t<<17}function fE(e){return e|2}function v6(e){return(e&131068)>>2}function cS(e,t){return e&-131069|t<<2}function H0e(e){return(e&1)===1}function dE(e){return e|1}function L0e(e,t,n,r,i,o){let a=o?t.classBindings:t.styleBindings,s=el(a),c=v6(a);e[r]=n;let l=!1,u;if(Array.isArray(n)){let f=n;u=f[1],(u===null||K8(f,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let d=el(e[s+1]);e[r+1]=Hm(d,s),d!==0&&(e[d+1]=cS(e[d+1],r)),e[s+1]=z0e(e[s+1],r)}else e[r+1]=Hm(s,0),s!==0&&(e[s+1]=cS(e[s+1],r)),s=r;else e[r+1]=Hm(c,0),s===0?s=r:e[c+1]=cS(e[c+1],r),c=r;l&&(e[r+1]=fE(e[r+1])),vP(e,u,r,!0),vP(e,u,r,!1),A0e(t,u,e,r,o),a=Hm(s,c),o?t.classBindings=a:t.styleBindings=a}function A0e(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&K8(o,t)>=0&&(n[r+1]=dE(n[r+1]))}function vP(e,t,n,r){let i=e[n+1],o=t===null,a=r?el(i):v6(i),s=!1;for(;a!==0&&(s===!1||o);){let c=e[a],l=e[a+1];V0e(c,t)&&(s=!0,e[a+1]=r?dE(l):fE(l)),a=r?el(l):v6(l)}s&&(e[n+1]=r?fE(i):dE(i))}function V0e(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?K8(e,t)>=0:!1}function ve(e,t,n){let r=it(),i=x6();if(Ea(r,i,t)){let o=Kn(),a=s9();YE(o,a,r,e,t,r[zn],n,!1)}return ve}function yP(e,t,n,r,i){let o=t.inputs,a=i?"class":"style";QE(e,n,o[a],a,r)}function e5(e,t){return N0e(e,t,null,!0),e5}function N0e(e,t,n,r){let i=it(),o=Kn(),a=GP(2);if(o.firstUpdatePass&&k0e(o,e,a,r),t!==Aa&&Ea(i,a,t)){let s=o.data[nl()];O0e(o,s,i,i[zn],e,i[a+1]=P0e(t,n),r,a)}}function _0e(e,t){return t>=e.expandoStartIndex}function k0e(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[nl()],a=_0e(e,n);$0e(o,r)&&t===null&&!a&&(t=!1),t=T0e(i,o,t,r),L0e(i,o,t,n,a,r)}}function T0e(e,t,n,r){let i=bce(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=lS(null,e,t,n,r),n=Y8(n,t.attrs,r),o=null);else{let a=t.directiveStylingLast;if(a===-1||e[a]!==i)if(n=lS(i,e,t,n,r),o===null){let c=I0e(e,t,r);c!==void 0&&Array.isArray(c)&&(c=lS(null,e,t,c[1],r),c=Y8(c,t.attrs,r),F0e(e,t,r,c))}else o=R0e(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function I0e(e,t,n){let r=n?t.classBindings:t.styleBindings;if(v6(r)!==0)return e[el(r)]}function F0e(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[el(i)]=r}function R0e(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let a=e[o].hostAttrs;r=Y8(r,a,n)}return Y8(r,t.attrs,n)}function lS(e,t,n,r,i){let o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(s===-1?s=n.directiveStart:s++;s<a&&(o=t[s],r=Y8(r,o.hostAttrs,i),o!==e);)s++;return e!==null&&(n.directiveStylingLast=s),r}function Y8(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];typeof a=="number"?i=a:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Vce(e,a,n?!0:t[++o]))}return e===void 0?null:e}function O0e(e,t,n,r,i,o,a,s){if(!(t.type&3))return;let c=e.data,l=c[s+1],u=H0e(l)?xP(c,t,n,i,v6(l),a):void 0;if(!t9(u)){t9(o)||D0e(l)&&(o=xP(c,null,n,i,s,a));let f=OP(nl(),n);S4e(r,a,f,i,o)}}function xP(e,t,n,r,i,o){let a=t===null,s;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,f=u===null,d=n[i+1];d===Aa&&(d=f?Ao:void 0);let p=f?eS(d,r):u===r?d:void 0;if(l&&!t9(p)&&(p=eS(c,r)),t9(p)&&(s=p,a))return s;let h=e[i+1];i=a?el(h):v6(h)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(s=eS(c,r))}return s}function t9(e){return e!==void 0}function P0e(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Bi(M2(e)))),e}function $0e(e,t){return(e.flags&(t?8:16))!==0}function RB(e,t,n){J8("NgControlFlow");let r=it(),i=x6(),o=B0e(r,Ui+e),a=0;if(Ea(r,i,t)){let s=qr(null);try{if(tle(o,a),t!==-1){let c=U0e(r[Ye],Ui+t),l=US(o,c.tView.ssrId),u=CB(r,c,n,{dehydratedView:l});bB(o,u,a,$S(c,l))}}finally{qr(s)}}else{let s=ele(o,a);s!==void 0&&(s[Vo]=n)}}function B0e(e,t){return e[t]}function U0e(e,t){return xE(e,t)}function j0e(e,t,n,r,i,o){let a=t.consts,s=p6(a,i),c=b6(t,e,2,r,s);return XE(t,n,c,p6(a,o)),c.attrs!==null&&Qm(c,c.attrs,!1),c.mergedAttrs!==null&&Qm(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function z(e,t,n,r){let i=it(),o=Kn(),a=Ui+e,s=i[zn],c=o.firstCreatePass?j0e(a,o,i,t,n,r):o.data[a],l=q0e(o,i,c,s,t,e);i[a]=l;let u=a9(c);return tl(c,!0),oB(s,l,c),(c.flags&32)!==32&&c9()&&x9(o,i,l,c),lce()===0&&l3(l,i),uce(),u&&(qE(o,i,c),jE(o,c,i)),r!==null&&GE(i,c),z}function H(){let e=mi();ME()?wE():(e=e.parent,tl(e,!1));let t=e;dce(t)&&pce(),fce();let n=Kn();return n.firstCreatePass&&(g9(n,e),yE(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&x3e(t)&&yP(n,t,it(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&C3e(t)&&yP(n,t,it(),t.stylesWithoutHost,!1),H}function Cn(e,t,n,r){return z(e,t,n,r),H(),Cn}var q0e=(e,t,n,r,i,o)=>(l9(!0),Q$(r,i,Sce()));function G0e(e,t,n,r,i){let o=t.consts,a=p6(o,r),s=b6(t,e,8,"ng-container",a);a!==null&&Qm(s,a,!0);let c=p6(o,i);return XE(t,n,s,c),t.queries!==null&&t.queries.elementStart(t,s),s}function w1(e,t,n){let r=it(),i=Kn(),o=e+Ui,a=i.firstCreatePass?G0e(o,i,r,t,n):i.data[o];tl(a,!0);let s=W0e(i,r,a,e);return r[o]=s,c9()&&x9(i,r,s,a),l3(s,r),a9(a)&&(qE(i,r,a),jE(i,a,r)),n!=null&&GE(r,a),w1}function S1(){let e=mi(),t=Kn();return ME()?wE():(e=e.parent,tl(e,!1)),t.firstCreatePass&&(g9(t,e),yE(e)&&t.queries.elementEnd(e)),S1}var W0e=(e,t,n,r)=>(l9(!0),c4e(t[zn],""));function ro(){return it()}function aD(e,t,n){let r=it(),i=x6();if(Ea(r,i,t)){let o=Kn(),a=s9();YE(o,a,r,e,t,r[zn],n,!0)}return aD}var B4=void 0;function Y0e(e){let t=e,n=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var X0e=["en",[["a","p"],["AM","PM"],B4],[["AM","PM"],B4,B4],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],B4,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],B4,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",B4,"{1} 'at' {0}",B4],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Y0e],uS={};function ko(e){let t=Q0e(e),n=CP(t);if(n)return n;let r=t.split("-")[0];if(n=CP(r),n)return n;if(r==="en")return X0e;throw new xe(701,!1)}function CP(e){return e in uS||(uS[e]=$n.ng&&$n.ng.common&&$n.ng.common.locales&&$n.ng.common.locales[e]),uS[e]}var Bn=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Bn||{});function Q0e(e){return e.toLowerCase().replace(/_/g,"-")}var n9="en-US";var K0e=n9;function Z0e(e){typeof e=="string"&&(K0e=e.toLowerCase().replace(/_/g,"-"))}function Ve(e,t,n,r){let i=it(),o=Kn(),a=mi();return OB(o,i,i[zn],a,e,t,r),Ve}function J0e(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===n&&i[o+1]===r){let s=t[P8],c=i[o+2];return s.length>c?s[c]:null}typeof a=="string"&&(o+=2)}return null}function OB(e,t,n,r,i,o,a){let s=a9(r),l=e.firstCreatePass&&vB(e),u=t[Vo],f=gB(t),d=!0;if(r.type&3||a){let m=No(r,t),g=a?a(m):m,v=f.length,y=a?b=>a(wa(b[r.index])):r.index,C=null;if(!a&&s&&(C=J0e(e,t,i,r.index)),C!==null){let b=C.__ngLastListenerFn__||C;b.__ngNextListenerFn__=o,C.__ngLastListenerFn__=o,d=!1}else{o=MP(r,t,u,o,!1);let b=n.listen(g,i,o);f.push(o,b),l&&l.push(i,y,v,v+1)}}else o=MP(r,t,u,o,!1);let p=r.outputs,h;if(d&&p!==null&&(h=p[i])){let m=h.length;if(m)for(let g=0;g<m;g+=2){let v=h[g],y=h[g+1],M=t[v][y].subscribe(o),S=f.length;if(f.push(o,M),l){let w=typeof M=="function"?S+1:-(S+1);l.push(i,r.index,S,w)}}}}function bP(e,t,n,r){try{return Ca(6,t,n),n(r)!==!1}catch(i){return yB(e,i),!1}finally{Ca(7,t,n)}}function MP(e,t,n,r,i){return function o(a){if(a===Function)return r;let s=e.componentOffset>-1?f3(e.index,t):t;ZE(s);let c=bP(t,n,r,a),l=o.__ngNextListenerFn__;for(;l;)c=bP(t,n,l,a)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&a.preventDefault(),c}}function St(e=1){return wce(e)}function e6e(e,t){let n=null,r=Use(e);for(let i=0;i<t.length;i++){let o=t[i];if(o==="*"){n=i;continue}if(r===null?AP(e,o,!0):Gse(r,o))return i}return n}function PB(e){let t=it()[C2][eo];if(!t.projection){let n=e?e.length:1,r=t.projection=Lce(n,null),i=r.slice(),o=t.child;for(;o!==null;){let a=e?e6e(o,e):0;a!==null&&(i[a]?i[a].projectionNext=o:r[a]=o,i[a]=o),o=o.next}}}function $B(e,t=0,n){let r=it(),i=Kn(),o=b6(i,Ui+e,16,null,n||null);o.projection===null&&(o.projection=t),wE(),(!r[O8]||jP())&&(o.flags&32)!==32&&M4e(i,r,o)}function BB(e,t,n,r){t0e(e,t,n,r)}function UB(e){let t=it(),n=Kn(),r=WP();EE(r+1);let i=iD(n,r);if(e.dirty&&ice(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=o0e(t,r);e.reset(o,Dce),e.notifyOnChanges()}return!0}return!1}function jB(){return Jle(it(),WP())}function t6e(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function il(e){let t=mce();return PP(t,Ui+e)}function T(e,t=""){let n=it(),r=Kn(),i=e+Ui,o=r.firstCreatePass?b6(r,i,1,t,null):r.data[i],a=n6e(r,n,o,t,e);n[i]=a,c9()&&x9(r,n,a,o),tl(o,!1)}var n6e=(e,t,n,r,i)=>(l9(!0),a4e(t[zn],r));function io(e){return Ne("",e,""),io}function Ne(e,t,n){let r=it(),i=S0e(r,e,t,n);return i!==Aa&&xB(r,nl(),i),Ne}function t5(e,t,n,r,i){let o=it(),a=E0e(o,e,t,n,r,i);return a!==Aa&&xB(o,nl(),a),t5}function pt(e,t,n){VB(t)&&(t=t());let r=it(),i=x6();if(Ea(r,i,t)){let o=Kn(),a=s9();YE(o,a,r,e,t,r[zn],n,!1)}return pt}function Et(e,t){let n=VB(e);return n&&e.set(t),n}function ht(e,t){let n=it(),r=Kn(),i=mi();return OB(r,n,n[zn],i,e,t),ht}function r6e(e,t,n){let r=Kn();if(r.firstCreatePass){let i=c3(e);pE(n,r.data,r.blueprint,i,!0),pE(t,r.data,r.blueprint,i,!1)}}function pE(e,t,n,r,i){if(e=$i(e),Array.isArray(e))for(let o=0;o<e.length;o++)pE(e[o],t,n,r,i);else{let o=Kn(),a=it(),s=mi(),c=m6(e)?e:$i(e.provide),l=y$(e),u=s.providerIndexes&1048575,f=s.directiveStart,d=s.providerIndexes>>20;if(m6(e)||!e.multi){let p=new Q4(l,i,W),h=dS(c,t,i?u:u+d,f);h===-1?(HS(jm(s,a),o,c),fS(o,e,t.length),t.push(c),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),n.push(p),a.push(p)):(n[h]=p,a[h]=p)}else{let p=dS(c,t,u+d,f),h=dS(c,t,u,u+d),m=p>=0&&n[p],g=h>=0&&n[h];if(i&&!g||!i&&!m){HS(jm(s,a),o,c);let v=a6e(i?o6e:i6e,n.length,i,r,l);!i&&g&&(n[h].providerFactory=v),fS(o,e,t.length,0),t.push(c),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),n.push(v),a.push(v)}else{let v=qB(n[i?h:p],l,!i&&r);fS(o,e,p>-1?p:h,v)}!i&&r&&g&&n[h].componentProviders++}}}function fS(e,t,n,r){let i=m6(t),o=r3e(t);if(i||o){let c=(o?$i(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function qB(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function dS(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function i6e(e,t,n,r){return hE(this.multi,[])}function o6e(e,t,n,r){let i=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,s=K4(n,n[Ye],this.providerFactory.index,r);o=s.slice(0,a),hE(i,o);for(let c=a;c<s.length;c++)o.push(s[c])}else o=[],hE(i,o);return o}function hE(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function a6e(e,t,n,r,i){let o=new Q4(e,n,W);return o.multi=[],o.index=t,o.componentProviders=0,qB(o,i,r&&!n),o}function p3(e,t=[]){return n=>{n.providersResolver=(r,i)=>r6e(r,i?i(e):e,t)}}var s6e=(()=>{let t=class t{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=m$(!1,r.type),o=i.length>0?E9([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=ue({token:t,providedIn:"environment",factory:()=>new t(ge(ji))});let e=t;return e})();function n5(e){J8("NgStandalone"),e.getStandaloneInjector=t=>t.get(s6e).getOrCreateStandaloneInjector(e)}function Va(e,t,n){let r=SE()+e,i=it();return i[r]===Aa?FB(i,r,n?t.call(n):t()):x0e(i,r)}function GB(e,t,n,r){return WB(it(),SE(),e,t,n,r)}function c6e(e,t){let n=e[t];return n===Aa?void 0:n}function WB(e,t,n,r,i,o){let a=t+n;return Ea(e,a,i)?FB(e,a+1,o?r.call(o,i):r(i)):c6e(e,a+1)}function gi(e,t){let n=Kn(),r,i=e+Ui;n.firstCreatePass?(r=l6e(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=X4(r.type,!0)),a,s=b1(W);try{let c=Um(!1),l=o();return Um(c),t6e(n,it(),i,l),l}finally{b1(s)}}function l6e(e,t){if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(e===r.name)return r}}function vi(e,t,n){let r=e+Ui,i=it(),o=PP(i,r);return u6e(i,r)?WB(i,SE(),t,o.transform,n,o):o.transform(n)}function u6e(e,t){return e[Ye].data[t].pure}function Ps(e,t){return w9(e,t)}var Lm=null;function f6e(e){Lm!==null&&(e.defaultEncapsulation!==Lm.defaultEncapsulation||e.preserveWhitespaces!==Lm.preserveWhitespaces)||(Lm=e)}var D9=(()=>{let t=class t{log(r){console.log(r)}warn(r){console.warn(r)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();var sD=new De(""),r5=new De(""),z9=(()=>{let t=class t{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,cD||(d6e(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==a),r()},i)),this._callbacks.push({doneCb:r,timeoutId:a,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};t.\u0275fac=function(i){return new(i||t)(ge(Yt),ge(H9),ge(r5))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),H9=(()=>{let t=class t{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return cD?.findTestabilityInTree(this,r,i)??null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();function d6e(e){cD=e}var cD;function h3(e){return!!e&&typeof e.then=="function"}function lD(e){return!!e&&typeof e.subscribe=="function"}var L9=new De(""),YB=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=ce(L9,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let a=o();if(h3(a))r.push(a);else if(lD(a)){let s=new Promise((c,l)=>{a.subscribe({complete:c,error:l})});r.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),A9=new De("");function p6e(){dO(()=>{throw new xe(600,!1)})}function h6e(e){return e.isBoundToModule}function m6e(e,t,n){try{let r=n();return h3(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}function XB(e,t){return Array.isArray(t)?t.reduce(XB,e):x(x({},e),t)}var ol=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ce(k$),this.afterRenderEffectManager=ce(rD),this.componentTypes=[],this.components=[],this.isStable=ce(rl).hasPendingTasks.pipe(Ke(r=>!r)),this._injector=ce(ji)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Ym;if(!this._injector.get(YB).done){let p=!o&&_P(r),h=!1;throw new xe(405,h)}let s;o?s=r:s=this._injector.get(S9).resolveComponentFactory(r),this.componentTypes.push(s.componentType);let c=h6e(s)?void 0:this._injector.get(u3),l=i||s.selector,u=s.create(b2.NULL,[],l,c),f=u.location.nativeElement,d=u.injector.get(sD,null);return d?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),Tm(this.components,u),d?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new xe(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===DB)throw new xe(103,!1);let o=r===0;for(let{_lView:a,notifyErrorHandler:s}of this._views)!o&&!pS(a)||this.detectChangesInView(a,s,o);if(r++,i.executeInternalCallbacks(),!this._views.some(({_lView:a})=>pS(a))&&(i.execute(),!this._views.some(({_lView:a})=>pS(a))))break}}detectChangesInView(r,i,o){let a;o?(a=0,r[Pe]|=1024):r[Pe]&64?a=0:a=1,zB(r,i,a)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Tm(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(A9,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Tm(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new xe(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Tm(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function pS(e){return bE(e)}var mE=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},V9=(()=>{let t=class t{compileModuleSync(r){return new e9(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=kP(r),a=X$(o.declarations).reduce((s,c)=>{let l=s3(c);return l&&s.push(new g6(l)),s},[]);return new mE(i,a)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),g6e=new De("");function v6e(e,t,n){let r=new e9(n);return Promise.resolve(r)}function wP(e){for(let t=e.length-1;t>=0;t--)if(e[t]!==void 0)return e[t]}var y6e=(()=>{let t=class t{constructor(){this.zone=ce(Yt),this.applicationRef=ce(ol)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function x6e(e){return[{provide:Yt,useFactory:e},{provide:h6,multi:!0,useFactory:()=>{let t=ce(y6e,{optional:!0});return()=>t.initialize()}},{provide:h6,multi:!0,useFactory:()=>{let t=ce(M6e);return()=>{t.initialize()}}},{provide:k$,useFactory:C6e}]}function C6e(){let e=ce(Yt),t=ce(Sa);return n=>e.runOutsideAngular(()=>t.handleError(n))}function b6e(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var M6e=(()=>{let t=class t{constructor(){this.subscription=new lr,this.initialized=!1,this.zone=ce(Yt),this.pendingTasks=ce(rl)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Yt.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Yt.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function w6e(){return typeof $localize<"u"&&$localize.locale||n9}var N9=new De("",{providedIn:"root",factory:()=>ce(N9,rt.Optional|rt.SkipSelf)||w6e()});var QB=new De(""),KB=(()=>{let t=class t{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=Nle(i?.ngZone,b6e({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let a=y0e(r.moduleType,this.injector,x6e(()=>o)),s=a.injector.get(Sa,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:l=>{s.handleError(l)}});a.onDestroy(()=>{Tm(this._modules,a),c.unsubscribe()})}),m6e(s,o,()=>{let c=a.injector.get(YB);return c.runInitializers(),c.donePromise.then(()=>{let l=a.injector.get(N9,n9);return Z0e(l||n9),this._moduleDoBootstrap(a),a})})})}bootstrapModule(r,i=[]){let o=XB({},i);return v6e(this.injector,o,r).then(a=>this.bootstrapModuleFactory(a,o))}_moduleDoBootstrap(r){let i=r.injector.get(ol);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new xe(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(QB,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};t.\u0275fac=function(i){return new(i||t)(ge(b2))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})(),F8=null,ZB=new De("");function S6e(e){if(F8&&!F8.get(ZB,!1))throw new xe(400,!1);p6e(),F8=e;let t=e.get(KB);return z6e(e),t}function uD(e,t,n=[]){let r=`Platform: ${t}`,i=new De(r);return(o=[])=>{let a=JB();if(!a||a.injector.get(ZB,!1)){let s=[...n,...o,{provide:i,useValue:!0}];e?e(s):S6e(E6e(s,r))}return D6e(i)}}function E6e(e=[],t){return b2.create({name:t,providers:[{provide:m9,useValue:"platform"},{provide:QB,useValue:new Set([()=>F8=null])},...e]})}function D6e(e){let t=JB();if(!t)throw new xe(401,!1);return t}function JB(){return F8?.get(KB)??null}function z6e(e){e.get(LE,null)?.forEach(n=>n())}var eU=uD(null,"core",[]),tU=(()=>{let t=class t{constructor(r){}};t.\u0275fac=function(i){return new(i||t)(ge(ol))},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({});let e=t;return e})();function al(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function nU(e){let t=s3(e);if(!t)return null;let n=new g6(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var lU=null;function Na(){return lU}function uU(e){lU??=e}var $9=class{};var Xr=new De(""),MD=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(H6e),providedIn:"platform"});let e=t;return e})(),fU=new De(""),H6e=(()=>{let t=class t extends MD{constructor(){super(),this._doc=ce(Xr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Na().getBaseHref(this._doc)}onPopState(r){let i=Na().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Na().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>new t,providedIn:"platform"});let e=t;return e})();function wD(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function rU(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function Bs(e){return e&&e[0]!=="?"?"?"+e:e}var qs=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(SD),providedIn:"root"});let e=t;return e})(),dU=new De(""),SD=(()=>{let t=class t extends qs{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ce(Xr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return wD(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Bs(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,a){let s=this.prepareExternalUrl(o+Bs(a));this._platformLocation.pushState(r,i,s)}replaceState(r,i,o,a){let s=this.prepareExternalUrl(o+Bs(a));this._platformLocation.replaceState(r,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(i){return new(i||t)(ge(MD),ge(dU,8))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),pU=(()=>{let t=class t extends qs{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=wD(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,a){let s=this.prepareExternalUrl(o+Bs(a));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(r,i,s)}replaceState(r,i,o,a){let s=this.prepareExternalUrl(o+Bs(a));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(i){return new(i||t)(ge(MD),ge(dU,8))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),S6=(()=>{let t=class t{constructor(r){this._subject=new Wt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=V6e(rU(iU(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Bs(i))}normalize(r){return t.stripTrailingSlash(A6e(this._basePath,iU(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Bs(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Bs(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};t.normalizeQueryParams=Bs,t.joinWithSlash=wD,t.stripTrailingSlash=rU,t.\u0275fac=function(i){return new(i||t)(ge(qs))},t.\u0275prov=ue({token:t,factory:()=>L6e(),providedIn:"root"});let e=t;return e})();function L6e(){return new S6(ge(qs))}function A6e(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function iU(e){return e.replace(/\/index.html$/,"")}function V6e(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var qi=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}(qi||{}),Kt=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}(Kt||{}),oo=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}(oo||{}),Us=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e.Infinity=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}(Us||{});function N6e(e){return ko(e)[Bn.LocaleId]}function _6e(e,t,n){let r=ko(e),i=[r[Bn.DayPeriodsFormat],r[Bn.DayPeriodsStandalone]],o=To(i,t);return To(o,n)}function k6e(e,t,n){let r=ko(e),i=[r[Bn.DaysFormat],r[Bn.DaysStandalone]],o=To(i,t);return To(o,n)}function T6e(e,t,n){let r=ko(e),i=[r[Bn.MonthsFormat],r[Bn.MonthsStandalone]],o=To(i,t);return To(o,n)}function I6e(e,t){let r=ko(e)[Bn.Eras];return To(r,t)}function _9(e,t){let n=ko(e);return To(n[Bn.DateFormat],t)}function k9(e,t){let n=ko(e);return To(n[Bn.TimeFormat],t)}function T9(e,t){let r=ko(e)[Bn.DateTimeFormat];return To(r,t)}function U9(e,t){let n=ko(e),r=n[Bn.NumberSymbols][t];if(typeof r>"u"){if(t===Us.CurrencyDecimal)return n[Bn.NumberSymbols][Us.Decimal];if(t===Us.CurrencyGroup)return n[Bn.NumberSymbols][Us.Group]}return r}function hU(e){if(!e[Bn.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[Bn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function F6e(e){let t=ko(e);return hU(t),(t[Bn.ExtraData][2]||[]).map(r=>typeof r=="string"?fD(r):[fD(r[0]),fD(r[1])])}function R6e(e,t,n){let r=ko(e);hU(r);let i=[r[Bn.ExtraData][0],r[Bn.ExtraData][1]],o=To(i,t)||[];return To(o,n)||[]}function To(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new Error("Locale data API: locale data undefined")}function fD(e){let[t,n]=e.split(":");return{hours:+t,minutes:+n}}var O6e=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,I9={},P6e=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,js=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}(js||{}),Nt=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}(Nt||{}),Vt=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}(Vt||{});function $6e(e,t,n,r){let i=Q6e(e);t=$s(n,t)||t;let a=[],s;for(;t;)if(s=P6e.exec(t),s){a=a.concat(s.slice(1));let u=a.pop();if(!u)break;t=u}else{a.push(t);break}let c=i.getTimezoneOffset();r&&(c=gU(r,c),i=X6e(i,r,!0));let l="";return a.forEach(u=>{let f=W6e(u);l+=f?f(i,n,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function B9(e,t,n){let r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function $s(e,t){let n=N6e(e);if(I9[n]??={},I9[n][t])return I9[n][t];let r="";switch(t){case"shortDate":r=_9(e,oo.Short);break;case"mediumDate":r=_9(e,oo.Medium);break;case"longDate":r=_9(e,oo.Long);break;case"fullDate":r=_9(e,oo.Full);break;case"shortTime":r=k9(e,oo.Short);break;case"mediumTime":r=k9(e,oo.Medium);break;case"longTime":r=k9(e,oo.Long);break;case"fullTime":r=k9(e,oo.Full);break;case"short":let i=$s(e,"shortTime"),o=$s(e,"shortDate");r=F9(T9(e,oo.Short),[i,o]);break;case"medium":let a=$s(e,"mediumTime"),s=$s(e,"mediumDate");r=F9(T9(e,oo.Medium),[a,s]);break;case"long":let c=$s(e,"longTime"),l=$s(e,"longDate");r=F9(T9(e,oo.Long),[c,l]);break;case"full":let u=$s(e,"fullTime"),f=$s(e,"fullDate");r=F9(T9(e,oo.Full),[u,f]);break}return r&&(I9[n][t]=r),r}function F9(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,r){return t!=null&&r in t?t[r]:n})),e}function S2(e,t,n="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=-e+1:(e=-e,o=n));let a=String(e);for(;a.length<t;)a="0"+a;return r&&(a=a.slice(a.length-t)),o+a}function B6e(e,t){return S2(e,3).substring(0,t)}function Zn(e,t,n=0,r=!1,i=!1){return function(o,a){let s=U6e(e,o);if((n>0||s>-n)&&(s+=n),e===Nt.Hours)s===0&&n===-12&&(s=12);else if(e===Nt.FractionalSeconds)return B6e(s,t);let c=U9(a,Us.MinusSign);return S2(s,t,c,r,i)}}function U6e(e,t){switch(e){case Nt.FullYear:return t.getFullYear();case Nt.Month:return t.getMonth();case Nt.Date:return t.getDate();case Nt.Hours:return t.getHours();case Nt.Minutes:return t.getMinutes();case Nt.Seconds:return t.getSeconds();case Nt.FractionalSeconds:return t.getMilliseconds();case Nt.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}function nn(e,t,n=qi.Format,r=!1){return function(i,o){return j6e(i,o,e,t,n,r)}}function j6e(e,t,n,r,i,o){switch(n){case Vt.Months:return T6e(t,i,r)[e.getMonth()];case Vt.Days:return k6e(t,i,r)[e.getDay()];case Vt.DayPeriods:let a=e.getHours(),s=e.getMinutes();if(o){let l=F6e(t),u=R6e(t,i,r),f=l.findIndex(d=>{if(Array.isArray(d)){let[p,h]=d,m=a>=p.hours&&s>=p.minutes,g=a<h.hours||a===h.hours&&s<h.minutes;if(p.hours<h.hours){if(m&&g)return!0}else if(m||g)return!0}else if(d.hours===a&&d.minutes===s)return!0;return!1});if(f!==-1)return u[f]}return _6e(t,i,r)[a<12?0:1];case Vt.Eras:return I6e(t,r)[e.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function R9(e){return function(t,n,r){let i=-1*r,o=U9(n,Us.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case js.Short:return(i>=0?"+":"")+S2(a,2,o)+S2(Math.abs(i%60),2,o);case js.ShortGMT:return"GMT"+(i>=0?"+":"")+S2(a,1,o);case js.Long:return"GMT"+(i>=0?"+":"")+S2(a,2,o)+":"+S2(Math.abs(i%60),2,o);case js.Extended:return r===0?"Z":(i>=0?"+":"")+S2(a,2,o)+":"+S2(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${e}"`)}}}var q6e=0,P9=4;function G6e(e){let t=B9(e,q6e,1).getDay();return B9(e,0,1+(t<=P9?P9:P9+7)-t)}function mU(e){let t=e.getDay(),n=t===0?-3:P9-t;return B9(e.getFullYear(),e.getMonth(),e.getDate()+n)}function dD(e,t=!1){return function(n,r){let i;if(t){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,a=n.getDate();i=1+Math.floor((a+o)/7)}else{let o=mU(n),a=G6e(o.getFullYear()),s=o.getTime()-a.getTime();i=1+Math.round(s/6048e5)}return S2(i,e,U9(r,Us.MinusSign))}}function O9(e,t=!1){return function(n,r){let o=mU(n).getFullYear();return S2(o,e,U9(r,Us.MinusSign),t)}}var pD={};function W6e(e){if(pD[e])return pD[e];let t;switch(e){case"G":case"GG":case"GGG":t=nn(Vt.Eras,Kt.Abbreviated);break;case"GGGG":t=nn(Vt.Eras,Kt.Wide);break;case"GGGGG":t=nn(Vt.Eras,Kt.Narrow);break;case"y":t=Zn(Nt.FullYear,1,0,!1,!0);break;case"yy":t=Zn(Nt.FullYear,2,0,!0,!0);break;case"yyy":t=Zn(Nt.FullYear,3,0,!1,!0);break;case"yyyy":t=Zn(Nt.FullYear,4,0,!1,!0);break;case"Y":t=O9(1);break;case"YY":t=O9(2,!0);break;case"YYY":t=O9(3);break;case"YYYY":t=O9(4);break;case"M":case"L":t=Zn(Nt.Month,1,1);break;case"MM":case"LL":t=Zn(Nt.Month,2,1);break;case"MMM":t=nn(Vt.Months,Kt.Abbreviated);break;case"MMMM":t=nn(Vt.Months,Kt.Wide);break;case"MMMMM":t=nn(Vt.Months,Kt.Narrow);break;case"LLL":t=nn(Vt.Months,Kt.Abbreviated,qi.Standalone);break;case"LLLL":t=nn(Vt.Months,Kt.Wide,qi.Standalone);break;case"LLLLL":t=nn(Vt.Months,Kt.Narrow,qi.Standalone);break;case"w":t=dD(1);break;case"ww":t=dD(2);break;case"W":t=dD(1,!0);break;case"d":t=Zn(Nt.Date,1);break;case"dd":t=Zn(Nt.Date,2);break;case"c":case"cc":t=Zn(Nt.Day,1);break;case"ccc":t=nn(Vt.Days,Kt.Abbreviated,qi.Standalone);break;case"cccc":t=nn(Vt.Days,Kt.Wide,qi.Standalone);break;case"ccccc":t=nn(Vt.Days,Kt.Narrow,qi.Standalone);break;case"cccccc":t=nn(Vt.Days,Kt.Short,qi.Standalone);break;case"E":case"EE":case"EEE":t=nn(Vt.Days,Kt.Abbreviated);break;case"EEEE":t=nn(Vt.Days,Kt.Wide);break;case"EEEEE":t=nn(Vt.Days,Kt.Narrow);break;case"EEEEEE":t=nn(Vt.Days,Kt.Short);break;case"a":case"aa":case"aaa":t=nn(Vt.DayPeriods,Kt.Abbreviated);break;case"aaaa":t=nn(Vt.DayPeriods,Kt.Wide);break;case"aaaaa":t=nn(Vt.DayPeriods,Kt.Narrow);break;case"b":case"bb":case"bbb":t=nn(Vt.DayPeriods,Kt.Abbreviated,qi.Standalone,!0);break;case"bbbb":t=nn(Vt.DayPeriods,Kt.Wide,qi.Standalone,!0);break;case"bbbbb":t=nn(Vt.DayPeriods,Kt.Narrow,qi.Standalone,!0);break;case"B":case"BB":case"BBB":t=nn(Vt.DayPeriods,Kt.Abbreviated,qi.Format,!0);break;case"BBBB":t=nn(Vt.DayPeriods,Kt.Wide,qi.Format,!0);break;case"BBBBB":t=nn(Vt.DayPeriods,Kt.Narrow,qi.Format,!0);break;case"h":t=Zn(Nt.Hours,1,-12);break;case"hh":t=Zn(Nt.Hours,2,-12);break;case"H":t=Zn(Nt.Hours,1);break;case"HH":t=Zn(Nt.Hours,2);break;case"m":t=Zn(Nt.Minutes,1);break;case"mm":t=Zn(Nt.Minutes,2);break;case"s":t=Zn(Nt.Seconds,1);break;case"ss":t=Zn(Nt.Seconds,2);break;case"S":t=Zn(Nt.FractionalSeconds,1);break;case"SS":t=Zn(Nt.FractionalSeconds,2);break;case"SSS":t=Zn(Nt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=R9(js.Short);break;case"ZZZZZ":t=R9(js.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=R9(js.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=R9(js.Long);break;default:return null}return pD[e]=t,t}function gU(e,t){e=e.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function Y6e(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function X6e(e,t,n){let r=n?-1:1,i=e.getTimezoneOffset(),o=gU(t,i);return Y6e(e,r*(o-i))}function Q6e(e){if(oU(e))return e;if(typeof e=="number"&&!isNaN(e))return new Date(e);if(typeof e=="string"){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){let[i,o=1,a=1]=e.split("-").map(s=>+s);return B9(i,o-1,a)}let n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let r;if(r=e.match(O6e))return K6e(r)}let t=new Date(e);if(!oU(t))throw new Error(`Unable to convert "${e}" into a date`);return t}function K6e(e){let t=new Date(0),n=0,r=0,i=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));let a=Number(e[4]||0)-n,s=Number(e[5]||0)-r,c=Number(e[6]||0),l=Math.floor(parseFloat("0."+(e[7]||0))*1e3);return o.call(t,a,s,c,l),t}function oU(e){return e instanceof Date&&!isNaN(e.valueOf())}function j9(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var hD=/\s+/,aU=[],vU=(()=>{let t=class t{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=aU,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(hD):aU}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(hD):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(hD).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};t.\u0275fac=function(i){return new(i||t)(W(Yr),W(to))},t.\u0275dir=Qt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[Gr.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let e=t;return e})();var mD=class{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},yi=(()=>{let t=class t{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,a,s)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new mD(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(a===null?void 0:a);else if(a!==null){let c=i.get(a);i.move(c,s),sU(c,o)}});for(let o=0,a=i.length;o<a;o++){let c=i.get(o).context;c.index=o,c.count=a,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let a=i.get(o.currentIndex);sU(a,o)})}static ngTemplateContextGuard(r,i){return!0}};t.\u0275fac=function(i){return new(i||t)(W(d3),W(J4),W(eD))},t.\u0275dir=Qt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let e=t;return e})();function sU(e,t){e.context.$implicit=t.item}var E1=(()=>{let t=class t{constructor(r,i){this._viewContainer=r,this._context=new gD,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){cU("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){cU("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};t.\u0275fac=function(i){return new(i||t)(W(d3),W(J4))},t.\u0275dir=Qt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let e=t;return e})(),gD=class{constructor(){this.$implicit=null,this.ngIf=null}};function cU(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${Bi(t)}'.`)}function yU(e,t){return new xe(2100,!1)}var vD=class{createSubscription(t,n){return JE(()=>t.subscribe({next:n,error:r=>{throw r}}))}dispose(t){JE(()=>t.unsubscribe())}},yD=class{createSubscription(t,n){return t.then(n,r=>{throw r})}dispose(t){}},Z6e=new yD,J6e=new vD,q9=(()=>{let t=class t{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(h3(r))return Z6e;if(lD(r))return J6e;throw yU(t,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};t.\u0275fac=function(i){return new(i||t)(W(Os,16))},t.\u0275pipe=gE({name:"async",type:t,pure:!1,standalone:!0});let e=t;return e})();var eue="mediumDate",tue=new De(""),nue=new De(""),Io=(()=>{let t=class t{constructor(r,i,o){this.locale=r,this.defaultTimezone=i,this.defaultOptions=o}transform(r,i,o,a){if(r==null||r===""||r!==r)return null;try{let s=i??this.defaultOptions?.dateFormat??eue,c=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return $6e(r,s,a||this.locale,c)}catch(s){throw yU(t,s.message)}}};t.\u0275fac=function(i){return new(i||t)(W(N9,16),W(tue,24),W(nue,24))},t.\u0275pipe=gE({name:"date",type:t,pure:!0,standalone:!0});let e=t;return e})();var G9=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({});let e=t;return e})(),ED="browser",rue="server";function iue(e){return e===ED}function DD(e){return e===rue}var xU=(()=>{let t=class t{};t.\u0275prov=ue({token:t,providedIn:"root",factory:()=>iue(ce(Da))?new xD(ce(Xr),window):new CD});let e=t;return e})(),xD=class{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let n=oue(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function oue(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let a=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(a)return a}i=r.nextNode()}}return null}var CD=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},w6=class{};var o5=class{},Y9=class{},sl=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),a=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let a=this.headers.get(n);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}break}}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var HD=class{encodeKey(t){return CU(t)}encodeValue(t){return CU(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function cue(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[a,s]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=n.get(a)||[];c.push(s),n.set(a,c)}),n}var lue=/%(\d[a-f0-9])/gi,uue={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function CU(e){return encodeURIComponent(e).replace(lue,(t,n)=>uue[n]??t)}function W9(e){return`${e}`}var m3=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new HD,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=cue(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],i=Array.isArray(r)?r.map(W9):[W9(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(W9(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(W9(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var LD=class{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function fue(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function bU(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function MU(e){return typeof Blob<"u"&&e instanceof Blob}function wU(e){return typeof FormData<"u"&&e instanceof FormData}function due(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var i5=class e{constructor(t,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(fue(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new sl,this.context??=new LD,!this.params)this.params=new m3,this.urlWithParams=n;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=n;else{let s=n.indexOf("?"),c=s===-1?"?":s<n.length-1?"&":"";this.urlWithParams=n+c+a}}}serializeBody(){return this.body===null?null:bU(this.body)||MU(this.body)||wU(this.body)||due(this.body)||typeof this.body=="string"?this.body:this.body instanceof m3?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||wU(this.body)?null:MU(this.body)?this.body.type||null:bU(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof m3?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.body!==void 0?t.body:this.body,a=t.withCredentials!==void 0?t.withCredentials:this.withCredentials,s=t.reportProgress!==void 0?t.reportProgress:this.reportProgress,c=t.headers||this.headers,l=t.params||this.params,u=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((f,d)=>f.set(d,t.setHeaders[d]),c)),t.setParams&&(l=Object.keys(t.setParams).reduce((f,d)=>f.set(d,t.setParams[d]),l)),new e(n,r,o,{params:l,headers:c,context:u,reportProgress:s,responseType:i,withCredentials:a})}},E6=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(E6||{}),a5=class{constructor(t,n=Q9.Ok,r="OK"){this.headers=t.headers||new sl,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},AD=class e extends a5{constructor(t={}){super(t),this.type=E6.ResponseHeader}clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},D6=class e extends a5{constructor(t={}){super(t),this.type=E6.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},X9=class extends a5{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},Q9=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(Q9||{});function zD(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var Gs=(()=>{let t=class t{constructor(r){this.handler=r}request(r,i,o={}){let a;if(r instanceof i5)a=r;else{let l;o.headers instanceof sl?l=o.headers:l=new sl(o.headers);let u;o.params&&(o.params instanceof m3?u=o.params:u=new m3({fromObject:o.params})),a=new i5(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let s=se(a).pipe(As(l=>this.handler.handle(l)));if(r instanceof i5||o.observe==="events")return s;let c=s.pipe(x1(l=>l instanceof D6));switch(o.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return c.pipe(Ke(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(Ke(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(Ke(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(Ke(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new m3().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,zD(o,i))}post(r,i,o={}){return this.request("POST",r,zD(o,i))}put(r,i,o={}){return this.request("PUT",r,zD(o,i))}};t.\u0275fac=function(i){return new(i||t)(ge(o5))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function zU(e,t){return t(e)}function pue(e,t){return(n,r)=>t.intercept(n,{handle:i=>e(i,r)})}function hue(e,t,n){return(r,i)=>Ha(n,()=>t(r,o=>e(o,i)))}var VD=new De(""),ND=new De(""),mue=new De(""),gue=new De("");function vue(){let e=null;return(t,n)=>{e===null&&(e=(ce(VD,{optional:!0})??[]).reduceRight(pue,zU));let r=ce(rl),i=r.add();return e(t,n).pipe(i3(()=>r.remove(i)))}}var SU=(()=>{let t=class t extends o5{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=ce(rl);let o=ce(gue,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(ND),...this.injector.get(mue,[])]));this.chain=o.reduceRight((a,s)=>hue(a,s,this.injector),zU)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(i3(()=>this.pendingTasks.remove(i)))}};t.\u0275fac=function(i){return new(i||t)(ge(Y9),ge(ji))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();var yue=/^\)\]\}',?\n/;function xue(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var EU=(()=>{let t=class t{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new xe(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?tn(i.\u0275loadImpl()):se(null)).pipe(C1(()=>new Mt(a=>{let s=i.build();if(s.open(r.method,r.urlWithParams),r.withCredentials&&(s.withCredentials=!0),r.headers.forEach((g,v)=>s.setRequestHeader(g,v.join(","))),r.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let g=r.detectContentTypeHeader();g!==null&&s.setRequestHeader("Content-Type",g)}if(r.responseType){let g=r.responseType.toLowerCase();s.responseType=g!=="json"?g:"text"}let c=r.serializeBody(),l=null,u=()=>{if(l!==null)return l;let g=s.statusText||"OK",v=new sl(s.getAllResponseHeaders()),y=xue(s)||r.url;return l=new AD({headers:v,status:s.status,statusText:g,url:y}),l},f=()=>{let{headers:g,status:v,statusText:y,url:C}=u(),b=null;v!==Q9.NoContent&&(b=typeof s.response>"u"?s.responseText:s.response),v===0&&(v=b?Q9.Ok:0);let M=v>=200&&v<300;if(r.responseType==="json"&&typeof b=="string"){let S=b;b=b.replace(yue,"");try{b=b!==""?JSON.parse(b):null}catch(w){b=S,M&&(M=!1,b={error:w,text:b})}}M?(a.next(new D6({body:b,headers:g,status:v,statusText:y,url:C||void 0})),a.complete()):a.error(new X9({error:b,headers:g,status:v,statusText:y,url:C||void 0}))},d=g=>{let{url:v}=u(),y=new X9({error:g,status:s.status||0,statusText:s.statusText||"Unknown Error",url:v||void 0});a.error(y)},p=!1,h=g=>{p||(a.next(u()),p=!0);let v={type:E6.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),r.responseType==="text"&&s.responseText&&(v.partialText=s.responseText),a.next(v)},m=g=>{let v={type:E6.UploadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),a.next(v)};return s.addEventListener("load",f),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),r.reportProgress&&(s.addEventListener("progress",h),c!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(c),a.next({type:E6.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",f),s.removeEventListener("timeout",d),r.reportProgress&&(s.removeEventListener("progress",h),c!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}};t.\u0275fac=function(i){return new(i||t)(ge(w6))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),HU=new De(""),Cue="XSRF-TOKEN",bue=new De("",{providedIn:"root",factory:()=>Cue}),Mue="X-XSRF-TOKEN",wue=new De("",{providedIn:"root",factory:()=>Mue}),K9=class{},Sue=(()=>{let t=class t{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=j9(r,this.cookieName),this.lastCookieString=r),this.lastToken}};t.\u0275fac=function(i){return new(i||t)(ge(Xr),ge(Da),ge(bue))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function Eue(e,t){let n=e.url.toLowerCase();if(!ce(HU)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let r=ce(K9).getToken(),i=ce(wue);return r!=null&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),t(e)}var LU=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(LU||{});function Due(e,t){return{\u0275kind:e,\u0275providers:t}}function zue(...e){let t=[Gs,EU,SU,{provide:o5,useExisting:SU},{provide:Y9,useExisting:EU},{provide:ND,useValue:Eue,multi:!0},{provide:HU,useValue:!0},{provide:K9,useClass:Sue}];for(let n of e)t.push(...n.\u0275providers);return h9(t)}var DU=new De("");function Hue(){return Due(LU.LegacyInterceptors,[{provide:DU,useFactory:vue},{provide:ND,useExisting:DU,multi:!0}])}var AU=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({providers:[zue(Hue())]});let e=t;return e})();var TD=class extends $9{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ID=class e extends TD{static makeCurrent(){uU(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=Lue();return n==null?null:Aue(n)}resetBaseElement(){s5=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return j9(document.cookie,t)}},s5=null;function Lue(){return s5=s5||document.querySelector("base"),s5?s5.getAttribute("href"):null}function Aue(e){return new URL(e,document.baseURI).pathname}var FD=class{addToWindow(t){$n.getAngularTestability=(r,i=!0)=>{let o=t.findTestabilityInTree(r,i);if(o==null)throw new xe(5103,!1);return o},$n.getAllAngularTestabilities=()=>t.getAllTestabilities(),$n.getAllAngularRootElements=()=>t.getAllRootElements();let n=r=>{let i=$n.getAllAngularTestabilities(),o=i.length,a=function(){o--,o==0&&r()};i.forEach(s=>{s.whenStable(a)})};$n.frameworkStabilizers||($n.frameworkStabilizers=[]),$n.frameworkStabilizers.push(n)}findTestabilityInTree(t,n,r){if(n==null)return null;let i=t.getTestability(n);return i??(r?Na().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},Vue=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),RD=new De(""),kU=(()=>{let t=class t{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(a=>a.supports(r)),!i)throw new xe(5101,!1);return this._eventNameToPlugin.set(r,i),i}};t.\u0275fac=function(i){return new(i||t)(ge(RD),ge(Yt))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),J9=class{constructor(t){this._doc=t}},_D="ng-app-id",TU=(()=>{let t=class t{constructor(r,i,o,a={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=DD(a),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${_D}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let a=o.get(r);return a.usage+=i,a.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,a=o?.get(i);if(a?.parentNode===r)return o.delete(i),a.removeAttribute(_D),a;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(_D,this.appId),r.appendChild(s),s}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),a=this.styleRef,s=a.get(i)?.elements;s?s.push(o):a.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};t.\u0275fac=function(i){return new(i||t)(ge(Xr),ge(f9),ge(AE,8),ge(Da))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),kD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},PD=/%COMP%/g,IU="%COMP%",Nue=`_nghost-${IU}`,_ue=`_ngcontent-${IU}`,kue=!0,Tue=new De("",{providedIn:"root",factory:()=>kue});function Iue(e){return _ue.replace(PD,e)}function Fue(e){return Nue.replace(PD,e)}function FU(e,t){return t.map(n=>n.replace(PD,e))}var VU=(()=>{let t=class t{constructor(r,i,o,a,s,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=a,this.doc=s,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=DD(c),this.defaultRenderer=new c5(r,s,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ma.ShadowDom&&(i=k(x({},i),{encapsulation:Ma.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof eg?o.applyToHost(r):o instanceof l5&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,a=o.get(i.id);if(!a){let s=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Ma.Emulated:a=new eg(l,u,i,this.appId,f,s,c,d);break;case Ma.ShadowDom:return new OD(l,u,r,i,s,c,this.nonce,d);default:a=new l5(l,u,i,f,s,c,d);break}o.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(i){return new(i||t)(ge(kU),ge(TU),ge(f9),ge(Tue),ge(Xr),ge(Da),ge(Yt),ge(AE))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),c5=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(kD[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(NU(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(NU(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new xe(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=kD[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=kD[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(ks.DashCase|ks.Important)?t.style.setProperty(n,r,i&ks.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&ks.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=Na().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function NU(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var OD=class extends c5{constructor(t,n,r,i,o,a,s,c){super(t,o,a,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=FU(i.id,i.styles);for(let u of l){let f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=u,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},l5=class extends c5{constructor(t,n,r,i,o,a,s,c){super(t,o,a,s),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?FU(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},eg=class extends l5{constructor(t,n,r,i,o,a,s,c){let l=i+"-"+r.id;super(t,n,r,o,a,s,c,l),this.contentAttr=Iue(l),this.hostAttr=Fue(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},Rue=(()=>{let t=class t extends J9{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};t.\u0275fac=function(i){return new(i||t)(ge(Xr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),_U=["alt","control","meta","shift"],Oue={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pue={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},$ue=(()=>{let t=class t extends J9{constructor(r){super(r)}supports(r){return t.parseEventName(r)!=null}addEventListener(r,i,o){let a=t.parseEventName(i),s=t.eventCallback(a.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Na().onAndCancel(r,a.domEventName,s))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let a=t._normalizeKey(i.pop()),s="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),s="code."),_U.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=a,i.length!=0||a.length===0)return null;let l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(r,i){let o=Oue[r.key]||r.key,a="";return i.indexOf("code.")>-1&&(o=r.code,a="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),_U.forEach(s=>{if(s!==o){let c=Pue[s];c(r)&&(a+=s+".")}}),a+=o,a===i)}static eventCallback(r,i,o){return a=>{t.matchEventFullKeyCode(a,r)&&o.runGuarded(()=>i(a))}}static _normalizeKey(r){return r==="esc"?"escape":r}};t.\u0275fac=function(i){return new(i||t)(ge(Xr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function Bue(){ID.makeCurrent()}function Uue(){return new Sa}function jue(){return n$(document),document}var que=[{provide:Da,useValue:ED},{provide:LE,useValue:Bue,multi:!0},{provide:Xr,useFactory:jue,deps:[]}],RU=uD(eU,"browser",que),Gue=new De(""),Wue=[{provide:r5,useClass:FD,deps:[]},{provide:sD,useClass:z9,deps:[Yt,H9,r5]},{provide:z9,useClass:z9,deps:[Yt,H9,r5]}],Yue=[{provide:m9,useValue:"root"},{provide:Sa,useFactory:Uue,deps:[]},{provide:RD,useClass:Rue,multi:!0,deps:[Xr,Yt,Da]},{provide:RD,useClass:$ue,multi:!0,deps:[Xr]},VU,TU,kU,{provide:G8,useExisting:VU},{provide:w6,useClass:Vue,deps:[]},[]],OU=(()=>{let t=class t{constructor(r){}static withServerTransition(r){return{ngModule:t,providers:[{provide:f9,useValue:r.appId}]}}};t.\u0275fac=function(i){return new(i||t)(ge(Gue,12))},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({providers:[...Yue,...Wue],imports:[G9,tU]});let e=t;return e})();var PU=(()=>{let t=class t{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};t.\u0275fac=function(i){return new(i||t)(ge(Xr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var $D=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:function(i){let o=null;return i?o=new(i||t):o=ge(Xue),o},providedIn:"root"});let e=t;return e})(),Xue=(()=>{let t=class t extends $D{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case w2.NONE:return i;case w2.HTML:return Fs(i,"HTML")?M2(i):RE(this._doc,String(i)).toString();case w2.STYLE:return Fs(i,"Style")?M2(i):i;case w2.SCRIPT:if(Fs(i,"Script"))return M2(i);throw new xe(5200,!1);case w2.URL:return Fs(i,"URL")?M2(i):y9(String(i));case w2.RESOURCE_URL:if(Fs(i,"ResourceURL"))return M2(i);throw new xe(5201,!1);default:throw new xe(5202,!1)}}bypassSecurityTrustHtml(r){return F$(r)}bypassSecurityTrustStyle(r){return R$(r)}bypassSecurityTrustScript(r){return O$(r)}bypassSecurityTrustUrl(r){return P$(r)}bypassSecurityTrustResourceUrl(r){return $$(r)}};t.\u0275fac=function(i){return new(i||t)(ge(Xr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var XU=(()=>{let t=class t{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};t.\u0275fac=function(i){return new(i||t)(W(to),W(Yr))},t.\u0275dir=Qt({type:t});let e=t;return e})(),h5=(()=>{let t=class t extends XU{};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=La(t)))(o||t)}})(),t.\u0275dir=Qt({type:t,features:[no]});let e=t;return e})(),L6=new De(""),Que={provide:L6,useExisting:za(()=>Ws),multi:!0},Ws=(()=>{let t=class t extends h5{writeValue(r){this.setProperty("checked",r)}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=La(t)))(o||t)}})(),t.\u0275dir=Qt({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){i&1&&Ve("change",function(s){return o.onChange(s.target.checked)})("blur",function(){return o.onTouched()})},features:[p3([Que]),no]});let e=t;return e})(),Kue={provide:L6,useExisting:za(()=>Sr),multi:!0};function Zue(){let e=Na()?Na().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var Jue=new De(""),Sr=(()=>{let t=class t extends XU{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Zue())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};t.\u0275fac=function(i){return new(i||t)(W(to),W(Yr),W(Jue,8))},t.\u0275dir=Qt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Ve("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[p3([Kue]),no]});let e=t;return e})();var QU=new De(""),KU=new De("");function ZU(e){return e!=null}function JU(e){return h3(e)?tn(e):e}function ej(e){let t={};return e.forEach(n=>{t=n!=null?x(x({},t),n):t}),Object.keys(t).length===0?null:t}function tj(e,t){return t.map(n=>n(e))}function efe(e){return!e.validate}function nj(e){return e.map(t=>efe(t)?t:n=>t.validate(n))}function tfe(e){if(!e)return null;let t=e.filter(ZU);return t.length==0?null:function(n){return ej(tj(n,t))}}function jD(e){return e!=null?tfe(nj(e)):null}function nfe(e){if(!e)return null;let t=e.filter(ZU);return t.length==0?null:function(n){let r=tj(n,t).map(JU);return Gw(r).pipe(Ke(ej))}}function qD(e){return e!=null?nfe(nj(e)):null}function $U(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function rfe(e){return e._rawValidators}function ife(e){return e._rawAsyncValidators}function UD(e){return e?Array.isArray(e)?e:[e]:[]}function ng(e,t){return Array.isArray(e)?e.includes(t):e===t}function BU(e,t){let n=UD(t);return UD(e).forEach(i=>{ng(n,i)||n.push(i)}),n}function UU(e,t){return UD(t).filter(n=>!ng(e,n))}var rg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=jD(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=qD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},H6=class extends rg{get formDirective(){return null}get path(){return null}},p5=class extends rg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ig=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},ofe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},NWe=k(x({},ofe),{"[class.ng-submitted]":"isSubmitted"}),Jn=(()=>{let t=class t extends ig{constructor(r){super(r)}};t.\u0275fac=function(i){return new(i||t)(W(p5,2))},t.\u0275dir=Qt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&e5("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[no]});let e=t;return e})(),z1=(()=>{let t=class t extends ig{constructor(r){super(r)}};t.\u0275fac=function(i){return new(i||t)(W(H6,10))},t.\u0275dir=Qt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&e5("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[no]});let e=t;return e})();var u5="VALID",tg="INVALID",z6="PENDING",f5="DISABLED";function rj(e){return(sg(e)?e.validators:e)||null}function afe(e){return Array.isArray(e)?jD(e):e||null}function ij(e,t){return(sg(t)?t.asyncValidators:e)||null}function sfe(e){return Array.isArray(e)?qD(e):e||null}function sg(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function cfe(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new xe(1e3,"");if(!r[n])throw new xe(1001,"")}function lfe(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new xe(1002,"")})}var og=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===u5}get invalid(){return this.status===tg}get pending(){return this.status==z6}get disabled(){return this.status===f5}get enabled(){return this.status!==f5}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(BU(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(BU(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(UU(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(UU(t,this._rawAsyncValidators))}hasValidator(t){return ng(this._rawValidators,t)}hasAsyncValidator(t){return ng(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=z6,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=f5,this.errors=null,this._forEachChild(r=>{r.disable(k(x({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(k(x({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=u5,this._forEachChild(r=>{r.enable(k(x({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(k(x({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===u5||this.status===z6)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?f5:u5}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=z6,this._hasOwnPendingAsyncValidator=!0;let n=JU(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Wt,this.statusChanges=new Wt}_calculateStatus(){return this._allControlsDisabled()?f5:this.errors?tg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(z6)?z6:this._anyControlsHaveStatus(tg)?tg:u5}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){sg(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=afe(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=sfe(this._rawAsyncValidators)}},ag=class extends og{constructor(t,n,r){super(rj(n),ij(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){lfe(this,!0,t),Object.keys(t).forEach(r=>{cfe(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var GD=new De("CallSetDisabledState",{providedIn:"root",factory:()=>WD}),WD="always";function ufe(e,t){return[...t.path,e]}function oj(e,t,n=WD){aj(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),dfe(e,t),hfe(e,t),pfe(e,t),ffe(e,t)}function jU(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function ffe(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function aj(e,t){let n=rfe(e);t.validator!==null?e.setValidators($U(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=ife(e);t.asyncValidator!==null?e.setAsyncValidators($U(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();jU(t._rawValidators,i),jU(t._rawAsyncValidators,i)}function dfe(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&sj(e,t)})}function pfe(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&sj(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function sj(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function hfe(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function mfe(e,t){e==null,aj(e,t)}function gfe(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function vfe(e){return Object.getPrototypeOf(e.constructor)===h5}function yfe(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function xfe(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===Sr?n=o:vfe(o)?r=o:i=o}),i||r||n||null}var Cfe={provide:H6,useExisting:za(()=>Gi)},d5=Promise.resolve(),Gi=(()=>{let t=class t extends H6{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Wt,this.form=new ag({},jD(r),qD(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){d5.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),oj(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){d5.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){d5.then(()=>{let i=this._findContainer(r.path),o=new ag({});mfe(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){d5.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){d5.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,yfe(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};t.\u0275fac=function(i){return new(i||t)(W(QU,10),W(KU,10),W(GD,8))},t.\u0275dir=Qt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&Ve("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{options:[Gr.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p3([Cfe]),no]});let e=t;return e})();function qU(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function GU(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var bfe=class extends og{constructor(t=null,n,r){super(rj(n),ij(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),sg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(GU(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){qU(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){qU(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){GU(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Mfe={provide:p5,useExisting:za(()=>Un)},WU=Promise.resolve(),Un=(()=>{let t=class t extends p5{constructor(r,i,o,a,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this.control=new bfe,this._registered=!1,this.name="",this.update=new Wt,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=xfe(this,a)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),gfe(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){oj(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){WU.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&al(i);WU.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?ufe(r,this._parent):[r]}};t.\u0275fac=function(i){return new(i||t)(W(H6,9),W(QU,10),W(KU,10),W(L6,10),W(Os,8),W(GD,8))},t.\u0275dir=Qt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Gr.None,"disabled","isDisabled"],model:[Gr.None,"ngModel","model"],options:[Gr.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p3([Mfe]),no,_o]});let e=t;return e})(),H1=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=Qt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let e=t;return e})(),wfe={provide:L6,useExisting:za(()=>YD),multi:!0},YD=(()=>{let t=class t extends h5{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=La(t)))(o||t)}})(),t.\u0275dir=Qt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&Ve("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},features:[p3([wfe]),no]});let e=t;return e})();var Sfe={provide:L6,useExisting:za(()=>A6),multi:!0};function cj(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function Efe(e){return e.split(":")[0]}var A6=(()=>{let t=class t extends h5{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),o=cj(i,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=Efe(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=La(t)))(o||t)}})(),t.\u0275dir=Qt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&Ve("change",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[p3([Sfe]),no]});let e=t;return e})(),V6=(()=>{let t=class t{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(cj(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(i){return new(i||t)(W(Yr),W(to),W(A6,9))},t.\u0275dir=Qt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let e=t;return e})(),Dfe={provide:L6,useExisting:za(()=>lj),multi:!0};function YU(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function zfe(e){return e.split(":")[0]}var lj=(()=>{let t=class t extends h5{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let o=r.map(a=>this._getOptionId(a));i=(a,s)=>{a._setSelected(o.indexOf(s.toString())>-1)}}else i=(o,a)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let o=[],a=i.selectedOptions;if(a!==void 0){let s=a;for(let c=0;c<s.length;c++){let l=s[c],u=this._getOptionValue(l.value);o.push(u)}}else{let s=i.options;for(let c=0;c<s.length;c++){let l=s[c];if(l.selected){let u=this._getOptionValue(l.value);o.push(u)}}}this.value=o,r(o)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=zfe(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=La(t)))(o||t)}})(),t.\u0275dir=Qt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&Ve("change",function(s){return o.onChange(s.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[p3([Dfe]),no]});let e=t;return e})(),N6=(()=>{let t=class t{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(YU(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(YU(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(i){return new(i||t)(W(Yr),W(to),W(lj,9))},t.\u0275dir=Qt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let e=t;return e})();var Hfe=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({});let e=t;return e})();var uj=(()=>{let t=class t{static withConfig(r){return{ngModule:t,providers:[{provide:GD,useValue:r.callSetDisabledState??WD}]}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({imports:[Hfe]});let e=t;return e})();function fj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fj(Object(n),!0).forEach(function(r){fr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xg(e){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xg(e)}function Lfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Afe(e,t,n){return t&&dj(e.prototype,t),n&&dj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uz(e,t){return Nfe(e)||kfe(e,t)||Fj(e,t)||Ife()}function w5(e){return Vfe(e)||_fe(e)||Fj(e)||Tfe()}function Vfe(e){if(Array.isArray(e))return JD(e)}function Nfe(e){if(Array.isArray(e))return e}function _fe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(c){o=!0,s=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function Fj(e,t){if(e){if(typeof e=="string")return JD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JD(e,t)}}function JD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ife(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var pj=function(){},fz={},Rj={},Oj=null,Pj={mark:pj,measure:pj};try{typeof window<"u"&&(fz=window),typeof document<"u"&&(Rj=document),typeof MutationObserver<"u"&&(Oj=MutationObserver),typeof performance<"u"&&(Pj=performance)}catch{}var Ffe=fz.navigator||{},hj=Ffe.userAgent,mj=hj===void 0?"":hj,v3=fz,ln=Rj,gj=Oj,cg=Pj,TWe=!!v3.document,Ks=!!ln.documentElement&&!!ln.head&&typeof ln.addEventListener=="function"&&typeof ln.createElement=="function",$j=~mj.indexOf("MSIE")||~mj.indexOf("Trident/"),lg,ug,fg,dg,pg,Ys="___FONT_AWESOME___",ez=16,Bj="fa",Uj="svg-inline--fa",ul="data-fa-i2svg",tz="data-fa-pseudo-element",Rfe="data-fa-pseudo-element-pending",dz="data-prefix",pz="data-icon",vj="fontawesome-i2svg",Ofe="async",Pfe=["HTML","HEAD","STYLE","SCRIPT"],jj=function(){try{return!0}catch{return!1}}(),cn="classic",Hn="sharp",hz=[cn,Hn];function S5(e){return new Proxy(e,{get:function(n,r){return r in n?n[r]:n[cn]}})}var y5=S5((lg={},fr(lg,cn,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),fr(lg,Hn,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),lg)),x5=S5((ug={},fr(ug,cn,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),fr(ug,Hn,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),ug)),C5=S5((fg={},fr(fg,cn,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),fr(fg,Hn,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),fg)),$fe=S5((dg={},fr(dg,cn,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),fr(dg,Hn,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),dg)),Bfe=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,qj="fa-layers-text",Ufe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,jfe=S5((pg={},fr(pg,cn,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),fr(pg,Hn,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),pg)),Gj=[1,2,3,4,5,6,7,8,9,10],qfe=Gj.concat([11,12,13,14,15,16,17,18,19,20]),Gfe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],cl={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},b5=new Set;Object.keys(x5[cn]).map(b5.add.bind(b5));Object.keys(x5[Hn]).map(b5.add.bind(b5));var Wfe=[].concat(hz,w5(b5),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",cl.GROUP,cl.SWAP_OPACITY,cl.PRIMARY,cl.SECONDARY]).concat(Gj.map(function(e){return"".concat(e,"x")})).concat(qfe.map(function(e){return"w-".concat(e)})),g5=v3.FontAwesomeConfig||{};function Yfe(e){var t=ln.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function Xfe(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}ln&&typeof ln.querySelector=="function"&&(yj=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]],yj.forEach(function(e){var t=uz(e,2),n=t[0],r=t[1],i=Xfe(Yfe(n));i!=null&&(g5[r]=i)}));var yj,Wj={styleDefault:"solid",familyDefault:"classic",cssPrefix:Bj,replacementClass:Uj,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};g5.familyPrefix&&(g5.cssPrefix=g5.familyPrefix);var I6=ye(ye({},Wj),g5);I6.autoReplaceSvg||(I6.observeMutations=!1);var ze={};Object.keys(Wj).forEach(function(e){Object.defineProperty(ze,e,{enumerable:!0,set:function(n){I6[e]=n,v5.forEach(function(r){return r(ze)})},get:function(){return I6[e]}})});Object.defineProperty(ze,"familyPrefix",{enumerable:!0,set:function(t){I6.cssPrefix=t,v5.forEach(function(n){return n(ze)})},get:function(){return I6.cssPrefix}});v3.FontAwesomeConfig=ze;var v5=[];function Qfe(e){return v5.push(e),function(){v5.splice(v5.indexOf(e),1)}}var g3=ez,ka={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Kfe(e){if(!(!e||!Ks)){var t=ln.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=ln.head.childNodes,r=null,i=n.length-1;i>-1;i--){var o=n[i],a=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(r=o)}return ln.head.insertBefore(t,r),e}}var Zfe="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function M5(){for(var e=12,t="";e-- >0;)t+=Zfe[Math.random()*62|0];return t}function F6(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function mz(e){return e.classList?F6(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function Yj(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Jfe(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,'="').concat(Yj(e[n]),'" ')},"").trim()}function Mg(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")},"")}function gz(e){return e.size!==ka.size||e.x!==ka.x||e.y!==ka.y||e.rotate!==ka.rotate||e.flipX||e.flipY}function e8e(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(t.x*32,", ").concat(t.y*32,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)"),c={transform:"".concat(o," ").concat(a," ").concat(s)},l={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:c,path:l}}function t8e(e){var t=e.transform,n=e.width,r=n===void 0?ez:n,i=e.height,o=i===void 0?ez:i,a=e.startCentered,s=a===void 0?!1:a,c="";return s&&$j?c+="translate(".concat(t.x/g3-r/2,"em, ").concat(t.y/g3-o/2,"em) "):s?c+="translate(calc(-50% + ".concat(t.x/g3,"em), calc(-50% + ").concat(t.y/g3,"em)) "):c+="translate(".concat(t.x/g3,"em, ").concat(t.y/g3,"em) "),c+="scale(".concat(t.size/g3*(t.flipX?-1:1),", ").concat(t.size/g3*(t.flipY?-1:1),") "),c+="rotate(".concat(t.rotate,"deg) "),c}var n8e=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function Xj(){var e=Bj,t=Uj,n=ze.cssPrefix,r=ze.replacementClass,i=n8e;if(n!==e||r!==t){var o=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(o,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(s,".".concat(r))}return i}var xj=!1;function XD(){ze.autoAddCss&&!xj&&(Kfe(Xj()),xj=!0)}var r8e={mixout:function(){return{dom:{css:Xj,insertCss:XD}}},hooks:function(){return{beforeDOMElementCreation:function(){XD()},beforeI2svg:function(){XD()}}}},Xs=v3||{};Xs[Ys]||(Xs[Ys]={});Xs[Ys].styles||(Xs[Ys].styles={});Xs[Ys].hooks||(Xs[Ys].hooks={});Xs[Ys].shims||(Xs[Ys].shims=[]);var E2=Xs[Ys],Qj=[],i8e=function e(){ln.removeEventListener("DOMContentLoaded",e),Cg=1,Qj.map(function(t){return t()})},Cg=!1;Ks&&(Cg=(ln.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ln.readyState),Cg||ln.addEventListener("DOMContentLoaded",i8e));function o8e(e){Ks&&(Cg?setTimeout(e,0):Qj.push(e))}function E5(e){var t=e.tag,n=e.attributes,r=n===void 0?{}:n,i=e.children,o=i===void 0?[]:i;return typeof e=="string"?Yj(e):"<".concat(t," ").concat(Jfe(r),">").concat(o.map(E5).join(""),"</").concat(t,">")}function Cj(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}var a8e=function(t,n){return function(r,i,o,a){return t.call(n,r,i,o,a)}},QD=function(t,n,r,i){var o=Object.keys(t),a=o.length,s=i!==void 0?a8e(n,i):n,c,l,u;for(r===void 0?(c=1,u=t[o[0]]):(c=0,u=r);c<a;c++)l=o[c],u=s(u,t[l],l,t);return u};function s8e(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);(o&64512)==56320?t.push(((i&1023)<<10)+(o&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}function nz(e){var t=s8e(e);return t.length===1?t[0].toString(16):null}function c8e(e,t){var n=e.length,r=e.charCodeAt(t),i;return r>=55296&&r<=56319&&n>t+1&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function bj(e){return Object.keys(e).reduce(function(t,n){var r=e[n],i=!!r.icon;return i?t[r.iconName]=r.icon:t[n]=r,t},{})}function rz(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,o=bj(t);typeof E2.hooks.addPack=="function"&&!i?E2.hooks.addPack(e,bj(t)):E2.styles[e]=ye(ye({},E2.styles[e]||{}),o),e==="fas"&&rz("fa",t)}var hg,mg,gg,_6=E2.styles,l8e=E2.shims,u8e=(hg={},fr(hg,cn,Object.values(C5[cn])),fr(hg,Hn,Object.values(C5[Hn])),hg),vz=null,Kj={},Zj={},Jj={},eq={},tq={},f8e=(mg={},fr(mg,cn,Object.keys(y5[cn])),fr(mg,Hn,Object.keys(y5[Hn])),mg);function d8e(e){return~Wfe.indexOf(e)}function p8e(e,t){var n=t.split("-"),r=n[0],i=n.slice(1).join("-");return r===e&&i!==""&&!d8e(i)?i:null}var nq=function(){var t=function(o){return QD(_6,function(a,s,c){return a[c]=QD(s,o,{}),a},{})};Kj=t(function(i,o,a){if(o[3]&&(i[o[3]]=a),o[2]){var s=o[2].filter(function(c){return typeof c=="number"});s.forEach(function(c){i[c.toString(16)]=a})}return i}),Zj=t(function(i,o,a){if(i[a]=a,o[2]){var s=o[2].filter(function(c){return typeof c=="string"});s.forEach(function(c){i[c]=a})}return i}),tq=t(function(i,o,a){var s=o[2];return i[a]=a,s.forEach(function(c){i[c]=a}),i});var n="far"in _6||ze.autoFetchSvg,r=QD(l8e,function(i,o){var a=o[0],s=o[1],c=o[2];return s==="far"&&!n&&(s="fas"),typeof a=="string"&&(i.names[a]={prefix:s,iconName:c}),typeof a=="number"&&(i.unicodes[a.toString(16)]={prefix:s,iconName:c}),i},{names:{},unicodes:{}});Jj=r.names,eq=r.unicodes,vz=wg(ze.styleDefault,{family:ze.familyDefault})};Qfe(function(e){vz=wg(e.styleDefault,{family:ze.familyDefault})});nq();function yz(e,t){return(Kj[e]||{})[t]}function h8e(e,t){return(Zj[e]||{})[t]}function ll(e,t){return(tq[e]||{})[t]}function rq(e){return Jj[e]||{prefix:null,iconName:null}}function m8e(e){var t=eq[e],n=yz("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function y3(){return vz}var xz=function(){return{prefix:null,iconName:null,rest:[]}};function wg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.family,r=n===void 0?cn:n,i=y5[r][e],o=x5[r][e]||x5[r][i],a=e in E2.styles?e:null;return o||a||null}var Mj=(gg={},fr(gg,cn,Object.keys(C5[cn])),fr(gg,Hn,Object.keys(C5[Hn])),gg);function Sg(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,i=r===void 0?!1:r,o=(t={},fr(t,cn,"".concat(ze.cssPrefix,"-").concat(cn)),fr(t,Hn,"".concat(ze.cssPrefix,"-").concat(Hn)),t),a=null,s=cn;(e.includes(o[cn])||e.some(function(l){return Mj[cn].includes(l)}))&&(s=cn),(e.includes(o[Hn])||e.some(function(l){return Mj[Hn].includes(l)}))&&(s=Hn);var c=e.reduce(function(l,u){var f=p8e(ze.cssPrefix,u);if(_6[u]?(u=u8e[s].includes(u)?$fe[s][u]:u,a=u,l.prefix=u):f8e[s].indexOf(u)>-1?(a=u,l.prefix=wg(u,{family:s})):f?l.iconName=f:u!==ze.replacementClass&&u!==o[cn]&&u!==o[Hn]&&l.rest.push(u),!i&&l.prefix&&l.iconName){var d=a==="fa"?rq(l.iconName):{},p=ll(l.prefix,l.iconName);d.prefix&&(a=null),l.iconName=d.iconName||p||l.iconName,l.prefix=d.prefix||l.prefix,l.prefix==="far"&&!_6.far&&_6.fas&&!ze.autoFetchSvg&&(l.prefix="fas")}return l},xz());return(e.includes("fa-brands")||e.includes("fab"))&&(c.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(c.prefix="fad"),!c.prefix&&s===Hn&&(_6.fass||ze.autoFetchSvg)&&(c.prefix="fass",c.iconName=ll(c.prefix,c.iconName)||c.iconName),(c.prefix==="fa"||a==="fa")&&(c.prefix=y3()||"fas"),c}var g8e=function(){function e(){Lfe(this,e),this.definitions={}}return Afe(e,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.reduce(this._pullDefinitions,{});Object.keys(a).forEach(function(s){n.definitions[s]=ye(ye({},n.definitions[s]||{}),a[s]),rz(s,a[s]);var c=C5[cn][s];c&&rz(c,a[s]),nq()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(o){var a=i[o],s=a.prefix,c=a.iconName,l=a.icon,u=l[2];n[s]||(n[s]={}),u.length>0&&u.forEach(function(f){typeof f=="string"&&(n[s][f]=l)}),n[s][c]=l}),n}}]),e}(),wj=[],k6={},T6={},v8e=Object.keys(T6);function y8e(e,t){var n=t.mixoutsTo;return wj=e,k6={},Object.keys(T6).forEach(function(r){v8e.indexOf(r)===-1&&delete T6[r]}),wj.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(a){typeof i[a]=="function"&&(n[a]=i[a]),xg(i[a])==="object"&&Object.keys(i[a]).forEach(function(s){n[a]||(n[a]={}),n[a][s]=i[a][s]})}),r.hooks){var o=r.hooks();Object.keys(o).forEach(function(a){k6[a]||(k6[a]=[]),k6[a].push(o[a])})}r.provides&&r.provides(T6)}),n}function iz(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=k6[e]||[];return o.forEach(function(a){t=a.apply(null,[t].concat(r))}),t}function fl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=k6[e]||[];i.forEach(function(o){o.apply(null,n)})}function Qs(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return T6[e]?T6[e].apply(null,t):void 0}function oz(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,n=e.prefix||y3();if(t)return t=ll(n,t)||t,Cj(iq.definitions,n,t)||Cj(E2.styles,n,t)}var iq=new g8e,x8e=function(){ze.autoReplaceSvg=!1,ze.observeMutations=!1,fl("noAuto")},C8e={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ks?(fl("beforeI2svg",t),Qs("pseudoElements2svg",t),Qs("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot;ze.autoReplaceSvg===!1&&(ze.autoReplaceSvg=!0),ze.observeMutations=!0,o8e(function(){M8e({autoReplaceSvgRoot:n}),fl("watch",t)})}},b8e={icon:function(t){if(t===null)return null;if(xg(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:ll(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var n=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],r=wg(t[0]);return{prefix:r,iconName:ll(r,n)||n}}if(typeof t=="string"&&(t.indexOf("".concat(ze.cssPrefix,"-"))>-1||t.match(Bfe))){var i=Sg(t.split(" "),{skipLookups:!0});return{prefix:i.prefix||y3(),iconName:ll(i.prefix,i.iconName)||i.iconName}}if(typeof t=="string"){var o=y3();return{prefix:o,iconName:ll(o,t)||t}}}},ao={noAuto:x8e,config:ze,dom:C8e,parse:b8e,library:iq,findIconDefinition:oz,toHtml:E5},M8e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot,r=n===void 0?ln:n;(Object.keys(E2.styles).length>0||ze.autoFetchSvg)&&Ks&&ze.autoReplaceSvg&&ao.dom.i2svg({node:r})};function Eg(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(r){return E5(r)})}}),Object.defineProperty(e,"node",{get:function(){if(Ks){var r=ln.createElement("div");return r.innerHTML=e.html,r.children}}}),e}function w8e(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,o=e.styles,a=e.transform;if(gz(a)&&n.found&&!r.found){var s=n.width,c=n.height,l={x:s/c/2,y:.5};i.style=Mg(ye(ye({},o),{},{"transform-origin":"".concat(l.x+a.x/16,"em ").concat(l.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}function S8e(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,o=e.symbol,a=o===!0?"".concat(t,"-").concat(ze.cssPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ye(ye({},i),{},{id:a}),children:r}]}]}function Cz(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,o=e.iconName,a=e.transform,s=e.symbol,c=e.title,l=e.maskId,u=e.titleId,f=e.extra,d=e.watchable,p=d===void 0?!1:d,h=r.found?r:n,m=h.width,g=h.height,v=i==="fak",y=[ze.replacementClass,o?"".concat(ze.cssPrefix,"-").concat(o):""].filter(function(D){return f.classes.indexOf(D)===-1}).filter(function(D){return D!==""||!!D}).concat(f.classes).join(" "),C={children:[],attributes:ye(ye({},f.attributes),{},{"data-prefix":i,"data-icon":o,class:y,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},b=v&&!~f.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};p&&(C.attributes[ul]=""),c&&(C.children.push({tag:"title",attributes:{id:C.attributes["aria-labelledby"]||"title-".concat(u||M5())},children:[c]}),delete C.attributes.title);var M=ye(ye({},C),{},{prefix:i,iconName:o,main:n,mask:r,maskId:l,transform:a,symbol:s,styles:ye(ye({},b),f.styles)}),S=r.found&&n.found?Qs("generateAbstractMask",M)||{children:[],attributes:{}}:Qs("generateAbstractIcon",M)||{children:[],attributes:{}},w=S.children,E=S.attributes;return M.children=w,M.attributes=E,s?S8e(M):w8e(M)}function Sj(e){var t=e.content,n=e.width,r=e.height,i=e.transform,o=e.title,a=e.extra,s=e.watchable,c=s===void 0?!1:s,l=ye(ye(ye({},a.attributes),o?{title:o}:{}),{},{class:a.classes.join(" ")});c&&(l[ul]="");var u=ye({},a.styles);gz(i)&&(u.transform=t8e({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var f=Mg(u);f.length>0&&(l.style=f);var d=[];return d.push({tag:"span",attributes:l,children:[t]}),o&&d.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),d}function E8e(e){var t=e.content,n=e.title,r=e.extra,i=ye(ye(ye({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),o=Mg(r.styles);o.length>0&&(i.style=o);var a=[];return a.push({tag:"span",attributes:i,children:[t]}),n&&a.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),a}var KD=E2.styles;function az(e){var t=e[0],n=e[1],r=e.slice(4),i=uz(r,1),o=i[0],a=null;return Array.isArray(o)?a={tag:"g",attributes:{class:"".concat(ze.cssPrefix,"-").concat(cl.GROUP)},children:[{tag:"path",attributes:{class:"".concat(ze.cssPrefix,"-").concat(cl.SECONDARY),fill:"currentColor",d:o[0]}},{tag:"path",attributes:{class:"".concat(ze.cssPrefix,"-").concat(cl.PRIMARY),fill:"currentColor",d:o[1]}}]}:a={tag:"path",attributes:{fill:"currentColor",d:o}},{found:!0,width:t,height:n,icon:a}}var D8e={found:!1,width:512,height:512};function z8e(e,t){!jj&&!ze.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function sz(e,t){var n=t;return t==="fa"&&ze.styleDefault!==null&&(t=y3()),new Promise(function(r,i){var o={found:!1,width:512,height:512,icon:Qs("missingIconAbstract")||{}};if(n==="fa"){var a=rq(e)||{};e=a.iconName||e,t=a.prefix||t}if(e&&t&&KD[t]&&KD[t][e]){var s=KD[t][e];return r(az(s))}z8e(e,t),r(ye(ye({},D8e),{},{icon:ze.showMissingIcons&&e?Qs("missingIconAbstract")||{}:{}}))})}var Ej=function(){},cz=ze.measurePerformance&&cg&&cg.mark&&cg.measure?cg:{mark:Ej,measure:Ej},m5='FA "6.5.1"',H8e=function(t){return cz.mark("".concat(m5," ").concat(t," begins")),function(){return oq(t)}},oq=function(t){cz.mark("".concat(m5," ").concat(t," ends")),cz.measure("".concat(m5," ").concat(t),"".concat(m5," ").concat(t," begins"),"".concat(m5," ").concat(t," ends"))},bz={begin:H8e,end:oq},vg=function(){};function Dj(e){var t=e.getAttribute?e.getAttribute(ul):null;return typeof t=="string"}function L8e(e){var t=e.getAttribute?e.getAttribute(dz):null,n=e.getAttribute?e.getAttribute(pz):null;return t&&n}function A8e(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(ze.replacementClass)}function V8e(){if(ze.autoReplaceSvg===!0)return yg.replace;var e=yg[ze.autoReplaceSvg];return e||yg.replace}function N8e(e){return ln.createElementNS("http://www.w3.org/2000/svg",e)}function _8e(e){return ln.createElement(e)}function aq(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.ceFn,r=n===void 0?e.tag==="svg"?N8e:_8e:n;if(typeof e=="string")return ln.createTextNode(e);var i=r(e.tag);Object.keys(e.attributes||[]).forEach(function(a){i.setAttribute(a,e.attributes[a])});var o=e.children||[];return o.forEach(function(a){i.appendChild(aq(a,{ceFn:r}))}),i}function k8e(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var yg={replace:function(t){var n=t[0];if(n.parentNode)if(t[1].forEach(function(i){n.parentNode.insertBefore(aq(i),n)}),n.getAttribute(ul)===null&&ze.keepOriginalSource){var r=ln.createComment(k8e(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(t){var n=t[0],r=t[1];if(~mz(n).indexOf(ze.replacementClass))return yg.replace(t);var i=new RegExp("".concat(ze.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var o=r[0].attributes.class.split(" ").reduce(function(s,c){return c===ze.replacementClass||c.match(i)?s.toSvg.push(c):s.toNode.push(c),s},{toNode:[],toSvg:[]});r[0].attributes.class=o.toSvg.join(" "),o.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",o.toNode.join(" "))}var a=r.map(function(s){return E5(s)}).join(`
`);n.setAttribute(ul,""),n.innerHTML=a}};function zj(e){e()}function sq(e,t){var n=typeof t=="function"?t:vg;if(e.length===0)n();else{var r=zj;ze.mutateApproach===Ofe&&(r=v3.requestAnimationFrame||zj),r(function(){var i=V8e(),o=bz.begin("mutate");e.map(i),o(),n()})}}var Mz=!1;function cq(){Mz=!0}function lz(){Mz=!1}var bg=null;function Hj(e){if(gj&&ze.observeMutations){var t=e.treeCallback,n=t===void 0?vg:t,r=e.nodeCallback,i=r===void 0?vg:r,o=e.pseudoElementsCallback,a=o===void 0?vg:o,s=e.observeMutationsRoot,c=s===void 0?ln:s;bg=new gj(function(l){if(!Mz){var u=y3();F6(l).forEach(function(f){if(f.type==="childList"&&f.addedNodes.length>0&&!Dj(f.addedNodes[0])&&(ze.searchPseudoElements&&a(f.target),n(f.target)),f.type==="attributes"&&f.target.parentNode&&ze.searchPseudoElements&&a(f.target.parentNode),f.type==="attributes"&&Dj(f.target)&&~Gfe.indexOf(f.attributeName))if(f.attributeName==="class"&&L8e(f.target)){var d=Sg(mz(f.target)),p=d.prefix,h=d.iconName;f.target.setAttribute(dz,p||u),h&&f.target.setAttribute(pz,h)}else A8e(f.target)&&i(f.target)})}}),Ks&&bg.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function T8e(){bg&&bg.disconnect()}function I8e(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce(function(r,i){var o=i.split(":"),a=o[0],s=o.slice(1);return a&&s.length>0&&(r[a]=s.join(":").trim()),r},{})),n}function F8e(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=e.innerText!==void 0?e.innerText.trim():"",i=Sg(mz(e));return i.prefix||(i.prefix=y3()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=h8e(i.prefix,e.innerText)||yz(i.prefix,nz(e.innerText))),!i.iconName&&ze.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function R8e(e){var t=F6(e.attributes).reduce(function(i,o){return i.name!=="class"&&i.name!=="style"&&(i[o.name]=o.value),i},{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return ze.autoA11y&&(n?t["aria-labelledby"]="".concat(ze.replacementClass,"-title-").concat(r||M5()):(t["aria-hidden"]="true",t.focusable="false")),t}function O8e(){return{iconName:null,title:null,titleId:null,prefix:null,transform:ka,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Lj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=F8e(e),r=n.iconName,i=n.prefix,o=n.rest,a=R8e(e),s=iz("parseNodeAttributes",{},e),c=t.styleParser?I8e(e):[];return ye({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:ka,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:o,styles:c,attributes:a}},s)}var P8e=E2.styles;function lq(e){var t=ze.autoReplaceSvg==="nest"?Lj(e,{styleParser:!1}):Lj(e);return~t.extra.classes.indexOf(qj)?Qs("generateLayersText",e,t):Qs("generateSvgReplacementMutation",e,t)}var x3=new Set;hz.map(function(e){x3.add("fa-".concat(e))});Object.keys(y5[cn]).map(x3.add.bind(x3));Object.keys(y5[Hn]).map(x3.add.bind(x3));x3=w5(x3);function Aj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ks)return Promise.resolve();var n=ln.documentElement.classList,r=function(f){return n.add("".concat(vj,"-").concat(f))},i=function(f){return n.remove("".concat(vj,"-").concat(f))},o=ze.autoFetchSvg?x3:hz.map(function(u){return"fa-".concat(u)}).concat(Object.keys(P8e));o.includes("fa")||o.push("fa");var a=[".".concat(qj,":not([").concat(ul,"])")].concat(o.map(function(u){return".".concat(u,":not([").concat(ul,"])")})).join(", ");if(a.length===0)return Promise.resolve();var s=[];try{s=F6(e.querySelectorAll(a))}catch{}if(s.length>0)r("pending"),i("complete");else return Promise.resolve();var c=bz.begin("onTree"),l=s.reduce(function(u,f){try{var d=lq(f);d&&u.push(d)}catch(p){jj||p.name==="MissingIcon"&&console.error(p)}return u},[]);return new Promise(function(u,f){Promise.all(l).then(function(d){sq(d,function(){r("active"),r("complete"),i("pending"),typeof t=="function"&&t(),c(),u()})}).catch(function(d){c(),f(d)})})}function $8e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;lq(e).then(function(n){n&&sq([n],t)})}function B8e(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(t||{}).icon?t:oz(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:oz(i||{})),e(r,ye(ye({},n),{},{mask:i}))}}var U8e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?ka:r,o=n.symbol,a=o===void 0?!1:o,s=n.mask,c=s===void 0?null:s,l=n.maskId,u=l===void 0?null:l,f=n.title,d=f===void 0?null:f,p=n.titleId,h=p===void 0?null:p,m=n.classes,g=m===void 0?[]:m,v=n.attributes,y=v===void 0?{}:v,C=n.styles,b=C===void 0?{}:C;if(t){var M=t.prefix,S=t.iconName,w=t.icon;return Eg(ye({type:"icon"},t),function(){return fl("beforeDOMElementCreation",{iconDefinition:t,params:n}),ze.autoA11y&&(d?y["aria-labelledby"]="".concat(ze.replacementClass,"-title-").concat(h||M5()):(y["aria-hidden"]="true",y.focusable="false")),Cz({icons:{main:az(w),mask:c?az(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:M,iconName:S,transform:ye(ye({},ka),i),symbol:a,title:d,maskId:u,titleId:h,extra:{attributes:y,styles:b,classes:g}})})}},j8e={mixout:function(){return{icon:B8e(U8e)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=Aj,n.nodeCallback=$8e,n}}},provides:function(t){t.i2svg=function(n){var r=n.node,i=r===void 0?ln:r,o=n.callback,a=o===void 0?function(){}:o;return Aj(i,a)},t.generateSvgReplacementMutation=function(n,r){var i=r.iconName,o=r.title,a=r.titleId,s=r.prefix,c=r.transform,l=r.symbol,u=r.mask,f=r.maskId,d=r.extra;return new Promise(function(p,h){Promise.all([sz(i,s),u.iconName?sz(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=uz(m,2),v=g[0],y=g[1];p([n,Cz({icons:{main:v,mask:y},prefix:s,iconName:i,transform:c,symbol:l,maskId:f,title:o,titleId:a,extra:d,watchable:!0})])}).catch(h)})},t.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,o=n.main,a=n.transform,s=n.styles,c=Mg(s);c.length>0&&(i.style=c);var l;return gz(a)&&(l=Qs("generateAbstractTransformGrouping",{main:o,transform:a,containerWidth:o.width,iconWidth:o.width})),r.push(l||o.icon),{children:r,attributes:i}}}},q8e={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,o=i===void 0?[]:i;return Eg({type:"layer"},function(){fl("beforeDOMElementCreation",{assembler:n,params:r});var a=[];return n(function(s){Array.isArray(s)?s.map(function(c){a=a.concat(c.abstract)}):a=a.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(ze.cssPrefix,"-layers")].concat(w5(o)).join(" ")},children:a}]})}}}},G8e={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,o=i===void 0?null:i,a=r.classes,s=a===void 0?[]:a,c=r.attributes,l=c===void 0?{}:c,u=r.styles,f=u===void 0?{}:u;return Eg({type:"counter",content:n},function(){return fl("beforeDOMElementCreation",{content:n,params:r}),E8e({content:n.toString(),title:o,extra:{attributes:l,styles:f,classes:["".concat(ze.cssPrefix,"-layers-counter")].concat(w5(s))}})})}}}},W8e={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,o=i===void 0?ka:i,a=r.title,s=a===void 0?null:a,c=r.classes,l=c===void 0?[]:c,u=r.attributes,f=u===void 0?{}:u,d=r.styles,p=d===void 0?{}:d;return Eg({type:"text",content:n},function(){return fl("beforeDOMElementCreation",{content:n,params:r}),Sj({content:n,transform:ye(ye({},ka),o),title:s,extra:{attributes:f,styles:p,classes:["".concat(ze.cssPrefix,"-layers-text")].concat(w5(l))}})})}}},provides:function(t){t.generateLayersText=function(n,r){var i=r.title,o=r.transform,a=r.extra,s=null,c=null;if($j){var l=parseInt(getComputedStyle(n).fontSize,10),u=n.getBoundingClientRect();s=u.width/l,c=u.height/l}return ze.autoA11y&&!i&&(a.attributes["aria-hidden"]="true"),Promise.resolve([n,Sj({content:n.innerHTML,width:s,height:c,transform:o,title:i,extra:a,watchable:!0})])}}},Y8e=new RegExp('"',"ug"),Vj=[1105920,1112319];function X8e(e){var t=e.replace(Y8e,""),n=c8e(t,0),r=n>=Vj[0]&&n<=Vj[1],i=t.length===2?t[0]===t[1]:!1;return{value:nz(i?t[0]:t),isSecondary:r||i}}function Nj(e,t){var n="".concat(Rfe).concat(t.replace(":","-"));return new Promise(function(r,i){if(e.getAttribute(n)!==null)return r();var o=F6(e.children),a=o.filter(function(w){return w.getAttribute(tz)===t})[0],s=v3.getComputedStyle(e,t),c=s.getPropertyValue("font-family").match(Ufe),l=s.getPropertyValue("font-weight"),u=s.getPropertyValue("content");if(a&&!c)return e.removeChild(a),r();if(c&&u!=="none"&&u!==""){var f=s.getPropertyValue("content"),d=~["Sharp"].indexOf(c[2])?Hn:cn,p=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?x5[d][c[2].toLowerCase()]:jfe[d][l],h=X8e(f),m=h.value,g=h.isSecondary,v=c[0].startsWith("FontAwesome"),y=yz(p,m),C=y;if(v){var b=m8e(m);b.iconName&&b.prefix&&(y=b.iconName,p=b.prefix)}if(y&&!g&&(!a||a.getAttribute(dz)!==p||a.getAttribute(pz)!==C)){e.setAttribute(n,C),a&&e.removeChild(a);var M=O8e(),S=M.extra;S.attributes[tz]=t,sz(y,p).then(function(w){var E=Cz(ye(ye({},M),{},{icons:{main:w,mask:xz()},prefix:p,iconName:C,extra:S,watchable:!0})),D=ln.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(D,e.firstChild):e.appendChild(D),D.outerHTML=E.map(function(L){return E5(L)}).join(`
`),e.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function Q8e(e){return Promise.all([Nj(e,"::before"),Nj(e,"::after")])}function K8e(e){return e.parentNode!==document.head&&!~Pfe.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(tz)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function _j(e){if(Ks)return new Promise(function(t,n){var r=F6(e.querySelectorAll("*")).filter(K8e).map(Q8e),i=bz.begin("searchPseudoElements");cq(),Promise.all(r).then(function(){i(),lz(),t()}).catch(function(){i(),lz(),n()})})}var Z8e={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=_j,n}}},provides:function(t){t.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?ln:r;ze.searchPseudoElements&&_j(i)}}},kj=!1,J8e={mixout:function(){return{dom:{unwatch:function(){cq(),kj=!0}}}},hooks:function(){return{bootstrap:function(){Hj(iz("mutationObserverCallbacks",{}))},noAuto:function(){T8e()},watch:function(n){var r=n.observeMutationsRoot;kj?lz():Hj(iz("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},Tj=function(t){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(r,i){var o=i.toLowerCase().split("-"),a=o[0],s=o.slice(1).join("-");if(a&&s==="h")return r.flipX=!0,r;if(a&&s==="v")return r.flipY=!0,r;if(s=parseFloat(s),isNaN(s))return r;switch(a){case"grow":r.size=r.size+s;break;case"shrink":r.size=r.size-s;break;case"left":r.x=r.x-s;break;case"right":r.x=r.x+s;break;case"up":r.y=r.y-s;break;case"down":r.y=r.y+s;break;case"rotate":r.rotate=r.rotate+s;break}return r},n)},e5e={mixout:function(){return{parse:{transform:function(n){return Tj(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=Tj(i)),n}}},provides:function(t){t.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,o=n.containerWidth,a=n.iconWidth,s={transform:"translate(".concat(o/2," 256)")},c="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),f={transform:"".concat(c," ").concat(l," ").concat(u)},d={transform:"translate(".concat(a/2*-1," -256)")},p={outer:s,inner:f,path:d};return{tag:"g",attributes:ye({},p.outer),children:[{tag:"g",attributes:ye({},p.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:ye(ye({},r.icon.attributes),p.path)}]}]}}}},ZD={x:0,y:0,width:"100%",height:"100%"};function Ij(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function t5e(e){return e.tag==="g"?e.children:[e]}var n5e={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),o=i?Sg(i.split(" ").map(function(a){return a.trim()})):xz();return o.prefix||(o.prefix=y3()),n.mask=o,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(t){t.generateAbstractMask=function(n){var r=n.children,i=n.attributes,o=n.main,a=n.mask,s=n.maskId,c=n.transform,l=o.width,u=o.icon,f=a.width,d=a.icon,p=e8e({transform:c,containerWidth:f,iconWidth:l}),h={tag:"rect",attributes:ye(ye({},ZD),{},{fill:"white"})},m=u.children?{children:u.children.map(Ij)}:{},g={tag:"g",attributes:ye({},p.inner),children:[Ij(ye({tag:u.tag,attributes:ye(ye({},u.attributes),p.path)},m))]},v={tag:"g",attributes:ye({},p.outer),children:[g]},y="mask-".concat(s||M5()),C="clip-".concat(s||M5()),b={tag:"mask",attributes:ye(ye({},ZD),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,v]},M={tag:"defs",children:[{tag:"clipPath",attributes:{id:C},children:t5e(d)},b]};return r.push(M,{tag:"rect",attributes:ye({fill:"currentColor","clip-path":"url(#".concat(C,")"),mask:"url(#".concat(y,")")},ZD)}),{children:r,attributes:i}}}},r5e={provides:function(t){var n=!1;v3.matchMedia&&(n=v3.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},o={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:ye(ye({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var a=ye(ye({},o),{},{attributeName:"opacity"}),s={tag:"circle",attributes:ye(ye({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||s.children.push({tag:"animate",attributes:ye(ye({},o),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:ye(ye({},a),{},{values:"1;0;1;1;0;1;"})}),r.push(s),r.push({tag:"path",attributes:ye(ye({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:ye(ye({},a),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:ye(ye({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:ye(ye({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},i5e={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),o=i===null?!1:i===""?!0:i;return n.symbol=o,n}}}},o5e=[r8e,j8e,q8e,G8e,W8e,Z8e,J8e,e5e,n5e,r5e,i5e];y8e(o5e,{mixoutsTo:ao});var IWe=ao.noAuto,FWe=ao.config,RWe=ao.library,OWe=ao.dom,uq=ao.parse,PWe=ao.findIconDefinition,$We=ao.toHtml,fq=ao.icon,BWe=ao.layer,a5e=ao.text,s5e=ao.counter;var c5e=["*"],l5e=e=>{throw new Error(`Could not find icon with iconName=${e.iconName} and prefix=${e.prefix} in the icon library.`)},u5e=()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")},f5e=e=>{let t={[`fa-${e.animation}`]:e.animation!=null&&!e.animation.startsWith("spin"),"fa-spin":e.animation==="spin"||e.animation==="spin-reverse","fa-spin-pulse":e.animation==="spin-pulse"||e.animation==="spin-pulse-reverse","fa-spin-reverse":e.animation==="spin-reverse"||e.animation==="spin-pulse-reverse","fa-pulse":e.animation==="spin-pulse"||e.animation==="spin-pulse-reverse","fa-fw":e.fixedWidth,"fa-border":e.border,"fa-inverse":e.inverse,"fa-layers-counter":e.counter,"fa-flip-horizontal":e.flip==="horizontal"||e.flip==="both","fa-flip-vertical":e.flip==="vertical"||e.flip==="both",[`fa-${e.size}`]:e.size!==null,[`fa-rotate-${e.rotate}`]:e.rotate!==null,[`fa-pull-${e.pull}`]:e.pull!==null,[`fa-stack-${e.stackItemSize}`]:e.stackItemSize!=null};return Object.keys(t).map(n=>t[n]?n:null).filter(n=>n)},d5e=e=>e.prefix!==void 0&&e.iconName!==void 0,p5e=(e,t)=>d5e(e)?e:typeof e=="string"?{prefix:t,iconName:e}:{prefix:e[0],iconName:e[1]},h5e=(()=>{let t=class t{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),m5e=(()=>{let t=class t{constructor(){this.definitions={}}addIcons(...r){for(let i of r){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(let o of i.icon[2])typeof o=="string"&&(this.definitions[i.prefix][o]=i)}}addIconPacks(...r){for(let i of r){let o=Object.keys(i).map(a=>i[a]);this.addIcons(...o)}}getIconDefinition(r,i){return r in this.definitions&&i in this.definitions[r]?this.definitions[r][i]:null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),g5e=(()=>{let t=class t{constructor(){this.stackItemSize="1x"}ngOnChanges(r){if("size"in r)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=Qt({type:t,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},standalone:!0,features:[_o]});let e=t;return e})(),v5e=(()=>{let t=class t{constructor(r,i){this.renderer=r,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(r){"size"in r&&(r.size.currentValue!=null&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${r.size.currentValue}`),r.size.previousValue!=null&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${r.size.previousValue}`))}};t.\u0275fac=function(i){return new(i||t)(W(to),W(Yr))},t.\u0275cmp=Le({type:t,selectors:[["fa-stack"]],inputs:{size:"size"},standalone:!0,features:[_o,n5],ngContentSelectors:c5e,decls:1,vars:0,template:function(i,o){i&1&&(PB(),$B(0))},encapsulation:2});let e=t;return e})(),Dg=(()=>{let t=class t{set spin(r){this.animation=r?"spin":void 0}set pulse(r){this.animation=r?"spin-pulse":void 0}constructor(r,i,o,a,s){this.sanitizer=r,this.config=i,this.iconLibrary=o,this.stackItem=a,this.classes=[],s!=null&&a==null&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(r){if(this.icon==null&&this.config.fallbackIcon==null){u5e();return}if(r){let i=this.icon!=null?this.icon:this.config.fallbackIcon,o=this.findIconDefinition(i);if(o!=null){let a=this.buildParams();this.renderIcon(o,a)}}}render(){this.ngOnChanges({})}findIconDefinition(r){let i=p5e(r,this.config.defaultPrefix);if("icon"in i)return i;let o=this.iconLibrary.getIconDefinition(i.prefix,i.iconName);return o??(l5e(i),null)}buildParams(){let r={flip:this.flip,animation:this.animation,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:typeof this.fixedWidth=="boolean"?this.fixedWidth:this.config.fixedWidth,stackItemSize:this.stackItem!=null?this.stackItem.stackItemSize:null},i=typeof this.transform=="string"?uq.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...f5e(r),...this.classes],mask:this.mask!=null?this.findIconDefinition(this.mask):null,styles:this.styles!=null?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(r,i){let o=fq(r,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(o.html.join(`
`))}};t.\u0275fac=function(i){return new(i||t)(W($D),W(h5e),W(m5e),W(g5e,8),W(v5e,8))},t.\u0275cmp=Le({type:t,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(i,o){i&2&&(aD("innerHTML",o.renderedIconHTML,G$),M6("title",o.title))},inputs:{icon:"icon",title:"title",animation:"animation",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},standalone:!0,features:[_o,n5],decls:0,vars:0,template:function(i,o){},encapsulation:2});let e=t;return e})();var dq=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({});let e=t;return e})();var Ze="primary",P5=Symbol("RouteTitle"),zz=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function B6(e){return new zz(e)}function y5e(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],s=e[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function x5e(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Ta(e[n],t[n]))return!1;return!0}function Ta(e,t){let n=e?Hz(e):void 0,r=t?Hz(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Mq(e[i],t[i]))return!1;return!0}function Hz(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Mq(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function wq(e){return e.length>0?e[e.length-1]:null}function w3(e){return qw(e)?e:h3(e)?tn(Promise.resolve(e)):se(e)}var C5e={exact:Eq,subset:Dq},Sq={exact:b5e,subset:M5e,ignored:()=>!0};function hq(e,t,n){return C5e[n.paths](e.root,t.root,n.matrixParams)&&Sq[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function b5e(e,t){return Ta(e,t)}function Eq(e,t,n){if(!pl(e.segments,t.segments)||!Lg(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!Eq(e.children[r],t.children[r],n))return!1;return!0}function M5e(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Mq(e[n],t[n]))}function Dq(e,t,n){return zq(e,t,t.segments,n)}function zq(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!pl(i,n)||t.hasChildren()||!Lg(i,n,r))}else if(e.segments.length===n.length){if(!pl(e.segments,n)||!Lg(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!Dq(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!pl(e.segments,i)||!Lg(e.segments,i,r)||!e.children[Ze]?!1:zq(e.children[Ze],t,o,r)}}function Lg(e,t,n){return t.every((r,i)=>Sq[n](e[i].parameters,r.parameters))}var C3=class{constructor(t=new Tt([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=B6(this.queryParams),this._queryParamMap}toString(){return E5e.serialize(this)}},Tt=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ag(this)}},dl=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=B6(this.parameters),this._parameterMap}toString(){return Lq(this)}};function w5e(e,t){return pl(e,t)&&e.every((n,r)=>Ta(n.parameters,t[r].parameters))}function pl(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function S5e(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===Ze&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==Ze&&(n=n.concat(t(i,r)))}),n}var $5=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>new N5,providedIn:"root"});let e=t;return e})(),N5=class{parse(t){let n=new Az(t);return new C3(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${D5(t.root,!0)}`,r=H5e(t.queryParams),i=typeof t.fragment=="string"?`#${D5e(t.fragment)}`:"";return`${n}${r}${i}`}},E5e=new N5;function Ag(e){return e.segments.map(t=>Lq(t)).join("/")}function D5(e,t){if(!e.hasChildren())return Ag(e);if(t){let n=e.children[Ze]?D5(e.children[Ze],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==Ze&&r.push(`${i}:${D5(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=S5e(e,(r,i)=>i===Ze?[D5(e.children[Ze],!1)]:[`${i}:${D5(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[Ze]!=null?`${Ag(e)}/${n[0]}`:`${Ag(e)}/(${n.join("//")})`}}function Hq(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zg(e){return Hq(e).replace(/%3B/gi,";")}function D5e(e){return encodeURI(e)}function Lz(e){return Hq(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vg(e){return decodeURIComponent(e)}function mq(e){return Vg(e.replace(/\+/g,"%20"))}function Lq(e){return`${Lz(e.path)}${z5e(e.parameters)}`}function z5e(e){return Object.entries(e).map(([t,n])=>`;${Lz(t)}=${Lz(n)}`).join("")}function H5e(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${zg(n)}=${zg(i)}`).join("&"):`${zg(n)}=${zg(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var L5e=/^[^\/()?;#]+/;function wz(e){let t=e.match(L5e);return t?t[0]:""}var A5e=/^[^\/()?;=#]+/;function V5e(e){let t=e.match(A5e);return t?t[0]:""}var N5e=/^[^=?&#]+/;function _5e(e){let t=e.match(N5e);return t?t[0]:""}var k5e=/^[^&#]+/;function T5e(e){let t=e.match(k5e);return t?t[0]:""}var Az=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tt([],{}):new Tt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Ze]=new Tt(t,n)),r}parseSegment(){let t=wz(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new xe(4009,!1);return this.capture(t),new dl(Vg(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=V5e(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=wz(this.remaining);i&&(r=i,this.capture(r))}t[Vg(n)]=Vg(r)}parseQueryParam(t){let n=_5e(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let a=T5e(this.remaining);a&&(r=a,this.capture(r))}let i=mq(n),o=mq(r);if(t.hasOwnProperty(i)){let a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=wz(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new xe(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Ze);let a=this.parseChildren();n[o]=Object.keys(a).length===1?a[Ze]:new Tt([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new xe(4011,!1)}};function Aq(e){return e.segments.length>0?new Tt([],{[Ze]:e}):e}function Vq(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=Vq(i);if(r===Ze&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))t[a]=s;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new Tt(e.segments,t);return I5e(n)}function I5e(e){if(e.numberOfChildren===1&&e.children[Ze]){let t=e.children[Ze];return new Tt(e.segments.concat(t.segments),t.children)}return e}function U6(e){return e instanceof C3}function F5e(e,t,n=null,r=null){let i=Nq(e);return _q(i,t,n,r)}function Nq(e){let t;function n(o){let a={};for(let c of o.children){let l=n(c);a[c.outlet]=l}let s=new Tt(o.url,a);return o===e&&(t=s),s}let r=n(e.root),i=Aq(r);return t??i}function _q(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return Sz(i,i,i,n,r);let o=R5e(t);if(o.toRoot())return Sz(i,i,new Tt([],{}),n,r);let a=O5e(o,i,e),s=a.processChildren?L5(a.segmentGroup,a.index,o.commands):Tq(a.segmentGroup,a.index,o.commands);return Sz(i,a.segmentGroup,s,n,r)}function Ng(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function _5(e){return typeof e=="object"&&e!=null&&e.outlets}function Sz(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let a;e===t?a=n:a=kq(e,t,n);let s=Aq(Vq(a));return new C3(s,o,i)}function kq(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=kq(o,t,n)}),new Tt(e.segments,r)}var _g=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Ng(r[0]))throw new xe(4003,!1);let i=r.find(_5);if(i&&i!==wq(r))throw new xe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function R5e(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new _g(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([c,l])=>{s[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:s}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((s,c)=>{c==0&&s==="."||(c==0&&s===""?n=!0:s===".."?t++:s!=""&&i.push(s))}),i):[...i,o]},[]);return new _g(n,t,r)}var P6=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function O5e(e,t,n){if(e.isAbsolute)return new P6(t,!0,0);if(!n)return new P6(t,!1,NaN);if(n.parent===null)return new P6(n,!0,0);let r=Ng(e.commands[0])?0:1,i=n.segments.length-1+r;return P5e(n,i,e.numberOfDoubleDots)}function P5e(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new xe(4005,!1);i=r.segments.length}return new P6(r,!1,i-o)}function $5e(e){return _5(e[0])?e[0].outlets:{[Ze]:e}}function Tq(e,t,n){if(e??=new Tt([],{}),e.segments.length===0&&e.hasChildren())return L5(e,t,n);let r=B5e(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new Tt(e.segments.slice(0,r.pathIndex),{});return o.children[Ze]=new Tt(e.segments.slice(r.pathIndex),e.children),L5(o,0,i)}else return r.match&&i.length===0?new Tt(e.segments,{}):r.match&&!e.hasChildren()?Vz(e,t,n):r.match?L5(e,0,i):Vz(e,t,n)}function L5(e,t,n){if(n.length===0)return new Tt(e.segments,{});{let r=$5e(n),i={};if(Object.keys(r).some(o=>o!==Ze)&&e.children[Ze]&&e.numberOfChildren===1&&e.children[Ze].segments.length===0){let o=L5(e.children[Ze],t,n);return new Tt(e.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=Tq(e.children[o],t,a))}),Object.entries(e.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new Tt(e.segments,i)}}function B5e(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let a=e.segments[i],s=n[r];if(_5(s))break;let c=`${s}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!vq(c,l,a))return o;r+=2}else{if(!vq(c,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Vz(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(_5(o)){let c=U5e(o.outlets);return new Tt(r,c)}if(i===0&&Ng(n[0])){let c=e.segments[t];r.push(new dl(c.path,gq(n[0]))),i++;continue}let a=_5(o)?o.outlets[Ze]:`${o}`,s=i<n.length-1?n[i+1]:null;a&&s&&Ng(s)?(r.push(new dl(a,gq(s))),i+=2):(r.push(new dl(a,{})),i++)}return new Tt(r,{})}function U5e(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Vz(new Tt([],{}),0,r))}),t}function gq(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function vq(e,t,n){return e==n.path&&Ta(t,n.parameters)}var A5="imperative",Er=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Er||{}),Ro=class{constructor(t,n){this.id=t,this.url=n}},j6=class extends Ro{constructor(t,n,r="imperative",i=null){super(t,n),this.type=Er.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},D2=class extends Ro{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=Er.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Fo=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Fo||{}),kg=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(kg||{}),b3=class extends Ro{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Er.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},M3=class extends Ro{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Er.NavigationSkipped}},k5=class extends Ro{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=Er.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Tg=class extends Ro{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Er.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nz=class extends Ro{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Er.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_z=class extends Ro{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Er.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},kz=class extends Ro{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Er.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tz=class extends Ro{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Er.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Iz=class{constructor(t){this.route=t,this.type=Er.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Fz=class{constructor(t){this.route=t,this.type=Er.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Rz=class{constructor(t){this.snapshot=t,this.type=Er.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Oz=class{constructor(t){this.snapshot=t,this.type=Er.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pz=class{constructor(t){this.snapshot=t,this.type=Er.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$z=class{constructor(t){this.snapshot=t,this.type=Er.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ig=class{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=Er.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},T5=class{},I5=class{constructor(t){this.url=t}};var Bz=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new B5,this.attachRef=null}},B5=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Bz,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Fg=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Uz(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=Uz(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=jz(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return jz(t,this._root).map(n=>n.value)}};function Uz(e,t){if(e===t.value)return t;for(let n of t.children){let r=Uz(e,n);if(r)return r}return null}function jz(e,t){if(e===t.value)return[t];for(let n of t.children){let r=jz(e,n);if(r.length)return r.unshift(t),r}return[]}var so=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function O6(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Rg=class extends Fg{constructor(t,n){super(t),this.snapshot=n,eH(this,t)}toString(){return this.snapshot.toString()}};function Iq(e){let t=j5e(e),n=new Pn([new dl("",{})]),r=new Pn({}),i=new Pn({}),o=new Pn({}),a=new Pn(""),s=new Ft(n,r,o,a,i,Ze,e,t.root);return s.snapshot=t.root,new Rg(new so(s,[]),t)}function j5e(e){let t={},n={},r={},i="",o=new F5([],t,r,i,n,Ze,e,null,{});return new Og("",new so(o,[]))}var Ft=class{constructor(t,n,r,i,o,a,s,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ke(l=>l[P5]))??se(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ke(t=>B6(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ke(t=>B6(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Jz(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:x(x({},t.params),e.params),data:x(x({},t.data),e.data),resolve:x(x(x(x({},e.data),t.data),i?.data),e._resolvedData)}:r={params:x({},e.params),data:x({},e.data),resolve:x(x({},e.data),e._resolvedData??{})},i&&Rq(i)&&(r.resolve[P5]=i.title),r}var F5=class{get title(){return this.data?.[P5]}constructor(t,n,r,i,o,a,s,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=B6(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=B6(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Og=class extends Fg{constructor(t,n){super(n),this.url=t,eH(this,n)}toString(){return Fq(this._root)}};function eH(e,t){t.value._routerState=e,t.children.forEach(n=>eH(e,n))}function Fq(e){let t=e.children.length>0?` { ${e.children.map(Fq).join(", ")} } `:"";return`${e.value}${t}`}function Ez(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Ta(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Ta(t.params,n.params)||e.paramsSubject.next(n.params),x5e(t.url,n.url)||e.urlSubject.next(n.url),Ta(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function qz(e,t){let n=Ta(e.params,t.params)&&w5e(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||qz(e.parent,t.parent))}function Rq(e){return typeof e.title=="string"||e.title===null}var tH=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ze,this.activateEvents=new Wt,this.deactivateEvents=new Wt,this.attachEvents=new Wt,this.detachEvents=new Wt,this.parentContexts=ce(B5),this.location=ce(d3),this.changeDetector=ce(Os),this.environmentInjector=ce(ji),this.inputBinder=ce(jg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new xe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new xe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new xe(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new xe(4013,!1);this._activatedRoute=r;let o=this.location,s=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Gz(r,c,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=Qt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_o]});let e=t;return e})(),Gz=class{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Ft?this.route:t===B5?this.childContexts:this.parent.get(t,n)}},jg=new De(""),yq=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=T8([i.queryParams,i.params,i.data]).pipe(C1(([a,s,c],l)=>(c=x(x(x({},a),s),c),l===0?se(c):Promise.resolve(c)))).subscribe(a=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let s=nU(i.component);if(!s){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of s.inputs)r.activatedComponentRef.setInput(c,a[c])});this.outletDataSubscriptions.set(r,o)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function q5e(e,t,n){let r=R5(e,t._root,n?n._root:void 0);return new Rg(r,t)}function R5(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=G5e(e,t,n);return new so(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(s=>R5(e,s)),a}}let r=W5e(t.value),i=t.children.map(o=>R5(e,o));return new so(r,i)}}function G5e(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return R5(e,r,i);return R5(e,r)})}function W5e(e){return new Ft(new Pn(e.url),new Pn(e.params),new Pn(e.queryParams),new Pn(e.fragment),new Pn(e.data),e.outlet,e.component,e)}var Oq="ngNavigationCancelingError";function Pq(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=U6(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=$q(!1,Fo.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function $q(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Oq]=!0,n.cancellationCode=t,n}function Y5e(e){return Bq(e)&&U6(e.url)}function Bq(e){return!!e&&e[Oq]}var X5e=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["ng-component"]],standalone:!0,features:[n5],decls:1,vars:0,template:function(i,o){i&1&&Cn(0,"router-outlet")},dependencies:[tH],encapsulation:2});let e=t;return e})();function Q5e(e,t){return e.providers&&!e._injector&&(e._injector=E9(e.providers,t,`Route: ${e.path}`)),e._injector??t}function nH(e){let t=e.children&&e.children.map(nH),n=t?k(x({},e),{children:t}):x({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ze&&(n.component=X5e),n}function Ia(e){return e.outlet||Ze}function K5e(e,t){let n=e.filter(r=>Ia(r)===t);return n.push(...e.filter(r=>Ia(r)!==t)),n}function U5(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Z5e=(e,t,n,r)=>Ke(i=>(new Wz(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),Wz=class{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Ez(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=O6(n);t.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=O6(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),s=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:s})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=O6(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=O6(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new $z(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Oz(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(Ez(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Ez(s.route.value),this.activateChildRoutes(t,null,a.children)}else{let s=U5(i.snapshot);a.attachRef=null,a.route=i,a.injector=s,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,r)}},Pg=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},$6=class{constructor(t,n){this.component=t,this.route=n}};function J5e(e,t,n){let r=e._root,i=t?t._root:null;return z5(r,i,n,[r.value])}function ede(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function G6(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!i$(e)?e:t.get(e):r}function z5(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=O6(t);return e.children.forEach(a=>{tde(a,o[a.value.outlet],n,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>V5(s,n.getContext(a),i)),i}function tde(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,a=t?t.value:null,s=n?n.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let c=nde(a,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Pg(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?z5(e,t,s?s.children:null,r,i):z5(e,t,n,r,i),c&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new $6(s.outlet.component,a))}else a&&V5(t,s,i),i.canActivateChecks.push(new Pg(r)),o.component?z5(e,null,s?s.children:null,r,i):z5(e,null,n,r,i);return i}function nde(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!pl(e.url,t.url);case"pathParamsOrQueryParamsChange":return!pl(e.url,t.url)||!Ta(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qz(e,t)||!Ta(e.queryParams,t.queryParams);case"paramsChange":default:return!qz(e,t)}}function V5(e,t,n){let r=O6(e),i=e.value;Object.entries(r).forEach(([o,a])=>{i.component?t?V5(a,t.children.getContext(o),n):V5(a,null,n):V5(a,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new $6(t.outlet.component,i)):n.canDeactivateChecks.push(new $6(null,i)):n.canDeactivateChecks.push(new $6(null,i))}function j5(e){return typeof e=="function"}function rde(e){return typeof e=="boolean"}function ide(e){return e&&j5(e.canLoad)}function ode(e){return e&&j5(e.canActivate)}function ade(e){return e&&j5(e.canActivateChild)}function sde(e){return e&&j5(e.canDeactivate)}function cde(e){return e&&j5(e.canMatch)}function Uq(e){return e instanceof Ls||e?.name==="EmptyError"}var Hg=Symbol("INITIAL_VALUE");function q6(){return C1(e=>T8(e.map(t=>t.pipe(be(1),Qw(Hg)))).pipe(Ke(t=>{for(let n of t)if(n!==!0){if(n===Hg)return Hg;if(n===!1||n instanceof C3)return n}return!0}),x1(t=>t!==Hg),be(1)))}function lde(e,t){return Qn(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return a.length===0&&o.length===0?se(k(x({},n),{guardsResult:!0})):ude(a,r,i,e).pipe(Qn(s=>s&&rde(s)?fde(r,o,e,t):se(s)),Ke(s=>k(x({},n),{guardsResult:s})))})}function ude(e,t,n,r){return tn(e).pipe(Qn(i=>gde(i.component,i.route,n,t,r)),xa(i=>i!==!0,!0))}function fde(e,t,n,r){return tn(t).pipe(As(i=>n6(pde(i.route.parent,r),dde(i.route,r),mde(e,i.path,n),hde(e,i.route,n))),xa(i=>i!==!0,!0))}function dde(e,t){return e!==null&&t&&t(new Pz(e)),se(!0)}function pde(e,t){return e!==null&&t&&t(new Rz(e)),se(!0)}function hde(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(o=>bm(()=>{let a=U5(t)??n,s=G6(o,a),c=ode(s)?s.canActivate(t,e):Ha(a,()=>s(t,e));return w3(c).pipe(xa())}));return se(i).pipe(q6())}function mde(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(a=>ede(a)).filter(a=>a!==null).map(a=>bm(()=>{let s=a.guards.map(c=>{let l=U5(a.node)??n,u=G6(c,l),f=ade(u)?u.canActivateChild(r,e):Ha(l,()=>u(r,e));return w3(f).pipe(xa())});return se(s).pipe(q6())}));return se(o).pipe(q6())}function gde(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return se(!0);let a=o.map(s=>{let c=U5(t)??i,l=G6(s,c),u=sde(l)?l.canDeactivate(e,t,n,r):Ha(c,()=>l(e,t,n,r));return w3(u).pipe(xa())});return se(a).pipe(q6())}function vde(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return se(!0);let o=i.map(a=>{let s=G6(a,e),c=ide(s)?s.canLoad(t,n):Ha(e,()=>s(t,n));return w3(c)});return se(o).pipe(q6(),jq(r))}function jq(e){return $w(ur(t=>{if(U6(t))throw Pq(e,t)}),Ke(t=>t===!0))}function yde(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return se(!0);let o=i.map(a=>{let s=G6(a,e),c=cde(s)?s.canMatch(t,n):Ha(e,()=>s(t,n));return w3(c)});return se(o).pipe(q6(),jq(r))}var O5=class{constructor(t){this.segmentGroup=t||null}},$g=class extends Error{constructor(t){super(),this.urlTree=t}};function R6(e){return t6(new O5(e))}function xde(e){return t6(new xe(4e3,!1))}function Cde(e){return t6($q(!1,Fo.GuardRejected))}var Yz=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return se(r);if(i.numberOfChildren>1||!i.children[Ze])return xde(t.redirectTo);i=i.children[Ze]}}applyRedirectCommands(t,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n.startsWith("/"))throw new $g(i);return i}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new C3(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let s=o.substring(1);r[i]=n[s]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),a={};return Object.entries(n.children).forEach(([s,c])=>{a[s]=this.createSegmentGroup(t,c,r,i)}),new Tt(o,a)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new xe(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},Xz={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bde(e,t,n,r,i){let o=rH(e,t,n);return o.matched?(r=Q5e(t,r),yde(r,t,n,i).pipe(Ke(a=>a===!0?o:x({},Xz)))):se(o)}function rH(e,t,n){if(t.path==="**")return Mde(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?x({},Xz):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||y5e)(n,e,t);if(!i)return x({},Xz);let o={};Object.entries(i.posParams??{}).forEach(([s,c])=>{o[s]=c.path});let a=i.consumed.length>0?x(x({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function Mde(e){return{matched:!0,parameters:e.length>0?wq(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function xq(e,t,n,r){return n.length>0&&Ede(e,n,r)?{segmentGroup:new Tt(t,Sde(r,new Tt(n,e.children))),slicedSegments:[]}:n.length===0&&Dde(e,n,r)?{segmentGroup:new Tt(e.segments,wde(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Tt(e.segments,e.children),slicedSegments:n}}function wde(e,t,n,r){let i={};for(let o of n)if(qg(e,t,o)&&!r[Ia(o)]){let a=new Tt([],{});i[Ia(o)]=a}return x(x({},r),i)}function Sde(e,t){let n={};n[Ze]=t;for(let r of e)if(r.path===""&&Ia(r)!==Ze){let i=new Tt([],{});n[Ia(r)]=i}return n}function Ede(e,t,n){return n.some(r=>qg(e,t,r)&&Ia(r)!==Ze)}function Dde(e,t,n){return n.some(r=>qg(e,t,r))}function qg(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function zde(e,t,n,r){return Ia(e)!==r&&(r===Ze||!qg(t,n,e))?!1:rH(t,e,n).matched}function Hde(e,t,n){return t.length===0&&!e.children[n]}var Qz=class{};function Lde(e,t,n,r,i,o,a="emptyOnly"){return new Kz(e,t,n,r,i,a,o).recognize()}var Ade=31,Kz=class{constructor(t,n,r,i,o,a,s){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new Yz(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new xe(4002,`'${t.segmentGroup}'`)}recognize(){let t=xq(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Ke(n=>{let r=new F5([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ze,this.rootComponentType,null,{}),i=new so(r,n),o=new Og("",i),a=F5e(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root,null),{state:o,tree:a}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,Ze).pipe(n3(r=>{if(r instanceof $g)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof O5?this.noMatchError(r):r}))}inheritParamsAndData(t,n){let r=t.value,i=Jz(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(t,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0).pipe(Ke(o=>o instanceof so?[o]:[]))}processChildren(t,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return tn(i).pipe(As(o=>{let a=r.children[o],s=K5e(n,o);return this.processSegmentGroup(t,s,a,o)}),Xw((o,a)=>(o.push(...a),o)),r3(null),Yw(),Qn(o=>{if(o===null)return R6(r);let a=qq(o);return Vde(a),se(a)}))}processSegment(t,n,r,i,o,a){return tn(n).pipe(As(s=>this.processSegmentAgainstRoute(s._injector??t,n,s,r,i,o,a).pipe(n3(c=>{if(c instanceof O5)return se(null);throw c}))),xa(s=>!!s),n3(s=>{if(Uq(s))return Hde(r,i,o)?se(new Qz):R6(r);throw s}))}processSegmentAgainstRoute(t,n,r,i,o,a,s){return zde(r,i,o,a)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,a):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,a):R6(i):R6(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,a){let{matched:s,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=rH(n,i,o);if(!s)return R6(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Ade&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,f).pipe(Qn(d=>this.processSegment(t,r,n,d.concat(u),a,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){let a=bde(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(C1(s=>s.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(C1(({routes:c})=>{let l=r._loadedInjector??t,{consumedSegments:u,remainingSegments:f,parameters:d}=s,p=new F5(u,d,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,_de(r),Ia(r),r.component??r._loadedComponent??null,r,kde(r)),{segmentGroup:h,slicedSegments:m}=xq(n,u,f,c);if(m.length===0&&h.hasChildren())return this.processChildren(l,c,h).pipe(Ke(v=>v===null?null:new so(p,v)));if(c.length===0&&m.length===0)return se(new so(p,[]));let g=Ia(r)===o;return this.processSegment(l,c,h,m,g?Ze:o,!0).pipe(Ke(v=>new so(p,v instanceof so?[v]:[])))}))):R6(n)))}getChildConfig(t,n,r){return n.children?se({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?se({routes:n._loadedRoutes,injector:n._loadedInjector}):vde(t,n,r,this.urlSerializer).pipe(Qn(i=>i?this.configLoader.loadChildren(t,n).pipe(ur(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):Cde(n))):se({routes:[],injector:t})}};function Vde(e){e.sort((t,n)=>t.value.outlet===Ze?-1:n.value.outlet===Ze?1:t.value.outlet.localeCompare(n.value.outlet))}function Nde(e){let t=e.value.routeConfig;return t&&t.path===""}function qq(e){let t=[],n=new Set;for(let r of e){if(!Nde(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=qq(r.children);t.push(new so(r.value,i))}return t.filter(r=>!n.has(r))}function _de(e){return e.data||{}}function kde(e){return e.resolve||{}}function Tde(e,t,n,r,i,o){return Qn(a=>Lde(e,t,n,r,a.extractedUrl,i,o).pipe(Ke(({state:s,tree:c})=>k(x({},a),{targetSnapshot:s,urlAfterRedirects:c}))))}function Ide(e,t){return Qn(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return se(n);let o=new Set(i.map(c=>c.route)),a=new Set;for(let c of o)if(!a.has(c))for(let l of Gq(c))a.add(l);let s=0;return tn(a).pipe(As(c=>o.has(c)?Fde(c,r,e,t):(c.data=Jz(c,c.parent,e).resolve,se(void 0))),ur(()=>s++),r6(1),Qn(c=>s===a.size?se(n):Lo))})}function Gq(e){let t=e.children.map(n=>Gq(n)).flat();return[e,...t]}function Fde(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!Rq(i)&&(o[P5]=i.title),Rde(o,e,t,r).pipe(Ke(a=>(e._resolvedData=a,e.data=Jz(e,e.parent,n).resolve,null)))}function Rde(e,t,n,r){let i=Hz(e);if(i.length===0)return se({});let o={};return tn(i).pipe(Qn(a=>Ode(e[a],t,n,r).pipe(xa(),ur(s=>{o[a]=s}))),r6(1),Ww(o),n3(a=>Uq(a)?Lo:t6(a)))}function Ode(e,t,n,r){let i=U5(t)??r,o=G6(e,i),a=o.resolve?o.resolve(t,n):Ha(i,()=>o(t,n));return w3(a)}function Dz(e){return C1(t=>{let n=e(t);return n?tn(n).pipe(Ke(()=>t)):se(t)})}var Wq=(()=>{let t=class t{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(a=>a.outlet===Ze);return i}getResolvedTitleForRoute(r){return r.data[P5]}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(Pde),providedIn:"root"});let e=t;return e})(),Pde=(()=>{let t=class t extends Wq{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};t.\u0275fac=function(i){return new(i||t)(ge(PU))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),q5=new De("",{providedIn:"root",factory:()=>({})}),Bg=new De(""),iH=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ce(V9)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return se(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=w3(r.loadComponent()).pipe(Ke(Yq),ur(a=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a}),i3(()=>{this.componentLoaders.delete(r)})),o=new e6(i,()=>new v1).pipe(J0());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return se({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let a=$de(i,this.compiler,r,this.onLoadEndListener).pipe(i3(()=>{this.childrenLoaders.delete(i)})),s=new e6(a,()=>new v1).pipe(J0());return this.childrenLoaders.set(i,s),s}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function $de(e,t,n,r){return w3(e.loadChildren()).pipe(Ke(Yq),Qn(i=>i instanceof W8||Array.isArray(i)?se(i):tn(t.compileModuleAsync(i))),Ke(i=>{r&&r(e);let o,a,s=!1;return Array.isArray(i)?(a=i,s=!0):(o=i.create(n).injector,a=o.get(Bg,[],{optional:!0,self:!0}).flat()),{routes:a.map(nH),injector:o}}))}function Bde(e){return e&&typeof e=="object"&&"default"in e}function Yq(e){return Bde(e)?e.default:e}var oH=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(Ude),providedIn:"root"});let e=t;return e})(),Ude=(()=>{let t=class t{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Xq=new De(""),Qq=new De("");function jde(e,t,n){let r=e.get(Qq),i=e.get(Xr);return e.get(Yt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,a=new Promise(l=>{o=l}),s=i.startViewTransition(()=>(o(),qde(e))),{onViewTransitionCreated:c}=r;return c&&Ha(e,()=>c({transition:s,from:t,to:n})),a})}function qde(e){return new Promise(t=>{nD(t,{injector:e})})}var aH=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new v1,this.transitionAbortSubject=new v1,this.configLoader=ce(iH),this.environmentInjector=ce(ji),this.urlSerializer=ce($5),this.rootContexts=ce(B5),this.location=ce(S6),this.inputBindingEnabled=ce(jg,{optional:!0})!==null,this.titleStrategy=ce(Wq),this.options=ce(q5,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ce(oH),this.createViewTransition=ce(Xq,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>se(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Iz(o)),i=o=>this.events.next(new Fz(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(k(x(x({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Pn({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:A5,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(x1(a=>a.id!==0),Ke(a=>k(x({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),C1(a=>{this.currentTransition=a;let s=!1,c=!1;return se(a).pipe(ur(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?k(x({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),C1(l=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&f!=="reload"){let d="";return this.events.next(new M3(l.id,this.urlSerializer.serialize(l.rawUrl),d,kg.IgnoredSameUrlNavigation)),l.resolve(null),Lo}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return se(l).pipe(C1(d=>{let p=this.transitions?.getValue();return this.events.next(new j6(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),p!==this.transitions?.getValue()?Lo:Promise.resolve(d)}),Tde(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ur(d=>{a.targetSnapshot=d.targetSnapshot,a.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=k(x({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let p=new Tg(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:p,source:h,restoredState:m,extras:g}=l,v=new j6(d,this.urlSerializer.serialize(p),h,m);this.events.next(v);let y=Iq(this.rootComponentType).snapshot;return this.currentTransition=a=k(x({},l),{targetSnapshot:y,urlAfterRedirects:p,extras:k(x({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,se(a)}else{let d="";return this.events.next(new M3(l.id,this.urlSerializer.serialize(l.extractedUrl),d,kg.IgnoredByUrlHandlingStrategy)),l.resolve(null),Lo}}),ur(l=>{let u=new Nz(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Ke(l=>(this.currentTransition=a=k(x({},l),{guards:J5e(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),a)),lde(this.environmentInjector,l=>this.events.next(l)),ur(l=>{if(a.guardsResult=l.guardsResult,U6(l.guardsResult))throw Pq(this.urlSerializer,l.guardsResult);let u=new _z(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),x1(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Fo.GuardRejected),!1)),Dz(l=>{if(l.guards.canActivateChecks.length)return se(l).pipe(ur(u=>{let f=new kz(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),C1(u=>{let f=!1;return se(u).pipe(Ide(this.paramsInheritanceStrategy,this.environmentInjector),ur({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",Fo.NoDataFromResolver)}}))}),ur(u=>{let f=new Tz(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),Dz(l=>{let u=f=>{let d=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(f.routeConfig).pipe(ur(p=>{f.component=p}),Ke(()=>{})));for(let p of f.children)d.push(...u(p));return d};return T8(u(l.targetSnapshot.root)).pipe(r3(null),be(1))}),Dz(()=>this.afterPreactivation()),C1(()=>{let{currentSnapshot:l,targetSnapshot:u}=a,f=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return f?tn(f).pipe(Ke(()=>a)):se(a)}),Ke(l=>{let u=q5e(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=a=k(x({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,a}),ur(()=>{this.events.next(new T5)}),Z5e(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),be(1),ur({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new D2(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Kw(this.transitionAbortSubject.pipe(ur(l=>{throw l}))),i3(()=>{!s&&!c&&this.cancelNavigationTransition(a,"",Fo.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),n3(l=>{if(c=!0,Bq(l))this.events.next(new b3(a.id,this.urlSerializer.serialize(a.extractedUrl),l.message,l.cancellationCode)),Y5e(l)?this.events.next(new I5(l.url)):a.resolve(!1);else{this.events.next(new k5(a.id,this.urlSerializer.serialize(a.extractedUrl),l,a.targetSnapshot??void 0));try{a.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(u)}}return Lo}))}))}cancelNavigationTransition(r,i,o){let a=new b3(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(a),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Gde(e){return e!==A5}var Wde=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(Yde),providedIn:"root"});let e=t;return e})(),Zz=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},Yde=(()=>{let t=class t extends Zz{};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=La(t)))(o||t)}})(),t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Kq=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(Xde),providedIn:"root"});let e=t;return e})(),Xde=(()=>{let t=class t extends Kq{constructor(){super(...arguments),this.location=ce(S6),this.urlSerializer=ce($5),this.options=ce(q5,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ce(oH),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new C3,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Iq(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof j6)this.stateMemento=this.createStateMemento();else if(r instanceof M3)this.rawUrlTree=i.initialUrl;else if(r instanceof Tg){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof T5?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof b3&&(r.code===Fo.GuardRejected||r.code===Fo.NoDataFromResolver)?this.restoreHistory(i):r instanceof k5?this.restoreHistory(i,!0):r instanceof D2&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let a=this.browserPageId,s=x(x({},i.extras.state),this.generateNgRouterState(i.id,a));this.location.replaceState(o,"",s)}else{let a=x(x({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",a)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,a=this.currentPageId-o;a!==0?this.location.historyGo(a):this.currentUrlTree===r.finalUrl&&a===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=La(t)))(o||t)}})(),t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),H5=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(H5||{});function Zq(e,t){e.events.pipe(x1(n=>n instanceof D2||n instanceof b3||n instanceof k5||n instanceof M3),Ke(n=>n instanceof D2||n instanceof M3?H5.COMPLETE:(n instanceof b3?n.code===Fo.Redirect||n.code===Fo.SupersededByNewNavigation:!1)?H5.REDIRECTING:H5.FAILED),x1(n=>n!==H5.REDIRECTING),be(1)).subscribe(()=>{t()})}function Qde(e){throw e}var Kde={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Zde={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_t=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=ce(D9),this.stateManager=ce(Kq),this.options=ce(q5,{optional:!0})||{},this.pendingTasks=ce(rl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ce(aH),this.urlSerializer=ce($5),this.location=ce(S6),this.urlHandlingStrategy=ce(oH),this._events=new v1,this.errorHandler=this.options.errorHandler||Qde,this.navigated=!1,this.routeReuseStrategy=ce(Wde),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ce(Bg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ce(jg,{optional:!0}),this.eventsSubscription=new lr,this.isNgZoneEnabled=ce(Yt)instanceof Yt&&Yt.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(o!==null&&a!==null){if(this.stateManager.handleRouterEvent(i,a),i instanceof b3&&i.code!==Fo.Redirect&&i.code!==Fo.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof D2)this.navigated=!0;else if(i instanceof I5){let s=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Gde(o.source)};this.scheduleNavigation(s,A5,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}e7e(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),A5,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let a={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let l=x({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(a.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,s,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(nH),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:a,fragment:s,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,f=null;switch(c){case"merge":f=x(x({},this.currentUrlTree.queryParams),a);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=a||null}f!==null&&(f=this.removeEmptyProps(f));let d;try{let p=o?o.snapshot:this.routerState.snapshot.root;d=Nq(p)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),d=this.currentUrlTree.root}return _q(d,r,f,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=U6(r)?r:this.parseUrl(r),a=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(a,A5,null,i)}navigate(r,i={skipLocationChange:!1}){return Jde(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=x({},Kde):i===!1?o=x({},Zde):o=i,U6(r))return hq(this.currentUrlTree,r,o);let a=this.parseUrl(r);return hq(this.currentUrlTree,a,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,a])=>(a!=null&&(i[o]=a),i),{})}scheduleNavigation(r,i,o,a,s){if(this.disposed)return Promise.resolve(!1);let c,l,u;s?(c=s.resolve,l=s.reject,u=s.promise):u=new Promise((d,p)=>{c=d,l=p});let f=this.pendingTasks.add();return Zq(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:a,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Jde(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new xe(4008,!1)}function e7e(e){return!(e instanceof T5)&&!(e instanceof I5)}var Ln=(()=>{let t=class t{constructor(r,i,o,a,s,c){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=a,this.el=s,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new v1,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof D2&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,a,s){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||o||a||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:W$(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,a=this.el.nativeElement;i!==null?o.setAttribute(a,r,i):o.removeAttribute(a,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};t.\u0275fac=function(i){return new(i||t)(W(_t),W(Ft),FE("tabindex"),W(to),W(Yr),W(qs))},t.\u0275dir=Qt({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&Ve("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&M6("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Gr.HasDecoratorInputTransform,"preserveFragment","preserveFragment",al],skipLocationChange:[Gr.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",al],replaceUrl:[Gr.HasDecoratorInputTransform,"replaceUrl","replaceUrl",al],routerLink:"routerLink"},standalone:!0,features:[oD,_o]});let e=t;return e})(),Jq=(()=>{let t=class t{get isActive(){return this._isActive}constructor(r,i,o,a,s){this.router=r,this.element=i,this.renderer=o,this.cdr=a,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Wt,this.routerEventsSubscription=r.events.subscribe(c=>{c instanceof D2&&this.update()})}ngAfterContentInit(){se(this.links.changes,se(null)).pipe(t3()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let r=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=tn(r).pipe(t3()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(r){let i=Array.isArray(r)?r:r.split(" ");this.classes=i.filter(o=>!!o)}ngOnChanges(r){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let r=this.hasActiveLinks();this._isActive!==r&&(this._isActive=r,this.cdr.markForCheck(),this.classes.forEach(i=>{r?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),r&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(r))})}isLinkActive(r){let i=t7e(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{let a=o.urlTree;return a?r.isActive(a,i):!1}}hasActiveLinks(){let r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.links.some(r)}};t.\u0275fac=function(i){return new(i||t)(W(_t),W(Yr),W(to),W(Os),W(Ln,8))},t.\u0275dir=Qt({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(i,o,a){if(i&1&&BB(a,Ln,5),i&2){let s;UB(s=jB())&&(o.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[_o]});let e=t;return e})();function t7e(e){return!!e.paths}var Ug=class{};var n7e=(()=>{let t=class t{constructor(r,i,o,a,s){this.router=r,this.injector=o,this.preloadingStrategy=a,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(x1(r=>r instanceof D2),As(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let a of i){a.providers&&!a._injector&&(a._injector=E9(a.providers,r,`Route: ${a.path}`));let s=a._injector??r,c=a._loadedInjector??s;(a.loadChildren&&!a._loadedRoutes&&a.canLoad===void 0||a.loadComponent&&!a._loadedComponent)&&o.push(this.preloadConfig(s,a)),(a.children||a._loadedRoutes)&&o.push(this.processRoutes(c,a.children??a._loadedRoutes))}return tn(o).pipe(t3())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=se(null);let a=o.pipe(Qn(s=>s===null?se(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??r,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return tn([a,s]).pipe(t3())}else return a})}};t.\u0275fac=function(i){return new(i||t)(ge(_t),ge(V9),ge(ji),ge(Ug),ge(iH))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),eG=new De(""),r7e=(()=>{let t=class t{constructor(r,i,o,a,s={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=a,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof j6?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof D2?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof M3&&r.code===kg.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Ig&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ig(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(i){sB()},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function i7e(e){return e.routerState.root}function G5(e,t){return{\u0275kind:e,\u0275providers:t}}function o7e(){let e=ce(b2);return t=>{let n=e.get(ol);if(t!==n.components[0])return;let r=e.get(_t),i=e.get(tG);e.get(sH)===1&&r.initialNavigation(),e.get(nG,null,rt.Optional)?.setUpPreloading(),e.get(eG,null,rt.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var tG=new De("",{factory:()=>new v1}),sH=new De("",{providedIn:"root",factory:()=>1});function a7e(){return G5(2,[{provide:sH,useValue:0},{provide:L9,multi:!0,deps:[b2],useFactory:t=>{let n=t.get(fU,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=t.get(_t),o=t.get(tG);Zq(i,()=>{r(!0)}),t.get(aH).afterPreactivation=()=>(r(!0),o.closed?se(void 0):o),i.initialNavigation()}))}}])}function s7e(){return G5(3,[{provide:L9,multi:!0,useFactory:()=>{let t=ce(_t);return()=>{t.setUpLocationChangeListener()}}},{provide:sH,useValue:2}])}var nG=new De("");function c7e(e){return G5(0,[{provide:nG,useExisting:n7e},{provide:Ug,useExisting:e}])}function l7e(){return G5(8,[yq,{provide:jg,useExisting:yq}])}function u7e(e){let t=[{provide:Xq,useValue:jde},{provide:Qq,useValue:x({skipNextTransition:!!e?.skipInitialTransition},e)}];return G5(9,t)}var Cq=new De("ROUTER_FORROOT_GUARD"),f7e=[S6,{provide:$5,useClass:N5},_t,B5,{provide:Ft,useFactory:i7e,deps:[_t]},iH,[]],cH=(()=>{let t=class t{constructor(r){}static forRoot(r,i){return{ngModule:t,providers:[f7e,[],{provide:Bg,multi:!0,useValue:r},{provide:Cq,useFactory:m7e,deps:[[_t,new p9,new _E]]},{provide:q5,useValue:i||{}},i?.useHash?p7e():h7e(),d7e(),i?.preloadingStrategy?c7e(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?g7e(i):[],i?.bindToComponentInputs?l7e().\u0275providers:[],i?.enableViewTransitions?u7e().\u0275providers:[],v7e()]}}static forChild(r){return{ngModule:t,providers:[{provide:Bg,multi:!0,useValue:r}]}}};t.\u0275fac=function(i){return new(i||t)(ge(Cq,8))},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({});let e=t;return e})();function d7e(){return{provide:eG,useFactory:()=>{let e=ce(xU),t=ce(Yt),n=ce(q5),r=ce(aH),i=ce($5);return n.scrollOffset&&e.setOffset(n.scrollOffset),new r7e(i,r,e,t,n)}}}function p7e(){return{provide:qs,useClass:pU}}function h7e(){return{provide:qs,useClass:SD}}function m7e(e){return"guarded"}function g7e(e){return[e.initialNavigation==="disabled"?s7e().\u0275providers:[],e.initialNavigation==="enabledBlocking"?a7e().\u0275providers:[]]}var bq=new De("");function v7e(){return[{provide:bq,useFactory:o7e},{provide:A9,multi:!0,useExisting:bq}]}var Fa=class{constructor(t){Object.assign(this,t)}toString(){return JSON.stringify(this)}get ViewUrl(){throw new Error("ViewUrl not implemented")}get EditUrl(){throw new Error("EditUrl not implemented")}get DeleteUrl(){throw new Error("DeleteUrl not implemented")}};var jn=class extends Fa{constructor(t){super(t)}get ViewUrl(){return["/goals",this.Id]}get EditUrl(){return["/goals",this.Id,"edit"]}get DeleteUrl(){return["/goals",this.Id,"delete"]}};var Oo=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var W5="customServerUrl",W6=(()=>{let t=class t extends Oo{constructor(){super()}getCustomServerUrl(){return localStorage.getItem(W5)}setCustomServerUrl(r){return kt.endpoint=r,localStorage.setItem(W5,r)}clearCustomServerUrl(){localStorage.removeItem(W5)}isCustomServerUrlSet(){return this.getCustomServerUrl()!==null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var kt={production:!0,endpoint:localStorage.getItem(W5)??""};function Zt(e){return kt.endpoint+e}function L1(){return{Id:"1",Name:"Fake Goal",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1}}function Wi(){return{Id:"1",Name:"Fake Task",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1}}function Yi(){return{Id:"1",Name:"Fake Habit",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",CompletedDates:["2020-01-01"]}}var er=(()=>{let t=class t extends Oo{constructor(r){super(),this.http=r}listGoals(){if(kt.production){let r=Zt("/goals");return this.http.get(r)}return console.debug("/goals"),se({data:[L1(),L1(),L1(),L1(),L1()],message:"success"})}findGoals(r){if(kt.production){let i=Zt(`/goals?q=${r}`);return this.http.get(i)}return console.debug(r),se({data:[L1(),L1(),L1(),L1(),L1()],message:"success"})}getGoal(r){if(kt.production){let i=Zt(`/goals/${r}`);return this.http.get(i)}return console.debug(r),se({data:L1(),message:"success"})}createGoal(r){if(kt.production){let i=Zt("/goals");return this.http.post(i,r)}return console.debug(r),se({data:L1(),message:"success"})}updateGoal(r){if(kt.production){let i=Zt(`/goals/${r.Id}`);return this.http.put(i,r)}return console.debug(r),se({data:L1(),message:"success"})}deleteGoal(r){if(kt.production){let i=Zt(`/goals/${r}`);return this.http.delete(i)}return console.debug(r),se(void 0)}getGoalTasks(r){if(kt.production){let i=Zt(`/goals/${r}/tasks`);return this.http.get(i)}return console.debug(r),se({data:[Wi(),Wi(),Wi(),Wi(),Wi()],message:"success"})}getGoalHabits(r){if(kt.production){let i=Zt(`/goals/${r}/habits`);return this.http.get(i)}return console.debug(r),se({data:[Yi(),Yi(),Yi(),Yi(),Yi()],message:"success"})}};t.\u0275fac=function(i){return new(i||t)(ge(Gs))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var lH=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(be(1)).subscribe(i=>{this.model=new jn(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteGoal(this.model?.Id).pipe(be(1)).subscribe(()=>this.router.navigateByUrl("/goals"))}};t.\u0275fac=function(i){return new(i||t)(W(er),W(Ft),W(_t))},t.\u0275cmp=Le({type:t,selectors:[["app-delete-page"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"p"),T(3,` Deleting this model will make it unrecoverable.
`),H(),z(4,"button",0),Ve("click",function(){return o.deleteModel()}),T(5),H()),i&2&&(P(),Ne("Delete ",o.model==null?null:o.model.Name,"?"),P(4),Ne(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();var xi=class extends Fa{constructor(t){super(t)}get ViewUrl(){return["/habits",this.Id]}get EditUrl(){return["/habits",this.Id,"edit"]}get DeleteUrl(){return["/habits",this.Id,"delete"]}get TimesCompletedToday(){let t=new Date().toLocaleDateString().split("T")[0];return this.CompletedDates?.filter(n=>n===t).length??0}get IsCompletedToday(){return this.IsQuantifiable?this.TimesCompletedToday>=this.TargetValue:this.TimesCompletedToday>0}get FormattedCompletedDates(){let t=[];if(this.AntiHabit){let n=new Date,r=new Date(this.CreatedAt);for(let i=r;i<=n;i.setDate(i.getDate()+1)){let o=i.toLocaleDateString().split("T")[0];(!this.CompletedDates||!this.CompletedDates.includes(o))&&t.push(o)}}else t=this.CompletedDates?.map(n=>new Date(n).toLocaleDateString().split("T")[0]??[]);return t??[]}};var Xi=class extends Fa{constructor(t){super(t)}get ViewUrl(){return["/tasks",this.Id]}get EditUrl(){return["/tasks",this.Id,"edit"]}get DeleteUrl(){return["/tasks",this.Id,"delete"]}get ImportanceHuman(){let t={1:"Low",2:"Low-Medium",3:"Medium",4:"Medium-High",5:"High"};return this.Importance in t?t[this.Importance]:"Unknown Importance"}get isOverdue(){let t=new Date,n=new Date(this.CompleteBy);return t>n}};function y7e(e,t){if(e&1&&(z(0,"li")(1,"a",4),T(2),H()()),e&2){let n=t.$implicit;P(),ve("routerLink",n.ViewUrl),P(),Ne(" ",n.Name," ")}}function x7e(e,t){if(e&1&&(z(0,"li")(1,"a",4),T(2),H()()),e&2){let n=t.$implicit;P(),ve("routerLink",n.ViewUrl),P(),Ne(" ",n.Name," ")}}var uH=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(be(1)).subscribe(i=>{this.model=new jn(i.data),this.api.getGoalHabits(r).pipe(be(1)).subscribe(o=>{this.associatedHabits=o.data.map(a=>new xi(a))}),this.api.getGoalTasks(r).pipe(be(1)).subscribe(o=>{this.associatedTasks=o.data.map(a=>new Xi(a))})})}};t.\u0275fac=function(i){return new(i||t)(W(er),W(Ft))},t.\u0275cmp=Le({type:t,selectors:[["app-goal-page"]],decls:20,vars:11,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right",3,"routerLink"],[1,"uk-button-danger","uk-button",3,"routerLink"],[1,"uk-text-default"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"button",0),T(3),H(),z(4,"button",1),T(5),H(),z(6,"pre",2),T(7),H(),Cn(8,"hr"),z(9,"p"),T(10),gi(11,"date"),H(),z(12,"p"),T(13,"Associated Habits:"),H(),z(14,"ul"),wt(15,y7e,3,2,"li",3),H(),z(16,"p"),T(17,"Associated Tasks:"),H(),z(18,"ul"),wt(19,x7e,3,2,"li",3),H()),i&2&&(P(),Ne("Goal: ",o.model==null?null:o.model.Name,""),P(),ve("routerLink",o.model==null?null:o.model.EditUrl),P(),Ne(" Edit: ",o.model==null?null:o.model.Name,`
`),P(),ve("routerLink",o.model==null?null:o.model.DeleteUrl),P(),Ne(" Delete: ",o.model==null?null:o.model.Name,`
`),P(2),Ne("    ",o.model==null?null:o.model.Description,`
`),P(3),Ne(" Complete By: ",vi(11,9,o.model==null?null:o.model.CompleteBy),`
`),P(5),ve("ngForOf",o.associatedHabits),P(4),ve("ngForOf",o.associatedTasks))},dependencies:[yi,Ln,Io],encapsulation:2});let e=t;return e})();function C7e(e,t){if(e&1&&(w1(0),z(1,"p",10),T(2),H(),S1()),e&2){let n=St().$implicit;P(2),Ne(" ",n.Description," ")}}function b7e(e,t){if(e&1){let n=ro();z(0,"tr")(1,"td")(2,"input",6),ht("ngModelChange",function(i){let a=pi(n).$implicit;return Et(a.Completed,i)||(a.Completed=i),hi(i)}),Ve("change",function(){let o=pi(n).$implicit,a=St();return hi(a.updateGoal(o))}),H()(),z(3,"td")(4,"a",7),T(5),H()(),z(6,"td",3),wt(7,C7e,3,1,"ng-container",8),H(),z(8,"td")(9,"a",9),T(10,"View"),H()()()}if(e&2){let n=t.$implicit;St();let r=il(21);P(2),pt("ngModel",n.Completed),P(2),ve("routerLink",n.ViewUrl),P(),Ne(" ",n.Name," "),P(2),ve("ngIf",n.Description)("ngIfElse",r),P(2),ve("routerLink",n.ViewUrl)}}function M7e(e,t){e&1&&(z(0,"i"),T(1,"No description provided."),H())}var fH=(()=>{let t=class t{constructor(r){this.api=r,this.goals=[]}ngOnInit(){this.api.listGoals().pipe(be(1)).subscribe(r=>{this.goals=r.data.map(i=>new jn(i))})}updateGoal(r){this.api.updateGoal(r).pipe(be(1)).subscribe(i=>{r=new jn(i.data)})}};t.\u0275fac=function(i){return new(i||t)(W(er))},t.\u0275cmp=Le({type:t,selectors:[["app-goals-page"]],decls:22,vars:1,consts:[[1,"list-header"],["routerLink","/goals/new",1,"uk-button","uk-button-primary"],[1,"uk-table","uk-table-striped"],[1,"hide-in-mobile"],[4,"ngFor","ngForOf"],["defaultDescription",""],["type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange","change"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[4,"ngIf","ngIfElse"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],[1,"description"]],template:function(i,o){i&1&&(z(0,"div",0)(1,"h1"),T(2,"Goals"),H(),z(3,"section")(4,"nav")(5,"a",1),T(6,"New Goal"),H()()()(),z(7,"section")(8,"table",2)(9,"thead")(10,"tr"),Cn(11,"th"),z(12,"th"),T(13,"Name"),H(),z(14,"th",3),T(15,"Description"),H(),z(16,"th"),T(17,"Action"),H()()(),z(18,"tbody"),wt(19,b7e,11,6,"tr",4),H()()(),wt(20,M7e,2,0,"ng-template",null,5,Ps)),i&2&&(P(19),ve("ngForOf",o.goals))},dependencies:[yi,E1,Ln,Ws,Jn,Un],styles:["p.description[_ngcontent-%COMP%]{text-wrap:nowrap;padding-right:10rem;width:28rem;overflow:hidden}"]});let e=t;return e})();var dH=(()=>{let t=class t{constructor(r,i){this.api=r,this.router=i,this.model={}}submitForm(){let r=new jn(this.model);r.Completed=!1,this.api.createGoal(r).pipe(be(1)).subscribe(()=>this.router.navigateByUrl("/goals"))}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString()}};t.\u0275fac=function(i){return new(i||t)(W(er),W(_t))},t.\u0275cmp=Le({type:t,selectors:[["app-new-goal-page"]],decls:15,vars:2,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1,"New Goal"),H(),z(2,"form",0,1)(4,"label",2),T(5,"Goal Name"),H(),z(6,"input",3),ht("ngModelChange",function(s){return Et(o.model.Name,s)||(o.model.Name=s),s}),H(),z(7,"label",4),T(8," Goal Description "),H(),z(9,"textarea",5),ht("ngModelChange",function(s){return Et(o.model.Description,s)||(o.model.Description=s),s}),H(),z(10,"label",6),T(11,"Complete By"),H(),z(12,"input",7),Ve("change",function(s){return o.updateCompleteBy(s)}),H(),z(13,"button",8),Ve("click",function(){return o.submitForm()}),T(14," Add New Goal "),H()()),i&2&&(P(6),pt("ngModel",o.model.Name),P(3),pt("ngModel",o.model.Description))},dependencies:[H1,Sr,Jn,z1,Un,Gi],encapsulation:2});let e=t;return e})();var Po=(()=>{let t=class t extends Oo{constructor(r){super(),this.http=r}getHabits(){if(kt.production){let r=Zt("/habits");return this.http.get(r)}return console.debug("/habits"),se({data:[Yi(),Yi(),Yi(),Yi(),Yi()],message:"success"})}getHabit(r){if(kt.production){let i=Zt(`/habits/${r}`);return this.http.get(i)}return console.debug(r),se({data:Yi(),message:"success"})}createHabit(r){if(kt.production){let i=Zt("/habits");return this.http.post(i,r)}return console.debug(r),se({data:Yi(),message:"success"})}updateHabit(r){if(kt.production){let i=Zt(`/habits/${r.Id}`);return this.http.put(i,r)}return console.debug(r),se({data:Yi(),message:"success"})}deleteHabit(r){if(kt.production){let i=Zt(`/habits/${r}`);return this.http.delete(i)}return console.debug(r),se(void 0)}};t.\u0275fac=function(i){return new(i||t)(ge(Gs))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var pH=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(be(1)).subscribe(i=>{this.model=new xi(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteHabit(this.model?.Id).pipe(be(1)).subscribe(()=>this.router.navigateByUrl("/"))}};t.\u0275fac=function(i){return new(i||t)(W(Po),W(Ft),W(_t))},t.\u0275cmp=Le({type:t,selectors:[["app-delete-habit-page"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"p"),T(3,` Deleting this model will make it unrecoverable.
`),H(),z(4,"button",0),Ve("click",function(){return o.deleteModel()}),T(5),H()),i&2&&(P(),Ne("Delete ",o.model==null?null:o.model.Name,"?"),P(4),Ne(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();var Gg={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]};var Wg={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]};var iG={$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:"container",data:{values:[]},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"date",timeUnit:"date",type:"ordinal",title:"Day",axis:{tickCount:{timeUnit:"day",step:1}}},y:{field:"date",timeUnit:"month",type:"ordinal",title:"Month",scale:{domain:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},color:{field:"count",type:"quantitative",title:"Count",condition:{test:"datum.count === 0",value:"transparent"},legend:null},tooltip:[{field:"count",type:"quantitative",title:"Count"}]}};var hH={};br(hH,{JsonPatchError:()=>An,_areEquals:()=>K5,applyOperation:()=>hl,applyPatch:()=>X6,applyReducer:()=>H7e,deepClone:()=>D7e,getValueByPointer:()=>Zg,validate:()=>aG,validator:()=>Jg});var S7e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),E7e=Object.prototype.hasOwnProperty;function Xg(e,t){return E7e.call(e,t)}function Qg(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Xg(e,i)&&r.push(i);return r}function Qr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Kg(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Ra(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function X5(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Yg(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Yg(e[t]))return!0}else if(typeof e=="object"){for(var r=Qg(e),i=r.length,o=0;o<i;o++)if(Yg(e[r[o]]))return!0}}return!1}function oG(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var Q5=function(e){S7e(t,e);function t(n,r,i,o,a){var s=this.constructor,c=e.call(this,oG(n,{name:r,index:i,operation:o,tree:a}))||this;return c.name=r,c.index=i,c.operation=o,c.tree=a,Object.setPrototypeOf(c,s.prototype),c.message=oG(n,{name:r,index:i,operation:o,tree:a}),c}return t}(Error);var An=Q5,D7e=Qr,Y6={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Zg(n,this.path);r&&(r=Qr(r));var i=hl(n,{op:"remove",path:this.from}).removed;return hl(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Zg(n,this.from);return hl(n,{op:"add",path:this.path,value:Qr(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:K5(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},z7e={add:function(e,t,n){return Kg(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Y6.move,copy:Y6.copy,test:Y6.test,_get:Y6._get};function Zg(e,t){if(t=="")return e;var n={op:"_get",path:t};return hl(e,n),n.value}function hl(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):Jg(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=Zg(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=K5(e,t.value),a.test===!1)throw new An("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new An("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}}else{r||(e=Qr(e));var s=t.path||"",c=s.split("/"),l=e,u=1,f=c.length,d=void 0,p=void 0,h=void 0;for(typeof n=="function"?h=n:h=Jg;;){if(p=c[u],p&&p.indexOf("~")!=-1&&(p=X5(p)),i&&(p=="__proto__"||p=="prototype"&&u>0&&c[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[p]===void 0?d=c.slice(0,u).join("/"):u==f-1&&(d=t.path),d!==void 0&&h(t,0,e,d)),u++,Array.isArray(l)){if(p==="-")p=l.length;else{if(n&&!Kg(p))throw new An("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);Kg(p)&&(p=~~p)}if(u>=f){if(n&&t.op==="add"&&p>l.length)throw new An("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var a=z7e[t.op].call(t,l,p,e);if(a.test===!1)throw new An("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(u>=f){var a=Y6[t.op].call(t,l,p,e);if(a.test===!1)throw new An("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}if(l=l[p],n&&u<f&&(!l||typeof l!="object"))throw new An("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function X6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new An("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Qr(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=hl(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function H7e(e,t,n){var r=hl(e,t);if(r.test===!1)throw new An("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Jg(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new An("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Y6[e.op]){if(typeof e.path!="string")throw new An("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new An('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new An("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new An("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Yg(e.value))throw new An("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new An("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new An("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},s=aG([a],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new An("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new An("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function aG(e,t,n){try{if(!Array.isArray(e))throw new An("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)X6(Qr(t),Qr(e),n||!0);else{n=n||Jg;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof An)return i;throw i}}function K5(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,a;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!K5(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var s=Object.keys(e);if(o=s.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(s[i]))return!1;for(i=o;i--!==0;)if(a=s[i],!K5(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}var yH={};br(yH,{compare:()=>I7e,generate:()=>mH,observe:()=>T7e,unobserve:()=>k7e});var gH=new WeakMap,L7e=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),A7e=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function V7e(e){return gH.get(e)}function N7e(e,t){return e.observers.get(t)}function _7e(e,t){e.observers.delete(t.callback)}function k7e(e,t){t.unobserve()}function T7e(e,t){var n=[],r,i=V7e(e);if(!i)i=new L7e(e),gH.set(e,i);else{var o=N7e(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Qr(e),t){r.callback=t,r.next=null;var a=function(){mH(r)},s=function(){clearTimeout(r.next),r.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return r.patches=n,r.object=e,r.unobserve=function(){mH(r),clearTimeout(r.next),_7e(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},i.observers.set(t,new A7e(t,r)),r}function mH(e,t){t===void 0&&(t=!1);var n=gH.get(e.object);vH(n.value,e.object,e.patches,"",t),e.patches.length&&X6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function vH(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=Qg(t),a=Qg(e),s=!1,c=!1,l=a.length-1;l>=0;l--){var u=a[l],f=e[u];if(Xg(t,u)&&!(t[u]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof f=="object"&&f!=null&&typeof d=="object"&&d!=null&&Array.isArray(f)===Array.isArray(d)?vH(f,d,n,r+"/"+Ra(u),i):f!==d&&(s=!0,i&&n.push({op:"test",path:r+"/"+Ra(u),value:Qr(f)}),n.push({op:"replace",path:r+"/"+Ra(u),value:Qr(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Ra(u),value:Qr(f)}),n.push({op:"remove",path:r+"/"+Ra(u)}),c=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}),s=!0)}if(!(!c&&o.length==a.length))for(var l=0;l<o.length;l++){var u=o[l];!Xg(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Ra(u),value:Qr(t[u])})}}}function I7e(e,t,n){n===void 0&&(n=!1);var r=[];return vH(e,t,r,"",n),r}var sXe=Object.assign({},hH,yH,{JsonPatchError:Q5,deepClone:Qr,escapePathComponent:Ra,unescapePathComponent:X5});var ww=ase(cG());var wI={};br(wI,{Bounds:()=>Nn,CanvasHandler:()=>yc,CanvasRenderer:()=>T7,DATE:()=>t1,DAY:()=>Kr,DAYOFYEAR:()=>Ua,Dataflow:()=>T3,Debug:()=>CH,Error:()=>J5,EventStream:()=>du,Gradient:()=>XV,GroupItem:()=>P7,HOURS:()=>_1,Handler:()=>n4,HybridHandler:()=>MN,HybridRenderer:()=>fx,Info:()=>xH,Item:()=>O7,MILLISECONDS:()=>Go,MINUTES:()=>k1,MONTH:()=>Zr,Marks:()=>i1,MultiPulse:()=>Vv,None:()=>fG,Operator:()=>Rt,Parameters:()=>Fd,Pulse:()=>lc,QUARTER:()=>e1,RenderType:()=>xc,Renderer:()=>po,ResourceLoader:()=>JV,SECONDS:()=>uo,SVGHandler:()=>mN,SVGRenderer:()=>bx,SVGStringRenderer:()=>bN,Scenegraph:()=>Cx,TIME_UNITS:()=>vv,Transform:()=>$,View:()=>QT,WEEK:()=>tr,Warn:()=>nv,YEAR:()=>zr,accessor:()=>Ci,accessorFields:()=>dr,accessorName:()=>un,array:()=>te,ascending:()=>od,bandwidthNRD:()=>Tv,bin:()=>BL,bootstrapCI:()=>UL,boundClip:()=>SN,boundContext:()=>$7,boundItem:()=>$V,boundMark:()=>qQ,boundStroke:()=>ts,changeset:()=>fc,clampRange:()=>zH,codegenExpression:()=>VC,compare:()=>id,constant:()=>hn,cumulativeLogNormal:()=>$v,cumulativeNormal:()=>Pd,cumulativeUniform:()=>qv,dayofyear:()=>mL,debounce:()=>ad,defaultLocale:()=>_d,definition:()=>Nv,densityLogNormal:()=>Pv,densityNormal:()=>Iv,densityUniform:()=>jv,domChild:()=>vr,domClear:()=>Zo,domCreate:()=>Q3,domFind:()=>hN,dotbin:()=>jL,error:()=>B,expressionFunction:()=>In,extend:()=>Te,extent:()=>Qi,extentIndex:()=>HH,falsy:()=>Js,fastmap:()=>S3,field:()=>Dr,flush:()=>LH,font:()=>yx,fontFamily:()=>j7,fontSize:()=>ns,format:()=>Sv,formatLocale:()=>Nd,formats:()=>TL,hasOwnProperty:()=>de,id:()=>Q6,identity:()=>Vn,inferType:()=>AW,inferTypes:()=>VW,ingest:()=>at,inherits:()=>ee,inrange:()=>E3,interpolate:()=>w7,interpolateColors:()=>Lu,interpolateRange:()=>$y,intersect:()=>wN,intersectBoxLine:()=>Vu,intersectPath:()=>eN,intersectPoint:()=>tN,intersectRule:()=>kQ,isArray:()=>F,isBoolean:()=>A1,isDate:()=>H2,isFunction:()=>Ie,isIterable:()=>AH,isNumber:()=>Oe,isObject:()=>ne,isRegExp:()=>VH,isString:()=>Q,isTuple:()=>Dl,key:()=>sd,lerp:()=>NH,lineHeight:()=>e4,loader:()=>uu,locale:()=>Mv,logger:()=>ed,lruCache:()=>_H,markup:()=>CN,merge:()=>kH,mergeConfig:()=>Pa,multiLineOffset:()=>vx,one:()=>Oa,pad:()=>TH,panLinear:()=>bH,panLog:()=>MH,panPow:()=>wH,panSymlog:()=>SH,parse:()=>Wne,parseExpression:()=>cf,parseSelector:()=>Ai,path:()=>Al,pathCurves:()=>QV,pathEqual:()=>MK,pathParse:()=>Ql,pathRectangle:()=>LQ,pathRender:()=>Nu,pathSymbols:()=>HQ,pathTrail:()=>AQ,peek:()=>Ue,point:()=>q7,projection:()=>gp,quantileLogNormal:()=>Bv,quantileNormal:()=>$d,quantileUniform:()=>Gv,quantiles:()=>_v,quantizeInterpolator:()=>By,quarter:()=>EH,quartiles:()=>kv,random:()=>n1,randomInteger:()=>Kme,randomKDE:()=>Rv,randomLCG:()=>Qme,randomLogNormal:()=>qL,randomMixture:()=>GL,randomNormal:()=>Fv,randomUniform:()=>WL,read:()=>FL,regressionConstant:()=>Wv,regressionExp:()=>XL,regressionLinear:()=>Xv,regressionLoess:()=>ZL,regressionLog:()=>YL,regressionPoly:()=>KL,regressionPow:()=>QL,regressionQuad:()=>Qv,renderModule:()=>G7,repeat:()=>Z5,resetDefaultLocale:()=>DW,resetSVGClipId:()=>NQ,resetSVGDefIds:()=>Txe,responseType:()=>IL,runtimeContext:()=>IC,sampleCurve:()=>hu,sampleLogNormal:()=>Ov,sampleNormal:()=>Od,sampleUniform:()=>Uv,scale:()=>lt,sceneEqual:()=>EN,sceneFromJSON:()=>WQ,scenePickVisit:()=>nx,sceneToJSON:()=>GQ,sceneVisit:()=>I2,sceneZOrder:()=>nN,scheme:()=>S7,serializeXML:()=>uK,setHybridRendererOptions:()=>Vxe,setRandom:()=>Yme,span:()=>tc,splitAccessPath:()=>$o,stringValue:()=>Z,textMetrics:()=>T1,timeBin:()=>EL,timeFloor:()=>xL,timeFormatLocale:()=>El,timeInterval:()=>ac,timeOffset:()=>bL,timeSequence:()=>wL,timeUnitSpecifier:()=>pL,timeUnits:()=>yv,toBoolean:()=>cd,toDate:()=>ld,toNumber:()=>qn,toSet:()=>hr,toString:()=>ud,transform:()=>$L,transforms:()=>uc,truncate:()=>IH,truthy:()=>pr,tupleid:()=>Ee,typeParsers:()=>NL,utcFloor:()=>CL,utcInterval:()=>sc,utcOffset:()=>ML,utcSequence:()=>SL,utcdayofyear:()=>vL,utcquarter:()=>DH,utcweek:()=>yL,version:()=>WAe,visitArray:()=>nc,week:()=>gL,writeConfig:()=>ec,zero:()=>z2,zoomLinear:()=>td,zoomLog:()=>nd,zoomPow:()=>K6,zoomSymlog:()=>rd});function Ci(e,t,n){return e.fields=t||[],e.fname=n,e}function un(e){return e==null?null:e.fname}function dr(e){return e==null?null:e.fields}function uG(e){return e.length===1?R7e(e[0]):O7e(e)}var R7e=e=>function(t){return t[e]},O7e=e=>{let t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function B(e){throw Error(e)}function $o(e){let t=[],n=e.length,r=null,i=0,o="",a,s,c;e=e+"";function l(){t.push(o+e.substring(a,s)),o="",a=s+1}for(a=s=0;s<n;++s)if(c=e[s],c==="\\")o+=e.substring(a,s++),a=s;else if(c===r)l(),r=null,i=-1;else{if(r)continue;a===i&&c==='"'||a===i&&c==="'"?(a=s+1,r=c):c==="."&&!i?s>a?l():a=s+1:c==="["?(s>a&&l(),i=a=s+1):c==="]"&&(i||B("Access path missing open bracket: "+e),i>0&&l(),i=0,a=s+1)}return i&&B("Access path missing closing bracket: "+e),r&&B("Access path missing closing quote: "+e),s>a&&(s++,l()),t}function Dr(e,t,n){let r=$o(e);return e=r.length===1?r[0]:e,Ci((n&&n.get||uG)(r),[e],t||e)}var Q6=Dr("id"),Vn=Ci(e=>e,[],"identity"),z2=Ci(()=>0,[],"zero"),Oa=Ci(()=>1,[],"one"),pr=Ci(()=>!0,[],"true"),Js=Ci(()=>!1,[],"false");function P7e(e,t,n){let r=[t].concat([].slice.call(n));console[e].apply(console,r)}var fG=0,J5=1,nv=2,xH=3,CH=4;function ed(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P7e,r=e||fG;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=J5&&n(t||"error","ERROR",arguments),this},warn(){return r>=nv&&n(t||"warn","WARN",arguments),this},info(){return r>=xH&&n(t||"log","INFO",arguments),this},debug(){return r>=CH&&n(t||"log","DEBUG",arguments),this}}}var F=Array.isArray;function ne(e){return e===Object(e)}var lG=e=>e!=="__proto__";function Pa(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(let o in i)if(o==="signals")r.signals=$7e(r.signals,i.signals);else{let a=o==="legend"?{layout:1}:o==="style"?!0:null;ec(r,o,i[o],a)}return r},{})}function ec(e,t,n,r){if(!lG(t))return;let i,o;if(ne(n)&&!F(n)){o=ne(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?ec(o,i,n[i]):lG(i)&&(o[i]=n[i])}else e[t]=n}function $7e(e,t){if(e==null)return t;let n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function Ue(e){return e[e.length-1]}function qn(e){return e==null||e===""?null:+e}var dG=e=>t=>e*Math.exp(t),pG=e=>t=>Math.log(e*t),hG=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),mG=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,tv=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function rv(e,t,n,r){let i=n(e[0]),o=n(Ue(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function bH(e,t){return rv(e,t,qn,Vn)}function MH(e,t){var n=Math.sign(e[0]);return rv(e,t,pG(n),dG(n))}function wH(e,t,n){return rv(e,t,tv(n),tv(1/n))}function SH(e,t,n){return rv(e,t,hG(n),mG(n))}function iv(e,t,n,r,i){let o=r(e[0]),a=r(Ue(e)),s=t!=null?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function td(e,t,n){return iv(e,t,n,qn,Vn)}function nd(e,t,n){let r=Math.sign(e[0]);return iv(e,t,n,pG(r),dG(r))}function K6(e,t,n,r){return iv(e,t,n,tv(r),tv(1/r))}function rd(e,t,n,r){return iv(e,t,n,hG(r),mG(r))}function EH(e){return 1+~~(new Date(e).getMonth()/3)}function DH(e){return 1+~~(new Date(e).getUTCMonth()/3)}function te(e){return e!=null?F(e)?e:[e]:[]}function zH(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Ie(e){return typeof e=="function"}var B7e="descending";function id(e,t,n){n=n||{},t=te(t)||[];let r=[],i=[],o={},a=n.comparator||U7e;return te(e).forEach((s,c)=>{s!=null&&(r.push(t[c]===B7e?-1:1),i.push(s=Ie(s)?s:Dr(s,null,n)),(dr(s)||[]).forEach(l=>o[l]=1))}),i.length===0?null:Ci(a(i,r),Object.keys(o))}var od=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),U7e=(e,t)=>e.length===1?j7e(e[0],t[0]):q7e(e,t,e.length),j7e=(e,t)=>function(n,r){return od(e(n),e(r))*t},q7e=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;a===0&&++s<n;)o=e[s],a=od(o(r),o(i));return a*t[s]});function hn(e){return Ie(e)?e:()=>e}function ad(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Te(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Qi(e,t){let n=0,r,i,o,a;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=a=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>a&&(a=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=a=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>a&&(a=i))}return[o,a]}function HH(e,t){let n=e.length,r=-1,i,o,a,s,c;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=c=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,c=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=c=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,c=r))}return[s,c]}var G7e=Object.prototype.hasOwnProperty;function de(e,t){return G7e.call(e,t)}var ev={};function S3(e){let t={},n;function r(o){return de(t,o)&&t[o]!==ev}let i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,a){return r(o)||(++i.size,t[o]===ev&&--i.empty),t[o]=a,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=ev),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){let o={},a=0;for(let s in t){let c=t[s];c!==ev&&(!n||!n(c))&&(o[s]=c,++a)}i.size=a,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function LH(e,t,n,r,i,o){if(!n&&n!==0)return o;let a=+n,s=e[0],c=Ue(e),l;c<s&&(l=s,s=c,c=l),l=Math.abs(t-s);let u=Math.abs(c-t);return l<u&&l<=a?r:u<=a?i:o}function ee(e,t,n){let r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Te(r,n)}function E3(e,t,n,r){let i=t[0],o=t[t.length-1],a;return i>o&&(a=i,i=o,o=a),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function A1(e){return typeof e=="boolean"}function H2(e){return Object.prototype.toString.call(e)==="[object Date]"}function AH(e){return e&&Ie(e[Symbol.iterator])}function Oe(e){return typeof e=="number"}function VH(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Q(e){return typeof e=="string"}function sd(e,t,n){e&&(e=t?te(e).map(s=>s.replace(/\\(.)/g,"$1")):te(e));let r=e&&e.length,i=n&&n.get||uG,o=s=>i(t?[s]:$o(s)),a;if(!r)a=function(){return""};else if(r===1){let s=o(e[0]);a=function(c){return""+s(c)}}else{let s=e.map(o);a=function(c){let l=""+s[0](c),u=0;for(;++u<r;)l+="|"+s[u](c);return l}}return Ci(a,e,"key")}function NH(e,t){let n=e[0],r=Ue(e),i=+t;return i?i===1?r:n+i*(r-n):n}var W7e=1e4;function _H(e){e=+e||W7e;let t,n,r,i=()=>{t={},n={},r=0},o=(a,s)=>(++r>e&&(n=t,t={},r=1),t[a]=s);return i(),{clear:i,has:a=>de(t,a)||de(n,a),get:a=>de(t,a)?t[a]:de(n,a)?o(a,n[a]):void 0,set:(a,s)=>de(t,a)?t[a]=s:o(a,s)}}function kH(e,t,n,r){let i=t.length,o=n.length;if(!o)return t;if(!i)return n;let a=r||new t.constructor(i+o),s=0,c=0,l=0;for(;s<i&&c<o;++l)a[l]=e(t[s],n[c])>0?n[c++]:t[s++];for(;s<i;++s,++l)a[l]=t[s];for(;c<o;++c,++l)a[l]=n[c];return a}function Z5(e,t){let n="";for(;--t>=0;)n+=e;return n}function TH(e,t,n,r){let i=n||" ",o=e+"",a=t-o.length;return a<=0?o:r==="left"?Z5(i,a)+o:r==="center"?Z5(i,~~(a/2))+o+Z5(i,Math.ceil(a/2)):o+Z5(i,a)}function tc(e){return e&&Ue(e)-e[0]||0}function Z(e){return F(e)?"["+e.map(Z)+"]":ne(e)||Q(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function cd(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}var Y7e=e=>Oe(e)||H2(e)?e:Date.parse(e);function ld(e,t){return t=t||Y7e,e==null||e===""?null:t(e)}function ud(e){return e==null||e===""?null:e+""}function hr(e){let t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function IH(e,t,n,r){let i=r??"\u2026",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:n==="left"?i+o.slice(a-s):n==="center"?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function nc(e,t,n){if(e)if(t){let r=e.length;for(let i=0;i<r;++i){let o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var gG={},FH={},RH=34,fd=10,OH=13;function yG(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function X7e(e,t){var n=yG(e);return function(r,i){return t(n(r),i,e)}}function vG(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function V1(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Q7e(e){return e<0?"-"+V1(-e,6):e>9999?"+"+V1(e,6):V1(e,4)}function K7e(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Q7e(e.getUTCFullYear(),4)+"-"+V1(e.getUTCMonth()+1,2)+"-"+V1(e.getUTCDate(),2)+(i?"T"+V1(t,2)+":"+V1(n,2)+":"+V1(r,2)+"."+V1(i,3)+"Z":r?"T"+V1(t,2)+":"+V1(n,2)+":"+V1(r,2)+"Z":n||t?"T"+V1(t,2)+":"+V1(n,2)+"Z":"")}function PH(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var p,h,m=i(f,function(g,v){if(p)return p(g,v-1);h=g,p=d?X7e(g,d):yG(g)});return m.columns=h||[],m}function i(f,d){var p=[],h=f.length,m=0,g=0,v,y=h<=0,C=!1;f.charCodeAt(h-1)===fd&&--h,f.charCodeAt(h-1)===OH&&--h;function b(){if(y)return FH;if(C)return C=!1,gG;var S,w=m,E;if(f.charCodeAt(w)===RH){for(;m++<h&&f.charCodeAt(m)!==RH||f.charCodeAt(++m)===RH;);return(S=m)>=h?y=!0:(E=f.charCodeAt(m++))===fd?C=!0:E===OH&&(C=!0,f.charCodeAt(m)===fd&&++m),f.slice(w+1,S-1).replace(/""/g,'"')}for(;m<h;){if((E=f.charCodeAt(S=m++))===fd)C=!0;else if(E===OH)C=!0,f.charCodeAt(m)===fd&&++m;else if(E!==n)continue;return f.slice(w,S)}return y=!0,f.slice(w,h)}for(;(v=b())!==FH;){for(var M=[];v!==gG&&v!==FH;)M.push(v),v=b();d&&(M=d(M,g++))==null||p.push(M)}return p}function o(f,d){return f.map(function(p){return d.map(function(h){return u(p[h])}).join(e)})}function a(f,d){return d==null&&(d=vG(f)),[d.map(u).join(e)].concat(o(f,d)).join(`
`)}function s(f,d){return d==null&&(d=vG(f)),o(f,d).join(`
`)}function c(f){return f.map(l).join(`
`)}function l(f){return f.map(u).join(e)}function u(f){return f==null?"":f instanceof Date?K7e(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:c,formatRow:l,formatValue:u}}function $H(e){return e}function ov(e){if(e==null)return $H;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(s,c){c||(t=n=0);var l=2,u=s.length,f=new Array(u);for(f[0]=(t+=s[0])*r+o,f[1]=(n+=s[1])*i+a;l<u;)f[l]=s[l],++l;return f}}function xG(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function BH(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return CG(e,n)})}:CG(e,t)}function CG(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=av(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function av(e,t){var n=ov(e.transform),r=e.arcs;function i(u,f){f.length&&f.pop();for(var d=r[u<0?~u:u],p=0,h=d.length;p<h;++p)f.push(n(d[p],p));u<0&&xG(f,h)}function o(u){return n(u)}function a(u){for(var f=[],d=0,p=u.length;d<p;++d)i(u[d],f);return f.length<2&&f.push(f[0]),f}function s(u){for(var f=a(u);f.length<4;)f.push(f[0]);return f}function c(u){return u.map(s)}function l(u){var f=u.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(l)};case"Point":d=o(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(o);break;case"LineString":d=a(u.arcs);break;case"MultiLineString":d=u.arcs.map(a);break;case"Polygon":d=c(u.arcs);break;case"MultiPolygon":d=u.arcs.map(c);break;default:return null}return{type:f,coordinates:d}}return l(t)}function UH(e,t){var n={},r={},i={},o=[],a=-1;t.forEach(function(l,u){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++a],t[a]=l,t[u]=d)}),t.forEach(function(l){var u=s(l),f=u[0],d=u[1],p,h;if(p=i[f])if(delete i[p.end],p.push(l),p.end=d,h=r[d]){delete r[h.start];var m=h===p?p:p.concat(h);r[m.start=p.start]=i[m.end=h.end]=m}else r[p.start]=i[p.end]=p;else if(p=r[d])if(delete r[p.start],p.unshift(l),p.start=f,h=i[f]){delete i[h.end];var g=h===p?p:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[p.start]=i[p.end]=p;else p=[l],r[p.start=f]=i[p.end=d]=p});function s(l){var u=e.arcs[l<0?~l:l],f=u[0],d;return e.transform?(d=[0,0],u.forEach(function(p){d[0]+=p[0],d[1]+=p[1]})):d=u[u.length-1],l<0?[d,f]:[f,d]}function c(l,u){for(var f in l){var d=l[f];delete u[d.start],delete d.start,delete d.end,d.forEach(function(p){n[p<0?~p:p]=1}),o.push(d)}}return c(i,r),c(r,i),t.forEach(function(l){n[l<0?~l:l]||o.push([l])}),o}function jH(e){return av(e,bG.apply(this,arguments))}function bG(e,t,n){var r,i,o;if(arguments.length>1)r=Z7e(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:UH(e,r)}}function Z7e(e,t,n){var r=[],i=[],o;function a(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function s(f){f.forEach(a)}function c(f){f.forEach(s)}function l(f){f.forEach(c)}function u(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(u);break;case"LineString":s(f.arcs);break;case"MultiLineString":case"Polygon":c(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return u(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function bi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qH(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function co(e){let t,n,r;e.length!==2?(t=bi,n=(s,c)=>bi(e(s),c),r=(s,c)=>e(s)-c):(t=e===bi||e===qH?e:tpe,n=e,r=e);function i(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{let f=l+u>>>1;n(s[f],c)<0?l=f+1:u=f}while(l<u)}return l}function o(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{let f=l+u>>>1;n(s[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function a(s,c,l=0,u=s.length){let f=i(s,c,l,u-1);return f>l&&r(s[f-1],c)>-r(s[f],c)?f-1:f}return{left:i,center:a,right:o}}function tpe(){return 0}function dd(e){return e===null?NaN:+e}function*MG(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}var wG=co(bi),ml=wG.right,GH=wG.left,npe=co(dd).center,L2=ml;function WH(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i))}if(n>1)return o/(n-1)}function sv(e,t){let n=WH(e,t);return n&&Math.sqrt(n)}var mn=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){let n=this._partials,r=0;for(let i=0;i<this._n&&i<32;i++){let o=n[i],a=t+o,s=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);s&&(n[r++]=s),t=a}return n[r]=t,this._n=r+1,this}valueOf(){let t=this._partials,n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}};var Z6=class extends Map{constructor(t,n=DG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let[r,i]of t)this.set(r,i)}get(t){return super.get(YH(this,t))}has(t){return super.has(YH(this,t))}set(t,n){return super.set(SG(this,t),n)}delete(t){return super.delete(EG(this,t))}},rc=class extends Set{constructor(t,n=DG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let r of t)this.add(r)}has(t){return super.has(YH(this,t))}add(t){return super.add(SG(this,t))}delete(t){return super.delete(EG(this,t))}};function YH({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function SG({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function EG({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function DG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function cv(e,t){return Array.from(t,n=>e[n])}function zG(e=bi){if(e===bi)return XH;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{let r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function XH(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var rpe=Math.sqrt(50),ipe=Math.sqrt(10),ope=Math.sqrt(2);function lv(e,t,n){let r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=rpe?10:o>=ipe?5:o>=ope?2:1,s,c,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(e*l),c=Math.round(t*l),s/l<e&&++s,c/l>t&&--c,l=-l):(l=Math.pow(10,i)*a,s=Math.round(e/l),c=Math.round(t/l),s*l<e&&++s,c*l>t&&--c),c<s&&.5<=n&&n<2?lv(e,t,n*2):[s,c,l]}function gl(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];let r=t<e,[i,o,a]=r?lv(t,e,n):lv(e,t,n);if(!(o>=i))return[];let s=o-i+1,c=new Array(s);if(r)if(a<0)for(let l=0;l<s;++l)c[l]=(o-l)/-a;else for(let l=0;l<s;++l)c[l]=(o-l)*a;else if(a<0)for(let l=0;l<s;++l)c[l]=(i+l)/-a;else for(let l=0;l<s;++l)c[l]=(i+l)*a;return c}function pd(e,t,n){return t=+t,e=+e,n=+n,lv(e,t,n)[2]}function Ki(e,t,n){t=+t,e=+e,n=+n;let r=t<e,i=r?pd(t,e,n):pd(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Bo(e,t){let n;if(t===void 0)for(let r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function vl(e,t){let n;if(t===void 0)for(let r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function uv(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?XH:zG(i);r>n;){if(r-n>600){let c=r-n+1,l=t-n+1,u=Math.log(c),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(c-f)/c)*(l-c/2<0?-1:1),p=Math.max(n,Math.floor(t-l*f/c+d)),h=Math.min(r,Math.floor(t+(c-l)*f/c+d));uv(e,t,p,h,i)}let o=e[t],a=n,s=r;for(hd(e,n,t),i(e[r],o)>0&&hd(e,n,r);a<s;){for(hd(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}i(e[n],o)===0?hd(e,n,s):(++s,hd(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function hd(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function yl(e,t,n){if(e=Float64Array.from(MG(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return vl(e);if(t>=1)return Bo(e);var r,i=(r-1)*t,o=Math.floor(i),a=Bo(uv(e,o).subarray(0,o+1)),s=vl(e.subarray(o+1));return a+(s-a)*(i-o)}}function md(e,t,n=dd){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(i-o)}}function fv(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function J6(e,t){return yl(e,.5,t)}function*spe(e){for(let t of e)yield*aO(t)}function eu(e){return Array.from(spe(e))}function Gn(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function tu(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function dv(e,...t){e=new rc(e),t=t.map(cpe);e:for(let n of e)for(let r of t)if(!r.has(n)){e.delete(n);continue e}return e}function cpe(e){return e instanceof rc?e:new rc(e)}function pv(...e){let t=new rc;for(let n of e)for(let r of n)t.add(r);return t}function HG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function xl(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function $a(e){return e=xl(Math.abs(e)),e?e[1]:NaN}function LG(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function AG(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var lpe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lo(e){if(!(t=lpe.exec(e)))throw new Error("invalid format: "+e);var t;return new hv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}lo.prototype=hv.prototype;function hv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}hv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function VG(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var QH;function NG(e,t){var n=xl(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(QH=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+xl(e,Math.max(0,t+o-1))[0]}function KH(e,t){var n=xl(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var ZH={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:HG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>KH(e*100,t),r:KH,s:NG,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function JH(e){return e}var _G=Array.prototype.map,kG=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function gd(e){var t=e.grouping===void 0||e.thousands===void 0?JH:LG(_G.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?JH:AG(_G.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(f){f=lo(f);var d=f.fill,p=f.align,h=f.sign,m=f.symbol,g=f.zero,v=f.width,y=f.comma,C=f.precision,b=f.trim,M=f.type;M==="n"?(y=!0,M="g"):ZH[M]||(C===void 0&&(C=12),b=!0,M="g"),(g||d==="0"&&p==="=")&&(g=!0,d="0",p="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",w=m==="$"?r:/[%p]/.test(M)?a:"",E=ZH[M],D=/[defgprs%]/.test(M);C=C===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function L(A){var j=S,V=w,_,N,I;if(M==="c")V=E(A)+V,A="";else{A=+A;var G=A<0||1/A<0;if(A=isNaN(A)?c:E(Math.abs(A),C),b&&(A=VG(A)),G&&+A==0&&h!=="+"&&(G=!1),j=(G?h==="("?h:s:h==="-"||h==="("?"":h)+j,V=(M==="s"?kG[8+QH/3]:"")+V+(G&&h==="("?")":""),D){for(_=-1,N=A.length;++_<N;)if(I=A.charCodeAt(_),48>I||I>57){V=(I===46?i+A.slice(_+1):A.slice(_))+V,A=A.slice(0,_);break}}}y&&!g&&(A=t(A,1/0));var X=j.length+A.length+V.length,J=X<v?new Array(v-X+1).join(d):"";switch(y&&g&&(A=t(J+A,J.length?v-V.length:1/0),J=""),p){case"<":A=j+A+V+J;break;case"=":A=j+J+A+V;break;case"^":A=J.slice(0,X=J.length>>1)+j+A+V+J.slice(X);break;default:A=J+j+A+V;break}return o(A)}return L.toString=function(){return f+""},L}function u(f,d){var p=l((f=lo(f),f.type="f",f)),h=Math.max(-8,Math.min(8,Math.floor($a(d)/3)))*3,m=Math.pow(10,-h),g=kG[8+h/3];return function(v){return p(m*v)+g}}return{format:l,formatPrefix:u}}var mv,D3,nu;eL({thousands:",",grouping:[3],currency:["$",""]});function eL(e){return mv=gd(e),D3=mv.format,nu=mv.formatPrefix,mv}function vd(e){return Math.max(0,-$a(Math.abs(e)))}function yd(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($a(t)/3)))*3-$a(Math.abs(e)))}function xd(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,$a(t)-$a(e))+1}var tL=new Date,nL=new Date;function Jt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{let a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{let c=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return c;let l;do c.push(l=new Date(+o)),t(o,s),e(o);while(l<o&&o<a);return c},i.filter=o=>Jt(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(tL.setTime(+o),nL.setTime(+a),e(tL),e(nL),Math.floor(n(tL,nL))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}var A2=Jt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);A2.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Jt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):A2);var TG=A2.range;var Mi=Jt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*1e3)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds()),IG=Mi.range;var z3=Jt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getMinutes()),upe=z3.range,H3=Jt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes()),fpe=H3.range;var L3=Jt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3-e.getMinutes()*6e4)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getHours()),dpe=L3.range,A3=Jt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours()),ppe=A3.range;var N1=Jt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1),hpe=N1.range,Uo=Jt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1),mpe=Uo.range,gv=Jt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5)),gpe=gv.range;function Ml(e){return Jt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/6048e5)}var jo=Ml(0),ru=Ml(1),RG=Ml(2),OG=Ml(3),V3=Ml(4),PG=Ml(5),$G=Ml(6),BG=jo.range,vpe=ru.range,ype=RG.range,xpe=OG.range,Cpe=V3.range,bpe=PG.range,Mpe=$G.range;function wl(e){return Jt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/6048e5)}var qo=wl(0),iu=wl(1),UG=wl(2),jG=wl(3),N3=wl(4),qG=wl(5),GG=wl(6),WG=qo.range,wpe=iu.range,Spe=UG.range,Epe=jG.range,Dpe=N3.range,zpe=qG.range,Hpe=GG.range;var ic=Jt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),Lpe=ic.range,oc=Jt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),Ape=oc.range;var Zi=Jt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Zi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Jt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});var Vpe=Zi.range,Ji=Jt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ji.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Jt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});var Npe=Ji.range;function XG(e,t,n,r,i,o){let a=[[Mi,1,1e3],[Mi,5,5*1e3],[Mi,15,15*1e3],[Mi,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[r,1,864e5],[r,2,2*864e5],[n,1,6048e5],[t,1,2592e6],[t,3,3*2592e6],[e,1,31536e6]];function s(l,u,f){let d=u<l;d&&([l,u]=[u,l]);let p=f&&typeof f.range=="function"?f:c(l,u,f),h=p?p.range(l,+u+1):[];return d?h.reverse():h}function c(l,u,f){let d=Math.abs(u-l)/f,p=co(([,,g])=>g).right(a,d);if(p===a.length)return e.every(Ki(l/31536e6,u/31536e6,f));if(p===0)return A2.every(Math.max(Ki(l,u,f),1));let[h,m]=a[d/a[p-1][2]<a[p][2]/d?p-1:p];return h.every(m)}return[s,c]}var[rL,iL]=XG(Ji,oc,qo,gv,A3,H3),[oL,aL]=XG(Zi,ic,jo,N1,L3,z3);var zr="year",e1="quarter",Zr="month",tr="week",t1="date",Kr="day",Ua="dayofyear",_1="hours",k1="minutes",uo="seconds",Go="milliseconds",vv=[zr,e1,Zr,tr,t1,Kr,Ua,_1,k1,uo,Go],sL=vv.reduce((e,t,n)=>(e[t]=1+n,e),{});function yv(e){let t=te(e).slice(),n={};return t.length||B("Missing time unit."),t.forEach(i=>{de(sL,i)?n[i]=1:B(`Invalid time unit: ${i}.`)}),(n[tr]||n[Kr]?1:0)+(n[e1]||n[Zr]||n[t1]?1:0)+(n[Ua]?1:0)>1&&B(`Incompatible time units: ${e}`),t.sort((i,o)=>sL[i]-sL[o]),t}var kpe={[zr]:"%Y ",[e1]:"Q%q ",[Zr]:"%b ",[t1]:"%d ",[tr]:"W%U ",[Kr]:"%a ",[Ua]:"%j ",[_1]:"%H:00",[k1]:"00:%M",[uo]:":%S",[Go]:".%L",[`${zr}-${Zr}`]:"%Y-%m ",[`${zr}-${Zr}-${t1}`]:"%Y-%m-%d ",[`${_1}-${k1}`]:"%H:%M"};function pL(e,t){let n=Te({},kpe,t),r=yv(e),i=r.length,o="",a=0,s,c;for(a=0;a<i;)for(s=r.length;s>a;--s)if(c=r.slice(a,s).join("-"),n[c]!=null){o+=n[c],a=s;break}return o.trim()}var Sl=new Date;function hL(e){return Sl.setFullYear(e),Sl.setMonth(0),Sl.setDate(1),Sl.setHours(0,0,0,0),Sl}function mL(e){return ZG(new Date(e))}function gL(e){return cL(new Date(e))}function ZG(e){return N1.count(hL(e.getFullYear())-1,e)}function cL(e){return jo.count(hL(e.getFullYear())-1,e)}function lL(e){return hL(e).getDay()}function Tpe(e,t,n,r,i,o,a){if(0<=e&&e<100){let s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function vL(e){return JG(new Date(e))}function yL(e){return uL(new Date(e))}function JG(e){let t=Date.UTC(e.getUTCFullYear(),0,1);return Uo.count(t-1,e)}function uL(e){let t=Date.UTC(e.getUTCFullYear(),0,1);return qo.count(t-1,e)}function fL(e){return Sl.setTime(Date.UTC(e,0,1)),Sl.getUTCDay()}function Ipe(e,t,n,r,i,o,a){if(0<=e&&e<100){let s=new Date(Date.UTC(-1,t,n,r,i,o,a));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(e,t,n,r,i,o,a))}function eW(e,t,n,r,i){let o=t||1,a=Ue(e),s=(v,y,C)=>(C=C||v,Fpe(n[C],r[C],v===a&&o,y)),c=new Date,l=hr(e),u=l[zr]?s(zr):hn(2012),f=l[Zr]?s(Zr):l[e1]?s(e1):z2,d=l[tr]&&l[Kr]?s(Kr,1,tr+Kr):l[tr]?s(tr,1):l[Kr]?s(Kr,1):l[t1]?s(t1,1):l[Ua]?s(Ua,1):Oa,p=l[_1]?s(_1):z2,h=l[k1]?s(k1):z2,m=l[uo]?s(uo):z2,g=l[Go]?s(Go):z2;return function(v){c.setTime(+v);let y=u(c);return i(y,f(c),d(c,y),p(c),h(c),m(c),g(c))}}function Fpe(e,t,n,r){let i=n<=1?e:r?(o,a)=>r+n*Math.floor((e(o,a)-r)/n):(o,a)=>n*Math.floor(e(o,a)/n);return t?(o,a)=>t(i(o,a),a):i}function ou(e,t,n){return t+e*7-(n+6)%7}var Rpe={[zr]:e=>e.getFullYear(),[e1]:e=>Math.floor(e.getMonth()/3),[Zr]:e=>e.getMonth(),[t1]:e=>e.getDate(),[_1]:e=>e.getHours(),[k1]:e=>e.getMinutes(),[uo]:e=>e.getSeconds(),[Go]:e=>e.getMilliseconds(),[Ua]:e=>ZG(e),[tr]:e=>cL(e),[tr+Kr]:(e,t)=>ou(cL(e),e.getDay(),lL(t)),[Kr]:(e,t)=>ou(1,e.getDay(),lL(t))},Ope={[e1]:e=>3*e,[tr]:(e,t)=>ou(e,0,lL(t))};function xL(e,t){return eW(e,t||1,Rpe,Ope,Tpe)}var Ppe={[zr]:e=>e.getUTCFullYear(),[e1]:e=>Math.floor(e.getUTCMonth()/3),[Zr]:e=>e.getUTCMonth(),[t1]:e=>e.getUTCDate(),[_1]:e=>e.getUTCHours(),[k1]:e=>e.getUTCMinutes(),[uo]:e=>e.getUTCSeconds(),[Go]:e=>e.getUTCMilliseconds(),[Ua]:e=>JG(e),[tr]:e=>uL(e),[Kr]:(e,t)=>ou(1,e.getUTCDay(),fL(t)),[tr+Kr]:(e,t)=>ou(uL(e),e.getUTCDay(),fL(t))},$pe={[e1]:e=>3*e,[tr]:(e,t)=>ou(e,0,fL(t))};function CL(e,t){return eW(e,t||1,Ppe,$pe,Ipe)}var Bpe={[zr]:Zi,[e1]:ic.every(3),[Zr]:ic,[tr]:jo,[t1]:N1,[Kr]:N1,[Ua]:N1,[_1]:L3,[k1]:z3,[uo]:Mi,[Go]:A2},Upe={[zr]:Ji,[e1]:oc.every(3),[Zr]:oc,[tr]:qo,[t1]:Uo,[Kr]:Uo,[Ua]:Uo,[_1]:A3,[k1]:H3,[uo]:Mi,[Go]:A2};function ac(e){return Bpe[e]}function sc(e){return Upe[e]}function tW(e,t,n){return e?e.offset(t,n):void 0}function bL(e,t,n){return tW(ac(e),t,n)}function ML(e,t,n){return tW(sc(e),t,n)}function nW(e,t,n,r){return e?e.range(t,n,r):void 0}function wL(e,t,n,r){return nW(ac(e),t,n,r)}function SL(e,t,n,r){return nW(sc(e),t,n,r)}var Md=1e3,wd=Md*60,Sd=wd*60,xv=Sd*24,jpe=xv*7,QG=xv*30,dL=xv*365,rW=[zr,Zr,t1,_1,k1,uo,Go],Ed=rW.slice(0,-1),Dd=Ed.slice(0,-1),zd=Dd.slice(0,-1),qpe=zd.slice(0,-1),Gpe=[zr,tr],KG=[zr,Zr],iW=[zr],bd=[[Ed,1,Md],[Ed,5,5*Md],[Ed,15,15*Md],[Ed,30,30*Md],[Dd,1,wd],[Dd,5,5*wd],[Dd,15,15*wd],[Dd,30,30*wd],[zd,1,Sd],[zd,3,3*Sd],[zd,6,6*Sd],[zd,12,12*Sd],[qpe,1,xv],[Gpe,1,jpe],[KG,1,QG],[KG,3,3*QG],[iW,1,dL]];function EL(e){let t=e.extent,n=e.maxbins||40,r=Math.abs(tc(t))/n,i=co(s=>s[2]).right(bd,r),o,a;return i===bd.length?(o=iW,a=Ki(t[0]/dL,t[1]/dL,n)):i?(i=bd[r/bd[i-1][2]<bd[i][2]/r?i-1:i],o=i[0],a=i[1]):(o=rW,a=Math.max(Ki(t[0],t[1],n),1)),{units:o,step:a}}function DL(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function zL(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Hd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function au(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,c=e.shortMonths,l=Ld(i),u=Ad(i),f=Ld(o),d=Ad(o),p=Ld(a),h=Ad(a),m=Ld(s),g=Ad(s),v=Ld(c),y=Ad(c),C={a:G,A:X,b:J,B:we,c:null,d:uW,e:uW,f:mhe,g:Ehe,G:zhe,H:dhe,I:phe,j:hhe,L:mW,m:ghe,M:vhe,p:Se,q:Xe,Q:pW,s:hW,S:yhe,u:xhe,U:Che,V:bhe,w:Mhe,W:whe,x:null,X:null,y:She,Y:Dhe,Z:Hhe,"%":dW},b={a:Dt,A:st,b:en,B:Hs,c:null,d:fW,e:fW,f:Nhe,g:Bhe,G:jhe,H:Lhe,I:Ahe,j:Vhe,L:vW,m:_he,M:khe,p:W0,q:F4,Q:pW,s:hW,S:The,u:Ihe,U:Fhe,V:Rhe,w:Ohe,W:Phe,x:null,X:null,y:$he,Y:Uhe,Z:qhe,"%":dW},M={a:L,A,b:j,B:V,c:_,d:cW,e:cW,f:che,g:sW,G:aW,H:lW,I:lW,j:ihe,L:she,m:rhe,M:ohe,p:D,q:nhe,Q:uhe,s:fhe,S:ahe,u:Kpe,U:Zpe,V:Jpe,w:Qpe,W:ehe,x:N,X:I,y:sW,Y:aW,Z:the,"%":lhe};C.x=S(n,C),C.X=S(r,C),C.c=S(t,C),b.x=S(n,b),b.X=S(r,b),b.c=S(t,b);function S(me,Qe){return function(nt){var oe=[],jr=-1,At=0,fi=me.length,di,ya,N8;for(nt instanceof Date||(nt=new Date(+nt));++jr<fi;)me.charCodeAt(jr)===37&&(oe.push(me.slice(At,jr)),(ya=oW[di=me.charAt(++jr)])!=null?di=me.charAt(++jr):ya=di==="e"?" ":"0",(N8=Qe[di])&&(di=N8(nt,ya)),oe.push(di),At=jr+1);return oe.push(me.slice(At,jr)),oe.join("")}}function w(me,Qe){return function(nt){var oe=Hd(1900,void 0,1),jr=E(oe,me,nt+="",0),At,fi;if(jr!=nt.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(Qe&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(At=zL(Hd(oe.y,0,1)),fi=At.getUTCDay(),At=fi>4||fi===0?iu.ceil(At):iu(At),At=Uo.offset(At,(oe.V-1)*7),oe.y=At.getUTCFullYear(),oe.m=At.getUTCMonth(),oe.d=At.getUTCDate()+(oe.w+6)%7):(At=DL(Hd(oe.y,0,1)),fi=At.getDay(),At=fi>4||fi===0?ru.ceil(At):ru(At),At=N1.offset(At,(oe.V-1)*7),oe.y=At.getFullYear(),oe.m=At.getMonth(),oe.d=At.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),fi="Z"in oe?zL(Hd(oe.y,0,1)).getUTCDay():DL(Hd(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(fi+5)%7:oe.w+oe.U*7-(fi+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,zL(oe)):DL(oe)}}function E(me,Qe,nt,oe){for(var jr=0,At=Qe.length,fi=nt.length,di,ya;jr<At;){if(oe>=fi)return-1;if(di=Qe.charCodeAt(jr++),di===37){if(di=Qe.charAt(jr++),ya=M[di in oW?Qe.charAt(jr++):di],!ya||(oe=ya(me,nt,oe))<0)return-1}else if(di!=nt.charCodeAt(oe++))return-1}return oe}function D(me,Qe,nt){var oe=l.exec(Qe.slice(nt));return oe?(me.p=u.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function L(me,Qe,nt){var oe=p.exec(Qe.slice(nt));return oe?(me.w=h.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function A(me,Qe,nt){var oe=f.exec(Qe.slice(nt));return oe?(me.w=d.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function j(me,Qe,nt){var oe=v.exec(Qe.slice(nt));return oe?(me.m=y.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function V(me,Qe,nt){var oe=m.exec(Qe.slice(nt));return oe?(me.m=g.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function _(me,Qe,nt){return E(me,t,Qe,nt)}function N(me,Qe,nt){return E(me,n,Qe,nt)}function I(me,Qe,nt){return E(me,r,Qe,nt)}function G(me){return a[me.getDay()]}function X(me){return o[me.getDay()]}function J(me){return c[me.getMonth()]}function we(me){return s[me.getMonth()]}function Se(me){return i[+(me.getHours()>=12)]}function Xe(me){return 1+~~(me.getMonth()/3)}function Dt(me){return a[me.getUTCDay()]}function st(me){return o[me.getUTCDay()]}function en(me){return c[me.getUTCMonth()]}function Hs(me){return s[me.getUTCMonth()]}function W0(me){return i[+(me.getUTCHours()>=12)]}function F4(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var Qe=S(me+="",C);return Qe.toString=function(){return me},Qe},parse:function(me){var Qe=w(me+="",!1);return Qe.toString=function(){return me},Qe},utcFormat:function(me){var Qe=S(me+="",b);return Qe.toString=function(){return me},Qe},utcParse:function(me){var Qe=w(me+="",!0);return Qe.toString=function(){return me},Qe}}}var oW={"-":"",_:" ",0:"0"},Hr=/^\s*\d+/,Wpe=/^%/,Ype=/[\\^$*+?|[\]().{}]/g;function zt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Xpe(e){return e.replace(Ype,"\\$&")}function Ld(e){return new RegExp("^(?:"+e.map(Xpe).join("|")+")","i")}function Ad(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Qpe(e,t,n){var r=Hr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Kpe(e,t,n){var r=Hr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Zpe(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Jpe(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ehe(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function aW(e,t,n){var r=Hr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function sW(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function the(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function nhe(e,t,n){var r=Hr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function rhe(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function cW(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function ihe(e,t,n){var r=Hr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function lW(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ohe(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ahe(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function she(e,t,n){var r=Hr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function che(e,t,n){var r=Hr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function lhe(e,t,n){var r=Wpe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function uhe(e,t,n){var r=Hr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function fhe(e,t,n){var r=Hr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function uW(e,t){return zt(e.getDate(),t,2)}function dhe(e,t){return zt(e.getHours(),t,2)}function phe(e,t){return zt(e.getHours()%12||12,t,2)}function hhe(e,t){return zt(1+N1.count(Zi(e),e),t,3)}function mW(e,t){return zt(e.getMilliseconds(),t,3)}function mhe(e,t){return mW(e,t)+"000"}function ghe(e,t){return zt(e.getMonth()+1,t,2)}function vhe(e,t){return zt(e.getMinutes(),t,2)}function yhe(e,t){return zt(e.getSeconds(),t,2)}function xhe(e){var t=e.getDay();return t===0?7:t}function Che(e,t){return zt(jo.count(Zi(e)-1,e),t,2)}function gW(e){var t=e.getDay();return t>=4||t===0?V3(e):V3.ceil(e)}function bhe(e,t){return e=gW(e),zt(V3.count(Zi(e),e)+(Zi(e).getDay()===4),t,2)}function Mhe(e){return e.getDay()}function whe(e,t){return zt(ru.count(Zi(e)-1,e),t,2)}function She(e,t){return zt(e.getFullYear()%100,t,2)}function Ehe(e,t){return e=gW(e),zt(e.getFullYear()%100,t,2)}function Dhe(e,t){return zt(e.getFullYear()%1e4,t,4)}function zhe(e,t){var n=e.getDay();return e=n>=4||n===0?V3(e):V3.ceil(e),zt(e.getFullYear()%1e4,t,4)}function Hhe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+zt(t/60|0,"0",2)+zt(t%60,"0",2)}function fW(e,t){return zt(e.getUTCDate(),t,2)}function Lhe(e,t){return zt(e.getUTCHours(),t,2)}function Ahe(e,t){return zt(e.getUTCHours()%12||12,t,2)}function Vhe(e,t){return zt(1+Uo.count(Ji(e),e),t,3)}function vW(e,t){return zt(e.getUTCMilliseconds(),t,3)}function Nhe(e,t){return vW(e,t)+"000"}function _he(e,t){return zt(e.getUTCMonth()+1,t,2)}function khe(e,t){return zt(e.getUTCMinutes(),t,2)}function The(e,t){return zt(e.getUTCSeconds(),t,2)}function Ihe(e){var t=e.getUTCDay();return t===0?7:t}function Fhe(e,t){return zt(qo.count(Ji(e)-1,e),t,2)}function yW(e){var t=e.getUTCDay();return t>=4||t===0?N3(e):N3.ceil(e)}function Rhe(e,t){return e=yW(e),zt(N3.count(Ji(e),e)+(Ji(e).getUTCDay()===4),t,2)}function Ohe(e){return e.getUTCDay()}function Phe(e,t){return zt(iu.count(Ji(e)-1,e),t,2)}function $he(e,t){return zt(e.getUTCFullYear()%100,t,2)}function Bhe(e,t){return e=yW(e),zt(e.getUTCFullYear()%100,t,2)}function Uhe(e,t){return zt(e.getUTCFullYear()%1e4,t,4)}function jhe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?N3(e):N3.ceil(e),zt(e.getUTCFullYear()%1e4,t,4)}function qhe(){return"+0000"}function dW(){return"%"}function pW(e){return+e}function hW(e){return Math.floor(+e/1e3)}var su,cu,Cv,lu,bv;HL({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function HL(e){return su=au(e),cu=su.format,Cv=su.parse,lu=su.utcFormat,bv=su.utcParse,su}function Vd(e){let t={};return n=>t[n]||(t[n]=e(n))}function Ghe(e,t){return n=>{let r=e(n),i=r.indexOf(t);if(i<0)return r;let o=Whe(r,i),a=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+a}}function Whe(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function CW(e){let t=Vd(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){let i=lo(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Ghe(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,a){a=lo(a??",f");let s=Ki(r,i,o),c=Math.max(Math.abs(r),Math.abs(i)),l;if(a.precision==null)switch(a.type){case"s":return isNaN(l=yd(s,c))||(a.precision=l),n(a,c);case"":case"e":case"g":case"p":case"r":{isNaN(l=xd(s,c))||(a.precision=l-(a.type==="e"));break}case"f":case"%":{isNaN(l=vd(s))||(a.precision=l-(a.type==="%")*2);break}}return t(a)}}}var LL;bW();function bW(){return LL=CW({format:D3,formatPrefix:nu})}function MW(e){return CW(gd(e))}function Nd(e){return arguments.length?LL=MW(e):LL}function xW(e,t,n){n=n||{},ne(n)||B(`Invalid time multi-format specifier: ${n}`);let r=t(uo),i=t(k1),o=t(_1),a=t(t1),s=t(tr),c=t(Zr),l=t(e1),u=t(zr),f=e(n[Go]||".%L"),d=e(n[uo]||":%S"),p=e(n[k1]||"%I:%M"),h=e(n[_1]||"%I %p"),m=e(n[t1]||n[Kr]||"%a %d"),g=e(n[tr]||"%b %d"),v=e(n[Zr]||"%B"),y=e(n[e1]||"%B"),C=e(n[zr]||"%Y");return b=>(r(b)<b?f:i(b)<b?d:o(b)<b?p:a(b)<b?h:c(b)<b?s(b)<b?m:g:u(b)<b?l(b)<b?v:y:C)(b)}function wW(e){let t=Vd(e.format),n=Vd(e.utcFormat);return{timeFormat:r=>Q(r)?t(r):xW(t,ac,r),utcFormat:r=>Q(r)?n(r):xW(n,sc,r),timeParse:Vd(e.parse),utcParse:Vd(e.utcParse)}}var AL;SW();function SW(){return AL=wW({format:cu,parse:Cv,utcFormat:lu,utcParse:bv})}function EW(e){return wW(au(e))}function El(e){return arguments.length?AL=EW(e):AL}var VL=(e,t)=>Te({},e,t);function Mv(e,t){let n=e?MW(e):Nd(),r=t?EW(t):El();return VL(n,r)}function _d(e,t){let n=arguments.length;return n&&n!==2&&B("defaultLocale expects either zero or two arguments."),n?VL(Nd(e),El(t)):VL(Nd(),El())}function DW(){return bW(),SW(),_d()}var Yhe=/^(data:|([A-Za-z]+:)?\/\/)/,Xhe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Qhe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,zW="file://";function Khe(e,t){return n=>({options:n||{},sanitize:Jhe,load:Zhe,fileAccess:!!t,file:eme(t),http:nme(e)})}function Zhe(e,t){return Gt(this,null,function*(){let n=yield this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)})}function Jhe(e,t){return Gt(this,null,function*(){t=Te({},this.options,t);let n=this.fileAccess,r={href:null},i,o,a,s=Xhe.test(e.replace(Qhe,""));(e==null||typeof e!="string"||!s)&&B("Sanitize failure, invalid URI: "+Z(e));let c=Yhe.test(e);return(a=t.baseURL)&&!c&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),o=(i=e.startsWith(zW))||t.mode==="file"||t.mode!=="http"&&!c&&n,i?e=e.slice(zW.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r})}function eme(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):tme}function tme(){return Gt(this,null,function*(){B("No file system access.")})}function nme(e){return e?function(t,n){return Gt(this,null,function*(){let r=Te({},this.options.http,n),i=n&&n.response,o=yield e(t,r);return o.ok?Ie(o[i])?o[i]():o.text():B(o.status+""+o.statusText)})}:rme}function rme(){return Gt(this,null,function*(){B("No HTTP fetch method available.")})}var ime=e=>e!=null&&e===e,ome=e=>e==="true"||e==="false"||e===!0||e===!1,ame=e=>!Number.isNaN(Date.parse(e)),LW=e=>!Number.isNaN(+e)&&!(e instanceof Date),sme=e=>LW(e)&&Number.isInteger(+e),NL={boolean:cd,integer:qn,number:qn,date:ld,string:ud,unknown:Vn},wv=[ome,sme,LW,ame],cme=["boolean","integer","number","date"];function AW(e,t){if(!e||!e.length)return"unknown";let n=e.length,r=wv.length,i=wv.map((o,a)=>a+1);for(let o=0,a=0,s,c;o<n;++o)for(c=t?e[o][t]:e[o],s=0;s<r;++s)if(i[s]&&ime(c)&&!wv[s](c)&&(i[s]=0,++a,a===wv.length))return"string";return cme[i.reduce((o,a)=>o===0?a:o,0)-1]}function VW(e,t){return t.reduce((n,r)=>(n[r]=AW(e,r),n),{})}function HW(e){let t=function(n,r){let i={delimiter:e};return _L(n,r?Te(r,i):i)};return t.responseType="text",t}function _L(e,t){return t.header&&(e=t.header.map(Z).join(t.delimiter)+`
`+e),PH(t.delimiter).parse(e+"")}_L.responseType="text";function lme(e){return typeof Buffer=="function"&&Ie(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function kL(e,t){let n=t&&t.property?Dr(t.property):Vn;return ne(e)&&!lme(e)?ume(n(e),t):n(JSON.parse(e))}kL.responseType="json";function ume(e,t){return!F(e)&&AH(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}var fme={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function NW(e,t){let n,r,i,o;return e=kL(e,t),t&&t.feature?(n=BH,i=t.feature):t&&t.mesh?(n=jH,i=t.mesh,o=fme[t.filter]):B("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):B("Invalid TopoJSON object: "+i),r&&r.features||[r]}NW.responseType="json";var Sv={dsv:_L,csv:HW(","),tsv:HW("	"),json:kL,topojson:NW};function TL(e,t){return arguments.length>1?(Sv[e]=t,this):de(Sv,e)?Sv[e]:null}function IL(e){let t=TL(e);return t&&t.responseType||"text"}function FL(e,t,n,r){t=t||{};let i=TL(t.type||"json");return i||B("Unknown data format type: "+t.type),e=i(e,t),t.parse&&dme(e,t.parse,n,r),de(e,"columns")&&delete e.columns,e}function dme(e,t,n,r){if(!e.length)return;let i=El();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),a,s,c,l,u,f;t==="auto"&&(t=VW(e,o)),o=Object.keys(t);let d=o.map(p=>{let h=t[p],m,g;if(h&&(h.startsWith("date:")||h.startsWith("utc:")))return m=h.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!NL[h])throw Error("Illegal format pattern: "+p+":"+h);return NL[h]});for(c=0,u=e.length,f=o.length;c<u;++c)for(a=e[c],l=0;l<f;++l)s=o[l],a[s]=d[l](a[s])}var uu=Khe(typeof fetch<"u"&&fetch,null);function Hv(e){let t=e||Vn,n=[],r={};return n.add=i=>{let o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{let o=t(i);if(r[o]){r[o]=0;let a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}function Id(e,t){return Gt(this,null,function*(){try{yield t(e)}catch(n){e.error(n)}})}var OW=Symbol("vega_id"),pme=1;function Dl(e){return!!(e&&Ee(e))}function Ee(e){return e[OW]}function PW(e,t){return e[OW]=t,e}function at(e){let t=e===Object(e)?e:{data:e};return Ee(t)?t:PW(t,pme++)}function Lv(e){return zl(e,at({}))}function zl(e,t){for(let n in e)t[n]=e[n];return t}function Av(e,t){return PW(t,Ee(e))}function qa(e,t){return e?t?(n,r)=>e(n,r)||Ee(t(n))-Ee(t(r)):(n,r)=>e(n,r)||Ee(n)-Ee(r):null}function OL(e){return e&&e.constructor===fc}function fc(){let e=[],t=[],n=[],r=[],i=[],o=null,a=!1;return{constructor:fc,insert(s){let c=te(s),l=c.length;for(let u=0;u<l;++u)e.push(c[u]);return this},remove(s){let c=Ie(s)?r:t,l=te(s),u=l.length;for(let f=0;f<u;++f)c.push(l[f]);return this},modify(s,c,l){let u={field:c,value:hn(l)};return Ie(s)?(u.filter=s,i.push(u)):(u.tuple=s,n.push(u)),this},encode(s,c){return Ie(s)?i.push({filter:s,field:c}):n.push({tuple:s,field:c}),this},clean(s){return o=s,this},reflow(){return a=!0,this},pulse(s,c){let l={},u={},f,d,p,h,m,g;for(f=0,d=c.length;f<d;++f)l[Ee(c[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Ee(m)]=-1;for(f=0,d=r.length;f<d;++f)h=r[f],c.forEach(y=>{h(y)&&(l[Ee(y)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Ee(m),l[g]?l[g]=1:s.add.push(at(e[f]));for(f=0,d=c.length;f<d;++f)m=c[f],l[Ee(m)]<0&&s.rem.push(m);function v(y,C,b){b?y[C]=b(y):s.encode=C,a||(u[Ee(y)]=y)}for(f=0,d=n.length;f<d;++f)p=n[f],m=p.tuple,h=p.field,g=l[Ee(m)],g>0&&(v(m,h,p.value),s.modifies(h));for(f=0,d=i.length;f<d;++f)p=i[f],h=p.filter,c.forEach(y=>{h(y)&&l[Ee(y)]>0&&v(y,p.field,p.value)}),s.modifies(p.field);if(a)s.mod=t.length||r.length?c.filter(y=>l[Ee(y)]>0):c.slice();else for(g in u)s.mod.push(u[g]);return(o||o==null&&(t.length||r.length))&&s.clean(!0),s}}}var Dv="_:mod:_";function Fd(){Object.defineProperty(this,Dv,{writable:!0,value:{}})}Fd.prototype={set(e,t,n,r){let i=this,o=i[e],a=i[Dv];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=F(n)?1+n.length:-1),i},modified(e,t){let n=this[Dv];if(arguments.length){if(F(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(let r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[Dv]={},this}};var hme=0,mme="pulse",gme=new Fd,vme=1,yme=2;function Rt(e,t,n,r){this.id=++hme,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function _W(e){return function(t){let n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Rt.prototype={targets(){return this._targets||(this._targets=Hv(Q6))},set(e){return this.value!==e?(this.value=e,1):0},skip:_W(vme),modified:_W(yme),parameters(e,t,n){t=t!==!1;let r=this._argval=this._argval||new Fd,i=this._argops=this._argops||[],o=[],a,s,c,l,u=(f,d,p)=>{p instanceof Rt?(p!==this&&(t&&p.targets().add(this),o.push(p)),i.push({op:p,name:f,index:d})):r.set(f,d,p)};for(a in e)if(s=e[a],a===mme)te(s).forEach(f=>{f instanceof Rt?f!==this&&(f.targets().add(this),o.push(f)):B("Pulse parameters must be operator instances.")}),this.source=s;else if(F(s))for(r.set(a,-1,Array(c=s.length)),l=0;l<c;++l)u(a,l,s[l]);else u(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){let t=this._argval||gme,n=this._argops,r,i,o,a;if(n){let s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){let e=this._argops,t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){let t=this._update;if(t){let n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function xme(e,t,n,r){let i=1,o;return e instanceof Rt?o=e:e&&e.prototype instanceof Rt?o=new e:Ie(e)?o=new Rt(null,e):(i=0,o=new Rt(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function Cme(e,t){let n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}var bme=0;function du(e,t,n){this.id=++bme,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function _3(e,t,n){return new du(e,t,n)}du.prototype={_filter:pr,_apply:Vn,targets(){return this._targets||(this._targets=Hv(Q6))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){let t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){let t=_3(e);return this.targets().add(t),t},apply(e){let t=_3(null,e);return this.targets().add(t),t},merge(){let e=_3();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{let n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){let t=_3();return this.targets().add(_3(null,null,ad(e,n=>{let r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(_3(null,null,()=>n=!0)),t.targets().add(_3(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=pr,this._targets=null}};function Mme(e,t,n,r){let i=this,o=_3(n,r),a=function(l){l.dataflow=i;try{o.receive(l)}catch(u){i.error(u)}finally{i.run()}},s;typeof e=="string"&&typeof document<"u"?s=document.querySelectorAll(e):s=te(e);let c=s.length;for(let l=0;l<c;++l)s[l].addEventListener(t,a);return o}function wme(e,t){let n=this.locale();return FL(e,t,n.timeParse,n.utcParse)}function Sme(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}function Eme(e,t){return Gt(this,null,function*(){let n=this,r=0,i;try{i=yield n.loader().load(e,{context:"dataflow",response:IL(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}})}function Dme(e,t,n){return Gt(this,null,function*(){let r=this,i=r._pending||zme(r);i.requests+=1;let o=yield r.request(t,n);return r.pulse(e,r.changeset().remove(pr).insert(o.data||[])),i.done(),o})}function zme(e){let t,n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}var Hme={skip:!0};function Lme(e,t,n,r,i){return(e instanceof Rt?Vme:Ame)(this,e,t,n,r,i),this}function Ame(e,t,n,r,i,o){let a=Te({},o,Hme),s,c;Ie(n)||(n=hn(n)),r===void 0?s=l=>e.touch(n(l)):Ie(r)?(c=new Rt(null,r,i,!1),s=l=>{c.evaluate(l);let u=n(l),f=c.value;OL(f)?e.pulse(u,f,o):e.update(u,f,a)}):s=l=>e.update(n(l),r,a),t.apply(s)}function Vme(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{let a=o||{},s=new Rt(null,Nme(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}function Nme(e,t){return t=Ie(t)?t:hn(t),e?function(n,r){let i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function _me(e){e.rank=++this._rank}function kme(e){let t=[e],n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&B("Cycle detected in dataflow graph.")}var zv={},ja=1,k3=2,cc=4,Tme=ja|k3,kW=ja|cc,fu=ja|k3|cc,TW=8,kd=16,IW=32,FW=64;function lc(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function RL(e,t){let n=[];return nc(e,t,r=>n.push(r)),n}function RW(e,t){let n={};return e.visit(t,r=>{n[Ee(r)]=1}),r=>n[Ee(r)]?null:r}function Ev(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}lc.prototype={StopPropagation:zv,ADD:ja,REM:k3,MOD:cc,ADD_REM:Tme,ADD_MOD:kW,ALL:fu,REFLOW:TW,SOURCE:kd,NO_SOURCE:IW,NO_FIELDS:FW,fork(e){return new lc(this.dataflow).init(this,e)},clone(){let e=this.fork(fu);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(fu|kd)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new lc(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){let n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&FW)&&(n.fields=e.fields),t&ja?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&k3?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&cc?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&IW?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){let t=e||fu;return t&ja&&this.add.length||t&k3&&this.rem.length||t&cc&&this.mod.length},reflow(e){if(e)return this.fork(fu).reflow();let t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(cc,RW(this,ja))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){let t=this.fields||(this.fields={});return F(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){let n=this.fields;return(t||this.mod.length)&&n?arguments.length?F(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){let n=this;return e&ja&&(n.addF=Ev(n.addF,t)),e&k3&&(n.remF=Ev(n.remF,t)),e&cc&&(n.modF=Ev(n.modF,t)),e&kd&&(n.srcF=Ev(n.srcF,t)),n},materialize(e){e=e||fu;let t=this;return e&ja&&t.addF&&(t.add=RL(t.add,t.addF),t.addF=null),e&k3&&t.remF&&(t.rem=RL(t.rem,t.remF),t.remF=null),e&cc&&t.modF&&(t.mod=RL(t.mod,t.modF),t.modF=null),e&kd&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){let n=this,r=t;if(e&kd)return nc(n.source,n.srcF,r),n;e&ja&&nc(n.add,n.addF,r),e&k3&&nc(n.rem,n.remF,r),e&cc&&nc(n.mod,n.modF,r);let i=n.source;if(e&TW&&i){let o=n.add.length+n.mod.length;o===i.length||(o?nc(i,RW(n,kW),r):nc(i,n.srcF,r))}return n}};function Vv(e,t,n,r){let i=this,o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(let a of n)if(a.stamp===t){if(a.fields){let s=i.fields||(i.fields={});for(let c in a.fields)s[c]=1}a.changed(i.ADD)&&(o|=i.ADD),a.changed(i.REM)&&(o|=i.REM),a.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}ee(Vv,lc,{fork(e){let t=new lc(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){let t=this,n=t.fields;return n&&t.changes&t.MOD?F(e)?e.some(r=>n[r]):n[e]:0},filter(){B("MultiPulse does not support filtering.")},materialize(){B("MultiPulse does not support materialization.")},visit(e,t){let n=this,r=n.pulses,i=r.length,o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});function Ime(e,t,n){return Gt(this,null,function*(){let r=this,i=[];if(r._pulse)return $W(r);if(r._pending&&(yield r._pending),t&&(yield Id(r,t)),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;let o=++r._clock;r._pulse=new lc(r,o,e),r._touched.forEach(u=>r._enqueue(u,!0)),r._touched=Hv(Q6);let a=0,s,c,l;try{for(;r._heap.size()>0;){if(s=r._heap.pop(),s.rank!==s.qrank){r._enqueue(s,!0);continue}c=s.run(r._getPulse(s,e)),c.then?c=yield c:c.async&&(i.push(c.async),c=zv),c!==zv&&s._targets&&s._targets.forEach(u=>r._enqueue(u)),++a}}catch(u){r._heap.clear(),l=u}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${a} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){let u=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<u.length;++f)yield Id(r,u[f].callback)}return n&&(yield Id(r,n)),i.length&&Promise.all(i).then(u=>r.runAsync(null,()=>{u.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r})}function Fme(e,t,n){return Gt(this,null,function*(){for(;this._running;)yield this._running;let r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running})}function Rme(e,t,n){return this._pulse?$W(this):(this.evaluate(e,t,n),this)}function Ome(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function $W(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Pme(e,t){let n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function $me(e,t){let n=e.source,r=this._clock;return n&&F(n)?new Vv(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Bme(this._pulse,n&&n.pulse)}function Bme(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==zv&&(e.source=t.source),e)}var PL={skip:!1,force:!1};function Ume(e,t){let n=t||PL;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function jme(e,t,n){let r=n||PL;return(e.set(t)||r.force)&&this.touch(e,r),this}function qme(e,t,n){this.touch(e,n||PL);let r=new lc(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Gme(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),BW(t,0,t.length-1,e)),pop:()=>{let n=t.pop(),r;return t.length?(r=t[0],t[0]=n,Wme(t,0,e)):r=n,r}}}function BW(e,t,n,r){let i,o,a=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(a,i)<0){e[n]=i,n=o;continue}break}return e[n]=a}function Wme(e,t,n){let r=t,i=e.length,o=e[t],a=(t<<1)+1,s;for(;a<i;)s=a+1,s<i&&n(e[a],e[s])>=0&&(a=s),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=o,BW(e,r,t,n)}function T3(){this.logger(ed()),this.logLevel(J5),this._clock=0,this._rank=0,this._locale=_d();try{this._loader=uu()}catch{}this._touched=Hv(Q6),this._input={},this._pulse=null,this._heap=Gme((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Td(e){return function(){return this._log[e].apply(this,arguments)}}T3.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Td("error"),warn:Td("warn"),info:Td("info"),debug:Td("debug"),logLevel:Td("level"),cleanThreshold:1e4,add:xme,connect:Cme,rank:_me,rerank:kme,pulse:qme,touch:Ume,update:jme,changeset:fc,ingest:Sme,parse:wme,preload:Dme,request:Eme,events:Mme,on:Lme,evaluate:Ime,run:Rme,runAsync:Fme,runAfter:Ome,_enqueue:Pme,_getPulse:$me};function $(e,t){Rt.call(this,e,null,t)}ee($,Rt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){let t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});var uc={};function Nv(e){let t=$L(e);return t&&t.Definition||null}function $L(e){return e=e&&e.toLowerCase(),de(uc,e)?uc[e]:null}var zA={};br(zA,{aggregate:()=>I3,bin:()=>rA,collect:()=>iA,compare:()=>eY,countpattern:()=>oA,cross:()=>aA,density:()=>sA,dotbin:()=>lA,expression:()=>oY,extent:()=>uA,facet:()=>Zv,field:()=>aY,filter:()=>dA,flatten:()=>pA,fold:()=>hA,formula:()=>mA,generate:()=>sY,impute:()=>gA,joinaggregate:()=>vA,kde:()=>yA,key:()=>cY,load:()=>lY,lookup:()=>xA,multiextent:()=>uY,multivalues:()=>fY,params:()=>dY,pivot:()=>CA,prefacet:()=>pY,project:()=>bA,proxy:()=>hY,quantile:()=>MA,relay:()=>mY,sample:()=>wA,sequence:()=>SA,sieve:()=>gY,subflow:()=>fA,timeunit:()=>EA,tupleindex:()=>yY,values:()=>xY,window:()=>DA});function*qW(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function _v(e,t,n){let r=Float64Array.from(qW(e,n));return r.sort(bi),t.map(i=>md(r,i))}function kv(e,t){return _v(e,[.25,.5,.75],t)}function Tv(e,t){let n=e.length,r=sv(e,t),i=kv(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function BL(e){let t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2],o=e.extent[0],a=e.extent[1],s,c,l,u,f,d,p=e.span||a-o||Math.abs(o)||1;if(e.step)s=e.step;else if(e.steps){for(u=p/t,f=0,d=e.steps.length;f<d&&e.steps[f]<u;++f);s=e.steps[Math.max(0,f-1)]}else{for(c=Math.ceil(Math.log(t)/r),l=e.minstep||0,s=Math.max(l,Math.pow(n,Math.round(Math.log(p)/r)-c));Math.ceil(p/s)>t;)s*=n;for(f=0,d=i.length;f<d;++f)u=s/i[f],u>=l&&p/u<=t&&(s=u)}u=Math.log(s);let h=u>=0?0:~~(-u/r)+1,m=Math.pow(n,-h-1);return(e.nice||e.nice===void 0)&&(u=Math.floor(o/s+m)*s,o=o<u?u-s:u,a=Math.ceil(a/s)*s),{start:o,stop:a===o?o+s:a,step:s}}var n1=Math.random;function Yme(e){n1=e}function UL(e,t,n,r){if(!e.length)return[void 0,void 0];let i=Float64Array.from(qW(e,r)),o=i.length,a=t,s,c,l,u;for(l=0,u=Array(a);l<a;++l){for(s=0,c=0;c<o;++c)s+=i[~~(n1()*o)];u[l]=s/o}return u.sort(bi),[yl(u,n/2),yl(u,1-n/2)]}function jL(e,t,n,r){r=r||(d=>d);let i=e.length,o=new Float64Array(i),a=0,s=1,c=r(e[0]),l=c,u=c+t,f;for(;s<i;++s){if(f=r(e[s]),f>=u){for(l=(c+l)/2;a<s;++a)o[a]=l;u=f+t,c=f}l=f}for(l=(c+l)/2;a<s;++a)o[a]=l;return n?Xme(o,t+t/4):o}function Xme(e,t){let n=e.length,r=0,i=1,o,a;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(a=i+(r+o-i-i>>1);a<i;)e[a++]=e[i];for(;a>i;)e[a--]=e[r]}r=i,i=o}return e}function Qme(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Kme(e,t){t==null&&(t=e,e=0);let n,r,i,o={min(a){return arguments.length?(n=a||0,i=r-n,o):n},max(a){return arguments.length?(r=a||0,i=r-n,o):r},sample(){return n+Math.floor(i*n1())},pdf(a){return a===Math.floor(a)&&a>=n&&a<r?1/i:0},cdf(a){let s=Math.floor(a);return s<n?0:s>=r?1:(s-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return o.min(e).max(t)}var GW=Math.sqrt(2*Math.PI),Zme=Math.SQRT2,Rd=NaN;function Od(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(Rd===Rd)n=Rd,Rd=NaN;else{do n=n1()*2-1,r=n1()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,Rd=r*o}return e+n*t}function Iv(e,t,n){n=n??1;let r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*GW)}function Pd(e,t,n){t=t||0,n=n??1;let r=(e-t)/n,i=Math.abs(r),o;if(i>37)o=0;else{let a=Math.exp(-i*i/2),s;i<7.07106781186547?(s=.0352624965998911*i+.700383064443688,s=s*i+6.37396220353165,s=s*i+33.912866078383,s=s*i+112.079291497871,s=s*i+221.213596169931,s=s*i+220.206867912376,o=a*s,s=.0883883476483184*i+1.75566716318264,s=s*i+16.064177579207,s=s*i+86.7807322029461,s=s*i+296.564248779674,s=s*i+637.333633378831,s=s*i+793.826512519948,s=s*i+440.413735824752,o=o/s):(s=i+.65,s=i+4/s,s=i+3/s,s=i+2/s,s=i+1/s,o=a/s/2.506628274631)}return r>0?1-o:o}function $d(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Zme*Jme(2*e-1)}function Jme(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Fv(e,t){let n,r,i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>Od(n,r),pdf:o=>Iv(o,n,r),cdf:o=>Pd(o,n,r),icdf:o=>$d(o,n,r)};return i.mean(e).stdev(t)}function Rv(e,t){let n=Fv(),r=0,i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=Tv(e)),i):t},sample(){return e[~~(n1()*r)]+t*n.sample()},pdf(o){let a=0,s=0;for(;s<r;++s)a+=n.pdf((o-e[s])/t);return a/t/r},cdf(o){let a=0,s=0;for(;s<r;++s)a+=n.cdf((o-e[s])/t);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Ov(e,t){return e=e||0,t=t??1,Math.exp(e+Od()*t)}function Pv(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;let r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*GW*e)}function $v(e,t,n){return Pd(Math.log(e),t,n)}function Bv(e,t,n){return Math.exp($d(e,t,n))}function qL(e,t){let n,r,i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>Ov(n,r),pdf:o=>Pv(o,n,r),cdf:o=>$v(o,n,r),icdf:o=>Bv(o,n,r)};return i.mean(e).stdev(t)}function GL(e,t){let n=0,r;function i(a){let s=[],c=0,l;for(l=0;l<n;++l)c+=s[l]=a[l]==null?1:+a[l];for(l=0;l<n;++l)s[l]/=c;return s}let o={weights(a){return arguments.length?(r=i(t=a||[]),o):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),o.weights(t)):e},sample(){let a=n1(),s=e[n-1],c=r[0],l=0;for(;l<n-1;c+=r[++l])if(a<c){s=e[l];break}return s.sample()},pdf(a){let s=0,c=0;for(;c<n;++c)s+=r[c]*e[c].pdf(a);return s},cdf(a){let s=0,c=0;for(;c<n;++c)s+=r[c]*e[c].cdf(a);return s},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function Uv(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*n1()}function jv(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function qv(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Gv(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function WL(e,t){let n,r,i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>Uv(n,r),pdf:o=>jv(o,n,r),cdf:o=>qv(o,n,r),icdf:o=>Gv(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Wv(e,t,n){let r=0,i=0;for(let o of e){let a=n(o);t(o)==null||a==null||isNaN(a)||(r+=(a-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Bd(e,t,n,r){let i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function Yv(e,t,n,r){e=e.filter(p=>{let h=t(p),m=n(p);return h!=null&&(h=+h)>=h&&m!=null&&(m=+m)>=m}),r&&e.sort((p,h)=>t(p)-t(h));let i=e.length,o=new Float64Array(i),a=new Float64Array(i),s=0,c=0,l=0,u,f,d;for(d of e)o[s]=u=+t(d),a[s]=f=+n(d),++s,c+=(u-c)/s,l+=(f-l)/s;for(s=0;s<i;++s)o[s]-=c,a[s]-=l;return[o,a,c,l]}function Ud(e,t,n,r){let i=-1,o,a;for(let s of e)o=t(s),a=n(s),o!=null&&(o=+o)>=o&&a!=null&&(a=+a)>=a&&r(o,a,++i)}function pu(e,t,n,r,i){let o=0,a=0;return Ud(e,t,n,(s,c)=>{let l=c-i(s),u=c-r;o+=l*l,a+=u*u}),1-o/a}function Xv(e,t,n){let r=0,i=0,o=0,a=0,s=0;Ud(e,t,n,(u,f)=>{++s,r+=(u-r)/s,i+=(f-i)/s,o+=(u*f-o)/s,a+=(u*u-a)/s});let c=Bd(r,i,o,a),l=u=>c[0]+c[1]*u;return{coef:c,predict:l,rSquared:pu(e,t,n,i,l)}}function YL(e,t,n){let r=0,i=0,o=0,a=0,s=0;Ud(e,t,n,(u,f)=>{++s,u=Math.log(u),r+=(u-r)/s,i+=(f-i)/s,o+=(u*f-o)/s,a+=(u*u-a)/s});let c=Bd(r,i,o,a),l=u=>c[0]+c[1]*Math.log(u);return{coef:c,predict:l,rSquared:pu(e,t,n,i,l)}}function XL(e,t,n){let[r,i,o,a]=Yv(e,t,n),s=0,c=0,l=0,u=0,f=0,d,p,h;Ud(e,t,n,(y,C)=>{d=r[f++],p=Math.log(C),h=d*C,s+=(C*p-s)/f,c+=(h-c)/f,l+=(h*p-l)/f,u+=(d*h-u)/f});let[m,g]=Bd(c/a,s/a,l/a,u/a),v=y=>Math.exp(m+g*(y-o));return{coef:[Math.exp(m-g*o),g],predict:v,rSquared:pu(e,t,n,a,v)}}function QL(e,t,n){let r=0,i=0,o=0,a=0,s=0,c=0;Ud(e,t,n,(f,d)=>{let p=Math.log(f),h=Math.log(d);++c,r+=(p-r)/c,i+=(h-i)/c,o+=(p*h-o)/c,a+=(p*p-a)/c,s+=(d-s)/c});let l=Bd(r,i,o,a),u=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:u,rSquared:pu(e,t,n,s,u)}}function Qv(e,t,n){let[r,i,o,a]=Yv(e,t,n),s=r.length,c=0,l=0,u=0,f=0,d=0,p,h,m,g;for(p=0;p<s;)h=r[p],m=i[p++],g=h*h,c+=(g-c)/p,l+=(g*h-l)/p,u+=(g*g-u)/p,f+=(h*m-f)/p,d+=(g*m-d)/p;let v=u-c*c,y=c*v-l*l,C=(d*c-f*l)/y,b=(f*v-d*l)/y,M=-C*c,S=w=>(w=w-o,C*w*w+b*w+M+a);return{coef:[M-b*o+C*o*o+a,b-2*C*o,C],predict:S,rSquared:pu(e,t,n,a,S)}}function KL(e,t,n,r){if(r===0)return Wv(e,t,n);if(r===1)return Xv(e,t,n);if(r===2)return Qv(e,t,n);let[i,o,a,s]=Yv(e,t,n),c=i.length,l=[],u=[],f=r+1,d,p,h,m,g;for(d=0;d<f;++d){for(h=0,m=0;h<c;++h)m+=Math.pow(i[h],d)*o[h];for(l.push(m),g=new Float64Array(f),p=0;p<f;++p){for(h=0,m=0;h<c;++h)m+=Math.pow(i[h],d+p);g[p]=m}u.push(g)}u.push(l);let v=t9e(u),y=C=>{C-=a;let b=s+v[0]+v[1]*C+v[2]*C*C;for(d=3;d<f;++d)b+=v[d]*Math.pow(C,d);return b};return{coef:e9e(f,v,-a,s),predict:y,rSquared:pu(e,t,n,s,y)}}function e9e(e,t,n,r){let i=Array(e),o,a,s,c;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],c=1,i[o]+=s,a=1;a<=o;++a)c*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*c;return i[0]+=r,i}function t9e(e){let t=e.length-1,n=[],r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}var UW=2,jW=1e-12;function ZL(e,t,n,r){let[i,o,a,s]=Yv(e,t,n,!0),c=i.length,l=Math.max(2,~~(r*c)),u=new Float64Array(c),f=new Float64Array(c),d=new Float64Array(c).fill(1);for(let p=-1;++p<=UW;){let h=[0,l-1];for(let g=0;g<c;++g){let v=i[g],y=h[0],C=h[1],b=v-i[y]>i[C]-v?y:C,M=0,S=0,w=0,E=0,D=0,L=1/Math.abs(i[b]-v||1);for(let V=y;V<=C;++V){let _=i[V],N=o[V],I=n9e(Math.abs(v-_)*L)*d[V],G=_*I;M+=I,S+=G,w+=N*I,E+=N*G,D+=_*G}let[A,j]=Bd(S/M,w/M,E/M,D/M);u[g]=A+j*v,f[g]=Math.abs(o[g]-u[g]),r9e(i,g+1,h)}if(p===UW)break;let m=J6(f);if(Math.abs(m)<jW)break;for(let g=0,v,y;g<c;++g)v=f[g]/(6*m),d[g]=v>=1?jW:(y=1-v*v)*y}return i9e(i,u,a,s)}function n9e(e){return(e=1-e*e*e)*e*e}function r9e(e,t,n){let r=e[t],i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function i9e(e,t,n,r){let i=e.length,o=[],a=0,s=0,c=[],l;for(;a<i;++a)l=e[a]+n,c[0]===l?c[1]+=(t[a]-c[1])/++s:(s=0,c[1]+=r,c=[l,t[a]],o.push(c));return c[1]+=r,o}var o9e=.5*Math.PI/180;function hu(e,t,n,r){n=n||25,r=Math.max(n,r||200);let i=m=>[m,e(m)],o=t[0],a=t[1],s=a-o,c=s/r,l=[i(o)],u=[];if(n===r){for(let m=1;m<r;++m)l.push(i(o+m/n*s));return l.push(i(a)),l}else{u.push(i(a));for(let m=n;--m>0;)u.push(i(o+m/n*s))}let f=l[0],d=u[u.length-1],p=1/s,h=a9e(f[1],u);for(;d;){let m=i((f[0]+d[0])/2);m[0]-f[0]>=c&&s9e(f,m,d,p,h)>o9e?u.push(m):(f=d,l.push(d),u.pop()),d=u[u.length-1]}return l}function a9e(e,t){let n=e,r=e,i=t.length;for(let o=0;o<i;++o){let a=t[o][1];a<n&&(n=a),a>r&&(r=a)}return 1/(r-n)}function s9e(e,t,n,r,i){let o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),a=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-a)}function c9e(e){return t=>{let n=e.length,r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function tA(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:c9e(e)}function XW(e,t,n){return n||e+(t?"_"+t:"")}var JL=()=>{},l9e={init:JL,add:JL,rem:JL,idx:0},jd={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Gd=Object.keys(jd).filter(e=>e!=="__count__");function u9e(e,t){return(n,r)=>Te({name:e,aggregate_param:r,out:n||e},l9e,t)}[...Gd,"__count__"].forEach(e=>{jd[e]=u9e(e,jd[e])});function QW(e,t,n){return jd[e](n,t)}function KW(e,t){return e.idx-t.idx}function f9e(e){let t={};e.forEach(r=>t[r.name]=r);let n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=jd[i]())})};return e.forEach(n),Object.values(t).sort(KW)}function d9e(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function p9e(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function h9e(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function m9e(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function ZW(e,t){let n=t||Vn,r=f9e(e),i=e.slice().sort(KW);function o(a){this._ops=r,this._out=i,this.cell=a,this.init()}return o.prototype.init=d9e,o.prototype.add=p9e,o.prototype.rem=h9e,o.prototype.set=m9e,o.prototype.get=n,o.fields=e.map(a=>a.out),o}function nA(e){this._key=e?Dr(e):Ee,this.reset()}var Jr=nA.prototype;Jr.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Jr.add=function(e){this._add.push(e)};Jr.rem=function(e){this._rem.push(e)};Jr.values=function(){if(this._get=null,this._rem.length===0)return this._add;let e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={},s,c,l;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,c=0;s<r;++s)a[n(l=e[s])]?a[n(l)]=0:o[c++]=l;return this._rem=[],this._add=o};Jr.distinct=function(e){let t=this.values(),n={},r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",de(n,o)||(n[o]=1,++i);return i};Jr.extent=function(e){if(this._get!==e||!this._ext){let t=this.values(),n=HH(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Jr.argmin=function(e){return this.extent(e)[0]||{}};Jr.argmax=function(e){return this.extent(e)[1]||{}};Jr.min=function(e){let t=this.extent(e)[0];return t!=null?e(t):void 0};Jr.max=function(e){let t=this.extent(e)[1];return t!=null?e(t):void 0};Jr.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=kv(this.values(),e),this._get=e),this._q};Jr.q1=function(e){return this.quartile(e)[0]};Jr.q2=function(e){return this.quartile(e)[1]};Jr.q3=function(e){return this.quartile(e)[2]};Jr.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=UL(this.values(),1e3,.05,e),this._get=e),this._ci};Jr.ci0=function(e){return this.ci(e)[0]};Jr.ci1=function(e){return this.ci(e)[1]};function I3(e){$.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}I3.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Gd},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ee(I3,$,{transform(e,t){let n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){let e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(s){let c,l,u,f;for(c in s)for(u=s[c].tuple,l=0;l<i;++l)r[l][f=u[n[l]]]=f}o(e._prev),o(t);function a(s,c,l){let u=n[l],f=r[l++];for(let d in f){let p=s?s+"|"+d:d;c[u]=f[d],l<i?a(p,c,l):t[p]||e.cell(p,c)}}a("",{},0)},init(e){let t=this._inputs=[],n=this._outputs=[],r={};function i(y){let C=te(dr(y)),b=C.length,M=0,S;for(;M<b;++M)r[S=C[M]]||(r[S]=1,t.push(S))}this._dims=te(e.groupby),this._dnames=this._dims.map(y=>{let C=un(y);return i(y),n.push(C),C}),this.cellkey=e.key?e.key:tA(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];let o=e.fields||[null],a=e.ops||["count"],s=e.aggregate_params||[null],c=e.as||[],l=o.length,u={},f,d,p,h,m,g,v;for(l!==a.length&&B("Unmatched number of fields and aggregate ops."),v=0;v<l;++v){if(f=o[v],d=a[v],p=s[v]||null,f==null&&d!=="count"&&B("Null aggregate field specified."),m=un(f),g=XW(d,m,c[v]),n.push(g),d==="count"){this._counts.push(g);continue}h=u[m],h||(i(f),h=u[m]=[],h.field=f,this._measures.push(h)),d!=="count"&&(this._countOnly=!1),h.push(QW(d,p,g))}return this._measures=this._measures.map(y=>ZW(y,y.field)),Object.create(null)},cellkey:tA(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){let n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){let r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new nA),n},newtuple(e,t){let n=this._dnames,r=this._dims,i=r.length,o={};for(let a=0;a<i;++a)o[n[a]]=r[a](e);return t?Av(t.tuple,o):at(o)},clean(){let e=this.value;for(let t in e)e[t].num===0&&delete e[t]},add(e){let t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);let r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){let t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);let r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){let t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){let r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){let t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod,c,l,u,f;if(r)for(l in r)c=r[l],(!i||c.num)&&a.push(c.tuple);for(u=0,f=this._alen;u<f;++u)o.push(this.celltuple(t[u])),t[u]=null;for(u=0,f=this._mlen;u<f;++u)c=n[u],(c.num===0&&i?a:s).push(this.celltuple(c)),n[u]=null;return this._alen=this._mlen=0,this._prev=null,e}});var g9e=1e-14;function rA(e){$.call(this,null,e)}rA.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ee(rA,$,{transform(e,t){let n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,a=e.as||["bin0","bin1"],s=a[0],c=a[1],l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(dr(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?u=>{let f=r(u);u[s]=f,u[c]=f==null?null:i+o*(1+(f-i)/o)}:u=>u[s]=r(u)),t.modifies(n?a:s)},_bins(e){if(this.value&&!e.modified())return this.value;let t=e.field,n=BL(e),r=n.step,i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,a,s;(a=e.anchor)!=null&&(s=a-(i+r*Math.floor((a-i)/r)),i+=s,o+=s);let c=function(l){let u=qn(t(l));return u==null?null:u<i?-1/0:u>o?1/0:(u=Math.max(i,Math.min(u,o-r)),i+r*Math.floor(g9e+(u-i)/r))};return c.start=i,c.stop=n.stop,c.step=r,this.value=Ci(c,dr(t),e.name||"bin_"+un(t))}});function JW(e,t,n){let r=e,i=t||[],o=n||[],a={},s=0;return{add:c=>o.push(c),remove:c=>a[r(c)]=++s,size:()=>i.length,data:(c,l)=>(s&&(i=i.filter(u=>!a[r(u)]),a={},s=0),l&&c&&i.sort(c),o.length&&(i=c?kH(c,i,o.sort(c)):i.concat(o),o=[]),i)}}function iA(e){$.call(this,[],e)}iA.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ee(iA,$,{transform(e,t){let n=t.fork(t.ALL),r=JW(Ee,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(qa(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function eY(e){Rt.call(this,null,v9e,e)}ee(eY,Rt);function v9e(e){return this.value&&!e.modified()?this.value:id(e.fields,e.orders)}function oA(e){$.call(this,null,e)}oA.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function y9e(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ee(oA,$,{transform(e,t){let n=f=>d=>{for(var p=y9e(s(d),e.case,o)||[],h,m=0,g=p.length;m<g;++m)a.test(h=p[m])||f(h)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,c=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),u=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,u)),this._finish(t,c)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){let n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS),s,c,l;for(s in n)c=r[s],l=n[s]||0,!c&&l?(r[s]=c=at({}),c[i]=s,c[o]=l,a.add.push(c)):l===0?(c&&a.rem.push(c),n[s]=null,r[s]=null):c[o]!==l&&(c[o]=l,a.mod.push(c));return a.modifies(t)}});function aA(e){$.call(this,null,e)}aA.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ee(aA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter"),s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=x9e(s,i,o,e.filter||pr)):n.mod=s,n.source=this.value,n.modifies(r)}});function x9e(e,t,n,r){for(var i=[],o={},a=e.length,s=0,c,l;s<a;++s)for(o[t]=l=e[s],c=0;c<a;++c)o[n]=e[c],r(o)&&(i.push(at(o)),o={},o[t]=l);return i}var WW={kde:Rv,mixture:GL,normal:Fv,lognormal:qL,uniform:WL},C9e="distributions",YW="function",b9e="field";function tY(e,t){let n=e[YW];de(WW,n)||B("Unknown distribution function: "+n);let r=WW[n]();for(let i in e)i===b9e?r.data((e.from||t()).map(e[i])):i===C9e?r[i](e[i].map(o=>tY(o,t))):typeof r[i]===YW&&r[i](e[i]);return r}function sA(e){$.call(this,null,e)}var nY=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],M9e={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:nY},{name:"weights",type:"number",array:!0}]};sA.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:nY.concat(M9e)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ee(sA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=tY(e.distribution,w9e(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200,a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&B("Invalid density method: "+a),!e.extent&&!r.data&&B("Missing density extent parameter."),a=r[a];let s=e.as||["value","density"],c=e.extent||Qi(r.data()),l=hu(a,c,i,o).map(u=>{let f={};return f[s[0]]=u[0],f[s[1]]=u[1],at(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function w9e(e){return()=>e.materialize(e.SOURCE).source}function rY(e,t){return e?e.map((n,r)=>t[r]||un(n)):null}function cA(e,t,n){let r=[],i=f=>f(c),o,a,s,c,l,u;if(t==null)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)c=e[a],l=t.map(i),u=o[l],u||(o[l]=u=[],u.dims=l,r.push(u)),u.push(n(c));return r}var iY="bin";function lA(e){$.call(this,null,e)}lA.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:iY}]};var S9e=(e,t)=>tc(Qi(e,t))/30;ee(lA,$,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;let n=t.materialize(t.SOURCE).source,r=cA(t.source,e.groupby,Vn),i=e.smooth||!1,o=e.field,a=e.step||S9e(n,o),s=qa((h,m)=>o(h)-o(m)),c=e.as||iY,l=r.length,u=1/0,f=-1/0,d=0,p;for(;d<l;++d){let h=r[d].sort(s);p=-1;for(let m of jL(h,a,i,o))m<u&&(u=m),m>f&&(f=m),h[++p][c]=m}return this.value={start:u,stop:f,step:a},t.reflow(!0).modifies(c)}});function oY(e){Rt.call(this,null,E9e,e),this.modified(!0)}ee(oY,Rt);function E9e(e){let t=e.expr;return this.value&&!e.modified("expr")?this.value:Ci(n=>t(n,e),dr(t),un(t))}function uA(e){$.call(this,[void 0,void 0],e)}uA.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ee(uA,$,{transform(e,t){let n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field"),o=n[0],a=n[1];if((i||o==null)&&(o=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,s=>{let c=qn(r(s));c!=null&&(c<o&&(o=c),c>a&&(a=c))}),!Number.isFinite(o)||!Number.isFinite(a)){let s=un(r);s&&(s=` for field "${s}"`),t.dataflow.warn(`Infinite extent${s}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}});function fA(e,t){Rt.call(this,e),this.parent=t,this.count=0}ee(fA,Rt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Zv(e){$.call(this,{},e),this._keys=S3();let t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ee(Zv,$,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){let i=this.value,o=de(i,e)&&i[e],a,s;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(s=r||(s=this._group[e])&&s.tuple,a=n.dataflow,o=new fA(n.fork(n.NO_SOURCE),this),a.add(o).connect(t(a,e,s)),i[e]=o,this.activate(o)),o},clean(){let e=this.value,t=0;for(let n in e)if(e[n].count===0){let r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){let n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){let t=this._targets,n=t.length,r=e?e.length:0,i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){let n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,a=e.modified("key"),s=c=>this.subflow(c,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,c=>{let l=Ee(c),u=o.get(l);u!==void 0&&(o.delete(l),s(u).rem(c))}),t.visit(t.ADD,c=>{let l=r(c);o.set(Ee(c),l),s(l).add(c)}),a||t.modified(r.fields)?t.visit(t.MOD,c=>{let l=Ee(c),u=o.get(l),f=r(c);u===f?s(f).mod(c):(o.set(l,f),s(u).rem(c),s(f).add(c))}):t.changed(t.MOD)&&t.visit(t.MOD,c=>{s(o.get(Ee(c))).mod(c)}),a&&t.visit(t.REFLOW,c=>{let l=Ee(c),u=o.get(l),f=r(c);u!==f&&(o.set(l,f),s(u).rem(c),s(f).add(c))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function aY(e){Rt.call(this,null,D9e,e)}ee(aY,Rt);function D9e(e){return this.value&&!e.modified()?this.value:F(e.name)?te(e.name).map(t=>Dr(t)):Dr(e.name,e.as)}function dA(e){$.call(this,S3(),e)}dA.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ee(dA,$,{transform(e,t){let n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,c=e.expr,l=!0;t.visit(t.REM,f=>{let d=Ee(f);r.has(d)?r.delete(d):a.push(f)}),t.visit(t.ADD,f=>{c(f,e)?o.push(f):r.set(Ee(f),1)});function u(f){let d=Ee(f),p=c(f,e),h=r.get(d);p&&h?(r.delete(d),o.push(f)):!p&&!h?(r.set(d,1),a.push(f)):l&&p&&!h&&s.push(f)}return t.visit(t.MOD,u),e.modified()&&(l=!1,t.visit(t.REFLOW,u)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function pA(e){$.call(this,[],e)}pA.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ee(pA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=rY(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,s=>{let c=r.map(h=>h(s)),l=c.reduce((h,m)=>Math.max(h,m.length),0),u=0,f,d,p;for(;u<l;++u){for(d=Lv(s),f=0;f<a;++f)d[i[f]]=(p=c[f][u])==null?null:p;o&&(d[o]=u),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function hA(e){$.call(this,[],e)}hA.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ee(hA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(un),o=e.as||["key","value"],a=o[0],s=o[1],c=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let u=0,f;u<c;++u)f=Lv(l),f[a]=i[u],f[s]=r[u](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function mA(e){$.call(this,null,e)}mA.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ee(mA,$,{transform(e,t){let n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,a=>a[r]=n(a,e))}});function sY(e){$.call(this,[],e)}ee(sY,$,{transform(e,t){let n=t.fork(t.ALL),r=e.generator,i=this.value,o=e.size-i.length,a,s,c;if(o>0){for(a=[];--o>=0;)a.push(c=at(r(e))),i.push(c);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else s=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(s):s,i=i.slice(-o);return n.source=this.value=i,n}});var Kv={value:"value",median:J6,mean:fv,min:vl,max:Bo},z9e=[];function gA(e){$.call(this,[],e)}gA.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function H9e(e){var t=e.method||Kv.value,n;if(Kv[t]==null)B("Unrecognized imputation method: "+t);else return t===Kv.value?(n=e.value!==void 0?e.value:0,()=>n):Kv[t]}function L9e(e){let t=e.field;return n=>n?t(n):NaN}ee(gA,$,{transform(e,t){var n=t.fork(t.ALL),r=H9e(e),i=L9e(e),o=un(e.field),a=un(e.key),s=(e.groupby||[]).map(un),c=A9e(t.source,e.groupby,e.key,e.keyvals),l=[],u=this.value,f=c.domain.length,d,p,h,m,g,v,y,C,b,M;for(g=0,C=c.length;g<C;++g)for(d=c[g],h=d.values,p=NaN,y=0;y<f;++y)if(d[y]==null){for(m=c.domain[y],M={_impute:!0},v=0,b=h.length;v<b;++v)M[s[v]]=h[v];M[a]=m,M[o]=Number.isNaN(p)?p=r(d,i):p,l.push(at(M))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),u.length&&(n.rem=n.materialize(n.REM).rem.concat(u)),this.value=l,n}});function A9e(e,t,n,r){var i=v=>v(g),o=[],a=r?r.slice():[],s={},c={},l,u,f,d,p,h,m,g;for(a.forEach((v,y)=>s[v]=y+1),d=0,m=e.length;d<m;++d)g=e[d],h=n(g),p=s[h]||(s[h]=a.push(h)),u=(l=t?t.map(i):z9e)+"",(f=c[u])||(f=c[u]=[],o.push(f),f.values=l),f[p-1]=g;return o.domain=a,o}function vA(e){I3.call(this,e)}vA.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Gd},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ee(vA,I3,{transform(e,t){let n=this,r=e.modified(),i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{Te(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){let e=this._adds,t=this._mods,n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function yA(e){$.call(this,null,e)}yA.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ee(yA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=cA(r,e.groupby,e.field),o=(e.groupby||[]).map(un),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",c=e.as||["value","density"],l=[],u=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;s!=="pdf"&&s!=="cdf"&&B("Invalid density method: "+s),e.resolve==="shared"&&(u||(u=Qi(r,e.field)),f=d=e.steps||d),i.forEach(p=>{let h=Rv(p,a)[s],m=e.counts?p.length:1,g=u||Qi(p);hu(h,g,f,d).forEach(v=>{let y={};for(let C=0;C<o.length;++C)y[o[C]]=p.dims[C];y[c[0]]=v[0],y[c[1]]=v[1]*m,l.push(at(y))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function cY(e){Rt.call(this,null,V9e,e)}ee(cY,Rt);function V9e(e){return this.value&&!e.modified()?this.value:sd(e.fields,e.flat)}function lY(e){$.call(this,[],e),this._pending=null}ee(lY,$,{transform(e,t){let n=t.dataflow;return this._pending?eA(this,t,this._pending):N9e(e)?t.StopPropagation:e.values?eA(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=te(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>eA(this,t,te(r.data)))}});function N9e(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function eA(e,t,n){n.forEach(at);let r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function xA(e){$.call(this,{},e)}xA.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ee(xA,$,{transform(e,t){let n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,a=e.modified(),s=n.length,c=a?t.SOURCE:t.ADD,l=t,u=e.as,f,d,p;return i?(d=i.length,s>1&&!u&&B('Multi-field lookup requires explicit "as" parameter.'),u&&u.length!==s*d&&B('The "as" parameter has too few output field names.'),u=u||i.map(un),f=function(h){for(var m=0,g=0,v,y;m<s;++m)if(y=r.get(n[m](h)),y==null)for(v=0;v<d;++v,++g)h[u[g]]=o;else for(v=0;v<d;++v,++g)h[u[g]]=i[v](y)}):(u||B("Missing output field names."),f=function(h){for(var m=0,g;m<s;++m)g=r.get(n[m](h)),h[u[m]]=g??o}),a?l=t.reflow(!0):(p=n.some(h=>t.modified(h.fields)),c|=p?t.MOD:0),t.visit(c,f),l.modifies(u)}});function uY(e){Rt.call(this,null,_9e,e)}ee(uY,Rt);function _9e(e){if(this.value&&!e.modified())return this.value;let t=e.extents,n=t.length,r=1/0,i=-1/0,o,a;for(o=0;o<n;++o)a=t[o],a[0]<r&&(r=a[0]),a[1]>i&&(i=a[1]);return[r,i]}function fY(e){Rt.call(this,null,k9e,e)}ee(fY,Rt);function k9e(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function dY(e){$.call(this,null,e)}ee(dY,$,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function CA(e){I3.call(this,e)}CA.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Gd,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ee(CA,I3,{_transform:I3.prototype.transform,transform(e,t){return this._transform(T9e(e,t),t)}});function T9e(e,t){let n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=dr(n).concat(dr(r)),a=F9e(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>i),fields:a.map(s=>I9e(s,n,r,o)),as:a.map(s=>s+""),modified:e.modified.bind(e)}}function I9e(e,t,n,r){return Ci(i=>t(i)===e?n(i):NaN,r,e+"")}function F9e(e,t,n){let r={},i=[];return n.visit(n.SOURCE,o=>{let a=e(o);r[a]||(r[a]=1,i.push(a))}),i.sort(od),t?i.slice(0,t):i}function pY(e){Zv.call(this,e)}ee(pY,Zv,{transform(e,t){let n=e.subflow,r=e.field,i=o=>this.subflow(Ee(o),n,t,o);return(e.modified("field")||r&&t.modified(dr(r)))&&B("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{let a=i(o);r(o).forEach(s=>a.mod(s))}),t.visit(t.ADD,o=>{let a=i(o);r(o).forEach(s=>a.add(at(s)))}),t.visit(t.REM,o=>{let a=i(o);r(o).forEach(s=>a.rem(s))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function bA(e){$.call(this,null,e)}bA.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ee(bA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=rY(e.fields,e.as||[]),o=r?(s,c)=>R9e(s,c,r,i):zl,a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,s=>{let c=Ee(s);n.rem.push(a[c]),a[c]=null}),t.visit(t.ADD,s=>{let c=o(s,at({}));a[Ee(s)]=c,n.add.push(c)}),t.visit(t.MOD,s=>{n.mod.push(o(s,a[Ee(s)]))}),n}});function R9e(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function hY(e){$.call(this,null,e)}ee(hY,$,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function MA(e){$.call(this,null,e)}MA.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};var O9e=1e-14;ee(MA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;let i=t.materialize(t.SOURCE).source,o=cA(i,e.groupby,e.field),a=(e.groupby||[]).map(un),s=[],c=e.step||.01,l=e.probs||Gn(c/2,1-O9e,c),u=l.length;return o.forEach(f=>{let d=_v(f,l);for(let p=0;p<u;++p){let h={};for(let m=0;m<a.length;++m)h[a[m]]=f.dims[m];h[r[0]]=l[p],h[r[1]]=d[p],s.push(at(h))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}});function mY(e){$.call(this,null,e)}ee(mY,$,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{let o=Ee(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{let o=Lv(i);r[Ee(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{let o=r[Ee(i)];for(let a in i)o[a]=i[a],n.modifies(a);n.mod.push(o)})),n}});function wA(e){$.call(this,[],e),this.count=0}wA.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ee(wA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((u,f)=>(u[Ee(f)]=1,u),{}),a=this.value,s=this.count,c=0;function l(u){let f,d;a.length<i?a.push(u):(d=~~((s+1)*n1()),d<a.length&&d>=c&&(f=a[d],o[Ee(f)]&&n.rem.push(f),a[d]=u)),++s}if(t.rem.length&&(t.visit(t.REM,u=>{let f=Ee(u);o[f]&&(o[f]=-1,n.rem.push(u)),--s}),a=a.filter(u=>o[Ee(u)]!==-1)),(t.rem.length||r)&&a.length<i&&t.source&&(c=s=a.length,t.visit(t.SOURCE,u=>{o[Ee(u)]||l(u)}),c=-1),r&&a.length>i){let u=a.length-i;for(let f=0;f<u;++f)o[Ee(a[f])]=-1,n.rem.push(a[f]);a=a.slice(u)}return t.mod.length&&t.visit(t.MOD,u=>{o[Ee(u)]&&n.mod.push(u)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||c<0)&&(n.add=a.filter(u=>!o[Ee(u)])),this.count=s,this.value=n.source=a,n}});function SA(e){$.call(this,null,e)}SA.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ee(SA,$,{transform(e,t){if(this.value&&!e.modified())return;let n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Gn(e.start,e.stop,e.step||1).map(i=>{let o={};return o[r]=i,at(o)}),n.add=t.add.concat(this.value),n}});function gY(e){$.call(this,null,e),this.modified(!0)}ee(gY,$,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function EA(e){$.call(this,null,e)}var vY=["unit0","unit1"];EA.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:vv,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:vY}]};ee(EA,$,{transform(e,t){let n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),a=(i?sc:ac)(o.unit).offset,s=e.as||vY,c=s[0],l=s[1],u=o.step,f=o.start||1/0,d=o.stop||-1/0,p=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(dr(n)))&&(t=t.reflow(!0),p=t.SOURCE,f=1/0,d=-1/0),t.visit(p,h=>{let m=n(h),g,v;m==null?(h[c]=null,r&&(h[l]=null)):(h[c]=g=v=o(m),r&&(h[l]=v=a(g,u)),g<f&&(f=g),v>d&&(d=v))}),o.start=f,o.stop=d,t.modifies(r?s:c)},_floor(e,t){let n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:EL({extent:e.extent||Qi(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=yv(r),a=this.value||{},s=(n?CL:xL)(o,i);return s.unit=Ue(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}});function yY(e){$.call(this,S3(),e)}ee(yY,$,{transform(e,t){let n=t.dataflow,r=e.field,i=this.value,o=s=>i.set(r(s),s),a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,s=>i.delete(r(s))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function xY(e){$.call(this,null,e)}ee(xY,$,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(qa(e.sort)):t.source).map(e.field))}});function P9e(e,t,n,r){let i=qd[e](t,n);return{init:i.init||z2,update:function(o,a){a[r]=i.next(o)}}}var qd={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{let n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{let n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){let e=qd.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{let n=t.data,r=t.compare,i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||B("ntile num must be greater than zero.");let n=qd.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{let r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{let r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||B("nth_value nth must be greater than zero."),{next:n=>{let r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{let r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{let i=r.data;return r.index<=n?t:(n=$9e(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function $9e(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}var B9e=Object.keys(qd);function CY(e){let t=te(e.ops),n=te(e.fields),r=te(e.params),i=te(e.aggregate_params),o=te(e.as),a=this.outputs=[],s=this.windows=[],c={},l={},u=[],f=[],d=!0;function p(h){te(dr(h)).forEach(m=>c[m]=1)}p(e.sort),t.forEach((h,m)=>{let g=n[m],v=r[m],y=i[m]||null,C=un(g),b=XW(h,C,o[m]);if(p(g),a.push(b),de(qd,h))s.push(P9e(h,g,v,b));else{if(g==null&&h!=="count"&&B("Null aggregate field specified."),h==="count"){u.push(b);return}d=!1;let M=l[C];M||(M=l[C]=[],M.field=g,f.push(M)),M.push(QW(h,y,b))}}),(u.length||f.length)&&(this.cell=U9e(f,u,d)),this.inputs=Object.keys(c)}var bY=CY.prototype;bY.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};bY.update=function(e,t){let n=this.cell,r=this.windows,i=e.data,o=r&&r.length,a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)};function U9e(e,t,n){e=e.map(c=>ZW(c,c.field));let r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new nA;return r.add=function(c){if(r.num+=1,!n){s&&s.add(c);for(let l=0;l<i;++l)o[l].add(o[l].get(c),c)}},r.rem=function(c){if(r.num-=1,!n){s&&s.rem(c);for(let l=0;l<i;++l)o[l].rem(o[l].get(c),c)}},r.set=function(c){let l,u;for(s&&s.values(),l=0,u=t.length;l<u;++l)c[t[l]]=r.num;if(!n)for(l=0,u=o.length;l<u;++l)o[l].set(c)},r.init=function(){r.num=0,s&&s.reset();for(let c=0;c<i;++c)o[c].init()},r}function DA(e){$.call(this,{},e),this._mlen=0,this._mods=[]}DA.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:B9e.concat(Gd)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ee(DA,$,{transform(e,t){this.stamp=t.stamp;let n=e.modified(),r=qa(e.sort),i=tA(e.groupby),o=s=>this.group(i(s)),a=this.state;(!a||n)&&(a=this.state=new CY(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,s=>o(s).add(s))):(t.visit(t.REM,s=>o(s).remove(s)),t.visit(t.ADD,s=>o(s).add(s)));for(let s=0,c=this._mlen;s<c;++s)j9e(this._mods[s],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=JW(Ee),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function j9e(e,t,n,r){let i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),c=s.length,l=o?co(i):null,u={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||hn(-1)};t.init();for(let f=0;f<c;++f)q9e(u,a,f,c),o&&G9e(u,l),t.update(u,s[f])}function q9e(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function G9e(e,t){let n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}var TN={};br(TN,{bound:()=>$K,identifier:()=>kN,mark:()=>BK,overlap:()=>UK,render:()=>qK,viewlayout:()=>WK});function mt(e){return function(){return e}}var HA=Math.abs,ei=Math.atan2,F3=Math.cos,MY=Math.max,Jv=Math.min,V2=Math.sin,dc=Math.sqrt,Lr=1e-12,R3=Math.PI,Wd=R3/2,ey=2*R3;function wY(e){return e>1?0:e<-1?R3:Math.acos(e)}function LA(e){return e>=1?Wd:e<=-1?-Wd:Math.asin(e)}var AA=Math.PI,VA=2*AA,Hl=1e-6,W9e=VA-Hl;function SY(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Y9e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return SY;let n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}var Ll=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?SY:Y9e(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,c=r-t,l=i-n,u=a-t,f=s-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Hl)if(!(Math.abs(f*c-l*u)>Hl)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-a,h=i-s,m=c*c+l*l,g=p*p+h*h,v=Math.sqrt(m),y=Math.sqrt(d),C=o*Math.tan((AA-Math.acos((m+d-g)/(2*v*y)))/2),b=C/y,M=C/v;Math.abs(b-1)>Hl&&this._append`L${t+b*u},${n+b*f}`,this._append`A${o},${o},0,0,${+(f*p>u*h)},${this._x1=t+M*c},${this._y1=n+M*l}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),c=r*Math.sin(i),l=t+s,u=n+c,f=1^a,d=a?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>Hl||Math.abs(this._y1-u)>Hl)&&this._append`L${l},${u}`,r&&(d<0&&(d=d%VA+VA),d>W9e?this._append`A${r},${r},0,1,${f},${t-s},${n-c}A${r},${r},0,1,${f},${this._x1=l},${this._y1=u}`:d>Hl&&this._append`A${r},${r},0,${+(d>=AA)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Al(){return new Ll}Al.prototype=Ll.prototype;function O3(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{let r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Ll(t)}function X9e(e){return e.innerRadius}function Q9e(e){return e.outerRadius}function K9e(e){return e.startAngle}function Z9e(e){return e.endAngle}function J9e(e){return e&&e.padAngle}function ege(e,t,n,r,i,o,a,s){var c=n-e,l=r-t,u=a-i,f=s-o,d=f*c-u*l;if(!(d*d<Lr))return d=(u*(t-o)-f*(e-i))/d,[e+d*c,t+d*l]}function ty(e,t,n,r,i,o,a){var s=e-n,c=t-r,l=(a?o:-o)/dc(s*s+c*c),u=l*c,f=-l*s,d=e+u,p=t+f,h=n+u,m=r+f,g=(d+h)/2,v=(p+m)/2,y=h-d,C=m-p,b=y*y+C*C,M=i-o,S=d*m-h*p,w=(C<0?-1:1)*dc(MY(0,M*M*b-S*S)),E=(S*C-y*w)/b,D=(-S*y-C*w)/b,L=(S*C+y*w)/b,A=(-S*y+C*w)/b,j=E-g,V=D-v,_=L-g,N=A-v;return j*j+V*V>_*_+N*N&&(E=L,D=A),{cx:E,cy:D,x01:-u,y01:-f,x11:E*(i/M-1),y11:D*(i/M-1)}}function NA(){var e=X9e,t=Q9e,n=mt(0),r=null,i=K9e,o=Z9e,a=J9e,s=null,c=O3(l);function l(){var u,f,d=+e.apply(this,arguments),p=+t.apply(this,arguments),h=i.apply(this,arguments)-Wd,m=o.apply(this,arguments)-Wd,g=HA(m-h),v=m>h;if(s||(s=u=c()),p<d&&(f=p,p=d,d=f),!(p>Lr))s.moveTo(0,0);else if(g>ey-Lr)s.moveTo(p*F3(h),p*V2(h)),s.arc(0,0,p,h,m,!v),d>Lr&&(s.moveTo(d*F3(m),d*V2(m)),s.arc(0,0,d,m,h,v));else{var y=h,C=m,b=h,M=m,S=g,w=g,E=a.apply(this,arguments)/2,D=E>Lr&&(r?+r.apply(this,arguments):dc(d*d+p*p)),L=Jv(HA(p-d)/2,+n.apply(this,arguments)),A=L,j=L,V,_;if(D>Lr){var N=LA(D/d*V2(E)),I=LA(D/p*V2(E));(S-=N*2)>Lr?(N*=v?1:-1,b+=N,M-=N):(S=0,b=M=(h+m)/2),(w-=I*2)>Lr?(I*=v?1:-1,y+=I,C-=I):(w=0,y=C=(h+m)/2)}var G=p*F3(y),X=p*V2(y),J=d*F3(M),we=d*V2(M);if(L>Lr){var Se=p*F3(C),Xe=p*V2(C),Dt=d*F3(b),st=d*V2(b),en;if(g<R3)if(en=ege(G,X,Dt,st,Se,Xe,J,we)){var Hs=G-en[0],W0=X-en[1],F4=Se-en[0],me=Xe-en[1],Qe=1/V2(wY((Hs*F4+W0*me)/(dc(Hs*Hs+W0*W0)*dc(F4*F4+me*me)))/2),nt=dc(en[0]*en[0]+en[1]*en[1]);A=Jv(L,(d-nt)/(Qe-1)),j=Jv(L,(p-nt)/(Qe+1))}else A=j=0}w>Lr?j>Lr?(V=ty(Dt,st,G,X,p,j,v),_=ty(Se,Xe,J,we,p,j,v),s.moveTo(V.cx+V.x01,V.cy+V.y01),j<L?s.arc(V.cx,V.cy,j,ei(V.y01,V.x01),ei(_.y01,_.x01),!v):(s.arc(V.cx,V.cy,j,ei(V.y01,V.x01),ei(V.y11,V.x11),!v),s.arc(0,0,p,ei(V.cy+V.y11,V.cx+V.x11),ei(_.cy+_.y11,_.cx+_.x11),!v),s.arc(_.cx,_.cy,j,ei(_.y11,_.x11),ei(_.y01,_.x01),!v))):(s.moveTo(G,X),s.arc(0,0,p,y,C,!v)):s.moveTo(G,X),!(d>Lr)||!(S>Lr)?s.lineTo(J,we):A>Lr?(V=ty(J,we,Se,Xe,d,-A,v),_=ty(G,X,Dt,st,d,-A,v),s.lineTo(V.cx+V.x01,V.cy+V.y01),A<L?s.arc(V.cx,V.cy,A,ei(V.y01,V.x01),ei(_.y01,_.x01),!v):(s.arc(V.cx,V.cy,A,ei(V.y01,V.x01),ei(V.y11,V.x11),!v),s.arc(0,0,d,ei(V.cy+V.y11,V.cx+V.x11),ei(_.cy+_.y11,_.cx+_.x11),v),s.arc(_.cx,_.cy,A,ei(_.y11,_.x11),ei(_.y01,_.x01),!v))):s.arc(0,0,d,M,b,v)}if(s.closePath(),u)return s=null,u+""||null}return l.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-R3/2;return[F3(f)*u,V2(f)*u]},l.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:mt(+u),l):e},l.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:mt(+u),l):t},l.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:mt(+u),l):n},l.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:mt(+u),l):r},l.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:mt(+u),l):i},l.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:mt(+u),l):o},l.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:mt(+u),l):a},l.context=function(u){return arguments.length?(s=u??null,l):s},l}var SJe=Array.prototype.slice;function ny(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function EY(e){this._context=e}EY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Vl(e){return new EY(e)}function ry(e){return e[0]}function iy(e){return e[1]}function Yd(e,t){var n=mt(!0),r=null,i=Vl,o=null,a=O3(s);e=typeof e=="function"?e:e===void 0?ry:mt(e),t=typeof t=="function"?t:t===void 0?iy:mt(t);function s(c){var l,u=(c=ny(c)).length,f,d=!1,p;for(r==null&&(o=i(p=a())),l=0;l<=u;++l)!(l<u&&n(f=c[l],l,c))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,l,c),+t(f,l,c));if(p)return o=null,p+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:mt(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:mt(+c),s):t},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:mt(!!c),s):n},s.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),s):i},s.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),s):r},s}function oy(e,t,n){var r=null,i=mt(!0),o=null,a=Vl,s=null,c=O3(l);e=typeof e=="function"?e:e===void 0?ry:mt(+e),t=typeof t=="function"?t:t===void 0?mt(0):mt(+t),n=typeof n=="function"?n:n===void 0?iy:mt(+n);function l(f){var d,p,h,m=(f=ny(f)).length,g,v=!1,y,C=new Array(m),b=new Array(m);for(o==null&&(s=a(y=c())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===v)if(v=!v)p=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=d-1;h>=p;--h)s.point(C[h],b[h]);s.lineEnd(),s.areaEnd()}v&&(C[d]=+e(g,d,f),b[d]=+t(g,d,f),s.point(r?+r(g,d,f):C[d],n?+n(g,d,f):b[d]))}if(y)return s=null,y+""||null}function u(){return Yd().defined(i).curve(a).context(o)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:mt(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:mt(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:mt(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:mt(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:mt(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:mt(+f),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:mt(!!f),l):i},l.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),l):a},l.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),l):o},l}var DY={draw(e,t){let n=dc(t/R3);e.moveTo(n,0),e.arc(0,0,n,0,ey)}};function ay(e,t){let n=null,r=O3(i);e=typeof e=="function"?e:mt(e||DY),t=typeof t=="function"?t:mt(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:mt(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:mt(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Wo(){}function mu(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Xd(e){this._context=e}Xd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _A(e){return new Xd(e)}function zY(e){this._context=e}zY.prototype={areaStart:Wo,areaEnd:Wo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kA(e){return new zY(e)}function HY(e){this._context=e}HY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function TA(e){return new HY(e)}function LY(e,t){this._basis=new Xd(e),this._beta=t}LY.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,a=t[n]-i,s=-1,c;++s<=n;)c=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+c*o),this._beta*t[s]+(1-this._beta)*(i+c*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var IA=function e(t){function n(r){return t===1?new Xd(r):new LY(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function gu(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function sy(e,t){this._context=e,this._k=(1-t)/6}sy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:gu(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:gu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var FA=function e(t){function n(r){return new sy(r,t)}return n.tension=function(r){return e(+r)},n}(0);function cy(e,t){this._context=e,this._k=(1-t)/6}cy.prototype={areaStart:Wo,areaEnd:Wo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:gu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var RA=function e(t){function n(r){return new cy(r,t)}return n.tension=function(r){return e(+r)},n}(0);function ly(e,t){this._context=e,this._k=(1-t)/6}ly.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:gu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var OA=function e(t){function n(r){return new ly(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Qd(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>Lr){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>Lr){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*l+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function AY(e,t){this._context=e,this._alpha=t}AY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Qd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var PA=function e(t){function n(r){return t?new AY(r,t):new sy(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function VY(e,t){this._context=e,this._alpha=t}VY.prototype={areaStart:Wo,areaEnd:Wo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Qd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var $A=function e(t){function n(r){return t?new VY(r,t):new cy(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function NY(e,t){this._context=e,this._alpha=t}NY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Qd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var BA=function e(t){function n(r){return t?new NY(r,t):new ly(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function _Y(e){this._context=e}_Y.prototype={areaStart:Wo,areaEnd:Wo,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function UA(e){return new _Y(e)}function kY(e){return e<0?-1:1}function TY(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(kY(o)+kY(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function IY(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function jA(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function uy(e){this._context=e}uy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jA(this,this._t0,IY(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,jA(this,IY(this,n=TY(this,e,t)),n);break;default:jA(this,this._t0,n=TY(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function FY(e){this._context=new RY(e)}(FY.prototype=Object.create(uy.prototype)).point=function(e,t){uy.prototype.point.call(this,t,e)};function RY(e){this._context=e}RY.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function qA(e){return new uy(e)}function GA(e){return new FY(e)}function PY(e){this._context=e}PY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=OY(e),i=OY(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function OY(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function WA(e){return new PY(e)}function fy(e,t){this._context=e,this._t=t}fy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function YA(e){return new fy(e,.5)}function XA(e){return new fy(e,0)}function QA(e){return new fy(e,1)}function Yo(e,t){if(typeof document<"u"&&document.createElement){let n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}var $Y=()=>typeof Image<"u"?Image:null;function nr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ga(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}var vu=Symbol("implicit");function Nl(){var e=new Z6,t=[],n=[],r=vu;function i(o){let a=e.get(o);if(a===void 0){if(r!==vu)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Z6;for(let a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Nl(t,n).unknown(r)},nr.apply(i,arguments),i}var uV={};br(uV,{interpolate:()=>wi,interpolateArray:()=>pX,interpolateBasis:()=>xy,interpolateBasisClosed:()=>Cy,interpolateCubehelix:()=>VX,interpolateCubehelixLong:()=>NX,interpolateDate:()=>My,interpolateDiscrete:()=>hX,interpolateHcl:()=>HX,interpolateHclLong:()=>LX,interpolateHsl:()=>EX,interpolateHslLong:()=>DX,interpolateHue:()=>mX,interpolateLab:()=>lV,interpolateNumber:()=>Si,interpolateNumberArray:()=>Mu,interpolateObject:()=>wy,interpolateRgb:()=>e7,interpolateRgbBasis:()=>fX,interpolateRgbBasisClosed:()=>dX,interpolateRound:()=>Qa,interpolateString:()=>Sy,interpolateTransformCss:()=>CX,interpolateTransformSvg:()=>bX,interpolateZoom:()=>wX,piecewise:()=>Ol,quantize:()=>_X});function pc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function P3(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ya(){}var $3=.7,Tl=1/$3,yu="\\s*([+-]?\\d+)\\s*",Kd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nge=/^#([0-9a-f]{3,8})$/,rge=new RegExp(`^rgb\\(${yu},${yu},${yu}\\)$`),ige=new RegExp(`^rgb\\(${Wa},${Wa},${Wa}\\)$`),oge=new RegExp(`^rgba\\(${yu},${yu},${yu},${Kd}\\)$`),age=new RegExp(`^rgba\\(${Wa},${Wa},${Wa},${Kd}\\)$`),sge=new RegExp(`^hsl\\(${Kd},${Wa},${Wa}\\)$`),cge=new RegExp(`^hsla\\(${Kd},${Wa},${Wa},${Kd}\\)$`),BY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pc(Ya,B3,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:UY,formatHex:UY,formatHex8:lge,formatHsl:uge,formatRgb:jY,toString:jY});function UY(){return this.rgb().formatHex()}function lge(){return this.rgb().formatHex8()}function uge(){return QY(this).formatHsl()}function jY(){return this.rgb().formatRgb()}function B3(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=nge.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?qY(t):n===3?new rr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?dy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?dy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rge.exec(e))?new rr(t[1],t[2],t[3],1):(t=ige.exec(e))?new rr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=oge.exec(e))?dy(t[1],t[2],t[3],t[4]):(t=age.exec(e))?dy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=sge.exec(e))?YY(t[1],t[2]/100,t[3]/100,1):(t=cge.exec(e))?YY(t[1],t[2]/100,t[3]/100,t[4]):BY.hasOwnProperty(e)?qY(BY[e]):e==="transparent"?new rr(NaN,NaN,NaN,0):null}function qY(e){return new rr(e>>16&255,e>>8&255,e&255,1)}function dy(e,t,n,r){return r<=0&&(e=t=n=NaN),new rr(e,t,n,r)}function Zd(e){return e instanceof Ya||(e=B3(e)),e?(e=e.rgb(),new rr(e.r,e.g,e.b,e.opacity)):new rr}function Xo(e,t,n,r){return arguments.length===1?Zd(e):new rr(e,t,n,r??1)}function rr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}pc(rr,Xo,P3(Ya,{brighter(e){return e=e==null?Tl:Math.pow(Tl,e),new rr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?$3:Math.pow($3,e),new rr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new rr(kl(this.r),kl(this.g),kl(this.b),hy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GY,formatHex:GY,formatHex8:fge,formatRgb:WY,toString:WY}));function GY(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}`}function fge(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}${_l((isNaN(this.opacity)?1:this.opacity)*255)}`}function WY(){let e=hy(this.opacity);return`${e===1?"rgb(":"rgba("}${kl(this.r)}, ${kl(this.g)}, ${kl(this.b)}${e===1?")":`, ${e})`}`}function hy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function kl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _l(e){return e=kl(e),(e<16?"0":"")+e.toString(16)}function YY(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new N2(e,t,n,r)}function QY(e){if(e instanceof N2)return new N2(e.h,e.s,e.l,e.opacity);if(e instanceof Ya||(e=B3(e)),!e)return new N2;if(e instanceof N2)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new N2(a,s,c,e.opacity)}function Il(e,t,n,r){return arguments.length===1?QY(e):new N2(e,t,n,r??1)}function N2(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}pc(N2,Il,P3(Ya,{brighter(e){return e=e==null?Tl:Math.pow(Tl,e),new N2(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$3:Math.pow($3,e),new N2(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new rr(KA(e>=240?e-240:e+120,i,r),KA(e,i,r),KA(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new N2(XY(this.h),py(this.s),py(this.l),hy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=hy(this.opacity);return`${e===1?"hsl(":"hsla("}${XY(this.h)}, ${py(this.s)*100}%, ${py(this.l)*100}%${e===1?")":`, ${e})`}`}}));function XY(e){return e=(e||0)%360,e<0?e+360:e}function py(e){return Math.max(0,Math.min(1,e||0))}function KA(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var my=Math.PI/180,gy=180/Math.PI;var vy=18,KY=.96422,ZY=1,JY=.82521,eX=4/29,xu=6/29,tX=3*xu*xu,dge=xu*xu*xu;function nX(e){if(e instanceof Xa)return new Xa(e.l,e.a,e.b,e.opacity);if(e instanceof hc)return rX(e);e instanceof rr||(e=Zd(e));var t=tV(e.r),n=tV(e.g),r=tV(e.b),i=ZA((.2225045*t+.7168786*n+.0606169*r)/ZY),o,a;return t===n&&n===r?o=a=i:(o=ZA((.4360747*t+.3850649*n+.1430804*r)/KY),a=ZA((.0139322*t+.0971045*n+.7141733*r)/JY)),new Xa(116*i-16,500*(o-i),200*(i-a),e.opacity)}function U3(e,t,n,r){return arguments.length===1?nX(e):new Xa(e,t,n,r??1)}function Xa(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}pc(Xa,U3,P3(Ya,{brighter(e){return new Xa(this.l+vy*(e??1),this.a,this.b,this.opacity)},darker(e){return new Xa(this.l-vy*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=KY*JA(t),e=ZY*JA(e),n=JY*JA(n),new rr(eV(3.1338561*t-1.6168667*e-.4906146*n),eV(-.9787684*t+1.9161415*e+.033454*n),eV(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function ZA(e){return e>dge?Math.pow(e,1/3):e/tX+eX}function JA(e){return e>xu?e*e*e:tX*(e-eX)}function eV(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function tV(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function pge(e){if(e instanceof hc)return new hc(e.h,e.c,e.l,e.opacity);if(e instanceof Xa||(e=nX(e)),e.a===0&&e.b===0)return new hc(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*gy;return new hc(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Fl(e,t,n,r){return arguments.length===1?pge(e):new hc(e,t,n,r??1)}function hc(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function rX(e){if(isNaN(e.h))return new Xa(e.l,0,0,e.opacity);var t=e.h*my;return new Xa(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}pc(hc,Fl,P3(Ya,{brighter(e){return new hc(this.h,this.c,this.l+vy*(e??1),this.opacity)},darker(e){return new hc(this.h,this.c,this.l-vy*(e??1),this.opacity)},rgb(){return rX(this).rgb()}}));var sX=-.14861,nV=1.78277,rV=-.29227,yy=-.90649,Jd=1.97294,iX=Jd*yy,oX=Jd*nV,aX=nV*rV-yy*sX;function hge(e){if(e instanceof Rl)return new Rl(e.h,e.s,e.l,e.opacity);e instanceof rr||(e=Zd(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(aX*r+iX*t-oX*n)/(aX+iX-oX),o=r-i,a=(Jd*(n-i)-rV*o)/yy,s=Math.sqrt(a*a+o*o)/(Jd*i*(1-i)),c=s?Math.atan2(a,o)*gy-120:NaN;return new Rl(c<0?c+360:c,s,i,e.opacity)}function Cu(e,t,n,r){return arguments.length===1?hge(e):new Rl(e,t,n,r??1)}function Rl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}pc(Rl,Cu,P3(Ya,{brighter(e){return e=e==null?Tl:Math.pow(Tl,e),new Rl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$3:Math.pow($3,e),new Rl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*my,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new rr(255*(t+n*(sX*r+nV*i)),255*(t+n*(rV*r+yy*i)),255*(t+n*(Jd*r)),this.opacity)}}));function iV(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function xy(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return iV((n-r/t)*t,a,i,o,s)}}function Cy(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return iV((n-r/t)*t,i,o,a,s)}}var bu=e=>()=>e;function cX(e,t){return function(n){return e+n*t}}function mge(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function j3(e,t){var n=t-e;return n?cX(e,n>180||n<-180?n-360*Math.round(n/360):n):bu(isNaN(e)?t:e)}function lX(e){return(e=+e)==1?gn:function(t,n){return n-t?mge(t,n,e):bu(isNaN(t)?n:t)}}function gn(e,t){var n=t-e;return n?cX(e,n):bu(isNaN(e)?t:e)}var e7=function e(t){var n=lX(t);function r(i,o){var a=n((i=Xo(i)).r,(o=Xo(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),l=gn(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function uX(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=Xo(t[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=e(r),i=e(i),o=e(o),s.opacity=1,function(c){return s.r=r(c),s.g=i(c),s.b=o(c),s+""}}}var fX=uX(xy),dX=uX(Cy);function Mu(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function by(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function pX(e,t){return(by(t)?Mu:oV)(e,t)}function oV(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=wi(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function My(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Si(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function wy(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=wi(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var sV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aV=new RegExp(sV.source,"g");function gge(e){return function(){return e}}function vge(e){return function(t){return e(t)+""}}function Sy(e,t){var n=sV.lastIndex=aV.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(e=e+"",t=t+"";(r=sV.exec(e))&&(i=aV.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:Si(r,i)})),n=aV.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?vge(c[0].x):gge(t):(t=c.length,function(l){for(var u=0,f;u<t;++u)s[(f=c[u]).i]=f.x(l);return s.join("")})}function wi(e,t){var n=typeof t,r;return t==null||n==="boolean"?bu(t):(n==="number"?Si:n==="string"?(r=B3(t))?(t=r,e7):Sy:t instanceof B3?e7:t instanceof Date?My:by(t)?Mu:Array.isArray(t)?oV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?wy:Si)(e,t)}function hX(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function mX(e,t){var n=j3(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Qa(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var gX=180/Math.PI,Ey={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cV(e,t,n,r,i,o){var a,s,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*gX,skewX:Math.atan(c)*gX,scaleX:a,scaleY:s}}var Dy;function vX(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ey:cV(t.a,t.b,t.c,t.d,t.e,t.f)}function yX(e){return e==null?Ey:(Dy||(Dy=document.createElementNS("http://www.w3.org/2000/svg","g")),Dy.setAttribute("transform",e),(e=Dy.transform.baseVal.consolidate())?(e=e.matrix,cV(e.a,e.b,e.c,e.d,e.e,e.f)):Ey)}function xX(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,d,p,h){if(l!==f||u!==d){var m=p.push("translate(",null,t,null,n);h.push({i:m-4,x:Si(l,f)},{i:m-2,x:Si(u,d)})}else(f||d)&&p.push("translate("+f+t+d+n)}function a(l,u,f,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Si(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function s(l,u,f,d){l!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Si(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,d,p,h){if(l!==f||u!==d){var m=p.push(i(p)+"scale(",null,",",null,")");h.push({i:m-4,x:Si(l,f)},{i:m-2,x:Si(u,d)})}else(f!==1||d!==1)&&p.push(i(p)+"scale("+f+","+d+")")}return function(l,u){var f=[],d=[];return l=e(l),u=e(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,d),a(l.rotate,u.rotate,f,d),s(l.skewX,u.skewX,f,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,d),l=u=null,function(p){for(var h=-1,m=d.length,g;++h<m;)f[(g=d[h]).i]=g.x(p);return f.join("")}}}var CX=xX(vX,"px, ","px)","deg)"),bX=xX(yX,", ",")",")");var yge=1e-12;function MX(e){return((e=Math.exp(e))+1/e)/2}function xge(e){return((e=Math.exp(e))-1/e)/2}function Cge(e){return((e=Math.exp(2*e))-1)/(e+1)}var wX=function e(t,n,r){function i(o,a){var s=o[0],c=o[1],l=o[2],u=a[0],f=a[1],d=a[2],p=u-s,h=f-c,m=p*p+h*h,g,v;if(m<yge)v=Math.log(d/l)/t,g=function(w){return[s+w*p,c+w*h,l*Math.exp(t*w*v)]};else{var y=Math.sqrt(m),C=(d*d-l*l+r*m)/(2*l*n*y),b=(d*d-l*l-r*m)/(2*d*n*y),M=Math.log(Math.sqrt(C*C+1)-C),S=Math.log(Math.sqrt(b*b+1)-b);v=(S-M)/t,g=function(w){var E=w*v,D=MX(M),L=l/(n*y)*(D*Cge(t*E+M)-xge(M));return[s+L*p,c+L*h,l*D/MX(t*E+M)]}}return g.duration=v*1e3*t/Math.SQRT2,g}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return e(a,s,c)},i}(Math.SQRT2,2,4);function SX(e){return function(t,n){var r=e((t=Il(t)).h,(n=Il(n)).h),i=gn(t.s,n.s),o=gn(t.l,n.l),a=gn(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=o(s),t.opacity=a(s),t+""}}}var EX=SX(j3),DX=SX(gn);function lV(e,t){var n=gn((e=U3(e)).l,(t=U3(t)).l),r=gn(e.a,t.a),i=gn(e.b,t.b),o=gn(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=o(a),e+""}}function zX(e){return function(t,n){var r=e((t=Fl(t)).h,(n=Fl(n)).h),i=gn(t.c,n.c),o=gn(t.l,n.l),a=gn(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=o(s),t.opacity=a(s),t+""}}}var HX=zX(j3),LX=zX(gn);function AX(e){return function t(n){n=+n;function r(i,o){var a=e((i=Cu(i)).h,(o=Cu(o)).h),s=gn(i.s,o.s),c=gn(i.l,o.l),l=gn(i.opacity,o.opacity);return function(u){return i.h=a(u),i.s=s(u),i.l=c(Math.pow(u,n)),i.opacity=l(u),i+""}}return r.gamma=t,r}(1)}var VX=AX(j3),NX=AX(gn);function Ol(e,t){t===void 0&&(t=e,e=wi);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function _X(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function fV(e){return function(){return e}}function wu(e){return+e}var kX=[0,1];function ti(e){return e}function dV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:fV(isNaN(t)?NaN:.5)}function bge(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Mge(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=dV(i,r),o=n(a,o)):(r=dV(r,i),o=n(o,a)),function(s){return o(r(s))}}function wge(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=dV(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var c=L2(e,s,1,r)-1;return o[c](i[c](s))}}function Ka(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Pl(){var e=kX,t=kX,n=wi,r,i,o,a=ti,s,c,l;function u(){var d=Math.min(e.length,t.length);return a!==ti&&(a=bge(e[0],e[d-1])),s=d>2?wge:Mge,c=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(c||(c=s(e.map(r),t,n)))(r(a(d)))}return f.invert=function(d){return a(i((l||(l=s(t,e.map(r),Si)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,wu),u()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Qa,u()},f.clamp=function(d){return arguments.length?(a=d?!0:ti,u()):a!==ti},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,p){return r=d,i=p,u()}}function t7(){return Pl()(ti,ti)}function Su(e,t,n,r){var i=Ki(e,t,n),o;switch(r=lo(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=yd(i,a))&&(r.precision=o),nu(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=xd(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=vd(i))&&(r.precision=o-(r.type==="%")*2);break}}return D3(r)}function fo(e){var t=e.domain;return e.ticks=function(n){var r=t();return gl(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Su(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],s=r[o],c,l,u=10;for(s<a&&(l=a,a=s,s=l,l=i,i=o,o=l);u-- >0;){if(l=pd(a,s,n),l===c)return r[i]=a,r[o]=s,t(r);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;c=l}return e},e}function n7(){var e=t7();return e.copy=function(){return Ka(e,n7())},nr.apply(e,arguments),fo(e)}function r7(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,wu),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return r7(e).unknown(t)},e=arguments.length?Array.from(e,wu):[0,1],fo(n)}function i7(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function TX(e){return Math.log(e)}function IX(e){return Math.exp(e)}function Sge(e){return-Math.log(-e)}function Ege(e){return-Math.exp(-e)}function Dge(e){return isFinite(e)?+("1e"+e):e<0?0:e}function zge(e){return e===10?Dge:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Hge(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function FX(e){return(t,n)=>-e(-t,n)}function o7(e){let t=e(TX,IX),n=t.domain,r=10,i,o;function a(){return i=Hge(r),o=zge(r),n()[0]<0?(i=FX(i),o=FX(o),e(Sge,Ege)):e(TX,IX),t}return t.base=function(s){return arguments.length?(r=+s,a()):r},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=s=>{let c=n(),l=c[0],u=c[c.length-1],f=u<l;f&&([l,u]=[u,l]);let d=i(l),p=i(u),h,m,g=s==null?10:+s,v=[];if(!(r%1)&&p-d<g){if(d=Math.floor(d),p=Math.ceil(p),l>0){for(;d<=p;++d)for(h=1;h<r;++h)if(m=d<0?h/o(-d):h*o(d),!(m<l)){if(m>u)break;v.push(m)}}else for(;d<=p;++d)for(h=r-1;h>=1;--h)if(m=d>0?h/o(-d):h*o(d),!(m<l)){if(m>u)break;v.push(m)}v.length*2<g&&(v=gl(l,u,g))}else v=gl(d,p,Math.min(p-d,g)).map(o);return f?v.reverse():v},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=lo(c)).precision==null&&(c.trim=!0),c=D3(c)),s===1/0)return c;let l=Math.max(1,r*s/t.ticks().length);return u=>{let f=u/o(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=l?c(u):""}},t.nice=()=>n(i7(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),t}function a7(){let e=o7(Pl()).domain([1,10]);return e.copy=()=>Ka(e,a7()).base(e.base()),nr.apply(e,arguments),e}function RX(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function OX(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function s7(e){var t=1,n=e(RX(t),OX(t));return n.constant=function(r){return arguments.length?e(RX(t=+r),OX(t)):t},fo(n)}function c7(){var e=s7(Pl());return e.copy=function(){return Ka(e,c7()).constant(e.constant())},nr.apply(e,arguments)}function PX(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Lge(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Age(e){return e<0?-e*e:e*e}function l7(e){var t=e(ti,ti),n=1;function r(){return n===1?e(ti,ti):n===.5?e(Lge,Age):e(PX(n),PX(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},fo(t)}function Eu(){var e=l7(Pl());return e.copy=function(){return Ka(e,Eu()).exponent(e.exponent())},nr.apply(e,arguments),e}function pV(){return Eu.apply(null,arguments).exponent(.5)}function u7(){var e=[],t=[],n=[],r;function i(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=md(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:t[L2(n,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(bi),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return u7().domain(e).range(t).unknown(r)},nr.apply(o,arguments)}function f7(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function a(c){return c!=null&&c<=c?i[L2(r,c,0,n)]:o}function s(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return a}return a.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},a.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,s()):i.slice()},a.invertExtent=function(c){var l=i.indexOf(c);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},a.unknown=function(c){return arguments.length&&(o=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return f7().domain([e,t]).range(i).unknown(o)},nr.apply(fo(a),arguments)}function d7(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[L2(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return d7().domain(e).range(t).unknown(n)},nr.apply(i,arguments)}function Vge(e){return new Date(e)}function Nge(e){return e instanceof Date?+e:+new Date(+e)}function zy(e,t,n,r,i,o,a,s,c,l){var u=t7(),f=u.invert,d=u.domain,p=l(".%L"),h=l(":%S"),m=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),y=l("%b %d"),C=l("%B"),b=l("%Y");function M(S){return(c(S)<S?p:s(S)<S?h:a(S)<S?m:o(S)<S?g:r(S)<S?i(S)<S?v:y:n(S)<S?C:b)(S)}return u.invert=function(S){return new Date(f(S))},u.domain=function(S){return arguments.length?d(Array.from(S,Nge)):d().map(Vge)},u.ticks=function(S){var w=d();return e(w[0],w[w.length-1],S??10)},u.tickFormat=function(S,w){return w==null?M:l(w)},u.nice=function(S){var w=d();return(!S||typeof S.range!="function")&&(S=t(w[0],w[w.length-1],S??10)),S?d(i7(w,S)):u},u.copy=function(){return Ka(u,zy(e,t,n,r,i,o,a,s,c,l))},u}function Hy(){return nr.apply(zy(oL,aL,Zi,ic,jo,N1,L3,z3,Mi,cu).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ly(){return nr.apply(zy(rL,iL,Ji,oc,qo,Uo,A3,H3,Mi,lu).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ay(){var e=0,t=1,n,r,i,o,a=ti,s=!1,c;function l(f){return f==null||isNaN(f=+f)?c:a(i===0?.5:(f=(o(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(s=!!f,l):s},l.interpolator=function(f){return arguments.length?(a=f,l):a};function u(f){return function(d){var p,h;return arguments.length?([p,h]=d,a=f(p,h),l):[a(0),a(1)]}}return l.range=u(wi),l.rangeRound=u(Qa),l.unknown=function(f){return arguments.length?(c=f,l):c},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function mc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Du(){var e=fo(Ay()(ti));return e.copy=function(){return mc(e,Du())},Ga.apply(e,arguments)}function Vy(){var e=o7(Ay()).domain([1,10]);return e.copy=function(){return mc(e,Vy()).base(e.base())},Ga.apply(e,arguments)}function Ny(){var e=s7(Ay());return e.copy=function(){return mc(e,Ny()).constant(e.constant())},Ga.apply(e,arguments)}function p7(){var e=l7(Ay());return e.copy=function(){return mc(e,p7()).exponent(e.exponent())},Ga.apply(e,arguments)}function hV(){return p7.apply(null,arguments).exponent(.5)}function _y(){var e=0,t=.5,n=1,r=1,i,o,a,s,c,l=ti,u,f=!1,d;function p(m){return isNaN(m=+m)?d:(m=.5+((m=+u(m))-o)*(r*m<r*o?s:c),l(f?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,n]=m,i=u(e=+e),o=u(t=+t),a=u(n=+n),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,p):[e,t,n]},p.clamp=function(m){return arguments.length?(f=!!m,p):f},p.interpolator=function(m){return arguments.length?(l=m,p):l};function h(m){return function(g){var v,y,C;return arguments.length?([v,y,C]=g,l=Ol(m,[v,y,C]),p):[l(0),l(.5),l(1)]}}return p.range=h(wi),p.rangeRound=h(Qa),p.unknown=function(m){return arguments.length?(d=m,p):d},function(m){return u=m,i=m(e),o=m(t),a=m(n),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,p}}function h7(){var e=fo(_y()(ti));return e.copy=function(){return mc(e,h7())},Ga.apply(e,arguments)}function ky(){var e=o7(_y()).domain([.1,1,10]);return e.copy=function(){return mc(e,ky()).base(e.base())},Ga.apply(e,arguments)}function Ty(){var e=s7(_y());return e.copy=function(){return mc(e,Ty()).constant(e.constant())},Ga.apply(e,arguments)}function m7(){var e=l7(_y());return e.copy=function(){return mc(e,m7()).exponent(e.exponent())},Ga.apply(e,arguments)}function mV(){return m7.apply(null,arguments).exponent(.5)}function g7(e,t,n){let r=e-t+n*2;return e?r>0?r:1:0}var kge="identity",Bl="linear",Za="log",zu="pow",Hu="sqrt",v7="symlog",q3="time",G3="utc",_2="sequential",Ul="diverging",$l="quantile",y7="quantize",x7="threshold",Fy="ordinal",Ry="point",vV="band",Oy="bin-ordinal",mr="continuous",C7="discrete",b7="discretizing",Qo="interpolating",yV="temporal";function Tge(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Ige(e){return function(t){let n=e.range(),r=t[0],i=t[1],o=-1,a,s,c,l;for(i<r&&(s=r,r=i,i=s),c=0,l=n.length;c<l;++c)n[c]>=r&&n[c]<=i&&(o<0&&(o=c),a=c);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function xV(){let e=Nl().unknown(void 0),t=e.domain,n=e.range,r=[0,1],i,o,a=!1,s=0,c=0,l=.5;delete e.unknown;function u(){let f=t().length,d=r[1]<r[0],p=r[1-d],h=g7(f,s,c),m=r[d-0];i=(p-m)/(h||1),a&&(i=Math.floor(i)),m+=(p-m-i*(f-s))*l,o=i*(1-s),a&&(m=Math.round(m),o=Math.round(o));let g=Gn(f).map(v=>m+i*v);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),u()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],u()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,u()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,u()):a},e.padding=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),s=c,u()):s},e.paddingInner=function(f){return arguments.length?(s=Math.max(0,Math.min(1,f)),u()):s},e.paddingOuter=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),u()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;let d=r[1]<r[0],p=d?n().reverse():n(),h=p.length-1,m=+f[0],g=+f[1],v,y,C;if(!(m!==m||g!==g)&&(g<m&&(C=m,m=g,g=C),!(g<p[0]||m>r[1-d])))return v=Math.max(0,ml(p,m)-1),y=m===g?v:ml(p,g)-1,m-p[v]>o+1e-10&&++v,d&&(C=v,v=h-y,y=h-C),v>y?void 0:t().slice(v,y+1)},e.invert=function(f){let d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return xV().domain(t()).range(r).round(a).paddingInner(s).paddingOuter(c).align(l)},u()}function jX(e){let t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return jX(t())},e}function Fge(){return jX(xV().paddingInner(1))}var Rge=Array.prototype.map;function Oge(e){return Rge.call(e,qn)}var Pge=Array.prototype.slice;function qX(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(L2(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Oge(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Pge.call(r),n):t.slice()},n.tickFormat=function(r,i){return Su(e[0],Ue(e),r??10,i)},n.copy=function(){return qX().domain(n.domain()).range(n.range())},n}var Iy=new Map,GX=Symbol("vega_scale");function CV(e){return e[GX]=!0,e}function WX(e){return e&&e[GX]===!0}function $ge(e,t,n){let r=function(){let o=t();return o.invertRange||(o.invertRange=o.invert?Tge(o):o.invertExtent?Ige(o):void 0),o.type=e,CV(o)};return r.metadata=hr(te(n)),r}function lt(e,t,n){return arguments.length>1?(Iy.set(e,$ge(e,t,n)),this):bV(e)?Iy.get(e):void 0}lt(kge,r7);lt(Bl,n7,mr);lt(Za,a7,[mr,Za]);lt(zu,Eu,mr);lt(Hu,pV,mr);lt(v7,c7,mr);lt(q3,Hy,[mr,yV]);lt(G3,Ly,[mr,yV]);lt(_2,Du,[mr,Qo]);lt(`${_2}-${Bl}`,Du,[mr,Qo]);lt(`${_2}-${Za}`,Vy,[mr,Qo,Za]);lt(`${_2}-${zu}`,p7,[mr,Qo]);lt(`${_2}-${Hu}`,hV,[mr,Qo]);lt(`${_2}-${v7}`,Ny,[mr,Qo]);lt(`${Ul}-${Bl}`,h7,[mr,Qo]);lt(`${Ul}-${Za}`,ky,[mr,Qo,Za]);lt(`${Ul}-${zu}`,m7,[mr,Qo]);lt(`${Ul}-${Hu}`,mV,[mr,Qo]);lt(`${Ul}-${v7}`,Ty,[mr,Qo]);lt($l,u7,[b7,$l]);lt(y7,f7,b7);lt(x7,d7,b7);lt(Oy,qX,[C7,b7]);lt(Fy,Nl,C7);lt(vV,xV,C7);lt(Ry,Fge,C7);function bV(e){return Iy.has(e)}function jl(e,t){let n=Iy.get(e);return n&&n.metadata[t]}function M7(e){return jl(e,mr)}function W3(e){return jl(e,C7)}function Py(e){return jl(e,b7)}function MV(e){return jl(e,Za)}function Bge(e){return jl(e,yV)}function wV(e){return jl(e,Qo)}function SV(e){return jl(e,$l)}var Uge=["clamp","base","constant","exponent"];function $y(e,t){let n=t[0],r=Ue(t)-n;return function(i){return e(n+i*r)}}function Lu(e,t,n){return Ol(w7(t||"rgb",n),e)}function By(e,t){let n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function Uy(e,t,n){let r=n-t,i,o,a;return!r||!Number.isFinite(r)?hn(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=lt(o)().domain([t,n]).range([0,1]),Uge.forEach(s=>e[s]?a[s](e[s]()):0),a)}function w7(e,t){let n=uV[jge(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function jge(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}var qge={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Gge={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function YX(e){let t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function XX(e,t){for(let n in e)S7(n,t(e[n]))}var $X={};XX(Gge,YX);XX(qge,e=>Lu(YX(e)));function S7(e,t){return e=e&&e.toLowerCase(),arguments.length>1?($X[e]=t,this):$X[e]}var E7="symbol",Wge="discrete",QX="gradient",Yge=e=>F(e)?e.map(t=>String(t)):String(e),Xge=(e,t)=>e[1]-t[1],Qge=(e,t)=>t[1]-e[1];function jy(e,t,n){let r;return Oe(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(tc(e.domain())/n||1)+1))),ne(t)&&(r=t.step,t=t.interval),Q(t)&&(t=e.type===q3?ac(t):e.type==G3?sc(t):B("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function EV(e,t,n){let r=e.range(),i=r[0],o=Ue(r),a=Xge;if(i>o&&(r=o,o=i,i=r,a=Qge),i=Math.floor(i),o=Math.ceil(o),t=t.map(s=>[s,e(s)]).filter(s=>i<=s[1]&&s[1]<=o).sort(a).map(s=>s[0]),n>0&&t.length>1){let s=[t[0],Ue(t)];for(;t.length>n&&t.length>=3;)t=t.filter((c,l)=>!(l%2));t.length<3&&(t=s)}return t}function qy(e,t){return e.bins?EV(e,e.bins):e.ticks?e.ticks(t):e.domain()}function DV(e,t,n,r,i,o){let a=t.type,s=Yge;if(a===q3||i===q3)s=e.timeFormat(r);else if(a===G3||i===G3)s=e.utcFormat(r);else if(MV(a)){let c=e.formatFloat(r);if(o||t.bins)s=c;else{let l=KX(t,n,!1);s=u=>l(u)?c(u):""}}else if(t.tickFormat){let c=t.domain();s=e.formatSpan(c[0],c[c.length-1],n,r)}else r&&(s=e.format(r));return s}function KX(e,t,n){let r=qy(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=c=>{let l=c/Math.pow(i,Math.round(Math.log(c)/o));return l*i<i-.5&&(l*=i),l<=a};return n?r.filter(s):s}var gV={[$l]:"quantiles",[y7]:"thresholds",[x7]:"domain"},ZX={[$l]:"quantiles",[y7]:"domain"};function zV(e,t){return e.bins?Jge(e.bins):e.type===Za?KX(e,t,!0):gV[e.type]?Zge(e[gV[e.type]]()):qy(e,t)}function Kge(e,t,n){let r=t[ZX[t.type]](),i=r.length,o=i>1?r[1]-r[0]:r[0],a;for(a=1;a<i;++a)o=Math.min(o,r[a]-r[a-1]);return e.formatSpan(0,o,3*10,n)}function Zge(e){let t=[-1/0].concat(e);return t.max=1/0,t}function Jge(e){let t=e.slice(0,-1);return t.max=Ue(e),t}var eve=e=>gV[e.type]||e.bins;function HV(e,t,n,r,i,o,a){let s=ZX[t.type]&&o!==q3&&o!==G3?Kge(e,t,i):DV(e,t,n,i,o,a);return r===E7&&eve(t)?tve(s):r===Wge?nve(s):rve(s)}var tve=e=>(t,n,r)=>{let i=BX(r[n+1],BX(r.max,1/0)),o=UX(t,e),a=UX(i,e);return o&&a?o+" \u2013 "+a:a?"< "+a:"\u2265 "+o},BX=(e,t)=>e??t,nve=e=>(t,n)=>n?e(t):null,rve=e=>t=>e(t),UX=(e,t)=>Number.isFinite(e)?t(e):null;function JX(e){let t=e.domain(),n=t.length-1,r=+t[0],i=+Ue(t),o=i-r;if(e.type===x7){let a=n?o/n:.1;r-=a,i+=a,o=i-r}return a=>(a-r)/o}function ive(e,t,n,r){let i=r||t.type;return Q(n)&&Bge(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===q3?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===G3?e.utcFormat("%A, %d %B %Y, %X UTC"):HV(e,t,5,null,n,r,!0)}function LV(e,t,n){n=n||{};let r=Math.max(3,n.maxlen||7),i=ive(e,t,n.format,n.formatType);if(Py(t.type)){let o=zV(t).slice(1).map(i),a=o.length;return`${a} boundar${a===1?"y":"ies"}: ${o.join(", ")}`}else if(W3(t.type)){let o=t.domain(),a=o.length,s=a>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${a} value${a===1?"":"s"}: ${s}`}else{let o=t.domain();return`values from ${i(o[0])} to ${i(Ue(o))}`}}var EQ=0;function ove(){EQ=0}var ex="p_";function YV(e){return e&&e.gradient}function DQ(e,t,n){let r=e.gradient,i=e.id,o=r==="radial"?ex:"";return i||(i=e.id="gradient_"+EQ++,r==="radial"?(e.x1=Ja(e.x1,.5),e.y1=Ja(e.y1,.5),e.r1=Ja(e.r1,0),e.x2=Ja(e.x2,.5),e.y2=Ja(e.y2,.5),e.r2=Ja(e.r2,.5),o=ex):(e.x1=Ja(e.x1,0),e.y1=Ja(e.y1,0),e.x2=Ja(e.x2,1),e.y2=Ja(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function Ja(e,t){return e??t}function XV(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}var eQ={basis:{curve:_A},"basis-closed":{curve:kA},"basis-open":{curve:TA},bundle:{curve:IA,tension:"beta",value:.85},cardinal:{curve:FA,tension:"tension",value:0},"cardinal-open":{curve:OA,tension:"tension",value:0},"cardinal-closed":{curve:RA,tension:"tension",value:0},"catmull-rom":{curve:PA,tension:"alpha",value:.5},"catmull-rom-closed":{curve:$A,tension:"alpha",value:.5},"catmull-rom-open":{curve:BA,tension:"alpha",value:.5},linear:{curve:Vl},"linear-closed":{curve:UA},monotone:{horizontal:GA,vertical:qA},natural:{curve:WA},step:{curve:YA},"step-after":{curve:QA},"step-before":{curve:XA}};function QV(e,t,n){var r=de(eQ,e)&&eQ[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}var ave={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},sve=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,cve=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,lve=/^((\s+,?\s*)|(,\s*))/,uve=/^[01]/;function Ql(e){let t=[];return(e.match(sve)||[]).forEach(r=>{let i=r[0],o=i.toLowerCase(),a=ave[o],s=fve(o,a,r.slice(1).trim()),c=s.length;if(c<a||c&&c%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...s.slice(0,a)]),c!==a){o==="m"&&(i=i==="M"?"L":"l");for(let l=a;l<c;l+=a)t.push([i,...s.slice(l,l+a)])}}),t}function fve(e,t,n){let r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){let a=e==="a"&&(o===3||o===4)?uve:cve,s=n.slice(i).match(a);if(s===null)throw Error("Invalid SVG path, incorrect parameter type");i+=s[0].length,r.push(+s[0]);let c=n.slice(i).match(lve);c!==null&&(i+=c[0].length)}return r}var J3=Math.PI/180,dve=1e-14,ql=Math.PI/2,es=Math.PI*2,Au=Math.sqrt(3)/2,AV={},VV={},zQ=[].join;function pve(e,t,n,r,i,o,a,s,c){let l=zQ.call(arguments);if(AV[l])return AV[l];let u=a*J3,f=Math.sin(u),d=Math.cos(u);n=Math.abs(n),r=Math.abs(r);let p=d*(s-e)*.5+f*(c-t)*.5,h=d*(c-t)*.5-f*(s-e)*.5,m=p*p/(n*n)+h*h/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);let g=d/n,v=f/n,y=-f/r,C=d/r,b=g*s+v*c,M=y*s+C*c,S=g*e+v*t,w=y*e+C*t,D=1/((S-b)*(S-b)+(w-M)*(w-M))-.25;D<0&&(D=0);let L=Math.sqrt(D);o==i&&(L=-L);let A=.5*(b+S)-L*(w-M),j=.5*(M+w)+L*(S-b),V=Math.atan2(M-j,b-A),N=Math.atan2(w-j,S-A)-V;N<0&&o===1?N+=es:N>0&&o===0&&(N-=es);let I=Math.ceil(Math.abs(N/(ql+.001))),G=[];for(let X=0;X<I;++X){let J=V+X*N/I,we=V+(X+1)*N/I;G[X]=[A,j,J,we,n,r,f,d]}return AV[l]=G}function hve(e){let t=zQ.call(e);if(VV[t])return VV[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7];let u=l*a,f=-c*s,d=c*a,p=l*s,h=Math.cos(i),m=Math.sin(i),g=Math.cos(o),v=Math.sin(o),y=.5*(o-i),C=Math.sin(y*.5),b=8/3*C*C/Math.sin(y),M=n+h-b*m,S=r+m+b*h,w=n+g,E=r+v,D=w+b*v,L=E-b*g;return VV[t]=[u*M+f*S,d*M+p*S,u*D+f*L,d*D+p*L,u*w+f*E,d*w+p*E]}var Ko=["l",0,0,0,0,0,0,0];function mve(e,t,n){let r=Ko[0]=e[0];if(r==="a"||r==="A")Ko[1]=t*e[1],Ko[2]=n*e[2],Ko[3]=e[3],Ko[4]=e[4],Ko[5]=e[5],Ko[6]=t*e[6],Ko[7]=n*e[7];else if(r==="h"||r==="H")Ko[1]=t*e[1];else if(r==="v"||r==="V")Ko[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)Ko[i]=(i%2==1?t:n)*e[i];return Ko}function Nu(e,t,n,r,i,o){var a,s=null,c=0,l=0,u=0,f=0,d,p,h,m,g=0,v=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var y=0,C=t.length;y<C;++y){switch(a=t[y],(i!==1||o!==1)&&(a=mve(a,i,o)),a[0]){case"l":c+=a[1],l+=a[2],e.lineTo(c+n,l+r);break;case"L":c=a[1],l=a[2],e.lineTo(c+n,l+r);break;case"h":c+=a[1],e.lineTo(c+n,l+r);break;case"H":c=a[1],e.lineTo(c+n,l+r);break;case"v":l+=a[1],e.lineTo(c+n,l+r);break;case"V":l=a[1],e.lineTo(c+n,l+r);break;case"m":c+=a[1],l+=a[2],g=c,v=l,e.moveTo(c+n,l+r);break;case"M":c=a[1],l=a[2],g=c,v=l,e.moveTo(c+n,l+r);break;case"c":d=c+a[5],p=l+a[6],u=c+a[3],f=l+a[4],e.bezierCurveTo(c+a[1]+n,l+a[2]+r,u+n,f+r,d+n,p+r),c=d,l=p;break;case"C":c=a[5],l=a[6],u=a[3],f=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,u+n,f+r,c+n,l+r);break;case"s":d=c+a[3],p=l+a[4],u=2*c-u,f=2*l-f,e.bezierCurveTo(u+n,f+r,c+a[1]+n,l+a[2]+r,d+n,p+r),u=c+a[1],f=l+a[2],c=d,l=p;break;case"S":d=a[3],p=a[4],u=2*c-u,f=2*l-f,e.bezierCurveTo(u+n,f+r,a[1]+n,a[2]+r,d+n,p+r),c=d,l=p,u=a[1],f=a[2];break;case"q":d=c+a[3],p=l+a[4],u=c+a[1],f=l+a[2],e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p;break;case"Q":d=a[3],p=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,d+n,p+r),c=d,l=p,u=a[1],f=a[2];break;case"t":d=c+a[1],p=l+a[2],s[0].match(/[QqTt]/)===null?(u=c,f=l):s[0]==="t"?(u=2*c-h,f=2*l-m):s[0]==="q"&&(u=2*c-u,f=2*l-f),h=u,m=f,e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p,u=c+a[1],f=l+a[2];break;case"T":d=a[1],p=a[2],u=2*c-u,f=2*l-f,e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p;break;case"a":tQ(e,c+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+c+n,a[7]+l+r]),c+=a[6],l+=a[7];break;case"A":tQ(e,c+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),c=a[6],l=a[7];break;case"z":case"Z":c=g,l=v,e.closePath();break}s=a}}function tQ(e,t,n,r){let i=pve(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){let a=hve(i[o]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}var nQ=.5773502691896257,rQ={circle:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,es)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Au*n,i=r-n*nQ,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Au*n,i=r-n*nQ;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Au*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Au*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Au*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Au*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function HQ(e){return de(rQ,e)?rQ[e]:gve(e)}var NV={};function gve(e){if(!de(NV,e)){let t=Ql(e);NV[e]={draw:function(n,r){Nu(n,t,0,0,Math.sqrt(r)/2)}}}return NV[e]}var Y3=.448084975506;function vve(e){return e.x}function yve(e){return e.y}function xve(e){return e.width}function Cve(e){return e.height}function gc(e){return typeof e=="function"?e:()=>+e}function Gy(e,t,n){return Math.max(t,Math.min(e,n))}function LQ(){var e=vve,t=yve,n=xve,r=Cve,i=gc(0),o=i,a=i,s=i,c=null;function l(u,f,d){var p,h=f??+e.call(this,u),m=d??+t.call(this,u),g=+n.call(this,u),v=+r.call(this,u),y=Math.min(g,v)/2,C=Gy(+i.call(this,u),0,y),b=Gy(+o.call(this,u),0,y),M=Gy(+a.call(this,u),0,y),S=Gy(+s.call(this,u),0,y);if(c||(c=p=Al()),C<=0&&b<=0&&M<=0&&S<=0)c.rect(h,m,g,v);else{var w=h+g,E=m+v;c.moveTo(h+C,m),c.lineTo(w-b,m),c.bezierCurveTo(w-Y3*b,m,w,m+Y3*b,w,m+b),c.lineTo(w,E-S),c.bezierCurveTo(w,E-Y3*S,w-Y3*S,E,w-S,E),c.lineTo(h+M,E),c.bezierCurveTo(h+Y3*M,E,h,E-Y3*M,h,E-M),c.lineTo(h,m+C),c.bezierCurveTo(h,m+Y3*C,h+Y3*C,m,h+C,m),c.closePath()}if(p)return c=null,p+""||null}return l.x=function(u){return arguments.length?(e=gc(u),l):e},l.y=function(u){return arguments.length?(t=gc(u),l):t},l.width=function(u){return arguments.length?(n=gc(u),l):n},l.height=function(u){return arguments.length?(r=gc(u),l):r},l.cornerRadius=function(u,f,d,p){return arguments.length?(i=gc(u),o=f!=null?gc(f):i,s=d!=null?gc(d):i,a=p!=null?gc(p):o,l):i},l.context=function(u){return arguments.length?(c=u??null,l):c},l}function AQ(){var e,t,n,r,i=null,o,a,s,c;function l(f,d,p){let h=p/2;if(o){var m=s-d,g=f-a;if(m||g){var v=Math.hypot(m,g),y=(m/=v)*c,C=(g/=v)*c,b=Math.atan2(g,m);i.moveTo(a-y,s-C),i.lineTo(f-m*h,d-g*h),i.arc(f,d,h,b-Math.PI,b),i.lineTo(a+y,s+C),i.arc(a,s,c,b,b+Math.PI)}else i.arc(f,d,h,0,es);i.closePath()}else o=1;a=f,s=d,c=h}function u(f){var d,p=f.length,h,m=!1,g;for(i==null&&(i=g=Al()),d=0;d<=p;++d)!(d<p&&r(h=f[d],d,f))===m&&(m=!m)&&(o=0),m&&l(+e(h,d,f),+t(h,d,f),+n(h,d,f));if(g)return i=null,g+""||null}return u.x=function(f){return arguments.length?(e=f,u):e},u.y=function(f){return arguments.length?(t=f,u):t},u.size=function(f){return arguments.length?(n=f,u):n},u.defined=function(f){return arguments.length?(r=f,u):r},u.context=function(f){return arguments.length?(f==null?i=null:i=f,u):i},u}function I7(e,t){return e??t}var F7=e=>e.x||0,R7=e=>e.y||0,bve=e=>e.width||0,Mve=e=>e.height||0,wve=e=>(e.x||0)+(e.width||0),Sve=e=>(e.y||0)+(e.height||0),Eve=e=>e.startAngle||0,Dve=e=>e.endAngle||0,zve=e=>e.padAngle||0,Hve=e=>e.innerRadius||0,Lve=e=>e.outerRadius||0,Ave=e=>e.cornerRadius||0,Vve=e=>I7(e.cornerRadiusTopLeft,e.cornerRadius)||0,Nve=e=>I7(e.cornerRadiusTopRight,e.cornerRadius)||0,_ve=e=>I7(e.cornerRadiusBottomRight,e.cornerRadius)||0,kve=e=>I7(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Tve=e=>I7(e.size,64),Ive=e=>e.size||1,dx=e=>e.defined!==!1,Fve=e=>HQ(e.shape||"circle"),Rve=NA().startAngle(Eve).endAngle(Dve).padAngle(zve).innerRadius(Hve).outerRadius(Lve).cornerRadius(Ave),Ove=oy().x(F7).y1(R7).y0(Sve).defined(dx),Pve=oy().y(R7).x1(F7).x0(wve).defined(dx),$ve=Yd().x(F7).y(R7).defined(dx),Bve=LQ().x(F7).y(R7).width(bve).height(Mve).cornerRadius(Vve,Nve,_ve,kve),Uve=ay().type(Fve).size(Tve),jve=AQ().x(F7).y(R7).defined(dx).size(Ive);function KV(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function qve(e,t){return Rve.context(e)(t)}function Gve(e,t){let n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Pve:Ove).curve(QV(r,n.orient,n.tension)).context(e)(t)}function Wve(e,t){let n=t[0],r=n.interpolate||"linear";return $ve.curve(QV(r,n.orient,n.tension)).context(e)(t)}function Tu(e,t,n,r){return Bve.context(e)(t,n,r)}function Yve(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Xve(e,t){return Uve.context(e)(t)}function Qve(e,t){return jve.context(e)(t)}var VQ=1;function NQ(){VQ=1}function ZV(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+VQ++),a=i.clipping[o]||(i.clipping[o]={id:o});return Ie(r)?a.path=r(null):KV(n)?a.path=Tu(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function Nn(e){this.clear(),e&&this.union(e)}Nn.prototype={clone(){return new Nn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){let r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),c=Math.sin(e),l=t-t*s+n*c,u=n-t*c-n*s;return[s*r-c*i+l,c*r+s*i+u,s*r-c*a+l,c*r+s*a+u,s*o-c*i+l,c*o+s*i+u,s*o-c*a+l,c*o+s*a+u]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function O7(e){this.mark=e,this.bounds=this.bounds||new Nn}function P7(e){O7.call(this,e),this.items=this.items||[]}ee(P7,O7);function JV(e){this._pending=0,this._loader=e||uu()}function iQ(e){e._pending+=1}function D7(e){e._pending-=1}JV.prototype={pending(){return this._pending},sanitizeURL(e){let t=this;return iQ(t),t._loader.sanitize(e,{context:"href"}).then(n=>(D7(t),n)).catch(()=>(D7(t),null))},loadImage(e){let t=this,n=$Y();return iQ(t),t._loader.sanitize(e,{context:"image"}).then(r=>{let i=r.href;if(!i||!n)throw{url:i};let o=new n,a=de(r,"crossOrigin")?r.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>D7(t),o.onerror=()=>D7(t),o.src=i,o}).catch(r=>(D7(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){let e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function ts(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){let r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?Kve(t,r):0))}return e}function Kve(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}var Zve=es-1e-8,px,Wy,Yy,Yl,FV,Xy,RV,OV,X3=(e,t)=>px.add(e,t),Qy=(e,t)=>X3(Wy=e,Yy=t),oQ=e=>X3(e,px.y1),aQ=e=>X3(px.x1,e),Gl=(e,t)=>FV*e+RV*t,Wl=(e,t)=>Xy*e+OV*t,_V=(e,t)=>X3(Gl(e,t),Wl(e,t)),kV=(e,t)=>Qy(Gl(e,t),Wl(e,t));function $7(e,t){return px=e,t?(Yl=t*J3,FV=OV=Math.cos(Yl),Xy=Math.sin(Yl),RV=-Xy):(FV=OV=1,Yl=Xy=RV=0),Jve}var Jve={beginPath(){},closePath(){},moveTo:kV,lineTo:kV,rect(e,t,n,r){Yl?(_V(e+n,t),_V(e+n,t+r),_V(e,t+r),kV(e,t)):(X3(e+n,t+r),Qy(e,t))},quadraticCurveTo(e,t,n,r){let i=Gl(e,t),o=Wl(e,t),a=Gl(n,r),s=Wl(n,r);sQ(Wy,i,a,oQ),sQ(Yy,o,s,aQ),Qy(a,s)},bezierCurveTo(e,t,n,r,i,o){let a=Gl(e,t),s=Wl(e,t),c=Gl(n,r),l=Wl(n,r),u=Gl(i,o),f=Wl(i,o);cQ(Wy,a,c,u,oQ),cQ(Yy,s,l,f,aQ),Qy(u,f)},arc(e,t,n,r,i,o){if(r+=Yl,i+=Yl,Wy=n*Math.cos(i)+e,Yy=n*Math.sin(i)+t,Math.abs(i-r)>Zve)X3(e-n,t-n),X3(e+n,t+n);else{let a=l=>X3(n*Math.cos(l)+e,n*Math.sin(l)+t),s,c;if(a(r),a(i),i!==r)if(r=r%es,r<0&&(r+=es),i=i%es,i<0&&(i+=es),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=es,s=r-r%ql,c=0;c<4&&s>i;++c,s-=ql)a(s);else for(s=r-r%ql+ql,c=0;c<4&&s<i;++c,s=s+ql)a(s)}}};function sQ(e,t,n,r){let i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function cQ(e,t,n,r,i){let o=r-e+3*t-3*n,a=e+n-2*t,s=e-t,c=0,l=0,u;Math.abs(o)>dve?(u=a*a+s*o,u>=0&&(u=Math.sqrt(u),c=(-a+u)/o,l=(-a-u)/o)):c=.5*s/a,0<c&&c<1&&i(lQ(c,e,t,n,r)),0<l&&l<1&&i(lQ(l,e,t,n,r))}function lQ(e,t,n,r,i){let o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var Z3=(Z3=Yo(1,1))?Z3.getContext("2d"):null,PV=new Nn;function eN(e){return function(t,n){if(!Z3)return!0;e(Z3,t),PV.clear().union(t.bounds).intersect(n).round();let{x1:r,y1:i,x2:o,y2:a}=PV;for(let s=i;s<=a;++s)for(let c=r;c<=o;++c)if(Z3.isPointInPath(c,s))return!0;return!1}}function tN(e,t){return t.contains(e.x||0,e.y||0)}function _Q(e,t){let n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(PV.set(n,r,n+i,r+o))}function kQ(e,t){let n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return Vu(t,n,r,i,o)}function Vu(e,t,n,r,i){let{x1:o,y1:a,x2:s,y2:c}=e,l=r-t,u=i-n,f=0,d=1,p,h,m,g;for(g=0;g<4;++g){if(g===0&&(p=-l,h=-(o-t)),g===1&&(p=l,h=s-t),g===2&&(p=-u,h=-(a-n)),g===3&&(p=u,h=c-n),Math.abs(p)<1e-10&&h<0)return!1;if(m=h/p,p<0){if(m>d)return!1;m>f&&(f=m)}else if(p>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function _u(e,t){e.globalCompositeOperation=t.blend||"source-over"}function k2(e,t){return e??t}function uQ(e,t){let n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function eye(e,t,n){let r=n.width(),i=n.height(),o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+k2(t.x1,.5)*r,n.y1+k2(t.y1,.5)*i,Math.max(r,i)*k2(t.r1,0),n.x1+k2(t.x2,.5)*r,n.y1+k2(t.y2,.5)*i,Math.max(r,i)*k2(t.r2,.5));else{let a=k2(t.x1,0),s=k2(t.y1,0),c=k2(t.x2,1),l=k2(t.y2,0);if(a===c||s===l||r===i)o=e.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+c*r,n.y1+l*i);else{let u=Yo(Math.ceil(r),Math.ceil(i)),f=u.getContext("2d");return f.scale(r,i),f.fillStyle=uQ(f.createLinearGradient(a,s,c,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(u,"no-repeat")}}return uQ(o,t.stops)}function TQ(e,t,n){return YV(n)?eye(e,n,t.bounds):n}function tx(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=TQ(e,t,t.fill),!0):!1}var tye=[];function ku(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=TQ(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||tye),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function nye(e,t){return e.zindex-t.zindex||e.index-t.index}function nN(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(nye)}function I2(e,t){var n=e.items,r,i;if(!n||!n.length)return;let o=nN(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function nx(e,t){var n=e.items,r,i;if(!n||!n.length)return null;let o=nN(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function rN(e){return function(t,n,r){I2(n,i=>{(!r||r.intersects(i.bounds))&&IQ(e,t,i,i)})}}function rye(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&IQ(e,t,n.items[0],n.items)}}function IQ(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(_u(t,n),n.fill&&tx(t,n,i)&&t.fill(),n.stroke&&ku(t,n,i)&&t.stroke()))}function hx(e){return e=e||pr,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,nx(n,s=>{let c=s.bounds;if(!(c&&!c.contains(o,a)||!c)&&e(t,s,r,i,o,a))return s})}}function B7(e,t){return function(n,r,i,o){var a=Array.isArray(r)?r[0]:r,s=t??a.fill,c=a.stroke&&n.isPointInStroke,l,u;return c&&(l=a.strokeWidth,u=a.strokeCap,n.lineWidth=l??1,n.lineCap=u??"butt"),e(n,r)?!1:s&&n.isPointInPath(i,o)||c&&n.isPointInStroke(i,o)}}function iN(e){return hx(B7(e))}function Xl(e,t){return"translate("+e+","+t+")"}function oN(e){return"rotate("+e+")"}function iye(e,t){return"scale("+e+","+t+")"}function FQ(e){return Xl(e.x||0,e.y||0)}function oye(e){return Xl(e.x||0,e.y||0)+(e.angle?" "+oN(e.angle):"")}function aye(e){return Xl(e.x||0,e.y||0)+(e.angle?" "+oN(e.angle):"")+(e.scaleX||e.scaleY?" "+iye(e.scaleX||1,e.scaleY||1):"")}function aN(e,t,n){function r(a,s){a("transform",oye(s)),a("d",t(null,s))}function i(a,s){return t($7(a,s.angle),s),ts(a,s).translate(s.x||0,s.y||0)}function o(a,s){var c=s.x||0,l=s.y||0,u=s.angle||0;a.translate(c,l),u&&a.rotate(u*=J3),a.beginPath(),t(a,s),u&&a.rotate(-u),a.translate(-c,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:rN(o),pick:iN(o),isect:n||eN(o)}}var sye=aN("arc",qve);function cye(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,a,s;--i>=0;)e[i].defined!==!1&&(s=Math.abs(e[i][r]-n),s<o&&(o=s,a=e[i]));return a}function lye(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,a;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],a=i*i+o*o,a<n))return e[r];return null}function uye(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function sN(e,t,n){function r(c,l){var u=l.mark.items;u.length&&c("d",t(null,u))}function i(c,l){var u=l.items;return u.length===0?c:(t($7(c),u),ts(c,u[0]))}function o(c,l){c.beginPath(),t(c,l)}let a=B7(o);function s(c,l,u,f,d,p){var h=l.items,m=l.bounds;return!h||!h.length||m&&!m.contains(d,p)?null:(u*=c.pixelRatio,f*=c.pixelRatio,a(c,h,u,f)?h[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:rye(o),pick:s,isect:tN,tip:n}}var fye=sN("area",Gve,cye);function dye(e,t){var n=t.clip;e.save(),Ie(n)?(e.beginPath(),n(e),e.clip()):RQ(e,t.group)}function RQ(e,t){e.beginPath(),KV(t)?Tu(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function OQ(e){let t=k2(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function pye(e,t){e("transform",FQ(t))}function PQ(e,t){let n=OQ(t);e("d",Tu(null,t,n,n))}function hye(e,t){e("class","background"),e("aria-hidden",!0),PQ(e,t)}function mye(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?PQ(e,t):e("d","")}function gye(e,t,n){let r=t.clip?ZV(n,t,t):null;e("clip-path",r)}function vye(e,t){if(!t.clip&&t.items){let n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ts(e,t),e.translate(t.x||0,t.y||0)}function N7(e,t,n,r){let i=OQ(t);e.beginPath(),Tu(e,t,(n||0)+i,(r||0)+i)}var yye=B7(N7),xye=B7(N7,!1),Cye=B7(N7,!0);function bye(e,t,n,r){I2(t,i=>{let o=i.x||0,a=i.y||0,s=i.strokeForeground,c=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&c&&(N7(e,i,o,a),_u(e,i),i.fill&&tx(e,i,c)&&e.fill(),i.stroke&&!s&&ku(e,i,c)&&e.stroke()),e.save(),e.translate(o,a),i.clip&&RQ(e,i),n&&n.translate(-o,-a),I2(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(o,a),e.restore(),s&&i.stroke&&c&&(N7(e,i,o,a),_u(e,i),ku(e,i,c)&&e.stroke())})}function Mye(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;let a=n*e.pixelRatio,s=r*e.pixelRatio;return nx(t,c=>{let l,u,f,d=c.bounds;if(d&&!d.contains(i,o))return;u=c.x||0,f=c.y||0;let p=u+(c.width||0),h=f+(c.height||0),m=c.clip;if(m&&(i<u||i>p||o<f||o>h))return;if(e.save(),e.translate(u,f),u=i-u,f=o-f,m&&KV(c)&&!Cye(e,c,a,s))return e.restore(),null;let g=c.strokeForeground,v=t.interactive!==!1;return v&&g&&c.stroke&&xye(e,c,a,s)?(e.restore(),c):(l=nx(c,y=>wye(y,u,f)?this.pick(y,n,r,u,f):null),!l&&v&&(c.fill||!g&&c.stroke)&&yye(e,c,a,s)&&(l=c),e.restore(),l||null)})}function wye(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Sye={type:"group",tag:"g",nested:!1,attr:pye,bound:vye,draw:bye,pick:Mye,isect:_Q,content:gye,background:hye,foreground:mye},_7={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function cN(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function lN(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function uN(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function mx(e,t){return e==="center"?t/2:e==="right"?t:0}function gx(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Eye(e,t,n){let r=cN(t,n),i=lN(t,r),o=uN(t,r),a=(t.x||0)-mx(t.align,i),s=(t.y||0)-gx(t.baseline,o),c=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",c,_7["xmlns:xlink"],"xlink:href"),e("transform",Xl(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Dye(e,t){let n=t.image,r=lN(t,n),i=uN(t,n),o=(t.x||0)-mx(t.align,r),a=(t.y||0)-gx(t.baseline,i);return e.set(o,a,o+r,a+i)}function zye(e,t,n){I2(t,r=>{if(n&&!n.intersects(r.bounds))return;let i=cN(r,this),o=lN(r,i),a=uN(r,i);if(o===0||a===0)return;let s=(r.x||0)-mx(r.align,o),c=(r.y||0)-gx(r.baseline,a),l,u,f,d;r.aspect!==!1&&(u=i.width/i.height,f=r.width/r.height,u===u&&f===f&&u!==f&&(f<u?(d=o/u,c+=(a-d)/2,a=d):(d=a*u,s+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(_u(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,s,c,o,a))})}var Hye={type:"image",tag:"image",nested:!1,attr:Eye,bound:Dye,draw:zye,pick:hx(),isect:pr,get:cN,xOffset:mx,yOffset:gx},Lye=sN("line",Wve,lye);function Aye(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",aye(t)),e("d",t.path)}function Ky(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*J3,c=t.pathCache;(!c||c.path!==n)&&((t.pathCache=c=Ql(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),Nu(e,c,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):Nu(e,c,r,i,o,a)}function Vye(e,t){return Ky($7(e,t.angle),t)?e.set(0,0,0,0):ts(e,t,!0)}var Nye={type:"path",tag:"path",nested:!1,attr:Aye,bound:Vye,draw:rN(Ky),pick:iN(Ky),isect:eN(Ky)};function _ye(e,t){e("d",Tu(null,t))}function kye(e,t){var n,r;return ts(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function fQ(e,t){e.beginPath(),Tu(e,t)}var Tye={type:"rect",tag:"path",nested:!1,attr:_ye,bound:kye,draw:rN(fQ),pick:iN(fQ),isect:_Q};function Iye(e,t){e("transform",FQ(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Fye(e,t){var n,r;return ts(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function $Q(e,t,n){var r,i,o,a;return t.stroke&&ku(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0):!1}function Rye(e,t,n){I2(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&$Q(e,r,i)&&(_u(e,r),e.stroke())}})}function Oye(e,t,n,r){return e.isPointInStroke?$Q(e,t,1)&&e.isPointInStroke(n,r):!1}var Pye={type:"rule",tag:"line",nested:!1,attr:Iye,bound:Fye,draw:Rye,pick:hx(Oye),isect:kQ},$ye=aN("shape",Yve),Bye=aN("symbol",Xve,tN),dQ=_H(),T1={height:ns,measureWidth:fN,estimateWidth:rx,width:rx,canvas:BQ};BQ(!0);function BQ(e){T1.width=e&&Z3?fN:rx}function rx(e,t){return UQ(t4(e,t),ns(e))}function UQ(e,t){return~~(.8*e.length*t)}function fN(e,t){return ns(e)<=0||!(t=t4(e,t))?0:jQ(t,yx(e))}function jQ(e,t){let n=`(${t}) ${e}`,r=dQ.get(n);return r===void 0&&(Z3.font=t,r=Z3.measureText(e).width,dQ.set(n,r)),r}function ns(e){return e.fontSize!=null?+e.fontSize||0:11}function e4(e){return e.lineHeight!=null?e.lineHeight:ns(e)+2}function Uye(e){return F(e)?e.length>1?e:e[0]:e}function U7(e){return Uye(e.lineBreak&&e.text&&!F(e.text)?e.text.split(e.lineBreak):e.text)}function vx(e){let t=U7(e);return(F(t)?t.length-1:0)*e4(e)}function t4(e,t){let n=t==null?"":(t+"").trim();return e.limit>0&&n.length?qye(e,n):n}function jye(e){if(T1.width===fN){let t=yx(e);return n=>jQ(n,t)}else if(T1.width===rx){let t=ns(e);return n=>UQ(n,t)}else return t=>T1.width(e,t)}function qye(e,t){var n=+e.limit,r=jye(e);if(r(t)<n)return t;var i=e.ellipsis||"\u2026",o=e.dir==="rtl",a=0,s=t.length,c;if(n-=r(i),o){for(;a<s;)c=a+s>>>1,r(t.slice(c))>n?a=c+1:s=c;return i+t.slice(a)}else{for(;a<s;)c=1+(a+s>>>1),r(t.slice(0,c))<n?a=c:s=c-1;return t.slice(0,a)+i}}function j7(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function yx(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ns(e)+"px "+j7(e,t)}function dN(e){var t=e.baseline,n=ns(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*e4(e):t==="line-bottom"?.29*n-.5*e4(e):0)}var Gye={left:"start",center:"middle",right:"end"},L7=new Nn;function xx(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-ql,t+=r*Math.cos(i),n+=r*Math.sin(i)),L7.x1=t,L7.y1=n,L7}function Wye(e,t){var n=t.dx||0,r=(t.dy||0)+dN(t),i=xx(t),o=i.x1,a=i.y1,s=t.angle||0,c;e("text-anchor",Gye[t.align]||"start"),s?(c=Xl(o,a)+" "+oN(s),(n||r)&&(c+=" "+Xl(n,r))):c=Xl(o+n,a+r),e("transform",c)}function pN(e,t,n){var r=T1.height(t),i=t.align,o=xx(t),a=o.x1,s=o.y1,c=t.dx||0,l=(t.dy||0)+dN(t)-Math.round(.8*r),u=U7(t),f;if(F(u)?(r+=e4(t)*(u.length-1),f=u.reduce((d,p)=>Math.max(d,T1.width(t,p)),0)):f=T1.width(t,u),i==="center"?c-=f/2:i==="right"&&(c-=f),e.set(c+=a,l+=s,c+f,l+r),t.angle&&!n)e.rotate(t.angle*J3,a,s);else if(n===2)return e.rotatedPoints(t.angle*J3,a,s);return e}function Yye(e,t,n){I2(t,r=>{var i=r.opacity==null?1:r.opacity,o,a,s,c,l,u,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=yx(r),e.textAlign=r.align||"left",o=xx(r),a=o.x1,s=o.y1,r.angle&&(e.save(),e.translate(a,s),e.rotate(r.angle*J3),a=s=0),a+=r.dx||0,s+=(r.dy||0)+dN(r),u=U7(r),_u(e,r),F(u))for(l=e4(r),c=0;c<u.length;++c)f=t4(r,u[c]),r.fill&&tx(e,r,i)&&e.fillText(f,a,s),r.stroke&&ku(e,r,i)&&e.strokeText(f,a,s),s+=l;else f=t4(r,u),r.fill&&tx(e,r,i)&&e.fillText(f,a,s),r.stroke&&ku(e,r,i)&&e.strokeText(f,a,s);r.angle&&e.restore()}})}function Xye(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=xx(t),s=a.x1,c=a.y1,l=pN(L7,t,1),u=-t.angle*J3,f=Math.cos(u),d=Math.sin(u),p=f*i-d*o+(s-f*s+d*c),h=d*i+f*o+(c-d*s-f*c);return l.contains(p,h)}function Qye(e,t){let n=pN(L7,e,2);return Vu(t,n[0],n[1],n[2],n[3])||Vu(t,n[0],n[1],n[4],n[5])||Vu(t,n[4],n[5],n[6],n[7])||Vu(t,n[2],n[3],n[6],n[7])}var Kye={type:"text",tag:"text",nested:!1,attr:Wye,bound:pN,draw:Yye,pick:hx(Xye),isect:Qye},Zye=sN("trail",Qve,uye),i1={arc:sye,area:fye,group:Sye,image:Hye,line:Lye,path:Nye,rect:Tye,rule:Pye,shape:$ye,symbol:Bye,text:Kye,trail:Zye};function $V(e,t,n){var r=i1[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Nn),e,n)}var pQ={mark:null};function qQ(e,t,n){var r=i1[e.marktype],i=r.bound,o=e.items,a=o&&o.length,s,c,l,u;if(r.nested)return a?l=o[0]:(pQ.mark=e,l=pQ),u=$V(l,i,n),t=t&&t.union(u)||u,t;if(t=t||e.bounds&&e.bounds.clear()||new Nn,a)for(s=0,c=o.length;s<c;++s)t.union($V(o[s],i,n));return e.bounds=t}var Jye=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function GQ(e,t){return JSON.stringify(e,Jye,t)}function WQ(e){let t=typeof e=="string"?JSON.parse(e):e;return YQ(t)}function YQ(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&YQ(n[i]);return t&&qQ(e),e}function Cx(e){arguments.length?this.root=WQ(e):(this.root=XQ({marktype:"group",name:"root",role:"frame"}),this.root.items=[new P7(this.root)])}Cx.prototype={toJSON(e){return GQ(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];let r=XQ(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function XQ(e,t){let n={bounds:new Nn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Q3(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function hN(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function vr(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=Q3(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function Zo(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function QQ(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function q7(e,t){let n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function exe(e,t,n,r){var i=e&&e.mark,o,a;if(i&&(o=i1[i.marktype]).tip){for(a=q7(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=o.tip(i.items,a)}return e}function n4(e,t){this._active=null,this._handlers={},this._loader=e||uu(),this._tooltip=t||txe}function txe(e,t,n,r){e.element().setAttribute("title",r||"")}n4.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){let t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(let r in t)n.push(...t[r]);return n},eventName(e){let t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{let i=new MouseEvent(e.type,e),o=Q3(null,"a");for(let a in r)o.setAttribute(a,r[a]);o.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=exe(t,e,this.canvas(),this._origin);let r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){let t=this.canvas();if(!t)return;let n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),a=i.height(),s=i.x1+r[0]+n.left,c=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,c+=e.y||0;return{x:s,y:c,width:o,height:a,left:s,top:c,right:s+o,bottom:c+a}}};function po(e){this._el=null,this._bgcolor=null,this._loader=new JV(e)}po.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e,t){let n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){let n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){let i=n._call;n._ready=n._loader.ready().then(o=>{o&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};var nxe="keydown",rxe="keypress",ixe="keyup",KQ="dragenter",Zy="dragleave",ZQ="dragover",BV="pointerdown",oxe="pointerup",ix="pointermove",A7="pointerout",JQ="pointerover",UV="mousedown",axe="mouseup",eK="mousemove",jV="mouseout",tK="mouseover",ox="click",sxe="dblclick",cxe="wheel",nK="mousewheel",ax="touchstart",sx="touchmove",cx="touchend",lxe=[nxe,rxe,ixe,KQ,Zy,ZQ,BV,oxe,ix,A7,JQ,UV,axe,eK,jV,tK,ox,sxe,cxe,nK,ax,sx,cx],qV=ix,k7=A7,GV=ox;function yc(e,t){n4.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}var uxe=e=>e===ax||e===sx||e===cx?[ax,sx,cx]:[e];function hQ(e,t){uxe(t).forEach(n=>fxe(e,n))}function fxe(e,t){let n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function H7(e,t,n){t.forEach(r=>e.fire(r,n))}function mQ(e,t,n){return function(r){let i=this._active,o=this.pickEvent(r);o===i?H7(this,e,r):((!i||!i.exit)&&H7(this,n,r),this._active=o,H7(this,t,r),H7(this,e,r))}}function gQ(e){return function(t){H7(this,e,t),this._active=null}}ee(yc,n4,{initialize(e,t,n){return this._canvas=e&&hN(e,"canvas"),[ox,UV,BV,ix,A7,Zy].forEach(r=>hQ(this,r)),n4.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:lxe,DOMMouseScroll(e){this.fire(nK,e)},pointermove:mQ([ix,eK],[JQ,tK],[A7,jV]),dragover:mQ([ZQ],[KQ],[Zy]),pointerout:gQ([A7,jV]),dragleave:gQ([Zy]),pointerdown(e){this._down=this._active,this.fire(BV,e)},mousedown(e){this._down=this._active,this.fire(UV,e)},click(e){this._down===this._active&&(this.fire(ox,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(ax,e,!0)},touchmove(e){this.fire(sx,e,!0)},touchend(e){this.fire(cx,e,!0),this._touch=null},fire(e,t,n){let r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===GV&&r&&r.href?this.handleHref(t,r,r.href):(e===qV||e===k7)&&this.handleTooltip(t,r,e!==k7),i)for(let o=0,a=i.length;o<a;++o)i[o].handler.call(this._obj,t,r)},on(e,t){let n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(hQ(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){let n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){let t=q7(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){let o=this.context();return i1[e.marktype].pick.call(this,o,e,t,n,r,i)}});function dxe(){return typeof window<"u"&&window.devicePixelRatio||1}function pxe(e,t,n,r,i,o){let a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,s=e.getContext("2d"),c=a?dxe():i;e.width=t*c,e.height=n*c;for(let l in o)s[l]=o[l];return a&&c!==1&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=c,s.setTransform(c,0,0,c,c*r[0],c*r[1]),e}function T7(e){po.call(this,e),this._options={},this._redraw=!1,this._dirty=new Nn,this._tempb=new Nn}var vQ=po.prototype,hxe=(e,t,n)=>new Nn().set(0,0,t,n).translate(-e[0],-e[1]);function mxe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}ee(T7,po,{initialize(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Yo(1,1,this._options.type),e&&this._canvas&&(Zo(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),vQ.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(vQ.resize.call(this,e,t,n,r),this._canvas)pxe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let i=this._options.externalContext;i||B("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){let t=this._tempb.clear().union(e.bounds),n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){let n=this.context(),r=this._origin,i=this._width,o=this._height,a=this._dirty,s=hxe(r,i,o);n.save();let c=this._redraw||a.empty()?(this._redraw=!1,s.expand(1)):mxe(n,s.intersect(a),r);return this.clear(-r[0],-r[1],i,o),this.draw(n,e,c,t),n.restore(),a.clear(),this},draw(e,t,n,r){if(t.marktype!=="group"&&r!=null&&!r.includes(t.marktype))return;let i=i1[t.marktype];t.clip&&dye(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()},clear(e,t,n,r){let i=this._options,o=this.context();i.type!=="pdf"&&!i.externalContext&&o.clearRect(e,t,n,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});function mN(e,t){n4.call(this,e,t);let n=this;n._hrefHandler=WV(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=WV(n,(r,i)=>{n.handleTooltip(r,i,r.type!==k7)})}var WV=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};ee(mN,n4,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(GV,this._hrefHandler),r.removeEventListener(qV,this._tooltipHandler),r.removeEventListener(k7,this._tooltipHandler)),this._svg=r=e&&hN(e,"svg"),r&&(r.addEventListener(GV,this._hrefHandler),r.addEventListener(qV,this._tooltipHandler),r.addEventListener(k7,this._tooltipHandler)),n4.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){let n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){let o={type:e,handler:t,listener:WV(this,t)};(r[n]||(r[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){let n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});var rK="aria-hidden",gN="aria-label",vN="role",yN="aria-roledescription",iK="graphics-object",xN="graphics-symbol",oK=(e,t,n)=>({[vN]:e,[yN]:t,[gN]:n||void 0}),gxe=hr(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),yQ={axis:{desc:"axis",caption:xxe},legend:{desc:"legend",caption:Cxe},"title-text":{desc:"title",caption:e=>`Title text '${CQ(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${CQ(e)}'`}},xQ={ariaRole:vN,ariaRoleDescription:yN,description:gN};function aK(e,t){let n=t.aria===!1;if(e(rK,n||void 0),n||t.description==null)for(let r in xQ)e(xQ[r],void 0);else{let r=t.mark.marktype;e(gN,t.description),e(vN,t.ariaRole||(r==="group"?iK:xN)),e(yN,t.ariaRoleDescription||`${r} mark`)}}function sK(e){return e.aria===!1?{[rK]:!0}:gxe[e.role]?null:yQ[e.role]?yxe(e,yQ[e.role]):vxe(e)}function vxe(e){let t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return oK(n?iK:xN,`${t} mark container`,e.description)}function yxe(e,t){try{let n=e.items[0],r=t.caption||(()=>"");return oK(t.role||xN,t.desc,n.description||r(n))}catch{return null}}function CQ(e){return te(e.text).join(" ")}function xxe(e){let t=e.datum,n=e.orient,r=t.title?cK(e):null,i=e.context,o=i.scales[t.scale].value,a=i.dataflow.locale(),s=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${W3(s)?"discrete":s} scale with ${LV(a,o,e)}`}function Cxe(e){let t=e.datum,n=t.title?cK(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),a=e.context,s=a.scales[i[o[0]]].value,c=a.dataflow.locale();return Mxe(r)+(n?` titled '${n}'`:"")+` for ${bxe(o)} with ${LV(c,s,e)}`}function cK(e){try{return te(Ue(e.items).items[0].text).join(" ")}catch{return null}}function bxe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Ue(e)}function Mxe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}var lK=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),wxe=e=>lK(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function CN(){let e="",t="",n="",r=[],i=()=>t=n="",o=c=>{t&&(e+=`${t}>${n}`,i()),r.push(c)},a=(c,l)=>(l!=null&&(t+=` ${c}="${wxe(l)}"`),s),s={open(c){o(c),t="<"+c;for(var l=arguments.length,u=new Array(l>1?l-1:0),f=1;f<l;f++)u[f-1]=arguments[f];for(let d of u)for(let p in d)a(p,d[p]);return s},close(){let c=r.pop();return t?e+=t+(n?`>${n}</${c}>`:"/>"):e+=`</${c}>`,i(),s},attr:a,text:c=>(n+=lK(c),s),toString:()=>e};return s}var uK=e=>fK(CN(),e)+"";function fK(e,t){if(e.open(t.tagName),t.hasAttributes()){let n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){let n=t.childNodes;for(let r of n)r.nodeType===3?e.text(r.nodeValue):fK(e,r)}return e.close()}var lx={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},ux={blend:"mix-blend-mode"},dK={fill:"none","stroke-miterlimit":10},z7=0,bQ="http://www.w3.org/2000/xmlns/",gr=_7.xmlns;function bx(e){po.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var TV=po.prototype;ee(bx,po,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=vr(e,0,"svg",gr),this._svg.setAttributeNS(bQ,"xmlns",gr),this._svg.setAttributeNS(bQ,"xmlns:xlink",_7["xmlns:xlink"]),this._svg.setAttribute("version",_7.version),this._svg.setAttribute("class","marks"),Zo(e,1),this._root=vr(this._svg,z7,"g",gr),K3(this._root,dK),Zo(this._svg,z7+1)),this.background(this._bgcolor),TV.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),TV.background.apply(this,arguments)},resize(e,t,n,r){return TV.resize.call(this,e,t,n,r),this._svg&&(K3(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){let e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=vr(e,z7,"rect",gr),K3(n,{width:this._width,height:this._height,fill:t}));let r=uK(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Zo(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;let e=this._dirty;if(!e.length||!this._dirtyID)return!0;let t=++this._dirtyID,n,r,i,o,a,s,c;for(a=0,s=e.length;a<s;++a)if(n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=i1[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,MQ(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){o.nested&&r.items.length?(c=r.items[0],c._svg&&this._update(o,c._svg,c)):n._svg&&(c=n._svg.parentNode,c&&c.removeChild(n._svg)),n._svg=null;continue}n=o.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,MQ(n,t)):this._update(o,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,r){if(!this.isDirty(t))return t._svg;let i=this._svg,o=t.marktype,a=i1[o],s=t.interactive===!1?"none":null,c=a.tag==="g",l=wQ(t,e,n,"g",i);if(o!=="group"&&r!=null&&!r.includes(o))return Zo(l,0),t._svg;l.setAttribute("class",QQ(t));let u=sK(t);for(let h in u)r1(l,h,u[h]);c||r1(l,"pointer-events",s),r1(l,"clip-path",t.clip?ZV(this,t,t.group):null);let f=null,d=0,p=h=>{let m=this.isDirty(h),g=wQ(h,l,f,a.tag,i);m&&(this._update(a,g,h),c&&Dxe(this,g,h,r)),f=g,++d};return a.nested?t.items.length&&p(t.items[0]):I2(t,p),Zo(l,d),l},_update(e,t,n){vc=t,Ei=t.__values__,aK(V7,n),e.attr(V7,n,this);let r=Hxe[e.type];r&&r.call(this,e,t,n),vc&&this.style(vc,n)},style(e,t){if(t!=null){for(let n in lx){let r=n==="font"?j7(t):t[n];if(r===Ei[n])continue;let i=lx[n];r==null?e.removeAttribute(i):(YV(r)&&(r=DQ(r,this._defs.gradient,pK())),e.setAttribute(i,r+"")),Ei[n]=r}for(let n in ux)Jy(e,ux[n],t[n])}},defs(){let e=this._svg,t=this._defs,n=t.el,r=0;for(let i in t.gradient)n||(t.el=n=vr(e,z7+1,"defs",gr)),r=Sxe(n,t.gradient[i],r);for(let i in t.clipping)n||(t.el=n=vr(e,z7+1,"defs",gr)),r=Exe(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):Zo(n,r))},_clearDefs(){let e=this._defs;e.gradient={},e.clipping={}}});function MQ(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Sxe(e,t,n){let r,i,o;if(t.gradient==="radial"){let a=vr(e,n++,"pattern",gr);K3(a,{id:ex+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=vr(a,0,"rect",gr),K3(a,{width:1,height:1,fill:`url(${pK()}#${t.id})`}),e=vr(e,n++,"radialGradient",gr),K3(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=vr(e,n++,"linearGradient",gr),K3(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=vr(e,r,"stop",gr),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return Zo(e,r),n}function Exe(e,t,n){let r;return e=vr(e,n,"clipPath",gr),e.setAttribute("id",t.id),t.path?(r=vr(e,0,"path",gr),r.setAttribute("d",t.path)):(r=vr(e,0,"rect",gr),K3(r,{x:0,y:0,width:t.width,height:t.height})),Zo(e,1),n+1}function Dxe(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;I2(n,a=>{i=e.mark(t,a,i,r),++o}),Zo(t,1+o)}function wQ(e,t,n,r,i){let o=e._svg,a;if(!o&&(a=t.ownerDocument,o=Q3(a,r,gr),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){let s=Q3(a,"path",gr);o.appendChild(s),s.__data__=e;let c=Q3(a,"g",gr);o.appendChild(c),c.__data__=e;let l=Q3(a,"path",gr);o.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(o.ownerSVGElement!==i||zxe(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function zxe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}var vc=null,Ei=null,Hxe={group(e,t,n){let r=vc=t.childNodes[2];Ei=r.__values__,e.foreground(V7,n,this),Ei=t.__values__,vc=t.childNodes[1],e.content(V7,n,this);let i=vc=t.childNodes[0];e.background(V7,n,this);let o=n.mark.interactive===!1?"none":null;if(o!==Ei.events&&(r1(r,"pointer-events",o),r1(i,"pointer-events",o),Ei.events=o),n.strokeForeground&&n.stroke){let a=n.fill;r1(r,"display",null),this.style(i,n),r1(i,"stroke",null),a&&(n.fill=null),Ei=r.__values__,this.style(r,n),a&&(n.fill=a),vc=null}else r1(r,"display","none")},image(e,t,n){n.smooth===!1?(Jy(t,"image-rendering","optimizeSpeed"),Jy(t,"image-rendering","pixelated")):Jy(t,"image-rendering",null)},text(e,t,n){let r=U7(n),i,o,a,s;F(r)?(o=r.map(c=>t4(n,c)),i=o.join(`
`),i!==Ei.text&&(Zo(t,0),a=t.ownerDocument,s=e4(n),o.forEach((c,l)=>{let u=Q3(a,"tspan",gr);u.__data__=n,u.textContent=c,l&&(u.setAttribute("x",0),u.setAttribute("dy",s)),t.appendChild(u)}),Ei.text=i)):(o=t4(n,r),o!==Ei.text&&(t.textContent=o,Ei.text=o)),r1(t,"font-family",j7(n)),r1(t,"font-size",ns(n)+"px"),r1(t,"font-style",n.fontStyle),r1(t,"font-variant",n.fontVariant),r1(t,"font-weight",n.fontWeight)}};function V7(e,t,n){t!==Ei[e]&&(n?Lxe(vc,e,t,n):r1(vc,e,t),Ei[e]=t)}function Jy(e,t,n){n!==Ei[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Ei[t]=n)}function K3(e,t){for(let n in t)r1(e,n,t[n])}function r1(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Lxe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function pK(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function bN(e){po.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}ee(bN,po,{svg(){return this._text},_render(e){let t=CN();t.open("svg",Te({},_7,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",dK,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){let n=i1[t.marktype],r=n.tag,i=[aK,n.attr];e.open("g",{class:QQ(t),"clip-path":t.clip?ZV(this,t,t.group):null},sK(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});let o=a=>{let s=this.href(a);if(s&&e.open("a",s),e.open(r,this.attr(t,a,i,r!=="g"?r:null)),r==="text"){let c=U7(a);if(F(c)){let l={x:0,dy:e4(a)};for(let u=0;u<c.length;++u)e.open("tspan",u?l:null).text(t4(a,c[u])).close()}else e.text(t4(a,c))}else if(r==="g"){let c=a.strokeForeground,l=a.fill,u=a.stroke;c&&u&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),I2(a,f=>this.mark(e,f)),e.close(),c&&u?(l&&(a.fill=null),a.stroke=u,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),l&&(a.fill=l)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),s&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):I2(t,o),e.close()},href(e){let t=e.href,n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){let i={},o=(a,s,c,l)=>{i[l||a]=s};return Array.isArray(n)?n.forEach(a=>a(o,t,this)):n(o,t,this),r&&Axe(i,t,e,r,this._defs),i},defs(e){let t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(let i in t){let o=t[i],a=o.stops;o.gradient==="radial"?(e.open("pattern",{id:ex+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:i,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let s=0;s<a.length;++s)e.open("stop",{offset:a[s].offset,"stop-color":a[s].color}).close();e.close()}for(let i in n){let o=n[i];e.open("clipPath",{id:i}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});function Axe(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=j7(t),e["font-size"]=ns(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(let a in lx){let s=t[a],c=lx[a];s==="transparent"&&(c==="fill"||c==="stroke")||s!=null&&(YV(s)&&(s=DQ(s,i.gradient,"")),e[c]=s)}for(let a in ux){let s=t[a];s!=null&&(o=o||[],o.push(`${ux[a]}: ${s};`))}return o&&(e.style=o.join(" ")),e}var T2={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Vxe(e){T2.svgMarkTypes=e.svgMarkTypes??["text"],T2.svgOnTop=e.svgOnTop??!0,T2.debug=e.debug??!1}function fx(e){po.call(this,e),this._svgRenderer=new bx(e),this._canvasRenderer=new T7(e)}var SQ=po.prototype;ee(fx,po,{initialize(e,t,n,r,i){this._root_el=vr(e,0,"div");let o=vr(this._root_el,0,"div"),a=vr(this._root_el,1,"div");return this._root_el.style.position="relative",T2.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=T2.svgOnTop?a:o,this._canvasEl=T2.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),SQ.initialize.call(this,e,t,n,r,i)},dirty(e){return T2.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){let r=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(i=>!T2.svgMarkTypes.includes(i));this._svgRenderer.render(e,T2.svgMarkTypes),this._canvasRenderer.render(e,r)},resize(e,t,n,r){return SQ.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background(e){return T2.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function MN(e,t){yc.call(this,e,t)}ee(MN,yc,{initialize(e,t,n){let r=vr(vr(e,0,"div"),T2.svgOnTop?0:1,"div");return yc.prototype.initialize.call(this,r,t,n)}});var hK="canvas",mK="hybrid",gK="png",vK="svg",yK="none",xc={Canvas:hK,PNG:gK,SVG:vK,Hybrid:mK,None:yK},Kl={};Kl[hK]=Kl[gK]={renderer:T7,headless:T7,handler:yc};Kl[vK]={renderer:bx,headless:bN,handler:mN};Kl[mK]={renderer:fx,headless:fx,handler:MN};Kl[yK]={};function G7(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Kl[e]=t,this):Kl[e]}function wN(e,t,n){let r=[],i=new Nn().union(t),o=e.marktype;return o?xK(e,i,n,r):o==="group"?CK(e,i,n,r):B("Intersect scene must be mark node or group item.")}function xK(e,t,n,r){if(Nxe(e,t,n)){let i=e.items,o=e.marktype,a=i.length,s=0;if(o==="group")for(;s<a;++s)CK(i[s],t,n,r);else for(let c=i1[o].isect;s<a;++s){let l=i[s];bK(l,t,c)&&r.push(l)}}return r}function Nxe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function CK(e,t,n,r){n&&n(e.mark)&&bK(e,t,i1.group.isect)&&r.push(e);let i=e.items,o=i&&i.length;if(o){let a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let c=0;c<o;++c)xK(i[c],t,n,r);t.translate(a,s)}return r}function bK(e,t,n){let r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}var IV=new Nn;function SN(e){let t=e.clip;if(Ie(t))t($7(IV.clear()));else if(t)IV.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(IV)}var _xe=1e-9;function EN(e,t,n){return e===t?!0:n==="path"?MK(e,t):e instanceof Date&&t instanceof Date?+e==+t:Oe(e)&&Oe(t)?Math.abs(e-t)<=_xe:!e||!t||!ne(e)&&!ne(t)?e==t:kxe(e,t)}function MK(e,t){return EN(Ql(e),Ql(t))}function kxe(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!EN(e[i],t[i],i))return!1;return typeof e==typeof t}function Txe(){NQ(),ove()}var Ru="top",F2="left",R2="right",o4="bottom",Ixe="top-left",Fxe="top-right",Rxe="bottom-left",Oxe="bottom-right",HN="start",DN="middle",o1="end",Pxe="x",$xe="y",Dx="group",LN="axis",AN="title",Bxe="frame",Uxe="scope",VN="legend",NK="row-header",_K="row-footer",kK="row-title",TK="column-header",IK="column-footer",FK="column-title",jxe="padding",qxe="symbol",RK="fit",OK="fit-x",PK="fit-y",Gxe="pad",NN="none",Mx="all",zN="each",_N="flush",r4="column",i4="row";function $K(e){$.call(this,null,e)}ee($K,$,{transform(e,t){let n=t.dataflow,r=e.mark,i=r.marktype,o=i1[i],a=o.bound,s=r.bounds,c;if(o.nested)r.items.length&&n.dirty(r.items[0]),s=wx(r,a),r.items.forEach(l=>{l.bounds.clear().union(s)});else if(i===Dx||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),s.clear(),r.items.forEach(l=>s.union(wx(l,a))),r.role){case LN:case VN:case AN:t.reflow()}else c=t.changed(t.REM),t.visit(t.ADD,l=>{s.union(wx(l,a))}),t.visit(t.MOD,l=>{c=c||s.alignsWith(l.bounds),n.dirty(l),s.union(wx(l,a))}),c&&(s.clear(),r.items.forEach(l=>s.union(l.bounds)));return SN(r),t.modifies("bounds")}});function wx(e,t,n){return t(e.bounds.clear(),e,n)}var wK=":vega_identifier:";function kN(e){$.call(this,0,e)}kN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ee(kN,$,{transform(e,t){let n=Wxe(t.dataflow),r=e.as,i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function Wxe(e){return e._signals[wK]||(e._signals[wK]=e.add(0))}function BK(e){$.call(this,null,e)}ee(BK,$,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Yxe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);let r=n.marktype===Dx?P7:O7;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Yxe(e){let t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function UK(e){$.call(this,null,e)}var SK={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!jK(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},jK=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),EK=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(jK(i,o=e[n].bounds,t))return!0},Xxe=e=>{let t=e.bounds;return t.width()>1&&t.height()>1},Qxe=(e,t,n)=>{var r=e.range(),i=new Nn;return t===Ru||t===o4?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},DK=e=>(e.forEach(t=>t.opacity=1),e),zK=(e,t)=>e.reflow(t.modified()).modifies("opacity");ee(UK,$,{transform(e,t){let n=SK[e.method]||SK.parity,r=e.separation||0,i=t.materialize(t.SOURCE).source,o,a;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(DK(i),t=zK(t,e)),t;if(i=i.filter(Xxe),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=DK(i),t=zK(t,e),o.length>=3&&EK(o,r)){do o=n(o,r);while(o.length>=3&&EK(o,r));o.length<3&&!Ue(i).opacity&&(o.length>1&&(Ue(o).opacity=0),Ue(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=Qxe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(c=>{a(c)||(c.opacity=0)}));let s=o[0].mark.bounds.clear();return i.forEach(c=>{c.opacity&&s.union(c.bounds)}),t}});function qK(e){$.call(this,null,e)}ee(qK,$,{transform(e,t){let n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){let r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});var Di=new Nn;function Fu(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Kxe(e){var t=e.items[0].orient;return t===F2||t===R2}function Zxe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Jxe(e,t,n,r){var i=t.items[0],o=i.datum,a=i.translate!=null?i.translate:.5,s=i.orient,c=Zxe(o),l=i.range,u=i.offset,f=i.position,d=i.minExtent,p=i.maxExtent,h=o.title&&i.items[c[2]].items[0],m=i.titlePadding,g=i.bounds,v=h&&vx(h),y=0,C=0,b,M;switch(Di.clear().union(g),g.clear(),(b=c[0])>-1&&g.union(i.items[b].bounds),(b=c[1])>-1&&g.union(i.items[b].bounds),s){case Ru:y=f||0,C=-u,M=Math.max(d,Math.min(p,-g.y1)),g.add(0,-M).add(l,0),h&&Sx(e,h,M,m,v,0,-1,g);break;case F2:y=-u,C=f||0,M=Math.max(d,Math.min(p,-g.x1)),g.add(-M,0).add(0,l),h&&Sx(e,h,M,m,v,1,-1,g);break;case R2:y=n+u,C=f||0,M=Math.max(d,Math.min(p,g.x2)),g.add(0,0).add(M,l),h&&Sx(e,h,M,m,v,1,1,g);break;case o4:y=f||0,C=r+u,M=Math.max(d,Math.min(p,g.y2)),g.add(0,0).add(l,M),h&&Sx(e,h,M,m,0,0,1,g);break;default:y=i.x,C=i.y}return ts(g.translate(y,C),i),Fu(i,"x",y+a)|Fu(i,"y",C+a)&&(i.bounds=Di,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function Sx(e,t,n,r,i,o,a,s){let c=t.bounds;if(t.auto){let l=a*(n+i+r),u=0,f=0;e.dirty(t),o?u=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(c.translate(-u,-f)),e.dirty(t)}s.union(c)}var HK=(e,t)=>Math.floor(Math.min(e,t)),LK=(e,t)=>Math.ceil(Math.max(e,t));function eCe(e){var t=e.items,n=t.length,r=0,i,o;let a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===Dx)switch(i.role){case LN:case VN:case AN:break;case NK:a.rowheaders.push(...o);break;case _K:a.rowfooters.push(...o);break;case TK:a.colheaders.push(...o);break;case IK:a.colfooters.push(...o);break;case kK:a.rowtitle=o[0];break;case FK:a.coltitle=o[0];break;default:a.marks.push(...o)}return a}function tCe(e){return new Nn().set(0,0,e.width||0,e.height||0)}function nCe(e){let t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function vn(e,t,n){let r=ne(e)?e[t]:e;return r??(n!==void 0?n:0)}function AK(e){return e<0?Math.ceil(-e):0}function GK(e,t,n){var r=!n.nodirty,i=n.bounds===_N?tCe:nCe,o=Di.set(0,0,0,0),a=vn(n.align,r4),s=vn(n.align,i4),c=vn(n.padding,r4),l=vn(n.padding,i4),u=n.columns||t.length,f=u<=0?1:Math.ceil(t.length/u),d=t.length,p=Array(d),h=Array(u),m=0,g=Array(d),v=Array(f),y=0,C=Array(d),b=Array(d),M=Array(d),S,w,E,D,L,A,j,V,_,N,I;for(w=0;w<u;++w)h[w]=0;for(w=0;w<f;++w)v[w]=0;for(w=0;w<d;++w)A=t[w],L=M[w]=i(A),A.x=A.x||0,C[w]=0,A.y=A.y||0,b[w]=0,E=w%u,D=~~(w/u),m=Math.max(m,j=Math.ceil(L.x2)),y=Math.max(y,V=Math.ceil(L.y2)),h[E]=Math.max(h[E],j),v[D]=Math.max(v[D],V),p[w]=c+AK(L.x1),g[w]=l+AK(L.y1),r&&e.dirty(t[w]);for(w=0;w<d;++w)w%u===0&&(p[w]=0),w<u&&(g[w]=0);if(a===zN)for(E=1;E<u;++E){for(I=0,w=E;w<d;w+=u)I<p[w]&&(I=p[w]);for(w=E;w<d;w+=u)p[w]=I+h[E-1]}else if(a===Mx){for(I=0,w=0;w<d;++w)w%u&&I<p[w]&&(I=p[w]);for(w=0;w<d;++w)w%u&&(p[w]=I+m)}else for(a=!1,E=1;E<u;++E)for(w=E;w<d;w+=u)p[w]+=h[E-1];if(s===zN)for(D=1;D<f;++D){for(I=0,w=D*u,S=w+u;w<S;++w)I<g[w]&&(I=g[w]);for(w=D*u;w<S;++w)g[w]=I+v[D-1]}else if(s===Mx){for(I=0,w=u;w<d;++w)I<g[w]&&(I=g[w]);for(w=u;w<d;++w)g[w]=I+y}else for(s=!1,D=1;D<f;++D)for(w=D*u,S=w+u;w<S;++w)g[w]+=v[D-1];for(_=0,w=0;w<d;++w)_=p[w]+(w%u?_:0),C[w]+=_-t[w].x;for(E=0;E<u;++E)for(N=0,w=E;w<d;w+=u)N+=g[w],b[w]+=N-t[w].y;if(a&&vn(n.center,r4)&&f>1)for(w=0;w<d;++w)L=a===Mx?m:h[w%u],_=L-M[w].x2-t[w].x-C[w],_>0&&(C[w]+=_/2);if(s&&vn(n.center,i4)&&u!==1)for(w=0;w<d;++w)L=s===Mx?y:v[~~(w/u)],N=L-M[w].y2-t[w].y-b[w],N>0&&(b[w]+=N/2);for(w=0;w<d;++w)o.union(M[w].translate(C[w],b[w]));switch(_=vn(n.anchor,Pxe),N=vn(n.anchor,$xe),vn(n.anchor,r4)){case o1:_-=o.width();break;case DN:_-=o.width()/2}switch(vn(n.anchor,i4)){case o1:N-=o.height();break;case DN:N-=o.height()/2}for(_=Math.round(_),N=Math.round(N),o.clear(),w=0;w<d;++w)t[w].mark.bounds.clear();for(w=0;w<d;++w)A=t[w],A.x+=C[w]+=_,A.y+=b[w]+=N,o.union(A.mark.bounds.union(A.bounds.translate(C[w],b[w]))),r&&e.dirty(A);return o}function rCe(e,t,n){var r=eCe(t),i=r.marks,o=n.bounds===_N?iCe:oCe,a=n.offset,s=n.columns||i.length,c=s<=0?1:Math.ceil(i.length/s),l=c*s,u,f,d,p,h,m,g;let v=GK(e,i,n);v.empty()&&v.set(0,0,0,0),r.rowheaders&&(m=vn(n.headerBand,i4,null),u=Ex(e,r.rowheaders,i,s,c,-vn(a,"rowHeader"),HK,0,o,"x1",0,s,1,m)),r.colheaders&&(m=vn(n.headerBand,r4,null),f=Ex(e,r.colheaders,i,s,s,-vn(a,"columnHeader"),HK,1,o,"y1",0,1,s,m)),r.rowfooters&&(m=vn(n.footerBand,i4,null),d=Ex(e,r.rowfooters,i,s,c,vn(a,"rowFooter"),LK,0,o,"x2",s-1,s,1,m)),r.colfooters&&(m=vn(n.footerBand,r4,null),p=Ex(e,r.colfooters,i,s,s,vn(a,"columnFooter"),LK,1,o,"y2",l-s,1,s,m)),r.rowtitle&&(h=vn(n.titleAnchor,i4),g=vn(a,"rowTitle"),g=h===o1?d+g:u-g,m=vn(n.titleBand,i4,.5),VK(e,r.rowtitle,g,0,v,m)),r.coltitle&&(h=vn(n.titleAnchor,r4),g=vn(a,"columnTitle"),g=h===o1?p+g:f-g,m=vn(n.titleBand,r4,.5),VK(e,r.coltitle,g,1,v,m))}function iCe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function oCe(e,t){return e.bounds[t]}function Ex(e,t,n,r,i,o,a,s,c,l,u,f,d,p){var h=n.length,m=0,g=0,v,y,C,b,M,S,w,E,D;if(!h)return m;for(v=u;v<h;v+=f)n[v]&&(m=a(m,c(n[v],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=o,y=0,b=t.length;y<b;++y)e.dirty(t[y]),t[y].mark.bounds.clear();for(v=u,y=0,b=t.length;y<b;++y,v+=f){for(S=t[y],M=S.mark.bounds,C=v;C>=0&&(w=n[C])==null;C-=d);s?(E=p==null?w.x:Math.round(w.bounds.x1+p*w.bounds.width()),D=m):(E=m,D=p==null?w.y:Math.round(w.bounds.y1+p*w.bounds.height())),M.union(S.bounds.translate(E-(S.x||0),D-(S.y||0))),S.x=E,S.y=D,e.dirty(S),g=a(g,M[l])}return g}function VK(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function aCe(e,t){let n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function sCe(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function cCe(e,t,n,r,i,o,a){let s=aCe(n,t),c=sCe(e,s("offset",0)),l=s("anchor",HN),u=l===o1?1:l===DN?.5:0,f={align:zN,bounds:s("bounds",_N),columns:s("direction")==="vertical"?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case F2:f.anchor={x:Math.floor(r.x1)-c,column:o1,y:u*(a||r.height()+2*r.y1),row:l};break;case R2:f.anchor={x:Math.ceil(r.x2)+c,y:u*(a||r.height()+2*r.y1),row:l};break;case Ru:f.anchor={y:Math.floor(i.y1)-c,row:o1,x:u*(o||i.width()+2*i.x1),column:l};break;case o4:f.anchor={y:Math.ceil(i.y2)+c,x:u*(o||i.width()+2*i.x1),column:l};break;case Ixe:f.anchor={x:c,y:c};break;case Fxe:f.anchor={x:o-c,y:c,column:o1};break;case Rxe:f.anchor={x:c,y:a-c,row:o1};break;case Oxe:f.anchor={x:o-c,y:a-c,column:o1,row:o1};break}return f}function lCe(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,a=n.x,s=n.y,c,l;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),fCe(e,n,n.items[0].items[0]),o=uCe(n,o),c=2*n.padding,l=2*n.padding,o.empty()||(c=Math.ceil(o.width()+c),l=Math.ceil(o.height()+l)),r.type===qxe&&dCe(n.items[0].items[0].items[0].items),i!==NN&&(n.x=a=0,n.y=s=0),n.width=c,n.height=l,ts(o.set(a,s,a+c,s+l),n),n.mark.bounds.clear().union(o),n}function uCe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function fCe(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&W7(e,n,i,o);else{var a=t.items[1].items[0],s=a.anchor,c=t.titlePadding||0,l=r-a.x,u=r-a.y;switch(a.orient){case F2:i+=Math.ceil(a.bounds.width())+c;break;case R2:case o4:break;default:o+=a.bounds.height()+c}switch((i||o)&&W7(e,n,i,o),a.orient){case F2:u+=Iu(t,n,a,s,1,1);break;case R2:l+=Iu(t,n,a,o1,0,0)+c,u+=Iu(t,n,a,s,1,1);break;case o4:l+=Iu(t,n,a,s,0,0),u+=Iu(t,n,a,o1,-1,0,1)+c;break;default:l+=Iu(t,n,a,s,0,0)}(l||u)&&W7(e,a,l,u),(l=Math.round(a.bounds.x1-r))<0&&(W7(e,n,-l,0),W7(e,a,-l,0))}}function Iu(e,t,n,r,i,o,a){let s=e.datum.type!=="symbol",c=n.datum.vgrad,l=s&&(o||!c)&&!a?t.items[0]:t,u=l.bounds[i?"y2":"x2"]-e.padding,f=c&&o?u:0,d=c&&o?0:u,p=i<=0?0:vx(n);return Math.round(r===HN?f:r===o1?d-p:.5*(u-p))}function W7(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function dCe(e){let t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function pCe(e,t,n,r,i){var o=t.items[0],a=o.frame,s=o.orient,c=o.anchor,l=o.offset,u=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],p=s===F2||s===R2?r:n,h=0,m=0,g=0,v=0,y=0,C;if(a!==Dx?s===F2?(h=i.y2,p=i.y1):s===R2?(h=i.y1,p=i.y2):(h=i.x1,p=i.x2):s===F2&&(h=r,p=0),C=c===HN?h:c===o1?p:(h+p)/2,d&&d.text){switch(s){case Ru:case o4:y=f.bounds.height()+u;break;case F2:v=f.bounds.width()+u;break;case R2:v=-f.bounds.width()-u;break}Di.clear().union(d.bounds),Di.translate(v-(d.x||0),y-(d.y||0)),Fu(d,"x",v)|Fu(d,"y",y)&&(e.dirty(d),d.bounds.clear().union(Di),d.mark.bounds.clear().union(Di),e.dirty(d)),Di.clear().union(d.bounds)}else Di.clear();switch(Di.union(f.bounds),s){case Ru:m=C,g=i.y1-Di.height()-l;break;case F2:m=i.x1-Di.width()-l,g=C;break;case R2:m=i.x2+Di.width()+l,g=C;break;case o4:m=C,g=i.y2+l;break;default:m=o.x,g=o.y}return Fu(o,"x",m)|Fu(o,"y",g)&&(Di.translate(m,g),e.dirty(o),o.bounds.clear().union(Di),t.bounds.clear().union(Di),e.dirty(o)),o.bounds}function WK(e){$.call(this,null,e)}ee(WK,$,{transform(e,t){let n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&rCe(n,r,e.layout),mCe(n,r,e)}),hCe(e.mark.group)?t.reflow():t}});function hCe(e){return e&&e.mark.role!=="legend-entry"}function mCe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),a=new Nn().set(0,0,i,o),s=a.clone(),c=a.clone(),l=[],u,f,d,p,h,m;for(h=0,m=r.length;h<m;++h)switch(f=r[h],f.role){case LN:p=Kxe(f)?s:c,p.union(Jxe(e,f,i,o));break;case AN:u=f;break;case VN:l.push(lCe(e,f));break;case Bxe:case Uxe:case NK:case _K:case kK:case TK:case IK:case FK:s.union(f.bounds),c.union(f.bounds);break;default:a.union(f.bounds)}if(l.length){let g={};l.forEach(v=>{d=v.orient||R2,d!==NN&&(g[d]||(g[d]=[])).push(v)});for(let v in g){let y=g[v];GK(e,y,cCe(y,v,n.legends,s,c,i,o))}l.forEach(v=>{let y=v.bounds;if(y.equals(v._bounds)||(v.bounds=v._bounds,e.dirty(v),v.bounds=y,e.dirty(v)),n.autosize&&(n.autosize.type===RK||n.autosize.type===OK||n.autosize.type===PK))switch(v.orient){case F2:case R2:a.add(y.x1,0).add(y.x2,0);break;case Ru:case o4:a.add(0,y.y1).add(0,y.y2)}else a.union(y)})}a.union(s).union(c),u&&a.union(pCe(e,u,i,o,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),gCe(e,t,a,n)}function gCe(e,t,n,r){let i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,c=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),u=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1)),d=Math.max(0,Math.ceil(n.x2-c)),p=Math.max(0,Math.ceil(n.y2-u));if(i.contains===jxe){let h=e.padding();a-=h.left+h.right,s-=h.top+h.bottom}o===NN?(l=0,f=0,c=a,u=s):o===RK?(c=Math.max(0,a-l-d),u=Math.max(0,s-f-p)):o===OK?(c=Math.max(0,a-l-d),s=u+f+p):o===PK?(a=c+l+d,u=Math.max(0,s-f-p)):o===Gxe&&(a=c+l+d,s=u+f+p),e._resizeView(a,s,c,u,[l,f],i.resize)}var PN={};br(PN,{axisticks:()=>KK,datajoin:()=>ZK,encode:()=>JK,legendentries:()=>eZ,linkpath:()=>FN,pie:()=>RN,scale:()=>oZ,sortitems:()=>sZ,stack:()=>ON});function KK(e){$.call(this,null,e)}ee(KK,$,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,s=jy(o,a,e.minstep),c=e.format||DV(n,o,s,e.formatSpecifier,e.formatType,!!e.values),l=e.values?EV(o,e.values,s):qy(o,s);return i&&(r.rem=i),i=l.map((u,f)=>at({index:f/(l.length-1||1),value:u,label:c(u)})),e.extra&&i.length&&i.push(at({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function ZK(e){$.call(this,null,e)}function vCe(){return at({})}function yCe(e){let t=S3().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ee(ZK,$,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||vCe,o=e.key||Ee,a=this.value;return F(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&B("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=yCe(o)),t.visit(t.ADD,s=>{let c=o(s),l=a.get(c);l?l.exit?(a.empty--,r.add.push(l)):r.mod.push(l):(l=i(s),a.set(c,l),r.add.push(l)),l.datum=s,l.exit=!1}),t.visit(t.MOD,s=>{let c=o(s),l=a.get(c);l&&(l.datum=s,r.mod.push(l))}),t.visit(t.REM,s=>{let c=o(s),l=a.get(c);s===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}});function JK(e){$.call(this,null,e)}ee(JK,$,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(F(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var a=o==="enter",s=i.update||Js,c=i.enter||Js,l=i.exit||Js,u=(o&&!a?i[o]:s)||Js;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{c(f,e),s(f,e)}),n.modifies(c.output),n.modifies(s.output),u!==Js&&u!==s&&(t.visit(t.ADD,f=>{u(f,e)}),n.modifies(u.output))),t.changed(t.REM)&&l!==Js&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),a||u!==Js){let f=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(f,d=>{let p=c(d,e)||r;(u(d,e)||p)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)):t.visit(f,d=>{(u(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)}return n.changed()?n:t.StopPropagation}});function eZ(e){$.call(this,[],e)}ee(eZ,$,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||E7,a=e.scale,s=+e.limit,c=jy(a,e.count==null?5:e.count,e.minstep),l=!!e.values||o===E7,u=e.format||HV(n,a,c,o,e.formatSpecifier,e.formatType,l),f=e.values||zV(a,c),d,p,h,m,g;return i&&(r.rem=i),o===E7?(s&&f.length>s?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,s-1),g=!0):i=f,Ie(h=e.size)?(!e.values&&a(i[0])===0&&(i=i.slice(1)),m=i.reduce((v,y)=>Math.max(v,h(y,e)),0)):h=hn(m=h||8),i=i.map((v,y)=>at({index:y,label:u(v,y,i),value:v,offset:m,size:h(v,e)})),g&&(g=f[i.length],i.push(at({index:i.length,label:`\u2026${f.length-i.length} entries`,value:g,offset:m,size:h(g,e)})))):o===QX?(d=a.domain(),p=Uy(a,d[0],Ue(d)),f.length<3&&!e.values&&d[0]!==Ue(d)&&(f=[d[0],Ue(d)]),i=f.map((v,y)=>at({index:y,label:u(v,y,f),value:v,perc:p(v)}))):(h=f.length-1,p=JX(a),i=f.map((v,y)=>at({index:y,label:u(v,y,f),value:v,perc:y?p(v):0,perc2:y===h?1:p(f[y+1])}))),r.source=i,r.add=i,this.value=i,r}});var xCe=e=>e.source.x,CCe=e=>e.source.y,bCe=e=>e.target.x,MCe=e=>e.target.y;function FN(e){$.call(this,{},e)}FN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ee(FN,$,{transform(e,t){var n=e.sourceX||xCe,r=e.sourceY||CCe,i=e.targetX||bCe,o=e.targetY||MCe,a=e.as||"path",s=e.orient||"vertical",c=e.shape||"line",l=YK.get(c+"-"+s)||YK.get(c);return l||B("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,u=>{u[a]=l(n(u),r(u),i(u),o(u))}),t.reflow(e.modified()).modifies(a)}});var tZ=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,wCe=(e,t,n,r)=>tZ(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),nZ=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.hypot(i,o)/2,s=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+s+" 0 1 "+n+","+r},SCe=(e,t,n,r)=>nZ(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),rZ=(e,t,n,r)=>{let i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},ECe=(e,t,n,r)=>rZ(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),DCe=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,zCe=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,HCe=(e,t,n,r)=>{let i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),c=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(c?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},LCe=(e,t,n,r)=>{let i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},ACe=(e,t,n,r)=>{let i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},VCe=(e,t,n,r)=>{let i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),c=(t+r)/2;return"M"+t*i+","+t*o+"C"+c*i+","+c*o+" "+c*a+","+c*s+" "+r*a+","+r*s},YK=S3({line:tZ,"line-radial":wCe,arc:nZ,"arc-radial":SCe,curve:rZ,"curve-radial":ECe,"orthogonal-horizontal":DCe,"orthogonal-vertical":zCe,"orthogonal-radial":HCe,"diagonal-horizontal":LCe,"diagonal-vertical":ACe,"diagonal-radial":VCe});function RN(e){$.call(this,null,e)}RN.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ee(RN,$,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||Oa,a=e.startAngle||0,s=e.endAngle!=null?e.endAngle:2*Math.PI,c=t.source,l=c.map(o),u=l.length,f=a,d=(s-a)/tu(l),p=Gn(u),h,m,g;for(e.sort&&p.sort((v,y)=>l[v]-l[y]),h=0;h<u;++h)g=l[p[h]],m=c[p[h]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});var NCe=5;function _Ce(e){let t=e.type;return!e.bins&&(t===Bl||t===zu||t===Hu)}function iZ(e){return M7(e)&&e!==_2}var kCe=hr(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function oZ(e){$.call(this,null,e),this.modified(!0)}ee(oZ,$,{transform(e,t){var n=t.dataflow,r=this.value,i=TCe(e);(!r||i!==r.type)&&(this.value=r=lt(i)());for(i in e)if(!kCe[i]){if(i==="padding"&&iZ(r.type))continue;Ie(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return $Ce(r,e,PCe(r,e,FCe(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function TCe(e){var t=e.type,n="",r;return t===_2?_2+"-"+Bl:(ICe(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?_2+"-":r===3?Ul+"-":""),(n+t||Bl).toLowerCase())}function ICe(e){let t=e.type;return M7(t)&&t!==q3&&t!==G3&&(e.scheme||e.range&&e.range.length&&e.range.every(Q))}function FCe(e,t,n){let r=RCe(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,a=t.zero||t.zero===void 0&&_Ce(e),s,c;if(!i)return 0;if(iZ(o)&&t.padding&&i[0]!==Ue(i)&&(i=OCe(o,i,t.range,t.padding,t.exponent,t.constant)),(a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(s=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[s]<0&&(i[s]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[s]=t.domainMax),t.domainMid!=null)){c=t.domainMid;let l=c>i[s]?s+1:c<i[0]?0:s;l!==s&&n.warn("Scale domainMid exceeds domain min or max.",c),i.splice(l,0,c)}return e.domain(aZ(o,i,n)),o===Fy&&e.unknown(t.domainImplicit?vu:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&jy(e,t.nice)||null),i.length}function RCe(e,t,n){return t?(e.domain(aZ(e.type,t,n)),t.length):-1}function OCe(e,t,n,r,i,o){var a=Math.abs(Ue(n)-n[0]),s=a/(a-2*r),c=e===Za?nd(t,null,s):e===Hu?K6(t,null,s,.5):e===zu?K6(t,null,s,i||1):e===v7?rd(t,null,s,o||1):td(t,null,s);return t=t.slice(),t[0]=c[0],t[t.length-1]=c[1],t}function aZ(e,t,n){if(MV(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Z(t))}return t}function PCe(e,t,n){let r=t.bins;if(r&&!F(r)){let i=e.domain(),o=i[0],a=Ue(i),s=r.step,c=r.start==null?o:r.start,l=r.stop==null?a:r.stop;s||B("Scale bins parameter missing step property."),c<o&&(c=s*Math.ceil(o/s)),l>a&&(l=s*Math.floor(a/s)),r=Gn(c,l+s/2,s)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Oy&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function $Ce(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=BCe(r,t,n);else if(t.scheme&&(o=UCe(r,t,n),Ie(o))){if(e.interpolator)return e.interpolator(o);B(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&wV(r))return e.interpolator(Lu(IN(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(w7(t.interpolate,t.interpolateGamma)):Ie(e.round)?e.round(i):Ie(e.rangeRound)&&e.interpolate(i?Qa:wi),o&&e.range(IN(o,t.reverse))}function BCe(e,t,n){e!==vV&&e!==Ry&&B("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===Ry?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*g7(n,i,r)]}function UCe(e,t,n){var r=t.schemeExtent,i,o;return F(t.scheme)?o=Lu(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=S7(i),o||B(`Unrecognized scheme name: ${t.scheme}`)),n=e===x7?n+1:e===Oy?n-1:e===$l||e===y7?+t.schemeCount||NCe:n,wV(e)?XK(o,r,t.reverse):Ie(o)?By(XK(o,r),n):e===Fy?o:o.slice(0,n)}function XK(e,t,n){return Ie(e)&&(t||n)?$y(e,IN(t||[0,1],n)):e}function IN(e,t){return t?e.slice().reverse():e}function sZ(e){$.call(this,null,e)}ee(sZ,$,{transform(e,t){let n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(qa(e.sort)),this.modified(n),t}});var QK="zero",cZ="center",lZ="normalize",uZ=["y0","y1"];function ON(e){$.call(this,null,e)}ON.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:QK,values:[QK,cZ,lZ]},{name:"as",type:"string",array:!0,length:2,default:uZ}]};ee(ON,$,{transform(e,t){var n=e.as||uZ,r=n[0],i=n[1],o=qa(e.sort),a=e.field||Oa,s=e.offset===cZ?jCe:e.offset===lZ?qCe:GCe,c,l,u,f;for(c=WCe(t.source,e.groupby,o,a),l=0,u=c.length,f=c.max;l<u;++l)s(c[l],f,a,r,i);return t.reflow(e.modified()).modifies(n)}});function jCe(e,t,n,r,i){for(var o=(t-e.sum)/2,a=e.length,s=0,c;s<a;++s)c=e[s],c[r]=o,c[i]=o+=Math.abs(n(c))}function qCe(e,t,n,r,i){for(var o=1/e.sum,a=0,s=e.length,c=0,l=0,u;c<s;++c)u=e[c],u[r]=a,u[i]=a=o*(l+=Math.abs(n(u)))}function GCe(e,t,n,r,i){for(var o=0,a=0,s=e.length,c=0,l,u;c<s;++c)u=e[c],l=+n(u),l<0?(u[r]=a,u[i]=a+=l):(u[r]=o,u[i]=o+=l)}function WCe(e,t,n,r){var i=[],o=m=>m(u),a,s,c,l,u,f,d,p,h;if(t==null)i.push(e.slice());else for(a={},s=0,c=e.length;s<c;++s)u=e[s],f=t.map(o),d=a[f],d||(a[f]=d=[],i.push(d)),d.push(u);for(f=0,h=0,l=i.length;f<l;++f){for(d=i[f],s=0,p=0,c=d.length;s<c;++s)p+=Math.abs(r(d[s]));d.sum=p,p>h&&(h=p),n&&d.sort(n)}return i.max=h,i}var ik={};br(ik,{contour:()=>Q_,geojson:()=>Z_,geopath:()=>J_,geopoint:()=>ek,geoshape:()=>tk,graticule:()=>nk,heatmap:()=>rk,isocontour:()=>Y_,kde2d:()=>X_,projection:()=>CJ});var he=1e-6,Zl=1e-12,$e=Math.PI,$t=$e/2,Ou=$e/4,Wn=$e*2,Bt=180/$e,Re=$e/180,Fe=Math.abs,Jo=Math.atan,_n=Math.atan2,pe=Math.cos,Y7=Math.ceil,zx=Math.exp;var Hx=Math.hypot,Jl=Math.log,Lx=Math.pow,fe=Math.sin,zi=Math.sign||function(e){return e>0?1:e<0?-1:0},Ut=Math.sqrt,Pu=Math.tan;function Ax(e){return e>1?0:e<-1?$e:Math.acos(e)}function fn(e){return e>1?$t:e<-1?-$t:Math.asin(e)}function dn(){}function Vx(e,t){e&&dZ.hasOwnProperty(e.type)&&dZ[e.type](e,t)}var fZ={Feature:function(e,t){Vx(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Vx(n[r].geometry,t)}},dZ={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){$N(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)$N(n[r],t,0)},Polygon:function(e,t){pZ(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)pZ(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Vx(n[r],t)}};function $N(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function pZ(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)$N(e[n],t,1);t.polygonEnd()}function I1(e,t){e&&fZ.hasOwnProperty(e.type)?fZ[e.type](e,t):Vx(e,t)}var X7=new mn,Nx=new mn,hZ,mZ,BN,UN,jN,O2={point:dn,lineStart:dn,lineEnd:dn,polygonStart:function(){X7=new mn,O2.lineStart=YCe,O2.lineEnd=XCe},polygonEnd:function(){var e=+X7;Nx.add(e<0?Wn+e:e),this.lineStart=this.lineEnd=this.point=dn},sphere:function(){Nx.add(Wn)}};function YCe(){O2.point=QCe}function XCe(){gZ(hZ,mZ)}function QCe(e,t){O2.point=gZ,hZ=e,mZ=t,e*=Re,t*=Re,BN=e,UN=pe(t=t/2+Ou),jN=fe(t)}function gZ(e,t){e*=Re,t*=Re,t=t/2+Ou;var n=e-BN,r=n>=0?1:-1,i=r*n,o=pe(t),a=fe(t),s=jN*a,c=UN*o+s*pe(i),l=s*r*fe(i);X7.add(_n(l,c)),BN=e,UN=o,jN=a}function qN(e){return Nx=new mn,I1(e,O2),Nx*2}function e0(e){return[_n(e[1],e[0]),fn(e[2])]}function e2(e){var t=e[0],n=e[1],r=pe(n);return[r*pe(t),r*fe(t),fe(n)]}function Q7(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Cc(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function _x(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function K7(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function t0(e){var t=Ut(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Mn,F1,kn,mo,n0,CZ,bZ,$u,Z7,a4,Mc,bc={point:GN,lineStart:vZ,lineEnd:yZ,polygonStart:function(){bc.point=wZ,bc.lineStart=KCe,bc.lineEnd=ZCe,Z7=new mn,O2.polygonStart()},polygonEnd:function(){O2.polygonEnd(),bc.point=GN,bc.lineStart=vZ,bc.lineEnd=yZ,X7<0?(Mn=-(kn=180),F1=-(mo=90)):Z7>he?mo=90:Z7<-he&&(F1=-90),Mc[0]=Mn,Mc[1]=kn},sphere:function(){Mn=-(kn=180),F1=-(mo=90)}};function GN(e,t){a4.push(Mc=[Mn=e,kn=e]),t<F1&&(F1=t),t>mo&&(mo=t)}function MZ(e,t){var n=e2([e*Re,t*Re]);if($u){var r=Cc($u,n),i=[r[1],-r[0],0],o=Cc(i,r);t0(o),o=e0(o);var a=e-n0,s=a>0?1:-1,c=o[0]*Bt*s,l,u=Fe(a)>180;u^(s*n0<c&&c<s*e)?(l=o[1]*Bt,l>mo&&(mo=l)):(c=(c+360)%360-180,u^(s*n0<c&&c<s*e)?(l=-o[1]*Bt,l<F1&&(F1=l)):(t<F1&&(F1=t),t>mo&&(mo=t))),u?e<n0?ho(Mn,e)>ho(Mn,kn)&&(kn=e):ho(e,kn)>ho(Mn,kn)&&(Mn=e):kn>=Mn?(e<Mn&&(Mn=e),e>kn&&(kn=e)):e>n0?ho(Mn,e)>ho(Mn,kn)&&(kn=e):ho(e,kn)>ho(Mn,kn)&&(Mn=e)}else a4.push(Mc=[Mn=e,kn=e]);t<F1&&(F1=t),t>mo&&(mo=t),$u=n,n0=e}function vZ(){bc.point=MZ}function yZ(){Mc[0]=Mn,Mc[1]=kn,bc.point=GN,$u=null}function wZ(e,t){if($u){var n=e-n0;Z7.add(Fe(n)>180?n+(n>0?360:-360):n)}else CZ=e,bZ=t;O2.point(e,t),MZ(e,t)}function KCe(){O2.lineStart()}function ZCe(){wZ(CZ,bZ),O2.lineEnd(),Fe(Z7)>he&&(Mn=-(kn=180)),Mc[0]=Mn,Mc[1]=kn,$u=null}function ho(e,t){return(t-=e)<0?t+360:t}function JCe(e,t){return e[0]-t[0]}function xZ(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function WN(e){var t,n,r,i,o,a,s;if(mo=kn=-(Mn=F1=1/0),a4=[],I1(e,bc),n=a4.length){for(a4.sort(JCe),t=1,r=a4[0],o=[r];t<n;++t)i=a4[t],xZ(r,i[0])||xZ(r,i[1])?(ho(r[0],i[1])>ho(r[0],r[1])&&(r[1]=i[1]),ho(i[0],r[1])>ho(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(s=ho(r[1],i[0]))>a&&(a=s,Mn=i[0],kn=r[1])}return a4=Mc=null,Mn===1/0||F1===1/0?[[NaN,NaN],[NaN,NaN]]:[[Mn,F1],[kn,mo]]}var J7,kx,Tx,Ix,Fx,Rx,Ox,Px,YN,XN,QN,DZ,zZ,a1,s1,c1,P2={sphere:dn,point:KN,lineStart:SZ,lineEnd:EZ,polygonStart:function(){P2.lineStart=nbe,P2.lineEnd=rbe},polygonEnd:function(){P2.lineStart=SZ,P2.lineEnd=EZ}};function KN(e,t){e*=Re,t*=Re;var n=pe(t);ep(n*pe(e),n*fe(e),fe(t))}function ep(e,t,n){++J7,Tx+=(e-Tx)/J7,Ix+=(t-Ix)/J7,Fx+=(n-Fx)/J7}function SZ(){P2.point=ebe}function ebe(e,t){e*=Re,t*=Re;var n=pe(t);a1=n*pe(e),s1=n*fe(e),c1=fe(t),P2.point=tbe,ep(a1,s1,c1)}function tbe(e,t){e*=Re,t*=Re;var n=pe(t),r=n*pe(e),i=n*fe(e),o=fe(t),a=_n(Ut((a=s1*o-c1*i)*a+(a=c1*r-a1*o)*a+(a=a1*i-s1*r)*a),a1*r+s1*i+c1*o);kx+=a,Rx+=a*(a1+(a1=r)),Ox+=a*(s1+(s1=i)),Px+=a*(c1+(c1=o)),ep(a1,s1,c1)}function EZ(){P2.point=KN}function nbe(){P2.point=ibe}function rbe(){HZ(DZ,zZ),P2.point=KN}function ibe(e,t){DZ=e,zZ=t,e*=Re,t*=Re,P2.point=HZ;var n=pe(t);a1=n*pe(e),s1=n*fe(e),c1=fe(t),ep(a1,s1,c1)}function HZ(e,t){e*=Re,t*=Re;var n=pe(t),r=n*pe(e),i=n*fe(e),o=fe(t),a=s1*o-c1*i,s=c1*r-a1*o,c=a1*i-s1*r,l=Hx(a,s,c),u=fn(l),f=l&&-u/l;YN.add(f*a),XN.add(f*s),QN.add(f*c),kx+=u,Rx+=u*(a1+(a1=r)),Ox+=u*(s1+(s1=i)),Px+=u*(c1+(c1=o)),ep(a1,s1,c1)}function ZN(e){J7=kx=Tx=Ix=Fx=Rx=Ox=Px=0,YN=new mn,XN=new mn,QN=new mn,I1(e,P2);var t=+YN,n=+XN,r=+QN,i=Hx(t,n,r);return i<Zl&&(t=Rx,n=Ox,r=Px,kx<he&&(t=Tx,n=Ix,r=Fx),i=Hx(t,n,r),i<Zl)?[NaN,NaN]:[_n(n,t)*Bt,fn(r/i)*Bt]}function tp(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function JN(e,t){return Fe(e)>$e&&(e-=Math.round(e/Wn)*Wn),[e,t]}JN.invert=JN;function e_(e,t,n){return(e%=Wn)?t||n?tp(AZ(e),VZ(t,n)):AZ(e):t||n?VZ(t,n):JN}function LZ(e){return function(t,n){return t+=e,Fe(t)>$e&&(t-=Math.round(t/Wn)*Wn),[t,n]}}function AZ(e){var t=LZ(e);return t.invert=LZ(-e),t}function VZ(e,t){var n=pe(e),r=fe(e),i=pe(t),o=fe(t);function a(s,c){var l=pe(c),u=pe(s)*l,f=fe(s)*l,d=fe(c),p=d*n+u*r;return[_n(f*i-p*o,u*n-d*r),fn(p*i+f*o)]}return a.invert=function(s,c){var l=pe(c),u=pe(s)*l,f=fe(s)*l,d=fe(c),p=d*i-f*o;return[_n(f*i+d*o,u*n+p*r),fn(p*n-u*r)]},a}function NZ(e){e=e_(e[0]*Re,e[1]*Re,e.length>2?e[2]*Re:0);function t(n){return n=e(n[0]*Re,n[1]*Re),n[0]*=Bt,n[1]*=Bt,n}return t.invert=function(n){return n=e.invert(n[0]*Re,n[1]*Re),n[0]*=Bt,n[1]*=Bt,n},t}function kZ(e,t,n,r,i,o){if(n){var a=pe(t),s=fe(t),c=r*n;i==null?(i=t+r*Wn,o=t-c/2):(i=_Z(a,i),o=_Z(a,o),(r>0?i<o:i>o)&&(i+=r*Wn));for(var l,u=i;r>0?u>o:u<o;u-=c)l=e0([a,-s*pe(u),-s*fe(u)]),e.point(l[0],l[1])}}function _Z(e,t){t=e2(t),t[0]-=e,t0(t);var n=Ax(-t[1]);return((-t[2]<0?-n:n)+Wn-he)%Wn}function $x(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:dn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Bu(e,t){return Fe(e[0]-t[0])<he&&Fe(e[1]-t[1])<he}function Bx(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ux(e,t,n,r,i){var o=[],a=[],s,c;if(e.forEach(function(h){if(!((m=h.length-1)<=0)){var m,g=h[0],v=h[m],y;if(Bu(g,v)){if(!g[2]&&!v[2]){for(i.lineStart(),s=0;s<m;++s)i.point((g=h[s])[0],g[1]);i.lineEnd();return}v[0]+=2*he}o.push(y=new Bx(g,h,null,!0)),a.push(y.o=new Bx(g,null,y,!1)),o.push(y=new Bx(v,h,null,!1)),a.push(y.o=new Bx(v,null,y,!0))}}),!!o.length){for(a.sort(t),TZ(o),TZ(a),s=0,c=a.length;s<c;++s)a[s].e=n=!n;for(var l=o[0],u,f;;){for(var d=l,p=!0;d.v;)if((d=d.n)===l)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,c=u.length;s<c;++s)i.point((f=u[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(u=d.p.z,s=u.length-1;s>=0;--s)i.point((f=u[s])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,u=d.z,p=!p}while(!d.v);i.lineEnd()}}}function TZ(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function t_(e){return Fe(e[0])<=$e?e[0]:zi(e[0])*((Fe(e[0])+$e)%Wn-$e)}function IZ(e,t){var n=t_(t),r=t[1],i=fe(r),o=[fe(n),-pe(n),0],a=0,s=0,c=new mn;i===1?r=$t+he:i===-1&&(r=-$t-he);for(var l=0,u=e.length;l<u;++l)if(d=(f=e[l]).length)for(var f,d,p=f[d-1],h=t_(p),m=p[1]/2+Ou,g=fe(m),v=pe(m),y=0;y<d;++y,h=b,g=S,v=w,p=C){var C=f[y],b=t_(C),M=C[1]/2+Ou,S=fe(M),w=pe(M),E=b-h,D=E>=0?1:-1,L=D*E,A=L>$e,j=g*S;if(c.add(_n(j*D*fe(L),v*w+j*pe(L))),a+=A?E+D*Wn:E,A^h>=n^b>=n){var V=Cc(e2(p),e2(C));t0(V);var _=Cc(o,V);t0(_);var N=(A^E>=0?-1:1)*fn(_[2]);(r>N||r===N&&(V[0]||V[1]))&&(s+=A^E>=0?1:-1)}}return(a<-he||a<he&&c<-Zl)^s&1}function jx(e,t,n,r){return function(i){var o=t(i),a=$x(),s=t(a),c=!1,l,u,f,d={point:p,lineStart:m,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=C,u=[],l=[]},polygonEnd:function(){d.point=p,d.lineStart=m,d.lineEnd=g,u=eu(u);var b=IZ(l,r);u.length?(c||(i.polygonStart(),c=!0),Ux(u,abe,b,n,i)):b&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),u=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(b,M){e(b,M)&&i.point(b,M)}function h(b,M){o.point(b,M)}function m(){d.point=h,o.lineStart()}function g(){d.point=p,o.lineEnd()}function v(b,M){f.push([b,M]),s.point(b,M)}function y(){s.lineStart(),f=[]}function C(){v(f[0][0],f[0][1]),s.lineEnd();var b=s.clean(),M=a.result(),S,w=M.length,E,D,L;if(f.pop(),l.push(f),f=null,!!w){if(b&1){if(D=M[0],(E=D.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),S=0;S<E;++S)i.point((L=D[S])[0],L[1]);i.lineEnd()}return}w>1&&b&2&&M.push(M.pop().concat(M.shift())),u.push(M.filter(obe))}}return d}}function obe(e){return e.length>1}function abe(e,t){return((e=e.x)[0]<0?e[1]-$t-he:$t-e[1])-((t=t.x)[0]<0?t[1]-$t-he:$t-t[1])}var n_=jx(function(){return!0},sbe,lbe,[-$e,-$t]);function sbe(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var s=o>0?$e:-$e,c=Fe(o-t);Fe(c-$e)<he?(e.point(t,n=(n+a)/2>0?$t:-$t),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),i=0):r!==s&&c>=$e&&(Fe(t-r)<he&&(t-=r*he),Fe(o-s)<he&&(o-=s*he),n=cbe(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=o,n=a),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function cbe(e,t,n,r){var i,o,a=fe(e-n);return Fe(a)>he?Jo((fe(t)*(o=pe(r))*fe(n)-fe(r)*(i=pe(t))*fe(e))/(i*o*a)):(t+r)/2}function lbe(e,t,n,r){var i;if(e==null)i=n*$t,r.point(-$e,i),r.point(0,i),r.point($e,i),r.point($e,0),r.point($e,-i),r.point(0,-i),r.point(-$e,-i),r.point(-$e,0),r.point(-$e,i);else if(Fe(e[0]-t[0])>he){var o=e[0]<t[0]?$e:-$e;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function FZ(e){var t=pe(e),n=6*Re,r=t>0,i=Fe(t)>he;function o(u,f,d,p){kZ(p,e,n,d,u,f)}function a(u,f){return pe(u)*pe(f)>t}function s(u){var f,d,p,h,m;return{lineStart:function(){h=p=!1,m=1},point:function(g,v){var y=[g,v],C,b=a(g,v),M=r?b?0:l(g,v):b?l(g+(g<0?$e:-$e),v):0;if(!f&&(h=p=b)&&u.lineStart(),b!==p&&(C=c(f,y),(!C||Bu(f,C)||Bu(y,C))&&(y[2]=1)),b!==p)m=0,b?(u.lineStart(),C=c(y,f),u.point(C[0],C[1])):(C=c(f,y),u.point(C[0],C[1],2),u.lineEnd()),f=C;else if(i&&f&&r^b){var S;!(M&d)&&(S=c(y,f,!0))&&(m=0,r?(u.lineStart(),u.point(S[0][0],S[0][1]),u.point(S[1][0],S[1][1]),u.lineEnd()):(u.point(S[1][0],S[1][1]),u.lineEnd(),u.lineStart(),u.point(S[0][0],S[0][1],3)))}b&&(!f||!Bu(f,y))&&u.point(y[0],y[1]),f=y,p=b,d=M},lineEnd:function(){p&&u.lineEnd(),f=null},clean:function(){return m|(h&&p)<<1}}}function c(u,f,d){var p=e2(u),h=e2(f),m=[1,0,0],g=Cc(p,h),v=Q7(g,g),y=g[0],C=v-y*y;if(!C)return!d&&u;var b=t*v/C,M=-t*y/C,S=Cc(m,g),w=K7(m,b),E=K7(g,M);_x(w,E);var D=S,L=Q7(w,D),A=Q7(D,D),j=L*L-A*(Q7(w,w)-1);if(!(j<0)){var V=Ut(j),_=K7(D,(-L-V)/A);if(_x(_,w),_=e0(_),!d)return _;var N=u[0],I=f[0],G=u[1],X=f[1],J;I<N&&(J=N,N=I,I=J);var we=I-N,Se=Fe(we-$e)<he,Xe=Se||we<he;if(!Se&&X<G&&(J=G,G=X,X=J),Xe?Se?G+X>0^_[1]<(Fe(_[0]-N)<he?G:X):G<=_[1]&&_[1]<=X:we>$e^(N<=_[0]&&_[0]<=I)){var Dt=K7(D,(-L+V)/A);return _x(Dt,w),[_,e0(Dt)]}}}function l(u,f){var d=r?e:$e-e,p=0;return u<-d?p|=1:u>d&&(p|=2),f<-d?p|=4:f>d&&(p|=8),p}return jx(a,s,o,r?[0,-e]:[-$e,e-$e])}function RZ(e,t,n,r,i,o){var a=e[0],s=e[1],c=t[0],l=t[1],u=0,f=1,d=c-a,p=l-s,h;if(h=n-a,!(!d&&h>0)){if(h/=d,d<0){if(h<u)return;h<f&&(f=h)}else if(d>0){if(h>f)return;h>u&&(u=h)}if(h=i-a,!(!d&&h<0)){if(h/=d,d<0){if(h>f)return;h>u&&(u=h)}else if(d>0){if(h<u)return;h<f&&(f=h)}if(h=r-s,!(!p&&h>0)){if(h/=p,p<0){if(h<u)return;h<f&&(f=h)}else if(p>0){if(h>f)return;h>u&&(u=h)}if(h=o-s,!(!p&&h<0)){if(h/=p,p<0){if(h>f)return;h>u&&(u=h)}else if(p>0){if(h<u)return;h<f&&(f=h)}return u>0&&(e[0]=a+u*d,e[1]=s+u*p),f<1&&(t[0]=a+f*d,t[1]=s+f*p),!0}}}}}var np=1e9,qx=-np;function rp(e,t,n,r){function i(l,u){return e<=l&&l<=n&&t<=u&&u<=r}function o(l,u,f,d){var p=0,h=0;if(l==null||(p=a(l,f))!==(h=a(u,f))||c(l,u)<0^f>0)do d.point(p===0||p===3?e:n,p>1?r:t);while((p=(p+f+4)%4)!==h);else d.point(u[0],u[1])}function a(l,u){return Fe(l[0]-e)<he?u>0?0:3:Fe(l[0]-n)<he?u>0?2:1:Fe(l[1]-t)<he?u>0?1:0:u>0?3:2}function s(l,u){return c(l.x,u.x)}function c(l,u){var f=a(l,1),d=a(u,1);return f!==d?f-d:f===0?u[1]-l[1]:f===1?l[0]-u[0]:f===2?l[1]-u[1]:u[0]-l[0]}return function(l){var u=l,f=$x(),d,p,h,m,g,v,y,C,b,M,S,w={point:E,lineStart:j,lineEnd:V,polygonStart:L,polygonEnd:A};function E(N,I){i(N,I)&&u.point(N,I)}function D(){for(var N=0,I=0,G=p.length;I<G;++I)for(var X=p[I],J=1,we=X.length,Se=X[0],Xe,Dt,st=Se[0],en=Se[1];J<we;++J)Xe=st,Dt=en,Se=X[J],st=Se[0],en=Se[1],Dt<=r?en>r&&(st-Xe)*(r-Dt)>(en-Dt)*(e-Xe)&&++N:en<=r&&(st-Xe)*(r-Dt)<(en-Dt)*(e-Xe)&&--N;return N}function L(){u=f,d=[],p=[],S=!0}function A(){var N=D(),I=S&&N,G=(d=eu(d)).length;(I||G)&&(l.polygonStart(),I&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),G&&Ux(d,s,N,o,l),l.polygonEnd()),u=l,d=p=h=null}function j(){w.point=_,p&&p.push(h=[]),M=!0,b=!1,y=C=NaN}function V(){d&&(_(m,g),v&&b&&f.rejoin(),d.push(f.result())),w.point=E,b&&u.lineEnd()}function _(N,I){var G=i(N,I);if(p&&h.push([N,I]),M)m=N,g=I,v=G,M=!1,G&&(u.lineStart(),u.point(N,I));else if(G&&b)u.point(N,I);else{var X=[y=Math.max(qx,Math.min(np,y)),C=Math.max(qx,Math.min(np,C))],J=[N=Math.max(qx,Math.min(np,N)),I=Math.max(qx,Math.min(np,I))];RZ(X,J,e,t,n,r)?(b||(u.lineStart(),u.point(X[0],X[1])),u.point(J[0],J[1]),G||u.lineEnd(),S=!1):G&&(u.lineStart(),u.point(N,I),S=!1)}y=N,C=I,b=G}return w}}function OZ(e,t,n){var r=Gn(e,t-he,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function PZ(e,t,n){var r=Gn(e,t-he,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function Gx(){var e,t,n,r,i,o,a,s,c=10,l=c,u=90,f=360,d,p,h,m,g=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return Gn(Y7(r/u)*u,n,u).map(h).concat(Gn(Y7(s/f)*f,a,f).map(m)).concat(Gn(Y7(t/c)*c,e,c).filter(function(C){return Fe(C%u)>he}).map(d)).concat(Gn(Y7(o/l)*l,i,l).filter(function(C){return Fe(C%f)>he}).map(p))}return v.lines=function(){return y().map(function(C){return{type:"LineString",coordinates:C}})},v.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(m(a).slice(1),h(n).reverse().slice(1),m(s).reverse().slice(1))]}},v.extent=function(C){return arguments.length?v.extentMajor(C).extentMinor(C):v.extentMinor()},v.extentMajor=function(C){return arguments.length?(r=+C[0][0],n=+C[1][0],s=+C[0][1],a=+C[1][1],r>n&&(C=r,r=n,n=C),s>a&&(C=s,s=a,a=C),v.precision(g)):[[r,s],[n,a]]},v.extentMinor=function(C){return arguments.length?(t=+C[0][0],e=+C[1][0],o=+C[0][1],i=+C[1][1],t>e&&(C=t,t=e,e=C),o>i&&(C=o,o=i,i=C),v.precision(g)):[[t,o],[e,i]]},v.step=function(C){return arguments.length?v.stepMajor(C).stepMinor(C):v.stepMinor()},v.stepMajor=function(C){return arguments.length?(u=+C[0],f=+C[1],v):[u,f]},v.stepMinor=function(C){return arguments.length?(c=+C[0],l=+C[1],v):[c,l]},v.precision=function(C){return arguments.length?(g=+C,d=OZ(o,i,90),p=PZ(t,e,g),h=OZ(s,a,90),m=PZ(r,n,g),v):g},v.extentMajor([[-180,-90+he],[180,90-he]]).extentMinor([[-180,-80-he],[180,80+he]])}var s4=e=>e;var r_=new mn,i_=new mn,$Z,BZ,o_,a_,c4={point:dn,lineStart:dn,lineEnd:dn,polygonStart:function(){c4.lineStart=ube,c4.lineEnd=dbe},polygonEnd:function(){c4.lineStart=c4.lineEnd=c4.point=dn,r_.add(Fe(i_)),i_=new mn},result:function(){var e=r_/2;return r_=new mn,e}};function ube(){c4.point=fbe}function fbe(e,t){c4.point=UZ,$Z=o_=e,BZ=a_=t}function UZ(e,t){i_.add(a_*e-o_*t),o_=e,a_=t}function dbe(){UZ($Z,BZ)}var s_=c4;var Uu=1/0,Wx=Uu,ip=-Uu,Yx=ip,pbe={point:hbe,lineStart:dn,lineEnd:dn,polygonStart:dn,polygonEnd:dn,result:function(){var e=[[Uu,Wx],[ip,Yx]];return ip=Yx=-(Wx=Uu=1/0),e}};function hbe(e,t){e<Uu&&(Uu=e),e>ip&&(ip=e),t<Wx&&(Wx=t),t>Yx&&(Yx=t)}var ju=pbe;var c_=0,l_=0,op=0,Xx=0,Qx=0,qu=0,u_=0,f_=0,ap=0,GZ,WZ,rs,is,$2={point:r0,lineStart:jZ,lineEnd:qZ,polygonStart:function(){$2.lineStart=vbe,$2.lineEnd=ybe},polygonEnd:function(){$2.point=r0,$2.lineStart=jZ,$2.lineEnd=qZ},result:function(){var e=ap?[u_/ap,f_/ap]:qu?[Xx/qu,Qx/qu]:op?[c_/op,l_/op]:[NaN,NaN];return c_=l_=op=Xx=Qx=qu=u_=f_=ap=0,e}};function r0(e,t){c_+=e,l_+=t,++op}function jZ(){$2.point=mbe}function mbe(e,t){$2.point=gbe,r0(rs=e,is=t)}function gbe(e,t){var n=e-rs,r=t-is,i=Ut(n*n+r*r);Xx+=i*(rs+e)/2,Qx+=i*(is+t)/2,qu+=i,r0(rs=e,is=t)}function qZ(){$2.point=r0}function vbe(){$2.point=xbe}function ybe(){YZ(GZ,WZ)}function xbe(e,t){$2.point=YZ,r0(GZ=rs=e,WZ=is=t)}function YZ(e,t){var n=e-rs,r=t-is,i=Ut(n*n+r*r);Xx+=i*(rs+e)/2,Qx+=i*(is+t)/2,qu+=i,i=is*e-rs*t,u_+=i*(rs+e),f_+=i*(is+t),ap+=i*3,r0(rs=e,is=t)}var d_=$2;function Kx(e){this._context=e}Kx.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Wn);break}}},result:dn};var h_=new mn,p_,XZ,QZ,sp,cp,Zx={point:dn,lineStart:function(){Zx.point=Cbe},lineEnd:function(){p_&&KZ(XZ,QZ),Zx.point=dn},polygonStart:function(){p_=!0},polygonEnd:function(){p_=null},result:function(){var e=+h_;return h_=new mn,e}};function Cbe(e,t){Zx.point=KZ,XZ=sp=e,QZ=cp=t}function KZ(e,t){sp-=e,cp-=t,h_.add(Ut(sp*sp+cp*cp)),sp=e,cp=t}var m_=Zx;var ZZ,Jx,JZ,eJ,lp=class{constructor(t){this._append=t==null?tJ:bbe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==JZ||this._append!==Jx){let r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,JZ=r,Jx=this._append,eJ=this._,this._=i}this._+=eJ;break}}}result(){let t=this._;return this._="",t.length?t:null}};function tJ(e){let t=1;this._+=e[0];for(let n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function bbe(e){let t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return tJ;if(t!==ZZ){let n=10**t;ZZ=t,Jx=function(i){let o=1;this._+=i[0];for(let a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return Jx}function eC(e,t){let n=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),I1(s,i(o))),o.result()}return a.area=function(s){return I1(s,i(s_)),s_.result()},a.measure=function(s){return I1(s,i(m_)),m_.result()},a.bounds=function(s){return I1(s,i(ju)),ju.result()},a.centroid=function(s){return I1(s,i(d_)),d_.result()},a.projection=function(s){return arguments.length?(i=s==null?(e=null,s4):(e=s).stream,a):e},a.context=function(s){return arguments.length?(o=s==null?(t=null,new lp(n)):new Kx(t=s),typeof r!="function"&&o.pointRadius(r),a):t},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{let c=Math.floor(s);if(!(c>=0))throw new RangeError(`invalid digits: ${s}`);n=c}return t===null&&(o=new lp(n)),a},a.projection(e).digits(n).context(t)}function i0(e){return function(t){var n=new g_;for(var r in e)n[r]=e[r];return n.stream=t,n}}function g_(){}g_.prototype={constructor:g_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function v_(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),I1(n,e.stream(ju)),t(ju.result()),r!=null&&e.clipExtent(r),e}function o0(e,t,n){return v_(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,c=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,c])},n)}function Gu(e,t,n){return o0(e,[[0,0],t],n)}function Wu(e,t,n){return v_(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];e.scale(150*o).translate([a,s])},n)}function Yu(e,t,n){return v_(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,s])},n)}var nJ=16,Mbe=pe(30*Re);function y_(e,t){return+t?Sbe(e,t):wbe(e)}function wbe(e){return i0({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Sbe(e,t){function n(r,i,o,a,s,c,l,u,f,d,p,h,m,g){var v=l-r,y=u-i,C=v*v+y*y;if(C>4*t&&m--){var b=a+d,M=s+p,S=c+h,w=Ut(b*b+M*M+S*S),E=fn(S/=w),D=Fe(Fe(S)-1)<he||Fe(o-f)<he?(o+f)/2:_n(M,b),L=e(D,E),A=L[0],j=L[1],V=A-r,_=j-i,N=y*V-v*_;(N*N/C>t||Fe((v*V+y*_)/C-.5)>.3||a*d+s*p+c*h<Mbe)&&(n(r,i,o,a,s,c,A,j,D,b/=w,M/=w,S,m,g),g.point(A,j),n(A,j,D,b,M,S,l,u,f,d,p,h,m,g))}}return function(r){var i,o,a,s,c,l,u,f,d,p,h,m,g={point:v,lineStart:y,lineEnd:b,polygonStart:function(){r.polygonStart(),g.lineStart=M},polygonEnd:function(){r.polygonEnd(),g.lineStart=y}};function v(E,D){E=e(E,D),r.point(E[0],E[1])}function y(){f=NaN,g.point=C,r.lineStart()}function C(E,D){var L=e2([E,D]),A=e(E,D);n(f,d,u,p,h,m,f=A[0],d=A[1],u=E,p=L[0],h=L[1],m=L[2],nJ,r),r.point(f,d)}function b(){g.point=v,r.lineEnd()}function M(){y(),g.point=S,g.lineEnd=w}function S(E,D){C(i=E,D),o=f,a=d,s=p,c=h,l=m,g.point=C}function w(){n(f,d,u,p,h,m,o,a,i,s,c,l,nJ,r),g.lineEnd=b,b()}return g}}var Ebe=i0({point:function(e,t){this.stream.point(e*Re,t*Re)}});function Dbe(e){return i0({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function zbe(e,t,n,r,i){function o(a,s){return a*=r,s*=i,[t+e*a,n-e*s]}return o.invert=function(a,s){return[(a-t)/e*r,(n-s)/e*i]},o}function rJ(e,t,n,r,i,o){if(!o)return zbe(e,t,n,r,i);var a=pe(o),s=fe(o),c=a*e,l=s*e,u=a/e,f=s/e,d=(s*n-a*t)/e,p=(s*t+a*n)/e;function h(m,g){return m*=r,g*=i,[c*m-l*g+t,n-l*m-c*g]}return h.invert=function(m,g){return[r*(u*m-f*g+d),i*(p-f*m-u*g)]},h}function Tn(e){return tC(function(){return e})()}function tC(e){var t,n=150,r=480,i=250,o=0,a=0,s=0,c=0,l=0,u,f=0,d=1,p=1,h=null,m=n_,g=null,v,y,C,b=s4,M=.5,S,w,E,D,L;function A(N){return E(N[0]*Re,N[1]*Re)}function j(N){return N=E.invert(N[0],N[1]),N&&[N[0]*Bt,N[1]*Bt]}A.stream=function(N){return D&&L===N?D:D=Ebe(Dbe(u)(m(S(b(L=N)))))},A.preclip=function(N){return arguments.length?(m=N,h=void 0,_()):m},A.postclip=function(N){return arguments.length?(b=N,g=v=y=C=null,_()):b},A.clipAngle=function(N){return arguments.length?(m=+N?FZ(h=N*Re):(h=null,n_),_()):h*Bt},A.clipExtent=function(N){return arguments.length?(b=N==null?(g=v=y=C=null,s4):rp(g=+N[0][0],v=+N[0][1],y=+N[1][0],C=+N[1][1]),_()):g==null?null:[[g,v],[y,C]]},A.scale=function(N){return arguments.length?(n=+N,V()):n},A.translate=function(N){return arguments.length?(r=+N[0],i=+N[1],V()):[r,i]},A.center=function(N){return arguments.length?(o=N[0]%360*Re,a=N[1]%360*Re,V()):[o*Bt,a*Bt]},A.rotate=function(N){return arguments.length?(s=N[0]%360*Re,c=N[1]%360*Re,l=N.length>2?N[2]%360*Re:0,V()):[s*Bt,c*Bt,l*Bt]},A.angle=function(N){return arguments.length?(f=N%360*Re,V()):f*Bt},A.reflectX=function(N){return arguments.length?(d=N?-1:1,V()):d<0},A.reflectY=function(N){return arguments.length?(p=N?-1:1,V()):p<0},A.precision=function(N){return arguments.length?(S=y_(w,M=N*N),_()):Ut(M)},A.fitExtent=function(N,I){return o0(A,N,I)},A.fitSize=function(N,I){return Gu(A,N,I)},A.fitWidth=function(N,I){return Wu(A,N,I)},A.fitHeight=function(N,I){return Yu(A,N,I)};function V(){var N=rJ(n,0,0,d,p,f).apply(null,t(o,a)),I=rJ(n,r-N[0],i-N[1],d,p,f);return u=e_(s,c,l),w=tp(t,I),E=tp(u,w),S=y_(w,M),_()}function _(){return D=L=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&j,V()}}function Xu(e){var t=0,n=$e/3,r=tC(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Re,n=o[1]*Re):[t*Bt,n*Bt]},i}function iJ(e){var t=pe(e);function n(r,i){return[r*t,fe(i)/t]}return n.invert=function(r,i){return[r/t,fn(i*t)]},n}function oJ(e,t){var n=fe(e),r=(n+fe(t))/2;if(Fe(r)<he)return iJ(e);var i=1+n*(2*r-n),o=Ut(i)/r;function a(s,c){var l=Ut(i-2*r*fe(c))/r;return[l*fe(s*=r),o-l*pe(s)]}return a.invert=function(s,c){var l=o-c,u=_n(s,Fe(l))*zi(l);return l*r<0&&(u-=$e*zi(s)*zi(l)),[u/r,fn((i-(s*s+l*l)*r*r)/(2*r))]},a}function l4(){return Xu(oJ).scale(155.424).center([0,33.6442])}function up(){return l4().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Hbe(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function x_(){var e,t,n=up(),r,i=l4().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=l4().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,c,l={point:function(d,p){c=[d,p]}};function u(d){var p=d[0],h=d[1];return c=null,r.point(p,h),c||(o.point(p,h),c)||(s.point(p,h),c)}u.invert=function(d){var p=n.scale(),h=n.translate(),m=(d[0]-h[0])/p,g=(d[1]-h[1])/p;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(d)},u.stream=function(d){return e&&t===d?e:e=Hbe([n.stream(t=d),i.stream(d),a.stream(d)])},u.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),a.precision(d),f()):n.precision()},u.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),a.scale(d),u.translate(n.translate())):n.scale()},u.translate=function(d){if(!arguments.length)return n.translate();var p=n.scale(),h=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[h-.455*p,m-.238*p],[h+.455*p,m+.238*p]]).stream(l),o=i.translate([h-.307*p,m+.201*p]).clipExtent([[h-.425*p+he,m+.12*p+he],[h-.214*p-he,m+.234*p-he]]).stream(l),s=a.translate([h-.205*p,m+.212*p]).clipExtent([[h-.214*p+he,m+.166*p+he],[h-.115*p-he,m+.234*p-he]]).stream(l),f()},u.fitExtent=function(d,p){return o0(u,d,p)},u.fitSize=function(d,p){return Gu(u,d,p)},u.fitWidth=function(d,p){return Wu(u,d,p)},u.fitHeight=function(d,p){return Yu(u,d,p)};function f(){return e=t=null,u}return u.scale(1070)}function nC(e){return function(t,n){var r=pe(t),i=pe(n),o=e(r*i);return o===1/0?[2,0]:[o*i*fe(t),o*fe(n)]}}function os(e){return function(t,n){var r=Ut(t*t+n*n),i=e(r),o=fe(i),a=pe(i);return[_n(t*o,r*a),fn(r&&n*o/r)]}}var C_=nC(function(e){return Ut(2/(1+e))});C_.invert=os(function(e){return 2*fn(e/2)});function b_(){return Tn(C_).scale(124.75).clipAngle(180-.001)}var M_=nC(function(e){return(e=Ax(e))&&e/fe(e)});M_.invert=os(function(e){return e});function w_(){return Tn(M_).scale(79.4188).clipAngle(180-.001)}function Qu(e,t){return[e,Jl(Pu(($t+t)/2))]}Qu.invert=function(e,t){return[e,2*Jo(zx(t))-$t]};function S_(){return E_(Qu).scale(961/Wn)}function E_(e){var t=Tn(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,s,c,l;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?a=s=c=l=null:(a=+f[0][0],s=+f[0][1],c=+f[1][0],l=+f[1][1]),u()):a==null?null:[[a,s],[c,l]]};function u(){var f=$e*r(),d=t(NZ(t.rotate()).invert([0,0]));return o(a==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===Qu?[[Math.max(d[0]-f,a),s],[Math.min(d[0]+f,c),l]]:[[a,Math.max(d[1]-f,s)],[c,Math.min(d[1]+f,l)]])}return u()}function rC(e){return Pu(($t+e)/2)}function aJ(e,t){var n=pe(e),r=e===t?fe(e):Jl(n/pe(t))/Jl(rC(t)/rC(e)),i=n*Lx(rC(e),r)/r;if(!r)return Qu;function o(a,s){i>0?s<-$t+he&&(s=-$t+he):s>$t-he&&(s=$t-he);var c=i/Lx(rC(s),r);return[c*fe(r*a),i-c*pe(r*a)]}return o.invert=function(a,s){var c=i-s,l=zi(r)*Ut(a*a+c*c),u=_n(a,Fe(c))*zi(c);return c*r<0&&(u-=$e*zi(a)*zi(c)),[u/r,2*Jo(Lx(i/l,1/r))-$t]},o}function D_(){return Xu(aJ).scale(109.5).parallels([30,30])}function Ku(e,t){return[e,t]}Ku.invert=Ku;function z_(){return Tn(Ku).scale(152.63)}function sJ(e,t){var n=pe(e),r=e===t?fe(e):(n-pe(t))/(t-e),i=n/r+e;if(Fe(r)<he)return Ku;function o(a,s){var c=i-s,l=r*a;return[c*fe(l),i-c*pe(l)]}return o.invert=function(a,s){var c=i-s,l=_n(a,Fe(c))*zi(c);return c*r<0&&(l-=$e*zi(a)*zi(c)),[l/r,i-zi(r)*Ut(a*a+c*c)]},o}function H_(){return Xu(sJ).scale(131.154).center([0,13.9389])}var fp=1.340264,dp=-.081106,pp=893e-6,hp=.003796,iC=Ut(3)/2,Lbe=12;function L_(e,t){var n=fn(iC*fe(t)),r=n*n,i=r*r*r;return[e*pe(n)/(iC*(fp+3*dp*r+i*(7*pp+9*hp*r))),n*(fp+dp*r+i*(pp+hp*r))]}L_.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,s,c;o<Lbe&&(s=n*(fp+dp*r+i*(pp+hp*r))-t,c=fp+3*dp*r+i*(7*pp+9*hp*r),n-=a=s/c,r=n*n,i=r*r*r,!(Fe(a)<Zl));++o);return[iC*e*(fp+3*dp*r+i*(7*pp+9*hp*r))/pe(n),fn(fe(n)/iC)]};function A_(){return Tn(L_).scale(177.158)}function V_(e,t){var n=pe(t),r=pe(e)*n;return[n*fe(e)/r,fe(t)/r]}V_.invert=os(Jo);function N_(){return Tn(V_).scale(144.049).clipAngle(60)}function __(){var e=1,t=0,n=0,r=1,i=1,o=0,a,s,c=null,l,u,f,d=1,p=1,h=i0({point:function(b,M){var S=C([b,M]);this.stream.point(S[0],S[1])}}),m=s4,g,v;function y(){return d=e*r,p=e*i,g=v=null,C}function C(b){var M=b[0]*d,S=b[1]*p;if(o){var w=S*a-M*s;M=M*a+S*s,S=w}return[M+t,S+n]}return C.invert=function(b){var M=b[0]-t,S=b[1]-n;if(o){var w=S*a+M*s;M=M*a-S*s,S=w}return[M/d,S/p]},C.stream=function(b){return g&&v===b?g:g=h(m(v=b))},C.postclip=function(b){return arguments.length?(m=b,c=l=u=f=null,y()):m},C.clipExtent=function(b){return arguments.length?(m=b==null?(c=l=u=f=null,s4):rp(c=+b[0][0],l=+b[0][1],u=+b[1][0],f=+b[1][1]),y()):c==null?null:[[c,l],[u,f]]},C.scale=function(b){return arguments.length?(e=+b,y()):e},C.translate=function(b){return arguments.length?(t=+b[0],n=+b[1],y()):[t,n]},C.angle=function(b){return arguments.length?(o=b%360*Re,s=fe(o),a=pe(o),y()):o*Bt},C.reflectX=function(b){return arguments.length?(r=b?-1:1,y()):r<0},C.reflectY=function(b){return arguments.length?(i=b?-1:1,y()):i<0},C.fitExtent=function(b,M){return o0(C,b,M)},C.fitSize=function(b,M){return Gu(C,b,M)},C.fitWidth=function(b,M){return Wu(C,b,M)},C.fitHeight=function(b,M){return Yu(C,b,M)},C}function k_(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}k_.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,a=o*o;n-=i=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(Fe(i)>he&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function T_(){return Tn(k_).scale(175.295)}function I_(e,t){return[pe(t)*fe(e),fe(t)]}I_.invert=os(fn);function F_(){return Tn(I_).scale(249.5).clipAngle(90+he)}function R_(e,t){var n=pe(t),r=1+pe(e)*n;return[n*fe(e)/r,fe(t)/r]}R_.invert=os(function(e){return 2*Jo(e)});function O_(){return Tn(R_).scale(250).clipAngle(142)}function P_(e,t){return[Jl(Pu(($t+t)/2)),-e]}P_.invert=function(e,t){return[-t,2*Jo(zx(e))-$t]};function $_(){var e=E_(P_),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var cJ=Math.abs;var aC=Math.cos;var mp=Math.sin;var lJ=1e-6;var u4=Math.PI,oC=u4/2,Mat=u4/4;var B_=uJ(2),wat=uJ(u4),Sat=u4*2,Eat=180/u4,Dat=u4/180;function U_(e){return e>1?oC:e<-1?-oC:Math.asin(e)}function uJ(e){return e>0?Math.sqrt(e):0}function Abe(e,t){var n=e*mp(t),r=30,i;do t-=i=(t+mp(t)-n)/(1+aC(t));while(cJ(i)>lJ&&--r>0);return t/2}function Vbe(e,t,n){function r(i,o){return[e*i*aC(o=Abe(n,o)),t*mp(o)]}return r.invert=function(i,o){return o=U_(o/t),[i/(e*aC(o)),U_((2*o+mp(2*o))/n)]},r}var fJ=Vbe(B_/oC,B_,u4);function j_(){return Tn(fJ).scale(169.529)}var Nbe=eC(),cC=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function _be(e,t){return function n(){let r=t();return r.type=e,r.path=eC().projection(r),r.copy=r.copy||function(){let i=n();return cC.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},CV(r)}}function gp(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(sC[e]=_be(e,t),this):sC[e]||null}function q_(e){return e&&e.path||Nbe}var sC={albers:up,albersusa:x_,azimuthalequalarea:b_,azimuthalequidistant:w_,conicconformal:D_,conicequalarea:l4,conicequidistant:H_,equalEarth:A_,equirectangular:z_,gnomonic:N_,identity:__,mercator:S_,mollweide:j_,naturalEarth1:T_,orthographic:F_,stereographic:O_,transversemercator:$_};for(let e in sC)gp(e,sC[e]);function kbe(){}var wc=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function hJ(){var e=1,t=1,n=s;function r(c,l){return l.map(u=>i(c,u))}function i(c,l){var u=[],f=[];return o(c,l,d=>{n(d,c,l),Tbe(d)>0?u.push([d]):f.push(d)}),f.forEach(d=>{for(var p=0,h=u.length,m;p<h;++p)if(Ibe((m=u[p])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:u}}function o(c,l,u){var f=new Array,d=new Array,p,h,m,g,v,y;for(p=h=-1,g=c[0]>=l,wc[g<<1].forEach(C);++p<e-1;)m=g,g=c[p+1]>=l,wc[m|g<<1].forEach(C);for(wc[g<<0].forEach(C);++h<t-1;){for(p=-1,g=c[h*e+e]>=l,v=c[h*e]>=l,wc[g<<1|v<<2].forEach(C);++p<e-1;)m=g,g=c[h*e+e+p+1]>=l,y=v,v=c[h*e+p+1]>=l,wc[m|g<<1|v<<2|y<<3].forEach(C);wc[g|v<<3].forEach(C)}for(p=-1,v=c[h*e]>=l,wc[v<<2].forEach(C);++p<e-1;)y=v,v=c[h*e+p+1]>=l,wc[v<<2|y<<3].forEach(C);wc[v<<3].forEach(C);function C(b){var M=[b[0][0]+p,b[0][1]+h],S=[b[1][0]+p,b[1][1]+h],w=a(M),E=a(S),D,L;(D=d[w])?(L=f[E])?(delete d[D.end],delete f[L.start],D===L?(D.ring.push(S),u(D.ring)):f[D.start]=d[L.end]={start:D.start,end:L.end,ring:D.ring.concat(L.ring)}):(delete d[D.end],D.ring.push(S),d[D.end=E]=D):(D=f[E])?(L=d[w])?(delete f[D.start],delete d[L.end],D===L?(D.ring.push(S),u(D.ring)):f[L.start]=d[D.end]={start:L.start,end:D.end,ring:L.ring.concat(D.ring)}):(delete f[D.start],D.ring.unshift(M),f[D.start=w]=D):f[w]=d[E]={start:w,end:E,ring:[M,S]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function s(c,l,u){c.forEach(f=>{var d=f[0],p=f[1],h=d|0,m=p|0,g,v=l[m*e+h];d>0&&d<e&&h===d&&(g=l[m*e+h-1],f[0]=d+(u-g)/(v-g)-.5),p>0&&p<t&&m===p&&(g=l[(m-1)*e+h],f[1]=p+(u-g)/(v-g)-.5)})}return r.contour=i,r.size=function(c){if(!arguments.length)return[e,t];var l=Math.floor(c[0]),u=Math.floor(c[1]);return l>=0&&u>=0||B("invalid size"),e=l,t=u,r},r.smooth=function(c){return arguments.length?(n=c?s:kbe,r):n===s},r}function Tbe(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Ibe(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Fbe(e,t[n]))return i;return 0}function Fbe(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var c=e[o],l=c[0],u=c[1],f=e[s],d=f[0],p=f[1];if(Rbe(c,f,t))return 0;u>r!=p>r&&n<(d-l)*(r-u)/(p-u)+l&&(i=-i)}return i}function Rbe(e,t,n){var r;return Obe(e,t,n)&&Pbe(e[r=+(e[0]===t[0])],n[r],t[r])}function Obe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Pbe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function mJ(e,t,n){return function(r){var i=Qi(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,c=t?Ki(o,a,e):s/(e+1);return Gn(o+c,a,c)}}function Y_(e){$.call(this,null,e)}Y_.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ee(Y_,$,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Vn,o=hJ().smooth(e.smooth!==!1),a=e.thresholds||$be(r,i,e),s=e.as===null?null:e.as||"contour",c=[];return r.forEach(l=>{let u=i(l),f=o.size([u.width,u.height])(u.values,F(a)?a:a(u.values));Bbe(f,u,l,e),f.forEach(d=>{c.push(zl(l,at(s!=null?{[s]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function $be(e,t,n){let r=mJ(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Bo(t(i).values)))}function Bbe(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Ie(i)&&(i=i(n,r)),Ie(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;let a=(Oe(i)?i:i[0])||1,s=(Oe(i)?i:i[1])||1,c=o&&o[0]||0,l=o&&o[1]||0;e.forEach(gJ(t,a,s,c,l))}function gJ(e,t,n,r,i){let o=e.x1||0,a=e.y1||0,s=t*n<0;function c(f){f.forEach(l)}function l(f){s&&f.reverse(),f.forEach(u)}function u(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-a)*n+i}return function(f){return f.coordinates.forEach(c),f}}function dJ(e,t,n){let r=e>=0?e:Tv(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function G_(e){return Ie(e)?e:hn(+e)}function vJ(){var e=c=>c[0],t=c=>c[1],n=Oa,r=[-1,-1],i=960,o=500,a=2;function s(c,l){let u=dJ(r[0],c,e)>>a,f=dJ(r[1],c,t)>>a,d=u?u+2:0,p=f?f+2:0,h=2*d+(i>>a),m=2*p+(o>>a),g=new Float32Array(h*m),v=new Float32Array(h*m),y=g;c.forEach(b=>{let M=d+(+e(b)>>a),S=p+(+t(b)>>a);M>=0&&M<h&&S>=0&&S<m&&(g[M+S*h]+=+n(b))}),u>0&&f>0?(Zu(h,m,g,v,u),Ju(h,m,v,g,f),Zu(h,m,g,v,u),Ju(h,m,v,g,f),Zu(h,m,g,v,u),Ju(h,m,v,g,f)):u>0?(Zu(h,m,g,v,u),Zu(h,m,v,g,u),Zu(h,m,g,v,u),y=v):f>0&&(Ju(h,m,g,v,f),Ju(h,m,v,g,f),Ju(h,m,g,v,f),y=v);let C=l?Math.pow(2,-2*a):1/tu(y);for(let b=0,M=h*m;b<M;++b)y[b]*=C;return{values:y,scale:1<<a,width:h,height:m,x1:d,y1:p,x2:d+(i>>a),y2:p+(o>>a)}}return s.x=function(c){return arguments.length?(e=G_(c),s):e},s.y=function(c){return arguments.length?(t=G_(c),s):t},s.weight=function(c){return arguments.length?(n=G_(c),s):n},s.size=function(c){if(!arguments.length)return[i,o];var l=+c[0],u=+c[1];return l>=0&&u>=0||B("invalid size"),i=l,o=u,s},s.cellSize=function(c){return arguments.length?((c=+c)>=1||B("invalid cell size"),a=Math.floor(Math.log(c)/Math.LN2),s):1<<a},s.bandwidth=function(c){return arguments.length?(c=te(c),c.length===1&&(c=[+c[0],+c[0]]),c.length!==2&&B("invalid bandwidth"),r=c,s):r},s}function Zu(e,t,n,r,i){let o=(i<<1)+1;for(let a=0;a<t;++a)for(let s=0,c=0;s<e+i;++s)s<e&&(c+=n[s+a*e]),s>=i&&(s>=o&&(c-=n[s-o+a*e]),r[s-i+a*e]=c/Math.min(s+1,e-1+o-s,o))}function Ju(e,t,n,r,i){let o=(i<<1)+1;for(let a=0;a<e;++a)for(let s=0,c=0;s<t+i;++s)s<t&&(c+=n[a+s*e]),s>=i&&(s>=o&&(c-=n[a+(s-o)*e]),r[a+(s-i)*e]=c/Math.min(s+1,t-1+o-s,o))}function X_(e){$.call(this,null,e)}X_.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var Ube=["x","y","weight","size","cellSize","bandwidth"];function yJ(e,t){return Ube.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ee(X_,$,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=jbe(r,e.groupby),o=(e.groupby||[]).map(un),a=yJ(vJ(),e),s=e.as||"grid",c=[];function l(u,f){for(let d=0;d<o.length;++d)u[o[d]]=f[d];return u}return c=i.map(u=>at(l({[s]:a(u,e.counts)},u.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function jbe(e,t){var n=[],r=u=>u(s),i,o,a,s,c,l;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],c=t.map(r),l=i[c],l||(i[c]=l=[],l.dims=c,n.push(l)),l.push(s);return n}function Q_(e){$.call(this,null,e)}Q_.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ee(Q_,$,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=hJ().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||mJ(e.count||10,e.nice,!!i),a=e.size,s,c;return i||(i=t.materialize(t.SOURCE).source,s=yJ(vJ(),e)(i,!0),c=gJ(s,s.scale||1,s.scale||1,0,0),a=[s.width,s.height],i=s.values),o=F(o)?o:o(i),i=r.size(a)(i,o),c&&i.forEach(c),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(at),n}});var W_="Feature",K_="FeatureCollection",qbe="MultiPoint";function Z_(e){$.call(this,null,e)}Z_.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ee(Z_,$,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],a=i&&i[1],s=e.geojson||!i&&Vn,c=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(dr(s))||o&&t.modified(dr(o))||a&&t.modified(dr(a)),(!this.value||l)&&(c=t.SOURCE,this._features=n=[],this._points=r=[]),s&&t.visit(c,u=>n.push(s(u))),o&&a&&(t.visit(c,u=>{var f=o(u),d=a(u);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:W_,geometry:{type:qbe,coordinates:r}})),this.value={type:K_,features:n}}});function J_(e){$.call(this,null,e)}J_.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ee(J_,$,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Vn,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=q_(e.projection),n.materialize().reflow()):a=i===Vn||t.modified(i.fields)?n.ADD_MOD:n.ADD;let s=Gbe(r,e.pointRadius);return n.visit(a,c=>c[o]=r(i(c))),r.pointRadius(s),n.modifies(o)}});function Gbe(e,t){let n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function ek(e){$.call(this,null,e)}ek.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ee(ek,$,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],a=o[0],s=o[1],c;function l(u){let f=n([r(u),i(u)]);f?(u[a]=f[0],u[s]=f[1]):(u[a]=void 0,u[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(c=t.modified(r.fields)||t.modified(i.fields),t.visit(c?t.ADD_MOD:t.ADD,l)),t.modifies(o)}});function tk(e){$.call(this,null,e)}tk.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ee(tk,$,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=Wbe(q_(e.projection),e.field||Dr("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,a=>a[i]=r),n.modifies(i)}});function Wbe(e,t,n){let r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),a=e.pointRadius(n)(t(i));return e.pointRadius(o),a};return r.context=i=>(e.context(i),r),r}function nk(e){$.call(this,[],e),this.generator=Gx()}nk.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ee(nk,$,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(let o in e)Ie(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(Av(n[0],i)):t.add.push(at(i)),n[0]=i,t}});function rk(e){$.call(this,null,e)}rk.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ee(rk,$,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Vn,o=Xbe(e.opacity,e),a=Ybe(e.color,e),s=e.as||"image",c={$x:0,$y:0,$value:0,$max:r?Bo(n.map(l=>Bo(i(l).values))):0};return n.forEach(l=>{let u=i(l),f=Te({},l,c);r||(f.$max=Bo(u.values||[])),l[s]=Qbe(u,f,a.dep?a:hn(a(f)),o.dep?o:hn(o(f)))}),t.reflow(!0).modifies(s)}});function Ybe(e,t){let n;return Ie(e)?(n=r=>Xo(e(r,t)),n.dep=xJ(e)):n=hn(Xo(e||"#888")),n}function Xbe(e,t){let n;return Ie(e)?(n=r=>e(r,t),n.dep=xJ(e)):e?n=hn(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function xJ(e){if(!Ie(e))return!1;let t=hr(dr(e));return t.$x||t.$y||t.$value||t.$max}function Qbe(e,t,n,r){let i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,c=e.x2||i,l=e.y2||o,u=e.values,f=u?g=>u[g]:z2,d=Yo(c-a,l-s),p=d.getContext("2d"),h=p.getImageData(0,0,c-a,l-s),m=h.data;for(let g=s,v=0;g<l;++g){t.$y=g-s;for(let y=a,C=g*i;y<c;++y,v+=4){t.$x=y-a,t.$value=f(y+C);let b=n(t);m[v+0]=b.r,m[v+1]=b.g,m[v+2]=b.b,m[v+3]=~~(255*r(t))}}return p.putImageData(h,0,0),d}function CJ(e){$.call(this,null,e),this.modified(!0)}ee(CJ,$,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Zbe(e.type),cC.forEach(r=>{e[r]!=null&&pJ(n,r,e[r])})):cC.forEach(r=>{e.modified(r)&&pJ(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Kbe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Kbe(e,t){let n=Jbe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Zbe(e){let t=gp((e||"mercator").toLowerCase());return t||B("Unrecognized projection type: "+e),t()}function pJ(e,t,n){Ie(e[t])&&e[t](n)}function Jbe(e){return e=te(e),e.length===1?e[0]:{type:K_,features:e.reduce((t,n)=>t.concat(eMe(n)),[])}}function eMe(e){return e.type===K_?e.features:te(e).filter(t=>t!=null).map(t=>t.type===W_?t:{type:W_,geometry:t})}var yk={};br(yk,{force:()=>vk});function ok(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,a=n.length,s,c=0,l=0;for(o=0;o<a;++o)s=n[o],c+=s.x,l+=s.y;for(c=(c/a-e)*r,l=(l/a-t)*r,o=0;o<a;++o)s=n[o],s.x-=c,s.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function bJ(e){let t=+this._x.call(null,e),n=+this._y.call(null,e);return MJ(this.cover(t,n),t,n,e)}function MJ(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,a={data:r},s=e._x0,c=e._y0,l=e._x1,u=e._y1,f,d,p,h,m,g,v,y;if(!o)return e._root=a,e;for(;o.length;)if((m=t>=(f=(s+l)/2))?s=f:l=f,(g=n>=(d=(c+u)/2))?c=d:u=d,i=o,!(o=o[v=g<<1|m]))return i[v]=a,e;if(p=+e._x.call(null,o.data),h=+e._y.call(null,o.data),t===p&&n===h)return a.next=o,i?i[v]=a:e._root=a,e;do i=i?i[v]=new Array(4):e._root=new Array(4),(m=t>=(f=(s+l)/2))?s=f:l=f,(g=n>=(d=(c+u)/2))?c=d:u=d;while((v=g<<1|m)===(y=(h>=d)<<1|p>=f));return i[y]=o,i[v]=a,e}function wJ(e){var t,n,r=e.length,i,o,a=new Array(r),s=new Array(r),c=1/0,l=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=i,s[n]=o,i<c&&(c=i),i>u&&(u=i),o<l&&(l=o),o>f&&(f=o));if(c>u||l>f)return this;for(this.cover(c,l).cover(u,f),n=0;n<r;++n)MJ(this,a[n],s[n],e[n]);return this}function SJ(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a=i-n||1,s=this._root,c,l;n>e||e>=i||r>t||t>=o;)switch(l=(t<r)<<1|e<n,c=new Array(4),c[l]=s,s=c,a*=2,l){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function EJ(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function DJ(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ar(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function zJ(e,t,n){var r,i=this._x0,o=this._y0,a,s,c,l,u=this._x1,f=this._y1,d=[],p=this._root,h,m;for(p&&d.push(new Ar(p,i,o,u,f)),n==null?n=1/0:(i=e-n,o=t-n,u=e+n,f=t+n,n*=n);h=d.pop();)if(!(!(p=h.node)||(a=h.x0)>u||(s=h.y0)>f||(c=h.x1)<i||(l=h.y1)<o))if(p.length){var g=(a+c)/2,v=(s+l)/2;d.push(new Ar(p[3],g,v,c,l),new Ar(p[2],a,v,g,l),new Ar(p[1],g,s,c,v),new Ar(p[0],a,s,g,v)),(m=(t>=v)<<1|e>=g)&&(h=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=h)}else{var y=e-+this._x.call(null,p.data),C=t-+this._y.call(null,p.data),b=y*y+C*C;if(b<n){var M=Math.sqrt(n=b);i=e-M,o=t-M,u=e+M,f=t+M,r=p.data}}return r}function HJ(e){if(isNaN(u=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,a=this._x0,s=this._y0,c=this._x1,l=this._y1,u,f,d,p,h,m,g,v;if(!n)return this;if(n.length)for(;;){if((h=u>=(d=(a+c)/2))?a=d:c=d,(m=f>=(p=(s+l)/2))?s=p:l=p,t=n,!(n=n[g=m<<1|h]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,v=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[g]=o:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=o,this)}function LJ(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function AJ(){return this._root}function VJ(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function NJ(e){var t=[],n,r=this._root,i,o,a,s,c;for(r&&t.push(new Ar(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,a=n.y0,s=n.x1,c=n.y1)&&r.length){var l=(o+s)/2,u=(a+c)/2;(i=r[3])&&t.push(new Ar(i,l,u,s,c)),(i=r[2])&&t.push(new Ar(i,o,u,l,c)),(i=r[1])&&t.push(new Ar(i,l,a,s,u)),(i=r[0])&&t.push(new Ar(i,o,a,l,u))}return this}function _J(e){var t=[],n=[],r;for(this._root&&t.push(new Ar(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,c=r.x1,l=r.y1,u=(a+c)/2,f=(s+l)/2;(o=i[0])&&t.push(new Ar(o,a,s,u,f)),(o=i[1])&&t.push(new Ar(o,u,s,c,f)),(o=i[2])&&t.push(new Ar(o,a,f,u,l)),(o=i[3])&&t.push(new Ar(o,u,f,c,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function kJ(e){return e[0]}function TJ(e){return arguments.length?(this._x=e,this):this._x}function IJ(e){return e[1]}function FJ(e){return arguments.length?(this._y=e,this):this._y}function a0(e,t,n){var r=new ak(t??kJ,n??IJ,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function ak(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function RJ(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var l1=a0.prototype=ak.prototype;l1.copy=function(){var e=new ak(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=RJ(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=RJ(r));return e};l1.add=bJ;l1.addAll=wJ;l1.cover=SJ;l1.data=EJ;l1.extent=DJ;l1.find=zJ;l1.remove=HJ;l1.removeAll=LJ;l1.root=AJ;l1.size=VJ;l1.visit=NJ;l1.visitAfter=_J;l1.x=TJ;l1.y=FJ;function ir(e){return function(){return e}}function B2(e){return(e()-.5)*1e-6}function tMe(e){return e.x+e.vx}function nMe(e){return e.y+e.vy}function sk(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=ir(e==null?1:+e));function a(){for(var l,u=t.length,f,d,p,h,m,g,v=0;v<o;++v)for(f=a0(t,tMe,nMe).visitAfter(s),l=0;l<u;++l)d=t[l],m=n[d.index],g=m*m,p=d.x+d.vx,h=d.y+d.vy,f.visit(y);function y(C,b,M,S,w){var E=C.data,D=C.r,L=m+D;if(E){if(E.index>d.index){var A=p-E.x-E.vx,j=h-E.y-E.vy,V=A*A+j*j;V<L*L&&(A===0&&(A=B2(r),V+=A*A),j===0&&(j=B2(r),V+=j*j),V=(L-(V=Math.sqrt(V)))/V*i,d.vx+=(A*=V)*(L=(D*=D)/(g+D)),d.vy+=(j*=V)*L,E.vx-=A*(L=1-L),E.vy-=j*L)}return}return b>p+L||S<p-L||M>h+L||w<h-L}}function s(l){if(l.data)return l.r=n[l.data.index];for(var u=l.r=0;u<4;++u)l[u]&&l[u].r>l.r&&(l.r=l[u].r)}function c(){if(t){var l,u=t.length,f;for(n=new Array(u),l=0;l<u;++l)f=t[l],n[f.index]=+e(f,l,t)}}return a.initialize=function(l,u){t=l,r=u,c()},a.iterations=function(l){return arguments.length?(o=+l,a):o},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(e=typeof l=="function"?l:ir(+l),c(),a):e},a}function rMe(e){return e.index}function OJ(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function ck(e){var t=rMe,n=f,r,i=ir(30),o,a,s,c,l,u=1;e==null&&(e=[]);function f(g){return 1/Math.min(s[g.source.index],s[g.target.index])}function d(g){for(var v=0,y=e.length;v<u;++v)for(var C=0,b,M,S,w,E,D,L;C<y;++C)b=e[C],M=b.source,S=b.target,w=S.x+S.vx-M.x-M.vx||B2(l),E=S.y+S.vy-M.y-M.vy||B2(l),D=Math.sqrt(w*w+E*E),D=(D-o[C])/D*g*r[C],w*=D,E*=D,S.vx-=w*(L=c[C]),S.vy-=E*L,M.vx+=w*(L=1-L),M.vy+=E*L}function p(){if(a){var g,v=a.length,y=e.length,C=new Map(a.map((M,S)=>[t(M,S,a),M])),b;for(g=0,s=new Array(v);g<y;++g)b=e[g],b.index=g,typeof b.source!="object"&&(b.source=OJ(C,b.source)),typeof b.target!="object"&&(b.target=OJ(C,b.target)),s[b.source.index]=(s[b.source.index]||0)+1,s[b.target.index]=(s[b.target.index]||0)+1;for(g=0,c=new Array(y);g<y;++g)b=e[g],c[g]=s[b.source.index]/(s[b.source.index]+s[b.target.index]);r=new Array(y),h(),o=new Array(y),m()}}function h(){if(a)for(var g=0,v=e.length;g<v;++g)r[g]=+n(e[g],g,e)}function m(){if(a)for(var g=0,v=e.length;g<v;++g)o[g]=+i(e[g],g,e)}return d.initialize=function(g,v){a=g,l=v,p()},d.links=function(g){return arguments.length?(e=g,p(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(u=+g,d):u},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:ir(+g),h(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:ir(+g),m(),d):i},d}var iMe={value:()=>{}};function $J(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new lC(n)}function lC(e){this._=e}function oMe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}lC.prototype=$J.prototype={constructor:lC,on:function(e,t){var n=this._,r=oMe(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=aMe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=PJ(n[i],e.name,t);else if(t==null)for(i in n)n[i]=PJ(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new lC(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function aMe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function PJ(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=iMe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var lk=$J;var ef=0,yp=0,vp=0,UJ=1e3,uC,xp,fC=0,s0=0,dC=0,Cp=typeof performance=="object"&&performance.now?performance:Date,jJ=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Mp(){return s0||(jJ(sMe),s0=Cp.now()+dC)}function sMe(){s0=0}function bp(){this._call=this._time=this._next=null}bp.prototype=pC.prototype={constructor:bp,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Mp():+n)+(t==null?0:+t),!this._next&&xp!==this&&(xp?xp._next=this:uC=this,xp=this),this._call=e,this._time=n,uk()},stop:function(){this._call&&(this._call=null,this._time=1/0,uk())}};function pC(e,t,n){var r=new bp;return r.restart(e,t,n),r}function qJ(){Mp(),++ef;for(var e=uC,t;e;)(t=s0-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ef}function BJ(){s0=(fC=Cp.now())+dC,ef=yp=0;try{qJ()}finally{ef=0,lMe(),s0=0}}function cMe(){var e=Cp.now(),t=e-fC;t>UJ&&(dC-=t,fC=e)}function lMe(){for(var e,t=uC,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:uC=n);xp=e,uk(r)}function uk(e){if(!ef){yp&&(yp=clearTimeout(yp));var t=e-s0;t>24?(e<1/0&&(yp=setTimeout(BJ,e-Cp.now()-dC)),vp&&(vp=clearInterval(vp))):(vp||(fC=Cp.now(),vp=setInterval(cMe,UJ)),ef=1,jJ(BJ))}}function fk(e,t,n){var r=new bp,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,a,s){a=+a,s=s==null?Mp():+s,r._restart(function c(l){l+=i,r._restart(c,i+=a,s),o(l)},a,s)},r.restart(e,t,n),r)}function GJ(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function WJ(e){return e.x}function YJ(e){return e.y}var uMe=10,fMe=Math.PI*(3-Math.sqrt(5));function dk(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,c=pC(f),l=lk("tick","end"),u=GJ();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(c.stop(),l.call("end",t))}function d(m){var g,v=e.length,y;m===void 0&&(m=1);for(var C=0;C<m;++C)for(n+=(o-n)*i,s.forEach(function(b){b(n)}),g=0;g<v;++g)y=e[g],y.fx==null?y.x+=y.vx*=a:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=a:(y.y=y.fy,y.vy=0);return t}function p(){for(var m=0,g=e.length,v;m<g;++m){if(v=e[m],v.index=m,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var y=uMe*Math.sqrt(.5+m),C=m*fMe;v.x=y*Math.cos(C),v.y=y*Math.sin(C)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function h(m){return m.initialize&&m.initialize(e,u),m}return p(),t={tick:d,restart:function(){return c.restart(f),t},stop:function(){return c.stop(),t},nodes:function(m){return arguments.length?(e=m,p(),s.forEach(h),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(o=+m,t):o},velocityDecay:function(m){return arguments.length?(a=1-m,t):1-a},randomSource:function(m){return arguments.length?(u=m,s.forEach(h),t):u},force:function(m,g){return arguments.length>1?(g==null?s.delete(m):s.set(m,h(g)),t):s.get(m)},find:function(m,g,v){var y=0,C=e.length,b,M,S,w,E;for(v==null?v=1/0:v*=v,y=0;y<C;++y)w=e[y],b=m-w.x,M=g-w.y,S=b*b+M*M,S<v&&(E=w,v=S);return E},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function pk(){var e,t,n,r,i=ir(-30),o,a=1,s=1/0,c=.81;function l(p){var h,m=e.length,g=a0(e,WJ,YJ).visitAfter(f);for(r=p,h=0;h<m;++h)t=e[h],g.visit(d)}function u(){if(e){var p,h=e.length,m;for(o=new Array(h),p=0;p<h;++p)m=e[p],o[m.index]=+i(m,p,e)}}function f(p){var h=0,m,g,v=0,y,C,b;if(p.length){for(y=C=b=0;b<4;++b)(m=p[b])&&(g=Math.abs(m.value))&&(h+=m.value,v+=g,y+=g*m.x,C+=g*m.y);p.x=y/v,p.y=C/v}else{m=p,m.x=m.data.x,m.y=m.data.y;do h+=o[m.data.index];while(m=m.next)}p.value=h}function d(p,h,m,g){if(!p.value)return!0;var v=p.x-t.x,y=p.y-t.y,C=g-h,b=v*v+y*y;if(C*C/c<b)return b<s&&(v===0&&(v=B2(n),b+=v*v),y===0&&(y=B2(n),b+=y*y),b<a&&(b=Math.sqrt(a*b)),t.vx+=v*p.value*r/b,t.vy+=y*p.value*r/b),!0;if(p.length||b>=s)return;(p.data!==t||p.next)&&(v===0&&(v=B2(n),b+=v*v),y===0&&(y=B2(n),b+=y*y),b<a&&(b=Math.sqrt(a*b)));do p.data!==t&&(C=o[p.data.index]*r/b,t.vx+=v*C,t.vy+=y*C);while(p=p.next)}return l.initialize=function(p,h){e=p,n=h,u()},l.strength=function(p){return arguments.length?(i=typeof p=="function"?p:ir(+p),u(),l):i},l.distanceMin=function(p){return arguments.length?(a=p*p,l):Math.sqrt(a)},l.distanceMax=function(p){return arguments.length?(s=p*p,l):Math.sqrt(s)},l.theta=function(p){return arguments.length?(c=p*p,l):Math.sqrt(c)},l}function hk(e){var t=ir(.1),n,r,i;typeof e!="function"&&(e=ir(e==null?0:+e));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vx+=(i[c]-u.x)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:ir(+s),a(),o):t},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:ir(+s),a(),o):e},o}function mk(e){var t=ir(.1),n,r,i;typeof e!="function"&&(e=ir(e==null?0:+e));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vy+=(i[c]-u.y)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:ir(+s),a(),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:ir(+s),a(),o):e},o}var XJ={center:ok,collide:sk,nbody:pk,link:ck,x:hk,y:mk},wp="forces",gk=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],dMe=["static","iterations"],QJ=["x","y","vx","vy"];function vk(e){$.call(this,null,e)}vk.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:QJ}]};ee(vk,$,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(gk),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&KJ(n,e,0,t)):(this.value=n=hMe(t.source,e),n.on("tick",pMe(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(dMe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){let n=t.dataflow;for(let s=this._argops,c=0,l=s.length,u;c<l;++c)if(u=s[c],!(u.name!==wp||u.op._argval.force!=="link")){for(var r=u.op._argops,i=0,o=r.length,a;i<o;++i)if(r[i].name==="links"&&(a=r[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(QJ)}});function pMe(e,t){return()=>e.touch(t).run()}function hMe(e,t){let n=dk(e),r=n.stop,i=n.restart,o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),KJ(n,t,!0).on("end",()=>o=!0)}function KJ(e,t,n,r){var i=te(t.forces),o,a,s,c;for(o=0,a=gk.length;o<a;++o)s=gk[o],s!==wp&&t.modified(s)&&e[s](t[s]);for(o=0,a=i.length;o<a;++o)c=wp+o,s=n||t.modified(wp,o)?gMe(i[o]):r&&mMe(i[o],r)?e.force(c):null,s&&e.force(c,s);for(a=e.numForces||0;o<a;++o)e.force(wp+o,null);return e.numForces=i.length,e}function mMe(e,t){var n,r;for(n in e)if(Ie(r=e[n])&&t.modified(dr(r)))return 1;return 0}function gMe(e){var t,n;de(XJ,e.force)||B("Unrecognized force: "+e.force),t=XJ[e.force]();for(n in e)Ie(t[n])&&vMe(t[n],e[n],e);return t}function vMe(e,t,n){e(Ie(t)?r=>t(r,n):t)}var Xk={};br(Xk,{nest:()=>Bk,pack:()=>Uk,partition:()=>jk,stratify:()=>qk,tree:()=>Gk,treelinks:()=>Wk,treemap:()=>Yk});function yMe(e,t){return e.parent===t.parent?1:2}function xMe(e){return e.reduce(CMe,0)/e.length}function CMe(e,t){return e+t.x}function bMe(e){return 1+e.reduce(MMe,0)}function MMe(e,t){return Math.max(e,t.y)}function wMe(e){for(var t;t=e.children;)e=t[0];return e}function SMe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function xk(){var e=yMe,t=1,n=1,r=!1;function i(o){var a,s=0;o.eachAfter(function(d){var p=d.children;p?(d.x=xMe(p),d.y=bMe(p)):(d.x=a?s+=e(d,a):0,d.y=0,a=d)});var c=wMe(o),l=SMe(o),u=c.x-e(c,l)/2,f=l.x+e(l,c)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-u)/(f-u)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function EMe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function ZJ(){return this.eachAfter(EMe)}function JJ(e,t){let n=-1;for(let r of this)e.call(t,r,++n,this);return this}function eee(e,t){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function tee(e,t){for(var n=this,r=[n],i=[],o,a,s,c=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)e.call(t,n,++c,this);return this}function nee(e,t){let n=-1;for(let r of this)if(e.call(t,r,++n,this))return r}function ree(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function iee(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function oee(e){for(var t=this,n=DMe(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function DMe(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function aee(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function see(){return Array.from(this)}function cee(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function lee(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*uee(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function tf(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=LMe)):t===void 0&&(t=HMe);for(var n=new Sc(e),r,i=[n],o,a,s,c;r=i.pop();)if((a=t(r.data))&&(c=(a=Array.from(a)).length))for(r.children=a,s=c-1;s>=0;--s)i.push(o=a[s]=new Sc(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(Ck)}function zMe(){return tf(this).eachBefore(AMe)}function HMe(e){return e.children}function LMe(e){return Array.isArray(e)?e[1]:null}function AMe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Ck(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Sc(e){this.data=e,this.depth=this.height=0,this.parent=null}Sc.prototype=tf.prototype={constructor:Sc,count:ZJ,each:JJ,eachAfter:tee,eachBefore:eee,find:nee,sum:ree,sort:iee,path:oee,ancestors:aee,descendants:see,leaves:cee,links:lee,copy:zMe,[Symbol.iterator]:uee};function nf(e){return e==null?null:bk(e)}function bk(e){if(typeof e!="function")throw new Error;return e}function Ec(){return 0}function f4(e){return function(){return e}}function fee(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function dee(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pee(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function hee(e,t){for(var n=0,r=(e=pee(Array.from(e),t)).length,i=[],o,a;n<r;)o=e[n],a&&mee(a,o)?++n:(a=NMe(i=VMe(i,o)),n=0);return a}function VMe(e,t){var n,r;if(Mk(t,e))return[t];for(n=0;n<e.length;++n)if(hC(t,e[n])&&Mk(Sp(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(hC(Sp(e[n],e[r]),t)&&hC(Sp(e[n],t),e[r])&&hC(Sp(e[r],t),e[n])&&Mk(gee(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function hC(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function mee(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Mk(e,t){for(var n=0;n<t.length;++n)if(!mee(e,t[n]))return!1;return!0}function NMe(e){switch(e.length){case 1:return _Me(e[0]);case 2:return Sp(e[0],e[1]);case 3:return gee(e[0],e[1],e[2])}}function _Me(e){return{x:e.x,y:e.y,r:e.r}}function Sp(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,c=o-n,l=a-r,u=s-i,f=Math.sqrt(c*c+l*l);return{x:(n+o+c/f*u)/2,y:(r+a+l/f*u)/2,r:(f+i+s)/2}}function gee(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,c=t.r,l=n.x,u=n.y,f=n.r,d=r-a,p=r-l,h=i-s,m=i-u,g=c-o,v=f-o,y=r*r+i*i-o*o,C=y-a*a-s*s+c*c,b=y-l*l-u*u+f*f,M=p*h-d*m,S=(h*b-m*C)/(M*2)-r,w=(m*g-h*v)/M,E=(p*C-d*b)/(M*2)-i,D=(d*v-p*g)/M,L=w*w+D*D-1,A=2*(o+S*w+E*D),j=S*S+E*E-o*o,V=-(Math.abs(L)>1e-6?(A+Math.sqrt(A*A-4*L*j))/(2*L):j/A);return{x:r+S+w*V,y:i+E+D*V,r:V}}function vee(e,t,n){var r=e.x-t.x,i,o,a=e.y-t.y,s,c,l=r*r+a*a;l?(o=t.r+n.r,o*=o,c=e.r+n.r,c*=c,o>c?(i=(l+c-o)/(2*l),s=Math.sqrt(Math.max(0,c/l-i*i)),n.x=e.x-i*r-s*a,n.y=e.y-i*a+s*r):(i=(l+o-c)/(2*l),s=Math.sqrt(Math.max(0,o/l-i*i)),n.x=t.x+i*r-s*a,n.y=t.y+i*a+s*r)):(n.x=t.x+n.r,n.y=t.y)}function yee(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function xee(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function mC(e){this._=e,this.next=null,this.previous=null}function Cee(e,t){if(!(o=(e=dee(e)).length))return 0;var n,r,i,o,a,s,c,l,u,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;vee(r,n,i=e[2]),n=new mC(n),r=new mC(r),i=new mC(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(c=3;c<o;++c){vee(n._,r._,i=e[c]),i=new mC(i),l=r.next,u=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(yee(l._,i._)){r=l,n.next=r,r.previous=n,--c;continue e}f+=l._.r,l=l.next}else{if(yee(u._,i._)){n=u,n.next=r,r.previous=n,--c;continue e}d+=u._.r,u=u.previous}while(l!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=xee(n);(i=i.next)!==r;)(s=xee(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=hee(n,t),c=0;c<o;++c)n=e[c],n.x-=i.x,n.y-=i.y;return i.r}function kMe(e){return Math.sqrt(e.value)}function Sk(){var e=null,t=1,n=1,r=Ec;function i(o){let a=fee();return o.x=t/2,o.y=n/2,e?o.eachBefore(bee(e)).eachAfter(wk(r,.5,a)).eachBefore(Mee(1)):o.eachBefore(bee(kMe)).eachAfter(wk(Ec,1,a)).eachAfter(wk(r,o.r/Math.min(t,n),a)).eachBefore(Mee(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=nf(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:f4(+o),i):r},i}function bee(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function wk(e,t,n){return function(r){if(i=r.children){var i,o,a=i.length,s=e(r)*t||0,c;if(s)for(o=0;o<a;++o)i[o].r+=s;if(c=Cee(i,n),s)for(o=0;o<a;++o)i[o].r-=s;r.r=c+s}}}function Mee(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function gC(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function U2(e,t,n,r,i){for(var o=e.children,a,s=-1,c=o.length,l=e.value&&(r-t)/e.value;++s<c;)a=o[s],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*l}function Ek(){var e=1,t=1,n=0,r=!1;function i(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/s,a.eachBefore(o(t,s)),r&&a.eachBefore(gC),a}function o(a,s){return function(c){c.children&&U2(c,c.x0,a*(c.depth+1)/s,c.x1,a*(c.depth+2)/s);var l=c.x0,u=c.y0,f=c.x1-n,d=c.y1-n;f<l&&(l=f=(l+f)/2),d<u&&(u=d=(u+d)/2),c.x0=l,c.y0=u,c.x1=f,c.y1=d}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var TMe={depth:-1},wee={},Dk={};function IMe(e){return e.id}function FMe(e){return e.parentId}function vC(){var e=IMe,t=FMe,n;function r(i){var o=Array.from(i),a=e,s=t,c,l,u,f,d,p,h,m,g=new Map;if(n!=null){let v=o.map((b,M)=>RMe(n(b,M,i))),y=v.map(See),C=new Set(v).add("");for(let b of y)C.has(b)||(C.add(b),v.push(b),y.push(See(b)),o.push(Dk));a=(b,M)=>v[M],s=(b,M)=>y[M]}for(u=0,c=o.length;u<c;++u)l=o[u],p=o[u]=new Sc(l),(h=a(l,u,i))!=null&&(h+="")&&(m=p.id=h,g.set(m,g.has(m)?wee:p)),(h=s(l,u,i))!=null&&(h+="")&&(p.parent=h);for(u=0;u<c;++u)if(p=o[u],h=p.parent){if(d=g.get(h),!d)throw new Error("missing: "+h);if(d===wee)throw new Error("ambiguous: "+h);d.children?d.children.push(p):d.children=[p],p.parent=d}else{if(f)throw new Error("multiple roots");f=p}if(!f)throw new Error("no root");if(n!=null){for(;f.data===Dk&&f.children.length===1;)f=f.children[0],--c;for(let v=o.length-1;v>=0&&(p=o[v],p.data===Dk);--v)p.data=null}if(f.parent=TMe,f.eachBefore(function(v){v.depth=v.parent.depth+1,--c}).eachBefore(Ck),f.parent=null,c>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=nf(i),r):e},r.parentId=function(i){return arguments.length?(t=nf(i),r):t},r.path=function(i){return arguments.length?(n=nf(i),r):n},r}function RMe(e){e=`${e}`;let t=e.length;return zk(e,t-1)&&!zk(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function See(e){let t=e.length;if(t<2)return"";for(;--t>1&&!zk(e,t););return e.slice(0,t)}function zk(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function OMe(e,t){return e.parent===t.parent?1:2}function Hk(e){var t=e.children;return t?t[0]:e.t}function Lk(e){var t=e.children;return t?t[t.length-1]:e.t}function PMe(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function $Me(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function BMe(e,t,n){return e.a.parent===t.parent?e.a:n}function yC(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}yC.prototype=Object.create(Sc.prototype);function UMe(e){for(var t=new yC(e,0),n,r=[t],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new yC(o[a],a)),i.parent=n;return(t.parent=new yC(null,0)).children=[t],t}function Ak(){var e=OMe,t=1,n=1,r=null;function i(l){var u=UMe(l);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)l.eachBefore(c);else{var f=l,d=l,p=l;l.eachBefore(function(y){y.x<f.x&&(f=y),y.x>d.x&&(d=y),y.depth>p.depth&&(p=y)});var h=f===d?1:e(f,d)/2,m=h-f.x,g=t/(d.x+h+m),v=n/(p.depth||1);l.eachBefore(function(y){y.x=(y.x+m)*g,y.y=y.depth*v})}return l}function o(l){var u=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(u){$Me(l);var p=(u[0].z+u[u.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-p):l.z=p}else d&&(l.z=d.z+e(l._,d._));l.parent.A=s(l,d,l.parent.A||f[0])}function a(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function s(l,u,f){if(u){for(var d=l,p=l,h=u,m=d.parent.children[0],g=d.m,v=p.m,y=h.m,C=m.m,b;h=Lk(h),d=Hk(d),h&&d;)m=Hk(m),p=Lk(p),p.a=l,b=h.z+y-d.z-g+e(h._,d._),b>0&&(PMe(BMe(h,l,f),l,b),g+=b,v+=b),y+=h.m,g+=d.m,C+=m.m,v+=p.m;h&&!Lk(p)&&(p.t=h,p.m+=y-v),d&&!Hk(m)&&(m.t=d,m.m+=g-C,f=l)}return f}function c(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function Dc(e,t,n,r,i){for(var o=e.children,a,s=-1,c=o.length,l=e.value&&(i-n)/e.value;++s<c;)a=o[s],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*l}var Vk=(1+Math.sqrt(5))/2;function Nk(e,t,n,r,i,o){for(var a=[],s=t.children,c,l,u=0,f=0,d=s.length,p,h,m=t.value,g,v,y,C,b,M,S;u<d;){p=i-n,h=o-r;do g=s[f++].value;while(!g&&f<d);for(v=y=g,M=Math.max(h/p,p/h)/(m*e),S=g*g*M,b=Math.max(y/S,S/v);f<d;++f){if(g+=l=s[f].value,l<v&&(v=l),l>y&&(y=l),S=g*g*M,C=Math.max(y/S,S/v),C>b){g-=l;break}b=C}a.push(c={value:g,dice:p<h,children:s.slice(u,f)}),c.dice?U2(c,n,r,i,m?r+=h*g/m:o):Dc(c,n,r,m?n+=p*g/m:i,o),m-=g,u=f}return a}var Ep=function e(t){function n(r,i,o,a,s){Nk(t,r,i,o,a,s)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Vk);function _k(){var e=Ep,t=!1,n=1,r=1,i=[0],o=Ec,a=Ec,s=Ec,c=Ec,l=Ec;function u(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(gC),d}function f(d){var p=i[d.depth],h=d.x0+p,m=d.y0+p,g=d.x1-p,v=d.y1-p;g<h&&(h=g=(h+g)/2),v<m&&(m=v=(m+v)/2),d.x0=h,d.y0=m,d.x1=g,d.y1=v,d.children&&(p=i[d.depth+1]=o(d)/2,h+=l(d)-p,m+=a(d)-p,g-=s(d)-p,v-=c(d)-p,g<h&&(h=g=(h+g)/2),v<m&&(m=v=(m+v)/2),e(d,h,m,g,v))}return u.round=function(d){return arguments.length?(t=!!d,u):t},u.size=function(d){return arguments.length?(n=+d[0],r=+d[1],u):[n,r]},u.tile=function(d){return arguments.length?(e=bk(d),u):e},u.padding=function(d){return arguments.length?u.paddingInner(d).paddingOuter(d):u.paddingInner()},u.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:f4(+d),u):o},u.paddingOuter=function(d){return arguments.length?u.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):u.paddingTop()},u.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:f4(+d),u):a},u.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:f4(+d),u):s},u.paddingBottom=function(d){return arguments.length?(c=typeof d=="function"?d:f4(+d),u):c},u.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:f4(+d),u):l},u}function kk(e,t,n,r,i){var o=e.children,a,s=o.length,c,l=new Array(s+1);for(l[0]=c=a=0;a<s;++a)l[a+1]=c+=o[a].value;u(0,s,e.value,t,n,r,i);function u(f,d,p,h,m,g,v){if(f>=d-1){var y=o[f];y.x0=h,y.y0=m,y.x1=g,y.y1=v;return}for(var C=l[f],b=p/2+C,M=f+1,S=d-1;M<S;){var w=M+S>>>1;l[w]<b?M=w+1:S=w}b-l[M-1]<l[M]-b&&f+1<M&&--M;var E=l[M]-C,D=p-E;if(g-h>v-m){var L=p?(h*D+g*E)/p:g;u(f,M,E,h,m,L,v),u(M,d,D,L,m,g,v)}else{var A=p?(m*D+v*E)/p:v;u(f,M,E,h,m,g,A),u(M,d,D,h,A,g,v)}}}function Tk(e,t,n,r,i){(e.depth&1?Dc:U2)(e,t,n,r,i)}var Ik=function e(t){function n(r,i,o,a,s){if((c=r._squarify)&&c.ratio===t)for(var c,l,u,f,d=-1,p,h=c.length,m=r.value;++d<h;){for(l=c[d],u=l.children,f=l.value=0,p=u.length;f<p;++f)l.value+=u[f].value;l.dice?U2(l,i,o,a,m?o+=(s-o)*l.value/m:s):Dc(l,i,o,m?i+=(a-i)*l.value/m:a,s),m-=l.value}else r._squarify=c=Nk(t,r,i,o,a,s),c.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Vk);function Fk(e,t,n){let r={};return e.each(i=>{let o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function Bk(e){$.call(this,null,e)}Bk.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var jMe=e=>e.values;ee(Bk,$,{transform(e,t){t.source||B("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(a=>{a.children&&Dl(a.data)&&i.rem.push(a.data)}),this.value=o=tf({values:te(e.keys).reduce((a,s)=>(a.key(s),a),qMe()).entries(i.source)},jMe),n&&o.each(a=>{a.children&&(a=at(a.data),i.add.push(a),i.source.push(a))}),Fk(o,Ee,Ee)),i.source.root=o,i}});function qMe(){let e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;let a=i.length,s=e[o++],c={},l={},u=-1,f,d,p;for(;++u<a;)f=s(d=i[u])+"",(p=c[f])?p.push(d):c[f]=[d];for(f in c)l[f]=n(c[f],o);return l}function r(i,o){if(++o>e.length)return i;let a=[];for(let s in i)a.push({key:s,values:r(i[s],o)});return a}return t}function zc(e){$.call(this,null,e)}var GMe=(e,t)=>e.parent===t.parent?1:2;ee(zc,$,{transform(e,t){(!t.source||!t.source.root)&&B(this.constructor.name+" transform requires a backing tree data source.");let n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(qa(e.sort,a=>a.data)),WMe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?GMe:Oa);try{this.value=n(i)}catch(a){B(a)}return i.each(a=>YMe(a,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function WMe(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function YMe(e,t,n){let r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}var Rk=["x","y","r","depth","children"];function Uk(e){zc.call(this,e)}Uk.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Rk.length,default:Rk}]};ee(Uk,zc,{layout:Sk,params:["radius","size","padding"],fields:Rk});var Ok=["x0","y0","x1","y1","depth","children"];function jk(e){zc.call(this,e)}jk.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Ok.length,default:Ok}]};ee(jk,zc,{layout:Ek,params:["size","round","padding"],fields:Ok});function qk(e){$.call(this,null,e)}qk.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ee(qk,$,{transform(e,t){t.source||B("Stratify transform requires an upstream data source.");let n=this.value,r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?Fk(vC().id(e.key).parentId(e.parentKey)(i.source),e.key,pr):Fk(vC()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});var Eee={tidy:Ak,cluster:xk},Pk=["x","y","depth","children"];function Gk(e){zc.call(this,e)}Gk.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Pk.length,default:Pk}]};ee(Gk,zc,{layout(e){let t=e||"tidy";if(de(Eee,t))return Eee[t]();B("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Pk});function Wk(e){$.call(this,[],e)}Wk.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ee(Wk,$,{transform(e,t){let n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||B("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,a=>o[Ee(a)]=1),r.each(a=>{let s=a.data,c=a.parent&&a.parent.data;c&&o[Ee(s)]&&o[Ee(c)]&&i.add.push(at({source:c,target:s}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>o[Ee(a)]=1),n.forEach(a=>{(o[Ee(a.source)]||o[Ee(a.target)])&&i.mod.push(a)})),i}});var Dee={binary:kk,dice:U2,slice:Dc,slicedice:Tk,squarify:Ep,resquarify:Ik},$k=["x0","y0","x1","y1","depth","children"];function Yk(e){zc.call(this,e)}Yk.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:$k.length,default:$k}]};ee(Yk,zc,{layout(){let e=_k();return e.ratio=t=>{let n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{de(Dee,t)?e.tile(Dee[t]):B("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:$k});var aT={};br(aT,{label:()=>oT});var Qk=4278190080;function XMe(e,t){let n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function QMe(e,t,n,r,i){let o=e.width,a=e.height,s=r||i,c=Yo(o,a).getContext("2d"),l=Yo(o,a).getContext("2d"),u=s&&Yo(o,a).getContext("2d");n.forEach(E=>xC(c,E,!1)),xC(l,t,!1),s&&xC(u,t,!0);let f=Kk(c,o,a),d=Kk(l,o,a),p=s&&Kk(u,o,a),h=e.bitmap(),m=s&&e.bitmap(),g,v,y,C,b,M,S,w;for(v=0;v<a;++v)for(g=0;g<o;++g)b=v*o+g,M=f[b]&Qk,w=d[b]&Qk,S=s&&p[b]&Qk,(M||S||w)&&(y=e(g),C=e(v),!i&&(M||w)&&h.set(y,C),s&&(M||S)&&m.set(y,C));return[h,m]}function Kk(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function xC(e,t,n){if(!t.length)return;let r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>xC(e,o.items,n))}):i1[r].draw(e,{items:n?t.map(KMe):t})}function KMe(e){let t=zl(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?k(x({},t),{strokeOpacity:1,stroke:"#000",fillOpacity:0}):t}var Hc=5,u1=31,Dp=32,d4=new Uint32Array(Dp+1),j2=new Uint32Array(Dp+1);j2[0]=0;d4[0]=~j2[0];for(let e=1;e<=Dp;++e)j2[e]=j2[e-1]<<1|1,d4[e]=~j2[e];function ZMe(e,t){let n=new Uint32Array(~~((e*t+Dp)/Dp));function r(o,a){n[o]|=a}function i(o,a){n[o]&=a}return{array:n,get:(o,a)=>{let s=a*e+o;return n[s>>>Hc]&1<<(s&u1)},set:(o,a)=>{let s=a*e+o;r(s>>>Hc,1<<(s&u1))},clear:(o,a)=>{let s=a*e+o;i(s>>>Hc,~(1<<(s&u1)))},getRange:(o,a,s,c)=>{let l=c,u,f,d,p;for(;l>=a;--l)if(u=l*e+o,f=l*e+s,d=u>>>Hc,p=f>>>Hc,d===p){if(n[d]&d4[u&u1]&j2[(f&u1)+1])return!0}else{if(n[d]&d4[u&u1]||n[p]&j2[(f&u1)+1])return!0;for(let h=d+1;h<p;++h)if(n[h])return!0}return!1},setRange:(o,a,s,c)=>{let l,u,f,d,p;for(;a<=c;++a)if(l=a*e+o,u=a*e+s,f=l>>>Hc,d=u>>>Hc,f===d)r(f,d4[l&u1]&j2[(u&u1)+1]);else for(r(f,d4[l&u1]),r(d,j2[(u&u1)+1]),p=f+1;p<d;++p)r(p,4294967295)},clearRange:(o,a,s,c)=>{let l,u,f,d,p;for(;a<=c;++a)if(l=a*e+o,u=a*e+s,f=l>>>Hc,d=u>>>Hc,f===d)i(f,j2[l&u1]|d4[(u&u1)+1]);else for(i(f,j2[l&u1]),i(d,d4[(u&u1)+1]),p=f+1;p<d;++p)i(p,0)},outOfBounds:(o,a,s,c)=>o<0||a<0||c>=t||s>=e}}function JMe(e,t,n){let r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=s=>~~((s+n)/r);return a.invert=s=>s*r-n,a.bitmap=()=>ZMe(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function ewe(e,t,n,r){let i=e.width,o=e.height;return function(a){let s=a.datum.datum.items[r].items,c=s.length,l=a.datum.fontSize,u=T1.width(a.datum,a.datum.text),f=0,d,p,h,m,g,v,y;for(let C=0;C<c;++C)d=s[C].x,h=s[C].y,p=s[C].x2===void 0?d:s[C].x2,m=s[C].y2===void 0?h:s[C].y2,g=(d+p)/2,v=(h+m)/2,y=Math.abs(p-d+m-h),y>=f&&(f=y,a.x=g,a.y=v);return g=u/2,v=l/2,d=a.x-g,p=a.x+g,h=a.y-v,m=a.y+v,a.align="center",d<0&&p<=i?a.align="left":0<=d&&i<p&&(a.align="right"),a.baseline="middle",h<0&&m<=o?a.baseline="top":0<=h&&o<m&&(a.baseline="bottom"),!0}}function CC(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function p4(e,t,n,r,i,o,a,s){let c=i*o/(r*2),l=e(t-c),u=e(t+c),f=e(n-(o=o/2)),d=e(n+o);return a.outOfBounds(l,f,u,d)||a.getRange(l,f,u,d)||s&&s.getRange(l,f,u,d)}function twe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1];function c(l,u,f,d,p){let h=e.invert(l),m=e.invert(u),g=f,v=o,y;if(!CC(h,m,d,p,i,o)&&!p4(e,h,m,p,d,g,a,s)&&!p4(e,h,m,p,d,p,a,null)){for(;v-g>=1;)y=(g+v)/2,p4(e,h,m,p,d,y,a,s)?v=y:g=y;if(g>f)return[h,m,g,!0]}}return function(l){let u=l.datum.datum.items[r].items,f=u.length,d=l.datum.fontSize,p=T1.width(l.datum,l.datum.text),h=n?d:0,m=!1,g=!1,v=0,y,C,b,M,S,w,E,D,L,A,j,V,_,N,I,G,X;for(let J=0;J<f;++J){for(y=u[J].x,b=u[J].y,C=u[J].x2===void 0?y:u[J].x2,M=u[J].y2===void 0?b:u[J].y2,y>C&&(X=y,y=C,C=X),b>M&&(X=b,b=M,M=X),L=e(y),j=e(C),A=~~((L+j)/2),V=e(b),N=e(M),_=~~((V+N)/2),E=A;E>=L;--E)for(D=_;D>=V;--D)G=c(E,D,h,p,d),G&&([l.x,l.y,h,m]=G);for(E=A;E<=j;++E)for(D=_;D<=N;++D)G=c(E,D,h,p,d),G&&([l.x,l.y,h,m]=G);!m&&!n&&(I=Math.abs(C-y+M-b),S=(y+C)/2,w=(b+M)/2,I>=v&&!CC(S,w,p,d,i,o)&&!p4(e,S,w,d,p,d,a,null)&&(v=I,l.x=S,l.y=w,g=!0))}return m||g?(S=p/2,w=d/2,a.setRange(e(l.x-S),e(l.y-w),e(l.x+S),e(l.y+w)),l.align="center",l.baseline="middle",!0):!1}}var nwe=[-1,-1,1,1],rwe=[-1,1,-1,1];function iwe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1],c=e.bitmap();return function(l){let u=l.datum.datum.items[r].items,f=u.length,d=l.datum.fontSize,p=T1.width(l.datum,l.datum.text),h=[],m=n?d:0,g=!1,v=!1,y=0,C,b,M,S,w,E,D,L,A,j,V,_;for(let N=0;N<f;++N){for(C=u[N].x,M=u[N].y,b=u[N].x2===void 0?C:u[N].x2,S=u[N].y2===void 0?M:u[N].y2,h.push([e((C+b)/2),e((M+S)/2)]);h.length;)if([D,L]=h.pop(),!(a.get(D,L)||s.get(D,L)||c.get(D,L))){c.set(D,L);for(let I=0;I<4;++I)w=D+nwe[I],E=L+rwe[I],c.outOfBounds(w,E,w,E)||h.push([w,E]);if(w=e.invert(D),E=e.invert(L),A=m,j=o,!CC(w,E,p,d,i,o)&&!p4(e,w,E,d,p,A,a,s)&&!p4(e,w,E,d,p,d,a,null)){for(;j-A>=1;)V=(A+j)/2,p4(e,w,E,d,p,V,a,s)?j=V:A=V;A>m&&(l.x=w,l.y=E,m=A,g=!0)}}!g&&!n&&(_=Math.abs(b-C+S-M),w=(C+b)/2,E=(M+S)/2,_>=y&&!CC(w,E,p,d,i,o)&&!p4(e,w,E,d,p,d,a,null)&&(y=_,l.x=w,l.y=E,v=!0))}return g||v?(w=p/2,E=d/2,a.setRange(e(l.x-w),e(l.y-E),e(l.x+w),e(l.y+E)),l.align="center",l.baseline="middle",!0):!1}}var owe=["right","center","left"],awe=["bottom","middle","top"];function swe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1],c=r.length;return function(l){let u=l.boundary,f=l.datum.fontSize;if(u[2]<0||u[5]<0||u[0]>i||u[3]>o)return!1;let d=l.textWidth??0,p,h,m,g,v,y,C,b,M,S,w,E,D,L,A;for(let j=0;j<c;++j){if(p=(n[j]&3)-1,h=(n[j]>>>2&3)-1,m=p===0&&h===0||r[j]<0,g=p&&h?Math.SQRT1_2:1,v=r[j]<0?-1:1,y=u[1+p]+r[j]*p*g,w=u[4+h]+v*f*h/2+r[j]*h*g,b=w-f/2,M=w+f/2,E=e(y),L=e(b),A=e(M),!d)if(zee(E,E,L,A,a,s,y,y,b,M,u,m))d=T1.width(l.datum,l.datum.text);else continue;if(S=y+v*d*p/2,y=S-d/2,C=S+d/2,E=e(y),D=e(C),zee(E,D,L,A,a,s,y,C,b,M,u,m))return l.x=p?p*v<0?C:y:S,l.y=h?h*v<0?M:b:w,l.align=owe[p*v+1],l.baseline=awe[h*v+1],a.setRange(E,L,D,A),!0}return!1}}function zee(e,t,n,r,i,o,a,s,c,l,u,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}var Zk=0,Jk=4,eT=8,tT=0,nT=1,rT=2,cwe={"top-left":Zk+tT,top:Zk+nT,"top-right":Zk+rT,left:Jk+tT,middle:Jk+nT,right:Jk+rT,"bottom-left":eT+tT,bottom:eT+nT,"bottom-right":eT+rT},lwe={naive:ewe,"reduced-search":twe,floodfill:iwe};function uwe(e,t,n,r,i,o,a,s,c,l,u){if(!e.length)return e;let f=Math.max(r.length,i.length),d=fwe(r,f),p=dwe(i,f),h=pwe(e[0].datum),m=h==="group"&&e[0].datum.items[c].marktype,g=m==="area",v=hwe(h,m,s,c),y=l===null||l===1/0,C=g&&u==="naive",b=-1,M=-1,S=e.map(L=>{let A=y?T1.width(L,L.text):void 0;return b=Math.max(b,A),M=Math.max(M,L.fontSize),{datum:L,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(L),textWidth:A}});l=l===null||l===1/0?Math.max(b,M)+Math.max(...r):l;let w=JMe(t[0],t[1],l),E;if(!C){n&&S.sort((j,V)=>n(j.datum,V.datum));let L=!1;for(let j=0;j<p.length&&!L;++j)L=p[j]===5||d[j]<0;let A=(h&&a||g)&&e.map(j=>j.datum);E=o.length||A?QMe(w,A||[],o,L,g):XMe(w,a&&S)}let D=g?lwe[u](w,E,a,c):swe(w,E,p,d);return S.forEach(L=>L.opacity=+D(L)),S}function fwe(e,t){let n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function dwe(e,t){let n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=cwe[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function pwe(e){return e&&e.mark&&e.mark.marktype}function hwe(e,t,n,r){let i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{let a=o.datum.items[r].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:o=>{let a=o.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}var iT=["x","y","opacity","align","baseline"],Hee=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function oT(e){$.call(this,null,e)}oT.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Hee},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:iT.length,default:iT}]};ee(oT,$,{transform(e,t){function n(o){let a=e[o];return Ie(a)&&t.modified(a.fields)}let r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&B("Size parameter should be specified as a [width, height] array.");let i=e.as||iT;return uwe(t.materialize(t.SOURCE).source||[],e.size,e.sort,te(e.offset==null?1:e.offset),te(e.anchor||Hee),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{let a=o.datum;a[i[0]]=o.x,a[i[1]]=o.y,a[i[2]]=o.opacity,a[i[3]]=o.align,a[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});var uT={};br(uT,{loess:()=>cT,regression:()=>lT});function Lee(e,t){var n=[],r=function(u){return u(s)},i,o,a,s,c,l;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],c=t.map(r),l=i[c],l||(i[c]=l=[],l.dims=c,n.push(l)),l.push(s);return n}function cT(e){$.call(this,null,e)}cT.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ee(cT,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=Lee(r,e.groupby),o=(e.groupby||[]).map(un),a=o.length,s=e.as||[un(e.x),un(e.y)],c=[];i.forEach(l=>{ZL(l,e.x,e.y,e.bandwidth||.3).forEach(u=>{let f={};for(let d=0;d<a;++d)f[o[d]]=l.dims[d];f[s[0]]=u[0],f[s[1]]=u[1],c.push(at(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});var sT={constant:Wv,linear:Xv,log:YL,exp:XL,pow:QL,quad:Qv,poly:KL},mwe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function lT(e){$.call(this,null,e)}lT.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(sT)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ee(lT,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=Lee(r,e.groupby),o=(e.groupby||[]).map(un),a=e.method||"linear",s=e.order==null?3:e.order,c=mwe(a,s),l=e.as||[un(e.x),un(e.y)],u=sT[a],f=[],d=e.extent;de(sT,a)||B("Invalid regression method: "+a),d!=null&&a==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(p=>{if(p.length<=c){t.dataflow.warn("Skipping regression with more parameters than data points.");return}let m=u(p,e.x,e.y,s);if(e.params){f.push(at({keys:p.dims,coef:m.coef,rSquared:m.rSquared}));return}let g=d||Qi(p,e.x),v=y=>{let C={};for(let b=0;b<o.length;++b)C[o[b]]=p.dims[b];C[l[0]]=y[0],C[l[1]]=y[1],f.push(at(C))};a==="linear"||a==="constant"?g.forEach(y=>v([y,m.predict(y)])):hu(m.predict,g,25,200).forEach(v)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});var pT={};br(pT,{voronoi:()=>dT});var gt=11102230246251565e-32,or=134217729,zp=(3+8*gt)*gt;function c0(e,t,n,r,i){let o,a,s,c,l=t[0],u=r[0],f=0,d=0;u>l==u>-l?(o=l,l=t[++f]):(o=u,u=r[++d]);let p=0;if(f<e&&d<n)for(u>l==u>-l?(a=l+o,s=o-(a-l),l=t[++f]):(a=u+o,s=o-(a-u),u=r[++d]),o=a,s!==0&&(i[p++]=s);f<e&&d<n;)u>l==u>-l?(a=o+l,c=a-o,s=o-(a-c)+(l-c),l=t[++f]):(a=o+u,c=a-o,s=o-(a-c)+(u-c),u=r[++d]),o=a,s!==0&&(i[p++]=s);for(;f<e;)a=o+l,c=a-o,s=o-(a-c)+(l-c),l=t[++f],o=a,s!==0&&(i[p++]=s);for(;d<n;)a=o+u,c=a-o,s=o-(a-c)+(u-c),u=r[++d],o=a,s!==0&&(i[p++]=s);return(o!==0||p===0)&&(i[p++]=o),p}function Hp(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function re(e){return new Float64Array(e)}var gwe=(3+16*gt)*gt,vwe=(2+12*gt)*gt,ywe=(9+64*gt)*gt*gt,rf=re(4),Aee=re(8),Vee=re(12),Nee=re(16),f1=re(4);function xwe(e,t,n,r,i,o,a){let s,c,l,u,f,d,p,h,m,g,v,y,C,b,M,S,w,E,D=e-i,L=n-i,A=t-o,j=r-o;b=D*j,d=or*D,p=d-(d-D),h=D-p,d=or*j,m=d-(d-j),g=j-m,M=h*g-(b-p*m-h*m-p*g),S=A*L,d=or*A,p=d-(d-A),h=A-p,d=or*L,m=d-(d-L),g=L-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,rf[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,rf[1]=C-(v+f)+(f-S),E=y+v,f=E-y,rf[2]=y-(E-f)+(v-f),rf[3]=E;let V=Hp(4,rf),_=vwe*a;if(V>=_||-V>=_||(f=e-D,s=e-(D+f)+(f-i),f=n-L,l=n-(L+f)+(f-i),f=t-A,c=t-(A+f)+(f-o),f=r-j,u=r-(j+f)+(f-o),s===0&&c===0&&l===0&&u===0)||(_=ywe*a+zp*Math.abs(V),V+=D*u+j*s-(A*l+L*c),V>=_||-V>=_))return V;b=s*j,d=or*s,p=d-(d-s),h=s-p,d=or*j,m=d-(d-j),g=j-m,M=h*g-(b-p*m-h*m-p*g),S=c*L,d=or*c,p=d-(d-c),h=c-p,d=or*L,m=d-(d-L),g=L-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,f1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,f1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,f1[2]=y-(E-f)+(v-f),f1[3]=E;let N=c0(4,rf,4,f1,Aee);b=D*u,d=or*D,p=d-(d-D),h=D-p,d=or*u,m=d-(d-u),g=u-m,M=h*g-(b-p*m-h*m-p*g),S=A*l,d=or*A,p=d-(d-A),h=A-p,d=or*l,m=d-(d-l),g=l-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,f1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,f1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,f1[2]=y-(E-f)+(v-f),f1[3]=E;let I=c0(N,Aee,4,f1,Vee);b=s*u,d=or*s,p=d-(d-s),h=s-p,d=or*u,m=d-(d-u),g=u-m,M=h*g-(b-p*m-h*m-p*g),S=c*l,d=or*c,p=d-(d-c),h=c-p,d=or*l,m=d-(d-l),g=l-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,f1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,f1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,f1[2]=y-(E-f)+(v-f),f1[3]=E;let G=c0(I,Vee,4,f1,Nee);return Nee[G-1]}function of(e,t,n,r,i,o){let a=(t-o)*(n-i),s=(e-i)*(r-o),c=a-s,l=Math.abs(a+s);return Math.abs(c)>=gwe*l?c:-xwe(e,t,n,r,i,o,l)}var n4t=(7+56*gt)*gt,r4t=(3+28*gt)*gt,i4t=(26+288*gt)*gt*gt,o4t=re(4),a4t=re(4),s4t=re(4),c4t=re(4),l4t=re(4),u4t=re(4),f4t=re(4),d4t=re(4),p4t=re(4),h4t=re(8),m4t=re(8),g4t=re(8),v4t=re(4),y4t=re(8),x4t=re(8),C4t=re(8),b4t=re(12),M4t=re(192),w4t=re(192);var D4t=(10+96*gt)*gt,z4t=(4+48*gt)*gt,H4t=(44+576*gt)*gt*gt,L4t=re(4),A4t=re(4),V4t=re(4),N4t=re(4),_4t=re(4),k4t=re(4),T4t=re(4),I4t=re(4),F4t=re(8),R4t=re(8),O4t=re(8),P4t=re(8),$4t=re(8),B4t=re(8),U4t=re(8),j4t=re(8),q4t=re(8),G4t=re(4),W4t=re(4),Y4t=re(4),X4t=re(8),Q4t=re(16),K4t=re(16),Z4t=re(16),J4t=re(32),elt=re(32),tlt=re(48),nlt=re(64),rlt=re(1152),ilt=re(1152);var clt=(16+224*gt)*gt,llt=(5+72*gt)*gt,ult=(71+1408*gt)*gt*gt,flt=re(4),dlt=re(4),plt=re(4),hlt=re(4),mlt=re(4),glt=re(4),vlt=re(4),ylt=re(4),xlt=re(4),Clt=re(4),blt=re(24),Mlt=re(24),wlt=re(24),Slt=re(24),Elt=re(24),Dlt=re(24),zlt=re(24),Hlt=re(24),Llt=re(24),Alt=re(24),Vlt=re(1152),Nlt=re(1152),_lt=re(1152),klt=re(1152),Tlt=re(1152),Ilt=re(2304),Flt=re(2304),Rlt=re(3456),Olt=re(5760),Plt=re(8),$lt=re(8),Blt=re(8),Ult=re(16),jlt=re(24),qlt=re(48),Glt=re(48),Wlt=re(96),Ylt=re(192),Xlt=re(384),Qlt=re(384),Klt=re(384),Zlt=re(768);var Jlt=re(96),e0t=re(96),t0t=re(96),n0t=re(1152);var kee=Math.pow(2,-52),bC=new Uint32Array(512),Ap=class e{static from(t,n=Ewe,r=Dwe){let i=t.length,o=new Float64Array(i*2);for(let a=0;a<i;a++){let s=t[a];o[2*a]=n(s),o[2*a+1]=r(s)}return new e(o)}constructor(t){let n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;let r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){let{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,a=t.length>>1,s=1/0,c=1/0,l=-1/0,u=-1/0;for(let D=0;D<a;D++){let L=t[2*D],A=t[2*D+1];L<s&&(s=L),A<c&&(c=A),L>l&&(l=L),A>u&&(u=A),this._ids[D]=D}let f=(s+l)/2,d=(c+u)/2,p,h,m;for(let D=0,L=1/0;D<a;D++){let A=fT(f,d,t[2*D],t[2*D+1]);A<L&&(p=D,L=A)}let g=t[2*p],v=t[2*p+1];for(let D=0,L=1/0;D<a;D++){if(D===p)continue;let A=fT(g,v,t[2*D],t[2*D+1]);A<L&&A>0&&(h=D,L=A)}let y=t[2*h],C=t[2*h+1],b=1/0;for(let D=0;D<a;D++){if(D===p||D===h)continue;let L=wwe(g,v,y,C,t[2*D],t[2*D+1]);L<b&&(m=D,b=L)}let M=t[2*m],S=t[2*m+1];if(b===1/0){for(let A=0;A<a;A++)this._dists[A]=t[2*A]-t[0]||t[2*A+1]-t[1];af(this._ids,this._dists,0,a-1);let D=new Uint32Array(a),L=0;for(let A=0,j=-1/0;A<a;A++){let V=this._ids[A],_=this._dists[V];_>j&&(D[L++]=V,j=_)}this.hull=D.subarray(0,L),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(of(g,v,y,C,M,S)<0){let D=h,L=y,A=C;h=m,y=M,C=S,m=D,M=L,S=A}let w=Swe(g,v,y,C,M,S);this._cx=w.x,this._cy=w.y;for(let D=0;D<a;D++)this._dists[D]=fT(t[2*D],t[2*D+1],w.x,w.y);af(this._ids,this._dists,0,a-1),this._hullStart=p;let E=3;r[p]=n[m]=h,r[h]=n[p]=m,r[m]=n[h]=p,i[p]=0,i[h]=1,i[m]=2,o.fill(-1),o[this._hashKey(g,v)]=p,o[this._hashKey(y,C)]=h,o[this._hashKey(M,S)]=m,this.trianglesLen=0,this._addTriangle(p,h,m,-1,-1,-1);for(let D=0,L,A;D<this._ids.length;D++){let j=this._ids[D],V=t[2*j],_=t[2*j+1];if(D>0&&Math.abs(V-L)<=kee&&Math.abs(_-A)<=kee||(L=V,A=_,j===p||j===h||j===m))continue;let N=0;for(let we=0,Se=this._hashKey(V,_);we<this._hashSize&&(N=o[(Se+we)%this._hashSize],!(N!==-1&&N!==r[N]));we++);N=n[N];let I=N,G;for(;G=r[I],of(V,_,t[2*I],t[2*I+1],t[2*G],t[2*G+1])>=0;)if(I=G,I===N){I=-1;break}if(I===-1)continue;let X=this._addTriangle(I,j,r[I],-1,-1,i[I]);i[j]=this._legalize(X+2),i[I]=X,E++;let J=r[I];for(;G=r[J],of(V,_,t[2*J],t[2*J+1],t[2*G],t[2*G+1])<0;)X=this._addTriangle(J,j,G,i[j],-1,i[J]),i[j]=this._legalize(X+2),r[J]=J,E--,J=G;if(I===N)for(;G=n[I],of(V,_,t[2*G],t[2*G+1],t[2*I],t[2*I+1])<0;)X=this._addTriangle(G,j,I,-1,i[I],i[G]),this._legalize(X+2),i[G]=X,r[I]=I,E--,I=G;this._hullStart=n[j]=I,r[I]=n[J]=j,r[j]=J,o[this._hashKey(V,_)]=j,o[this._hashKey(t[2*I],t[2*I+1])]=I}this.hull=new Uint32Array(E);for(let D=0,L=this._hullStart;D<E;D++)this.hull[D]=L,L=r[L];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(bwe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){let{_triangles:n,_halfedges:r,coords:i}=this,o=0,a=0;for(;;){let s=r[t],c=t-t%3;if(a=c+(t+2)%3,s===-1){if(o===0)break;t=bC[--o];continue}let l=s-s%3,u=c+(t+1)%3,f=l+(s+2)%3,d=n[a],p=n[t],h=n[u],m=n[f];if(Mwe(i[2*d],i[2*d+1],i[2*p],i[2*p+1],i[2*h],i[2*h+1],i[2*m],i[2*m+1])){n[t]=m,n[s]=d;let v=r[f];if(v===-1){let C=this._hullStart;do{if(this._hullTri[C]===f){this._hullTri[C]=t;break}C=this._hullPrev[C]}while(C!==this._hullStart)}this._link(t,v),this._link(s,r[a]),this._link(a,f);let y=l+(s+1)%3;o<bC.length&&(bC[o++]=y)}else{if(o===0)break;t=bC[--o]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,a){let s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=n,this._triangles[s+2]=r,this._link(s,i),this._link(s+1,o),this._link(s+2,a),this.trianglesLen+=3,s}};function bwe(e,t){let n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function fT(e,t,n,r){let i=e-n,o=t-r;return i*i+o*o}function Mwe(e,t,n,r,i,o,a,s){let c=e-a,l=t-s,u=n-a,f=r-s,d=i-a,p=o-s,h=c*c+l*l,m=u*u+f*f,g=d*d+p*p;return c*(f*g-m*p)-l*(u*g-m*d)+h*(u*p-f*d)<0}function wwe(e,t,n,r,i,o){let a=n-e,s=r-t,c=i-e,l=o-t,u=a*a+s*s,f=c*c+l*l,d=.5/(a*l-s*c),p=(l*u-s*f)*d,h=(a*f-c*u)*d;return p*p+h*h}function Swe(e,t,n,r,i,o){let a=n-e,s=r-t,c=i-e,l=o-t,u=a*a+s*s,f=c*c+l*l,d=.5/(a*l-s*c),p=e+(l*u-s*f)*d,h=t+(a*f-c*u)*d;return{x:p,y:h}}function af(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){let o=e[i],a=t[o],s=i-1;for(;s>=n&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=o}else{let i=n+r>>1,o=n+1,a=r;Lp(e,i,o),t[e[n]]>t[e[r]]&&Lp(e,n,r),t[e[o]]>t[e[r]]&&Lp(e,o,r),t[e[n]]>t[e[o]]&&Lp(e,n,o);let s=e[o],c=t[s];for(;;){do o++;while(t[e[o]]<c);do a--;while(t[e[a]]>c);if(a<o)break;Lp(e,o,a)}e[n+1]=e[a],e[a]=s,r-o+1>=a-n?(af(e,t,o,r),af(e,t,n,a-1)):(af(e,t,n,a-1),af(e,t,o,r))}}function Lp(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function Ewe(e){return e[0]}function Dwe(e){return e[1]}var q2=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;let i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}};var l0=class{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}};var MC=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this,o,a,s=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,v=r.length,y,C;m<v;m+=3,g+=2){let b=r[m]*2,M=r[m+1]*2,S=r[m+2]*2,w=t[b],E=t[b+1],D=t[M],L=t[M+1],A=t[S],j=t[S+1],V=D-w,_=L-E,N=A-w,I=j-E,G=(V*I-_*N)*2;if(Math.abs(G)<1e-9){if(o===void 0){o=a=0;for(let J of n)o+=t[J*2],a+=t[J*2+1];o/=n.length,a/=n.length}let X=1e9*Math.sign((o-w)*I-(a-E)*N);y=(w+A)/2-X*I,C=(E+j)/2+X*N}else{let X=1/G,J=V*V+_*_,we=N*N+I*I;y=w+(I*J-_*we)*X,C=E+(V*we-N*J)*X}s[g]=y,s[g+1]=C}let c=n[n.length-1],l,u=c*4,f,d=t[2*c],p,h=t[2*c+1];i.fill(0);for(let m=0;m<n.length;++m)c=n[m],l=u,f=d,p=h,u=c*4,d=t[2*c],h=t[2*c+1],i[l+2]=i[u]=p-h,i[l+3]=i[u+1]=d-f}render(t){let n=t==null?t=new q2:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:a,vectors:s}=this;if(o.length<=1)return null;for(let u=0,f=r.length;u<f;++u){let d=r[u];if(d<u)continue;let p=Math.floor(u/3)*2,h=Math.floor(d/3)*2,m=a[p],g=a[p+1],v=a[h],y=a[h+1];this._renderSegment(m,g,v,y,t)}let c,l=o[o.length-1];for(let u=0;u<o.length;++u){c=l,l=o[u];let f=Math.floor(i[l]/3)*2,d=a[f],p=a[f+1],h=c*4,m=this._project(d,p,s[h+2],s[h+3]);m&&this._renderSegment(d,p,m[0],m[1],t)}return n&&n.value()}renderBounds(t){let n=t==null?t=new q2:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){let r=n==null?n=new q2:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let a=2;a<o;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),r&&r.value()}*cellPolygons(){let{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){let i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){let n=new l0;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let a,s=this._regioncode(t,n),c=this._regioncode(r,i);s===0&&c===0?(o.moveTo(t,n),o.lineTo(r,i)):(a=this._clipSegment(t,n,r,i,s,c))&&(o.moveTo(a[0],a[1]),o.lineTo(a[2],a[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){let n=this._clip(t);if(n)for(let r of this.delaunay.neighbors(t)){let i=this._clip(r);if(i){e:for(let o=0,a=n.length;o<a;o+=2)for(let s=0,c=i.length;s<c;s+=2)if(n[o]===i[s]&&n[o+1]===i[s+1]&&n[(o+2)%a]===i[(s+c-2)%c]&&n[(o+3)%a]===i[(s+c-1)%c]){yield r;break e}}}}_cell(t){let{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,a=r[t];if(a===-1)return null;let s=[],c=a;do{let l=Math.floor(c/3);if(s.push(n[l*2],n[l*2+1]),c=c%3===2?c-2:c+1,o[c]!==t)break;c=i[c]}while(c!==a&&c!==-1);return s}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let n=this._cell(t);if(n===null)return null;let{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){let r=n.length,i=null,o,a,s=n[r-2],c=n[r-1],l,u=this._regioncode(s,c),f,d=0;for(let p=0;p<r;p+=2)if(o=s,a=c,s=n[p],c=n[p+1],l=u,u=this._regioncode(s,c),l===0&&u===0)f=d,d=0,i?i.push(s,c):i=[s,c];else{let h,m,g,v,y;if(l===0){if((h=this._clipSegment(o,a,s,c,l,u))===null)continue;[m,g,v,y]=h}else{if((h=this._clipSegment(s,c,o,a,u,l))===null)continue;[v,y,m,g]=h,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(v,y),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(v,y):i=[v,y]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,a){let s=o<a;for(s&&([t,n,r,i,o,a]=[r,i,t,n,a,o]);;){if(o===0&&a===0)return s?[r,i,t,n]:[t,n,r,i];if(o&a)return null;let c,l,u=o||a;u&8?(c=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):u&4?(c=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):u&2?(l=n+(i-n)*(this.xmax-t)/(r-t),c=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),c=this.xmin),o?(t=c,n=l,o=this._regioncode(t,n)):(r=c,i=l,a=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,a){let s=Array.from(n),c;if((c=this._project(s[0],s[1],r,i))&&s.unshift(c[0],c[1]),(c=this._project(s[s.length-2],s[s.length-1],o,a))&&s.push(c[0],c[1]),s=this._clipFinite(t,s))for(let l=0,u=s.length,f,d=this._edgecode(s[u-2],s[u-1]);l<u;l+=2)f=d,d=this._edgecode(s[l],s[l+1]),f&&d&&(l=this._edge(t,f,d,s,l),u=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,n,r,i,o){for(;n!==r;){let a,s;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,s=this.ymin;break}(i[o]!==a||i[o+1]!==s)&&this.contains(t,a,s)&&(i.splice(o,0,a,s),o+=2)}return o}_project(t,n,r,i){let o=1/0,a,s,c;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<o&&(c=this.ymin,s=t+(o=a)*r)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<o&&(c=this.ymax,s=t+(o=a)*r)}if(r>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/r)<o&&(s=this.xmax,c=n+(o=a)*i)}else if(r<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/r)<o&&(s=this.xmin,c=n+(o=a)*i)}return[s,c]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){let r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};var zwe=2*Math.PI,sf=Math.pow;function Hwe(e){return e[0]}function Lwe(e){return e[1]}function Awe(e){let{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){let i=2*t[r],o=2*t[r+1],a=2*t[r+2];if((n[a]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function Vwe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}var Vp=class e{static from(t,n=Hwe,r=Lwe,i){return new e("length"in t?Nwe(t,n,r,i):Float64Array.from(_we(t,n,r,i)))}constructor(t){this._delaunator=new Ap(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Awe(t)){this.collinear=Int32Array.from({length:n.length/2},(d,p)=>p).sort((d,p)=>n[2*d]-n[2*p]||n[2*d+1]-n[2*p+1]);let c=this.collinear[0],l=this.collinear[this.collinear.length-1],u=[n[2*c],n[2*c+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let d=0,p=n.length/2;d<p;++d){let h=Vwe(n[2*d],n[2*d+1],f);n[2*d]=h[0],n[2*d+1]=h[1]}this._delaunator=new Ap(n)}else delete this.collinear;let r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let c=0,l=r.length;c<l;++c){let u=o[c%3===2?c-2:c+1];(r[c]===-1||a[u]===-1)&&(a[u]=c)}for(let c=0,l=i.length;c<l;++c)s[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],a[i[0]]=1,i.length===2&&(a[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new MC(this,t)}*neighbors(t){let{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:a,collinear:s}=this;if(s){let f=s.indexOf(t);f>0&&(yield s[f-1]),f<s.length-1&&(yield s[f+1]);return}let c=n[t];if(c===-1)return;let l=c,u=-1;do{if(yield u=a[l],l=l%3===2?l-2:l+1,a[l]!==t)return;if(l=o[l],l===-1){let f=r[(i[t]+1)%r.length];f!==u&&(yield f);return}}while(l!==c)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;let i=r,o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){let{inedges:i,hull:o,_hullIndex:a,halfedges:s,triangles:c,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let u=t,f=sf(n-l[t*2],2)+sf(r-l[t*2+1],2),d=i[t],p=d;do{let h=c[p],m=sf(n-l[h*2],2)+sf(r-l[h*2+1],2);if(m<f&&(f=m,u=h),p=p%3===2?p-2:p+1,c[p]!==t)break;if(p=s[p],p===-1){if(p=o[(a[t]+1)%o.length],p!==h&&sf(n-l[p*2],2)+sf(r-l[p*2+1],2)<f)return p;break}}while(p!==d);return u}render(t){let n=t==null?t=new q2:void 0,{points:r,halfedges:i,triangles:o}=this;for(let a=0,s=i.length;a<s;++a){let c=i[a];if(c<a)continue;let l=o[a]*2,u=o[c]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;let r=t==null?t=new q2:void 0,{points:i}=this;for(let o=0,a=i.length;o<a;o+=2){let s=i[o],c=i[o+1];t.moveTo(s+n,c),t.arc(s,c,n,0,zwe)}return r&&r.value()}renderHull(t){let n=t==null?t=new q2:void 0,{hull:r,points:i}=this,o=r[0]*2,a=r.length;t.moveTo(i[o],i[o+1]);for(let s=1;s<a;++s){let c=2*r[s];t.lineTo(i[c],i[c+1])}return t.closePath(),n&&n.value()}hullPolygon(){let t=new l0;return this.renderHull(t),t.value()}renderTriangle(t,n){let r=n==null?n=new q2:void 0,{points:i,triangles:o}=this,a=o[t*=3]*2,s=o[t+1]*2,c=o[t+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[s],i[s+1]),n.lineTo(i[c],i[c+1]),n.closePath(),r&&r.value()}*trianglePolygons(){let{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){let n=new l0;return this.renderTriangle(t,n),n.value()}};function Nwe(e,t,n,r){let i=e.length,o=new Float64Array(i*2);for(let a=0;a<i;++a){let s=e[a];o[a*2]=t.call(r,s,a,e),o[a*2+1]=n.call(r,s,a,e)}return o}function*_we(e,t,n,r){let i=0;for(let o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function dT(e){$.call(this,null,e)}dT.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var kwe=[-1e5,-1e5,1e5,1e5];ee(dT,$,{transform(e,t){let n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:kwe;let o=this.value=Vp.from(r,e.x,e.y).voronoi(i);for(let a=0,s=r.length;a<s;++a){let c=o.cellPolygon(a);r[a][n]=c&&!Iwe(c)?Twe(c):null}return t.reflow(e.modified()).modifies(n)}});function Twe(e){let t=e[0][0],n=e[0][1],r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Iwe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}var gT={};br(gT,{wordcloud:()=>mT});var hT=Math.PI/180,Np=64,wC=2048;function Fwe(){var e=[256,256],t,n,r,i,o,a,s,c=Tee,l=[],u=Math.random,f={};f.layout=function(){for(var h=d(Yo()),m=Uwe((e[0]>>5)*e[1]),g=null,v=l.length,y=-1,C=[],b=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:o(S),rotate:a(S),size:~~(r(S)+1e-14),padding:s(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,w)=>w.size-S.size);++y<v;){var M=b[y];M.x=e[0]*(u()+.5)>>1,M.y=e[1]*(u()+.5)>>1,Rwe(h,M,b,y),M.hasText&&p(m,M,g)&&(C.push(M),g?Pwe(g,M):g=[{x:M.x+M.x0,y:M.y+M.y0},{x:M.x+M.x1,y:M.y+M.y1}],M.x-=e[0]>>1,M.y-=e[1]>>1)}return C};function d(h){h.width=h.height=1;var m=Math.sqrt(h.getContext("2d").getImageData(0,0,1,1).data.length>>2);h.width=(Np<<5)/m,h.height=wC/m;var g=h.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function p(h,m,g){for(var v=m.x,y=m.y,C=Math.sqrt(e[0]*e[0]+e[1]*e[1]),b=c(e),M=u()<.5?1:-1,S=-M,w,E,D;(w=b(S+=M))&&(E=~~w[0],D=~~w[1],!(Math.min(Math.abs(E),Math.abs(D))>=C));)if(m.x=v+E,m.y=y+D,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!Owe(m,h,e[0]))&&(!g||$we(m,g))){for(var L=m.sprite,A=m.width>>5,j=e[0]>>5,V=m.x-(A<<4),_=V&127,N=32-_,I=m.y1-m.y0,G=(m.y+m.y0)*j+(V>>5),X,J=0;J<I;J++){X=0;for(var we=0;we<=A;we++)h[G+we]|=X<<N|(we<A?(X=L[J*A+we])>>>_:0);G+=j}return m.sprite=null,!0}return!1}return f.words=function(h){return arguments.length?(l=h,f):l},f.size=function(h){return arguments.length?(e=[+h[0],+h[1]],f):e},f.font=function(h){return arguments.length?(n=u0(h),f):n},f.fontStyle=function(h){return arguments.length?(i=u0(h),f):i},f.fontWeight=function(h){return arguments.length?(o=u0(h),f):o},f.rotate=function(h){return arguments.length?(a=u0(h),f):a},f.text=function(h){return arguments.length?(t=u0(h),f):t},f.spiral=function(h){return arguments.length?(c=jwe[h]||h,f):c},f.fontSize=function(h){return arguments.length?(r=u0(h),f):r},f.padding=function(h){return arguments.length?(s=u0(h),f):s},f.random=function(h){return arguments.length?(u=h,f):u},f}function Rwe(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(Np<<5)/o,wC/o);var a=0,s=0,c=0,l=n.length,u,f,d,p,h;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,u=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*hT),g=Math.cos(t.rotate*hT),v=u*g,y=u*m,C=d*g,b=d*m;u=Math.max(Math.abs(v+b),Math.abs(v-b))+31>>5<<5,d=~~Math.max(Math.abs(y+C),Math.abs(y-C))}else u=u+31>>5<<5;if(d>c&&(c=d),a+u>=Np<<5&&(a=0,s+=c,c=0),s+d>=wC)break;i.translate((a+(u>>1))/o,(s+(d>>1))/o),t.rotate&&i.rotate(t.rotate*hT),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=u,t.height=d,t.xoff=a,t.yoff=s,t.x1=u>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=u}for(var M=i.getImageData(0,0,(Np<<5)/o,wC/o).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(u=t.width,f=u>>5,d=t.y1-t.y0,p=0;p<d*f;p++)S[p]=0;if(a=t.xoff,a==null)return;s=t.yoff;var w=0,E=-1;for(h=0;h<d;h++){for(p=0;p<u;p++){var D=f*h+(p>>5),L=M[(s+h)*(Np<<5)+(a+p)<<2]?1<<31-p%32:0;S[D]|=L,w|=L}w?E=h:(t.y0++,d--,h--,s++)}t.y1=t.y0+E,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function Owe(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),a=o&127,s=32-a,c=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),u,f=0;f<c;f++){u=0;for(var d=0;d<=i;d++)if((u<<s|(d<i?(u=r[f*i+d])>>>a:0))&t[l+d])return!0;l+=n}return!1}function Pwe(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function $we(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Tee(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Bwe(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var a=o<0?-1:1;switch(Math.sqrt(1+4*a*o)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Uwe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function u0(e){return typeof e=="function"?e:function(){return e}}var jwe={archimedean:Tee,rectangular:Bwe},Iee=["x","y","font","fontSize","fontStyle","fontWeight","angle"],qwe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function mT(e){$.call(this,Fwe(),e)}mT.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Iee}]};ee(mT,$,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&B("Wordcloud size dimensions must be non-zero.");function n(h){let m=e[h];return Ie(m)&&t.modified(m.fields)}let r=e.modified();if(!(r||t.changed(t.ADD_REM)||qwe.some(n)))return;let i=t.materialize(t.SOURCE).source,o=this.value,a=e.as||Iee,s=e.fontSize||14,c;if(Ie(s)?c=e.fontSizeRange:s=hn(s),c){let h=s,m=lt("sqrt")().domain(Qi(i,h)).range(c);s=g=>m(h(g))}i.forEach(h=>{h[a[0]]=NaN,h[a[1]]=NaN,h[a[3]]=0});let l=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(n1).layout(),u=o.size(),f=u[0]>>1,d=u[1]>>1,p=l.length;for(let h=0,m,g;h<p;++h)m=l[h],g=m.datum,g[a[0]]=m.x+f,g[a[1]]=m.y+d,g[a[2]]=m.font,g[a[3]]=m.size,g[a[4]]=m.style,g[a[5]]=m.weight,g[a[6]]=m.rotate;return t.reflow(r).modifies(a)}});var xT={};br(xT,{crossfilter:()=>vT,resolvefilter:()=>yT});var Gwe=e=>new Uint8Array(e),Wwe=e=>new Uint16Array(e),_p=e=>new Uint32Array(e);function Ywe(){let e=8,t=[],n=_p(0),r=SC(0,e),i=SC(0,e);return{data:()=>t,seen:()=>n=Xwe(n,t.length),add(o){for(let a=0,s=t.length,c=o.length,l;a<c;++a)l=o[a],l._index=s++,t.push(l)},remove(o,a){let s=t.length,c=Array(s-o),l=t,u,f,d;for(f=0;!a[f]&&f<s;++f)c[f]=t[f],l[f]=f;for(d=f;f<s;++f)u=t[f],a[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],c[d]=u,u._index=d++),r[f]=0;return t=c,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,a){r[o]|=a},clear(o,a){r[o]&=~a},resize(o,a){let s=r.length;(o>s||a>e)&&(e=Math.max(a,e),r=SC(o,e,r),i=SC(o,e))}}}function Xwe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function SC(e,t,n){let r=(t<257?Gwe:t<65537?Wwe:_p)(e);return n&&r.set(n),r}function Fee(e,t,n){let r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){let a=this,s=a.bisect(a.range,i.value),c=i.index,l=s[0],u=s[1],f=c.length,d;for(d=0;d<l;++d)o[c[d]]|=r;for(d=u;d<f;++d)o[c[d]]|=r;return a}}}function Ree(){let e=_p(0),t=[],n=0;function r(s,c,l){if(!c.length)return[];let u=n,f=c.length,d=_p(f),p=Array(f),h,m,g;for(g=0;g<f;++g)p[g]=s(c[g]),d[g]=g;if(p=Qwe(p,d),u)h=t,m=e,t=Array(u+f),e=_p(u+f),Kwe(l,h,m,u,p,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=p,e=d}return n=u+f,{index:d,value:p}}function i(s,c){let l=n,u,f,d;for(f=0;!c[e[f]]&&f<l;++f);for(d=f;f<l;++f)c[u=e[f]]||(e[d]=u,t[d]=t[f],++d);n=l-s}function o(s){for(let c=0,l=n;c<l;++c)e[c]=s[e[c]]}function a(s,c){let l;return c?l=c.length:(c=t,l=n),[GH(c,s[0],0,l),ml(c,s[1],0,l)]}return{insert:r,remove:i,bisect:a,reindex:o,index:()=>e,size:()=>n}}function Qwe(e,t){return e.sort.call(t,(n,r)=>{let i=e[n],o=e[r];return i<o?-1:i>o?1:0}),cv(e,t)}function Kwe(e,t,n,r,i,o,a,s,c){let l=0,u=0,f;for(f=0;l<r&&u<a;++f)t[l]<i[u]?(s[f]=t[l],c[f]=n[l++]):(s[f]=i[u],c[f]=o[u++]+e);for(;l<r;++l,++f)s[f]=t[l],c[f]=n[l];for(;u<a;++u,++f)s[f]=i[u],c[f]=o[u]+e}function vT(e){$.call(this,Ywe(),e),this._indices=null,this._dims=null}vT.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ee(vT,$,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){let n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length,s=0,c,l;for(;s<a;++s)c=n[s].fname,l=i[c]||(i[c]=Ree()),o.push(Fee(l,s,r[s]));return this.eval(e,t)},reinit(e,t){let n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,c=s.curr(),l=s.prev(),u=s.all(),f=n.rem=n.add,d=n.mod,p=i.length,h={},m,g,v,y,C,b,M,S,w;if(l.set(c),t.rem.length&&(C=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(b={},y=t.mod,M=0,S=y.length;M<S;++M)b[y[M]._index]=1;for(M=0;M<p;++M)w=r[M],(!a[M]||e.modified("fields",M)||t.modified(w.fields))&&(v=w.fname,(m=h[v])||(o[v]=g=Ree(),h[v]=m=g.insert(w,t.source,0)),a[M]=Fee(g,M,i[M]).onAdd(m,c));for(M=0,S=s.data().length;M<S;++M)C[M]||(l[M]!==c[M]?f.push(M):b[M]&&c[M]!==u&&d.push(M));return s.mask=(1<<p)-1,n},eval(e,t){let n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){let r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,c={},l=n.add,u=i.size()+r.length,f=o.length,d=i.size(),p,h,m;i.resize(u,f),i.add(r);let g=i.curr(),v=i.prev(),y=i.all();for(p=0;p<f;++p)h=s[p].fname,m=c[h]||(c[h]=a[h].insert(s[p],r,d)),o[p].onAdd(m,g);for(;d<u;++d)v[d]=y,g[d]!==y&&l.push(d)},modify(e,t){let n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod,s,c,l;for(s=0,c=a.length;s<c;++s)l=a[s]._index,i[l]!==o&&n.push(l)},remove(e,t,n){let r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),c={},l=n.rem,u=t.rem,f,d,p,h;for(f=0,d=u.length;f<d;++f)p=u[f]._index,c[p]=1,a[p]=h=o[p],o[p]=s,h!==s&&l.push(p);for(p in r)r[p].remove(d,c);return this.reindex(t,d,c),c},reindex(e,t,n){let r=this._indices,i=this.value;e.runAfter(()=>{let o=i.remove(t,n);for(let a in r)r[a].reindex(o)})},update(e,t,n){let r=this._dims,i=e.query,o=t.stamp,a=r.length,s=0,c,l;for(n.filters=0,l=0;l<a;++l)e.modified("query",l)&&(c=l,++s);if(s===1)s=r[c].one,this.incrementOne(r[c],i[c],n.add,n.rem);else for(l=0,s=0;l<a;++l)e.modified("query",l)&&(s|=r[l].one,this.incrementAll(r[l],i[l],o,n.add),n.rem=n.add);return s},incrementAll(e,t,n,r){let i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),c=e.index(),l=e.bisect(e.range),u=e.bisect(t),f=u[0],d=u[1],p=l[0],h=l[1],m=e.one,g,v,y;if(f<p)for(g=f,v=Math.min(p,d);g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;else if(f>p)for(g=p,v=Math.min(f,h);g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;if(d>h)for(g=Math.max(f,h),v=d;g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;else if(d<h)for(g=Math.max(p,d),v=h;g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;e.range=t.slice()},incrementOne(e,t,n,r){let i=this.value,o=i.curr(),a=e.index(),s=e.bisect(e.range),c=e.bisect(t),l=c[0],u=c[1],f=s[0],d=s[1],p=e.one,h,m,g;if(l<f)for(h=l,m=Math.min(f,u);h<m;++h)g=a[h],o[g]^=p,n.push(g);else if(l>f)for(h=f,m=Math.min(l,d);h<m;++h)g=a[h],o[g]^=p,r.push(g);if(u>d)for(h=Math.max(l,d),m=u;h<m;++h)g=a[h],o[g]^=p,n.push(g);else if(u<d)for(h=Math.max(f,u),m=d;h<m;++h)g=a[h],o[g]^=p,r.push(g);e.range=t.slice()}});function yT(e){$.call(this,null,e)}yT.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ee(yT,$,{transform(e,t){let n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;let o=t.fork(t.ALL),a=r.data(),s=r.curr(),c=r.prev(),l=u=>s[u]&n?null:a[u];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,u=>{let f=s[u]&n;return!f&&f^c[u]&n?a[u]:null}),o.filter(o.REM,u=>{let f=s[u]&n;return f&&!(f^(f^c[u]&n))?a[u]:null})):(o.filter(o.ADD,l),o.filter(o.REM,u=>(s[u]&n)===i?a[u]:null)),o.filter(o.SOURCE,u=>l(u._index))}});var Zwe="RawCode",Ac="Literal",Jwe="Property",eSe="Identifier",tSe="ArrayExpression",nSe="BinaryExpression",ET="CallExpression",rSe="ConditionalExpression",iSe="LogicalExpression",oSe="MemberExpression",aSe="ObjectExpression",sSe="UnaryExpression";function G2(e){this.type=e}G2.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=cSe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function cSe(e){switch(e.type){case tSe:return e.elements;case nSe:case iSe:return[e.left,e.right];case ET:return[e.callee].concat(e.arguments);case rSe:return[e.test,e.consequent,e.alternate];case oSe:return[e.object,e.property];case aSe:return e.properties;case Jwe:return[e.key,e.value];case sSe:return[e.argument];case eSe:case Ac:case Zwe:default:return[]}}var as,Me,q,Hi,Ot,zC=1,Rp=2,f0=3,h4=4,HC=5,p0=6,R1=7,Op=8,lSe=9;as={};as[zC]="Boolean";as[Rp]="<end>";as[f0]="Identifier";as[h4]="Keyword";as[HC]="Null";as[p0]="Numeric";as[R1]="Punctuator";as[Op]="String";as[lSe]="RegularExpression";var uSe="ArrayExpression",fSe="BinaryExpression",dSe="CallExpression",pSe="ConditionalExpression",Gee="Identifier",hSe="Literal",mSe="LogicalExpression",gSe="MemberExpression",vSe="ObjectExpression",ySe="Property",xSe="UnaryExpression",Vr="Unexpected token %0",CSe="Unexpected number",bSe="Unexpected string",MSe="Unexpected identifier",wSe="Unexpected reserved word",SSe="Unexpected end of input",wT="Invalid regular expression",CT="Invalid regular expression: missing /",Wee="Octal literals are not allowed in strict mode.",ESe="Duplicate data property in object literal not allowed in strict mode",ni="ILLEGAL",Ip="Disabled.",DSe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),zSe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function LC(e,t){if(!e)throw new Error("ASSERT: "+t)}function Lc(e){return e>=48&&e<=57}function DT(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Tp(e){return"01234567".indexOf(e)>=0}function HSe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Fp(e){return e===10||e===13||e===8232||e===8233}function Pp(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&DSe.test(String.fromCharCode(e))}function DC(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&zSe.test(String.fromCharCode(e))}var LSe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Yee(){for(;q<Hi;){let e=Me.charCodeAt(q);if(HSe(e)||Fp(e))++q;else break}}function ST(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)q<Hi&&DT(Me[q])?(r=Me[q++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Ht({},Vr,ni);return String.fromCharCode(i)}function ASe(){var e,t,n,r;for(e=Me[q],t=0,e==="}"&&Ht({},Vr,ni);q<Hi&&(e=Me[q++],!!DT(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Ht({},Vr,ni),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function Xee(){var e,t;for(e=Me.charCodeAt(q++),t=String.fromCharCode(e),e===92&&(Me.charCodeAt(q)!==117&&Ht({},Vr,ni),++q,e=ST("u"),(!e||e==="\\"||!Pp(e.charCodeAt(0)))&&Ht({},Vr,ni),t=e);q<Hi&&(e=Me.charCodeAt(q),!!DC(e));)++q,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Me.charCodeAt(q)!==117&&Ht({},Vr,ni),++q,e=ST("u"),(!e||e==="\\"||!DC(e.charCodeAt(0)))&&Ht({},Vr,ni),t+=e);return t}function VSe(){var e,t;for(e=q++;q<Hi;){if(t=Me.charCodeAt(q),t===92)return q=e,Xee();if(DC(t))++q;else break}return Me.slice(e,q)}function NSe(){var e,t,n;return e=q,t=Me.charCodeAt(q)===92?Xee():VSe(),t.length===1?n=f0:LSe.hasOwnProperty(t)?n=h4:t==="null"?n=HC:t==="true"||t==="false"?n=zC:n=f0,{type:n,value:t,start:e,end:q}}function bT(){var e=q,t=Me.charCodeAt(q),n,r=Me[q],i,o,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++q,{type:R1,value:String.fromCharCode(t),start:e,end:q};default:if(n=Me.charCodeAt(q+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return q+=2,{type:R1,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:q};case 33:case 61:return q+=2,Me.charCodeAt(q)===61&&++q,{type:R1,value:Me.slice(e,q),start:e,end:q}}}if(a=Me.substr(q,4),a===">>>=")return q+=4,{type:R1,value:a,start:e,end:q};if(o=a.substr(0,3),o===">>>"||o==="<<="||o===">>=")return q+=3,{type:R1,value:o,start:e,end:q};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return q+=2,{type:R1,value:i,start:e,end:q};if(i==="//"&&Ht({},Vr,ni),"<>=!+-*%&|^/".indexOf(r)>=0)return++q,{type:R1,value:r,start:e,end:q};Ht({},Vr,ni)}function _Se(e){let t="";for(;q<Hi&&DT(Me[q]);)t+=Me[q++];return t.length===0&&Ht({},Vr,ni),Pp(Me.charCodeAt(q))&&Ht({},Vr,ni),{type:p0,value:parseInt("0x"+t,16),start:e,end:q}}function kSe(e){let t="0"+Me[q++];for(;q<Hi&&Tp(Me[q]);)t+=Me[q++];return(Pp(Me.charCodeAt(q))||Lc(Me.charCodeAt(q)))&&Ht({},Vr,ni),{type:p0,value:parseInt(t,8),octal:!0,start:e,end:q}}function Oee(){var e,t,n;if(n=Me[q],LC(Lc(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=q,e="",n!=="."){if(e=Me[q++],n=Me[q],e==="0"){if(n==="x"||n==="X")return++q,_Se(t);if(Tp(n))return kSe(t);n&&Lc(n.charCodeAt(0))&&Ht({},Vr,ni)}for(;Lc(Me.charCodeAt(q));)e+=Me[q++];n=Me[q]}if(n==="."){for(e+=Me[q++];Lc(Me.charCodeAt(q));)e+=Me[q++];n=Me[q]}if(n==="e"||n==="E")if(e+=Me[q++],n=Me[q],(n==="+"||n==="-")&&(e+=Me[q++]),Lc(Me.charCodeAt(q)))for(;Lc(Me.charCodeAt(q));)e+=Me[q++];else Ht({},Vr,ni);return Pp(Me.charCodeAt(q))&&Ht({},Vr,ni),{type:p0,value:parseFloat(e),start:t,end:q}}function TSe(){var e="",t,n,r,i,o=!1;for(t=Me[q],LC(t==="'"||t==='"',"String literal must starts with a quote"),n=q,++q;q<Hi;)if(r=Me[q++],r===t){t="";break}else if(r==="\\")if(r=Me[q++],!r||!Fp(r.charCodeAt(0)))switch(r){case"u":case"x":Me[q]==="{"?(++q,e+=ASe()):e+=ST(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Tp(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),q<Hi&&Tp(Me[q])&&(o=!0,i=i*8+"01234567".indexOf(Me[q++]),"0123".indexOf(r)>=0&&q<Hi&&Tp(Me[q])&&(i=i*8+"01234567".indexOf(Me[q++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Me[q]===`
`&&++q;else{if(Fp(r.charCodeAt(0)))break;e+=r}return t!==""&&Ht({},Vr,ni),{type:Op,value:e,octal:o,start:n,end:q}}function ISe(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Ht({},wT)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ht({},wT)}try{return new RegExp(e,t)}catch{return null}}function FSe(){var e,t,n,r,i;for(e=Me[q],LC(e==="/","Regular expression literal must start with a slash"),t=Me[q++],n=!1,r=!1;q<Hi;)if(e=Me[q++],t+=e,e==="\\")e=Me[q++],Fp(e.charCodeAt(0))&&Ht({},CT),t+=e;else if(Fp(e.charCodeAt(0)))Ht({},CT);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Ht({},CT),i=t.substr(1,t.length-2),{value:i,literal:t}}function RSe(){var e,t,n;for(t="",n="";q<Hi&&(e=Me[q],!!DC(e.charCodeAt(0)));)++q,e==="\\"&&q<Hi?Ht({},Vr,ni):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ht({},wT,n),{value:n,literal:t}}function OSe(){var e,t,n,r;return Ot=null,Yee(),e=q,t=FSe(),n=RSe(),r=ISe(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:q}}function PSe(e){return e.type===f0||e.type===h4||e.type===zC||e.type===HC}function Qee(){if(Yee(),q>=Hi)return{type:Rp,start:q,end:q};let e=Me.charCodeAt(q);return Pp(e)?NSe():e===40||e===41||e===59?bT():e===39||e===34?TSe():e===46?Lc(Me.charCodeAt(q+1))?Oee():bT():Lc(e)?Oee():bT()}function O1(){let e=Ot;return q=e.end,Ot=Qee(),q=e.end,e}function Kee(){let e=q;Ot=Qee(),q=e}function $Se(e){let t=new G2(uSe);return t.elements=e,t}function Pee(e,t,n){let r=new G2(e==="||"||e==="&&"?mSe:fSe);return r.operator=e,r.left=t,r.right=n,r}function BSe(e,t){let n=new G2(dSe);return n.callee=e,n.arguments=t,n}function USe(e,t,n){let r=new G2(pSe);return r.test=e,r.consequent=t,r.alternate=n,r}function zT(e){let t=new G2(Gee);return t.name=e,t}function kp(e){let t=new G2(hSe);return t.value=e.value,t.raw=Me.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function $ee(e,t,n){let r=new G2(gSe);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function jSe(e){let t=new G2(vSe);return t.properties=e,t}function Bee(e,t,n){let r=new G2(ySe);return r.key=t,r.value=n,r.kind=e,r}function qSe(e,t){let n=new G2(xSe);return n.operator=e,n.argument=t,n.prefix=!0,n}function Ht(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,a)=>(LC(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=q,n.description=i,n}function AC(e){e.type===Rp&&Ht(e,SSe),e.type===p0&&Ht(e,CSe),e.type===Op&&Ht(e,bSe),e.type===f0&&Ht(e,MSe),e.type===h4&&Ht(e,wSe),Ht(e,Vr,e.value)}function Li(e){let t=O1();(t.type!==R1||t.value!==e)&&AC(t)}function pn(e){return Ot.type===R1&&Ot.value===e}function MT(e){return Ot.type===h4&&Ot.value===e}function GSe(){let e=[];for(q=Ot.start,Li("[");!pn("]");)pn(",")?(O1(),e.push(null)):(e.push(d0()),pn("]")||Li(","));return O1(),$Se(e)}function Uee(){q=Ot.start;let e=O1();return e.type===Op||e.type===p0?(e.octal&&Ht(e,Wee),kp(e)):zT(e.value)}function WSe(){var e,t,n,r;if(q=Ot.start,e=Ot,e.type===f0)return n=Uee(),Li(":"),r=d0(),Bee("init",n,r);if(e.type===Rp||e.type===R1)AC(e);else return t=Uee(),Li(":"),r=d0(),Bee("init",t,r)}function YSe(){var e=[],t,n,r,i={},o=String;for(q=Ot.start,Li("{");!pn("}");)t=WSe(),t.key.type===Gee?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Ht({},ESe):i[r]=!0,e.push(t),pn("}")||Li(",");return Li("}"),jSe(e)}function XSe(){Li("(");let e=HT();return Li(")"),e}var QSe={if:1};function KSe(){var e,t,n;if(pn("("))return XSe();if(pn("["))return GSe();if(pn("{"))return YSe();if(e=Ot.type,q=Ot.start,e===f0||QSe[Ot.value])n=zT(O1().value);else if(e===Op||e===p0)Ot.octal&&Ht(Ot,Wee),n=kp(O1());else{if(e===h4)throw new Error(Ip);e===zC?(t=O1(),t.value=t.value==="true",n=kp(t)):e===HC?(t=O1(),t.value=null,n=kp(t)):pn("/")||pn("/=")?(n=kp(OSe()),Kee()):AC(O1())}return n}function ZSe(){let e=[];if(Li("("),!pn(")"))for(;q<Hi&&(e.push(d0()),!pn(")"));)Li(",");return Li(")"),e}function JSe(){q=Ot.start;let e=O1();return PSe(e)||AC(e),zT(e.value)}function eEe(){return Li("."),JSe()}function tEe(){Li("[");let e=HT();return Li("]"),e}function nEe(){var e,t,n;for(e=KSe();;)if(pn("."))n=eEe(),e=$ee(".",e,n);else if(pn("("))t=ZSe(),e=BSe(e,t);else if(pn("["))n=tEe(),e=$ee("[",e,n);else break;return e}function jee(){let e=nEe();if(Ot.type===R1&&(pn("++")||pn("--")))throw new Error(Ip);return e}function EC(){var e,t;if(Ot.type!==R1&&Ot.type!==h4)t=jee();else{if(pn("++")||pn("--"))throw new Error(Ip);if(pn("+")||pn("-")||pn("~")||pn("!"))e=O1(),t=EC(),t=qSe(e.value,t);else{if(MT("delete")||MT("void")||MT("typeof"))throw new Error(Ip);t=jee()}}return t}function qee(e){let t=0;if(e.type!==R1&&e.type!==h4)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function rEe(){var e,t,n,r,i,o,a,s,c,l;if(e=Ot,c=EC(),r=Ot,i=qee(r),i===0)return c;for(r.prec=i,O1(),t=[e,Ot],a=EC(),o=[c,r,a];(i=qee(Ot))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,c=o.pop(),t.pop(),n=Pee(s,c,a),o.push(n);r=O1(),r.prec=i,o.push(r),t.push(Ot),n=EC(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=Pee(o[l-1].value,o[l-2],n),l-=2;return n}function d0(){var e,t,n;return e=rEe(),pn("?")&&(O1(),t=d0(),Li(":"),n=d0(),e=USe(e,t,n)),e}function HT(){let e=d0();if(pn(","))throw new Error(Ip);return e}function cf(e){Me=e,q=0,Hi=Me.length,Ot=null,Kee();let t=HT();if(Ot.type!==Rp)throw new Error("Unexpect token after expression.");return t}var LT={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function AT(e){function t(a,s,c,l){let u=e(s[0]);return c&&(u=c+"("+u+")",c.lastIndexOf("new ",0)===0&&(u="("+u+")")),u+"."+a+(l<0?"":l===0?"()":"("+s.slice(1).map(e).join(",")+")")}function n(a,s,c){return l=>t(a,l,s,c)}let r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&B("Missing arguments to clamp function."),a.length>3&&B("Too many arguments to clamp function.");let s=a.map(e);return"Math.max("+s[1]+", Math.min("+s[2]+","+s[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(a){a.length<3&&B("Missing arguments to if function."),a.length>3&&B("Too many arguments to if function.");let s=a.map(e);return"("+s[0]+"?"+s[1]+":"+s[2]+")"}}}function iEe(e){let t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function VC(e){e=e||{};let t=e.allowed?hr(e.allowed):{},n=e.forbidden?hr(e.forbidden):{},r=e.constants||LT,i=(e.functions||AT)(f),o=e.globalvar,a=e.fieldvar,s=Ie(o)?o:h=>`${o}["${h}"]`,c={},l={},u=0;function f(h){if(Q(h))return h;let m=d[h.type];return m==null&&B("Unsupported type: "+h.type),m(h)}let d={Literal:h=>h.raw,Identifier:h=>{let m=h.name;return u>0?m:de(n,m)?B("Illegal identifier: "+m):de(r,m)?r[m]:de(t,m)?m:(c[m]=1,s(m))},MemberExpression:h=>{let m=!h.computed,g=f(h.object);m&&(u+=1);let v=f(h.property);return g===a&&(l[iEe(v)]=1),m&&(u-=1),g+(m?"."+v:"["+v+"]")},CallExpression:h=>{h.callee.type!=="Identifier"&&B("Illegal callee type: "+h.callee.type);let m=h.callee.name,g=h.arguments,v=de(i,m)&&i[m];return v||B("Unrecognized function: "+m),Ie(v)?v(g):v+"("+g.map(f).join(",")+")"},ArrayExpression:h=>"["+h.elements.map(f).join(",")+"]",BinaryExpression:h=>"("+f(h.left)+" "+h.operator+" "+f(h.right)+")",UnaryExpression:h=>"("+h.operator+f(h.argument)+")",ConditionalExpression:h=>"("+f(h.test)+"?"+f(h.consequent)+":"+f(h.alternate)+")",LogicalExpression:h=>"("+f(h.left)+h.operator+f(h.right)+")",ObjectExpression:h=>"{"+h.properties.map(f).join(",")+"}",Property:h=>{u+=1;let m=f(h.key);return u-=1,m+":"+f(h.value)}};function p(h){let m={code:f(h),globals:Object.keys(c),fields:Object.keys(l)};return c={},l={},m}return p.functions=i,p.constants=r,p}var Zee=Symbol("vega_selection_getter");function nte(e){return(!e.getter||!e.getter[Zee])&&(e.getter=Dr(e.field),e.getter[Zee]=!0),e.getter}var NT="intersect",Jee="union",oEe="vlMulti",aEe="vlPoint",ete="or",sEe="and",ss="_vgsid_",$p=Dr(ss),cEe="E",lEe="R",uEe="R-E",fEe="R-LE",dEe="R-RE",NC="index:unit";function tte(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,a,s;o<i;++o)if(s=n[o],a=nte(s)(e),H2(a)&&(a=qn(a)),H2(r[o])&&(r[o]=qn(r[o])),F(r[o])&&H2(r[o][0])&&(r[o]=r[o].map(qn)),s.type===cEe){if(F(r[o])?r[o].indexOf(a)<0:a!==r[o])return!1}else if(s.type===lEe){if(!E3(a,r[o]))return!1}else if(s.type===dEe){if(!E3(a,r[o],!0,!1))return!1}else if(s.type===uEe){if(!E3(a,r[o],!1,!1))return!1}else if(s.type===fEe&&!E3(a,r[o],!1,!0))return!1;return!0}function rte(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[NC]&&r[NC].value:void 0,a=n===NT,s=i.length,c=0,l,u,f,d,p;c<s;++c)if(l=i[c],o&&a){if(u=u||{},f=u[d=l.unit]||0,f===-1)continue;if(p=tte(t,l),u[d]=p?-1:++f,p&&o.size===1)return!0;if(!p&&f===o.get(d).count)return!1}else if(p=tte(t,l),a^p)return p;return s&&a}var ite=co($p),pEe=ite.left,hEe=ite.right;function ote(e,t,n){let r=this.context.data[e],i=r?r.values.value:[],o=r?r[NC]&&r[NC].value:void 0,a=n===NT,s=$p(t),c=pEe(i,s);if(c===i.length||$p(i[c])!==s)return!1;if(o&&a){if(o.size===1)return!0;if(hEe(i,s)-c<o.size)return!1}return!0}function ate(e,t){return e.map(n=>Te(t.fields?{values:t.fields.map(r=>nte(r)(n.datum))}:{[ss]:$p(n.datum)},t))}function ste(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],a={},s={},c={},l,u,f,d,p,h,m,g,v,y,C=o.length,b=0,M,S;b<C;++b)if(l=o[b],d=l.unit,u=l.fields,f=l.values,u&&f){for(M=0,S=u.length;M<S;++M)p=u[M],m=a[p.field]||(a[p.field]={}),g=m[d]||(m[d]=[]),c[p.field]=v=p.type.charAt(0),y=VT[`${v}_union`],m[d]=y(g,te(f[M]));n&&(g=s[d]||(s[d]=[]),g.push(te(f).reduce((w,E,D)=>(w[u[D].field]=E,w),{})))}else p=ss,h=$p(l),m=a[p]||(a[p]={}),g=m[d]||(m[d]=[]),g.push(h),n&&(g=s[d]||(s[d]=[]),g.push({[ss]:h}));if(t=t||Jee,a[ss]?a[ss]=VT[`${ss}_${t}`](...Object.values(a[ss])):Object.keys(a).forEach(w=>{a[w]=Object.keys(a[w]).map(E=>a[w][E]).reduce((E,D)=>E===void 0?D:VT[`${c[w]}_${t}`](E,D))}),o=Object.keys(s),n&&o.length){let w=r?aEe:oEe;a[w]=t===Jee?{[ete]:o.reduce((E,D)=>(E.push(...s[D]),E),[])}:{[sEe]:o.map(E=>({[ete]:s[E]}))}}return a}var VT={[`${ss}_union`]:pv,[`${ss}_intersect`]:dv,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=qn(t[0]),r=qn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=qn(t[0]),r=qn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}},mEe=":",gEe="@";function _C(e,t,n,r){t[0].type!==Ac&&B("First argument to selection functions must be a string literal.");let i=t[0].value,o=t.length>=2&&Ue(t).value,a="unit",s=gEe+a,c=mEe+i;o===NT&&!de(r,s)&&(r[s]=n.getData(i).indataRef(n,a)),de(r,c)||(r[c]=n.getData(i).tuplesRef())}function fte(e){let t=this.context.data[e];return t?t.values.value:[]}function vEe(e,t,n){let r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function yEe(e,t){let n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(pr).insert(t)),1}function xEe(e,t,n){if(e){let r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}var Bp=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},CEe=Bp("format"),dte=Bp("timeFormat"),bEe=Bp("utcFormat"),MEe=Bp("timeParse"),wEe=Bp("utcParse"),kC=new Date(2e3,0,1);function TC(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(kC.setYear(2e3),kC.setMonth(e),kC.setDate(t),dte.call(this,kC,n))}function SEe(e){return TC.call(this,e,1,"%B")}function EEe(e){return TC.call(this,e,1,"%b")}function DEe(e){return TC.call(this,0,2+e,"%A")}function zEe(e){return TC.call(this,0,2+e,"%a")}var HEe=":",LEe="@",kT="%",pte="$";function FT(e,t,n,r){t[0].type!==Ac&&B("First argument to data functions must be a string literal.");let i=t[0].value,o=HEe+i;if(!de(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function AEe(e,t,n,r){t[0].type!==Ac&&B("First argument to indata must be a string literal."),t[1].type!==Ac&&B("Second argument to indata must be a string literal.");let i=t[0].value,o=t[1].value,a=LEe+o;de(a,r)||(r[a]=n.getData(i).indataRef(n,o))}function d1(e,t,n,r){if(t[0].type===Ac)cte(n,r,t[0].value);else for(e in n.scales)cte(n,r,e)}function cte(e,t,n){let r=kT+n;if(!de(t,r))try{t[r]=e.scaleRef(n)}catch{}}function cs(e,t){if(Ie(e))return e;if(Q(e)){let n=t.scales[e];return n&&WX(n.value)?n.value:void 0}}function VEe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=d1,n._range=d1,n._scale=d1;let r=i=>"_["+(i.type===Ac?Z(kT+i.value):Z(kT)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function RT(e,t){return function(n,r,i){if(n){let o=cs(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}var NEe=RT("area",qN),_Ee=RT("bounds",WN),kEe=RT("centroid",ZN);function TEe(e,t){let n=cs(e,(t||this).context);return n&&n.scale()}function IEe(e){let t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function OT(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function FEe(){return OT(this.context.dataflow,"warn",arguments)}function REe(){return OT(this.context.dataflow,"info",arguments)}function OEe(){return OT(this.context.dataflow,"debug",arguments)}function _T(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function TT(e){let t=Xo(e),n=_T(t.r),r=_T(t.g),i=_T(t.b);return .2126*n+.7152*r+.0722*i}function PEe(e,t){let n=TT(e),r=TT(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function $Ee(){let e=[].slice.call(arguments);return e.unshift({}),Te(...e)}function hte(e,t){return e===t||e!==e&&t!==t?!0:F(e)?F(t)&&e.length===t.length?BEe(e,t):!1:ne(e)&&ne(t)?mte(e,t):!1}function BEe(e,t){for(let n=0,r=e.length;n<r;++n)if(!hte(e[n],t[n]))return!1;return!0}function mte(e,t){for(let n in e)if(!hte(e[n],t[n]))return!1;return!0}function lte(e){return t=>mte(e,t)}function UEe(e,t,n,r,i,o){let a=this.context.dataflow,s=this.context.data[e],c=s.input,l=a.stamp(),u=s.changes,f,d;if(a._trigger===!1||!(c.value.length||t||r))return 0;if((!u||u.stamp<l)&&(s.changes=u=a.changeset(),u.stamp=l,a.runAfter(()=>{s.modified=!0,a.pulse(c,u).run()},!0,1)),n&&(f=n===!0?pr:F(n)||Dl(n)?n:lte(n),u.remove(f)),t&&u.insert(t),r&&(f=lte(r),c.value.some(f)?u.remove(f):u.insert(r)),i)for(d in o)u.modify(i,d,o[d]);return 1}function jEe(e){let t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function qEe(e){let t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}var ute={};function GEe(e,t){let n=ute[t]||(ute[t]=Dr(t));return F(e)?e.map(n):n(e)}function PT(e){return F(e)||ArrayBuffer.isView(e)?e:null}function $T(e){return PT(e)||(Q(e)?e:null)}function WEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return PT(e).join(...n)}function YEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $T(e).indexOf(...n)}function XEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $T(e).lastIndexOf(...n)}function QEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $T(e).slice(...n)}function KEe(e,t,n){return Ie(n)&&B("Function argument passed to replace."),String(e).replace(t,n)}function ZEe(e){return PT(e).slice().reverse()}function JEe(e,t,n){return g7(e||0,t||0,n||0)}function eDe(e,t){let n=cs(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function tDe(e,t){let n=cs(e,(t||this).context);return n?n.copy():void 0}function nDe(e,t){let n=cs(e,(t||this).context);return n?n.domain():[]}function rDe(e,t,n){let r=cs(e,(n||this).context);return r?F(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function iDe(e,t){let n=cs(e,(t||this).context);return n&&n.range?n.range():[]}function oDe(e,t,n){let r=cs(e,(n||this).context);return r?r(t):void 0}function aDe(e,t,n,r,i){e=cs(e,(i||this).context);let o=XV(t,n),a=e.domain(),s=a[0],c=Ue(a),l=Vn;return c-s?l=Uy(e,s,c):e=(e.interpolator?lt("sequential")().interpolator(e.interpolator()):lt("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,c=1]),e.ticks&&(a=e.ticks(+r||15),s!==a[0]&&a.unshift(s),c!==Ue(a)&&a.push(c)),a.forEach(u=>o.stop(l(u),e(u))),o}function sDe(e,t,n){let r=cs(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function cDe(e){let t=null;return function(n){return n?Nu(n,t=t||Ql(e)):e}}var gte=e=>e.data;function vte(e,t){let n=fte.call(t,e);return n.root&&n.root.lookup||{}}function lDe(e,t,n){let r=vte(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(gte):void 0}function uDe(e,t){let n=vte(e,this)[t];return n?n.ancestors().map(gte):void 0}var yte=()=>typeof window<"u"&&window||null;function fDe(){let e=yte();return e?e.screen:{}}function dDe(){let e=yte();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function pDe(){let e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function xte(e,t,n){if(!e)return[];let[r,i]=e,o=new Nn().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return wN(a,o,hDe(t))}function hDe(e){let t=null;if(e){let n=te(e.marktype),r=te(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function mDe(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=te(e);let i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function gDe(e){return te(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function vDe(e,t,n){let{x:r,y:i,mark:o}=n,a=new Nn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(let[c,l]of t)c<a.x1&&(a.x1=c),c>a.x2&&(a.x2=c),l<a.y1&&(a.y1=l),l>a.y2&&(a.y2=l);return a.translate(r,i),xte([[a.x1,a.y1],[a.x2,a.y2]],e,o).filter(c=>yDe(c.x,c.y,t))}function yDe(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){let[a,s]=n[o],[c,l]=n[i];l>t!=s>t&&e<(a-c)*(t-l)/(s-l)+c&&r++}return r&1}var lf={random(){return n1()},cumulativeNormal:Pd,cumulativeLogNormal:$v,cumulativeUniform:qv,densityNormal:Iv,densityLogNormal:Pv,densityUniform:jv,quantileNormal:$d,quantileLogNormal:Bv,quantileUniform:Gv,sampleNormal:Od,sampleLogNormal:Ov,sampleUniform:Uv,isArray:F,isBoolean:A1,isDate:H2,isDefined(e){return e!==void 0},isNumber:Oe,isObject:ne,isRegExp:VH,isString:Q,isTuple:Dl,isValid(e){return e!=null&&e===e},toBoolean:cd,toDate(e){return ld(e)},toNumber:qn,toString:ud,indexof:YEe,join:WEe,lastindexof:XEe,replace:KEe,reverse:ZEe,slice:QEe,flush:LH,lerp:NH,merge:$Ee,pad:TH,peek:Ue,pluck:GEe,span:tc,inrange:E3,truncate:IH,rgb:Xo,lab:U3,hcl:Fl,hsl:Il,luminance:TT,contrast:PEe,sequence:Gn,format:CEe,utcFormat:bEe,utcParse:wEe,utcOffset:ML,utcSequence:SL,timeFormat:dte,timeParse:MEe,timeOffset:bL,timeSequence:wL,timeUnitSpecifier:pL,monthFormat:SEe,monthAbbrevFormat:EEe,dayFormat:DEe,dayAbbrevFormat:zEe,quarter:EH,utcquarter:DH,week:gL,utcweek:yL,dayofyear:mL,utcdayofyear:vL,warn:FEe,info:REe,debug:OEe,extent(e){return Qi(e)},inScope:IEe,intersect:xte,clampRange:zH,pinchDistance:jEe,pinchAngle:qEe,screen:fDe,containerSize:pDe,windowSize:dDe,bandspace:JEe,setdata:yEe,pathShape:cDe,panLinear:bH,panLog:MH,panPow:wH,panSymlog:SH,zoomLinear:td,zoomLog:nd,zoomPow:K6,zoomSymlog:rd,encode:xEe,modify:UEe,lassoAppend:mDe,lassoPath:gDe,intersectLasso:vDe},xDe=["view","item","group","xy","x","y"],CDe="event.vega.",Cte="this.",BT={},bte={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Z(pte+e)}]`,functions:bDe,constants:LT,visitors:BT},IT=VC(bte);function bDe(e){let t=AT(e);xDe.forEach(n=>t[n]=CDe+n);for(let n in lf)t[n]=Cte+n;return Te(t,VEe(e,lf,BT)),t}function In(e,t,n){return arguments.length===1?lf[e]:(lf[e]=t,n&&(BT[e]=n),IT&&(IT.functions[e]=Cte+e),this)}In("bandwidth",eDe,d1);In("copy",tDe,d1);In("domain",nDe,d1);In("range",iDe,d1);In("invert",rDe,d1);In("scale",oDe,d1);In("gradient",aDe,d1);In("geoArea",NEe,d1);In("geoBounds",_Ee,d1);In("geoCentroid",kEe,d1);In("geoShape",sDe,d1);In("geoScale",TEe,d1);In("indata",vEe,AEe);In("data",fte,FT);In("treePath",lDe,FT);In("treeAncestors",uDe,FT);In("vlSelectionTest",rte,_C);In("vlSelectionIdTest",ote,_C);In("vlSelectionResolve",ste,_C);In("vlSelectionTuples",ate);function W2(e,t){let n={},r;try{e=Q(e)?e:Z(e)+"",r=cf(e)}catch{B("Expression parse error: "+e)}r.visit(o=>{if(o.type!==ET)return;let a=o.callee.name,s=bte.visitors[a];s&&s(a,o.arguments,t,n)});let i=IT(r);return i.globals.forEach(o=>{let a=pte+o;!de(n,a)&&t.getSignal(o)&&(n[a]=t.signalRef(o))}),{$expr:Te({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function MDe(e){let t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}var wDe=hr(["rule"]),Mte=hr(["group","image","rect"]);function SDe(e,t){let n="";return wDe[t]||(e.x2&&(e.x?(Mte[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Mte[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function UT(e){return(e+"").toLowerCase()}function EDe(e){return UT(e)==="operator"}function DDe(e){return UT(e)==="collect"}function Up(e,t,n){n.endsWith(";")||(n="return("+n+");");let r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function zDe(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var HDe={operator:(e,t)=>Up(e,["_"],t.code),parameter:(e,t)=>Up(e,["datum","_"],t.code),event:(e,t)=>Up(e,["event"],t.code),handler:(e,t)=>{let n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Up(e,["_","event"],n)},encode:(e,t)=>{let{marktype:n,channels:r}=t,i="var o=item,datum=o.datum,m=0,$;";for(let o in r){let a="o["+Z(o)+"]";i+=`$=${r[o].code};if(${a}!==$)${a}=$,m=1;`}return i+=SDe(r,n),i+="return m;",Up(e,["item","_"],i)},codegen:{get(e){let t=`[${e.map(Z).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n,r=(o,a)=>{let s=t[a],c,l;return o.path?(c=`a${o.path}`,l=`b${o.path}`):((n=n||{})["f"+a]=o,c=`this.f${a}(a)`,l=`this.f${a}(b)`),zDe(c,l,-s,s)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function LDe(e){let t=this;EDe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function ADe(e){let t=this;if(e.params){let n=t.get(e.id);n||B("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function VDe(e,t){t=t||{};let n=this;for(let r in e){let i=e[r];t[r]=F(i)?i.map(o=>wte(o,n,t)):wte(i,n,t)}return t}function wte(e,t,n){if(!e||!ne(e))return e;for(let r=0,i=Ste.length,o;r<i;++r)if(o=Ste[r],de(e,o.key))return o.parse(e,t,n);return e}var Ste=[{key:"$ref",parse:NDe},{key:"$key",parse:kDe},{key:"$expr",parse:_De},{key:"$field",parse:TDe},{key:"$encode",parse:FDe},{key:"$compare",parse:IDe},{key:"$context",parse:RDe},{key:"$subflow",parse:ODe},{key:"$tupleid",parse:PDe}];function NDe(e,t){return t.get(e.$ref)||B("Operator not defined: "+e.$ref)}function _De(e,t,n){e.$params&&t.parseParameters(e.$params,n);let r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Ci(t.parameterExpression(e.$expr),e.$fields))}function kDe(e,t){let n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=sd(e.$key,e.$flat,t.expr.codegen))}function TDe(e,t){if(!e.$field)return null;let n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Dr(e.$field,e.$name,t.expr.codegen))}function IDe(e,t){let n="c:"+e.$compare+"_"+e.$order,r=te(e.$compare).map(i=>i&&i.$tupleid?Ee:i);return t.fn[n]||(t.fn[n]=id(r,e.$order,t.expr.codegen))}function FDe(e,t){let n=e.$encode,r={};for(let i in n){let o=n[i];r[i]=Ci(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function RDe(e,t){return t}function ODe(e,t){let n=e.$subflow;return function(r,i,o){let a=t.fork().parse(n),s=a.get(n.operators[0].id),c=a.signals.parent;return c&&c.set(o),s.detachSubflow=()=>t.detach(a),s}}function PDe(){return Ee}function $De(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&B("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function BDe(e){var t=this,n=ne(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,a=void 0;r||B("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(a=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,a)}var UDe={skip:!0};function jDe(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{let a=t.signals[o];e.signals(o,a)&&(r[o]=a.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{let a=t.data[o];e.data(o,a)&&(i[o]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function qDe(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],UDe)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(pr).insert(r[o]))}),(e.subcontext||[]).forEach((o,a)=>{let s=t.subcontext[a];s&&s.setState(o)})}function IC(e,t,n,r){return new Dte(e,t,n,r)}function Dte(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||HDe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Ete(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}Dte.prototype=Ete.prototype={fork(){let e=new Ete(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);let t=Object.keys(e.nodes);for(let n of t)e.nodes[n]._targets=null;for(let n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){let n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),DDe(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(let o in e.data){let a=n.data[o]||(n.data[o]={});e.data[o].forEach(s=>a[s]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[UT(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:MDe,parseOperator:LDe,parseOperatorParameters:ADe,parseParameters:VDe,parseStream:$De,parseUpdate:BDe,getState:jDe,setState:qDe};function GDe(e){let t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Tte(t,e.description()))}function Tte(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function WDe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}var jT="default";function YDe(e){let t=e._signals.cursor||(e._signals.cursor=e.add({user:jT,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{let i=t.value,o=i?Q(i)?i:i.user:jT,a=r.item&&r.item.cursor||null;return i&&o===i.user&&a==i.item?i:{user:o,item:a}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Q(r)||(i=r.item,r=r.user),GT(e,r&&r!==jT?r:i||r),i},{cursor:t})}function GT(e,t){let n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function OC(e,t){var n=e._runtime.data;return de(n,t)||B("Unrecognized data set: "+t),n[t]}function XDe(e,t){return arguments.length<2?OC(this,e).values.value:$C.call(this,e,fc().remove(pr).insert(t))}function $C(e,t){OL(t)||B("Second argument to changes must be a changeset.");let n=OC(this,e);return n.modified=!0,this.pulse(n.input,t)}function QDe(e,t){return $C.call(this,e,fc().insert(t))}function KDe(e,t){return $C.call(this,e,fc().remove(t))}function Ite(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Fte(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function BC(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function ZDe(e){var t=BC(e),n=Ite(e),r=Fte(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function JDe(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,a,s;return i&&(s=BC(e),a=t.changedTouches?t.changedTouches[0]:t,o=q7(a,i),o[0]-=s[0],o[1]-=s[1]),t.dataflow=e,t.item=n,t.vega=eze(e,n,o),t}function eze(e,t,n){let r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(a){var s=r,c;if(a){for(c=t;c;c=c.mark.group)if(c.mark.name===a){s=c;break}}return s&&s.mark&&s.mark.interactive?s:{}}function o(a){if(!a)return n;Q(a)&&(a=i(a));let s=n.slice();for(;a;)s[0]-=a.x||0,s[1]-=a.y||0,a=a.mark&&a.mark.group;return s}return{view:hn(e),item:hn(t||{}),group:i,xy:o,x:a=>o(a)[0],y:a=>o(a)[1]}}var zte="view",tze="timer",nze="window",rze={trap:!1};function ize(e){let t=Te({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{F(r[o])&&(r[o]=hr(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Rte(e,t,n,r){e._eventListeners.push({type:n,sources:te(t),handler:r})}function oze(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function FC(e,t,n){let r=e._eventConfig&&e._eventConfig[t];return r===!1||ne(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function aze(e,t,n){var r=this,i=new du(n),o=function(l,u){r.runAsync(null,()=>{e===zte&&oze(r,t)&&l.preventDefault(),i.receive(JDe(r,l,u))})},a;if(e===tze)FC(r,"timer",t)&&r.timer(o,t);else if(e===zte)FC(r,"view",t)&&r.addEventListener(t,o,rze);else if(e===nze?FC(r,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&FC(r,"selector",t)&&(a=Array.from(document.querySelectorAll(e))),!a)r.warn("Can not resolve event source: "+e);else{for(var s=0,c=a.length;s<c;++s)a[s].addEventListener(t,o);Rte(r,a,t,o)}return i}function Hte(e){return e.item}function Lte(e){return e.item.mark.source}function Ate(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function sze(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Hte),Lte,Ate(e)),this.on(this.events("view","pointerout",Hte),Lte,Ate(t)),this}function cze(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,o;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(o=n[r],i=o.sources.length;--i>=0;)o.sources[i].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this}function go(e,t,n){let r=document.createElement(e);for(let i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}var lze="vega-bind",uze="vega-bind-name",fze="vega-bind-radio";function dze(e,t,n){if(!t)return;let r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,a)})}},r.debounce&&(i.update=ad(r.debounce,i.update))),(r.input==null&&r.element?pze:mze)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function pze(e,t,n,r){let i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),Rte(r,t,i,o),e.set=a=>{t.value=a,t.dispatchEvent(hze(i))}}function hze(e){return typeof Event<"u"?new Event(e):{type:e}}function mze(e,t,n,r){let i=r.signal(n.signal),o=go("div",{class:lze}),a=n.input==="radio"?o:o.appendChild(go("label"));a.appendChild(go("span",{class:uze},n.name||n.signal)),t.appendChild(o);let s=gze;switch(n.input){case"checkbox":s=vze;break;case"select":s=yze;break;case"radio":s=xze;break;case"range":s=Cze;break}s(e,a,n,i)}function gze(e,t,n,r){let i=go("input");for(let o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function vze(e,t,n,r){let i={type:"checkbox",name:n.signal};r&&(i.checked=!0);let o=go("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=a=>o.checked=!!a||null}function yze(e,t,n,r){let i=go("select",{name:n.signal}),o=n.labels||[];n.options.forEach((a,s)=>{let c={value:a};PC(a,r)&&(c.selected=!0),i.appendChild(go("option",c,(o[s]||a)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=a=>{for(let s=0,c=n.options.length;s<c;++s)if(PC(n.options[s],a)){i.selectedIndex=s;return}}}function xze(e,t,n,r){let i=go("span",{class:fze}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((a,s)=>{let c={type:"radio",name:n.signal,value:a};PC(a,r)&&(c.checked=!0);let l=go("input",c);l.addEventListener("change",()=>e.update(a));let u=go("label",{},(o[s]||a)+"");return u.prepend(l),i.appendChild(u),l}),e.set=a=>{let s=e.elements,c=s.length;for(let l=0;l<c;++l)PC(s[l].value,a)&&(s[l].checked=!0)}}function Cze(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;let i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||Ki(o,i,100),s=go("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;let c=go("span",{},+r);t.appendChild(s),t.appendChild(c);let l=()=>{c.textContent=s.value,e.update(+s.value)};s.addEventListener("input",l),s.addEventListener("change",l),e.elements=[s],e.set=u=>{s.value=u,c.textContent=u}}function PC(e,t){return e===t||e+""==t+""}function Ote(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,Ite(e),Fte(e),BC(e),i,o).background(e.background())}function WT(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function bze(e,t,n,r){let i=new r(e.loader(),WT(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,BC(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function Mze(e,t){let n=this,r=n._renderType,i=n._eventConfig.bind,o=G7(r);e=n._el=e?qT(n,e,!0):null,GDe(n),o||n.error("Unrecognized renderer type: "+r);let a=o.handler||yc,s=e?o.renderer:o.headless;return n._renderer=s?Ote(n,n._renderer,e,s):null,n._handler=bze(n,n._handler,e,a),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=qT(n,t,!0):e.appendChild(go("form",{class:"vega-bindings"})),n._bind.forEach(c=>{c.param.element&&i!=="container"&&(c.element=qT(n,c.param.element,!!c.param.input))}),n._bind.forEach(c=>{dze(n,c.element||t,c)})),n}function qT(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}var jp=e=>+e||0,wze=e=>({top:e,bottom:e,left:e,right:e});function Vte(e){return ne(e)?{top:jp(e.top),bottom:jp(e.bottom),left:jp(e.left),right:jp(e.right)}:wze(jp(e))}function YT(e,t,n,r){return Gt(this,null,function*(){let i=G7(t),o=i&&i.headless;return o||B("Unrecognized renderer type: "+t),yield e.runAsync(),Ote(e,null,null,o,n,r).renderAsync(e._scenegraph.root)})}function Sze(e,t){return Gt(this,null,function*(){e!==xc.Canvas&&e!==xc.SVG&&e!==xc.PNG&&B("Unrecognized image type: "+e);let n=yield YT(this,e,t);return e===xc.SVG?Eze(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")})}function Eze(e,t){let n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function Dze(e,t){return Gt(this,null,function*(){return(yield YT(this,xc.Canvas,e,t)).canvas()})}function zze(e){return Gt(this,null,function*(){return(yield YT(this,xc.SVG,e)).svg()})}function Hze(e,t,n){return IC(e,uc,lf,n).parse(t)}function Lze(e){var t=this._runtime.scales;return de(t,e)||B("Unrecognized scale or projection: "+e),t[e].value}var Pte="width",$te="height",XT="padding",Nte={skip:!0};function Bte(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===XT?r.left+r.right:0)}function Ute(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===XT?r.top+r.bottom:0)}function Aze(e){var t=e._signals,n=t[Pte],r=t[$te],i=t[XT];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,s=>{e._width=s.size,e._viewWidth=Bte(e,s.size),o()},{size:n}),e._resizeHeight=e.add(null,s=>{e._height=s.size,e._viewHeight=Ute(e,s.size),o()},{size:r});let a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function Vze(e,t,n,r,i,o){this.runAfter(a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(Pte,n,Nte),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal($te,r,Nte),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter(c=>c.resize())},!1,1)}function Nze(e){return this._runtime.getState(e||{data:_ze,signals:kze,recurse:!0})}function _ze(e,t){return t.modified&&F(t.input.value)&&!e.startsWith("_:vega:_")}function kze(e,t){return!(e==="parent"||t instanceof uc.proxy)}function Tze(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Ize(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(fk(n,t))}function Fze(e,t,n,r){let i=e.element();i&&i.setAttribute("title",Rze(r))}function Rze(e){return e==null?"":F(e)?jte(e):ne(e)&&!H2(e)?Oze(e):e+""}function Oze(e){return Object.keys(e).map(t=>{let n=e[t];return t+": "+(F(n)?jte(n):qte(n))}).join(`
`)}function jte(e){return"["+e.map(qte).join(", ")+"]"}function qte(e){return F(e)?"[\u2026]":ne(e)&&!H2(e)?"{\u2026}":e}function Pze(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null,t=()=>{e?.();let n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function QT(e,t){let n=this;if(t=t||{},T3.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){let o=Te({},e.locale,t.locale);n.locale(Mv(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||xc.Canvas,n._scenegraph=new Cx;let r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Fze,n._redraw=!0,n._handler=new yc().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=ize(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);let i=Hze(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:Te({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Bte(n,n._width),n._viewHeight=Ute(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Aze(n),WDe(n),YDe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function RC(e,t){return de(e._signals,t)?e._signals[t]:B("Unrecognized signal name: "+Z(t))}function Gte(e,t){let n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function _te(e,t,n,r){let i=Gte(n,r);return i||(i=WT(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function kte(e,t,n){let r=Gte(t,n);return r&&t._targets.remove(r),e}ee(QT,T3,{evaluate(e,t,n){return Gt(this,null,function*(){if(yield T3.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,ZDe(this)),yield this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&Id(this,n),this})},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){let t=e!=null?e+"":null;return t!==this._desc&&Tte(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){let r=RC(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Vte(e)):Vte(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(G7(e)||B("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(T3.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(RC(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Vze,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=WT(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){let t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return _te(this,e,RC(this,e),t)},removeSignalListener(e,t){return kte(this,RC(this,e),t)},addDataListener(e,t){return _te(this,e,OC(this,e).values,t)},removeDataListener(e,t){return kte(this,OC(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){let t=GT(this,null);this._globalCursor=!!e,t&&GT(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Ize,events:aze,finalize:cze,hover:sze,data:XDe,change:$C,insert:QDe,remove:KDe,scale:Lze,initialize:Mze,toImageURL:Sze,toCanvas:Dze,toSVG:zze,getState:Nze,setState:Tze,_watchPixelRatio:Pze});var $ze="view",UC="[",jC="]",Wte="{",Yte="}",Bze=":",Xte=",",Uze="@",jze=">",qze=/[[\]{}]/,Gze={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Qte,Kte;function Ai(e,t,n){return Qte=t||$ze,Kte=n||Gze,Zte(e.trim()).map(KT)}function Wze(e){return Kte[e]}function qp(e,t,n,r,i){let o=e.length,a=0,s;for(;t<o;++t){if(s=e[t],!a&&s===n)return t;i&&i.indexOf(s)>=0?--a:r&&r.indexOf(s)>=0&&++a}return t}function Zte(e){let t=[],n=e.length,r=0,i=0;for(;i<n;)i=qp(e,i,Xte,UC+Wte,jC+Yte),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function KT(e){return e[0]==="["?Yze(e):Xze(e)}function Yze(e){let t=e.length,n=1,r;if(n=qp(e,n,jC,UC,jC),n===t)throw"Empty between selector: "+e;if(r=Zte(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==jze)throw"Expected '>' after between selector: "+e;r=r.map(KT);let i=KT(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Xze(e){let t={source:Qte},n=[],r=[0,0],i=0,o=0,a=e.length,s=0,c,l;if(e[a-1]===Yte){if(s=e.lastIndexOf(Wte),s>=0){try{r=Qze(e.substring(s+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,s).trim(),a=e.length}else throw"Unmatched right brace: "+e;s=0}if(!a)throw e;if(e[0]===Uze&&(i=++s),c=qp(e,s,Bze),c<a&&(n.push(e.substring(o,c).trim()),o=s=++c),s=qp(e,s,UC),s===a)n.push(e.substring(o,a).trim());else if(n.push(e.substring(o,s).trim()),l=[],o=++s,o===a)throw"Unmatched left bracket: "+e;for(;s<a;){if(s=qp(e,s,jC),s===a)throw"Unmatched left bracket: "+e;if(l.push(e.substring(o,s).trim()),s<a-1&&e[++s]!==UC)throw"Expected left bracket: "+e;o=++s}if(!(a=n.length)||qze.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],i?t.markname=n[0].slice(1):Wze(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Qze(e){let t=e.split(Xte);if(!e.length||t.length>2)throw e;return t.map(n=>{let r=+n;if(r!==r)throw e;return r})}function Kze(e){return ne(e)?e:{type:e||"pad"}}var Gp=e=>+e||0,Zze=e=>({top:e,bottom:e,left:e,right:e});function Jze(e){return ne(e)?e.signal?e:{top:Gp(e.top),bottom:Gp(e.bottom),left:Gp(e.left),right:Gp(e.right)}:Zze(Gp(e))}var Nr=e=>ne(e)&&!F(e)?Te({},e):{value:e};function Jte(e,t,n,r){return n!=null?(ne(n)&&!F(n)||F(n)&&n.length&&ne(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function ri(e,t,n){for(let r in t)Jte(e,r,t[r]);for(let r in n)Jte(e,r,n[r],"update")}function mf(e,t,n){for(let r in t)n&&de(n,r)||(e[r]=Te(e[r]||{},t[r]));return e}function ff(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}var cI="mark",lI="frame",uI="scope",eHe="axis",tHe="axis-domain",nHe="axis-grid",rHe="axis-label",iHe="axis-tick",oHe="axis-title",aHe="legend",sHe="legend-band",cHe="legend-entry",lHe="legend-gradient",yne="legend-label",uHe="legend-symbol",fHe="legend-title",dHe="title",pHe="title-text",hHe="title-subtitle";function mHe(e,t,n,r,i){let o={},a={},s,c,l,u;c="lineBreak",t==="text"&&i[c]!=null&&!ff(c,e)&&ZT(o,c,i[c]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),u=n===lI?i.group:n===cI?Te({},i.mark,i[t]):null;for(c in u)l=ff(c,e)||(c==="fill"||c==="stroke")&&(ff("fill",e)||ff("stroke",e)),l||ZT(o,c,u[c]);te(r).forEach(f=>{let d=i.style&&i.style[f];for(let p in d)ff(p,e)||ZT(o,p,d[p])}),e=Te({},e);for(c in o)u=o[c],u.signal?(s=s||{})[c]=u:a[c]=u;return e.enter=Te(a,e.enter),s&&(e.update=Te(s,e.update)),e}function ZT(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}var xne=e=>Q(e)?Z(e):e.signal?`(${e.signal})`:Cne(e);function ZC(e){if(e.gradient!=null)return vHe(e);let t=e.signal?`(${e.signal})`:e.color?gHe(e.color):e.field!=null?Cne(e.field):e.value!==void 0?Z(e.value):void 0;return e.scale!=null&&(t=yHe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${GC(e.exponent)})`),e.mult!=null&&(t+=`*${GC(e.mult)}`),e.offset!=null&&(t+=`+${GC(e.offset)}`),e.round&&(t=`round(${t})`),t}var qC=(e,t,n,r)=>`(${e}(${[t,n,r].map(ZC).join(",")})+'')`;function gHe(e){return e.c?qC("hcl",e.h,e.c,e.l):e.h||e.s?qC("hsl",e.h,e.s,e.l):e.l||e.a?qC("lab",e.l,e.a,e.b):e.r||e.g||e.b?qC("rgb",e.r,e.g,e.b):null}function vHe(e){let t=[e.start,e.stop,e.count].map(n=>n==null?null:Z(n));for(;t.length&&Ue(t)==null;)t.pop();return t.unshift(xne(e.gradient)),`gradient(${t.join(",")})`}function GC(e){return ne(e)?"("+ZC(e)+")":e}function Cne(e){return bne(ne(e)?e:{datum:e})}function bne(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):B("Invalid field reference: "+Z(e));return e.signal||(r=Q(r)?$o(r).map(Z).join("]["):bne(r)),t+"["+r+"]"}function yHe(e,t){let n=xne(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+GC(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function xHe(e){let t="";return e.forEach(n=>{let r=ZC(n);t+=n.test?`(${n.test})?${r}:`:r}),Ue(t)===":"&&(t+="null"),t}function Mne(e,t,n,r,i,o){let a={};o=o||{},o.encoders={$encode:a},e=mHe(e,t,n,r,i.config);for(let s in e)a[s]=CHe(e[s],t,o,i);return o}function CHe(e,t,n,r){let i={},o={};for(let a in e)e[a]!=null&&(i[a]=MHe(bHe(e[a]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function bHe(e){return F(e)?xHe(e):ZC(e)}function MHe(e,t,n,r){let i=W2(e,t);return i.$fields.forEach(o=>r[o]=1),Te(n,i.$params),i.$expr}var wHe="outer",SHe=["value","update","init","react","bind"];function ene(e,t){B(e+' for "outer" push: '+Z(t))}function wne(e,t){let n=e.name;if(e.push===wHe)t.signals[n]||ene("No prior signal definition",n),SHe.forEach(r=>{e[r]!==void 0&&ene("Invalid property ",r)});else{let r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function tI(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function JC(e,t,n,r){return new tI(e,t,n,r)}function KC(e,t){return JC("operator",e,t)}function _e(e){let t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Xp(e,t){return t?{$field:e,$name:t}:{$field:e}}var nI=Xp("key");function tne(e,t){return{$compare:e,$order:t}}function EHe(e,t){let n={$key:e};return t&&(n.$flat=!0),n}var DHe="ascending",zHe="descending";function HHe(e){return ne(e)?(e.order===zHe?"-":"+")+eb(e.op,e.field):""}function eb(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}var fI="scope",rI="view";function yr(e){return e&&e.signal}function LHe(e){return e&&e.expr}function WC(e){if(yr(e))return!0;if(ne(e)){for(let t in e)if(WC(e[t]))return!0}return!1}function Y2(e,t){return e??t}function m0(e){return e&&e.signal||e}var nne="timer";function Qp(e,t){return(e.merge?VHe:e.stream?NHe:e.type?_He:B("Invalid stream specification: "+Z(e)))(e,t)}function AHe(e){return e===fI?rI:e||rI}function VHe(e,t){let n=e.merge.map(i=>Qp(i,t)),r=dI({merge:n},e,t);return t.addStream(r).id}function NHe(e,t){let n=Qp(e.stream,t),r=dI({stream:n},e,t);return t.addStream(r).id}function _He(e,t){let n;e.type===nne?(n=t.event(nne,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(AHe(e.source),e.type);let r=dI({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function dI(e,t,n){let r=t.between;return r&&(r.length!==2&&B('Stream "between" parameter must have 2 entries: '+Z(t)),e.between=[Qp(r[0],n),Qp(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(kHe(t.marktype,t.markname,t.markrole)),t.source===fI&&r.push("inScope(event.item)"),r.length&&(e.filter=W2("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function kHe(e,t,n){let r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}var THe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function IHe(e,t,n){let r=e.encode,i={target:n},o=e.events,a=e.update,s=[];o||B("Signal update missing events specification."),Q(o)&&(o=Ai(o,t.isSubscope()?fI:rI)),o=te(o).filter(c=>c.signal||c.scale?(s.push(c),0):1),s.length>1&&(s=[RHe(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),r!=null&&(a&&B("Signal encode and update are mutually exclusive."),a="encode(item(),"+Z(r)+")"),i.update=Q(a)?W2(a,t):a.expr!=null?W2(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:THe,$params:{$value:t.signalRef(a.signal)}}:B("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach(c=>t.addUpdate(Te(FHe(c,t),i)))}function FHe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Qp(e,t)}}function RHe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function OHe(e,t){let n=t.getSignal(e.name),r=e.update;e.init&&(r?B("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=W2(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>IHe(i,t,n.id))}var jt=e=>(t,n,r)=>JC(e,n,t||void 0,r),Sne=jt("aggregate"),PHe=jt("axisticks"),Ene=jt("bound"),Q2=jt("collect"),rne=jt("compare"),$He=jt("datajoin"),Dne=jt("encode"),BHe=jt("expression"),UHe=jt("facet"),jHe=jt("field"),qHe=jt("key"),GHe=jt("legendentries"),WHe=jt("load"),YHe=jt("mark"),XHe=jt("multiextent"),QHe=jt("multivalues"),KHe=jt("overlap"),ZHe=jt("params"),zne=jt("prefacet"),JHe=jt("projection"),eLe=jt("proxy"),tLe=jt("relay"),Hne=jt("render"),nLe=jt("scale"),v0=jt("sieve"),rLe=jt("sortitems"),Lne=jt("viewlayout"),iLe=jt("values"),oLe=0,Ane={min:"min",max:"max",count:"sum"};function aLe(e,t){let n=e.type||"linear";bV(n)||B("Unrecognized scale type: "+Z(n)),t.addScale(e.name,{type:n,domain:void 0})}function sLe(e,t){let n=t.getScale(e.name).params,r;n.domain=Vne(e.domain,e,t),e.range!=null&&(n.range=_ne(e,t,n)),e.interpolate!=null&&vLe(e.interpolate,n),e.nice!=null&&(n.nice=gLe(e.nice,t)),e.bins!=null&&(n.bins=mLe(e.bins,t));for(r in e)de(n,r)||r==="name"||(n[r]=t2(e[r],t))}function t2(e,t){return ne(e)?e.signal?t.signalRef(e.signal):B("Unsupported object: "+Z(e)):e}function YC(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>t2(n,t))}function tb(e){B("Can not find data set: "+Z(e))}function Vne(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&B("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(F(e)?cLe:e.fields?uLe:lLe)(e,t,n)}function cLe(e,t,n){return e.map(r=>t2(r,n))}function lLe(e,t,n){let r=n.getData(e.data);return r||tb(e.data),W3(t.type)?r.valuesRef(n,e.field,Nne(e.sort,!1)):SV(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function uLe(e,t,n){let r=e.data,i=e.fields.reduce((o,a)=>(a=Q(a)?{data:r,field:a}:F(a)||a.signal?fLe(a,n):a,o.push(a),o),[]);return(W3(t.type)?dLe:SV(t.type)?pLe:hLe)(e,n,i)}function fLe(e,t){let n="_:vega:_"+oLe++,r=Q2({});if(F(e))r.value={$ingest:e};else if(e.signal){let i="setdata("+Z(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,v0({})]),{data:n,field:"data"}}function dLe(e,t,n){let r=Nne(e.sort,!0),i,o,a=n.map(l=>{let u=t.getData(l.data);return u||tb(l.data),u.countsRef(t,l.field,r)}),s={groupby:nI,pulse:a};r&&(i=r.op||"count",o=r.field?eb(i,r.field):"count",s.ops=[Ane[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(Sne(s));let c=t.add(Q2({pulse:_e(i)}));return o=t.add(iLe({field:nI,sort:t.sortRef(r),pulse:_e(c)})),_e(o)}function Nne(e,t){return e&&(!e.field&&!e.op?ne(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?B("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Ane[e.op]&&B("Multiple domain scales can not be sorted using "+e.op)),e}function pLe(e,t,n){let r=n.map(i=>{let o=t.getData(i.data);return o||tb(i.data),o.domainRef(t,i.field)});return _e(t.add(QHe({values:r})))}function hLe(e,t,n){let r=n.map(i=>{let o=t.getData(i.data);return o||tb(i.data),o.extentRef(t,i.field)});return _e(t.add(XHe({extents:r})))}function mLe(e,t){return e.signal||F(e)?YC(e,t):t.objectProperty(e)}function gLe(e,t){return e.signal?t.signalRef(e.signal):ne(e)?{interval:t2(e.interval),step:t2(e.step)}:t2(e)}function vLe(e,t){t.interpolate=t2(e.type||e),e.gamma!=null&&(t.interpolateGamma=t2(e.gamma))}function _ne(e,t,n){let r=t.config.range,i=e.range;if(i.signal)return t.signalRef(i.signal);if(Q(i)){if(r&&de(r,i))return e=Te({},e,{range:r[i]}),_ne(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=W3(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:B("Unrecognized scale range value: "+Z(i))}else if(i.scheme){n.scheme=F(i.scheme)?YC(i.scheme,t):t2(i.scheme,t),i.extent&&(n.schemeExtent=YC(i.extent,t)),i.count&&(n.schemeCount=t2(i.count,t));return}else if(i.step){n.rangeStep=t2(i.step,t);return}else{if(W3(e.type)&&!F(i))return Vne(i,e,t);F(i)||B("Unsupported range type: "+Z(i))}return i.map(o=>(F(o)?YC:t2)(o,t))}function yLe(e,t){let n=t.config.projection||{},r={};for(let i in e)i!=="name"&&(r[i]=iI(e[i],i,t));for(let i in n)r[i]==null&&(r[i]=iI(n[i],i,t));t.addProjection(e.name,r)}function iI(e,t,n){return F(e)?e.map(r=>iI(r,t,n)):ne(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:B("Unsupported parameter object: "+Z(e)):e}var K2="top",gf="left",vf="right",m4="bottom",kne="center",xLe="vertical",CLe="start",bLe="middle",MLe="end",oI="index",pI="label",wLe="offset",hf="perc",SLe="perc2",n2="value",Zp="guide-label",hI="guide-title",ELe="group-title",DLe="group-subtitle",ine="symbol",XC="gradient",aI="discrete",sI="size",zLe="shape",HLe="fill",LLe="stroke",ALe="strokeWidth",VLe="strokeDash",NLe="opacity",mI=[sI,zLe,HLe,LLe,ALe,VLe,NLe],Jp={name:1,style:1,interactive:1},vt={value:0},r2={value:1},nb="group",Tne="rect",gI="rule",_Le="symbol",y0="text";function Kp(e){return e.type=nb,e.interactive=e.interactive||!1,e}function P1(e,t){let n=(r,i)=>Y2(e[r],Y2(t[r],i));return n.isVertical=r=>xLe===Y2(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Y2(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Y2(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Y2(e.columns,Y2(t.columns,+n.isVertical(!0))),n}function Ine(e,t){let n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function kLe(e,t,n){let r=t.config.style[n];return r&&r[e]}function rb(e,t,n){return`item.anchor === '${CLe}' ? ${e} : item.anchor === '${MLe}' ? ${t} : ${n}`}var vI=rb(Z(gf),Z(vf),Z(kne));function TLe(e){let t=e("tickBand"),n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ne(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function Fne(e,t){return t?e?ne(e)?Object.assign({},e,{offset:Fne(e.offset,t)}):{value:e,offset:t}:t:e}function vo(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=mf(e.encode,t,Jp)):e.interactive=!1,e}function ILe(e,t,n,r){let i=P1(e,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength(),c,l,u,f,d;o?(l=[0,1],u=[0,0],f=a,d=s):(l=[0,0],u=[1,0],f=s,d=a);let p={enter:c={opacity:vt,x:vt,y:vt,width:Nr(f),height:Nr(d)},update:Te({},c,{opacity:r2,fill:{gradient:t,start:l,stop:u}}),exit:{opacity:vt}};return ri(p,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),vo({type:Tne,role:lHe,encode:p},r)}function FLe(e,t,n,r,i){let o=P1(e,n),a=o.isVertical(),s=o.gradientThickness(),c=o.gradientLength(),l,u,f,d,p="";a?(l="y",f="y2",u="x",d="width",p="1-"):(l="x",f="x2",u="y",d="height");let h={opacity:vt,fill:{scale:t,field:n2}};h[l]={signal:p+"datum."+hf,mult:c},h[u]=vt,h[f]={signal:p+"datum."+SLe,mult:c},h[d]=Nr(s);let m={enter:h,update:Te({},h,{opacity:r2}),exit:{opacity:vt}};return ri(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),vo({type:Tne,role:sHe,key:n2,from:i,encode:m},r)}var RLe=`datum.${hf}<=0?"${gf}":datum.${hf}>=1?"${vf}":"${kne}"`,OLe=`datum.${hf}<=0?"${m4}":datum.${hf}>=1?"${K2}":"${bLe}"`;function one(e,t,n,r){let i=P1(e,t),o=i.isVertical(),a=Nr(i.gradientThickness()),s=i.gradientLength(),c=i("labelOverlap"),l,u,f,d,p="",h={enter:l={opacity:vt},update:u={opacity:r2,text:{field:pI}},exit:{opacity:vt}};return ri(h,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Y2(e.labelLimit,t.gradientLabelLimit)}),o?(l.align={value:"left"},l.baseline=u.baseline={signal:OLe},f="y",d="x",p="1-"):(l.align=u.align={signal:RLe},l.baseline={value:"top"},f="x",d="y"),l[f]=u[f]={signal:p+"datum."+hf,mult:s},l[d]=u[d]=a,a.offset=Y2(e.labelOffset,t.gradientLabelOffset)||0,c=c?{separation:i("labelSeparation"),method:c,order:"datum."+oI}:void 0,vo({type:y0,role:yne,style:Zp,key:n2,from:r,encode:h,overlap:c},n)}function PLe(e,t,n,r,i){let o=P1(e,t),a=n.entries,s=!!(a&&a.interactive),c=a?a.name:void 0,l=o("clipHeight"),u=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${wLe} : datum.${sI}`,p=l?Nr(l):{field:sI},h=`datum.${oI}`,m=`max(1, ${i})`,g,v,y,C,b;p.mult=.5,g={enter:v={opacity:vt,x:{signal:d,mult:.5,offset:u},y:p},update:y={opacity:r2,x:v.x,y:v.y},exit:{opacity:vt}};let M=null,S=null;e.fill||(M=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),ri(g,{fill:o("symbolFillColor",M),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",S),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),mI.forEach(L=>{e[L]&&(y[L]=v[L]={scale:e[L],field:n2})});let w=vo({type:_Le,role:uHe,key:n2,from:f,clip:l?!0:void 0,encode:g},n.symbols),E=Nr(u);E.offset=o("labelOffset"),g={enter:v={opacity:vt,x:{signal:d,offset:E},y:p},update:y={opacity:r2,text:{field:pI},x:v.x,y:v.y},exit:{opacity:vt}},ri(g,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});let D=vo({type:y0,role:yne,style:Zp,key:n2,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:vt,height:l?Nr(l):vt,opacity:vt},exit:{opacity:vt},update:y={opacity:r2,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(C=`ceil(item.mark.items.length / ${m})`,y.row.signal=`${h}%${C}`,y.column.signal=`floor(${h} / ${C})`,b={field:["row",h]}):(y.row.signal=`floor(${h} / ${m})`,y.column.signal=`${h} % ${m}`,b={field:h}),y.column.signal=`(${i})?${y.column.signal}:${h}`,r={facet:{data:r,name:"value",groupby:oI}},Kp({role:uI,from:r,encode:mf(g,a,Jp),marks:[w,D],name:c,interactive:s,sort:b})}function $Le(e,t){let n=P1(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}var yI='item.orient === "left"',xI='item.orient === "right"',ib=`(${yI} || ${xI})`,BLe=`datum.vgrad && ${ib}`,ULe=rb('"top"','"bottom"','"middle"'),jLe=rb('"right"','"left"','"center"'),qLe=`datum.vgrad && ${xI} ? (${jLe}) : (${ib} && !(datum.vgrad && ${yI})) ? "left" : ${vI}`,GLe=`item._anchor || (${ib} ? "middle" : "start")`,WLe=`${BLe} ? (${yI} ? -90 : 90) : 0`,YLe=`${ib} ? (datum.vgrad ? (${xI} ? "bottom" : "top") : ${ULe}) : "top"`;function XLe(e,t,n,r){let i=P1(e,t),o={enter:{opacity:vt},update:{opacity:r2,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:vt}};return ri(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:GLe},angle:{signal:WLe},align:{signal:qLe},baseline:{signal:YLe},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),vo({type:y0,role:fHe,style:hI,from:r,encode:o},n)}function QLe(e,t){let n;return ne(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+ane(e.path)+")":e.sphere&&(n="geoShape("+ane(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function ane(e){return ne(e)&&e.signal?e.signal:Z(e)}function Rne(e){let t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===nb?uI:t||cI}function KLe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Rne(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function ZLe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function CI(e,t){let n=Nv(e.type);n||B("Unrecognized transform type: "+Z(e.type));let r=JC(n.type.toLowerCase(),null,One(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function One(e,t,n){let r={},i=e.params.length;for(let o=0;o<i;++o){let a=e.params[o];r[a.name]=JLe(a,t,n)}return r}function JLe(e,t,n){let r=e.type,i=t[e.name];if(r==="index")return eAe(e,t,n);if(i===void 0){e.required&&B("Missing required "+Z(t.type)+" parameter: "+Z(e.name));return}else{if(r==="param")return tAe(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!yr(i)?i.map(o=>sne(e,o,n)):sne(e,i,n)}function sne(e,t,n){let r=e.type;if(yr(t))return lne(r)?B("Expression references can not be signals."):JT(r)?n.fieldRef(t):une(r)?n.compareRef(t):n.signalRef(t.signal);{let i=e.expr||JT(r);return i&&nAe(t)?n.exprRef(t.expr,t.as):i&&rAe(t)?Xp(t.field,t.as):lne(r)?W2(t,n):iAe(r)?_e(n.getData(t).values):JT(r)?Xp(t):une(r)?n.compareRef(t):t}}function eAe(e,t,n){return Q(t.from)||B('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function tAe(e,t,n){let r=t[e.name];return e.array?(F(r)||B("Expected an array of sub-parameters. Instead: "+Z(r)),r.map(i=>cne(e,i,n))):cne(e,r,n)}function cne(e,t,n){let r=e.params.length,i;for(let a=0;a<r;++a){i=e.params[a];for(let s in i.key)if(i.key[s]!==t[s]){i=null;break}if(i)break}i||B("Unsupported parameter: "+Z(t));let o=Te(One(i,t,n),i.key);return _e(n.add(ZHe(o)))}var nAe=e=>e&&e.expr,rAe=e=>e&&e.field,iAe=e=>e==="data",lne=e=>e==="expr",JT=e=>e==="field",une=e=>e==="compare";function oAe(e,t,n){let r,i,o,a,s;return e?(r=e.facet)&&(t||B("Only group marks can be faceted."),r.field!=null?a=s=QC(r,n):(e.data?s=_e(n.getData(e.data).aggregate):(o=CI(Te({type:"aggregate",groupby:te(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=QC(r,n),a=s=_e(n.add(o))),i=n.keyRef(r.groupby,!0))):a=_e(n.add(Q2(null,[{}]))),a||(a=QC(e,n)),{key:i,pulse:a,parent:s}}function QC(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:_e(t.getData(e.data).output)}function g0(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}g0.fromEntries=function(e,t){let n=t.length,r=t[n-1],i=t[n-2],o=t[0],a=null,s=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=_e(t[s-1]),e.add(t[s]),t[s].type==="aggregate"&&(a=t[s]);return new g0(e,o,i,r,a)};function Pne(e){return Q(e)?e:null}function fne(e,t,n){let r=eb(n.op,n.field),i;if(t.ops){for(let o=0,a=t.as.length;o<a;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function Wp(e,t,n,r,i,o,a){let s=t[n]||(t[n]={}),c=HHe(o),l=Pne(i),u,f;if(l!=null&&(e=t.scope,l=l+(c?"|"+c:""),u=s[l]),!u){let d=o?{field:nI,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:_e(t.output)};c&&(d.sort=e.sortRef(o)),f=e.add(JC(r,void 0,d)),a&&(t.index[i]=f),u=_e(f),l!=null&&(s[l]=u)}return u}g0.prototype={countsRef(e,t,n){let r=this,i=r.counts||(r.counts={}),o=Pne(t),a,s,c;return o!=null&&(e=r.scope,a=i[o]),a?n&&n.field&&fne(e,a.agg.params,n):(c={groupby:e.fieldRef(t,"key"),pulse:_e(r.output)},n&&n.field&&fne(e,c,n),s=e.add(Sne(c)),a=e.add(Q2({pulse:_e(s)})),a={agg:s,ref:_e(a)},o!=null&&(i[o]=a)),a.ref},tuplesRef(){return _e(this.values)},extentRef(e,t){return Wp(e,this,"extent","extent",t,!1)},domainRef(e,t){return Wp(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Wp(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Wp(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Wp(e,this,"indata","tupleindex",t,!0,!0)}};function aAe(e,t,n){let r=e.from.facet,i=r.name,o=QC(r,t),a;r.name||B("Facet must have a name: "+Z(r)),r.data||B("Facet must reference a data set: "+Z(r)),r.field?a=t.add(zne({field:t.fieldRef(r.field),pulse:o})):r.groupby?a=t.add(UHe({key:t.keyRef(r.groupby),group:_e(t.proxy(n.parent)),pulse:o})):B("Facet must specify groupby or field: "+Z(r));let s=t.fork(),c=s.add(Q2()),l=s.add(v0({pulse:_e(c)}));s.addData(i,new g0(s,c,c,l)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}function sAe(e,t,n){let r=t.add(zne({pulse:n.pulse})),i=t.fork();i.add(v0()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function $ne(e,t,n){let r=e.remove,i=e.insert,o=e.toggle,a=e.modify,s=e.values,c=t.add(KC()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,o,a,s].map(f=>f??"null").join(",")+"),0)",u=W2(l,t);c.update=u.$expr,c.params=u.$params}function ob(e,t){let n=Rne(e),r=e.type===nb,i=e.from&&e.from.facet,o=e.overlap,a=e.layout||n===uI||n===lI,s,c,l,u,f,d,p,h=n===cI||a||i,m=oAe(e.from,r,t);c=t.add($He({key:m.key||(e.key?Xp(e.key):void 0),pulse:m.pulse,clean:!r}));let g=_e(c);c=l=t.add(Q2({pulse:g})),c=t.add(YHe({markdef:KLe(e),interactive:ZLe(e.interactive,t),clip:QLe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:_e(c)}));let v=_e(c);c=u=t.add(Dne(Mne(e.encode,e.type,n,e.style,t,{mod:!1,pulse:v}))),c.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{let w=CI(S,t),E=w.metadata;(E.generates||E.changes)&&B("Mark transforms should not generate new data."),E.nomod||(u.params.mod=!0),w.params.pulse=_e(c),t.add(c=w)}),e.sort&&(c=t.add(rLe({sort:t.compareRef(e.sort),pulse:_e(c)})));let y=_e(c);(i||a)&&(a=t.add(Lne({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:y})),d=_e(a));let C=t.add(Ene({mark:v,pulse:d||y}));p=_e(C),r&&(h&&(s=t.operators,s.pop(),a&&s.pop()),t.pushState(y,d||p,g),i?aAe(e,t,m):h?sAe(e,t,m):t.parse(e),t.popState(),h&&(a&&s.push(a),s.push(C))),o&&(p=cAe(o,p,t));let b=t.add(Hne({pulse:p})),M=t.add(v0({pulse:_e(b)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new g0(t,l,b,M)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&B("Marks only support modify triggers."),$ne(S,t,f)}))}function cAe(e,t,n){let r=e.method,i=e.bound,o=e.separation,a={separation:yr(o)?n.signalRef(o.signal):o,method:yr(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),i){let s=i.tolerance;a.boundTolerance=yr(s)?n.signalRef(s.signal):+s,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return _e(n.add(KHe(a)))}function lAe(e,t){let n=t.config.legend,r=e.encode||{},i=P1(e,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,c=o.style,l={},u=0,f,d,p;mI.forEach(C=>e[C]?(l[C]=e[C],u=u||e[C]):0),u||B("Missing valid scale for legend.");let h=uAe(e,t.scaleType(u)),m={title:e.title!=null,scales:l,type:h,vgrad:h!=="symbol"&&i.isVertical()},g=_e(t.add(Q2(null,[m]))),v={enter:{x:{value:0},y:{value:0}}},y=_e(t.add(GHe(d={type:h,scale:t.scaleRef(u),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return h===XC?(p=[ILe(e,u,n,r.gradient),one(e,n,r.labels,y)],d.count=d.count||t.signalRef(`max(2,2*floor((${m0(i.gradientLength())})/100))`)):h===aI?p=[FLe(e,u,n,r.gradient,y),one(e,n,r.labels,y)]:(f=$Le(e,n),p=[PLe(e,n,r,y,m0(f.columns))],d.size=pAe(e,t,p[0].marks)),p=[Kp({role:cHe,from:g,encode:v,marks:p,layout:f,interactive:s})],m.title&&p.push(XLe(e,n,r.title,g)),ob(Kp({role:aHe,from:g,encode:mf(dAe(i,e,n),o,Jp),marks:p,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:c}),t)}function uAe(e,t){let n=e.type||ine;return!e.type&&fAe(e)===1&&(e.fill||e.stroke)&&(n=M7(t)?XC:Py(t)?aI:ine),n!==XC?n:Py(t)?aI:XC}function fAe(e){return mI.reduce((t,n)=>t+(e[n]?1:0),0)}function dAe(e,t,n){let r={enter:{},update:{}};return ri(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function pAe(e,t,n){let r=m0(dne("size",e,n)),i=m0(dne("strokeWidth",e,n)),o=m0(hAe(n[1].encode,t,Zp));return W2(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function dne(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Ine(e,n[0].encode)}function hAe(e,t,n){return Ine("fontSize",e)||kLe("fontSize",t,n)}var mAe=`item.orient==="${gf}"?-90:item.orient==="${vf}"?90:0`;function gAe(e,t){e=Q(e)?{text:e}:e;let n=P1(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,c=[],l={},u=_e(t.add(Q2(null,[l])));return c.push(xAe(e,n,vAe(e),u)),e.subtitle&&c.push(CAe(e,n,r.subtitle,u)),ob(Kp({role:dHe,from:u,encode:yAe(n,i),marks:c,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function vAe(e){let t=e.encode;return t&&t.title||Te({name:e.name,interactive:e.interactive,style:e.style},t)}function yAe(e,t){let n={enter:{},update:{}};return ri(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:vI},angle:{signal:mAe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),mf(n,t,Jp)}function xAe(e,t,n,r){let i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ri(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vo({type:y0,role:pHe,style:ELe,from:r,encode:a},n)}function CAe(e,t,n,r){let i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ri(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vo({type:y0,role:hHe,style:DLe,from:r,encode:a},n)}function bAe(e,t){let n=[];e.transform&&e.transform.forEach(r=>{n.push(CI(r,t))}),e.on&&e.on.forEach(r=>{$ne(r,t,e.name)}),t.addDataPipeline(e.name,MAe(e,t,n))}function MAe(e,t,n){let r=[],i=null,o=!1,a=!1,s,c,l,u,f;for(e.values?yr(e.values)||WC(e.format)?(r.push(pne(t,e)),r.push(i=h0())):r.push(i=h0({$ingest:e.values,$format:e.format})):e.url?WC(e.url)||WC(e.format)?(r.push(pne(t,e)),r.push(i=h0())):r.push(i=h0({$request:e.url,$format:e.format})):e.source&&(i=s=te(e.source).map(d=>_e(t.getData(d).output)),r.push(null)),c=0,l=n.length;c<l;++c)u=n[c],f=u.metadata,!i&&!f.source&&r.push(i=h0()),r.push(u),f.generates&&(a=!0),f.modifies&&!a&&(o=!0),f.source?i=u:f.changes&&(i=null);return s&&(l=s.length-1,r[0]=tLe({derive:o,pulse:l?s:s[0]}),(o||l)&&r.splice(1,0,h0())),i||r.push(h0()),r.push(v0({})),r}function h0(e){let t=Q2({},e);return t.metadata={source:!0},t}function pne(e,t){return WHe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}var Bne=e=>e===m4||e===K2,ab=(e,t,n)=>yr(e)?DAe(e.signal,t,n):e===gf||e===K2?t:n,_r=(e,t,n)=>yr(e)?SAe(e.signal,t,n):Bne(e)?t:n,X2=(e,t,n)=>yr(e)?EAe(e.signal,t,n):Bne(e)?n:t,Une=(e,t,n)=>yr(e)?zAe(e.signal,t,n):e===K2?{value:t}:{value:n},wAe=(e,t,n)=>yr(e)?HAe(e.signal,t,n):e===vf?{value:t}:{value:n},SAe=(e,t,n)=>jne(`${e} === '${K2}' || ${e} === '${m4}'`,t,n),EAe=(e,t,n)=>jne(`${e} !== '${K2}' && ${e} !== '${m4}'`,t,n),DAe=(e,t,n)=>bI(`${e} === '${gf}' || ${e} === '${K2}'`,t,n),zAe=(e,t,n)=>bI(`${e} === '${K2}'`,t,n),HAe=(e,t,n)=>bI(`${e} === '${vf}'`,t,n),jne=(e,t,n)=>(t=t!=null?Nr(t):t,n=n!=null?Nr(n):n,hne(t)&&hne(n)?(t=t?t.signal||Z(t.value):null,n=n?n.signal||Z(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Te({test:e},t)].concat(n||[])),hne=e=>e==null||Object.keys(e).length===1,bI=(e,t,n)=>({signal:`${e} ? (${df(t)}) : (${df(n)})`}),LAe=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${gf}' ? (${df(r)}) : `:"")+(n!=null?`${e} === '${m4}' ? (${df(n)}) : `:"")+(i!=null?`${e} === '${vf}' ? (${df(i)}) : `:"")+(t!=null?`${e} === '${K2}' ? (${df(t)}) : `:"")+"(null)"}),df=e=>yr(e)?e.signal:e==null?null:Z(e),AAe=(e,t)=>t===0?0:yr(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},pf=(e,t)=>{let n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function uf(e,t,n,r){let i;if(t&&de(t,e))return t[e];if(de(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[hI][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Zp][i]}return null}function mne(e){let t={};for(let n of e)if(n)for(let r in n)t[r]=1;return Object.keys(t)}function VAe(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,s,c,l;if(yr(a)){let f=mne([n.axisX,n.axisY]),d=mne([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);s={};for(l of f)s[l]=_r(a,uf(l,n.axisX,i,r),uf(l,n.axisY,i,r));c={};for(l of d)c[l]=LAe(a.signal,uf(l,n.axisTop,i,r),uf(l,n.axisBottom,i,r),uf(l,n.axisLeft,i,r),uf(l,n.axisRight,i,r))}else s=a===K2||a===m4?n.axisX:n.axisY,c=n["axis"+a[0].toUpperCase()+a.slice(1)];return s||c||o?Te({},i,s,c,o):i}function NAe(e,t,n,r){let i=P1(e,t),o=e.orient,a,s,c={enter:a={opacity:vt},update:s={opacity:r2},exit:{opacity:vt}};ri(c,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});let l=gne(e,0),u=gne(e,1);return a.x=s.x=_r(o,l,vt),a.x2=s.x2=_r(o,u),a.y=s.y=X2(o,l,vt),a.y2=s.y2=X2(o,u),vo({type:gI,role:tHe,from:r,encode:c},n)}function gne(e,t){return{scale:e.scale,range:t}}function _Ae(e,t,n,r,i){let o=P1(e,t),a=e.orient,s=e.gridScale,c=ab(a,1,-1),l=kAe(e.offset,c),u,f,d,p={enter:u={opacity:vt},update:d={opacity:r2},exit:f={opacity:vt}};ri(p,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});let h={scale:e.scale,field:n2,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},m=_r(a,{signal:"height"},{signal:"width"}),g=s?{scale:s,range:0,mult:c,offset:l}:{value:0,offset:l},v=s?{scale:s,range:1,mult:c,offset:l}:Te(m,{mult:c,offset:l});return u.x=d.x=_r(a,h,g),u.y=d.y=X2(a,h,g),u.x2=d.x2=X2(a,v),u.y2=d.y2=_r(a,v),f.x=_r(a,h),f.y=X2(a,h),vo({type:gI,role:nHe,key:n2,from:r,encode:p},n)}function kAe(e,t){if(t!==1)if(!ne(e))e=yr(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Te({},e);for(;n.mult!=null;)if(ne(n.mult))n=n.mult=Te({},n.mult);else return n.mult=yr(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function TAe(e,t,n,r,i,o){let a=P1(e,t),s=e.orient,c=ab(s,-1,1),l,u,f,d={enter:l={opacity:vt},update:f={opacity:r2},exit:u={opacity:vt}};ri(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});let p=Nr(i);p.mult=c;let h={scale:e.scale,field:n2,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return f.y=l.y=_r(s,vt,h),f.y2=l.y2=_r(s,p),u.x=_r(s,h),f.x=l.x=X2(s,vt,h),f.x2=l.x2=X2(s,p),u.y=X2(s,h),vo({type:gI,role:iHe,key:n2,from:r,encode:d},n)}function eI(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function IAe(e,t,n,r,i,o){let a=P1(e,t),s=e.orient,c=e.scale,l=ab(s,-1,1),u=m0(a("labelFlush")),f=m0(a("labelFlushOffset")),d=a("labelAlign"),p=a("labelBaseline"),h=u===0||!!u,m,g=Nr(i);g.mult=l,g.offset=Nr(a("labelPadding")||0),g.offset.mult=l;let v={scale:c,field:n2,band:.5,offset:Fne(o.offset,a("labelOffset"))},y=_r(s,h?eI(c,u,'"left"','"right"','"center"'):{value:"center"},wAe(s,"left","right")),C=_r(s,Une(s,"bottom","top"),h?eI(c,u,'"top"','"bottom"','"middle"'):{value:"middle"}),b=eI(c,u,`-(${f})`,f,0);h=h&&f;let M={opacity:vt,x:_r(s,v,g),y:X2(s,v,g)},S={enter:M,update:m={opacity:r2,text:{field:pI},x:M.x,y:M.y,align:y,baseline:C},exit:{opacity:vt,x:M.x,y:M.y}};ri(S,{dx:!d&&h?_r(s,b):null,dy:!p&&h?X2(s,b):null}),ri(S,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:p});let w=a("labelBound"),E=a("labelOverlap");return E=E||w?{separation:a("labelSeparation"),method:E,order:"datum.index",bound:w?{scale:c,orient:s,tolerance:w}:null}:void 0,m.align!==y&&(m.align=pf(m.align,y)),m.baseline!==C&&(m.baseline=pf(m.baseline,C)),vo({type:y0,role:rHe,style:Zp,key:n2,from:r,encode:S,overlap:E},n)}function FAe(e,t,n,r){let i=P1(e,t),o=e.orient,a=ab(o,-1,1),s,c,l={enter:s={opacity:vt,anchor:Nr(i("titleAnchor",null)),align:{signal:vI}},update:c=Te({},s,{opacity:r2,text:Nr(e.title)}),exit:{opacity:vt}},u={signal:`lerp(range("${e.scale}"), ${rb(0,1,.5)})`};return c.x=_r(o,u),c.y=X2(o,u),s.angle=_r(o,vt,AAe(a,90)),s.baseline=_r(o,Une(o,m4,K2),{value:m4}),c.angle=s.angle,c.baseline=s.baseline,ri(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),RAe(i,o,l,n),l.update.align=pf(l.update.align,s.align),l.update.angle=pf(l.update.angle,s.angle),l.update.baseline=pf(l.update.baseline,s.baseline),vo({type:y0,role:oHe,style:hI,from:r,encode:l},n)}function RAe(e,t,n,r){let i=(s,c)=>s!=null?(n.update[c]=pf(Nr(s),n.update[c]),!1):!ff(c,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?Nr(a):_r(t,Nr(a),Nr(o))}function OAe(e,t){let n=VAe(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,c=P1(e,n),l=TLe(c),u={scale:e.scale,ticks:!!c("ticks"),labels:!!c("labels"),grid:!!c("grid"),domain:!!c("domain"),title:e.title!=null},f=_e(t.add(Q2({},[u]))),d=_e(t.add(PHe({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),p=[],h;return u.grid&&p.push(_Ae(e,n,r.grid,d,l)),u.ticks&&(h=c("tickSize"),p.push(TAe(e,n,r.ticks,d,h,l))),u.labels&&(h=u.ticks?h:0,p.push(IAe(e,n,r.labels,d,h,l))),u.domain&&p.push(NAe(e,n,r.domain,f)),u.title&&p.push(FAe(e,n,r.title,f)),ob(Kp({role:eHe,from:f,encode:mf(PAe(c,e),i,Jp),marks:p,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:o,interactive:a,style:s}),t)}function PAe(e,t){let n={enter:{},update:{}};return ri(n,{orient:e("orient"),offset:e("offset")||0,position:Y2(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function qne(e,t,n){let r=te(e.signals),i=te(e.scales);return n||r.forEach(o=>wne(o,t)),te(e.projections).forEach(o=>yLe(o,t)),i.forEach(o=>aLe(o,t)),te(e.data).forEach(o=>bAe(o,t)),i.forEach(o=>sLe(o,t)),(n||r).forEach(o=>OHe(o,t)),te(e.axes).forEach(o=>OAe(o,t)),te(e.marks).forEach(o=>ob(o,t)),te(e.legends).forEach(o=>lAe(o,t)),e.title&&gAe(e.title,t),t.parseLambdas(),t}var $Ae=e=>mf({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function BAe(e,t){let n=t.config,r=_e(t.root=t.add(KC())),i=UAe(e,n);i.forEach(l=>wne(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;let o=t.add(Q2()),a=t.add(Dne(Mne($Ae(e.encode),nb,lI,e.style,t,{pulse:_e(o)}))),s=t.add(Lne({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:_e(a)}));t.operators.pop(),t.pushState(_e(a),_e(s),null),qne(e,t,i),t.operators.push(s);let c=t.add(Ene({mark:r,pulse:_e(s)}));return c=t.add(Hne({pulse:_e(c)})),c=t.add(v0({pulse:_e(c)})),t.addData("root",new g0(t,o,o,c)),t}function Yp(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function UAe(e,t){let n=a=>Y2(e[a],t[a]),r=[Yp("background",n("background")),Yp("autosize",Kze(n("autosize"))),Yp("padding",Jze(n("padding"))),Yp("width",n("width")||0),Yp("height",n("height")||0)],i=r.reduce((a,s)=>(a[s.name]=s,a),{}),o={};return te(e.signals).forEach(a=>{de(i,a.name)?a=Te(i[a.name],a):r.push(a),o[a.name]=a}),te(t.signals).forEach(a=>{!de(o,a.name)&&!de(i,a.name)&&r.push(a)}),r}function Gne(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function vne(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Gne.prototype=vne.prototype={parse(e){return qne(e,this)},fork(){return new vne(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){let t=e instanceof tI?_e(e):e;return this.add(eLe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let a,s;r&&(a=r.data||(r.data={}),s=a[i]||(a[i]=[]),s.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(let r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(_e(this.add(v0({pulse:e})))),this._parent.push(t),this._lookup.push(n?_e(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Ue(this._parent)},encode(){return Ue(this._encode)},lookup(){return Ue(this._lookup)},markpath(){let e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Q(e))return Xp(e,t);e.signal||B("Unsupported field reference: "+Z(e));let n=e.signal,r=this.field[n];if(!r){let i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=_e(this.add(jHe(i)))}return r},compareRef(e){let t=!1,n=o=>yr(o)?(t=!0,this.signalRef(o.signal)):LHe(o)?(t=!0,this.exprRef(o.expr)):o,r=te(e.field).map(n),i=te(e.order).map(n);return t?_e(this.add(rne({fields:r,orders:i}))):tne(r,i)},keyRef(e,t){let n=!1,r=o=>yr(o)?(n=!0,_e(i[o.signal])):o,i=this.signals;return e=te(e).map(r),n?_e(this.add(qHe({fields:e,flat:t}))):EHe(e,t)},sortRef(e){if(!e)return e;let t=eb(e.op,e.field),n=e.order||DHe;return n.signal?_e(this.add(rne({fields:t,orders:this.signalRef(n.signal)}))):tne(t,n)},event(e,t){let n=e+":"+t;if(!this.events[n]){let r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return de(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&B("Duplicate signal name: "+Z(e));let n=t instanceof tI?t:this.add(KC(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||B("Unrecognized signal name: "+Z(e)),this.signals[e]},signalRef(e){return this.signals[e]?_e(this.signals[e]):(de(this.lambdas,e)||(this.lambdas[e]=this.add(KC(null))),_e(this.lambdas[e]))},parseLambdas(){let e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){let r=e[t],i=W2(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ne(e)?e:this.signalRef(e.signal||MI(e))},exprRef(e,t){let n={expr:W2(e,this)};return t&&(n.expr.$name=t),_e(this.add(BHe(n)))},addBinding(e,t){this.bindings||B("Nested signals do not support binding: "+Z(e)),this.bindings.push(Te({signal:e},t))},addScaleProj(e,t){de(this.scales,e)&&B("Duplicate scale or projection name: "+Z(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,nLe(t))},addProjection(e,t){this.addScaleProj(e,JHe(t))},getScale(e){return this.scales[e]||B("Unrecognized scale name: "+Z(e)),this.scales[e]},scaleRef(e){return _e(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return de(this.data,e)&&B("Duplicate data set name: "+Z(e)),this.data[e]=t},getData(e){return this.data[e]||B("Undefined data set name: "+Z(e)),this.data[e]},addDataPipeline(e,t){return de(this.data,e)&&B("Duplicate data set name: "+Z(e)),this.addData(e,g0.fromEntries(this,t))}};function MI(e){return(F(e)?jAe:qAe)(e)}function jAe(e){let t=e.length,n="[";for(let r=0;r<t;++r){let i=e[r];n+=(r>0?",":"")+(ne(i)?i.signal||MI(i):Z(i))}return n+"]"}function qAe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Z(r)+":"+(ne(i)?i.signal||MI(i):Z(i));return t+"}"}function GAe(){let e="sans-serif",r="#4c78a8",i="#000",o="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Wne(e,t,n){return ne(e)||B("Input Vega specification must be an object."),t=Pa(GAe(),t,e.config),BAe(e,new Gne(t,n)).toRuntime()}var WAe="5.28.0";Te(uc,zA,TN,PN,ik,yk,aT,Xk,uT,pT,gT,xT);function YAe(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var XAe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},QAe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},KAe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e},ZAe=Array.prototype.slice,x0=(e,t,n)=>{let r=n?n(t[0]):t[0];return r[e].apply(r,ZAe.call(t,1))},JAe=(e,t,n,r,i,o,a)=>new Date(e,t||0,n??1,r||0,i||0,o||0,a||0),eVe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:JAe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return x0("join",arguments)},indexof:function(){return x0("indexOf",arguments)},lastindexof:function(){return x0("lastIndexOf",arguments)},slice:function(){return x0("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return x0("substring",arguments,String)},split:function(){return x0("split",arguments,String)},replace:function(){return x0("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)},tVe=["view","item","group","xy","x","y"],SI=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&SI.add(setImmediate);var nVe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{let n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:XAe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{let n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);let i=e(t.property);if(n&&(e.memberDepth-=1),SI.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{let n=t.arguments,r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||eVe[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>QAe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>KAe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;let i=e(r.key);return e.memberDepth-=1,SI.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function eh(e,t,n,r,i,o){let a=s=>nVe[s.type](a,s);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=r,a.event=i,a.item=o,tVe.forEach(s=>a.fn[s]=function(){return i.vega[s](...arguments)}),a(e)}var Yne={operator(e,t){let n=t.ast,r=e.functions;return i=>eh(n,r,i)},parameter(e,t){let n=t.ast,r=e.functions;return(i,o)=>eh(n,r,o,i)},event(e,t){let n=t.ast,r=e.functions;return i=>eh(n,r,void 0,void 0,i)},handler(e,t){let n=t.ast,r=e.functions;return(i,o)=>{let a=o.item&&o.item.datum;return eh(n,r,i,a,o)}},encode(e,t){let{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(a,s)=>{let c=a.datum,l=0,u;for(let f in r)u=eh(r[f].ast,i,s,c,void 0,a),a[f]!==u&&(a[f]=u,l=1);return n!=="rule"&&YAe(a,r,o),l}}};var vR={};br(vR,{accessPathDepth:()=>C0,accessPathWithDatum:()=>rh,compile:()=>rae,contains:()=>Ae,deepEqual:()=>kr,deleteNestedProperty:()=>nh,duplicate:()=>le,entries:()=>$1,every:()=>fb,fieldIntersection:()=>pb,flatAccessWithDatum:()=>LI,getFirstDefined:()=>ot,hasIntersection:()=>db,hash:()=>Ce,internalField:()=>VI,isBoolean:()=>xf,isEmpty:()=>We,isEqual:()=>oVe,isInternalField:()=>Zne,isNullOrFalse:()=>ub,isNumeric:()=>oh,keys:()=>R,logicalExpr:()=>yf,mergeDeep:()=>zI,never:()=>DI,normalize:()=>SM,normalizeAngle:()=>y4,omit:()=>Fn,pick:()=>Vc,prefixGenerator:()=>EI,removePathFromField:()=>ih,replaceAll:()=>Z2,replacePathInField:()=>ar,resetIdCounter:()=>sVe,setEqual:()=>HI,some:()=>ls,stringify:()=>ft,titleCase:()=>v4,unique:()=>Vi,uniqueId:()=>AI,vals:()=>rn,varName:()=>ut,version:()=>RIe});var Xne={name:"vega-lite",author:'Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',version:"5.16.3",collaborators:["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-Lite is a concise high-level language for interactive visualization.",keywords:["vega","chart","visualization"],main:"build/vega-lite.js",unpkg:"build/vega-lite.min.js",jsdelivr:"build/vega-lite.min.js",module:"build/src/index",types:"build/src/index.d.ts",bin:{vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},files:["bin","build","src","vega-lite*","tsconfig.json"],scripts:{changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@babel/core":"^7.22.10","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-alias":"^5.0.0","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^25.0.4","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.2.1","@rollup/plugin-terser":"^0.4.3","@types/chai":"^4.3.5","@types/d3":"^7.4.0","@types/jest":"^29.5.4","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^6.4.1","@typescript-eslint/parser":"^6.4.1",ajv:"^8.12.0","ajv-formats":"^2.1.1",chai:"^4.3.7",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.0.0",d3:"^7.8.5","del-cli":"^5.0.0",eslint:"^8.47.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.8.0",jest:"^29.6.3","jest-dev-server":"^9.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.0.2",puppeteer:"^15.0.0","release-it":"^16.1.5",rollup:"^3.28.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3",serve:"^14.2.1",terser:"^5.19.2","ts-jest":"^29.1.1","ts-json-schema-generator":"^1.3.0",typescript:"~5.2.2","vega-cli":"^5.25.0","vega-datasets":"^2.7.0","vega-embed":"^6.22.2","vega-tooltip":"^0.33.0","yaml-front-matter":"^4.1.1"},dependencies:{"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},peerDependencies:{vega:"^5.24.0"},engines:{node:">=18"}};function sb(e){return!!e.or}function cb(e){return!!e.and}function lb(e){return!!e.not}function th(e,t){if(lb(e))th(e.not,t);else if(cb(e))for(let n of e.and)th(n,t);else if(sb(e))for(let n of e.or)th(n,t);else t(e)}function g4(e,t){return lb(e)?{not:g4(e.not,t)}:cb(e)?{and:e.and.map(n=>g4(n,t))}:sb(e)?{or:e.or.map(n=>g4(n,t))}:t(e)}var le=structuredClone;function DI(e){throw new Error(e)}function Vc(e,t){let n={};for(let r of t)de(e,r)&&(n[r]=e[r]);return n}function Fn(e,t){let n=x({},e);for(let r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>ft(e)).join(",")})`};function Ce(e){if(Oe(e))return e;let t=Q(e)?e:ft(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function ub(e){return e===!1||e===null}function Ae(e,t){return e.includes(t)}function ls(e,t){let n=0;for(let[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function fb(e,t){let n=0;for(let[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function zI(e,...t){for(let n of t)iVe(e,n??{});return e}function iVe(e,t){for(let n of R(t))ec(e,n,t[n],!0)}function Vi(e,t){let n=[],r={},i;for(let o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function oVe(e,t){let n=R(e),r=R(t);if(n.length!==r.length)return!1;for(let i of n)if(e[i]!==t[i])return!1;return!0}function HI(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function db(e,t){for(let n of e)if(t.has(n))return!0;return!1}function EI(e){let t=new Set;for(let n of e){let i=$o(n).map((a,s)=>s===0?a:`[${a}]`),o=i.map((a,s)=>i.slice(0,s+1).join(""));for(let a of o)t.add(a)}return t}function pb(e,t){return e===void 0||t===void 0?!0:db(EI(e),EI(t))}function We(e){return R(e).length===0}var R=Object.keys,rn=Object.values,$1=Object.entries;function xf(e){return e===!0||e===!1}function ut(e){let t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function yf(e,t){return lb(e)?`!(${yf(e.not,t)})`:cb(e)?`(${e.and.map(n=>yf(n,t)).join(") && (")})`:sb(e)?`(${e.or.map(n=>yf(n,t)).join(") || (")})`:t(e)}function nh(e,t){if(t.length===0)return!0;let n=t.shift();return n in e&&nh(e[n],t)&&delete e[n],We(e)}function v4(e){return e.charAt(0).toUpperCase()+e.substr(1)}function rh(e,t="datum"){let n=$o(e),r=[];for(let i=1;i<=n.length;i++){let o=`[${n.slice(0,i).map(Z).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function LI(e,t="datum"){return`${t}[${Z($o(e).join("."))}]`}function aVe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function ar(e){return`${$o(e).map(aVe).join("\\.")}`}function Z2(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function ih(e){return`${$o(e).join(".")}`}function C0(e){return e?$o(e).length:0}function ot(...e){for(let t of e)if(t!==void 0)return t}var Kne=42;function AI(e){let t=++Kne;return e?String(e)+t:t}function sVe(){Kne=42}function VI(e){return Zne(e)?e:`__${e}`}function Zne(e){return e.startsWith("__")}function y4(e){if(e!==void 0)return(e%360+360)%360}function oh(e){return Oe(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}var Qne=Object.getPrototypeOf(structuredClone({}));function kr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!kr(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!kr(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Qne.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Qne.toString)return e.toString()===t.toString();let i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){let o=i[r];if(!kr(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function ft(e){let t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");let a=t.push(r)-1,s=Object.keys(r).sort();for(o="",i=0;i<s.length;i++){let c=s[i],l=n(r[c]);l&&(o&&(o+=","),o+=JSON.stringify(c)+":"+l)}return t.splice(a,1),`{${o}}`}(e)}var B1="row",U1="column",Cf="facet",yt="x",on="y",j1="x2",yo="y2",i2="xOffset",us="yOffset",Ni="radius",J2="radius2",ii="theta",ea="theta2",oi="latitude",ai="longitude",_i="latitude2",si="longitude2",Rn="color",ki="fill",Ti="stroke",wn="shape",q1="size",ta="angle",p1="opacity",xo="fillOpacity",Co="strokeOpacity",bo="strokeWidth",Mo="strokeDash",b0="text",x4="order",M0="detail",bf="key",Nc="tooltip",Mf="href",wf="url",Sf="description",cVe={x:1,y:1,x2:1,y2:1},ire={theta:1,theta2:1,radius:1,radius2:1};function NI(e){return e in ire}var _I={longitude:1,longitude2:1,latitude:1,latitude2:1};function mb(e){switch(e){case oi:return"y";case _i:return"y2";case ai:return"x";case si:return"x2"}}function gb(e){return e in _I}var ore=R(_I),kI=k(x(x(x({},cVe),ire),_I),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function _c(e){return e===Rn||e===ki||e===Ti}var are={row:1,column:1,facet:1},Tr=R(are),TI=x(x({},kI),are),sre=R(TI),Jne=TI,{order:X6t,detail:Q6t,tooltip:K6t}=Jne,cre=ie(Jne,["order","detail","tooltip"]),ere=cre,{row:Z6t,column:J6t,facet:eut}=ere,lre=ie(ere,["row","column","facet"]),tut=R(cre),nut=R(lre);function ure(e){return!!lre[e]}function vb(e){return!!TI[e]}var fre=[j1,yo,_i,si,ea,J2];function yb(e){return wo(e)!==e}function wo(e){switch(e){case j1:return yt;case yo:return on;case _i:return oi;case si:return ai;case ea:return ii;case J2:return Ni}return e}function o2(e){if(NI(e))switch(e){case ii:return"startAngle";case ea:return"endAngle";case Ni:return"outerRadius";case J2:return"innerRadius"}return e}function Ir(e){switch(e){case yt:return j1;case on:return yo;case oi:return _i;case ai:return si;case ii:return ea;case Ni:return J2}}function Sn(e){switch(e){case yt:case j1:return"width";case on:case yo:return"height"}}function II(e){switch(e){case yt:return"xOffset";case on:return"yOffset";case j1:return"x2Offset";case yo:return"y2Offset";case ii:return"thetaOffset";case Ni:return"radiusOffset";case ea:return"theta2Offset";case J2:return"radius2Offset"}}function Ef(e){switch(e){case yt:return"xOffset";case on:return"yOffset"}}function dre(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}var pre=R(kI),tre=kI,{x:rut,y:iut,x2:out,y2:aut,xOffset:sut,yOffset:cut,latitude:lut,longitude:uut,latitude2:fut,longitude2:dut,theta:put,theta2:hut,radius:mut,radius2:gut}=tre,FI=ie(tre,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),hre=R(FI),RI={x:1,y:1},xr=R(RI);function xt(e){return e in RI}var xb={theta:1,radius:1},mre=R(xb);function C4(e){return e==="width"?yt:on}var OI={xOffset:1,yOffset:1},vut=R(OI);function kc(e){return e in OI}var nre=FI,{text:yut,tooltip:xut,href:Cut,url:but,description:Mut,detail:wut,key:Sut,order:Eut}=nre,gre=ie(nre,["text","tooltip","href","url","description","detail","key","order"]),vre=R(gre);function yre(e){return!!FI[e]}function xre(e){switch(e){case Rn:case ki:case Ti:case q1:case wn:case p1:case bo:case Mo:return!0;case xo:case Co:case ta:return!1}}var Cre=x(x(x(x({},RI),xb),OI),gre),b4=R(Cre);function Fr(e){return!!Cre[e]}function bre(e,t){return uVe(e)[t]}var Mre={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},rre=Mre,{geoshape:Dut}=rre,lVe=ie(rre,["geoshape"]);function uVe(e){switch(e){case Rn:case ki:case Ti:case Sf:case M0:case bf:case Nc:case Mf:case x4:case p1:case xo:case Co:case bo:case Cf:case B1:case U1:return Mre;case yt:case on:case i2:case us:case oi:case ai:return lVe;case j1:case yo:case _i:case si:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case q1:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Mo:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case wn:return{point:"always",geoshape:"always"};case b0:return{text:"always"};case ta:return{point:"always",square:"always",text:"always"};case wf:return{image:"always"};case ii:return{text:"always",arc:"always"};case Ni:return{text:"always",arc:"always"};case ea:case J2:return{arc:"always"}}}function Cb(e){switch(e){case yt:case on:case ii:case Ni:case i2:case us:case q1:case ta:case bo:case p1:case xo:case Co:case j1:case yo:case ea:case J2:return;case Cf:case B1:case U1:case wn:case Mo:case b0:case Nc:case Mf:case wf:case Sf:return"discrete";case Rn:case ki:case Ti:return"flexible";case oi:case ai:case _i:case si:case M0:case bf:case x4:return}}var dVe={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},wre={count:1,min:1,max:1};function So(e){return!!e&&!!e.argmin}function a2(e){return!!e&&!!e.argmax}function Df(e){return Q(e)&&!!dVe[e]}var pVe=new Set(["count","valid","missing","distinct"]);function bb(e){return Q(e)&&pVe.has(e)}function Sre(e){return Q(e)&&Ae(["min","max"],e)}var Ere=new Set(["count","sum","distinct","valid","missing"]),Dre=new Set(["mean","average","median","q1","q3","min","max"]);function Mb(e){return A1(e)&&(e=Hf(e,void 0)),"bin"+R(e).map(t=>zf(e[t])?ut(`_${t}_${$1(e[t])}`):ut(`_${t}_${e[t]}`)).join("")}function et(e){return e===!0||na(e)&&!e.binned}function an(e){return e==="binned"||na(e)&&e.binned===!0}function na(e){return ne(e)}function zf(e){return e?.param}function PI(e){switch(e){case B1:case U1:case q1:case Rn:case ki:case Ti:case bo:case p1:case xo:case Co:case wn:return 6;case Mo:return 4;default:return 10}}function M4(e){return!!e?.expr}function sr(e){let t=R(e||{}),n={};for(let r of t)n[r]=Rr(e[r]);return n}function wb(e){let b=e,{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:a,color:s,subtitleColor:c,subtitleFont:l,subtitleFontSize:u,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:p,subtitlePadding:h}=b,m=ie(b,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),g=x(x({},m),s?{fill:s}:{}),v=x(x(x(x(x(x({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),o!==void 0?{angle:o}:{}),a!==void 0?{limit:a}:{}),y=x(x(x(x(x(x(x({},c?{subtitleColor:c}:{}),l?{subtitleFont:l}:{}),u?{subtitleFontSize:u}:{}),f?{subtitleFontStyle:f}:{}),d?{subtitleFontWeight:d}:{}),p?{subtitleLineHeight:p}:{}),h?{subtitlePadding:h}:{}),C=Vc(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:C,nonMarkTitleProperties:v,subtitle:y}}function ra(e){return Q(e)||F(e)&&Q(e[0])}function ae(e){return!!e?.signal}function Ii(e){return!!e.step}function zre(e){return F(e)?!1:"fields"in e&&!("data"in e)}function Hre(e){return F(e)?!1:"fields"in e&&"data"in e}function ia(e){return F(e)?!1:"field"in e&&"data"in e}var hVe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Lre=R(hVe),Are={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Sb=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function Eb(e){let t=F(e.condition)?e.condition.map(Vre):Vre(e.condition);return k(x({},Rr(e)),{condition:t})}function Rr(e){if(M4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return e}function Vre(e){if(M4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return e}function tt(e){if(M4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return ae(e)?e:e!==void 0?{value:e}:void 0}function Nre(e){return ae(e)?e.signal:Z(e)}function $I(e){return ae(e)?e.signal:Z(e.value)}function h1(e){return ae(e)?e.signal:e==null?null:Z(e)}function _re(e,t,n){for(let r of n){let i=Eo(r,t.markDef,t.config);i!==void 0&&(e[r]=tt(i))}return e}function BI(e){return[].concat(e.type,e.style??[])}function Be(e,t,n,r={}){let{vgChannel:i,ignoreVgConfig:o}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:Eo(e,t,n,r)}function Eo(e,t,n,{vgChannel:r}={}){return ot(r?ah(e,t,n.style):void 0,ah(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function ah(e,t,n){return UI(e,BI(t),n)}function UI(e,t,n){t=te(t);let r;for(let i of t){let o=n[i];o&&o[e]!==void 0&&(r=o[e])}return r}function Db(e,t){return te(e).reduce((n,r)=>(n.field.push(K(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function jI(e,t){let n=[...e];return t.forEach(r=>{for(let i of n)if(kr(i,r))return;n.push(r)}),n}function qI(e,t){return kr(e,t)||!t?e:e?[...te(e),...te(t)].join(", "):t}function zb(e,t){let n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((ra(n)||ae(n))&&(ra(r)||ae(r)))return{explicit:e.explicit,value:qI(n,r)};if(ra(n)||ae(n))return{explicit:e.explicit,value:n};if(ra(r)||ae(r))return{explicit:e.explicit,value:r};if(!ra(n)&&!ae(n)&&!ra(r)&&!ae(r))return{explicit:e.explicit,value:jI(n,r)};throw new Error("It should never reach here")}var O={};br(O,{ADD_SAME_CHILD_TWICE:()=>FVe,CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN:()=>lNe,CONCAT_CANNOT_SHARE_AXIS:()=>kVe,FACETED_INDEPENDENT_DIFFERENT_SOURCES:()=>DNe,FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES:()=>zNe,FACETED_INDEPENDENT_SAME_SOURCE:()=>HNe,FIT_NON_SINGLE:()=>gVe,INTERVAL_INITIALIZED_WITH_POS:()=>VVe,INVALID_CHANNEL_FOR_AXIS:()=>LNe,LEGEND_BINDINGS_MUST_HAVE_PROJECTION:()=>zVe,LINE_WITH_VARYING_SIZE:()=>ZVe,MORE_THAN_ONE_SORT:()=>ENe,NEEDS_SAME_SELECTION:()=>AVe,NO_FIELDS_NEEDS_AS:()=>OVe,REPLACE_ANGLE_WITH_THETA:()=>BVe,SCALE_BINDINGS_CONTINUOUS:()=>DVe,cannotApplySizeToNonOrientedMark:()=>mNe,cannotLookupVariableParameter:()=>HVe,cannotProjectAggregate:()=>MVe,cannotProjectOnChannelWithoutField:()=>bVe,cannotStackNonLinearScale:()=>VNe,cannotStackRangedMark:()=>ANe,cannotUseRelativeBandSizeWithNonBandScale:()=>fNe,cannotUseScalePropertyWithNonColor:()=>uNe,channelRequiredForBinned:()=>ONe,channelShouldBeDiscrete:()=>nNe,channelShouldBeDiscreteOrDiscretizing:()=>rNe,channelShouldNotBeUsedForBinned:()=>PNe,columnsNotSupportByRowCol:()=>_Ve,containerSizeNonSingle:()=>vVe,containerSizeNotCompatibleWithAutosize:()=>yVe,customFormatTypeNotAllowed:()=>PVe,differentParse:()=>IVe,discreteChannelCannotEncode:()=>oNe,domainRequiredForThresholdScale:()=>$Ne,domainSortDropped:()=>SNe,droppedDay:()=>kNe,droppingColor:()=>XVe,droppingFit:()=>xVe,emptyFieldDef:()=>KVe,errorBand1DNotSupport:()=>RNe,errorBarCenterAndExtentAreNotNeeded:()=>TNe,errorBarCenterIsUsedWithWrongExtent:()=>INe,errorBarContinuousAxisHasCustomizedAggregate:()=>FNe,facetChannelDropped:()=>iNe,incompatibleChannel:()=>JVe,independentScaleMeansIndependentGuide:()=>wNe,invalidAggregate:()=>WVe,invalidEncodingChannel:()=>tNe,invalidFieldType:()=>qVe,invalidFieldTypeForCountAggregate:()=>GVe,invalidSpec:()=>mVe,invalidTimeUnit:()=>_Ne,invalidTransformIgnored:()=>RVe,lineWithRange:()=>sNe,mergeConflictingDomainProperty:()=>MNe,mergeConflictingProperty:()=>bNe,missingFieldType:()=>YVe,nearestNotSupportForContinuous:()=>wVe,noSameUnitLookup:()=>LVe,noSuchRepeatedValue:()=>NVe,offsetEncodingScaleIgnored:()=>eNe,offsetNestedInsideContinuousPositionScaleDropped:()=>UVe,orientOverridden:()=>cNe,primitiveChannelDef:()=>jVe,projectionOverridden:()=>$Ve,rangeMarkAlignmentCannotBeExpression:()=>aNe,relativeBandSizeNotSupported:()=>QVe,scalePropertyNotWorkWithScaleType:()=>yNe,scaleTypeNotWorkWithChannel:()=>gNe,scaleTypeNotWorkWithFieldDef:()=>vNe,scaleTypeNotWorkWithMark:()=>xNe,selectionNotFound:()=>EVe,selectionNotSupported:()=>SVe,stackNonSummativeAggregate:()=>NNe,stepDropped:()=>CNe,unaggregateDomainHasNoEffectForRawField:()=>dNe,unaggregateDomainWithNonSharedDomainOp:()=>pNe,unaggregatedDomainWithLogScale:()=>hNe,unknownField:()=>CVe,unrecognizedParse:()=>TVe});function mVe(e){return`Invalid specification ${ft(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}var gVe='Autosize "fit" only works for single views and layered views.';function vVe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function yVe(e){let t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function xVe(e){return e?`Dropping "fit-${e}" because spec has discrete ${Sn(e)}.`:'Dropping "fit" because spec has discrete size.'}function CVe(e){return`Unknown field for ${e}. Cannot calculate view size.`}function bVe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function MVe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function wVe(e){return`The "nearest" transform is not supported for ${e} marks.`}function SVe(e){return`Selection not supported for ${e} yet.`}function EVe(e){return`Cannot find a selection named "${e}".`}var DVe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",zVe="Legend bindings are only supported for selections over an individual field or encoding channel.";function HVe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function LVe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}var AVe="The same selection must be used to override scale domains in a layered view.",VVe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function NVe(e){return`Unknown repeated value "${e}".`}function _Ve(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}var kVe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function TVe(e){return`Unrecognized parse "${e}".`}function IVe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}var FVe="Attempt to add the same child twice.";function RVe(e){return`Ignoring an invalid transform: ${ft(e)}.`}var OVe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function PVe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function $Ve(e){let{parentProjection:t,projection:n}=e;return`Layer's shared projection ${ft(t)} is overridden by a child projection ${ft(n)}.`}var BVe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function UVe(e){return`${e}Offset dropped because ${e} is continuous`}function jVe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${ft(n)}}.`}function qVe(e){return`Invalid field type "${e}".`}function GVe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function WVe(e){return`Invalid aggregation operator "${e}".`}function YVe(e,t){return`Missing type for channel "${e}", using "${t}" instead.`}function XVe(e,t){let{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function QVe(e){return`Position range does not support relative band size for ${e}.`}function KVe(e,t){return`Dropping ${ft(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}var ZVe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function JVe(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function eNe(e){return`${e} encoding has no scale, so specified scale is ignored.`}function tNe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function nNe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function rNe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function iNe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function oNe(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function aNe(e){return`The ${e} for range marks cannot be an expression`}function sNe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function cNe(e,t){return`Specified orient "${e}" overridden with "${t}".`}var lNe="Custom domain scale cannot be unioned with default field-based domain.";function uNe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function fNe(e){return`Cannot use the relative band size with ${e} scale.`}function dNe(e){return`Using unaggregated domain with raw field has no effect (${ft(e)}).`}function pNe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function hNe(e){return`Unaggregated domain is currently unsupported for log scale (${ft(e)}).`}function mNe(e){return`Cannot apply size to non-oriented mark "${e}".`}function gNe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function vNe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function yNe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function xNe(e,t){return`Scale type "${t}" does not work with mark "${e}".`}function CNe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function bNe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${ft(n)} and ${ft(r)}). Using ${ft(n)}.`}function MNe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${ft(n)} and ${ft(r)}). Using the union of the two domains.`}function wNe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function SNe(e){return`Dropping sort property ${ft(e)} as unioned domains only support boolean or op "count", "min", and "max".`}var ENe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",DNe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",zNe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",HNe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",LNe="Invalid channel for axis.";function ANe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function VNe(e){return`Cannot stack non-linear scale (${e}).`}function NNe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function _Ne(e,t){return`Invalid ${e}: ${ft(t)}.`}function kNe(e){return`Dropping day from datetime ${ft(e)} as day cannot be combined with other units.`}function TNe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function INe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function FNe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function RNe(e){return`1D error band does not support ${e}.`}function ONe(e){return`Channel ${e} is required for "binned" bin.`}function PNe(e){return`Channel ${e} should not be used with "binned" bin.`}function $Ne(e){return`Domain for ${e} is required for threshold scale.`}var BNe,kre=ed(nv),Lf=kre;BNe=new WeakMap;function Tre(e){return Lf=e,Lf}function Ire(){return Lf=kre,Lf}function U(...e){Lf.warn(...e)}function Fre(...e){Lf.debug(...e)}function s2(e){if(e&&ne(e)){for(let t of Hb)if(t in e)return!0}return!1}var Rre=["january","february","march","april","may","june","july","august","september","october","november","december"],UNe=Rre.map(e=>e.substr(0,3)),Ore=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],jNe=Ore.map(e=>e.substr(0,3));function qNe(e){if(oh(e)&&(e=+e),Oe(e))return e>4&&U(O.invalidTimeUnit("quarter",e)),e-1;throw new Error(O.invalidTimeUnit("quarter",e))}function GNe(e){if(oh(e)&&(e=+e),Oe(e))return e-1;{let t=e.toLowerCase(),n=Rre.indexOf(t);if(n!==-1)return n;let r=t.substr(0,3),i=UNe.indexOf(r);if(i!==-1)return i;throw new Error(O.invalidTimeUnit("month",e))}}function WNe(e){if(oh(e)&&(e=+e),Oe(e))return e%7;{let t=e.toLowerCase(),n=Ore.indexOf(t);if(n!==-1)return n;let r=t.substr(0,3),i=jNe.indexOf(r);if(i!==-1)return i;throw new Error(O.invalidTimeUnit("day",e))}}function GI(e,t){let n=[];if(t&&e.day!==void 0&&R(e).length>1&&(U(O.droppedDay(e)),e=le(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){let r=t?GNe(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){let r=t?qNe(e.quarter):e.quarter;n.push(Oe(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){let r=t?WNe(e.day):e.day;n.push(Oe(r)?r+1:`${r}+1`)}else n.push(1);for(let r of["hours","minutes","seconds","milliseconds"]){let i=e[r];n.push(typeof i>"u"?0:i)}return n}function oa(e){let n=GI(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Pre(e){let n=GI(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function $re(e){let t=GI(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}var Bre={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Hb=R(Bre);function Ure(e){return!!Bre[e]}var YNe={binnedyear:1,binnedyearquarter:1,binnedyearquartermonth:1,binnedyearmonth:1,binnedyearmonthdate:1,binnedyearmonthdatehours:1,binnedyearmonthdatehoursminutes:1,binnedyearmonthdatehoursminutesseconds:1,binnedyearweek:1,binnedyearweekday:1,binnedyearweekdayhours:1,binnedyearweekdayhoursminutes:1,binnedyearweekdayhoursminutesseconds:1,binnedyeardayofyear:1},XNe={binnedutcyear:1,binnedutcyearquarter:1,binnedutcyearquartermonth:1,binnedutcyearmonth:1,binnedutcyearmonthdate:1,binnedutcyearmonthdatehours:1,binnedutcyearmonthdatehoursminutes:1,binnedutcyearmonthdatehoursminutesseconds:1,binnedutcyearweek:1,binnedutcyearweekday:1,binnedutcyearweekdayhours:1,binnedutcyearweekdayhoursminutes:1,binnedutcyearweekdayhoursminutesseconds:1,binnedutcyeardayofyear:1},uft=x(x({},YNe),XNe);function aa(e){return ne(e)?e.binned:jre(e)}function jre(e){return e&&e.startsWith("binned")}function WI(e){return e.startsWith("utc")}function QNe(e){return e.substring(3)}var KNe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Af(e){return Hb.filter(t=>qre(e,t))}function YI(e){let t=Af(e);return t[t.length-1]}function qre(e,t){let n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Gre(e,t,{end:n}={end:!1}){let r=rh(t),i=WI(e)?"utc":"";function o(c){return c==="quarter"?`(${i}quarter(${r})-1)`:`${i}${c}(${r})`}let a,s={};for(let c of Hb)qre(e,c)&&(s[c]=o(c),a=c);return n&&(s[a]+="+1"),Pre(s)}function XI(e){if(!e)return;let t=Af(e);return`timeUnitSpecifier(${ft(t)}, ${ft(KNe)})`}function Wre(e,t,n){if(!e)return;let r=XI(e);return`${n||WI(e)?"utc":"time"}Format(${t}, ${r})`}function sn(e){if(!e)return;let t;return Q(e)?jre(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ne(e)&&(t=x(x({},e),e.unit?{unit:e.unit}:{})),WI(t.unit)&&(t.utc=!0,t.unit=QNe(t.unit)),t}function Yre(e){let r=sn(e),{utc:t}=r,n=ie(r,["utc"]);return n.unit?(t?"utc":"")+R(n).map(i=>ut(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+R(n).map(i=>ut(`_${i}_${n[i]}`)).join("")}function Lb(e,t=n=>n){let n=sn(e),r=YI(n.unit);if(r&&r!=="day"){let i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:a}=QI(r,n.step),s=k(x({},i),{[a]:+i[a]+o});return`${t(oa(s))} - ${t(oa(i))}`}}var ZNe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function JNe(e){return!!ZNe[e]}function QI(e,t=1){if(JNe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Xre(e){return e?.param}function Ab(e){return!!e?.field&&e.equal!==void 0}function Vb(e){return!!e?.field&&e.lt!==void 0}function Nb(e){return!!e?.field&&e.lte!==void 0}function _b(e){return!!e?.field&&e.gt!==void 0}function kb(e){return!!e?.field&&e.gte!==void 0}function Tb(e){if(e?.field){if(F(e.range)&&e.range.length===2)return!0;if(ae(e.range))return!0}return!1}function Ib(e){return!!e?.field&&(F(e.oneOf)||F(e.in))}function e_e(e){return!!e?.field&&e.valid!==void 0}function KI(e){return Ib(e)||Ab(e)||Tb(e)||Vb(e)||_b(e)||Nb(e)||kb(e)}function fs(e,t){return w0(e,{timeUnit:t,wrapTime:!0})}function t_e(e,t){return e.map(n=>fs(n,t))}function Fb(e,t=!0){let{field:n}=e,r=sn(e.timeUnit),{unit:i,binned:o}=r||{},a=K(e,{expr:"datum"}),s=i?`time(${o?a:Gre(i,n)})`:a;if(Ab(e))return`${s}===${fs(e.equal,i)}`;if(Vb(e)){let c=e.lt;return`${s}<${fs(c,i)}`}else if(_b(e)){let c=e.gt;return`${s}>${fs(c,i)}`}else if(Nb(e)){let c=e.lte;return`${s}<=${fs(c,i)}`}else if(kb(e)){let c=e.gte;return`${s}>=${fs(c,i)}`}else{if(Ib(e))return`indexof([${t_e(e.oneOf,i).join(",")}], ${s}) !== -1`;if(e_e(e))return sh(s,e.valid);if(Tb(e)){let{range:c}=e,l=ae(c)?{signal:`${c.signal}[0]`}:c[0],u=ae(c)?{signal:`${c.signal}[1]`}:c[1];if(l!==null&&u!==null&&t)return"inrange("+s+", ["+fs(l,i)+", "+fs(u,i)+"])";let f=[];return l!==null&&f.push(`${s} >= ${fs(l,i)}`),u!==null&&f.push(`${s} <= ${fs(u,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${ft(e)}`)}function sh(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Qre(e){return KI(e)&&e.timeUnit?k(x({},e),{timeUnit:sn(e.timeUnit)}):e}var Vf={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Kre(e){return e==="quantitative"||e==="temporal"}function Rb(e){return e==="ordinal"||e==="nominal"}var c2=Vf.quantitative,ch=Vf.ordinal,ds=Vf.temporal,lh=Vf.nominal,sa=Vf.geojson,bft=R(Vf);function Zre(e){if(e)switch(e=e.toLowerCase(),e){case"q":case c2:return"quantitative";case"t":case ds:return"temporal";case"o":case ch:return"ordinal";case"n":case lh:return"nominal";case sa:return"geojson"}}var Or={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},uh={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},Hft=R(uh);function eie(e,t){let n=uh[e],r=uh[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}var n_e={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function ZI(e){return n_e[e]}var tie=new Set(["linear","log","pow","sqrt","symlog"]),nie=new Set([...tie,"time","utc"]);function JI(e){return tie.has(e)}var rie=new Set(["quantile","quantize","threshold"]),r_e=new Set([...nie,...rie,"sequential","identity"]),i_e=new Set(["ordinal","bin-ordinal","point","band"]);function Pt(e){return i_e.has(e)}function On(e){return r_e.has(e)}function G1(e){return nie.has(e)}function Tc(e){return rie.has(e)}var iie={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function oie(e){return!Q(e)&&!!e.name}function eF(e){return e?.param}function aie(e){return e?.unionWith}function sie(e){return ne(e)&&"field"in e}var cie={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},Lft=R(cie),Jre=cie,{type:Aft,domain:Vft,range:Nft,rangeMax:_ft,rangeMin:kft,scheme:Tft}=Jre,o_e=ie(Jre,["type","domain","range","rangeMax","rangeMin","scheme"]),lie=R(o_e);function fh(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return G1(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return G1(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return G1(e);case"nice":return G1(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return On(e)&&!Ae(["log","time","utc","threshold","quantile"],e)}}function Ob(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return _c(e)?void 0:O.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function uie(e,t){return Ae([ch,lh],t)?e===void 0||Pt(e):t===ds?Ae([Or.TIME,Or.UTC,void 0],e):t===c2?JI(e)||Tc(e)||e===void 0:!0}function fie(e,t,n=!1){if(!Fr(e))return!1;switch(e){case yt:case on:case i2:case us:case ii:case Ni:return G1(t)||t==="band"?!0:t==="point"?!n:!1;case q1:case bo:case p1:case xo:case Co:case ta:return G1(t)||Tc(t)||Ae(["band","point","ordinal"],t);case Rn:case ki:case Ti:return t!=="band";case Mo:case wn:return t==="ordinal"||Tc(t)}}var m1={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},tF=m1.arc,S0=m1.area,E0=m1.bar,die=m1.image,D0=m1.line,Nf=m1.point,pie=m1.rect,_f=m1.rule,Pb=m1.text,dh=m1.tick,hie=m1.trail,ph=m1.circle,hh=m1.square,$b=m1.geoshape;function Fi(e){return["line","area","trail"].includes(e)}function Ic(e){return["rect","bar","image","arc"].includes(e)}var mie=new Set(R(m1));function ci(e){return e.type}var a_e=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],s_e=["fill","fillOpacity"],gie=[...a_e,...s_e],c_e={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},nF=R(c_e),vie={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},yie={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},l_e={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Bb=R(l_e);function ps(e){return e&&e.band!=null}var xie={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Cie=5,bie={binSpacing:1,continuousBandSize:Cie,minBandSize:.25,timeUnitBandPosition:.5},Mie={binSpacing:0,continuousBandSize:Cie,minBandSize:.25,timeUnitBandPosition:.5},wie={thickness:1};function Sie(e){return ci(e)?e.type:e}function Tf(e){let{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,a=gh(e);return Y(n)&&!bb(n.aggregate)&&i&&G1(i.get("type"))?f_e({fieldDef:n,channel:t,markDef:r,ref:a,config:o}):a}function f_e({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Fi(n.type)?r:Be("invalid",n,i)===null?[d_e(e,t),r]:r}function d_e(e,t){let n=mh(e,!0),i=wo(t)==="y"?{field:{group:"height"}}:{value:0};return x({test:n},i)}function mh(e,t=!0){return sh(Q(e)?e:K(e,{expr:"datum"}),!t)}function Eie(e){let{datum:t}=e;return s2(t)?oa(t):`${ft(t)}`}function hs(e,t,n,r){let i={};if(t&&(i.scale=t),Ri(e)){let{datum:o}=e;s2(o)?i.signal=oa(o):ae(o)?i.signal=o.signal:M4(o)?i.signal=o.expr:i.value=o}else i.field=K(e,n);if(r){let{offset:o,band:a}=r;o&&(i.offset=o),a&&(i.band=a)}return i}function kf({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:a=.5}){let s=!ae(a)&&0<a&&a<1?"datum":void 0,c=K(t,{expr:s,suffix:i}),l=n!==void 0?K(n,{expr:s}):K(t,{suffix:o,expr:s}),u={};if(a===0||a===1){u.scale=e;let f=a===0?c:l;u.field=f}else{let f=ae(a)?`(1-${a.signal}) * ${c} + ${a.signal} * ${l}`:`${1-a} * ${c} + ${a} * ${l}`;u.signal=`scale("${e}", ${f})`}return r&&(u.offset=r),u}function Die({scaleName:e,fieldDef:t}){let n=K(t,{expr:"datum"}),r=K(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function gh({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:c,defaultRef:l,bandPosition:u}){if(t){if(ke(t)){let f=a?.get("type");if(En(t)){u??(u=W1({fieldDef:t,fieldDef2:n,markDef:r,config:i}));let{bin:d,timeUnit:p,type:h}=t;if(et(d)||u&&p&&h===ds)return s?.impute?hs(t,o,{binSuffix:"mid"},{offset:c}):u&&!Pt(f)?kf({scaleName:o,fieldOrDatumDef:t,bandPosition:u,offset:c}):hs(t,o,ms(t,e)?{binSuffix:"range"}:{},{offset:c});if(an(d)){if(Y(n))return kf({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:u,offset:c});{let m=e===yt?j1:yo;U(O.channelRequiredForBinned(m))}}}return hs(t,o,Pt(f)?{binSuffix:"range"}:{},{offset:c,band:f==="band"?u??t.bandPosition??.5:void 0})}else if(cr(t)){let f=t.value,d=c?{offset:c}:{};return x(x({},z0(e,f)),d)}}return Ie(l)&&(l=l()),l&&x(x({},l),c?{offset:c}:{})}function z0(e,t){return Ae(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ae(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:tt(t)}function gs(e){return e&&e!=="number"&&e!=="time"}function Hie(e,t,n){return`${e}(${t}${n?`, ${ft(n)}`:""})`}var p_e=" \u2013 ";function If({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){if(gs(n))return Do({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});let a=Lie(e,r,i),s=Fc(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(s==="quantitative"){if(i&&o.normalizedNumberFormatType)return Do({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return Do({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(s==="temporal"&&o.timeFormatType&&Y(e)&&e.timeUnit===void 0)return Do({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(Oc(e)){let c=m_e({field:a,timeUnit:Y(e)?sn(e.timeUnit)?.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:l2(e)&&e.scale?.type===Or.UTC});return c?{signal:c}:void 0}if(t=rF({type:s,specifiedFormat:t,config:o,normalizeStack:i}),Y(e)&&et(e.bin)){let c=K(e,{expr:r,binSuffix:"end"});return{signal:H0(a,c,t,n,o)}}else return t||Fc(e)==="quantitative"?{signal:`${Aie(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function Lie(e,t,n){return Y(e)?n?`${K(e,{expr:t,suffix:"end"})}-${K(e,{expr:t,suffix:"start"})}`:K(e,{expr:t}):Eie(e)}function Do({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a??(a=Lie(e,r,i)),a!=="datum.value"&&Y(e)&&et(e.bin)){let s=K(e,{expr:r,binSuffix:"end"});return{signal:H0(a,s,t,n,o)}}return{signal:Hie(n,a,t)}}function jb(e,t,n,r,i,o){if(!(Q(r)&&gs(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Fc(e)==="quantitative"&&(i.normalizedNumberFormatType&&Rc(e)&&e.stack==="normalize"||i.numberFormatType))){if(Rc(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return rF({type:"quantitative",config:i,normalizeStack:!0});if(Oc(e)){let a=Y(e)?sn(e.timeUnit)?.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:h_e({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return rF({type:t,specifiedFormat:n,config:i})}}function qb(e,t,n){if(e&&(ae(e)||e==="number"||e==="time"))return e;if(Oc(t)&&n!=="time"&&n!=="utc")return Y(t)&&sn(t?.timeUnit)?.utc?"utc":"time"}function rF({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Q(t))return t;if(e===c2)return r?n.normalizedNumberFormat:n.numberFormat}function h_e({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:XI(t)}:r?void 0:n.timeFormat)}function Aie(e,t){return`format(${e}, "${t||""}")`}function zie(e,t,n,r){return gs(n)?Hie(n,e,t):Aie(e,(Q(t)?t:void 0)??r.numberFormat)}function H0(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return H0(e,t,i.numberFormat,i.numberFormatType,i);let o=zie(e,n,r,i),a=zie(t,n,r,i);return`${sh(e,!1)} ? "null" : ${o} + "${p_e}" + ${a}`}function m_e({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Q(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):Wre(t,e,o)}var w4="min",g_e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function iF(e){return e in g_e}function Gb(e){return!!e?.encoding}function Pr(e){return e&&(e.op==="count"||!!e.field)}function Wb(e){return e&&F(e)}function vs(e){return"row"in e||"column"in e}function Yb(e){return!!e&&"header"in e}function Pc(e){return"facet"in e}function Vie(e){return e.param}function Nie(e){return e&&!Q(e)&&"repeat"in e}function oF(e){let{field:t,timeUnit:n,bin:r,aggregate:i}=e;return k(x(x(x({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:t})}function Qb(e){return"sort"in e}function W1({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(ke(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Y(e)){let{timeUnit:i,bin:o}=e;if(i&&!t)return Eo("timeUnitBandPosition",n,r);if(et(o))return .5}}function aF({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){let s=Sn(e),c=Be(a?"size":s,r,i,{vgChannel:s});if(c!==void 0)return c;if(Y(t)){let{timeUnit:l,bin:u}=t;if(l&&!n)return{band:Eo("timeUnitBandSize",r,i)};if(et(u)&&!Pt(o))return{band:1}}if(Ic(r.type))return o?Pt(o)?i[r.type]?.discreteBandSize||{band:1}:i[r.type]?.continuousBandSize:i[r.type]?.discreteBandSize}function Kb(e,t,n,r){return et(e.bin)||e.timeUnit&&En(e)&&e.type==="temporal"?W1({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Zb(e){return e&&!!e.sort&&!e.field}function S4(e){return e&&"condition"in e}function Rf(e){let t=e?.condition;return!!t&&!F(t)&&Y(t)}function E4(e){let t=e?.condition;return!!t&&!F(t)&&ke(t)}function _ie(e){let t=e?.condition;return!!t&&(F(t)||cr(t))}function Y(e){return e&&(!!e.field||e.aggregate==="count")}function Fc(e){return e?.type}function Ri(e){return e&&"datum"in e}function ca(e){return En(e)&&!vh(e)||yh(e)}function sF(e){return En(e)&&e.type==="quantitative"&&!e.bin||yh(e)}function yh(e){return Ri(e)&&Oe(e.datum)}function ke(e){return Y(e)||Ri(e)}function En(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function cr(e){return e&&"value"in e&&"value"in e}function l2(e){return e&&("scale"in e||"sort"in e)}function Rc(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function kie(e){return e&&"legend"in e}function Tie(e){return e&&("format"in e||"formatType"in e)}function Iie(e){return Fn(e,["legend","axis","header","scale"])}function v_e(e){return"op"in e}function K(e,t={}){let n=e.field,r=t.prefix,i=t.suffix,o="";if(x_e(e))n=VI("count");else{let a;if(!t.nofn)if(v_e(e))a=e.op;else{let{bin:s,aggregate:c,timeUnit:l}=e;et(s)?(a=Mb(s),i=(t.binSuffix??"")+(t.suffix??"")):c?a2(c)?(o=`["${n}"]`,n=`argmax_${c.argmax}`):So(c)?(o=`["${n}"]`,n=`argmin_${c.argmin}`):a=String(c):l&&!aa(l)&&(a=Yre(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}a&&(n=n?`${a}_${n}`:a)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?ih(n):t.expr?LI(n,t.expr)+o:ar(n)+o}function vh(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Y(e)&&!!e.bin;case"temporal":return!1}throw new Error(O.invalidFieldType(e.type))}function y_e(e){return l2(e)&&Tc(e.scale?.type)}function x_e(e){return e.aggregate==="count"}function C_e(e,t){let{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(et(r))return`${n} (binned)`;if(i&&!aa(i)){let a=sn(i)?.unit;if(a)return`${n} (${Af(a).join("-")})`}else if(o)return a2(o)?`${n} for max ${o.argmax}`:So(o)?`${n} for min ${o.argmin}`:`${v4(o)} of ${n}`;return n}function b_e(e){let{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(a2(t))return`${i} for argmax(${t.argmax})`;if(So(t))return`${i} for argmin(${t.argmin})`;let o=r&&!aa(r)?sn(r):void 0,a=t||o?.unit||o?.maxbins&&"timeunit"||et(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}var Fie=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return b_e(e);default:return C_e(e,t)}},Rie=Fie;function cF(e){Rie=e}function Oie(){cF(Fie)}function ys(e,t,{allowDisabling:n,includeDefault:r=!0}){let i=Jb(e)?.title;if(!Y(e))return i??e.title;let o=e,a=r?xh(o,t):void 0;return n?ot(i,o.title,a):i??o.title??a}function Jb(e){if(Rc(e)&&e.axis)return e.axis;if(kie(e)&&e.legend)return e.legend;if(Yb(e)&&e.header)return e.header}function xh(e,t){return Rie(e,t)}function Of(e){if(Tie(e)){let{format:t,formatType:n}=e;return{format:t,formatType:n}}else{let t=Jb(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function M_e(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Qb(e)&&F(e.sort))return"ordinal";let{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!a2(n)&&!So(n))return"quantitative";if(l2(e)&&e.scale?.type)switch(uh[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function li(e){if(Y(e))return e;if(Rf(e))return e.condition}function It(e){if(ke(e))return e;if(E4(e))return e.condition}function lF(e,t,n,r={}){if(Q(e)||Oe(e)||A1(e)){let i=Q(e)?"string":Oe(e)?"number":"boolean";return U(O.primitiveChannelDef(t,i,e)),{value:e}}return ke(e)?Xb(e,t,n,r):E4(e)?k(x({},e),{condition:Xb(e.condition,t,n,r)}):e}function Xb(e,t,n,r){if(Tie(e)){let i=e,{format:a,formatType:s}=i,c=ie(i,["format","formatType"]);if(gs(s)&&!n.customFormatTypes)return U(O.customFormatTypeNotAllowed(t)),Xb(c,t,n,r)}else{let a=Rc(e)?"axis":kie(e)?"legend":Yb(e)?"header":null;if(a&&e[a]){let o=e[a],{format:s,formatType:c}=o,l=ie(o,["format","formatType"]);if(gs(c)&&!n.customFormatTypes)return U(O.customFormatTypeNotAllowed(t)),Xb(k(x({},e),{[a]:l}),t,n,r)}}return Y(e)?Ch(e,t,r):w_e(e)}function w_e(e){let t=e.type;if(t)return e;let{datum:n}=e;return t=Oe(n)?"quantitative":Q(n)?"nominal":s2(n)?"temporal":void 0,k(x({},e),{type:t})}function Ch(e,t,{compositeMark:n=!1}={}){let{aggregate:r,timeUnit:i,bin:o,field:a}=e,s=x({},e);if(!n&&r&&!Df(r)&&!a2(r)&&!So(r)&&(U(O.invalidAggregate(r)),delete s.aggregate),i&&(s.timeUnit=sn(i)),a&&(s.field=`${a}`),et(o)&&(s.bin=Hf(o,t)),an(o)&&!xt(t)&&U(O.channelShouldNotBeUsedForBinned(t)),En(s)){let{type:l}=s,u=Zre(l);l!==u&&(s.type=u),l!=="quantitative"&&bb(r)&&(U(O.invalidFieldTypeForCountAggregate(l,r)),s.type="quantitative")}else if(!yb(t)){let l=M_e(s,t);s.type=l}if(En(s)){let{compatible:l,warning:u}=S_e(s,t)||{};l===!1&&U(u)}if(Qb(s)&&Q(s.sort)){let{sort:l}=s;if(iF(l))return k(x({},s),{sort:{encoding:l}});let u=l.substr(1);if(l.charAt(0)==="-"&&iF(u))return k(x({},s),{sort:{encoding:u,order:"descending"}})}if(Yb(s)){let{header:l}=s;if(l){let c=l,{orient:u}=c,f=ie(c,["orient"]);if(u)return k(x({},s),{header:k(x({},f),{labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u})})}}return s}function Hf(e,t){return A1(e)?{maxbins:PI(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?k(x({},e),{maxbins:PI(t)}):e}var Ff={compatible:!0};function S_e(e,t){let n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case B1:case U1:case Cf:return vh(e)?Ff:{compatible:!1,warning:O.channelShouldBeDiscrete(t)};case yt:case on:case i2:case us:case Rn:case ki:case Ti:case b0:case M0:case bf:case Nc:case Mf:case wf:case ta:case ii:case Ni:case Sf:return Ff;case ai:case si:case oi:case _i:return n!==c2?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Ff;case p1:case xo:case Co:case bo:case q1:case ea:case J2:case j1:case yo:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Ff;case wn:case Mo:return!vh(e)&&!y_e(e)?{compatible:!1,warning:O.channelShouldBeDiscreteOrDiscretizing(t)}:Ff;case x4:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Ff}}function Oc(e){let{formatType:t}=Of(e);return t==="time"||!t&&E_e(e)}function E_e(e){return e&&(e.type==="temporal"||Y(e)&&!!e.timeUnit)}function w0(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){let o=t&&sn(t)?.unit,a=o||n==="temporal",s;return M4(e)?s=e.expr:ae(e)?s=e.signal:s2(e)?(a=!0,s=oa(e)):(Q(e)||Oe(e))&&a&&(s=`datetime(${ft(e)})`,Ure(o)&&(Oe(e)&&e<1e4||Q(e)&&isNaN(Date.parse(e)))&&(s=oa({[o]:e}))),s?r&&a?`time(${s})`:s:i?void 0:ft(e)}function eM(e,t){let{type:n}=e;return t.map(r=>{let i=Y(e)&&!aa(e.timeUnit)?e.timeUnit:void 0,o=w0(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function ms(e,t){return et(e.bin)?Fr(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}var uF={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function $c(e){return e?.condition}var tM=["domain","grid","labels","ticks","title"],Pie={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},fF={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},$ie=k(x({},fF),{style:1,labelExpr:1,encoding:1});function dF(e){return!!$ie[e]}var N8t=R($ie),z_e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},pF=R(z_e);function Cr(e){return"mark"in e}var xs=class{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Cr(t)?Sie(t.mark)===this.name:!1}};function Cs(e,t){let n=e&&e[t];return n?F(n)?ls(n,r=>!!r.field):Y(n)||Rf(n):!1}function hF(e,t){let n=e&&e[t];return n?F(n)?ls(n,r=>!!r.field):Y(n)||Ri(n)||E4(n):!1}function nM(e,t){if(xt(t)){let n=e[t];if((Y(n)||Ri(n))&&(Rb(n.type)||Y(n)&&n.timeUnit)){let r=Ef(t);return hF(e,r)}}return!1}function Pf(e){return ls(sre,t=>{if(Cs(e,t)){let n=e[t];if(F(n))return ls(n,r=>!!r.aggregate);{let r=li(n);return r&&!!r.aggregate}}return!1})}function rM(e,t){let n=[],r=[],i=[],o=[],a={};return bh(e,(s,c)=>{if(Y(s)){let l=s,{field:u,aggregate:f,bin:d,timeUnit:p}=l,h=ie(l,["field","aggregate","bin","timeUnit"]);if(f||p||d){let g=Jb(s)?.title,v=K(s,{forAs:!0}),y=k(x(x({},g?[]:{title:ys(s,t,{allowDisabling:!0})}),h),{field:v});if(f){let C;if(a2(f)?(C="argmax",v=K({op:"argmax",field:f.argmax},{forAs:!0}),y.field=`${v}.${u}`):So(f)?(C="argmin",v=K({op:"argmin",field:f.argmin},{forAs:!0}),y.field=`${v}.${u}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(C=f),C){let b={op:C,as:v};u&&(b.field=u),o.push(b)}}else if(n.push(v),En(s)&&et(d)){if(r.push({bin:d,field:u,as:v}),n.push(K(s,{binSuffix:"end"})),ms(s,c)&&n.push(K(s,{binSuffix:"range"})),xt(c)){let C={field:`${v}_end`};a[`${c}2`]=C}y.bin="binned",yb(c)||(y.type=c2)}else if(p&&!aa(p)){i.push({timeUnit:p,field:u,as:v});let C=En(s)&&s.type!==ds&&"time";C&&(c===b0||c===Nc?y.formatType=C:yre(c)?y.legend=x({formatType:C},y.legend):xt(c)&&(y.axis=x({formatType:C},y.axis)))}a[c]=y}else n.push(u),a[c]=e[c]}else a[c]=e[c]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function H_e(e,t,n){let r=bre(t,n);if(r){if(r==="binned"){let i=e[t===j1?yt:on];return!!(Y(i)&&Y(e[t])&&an(i.bin))}}else return!1;return!0}function Bie(e,t,n,r){let i={};for(let o of R(e))vb(o)||U(O.invalidEncodingChannel(o));for(let o of pre){if(!e[o])continue;let a=e[o];if(kc(o)){let s=dre(o),c=i[s];if(Y(c)&&Kre(c.type)&&Y(a)&&!c.timeUnit){U(O.offsetNestedInsideContinuousPositionScaleDropped(s));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(U(O.REPLACE_ANGLE_WITH_THETA),o=ii),!H_e(e,o,t)){U(O.incompatibleChannel(o,t));continue}if(o===q1&&t==="line"&&li(e[o])?.aggregate){U(O.LINE_WITH_VARYING_SIZE);continue}if(o===Rn&&(n?"fill"in e:"stroke"in e)){U(O.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===M0||o===x4&&!F(a)&&!cr(a)||o===Nc&&F(a)){if(a){if(o===x4){let s=e[o];if(Zb(s)){i[o]=s;continue}}i[o]=te(a).reduce((s,c)=>(Y(c)?s.push(Ch(c,o)):U(O.emptyFieldDef(c,o)),s),[])}}else{if(o===Nc&&a===null)i[o]=null;else if(!Y(a)&&!Ri(a)&&!cr(a)&&!S4(a)&&!ae(a)){U(O.emptyFieldDef(a,o));continue}i[o]=lF(a,o,r)}}return i}function D4(e,t){let n={};for(let r of R(e)){let i=lF(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Uie(e){let t=[];for(let n of R(e))if(Cs(e,n)){let r=e[n],i=te(r);for(let o of i)Y(o)?t.push(o):Rf(o)&&t.push(o.condition)}return t}function bh(e,t,n){if(e)for(let r of R(e)){let i=e[r];if(F(i))for(let o of i)t.call(n,o,r);else t.call(n,i,r)}}function jie(e,t,n,r){return e?R(e).reduce((i,o)=>{let a=e[o];return F(a)?a.reduce((s,c)=>t.call(r,s,c,o),i):t.call(r,i,a,o)},n):n}function iM(e,t){return R(t).reduce((n,r)=>{switch(r){case yt:case on:case Mf:case Sf:case wf:case j1:case yo:case i2:case us:case ii:case ea:case Ni:case J2:case oi:case ai:case _i:case si:case b0:case wn:case ta:case Nc:return n;case x4:if(e==="line"||e==="trail")return n;case M0:case bf:{let i=t[r];if(F(i)||Y(i))for(let o of te(i))o.aggregate||n.push(K(o,{}));return n}case q1:if(e==="trail")return n;case Rn:case ki:case Ti:case p1:case xo:case Co:case Mo:case bo:{let i=li(t[r]);return i&&!i.aggregate&&n.push(K(i,{})),n}}},[])}function qie(e){let o=e,{tooltip:t}=o,n=ie(o,["tooltip"]);if(!t)return{filteredEncoding:n};let r,i;if(F(t)){for(let a of t)a.aggregate?(r||(r=[]),r.push(a)):(i||(i=[]),i.push(a));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return F(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function Mh(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};let i=e.map(({fieldPrefix:a,titlePrefix:s})=>{let c=r?` of ${aM(t)}`:"";return{field:a+t.field,type:t.type,title:ae(s)?{signal:`${s}"${escape(c)}"`}:s+c}}),o=Uie(n).map(Iie);return{tooltip:[...i,...Vi(o,Ce)]}}function aM(e){let{title:t,field:n}=e;return ot(t,n)}function $f(e,t,n,r,i){let{scale:o,axis:a}=n;return({partName:s,mark:c,positionPrefix:l,endPositionPrefix:u=void 0,extraEncoding:f={}})=>{let d=aM(n);return mF(e,s,i,{mark:c,encoding:x(x(x({[t]:x(x(x({field:`${l}_${n.field}`,type:n.type},d!==void 0?{title:d}:{}),o!==void 0?{scale:o}:{}),a!==void 0?{axis:a}:{})},Q(u)?{[`${t}2`]:{field:`${u}_${n.field}`}}:{}),r),f)})}}function mF(e,t,n,r){let{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||e[t]===void 0&&n[t]?[k(x({},r),{mark:x(k(x(x(x(x(x({},n[t]),i?{clip:i}:{}),o?{color:o}:{}),a?{opacity:a}:{}),ci(r.mark)?r.mark:{type:r.mark}),{style:`${s}-${String(t)}`}),A1(e[t])?{}:e[t])})]:[]}function sM(e,t,n){let{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],c=r[`${i}Error2`];return{continuousAxisChannelDef:oM(o,n),continuousAxisChannelDef2:oM(a,n),continuousAxisChannelDefError:oM(s,n),continuousAxisChannelDefError2:oM(c,n),continuousAxis:i}}function oM(e,t){if(e?.aggregate){let n=e,{aggregate:r}=n,i=ie(n,["aggregate"]);return r!==t&&U(O.errorBarContinuousAxisHasCustomizedAggregate(r,t)),i}else return e}function cM(e,t){let{mark:n,encoding:r}=e,{x:i,y:o}=r;if(ci(n)&&n.orient)return n.orient;if(ca(i)){if(ca(o)){let a=Y(i)&&i.aggregate,s=Y(o)&&o.aggregate;if(!a&&s===t)return"vertical";if(!s&&a===t)return"horizontal";if(a===t&&s===t)throw new Error("Both x and y cannot have aggregate");return Oc(o)&&!Oc(i)?"horizontal":"vertical"}return"horizontal"}else{if(ca(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}var wh="boxplot",Gie=["box","median","outliers","rule","ticks"],Wie=new xs(wh,gF);function Yie(e){return Oe(e)?"tukey":e}function gF(e,{config:t}){e=k(x({},e),{encoding:D4(e.encoding,t)});let di=e,{mark:n,encoding:r,params:i,projection:o}=di,a=ie(di,["mark","encoding","params","projection"]),s=ci(n)?n:{type:n};i&&U(O.selectionNotSupported("boxplot"));let c=s.extent??t.boxplot.extent,l=Be("size",s,t),u=s.invalid,f=Yie(c),{bins:d,timeUnits:p,transform:h,continuousAxisChannelDef:m,continuousAxis:g,groupby:v,aggregate:y,encodingWithoutContinuousAxis:C,ticksOrient:b,boxOrient:M,customTooltipWithoutAggregatedField:S}=A_e(e,c,t),ya=C,{color:w,size:E}=ya,D=ie(ya,["color","size"]),L=Kae=>$f(s,g,m,Kae,t.boxplot),A=L(D),j=L(C),V=L(x(x({},D),E?{size:E}:{})),_=Mh([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,C),N={type:"tick",color:"black",opacity:1,orient:b,invalid:u,aria:!1},I=f==="min-max"?_:Mh([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,C),G=[...A({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:I}),...A({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:I}),...A({partName:"ticks",mark:N,positionPrefix:"lower_whisker",extraEncoding:I}),...A({partName:"ticks",mark:N,positionPrefix:"upper_whisker",extraEncoding:I})],X=[...f!=="tukey"?G:[],...j({partName:"box",mark:k(x({type:"bar"},l?{size:l}:{}),{orient:M,invalid:u,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:_}),...V({partName:"median",mark:k(x(x({type:"tick",invalid:u},ne(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),l?{size:l}:{}),{orient:b,aria:!1}),positionPrefix:"mid_box",extraEncoding:_})];if(f==="min-max")return k(x({},a),{transform:(a.transform??[]).concat(h),layer:X});let J=`datum["lower_box_${m.field}"]`,we=`datum["upper_box_${m.field}"]`,Se=`(${we} - ${J})`,Xe=`${J} - ${c} * ${Se}`,Dt=`${we} + ${c} * ${Se}`,st=`datum["${m.field}"]`,en={joinaggregate:Xie(m.field),groupby:v},Hs={transform:[{filter:`(${Xe} <= ${st}) && (${st} <= ${Dt})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...y],groupby:v}],layer:G},N8=D,{tooltip:W0}=N8,F4=ie(N8,["tooltip"]),{scale:me,axis:Qe}=m,nt=aM(m),oe=Fn(Qe,["title"]),jr=mF(s,"outliers",t.boxplot,{transform:[{filter:`(${st} < ${Xe}) || (${st} > ${Dt})`}],mark:"point",encoding:x(x(x({[g]:x(x(x({field:m.field,type:m.type},nt!==void 0?{title:nt}:{}),me!==void 0?{scale:me}:{}),We(oe)?{}:{axis:oe})},F4),w?{color:w}:{}),S?{tooltip:S}:{})})[0],At,fi=[...d,...p,en];return jr?At={transform:fi,layer:[jr,Hs]}:(At=Hs,At.transform.unshift(...fi)),k(x({},a),{layer:[At,{transform:h,layer:X}]})}function Xie(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function A_e(e,t,n){let r=cM(e,wh),{continuousAxisChannelDef:i,continuousAxis:o}=sM(e,r,wh),a=i.field,s=Yie(t),c=[...Xie(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:(s==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(s==="min-max"?"upper_whisker_":"max_")+a}],l=s==="min-max"||s==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],S=e.encoding,{[o]:u}=S,f=ie(S,[R4(o)]),{customTooltipWithoutAggregatedField:d,filteredEncoding:p}=qie(f),{bins:h,timeUnits:m,aggregate:g,groupby:v,encoding:y}=rM(p,n),C=r==="vertical"?"horizontal":"vertical",b=r,M=[...h,...m,{aggregate:[...g,...c],groupby:v},...l];return{bins:h,timeUnits:m,transform:M,groupby:v,aggregate:g,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:y,ticksOrient:C,boxOrient:b,customTooltipWithoutAggregatedField:d}}var lM="errorbar",Kie=["ticks","rule"],Zie=new xs(lM,vF);function vF(e,{config:t}){e=k(x({},e),{encoding:D4(e.encoding,t)});let{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:c,tooltipEncoding:l}=yF(e,lM,t);delete o.size;let u=$f(s,i,r,o,t.errorbar),f=s.thickness,d=s.size,p=x(x({type:"tick",orient:a,aria:!1},f!==void 0?{thickness:f}:{}),d!==void 0?{size:d}:{}),h=[...u({partName:"ticks",mark:p,positionPrefix:"lower",extraEncoding:l}),...u({partName:"ticks",mark:p,positionPrefix:"upper",extraEncoding:l}),...u({partName:"rule",mark:x({type:"rule",ariaRoleDescription:"errorbar"},f!==void 0?{size:f}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return x(k(x({},c),{transform:n}),h.length>1?{layer:h}:x({},h[0]))}function V_e(e,t){let{encoding:n}=e;if(N_e(n))return{orient:cM(e,t),inputType:"raw"};let r=__e(n),i=k_e(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);let s=n.x2,c=n.y2;if(ke(s)&&ke(c))throw new Error(`${t} cannot have both x2 and y2`);if(ke(s)){if(ca(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(ke(c)){if(ca(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{let s=n.xError,c=n.xError2,l=n.yError,u=n.yError2;if(ke(c)&&!ke(s))throw new Error(`${t} cannot have xError2 without xError`);if(ke(u)&&!ke(l))throw new Error(`${t} cannot have yError2 without yError`);if(ke(s)&&ke(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(ke(s)){if(ca(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(ke(l)){if(ca(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function N_e(e){return(ke(e.x)||ke(e.y))&&!ke(e.x2)&&!ke(e.y2)&&!ke(e.xError)&&!ke(e.xError2)&&!ke(e.yError)&&!ke(e.yError2)}function __e(e){return ke(e.x2)||ke(e.y2)}function k_e(e){return ke(e.xError)||ke(e.xError2)||ke(e.yError)||ke(e.yError2)}function yF(e,t,n){var X,J,we;let G=e,{mark:r,encoding:i,params:o,projection:a}=G,s=ie(G,["mark","encoding","params","projection"]),c=ci(r)?r:{type:r};o&&U(O.selectionNotSupported(t));let{orient:l,inputType:u}=V_e(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:h,continuousAxis:m}=sM(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:v,tooltipSummary:y,tooltipTitleWithFieldName:C}=T_e(c,f,d,p,h,u,t,n),Se=i,{[m]:b,[X=m==="x"?"x2":"y2"]:M,[J=m==="x"?"xError":"yError"]:S,[we=m==="x"?"xError2":"yError2"]:w}=Se,E=ie(Se,[R4(m),R4(X),R4(J),R4(we)]),{bins:D,timeUnits:L,aggregate:A,groupby:j,encoding:V}=rM(E,n),_=[...A,...g],N=u!=="raw"?[]:j,I=Mh(y,f,V,C);return{transform:[...s.transform??[],...D,...L,..._.length===0?[]:[{aggregate:_,groupby:N}],...v],groupby:N,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:V,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:s,tooltipEncoding:I}}function T_e(e,t,n,r,i,o,a,s){let c=[],l=[],u=t.field,f,d=!1;if(o==="raw"){let p=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":s.errorbar.center,h=e.extent?e.extent:p==="mean"?"stderr":"iqr";if(p==="median"!=(h==="iqr")&&U(O.errorBarCenterIsUsedWithWrongExtent(p,h,a)),h==="stderr"||h==="stdev")c=[{op:h,field:u,as:`extent_${u}`},{op:p,field:u,as:`center_${u}`}],l=[{calculate:`datum["center_${u}"] + datum["extent_${u}"]`,as:`upper_${u}`},{calculate:`datum["center_${u}"] - datum["extent_${u}"]`,as:`lower_${u}`}],f=[{fieldPrefix:"center_",titlePrefix:v4(p)},{fieldPrefix:"upper_",titlePrefix:Qie(p,h,"+")},{fieldPrefix:"lower_",titlePrefix:Qie(p,h,"-")}],d=!0;else{let m,g,v;h==="ci"?(m="mean",g="ci0",v="ci1"):(m="median",g="q1",v="q3"),c=[{op:g,field:u,as:`lower_${u}`},{op:v,field:u,as:`upper_${u}`},{op:m,field:u,as:`center_${u}`}],f=[{fieldPrefix:"upper_",titlePrefix:ys({field:u,aggregate:v,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:ys({field:u,aggregate:g,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:ys({field:u,aggregate:m,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&U(O.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${u}`},{calculate:`datum["${u}"]`,as:`lower_${u}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:u}],l=[{calculate:`datum["${u}"] + datum["${r.field}"]`,as:`upper_${u}`}],i?l.push({calculate:`datum["${u}"] + datum["${i.field}"]`,as:`lower_${u}`}):l.push({calculate:`datum["${u}"] - datum["${r.field}"]`,as:`lower_${u}`}));for(let p of l)f.push({fieldPrefix:p.as.substring(0,6),titlePrefix:Z2(Z2(p.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:c,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Qie(e,t,n){return`${v4(e)} ${n} ${t}`}var uM="errorband",Jie=["band","borders"],e1e=new xs(uM,xF);function xF(e,{config:t}){e=k(x({},e),{encoding:D4(e.encoding,t)});let{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:c}=yF(e,uM,t),l=a,u=$f(l,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0,d={type:f?"area":"rect"},p={type:f?"line":"rule"},h=x(x({},l.interpolate?{interpolate:l.interpolate}:{}),l.tension&&l.interpolate?{tension:l.tension}:{});return f?(d=k(x(x({},d),h),{ariaRoleDescription:"errorband"}),p=k(x(x({},p),h),{aria:!1})):l.interpolate?U(O.errorBand1DNotSupport("interpolate")):l.tension&&U(O.errorBand1DNotSupport("tension")),k(x({},s),{transform:n,layer:[...u({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c}),...u({partName:"borders",mark:p,positionPrefix:"lower",extraEncoding:c}),...u({partName:"borders",mark:p,positionPrefix:"upper",extraEncoding:c})]})}var t1e={};function CF(e,t,n){let r=new xs(e,t);t1e[e]={normalizer:r,parts:n}}function n1e(){return R(t1e)}CF(wh,gF,Gie);CF(lM,vF,Kie);CF(uM,xF,Jie);var r1e=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"];var bF={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},MF={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},i1e=R(bF),o1e=R(MF),I_e={header:1,headerRow:1,headerColumn:1,headerFacet:1},wF=R(I_e);var fM=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],a1e={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},SF={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},F5t=R(SF);var ui="_vgsid_",s1e={point:{on:"click",fields:[ui],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Sh(e){return e==="legend"||!!e?.legend}function dM(e){return Sh(e)&&ne(e)}function Bf(e){return!!e?.select}function pM(e){let t=[];for(let r of e||[]){if(Bf(r))continue;let n=r,{expr:i,bind:o}=n,a=ie(n,["expr","bind"]);if(o&&i){let s=k(x({},a),{bind:o,init:i});t.push(s)}else{let s=x(x(x({},a),i?{update:i}:{}),o?{bind:o}:{});t.push(s)}}return t}function EF(e){return z4(e)||Uf(e)||Eh(e)}function Eh(e){return"concat"in e}function z4(e){return"vconcat"in e}function Uf(e){return"hconcat"in e}function DF({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Y1(e){return ne(e)&&e.step!==void 0}function zF(e){return e.view||e.width||e.height}var HF=20,F_e={align:1,bounds:1,center:1,columns:1,spacing:1},R_e=R(F_e);function c1e(e,t,n){let r=n[t],i={},{spacing:o,columns:a}=r;o!==void 0&&(i.spacing=o),a!==void 0&&(Pc(e)&&!vs(e.facet)||Eh(e))&&(i.columns=a),z4(e)&&(i.columns=1);for(let s of R_e)if(e[s]!==void 0)if(s==="spacing"){let c=e[s];i[s]=Oe(c)?c:{row:c.row??o,column:c.column??o}}else i[s]=e[s];return i}function Dh(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function L0(e,t){let n=jf(e,t);return Y1(n)?n.step:f1e}function jf(e,t){let n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ot(n,{step:e.step})}var f1e=20,O_e={continuousWidth:200,continuousHeight:200,step:f1e};var P_e={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:O_e,mark:yie,arc:{},area:{},bar:bie,circle:{},geoshape:{},image:{},line:{},point:{},rect:Mie,rule:{color:"black"},square:{},text:{color:"black"},tick:wie,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:iie,projection:{},legend:a1e,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:s1e,style:{},title:{},facet:{spacing:HF},concat:{spacing:HF},normalizedNumberFormat:".0%"},Bc=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],l1e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},u1e={blue:Bc[0],orange:Bc[1],red:Bc[2],teal:Bc[3],green:Bc[4],yellow:Bc[5],purple:Bc[6],pink:Bc[7],brown:Bc[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function $_e(e={}){return{signals:[{name:"color",value:ne(e)?x(x({},u1e),e):u1e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function B_e(e){return{signals:[{name:"fontSize",value:ne(e)?x(x({},l1e),e):l1e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function U_e(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function d1e(e){let t=R(e||{}),n={};for(let r of t){let i=e[r];n[r]=$c(i)?Eb(i):Rr(i)}return n}function j_e(e){let t=R(e),n={};for(let r of t)n[r]=d1e(e[r]);return n}var q_e=[...Bb,...pF,...wF,"background","padding","legend","lineBreak","scale","style","title","view"];function hM(e={}){let c=e,{color:t,font:n,fontSize:r,selection:i}=c,o=ie(c,["color","font","fontSize","selection"]),a=Pa({},le(P_e),n?U_e(n):{},t?$_e(t):{},r?B_e(r):{},o||{});i&&ec(a,"selection",i,!0);let s=Fn(a,q_e);for(let l of["background","lineBreak","padding"])a[l]&&(s[l]=Rr(a[l]));for(let l of Bb)a[l]&&(s[l]=sr(a[l]));for(let l of pF)a[l]&&(s[l]=d1e(a[l]));for(let l of wF)a[l]&&(s[l]=sr(a[l]));return a.legend&&(s.legend=sr(a.legend)),a.scale&&(s.scale=sr(a.scale)),a.style&&(s.style=j_e(a.style)),a.title&&(s.title=sr(a.title)),a.view&&(s.view=sr(a.view)),s}var G_e=new Set(["view",...mie]),W_e=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Y_e=x({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},vie);function p1e(e){e=le(e);for(let t of W_e)delete e[t];if(e.axis)for(let t in e.axis)$c(e.axis[t])&&delete e.axis[t];if(e.legend)for(let t of r1e)delete e.legend[t];if(e.mark){for(let t of nF)delete e.mark[t];e.mark.tooltip&&ne(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(pM(e.params)),delete e.params);for(let t of G_e){for(let r of nF)delete e[t][r];let n=Y_e[t];if(n)for(let r of n)delete e[t][r];Q_e(e,t)}for(let t of n1e())delete e[t];X_e(e);for(let t in e)ne(e[t])&&We(e[t])&&delete e[t];return We(e)?void 0:e}function X_e(e){let{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=wb(e.title);We(t)||(e.style["group-title"]=x(x({},e.style["group-title"]),t)),We(n)||(e.style["group-subtitle"]=x(x({},e.style["group-subtitle"]),n)),We(r)?delete e.title:e.title=r}function Q_e(e,t,n,r){let i=r?e[t][r]:e[t];t==="view"&&(n="cell");let o=x(x({},i),e.style[n??t]);We(o)||(e.style[n??t]=o),r||delete e[t]}function Uc(e){return"layer"in e}function LF(e){return"repeat"in e}function h1e(e){return!F(e.repeat)&&e.repeat.layer}var H4=class{map(t,n){return Pc(t)?this.mapFacet(t,n):LF(t)?this.mapRepeat(t,n):Uf(t)?this.mapHConcat(t,n):z4(t)?this.mapVConcat(t,n):Eh(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Uc(t))return this.mapLayer(t,n);if(Cr(t))return this.mapUnit(t,n);throw new Error(O.invalidSpec(t))}mapLayer(t,n){return k(x({},t),{layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))})}mapHConcat(t,n){return k(x({},t),{hconcat:t.hconcat.map(r=>this.map(r,n))})}mapVConcat(t,n){return k(x({},t),{vconcat:t.vconcat.map(r=>this.map(r,n))})}mapConcat(t,n){let o=t,{concat:r}=o,i=ie(o,["concat"]);return k(x({},i),{concat:r.map(a=>this.map(a,n))})}mapFacet(t,n){return k(x({},t),{spec:this.map(t.spec,n)})}mapRepeat(t,n){return k(x({},t),{spec:this.map(t.spec,n)})}};var K_e={zero:1,center:1,normalize:1};function Z_e(e){return e in K_e}var J_e=new Set([tF,E0,S0,_f,Nf,ph,hh,D0,Pb,dh]),eke=new Set([E0,S0,tF]);function qf(e){return Y(e)&&Fc(e)==="quantitative"&&!e.bin}function m1e(e,t,{orient:n,type:r}){let i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),a=e[t],s=e[i];if(Y(a)&&Y(s))if(qf(a)&&qf(s)){if(a.stack)return t;if(s.stack)return i;let c=Y(a)&&!!a.aggregate,l=Y(s)&&!!s.aggregate;if(c!==l)return c?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(qf(a))return t;if(qf(s))return i}else{if(qf(a))return o&&n==="vertical"?void 0:t;if(qf(s))return o&&n==="horizontal"?void 0:i}}function tke(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function mM(e,t){let n=ci(e)?e:{type:e},r=n.type;if(!J_e.has(r))return null;let i=m1e(t,"x",n)||m1e(t,"theta",n);if(!i)return null;let o=t[i],a=Y(o)?K(o,{}):void 0,s=tke(i),c=[],l=new Set;if(t[s]){let m=t[s],g=Y(m)?K(m,{}):void 0;g&&g!==a&&(c.push(s),l.add(g))}let u=s==="x"?"xOffset":"yOffset",f=t[u],d=Y(f)?K(f,{}):void 0;d&&d!==a&&(c.push(u),l.add(d));let p=hre.reduce((m,g)=>{if(g!=="tooltip"&&Cs(t,g)){let v=t[g];for(let y of te(v)){let C=li(y);if(C.aggregate)continue;let b=K(C,{});(!b||!l.has(b))&&m.push({channel:g,fieldDef:C})}}return m},[]),h;return o.stack!==void 0?A1(o.stack)?h=o.stack?"zero":null:h=o.stack:eke.has(r)&&(h="zero"),!h||!Z_e(h)||Pf(t)&&p.length===0?null:o?.scale?.type&&o?.scale?.type!==Or.LINEAR?(o?.stack&&U(O.cannotStackNonLinearScale(o.scale.type)),null):ke(t[Ir(i)])?(o.stack!==void 0&&U(O.cannotStackRangedMark(i)),null):(Y(o)&&o.aggregate&&!Ere.has(o.aggregate)&&U(O.stackNonSummativeAggregate(o.aggregate)),{groupbyChannels:c,groupbyFields:l,fieldChannel:i,impute:o.impute===null?!1:Fi(r),stackBy:p,offset:h})}function gM(e,t,n){let r=sr(e),i=Be("orient",r,n);if(r.orient=ike(r.type,t,i),i!==void 0&&i!==r.orient&&U(O.orientOverridden(r.orient,i)),r.type==="bar"&&r.orient){let s=Be("cornerRadiusEnd",r,n);if(s!==void 0){let c=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:xie[r.orient];for(let l of c)r[l]=s;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}return Be("opacity",r,n)===void 0&&(r.opacity=rke(r.type,t)),Be("cursor",r,n)===void 0&&(r.cursor=nke(r,t,n)),r}function nke(e,t,n){return t.href||e.href||Be("href",e,n)?"pointer":e.cursor}function rke(e,t){if(Ae([Nf,dh,ph,hh],e)&&!Pf(t))return .7}function g1e(e,t,{graticule:n}){if(n)return!1;let r=Eo("filled",e,t),i=e.type;return ot(r,i!==Nf&&i!==D0&&i!==_f)}function ike(e,t,n){switch(e){case Nf:case ph:case hh:case Pb:case pie:case die:return}let{x:r,y:i,x2:o,y2:a}=t;switch(e){case E0:if(Y(r)&&(an(r.bin)||Y(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Y(i)&&(an(i.bin)||Y(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o)return(Y(r)&&r.type===c2&&!et(r.bin)||yh(r))&&Y(i)&&an(i.bin)?"horizontal":"vertical";if(!a)return(Y(i)&&i.type===c2&&!et(i.bin)||yh(i))&&Y(r)&&an(r.bin)?"vertical":"horizontal"}case _f:if(o&&!(Y(r)&&an(r.bin))&&a&&!(Y(i)&&an(i.bin)))return;case S0:if(a)return Y(i)&&an(i.bin)?"horizontal":"vertical";if(o)return Y(r)&&an(r.bin)?"vertical":"horizontal";if(e===_f){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case D0:case dh:{let s=sF(r),c=sF(i);if(n)return n;if(s&&!c)return e!=="tick"?"horizontal":"vertical";if(!s&&c)return e!=="tick"?"vertical":"horizontal";if(s&&c)return"vertical";{let l=En(r)&&r.type===ds,u=En(i)&&i.type===ds;if(l&&!u)return"vertical";if(!l&&u)return"horizontal"}return}}return"vertical"}function oke(e){let i=e,{point:t,line:n}=i,r=ie(i,["point","line"]);return R(r).length>1?r:r.type}function ake(e){for(let t of["line","area","rule","trail"])e[t]&&(e=k(x({},e),{[t]:Fn(e[t],["point","line"])}));return e}function AF(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ne(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ne(t.point)?t.point:{}:void 0}function v1e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}var vM=class{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Cr(t)){let{mark:r,encoding:i}=t,o=ci(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!AF(o,n[o.type],i);case"area":return!!AF(o,n[o.type],i)||!!v1e(o,n[o.type])}}return!1}run(t,n,r){let{config:i}=n,y=t,{params:o,projection:a,mark:s,name:c,encoding:l}=y,u=ie(y,["params","projection","mark","name","encoding"]),f=D4(l,i),d=ci(s)?s:{type:s},p=AF(d,i[d.type],f),h=d.type==="area"&&v1e(d,i[d.type]),m=[k(x({name:c},o?{params:o}:{}),{mark:oke(x(x({},d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{}),d)),encoding:Fn(f,["shape"])})],g=mM(gM(d,f,i),f),v=f;if(g){let{fieldChannel:C,offset:b}=g;v=k(x({},f),{[C]:x(x({},f[C]),b?{stack:b}:{})})}return v=Fn(v,["y2","x2"]),h&&m.push(k(x({},a?{projection:a}:{}),{mark:x(x({type:"line"},Vc(d,["clip","interpolate","tension","tooltip"])),h),encoding:v})),p&&m.push(k(x({},a?{projection:a}:{}),{mark:x(x({type:"point",opacity:1,filled:!0},Vc(d,["clip","tooltip"])),p),encoding:v})),r(k(x({},u),{layer:m}),k(x({},n),{config:ake(i)}))}};function C1e(e,t){return t?vs(e)?M1e(e,t):b1e(e,t):e}function yM(e,t){return t?M1e(e,t):e}function VF(e,t,n){let r=t[e];if(Nie(r)){if(r.repeat in n)return k(x({},t),{[e]:n[r.repeat]});U(O.noSuchRepeatedValue(r.repeat));return}return t}function b1e(e,t){if(e=VF("field",e,t),e!==void 0){if(e===null)return null;if(Qb(e)&&Pr(e.sort)){let n=VF("field",e.sort,t);e=x(x({},e),n?{sort:n}:{})}return e}}function y1e(e,t){if(Y(e))return b1e(e,t);{let n=VF("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function x1e(e,t){if(ke(e)){let r=y1e(e,t);if(r)return r;if(S4(e))return{condition:e.condition}}else{if(E4(e)){let r=y1e(e.condition,t);if(r)return k(x({},e),{condition:r});{let n=e,{condition:i}=n;return ie(n,["condition"])}}return e}}function M1e(e,t){let n={};for(let r in e)if(de(e,r)){let i=e[r];if(F(i))n[r]=i.map(o=>x1e(o,t)).filter(o=>o);else{let o=x1e(i,t);o!==void 0&&(n[r]=o)}}return n}var xM=class{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Cr(t)){let{encoding:n,mark:r}=t;if(r==="line"||ci(r)&&r.type==="line")for(let i of fre){let o=wo(i),a=n[o];if(n[i]&&(Y(a)&&!an(a.bin)||Ri(a)))return!0}}return!1}run(t,n,r){let{encoding:i,mark:o}=t;return U(O.lineWithRange(!!i.x2,!!i.y2)),r(k(x({},t),{mark:ne(o)?k(x({},o),{type:"rule"}):"rule"}),n)}};var CM=class extends H4{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Wie,Zie,e1e,new vM,new xM]}map(t,n){if(Cr(t)){let r=Cs(t.encoding,B1),i=Cs(t.encoding,U1),o=Cs(t.encoding,Cf);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){let{parentEncoding:r,parentProjection:i}=n,o=yM(t.encoding,n.repeater),a=x(x(x({},t),t.name?{name:[n.repeaterPrefix,t.name].filter(c=>c).join("_")}:{}),o?{encoding:o}:{});if(r||i)return this.mapUnitWithParentEncodingOrProjection(a,n);let s=this.mapLayerOrUnit.bind(this);for(let c of this.nonFacetUnitNormalizers)if(c.hasMatchingType(a,n.config))return c.run(a,n,s);return a}mapRepeat(t,n){return h1e(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){let f=t,{repeat:r,spec:i}=f,o=ie(f,["repeat","spec"]),{row:a,column:s,layer:c}=r,{repeater:l={},repeaterPrefix:u=""}=n;return a||s?this.mapRepeat(k(x({},t),{repeat:x(x({},a?{row:a}:{}),s?{column:s}:{}),spec:{repeat:{layer:c},spec:i}}),n):k(x({},o),{layer:c.map(d=>{let p=k(x({},l),{layer:d}),h=`${(i.name?`${i.name}_`:"")+u}child__layer_${ut(d)}`,m=this.mapLayerOrUnit(i,k(x({},n),{repeater:p,repeaterPrefix:h}));return m.name=h,m})})}mapNonLayerRepeat(t,n){let h=t,{repeat:r,spec:i,data:o}=h,a=ie(h,["repeat","spec","data"]);!F(r)&&t.columns&&(t=Fn(t,["columns"]),U(O.columnsNotSupportByRowCol("repeat")));let s=[],{repeater:c={},repeaterPrefix:l=""}=n,u=!F(r)&&r.row||[c?c.row:null],f=!F(r)&&r.column||[c?c.column:null],d=F(r)&&r||[c?c.repeat:null];for(let m of d)for(let g of u)for(let v of f){let y={repeat:m,row:g,column:v,layer:c.layer},C=(i.name?`${i.name}_`:"")+l+"child__"+(F(r)?`${ut(m)}`:(r.row?`row_${ut(g)}`:"")+(r.column?`column_${ut(v)}`:"")),b=this.map(i,k(x({},n),{repeater:y,repeaterPrefix:C}));b.name=C,s.push(Fn(b,["data"]))}let p=F(r)?t.columns:r.column?r.column.length:1;return k(x({data:i.data??o,align:"all"},a),{columns:p,concat:s})}mapFacet(t,n){let{facet:r}=t;return vs(r)&&t.columns&&(t=Fn(t,["columns"]),U(O.columnsNotSupportByRowCol("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){let{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:a,config:s}=n,c=S1e({parentProjection:a,projection:i}),l=w1e({parentEncoding:o,encoding:yM(r,n.repeater)});return this.mapUnit(x(x(x({},t),c?{projection:c}:{}),l?{encoding:l}:{}),{config:s})}mapFacetedUnit(t,n){let y=t.encoding,{row:r,column:i,facet:o}=y,a=ie(y,["row","column","facet"]),C=t,{mark:s,width:c,projection:l,height:u,view:f,params:d,encoding:p}=C,h=ie(C,["mark","width","projection","height","view","params","encoding"]),{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),v=yM(a,n.repeater);return this.mapFacet(k(x(x({},h),g),{facet:m,spec:x(k(x(x(x(x({},c?{width:c}:{}),u?{height:u}:{}),f?{view:f}:{}),l?{projection:l}:{}),{mark:s,encoding:v}),d?{params:d}:{})}),n)}getFacetMappingAndLayout(t,n){let{row:r,column:i,facet:o}=t;if(r||i){o&&U(O.facetChannelDropped([...r?[B1]:[],...i?[U1]:[]]));let c={},l={};for(let u of[B1,U1]){let f=t[u];if(f){let a=f,{align:d,center:p,spacing:h,columns:m}=a,g=ie(a,["align","center","spacing","columns"]);c[u]=g;for(let v of["align","center","spacing"])f[v]!==void 0&&(l[v]??(l[v]={}),l[v][u]=f[v])}}return{facetMapping:c,layout:l}}else{let s=o,{align:c,center:l,spacing:u,columns:f}=s,d=ie(s,["align","center","spacing","columns"]);return{facetMapping:C1e(d,n.repeater),layout:x(x(x(x({},c?{align:c}:{}),l?{center:l}:{}),u?{spacing:u}:{}),f?{columns:f}:{})}}}mapLayer(t,o){var a=o,{parentEncoding:n,parentProjection:r}=a,i=ie(a,["parentEncoding","parentProjection"]);let f=t,{encoding:s,projection:c}=f,l=ie(f,["encoding","projection"]),u=k(x({},i),{parentEncoding:w1e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:S1e({parentProjection:r,projection:c})});return super.mapLayer(x(x({},l),t.name?{name:[u.repeaterPrefix,t.name].filter(d=>d).join("_")}:{}),u)}};function w1e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){let i=new Set([...R(e),...R(t)]);for(let o of i){let a=t[o],s=e[o];if(ke(a)){let c=x(x({},s),a);r[o]=c}else E4(a)?r[o]=k(x({},a),{condition:x(x({},s),a.condition)}):a||a===null?r[o]=a:(n||cr(s)||ae(s)||ke(s)||F(s))&&(r[o]=s)}}else r=t;return!r||We(r)?void 0:r}function S1e(e){let{parentProjection:t,projection:n}=e;return t&&n&&U(O.projectionOverridden({parentProjection:t,projection:n})),n??t}function zh(e){return"filter"in e}function E1e(e){return e?.stop!==void 0}function bM(e){return"lookup"in e}function D1e(e){return"data"in e}function z1e(e){return"param"in e}function H1e(e){return"pivot"in e}function L1e(e){return"density"in e}function A1e(e){return"quantile"in e}function V1e(e){return"regression"in e}function N1e(e){return"loess"in e}function _1e(e){return"sample"in e}function k1e(e){return"window"in e}function T1e(e){return"joinaggregate"in e}function I1e(e){return"flatten"in e}function F1e(e){return"calculate"in e}function MM(e){return"bin"in e}function R1e(e){return"impute"in e}function O1e(e){return"timeUnit"in e}function P1e(e){return"aggregate"in e}function $1e(e){return"stack"in e}function B1e(e){return"fold"in e}function U1e(e){return"extent"in e&&!("density"in e)}function j1e(e){return e.map(t=>zh(t)?{filter:g4(t.filter,Qre)}:t)}var wM=class extends H4{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=q1e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=q1e(t,n),t.encoding){let r={};for(let[i,o]of $1(t.encoding))r[i]=G1e(o,n);t=k(x({},t),{encoding:r})}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){let o=t,{selection:r}=o,i=ie(o,["selection"]);return r?k(x({},i),{params:$1(r).map(([a,s])=>{let d=s,{init:c,bind:l,empty:u}=d,f=ie(d,["init","bind","empty"]);f.type==="single"?(f.type="point",f.toggle=!1):f.type==="multi"&&(f.type="point"),n.emptySelections[a]=u!=="none";for(let p of rn(n.selectionPredicates[a]??{}))p.empty=u!=="none";return{name:a,value:c,select:f,bind:l}})}):t}};function q1e(e,t){let i=e,{transform:n}=i,r=ie(i,["transform"]);if(n){let o=n.map(a=>{if(zh(a))return{filter:NF(a,t)};if(MM(a)&&na(a.bin))return k(x({},a),{bin:W1e(a.bin)});if(bM(a)){let s=a.from,{selection:c}=s,l=ie(s,["selection"]);return c?k(x({},a),{from:x({param:c},l)}):a}return a});return k(x({},r),{transform:o})}return e}function G1e(e,t){let n=le(e);if(Y(n)&&na(n.bin)&&(n.bin=W1e(n.bin)),l2(n)&&n.scale?.domain?.selection){let r=n.scale.domain,{selection:o}=r,a=ie(r,["selection"]);n.scale.domain=x(x({},a),o?{param:o}:{})}if(S4(n))if(F(n.condition))n.condition=n.condition.map(o=>{let u=o,{selection:a,param:s,test:c}=u,l=ie(u,["selection","param","test"]);return s?o:k(x({},l),{test:NF(o,t)})});else{let i=G1e(n.condition,t),{selection:o,param:a,test:s}=i,c=ie(i,["selection","param","test"]);n.condition=a?n.condition:k(x({},c),{test:NF(n.condition,t)})}return n}function W1e(e){let t=e.extent;if(t?.selection){let n=t,{selection:r}=n,i=ie(n,["selection"]);return k(x({},e),{extent:k(x({},i),{param:r})})}return e}function NF(e,t){let n=r=>g4(r,i=>{var o;let a=t.emptySelections[i]??!0,s={param:i,empty:a};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(s),s});return e.selection?n(e.selection):g4(e.test||e.filter,r=>r.selection?n(r.selection):r)}var Gf=class extends H4{map(t,n){let r=n.selections??[];if(t.params&&!Cr(t)){let i=[];for(let o of t.params)Bf(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){let r=n.selections;if(!r||!r.length)return t;let i=(n.path??[]).concat(t.name),o=[];for(let a of r)if(!a.views||!a.views.length)o.push(a);else for(let s of a.views)(Q(s)&&(s===t.name||i.includes(s))||F(s)&&s.map(c=>i.indexOf(c)).every((c,l,u)=>c!==-1&&(l===0||c>u[l-1])))&&o.push(a);return o.length&&(t.params=o),t}};for(let e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){let t=Gf.prototype[e];Gf.prototype[e]=function(n,r){return t.call(this,n,ske(n,r))}}function ske(e,t){return e.name?k(x({},t),{path:(t.path??[]).concat(e.name)}):t}function SM(e,t){t===void 0&&(t=hM(e.config));let n=fke(e,t),{width:r,height:i}=e,o=dke(n,{width:r,height:i,autosize:e.autosize},t);return x(x({},n),o?{autosize:o}:{})}var cke=new CM,lke=new wM,uke=new Gf;function fke(e,t={}){let n={config:t};return uke.map(cke.map(lke.map(e,n),n),n)}function Y1e(e){return Q(e)?{type:e}:e??{}}function dke(e,t,n){let{width:r,height:i}=t,o=Cr(e)||Uc(e),a={};o?r=="container"&&i=="container"?(a.type="fit",a.contains="padding"):r=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(r=="container"&&(U(O.containerSizeNonSingle("width")),r=void 0),i=="container"&&(U(O.containerSizeNonSingle("height")),i=void 0));let s=x(x(x({type:"pad"},a),n?Y1e(n.autosize):{}),Y1e(e.autosize));if(s.type==="fit"&&!o&&(U(O.FIT_NON_SINGLE),s.type="pad"),r=="container"&&!(s.type=="fit"||s.type=="fit-x")&&U(O.containerSizeNotCompatibleWithAutosize("width")),i=="container"&&!(s.type=="fit"||s.type=="fit-y")&&U(O.containerSizeNotCompatibleWithAutosize("height")),!kr(s,{type:"pad"}))return s}function X1e(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function Q1e(e){return e?`fit-${C4(e)}`:"fit"}var pke=["background","padding"];function _F(e,t){let n={};for(let r of pke)e&&e[r]!==void 0&&(n[r]=Rr(e[r]));return t&&(n.params=e.params),n}var Oi=class e{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new e(le(this.explicit),le(this.implicit))}combine(){return x(x({},this.explicit),this.implicit)}get(t){return ot(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(let n of R(t.combine())){let r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}};function u2(e){return{explicit:!0,value:e}}function Pi(e){return{explicit:!1,value:e}}function EM(e){return(t,n,r,i)=>{let o=e(t.value,n.value);return o>0?t:o<0?n:Wf(t,n,r,i)}}function Wf(e,t,n,r){return e.explicit&&t.explicit&&U(O.mergeConflictingProperty(n,r,e.value,t.value)),e}function X1(e,t,n,r,i=Wf){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:kr(e.value,t.value)?e:i(e,t,n,r)}var DM=class extends Oi{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){let t=super.clone();return t.parseNothing=this.parseNothing,t}};function jc(e){return"url"in e}function A0(e){return"values"in e}function zM(e){return"name"in e&&!jc(e)&&!A0(e)&&!la(e)}function la(e){return e&&(kF(e)||TF(e)||Hh(e))}function kF(e){return"sequence"in e}function TF(e){return"sphere"in e}function Hh(e){return"graticule"in e}var Ct=function(e){return e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e}(Ct||{});function IF(e){let o=e,{signals:t,hasLegend:n,index:r}=o,i=ie(o,["signals","hasLegend","index"]);return i.field=ar(i.field),i}function qc(e,t=!0,n=Vn){if(F(e)){let r=e.map(i=>qc(i,t,n));return t?`[${r.join(", ")}]`:r}else if(s2(e))return n(t?oa(e):$re(e));return t?n(ft(e)):e}function K1e(e,t){for(let n of rn(e.component.selection??{})){let r=n.name,i=`${r}${g1}, ${n.resolve==="global"?"true":`{unit: ${fa(e)}}`}`;for(let o of Yf)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+roe,on:[{events:{signal:n.name+g1},update:`modify(${Z(n.name+ua)}, ${i})`}]})}return RF(t)}function Z1e(e,t){if(e.component.selection&&R(e.component.selection).length){let n=Z(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Ai("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return RF(t)}function J1e(e,t){let n=!1;for(let r of rn(e.component.selection??{})){let i=r.name,o=Z(i+ua);if(t.filter(s=>s.name===i).length===0){let s=r.resolve==="global"?"union":r.resolve,c=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${HM}(${o}, ${Z(s)}${c}`})}n=!0;for(let s of Yf)s.defined(r)&&s.topLevelSignals&&(t=s.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),RF(t)}function eoe(e,t){let n=[...t],r=fa(e,{escape:!1});for(let i of rn(e.component.selection??{})){let o={name:i.name+ua};if(i.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:ui}}]),i.init){let s=i.project.items.map(IF);o.values=i.project.hasSelectionId?i.init.map(c=>({unit:r,[ui]:qc(c,!1)[0]})):i.init.map(c=>({unit:r,fields:s,values:qc(c,!1)}))}n.filter(s=>s.name===i.name+ua).length||n.push(o)}return n}function FF(e,t){for(let n of rn(e.component.selection??{}))for(let r of Yf)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function toe(e,t){for(let n of e.children)bt(n)&&(t=FF(n,t));return t}function noe(e,t,n,r){let i=LM(e,t.param,t);return{signal:On(n.get("type"))&&F(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function RF(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}var He=class{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){U(O.ADD_SAME_CHILD_TWICE);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){let n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(let n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){let n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){let t=this._parent,n=t.parent;for(let i of this._children)i.parent=t;this._children=[],t.removeChild(this);let r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}},Dn=class extends He{clone(){let t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${AI()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}};function OF(e){return e.as!==void 0}function ioe(e){return`${e}_end`}var f2=class e extends He{clone(){return new e(null,le(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){let r=n.reduceFieldDef((i,o,a)=>{let{field:s,timeUnit:c}=o;if(c){let l;if(aa(c)){if(bt(n)){let{mark:u,markDef:f,config:d}=n,p=W1({fieldDef:o,markDef:f,config:d});(Ic(u)||p)&&(l={timeUnit:sn(c),field:s})}}else l={as:K(o,{forAs:!0}),field:s,timeUnit:c};if(bt(n)){let{mark:u,markDef:f,config:d}=n,p=W1({fieldDef:o,markDef:f,config:d});Ic(u)&&xt(a)&&p!==.5&&(l.rectBandPosition=p)}l&&(i[Ce(l)]=l)}return i},{});return We(r)?null:new e(t,r)}static makeFromTransform(t,n){let s=x({},n),{timeUnit:r}=s,i=ie(s,["timeUnit"]),o=sn(r),a=k(x({},i),{timeUnit:o});return new e(t,{[Ce(a)]:a})}merge(t){this.timeUnits=x({},this.timeUnits);for(let n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(let n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){let n={};for(let[r,i]of $1(this.timeUnits)){let o=OF(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(rn(this.timeUnits).map(t=>OF(t)?t.as:ioe(t.field)))}dependentFields(){return new Set(rn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Ce(this.timeUnits)}`}assemble(){let t=[];for(let r of rn(this.timeUnits)){let{rectBandPosition:i}=r,o=sn(r.timeUnit);if(OF(r)){let{field:a,as:s}=r,n=o,{unit:c,utc:l}=n,u=ie(n,["unit","utc"]),f=[s,`${s}_end`];t.push(k(x(x(x({field:ar(a),type:"timeunit"},c?{units:Af(c)}:{}),l?{timezone:"utc"}:{}),u),{as:f})),t.push(...ooe(f,i,o))}else if(r){let{field:a}=r,s=a.replaceAll("\\.","."),c=soe({timeUnit:o,field:s}),l=ioe(s);t.push({type:"formula",expr:c,as:l}),t.push(...ooe([s,l],i,o))}}return t}},V0="offsetted_rect_start",N0="offsetted_rect_end";function soe({timeUnit:e,field:t,reverse:n}){let{unit:r,utc:i}=e,o=YI(r),{part:a,step:s}=QI(o,e.step);return`${i?"utcOffset":"timeOffset"}('${a}', datum['${t}'], ${n?-s:s})`}function ooe([e,t],n,r){if(n!==void 0&&n!==.5){let i=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:aoe([soe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${V0}`},{type:"formula",expr:aoe([i,o],n+.5),as:`${e}_${N0}`}]}return[]}function aoe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}var Gc="_tuple_fields",PF=class{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}},hke={defined:()=>!0,parse:(e,t,n)=>{let r=t.name,i=t.project??(t.project=new PF),o={},a={},s=new Set,c=(h,m)=>{let g=m==="visual"?h.channel:h.field,v=ut(`${r}_${g}`);for(let y=1;s.has(v);y++)v=ut(`${r}_${g}_${y}`);return s.add(v),{[m]:v}},l=t.type,u=e.config.selection[l],f=n.value!==void 0?te(n.value):null,{fields:d,encodings:p}=ne(n.select)?n.select:{};if(!d&&!p&&f){for(let h of f)if(ne(h))for(let m of R(h))ure(m)?(p||(p=[])).push(m):l==="interval"?(U(O.INTERVAL_INITIALIZED_WITH_POS),p=u.encodings):(d??(d=[])).push(m)}!d&&!p&&(p=u.encodings,"fields"in u&&(d=u.fields));for(let h of p??[]){let m=e.fieldDef(h);if(m){let g=m.field;if(m.aggregate){U(O.cannotProjectAggregate(h,m.aggregate));continue}else if(!g){U(O.cannotProjectOnChannelWithoutField(h));continue}if(m.timeUnit&&!aa(m.timeUnit)){g=e.vgField(h);let v={timeUnit:m.timeUnit,as:g,field:m.field};a[Ce(v)]=v}if(!o[g]){let v=l==="interval"&&Fr(h)&&On(e.getScaleComponent(h).get("type"))?"R":m.bin?"R-RE":"E",y={field:g,channel:h,type:v,index:i.items.length};y.signals=x(x({},c(y,"data")),c(y,"visual")),i.items.push(o[g]=y),i.hasField[g]=o[g],i.hasSelectionId=i.hasSelectionId||g===ui,gb(h)?(y.geoChannel=h,y.channel=mb(h),i.hasChannel[y.channel]=o[g]):i.hasChannel[h]=o[g]}}else U(O.cannotProjectOnChannelWithoutField(h))}for(let h of d??[]){if(i.hasField[h])continue;let m={type:"E",field:h,index:i.items.length};m.signals=x({},c(m,"data")),i.items.push(m),i.hasField[h]=m,i.hasSelectionId=i.hasSelectionId||h===ui}f&&(t.init=f.map(h=>i.items.map(m=>ne(h)?h[m.geoChannel||m.channel]!==void 0?h[m.geoChannel||m.channel]:h[m.field]:h))),We(a)||(i.timeUnit=new f2(null,a))},signals:(e,t,n)=>{let r=t.name+Gc;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(IF)})}},coe=hke;var mke={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{let n=t.scales=[];for(let r of t.project.items){let i=r.channel;if(!Fr(i))continue;let o=e.getScaleComponent(i),a=o?o.get("type"):void 0;if(!o||!On(a)){U(O.SCALE_BINDINGS_CONTINUOUS);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{let r=t.scales.filter(a=>n.filter(s=>s.name===a.signals.data).length===0);if(!e.parent||loe(e)||r.length===0)return n;let i=n.filter(a=>a.name===t.name)[0],o=i.update;if(o.indexOf(HM)>=0)i.update=`{${r.map(a=>`${Z(ar(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(let a of r){let s=`${Z(ar(a.field))}: ${a.signals.data}`;o.includes(s)||(o=`${o.substring(0,o.length-1)}, ${s}}`)}i.update=o}return n.concat(r.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!loe(e))for(let r of t.scales){let i=n.filter(o=>o.name===r.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}},zo=mke;function Lh(e,t){return`domain(${Z(e.scaleName(t))})`}function loe(e){return e.parent&&d2(e.parent)&&!e.parent.parent}var Wc="_brush",uoe="_scale_trigger",Ah="geo_interval_init_tick",foe="_init",gke="_center",vke={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){let i=x({},ne(n.select)?n.select:{});i.fields=[ui],i.encodings||(i.encodings=n.value?R(n.value):[ai,oi]),n.select=x({type:"interval"},i)}if(t.translate&&!zo.defined(t)){let i=`!event.item || event.item.mark.name !== ${Z(t.name+Wc)}`;for(let o of t.events){if(!o.between){U(`${o} is not an ordered event stream for interval selections.`);continue}let a=te((r=o.between[0]).filter??(r.filter=[]));a.indexOf(i)<0&&a.push(i)}}},signals:(e,t,n)=>{let r=t.name,i=r+g1,o=rn(t.project.hasChannel).filter(s=>s.channel===yt||s.channel===on),a=t.init?t.init[0]:null;if(n.push(...o.reduce((s,c)=>s.concat(yke(e,t,c,a&&a[c.index])),[])),e.hasProjection){let s=Z(e.projectionName()),c=e.projectionName()+gke,{x:l,y:u}=t.project.hasChannel,f=l&&l.signals.visual,d=u&&u.signals.visual,p=l?a&&a[l.index]:`${c}[0]`,h=u?a&&a[u.index]:`${c}[1]`,m=M=>e.getSizeSignalRef(M).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;a&&(n.unshift({name:r+foe,init:`[scale(${s}, [${l?p[0]:p}, ${u?h[0]:h}]), scale(${s}, [${l?p[1]:p}, ${u?h[1]:h}])]`}),(!l||!u)&&(n.find(S=>S.name===c)||n.unshift({name:c,update:`invert(${s}, [${m("width")}/2, ${m("height")}/2])`})));let v=`intersect(${g}, {markname: ${Z(e.getName("marks"))}}, unit.mark)`,y=`{unit: ${fa(e)}}`,C=`vlSelectionTuples(${v}, ${y})`,b=o.map(M=>M.signals.visual);return n.concat({name:i,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...a?[{signal:Ah}]:[]],update:C}]})}else{if(!zo.defined(t)){let l=r+uoe,u=o.map(f=>{let d=f.channel,{data:p,visual:h}=f.signals,m=Z(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),v=On(g)?"+":"";return`(!isArray(${p}) || (${v}invert(${m}, ${h})[0] === ${v}${p}[0] && ${v}invert(${m}, ${h})[1] === ${v}${p}[1]))`});u.length&&n.push({name:l,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:u.join(" && ")+` ? ${l} : {}`}]})}let s=o.map(l=>l.signals.data),c=`unit: ${fa(e)}, fields: ${r+Gc}, values`;return n.concat(x(x({name:i},a?{init:`{${c}: ${qc(a)}}`}:{}),s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${c}: [${s}]} : null`}]}:{}))}},topLevelSignals:(e,t,n)=>(bt(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===Ah).length||n.unshift({name:Ah,value:null,on:[{events:"timer{1}",update:`${Ah} === null ? {} : ${Ah}`}]})),n),marks:(e,t,n)=>{let r=t.name,{x:i,y:o}=t.project.hasChannel,a=i?.signals.visual,s=o?.signals.visual,c=`data(${Z(t.name+ua)})`;if(zo.defined(t)||!i&&!o)return n;let l={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:o!==void 0?{signal:`${s}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${s}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(let g of R(l))l[g]=[x({test:`${c}.length && ${c}[0].unit === ${fa(e)}`},l[g]),{value:0}];let m=t.mark,{fill:u,fillOpacity:f,cursor:d}=m,p=ie(m,["fill","fillOpacity","cursor"]),h=R(p).reduce((g,v)=>(g[v]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,o!==void 0&&`${s}[0] !== ${s}[1]`].filter(y=>y).join(" && "),value:p[v]},{value:null}],g),{});return[{name:`${r+Wc}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:u},fillOpacity:{value:f}},update:l}},...n,{name:r+Wc,type:"rect",clip:!0,encode:{enter:k(x({},d?{cursor:{value:d}}:{}),{fill:{value:"transparent"}}),update:x(x({},l),h)}}]}},doe=vke;function yke(e,t,n,r){let i=!e.hasProjection,o=n.channel,a=n.signals.visual,s=Z(i?e.scaleName(o):e.projectionName()),c=d=>`scale(${s}, ${d})`,l=e.getSizeSignalRef(o===yt?"width":"height").signal,u=`${o}(unit)`,f=t.events.reduce((d,p)=>[...d,{events:p.between[0],update:`[${u}, ${u}]`},{events:p,update:`[${a}[0], clamp(${u}, 0, ${l})]`}],[]);if(i){let d=n.signals.data,p=zo.defined(t),h=e.getScaleComponent(o),m=h?h.get("type"):void 0,g=r?{init:qc(r,!0,c)}:{value:[]};return f.push({events:{signal:t.name+uoe},update:On(m)?`[${c(`${d}[0]`)}, ${c(`${d}[1]`)}]`:"[0, 0]"}),p?[{name:d,on:[]}]:[k(x({name:a},g),{on:f}),k(x({name:d},r?{init:qc(r)}:{}),{on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${s}, ${a})`}]})]}else{let d=o===yt?0:1,p=t.name+foe,h=r?{init:`[${p}[0][${d}], ${p}[1][${d}]]`}:{value:[]};return[k(x({name:a},h),{on:f})]}}var xke={defined:e=>e.type==="point",signals:(e,t,n)=>{let r=t.name,i=r+Gc,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=rn(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Wc):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),c=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${s?` && ${s}`:""}`,l=`unit: ${fa(e)}, `;if(t.project.hasSelectionId)l+=`${ui}: ${a}[${Z(ui)}]`;else{let f=o.items.map(d=>e.fieldDef(d.channel)?.bin?`[${a}[${Z(e.vgField(d.channel,{}))}], ${a}[${Z(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${a}[${Z(d.field)}]`).join(", ");l+=`fields: ${i}, values: [${f}]`}let u=t.events;return n.concat([{name:r+g1,on:u?[{events:u,update:`${c} ? {${l}} : null`,force:!0}]:[]}])}},poe=xke;function Q1(e,t,n,r){let i=S4(t)&&t.condition,o=r(t);if(i){let s=te(i).map(c=>{let l=r(c);if(Vie(c)){let{param:u,empty:f}=c,d=AM(e,{param:u,empty:f});return x({test:d},l)}else{let u=_0(e,c.test);return x({test:u},l)}});return{[n]:[...s,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function L4(e,t="text"){let n=e.encoding[t];return Q1(e,n,t,r=>Xf(r,e.config))}function Xf(e,t,n="datum"){if(e){if(cr(e))return tt(e.value);if(ke(e)){let{format:r,formatType:i}=Of(e);return If({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Qf(e,t={}){let{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if(F(a))return{tooltip:$F({tooltip:a},o,i,t)};{let s=t.reactiveGeom?"datum.datum":"datum";return Q1(e,a,"tooltip",c=>{let l=Xf(c,i,s);if(l)return l;if(c===null)return;let u=Be("tooltip",r,i);if(u===!0&&(u={content:"encoding"}),Q(u))return{value:u};if(ne(u))return ae(u)?u:u.content==="encoding"?$F(n,o,i,t):{signal:s}})}}function BF(e,t,n,{reactiveGeom:r}={}){let i=x(x({},n),n.tooltipFormat),o={},a=r?"datum.datum":"datum",s=[];function c(u,f){let d=wo(f),p=En(u)?u:k(x({},u),{type:e[d].type}),h=p.title||xh(p,i),m=te(h).join(", ").replaceAll(/"/g,'\\"'),g;if(xt(f)){let v=f==="x"?"x2":"y2",y=li(e[v]);if(an(p.bin)&&y){let C=K(p,{expr:a}),b=K(y,{expr:a}),{format:M,formatType:S}=Of(p);g=H0(C,b,M,S,i),o[v]=!0}}if((xt(f)||f===ii||f===Ni)&&t&&t.fieldChannel===f&&t.offset==="normalize"){let{format:v,formatType:y}=Of(p);g=If({fieldOrDatumDef:p,format:v,formatType:y,expr:a,config:i,normalizeStack:!0}).signal}g??(g=Xf(p,i,a).signal),s.push({channel:f,key:m,value:g})}bh(e,(u,f)=>{Y(u)?c(u,f):Rf(u)&&c(u.condition,f)});let l={};for(let{channel:u,key:f,value:d}of s)!o[u]&&!l[f]&&(l[f]=d);return l}function $F(e,t,n,{reactiveGeom:r}={}){let i=BF(e,t,n,{reactiveGeom:r}),o=$1(i).map(([a,s])=>`"${a}": ${s}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function UF(e){let{markDef:t,config:n}=e,r=Be("aria",t,n);return r===!1?{}:x(x(x({},r?{aria:r}:{}),Cke(e)),bke(e))}function Cke(e){let{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};let i=Be("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in Are?{}:{ariaRoleDescription:{value:t}}}function bke(e){let{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Q1(e,o,"description",c=>Xf(c,e.config));let a=Be("description",n,r);if(a!=null)return{description:tt(a)};if(r.aria===!1)return{};let s=BF(t,i,r);if(!We(s))return{description:{signal:$1(s).map(([c,l],u)=>`"${u>0?"; ":""}${c}: " + (${l})`).join(" + ")}}}function qt(e,t,n={}){let{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n,{defaultRef:s,defaultValue:c}=n;s===void 0&&(c??(c=Be(e,r,o,{vgChannel:a,ignoreVgConfig:!0})),c!==void 0&&(s=tt(c)));let l=i[e];return Q1(t,l,a??e,u=>gh({channel:e,channelDef:u,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s}))}function Kf(e,t={filled:void 0}){let{markDef:n,encoding:r,config:i}=e,{type:o}=n,a=t.filled??Be("filled",n,i),s=Ae(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,c=Be(a===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[a===!0&&"color"]??s,l=Be(a===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[a===!1&&"color"],u=a?"fill":"stroke",f=x(x({},c?{fill:tt(c)}:{}),l?{stroke:tt(l)}:{});return n.color&&(a?n.fill:n.stroke)&&U(O.droppingColor("property",{fill:"fill"in n,stroke:"stroke"in n})),x(x(x(x({},f),qt("color",e,{vgChannel:u,defaultValue:a?c:l})),qt("fill",e,{defaultValue:r.fill?c:void 0})),qt("stroke",e,{defaultValue:r.stroke?l:void 0}))}function hoe(e){let{encoding:t,mark:n}=e,r=t.order;return!Fi(n)&&cr(r)?Q1(e,r,"zindex",i=>tt(i.value)):{}}function Yc({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){let o=`${e}Offset`,a=t[o],s=n[o];if((o==="xOffset"||o==="yOffset")&&s)return{offsetType:"encoding",offset:gh({channel:o,channelDef:s,markDef:t,config:r?.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:tt(a),bandPosition:i})};let c=t[o];return c?{offsetType:"visual",offset:c}:{}}function yn(e,t,{defaultPos:n,vgChannel:r}){let{encoding:i,markDef:o,config:a,stack:s}=t,c=i[e],l=i[Ir(e)],u=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:p}=Yc({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),h=Vh({model:t,defaultPos:n,channel:e,scaleName:u,scale:f}),m=!c&&xt(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Mke({channel:e,channelDef:c,channel2Def:l,markDef:o,config:a,scaleName:u,scale:f,stack:s,offset:d,defaultRef:h,bandPosition:p==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function Mke(e){let{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(ke(n)&&i&&t===i.fieldChannel){if(Y(n)){let s=n.bandPosition;if(s===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(s=.5),s!==void 0)return kf({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:s,offset:o})}return hs(n,r,{suffix:"end"},{offset:o})}return Tf(e)}function Vh({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){let{markDef:o,config:a}=e;return()=>{let s=wo(n),c=o2(n),l=Be(n,o,a,{vgChannel:c});if(l!==void 0)return z0(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){let u=i.get("type");if(!Ae([Or.LOG,Or.TIME,Or.UTC],u)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return s==="y"?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{let u=e[Sn(n)];return k(x({},u),{mult:.5})}}}}var wke={left:"x",center:"xc",right:"x2"},Ske={top:"y",middle:"yc",bottom:"y2"};function VM(e,t,n,r="middle"){if(e==="radius"||e==="theta")return o2(e);let i=e==="x"?"align":"baseline",o=Be(i,t,n),a;return ae(o)?(U(O.rangeMarkAlignmentCannotBeExpression(i)),a=void 0):a=o,e==="x"?wke[a||(r==="top"?"left":"center")]:Ske[a||r]}function A4(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Nh(e,t,{defaultPos:n,defaultPos2:r}):yn(e,t,{defaultPos:n})}function Nh(e,t,{defaultPos:n,defaultPos2:r}){let{markDef:i,config:o}=t,a=Ir(e),s=Sn(e),c=Eke(t,r,a),l=c[s]?VM(e,i,o):o2(e);return x(x({},yn(e,t,{defaultPos:n,vgChannel:l})),c)}function Eke(e,t,n){let{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,c=wo(n),l=Sn(n),u=o2(n),f=r[c],d=e.scaleName(c),p=e.getScaleComponent(c),{offset:h}=n in r||n in o?Yc({channel:n,markDef:o,encoding:r,model:e}):Yc({channel:c,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){let g=Sn(n),v=e.markDef[g];return v!=null?{[g]:{value:v}}:{[u]:{field:e.getName(n)}}}let m=Dke({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:s,scaleName:d,scale:p,stack:a,offset:h,defaultRef:void 0});return m!==void 0?{[u]:m}:NM(n,o)||NM(n,{[n]:ah(n,o,s.style),[l]:ah(l,o,s.style)})||NM(n,s[i])||NM(n,s.mark)||{[u]:Vh({model:e,defaultPos:t,channel:n,scaleName:d,scale:p})()}}function Dke({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:c,defaultRef:l}){return ke(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?hs(t,o,{suffix:"start"},{offset:c}):Tf({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:c,defaultRef:l})}function NM(e,t){let n=Sn(e),r=o2(e);if(t[r]!==void 0)return{[r]:z0(e,t[r])};if(t[e]!==void 0)return{[r]:z0(e,t[e])};if(t[n]){let i=t[n];if(ps(i))U(O.relativeBandSizeNotSupported(n));else return{[n]:z0(e,i)}}}function K1(e,t){let{config:n,encoding:r,markDef:i}=e,o=i.type,a=Ir(t),s=Sn(t),c=r[t],l=r[a],u=e.getScaleComponent(t),f=u?u.get("type"):void 0,d=i.orient,p=r[s]??r.size??Be("size",i,n,{vgChannel:s}),h=II(t),m=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Y(c)&&(et(c.bin)||an(c.bin)||c.timeUnit&&!l)&&!(p&&!ps(p))&&!r[h]&&!Pt(f)?Lke({fieldDef:c,fieldDef2:l,channel:t,model:e}):(ke(c)&&Pt(f)||m)&&!l?Hke(c,t,e):Nh(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function zke(e,t,n,r,i,o,a){if(ps(i))if(n){let c=n.get("type");if(c==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);let u=Eo("minBandSize",{type:a},r);return{signal:u?`max(${h1(u)}, ${l})`:l}}else i.band!==1&&(U(O.cannotUseRelativeBandSizeWithNonBandScale(c)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(ae(i))return i;if(i)return{value:i}}if(n){let c=n.get("range");if(Ii(c)&&Oe(c.step))return{value:c.step-2}}if(!o){let{bandPaddingInner:c,barBandPaddingInner:l,rectBandPaddingInner:u}=r.scale,f=ot(c,a==="bar"?l:u);if(ae(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Oe(f))return{signal:`${1-f} * ${e}`}}return{value:L0(r.view,e)-2}}function Hke(e,t,n){let{markDef:r,encoding:i,config:o,stack:a}=n,s=r.orient,c=n.scaleName(t),l=n.getScaleComponent(t),u=Sn(t),f=Ir(t),d=II(t),p=n.scaleName(d),h=n.getScaleComponent(Ef(t)),m=s==="horizontal"&&t==="y"||s==="vertical"&&t==="x",g;(i.size||r.size)&&(m?g=qt("size",n,{vgChannel:u,defaultRef:tt(r.size)}):U(O.cannotApplySizeToNonOrientedMark(r.type)));let v=!!g,y=aF({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(l||h)?.get("type"),useVlSizeChannel:m});g=g||{[u]:zke(u,p||c,h||l,o,y,!!e,r.type)};let C=(l||h)?.get("type")==="band"&&ps(y)&&!v?"top":"middle",b=VM(t,r,o,C),M=b==="xc"||b==="yc",{offset:S,offsetType:w}=Yc({channel:t,markDef:r,encoding:i,model:n,bandPosition:M?.5:0}),E=Tf({channel:t,channelDef:e,markDef:r,config:o,scaleName:c,scale:l,stack:a,offset:S,defaultRef:Vh({model:n,defaultPos:"mid",channel:t,scaleName:c,scale:l}),bandPosition:M?w==="encoding"?0:.5:ae(y)?{signal:`(1-${y})/2`}:ps(y)?(1-y.band)/2:0});if(u)return x({[b]:E},g);{let D=o2(f),L=g[u],A=S?k(x({},L),{offset:S}):L;return{[b]:E,[D]:F(E)?[E[0],k(x({},E[1]),{offset:A})]:k(x({},E),{offset:A})}}}function moe(e,t,n,r,i,o,a){if(NI(e))return 0;let s=e==="x"||e==="y2",c=s?-t/2:t/2;if(ae(n)||ae(i)||ae(r)||o){let l=h1(n),u=h1(i),f=h1(r),d=h1(o),h=o?`(${a} < ${d} ? ${s?"":"-"}0.5 * (${d} - (${a})) : ${c})`:c,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",v=u?`(${u} + ${h})`:h;return{signal:m+g+v}}else return i=i||0,r+(n?-i-c:+i+c)}function Lke({fieldDef:e,fieldDef2:t,channel:n,model:r}){let{config:i,markDef:o,encoding:a}=r,s=r.getScaleComponent(n),c=r.scaleName(n),l=s?s.get("type"):void 0,u=s.get("reverse"),f=aF({channel:n,fieldDef:e,markDef:o,config:i,scaleType:l}),p=r.component.axes[n]?.[0]?.get("translate")??.5,h=xt(n)?Be("binSpacing",o,i)??0:0,m=Ir(n),g=o2(n),v=o2(m),y=Eo("minBandSize",o,i),{offset:C}=Yc({channel:n,markDef:o,encoding:a,model:r,bandPosition:0}),{offset:b}=Yc({channel:m,markDef:o,encoding:a,model:r,bandPosition:0}),M=Die({fieldDef:e,scaleName:c}),S=moe(n,h,u,p,C,y,M),w=moe(m,h,u,p,b??C,y,M),E=ae(f)?{signal:`(1-${f.signal})/2`}:ps(f)?(1-f.band)/2:.5,D=W1({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(et(e.bin)||e.timeUnit){let L=e.timeUnit&&D!==.5;return{[v]:goe({fieldDef:e,scaleName:c,bandPosition:E,offset:w,useRectOffsetField:L}),[g]:goe({fieldDef:e,scaleName:c,bandPosition:ae(E)?{signal:`1-${E.signal}`}:1-E,offset:S,useRectOffsetField:L})}}else if(an(e.bin)){let L=hs(e,c,{},{offset:w});if(Y(t))return{[v]:L,[g]:hs(t,c,{},{offset:S})};if(na(e.bin)&&e.bin.step)return{[v]:L,[g]:{signal:`scale("${c}", ${K(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}U(O.channelRequiredForBinned(m))}function goe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return kf(x({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r},i?{startSuffix:V0,endSuffix:N0}:{}))}var Ake=new Set(["aria","width","height"]);function xn(e,t){let{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Kf(e):{};return x(x(x(x(x(x(x(x(x(x(x(x({},Vke(e.markDef,t)),voe(e,"fill",n)),voe(e,"stroke",r)),qt("opacity",e)),qt("fillOpacity",e)),qt("strokeOpacity",e)),qt("strokeWidth",e)),qt("strokeDash",e)),hoe(e)),Qf(e)),L4(e,"href")),UF(e))}function voe(e,t,n){let{config:r,mark:i,markDef:o}=e;if(Be("invalid",o,r)==="hide"&&n&&!Fi(i)){let s=Nke(e,{invalid:!0,channels:b4});if(s)return{[t]:[{test:s,value:null},...te(n)]}}return n?{[t]:n}:{}}function Vke(e,t){return Lre.reduce((n,r)=>(!Ake.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=tt(e[r])),n),{})}function Nke(e,{invalid:t=!1,channels:n}){let r=n.reduce((o,a)=>{let s=e.getScaleComponent(a);if(s){let c=s.get("type"),l=e.vgField(a,{expr:"datum"});l&&On(c)&&(o[l]=!0)}return o},{}),i=R(r);if(i.length>0){let o=t?"||":"&&";return i.map(a=>mh(a,t)).join(` ${o} `)}}function Zf(e){let{config:t,markDef:n}=e;if(Be("invalid",n,t)){let i=_ke(e,{channels:xr});if(i)return{defined:{signal:i}}}return{}}function _ke(e,{invalid:t=!1,channels:n}){let r=n.reduce((o,a)=>{let s=e.getScaleComponent(a);if(s){let c=s.get("type"),l=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});l&&On(c)&&(o[l]=!0)}return o},{}),i=R(r);if(i.length>0){let o=t?"||":"&&";return i.map(a=>mh(a,t)).join(` ${o} `)}}function _M(e,t){if(t!==void 0)return{[e]:tt(t)}}var jF="voronoi",kke={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(let n of t.events)n.markname=e.getName(jF)},marks:(e,t,n)=>{let{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Fi(o))return U(O.nearestNotSupportForContinuous(o)),n;let a={name:e.getName(jF),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:x({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},Qf(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},s=0,c=!1;return n.forEach((l,u)=>{let f=l.name??"";f===e.component.mark[0].name?s=u:f.indexOf(jF)>=0&&(c=!0)}),c||n.splice(s+1,0,a),n}},kM=kke;var Tke={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Sh(e.bind),parse:(e,t,n)=>IM(t,n),topLevelSignals:(e,t,n)=>{let r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],s=kM.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((c,l)=>{let u=ut(`${r}_${c.field}`);n.filter(d=>d.name===u).length||n.unshift(k(x({name:u},a?{init:qc(a[l])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${Z(c.field)}] : null`}]:[],bind:o[c.field]??o[c.channel]??o}))}),n},signals:(e,t,n)=>{let r=t.name,i=t.project,o=n.filter(l=>l.name===r+g1)[0],a=r+Gc,s=i.items.map(l=>ut(`${r}_${l.field}`)),c=s.map(l=>`${l} !== null`).join(" && ");return s.length&&(o.update=`${c} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},TM=Tke;var Jf="_toggle",Ike={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Jf,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{let n=t.name+g1,r=t.name+Jf;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${fa(e)}}, `)+`${r} ? ${n} : null`}},FM=Ike;var Fke={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Q(t.clear)?Ai(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(TM.defined(t))for(let r of t.project.items){let i=n.findIndex(o=>o.name===ut(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(let i of t.project.items){let o=n.findIndex(a=>a.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){let a=n.findIndex(s=>s.name===i.signals.data);r(a,"null")}}else{let i=n.findIndex(o=>o.name===t.name+g1);r(i,"null"),FM.defined(t)&&(i=n.findIndex(o=>o.name===t.name+Jf),r(i,"false"))}return n}},yoe=Fke;var xoe={defined:e=>{let t=e.resolve==="global"&&e.bind&&Sh(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ui;return t&&!n&&U(O.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),t&&n},parse:(e,t,n)=>{let r=le(n);if(r.select=Q(r.select)?{type:r.select,toggle:t.toggle}:k(x({},r.select),{toggle:t.toggle}),IM(t,r),ne(n.select)&&(n.select.on||n.select.clear)){let a='event.item && indexof(event.item.mark.role, "legend") < 0';for(let s of t.events)s.filter=te(s.filter??[]),s.filter.includes(a)||s.filter.push(a)}let i=dM(t.bind)?t.bind.legend:"click",o=Q(i)?Ai(i,"view"):te(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{let r=t.name,i=dM(t.bind)&&t.bind.legend,o=a=>s=>{let c=le(s);return c.markname=a,c};for(let a of t.project.items){if(!a.hasLegend)continue;let s=`${ut(a.field)}_legend`,c=`${r}_${s}`;if(n.filter(u=>u.name===c).length===0){let u=i.merge.map(o(`${s}_symbols`)).concat(i.merge.map(o(`${s}_labels`))).concat(i.merge.map(o(`${s}_entries`)));n.unshift(k(x({name:c},t.init?{}:{value:null}),{on:[{events:u,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${c}`,force:!0}]}))}}return n},signals:(e,t,n)=>{let r=t.name,i=t.project,o=n.find(d=>d.name===r+g1),a=r+Gc,s=i.items.filter(d=>d.hasLegend).map(d=>ut(`${r}_${ut(d.field)}_legend`)),l=`${s.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map(d=>({signal:d})),update:l}):s.length>0&&(o.update=l,delete o.value,delete o.on);let u=n.find(d=>d.name===r+Jf),f=dM(t.bind)&&t.bind.legend;return u&&(t.events?u.on.push(k(x({},u.on[0]),{events:f})):u.on[0].events=f),n}},Coe=xoe;function boe(e,t,n){let r=e.fieldDef(t)?.field;for(let i of rn(e.component.selection??{})){let o=i.project.hasField[r]??i.project.hasChannel[t];if(o&&xoe.defined(i)){let a=n.get("selections")??[];a.push(i.name),n.set("selections",a,!1),o.hasLegend=!0}}}var woe="_translate_anchor",Soe="_translate_delta",Rke={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{let r=t.name,i=zo.defined(t),o=r+woe,{x:a,y:s}=t.project.hasChannel,c=Ai(t.translate,"scope");return i||(c=c.map(l=>(l.between[0].markname=r+Wc,l))),n.push({name:o,value:{},on:[{events:c.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?`, extent_x: ${i?Lh(e,yt):`slice(${a.signals.visual})`}`:"")+(s!==void 0?`, extent_y: ${i?Lh(e,on):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+Soe,value:{},on:[{events:c,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),a!==void 0&&Moe(e,t,a,"width",n),s!==void 0&&Moe(e,t,s,"height",n),n}},Eoe=Rke;function Moe(e,t,n,r,i){let o=t.name,a=o+woe,s=o+Soe,c=n.channel,l=zo.defined(t),u=i.filter(M=>M.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(c),p=d&&d.get("type"),h=d&&d.get("reverse"),m=l?c===yt?h?"":"-":h?"-":"":"",g=`${a}.extent_${c}`,v=`${m}${s}.${c} / ${l?`${f}`:`span(${g})`}`,y=!l||!d?"panLinear":p==="log"?"panLog":p==="symlog"?"panSymlog":p==="pow"?"panPow":"panLinear",C=l?p==="pow"?`, ${d.get("exponent")??1}`:p==="symlog"?`, ${d.get("constant")??1}`:"":"",b=`${y}(${g}, ${v}${C})`;u.on.push({events:{signal:s},update:l?b:`clampRange(${b}, 0, ${f})`})}var zoe="_zoom_anchor",Hoe="_zoom_delta",Oke={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{let r=t.name,i=zo.defined(t),o=r+Hoe,{x:a,y:s}=t.project.hasChannel,c=Z(e.scaleName(yt)),l=Z(e.scaleName(on)),u=Ai(t.zoom,"scope");return i||(u=u.map(f=>(f.markname=r+Wc,f))),n.push({name:r+zoe,on:[{events:u,update:i?"{"+[c?`x: invert(${c}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:u,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&Doe(e,t,a,"width",n),s!==void 0&&Doe(e,t,s,"height",n),n}},Loe=Oke;function Doe(e,t,n,r,i){let o=t.name,a=n.channel,s=zo.defined(t),c=i.filter(y=>y.name===n.signals[s?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,u=e.getScaleComponent(a),f=u&&u.get("type"),d=s?Lh(e,a):c.name,p=o+Hoe,h=`${o}${zoe}.${a}`,m=!s||!u?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=s?f==="pow"?`, ${u.get("exponent")??1}`:f==="symlog"?`, ${u.get("constant")??1}`:"":"",v=`${m}(${d}, ${h}, ${p}${g})`;c.on.push({events:{signal:p},update:s?v:`clampRange(${v}, 0, ${l})`})}var ua="_store",g1="_tuple",roe="_modify";var HM="vlSelectionResolve",Yf=[poe,doe,coe,FM,TM,zo,Coe,yoe,Eoe,Loe,kM];function Pke(e){let t=e.parent;for(;t&&!$r(t);)t=t.parent;return t}function fa(e,{escape:t}={escape:!0}){let n=t?Z(e.name):e.name,r=Pke(e);if(r){let{facet:i}=r;for(let o of Tr)i[o]&&(n+=` + '__facet_${o}_' + (facet[${Z(r.vgField(o))}])`)}return n}function _h(e){return rn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function IM(e,t){(Q(t.select)||!t.select.on)&&delete e.events,(Q(t.select)||!t.select.clear)&&delete e.clear,(Q(t.select)||!t.select.toggle)&&delete e.toggle}function qF(e){let t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...qF(e.object)),t.push(...qF(e.property))),t)}function Aoe(e){return e.object.type==="MemberExpression"?Aoe(e.object):e.object.name==="datum"}function RM(e){let t=cf(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&Aoe(r)&&n.add(qF(r).slice(1).join("."))}),n}var bs=class e extends He{clone(){return new e(null,this.model,le(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=_0(this.model,this.filter,this),this._dependentFields=RM(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}};function Voe(e,t){let n={},r=e.config.selection;if(!t||!t.length)return n;for(let i of t){let o=ut(i.name),a=i.select,s=Q(a)?a:a.type,c=ne(a)?le(a):{type:s},l=r[s];for(let d in l)d==="fields"||d==="encodings"||(d==="mark"&&(c[d]=x(x({},l[d]),c[d])),(c[d]===void 0||c[d]===!0)&&(c[d]=le(l[d]??c[d])));let u=n[o]=k(x({},c),{name:o,type:s,init:i.value,bind:i.bind,events:Q(c.on)?Ai(c.on,"scope"):te(le(c.on))}),f=le(i);for(let d of Yf)d.defined(u)&&d.parse&&d.parse(e,u,f)}return n}function AM(e,t,n,r="datum"){let i=Q(t)?t:t.param,o=ut(i),a=Z(o+ua),s;try{s=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(s.project.timeUnit){let d=n??e.component.data.raw,p=s.project.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p}let c=s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=s.resolve==="global"?")":`, ${Z(s.resolve)})`,u=`${c}${a}, ${r}${l}`,f=`length(data(${a}))`;return t.empty===!1?`${f} && ${u}`:`!${f} || ${u}`}function LM(e,t,n){let r=ut(t),i=n.encoding,o=n.field,a;try{a=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=a.project.items[0].field,a.project.items.length>1&&U(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Z(o)}.`);else if(i&&!o){let s=a.project.items.filter(c=>c.channel===i);!s.length||s.length>1?(o=a.project.items[0].field,U((s.length?"Multiple ":"No ")+`matching ${Z(i)} encoding found for selection ${Z(n.param)}. Using "field": ${Z(o)}.`)):o=s[0].field}return`${a.name}[${Z(ar(o))}]`}function Noe(e,t){for(let[n,r]of $1(e.component.selection??{})){let i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Dn(new bs(t,e,{param:n}),i,Ct.Lookup,e.component.data.outputNodeRefCounts)}}function _0(e,t,n){return yf(t,r=>Q(r)?r:Xre(r)?AM(e,r,n):Fb(r))}function $ke(e,t){if(e)return F(e)&&!ra(e)?e.map(n=>xh(n,t)).join(", "):e}function GF(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function e8(e,t,n,r={header:!1}){let f=e.combine(),{disable:i,orient:o,scale:a,labelExpr:s,title:c,zindex:l}=f,u=ie(f,["disable","orient","scale","labelExpr","title","zindex"]);if(!i){for(let p in u){let h=Pie[p],m=u[p];if(h&&h!==t&&h!=="both")delete u[p];else if($c(m)){let d=m,{condition:g}=d,v=ie(d,["condition"]),y=te(g),C=uF[p];if(C){let{vgProp:b,part:M}=C,S=[...y.map(w=>{let L=w,{test:E}=L,D=ie(L,["test"]);return x({test:_0(null,E)},D)}),v];GF(u,M,b,S),delete u[p]}else if(C===null){let b={signal:y.map(M=>{let E=M,{test:S}=E,w=ie(E,["test"]);return`${_0(null,S)} ? ${$I(w)} : `}).join("")+$I(v)};u[p]=b}}else if(ae(m)){let g=uF[p];if(g){let{vgProp:v,part:y}=g;GF(u,y,v,m),delete u[p]}}Ae(["labelAlign","labelBaseline"],p)&&u[p]===null&&delete u[p]}if(t==="grid"){if(!u.grid)return;if(u.encode){let{grid:p}=u.encode;u.encode=x({},p?{grid:p}:{}),We(u.encode)&&delete u.encode}return k(x({scale:a,orient:o},u),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ot(l,0)})}else{if(!r.header&&e.mainExtracted)return;if(s!==void 0){let h=s;u.encode?.labels?.update&&ae(u.encode.labels.update.text)&&(h=Z2(s,"datum.label",u.encode.labels.update.text.signal)),GF(u,"labels","text",{signal:h})}if(u.labelAlign===null&&delete u.labelAlign,u.encode){for(let h of tM)e.hasAxisPart(h)||delete u.encode[h];We(u.encode)&&delete u.encode}let p=$ke(c,n);return k(x(x(x({scale:a,orient:o,grid:!1},p?{title:p}:{}),u),n.aria===!1?{aria:!1}:{}),{zindex:ot(l,0)})}}}function OM(e){let{axes:t}=e.component,n=[];for(let r of xr)if(t[r]){for(let i of t[r])if(!i.get("disable")&&!i.get("gridScale")){let o=r==="x"?"height":"width",a=e.getSizeSignalRef(o).signal;o!==a&&n.push({name:o,update:a})}}return n}function _oe(e,t){let{x:n=[],y:r=[]}=e;return[...n.map(i=>e8(i,"grid",t)),...r.map(i=>e8(i,"grid",t)),...n.map(i=>e8(i,"main",t)),...r.map(i=>e8(i,"main",t))].filter(i=>i)}function koe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){let o=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},s=t[n==="x"?"axisTop":"axisRight"]||{},c=new Set([...R(a),...R(s)]),l={};for(let u of c.values())l[u]={signal:`${r.signal} === "${o}" ? ${h1(a[u])} : ${h1(s[u])}`};return l}return t[i]})])}function Toe(e,t,n,r){let i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:JI(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",a=ae(n)?"axisOrient":`axis${v4(n)}`,s=[...i,...i.map(l=>o+l.substr(4))],c=["axis",a,o];return{vlOnlyAxisConfig:koe(s,r,e,n),vgAxisConfig:koe(c,r,e,n),axisConfigStyle:Bke([...c,...s],r)}}function Bke(e,t){let n=[{}];for(let r of e){let i=t[r]?.style;if(i){i=te(i);for(let o of i)n.push(t.style[o])}}return Object.assign.apply(null,n)}function kh(e,t,n,r={}){let i=UI(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(let o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(r[o]?.[e]!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}var YF={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Uke(n,e),gridScale:({model:e,channel:t})=>jke(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||QF(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||XF(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??qke(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Gke(t.type,n,Y(t)&&!!t.timeUnit,Y(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{let o=e==="x"?"width":e==="y"?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??Wke({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},tickMinStep:Yke,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;let r=KF(t,n);if(r!==void 0)return r;let i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",a=t.fieldDef(o);return jI(i?[oF(i)]:[],Y(a)?[oF(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Xke(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Qke(n,t)};function Uke(e,t){return!Pt(e)&&Y(t)&&!et(t?.bin)&&!an(t?.bin)}function jke(e,t){let n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Ioe(e,t,n,r,i){let o=t?.labelAngle;if(o!==void 0)return ae(o)?o:y4(o);{let{configValue:a}=kh("labelAngle",r,t?.style,i);return a!==void 0?y4(a):n===yt&&Ae([lh,ch],e.type)&&!(Y(e)&&e.timeUnit)?270:void 0}}function WF(e){return`(((${e.signal} % 360) + 360) % 360)`}function XF(e,t,n,r){if(e!==void 0)if(n==="x"){if(ae(e)){let i=WF(e),o=ae(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(ae(t)){let i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(ae(e)){let i=WF(e),o=ae(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(ae(t)){let i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function QF(e,t,n){if(e===void 0)return;let r=n==="x",i=r?0:90,o=r?"bottom":"left";if(ae(e)){let a=WF(e),s=ae(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${a} + 90)`:a} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${s} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(ae(t)){let a=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${a} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function qke(e,t){if(t==="x"&&Ae(["quantitative","temporal"],e))return!0}function Gke(e,t,n,r){if(n&&!ne(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Foe(e){return e==="x"?"bottom":"left"}function Wke({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){if(!r&&!Pt(t)&&t!=="log"){if(Y(e)){if(et(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ae(["month","hours","day","quarter"],sn(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Yke({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Y(t)){let{timeUnit:n}=t;if(n){let r=Lb(n);if(r)return{signal:r}}}}function KF(e,t){let n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;if(o&&a)return qI(o,a);if(o)return o;if(a)return a;if(o!==void 0)return o;if(a!==void 0)return a}function Xke(e,t){let n=e.values;if(F(n))return eM(t,n);if(ae(n))return n}function Qke(e,t){return e==="rect"&&vh(t)?1:0}var k0=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=RM(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(l2(r)&&Wb(r.sort)){let{field:o,timeUnit:a}=r,s=r.sort,c=s.map((l,u)=>`${Fb({field:o,timeUnit:a,equal:l})} ? ${u} : `).join("")+s.length;t=new e(t,{calculate:c,as:Ms(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Ce(this.transform)}`}};function Ms(e,t,n){return K(e,x({prefix:t,suffix:"sort_index"},n??{}))}function t8(e,t){return Ae(["top","bottom"],t)?"column":Ae(["left","right"],t)||e==="row"?"row":"column"}function Xc(e,t,n,r){let i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ot((t||{})[e],i[e],n.header[e])}function Th(e,t,n,r){let i={};for(let o of e){let a=Xc(o,t||{},n,r);a!==void 0&&(i[o]=a)}return i}var n8=["row","column"],r8=["header","footer"];function Roe(e,t){let n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=Th(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),c=t8(t,s),l=y4(a);return{name:`${t}-title`,type:"group",role:`${c}-title`,title:x(x(x(k(x({text:n},t==="row"?{orient:"left"}:{}),{style:"guide-title"}),Poe(l,c)),Ooe(c,l,o)),Uoe(r,i,t,i1e,bF))}}function Ooe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}let r=QF(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Poe(e,t){let n=XF(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function $oe(e,t){let n=e.component.layoutHeaders[t],r=[];for(let i of r8)if(n[i])for(let o of n[i]){let a=Zke(e,t,i,n,o);a!=null&&r.push(a)}return r}function Kke(e,t){let{sort:n}=e;return Pr(n)?{field:K(n,{expr:"datum"}),order:n.order??"ascending"}:F(n)?{field:Ms(e,t,{expr:"datum"}),order:"ascending"}:{field:K(e,{expr:"datum"}),order:n??"ascending"}}function PM(e,t,n){let{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:c}=Th(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=If({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,u=t8(t,s);return x(x(x(k(x({text:{signal:c?Z2(Z2(c,"datum.label",l),"datum.value",K(e,{expr:"parent"})):l}},t==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),Poe(o,u)),Ooe(u,o,a)),Uoe(n,e,t,o1e,MF))}function Zke(e,t,n,r,i){if(i){let o=null,{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){let{labelOrient:f}=Th(["labelOrient"],a.header,s,t);(t==="row"&&!Ae(["top","bottom"],f)||t==="column"&&!Ae(["left","right"],f))&&(o=PM(a,t,s))}let c=$r(e)&&!vs(e.facet),l=i.axes,u=l?.length>0;if(o||u){let f=t==="row"?"height":"width";return x(x(x(x(x({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Kke(a,t)}:{}),u&&c?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{}),u?{axes:l}:{})}}return null}var Jke={column:{start:0,end:1},row:{start:1,end:0}};function eTe(e,t){return Jke[t][e]}function Boe(e,t){let n={};for(let r of Tr){let i=e[r];if(i?.facetFieldDef){let{titleAnchor:o,titleOrient:a}=Th(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),s=t8(r,a),c=eTe(o,s);c!==void 0&&(n[s]=c)}}return We(n)?void 0:n}function Uoe(e,t,n,r,i){let o={};for(let a of r){if(!i[a])continue;let s=Xc(a,t?.header,e,n);s!==void 0&&(o[i[a]]=s)}return o}function i8(e){return[...$M(e,"width"),...$M(e,"height"),...$M(e,"childWidth"),...$M(e,"childHeight")]}function $M(e,t){let n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];let i=e.getSizeSignalRef(t).signal;if(r==="step"){let o=e.getScaleComponent(n);if(o){let a=o.get("type"),s=o.get("range");if(Pt(a)&&Ii(s)){let c=e.scaleName(n);return $r(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[joe(c,s)]:[joe(c,s),{name:i,update:ZF(c,o,`domain('${c}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){let o=i.endsWith("width"),a=o?"containerSize()[0]":"containerSize()[1]",s=Dh(e.config.view,o?"width":"height"),c=`isFinite(${a}) ? ${a} : ${s}`;return[{name:i,init:c,on:[{update:c,events:"window:resize"}]}]}else return[{name:i,value:r}]}function joe(e,t){let n=`${e}_step`;return ae(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function ZF(e,t,n){let r=t.get("type"),i=t.get("padding"),o=ot(t.get("paddingOuter"),i),a=t.get("paddingInner");return a=r==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${h1(a)}, ${h1(o)}) * ${e}_step`}function BM(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function UM(e,t){return R(e).reduce((n,r)=>{let i=e[r];return x(x({},n),Q1(t,i,r,o=>tt(o.value)))},{})}function jM(e,t){if($r(t))return e==="theta"?"independent":"shared";if(d2(t))return"shared";if(a8(t))return xt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function o8(e,t){let n=e.scale[t],r=xt(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&U(O.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}var tTe=k(x({},SF),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),JF=R(tTe),qM=class extends Oi{};var eR={symbols:nTe,gradient:rTe,labels:iTe,entries:oTe};function nTe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;let{markDef:a,encoding:s,config:c,mark:l}=n,u=a.filled&&l!=="trail",f=x(x({},_re({},n,gie)),Kf(n,{filled:u})),d=i.get("symbolOpacity")??c.legend.symbolOpacity,p=i.get("symbolFillColor")??c.legend.symbolFillColor,h=i.get("symbolStrokeColor")??c.legend.symbolStrokeColor,m=d===void 0?qoe(s.opacity)??a.opacity:void 0;if(f.fill){if(r==="fill"||u&&r===Rn)delete f.fill;else if(f.fill.field)p?delete f.fill:(f.fill=tt(c.legend.symbolBaseFillColor??"black"),f.fillOpacity=tt(m??1));else if(F(f.fill)){let g=GM(s.fill??s.color)??a.fill??(u&&a.color);g&&(f.fill=tt(g))}}if(f.stroke){if(r==="stroke"||!u&&r===Rn)delete f.stroke;else if(f.stroke.field||h)delete f.stroke;else if(F(f.stroke)){let g=ot(GM(s.stroke||s.color),a.stroke,u?a.color:void 0);g&&(f.stroke={value:g})}}if(r!==p1){let g=Y(t)&&Woe(n,i,t);g?f.opacity=[x({test:g},tt(m??1)),tt(c.legend.unselectedOpacity)]:m&&(f.opacity=tt(m))}return f=x(x({},f),e),We(f)?void 0:f}function rTe(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;let{config:i,markDef:o,encoding:a}=t,s={},l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?qoe(a.opacity)||o.opacity:void 0;return l&&(s.opacity=tt(l)),s=x(x({},s),e),We(s)?void 0:s}function iTe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){let o=n.legend(r)||{},a=n.config,s=Y(t)?Woe(n,i,t):void 0,c=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:l,formatType:u}=o,f;gs(u)?f=Do({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:u,config:a}):l===void 0&&u===void 0&&a.customFormatTypes&&(t.type==="quantitative"&&a.numberFormatType?f=Do({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):t.type==="temporal"&&a.timeFormatType&&Y(t)&&t.timeUnit===void 0&&(f=Do({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));let d=x(x(x({},c?{opacity:c}:{}),f?{text:f}:{}),e);return We(d)?void 0:d}function oTe(e,{legendCmpt:t}){return t.get("selections")?.length?k(x({},e),{fill:{value:"transparent"}}):e}function qoe(e){return Goe(e,(t,n)=>Math.max(t,n.value))}function GM(e){return Goe(e,(t,n)=>ot(t,n.value))}function Goe(e,t){if(_ie(e))return te(e.condition).reduce(t,e.value);if(cr(e))return e.value}function Woe(e,t,n){let r=t.get("selections");if(!r?.length)return;let i=Z(n.field);return r.map(o=>`(!length(data(${Z(ut(o)+ua)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}var tR={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{let{format:r,formatType:i}=t;return jb(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{let{formatType:r}=e;return qb(r,t,n)},gradientLength:e=>{let{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??uTe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??fTe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??sTe(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>ys(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(_c(n)&&G1(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>aTe(t,e)};function aTe(e,t){let n=e.values;if(F(n))return eM(t,n);if(ae(n))return n}function sTe(e,t,n,r){if(t!=="shape"){let i=GM(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Xoe(e){let{legend:t}=e;return ot(t.type,cTe(e))}function cTe({channel:e,timeUnit:t,scaleType:n}){if(_c(e)){if(Ae(["quarter","month","day"],t))return"symbol";if(G1(n))return"gradient"}return"symbol"}function Qoe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??lTe(n,t)}function lTe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function uTe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){let{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:c}=e;if(G1(i))return n==="horizontal"?r==="top"||r==="bottom"?Yoe(t,"width",a,o):a:Yoe(t,"height",c,s)}function Yoe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function fTe(e){if(Ae(["quantile","threshold","log","symlog"],e))return"greedy"}function nR(e){let t=bt(e)?dTe(e):gTe(e);return e.component.legends=t,t}function dTe(e){let{encoding:t}=e,n={};for(let r of[Rn,...fM]){let i=It(t[r]);!i||!e.getScaleComponent(r)||r===wn&&Y(i)&&i.type===sa||(n[r]=mTe(e,r))}return n}function pTe(e,t){let n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function hTe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===r?.title)return!0}return e===(n||{})[t]}function mTe(e,t){let n=e.legend(t),{markDef:r,encoding:i,config:o}=e,a=o.legend,s=new qM({},pTe(e,t));boe(e,t,s);let c=n!==void 0?!n:a.disable;if(s.set("disable",c,n!==void 0),c)return s;n=n||{};let l=e.getScaleComponent(t).get("type"),u=It(i[t]),f=Y(u)?sn(u.timeUnit)?.unit:void 0,d=n.orient||o.legend.orient||"right",p=Xoe({legend:n,channel:t,timeUnit:f,scaleType:l}),h=Qoe({legend:n,legendType:p,orient:d,legendConfig:a}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:u,legendConfig:a,config:o,scaleType:l,orient:d,legendType:p,direction:h};for(let b of JF){if(p==="gradient"&&b.startsWith("symbol")||p==="symbol"&&b.startsWith("gradient"))continue;let M=b in tR?tR[b](m):n[b];if(M!==void 0){let S=hTe(M,b,n,e.fieldDef(t));(S||o.legend[b]===void 0)&&s.set(b,M,S)}}let g=n?.encoding??{},v=s.get("selections"),y={},C={fieldOrDatumDef:u,model:e,channel:t,legendCmpt:s,legendType:p};for(let b of["labels","legend","title","symbols","gradient","entries"]){let M=UM(g[b]??{},e),S=b in eR?eR[b](M,C):M;S!==void 0&&!We(S)&&(y[b]=k(x(x({},v?.length&&Y(u)?{name:`${ut(u.field)}_legend_${b}`}:{}),v?.length?{interactive:!!v}:{}),{update:S}))}return We(y)||s.set("encode",y,!!n?.encoding),s}function gTe(e){let{legends:t,resolve:n}=e.component;for(let r of e.children){nR(r);for(let i of R(r.component.legends))n.legend[i]=o8(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=rR(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(let r of R(t))for(let i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function rR(e,t){if(!e)return t.clone();let n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(let o of JF){let a=X1(e.getWithExplicit(o),t.getWithExplicit(o),o,"legend",(s,c)=>{switch(o){case"symbolType":return vTe(s,c);case"title":return zb(s,c);case"type":return i=!0,Pi("symbol")}return Wf(s,c,o,"legend")});e.setWithExplicit(o,a)}return i&&(e.implicit?.encode?.gradient&&nh(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&nh(e.explicit,["encode","gradient"])),e}function vTe(e,t){return t.value==="circle"?t:e}function yTe(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function WM(e){let t=e.component.legends,n={};for(let i of R(t)){let o=e.getScaleComponent(i),a=ft(o.get("domains"));if(n[a])for(let s of n[a])rR(s,t[i])||n[a].push(t[i]);else n[a]=[t[i].clone()]}return rn(n).flat().map(i=>xTe(i,e.config)).filter(i=>i!==void 0)}function xTe(e,t){let a=e.combine(),{disable:n,labelExpr:r,selections:i}=a,o=ie(a,["disable","labelExpr","selections"]);if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),o.encode?.symbols){let s=o.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!o.stroke&&(s.stroke={value:"transparent"});for(let c of fM)o[c]&&delete s[c]}if(o.title||delete o.title,r!==void 0){let s=r;o.encode?.labels?.update&&ae(o.encode.labels.update.text)&&(s=Z2(r,"datum.label",o.encode.labels.update.text.signal)),yTe(o,"labels","text",{signal:s})}return o}}function Koe(e){return d2(e)||a8(e)?CTe(e):Zoe(e)}function CTe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Zoe(e))}function Zoe(e){let t=e.component.projection;if(!t||t.merged)return[];let n=t.combine(),{name:r}=n;if(t.data){let i={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},o=t.data.reduce((a,s)=>{let c=ae(s)?s.signal:`data('${e.lookupDataSource(s)}')`;return Ae(a,c)||a.push(c),a},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[x({name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}else return[x({name:r,translate:{signal:"[width / 2, height / 2]"}},n)]}var Joe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];var Ih=class extends Oi{constructor(t,n,r,i){super(x({},n),{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}};function iR(e){e.component.projection=bt(e)?bTe(e):STe(e)}function bTe(e){if(e.hasProjection){let t=sr(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?MTe(e):void 0,o=new Ih(e.projectionName(!0),x(x({},sr(e.config.projection)??{}),t??{}),r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function MTe(e){let t=[],{encoding:n}=e;for(let r of[[ai,oi],[si,_i]])(It(n[r[0]])||It(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(wn)&&e.typedFieldDef(wn).type===sa&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ct.Main)),t}function wTe(e,t){let n=fb(Joe,i=>!!(!de(e.explicit,i)&&!de(t.explicit,i)||de(e.explicit,i)&&de(t.explicit,i)&&kr(e.get(i),t.get(i))));if(kr(e.size,t.size)){if(n)return e;if(kr(e.explicit,{}))return t;if(kr(t.explicit,{}))return e}return null}function STe(e){if(e.children.length===0)return;let t;for(let r of e.children)iR(r);let n=fb(e.children,r=>{let i=r.component.projection;if(i)if(t){let o=wTe(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){let r=e.projectionName(!0),i=new Ih(r,t.specifiedProjection,t.size,le(t.data));for(let o of e.children){let a=o.component.projection;a&&(a.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(a.get("name"),r),a.merged=!0)}return i}}function ETe(e,t,n,r){if(ms(t,n)){let i=bt(e)?e.axis(n)??e.legend(n)??{}:{},o=K(t,{expr:"datum"}),a=K(t,{expr:"datum",binSuffix:"end"});return{formulaAs:K(t,{binSuffix:"range",forAs:!0}),formula:H0(o,a,i.format,i.formatType,r)}}return{}}function t2e(e,t){return`${Mb(e)}_${t}`}function DTe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function s8(e,t,n){let r=Hf(n,void 0)??{},i=t2e(r,t);return e.getName(`${i}_bins`)}function zTe(e){return"as"in e}function e2e(e,t,n){let r,i;zTe(e)?r=Q(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[K(e,{forAs:!0}),K(e,{binSuffix:"end",forAs:!0})];let o=x({},Hf(t,void 0)),a=t2e(o,e.field),{signal:s,extentSignal:c}=DTe(n,a);if(zf(o.extent)){let u=o.extent;i=LM(n,u.param,u),delete o.extent}let l=x(x(x({bin:o,field:e.field,as:[r]},s?{signal:s}:{}),c?{extentSignal:c}:{}),i?{span:i}:{});return{key:a,binComponent:l}}var da=class e extends He{clone(){return new e(null,le(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){let r=n.reduceFieldDef((i,o,a)=>{if(En(o)&&et(o.bin)){let{key:s,binComponent:c}=e2e(o,o.bin,n);i[s]=x(x(x({},c),i[s]),ETe(n,o,a,n.config))}return i},{});return We(r)?null:new e(t,r)}static makeFromTransform(t,n,r){let{key:i,binComponent:o}=e2e(n,n.bin,r);return new e(t,{[i]:o})}merge(t,n){for(let r of R(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Vi([...this.bins[r].as,...t.bins[r].as],Ce)):this.bins[r]=t.bins[r];for(let r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(rn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(rn(this.bins).map(t=>t.field))}hash(){return`Bin ${Ce(this.bins)}`}assemble(){return rn(this.bins).flatMap(t=>{let n=[],[r,...i]=t.as,c=t.bin,{extent:o}=c,a=ie(c,["extent"]),s=x(x(x({type:"bin",field:ar(t.field),as:r,signal:t.signal},zf(o)?{extent:null}:{extent:o}),t.span?{span:{signal:`span(${t.span})`}}:{}),a);!o&&t.extentSignal&&(n.push({type:"extent",field:ar(t.field),signal:t.extentSignal}),s.extent={signal:t.extentSignal}),n.push(s);for(let l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:K({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}};function HTe(e,t,n,r){let i=bt(r)?r.encoding[Ir(t)]:void 0;if(En(n)&&bt(r)&&Kb(n,i,r.markDef,r.config)){e.add(K(n,{})),e.add(K(n,{suffix:"end"}));let{mark:o,markDef:a,config:s}=r,c=W1({fieldDef:n,markDef:a,config:s});Ic(o)&&c!==.5&&xt(t)&&(e.add(K(n,{suffix:V0})),e.add(K(n,{suffix:N0}))),n.bin&&ms(n,t)&&e.add(K(n,{binSuffix:"range"}))}else if(gb(t)){let o=mb(t);e.add(r.getName(o))}else e.add(K(n));return l2(n)&&sie(n.scale?.range)&&e.add(n.scale.range.field),e}function LTe(e,t){for(let n of R(t)){let r=t[n];for(let i of R(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}var Ho=class e extends He{clone(){return new e(null,new Set(this.dimensions),le(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(a=>{a.aggregate&&(r=!0)});let i={},o=new Set;return!r||(n.forEachFieldDef((a,s)=>{let{aggregate:c,field:l}=a;if(c)if(c==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([K(a,{forAs:!0})]);else{if(So(c)||a2(c)){let u=So(c)?"argmin":"argmax",f=c[u];i[f]??(i[f]={}),i[f][u]=new Set([K({op:u,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][c]=new Set([K(a,{forAs:!0})]);Fr(s)&&n.scaleDomain(s)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([K({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([K({field:l,aggregate:"max"},{forAs:!0})]))}else HTe(o,s,a,n)}),o.size+R(i).length===0)?null:new e(t,o,i)}static makeFromTransform(t,n){let r=new Set,i={};for(let o of n.aggregate){let{op:a,field:s,as:c}=o;a&&(a==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([c||K(o,{forAs:!0})])):(i[s]??(i[s]={}),i[s][a]=new Set([c||K(o,{forAs:!0})])))}for(let o of n.groupby??[])r.add(o);return r.size+R(i).length===0?null:new e(t,r,i)}merge(t){return HI(this.dimensions,t.dimensions)?(LTe(this.measures,t.measures),!0):(Fre("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...R(this.measures)])}producedFields(){let t=new Set;for(let n of R(this.measures))for(let r of R(this.measures[n])){let i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Ce({dimensions:this.dimensions,measures:this.measures})}`}assemble(){let t=[],n=[],r=[];for(let o of R(this.measures))for(let a of R(this.measures[o]))for(let s of this.measures[o][a])r.push(s),t.push(a),n.push(o==="*"?null:ar(o));return{type:"aggregate",groupby:[...this.dimensions].map(ar),ops:t,fields:n,as:r}}};var h2=class extends He{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(let o of Tr){let a=n.facet[o];if(a){let{bin:s,sort:c}=a;this[o]=x({name:n.getName(`${o}_domain`),fields:[K(a),...et(s)?[K(a,{binSuffix:"end"})]:[]]},Pr(c)?{sortField:c}:F(c)?{sortIndexField:Ms(a,o)}:{})}}this.childModel=n.child}hash(){let t="Facet";for(let n of Tr)this[n]&&(t+=` ${n.charAt(0)}:${Ce(this[n])}`);return t}get fields(){let t=[];for(let n of Tr)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){let t=new Set(this.fields);for(let n of Tr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){let t={};for(let n of xr){let r=this.childModel.component.scales[n];if(r&&!r.merged){let i=r.get("type"),o=r.get("range");if(Pt(i)&&Ii(o)){let a=V4(this.childModel,n),s=c8(a);s?t[n]=s:U(O.unknownField(n))}}}return t}assembleRowColumnHeaderData(t,n,r){let i={row:"y",column:"x",facet:void 0}[t],o=[],a=[],s=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),a.push("max")):(o.push(r[i]),a.push("distinct")),s.push(`distinct_${r[i]}`));let{sortField:c,sortIndexField:l}=this[t];if(c){let{op:u=w4,field:f}=c;o.push(f),a.push(u),s.push(K(c,{forAs:!0}))}else l&&(o.push(l),a.push("max"),s.push(l));return{name:this[t].name,source:n??this.data,transform:[x({type:"aggregate",groupby:this[t].fields},o.length?{fields:o,ops:a,as:s}:{})]}}assembleFacetHeaderData(t){let{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(let c of n8){for(let l of r8){let u=(r[c]&&r[c][l])??[];for(let f of u)if(f.axes?.length>0){o[c]=!0;break}}if(o[c]){let l=`length(data("${this.facet.name}"))`,u=c==="row"?n?{signal:`ceil(${l} / ${n})`}:1:n?{signal:`min(${l}, ${n})`}:{signal:l};i.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:u}]})}}let{row:a,column:s}=o;return(a||s)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){let t=[],n=null,r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:a}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;let s=[].concat(r.x??[],r.y??[]),c=s.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:c}]})}for(let s of[U1,B1])this[s]&&t.push(this.assembleRowColumnHeaderData(s,n,r));if(a){let s=this.assembleFacetHeaderData(r);s&&t.push(...s)}return t}};function n2e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function ATe(e,t){let n=rh(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){let r=n2e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){let r=n2e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return U(O.unrecognizedParse(t)),null}function r2e(e){let t={};return th(e.filter,n=>{if(KI(n)){let r=null;Ab(n)?r=Rr(n.equal):Nb(n)?r=Rr(n.lte):Vb(n)?r=Rr(n.lt):_b(n)?r=Rr(n.gt):kb(n)?r=Rr(n.gte):Tb(n)?r=n.range[0]:Ib(n)&&(r=(n.oneOf??n.in)[0]),r&&(s2(r)?t[n.field]="date":Oe(r)?t[n.field]="number":Q(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function i2e(e){let t={};function n(r){Oc(r)?t[r.field]="date":r.type==="quantitative"&&Sre(r.aggregate)?t[r.field]="number":C0(r.field)>1?r.field in t||(t[r.field]="flatten"):l2(r)&&Pr(r.sort)&&C0(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((bt(e)||$r(e))&&e.forEachFieldDef((r,i)=>{if(En(r))n(r);else{let o=wo(i),a=e.fieldDef(o);n(k(x({},r),{type:a.type}))}}),bt(e)){let{mark:r,markDef:i,encoding:o}=e;if(Fi(r)&&!e.encoding.order){let a=i.orient==="horizontal"?"y":"x",s=o[a];Y(s)&&s.type==="quantitative"&&!(s.field in t)&&(t[s.field]="number")}}return t}function o2e(e){let t={};if(bt(e)&&e.component.selection)for(let n of R(e.component.selection)){let r=e.component.selection[n];for(let i of r.project.items)!i.channel&&C0(i.field)>1&&(t[i.field]="flatten")}return t}var Br=class e extends He{clone(){return new e(null,le(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Ce(this._parse)}`}static makeExplicit(t,n,r){let i={},o=n.data;return!la(o)&&o?.format?.parse&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(let s of R(r)){let c=i.getWithExplicit(s);c.value!==void 0&&(c.explicit||c.value===r[s]||c.value==="derived"||r[s]==="flatten"?delete r[s]:U(O.differentParse(s,r[s],c.value)))}for(let s of R(n)){let c=i.get(s);c!==void 0&&(c===n[s]?delete n[s]:U(O.differentParse(s,n[s],c)))}let o=new Oi(n,r);i.copyAll(o);let a={};for(let s of R(o.combine())){let c=o.get(s);c!==null&&(a[s]=c)}return R(a).length===0||i.parseNothing?null:new e(t,a)}get parse(){return this._parse}merge(t){this._parse=x(x({},this._parse),t.parse),t.remove()}assembleFormatParse(){let t={};for(let n of R(this._parse)){let r=this._parse[n];C0(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(R(this._parse))}dependentFields(){return new Set(R(this._parse))}assembleTransforms(t=!1){return R(this._parse).filter(n=>t?C0(n)>1:!0).map(n=>{let r=ATe(n,this._parse[n]);return r?{type:"formula",expr:r,as:ih(n)}:null}).filter(n=>n!==null)}};var pa=class e extends He{clone(){return new e(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ui])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ui}}};var N4=class e extends He{clone(){return new e(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Ce(this.params)}`}assemble(){return x({type:"graticule"},this.params===!0?{}:this.params)}};var _4=class e extends He{clone(){return new e(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Ce(this.params)}`}assemble(){return x({type:"sequence"},this.params)}};var Z1=class extends He{constructor(t){super(null),t??(t={name:"source"});let n;if(la(t)||(n=t.format?x({},Fn(t.format,["parse"])):{}),A0(t))this._data={values:t.values};else if(jc(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Ae(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else TF(t)?this._data={values:[{type:"Sphere"}]}:(zM(t)||la(t))&&(this._data={});this._generator=la(t),t.name&&(this._name=t.name),n&&!We(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return k(x({name:this._name},this._data),{transform:[]})}};var a2e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},VTe=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Fh;function YM(e){return e instanceof Z1||e instanceof N4||e instanceof _4}var l8=class{constructor(){Fh.set(this,void 0),a2e(this,Fh,!1,"f")}setModified(){a2e(this,Fh,!0,"f")}get modifiedFlag(){return VTe(this,Fh,"f")}};Fh=new WeakMap;var ws=class extends l8{getNodeDepths(t,n,r){r.set(t,n);for(let i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){let r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(let i of r)this.run(i[0]);return this.modifiedFlag}},u8=class extends l8{optimize(t){this.run(t);for(let n of t.children)this.optimize(n);return this.modifiedFlag}};var XM=class extends u8{mergeNodes(t,n){let r=n.shift();for(let i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){let n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(let i of R(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}},QM=class extends u8{constructor(t){super(),this.requiresSelectionId=t&&_h(t)}run(t){t instanceof pa&&(this.requiresSelectionId&&(YM(t.parent)||t.parent instanceof Ho||t.parent instanceof Br)||(this.setModified(),t.remove()))}},KM=class extends l8{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof f2&&(r=t.producedFields(),db(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(let i of t.children)this.run(i,new Set([...n,...r]))}},ZM=class extends u8{constructor(){super()}run(t){t instanceof Dn&&!t.isRequired()&&(this.setModified(),t.remove())}},JM=class extends ws{run(t){if(!YM(t)&&!(t.numChildren()>1)){for(let n of t.children)if(n instanceof Br)if(t instanceof Br)this.setModified(),t.merge(n);else{if(pb(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}},ew=class extends ws{run(t){let n=[...t.children],r=t.children.filter(i=>i instanceof Br);if(t.numChildren()>1&&r.length>=1){let i={},o=new Set;for(let a of r){let s=a.parse;for(let c of R(s))c in i?i[c]!==s[c]&&o.add(c):i[c]=s[c]}for(let a of o)delete i[a];if(!We(i)){this.setModified();let a=new Br(t,i);for(let s of n){if(s instanceof Br)for(let c of R(i))delete s.parse[c];t.removeChild(s),s.parent=a,s instanceof Br&&R(s.parse).length===0&&s.remove()}}}}},tw=class extends ws{run(t){t instanceof Dn||t.numChildren()>0||t instanceof h2||t instanceof Z1||(this.setModified(),t.remove())}},nw=class extends ws{run(t){let n=t.children.filter(i=>i instanceof f2),r=n.pop();for(let i of n)this.setModified(),r.merge(i)}},rw=class extends ws{run(t){let n=t.children.filter(i=>i instanceof Ho),r={};for(let i of n){let o=Ce(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(let i of R(r)){let o=r[i];if(o.length>1){let a=o.pop();for(let s of o)a.merge(s)&&(t.removeChild(s),s.parent=a,s.remove(),this.setModified())}}}},iw=class extends ws{constructor(t){super(),this.model=t}run(t){let n=!(YM(t)||t instanceof bs||t instanceof Br||t instanceof pa),r=[],i=[];for(let o of t.children)o instanceof da&&(n&&!pb(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){let o=r.pop();for(let a of r)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof da?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){let o=i.pop();for(let a of i)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}},ow=class extends ws{run(t){let n=[...t.children];if(!ls(n,a=>a instanceof Dn)||t.numChildren()<=1)return;let i=[],o;for(let a of n)if(a instanceof Dn){let s=a;for(;s.numChildren()===1;){let[c]=s.children;if(c instanceof Dn)s=c;else break}i.push(...s.children),o?(t.removeChild(a),a.parent=o.parent,o.parent.removeChild(o),o.parent=s,this.setModified()):o=s}else i.push(a);if(i.length){this.setModified();for(let a of i)a.parent.removeChild(a),a.parent=o}}};var ha=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Vi(this.transform.groupby.concat(t),n=>n)}dependentFields(){let t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??K(t)}hash(){return`JoinAggregateTransform ${Ce(this.transform)}`}assemble(){let t=[],n=[],r=[];for(let o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);let i=this.transform.groupby;return x({type:"joinaggregate",as:r,ops:n,fields:t},i!==void 0?{groupby:i}:{})}};function _Te(e){return e.stack.stackBy.reduce((t,n)=>{let r=n.fieldDef,i=K(r);return i&&t.push(i),t},[])}function kTe(e){return F(e)&&e.every(t=>Q(t))&&e.length>1}var Ss=class e extends He{clone(){return new e(null,le(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){let{stack:r,groupby:i,as:o,offset:a="zero"}=n,s=[],c=[];if(n.sort!==void 0)for(let f of n.sort)s.push(f.field),c.push(ot(f.order,"ascending"));let l={field:s,order:c},u;return kTe(o)?u=o:Q(o)?u=[o,`${o}_end`]:u=[`${n.stack}_start`,`${n.stack}_end`],new e(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:a,sort:l,facetby:[],as:u})}static makeFromEncoding(t,n){let r=n.stack,{encoding:i}=n;if(!r)return null;let{groupbyChannels:o,fieldChannel:a,offset:s,impute:c}=r,l=o.map(p=>{let h=i[p];return li(h)}).filter(p=>!!p),u=_Te(n),f=n.encoding.order,d;if(F(f)||Y(f))d=Db(f);else{let p=Zb(f)?f.sort:a==="y"?"descending":"ascending";d=u.reduce((h,m)=>(h.field.push(m),h.order.push(p),h),{field:[],order:[]})}return new e(t,{dimensionFieldDefs:l,stackField:n.vgField(a),facetby:[],stackby:u,sort:d,offset:s,impute:c,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){let t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Ce(this._stack)}`}getGroupbyFields(){let{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[K(i,{binSuffix:"mid"})]:[K(i,{}),K(i,{binSuffix:"end"})]:[K(i)]).flat():r??[]}assemble(){let t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:a,offset:s,impute:c,as:l}=this._stack;if(c)for(let u of r){let{bandPosition:f=.5,bin:d}=u;if(d){let p=K(u,{expr:"datum"}),h=K(u,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${p}+${1-f}*${h}`,as:K(u,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:K(u,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:l,offset:s}),t}};var Qc=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Vi(this.transform.groupby.concat(t),n=>n)}dependentFields(){let t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??K(t)}hash(){return`WindowTransform ${Ce(this.transform)}`}assemble(){let t=[],n=[],r=[],i=[];for(let f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);let o=this.transform.frame,a=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>Df(f)))return x({type:"joinaggregate",as:r,ops:n,fields:t},a!==void 0?{groupby:a}:{});let s=[],c=[];if(this.transform.sort!==void 0)for(let f of this.transform.sort)s.push(f.field),c.push(f.order??"ascending");let l={field:s,order:c},u=this.transform.ignorePeers;return x(x(x({type:"window",params:i,as:r,ops:n,fields:t,sort:l},u!==void 0?{ignorePeers:u}:{}),a!==void 0?{groupby:a}:{}),o!==void 0?{frame:o}:{})}};function TTe(e){function t(n){if(!(n instanceof h2)){let r=n.clone();if(r instanceof Dn){let i=Rh+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Ho||r instanceof Ss||r instanceof Qc||r instanceof ha)&&r.addDimensions(e.fields);for(let i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function aw(e){if(e instanceof h2)if(e.numChildren()===1&&!(e.children[0]instanceof Dn)){let t=e.children[0];(t instanceof Ho||t instanceof Ss||t instanceof Qc||t instanceof ha)&&t.addDimensions(e.fields),t.swapWithParent(),aw(e)}else{let t=e.model.component.data.main;s2e(t);let n=TTe(e),r=e.children.map(n).flat();for(let i of r)i.parent=t}else e.children.map(aw)}function s2e(e){if(e instanceof Dn&&e.type===Ct.Main&&e.numChildren()===1){let t=e.children[0];t instanceof h2||(t.swapWithParent(),s2e(e))}}var Rh="scale_",sw=5;function oR(e){for(let t of e){for(let n of t.children)if(n.parent!==t)return!1;if(!oR(t.children))return!1}return!0}function ma(e,t){let n=!1;for(let r of t)n=e.optimize(r)||n;return n}function c2e(e,t,n){let r=e.sources,i=!1;return i=ma(new ZM,r)||i,i=ma(new QM(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=ma(new tw,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=ma(new JM,r)||i,i=ma(new iw(t),r)||i,i=ma(new KM,r)||i,i=ma(new ew,r)||i,i=ma(new rw,r)||i,i=ma(new nw,r)||i,i=ma(new XM,r)||i,i=ma(new ow,r)||i),e.sources=r,i}function l2e(e,t){oR(e.sources);let n=0,r=0;for(let i=0;i<sw&&c2e(e,t,!0);i++)n++;e.sources.map(aw);for(let i=0;i<sw&&c2e(e,t,!1);i++)r++;oR(e.sources),Math.max(n,r)===sw&&U(`Maximum optimization runs(${sw}) reached.`)}var Yn=class e{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new e(()=>t(n))}};function lR(e){bt(e)?ITe(e):FTe(e)}function ITe(e){let t=e.component.scales;for(let n of R(t)){let r=OTe(e,n);if(t[n].setWithExplicit("domains",r),$Te(e,n),e.component.data.isFaceted){let o=e;for(;!$r(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(let s of r.value)ia(s)&&(s.data=Rh+s.data.replace(Rh,""))}}}function FTe(e){for(let n of e.children)lR(n);let t=e.component.scales;for(let n of R(t)){let r,i=null;for(let o of e.children){let a=o.component.scales[n];if(a){r===void 0?r=a.getWithExplicit("domains"):r=X1(r,a.getWithExplicit("domains"),"domains","scale",cR);let s=a.get("selectionExtent");i&&s&&i.param!==s.param&&U(O.NEEDS_SAME_SELECTION),i=s}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function RTe(e,t,n,r){if(e==="unaggregated"){let{valid:i,reason:o}=u2e(t,n);if(!i){U(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){let{valid:i}=u2e(t,n);if(i)return"unaggregated"}return e}function OTe(e,t){let n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=RTe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=k(x({},e.specifiedScales[t]),{domain:i})),t==="x"&&It(r.x2)?It(r.x)?X1(k4(n,i,e,"x"),k4(n,i,e,"x2"),"domain","scale",cR):k4(n,i,e,"x2"):t==="y"&&It(r.y2)?It(r.y)?X1(k4(n,i,e,"y"),k4(n,i,e,"y2"),"domain","scale",cR):k4(n,i,e,"y2"):k4(n,i,e,t)}function PTe(e,t,n){return e.map(r=>({signal:`{data: ${w0(r,{timeUnit:n,type:t})}}`}))}function aR(e,t,n){let r=sn(n)?.unit;return t==="temporal"||r?PTe(e,t,r):[e]}function k4(e,t,n,r){let{encoding:i,markDef:o,mark:a,config:s,stack:c}=n,l=It(i[r]),{type:u}=l,f=l.timeUnit;if(aie(t)){let h=k4(e,void 0,n,r),m=aR(t.unionWith,u,f);return u2([...m,...h.value])}else{if(ae(t))return u2([t]);if(t&&t!=="unaggregated"&&!eF(t))return u2(aR(t,u,f))}if(c&&r===c.fieldChannel){if(c.offset==="normalize")return Pi([[0,1]]);let h=n.requestDataName(Ct.Main);return Pi([{data:h,field:n.vgField(r,{suffix:"start"})},{data:h,field:n.vgField(r,{suffix:"end"})}])}let d=Fr(r)&&Y(l)?BTe(n,r,e):void 0;if(Ri(l)){let h=aR([l.datum],u,f);return Pi(h)}let p=l;if(t==="unaggregated"){let h=n.requestDataName(Ct.Main),{field:m}=l;return Pi([{data:h,field:K({field:m,aggregate:"min"})},{data:h,field:K({field:m,aggregate:"max"})}])}else if(et(p.bin)){if(Pt(e))return e==="bin-ordinal"?Pi([]):Pi([{data:xf(d)?n.requestDataName(Ct.Main):n.requestDataName(Ct.Raw),field:n.vgField(r,ms(p,r)?{binSuffix:"range"}:{}),sort:d===!0||!ne(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{let{bin:h}=p;if(et(h)){let m=s8(n,p.field,h);return Pi([new Yn(()=>{let g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Pi([{data:n.requestDataName(Ct.Main),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Ae(["time","utc"],e)){let h=i[Ir(r)];if(Kb(p,h,o,s)){let m=n.requestDataName(Ct.Main),g=W1({fieldDef:p,fieldDef2:h,markDef:o,config:s}),v=Ic(a)&&g!==.5&&xt(r);return Pi([{data:m,field:n.vgField(r,v?{suffix:V0}:{})},{data:m,field:n.vgField(r,{suffix:v?N0:"end"})}])}}return d?Pi([{data:xf(d)?n.requestDataName(Ct.Main):n.requestDataName(Ct.Raw),field:n.vgField(r),sort:d}]):Pi([{data:n.requestDataName(Ct.Main),field:n.vgField(r)}])}function sR(e,t){let{op:n,field:r,order:i}=e;return x(x({op:n??(t?"sum":w4)},r?{field:ar(r)}:{}),i?{order:i}:{})}function $Te(e,t){let n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t)?.bin,o=eF(r)&&r,a=na(i)&&zf(i.extent)&&i.extent;(o||a)&&n.set("selectionExtent",o??a,!0)}function BTe(e,t,n){if(!Pt(n))return;let r=e.fieldDef(t),i=r.sort;if(Wb(i))return{op:"min",field:Ms(r,t),order:"ascending"};let{stack:o}=e,a=o?new Set([...o.groupbyFields,...o.stackBy.map(s=>s.fieldDef.field)]):void 0;if(Pr(i)){let s=o&&!a.has(i.field);return sR(i,s)}else if(Gb(i)){let{encoding:s,order:c}=i,l=e.fieldDef(s),{aggregate:u,field:f}=l,d=o&&!a.has(f);if(So(u)||a2(u))return sR({field:K(l),order:c},d);if(Df(u)||!u)return sR({op:u,field:f,order:c},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ae(["ascending",void 0],i))return!0}}function u2e(e,t){let{aggregate:n,type:r}=e;return n?Q(n)&&!Dre.has(n)?{valid:!1,reason:O.unaggregateDomainWithNonSharedDomainOp(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:O.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:O.unaggregateDomainHasNoEffectForRawField(e)}}function cR(e,t,n,r){return e.explicit&&t.explicit&&U(O.mergeConflictingDomainProperty(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function UTe(e){let t=Vi(e.map(a=>{if(ia(a)){let s=a,{sort:c}=s;return ie(s,["sort"])}return a}),Ce),n=Vi(e.map(a=>{if(ia(a)){let s=a.sort;return s!==void 0&&!xf(s)&&("op"in s&&s.op==="count"&&delete s.field,s.order==="ascending"&&delete s.order),s}}).filter(a=>a!==void 0),Ce);if(t.length===0)return;if(t.length===1){let a=e[0];if(ia(a)&&n.length>0){let s=n[0];if(n.length>1){U(O.MORE_THAN_ONE_SORT);let c=n.filter(l=>ne(l)&&"op"in l&&l.op!=="min");n.every(l=>ne(l)&&"op"in l)&&c.length===1?s=c[0]:s=!0}else if(ne(s)&&"field"in s){let c=s.field;a.field===c&&(s=s.order?{order:s.order}:!0)}return k(x({},a),{sort:s})}return a}let r=Vi(n.map(a=>xf(a)||!("op"in a)||Q(a.op)&&a.op in wre?a:(U(O.domainSortDropped(a)),!0)),Ce),i;r.length===1?i=r[0]:r.length>1&&(U(O.MORE_THAN_ONE_SORT),i=!0);let o=Vi(e.map(a=>ia(a)?a.data:null),a=>a);return o.length===1&&o[0]!==null?x({data:o[0],fields:t.map(s=>s.field)},i?{sort:i}:{}):x({fields:t},i?{sort:i}:{})}function c8(e){if(ia(e)&&Q(e.field))return e.field;if(zre(e)){let t;for(let n of e.fields)if(ia(n)&&Q(n.field)){if(!t)t=n.field;else if(t!==n.field)return U(O.FACETED_INDEPENDENT_DIFFERENT_SOURCES),t}return U(O.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),t}else if(Hre(e)){U(O.FACETED_INDEPENDENT_SAME_SOURCE);let t=e.fields[0];return Q(t)?t:void 0}}function V4(e,t){let r=e.component.scales[t].get("domains").map(i=>(ia(i)&&(i.data=e.lookupDataSource(i.data)),i));return UTe(r)}function uR(e){return d2(e)||a8(e)?e.children.reduce((t,n)=>t.concat(uR(n)),f2e(e)):f2e(e)}function f2e(e){return R(e.component.scales).reduce((t,n)=>{let r=e.component.scales[n];if(r.merged)return t;let i=r.combine(),m=i,{name:o,type:a,selectionExtent:s,domains:c,range:l,reverse:u}=m,f=ie(m,["name","type","selectionExtent","domains","range","reverse"]),d=jTe(i.range,o,n,e),p=V4(e,n),h=s?noe(e,s,r,p):null;return t.push(x(x(k(x(x({name:o,type:a},p?{domain:p}:{}),h?{domainRaw:h}:{}),{range:d}),u!==void 0?{reverse:u}:{}),f)),t},[])}function jTe(e,t,n,r){if(xt(n)){if(Ii(e))return{step:{signal:`${t}_step`}}}else if(ne(e)&&ia(e))return k(x({},e),{data:r.lookupDataSource(e.data)});return e}var Oh=class extends Oi{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:ls(this.get("domains"),t=>F(t)&&t.length===2&&Oe(t[0])&&t[0]<=0&&Oe(t[1])&&t[1]>=0)}};var qTe=["range","scheme"];function m2e(e){let t=e.component.scales;for(let n of b4){let r=t[n];if(!r)continue;let i=GTe(n,e);r.setWithExplicit("range",i)}}function d2e(e,t){let n=e.fieldDef(t);if(n?.bin){let{bin:r,field:i}=n,o=Sn(t),a=e.getName(o);if(ne(r)&&r.binned&&r.step!==void 0)return new Yn(()=>{let s=e.scaleName(t),c=`(domain("${s}")[1] - domain("${s}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${c})`});if(et(r)){let s=s8(e,i,r);return new Yn(()=>{let c=e.getSignalName(s),l=`(${c}.stop - ${c}.start) / ${c}.step`;return`${e.getSignalName(a)} / (${l})`})}}}function GTe(e,t){let n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(let f of qTe)if(n[f]!==void 0){let d=fh(o,f),p=Ob(e,f);if(!d)U(O.scalePropertyNotWorkWithScaleType(o,f,e));else if(p)U(p);else switch(f){case"range":{let h=n.range;if(F(h)){if(xt(e))return u2(h.map(m=>{if(m==="width"||m==="height"){let g=t.getName(m),v=t.getSignalName.bind(t);return Yn.fromName(v,g)}return m}))}else if(ne(h))return u2({data:t.requestDataName(Ct.Main),field:h.field,sort:{op:"min",field:t.vgField(e)}});return u2(h)}case"scheme":return u2(WTe(n[f]))}}let a=e===yt||e==="xOffset"?"width":"height",s=r[a];if(Y1(s)){if(xt(e))if(Pt(o)){let f=v2e(s,t,e);if(f)return u2({step:f})}else U(O.stepDropped(a));else if(kc(e)){let f=e===i2?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){let h=y2e(s,o);if(h)return u2(h)}}}let{rangeMin:c,rangeMax:l}=n,u=YTe(e,t);return(c!==void 0||l!==void 0)&&fh(o,"rangeMin")&&F(u)&&u.length===2?u2([c??u[0],l??u[1]]):Pi(u)}function WTe(e){return oie(e)?x({scheme:e.name},Fn(e,["name"])):{scheme:e}}function g2e(e,t,n,{center:r}={}){let i=Sn(e),o=t.getName(i),a=t.getSignalName.bind(t);return e===on&&On(n)?r?[Yn.fromName(s=>`${a(s)}/2`,o),Yn.fromName(s=>`-${a(s)}/2`,o)]:[Yn.fromName(a,o),0]:r?[Yn.fromName(s=>`-${a(s)}/2`,o),Yn.fromName(s=>`${a(s)}/2`,o)]:[0,Yn.fromName(a,o)]}function YTe(e,t){let{size:n,config:r,mark:i,encoding:o}=t,{type:a}=It(o[e]),c=t.getScaleComponent(e).get("type"),{domain:l,domainMid:u}=t.specifiedScales[e];switch(e){case yt:case on:{if(Ae(["point","band"],c)){let f=x2e(e,n,r.view);if(Y1(f))return{step:v2e(f,t,e)}}return g2e(e,t,c)}case i2:case us:return XTe(e,t,c);case q1:{let f=t.component.scales[e].get("zero"),d=C2e(i,f,r),p=ZTe(i,n,t,r);return Tc(c)?KTe(d,p,QTe(c,r,l,e)):[d,p]}case ii:return[0,Math.PI*2];case ta:return[0,360];case Ni:return[0,new Yn(()=>{let f=t.getSignalName("width"),d=t.getSignalName("height");return`min(${f},${d})/2`})];case bo:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Mo:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case wn:return"symbol";case Rn:case ki:case Ti:return c==="ordinal"?a==="nominal"?"category":"ordinal":u!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case p1:case xo:case Co:return[r.scale.minOpacity,r.scale.maxOpacity]}}function v2e(e,t,n){let{encoding:r}=t,i=t.getScaleComponent(n),o=Ef(n),a=r[o];if(DF({step:e,offsetIsDiscrete:ke(a)&&Rb(a.type)})==="offset"&&hF(r,o)){let c=t.getScaleComponent(o),u=`domain('${t.scaleName(o)}').length`;if(c.get("type")==="band"){let d=c.get("paddingInner")??c.get("padding")??0,p=c.get("paddingOuter")??c.get("padding")??0;u=`bandspace(${u}, ${d}, ${p})`}let f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${u} / (1-${Nre(f)})`}}else return e.step}function y2e(e,t){if(DF({step:e,offsetIsDiscrete:Pt(t)})==="offset")return{step:e.step}}function XTe(e,t,n){let r=e===i2?"x":"y",i=t.getScaleComponent(r);if(!i)return g2e(r,t,n,{center:!0});let o=i.get("type"),a=t.scaleName(r),{markDef:s,config:c}=t;if(o==="band"){let l=x2e(r,t.size,t.config.view);if(Y1(l)){let u=y2e(l,n);if(u)return u}return[0,{signal:`bandwidth('${a}')`}]}else{let l=t.encoding[r];if(Y(l)&&l.timeUnit){let u=Lb(l.timeUnit,h=>`scale('${a}', ${h})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=W1({fieldDef:l,markDef:s,config:c})-.5,p=d!==0?` + ${d}`:"";if(f){let h=ae(f)?`${f.signal}/2`+p:`${f/2+d}`,m=ae(f)?`(1 - ${f.signal}/2)`+p:`${1-f/2+d}`;return[{signal:`${h} * (${u})`},{signal:`${m} * (${u})`}]}return[0,{signal:u}]}return DI(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function x2e(e,t,n){let r=e===yt?"width":"height",i=t[r];return i||jf(n,r)}function QTe(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&F(n)?n.length+1:(U(O.domainRequiredForThresholdScale(r)),3)}}function KTe(e,t,n){let r=()=>{let i=h1(t),o=h1(e),a=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${a}, ${a})`};return ae(t)?new Yn(r):{signal:r()}}function C2e(e,t,n){if(t)return ae(t)?{signal:`${t.signal} ? 0 : ${C2e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(O.incompatibleChannel("size",e))}var p2e=.95;function ZTe(e,t,n,r){let i={x:d2e(n,"x"),y:d2e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;let o=h2e(t,i,r.view);return Oe(o)?o-1:new Yn(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;let o=h2e(t,i,r.view);return Oe(o)?Math.pow(p2e*o,2):new Yn(()=>`pow(${p2e} * ${o.signal}, 2)`)}}throw new Error(O.incompatibleChannel("size",e))}function h2e(e,t,n){let r=Y1(e.width)?e.width.step:L0(n,"width"),i=Y1(e.height)?e.height.step:L0(n,"height");return t.x||t.y?new Yn(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function fR(e,t){bt(e)?JTe(e,t):M2e(e,t)}function JTe(e,t){let n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(let s of R(n)){let c=a[s],l=n[s],u=e.getScaleComponent(s),f=It(i[s]),d=c[t],p=u.get("type"),h=u.get("padding"),m=u.get("paddingInner"),g=fh(p,t),v=Ob(s,t);if(d!==void 0&&(g?v&&U(v):U(O.scalePropertyNotWorkWithScaleType(p,t,s))),g&&v===void 0)if(d!==void 0){let y=f.timeUnit,C=f.type;switch(t){case"domainMax":case"domainMin":s2(c[t])||C==="temporal"||y?l.set(t,{signal:w0(c[t],{type:C,timeUnit:y})},!0):l.set(t,c[t],!0);break;default:l.copyKeyFromObject(t,c)}}else{let y=t in b2e?b2e[t]({model:e,channel:s,fieldOrDatumDef:f,scaleType:p,scalePadding:h,scalePaddingInner:m,domain:c.domain,domainMin:c.domainMin,domainMax:c.domainMax,markDef:o,config:r,hasNestedOffsetScale:nM(i,s),hasSecondaryRangeChannel:!!i[Ir(s)]}):r.scale[t];y!==void 0&&l.set(t,y,!1)}}}var b2e={bins:({model:e,fieldOrDatumDef:t})=>Y(t)?eIe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>tIe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>nIe(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>rIe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>iIe(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>oIe(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{let i=Y(e)?e.sort:void 0;return aIe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:a})=>sIe(e,t,n,r,i,o.scale,a)};function dR(e){bt(e)?m2e(e):M2e(e,"range")}function M2e(e,t){let n=e.component.scales;for(let r of e.children)t==="range"?dR(r):fR(r,t);for(let r of R(n)){let i;for(let o of e.children){let a=o.component.scales[r];if(a){let s=a.getWithExplicit(t);i=X1(i,s,t,"scale",EM((c,l)=>{switch(t){case"range":return c.step&&l.step?c.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function eIe(e,t){let n=t.bin;if(et(n)){let r=s8(e,t.field,n);return new Yn(()=>e.getSignalName(r))}else if(an(n)&&na(n)&&n.step!==void 0)return{step:n.step}}function tIe(e,t){if(Ae([Rn,ki,Ti],e)&&t!=="nominal")return"hcl"}function nIe(e,t,n,r,i,o){if(!(li(o)?.bin||F(n)||i!=null||r!=null||Ae([Or.TIME,Or.UTC],e)))return xt(t)?!0:void 0}function rIe(e,t,n,r,i,o){if(xt(e)){if(G1(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;let{type:a,orient:s}=i;if(a==="bar"&&!(Y(r)&&(r.bin||r.timeUnit))&&(s==="vertical"&&e==="x"||s==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Or.POINT)return n.pointPadding}}function iIe(e,t,n,r,i,o=!1){if(e===void 0){if(xt(t)){let{bandPaddingInner:a,barBandPaddingInner:s,rectBandPaddingInner:c,bandWithNestedOffsetPaddingInner:l}=i;return o?l:ot(a,n==="bar"?s:c)}else if(kc(t)&&r===Or.BAND)return i.offsetBandPaddingInner}}function oIe(e,t,n,r,i,o=!1){if(e===void 0){if(xt(t)){let{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:s}=i;if(o)return s;if(n===Or.BAND)return ot(a,ae(r)?{signal:`${r.signal}/2`}:r/2)}else if(kc(t)){if(n===Or.POINT)return .5;if(n===Or.BAND)return i.offsetBandPaddingOuter}}}function aIe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return On(e)&&t==="descending"?ae(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(On(e)&&t==="descending")return!0}function sIe(e,t,n,r,i,o,a){if(!!n&&n!=="unaggregated"&&On(i)){if(F(n)){let c=n[0],l=n[n.length-1];if(Oe(c)&&c<=0&&Oe(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Tc(i))return!0;if(!(Y(t)&&t.bin)&&Ae([...xr,...mre],e)){let{orient:c,type:l}=r;return Ae(["bar","area","line","trail"],l)&&(c==="horizontal"&&e==="y"||c==="vertical"&&e==="x")?!1:Ae(["bar","area"],l)&&!a?!0:o?.zero}return!1}function w2e(e,t,n,r,i=!1){let o=cIe(t,n,r,i),{type:a}=e;return Fr(t)?a!==void 0?fie(t,a)?Y(n)&&!uie(a,n.type)?(U(O.scaleTypeNotWorkWithFieldDef(a,o)),o):a:(U(O.scaleTypeNotWorkWithChannel(t,a,o)),o):o:null}function cIe(e,t,n,r){switch(t.type){case"nominal":case"ordinal":{if(_c(e)||Cb(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&U(O.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(xt(e)||kc(e)){if(Ae(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in xb)return"band";let i=n[Sn(e)];return ps(i)||Rc(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return _c(e)?"time":Cb(e)==="discrete"?(U(O.discreteChannelCannotEncode(e,"temporal")),"ordinal"):Y(t)&&t.timeUnit&&sn(t.timeUnit).utc?"utc":"time";case"quantitative":return _c(e)?Y(t)&&et(t.bin)?"bin-ordinal":"linear":Cb(e)==="discrete"?(U(O.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(O.invalidFieldType(t.type))}function S2e(e,{ignoreRange:t}={}){E2e(e),lR(e);for(let n of lie)fR(e,n);t||dR(e)}function E2e(e){bt(e)?e.component.scales=lIe(e):e.component.scales=fIe(e)}function lIe(e){let{encoding:t,mark:n,markDef:r}=e,i={};for(let o of b4){let a=It(t[o]);if(a&&n===$b&&o===wn&&a.type===sa)continue;let s=a&&a.scale;if(a&&s!==null&&s!==!1){s??(s={});let c=nM(t,o),l=w2e(s,o,a,r,c);i[o]=new Oh(e.scaleName(`${o}`,!0),{value:l,explicit:s.type===l})}}return i}var uIe=EM((e,t)=>ZI(e)-ZI(t));function fIe(e){var t;let n=e.component.scales={},r={},i=e.component.resolve;for(let o of e.children){E2e(o);for(let a of R(o.component.scales))if((t=i.scale)[a]??(t[a]=jM(a,e)),i.scale[a]==="shared"){let s=r[a],c=o.component.scales[a].getWithExplicit("type");s?eie(s.value,c.value)?r[a]=X1(s,c,"type","scale",uIe):(i.scale[a]="independent",delete r[a]):r[a]=c}}for(let o of R(r)){let a=e.scaleName(o,!0),s=r[o];n[o]=new Oh(a,s);for(let c of e.children){let l=c.component.scales[o];l&&(c.renameScale(l.get("name"),a),l.merged=!0)}}return n}var Ph=class{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}};function bt(e){return e?.type==="unit"}function $r(e){return e?.type==="facet"}function a8(e){return e?.type==="concat"}function d2(e){return e?.type==="layer"}var T0=class{constructor(t,n,r,i,o,a,s){this.type=n,this.parent=r,this.config=o,this.correctDataNames=c=>(c.from?.data&&(c.from.data=this.lookupDataSource(c.from.data)),c.from?.facet?.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c),this.parent=r,this.config=o,this.view=sr(s),this.name=t.name??i,this.title=ra(t.title)?{text:t.title}:t.title?sr(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Ph,this.projectionNameMap=r?r.projectionNameMap:new Ph,this.signalNameMap=r?r.signalNameMap:new Ph,this.data=t.data,this.description=t.description,this.transforms=j1e(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:c1e(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:Pc(t)||r?.component.data.isFaceted&&t.data===void 0},layoutSize:new Oi,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:x({scale:{},axis:{},legend:{}},a?le(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){S2e(this)}parseProjection(){iR(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){nR(this)}assembleEncodeFromView(t){let o=t,{style:n}=o,r=ie(o,["style"]),i={};for(let a of R(r)){let s=r[a];s!==void 0&&(i[a]=tt(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=tt(this.description)),this.type==="unit"||this.type==="layer")?x({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n??{}):We(n)?void 0:n}assembleLayout(){if(!this.layout)return;let a=this.layout,{spacing:t}=a,n=ie(a,["spacing"]),{component:r,config:i}=this,o=Boe(r.layoutHeaders,i);return x(x(x({padding:t},this.assembleDefaultLayout()),n),o?{titleBand:o}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){let{layoutHeaders:t}=this.component,n=[];for(let r of Tr)t[r].title&&n.push(Roe(this,r));for(let r of n8)n=n.concat($oe(this,r));return n}assembleAxes(){return _oe(this.component.axes,this.config)}assembleLegends(){return WM(this)}assembleProjections(){return Koe(this)}assembleTitle(){let i=this.title??{},{encoding:t}=i,n=ie(i,["encoding"]),r=x(x(x({},wb(this.config.title).nonMarkTitleProperties),n),t?{encode:{update:t}}:{});if(r.text)return Ae(["unit","layer"],this.type)?Ae(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),We(r)?void 0:r}assembleGroup(t=[]){let n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);let r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());let i=!this.parent||$r(this.parent)?uR(this):[];i.length>0&&(n.scales=i);let o=this.assembleAxes();o.length>0&&(n.axes=o);let a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return ut((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ct[t].toLowerCase())}requestDataName(t){let n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if($r(this.parent)){let n=BM(t),r=C4(n),i=this.component.scales[r];if(i&&!i.merged){let o=i.get("type"),a=i.get("range");if(Pt(o)&&Ii(a)){let s=i.get("name"),c=V4(this,r),l=c8(c);if(l){let u=K({aggregate:"distinct",field:l},{expr:"datum"});return{signal:ZF(s,i,u)}}else return U(O.unknownField(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){let n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(vb(t)&&Fr(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");let n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(O.selectionNotFound(n));return r}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}},f8=class extends T0{vgField(t,n={}){let r=this.fieldDef(t);if(r)return K(r,n)}reduceFieldDef(t,n){return jie(this.getMapping(),(r,i,o)=>{let a=li(i);return a?t(r,a,o):r},n)}forEachFieldDef(t,n){bh(this.getMapping(),(r,i)=>{let o=li(r);o&&t(o,i)},n)}};var d8=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Ce(this.transform)}`}assemble(){let i=this.transform,{density:t}=i,n=ie(i,["density"]),r=x({type:"kde",field:t},n);return this.transform.groupby&&(r.resolve="shared"),r}};var p8=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Ce(this.transform)}`}assemble(){let{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}};var h8=class e extends He{clone(){return new e(null,x({},this.filter))}constructor(t,n){super(t),this.filter=n}static make(t,n){let{config:r,mark:i,markDef:o}=n;if(Be("invalid",o,r)!=="filter")return null;let s=n.reduceFieldDef((c,l,u)=>{let f=Fr(u)&&n.getScaleComponent(u);if(f){let d=f.get("type");On(d)&&l.aggregate!=="count"&&!Fi(i)&&(c[l.field]=l)}return c},{});return R(s).length?new e(t,s):null}dependentFields(){return new Set(R(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Ce(this.filter)}`}assemble(){let t=R(this.filter).reduce((n,r)=>{let i=this.filter[r],o=K(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):i.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}};var m8=class e extends He{clone(){return new e(this.parent,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,a)=>i[a]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Ce(this.transform)}`}assemble(){let{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}};var g8=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Ce(this.transform)}`}assemble(){let{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}};var v8=class e extends He{clone(){return new e(null,le(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(let i of[[ai,oi],[si,_i]]){let o=i.map(a=>{let s=It(n.encoding[a]);return Y(s)?s.field:Ri(s)?{expr:`${s.datum}`}:cr(s)?{expr:`${s.value}`}:void 0});(o[0]||o[1])&&(t=new e(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(wn)){let i=n.typedFieldDef(wn);i.type===sa&&(t=new e(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){let t=(this.fields??[]).filter(Q);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Ce(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],k(x(x({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}};var y8=class e extends He{clone(){return new e(null,this.projection,le(this.fields),le(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(let r of[[ai,oi],[si,_i]]){let i=r.map(a=>{let s=It(n.encoding[a]);return Y(s)?s.field:Ri(s)?{expr:`${s.datum}`}:cr(s)?{expr:`${s.value}`}:void 0}),o=r[0]===si?"2":"";(i[0]||i[1])&&(t=new e(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Q))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Ce(this.fields)} ${Ce(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}};var I0=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){let{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new e(t,n)}static makeFromEncoding(t,n){let r=n.encoding,i=r.x,o=r.y;if(Y(i)&&Y(o)){let a=i.impute?i:o.impute?o:void 0;if(a===void 0)return;let s=i.impute?o:o.impute?i:void 0,{method:c,value:l,frame:u,keyvals:f}=a.impute,d=iM(n.mark,r);return new e(t,x(x(x(x(x({impute:a.field,key:s.field},c?{method:c}:{}),l!==void 0?{value:l}:{}),u?{frame:u}:{}),f!==void 0?{keyvals:f}:{}),d.length?{groupby:d}:{}))}return null}hash(){return`Impute ${Ce(this.transform)}`}assemble(){let{impute:t,key:n,keyvals:r,method:i,groupby:o,value:a,frame:s=[null,null]}=this.transform,c=k(x(k(x({type:"impute",field:t,key:n},r?{keyvals:E1e(r)?this.processSequence(r):r}:{}),{method:"value"}),o?{groupby:o}:{}),{value:!i||i==="value"?a:null});if(i&&i!=="value"){let l=x({type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:s,ignorePeers:!1},o?{groupby:o}:{}),u={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[c,l,u]}else return[c]}};var x8=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Ce(this.transform)}`}assemble(){let o=this.transform,{loess:t,on:n}=o,r=ie(o,["loess","on"]);return x({type:"loess",x:n,y:t},r)}};var C8=class e extends He{clone(){return new e(null,le(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){let o=n.component.data.sources,{from:a}=r,s=null;if(D1e(a)){let c=pR(a.data,o);c||(c=new Z1(a.data),o.push(c));let l=n.getName(`lookup_${i}`);s=new Dn(c,l,Ct.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=s}else if(z1e(a)){let c=a.param;r=x({as:c},r);let l;try{l=n.getSelectionComponent(ut(c),c)}catch{throw new Error(O.cannotLookupVariableParameter(c))}if(s=l.materialized,!s)throw new Error(O.noSameUnitLookup(c))}return new e(t,r,s.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?te(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Ce({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=x({values:this.transform.from.fields},this.transform.as?{as:te(this.transform.as)}:{});else{let n=this.transform.as;Q(n)||(U(O.NO_FIELDS_NEEDS_AS),n="_lookup"),t={as:[n]}}return x(x({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}};var b8=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Ce(this.transform)}`}assemble(){let i=this.transform,{quantile:t}=i,n=ie(i,["quantile"]);return x({type:"quantile",field:t},n)}};var M8=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Ce(this.transform)}`}assemble(){let o=this.transform,{regression:t,on:n}=o,r=ie(o,["regression","on"]);return x({type:"regression",x:n,y:t},r)}};var w8=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Vi((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Ce(this.transform)}`}assemble(){let{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return x(x(x({type:"pivot",field:t,value:n},i!==void 0?{limit:i}:{}),o!==void 0?{op:o}:{}),r!==void 0?{groupby:r}:{})}};var S8=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Ce(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}};function D2e(e){let t=0;function n(r,i){if(r instanceof Z1&&!r.isGenerator&&!jc(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Br&&(r.parent instanceof Z1&&!i.source?(i.format=k(x({},i.format??{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof h2){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof N4||r instanceof _4||r instanceof h8||r instanceof bs||r instanceof k0||r instanceof y8||r instanceof Ho||r instanceof C8||r instanceof Qc||r instanceof ha||r instanceof g8||r instanceof m8||r instanceof d8||r instanceof x8||r instanceof b8||r instanceof M8||r instanceof pa||r instanceof S8||r instanceof w8||r instanceof p8)&&i.transform.push(r.assemble()),(r instanceof da||r instanceof f2||r instanceof I0||r instanceof Ss||r instanceof v8)&&i.transform.push(...r.assemble()),r instanceof Dn&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Dn?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Dn&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(let a of r.children)n(a,{name:null,source:o,transform:[]});break}}}return n}function z2e(e){let t=[],n=D2e(t);for(let r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function H2e(e,t){let n=[],r=D2e(n),i=0;for(let a of e.sources){a.hasName()||(a.dataName=`source_${i++}`);let s=a.assemble();r(a,s)}for(let a of n)a.transform.length===0&&delete a.transform;let o=0;for(let[a,s]of n.entries())(s.transform??[]).length===0&&!s.source&&n.splice(o++,0,n.splice(a,1)[0]);for(let a of n)for(let s of a.transform??[])s.type==="lookup"&&(s.from=e.outputNodes[s.from].getSource());for(let a of n)a.name in t&&(a.values=t[a.name]);return n}function dIe(e){return e==="top"||e==="left"||ae(e)?"header":"footer"}function A2e(e){for(let t of Tr)pIe(e,t);L2e(e,"x"),L2e(e,"y")}function pIe(e,t){let{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){let a=n[t],s=Xc("title",null,r,t),c=ys(a,r,{allowDisabling:!0,includeDefault:s===void 0||!!s});i.component.layoutHeaders[t].title&&(c=F(c)?c.join(", "):c,c+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);let l=Xc("labelOrient",a.header,r,t),u=a.header!==null?ot(a.header?.labels,r.header.labels,!0):!1,f=Ae(["bottom","right"],l)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?c:null,facetFieldDef:a,[f]:t==="facet"?[]:[V2e(e,t,u)]}}}function V2e(e,t,n){let r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function L2e(e,t){let{child:n}=e;if(n.component.axes[t]){let{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=o8(i,t),i.axis[t]==="shared"){let o=t==="x"?"column":"row",a=r[o];for(let s of n.component.axes[t]){let c=dIe(s.get("orient"));a[c]??(a[c]=[V2e(e,o,!1)]);let l=e8(s,"main",e.config,{header:!0});l&&a[c][0].axes.push(l),s.mainExtracted=!0}}}}function N2e(e){lw(e),cw(e,"width"),cw(e,"height")}function _2e(e){lw(e);let t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";cw(e,t),cw(e,n)}function lw(e){for(let t of e.children)t.parseLayoutSize()}function cw(e,t){let n=BM(t),r=C4(n),i=e.component.resolve,o=e.component.layoutSize,a;for(let s of e.children){let c=s.component.layoutSize.getWithExplicit(n),l=i.scale[r]??jM(r,e);if(l==="independent"&&c.value==="step"){a=void 0;break}if(a){if(l==="independent"&&a.value!==c.value){a=void 0;break}a=X1(a,c,n,"")}else a=c}if(a){for(let s of e.children)e.renameSignal(s.getName(n),e.getName(t)),s.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function k2e(e){let{size:t,component:n}=e;for(let r of xr){let i=Sn(r);if(t[i]){let o=t[i];n.layoutSize.set(i,Y1(o)?"step":o,!0)}else{let o=hIe(e,i);n.layoutSize.set(i,o,!1)}}}function hIe(e,t){let n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){let o=i.get("type"),a=i.get("range");if(Pt(o)){let s=jf(r.view,t);return Ii(a)||Y1(s)?"step":s}else return Dh(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return Dh(r.view,t);{let o=jf(r.view,t);return Y1(o)?o.step:o}}}function uw(e,t,n){return K(t,x({suffix:`by_${K(e)}`},n??{}))}var fw=class e extends f8{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=E8(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!vs(t))return{facet:this.initFacetFieldDef(t,"facet")};let n=R(t),r={};for(let i of n){if(![B1,U1].includes(i)){U(O.incompatibleChannel(i,"facet"));break}let o=t[i];if(o.field===void 0){U(O.emptyFieldDef(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){let r=Ch(t,n);return r.header?r.header=sr(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=T4(this),this.child.parseData()}parseLayoutSize(){lw(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),A2e(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){let t={};for(let n of Tr)for(let r of r8){let i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:a}=i;if(a){let s=Xc("titleOrient",a.header,this.config,n);if(["right","bottom"].includes(s)){let c=t8(n,s);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[c]="end"}}if(o?.[0]){let s=n==="row"?"height":"width",c=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(s)&&(t[c]??(t[c]={}),t[c][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){let{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0,i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),k(x(x({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof e))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof e?x(x({},this.channelHasField("column")?{encode:{update:{columns:{field:K(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){let t=[],n=[],r=[];if(this.child instanceof e){if(this.child.channelHasField("column")){let i=K(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(let i of xr){let o=this.child.component.scales[i];if(o&&!o.merged){let a=o.get("type"),s=o.get("range");if(Pt(a)&&Ii(s)){let c=V4(this.child,i),l=c8(c);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):U(O.unknownField(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){let{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:a,as:s}=this.getCardinalityAggregateForChild(),c=[];for(let u of Tr){let f=this.facet[u];if(f){c.push(K(f));let{bin:d,sort:p}=f;if(et(d)&&c.push(K(f,{binSuffix:"end"})),Pr(p)){let{field:h,op:m=w4}=p,g=uw(f,p);r&&i?(o.push(g),a.push("max"),s.push(g)):(o.push(h),a.push(m),s.push(g))}else if(F(p)){let h=Ms(f,u);o.push(h),a.push("max"),s.push(h)}}}let l=!!r&&!!i;return x({name:t,data:n,groupby:c},l||o.length>0?{aggregate:x(x({},l?{cross:l}:{}),o.length?{fields:o,ops:a,as:s}:{})}:{})}facetSortFields(t){let{facet:n}=this,r=n[t];return r?Pr(r.sort)?[uw(r,r.sort,{expr:"datum"})]:F(r.sort)?[Ms(r,t,{expr:"datum"})]:[K(r,{expr:"datum"})]:[]}facetSortOrder(t){let{facet:n}=this,r=n[t];if(r){let{sort:i}=r;return[(Pr(i)?i.order:!F(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){let{facet:t,config:n}=this;if(t.facet)return PM(t.facet,"facet",n);let r={row:["top","bottom"],column:["left","right"]};for(let i of n8)if(t[i]){let o=Xc("labelOrient",t[i]?.header,n,i);if(r[i].includes(o))return PM(t[i],i,n)}}assembleMarks(){let{child:t}=this,n=this.component.data.facetRoot,r=z2e(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[x(x(x(k(x(x({name:this.getName("cell"),type:"group"},o?{title:o}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:Tr.map(c=>this.facetSortFields(c)).flat(),order:Tr.map(c=>this.facetSortOrder(c)).flat()}}),r.length>0?{data:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup(Z1e(this,[])))]}getMapping(){return this.facet}};function T2e(e,t){let{row:n,column:r}=t;if(n&&r){let i=null;for(let o of[n,r])if(Pr(o.sort)){let{field:a,op:s=w4}=o.sort;e=i=new ha(e,{joinaggregate:[{op:s,field:a,as:uw(o,o.sort,{forAs:!0})}],groupby:[K(o)]})}return i}return null}function pR(e,t){for(let n of t){let r=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;let i=e.format?.mesh,o=r.format?.feature;if(i&&o)continue;let a=e.format?.feature;if((a||o)&&a!==o)continue;let s=r.format?.mesh;if(!((i||s)&&i!==s)){if(A0(e)&&A0(r)){if(kr(e.values,r.values))return n}else if(jc(e)&&jc(r)){if(e.url===r.url)return n}else if(zM(e)&&e.name===n.dataName)return n}}return null}function mIe(e,t){if(e.data||!e.parent){if(e.data===null){let r=new Z1({values:[]});return t.push(r),r}let n=pR(e.data,t);if(n)return la(e.data)||(n.data.format=zI({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{let r=new Z1(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function gIe(e,t,n){let r=0;for(let i of t.transforms){let o,a;if(F1e(i))a=e=new k0(e,i),o="derived";else if(zh(i)){let s=r2e(i);a=e=Br.makeWithAncestors(e,{},s,n)??e,e=new bs(e,t,i.filter)}else if(MM(i))a=e=da.makeFromTransform(e,i,t),o="number";else if(O1e(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new Br(e,{[i.field]:o}),n.set(i.field,o,!1)),a=e=f2.makeFromTransform(e,i);else if(P1e(i))a=e=Ho.makeFromTransform(e,i),o="number",_h(t)&&(e=new pa(e));else if(bM(i))a=e=C8.make(e,t,i,r++),o="derived";else if(k1e(i))a=e=new Qc(e,i),o="number";else if(T1e(i))a=e=new ha(e,i),o="number";else if($1e(i))a=e=Ss.makeFromTransform(e,i),o="derived";else if(B1e(i))a=e=new g8(e,i),o="derived";else if(U1e(i))a=e=new p8(e,i),o="derived";else if(I1e(i))a=e=new m8(e,i),o="derived";else if(H1e(i))a=e=new w8(e,i),o="derived";else if(_1e(i))e=new S8(e,i);else if(R1e(i))a=e=I0.makeFromTransform(e,i),o="derived";else if(L1e(i))a=e=new d8(e,i),o="derived";else if(A1e(i))a=e=new b8(e,i),o="derived";else if(V1e(i))a=e=new M8(e,i),o="derived";else if(N1e(i))a=e=new x8(e,i),o="derived";else{U(O.invalidTransformIgnored(i));continue}if(a&&o!==void 0)for(let s of a.producedFields()??[])n.set(s,o,!1)}return e}function T4(e){let t=mIe(e,e.component.data.sources),{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,a=!(i&&(la(i)||jc(i)||A0(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new DM;la(i)?(kF(i)?t=new _4(t,i.sequence):Hh(i)&&(t=new N4(t,i.graticule)),a.parseNothing=!0):i?.format?.parse===null&&(a.parseNothing=!0),t=Br.makeExplicit(t,e,a)??t,t=new pa(t);let s=e.parent&&d2(e.parent);(bt(e)||$r(e))&&s&&(t=da.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=gIe(t,e,a));let c=o2e(e),l=i2e(e);t=Br.makeWithAncestors(t,{},x(x({},c),l),a)??t,bt(e)&&(t=v8.parseAll(t,e),t=y8.parseAll(t,e)),(bt(e)||$r(e))&&(s||(t=da.makeFromEncoding(t,e)??t),t=f2.makeFromEncoding(t,e)??t,t=k0.parseAllForSortIndex(t,e));let u=e.getDataName(Ct.Raw),f=new Dn(t,u,Ct.Raw,r);if(n[u]=f,t=f,bt(e)){let m=Ho.makeFromEncoding(t,e);m&&(t=m,_h(e)&&(t=new pa(t))),t=I0.makeFromEncoding(t,e)??t,t=Ss.makeFromEncoding(t,e)??t}bt(e)&&(t=h8.make(t,e)??t);let d=e.getDataName(Ct.Main),p=new Dn(t,d,Ct.Main,r);n[d]=p,t=p,bt(e)&&Noe(e,p);let h=null;if($r(e)){let m=e.getName("facet");t=T2e(t,e.facet)??t,h=new h2(t,e,m,p.getSource()),n[m]=h}return k(x({},e.component.data),{outputNodes:n,outputNodeRefCounts:r,raw:f,main:p,facetRoot:h,ancestorParse:a})}var dw=class extends T0{constructor(t,n,r,i){super(t,"concat",n,r,i,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&U(O.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(t).map((o,a)=>E8(o,this,this.getName(`concat_${a}`),void 0,i))}parseData(){this.component.data=T4(this);for(let t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(let t of this.children){t.parseSelections();for(let n of R(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(let t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(let t of this.children)t.parseAxesAndHeaders()}getChildren(t){return z4(t)?t.vconcat:Uf(t)?t.hconcat:t.concat}parseLayoutSize(){_2e(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){let t=i8(this);for(let n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{let n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return x(x(x(x({type:"group",name:t.getName("group")},n?{title:n}:{}),r?{style:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){let t=this.layout.columns;return k(x({},t!=null?{columns:t}:{}),{bounds:"full",align:"each"})}};function vIe(e){return e===!1||e===null}var yIe=k(x({disable:1,gridScale:1,scale:1},fF),{labelExpr:1,encode:1}),hR=R(yIe),pw=class e extends Oi{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new e(le(this.explicit),le(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!vIe(this.get(t))}hasOrientSignalRef(){return ae(this.explicit.orient)}};function I2e(e,t,n){let{encoding:r,config:i}=e,o=It(r[t])??It(r[Ir(t)]),a=e.axis(t)||{},{format:s,formatType:c}=a;if(gs(c))return x({text:Do({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:c,config:i})},n);if(s===void 0&&c===void 0&&i.customFormatTypes){if(Fc(o)==="quantitative"){if(Rc(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return x({text:Do({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i})},n);if(i.numberFormatType)return x({text:Do({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i})},n)}if(Fc(o)==="temporal"&&i.timeFormatType&&Y(o)&&!o.timeUnit)return x({text:Do({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i})},n)}return n}function F2e(e){return xr.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[EIe(n,e)]),t),{})}var CIe={bottom:"top",top:"bottom",left:"right",right:"left"};function R2e(e){let{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(let i of e.children){i.parseAxesAndHeaders();for(let o of R(i.component.axes))n.axis[o]=o8(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=bIe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(let i of xr){for(let o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(let a of o.component.axes[i]){let{value:s,explicit:c}=a.getWithExplicit("orient");if(!ae(s)){if(r[s]>0&&!c){let l=CIe[s];r[s]>r[l]&&a.set("orient",l,!1)}r[s]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(let[o,a]of(t[i]||[]).entries())o>0&&a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function bIe(e,t){if(e){if(e.length!==t.length)return;let n=e.length;for(let r=0;r<n;r++){let i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){let a=i.getWithExplicit("orient"),s=o.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;e[r]=MIe(i,o)}}}else return t.map(n=>n.clone());return e}function MIe(e,t){for(let n of hR){let r=X1(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return zb(i,o);case"gridScale":return{explicit:i.explicit,value:ot(i.value,o.value)}}return Wf(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function wIe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(ae(n.labelAngle)?n.labelAngle:y4(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===KF(r,i))return!0}return e===n[t]}var SIe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function EIe(e,t){let n=t.axis(e),r=new pw,i=It(t.encoding[e]),{mark:o,config:a}=t,s=n?.orient||a[e==="x"?"axisX":"axisY"]?.orient||a.axis?.orient||Foe(e),c=t.getScaleComponent(e).get("type"),l=Toe(e,c,s,t.config),u=n!==void 0?!n:kh("disable",a.style,n?.style,l).configValue;if(r.set("disable",u,n!==void 0),u)return r;n=n||{};let f=Ioe(i,n,e,a.style,l),d=qb(n.formatType,i,c),p=jb(i,i.type,n.format,n.formatType,a,!0),h={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:c,orient:s,labelAngle:f,format:p,formatType:d,mark:o,config:a};for(let v of hR){let y=v in YF?YF[v](h):dF(v)?n[v]:void 0,C=y!==void 0,b=wIe(y,v,n,t,e);if(C&&b)r.set(v,y,b);else{let{configValue:M=void 0,configFrom:S=void 0}=dF(v)&&v!=="values"?kh(v,a.style,n.style,l):{},w=M!==void 0;C&&!w?r.set(v,y,b):(S!=="vgAxisConfig"||SIe.has(v)&&w||$c(M)||ae(M))&&r.set(v,M,!1)}}let m=n.encoding??{},g=tM.reduce((v,y)=>{if(!r.hasAxisPart(y))return v;let C=UM(m[y]??{},t),b=y==="labels"?I2e(t,e,C):C;return b!==void 0&&!We(b)&&(v[y]={update:b}),v},{});return We(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function O2e({encoding:e,size:t}){for(let n of xr){let r=Sn(n);Y1(t[r])&&ca(e[n])&&(delete t[r],U(O.stepDropped(r)))}return t}var P2e={vgMark:"arc",encodeEntry:e=>x(x(x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),yn("x",e,{defaultPos:"mid"})),yn("y",e,{defaultPos:"mid"})),K1(e,"radius")),K1(e,"theta"))};var $2e={vgMark:"area",encodeEntry:e=>x(x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),A4("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"})),A4("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"})),Zf(e))};var B2e={vgMark:"rect",encodeEntry:e=>x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),K1(e,"x")),K1(e,"y"))};var U2e={vgMark:"shape",encodeEntry:e=>x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{let{encoding:t}=e,n=t.shape;return[x({type:"geoshape",projection:e.projectionName()},n&&Y(n)&&n.type===sa?{field:K(n,{expr:"datum"})}:{})]}};var j2e={vgMark:"image",encodeEntry:e=>x(x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),K1(e,"x")),K1(e,"y")),L4(e,"url"))};var q2e={vgMark:"line",encodeEntry:e=>x(x(x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),yn("x",e,{defaultPos:"mid"})),yn("y",e,{defaultPos:"mid"})),qt("size",e,{vgChannel:"strokeWidth"})),Zf(e))},G2e={vgMark:"trail",encodeEntry:e=>x(x(x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),yn("x",e,{defaultPos:"mid"})),yn("y",e,{defaultPos:"mid"})),qt("size",e)),Zf(e))};function mR(e,t){let{config:n}=e;return x(x(x(x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),yn("x",e,{defaultPos:"mid"})),yn("y",e,{defaultPos:"mid"})),qt("size",e)),qt("angle",e)),DIe(e,n,t))}function DIe(e,t,n){return n?{shape:{value:n}}:qt("shape",e)}var W2e={vgMark:"symbol",encodeEntry:e=>mR(e)},Y2e={vgMark:"symbol",encodeEntry:e=>mR(e,"circle")},X2e={vgMark:"symbol",encodeEntry:e=>mR(e,"square")};var Q2e={vgMark:"rect",encodeEntry:e=>x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),K1(e,"x")),K1(e,"y"))};var K2e={vgMark:"rule",encodeEntry:e=>{let{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:x(x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),A4("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),A4("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),qt("size",e,{vgChannel:"strokeWidth"}))}};var Z2e={vgMark:"text",encodeEntry:e=>{let{config:t,encoding:n}=e;return x(x(x(x(x(x(x(x(x(x({},xn(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),yn("x",e,{defaultPos:"mid"})),yn("y",e,{defaultPos:"mid"})),L4(e)),qt("size",e,{vgChannel:"fontSize"})),qt("angle",e)),_M("align",zIe(e.markDef,n,t))),_M("baseline",HIe(e.markDef,n,t))),yn("radius",e,{defaultPos:null})),yn("theta",e,{defaultPos:null}))}};function zIe(e,t,n){if(Be("align",e,n)===void 0)return"center"}function HIe(e,t,n){if(Be("baseline",e,n)===void 0)return"middle"}var J2e={vgMark:"rect",encodeEntry:e=>{let{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",o=r==="horizontal"?"height":"width";return k(x(x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),yn("x",e,{defaultPos:"mid",vgChannel:"xc"})),yn("y",e,{defaultPos:"mid",vgChannel:"yc"})),qt("size",e,{defaultValue:LIe(e),vgChannel:i})),{[o]:tt(Be("thickness",n,t))})}};function LIe(e){let{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",o=e.getScaleComponent(r==="horizontal"?"x":"y"),a=Be("size",n,t,{vgChannel:i})??t.tick.bandSize;if(a!==void 0)return a;{let s=o?o.get("range"):void 0;return s&&Ii(s)&&Oe(s.step)?s.step*3/4:L0(t.view,i)*3/4}}var hw={arc:P2e,area:$2e,bar:B2e,circle:Y2e,geoshape:U2e,image:j2e,line:q2e,point:W2e,rect:Q2e,rule:K2e,square:X2e,text:Z2e,tick:J2e,trail:G2e};function nae(e){if(Ae([D0,S0,hie],e.mark)){let t=iM(e.mark,e.encoding);if(t.length>0)return AIe(e,t)}else if(e.mark===E0){let t=Sb.some(n=>Be(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return VIe(e)}return gR(e)}var eae="faceted_path_";function AIe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:eae+e.requestDataName(Ct.Main),data:e.requestDataName(Ct.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:gR(e,{fromPrefix:eae})}]}var tae="stack_group_";function VIe(e){let[t]=gR(e,{fromPrefix:tae}),n=e.scaleName(e.stack.fieldChannel),r=(l={})=>e.vgField(e.stack.fieldChannel,l),i=(l,u)=>{let f=[r({prefix:"min",suffix:"start",expr:u}),r({prefix:"max",suffix:"start",expr:u}),r({prefix:"min",suffix:"end",expr:u}),r({prefix:"max",suffix:"end",expr:u})];return`${l}(${f.map(d=>`scale('${n}',${d})`).join(",")})`},o,a;e.stack.fieldChannel==="x"?(o=k(x({},Vc(t.encode.update,["y","yc","y2","height",...Sb])),{x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}}),a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update=k(x({},Fn(t.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(o=k(x({},Vc(t.encode.update,["x","xc","x2","width"])),{y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}}),a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update=k(x({},Fn(t.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(let l of Sb){let u=Eo(l,e.markDef,e.config);t.encode.update[l]?(o[l]=t.encode.update[l],delete t.encode.update[l]):u&&(o[l]=tt(u)),u&&(t.encode.update[l]={value:0})}let s=[];if(e.stack.groupbyChannels?.length>0)for(let l of e.stack.groupbyChannels){let u=e.fieldDef(l),f=K(u);f&&s.push(f),(u?.bin||u?.timeUnit)&&s.push(K(u,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((l,u)=>{if(t.encode.update[u])return k(x({},l),{[u]:t.encode.update[u]});{let f=Eo(u,e.markDef,e.config);return f!==void 0?k(x({},l),{[u]:tt(f)}):l}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ct.Main),name:tae+e.requestDataName(Ct.Main),groupby:s,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}function NIe(e){let{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,a=t.order;if(!(!F(a)&&cr(a)&&ub(a.value)||!a&&ub(Be("order",i,o)))){if((F(a)||Y(a))&&!n)return Db(a,{expr:"datum"});if(Fi(r)){let s=i.orient==="horizontal"?"y":"x",c=t[s];if(Y(c)){let l=c.sort;if(F(l))return{field:K(c,{prefix:s,suffix:"sort_index",expr:"datum"})};if(Pr(l))return{field:K({aggregate:Pf(e.encoding)?l.op:void 0,field:l.field},{expr:"datum"})};if(Gb(l)){let u=e.fieldDef(l.encoding);return{field:K(u,{expr:"datum"}),order:l.order}}else return l===null?void 0:{field:K(c,{binSuffix:e.stack?.impute?"mid":void 0,expr:"datum"})}}return}}}function gR(e,t={fromPrefix:""}){let{mark:n,markDef:r,encoding:i,config:o}=e,a=ot(r.clip,_Ie(e),kIe(e)),s=BI(r),c=i.key,l=NIe(e),u=TIe(e),f=Be("aria",r,o),d=hw[n].postEncodingTransform?hw[n].postEncodingTransform(e):null;return[x(k(x(x(x(x(x(x({name:e.getName("marks"),type:hw[n].vgMark},a?{clip:!0}:{}),s?{style:s}:{}),c?{key:c.field}:{}),l?{sort:l}:{}),u||{}),f===!1?{aria:f}:{}),{from:{data:t.fromPrefix+e.requestDataName(Ct.Main)},encode:{update:hw[n].encodeEntry(e)}}),d?{transform:d}:{})]}function _Ie(e){let t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function kIe(e){let t=e.component.projection;return t&&!t.isFit?!0:void 0}function TIe(e){if(!e.component.selection)return null;let t=R(e.component.selection).length,n=t,r=e.parent;for(;r&&n===0;)n=R(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip}:null}var D8=class extends f8{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,zF(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];let a=ci(t.mark)?x({},t.mark):{type:t.mark},s=a.type;a.filled===void 0&&(a.filled=g1e(a,o,{graticule:t.data&&Hh(t.data)}));let c=this.encoding=Bie(t.encoding||{},s,a.filled,o);this.markDef=gM(a,c,o),this.size=O2e({encoding:c,size:zF(t)?x(x(x({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):i}),this.stack=mM(this.markDef,c),this.specifiedScales=this.initScales(s,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegends(c),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Bf(l))}get hasProjection(){let{encoding:t}=this,n=this.mark===$b,r=t&&ore.some(i=>ke(t[i]));return n||r}scaleDomain(t){let n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return b4.reduce((r,i)=>{let o=It(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){let{domain:n,range:r}=t,i=sr(t);return F(n)&&(i.domain=n.map(Rr)),F(r)&&(i.range=r.map(Rr)),i}initAxes(t){return xr.reduce((n,r)=>{let i=t[r];if(ke(i)||r===yt&&ke(t.x2)||r===on&&ke(t.y2)){let o=ke(i)?i.axis:void 0;n[r]=o&&this.initAxis(x({},o))}return n},{})}initAxis(t){let n=R(t),r={};for(let i of n){let o=t[i];r[i]=$c(o)?Eb(o):Rr(o)}return r}initLegends(t){return vre.reduce((n,r)=>{let i=It(t[r]);if(i&&xre(r)){let o=i.legend;n[r]=o&&sr(o)}return n},{})}parseData(){this.component.data=T4(this)}parseLayoutSize(){k2e(this)}parseSelections(){this.component.selection=Voe(this,this.selection)}parseMarkGroup(){this.component.mark=nae(this)}parseAxesAndHeaders(){this.component.axes=F2e(this)}assembleSelectionTopLevelSignals(t){return J1e(this,t)}assembleSignals(){return[...OM(this),...K1e(this,[])]}assembleSelectionData(t){return eoe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return i8(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!d2(this.parent))&&(t=FF(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){let{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Cs(this.encoding,t)}fieldDef(t){let n=this.encoding[t];return li(n)}typedFieldDef(t){let n=this.fieldDef(t);return En(n)?n:null}};var mw=class e extends T0{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);let a=x(x(x({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((s,c)=>{if(Uc(s))return new e(s,this,this.getName(`layer_${c}`),a,o);if(Cr(s))return new D8(s,this,this.getName(`layer_${c}`),a,o);throw new Error(O.invalidSpec(s))})}parseData(){this.component.data=T4(this);for(let t of this.children)t.parseData()}parseLayoutSize(){N2e(this)}parseSelections(){this.component.selection={};for(let t of this.children){t.parseSelections();for(let n of R(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(let t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){R2e(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),OM(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),i8(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){let t=new Set;for(let r of this.children)for(let i of te(r.assembleGroupStyle()))t.add(i);let n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(let n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return toe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),WM(this))}};function E8(e,t,n,r,i){if(Pc(e))return new fw(e,t,n,i);if(Uc(e))return new mw(e,t,n,r,i);if(Cr(e))return new D8(e,t,n,r,i);if(EF(e))return new dw(e,t,n,i);throw new Error(O.invalidSpec(e))}function rae(e,t={}){t.logger&&Tre(t.logger),t.fieldTitle&&cF(t.fieldTitle);try{let n=hM(Pa(t.config,e.config)),r=SM(e,n),i=E8(r,null,"",void 0,n);return i.parse(),l2e(i.component.data,i),{spec:FIe(i,IIe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Ire(),t.fieldTitle&&Oie()}}function IIe(e,t,n,r){let i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Q(t)&&(t={type:t}),i&&o&&X1e(t.type)){if(i==="step"&&o==="step")U(O.droppingFit()),t.type="pad";else if(i==="step"||o==="step"){let a=i==="step"?"width":"height";U(O.droppingFit(C4(a)));let s=a==="width"?"height":"width";t.type=Q1e(s)}}return x(x(x({},R(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t}),_F(n,!1)),_F(e,!0))}function FIe(e,t,n={},r){let i=e.config?p1e(e.config):void 0,o=[].concat(e.assembleSelectionData([]),H2e(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),c=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0),u=e.assembleLayoutSignals();u=u.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);let p=t,{params:f}=p,d=ie(p,["params"]);return x(x(x(x(k(x(x(x(x(x({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),d),s?{title:s}:{}),c?{style:c}:{}),l?{encode:{update:l}}:{}),{data:o}),a.length>0?{projections:a}:{}),e.assembleGroup([...u,...e.assembleSelectionTopLevelSignals([]),...pM(f)])),i?{config:i}:{}),r?{usermeta:r}:{})}var RIe=Xne.version;function OIe(e){let[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var yR=OIe;var SR={};br(SR,{carbong10:()=>IFe,carbong100:()=>RFe,carbong90:()=>FFe,carbonwhite:()=>TFe,dark:()=>oFe,excel:()=>aFe,fivethirtyeight:()=>lFe,ggplot2:()=>uFe,googlecharts:()=>MFe,latimes:()=>hFe,powerbi:()=>NFe,quartz:()=>mFe,urbaninstitute:()=>bFe,version:()=>OFe,vox:()=>gFe});var PIe="vega-themes",$Ie="2.14.0",BIe="Themes for stylized Vega and Vega-Lite visualizations.",UIe=["vega","vega-lite","themes","style"],jIe="BSD-3-Clause",qIe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},GIe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],WIe="build/vega-themes.js",YIe="build/vega-themes.module.js",XIe="build/vega-themes.min.js",QIe="build/vega-themes.min.js",KIe="build/vega-themes.module.d.ts",ZIe={type:"git",url:"https://github.com/vega/vega-themes.git"},JIe=["src","build"],eFe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},tFe={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},nFe={vega:"*","vega-lite":"*"},rFe={},iFe={name:PIe,version:$Ie,description:BIe,keywords:UIe,license:jIe,author:qIe,contributors:GIe,main:WIe,module:YIe,unpkg:XIe,jsdelivr:QIe,types:KIe,repository:ZIe,files:JIe,scripts:eFe,devDependencies:tFe,peerDependencies:nFe,dependencies:rFe},z8="#fff",iae="#888",oFe={background:"#333",view:{stroke:iae},title:{color:z8,subtitleColor:z8},style:{"guide-label":{fill:z8},"guide-title":{fill:z8}},axis:{domainColor:z8,gridColor:iae,tickColor:z8}},F0="#4572a7",aFe={background:"#fff",arc:{fill:F0},area:{fill:F0},line:{stroke:F0,strokeWidth:2},path:{stroke:F0},rect:{fill:F0},shape:{stroke:F0},symbol:{fill:F0,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},R0="#30a2da",xR="#cbcbcb",sFe="#999",cFe="#333",oae="#f0f0f0",aae="#333",lFe={arc:{fill:R0},area:{fill:R0},axis:{domainColor:xR,grid:!0,gridColor:xR,gridWidth:1,labelColor:sFe,labelFontSize:10,titleColor:cFe,tickColor:xR,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:oae,group:{fill:oae},legend:{labelColor:aae,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:aae,titleFontSize:14,titlePadding:10},line:{stroke:R0,strokeWidth:2},path:{stroke:R0,strokeWidth:.5},rect:{fill:R0},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:R0},bar:{binSpacing:2,fill:R0,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},O0="#000",uFe={group:{fill:"#e5e5e5"},arc:{fill:O0},area:{fill:O0},line:{stroke:O0},path:{stroke:O0},rect:{fill:O0},shape:{stroke:O0},symbol:{fill:O0,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},fFe=22,dFe="normal",sae="Benton Gothic, sans-serif",cae=11.5,pFe="normal",P0="#82c6df",CR="Benton Gothic Bold, sans-serif",lae="normal",uae=13,$h={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},hFe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:CR,fontSize:fFe,fontWeight:dFe},arc:{fill:P0},area:{fill:P0},line:{stroke:P0,strokeWidth:2},path:{stroke:P0},rect:{fill:P0},shape:{stroke:P0},symbol:{fill:P0,size:30},axis:{labelFont:sae,labelFontSize:cae,labelFontWeight:pFe,titleFont:CR,titleFontSize:uae,titleFontWeight:lae},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:sae,labelFontSize:cae,symbolType:"square",titleFont:CR,titleFontSize:uae,titleFontWeight:lae},range:{category:$h["category-6"],diverging:$h["fireandice-6"],heatmap:$h["fire-7"],ordinal:$h["fire-7"],ramp:$h["fire-7"]}},$0="#ab5787",gw="#979797",mFe={background:"#f9f9f9",arc:{fill:$0},area:{fill:$0},line:{stroke:$0},path:{stroke:$0},rect:{fill:$0},shape:{stroke:$0},symbol:{fill:$0,size:30},axis:{domainColor:gw,domainWidth:.5,gridWidth:.2,labelColor:gw,tickColor:gw,tickWidth:.2,titleColor:gw},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},B0="#3e5c69",gFe={background:"#fff",arc:{fill:B0},area:{fill:B0},line:{stroke:B0},path:{stroke:B0},rect:{fill:B0},shape:{stroke:B0},symbol:{fill:B0},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},m2="#1696d2",fae="#000000",vFe="#FFFFFF",vw="Lato",bR="Lato",yFe="Lato",xFe="#DEDDDD",CFe=18,Bh={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},bFe={background:vFe,title:{anchor:"start",fontSize:CFe,font:vw},axisX:{domain:!0,domainColor:fae,domainWidth:1,grid:!1,labelFontSize:12,labelFont:bR,labelAngle:0,tickColor:fae,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:vw},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:xFe,gridWidth:1,labelFontSize:12,labelFont:bR,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:vw,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:bR,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:vw,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Bh["six-groups-cat-1"],diverging:Bh["diverging-colors"],heatmap:Bh["diverging-colors"],ordinal:Bh["six-groups-seq"],ramp:Bh["shades-blue"]},area:{fill:m2},rect:{fill:m2},line:{color:m2,stroke:m2,strokeWidth:5},trail:{color:m2,stroke:m2,strokeWidth:0,size:1},path:{stroke:m2,strokeWidth:.5},point:{filled:!0},text:{font:yFe,color:m2,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:m2,stroke:null}},arc:{fill:m2},shape:{stroke:m2},symbol:{fill:m2,size:30}},U0="#3366CC",dae="#ccc",yw="Arial, sans-serif",MFe={arc:{fill:U0},area:{fill:U0},path:{stroke:U0},rect:{fill:U0},shape:{stroke:U0},symbol:{stroke:U0},circle:{fill:U0},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:yw,fontSize:12},"guide-title":{font:yw,fontSize:12},"group-title":{font:yw,fontSize:12}},title:{font:yw,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:dae,tickColor:dae,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},wR=e=>e*(1/3+1),pae=wR(9),hae=wR(10),mae=wR(12),Uh="Segoe UI",gae="wf_standard-font, helvetica, arial, sans-serif",vae="#252423",jh="#605E5C",yae="transparent",wFe="#C8C6C4",ga="#118DFF",SFe="#12239E",EFe="#E66C37",DFe="#6B007B",zFe="#E044A7",HFe="#744EC2",LFe="#D9B300",AFe="#D64550",bae=ga,Mae="#DEEFFF",xae=[Mae,bae],VFe=[Mae,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",bae],NFe={view:{stroke:yae},background:yae,font:Uh,header:{titleFont:gae,titleFontSize:mae,titleColor:vae,labelFont:Uh,labelFontSize:hae,labelColor:jh},axis:{ticks:!1,grid:!1,domain:!1,labelColor:jh,labelFontSize:pae,titleFont:gae,titleColor:vae,titleFontSize:mae,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:wFe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ga},line:{stroke:ga,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Uh,fontSize:pae,fill:jh},arc:{fill:ga},area:{fill:ga,line:!0,opacity:.6},path:{stroke:ga},rect:{fill:ga},point:{fill:ga,filled:!0,size:75},shape:{stroke:ga},symbol:{fill:ga,strokeWidth:1.5,size:50},legend:{titleFont:Uh,titleFontWeight:"bold",titleColor:jh,labelFont:Uh,labelFontSize:hae,labelColor:jh,symbolType:"circle",symbolSize:75},range:{category:[ga,SFe,EFe,DFe,zFe,HFe,LFe,AFe],diverging:xae,heatmap:xae,ordinal:VFe}},MR='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Cae=400,_Fe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],kFe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function xw({type:e,background:t}){let n=e==="dark"?"#161616":"#ffffff",r=e==="dark"?"#f4f4f4":"#161616",i=e==="dark"?_Fe:kFe,o=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:MR,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:MR,fill:r,fontWeight:Cae},"guide-title":{font:MR,fill:r,fontWeight:Cae}},range:{category:i,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}var TFe=xw({type:"light",background:"#ffffff"}),IFe=xw({type:"light",background:"#f4f4f4"}),FFe=xw({type:"dark",background:"#262626"}),RFe=xw({type:"dark",background:"#161616"}),OFe=iFe.version;var PFe="vega-tooltip",$Fe="0.34.0",BFe="A tooltip plugin for Vega-Lite and Vega visualizations.",UFe=["vega-lite","vega","tooltip"],jFe={type:"git",url:"https://github.com/vega/vega-tooltip.git"},qFe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},GFe=["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],WFe="BSD-3-Clause",YFe={url:"https://github.com/vega/vega-tooltip/issues"},XFe="https://github.com/vega/vega-tooltip#readme",QFe="build/vega-tooltip.js",KFe="build/vega-tooltip.module.js",ZFe="build/vega-tooltip.min.js",JFe="build/vega-tooltip.min.js",eRe="build/vega-tooltip.module.d.ts",tRe=["src","build","types"],nRe={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"rimraf build && rimraf src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prepare:"yarn copy:data",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},rRe={"@babel/core":"^7.22.10","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.10","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@types/jest":"^29.5.3","@typescript-eslint/eslint-plugin":"^6.3.0","@typescript-eslint/parser":"^6.3.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.46.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","gh-pages":"^6.1.0",jest:"^29.6.2","jest-environment-jsdom":"^29.6.2",path:"^0.12.7",prettier:"^3.0.1","release-it":"^16.1.3",rollup:"^4.6.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.3",sass:"^1.64.2",typescript:"~5.3.2","vega-datasets":"^2.7.0","vega-typings":"^0.24.2"},iRe={"vega-util":"^1.17.2"},oRe={name:PFe,version:$Fe,description:BFe,keywords:UFe,repository:jFe,author:qFe,collaborators:GFe,license:WFe,bugs:YFe,homepage:XFe,main:QFe,module:KFe,unpkg:ZFe,jsdelivr:JFe,types:eRe,files:tRe,scripts:nRe,devDependencies:rRe,dependencies:iRe};function aRe(e,t,n,r){if(F(e))return`[${e.map(o=>t(Q(o)?o:wae(o,n))).join(", ")}]`;if(ne(e)){let o="",i=e,{title:a,image:s}=i,c=ie(i,["title","image"]);a&&(o+=`<h2>${t(a)}</h2>`),s&&(o+=`<img src="${new URL(t(s),r||location.href).href}">`);let l=Object.keys(c);if(l.length>0){o+="<table>";for(let u of l){let f=c[u];f!==void 0&&(ne(f)&&(f=wae(f,n)),o+=`<tr><td class="key">${t(u)}</td><td class="value">${t(f)}</td></tr>`)}o+="</table>"}return o||"{}"}return t(e)}function sRe(e){let t=[];return function(n,r){if(typeof r!="object"||r===null)return r;let i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function wae(e,t){return JSON.stringify(e,sRe(t))}var cRe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`,Sae="vg-tooltip-element",lRe={offsetX:10,offsetY:10,id:Sae,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:uRe,maxDepth:2,formatTooltip:aRe,baseURL:""};function uRe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function fRe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return cRe.toString().replace(Sae,e)}function dRe(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}var Cw=class{constructor(t){this.options=x(x({},lRe),t);let n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){let r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=fRe(n);let i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);let{x:o,y:a}=dRe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${a}px`,this.el.style.left=`${o}px`}},DAt=oRe.version;function pRe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ER,Eae;function hRe(){return Eae||(Eae=1,ER=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),ER}var mRe=Lt;Lt.Node=G0;Lt.create=Lt;function Lt(e){var t=this;if(t instanceof Lt||(t=new Lt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}Lt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Lt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Lt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Lt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)vRe(this,arguments[e]);return this.length};Lt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)yRe(this,arguments[e]);return this.length};Lt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Lt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Lt.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};Lt.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};Lt.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Lt.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Lt.prototype.map=function(e,t){t=t||this;for(var n=new Lt,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};Lt.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Lt,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};Lt.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};Lt.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};Lt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Lt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Lt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Lt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};Lt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Lt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};Lt.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var o=[],r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=gRe(this,i,n[r]);return o};Lt.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function gRe(e,t,n){var r=t===e.head?new G0(n,null,t,e):new G0(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function vRe(e,t){e.tail=new G0(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function yRe(e,t){e.head=new G0(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function G0(e,t,n,r){if(!(this instanceof G0))return new G0(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{hRe()(Lt)}catch{}var xRe=mRe,j0=Symbol("max"),Zc=Symbol("length"),H8=Symbol("lengthCalculator"),Wh=Symbol("allowStale"),q0=Symbol("maxAge"),Kc=Symbol("dispose"),Dae=Symbol("noDisposeOnSet"),Ur=Symbol("lruList"),va=Symbol("cache"),Oae=Symbol("updateAgeOnGet"),DR=()=>1,AR=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[j0]=t.max||1/0;let n=t.length||DR;if(this[H8]=typeof n!="function"?DR:n,this[Wh]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[q0]=t.maxAge||0,this[Kc]=t.dispose,this[Dae]=t.noDisposeOnSet||!1,this[Oae]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[j0]=t||1/0,qh(this)}get max(){return this[j0]}set allowStale(t){this[Wh]=!!t}get allowStale(){return this[Wh]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[q0]=t,qh(this)}get maxAge(){return this[q0]}set lengthCalculator(t){typeof t!="function"&&(t=DR),t!==this[H8]&&(this[H8]=t,this[Zc]=0,this[Ur].forEach(n=>{n.length=this[H8](n.value,n.key),this[Zc]+=n.length})),qh(this)}get lengthCalculator(){return this[H8]}get length(){return this[Zc]}get itemCount(){return this[Ur].length}rforEach(t,n){n=n||this;for(let r=this[Ur].tail;r!==null;){let i=r.prev;zae(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Ur].head;r!==null;){let i=r.next;zae(this,t,r,n),r=i}}keys(){return this[Ur].toArray().map(t=>t.key)}values(){return this[Ur].toArray().map(t=>t.value)}reset(){this[Kc]&&this[Ur]&&this[Ur].length&&this[Ur].forEach(t=>this[Kc](t.key,t.value)),this[va]=new Map,this[Ur]=new xRe,this[Zc]=0}dump(){return this[Ur].map(t=>Sw(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ur]}set(t,n,r){if(r=r||this[q0],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,o=this[H8](n,t);if(this[va].has(t)){if(o>this[j0])return A8(this,this[va].get(t)),!1;let c=this[va].get(t).value;return this[Kc]&&(this[Dae]||this[Kc](t,c.value)),c.now=i,c.maxAge=r,c.value=n,this[Zc]+=o-c.length,c.length=o,this.get(t),qh(this),!0}let a=new VR(t,n,o,i,r);return a.length>this[j0]?(this[Kc]&&this[Kc](t,n),!1):(this[Zc]+=a.length,this[Ur].unshift(a),this[va].set(t,this[Ur].head),qh(this),!0)}has(t){if(!this[va].has(t))return!1;let n=this[va].get(t).value;return!Sw(this,n)}get(t){return zR(this,t,!0)}peek(t){return zR(this,t,!1)}pop(){let t=this[Ur].tail;return t?(A8(this,t),t.value):null}del(t){A8(this,this[va].get(t))}load(t){this.reset();let n=Date.now();for(let r=t.length-1;r>=0;r--){let i=t[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let a=o-n;a>0&&this.set(i.k,i.v,a)}}}prune(){this[va].forEach((t,n)=>zR(this,n,!1))}},zR=(e,t,n)=>{let r=e[va].get(t);if(r){let i=r.value;if(Sw(e,i)){if(A8(e,r),!e[Wh])return}else n&&(e[Oae]&&(r.value.now=Date.now()),e[Ur].unshiftNode(r));return i.value}},Sw=(e,t)=>{if(!t||!t.maxAge&&!e[q0])return!1;let n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[q0]&&n>e[q0]},qh=e=>{if(e[Zc]>e[j0])for(let t=e[Ur].tail;e[Zc]>e[j0]&&t!==null;){let n=t.prev;A8(e,t),t=n}},A8=(e,t)=>{if(t){let n=t.value;e[Kc]&&e[Kc](n.key,n.value),e[Zc]-=n.length,e[va].delete(n.key),e[Ur].removeNode(t)}},VR=class{constructor(t,n,r,i,o){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}},zae=(e,t,n,r)=>{let i=n.value;Sw(e,i)&&(A8(e,n),e[Wh]||(i=void 0)),i&&t.call(r,i.value,i.key,e)},CRe=AR,bRe=Object.freeze({loose:!0}),MRe=Object.freeze({}),wRe=e=>e?typeof e!="object"?bRe:e:MRe,_R=wRe,NR={exports:{}},SRe="2.0.0",Pae=256,ERe=Number.MAX_SAFE_INTEGER||9007199254740991,DRe=16,zRe=Pae-6,HRe=["major","premajor","minor","preminor","patch","prepatch","prerelease"],kR={MAX_LENGTH:Pae,MAX_SAFE_COMPONENT_LENGTH:DRe,MAX_SAFE_BUILD_LENGTH:zRe,MAX_SAFE_INTEGER:ERe,RELEASE_TYPES:HRe,SEMVER_SPEC_VERSION:SRe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},LRe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},Dw=LRe;(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=kR,o=Dw;t=e.exports={};let a=t.re=[],s=t.safeRe=[],c=t.src=[],l=t.t={},u=0,f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],p=m=>{for(let[g,v]of d)m=m.split(`${g}*`).join(`${g}{0,${v}}`).split(`${g}+`).join(`${g}{1,${v}}`);return m},h=(m,g,v)=>{let y=p(g),C=u++;o(m,C,g),l[m]=C,c[C]=g,a[C]=new RegExp(g,v?"g":void 0),s[C]=new RegExp(y,v?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),h("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${f}+`),h("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),h("FULL",`^${c[l.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),h("LOOSE",`^${c[l.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),h("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),h("COERCERTL",c[l.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(NR,NR.exports);var TR=NR.exports,Hae=/^[0-9]+$/,$ae=(e,t)=>{let n=Hae.test(e),r=Hae.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},ARe=(e,t)=>$ae(t,e),VRe={compareIdentifiers:$ae,rcompareIdentifiers:ARe},bw=Dw,{MAX_LENGTH:Lae,MAX_SAFE_INTEGER:Mw}=kR,{safeRe:Aae,t:Vae}=TR,NRe=_R,{compareIdentifiers:L8}=VRe,_Re=class Es{constructor(t,n){if(n=NRe(n),t instanceof Es){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Lae)throw new TypeError(`version is longer than ${Lae} characters`);bw("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=t.trim().match(n.loose?Aae[Vae.LOOSE]:Aae[Vae.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Mw||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Mw||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Mw||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<Mw)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(bw("SemVer.compare",this.version,this.options,t),!(t instanceof Es)){if(typeof t=="string"&&t===this.version)return 0;t=new Es(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Es||(t=new Es(t,this.options)),L8(this.major,t.major)||L8(this.minor,t.minor)||L8(this.patch,t.patch)}comparePre(t){if(t instanceof Es||(t=new Es(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=t.prerelease[n];if(bw("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return L8(r,i)}while(++n)}compareBuild(t){t instanceof Es||(t=new Es(t,this.options));let n=0;do{let r=this.build[n],i=t.build[n];if(bw("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return L8(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),L8(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}},IR=_Re,Nae=IR,kRe=(e,t,n)=>new Nae(e,n).compare(new Nae(t,n)),V8=kRe,TRe=V8,IRe=(e,t,n)=>TRe(e,t,n)===0,FRe=IRe,RRe=V8,ORe=(e,t,n)=>RRe(e,t,n)!==0,PRe=ORe,$Re=V8,BRe=(e,t,n)=>$Re(e,t,n)>0,URe=BRe,jRe=V8,qRe=(e,t,n)=>jRe(e,t,n)>=0,GRe=qRe,WRe=V8,YRe=(e,t,n)=>WRe(e,t,n)<0,XRe=YRe,QRe=V8,KRe=(e,t,n)=>QRe(e,t,n)<=0,ZRe=KRe,JRe=FRe,eOe=PRe,tOe=URe,nOe=GRe,rOe=XRe,iOe=ZRe,oOe=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return JRe(e,n,r);case"!=":return eOe(e,n,r);case">":return tOe(e,n,r);case">=":return nOe(e,n,r);case"<":return rOe(e,n,r);case"<=":return iOe(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}},aOe=oOe,HR,_ae;function sOe(){if(_ae)return HR;_ae=1;let e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,f){if(f=n(f),u instanceof t){if(u.loose===!!f.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),a("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(u){let f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=u.match(f);if(!d)throw new TypeError(`Invalid comparator: ${u}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new s(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(a("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new s(u,this.options)}catch{return!1}return o(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new c(this.value,f).test(u.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||o(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||o(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}HR=t;let n=_R,{safeRe:r,t:i}=TR,o=aOe,a=Dw,s=IR,c=Bae();return HR}var LR,kae;function Bae(){if(kae)return LR;kae=1;class e{constructor(_,N){if(N=r(N),_ instanceof e)return _.loose===!!N.loose&&_.includePrerelease===!!N.includePrerelease?_:new e(_.raw,N);if(_ instanceof i)return this.raw=_.value,this.set=[[_]],this.format(),this;if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=_.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(I=>this.parseRange(I.trim())).filter(I=>I.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let I=this.set[0];if(this.set=this.set.filter(G=>!h(G[0])),this.set.length===0)this.set=[I];else if(this.set.length>1){for(let G of this.set)if(G.length===1&&m(G[0])){this.set=[G];break}}}this.format()}format(){return this.range=this.set.map(_=>_.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(_){let I=((this.options.includePrerelease&&d)|(this.options.loose&&p))+":"+_,G=n.get(I);if(G)return G;let X=this.options.loose,J=X?s[c.HYPHENRANGELOOSE]:s[c.HYPHENRANGE];_=_.replace(J,A(this.options.includePrerelease)),o("hyphen replace",_),_=_.replace(s[c.COMPARATORTRIM],l),o("comparator trim",_),_=_.replace(s[c.TILDETRIM],u),o("tilde trim",_),_=_.replace(s[c.CARETTRIM],f),o("caret trim",_);let we=_.split(" ").map(st=>v(st,this.options)).join(" ").split(/\s+/).map(st=>L(st,this.options));X&&(we=we.filter(st=>(o("loose invalid filter",st,this.options),!!st.match(s[c.COMPARATORLOOSE])))),o("range list",we);let Se=new Map,Xe=we.map(st=>new i(st,this.options));for(let st of Xe){if(h(st))return[st];Se.set(st.value,st)}Se.size>1&&Se.has("")&&Se.delete("");let Dt=[...Se.values()];return n.set(I,Dt),Dt}intersects(_,N){if(!(_ instanceof e))throw new TypeError("a Range is required");return this.set.some(I=>g(I,N)&&_.set.some(G=>g(G,N)&&I.every(X=>G.every(J=>X.intersects(J,N)))))}test(_){if(!_)return!1;if(typeof _=="string")try{_=new a(_,this.options)}catch{return!1}for(let N=0;N<this.set.length;N++)if(j(this.set[N],_,this.options))return!0;return!1}}LR=e;let t=CRe,n=new t({max:1e3}),r=_R,i=sOe(),o=Dw,a=IR,{safeRe:s,t:c,comparatorTrimReplace:l,tildeTrimReplace:u,caretTrimReplace:f}=TR,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:p}=kR,h=V=>V.value==="<0.0.0-0",m=V=>V.value==="",g=(V,_)=>{let N=!0,I=V.slice(),G=I.pop();for(;N&&I.length;)N=I.every(X=>G.intersects(X,_)),G=I.pop();return N},v=(V,_)=>(o("comp",V,_),V=M(V,_),o("caret",V),V=C(V,_),o("tildes",V),V=w(V,_),o("xrange",V),V=D(V,_),o("stars",V),V),y=V=>!V||V.toLowerCase()==="x"||V==="*",C=(V,_)=>V.trim().split(/\s+/).map(N=>b(N,_)).join(" "),b=(V,_)=>{let N=_.loose?s[c.TILDELOOSE]:s[c.TILDE];return V.replace(N,(I,G,X,J,we)=>{o("tilde",V,I,G,X,J,we);let Se;return y(G)?Se="":y(X)?Se=`>=${G}.0.0 <${+G+1}.0.0-0`:y(J)?Se=`>=${G}.${X}.0 <${G}.${+X+1}.0-0`:we?(o("replaceTilde pr",we),Se=`>=${G}.${X}.${J}-${we} <${G}.${+X+1}.0-0`):Se=`>=${G}.${X}.${J} <${G}.${+X+1}.0-0`,o("tilde return",Se),Se})},M=(V,_)=>V.trim().split(/\s+/).map(N=>S(N,_)).join(" "),S=(V,_)=>{o("caret",V,_);let N=_.loose?s[c.CARETLOOSE]:s[c.CARET],I=_.includePrerelease?"-0":"";return V.replace(N,(G,X,J,we,Se)=>{o("caret",V,G,X,J,we,Se);let Xe;return y(X)?Xe="":y(J)?Xe=`>=${X}.0.0${I} <${+X+1}.0.0-0`:y(we)?X==="0"?Xe=`>=${X}.${J}.0${I} <${X}.${+J+1}.0-0`:Xe=`>=${X}.${J}.0${I} <${+X+1}.0.0-0`:Se?(o("replaceCaret pr",Se),X==="0"?J==="0"?Xe=`>=${X}.${J}.${we}-${Se} <${X}.${J}.${+we+1}-0`:Xe=`>=${X}.${J}.${we}-${Se} <${X}.${+J+1}.0-0`:Xe=`>=${X}.${J}.${we}-${Se} <${+X+1}.0.0-0`):(o("no pr"),X==="0"?J==="0"?Xe=`>=${X}.${J}.${we}${I} <${X}.${J}.${+we+1}-0`:Xe=`>=${X}.${J}.${we}${I} <${X}.${+J+1}.0-0`:Xe=`>=${X}.${J}.${we} <${+X+1}.0.0-0`),o("caret return",Xe),Xe})},w=(V,_)=>(o("replaceXRanges",V,_),V.split(/\s+/).map(N=>E(N,_)).join(" ")),E=(V,_)=>{V=V.trim();let N=_.loose?s[c.XRANGELOOSE]:s[c.XRANGE];return V.replace(N,(I,G,X,J,we,Se)=>{o("xRange",V,I,G,X,J,we,Se);let Xe=y(X),Dt=Xe||y(J),st=Dt||y(we),en=st;return G==="="&&en&&(G=""),Se=_.includePrerelease?"-0":"",Xe?G===">"||G==="<"?I="<0.0.0-0":I="*":G&&en?(Dt&&(J=0),we=0,G===">"?(G=">=",Dt?(X=+X+1,J=0,we=0):(J=+J+1,we=0)):G==="<="&&(G="<",Dt?X=+X+1:J=+J+1),G==="<"&&(Se="-0"),I=`${G+X}.${J}.${we}${Se}`):Dt?I=`>=${X}.0.0${Se} <${+X+1}.0.0-0`:st&&(I=`>=${X}.${J}.0${Se} <${X}.${+J+1}.0-0`),o("xRange return",I),I})},D=(V,_)=>(o("replaceStars",V,_),V.trim().replace(s[c.STAR],"")),L=(V,_)=>(o("replaceGTE0",V,_),V.trim().replace(s[_.includePrerelease?c.GTE0PRE:c.GTE0],"")),A=V=>(_,N,I,G,X,J,we,Se,Xe,Dt,st,en,Hs)=>(y(I)?N="":y(G)?N=`>=${I}.0.0${V?"-0":""}`:y(X)?N=`>=${I}.${G}.0${V?"-0":""}`:J?N=`>=${N}`:N=`>=${N}${V?"-0":""}`,y(Xe)?Se="":y(Dt)?Se=`<${+Xe+1}.0.0-0`:y(st)?Se=`<${Xe}.${+Dt+1}.0-0`:en?Se=`<=${Xe}.${Dt}.${st}-${en}`:V?Se=`<${Xe}.${Dt}.${+st+1}-0`:Se=`<=${Se}`,`${N} ${Se}`.trim()),j=(V,_,N)=>{for(let I=0;I<V.length;I++)if(!V[I].test(_))return!1;if(_.prerelease.length&&!N.includePrerelease){for(let I=0;I<V.length;I++)if(o(V[I].semver),V[I].semver!==i.ANY&&V[I].semver.prerelease.length>0){let G=V[I].semver;if(G.major===_.major&&G.minor===_.minor&&G.patch===_.patch)return!0}return!1}return!0};return LR}var cOe=Bae(),lOe=(e,t,n)=>{try{t=new cOe(t,n)}catch{return!1}return t.test(e)},uOe=lOe,Uae=pRe(uOe);function fOe(e,t,n){let r=e.open(t),i=1e4,o=250,{origin:a}=new URL(t),s=~~(i/o);function c(u){u.source===r&&(s=0,e.removeEventListener("message",c,!1))}e.addEventListener("message",c,!1);function l(){s<=0||(r.postMessage(n,a),setTimeout(l,o),s-=1)}setTimeout(l,o)}var dOe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function jae(e,...t){for(let n of t)pOe(e,n);return e}function pOe(e,t){for(let n of Object.keys(t))ec(e,n,t[n],!0)}var hOe="vega-embed",mOe="6.24.0",gOe="Publish Vega visualizations as embedded web components.",vOe=["vega","data","visualization","component","embed"],yOe={type:"git",url:"http://github.com/vega/vega-embed.git"},xOe={name:"UW Interactive Data Lab",url:"http://idl.cs.washington.edu"},COe=[{name:"Dominik Moritz",url:"https://www.domoritz.de"}],bOe={url:"https://github.com/vega/vega-embed/issues"},MOe="https://github.com/vega/vega-embed#readme",wOe="BSD-3-Clause",SOe="build/vega-embed.js",EOe="build/vega-embed.module.js",DOe="build/vega-embed.min.js",zOe="build/vega-embed.min.js",HOe="build/vega-embed.module.d.ts",LOe=["src","build","patches"],AOe={"@babel/core":"^7.23.6","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.23.6","@babel/preset-env":"^7.23.6","@babel/preset-typescript":"^7.23.3","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-commonjs":"25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/jest":"^29.5.11","@types/semver":"^7.5.6","@typescript-eslint/eslint-plugin":"^6.14.0","@typescript-eslint/parser":"^6.14.0","browser-sync":"^2.29.3",concurrently:"^8.2.2","del-cli":"^5.1.0",eslint:"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.6.0","eslint-plugin-prettier":"^5.0.1",jest:"^29.7.0","jest-canvas-mock":"^2.5.2","jest-environment-jsdom":"^29.7.0","patch-package":"^8.0.0","postinstall-postinstall":"^2.1.0",prettier:"^3.1.1","release-it":"^17.0.1",rollup:"4.9.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",sass:"^1.69.5",typescript:"^5.3.3",vega:"^5.22.1","vega-lite":"^5.2.0"},VOe={vega:"^5.21.0","vega-lite":"*"},NOe={"fast-json-patch":"^3.1.1","json-stringify-pretty-compact":"^3.0.0",semver:"^7.5.4",tslib:"^2.6.2","vega-interpreter":"^1.0.5","vega-schema-url-parser":"^2.2.0","vega-themes":"^2.14.0","vega-tooltip":"^0.34.0"},_Oe=["yallist"],kOe={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"del-cli build src/style.ts",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start --directory -s -f build *.html",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},TOe={name:hOe,version:mOe,description:gOe,keywords:vOe,repository:yOe,author:xOe,contributors:COe,bugs:bOe,homepage:MOe,license:wOe,main:SOe,module:EOe,unpkg:DOe,jsdelivr:zOe,types:HOe,files:LOe,devDependencies:AOe,peerDependencies:VOe,dependencies:NOe,bundledDependencies:_Oe,scripts:kOe},kAt=TOe.version,Ds=wI,Yh=vR,Tae=typeof window<"u"?window:void 0;Yh===void 0&&Tae?.vl?.compile&&(Yh=Tae.vl);var IOe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},FOe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Gh={vega:"Vega","vega-lite":"Vega-Lite"},Ew={vega:Ds.version,"vega-lite":Yh?Yh.version:"not available"},ROe={vega:e=>e,"vega-lite":(e,t)=>Yh.compile(e,{config:t}).spec},OOe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,POe="chart-wrapper";function $Oe(e){return typeof e=="function"}function Iae(e,t,n,r){let i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+o),a.document.title=`${Gh[r]} JSON Source`}function BOe(e,t){if(e.$schema){let n=yR(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Gh[n.library]}, but mode argument sets ${Gh[t]??t}.`);let r=n.library;return Uae(Ew[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Gh[r]} ${n.version}, but the current version of ${Gh[r]} is v${Ew[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function qae(e){return!!(e&&"load"in e)}function Fae(e){return qae(e)?e:Ds.loader(e)}function UOe(e){let t=e.usermeta?.embedOptions??{};return Q(t.defaultStyle)&&(t.defaultStyle=!1),t}function Gae(r,i){return Gt(this,arguments,function*(e,t,n={}){let o,a;Q(t)?(a=Fae(n.loader),o=JSON.parse(yield a.load(t))):o=t;let s=UOe(o),c=s.loader;(!a||c)&&(a=Fae(n.loader??c));let l=yield Rae(s,a),u=yield Rae(n,a),f=k(x({},jae(u,l)),{config:Pa(u.config??{},l.config??{})});return yield qOe(e,o,f,a)})}function Rae(e,t){return Gt(this,null,function*(){let n=Q(e.config)?JSON.parse(yield t.load(e.config)):e.config??{},r=Q(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return x(x(x({},e),r?{patch:r}:{}),n?{config:n}:{})})}function jOe(e){let t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}function qOe(i,o){return Gt(this,arguments,function*(e,t,n={},r){let a=n.theme?Pa(SR[n.theme],n.config??{}):n.config,s=A1(n.actions)?n.actions:jae({},IOe,n.actions??{}),c=x(x({},FOe),n.i18n),l=n.renderer??"canvas",u=n.logLevel??Ds.Warn,f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){let w="vega-embed-style",{root:E,rootContainer:D}=jOe(d);if(!E.getElementById(w)){let L=document.createElement("style");L.id=w,L.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?dOe.toString():n.defaultStyle,D.appendChild(L)}}let p=BOe(t,n.mode),h=ROe[p](t,a);if(p==="vega-lite"&&h.$schema){let w=yR(h.$schema);Uae(Ew.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${Ew.vega}.`)}d.classList.add("vega-embed"),s&&d.classList.add("has-actions"),d.innerHTML="";let m=d;if(s){let w=document.createElement("div");w.classList.add(POe),d.appendChild(w),m=w}let g=n.patch;if(g&&(h=g instanceof Function?g(h):X6(h,g,!0,!1).newDocument),n.formatLocale&&Ds.formatLocale(n.formatLocale),n.timeFormatLocale&&Ds.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(let w in n.expressionFunctions){let E=n.expressionFunctions[w];"fn"in E?Ds.expressionFunction(w,E.fn,E.visitor):E instanceof Function&&Ds.expressionFunction(w,E)}let{ast:v}=n,y=Ds.parse(h,p==="vega-lite"?{}:a,{ast:v}),C=new(n.viewClass||Ds.View)(y,x({loader:r,logLevel:u,renderer:l},v?{expr:Ds.expressionInterpreter??n.expr??Yne}:{}));if(C.addSignalListener("autosize",(w,E)=>{let{type:D}=E;D=="fit-x"?(m.classList.add("fit-x"),m.classList.remove("fit-y")):D=="fit-y"?(m.classList.remove("fit-x"),m.classList.add("fit-y")):D=="fit"?m.classList.add("fit-x","fit-y"):m.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){let{loader:w,tooltip:E}=n,D=w&&!qae(w)?w?.baseURL:void 0,L=$Oe(E)?E:new Cw(x({baseURL:D},E===!0?{}:E)).call;C.tooltip(L)}let{hover:b}=n;if(b===void 0&&(b=p==="vega"),b){let{hoverSet:w,updateSet:E}=typeof b=="boolean"?{}:b;C.hover(w,E)}n&&(n.width!=null&&C.width(n.width),n.height!=null&&C.height(n.height),n.padding!=null&&C.padding(n.padding)),yield C.initialize(m,n.bind).runAsync();let M;if(s!==!1){let w=d;if(n.defaultStyle!==!1||n.forceActionsMenu){let D=document.createElement("details");D.title=c.CLICK_TO_VIEW_ACTIONS,d.append(D),w=D;let L=document.createElement("summary");L.innerHTML=OOe,D.append(L),M=A=>{D.contains(A.target)||D.removeAttribute("open")},document.addEventListener("click",M)}let E=document.createElement("div");if(w.append(E),E.classList.add("vega-actions"),s===!0||s.export!==!1){for(let D of["svg","png"])if(s===!0||s.export===!0||s.export[D]){let L=c[`${D.toUpperCase()}_ACTION`],A=document.createElement("a"),j=ne(n.scaleFactor)?n.scaleFactor[D]:n.scaleFactor;A.text=L,A.href="#",A.target="_blank",A.download=`${f}.${D}`,A.addEventListener("mousedown",function(V){return Gt(this,null,function*(){V.preventDefault();let _=yield C.toImageURL(D,j);this.href=_})}),E.append(A)}}if(s===!0||s.source!==!1){let D=document.createElement("a");D.text=c.SOURCE_ACTION,D.href="#",D.addEventListener("click",function(L){Iae((0,ww.default)(t),n.sourceHeader??"",n.sourceFooter??"",p),L.preventDefault()}),E.append(D)}if(p==="vega-lite"&&(s===!0||s.compiled!==!1)){let D=document.createElement("a");D.text=c.COMPILED_ACTION,D.href="#",D.addEventListener("click",function(L){Iae((0,ww.default)(h),n.sourceHeader??"",n.sourceFooter??"","vega"),L.preventDefault()}),E.append(D)}if(s===!0||s.editor!==!1){let D=n.editorUrl??"https://vega.github.io/editor/",L=document.createElement("a");L.text=c.EDITOR_ACTION,L.href="#",L.addEventListener("click",function(A){fOe(window,D,{config:a,mode:p,renderer:l,spec:(0,ww.default)(t)}),A.preventDefault()}),E.append(L)}}function S(){M&&document.removeEventListener("click",M),C.finalize()}return{view:C,spec:t,vgSpec:h,finalize:S,embedOptions:n}})}var FR=(()=>{let t=class t{constructor(){this.data=[],this.spec=iG}ngAfterViewInit(){return Gt(this,null,function*(){this.spec=this.addDataToSpec(this.data,this.spec),this.chart=yield Gae("#calendar-element",this.spec)})}addDataToSpec(r,i){let o=i;return o.data.values=this.formatData(r),o}formatData(r){let i=Array.from(new Set(r)),o=i.map(u=>new Date(u).getFullYear()),a=Math.min(...o),s=Math.max(...o),c={};for(let u=a;u<=s;u++)for(let f=1;f<=12;f++)for(let d=1;d<=31;d++){let p=new Date(u,f-1,d).toLocaleDateString().split("T")[0];c[p]=0}return i.forEach(u=>{let f=new Date(u).toLocaleDateString().split("T")[0];c[f]+=1}),Object.entries(c).map(([u,f])=>({date:u,count:f}))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-calendar-heatmap"]],inputs:{data:"data"},decls:1,vars:0,consts:[["id","calendar-element"]],template:function(i,o){i&1&&Cn(0,"div",0)},styles:["#calendar-element[_ngcontent-%COMP%]{position:relative;width:100%}"]});let e=t;return e})();function WOe(e,t){if(e&1&&(z(0,"p"),T(1),H()),e&2){let n=St();P(),t5(" Completed Value: ",n.model==null?null:n.model.TimesCompletedToday," / ",n.model==null?null:n.model.TargetValue,`
`)}}function YOe(e,t){if(e&1&&(z(0,"p"),T(1," Associated Goal: "),z(2,"a",5),T(3),H()()),e&2){let n=St();P(2),ve("routerLink",n.goalModel.ViewUrl),P(),Ne(" ",n.goalModel.Name," ")}}function XOe(e,t){if(e&1&&(z(0,"li"),T(1),gi(2,"date"),H()),e&2){let n=t.$implicit;P(),Ne(" ",vi(2,1,n)," ")}}var QOe=()=>[];function KOe(e,t){if(e&1&&(w1(0),Cn(1,"app-calendar-heatmap",6),S1()),e&2){let n=St();P(),ve("data",n.model.FormattedCompletedDates?n.model.FormattedCompletedDates:Va(1,QOe))}}var RR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.goalApi=o,this.faCheck=Wg,this.faXmark=Gg,this.recentCompletedDates=[]}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(be(1)).subscribe(i=>{this.model=new xi(i.data),this.recentCompletedDates=this.model?.FormattedCompletedDates.slice(-7)??[],this.model?.Goal&&this.goalApi.getGoal(this.model?.Goal).pipe(be(1)).subscribe(o=>{this.goalModel=new jn(o.data)})})}};t.\u0275fac=function(i){return new(i||t)(W(Po),W(Ft),W(er))},t.\u0275cmp=Le({type:t,selectors:[["app-habit-page"]],decls:19,vars:11,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right",3,"routerLink"],[1,"uk-button-danger","uk-button",3,"routerLink"],[3,"icon"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"routerLink"],[3,"data"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"button",0),T(3),H(),z(4,"button",1),T(5),H(),z(6,"p"),T(7),H(),Cn(8,"hr"),z(9,"p"),T(10," Is Anti Habit: "),Cn(11,"fa-icon",2),H(),wt(12,WOe,2,2,"p",3)(13,YOe,4,2,"p",3),z(14,"h2"),T(15,"Completed Dates"),H(),z(16,"ul"),wt(17,XOe,3,3,"li",4),H(),wt(18,KOe,2,2,"ng-container",3)),i&2&&(P(),Ne("Habit: ",o.model==null?null:o.model.Name,""),P(),ve("routerLink",o.model==null?null:o.model.EditUrl),P(),Ne(" Edit: ",o.model==null?null:o.model.Name,`
`),P(),ve("routerLink",o.model==null?null:o.model.DeleteUrl),P(),Ne(" Delete: ",o.model==null?null:o.model.Name,`
`),P(2),Ne(" ",o.model==null?null:o.model.Description,`
`),P(4),ve("icon",o.model!=null&&o.model.AntiHabit?o.faCheck:o.faXmark),P(),ve("ngIf",o.model==null?null:o.model.IsQuantifiable),P(),ve("ngIf",o.goalModel),P(4),ve("ngForOf",o.recentCompletedDates),P(),ve("ngIf",o.model))},dependencies:[yi,E1,Ln,Dg,FR,Io],encapsulation:2});let e=t;return e})();var OR=(()=>{let t=class t{constructor(){}onRightClick(r){r.preventDefault()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=Qt({type:t,selectors:[["","appNoContextMenu",""]],hostBindings:function(i,o){i&1&&Ve("contextmenu",function(s){return o.onRightClick(s)})}});let e=t;return e})();function JOe(e,t){if(e&1){let n=ro();z(0,"input",12),Ve("change",function(){pi(n);let i=St().$implicit,o=St();return hi(o.changeState.emit(i))}),H()}if(e&2){let n=St().$implicit;ve("checked",n.IsCompletedToday)}}function ePe(e,t){if(e&1){let n=ro();z(0,"button",13),Ve("click",function(){pi(n);let i=St().$implicit,o=St();return hi(o.changeState.emit(i))})("contextmenu",function(){pi(n);let i=St().$implicit,o=St();return hi(o.decrementState.emit(i))}),T(1),H()}if(e&2){let n=St().$implicit,r;P(),Ne(" ",(r=n==null?null:n.TimesCompletedToday)!==null&&r!==void 0?r:0," ")}}function tPe(e,t){if(e&1&&(w1(0),z(1,"p",14),T(2),H(),S1()),e&2){let n=St().$implicit;P(2),Ne(" ",n.Description," ")}}function nPe(e,t){if(e&1&&(z(0,"tr")(1,"td"),wt(2,JOe,1,1,"input",7)(3,ePe,2,1),H(),z(4,"td")(5,"a",8),T(6),H()(),z(7,"td",1),wt(8,tPe,3,1,"ng-container",9),H(),z(9,"td",2),Cn(10,"fa-icon",10),H(),z(11,"td")(12,"a",11),T(13,"View"),H()()()),e&2){let n=t.$implicit,r=St(),i=il(19);P(2),RB(2,!n.IsQuantifiable||n.IsCompletedToday?2:3),P(3),ve("routerLink",n.ViewUrl),P(),io(n.Name),P(2),ve("ngIf",n.Description)("ngIfElse",i),P(2),ve("icon",n.AntiHabit?r.faCheck:r.faXmark),P(2),ve("routerLink",n.ViewUrl)}}function rPe(e,t){}function iPe(e,t){}function oPe(e,t){e&1&&(z(0,"i"),T(1,"No description"),H())}var PR=(()=>{let t=class t{constructor(){this.faCheck=Wg,this.faXmark=Gg,this.models=[],this.changeState=new Wt,this.decrementState=new Wt}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-habits-table"]],inputs:{models:"models"},outputs:{changeState:"changeState",decrementState:"decrementState"},decls:20,vars:1,consts:[[1,"uk-table","uk-table-striped","uk-table-middle"],[1,"hide-in-mobile"],[1,"centered"],[4,"ngFor","ngForOf"],["quantifiableAction",""],["booleanAction",""],["defaultDescription",""],["type","checkbox","class","uk-checkbox",3,"checked"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[4,"ngIf","ngIfElse"],[3,"icon"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],["type","checkbox",1,"uk-checkbox",3,"checked","change"],["appNoContextMenu","",1,"uk-button","uk-button-default","increment-button",3,"click","contextmenu"],[1,"description"]],template:function(i,o){i&1&&(z(0,"table",0)(1,"thead")(2,"tr"),Cn(3,"th"),z(4,"th"),T(5,"Name"),H(),z(6,"th",1),T(7,"Description"),H(),z(8,"th",2),T(9,"Anti"),H(),z(10,"th"),T(11,"Action"),H()()(),z(12,"tbody"),wt(13,nPe,14,7,"tr",3),H()(),wt(14,rPe,0,0,"ng-template",null,4,Ps)(16,iPe,0,0,"ng-template",null,5,Ps)(18,oPe,2,0,"ng-template",null,6,Ps)),i&2&&(P(13),ve("ngForOf",o.models))},dependencies:[yi,E1,Ln,Dg,OR],styles:["p.description[_ngcontent-%COMP%]{text-wrap:nowrap;padding-right:10rem;width:28rem;overflow:hidden}.increment-button[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:center;align-items:center;padding:0rem;height:1.6rem;width:1.6rem;border:1px solid #999}.centered[_ngcontent-%COMP%]{display:flex;justify-content:center}"]});let e=t;return e})();function sPe(e,t){if(e&1){let n=ro();z(0,"section")(1,"h2"),T(2,"Completed Habits"),H(),z(3,"app-habits-table",4),Ve("changeState",function(i){pi(n);let o=St();return hi(o.uncompleteHabit(i))}),H()()}if(e&2){let n=St();P(3),ve("models",n.completedHabits)}}var $R=(()=>{let t=class t{constructor(r){this.api=r,this.habits=[]}get inCompleteHabits(){return this.habits.filter(r=>!this.isCompletedToday(r))}get completedHabits(){return this.habits.filter(r=>!r.AntiHabit&&this.isCompletedToday(r))}get failedAntiHabits(){return this.habits.filter(r=>r.AntiHabit&&this.isCompletedToday(r))}ngOnInit(){this.api.getHabits().pipe(be(1)).subscribe(r=>{this.habits=r.data.map(i=>new xi(i))})}completeHabit(r){r.CompletedDates?.length||(r.CompletedDates=[]),r.CompletedDates.push(new Date().toLocaleDateString()),this.api.updateHabit(r).pipe(be(1)).subscribe(i=>{r=new xi(i.data)})}uncompleteHabit(r){let i=new Date().toLocaleDateString(),o=r.CompletedDates.findIndex(a=>{let s=new Date(a).toLocaleDateString();return i===s});r.CompletedDates.splice(o,1),this.api.updateHabit(r).pipe(be(1)).subscribe(a=>{r=new xi(a.data)})}isCompletedToday(r){return r.IsCompletedToday}};t.\u0275fac=function(i){return new(i||t)(W(Po))},t.\u0275cmp=Le({type:t,selectors:[["app-list-page"]],decls:10,vars:2,consts:[[1,"list-header"],["routerLink","/habits/new",1,"uk-button","uk-button-primary"],[3,"models","changeState","decrementState"],[4,"ngIf"],[3,"models","changeState"]],template:function(i,o){i&1&&(z(0,"div",0)(1,"h1"),T(2,"Habits"),H(),z(3,"nav")(4,"a",1),T(5,"New Habit"),H()()(),z(6,"main")(7,"section")(8,"app-habits-table",2),Ve("changeState",function(s){return o.completeHabit(s)})("decrementState",function(s){return o.uncompleteHabit(s)}),H()(),wt(9,sPe,4,1,"section",3),H()),i&2&&(P(8),ve("models",o.inCompleteHabits),P(),ve("ngIf",o.completedHabits.length>0))},dependencies:[E1,Ln,PR]});let e=t;return e})();function cPe(e,t){if(e&1&&(w1(0),z(1,"option",16),T(2),H(),S1()),e&2){let n=t.$implicit;P(),ve("value",n.Id),P(),io(n.Name)}}function lPe(e,t){if(e&1){let n=ro();z(0,"div",17)(1,"label",18),T(2," Target Value "),z(3,"input",19),ht("ngModelChange",function(i){pi(n);let o=St();return Et(o.model.TargetValue,i)||(o.model.TargetValue=i),hi(i)}),H()()()}if(e&2){let n=St();P(3),pt("ngModel",n.model.TargetValue)}}var BR=(()=>{let t=class t{constructor(r,i,o){this.router=r,this.api=i,this.goalApi=o,this.model={CreatedAt:new Date().toLocaleDateString()},this.goals$=new Pn([])}ngOnInit(){this.goalApi.listGoals().pipe(be(1)).subscribe(r=>this.goals$.next(r.data.map(i=>new jn(i))))}submitForm(){let r=new xi(this.model);this.api.createHabit(r).pipe(be(1)).subscribe(()=>this.router.navigateByUrl("/"))}};t.\u0275fac=function(i){return new(i||t)(W(_t),W(Po),W(er))},t.\u0275cmp=Le({type:t,selectors:[["app-new-page"]],decls:26,vars:9,consts:[["action",""],["ngForm",""],["for","new-habit-input",1,"uk-form-label"],["id","new-habit-input","name","new-habit-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-habit-description",1,"uk-form-label"],["id","new-habit-description","name","new-habit-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","associated-goal",1,"uk-form-label"],["name","associated-goal","id","associated-goal",1,"uk-input",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["id","boolean-selectors"],["for","anti-habit",1,"uk-form-label"],["id","anti-habit","name","anti-habit","type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange"],["for","quantifiable-habit",1,"uk-form-label"],["id","quantifiable-habit","name","quantifiable-habit","type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange"],["class","uk-form-label target-value",4,"ngIf"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"],[3,"value"],[1,"uk-form-label","target-value"],["for","target-value"],["name","target-value","type","number","placeholder","eg. 5 (km run)",1,"uk-input",3,"ngModel","ngModelChange"]],template:function(i,o){i&1&&(z(0,"h1"),T(1,"Add New Habit"),H(),z(2,"form",0,1)(4,"label",2),T(5,"Habit Name"),H(),z(6,"input",3),ht("ngModelChange",function(s){return Et(o.model.Name,s)||(o.model.Name=s),s}),H(),z(7,"label",4),T(8," Habit Description "),H(),z(9,"textarea",5),ht("ngModelChange",function(s){return Et(o.model.Description,s)||(o.model.Description=s),s}),H(),z(10,"label",6),T(11,"Associated Goal"),H(),z(12,"select",7),ht("ngModelChange",function(s){return Et(o.model.Goal,s)||(o.model.Goal=s),s}),wt(13,cPe,3,2,"ng-container",8),gi(14,"async"),H(),z(15,"div",9)(16,"label",10)(17,"input",11),ht("ngModelChange",function(s){return Et(o.model.AntiHabit,s)||(o.model.AntiHabit=s),s}),H(),T(18," Anti Habit "),H(),z(19,"label",12)(20,"input",13),ht("ngModelChange",function(s){return Et(o.model.IsQuantifiable,s)||(o.model.IsQuantifiable=s),s}),H(),T(21," Quantifiable "),H()(),wt(22,lPe,4,1,"div",14),z(23,"div")(24,"button",15),Ve("click",function(){return o.submitForm()}),T(25," Add New Habit "),H()()()),i&2&&(P(6),pt("ngModel",o.model.Name),P(3),pt("ngModel",o.model.Description),P(3),pt("ngModel",o.model.Goal),P(),ve("ngForOf",vi(14,7,o.goals$)),P(4),pt("ngModel",o.model.AntiHabit),P(3),pt("ngModel",o.model.IsQuantifiable),P(2),ve("ngIf",o.model.IsQuantifiable))},dependencies:[yi,E1,H1,V6,N6,Sr,YD,Ws,A6,Jn,z1,Un,Gi,q9],styles:["#boolean-selectors[_ngcontent-%COMP%]{margin-top:.5rem;margin-right:.5rem}#boolean-selectors[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:1rem}.target-value[_ngcontent-%COMP%]{margin-top:1rem}"]});let e=t;return e})();var UR=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-schedule-page"]],decls:2,vars:0,template:function(i,o){i&1&&(z(0,"h1"),T(1,"Schedule"),H())},encapsulation:2});let e=t;return e})();var g2=(()=>{let t=class t extends Oo{constructor(r){super(),this.http=r}getTodaysRemainingTasks(){throw new Error("Not implemented")}getTasks(){if(kt.production){let r=Zt("/tasks");return this.http.get(r)}return console.debug("/tasks"),se({data:[Wi(),Wi(),Wi(),Wi(),Wi()],message:"success"})}getTask(r){if(kt.production){let i=Zt(`/tasks/${r}`);return this.http.get(i)}return console.debug(r),se({data:Wi(),message:"success"})}createTask(r){if(kt.production){let i=Zt("/tasks");return this.http.post(i,r)}return console.debug(r),se({data:Wi(),message:"success"})}updateTask(r){if(kt.production){let i=Zt(`/tasks/${r.Id}`);return this.http.put(i,r)}return console.debug(r),se({data:Wi(),message:"success"})}deleteTask(r){if(kt.production){let i=Zt(`/tasks/${r}`);return this.http.delete(i)}return console.debug(r),se(void 0)}};t.\u0275fac=function(i){return new(i||t)(ge(Gs))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var jR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(be(1)).subscribe(i=>{this.model=new Xi(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteTask(this.model?.Id).pipe(be(1)).subscribe(()=>this.router.navigateByUrl("/tasks"))}};t.\u0275fac=function(i){return new(i||t)(W(g2),W(Ft),W(_t))},t.\u0275cmp=Le({type:t,selectors:[["app-delete-task-page"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"p"),T(3,` Deleting this model will make it unrecoverable.
`),H(),z(4,"button",0),Ve("click",function(){return o.deleteModel()}),T(5),H()),i&2&&(P(),Ne("Delete ",o.model==null?null:o.model.Name,"?"),P(4),Ne(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();function uPe(e,t){if(e&1&&(w1(0),z(1,"p",10),T(2),H(),S1()),e&2){let n=St().$implicit;P(2),Ne(" ",n.Description," ")}}function fPe(e,t){if(e&1&&(w1(0),T(1),gi(2,"date"),S1()),e&2){let n=St().$implicit;P(),Ne(" ",vi(2,1,n.CompleteBy)," ")}}var dPe=e=>({"overdue-task":e});function pPe(e,t){if(e&1){let n=ro();z(0,"tr",5)(1,"td")(2,"input",6),ht("ngModelChange",function(i){let a=pi(n).$implicit;return Et(a.Completed,i)||(a.Completed=i),hi(i)}),Ve("change",function(){let o=pi(n).$implicit,a=St();return hi(a.changeState.emit(o))}),H()(),z(3,"td")(4,"a",7),T(5),H()(),z(6,"td",1),wt(7,uPe,3,1,"ng-container",8),H(),z(8,"td",1),T(9),H(),z(10,"td"),wt(11,fPe,3,3,"ng-container",8),H(),z(12,"td")(13,"a",9),T(14,"View"),H()()()}if(e&2){let n=t.$implicit;St();let r=il(17),i=il(19);ve("ngClass",GB(10,dPe,n.isOverdue)),P(2),pt("ngModel",n.Completed),P(2),ve("routerLink",n.ViewUrl),P(),Ne(" ",n.Name," "),P(2),ve("ngIf",n.Description)("ngIfElse",r),P(2),io(n.ImportanceHuman),P(2),ve("ngIf",n.CompleteBy)("ngIfElse",i),P(2),ve("routerLink",n.ViewUrl)}}function hPe(e,t){e&1&&(z(0,"i"),T(1,"No description"),H())}function mPe(e,t){e&1&&(z(0,"i"),T(1,"No date set"),H())}var qR=(()=>{let t=class t{constructor(){this.models=[],this.changeState=new Wt}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-tasks-table"]],inputs:{models:"models"},outputs:{changeState:"changeState"},decls:20,vars:1,consts:[[1,"uk-table","uk-table-striped"],[1,"hide-in-mobile"],[3,"ngClass",4,"ngFor","ngForOf"],["defaultDescription",""],["defaultCompleteBy",""],[3,"ngClass"],["type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange","change"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[4,"ngIf","ngIfElse"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],[1,"description"]],template:function(i,o){i&1&&(z(0,"table",0)(1,"thead")(2,"tr"),Cn(3,"th"),z(4,"th"),T(5,"Name"),H(),z(6,"th",1),T(7,"Description"),H(),z(8,"th",1),T(9,"Importance"),H(),z(10,"th"),T(11,"Due Date"),H(),z(12,"th"),T(13,"Action"),H()()(),z(14,"tbody"),wt(15,pPe,15,12,"tr",2),H()(),wt(16,hPe,2,0,"ng-template",null,3,Ps)(18,mPe,2,0,"ng-template",null,4,Ps)),i&2&&(P(15),ve("ngForOf",o.models))},dependencies:[vU,yi,E1,Ln,Ws,Jn,Un,Io]});let e=t;return e})();function vPe(e,t){if(e&1){let n=ro();z(0,"section")(1,"h2"),T(2,"Completed Tasks"),H(),z(3,"app-tasks-table",3),Ve("changeState",function(i){pi(n);let o=St();return hi(o.updateTask(i))}),H()()}if(e&2){let n=St();P(3),ve("models",n.completedTasks)}}var GR=(()=>{let t=class t{constructor(r){this.api=r,this.tasks=[]}get completedTasks(){return this.tasks.filter(r=>r.Completed)}get incompleteTasks(){return this.tasks.filter(r=>!r.Completed)}ngOnInit(){this.api.getTasks().pipe(be(1)).subscribe(r=>{this.tasks=r.data.map(i=>new Xi(i))})}updateTask(r){this.api.updateTask(r).pipe(be(1)).subscribe(i=>{r=new Xi(i.data)})}};t.\u0275fac=function(i){return new(i||t)(W(g2))},t.\u0275cmp=Le({type:t,selectors:[["app-tasks-page"]],decls:9,vars:2,consts:[[1,"list-header"],["routerLink","/tasks/new",1,"uk-button","uk-button-primary"],[1,"incompleteTasks.length",">","0"],[3,"models","changeState"],[4,"ngIf"]],template:function(i,o){i&1&&(z(0,"div",0)(1,"h1"),T(2,"Tasks"),H(),z(3,"nav")(4,"a",1),T(5,"New Task"),H()()(),z(6,"section",2)(7,"app-tasks-table",3),Ve("changeState",function(s){return o.updateTask(s)}),H()(),wt(8,vPe,4,1,"section",4)),i&2&&(P(7),ve("models",o.incompleteTasks),P(),ve("ngIf",o.completedTasks.length>0))},dependencies:[E1,Ln,qR],styles:[".overdue-task[_ngcontent-%COMP%]{color:#f5222d}"]});let e=t;return e})();function yPe(e,t){if(e&1&&(w1(0),z(1,"option",19),T(2),H(),S1()),e&2){let n=t.$implicit;P(),ve("value",n.Id),P(),io(n.Name)}}var WR=(()=>{let t=class t{constructor(r,i,o){this.router=r,this.api=i,this.goalApi=o,this.model={Importance:1},this.goals$=new Pn([])}ngOnInit(){this.goalApi.listGoals().pipe(be(1)).subscribe(r=>this.goals$.next(r.data.map(i=>new jn(i))))}submitForm(){let r=new Xi(this.model);r.Completed=!1,this.api.createTask(r).pipe(be(1)).subscribe(()=>this.router.navigateByUrl("/tasks"))}updateImportance(r){let i=r.target.value;this.model.Importance=parseInt(i,10)}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString()}};t.\u0275fac=function(i){return new(i||t)(W(_t),W(g2),W(er))},t.\u0275cmp=Le({type:t,selectors:[["app-new-task-page"]],decls:33,vars:6,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","importance-input",1,"uk-form-label"],["id","importance-input","name","importance-input",1,"uk-input",3,"change"],["value","1","selected",""],["value","2"],["value","3"],["value","4"],["value","5"],["for","associated-goal",1,"uk-form-label"],["name","associated-goal","id","associated-goal",1,"uk-input",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"],[3,"value"]],template:function(i,o){i&1&&(z(0,"h1"),T(1,"New Task"),H(),z(2,"form",0,1)(4,"label",2),T(5,"Task Name"),H(),z(6,"input",3),ht("ngModelChange",function(s){return Et(o.model.Name,s)||(o.model.Name=s),s}),H(),z(7,"label",4),T(8," Task Description "),H(),z(9,"textarea",5),ht("ngModelChange",function(s){return Et(o.model.Description,s)||(o.model.Description=s),s}),H(),z(10,"label",6),T(11," Importance (low number = low importance; high number = high importance) "),H(),z(12,"select",7),Ve("change",function(s){return o.updateImportance(s)}),z(13,"option",8),T(14,"Low"),H(),z(15,"option",9),T(16,"Low-Medium"),H(),z(17,"option",10),T(18,"Medium"),H(),z(19,"option",11),T(20,"Medium-High"),H(),z(21,"option",12),T(22,"High"),H()(),z(23,"label",13),T(24,"Associated Goal"),H(),z(25,"select",14),ht("ngModelChange",function(s){return Et(o.model.Goal,s)||(o.model.Goal=s),s}),wt(26,yPe,3,2,"ng-container",15),gi(27,"async"),H(),z(28,"label",16),T(29,"Complete By"),H(),z(30,"input",17),Ve("change",function(s){return o.updateCompleteBy(s)}),H(),z(31,"button",18),Ve("click",function(){return o.submitForm()}),T(32," Add New Task "),H()()),i&2&&(P(6),pt("ngModel",o.model.Name),P(3),pt("ngModel",o.model.Description),P(16),pt("ngModel",o.model.Goal),P(),ve("ngForOf",vi(27,4,o.goals$)))},dependencies:[yi,H1,V6,N6,Sr,A6,Jn,z1,Un,Gi,q9],encapsulation:2});let e=t;return e})();var YR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.goalApi=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(be(1)).subscribe(i=>{this.model=new Xi(i.data),this.goalApi.getGoal(this.model?.Goal).pipe(be(1)).subscribe(o=>{this.goalModel=new jn(o.data)})})}};t.\u0275fac=function(i){return new(i||t)(W(g2),W(Ft),W(er))},t.\u0275cmp=Le({type:t,selectors:[["app-task-page"]],decls:17,vars:13,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right",3,"routerLink"],[1,"uk-button-danger","uk-button",3,"routerLink"],[3,"routerLink"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"button",0),T(3),H(),z(4,"button",1),T(5),H(),z(6,"p"),T(7),H(),z(8,"p"),T(9),H(),z(10,"p"),T(11),gi(12,"date"),H(),z(13,"p"),T(14," Associated Goal: "),z(15,"a",2),T(16),H()()),i&2&&(P(),t5(" Task: ",o.model==null?null:o.model.Name," (",o.model!=null&&o.model.Completed?"Completed":"Incomplete",`)
`),P(),ve("routerLink",o.model==null?null:o.model.EditUrl),P(),Ne(" Edit: ",o.model==null?null:o.model.Name,`
`),P(),ve("routerLink",o.model==null?null:o.model.DeleteUrl),P(),Ne(" Delete: ",o.model==null?null:o.model.Name,`
`),P(2),Ne(" ",o.model==null?null:o.model.Description,`
`),P(2),Ne("Importance: ",o.model==null?null:o.model.ImportanceHuman,""),P(2),Ne("Complete By: ",vi(12,11,o.model==null?null:o.model.CompleteBy),""),P(4),ve("routerLink",o.goalModel==null?null:o.goalModel.ViewUrl),P(),Ne(" ",o.goalModel==null?null:o.goalModel.Name," "))},dependencies:[Ln,Io],encapsulation:2});let e=t;return e})();var zs=class extends Fa{constructor(t){super(t)}get ViewUrl(){return["/logbook",this.Id]}get DeleteUrl(){return["/logbook",this.Id,"delete"]}};function Jc(){return{Id:"1",Name:"Fake Logbook Entry",Content:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api"}}var I4=(()=>{let t=class t extends Oo{constructor(r){super(),this.http=r}getLogbooks(){if(kt.production){let r=Zt("/logbooks");return this.http.get(r)}return console.debug("/logbook"),se({data:[Jc(),Jc(),Jc(),Jc(),Jc()],message:"success"})}getLogbook(r){if(kt.production){let i=Zt(`/logbooks/${r}`);return this.http.get(i)}return console.debug(r),se({data:Jc(),message:"success"})}createLogbook(r){if(kt.production){let i=Zt("/logbooks");return this.http.post(i,r)}return console.debug(r),se({data:Jc(),message:"success"})}updateLogbook(r){if(kt.production){let i=Zt(`/logbooks/${r.Id}`);return this.http.put(i,r)}return console.debug(r),se({data:Jc(),message:"success"})}deleteLogbook(r){if(kt.production){let i=Zt(`/logbooks/${r}`);return this.http.delete(i)}return console.debug(r),se(void 0)}};t.\u0275fac=function(i){return new(i||t)(ge(Gs))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function xPe(e,t){if(e&1&&(z(0,"tr")(1,"td")(2,"a",4),T(3),H()(),z(4,"td"),T(5),gi(6,"date"),H(),z(7,"td")(8,"a",5),T(9," View "),H()()()),e&2){let n=t.$implicit;P(2),ve("routerLink",n.ViewUrl),P(),Ne(" ",n.Name," "),P(2),io(vi(6,4,n.CreatedAt)),P(3),ve("routerLink",n.ViewUrl)}}var XR=(()=>{let t=class t{constructor(r){this.api=r,this.logbooks=[]}ngOnInit(){this.api.getLogbooks().pipe(be(1)).subscribe(r=>{this.logbooks=r.data.map(i=>new zs(i))})}};t.\u0275fac=function(i){return new(i||t)(W(I4))},t.\u0275cmp=Le({type:t,selectors:[["app-list"]],decls:19,vars:1,consts:[[1,"list-header"],["routerLink","/logbook/new",1,"uk-button","uk-button-primary"],[1,"uk-table"],[4,"ngFor","ngForOf"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"]],template:function(i,o){i&1&&(z(0,"div",0)(1,"h1"),T(2,"Logbook"),H(),z(3,"section")(4,"nav")(5,"a",1),T(6,"New Entry"),H()()()(),z(7,"section")(8,"table",2)(9,"thead")(10,"tr")(11,"th"),T(12,"Name"),H(),z(13,"th"),T(14,"Created"),H(),z(15,"th"),T(16,"Action"),H()()(),z(17,"tbody"),wt(18,xPe,10,6,"tr",3),H()()()),i&2&&(P(18),ve("ngForOf",o.logbooks))},dependencies:[yi,Ln,Io]});let e=t;return e})();var QR=(()=>{let t=class t{constructor(r,i){this.router=r,this.api=i,this.model={CreatedAt:new Date().toLocaleDateString()}}submitForm(){let r=new zs(this.model);this.api.createLogbook(r).subscribe(()=>this.router.navigateByUrl("/logbook"))}};t.\u0275fac=function(i){return new(i||t)(W(_t),W(I4))},t.\u0275cmp=Le({type:t,selectors:[["app-new"]],decls:12,vars:2,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","20",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1,"New Task"),H(),z(2,"form",0,1)(4,"label",2),T(5,"Task Name"),H(),z(6,"input",3),ht("ngModelChange",function(s){return Et(o.model.Name,s)||(o.model.Name=s),s}),H(),z(7,"label",4),T(8," Content "),H(),z(9,"textarea",5),ht("ngModelChange",function(s){return Et(o.model.Content,s)||(o.model.Content=s),s}),H(),z(10,"button",6),Ve("click",function(){return o.submitForm()}),T(11," Add Logbook Entry "),H()()),i&2&&(P(6),pt("ngModel",o.model.Name),P(3),pt("ngModel",o.model.Content))},dependencies:[H1,Sr,Jn,z1,Un,Gi]});let e=t;return e})();var KR=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getLogbook(r).pipe(be(1)).subscribe(i=>{this.model=new zs(i.data)})}};t.\u0275fac=function(i){return new(i||t)(W(I4),W(Ft))},t.\u0275cmp=Le({type:t,selectors:[["app-show"]],decls:7,vars:5,consts:[[1,"uk-text-default"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"span",0),T(3),gi(4,"date"),H(),z(5,"pre"),T(6),H()),i&2&&(P(),Ne("Task: ",o.model==null?null:o.model.Name,""),P(2),Ne("Created: ",vi(4,3,o.model==null?null:o.model.CreatedAt),""),P(3),Ne("    ",o.model==null?null:o.model.Content,`
`))},dependencies:[Io]});let e=t;return e})();var ZR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getLogbook(r).pipe(be(1)).subscribe(i=>{this.model=new zs(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteLogbook(this.model?.Id).pipe(be(1)).subscribe(()=>this.router.navigateByUrl("/logbook"))}};t.\u0275fac=function(i){return new(i||t)(W(I4),W(Ft),W(_t))},t.\u0275cmp=Le({type:t,selectors:[["app-delete"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"p"),T(3,` Deleting this model will make it unrecoverable.
`),H(),z(4,"button",0),Ve("click",function(){return o.deleteModel()}),T(5),H()),i&2&&(P(),Ne("Delete ",o.model==null?null:o.model.Name,"?"),P(4),Ne(" Delete ",o.model==null?null:o.model.Name,`
`))}});let e=t;return e})();var JR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(be(1)).subscribe(i=>{this.model=i.data})}submitForm(){let r=new jn(this.model);this.api.updateGoal(r).pipe(be(1)).subscribe(()=>this.router.navigateByUrl("/goals"))}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString()}};t.\u0275fac=function(i){return new(i||t)(W(er),W(Ft),W(_t))},t.\u0275cmp=Le({type:t,selectors:[["app-update"]],decls:15,vars:4,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"value","change"],["type","submit",1,"uk-button","uk-button-secondary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"form",0,1)(4,"label",2),T(5,"Goal Name"),H(),z(6,"input",3),ht("ngModelChange",function(s){return Et(o.model.Name,s)||(o.model.Name=s),s}),H(),z(7,"label",4),T(8," Goal Description "),H(),z(9,"textarea",5),ht("ngModelChange",function(s){return Et(o.model.Description,s)||(o.model.Description=s),s}),H(),z(10,"label",6),T(11,"Complete By"),H(),z(12,"input",7),Ve("change",function(s){return o.updateCompleteBy(s)}),H(),z(13,"button",8),Ve("click",function(){return o.submitForm()}),T(14," Update Goal "),H()()),i&2&&(P(),Ne("Edit: ",o.model.Name,""),P(5),pt("ngModel",o.model.Name),P(3),pt("ngModel",o.model.Description),P(3),ve("value",o.model.CompleteBy))},dependencies:[H1,Sr,Jn,z1,Un,Gi]});let e=t;return e})();var eO=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(be(1)).subscribe(i=>{this.model=i.data})}submitForm(){let r=new xi(this.model);this.api.updateHabit(r).pipe(be(1)).subscribe(()=>this.router.navigateByUrl("/"))}};t.\u0275fac=function(i){return new(i||t)(W(Po),W(Ft),W(_t))},t.\u0275cmp=Le({type:t,selectors:[["app-update"]],decls:16,vars:3,consts:[["action",""],["ngForm",""],["for","new-habit-input",1,"uk-form-label"],["id","new-habit-input","name","new-habit-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-habit-description",1,"uk-form-label"],["id","new-habit-description","name","new-habit-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","checkbox","name","anti-habit","id","anti-habit",1,"uk-checkbox",3,"ngModel","ngModelChange"],["for","anti-habit",1,"uk-form-label"],["type","submit",1,"uk-button","uk-button-secondary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(z(0,"p"),T(1,"update works!"),H(),z(2,"form",0,1)(4,"label",2),T(5,"Habit Name"),H(),z(6,"input",3),ht("ngModelChange",function(s){return Et(o.model.Name,s)||(o.model.Name=s),s}),H(),z(7,"label",4),T(8," Habit Description "),H(),z(9,"textarea",5),ht("ngModelChange",function(s){return Et(o.model.Description,s)||(o.model.Description=s),s}),H(),z(10,"input",6),ht("ngModelChange",function(s){return Et(o.model.AntiHabit,s)||(o.model.AntiHabit=s),s}),H(),z(11,"label",7),T(12,"Anti Habit"),H(),z(13,"div")(14,"button",8),Ve("click",function(){return o.submitForm()}),T(15," Update Habit "),H()()()),i&2&&(P(6),pt("ngModel",o.model.Name),P(3),pt("ngModel",o.model.Description),P(),pt("ngModel",o.model.AntiHabit))},dependencies:[H1,Sr,Ws,Jn,z1,Un,Gi]});let e=t;return e})();var tO=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(be(1)).subscribe(i=>{this.model=i.data})}submitForm(){let r=new Xi(this.model);this.api.updateTask(r).pipe(be(1)).subscribe(()=>this.router.navigateByUrl("/tasks"))}updateImportance(r){let i=r.target.value;this.model.Importance=parseInt(i,10)}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString()}};t.\u0275fac=function(i){return new(i||t)(W(g2),W(Ft),W(_t))},t.\u0275cmp=Le({type:t,selectors:[["app-update"]],decls:28,vars:3,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","importance-input",1,"uk-form-label"],["id","importance-input","name","importance-input",1,"uk-input",3,"change"],["value","1","selected",""],["value","2"],["value","3"],["value","4"],["value","5"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-secondary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"form",0,1)(4,"label",2),T(5,"Task Name"),H(),z(6,"input",3),ht("ngModelChange",function(s){return Et(o.model.Name,s)||(o.model.Name=s),s}),H(),z(7,"label",4),T(8," Task Description "),H(),z(9,"textarea",5),ht("ngModelChange",function(s){return Et(o.model.Description,s)||(o.model.Description=s),s}),H(),z(10,"label",6),T(11," Importance (low number = low importance; high number = high importance) "),H(),z(12,"select",7),Ve("change",function(s){return o.updateImportance(s)}),z(13,"option",8),T(14,"Low"),H(),z(15,"option",9),T(16,"Low-Medium"),H(),z(17,"option",10),T(18,"Medium"),H(),z(19,"option",11),T(20,"Medium-High"),H(),z(21,"option",12),T(22,"High"),H()(),z(23,"label",13),T(24,"Complete By"),H(),z(25,"input",14),Ve("change",function(s){return o.updateCompleteBy(s)}),H(),z(26,"button",15),Ve("click",function(){return o.submitForm()}),T(27," Update Task "),H()()),i&2&&(P(),Ne("Edit: ",o.model.Name,""),P(5),pt("ngModel",o.model.Name),P(3),pt("ngModel",o.model.Description))},dependencies:[H1,V6,N6,Sr,Jn,z1,Un,Gi]});let e=t;return e})();var nO=(()=>{let t=class t{constructor(r){this.configService=r,this.customServerUrl=this.configService.getCustomServerUrl()??"",this.formFeedback=""}saveCustomServerUrl(){this.customServerUrl?(this.configService.setCustomServerUrl(this.customServerUrl),this.formFeedback="Custom server URL saved!"):this.formFeedback="Please enter a valid server URL."}clearCustomServerUrl(){this.customServerUrl="",this.configService.clearCustomServerUrl(),this.formFeedback="Custom server URL cleared!"}};t.\u0275fac=function(i){return new(i||t)(W(W6))},t.\u0275cmp=Le({type:t,selectors:[["app-configure"]],decls:28,vars:2,consts:[["href","https://github.com/hudson-newey/habit-tracker/tree/main/server"],["href","https://github.com/hudson-newey/habit-tracker"],["type","text","placeholder","Server URL",1,"uk-input",3,"ngModel","ngModelChange"],[1,"action-buttons"],["id","save-server-button",1,"uk-button","uk-button-primary",3,"click"],["id","remove-server-button",1,"uk-button","uk-button-danger",3,"click"],[1,"uk-text-secondary"]],template:function(i,o){i&1&&(z(0,"h1"),T(1,"Configure"),H(),z(2,"p"),T(3," This web app is intended to be used with the GoLang API found "),z(4,"a",0),T(5,"on GitHub"),H(),T(6,`.
`),H(),z(7,"p"),T(8,` It is possible to use this app without the API, but you will not be able to sync your Todo items and Habits between devices.
`),H(),z(9,"p"),T(10," You are free to use this GitHub pages hosted version of the application with your own hosted server (or without) by inputting the custom URL below, or you can host your own instance of the server, client and mobile application using the code available "),z(11,"a",1),T(12,"here"),H(),T(13,`.
`),H(),z(14,"section")(15,"h2"),T(16,"Custom Server URL"),H(),z(17,"p"),T(18," If you are using a custom server, please input the URL below. If you are using the habit tracker without device syncing, you can leave this blank. "),H(),z(19,"input",2),ht("ngModelChange",function(s){return Et(o.customServerUrl,s)||(o.customServerUrl=s),s}),H(),z(20,"div",3)(21,"button",4),Ve("click",function(){return o.saveCustomServerUrl()}),T(22," Save "),H(),z(23,"button",5),Ve("click",function(){return o.clearCustomServerUrl()}),T(24," Remove Server "),H()(),Cn(25,"div"),z(26,"p",6),T(27),H()()),i&2&&(P(19),pt("ngModel",o.customServerUrl),P(8),io(o.formFeedback))},dependencies:[Sr,Jn,Un],styles:[".action-buttons[_ngcontent-%COMP%]{margin-top:.5rem}.action-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:.5rem}"]});let e=t;return e})();var CPe=[{path:"goals",component:fH},{path:"goals/new",component:dH},{path:"goals/:id",component:uH},{path:"goals/:id/delete",component:lH},{path:"goals/:id/edit",component:JR},{path:"",component:$R},{path:"habits/new",component:BR},{path:"habits/:id",component:RR},{path:"habits/:id/delete",component:pH},{path:"habits/:id/edit",component:eO},{path:"tasks",component:GR},{path:"tasks/new",component:WR},{path:"tasks/:id",component:YR},{path:"tasks/:id/delete",component:jR},{path:"tasks/:id/edit",component:tO},{path:"logbook",component:XR},{path:"logbook/new",component:QR},{path:"logbook/:id",component:KR},{path:"logbook/:id/delete",component:ZR},{path:"schedule",component:UR},{path:"configure",component:nO}],Wae=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({imports:[cH.forRoot(CPe),cH]});let e=t;return e})();var bPe=()=>["/"],MPe=()=>({exact:!0}),Qh=()=>["uk-active"],rO=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-navbar"]],decls:23,vars:14,consts:[[1,"uk-navbar-container","uk-navbar-transparent"],[1,"uk-container","navbar-container"],[1,"uk-navbar-left"],["routerLinkActive","uk-active",1,"uk-navbar-item","uk-logo",3,"routerLink"],[1,"uk-nav-primary","hide-in-mobile"],[1,"uk-navbar-nav"],[3,"routerLinkActiveOptions","routerLinkActive"],["routerLink","/",1,"uk-link","uk-navbar-item"],[3,"routerLinkActive"],["routerLink","/goals",1,"uk-link","uk-navbar-item"],["routerLink","/tasks",1,"uk-link","uk-navbar-item"],["routerLink","/logbook",1,"uk-link","uk-navbar-item"],[1,"navbar-right","hide-in-mobile"],["routerLink","/configure",1,"uk-link-muted","uk-navbar-item"]],template:function(i,o){i&1&&(z(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"strong",4),T(5,"Goal Tracker"),H()(),z(6,"ul",5)(7,"li",6)(8,"a",7),T(9,"Habits"),H()(),z(10,"li",8)(11,"a",9),T(12,"Goals"),H()(),z(13,"li",8)(14,"a",10),T(15,"Tasks"),H()(),z(16,"li",8)(17,"a",11),T(18,"Logbook"),H()(),z(19,"span",12)(20,"li",8)(21,"a",13),T(22,"Configure Server"),H()()()()()()()),i&2&&(P(3),ve("routerLink",Va(7,bPe)),P(4),ve("routerLinkActiveOptions",Va(8,MPe))("routerLinkActive",Va(9,Qh)),P(3),ve("routerLinkActive",Va(10,Qh)),P(3),ve("routerLinkActive",Va(11,Qh)),P(3),ve("routerLinkActive",Va(12,Qh)),P(4),ve("routerLinkActive",Va(13,Qh)))},dependencies:[Ln,Jq],styles:[".navbar-right[_ngcontent-%COMP%]{position:absolute;right:5em}"]});let e=t;return e})();var Yae=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"light-dark"],[1,"main-content"]],template:function(i,o){i&1&&(z(0,"div",0),Cn(1,"app-navbar"),z(2,"div",1),Cn(3,"router-outlet"),H()())},dependencies:[tH,rO],styles:[".main-content[_ngcontent-%COMP%]{position:relative;margin:auto;width:60%;margin-top:2rem}@media screen and (max-width: 768px){.main-content[_ngcontent-%COMP%]{width:calc(100% - 2.4rem);margin-left:1.2rem}}"]});let e=t;return e})();var Hw=(()=>{let t=class t extends Oo{constructor(){super()}applyApiRequest(r){let i=r.url.split("/")[1],o=Number(r.url.split("/")[2]),a=r.body;localStorage.getItem(i)===null&&this.updateTable(i,"[]");let s=this.tableValue(i);if(r.method==="GET"&&o){if(i==="goals"&&r.url.split("/").length>3){let l=r.url.split("/")[3],u=this.tableValue(l).filter(f=>f.Goal===String(o));return console.log(u),u}return s.find(l=>l.Id===o)}if(r.method==="POST"){let l=JSON.parse(JSON.stringify(a));l.Id=this.nextTableId(i),s.push(l),this.updateTable(i,JSON.stringify(s))}if(r.method==="DELETE"){let l=s.findIndex(u=>u.Id===o);s.splice(l,1),this.updateTable(i,JSON.stringify(s))}if(r.method==="PUT"){let l=s.findIndex(u=>u.Id===o);s[l]=a,this.updateTable(i,JSON.stringify(s))}return this.tableValue(i)}tableValue(r){return JSON.parse(localStorage.getItem(r))??[]}nextTableId(r){let i=this.tableValue(r);return i.length===0?1:Math.max(...i.map(o=>o.Id))+1}updateTable(r,i){localStorage.removeItem(r),localStorage.setItem(r,i)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Xae=(()=>{let t=class t{constructor(r,i){this.config=r,this.virtualDb=i}intercept(r,i){if(this.config.isCustomServerUrlSet())return i.handle(r);let o=this.virtualDb.applyApiRequest(r);return se(new D6({status:200,body:{data:o}}))}};t.\u0275fac=function(i){return new(i||t)(ge(W6),ge(Hw))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();var EPe=[Po,er,g2,W6,Hw];var Qae=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Mr({type:t,bootstrap:[Yae]}),t.\u0275inj=wr({providers:[{provide:VD,useClass:Xae,multi:!0},...EPe],imports:[G9,OU,Wae,uj,AU,dq]});let e=t;return e})();RU().bootstrapModule(Qae).catch(e=>console.error(e));
