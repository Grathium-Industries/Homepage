var qae=Object.create;var Yh=Object.defineProperty,Gae=Object.defineProperties,Wae=Object.getOwnPropertyDescriptor,Yae=Object.getOwnPropertyDescriptors,Xae=Object.getOwnPropertyNames,Wh=Object.getOwnPropertySymbols,Qae=Object.getPrototypeOf,zw=Object.prototype.hasOwnProperty,AR=Object.prototype.propertyIsEnumerable;var Dw=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e);var LR=(e,t,n)=>t in e?Yh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x=(e,t)=>{for(var n in t||={})zw.call(t,n)&&LR(e,n,t[n]);if(Wh)for(var n of Wh(t))AR.call(t,n)&&LR(e,n,t[n]);return e},k=(e,t)=>Gae(e,Yae(t));var k4=e=>typeof e=="symbol"?e:e+"",ie=(e,t)=>{var n={};for(var r in e)zw.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Wh)for(var r of Wh(e))t.indexOf(r)<0&&AR.call(e,r)&&(n[r]=e[r]);return n};var Kae=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Cr=(e,t)=>{for(var n in t)Yh(e,n,{get:t[n],enumerable:!0})},Zae=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Xae(t))!zw.call(e,i)&&i!==n&&Yh(e,i,{get:()=>t[i],enumerable:!(r=Wae(t,i))||r.enumerable});return e};var Jae=(e,t,n)=>(n=e!=null?qae(Qae(e)):{},Zae(t||!e||!e.__esModule?Yh(n,"default",{value:e,enumerable:!0}):n,e));var qt=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{s(n.next(c))}catch(l){i(l)}},a=c=>{try{s(n.throw(c))}catch(l){i(l)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);s((n=n.apply(e,t)).next())}),ese=function(e,t){this[0]=e,this[1]=t};var VR=e=>{var t=e[Dw("asyncIterator")],n=!1,r,i={};return t==null?(t=e[Dw("iterator")](),r=o=>i[o]=a=>t[o](a)):(t=t.call(e),r=o=>i[o]=a=>{if(n){if(n=!1,o==="throw")throw a;return a}return n=!0,{done:!1,value:new ese(new Promise(s=>{var c=t[o](a);if(!(c instanceof Object))throw TypeError("Object expected");s(c)}),1)}}),i[Dw("iterator")]=()=>i,r("next"),"throw"in t?r("throw"):i.throw=o=>{throw o},"return"in t&&r("return"),i};var Iq=Kae((tXe,Tq)=>{"use strict";var C7e=/("(?:[^\\"]|\\.)*")|[:,]/g;Tq.exports=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function a(s,c,l){var u,f,d,p,h,m,g,v,y,C,b,M;if(s&&typeof s.toJSON=="function"&&(s=s.toJSON()),b=JSON.stringify(s,o),b===void 0)return b;if(g=i-c.length-l,b.length<=g&&(y=b.replace(C7e,function(S,w){return w||S+" "}),y.length<=g))return y;if(o!=null&&(s=JSON.parse(b),o=void 0),typeof s=="object"&&s!==null){if(v=c+r,d=[],f=0,Array.isArray(s))for(C="[",u="]",g=s.length;f<g;f++)d.push(a(s[f],v,f===g-1?0:1)||"null");else for(C="{",u="}",m=Object.keys(s),g=m.length;f<g;f++)p=m[f],h=JSON.stringify(p)+": ",M=a(s[p],v,h.length+(f===g-1?0:1)),M!==void 0&&d.push(h+M);if(d.length>0)return[C,r+d.join(`,
`+v),u].join(`
`+c)}return b}(t,"",0)}});var NR=null;var Hw=1,Lw=Symbol("SIGNAL");function Br(e){let t=NR;return NR=e,t}var _R={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function tse(e){if(!(Nw(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Hw)){if(!e.producerMustRecompute(e)&&!Aw(e)){e.dirty=!1,e.lastCleanEpoch=Hw;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Hw}}function kR(e){return e&&(e.nextProducerIndex=0),Br(e)}function TR(e,t){if(Br(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Nw(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Vw(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Aw(e){Xh(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(tse(n),r!==n.version))return!0}return!1}function IR(e){if(Xh(e),Nw(e))for(let t=0;t<e.producerNode.length;t++)Vw(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Vw(e,t){if(nse(e),Xh(e),e.liveConsumerNode.length===1)for(let r=0;r<e.producerNode.length;r++)Vw(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Xh(i),i.producerIndexOfThis[r]=t}}function Nw(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Xh(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function nse(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function rse(){throw new Error}var ise=rse;function FR(e){ise=e}function Ye(e){return typeof e=="function"}function q0(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Qh=q0(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function L8(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ar=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Ye(r))try{r()}catch(o){t=o instanceof Qh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{RR(o)}catch(a){t=t??[],a instanceof Qh?t=[...t,...a.errors]:t.push(a)}}if(t)throw new Qh(t)}}add(t){var n;if(t&&t!==this)if(this.closed)RR(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&L8(n,t)}remove(t){let{_finalizers:n}=this;n&&L8(n,t),t instanceof e&&t._removeParent(this)}};ar.EMPTY=(()=>{let e=new ar;return e.closed=!0,e})();var _w=ar.EMPTY;function Kh(e){return e instanceof ar||e&&"closed"in e&&Ye(e.remove)&&Ye(e.add)&&Ye(e.unsubscribe)}function RR(e){Ye(e)?e():e.unsubscribe()}var h2={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var G0={setTimeout(e,t,...n){let{delegate:r}=G0;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=G0;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Zh(e){G0.setTimeout(()=>{let{onUnhandledError:t}=h2;if(t)t(e);else throw e})}function A8(){}var OR=kw("C",void 0,void 0);function PR(e){return kw("E",void 0,e)}function $R(e){return kw("N",e,void 0)}function kw(e,t,n){return{kind:e,value:t,error:n}}var T4=null;function W0(e){if(h2.useDeprecatedSynchronousErrorHandling){let t=!T4;if(t&&(T4={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=T4;if(T4=null,n)throw r}}else e()}function BR(e){h2.useDeprecatedSynchronousErrorHandling&&T4&&(T4.errorThrown=!0,T4.error=e)}var I4=class extends ar{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Kh(t)&&t.add(this)):this.destination=sse}static create(t,n,r){return new Y0(t,n,r)}next(t){this.isStopped?Iw($R(t),this):this._next(t)}error(t){this.isStopped?Iw(PR(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Iw(OR,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ose=Function.prototype.bind;function Tw(e,t){return ose.call(e,t)}var Fw=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Jh(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Jh(r)}else Jh(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Jh(n)}}},Y0=class extends I4{constructor(t,n,r){super();let i;if(Ye(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&h2.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Tw(t.next,o),error:t.error&&Tw(t.error,o),complete:t.complete&&Tw(t.complete,o)}):i=t}this.destination=new Fw(i)}};function Jh(e){h2.useDeprecatedSynchronousErrorHandling?BR(e):Zh(e)}function ase(e){throw e}function Iw(e,t){let{onStoppedNotification:n}=h2;n&&G0.setTimeout(()=>n(e,t))}var sse={closed:!0,next:A8,error:ase,complete:A8};var X0=typeof Symbol=="function"&&Symbol.observable||"@@observable";function X1(e){return e}function Rw(...e){return Ow(e)}function Ow(e){return e.length===0?X1:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var St=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=lse(n)?n:new Y0(n,r,i);return W0(()=>{let{operator:a,source:s}=this;o.add(a?a.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=UR(r),new r((i,o)=>{let a=new Y0({next:s=>{try{n(s)}catch(c){o(c),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[X0](){return this}pipe(...n){return Ow(n)(this)}toPromise(n){return n=UR(n),new n((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return e.create=t=>new e(t),e})();function UR(e){var t;return(t=e??h2.Promise)!==null&&t!==void 0?t:Promise}function cse(e){return e&&Ye(e.next)&&Ye(e.error)&&Ye(e.complete)}function lse(e){return e&&e instanceof I4||cse(e)&&Kh(e)}function Pw(e){return Ye(e?.lift)}function mt(e){return t=>{if(Pw(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ft(e,t,n,r,i){return new $w(e,t,n,r,i)}var $w=class extends I4{constructor(t,n,r,i,o,a){super(t),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(s){try{n(s)}catch(c){t.error(c)}}:super._next,this._error=i?function(s){try{i(s)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(s){t.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Q0(){return mt((e,t)=>{let n=null;e._refCount++;let r=ft(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var K0=class extends St{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Pw(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ar;let n=this.getSubject();t.add(this.source.subscribe(ft(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ar.EMPTY)}return t}refCount(){return Q0()(this)}};var jR=q0(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var m1=(()=>{class e extends St{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new em(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new jR}next(n){W0(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){W0(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){W0(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?_w:(this.currentObservers=null,o.push(n),new ar(()=>{this.currentObservers=null,L8(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new St;return n.source=this,n}}return e.create=(t,n)=>new em(t,n),e})(),em=class extends m1{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:_w}};var Pn=class extends m1{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var So=new St(e=>e.complete());function qR(e){return e&&Ye(e.schedule)}function GR(e){return e[e.length-1]}function tm(e){return Ye(GR(e))?e.pop():void 0}function Xc(e){return qR(GR(e))?e.pop():void 0}function YR(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(e,t||[])).next())})}function WR(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function F4(e){return this instanceof F4?(this.v=e,this):new F4(e)}function XR(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(d){r[d]&&(i[d]=function(p){return new Promise(function(h,m){o.push([d,p,h,m])>1||s(d,p)})})}function s(d,p){try{c(r[d](p))}catch(h){f(o[0][3],h)}}function c(d){d.value instanceof F4?Promise.resolve(d.value.v).then(l,u):f(o[0][2],d)}function l(d){s("next",d)}function u(d){s("throw",d)}function f(d,p){d(p),o.shift(),o.length&&s(o[0][0],o[0][1])}}function QR(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof WR=="function"?WR(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(s,c){a=e[o](a),i(s,c,a.done,a.value)})}}function i(o,a,s,c){Promise.resolve(c).then(function(l){o({value:l,done:s})},a)}}var nm=e=>e&&typeof e.length=="number"&&typeof e!="function";function rm(e){return Ye(e?.then)}function im(e){return Ye(e[X0])}function om(e){return Symbol.asyncIterator&&Ye(e?.[Symbol.asyncIterator])}function am(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function use(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sm=use();function cm(e){return Ye(e?.[sm])}function lm(e){return XR(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield F4(n.read());if(i)return yield F4(void 0);yield yield F4(r)}}finally{n.releaseLock()}})}function um(e){return Ye(e?.getReader)}function Gn(e){if(e instanceof St)return e;if(e!=null){if(im(e))return fse(e);if(nm(e))return dse(e);if(rm(e))return pse(e);if(om(e))return KR(e);if(cm(e))return hse(e);if(um(e))return mse(e)}throw am(e)}function fse(e){return new St(t=>{let n=e[X0]();if(Ye(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function dse(e){return new St(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function pse(e){return new St(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Zh)})}function hse(e){return new St(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function KR(e){return new St(t=>{gse(e,t).catch(n=>t.error(n))})}function mse(e){return KR(lm(e))}function gse(e,t){var n,r,i,o;return YR(this,void 0,void 0,function*(){try{for(n=QR(e);r=yield n.next(),!r.done;){let a=r.value;if(t.next(a),t.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function g1(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function fm(e,t=0){return mt((n,r)=>{n.subscribe(ft(r,i=>g1(r,e,()=>r.next(i),t),()=>g1(r,e,()=>r.complete(),t),i=>g1(r,e,()=>r.error(i),t)))})}function dm(e,t=0){return mt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function ZR(e,t){return Gn(e).pipe(dm(t),fm(t))}function JR(e,t){return Gn(e).pipe(dm(t),fm(t))}function eO(e,t){return new St(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function tO(e,t){return new St(n=>{let r;return g1(n,t,()=>{r=e[sm](),g1(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){n.error(a);return}o?n.complete():n.next(i)},0,!0)}),()=>Ye(r?.return)&&r.return()})}function pm(e,t){if(!e)throw new Error("Iterable cannot be null");return new St(n=>{g1(n,t,()=>{let r=e[Symbol.asyncIterator]();g1(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function nO(e,t){return pm(lm(e),t)}function rO(e,t){if(e!=null){if(im(e))return ZR(e,t);if(nm(e))return eO(e,t);if(rm(e))return JR(e,t);if(om(e))return pm(e,t);if(cm(e))return tO(e,t);if(um(e))return nO(e,t)}throw am(e)}function en(e,t){return t?rO(e,t):Gn(e)}function Te(...e){let t=Xc(e);return en(e,t)}function Z0(e,t){let n=Ye(e)?e:()=>e,r=i=>i.error(n());return new St(t?i=>t.schedule(r,0,i):r)}function Bw(e){return!!e&&(e instanceof St||Ye(e.lift)&&Ye(e.subscribe))}var Es=q0(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function et(e,t){return mt((n,r)=>{let i=0;n.subscribe(ft(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:vse}=Array;function yse(e,t){return vse(t)?e(...t):e(t)}function hm(e){return et(t=>yse(e,t))}var{isArray:xse}=Array,{getPrototypeOf:Cse,prototype:bse,keys:Mse}=Object;function mm(e){if(e.length===1){let t=e[0];if(xse(t))return{args:t,keys:null};if(wse(t)){let n=Mse(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function wse(e){return e&&typeof e=="object"&&Cse(e)===bse}function gm(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function V8(...e){let t=Xc(e),n=tm(e),{args:r,keys:i}=mm(e);if(r.length===0)return en([],t);let o=new St(Sse(r,t,i?a=>gm(i,a):X1));return n?o.pipe(hm(n)):o}function Sse(e,t,n=X1){return r=>{iO(t,()=>{let{length:i}=e,o=new Array(i),a=i,s=i;for(let c=0;c<i;c++)iO(t,()=>{let l=en(e[c],t),u=!1;l.subscribe(ft(r,f=>{o[c]=f,u||(u=!0,s--),s||r.next(n(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function iO(e,t,n){e?g1(n,e,t):t()}function oO(e,t,n,r,i,o,a,s){let c=[],l=0,u=0,f=!1,d=()=>{f&&!c.length&&!l&&t.complete()},p=m=>l<r?h(m):c.push(m),h=m=>{o&&t.next(m),l++;let g=!1;Gn(n(m,u++)).subscribe(ft(t,v=>{i?.(v),o?p(v):t.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<r;){let v=c.shift();a?g1(t,a,()=>h(v)):h(v)}d()}catch(v){t.error(v)}}))};return e.subscribe(ft(t,p,()=>{f=!0,d()})),()=>{s?.()}}function Wn(e,t,n=1/0){return Ye(t)?Wn((r,i)=>et((o,a)=>t(r,o,i,a))(Gn(e(r,i))),n):(typeof t=="number"&&(n=t),mt((r,i)=>oO(r,i,e,n)))}function Qc(e=1/0){return Wn(X1,e)}function aO(){return Qc(1)}function J0(...e){return aO()(en(e,Xc(e)))}function vm(e){return new St(t=>{Gn(e()).subscribe(t)})}function Uw(...e){let t=tm(e),{args:n,keys:r}=mm(e),i=new St(o=>{let{length:a}=n;if(!a){o.complete();return}let s=new Array(a),c=a,l=a;for(let u=0;u<a;u++){let f=!1;Gn(n[u]).subscribe(ft(o,d=>{f||(f=!0,l--),s[u]=d},()=>c--,void 0,()=>{(!c||!f)&&(l||o.next(r?gm(r,s):s),o.complete())}))}});return t?i.pipe(hm(t)):i}function v1(e,t){return mt((n,r)=>{let i=0;n.subscribe(ft(r,o=>e.call(t,o,i++)&&r.next(o)))})}function Kc(e){return mt((t,n)=>{let r=null,i=!1,o;r=t.subscribe(ft(n,void 0,void 0,a=>{o=Gn(e(a,Kc(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function sO(e,t,n,r,i){return(o,a)=>{let s=n,c=t,l=0;o.subscribe(ft(a,u=>{let f=l++;c=s?e(c,u,f):(s=!0,u),r&&a.next(c)},i&&(()=>{s&&a.next(c),a.complete()})))}}function Ds(e,t){return Ye(t)?Wn(e,t,1):Wn(e,1)}function Zc(e){return mt((t,n)=>{let r=!1;t.subscribe(ft(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function ye(e){return e<=0?()=>So:mt((t,n)=>{let r=0;t.subscribe(ft(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function jw(e){return et(()=>e)}function ym(e=Ese){return mt((t,n)=>{let r=!1;t.subscribe(ft(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function Ese(){return new Es}function Jc(e){return mt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function ga(e,t){let n=arguments.length>=2;return r=>r.pipe(e?v1((i,o)=>e(i,o,r)):X1,ye(1),n?Zc(t):ym(()=>new Es))}function e6(e){return e<=0?()=>So:mt((t,n)=>{let r=[];t.subscribe(ft(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function qw(e,t){let n=arguments.length>=2;return r=>r.pipe(e?v1((i,o)=>e(i,o,r)):X1,e6(1),n?Zc(t):ym(()=>new Es))}function Gw(e,t){return mt(sO(e,t,arguments.length>=2,!0))}function Ww(...e){let t=Xc(e);return mt((n,r)=>{(t?J0(e,n,t):J0(e,n)).subscribe(r)})}function y1(e,t){return mt((n,r)=>{let i=null,o=0,a=!1,s=()=>a&&!i&&r.complete();n.subscribe(ft(r,c=>{i?.unsubscribe();let l=0,u=o++;Gn(e(c,u)).subscribe(i=ft(r,f=>r.next(t?t(c,f,u,l++):f),()=>{i=null,s()}))},()=>{a=!0,s()}))})}function Yw(e){return mt((t,n)=>{Gn(e).subscribe(ft(n,()=>n.complete(),A8)),!n.closed&&t.subscribe(n)})}function sr(e,t,n){let r=Ye(e)||t||n?{next:e,error:t,complete:n}:e;return r?mt((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let s=!0;i.subscribe(ft(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;s=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;s=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;s&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):X1}var YO="https://g.co/ng/security#xss",Ee=class extends Error{constructor(t,n){super(Qm(t,n)),this.code=t}};function Qm(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}var dS=class extends m1{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),a=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),a=c.complete?.bind(c)}this.__isAsync&&(o=Xw(o),i&&(i=Xw(i)),a&&(a=Xw(a)));let s=super.subscribe({next:i,error:o,complete:a});return t instanceof ar&&t.add(s),s}};function Xw(e){return t=>{setTimeout(e,void 0,t)}}var bn=dS;var at=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(at||{});function Bi(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Bi).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function cO(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var XO=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(XO||{}),xa=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(xa||{});function j8(e){return{toString:e}.toString()}var Yn=globalThis;var s6={},Eo=[];function Gt(e){for(let t in e)if(e[t]===Gt)return t;throw Error("Could not find renamed property on target object.")}function Dse(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}var zse=Gt({\u0275cmp:Gt}),Hse=Gt({\u0275dir:Gt}),Lse=Gt({\u0275pipe:Gt}),Ase=Gt({\u0275mod:Gt}),Vm=Gt({\u0275fac:Gt}),N8=Gt({__NG_ELEMENT_ID__:Gt}),lO=Gt({__NG_ENV_ID__:Gt}),Ur=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Ur||{});function QO(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function pS(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],a=n[r++],s=n[r++];e.setAttribute(t,a,s,o)}else{let o=i,a=n[++r];Vse(o)?e.setProperty(t,o,a):e.setAttribute(t,o,a),r++}}return r}function KO(e){return e===3||e===4||e===6}function Vse(e){return e.charCodeAt(0)===64}function _8(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?uO(e,n,i,null,t[++r]):uO(e,n,i,null,null))}}return e}function uO(e,t,n,r,i){let o=0,a=e.length;if(t===-1)a=-1;else for(;o<e.length;){let s=e[o++];if(typeof s=="number"){if(s===t){a=-1;break}else if(s>t){a=o-1;break}}}for(;o<e.length;){let s=e[o];if(typeof s=="number")break;if(s===n){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}a!==-1&&(e.splice(a,0,t),o=a+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var ZO="ng-template";function Nse(e,t,n){let r=0,i=!0;for(;r<e.length;){let o=e[r++];if(typeof o=="string"&&i){let a=e[r++];if(n&&o==="class"&&QO(a.toLowerCase(),t,0)!==-1)return!0}else if(o===1){for(;r<e.length&&typeof(o=e[r++])=="string";)if(o.toLowerCase()===t)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function JO(e){return e.type===4&&e.value!==ZO}function _se(e,t,n){let r=e.type===4&&!n?ZO:e.value;return t===r}function kse(e,t,n){let r=4,i=e.attrs||[],o=Fse(i),a=!1;for(let s=0;s<t.length;s++){let c=t[s];if(typeof c=="number"){if(!a&&!m2(r)&&!m2(c))return!1;if(a&&m2(c))continue;a=!1,r=c|r&1;continue}if(!a)if(r&4){if(r=2|r&1,c!==""&&!_se(e,c,n)||c===""&&t.length===1){if(m2(r))return!1;a=!0}}else{let l=r&8?c:t[++s];if(r&8&&e.attrs!==null){if(!Nse(e.attrs,l,n)){if(m2(r))return!1;a=!0}continue}let u=r&8?"class":c,f=Tse(u,i,JO(e),n);if(f===-1){if(m2(r))return!1;a=!0;continue}if(l!==""){let d;f>o?d="":d=i[f+1].toLowerCase();let p=r&8?d:null;if(p&&QO(p,l,0)!==-1||r&2&&l!==d){if(m2(r))return!1;a=!0}}}}return m2(r)||a}function m2(e){return(e&1)===0}function Tse(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let a=t[i];if(a===e)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let s=t[++i];for(;typeof s=="string";)s=t[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return Rse(t,e)}function eP(e,t,n=!1){for(let r=0;r<t.length;r++)if(kse(e,t[r],n))return!0;return!1}function Ise(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function Fse(e){for(let t=0;t<e.length;t++){let n=e[t];if(KO(n))return t}return e.length}function Rse(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Ose(e,t){e:for(let n=0;n<t.length;n++){let r=t[n];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function fO(e,t){return e?":not("+t.trim()+")":t}function Pse(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let a=e[n];if(typeof a=="string")if(r&2){let s=e[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!m2(a)&&(t+=fO(o,i),i=""),r=a,o=o||!m2(r);n++}return i!==""&&(t+=fO(o,i)),t}function $se(e){return e.map(Pse).join(",")}function Bse(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!m2(i))break;i=o}r++}return{attrs:t,classes:n}}function xe(e){return j8(()=>{let t=oP(e),n=k(x({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===XO.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||xa.Emulated,styles:e.styles||Eo,_:null,schemas:e.schemas||null,tView:null,id:""});aP(n);let r=e.dependencies;return n.directiveDefs=pO(r,!1),n.pipeDefs=pO(r,!0),n.id=qse(n),n})}function Use(e){return n3(e)||tP(e)}function jse(e){return e!==null}function qi(e){return j8(()=>({type:e.type,bootstrap:e.bootstrap||Eo,declarations:e.declarations||Eo,imports:e.imports||Eo,exports:e.exports||Eo,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function dO(e,t){if(e==null)return s6;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,a,s=Ur.None;Array.isArray(i)?(s=i[0],o=i[1],a=i[2]??o):(o=i,a=i),t?(n[o]=s!==Ur.None?[r,s]:r,t[o]=a):n[o]=r}return n}function Tt(e){return j8(()=>{let t=oP(e);return aP(t),t})}function hE(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone===!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function n3(e){return e[zse]||null}function tP(e){return e[Hse]||null}function nP(e){return e[Lse]||null}function rP(e){let t=n3(e)||tP(e)||nP(e);return t!==null?t.standalone:!1}function iP(e,t){let n=e[Ase]||null;if(!n&&t===!0)throw new Error(`Type ${Bi(e)} does not have '\u0275mod' property.`);return n}function oP(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||s6,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Eo,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:dO(e.inputs,t),outputs:dO(e.outputs),debugInfo:null}}function aP(e){e.features?.forEach(t=>t(e))}function pO(e,t){if(!e)return null;let n=t?nP:Use;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(jse)}function qse(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}var Vs=0,Ke=1,$e=2,jr=3,g2=4,Q1=5,k8=6,T8=7,Do=8,c6=9,zs=10,zn=11,I8=12,hO=13,m6=14,v2=15,q8=16,t6=17,Hs=18,Km=19,sP=20,t3=21,Qw=22,$4=23,Ui=25,cP=1;var B4=7,Nm=8,l6=9,C1=10,mE=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(mE||{});function O4(e){return Array.isArray(e)&&typeof e[cP]=="object"}function Ns(e){return Array.isArray(e)&&e[cP]===!0}function gE(e){return(e.flags&4)!==0}function Zm(e){return e.componentOffset>-1}function Jm(e){return(e.flags&1)===1}function r3(e){return!!e.template}function Gse(e){return(e[$e]&512)!==0}var Wse="svg",Yse="math",Xse=!1;function Qse(){return Xse}function Ca(e){for(;Array.isArray(e);)e=e[Vs];return e}function lP(e,t){return Ca(t[e])}function zo(e,t){return Ca(t[e.index])}function vE(e,t){return e.data[t]}function uP(e,t){return e[t]}function a3(e,t){let n=t[e];return O4(n)?n:n[Vs]}function Kse(e){return(e[$e]&4)===4}function yE(e){return(e[$e]&128)===128}function Zse(e){return Ns(e[jr])}function u6(e,t){return t==null?null:e[t]}function fP(e){e[t6]=0}function Jse(e){e[$e]&1024||(e[$e]|=1024,yE(e)&&F8(e))}function ece(e,t){for(;e>0;)t=t[m6],e--;return t}function xE(e){return!!(e[$e]&9216||e[$4]?.dirty)}function hS(e){xE(e)?F8(e):e[$e]&64&&(Qse()?(e[$e]|=1024,F8(e)):e[zs].changeDetectionScheduler?.notify())}function F8(e){e[zs].changeDetectionScheduler?.notify();let t=R8(e);for(;t!==null&&!(t[$e]&8192||(t[$e]|=8192,!yE(t)));)t=R8(t)}function dP(e,t){if((e[$e]&256)===256)throw new Ee(911,!1);e[t3]===null&&(e[t3]=[]),e[t3].push(t)}function tce(e,t){if(e[t3]===null)return;let n=e[t3].indexOf(t);n!==-1&&e[t3].splice(n,1)}function R8(e){let t=e[jr];return Ns(t)?t[jr]:t}var nt={lFrame:CP(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function nce(){return nt.lFrame.elementDepthCount}function rce(){nt.lFrame.elementDepthCount++}function ice(){nt.lFrame.elementDepthCount--}function pP(){return nt.bindingsEnabled}function hP(){return nt.skipHydrationRootTNode!==null}function oce(e){return nt.skipHydrationRootTNode===e}function ace(){nt.skipHydrationRootTNode=null}function st(){return nt.lFrame.lView}function Xn(){return nt.lFrame.tView}function fi(e){return nt.lFrame.contextLView=e,e[Do]}function di(e){return nt.lFrame.contextLView=null,e}function pi(){let e=mP();for(;e!==null&&e.type===64;)e=e.parent;return e}function mP(){return nt.lFrame.currentTNode}function sce(){let e=nt.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function K4(e,t){let n=nt.lFrame;n.currentTNode=e,n.isParent=t}function CE(){return nt.lFrame.isParent}function bE(){nt.lFrame.isParent=!1}function cce(){return nt.lFrame.contextLView}function ME(){let e=nt.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function lce(){return nt.lFrame.bindingIndex}function uce(e){return nt.lFrame.bindingIndex=e}function g6(){return nt.lFrame.bindingIndex++}function gP(e){let t=nt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function fce(){return nt.lFrame.inI18n}function dce(e,t){let n=nt.lFrame;n.bindingIndex=n.bindingRootIndex=e,mS(t)}function pce(){return nt.lFrame.currentDirectiveIndex}function mS(e){nt.lFrame.currentDirectiveIndex=e}function hce(e){let t=nt.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function vP(){return nt.lFrame.currentQueryIndex}function wE(e){nt.lFrame.currentQueryIndex=e}function mce(e){let t=e[Ke];return t.type===2?t.declTNode:t.type===1?e[Q1]:null}function yP(e,t,n){if(n&at.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&at.Host);)if(i=mce(o),i===null||(o=o[m6],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=nt.lFrame=xP();return r.currentTNode=t,r.lView=e,!0}function SE(e){let t=xP(),n=e[Ke];nt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function xP(){let e=nt.lFrame,t=e===null?null:e.child;return t===null?CP(e):t}function CP(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function bP(){let e=nt.lFrame;return nt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var MP=bP;function EE(){let e=bP();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function gce(e){return(nt.lFrame.contextLView=ece(e,nt.lFrame.contextLView))[Do]}function Z4(){return nt.lFrame.selectedIndex}function U4(e){nt.lFrame.selectedIndex=e}function e9(){let e=nt.lFrame;return vE(e.tView,e.selectedIndex)}function vce(){return nt.lFrame.currentNamespace}var wP=!0;function t9(){return wP}function n9(e){wP=e}function yce(){return v6(pi(),st())}function v6(e,t){return new qr(zo(e,t))}var qr=(()=>{let t=class t{constructor(r){this.nativeElement=r}};t.__NG_ELEMENT_ID__=yce;let e=t;return e})();function xce(e){return e instanceof qr?e.nativeElement:e}function Cce(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function bce(e){return e.flat(Number.POSITIVE_INFINITY)}function DE(e,t){e.forEach(n=>Array.isArray(n)?DE(n,t):t(n))}function SP(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function _m(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Mce(e,t){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function wce(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function Sce(e,t,n){let r=G8(e,t);return r>=0?e[r|1]=n:(r=~r,wce(e,r,t,n)),r}function Kw(e,t){let n=G8(e,t);if(n>=0)return e[n|1]}function G8(e,t){return Ece(e,t,1)}function Ece(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),a=e[o<<n];if(t===a)return o<<n;a>t?i=o:r=o+1}return~(i<<n)}function Dce(){return this._results[Symbol.iterator]()}var gS=class e{get changes(){return this._changes??=new bn}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Dce)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=bce(t);(this._changesDetected=!Cce(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function EP(e){return(e.flags&128)===128}var vS;function DP(e){vS=e}function zP(){if(vS!==void 0)return vS;if(typeof document<"u")return document;throw new Ee(210,!1)}function ue(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Gi(e){return{providers:e.providers||[],imports:e.imports||[]}}function r9(e){return mO(e,LP)||mO(e,AP)}function HP(e){return r9(e)!==null}function mO(e,t){return e.hasOwnProperty(t)?e[t]:null}function zce(e){let t=e&&(e[LP]||e[AP]);return t||null}function gO(e){return e&&(e.hasOwnProperty(vO)||e.hasOwnProperty(Hce))?e[vO]:null}var LP=Gt({\u0275prov:Gt}),vO=Gt({\u0275inj:Gt}),AP=Gt({ngInjectableDef:Gt}),Hce=Gt({ngInjectorDef:Gt}),Ae=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ue({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}},i9=new Ae("",{providedIn:"root",factory:()=>Lce}),Lce="ng",zE=new Ae(""),wa=new Ae("",{providedIn:"platform",factory:()=>"unknown"});var HE=new Ae("",{providedIn:"root",factory:()=>zP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ace=Gt({__forward_ref__:Gt});function Sa(e){return e.__forward_ref__=Sa,e.toString=function(){return Bi(this())},e}function $i(e){return VP(e)?e():e}function VP(e){return typeof e=="function"&&e.hasOwnProperty(Ace)&&e.__forward_ref__===Sa}function NP(e){return e&&!!e.\u0275providers}function j4(e){return typeof e=="string"?e:e==null?"":String(e)}function Vce(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():j4(e)}function Nce(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Ee(-200,e)}function LE(e,t){throw new Ee(-201,!1)}var yS;function _P(){return yS}function x1(e){let t=yS;return yS=e,t}function kP(e,t,n){let r=r9(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&at.Optional)return null;if(t!==void 0)return t;LE(e,"Injector")}var _ce={},O8=_ce,xS="__NG_DI_FLAG__",km="ngTempTokenPath",kce="ngTokenPath",Tce=/\n/gm,Ice="\u0275",yO="__source",o6;function Fce(){return o6}function e3(e){let t=o6;return o6=e,t}function Rce(e,t=at.Default){if(o6===void 0)throw new Ee(-203,!1);return o6===null?kP(e,void 0,t):o6.get(e,t&at.Optional?null:void 0,t)}function ge(e,t=at.Default){return(_P()||Rce)($i(e),t)}function ce(e,t=at.Default){return ge(e,o9(t))}function o9(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function CS(e){let t=[];for(let n=0;n<e.length;n++){let r=$i(e[n]);if(Array.isArray(r)){if(r.length===0)throw new Ee(900,!1);let i,o=at.Default;for(let a=0;a<r.length;a++){let s=r[a],c=Oce(s);typeof c=="number"?c===-1?i=s.token:o|=c:i=s}t.push(ge(i,o))}else t.push(ge(r))}return t}function TP(e,t){return e[xS]=t,e.prototype[xS]=t,e}function Oce(e){return e[xS]}function Pce(e,t,n,r){let i=e[km];throw t[yO]&&i.unshift(t[yO]),e.message=$ce(`
`+e.message,i,n,r),e[kce]=i,e[km]=null,e}function $ce(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==Ice?e.slice(2):e;let i=Bi(t);if(Array.isArray(t))i=t.map(Bi).join(" -> ");else if(typeof t=="object"){let o=[];for(let a in t)if(t.hasOwnProperty(a)){let s=t[a];o.push(a+":"+(typeof s=="string"?JSON.stringify(s):Bi(s)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Tce,`
  `)}`}var Bce="h",Uce="b";var jce=()=>null;function AE(e,t,n=!1){return jce(e,t,n)}var xm="__parameters__";function qce(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function IP(e,t,n){return j8(()=>{let r=qce(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let a=new i(...o);return s.annotation=a,s;function s(c,l,u){let f=c.hasOwnProperty(xm)?c[xm]:Object.defineProperty(c,xm,{value:[]})[xm];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(a),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var a9=TP(IP("Optional"),8);var VE=TP(IP("SkipSelf"),4);function q4(e,t){let n=e.hasOwnProperty(Vm);return n?e[Vm]:null}var f6=new Ae(""),FP=new Ae("",-1),RP=new Ae(""),Tm=class{get(t,n=O8){if(n===O8){let r=new Error(`NullInjectorError: No provider for ${Bi(t)}!`);throw r.name="NullInjectorError",r}return n}};function W8(e){return{\u0275providers:e}}function NE(...e){return{\u0275providers:OP(!0,e),\u0275fromNgModule:!0}}function OP(e,...t){let n=[],r=new Set,i,o=a=>{n.push(a)};return DE(t,a=>{let s=a;bS(s,o,[],r)&&(i||=[],i.push(s))}),i!==void 0&&PP(i,o),n}function PP(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];_E(i,o=>{t(o,r)})}}function bS(e,t,n,r){if(e=$i(e),!e)return!1;let i=null,o=gO(e),a=!o&&n3(e);if(!o&&!a){let c=e.ngModule;if(o=gO(c),o)i=c;else return!1}else{if(a&&!a.standalone)return!1;i=e}let s=r.has(i);if(a){if(s)return!1;if(r.add(i),a.dependencies){let c=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let l of c)bS(l,t,n,r)}}else if(o){if(o.imports!=null&&!s){r.add(i);let l;try{DE(o.imports,u=>{bS(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&PP(l,t)}if(!s){let l=q4(i)||(()=>new i);t({provide:i,useFactory:l,deps:Eo},i),t({provide:RP,useValue:i,multi:!0},i),t({provide:f6,useValue:()=>ge(i),multi:!0},i)}let c=o.providers;if(c!=null&&!s){let l=e;_E(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function _E(e,t){for(let n of e)NP(n)&&(n=n.\u0275providers),Array.isArray(n)?_E(n,t):t(n)}var Gce=Gt({provide:String,useValue:Gt});function $P(e){return e!==null&&typeof e=="object"&&Gce in e}function Wce(e){return!!(e&&e.useExisting)}function Yce(e){return!!(e&&e.useFactory)}function d6(e){return typeof e=="function"}function Xce(e){return!!e.useClass}var s9=new Ae(""),Em={},Qce={},Zw;function kE(){return Zw===void 0&&(Zw=new Tm),Zw}var ji=class{},P8=class extends ji{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wS(t,a=>this.processProvider(a)),this.records.set(FP,n6(void 0,this)),i.has("environment")&&this.records.set(ji,n6(void 0,this));let o=this.records.get(s9);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(RP,Eo,at.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=e3(this),r=x1(void 0),i;try{return t()}finally{e3(n),x1(r)}}get(t,n=O8,r=at.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(lO))return t[lO](this);r=o9(r);let i,o=e3(this),a=x1(void 0);try{if(!(r&at.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=t3e(t)&&r9(t);l&&this.injectableDefInScope(l)?c=n6(MS(t),Em):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let s=r&at.Self?kE():this.parent;return n=r&at.Optional&&n===O8?null:n,s.get(t,n)}catch(s){if(s.name==="NullInjectorError"){if((s[km]=s[km]||[]).unshift(Bi(t)),o)throw s;return Pce(s,t,"R3InjectorError",this.source)}else throw s}finally{x1(a),e3(o)}}resolveInjectorInitializers(){let t=e3(this),n=x1(void 0),r;try{let i=this.get(f6,Eo,at.Self);for(let o of i)o()}finally{e3(t),x1(n)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Bi(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ee(205,!1)}processProvider(t){t=$i(t);let n=d6(t)?t:$i(t&&t.provide),r=Zce(t);if(!d6(t)&&t.multi===!0){let i=this.records.get(n);i||(i=n6(void 0,Em,!0),i.factory=()=>CS(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Em&&(n.value=Qce,n.value=n.factory()),typeof n.value=="object"&&n.value&&e3e(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;let n=$i(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function MS(e){let t=r9(e),n=t!==null?t.factory:q4(e);if(n!==null)return n;if(e instanceof Ae)throw new Ee(204,!1);if(e instanceof Function)return Kce(e);throw new Ee(204,!1)}function Kce(e){if(e.length>0)throw new Ee(204,!1);let n=zce(e);return n!==null?()=>n.factory(e):()=>new e}function Zce(e){if($P(e))return n6(void 0,e.useValue);{let t=BP(e);return n6(t,Em)}}function BP(e,t,n){let r;if(d6(e)){let i=$i(e);return q4(i)||MS(i)}else if($P(e))r=()=>$i(e.useValue);else if(Yce(e))r=()=>e.useFactory(...CS(e.deps||[]));else if(Wce(e))r=()=>ge($i(e.useExisting));else{let i=$i(e&&(e.useClass||e.provide));if(Jce(e))r=()=>new i(...CS(e.deps));else return q4(i)||MS(i)}return r}function n6(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Jce(e){return!!e.deps}function e3e(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function t3e(e){return typeof e=="function"||typeof e=="object"&&e instanceof Ae}function wS(e,t){for(let n of e)Array.isArray(n)?wS(n,t):n&&NP(n)?wS(n.\u0275providers,t):t(n)}function Ea(e,t){e instanceof P8&&e.assertNotDestroyed();let n,r=e3(e),i=x1(void 0);try{return t()}finally{e3(r),x1(i)}}function n3e(e){if(!_P()&&!Fce())throw new Ee(-203,!1)}function r3e(e){return typeof e=="function"}var SS=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function UP(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function Ho(){return jP}function jP(e){return e.type.prototype.ngOnChanges&&(e.setInput=o3e),i3e}Ho.ngInherit=!0;function i3e(){let e=GP(this),t=e?.current;if(t){let n=e.previous;if(n===s6)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function o3e(e,t,n,r,i){let o=this.declaredInputs[r],a=GP(e)||a3e(e,{previous:s6,current:null}),s=a.current||(a.current={}),c=a.previous,l=c[o];s[o]=new SS(l&&l.currentValue,n,c===s6),UP(e,t,i,n)}var qP="__ngSimpleChanges__";function GP(e){return e[qP]||null}function a3e(e,t){return e[qP]=t}var xO=null;var va=function(e,t,n){xO?.(e,t,n)};function s3e(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let a=jP(t);(n.preOrderHooks??=[]).push(e,a),(n.preOrderCheckHooks??=[]).push(e,a)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function c9(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:s,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;a&&(e.contentHooks??=[]).push(-n,a),s&&((e.contentHooks??=[]).push(n,s),(e.contentCheckHooks??=[]).push(n,s)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Dm(e,t,n){WP(e,t,3,n)}function zm(e,t,n,r){(e[$e]&3)===n&&WP(e,t,n,r)}function Jw(e,t){let n=e[$e];(n&3)===t&&(n&=16383,n+=1,e[$e]=n)}function WP(e,t,n,r){let i=r!==void 0?e[t6]&65535:0,o=r??-1,a=t.length-1,s=0;for(let c=i;c<a;c++)if(typeof t[c+1]=="number"){if(s=t[c],r!=null&&s>=r)break}else t[c]<0&&(e[t6]+=65536),(s<o||o==-1)&&(c3e(e,n,t,c),e[t6]=(e[t6]&4294901760)+c+2),c++}function CO(e,t){va(4,e,t);let n=Br(null);try{t.call(e)}finally{Br(n),va(5,e,t)}}function c3e(e,t,n,r){let i=n[r]<0,o=n[r+1],a=i?-n[r]:n[r],s=e[a];i?e[$e]>>14<e[t6]>>16&&(e[$e]&3)===t&&(e[$e]+=16384,CO(s,o)):CO(s,o)}var a6=-1,G4=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function l3e(e){return e instanceof G4}function u3e(e){return(e.flags&8)!==0}function f3e(e){return(e.flags&16)!==0}function YP(e){return e!==a6}function Im(e){return e&32767}function d3e(e){return e>>16}function Fm(e,t){let n=d3e(e),r=t;for(;n>0;)r=r[m6],n--;return r}var ES=!0;function Rm(e){let t=ES;return ES=e,t}var p3e=256,XP=p3e-1,QP=5,h3e=0,ya={};function m3e(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(N8)&&(r=n[N8]),r==null&&(r=n[N8]=h3e++);let i=r&XP,o=1<<i;t.data[e+(i>>QP)]|=o}function Om(e,t){let n=KP(e,t);if(n!==-1)return n;let r=t[Ke];r.firstCreatePass&&(e.injectorIndex=t.length,eS(r.data,e),eS(t,null),eS(r.blueprint,null));let i=TE(e,t),o=e.injectorIndex;if(YP(i)){let a=Im(i),s=Fm(i,t),c=s[Ke].data;for(let l=0;l<8;l++)t[o+l]=s[a+l]|c[a+l]}return t[o+8]=i,o}function eS(e,t){e.push(0,0,0,0,0,0,0,0,t)}function KP(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function TE(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=n$(i),r===null)return a6;if(n++,i=i[m6],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return a6}function DS(e,t,n){m3e(e,t,n)}function g3e(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(KO(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===t)return n[i+1];i=i+2}}}return null}function ZP(e,t,n){if(n&at.Optional||e!==void 0)return e;LE(t,"NodeInjector")}function JP(e,t,n,r){if(n&at.Optional&&r===void 0&&(r=null),!(n&(at.Self|at.Host))){let i=e[c6],o=x1(void 0);try{return i?i.get(t,r,n&at.Optional):kP(t,r,n&at.Optional)}finally{x1(o)}}return ZP(r,t,n)}function e$(e,t,n,r=at.Default,i){if(e!==null){if(t[$e]&2048&&!(r&at.Self)){let a=C3e(e,t,n,r,ya);if(a!==ya)return a}let o=t$(e,t,n,r,ya);if(o!==ya)return o}return JP(t,n,r,i)}function t$(e,t,n,r,i){let o=y3e(n);if(typeof o=="function"){if(!yP(t,e,r))return r&at.Host?ZP(i,n,r):JP(t,n,r,i);try{let a;if(a=o(r),a==null&&!(r&at.Optional))LE(n);else return a}finally{MP()}}else if(typeof o=="number"){let a=null,s=KP(e,t),c=a6,l=r&at.Host?t[v2][Q1]:null;for((s===-1||r&at.SkipSelf)&&(c=s===-1?TE(e,t):t[s+8],c===a6||!MO(r,!1)?s=-1:(a=t[Ke],s=Im(c),t=Fm(c,t)));s!==-1;){let u=t[Ke];if(bO(o,s,u.data)){let f=v3e(s,t,n,a,r,l);if(f!==ya)return f}c=t[s+8],c!==a6&&MO(r,t[Ke].data[s+8]===l)&&bO(o,s,t)?(a=u,s=Im(c),t=Fm(c,t)):s=-1}}return i}function v3e(e,t,n,r,i,o){let a=t[Ke],s=a.data[e+8],c=r==null?Zm(s)&&ES:r!=a&&(s.type&3)!==0,l=i&at.Host&&o===s,u=Hm(s,a,n,c,l);return u!==null?W4(t,a,u,s):ya}function Hm(e,t,n,r,i){let o=e.providerIndexes,a=t.data,s=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,f=r?s:s+u,d=i?s+u:l;for(let p=f;p<d;p++){let h=a[p];if(p<c&&n===h||p>=c&&h.type===n)return p}if(i){let p=a[c];if(p&&r3(p)&&p.type===n)return c}return null}function W4(e,t,n,r){let i=e[n],o=t.data;if(l3e(i)){let a=i;a.resolving&&Nce(Vce(o[n]));let s=Rm(a.canSeeViewProviders);a.resolving=!0;let c,l=a.injectImpl?x1(a.injectImpl):null,u=yP(e,r,at.Default);try{i=e[n]=a.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&s3e(n,o[n],t)}finally{l!==null&&x1(l),Rm(s),a.resolving=!1,MP()}}return i}function y3e(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(N8)?e[N8]:void 0;return typeof t=="number"?t>=0?t&XP:x3e:t}function bO(e,t,n){let r=1<<e;return!!(n[t+(e>>QP)]&r)}function MO(e,t){return!(e&at.Self)&&!(e&at.Host&&t)}var P4=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return e$(this._tNode,this._lView,t,o9(r),n)}};function x3e(){return new P4(pi(),st())}function Da(e){return j8(()=>{let t=e.prototype.constructor,n=t[Vm]||zS(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[Vm]||zS(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function zS(e){return VP(e)?()=>{let t=zS($i(e));return t&&t()}:q4(e)}function C3e(e,t,n,r,i){let o=e,a=t;for(;o!==null&&a!==null&&a[$e]&2048&&!(a[$e]&512);){let s=t$(o,a,n,r|at.Self,ya);if(s!==ya)return s;let c=o.parent;if(!c){let l=a[sP];if(l){let u=l.get(n,ya,r);if(u!==ya)return u}c=n$(a),a=a[m6]}o=c}return i}function n$(e){let t=e[Ke],n=t.type;return n===2?t.declTNode:n===1?e[Q1]:null}function IE(e){return g3e(pi(),e)}function wO(e,t=null,n=null,r){let i=r$(e,t,n,r);return i.resolveInjectorInitializers(),i}function r$(e,t=null,n=null,r,i=new Set){let o=[n||Eo,NE(e)];return r=r||(typeof e=="object"?void 0:Bi(e)),new P8(o,t||kE(),r||null,i)}var _s=(()=>{let t=class t{static create(r,i){if(Array.isArray(r))return wO({name:""},i,r,"");{let o=r.name??"";return wO({name:o},r.parent,r.providers,o)}}};t.THROW_IF_NOT_FOUND=O8,t.NULL=new Tm,t.\u0275prov=ue({token:t,providedIn:"any",factory:()=>ge(FP)}),t.__NG_ELEMENT_ID__=-1;let e=t;return e})(),b3e="ngOriginalError";function tS(e){return e[b3e]}var ba=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&tS(t);for(;n&&tS(n);)n=tS(n);return n||null}},i$=new Ae("",{providedIn:"root",factory:()=>ce(ba).handleError.bind(void 0)});var o$=!1,M3e=new Ae("",{providedIn:"root",factory:()=>o$}),Cm;function w3e(){if(Cm===void 0&&(Cm=null,Yn.trustedTypes))try{Cm=Yn.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Cm}function l9(e){return w3e()?.createHTML(e)||e}var bm;function a$(){if(bm===void 0&&(bm=null,Yn.trustedTypes))try{bm=Yn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return bm}function SO(e){return a$()?.createHTML(e)||e}function EO(e){return a$()?.createScriptURL(e)||e}var Ls=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${YO})`}},HS=class extends Ls{getTypeName(){return"HTML"}},LS=class extends Ls{getTypeName(){return"Style"}},AS=class extends Ls{getTypeName(){return"Script"}},VS=class extends Ls{getTypeName(){return"URL"}},NS=class extends Ls{getTypeName(){return"ResourceURL"}};function y2(e){return e instanceof Ls?e.changingThisBreaksApplicationSecurity:e}function ks(e,t){let n=S3e(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${YO})`)}return n===t}function S3e(e){return e instanceof Ls&&e.getTypeName()||null}function s$(e){return new HS(e)}function c$(e){return new LS(e)}function l$(e){return new AS(e)}function u$(e){return new VS(e)}function f$(e){return new NS(e)}function E3e(e){let t=new kS(e);return D3e()?new _S(t):t}var _S=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let n=new window.DOMParser().parseFromString(l9(t),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch{return null}}},kS=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let n=this.inertDocument.createElement("template");return n.innerHTML=l9(t),n}};function D3e(){try{return!!new window.DOMParser().parseFromString(l9(""),"text/html")}catch{return!1}}var z3e=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function u9(e){return e=String(e),e.match(z3e)?e:"unsafe:"+e}function Ts(e){let t={};for(let n of e.split(","))t[n]=!0;return t}function Y8(...e){let t={};for(let n of e)for(let r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}var d$=Ts("area,br,col,hr,img,wbr"),p$=Ts("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),h$=Ts("rp,rt"),H3e=Y8(h$,p$),L3e=Y8(p$,Ts("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),A3e=Y8(h$,Ts("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),DO=Y8(d$,L3e,A3e,H3e),m$=Ts("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),V3e=Ts("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),N3e=Ts("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),_3e=Y8(m$,V3e,N3e),k3e=Ts("script,style,template"),TS=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,r=!0;for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){n=n.firstChild;continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}}return this.buf.join("")}startElement(t){let n=t.nodeName.toLowerCase();if(!DO.hasOwnProperty(n))return this.sanitizedSomething=!0,!k3e.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=t.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),a=o.name,s=a.toLowerCase();if(!_3e.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let c=o.value;m$[s]&&(c=u9(c)),this.buf.push(" ",a,'="',zO(c),'"')}return this.buf.push(">"),!0}endElement(t){let n=t.nodeName.toLowerCase();DO.hasOwnProperty(n)&&!d$.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(zO(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}},T3e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,I3e=/([^\#-~ |!])/g;function zO(e){return e.replace(/&/g,"&amp;").replace(T3e,function(t){let n=t.charCodeAt(0),r=t.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(I3e,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Mm;function FE(e,t){let n=null;try{Mm=Mm||E3e(e);let r=t?String(t):"";n=Mm.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Mm.getInertBodyElement(r)}while(r!==o);let s=new TS().sanitizeChildren(HO(n)||n);return l9(s)}finally{if(n){let r=HO(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function HO(e){return"content"in e&&F3e(e)?e.content:null}function F3e(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var x2=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(x2||{});function g$(e){let t=RE();return t?SO(t.sanitize(x2.HTML,e)||""):ks(e,"HTML")?SO(y2(e)):FE(zP(),j4(e))}function R3e(e){let t=RE();return t?t.sanitize(x2.URL,e)||"":ks(e,"URL")?y2(e):u9(j4(e))}function O3e(e){let t=RE();if(t)return EO(t.sanitize(x2.RESOURCE_URL,e)||"");if(ks(e,"ResourceURL"))return EO(y2(e));throw new Ee(904,!1)}function P3e(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?O3e:R3e}function v$(e,t,n){return P3e(t,n)(e)}function RE(){let e=st();return e&&e[zs].sanitizer}var $3e=/^>|^->|<!--|-->|--!>|<!-$/g,B3e=/(<|>)/g,U3e="\u200B$1\u200B";function j3e(e){return e.replace($3e,t=>t.replace(B3e,U3e))}var y$=new Map,q3e=0;function G3e(){return q3e++}function W3e(e){y$.set(e[Km],e)}function Y3e(e){y$.delete(e[Km])}var LO="__ngContext__";function i3(e,t){O4(t)?(e[LO]=t[Km],W3e(t)):e[LO]=t}function x$(e){return e instanceof Function?e():e}function X3e(e){return(e??ce(_s)).get(wa)==="browser"}var As=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(As||{}),Q3e;function OE(e,t){return Q3e(e,t)}function r6(e,t,n,r,i){if(r!=null){let o,a=!1;Ns(r)?o=r:O4(r)&&(a=!0,r=r[Vs]);let s=Ca(r);e===0&&n!==null?i==null?S$(t,n,s):$m(t,n,s,i||null,!0):e===1&&n!==null?$m(t,n,s,i||null,!0):e===2?d4e(t,s,a):e===3&&t.destroyNode(s),o!=null&&h4e(t,e,o,n,i)}}function K3e(e,t){return e.createText(t)}function Z3e(e,t,n){e.setValue(t,n)}function J3e(e,t){return e.createComment(j3e(t))}function C$(e,t,n){return e.createElement(t,n)}function e4e(e,t){b$(e,t),t[Vs]=null,t[Q1]=null}function t4e(e,t,n,r,i,o){r[Vs]=i,r[Q1]=t,d9(e,r,n,1,i,o)}function b$(e,t){d9(e,t,t[zn],2,null,null)}function n4e(e){let t=e[I8];if(!t)return nS(e[Ke],e);for(;t;){let n=null;if(O4(t))n=t[I8];else{let r=t[C1];r&&(n=r)}if(!n){for(;t&&!t[g2]&&t!==e;)O4(t)&&nS(t[Ke],t),t=t[jr];t===null&&(t=e),O4(t)&&nS(t[Ke],t),n=t&&t[g2]}t=n}}function r4e(e,t,n,r){let i=C1+r,o=n.length;r>0&&(n[i-1][g2]=t),r<o-C1?(t[g2]=n[i],SP(n,C1+r,t)):(n.push(t),t[g2]=null),t[jr]=n;let a=t[q8];a!==null&&n!==a&&i4e(a,t);let s=t[Hs];s!==null&&s.insertView(e),hS(t),t[$e]|=128}function i4e(e,t){let n=e[l6],i=t[jr][jr][v2];t[v2]!==i&&(e[$e]|=mE.HasTransplantedViews),n===null?e[l6]=[t]:n.push(t)}function M$(e,t){let n=e[l6],r=n.indexOf(t);n.splice(r,1)}function Pm(e,t){if(e.length<=C1)return;let n=C1+t,r=e[n];if(r){let i=r[q8];i!==null&&i!==e&&M$(i,r),t>0&&(e[n-1][g2]=r[g2]);let o=_m(e,C1+t);e4e(r[Ke],r);let a=o[Hs];a!==null&&a.detachView(o[Ke]),r[jr]=null,r[g2]=null,r[$e]&=-129}return r}function PE(e,t){if(!(t[$e]&256)){let n=t[zn];n.destroyNode&&d9(e,t,n,3,null,null),n4e(t)}}function nS(e,t){if(!(t[$e]&256)){t[$e]&=-129,t[$e]|=256,t[$4]&&IR(t[$4]),a4e(e,t),o4e(e,t),t[Ke].type===1&&t[zn].destroy();let n=t[q8];if(n!==null&&Ns(t[jr])){n!==t[jr]&&M$(n,t);let r=t[Hs];r!==null&&r.detachView(e)}Y3e(t)}}function o4e(e,t){let n=e.cleanup,r=t[T8];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[n[o+1]];n[o].call(a)}r!==null&&(t[T8]=null);let i=t[t3];if(i!==null){t[t3]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}}function a4e(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof G4)){let o=n[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let s=i[o[a]],c=o[a+1];va(4,s,c);try{c.call(s)}finally{va(5,s,c)}}else{va(4,i,o);try{o.call(i)}finally{va(5,i,o)}}}}}function w$(e,t,n){return s4e(e,t.parent,n)}function s4e(e,t,n){let r=t;for(;r!==null&&r.type&40;)t=r,r=t.parent;if(r===null)return n[Vs];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===xa.None||o===xa.Emulated)return null}return zo(r,n)}}function $m(e,t,n,r,i){e.insertBefore(t,n,r,i)}function S$(e,t,n){e.appendChild(t,n)}function AO(e,t,n,r,i){r!==null?$m(e,t,n,r,i):S$(e,t,n)}function c4e(e,t,n,r){e.removeChild(t,n,r)}function $E(e,t){return e.parentNode(t)}function l4e(e,t){return e.nextSibling(t)}function E$(e,t,n){return f4e(e,t,n)}function u4e(e,t,n){return e.type&40?zo(e,n):null}var f4e=u4e,VO;function f9(e,t,n,r){let i=w$(e,r,t),o=t[zn],a=r.parent||t[Q1],s=E$(a,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)AO(o,i,n[c],s,!1);else AO(o,i,n,s,!1);VO!==void 0&&VO(o,r,t,n,i)}function Lm(e,t){if(t!==null){let n=t.type;if(n&3)return zo(t,e);if(n&4)return IS(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Lm(e,r);{let i=e[t.index];return Ns(i)?IS(-1,i):Ca(i)}}else{if(n&32)return OE(t,e)()||Ca(e[t.index]);{let r=D$(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=R8(e[v2]);return Lm(i,r)}else return Lm(e,t.next)}}}return null}function D$(e,t){if(t!==null){let r=e[v2][Q1],i=t.projection;return r.projection[i]}return null}function IS(e,t){let n=C1+e+1;if(n<t.length){let r=t[n],i=r[Ke].firstChild;if(i!==null)return Lm(r,i)}return t[B4]}function d4e(e,t,n){let r=$E(e,t);r&&c4e(e,r,t,n)}function BE(e,t,n,r,i,o,a){for(;n!=null;){let s=r[n.index],c=n.type;if(a&&t===0&&(s&&i3(Ca(s),r),n.flags|=2),(n.flags&32)!==32)if(c&8)BE(e,t,n.child,r,i,o,!1),r6(t,e,i,s,o);else if(c&32){let l=OE(n,r),u;for(;u=l();)r6(t,e,i,u,o);r6(t,e,i,s,o)}else c&16?z$(e,t,r,n,i,o):r6(t,e,i,s,o);n=a?n.projectionNext:n.next}}function d9(e,t,n,r,i,o){BE(n,r,e.firstChild,t,i,o,!1)}function p4e(e,t,n){let r=t[zn],i=w$(e,n,t),o=n.parent||t[Q1],a=E$(o,n,t);z$(r,0,t,n,i,a)}function z$(e,t,n,r,i,o){let a=n[v2],c=a[Q1].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];r6(t,e,i,u,o)}else{let l=c,u=a[jr];EP(r)&&(l.flags|=128),BE(e,t,l,u,i,o,!0)}}function h4e(e,t,n,r,i){let o=n[B4],a=Ca(n);o!==a&&r6(t,e,r,o,i);for(let s=C1;s<n.length;s++){let c=n[s];d9(c[Ke],c,e,t,r,o)}}function m4e(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:As.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=As.Important),e.setStyle(n,r,i,o))}}function g4e(e,t,n){e.setAttribute(t,"style",n)}function H$(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function L$(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&pS(e,t,r),i!==null&&H$(e,t,i),o!==null&&g4e(e,t,o)}var za={};function O(e=1){A$(Xn(),st(),Z4()+e,!1)}function A$(e,t,n,r){if(!r)if((t[$e]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Dm(t,o,n)}else{let o=e.preOrderHooks;o!==null&&zm(t,o,0,n)}U4(n)}function W(e,t=at.Default){let n=st();if(n===null)return ge(e,t);let r=pi();return e$(r,n,$i(e),t)}function V$(){let e="invalid";throw new Error(e)}function N$(e,t,n,r,i,o){let a=Br(null);try{let s=null;i&Ur.SignalBased&&(s=t[r][Lw]),s!==null&&s.transformFn!==void 0&&(o=s.transformFn(o)),i&Ur.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(t,o)),e.setInput!==null?e.setInput(t,s,o,n,r):UP(t,s,r,o)}finally{Br(a)}}function v4e(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)U4(~i);else{let o=i,a=n[++r],s=n[++r];dce(a,o);let c=t[o];s(2,c)}}}finally{U4(-1)}}function p9(e,t,n,r,i,o,a,s,c,l,u){let f=t.blueprint.slice();return f[Vs]=i,f[$e]=r|4|128|8|64,(l!==null||e&&e[$e]&2048)&&(f[$e]|=2048),fP(f),f[jr]=f[m6]=e,f[Do]=n,f[zs]=a||e&&e[zs],f[zn]=s||e&&e[zn],f[c6]=c||e&&e[c6]||null,f[Q1]=o,f[Km]=G3e(),f[k8]=u,f[sP]=l,f[v2]=t.type==2?e[v2]:f,f}function y6(e,t,n,r,i){let o=e.data[t];if(o===null)o=y4e(e,t,n,r,i),fce()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let a=sce();o.injectorIndex=a===null?-1:a.injectorIndex}return K4(o,!0),o}function y4e(e,t,n,r,i){let o=mP(),a=CE(),s=a?o:o&&o.parent,c=e.data[t]=S4e(e,s,n,t,r,i);return e.firstChild===null&&(e.firstChild=c),o!==null&&(a?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function _$(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function k$(e,t,n,r,i){let o=Z4(),a=r&2;try{U4(-1),a&&t.length>Ui&&A$(e,t,Ui,!1),va(a?2:0,i),n(r,i)}finally{U4(o),va(a?3:1,i)}}function UE(e,t,n){if(gE(t)){let r=Br(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let a=i;a<o;a++){let s=e.data[a];if(s.contentQueries){let c=n[a];s.contentQueries(1,c,a)}}}finally{Br(r)}}}function jE(e,t,n){pP()&&(A4e(e,t,n,zo(n,t)),(n.flags&64)===64&&F$(e,t,n))}function qE(e,t,n=zo){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],s=a===-1?n(t,e):e[a];e[i++]=s}}}function T$(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=GE(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function GE(e,t,n,r,i,o,a,s,c,l,u){let f=Ui+r,d=f+i,p=x4e(f,d),h=typeof l=="function"?l():l;return p[Ke]={type:e,blueprint:p,template:n,queries:null,viewQuery:s,declTNode:t,data:p.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:c,consts:h,incompleteFirstPass:!1,ssrId:u}}function x4e(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:za);return n}function C4e(e,t,n,r){let o=r.get(M3e,o$)||n===xa.ShadowDom,a=e.selectRootElement(t,o);return b4e(a),a}function b4e(e){M4e(e)}var M4e=()=>null;function w4e(e,t,n,r){let i=P$(t);i.push(n),e.firstCreatePass&&$$(e).push(r,i.length-1)}function S4e(e,t,n,r,i,o){let a=t?t.injectorIndex:-1,s=0;return hP()&&(s|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function NO(e,t,n,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let a=t[o];if(a===void 0)continue;r??={};let s,c=Ur.None;Array.isArray(a)?(s=a[0],c=a[1]):s=a;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}e===0?_O(r,n,l,s,c):_O(r,n,l,s)}return r}function _O(e,t,n,r,i){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,r):o=e[n]=[t,r],i!==void 0&&o.push(i)}function E4e(e,t,n){let r=t.directiveStart,i=t.directiveEnd,o=e.data,a=t.attrs,s=[],c=null,l=null;for(let u=r;u<i;u++){let f=o[u],d=n?n.get(f):null,p=d?d.inputs:null,h=d?d.outputs:null;c=NO(0,f.inputs,u,c,p),l=NO(1,f.outputs,u,l,h);let m=c!==null&&a!==null&&!JO(t)?$4e(c,u,a):null;s.push(m)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=s,t.inputs=c,t.outputs=l}function D4e(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function WE(e,t,n,r,i,o,a,s){let c=zo(t,n),l=t.inputs,u;!s&&l!=null&&(u=l[r])?(XE(e,n,u,r,i),Zm(t)&&z4e(n,t.index)):t.type&3?(r=D4e(r),i=a!=null?a(i,t.value||"",r):i,o.setProperty(c,r,i)):t.type&12}function z4e(e,t){let n=a3(t,e);n[$e]&16||(n[$e]|=64)}function YE(e,t,n,r){if(pP()){let i=r===null?null:{"":-1},o=N4e(e,n),a,s;o===null?a=s=null:[a,s]=o,a!==null&&I$(e,t,n,a,i,s),i&&_4e(n,r,i)}n.mergedAttrs=_8(n.mergedAttrs,n.attrs)}function I$(e,t,n,r,i,o){for(let l=0;l<r.length;l++)DS(Om(n,t),e,r[l].type);T4e(n,e.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let a=!1,s=!1,c=_$(e,t,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=_8(n.mergedAttrs,u.hostAttrs),I4e(e,n,t,c,u),k4e(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let f=u.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),a=!0),!s&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),s=!0),c++}E4e(e,n,o)}function H4e(e,t,n,r,i){let o=i.hostBindings;if(o){let a=e.hostBindingOpCodes;a===null&&(a=e.hostBindingOpCodes=[]);let s=~t.index;L4e(a)!=s&&a.push(s),a.push(n,r,o)}}function L4e(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function A4e(e,t,n,r){let i=n.directiveStart,o=n.directiveEnd;Zm(n)&&F4e(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||Om(n,t),i3(r,t);let a=n.initialInputs;for(let s=i;s<o;s++){let c=e.data[s],l=W4(t,e,s,n);if(i3(l,t),a!==null&&P4e(t,s-i,l,c,n,a),r3(c)){let u=a3(n.index,t);u[Do]=W4(t,e,s,n)}}}function F$(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,a=pce();try{U4(o);for(let s=r;s<i;s++){let c=e.data[s],l=t[s];mS(s),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&V4e(c,l)}}finally{U4(-1),mS(a)}}function V4e(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function N4e(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let a=n[o];if(eP(t,a.selectors,!1))if(r||(r=[]),r3(a))if(a.findHostDirectiveDefs!==null){let s=[];i=i||new Map,a.findHostDirectiveDefs(a,s,i),r.unshift(...s,a);let c=s.length;FS(e,t,c)}else r.unshift(a),FS(e,t,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return r===null?null:[r,i]}function FS(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function _4e(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new Ee(-301,!1);r.push(t[i],o)}}}function k4e(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;r3(t)&&(n[""]=e)}}function T4e(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function I4e(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=q4(i.type,!0)),a=new G4(o,r3(i),W);e.blueprint[r]=a,n[r]=a,H4e(e,t,r,_$(e,n,i.hostVars,za),i)}function F4e(e,t,n){let r=zo(t,e),i=T$(n),o=e[zs].rendererFactory,a=16;n.signals?a=4096:n.onPush&&(a=64);let s=h9(e,p9(e,i,null,a,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=s}function R4e(e,t,n,r,i,o){let a=zo(e,t);O4e(t[zn],a,o,e.value,n,r,i)}function O4e(e,t,n,r,i,o,a){if(o==null)e.removeAttribute(t,i,n);else{let s=a==null?j4(o):a(o,r||"",i);e.setAttribute(t,i,s,n)}}function P4e(e,t,n,r,i,o){let a=o[t];if(a!==null)for(let s=0;s<a.length;){let c=a[s++],l=a[s++],u=a[s++],f=a[s++];N$(r,n,c,l,u,f)}}function $4e(e,t,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let a=e[o];for(let s=0;s<a.length;s+=3)if(a[s]===t){r.push(o,a[s+1],a[s+2],n[i+1]);break}}i+=2}return r}function R$(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function O$(e,t){let n=e.contentQueries;if(n!==null){let r=Br(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a!==-1){let s=e.data[a];wE(o),s.contentQueries(2,t[a],a)}}}finally{Br(r)}}}function h9(e,t){return e[I8]?e[hO][g2]=t:e[I8]=t,e[hO]=t,t}function RS(e,t,n){wE(0);let r=Br(null);try{t(e,n)}finally{Br(r)}}function P$(e){return e[T8]||(e[T8]=[])}function $$(e){return e.cleanup||(e.cleanup=[])}function B$(e,t){let n=e[c6],r=n?n.get(ba,null):null;r&&r.handleError(t)}function XE(e,t,n,r,i){for(let o=0;o<n.length;){let a=n[o++],s=n[o++],c=n[o++],l=t[a],u=e.data[a];N$(u,l,r,s,c,i)}}function U$(e,t,n){let r=lP(t,e);Z3e(e[zn],r,n)}function B4e(e,t){let n=a3(t,e),r=n[Ke];U4e(r,n);let i=n[Vs];i!==null&&n[k8]===null&&(n[k8]=AE(i,n[c6])),QE(r,n,n[Do])}function U4e(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function QE(e,t,n){SE(t);try{let r=e.viewQuery;r!==null&&RS(1,r,n);let i=e.template;i!==null&&k$(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Hs]?.finishViewCreation(e),e.staticContentQueries&&O$(e,t),e.staticViewQueries&&RS(2,e.viewQuery,n);let o=e.components;o!==null&&j4e(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[$e]&=-5,EE()}}function j4e(e,t){for(let n=0;n<t.length;n++)B4e(e,t[n])}function j$(e,t,n,r){let i=t.tView,a=e[$e]&4096?4096:16,s=p9(e,i,n,a,null,t,null,null,null,r?.injector??null,r?.dehydratedView??null),c=e[t.index];s[q8]=c;let l=e[Hs];return l!==null&&(s[Hs]=l.createEmbeddedView(i)),QE(i,s,n),s}function q4e(e,t){let n=C1+t;if(n<e.length)return e[n]}function OS(e,t){return!t||t.firstChild===null||EP(e)}function q$(e,t,n,r=!0){let i=t[Ke];if(r4e(i,t,e,n),r){let a=IS(n,e),s=t[zn],c=$E(s,e[B4]);c!==null&&t4e(i,e[Q1],s,t,c,a)}let o=t[k8];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function G4e(e,t){let n=Pm(e,t);return n!==void 0&&PE(n[Ke],n),n}function Bm(e,t,n,r,i=!1){for(;n!==null;){let o=t[n.index];o!==null&&r.push(Ca(o)),Ns(o)&&W4e(o,r);let a=n.type;if(a&8)Bm(e,t,n.child,r);else if(a&32){let s=OE(n,t),c;for(;c=s();)r.push(c)}else if(a&16){let s=D$(t,n);if(Array.isArray(s))r.push(...s);else{let c=R8(t[v2]);Bm(c[Ke],c,s,r,!0)}}n=i?n.projectionNext:n.next}return r}function W4e(e,t){for(let n=C1;n<e.length;n++){let r=e[n],i=r[Ke].firstChild;i!==null&&Bm(r[Ke],r,i,t)}e[B4]!==e[Vs]&&t.push(e[B4])}var G$=[];function Y4e(e){return e[$4]??X4e(e)}function X4e(e){let t=G$.pop()??Object.create(K4e);return t.lView=e,t}function Q4e(e){e.lView[$4]!==e&&(e.lView=null,G$.push(e))}var K4e=k(x({},_R),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{F8(e.lView)},consumerOnSignalRead(){this.lView[$4]=this}});function W$(e){return X$(e[I8])}function Y$(e){return X$(e[g2])}function X$(e){for(;e!==null&&!Ns(e);)e=e[g2];return e}var Q$=100;function K$(e,t=!0,n=0){let r=e[zs],i=r.rendererFactory,o=!1;o||i.begin?.();try{Z4e(e,n)}catch(a){throw t&&B$(e,a),a}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function Z4e(e,t){PS(e,t);let n=0;for(;xE(e);){if(n===Q$)throw new Ee(103,!1);n++,PS(e,1)}}function J4e(e,t,n,r){let i=t[$e];if((i&256)===256)return;let o=!1;!o&&t[zs].inlineEffectRunner?.flush(),SE(t);let a=null,s=null;!o&&ele(e)&&(s=Y4e(t),a=kR(s));try{fP(t),uce(e.bindingStartIndex),n!==null&&k$(e,t,n,2,r);let c=(i&3)===3;if(!o)if(c){let f=e.preOrderCheckHooks;f!==null&&Dm(t,f,null)}else{let f=e.preOrderHooks;f!==null&&zm(t,f,0,null),Jw(t,0)}if(tle(t),Z$(t,0),e.contentQueries!==null&&O$(e,t),!o)if(c){let f=e.contentCheckHooks;f!==null&&Dm(t,f)}else{let f=e.contentHooks;f!==null&&zm(t,f,1),Jw(t,1)}v4e(e,t);let l=e.components;l!==null&&eB(t,l,0);let u=e.viewQuery;if(u!==null&&RS(2,u,r),!o)if(c){let f=e.viewCheckHooks;f!==null&&Dm(t,f)}else{let f=e.viewHooks;f!==null&&zm(t,f,2),Jw(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Qw]){for(let f of t[Qw])f();t[Qw]=null}o||(t[$e]&=-73)}catch(c){throw F8(t),c}finally{s!==null&&(TR(s,a),Q4e(s)),EE()}}function ele(e){return e.type!==2}function Z$(e,t){for(let n=W$(e);n!==null;n=Y$(n))for(let r=C1;r<n.length;r++){let i=n[r];J$(i,t)}}function tle(e){for(let t=W$(e);t!==null;t=Y$(t)){if(!(t[$e]&mE.HasTransplantedViews))continue;let n=t[l6];for(let r=0;r<n.length;r++){let i=n[r],o=i[jr];Jse(i)}}}function nle(e,t,n){let r=a3(t,e);J$(r,n)}function J$(e,t){yE(e)&&PS(e,t)}function PS(e,t){let r=e[Ke],i=e[$e],o=e[$4],a=!!(t===0&&i&16);if(a||=!!(i&64&&t===0),a||=!!(i&1024),a||=!!(o?.dirty&&Aw(o)),o&&(o.dirty=!1),e[$e]&=-9217,a)J4e(r,e,r.template,e[Do]);else if(i&8192){Z$(e,1);let s=r.components;s!==null&&eB(e,s,1)}}function eB(e,t,n){for(let r=0;r<t.length;r++)nle(e,t[r],n)}function KE(e){for(e[zs].changeDetectionScheduler?.notify();e;){e[$e]|=64;let t=R8(e);if(Gse(e)&&!t)return e;e=t}return null}var Y4=class{get rootNodes(){let t=this._lView,n=t[Ke];return Bm(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Do]}set context(t){this._lView[Do]=t}get destroyed(){return(this._lView[$e]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[jr];if(Ns(t)){let n=t[Nm],r=n?n.indexOf(this):-1;r>-1&&(Pm(t,r),_m(n,r))}this._attachedToViewContainer=!1}PE(this._lView[Ke],this._lView)}onDestroy(t){dP(this._lView,t)}markForCheck(){KE(this._cdRefInjectingView||this._lView)}detach(){this._lView[$e]&=-129}reattach(){hS(this._lView),this._lView[$e]|=128}detectChanges(){this._lView[$e]|=1024,K$(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,b$(this._lView[Ke],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Ee(902,!1);this._appRef=t,hS(this._lView)}},X4=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=ole;let e=t;return e})(),rle=X4,ile=class extends rle{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=j$(this._declarationLView,this._declarationTContainer,t,{injector:n,dehydratedView:r});return new Y4(i)}};function ole(){return m9(pi(),st())}function m9(e,t){return e.type&4?new ile(t,e,v6(e,t)):null}var sGe=new RegExp(`^(\\d+)*(${Uce}|${Bce})*(.*)`);var ale=()=>null;function $S(e,t){return ale(e,t)}var BS=class{},US=class{},Um=class{};function sle(e){let t=Error(`No component factory found for ${Bi(e)}.`);return t[cle]=e,t}var cle="ngComponent";var jS=class{resolveComponentFactory(t){throw sle(t)}},g9=(()=>{let t=class t{};t.NULL=new jS;let e=t;return e})(),$8=class{},K1=(()=>{let t=class t{constructor(){this.destroyNode=null}};t.__NG_ELEMENT_ID__=()=>lle();let e=t;return e})();function lle(){let e=st(),t=pi(),n=a3(t.index,e);return(O4(n)?n:e)[zn]}var ule=(()=>{let t=class t{};t.\u0275prov=ue({token:t,providedIn:"root",factory:()=>null});let e=t;return e})(),rS={};function fle(e){return typeof e=="function"&&e[Lw]!==void 0}var kO=new Set;function X8(e){kO.has(e)||(kO.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function tB(e){return fle(e)&&typeof e.set=="function"}function ZE(e){let t=Br(null);try{return e()}finally{Br(t)}}function nB(e){return ple(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function dle(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function ple(e){return e!==null&&(typeof e=="function"||typeof e=="object")}var qS=class{constructor(){}supports(t){return nB(t)}create(t){return new GS(t)}},hle=(e,t)=>t,GS=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||hle}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let a=!r||n&&n.currentIndex<TO(r,i,o)?n:r,s=TO(a,i,o),c=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(n=n._next,a.previousIndex==null)i++;else{o||(o=[]);let l=s-i,u=c-i;if(l!=u){for(let d=0;d<l;d++){let p=d<o.length?o[d]:o[d]=0,h=p+d;u<=h&&h<l&&(o[d]=p+1)}let f=a.previousIndex;o[f]=u-l}}s!==c&&t(a,s,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!nB(t))throw new Ee(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,a;if(Array.isArray(t)){this.length=t.length;for(let s=0;s<this.length;s++)o=t[s],a=this._trackByFn(s,o),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,o,a,s),r=!0):(r&&(n=this._verifyReinsertion(n,o,a,s)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,dle(t,s=>{a=this._trackByFn(i,s),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,s,a,i),r=!0):(r&&(n=this._verifyReinsertion(n,s,a,i)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new WS(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new jm),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new jm),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},WS=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},YS=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},jm=class{constructor(){this.map=new Map}put(t){let n=t.trackById,r=this.map.get(n);r||(r=new YS,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function TO(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function IO(){return new JE([new qS])}var JE=(()=>{let t=class t{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new t(r)}static extend(r){return{provide:t,useFactory:i=>t.create(r,i||IO()),deps:[[t,new VE,new a9]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new Ee(901,!1)}};t.\u0275prov=ue({token:t,providedIn:"root",factory:IO});let e=t;return e})();var Is=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=mle;let e=t;return e})();function mle(e){return gle(pi(),st(),(e&16)===16)}function gle(e,t,n){if(Zm(e)&&!n){let r=a3(e.index,t);return new Y4(r,r)}else if(e.type&47){let r=t[v2];return new Y4(r,t)}return null}var rB=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=vle,t.__NG_ENV_ID__=r=>r;let e=t;return e})(),XS=class extends rB{constructor(t){super(),this._lView=t}onDestroy(t){return dP(this._lView,t),()=>tce(this._lView,t)}};function vle(){return new XS(st())}function FO(...e){}function yle(){let e=typeof Yn.requestAnimationFrame=="function",t=Yn[e?"requestAnimationFrame":"setTimeout"],n=Yn[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}var Ot=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bn(!1),this.onMicrotaskEmpty=new bn(!1),this.onStable=new bn(!1),this.onError=new bn(!1),typeof Zone>"u")throw new Ee(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=yle().nativeRequestAnimationFrame,ble(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new Ee(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new Ee(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,t,xle,FO,FO);try{return o.runTask(a,n,r)}finally{o.cancelTask(a)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},xle={};function eD(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Cle(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Yn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,QS(e),e.isCheckStableRunning=!0,eD(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),QS(e))}function ble(e){let t=()=>{Cle(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,a,s)=>{if(Mle(s))return n.invokeTask(i,o,a,s);try{return RO(e),n.invokeTask(i,o,a,s)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),OO(e)}},onInvoke:(n,r,i,o,a,s,c)=>{try{return RO(e),n.invoke(i,o,a,s,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),OO(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,QS(e),eD(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function QS(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function RO(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function OO(e){e._nesting--,eD(e)}function Mle(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}var i6=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(i6||{}),wle={destroy(){}};function tD(e,t){!t&&n3e(tD);let n=t?.injector??ce(_s);if(!X3e(n))return wle;X8("NgAfterNextRender");let r=n.get(nD),i=r.handler??=new ZS,o=t?.phase??i6.MixedReadWrite,a=()=>{i.unregister(c),s()},s=n.get(rB).onDestroy(a),c=new KS(n,o,()=>{a(),e()});return i.register(c),{destroy:a}}var KS=class{constructor(t,n,r){this.phase=n,this.callbackFn=r,this.zone=t.get(Ot),this.errorHandler=t.get(ba,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(t){this.errorHandler?.handleError(t)}}},ZS=class{constructor(){this.executingCallbacks=!1,this.buckets={[i6.EarlyRead]:new Set,[i6.Write]:new Set,[i6.MixedReadWrite]:new Set,[i6.Read]:new Set},this.deferredCallbacks=new Set}register(t){(this.executingCallbacks?this.deferredCallbacks:this.buckets[t.phase]).add(t)}unregister(t){this.buckets[t.phase].delete(t),this.deferredCallbacks.delete(t)}execute(){this.executingCallbacks=!0;for(let t of Object.values(this.buckets))for(let n of t)n.invoke();this.executingCallbacks=!1;for(let t of this.deferredCallbacks)this.buckets[t.phase].add(t);this.deferredCallbacks.clear()}destroy(){for(let t of Object.values(this.buckets))t.clear();this.deferredCallbacks.clear()}},nD=(()=>{let t=class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=ue({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();function qm(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let a=0;a<t.length;a++){let s=t[a];if(typeof s=="number")o=s;else if(o==1)i=cO(i,s);else if(o==2){let c=s,l=t[++a];r=cO(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Gm=class extends g9{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=n3(t);return new p6(n,this.ngModule)}};function PO(e){let t=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let r=e[n];r!==void 0&&t.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return t}function Sle(e){let t=e.toLowerCase();return t==="svg"?Wse:t==="math"?Yse:null}var JS=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=o9(r);let i=this.injector.get(t,rS,r);return i!==rS||n===rS?i:this.parentInjector.get(t,n,r)}},p6=class extends Um{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=PO(t.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return PO(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=$se(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){i=i||this.ngModule;let o=i instanceof ji?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new JS(t,o):t,s=a.get($8,null);if(s===null)throw new Ee(407,!1);let c=a.get(ule,null),l=a.get(nD,null),u=a.get(BS,null),f={rendererFactory:s,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:u},d=s.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",h=r?C4e(d,r,this.componentDef.encapsulation,a):C$(d,p,Sle(p)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let g=null;h!==null&&(g=AE(h,a,!0));let v=GE(0,null,null,1,0,null,null,null,null,null,null),y=p9(null,v,null,m,null,null,f,d,a,null,g);SE(y);let C,b;try{let M=this.componentDef,S,w=null;M.findHostDirectiveDefs?(S=[],w=new Map,M.findHostDirectiveDefs(M,S,w),S.push(M)):S=[M];let E=Ele(y,h),D=Dle(E,h,M,S,y,f,d);b=vE(v,Ui),h&&Lle(d,M,h,r),n!==void 0&&Ale(b,this.ngContentSelectors,n),C=Hle(D,M,S,w,y,[Vle]),QE(v,y,null)}finally{EE()}return new eE(this.componentType,C,v6(b,y),y,b)}},eE=class extends US{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Y4(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;XE(o[Ke],o,i,t,n),this.previousInputValues.set(t,n);let a=a3(this._tNode.index,o);KE(a)}}get injector(){return new P4(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Ele(e,t){let n=e[Ke],r=Ui;return e[r]=t,y6(n,r,2,"#host",null)}function Dle(e,t,n,r,i,o,a){let s=i[Ke];zle(r,e,t,a);let c=null;t!==null&&(c=AE(t,i[c6]));let l=o.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let f=p9(i,T$(n),null,u,i[e.index],e,o,l,null,null,c);return s.firstCreatePass&&FS(s,e,r.length-1),h9(i,f),i[e.index]=f}function zle(e,t,n,r){for(let i of e)t.mergedAttrs=_8(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(qm(t,t.mergedAttrs,!0),n!==null&&L$(r,n,t))}function Hle(e,t,n,r,i,o){let a=pi(),s=i[Ke],c=zo(a,i);I$(s,i,a,n,null,r);for(let u=0;u<n.length;u++){let f=a.directiveStart+u,d=W4(i,s,f,a);i3(d,i)}F$(s,i,a),c&&i3(c,i);let l=W4(i,s,a.directiveStart+a.componentOffset,a);if(e[Do]=i[Do]=l,o!==null)for(let u of o)u(l,t);return UE(s,a,i),l}function Lle(e,t,n,r){if(r)pS(e,n,["ng-version","17.2.3"]);else{let{attrs:i,classes:o}=Bse(t.selectors[0]);i&&pS(e,n,i),o&&o.length>0&&H$(e,n,o.join(" "))}}function Ale(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function Vle(){let e=pi();c9(st()[Ke],e)}var s3=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=Nle;let e=t;return e})();function Nle(){let e=pi();return oB(e,st())}var _le=s3,iB=class extends _le{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return v6(this._hostTNode,this._hostLView)}get injector(){return new P4(this._hostTNode,this._hostLView)}get parentInjector(){let t=TE(this._hostTNode,this._hostLView);if(YP(t)){let n=Fm(t,this._hostLView),r=Im(t),i=n[Ke].data[r+8];return new P4(i,n)}else return new P4(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=$O(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-C1}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=$S(this._lContainer,t.ssrId),s=t.createEmbeddedViewImpl(n||{},o,a);return this.insertImpl(s,i,OS(this._hostTNode,a)),s}createComponent(t,n,r,i,o){let a=t&&!r3e(t),s;if(a)s=n;else{let h=n||{};s=h.index,r=h.injector,i=h.projectableNodes,o=h.environmentInjector||h.ngModuleRef}let c=a?t:new p6(n3(t)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let m=(a?l:this.parentInjector).get(ji,null);m&&(o=m)}let u=n3(c.componentType??{}),f=$S(this._lContainer,u?.id??null),d=f?.firstChild??null,p=c.create(l,i,d,o);return this.insertImpl(p.hostView,s,OS(this._hostTNode,f)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(Zse(i)){let s=this.indexOf(t);if(s!==-1)this.detach(s);else{let c=i[jr],l=new iB(c,c[Q1],c[jr]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),a=this._lContainer;return q$(a,i,o,r),t.attachToViewContainerRef(),SP(iS(a),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=$O(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Pm(this._lContainer,n);r&&(_m(iS(this._lContainer),n),PE(r[Ke],r))}detach(t){let n=this._adjustIndex(t,-1),r=Pm(this._lContainer,n);return r&&_m(iS(this._lContainer),n)!=null?new Y4(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function $O(e){return e[Nm]}function iS(e){return e[Nm]||(e[Nm]=[])}function oB(e,t){let n,r=t[e.index];return Ns(r)?n=r:(n=R$(r,t,null,e),t[e.index]=n,h9(t,n)),Tle(n,t,e,r),new iB(n,e,t)}function kle(e,t){let n=e[zn],r=n.createComment(""),i=zo(t,e),o=$E(n,i);return $m(n,o,r,l4e(n,i),!1),r}var Tle=Rle,Ile=()=>!1;function Fle(e,t,n){return Ile(e,t,n)}function Rle(e,t,n,r){if(e[B4])return;let i;n.type&8?i=Ca(r):i=kle(t,n),e[B4]=i}var tE=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},nE=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let a=n.getByIndex(o),s=this.queries[a.indexInDeclarationView];i.push(s.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)rD(t,n).matches!==null&&this.queries[n].setDirty()}},rE=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=Gle(t):this.predicate=t}},iE=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},oE=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,n,Ole(n,o)),this.matchTNodeWithReadOption(t,n,Hm(n,t,o,!1,!1))}else r===X4?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Hm(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===qr||i===s3||i===X4&&n.type&4)this.addMatch(n.index,-2);else{let o=Hm(n,t,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function Ole(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function Ple(e,t){return e.type&11?v6(e,t):e.type&4?m9(e,t):null}function $le(e,t,n,r){return n===-1?Ple(t,e):n===-2?Ble(e,t,r):W4(e,e[Ke],n,t)}function Ble(e,t,n){if(n===qr)return v6(t,e);if(n===X4)return m9(t,e);if(n===s3)return oB(t,e)}function aB(e,t,n,r){let i=t[Hs].queries[r];if(i.matches===null){let o=e.data,a=n.matches,s=[];for(let c=0;a!==null&&c<a.length;c+=2){let l=a[c];if(l<0)s.push(null);else{let u=o[l];s.push($le(t,u,a[c+1],n.metadata.read))}}i.matches=s}return i.matches}function aE(e,t,n,r){let i=e.queries.getByIndex(n),o=i.matches;if(o!==null){let a=aB(e,t,i,n);for(let s=0;s<o.length;s+=2){let c=o[s];if(c>0)r.push(a[s/2]);else{let l=o[s+1],u=t[-c];for(let f=C1;f<u.length;f++){let d=u[f];d[q8]===d[jr]&&aE(d[Ke],d,l,r)}if(u[l6]!==null){let f=u[l6];for(let d=0;d<f.length;d++){let p=f[d];aE(p[Ke],p,l,r)}}}}}return r}function Ule(e,t){return e[Hs].queries[t].queryList}function jle(e,t,n){let r=new gS((n&4)===4);return w4e(e,t,r,r.destroy),(t[Hs]??=new nE).queries.push(new tE(r))-1}function qle(e,t,n,r){let i=Xn();if(i.firstCreatePass){let o=pi();Wle(i,new rE(t,n,r),o.index),Yle(i,e),(n&2)===2&&(i.staticContentQueries=!0)}return jle(i,st(),n)}function Gle(e){return e.split(",").map(t=>t.trim())}function Wle(e,t,n){e.queries===null&&(e.queries=new iE),e.queries.track(new oE(t,n))}function Yle(e,t){let n=e.contentQueries||(e.contentQueries=[]),r=n.length?n[n.length-1]:-1;t!==r&&n.push(e.queries.length-1,t)}function rD(e,t){return e.queries.getByIndex(t)}function Xle(e,t){let n=e[Ke],r=rD(n,t);return r.crossesNgTemplate?aE(n,e,t,[]):aB(n,e,r,t)}function Qle(e){return Object.getPrototypeOf(e.prototype).constructor}function cr(e){let t=Qle(e.type),n=!0,r=[e];for(;t;){let i;if(r3(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Ee(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let a=e;a.inputs=wm(e.inputs),a.inputTransforms=wm(e.inputTransforms),a.declaredInputs=wm(e.declaredInputs),a.outputs=wm(e.outputs);let s=i.hostBindings;s&&t0e(e,s);let c=i.viewQuery,l=i.contentQueries;if(c&&Jle(e,c),l&&e0e(e,l),Kle(e,i),Dse(e.outputs,i.outputs),r3(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let a=0;a<o.length;a++){let s=o[a];s&&s.ngInherit&&s(e),s===cr&&(n=!1)}}t=Object.getPrototypeOf(t)}Zle(r)}function Kle(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=t.inputTransforms[i]}}}function Zle(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=_8(i.hostAttrs,n=_8(n,i.hostAttrs))}}function wm(e){return e===s6?{}:e===Eo?[]:e}function Jle(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function e0e(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function t0e(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function iD(e){let t=e.inputConfig,n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}e.inputTransforms=n}var o3=class{},B8=class{};var sE=class extends o3{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gm(this);let i=iP(t);this._bootstrapComponents=x$(i.bootstrap),this._r3Injector=r$(t,n,[{provide:o3,useValue:this},{provide:g9,useValue:this.componentFactoryResolver},...r],Bi(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},cE=class extends B8{constructor(t){super(),this.moduleType=t}create(t){return new sE(this.moduleType,t,[])}};var Wm=class extends o3{constructor(t){super(),this.componentFactoryResolver=new Gm(this),this.instance=null;let n=new P8([...t.providers,{provide:o3,useValue:this},{provide:g9,useValue:this.componentFactoryResolver}],t.parent||kE(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function v9(e,t,n=null){return new Wm({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var J4=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Pn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function sB(e,t,n){return e[t]=n}function n0e(e,t){return e[t]}function Ma(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function r0e(e,t,n,r){let i=Ma(e,t,n);return Ma(e,t+1,r)||i}function i0e(e,t,n,r,i,o,a,s,c){let l=t.consts,u=y6(t,e,4,a||null,u6(l,s));YE(t,n,u,u6(l,c)),c9(t,u);let f=u.tView=GE(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,u),f.queries=t.queries.embeddedTView(u)),u}function Xe(e,t,n,r,i,o,a,s){let c=st(),l=Xn(),u=e+Ui,f=l.firstCreatePass?i0e(u,l,c,t,n,r,i,o,a):l.data[u];K4(f,!1);let d=o0e(l,c,f,e);t9()&&f9(l,c,d,f),i3(d,c);let p=R$(d,c,d,f);return c[u]=p,h9(c,p),Fle(p,f,c),Jm(f)&&jE(l,c,f),a!=null&&qE(c,f,s),Xe}var o0e=a0e;function a0e(e,t,n,r){return n9(!0),t[zn].createComment("")}function x6(e,t,n,r){let i=st(),o=g6();if(Ma(i,o,t)){let a=Xn(),s=e9();R4e(s,i,e,t,n,r)}return x6}function s0e(e,t,n,r){return Ma(e,g6(),n)?t+j4(n)+r:za}function c0e(e,t,n,r,i,o){let a=lce(),s=r0e(e,a,n,i);return gP(2),s?t+j4(n)+r+j4(i)+o:za}function Sm(e,t){return e<<17|t<<2}function Q4(e){return e>>17&32767}function l0e(e){return(e&2)==2}function u0e(e,t){return e&131071|t<<17}function lE(e){return e|2}function h6(e){return(e&131068)>>2}function oS(e,t){return e&-131069|t<<2}function f0e(e){return(e&1)===1}function uE(e){return e|1}function d0e(e,t,n,r,i,o){let a=o?t.classBindings:t.styleBindings,s=Q4(a),c=h6(a);e[r]=n;let l=!1,u;if(Array.isArray(n)){let f=n;u=f[1],(u===null||G8(f,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let d=Q4(e[s+1]);e[r+1]=Sm(d,s),d!==0&&(e[d+1]=oS(e[d+1],r)),e[s+1]=u0e(e[s+1],r)}else e[r+1]=Sm(s,0),s!==0&&(e[s+1]=oS(e[s+1],r)),s=r;else e[r+1]=Sm(c,0),s===0?s=r:e[c+1]=oS(e[c+1],r),c=r;l&&(e[r+1]=lE(e[r+1])),BO(e,u,r,!0),BO(e,u,r,!1),p0e(t,u,e,r,o),a=Sm(s,c),o?t.classBindings=a:t.styleBindings=a}function p0e(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&G8(o,t)>=0&&(n[r+1]=uE(n[r+1]))}function BO(e,t,n,r){let i=e[n+1],o=t===null,a=r?Q4(i):h6(i),s=!1;for(;a!==0&&(s===!1||o);){let c=e[a],l=e[a+1];h0e(c,t)&&(s=!0,e[a+1]=r?uE(l):lE(l)),a=r?Q4(l):h6(l)}s&&(e[n+1]=r?lE(i):uE(i))}function h0e(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?G8(e,t)>=0:!1}function se(e,t,n){let r=st(),i=g6();if(Ma(r,i,t)){let o=Xn(),a=e9();WE(o,a,r,e,t,r[zn],n,!1)}return se}function UO(e,t,n,r,i){let o=t.inputs,a=i?"class":"style";XE(e,n,o[a],a,r)}function Q8(e,t){return m0e(e,t,null,!0),Q8}function m0e(e,t,n,r){let i=st(),o=Xn(),a=gP(2);if(o.firstUpdatePass&&v0e(o,e,a,r),t!==za&&Ma(i,a,t)){let s=o.data[Z4()];M0e(o,s,i,i[zn],e,i[a+1]=w0e(t,n),r,a)}}function g0e(e,t){return t>=e.expandoStartIndex}function v0e(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[Z4()],a=g0e(e,n);S0e(o,r)&&t===null&&!a&&(t=!1),t=y0e(i,o,t,r),d0e(i,o,t,n,a,r)}}function y0e(e,t,n,r){let i=hce(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=aS(null,e,t,n,r),n=U8(n,t.attrs,r),o=null);else{let a=t.directiveStylingLast;if(a===-1||e[a]!==i)if(n=aS(i,e,t,n,r),o===null){let c=x0e(e,t,r);c!==void 0&&Array.isArray(c)&&(c=aS(null,e,t,c[1],r),c=U8(c,t.attrs,r),C0e(e,t,r,c))}else o=b0e(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function x0e(e,t,n){let r=n?t.classBindings:t.styleBindings;if(h6(r)!==0)return e[Q4(r)]}function C0e(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[Q4(i)]=r}function b0e(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let a=e[o].hostAttrs;r=U8(r,a,n)}return U8(r,t.attrs,n)}function aS(e,t,n,r,i){let o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(s===-1?s=n.directiveStart:s++;s<a&&(o=t[s],r=U8(r,o.hostAttrs,i),o!==e);)s++;return e!==null&&(n.directiveStylingLast=s),r}function U8(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];typeof a=="number"?i=a:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Sce(e,a,n?!0:t[++o]))}return e===void 0?null:e}function M0e(e,t,n,r,i,o,a,s){if(!(t.type&3))return;let c=e.data,l=c[s+1],u=f0e(l)?jO(c,t,n,i,h6(l),a):void 0;if(!Ym(u)){Ym(o)||l0e(l)&&(o=jO(c,null,n,i,s,a));let f=lP(Z4(),n);m4e(r,a,f,i,o)}}function jO(e,t,n,r,i,o){let a=t===null,s;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,f=u===null,d=n[i+1];d===za&&(d=f?Eo:void 0);let p=f?Kw(d,r):u===r?d:void 0;if(l&&!Ym(p)&&(p=Kw(c,r)),Ym(p)&&(s=p,a))return s;let h=e[i+1];i=a?Q4(h):h6(h)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(s=Kw(c,r))}return s}function Ym(e){return e!==void 0}function w0e(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Bi(y2(e)))),e}function S0e(e,t){return(e.flags&(t?8:16))!==0}function hi(e,t,n){X8("NgControlFlow");let r=st(),i=g6(),o=E0e(r,Ui+e),a=0;if(Ma(r,i,t)){let s=Br(null);try{if(G4e(o,a),t!==-1){let c=D0e(r[Ke],Ui+t),l=$S(o,c.tView.ssrId),u=j$(r,c,n,{dehydratedView:l});q$(o,u,a,OS(c,l))}}finally{Br(s)}}else{let s=q4e(o,a);s!==void 0&&(s[Do]=n)}}function E0e(e,t){return e[t]}function D0e(e,t){return vE(e,t)}function z0e(e,t,n,r,i,o){let a=t.consts,s=u6(a,i),c=y6(t,e,2,r,s);return YE(t,n,c,u6(a,o)),c.attrs!==null&&qm(c,c.attrs,!1),c.mergedAttrs!==null&&qm(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function V(e,t,n,r){let i=st(),o=Xn(),a=Ui+e,s=i[zn],c=o.firstCreatePass?z0e(a,o,i,t,n,r):o.data[a],l=H0e(o,i,c,s,t,e);i[a]=l;let u=Jm(c);return K4(c,!0),L$(s,l,c),(c.flags&32)!==32&&t9()&&f9(o,i,l,c),nce()===0&&i3(l,i),rce(),u&&(jE(o,i,c),UE(o,c,i)),r!==null&&qE(i,c),V}function _(){let e=pi();CE()?bE():(e=e.parent,K4(e,!1));let t=e;oce(t)&&ace(),ice();let n=Xn();return n.firstCreatePass&&(c9(n,e),gE(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&u3e(t)&&UO(n,t,st(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&f3e(t)&&UO(n,t,st(),t.stylesWithoutHost,!1),_}function gt(e,t,n,r){return V(e,t,n,r),_(),gt}var H0e=(e,t,n,r,i,o)=>(n9(!0),C$(r,i,vce()));function L0e(e,t,n,r,i){let o=t.consts,a=u6(o,r),s=y6(t,e,8,"ng-container",a);a!==null&&qm(s,a,!0);let c=u6(o,i);return YE(t,n,s,c),t.queries!==null&&t.queries.elementStart(t,s),s}function b1(e,t,n){let r=st(),i=Xn(),o=e+Ui,a=i.firstCreatePass?L0e(o,i,r,t,n):i.data[o];K4(a,!0);let s=A0e(i,r,a,e);return r[o]=s,t9()&&f9(i,r,s,a),i3(s,r),Jm(a)&&(jE(i,r,a),UE(i,a,r)),n!=null&&qE(r,a),b1}function M1(){let e=pi(),t=Xn();return CE()?bE():(e=e.parent,K4(e,!1)),t.firstCreatePass&&(c9(t,e),gE(e)&&t.queries.elementEnd(e)),M1}var A0e=(e,t,n,r)=>(n9(!0),J3e(t[zn],""));function Z1(){return st()}function oD(e,t,n){let r=st(),i=g6();if(Ma(r,i,t)){let o=Xn(),a=e9();WE(o,a,r,e,t,r[zn],n,!0)}return oD}var R4=void 0;function V0e(e){let t=e,n=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var N0e=["en",[["a","p"],["AM","PM"],R4],[["AM","PM"],R4,R4],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],R4,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],R4,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",R4,"{1} 'at' {0}",R4],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",V0e],sS={};function Lo(e){let t=_0e(e),n=qO(t);if(n)return n;let r=t.split("-")[0];if(n=qO(r),n)return n;if(r==="en")return N0e;throw new Ee(701,!1)}function qO(e){return e in sS||(sS[e]=Yn.ng&&Yn.ng.common&&Yn.ng.common.locales&&Yn.ng.common.locales[e]),sS[e]}var $n=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}($n||{});function _0e(e){return e.toLowerCase().replace(/_/g,"-")}var Xm="en-US";var k0e=Xm;function T0e(e){typeof e=="string"&&(k0e=e.toLowerCase().replace(/_/g,"-"))}function Re(e,t,n,r){let i=st(),o=Xn(),a=pi();return cB(o,i,i[zn],a,e,t,r),Re}function I0e(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===n&&i[o+1]===r){let s=t[T8],c=i[o+2];return s.length>c?s[c]:null}typeof a=="string"&&(o+=2)}return null}function cB(e,t,n,r,i,o,a){let s=Jm(r),l=e.firstCreatePass&&$$(e),u=t[Do],f=P$(t),d=!0;if(r.type&3||a){let m=zo(r,t),g=a?a(m):m,v=f.length,y=a?b=>a(Ca(b[r.index])):r.index,C=null;if(!a&&s&&(C=I0e(e,t,i,r.index)),C!==null){let b=C.__ngLastListenerFn__||C;b.__ngNextListenerFn__=o,C.__ngLastListenerFn__=o,d=!1}else{o=WO(r,t,u,o,!1);let b=n.listen(g,i,o);f.push(o,b),l&&l.push(i,y,v,v+1)}}else o=WO(r,t,u,o,!1);let p=r.outputs,h;if(d&&p!==null&&(h=p[i])){let m=h.length;if(m)for(let g=0;g<m;g+=2){let v=h[g],y=h[g+1],M=t[v][y].subscribe(o),S=f.length;if(f.push(o,M),l){let w=typeof M=="function"?S+1:-(S+1);l.push(i,r.index,S,w)}}}}function GO(e,t,n,r){try{return va(6,t,n),n(r)!==!1}catch(i){return B$(e,i),!1}finally{va(7,t,n)}}function WO(e,t,n,r,i){return function o(a){if(a===Function)return r;let s=e.componentOffset>-1?a3(e.index,t):t;KE(s);let c=GO(t,n,r,a),l=o.__ngNextListenerFn__;for(;l;)c=GO(t,n,l,a)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&a.preventDefault(),c}}function qe(e=1){return gce(e)}function F0e(e,t){let n=null,r=Ise(e);for(let i=0;i<t.length;i++){let o=t[i];if(o==="*"){n=i;continue}if(r===null?eP(e,o,!0):Ose(r,o))return i}return n}function lB(e){let t=st()[v2][Q1];if(!t.projection){let n=e?e.length:1,r=t.projection=Mce(n,null),i=r.slice(),o=t.child;for(;o!==null;){let a=e?F0e(o,e):0;a!==null&&(i[a]?i[a].projectionNext=o:r[a]=o,i[a]=o),o=o.next}}}function uB(e,t=0,n){let r=st(),i=Xn(),o=y6(i,Ui+e,16,null,n||null);o.projection===null&&(o.projection=t),bE(),(!r[k8]||hP())&&(o.flags&32)!==32&&p4e(i,r,o)}function fB(e,t,n,r){qle(e,t,n,r)}function dB(e){let t=st(),n=Xn(),r=vP();wE(r+1);let i=rD(n,r);if(e.dirty&&Kse(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=Xle(t,r);e.reset(o,xce),e.notifyOnChanges()}return!0}return!1}function pB(){return Ule(st(),vP())}function R0e(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function el(e){let t=cce();return uP(t,Ui+e)}function I(e,t=""){let n=st(),r=Xn(),i=e+Ui,o=r.firstCreatePass?y6(r,i,1,t,null):r.data[i],a=O0e(r,n,o,t,e);n[i]=a,t9()&&f9(r,n,a,o),K4(o,!1)}var O0e=(e,t,n,r,i)=>(n9(!0),K3e(t[zn],r));function Hn(e){return ze("",e,""),Hn}function ze(e,t,n){let r=st(),i=s0e(r,e,t,n);return i!==za&&U$(r,Z4(),i),ze}function K8(e,t,n,r,i){let o=st(),a=c0e(o,e,t,n,r,i);return a!==za&&U$(o,Z4(),a),K8}function Wt(e,t,n){tB(t)&&(t=t());let r=st(),i=g6();if(Ma(r,i,t)){let o=Xn(),a=e9();WE(o,a,r,e,t,r[zn],n,!1)}return Wt}function tn(e,t){let n=tB(e);return n&&e.set(t),n}function Yt(e,t){let n=st(),r=Xn(),i=pi();return cB(r,n,n[zn],i,e,t),Yt}function P0e(e,t,n){let r=Xn();if(r.firstCreatePass){let i=r3(e);fE(n,r.data,r.blueprint,i,!0),fE(t,r.data,r.blueprint,i,!1)}}function fE(e,t,n,r,i){if(e=$i(e),Array.isArray(e))for(let o=0;o<e.length;o++)fE(e[o],t,n,r,i);else{let o=Xn(),a=st(),s=pi(),c=d6(e)?e:$i(e.provide),l=BP(e),u=s.providerIndexes&1048575,f=s.directiveStart,d=s.providerIndexes>>20;if(d6(e)||!e.multi){let p=new G4(l,i,W),h=lS(c,t,i?u:u+d,f);h===-1?(DS(Om(s,a),o,c),cS(o,e,t.length),t.push(c),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),n.push(p),a.push(p)):(n[h]=p,a[h]=p)}else{let p=lS(c,t,u+d,f),h=lS(c,t,u,u+d),m=p>=0&&n[p],g=h>=0&&n[h];if(i&&!g||!i&&!m){DS(Om(s,a),o,c);let v=U0e(i?B0e:$0e,n.length,i,r,l);!i&&g&&(n[h].providerFactory=v),cS(o,e,t.length,0),t.push(c),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),n.push(v),a.push(v)}else{let v=hB(n[i?h:p],l,!i&&r);cS(o,e,p>-1?p:h,v)}!i&&r&&g&&n[h].componentProviders++}}}function cS(e,t,n,r){let i=d6(t),o=Xce(t);if(i||o){let c=(o?$i(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function hB(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function lS(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function $0e(e,t,n,r){return dE(this.multi,[])}function B0e(e,t,n,r){let i=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,s=W4(n,n[Ke],this.providerFactory.index,r);o=s.slice(0,a),dE(i,o);for(let c=a;c<s.length;c++)o.push(s[c])}else o=[],dE(i,o);return o}function dE(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function U0e(e,t,n,r,i){let o=new G4(e,n,W);return o.multi=[],o.index=t,o.componentProviders=0,hB(o,i,r&&!n),o}function c3(e,t=[]){return n=>{n.providersResolver=(r,i)=>P0e(r,i?i(e):e,t)}}var j0e=(()=>{let t=class t{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=OP(!1,r.type),o=i.length>0?v9([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=ue({token:t,providedIn:"environment",factory:()=>new t(ge(ji))});let e=t;return e})();function Ce(e){X8("NgStandalone"),e.getStandaloneInjector=t=>t.get(j0e).getOrCreateStandaloneInjector(e)}function l3(e,t,n){let r=ME()+e,i=st();return i[r]===za?sB(i,r,n?t.call(n):t()):n0e(i,r)}function mB(e,t,n,r){return gB(st(),ME(),e,t,n,r)}function q0e(e,t){let n=e[t];return n===za?void 0:n}function gB(e,t,n,r,i,o){let a=t+n;return Ma(e,a,i)?sB(e,a+1,o?r.call(o,i):r(i)):q0e(e,a+1)}function mi(e,t){let n=Xn(),r,i=e+Ui;n.firstCreatePass?(r=G0e(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=q4(r.type,!0)),a,s=x1(W);try{let c=Rm(!1),l=o();return Rm(c),R0e(n,st(),i,l),l}finally{x1(s)}}function G0e(e,t){if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(e===r.name)return r}}function gi(e,t,n){let r=e+Ui,i=st(),o=uP(i,r);return W0e(i,r)?gB(i,ME(),t,o.transform,n,o):o.transform(n)}function W0e(e,t){return e[Ke].data[t].pure}function Fs(e,t){return m9(e,t)}var y9=(()=>{let t=class t{log(r){console.log(r)}warn(r){console.warn(r)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();var aD=new Ae(""),Z8=new Ae(""),x9=(()=>{let t=class t{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,sD||(Y0e(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ot.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==a),r()},i)),this._callbacks.push({doneCb:r,timeoutId:a,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};t.\u0275fac=function(i){return new(i||t)(ge(Ot),ge(C9),ge(Z8))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),C9=(()=>{let t=class t{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return sD?.findTestabilityInTree(this,r,i)??null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();function Y0e(e){sD=e}var sD;function u3(e){return!!e&&typeof e.then=="function"}function cD(e){return!!e&&typeof e.subscribe=="function"}var b9=new Ae(""),vB=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=ce(b9,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let a=o();if(u3(a))r.push(a);else if(cD(a)){let s=new Promise((c,l)=>{a.subscribe({complete:c,error:l})});r.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),M9=new Ae("");function X0e(){FR(()=>{throw new Ee(600,!1)})}function Q0e(e){return e.isBoundToModule}function K0e(e,t,n){try{let r=n();return u3(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var tl=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ce(i$),this.afterRenderEffectManager=ce(nD),this.componentTypes=[],this.components=[],this.isStable=ce(J4).hasPendingTasks.pipe(et(r=>!r)),this._injector=ce(ji)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Um;if(!this._injector.get(vB).done){let p=!o&&rP(r),h=!1;throw new Ee(405,h)}let s;o?s=r:s=this._injector.get(g9).resolveComponentFactory(r),this.componentTypes.push(s.componentType);let c=Q0e(s)?void 0:this._injector.get(o3),l=i||s.selector,u=s.create(_s.NULL,[],l,c),f=u.location.nativeElement,d=u.injector.get(aD,null);return d?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),uS(this.components,u),d?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new Ee(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===Q$)throw new Ee(103,!1);let o=r===0;for(let{_lView:a,notifyErrorHandler:s}of this._views)!o&&!fS(a)||this.detectChangesInView(a,s,o);if(r++,i.executeInternalCallbacks(),!this._views.some(({_lView:a})=>fS(a))&&(i.execute(),!this._views.some(({_lView:a})=>fS(a))))break}}detectChangesInView(r,i,o){let a;o?(a=0,r[$e]|=1024):r[$e]&64?a=0:a=1,K$(r,i,a)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;uS(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(M9,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>uS(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Ee(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function uS(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function fS(e){return xE(e)}var pE=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},w9=(()=>{let t=class t{compileModuleSync(r){return new cE(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=iP(r),a=x$(o.declarations).reduce((s,c)=>{let l=n3(c);return l&&s.push(new p6(l)),s},[]);return new pE(i,a)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Z0e=(()=>{let t=class t{constructor(){this.zone=ce(Ot),this.applicationRef=ce(tl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function J0e(e){return[{provide:Ot,useFactory:e},{provide:f6,multi:!0,useFactory:()=>{let t=ce(Z0e,{optional:!0});return()=>t.initialize()}},{provide:f6,multi:!0,useFactory:()=>{let t=ce(r6e);return()=>{t.initialize()}}},{provide:i$,useFactory:e6e}]}function e6e(){let e=ce(Ot),t=ce(ba);return n=>e.runOutsideAngular(()=>t.handleError(n))}function t6e(e){let t=J0e(()=>new Ot(n6e(e)));return W8([[],t])}function n6e(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var r6e=(()=>{let t=class t{constructor(){this.subscription=new ar,this.initialized=!1,this.zone=ce(Ot),this.pendingTasks=ce(J4)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ot.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ot.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function i6e(){return typeof $localize<"u"&&$localize.locale||Xm}var S9=new Ae("",{providedIn:"root",factory:()=>ce(S9,at.Optional|at.SkipSelf)||i6e()});var yB=new Ae("");var Am=null;function o6e(e=[],t){return _s.create({name:t,providers:[{provide:s9,useValue:"platform"},{provide:yB,useValue:new Set([()=>Am=null])},...e]})}function a6e(e=[]){if(Am)return Am;let t=o6e(e);return Am=t,X0e(),s6e(t),t}function s6e(e){e.get(zE,null)?.forEach(n=>n())}var xB=(()=>{let t=class t{constructor(r){}};t.\u0275fac=function(i){return new(i||t)(ge(tl))},t.\u0275mod=qi({type:t}),t.\u0275inj=Gi({});let e=t;return e})();function CB(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=a6e(r),o=[t6e(),...n||[]],s=new Wm({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=s.get(Ot);return c.run(()=>{s.resolveInjectorInitializers();let l=s.get(ba,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:p=>{l.handleError(p)}})});let f=()=>s.destroy(),d=i.get(yB);return d.add(f),s.onDestroy(()=>{u.unsubscribe(),d.delete(f)}),K0e(l,c,()=>{let p=s.get(vB);return p.runInitializers(),p.donePromise.then(()=>{let h=s.get(S9,Xm);T0e(h||Xm);let m=s.get(tl);return t!==void 0&&m.bootstrap(t),m})})})}catch(t){return Promise.reject(t)}}function nl(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function bB(e){let t=n3(e);if(!t)return null;let n=new p6(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var HB=null;function Ha(){return HB}function LB(e){HB??=e}var _9=class{};var Gr=new Ae(""),CD=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(c6e),providedIn:"platform"});let e=t;return e})(),AB=new Ae(""),c6e=(()=>{let t=class t extends CD{constructor(){super(),this._doc=ce(Gr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ha().getBaseHref(this._doc)}onPopState(r){let i=Ha().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Ha().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>new t,providedIn:"platform"});let e=t;return e})();function bD(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function MB(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function Os(e){return e&&e[0]!=="?"?"?"+e:e}var Bs=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(MD),providedIn:"root"});let e=t;return e})(),VB=new Ae(""),MD=(()=>{let t=class t extends Bs{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ce(Gr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return bD(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Os(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,a){let s=this.prepareExternalUrl(o+Os(a));this._platformLocation.pushState(r,i,s)}replaceState(r,i,o,a){let s=this.prepareExternalUrl(o+Os(a));this._platformLocation.replaceState(r,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(i){return new(i||t)(ge(CD),ge(VB,8))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),NB=(()=>{let t=class t extends Bs{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=bD(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,a){let s=this.prepareExternalUrl(o+Os(a));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(r,i,s)}replaceState(r,i,o,a){let s=this.prepareExternalUrl(o+Os(a));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(i){return new(i||t)(ge(CD),ge(VB,8))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),b6=(()=>{let t=class t{constructor(r){this._subject=new bn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=f6e(MB(wB(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Os(i))}normalize(r){return t.stripTrailingSlash(u6e(this._basePath,wB(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Os(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Os(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};t.normalizeQueryParams=Os,t.joinWithSlash=bD,t.stripTrailingSlash=MB,t.\u0275fac=function(i){return new(i||t)(ge(Bs))},t.\u0275prov=ue({token:t,factory:()=>l6e(),providedIn:"root"});let e=t;return e})();function l6e(){return new b6(ge(Bs))}function u6e(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function wB(e){return e.replace(/\/index.html$/,"")}function f6e(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var Wi=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}(Wi||{}),Xt=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}(Xt||{}),J1=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}(J1||{}),Ps=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e.Infinity=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}(Ps||{});function d6e(e){return Lo(e)[$n.LocaleId]}function p6e(e,t,n){let r=Lo(e),i=[r[$n.DayPeriodsFormat],r[$n.DayPeriodsStandalone]],o=Ao(i,t);return Ao(o,n)}function h6e(e,t,n){let r=Lo(e),i=[r[$n.DaysFormat],r[$n.DaysStandalone]],o=Ao(i,t);return Ao(o,n)}function m6e(e,t,n){let r=Lo(e),i=[r[$n.MonthsFormat],r[$n.MonthsStandalone]],o=Ao(i,t);return Ao(o,n)}function g6e(e,t){let r=Lo(e)[$n.Eras];return Ao(r,t)}function E9(e,t){let n=Lo(e);return Ao(n[$n.DateFormat],t)}function D9(e,t){let n=Lo(e);return Ao(n[$n.TimeFormat],t)}function z9(e,t){let r=Lo(e)[$n.DateTimeFormat];return Ao(r,t)}function T9(e,t){let n=Lo(e),r=n[$n.NumberSymbols][t];if(typeof r>"u"){if(t===Ps.CurrencyDecimal)return n[$n.NumberSymbols][Ps.Decimal];if(t===Ps.CurrencyGroup)return n[$n.NumberSymbols][Ps.Group]}return r}function _B(e){if(!e[$n.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[$n.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function v6e(e){let t=Lo(e);return _B(t),(t[$n.ExtraData][2]||[]).map(r=>typeof r=="string"?lD(r):[lD(r[0]),lD(r[1])])}function y6e(e,t,n){let r=Lo(e);_B(r);let i=[r[$n.ExtraData][0],r[$n.ExtraData][1]],o=Ao(i,t)||[];return Ao(o,n)||[]}function Ao(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new Error("Locale data API: locale data undefined")}function lD(e){let[t,n]=e.split(":");return{hours:+t,minutes:+n}}var x6e=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,H9={},C6e=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,$s=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}($s||{}),Vt=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}(Vt||{}),At=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}(At||{});function b6e(e,t,n,r){let i=A6e(e);t=Rs(n,t)||t;let a=[],s;for(;t;)if(s=C6e.exec(t),s){a=a.concat(s.slice(1));let u=a.pop();if(!u)break;t=u}else{a.push(t);break}let c=i.getTimezoneOffset();r&&(c=TB(r,c),i=L6e(i,r,!0));let l="";return a.forEach(u=>{let f=z6e(u);l+=f?f(i,n,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function k9(e,t,n){let r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function Rs(e,t){let n=d6e(e);if(H9[n]??={},H9[n][t])return H9[n][t];let r="";switch(t){case"shortDate":r=E9(e,J1.Short);break;case"mediumDate":r=E9(e,J1.Medium);break;case"longDate":r=E9(e,J1.Long);break;case"fullDate":r=E9(e,J1.Full);break;case"shortTime":r=D9(e,J1.Short);break;case"mediumTime":r=D9(e,J1.Medium);break;case"longTime":r=D9(e,J1.Long);break;case"fullTime":r=D9(e,J1.Full);break;case"short":let i=Rs(e,"shortTime"),o=Rs(e,"shortDate");r=L9(z9(e,J1.Short),[i,o]);break;case"medium":let a=Rs(e,"mediumTime"),s=Rs(e,"mediumDate");r=L9(z9(e,J1.Medium),[a,s]);break;case"long":let c=Rs(e,"longTime"),l=Rs(e,"longDate");r=L9(z9(e,J1.Long),[c,l]);break;case"full":let u=Rs(e,"fullTime"),f=Rs(e,"fullDate");r=L9(z9(e,J1.Full),[u,f]);break}return r&&(H9[n][t]=r),r}function L9(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,r){return t!=null&&r in t?t[r]:n})),e}function C2(e,t,n="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=-e+1:(e=-e,o=n));let a=String(e);for(;a.length<t;)a="0"+a;return r&&(a=a.slice(a.length-t)),o+a}function M6e(e,t){return C2(e,3).substring(0,t)}function Qn(e,t,n=0,r=!1,i=!1){return function(o,a){let s=w6e(e,o);if((n>0||s>-n)&&(s+=n),e===Vt.Hours)s===0&&n===-12&&(s=12);else if(e===Vt.FractionalSeconds)return M6e(s,t);let c=T9(a,Ps.MinusSign);return C2(s,t,c,r,i)}}function w6e(e,t){switch(e){case Vt.FullYear:return t.getFullYear();case Vt.Month:return t.getMonth();case Vt.Date:return t.getDate();case Vt.Hours:return t.getHours();case Vt.Minutes:return t.getMinutes();case Vt.Seconds:return t.getSeconds();case Vt.FractionalSeconds:return t.getMilliseconds();case Vt.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}function nn(e,t,n=Wi.Format,r=!1){return function(i,o){return S6e(i,o,e,t,n,r)}}function S6e(e,t,n,r,i,o){switch(n){case At.Months:return m6e(t,i,r)[e.getMonth()];case At.Days:return h6e(t,i,r)[e.getDay()];case At.DayPeriods:let a=e.getHours(),s=e.getMinutes();if(o){let l=v6e(t),u=y6e(t,i,r),f=l.findIndex(d=>{if(Array.isArray(d)){let[p,h]=d,m=a>=p.hours&&s>=p.minutes,g=a<h.hours||a===h.hours&&s<h.minutes;if(p.hours<h.hours){if(m&&g)return!0}else if(m||g)return!0}else if(d.hours===a&&d.minutes===s)return!0;return!1});if(f!==-1)return u[f]}return p6e(t,i,r)[a<12?0:1];case At.Eras:return g6e(t,r)[e.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function A9(e){return function(t,n,r){let i=-1*r,o=T9(n,Ps.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case $s.Short:return(i>=0?"+":"")+C2(a,2,o)+C2(Math.abs(i%60),2,o);case $s.ShortGMT:return"GMT"+(i>=0?"+":"")+C2(a,1,o);case $s.Long:return"GMT"+(i>=0?"+":"")+C2(a,2,o)+":"+C2(Math.abs(i%60),2,o);case $s.Extended:return r===0?"Z":(i>=0?"+":"")+C2(a,2,o)+":"+C2(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${e}"`)}}}var E6e=0,N9=4;function D6e(e){let t=k9(e,E6e,1).getDay();return k9(e,0,1+(t<=N9?N9:N9+7)-t)}function kB(e){let t=e.getDay(),n=t===0?-3:N9-t;return k9(e.getFullYear(),e.getMonth(),e.getDate()+n)}function uD(e,t=!1){return function(n,r){let i;if(t){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,a=n.getDate();i=1+Math.floor((a+o)/7)}else{let o=kB(n),a=D6e(o.getFullYear()),s=o.getTime()-a.getTime();i=1+Math.round(s/6048e5)}return C2(i,e,T9(r,Ps.MinusSign))}}function V9(e,t=!1){return function(n,r){let o=kB(n).getFullYear();return C2(o,e,T9(r,Ps.MinusSign),t)}}var fD={};function z6e(e){if(fD[e])return fD[e];let t;switch(e){case"G":case"GG":case"GGG":t=nn(At.Eras,Xt.Abbreviated);break;case"GGGG":t=nn(At.Eras,Xt.Wide);break;case"GGGGG":t=nn(At.Eras,Xt.Narrow);break;case"y":t=Qn(Vt.FullYear,1,0,!1,!0);break;case"yy":t=Qn(Vt.FullYear,2,0,!0,!0);break;case"yyy":t=Qn(Vt.FullYear,3,0,!1,!0);break;case"yyyy":t=Qn(Vt.FullYear,4,0,!1,!0);break;case"Y":t=V9(1);break;case"YY":t=V9(2,!0);break;case"YYY":t=V9(3);break;case"YYYY":t=V9(4);break;case"M":case"L":t=Qn(Vt.Month,1,1);break;case"MM":case"LL":t=Qn(Vt.Month,2,1);break;case"MMM":t=nn(At.Months,Xt.Abbreviated);break;case"MMMM":t=nn(At.Months,Xt.Wide);break;case"MMMMM":t=nn(At.Months,Xt.Narrow);break;case"LLL":t=nn(At.Months,Xt.Abbreviated,Wi.Standalone);break;case"LLLL":t=nn(At.Months,Xt.Wide,Wi.Standalone);break;case"LLLLL":t=nn(At.Months,Xt.Narrow,Wi.Standalone);break;case"w":t=uD(1);break;case"ww":t=uD(2);break;case"W":t=uD(1,!0);break;case"d":t=Qn(Vt.Date,1);break;case"dd":t=Qn(Vt.Date,2);break;case"c":case"cc":t=Qn(Vt.Day,1);break;case"ccc":t=nn(At.Days,Xt.Abbreviated,Wi.Standalone);break;case"cccc":t=nn(At.Days,Xt.Wide,Wi.Standalone);break;case"ccccc":t=nn(At.Days,Xt.Narrow,Wi.Standalone);break;case"cccccc":t=nn(At.Days,Xt.Short,Wi.Standalone);break;case"E":case"EE":case"EEE":t=nn(At.Days,Xt.Abbreviated);break;case"EEEE":t=nn(At.Days,Xt.Wide);break;case"EEEEE":t=nn(At.Days,Xt.Narrow);break;case"EEEEEE":t=nn(At.Days,Xt.Short);break;case"a":case"aa":case"aaa":t=nn(At.DayPeriods,Xt.Abbreviated);break;case"aaaa":t=nn(At.DayPeriods,Xt.Wide);break;case"aaaaa":t=nn(At.DayPeriods,Xt.Narrow);break;case"b":case"bb":case"bbb":t=nn(At.DayPeriods,Xt.Abbreviated,Wi.Standalone,!0);break;case"bbbb":t=nn(At.DayPeriods,Xt.Wide,Wi.Standalone,!0);break;case"bbbbb":t=nn(At.DayPeriods,Xt.Narrow,Wi.Standalone,!0);break;case"B":case"BB":case"BBB":t=nn(At.DayPeriods,Xt.Abbreviated,Wi.Format,!0);break;case"BBBB":t=nn(At.DayPeriods,Xt.Wide,Wi.Format,!0);break;case"BBBBB":t=nn(At.DayPeriods,Xt.Narrow,Wi.Format,!0);break;case"h":t=Qn(Vt.Hours,1,-12);break;case"hh":t=Qn(Vt.Hours,2,-12);break;case"H":t=Qn(Vt.Hours,1);break;case"HH":t=Qn(Vt.Hours,2);break;case"m":t=Qn(Vt.Minutes,1);break;case"mm":t=Qn(Vt.Minutes,2);break;case"s":t=Qn(Vt.Seconds,1);break;case"ss":t=Qn(Vt.Seconds,2);break;case"S":t=Qn(Vt.FractionalSeconds,1);break;case"SS":t=Qn(Vt.FractionalSeconds,2);break;case"SSS":t=Qn(Vt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=A9($s.Short);break;case"ZZZZZ":t=A9($s.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=A9($s.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=A9($s.Long);break;default:return null}return fD[e]=t,t}function TB(e,t){e=e.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function H6e(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function L6e(e,t,n){let r=n?-1:1,i=e.getTimezoneOffset(),o=TB(t,i);return H6e(e,r*(o-i))}function A6e(e){if(SB(e))return e;if(typeof e=="number"&&!isNaN(e))return new Date(e);if(typeof e=="string"){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){let[i,o=1,a=1]=e.split("-").map(s=>+s);return k9(i,o-1,a)}let n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let r;if(r=e.match(x6e))return V6e(r)}let t=new Date(e);if(!SB(t))throw new Error(`Unable to convert "${e}" into a date`);return t}function V6e(e){let t=new Date(0),n=0,r=0,i=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));let a=Number(e[4]||0)-n,s=Number(e[5]||0)-r,c=Number(e[6]||0),l=Math.floor(parseFloat("0."+(e[7]||0))*1e3);return o.call(t,a,s,c,l),t}function SB(e){return e instanceof Date&&!isNaN(e.valueOf())}function I9(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var dD=/\s+/,EB=[],IB=(()=>{let t=class t{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=EB,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(dD):EB}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(dD):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(dD).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};t.\u0275fac=function(i){return new(i||t)(W(qr),W(K1))},t.\u0275dir=Tt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[Ur.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let e=t;return e})();var pD=class{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},vi=(()=>{let t=class t{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,a,s)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new pD(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(a===null?void 0:a);else if(a!==null){let c=i.get(a);i.move(c,s),DB(c,o)}});for(let o=0,a=i.length;o<a;o++){let c=i.get(o).context;c.index=o,c.count=a,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let a=i.get(o.currentIndex);DB(a,o)})}static ngTemplateContextGuard(r,i){return!0}};t.\u0275fac=function(i){return new(i||t)(W(s3),W(X4),W(JE))},t.\u0275dir=Tt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let e=t;return e})();function DB(e,t){e.context.$implicit=t.item}var w1=(()=>{let t=class t{constructor(r,i){this._viewContainer=r,this._context=new hD,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){zB("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){zB("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};t.\u0275fac=function(i){return new(i||t)(W(s3),W(X4))},t.\u0275dir=Tt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let e=t;return e})(),hD=class{constructor(){this.$implicit=null,this.ngIf=null}};function zB(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${Bi(t)}'.`)}function FB(e,t){return new Ee(2100,!1)}var mD=class{createSubscription(t,n){return ZE(()=>t.subscribe({next:n,error:r=>{throw r}}))}dispose(t){ZE(()=>t.unsubscribe())}},gD=class{createSubscription(t,n){return t.then(n,r=>{throw r})}dispose(t){}},N6e=new gD,_6e=new mD,F9=(()=>{let t=class t{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(u3(r))return N6e;if(cD(r))return _6e;throw FB(t,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};t.\u0275fac=function(i){return new(i||t)(W(Is,16))},t.\u0275pipe=hE({name:"async",type:t,pure:!1,standalone:!0});let e=t;return e})();var k6e="mediumDate",T6e=new Ae(""),I6e=new Ae(""),Vo=(()=>{let t=class t{constructor(r,i,o){this.locale=r,this.defaultTimezone=i,this.defaultOptions=o}transform(r,i,o,a){if(r==null||r===""||r!==r)return null;try{let s=i??this.defaultOptions?.dateFormat??k6e,c=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return b6e(r,s,a||this.locale,c)}catch(s){throw FB(t,s.message)}}};t.\u0275fac=function(i){return new(i||t)(W(S9,16),W(T6e,24),W(I6e,24))},t.\u0275pipe=hE({name:"date",type:t,pure:!0,standalone:!0});let e=t;return e})();var R9=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=qi({type:t}),t.\u0275inj=Gi({});let e=t;return e})(),wD="browser",F6e="server";function R6e(e){return e===wD}function SD(e){return e===F6e}var RB=(()=>{let t=class t{};t.\u0275prov=ue({token:t,providedIn:"root",factory:()=>R6e(ce(wa))?new vD(ce(Gr),window):new yD});let e=t;return e})(),vD=class{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let n=O6e(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function O6e(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let a=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(a)return a}i=r.nextNode()}}return null}var yD=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},C6=class{};var e5=class{},P9=class{},rl=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),a=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let a=this.headers.get(n);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}break}}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var DD=class{encodeKey(t){return PB(t)}encodeValue(t){return PB(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function B6e(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[a,s]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=n.get(a)||[];c.push(s),n.set(a,c)}),n}var U6e=/%(\d[a-f0-9])/gi,j6e={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function PB(e){return encodeURIComponent(e).replace(U6e,(t,n)=>j6e[n]??t)}function O9(e){return`${e}`}var f3=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new DD,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=B6e(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],i=Array.isArray(r)?r.map(O9):[O9(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(O9(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(O9(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var zD=class{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function q6e(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function $B(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function BB(e){return typeof Blob<"u"&&e instanceof Blob}function UB(e){return typeof FormData<"u"&&e instanceof FormData}function G6e(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var J8=class e{constructor(t,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(q6e(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new rl,this.context??=new zD,!this.params)this.params=new f3,this.urlWithParams=n;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=n;else{let s=n.indexOf("?"),c=s===-1?"?":s<n.length-1?"&":"";this.urlWithParams=n+c+a}}}serializeBody(){return this.body===null?null:$B(this.body)||BB(this.body)||UB(this.body)||G6e(this.body)||typeof this.body=="string"?this.body:this.body instanceof f3?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||UB(this.body)?null:BB(this.body)?this.body.type||null:$B(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof f3?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.body!==void 0?t.body:this.body,a=t.withCredentials!==void 0?t.withCredentials:this.withCredentials,s=t.reportProgress!==void 0?t.reportProgress:this.reportProgress,c=t.headers||this.headers,l=t.params||this.params,u=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((f,d)=>f.set(d,t.setHeaders[d]),c)),t.setParams&&(l=Object.keys(t.setParams).reduce((f,d)=>f.set(d,t.setParams[d]),l)),new e(n,r,o,{params:l,headers:c,context:u,reportProgress:s,responseType:i,withCredentials:a})}},M6=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(M6||{}),t5=class{constructor(t,n=B9.Ok,r="OK"){this.headers=t.headers||new rl,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},HD=class e extends t5{constructor(t={}){super(t),this.type=M6.ResponseHeader}clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},w6=class e extends t5{constructor(t={}){super(t),this.type=M6.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},$9=class extends t5{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},B9=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(B9||{});function ED(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var Us=(()=>{let t=class t{constructor(r){this.handler=r}request(r,i,o={}){let a;if(r instanceof J8)a=r;else{let l;o.headers instanceof rl?l=o.headers:l=new rl(o.headers);let u;o.params&&(o.params instanceof f3?u=o.params:u=new f3({fromObject:o.params})),a=new J8(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let s=Te(a).pipe(Ds(l=>this.handler.handle(l)));if(r instanceof J8||o.observe==="events")return s;let c=s.pipe(v1(l=>l instanceof w6));switch(o.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return c.pipe(et(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(et(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(et(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(et(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new f3().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,ED(o,i))}post(r,i,o={}){return this.request("POST",r,ED(o,i))}put(r,i,o={}){return this.request("PUT",r,ED(o,i))}};t.\u0275fac=function(i){return new(i||t)(ge(e5))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function WB(e,t){return t(e)}function W6e(e,t){return(n,r)=>t.intercept(n,{handle:i=>e(i,r)})}function Y6e(e,t,n){return(r,i)=>Ea(n,()=>t(r,o=>e(o,i)))}var LD=new Ae(""),AD=new Ae(""),X6e=new Ae(""),Q6e=new Ae("");function K6e(){let e=null;return(t,n)=>{e===null&&(e=(ce(LD,{optional:!0})??[]).reduceRight(W6e,WB));let r=ce(J4),i=r.add();return e(t,n).pipe(Jc(()=>r.remove(i)))}}var jB=(()=>{let t=class t extends e5{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=ce(J4);let o=ce(Q6e,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(AD),...this.injector.get(X6e,[])]));this.chain=o.reduceRight((a,s)=>Y6e(a,s,this.injector),WB)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(Jc(()=>this.pendingTasks.remove(i)))}};t.\u0275fac=function(i){return new(i||t)(ge(P9),ge(ji))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();var Z6e=/^\)\]\}',?\n/;function J6e(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var qB=(()=>{let t=class t{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new Ee(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?en(i.\u0275loadImpl()):Te(null)).pipe(y1(()=>new St(a=>{let s=i.build();if(s.open(r.method,r.urlWithParams),r.withCredentials&&(s.withCredentials=!0),r.headers.forEach((g,v)=>s.setRequestHeader(g,v.join(","))),r.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let g=r.detectContentTypeHeader();g!==null&&s.setRequestHeader("Content-Type",g)}if(r.responseType){let g=r.responseType.toLowerCase();s.responseType=g!=="json"?g:"text"}let c=r.serializeBody(),l=null,u=()=>{if(l!==null)return l;let g=s.statusText||"OK",v=new rl(s.getAllResponseHeaders()),y=J6e(s)||r.url;return l=new HD({headers:v,status:s.status,statusText:g,url:y}),l},f=()=>{let{headers:g,status:v,statusText:y,url:C}=u(),b=null;v!==B9.NoContent&&(b=typeof s.response>"u"?s.responseText:s.response),v===0&&(v=b?B9.Ok:0);let M=v>=200&&v<300;if(r.responseType==="json"&&typeof b=="string"){let S=b;b=b.replace(Z6e,"");try{b=b!==""?JSON.parse(b):null}catch(w){b=S,M&&(M=!1,b={error:w,text:b})}}M?(a.next(new w6({body:b,headers:g,status:v,statusText:y,url:C||void 0})),a.complete()):a.error(new $9({error:b,headers:g,status:v,statusText:y,url:C||void 0}))},d=g=>{let{url:v}=u(),y=new $9({error:g,status:s.status||0,statusText:s.statusText||"Unknown Error",url:v||void 0});a.error(y)},p=!1,h=g=>{p||(a.next(u()),p=!0);let v={type:M6.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),r.responseType==="text"&&s.responseText&&(v.partialText=s.responseText),a.next(v)},m=g=>{let v={type:M6.UploadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),a.next(v)};return s.addEventListener("load",f),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),r.reportProgress&&(s.addEventListener("progress",h),c!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(c),a.next({type:M6.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",f),s.removeEventListener("timeout",d),r.reportProgress&&(s.removeEventListener("progress",h),c!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}};t.\u0275fac=function(i){return new(i||t)(ge(C6))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),YB=new Ae(""),eue="XSRF-TOKEN",tue=new Ae("",{providedIn:"root",factory:()=>eue}),nue="X-XSRF-TOKEN",rue=new Ae("",{providedIn:"root",factory:()=>nue}),U9=class{},iue=(()=>{let t=class t{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=I9(r,this.cookieName),this.lastCookieString=r),this.lastToken}};t.\u0275fac=function(i){return new(i||t)(ge(Gr),ge(wa),ge(tue))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function oue(e,t){let n=e.url.toLowerCase();if(!ce(YB)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let r=ce(U9).getToken(),i=ce(rue);return r!=null&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),t(e)}var XB=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(XB||{});function aue(e,t){return{\u0275kind:e,\u0275providers:t}}function QB(...e){let t=[Us,qB,jB,{provide:e5,useExisting:jB},{provide:P9,useExisting:qB},{provide:AD,useValue:oue,multi:!0},{provide:YB,useValue:!0},{provide:U9,useClass:iue}];for(let n of e)t.push(...n.\u0275providers);return W8(t)}var GB=new Ae("");function KB(){return aue(XB.LegacyInterceptors,[{provide:GB,useFactory:K6e},{provide:AD,useExisting:GB,multi:!0}])}var _D=class extends _9{constructor(){super(...arguments),this.supportsDOMEvents=!0}},kD=class e extends _D{static makeCurrent(){LB(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=sue();return n==null?null:cue(n)}resetBaseElement(){n5=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return I9(document.cookie,t)}},n5=null;function sue(){return n5=n5||document.querySelector("base"),n5?n5.getAttribute("href"):null}function cue(e){return new URL(e,document.baseURI).pathname}var TD=class{addToWindow(t){Yn.getAngularTestability=(r,i=!0)=>{let o=t.findTestabilityInTree(r,i);if(o==null)throw new Ee(5103,!1);return o},Yn.getAllAngularTestabilities=()=>t.getAllTestabilities(),Yn.getAllAngularRootElements=()=>t.getAllRootElements();let n=r=>{let i=Yn.getAllAngularTestabilities(),o=i.length,a=function(){o--,o==0&&r()};i.forEach(s=>{s.whenStable(a)})};Yn.frameworkStabilizers||(Yn.frameworkStabilizers=[]),Yn.frameworkStabilizers.push(n)}findTestabilityInTree(t,n,r){if(n==null)return null;let i=t.getTestability(n);return i??(r?Ha().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},lue=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),ID=new Ae(""),tU=(()=>{let t=class t{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(a=>a.supports(r)),!i)throw new Ee(5101,!1);return this._eventNameToPlugin.set(r,i),i}};t.\u0275fac=function(i){return new(i||t)(ge(ID),ge(Ot))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),q9=class{constructor(t){this._doc=t}},VD="ng-app-id",nU=(()=>{let t=class t{constructor(r,i,o,a={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=SD(a),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${VD}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let a=o.get(r);return a.usage+=i,a.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,a=o?.get(i);if(a?.parentNode===r)return o.delete(i),a.removeAttribute(VD),a;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(VD,this.appId),r.appendChild(s),s}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),a=this.styleRef,s=a.get(i)?.elements;s?s.push(o):a.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};t.\u0275fac=function(i){return new(i||t)(ge(Gr),ge(i9),ge(HE,8),ge(wa))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),ND={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},RD=/%COMP%/g,rU="%COMP%",uue=`_nghost-${rU}`,fue=`_ngcontent-${rU}`,due=!0,pue=new Ae("",{providedIn:"root",factory:()=>due});function hue(e){return fue.replace(RD,e)}function mue(e){return uue.replace(RD,e)}function iU(e,t){return t.map(n=>n.replace(RD,e))}var ZB=(()=>{let t=class t{constructor(r,i,o,a,s,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=a,this.doc=s,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=SD(c),this.defaultRenderer=new r5(r,s,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===xa.ShadowDom&&(i=k(x({},i),{encapsulation:xa.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof G9?o.applyToHost(r):o instanceof i5&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,a=o.get(i.id);if(!a){let s=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case xa.Emulated:a=new G9(l,u,i,this.appId,f,s,c,d);break;case xa.ShadowDom:return new FD(l,u,r,i,s,c,this.nonce,d);default:a=new i5(l,u,i,f,s,c,d);break}o.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(i){return new(i||t)(ge(tU),ge(nU),ge(i9),ge(pue),ge(Gr),ge(wa),ge(Ot),ge(HE))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),r5=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(ND[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(JB(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(JB(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new Ee(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=ND[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=ND[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(As.DashCase|As.Important)?t.style.setProperty(n,r,i&As.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&As.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=Ha().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function JB(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var FD=class extends r5{constructor(t,n,r,i,o,a,s,c){super(t,o,a,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=iU(i.id,i.styles);for(let u of l){let f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=u,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},i5=class extends r5{constructor(t,n,r,i,o,a,s,c){super(t,o,a,s),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?iU(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},G9=class extends i5{constructor(t,n,r,i,o,a,s,c){let l=i+"-"+r.id;super(t,n,r,o,a,s,c,l),this.contentAttr=hue(l),this.hostAttr=mue(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},gue=(()=>{let t=class t extends q9{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};t.\u0275fac=function(i){return new(i||t)(ge(Gr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),eU=["alt","control","meta","shift"],vue={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yue={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},xue=(()=>{let t=class t extends q9{constructor(r){super(r)}supports(r){return t.parseEventName(r)!=null}addEventListener(r,i,o){let a=t.parseEventName(i),s=t.eventCallback(a.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ha().onAndCancel(r,a.domEventName,s))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let a=t._normalizeKey(i.pop()),s="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),s="code."),eU.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=a,i.length!=0||a.length===0)return null;let l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(r,i){let o=vue[r.key]||r.key,a="";return i.indexOf("code.")>-1&&(o=r.code,a="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),eU.forEach(s=>{if(s!==o){let c=yue[s];c(r)&&(a+=s+".")}}),a+=o,a===i)}static eventCallback(r,i,o){return a=>{t.matchEventFullKeyCode(a,r)&&o.runGuarded(()=>i(a))}}static _normalizeKey(r){return r==="esc"?"escape":r}};t.\u0275fac=function(i){return new(i||t)(ge(Gr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function oU(e,t){return CB(x({rootComponent:e},Cue(t)))}function Cue(e){return{appProviders:[...aU,...e?.providers??[]],platformProviders:Sue}}function bue(){kD.makeCurrent()}function Mue(){return new ba}function wue(){return DP(document),document}var Sue=[{provide:wa,useValue:wD},{provide:zE,useValue:bue,multi:!0},{provide:Gr,useFactory:wue,deps:[]}];var Eue=new Ae(""),Due=[{provide:Z8,useClass:TD,deps:[]},{provide:aD,useClass:x9,deps:[Ot,C9,Z8]},{provide:x9,useClass:x9,deps:[Ot,C9,Z8]}],aU=[{provide:s9,useValue:"root"},{provide:ba,useFactory:Mue,deps:[]},{provide:ID,useClass:gue,multi:!0,deps:[Gr,Ot,wa]},{provide:ID,useClass:xue,multi:!0,deps:[Gr]},ZB,nU,tU,{provide:$8,useExisting:ZB},{provide:C6,useClass:lue,deps:[]},[]],sU=(()=>{let t=class t{constructor(r){}static withServerTransition(r){return{ngModule:t,providers:[{provide:i9,useValue:r.appId}]}}};t.\u0275fac=function(i){return new(i||t)(ge(Eue,12))},t.\u0275mod=qi({type:t}),t.\u0275inj=Gi({providers:[...aU,...Due],imports:[R9,xB]});let e=t;return e})();var cU=(()=>{let t=class t{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};t.\u0275fac=function(i){return new(i||t)(ge(Gr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var OD=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:function(i){let o=null;return i?o=new(i||t):o=ge(zue),o},providedIn:"root"});let e=t;return e})(),zue=(()=>{let t=class t extends OD{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case x2.NONE:return i;case x2.HTML:return ks(i,"HTML")?y2(i):FE(this._doc,String(i)).toString();case x2.STYLE:return ks(i,"Style")?y2(i):i;case x2.SCRIPT:if(ks(i,"Script"))return y2(i);throw new Ee(5200,!1);case x2.URL:return ks(i,"URL")?y2(i):u9(String(i));case x2.RESOURCE_URL:if(ks(i,"ResourceURL"))return y2(i);throw new Ee(5201,!1);default:throw new Ee(5202,!1)}}bypassSecurityTrustHtml(r){return s$(r)}bypassSecurityTrustStyle(r){return c$(r)}bypassSecurityTrustScript(r){return l$(r)}bypassSecurityTrustUrl(r){return u$(r)}bypassSecurityTrustResourceUrl(r){return f$(r)}};t.\u0275fac=function(i){return new(i||t)(ge(Gr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var tt="primary",x5=Symbol("RouteTitle"),jD=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function H6(e){return new jD(e)}function Hue(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],s=e[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Lue(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!La(e[n],t[n]))return!1;return!0}function La(e,t){let n=e?qD(e):void 0,r=t?qD(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!yU(e[i],t[i]))return!1;return!0}function qD(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function yU(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function xU(e){return e.length>0?e[e.length-1]:null}function m3(e){return Bw(e)?e:u3(e)?en(Promise.resolve(e)):Te(e)}var Aue={exact:bU,subset:MU},CU={exact:Vue,subset:Nue,ignored:()=>!0};function uU(e,t,n){return Aue[n.paths](e.root,t.root,n.matrixParams)&&CU[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function Vue(e,t){return La(e,t)}function bU(e,t,n){if(!ol(e.segments,t.segments)||!X9(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!bU(e.children[r],t.children[r],n))return!1;return!0}function Nue(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>yU(e[n],t[n]))}function MU(e,t,n){return wU(e,t,t.segments,n)}function wU(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!ol(i,n)||t.hasChildren()||!X9(i,n,r))}else if(e.segments.length===n.length){if(!ol(e.segments,n)||!X9(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!MU(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!ol(e.segments,i)||!X9(e.segments,i,r)||!e.children[tt]?!1:wU(e.children[tt],t,o,r)}}function X9(e,t,n){return t.every((r,i)=>CU[n](e[i].parameters,r.parameters))}var d3=class{constructor(t=new _t([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=H6(this.queryParams),this._queryParamMap}toString(){return Tue.serialize(this)}},_t=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Q9(this)}},il=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=H6(this.parameters),this._parameterMap}toString(){return EU(this)}};function _ue(e,t){return ol(e,t)&&e.every((n,r)=>La(n.parameters,t[r].parameters))}function ol(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function kue(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===tt&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==tt&&(n=n.concat(t(i,r)))}),n}var C5=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>new f5,providedIn:"root"});let e=t;return e})(),f5=class{parse(t){let n=new WD(t);return new d3(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${o5(t.root,!0)}`,r=Rue(t.queryParams),i=typeof t.fragment=="string"?`#${Iue(t.fragment)}`:"";return`${n}${r}${i}`}},Tue=new f5;function Q9(e){return e.segments.map(t=>EU(t)).join("/")}function o5(e,t){if(!e.hasChildren())return Q9(e);if(t){let n=e.children[tt]?o5(e.children[tt],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==tt&&r.push(`${i}:${o5(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=kue(e,(r,i)=>i===tt?[o5(e.children[tt],!1)]:[`${i}:${o5(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[tt]!=null?`${Q9(e)}/${n[0]}`:`${Q9(e)}/(${n.join("//")})`}}function SU(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function W9(e){return SU(e).replace(/%3B/gi,";")}function Iue(e){return encodeURI(e)}function GD(e){return SU(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function K9(e){return decodeURIComponent(e)}function fU(e){return K9(e.replace(/\+/g,"%20"))}function EU(e){return`${GD(e.path)}${Fue(e.parameters)}`}function Fue(e){return Object.entries(e).map(([t,n])=>`;${GD(t)}=${GD(n)}`).join("")}function Rue(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${W9(n)}=${W9(i)}`).join("&"):`${W9(n)}=${W9(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var Oue=/^[^\/()?;#]+/;function PD(e){let t=e.match(Oue);return t?t[0]:""}var Pue=/^[^\/()?;=#]+/;function $ue(e){let t=e.match(Pue);return t?t[0]:""}var Bue=/^[^=?&#]+/;function Uue(e){let t=e.match(Bue);return t?t[0]:""}var jue=/^[^&#]+/;function que(e){let t=e.match(jue);return t?t[0]:""}var WD=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _t([],{}):new _t([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[tt]=new _t(t,n)),r}parseSegment(){let t=PD(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Ee(4009,!1);return this.capture(t),new il(K9(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=$ue(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=PD(this.remaining);i&&(r=i,this.capture(r))}t[K9(n)]=K9(r)}parseQueryParam(t){let n=Uue(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let a=que(this.remaining);a&&(r=a,this.capture(r))}let i=fU(n),o=fU(r);if(t.hasOwnProperty(i)){let a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=PD(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Ee(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=tt);let a=this.parseChildren();n[o]=Object.keys(a).length===1?a[tt]:new _t([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Ee(4011,!1)}};function DU(e){return e.segments.length>0?new _t([],{[tt]:e}):e}function zU(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=zU(i);if(r===tt&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))t[a]=s;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new _t(e.segments,t);return Gue(n)}function Gue(e){if(e.numberOfChildren===1&&e.children[tt]){let t=e.children[tt];return new _t(e.segments.concat(t.segments),t.children)}return e}function L6(e){return e instanceof d3}function Wue(e,t,n=null,r=null){let i=HU(e);return LU(i,t,n,r)}function HU(e){let t;function n(o){let a={};for(let c of o.children){let l=n(c);a[c.outlet]=l}let s=new _t(o.url,a);return o===e&&(t=s),s}let r=n(e.root),i=DU(r);return t??i}function LU(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return $D(i,i,i,n,r);let o=Yue(t);if(o.toRoot())return $D(i,i,new _t([],{}),n,r);let a=Xue(o,i,e),s=a.processChildren?c5(a.segmentGroup,a.index,o.commands):VU(a.segmentGroup,a.index,o.commands);return $D(i,a.segmentGroup,s,n,r)}function Z9(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function d5(e){return typeof e=="object"&&e!=null&&e.outlets}function $D(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let a;e===t?a=n:a=AU(e,t,n);let s=DU(zU(a));return new d3(s,o,i)}function AU(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=AU(o,t,n)}),new _t(e.segments,r)}var J9=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Z9(r[0]))throw new Ee(4003,!1);let i=r.find(d5);if(i&&i!==xU(r))throw new Ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Yue(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new J9(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([c,l])=>{s[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:s}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((s,c)=>{c==0&&s==="."||(c==0&&s===""?n=!0:s===".."?t++:s!=""&&i.push(s))}),i):[...i,o]},[]);return new J9(n,t,r)}var D6=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function Xue(e,t,n){if(e.isAbsolute)return new D6(t,!0,0);if(!n)return new D6(t,!1,NaN);if(n.parent===null)return new D6(n,!0,0);let r=Z9(e.commands[0])?0:1,i=n.segments.length-1+r;return Que(n,i,e.numberOfDoubleDots)}function Que(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Ee(4005,!1);i=r.segments.length}return new D6(r,!1,i-o)}function Kue(e){return d5(e[0])?e[0].outlets:{[tt]:e}}function VU(e,t,n){if(e??=new _t([],{}),e.segments.length===0&&e.hasChildren())return c5(e,t,n);let r=Zue(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new _t(e.segments.slice(0,r.pathIndex),{});return o.children[tt]=new _t(e.segments.slice(r.pathIndex),e.children),c5(o,0,i)}else return r.match&&i.length===0?new _t(e.segments,{}):r.match&&!e.hasChildren()?YD(e,t,n):r.match?c5(e,0,i):YD(e,t,n)}function c5(e,t,n){if(n.length===0)return new _t(e.segments,{});{let r=Kue(n),i={};if(Object.keys(r).some(o=>o!==tt)&&e.children[tt]&&e.numberOfChildren===1&&e.children[tt].segments.length===0){let o=c5(e.children[tt],t,n);return new _t(e.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=VU(e.children[o],t,a))}),Object.entries(e.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new _t(e.segments,i)}}function Zue(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let a=e.segments[i],s=n[r];if(d5(s))break;let c=`${s}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!pU(c,l,a))return o;r+=2}else{if(!pU(c,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function YD(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(d5(o)){let c=Jue(o.outlets);return new _t(r,c)}if(i===0&&Z9(n[0])){let c=e.segments[t];r.push(new il(c.path,dU(n[0]))),i++;continue}let a=d5(o)?o.outlets[tt]:`${o}`,s=i<n.length-1?n[i+1]:null;a&&s&&Z9(s)?(r.push(new il(a,dU(s))),i+=2):(r.push(new il(a,{})),i++)}return new _t(r,{})}function Jue(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=YD(new _t([],{}),0,r))}),t}function dU(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function pU(e,t,n){return e==n.path&&La(t,n.parameters)}var l5="imperative",br=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(br||{}),_o=class{constructor(t,n){this.id=t,this.url=n}},A6=class extends _o{constructor(t,n,r="imperative",i=null){super(t,n),this.type=br.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},b2=class extends _o{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=br.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},No=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(No||{}),eg=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(eg||{}),p3=class extends _o{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=br.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},h3=class extends _o{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=br.NavigationSkipped}},p5=class extends _o{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=br.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},tg=class extends _o{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=br.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},XD=class extends _o{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=br.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},QD=class extends _o{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=br.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},KD=class extends _o{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=br.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ZD=class extends _o{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=br.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},JD=class{constructor(t){this.route=t,this.type=br.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ez=class{constructor(t){this.route=t,this.type=br.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},tz=class{constructor(t){this.snapshot=t,this.type=br.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nz=class{constructor(t){this.snapshot=t,this.type=br.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rz=class{constructor(t){this.snapshot=t,this.type=br.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},iz=class{constructor(t){this.snapshot=t,this.type=br.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ng=class{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=br.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},h5=class{},m5=class{constructor(t){this.url=t}};var oz=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new b5,this.attachRef=null}},b5=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new oz,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),rg=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=az(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=az(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=sz(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return sz(t,this._root).map(n=>n.value)}};function az(e,t){if(e===t.value)return t;for(let n of t.children){let r=az(e,n);if(r)return r}return null}function sz(e,t){if(e===t.value)return[t];for(let n of t.children){let r=sz(e,n);if(r.length)return r.unshift(t),r}return[]}var eo=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function E6(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var ig=class extends rg{constructor(t,n){super(t),this.snapshot=n,vz(this,t)}toString(){return this.snapshot.toString()}};function NU(e){let t=efe(e),n=new Pn([new il("",{})]),r=new Pn({}),i=new Pn({}),o=new Pn({}),a=new Pn(""),s=new Nt(n,r,o,a,i,tt,e,t.root);return s.snapshot=t.root,new ig(new eo(s,[]),t)}function efe(e){let t={},n={},r={},i="",o=new g5([],t,r,i,n,tt,e,null,{});return new og("",new eo(o,[]))}var Nt=class{constructor(t,n,r,i,o,a,s,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(et(l=>l[x5]))??Te(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(et(t=>H6(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(et(t=>H6(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gz(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:x(x({},t.params),e.params),data:x(x({},t.data),e.data),resolve:x(x(x(x({},e.data),t.data),i?.data),e._resolvedData)}:r={params:x({},e.params),data:x({},e.data),resolve:x(x({},e.data),e._resolvedData??{})},i&&kU(i)&&(r.resolve[x5]=i.title),r}var g5=class{get title(){return this.data?.[x5]}constructor(t,n,r,i,o,a,s,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=H6(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=H6(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},og=class extends rg{constructor(t,n){super(n),this.url=t,vz(this,n)}toString(){return _U(this._root)}};function vz(e,t){t.value._routerState=e,t.children.forEach(n=>vz(e,n))}function _U(e){let t=e.children.length>0?` { ${e.children.map(_U).join(", ")} } `:"";return`${e.value}${t}`}function BD(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,La(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),La(t.params,n.params)||e.paramsSubject.next(n.params),Lue(t.url,n.url)||e.urlSubject.next(n.url),La(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function cz(e,t){let n=La(e.params,t.params)&&_ue(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||cz(e.parent,t.parent))}function kU(e){return typeof e.title=="string"||e.title===null}var yz=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=tt,this.activateEvents=new bn,this.deactivateEvents=new bn,this.attachEvents=new bn,this.detachEvents=new bn,this.parentContexts=ce(b5),this.location=ce(s3),this.changeDetector=ce(Is),this.environmentInjector=ce(ji),this.inputBinder=ce(ug,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ee(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Ee(4013,!1);this._activatedRoute=r;let o=this.location,s=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new lz(r,c,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=Tt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ho]});let e=t;return e})(),lz=class{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Nt?this.route:t===b5?this.childContexts:this.parent.get(t,n)}},ug=new Ae(""),hU=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=V8([i.queryParams,i.params,i.data]).pipe(y1(([a,s,c],l)=>(c=x(x(x({},a),s),c),l===0?Te(c):Promise.resolve(c)))).subscribe(a=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let s=bB(i.component);if(!s){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of s.inputs)r.activatedComponentRef.setInput(c,a[c])});this.outletDataSubscriptions.set(r,o)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function tfe(e,t,n){let r=v5(e,t._root,n?n._root:void 0);return new ig(r,t)}function v5(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=nfe(e,t,n);return new eo(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(s=>v5(e,s)),a}}let r=rfe(t.value),i=t.children.map(o=>v5(e,o));return new eo(r,i)}}function nfe(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return v5(e,r,i);return v5(e,r)})}function rfe(e){return new Nt(new Pn(e.url),new Pn(e.params),new Pn(e.queryParams),new Pn(e.fragment),new Pn(e.data),e.outlet,e.component,e)}var TU="ngNavigationCancelingError";function IU(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=L6(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=FU(!1,No.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function FU(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[TU]=!0,n.cancellationCode=t,n}function ife(e){return RU(e)&&L6(e.url)}function RU(e){return!!e&&e[TU]}var ofe=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["ng-component"]],standalone:!0,features:[Ce],decls:1,vars:0,template:function(i,o){i&1&&gt(0,"router-outlet")},dependencies:[yz],encapsulation:2});let e=t;return e})();function afe(e,t){return e.providers&&!e._injector&&(e._injector=v9(e.providers,t,`Route: ${e.path}`)),e._injector??t}function xz(e){let t=e.children&&e.children.map(xz),n=t?k(x({},e),{children:t}):x({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==tt&&(n.component=ofe),n}function Aa(e){return e.outlet||tt}function sfe(e,t){let n=e.filter(r=>Aa(r)===t);return n.push(...e.filter(r=>Aa(r)!==t)),n}function M5(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var cfe=(e,t,n,r)=>et(i=>(new uz(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),uz=class{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),BD(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=E6(n);t.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=E6(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),s=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:s})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=E6(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=E6(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new iz(o.value.snapshot))}),t.children.length&&this.forwardEvent(new nz(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(BD(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),BD(s.route.value),this.activateChildRoutes(t,null,a.children)}else{let s=M5(i.snapshot);a.attachRef=null,a.route=i,a.injector=s,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,r)}},ag=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},z6=class{constructor(t,n){this.component=t,this.route=n}};function lfe(e,t,n){let r=e._root,i=t?t._root:null;return a5(r,i,n,[r.value])}function ufe(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function N6(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!HP(e)?e:t.get(e):r}function a5(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=E6(t);return e.children.forEach(a=>{ffe(a,o[a.value.outlet],n,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>u5(s,n.getContext(a),i)),i}function ffe(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,a=t?t.value:null,s=n?n.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let c=dfe(a,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ag(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?a5(e,t,s?s.children:null,r,i):a5(e,t,n,r,i),c&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new z6(s.outlet.component,a))}else a&&u5(t,s,i),i.canActivateChecks.push(new ag(r)),o.component?a5(e,null,s?s.children:null,r,i):a5(e,null,n,r,i);return i}function dfe(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!ol(e.url,t.url);case"pathParamsOrQueryParamsChange":return!ol(e.url,t.url)||!La(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cz(e,t)||!La(e.queryParams,t.queryParams);case"paramsChange":default:return!cz(e,t)}}function u5(e,t,n){let r=E6(e),i=e.value;Object.entries(r).forEach(([o,a])=>{i.component?t?u5(a,t.children.getContext(o),n):u5(a,null,n):u5(a,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new z6(t.outlet.component,i)):n.canDeactivateChecks.push(new z6(null,i)):n.canDeactivateChecks.push(new z6(null,i))}function w5(e){return typeof e=="function"}function pfe(e){return typeof e=="boolean"}function hfe(e){return e&&w5(e.canLoad)}function mfe(e){return e&&w5(e.canActivate)}function gfe(e){return e&&w5(e.canActivateChild)}function vfe(e){return e&&w5(e.canDeactivate)}function yfe(e){return e&&w5(e.canMatch)}function OU(e){return e instanceof Es||e?.name==="EmptyError"}var Y9=Symbol("INITIAL_VALUE");function V6(){return y1(e=>V8(e.map(t=>t.pipe(ye(1),Ww(Y9)))).pipe(et(t=>{for(let n of t)if(n!==!0){if(n===Y9)return Y9;if(n===!1||n instanceof d3)return n}return!0}),v1(t=>t!==Y9),ye(1)))}function xfe(e,t){return Wn(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return a.length===0&&o.length===0?Te(k(x({},n),{guardsResult:!0})):Cfe(a,r,i,e).pipe(Wn(s=>s&&pfe(s)?bfe(r,o,e,t):Te(s)),et(s=>k(x({},n),{guardsResult:s})))})}function Cfe(e,t,n,r){return en(e).pipe(Wn(i=>Dfe(i.component,i.route,n,t,r)),ga(i=>i!==!0,!0))}function bfe(e,t,n,r){return en(t).pipe(Ds(i=>J0(wfe(i.route.parent,r),Mfe(i.route,r),Efe(e,i.path,n),Sfe(e,i.route,n))),ga(i=>i!==!0,!0))}function Mfe(e,t){return e!==null&&t&&t(new rz(e)),Te(!0)}function wfe(e,t){return e!==null&&t&&t(new tz(e)),Te(!0)}function Sfe(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return Te(!0);let i=r.map(o=>vm(()=>{let a=M5(t)??n,s=N6(o,a),c=mfe(s)?s.canActivate(t,e):Ea(a,()=>s(t,e));return m3(c).pipe(ga())}));return Te(i).pipe(V6())}function Efe(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(a=>ufe(a)).filter(a=>a!==null).map(a=>vm(()=>{let s=a.guards.map(c=>{let l=M5(a.node)??n,u=N6(c,l),f=gfe(u)?u.canActivateChild(r,e):Ea(l,()=>u(r,e));return m3(f).pipe(ga())});return Te(s).pipe(V6())}));return Te(o).pipe(V6())}function Dfe(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return Te(!0);let a=o.map(s=>{let c=M5(t)??i,l=N6(s,c),u=vfe(l)?l.canDeactivate(e,t,n,r):Ea(c,()=>l(e,t,n,r));return m3(u).pipe(ga())});return Te(a).pipe(V6())}function zfe(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return Te(!0);let o=i.map(a=>{let s=N6(a,e),c=hfe(s)?s.canLoad(t,n):Ea(e,()=>s(t,n));return m3(c)});return Te(o).pipe(V6(),PU(r))}function PU(e){return Rw(sr(t=>{if(L6(t))throw IU(e,t)}),et(t=>t===!0))}function Hfe(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return Te(!0);let o=i.map(a=>{let s=N6(a,e),c=yfe(s)?s.canMatch(t,n):Ea(e,()=>s(t,n));return m3(c)});return Te(o).pipe(V6(),PU(r))}var y5=class{constructor(t){this.segmentGroup=t||null}},sg=class extends Error{constructor(t){super(),this.urlTree=t}};function S6(e){return Z0(new y5(e))}function Lfe(e){return Z0(new Ee(4e3,!1))}function Afe(e){return Z0(FU(!1,No.GuardRejected))}var fz=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Te(r);if(i.numberOfChildren>1||!i.children[tt])return Lfe(t.redirectTo);i=i.children[tt]}}applyRedirectCommands(t,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n.startsWith("/"))throw new sg(i);return i}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new d3(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let s=o.substring(1);r[i]=n[s]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),a={};return Object.entries(n.children).forEach(([s,c])=>{a[s]=this.createSegmentGroup(t,c,r,i)}),new _t(o,a)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new Ee(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},dz={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Vfe(e,t,n,r,i){let o=Cz(e,t,n);return o.matched?(r=afe(t,r),Hfe(r,t,n,i).pipe(et(a=>a===!0?o:x({},dz)))):Te(o)}function Cz(e,t,n){if(t.path==="**")return Nfe(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?x({},dz):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||Hue)(n,e,t);if(!i)return x({},dz);let o={};Object.entries(i.posParams??{}).forEach(([s,c])=>{o[s]=c.path});let a=i.consumed.length>0?x(x({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function Nfe(e){return{matched:!0,parameters:e.length>0?xU(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function mU(e,t,n,r){return n.length>0&&Tfe(e,n,r)?{segmentGroup:new _t(t,kfe(r,new _t(n,e.children))),slicedSegments:[]}:n.length===0&&Ife(e,n,r)?{segmentGroup:new _t(e.segments,_fe(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new _t(e.segments,e.children),slicedSegments:n}}function _fe(e,t,n,r){let i={};for(let o of n)if(fg(e,t,o)&&!r[Aa(o)]){let a=new _t([],{});i[Aa(o)]=a}return x(x({},r),i)}function kfe(e,t){let n={};n[tt]=t;for(let r of e)if(r.path===""&&Aa(r)!==tt){let i=new _t([],{});n[Aa(r)]=i}return n}function Tfe(e,t,n){return n.some(r=>fg(e,t,r)&&Aa(r)!==tt)}function Ife(e,t,n){return n.some(r=>fg(e,t,r))}function fg(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Ffe(e,t,n,r){return Aa(e)!==r&&(r===tt||!fg(t,n,e))?!1:Cz(t,e,n).matched}function Rfe(e,t,n){return t.length===0&&!e.children[n]}var pz=class{};function Ofe(e,t,n,r,i,o,a="emptyOnly"){return new hz(e,t,n,r,i,a,o).recognize()}var Pfe=31,hz=class{constructor(t,n,r,i,o,a,s){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new fz(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Ee(4002,`'${t.segmentGroup}'`)}recognize(){let t=mU(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(et(n=>{let r=new g5([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,{},tt,this.rootComponentType,null,{}),i=new eo(r,n),o=new og("",i),a=Wue(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root,null),{state:o,tree:a}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,tt).pipe(Kc(r=>{if(r instanceof sg)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof y5?this.noMatchError(r):r}))}inheritParamsAndData(t,n){let r=t.value,i=gz(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(t,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0).pipe(et(o=>o instanceof eo?[o]:[]))}processChildren(t,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return en(i).pipe(Ds(o=>{let a=r.children[o],s=sfe(n,o);return this.processSegmentGroup(t,s,a,o)}),Gw((o,a)=>(o.push(...a),o)),Zc(null),qw(),Wn(o=>{if(o===null)return S6(r);let a=$U(o);return $fe(a),Te(a)}))}processSegment(t,n,r,i,o,a){return en(n).pipe(Ds(s=>this.processSegmentAgainstRoute(s._injector??t,n,s,r,i,o,a).pipe(Kc(c=>{if(c instanceof y5)return Te(null);throw c}))),ga(s=>!!s),Kc(s=>{if(OU(s))return Rfe(r,i,o)?Te(new pz):S6(r);throw s}))}processSegmentAgainstRoute(t,n,r,i,o,a,s){return Ffe(r,i,o,a)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,a):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,a):S6(i):S6(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,a){let{matched:s,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=Cz(n,i,o);if(!s)return S6(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Pfe&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,f).pipe(Wn(d=>this.processSegment(t,r,n,d.concat(u),a,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){let a=Vfe(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(y1(s=>s.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(y1(({routes:c})=>{let l=r._loadedInjector??t,{consumedSegments:u,remainingSegments:f,parameters:d}=s,p=new g5(u,d,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,Ufe(r),Aa(r),r.component??r._loadedComponent??null,r,jfe(r)),{segmentGroup:h,slicedSegments:m}=mU(n,u,f,c);if(m.length===0&&h.hasChildren())return this.processChildren(l,c,h).pipe(et(v=>v===null?null:new eo(p,v)));if(c.length===0&&m.length===0)return Te(new eo(p,[]));let g=Aa(r)===o;return this.processSegment(l,c,h,m,g?tt:o,!0).pipe(et(v=>new eo(p,v instanceof eo?[v]:[])))}))):S6(n)))}getChildConfig(t,n,r){return n.children?Te({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?Te({routes:n._loadedRoutes,injector:n._loadedInjector}):zfe(t,n,r,this.urlSerializer).pipe(Wn(i=>i?this.configLoader.loadChildren(t,n).pipe(sr(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):Afe(n))):Te({routes:[],injector:t})}};function $fe(e){e.sort((t,n)=>t.value.outlet===tt?-1:n.value.outlet===tt?1:t.value.outlet.localeCompare(n.value.outlet))}function Bfe(e){let t=e.value.routeConfig;return t&&t.path===""}function $U(e){let t=[],n=new Set;for(let r of e){if(!Bfe(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=$U(r.children);t.push(new eo(r.value,i))}return t.filter(r=>!n.has(r))}function Ufe(e){return e.data||{}}function jfe(e){return e.resolve||{}}function qfe(e,t,n,r,i,o){return Wn(a=>Ofe(e,t,n,r,a.extractedUrl,i,o).pipe(et(({state:s,tree:c})=>k(x({},a),{targetSnapshot:s,urlAfterRedirects:c}))))}function Gfe(e,t){return Wn(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Te(n);let o=new Set(i.map(c=>c.route)),a=new Set;for(let c of o)if(!a.has(c))for(let l of BU(c))a.add(l);let s=0;return en(a).pipe(Ds(c=>o.has(c)?Wfe(c,r,e,t):(c.data=gz(c,c.parent,e).resolve,Te(void 0))),sr(()=>s++),e6(1),Wn(c=>s===a.size?Te(n):So))})}function BU(e){let t=e.children.map(n=>BU(n)).flat();return[e,...t]}function Wfe(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!kU(i)&&(o[x5]=i.title),Yfe(o,e,t,r).pipe(et(a=>(e._resolvedData=a,e.data=gz(e,e.parent,n).resolve,null)))}function Yfe(e,t,n,r){let i=qD(e);if(i.length===0)return Te({});let o={};return en(i).pipe(Wn(a=>Xfe(e[a],t,n,r).pipe(ga(),sr(s=>{o[a]=s}))),e6(1),jw(o),Kc(a=>OU(a)?So:Z0(a)))}function Xfe(e,t,n,r){let i=M5(t)??r,o=N6(e,i),a=o.resolve?o.resolve(t,n):Ea(i,()=>o(t,n));return m3(a)}function UD(e){return y1(t=>{let n=e(t);return n?en(n).pipe(et(()=>t)):Te(t)})}var UU=(()=>{let t=class t{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(a=>a.outlet===tt);return i}getResolvedTitleForRoute(r){return r.data[x5]}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(Qfe),providedIn:"root"});let e=t;return e})(),Qfe=(()=>{let t=class t extends UU{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};t.\u0275fac=function(i){return new(i||t)(ge(cU))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),S5=new Ae("",{providedIn:"root",factory:()=>({})}),cg=new Ae(""),bz=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ce(w9)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Te(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=m3(r.loadComponent()).pipe(et(jU),sr(a=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a}),Jc(()=>{this.componentLoaders.delete(r)})),o=new K0(i,()=>new m1).pipe(Q0());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Te({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let a=Kfe(i,this.compiler,r,this.onLoadEndListener).pipe(Jc(()=>{this.childrenLoaders.delete(i)})),s=new K0(a,()=>new m1).pipe(Q0());return this.childrenLoaders.set(i,s),s}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Kfe(e,t,n,r){return m3(e.loadChildren()).pipe(et(jU),Wn(i=>i instanceof B8||Array.isArray(i)?Te(i):en(t.compileModuleAsync(i))),et(i=>{r&&r(e);let o,a,s=!1;return Array.isArray(i)?(a=i,s=!0):(o=i.create(n).injector,a=o.get(cg,[],{optional:!0,self:!0}).flat()),{routes:a.map(xz),injector:o}}))}function Zfe(e){return e&&typeof e=="object"&&"default"in e}function jU(e){return Zfe(e)?e.default:e}var Mz=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(Jfe),providedIn:"root"});let e=t;return e})(),Jfe=(()=>{let t=class t{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),qU=new Ae(""),GU=new Ae("");function e8e(e,t,n){let r=e.get(GU),i=e.get(Gr);return e.get(Ot).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,a=new Promise(l=>{o=l}),s=i.startViewTransition(()=>(o(),t8e(e))),{onViewTransitionCreated:c}=r;return c&&Ea(e,()=>c({transition:s,from:t,to:n})),a})}function t8e(e){return new Promise(t=>{tD(t,{injector:e})})}var wz=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new m1,this.transitionAbortSubject=new m1,this.configLoader=ce(bz),this.environmentInjector=ce(ji),this.urlSerializer=ce(C5),this.rootContexts=ce(b5),this.location=ce(b6),this.inputBindingEnabled=ce(ug,{optional:!0})!==null,this.titleStrategy=ce(UU),this.options=ce(S5,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ce(Mz),this.createViewTransition=ce(qU,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Te(void 0),this.rootComponentType=null;let r=o=>this.events.next(new JD(o)),i=o=>this.events.next(new ez(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(k(x(x({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Pn({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:l5,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(v1(a=>a.id!==0),et(a=>k(x({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),y1(a=>{this.currentTransition=a;let s=!1,c=!1;return Te(a).pipe(sr(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?k(x({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),y1(l=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&f!=="reload"){let d="";return this.events.next(new h3(l.id,this.urlSerializer.serialize(l.rawUrl),d,eg.IgnoredSameUrlNavigation)),l.resolve(null),So}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Te(l).pipe(y1(d=>{let p=this.transitions?.getValue();return this.events.next(new A6(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),p!==this.transitions?.getValue()?So:Promise.resolve(d)}),qfe(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),sr(d=>{a.targetSnapshot=d.targetSnapshot,a.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=k(x({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let p=new tg(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:p,source:h,restoredState:m,extras:g}=l,v=new A6(d,this.urlSerializer.serialize(p),h,m);this.events.next(v);let y=NU(this.rootComponentType).snapshot;return this.currentTransition=a=k(x({},l),{targetSnapshot:y,urlAfterRedirects:p,extras:k(x({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,Te(a)}else{let d="";return this.events.next(new h3(l.id,this.urlSerializer.serialize(l.extractedUrl),d,eg.IgnoredByUrlHandlingStrategy)),l.resolve(null),So}}),sr(l=>{let u=new XD(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),et(l=>(this.currentTransition=a=k(x({},l),{guards:lfe(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),a)),xfe(this.environmentInjector,l=>this.events.next(l)),sr(l=>{if(a.guardsResult=l.guardsResult,L6(l.guardsResult))throw IU(this.urlSerializer,l.guardsResult);let u=new QD(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),v1(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",No.GuardRejected),!1)),UD(l=>{if(l.guards.canActivateChecks.length)return Te(l).pipe(sr(u=>{let f=new KD(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),y1(u=>{let f=!1;return Te(u).pipe(Gfe(this.paramsInheritanceStrategy,this.environmentInjector),sr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",No.NoDataFromResolver)}}))}),sr(u=>{let f=new ZD(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),UD(l=>{let u=f=>{let d=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(f.routeConfig).pipe(sr(p=>{f.component=p}),et(()=>{})));for(let p of f.children)d.push(...u(p));return d};return V8(u(l.targetSnapshot.root)).pipe(Zc(null),ye(1))}),UD(()=>this.afterPreactivation()),y1(()=>{let{currentSnapshot:l,targetSnapshot:u}=a,f=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return f?en(f).pipe(et(()=>a)):Te(a)}),et(l=>{let u=tfe(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=a=k(x({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,a}),sr(()=>{this.events.next(new h5)}),cfe(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ye(1),sr({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new b2(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Yw(this.transitionAbortSubject.pipe(sr(l=>{throw l}))),Jc(()=>{!s&&!c&&this.cancelNavigationTransition(a,"",No.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),Kc(l=>{if(c=!0,RU(l))this.events.next(new p3(a.id,this.urlSerializer.serialize(a.extractedUrl),l.message,l.cancellationCode)),ife(l)?this.events.next(new m5(l.url)):a.resolve(!1);else{this.events.next(new p5(a.id,this.urlSerializer.serialize(a.extractedUrl),l,a.targetSnapshot??void 0));try{a.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(u)}}return So}))}))}cancelNavigationTransition(r,i,o){let a=new p3(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(a),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function n8e(e){return e!==l5}var r8e=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(i8e),providedIn:"root"});let e=t;return e})(),mz=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},i8e=(()=>{let t=class t extends mz{};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Da(t)))(o||t)}})(),t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),WU=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(o8e),providedIn:"root"});let e=t;return e})(),o8e=(()=>{let t=class t extends WU{constructor(){super(...arguments),this.location=ce(b6),this.urlSerializer=ce(C5),this.options=ce(S5,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ce(Mz),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new d3,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=NU(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof A6)this.stateMemento=this.createStateMemento();else if(r instanceof h3)this.rawUrlTree=i.initialUrl;else if(r instanceof tg){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof h5?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof p3&&(r.code===No.GuardRejected||r.code===No.NoDataFromResolver)?this.restoreHistory(i):r instanceof p5?this.restoreHistory(i,!0):r instanceof b2&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let a=this.browserPageId,s=x(x({},i.extras.state),this.generateNgRouterState(i.id,a));this.location.replaceState(o,"",s)}else{let a=x(x({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",a)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,a=this.currentPageId-o;a!==0?this.location.historyGo(a):this.currentUrlTree===r.finalUrl&&a===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Da(t)))(o||t)}})(),t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),s5=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(s5||{});function YU(e,t){e.events.pipe(v1(n=>n instanceof b2||n instanceof p3||n instanceof p5||n instanceof h3),et(n=>n instanceof b2||n instanceof h3?s5.COMPLETE:(n instanceof p3?n.code===No.Redirect||n.code===No.SupersededByNewNavigation:!1)?s5.REDIRECTING:s5.FAILED),v1(n=>n!==s5.REDIRECTING),ye(1)).subscribe(()=>{t()})}function a8e(e){throw e}var s8e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},c8e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Qt=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=ce(y9),this.stateManager=ce(WU),this.options=ce(S5,{optional:!0})||{},this.pendingTasks=ce(J4),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ce(wz),this.urlSerializer=ce(C5),this.location=ce(b6),this.urlHandlingStrategy=ce(Mz),this._events=new m1,this.errorHandler=this.options.errorHandler||a8e,this.navigated=!1,this.routeReuseStrategy=ce(r8e),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ce(cg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ce(ug,{optional:!0}),this.eventsSubscription=new ar,this.isNgZoneEnabled=ce(Ot)instanceof Ot&&Ot.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(o!==null&&a!==null){if(this.stateManager.handleRouterEvent(i,a),i instanceof p3&&i.code!==No.Redirect&&i.code!==No.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof b2)this.navigated=!0;else if(i instanceof m5){let s=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||n8e(o.source)};this.scheduleNavigation(s,l5,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}u8e(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),l5,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let a={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let l=x({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(a.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,s,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(xz),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:a,fragment:s,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,f=null;switch(c){case"merge":f=x(x({},this.currentUrlTree.queryParams),a);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=a||null}f!==null&&(f=this.removeEmptyProps(f));let d;try{let p=o?o.snapshot:this.routerState.snapshot.root;d=HU(p)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),d=this.currentUrlTree.root}return LU(d,r,f,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=L6(r)?r:this.parseUrl(r),a=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(a,l5,null,i)}navigate(r,i={skipLocationChange:!1}){return l8e(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=x({},s8e):i===!1?o=x({},c8e):o=i,L6(r))return uU(this.currentUrlTree,r,o);let a=this.parseUrl(r);return uU(this.currentUrlTree,a,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,a])=>(a!=null&&(i[o]=a),i),{})}scheduleNavigation(r,i,o,a,s){if(this.disposed)return Promise.resolve(!1);let c,l,u;s?(c=s.resolve,l=s.reject,u=s.promise):u=new Promise((d,p)=>{c=d,l=p});let f=this.pendingTasks.add();return YU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:a,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function l8e(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new Ee(4008,!1)}function u8e(e){return!(e instanceof h5)&&!(e instanceof m5)}var hn=(()=>{let t=class t{constructor(r,i,o,a,s,c){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=a,this.el=s,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new m1,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof b2&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,a,s){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||o||a||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:v$(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,a=this.el.nativeElement;i!==null?o.setAttribute(a,r,i):o.removeAttribute(a,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};t.\u0275fac=function(i){return new(i||t)(W(Qt),W(Nt),IE("tabindex"),W(K1),W(qr),W(Bs))},t.\u0275dir=Tt({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&Re("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&x6("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Ur.HasDecoratorInputTransform,"preserveFragment","preserveFragment",nl],skipLocationChange:[Ur.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",nl],replaceUrl:[Ur.HasDecoratorInputTransform,"replaceUrl","replaceUrl",nl],routerLink:"routerLink"},standalone:!0,features:[iD,Ho]});let e=t;return e})(),XU=(()=>{let t=class t{get isActive(){return this._isActive}constructor(r,i,o,a,s){this.router=r,this.element=i,this.renderer=o,this.cdr=a,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new bn,this.routerEventsSubscription=r.events.subscribe(c=>{c instanceof b2&&this.update()})}ngAfterContentInit(){Te(this.links.changes,Te(null)).pipe(Qc()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let r=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=en(r).pipe(Qc()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(r){let i=Array.isArray(r)?r:r.split(" ");this.classes=i.filter(o=>!!o)}ngOnChanges(r){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let r=this.hasActiveLinks();this._isActive!==r&&(this._isActive=r,this.cdr.markForCheck(),this.classes.forEach(i=>{r?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),r&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(r))})}isLinkActive(r){let i=f8e(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{let a=o.urlTree;return a?r.isActive(a,i):!1}}hasActiveLinks(){let r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.links.some(r)}};t.\u0275fac=function(i){return new(i||t)(W(Qt),W(qr),W(K1),W(Is),W(hn,8))},t.\u0275dir=Tt({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(i,o,a){if(i&1&&fB(a,hn,5),i&2){let s;dB(s=pB())&&(o.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Ho]});let e=t;return e})();function f8e(e){return!!e.paths}var lg=class{};var d8e=(()=>{let t=class t{constructor(r,i,o,a,s){this.router=r,this.injector=o,this.preloadingStrategy=a,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(v1(r=>r instanceof b2),Ds(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let a of i){a.providers&&!a._injector&&(a._injector=v9(a.providers,r,`Route: ${a.path}`));let s=a._injector??r,c=a._loadedInjector??s;(a.loadChildren&&!a._loadedRoutes&&a.canLoad===void 0||a.loadComponent&&!a._loadedComponent)&&o.push(this.preloadConfig(s,a)),(a.children||a._loadedRoutes)&&o.push(this.processRoutes(c,a.children??a._loadedRoutes))}return en(o).pipe(Qc())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=Te(null);let a=o.pipe(Wn(s=>s===null?Te(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??r,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return en([a,s]).pipe(Qc())}else return a})}};t.\u0275fac=function(i){return new(i||t)(ge(Qt),ge(w9),ge(ji),ge(lg),ge(bz))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),QU=new Ae(""),p8e=(()=>{let t=class t{constructor(r,i,o,a,s={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=a,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof A6?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof b2?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof h3&&r.code===eg.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ng&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ng(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(i){V$()},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function h8e(e){return e.routerState.root}function E5(e,t){return{\u0275kind:e,\u0275providers:t}}function m8e(){let e=ce(_s);return t=>{let n=e.get(tl);if(t!==n.components[0])return;let r=e.get(Qt),i=e.get(KU);e.get(Sz)===1&&r.initialNavigation(),e.get(ZU,null,at.Optional)?.setUpPreloading(),e.get(QU,null,at.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var KU=new Ae("",{factory:()=>new m1}),Sz=new Ae("",{providedIn:"root",factory:()=>1});function g8e(){return E5(2,[{provide:Sz,useValue:0},{provide:b9,multi:!0,deps:[_s],useFactory:t=>{let n=t.get(AB,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=t.get(Qt),o=t.get(KU);YU(i,()=>{r(!0)}),t.get(wz).afterPreactivation=()=>(r(!0),o.closed?Te(void 0):o),i.initialNavigation()}))}}])}function v8e(){return E5(3,[{provide:b9,multi:!0,useFactory:()=>{let t=ce(Qt);return()=>{t.setUpLocationChangeListener()}}},{provide:Sz,useValue:2}])}var ZU=new Ae("");function y8e(e){return E5(0,[{provide:ZU,useExisting:d8e},{provide:lg,useExisting:e}])}function x8e(){return E5(8,[hU,{provide:ug,useExisting:hU}])}function C8e(e){let t=[{provide:qU,useValue:e8e},{provide:GU,useValue:x({skipNextTransition:!!e?.skipInitialTransition},e)}];return E5(9,t)}var gU=new Ae("ROUTER_FORROOT_GUARD"),b8e=[b6,{provide:C5,useClass:f5},Qt,b5,{provide:Nt,useFactory:h8e,deps:[Qt]},bz,[]],Ez=(()=>{let t=class t{constructor(r){}static forRoot(r,i){return{ngModule:t,providers:[b8e,[],{provide:cg,multi:!0,useValue:r},{provide:gU,useFactory:E8e,deps:[[Qt,new a9,new VE]]},{provide:S5,useValue:i||{}},i?.useHash?w8e():S8e(),M8e(),i?.preloadingStrategy?y8e(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?D8e(i):[],i?.bindToComponentInputs?x8e().\u0275providers:[],i?.enableViewTransitions?C8e().\u0275providers:[],z8e()]}}static forChild(r){return{ngModule:t,providers:[{provide:cg,multi:!0,useValue:r}]}}};t.\u0275fac=function(i){return new(i||t)(ge(gU,8))},t.\u0275mod=qi({type:t}),t.\u0275inj=Gi({});let e=t;return e})();function M8e(){return{provide:QU,useFactory:()=>{let e=ce(RB),t=ce(Ot),n=ce(S5),r=ce(wz),i=ce(C5);return n.scrollOffset&&e.setOffset(n.scrollOffset),new p8e(i,r,e,t,n)}}}function w8e(){return{provide:Bs,useClass:NB}}function S8e(){return{provide:Bs,useClass:MD}}function E8e(e){return"guarded"}function D8e(e){return[e.initialNavigation==="disabled"?v8e().\u0275providers:[],e.initialNavigation==="enabledBlocking"?g8e().\u0275providers:[]]}var vU=new Ae("");function z8e(){return[{provide:vU,useFactory:m8e},{provide:M9,multi:!0,useExisting:vU}]}var H8e=()=>["/"],L8e=()=>({exact:!0}),D5=()=>["uk-active"],JU=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-navbar"]],standalone:!0,features:[Ce],decls:23,vars:14,consts:[[1,"uk-navbar-container","uk-navbar-transparent"],[1,"uk-container","navbar-container"],[1,"uk-navbar-left"],["routerLinkActive","uk-active",1,"uk-navbar-item","uk-logo",3,"routerLink"],[1,"uk-nav-primary","hide-in-mobile"],[1,"uk-navbar-nav"],[3,"routerLinkActiveOptions","routerLinkActive"],["routerLink","/",1,"uk-link","uk-navbar-item"],[3,"routerLinkActive"],["routerLink","/goals",1,"uk-link","uk-navbar-item"],["routerLink","/tasks",1,"uk-link","uk-navbar-item"],["routerLink","/logbook",1,"uk-link","uk-navbar-item"],[1,"navbar-right","hide-in-mobile"],["routerLink","/configure",1,"uk-link-muted","uk-navbar-item"]],template:function(i,o){i&1&&(V(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"strong",4),I(5,"Goal Tracker"),_()(),V(6,"ul",5)(7,"li",6)(8,"a",7),I(9,"Habits"),_()(),V(10,"li",8)(11,"a",9),I(12,"Goals"),_()(),V(13,"li",8)(14,"a",10),I(15,"Tasks"),_()(),V(16,"li",8)(17,"a",11),I(18,"Logbook"),_()(),V(19,"span",12)(20,"li",8)(21,"a",13),I(22,"Configure Server"),_()()()()()()()),i&2&&(O(3),se("routerLink",l3(7,H8e)),O(4),se("routerLinkActiveOptions",l3(8,L8e))("routerLinkActive",l3(9,D5)),O(3),se("routerLinkActive",l3(10,D5)),O(3),se("routerLinkActive",l3(11,D5)),O(3),se("routerLinkActive",l3(12,D5)),O(4),se("routerLinkActive",l3(13,D5)))},dependencies:[XU,hn],styles:[".navbar-right[_ngcontent-%COMP%]{position:absolute;right:5em}"]});let e=t;return e})();var ej=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-root"]],standalone:!0,features:[Ce],decls:4,vars:0,consts:[[1,"light-dark"],[1,"main-content"]],template:function(i,o){i&1&&(V(0,"div",0),gt(1,"app-navbar"),V(2,"div",1),gt(3,"router-outlet"),_()())},dependencies:[JU,yz],styles:[".main-content[_ngcontent-%COMP%]{position:relative;margin:auto;width:60%;margin-top:2rem}@media screen and (max-width: 768px){.main-content[_ngcontent-%COMP%]{width:calc(100% - 2.4rem);margin-left:1.2rem}}"]});let e=t;return e})();function tj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tj(Object(n),!0).forEach(function(r){lr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wg(e){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wg(e)}function A8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V8e(e,t,n){return t&&nj(e.prototype,t),n&&nj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function lr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $z(e,t){return _8e(e)||T8e(e,t)||zj(e,t)||F8e()}function T5(e){return N8e(e)||k8e(e)||zj(e)||I8e()}function N8e(e){if(Array.isArray(e))return Az(e)}function _8e(e){if(Array.isArray(e))return e}function k8e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function T8e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(c){o=!0,s=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function zj(e,t){if(e){if(typeof e=="string")return Az(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Az(e,t)}}function Az(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rj=function(){},Bz={},Hj={},Lj=null,Aj={mark:rj,measure:rj};try{typeof window<"u"&&(Bz=window),typeof document<"u"&&(Hj=document),typeof MutationObserver<"u"&&(Lj=MutationObserver),typeof performance<"u"&&(Aj=performance)}catch{}var R8e=Bz.navigator||{},ij=R8e.userAgent,oj=ij===void 0?"":ij,v3=Bz,ln=Hj,aj=Lj,dg=Aj,wWe=!!v3.document,Ws=!!ln.documentElement&&!!ln.head&&typeof ln.addEventListener=="function"&&typeof ln.createElement=="function",Vj=~oj.indexOf("MSIE")||~oj.indexOf("Trident/"),pg,hg,mg,gg,vg,js="___FONT_AWESOME___",Vz=16,Nj="fa",_j="svg-inline--fa",cl="data-fa-i2svg",Nz="data-fa-pseudo-element",O8e="data-fa-pseudo-element-pending",Uz="data-prefix",jz="data-icon",sj="fontawesome-i2svg",P8e="async",$8e=["HTML","HEAD","STYLE","SCRIPT"],kj=function(){try{return!0}catch{return!1}}(),cn="classic",Ln="sharp",qz=[cn,Ln];function I5(e){return new Proxy(e,{get:function(n,r){return r in n?n[r]:n[cn]}})}var A5=I5((pg={},lr(pg,cn,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),lr(pg,Ln,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),pg)),V5=I5((hg={},lr(hg,cn,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),lr(hg,Ln,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),hg)),N5=I5((mg={},lr(mg,cn,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),lr(mg,Ln,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),mg)),B8e=I5((gg={},lr(gg,cn,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),lr(gg,Ln,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),gg)),U8e=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,Tj="fa-layers-text",j8e=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,q8e=I5((vg={},lr(vg,cn,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),lr(vg,Ln,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),vg)),Ij=[1,2,3,4,5,6,7,8,9,10],G8e=Ij.concat([11,12,13,14,15,16,17,18,19,20]),W8e=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],al={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},_5=new Set;Object.keys(V5[cn]).map(_5.add.bind(_5));Object.keys(V5[Ln]).map(_5.add.bind(_5));var Y8e=[].concat(qz,T5(_5),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",al.GROUP,al.SWAP_OPACITY,al.PRIMARY,al.SECONDARY]).concat(Ij.map(function(e){return"".concat(e,"x")})).concat(G8e.map(function(e){return"w-".concat(e)})),H5=v3.FontAwesomeConfig||{};function X8e(e){var t=ln.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function Q8e(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}ln&&typeof ln.querySelector=="function"&&(cj=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]],cj.forEach(function(e){var t=$z(e,2),n=t[0],r=t[1],i=Q8e(X8e(n));i!=null&&(H5[r]=i)}));var cj,Fj={styleDefault:"solid",familyDefault:"classic",cssPrefix:Nj,replacementClass:_j,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};H5.familyPrefix&&(H5.cssPrefix=H5.familyPrefix);var I6=ve(ve({},Fj),H5);I6.autoReplaceSvg||(I6.observeMutations=!1);var He={};Object.keys(Fj).forEach(function(e){Object.defineProperty(He,e,{enumerable:!0,set:function(n){I6[e]=n,L5.forEach(function(r){return r(He)})},get:function(){return I6[e]}})});Object.defineProperty(He,"familyPrefix",{enumerable:!0,set:function(t){I6.cssPrefix=t,L5.forEach(function(n){return n(He)})},get:function(){return I6.cssPrefix}});v3.FontAwesomeConfig=He;var L5=[];function K8e(e){return L5.push(e),function(){L5.splice(L5.indexOf(e),1)}}var g3=Vz,Va={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Z8e(e){if(!(!e||!Ws)){var t=ln.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=ln.head.childNodes,r=null,i=n.length-1;i>-1;i--){var o=n[i],a=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(r=o)}return ln.head.insertBefore(t,r),e}}var J8e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function k5(){for(var e=12,t="";e-- >0;)t+=J8e[Math.random()*62|0];return t}function F6(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function Gz(e){return e.classList?F6(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function Rj(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function e5e(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,'="').concat(Rj(e[n]),'" ')},"").trim()}function Dg(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")},"")}function Wz(e){return e.size!==Va.size||e.x!==Va.x||e.y!==Va.y||e.rotate!==Va.rotate||e.flipX||e.flipY}function t5e(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(t.x*32,", ").concat(t.y*32,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)"),c={transform:"".concat(o," ").concat(a," ").concat(s)},l={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:c,path:l}}function n5e(e){var t=e.transform,n=e.width,r=n===void 0?Vz:n,i=e.height,o=i===void 0?Vz:i,a=e.startCentered,s=a===void 0?!1:a,c="";return s&&Vj?c+="translate(".concat(t.x/g3-r/2,"em, ").concat(t.y/g3-o/2,"em) "):s?c+="translate(calc(-50% + ".concat(t.x/g3,"em), calc(-50% + ").concat(t.y/g3,"em)) "):c+="translate(".concat(t.x/g3,"em, ").concat(t.y/g3,"em) "),c+="scale(".concat(t.size/g3*(t.flipX?-1:1),", ").concat(t.size/g3*(t.flipY?-1:1),") "),c+="rotate(".concat(t.rotate,"deg) "),c}var r5e=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function Oj(){var e=Nj,t=_j,n=He.cssPrefix,r=He.replacementClass,i=r5e;if(n!==e||r!==t){var o=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(o,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(s,".".concat(r))}return i}var lj=!1;function Dz(){He.autoAddCss&&!lj&&(Z8e(Oj()),lj=!0)}var i5e={mixout:function(){return{dom:{css:Oj,insertCss:Dz}}},hooks:function(){return{beforeDOMElementCreation:function(){Dz()},beforeI2svg:function(){Dz()}}}},qs=v3||{};qs[js]||(qs[js]={});qs[js].styles||(qs[js].styles={});qs[js].hooks||(qs[js].hooks={});qs[js].shims||(qs[js].shims=[]);var M2=qs[js],Pj=[],o5e=function e(){ln.removeEventListener("DOMContentLoaded",e),Sg=1,Pj.map(function(t){return t()})},Sg=!1;Ws&&(Sg=(ln.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ln.readyState),Sg||ln.addEventListener("DOMContentLoaded",o5e));function a5e(e){Ws&&(Sg?setTimeout(e,0):Pj.push(e))}function F5(e){var t=e.tag,n=e.attributes,r=n===void 0?{}:n,i=e.children,o=i===void 0?[]:i;return typeof e=="string"?Rj(e):"<".concat(t," ").concat(e5e(r),">").concat(o.map(F5).join(""),"</").concat(t,">")}function uj(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}var s5e=function(t,n){return function(r,i,o,a){return t.call(n,r,i,o,a)}},zz=function(t,n,r,i){var o=Object.keys(t),a=o.length,s=i!==void 0?s5e(n,i):n,c,l,u;for(r===void 0?(c=1,u=t[o[0]]):(c=0,u=r);c<a;c++)l=o[c],u=s(u,t[l],l,t);return u};function c5e(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);(o&64512)==56320?t.push(((i&1023)<<10)+(o&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}function _z(e){var t=c5e(e);return t.length===1?t[0].toString(16):null}function l5e(e,t){var n=e.length,r=e.charCodeAt(t),i;return r>=55296&&r<=56319&&n>t+1&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function fj(e){return Object.keys(e).reduce(function(t,n){var r=e[n],i=!!r.icon;return i?t[r.iconName]=r.icon:t[n]=r,t},{})}function kz(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,o=fj(t);typeof M2.hooks.addPack=="function"&&!i?M2.hooks.addPack(e,fj(t)):M2.styles[e]=ve(ve({},M2.styles[e]||{}),o),e==="fas"&&kz("fa",t)}var yg,xg,Cg,_6=M2.styles,u5e=M2.shims,f5e=(yg={},lr(yg,cn,Object.values(N5[cn])),lr(yg,Ln,Object.values(N5[Ln])),yg),Yz=null,$j={},Bj={},Uj={},jj={},qj={},d5e=(xg={},lr(xg,cn,Object.keys(A5[cn])),lr(xg,Ln,Object.keys(A5[Ln])),xg);function p5e(e){return~Y8e.indexOf(e)}function h5e(e,t){var n=t.split("-"),r=n[0],i=n.slice(1).join("-");return r===e&&i!==""&&!p5e(i)?i:null}var Gj=function(){var t=function(o){return zz(_6,function(a,s,c){return a[c]=zz(s,o,{}),a},{})};$j=t(function(i,o,a){if(o[3]&&(i[o[3]]=a),o[2]){var s=o[2].filter(function(c){return typeof c=="number"});s.forEach(function(c){i[c.toString(16)]=a})}return i}),Bj=t(function(i,o,a){if(i[a]=a,o[2]){var s=o[2].filter(function(c){return typeof c=="string"});s.forEach(function(c){i[c]=a})}return i}),qj=t(function(i,o,a){var s=o[2];return i[a]=a,s.forEach(function(c){i[c]=a}),i});var n="far"in _6||He.autoFetchSvg,r=zz(u5e,function(i,o){var a=o[0],s=o[1],c=o[2];return s==="far"&&!n&&(s="fas"),typeof a=="string"&&(i.names[a]={prefix:s,iconName:c}),typeof a=="number"&&(i.unicodes[a.toString(16)]={prefix:s,iconName:c}),i},{names:{},unicodes:{}});Uj=r.names,jj=r.unicodes,Yz=zg(He.styleDefault,{family:He.familyDefault})};K8e(function(e){Yz=zg(e.styleDefault,{family:He.familyDefault})});Gj();function Xz(e,t){return($j[e]||{})[t]}function m5e(e,t){return(Bj[e]||{})[t]}function sl(e,t){return(qj[e]||{})[t]}function Wj(e){return Uj[e]||{prefix:null,iconName:null}}function g5e(e){var t=jj[e],n=Xz("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function y3(){return Yz}var Qz=function(){return{prefix:null,iconName:null,rest:[]}};function zg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.family,r=n===void 0?cn:n,i=A5[r][e],o=V5[r][e]||V5[r][i],a=e in M2.styles?e:null;return o||a||null}var dj=(Cg={},lr(Cg,cn,Object.keys(N5[cn])),lr(Cg,Ln,Object.keys(N5[Ln])),Cg);function Hg(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,i=r===void 0?!1:r,o=(t={},lr(t,cn,"".concat(He.cssPrefix,"-").concat(cn)),lr(t,Ln,"".concat(He.cssPrefix,"-").concat(Ln)),t),a=null,s=cn;(e.includes(o[cn])||e.some(function(l){return dj[cn].includes(l)}))&&(s=cn),(e.includes(o[Ln])||e.some(function(l){return dj[Ln].includes(l)}))&&(s=Ln);var c=e.reduce(function(l,u){var f=h5e(He.cssPrefix,u);if(_6[u]?(u=f5e[s].includes(u)?B8e[s][u]:u,a=u,l.prefix=u):d5e[s].indexOf(u)>-1?(a=u,l.prefix=zg(u,{family:s})):f?l.iconName=f:u!==He.replacementClass&&u!==o[cn]&&u!==o[Ln]&&l.rest.push(u),!i&&l.prefix&&l.iconName){var d=a==="fa"?Wj(l.iconName):{},p=sl(l.prefix,l.iconName);d.prefix&&(a=null),l.iconName=d.iconName||p||l.iconName,l.prefix=d.prefix||l.prefix,l.prefix==="far"&&!_6.far&&_6.fas&&!He.autoFetchSvg&&(l.prefix="fas")}return l},Qz());return(e.includes("fa-brands")||e.includes("fab"))&&(c.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(c.prefix="fad"),!c.prefix&&s===Ln&&(_6.fass||He.autoFetchSvg)&&(c.prefix="fass",c.iconName=sl(c.prefix,c.iconName)||c.iconName),(c.prefix==="fa"||a==="fa")&&(c.prefix=y3()||"fas"),c}var v5e=function(){function e(){A8e(this,e),this.definitions={}}return V8e(e,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.reduce(this._pullDefinitions,{});Object.keys(a).forEach(function(s){n.definitions[s]=ve(ve({},n.definitions[s]||{}),a[s]),kz(s,a[s]);var c=N5[cn][s];c&&kz(c,a[s]),Gj()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(o){var a=i[o],s=a.prefix,c=a.iconName,l=a.icon,u=l[2];n[s]||(n[s]={}),u.length>0&&u.forEach(function(f){typeof f=="string"&&(n[s][f]=l)}),n[s][c]=l}),n}}]),e}(),pj=[],k6={},T6={},y5e=Object.keys(T6);function x5e(e,t){var n=t.mixoutsTo;return pj=e,k6={},Object.keys(T6).forEach(function(r){y5e.indexOf(r)===-1&&delete T6[r]}),pj.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(a){typeof i[a]=="function"&&(n[a]=i[a]),wg(i[a])==="object"&&Object.keys(i[a]).forEach(function(s){n[a]||(n[a]={}),n[a][s]=i[a][s]})}),r.hooks){var o=r.hooks();Object.keys(o).forEach(function(a){k6[a]||(k6[a]=[]),k6[a].push(o[a])})}r.provides&&r.provides(T6)}),n}function Tz(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=k6[e]||[];return o.forEach(function(a){t=a.apply(null,[t].concat(r))}),t}function ll(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=k6[e]||[];i.forEach(function(o){o.apply(null,n)})}function Gs(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return T6[e]?T6[e].apply(null,t):void 0}function Iz(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,n=e.prefix||y3();if(t)return t=sl(n,t)||t,uj(Yj.definitions,n,t)||uj(M2.styles,n,t)}var Yj=new v5e,C5e=function(){He.autoReplaceSvg=!1,He.observeMutations=!1,ll("noAuto")},b5e={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ws?(ll("beforeI2svg",t),Gs("pseudoElements2svg",t),Gs("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot;He.autoReplaceSvg===!1&&(He.autoReplaceSvg=!0),He.observeMutations=!0,a5e(function(){w5e({autoReplaceSvgRoot:n}),ll("watch",t)})}},M5e={icon:function(t){if(t===null)return null;if(wg(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:sl(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var n=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],r=zg(t[0]);return{prefix:r,iconName:sl(r,n)||n}}if(typeof t=="string"&&(t.indexOf("".concat(He.cssPrefix,"-"))>-1||t.match(U8e))){var i=Hg(t.split(" "),{skipLookups:!0});return{prefix:i.prefix||y3(),iconName:sl(i.prefix,i.iconName)||i.iconName}}if(typeof t=="string"){var o=y3();return{prefix:o,iconName:sl(o,t)||t}}}},to={noAuto:C5e,config:He,dom:b5e,parse:M5e,library:Yj,findIconDefinition:Iz,toHtml:F5},w5e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot,r=n===void 0?ln:n;(Object.keys(M2.styles).length>0||He.autoFetchSvg)&&Ws&&He.autoReplaceSvg&&to.dom.i2svg({node:r})};function Lg(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(r){return F5(r)})}}),Object.defineProperty(e,"node",{get:function(){if(Ws){var r=ln.createElement("div");return r.innerHTML=e.html,r.children}}}),e}function S5e(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,o=e.styles,a=e.transform;if(Wz(a)&&n.found&&!r.found){var s=n.width,c=n.height,l={x:s/c/2,y:.5};i.style=Dg(ve(ve({},o),{},{"transform-origin":"".concat(l.x+a.x/16,"em ").concat(l.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}function E5e(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,o=e.symbol,a=o===!0?"".concat(t,"-").concat(He.cssPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ve(ve({},i),{},{id:a}),children:r}]}]}function Kz(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,o=e.iconName,a=e.transform,s=e.symbol,c=e.title,l=e.maskId,u=e.titleId,f=e.extra,d=e.watchable,p=d===void 0?!1:d,h=r.found?r:n,m=h.width,g=h.height,v=i==="fak",y=[He.replacementClass,o?"".concat(He.cssPrefix,"-").concat(o):""].filter(function(D){return f.classes.indexOf(D)===-1}).filter(function(D){return D!==""||!!D}).concat(f.classes).join(" "),C={children:[],attributes:ve(ve({},f.attributes),{},{"data-prefix":i,"data-icon":o,class:y,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},b=v&&!~f.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};p&&(C.attributes[cl]=""),c&&(C.children.push({tag:"title",attributes:{id:C.attributes["aria-labelledby"]||"title-".concat(u||k5())},children:[c]}),delete C.attributes.title);var M=ve(ve({},C),{},{prefix:i,iconName:o,main:n,mask:r,maskId:l,transform:a,symbol:s,styles:ve(ve({},b),f.styles)}),S=r.found&&n.found?Gs("generateAbstractMask",M)||{children:[],attributes:{}}:Gs("generateAbstractIcon",M)||{children:[],attributes:{}},w=S.children,E=S.attributes;return M.children=w,M.attributes=E,s?E5e(M):S5e(M)}function hj(e){var t=e.content,n=e.width,r=e.height,i=e.transform,o=e.title,a=e.extra,s=e.watchable,c=s===void 0?!1:s,l=ve(ve(ve({},a.attributes),o?{title:o}:{}),{},{class:a.classes.join(" ")});c&&(l[cl]="");var u=ve({},a.styles);Wz(i)&&(u.transform=n5e({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var f=Dg(u);f.length>0&&(l.style=f);var d=[];return d.push({tag:"span",attributes:l,children:[t]}),o&&d.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),d}function D5e(e){var t=e.content,n=e.title,r=e.extra,i=ve(ve(ve({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),o=Dg(r.styles);o.length>0&&(i.style=o);var a=[];return a.push({tag:"span",attributes:i,children:[t]}),n&&a.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),a}var Hz=M2.styles;function Fz(e){var t=e[0],n=e[1],r=e.slice(4),i=$z(r,1),o=i[0],a=null;return Array.isArray(o)?a={tag:"g",attributes:{class:"".concat(He.cssPrefix,"-").concat(al.GROUP)},children:[{tag:"path",attributes:{class:"".concat(He.cssPrefix,"-").concat(al.SECONDARY),fill:"currentColor",d:o[0]}},{tag:"path",attributes:{class:"".concat(He.cssPrefix,"-").concat(al.PRIMARY),fill:"currentColor",d:o[1]}}]}:a={tag:"path",attributes:{fill:"currentColor",d:o}},{found:!0,width:t,height:n,icon:a}}var z5e={found:!1,width:512,height:512};function H5e(e,t){!kj&&!He.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function Rz(e,t){var n=t;return t==="fa"&&He.styleDefault!==null&&(t=y3()),new Promise(function(r,i){var o={found:!1,width:512,height:512,icon:Gs("missingIconAbstract")||{}};if(n==="fa"){var a=Wj(e)||{};e=a.iconName||e,t=a.prefix||t}if(e&&t&&Hz[t]&&Hz[t][e]){var s=Hz[t][e];return r(Fz(s))}H5e(e,t),r(ve(ve({},z5e),{},{icon:He.showMissingIcons&&e?Gs("missingIconAbstract")||{}:{}}))})}var mj=function(){},Oz=He.measurePerformance&&dg&&dg.mark&&dg.measure?dg:{mark:mj,measure:mj},z5='FA "6.5.1"',L5e=function(t){return Oz.mark("".concat(z5," ").concat(t," begins")),function(){return Xj(t)}},Xj=function(t){Oz.mark("".concat(z5," ").concat(t," ends")),Oz.measure("".concat(z5," ").concat(t),"".concat(z5," ").concat(t," begins"),"".concat(z5," ").concat(t," ends"))},Zz={begin:L5e,end:Xj},bg=function(){};function gj(e){var t=e.getAttribute?e.getAttribute(cl):null;return typeof t=="string"}function A5e(e){var t=e.getAttribute?e.getAttribute(Uz):null,n=e.getAttribute?e.getAttribute(jz):null;return t&&n}function V5e(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(He.replacementClass)}function N5e(){if(He.autoReplaceSvg===!0)return Mg.replace;var e=Mg[He.autoReplaceSvg];return e||Mg.replace}function _5e(e){return ln.createElementNS("http://www.w3.org/2000/svg",e)}function k5e(e){return ln.createElement(e)}function Qj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.ceFn,r=n===void 0?e.tag==="svg"?_5e:k5e:n;if(typeof e=="string")return ln.createTextNode(e);var i=r(e.tag);Object.keys(e.attributes||[]).forEach(function(a){i.setAttribute(a,e.attributes[a])});var o=e.children||[];return o.forEach(function(a){i.appendChild(Qj(a,{ceFn:r}))}),i}function T5e(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var Mg={replace:function(t){var n=t[0];if(n.parentNode)if(t[1].forEach(function(i){n.parentNode.insertBefore(Qj(i),n)}),n.getAttribute(cl)===null&&He.keepOriginalSource){var r=ln.createComment(T5e(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(t){var n=t[0],r=t[1];if(~Gz(n).indexOf(He.replacementClass))return Mg.replace(t);var i=new RegExp("".concat(He.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var o=r[0].attributes.class.split(" ").reduce(function(s,c){return c===He.replacementClass||c.match(i)?s.toSvg.push(c):s.toNode.push(c),s},{toNode:[],toSvg:[]});r[0].attributes.class=o.toSvg.join(" "),o.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",o.toNode.join(" "))}var a=r.map(function(s){return F5(s)}).join(`
`);n.setAttribute(cl,""),n.innerHTML=a}};function vj(e){e()}function Kj(e,t){var n=typeof t=="function"?t:bg;if(e.length===0)n();else{var r=vj;He.mutateApproach===P8e&&(r=v3.requestAnimationFrame||vj),r(function(){var i=N5e(),o=Zz.begin("mutate");e.map(i),o(),n()})}}var Jz=!1;function Zj(){Jz=!0}function Pz(){Jz=!1}var Eg=null;function yj(e){if(aj&&He.observeMutations){var t=e.treeCallback,n=t===void 0?bg:t,r=e.nodeCallback,i=r===void 0?bg:r,o=e.pseudoElementsCallback,a=o===void 0?bg:o,s=e.observeMutationsRoot,c=s===void 0?ln:s;Eg=new aj(function(l){if(!Jz){var u=y3();F6(l).forEach(function(f){if(f.type==="childList"&&f.addedNodes.length>0&&!gj(f.addedNodes[0])&&(He.searchPseudoElements&&a(f.target),n(f.target)),f.type==="attributes"&&f.target.parentNode&&He.searchPseudoElements&&a(f.target.parentNode),f.type==="attributes"&&gj(f.target)&&~W8e.indexOf(f.attributeName))if(f.attributeName==="class"&&A5e(f.target)){var d=Hg(Gz(f.target)),p=d.prefix,h=d.iconName;f.target.setAttribute(Uz,p||u),h&&f.target.setAttribute(jz,h)}else V5e(f.target)&&i(f.target)})}}),Ws&&Eg.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function I5e(){Eg&&Eg.disconnect()}function F5e(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce(function(r,i){var o=i.split(":"),a=o[0],s=o.slice(1);return a&&s.length>0&&(r[a]=s.join(":").trim()),r},{})),n}function R5e(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=e.innerText!==void 0?e.innerText.trim():"",i=Hg(Gz(e));return i.prefix||(i.prefix=y3()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=m5e(i.prefix,e.innerText)||Xz(i.prefix,_z(e.innerText))),!i.iconName&&He.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function O5e(e){var t=F6(e.attributes).reduce(function(i,o){return i.name!=="class"&&i.name!=="style"&&(i[o.name]=o.value),i},{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return He.autoA11y&&(n?t["aria-labelledby"]="".concat(He.replacementClass,"-title-").concat(r||k5()):(t["aria-hidden"]="true",t.focusable="false")),t}function P5e(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Va,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function xj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=R5e(e),r=n.iconName,i=n.prefix,o=n.rest,a=O5e(e),s=Tz("parseNodeAttributes",{},e),c=t.styleParser?F5e(e):[];return ve({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:Va,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:o,styles:c,attributes:a}},s)}var $5e=M2.styles;function Jj(e){var t=He.autoReplaceSvg==="nest"?xj(e,{styleParser:!1}):xj(e);return~t.extra.classes.indexOf(Tj)?Gs("generateLayersText",e,t):Gs("generateSvgReplacementMutation",e,t)}var x3=new Set;qz.map(function(e){x3.add("fa-".concat(e))});Object.keys(A5[cn]).map(x3.add.bind(x3));Object.keys(A5[Ln]).map(x3.add.bind(x3));x3=T5(x3);function Cj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ws)return Promise.resolve();var n=ln.documentElement.classList,r=function(f){return n.add("".concat(sj,"-").concat(f))},i=function(f){return n.remove("".concat(sj,"-").concat(f))},o=He.autoFetchSvg?x3:qz.map(function(u){return"fa-".concat(u)}).concat(Object.keys($5e));o.includes("fa")||o.push("fa");var a=[".".concat(Tj,":not([").concat(cl,"])")].concat(o.map(function(u){return".".concat(u,":not([").concat(cl,"])")})).join(", ");if(a.length===0)return Promise.resolve();var s=[];try{s=F6(e.querySelectorAll(a))}catch{}if(s.length>0)r("pending"),i("complete");else return Promise.resolve();var c=Zz.begin("onTree"),l=s.reduce(function(u,f){try{var d=Jj(f);d&&u.push(d)}catch(p){kj||p.name==="MissingIcon"&&console.error(p)}return u},[]);return new Promise(function(u,f){Promise.all(l).then(function(d){Kj(d,function(){r("active"),r("complete"),i("pending"),typeof t=="function"&&t(),c(),u()})}).catch(function(d){c(),f(d)})})}function B5e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Jj(e).then(function(n){n&&Kj([n],t)})}function U5e(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(t||{}).icon?t:Iz(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:Iz(i||{})),e(r,ve(ve({},n),{},{mask:i}))}}var j5e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?Va:r,o=n.symbol,a=o===void 0?!1:o,s=n.mask,c=s===void 0?null:s,l=n.maskId,u=l===void 0?null:l,f=n.title,d=f===void 0?null:f,p=n.titleId,h=p===void 0?null:p,m=n.classes,g=m===void 0?[]:m,v=n.attributes,y=v===void 0?{}:v,C=n.styles,b=C===void 0?{}:C;if(t){var M=t.prefix,S=t.iconName,w=t.icon;return Lg(ve({type:"icon"},t),function(){return ll("beforeDOMElementCreation",{iconDefinition:t,params:n}),He.autoA11y&&(d?y["aria-labelledby"]="".concat(He.replacementClass,"-title-").concat(h||k5()):(y["aria-hidden"]="true",y.focusable="false")),Kz({icons:{main:Fz(w),mask:c?Fz(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:M,iconName:S,transform:ve(ve({},Va),i),symbol:a,title:d,maskId:u,titleId:h,extra:{attributes:y,styles:b,classes:g}})})}},q5e={mixout:function(){return{icon:U5e(j5e)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=Cj,n.nodeCallback=B5e,n}}},provides:function(t){t.i2svg=function(n){var r=n.node,i=r===void 0?ln:r,o=n.callback,a=o===void 0?function(){}:o;return Cj(i,a)},t.generateSvgReplacementMutation=function(n,r){var i=r.iconName,o=r.title,a=r.titleId,s=r.prefix,c=r.transform,l=r.symbol,u=r.mask,f=r.maskId,d=r.extra;return new Promise(function(p,h){Promise.all([Rz(i,s),u.iconName?Rz(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=$z(m,2),v=g[0],y=g[1];p([n,Kz({icons:{main:v,mask:y},prefix:s,iconName:i,transform:c,symbol:l,maskId:f,title:o,titleId:a,extra:d,watchable:!0})])}).catch(h)})},t.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,o=n.main,a=n.transform,s=n.styles,c=Dg(s);c.length>0&&(i.style=c);var l;return Wz(a)&&(l=Gs("generateAbstractTransformGrouping",{main:o,transform:a,containerWidth:o.width,iconWidth:o.width})),r.push(l||o.icon),{children:r,attributes:i}}}},G5e={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,o=i===void 0?[]:i;return Lg({type:"layer"},function(){ll("beforeDOMElementCreation",{assembler:n,params:r});var a=[];return n(function(s){Array.isArray(s)?s.map(function(c){a=a.concat(c.abstract)}):a=a.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(He.cssPrefix,"-layers")].concat(T5(o)).join(" ")},children:a}]})}}}},W5e={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,o=i===void 0?null:i,a=r.classes,s=a===void 0?[]:a,c=r.attributes,l=c===void 0?{}:c,u=r.styles,f=u===void 0?{}:u;return Lg({type:"counter",content:n},function(){return ll("beforeDOMElementCreation",{content:n,params:r}),D5e({content:n.toString(),title:o,extra:{attributes:l,styles:f,classes:["".concat(He.cssPrefix,"-layers-counter")].concat(T5(s))}})})}}}},Y5e={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,o=i===void 0?Va:i,a=r.title,s=a===void 0?null:a,c=r.classes,l=c===void 0?[]:c,u=r.attributes,f=u===void 0?{}:u,d=r.styles,p=d===void 0?{}:d;return Lg({type:"text",content:n},function(){return ll("beforeDOMElementCreation",{content:n,params:r}),hj({content:n,transform:ve(ve({},Va),o),title:s,extra:{attributes:f,styles:p,classes:["".concat(He.cssPrefix,"-layers-text")].concat(T5(l))}})})}}},provides:function(t){t.generateLayersText=function(n,r){var i=r.title,o=r.transform,a=r.extra,s=null,c=null;if(Vj){var l=parseInt(getComputedStyle(n).fontSize,10),u=n.getBoundingClientRect();s=u.width/l,c=u.height/l}return He.autoA11y&&!i&&(a.attributes["aria-hidden"]="true"),Promise.resolve([n,hj({content:n.innerHTML,width:s,height:c,transform:o,title:i,extra:a,watchable:!0})])}}},X5e=new RegExp('"',"ug"),bj=[1105920,1112319];function Q5e(e){var t=e.replace(X5e,""),n=l5e(t,0),r=n>=bj[0]&&n<=bj[1],i=t.length===2?t[0]===t[1]:!1;return{value:_z(i?t[0]:t),isSecondary:r||i}}function Mj(e,t){var n="".concat(O8e).concat(t.replace(":","-"));return new Promise(function(r,i){if(e.getAttribute(n)!==null)return r();var o=F6(e.children),a=o.filter(function(w){return w.getAttribute(Nz)===t})[0],s=v3.getComputedStyle(e,t),c=s.getPropertyValue("font-family").match(j8e),l=s.getPropertyValue("font-weight"),u=s.getPropertyValue("content");if(a&&!c)return e.removeChild(a),r();if(c&&u!=="none"&&u!==""){var f=s.getPropertyValue("content"),d=~["Sharp"].indexOf(c[2])?Ln:cn,p=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?V5[d][c[2].toLowerCase()]:q8e[d][l],h=Q5e(f),m=h.value,g=h.isSecondary,v=c[0].startsWith("FontAwesome"),y=Xz(p,m),C=y;if(v){var b=g5e(m);b.iconName&&b.prefix&&(y=b.iconName,p=b.prefix)}if(y&&!g&&(!a||a.getAttribute(Uz)!==p||a.getAttribute(jz)!==C)){e.setAttribute(n,C),a&&e.removeChild(a);var M=P5e(),S=M.extra;S.attributes[Nz]=t,Rz(y,p).then(function(w){var E=Kz(ve(ve({},M),{},{icons:{main:w,mask:Qz()},prefix:p,iconName:C,extra:S,watchable:!0})),D=ln.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(D,e.firstChild):e.appendChild(D),D.outerHTML=E.map(function(z){return F5(z)}).join(`
`),e.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function K5e(e){return Promise.all([Mj(e,"::before"),Mj(e,"::after")])}function Z5e(e){return e.parentNode!==document.head&&!~$8e.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Nz)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function wj(e){if(Ws)return new Promise(function(t,n){var r=F6(e.querySelectorAll("*")).filter(Z5e).map(K5e),i=Zz.begin("searchPseudoElements");Zj(),Promise.all(r).then(function(){i(),Pz(),t()}).catch(function(){i(),Pz(),n()})})}var J5e={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=wj,n}}},provides:function(t){t.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?ln:r;He.searchPseudoElements&&wj(i)}}},Sj=!1,ede={mixout:function(){return{dom:{unwatch:function(){Zj(),Sj=!0}}}},hooks:function(){return{bootstrap:function(){yj(Tz("mutationObserverCallbacks",{}))},noAuto:function(){I5e()},watch:function(n){var r=n.observeMutationsRoot;Sj?Pz():yj(Tz("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},Ej=function(t){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(r,i){var o=i.toLowerCase().split("-"),a=o[0],s=o.slice(1).join("-");if(a&&s==="h")return r.flipX=!0,r;if(a&&s==="v")return r.flipY=!0,r;if(s=parseFloat(s),isNaN(s))return r;switch(a){case"grow":r.size=r.size+s;break;case"shrink":r.size=r.size-s;break;case"left":r.x=r.x-s;break;case"right":r.x=r.x+s;break;case"up":r.y=r.y-s;break;case"down":r.y=r.y+s;break;case"rotate":r.rotate=r.rotate+s;break}return r},n)},tde={mixout:function(){return{parse:{transform:function(n){return Ej(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=Ej(i)),n}}},provides:function(t){t.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,o=n.containerWidth,a=n.iconWidth,s={transform:"translate(".concat(o/2," 256)")},c="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),f={transform:"".concat(c," ").concat(l," ").concat(u)},d={transform:"translate(".concat(a/2*-1," -256)")},p={outer:s,inner:f,path:d};return{tag:"g",attributes:ve({},p.outer),children:[{tag:"g",attributes:ve({},p.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:ve(ve({},r.icon.attributes),p.path)}]}]}}}},Lz={x:0,y:0,width:"100%",height:"100%"};function Dj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function nde(e){return e.tag==="g"?e.children:[e]}var rde={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),o=i?Hg(i.split(" ").map(function(a){return a.trim()})):Qz();return o.prefix||(o.prefix=y3()),n.mask=o,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(t){t.generateAbstractMask=function(n){var r=n.children,i=n.attributes,o=n.main,a=n.mask,s=n.maskId,c=n.transform,l=o.width,u=o.icon,f=a.width,d=a.icon,p=t5e({transform:c,containerWidth:f,iconWidth:l}),h={tag:"rect",attributes:ve(ve({},Lz),{},{fill:"white"})},m=u.children?{children:u.children.map(Dj)}:{},g={tag:"g",attributes:ve({},p.inner),children:[Dj(ve({tag:u.tag,attributes:ve(ve({},u.attributes),p.path)},m))]},v={tag:"g",attributes:ve({},p.outer),children:[g]},y="mask-".concat(s||k5()),C="clip-".concat(s||k5()),b={tag:"mask",attributes:ve(ve({},Lz),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,v]},M={tag:"defs",children:[{tag:"clipPath",attributes:{id:C},children:nde(d)},b]};return r.push(M,{tag:"rect",attributes:ve({fill:"currentColor","clip-path":"url(#".concat(C,")"),mask:"url(#".concat(y,")")},Lz)}),{children:r,attributes:i}}}},ide={provides:function(t){var n=!1;v3.matchMedia&&(n=v3.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},o={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:ve(ve({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var a=ve(ve({},o),{},{attributeName:"opacity"}),s={tag:"circle",attributes:ve(ve({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||s.children.push({tag:"animate",attributes:ve(ve({},o),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:ve(ve({},a),{},{values:"1;0;1;1;0;1;"})}),r.push(s),r.push({tag:"path",attributes:ve(ve({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:ve(ve({},a),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:ve(ve({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:ve(ve({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},ode={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),o=i===null?!1:i===""?!0:i;return n.symbol=o,n}}}},ade=[i5e,q5e,G5e,W5e,Y5e,J5e,ede,tde,rde,ide,ode];x5e(ade,{mixoutsTo:to});var SWe=to.noAuto,EWe=to.config,DWe=to.library,zWe=to.dom,eq=to.parse,HWe=to.findIconDefinition,LWe=to.toHtml,tq=to.icon,AWe=to.layer,sde=to.text,cde=to.counter;var lde=["*"],ude=e=>{throw new Error(`Could not find icon with iconName=${e.iconName} and prefix=${e.prefix} in the icon library.`)},fde=()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")},dde=e=>{let t={[`fa-${e.animation}`]:e.animation!=null&&!e.animation.startsWith("spin"),"fa-spin":e.animation==="spin"||e.animation==="spin-reverse","fa-spin-pulse":e.animation==="spin-pulse"||e.animation==="spin-pulse-reverse","fa-spin-reverse":e.animation==="spin-reverse"||e.animation==="spin-pulse-reverse","fa-pulse":e.animation==="spin-pulse"||e.animation==="spin-pulse-reverse","fa-fw":e.fixedWidth,"fa-border":e.border,"fa-inverse":e.inverse,"fa-layers-counter":e.counter,"fa-flip-horizontal":e.flip==="horizontal"||e.flip==="both","fa-flip-vertical":e.flip==="vertical"||e.flip==="both",[`fa-${e.size}`]:e.size!==null,[`fa-rotate-${e.rotate}`]:e.rotate!==null,[`fa-pull-${e.pull}`]:e.pull!==null,[`fa-stack-${e.stackItemSize}`]:e.stackItemSize!=null};return Object.keys(t).map(n=>t[n]?n:null).filter(n=>n)},pde=e=>e.prefix!==void 0&&e.iconName!==void 0,hde=(e,t)=>pde(e)?e:typeof e=="string"?{prefix:t,iconName:e}:{prefix:e[0],iconName:e[1]},mde=(()=>{let t=class t{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),gde=(()=>{let t=class t{constructor(){this.definitions={}}addIcons(...r){for(let i of r){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(let o of i.icon[2])typeof o=="string"&&(this.definitions[i.prefix][o]=i)}}addIconPacks(...r){for(let i of r){let o=Object.keys(i).map(a=>i[a]);this.addIcons(...o)}}getIconDefinition(r,i){return r in this.definitions&&i in this.definitions[r]?this.definitions[r][i]:null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),vde=(()=>{let t=class t{constructor(){this.stackItemSize="1x"}ngOnChanges(r){if("size"in r)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=Tt({type:t,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},standalone:!0,features:[Ho]});let e=t;return e})(),yde=(()=>{let t=class t{constructor(r,i){this.renderer=r,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(r){"size"in r&&(r.size.currentValue!=null&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${r.size.currentValue}`),r.size.previousValue!=null&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${r.size.previousValue}`))}};t.\u0275fac=function(i){return new(i||t)(W(K1),W(qr))},t.\u0275cmp=xe({type:t,selectors:[["fa-stack"]],inputs:{size:"size"},standalone:!0,features:[Ho,Ce],ngContentSelectors:lde,decls:1,vars:0,template:function(i,o){i&1&&(lB(),uB(0))},encapsulation:2});let e=t;return e})(),Ag=(()=>{let t=class t{set spin(r){this.animation=r?"spin":void 0}set pulse(r){this.animation=r?"spin-pulse":void 0}constructor(r,i,o,a,s){this.sanitizer=r,this.config=i,this.iconLibrary=o,this.stackItem=a,this.classes=[],s!=null&&a==null&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(r){if(this.icon==null&&this.config.fallbackIcon==null){fde();return}if(r){let i=this.icon!=null?this.icon:this.config.fallbackIcon,o=this.findIconDefinition(i);if(o!=null){let a=this.buildParams();this.renderIcon(o,a)}}}render(){this.ngOnChanges({})}findIconDefinition(r){let i=hde(r,this.config.defaultPrefix);if("icon"in i)return i;let o=this.iconLibrary.getIconDefinition(i.prefix,i.iconName);return o??(ude(i),null)}buildParams(){let r={flip:this.flip,animation:this.animation,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:typeof this.fixedWidth=="boolean"?this.fixedWidth:this.config.fixedWidth,stackItemSize:this.stackItem!=null?this.stackItem.stackItemSize:null},i=typeof this.transform=="string"?eq.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...dde(r),...this.classes],mask:this.mask!=null?this.findIconDefinition(this.mask):null,styles:this.styles!=null?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(r,i){let o=tq(r,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(o.html.join(`
`))}};t.\u0275fac=function(i){return new(i||t)(W(OD),W(mde),W(gde),W(vde,8),W(yde,8))},t.\u0275cmp=xe({type:t,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(i,o){i&2&&(oD("innerHTML",o.renderedIconHTML,g$),x6("title",o.title))},inputs:{icon:"icon",title:"title",animation:"animation",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},standalone:!0,features:[Ho,Ce],decls:0,vars:0,template:function(i,o){},encapsulation:2});let e=t;return e})();var nq=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=qi({type:t}),t.\u0275inj=Gi({});let e=t;return e})();var fq=(()=>{let t=class t{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};t.\u0275fac=function(i){return new(i||t)(W(K1),W(qr))},t.\u0275dir=Tt({type:t});let e=t;return e})(),B5=(()=>{let t=class t extends fq{};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Da(t)))(o||t)}})(),t.\u0275dir=Tt({type:t,features:[cr]});let e=t;return e})(),P6=new Ae(""),xde={provide:P6,useExisting:Sa(()=>ul),multi:!0},ul=(()=>{let t=class t extends B5{writeValue(r){this.setProperty("checked",r)}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Da(t)))(o||t)}})(),t.\u0275dir=Tt({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){i&1&&Re("change",function(s){return o.onChange(s.target.checked)})("blur",function(){return o.onTouched()})},features:[c3([xde]),cr]});let e=t;return e})(),Cde={provide:P6,useExisting:Sa(()=>S1),multi:!0};function bde(){let e=Ha()?Ha().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var Mde=new Ae(""),S1=(()=>{let t=class t extends fq{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!bde())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};t.\u0275fac=function(i){return new(i||t)(W(K1),W(qr),W(Mde,8))},t.\u0275dir=Tt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Re("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[c3([Cde]),cr]});let e=t;return e})();var dq=new Ae(""),pq=new Ae("");function hq(e){return e!=null}function mq(e){return u3(e)?en(e):e}function gq(e){let t={};return e.forEach(n=>{t=n!=null?x(x({},t),n):t}),Object.keys(t).length===0?null:t}function vq(e,t){return t.map(n=>n(e))}function wde(e){return!e.validate}function yq(e){return e.map(t=>wde(t)?t:n=>t.validate(n))}function Sde(e){if(!e)return null;let t=e.filter(hq);return t.length==0?null:function(n){return gq(vq(n,t))}}function tH(e){return e!=null?Sde(yq(e)):null}function Ede(e){if(!e)return null;let t=e.filter(hq);return t.length==0?null:function(n){let r=vq(n,t).map(mq);return Uw(r).pipe(et(gq))}}function nH(e){return e!=null?Ede(yq(e)):null}function rq(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Dde(e){return e._rawValidators}function zde(e){return e._rawAsyncValidators}function eH(e){return e?Array.isArray(e)?e:[e]:[]}function Ng(e,t){return Array.isArray(e)?e.includes(t):e===t}function iq(e,t){let n=eH(t);return eH(e).forEach(i=>{Ng(n,i)||n.push(i)}),n}function oq(e,t){return eH(t).filter(n=>!Ng(e,n))}var _g=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=tH(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=nH(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},O6=class extends _g{get formDirective(){return null}get path(){return null}},$5=class extends _g{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},kg=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Hde={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},XWe=k(x({},Hde),{"[class.ng-submitted]":"isSubmitted"}),xi=(()=>{let t=class t extends kg{constructor(r){super(r)}};t.\u0275fac=function(i){return new(i||t)(W($5,2))},t.\u0275dir=Tt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Q8("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[cr]});let e=t;return e})(),Na=(()=>{let t=class t extends kg{constructor(r){super(r)}};t.\u0275fac=function(i){return new(i||t)(W(O6,10))},t.\u0275dir=Tt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&Q8("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[cr]});let e=t;return e})();var R5="VALID",Vg="INVALID",R6="PENDING",O5="DISABLED";function xq(e){return(Fg(e)?e.validators:e)||null}function Lde(e){return Array.isArray(e)?tH(e):e||null}function Cq(e,t){return(Fg(t)?t.asyncValidators:e)||null}function Ade(e){return Array.isArray(e)?nH(e):e||null}function Fg(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function Vde(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new Ee(1e3,"");if(!r[n])throw new Ee(1001,"")}function Nde(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new Ee(1002,"")})}var Tg=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===R5}get invalid(){return this.status===Vg}get pending(){return this.status==R6}get disabled(){return this.status===O5}get enabled(){return this.status!==O5}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(iq(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(iq(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(oq(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(oq(t,this._rawAsyncValidators))}hasValidator(t){return Ng(this._rawValidators,t)}hasAsyncValidator(t){return Ng(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=R6,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=O5,this.errors=null,this._forEachChild(r=>{r.disable(k(x({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(k(x({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=R5,this._forEachChild(r=>{r.enable(k(x({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(k(x({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===R5||this.status===R6)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?O5:R5}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=R6,this._hasOwnPendingAsyncValidator=!0;let n=mq(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new bn,this.statusChanges=new bn}_calculateStatus(){return this._allControlsDisabled()?O5:this.errors?Vg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(R6)?R6:this._anyControlsHaveStatus(Vg)?Vg:R5}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Fg(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Lde(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Ade(this._rawAsyncValidators)}},Ig=class extends Tg{constructor(t,n,r){super(xq(n),Cq(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){Nde(this,!0,t),Object.keys(t).forEach(r=>{Vde(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var rH=new Ae("CallSetDisabledState",{providedIn:"root",factory:()=>iH}),iH="always";function _de(e,t){return[...t.path,e]}function bq(e,t,n=iH){Mq(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),Tde(e,t),Fde(e,t),Ide(e,t),kde(e,t)}function aq(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function kde(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function Mq(e,t){let n=Dde(e);t.validator!==null?e.setValidators(rq(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=zde(e);t.asyncValidator!==null?e.setAsyncValidators(rq(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();aq(t._rawValidators,i),aq(t._rawAsyncValidators,i)}function Tde(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&wq(e,t)})}function Ide(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&wq(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function wq(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Fde(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function Rde(e,t){e==null,Mq(e,t)}function Ode(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function Pde(e){return Object.getPrototypeOf(e.constructor)===B5}function $de(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Bde(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===S1?n=o:Pde(o)?r=o:i=o}),i||r||n||null}var Ude={provide:O6,useExisting:Sa(()=>w2)},P5=Promise.resolve(),w2=(()=>{let t=class t extends O6{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new bn,this.form=new Ig({},tH(r),nH(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){P5.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),bq(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){P5.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){P5.then(()=>{let i=this._findContainer(r.path),o=new Ig({});Rde(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){P5.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){P5.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,$de(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};t.\u0275fac=function(i){return new(i||t)(W(dq,10),W(pq,10),W(rH,8))},t.\u0275dir=Tt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&Re("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{options:[Ur.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c3([Ude]),cr]});let e=t;return e})();function sq(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function cq(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var jde=class extends Tg{constructor(t=null,n,r){super(xq(n),Cq(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(cq(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){sq(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){sq(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){cq(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var qde={provide:$5,useExisting:Sa(()=>Wr)},lq=Promise.resolve(),Wr=(()=>{let t=class t extends $5{constructor(r,i,o,a,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this.control=new jde,this._registered=!1,this.name="",this.update=new bn,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=Bde(this,a)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),Ode(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){bq(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){lq.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&nl(i);lq.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?_de(r,this._parent):[r]}};t.\u0275fac=function(i){return new(i||t)(W(O6,9),W(dq,10),W(pq,10),W(P6,10),W(Is,8),W(rH,8))},t.\u0275dir=Tt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Ur.None,"disabled","isDisabled"],model:[Ur.None,"ngModel","model"],options:[Ur.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c3([qde]),cr,Ho]});let e=t;return e})(),_a=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=Tt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let e=t;return e})(),Gde={provide:P6,useExisting:Sa(()=>oH),multi:!0},oH=(()=>{let t=class t extends B5{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Da(t)))(o||t)}})(),t.\u0275dir=Tt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&Re("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},features:[c3([Gde]),cr]});let e=t;return e})();var Wde={provide:P6,useExisting:Sa(()=>$6),multi:!0};function Sq(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function Yde(e){return e.split(":")[0]}var $6=(()=>{let t=class t extends B5{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),o=Sq(i,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=Yde(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Da(t)))(o||t)}})(),t.\u0275dir=Tt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&Re("change",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[c3([Wde]),cr]});let e=t;return e})(),Rg=(()=>{let t=class t{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(Sq(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(i){return new(i||t)(W(qr),W(K1),W($6,9))},t.\u0275dir=Tt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let e=t;return e})(),Xde={provide:P6,useExisting:Sa(()=>Eq),multi:!0};function uq(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function Qde(e){return e.split(":")[0]}var Eq=(()=>{let t=class t extends B5{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let o=r.map(a=>this._getOptionId(a));i=(a,s)=>{a._setSelected(o.indexOf(s.toString())>-1)}}else i=(o,a)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let o=[],a=i.selectedOptions;if(a!==void 0){let s=a;for(let c=0;c<s.length;c++){let l=s[c],u=this._getOptionValue(l.value);o.push(u)}}else{let s=i.options;for(let c=0;c<s.length;c++){let l=s[c];if(l.selected){let u=this._getOptionValue(l.value);o.push(u)}}}this.value=o,r(o)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=Qde(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Da(t)))(o||t)}})(),t.\u0275dir=Tt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&Re("change",function(s){return o.onChange(s.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[c3([Xde]),cr]});let e=t;return e})(),Og=(()=>{let t=class t{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(uq(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(uq(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(i){return new(i||t)(W(qr),W(K1),W(Eq,9))},t.\u0275dir=Tt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let e=t;return e})();var Kde=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=qi({type:t}),t.\u0275inj=Gi({});let e=t;return e})();var Mr=(()=>{let t=class t{static withConfig(r){return{ngModule:t,providers:[{provide:rH,useValue:r.callSetDisabledState??iH}]}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=qi({type:t}),t.\u0275inj=Gi({imports:[Kde]});let e=t;return e})();var ka=class{constructor(t){Object.assign(this,t)}toString(){return JSON.stringify(this)}get ViewUrl(){throw new Error("ViewUrl not implemented")}get EditUrl(){throw new Error("EditUrl not implemented")}get DeleteUrl(){throw new Error("DeleteUrl not implemented")}};var ur=class extends ka{constructor(t){super(t)}get ViewUrl(){return["/goals",this.Id]}get EditUrl(){return["/goals",this.Id,"edit"]}get DeleteUrl(){return["/goals",this.Id,"delete"]}};var ko=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var U5="customServerUrl",B6=(()=>{let t=class t extends ko{constructor(){super()}getCustomServerUrl(){return localStorage.getItem(U5)}setCustomServerUrl(r){return Pg.endpoint=r,localStorage.setItem(U5,r)}clearCustomServerUrl(){localStorage.removeItem(U5)}isCustomServerUrlSet(){return this.getCustomServerUrl()!==null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Pg={endpoint:localStorage.getItem(U5)??""};function Kt(e){return Pg.endpoint+e}var Kn=(()=>{let t=class t extends ko{constructor(r){super(),this.http=r}listGoals(){let r=Kt("/goals");return this.http.get(r)}findGoals(r){let i=Kt(`/goals?q=${r}`);return this.http.get(i)}getGoal(r){let i=Kt(`/goals/${r}`);return this.http.get(i)}createGoal(r){let i=Kt("/goals");return this.http.post(i,r)}updateGoal(r){let i=Kt(`/goals/${r.Id}`);return this.http.put(i,r)}deleteGoal(r){let i=Kt(`/goals/${r}`);return this.http.delete(i)}getGoalTasks(r){let i=Kt(`/goals/${r}/tasks`);return this.http.get(i)}getGoalHabits(r){let i=Kt(`/goals/${r}/habits`);return this.http.get(i)}};t.\u0275fac=function(i){return new(i||t)(ge(Us))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();var zq=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(ye(1)).subscribe(i=>{this.model=new ur(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteGoal(this.model?.Id).pipe(ye(1)).subscribe(()=>this.router.navigateByUrl("/goals"))}};t.\u0275fac=function(i){return new(i||t)(W(Kn),W(Nt),W(Qt))},t.\u0275cmp=xe({type:t,selectors:[["app-delete-page"]],standalone:!0,features:[Ce],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),_(),V(2,"p"),I(3,` Deleting this model will make it unrecoverable.
`),_(),V(4,"button",0),Re("click",function(){return o.deleteModel()}),I(5),_()),i&2&&(O(),ze("Delete ",o.model==null?null:o.model.Name,"?"),O(4),ze(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();var E1=class extends ka{constructor(t){super(t)}get ViewUrl(){return["/habits",this.Id]}get EditUrl(){return["/habits",this.Id,"edit"]}get DeleteUrl(){return["/habits",this.Id,"delete"]}get TimesCompletedToday(){let t=new Date().toLocaleDateString().split("T")[0];return this.CompletedDates?.filter(n=>n===t).length??0}get IsCompletedToday(){return this.IsQuantifiable?this.TimesCompletedToday>=this.TargetValue:this.TimesCompletedToday>0}get FormattedCompletedDates(){let t=[];if(this.AntiHabit){let n=new Date,r=new Date(this.CreatedAt);for(let i=r;i<=n;i.setDate(i.getDate()+1)){let o=i.toLocaleDateString().split("T")[0];(!this.CompletedDates||!this.CompletedDates.includes(o))&&t.push(o)}}else t=this.CompletedDates?.map(n=>new Date(n).toLocaleDateString().split("T")[0]??[]);return t??[]}};var no=class extends ka{constructor(t){super(t),this.Importance=1}get ViewUrl(){return["/tasks",this.Id]}get EditUrl(){return["/tasks",this.Id,"edit"]}get DeleteUrl(){return["/tasks",this.Id,"delete"]}get ImportanceHuman(){let t={1:"Low",2:"Low-Medium",3:"Medium",4:"Medium-High",5:"High"};return this.Importance in t?t[this.Importance]:"Unknown Importance"}get isOverdue(){let t=new Date,n=new Date(this.CompleteBy);return t>n}};function Zde(e,t){if(e&1&&(V(0,"pre",4),I(1),_()),e&2){let n=qe();O(),Hn(n.model==null?null:n.model.Description)}}function Jde(e,t){if(e&1&&(V(0,"li")(1,"a",5),I(2),_()()),e&2){let n=t.$implicit;O(),se("routerLink",n.ViewUrl),O(),ze(" ",n.Name," ")}}function e7e(e,t){if(e&1&&(V(0,"li")(1,"a",5),I(2),_()()),e&2){let n=t.$implicit;O(),se("routerLink",n.ViewUrl),O(),ze(" ",n.Name," ")}}var Hq=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(ye(1)).subscribe(i=>{this.model=new ur(i.data),this.api.getGoalHabits(r).pipe(ye(1)).subscribe(o=>{this.associatedHabits=o.data.map(a=>new E1(a))}),this.api.getGoalTasks(r).pipe(ye(1)).subscribe(o=>{this.associatedTasks=o.data.map(a=>new no(a))})})}};t.\u0275fac=function(i){return new(i||t)(W(Kn),W(Nt))},t.\u0275cmp=xe({type:t,selectors:[["app-goal-page"]],standalone:!0,features:[Ce],decls:18,vars:11,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right","uk-margin-small-top",3,"routerLink"],[1,"uk-button-danger","uk-button","uk-margin-small-top",3,"routerLink"],["class","uk-text-default"],[4,"ngFor","ngForOf"],[1,"uk-text-default"],[3,"routerLink"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),_(),V(2,"button",0),I(3),_(),V(4,"button",1),I(5),_(),Xe(6,Zde,2,1,"pre",2),V(7,"p"),I(8),mi(9,"date"),_(),V(10,"p"),I(11,"Associated Habits:"),_(),V(12,"ul"),Xe(13,Jde,3,2,"li",3),_(),V(14,"p"),I(15,"Associated Tasks:"),_(),V(16,"ul"),Xe(17,e7e,3,2,"li",3),_()),i&2&&(O(),ze("Goal: ",o.model==null?null:o.model.Name,""),O(),se("routerLink",o.model==null?null:o.model.EditUrl),O(),ze(" Edit: ",o.model==null?null:o.model.Name,`
`),O(),se("routerLink",o.model==null?null:o.model.DeleteUrl),O(),ze(" Delete: ",o.model==null?null:o.model.Name,`
`),O(),hi(6,o.model!=null&&o.model.Description?6:-1),O(2),ze(" Complete By: ",gi(9,9,o.model==null?null:o.model.CompleteBy),`
`),O(5),se("ngForOf",o.associatedHabits),O(4),se("ngForOf",o.associatedTasks))},dependencies:[hn,vi,Vo],encapsulation:2});let e=t;return e})();function t7e(e,t){if(e&1&&(b1(0),V(1,"p",10),I(2),_(),M1()),e&2){let n=qe().$implicit;O(2),ze(" ",n.Description," ")}}function n7e(e,t){if(e&1){let n=Z1();V(0,"tr")(1,"td")(2,"input",6),Yt("ngModelChange",function(i){let a=fi(n).$implicit;return tn(a.Completed,i)||(a.Completed=i),di(i)}),Re("change",function(){let o=fi(n).$implicit,a=qe();return di(a.updateGoal(o))}),_()(),V(3,"td")(4,"a",7),I(5),_()(),V(6,"td",3),Xe(7,t7e,3,1,"ng-container",8),_(),V(8,"td")(9,"a",9),I(10,"View"),_()()()}if(e&2){let n=t.$implicit;qe();let r=el(21);O(2),Wt("ngModel",n.Completed),O(2),se("routerLink",n.ViewUrl),O(),ze(" ",n.Name," "),O(2),se("ngIf",n.Description)("ngIfElse",r),O(2),se("routerLink",n.ViewUrl)}}function r7e(e,t){e&1&&(V(0,"i"),I(1,"No description provided."),_())}var Lq=(()=>{let t=class t{constructor(r){this.api=r,this.goals=[]}ngOnInit(){this.api.listGoals().pipe(ye(1)).subscribe(r=>{this.goals=r.data.map(i=>new ur(i))})}updateGoal(r){this.api.updateGoal(r).pipe(ye(1)).subscribe(i=>{r=new ur(i.data)})}};t.\u0275fac=function(i){return new(i||t)(W(Kn))},t.\u0275cmp=xe({type:t,selectors:[["app-goals-page"]],standalone:!0,features:[Ce],decls:22,vars:1,consts:[[1,"list-header"],["routerLink","/goals/new",1,"uk-button","uk-button-primary"],[1,"uk-table","uk-table-striped"],[1,"hide-in-mobile"],[4,"ngFor","ngForOf"],["defaultDescription",""],["type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange","change"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[4,"ngIf","ngIfElse"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],[1,"description"]],template:function(i,o){i&1&&(V(0,"div",0)(1,"h1"),I(2,"Goals"),_(),V(3,"section")(4,"nav")(5,"a",1),I(6,"New Goal"),_()()()(),V(7,"section")(8,"table",2)(9,"thead")(10,"tr"),gt(11,"th"),V(12,"th"),I(13,"Name"),_(),V(14,"th",3),I(15,"Description"),_(),V(16,"th"),I(17,"Action"),_()()(),V(18,"tbody"),Xe(19,n7e,11,6,"tr",4),_()()(),Xe(20,r7e,2,0,"ng-template",null,5,Fs)),i&2&&(O(19),se("ngForOf",o.goals))},dependencies:[hn,vi,Mr,ul,xi,Wr,w1],styles:["p.description[_ngcontent-%COMP%]{text-wrap:nowrap;padding-right:10rem;width:28rem;overflow:hidden}"]});let e=t;return e})();var U6=(()=>{let t=class t{constructor(){this.model={}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=Tt({type:t,selectors:[["app-abstract-form"]],inputs:{creating:"creating",model:"model"},standalone:!0});let e=t;return e})();function i7e(e,t){e&1&&(V(0,"h1"),I(1,"Create Goal"),_())}function o7e(e,t){if(e&1&&(V(0,"h1"),I(1),_()),e&2){let n=qe();O(),ze("Edit Goal: ",n.model.Name,"")}}var $g=(()=>{let t=class t extends U6{constructor(r,i){super(),this.api=r,this.router=i}submitForm(){let r=new ur(this.model);if(this.creating){this.api.createGoal(r).pipe(ye(1)).subscribe(()=>{this.router.navigate(["/goals"])});return}this.api.updateGoal(r).pipe(ye(1)).subscribe(()=>{this.router.navigate(r.ViewUrl)})}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString()}};t.\u0275fac=function(i){return new(i||t)(W(Kn),W(Qt))},t.\u0275cmp=xe({type:t,selectors:[["app-goal-form"]],standalone:!0,features:[cr,Ce],decls:14,vars:4,consts:[[1,"uk-form-label"],["name","name","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["name","description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","date",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(Xe(0,i7e,2,0,"h1")(1,o7e,2,1),V(2,"form")(3,"label",0),I(4," Goal Name "),V(5,"input",1),Yt("ngModelChange",function(s){return tn(o.model.Name,s)||(o.model.Name=s),s}),_()(),V(6,"label",0),I(7," Goal Description "),V(8,"textarea",2),Yt("ngModelChange",function(s){return tn(o.model.Description,s)||(o.model.Description=s),s}),_()(),V(9,"label",0),I(10," Complete By "),V(11,"input",3),Re("change",function(s){return o.updateCompleteBy(s)}),_()(),V(12,"button",4),Re("click",function(){return o.submitForm()}),I(13),_()()),i&2&&(hi(0,o.creating?0:1),O(5),Wt("ngModel",o.model.Name),O(3),Wt("ngModel",o.model.Description),O(5),ze(" ",o.creating?"Create":"Update"," Goal "))},dependencies:[Mr,_a,S1,xi,Na,Wr,w2]});let e=t;return e})();var Aq=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-new-goal-page"]],standalone:!0,features:[Ce],decls:1,vars:1,consts:[[3,"creating"]],template:function(i,o){i&1&&gt(0,"app-goal-form",0),i&2&&se("creating",!0)},dependencies:[$g],encapsulation:2});let e=t;return e})();var To=(()=>{let t=class t extends ko{constructor(r){super(),this.http=r}getHabits(){let r=Kt("/habits");return this.http.get(r)}getHabit(r){let i=Kt(`/habits/${r}`);return this.http.get(i)}createHabit(r){let i=Kt("/habits");return this.http.post(i,r)}updateHabit(r){let i=Kt(`/habits/${r.Id}`);return this.http.put(i,r)}deleteHabit(r){let i=Kt(`/habits/${r}`);return this.http.delete(i)}};t.\u0275fac=function(i){return new(i||t)(ge(Us))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();var Vq=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(ye(1)).subscribe(i=>{this.model=new E1(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteHabit(this.model?.Id).pipe(ye(1)).subscribe(()=>this.router.navigateByUrl("/"))}};t.\u0275fac=function(i){return new(i||t)(W(To),W(Nt),W(Qt))},t.\u0275cmp=xe({type:t,selectors:[["app-delete-habit-page"]],standalone:!0,features:[Ce],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),_(),V(2,"p"),I(3,` Deleting this model will make it unrecoverable.
`),_(),V(4,"button",0),Re("click",function(){return o.deleteModel()}),I(5),_()),i&2&&(O(),ze("Delete ",o.model==null?null:o.model.Name,"?"),O(4),ze(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();var Bg={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]};var Ug={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]};var Nq={$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:"container",data:{values:[]},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"date",timeUnit:"date",type:"ordinal",title:"Day",axis:{tickCount:{timeUnit:"day",step:1}}},y:{field:"date",timeUnit:"month",type:"ordinal",title:"Month",scale:{domain:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},color:{field:"count",type:"quantitative",title:"Count",condition:{test:"datum.count === 0",value:"transparent"},legend:null}}};var aH={};Cr(aH,{JsonPatchError:()=>An,_areEquals:()=>W5,applyOperation:()=>fl,applyPatch:()=>q6,applyReducer:()=>f7e,deepClone:()=>l7e,getValueByPointer:()=>Yg,validate:()=>kq,validator:()=>Xg});var s7e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),c7e=Object.prototype.hasOwnProperty;function qg(e,t){return c7e.call(e,t)}function Gg(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)qg(e,i)&&r.push(i);return r}function Yr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Wg(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Ta(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function q5(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function jg(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(jg(e[t]))return!0}else if(typeof e=="object"){for(var r=Gg(e),i=r.length,o=0;o<i;o++)if(jg(e[r[o]]))return!0}}return!1}function _q(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var G5=function(e){s7e(t,e);function t(n,r,i,o,a){var s=this.constructor,c=e.call(this,_q(n,{name:r,index:i,operation:o,tree:a}))||this;return c.name=r,c.index=i,c.operation=o,c.tree=a,Object.setPrototypeOf(c,s.prototype),c.message=_q(n,{name:r,index:i,operation:o,tree:a}),c}return t}(Error);var An=G5,l7e=Yr,j6={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Yg(n,this.path);r&&(r=Yr(r));var i=fl(n,{op:"remove",path:this.from}).removed;return fl(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Yg(n,this.from);return fl(n,{op:"add",path:this.path,value:Yr(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:W5(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},u7e={add:function(e,t,n){return Wg(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:j6.move,copy:j6.copy,test:j6.test,_get:j6._get};function Yg(e,t){if(t=="")return e;var n={op:"_get",path:t};return fl(e,n),n.value}function fl(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):Xg(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=Yg(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=W5(e,t.value),a.test===!1)throw new An("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new An("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}}else{r||(e=Yr(e));var s=t.path||"",c=s.split("/"),l=e,u=1,f=c.length,d=void 0,p=void 0,h=void 0;for(typeof n=="function"?h=n:h=Xg;;){if(p=c[u],p&&p.indexOf("~")!=-1&&(p=q5(p)),i&&(p=="__proto__"||p=="prototype"&&u>0&&c[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[p]===void 0?d=c.slice(0,u).join("/"):u==f-1&&(d=t.path),d!==void 0&&h(t,0,e,d)),u++,Array.isArray(l)){if(p==="-")p=l.length;else{if(n&&!Wg(p))throw new An("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);Wg(p)&&(p=~~p)}if(u>=f){if(n&&t.op==="add"&&p>l.length)throw new An("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var a=u7e[t.op].call(t,l,p,e);if(a.test===!1)throw new An("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(u>=f){var a=j6[t.op].call(t,l,p,e);if(a.test===!1)throw new An("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}if(l=l[p],n&&u<f&&(!l||typeof l!="object"))throw new An("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function q6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new An("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Yr(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=fl(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function f7e(e,t,n){var r=fl(e,t);if(r.test===!1)throw new An("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Xg(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new An("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(j6[e.op]){if(typeof e.path!="string")throw new An("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new An('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new An("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new An("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&jg(e.value))throw new An("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new An("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new An("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},s=kq([a],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new An("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new An("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function kq(e,t,n){try{if(!Array.isArray(e))throw new An("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)q6(Yr(t),Yr(e),n||!0);else{n=n||Xg;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof An)return i;throw i}}function W5(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,a;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!W5(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var s=Object.keys(e);if(o=s.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(s[i]))return!1;for(i=o;i--!==0;)if(a=s[i],!W5(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}var uH={};Cr(uH,{compare:()=>x7e,generate:()=>sH,observe:()=>y7e,unobserve:()=>v7e});var cH=new WeakMap,d7e=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),p7e=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function h7e(e){return cH.get(e)}function m7e(e,t){return e.observers.get(t)}function g7e(e,t){e.observers.delete(t.callback)}function v7e(e,t){t.unobserve()}function y7e(e,t){var n=[],r,i=h7e(e);if(!i)i=new d7e(e),cH.set(e,i);else{var o=m7e(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Yr(e),t){r.callback=t,r.next=null;var a=function(){sH(r)},s=function(){clearTimeout(r.next),r.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return r.patches=n,r.object=e,r.unobserve=function(){sH(r),clearTimeout(r.next),g7e(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},i.observers.set(t,new p7e(t,r)),r}function sH(e,t){t===void 0&&(t=!1);var n=cH.get(e.object);lH(n.value,e.object,e.patches,"",t),e.patches.length&&q6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function lH(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=Gg(t),a=Gg(e),s=!1,c=!1,l=a.length-1;l>=0;l--){var u=a[l],f=e[u];if(qg(t,u)&&!(t[u]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof f=="object"&&f!=null&&typeof d=="object"&&d!=null&&Array.isArray(f)===Array.isArray(d)?lH(f,d,n,r+"/"+Ta(u),i):f!==d&&(s=!0,i&&n.push({op:"test",path:r+"/"+Ta(u),value:Yr(f)}),n.push({op:"replace",path:r+"/"+Ta(u),value:Yr(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Ta(u),value:Yr(f)}),n.push({op:"remove",path:r+"/"+Ta(u)}),c=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}),s=!0)}if(!(!c&&o.length==a.length))for(var l=0;l<o.length;l++){var u=o[l];!qg(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Ta(u),value:Yr(t[u])})}}}function x7e(e,t,n){n===void 0&&(n=!1);var r=[];return lH(e,t,r,"",n),r}var QYe=Object.assign({},aH,uH,{JsonPatchError:G5,deepClone:Yr,escapePathComponent:Ta,unescapePathComponent:q5});var xw=Jae(Iq());var mI={};Cr(mI,{Bounds:()=>Nn,CanvasHandler:()=>hc,CanvasRenderer:()=>V7,DATE:()=>Ji,DAY:()=>Xr,DAYOFYEAR:()=>Pa,Dataflow:()=>N3,Debug:()=>dH,Error:()=>X5,EventStream:()=>cu,Gradient:()=>$V,GroupItem:()=>I7,HOURS:()=>L1,Handler:()=>J3,HybridHandler:()=>hN,HybridRenderer:()=>sx,Info:()=>fH,Item:()=>T7,MILLISECONDS:()=>$o,MINUTES:()=>A1,MONTH:()=>Qr,Marks:()=>n1,MultiPulse:()=>zv,None:()=>Oq,Operator:()=>It,Parameters:()=>_d,Pulse:()=>oc,QUARTER:()=>Zi,RenderType:()=>mc,Renderer:()=>so,ResourceLoader:()=>qV,SECONDS:()=>oo,SVGHandler:()=>sN,SVGRenderer:()=>vx,SVGStringRenderer:()=>pN,Scenegraph:()=>gx,TIME_UNITS:()=>pv,Transform:()=>$,View:()=>BT,WEEK:()=>Zn,Warn:()=>Zg,YEAR:()=>Sr,accessor:()=>Ci,accessorFields:()=>fr,accessorName:()=>un,array:()=>te,ascending:()=>td,bandwidthNRD:()=>Vv,bin:()=>kL,bootstrapCI:()=>TL,boundClip:()=>gN,boundContext:()=>F7,boundItem:()=>_V,boundMark:()=>xQ,boundStroke:()=>Za,changeset:()=>sc,clampRange:()=>xH,codegenExpression:()=>zC,compare:()=>ed,constant:()=>mn,cumulativeLogNormal:()=>Fv,cumulativeNormal:()=>Id,cumulativeUniform:()=>$v,dayofyear:()=>sL,debounce:()=>nd,defaultLocale:()=>Ld,definition:()=>Hv,densityLogNormal:()=>Iv,densityNormal:()=>Nv,densityUniform:()=>Pv,domChild:()=>gr,domClear:()=>Wo,domCreate:()=>W3,domFind:()=>aN,dotbin:()=>IL,error:()=>B,expressionFunction:()=>In,extend:()=>ke,extent:()=>Yi,extentIndex:()=>CH,falsy:()=>Xs,fastmap:()=>b3,field:()=>wr,flush:()=>bH,font:()=>hx,fontFamily:()=>P7,fontSize:()=>Ja,format:()=>Cv,formatLocale:()=>Hd,formats:()=>zL,hasOwnProperty:()=>de,id:()=>G6,identity:()=>Vn,inferType:()=>iW,inferTypes:()=>oW,ingest:()=>lt,inherits:()=>ee,inrange:()=>M3,interpolate:()=>x7,interpolateColors:()=>Eu,interpolateRange:()=>Fy,intersect:()=>mN,intersectBoxLine:()=>zu,intersectPath:()=>GV,intersectPoint:()=>WV,intersectRule:()=>cQ,isArray:()=>F,isBoolean:()=>D1,isDate:()=>E2,isFunction:()=>Ie,isIterable:()=>MH,isNumber:()=>Pe,isObject:()=>ne,isRegExp:()=>wH,isString:()=>Q,isTuple:()=>wl,key:()=>rd,lerp:()=>SH,lineHeight:()=>K3,loader:()=>au,locale:()=>yv,logger:()=>Q5,lruCache:()=>EH,markup:()=>dN,merge:()=>DH,mergeConfig:()=>Fa,multiLineOffset:()=>px,one:()=>Ia,pad:()=>zH,panLinear:()=>pH,panLog:()=>hH,panPow:()=>mH,panSymlog:()=>gH,parse:()=>bne,parseExpression:()=>rf,parseSelector:()=>Ai,path:()=>zl,pathCurves:()=>BV,pathEqual:()=>QQ,pathParse:()=>Wl,pathRectangle:()=>rQ,pathRender:()=>Hu,pathSymbols:()=>nQ,pathTrail:()=>iQ,peek:()=>Ge,point:()=>$7,projection:()=>dp,quantileLogNormal:()=>Rv,quantileNormal:()=>Fd,quantileUniform:()=>Bv,quantiles:()=>Lv,quantizeInterpolator:()=>Ry,quarter:()=>vH,quartiles:()=>Av,random:()=>e1,randomInteger:()=>kme,randomKDE:()=>kv,randomLCG:()=>_me,randomLogNormal:()=>FL,randomMixture:()=>RL,randomNormal:()=>_v,randomUniform:()=>OL,read:()=>LL,regressionConstant:()=>Uv,regressionExp:()=>$L,regressionLinear:()=>qv,regressionLoess:()=>jL,regressionLog:()=>PL,regressionPoly:()=>UL,regressionPow:()=>BL,regressionQuad:()=>Gv,renderModule:()=>B7,repeat:()=>Y5,resetDefaultLocale:()=>eW,resetSVGClipId:()=>aQ,resetSVGDefIds:()=>yxe,responseType:()=>HL,runtimeContext:()=>NC,sampleCurve:()=>uu,sampleLogNormal:()=>Tv,sampleNormal:()=>Td,sampleUniform:()=>Ov,scale:()=>dt,sceneEqual:()=>vN,sceneFromJSON:()=>bQ,scenePickVisit:()=>Zy,sceneToJSON:()=>CQ,sceneVisit:()=>_2,sceneZOrder:()=>YV,scheme:()=>C7,serializeXML:()=>RQ,setHybridRendererOptions:()=>hxe,setRandom:()=>Vme,span:()=>Ks,splitAccessPath:()=>Io,stringValue:()=>Z,textMetrics:()=>V1,timeBin:()=>vL,timeFloor:()=>fL,timeFormatLocale:()=>Ml,timeInterval:()=>nc,timeOffset:()=>pL,timeSequence:()=>mL,timeUnitSpecifier:()=>oL,timeUnits:()=>hv,toBoolean:()=>id,toDate:()=>od,toNumber:()=>Bn,toSet:()=>pr,toString:()=>ad,transform:()=>_L,transforms:()=>ac,truncate:()=>HH,truthy:()=>dr,tupleid:()=>De,typeParsers:()=>SL,utcFloor:()=>dL,utcInterval:()=>rc,utcOffset:()=>hL,utcSequence:()=>gL,utcdayofyear:()=>lL,utcquarter:()=>yH,utcweek:()=>uL,version:()=>AAe,visitArray:()=>Zs,week:()=>cL,writeConfig:()=>Qs,zero:()=>S2,zoomLinear:()=>K5,zoomLog:()=>Z5,zoomPow:()=>W6,zoomSymlog:()=>J5});function Ci(e,t,n){return e.fields=t||[],e.fname=n,e}function un(e){return e==null?null:e.fname}function fr(e){return e==null?null:e.fields}function Rq(e){return e.length===1?b7e(e[0]):M7e(e)}var b7e=e=>function(t){return t[e]},M7e=e=>{let t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function B(e){throw Error(e)}function Io(e){let t=[],n=e.length,r=null,i=0,o="",a,s,c;e=e+"";function l(){t.push(o+e.substring(a,s)),o="",a=s+1}for(a=s=0;s<n;++s)if(c=e[s],c==="\\")o+=e.substring(a,s++),a=s;else if(c===r)l(),r=null,i=-1;else{if(r)continue;a===i&&c==='"'||a===i&&c==="'"?(a=s+1,r=c):c==="."&&!i?s>a?l():a=s+1:c==="["?(s>a&&l(),i=a=s+1):c==="]"&&(i||B("Access path missing open bracket: "+e),i>0&&l(),i=0,a=s+1)}return i&&B("Access path missing closing bracket: "+e),r&&B("Access path missing closing quote: "+e),s>a&&(s++,l()),t}function wr(e,t,n){let r=Io(e);return e=r.length===1?r[0]:e,Ci((n&&n.get||Rq)(r),[e],t||e)}var G6=wr("id"),Vn=Ci(e=>e,[],"identity"),S2=Ci(()=>0,[],"zero"),Ia=Ci(()=>1,[],"one"),dr=Ci(()=>!0,[],"true"),Xs=Ci(()=>!1,[],"false");function w7e(e,t,n){let r=[t].concat([].slice.call(n));console[e].apply(console,r)}var Oq=0,X5=1,Zg=2,fH=3,dH=4;function Q5(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:w7e,r=e||Oq;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=X5&&n(t||"error","ERROR",arguments),this},warn(){return r>=Zg&&n(t||"warn","WARN",arguments),this},info(){return r>=fH&&n(t||"log","INFO",arguments),this},debug(){return r>=dH&&n(t||"log","DEBUG",arguments),this}}}var F=Array.isArray;function ne(e){return e===Object(e)}var Fq=e=>e!=="__proto__";function Fa(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(let o in i)if(o==="signals")r.signals=S7e(r.signals,i.signals);else{let a=o==="legend"?{layout:1}:o==="style"?!0:null;Qs(r,o,i[o],a)}return r},{})}function Qs(e,t,n,r){if(!Fq(t))return;let i,o;if(ne(n)&&!F(n)){o=ne(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Qs(o,i,n[i]):Fq(i)&&(o[i]=n[i])}else e[t]=n}function S7e(e,t){if(e==null)return t;let n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function Ge(e){return e[e.length-1]}function Bn(e){return e==null||e===""?null:+e}var Pq=e=>t=>e*Math.exp(t),$q=e=>t=>Math.log(e*t),Bq=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),Uq=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Kg=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Jg(e,t,n,r){let i=n(e[0]),o=n(Ge(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function pH(e,t){return Jg(e,t,Bn,Vn)}function hH(e,t){var n=Math.sign(e[0]);return Jg(e,t,$q(n),Pq(n))}function mH(e,t,n){return Jg(e,t,Kg(n),Kg(1/n))}function gH(e,t,n){return Jg(e,t,Bq(n),Uq(n))}function ev(e,t,n,r,i){let o=r(e[0]),a=r(Ge(e)),s=t!=null?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function K5(e,t,n){return ev(e,t,n,Bn,Vn)}function Z5(e,t,n){let r=Math.sign(e[0]);return ev(e,t,n,$q(r),Pq(r))}function W6(e,t,n,r){return ev(e,t,n,Kg(r),Kg(1/r))}function J5(e,t,n,r){return ev(e,t,n,Bq(r),Uq(r))}function vH(e){return 1+~~(new Date(e).getMonth()/3)}function yH(e){return 1+~~(new Date(e).getUTCMonth()/3)}function te(e){return e!=null?F(e)?e:[e]:[]}function xH(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Ie(e){return typeof e=="function"}var E7e="descending";function ed(e,t,n){n=n||{},t=te(t)||[];let r=[],i=[],o={},a=n.comparator||D7e;return te(e).forEach((s,c)=>{s!=null&&(r.push(t[c]===E7e?-1:1),i.push(s=Ie(s)?s:wr(s,null,n)),(fr(s)||[]).forEach(l=>o[l]=1))}),i.length===0?null:Ci(a(i,r),Object.keys(o))}var td=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),D7e=(e,t)=>e.length===1?z7e(e[0],t[0]):H7e(e,t,e.length),z7e=(e,t)=>function(n,r){return td(e(n),e(r))*t},H7e=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;a===0&&++s<n;)o=e[s],a=td(o(r),o(i));return a*t[s]});function mn(e){return Ie(e)?e:()=>e}function nd(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function ke(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Yi(e,t){let n=0,r,i,o,a;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=a=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>a&&(a=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=a=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>a&&(a=i))}return[o,a]}function CH(e,t){let n=e.length,r=-1,i,o,a,s,c;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=c=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,c=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=c=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,c=r))}return[s,c]}var L7e=Object.prototype.hasOwnProperty;function de(e,t){return L7e.call(e,t)}var Qg={};function b3(e){let t={},n;function r(o){return de(t,o)&&t[o]!==Qg}let i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,a){return r(o)||(++i.size,t[o]===Qg&&--i.empty),t[o]=a,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=Qg),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){let o={},a=0;for(let s in t){let c=t[s];c!==Qg&&(!n||!n(c))&&(o[s]=c,++a)}i.size=a,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function bH(e,t,n,r,i,o){if(!n&&n!==0)return o;let a=+n,s=e[0],c=Ge(e),l;c<s&&(l=s,s=c,c=l),l=Math.abs(t-s);let u=Math.abs(c-t);return l<u&&l<=a?r:u<=a?i:o}function ee(e,t,n){let r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),ke(r,n)}function M3(e,t,n,r){let i=t[0],o=t[t.length-1],a;return i>o&&(a=i,i=o,o=a),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function D1(e){return typeof e=="boolean"}function E2(e){return Object.prototype.toString.call(e)==="[object Date]"}function MH(e){return e&&Ie(e[Symbol.iterator])}function Pe(e){return typeof e=="number"}function wH(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Q(e){return typeof e=="string"}function rd(e,t,n){e&&(e=t?te(e).map(s=>s.replace(/\\(.)/g,"$1")):te(e));let r=e&&e.length,i=n&&n.get||Rq,o=s=>i(t?[s]:Io(s)),a;if(!r)a=function(){return""};else if(r===1){let s=o(e[0]);a=function(c){return""+s(c)}}else{let s=e.map(o);a=function(c){let l=""+s[0](c),u=0;for(;++u<r;)l+="|"+s[u](c);return l}}return Ci(a,e,"key")}function SH(e,t){let n=e[0],r=Ge(e),i=+t;return i?i===1?r:n+i*(r-n):n}var A7e=1e4;function EH(e){e=+e||A7e;let t,n,r,i=()=>{t={},n={},r=0},o=(a,s)=>(++r>e&&(n=t,t={},r=1),t[a]=s);return i(),{clear:i,has:a=>de(t,a)||de(n,a),get:a=>de(t,a)?t[a]:de(n,a)?o(a,n[a]):void 0,set:(a,s)=>de(t,a)?t[a]=s:o(a,s)}}function DH(e,t,n,r){let i=t.length,o=n.length;if(!o)return t;if(!i)return n;let a=r||new t.constructor(i+o),s=0,c=0,l=0;for(;s<i&&c<o;++l)a[l]=e(t[s],n[c])>0?n[c++]:t[s++];for(;s<i;++s,++l)a[l]=t[s];for(;c<o;++c,++l)a[l]=n[c];return a}function Y5(e,t){let n="";for(;--t>=0;)n+=e;return n}function zH(e,t,n,r){let i=n||" ",o=e+"",a=t-o.length;return a<=0?o:r==="left"?Y5(i,a)+o:r==="center"?Y5(i,~~(a/2))+o+Y5(i,Math.ceil(a/2)):o+Y5(i,a)}function Ks(e){return e&&Ge(e)-e[0]||0}function Z(e){return F(e)?"["+e.map(Z)+"]":ne(e)||Q(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function id(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}var V7e=e=>Pe(e)||E2(e)?e:Date.parse(e);function od(e,t){return t=t||V7e,e==null||e===""?null:t(e)}function ad(e){return e==null||e===""?null:e+""}function pr(e){let t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function HH(e,t,n,r){let i=r??"\u2026",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:n==="left"?i+o.slice(a-s):n==="center"?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function Zs(e,t,n){if(e)if(t){let r=e.length;for(let i=0;i<r;++i){let o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var jq={},LH={},AH=34,sd=10,VH=13;function Gq(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function N7e(e,t){var n=Gq(e);return function(r,i){return t(n(r),i,e)}}function qq(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function z1(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function _7e(e){return e<0?"-"+z1(-e,6):e>9999?"+"+z1(e,6):z1(e,4)}function k7e(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":_7e(e.getUTCFullYear(),4)+"-"+z1(e.getUTCMonth()+1,2)+"-"+z1(e.getUTCDate(),2)+(i?"T"+z1(t,2)+":"+z1(n,2)+":"+z1(r,2)+"."+z1(i,3)+"Z":r?"T"+z1(t,2)+":"+z1(n,2)+":"+z1(r,2)+"Z":n||t?"T"+z1(t,2)+":"+z1(n,2)+"Z":"")}function NH(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var p,h,m=i(f,function(g,v){if(p)return p(g,v-1);h=g,p=d?N7e(g,d):Gq(g)});return m.columns=h||[],m}function i(f,d){var p=[],h=f.length,m=0,g=0,v,y=h<=0,C=!1;f.charCodeAt(h-1)===sd&&--h,f.charCodeAt(h-1)===VH&&--h;function b(){if(y)return LH;if(C)return C=!1,jq;var S,w=m,E;if(f.charCodeAt(w)===AH){for(;m++<h&&f.charCodeAt(m)!==AH||f.charCodeAt(++m)===AH;);return(S=m)>=h?y=!0:(E=f.charCodeAt(m++))===sd?C=!0:E===VH&&(C=!0,f.charCodeAt(m)===sd&&++m),f.slice(w+1,S-1).replace(/""/g,'"')}for(;m<h;){if((E=f.charCodeAt(S=m++))===sd)C=!0;else if(E===VH)C=!0,f.charCodeAt(m)===sd&&++m;else if(E!==n)continue;return f.slice(w,S)}return y=!0,f.slice(w,h)}for(;(v=b())!==LH;){for(var M=[];v!==jq&&v!==LH;)M.push(v),v=b();d&&(M=d(M,g++))==null||p.push(M)}return p}function o(f,d){return f.map(function(p){return d.map(function(h){return u(p[h])}).join(e)})}function a(f,d){return d==null&&(d=qq(f)),[d.map(u).join(e)].concat(o(f,d)).join(`
`)}function s(f,d){return d==null&&(d=qq(f)),o(f,d).join(`
`)}function c(f){return f.map(l).join(`
`)}function l(f){return f.map(u).join(e)}function u(f){return f==null?"":f instanceof Date?k7e(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:c,formatRow:l,formatValue:u}}function _H(e){return e}function tv(e){if(e==null)return _H;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(s,c){c||(t=n=0);var l=2,u=s.length,f=new Array(u);for(f[0]=(t+=s[0])*r+o,f[1]=(n+=s[1])*i+a;l<u;)f[l]=s[l],++l;return f}}function Wq(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function kH(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Yq(e,n)})}:Yq(e,t)}function Yq(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=nv(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function nv(e,t){var n=tv(e.transform),r=e.arcs;function i(u,f){f.length&&f.pop();for(var d=r[u<0?~u:u],p=0,h=d.length;p<h;++p)f.push(n(d[p],p));u<0&&Wq(f,h)}function o(u){return n(u)}function a(u){for(var f=[],d=0,p=u.length;d<p;++d)i(u[d],f);return f.length<2&&f.push(f[0]),f}function s(u){for(var f=a(u);f.length<4;)f.push(f[0]);return f}function c(u){return u.map(s)}function l(u){var f=u.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(l)};case"Point":d=o(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(o);break;case"LineString":d=a(u.arcs);break;case"MultiLineString":d=u.arcs.map(a);break;case"Polygon":d=c(u.arcs);break;case"MultiPolygon":d=u.arcs.map(c);break;default:return null}return{type:f,coordinates:d}}return l(t)}function TH(e,t){var n={},r={},i={},o=[],a=-1;t.forEach(function(l,u){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++a],t[a]=l,t[u]=d)}),t.forEach(function(l){var u=s(l),f=u[0],d=u[1],p,h;if(p=i[f])if(delete i[p.end],p.push(l),p.end=d,h=r[d]){delete r[h.start];var m=h===p?p:p.concat(h);r[m.start=p.start]=i[m.end=h.end]=m}else r[p.start]=i[p.end]=p;else if(p=r[d])if(delete r[p.start],p.unshift(l),p.start=f,h=i[f]){delete i[h.end];var g=h===p?p:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[p.start]=i[p.end]=p;else p=[l],r[p.start=f]=i[p.end=d]=p});function s(l){var u=e.arcs[l<0?~l:l],f=u[0],d;return e.transform?(d=[0,0],u.forEach(function(p){d[0]+=p[0],d[1]+=p[1]})):d=u[u.length-1],l<0?[d,f]:[f,d]}function c(l,u){for(var f in l){var d=l[f];delete u[d.start],delete d.start,delete d.end,d.forEach(function(p){n[p<0?~p:p]=1}),o.push(d)}}return c(i,r),c(r,i),t.forEach(function(l){n[l<0?~l:l]||o.push([l])}),o}function IH(e){return nv(e,Xq.apply(this,arguments))}function Xq(e,t,n){var r,i,o;if(arguments.length>1)r=T7e(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:TH(e,r)}}function T7e(e,t,n){var r=[],i=[],o;function a(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function s(f){f.forEach(a)}function c(f){f.forEach(s)}function l(f){f.forEach(c)}function u(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(u);break;case"LineString":s(f.arcs);break;case"MultiLineString":case"Polygon":c(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return u(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function bi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function FH(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ro(e){let t,n,r;e.length!==2?(t=bi,n=(s,c)=>bi(e(s),c),r=(s,c)=>e(s)-c):(t=e===bi||e===FH?e:R7e,n=e,r=e);function i(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{let f=l+u>>>1;n(s[f],c)<0?l=f+1:u=f}while(l<u)}return l}function o(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{let f=l+u>>>1;n(s[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function a(s,c,l=0,u=s.length){let f=i(s,c,l,u-1);return f>l&&r(s[f-1],c)>-r(s[f],c)?f-1:f}return{left:i,center:a,right:o}}function R7e(){return 0}function cd(e){return e===null?NaN:+e}function*Qq(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}var Kq=ro(bi),dl=Kq.right,RH=Kq.left,O7e=ro(cd).center,D2=dl;function OH(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i))}if(n>1)return o/(n-1)}function rv(e,t){let n=OH(e,t);return n&&Math.sqrt(n)}var gn=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){let n=this._partials,r=0;for(let i=0;i<this._n&&i<32;i++){let o=n[i],a=t+o,s=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);s&&(n[r++]=s),t=a}return n[r]=t,this._n=r+1,this}valueOf(){let t=this._partials,n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}};var Y6=class extends Map{constructor(t,n=eG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let[r,i]of t)this.set(r,i)}get(t){return super.get(PH(this,t))}has(t){return super.has(PH(this,t))}set(t,n){return super.set(Zq(this,t),n)}delete(t){return super.delete(Jq(this,t))}},Js=class extends Set{constructor(t,n=eG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let r of t)this.add(r)}has(t){return super.has(PH(this,t))}add(t){return super.add(Zq(this,t))}delete(t){return super.delete(Jq(this,t))}};function PH({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function Zq({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Jq({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function eG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function iv(e,t){return Array.from(t,n=>e[n])}function tG(e=bi){if(e===bi)return $H;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{let r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function $H(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var P7e=Math.sqrt(50),$7e=Math.sqrt(10),B7e=Math.sqrt(2);function ov(e,t,n){let r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=P7e?10:o>=$7e?5:o>=B7e?2:1,s,c,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(e*l),c=Math.round(t*l),s/l<e&&++s,c/l>t&&--c,l=-l):(l=Math.pow(10,i)*a,s=Math.round(e/l),c=Math.round(t/l),s*l<e&&++s,c*l>t&&--c),c<s&&.5<=n&&n<2?ov(e,t,n*2):[s,c,l]}function pl(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];let r=t<e,[i,o,a]=r?ov(t,e,n):ov(e,t,n);if(!(o>=i))return[];let s=o-i+1,c=new Array(s);if(r)if(a<0)for(let l=0;l<s;++l)c[l]=(o-l)/-a;else for(let l=0;l<s;++l)c[l]=(o-l)*a;else if(a<0)for(let l=0;l<s;++l)c[l]=(i+l)/-a;else for(let l=0;l<s;++l)c[l]=(i+l)*a;return c}function ld(e,t,n){return t=+t,e=+e,n=+n,ov(e,t,n)[2]}function Xi(e,t,n){t=+t,e=+e,n=+n;let r=t<e,i=r?ld(t,e,n):ld(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Fo(e,t){let n;if(t===void 0)for(let r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function hl(e,t){let n;if(t===void 0)for(let r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function av(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?$H:tG(i);r>n;){if(r-n>600){let c=r-n+1,l=t-n+1,u=Math.log(c),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(c-f)/c)*(l-c/2<0?-1:1),p=Math.max(n,Math.floor(t-l*f/c+d)),h=Math.min(r,Math.floor(t+(c-l)*f/c+d));av(e,t,p,h,i)}let o=e[t],a=n,s=r;for(ud(e,n,t),i(e[r],o)>0&&ud(e,n,r);a<s;){for(ud(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}i(e[n],o)===0?ud(e,n,s):(++s,ud(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function ud(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function ml(e,t,n){if(e=Float64Array.from(Qq(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return hl(e);if(t>=1)return Fo(e);var r,i=(r-1)*t,o=Math.floor(i),a=Fo(av(e,o).subarray(0,o+1)),s=hl(e.subarray(o+1));return a+(s-a)*(i-o)}}function fd(e,t,n=cd){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(i-o)}}function sv(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function X6(e,t){return ml(e,.5,t)}function*j7e(e){for(let t of e)yield*VR(t)}function Q6(e){return Array.from(j7e(e))}function Un(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function K6(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function cv(e,...t){e=new Js(e),t=t.map(q7e);e:for(let n of e)for(let r of t)if(!r.has(n)){e.delete(n);continue e}return e}function q7e(e){return e instanceof Js?e:new Js(e)}function lv(...e){let t=new Js;for(let n of e)for(let r of n)t.add(r);return t}function nG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function gl(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Ra(e){return e=gl(Math.abs(e)),e?e[1]:NaN}function rG(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function iG(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var G7e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function io(e){if(!(t=G7e.exec(e)))throw new Error("invalid format: "+e);var t;return new uv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}io.prototype=uv.prototype;function uv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}uv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oG(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var BH;function aG(e,t){var n=gl(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(BH=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+gl(e,Math.max(0,t+o-1))[0]}function UH(e,t){var n=gl(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var jH={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:nG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>UH(e*100,t),r:UH,s:aG,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function qH(e){return e}var sG=Array.prototype.map,cG=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function dd(e){var t=e.grouping===void 0||e.thousands===void 0?qH:rG(sG.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?qH:iG(sG.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(f){f=io(f);var d=f.fill,p=f.align,h=f.sign,m=f.symbol,g=f.zero,v=f.width,y=f.comma,C=f.precision,b=f.trim,M=f.type;M==="n"?(y=!0,M="g"):jH[M]||(C===void 0&&(C=12),b=!0,M="g"),(g||d==="0"&&p==="=")&&(g=!0,d="0",p="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",w=m==="$"?r:/[%p]/.test(M)?a:"",E=jH[M],D=/[defgprs%]/.test(M);C=C===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function z(H){var j=S,L=w,N,A,T;if(M==="c")L=E(H)+L,H="";else{H=+H;var G=H<0||1/H<0;if(H=isNaN(H)?c:E(Math.abs(H),C),b&&(H=oG(H)),G&&+H==0&&h!=="+"&&(G=!1),j=(G?h==="("?h:s:h==="-"||h==="("?"":h)+j,L=(M==="s"?cG[8+BH/3]:"")+L+(G&&h==="("?")":""),D){for(N=-1,A=H.length;++N<A;)if(T=H.charCodeAt(N),48>T||T>57){L=(T===46?i+H.slice(N+1):H.slice(N))+L,H=H.slice(0,N);break}}}y&&!g&&(H=t(H,1/0));var X=j.length+H.length+L.length,J=X<v?new Array(v-X+1).join(d):"";switch(y&&g&&(H=t(J+H,J.length?v-L.length:1/0),J=""),p){case"<":H=j+H+L+J;break;case"=":H=j+J+H+L;break;case"^":H=J.slice(0,X=J.length>>1)+j+H+L+J.slice(X);break;default:H=J+j+H+L;break}return o(H)}return z.toString=function(){return f+""},z}function u(f,d){var p=l((f=io(f),f.type="f",f)),h=Math.max(-8,Math.min(8,Math.floor(Ra(d)/3)))*3,m=Math.pow(10,-h),g=cG[8+h/3];return function(v){return p(m*v)+g}}return{format:l,formatPrefix:u}}var fv,w3,Z6;GH({thousands:",",grouping:[3],currency:["$",""]});function GH(e){return fv=dd(e),w3=fv.format,Z6=fv.formatPrefix,fv}function pd(e){return Math.max(0,-Ra(Math.abs(e)))}function hd(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ra(t)/3)))*3-Ra(Math.abs(e)))}function md(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ra(t)-Ra(e))+1}var WH=new Date,YH=new Date;function Zt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{let a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{let c=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return c;let l;do c.push(l=new Date(+o)),t(o,s),e(o);while(l<o&&o<a);return c},i.filter=o=>Zt(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(WH.setTime(+o),YH.setTime(+a),e(WH),e(YH),Math.floor(n(WH,YH))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}var z2=Zt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);z2.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Zt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):z2);var lG=z2.range;var Mi=Zt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*1e3)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds()),uG=Mi.range;var S3=Zt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getMinutes()),W7e=S3.range,E3=Zt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes()),Y7e=E3.range;var D3=Zt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3-e.getMinutes()*6e4)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getHours()),X7e=D3.range,z3=Zt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours()),Q7e=z3.range;var H1=Zt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1),K7e=H1.range,Ro=Zt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1),Z7e=Ro.range,dv=Zt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5)),J7e=dv.range;function xl(e){return Zt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/6048e5)}var Oo=xl(0),J6=xl(1),dG=xl(2),pG=xl(3),H3=xl(4),hG=xl(5),mG=xl(6),gG=Oo.range,epe=J6.range,tpe=dG.range,npe=pG.range,rpe=H3.range,ipe=hG.range,ope=mG.range;function Cl(e){return Zt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/6048e5)}var Po=Cl(0),eu=Cl(1),vG=Cl(2),yG=Cl(3),L3=Cl(4),xG=Cl(5),CG=Cl(6),bG=Po.range,ape=eu.range,spe=vG.range,cpe=yG.range,lpe=L3.range,upe=xG.range,fpe=CG.range;var ec=Zt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),dpe=ec.range,tc=Zt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),ppe=tc.range;var Qi=Zt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});var hpe=Qi.range,Ki=Zt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ki.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});var mpe=Ki.range;function wG(e,t,n,r,i,o){let a=[[Mi,1,1e3],[Mi,5,5*1e3],[Mi,15,15*1e3],[Mi,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[r,1,864e5],[r,2,2*864e5],[n,1,6048e5],[t,1,2592e6],[t,3,3*2592e6],[e,1,31536e6]];function s(l,u,f){let d=u<l;d&&([l,u]=[u,l]);let p=f&&typeof f.range=="function"?f:c(l,u,f),h=p?p.range(l,+u+1):[];return d?h.reverse():h}function c(l,u,f){let d=Math.abs(u-l)/f,p=ro(([,,g])=>g).right(a,d);if(p===a.length)return e.every(Xi(l/31536e6,u/31536e6,f));if(p===0)return z2.every(Math.max(Xi(l,u,f),1));let[h,m]=a[d/a[p-1][2]<a[p][2]/d?p-1:p];return h.every(m)}return[s,c]}var[XH,QH]=wG(Ki,tc,Po,dv,z3,E3),[KH,ZH]=wG(Qi,ec,Oo,H1,D3,S3);var Sr="year",Zi="quarter",Qr="month",Zn="week",Ji="date",Xr="day",Pa="dayofyear",L1="hours",A1="minutes",oo="seconds",$o="milliseconds",pv=[Sr,Zi,Qr,Zn,Ji,Xr,Pa,L1,A1,oo,$o],JH=pv.reduce((e,t,n)=>(e[t]=1+n,e),{});function hv(e){let t=te(e).slice(),n={};return t.length||B("Missing time unit."),t.forEach(i=>{de(JH,i)?n[i]=1:B(`Invalid time unit: ${i}.`)}),(n[Zn]||n[Xr]?1:0)+(n[Zi]||n[Qr]||n[Ji]?1:0)+(n[Pa]?1:0)>1&&B(`Incompatible time units: ${e}`),t.sort((i,o)=>JH[i]-JH[o]),t}var vpe={[Sr]:"%Y ",[Zi]:"Q%q ",[Qr]:"%b ",[Ji]:"%d ",[Zn]:"W%U ",[Xr]:"%a ",[Pa]:"%j ",[L1]:"%H:00",[A1]:"00:%M",[oo]:":%S",[$o]:".%L",[`${Sr}-${Qr}`]:"%Y-%m ",[`${Sr}-${Qr}-${Ji}`]:"%Y-%m-%d ",[`${L1}-${A1}`]:"%H:%M"};function oL(e,t){let n=ke({},vpe,t),r=hv(e),i=r.length,o="",a=0,s,c;for(a=0;a<i;)for(s=r.length;s>a;--s)if(c=r.slice(a,s).join("-"),n[c]!=null){o+=n[c],a=s;break}return o.trim()}var bl=new Date;function aL(e){return bl.setFullYear(e),bl.setMonth(0),bl.setDate(1),bl.setHours(0,0,0,0),bl}function sL(e){return DG(new Date(e))}function cL(e){return eL(new Date(e))}function DG(e){return H1.count(aL(e.getFullYear())-1,e)}function eL(e){return Oo.count(aL(e.getFullYear())-1,e)}function tL(e){return aL(e).getDay()}function ype(e,t,n,r,i,o,a){if(0<=e&&e<100){let s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function lL(e){return zG(new Date(e))}function uL(e){return nL(new Date(e))}function zG(e){let t=Date.UTC(e.getUTCFullYear(),0,1);return Ro.count(t-1,e)}function nL(e){let t=Date.UTC(e.getUTCFullYear(),0,1);return Po.count(t-1,e)}function rL(e){return bl.setTime(Date.UTC(e,0,1)),bl.getUTCDay()}function xpe(e,t,n,r,i,o,a){if(0<=e&&e<100){let s=new Date(Date.UTC(-1,t,n,r,i,o,a));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(e,t,n,r,i,o,a))}function HG(e,t,n,r,i){let o=t||1,a=Ge(e),s=(v,y,C)=>(C=C||v,Cpe(n[C],r[C],v===a&&o,y)),c=new Date,l=pr(e),u=l[Sr]?s(Sr):mn(2012),f=l[Qr]?s(Qr):l[Zi]?s(Zi):S2,d=l[Zn]&&l[Xr]?s(Xr,1,Zn+Xr):l[Zn]?s(Zn,1):l[Xr]?s(Xr,1):l[Ji]?s(Ji,1):l[Pa]?s(Pa,1):Ia,p=l[L1]?s(L1):S2,h=l[A1]?s(A1):S2,m=l[oo]?s(oo):S2,g=l[$o]?s($o):S2;return function(v){c.setTime(+v);let y=u(c);return i(y,f(c),d(c,y),p(c),h(c),m(c),g(c))}}function Cpe(e,t,n,r){let i=n<=1?e:r?(o,a)=>r+n*Math.floor((e(o,a)-r)/n):(o,a)=>n*Math.floor(e(o,a)/n);return t?(o,a)=>t(i(o,a),a):i}function tu(e,t,n){return t+e*7-(n+6)%7}var bpe={[Sr]:e=>e.getFullYear(),[Zi]:e=>Math.floor(e.getMonth()/3),[Qr]:e=>e.getMonth(),[Ji]:e=>e.getDate(),[L1]:e=>e.getHours(),[A1]:e=>e.getMinutes(),[oo]:e=>e.getSeconds(),[$o]:e=>e.getMilliseconds(),[Pa]:e=>DG(e),[Zn]:e=>eL(e),[Zn+Xr]:(e,t)=>tu(eL(e),e.getDay(),tL(t)),[Xr]:(e,t)=>tu(1,e.getDay(),tL(t))},Mpe={[Zi]:e=>3*e,[Zn]:(e,t)=>tu(e,0,tL(t))};function fL(e,t){return HG(e,t||1,bpe,Mpe,ype)}var wpe={[Sr]:e=>e.getUTCFullYear(),[Zi]:e=>Math.floor(e.getUTCMonth()/3),[Qr]:e=>e.getUTCMonth(),[Ji]:e=>e.getUTCDate(),[L1]:e=>e.getUTCHours(),[A1]:e=>e.getUTCMinutes(),[oo]:e=>e.getUTCSeconds(),[$o]:e=>e.getUTCMilliseconds(),[Pa]:e=>zG(e),[Zn]:e=>nL(e),[Xr]:(e,t)=>tu(1,e.getUTCDay(),rL(t)),[Zn+Xr]:(e,t)=>tu(nL(e),e.getUTCDay(),rL(t))},Spe={[Zi]:e=>3*e,[Zn]:(e,t)=>tu(e,0,rL(t))};function dL(e,t){return HG(e,t||1,wpe,Spe,xpe)}var Epe={[Sr]:Qi,[Zi]:ec.every(3),[Qr]:ec,[Zn]:Oo,[Ji]:H1,[Xr]:H1,[Pa]:H1,[L1]:D3,[A1]:S3,[oo]:Mi,[$o]:z2},Dpe={[Sr]:Ki,[Zi]:tc.every(3),[Qr]:tc,[Zn]:Po,[Ji]:Ro,[Xr]:Ro,[Pa]:Ro,[L1]:z3,[A1]:E3,[oo]:Mi,[$o]:z2};function nc(e){return Epe[e]}function rc(e){return Dpe[e]}function LG(e,t,n){return e?e.offset(t,n):void 0}function pL(e,t,n){return LG(nc(e),t,n)}function hL(e,t,n){return LG(rc(e),t,n)}function AG(e,t,n,r){return e?e.range(t,n,r):void 0}function mL(e,t,n,r){return AG(nc(e),t,n,r)}function gL(e,t,n,r){return AG(rc(e),t,n,r)}var yd=1e3,xd=yd*60,Cd=xd*60,mv=Cd*24,zpe=mv*7,SG=mv*30,iL=mv*365,VG=[Sr,Qr,Ji,L1,A1,oo,$o],bd=VG.slice(0,-1),Md=bd.slice(0,-1),wd=Md.slice(0,-1),Hpe=wd.slice(0,-1),Lpe=[Sr,Zn],EG=[Sr,Qr],NG=[Sr],vd=[[bd,1,yd],[bd,5,5*yd],[bd,15,15*yd],[bd,30,30*yd],[Md,1,xd],[Md,5,5*xd],[Md,15,15*xd],[Md,30,30*xd],[wd,1,Cd],[wd,3,3*Cd],[wd,6,6*Cd],[wd,12,12*Cd],[Hpe,1,mv],[Lpe,1,zpe],[EG,1,SG],[EG,3,3*SG],[NG,1,iL]];function vL(e){let t=e.extent,n=e.maxbins||40,r=Math.abs(Ks(t))/n,i=ro(s=>s[2]).right(vd,r),o,a;return i===vd.length?(o=NG,a=Xi(t[0]/iL,t[1]/iL,n)):i?(i=vd[r/vd[i-1][2]<vd[i][2]/r?i-1:i],o=i[0],a=i[1]):(o=VG,a=Math.max(Xi(t[0],t[1],n),1)),{units:o,step:a}}function yL(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function xL(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Sd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function nu(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,c=e.shortMonths,l=Ed(i),u=Dd(i),f=Ed(o),d=Dd(o),p=Ed(a),h=Dd(a),m=Ed(s),g=Dd(s),v=Ed(c),y=Dd(c),C={a:G,A:X,b:J,B:we,c:null,d:RG,e:RG,f:Zpe,g:che,G:uhe,H:Xpe,I:Qpe,j:Kpe,L:UG,m:Jpe,M:ehe,p:Se,q:Ze,Q:$G,s:BG,S:the,u:nhe,U:rhe,V:ihe,w:ohe,W:ahe,x:null,X:null,y:she,Y:lhe,Z:fhe,"%":PG},b={a:Et,A:ut,b:Jt,B:Ss,c:null,d:OG,e:OG,f:mhe,g:Ehe,G:zhe,H:dhe,I:phe,j:hhe,L:qG,m:ghe,M:vhe,p:j0,q:_4,Q:$G,s:BG,S:yhe,u:xhe,U:Che,V:bhe,w:Mhe,W:whe,x:null,X:null,y:She,Y:Dhe,Z:Hhe,"%":PG},M={a:z,A:H,b:j,B:L,c:N,d:IG,e:IG,f:qpe,g:TG,G:kG,H:FG,I:FG,j:$pe,L:jpe,m:Ppe,M:Bpe,p:D,q:Ope,Q:Wpe,s:Ype,S:Upe,u:kpe,U:Tpe,V:Ipe,w:_pe,W:Fpe,x:A,X:T,y:TG,Y:kG,Z:Rpe,"%":Gpe};C.x=S(n,C),C.X=S(r,C),C.c=S(t,C),b.x=S(n,b),b.X=S(r,b),b.c=S(t,b);function S(me,Je){return function(ot){var oe=[],$r=-1,Lt=0,li=me.length,ui,ma,H8;for(ot instanceof Date||(ot=new Date(+ot));++$r<li;)me.charCodeAt($r)===37&&(oe.push(me.slice(Lt,$r)),(ma=_G[ui=me.charAt(++$r)])!=null?ui=me.charAt(++$r):ma=ui==="e"?" ":"0",(H8=Je[ui])&&(ui=H8(ot,ma)),oe.push(ui),Lt=$r+1);return oe.push(me.slice(Lt,$r)),oe.join("")}}function w(me,Je){return function(ot){var oe=Sd(1900,void 0,1),$r=E(oe,me,ot+="",0),Lt,li;if($r!=ot.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(Je&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(Lt=xL(Sd(oe.y,0,1)),li=Lt.getUTCDay(),Lt=li>4||li===0?eu.ceil(Lt):eu(Lt),Lt=Ro.offset(Lt,(oe.V-1)*7),oe.y=Lt.getUTCFullYear(),oe.m=Lt.getUTCMonth(),oe.d=Lt.getUTCDate()+(oe.w+6)%7):(Lt=yL(Sd(oe.y,0,1)),li=Lt.getDay(),Lt=li>4||li===0?J6.ceil(Lt):J6(Lt),Lt=H1.offset(Lt,(oe.V-1)*7),oe.y=Lt.getFullYear(),oe.m=Lt.getMonth(),oe.d=Lt.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),li="Z"in oe?xL(Sd(oe.y,0,1)).getUTCDay():yL(Sd(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(li+5)%7:oe.w+oe.U*7-(li+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,xL(oe)):yL(oe)}}function E(me,Je,ot,oe){for(var $r=0,Lt=Je.length,li=ot.length,ui,ma;$r<Lt;){if(oe>=li)return-1;if(ui=Je.charCodeAt($r++),ui===37){if(ui=Je.charAt($r++),ma=M[ui in _G?Je.charAt($r++):ui],!ma||(oe=ma(me,ot,oe))<0)return-1}else if(ui!=ot.charCodeAt(oe++))return-1}return oe}function D(me,Je,ot){var oe=l.exec(Je.slice(ot));return oe?(me.p=u.get(oe[0].toLowerCase()),ot+oe[0].length):-1}function z(me,Je,ot){var oe=p.exec(Je.slice(ot));return oe?(me.w=h.get(oe[0].toLowerCase()),ot+oe[0].length):-1}function H(me,Je,ot){var oe=f.exec(Je.slice(ot));return oe?(me.w=d.get(oe[0].toLowerCase()),ot+oe[0].length):-1}function j(me,Je,ot){var oe=v.exec(Je.slice(ot));return oe?(me.m=y.get(oe[0].toLowerCase()),ot+oe[0].length):-1}function L(me,Je,ot){var oe=m.exec(Je.slice(ot));return oe?(me.m=g.get(oe[0].toLowerCase()),ot+oe[0].length):-1}function N(me,Je,ot){return E(me,t,Je,ot)}function A(me,Je,ot){return E(me,n,Je,ot)}function T(me,Je,ot){return E(me,r,Je,ot)}function G(me){return a[me.getDay()]}function X(me){return o[me.getDay()]}function J(me){return c[me.getMonth()]}function we(me){return s[me.getMonth()]}function Se(me){return i[+(me.getHours()>=12)]}function Ze(me){return 1+~~(me.getMonth()/3)}function Et(me){return a[me.getUTCDay()]}function ut(me){return o[me.getUTCDay()]}function Jt(me){return c[me.getUTCMonth()]}function Ss(me){return s[me.getUTCMonth()]}function j0(me){return i[+(me.getUTCHours()>=12)]}function _4(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var Je=S(me+="",C);return Je.toString=function(){return me},Je},parse:function(me){var Je=w(me+="",!1);return Je.toString=function(){return me},Je},utcFormat:function(me){var Je=S(me+="",b);return Je.toString=function(){return me},Je},utcParse:function(me){var Je=w(me+="",!0);return Je.toString=function(){return me},Je}}}var _G={"-":"",_:" ",0:"0"},Er=/^\s*\d+/,Ape=/^%/,Vpe=/[\\^$*+?|[\]().{}]/g;function Dt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Npe(e){return e.replace(Vpe,"\\$&")}function Ed(e){return new RegExp("^(?:"+e.map(Npe).join("|")+")","i")}function Dd(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function _pe(e,t,n){var r=Er.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function kpe(e,t,n){var r=Er.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Tpe(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Ipe(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Fpe(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function kG(e,t,n){var r=Er.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function TG(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Rpe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ope(e,t,n){var r=Er.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Ppe(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function IG(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function $pe(e,t,n){var r=Er.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function FG(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Bpe(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Upe(e,t,n){var r=Er.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function jpe(e,t,n){var r=Er.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function qpe(e,t,n){var r=Er.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Gpe(e,t,n){var r=Ape.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Wpe(e,t,n){var r=Er.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Ype(e,t,n){var r=Er.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function RG(e,t){return Dt(e.getDate(),t,2)}function Xpe(e,t){return Dt(e.getHours(),t,2)}function Qpe(e,t){return Dt(e.getHours()%12||12,t,2)}function Kpe(e,t){return Dt(1+H1.count(Qi(e),e),t,3)}function UG(e,t){return Dt(e.getMilliseconds(),t,3)}function Zpe(e,t){return UG(e,t)+"000"}function Jpe(e,t){return Dt(e.getMonth()+1,t,2)}function ehe(e,t){return Dt(e.getMinutes(),t,2)}function the(e,t){return Dt(e.getSeconds(),t,2)}function nhe(e){var t=e.getDay();return t===0?7:t}function rhe(e,t){return Dt(Oo.count(Qi(e)-1,e),t,2)}function jG(e){var t=e.getDay();return t>=4||t===0?H3(e):H3.ceil(e)}function ihe(e,t){return e=jG(e),Dt(H3.count(Qi(e),e)+(Qi(e).getDay()===4),t,2)}function ohe(e){return e.getDay()}function ahe(e,t){return Dt(J6.count(Qi(e)-1,e),t,2)}function she(e,t){return Dt(e.getFullYear()%100,t,2)}function che(e,t){return e=jG(e),Dt(e.getFullYear()%100,t,2)}function lhe(e,t){return Dt(e.getFullYear()%1e4,t,4)}function uhe(e,t){var n=e.getDay();return e=n>=4||n===0?H3(e):H3.ceil(e),Dt(e.getFullYear()%1e4,t,4)}function fhe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Dt(t/60|0,"0",2)+Dt(t%60,"0",2)}function OG(e,t){return Dt(e.getUTCDate(),t,2)}function dhe(e,t){return Dt(e.getUTCHours(),t,2)}function phe(e,t){return Dt(e.getUTCHours()%12||12,t,2)}function hhe(e,t){return Dt(1+Ro.count(Ki(e),e),t,3)}function qG(e,t){return Dt(e.getUTCMilliseconds(),t,3)}function mhe(e,t){return qG(e,t)+"000"}function ghe(e,t){return Dt(e.getUTCMonth()+1,t,2)}function vhe(e,t){return Dt(e.getUTCMinutes(),t,2)}function yhe(e,t){return Dt(e.getUTCSeconds(),t,2)}function xhe(e){var t=e.getUTCDay();return t===0?7:t}function Che(e,t){return Dt(Po.count(Ki(e)-1,e),t,2)}function GG(e){var t=e.getUTCDay();return t>=4||t===0?L3(e):L3.ceil(e)}function bhe(e,t){return e=GG(e),Dt(L3.count(Ki(e),e)+(Ki(e).getUTCDay()===4),t,2)}function Mhe(e){return e.getUTCDay()}function whe(e,t){return Dt(eu.count(Ki(e)-1,e),t,2)}function She(e,t){return Dt(e.getUTCFullYear()%100,t,2)}function Ehe(e,t){return e=GG(e),Dt(e.getUTCFullYear()%100,t,2)}function Dhe(e,t){return Dt(e.getUTCFullYear()%1e4,t,4)}function zhe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?L3(e):L3.ceil(e),Dt(e.getUTCFullYear()%1e4,t,4)}function Hhe(){return"+0000"}function PG(){return"%"}function $G(e){return+e}function BG(e){return Math.floor(+e/1e3)}var ru,iu,gv,ou,vv;CL({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function CL(e){return ru=nu(e),iu=ru.format,gv=ru.parse,ou=ru.utcFormat,vv=ru.utcParse,ru}function zd(e){let t={};return n=>t[n]||(t[n]=e(n))}function Lhe(e,t){return n=>{let r=e(n),i=r.indexOf(t);if(i<0)return r;let o=Ahe(r,i),a=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+a}}function Ahe(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function YG(e){let t=zd(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){let i=io(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Lhe(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,a){a=io(a??",f");let s=Xi(r,i,o),c=Math.max(Math.abs(r),Math.abs(i)),l;if(a.precision==null)switch(a.type){case"s":return isNaN(l=hd(s,c))||(a.precision=l),n(a,c);case"":case"e":case"g":case"p":case"r":{isNaN(l=md(s,c))||(a.precision=l-(a.type==="e"));break}case"f":case"%":{isNaN(l=pd(s))||(a.precision=l-(a.type==="%")*2);break}}return t(a)}}}var bL;XG();function XG(){return bL=YG({format:w3,formatPrefix:Z6})}function QG(e){return YG(dd(e))}function Hd(e){return arguments.length?bL=QG(e):bL}function WG(e,t,n){n=n||{},ne(n)||B(`Invalid time multi-format specifier: ${n}`);let r=t(oo),i=t(A1),o=t(L1),a=t(Ji),s=t(Zn),c=t(Qr),l=t(Zi),u=t(Sr),f=e(n[$o]||".%L"),d=e(n[oo]||":%S"),p=e(n[A1]||"%I:%M"),h=e(n[L1]||"%I %p"),m=e(n[Ji]||n[Xr]||"%a %d"),g=e(n[Zn]||"%b %d"),v=e(n[Qr]||"%B"),y=e(n[Zi]||"%B"),C=e(n[Sr]||"%Y");return b=>(r(b)<b?f:i(b)<b?d:o(b)<b?p:a(b)<b?h:c(b)<b?s(b)<b?m:g:u(b)<b?l(b)<b?v:y:C)(b)}function KG(e){let t=zd(e.format),n=zd(e.utcFormat);return{timeFormat:r=>Q(r)?t(r):WG(t,nc,r),utcFormat:r=>Q(r)?n(r):WG(n,rc,r),timeParse:zd(e.parse),utcParse:zd(e.utcParse)}}var ML;ZG();function ZG(){return ML=KG({format:iu,parse:gv,utcFormat:ou,utcParse:vv})}function JG(e){return KG(nu(e))}function Ml(e){return arguments.length?ML=JG(e):ML}var wL=(e,t)=>ke({},e,t);function yv(e,t){let n=e?QG(e):Hd(),r=t?JG(t):Ml();return wL(n,r)}function Ld(e,t){let n=arguments.length;return n&&n!==2&&B("defaultLocale expects either zero or two arguments."),n?wL(Hd(e),Ml(t)):wL(Hd(),Ml())}function eW(){return XG(),ZG(),Ld()}var Vhe=/^(data:|([A-Za-z]+:)?\/\/)/,Nhe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,_he=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,tW="file://";function khe(e,t){return n=>({options:n||{},sanitize:Ihe,load:The,fileAccess:!!t,file:Fhe(t),http:Ohe(e)})}function The(e,t){return qt(this,null,function*(){let n=yield this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)})}function Ihe(e,t){return qt(this,null,function*(){t=ke({},this.options,t);let n=this.fileAccess,r={href:null},i,o,a,s=Nhe.test(e.replace(_he,""));(e==null||typeof e!="string"||!s)&&B("Sanitize failure, invalid URI: "+Z(e));let c=Vhe.test(e);return(a=t.baseURL)&&!c&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),o=(i=e.startsWith(tW))||t.mode==="file"||t.mode!=="http"&&!c&&n,i?e=e.slice(tW.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r})}function Fhe(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):Rhe}function Rhe(){return qt(this,null,function*(){B("No file system access.")})}function Ohe(e){return e?function(t,n){return qt(this,null,function*(){let r=ke({},this.options.http,n),i=n&&n.response,o=yield e(t,r);return o.ok?Ie(o[i])?o[i]():o.text():B(o.status+""+o.statusText)})}:Phe}function Phe(){return qt(this,null,function*(){B("No HTTP fetch method available.")})}var $he=e=>e!=null&&e===e,Bhe=e=>e==="true"||e==="false"||e===!0||e===!1,Uhe=e=>!Number.isNaN(Date.parse(e)),rW=e=>!Number.isNaN(+e)&&!(e instanceof Date),jhe=e=>rW(e)&&Number.isInteger(+e),SL={boolean:id,integer:Bn,number:Bn,date:od,string:ad,unknown:Vn},xv=[Bhe,jhe,rW,Uhe],qhe=["boolean","integer","number","date"];function iW(e,t){if(!e||!e.length)return"unknown";let n=e.length,r=xv.length,i=xv.map((o,a)=>a+1);for(let o=0,a=0,s,c;o<n;++o)for(c=t?e[o][t]:e[o],s=0;s<r;++s)if(i[s]&&$he(c)&&!xv[s](c)&&(i[s]=0,++a,a===xv.length))return"string";return qhe[i.reduce((o,a)=>o===0?a:o,0)-1]}function oW(e,t){return t.reduce((n,r)=>(n[r]=iW(e,r),n),{})}function nW(e){let t=function(n,r){let i={delimiter:e};return EL(n,r?ke(r,i):i)};return t.responseType="text",t}function EL(e,t){return t.header&&(e=t.header.map(Z).join(t.delimiter)+`
`+e),NH(t.delimiter).parse(e+"")}EL.responseType="text";function Ghe(e){return typeof Buffer=="function"&&Ie(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function DL(e,t){let n=t&&t.property?wr(t.property):Vn;return ne(e)&&!Ghe(e)?Whe(n(e),t):n(JSON.parse(e))}DL.responseType="json";function Whe(e,t){return!F(e)&&MH(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}var Yhe={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function aW(e,t){let n,r,i,o;return e=DL(e,t),t&&t.feature?(n=kH,i=t.feature):t&&t.mesh?(n=IH,i=t.mesh,o=Yhe[t.filter]):B("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):B("Invalid TopoJSON object: "+i),r&&r.features||[r]}aW.responseType="json";var Cv={dsv:EL,csv:nW(","),tsv:nW("	"),json:DL,topojson:aW};function zL(e,t){return arguments.length>1?(Cv[e]=t,this):de(Cv,e)?Cv[e]:null}function HL(e){let t=zL(e);return t&&t.responseType||"text"}function LL(e,t,n,r){t=t||{};let i=zL(t.type||"json");return i||B("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Xhe(e,t.parse,n,r),de(e,"columns")&&delete e.columns,e}function Xhe(e,t,n,r){if(!e.length)return;let i=Ml();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),a,s,c,l,u,f;t==="auto"&&(t=oW(e,o)),o=Object.keys(t);let d=o.map(p=>{let h=t[p],m,g;if(h&&(h.startsWith("date:")||h.startsWith("utc:")))return m=h.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!SL[h])throw Error("Illegal format pattern: "+p+":"+h);return SL[h]});for(c=0,u=e.length,f=o.length;c<u;++c)for(a=e[c],l=0;l<f;++l)s=o[l],a[s]=d[l](a[s])}var au=khe(typeof fetch<"u"&&fetch,null);function Sv(e){let t=e||Vn,n=[],r={};return n.add=i=>{let o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{let o=t(i);if(r[o]){r[o]=0;let a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}function Nd(e,t){return qt(this,null,function*(){try{yield t(e)}catch(n){e.error(n)}})}var pW=Symbol("vega_id"),Qhe=1;function wl(e){return!!(e&&De(e))}function De(e){return e[pW]}function hW(e,t){return e[pW]=t,e}function lt(e){let t=e===Object(e)?e:{data:e};return De(t)?t:hW(t,Qhe++)}function Ev(e){return Sl(e,lt({}))}function Sl(e,t){for(let n in e)t[n]=e[n];return t}function Dv(e,t){return hW(t,De(e))}function Ba(e,t){return e?t?(n,r)=>e(n,r)||De(t(n))-De(t(r)):(n,r)=>e(n,r)||De(n)-De(r):null}function VL(e){return e&&e.constructor===sc}function sc(){let e=[],t=[],n=[],r=[],i=[],o=null,a=!1;return{constructor:sc,insert(s){let c=te(s),l=c.length;for(let u=0;u<l;++u)e.push(c[u]);return this},remove(s){let c=Ie(s)?r:t,l=te(s),u=l.length;for(let f=0;f<u;++f)c.push(l[f]);return this},modify(s,c,l){let u={field:c,value:mn(l)};return Ie(s)?(u.filter=s,i.push(u)):(u.tuple=s,n.push(u)),this},encode(s,c){return Ie(s)?i.push({filter:s,field:c}):n.push({tuple:s,field:c}),this},clean(s){return o=s,this},reflow(){return a=!0,this},pulse(s,c){let l={},u={},f,d,p,h,m,g;for(f=0,d=c.length;f<d;++f)l[De(c[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[De(m)]=-1;for(f=0,d=r.length;f<d;++f)h=r[f],c.forEach(y=>{h(y)&&(l[De(y)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=De(m),l[g]?l[g]=1:s.add.push(lt(e[f]));for(f=0,d=c.length;f<d;++f)m=c[f],l[De(m)]<0&&s.rem.push(m);function v(y,C,b){b?y[C]=b(y):s.encode=C,a||(u[De(y)]=y)}for(f=0,d=n.length;f<d;++f)p=n[f],m=p.tuple,h=p.field,g=l[De(m)],g>0&&(v(m,h,p.value),s.modifies(h));for(f=0,d=i.length;f<d;++f)p=i[f],h=p.filter,c.forEach(y=>{h(y)&&l[De(y)]>0&&v(y,p.field,p.value)}),s.modifies(p.field);if(a)s.mod=t.length||r.length?c.filter(y=>l[De(y)]>0):c.slice();else for(g in u)s.mod.push(u[g]);return(o||o==null&&(t.length||r.length))&&s.clean(!0),s}}}var Mv="_:mod:_";function _d(){Object.defineProperty(this,Mv,{writable:!0,value:{}})}_d.prototype={set(e,t,n,r){let i=this,o=i[e],a=i[Mv];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=F(n)?1+n.length:-1),i},modified(e,t){let n=this[Mv];if(arguments.length){if(F(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(let r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[Mv]={},this}};var Khe=0,Zhe="pulse",Jhe=new _d,eme=1,tme=2;function It(e,t,n,r){this.id=++Khe,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function sW(e){return function(t){let n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}It.prototype={targets(){return this._targets||(this._targets=Sv(G6))},set(e){return this.value!==e?(this.value=e,1):0},skip:sW(eme),modified:sW(tme),parameters(e,t,n){t=t!==!1;let r=this._argval=this._argval||new _d,i=this._argops=this._argops||[],o=[],a,s,c,l,u=(f,d,p)=>{p instanceof It?(p!==this&&(t&&p.targets().add(this),o.push(p)),i.push({op:p,name:f,index:d})):r.set(f,d,p)};for(a in e)if(s=e[a],a===Zhe)te(s).forEach(f=>{f instanceof It?f!==this&&(f.targets().add(this),o.push(f)):B("Pulse parameters must be operator instances.")}),this.source=s;else if(F(s))for(r.set(a,-1,Array(c=s.length)),l=0;l<c;++l)u(a,l,s[l]);else u(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){let t=this._argval||Jhe,n=this._argops,r,i,o,a;if(n){let s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){let e=this._argops,t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){let t=this._update;if(t){let n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function nme(e,t,n,r){let i=1,o;return e instanceof It?o=e:e&&e.prototype instanceof It?o=new e:Ie(e)?o=new It(null,e):(i=0,o=new It(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function rme(e,t){let n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}var ime=0;function cu(e,t,n){this.id=++ime,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function A3(e,t,n){return new cu(e,t,n)}cu.prototype={_filter:dr,_apply:Vn,targets(){return this._targets||(this._targets=Sv(G6))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){let t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){let t=A3(e);return this.targets().add(t),t},apply(e){let t=A3(null,e);return this.targets().add(t),t},merge(){let e=A3();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{let n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){let t=A3();return this.targets().add(A3(null,null,nd(e,n=>{let r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(A3(null,null,()=>n=!0)),t.targets().add(A3(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=dr,this._targets=null}};function ome(e,t,n,r){let i=this,o=A3(n,r),a=function(l){l.dataflow=i;try{o.receive(l)}catch(u){i.error(u)}finally{i.run()}},s;typeof e=="string"&&typeof document<"u"?s=document.querySelectorAll(e):s=te(e);let c=s.length;for(let l=0;l<c;++l)s[l].addEventListener(t,a);return o}function ame(e,t){let n=this.locale();return LL(e,t,n.timeParse,n.utcParse)}function sme(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}function cme(e,t){return qt(this,null,function*(){let n=this,r=0,i;try{i=yield n.loader().load(e,{context:"dataflow",response:HL(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}})}function lme(e,t,n){return qt(this,null,function*(){let r=this,i=r._pending||ume(r);i.requests+=1;let o=yield r.request(t,n);return r.pulse(e,r.changeset().remove(dr).insert(o.data||[])),i.done(),o})}function ume(e){let t,n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}var fme={skip:!0};function dme(e,t,n,r,i){return(e instanceof It?hme:pme)(this,e,t,n,r,i),this}function pme(e,t,n,r,i,o){let a=ke({},o,fme),s,c;Ie(n)||(n=mn(n)),r===void 0?s=l=>e.touch(n(l)):Ie(r)?(c=new It(null,r,i,!1),s=l=>{c.evaluate(l);let u=n(l),f=c.value;VL(f)?e.pulse(u,f,o):e.update(u,f,a)}):s=l=>e.update(n(l),r,a),t.apply(s)}function hme(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{let a=o||{},s=new It(null,mme(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}function mme(e,t){return t=Ie(t)?t:mn(t),e?function(n,r){let i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function gme(e){e.rank=++this._rank}function vme(e){let t=[e],n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&B("Cycle detected in dataflow graph.")}var wv={},$a=1,V3=2,ic=4,yme=$a|V3,cW=$a|ic,su=$a|V3|ic,lW=8,Ad=16,uW=32,fW=64;function oc(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function AL(e,t){let n=[];return Zs(e,t,r=>n.push(r)),n}function dW(e,t){let n={};return e.visit(t,r=>{n[De(r)]=1}),r=>n[De(r)]?null:r}function bv(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}oc.prototype={StopPropagation:wv,ADD:$a,REM:V3,MOD:ic,ADD_REM:yme,ADD_MOD:cW,ALL:su,REFLOW:lW,SOURCE:Ad,NO_SOURCE:uW,NO_FIELDS:fW,fork(e){return new oc(this.dataflow).init(this,e)},clone(){let e=this.fork(su);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(su|Ad)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new oc(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){let n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&fW)&&(n.fields=e.fields),t&$a?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&V3?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&ic?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&uW?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){let t=e||su;return t&$a&&this.add.length||t&V3&&this.rem.length||t&ic&&this.mod.length},reflow(e){if(e)return this.fork(su).reflow();let t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(ic,dW(this,$a))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){let t=this.fields||(this.fields={});return F(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){let n=this.fields;return(t||this.mod.length)&&n?arguments.length?F(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){let n=this;return e&$a&&(n.addF=bv(n.addF,t)),e&V3&&(n.remF=bv(n.remF,t)),e&ic&&(n.modF=bv(n.modF,t)),e&Ad&&(n.srcF=bv(n.srcF,t)),n},materialize(e){e=e||su;let t=this;return e&$a&&t.addF&&(t.add=AL(t.add,t.addF),t.addF=null),e&V3&&t.remF&&(t.rem=AL(t.rem,t.remF),t.remF=null),e&ic&&t.modF&&(t.mod=AL(t.mod,t.modF),t.modF=null),e&Ad&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){let n=this,r=t;if(e&Ad)return Zs(n.source,n.srcF,r),n;e&$a&&Zs(n.add,n.addF,r),e&V3&&Zs(n.rem,n.remF,r),e&ic&&Zs(n.mod,n.modF,r);let i=n.source;if(e&lW&&i){let o=n.add.length+n.mod.length;o===i.length||(o?Zs(i,dW(n,cW),r):Zs(i,n.srcF,r))}return n}};function zv(e,t,n,r){let i=this,o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(let a of n)if(a.stamp===t){if(a.fields){let s=i.fields||(i.fields={});for(let c in a.fields)s[c]=1}a.changed(i.ADD)&&(o|=i.ADD),a.changed(i.REM)&&(o|=i.REM),a.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}ee(zv,oc,{fork(e){let t=new oc(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){let t=this,n=t.fields;return n&&t.changes&t.MOD?F(e)?e.some(r=>n[r]):n[e]:0},filter(){B("MultiPulse does not support filtering.")},materialize(){B("MultiPulse does not support materialization.")},visit(e,t){let n=this,r=n.pulses,i=r.length,o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});function xme(e,t,n){return qt(this,null,function*(){let r=this,i=[];if(r._pulse)return mW(r);if(r._pending&&(yield r._pending),t&&(yield Nd(r,t)),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;let o=++r._clock;r._pulse=new oc(r,o,e),r._touched.forEach(u=>r._enqueue(u,!0)),r._touched=Sv(G6);let a=0,s,c,l;try{for(;r._heap.size()>0;){if(s=r._heap.pop(),s.rank!==s.qrank){r._enqueue(s,!0);continue}c=s.run(r._getPulse(s,e)),c.then?c=yield c:c.async&&(i.push(c.async),c=wv),c!==wv&&s._targets&&s._targets.forEach(u=>r._enqueue(u)),++a}}catch(u){r._heap.clear(),l=u}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${a} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){let u=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<u.length;++f)yield Nd(r,u[f].callback)}return n&&(yield Nd(r,n)),i.length&&Promise.all(i).then(u=>r.runAsync(null,()=>{u.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r})}function Cme(e,t,n){return qt(this,null,function*(){for(;this._running;)yield this._running;let r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running})}function bme(e,t,n){return this._pulse?mW(this):(this.evaluate(e,t,n),this)}function Mme(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function mW(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function wme(e,t){let n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Sme(e,t){let n=e.source,r=this._clock;return n&&F(n)?new zv(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Eme(this._pulse,n&&n.pulse)}function Eme(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==wv&&(e.source=t.source),e)}var NL={skip:!1,force:!1};function Dme(e,t){let n=t||NL;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function zme(e,t,n){let r=n||NL;return(e.set(t)||r.force)&&this.touch(e,r),this}function Hme(e,t,n){this.touch(e,n||NL);let r=new oc(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Lme(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),gW(t,0,t.length-1,e)),pop:()=>{let n=t.pop(),r;return t.length?(r=t[0],t[0]=n,Ame(t,0,e)):r=n,r}}}function gW(e,t,n,r){let i,o,a=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(a,i)<0){e[n]=i,n=o;continue}break}return e[n]=a}function Ame(e,t,n){let r=t,i=e.length,o=e[t],a=(t<<1)+1,s;for(;a<i;)s=a+1,s<i&&n(e[a],e[s])>=0&&(a=s),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=o,gW(e,r,t,n)}function N3(){this.logger(Q5()),this.logLevel(X5),this._clock=0,this._rank=0,this._locale=Ld();try{this._loader=au()}catch{}this._touched=Sv(G6),this._input={},this._pulse=null,this._heap=Lme((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Vd(e){return function(){return this._log[e].apply(this,arguments)}}N3.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Vd("error"),warn:Vd("warn"),info:Vd("info"),debug:Vd("debug"),logLevel:Vd("level"),cleanThreshold:1e4,add:nme,connect:rme,rank:gme,rerank:vme,pulse:Hme,touch:Dme,update:zme,changeset:sc,ingest:sme,parse:ame,preload:lme,request:cme,events:ome,on:dme,evaluate:xme,run:bme,runAsync:Cme,runAfter:Mme,_enqueue:wme,_getPulse:Sme};function $(e,t){It.call(this,e,null,t)}ee($,It,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){let t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});var ac={};function Hv(e){let t=_L(e);return t&&t.Definition||null}function _L(e){return e=e&&e.toLowerCase(),de(ac,e)?ac[e]:null}var xA={};Cr(xA,{aggregate:()=>_3,bin:()=>XL,collect:()=>QL,compare:()=>HW,countpattern:()=>KL,cross:()=>ZL,density:()=>JL,dotbin:()=>tA,expression:()=>_W,extent:()=>nA,facet:()=>Yv,field:()=>kW,filter:()=>iA,flatten:()=>oA,fold:()=>aA,formula:()=>sA,generate:()=>TW,impute:()=>cA,joinaggregate:()=>lA,kde:()=>uA,key:()=>IW,load:()=>FW,lookup:()=>fA,multiextent:()=>RW,multivalues:()=>OW,params:()=>PW,pivot:()=>dA,prefacet:()=>$W,project:()=>pA,proxy:()=>BW,quantile:()=>hA,relay:()=>UW,sample:()=>mA,sequence:()=>gA,sieve:()=>jW,subflow:()=>rA,timeunit:()=>vA,tupleindex:()=>GW,values:()=>WW,window:()=>yA});function*xW(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Lv(e,t,n){let r=Float64Array.from(xW(e,n));return r.sort(bi),t.map(i=>fd(r,i))}function Av(e,t){return Lv(e,[.25,.5,.75],t)}function Vv(e,t){let n=e.length,r=rv(e,t),i=Av(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function kL(e){let t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2],o=e.extent[0],a=e.extent[1],s,c,l,u,f,d,p=e.span||a-o||Math.abs(o)||1;if(e.step)s=e.step;else if(e.steps){for(u=p/t,f=0,d=e.steps.length;f<d&&e.steps[f]<u;++f);s=e.steps[Math.max(0,f-1)]}else{for(c=Math.ceil(Math.log(t)/r),l=e.minstep||0,s=Math.max(l,Math.pow(n,Math.round(Math.log(p)/r)-c));Math.ceil(p/s)>t;)s*=n;for(f=0,d=i.length;f<d;++f)u=s/i[f],u>=l&&p/u<=t&&(s=u)}u=Math.log(s);let h=u>=0?0:~~(-u/r)+1,m=Math.pow(n,-h-1);return(e.nice||e.nice===void 0)&&(u=Math.floor(o/s+m)*s,o=o<u?u-s:u,a=Math.ceil(a/s)*s),{start:o,stop:a===o?o+s:a,step:s}}var e1=Math.random;function Vme(e){e1=e}function TL(e,t,n,r){if(!e.length)return[void 0,void 0];let i=Float64Array.from(xW(e,r)),o=i.length,a=t,s,c,l,u;for(l=0,u=Array(a);l<a;++l){for(s=0,c=0;c<o;++c)s+=i[~~(e1()*o)];u[l]=s/o}return u.sort(bi),[ml(u,n/2),ml(u,1-n/2)]}function IL(e,t,n,r){r=r||(d=>d);let i=e.length,o=new Float64Array(i),a=0,s=1,c=r(e[0]),l=c,u=c+t,f;for(;s<i;++s){if(f=r(e[s]),f>=u){for(l=(c+l)/2;a<s;++a)o[a]=l;u=f+t,c=f}l=f}for(l=(c+l)/2;a<s;++a)o[a]=l;return n?Nme(o,t+t/4):o}function Nme(e,t){let n=e.length,r=0,i=1,o,a;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(a=i+(r+o-i-i>>1);a<i;)e[a++]=e[i];for(;a>i;)e[a--]=e[r]}r=i,i=o}return e}function _me(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function kme(e,t){t==null&&(t=e,e=0);let n,r,i,o={min(a){return arguments.length?(n=a||0,i=r-n,o):n},max(a){return arguments.length?(r=a||0,i=r-n,o):r},sample(){return n+Math.floor(i*e1())},pdf(a){return a===Math.floor(a)&&a>=n&&a<r?1/i:0},cdf(a){let s=Math.floor(a);return s<n?0:s>=r?1:(s-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return o.min(e).max(t)}var CW=Math.sqrt(2*Math.PI),Tme=Math.SQRT2,kd=NaN;function Td(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(kd===kd)n=kd,kd=NaN;else{do n=e1()*2-1,r=e1()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,kd=r*o}return e+n*t}function Nv(e,t,n){n=n??1;let r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*CW)}function Id(e,t,n){t=t||0,n=n??1;let r=(e-t)/n,i=Math.abs(r),o;if(i>37)o=0;else{let a=Math.exp(-i*i/2),s;i<7.07106781186547?(s=.0352624965998911*i+.700383064443688,s=s*i+6.37396220353165,s=s*i+33.912866078383,s=s*i+112.079291497871,s=s*i+221.213596169931,s=s*i+220.206867912376,o=a*s,s=.0883883476483184*i+1.75566716318264,s=s*i+16.064177579207,s=s*i+86.7807322029461,s=s*i+296.564248779674,s=s*i+637.333633378831,s=s*i+793.826512519948,s=s*i+440.413735824752,o=o/s):(s=i+.65,s=i+4/s,s=i+3/s,s=i+2/s,s=i+1/s,o=a/s/2.506628274631)}return r>0?1-o:o}function Fd(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Tme*Ime(2*e-1)}function Ime(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function _v(e,t){let n,r,i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>Td(n,r),pdf:o=>Nv(o,n,r),cdf:o=>Id(o,n,r),icdf:o=>Fd(o,n,r)};return i.mean(e).stdev(t)}function kv(e,t){let n=_v(),r=0,i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=Vv(e)),i):t},sample(){return e[~~(e1()*r)]+t*n.sample()},pdf(o){let a=0,s=0;for(;s<r;++s)a+=n.pdf((o-e[s])/t);return a/t/r},cdf(o){let a=0,s=0;for(;s<r;++s)a+=n.cdf((o-e[s])/t);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Tv(e,t){return e=e||0,t=t??1,Math.exp(e+Td()*t)}function Iv(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;let r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*CW*e)}function Fv(e,t,n){return Id(Math.log(e),t,n)}function Rv(e,t,n){return Math.exp(Fd(e,t,n))}function FL(e,t){let n,r,i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>Tv(n,r),pdf:o=>Iv(o,n,r),cdf:o=>Fv(o,n,r),icdf:o=>Rv(o,n,r)};return i.mean(e).stdev(t)}function RL(e,t){let n=0,r;function i(a){let s=[],c=0,l;for(l=0;l<n;++l)c+=s[l]=a[l]==null?1:+a[l];for(l=0;l<n;++l)s[l]/=c;return s}let o={weights(a){return arguments.length?(r=i(t=a||[]),o):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),o.weights(t)):e},sample(){let a=e1(),s=e[n-1],c=r[0],l=0;for(;l<n-1;c+=r[++l])if(a<c){s=e[l];break}return s.sample()},pdf(a){let s=0,c=0;for(;c<n;++c)s+=r[c]*e[c].pdf(a);return s},cdf(a){let s=0,c=0;for(;c<n;++c)s+=r[c]*e[c].cdf(a);return s},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function Ov(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*e1()}function Pv(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function $v(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Bv(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function OL(e,t){let n,r,i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>Ov(n,r),pdf:o=>Pv(o,n,r),cdf:o=>$v(o,n,r),icdf:o=>Bv(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Uv(e,t,n){let r=0,i=0;for(let o of e){let a=n(o);t(o)==null||a==null||isNaN(a)||(r+=(a-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Rd(e,t,n,r){let i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function jv(e,t,n,r){e=e.filter(p=>{let h=t(p),m=n(p);return h!=null&&(h=+h)>=h&&m!=null&&(m=+m)>=m}),r&&e.sort((p,h)=>t(p)-t(h));let i=e.length,o=new Float64Array(i),a=new Float64Array(i),s=0,c=0,l=0,u,f,d;for(d of e)o[s]=u=+t(d),a[s]=f=+n(d),++s,c+=(u-c)/s,l+=(f-l)/s;for(s=0;s<i;++s)o[s]-=c,a[s]-=l;return[o,a,c,l]}function Od(e,t,n,r){let i=-1,o,a;for(let s of e)o=t(s),a=n(s),o!=null&&(o=+o)>=o&&a!=null&&(a=+a)>=a&&r(o,a,++i)}function lu(e,t,n,r,i){let o=0,a=0;return Od(e,t,n,(s,c)=>{let l=c-i(s),u=c-r;o+=l*l,a+=u*u}),1-o/a}function qv(e,t,n){let r=0,i=0,o=0,a=0,s=0;Od(e,t,n,(u,f)=>{++s,r+=(u-r)/s,i+=(f-i)/s,o+=(u*f-o)/s,a+=(u*u-a)/s});let c=Rd(r,i,o,a),l=u=>c[0]+c[1]*u;return{coef:c,predict:l,rSquared:lu(e,t,n,i,l)}}function PL(e,t,n){let r=0,i=0,o=0,a=0,s=0;Od(e,t,n,(u,f)=>{++s,u=Math.log(u),r+=(u-r)/s,i+=(f-i)/s,o+=(u*f-o)/s,a+=(u*u-a)/s});let c=Rd(r,i,o,a),l=u=>c[0]+c[1]*Math.log(u);return{coef:c,predict:l,rSquared:lu(e,t,n,i,l)}}function $L(e,t,n){let[r,i,o,a]=jv(e,t,n),s=0,c=0,l=0,u=0,f=0,d,p,h;Od(e,t,n,(y,C)=>{d=r[f++],p=Math.log(C),h=d*C,s+=(C*p-s)/f,c+=(h-c)/f,l+=(h*p-l)/f,u+=(d*h-u)/f});let[m,g]=Rd(c/a,s/a,l/a,u/a),v=y=>Math.exp(m+g*(y-o));return{coef:[Math.exp(m-g*o),g],predict:v,rSquared:lu(e,t,n,a,v)}}function BL(e,t,n){let r=0,i=0,o=0,a=0,s=0,c=0;Od(e,t,n,(f,d)=>{let p=Math.log(f),h=Math.log(d);++c,r+=(p-r)/c,i+=(h-i)/c,o+=(p*h-o)/c,a+=(p*p-a)/c,s+=(d-s)/c});let l=Rd(r,i,o,a),u=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:u,rSquared:lu(e,t,n,s,u)}}function Gv(e,t,n){let[r,i,o,a]=jv(e,t,n),s=r.length,c=0,l=0,u=0,f=0,d=0,p,h,m,g;for(p=0;p<s;)h=r[p],m=i[p++],g=h*h,c+=(g-c)/p,l+=(g*h-l)/p,u+=(g*g-u)/p,f+=(h*m-f)/p,d+=(g*m-d)/p;let v=u-c*c,y=c*v-l*l,C=(d*c-f*l)/y,b=(f*v-d*l)/y,M=-C*c,S=w=>(w=w-o,C*w*w+b*w+M+a);return{coef:[M-b*o+C*o*o+a,b-2*C*o,C],predict:S,rSquared:lu(e,t,n,a,S)}}function UL(e,t,n,r){if(r===0)return Uv(e,t,n);if(r===1)return qv(e,t,n);if(r===2)return Gv(e,t,n);let[i,o,a,s]=jv(e,t,n),c=i.length,l=[],u=[],f=r+1,d,p,h,m,g;for(d=0;d<f;++d){for(h=0,m=0;h<c;++h)m+=Math.pow(i[h],d)*o[h];for(l.push(m),g=new Float64Array(f),p=0;p<f;++p){for(h=0,m=0;h<c;++h)m+=Math.pow(i[h],d+p);g[p]=m}u.push(g)}u.push(l);let v=Rme(u),y=C=>{C-=a;let b=s+v[0]+v[1]*C+v[2]*C*C;for(d=3;d<f;++d)b+=v[d]*Math.pow(C,d);return b};return{coef:Fme(f,v,-a,s),predict:y,rSquared:lu(e,t,n,s,y)}}function Fme(e,t,n,r){let i=Array(e),o,a,s,c;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],c=1,i[o]+=s,a=1;a<=o;++a)c*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*c;return i[0]+=r,i}function Rme(e){let t=e.length-1,n=[],r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}var vW=2,yW=1e-12;function jL(e,t,n,r){let[i,o,a,s]=jv(e,t,n,!0),c=i.length,l=Math.max(2,~~(r*c)),u=new Float64Array(c),f=new Float64Array(c),d=new Float64Array(c).fill(1);for(let p=-1;++p<=vW;){let h=[0,l-1];for(let g=0;g<c;++g){let v=i[g],y=h[0],C=h[1],b=v-i[y]>i[C]-v?y:C,M=0,S=0,w=0,E=0,D=0,z=1/Math.abs(i[b]-v||1);for(let L=y;L<=C;++L){let N=i[L],A=o[L],T=Ome(Math.abs(v-N)*z)*d[L],G=N*T;M+=T,S+=G,w+=A*T,E+=A*G,D+=N*G}let[H,j]=Rd(S/M,w/M,E/M,D/M);u[g]=H+j*v,f[g]=Math.abs(o[g]-u[g]),Pme(i,g+1,h)}if(p===vW)break;let m=X6(f);if(Math.abs(m)<yW)break;for(let g=0,v,y;g<c;++g)v=f[g]/(6*m),d[g]=v>=1?yW:(y=1-v*v)*y}return $me(i,u,a,s)}function Ome(e){return(e=1-e*e*e)*e*e}function Pme(e,t,n){let r=e[t],i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function $me(e,t,n,r){let i=e.length,o=[],a=0,s=0,c=[],l;for(;a<i;++a)l=e[a]+n,c[0]===l?c[1]+=(t[a]-c[1])/++s:(s=0,c[1]+=r,c=[l,t[a]],o.push(c));return c[1]+=r,o}var Bme=.5*Math.PI/180;function uu(e,t,n,r){n=n||25,r=Math.max(n,r||200);let i=m=>[m,e(m)],o=t[0],a=t[1],s=a-o,c=s/r,l=[i(o)],u=[];if(n===r){for(let m=1;m<r;++m)l.push(i(o+m/n*s));return l.push(i(a)),l}else{u.push(i(a));for(let m=n;--m>0;)u.push(i(o+m/n*s))}let f=l[0],d=u[u.length-1],p=1/s,h=Ume(f[1],u);for(;d;){let m=i((f[0]+d[0])/2);m[0]-f[0]>=c&&jme(f,m,d,p,h)>Bme?u.push(m):(f=d,l.push(d),u.pop()),d=u[u.length-1]}return l}function Ume(e,t){let n=e,r=e,i=t.length;for(let o=0;o<i;++o){let a=t[o][1];a<n&&(n=a),a>r&&(r=a)}return 1/(r-n)}function jme(e,t,n,r,i){let o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),a=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-a)}function qme(e){return t=>{let n=e.length,r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function WL(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:qme(e)}function wW(e,t,n){return n||e+(t?"_"+t:"")}var qL=()=>{},Gme={init:qL,add:qL,rem:qL,idx:0},Pd={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Bd=Object.keys(Pd).filter(e=>e!=="__count__");function Wme(e,t){return(n,r)=>ke({name:e,aggregate_param:r,out:n||e},Gme,t)}[...Bd,"__count__"].forEach(e=>{Pd[e]=Wme(e,Pd[e])});function SW(e,t,n){return Pd[e](n,t)}function EW(e,t){return e.idx-t.idx}function Yme(e){let t={};e.forEach(r=>t[r.name]=r);let n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=Pd[i]())})};return e.forEach(n),Object.values(t).sort(EW)}function Xme(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Qme(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Kme(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Zme(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function DW(e,t){let n=t||Vn,r=Yme(e),i=e.slice().sort(EW);function o(a){this._ops=r,this._out=i,this.cell=a,this.init()}return o.prototype.init=Xme,o.prototype.add=Qme,o.prototype.rem=Kme,o.prototype.set=Zme,o.prototype.get=n,o.fields=e.map(a=>a.out),o}function YL(e){this._key=e?wr(e):De,this.reset()}var Kr=YL.prototype;Kr.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Kr.add=function(e){this._add.push(e)};Kr.rem=function(e){this._rem.push(e)};Kr.values=function(){if(this._get=null,this._rem.length===0)return this._add;let e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={},s,c,l;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,c=0;s<r;++s)a[n(l=e[s])]?a[n(l)]=0:o[c++]=l;return this._rem=[],this._add=o};Kr.distinct=function(e){let t=this.values(),n={},r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",de(n,o)||(n[o]=1,++i);return i};Kr.extent=function(e){if(this._get!==e||!this._ext){let t=this.values(),n=CH(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Kr.argmin=function(e){return this.extent(e)[0]||{}};Kr.argmax=function(e){return this.extent(e)[1]||{}};Kr.min=function(e){let t=this.extent(e)[0];return t!=null?e(t):void 0};Kr.max=function(e){let t=this.extent(e)[1];return t!=null?e(t):void 0};Kr.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Av(this.values(),e),this._get=e),this._q};Kr.q1=function(e){return this.quartile(e)[0]};Kr.q2=function(e){return this.quartile(e)[1]};Kr.q3=function(e){return this.quartile(e)[2]};Kr.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=TL(this.values(),1e3,.05,e),this._get=e),this._ci};Kr.ci0=function(e){return this.ci(e)[0]};Kr.ci1=function(e){return this.ci(e)[1]};function _3(e){$.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}_3.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Bd},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ee(_3,$,{transform(e,t){let n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){let e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(s){let c,l,u,f;for(c in s)for(u=s[c].tuple,l=0;l<i;++l)r[l][f=u[n[l]]]=f}o(e._prev),o(t);function a(s,c,l){let u=n[l],f=r[l++];for(let d in f){let p=s?s+"|"+d:d;c[u]=f[d],l<i?a(p,c,l):t[p]||e.cell(p,c)}}a("",{},0)},init(e){let t=this._inputs=[],n=this._outputs=[],r={};function i(y){let C=te(fr(y)),b=C.length,M=0,S;for(;M<b;++M)r[S=C[M]]||(r[S]=1,t.push(S))}this._dims=te(e.groupby),this._dnames=this._dims.map(y=>{let C=un(y);return i(y),n.push(C),C}),this.cellkey=e.key?e.key:WL(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];let o=e.fields||[null],a=e.ops||["count"],s=e.aggregate_params||[null],c=e.as||[],l=o.length,u={},f,d,p,h,m,g,v;for(l!==a.length&&B("Unmatched number of fields and aggregate ops."),v=0;v<l;++v){if(f=o[v],d=a[v],p=s[v]||null,f==null&&d!=="count"&&B("Null aggregate field specified."),m=un(f),g=wW(d,m,c[v]),n.push(g),d==="count"){this._counts.push(g);continue}h=u[m],h||(i(f),h=u[m]=[],h.field=f,this._measures.push(h)),d!=="count"&&(this._countOnly=!1),h.push(SW(d,p,g))}return this._measures=this._measures.map(y=>DW(y,y.field)),Object.create(null)},cellkey:WL(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){let n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){let r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new YL),n},newtuple(e,t){let n=this._dnames,r=this._dims,i=r.length,o={};for(let a=0;a<i;++a)o[n[a]]=r[a](e);return t?Dv(t.tuple,o):lt(o)},clean(){let e=this.value;for(let t in e)e[t].num===0&&delete e[t]},add(e){let t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);let r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){let t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);let r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){let t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){let r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){let t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod,c,l,u,f;if(r)for(l in r)c=r[l],(!i||c.num)&&a.push(c.tuple);for(u=0,f=this._alen;u<f;++u)o.push(this.celltuple(t[u])),t[u]=null;for(u=0,f=this._mlen;u<f;++u)c=n[u],(c.num===0&&i?a:s).push(this.celltuple(c)),n[u]=null;return this._alen=this._mlen=0,this._prev=null,e}});var Jme=1e-14;function XL(e){$.call(this,null,e)}XL.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ee(XL,$,{transform(e,t){let n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,a=e.as||["bin0","bin1"],s=a[0],c=a[1],l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(fr(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?u=>{let f=r(u);u[s]=f,u[c]=f==null?null:i+o*(1+(f-i)/o)}:u=>u[s]=r(u)),t.modifies(n?a:s)},_bins(e){if(this.value&&!e.modified())return this.value;let t=e.field,n=kL(e),r=n.step,i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,a,s;(a=e.anchor)!=null&&(s=a-(i+r*Math.floor((a-i)/r)),i+=s,o+=s);let c=function(l){let u=Bn(t(l));return u==null?null:u<i?-1/0:u>o?1/0:(u=Math.max(i,Math.min(u,o-r)),i+r*Math.floor(Jme+(u-i)/r))};return c.start=i,c.stop=n.stop,c.step=r,this.value=Ci(c,fr(t),e.name||"bin_"+un(t))}});function zW(e,t,n){let r=e,i=t||[],o=n||[],a={},s=0;return{add:c=>o.push(c),remove:c=>a[r(c)]=++s,size:()=>i.length,data:(c,l)=>(s&&(i=i.filter(u=>!a[r(u)]),a={},s=0),l&&c&&i.sort(c),o.length&&(i=c?DH(c,i,o.sort(c)):i.concat(o),o=[]),i)}}function QL(e){$.call(this,[],e)}QL.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ee(QL,$,{transform(e,t){let n=t.fork(t.ALL),r=zW(De,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(Ba(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function HW(e){It.call(this,null,e9e,e)}ee(HW,It);function e9e(e){return this.value&&!e.modified()?this.value:ed(e.fields,e.orders)}function KL(e){$.call(this,null,e)}KL.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function t9e(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ee(KL,$,{transform(e,t){let n=f=>d=>{for(var p=t9e(s(d),e.case,o)||[],h,m=0,g=p.length;m<g;++m)a.test(h=p[m])||f(h)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,c=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),u=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,u)),this._finish(t,c)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){let n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS),s,c,l;for(s in n)c=r[s],l=n[s]||0,!c&&l?(r[s]=c=lt({}),c[i]=s,c[o]=l,a.add.push(c)):l===0?(c&&a.rem.push(c),n[s]=null,r[s]=null):c[o]!==l&&(c[o]=l,a.mod.push(c));return a.modifies(t)}});function ZL(e){$.call(this,null,e)}ZL.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ee(ZL,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter"),s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=n9e(s,i,o,e.filter||dr)):n.mod=s,n.source=this.value,n.modifies(r)}});function n9e(e,t,n,r){for(var i=[],o={},a=e.length,s=0,c,l;s<a;++s)for(o[t]=l=e[s],c=0;c<a;++c)o[n]=e[c],r(o)&&(i.push(lt(o)),o={},o[t]=l);return i}var bW={kde:kv,mixture:RL,normal:_v,lognormal:FL,uniform:OL},r9e="distributions",MW="function",i9e="field";function LW(e,t){let n=e[MW];de(bW,n)||B("Unknown distribution function: "+n);let r=bW[n]();for(let i in e)i===i9e?r.data((e.from||t()).map(e[i])):i===r9e?r[i](e[i].map(o=>LW(o,t))):typeof r[i]===MW&&r[i](e[i]);return r}function JL(e){$.call(this,null,e)}var AW=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],o9e={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:AW},{name:"weights",type:"number",array:!0}]};JL.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:AW.concat(o9e)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ee(JL,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=LW(e.distribution,a9e(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200,a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&B("Invalid density method: "+a),!e.extent&&!r.data&&B("Missing density extent parameter."),a=r[a];let s=e.as||["value","density"],c=e.extent||Yi(r.data()),l=uu(a,c,i,o).map(u=>{let f={};return f[s[0]]=u[0],f[s[1]]=u[1],lt(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function a9e(e){return()=>e.materialize(e.SOURCE).source}function VW(e,t){return e?e.map((n,r)=>t[r]||un(n)):null}function eA(e,t,n){let r=[],i=f=>f(c),o,a,s,c,l,u;if(t==null)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)c=e[a],l=t.map(i),u=o[l],u||(o[l]=u=[],u.dims=l,r.push(u)),u.push(n(c));return r}var NW="bin";function tA(e){$.call(this,null,e)}tA.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:NW}]};var s9e=(e,t)=>Ks(Yi(e,t))/30;ee(tA,$,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;let n=t.materialize(t.SOURCE).source,r=eA(t.source,e.groupby,Vn),i=e.smooth||!1,o=e.field,a=e.step||s9e(n,o),s=Ba((h,m)=>o(h)-o(m)),c=e.as||NW,l=r.length,u=1/0,f=-1/0,d=0,p;for(;d<l;++d){let h=r[d].sort(s);p=-1;for(let m of IL(h,a,i,o))m<u&&(u=m),m>f&&(f=m),h[++p][c]=m}return this.value={start:u,stop:f,step:a},t.reflow(!0).modifies(c)}});function _W(e){It.call(this,null,c9e,e),this.modified(!0)}ee(_W,It);function c9e(e){let t=e.expr;return this.value&&!e.modified("expr")?this.value:Ci(n=>t(n,e),fr(t),un(t))}function nA(e){$.call(this,[void 0,void 0],e)}nA.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ee(nA,$,{transform(e,t){let n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field"),o=n[0],a=n[1];if((i||o==null)&&(o=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,s=>{let c=Bn(r(s));c!=null&&(c<o&&(o=c),c>a&&(a=c))}),!Number.isFinite(o)||!Number.isFinite(a)){let s=un(r);s&&(s=` for field "${s}"`),t.dataflow.warn(`Infinite extent${s}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}});function rA(e,t){It.call(this,e),this.parent=t,this.count=0}ee(rA,It,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Yv(e){$.call(this,{},e),this._keys=b3();let t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ee(Yv,$,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){let i=this.value,o=de(i,e)&&i[e],a,s;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(s=r||(s=this._group[e])&&s.tuple,a=n.dataflow,o=new rA(n.fork(n.NO_SOURCE),this),a.add(o).connect(t(a,e,s)),i[e]=o,this.activate(o)),o},clean(){let e=this.value,t=0;for(let n in e)if(e[n].count===0){let r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){let n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){let t=this._targets,n=t.length,r=e?e.length:0,i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){let n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,a=e.modified("key"),s=c=>this.subflow(c,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,c=>{let l=De(c),u=o.get(l);u!==void 0&&(o.delete(l),s(u).rem(c))}),t.visit(t.ADD,c=>{let l=r(c);o.set(De(c),l),s(l).add(c)}),a||t.modified(r.fields)?t.visit(t.MOD,c=>{let l=De(c),u=o.get(l),f=r(c);u===f?s(f).mod(c):(o.set(l,f),s(u).rem(c),s(f).add(c))}):t.changed(t.MOD)&&t.visit(t.MOD,c=>{s(o.get(De(c))).mod(c)}),a&&t.visit(t.REFLOW,c=>{let l=De(c),u=o.get(l),f=r(c);u!==f&&(o.set(l,f),s(u).rem(c),s(f).add(c))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function kW(e){It.call(this,null,l9e,e)}ee(kW,It);function l9e(e){return this.value&&!e.modified()?this.value:F(e.name)?te(e.name).map(t=>wr(t)):wr(e.name,e.as)}function iA(e){$.call(this,b3(),e)}iA.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ee(iA,$,{transform(e,t){let n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,c=e.expr,l=!0;t.visit(t.REM,f=>{let d=De(f);r.has(d)?r.delete(d):a.push(f)}),t.visit(t.ADD,f=>{c(f,e)?o.push(f):r.set(De(f),1)});function u(f){let d=De(f),p=c(f,e),h=r.get(d);p&&h?(r.delete(d),o.push(f)):!p&&!h?(r.set(d,1),a.push(f)):l&&p&&!h&&s.push(f)}return t.visit(t.MOD,u),e.modified()&&(l=!1,t.visit(t.REFLOW,u)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function oA(e){$.call(this,[],e)}oA.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ee(oA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=VW(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,s=>{let c=r.map(h=>h(s)),l=c.reduce((h,m)=>Math.max(h,m.length),0),u=0,f,d,p;for(;u<l;++u){for(d=Ev(s),f=0;f<a;++f)d[i[f]]=(p=c[f][u])==null?null:p;o&&(d[o]=u),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function aA(e){$.call(this,[],e)}aA.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ee(aA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(un),o=e.as||["key","value"],a=o[0],s=o[1],c=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let u=0,f;u<c;++u)f=Ev(l),f[a]=i[u],f[s]=r[u](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function sA(e){$.call(this,null,e)}sA.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ee(sA,$,{transform(e,t){let n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,a=>a[r]=n(a,e))}});function TW(e){$.call(this,[],e)}ee(TW,$,{transform(e,t){let n=t.fork(t.ALL),r=e.generator,i=this.value,o=e.size-i.length,a,s,c;if(o>0){for(a=[];--o>=0;)a.push(c=lt(r(e))),i.push(c);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else s=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(s):s,i=i.slice(-o);return n.source=this.value=i,n}});var Wv={value:"value",median:X6,mean:sv,min:hl,max:Fo},u9e=[];function cA(e){$.call(this,[],e)}cA.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function f9e(e){var t=e.method||Wv.value,n;if(Wv[t]==null)B("Unrecognized imputation method: "+t);else return t===Wv.value?(n=e.value!==void 0?e.value:0,()=>n):Wv[t]}function d9e(e){let t=e.field;return n=>n?t(n):NaN}ee(cA,$,{transform(e,t){var n=t.fork(t.ALL),r=f9e(e),i=d9e(e),o=un(e.field),a=un(e.key),s=(e.groupby||[]).map(un),c=p9e(t.source,e.groupby,e.key,e.keyvals),l=[],u=this.value,f=c.domain.length,d,p,h,m,g,v,y,C,b,M;for(g=0,C=c.length;g<C;++g)for(d=c[g],h=d.values,p=NaN,y=0;y<f;++y)if(d[y]==null){for(m=c.domain[y],M={_impute:!0},v=0,b=h.length;v<b;++v)M[s[v]]=h[v];M[a]=m,M[o]=Number.isNaN(p)?p=r(d,i):p,l.push(lt(M))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),u.length&&(n.rem=n.materialize(n.REM).rem.concat(u)),this.value=l,n}});function p9e(e,t,n,r){var i=v=>v(g),o=[],a=r?r.slice():[],s={},c={},l,u,f,d,p,h,m,g;for(a.forEach((v,y)=>s[v]=y+1),d=0,m=e.length;d<m;++d)g=e[d],h=n(g),p=s[h]||(s[h]=a.push(h)),u=(l=t?t.map(i):u9e)+"",(f=c[u])||(f=c[u]=[],o.push(f),f.values=l),f[p-1]=g;return o.domain=a,o}function lA(e){_3.call(this,e)}lA.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Bd},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ee(lA,_3,{transform(e,t){let n=this,r=e.modified(),i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{ke(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){let e=this._adds,t=this._mods,n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function uA(e){$.call(this,null,e)}uA.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ee(uA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=eA(r,e.groupby,e.field),o=(e.groupby||[]).map(un),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",c=e.as||["value","density"],l=[],u=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;s!=="pdf"&&s!=="cdf"&&B("Invalid density method: "+s),e.resolve==="shared"&&(u||(u=Yi(r,e.field)),f=d=e.steps||d),i.forEach(p=>{let h=kv(p,a)[s],m=e.counts?p.length:1,g=u||Yi(p);uu(h,g,f,d).forEach(v=>{let y={};for(let C=0;C<o.length;++C)y[o[C]]=p.dims[C];y[c[0]]=v[0],y[c[1]]=v[1]*m,l.push(lt(y))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function IW(e){It.call(this,null,h9e,e)}ee(IW,It);function h9e(e){return this.value&&!e.modified()?this.value:rd(e.fields,e.flat)}function FW(e){$.call(this,[],e),this._pending=null}ee(FW,$,{transform(e,t){let n=t.dataflow;return this._pending?GL(this,t,this._pending):m9e(e)?t.StopPropagation:e.values?GL(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=te(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>GL(this,t,te(r.data)))}});function m9e(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function GL(e,t,n){n.forEach(lt);let r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function fA(e){$.call(this,{},e)}fA.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ee(fA,$,{transform(e,t){let n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,a=e.modified(),s=n.length,c=a?t.SOURCE:t.ADD,l=t,u=e.as,f,d,p;return i?(d=i.length,s>1&&!u&&B('Multi-field lookup requires explicit "as" parameter.'),u&&u.length!==s*d&&B('The "as" parameter has too few output field names.'),u=u||i.map(un),f=function(h){for(var m=0,g=0,v,y;m<s;++m)if(y=r.get(n[m](h)),y==null)for(v=0;v<d;++v,++g)h[u[g]]=o;else for(v=0;v<d;++v,++g)h[u[g]]=i[v](y)}):(u||B("Missing output field names."),f=function(h){for(var m=0,g;m<s;++m)g=r.get(n[m](h)),h[u[m]]=g??o}),a?l=t.reflow(!0):(p=n.some(h=>t.modified(h.fields)),c|=p?t.MOD:0),t.visit(c,f),l.modifies(u)}});function RW(e){It.call(this,null,g9e,e)}ee(RW,It);function g9e(e){if(this.value&&!e.modified())return this.value;let t=e.extents,n=t.length,r=1/0,i=-1/0,o,a;for(o=0;o<n;++o)a=t[o],a[0]<r&&(r=a[0]),a[1]>i&&(i=a[1]);return[r,i]}function OW(e){It.call(this,null,v9e,e)}ee(OW,It);function v9e(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function PW(e){$.call(this,null,e)}ee(PW,$,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function dA(e){_3.call(this,e)}dA.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Bd,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ee(dA,_3,{_transform:_3.prototype.transform,transform(e,t){return this._transform(y9e(e,t),t)}});function y9e(e,t){let n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=fr(n).concat(fr(r)),a=C9e(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>i),fields:a.map(s=>x9e(s,n,r,o)),as:a.map(s=>s+""),modified:e.modified.bind(e)}}function x9e(e,t,n,r){return Ci(i=>t(i)===e?n(i):NaN,r,e+"")}function C9e(e,t,n){let r={},i=[];return n.visit(n.SOURCE,o=>{let a=e(o);r[a]||(r[a]=1,i.push(a))}),i.sort(td),t?i.slice(0,t):i}function $W(e){Yv.call(this,e)}ee($W,Yv,{transform(e,t){let n=e.subflow,r=e.field,i=o=>this.subflow(De(o),n,t,o);return(e.modified("field")||r&&t.modified(fr(r)))&&B("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{let a=i(o);r(o).forEach(s=>a.mod(s))}),t.visit(t.ADD,o=>{let a=i(o);r(o).forEach(s=>a.add(lt(s)))}),t.visit(t.REM,o=>{let a=i(o);r(o).forEach(s=>a.rem(s))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function pA(e){$.call(this,null,e)}pA.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ee(pA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=VW(e.fields,e.as||[]),o=r?(s,c)=>b9e(s,c,r,i):Sl,a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,s=>{let c=De(s);n.rem.push(a[c]),a[c]=null}),t.visit(t.ADD,s=>{let c=o(s,lt({}));a[De(s)]=c,n.add.push(c)}),t.visit(t.MOD,s=>{n.mod.push(o(s,a[De(s)]))}),n}});function b9e(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function BW(e){$.call(this,null,e)}ee(BW,$,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function hA(e){$.call(this,null,e)}hA.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};var M9e=1e-14;ee(hA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;let i=t.materialize(t.SOURCE).source,o=eA(i,e.groupby,e.field),a=(e.groupby||[]).map(un),s=[],c=e.step||.01,l=e.probs||Un(c/2,1-M9e,c),u=l.length;return o.forEach(f=>{let d=Lv(f,l);for(let p=0;p<u;++p){let h={};for(let m=0;m<a.length;++m)h[a[m]]=f.dims[m];h[r[0]]=l[p],h[r[1]]=d[p],s.push(lt(h))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}});function UW(e){$.call(this,null,e)}ee(UW,$,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{let o=De(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{let o=Ev(i);r[De(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{let o=r[De(i)];for(let a in i)o[a]=i[a],n.modifies(a);n.mod.push(o)})),n}});function mA(e){$.call(this,[],e),this.count=0}mA.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ee(mA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((u,f)=>(u[De(f)]=1,u),{}),a=this.value,s=this.count,c=0;function l(u){let f,d;a.length<i?a.push(u):(d=~~((s+1)*e1()),d<a.length&&d>=c&&(f=a[d],o[De(f)]&&n.rem.push(f),a[d]=u)),++s}if(t.rem.length&&(t.visit(t.REM,u=>{let f=De(u);o[f]&&(o[f]=-1,n.rem.push(u)),--s}),a=a.filter(u=>o[De(u)]!==-1)),(t.rem.length||r)&&a.length<i&&t.source&&(c=s=a.length,t.visit(t.SOURCE,u=>{o[De(u)]||l(u)}),c=-1),r&&a.length>i){let u=a.length-i;for(let f=0;f<u;++f)o[De(a[f])]=-1,n.rem.push(a[f]);a=a.slice(u)}return t.mod.length&&t.visit(t.MOD,u=>{o[De(u)]&&n.mod.push(u)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||c<0)&&(n.add=a.filter(u=>!o[De(u)])),this.count=s,this.value=n.source=a,n}});function gA(e){$.call(this,null,e)}gA.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ee(gA,$,{transform(e,t){if(this.value&&!e.modified())return;let n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Un(e.start,e.stop,e.step||1).map(i=>{let o={};return o[r]=i,lt(o)}),n.add=t.add.concat(this.value),n}});function jW(e){$.call(this,null,e),this.modified(!0)}ee(jW,$,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function vA(e){$.call(this,null,e)}var qW=["unit0","unit1"];vA.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:pv,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:qW}]};ee(vA,$,{transform(e,t){let n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),a=(i?rc:nc)(o.unit).offset,s=e.as||qW,c=s[0],l=s[1],u=o.step,f=o.start||1/0,d=o.stop||-1/0,p=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(fr(n)))&&(t=t.reflow(!0),p=t.SOURCE,f=1/0,d=-1/0),t.visit(p,h=>{let m=n(h),g,v;m==null?(h[c]=null,r&&(h[l]=null)):(h[c]=g=v=o(m),r&&(h[l]=v=a(g,u)),g<f&&(f=g),v>d&&(d=v))}),o.start=f,o.stop=d,t.modifies(r?s:c)},_floor(e,t){let n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:vL({extent:e.extent||Yi(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=hv(r),a=this.value||{},s=(n?dL:fL)(o,i);return s.unit=Ge(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}});function GW(e){$.call(this,b3(),e)}ee(GW,$,{transform(e,t){let n=t.dataflow,r=e.field,i=this.value,o=s=>i.set(r(s),s),a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,s=>i.delete(r(s))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function WW(e){$.call(this,null,e)}ee(WW,$,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Ba(e.sort)):t.source).map(e.field))}});function w9e(e,t,n,r){let i=$d[e](t,n);return{init:i.init||S2,update:function(o,a){a[r]=i.next(o)}}}var $d={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{let n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{let n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){let e=$d.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{let n=t.data,r=t.compare,i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||B("ntile num must be greater than zero.");let n=$d.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{let r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{let r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||B("nth_value nth must be greater than zero."),{next:n=>{let r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{let r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{let i=r.data;return r.index<=n?t:(n=S9e(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function S9e(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}var E9e=Object.keys($d);function YW(e){let t=te(e.ops),n=te(e.fields),r=te(e.params),i=te(e.aggregate_params),o=te(e.as),a=this.outputs=[],s=this.windows=[],c={},l={},u=[],f=[],d=!0;function p(h){te(fr(h)).forEach(m=>c[m]=1)}p(e.sort),t.forEach((h,m)=>{let g=n[m],v=r[m],y=i[m]||null,C=un(g),b=wW(h,C,o[m]);if(p(g),a.push(b),de($d,h))s.push(w9e(h,g,v,b));else{if(g==null&&h!=="count"&&B("Null aggregate field specified."),h==="count"){u.push(b);return}d=!1;let M=l[C];M||(M=l[C]=[],M.field=g,f.push(M)),M.push(SW(h,y,b))}}),(u.length||f.length)&&(this.cell=D9e(f,u,d)),this.inputs=Object.keys(c)}var XW=YW.prototype;XW.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};XW.update=function(e,t){let n=this.cell,r=this.windows,i=e.data,o=r&&r.length,a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)};function D9e(e,t,n){e=e.map(c=>DW(c,c.field));let r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new YL;return r.add=function(c){if(r.num+=1,!n){s&&s.add(c);for(let l=0;l<i;++l)o[l].add(o[l].get(c),c)}},r.rem=function(c){if(r.num-=1,!n){s&&s.rem(c);for(let l=0;l<i;++l)o[l].rem(o[l].get(c),c)}},r.set=function(c){let l,u;for(s&&s.values(),l=0,u=t.length;l<u;++l)c[t[l]]=r.num;if(!n)for(l=0,u=o.length;l<u;++l)o[l].set(c)},r.init=function(){r.num=0,s&&s.reset();for(let c=0;c<i;++c)o[c].init()},r}function yA(e){$.call(this,{},e),this._mlen=0,this._mods=[]}yA.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:E9e.concat(Bd)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ee(yA,$,{transform(e,t){this.stamp=t.stamp;let n=e.modified(),r=Ba(e.sort),i=WL(e.groupby),o=s=>this.group(i(s)),a=this.state;(!a||n)&&(a=this.state=new YW(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,s=>o(s).add(s))):(t.visit(t.REM,s=>o(s).remove(s)),t.visit(t.ADD,s=>o(s).add(s)));for(let s=0,c=this._mlen;s<c;++s)z9e(this._mods[s],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=zW(De),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function z9e(e,t,n,r){let i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),c=s.length,l=o?ro(i):null,u={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||mn(-1)};t.init();for(let f=0;f<c;++f)H9e(u,a,f,c),o&&L9e(u,l),t.update(u,s[f])}function H9e(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function L9e(e,t){let n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}var zN={};Cr(zN,{bound:()=>mK,identifier:()=>DN,mark:()=>gK,overlap:()=>vK,render:()=>xK,viewlayout:()=>bK});function vt(e){return function(){return e}}var CA=Math.abs,Zr=Math.atan2,k3=Math.cos,QW=Math.max,Xv=Math.min,H2=Math.sin,cc=Math.sqrt,Dr=1e-12,T3=Math.PI,Ud=T3/2,Qv=2*T3;function KW(e){return e>1?0:e<-1?T3:Math.acos(e)}function bA(e){return e>=1?Ud:e<=-1?-Ud:Math.asin(e)}var MA=Math.PI,wA=2*MA,El=1e-6,A9e=wA-El;function ZW(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function V9e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ZW;let n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}var Dl=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ZW:V9e(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,c=r-t,l=i-n,u=a-t,f=s-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>El)if(!(Math.abs(f*c-l*u)>El)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-a,h=i-s,m=c*c+l*l,g=p*p+h*h,v=Math.sqrt(m),y=Math.sqrt(d),C=o*Math.tan((MA-Math.acos((m+d-g)/(2*v*y)))/2),b=C/y,M=C/v;Math.abs(b-1)>El&&this._append`L${t+b*u},${n+b*f}`,this._append`A${o},${o},0,0,${+(f*p>u*h)},${this._x1=t+M*c},${this._y1=n+M*l}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),c=r*Math.sin(i),l=t+s,u=n+c,f=1^a,d=a?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>El||Math.abs(this._y1-u)>El)&&this._append`L${l},${u}`,r&&(d<0&&(d=d%wA+wA),d>A9e?this._append`A${r},${r},0,1,${f},${t-s},${n-c}A${r},${r},0,1,${f},${this._x1=l},${this._y1=u}`:d>El&&this._append`A${r},${r},0,${+(d>=MA)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function zl(){return new Dl}zl.prototype=Dl.prototype;function I3(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{let r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Dl(t)}function N9e(e){return e.innerRadius}function _9e(e){return e.outerRadius}function k9e(e){return e.startAngle}function T9e(e){return e.endAngle}function I9e(e){return e&&e.padAngle}function F9e(e,t,n,r,i,o,a,s){var c=n-e,l=r-t,u=a-i,f=s-o,d=f*c-u*l;if(!(d*d<Dr))return d=(u*(t-o)-f*(e-i))/d,[e+d*c,t+d*l]}function Kv(e,t,n,r,i,o,a){var s=e-n,c=t-r,l=(a?o:-o)/cc(s*s+c*c),u=l*c,f=-l*s,d=e+u,p=t+f,h=n+u,m=r+f,g=(d+h)/2,v=(p+m)/2,y=h-d,C=m-p,b=y*y+C*C,M=i-o,S=d*m-h*p,w=(C<0?-1:1)*cc(QW(0,M*M*b-S*S)),E=(S*C-y*w)/b,D=(-S*y-C*w)/b,z=(S*C+y*w)/b,H=(-S*y+C*w)/b,j=E-g,L=D-v,N=z-g,A=H-v;return j*j+L*L>N*N+A*A&&(E=z,D=H),{cx:E,cy:D,x01:-u,y01:-f,x11:E*(i/M-1),y11:D*(i/M-1)}}function SA(){var e=N9e,t=_9e,n=vt(0),r=null,i=k9e,o=T9e,a=I9e,s=null,c=I3(l);function l(){var u,f,d=+e.apply(this,arguments),p=+t.apply(this,arguments),h=i.apply(this,arguments)-Ud,m=o.apply(this,arguments)-Ud,g=CA(m-h),v=m>h;if(s||(s=u=c()),p<d&&(f=p,p=d,d=f),!(p>Dr))s.moveTo(0,0);else if(g>Qv-Dr)s.moveTo(p*k3(h),p*H2(h)),s.arc(0,0,p,h,m,!v),d>Dr&&(s.moveTo(d*k3(m),d*H2(m)),s.arc(0,0,d,m,h,v));else{var y=h,C=m,b=h,M=m,S=g,w=g,E=a.apply(this,arguments)/2,D=E>Dr&&(r?+r.apply(this,arguments):cc(d*d+p*p)),z=Xv(CA(p-d)/2,+n.apply(this,arguments)),H=z,j=z,L,N;if(D>Dr){var A=bA(D/d*H2(E)),T=bA(D/p*H2(E));(S-=A*2)>Dr?(A*=v?1:-1,b+=A,M-=A):(S=0,b=M=(h+m)/2),(w-=T*2)>Dr?(T*=v?1:-1,y+=T,C-=T):(w=0,y=C=(h+m)/2)}var G=p*k3(y),X=p*H2(y),J=d*k3(M),we=d*H2(M);if(z>Dr){var Se=p*k3(C),Ze=p*H2(C),Et=d*k3(b),ut=d*H2(b),Jt;if(g<T3)if(Jt=F9e(G,X,Et,ut,Se,Ze,J,we)){var Ss=G-Jt[0],j0=X-Jt[1],_4=Se-Jt[0],me=Ze-Jt[1],Je=1/H2(KW((Ss*_4+j0*me)/(cc(Ss*Ss+j0*j0)*cc(_4*_4+me*me)))/2),ot=cc(Jt[0]*Jt[0]+Jt[1]*Jt[1]);H=Xv(z,(d-ot)/(Je-1)),j=Xv(z,(p-ot)/(Je+1))}else H=j=0}w>Dr?j>Dr?(L=Kv(Et,ut,G,X,p,j,v),N=Kv(Se,Ze,J,we,p,j,v),s.moveTo(L.cx+L.x01,L.cy+L.y01),j<z?s.arc(L.cx,L.cy,j,Zr(L.y01,L.x01),Zr(N.y01,N.x01),!v):(s.arc(L.cx,L.cy,j,Zr(L.y01,L.x01),Zr(L.y11,L.x11),!v),s.arc(0,0,p,Zr(L.cy+L.y11,L.cx+L.x11),Zr(N.cy+N.y11,N.cx+N.x11),!v),s.arc(N.cx,N.cy,j,Zr(N.y11,N.x11),Zr(N.y01,N.x01),!v))):(s.moveTo(G,X),s.arc(0,0,p,y,C,!v)):s.moveTo(G,X),!(d>Dr)||!(S>Dr)?s.lineTo(J,we):H>Dr?(L=Kv(J,we,Se,Ze,d,-H,v),N=Kv(G,X,Et,ut,d,-H,v),s.lineTo(L.cx+L.x01,L.cy+L.y01),H<z?s.arc(L.cx,L.cy,H,Zr(L.y01,L.x01),Zr(N.y01,N.x01),!v):(s.arc(L.cx,L.cy,H,Zr(L.y01,L.x01),Zr(L.y11,L.x11),!v),s.arc(0,0,d,Zr(L.cy+L.y11,L.cx+L.x11),Zr(N.cy+N.y11,N.cx+N.x11),v),s.arc(N.cx,N.cy,H,Zr(N.y11,N.x11),Zr(N.y01,N.x01),!v))):s.arc(0,0,d,M,b,v)}if(s.closePath(),u)return s=null,u+""||null}return l.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-T3/2;return[k3(f)*u,H2(f)*u]},l.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:vt(+u),l):e},l.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:vt(+u),l):t},l.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:vt(+u),l):n},l.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:vt(+u),l):r},l.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:vt(+u),l):i},l.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:vt(+u),l):o},l.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:vt(+u),l):a},l.context=function(u){return arguments.length?(s=u??null,l):s},l}var pJe=Array.prototype.slice;function Zv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function JW(e){this._context=e}JW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Hl(e){return new JW(e)}function Jv(e){return e[0]}function ey(e){return e[1]}function jd(e,t){var n=vt(!0),r=null,i=Hl,o=null,a=I3(s);e=typeof e=="function"?e:e===void 0?Jv:vt(e),t=typeof t=="function"?t:t===void 0?ey:vt(t);function s(c){var l,u=(c=Zv(c)).length,f,d=!1,p;for(r==null&&(o=i(p=a())),l=0;l<=u;++l)!(l<u&&n(f=c[l],l,c))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,l,c),+t(f,l,c));if(p)return o=null,p+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:vt(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:vt(+c),s):t},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:vt(!!c),s):n},s.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),s):i},s.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),s):r},s}function ty(e,t,n){var r=null,i=vt(!0),o=null,a=Hl,s=null,c=I3(l);e=typeof e=="function"?e:e===void 0?Jv:vt(+e),t=typeof t=="function"?t:t===void 0?vt(0):vt(+t),n=typeof n=="function"?n:n===void 0?ey:vt(+n);function l(f){var d,p,h,m=(f=Zv(f)).length,g,v=!1,y,C=new Array(m),b=new Array(m);for(o==null&&(s=a(y=c())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===v)if(v=!v)p=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=d-1;h>=p;--h)s.point(C[h],b[h]);s.lineEnd(),s.areaEnd()}v&&(C[d]=+e(g,d,f),b[d]=+t(g,d,f),s.point(r?+r(g,d,f):C[d],n?+n(g,d,f):b[d]))}if(y)return s=null,y+""||null}function u(){return jd().defined(i).curve(a).context(o)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:vt(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:vt(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:vt(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:vt(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:vt(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:vt(+f),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:vt(!!f),l):i},l.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),l):a},l.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),l):o},l}var eY={draw(e,t){let n=cc(t/T3);e.moveTo(n,0),e.arc(0,0,n,0,Qv)}};function ny(e,t){let n=null,r=I3(i);e=typeof e=="function"?e:vt(e||eY),t=typeof t=="function"?t:vt(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:vt(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:vt(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Bo(){}function fu(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function qd(e){this._context=e}qd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function EA(e){return new qd(e)}function tY(e){this._context=e}tY.prototype={areaStart:Bo,areaEnd:Bo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:fu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function DA(e){return new tY(e)}function nY(e){this._context=e}nY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:fu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zA(e){return new nY(e)}function rY(e,t){this._basis=new qd(e),this._beta=t}rY.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,a=t[n]-i,s=-1,c;++s<=n;)c=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+c*o),this._beta*t[s]+(1-this._beta)*(i+c*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var HA=function e(t){function n(r){return t===1?new qd(r):new rY(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function du(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function ry(e,t){this._context=e,this._k=(1-t)/6}ry.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:du(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:du(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var LA=function e(t){function n(r){return new ry(r,t)}return n.tension=function(r){return e(+r)},n}(0);function iy(e,t){this._context=e,this._k=(1-t)/6}iy.prototype={areaStart:Bo,areaEnd:Bo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:du(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var AA=function e(t){function n(r){return new iy(r,t)}return n.tension=function(r){return e(+r)},n}(0);function oy(e,t){this._context=e,this._k=(1-t)/6}oy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:du(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var VA=function e(t){function n(r){return new oy(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Gd(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>Dr){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>Dr){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*l+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function iY(e,t){this._context=e,this._alpha=t}iY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Gd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var NA=function e(t){function n(r){return t?new iY(r,t):new ry(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function oY(e,t){this._context=e,this._alpha=t}oY.prototype={areaStart:Bo,areaEnd:Bo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Gd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var _A=function e(t){function n(r){return t?new oY(r,t):new iy(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function aY(e,t){this._context=e,this._alpha=t}aY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Gd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var kA=function e(t){function n(r){return t?new aY(r,t):new oy(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function sY(e){this._context=e}sY.prototype={areaStart:Bo,areaEnd:Bo,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function TA(e){return new sY(e)}function cY(e){return e<0?-1:1}function lY(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(cY(o)+cY(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function uY(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function IA(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function ay(e){this._context=e}ay.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:IA(this,this._t0,uY(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,IA(this,uY(this,n=lY(this,e,t)),n);break;default:IA(this,this._t0,n=lY(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function fY(e){this._context=new dY(e)}(fY.prototype=Object.create(ay.prototype)).point=function(e,t){ay.prototype.point.call(this,t,e)};function dY(e){this._context=e}dY.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function FA(e){return new ay(e)}function RA(e){return new fY(e)}function hY(e){this._context=e}hY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=pY(e),i=pY(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function pY(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function OA(e){return new hY(e)}function sy(e,t){this._context=e,this._t=t}sy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function PA(e){return new sy(e,.5)}function $A(e){return new sy(e,0)}function BA(e){return new sy(e,1)}function Uo(e,t){if(typeof document<"u"&&document.createElement){let n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}var mY=()=>typeof Image<"u"?Image:null;function Jn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ua(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}var pu=Symbol("implicit");function Ll(){var e=new Y6,t=[],n=[],r=pu;function i(o){let a=e.get(o);if(a===void 0){if(r!==pu)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Y6;for(let a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Ll(t,n).unknown(r)},Jn.apply(i,arguments),i}var nV={};Cr(nV,{interpolate:()=>wi,interpolateArray:()=>$Y,interpolateBasis:()=>my,interpolateBasisClosed:()=>gy,interpolateCubehelix:()=>oX,interpolateCubehelixLong:()=>aX,interpolateDate:()=>yy,interpolateDiscrete:()=>BY,interpolateHcl:()=>nX,interpolateHclLong:()=>rX,interpolateHsl:()=>JY,interpolateHslLong:()=>eX,interpolateHue:()=>UY,interpolateLab:()=>tV,interpolateNumber:()=>Si,interpolateNumberArray:()=>yu,interpolateObject:()=>xy,interpolateRgb:()=>Qd,interpolateRgbBasis:()=>OY,interpolateRgbBasisClosed:()=>PY,interpolateRound:()=>Wa,interpolateString:()=>Cy,interpolateTransformCss:()=>YY,interpolateTransformSvg:()=>XY,interpolateZoom:()=>KY,piecewise:()=>Il,quantize:()=>sX});function lc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function F3(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function qa(){}var R3=.7,Nl=1/R3,hu="\\s*([+-]?\\d+)\\s*",Wd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ja="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",O9e=/^#([0-9a-f]{3,8})$/,P9e=new RegExp(`^rgb\\(${hu},${hu},${hu}\\)$`),$9e=new RegExp(`^rgb\\(${ja},${ja},${ja}\\)$`),B9e=new RegExp(`^rgba\\(${hu},${hu},${hu},${Wd}\\)$`),U9e=new RegExp(`^rgba\\(${ja},${ja},${ja},${Wd}\\)$`),j9e=new RegExp(`^hsl\\(${Wd},${ja},${ja}\\)$`),q9e=new RegExp(`^hsla\\(${Wd},${ja},${ja},${Wd}\\)$`),gY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lc(qa,O3,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vY,formatHex:vY,formatHex8:G9e,formatHsl:W9e,formatRgb:yY,toString:yY});function vY(){return this.rgb().formatHex()}function G9e(){return this.rgb().formatHex8()}function W9e(){return SY(this).formatHsl()}function yY(){return this.rgb().formatRgb()}function O3(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=O9e.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?xY(t):n===3?new er(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?cy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?cy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=P9e.exec(e))?new er(t[1],t[2],t[3],1):(t=$9e.exec(e))?new er(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=B9e.exec(e))?cy(t[1],t[2],t[3],t[4]):(t=U9e.exec(e))?cy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=j9e.exec(e))?MY(t[1],t[2]/100,t[3]/100,1):(t=q9e.exec(e))?MY(t[1],t[2]/100,t[3]/100,t[4]):gY.hasOwnProperty(e)?xY(gY[e]):e==="transparent"?new er(NaN,NaN,NaN,0):null}function xY(e){return new er(e>>16&255,e>>8&255,e&255,1)}function cy(e,t,n,r){return r<=0&&(e=t=n=NaN),new er(e,t,n,r)}function Yd(e){return e instanceof qa||(e=O3(e)),e?(e=e.rgb(),new er(e.r,e.g,e.b,e.opacity)):new er}function jo(e,t,n,r){return arguments.length===1?Yd(e):new er(e,t,n,r??1)}function er(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}lc(er,jo,F3(qa,{brighter(e){return e=e==null?Nl:Math.pow(Nl,e),new er(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?R3:Math.pow(R3,e),new er(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new er(Vl(this.r),Vl(this.g),Vl(this.b),uy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:CY,formatHex:CY,formatHex8:Y9e,formatRgb:bY,toString:bY}));function CY(){return`#${Al(this.r)}${Al(this.g)}${Al(this.b)}`}function Y9e(){return`#${Al(this.r)}${Al(this.g)}${Al(this.b)}${Al((isNaN(this.opacity)?1:this.opacity)*255)}`}function bY(){let e=uy(this.opacity);return`${e===1?"rgb(":"rgba("}${Vl(this.r)}, ${Vl(this.g)}, ${Vl(this.b)}${e===1?")":`, ${e})`}`}function uy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Vl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Al(e){return e=Vl(e),(e<16?"0":"")+e.toString(16)}function MY(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new L2(e,t,n,r)}function SY(e){if(e instanceof L2)return new L2(e.h,e.s,e.l,e.opacity);if(e instanceof qa||(e=O3(e)),!e)return new L2;if(e instanceof L2)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new L2(a,s,c,e.opacity)}function _l(e,t,n,r){return arguments.length===1?SY(e):new L2(e,t,n,r??1)}function L2(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}lc(L2,_l,F3(qa,{brighter(e){return e=e==null?Nl:Math.pow(Nl,e),new L2(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?R3:Math.pow(R3,e),new L2(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new er(UA(e>=240?e-240:e+120,i,r),UA(e,i,r),UA(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new L2(wY(this.h),ly(this.s),ly(this.l),uy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=uy(this.opacity);return`${e===1?"hsl(":"hsla("}${wY(this.h)}, ${ly(this.s)*100}%, ${ly(this.l)*100}%${e===1?")":`, ${e})`}`}}));function wY(e){return e=(e||0)%360,e<0?e+360:e}function ly(e){return Math.max(0,Math.min(1,e||0))}function UA(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var fy=Math.PI/180,dy=180/Math.PI;var py=18,EY=.96422,DY=1,zY=.82521,HY=4/29,mu=6/29,LY=3*mu*mu,X9e=mu*mu*mu;function AY(e){if(e instanceof Ga)return new Ga(e.l,e.a,e.b,e.opacity);if(e instanceof uc)return VY(e);e instanceof er||(e=Yd(e));var t=WA(e.r),n=WA(e.g),r=WA(e.b),i=jA((.2225045*t+.7168786*n+.0606169*r)/DY),o,a;return t===n&&n===r?o=a=i:(o=jA((.4360747*t+.3850649*n+.1430804*r)/EY),a=jA((.0139322*t+.0971045*n+.7141733*r)/zY)),new Ga(116*i-16,500*(o-i),200*(i-a),e.opacity)}function P3(e,t,n,r){return arguments.length===1?AY(e):new Ga(e,t,n,r??1)}function Ga(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}lc(Ga,P3,F3(qa,{brighter(e){return new Ga(this.l+py*(e??1),this.a,this.b,this.opacity)},darker(e){return new Ga(this.l-py*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=EY*qA(t),e=DY*qA(e),n=zY*qA(n),new er(GA(3.1338561*t-1.6168667*e-.4906146*n),GA(-.9787684*t+1.9161415*e+.033454*n),GA(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function jA(e){return e>X9e?Math.pow(e,1/3):e/LY+HY}function qA(e){return e>mu?e*e*e:LY*(e-HY)}function GA(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function WA(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Q9e(e){if(e instanceof uc)return new uc(e.h,e.c,e.l,e.opacity);if(e instanceof Ga||(e=AY(e)),e.a===0&&e.b===0)return new uc(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*dy;return new uc(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function kl(e,t,n,r){return arguments.length===1?Q9e(e):new uc(e,t,n,r??1)}function uc(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function VY(e){if(isNaN(e.h))return new Ga(e.l,0,0,e.opacity);var t=e.h*fy;return new Ga(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}lc(uc,kl,F3(qa,{brighter(e){return new uc(this.h,this.c,this.l+py*(e??1),this.opacity)},darker(e){return new uc(this.h,this.c,this.l-py*(e??1),this.opacity)},rgb(){return VY(this).rgb()}}));var TY=-.14861,YA=1.78277,XA=-.29227,hy=-.90649,Xd=1.97294,NY=Xd*hy,_Y=Xd*YA,kY=YA*XA-hy*TY;function K9e(e){if(e instanceof Tl)return new Tl(e.h,e.s,e.l,e.opacity);e instanceof er||(e=Yd(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(kY*r+NY*t-_Y*n)/(kY+NY-_Y),o=r-i,a=(Xd*(n-i)-XA*o)/hy,s=Math.sqrt(a*a+o*o)/(Xd*i*(1-i)),c=s?Math.atan2(a,o)*dy-120:NaN;return new Tl(c<0?c+360:c,s,i,e.opacity)}function gu(e,t,n,r){return arguments.length===1?K9e(e):new Tl(e,t,n,r??1)}function Tl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}lc(Tl,gu,F3(qa,{brighter(e){return e=e==null?Nl:Math.pow(Nl,e),new Tl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?R3:Math.pow(R3,e),new Tl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*fy,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new er(255*(t+n*(TY*r+YA*i)),255*(t+n*(XA*r+hy*i)),255*(t+n*(Xd*r)),this.opacity)}}));function QA(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function my(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return QA((n-r/t)*t,a,i,o,s)}}function gy(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return QA((n-r/t)*t,i,o,a,s)}}var vu=e=>()=>e;function IY(e,t){return function(n){return e+n*t}}function Z9e(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function $3(e,t){var n=t-e;return n?IY(e,n>180||n<-180?n-360*Math.round(n/360):n):vu(isNaN(e)?t:e)}function FY(e){return(e=+e)==1?vn:function(t,n){return n-t?Z9e(t,n,e):vu(isNaN(t)?n:t)}}function vn(e,t){var n=t-e;return n?IY(e,n):vu(isNaN(e)?t:e)}var Qd=function e(t){var n=FY(t);function r(i,o){var a=n((i=jo(i)).r,(o=jo(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),l=vn(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function RY(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=jo(t[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=e(r),i=e(i),o=e(o),s.opacity=1,function(c){return s.r=r(c),s.g=i(c),s.b=o(c),s+""}}}var OY=RY(my),PY=RY(gy);function yu(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function vy(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function $Y(e,t){return(vy(t)?yu:KA)(e,t)}function KA(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=wi(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function yy(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Si(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function xy(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=wi(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var JA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ZA=new RegExp(JA.source,"g");function J9e(e){return function(){return e}}function ege(e){return function(t){return e(t)+""}}function Cy(e,t){var n=JA.lastIndex=ZA.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(e=e+"",t=t+"";(r=JA.exec(e))&&(i=ZA.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:Si(r,i)})),n=ZA.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?ege(c[0].x):J9e(t):(t=c.length,function(l){for(var u=0,f;u<t;++u)s[(f=c[u]).i]=f.x(l);return s.join("")})}function wi(e,t){var n=typeof t,r;return t==null||n==="boolean"?vu(t):(n==="number"?Si:n==="string"?(r=O3(t))?(t=r,Qd):Cy:t instanceof O3?Qd:t instanceof Date?yy:vy(t)?yu:Array.isArray(t)?KA:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?xy:Si)(e,t)}function BY(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function UY(e,t){var n=$3(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Wa(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var jY=180/Math.PI,by={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function eV(e,t,n,r,i,o){var a,s,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*jY,skewX:Math.atan(c)*jY,scaleX:a,scaleY:s}}var My;function qY(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?by:eV(t.a,t.b,t.c,t.d,t.e,t.f)}function GY(e){return e==null?by:(My||(My=document.createElementNS("http://www.w3.org/2000/svg","g")),My.setAttribute("transform",e),(e=My.transform.baseVal.consolidate())?(e=e.matrix,eV(e.a,e.b,e.c,e.d,e.e,e.f)):by)}function WY(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,d,p,h){if(l!==f||u!==d){var m=p.push("translate(",null,t,null,n);h.push({i:m-4,x:Si(l,f)},{i:m-2,x:Si(u,d)})}else(f||d)&&p.push("translate("+f+t+d+n)}function a(l,u,f,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Si(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function s(l,u,f,d){l!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Si(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,d,p,h){if(l!==f||u!==d){var m=p.push(i(p)+"scale(",null,",",null,")");h.push({i:m-4,x:Si(l,f)},{i:m-2,x:Si(u,d)})}else(f!==1||d!==1)&&p.push(i(p)+"scale("+f+","+d+")")}return function(l,u){var f=[],d=[];return l=e(l),u=e(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,d),a(l.rotate,u.rotate,f,d),s(l.skewX,u.skewX,f,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,d),l=u=null,function(p){for(var h=-1,m=d.length,g;++h<m;)f[(g=d[h]).i]=g.x(p);return f.join("")}}}var YY=WY(qY,"px, ","px)","deg)"),XY=WY(GY,", ",")",")");var tge=1e-12;function QY(e){return((e=Math.exp(e))+1/e)/2}function nge(e){return((e=Math.exp(e))-1/e)/2}function rge(e){return((e=Math.exp(2*e))-1)/(e+1)}var KY=function e(t,n,r){function i(o,a){var s=o[0],c=o[1],l=o[2],u=a[0],f=a[1],d=a[2],p=u-s,h=f-c,m=p*p+h*h,g,v;if(m<tge)v=Math.log(d/l)/t,g=function(w){return[s+w*p,c+w*h,l*Math.exp(t*w*v)]};else{var y=Math.sqrt(m),C=(d*d-l*l+r*m)/(2*l*n*y),b=(d*d-l*l-r*m)/(2*d*n*y),M=Math.log(Math.sqrt(C*C+1)-C),S=Math.log(Math.sqrt(b*b+1)-b);v=(S-M)/t,g=function(w){var E=w*v,D=QY(M),z=l/(n*y)*(D*rge(t*E+M)-nge(M));return[s+z*p,c+z*h,l*D/QY(t*E+M)]}}return g.duration=v*1e3*t/Math.SQRT2,g}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return e(a,s,c)},i}(Math.SQRT2,2,4);function ZY(e){return function(t,n){var r=e((t=_l(t)).h,(n=_l(n)).h),i=vn(t.s,n.s),o=vn(t.l,n.l),a=vn(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=o(s),t.opacity=a(s),t+""}}}var JY=ZY($3),eX=ZY(vn);function tV(e,t){var n=vn((e=P3(e)).l,(t=P3(t)).l),r=vn(e.a,t.a),i=vn(e.b,t.b),o=vn(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=o(a),e+""}}function tX(e){return function(t,n){var r=e((t=kl(t)).h,(n=kl(n)).h),i=vn(t.c,n.c),o=vn(t.l,n.l),a=vn(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=o(s),t.opacity=a(s),t+""}}}var nX=tX($3),rX=tX(vn);function iX(e){return function t(n){n=+n;function r(i,o){var a=e((i=gu(i)).h,(o=gu(o)).h),s=vn(i.s,o.s),c=vn(i.l,o.l),l=vn(i.opacity,o.opacity);return function(u){return i.h=a(u),i.s=s(u),i.l=c(Math.pow(u,n)),i.opacity=l(u),i+""}}return r.gamma=t,r}(1)}var oX=iX($3),aX=iX(vn);function Il(e,t){t===void 0&&(t=e,e=wi);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function sX(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function rV(e){return function(){return e}}function xu(e){return+e}var cX=[0,1];function Jr(e){return e}function iV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:rV(isNaN(t)?NaN:.5)}function ige(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function oge(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=iV(i,r),o=n(a,o)):(r=iV(r,i),o=n(o,a)),function(s){return o(r(s))}}function age(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=iV(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var c=D2(e,s,1,r)-1;return o[c](i[c](s))}}function Ya(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Fl(){var e=cX,t=cX,n=wi,r,i,o,a=Jr,s,c,l;function u(){var d=Math.min(e.length,t.length);return a!==Jr&&(a=ige(e[0],e[d-1])),s=d>2?age:oge,c=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(c||(c=s(e.map(r),t,n)))(r(a(d)))}return f.invert=function(d){return a(i((l||(l=s(t,e.map(r),Si)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,xu),u()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Wa,u()},f.clamp=function(d){return arguments.length?(a=d?!0:Jr,u()):a!==Jr},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,p){return r=d,i=p,u()}}function Kd(){return Fl()(Jr,Jr)}function Cu(e,t,n,r){var i=Xi(e,t,n),o;switch(r=io(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=hd(i,a))&&(r.precision=o),Z6(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=md(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=pd(i))&&(r.precision=o-(r.type==="%")*2);break}}return w3(r)}function ao(e){var t=e.domain;return e.ticks=function(n){var r=t();return pl(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Cu(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],s=r[o],c,l,u=10;for(s<a&&(l=a,a=s,s=l,l=i,i=o,o=l);u-- >0;){if(l=ld(a,s,n),l===c)return r[i]=a,r[o]=s,t(r);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;c=l}return e},e}function Zd(){var e=Kd();return e.copy=function(){return Ya(e,Zd())},Jn.apply(e,arguments),ao(e)}function Jd(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,xu),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Jd(e).unknown(t)},e=arguments.length?Array.from(e,xu):[0,1],ao(n)}function e7(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function lX(e){return Math.log(e)}function uX(e){return Math.exp(e)}function sge(e){return-Math.log(-e)}function cge(e){return-Math.exp(-e)}function lge(e){return isFinite(e)?+("1e"+e):e<0?0:e}function uge(e){return e===10?lge:e===Math.E?Math.exp:t=>Math.pow(e,t)}function fge(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function fX(e){return(t,n)=>-e(-t,n)}function t7(e){let t=e(lX,uX),n=t.domain,r=10,i,o;function a(){return i=fge(r),o=uge(r),n()[0]<0?(i=fX(i),o=fX(o),e(sge,cge)):e(lX,uX),t}return t.base=function(s){return arguments.length?(r=+s,a()):r},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=s=>{let c=n(),l=c[0],u=c[c.length-1],f=u<l;f&&([l,u]=[u,l]);let d=i(l),p=i(u),h,m,g=s==null?10:+s,v=[];if(!(r%1)&&p-d<g){if(d=Math.floor(d),p=Math.ceil(p),l>0){for(;d<=p;++d)for(h=1;h<r;++h)if(m=d<0?h/o(-d):h*o(d),!(m<l)){if(m>u)break;v.push(m)}}else for(;d<=p;++d)for(h=r-1;h>=1;--h)if(m=d>0?h/o(-d):h*o(d),!(m<l)){if(m>u)break;v.push(m)}v.length*2<g&&(v=pl(l,u,g))}else v=pl(d,p,Math.min(p-d,g)).map(o);return f?v.reverse():v},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=io(c)).precision==null&&(c.trim=!0),c=w3(c)),s===1/0)return c;let l=Math.max(1,r*s/t.ticks().length);return u=>{let f=u/o(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=l?c(u):""}},t.nice=()=>n(e7(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),t}function n7(){let e=t7(Fl()).domain([1,10]);return e.copy=()=>Ya(e,n7()).base(e.base()),Jn.apply(e,arguments),e}function dX(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function pX(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function r7(e){var t=1,n=e(dX(t),pX(t));return n.constant=function(r){return arguments.length?e(dX(t=+r),pX(t)):t},ao(n)}function i7(){var e=r7(Fl());return e.copy=function(){return Ya(e,i7()).constant(e.constant())},Jn.apply(e,arguments)}function hX(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function dge(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function pge(e){return e<0?-e*e:e*e}function o7(e){var t=e(Jr,Jr),n=1;function r(){return n===1?e(Jr,Jr):n===.5?e(dge,pge):e(hX(n),hX(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},ao(t)}function bu(){var e=o7(Fl());return e.copy=function(){return Ya(e,bu()).exponent(e.exponent())},Jn.apply(e,arguments),e}function oV(){return bu.apply(null,arguments).exponent(.5)}function a7(){var e=[],t=[],n=[],r;function i(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=fd(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:t[D2(n,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(bi),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return a7().domain(e).range(t).unknown(r)},Jn.apply(o,arguments)}function s7(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function a(c){return c!=null&&c<=c?i[D2(r,c,0,n)]:o}function s(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return a}return a.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},a.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,s()):i.slice()},a.invertExtent=function(c){var l=i.indexOf(c);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},a.unknown=function(c){return arguments.length&&(o=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return s7().domain([e,t]).range(i).unknown(o)},Jn.apply(ao(a),arguments)}function c7(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[D2(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return c7().domain(e).range(t).unknown(n)},Jn.apply(i,arguments)}function hge(e){return new Date(e)}function mge(e){return e instanceof Date?+e:+new Date(+e)}function wy(e,t,n,r,i,o,a,s,c,l){var u=Kd(),f=u.invert,d=u.domain,p=l(".%L"),h=l(":%S"),m=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),y=l("%b %d"),C=l("%B"),b=l("%Y");function M(S){return(c(S)<S?p:s(S)<S?h:a(S)<S?m:o(S)<S?g:r(S)<S?i(S)<S?v:y:n(S)<S?C:b)(S)}return u.invert=function(S){return new Date(f(S))},u.domain=function(S){return arguments.length?d(Array.from(S,mge)):d().map(hge)},u.ticks=function(S){var w=d();return e(w[0],w[w.length-1],S??10)},u.tickFormat=function(S,w){return w==null?M:l(w)},u.nice=function(S){var w=d();return(!S||typeof S.range!="function")&&(S=t(w[0],w[w.length-1],S??10)),S?d(e7(w,S)):u},u.copy=function(){return Ya(u,wy(e,t,n,r,i,o,a,s,c,l))},u}function Sy(){return Jn.apply(wy(KH,ZH,Qi,ec,Oo,H1,D3,S3,Mi,iu).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ey(){return Jn.apply(wy(XH,QH,Ki,tc,Po,Ro,z3,E3,Mi,ou).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Dy(){var e=0,t=1,n,r,i,o,a=Jr,s=!1,c;function l(f){return f==null||isNaN(f=+f)?c:a(i===0?.5:(f=(o(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(s=!!f,l):s},l.interpolator=function(f){return arguments.length?(a=f,l):a};function u(f){return function(d){var p,h;return arguments.length?([p,h]=d,a=f(p,h),l):[a(0),a(1)]}}return l.range=u(wi),l.rangeRound=u(Wa),l.unknown=function(f){return arguments.length?(c=f,l):c},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function fc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Mu(){var e=ao(Dy()(Jr));return e.copy=function(){return fc(e,Mu())},Ua.apply(e,arguments)}function zy(){var e=t7(Dy()).domain([1,10]);return e.copy=function(){return fc(e,zy()).base(e.base())},Ua.apply(e,arguments)}function Hy(){var e=r7(Dy());return e.copy=function(){return fc(e,Hy()).constant(e.constant())},Ua.apply(e,arguments)}function l7(){var e=o7(Dy());return e.copy=function(){return fc(e,l7()).exponent(e.exponent())},Ua.apply(e,arguments)}function aV(){return l7.apply(null,arguments).exponent(.5)}function Ly(){var e=0,t=.5,n=1,r=1,i,o,a,s,c,l=Jr,u,f=!1,d;function p(m){return isNaN(m=+m)?d:(m=.5+((m=+u(m))-o)*(r*m<r*o?s:c),l(f?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,n]=m,i=u(e=+e),o=u(t=+t),a=u(n=+n),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,p):[e,t,n]},p.clamp=function(m){return arguments.length?(f=!!m,p):f},p.interpolator=function(m){return arguments.length?(l=m,p):l};function h(m){return function(g){var v,y,C;return arguments.length?([v,y,C]=g,l=Il(m,[v,y,C]),p):[l(0),l(.5),l(1)]}}return p.range=h(wi),p.rangeRound=h(Wa),p.unknown=function(m){return arguments.length?(d=m,p):d},function(m){return u=m,i=m(e),o=m(t),a=m(n),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,p}}function u7(){var e=ao(Ly()(Jr));return e.copy=function(){return fc(e,u7())},Ua.apply(e,arguments)}function Ay(){var e=t7(Ly()).domain([.1,1,10]);return e.copy=function(){return fc(e,Ay()).base(e.base())},Ua.apply(e,arguments)}function Vy(){var e=r7(Ly());return e.copy=function(){return fc(e,Vy()).constant(e.constant())},Ua.apply(e,arguments)}function f7(){var e=o7(Ly());return e.copy=function(){return fc(e,f7()).exponent(e.exponent())},Ua.apply(e,arguments)}function sV(){return f7.apply(null,arguments).exponent(.5)}function d7(e,t,n){let r=e-t+n*2;return e?r>0?r:1:0}var vge="identity",Ol="linear",Xa="log",wu="pow",Su="sqrt",p7="symlog",B3="time",U3="utc",A2="sequential",Pl="diverging",Rl="quantile",h7="quantize",m7="threshold",_y="ordinal",ky="point",lV="band",Ty="bin-ordinal",hr="continuous",g7="discrete",v7="discretizing",qo="interpolating",uV="temporal";function yge(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function xge(e){return function(t){let n=e.range(),r=t[0],i=t[1],o=-1,a,s,c,l;for(i<r&&(s=r,r=i,i=s),c=0,l=n.length;c<l;++c)n[c]>=r&&n[c]<=i&&(o<0&&(o=c),a=c);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function fV(){let e=Ll().unknown(void 0),t=e.domain,n=e.range,r=[0,1],i,o,a=!1,s=0,c=0,l=.5;delete e.unknown;function u(){let f=t().length,d=r[1]<r[0],p=r[1-d],h=d7(f,s,c),m=r[d-0];i=(p-m)/(h||1),a&&(i=Math.floor(i)),m+=(p-m-i*(f-s))*l,o=i*(1-s),a&&(m=Math.round(m),o=Math.round(o));let g=Un(f).map(v=>m+i*v);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),u()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],u()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,u()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,u()):a},e.padding=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),s=c,u()):s},e.paddingInner=function(f){return arguments.length?(s=Math.max(0,Math.min(1,f)),u()):s},e.paddingOuter=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),u()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;let d=r[1]<r[0],p=d?n().reverse():n(),h=p.length-1,m=+f[0],g=+f[1],v,y,C;if(!(m!==m||g!==g)&&(g<m&&(C=m,m=g,g=C),!(g<p[0]||m>r[1-d])))return v=Math.max(0,dl(p,m)-1),y=m===g?v:dl(p,g)-1,m-p[v]>o+1e-10&&++v,d&&(C=v,v=h-y,y=h-C),v>y?void 0:t().slice(v,y+1)},e.invert=function(f){let d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return fV().domain(t()).range(r).round(a).paddingInner(s).paddingOuter(c).align(l)},u()}function yX(e){let t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return yX(t())},e}function Cge(){return yX(fV().paddingInner(1))}var bge=Array.prototype.map;function Mge(e){return bge.call(e,Bn)}var wge=Array.prototype.slice;function xX(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(D2(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Mge(r),n):e.slice()},n.range=function(r){return arguments.length?(t=wge.call(r),n):t.slice()},n.tickFormat=function(r,i){return Cu(e[0],Ge(e),r??10,i)},n.copy=function(){return xX().domain(n.domain()).range(n.range())},n}var Ny=new Map,CX=Symbol("vega_scale");function dV(e){return e[CX]=!0,e}function bX(e){return e&&e[CX]===!0}function Sge(e,t,n){let r=function(){let o=t();return o.invertRange||(o.invertRange=o.invert?yge(o):o.invertExtent?xge(o):void 0),o.type=e,dV(o)};return r.metadata=pr(te(n)),r}function dt(e,t,n){return arguments.length>1?(Ny.set(e,Sge(e,t,n)),this):pV(e)?Ny.get(e):void 0}dt(vge,Jd);dt(Ol,Zd,hr);dt(Xa,n7,[hr,Xa]);dt(wu,bu,hr);dt(Su,oV,hr);dt(p7,i7,hr);dt(B3,Sy,[hr,uV]);dt(U3,Ey,[hr,uV]);dt(A2,Mu,[hr,qo]);dt(`${A2}-${Ol}`,Mu,[hr,qo]);dt(`${A2}-${Xa}`,zy,[hr,qo,Xa]);dt(`${A2}-${wu}`,l7,[hr,qo]);dt(`${A2}-${Su}`,aV,[hr,qo]);dt(`${A2}-${p7}`,Hy,[hr,qo]);dt(`${Pl}-${Ol}`,u7,[hr,qo]);dt(`${Pl}-${Xa}`,Ay,[hr,qo,Xa]);dt(`${Pl}-${wu}`,f7,[hr,qo]);dt(`${Pl}-${Su}`,sV,[hr,qo]);dt(`${Pl}-${p7}`,Vy,[hr,qo]);dt(Rl,a7,[v7,Rl]);dt(h7,s7,v7);dt(m7,c7,v7);dt(Ty,xX,[g7,v7]);dt(_y,Ll,g7);dt(lV,fV,g7);dt(ky,Cge,g7);function pV(e){return Ny.has(e)}function $l(e,t){let n=Ny.get(e);return n&&n.metadata[t]}function y7(e){return $l(e,hr)}function j3(e){return $l(e,g7)}function Iy(e){return $l(e,v7)}function hV(e){return $l(e,Xa)}function Ege(e){return $l(e,uV)}function mV(e){return $l(e,qo)}function gV(e){return $l(e,Rl)}var Dge=["clamp","base","constant","exponent"];function Fy(e,t){let n=t[0],r=Ge(t)-n;return function(i){return e(n+i*r)}}function Eu(e,t,n){return Il(x7(t||"rgb",n),e)}function Ry(e,t){let n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function Oy(e,t,n){let r=n-t,i,o,a;return!r||!Number.isFinite(r)?mn(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=dt(o)().domain([t,n]).range([0,1]),Dge.forEach(s=>e[s]?a[s](e[s]()):0),a)}function x7(e,t){let n=nV[zge(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function zge(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}var Hge={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Lge={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function MX(e){let t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function wX(e,t){for(let n in e)C7(n,t(e[n]))}var mX={};wX(Lge,MX);wX(Hge,e=>Eu(MX(e)));function C7(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(mX[e]=t,this):mX[e]}var b7="symbol",Age="discrete",SX="gradient",Vge=e=>F(e)?e.map(t=>String(t)):String(e),Nge=(e,t)=>e[1]-t[1],_ge=(e,t)=>t[1]-e[1];function Py(e,t,n){let r;return Pe(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Ks(e.domain())/n||1)+1))),ne(t)&&(r=t.step,t=t.interval),Q(t)&&(t=e.type===B3?nc(t):e.type==U3?rc(t):B("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function vV(e,t,n){let r=e.range(),i=r[0],o=Ge(r),a=Nge;if(i>o&&(r=o,o=i,i=r,a=_ge),i=Math.floor(i),o=Math.ceil(o),t=t.map(s=>[s,e(s)]).filter(s=>i<=s[1]&&s[1]<=o).sort(a).map(s=>s[0]),n>0&&t.length>1){let s=[t[0],Ge(t)];for(;t.length>n&&t.length>=3;)t=t.filter((c,l)=>!(l%2));t.length<3&&(t=s)}return t}function $y(e,t){return e.bins?vV(e,e.bins):e.ticks?e.ticks(t):e.domain()}function yV(e,t,n,r,i,o){let a=t.type,s=Vge;if(a===B3||i===B3)s=e.timeFormat(r);else if(a===U3||i===U3)s=e.utcFormat(r);else if(hV(a)){let c=e.formatFloat(r);if(o||t.bins)s=c;else{let l=EX(t,n,!1);s=u=>l(u)?c(u):""}}else if(t.tickFormat){let c=t.domain();s=e.formatSpan(c[0],c[c.length-1],n,r)}else r&&(s=e.format(r));return s}function EX(e,t,n){let r=$y(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=c=>{let l=c/Math.pow(i,Math.round(Math.log(c)/o));return l*i<i-.5&&(l*=i),l<=a};return n?r.filter(s):s}var cV={[Rl]:"quantiles",[h7]:"thresholds",[m7]:"domain"},DX={[Rl]:"quantiles",[h7]:"domain"};function xV(e,t){return e.bins?Ige(e.bins):e.type===Xa?EX(e,t,!0):cV[e.type]?Tge(e[cV[e.type]]()):$y(e,t)}function kge(e,t,n){let r=t[DX[t.type]](),i=r.length,o=i>1?r[1]-r[0]:r[0],a;for(a=1;a<i;++a)o=Math.min(o,r[a]-r[a-1]);return e.formatSpan(0,o,3*10,n)}function Tge(e){let t=[-1/0].concat(e);return t.max=1/0,t}function Ige(e){let t=e.slice(0,-1);return t.max=Ge(e),t}var Fge=e=>cV[e.type]||e.bins;function CV(e,t,n,r,i,o,a){let s=DX[t.type]&&o!==B3&&o!==U3?kge(e,t,i):yV(e,t,n,i,o,a);return r===b7&&Fge(t)?Rge(s):r===Age?Oge(s):Pge(s)}var Rge=e=>(t,n,r)=>{let i=gX(r[n+1],gX(r.max,1/0)),o=vX(t,e),a=vX(i,e);return o&&a?o+" \u2013 "+a:a?"< "+a:"\u2265 "+o},gX=(e,t)=>e??t,Oge=e=>(t,n)=>n?e(t):null,Pge=e=>t=>e(t),vX=(e,t)=>Number.isFinite(e)?t(e):null;function zX(e){let t=e.domain(),n=t.length-1,r=+t[0],i=+Ge(t),o=i-r;if(e.type===m7){let a=n?o/n:.1;r-=a,i+=a,o=i-r}return a=>(a-r)/o}function $ge(e,t,n,r){let i=r||t.type;return Q(n)&&Ege(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===B3?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===U3?e.utcFormat("%A, %d %B %Y, %X UTC"):CV(e,t,5,null,n,r,!0)}function bV(e,t,n){n=n||{};let r=Math.max(3,n.maxlen||7),i=$ge(e,t,n.format,n.formatType);if(Iy(t.type)){let o=xV(t).slice(1).map(i),a=o.length;return`${a} boundar${a===1?"y":"ies"}: ${o.join(", ")}`}else if(j3(t.type)){let o=t.domain(),a=o.length,s=a>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${a} value${a===1?"":"s"}: ${s}`}else{let o=t.domain();return`values from ${i(o[0])} to ${i(Ge(o))}`}}var JX=0;function Bge(){JX=0}var Qy="p_";function PV(e){return e&&e.gradient}function eQ(e,t,n){let r=e.gradient,i=e.id,o=r==="radial"?Qy:"";return i||(i=e.id="gradient_"+JX++,r==="radial"?(e.x1=Qa(e.x1,.5),e.y1=Qa(e.y1,.5),e.r1=Qa(e.r1,0),e.x2=Qa(e.x2,.5),e.y2=Qa(e.y2,.5),e.r2=Qa(e.r2,.5),o=Qy):(e.x1=Qa(e.x1,0),e.y1=Qa(e.y1,0),e.x2=Qa(e.x2,1),e.y2=Qa(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function Qa(e,t){return e??t}function $V(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}var HX={basis:{curve:EA},"basis-closed":{curve:DA},"basis-open":{curve:zA},bundle:{curve:HA,tension:"beta",value:.85},cardinal:{curve:LA,tension:"tension",value:0},"cardinal-open":{curve:VA,tension:"tension",value:0},"cardinal-closed":{curve:AA,tension:"tension",value:0},"catmull-rom":{curve:NA,tension:"alpha",value:.5},"catmull-rom-closed":{curve:_A,tension:"alpha",value:.5},"catmull-rom-open":{curve:kA,tension:"alpha",value:.5},linear:{curve:Hl},"linear-closed":{curve:TA},monotone:{horizontal:RA,vertical:FA},natural:{curve:OA},step:{curve:PA},"step-after":{curve:BA},"step-before":{curve:$A}};function BV(e,t,n){var r=de(HX,e)&&HX[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}var Uge={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},jge=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,qge=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Gge=/^((\s+,?\s*)|(,\s*))/,Wge=/^[01]/;function Wl(e){let t=[];return(e.match(jge)||[]).forEach(r=>{let i=r[0],o=i.toLowerCase(),a=Uge[o],s=Yge(o,a,r.slice(1).trim()),c=s.length;if(c<a||c&&c%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...s.slice(0,a)]),c!==a){o==="m"&&(i=i==="M"?"L":"l");for(let l=a;l<c;l+=a)t.push([i,...s.slice(l,l+a)])}}),t}function Yge(e,t,n){let r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){let a=e==="a"&&(o===3||o===4)?Wge:qge,s=n.slice(i).match(a);if(s===null)throw Error("Invalid SVG path, incorrect parameter type");i+=s[0].length,r.push(+s[0]);let c=n.slice(i).match(Gge);c!==null&&(i+=c[0].length)}return r}var Q3=Math.PI/180,Xge=1e-14,Bl=Math.PI/2,Ka=Math.PI*2,Du=Math.sqrt(3)/2,MV={},wV={},tQ=[].join;function Qge(e,t,n,r,i,o,a,s,c){let l=tQ.call(arguments);if(MV[l])return MV[l];let u=a*Q3,f=Math.sin(u),d=Math.cos(u);n=Math.abs(n),r=Math.abs(r);let p=d*(s-e)*.5+f*(c-t)*.5,h=d*(c-t)*.5-f*(s-e)*.5,m=p*p/(n*n)+h*h/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);let g=d/n,v=f/n,y=-f/r,C=d/r,b=g*s+v*c,M=y*s+C*c,S=g*e+v*t,w=y*e+C*t,D=1/((S-b)*(S-b)+(w-M)*(w-M))-.25;D<0&&(D=0);let z=Math.sqrt(D);o==i&&(z=-z);let H=.5*(b+S)-z*(w-M),j=.5*(M+w)+z*(S-b),L=Math.atan2(M-j,b-H),A=Math.atan2(w-j,S-H)-L;A<0&&o===1?A+=Ka:A>0&&o===0&&(A-=Ka);let T=Math.ceil(Math.abs(A/(Bl+.001))),G=[];for(let X=0;X<T;++X){let J=L+X*A/T,we=L+(X+1)*A/T;G[X]=[H,j,J,we,n,r,f,d]}return MV[l]=G}function Kge(e){let t=tQ.call(e);if(wV[t])return wV[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7];let u=l*a,f=-c*s,d=c*a,p=l*s,h=Math.cos(i),m=Math.sin(i),g=Math.cos(o),v=Math.sin(o),y=.5*(o-i),C=Math.sin(y*.5),b=8/3*C*C/Math.sin(y),M=n+h-b*m,S=r+m+b*h,w=n+g,E=r+v,D=w+b*v,z=E-b*g;return wV[t]=[u*M+f*S,d*M+p*S,u*D+f*z,d*D+p*z,u*w+f*E,d*w+p*E]}var Go=["l",0,0,0,0,0,0,0];function Zge(e,t,n){let r=Go[0]=e[0];if(r==="a"||r==="A")Go[1]=t*e[1],Go[2]=n*e[2],Go[3]=e[3],Go[4]=e[4],Go[5]=e[5],Go[6]=t*e[6],Go[7]=n*e[7];else if(r==="h"||r==="H")Go[1]=t*e[1];else if(r==="v"||r==="V")Go[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)Go[i]=(i%2==1?t:n)*e[i];return Go}function Hu(e,t,n,r,i,o){var a,s=null,c=0,l=0,u=0,f=0,d,p,h,m,g=0,v=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var y=0,C=t.length;y<C;++y){switch(a=t[y],(i!==1||o!==1)&&(a=Zge(a,i,o)),a[0]){case"l":c+=a[1],l+=a[2],e.lineTo(c+n,l+r);break;case"L":c=a[1],l=a[2],e.lineTo(c+n,l+r);break;case"h":c+=a[1],e.lineTo(c+n,l+r);break;case"H":c=a[1],e.lineTo(c+n,l+r);break;case"v":l+=a[1],e.lineTo(c+n,l+r);break;case"V":l=a[1],e.lineTo(c+n,l+r);break;case"m":c+=a[1],l+=a[2],g=c,v=l,e.moveTo(c+n,l+r);break;case"M":c=a[1],l=a[2],g=c,v=l,e.moveTo(c+n,l+r);break;case"c":d=c+a[5],p=l+a[6],u=c+a[3],f=l+a[4],e.bezierCurveTo(c+a[1]+n,l+a[2]+r,u+n,f+r,d+n,p+r),c=d,l=p;break;case"C":c=a[5],l=a[6],u=a[3],f=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,u+n,f+r,c+n,l+r);break;case"s":d=c+a[3],p=l+a[4],u=2*c-u,f=2*l-f,e.bezierCurveTo(u+n,f+r,c+a[1]+n,l+a[2]+r,d+n,p+r),u=c+a[1],f=l+a[2],c=d,l=p;break;case"S":d=a[3],p=a[4],u=2*c-u,f=2*l-f,e.bezierCurveTo(u+n,f+r,a[1]+n,a[2]+r,d+n,p+r),c=d,l=p,u=a[1],f=a[2];break;case"q":d=c+a[3],p=l+a[4],u=c+a[1],f=l+a[2],e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p;break;case"Q":d=a[3],p=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,d+n,p+r),c=d,l=p,u=a[1],f=a[2];break;case"t":d=c+a[1],p=l+a[2],s[0].match(/[QqTt]/)===null?(u=c,f=l):s[0]==="t"?(u=2*c-h,f=2*l-m):s[0]==="q"&&(u=2*c-u,f=2*l-f),h=u,m=f,e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p,u=c+a[1],f=l+a[2];break;case"T":d=a[1],p=a[2],u=2*c-u,f=2*l-f,e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p;break;case"a":LX(e,c+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+c+n,a[7]+l+r]),c+=a[6],l+=a[7];break;case"A":LX(e,c+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),c=a[6],l=a[7];break;case"z":case"Z":c=g,l=v,e.closePath();break}s=a}}function LX(e,t,n,r){let i=Qge(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){let a=Kge(i[o]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}var AX=.5773502691896257,VX={circle:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Ka)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Du*n,i=r-n*AX,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Du*n,i=r-n*AX;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Du*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Du*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Du*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Du*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function nQ(e){return de(VX,e)?VX[e]:Jge(e)}var SV={};function Jge(e){if(!de(SV,e)){let t=Wl(e);SV[e]={draw:function(n,r){Hu(n,t,0,0,Math.sqrt(r)/2)}}}return SV[e]}var q3=.448084975506;function eve(e){return e.x}function tve(e){return e.y}function nve(e){return e.width}function rve(e){return e.height}function dc(e){return typeof e=="function"?e:()=>+e}function By(e,t,n){return Math.max(t,Math.min(e,n))}function rQ(){var e=eve,t=tve,n=nve,r=rve,i=dc(0),o=i,a=i,s=i,c=null;function l(u,f,d){var p,h=f??+e.call(this,u),m=d??+t.call(this,u),g=+n.call(this,u),v=+r.call(this,u),y=Math.min(g,v)/2,C=By(+i.call(this,u),0,y),b=By(+o.call(this,u),0,y),M=By(+a.call(this,u),0,y),S=By(+s.call(this,u),0,y);if(c||(c=p=zl()),C<=0&&b<=0&&M<=0&&S<=0)c.rect(h,m,g,v);else{var w=h+g,E=m+v;c.moveTo(h+C,m),c.lineTo(w-b,m),c.bezierCurveTo(w-q3*b,m,w,m+q3*b,w,m+b),c.lineTo(w,E-S),c.bezierCurveTo(w,E-q3*S,w-q3*S,E,w-S,E),c.lineTo(h+M,E),c.bezierCurveTo(h+q3*M,E,h,E-q3*M,h,E-M),c.lineTo(h,m+C),c.bezierCurveTo(h,m+q3*C,h+q3*C,m,h+C,m),c.closePath()}if(p)return c=null,p+""||null}return l.x=function(u){return arguments.length?(e=dc(u),l):e},l.y=function(u){return arguments.length?(t=dc(u),l):t},l.width=function(u){return arguments.length?(n=dc(u),l):n},l.height=function(u){return arguments.length?(r=dc(u),l):r},l.cornerRadius=function(u,f,d,p){return arguments.length?(i=dc(u),o=f!=null?dc(f):i,s=d!=null?dc(d):i,a=p!=null?dc(p):o,l):i},l.context=function(u){return arguments.length?(c=u??null,l):c},l}function iQ(){var e,t,n,r,i=null,o,a,s,c;function l(f,d,p){let h=p/2;if(o){var m=s-d,g=f-a;if(m||g){var v=Math.hypot(m,g),y=(m/=v)*c,C=(g/=v)*c,b=Math.atan2(g,m);i.moveTo(a-y,s-C),i.lineTo(f-m*h,d-g*h),i.arc(f,d,h,b-Math.PI,b),i.lineTo(a+y,s+C),i.arc(a,s,c,b,b+Math.PI)}else i.arc(f,d,h,0,Ka);i.closePath()}else o=1;a=f,s=d,c=h}function u(f){var d,p=f.length,h,m=!1,g;for(i==null&&(i=g=zl()),d=0;d<=p;++d)!(d<p&&r(h=f[d],d,f))===m&&(m=!m)&&(o=0),m&&l(+e(h,d,f),+t(h,d,f),+n(h,d,f));if(g)return i=null,g+""||null}return u.x=function(f){return arguments.length?(e=f,u):e},u.y=function(f){return arguments.length?(t=f,u):t},u.size=function(f){return arguments.length?(n=f,u):n},u.defined=function(f){return arguments.length?(r=f,u):r},u.context=function(f){return arguments.length?(f==null?i=null:i=f,u):i},u}function N7(e,t){return e??t}var _7=e=>e.x||0,k7=e=>e.y||0,ive=e=>e.width||0,ove=e=>e.height||0,ave=e=>(e.x||0)+(e.width||0),sve=e=>(e.y||0)+(e.height||0),cve=e=>e.startAngle||0,lve=e=>e.endAngle||0,uve=e=>e.padAngle||0,fve=e=>e.innerRadius||0,dve=e=>e.outerRadius||0,pve=e=>e.cornerRadius||0,hve=e=>N7(e.cornerRadiusTopLeft,e.cornerRadius)||0,mve=e=>N7(e.cornerRadiusTopRight,e.cornerRadius)||0,gve=e=>N7(e.cornerRadiusBottomRight,e.cornerRadius)||0,vve=e=>N7(e.cornerRadiusBottomLeft,e.cornerRadius)||0,yve=e=>N7(e.size,64),xve=e=>e.size||1,cx=e=>e.defined!==!1,Cve=e=>nQ(e.shape||"circle"),bve=SA().startAngle(cve).endAngle(lve).padAngle(uve).innerRadius(fve).outerRadius(dve).cornerRadius(pve),Mve=ty().x(_7).y1(k7).y0(sve).defined(cx),wve=ty().y(k7).x1(_7).x0(ave).defined(cx),Sve=jd().x(_7).y(k7).defined(cx),Eve=rQ().x(_7).y(k7).width(ive).height(ove).cornerRadius(hve,mve,gve,vve),Dve=ny().type(Cve).size(yve),zve=iQ().x(_7).y(k7).defined(cx).size(xve);function UV(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Hve(e,t){return bve.context(e)(t)}function Lve(e,t){let n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?wve:Mve).curve(BV(r,n.orient,n.tension)).context(e)(t)}function Ave(e,t){let n=t[0],r=n.interpolate||"linear";return Sve.curve(BV(r,n.orient,n.tension)).context(e)(t)}function Vu(e,t,n,r){return Eve.context(e)(t,n,r)}function Vve(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Nve(e,t){return Dve.context(e)(t)}function _ve(e,t){return zve.context(e)(t)}var oQ=1;function aQ(){oQ=1}function jV(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+oQ++),a=i.clipping[o]||(i.clipping[o]={id:o});return Ie(r)?a.path=r(null):UV(n)?a.path=Vu(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function Nn(e){this.clear(),e&&this.union(e)}Nn.prototype={clone(){return new Nn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){let r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),c=Math.sin(e),l=t-t*s+n*c,u=n-t*c-n*s;return[s*r-c*i+l,c*r+s*i+u,s*r-c*a+l,c*r+s*a+u,s*o-c*i+l,c*o+s*i+u,s*o-c*a+l,c*o+s*a+u]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function T7(e){this.mark=e,this.bounds=this.bounds||new Nn}function I7(e){T7.call(this,e),this.items=this.items||[]}ee(I7,T7);function qV(e){this._pending=0,this._loader=e||au()}function NX(e){e._pending+=1}function M7(e){e._pending-=1}qV.prototype={pending(){return this._pending},sanitizeURL(e){let t=this;return NX(t),t._loader.sanitize(e,{context:"href"}).then(n=>(M7(t),n)).catch(()=>(M7(t),null))},loadImage(e){let t=this,n=mY();return NX(t),t._loader.sanitize(e,{context:"image"}).then(r=>{let i=r.href;if(!i||!n)throw{url:i};let o=new n,a=de(r,"crossOrigin")?r.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>M7(t),o.onerror=()=>M7(t),o.src=i,o}).catch(r=>(M7(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){let e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function Za(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){let r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?kve(t,r):0))}return e}function kve(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}var Tve=Ka-1e-8,lx,Uy,jy,ql,LV,qy,AV,VV,G3=(e,t)=>lx.add(e,t),Gy=(e,t)=>G3(Uy=e,jy=t),_X=e=>G3(e,lx.y1),kX=e=>G3(lx.x1,e),Ul=(e,t)=>LV*e+AV*t,jl=(e,t)=>qy*e+VV*t,EV=(e,t)=>G3(Ul(e,t),jl(e,t)),DV=(e,t)=>Gy(Ul(e,t),jl(e,t));function F7(e,t){return lx=e,t?(ql=t*Q3,LV=VV=Math.cos(ql),qy=Math.sin(ql),AV=-qy):(LV=VV=1,ql=qy=AV=0),Ive}var Ive={beginPath(){},closePath(){},moveTo:DV,lineTo:DV,rect(e,t,n,r){ql?(EV(e+n,t),EV(e+n,t+r),EV(e,t+r),DV(e,t)):(G3(e+n,t+r),Gy(e,t))},quadraticCurveTo(e,t,n,r){let i=Ul(e,t),o=jl(e,t),a=Ul(n,r),s=jl(n,r);TX(Uy,i,a,_X),TX(jy,o,s,kX),Gy(a,s)},bezierCurveTo(e,t,n,r,i,o){let a=Ul(e,t),s=jl(e,t),c=Ul(n,r),l=jl(n,r),u=Ul(i,o),f=jl(i,o);IX(Uy,a,c,u,_X),IX(jy,s,l,f,kX),Gy(u,f)},arc(e,t,n,r,i,o){if(r+=ql,i+=ql,Uy=n*Math.cos(i)+e,jy=n*Math.sin(i)+t,Math.abs(i-r)>Tve)G3(e-n,t-n),G3(e+n,t+n);else{let a=l=>G3(n*Math.cos(l)+e,n*Math.sin(l)+t),s,c;if(a(r),a(i),i!==r)if(r=r%Ka,r<0&&(r+=Ka),i=i%Ka,i<0&&(i+=Ka),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=Ka,s=r-r%Bl,c=0;c<4&&s>i;++c,s-=Bl)a(s);else for(s=r-r%Bl+Bl,c=0;c<4&&s<i;++c,s=s+Bl)a(s)}}};function TX(e,t,n,r){let i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function IX(e,t,n,r,i){let o=r-e+3*t-3*n,a=e+n-2*t,s=e-t,c=0,l=0,u;Math.abs(o)>Xge?(u=a*a+s*o,u>=0&&(u=Math.sqrt(u),c=(-a+u)/o,l=(-a-u)/o)):c=.5*s/a,0<c&&c<1&&i(FX(c,e,t,n,r)),0<l&&l<1&&i(FX(l,e,t,n,r))}function FX(e,t,n,r,i){let o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var X3=(X3=Uo(1,1))?X3.getContext("2d"):null,NV=new Nn;function GV(e){return function(t,n){if(!X3)return!0;e(X3,t),NV.clear().union(t.bounds).intersect(n).round();let{x1:r,y1:i,x2:o,y2:a}=NV;for(let s=i;s<=a;++s)for(let c=r;c<=o;++c)if(X3.isPointInPath(c,s))return!0;return!1}}function WV(e,t){return t.contains(e.x||0,e.y||0)}function sQ(e,t){let n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(NV.set(n,r,n+i,r+o))}function cQ(e,t){let n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return zu(t,n,r,i,o)}function zu(e,t,n,r,i){let{x1:o,y1:a,x2:s,y2:c}=e,l=r-t,u=i-n,f=0,d=1,p,h,m,g;for(g=0;g<4;++g){if(g===0&&(p=-l,h=-(o-t)),g===1&&(p=l,h=s-t),g===2&&(p=-u,h=-(a-n)),g===3&&(p=u,h=c-n),Math.abs(p)<1e-10&&h<0)return!1;if(m=h/p,p<0){if(m>d)return!1;m>f&&(f=m)}else if(p>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function Lu(e,t){e.globalCompositeOperation=t.blend||"source-over"}function V2(e,t){return e??t}function RX(e,t){let n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Fve(e,t,n){let r=n.width(),i=n.height(),o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+V2(t.x1,.5)*r,n.y1+V2(t.y1,.5)*i,Math.max(r,i)*V2(t.r1,0),n.x1+V2(t.x2,.5)*r,n.y1+V2(t.y2,.5)*i,Math.max(r,i)*V2(t.r2,.5));else{let a=V2(t.x1,0),s=V2(t.y1,0),c=V2(t.x2,1),l=V2(t.y2,0);if(a===c||s===l||r===i)o=e.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+c*r,n.y1+l*i);else{let u=Uo(Math.ceil(r),Math.ceil(i)),f=u.getContext("2d");return f.scale(r,i),f.fillStyle=RX(f.createLinearGradient(a,s,c,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(u,"no-repeat")}}return RX(o,t.stops)}function lQ(e,t,n){return PV(n)?Fve(e,n,t.bounds):n}function Ky(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=lQ(e,t,t.fill),!0):!1}var Rve=[];function Au(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=lQ(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Rve),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Ove(e,t){return e.zindex-t.zindex||e.index-t.index}function YV(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Ove)}function _2(e,t){var n=e.items,r,i;if(!n||!n.length)return;let o=YV(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function Zy(e,t){var n=e.items,r,i;if(!n||!n.length)return null;let o=YV(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function XV(e){return function(t,n,r){_2(n,i=>{(!r||r.intersects(i.bounds))&&uQ(e,t,i,i)})}}function Pve(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&uQ(e,t,n.items[0],n.items)}}function uQ(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Lu(t,n),n.fill&&Ky(t,n,i)&&t.fill(),n.stroke&&Au(t,n,i)&&t.stroke()))}function ux(e){return e=e||dr,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,Zy(n,s=>{let c=s.bounds;if(!(c&&!c.contains(o,a)||!c)&&e(t,s,r,i,o,a))return s})}}function R7(e,t){return function(n,r,i,o){var a=Array.isArray(r)?r[0]:r,s=t??a.fill,c=a.stroke&&n.isPointInStroke,l,u;return c&&(l=a.strokeWidth,u=a.strokeCap,n.lineWidth=l??1,n.lineCap=u??"butt"),e(n,r)?!1:s&&n.isPointInPath(i,o)||c&&n.isPointInStroke(i,o)}}function QV(e){return ux(R7(e))}function Gl(e,t){return"translate("+e+","+t+")"}function KV(e){return"rotate("+e+")"}function $ve(e,t){return"scale("+e+","+t+")"}function fQ(e){return Gl(e.x||0,e.y||0)}function Bve(e){return Gl(e.x||0,e.y||0)+(e.angle?" "+KV(e.angle):"")}function Uve(e){return Gl(e.x||0,e.y||0)+(e.angle?" "+KV(e.angle):"")+(e.scaleX||e.scaleY?" "+$ve(e.scaleX||1,e.scaleY||1):"")}function ZV(e,t,n){function r(a,s){a("transform",Bve(s)),a("d",t(null,s))}function i(a,s){return t(F7(a,s.angle),s),Za(a,s).translate(s.x||0,s.y||0)}function o(a,s){var c=s.x||0,l=s.y||0,u=s.angle||0;a.translate(c,l),u&&a.rotate(u*=Q3),a.beginPath(),t(a,s),u&&a.rotate(-u),a.translate(-c,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:XV(o),pick:QV(o),isect:n||GV(o)}}var jve=ZV("arc",Hve);function qve(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,a,s;--i>=0;)e[i].defined!==!1&&(s=Math.abs(e[i][r]-n),s<o&&(o=s,a=e[i]));return a}function Gve(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,a;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],a=i*i+o*o,a<n))return e[r];return null}function Wve(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function JV(e,t,n){function r(c,l){var u=l.mark.items;u.length&&c("d",t(null,u))}function i(c,l){var u=l.items;return u.length===0?c:(t(F7(c),u),Za(c,u[0]))}function o(c,l){c.beginPath(),t(c,l)}let a=R7(o);function s(c,l,u,f,d,p){var h=l.items,m=l.bounds;return!h||!h.length||m&&!m.contains(d,p)?null:(u*=c.pixelRatio,f*=c.pixelRatio,a(c,h,u,f)?h[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Pve(o),pick:s,isect:WV,tip:n}}var Yve=JV("area",Lve,qve);function Xve(e,t){var n=t.clip;e.save(),Ie(n)?(e.beginPath(),n(e),e.clip()):dQ(e,t.group)}function dQ(e,t){e.beginPath(),UV(t)?Vu(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function pQ(e){let t=V2(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Qve(e,t){e("transform",fQ(t))}function hQ(e,t){let n=pQ(t);e("d",Vu(null,t,n,n))}function Kve(e,t){e("class","background"),e("aria-hidden",!0),hQ(e,t)}function Zve(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?hQ(e,t):e("d","")}function Jve(e,t,n){let r=t.clip?jV(n,t,t):null;e("clip-path",r)}function eye(e,t){if(!t.clip&&t.items){let n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Za(e,t),e.translate(t.x||0,t.y||0)}function H7(e,t,n,r){let i=pQ(t);e.beginPath(),Vu(e,t,(n||0)+i,(r||0)+i)}var tye=R7(H7),nye=R7(H7,!1),rye=R7(H7,!0);function iye(e,t,n,r){_2(t,i=>{let o=i.x||0,a=i.y||0,s=i.strokeForeground,c=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&c&&(H7(e,i,o,a),Lu(e,i),i.fill&&Ky(e,i,c)&&e.fill(),i.stroke&&!s&&Au(e,i,c)&&e.stroke()),e.save(),e.translate(o,a),i.clip&&dQ(e,i),n&&n.translate(-o,-a),_2(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(o,a),e.restore(),s&&i.stroke&&c&&(H7(e,i,o,a),Lu(e,i),Au(e,i,c)&&e.stroke())})}function oye(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;let a=n*e.pixelRatio,s=r*e.pixelRatio;return Zy(t,c=>{let l,u,f,d=c.bounds;if(d&&!d.contains(i,o))return;u=c.x||0,f=c.y||0;let p=u+(c.width||0),h=f+(c.height||0),m=c.clip;if(m&&(i<u||i>p||o<f||o>h))return;if(e.save(),e.translate(u,f),u=i-u,f=o-f,m&&UV(c)&&!rye(e,c,a,s))return e.restore(),null;let g=c.strokeForeground,v=t.interactive!==!1;return v&&g&&c.stroke&&nye(e,c,a,s)?(e.restore(),c):(l=Zy(c,y=>aye(y,u,f)?this.pick(y,n,r,u,f):null),!l&&v&&(c.fill||!g&&c.stroke)&&tye(e,c,a,s)&&(l=c),e.restore(),l||null)})}function aye(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var sye={type:"group",tag:"g",nested:!1,attr:Qve,bound:eye,draw:iye,pick:oye,isect:sQ,content:Jve,background:Kve,foreground:Zve},L7={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function eN(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function tN(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function nN(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function fx(e,t){return e==="center"?t/2:e==="right"?t:0}function dx(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function cye(e,t,n){let r=eN(t,n),i=tN(t,r),o=nN(t,r),a=(t.x||0)-fx(t.align,i),s=(t.y||0)-dx(t.baseline,o),c=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",c,L7["xmlns:xlink"],"xlink:href"),e("transform",Gl(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function lye(e,t){let n=t.image,r=tN(t,n),i=nN(t,n),o=(t.x||0)-fx(t.align,r),a=(t.y||0)-dx(t.baseline,i);return e.set(o,a,o+r,a+i)}function uye(e,t,n){_2(t,r=>{if(n&&!n.intersects(r.bounds))return;let i=eN(r,this),o=tN(r,i),a=nN(r,i);if(o===0||a===0)return;let s=(r.x||0)-fx(r.align,o),c=(r.y||0)-dx(r.baseline,a),l,u,f,d;r.aspect!==!1&&(u=i.width/i.height,f=r.width/r.height,u===u&&f===f&&u!==f&&(f<u?(d=o/u,c+=(a-d)/2,a=d):(d=a*u,s+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(Lu(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,s,c,o,a))})}var fye={type:"image",tag:"image",nested:!1,attr:cye,bound:lye,draw:uye,pick:ux(),isect:dr,get:eN,xOffset:fx,yOffset:dx},dye=JV("line",Ave,Gve);function pye(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Uve(t)),e("d",t.path)}function Wy(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*Q3,c=t.pathCache;(!c||c.path!==n)&&((t.pathCache=c=Wl(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),Hu(e,c,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):Hu(e,c,r,i,o,a)}function hye(e,t){return Wy(F7(e,t.angle),t)?e.set(0,0,0,0):Za(e,t,!0)}var mye={type:"path",tag:"path",nested:!1,attr:pye,bound:hye,draw:XV(Wy),pick:QV(Wy),isect:GV(Wy)};function gye(e,t){e("d",Vu(null,t))}function vye(e,t){var n,r;return Za(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function OX(e,t){e.beginPath(),Vu(e,t)}var yye={type:"rect",tag:"path",nested:!1,attr:gye,bound:vye,draw:XV(OX),pick:QV(OX),isect:sQ};function xye(e,t){e("transform",fQ(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Cye(e,t){var n,r;return Za(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function mQ(e,t,n){var r,i,o,a;return t.stroke&&Au(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0):!1}function bye(e,t,n){_2(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&mQ(e,r,i)&&(Lu(e,r),e.stroke())}})}function Mye(e,t,n,r){return e.isPointInStroke?mQ(e,t,1)&&e.isPointInStroke(n,r):!1}var wye={type:"rule",tag:"line",nested:!1,attr:xye,bound:Cye,draw:bye,pick:ux(Mye),isect:cQ},Sye=ZV("shape",Vve),Eye=ZV("symbol",Nve,WV),PX=EH(),V1={height:Ja,measureWidth:rN,estimateWidth:Jy,width:Jy,canvas:gQ};gQ(!0);function gQ(e){V1.width=e&&X3?rN:Jy}function Jy(e,t){return vQ(Z3(e,t),Ja(e))}function vQ(e,t){return~~(.8*e.length*t)}function rN(e,t){return Ja(e)<=0||!(t=Z3(e,t))?0:yQ(t,hx(e))}function yQ(e,t){let n=`(${t}) ${e}`,r=PX.get(n);return r===void 0&&(X3.font=t,r=X3.measureText(e).width,PX.set(n,r)),r}function Ja(e){return e.fontSize!=null?+e.fontSize||0:11}function K3(e){return e.lineHeight!=null?e.lineHeight:Ja(e)+2}function Dye(e){return F(e)?e.length>1?e:e[0]:e}function O7(e){return Dye(e.lineBreak&&e.text&&!F(e.text)?e.text.split(e.lineBreak):e.text)}function px(e){let t=O7(e);return(F(t)?t.length-1:0)*K3(e)}function Z3(e,t){let n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Hye(e,n):n}function zye(e){if(V1.width===rN){let t=hx(e);return n=>yQ(n,t)}else if(V1.width===Jy){let t=Ja(e);return n=>vQ(n,t)}else return t=>V1.width(e,t)}function Hye(e,t){var n=+e.limit,r=zye(e);if(r(t)<n)return t;var i=e.ellipsis||"\u2026",o=e.dir==="rtl",a=0,s=t.length,c;if(n-=r(i),o){for(;a<s;)c=a+s>>>1,r(t.slice(c))>n?a=c+1:s=c;return i+t.slice(a)}else{for(;a<s;)c=1+(a+s>>>1),r(t.slice(0,c))<n?a=c:s=c-1;return t.slice(0,a)+i}}function P7(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function hx(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Ja(e)+"px "+P7(e,t)}function iN(e){var t=e.baseline,n=Ja(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*K3(e):t==="line-bottom"?.29*n-.5*K3(e):0)}var Lye={left:"start",center:"middle",right:"end"},E7=new Nn;function mx(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Bl,t+=r*Math.cos(i),n+=r*Math.sin(i)),E7.x1=t,E7.y1=n,E7}function Aye(e,t){var n=t.dx||0,r=(t.dy||0)+iN(t),i=mx(t),o=i.x1,a=i.y1,s=t.angle||0,c;e("text-anchor",Lye[t.align]||"start"),s?(c=Gl(o,a)+" "+KV(s),(n||r)&&(c+=" "+Gl(n,r))):c=Gl(o+n,a+r),e("transform",c)}function oN(e,t,n){var r=V1.height(t),i=t.align,o=mx(t),a=o.x1,s=o.y1,c=t.dx||0,l=(t.dy||0)+iN(t)-Math.round(.8*r),u=O7(t),f;if(F(u)?(r+=K3(t)*(u.length-1),f=u.reduce((d,p)=>Math.max(d,V1.width(t,p)),0)):f=V1.width(t,u),i==="center"?c-=f/2:i==="right"&&(c-=f),e.set(c+=a,l+=s,c+f,l+r),t.angle&&!n)e.rotate(t.angle*Q3,a,s);else if(n===2)return e.rotatedPoints(t.angle*Q3,a,s);return e}function Vye(e,t,n){_2(t,r=>{var i=r.opacity==null?1:r.opacity,o,a,s,c,l,u,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=hx(r),e.textAlign=r.align||"left",o=mx(r),a=o.x1,s=o.y1,r.angle&&(e.save(),e.translate(a,s),e.rotate(r.angle*Q3),a=s=0),a+=r.dx||0,s+=(r.dy||0)+iN(r),u=O7(r),Lu(e,r),F(u))for(l=K3(r),c=0;c<u.length;++c)f=Z3(r,u[c]),r.fill&&Ky(e,r,i)&&e.fillText(f,a,s),r.stroke&&Au(e,r,i)&&e.strokeText(f,a,s),s+=l;else f=Z3(r,u),r.fill&&Ky(e,r,i)&&e.fillText(f,a,s),r.stroke&&Au(e,r,i)&&e.strokeText(f,a,s);r.angle&&e.restore()}})}function Nye(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=mx(t),s=a.x1,c=a.y1,l=oN(E7,t,1),u=-t.angle*Q3,f=Math.cos(u),d=Math.sin(u),p=f*i-d*o+(s-f*s+d*c),h=d*i+f*o+(c-d*s-f*c);return l.contains(p,h)}function _ye(e,t){let n=oN(E7,e,2);return zu(t,n[0],n[1],n[2],n[3])||zu(t,n[0],n[1],n[4],n[5])||zu(t,n[4],n[5],n[6],n[7])||zu(t,n[2],n[3],n[6],n[7])}var kye={type:"text",tag:"text",nested:!1,attr:Aye,bound:oN,draw:Vye,pick:ux(Nye),isect:_ye},Tye=JV("trail",_ve,Wve),n1={arc:jve,area:Yve,group:sye,image:fye,line:dye,path:mye,rect:yye,rule:wye,shape:Sye,symbol:Eye,text:kye,trail:Tye};function _V(e,t,n){var r=n1[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Nn),e,n)}var $X={mark:null};function xQ(e,t,n){var r=n1[e.marktype],i=r.bound,o=e.items,a=o&&o.length,s,c,l,u;if(r.nested)return a?l=o[0]:($X.mark=e,l=$X),u=_V(l,i,n),t=t&&t.union(u)||u,t;if(t=t||e.bounds&&e.bounds.clear()||new Nn,a)for(s=0,c=o.length;s<c;++s)t.union(_V(o[s],i,n));return e.bounds=t}var Iye=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function CQ(e,t){return JSON.stringify(e,Iye,t)}function bQ(e){let t=typeof e=="string"?JSON.parse(e):e;return MQ(t)}function MQ(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&MQ(n[i]);return t&&xQ(e),e}function gx(e){arguments.length?this.root=bQ(e):(this.root=wQ({marktype:"group",name:"root",role:"frame"}),this.root.items=[new I7(this.root)])}gx.prototype={toJSON(e){return CQ(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];let r=wQ(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function wQ(e,t){let n={bounds:new Nn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function W3(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function aN(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function gr(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=W3(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function Wo(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function SQ(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function $7(e,t){let n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Fye(e,t,n,r){var i=e&&e.mark,o,a;if(i&&(o=n1[i.marktype]).tip){for(a=$7(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=o.tip(i.items,a)}return e}function J3(e,t){this._active=null,this._handlers={},this._loader=e||au(),this._tooltip=t||Rye}function Rye(e,t,n,r){e.element().setAttribute("title",r||"")}J3.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){let t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(let r in t)n.push(...t[r]);return n},eventName(e){let t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{let i=new MouseEvent(e.type,e),o=W3(null,"a");for(let a in r)o.setAttribute(a,r[a]);o.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=Fye(t,e,this.canvas(),this._origin);let r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){let t=this.canvas();if(!t)return;let n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),a=i.height(),s=i.x1+r[0]+n.left,c=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,c+=e.y||0;return{x:s,y:c,width:o,height:a,left:s,top:c,right:s+o,bottom:c+a}}};function so(e){this._el=null,this._bgcolor=null,this._loader=new qV(e)}so.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e,t){let n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){let n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){let i=n._call;n._ready=n._loader.ready().then(o=>{o&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};var Oye="keydown",Pye="keypress",$ye="keyup",EQ="dragenter",Yy="dragleave",DQ="dragover",kV="pointerdown",Bye="pointerup",ex="pointermove",D7="pointerout",zQ="pointerover",TV="mousedown",Uye="mouseup",HQ="mousemove",IV="mouseout",LQ="mouseover",tx="click",jye="dblclick",qye="wheel",AQ="mousewheel",nx="touchstart",rx="touchmove",ix="touchend",Gye=[Oye,Pye,$ye,EQ,Yy,DQ,kV,Bye,ex,D7,zQ,TV,Uye,HQ,IV,LQ,tx,jye,qye,AQ,nx,rx,ix],FV=ex,A7=D7,RV=tx;function hc(e,t){J3.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}var Wye=e=>e===nx||e===rx||e===ix?[nx,rx,ix]:[e];function BX(e,t){Wye(t).forEach(n=>Yye(e,n))}function Yye(e,t){let n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function S7(e,t,n){t.forEach(r=>e.fire(r,n))}function UX(e,t,n){return function(r){let i=this._active,o=this.pickEvent(r);o===i?S7(this,e,r):((!i||!i.exit)&&S7(this,n,r),this._active=o,S7(this,t,r),S7(this,e,r))}}function jX(e){return function(t){S7(this,e,t),this._active=null}}ee(hc,J3,{initialize(e,t,n){return this._canvas=e&&aN(e,"canvas"),[tx,TV,kV,ex,D7,Yy].forEach(r=>BX(this,r)),J3.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:Gye,DOMMouseScroll(e){this.fire(AQ,e)},pointermove:UX([ex,HQ],[zQ,LQ],[D7,IV]),dragover:UX([DQ],[EQ],[Yy]),pointerout:jX([D7,IV]),dragleave:jX([Yy]),pointerdown(e){this._down=this._active,this.fire(kV,e)},mousedown(e){this._down=this._active,this.fire(TV,e)},click(e){this._down===this._active&&(this.fire(tx,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(nx,e,!0)},touchmove(e){this.fire(rx,e,!0)},touchend(e){this.fire(ix,e,!0),this._touch=null},fire(e,t,n){let r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===RV&&r&&r.href?this.handleHref(t,r,r.href):(e===FV||e===A7)&&this.handleTooltip(t,r,e!==A7),i)for(let o=0,a=i.length;o<a;++o)i[o].handler.call(this._obj,t,r)},on(e,t){let n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(BX(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){let n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){let t=$7(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){let o=this.context();return n1[e.marktype].pick.call(this,o,e,t,n,r,i)}});function Xye(){return typeof window<"u"&&window.devicePixelRatio||1}function Qye(e,t,n,r,i,o){let a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,s=e.getContext("2d"),c=a?Xye():i;e.width=t*c,e.height=n*c;for(let l in o)s[l]=o[l];return a&&c!==1&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=c,s.setTransform(c,0,0,c,c*r[0],c*r[1]),e}function V7(e){so.call(this,e),this._options={},this._redraw=!1,this._dirty=new Nn,this._tempb=new Nn}var qX=so.prototype,Kye=(e,t,n)=>new Nn().set(0,0,t,n).translate(-e[0],-e[1]);function Zye(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}ee(V7,so,{initialize(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Uo(1,1,this._options.type),e&&this._canvas&&(Wo(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),qX.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(qX.resize.call(this,e,t,n,r),this._canvas)Qye(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let i=this._options.externalContext;i||B("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){let t=this._tempb.clear().union(e.bounds),n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){let n=this.context(),r=this._origin,i=this._width,o=this._height,a=this._dirty,s=Kye(r,i,o);n.save();let c=this._redraw||a.empty()?(this._redraw=!1,s.expand(1)):Zye(n,s.intersect(a),r);return this.clear(-r[0],-r[1],i,o),this.draw(n,e,c,t),n.restore(),a.clear(),this},draw(e,t,n,r){if(t.marktype!=="group"&&r!=null&&!r.includes(t.marktype))return;let i=n1[t.marktype];t.clip&&Xve(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()},clear(e,t,n,r){let i=this._options,o=this.context();i.type!=="pdf"&&!i.externalContext&&o.clearRect(e,t,n,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});function sN(e,t){J3.call(this,e,t);let n=this;n._hrefHandler=OV(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=OV(n,(r,i)=>{n.handleTooltip(r,i,r.type!==A7)})}var OV=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};ee(sN,J3,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(RV,this._hrefHandler),r.removeEventListener(FV,this._tooltipHandler),r.removeEventListener(A7,this._tooltipHandler)),this._svg=r=e&&aN(e,"svg"),r&&(r.addEventListener(RV,this._hrefHandler),r.addEventListener(FV,this._tooltipHandler),r.addEventListener(A7,this._tooltipHandler)),J3.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){let n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){let o={type:e,handler:t,listener:OV(this,t)};(r[n]||(r[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){let n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});var VQ="aria-hidden",cN="aria-label",lN="role",uN="aria-roledescription",NQ="graphics-object",fN="graphics-symbol",_Q=(e,t,n)=>({[lN]:e,[uN]:t,[cN]:n||void 0}),Jye=pr(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),GX={axis:{desc:"axis",caption:nxe},legend:{desc:"legend",caption:rxe},"title-text":{desc:"title",caption:e=>`Title text '${YX(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${YX(e)}'`}},WX={ariaRole:lN,ariaRoleDescription:uN,description:cN};function kQ(e,t){let n=t.aria===!1;if(e(VQ,n||void 0),n||t.description==null)for(let r in WX)e(WX[r],void 0);else{let r=t.mark.marktype;e(cN,t.description),e(lN,t.ariaRole||(r==="group"?NQ:fN)),e(uN,t.ariaRoleDescription||`${r} mark`)}}function TQ(e){return e.aria===!1?{[VQ]:!0}:Jye[e.role]?null:GX[e.role]?txe(e,GX[e.role]):exe(e)}function exe(e){let t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return _Q(n?NQ:fN,`${t} mark container`,e.description)}function txe(e,t){try{let n=e.items[0],r=t.caption||(()=>"");return _Q(t.role||fN,t.desc,n.description||r(n))}catch{return null}}function YX(e){return te(e.text).join(" ")}function nxe(e){let t=e.datum,n=e.orient,r=t.title?IQ(e):null,i=e.context,o=i.scales[t.scale].value,a=i.dataflow.locale(),s=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${j3(s)?"discrete":s} scale with ${bV(a,o,e)}`}function rxe(e){let t=e.datum,n=t.title?IQ(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),a=e.context,s=a.scales[i[o[0]]].value,c=a.dataflow.locale();return oxe(r)+(n?` titled '${n}'`:"")+` for ${ixe(o)} with ${bV(c,s,e)}`}function IQ(e){try{return te(Ge(e.items).items[0].text).join(" ")}catch{return null}}function ixe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Ge(e)}function oxe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}var FQ=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),axe=e=>FQ(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function dN(){let e="",t="",n="",r=[],i=()=>t=n="",o=c=>{t&&(e+=`${t}>${n}`,i()),r.push(c)},a=(c,l)=>(l!=null&&(t+=` ${c}="${axe(l)}"`),s),s={open(c){o(c),t="<"+c;for(var l=arguments.length,u=new Array(l>1?l-1:0),f=1;f<l;f++)u[f-1]=arguments[f];for(let d of u)for(let p in d)a(p,d[p]);return s},close(){let c=r.pop();return t?e+=t+(n?`>${n}</${c}>`:"/>"):e+=`</${c}>`,i(),s},attr:a,text:c=>(n+=FQ(c),s),toString:()=>e};return s}var RQ=e=>OQ(dN(),e)+"";function OQ(e,t){if(e.open(t.tagName),t.hasAttributes()){let n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){let n=t.childNodes;for(let r of n)r.nodeType===3?e.text(r.nodeValue):OQ(e,r)}return e.close()}var ox={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},ax={blend:"mix-blend-mode"},PQ={fill:"none","stroke-miterlimit":10},w7=0,XX="http://www.w3.org/2000/xmlns/",mr=L7.xmlns;function vx(e){so.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var zV=so.prototype;ee(vx,so,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=gr(e,0,"svg",mr),this._svg.setAttributeNS(XX,"xmlns",mr),this._svg.setAttributeNS(XX,"xmlns:xlink",L7["xmlns:xlink"]),this._svg.setAttribute("version",L7.version),this._svg.setAttribute("class","marks"),Wo(e,1),this._root=gr(this._svg,w7,"g",mr),Y3(this._root,PQ),Wo(this._svg,w7+1)),this.background(this._bgcolor),zV.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),zV.background.apply(this,arguments)},resize(e,t,n,r){return zV.resize.call(this,e,t,n,r),this._svg&&(Y3(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){let e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=gr(e,w7,"rect",mr),Y3(n,{width:this._width,height:this._height,fill:t}));let r=RQ(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Wo(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;let e=this._dirty;if(!e.length||!this._dirtyID)return!0;let t=++this._dirtyID,n,r,i,o,a,s,c;for(a=0,s=e.length;a<s;++a)if(n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=n1[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,QX(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){o.nested&&r.items.length?(c=r.items[0],c._svg&&this._update(o,c._svg,c)):n._svg&&(c=n._svg.parentNode,c&&c.removeChild(n._svg)),n._svg=null;continue}n=o.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,QX(n,t)):this._update(o,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,r){if(!this.isDirty(t))return t._svg;let i=this._svg,o=t.marktype,a=n1[o],s=t.interactive===!1?"none":null,c=a.tag==="g",l=KX(t,e,n,"g",i);if(o!=="group"&&r!=null&&!r.includes(o))return Wo(l,0),t._svg;l.setAttribute("class",SQ(t));let u=TQ(t);for(let h in u)t1(l,h,u[h]);c||t1(l,"pointer-events",s),t1(l,"clip-path",t.clip?jV(this,t,t.group):null);let f=null,d=0,p=h=>{let m=this.isDirty(h),g=KX(h,l,f,a.tag,i);m&&(this._update(a,g,h),c&&lxe(this,g,h,r)),f=g,++d};return a.nested?t.items.length&&p(t.items[0]):_2(t,p),Wo(l,d),l},_update(e,t,n){pc=t,Ei=t.__values__,kQ(z7,n),e.attr(z7,n,this);let r=fxe[e.type];r&&r.call(this,e,t,n),pc&&this.style(pc,n)},style(e,t){if(t!=null){for(let n in ox){let r=n==="font"?P7(t):t[n];if(r===Ei[n])continue;let i=ox[n];r==null?e.removeAttribute(i):(PV(r)&&(r=eQ(r,this._defs.gradient,$Q())),e.setAttribute(i,r+"")),Ei[n]=r}for(let n in ax)Xy(e,ax[n],t[n])}},defs(){let e=this._svg,t=this._defs,n=t.el,r=0;for(let i in t.gradient)n||(t.el=n=gr(e,w7+1,"defs",mr)),r=sxe(n,t.gradient[i],r);for(let i in t.clipping)n||(t.el=n=gr(e,w7+1,"defs",mr)),r=cxe(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):Wo(n,r))},_clearDefs(){let e=this._defs;e.gradient={},e.clipping={}}});function QX(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function sxe(e,t,n){let r,i,o;if(t.gradient==="radial"){let a=gr(e,n++,"pattern",mr);Y3(a,{id:Qy+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=gr(a,0,"rect",mr),Y3(a,{width:1,height:1,fill:`url(${$Q()}#${t.id})`}),e=gr(e,n++,"radialGradient",mr),Y3(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=gr(e,n++,"linearGradient",mr),Y3(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=gr(e,r,"stop",mr),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return Wo(e,r),n}function cxe(e,t,n){let r;return e=gr(e,n,"clipPath",mr),e.setAttribute("id",t.id),t.path?(r=gr(e,0,"path",mr),r.setAttribute("d",t.path)):(r=gr(e,0,"rect",mr),Y3(r,{x:0,y:0,width:t.width,height:t.height})),Wo(e,1),n+1}function lxe(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;_2(n,a=>{i=e.mark(t,a,i,r),++o}),Wo(t,1+o)}function KX(e,t,n,r,i){let o=e._svg,a;if(!o&&(a=t.ownerDocument,o=W3(a,r,mr),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){let s=W3(a,"path",mr);o.appendChild(s),s.__data__=e;let c=W3(a,"g",mr);o.appendChild(c),c.__data__=e;let l=W3(a,"path",mr);o.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(o.ownerSVGElement!==i||uxe(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function uxe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}var pc=null,Ei=null,fxe={group(e,t,n){let r=pc=t.childNodes[2];Ei=r.__values__,e.foreground(z7,n,this),Ei=t.__values__,pc=t.childNodes[1],e.content(z7,n,this);let i=pc=t.childNodes[0];e.background(z7,n,this);let o=n.mark.interactive===!1?"none":null;if(o!==Ei.events&&(t1(r,"pointer-events",o),t1(i,"pointer-events",o),Ei.events=o),n.strokeForeground&&n.stroke){let a=n.fill;t1(r,"display",null),this.style(i,n),t1(i,"stroke",null),a&&(n.fill=null),Ei=r.__values__,this.style(r,n),a&&(n.fill=a),pc=null}else t1(r,"display","none")},image(e,t,n){n.smooth===!1?(Xy(t,"image-rendering","optimizeSpeed"),Xy(t,"image-rendering","pixelated")):Xy(t,"image-rendering",null)},text(e,t,n){let r=O7(n),i,o,a,s;F(r)?(o=r.map(c=>Z3(n,c)),i=o.join(`
`),i!==Ei.text&&(Wo(t,0),a=t.ownerDocument,s=K3(n),o.forEach((c,l)=>{let u=W3(a,"tspan",mr);u.__data__=n,u.textContent=c,l&&(u.setAttribute("x",0),u.setAttribute("dy",s)),t.appendChild(u)}),Ei.text=i)):(o=Z3(n,r),o!==Ei.text&&(t.textContent=o,Ei.text=o)),t1(t,"font-family",P7(n)),t1(t,"font-size",Ja(n)+"px"),t1(t,"font-style",n.fontStyle),t1(t,"font-variant",n.fontVariant),t1(t,"font-weight",n.fontWeight)}};function z7(e,t,n){t!==Ei[e]&&(n?dxe(pc,e,t,n):t1(pc,e,t),Ei[e]=t)}function Xy(e,t,n){n!==Ei[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Ei[t]=n)}function Y3(e,t){for(let n in t)t1(e,n,t[n])}function t1(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function dxe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function $Q(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function pN(e){so.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}ee(pN,so,{svg(){return this._text},_render(e){let t=dN();t.open("svg",ke({},L7,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",PQ,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){let n=n1[t.marktype],r=n.tag,i=[kQ,n.attr];e.open("g",{class:SQ(t),"clip-path":t.clip?jV(this,t,t.group):null},TQ(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});let o=a=>{let s=this.href(a);if(s&&e.open("a",s),e.open(r,this.attr(t,a,i,r!=="g"?r:null)),r==="text"){let c=O7(a);if(F(c)){let l={x:0,dy:K3(a)};for(let u=0;u<c.length;++u)e.open("tspan",u?l:null).text(Z3(a,c[u])).close()}else e.text(Z3(a,c))}else if(r==="g"){let c=a.strokeForeground,l=a.fill,u=a.stroke;c&&u&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),_2(a,f=>this.mark(e,f)),e.close(),c&&u?(l&&(a.fill=null),a.stroke=u,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),l&&(a.fill=l)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),s&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):_2(t,o),e.close()},href(e){let t=e.href,n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){let i={},o=(a,s,c,l)=>{i[l||a]=s};return Array.isArray(n)?n.forEach(a=>a(o,t,this)):n(o,t,this),r&&pxe(i,t,e,r,this._defs),i},defs(e){let t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(let i in t){let o=t[i],a=o.stops;o.gradient==="radial"?(e.open("pattern",{id:Qy+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:i,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let s=0;s<a.length;++s)e.open("stop",{offset:a[s].offset,"stop-color":a[s].color}).close();e.close()}for(let i in n){let o=n[i];e.open("clipPath",{id:i}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});function pxe(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=P7(t),e["font-size"]=Ja(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(let a in ox){let s=t[a],c=ox[a];s==="transparent"&&(c==="fill"||c==="stroke")||s!=null&&(PV(s)&&(s=eQ(s,i.gradient,"")),e[c]=s)}for(let a in ax){let s=t[a];s!=null&&(o=o||[],o.push(`${ax[a]}: ${s};`))}return o&&(e.style=o.join(" ")),e}var N2={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function hxe(e){N2.svgMarkTypes=e.svgMarkTypes??["text"],N2.svgOnTop=e.svgOnTop??!0,N2.debug=e.debug??!1}function sx(e){so.call(this,e),this._svgRenderer=new vx(e),this._canvasRenderer=new V7(e)}var ZX=so.prototype;ee(sx,so,{initialize(e,t,n,r,i){this._root_el=gr(e,0,"div");let o=gr(this._root_el,0,"div"),a=gr(this._root_el,1,"div");return this._root_el.style.position="relative",N2.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=N2.svgOnTop?a:o,this._canvasEl=N2.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),ZX.initialize.call(this,e,t,n,r,i)},dirty(e){return N2.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){let r=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(i=>!N2.svgMarkTypes.includes(i));this._svgRenderer.render(e,N2.svgMarkTypes),this._canvasRenderer.render(e,r)},resize(e,t,n,r){return ZX.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background(e){return N2.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function hN(e,t){hc.call(this,e,t)}ee(hN,hc,{initialize(e,t,n){let r=gr(gr(e,0,"div"),N2.svgOnTop?0:1,"div");return hc.prototype.initialize.call(this,r,t,n)}});var BQ="canvas",UQ="hybrid",jQ="png",qQ="svg",GQ="none",mc={Canvas:BQ,PNG:jQ,SVG:qQ,Hybrid:UQ,None:GQ},Yl={};Yl[BQ]=Yl[jQ]={renderer:V7,headless:V7,handler:hc};Yl[qQ]={renderer:vx,headless:pN,handler:sN};Yl[UQ]={renderer:sx,headless:sx,handler:hN};Yl[GQ]={};function B7(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Yl[e]=t,this):Yl[e]}function mN(e,t,n){let r=[],i=new Nn().union(t),o=e.marktype;return o?WQ(e,i,n,r):o==="group"?YQ(e,i,n,r):B("Intersect scene must be mark node or group item.")}function WQ(e,t,n,r){if(mxe(e,t,n)){let i=e.items,o=e.marktype,a=i.length,s=0;if(o==="group")for(;s<a;++s)YQ(i[s],t,n,r);else for(let c=n1[o].isect;s<a;++s){let l=i[s];XQ(l,t,c)&&r.push(l)}}return r}function mxe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function YQ(e,t,n,r){n&&n(e.mark)&&XQ(e,t,n1.group.isect)&&r.push(e);let i=e.items,o=i&&i.length;if(o){let a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let c=0;c<o;++c)WQ(i[c],t,n,r);t.translate(a,s)}return r}function XQ(e,t,n){let r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}var HV=new Nn;function gN(e){let t=e.clip;if(Ie(t))t(F7(HV.clear()));else if(t)HV.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(HV)}var gxe=1e-9;function vN(e,t,n){return e===t?!0:n==="path"?QQ(e,t):e instanceof Date&&t instanceof Date?+e==+t:Pe(e)&&Pe(t)?Math.abs(e-t)<=gxe:!e||!t||!ne(e)&&!ne(t)?e==t:vxe(e,t)}function QQ(e,t){return vN(Wl(e),Wl(t))}function vxe(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!vN(e[i],t[i],i))return!1;return typeof e==typeof t}function yxe(){aQ(),Bge()}var ku="top",k2="left",T2="right",n4="bottom",xxe="top-left",Cxe="top-right",bxe="bottom-left",Mxe="bottom-right",CN="start",yN="middle",r1="end",wxe="x",Sxe="y",Mx="group",bN="axis",MN="title",Exe="frame",Dxe="scope",wN="legend",aK="row-header",sK="row-footer",cK="row-title",lK="column-header",uK="column-footer",fK="column-title",zxe="padding",Hxe="symbol",dK="fit",pK="fit-x",hK="fit-y",Lxe="pad",SN="none",yx="all",xN="each",EN="flush",e4="column",t4="row";function mK(e){$.call(this,null,e)}ee(mK,$,{transform(e,t){let n=t.dataflow,r=e.mark,i=r.marktype,o=n1[i],a=o.bound,s=r.bounds,c;if(o.nested)r.items.length&&n.dirty(r.items[0]),s=xx(r,a),r.items.forEach(l=>{l.bounds.clear().union(s)});else if(i===Mx||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),s.clear(),r.items.forEach(l=>s.union(xx(l,a))),r.role){case bN:case wN:case MN:t.reflow()}else c=t.changed(t.REM),t.visit(t.ADD,l=>{s.union(xx(l,a))}),t.visit(t.MOD,l=>{c=c||s.alignsWith(l.bounds),n.dirty(l),s.union(xx(l,a))}),c&&(s.clear(),r.items.forEach(l=>s.union(l.bounds)));return gN(r),t.modifies("bounds")}});function xx(e,t,n){return t(e.bounds.clear(),e,n)}var KQ=":vega_identifier:";function DN(e){$.call(this,0,e)}DN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ee(DN,$,{transform(e,t){let n=Axe(t.dataflow),r=e.as,i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function Axe(e){return e._signals[KQ]||(e._signals[KQ]=e.add(0))}function gK(e){$.call(this,null,e)}ee(gK,$,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Vxe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);let r=n.marktype===Mx?I7:T7;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Vxe(e){let t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function vK(e){$.call(this,null,e)}var ZQ={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!yK(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},yK=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),JQ=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(yK(i,o=e[n].bounds,t))return!0},Nxe=e=>{let t=e.bounds;return t.width()>1&&t.height()>1},_xe=(e,t,n)=>{var r=e.range(),i=new Nn;return t===ku||t===n4?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},eK=e=>(e.forEach(t=>t.opacity=1),e),tK=(e,t)=>e.reflow(t.modified()).modifies("opacity");ee(vK,$,{transform(e,t){let n=ZQ[e.method]||ZQ.parity,r=e.separation||0,i=t.materialize(t.SOURCE).source,o,a;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(eK(i),t=tK(t,e)),t;if(i=i.filter(Nxe),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=eK(i),t=tK(t,e),o.length>=3&&JQ(o,r)){do o=n(o,r);while(o.length>=3&&JQ(o,r));o.length<3&&!Ge(i).opacity&&(o.length>1&&(Ge(o).opacity=0),Ge(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=_xe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(c=>{a(c)||(c.opacity=0)}));let s=o[0].mark.bounds.clear();return i.forEach(c=>{c.opacity&&s.union(c.bounds)}),t}});function xK(e){$.call(this,null,e)}ee(xK,$,{transform(e,t){let n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){let r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});var Di=new Nn;function _u(e,t,n){return e[t]===n?0:(e[t]=n,1)}function kxe(e){var t=e.items[0].orient;return t===k2||t===T2}function Txe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Ixe(e,t,n,r){var i=t.items[0],o=i.datum,a=i.translate!=null?i.translate:.5,s=i.orient,c=Txe(o),l=i.range,u=i.offset,f=i.position,d=i.minExtent,p=i.maxExtent,h=o.title&&i.items[c[2]].items[0],m=i.titlePadding,g=i.bounds,v=h&&px(h),y=0,C=0,b,M;switch(Di.clear().union(g),g.clear(),(b=c[0])>-1&&g.union(i.items[b].bounds),(b=c[1])>-1&&g.union(i.items[b].bounds),s){case ku:y=f||0,C=-u,M=Math.max(d,Math.min(p,-g.y1)),g.add(0,-M).add(l,0),h&&Cx(e,h,M,m,v,0,-1,g);break;case k2:y=-u,C=f||0,M=Math.max(d,Math.min(p,-g.x1)),g.add(-M,0).add(0,l),h&&Cx(e,h,M,m,v,1,-1,g);break;case T2:y=n+u,C=f||0,M=Math.max(d,Math.min(p,g.x2)),g.add(0,0).add(M,l),h&&Cx(e,h,M,m,v,1,1,g);break;case n4:y=f||0,C=r+u,M=Math.max(d,Math.min(p,g.y2)),g.add(0,0).add(l,M),h&&Cx(e,h,M,m,0,0,1,g);break;default:y=i.x,C=i.y}return Za(g.translate(y,C),i),_u(i,"x",y+a)|_u(i,"y",C+a)&&(i.bounds=Di,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function Cx(e,t,n,r,i,o,a,s){let c=t.bounds;if(t.auto){let l=a*(n+i+r),u=0,f=0;e.dirty(t),o?u=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(c.translate(-u,-f)),e.dirty(t)}s.union(c)}var nK=(e,t)=>Math.floor(Math.min(e,t)),rK=(e,t)=>Math.ceil(Math.max(e,t));function Fxe(e){var t=e.items,n=t.length,r=0,i,o;let a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===Mx)switch(i.role){case bN:case wN:case MN:break;case aK:a.rowheaders.push(...o);break;case sK:a.rowfooters.push(...o);break;case lK:a.colheaders.push(...o);break;case uK:a.colfooters.push(...o);break;case cK:a.rowtitle=o[0];break;case fK:a.coltitle=o[0];break;default:a.marks.push(...o)}return a}function Rxe(e){return new Nn().set(0,0,e.width||0,e.height||0)}function Oxe(e){let t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function yn(e,t,n){let r=ne(e)?e[t]:e;return r??(n!==void 0?n:0)}function iK(e){return e<0?Math.ceil(-e):0}function CK(e,t,n){var r=!n.nodirty,i=n.bounds===EN?Rxe:Oxe,o=Di.set(0,0,0,0),a=yn(n.align,e4),s=yn(n.align,t4),c=yn(n.padding,e4),l=yn(n.padding,t4),u=n.columns||t.length,f=u<=0?1:Math.ceil(t.length/u),d=t.length,p=Array(d),h=Array(u),m=0,g=Array(d),v=Array(f),y=0,C=Array(d),b=Array(d),M=Array(d),S,w,E,D,z,H,j,L,N,A,T;for(w=0;w<u;++w)h[w]=0;for(w=0;w<f;++w)v[w]=0;for(w=0;w<d;++w)H=t[w],z=M[w]=i(H),H.x=H.x||0,C[w]=0,H.y=H.y||0,b[w]=0,E=w%u,D=~~(w/u),m=Math.max(m,j=Math.ceil(z.x2)),y=Math.max(y,L=Math.ceil(z.y2)),h[E]=Math.max(h[E],j),v[D]=Math.max(v[D],L),p[w]=c+iK(z.x1),g[w]=l+iK(z.y1),r&&e.dirty(t[w]);for(w=0;w<d;++w)w%u===0&&(p[w]=0),w<u&&(g[w]=0);if(a===xN)for(E=1;E<u;++E){for(T=0,w=E;w<d;w+=u)T<p[w]&&(T=p[w]);for(w=E;w<d;w+=u)p[w]=T+h[E-1]}else if(a===yx){for(T=0,w=0;w<d;++w)w%u&&T<p[w]&&(T=p[w]);for(w=0;w<d;++w)w%u&&(p[w]=T+m)}else for(a=!1,E=1;E<u;++E)for(w=E;w<d;w+=u)p[w]+=h[E-1];if(s===xN)for(D=1;D<f;++D){for(T=0,w=D*u,S=w+u;w<S;++w)T<g[w]&&(T=g[w]);for(w=D*u;w<S;++w)g[w]=T+v[D-1]}else if(s===yx){for(T=0,w=u;w<d;++w)T<g[w]&&(T=g[w]);for(w=u;w<d;++w)g[w]=T+y}else for(s=!1,D=1;D<f;++D)for(w=D*u,S=w+u;w<S;++w)g[w]+=v[D-1];for(N=0,w=0;w<d;++w)N=p[w]+(w%u?N:0),C[w]+=N-t[w].x;for(E=0;E<u;++E)for(A=0,w=E;w<d;w+=u)A+=g[w],b[w]+=A-t[w].y;if(a&&yn(n.center,e4)&&f>1)for(w=0;w<d;++w)z=a===yx?m:h[w%u],N=z-M[w].x2-t[w].x-C[w],N>0&&(C[w]+=N/2);if(s&&yn(n.center,t4)&&u!==1)for(w=0;w<d;++w)z=s===yx?y:v[~~(w/u)],A=z-M[w].y2-t[w].y-b[w],A>0&&(b[w]+=A/2);for(w=0;w<d;++w)o.union(M[w].translate(C[w],b[w]));switch(N=yn(n.anchor,wxe),A=yn(n.anchor,Sxe),yn(n.anchor,e4)){case r1:N-=o.width();break;case yN:N-=o.width()/2}switch(yn(n.anchor,t4)){case r1:A-=o.height();break;case yN:A-=o.height()/2}for(N=Math.round(N),A=Math.round(A),o.clear(),w=0;w<d;++w)t[w].mark.bounds.clear();for(w=0;w<d;++w)H=t[w],H.x+=C[w]+=N,H.y+=b[w]+=A,o.union(H.mark.bounds.union(H.bounds.translate(C[w],b[w]))),r&&e.dirty(H);return o}function Pxe(e,t,n){var r=Fxe(t),i=r.marks,o=n.bounds===EN?$xe:Bxe,a=n.offset,s=n.columns||i.length,c=s<=0?1:Math.ceil(i.length/s),l=c*s,u,f,d,p,h,m,g;let v=CK(e,i,n);v.empty()&&v.set(0,0,0,0),r.rowheaders&&(m=yn(n.headerBand,t4,null),u=bx(e,r.rowheaders,i,s,c,-yn(a,"rowHeader"),nK,0,o,"x1",0,s,1,m)),r.colheaders&&(m=yn(n.headerBand,e4,null),f=bx(e,r.colheaders,i,s,s,-yn(a,"columnHeader"),nK,1,o,"y1",0,1,s,m)),r.rowfooters&&(m=yn(n.footerBand,t4,null),d=bx(e,r.rowfooters,i,s,c,yn(a,"rowFooter"),rK,0,o,"x2",s-1,s,1,m)),r.colfooters&&(m=yn(n.footerBand,e4,null),p=bx(e,r.colfooters,i,s,s,yn(a,"columnFooter"),rK,1,o,"y2",l-s,1,s,m)),r.rowtitle&&(h=yn(n.titleAnchor,t4),g=yn(a,"rowTitle"),g=h===r1?d+g:u-g,m=yn(n.titleBand,t4,.5),oK(e,r.rowtitle,g,0,v,m)),r.coltitle&&(h=yn(n.titleAnchor,e4),g=yn(a,"columnTitle"),g=h===r1?p+g:f-g,m=yn(n.titleBand,e4,.5),oK(e,r.coltitle,g,1,v,m))}function $xe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Bxe(e,t){return e.bounds[t]}function bx(e,t,n,r,i,o,a,s,c,l,u,f,d,p){var h=n.length,m=0,g=0,v,y,C,b,M,S,w,E,D;if(!h)return m;for(v=u;v<h;v+=f)n[v]&&(m=a(m,c(n[v],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=o,y=0,b=t.length;y<b;++y)e.dirty(t[y]),t[y].mark.bounds.clear();for(v=u,y=0,b=t.length;y<b;++y,v+=f){for(S=t[y],M=S.mark.bounds,C=v;C>=0&&(w=n[C])==null;C-=d);s?(E=p==null?w.x:Math.round(w.bounds.x1+p*w.bounds.width()),D=m):(E=m,D=p==null?w.y:Math.round(w.bounds.y1+p*w.bounds.height())),M.union(S.bounds.translate(E-(S.x||0),D-(S.y||0))),S.x=E,S.y=D,e.dirty(S),g=a(g,M[l])}return g}function oK(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function Uxe(e,t){let n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function jxe(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function qxe(e,t,n,r,i,o,a){let s=Uxe(n,t),c=jxe(e,s("offset",0)),l=s("anchor",CN),u=l===r1?1:l===yN?.5:0,f={align:xN,bounds:s("bounds",EN),columns:s("direction")==="vertical"?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case k2:f.anchor={x:Math.floor(r.x1)-c,column:r1,y:u*(a||r.height()+2*r.y1),row:l};break;case T2:f.anchor={x:Math.ceil(r.x2)+c,y:u*(a||r.height()+2*r.y1),row:l};break;case ku:f.anchor={y:Math.floor(i.y1)-c,row:r1,x:u*(o||i.width()+2*i.x1),column:l};break;case n4:f.anchor={y:Math.ceil(i.y2)+c,x:u*(o||i.width()+2*i.x1),column:l};break;case xxe:f.anchor={x:c,y:c};break;case Cxe:f.anchor={x:o-c,y:c,column:r1};break;case bxe:f.anchor={x:c,y:a-c,row:r1};break;case Mxe:f.anchor={x:o-c,y:a-c,column:r1,row:r1};break}return f}function Gxe(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,a=n.x,s=n.y,c,l;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),Yxe(e,n,n.items[0].items[0]),o=Wxe(n,o),c=2*n.padding,l=2*n.padding,o.empty()||(c=Math.ceil(o.width()+c),l=Math.ceil(o.height()+l)),r.type===Hxe&&Xxe(n.items[0].items[0].items[0].items),i!==SN&&(n.x=a=0,n.y=s=0),n.width=c,n.height=l,Za(o.set(a,s,a+c,s+l),n),n.mark.bounds.clear().union(o),n}function Wxe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Yxe(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&U7(e,n,i,o);else{var a=t.items[1].items[0],s=a.anchor,c=t.titlePadding||0,l=r-a.x,u=r-a.y;switch(a.orient){case k2:i+=Math.ceil(a.bounds.width())+c;break;case T2:case n4:break;default:o+=a.bounds.height()+c}switch((i||o)&&U7(e,n,i,o),a.orient){case k2:u+=Nu(t,n,a,s,1,1);break;case T2:l+=Nu(t,n,a,r1,0,0)+c,u+=Nu(t,n,a,s,1,1);break;case n4:l+=Nu(t,n,a,s,0,0),u+=Nu(t,n,a,r1,-1,0,1)+c;break;default:l+=Nu(t,n,a,s,0,0)}(l||u)&&U7(e,a,l,u),(l=Math.round(a.bounds.x1-r))<0&&(U7(e,n,-l,0),U7(e,a,-l,0))}}function Nu(e,t,n,r,i,o,a){let s=e.datum.type!=="symbol",c=n.datum.vgrad,l=s&&(o||!c)&&!a?t.items[0]:t,u=l.bounds[i?"y2":"x2"]-e.padding,f=c&&o?u:0,d=c&&o?0:u,p=i<=0?0:px(n);return Math.round(r===CN?f:r===r1?d-p:.5*(u-p))}function U7(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Xxe(e){let t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Qxe(e,t,n,r,i){var o=t.items[0],a=o.frame,s=o.orient,c=o.anchor,l=o.offset,u=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],p=s===k2||s===T2?r:n,h=0,m=0,g=0,v=0,y=0,C;if(a!==Mx?s===k2?(h=i.y2,p=i.y1):s===T2?(h=i.y1,p=i.y2):(h=i.x1,p=i.x2):s===k2&&(h=r,p=0),C=c===CN?h:c===r1?p:(h+p)/2,d&&d.text){switch(s){case ku:case n4:y=f.bounds.height()+u;break;case k2:v=f.bounds.width()+u;break;case T2:v=-f.bounds.width()-u;break}Di.clear().union(d.bounds),Di.translate(v-(d.x||0),y-(d.y||0)),_u(d,"x",v)|_u(d,"y",y)&&(e.dirty(d),d.bounds.clear().union(Di),d.mark.bounds.clear().union(Di),e.dirty(d)),Di.clear().union(d.bounds)}else Di.clear();switch(Di.union(f.bounds),s){case ku:m=C,g=i.y1-Di.height()-l;break;case k2:m=i.x1-Di.width()-l,g=C;break;case T2:m=i.x2+Di.width()+l,g=C;break;case n4:m=C,g=i.y2+l;break;default:m=o.x,g=o.y}return _u(o,"x",m)|_u(o,"y",g)&&(Di.translate(m,g),e.dirty(o),o.bounds.clear().union(Di),t.bounds.clear().union(Di),e.dirty(o)),o.bounds}function bK(e){$.call(this,null,e)}ee(bK,$,{transform(e,t){let n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Pxe(n,r,e.layout),Zxe(n,r,e)}),Kxe(e.mark.group)?t.reflow():t}});function Kxe(e){return e&&e.mark.role!=="legend-entry"}function Zxe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),a=new Nn().set(0,0,i,o),s=a.clone(),c=a.clone(),l=[],u,f,d,p,h,m;for(h=0,m=r.length;h<m;++h)switch(f=r[h],f.role){case bN:p=kxe(f)?s:c,p.union(Ixe(e,f,i,o));break;case MN:u=f;break;case wN:l.push(Gxe(e,f));break;case Exe:case Dxe:case aK:case sK:case cK:case lK:case uK:case fK:s.union(f.bounds),c.union(f.bounds);break;default:a.union(f.bounds)}if(l.length){let g={};l.forEach(v=>{d=v.orient||T2,d!==SN&&(g[d]||(g[d]=[])).push(v)});for(let v in g){let y=g[v];CK(e,y,qxe(y,v,n.legends,s,c,i,o))}l.forEach(v=>{let y=v.bounds;if(y.equals(v._bounds)||(v.bounds=v._bounds,e.dirty(v),v.bounds=y,e.dirty(v)),n.autosize&&(n.autosize.type===dK||n.autosize.type===pK||n.autosize.type===hK))switch(v.orient){case k2:case T2:a.add(y.x1,0).add(y.x2,0);break;case ku:case n4:a.add(0,y.y1).add(0,y.y2)}else a.union(y)})}a.union(s).union(c),u&&a.union(Qxe(e,u,i,o,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),Jxe(e,t,a,n)}function Jxe(e,t,n,r){let i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,c=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),u=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1)),d=Math.max(0,Math.ceil(n.x2-c)),p=Math.max(0,Math.ceil(n.y2-u));if(i.contains===zxe){let h=e.padding();a-=h.left+h.right,s-=h.top+h.bottom}o===SN?(l=0,f=0,c=a,u=s):o===dK?(c=Math.max(0,a-l-d),u=Math.max(0,s-f-p)):o===pK?(c=Math.max(0,a-l-d),s=u+f+p):o===hK?(a=c+l+d,u=Math.max(0,s-f-p)):o===Lxe&&(a=c+l+d,s=u+f+p),e._resizeView(a,s,c,u,[l,f],i.resize)}var NN={};Cr(NN,{axisticks:()=>EK,datajoin:()=>DK,encode:()=>zK,legendentries:()=>HK,linkpath:()=>LN,pie:()=>AN,scale:()=>_K,sortitems:()=>TK,stack:()=>VN});function EK(e){$.call(this,null,e)}ee(EK,$,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,s=Py(o,a,e.minstep),c=e.format||yV(n,o,s,e.formatSpecifier,e.formatType,!!e.values),l=e.values?vV(o,e.values,s):$y(o,s);return i&&(r.rem=i),i=l.map((u,f)=>lt({index:f/(l.length-1||1),value:u,label:c(u)})),e.extra&&i.length&&i.push(lt({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function DK(e){$.call(this,null,e)}function eCe(){return lt({})}function tCe(e){let t=b3().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ee(DK,$,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||eCe,o=e.key||De,a=this.value;return F(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&B("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=tCe(o)),t.visit(t.ADD,s=>{let c=o(s),l=a.get(c);l?l.exit?(a.empty--,r.add.push(l)):r.mod.push(l):(l=i(s),a.set(c,l),r.add.push(l)),l.datum=s,l.exit=!1}),t.visit(t.MOD,s=>{let c=o(s),l=a.get(c);l&&(l.datum=s,r.mod.push(l))}),t.visit(t.REM,s=>{let c=o(s),l=a.get(c);s===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}});function zK(e){$.call(this,null,e)}ee(zK,$,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(F(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var a=o==="enter",s=i.update||Xs,c=i.enter||Xs,l=i.exit||Xs,u=(o&&!a?i[o]:s)||Xs;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{c(f,e),s(f,e)}),n.modifies(c.output),n.modifies(s.output),u!==Xs&&u!==s&&(t.visit(t.ADD,f=>{u(f,e)}),n.modifies(u.output))),t.changed(t.REM)&&l!==Xs&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),a||u!==Xs){let f=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(f,d=>{let p=c(d,e)||r;(u(d,e)||p)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)):t.visit(f,d=>{(u(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)}return n.changed()?n:t.StopPropagation}});function HK(e){$.call(this,[],e)}ee(HK,$,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||b7,a=e.scale,s=+e.limit,c=Py(a,e.count==null?5:e.count,e.minstep),l=!!e.values||o===b7,u=e.format||CV(n,a,c,o,e.formatSpecifier,e.formatType,l),f=e.values||xV(a,c),d,p,h,m,g;return i&&(r.rem=i),o===b7?(s&&f.length>s?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,s-1),g=!0):i=f,Ie(h=e.size)?(!e.values&&a(i[0])===0&&(i=i.slice(1)),m=i.reduce((v,y)=>Math.max(v,h(y,e)),0)):h=mn(m=h||8),i=i.map((v,y)=>lt({index:y,label:u(v,y,i),value:v,offset:m,size:h(v,e)})),g&&(g=f[i.length],i.push(lt({index:i.length,label:`\u2026${f.length-i.length} entries`,value:g,offset:m,size:h(g,e)})))):o===SX?(d=a.domain(),p=Oy(a,d[0],Ge(d)),f.length<3&&!e.values&&d[0]!==Ge(d)&&(f=[d[0],Ge(d)]),i=f.map((v,y)=>lt({index:y,label:u(v,y,f),value:v,perc:p(v)}))):(h=f.length-1,p=zX(a),i=f.map((v,y)=>lt({index:y,label:u(v,y,f),value:v,perc:y?p(v):0,perc2:y===h?1:p(f[y+1])}))),r.source=i,r.add=i,this.value=i,r}});var nCe=e=>e.source.x,rCe=e=>e.source.y,iCe=e=>e.target.x,oCe=e=>e.target.y;function LN(e){$.call(this,{},e)}LN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ee(LN,$,{transform(e,t){var n=e.sourceX||nCe,r=e.sourceY||rCe,i=e.targetX||iCe,o=e.targetY||oCe,a=e.as||"path",s=e.orient||"vertical",c=e.shape||"line",l=MK.get(c+"-"+s)||MK.get(c);return l||B("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,u=>{u[a]=l(n(u),r(u),i(u),o(u))}),t.reflow(e.modified()).modifies(a)}});var LK=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,aCe=(e,t,n,r)=>LK(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),AK=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.hypot(i,o)/2,s=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+s+" 0 1 "+n+","+r},sCe=(e,t,n,r)=>AK(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),VK=(e,t,n,r)=>{let i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},cCe=(e,t,n,r)=>VK(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),lCe=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,uCe=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,fCe=(e,t,n,r)=>{let i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),c=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(c?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},dCe=(e,t,n,r)=>{let i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},pCe=(e,t,n,r)=>{let i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},hCe=(e,t,n,r)=>{let i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),c=(t+r)/2;return"M"+t*i+","+t*o+"C"+c*i+","+c*o+" "+c*a+","+c*s+" "+r*a+","+r*s},MK=b3({line:LK,"line-radial":aCe,arc:AK,"arc-radial":sCe,curve:VK,"curve-radial":cCe,"orthogonal-horizontal":lCe,"orthogonal-vertical":uCe,"orthogonal-radial":fCe,"diagonal-horizontal":dCe,"diagonal-vertical":pCe,"diagonal-radial":hCe});function AN(e){$.call(this,null,e)}AN.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ee(AN,$,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||Ia,a=e.startAngle||0,s=e.endAngle!=null?e.endAngle:2*Math.PI,c=t.source,l=c.map(o),u=l.length,f=a,d=(s-a)/K6(l),p=Un(u),h,m,g;for(e.sort&&p.sort((v,y)=>l[v]-l[y]),h=0;h<u;++h)g=l[p[h]],m=c[p[h]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});var mCe=5;function gCe(e){let t=e.type;return!e.bins&&(t===Ol||t===wu||t===Su)}function NK(e){return y7(e)&&e!==A2}var vCe=pr(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function _K(e){$.call(this,null,e),this.modified(!0)}ee(_K,$,{transform(e,t){var n=t.dataflow,r=this.value,i=yCe(e);(!r||i!==r.type)&&(this.value=r=dt(i)());for(i in e)if(!vCe[i]){if(i==="padding"&&NK(r.type))continue;Ie(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return SCe(r,e,wCe(r,e,CCe(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function yCe(e){var t=e.type,n="",r;return t===A2?A2+"-"+Ol:(xCe(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?A2+"-":r===3?Pl+"-":""),(n+t||Ol).toLowerCase())}function xCe(e){let t=e.type;return y7(t)&&t!==B3&&t!==U3&&(e.scheme||e.range&&e.range.length&&e.range.every(Q))}function CCe(e,t,n){let r=bCe(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,a=t.zero||t.zero===void 0&&gCe(e),s,c;if(!i)return 0;if(NK(o)&&t.padding&&i[0]!==Ge(i)&&(i=MCe(o,i,t.range,t.padding,t.exponent,t.constant)),(a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(s=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[s]<0&&(i[s]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[s]=t.domainMax),t.domainMid!=null)){c=t.domainMid;let l=c>i[s]?s+1:c<i[0]?0:s;l!==s&&n.warn("Scale domainMid exceeds domain min or max.",c),i.splice(l,0,c)}return e.domain(kK(o,i,n)),o===_y&&e.unknown(t.domainImplicit?pu:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Py(e,t.nice)||null),i.length}function bCe(e,t,n){return t?(e.domain(kK(e.type,t,n)),t.length):-1}function MCe(e,t,n,r,i,o){var a=Math.abs(Ge(n)-n[0]),s=a/(a-2*r),c=e===Xa?Z5(t,null,s):e===Su?W6(t,null,s,.5):e===wu?W6(t,null,s,i||1):e===p7?J5(t,null,s,o||1):K5(t,null,s);return t=t.slice(),t[0]=c[0],t[t.length-1]=c[1],t}function kK(e,t,n){if(hV(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Z(t))}return t}function wCe(e,t,n){let r=t.bins;if(r&&!F(r)){let i=e.domain(),o=i[0],a=Ge(i),s=r.step,c=r.start==null?o:r.start,l=r.stop==null?a:r.stop;s||B("Scale bins parameter missing step property."),c<o&&(c=s*Math.ceil(o/s)),l>a&&(l=s*Math.floor(a/s)),r=Un(c,l+s/2,s)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Ty&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function SCe(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=ECe(r,t,n);else if(t.scheme&&(o=DCe(r,t,n),Ie(o))){if(e.interpolator)return e.interpolator(o);B(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&mV(r))return e.interpolator(Eu(HN(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(x7(t.interpolate,t.interpolateGamma)):Ie(e.round)?e.round(i):Ie(e.rangeRound)&&e.interpolate(i?Wa:wi),o&&e.range(HN(o,t.reverse))}function ECe(e,t,n){e!==lV&&e!==ky&&B("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===ky?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*d7(n,i,r)]}function DCe(e,t,n){var r=t.schemeExtent,i,o;return F(t.scheme)?o=Eu(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=C7(i),o||B(`Unrecognized scheme name: ${t.scheme}`)),n=e===m7?n+1:e===Ty?n-1:e===Rl||e===h7?+t.schemeCount||mCe:n,mV(e)?wK(o,r,t.reverse):Ie(o)?Ry(wK(o,r),n):e===_y?o:o.slice(0,n)}function wK(e,t,n){return Ie(e)&&(t||n)?Fy(e,HN(t||[0,1],n)):e}function HN(e,t){return t?e.slice().reverse():e}function TK(e){$.call(this,null,e)}ee(TK,$,{transform(e,t){let n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Ba(e.sort)),this.modified(n),t}});var SK="zero",IK="center",FK="normalize",RK=["y0","y1"];function VN(e){$.call(this,null,e)}VN.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:SK,values:[SK,IK,FK]},{name:"as",type:"string",array:!0,length:2,default:RK}]};ee(VN,$,{transform(e,t){var n=e.as||RK,r=n[0],i=n[1],o=Ba(e.sort),a=e.field||Ia,s=e.offset===IK?zCe:e.offset===FK?HCe:LCe,c,l,u,f;for(c=ACe(t.source,e.groupby,o,a),l=0,u=c.length,f=c.max;l<u;++l)s(c[l],f,a,r,i);return t.reflow(e.modified()).modifies(n)}});function zCe(e,t,n,r,i){for(var o=(t-e.sum)/2,a=e.length,s=0,c;s<a;++s)c=e[s],c[r]=o,c[i]=o+=Math.abs(n(c))}function HCe(e,t,n,r,i){for(var o=1/e.sum,a=0,s=e.length,c=0,l=0,u;c<s;++c)u=e[c],u[r]=a,u[i]=a=o*(l+=Math.abs(n(u)))}function LCe(e,t,n,r,i){for(var o=0,a=0,s=e.length,c=0,l,u;c<s;++c)u=e[c],l=+n(u),l<0?(u[r]=a,u[i]=a+=l):(u[r]=o,u[i]=o+=l)}function ACe(e,t,n,r){var i=[],o=m=>m(u),a,s,c,l,u,f,d,p,h;if(t==null)i.push(e.slice());else for(a={},s=0,c=e.length;s<c;++s)u=e[s],f=t.map(o),d=a[f],d||(a[f]=d=[],i.push(d)),d.push(u);for(f=0,h=0,l=i.length;f<l;++f){for(d=i[f],s=0,p=0,c=d.length;s<c;++s)p+=Math.abs(r(d[s]));d.sum=p,p>h&&(h=p),n&&d.sort(n)}return i.max=h,i}var Q_={};Cr(Q_,{contour:()=>B_,geojson:()=>j_,geopath:()=>q_,geopoint:()=>G_,geoshape:()=>W_,graticule:()=>Y_,heatmap:()=>X_,isocontour:()=>P_,kde2d:()=>$_,projection:()=>YZ});var he=1e-6,Xl=1e-12,Ue=Math.PI,Pt=Ue/2,Tu=Ue/4,jn=Ue*2,$t=180/Ue,Oe=Ue/180,Fe=Math.abs,Yo=Math.atan,_n=Math.atan2,pe=Math.cos,j7=Math.ceil,wx=Math.exp;var Sx=Math.hypot,Ql=Math.log,Ex=Math.pow,fe=Math.sin,zi=Math.sign||function(e){return e>0?1:e<0?-1:0},Bt=Math.sqrt,Iu=Math.tan;function Dx(e){return e>1?0:e<-1?Ue:Math.acos(e)}function fn(e){return e>1?Pt:e<-1?-Pt:Math.asin(e)}function dn(){}function zx(e,t){e&&PK.hasOwnProperty(e.type)&&PK[e.type](e,t)}var OK={Feature:function(e,t){zx(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)zx(n[r].geometry,t)}},PK={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){_N(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)_N(n[r],t,0)},Polygon:function(e,t){$K(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)$K(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)zx(n[r],t)}};function _N(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function $K(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)_N(e[n],t,1);t.polygonEnd()}function N1(e,t){e&&OK.hasOwnProperty(e.type)?OK[e.type](e,t):zx(e,t)}var q7=new gn,Hx=new gn,BK,UK,kN,TN,IN,I2={point:dn,lineStart:dn,lineEnd:dn,polygonStart:function(){q7=new gn,I2.lineStart=VCe,I2.lineEnd=NCe},polygonEnd:function(){var e=+q7;Hx.add(e<0?jn+e:e),this.lineStart=this.lineEnd=this.point=dn},sphere:function(){Hx.add(jn)}};function VCe(){I2.point=_Ce}function NCe(){jK(BK,UK)}function _Ce(e,t){I2.point=jK,BK=e,UK=t,e*=Oe,t*=Oe,kN=e,TN=pe(t=t/2+Tu),IN=fe(t)}function jK(e,t){e*=Oe,t*=Oe,t=t/2+Tu;var n=e-kN,r=n>=0?1:-1,i=r*n,o=pe(t),a=fe(t),s=IN*a,c=TN*o+s*pe(i),l=s*r*fe(i);q7.add(_n(l,c)),kN=e,TN=o,IN=a}function FN(e){return Hx=new gn,N1(e,I2),Hx*2}function Kl(e){return[_n(e[1],e[0]),fn(e[2])]}function Xo(e){var t=e[0],n=e[1],r=pe(n);return[r*pe(t),r*fe(t),fe(n)]}function G7(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function gc(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Lx(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function W7(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Zl(e){var t=Bt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Mn,_1,kn,lo,Jl,YK,XK,Fu,Y7,r4,yc,vc={point:RN,lineStart:qK,lineEnd:GK,polygonStart:function(){vc.point=KK,vc.lineStart=kCe,vc.lineEnd=TCe,Y7=new gn,I2.polygonStart()},polygonEnd:function(){I2.polygonEnd(),vc.point=RN,vc.lineStart=qK,vc.lineEnd=GK,q7<0?(Mn=-(kn=180),_1=-(lo=90)):Y7>he?lo=90:Y7<-he&&(_1=-90),yc[0]=Mn,yc[1]=kn},sphere:function(){Mn=-(kn=180),_1=-(lo=90)}};function RN(e,t){r4.push(yc=[Mn=e,kn=e]),t<_1&&(_1=t),t>lo&&(lo=t)}function QK(e,t){var n=Xo([e*Oe,t*Oe]);if(Fu){var r=gc(Fu,n),i=[r[1],-r[0],0],o=gc(i,r);Zl(o),o=Kl(o);var a=e-Jl,s=a>0?1:-1,c=o[0]*$t*s,l,u=Fe(a)>180;u^(s*Jl<c&&c<s*e)?(l=o[1]*$t,l>lo&&(lo=l)):(c=(c+360)%360-180,u^(s*Jl<c&&c<s*e)?(l=-o[1]*$t,l<_1&&(_1=l)):(t<_1&&(_1=t),t>lo&&(lo=t))),u?e<Jl?co(Mn,e)>co(Mn,kn)&&(kn=e):co(e,kn)>co(Mn,kn)&&(Mn=e):kn>=Mn?(e<Mn&&(Mn=e),e>kn&&(kn=e)):e>Jl?co(Mn,e)>co(Mn,kn)&&(kn=e):co(e,kn)>co(Mn,kn)&&(Mn=e)}else r4.push(yc=[Mn=e,kn=e]);t<_1&&(_1=t),t>lo&&(lo=t),Fu=n,Jl=e}function qK(){vc.point=QK}function GK(){yc[0]=Mn,yc[1]=kn,vc.point=RN,Fu=null}function KK(e,t){if(Fu){var n=e-Jl;Y7.add(Fe(n)>180?n+(n>0?360:-360):n)}else YK=e,XK=t;I2.point(e,t),QK(e,t)}function kCe(){I2.lineStart()}function TCe(){KK(YK,XK),I2.lineEnd(),Fe(Y7)>he&&(Mn=-(kn=180)),yc[0]=Mn,yc[1]=kn,Fu=null}function co(e,t){return(t-=e)<0?t+360:t}function ICe(e,t){return e[0]-t[0]}function WK(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function ON(e){var t,n,r,i,o,a,s;if(lo=kn=-(Mn=_1=1/0),r4=[],N1(e,vc),n=r4.length){for(r4.sort(ICe),t=1,r=r4[0],o=[r];t<n;++t)i=r4[t],WK(r,i[0])||WK(r,i[1])?(co(r[0],i[1])>co(r[0],r[1])&&(r[1]=i[1]),co(i[0],r[1])>co(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(s=co(r[1],i[0]))>a&&(a=s,Mn=i[0],kn=r[1])}return r4=yc=null,Mn===1/0||_1===1/0?[[NaN,NaN],[NaN,NaN]]:[[Mn,_1],[kn,lo]]}var X7,Ax,Vx,Nx,_x,kx,Tx,Ix,PN,$N,BN,eZ,tZ,i1,o1,a1,F2={sphere:dn,point:UN,lineStart:ZK,lineEnd:JK,polygonStart:function(){F2.lineStart=OCe,F2.lineEnd=PCe},polygonEnd:function(){F2.lineStart=ZK,F2.lineEnd=JK}};function UN(e,t){e*=Oe,t*=Oe;var n=pe(t);Q7(n*pe(e),n*fe(e),fe(t))}function Q7(e,t,n){++X7,Vx+=(e-Vx)/X7,Nx+=(t-Nx)/X7,_x+=(n-_x)/X7}function ZK(){F2.point=FCe}function FCe(e,t){e*=Oe,t*=Oe;var n=pe(t);i1=n*pe(e),o1=n*fe(e),a1=fe(t),F2.point=RCe,Q7(i1,o1,a1)}function RCe(e,t){e*=Oe,t*=Oe;var n=pe(t),r=n*pe(e),i=n*fe(e),o=fe(t),a=_n(Bt((a=o1*o-a1*i)*a+(a=a1*r-i1*o)*a+(a=i1*i-o1*r)*a),i1*r+o1*i+a1*o);Ax+=a,kx+=a*(i1+(i1=r)),Tx+=a*(o1+(o1=i)),Ix+=a*(a1+(a1=o)),Q7(i1,o1,a1)}function JK(){F2.point=UN}function OCe(){F2.point=$Ce}function PCe(){nZ(eZ,tZ),F2.point=UN}function $Ce(e,t){eZ=e,tZ=t,e*=Oe,t*=Oe,F2.point=nZ;var n=pe(t);i1=n*pe(e),o1=n*fe(e),a1=fe(t),Q7(i1,o1,a1)}function nZ(e,t){e*=Oe,t*=Oe;var n=pe(t),r=n*pe(e),i=n*fe(e),o=fe(t),a=o1*o-a1*i,s=a1*r-i1*o,c=i1*i-o1*r,l=Sx(a,s,c),u=fn(l),f=l&&-u/l;PN.add(f*a),$N.add(f*s),BN.add(f*c),Ax+=u,kx+=u*(i1+(i1=r)),Tx+=u*(o1+(o1=i)),Ix+=u*(a1+(a1=o)),Q7(i1,o1,a1)}function jN(e){X7=Ax=Vx=Nx=_x=kx=Tx=Ix=0,PN=new gn,$N=new gn,BN=new gn,N1(e,F2);var t=+PN,n=+$N,r=+BN,i=Sx(t,n,r);return i<Xl&&(t=kx,n=Tx,r=Ix,Ax<he&&(t=Vx,n=Nx,r=_x),i=Sx(t,n,r),i<Xl)?[NaN,NaN]:[_n(n,t)*$t,fn(r/i)*$t]}function K7(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function qN(e,t){return Fe(e)>Ue&&(e-=Math.round(e/jn)*jn),[e,t]}qN.invert=qN;function GN(e,t,n){return(e%=jn)?t||n?K7(iZ(e),oZ(t,n)):iZ(e):t||n?oZ(t,n):qN}function rZ(e){return function(t,n){return t+=e,Fe(t)>Ue&&(t-=Math.round(t/jn)*jn),[t,n]}}function iZ(e){var t=rZ(e);return t.invert=rZ(-e),t}function oZ(e,t){var n=pe(e),r=fe(e),i=pe(t),o=fe(t);function a(s,c){var l=pe(c),u=pe(s)*l,f=fe(s)*l,d=fe(c),p=d*n+u*r;return[_n(f*i-p*o,u*n-d*r),fn(p*i+f*o)]}return a.invert=function(s,c){var l=pe(c),u=pe(s)*l,f=fe(s)*l,d=fe(c),p=d*i-f*o;return[_n(f*i+d*o,u*n+p*r),fn(p*n-u*r)]},a}function aZ(e){e=GN(e[0]*Oe,e[1]*Oe,e.length>2?e[2]*Oe:0);function t(n){return n=e(n[0]*Oe,n[1]*Oe),n[0]*=$t,n[1]*=$t,n}return t.invert=function(n){return n=e.invert(n[0]*Oe,n[1]*Oe),n[0]*=$t,n[1]*=$t,n},t}function cZ(e,t,n,r,i,o){if(n){var a=pe(t),s=fe(t),c=r*n;i==null?(i=t+r*jn,o=t-c/2):(i=sZ(a,i),o=sZ(a,o),(r>0?i<o:i>o)&&(i+=r*jn));for(var l,u=i;r>0?u>o:u<o;u-=c)l=Kl([a,-s*pe(u),-s*fe(u)]),e.point(l[0],l[1])}}function sZ(e,t){t=Xo(t),t[0]-=e,Zl(t);var n=Dx(-t[1]);return((-t[2]<0?-n:n)+jn-he)%jn}function Fx(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:dn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Ru(e,t){return Fe(e[0]-t[0])<he&&Fe(e[1]-t[1])<he}function Rx(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ox(e,t,n,r,i){var o=[],a=[],s,c;if(e.forEach(function(h){if(!((m=h.length-1)<=0)){var m,g=h[0],v=h[m],y;if(Ru(g,v)){if(!g[2]&&!v[2]){for(i.lineStart(),s=0;s<m;++s)i.point((g=h[s])[0],g[1]);i.lineEnd();return}v[0]+=2*he}o.push(y=new Rx(g,h,null,!0)),a.push(y.o=new Rx(g,null,y,!1)),o.push(y=new Rx(v,h,null,!1)),a.push(y.o=new Rx(v,null,y,!0))}}),!!o.length){for(a.sort(t),lZ(o),lZ(a),s=0,c=a.length;s<c;++s)a[s].e=n=!n;for(var l=o[0],u,f;;){for(var d=l,p=!0;d.v;)if((d=d.n)===l)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,c=u.length;s<c;++s)i.point((f=u[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(u=d.p.z,s=u.length-1;s>=0;--s)i.point((f=u[s])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,u=d.z,p=!p}while(!d.v);i.lineEnd()}}}function lZ(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function WN(e){return Fe(e[0])<=Ue?e[0]:zi(e[0])*((Fe(e[0])+Ue)%jn-Ue)}function uZ(e,t){var n=WN(t),r=t[1],i=fe(r),o=[fe(n),-pe(n),0],a=0,s=0,c=new gn;i===1?r=Pt+he:i===-1&&(r=-Pt-he);for(var l=0,u=e.length;l<u;++l)if(d=(f=e[l]).length)for(var f,d,p=f[d-1],h=WN(p),m=p[1]/2+Tu,g=fe(m),v=pe(m),y=0;y<d;++y,h=b,g=S,v=w,p=C){var C=f[y],b=WN(C),M=C[1]/2+Tu,S=fe(M),w=pe(M),E=b-h,D=E>=0?1:-1,z=D*E,H=z>Ue,j=g*S;if(c.add(_n(j*D*fe(z),v*w+j*pe(z))),a+=H?E+D*jn:E,H^h>=n^b>=n){var L=gc(Xo(p),Xo(C));Zl(L);var N=gc(o,L);Zl(N);var A=(H^E>=0?-1:1)*fn(N[2]);(r>A||r===A&&(L[0]||L[1]))&&(s+=H^E>=0?1:-1)}}return(a<-he||a<he&&c<-Xl)^s&1}function Px(e,t,n,r){return function(i){var o=t(i),a=Fx(),s=t(a),c=!1,l,u,f,d={point:p,lineStart:m,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=C,u=[],l=[]},polygonEnd:function(){d.point=p,d.lineStart=m,d.lineEnd=g,u=Q6(u);var b=uZ(l,r);u.length?(c||(i.polygonStart(),c=!0),Ox(u,UCe,b,n,i)):b&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),u=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(b,M){e(b,M)&&i.point(b,M)}function h(b,M){o.point(b,M)}function m(){d.point=h,o.lineStart()}function g(){d.point=p,o.lineEnd()}function v(b,M){f.push([b,M]),s.point(b,M)}function y(){s.lineStart(),f=[]}function C(){v(f[0][0],f[0][1]),s.lineEnd();var b=s.clean(),M=a.result(),S,w=M.length,E,D,z;if(f.pop(),l.push(f),f=null,!!w){if(b&1){if(D=M[0],(E=D.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),S=0;S<E;++S)i.point((z=D[S])[0],z[1]);i.lineEnd()}return}w>1&&b&2&&M.push(M.pop().concat(M.shift())),u.push(M.filter(BCe))}}return d}}function BCe(e){return e.length>1}function UCe(e,t){return((e=e.x)[0]<0?e[1]-Pt-he:Pt-e[1])-((t=t.x)[0]<0?t[1]-Pt-he:Pt-t[1])}var YN=Px(function(){return!0},jCe,GCe,[-Ue,-Pt]);function jCe(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var s=o>0?Ue:-Ue,c=Fe(o-t);Fe(c-Ue)<he?(e.point(t,n=(n+a)/2>0?Pt:-Pt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),i=0):r!==s&&c>=Ue&&(Fe(t-r)<he&&(t-=r*he),Fe(o-s)<he&&(o-=s*he),n=qCe(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=o,n=a),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function qCe(e,t,n,r){var i,o,a=fe(e-n);return Fe(a)>he?Yo((fe(t)*(o=pe(r))*fe(n)-fe(r)*(i=pe(t))*fe(e))/(i*o*a)):(t+r)/2}function GCe(e,t,n,r){var i;if(e==null)i=n*Pt,r.point(-Ue,i),r.point(0,i),r.point(Ue,i),r.point(Ue,0),r.point(Ue,-i),r.point(0,-i),r.point(-Ue,-i),r.point(-Ue,0),r.point(-Ue,i);else if(Fe(e[0]-t[0])>he){var o=e[0]<t[0]?Ue:-Ue;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function fZ(e){var t=pe(e),n=6*Oe,r=t>0,i=Fe(t)>he;function o(u,f,d,p){cZ(p,e,n,d,u,f)}function a(u,f){return pe(u)*pe(f)>t}function s(u){var f,d,p,h,m;return{lineStart:function(){h=p=!1,m=1},point:function(g,v){var y=[g,v],C,b=a(g,v),M=r?b?0:l(g,v):b?l(g+(g<0?Ue:-Ue),v):0;if(!f&&(h=p=b)&&u.lineStart(),b!==p&&(C=c(f,y),(!C||Ru(f,C)||Ru(y,C))&&(y[2]=1)),b!==p)m=0,b?(u.lineStart(),C=c(y,f),u.point(C[0],C[1])):(C=c(f,y),u.point(C[0],C[1],2),u.lineEnd()),f=C;else if(i&&f&&r^b){var S;!(M&d)&&(S=c(y,f,!0))&&(m=0,r?(u.lineStart(),u.point(S[0][0],S[0][1]),u.point(S[1][0],S[1][1]),u.lineEnd()):(u.point(S[1][0],S[1][1]),u.lineEnd(),u.lineStart(),u.point(S[0][0],S[0][1],3)))}b&&(!f||!Ru(f,y))&&u.point(y[0],y[1]),f=y,p=b,d=M},lineEnd:function(){p&&u.lineEnd(),f=null},clean:function(){return m|(h&&p)<<1}}}function c(u,f,d){var p=Xo(u),h=Xo(f),m=[1,0,0],g=gc(p,h),v=G7(g,g),y=g[0],C=v-y*y;if(!C)return!d&&u;var b=t*v/C,M=-t*y/C,S=gc(m,g),w=W7(m,b),E=W7(g,M);Lx(w,E);var D=S,z=G7(w,D),H=G7(D,D),j=z*z-H*(G7(w,w)-1);if(!(j<0)){var L=Bt(j),N=W7(D,(-z-L)/H);if(Lx(N,w),N=Kl(N),!d)return N;var A=u[0],T=f[0],G=u[1],X=f[1],J;T<A&&(J=A,A=T,T=J);var we=T-A,Se=Fe(we-Ue)<he,Ze=Se||we<he;if(!Se&&X<G&&(J=G,G=X,X=J),Ze?Se?G+X>0^N[1]<(Fe(N[0]-A)<he?G:X):G<=N[1]&&N[1]<=X:we>Ue^(A<=N[0]&&N[0]<=T)){var Et=W7(D,(-z+L)/H);return Lx(Et,w),[N,Kl(Et)]}}}function l(u,f){var d=r?e:Ue-e,p=0;return u<-d?p|=1:u>d&&(p|=2),f<-d?p|=4:f>d&&(p|=8),p}return Px(a,s,o,r?[0,-e]:[-Ue,e-Ue])}function dZ(e,t,n,r,i,o){var a=e[0],s=e[1],c=t[0],l=t[1],u=0,f=1,d=c-a,p=l-s,h;if(h=n-a,!(!d&&h>0)){if(h/=d,d<0){if(h<u)return;h<f&&(f=h)}else if(d>0){if(h>f)return;h>u&&(u=h)}if(h=i-a,!(!d&&h<0)){if(h/=d,d<0){if(h>f)return;h>u&&(u=h)}else if(d>0){if(h<u)return;h<f&&(f=h)}if(h=r-s,!(!p&&h>0)){if(h/=p,p<0){if(h<u)return;h<f&&(f=h)}else if(p>0){if(h>f)return;h>u&&(u=h)}if(h=o-s,!(!p&&h<0)){if(h/=p,p<0){if(h>f)return;h>u&&(u=h)}else if(p>0){if(h<u)return;h<f&&(f=h)}return u>0&&(e[0]=a+u*d,e[1]=s+u*p),f<1&&(t[0]=a+f*d,t[1]=s+f*p),!0}}}}}var Z7=1e9,$x=-Z7;function J7(e,t,n,r){function i(l,u){return e<=l&&l<=n&&t<=u&&u<=r}function o(l,u,f,d){var p=0,h=0;if(l==null||(p=a(l,f))!==(h=a(u,f))||c(l,u)<0^f>0)do d.point(p===0||p===3?e:n,p>1?r:t);while((p=(p+f+4)%4)!==h);else d.point(u[0],u[1])}function a(l,u){return Fe(l[0]-e)<he?u>0?0:3:Fe(l[0]-n)<he?u>0?2:1:Fe(l[1]-t)<he?u>0?1:0:u>0?3:2}function s(l,u){return c(l.x,u.x)}function c(l,u){var f=a(l,1),d=a(u,1);return f!==d?f-d:f===0?u[1]-l[1]:f===1?l[0]-u[0]:f===2?l[1]-u[1]:u[0]-l[0]}return function(l){var u=l,f=Fx(),d,p,h,m,g,v,y,C,b,M,S,w={point:E,lineStart:j,lineEnd:L,polygonStart:z,polygonEnd:H};function E(A,T){i(A,T)&&u.point(A,T)}function D(){for(var A=0,T=0,G=p.length;T<G;++T)for(var X=p[T],J=1,we=X.length,Se=X[0],Ze,Et,ut=Se[0],Jt=Se[1];J<we;++J)Ze=ut,Et=Jt,Se=X[J],ut=Se[0],Jt=Se[1],Et<=r?Jt>r&&(ut-Ze)*(r-Et)>(Jt-Et)*(e-Ze)&&++A:Jt<=r&&(ut-Ze)*(r-Et)<(Jt-Et)*(e-Ze)&&--A;return A}function z(){u=f,d=[],p=[],S=!0}function H(){var A=D(),T=S&&A,G=(d=Q6(d)).length;(T||G)&&(l.polygonStart(),T&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),G&&Ox(d,s,A,o,l),l.polygonEnd()),u=l,d=p=h=null}function j(){w.point=N,p&&p.push(h=[]),M=!0,b=!1,y=C=NaN}function L(){d&&(N(m,g),v&&b&&f.rejoin(),d.push(f.result())),w.point=E,b&&u.lineEnd()}function N(A,T){var G=i(A,T);if(p&&h.push([A,T]),M)m=A,g=T,v=G,M=!1,G&&(u.lineStart(),u.point(A,T));else if(G&&b)u.point(A,T);else{var X=[y=Math.max($x,Math.min(Z7,y)),C=Math.max($x,Math.min(Z7,C))],J=[A=Math.max($x,Math.min(Z7,A)),T=Math.max($x,Math.min(Z7,T))];dZ(X,J,e,t,n,r)?(b||(u.lineStart(),u.point(X[0],X[1])),u.point(J[0],J[1]),G||u.lineEnd(),S=!1):G&&(u.lineStart(),u.point(A,T),S=!1)}y=A,C=T,b=G}return w}}function pZ(e,t,n){var r=Un(e,t-he,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function hZ(e,t,n){var r=Un(e,t-he,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function Bx(){var e,t,n,r,i,o,a,s,c=10,l=c,u=90,f=360,d,p,h,m,g=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return Un(j7(r/u)*u,n,u).map(h).concat(Un(j7(s/f)*f,a,f).map(m)).concat(Un(j7(t/c)*c,e,c).filter(function(C){return Fe(C%u)>he}).map(d)).concat(Un(j7(o/l)*l,i,l).filter(function(C){return Fe(C%f)>he}).map(p))}return v.lines=function(){return y().map(function(C){return{type:"LineString",coordinates:C}})},v.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(m(a).slice(1),h(n).reverse().slice(1),m(s).reverse().slice(1))]}},v.extent=function(C){return arguments.length?v.extentMajor(C).extentMinor(C):v.extentMinor()},v.extentMajor=function(C){return arguments.length?(r=+C[0][0],n=+C[1][0],s=+C[0][1],a=+C[1][1],r>n&&(C=r,r=n,n=C),s>a&&(C=s,s=a,a=C),v.precision(g)):[[r,s],[n,a]]},v.extentMinor=function(C){return arguments.length?(t=+C[0][0],e=+C[1][0],o=+C[0][1],i=+C[1][1],t>e&&(C=t,t=e,e=C),o>i&&(C=o,o=i,i=C),v.precision(g)):[[t,o],[e,i]]},v.step=function(C){return arguments.length?v.stepMajor(C).stepMinor(C):v.stepMinor()},v.stepMajor=function(C){return arguments.length?(u=+C[0],f=+C[1],v):[u,f]},v.stepMinor=function(C){return arguments.length?(c=+C[0],l=+C[1],v):[c,l]},v.precision=function(C){return arguments.length?(g=+C,d=pZ(o,i,90),p=hZ(t,e,g),h=pZ(s,a,90),m=hZ(r,n,g),v):g},v.extentMajor([[-180,-90+he],[180,90-he]]).extentMinor([[-180,-80-he],[180,80+he]])}var i4=e=>e;var XN=new gn,QN=new gn,mZ,gZ,KN,ZN,o4={point:dn,lineStart:dn,lineEnd:dn,polygonStart:function(){o4.lineStart=WCe,o4.lineEnd=XCe},polygonEnd:function(){o4.lineStart=o4.lineEnd=o4.point=dn,XN.add(Fe(QN)),QN=new gn},result:function(){var e=XN/2;return XN=new gn,e}};function WCe(){o4.point=YCe}function YCe(e,t){o4.point=vZ,mZ=KN=e,gZ=ZN=t}function vZ(e,t){QN.add(ZN*e-KN*t),KN=e,ZN=t}function XCe(){vZ(mZ,gZ)}var JN=o4;var Ou=1/0,Ux=Ou,ep=-Ou,jx=ep,QCe={point:KCe,lineStart:dn,lineEnd:dn,polygonStart:dn,polygonEnd:dn,result:function(){var e=[[Ou,Ux],[ep,jx]];return ep=jx=-(Ux=Ou=1/0),e}};function KCe(e,t){e<Ou&&(Ou=e),e>ep&&(ep=e),t<Ux&&(Ux=t),t>jx&&(jx=t)}var Pu=QCe;var e_=0,t_=0,tp=0,qx=0,Gx=0,$u=0,n_=0,r_=0,np=0,CZ,bZ,es,ts,R2={point:e0,lineStart:yZ,lineEnd:xZ,polygonStart:function(){R2.lineStart=ebe,R2.lineEnd=tbe},polygonEnd:function(){R2.point=e0,R2.lineStart=yZ,R2.lineEnd=xZ},result:function(){var e=np?[n_/np,r_/np]:$u?[qx/$u,Gx/$u]:tp?[e_/tp,t_/tp]:[NaN,NaN];return e_=t_=tp=qx=Gx=$u=n_=r_=np=0,e}};function e0(e,t){e_+=e,t_+=t,++tp}function yZ(){R2.point=ZCe}function ZCe(e,t){R2.point=JCe,e0(es=e,ts=t)}function JCe(e,t){var n=e-es,r=t-ts,i=Bt(n*n+r*r);qx+=i*(es+e)/2,Gx+=i*(ts+t)/2,$u+=i,e0(es=e,ts=t)}function xZ(){R2.point=e0}function ebe(){R2.point=nbe}function tbe(){MZ(CZ,bZ)}function nbe(e,t){R2.point=MZ,e0(CZ=es=e,bZ=ts=t)}function MZ(e,t){var n=e-es,r=t-ts,i=Bt(n*n+r*r);qx+=i*(es+e)/2,Gx+=i*(ts+t)/2,$u+=i,i=ts*e-es*t,n_+=i*(es+e),r_+=i*(ts+t),np+=i*3,e0(es=e,ts=t)}var i_=R2;function Wx(e){this._context=e}Wx.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,jn);break}}},result:dn};var a_=new gn,o_,wZ,SZ,rp,ip,Yx={point:dn,lineStart:function(){Yx.point=rbe},lineEnd:function(){o_&&EZ(wZ,SZ),Yx.point=dn},polygonStart:function(){o_=!0},polygonEnd:function(){o_=null},result:function(){var e=+a_;return a_=new gn,e}};function rbe(e,t){Yx.point=EZ,wZ=rp=e,SZ=ip=t}function EZ(e,t){rp-=e,ip-=t,a_.add(Bt(rp*rp+ip*ip)),rp=e,ip=t}var s_=Yx;var DZ,Xx,zZ,HZ,op=class{constructor(t){this._append=t==null?LZ:ibe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==zZ||this._append!==Xx){let r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,zZ=r,Xx=this._append,HZ=this._,this._=i}this._+=HZ;break}}}result(){let t=this._;return this._="",t.length?t:null}};function LZ(e){let t=1;this._+=e[0];for(let n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ibe(e){let t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return LZ;if(t!==DZ){let n=10**t;DZ=t,Xx=function(i){let o=1;this._+=i[0];for(let a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return Xx}function Qx(e,t){let n=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),N1(s,i(o))),o.result()}return a.area=function(s){return N1(s,i(JN)),JN.result()},a.measure=function(s){return N1(s,i(s_)),s_.result()},a.bounds=function(s){return N1(s,i(Pu)),Pu.result()},a.centroid=function(s){return N1(s,i(i_)),i_.result()},a.projection=function(s){return arguments.length?(i=s==null?(e=null,i4):(e=s).stream,a):e},a.context=function(s){return arguments.length?(o=s==null?(t=null,new op(n)):new Wx(t=s),typeof r!="function"&&o.pointRadius(r),a):t},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{let c=Math.floor(s);if(!(c>=0))throw new RangeError(`invalid digits: ${s}`);n=c}return t===null&&(o=new op(n)),a},a.projection(e).digits(n).context(t)}function t0(e){return function(t){var n=new c_;for(var r in e)n[r]=e[r];return n.stream=t,n}}function c_(){}c_.prototype={constructor:c_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function l_(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),N1(n,e.stream(Pu)),t(Pu.result()),r!=null&&e.clipExtent(r),e}function n0(e,t,n){return l_(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,c=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,c])},n)}function Bu(e,t,n){return n0(e,[[0,0],t],n)}function Uu(e,t,n){return l_(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];e.scale(150*o).translate([a,s])},n)}function ju(e,t,n){return l_(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,s])},n)}var AZ=16,obe=pe(30*Oe);function u_(e,t){return+t?sbe(e,t):abe(e)}function abe(e){return t0({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function sbe(e,t){function n(r,i,o,a,s,c,l,u,f,d,p,h,m,g){var v=l-r,y=u-i,C=v*v+y*y;if(C>4*t&&m--){var b=a+d,M=s+p,S=c+h,w=Bt(b*b+M*M+S*S),E=fn(S/=w),D=Fe(Fe(S)-1)<he||Fe(o-f)<he?(o+f)/2:_n(M,b),z=e(D,E),H=z[0],j=z[1],L=H-r,N=j-i,A=y*L-v*N;(A*A/C>t||Fe((v*L+y*N)/C-.5)>.3||a*d+s*p+c*h<obe)&&(n(r,i,o,a,s,c,H,j,D,b/=w,M/=w,S,m,g),g.point(H,j),n(H,j,D,b,M,S,l,u,f,d,p,h,m,g))}}return function(r){var i,o,a,s,c,l,u,f,d,p,h,m,g={point:v,lineStart:y,lineEnd:b,polygonStart:function(){r.polygonStart(),g.lineStart=M},polygonEnd:function(){r.polygonEnd(),g.lineStart=y}};function v(E,D){E=e(E,D),r.point(E[0],E[1])}function y(){f=NaN,g.point=C,r.lineStart()}function C(E,D){var z=Xo([E,D]),H=e(E,D);n(f,d,u,p,h,m,f=H[0],d=H[1],u=E,p=z[0],h=z[1],m=z[2],AZ,r),r.point(f,d)}function b(){g.point=v,r.lineEnd()}function M(){y(),g.point=S,g.lineEnd=w}function S(E,D){C(i=E,D),o=f,a=d,s=p,c=h,l=m,g.point=C}function w(){n(f,d,u,p,h,m,o,a,i,s,c,l,AZ,r),g.lineEnd=b,b()}return g}}var cbe=t0({point:function(e,t){this.stream.point(e*Oe,t*Oe)}});function lbe(e){return t0({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function ube(e,t,n,r,i){function o(a,s){return a*=r,s*=i,[t+e*a,n-e*s]}return o.invert=function(a,s){return[(a-t)/e*r,(n-s)/e*i]},o}function VZ(e,t,n,r,i,o){if(!o)return ube(e,t,n,r,i);var a=pe(o),s=fe(o),c=a*e,l=s*e,u=a/e,f=s/e,d=(s*n-a*t)/e,p=(s*t+a*n)/e;function h(m,g){return m*=r,g*=i,[c*m-l*g+t,n-l*m-c*g]}return h.invert=function(m,g){return[r*(u*m-f*g+d),i*(p-f*m-u*g)]},h}function Tn(e){return Kx(function(){return e})()}function Kx(e){var t,n=150,r=480,i=250,o=0,a=0,s=0,c=0,l=0,u,f=0,d=1,p=1,h=null,m=YN,g=null,v,y,C,b=i4,M=.5,S,w,E,D,z;function H(A){return E(A[0]*Oe,A[1]*Oe)}function j(A){return A=E.invert(A[0],A[1]),A&&[A[0]*$t,A[1]*$t]}H.stream=function(A){return D&&z===A?D:D=cbe(lbe(u)(m(S(b(z=A)))))},H.preclip=function(A){return arguments.length?(m=A,h=void 0,N()):m},H.postclip=function(A){return arguments.length?(b=A,g=v=y=C=null,N()):b},H.clipAngle=function(A){return arguments.length?(m=+A?fZ(h=A*Oe):(h=null,YN),N()):h*$t},H.clipExtent=function(A){return arguments.length?(b=A==null?(g=v=y=C=null,i4):J7(g=+A[0][0],v=+A[0][1],y=+A[1][0],C=+A[1][1]),N()):g==null?null:[[g,v],[y,C]]},H.scale=function(A){return arguments.length?(n=+A,L()):n},H.translate=function(A){return arguments.length?(r=+A[0],i=+A[1],L()):[r,i]},H.center=function(A){return arguments.length?(o=A[0]%360*Oe,a=A[1]%360*Oe,L()):[o*$t,a*$t]},H.rotate=function(A){return arguments.length?(s=A[0]%360*Oe,c=A[1]%360*Oe,l=A.length>2?A[2]%360*Oe:0,L()):[s*$t,c*$t,l*$t]},H.angle=function(A){return arguments.length?(f=A%360*Oe,L()):f*$t},H.reflectX=function(A){return arguments.length?(d=A?-1:1,L()):d<0},H.reflectY=function(A){return arguments.length?(p=A?-1:1,L()):p<0},H.precision=function(A){return arguments.length?(S=u_(w,M=A*A),N()):Bt(M)},H.fitExtent=function(A,T){return n0(H,A,T)},H.fitSize=function(A,T){return Bu(H,A,T)},H.fitWidth=function(A,T){return Uu(H,A,T)},H.fitHeight=function(A,T){return ju(H,A,T)};function L(){var A=VZ(n,0,0,d,p,f).apply(null,t(o,a)),T=VZ(n,r-A[0],i-A[1],d,p,f);return u=GN(s,c,l),w=K7(t,T),E=K7(u,w),S=u_(w,M),N()}function N(){return D=z=null,H}return function(){return t=e.apply(this,arguments),H.invert=t.invert&&j,L()}}function qu(e){var t=0,n=Ue/3,r=Kx(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Oe,n=o[1]*Oe):[t*$t,n*$t]},i}function NZ(e){var t=pe(e);function n(r,i){return[r*t,fe(i)/t]}return n.invert=function(r,i){return[r/t,fn(i*t)]},n}function _Z(e,t){var n=fe(e),r=(n+fe(t))/2;if(Fe(r)<he)return NZ(e);var i=1+n*(2*r-n),o=Bt(i)/r;function a(s,c){var l=Bt(i-2*r*fe(c))/r;return[l*fe(s*=r),o-l*pe(s)]}return a.invert=function(s,c){var l=o-c,u=_n(s,Fe(l))*zi(l);return l*r<0&&(u-=Ue*zi(s)*zi(l)),[u/r,fn((i-(s*s+l*l)*r*r)/(2*r))]},a}function a4(){return qu(_Z).scale(155.424).center([0,33.6442])}function ap(){return a4().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function fbe(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function f_(){var e,t,n=ap(),r,i=a4().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=a4().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,c,l={point:function(d,p){c=[d,p]}};function u(d){var p=d[0],h=d[1];return c=null,r.point(p,h),c||(o.point(p,h),c)||(s.point(p,h),c)}u.invert=function(d){var p=n.scale(),h=n.translate(),m=(d[0]-h[0])/p,g=(d[1]-h[1])/p;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(d)},u.stream=function(d){return e&&t===d?e:e=fbe([n.stream(t=d),i.stream(d),a.stream(d)])},u.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),a.precision(d),f()):n.precision()},u.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),a.scale(d),u.translate(n.translate())):n.scale()},u.translate=function(d){if(!arguments.length)return n.translate();var p=n.scale(),h=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[h-.455*p,m-.238*p],[h+.455*p,m+.238*p]]).stream(l),o=i.translate([h-.307*p,m+.201*p]).clipExtent([[h-.425*p+he,m+.12*p+he],[h-.214*p-he,m+.234*p-he]]).stream(l),s=a.translate([h-.205*p,m+.212*p]).clipExtent([[h-.214*p+he,m+.166*p+he],[h-.115*p-he,m+.234*p-he]]).stream(l),f()},u.fitExtent=function(d,p){return n0(u,d,p)},u.fitSize=function(d,p){return Bu(u,d,p)},u.fitWidth=function(d,p){return Uu(u,d,p)},u.fitHeight=function(d,p){return ju(u,d,p)};function f(){return e=t=null,u}return u.scale(1070)}function Zx(e){return function(t,n){var r=pe(t),i=pe(n),o=e(r*i);return o===1/0?[2,0]:[o*i*fe(t),o*fe(n)]}}function ns(e){return function(t,n){var r=Bt(t*t+n*n),i=e(r),o=fe(i),a=pe(i);return[_n(t*o,r*a),fn(r&&n*o/r)]}}var d_=Zx(function(e){return Bt(2/(1+e))});d_.invert=ns(function(e){return 2*fn(e/2)});function p_(){return Tn(d_).scale(124.75).clipAngle(180-.001)}var h_=Zx(function(e){return(e=Dx(e))&&e/fe(e)});h_.invert=ns(function(e){return e});function m_(){return Tn(h_).scale(79.4188).clipAngle(180-.001)}function Gu(e,t){return[e,Ql(Iu((Pt+t)/2))]}Gu.invert=function(e,t){return[e,2*Yo(wx(t))-Pt]};function g_(){return v_(Gu).scale(961/jn)}function v_(e){var t=Tn(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,s,c,l;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?a=s=c=l=null:(a=+f[0][0],s=+f[0][1],c=+f[1][0],l=+f[1][1]),u()):a==null?null:[[a,s],[c,l]]};function u(){var f=Ue*r(),d=t(aZ(t.rotate()).invert([0,0]));return o(a==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===Gu?[[Math.max(d[0]-f,a),s],[Math.min(d[0]+f,c),l]]:[[a,Math.max(d[1]-f,s)],[c,Math.min(d[1]+f,l)]])}return u()}function Jx(e){return Iu((Pt+e)/2)}function kZ(e,t){var n=pe(e),r=e===t?fe(e):Ql(n/pe(t))/Ql(Jx(t)/Jx(e)),i=n*Ex(Jx(e),r)/r;if(!r)return Gu;function o(a,s){i>0?s<-Pt+he&&(s=-Pt+he):s>Pt-he&&(s=Pt-he);var c=i/Ex(Jx(s),r);return[c*fe(r*a),i-c*pe(r*a)]}return o.invert=function(a,s){var c=i-s,l=zi(r)*Bt(a*a+c*c),u=_n(a,Fe(c))*zi(c);return c*r<0&&(u-=Ue*zi(a)*zi(c)),[u/r,2*Yo(Ex(i/l,1/r))-Pt]},o}function y_(){return qu(kZ).scale(109.5).parallels([30,30])}function Wu(e,t){return[e,t]}Wu.invert=Wu;function x_(){return Tn(Wu).scale(152.63)}function TZ(e,t){var n=pe(e),r=e===t?fe(e):(n-pe(t))/(t-e),i=n/r+e;if(Fe(r)<he)return Wu;function o(a,s){var c=i-s,l=r*a;return[c*fe(l),i-c*pe(l)]}return o.invert=function(a,s){var c=i-s,l=_n(a,Fe(c))*zi(c);return c*r<0&&(l-=Ue*zi(a)*zi(c)),[l/r,i-zi(r)*Bt(a*a+c*c)]},o}function C_(){return qu(TZ).scale(131.154).center([0,13.9389])}var sp=1.340264,cp=-.081106,lp=893e-6,up=.003796,eC=Bt(3)/2,dbe=12;function b_(e,t){var n=fn(eC*fe(t)),r=n*n,i=r*r*r;return[e*pe(n)/(eC*(sp+3*cp*r+i*(7*lp+9*up*r))),n*(sp+cp*r+i*(lp+up*r))]}b_.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,s,c;o<dbe&&(s=n*(sp+cp*r+i*(lp+up*r))-t,c=sp+3*cp*r+i*(7*lp+9*up*r),n-=a=s/c,r=n*n,i=r*r*r,!(Fe(a)<Xl));++o);return[eC*e*(sp+3*cp*r+i*(7*lp+9*up*r))/pe(n),fn(fe(n)/eC)]};function M_(){return Tn(b_).scale(177.158)}function w_(e,t){var n=pe(t),r=pe(e)*n;return[n*fe(e)/r,fe(t)/r]}w_.invert=ns(Yo);function S_(){return Tn(w_).scale(144.049).clipAngle(60)}function E_(){var e=1,t=0,n=0,r=1,i=1,o=0,a,s,c=null,l,u,f,d=1,p=1,h=t0({point:function(b,M){var S=C([b,M]);this.stream.point(S[0],S[1])}}),m=i4,g,v;function y(){return d=e*r,p=e*i,g=v=null,C}function C(b){var M=b[0]*d,S=b[1]*p;if(o){var w=S*a-M*s;M=M*a+S*s,S=w}return[M+t,S+n]}return C.invert=function(b){var M=b[0]-t,S=b[1]-n;if(o){var w=S*a+M*s;M=M*a-S*s,S=w}return[M/d,S/p]},C.stream=function(b){return g&&v===b?g:g=h(m(v=b))},C.postclip=function(b){return arguments.length?(m=b,c=l=u=f=null,y()):m},C.clipExtent=function(b){return arguments.length?(m=b==null?(c=l=u=f=null,i4):J7(c=+b[0][0],l=+b[0][1],u=+b[1][0],f=+b[1][1]),y()):c==null?null:[[c,l],[u,f]]},C.scale=function(b){return arguments.length?(e=+b,y()):e},C.translate=function(b){return arguments.length?(t=+b[0],n=+b[1],y()):[t,n]},C.angle=function(b){return arguments.length?(o=b%360*Oe,s=fe(o),a=pe(o),y()):o*$t},C.reflectX=function(b){return arguments.length?(r=b?-1:1,y()):r<0},C.reflectY=function(b){return arguments.length?(i=b?-1:1,y()):i<0},C.fitExtent=function(b,M){return n0(C,b,M)},C.fitSize=function(b,M){return Bu(C,b,M)},C.fitWidth=function(b,M){return Uu(C,b,M)},C.fitHeight=function(b,M){return ju(C,b,M)},C}function D_(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}D_.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,a=o*o;n-=i=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(Fe(i)>he&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function z_(){return Tn(D_).scale(175.295)}function H_(e,t){return[pe(t)*fe(e),fe(t)]}H_.invert=ns(fn);function L_(){return Tn(H_).scale(249.5).clipAngle(90+he)}function A_(e,t){var n=pe(t),r=1+pe(e)*n;return[n*fe(e)/r,fe(t)/r]}A_.invert=ns(function(e){return 2*Yo(e)});function V_(){return Tn(A_).scale(250).clipAngle(142)}function N_(e,t){return[Ql(Iu((Pt+t)/2)),-e]}N_.invert=function(e,t){return[-t,2*Yo(wx(e))-Pt]};function __(){var e=v_(N_),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var IZ=Math.abs;var nC=Math.cos;var fp=Math.sin;var FZ=1e-6;var s4=Math.PI,tC=s4/2,fat=s4/4;var k_=RZ(2),dat=RZ(s4),pat=s4*2,hat=180/s4,mat=s4/180;function T_(e){return e>1?tC:e<-1?-tC:Math.asin(e)}function RZ(e){return e>0?Math.sqrt(e):0}function pbe(e,t){var n=e*fp(t),r=30,i;do t-=i=(t+fp(t)-n)/(1+nC(t));while(IZ(i)>FZ&&--r>0);return t/2}function hbe(e,t,n){function r(i,o){return[e*i*nC(o=pbe(n,o)),t*fp(o)]}return r.invert=function(i,o){return o=T_(o/t),[i/(e*nC(o)),T_((2*o+fp(2*o))/n)]},r}var OZ=hbe(k_/tC,k_,s4);function I_(){return Tn(OZ).scale(169.529)}var mbe=Qx(),iC=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function gbe(e,t){return function n(){let r=t();return r.type=e,r.path=Qx().projection(r),r.copy=r.copy||function(){let i=n();return iC.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},dV(r)}}function dp(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(rC[e]=gbe(e,t),this):rC[e]||null}function F_(e){return e&&e.path||mbe}var rC={albers:ap,albersusa:f_,azimuthalequalarea:p_,azimuthalequidistant:m_,conicconformal:y_,conicequalarea:a4,conicequidistant:C_,equalEarth:M_,equirectangular:x_,gnomonic:S_,identity:E_,mercator:g_,mollweide:I_,naturalEarth1:z_,orthographic:L_,stereographic:V_,transversemercator:__};for(let e in rC)dp(e,rC[e]);function vbe(){}var xc=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function BZ(){var e=1,t=1,n=s;function r(c,l){return l.map(u=>i(c,u))}function i(c,l){var u=[],f=[];return o(c,l,d=>{n(d,c,l),ybe(d)>0?u.push([d]):f.push(d)}),f.forEach(d=>{for(var p=0,h=u.length,m;p<h;++p)if(xbe((m=u[p])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:u}}function o(c,l,u){var f=new Array,d=new Array,p,h,m,g,v,y;for(p=h=-1,g=c[0]>=l,xc[g<<1].forEach(C);++p<e-1;)m=g,g=c[p+1]>=l,xc[m|g<<1].forEach(C);for(xc[g<<0].forEach(C);++h<t-1;){for(p=-1,g=c[h*e+e]>=l,v=c[h*e]>=l,xc[g<<1|v<<2].forEach(C);++p<e-1;)m=g,g=c[h*e+e+p+1]>=l,y=v,v=c[h*e+p+1]>=l,xc[m|g<<1|v<<2|y<<3].forEach(C);xc[g|v<<3].forEach(C)}for(p=-1,v=c[h*e]>=l,xc[v<<2].forEach(C);++p<e-1;)y=v,v=c[h*e+p+1]>=l,xc[v<<2|y<<3].forEach(C);xc[v<<3].forEach(C);function C(b){var M=[b[0][0]+p,b[0][1]+h],S=[b[1][0]+p,b[1][1]+h],w=a(M),E=a(S),D,z;(D=d[w])?(z=f[E])?(delete d[D.end],delete f[z.start],D===z?(D.ring.push(S),u(D.ring)):f[D.start]=d[z.end]={start:D.start,end:z.end,ring:D.ring.concat(z.ring)}):(delete d[D.end],D.ring.push(S),d[D.end=E]=D):(D=f[E])?(z=d[w])?(delete f[D.start],delete d[z.end],D===z?(D.ring.push(S),u(D.ring)):f[z.start]=d[D.end]={start:z.start,end:D.end,ring:z.ring.concat(D.ring)}):(delete f[D.start],D.ring.unshift(M),f[D.start=w]=D):f[w]=d[E]={start:w,end:E,ring:[M,S]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function s(c,l,u){c.forEach(f=>{var d=f[0],p=f[1],h=d|0,m=p|0,g,v=l[m*e+h];d>0&&d<e&&h===d&&(g=l[m*e+h-1],f[0]=d+(u-g)/(v-g)-.5),p>0&&p<t&&m===p&&(g=l[(m-1)*e+h],f[1]=p+(u-g)/(v-g)-.5)})}return r.contour=i,r.size=function(c){if(!arguments.length)return[e,t];var l=Math.floor(c[0]),u=Math.floor(c[1]);return l>=0&&u>=0||B("invalid size"),e=l,t=u,r},r.smooth=function(c){return arguments.length?(n=c?s:vbe,r):n===s},r}function ybe(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function xbe(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Cbe(e,t[n]))return i;return 0}function Cbe(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var c=e[o],l=c[0],u=c[1],f=e[s],d=f[0],p=f[1];if(bbe(c,f,t))return 0;u>r!=p>r&&n<(d-l)*(r-u)/(p-u)+l&&(i=-i)}return i}function bbe(e,t,n){var r;return Mbe(e,t,n)&&wbe(e[r=+(e[0]===t[0])],n[r],t[r])}function Mbe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function wbe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function UZ(e,t,n){return function(r){var i=Yi(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,c=t?Xi(o,a,e):s/(e+1);return Un(o+c,a,c)}}function P_(e){$.call(this,null,e)}P_.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ee(P_,$,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Vn,o=BZ().smooth(e.smooth!==!1),a=e.thresholds||Sbe(r,i,e),s=e.as===null?null:e.as||"contour",c=[];return r.forEach(l=>{let u=i(l),f=o.size([u.width,u.height])(u.values,F(a)?a:a(u.values));Ebe(f,u,l,e),f.forEach(d=>{c.push(Sl(l,lt(s!=null?{[s]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function Sbe(e,t,n){let r=UZ(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Fo(t(i).values)))}function Ebe(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Ie(i)&&(i=i(n,r)),Ie(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;let a=(Pe(i)?i:i[0])||1,s=(Pe(i)?i:i[1])||1,c=o&&o[0]||0,l=o&&o[1]||0;e.forEach(jZ(t,a,s,c,l))}function jZ(e,t,n,r,i){let o=e.x1||0,a=e.y1||0,s=t*n<0;function c(f){f.forEach(l)}function l(f){s&&f.reverse(),f.forEach(u)}function u(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-a)*n+i}return function(f){return f.coordinates.forEach(c),f}}function PZ(e,t,n){let r=e>=0?e:Vv(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function R_(e){return Ie(e)?e:mn(+e)}function qZ(){var e=c=>c[0],t=c=>c[1],n=Ia,r=[-1,-1],i=960,o=500,a=2;function s(c,l){let u=PZ(r[0],c,e)>>a,f=PZ(r[1],c,t)>>a,d=u?u+2:0,p=f?f+2:0,h=2*d+(i>>a),m=2*p+(o>>a),g=new Float32Array(h*m),v=new Float32Array(h*m),y=g;c.forEach(b=>{let M=d+(+e(b)>>a),S=p+(+t(b)>>a);M>=0&&M<h&&S>=0&&S<m&&(g[M+S*h]+=+n(b))}),u>0&&f>0?(Yu(h,m,g,v,u),Xu(h,m,v,g,f),Yu(h,m,g,v,u),Xu(h,m,v,g,f),Yu(h,m,g,v,u),Xu(h,m,v,g,f)):u>0?(Yu(h,m,g,v,u),Yu(h,m,v,g,u),Yu(h,m,g,v,u),y=v):f>0&&(Xu(h,m,g,v,f),Xu(h,m,v,g,f),Xu(h,m,g,v,f),y=v);let C=l?Math.pow(2,-2*a):1/K6(y);for(let b=0,M=h*m;b<M;++b)y[b]*=C;return{values:y,scale:1<<a,width:h,height:m,x1:d,y1:p,x2:d+(i>>a),y2:p+(o>>a)}}return s.x=function(c){return arguments.length?(e=R_(c),s):e},s.y=function(c){return arguments.length?(t=R_(c),s):t},s.weight=function(c){return arguments.length?(n=R_(c),s):n},s.size=function(c){if(!arguments.length)return[i,o];var l=+c[0],u=+c[1];return l>=0&&u>=0||B("invalid size"),i=l,o=u,s},s.cellSize=function(c){return arguments.length?((c=+c)>=1||B("invalid cell size"),a=Math.floor(Math.log(c)/Math.LN2),s):1<<a},s.bandwidth=function(c){return arguments.length?(c=te(c),c.length===1&&(c=[+c[0],+c[0]]),c.length!==2&&B("invalid bandwidth"),r=c,s):r},s}function Yu(e,t,n,r,i){let o=(i<<1)+1;for(let a=0;a<t;++a)for(let s=0,c=0;s<e+i;++s)s<e&&(c+=n[s+a*e]),s>=i&&(s>=o&&(c-=n[s-o+a*e]),r[s-i+a*e]=c/Math.min(s+1,e-1+o-s,o))}function Xu(e,t,n,r,i){let o=(i<<1)+1;for(let a=0;a<e;++a)for(let s=0,c=0;s<t+i;++s)s<t&&(c+=n[a+s*e]),s>=i&&(s>=o&&(c-=n[a+(s-o)*e]),r[a+(s-i)*e]=c/Math.min(s+1,t-1+o-s,o))}function $_(e){$.call(this,null,e)}$_.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var Dbe=["x","y","weight","size","cellSize","bandwidth"];function GZ(e,t){return Dbe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ee($_,$,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=zbe(r,e.groupby),o=(e.groupby||[]).map(un),a=GZ(qZ(),e),s=e.as||"grid",c=[];function l(u,f){for(let d=0;d<o.length;++d)u[o[d]]=f[d];return u}return c=i.map(u=>lt(l({[s]:a(u,e.counts)},u.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function zbe(e,t){var n=[],r=u=>u(s),i,o,a,s,c,l;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],c=t.map(r),l=i[c],l||(i[c]=l=[],l.dims=c,n.push(l)),l.push(s);return n}function B_(e){$.call(this,null,e)}B_.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ee(B_,$,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=BZ().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||UZ(e.count||10,e.nice,!!i),a=e.size,s,c;return i||(i=t.materialize(t.SOURCE).source,s=GZ(qZ(),e)(i,!0),c=jZ(s,s.scale||1,s.scale||1,0,0),a=[s.width,s.height],i=s.values),o=F(o)?o:o(i),i=r.size(a)(i,o),c&&i.forEach(c),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(lt),n}});var O_="Feature",U_="FeatureCollection",Hbe="MultiPoint";function j_(e){$.call(this,null,e)}j_.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ee(j_,$,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],a=i&&i[1],s=e.geojson||!i&&Vn,c=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(fr(s))||o&&t.modified(fr(o))||a&&t.modified(fr(a)),(!this.value||l)&&(c=t.SOURCE,this._features=n=[],this._points=r=[]),s&&t.visit(c,u=>n.push(s(u))),o&&a&&(t.visit(c,u=>{var f=o(u),d=a(u);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:O_,geometry:{type:Hbe,coordinates:r}})),this.value={type:U_,features:n}}});function q_(e){$.call(this,null,e)}q_.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ee(q_,$,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Vn,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=F_(e.projection),n.materialize().reflow()):a=i===Vn||t.modified(i.fields)?n.ADD_MOD:n.ADD;let s=Lbe(r,e.pointRadius);return n.visit(a,c=>c[o]=r(i(c))),r.pointRadius(s),n.modifies(o)}});function Lbe(e,t){let n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function G_(e){$.call(this,null,e)}G_.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ee(G_,$,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],a=o[0],s=o[1],c;function l(u){let f=n([r(u),i(u)]);f?(u[a]=f[0],u[s]=f[1]):(u[a]=void 0,u[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(c=t.modified(r.fields)||t.modified(i.fields),t.visit(c?t.ADD_MOD:t.ADD,l)),t.modifies(o)}});function W_(e){$.call(this,null,e)}W_.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ee(W_,$,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=Abe(F_(e.projection),e.field||wr("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,a=>a[i]=r),n.modifies(i)}});function Abe(e,t,n){let r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),a=e.pointRadius(n)(t(i));return e.pointRadius(o),a};return r.context=i=>(e.context(i),r),r}function Y_(e){$.call(this,[],e),this.generator=Bx()}Y_.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ee(Y_,$,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(let o in e)Ie(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(Dv(n[0],i)):t.add.push(lt(i)),n[0]=i,t}});function X_(e){$.call(this,null,e)}X_.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ee(X_,$,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Vn,o=Nbe(e.opacity,e),a=Vbe(e.color,e),s=e.as||"image",c={$x:0,$y:0,$value:0,$max:r?Fo(n.map(l=>Fo(i(l).values))):0};return n.forEach(l=>{let u=i(l),f=ke({},l,c);r||(f.$max=Fo(u.values||[])),l[s]=_be(u,f,a.dep?a:mn(a(f)),o.dep?o:mn(o(f)))}),t.reflow(!0).modifies(s)}});function Vbe(e,t){let n;return Ie(e)?(n=r=>jo(e(r,t)),n.dep=WZ(e)):n=mn(jo(e||"#888")),n}function Nbe(e,t){let n;return Ie(e)?(n=r=>e(r,t),n.dep=WZ(e)):e?n=mn(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function WZ(e){if(!Ie(e))return!1;let t=pr(fr(e));return t.$x||t.$y||t.$value||t.$max}function _be(e,t,n,r){let i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,c=e.x2||i,l=e.y2||o,u=e.values,f=u?g=>u[g]:S2,d=Uo(c-a,l-s),p=d.getContext("2d"),h=p.getImageData(0,0,c-a,l-s),m=h.data;for(let g=s,v=0;g<l;++g){t.$y=g-s;for(let y=a,C=g*i;y<c;++y,v+=4){t.$x=y-a,t.$value=f(y+C);let b=n(t);m[v+0]=b.r,m[v+1]=b.g,m[v+2]=b.b,m[v+3]=~~(255*r(t))}}return p.putImageData(h,0,0),d}function YZ(e){$.call(this,null,e),this.modified(!0)}ee(YZ,$,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Tbe(e.type),iC.forEach(r=>{e[r]!=null&&$Z(n,r,e[r])})):iC.forEach(r=>{e.modified(r)&&$Z(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&kbe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function kbe(e,t){let n=Ibe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Tbe(e){let t=dp((e||"mercator").toLowerCase());return t||B("Unrecognized projection type: "+e),t()}function $Z(e,t,n){Ie(e[t])&&e[t](n)}function Ibe(e){return e=te(e),e.length===1?e[0]:{type:U_,features:e.reduce((t,n)=>t.concat(Fbe(n)),[])}}function Fbe(e){return e.type===U_?e.features:te(e).filter(t=>t!=null).map(t=>t.type===O_?t:{type:O_,geometry:t})}var uk={};Cr(uk,{force:()=>lk});function K_(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,a=n.length,s,c=0,l=0;for(o=0;o<a;++o)s=n[o],c+=s.x,l+=s.y;for(c=(c/a-e)*r,l=(l/a-t)*r,o=0;o<a;++o)s=n[o],s.x-=c,s.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function XZ(e){let t=+this._x.call(null,e),n=+this._y.call(null,e);return QZ(this.cover(t,n),t,n,e)}function QZ(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,a={data:r},s=e._x0,c=e._y0,l=e._x1,u=e._y1,f,d,p,h,m,g,v,y;if(!o)return e._root=a,e;for(;o.length;)if((m=t>=(f=(s+l)/2))?s=f:l=f,(g=n>=(d=(c+u)/2))?c=d:u=d,i=o,!(o=o[v=g<<1|m]))return i[v]=a,e;if(p=+e._x.call(null,o.data),h=+e._y.call(null,o.data),t===p&&n===h)return a.next=o,i?i[v]=a:e._root=a,e;do i=i?i[v]=new Array(4):e._root=new Array(4),(m=t>=(f=(s+l)/2))?s=f:l=f,(g=n>=(d=(c+u)/2))?c=d:u=d;while((v=g<<1|m)===(y=(h>=d)<<1|p>=f));return i[y]=o,i[v]=a,e}function KZ(e){var t,n,r=e.length,i,o,a=new Array(r),s=new Array(r),c=1/0,l=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=i,s[n]=o,i<c&&(c=i),i>u&&(u=i),o<l&&(l=o),o>f&&(f=o));if(c>u||l>f)return this;for(this.cover(c,l).cover(u,f),n=0;n<r;++n)QZ(this,a[n],s[n],e[n]);return this}function ZZ(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a=i-n||1,s=this._root,c,l;n>e||e>=i||r>t||t>=o;)switch(l=(t<r)<<1|e<n,c=new Array(4),c[l]=s,s=c,a*=2,l){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function JZ(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function eJ(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function zr(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function tJ(e,t,n){var r,i=this._x0,o=this._y0,a,s,c,l,u=this._x1,f=this._y1,d=[],p=this._root,h,m;for(p&&d.push(new zr(p,i,o,u,f)),n==null?n=1/0:(i=e-n,o=t-n,u=e+n,f=t+n,n*=n);h=d.pop();)if(!(!(p=h.node)||(a=h.x0)>u||(s=h.y0)>f||(c=h.x1)<i||(l=h.y1)<o))if(p.length){var g=(a+c)/2,v=(s+l)/2;d.push(new zr(p[3],g,v,c,l),new zr(p[2],a,v,g,l),new zr(p[1],g,s,c,v),new zr(p[0],a,s,g,v)),(m=(t>=v)<<1|e>=g)&&(h=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=h)}else{var y=e-+this._x.call(null,p.data),C=t-+this._y.call(null,p.data),b=y*y+C*C;if(b<n){var M=Math.sqrt(n=b);i=e-M,o=t-M,u=e+M,f=t+M,r=p.data}}return r}function nJ(e){if(isNaN(u=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,a=this._x0,s=this._y0,c=this._x1,l=this._y1,u,f,d,p,h,m,g,v;if(!n)return this;if(n.length)for(;;){if((h=u>=(d=(a+c)/2))?a=d:c=d,(m=f>=(p=(s+l)/2))?s=p:l=p,t=n,!(n=n[g=m<<1|h]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,v=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[g]=o:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=o,this)}function rJ(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function iJ(){return this._root}function oJ(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function aJ(e){var t=[],n,r=this._root,i,o,a,s,c;for(r&&t.push(new zr(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,a=n.y0,s=n.x1,c=n.y1)&&r.length){var l=(o+s)/2,u=(a+c)/2;(i=r[3])&&t.push(new zr(i,l,u,s,c)),(i=r[2])&&t.push(new zr(i,o,u,l,c)),(i=r[1])&&t.push(new zr(i,l,a,s,u)),(i=r[0])&&t.push(new zr(i,o,a,l,u))}return this}function sJ(e){var t=[],n=[],r;for(this._root&&t.push(new zr(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,c=r.x1,l=r.y1,u=(a+c)/2,f=(s+l)/2;(o=i[0])&&t.push(new zr(o,a,s,u,f)),(o=i[1])&&t.push(new zr(o,u,s,c,f)),(o=i[2])&&t.push(new zr(o,a,f,u,l)),(o=i[3])&&t.push(new zr(o,u,f,c,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function cJ(e){return e[0]}function lJ(e){return arguments.length?(this._x=e,this):this._x}function uJ(e){return e[1]}function fJ(e){return arguments.length?(this._y=e,this):this._y}function r0(e,t,n){var r=new Z_(t??cJ,n??uJ,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Z_(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function dJ(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var s1=r0.prototype=Z_.prototype;s1.copy=function(){var e=new Z_(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=dJ(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=dJ(r));return e};s1.add=XZ;s1.addAll=KZ;s1.cover=ZZ;s1.data=JZ;s1.extent=eJ;s1.find=tJ;s1.remove=nJ;s1.removeAll=rJ;s1.root=iJ;s1.size=oJ;s1.visit=aJ;s1.visitAfter=sJ;s1.x=lJ;s1.y=fJ;function tr(e){return function(){return e}}function O2(e){return(e()-.5)*1e-6}function Rbe(e){return e.x+e.vx}function Obe(e){return e.y+e.vy}function J_(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=tr(e==null?1:+e));function a(){for(var l,u=t.length,f,d,p,h,m,g,v=0;v<o;++v)for(f=r0(t,Rbe,Obe).visitAfter(s),l=0;l<u;++l)d=t[l],m=n[d.index],g=m*m,p=d.x+d.vx,h=d.y+d.vy,f.visit(y);function y(C,b,M,S,w){var E=C.data,D=C.r,z=m+D;if(E){if(E.index>d.index){var H=p-E.x-E.vx,j=h-E.y-E.vy,L=H*H+j*j;L<z*z&&(H===0&&(H=O2(r),L+=H*H),j===0&&(j=O2(r),L+=j*j),L=(z-(L=Math.sqrt(L)))/L*i,d.vx+=(H*=L)*(z=(D*=D)/(g+D)),d.vy+=(j*=L)*z,E.vx-=H*(z=1-z),E.vy-=j*z)}return}return b>p+z||S<p-z||M>h+z||w<h-z}}function s(l){if(l.data)return l.r=n[l.data.index];for(var u=l.r=0;u<4;++u)l[u]&&l[u].r>l.r&&(l.r=l[u].r)}function c(){if(t){var l,u=t.length,f;for(n=new Array(u),l=0;l<u;++l)f=t[l],n[f.index]=+e(f,l,t)}}return a.initialize=function(l,u){t=l,r=u,c()},a.iterations=function(l){return arguments.length?(o=+l,a):o},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(e=typeof l=="function"?l:tr(+l),c(),a):e},a}function Pbe(e){return e.index}function pJ(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function ek(e){var t=Pbe,n=f,r,i=tr(30),o,a,s,c,l,u=1;e==null&&(e=[]);function f(g){return 1/Math.min(s[g.source.index],s[g.target.index])}function d(g){for(var v=0,y=e.length;v<u;++v)for(var C=0,b,M,S,w,E,D,z;C<y;++C)b=e[C],M=b.source,S=b.target,w=S.x+S.vx-M.x-M.vx||O2(l),E=S.y+S.vy-M.y-M.vy||O2(l),D=Math.sqrt(w*w+E*E),D=(D-o[C])/D*g*r[C],w*=D,E*=D,S.vx-=w*(z=c[C]),S.vy-=E*z,M.vx+=w*(z=1-z),M.vy+=E*z}function p(){if(a){var g,v=a.length,y=e.length,C=new Map(a.map((M,S)=>[t(M,S,a),M])),b;for(g=0,s=new Array(v);g<y;++g)b=e[g],b.index=g,typeof b.source!="object"&&(b.source=pJ(C,b.source)),typeof b.target!="object"&&(b.target=pJ(C,b.target)),s[b.source.index]=(s[b.source.index]||0)+1,s[b.target.index]=(s[b.target.index]||0)+1;for(g=0,c=new Array(y);g<y;++g)b=e[g],c[g]=s[b.source.index]/(s[b.source.index]+s[b.target.index]);r=new Array(y),h(),o=new Array(y),m()}}function h(){if(a)for(var g=0,v=e.length;g<v;++g)r[g]=+n(e[g],g,e)}function m(){if(a)for(var g=0,v=e.length;g<v;++g)o[g]=+i(e[g],g,e)}return d.initialize=function(g,v){a=g,l=v,p()},d.links=function(g){return arguments.length?(e=g,p(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(u=+g,d):u},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:tr(+g),h(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:tr(+g),m(),d):i},d}var $be={value:()=>{}};function mJ(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new oC(n)}function oC(e){this._=e}function Bbe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}oC.prototype=mJ.prototype={constructor:oC,on:function(e,t){var n=this._,r=Bbe(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=Ube(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=hJ(n[i],e.name,t);else if(t==null)for(i in n)n[i]=hJ(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new oC(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Ube(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function hJ(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=$be,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var tk=mJ;var Qu=0,hp=0,pp=0,vJ=1e3,aC,mp,sC=0,i0=0,cC=0,gp=typeof performance=="object"&&performance.now?performance:Date,yJ=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function yp(){return i0||(yJ(jbe),i0=gp.now()+cC)}function jbe(){i0=0}function vp(){this._call=this._time=this._next=null}vp.prototype=lC.prototype={constructor:vp,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?yp():+n)+(t==null?0:+t),!this._next&&mp!==this&&(mp?mp._next=this:aC=this,mp=this),this._call=e,this._time=n,nk()},stop:function(){this._call&&(this._call=null,this._time=1/0,nk())}};function lC(e,t,n){var r=new vp;return r.restart(e,t,n),r}function xJ(){yp(),++Qu;for(var e=aC,t;e;)(t=i0-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Qu}function gJ(){i0=(sC=gp.now())+cC,Qu=hp=0;try{xJ()}finally{Qu=0,Gbe(),i0=0}}function qbe(){var e=gp.now(),t=e-sC;t>vJ&&(cC-=t,sC=e)}function Gbe(){for(var e,t=aC,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:aC=n);mp=e,nk(r)}function nk(e){if(!Qu){hp&&(hp=clearTimeout(hp));var t=e-i0;t>24?(e<1/0&&(hp=setTimeout(gJ,e-gp.now()-cC)),pp&&(pp=clearInterval(pp))):(pp||(sC=gp.now(),pp=setInterval(qbe,vJ)),Qu=1,yJ(gJ))}}function rk(e,t,n){var r=new vp,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,a,s){a=+a,s=s==null?yp():+s,r._restart(function c(l){l+=i,r._restart(c,i+=a,s),o(l)},a,s)},r.restart(e,t,n),r)}function CJ(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function bJ(e){return e.x}function MJ(e){return e.y}var Wbe=10,Ybe=Math.PI*(3-Math.sqrt(5));function ik(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,c=lC(f),l=tk("tick","end"),u=CJ();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(c.stop(),l.call("end",t))}function d(m){var g,v=e.length,y;m===void 0&&(m=1);for(var C=0;C<m;++C)for(n+=(o-n)*i,s.forEach(function(b){b(n)}),g=0;g<v;++g)y=e[g],y.fx==null?y.x+=y.vx*=a:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=a:(y.y=y.fy,y.vy=0);return t}function p(){for(var m=0,g=e.length,v;m<g;++m){if(v=e[m],v.index=m,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var y=Wbe*Math.sqrt(.5+m),C=m*Ybe;v.x=y*Math.cos(C),v.y=y*Math.sin(C)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function h(m){return m.initialize&&m.initialize(e,u),m}return p(),t={tick:d,restart:function(){return c.restart(f),t},stop:function(){return c.stop(),t},nodes:function(m){return arguments.length?(e=m,p(),s.forEach(h),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(o=+m,t):o},velocityDecay:function(m){return arguments.length?(a=1-m,t):1-a},randomSource:function(m){return arguments.length?(u=m,s.forEach(h),t):u},force:function(m,g){return arguments.length>1?(g==null?s.delete(m):s.set(m,h(g)),t):s.get(m)},find:function(m,g,v){var y=0,C=e.length,b,M,S,w,E;for(v==null?v=1/0:v*=v,y=0;y<C;++y)w=e[y],b=m-w.x,M=g-w.y,S=b*b+M*M,S<v&&(E=w,v=S);return E},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function ok(){var e,t,n,r,i=tr(-30),o,a=1,s=1/0,c=.81;function l(p){var h,m=e.length,g=r0(e,bJ,MJ).visitAfter(f);for(r=p,h=0;h<m;++h)t=e[h],g.visit(d)}function u(){if(e){var p,h=e.length,m;for(o=new Array(h),p=0;p<h;++p)m=e[p],o[m.index]=+i(m,p,e)}}function f(p){var h=0,m,g,v=0,y,C,b;if(p.length){for(y=C=b=0;b<4;++b)(m=p[b])&&(g=Math.abs(m.value))&&(h+=m.value,v+=g,y+=g*m.x,C+=g*m.y);p.x=y/v,p.y=C/v}else{m=p,m.x=m.data.x,m.y=m.data.y;do h+=o[m.data.index];while(m=m.next)}p.value=h}function d(p,h,m,g){if(!p.value)return!0;var v=p.x-t.x,y=p.y-t.y,C=g-h,b=v*v+y*y;if(C*C/c<b)return b<s&&(v===0&&(v=O2(n),b+=v*v),y===0&&(y=O2(n),b+=y*y),b<a&&(b=Math.sqrt(a*b)),t.vx+=v*p.value*r/b,t.vy+=y*p.value*r/b),!0;if(p.length||b>=s)return;(p.data!==t||p.next)&&(v===0&&(v=O2(n),b+=v*v),y===0&&(y=O2(n),b+=y*y),b<a&&(b=Math.sqrt(a*b)));do p.data!==t&&(C=o[p.data.index]*r/b,t.vx+=v*C,t.vy+=y*C);while(p=p.next)}return l.initialize=function(p,h){e=p,n=h,u()},l.strength=function(p){return arguments.length?(i=typeof p=="function"?p:tr(+p),u(),l):i},l.distanceMin=function(p){return arguments.length?(a=p*p,l):Math.sqrt(a)},l.distanceMax=function(p){return arguments.length?(s=p*p,l):Math.sqrt(s)},l.theta=function(p){return arguments.length?(c=p*p,l):Math.sqrt(c)},l}function ak(e){var t=tr(.1),n,r,i;typeof e!="function"&&(e=tr(e==null?0:+e));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vx+=(i[c]-u.x)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:tr(+s),a(),o):t},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:tr(+s),a(),o):e},o}function sk(e){var t=tr(.1),n,r,i;typeof e!="function"&&(e=tr(e==null?0:+e));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vy+=(i[c]-u.y)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:tr(+s),a(),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:tr(+s),a(),o):e},o}var wJ={center:K_,collide:J_,nbody:ok,link:ek,x:ak,y:sk},xp="forces",ck=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Xbe=["static","iterations"],SJ=["x","y","vx","vy"];function lk(e){$.call(this,null,e)}lk.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:SJ}]};ee(lk,$,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(ck),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&EJ(n,e,0,t)):(this.value=n=Kbe(t.source,e),n.on("tick",Qbe(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Xbe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){let n=t.dataflow;for(let s=this._argops,c=0,l=s.length,u;c<l;++c)if(u=s[c],!(u.name!==xp||u.op._argval.force!=="link")){for(var r=u.op._argops,i=0,o=r.length,a;i<o;++i)if(r[i].name==="links"&&(a=r[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(SJ)}});function Qbe(e,t){return()=>e.touch(t).run()}function Kbe(e,t){let n=ik(e),r=n.stop,i=n.restart,o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),EJ(n,t,!0).on("end",()=>o=!0)}function EJ(e,t,n,r){var i=te(t.forces),o,a,s,c;for(o=0,a=ck.length;o<a;++o)s=ck[o],s!==xp&&t.modified(s)&&e[s](t[s]);for(o=0,a=i.length;o<a;++o)c=xp+o,s=n||t.modified(xp,o)?Jbe(i[o]):r&&Zbe(i[o],r)?e.force(c):null,s&&e.force(c,s);for(a=e.numForces||0;o<a;++o)e.force(xp+o,null);return e.numForces=i.length,e}function Zbe(e,t){var n,r;for(n in e)if(Ie(r=e[n])&&t.modified(fr(r)))return 1;return 0}function Jbe(e){var t,n;de(wJ,e.force)||B("Unrecognized force: "+e.force),t=wJ[e.force]();for(n in e)Ie(t[n])&&eMe(t[n],e[n],e);return t}function eMe(e,t,n){e(Ie(t)?r=>t(r,n):t)}var $k={};Cr($k,{nest:()=>kk,pack:()=>Tk,partition:()=>Ik,stratify:()=>Fk,tree:()=>Rk,treelinks:()=>Ok,treemap:()=>Pk});function tMe(e,t){return e.parent===t.parent?1:2}function nMe(e){return e.reduce(rMe,0)/e.length}function rMe(e,t){return e+t.x}function iMe(e){return 1+e.reduce(oMe,0)}function oMe(e,t){return Math.max(e,t.y)}function aMe(e){for(var t;t=e.children;)e=t[0];return e}function sMe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function fk(){var e=tMe,t=1,n=1,r=!1;function i(o){var a,s=0;o.eachAfter(function(d){var p=d.children;p?(d.x=nMe(p),d.y=iMe(p)):(d.x=a?s+=e(d,a):0,d.y=0,a=d)});var c=aMe(o),l=sMe(o),u=c.x-e(c,l)/2,f=l.x+e(l,c)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-u)/(f-u)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function cMe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function DJ(){return this.eachAfter(cMe)}function zJ(e,t){let n=-1;for(let r of this)e.call(t,r,++n,this);return this}function HJ(e,t){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function LJ(e,t){for(var n=this,r=[n],i=[],o,a,s,c=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)e.call(t,n,++c,this);return this}function AJ(e,t){let n=-1;for(let r of this)if(e.call(t,r,++n,this))return r}function VJ(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function NJ(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function _J(e){for(var t=this,n=lMe(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function lMe(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function kJ(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function TJ(){return Array.from(this)}function IJ(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function FJ(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*RJ(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function Ku(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=dMe)):t===void 0&&(t=fMe);for(var n=new Cc(e),r,i=[n],o,a,s,c;r=i.pop();)if((a=t(r.data))&&(c=(a=Array.from(a)).length))for(r.children=a,s=c-1;s>=0;--s)i.push(o=a[s]=new Cc(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(dk)}function uMe(){return Ku(this).eachBefore(pMe)}function fMe(e){return e.children}function dMe(e){return Array.isArray(e)?e[1]:null}function pMe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function dk(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Cc(e){this.data=e,this.depth=this.height=0,this.parent=null}Cc.prototype=Ku.prototype={constructor:Cc,count:DJ,each:zJ,eachAfter:LJ,eachBefore:HJ,find:AJ,sum:VJ,sort:NJ,path:_J,ancestors:kJ,descendants:TJ,leaves:IJ,links:FJ,copy:uMe,[Symbol.iterator]:RJ};function Zu(e){return e==null?null:pk(e)}function pk(e){if(typeof e!="function")throw new Error;return e}function bc(){return 0}function c4(e){return function(){return e}}function OJ(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function PJ(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $J(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function BJ(e,t){for(var n=0,r=(e=$J(Array.from(e),t)).length,i=[],o,a;n<r;)o=e[n],a&&UJ(a,o)?++n:(a=mMe(i=hMe(i,o)),n=0);return a}function hMe(e,t){var n,r;if(hk(t,e))return[t];for(n=0;n<e.length;++n)if(uC(t,e[n])&&hk(Cp(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(uC(Cp(e[n],e[r]),t)&&uC(Cp(e[n],t),e[r])&&uC(Cp(e[r],t),e[n])&&hk(jJ(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function uC(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function UJ(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function hk(e,t){for(var n=0;n<t.length;++n)if(!UJ(e,t[n]))return!1;return!0}function mMe(e){switch(e.length){case 1:return gMe(e[0]);case 2:return Cp(e[0],e[1]);case 3:return jJ(e[0],e[1],e[2])}}function gMe(e){return{x:e.x,y:e.y,r:e.r}}function Cp(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,c=o-n,l=a-r,u=s-i,f=Math.sqrt(c*c+l*l);return{x:(n+o+c/f*u)/2,y:(r+a+l/f*u)/2,r:(f+i+s)/2}}function jJ(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,c=t.r,l=n.x,u=n.y,f=n.r,d=r-a,p=r-l,h=i-s,m=i-u,g=c-o,v=f-o,y=r*r+i*i-o*o,C=y-a*a-s*s+c*c,b=y-l*l-u*u+f*f,M=p*h-d*m,S=(h*b-m*C)/(M*2)-r,w=(m*g-h*v)/M,E=(p*C-d*b)/(M*2)-i,D=(d*v-p*g)/M,z=w*w+D*D-1,H=2*(o+S*w+E*D),j=S*S+E*E-o*o,L=-(Math.abs(z)>1e-6?(H+Math.sqrt(H*H-4*z*j))/(2*z):j/H);return{x:r+S+w*L,y:i+E+D*L,r:L}}function qJ(e,t,n){var r=e.x-t.x,i,o,a=e.y-t.y,s,c,l=r*r+a*a;l?(o=t.r+n.r,o*=o,c=e.r+n.r,c*=c,o>c?(i=(l+c-o)/(2*l),s=Math.sqrt(Math.max(0,c/l-i*i)),n.x=e.x-i*r-s*a,n.y=e.y-i*a+s*r):(i=(l+o-c)/(2*l),s=Math.sqrt(Math.max(0,o/l-i*i)),n.x=t.x+i*r-s*a,n.y=t.y+i*a+s*r)):(n.x=t.x+n.r,n.y=t.y)}function GJ(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function WJ(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function fC(e){this._=e,this.next=null,this.previous=null}function YJ(e,t){if(!(o=(e=PJ(e)).length))return 0;var n,r,i,o,a,s,c,l,u,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;qJ(r,n,i=e[2]),n=new fC(n),r=new fC(r),i=new fC(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(c=3;c<o;++c){qJ(n._,r._,i=e[c]),i=new fC(i),l=r.next,u=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(GJ(l._,i._)){r=l,n.next=r,r.previous=n,--c;continue e}f+=l._.r,l=l.next}else{if(GJ(u._,i._)){n=u,n.next=r,r.previous=n,--c;continue e}d+=u._.r,u=u.previous}while(l!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=WJ(n);(i=i.next)!==r;)(s=WJ(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=BJ(n,t),c=0;c<o;++c)n=e[c],n.x-=i.x,n.y-=i.y;return i.r}function vMe(e){return Math.sqrt(e.value)}function gk(){var e=null,t=1,n=1,r=bc;function i(o){let a=OJ();return o.x=t/2,o.y=n/2,e?o.eachBefore(XJ(e)).eachAfter(mk(r,.5,a)).eachBefore(QJ(1)):o.eachBefore(XJ(vMe)).eachAfter(mk(bc,1,a)).eachAfter(mk(r,o.r/Math.min(t,n),a)).eachBefore(QJ(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=Zu(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:c4(+o),i):r},i}function XJ(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function mk(e,t,n){return function(r){if(i=r.children){var i,o,a=i.length,s=e(r)*t||0,c;if(s)for(o=0;o<a;++o)i[o].r+=s;if(c=YJ(i,n),s)for(o=0;o<a;++o)i[o].r-=s;r.r=c+s}}}function QJ(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function dC(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function P2(e,t,n,r,i){for(var o=e.children,a,s=-1,c=o.length,l=e.value&&(r-t)/e.value;++s<c;)a=o[s],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*l}function vk(){var e=1,t=1,n=0,r=!1;function i(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/s,a.eachBefore(o(t,s)),r&&a.eachBefore(dC),a}function o(a,s){return function(c){c.children&&P2(c,c.x0,a*(c.depth+1)/s,c.x1,a*(c.depth+2)/s);var l=c.x0,u=c.y0,f=c.x1-n,d=c.y1-n;f<l&&(l=f=(l+f)/2),d<u&&(u=d=(u+d)/2),c.x0=l,c.y0=u,c.x1=f,c.y1=d}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var yMe={depth:-1},KJ={},yk={};function xMe(e){return e.id}function CMe(e){return e.parentId}function pC(){var e=xMe,t=CMe,n;function r(i){var o=Array.from(i),a=e,s=t,c,l,u,f,d,p,h,m,g=new Map;if(n!=null){let v=o.map((b,M)=>bMe(n(b,M,i))),y=v.map(ZJ),C=new Set(v).add("");for(let b of y)C.has(b)||(C.add(b),v.push(b),y.push(ZJ(b)),o.push(yk));a=(b,M)=>v[M],s=(b,M)=>y[M]}for(u=0,c=o.length;u<c;++u)l=o[u],p=o[u]=new Cc(l),(h=a(l,u,i))!=null&&(h+="")&&(m=p.id=h,g.set(m,g.has(m)?KJ:p)),(h=s(l,u,i))!=null&&(h+="")&&(p.parent=h);for(u=0;u<c;++u)if(p=o[u],h=p.parent){if(d=g.get(h),!d)throw new Error("missing: "+h);if(d===KJ)throw new Error("ambiguous: "+h);d.children?d.children.push(p):d.children=[p],p.parent=d}else{if(f)throw new Error("multiple roots");f=p}if(!f)throw new Error("no root");if(n!=null){for(;f.data===yk&&f.children.length===1;)f=f.children[0],--c;for(let v=o.length-1;v>=0&&(p=o[v],p.data===yk);--v)p.data=null}if(f.parent=yMe,f.eachBefore(function(v){v.depth=v.parent.depth+1,--c}).eachBefore(dk),f.parent=null,c>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=Zu(i),r):e},r.parentId=function(i){return arguments.length?(t=Zu(i),r):t},r.path=function(i){return arguments.length?(n=Zu(i),r):n},r}function bMe(e){e=`${e}`;let t=e.length;return xk(e,t-1)&&!xk(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function ZJ(e){let t=e.length;if(t<2)return"";for(;--t>1&&!xk(e,t););return e.slice(0,t)}function xk(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function MMe(e,t){return e.parent===t.parent?1:2}function Ck(e){var t=e.children;return t?t[0]:e.t}function bk(e){var t=e.children;return t?t[t.length-1]:e.t}function wMe(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function SMe(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function EMe(e,t,n){return e.a.parent===t.parent?e.a:n}function hC(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}hC.prototype=Object.create(Cc.prototype);function DMe(e){for(var t=new hC(e,0),n,r=[t],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new hC(o[a],a)),i.parent=n;return(t.parent=new hC(null,0)).children=[t],t}function Mk(){var e=MMe,t=1,n=1,r=null;function i(l){var u=DMe(l);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)l.eachBefore(c);else{var f=l,d=l,p=l;l.eachBefore(function(y){y.x<f.x&&(f=y),y.x>d.x&&(d=y),y.depth>p.depth&&(p=y)});var h=f===d?1:e(f,d)/2,m=h-f.x,g=t/(d.x+h+m),v=n/(p.depth||1);l.eachBefore(function(y){y.x=(y.x+m)*g,y.y=y.depth*v})}return l}function o(l){var u=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(u){SMe(l);var p=(u[0].z+u[u.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-p):l.z=p}else d&&(l.z=d.z+e(l._,d._));l.parent.A=s(l,d,l.parent.A||f[0])}function a(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function s(l,u,f){if(u){for(var d=l,p=l,h=u,m=d.parent.children[0],g=d.m,v=p.m,y=h.m,C=m.m,b;h=bk(h),d=Ck(d),h&&d;)m=Ck(m),p=bk(p),p.a=l,b=h.z+y-d.z-g+e(h._,d._),b>0&&(wMe(EMe(h,l,f),l,b),g+=b,v+=b),y+=h.m,g+=d.m,C+=m.m,v+=p.m;h&&!bk(p)&&(p.t=h,p.m+=y-v),d&&!Ck(m)&&(m.t=d,m.m+=g-C,f=l)}return f}function c(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function Mc(e,t,n,r,i){for(var o=e.children,a,s=-1,c=o.length,l=e.value&&(i-n)/e.value;++s<c;)a=o[s],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*l}var wk=(1+Math.sqrt(5))/2;function Sk(e,t,n,r,i,o){for(var a=[],s=t.children,c,l,u=0,f=0,d=s.length,p,h,m=t.value,g,v,y,C,b,M,S;u<d;){p=i-n,h=o-r;do g=s[f++].value;while(!g&&f<d);for(v=y=g,M=Math.max(h/p,p/h)/(m*e),S=g*g*M,b=Math.max(y/S,S/v);f<d;++f){if(g+=l=s[f].value,l<v&&(v=l),l>y&&(y=l),S=g*g*M,C=Math.max(y/S,S/v),C>b){g-=l;break}b=C}a.push(c={value:g,dice:p<h,children:s.slice(u,f)}),c.dice?P2(c,n,r,i,m?r+=h*g/m:o):Mc(c,n,r,m?n+=p*g/m:i,o),m-=g,u=f}return a}var bp=function e(t){function n(r,i,o,a,s){Sk(t,r,i,o,a,s)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(wk);function Ek(){var e=bp,t=!1,n=1,r=1,i=[0],o=bc,a=bc,s=bc,c=bc,l=bc;function u(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(dC),d}function f(d){var p=i[d.depth],h=d.x0+p,m=d.y0+p,g=d.x1-p,v=d.y1-p;g<h&&(h=g=(h+g)/2),v<m&&(m=v=(m+v)/2),d.x0=h,d.y0=m,d.x1=g,d.y1=v,d.children&&(p=i[d.depth+1]=o(d)/2,h+=l(d)-p,m+=a(d)-p,g-=s(d)-p,v-=c(d)-p,g<h&&(h=g=(h+g)/2),v<m&&(m=v=(m+v)/2),e(d,h,m,g,v))}return u.round=function(d){return arguments.length?(t=!!d,u):t},u.size=function(d){return arguments.length?(n=+d[0],r=+d[1],u):[n,r]},u.tile=function(d){return arguments.length?(e=pk(d),u):e},u.padding=function(d){return arguments.length?u.paddingInner(d).paddingOuter(d):u.paddingInner()},u.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:c4(+d),u):o},u.paddingOuter=function(d){return arguments.length?u.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):u.paddingTop()},u.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:c4(+d),u):a},u.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:c4(+d),u):s},u.paddingBottom=function(d){return arguments.length?(c=typeof d=="function"?d:c4(+d),u):c},u.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:c4(+d),u):l},u}function Dk(e,t,n,r,i){var o=e.children,a,s=o.length,c,l=new Array(s+1);for(l[0]=c=a=0;a<s;++a)l[a+1]=c+=o[a].value;u(0,s,e.value,t,n,r,i);function u(f,d,p,h,m,g,v){if(f>=d-1){var y=o[f];y.x0=h,y.y0=m,y.x1=g,y.y1=v;return}for(var C=l[f],b=p/2+C,M=f+1,S=d-1;M<S;){var w=M+S>>>1;l[w]<b?M=w+1:S=w}b-l[M-1]<l[M]-b&&f+1<M&&--M;var E=l[M]-C,D=p-E;if(g-h>v-m){var z=p?(h*D+g*E)/p:g;u(f,M,E,h,m,z,v),u(M,d,D,z,m,g,v)}else{var H=p?(m*D+v*E)/p:v;u(f,M,E,h,m,g,H),u(M,d,D,h,H,g,v)}}}function zk(e,t,n,r,i){(e.depth&1?Mc:P2)(e,t,n,r,i)}var Hk=function e(t){function n(r,i,o,a,s){if((c=r._squarify)&&c.ratio===t)for(var c,l,u,f,d=-1,p,h=c.length,m=r.value;++d<h;){for(l=c[d],u=l.children,f=l.value=0,p=u.length;f<p;++f)l.value+=u[f].value;l.dice?P2(l,i,o,a,m?o+=(s-o)*l.value/m:s):Mc(l,i,o,m?i+=(a-i)*l.value/m:a,s),m-=l.value}else r._squarify=c=Sk(t,r,i,o,a,s),c.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(wk);function Lk(e,t,n){let r={};return e.each(i=>{let o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function kk(e){$.call(this,null,e)}kk.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var zMe=e=>e.values;ee(kk,$,{transform(e,t){t.source||B("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(a=>{a.children&&wl(a.data)&&i.rem.push(a.data)}),this.value=o=Ku({values:te(e.keys).reduce((a,s)=>(a.key(s),a),HMe()).entries(i.source)},zMe),n&&o.each(a=>{a.children&&(a=lt(a.data),i.add.push(a),i.source.push(a))}),Lk(o,De,De)),i.source.root=o,i}});function HMe(){let e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;let a=i.length,s=e[o++],c={},l={},u=-1,f,d,p;for(;++u<a;)f=s(d=i[u])+"",(p=c[f])?p.push(d):c[f]=[d];for(f in c)l[f]=n(c[f],o);return l}function r(i,o){if(++o>e.length)return i;let a=[];for(let s in i)a.push({key:s,values:r(i[s],o)});return a}return t}function wc(e){$.call(this,null,e)}var LMe=(e,t)=>e.parent===t.parent?1:2;ee(wc,$,{transform(e,t){(!t.source||!t.source.root)&&B(this.constructor.name+" transform requires a backing tree data source.");let n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Ba(e.sort,a=>a.data)),AMe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?LMe:Ia);try{this.value=n(i)}catch(a){B(a)}return i.each(a=>VMe(a,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function AMe(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function VMe(e,t,n){let r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}var Ak=["x","y","r","depth","children"];function Tk(e){wc.call(this,e)}Tk.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Ak.length,default:Ak}]};ee(Tk,wc,{layout:gk,params:["radius","size","padding"],fields:Ak});var Vk=["x0","y0","x1","y1","depth","children"];function Ik(e){wc.call(this,e)}Ik.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Vk.length,default:Vk}]};ee(Ik,wc,{layout:vk,params:["size","round","padding"],fields:Vk});function Fk(e){$.call(this,null,e)}Fk.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ee(Fk,$,{transform(e,t){t.source||B("Stratify transform requires an upstream data source.");let n=this.value,r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?Lk(pC().id(e.key).parentId(e.parentKey)(i.source),e.key,dr):Lk(pC()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});var JJ={tidy:Mk,cluster:fk},Nk=["x","y","depth","children"];function Rk(e){wc.call(this,e)}Rk.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Nk.length,default:Nk}]};ee(Rk,wc,{layout(e){let t=e||"tidy";if(de(JJ,t))return JJ[t]();B("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Nk});function Ok(e){$.call(this,[],e)}Ok.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ee(Ok,$,{transform(e,t){let n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||B("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,a=>o[De(a)]=1),r.each(a=>{let s=a.data,c=a.parent&&a.parent.data;c&&o[De(s)]&&o[De(c)]&&i.add.push(lt({source:c,target:s}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>o[De(a)]=1),n.forEach(a=>{(o[De(a.source)]||o[De(a.target)])&&i.mod.push(a)})),i}});var eee={binary:Dk,dice:P2,slice:Mc,slicedice:zk,squarify:bp,resquarify:Hk},_k=["x0","y0","x1","y1","depth","children"];function Pk(e){wc.call(this,e)}Pk.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:_k.length,default:_k}]};ee(Pk,wc,{layout(){let e=Ek();return e.ratio=t=>{let n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{de(eee,t)?e.tile(eee[t]):B("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:_k});var Zk={};Cr(Zk,{label:()=>Kk});var Bk=4278190080;function NMe(e,t){let n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function _Me(e,t,n,r,i){let o=e.width,a=e.height,s=r||i,c=Uo(o,a).getContext("2d"),l=Uo(o,a).getContext("2d"),u=s&&Uo(o,a).getContext("2d");n.forEach(E=>mC(c,E,!1)),mC(l,t,!1),s&&mC(u,t,!0);let f=Uk(c,o,a),d=Uk(l,o,a),p=s&&Uk(u,o,a),h=e.bitmap(),m=s&&e.bitmap(),g,v,y,C,b,M,S,w;for(v=0;v<a;++v)for(g=0;g<o;++g)b=v*o+g,M=f[b]&Bk,w=d[b]&Bk,S=s&&p[b]&Bk,(M||S||w)&&(y=e(g),C=e(v),!i&&(M||w)&&h.set(y,C),s&&(M||S)&&m.set(y,C));return[h,m]}function Uk(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function mC(e,t,n){if(!t.length)return;let r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>mC(e,o.items,n))}):n1[r].draw(e,{items:n?t.map(kMe):t})}function kMe(e){let t=Sl(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?k(x({},t),{strokeOpacity:1,stroke:"#000",fillOpacity:0}):t}var Sc=5,c1=31,Mp=32,l4=new Uint32Array(Mp+1),$2=new Uint32Array(Mp+1);$2[0]=0;l4[0]=~$2[0];for(let e=1;e<=Mp;++e)$2[e]=$2[e-1]<<1|1,l4[e]=~$2[e];function TMe(e,t){let n=new Uint32Array(~~((e*t+Mp)/Mp));function r(o,a){n[o]|=a}function i(o,a){n[o]&=a}return{array:n,get:(o,a)=>{let s=a*e+o;return n[s>>>Sc]&1<<(s&c1)},set:(o,a)=>{let s=a*e+o;r(s>>>Sc,1<<(s&c1))},clear:(o,a)=>{let s=a*e+o;i(s>>>Sc,~(1<<(s&c1)))},getRange:(o,a,s,c)=>{let l=c,u,f,d,p;for(;l>=a;--l)if(u=l*e+o,f=l*e+s,d=u>>>Sc,p=f>>>Sc,d===p){if(n[d]&l4[u&c1]&$2[(f&c1)+1])return!0}else{if(n[d]&l4[u&c1]||n[p]&$2[(f&c1)+1])return!0;for(let h=d+1;h<p;++h)if(n[h])return!0}return!1},setRange:(o,a,s,c)=>{let l,u,f,d,p;for(;a<=c;++a)if(l=a*e+o,u=a*e+s,f=l>>>Sc,d=u>>>Sc,f===d)r(f,l4[l&c1]&$2[(u&c1)+1]);else for(r(f,l4[l&c1]),r(d,$2[(u&c1)+1]),p=f+1;p<d;++p)r(p,4294967295)},clearRange:(o,a,s,c)=>{let l,u,f,d,p;for(;a<=c;++a)if(l=a*e+o,u=a*e+s,f=l>>>Sc,d=u>>>Sc,f===d)i(f,$2[l&c1]|l4[(u&c1)+1]);else for(i(f,$2[l&c1]),i(d,l4[(u&c1)+1]),p=f+1;p<d;++p)i(p,0)},outOfBounds:(o,a,s,c)=>o<0||a<0||c>=t||s>=e}}function IMe(e,t,n){let r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=s=>~~((s+n)/r);return a.invert=s=>s*r-n,a.bitmap=()=>TMe(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function FMe(e,t,n,r){let i=e.width,o=e.height;return function(a){let s=a.datum.datum.items[r].items,c=s.length,l=a.datum.fontSize,u=V1.width(a.datum,a.datum.text),f=0,d,p,h,m,g,v,y;for(let C=0;C<c;++C)d=s[C].x,h=s[C].y,p=s[C].x2===void 0?d:s[C].x2,m=s[C].y2===void 0?h:s[C].y2,g=(d+p)/2,v=(h+m)/2,y=Math.abs(p-d+m-h),y>=f&&(f=y,a.x=g,a.y=v);return g=u/2,v=l/2,d=a.x-g,p=a.x+g,h=a.y-v,m=a.y+v,a.align="center",d<0&&p<=i?a.align="left":0<=d&&i<p&&(a.align="right"),a.baseline="middle",h<0&&m<=o?a.baseline="top":0<=h&&o<m&&(a.baseline="bottom"),!0}}function gC(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function u4(e,t,n,r,i,o,a,s){let c=i*o/(r*2),l=e(t-c),u=e(t+c),f=e(n-(o=o/2)),d=e(n+o);return a.outOfBounds(l,f,u,d)||a.getRange(l,f,u,d)||s&&s.getRange(l,f,u,d)}function RMe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1];function c(l,u,f,d,p){let h=e.invert(l),m=e.invert(u),g=f,v=o,y;if(!gC(h,m,d,p,i,o)&&!u4(e,h,m,p,d,g,a,s)&&!u4(e,h,m,p,d,p,a,null)){for(;v-g>=1;)y=(g+v)/2,u4(e,h,m,p,d,y,a,s)?v=y:g=y;if(g>f)return[h,m,g,!0]}}return function(l){let u=l.datum.datum.items[r].items,f=u.length,d=l.datum.fontSize,p=V1.width(l.datum,l.datum.text),h=n?d:0,m=!1,g=!1,v=0,y,C,b,M,S,w,E,D,z,H,j,L,N,A,T,G,X;for(let J=0;J<f;++J){for(y=u[J].x,b=u[J].y,C=u[J].x2===void 0?y:u[J].x2,M=u[J].y2===void 0?b:u[J].y2,y>C&&(X=y,y=C,C=X),b>M&&(X=b,b=M,M=X),z=e(y),j=e(C),H=~~((z+j)/2),L=e(b),A=e(M),N=~~((L+A)/2),E=H;E>=z;--E)for(D=N;D>=L;--D)G=c(E,D,h,p,d),G&&([l.x,l.y,h,m]=G);for(E=H;E<=j;++E)for(D=N;D<=A;++D)G=c(E,D,h,p,d),G&&([l.x,l.y,h,m]=G);!m&&!n&&(T=Math.abs(C-y+M-b),S=(y+C)/2,w=(b+M)/2,T>=v&&!gC(S,w,p,d,i,o)&&!u4(e,S,w,d,p,d,a,null)&&(v=T,l.x=S,l.y=w,g=!0))}return m||g?(S=p/2,w=d/2,a.setRange(e(l.x-S),e(l.y-w),e(l.x+S),e(l.y+w)),l.align="center",l.baseline="middle",!0):!1}}var OMe=[-1,-1,1,1],PMe=[-1,1,-1,1];function $Me(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1],c=e.bitmap();return function(l){let u=l.datum.datum.items[r].items,f=u.length,d=l.datum.fontSize,p=V1.width(l.datum,l.datum.text),h=[],m=n?d:0,g=!1,v=!1,y=0,C,b,M,S,w,E,D,z,H,j,L,N;for(let A=0;A<f;++A){for(C=u[A].x,M=u[A].y,b=u[A].x2===void 0?C:u[A].x2,S=u[A].y2===void 0?M:u[A].y2,h.push([e((C+b)/2),e((M+S)/2)]);h.length;)if([D,z]=h.pop(),!(a.get(D,z)||s.get(D,z)||c.get(D,z))){c.set(D,z);for(let T=0;T<4;++T)w=D+OMe[T],E=z+PMe[T],c.outOfBounds(w,E,w,E)||h.push([w,E]);if(w=e.invert(D),E=e.invert(z),H=m,j=o,!gC(w,E,p,d,i,o)&&!u4(e,w,E,d,p,H,a,s)&&!u4(e,w,E,d,p,d,a,null)){for(;j-H>=1;)L=(H+j)/2,u4(e,w,E,d,p,L,a,s)?j=L:H=L;H>m&&(l.x=w,l.y=E,m=H,g=!0)}}!g&&!n&&(N=Math.abs(b-C+S-M),w=(C+b)/2,E=(M+S)/2,N>=y&&!gC(w,E,p,d,i,o)&&!u4(e,w,E,d,p,d,a,null)&&(y=N,l.x=w,l.y=E,v=!0))}return g||v?(w=p/2,E=d/2,a.setRange(e(l.x-w),e(l.y-E),e(l.x+w),e(l.y+E)),l.align="center",l.baseline="middle",!0):!1}}var BMe=["right","center","left"],UMe=["bottom","middle","top"];function jMe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1],c=r.length;return function(l){let u=l.boundary,f=l.datum.fontSize;if(u[2]<0||u[5]<0||u[0]>i||u[3]>o)return!1;let d=l.textWidth??0,p,h,m,g,v,y,C,b,M,S,w,E,D,z,H;for(let j=0;j<c;++j){if(p=(n[j]&3)-1,h=(n[j]>>>2&3)-1,m=p===0&&h===0||r[j]<0,g=p&&h?Math.SQRT1_2:1,v=r[j]<0?-1:1,y=u[1+p]+r[j]*p*g,w=u[4+h]+v*f*h/2+r[j]*h*g,b=w-f/2,M=w+f/2,E=e(y),z=e(b),H=e(M),!d)if(tee(E,E,z,H,a,s,y,y,b,M,u,m))d=V1.width(l.datum,l.datum.text);else continue;if(S=y+v*d*p/2,y=S-d/2,C=S+d/2,E=e(y),D=e(C),tee(E,D,z,H,a,s,y,C,b,M,u,m))return l.x=p?p*v<0?C:y:S,l.y=h?h*v<0?M:b:w,l.align=BMe[p*v+1],l.baseline=UMe[h*v+1],a.setRange(E,z,D,H),!0}return!1}}function tee(e,t,n,r,i,o,a,s,c,l,u,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}var jk=0,qk=4,Gk=8,Wk=0,Yk=1,Xk=2,qMe={"top-left":jk+Wk,top:jk+Yk,"top-right":jk+Xk,left:qk+Wk,middle:qk+Yk,right:qk+Xk,"bottom-left":Gk+Wk,bottom:Gk+Yk,"bottom-right":Gk+Xk},GMe={naive:FMe,"reduced-search":RMe,floodfill:$Me};function WMe(e,t,n,r,i,o,a,s,c,l,u){if(!e.length)return e;let f=Math.max(r.length,i.length),d=YMe(r,f),p=XMe(i,f),h=QMe(e[0].datum),m=h==="group"&&e[0].datum.items[c].marktype,g=m==="area",v=KMe(h,m,s,c),y=l===null||l===1/0,C=g&&u==="naive",b=-1,M=-1,S=e.map(z=>{let H=y?V1.width(z,z.text):void 0;return b=Math.max(b,H),M=Math.max(M,z.fontSize),{datum:z,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(z),textWidth:H}});l=l===null||l===1/0?Math.max(b,M)+Math.max(...r):l;let w=IMe(t[0],t[1],l),E;if(!C){n&&S.sort((j,L)=>n(j.datum,L.datum));let z=!1;for(let j=0;j<p.length&&!z;++j)z=p[j]===5||d[j]<0;let H=(h&&a||g)&&e.map(j=>j.datum);E=o.length||H?_Me(w,H||[],o,z,g):NMe(w,a&&S)}let D=g?GMe[u](w,E,a,c):jMe(w,E,p,d);return S.forEach(z=>z.opacity=+D(z)),S}function YMe(e,t){let n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function XMe(e,t){let n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=qMe[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function QMe(e){return e&&e.mark&&e.mark.marktype}function KMe(e,t,n,r){let i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{let a=o.datum.items[r].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:o=>{let a=o.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}var Qk=["x","y","opacity","align","baseline"],nee=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Kk(e){$.call(this,null,e)}Kk.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:nee},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:Qk.length,default:Qk}]};ee(Kk,$,{transform(e,t){function n(o){let a=e[o];return Ie(a)&&t.modified(a.fields)}let r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&B("Size parameter should be specified as a [width, height] array.");let i=e.as||Qk;return WMe(t.materialize(t.SOURCE).source||[],e.size,e.sort,te(e.offset==null?1:e.offset),te(e.anchor||nee),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{let a=o.datum;a[i[0]]=o.x,a[i[1]]=o.y,a[i[2]]=o.opacity,a[i[3]]=o.align,a[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});var nT={};Cr(nT,{loess:()=>eT,regression:()=>tT});function ree(e,t){var n=[],r=function(u){return u(s)},i,o,a,s,c,l;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],c=t.map(r),l=i[c],l||(i[c]=l=[],l.dims=c,n.push(l)),l.push(s);return n}function eT(e){$.call(this,null,e)}eT.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ee(eT,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=ree(r,e.groupby),o=(e.groupby||[]).map(un),a=o.length,s=e.as||[un(e.x),un(e.y)],c=[];i.forEach(l=>{jL(l,e.x,e.y,e.bandwidth||.3).forEach(u=>{let f={};for(let d=0;d<a;++d)f[o[d]]=l.dims[d];f[s[0]]=u[0],f[s[1]]=u[1],c.push(lt(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});var Jk={constant:Uv,linear:qv,log:PL,exp:$L,pow:BL,quad:Gv,poly:UL},ZMe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function tT(e){$.call(this,null,e)}tT.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Jk)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ee(tT,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=ree(r,e.groupby),o=(e.groupby||[]).map(un),a=e.method||"linear",s=e.order==null?3:e.order,c=ZMe(a,s),l=e.as||[un(e.x),un(e.y)],u=Jk[a],f=[],d=e.extent;de(Jk,a)||B("Invalid regression method: "+a),d!=null&&a==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(p=>{if(p.length<=c){t.dataflow.warn("Skipping regression with more parameters than data points.");return}let m=u(p,e.x,e.y,s);if(e.params){f.push(lt({keys:p.dims,coef:m.coef,rSquared:m.rSquared}));return}let g=d||Yi(p,e.x),v=y=>{let C={};for(let b=0;b<o.length;++b)C[o[b]]=p.dims[b];C[l[0]]=y[0],C[l[1]]=y[1],f.push(lt(C))};a==="linear"||a==="constant"?g.forEach(y=>v([y,m.predict(y)])):uu(m.predict,g,25,200).forEach(v)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});var oT={};Cr(oT,{voronoi:()=>iT});var yt=11102230246251565e-32,nr=134217729,wp=(3+8*yt)*yt;function o0(e,t,n,r,i){let o,a,s,c,l=t[0],u=r[0],f=0,d=0;u>l==u>-l?(o=l,l=t[++f]):(o=u,u=r[++d]);let p=0;if(f<e&&d<n)for(u>l==u>-l?(a=l+o,s=o-(a-l),l=t[++f]):(a=u+o,s=o-(a-u),u=r[++d]),o=a,s!==0&&(i[p++]=s);f<e&&d<n;)u>l==u>-l?(a=o+l,c=a-o,s=o-(a-c)+(l-c),l=t[++f]):(a=o+u,c=a-o,s=o-(a-c)+(u-c),u=r[++d]),o=a,s!==0&&(i[p++]=s);for(;f<e;)a=o+l,c=a-o,s=o-(a-c)+(l-c),l=t[++f],o=a,s!==0&&(i[p++]=s);for(;d<n;)a=o+u,c=a-o,s=o-(a-c)+(u-c),u=r[++d],o=a,s!==0&&(i[p++]=s);return(o!==0||p===0)&&(i[p++]=o),p}function Sp(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function re(e){return new Float64Array(e)}var JMe=(3+16*yt)*yt,ewe=(2+12*yt)*yt,twe=(9+64*yt)*yt*yt,Ju=re(4),iee=re(8),oee=re(12),aee=re(16),l1=re(4);function nwe(e,t,n,r,i,o,a){let s,c,l,u,f,d,p,h,m,g,v,y,C,b,M,S,w,E,D=e-i,z=n-i,H=t-o,j=r-o;b=D*j,d=nr*D,p=d-(d-D),h=D-p,d=nr*j,m=d-(d-j),g=j-m,M=h*g-(b-p*m-h*m-p*g),S=H*z,d=nr*H,p=d-(d-H),h=H-p,d=nr*z,m=d-(d-z),g=z-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,Ju[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,Ju[1]=C-(v+f)+(f-S),E=y+v,f=E-y,Ju[2]=y-(E-f)+(v-f),Ju[3]=E;let L=Sp(4,Ju),N=ewe*a;if(L>=N||-L>=N||(f=e-D,s=e-(D+f)+(f-i),f=n-z,l=n-(z+f)+(f-i),f=t-H,c=t-(H+f)+(f-o),f=r-j,u=r-(j+f)+(f-o),s===0&&c===0&&l===0&&u===0)||(N=twe*a+wp*Math.abs(L),L+=D*u+j*s-(H*l+z*c),L>=N||-L>=N))return L;b=s*j,d=nr*s,p=d-(d-s),h=s-p,d=nr*j,m=d-(d-j),g=j-m,M=h*g-(b-p*m-h*m-p*g),S=c*z,d=nr*c,p=d-(d-c),h=c-p,d=nr*z,m=d-(d-z),g=z-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,l1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,l1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,l1[2]=y-(E-f)+(v-f),l1[3]=E;let A=o0(4,Ju,4,l1,iee);b=D*u,d=nr*D,p=d-(d-D),h=D-p,d=nr*u,m=d-(d-u),g=u-m,M=h*g-(b-p*m-h*m-p*g),S=H*l,d=nr*H,p=d-(d-H),h=H-p,d=nr*l,m=d-(d-l),g=l-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,l1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,l1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,l1[2]=y-(E-f)+(v-f),l1[3]=E;let T=o0(A,iee,4,l1,oee);b=s*u,d=nr*s,p=d-(d-s),h=s-p,d=nr*u,m=d-(d-u),g=u-m,M=h*g-(b-p*m-h*m-p*g),S=c*l,d=nr*c,p=d-(d-c),h=c-p,d=nr*l,m=d-(d-l),g=l-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,l1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,l1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,l1[2]=y-(E-f)+(v-f),l1[3]=E;let G=o0(T,oee,4,l1,aee);return aee[G-1]}function ef(e,t,n,r,i,o){let a=(t-o)*(n-i),s=(e-i)*(r-o),c=a-s,l=Math.abs(a+s);return Math.abs(c)>=JMe*l?c:-nwe(e,t,n,r,i,o,l)}var q3t=(7+56*yt)*yt,G3t=(3+28*yt)*yt,W3t=(26+288*yt)*yt*yt,Y3t=re(4),X3t=re(4),Q3t=re(4),K3t=re(4),Z3t=re(4),J3t=re(4),e4t=re(4),t4t=re(4),n4t=re(4),r4t=re(8),i4t=re(8),o4t=re(8),a4t=re(4),s4t=re(8),c4t=re(8),l4t=re(8),u4t=re(12),f4t=re(192),d4t=re(192);var m4t=(10+96*yt)*yt,g4t=(4+48*yt)*yt,v4t=(44+576*yt)*yt*yt,y4t=re(4),x4t=re(4),C4t=re(4),b4t=re(4),M4t=re(4),w4t=re(4),S4t=re(4),E4t=re(4),D4t=re(8),z4t=re(8),H4t=re(8),L4t=re(8),A4t=re(8),V4t=re(8),N4t=re(8),_4t=re(8),k4t=re(8),T4t=re(4),I4t=re(4),F4t=re(4),R4t=re(8),O4t=re(16),P4t=re(16),$4t=re(16),B4t=re(32),U4t=re(32),j4t=re(48),q4t=re(64),G4t=re(1152),W4t=re(1152);var K4t=(16+224*yt)*yt,Z4t=(5+72*yt)*yt,J4t=(71+1408*yt)*yt*yt,elt=re(4),tlt=re(4),nlt=re(4),rlt=re(4),ilt=re(4),olt=re(4),alt=re(4),slt=re(4),clt=re(4),llt=re(4),ult=re(24),flt=re(24),dlt=re(24),plt=re(24),hlt=re(24),mlt=re(24),glt=re(24),vlt=re(24),ylt=re(24),xlt=re(24),Clt=re(1152),blt=re(1152),Mlt=re(1152),wlt=re(1152),Slt=re(1152),Elt=re(2304),Dlt=re(2304),zlt=re(3456),Hlt=re(5760),Llt=re(8),Alt=re(8),Vlt=re(8),Nlt=re(16),_lt=re(24),klt=re(48),Tlt=re(48),Ilt=re(96),Flt=re(192),Rlt=re(384),Olt=re(384),Plt=re(384),$lt=re(768);var Blt=re(96),Ult=re(96),jlt=re(96),qlt=re(1152);var cee=Math.pow(2,-52),vC=new Uint32Array(512),Dp=class e{static from(t,n=cwe,r=lwe){let i=t.length,o=new Float64Array(i*2);for(let a=0;a<i;a++){let s=t[a];o[2*a]=n(s),o[2*a+1]=r(s)}return new e(o)}constructor(t){let n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;let r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){let{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,a=t.length>>1,s=1/0,c=1/0,l=-1/0,u=-1/0;for(let D=0;D<a;D++){let z=t[2*D],H=t[2*D+1];z<s&&(s=z),H<c&&(c=H),z>l&&(l=z),H>u&&(u=H),this._ids[D]=D}let f=(s+l)/2,d=(c+u)/2,p,h,m;for(let D=0,z=1/0;D<a;D++){let H=rT(f,d,t[2*D],t[2*D+1]);H<z&&(p=D,z=H)}let g=t[2*p],v=t[2*p+1];for(let D=0,z=1/0;D<a;D++){if(D===p)continue;let H=rT(g,v,t[2*D],t[2*D+1]);H<z&&H>0&&(h=D,z=H)}let y=t[2*h],C=t[2*h+1],b=1/0;for(let D=0;D<a;D++){if(D===p||D===h)continue;let z=awe(g,v,y,C,t[2*D],t[2*D+1]);z<b&&(m=D,b=z)}let M=t[2*m],S=t[2*m+1];if(b===1/0){for(let H=0;H<a;H++)this._dists[H]=t[2*H]-t[0]||t[2*H+1]-t[1];tf(this._ids,this._dists,0,a-1);let D=new Uint32Array(a),z=0;for(let H=0,j=-1/0;H<a;H++){let L=this._ids[H],N=this._dists[L];N>j&&(D[z++]=L,j=N)}this.hull=D.subarray(0,z),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(ef(g,v,y,C,M,S)<0){let D=h,z=y,H=C;h=m,y=M,C=S,m=D,M=z,S=H}let w=swe(g,v,y,C,M,S);this._cx=w.x,this._cy=w.y;for(let D=0;D<a;D++)this._dists[D]=rT(t[2*D],t[2*D+1],w.x,w.y);tf(this._ids,this._dists,0,a-1),this._hullStart=p;let E=3;r[p]=n[m]=h,r[h]=n[p]=m,r[m]=n[h]=p,i[p]=0,i[h]=1,i[m]=2,o.fill(-1),o[this._hashKey(g,v)]=p,o[this._hashKey(y,C)]=h,o[this._hashKey(M,S)]=m,this.trianglesLen=0,this._addTriangle(p,h,m,-1,-1,-1);for(let D=0,z,H;D<this._ids.length;D++){let j=this._ids[D],L=t[2*j],N=t[2*j+1];if(D>0&&Math.abs(L-z)<=cee&&Math.abs(N-H)<=cee||(z=L,H=N,j===p||j===h||j===m))continue;let A=0;for(let we=0,Se=this._hashKey(L,N);we<this._hashSize&&(A=o[(Se+we)%this._hashSize],!(A!==-1&&A!==r[A]));we++);A=n[A];let T=A,G;for(;G=r[T],ef(L,N,t[2*T],t[2*T+1],t[2*G],t[2*G+1])>=0;)if(T=G,T===A){T=-1;break}if(T===-1)continue;let X=this._addTriangle(T,j,r[T],-1,-1,i[T]);i[j]=this._legalize(X+2),i[T]=X,E++;let J=r[T];for(;G=r[J],ef(L,N,t[2*J],t[2*J+1],t[2*G],t[2*G+1])<0;)X=this._addTriangle(J,j,G,i[j],-1,i[J]),i[j]=this._legalize(X+2),r[J]=J,E--,J=G;if(T===A)for(;G=n[T],ef(L,N,t[2*G],t[2*G+1],t[2*T],t[2*T+1])<0;)X=this._addTriangle(G,j,T,-1,i[T],i[G]),this._legalize(X+2),i[G]=X,r[T]=T,E--,T=G;this._hullStart=n[j]=T,r[T]=n[J]=j,r[j]=J,o[this._hashKey(L,N)]=j,o[this._hashKey(t[2*T],t[2*T+1])]=T}this.hull=new Uint32Array(E);for(let D=0,z=this._hullStart;D<E;D++)this.hull[D]=z,z=r[z];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(iwe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){let{_triangles:n,_halfedges:r,coords:i}=this,o=0,a=0;for(;;){let s=r[t],c=t-t%3;if(a=c+(t+2)%3,s===-1){if(o===0)break;t=vC[--o];continue}let l=s-s%3,u=c+(t+1)%3,f=l+(s+2)%3,d=n[a],p=n[t],h=n[u],m=n[f];if(owe(i[2*d],i[2*d+1],i[2*p],i[2*p+1],i[2*h],i[2*h+1],i[2*m],i[2*m+1])){n[t]=m,n[s]=d;let v=r[f];if(v===-1){let C=this._hullStart;do{if(this._hullTri[C]===f){this._hullTri[C]=t;break}C=this._hullPrev[C]}while(C!==this._hullStart)}this._link(t,v),this._link(s,r[a]),this._link(a,f);let y=l+(s+1)%3;o<vC.length&&(vC[o++]=y)}else{if(o===0)break;t=vC[--o]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,a){let s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=n,this._triangles[s+2]=r,this._link(s,i),this._link(s+1,o),this._link(s+2,a),this.trianglesLen+=3,s}};function iwe(e,t){let n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function rT(e,t,n,r){let i=e-n,o=t-r;return i*i+o*o}function owe(e,t,n,r,i,o,a,s){let c=e-a,l=t-s,u=n-a,f=r-s,d=i-a,p=o-s,h=c*c+l*l,m=u*u+f*f,g=d*d+p*p;return c*(f*g-m*p)-l*(u*g-m*d)+h*(u*p-f*d)<0}function awe(e,t,n,r,i,o){let a=n-e,s=r-t,c=i-e,l=o-t,u=a*a+s*s,f=c*c+l*l,d=.5/(a*l-s*c),p=(l*u-s*f)*d,h=(a*f-c*u)*d;return p*p+h*h}function swe(e,t,n,r,i,o){let a=n-e,s=r-t,c=i-e,l=o-t,u=a*a+s*s,f=c*c+l*l,d=.5/(a*l-s*c),p=e+(l*u-s*f)*d,h=t+(a*f-c*u)*d;return{x:p,y:h}}function tf(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){let o=e[i],a=t[o],s=i-1;for(;s>=n&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=o}else{let i=n+r>>1,o=n+1,a=r;Ep(e,i,o),t[e[n]]>t[e[r]]&&Ep(e,n,r),t[e[o]]>t[e[r]]&&Ep(e,o,r),t[e[n]]>t[e[o]]&&Ep(e,n,o);let s=e[o],c=t[s];for(;;){do o++;while(t[e[o]]<c);do a--;while(t[e[a]]>c);if(a<o)break;Ep(e,o,a)}e[n+1]=e[a],e[a]=s,r-o+1>=a-n?(tf(e,t,o,r),tf(e,t,n,a-1)):(tf(e,t,n,a-1),tf(e,t,o,r))}}function Ep(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function cwe(e){return e[0]}function lwe(e){return e[1]}var B2=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;let i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}};var a0=class{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}};var yC=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this,o,a,s=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,v=r.length,y,C;m<v;m+=3,g+=2){let b=r[m]*2,M=r[m+1]*2,S=r[m+2]*2,w=t[b],E=t[b+1],D=t[M],z=t[M+1],H=t[S],j=t[S+1],L=D-w,N=z-E,A=H-w,T=j-E,G=(L*T-N*A)*2;if(Math.abs(G)<1e-9){if(o===void 0){o=a=0;for(let J of n)o+=t[J*2],a+=t[J*2+1];o/=n.length,a/=n.length}let X=1e9*Math.sign((o-w)*T-(a-E)*A);y=(w+H)/2-X*T,C=(E+j)/2+X*A}else{let X=1/G,J=L*L+N*N,we=A*A+T*T;y=w+(T*J-N*we)*X,C=E+(L*we-A*J)*X}s[g]=y,s[g+1]=C}let c=n[n.length-1],l,u=c*4,f,d=t[2*c],p,h=t[2*c+1];i.fill(0);for(let m=0;m<n.length;++m)c=n[m],l=u,f=d,p=h,u=c*4,d=t[2*c],h=t[2*c+1],i[l+2]=i[u]=p-h,i[l+3]=i[u+1]=d-f}render(t){let n=t==null?t=new B2:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:a,vectors:s}=this;if(o.length<=1)return null;for(let u=0,f=r.length;u<f;++u){let d=r[u];if(d<u)continue;let p=Math.floor(u/3)*2,h=Math.floor(d/3)*2,m=a[p],g=a[p+1],v=a[h],y=a[h+1];this._renderSegment(m,g,v,y,t)}let c,l=o[o.length-1];for(let u=0;u<o.length;++u){c=l,l=o[u];let f=Math.floor(i[l]/3)*2,d=a[f],p=a[f+1],h=c*4,m=this._project(d,p,s[h+2],s[h+3]);m&&this._renderSegment(d,p,m[0],m[1],t)}return n&&n.value()}renderBounds(t){let n=t==null?t=new B2:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){let r=n==null?n=new B2:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let a=2;a<o;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),r&&r.value()}*cellPolygons(){let{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){let i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){let n=new a0;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let a,s=this._regioncode(t,n),c=this._regioncode(r,i);s===0&&c===0?(o.moveTo(t,n),o.lineTo(r,i)):(a=this._clipSegment(t,n,r,i,s,c))&&(o.moveTo(a[0],a[1]),o.lineTo(a[2],a[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){let n=this._clip(t);if(n)for(let r of this.delaunay.neighbors(t)){let i=this._clip(r);if(i){e:for(let o=0,a=n.length;o<a;o+=2)for(let s=0,c=i.length;s<c;s+=2)if(n[o]===i[s]&&n[o+1]===i[s+1]&&n[(o+2)%a]===i[(s+c-2)%c]&&n[(o+3)%a]===i[(s+c-1)%c]){yield r;break e}}}}_cell(t){let{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,a=r[t];if(a===-1)return null;let s=[],c=a;do{let l=Math.floor(c/3);if(s.push(n[l*2],n[l*2+1]),c=c%3===2?c-2:c+1,o[c]!==t)break;c=i[c]}while(c!==a&&c!==-1);return s}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let n=this._cell(t);if(n===null)return null;let{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){let r=n.length,i=null,o,a,s=n[r-2],c=n[r-1],l,u=this._regioncode(s,c),f,d=0;for(let p=0;p<r;p+=2)if(o=s,a=c,s=n[p],c=n[p+1],l=u,u=this._regioncode(s,c),l===0&&u===0)f=d,d=0,i?i.push(s,c):i=[s,c];else{let h,m,g,v,y;if(l===0){if((h=this._clipSegment(o,a,s,c,l,u))===null)continue;[m,g,v,y]=h}else{if((h=this._clipSegment(s,c,o,a,u,l))===null)continue;[v,y,m,g]=h,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(v,y),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(v,y):i=[v,y]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,a){let s=o<a;for(s&&([t,n,r,i,o,a]=[r,i,t,n,a,o]);;){if(o===0&&a===0)return s?[r,i,t,n]:[t,n,r,i];if(o&a)return null;let c,l,u=o||a;u&8?(c=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):u&4?(c=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):u&2?(l=n+(i-n)*(this.xmax-t)/(r-t),c=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),c=this.xmin),o?(t=c,n=l,o=this._regioncode(t,n)):(r=c,i=l,a=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,a){let s=Array.from(n),c;if((c=this._project(s[0],s[1],r,i))&&s.unshift(c[0],c[1]),(c=this._project(s[s.length-2],s[s.length-1],o,a))&&s.push(c[0],c[1]),s=this._clipFinite(t,s))for(let l=0,u=s.length,f,d=this._edgecode(s[u-2],s[u-1]);l<u;l+=2)f=d,d=this._edgecode(s[l],s[l+1]),f&&d&&(l=this._edge(t,f,d,s,l),u=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,n,r,i,o){for(;n!==r;){let a,s;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,s=this.ymin;break}(i[o]!==a||i[o+1]!==s)&&this.contains(t,a,s)&&(i.splice(o,0,a,s),o+=2)}return o}_project(t,n,r,i){let o=1/0,a,s,c;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<o&&(c=this.ymin,s=t+(o=a)*r)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<o&&(c=this.ymax,s=t+(o=a)*r)}if(r>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/r)<o&&(s=this.xmax,c=n+(o=a)*i)}else if(r<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/r)<o&&(s=this.xmin,c=n+(o=a)*i)}return[s,c]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){let r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};var uwe=2*Math.PI,nf=Math.pow;function fwe(e){return e[0]}function dwe(e){return e[1]}function pwe(e){let{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){let i=2*t[r],o=2*t[r+1],a=2*t[r+2];if((n[a]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function hwe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}var zp=class e{static from(t,n=fwe,r=dwe,i){return new e("length"in t?mwe(t,n,r,i):Float64Array.from(gwe(t,n,r,i)))}constructor(t){this._delaunator=new Dp(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&pwe(t)){this.collinear=Int32Array.from({length:n.length/2},(d,p)=>p).sort((d,p)=>n[2*d]-n[2*p]||n[2*d+1]-n[2*p+1]);let c=this.collinear[0],l=this.collinear[this.collinear.length-1],u=[n[2*c],n[2*c+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let d=0,p=n.length/2;d<p;++d){let h=hwe(n[2*d],n[2*d+1],f);n[2*d]=h[0],n[2*d+1]=h[1]}this._delaunator=new Dp(n)}else delete this.collinear;let r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let c=0,l=r.length;c<l;++c){let u=o[c%3===2?c-2:c+1];(r[c]===-1||a[u]===-1)&&(a[u]=c)}for(let c=0,l=i.length;c<l;++c)s[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],a[i[0]]=1,i.length===2&&(a[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new yC(this,t)}*neighbors(t){let{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:a,collinear:s}=this;if(s){let f=s.indexOf(t);f>0&&(yield s[f-1]),f<s.length-1&&(yield s[f+1]);return}let c=n[t];if(c===-1)return;let l=c,u=-1;do{if(yield u=a[l],l=l%3===2?l-2:l+1,a[l]!==t)return;if(l=o[l],l===-1){let f=r[(i[t]+1)%r.length];f!==u&&(yield f);return}}while(l!==c)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;let i=r,o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){let{inedges:i,hull:o,_hullIndex:a,halfedges:s,triangles:c,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let u=t,f=nf(n-l[t*2],2)+nf(r-l[t*2+1],2),d=i[t],p=d;do{let h=c[p],m=nf(n-l[h*2],2)+nf(r-l[h*2+1],2);if(m<f&&(f=m,u=h),p=p%3===2?p-2:p+1,c[p]!==t)break;if(p=s[p],p===-1){if(p=o[(a[t]+1)%o.length],p!==h&&nf(n-l[p*2],2)+nf(r-l[p*2+1],2)<f)return p;break}}while(p!==d);return u}render(t){let n=t==null?t=new B2:void 0,{points:r,halfedges:i,triangles:o}=this;for(let a=0,s=i.length;a<s;++a){let c=i[a];if(c<a)continue;let l=o[a]*2,u=o[c]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;let r=t==null?t=new B2:void 0,{points:i}=this;for(let o=0,a=i.length;o<a;o+=2){let s=i[o],c=i[o+1];t.moveTo(s+n,c),t.arc(s,c,n,0,uwe)}return r&&r.value()}renderHull(t){let n=t==null?t=new B2:void 0,{hull:r,points:i}=this,o=r[0]*2,a=r.length;t.moveTo(i[o],i[o+1]);for(let s=1;s<a;++s){let c=2*r[s];t.lineTo(i[c],i[c+1])}return t.closePath(),n&&n.value()}hullPolygon(){let t=new a0;return this.renderHull(t),t.value()}renderTriangle(t,n){let r=n==null?n=new B2:void 0,{points:i,triangles:o}=this,a=o[t*=3]*2,s=o[t+1]*2,c=o[t+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[s],i[s+1]),n.lineTo(i[c],i[c+1]),n.closePath(),r&&r.value()}*trianglePolygons(){let{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){let n=new a0;return this.renderTriangle(t,n),n.value()}};function mwe(e,t,n,r){let i=e.length,o=new Float64Array(i*2);for(let a=0;a<i;++a){let s=e[a];o[a*2]=t.call(r,s,a,e),o[a*2+1]=n.call(r,s,a,e)}return o}function*gwe(e,t,n,r){let i=0;for(let o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function iT(e){$.call(this,null,e)}iT.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var vwe=[-1e5,-1e5,1e5,1e5];ee(iT,$,{transform(e,t){let n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:vwe;let o=this.value=zp.from(r,e.x,e.y).voronoi(i);for(let a=0,s=r.length;a<s;++a){let c=o.cellPolygon(a);r[a][n]=c&&!xwe(c)?ywe(c):null}return t.reflow(e.modified()).modifies(n)}});function ywe(e){let t=e[0][0],n=e[0][1],r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function xwe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}var cT={};Cr(cT,{wordcloud:()=>sT});var aT=Math.PI/180,Hp=64,xC=2048;function Cwe(){var e=[256,256],t,n,r,i,o,a,s,c=lee,l=[],u=Math.random,f={};f.layout=function(){for(var h=d(Uo()),m=Dwe((e[0]>>5)*e[1]),g=null,v=l.length,y=-1,C=[],b=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:o(S),rotate:a(S),size:~~(r(S)+1e-14),padding:s(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,w)=>w.size-S.size);++y<v;){var M=b[y];M.x=e[0]*(u()+.5)>>1,M.y=e[1]*(u()+.5)>>1,bwe(h,M,b,y),M.hasText&&p(m,M,g)&&(C.push(M),g?wwe(g,M):g=[{x:M.x+M.x0,y:M.y+M.y0},{x:M.x+M.x1,y:M.y+M.y1}],M.x-=e[0]>>1,M.y-=e[1]>>1)}return C};function d(h){h.width=h.height=1;var m=Math.sqrt(h.getContext("2d").getImageData(0,0,1,1).data.length>>2);h.width=(Hp<<5)/m,h.height=xC/m;var g=h.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function p(h,m,g){for(var v=m.x,y=m.y,C=Math.sqrt(e[0]*e[0]+e[1]*e[1]),b=c(e),M=u()<.5?1:-1,S=-M,w,E,D;(w=b(S+=M))&&(E=~~w[0],D=~~w[1],!(Math.min(Math.abs(E),Math.abs(D))>=C));)if(m.x=v+E,m.y=y+D,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!Mwe(m,h,e[0]))&&(!g||Swe(m,g))){for(var z=m.sprite,H=m.width>>5,j=e[0]>>5,L=m.x-(H<<4),N=L&127,A=32-N,T=m.y1-m.y0,G=(m.y+m.y0)*j+(L>>5),X,J=0;J<T;J++){X=0;for(var we=0;we<=H;we++)h[G+we]|=X<<A|(we<H?(X=z[J*H+we])>>>N:0);G+=j}return m.sprite=null,!0}return!1}return f.words=function(h){return arguments.length?(l=h,f):l},f.size=function(h){return arguments.length?(e=[+h[0],+h[1]],f):e},f.font=function(h){return arguments.length?(n=s0(h),f):n},f.fontStyle=function(h){return arguments.length?(i=s0(h),f):i},f.fontWeight=function(h){return arguments.length?(o=s0(h),f):o},f.rotate=function(h){return arguments.length?(a=s0(h),f):a},f.text=function(h){return arguments.length?(t=s0(h),f):t},f.spiral=function(h){return arguments.length?(c=zwe[h]||h,f):c},f.fontSize=function(h){return arguments.length?(r=s0(h),f):r},f.padding=function(h){return arguments.length?(s=s0(h),f):s},f.random=function(h){return arguments.length?(u=h,f):u},f}function bwe(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(Hp<<5)/o,xC/o);var a=0,s=0,c=0,l=n.length,u,f,d,p,h;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,u=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*aT),g=Math.cos(t.rotate*aT),v=u*g,y=u*m,C=d*g,b=d*m;u=Math.max(Math.abs(v+b),Math.abs(v-b))+31>>5<<5,d=~~Math.max(Math.abs(y+C),Math.abs(y-C))}else u=u+31>>5<<5;if(d>c&&(c=d),a+u>=Hp<<5&&(a=0,s+=c,c=0),s+d>=xC)break;i.translate((a+(u>>1))/o,(s+(d>>1))/o),t.rotate&&i.rotate(t.rotate*aT),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=u,t.height=d,t.xoff=a,t.yoff=s,t.x1=u>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=u}for(var M=i.getImageData(0,0,(Hp<<5)/o,xC/o).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(u=t.width,f=u>>5,d=t.y1-t.y0,p=0;p<d*f;p++)S[p]=0;if(a=t.xoff,a==null)return;s=t.yoff;var w=0,E=-1;for(h=0;h<d;h++){for(p=0;p<u;p++){var D=f*h+(p>>5),z=M[(s+h)*(Hp<<5)+(a+p)<<2]?1<<31-p%32:0;S[D]|=z,w|=z}w?E=h:(t.y0++,d--,h--,s++)}t.y1=t.y0+E,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function Mwe(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),a=o&127,s=32-a,c=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),u,f=0;f<c;f++){u=0;for(var d=0;d<=i;d++)if((u<<s|(d<i?(u=r[f*i+d])>>>a:0))&t[l+d])return!0;l+=n}return!1}function wwe(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Swe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function lee(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Ewe(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var a=o<0?-1:1;switch(Math.sqrt(1+4*a*o)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Dwe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function s0(e){return typeof e=="function"?e:function(){return e}}var zwe={archimedean:lee,rectangular:Ewe},uee=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Hwe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function sT(e){$.call(this,Cwe(),e)}sT.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:uee}]};ee(sT,$,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&B("Wordcloud size dimensions must be non-zero.");function n(h){let m=e[h];return Ie(m)&&t.modified(m.fields)}let r=e.modified();if(!(r||t.changed(t.ADD_REM)||Hwe.some(n)))return;let i=t.materialize(t.SOURCE).source,o=this.value,a=e.as||uee,s=e.fontSize||14,c;if(Ie(s)?c=e.fontSizeRange:s=mn(s),c){let h=s,m=dt("sqrt")().domain(Yi(i,h)).range(c);s=g=>m(h(g))}i.forEach(h=>{h[a[0]]=NaN,h[a[1]]=NaN,h[a[3]]=0});let l=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(e1).layout(),u=o.size(),f=u[0]>>1,d=u[1]>>1,p=l.length;for(let h=0,m,g;h<p;++h)m=l[h],g=m.datum,g[a[0]]=m.x+f,g[a[1]]=m.y+d,g[a[2]]=m.font,g[a[3]]=m.size,g[a[4]]=m.style,g[a[5]]=m.weight,g[a[6]]=m.rotate;return t.reflow(r).modifies(a)}});var fT={};Cr(fT,{crossfilter:()=>lT,resolvefilter:()=>uT});var Lwe=e=>new Uint8Array(e),Awe=e=>new Uint16Array(e),Lp=e=>new Uint32Array(e);function Vwe(){let e=8,t=[],n=Lp(0),r=CC(0,e),i=CC(0,e);return{data:()=>t,seen:()=>n=Nwe(n,t.length),add(o){for(let a=0,s=t.length,c=o.length,l;a<c;++a)l=o[a],l._index=s++,t.push(l)},remove(o,a){let s=t.length,c=Array(s-o),l=t,u,f,d;for(f=0;!a[f]&&f<s;++f)c[f]=t[f],l[f]=f;for(d=f;f<s;++f)u=t[f],a[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],c[d]=u,u._index=d++),r[f]=0;return t=c,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,a){r[o]|=a},clear(o,a){r[o]&=~a},resize(o,a){let s=r.length;(o>s||a>e)&&(e=Math.max(a,e),r=CC(o,e,r),i=CC(o,e))}}}function Nwe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function CC(e,t,n){let r=(t<257?Lwe:t<65537?Awe:Lp)(e);return n&&r.set(n),r}function fee(e,t,n){let r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){let a=this,s=a.bisect(a.range,i.value),c=i.index,l=s[0],u=s[1],f=c.length,d;for(d=0;d<l;++d)o[c[d]]|=r;for(d=u;d<f;++d)o[c[d]]|=r;return a}}}function dee(){let e=Lp(0),t=[],n=0;function r(s,c,l){if(!c.length)return[];let u=n,f=c.length,d=Lp(f),p=Array(f),h,m,g;for(g=0;g<f;++g)p[g]=s(c[g]),d[g]=g;if(p=_we(p,d),u)h=t,m=e,t=Array(u+f),e=Lp(u+f),kwe(l,h,m,u,p,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=p,e=d}return n=u+f,{index:d,value:p}}function i(s,c){let l=n,u,f,d;for(f=0;!c[e[f]]&&f<l;++f);for(d=f;f<l;++f)c[u=e[f]]||(e[d]=u,t[d]=t[f],++d);n=l-s}function o(s){for(let c=0,l=n;c<l;++c)e[c]=s[e[c]]}function a(s,c){let l;return c?l=c.length:(c=t,l=n),[RH(c,s[0],0,l),dl(c,s[1],0,l)]}return{insert:r,remove:i,bisect:a,reindex:o,index:()=>e,size:()=>n}}function _we(e,t){return e.sort.call(t,(n,r)=>{let i=e[n],o=e[r];return i<o?-1:i>o?1:0}),iv(e,t)}function kwe(e,t,n,r,i,o,a,s,c){let l=0,u=0,f;for(f=0;l<r&&u<a;++f)t[l]<i[u]?(s[f]=t[l],c[f]=n[l++]):(s[f]=i[u],c[f]=o[u++]+e);for(;l<r;++l,++f)s[f]=t[l],c[f]=n[l];for(;u<a;++u,++f)s[f]=i[u],c[f]=o[u]+e}function lT(e){$.call(this,Vwe(),e),this._indices=null,this._dims=null}lT.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ee(lT,$,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){let n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length,s=0,c,l;for(;s<a;++s)c=n[s].fname,l=i[c]||(i[c]=dee()),o.push(fee(l,s,r[s]));return this.eval(e,t)},reinit(e,t){let n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,c=s.curr(),l=s.prev(),u=s.all(),f=n.rem=n.add,d=n.mod,p=i.length,h={},m,g,v,y,C,b,M,S,w;if(l.set(c),t.rem.length&&(C=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(b={},y=t.mod,M=0,S=y.length;M<S;++M)b[y[M]._index]=1;for(M=0;M<p;++M)w=r[M],(!a[M]||e.modified("fields",M)||t.modified(w.fields))&&(v=w.fname,(m=h[v])||(o[v]=g=dee(),h[v]=m=g.insert(w,t.source,0)),a[M]=fee(g,M,i[M]).onAdd(m,c));for(M=0,S=s.data().length;M<S;++M)C[M]||(l[M]!==c[M]?f.push(M):b[M]&&c[M]!==u&&d.push(M));return s.mask=(1<<p)-1,n},eval(e,t){let n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){let r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,c={},l=n.add,u=i.size()+r.length,f=o.length,d=i.size(),p,h,m;i.resize(u,f),i.add(r);let g=i.curr(),v=i.prev(),y=i.all();for(p=0;p<f;++p)h=s[p].fname,m=c[h]||(c[h]=a[h].insert(s[p],r,d)),o[p].onAdd(m,g);for(;d<u;++d)v[d]=y,g[d]!==y&&l.push(d)},modify(e,t){let n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod,s,c,l;for(s=0,c=a.length;s<c;++s)l=a[s]._index,i[l]!==o&&n.push(l)},remove(e,t,n){let r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),c={},l=n.rem,u=t.rem,f,d,p,h;for(f=0,d=u.length;f<d;++f)p=u[f]._index,c[p]=1,a[p]=h=o[p],o[p]=s,h!==s&&l.push(p);for(p in r)r[p].remove(d,c);return this.reindex(t,d,c),c},reindex(e,t,n){let r=this._indices,i=this.value;e.runAfter(()=>{let o=i.remove(t,n);for(let a in r)r[a].reindex(o)})},update(e,t,n){let r=this._dims,i=e.query,o=t.stamp,a=r.length,s=0,c,l;for(n.filters=0,l=0;l<a;++l)e.modified("query",l)&&(c=l,++s);if(s===1)s=r[c].one,this.incrementOne(r[c],i[c],n.add,n.rem);else for(l=0,s=0;l<a;++l)e.modified("query",l)&&(s|=r[l].one,this.incrementAll(r[l],i[l],o,n.add),n.rem=n.add);return s},incrementAll(e,t,n,r){let i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),c=e.index(),l=e.bisect(e.range),u=e.bisect(t),f=u[0],d=u[1],p=l[0],h=l[1],m=e.one,g,v,y;if(f<p)for(g=f,v=Math.min(p,d);g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;else if(f>p)for(g=p,v=Math.min(f,h);g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;if(d>h)for(g=Math.max(f,h),v=d;g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;else if(d<h)for(g=Math.max(p,d),v=h;g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;e.range=t.slice()},incrementOne(e,t,n,r){let i=this.value,o=i.curr(),a=e.index(),s=e.bisect(e.range),c=e.bisect(t),l=c[0],u=c[1],f=s[0],d=s[1],p=e.one,h,m,g;if(l<f)for(h=l,m=Math.min(f,u);h<m;++h)g=a[h],o[g]^=p,n.push(g);else if(l>f)for(h=f,m=Math.min(l,d);h<m;++h)g=a[h],o[g]^=p,r.push(g);if(u>d)for(h=Math.max(l,d),m=u;h<m;++h)g=a[h],o[g]^=p,n.push(g);else if(u<d)for(h=Math.max(f,u),m=d;h<m;++h)g=a[h],o[g]^=p,r.push(g);e.range=t.slice()}});function uT(e){$.call(this,null,e)}uT.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ee(uT,$,{transform(e,t){let n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;let o=t.fork(t.ALL),a=r.data(),s=r.curr(),c=r.prev(),l=u=>s[u]&n?null:a[u];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,u=>{let f=s[u]&n;return!f&&f^c[u]&n?a[u]:null}),o.filter(o.REM,u=>{let f=s[u]&n;return f&&!(f^(f^c[u]&n))?a[u]:null})):(o.filter(o.ADD,l),o.filter(o.REM,u=>(s[u]&n)===i?a[u]:null)),o.filter(o.SOURCE,u=>l(u._index))}});var Twe="RawCode",Dc="Literal",Iwe="Property",Fwe="Identifier",Rwe="ArrayExpression",Owe="BinaryExpression",vT="CallExpression",Pwe="ConditionalExpression",$we="LogicalExpression",Bwe="MemberExpression",Uwe="ObjectExpression",jwe="UnaryExpression";function U2(e){this.type=e}U2.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=qwe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function qwe(e){switch(e.type){case Rwe:return e.elements;case Owe:case $we:return[e.left,e.right];case vT:return[e.callee].concat(e.arguments);case Pwe:return[e.test,e.consequent,e.alternate];case Bwe:return[e.object,e.property];case Uwe:return e.properties;case Iwe:return[e.key,e.value];case jwe:return[e.argument];case Fwe:case Dc:case Twe:default:return[]}}var rs,Me,q,Hi,Ft,wC=1,kp=2,c0=3,f4=4,SC=5,u0=6,k1=7,Tp=8,Gwe=9;rs={};rs[wC]="Boolean";rs[kp]="<end>";rs[c0]="Identifier";rs[f4]="Keyword";rs[SC]="Null";rs[u0]="Numeric";rs[k1]="Punctuator";rs[Tp]="String";rs[Gwe]="RegularExpression";var Wwe="ArrayExpression",Ywe="BinaryExpression",Xwe="CallExpression",Qwe="ConditionalExpression",Cee="Identifier",Kwe="Literal",Zwe="LogicalExpression",Jwe="MemberExpression",eSe="ObjectExpression",tSe="Property",nSe="UnaryExpression",Hr="Unexpected token %0",rSe="Unexpected number",iSe="Unexpected string",oSe="Unexpected identifier",aSe="Unexpected reserved word",sSe="Unexpected end of input",mT="Invalid regular expression",dT="Invalid regular expression: missing /",bee="Octal literals are not allowed in strict mode.",cSe="Duplicate data property in object literal not allowed in strict mode",ei="ILLEGAL",Np="Disabled.",lSe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),uSe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function EC(e,t){if(!e)throw new Error("ASSERT: "+t)}function Ec(e){return e>=48&&e<=57}function yT(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Vp(e){return"01234567".indexOf(e)>=0}function fSe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function _p(e){return e===10||e===13||e===8232||e===8233}function Ip(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&lSe.test(String.fromCharCode(e))}function MC(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&uSe.test(String.fromCharCode(e))}var dSe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Mee(){for(;q<Hi;){let e=Me.charCodeAt(q);if(fSe(e)||_p(e))++q;else break}}function gT(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)q<Hi&&yT(Me[q])?(r=Me[q++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):zt({},Hr,ei);return String.fromCharCode(i)}function pSe(){var e,t,n,r;for(e=Me[q],t=0,e==="}"&&zt({},Hr,ei);q<Hi&&(e=Me[q++],!!yT(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&zt({},Hr,ei),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function wee(){var e,t;for(e=Me.charCodeAt(q++),t=String.fromCharCode(e),e===92&&(Me.charCodeAt(q)!==117&&zt({},Hr,ei),++q,e=gT("u"),(!e||e==="\\"||!Ip(e.charCodeAt(0)))&&zt({},Hr,ei),t=e);q<Hi&&(e=Me.charCodeAt(q),!!MC(e));)++q,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Me.charCodeAt(q)!==117&&zt({},Hr,ei),++q,e=gT("u"),(!e||e==="\\"||!MC(e.charCodeAt(0)))&&zt({},Hr,ei),t+=e);return t}function hSe(){var e,t;for(e=q++;q<Hi;){if(t=Me.charCodeAt(q),t===92)return q=e,wee();if(MC(t))++q;else break}return Me.slice(e,q)}function mSe(){var e,t,n;return e=q,t=Me.charCodeAt(q)===92?wee():hSe(),t.length===1?n=c0:dSe.hasOwnProperty(t)?n=f4:t==="null"?n=SC:t==="true"||t==="false"?n=wC:n=c0,{type:n,value:t,start:e,end:q}}function pT(){var e=q,t=Me.charCodeAt(q),n,r=Me[q],i,o,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++q,{type:k1,value:String.fromCharCode(t),start:e,end:q};default:if(n=Me.charCodeAt(q+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return q+=2,{type:k1,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:q};case 33:case 61:return q+=2,Me.charCodeAt(q)===61&&++q,{type:k1,value:Me.slice(e,q),start:e,end:q}}}if(a=Me.substr(q,4),a===">>>=")return q+=4,{type:k1,value:a,start:e,end:q};if(o=a.substr(0,3),o===">>>"||o==="<<="||o===">>=")return q+=3,{type:k1,value:o,start:e,end:q};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return q+=2,{type:k1,value:i,start:e,end:q};if(i==="//"&&zt({},Hr,ei),"<>=!+-*%&|^/".indexOf(r)>=0)return++q,{type:k1,value:r,start:e,end:q};zt({},Hr,ei)}function gSe(e){let t="";for(;q<Hi&&yT(Me[q]);)t+=Me[q++];return t.length===0&&zt({},Hr,ei),Ip(Me.charCodeAt(q))&&zt({},Hr,ei),{type:u0,value:parseInt("0x"+t,16),start:e,end:q}}function vSe(e){let t="0"+Me[q++];for(;q<Hi&&Vp(Me[q]);)t+=Me[q++];return(Ip(Me.charCodeAt(q))||Ec(Me.charCodeAt(q)))&&zt({},Hr,ei),{type:u0,value:parseInt(t,8),octal:!0,start:e,end:q}}function pee(){var e,t,n;if(n=Me[q],EC(Ec(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=q,e="",n!=="."){if(e=Me[q++],n=Me[q],e==="0"){if(n==="x"||n==="X")return++q,gSe(t);if(Vp(n))return vSe(t);n&&Ec(n.charCodeAt(0))&&zt({},Hr,ei)}for(;Ec(Me.charCodeAt(q));)e+=Me[q++];n=Me[q]}if(n==="."){for(e+=Me[q++];Ec(Me.charCodeAt(q));)e+=Me[q++];n=Me[q]}if(n==="e"||n==="E")if(e+=Me[q++],n=Me[q],(n==="+"||n==="-")&&(e+=Me[q++]),Ec(Me.charCodeAt(q)))for(;Ec(Me.charCodeAt(q));)e+=Me[q++];else zt({},Hr,ei);return Ip(Me.charCodeAt(q))&&zt({},Hr,ei),{type:u0,value:parseFloat(e),start:t,end:q}}function ySe(){var e="",t,n,r,i,o=!1;for(t=Me[q],EC(t==="'"||t==='"',"String literal must starts with a quote"),n=q,++q;q<Hi;)if(r=Me[q++],r===t){t="";break}else if(r==="\\")if(r=Me[q++],!r||!_p(r.charCodeAt(0)))switch(r){case"u":case"x":Me[q]==="{"?(++q,e+=pSe()):e+=gT(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Vp(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),q<Hi&&Vp(Me[q])&&(o=!0,i=i*8+"01234567".indexOf(Me[q++]),"0123".indexOf(r)>=0&&q<Hi&&Vp(Me[q])&&(i=i*8+"01234567".indexOf(Me[q++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Me[q]===`
`&&++q;else{if(_p(r.charCodeAt(0)))break;e+=r}return t!==""&&zt({},Hr,ei),{type:Tp,value:e,octal:o,start:n,end:q}}function xSe(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";zt({},mT)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{zt({},mT)}try{return new RegExp(e,t)}catch{return null}}function CSe(){var e,t,n,r,i;for(e=Me[q],EC(e==="/","Regular expression literal must start with a slash"),t=Me[q++],n=!1,r=!1;q<Hi;)if(e=Me[q++],t+=e,e==="\\")e=Me[q++],_p(e.charCodeAt(0))&&zt({},dT),t+=e;else if(_p(e.charCodeAt(0)))zt({},dT);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||zt({},dT),i=t.substr(1,t.length-2),{value:i,literal:t}}function bSe(){var e,t,n;for(t="",n="";q<Hi&&(e=Me[q],!!MC(e.charCodeAt(0)));)++q,e==="\\"&&q<Hi?zt({},Hr,ei):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&zt({},mT,n),{value:n,literal:t}}function MSe(){var e,t,n,r;return Ft=null,Mee(),e=q,t=CSe(),n=bSe(),r=xSe(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:q}}function wSe(e){return e.type===c0||e.type===f4||e.type===wC||e.type===SC}function See(){if(Mee(),q>=Hi)return{type:kp,start:q,end:q};let e=Me.charCodeAt(q);return Ip(e)?mSe():e===40||e===41||e===59?pT():e===39||e===34?ySe():e===46?Ec(Me.charCodeAt(q+1))?pee():pT():Ec(e)?pee():pT()}function T1(){let e=Ft;return q=e.end,Ft=See(),q=e.end,e}function Eee(){let e=q;Ft=See(),q=e}function SSe(e){let t=new U2(Wwe);return t.elements=e,t}function hee(e,t,n){let r=new U2(e==="||"||e==="&&"?Zwe:Ywe);return r.operator=e,r.left=t,r.right=n,r}function ESe(e,t){let n=new U2(Xwe);return n.callee=e,n.arguments=t,n}function DSe(e,t,n){let r=new U2(Qwe);return r.test=e,r.consequent=t,r.alternate=n,r}function xT(e){let t=new U2(Cee);return t.name=e,t}function Ap(e){let t=new U2(Kwe);return t.value=e.value,t.raw=Me.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function mee(e,t,n){let r=new U2(Jwe);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function zSe(e){let t=new U2(eSe);return t.properties=e,t}function gee(e,t,n){let r=new U2(tSe);return r.key=t,r.value=n,r.kind=e,r}function HSe(e,t){let n=new U2(nSe);return n.operator=e,n.argument=t,n.prefix=!0,n}function zt(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,a)=>(EC(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=q,n.description=i,n}function DC(e){e.type===kp&&zt(e,sSe),e.type===u0&&zt(e,rSe),e.type===Tp&&zt(e,iSe),e.type===c0&&zt(e,oSe),e.type===f4&&zt(e,aSe),zt(e,Hr,e.value)}function Li(e){let t=T1();(t.type!==k1||t.value!==e)&&DC(t)}function pn(e){return Ft.type===k1&&Ft.value===e}function hT(e){return Ft.type===f4&&Ft.value===e}function LSe(){let e=[];for(q=Ft.start,Li("[");!pn("]");)pn(",")?(T1(),e.push(null)):(e.push(l0()),pn("]")||Li(","));return T1(),SSe(e)}function vee(){q=Ft.start;let e=T1();return e.type===Tp||e.type===u0?(e.octal&&zt(e,bee),Ap(e)):xT(e.value)}function ASe(){var e,t,n,r;if(q=Ft.start,e=Ft,e.type===c0)return n=vee(),Li(":"),r=l0(),gee("init",n,r);if(e.type===kp||e.type===k1)DC(e);else return t=vee(),Li(":"),r=l0(),gee("init",t,r)}function VSe(){var e=[],t,n,r,i={},o=String;for(q=Ft.start,Li("{");!pn("}");)t=ASe(),t.key.type===Cee?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?zt({},cSe):i[r]=!0,e.push(t),pn("}")||Li(",");return Li("}"),zSe(e)}function NSe(){Li("(");let e=CT();return Li(")"),e}var _Se={if:1};function kSe(){var e,t,n;if(pn("("))return NSe();if(pn("["))return LSe();if(pn("{"))return VSe();if(e=Ft.type,q=Ft.start,e===c0||_Se[Ft.value])n=xT(T1().value);else if(e===Tp||e===u0)Ft.octal&&zt(Ft,bee),n=Ap(T1());else{if(e===f4)throw new Error(Np);e===wC?(t=T1(),t.value=t.value==="true",n=Ap(t)):e===SC?(t=T1(),t.value=null,n=Ap(t)):pn("/")||pn("/=")?(n=Ap(MSe()),Eee()):DC(T1())}return n}function TSe(){let e=[];if(Li("("),!pn(")"))for(;q<Hi&&(e.push(l0()),!pn(")"));)Li(",");return Li(")"),e}function ISe(){q=Ft.start;let e=T1();return wSe(e)||DC(e),xT(e.value)}function FSe(){return Li("."),ISe()}function RSe(){Li("[");let e=CT();return Li("]"),e}function OSe(){var e,t,n;for(e=kSe();;)if(pn("."))n=FSe(),e=mee(".",e,n);else if(pn("("))t=TSe(),e=ESe(e,t);else if(pn("["))n=RSe(),e=mee("[",e,n);else break;return e}function yee(){let e=OSe();if(Ft.type===k1&&(pn("++")||pn("--")))throw new Error(Np);return e}function bC(){var e,t;if(Ft.type!==k1&&Ft.type!==f4)t=yee();else{if(pn("++")||pn("--"))throw new Error(Np);if(pn("+")||pn("-")||pn("~")||pn("!"))e=T1(),t=bC(),t=HSe(e.value,t);else{if(hT("delete")||hT("void")||hT("typeof"))throw new Error(Np);t=yee()}}return t}function xee(e){let t=0;if(e.type!==k1&&e.type!==f4)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function PSe(){var e,t,n,r,i,o,a,s,c,l;if(e=Ft,c=bC(),r=Ft,i=xee(r),i===0)return c;for(r.prec=i,T1(),t=[e,Ft],a=bC(),o=[c,r,a];(i=xee(Ft))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,c=o.pop(),t.pop(),n=hee(s,c,a),o.push(n);r=T1(),r.prec=i,o.push(r),t.push(Ft),n=bC(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=hee(o[l-1].value,o[l-2],n),l-=2;return n}function l0(){var e,t,n;return e=PSe(),pn("?")&&(T1(),t=l0(),Li(":"),n=l0(),e=DSe(e,t,n)),e}function CT(){let e=l0();if(pn(","))throw new Error(Np);return e}function rf(e){Me=e,q=0,Hi=Me.length,Ft=null,Eee();let t=CT();if(Ft.type!==kp)throw new Error("Unexpect token after expression.");return t}var bT={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function MT(e){function t(a,s,c,l){let u=e(s[0]);return c&&(u=c+"("+u+")",c.lastIndexOf("new ",0)===0&&(u="("+u+")")),u+"."+a+(l<0?"":l===0?"()":"("+s.slice(1).map(e).join(",")+")")}function n(a,s,c){return l=>t(a,l,s,c)}let r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&B("Missing arguments to clamp function."),a.length>3&&B("Too many arguments to clamp function.");let s=a.map(e);return"Math.max("+s[1]+", Math.min("+s[2]+","+s[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(a){a.length<3&&B("Missing arguments to if function."),a.length>3&&B("Too many arguments to if function.");let s=a.map(e);return"("+s[0]+"?"+s[1]+":"+s[2]+")"}}}function $Se(e){let t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function zC(e){e=e||{};let t=e.allowed?pr(e.allowed):{},n=e.forbidden?pr(e.forbidden):{},r=e.constants||bT,i=(e.functions||MT)(f),o=e.globalvar,a=e.fieldvar,s=Ie(o)?o:h=>`${o}["${h}"]`,c={},l={},u=0;function f(h){if(Q(h))return h;let m=d[h.type];return m==null&&B("Unsupported type: "+h.type),m(h)}let d={Literal:h=>h.raw,Identifier:h=>{let m=h.name;return u>0?m:de(n,m)?B("Illegal identifier: "+m):de(r,m)?r[m]:de(t,m)?m:(c[m]=1,s(m))},MemberExpression:h=>{let m=!h.computed,g=f(h.object);m&&(u+=1);let v=f(h.property);return g===a&&(l[$Se(v)]=1),m&&(u-=1),g+(m?"."+v:"["+v+"]")},CallExpression:h=>{h.callee.type!=="Identifier"&&B("Illegal callee type: "+h.callee.type);let m=h.callee.name,g=h.arguments,v=de(i,m)&&i[m];return v||B("Unrecognized function: "+m),Ie(v)?v(g):v+"("+g.map(f).join(",")+")"},ArrayExpression:h=>"["+h.elements.map(f).join(",")+"]",BinaryExpression:h=>"("+f(h.left)+" "+h.operator+" "+f(h.right)+")",UnaryExpression:h=>"("+h.operator+f(h.argument)+")",ConditionalExpression:h=>"("+f(h.test)+"?"+f(h.consequent)+":"+f(h.alternate)+")",LogicalExpression:h=>"("+f(h.left)+h.operator+f(h.right)+")",ObjectExpression:h=>"{"+h.properties.map(f).join(",")+"}",Property:h=>{u+=1;let m=f(h.key);return u-=1,m+":"+f(h.value)}};function p(h){let m={code:f(h),globals:Object.keys(c),fields:Object.keys(l)};return c={},l={},m}return p.functions=i,p.constants=r,p}var Dee=Symbol("vega_selection_getter");function Aee(e){return(!e.getter||!e.getter[Dee])&&(e.getter=wr(e.field),e.getter[Dee]=!0),e.getter}var ST="intersect",zee="union",BSe="vlMulti",USe="vlPoint",Hee="or",jSe="and",is="_vgsid_",Fp=wr(is),qSe="E",GSe="R",WSe="R-E",YSe="R-LE",XSe="R-RE",HC="index:unit";function Lee(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,a,s;o<i;++o)if(s=n[o],a=Aee(s)(e),E2(a)&&(a=Bn(a)),E2(r[o])&&(r[o]=Bn(r[o])),F(r[o])&&E2(r[o][0])&&(r[o]=r[o].map(Bn)),s.type===qSe){if(F(r[o])?r[o].indexOf(a)<0:a!==r[o])return!1}else if(s.type===GSe){if(!M3(a,r[o]))return!1}else if(s.type===XSe){if(!M3(a,r[o],!0,!1))return!1}else if(s.type===WSe){if(!M3(a,r[o],!1,!1))return!1}else if(s.type===YSe&&!M3(a,r[o],!1,!0))return!1;return!0}function Vee(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[HC]&&r[HC].value:void 0,a=n===ST,s=i.length,c=0,l,u,f,d,p;c<s;++c)if(l=i[c],o&&a){if(u=u||{},f=u[d=l.unit]||0,f===-1)continue;if(p=Lee(t,l),u[d]=p?-1:++f,p&&o.size===1)return!0;if(!p&&f===o.get(d).count)return!1}else if(p=Lee(t,l),a^p)return p;return s&&a}var Nee=ro(Fp),QSe=Nee.left,KSe=Nee.right;function _ee(e,t,n){let r=this.context.data[e],i=r?r.values.value:[],o=r?r[HC]&&r[HC].value:void 0,a=n===ST,s=Fp(t),c=QSe(i,s);if(c===i.length||Fp(i[c])!==s)return!1;if(o&&a){if(o.size===1)return!0;if(KSe(i,s)-c<o.size)return!1}return!0}function kee(e,t){return e.map(n=>ke(t.fields?{values:t.fields.map(r=>Aee(r)(n.datum))}:{[is]:Fp(n.datum)},t))}function Tee(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],a={},s={},c={},l,u,f,d,p,h,m,g,v,y,C=o.length,b=0,M,S;b<C;++b)if(l=o[b],d=l.unit,u=l.fields,f=l.values,u&&f){for(M=0,S=u.length;M<S;++M)p=u[M],m=a[p.field]||(a[p.field]={}),g=m[d]||(m[d]=[]),c[p.field]=v=p.type.charAt(0),y=wT[`${v}_union`],m[d]=y(g,te(f[M]));n&&(g=s[d]||(s[d]=[]),g.push(te(f).reduce((w,E,D)=>(w[u[D].field]=E,w),{})))}else p=is,h=Fp(l),m=a[p]||(a[p]={}),g=m[d]||(m[d]=[]),g.push(h),n&&(g=s[d]||(s[d]=[]),g.push({[is]:h}));if(t=t||zee,a[is]?a[is]=wT[`${is}_${t}`](...Object.values(a[is])):Object.keys(a).forEach(w=>{a[w]=Object.keys(a[w]).map(E=>a[w][E]).reduce((E,D)=>E===void 0?D:wT[`${c[w]}_${t}`](E,D))}),o=Object.keys(s),n&&o.length){let w=r?USe:BSe;a[w]=t===zee?{[Hee]:o.reduce((E,D)=>(E.push(...s[D]),E),[])}:{[jSe]:o.map(E=>({[Hee]:s[E]}))}}return a}var wT={[`${is}_union`]:lv,[`${is}_intersect`]:cv,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Bn(t[0]),r=Bn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Bn(t[0]),r=Bn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}},ZSe=":",JSe="@";function LC(e,t,n,r){t[0].type!==Dc&&B("First argument to selection functions must be a string literal.");let i=t[0].value,o=t.length>=2&&Ge(t).value,a="unit",s=JSe+a,c=ZSe+i;o===ST&&!de(r,s)&&(r[s]=n.getData(i).indataRef(n,a)),de(r,c)||(r[c]=n.getData(i).tuplesRef())}function Oee(e){let t=this.context.data[e];return t?t.values.value:[]}function eEe(e,t,n){let r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function tEe(e,t){let n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(dr).insert(t)),1}function nEe(e,t,n){if(e){let r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}var Rp=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},rEe=Rp("format"),Pee=Rp("timeFormat"),iEe=Rp("utcFormat"),oEe=Rp("timeParse"),aEe=Rp("utcParse"),AC=new Date(2e3,0,1);function VC(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(AC.setYear(2e3),AC.setMonth(e),AC.setDate(t),Pee.call(this,AC,n))}function sEe(e){return VC.call(this,e,1,"%B")}function cEe(e){return VC.call(this,e,1,"%b")}function lEe(e){return VC.call(this,0,2+e,"%A")}function uEe(e){return VC.call(this,0,2+e,"%a")}var fEe=":",dEe="@",DT="%",$ee="$";function LT(e,t,n,r){t[0].type!==Dc&&B("First argument to data functions must be a string literal.");let i=t[0].value,o=fEe+i;if(!de(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function pEe(e,t,n,r){t[0].type!==Dc&&B("First argument to indata must be a string literal."),t[1].type!==Dc&&B("Second argument to indata must be a string literal.");let i=t[0].value,o=t[1].value,a=dEe+o;de(a,r)||(r[a]=n.getData(i).indataRef(n,o))}function u1(e,t,n,r){if(t[0].type===Dc)Iee(n,r,t[0].value);else for(e in n.scales)Iee(n,r,e)}function Iee(e,t,n){let r=DT+n;if(!de(t,r))try{t[r]=e.scaleRef(n)}catch{}}function os(e,t){if(Ie(e))return e;if(Q(e)){let n=t.scales[e];return n&&bX(n.value)?n.value:void 0}}function hEe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=u1,n._range=u1,n._scale=u1;let r=i=>"_["+(i.type===Dc?Z(DT+i.value):Z(DT)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function AT(e,t){return function(n,r,i){if(n){let o=os(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}var mEe=AT("area",FN),gEe=AT("bounds",ON),vEe=AT("centroid",jN);function yEe(e,t){let n=os(e,(t||this).context);return n&&n.scale()}function xEe(e){let t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function VT(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function CEe(){return VT(this.context.dataflow,"warn",arguments)}function bEe(){return VT(this.context.dataflow,"info",arguments)}function MEe(){return VT(this.context.dataflow,"debug",arguments)}function ET(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function zT(e){let t=jo(e),n=ET(t.r),r=ET(t.g),i=ET(t.b);return .2126*n+.7152*r+.0722*i}function wEe(e,t){let n=zT(e),r=zT(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function SEe(){let e=[].slice.call(arguments);return e.unshift({}),ke(...e)}function Bee(e,t){return e===t||e!==e&&t!==t?!0:F(e)?F(t)&&e.length===t.length?EEe(e,t):!1:ne(e)&&ne(t)?Uee(e,t):!1}function EEe(e,t){for(let n=0,r=e.length;n<r;++n)if(!Bee(e[n],t[n]))return!1;return!0}function Uee(e,t){for(let n in e)if(!Bee(e[n],t[n]))return!1;return!0}function Fee(e){return t=>Uee(e,t)}function DEe(e,t,n,r,i,o){let a=this.context.dataflow,s=this.context.data[e],c=s.input,l=a.stamp(),u=s.changes,f,d;if(a._trigger===!1||!(c.value.length||t||r))return 0;if((!u||u.stamp<l)&&(s.changes=u=a.changeset(),u.stamp=l,a.runAfter(()=>{s.modified=!0,a.pulse(c,u).run()},!0,1)),n&&(f=n===!0?dr:F(n)||wl(n)?n:Fee(n),u.remove(f)),t&&u.insert(t),r&&(f=Fee(r),c.value.some(f)?u.remove(f):u.insert(r)),i)for(d in o)u.modify(i,d,o[d]);return 1}function zEe(e){let t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function HEe(e){let t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}var Ree={};function LEe(e,t){let n=Ree[t]||(Ree[t]=wr(t));return F(e)?e.map(n):n(e)}function NT(e){return F(e)||ArrayBuffer.isView(e)?e:null}function _T(e){return NT(e)||(Q(e)?e:null)}function AEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return NT(e).join(...n)}function VEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _T(e).indexOf(...n)}function NEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _T(e).lastIndexOf(...n)}function _Ee(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _T(e).slice(...n)}function kEe(e,t,n){return Ie(n)&&B("Function argument passed to replace."),String(e).replace(t,n)}function TEe(e){return NT(e).slice().reverse()}function IEe(e,t,n){return d7(e||0,t||0,n||0)}function FEe(e,t){let n=os(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function REe(e,t){let n=os(e,(t||this).context);return n?n.copy():void 0}function OEe(e,t){let n=os(e,(t||this).context);return n?n.domain():[]}function PEe(e,t,n){let r=os(e,(n||this).context);return r?F(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function $Ee(e,t){let n=os(e,(t||this).context);return n&&n.range?n.range():[]}function BEe(e,t,n){let r=os(e,(n||this).context);return r?r(t):void 0}function UEe(e,t,n,r,i){e=os(e,(i||this).context);let o=$V(t,n),a=e.domain(),s=a[0],c=Ge(a),l=Vn;return c-s?l=Oy(e,s,c):e=(e.interpolator?dt("sequential")().interpolator(e.interpolator()):dt("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,c=1]),e.ticks&&(a=e.ticks(+r||15),s!==a[0]&&a.unshift(s),c!==Ge(a)&&a.push(c)),a.forEach(u=>o.stop(l(u),e(u))),o}function jEe(e,t,n){let r=os(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function qEe(e){let t=null;return function(n){return n?Hu(n,t=t||Wl(e)):e}}var jee=e=>e.data;function qee(e,t){let n=Oee.call(t,e);return n.root&&n.root.lookup||{}}function GEe(e,t,n){let r=qee(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(jee):void 0}function WEe(e,t){let n=qee(e,this)[t];return n?n.ancestors().map(jee):void 0}var Gee=()=>typeof window<"u"&&window||null;function YEe(){let e=Gee();return e?e.screen:{}}function XEe(){let e=Gee();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function QEe(){let e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Wee(e,t,n){if(!e)return[];let[r,i]=e,o=new Nn().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return mN(a,o,KEe(t))}function KEe(e){let t=null;if(e){let n=te(e.marktype),r=te(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function ZEe(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=te(e);let i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function JEe(e){return te(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function eDe(e,t,n){let{x:r,y:i,mark:o}=n,a=new Nn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(let[c,l]of t)c<a.x1&&(a.x1=c),c>a.x2&&(a.x2=c),l<a.y1&&(a.y1=l),l>a.y2&&(a.y2=l);return a.translate(r,i),Wee([[a.x1,a.y1],[a.x2,a.y2]],e,o).filter(c=>tDe(c.x,c.y,t))}function tDe(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){let[a,s]=n[o],[c,l]=n[i];l>t!=s>t&&e<(a-c)*(t-l)/(s-l)+c&&r++}return r&1}var of={random(){return e1()},cumulativeNormal:Id,cumulativeLogNormal:Fv,cumulativeUniform:$v,densityNormal:Nv,densityLogNormal:Iv,densityUniform:Pv,quantileNormal:Fd,quantileLogNormal:Rv,quantileUniform:Bv,sampleNormal:Td,sampleLogNormal:Tv,sampleUniform:Ov,isArray:F,isBoolean:D1,isDate:E2,isDefined(e){return e!==void 0},isNumber:Pe,isObject:ne,isRegExp:wH,isString:Q,isTuple:wl,isValid(e){return e!=null&&e===e},toBoolean:id,toDate(e){return od(e)},toNumber:Bn,toString:ad,indexof:VEe,join:AEe,lastindexof:NEe,replace:kEe,reverse:TEe,slice:_Ee,flush:bH,lerp:SH,merge:SEe,pad:zH,peek:Ge,pluck:LEe,span:Ks,inrange:M3,truncate:HH,rgb:jo,lab:P3,hcl:kl,hsl:_l,luminance:zT,contrast:wEe,sequence:Un,format:rEe,utcFormat:iEe,utcParse:aEe,utcOffset:hL,utcSequence:gL,timeFormat:Pee,timeParse:oEe,timeOffset:pL,timeSequence:mL,timeUnitSpecifier:oL,monthFormat:sEe,monthAbbrevFormat:cEe,dayFormat:lEe,dayAbbrevFormat:uEe,quarter:vH,utcquarter:yH,week:cL,utcweek:uL,dayofyear:sL,utcdayofyear:lL,warn:CEe,info:bEe,debug:MEe,extent(e){return Yi(e)},inScope:xEe,intersect:Wee,clampRange:xH,pinchDistance:zEe,pinchAngle:HEe,screen:YEe,containerSize:QEe,windowSize:XEe,bandspace:IEe,setdata:tEe,pathShape:qEe,panLinear:pH,panLog:hH,panPow:mH,panSymlog:gH,zoomLinear:K5,zoomLog:Z5,zoomPow:W6,zoomSymlog:J5,encode:nEe,modify:DEe,lassoAppend:ZEe,lassoPath:JEe,intersectLasso:eDe},nDe=["view","item","group","xy","x","y"],rDe="event.vega.",Yee="this.",kT={},Xee={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Z($ee+e)}]`,functions:iDe,constants:bT,visitors:kT},HT=zC(Xee);function iDe(e){let t=MT(e);nDe.forEach(n=>t[n]=rDe+n);for(let n in of)t[n]=Yee+n;return ke(t,hEe(e,of,kT)),t}function In(e,t,n){return arguments.length===1?of[e]:(of[e]=t,n&&(kT[e]=n),HT&&(HT.functions[e]=Yee+e),this)}In("bandwidth",FEe,u1);In("copy",REe,u1);In("domain",OEe,u1);In("range",$Ee,u1);In("invert",PEe,u1);In("scale",BEe,u1);In("gradient",UEe,u1);In("geoArea",mEe,u1);In("geoBounds",gEe,u1);In("geoCentroid",vEe,u1);In("geoShape",jEe,u1);In("geoScale",yEe,u1);In("indata",eEe,pEe);In("data",Oee,LT);In("treePath",GEe,LT);In("treeAncestors",WEe,LT);In("vlSelectionTest",Vee,LC);In("vlSelectionIdTest",_ee,LC);In("vlSelectionResolve",Tee,LC);In("vlSelectionTuples",kee);function j2(e,t){let n={},r;try{e=Q(e)?e:Z(e)+"",r=rf(e)}catch{B("Expression parse error: "+e)}r.visit(o=>{if(o.type!==vT)return;let a=o.callee.name,s=Xee.visitors[a];s&&s(a,o.arguments,t,n)});let i=HT(r);return i.globals.forEach(o=>{let a=$ee+o;!de(n,a)&&t.getSignal(o)&&(n[a]=t.signalRef(o))}),{$expr:ke({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function oDe(e){let t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}var aDe=pr(["rule"]),Qee=pr(["group","image","rect"]);function sDe(e,t){let n="";return aDe[t]||(e.x2&&(e.x?(Qee[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Qee[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function TT(e){return(e+"").toLowerCase()}function cDe(e){return TT(e)==="operator"}function lDe(e){return TT(e)==="collect"}function Op(e,t,n){n.endsWith(";")||(n="return("+n+");");let r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function uDe(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var fDe={operator:(e,t)=>Op(e,["_"],t.code),parameter:(e,t)=>Op(e,["datum","_"],t.code),event:(e,t)=>Op(e,["event"],t.code),handler:(e,t)=>{let n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Op(e,["_","event"],n)},encode:(e,t)=>{let{marktype:n,channels:r}=t,i="var o=item,datum=o.datum,m=0,$;";for(let o in r){let a="o["+Z(o)+"]";i+=`$=${r[o].code};if(${a}!==$)${a}=$,m=1;`}return i+=sDe(r,n),i+="return m;",Op(e,["item","_"],i)},codegen:{get(e){let t=`[${e.map(Z).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n,r=(o,a)=>{let s=t[a],c,l;return o.path?(c=`a${o.path}`,l=`b${o.path}`):((n=n||{})["f"+a]=o,c=`this.f${a}(a)`,l=`this.f${a}(b)`),uDe(c,l,-s,s)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function dDe(e){let t=this;cDe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function pDe(e){let t=this;if(e.params){let n=t.get(e.id);n||B("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function hDe(e,t){t=t||{};let n=this;for(let r in e){let i=e[r];t[r]=F(i)?i.map(o=>Kee(o,n,t)):Kee(i,n,t)}return t}function Kee(e,t,n){if(!e||!ne(e))return e;for(let r=0,i=Zee.length,o;r<i;++r)if(o=Zee[r],de(e,o.key))return o.parse(e,t,n);return e}var Zee=[{key:"$ref",parse:mDe},{key:"$key",parse:vDe},{key:"$expr",parse:gDe},{key:"$field",parse:yDe},{key:"$encode",parse:CDe},{key:"$compare",parse:xDe},{key:"$context",parse:bDe},{key:"$subflow",parse:MDe},{key:"$tupleid",parse:wDe}];function mDe(e,t){return t.get(e.$ref)||B("Operator not defined: "+e.$ref)}function gDe(e,t,n){e.$params&&t.parseParameters(e.$params,n);let r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Ci(t.parameterExpression(e.$expr),e.$fields))}function vDe(e,t){let n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=rd(e.$key,e.$flat,t.expr.codegen))}function yDe(e,t){if(!e.$field)return null;let n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=wr(e.$field,e.$name,t.expr.codegen))}function xDe(e,t){let n="c:"+e.$compare+"_"+e.$order,r=te(e.$compare).map(i=>i&&i.$tupleid?De:i);return t.fn[n]||(t.fn[n]=ed(r,e.$order,t.expr.codegen))}function CDe(e,t){let n=e.$encode,r={};for(let i in n){let o=n[i];r[i]=Ci(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function bDe(e,t){return t}function MDe(e,t){let n=e.$subflow;return function(r,i,o){let a=t.fork().parse(n),s=a.get(n.operators[0].id),c=a.signals.parent;return c&&c.set(o),s.detachSubflow=()=>t.detach(a),s}}function wDe(){return De}function SDe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&B("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function EDe(e){var t=this,n=ne(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,a=void 0;r||B("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(a=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,a)}var DDe={skip:!0};function zDe(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{let a=t.signals[o];e.signals(o,a)&&(r[o]=a.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{let a=t.data[o];e.data(o,a)&&(i[o]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function HDe(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],DDe)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(dr).insert(r[o]))}),(e.subcontext||[]).forEach((o,a)=>{let s=t.subcontext[a];s&&s.setState(o)})}function NC(e,t,n,r){return new ete(e,t,n,r)}function ete(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||fDe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Jee(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}ete.prototype=Jee.prototype={fork(){let e=new Jee(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);let t=Object.keys(e.nodes);for(let n of t)e.nodes[n]._targets=null;for(let n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){let n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),lDe(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(let o in e.data){let a=n.data[o]||(n.data[o]={});e.data[o].forEach(s=>a[s]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[TT(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:oDe,parseOperator:dDe,parseOperatorParameters:pDe,parseParameters:hDe,parseStream:SDe,parseUpdate:EDe,getState:zDe,setState:HDe};function LDe(e){let t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),lte(t,e.description()))}function lte(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function ADe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}var IT="default";function VDe(e){let t=e._signals.cursor||(e._signals.cursor=e.add({user:IT,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{let i=t.value,o=i?Q(i)?i:i.user:IT,a=r.item&&r.item.cursor||null;return i&&o===i.user&&a==i.item?i:{user:o,item:a}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Q(r)||(i=r.item,r=r.user),RT(e,r&&r!==IT?r:i||r),i},{cursor:t})}function RT(e,t){let n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function TC(e,t){var n=e._runtime.data;return de(n,t)||B("Unrecognized data set: "+t),n[t]}function NDe(e,t){return arguments.length<2?TC(this,e).values.value:FC.call(this,e,sc().remove(dr).insert(t))}function FC(e,t){VL(t)||B("Second argument to changes must be a changeset.");let n=TC(this,e);return n.modified=!0,this.pulse(n.input,t)}function _De(e,t){return FC.call(this,e,sc().insert(t))}function kDe(e,t){return FC.call(this,e,sc().remove(t))}function ute(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function fte(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function RC(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function TDe(e){var t=RC(e),n=ute(e),r=fte(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function IDe(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,a,s;return i&&(s=RC(e),a=t.changedTouches?t.changedTouches[0]:t,o=$7(a,i),o[0]-=s[0],o[1]-=s[1]),t.dataflow=e,t.item=n,t.vega=FDe(e,n,o),t}function FDe(e,t,n){let r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(a){var s=r,c;if(a){for(c=t;c;c=c.mark.group)if(c.mark.name===a){s=c;break}}return s&&s.mark&&s.mark.interactive?s:{}}function o(a){if(!a)return n;Q(a)&&(a=i(a));let s=n.slice();for(;a;)s[0]-=a.x||0,s[1]-=a.y||0,a=a.mark&&a.mark.group;return s}return{view:mn(e),item:mn(t||{}),group:i,xy:o,x:a=>o(a)[0],y:a=>o(a)[1]}}var tte="view",RDe="timer",ODe="window",PDe={trap:!1};function $De(e){let t=ke({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{F(r[o])&&(r[o]=pr(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function dte(e,t,n,r){e._eventListeners.push({type:n,sources:te(t),handler:r})}function BDe(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function _C(e,t,n){let r=e._eventConfig&&e._eventConfig[t];return r===!1||ne(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function UDe(e,t,n){var r=this,i=new cu(n),o=function(l,u){r.runAsync(null,()=>{e===tte&&BDe(r,t)&&l.preventDefault(),i.receive(IDe(r,l,u))})},a;if(e===RDe)_C(r,"timer",t)&&r.timer(o,t);else if(e===tte)_C(r,"view",t)&&r.addEventListener(t,o,PDe);else if(e===ODe?_C(r,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&_C(r,"selector",t)&&(a=Array.from(document.querySelectorAll(e))),!a)r.warn("Can not resolve event source: "+e);else{for(var s=0,c=a.length;s<c;++s)a[s].addEventListener(t,o);dte(r,a,t,o)}return i}function nte(e){return e.item}function rte(e){return e.item.mark.source}function ite(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function jDe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",nte),rte,ite(e)),this.on(this.events("view","pointerout",nte),rte,ite(t)),this}function qDe(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,o;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(o=n[r],i=o.sources.length;--i>=0;)o.sources[i].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this}function uo(e,t,n){let r=document.createElement(e);for(let i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}var GDe="vega-bind",WDe="vega-bind-name",YDe="vega-bind-radio";function XDe(e,t,n){if(!t)return;let r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,a)})}},r.debounce&&(i.update=nd(r.debounce,i.update))),(r.input==null&&r.element?QDe:ZDe)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function QDe(e,t,n,r){let i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),dte(r,t,i,o),e.set=a=>{t.value=a,t.dispatchEvent(KDe(i))}}function KDe(e){return typeof Event<"u"?new Event(e):{type:e}}function ZDe(e,t,n,r){let i=r.signal(n.signal),o=uo("div",{class:GDe}),a=n.input==="radio"?o:o.appendChild(uo("label"));a.appendChild(uo("span",{class:WDe},n.name||n.signal)),t.appendChild(o);let s=JDe;switch(n.input){case"checkbox":s=eze;break;case"select":s=tze;break;case"radio":s=nze;break;case"range":s=rze;break}s(e,a,n,i)}function JDe(e,t,n,r){let i=uo("input");for(let o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function eze(e,t,n,r){let i={type:"checkbox",name:n.signal};r&&(i.checked=!0);let o=uo("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=a=>o.checked=!!a||null}function tze(e,t,n,r){let i=uo("select",{name:n.signal}),o=n.labels||[];n.options.forEach((a,s)=>{let c={value:a};IC(a,r)&&(c.selected=!0),i.appendChild(uo("option",c,(o[s]||a)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=a=>{for(let s=0,c=n.options.length;s<c;++s)if(IC(n.options[s],a)){i.selectedIndex=s;return}}}function nze(e,t,n,r){let i=uo("span",{class:YDe}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((a,s)=>{let c={type:"radio",name:n.signal,value:a};IC(a,r)&&(c.checked=!0);let l=uo("input",c);l.addEventListener("change",()=>e.update(a));let u=uo("label",{},(o[s]||a)+"");return u.prepend(l),i.appendChild(u),l}),e.set=a=>{let s=e.elements,c=s.length;for(let l=0;l<c;++l)IC(s[l].value,a)&&(s[l].checked=!0)}}function rze(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;let i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||Xi(o,i,100),s=uo("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;let c=uo("span",{},+r);t.appendChild(s),t.appendChild(c);let l=()=>{c.textContent=s.value,e.update(+s.value)};s.addEventListener("input",l),s.addEventListener("change",l),e.elements=[s],e.set=u=>{s.value=u,c.textContent=u}}function IC(e,t){return e===t||e+""==t+""}function pte(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,ute(e),fte(e),RC(e),i,o).background(e.background())}function OT(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function ize(e,t,n,r){let i=new r(e.loader(),OT(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,RC(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function oze(e,t){let n=this,r=n._renderType,i=n._eventConfig.bind,o=B7(r);e=n._el=e?FT(n,e,!0):null,LDe(n),o||n.error("Unrecognized renderer type: "+r);let a=o.handler||hc,s=e?o.renderer:o.headless;return n._renderer=s?pte(n,n._renderer,e,s):null,n._handler=ize(n,n._handler,e,a),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=FT(n,t,!0):e.appendChild(uo("form",{class:"vega-bindings"})),n._bind.forEach(c=>{c.param.element&&i!=="container"&&(c.element=FT(n,c.param.element,!!c.param.input))}),n._bind.forEach(c=>{XDe(n,c.element||t,c)})),n}function FT(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}var Pp=e=>+e||0,aze=e=>({top:e,bottom:e,left:e,right:e});function ote(e){return ne(e)?{top:Pp(e.top),bottom:Pp(e.bottom),left:Pp(e.left),right:Pp(e.right)}:aze(Pp(e))}function PT(e,t,n,r){return qt(this,null,function*(){let i=B7(t),o=i&&i.headless;return o||B("Unrecognized renderer type: "+t),yield e.runAsync(),pte(e,null,null,o,n,r).renderAsync(e._scenegraph.root)})}function sze(e,t){return qt(this,null,function*(){e!==mc.Canvas&&e!==mc.SVG&&e!==mc.PNG&&B("Unrecognized image type: "+e);let n=yield PT(this,e,t);return e===mc.SVG?cze(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")})}function cze(e,t){let n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function lze(e,t){return qt(this,null,function*(){return(yield PT(this,mc.Canvas,e,t)).canvas()})}function uze(e){return qt(this,null,function*(){return(yield PT(this,mc.SVG,e)).svg()})}function fze(e,t,n){return NC(e,ac,of,n).parse(t)}function dze(e){var t=this._runtime.scales;return de(t,e)||B("Unrecognized scale or projection: "+e),t[e].value}var hte="width",mte="height",$T="padding",ate={skip:!0};function gte(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===$T?r.left+r.right:0)}function vte(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===$T?r.top+r.bottom:0)}function pze(e){var t=e._signals,n=t[hte],r=t[mte],i=t[$T];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,s=>{e._width=s.size,e._viewWidth=gte(e,s.size),o()},{size:n}),e._resizeHeight=e.add(null,s=>{e._height=s.size,e._viewHeight=vte(e,s.size),o()},{size:r});let a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function hze(e,t,n,r,i,o){this.runAfter(a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(hte,n,ate),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(mte,r,ate),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter(c=>c.resize())},!1,1)}function mze(e){return this._runtime.getState(e||{data:gze,signals:vze,recurse:!0})}function gze(e,t){return t.modified&&F(t.input.value)&&!e.startsWith("_:vega:_")}function vze(e,t){return!(e==="parent"||t instanceof ac.proxy)}function yze(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function xze(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(rk(n,t))}function Cze(e,t,n,r){let i=e.element();i&&i.setAttribute("title",bze(r))}function bze(e){return e==null?"":F(e)?yte(e):ne(e)&&!E2(e)?Mze(e):e+""}function Mze(e){return Object.keys(e).map(t=>{let n=e[t];return t+": "+(F(n)?yte(n):xte(n))}).join(`
`)}function yte(e){return"["+e.map(xte).join(", ")+"]"}function xte(e){return F(e)?"[\u2026]":ne(e)&&!E2(e)?"{\u2026}":e}function wze(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null,t=()=>{e?.();let n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function BT(e,t){let n=this;if(t=t||{},N3.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){let o=ke({},e.locale,t.locale);n.locale(yv(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||mc.Canvas,n._scenegraph=new gx;let r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Cze,n._redraw=!0,n._handler=new hc().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=$De(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);let i=fze(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:ke({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=gte(n,n._width),n._viewHeight=vte(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,pze(n),ADe(n),VDe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function kC(e,t){return de(e._signals,t)?e._signals[t]:B("Unrecognized signal name: "+Z(t))}function Cte(e,t){let n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function ste(e,t,n,r){let i=Cte(n,r);return i||(i=OT(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function cte(e,t,n){let r=Cte(t,n);return r&&t._targets.remove(r),e}ee(BT,N3,{evaluate(e,t,n){return qt(this,null,function*(){if(yield N3.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,TDe(this)),yield this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&Nd(this,n),this})},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){let t=e!=null?e+"":null;return t!==this._desc&&lte(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){let r=kC(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",ote(e)):ote(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(B7(e)||B("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(N3.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(kC(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:hze,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=OT(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){let t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return ste(this,e,kC(this,e),t)},removeSignalListener(e,t){return cte(this,kC(this,e),t)},addDataListener(e,t){return ste(this,e,TC(this,e).values,t)},removeDataListener(e,t){return cte(this,TC(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){let t=RT(this,null);this._globalCursor=!!e,t&&RT(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:xze,events:UDe,finalize:qDe,hover:jDe,data:NDe,change:FC,insert:_De,remove:kDe,scale:dze,initialize:oze,toImageURL:sze,toCanvas:lze,toSVG:uze,getState:mze,setState:yze,_watchPixelRatio:wze});var Sze="view",OC="[",PC="]",bte="{",Mte="}",Eze=":",wte=",",Dze="@",zze=">",Hze=/[[\]{}]/,Lze={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Ste,Ete;function Ai(e,t,n){return Ste=t||Sze,Ete=n||Lze,Dte(e.trim()).map(UT)}function Aze(e){return Ete[e]}function $p(e,t,n,r,i){let o=e.length,a=0,s;for(;t<o;++t){if(s=e[t],!a&&s===n)return t;i&&i.indexOf(s)>=0?--a:r&&r.indexOf(s)>=0&&++a}return t}function Dte(e){let t=[],n=e.length,r=0,i=0;for(;i<n;)i=$p(e,i,wte,OC+bte,PC+Mte),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function UT(e){return e[0]==="["?Vze(e):Nze(e)}function Vze(e){let t=e.length,n=1,r;if(n=$p(e,n,PC,OC,PC),n===t)throw"Empty between selector: "+e;if(r=Dte(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==zze)throw"Expected '>' after between selector: "+e;r=r.map(UT);let i=UT(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Nze(e){let t={source:Ste},n=[],r=[0,0],i=0,o=0,a=e.length,s=0,c,l;if(e[a-1]===Mte){if(s=e.lastIndexOf(bte),s>=0){try{r=_ze(e.substring(s+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,s).trim(),a=e.length}else throw"Unmatched right brace: "+e;s=0}if(!a)throw e;if(e[0]===Dze&&(i=++s),c=$p(e,s,Eze),c<a&&(n.push(e.substring(o,c).trim()),o=s=++c),s=$p(e,s,OC),s===a)n.push(e.substring(o,a).trim());else if(n.push(e.substring(o,s).trim()),l=[],o=++s,o===a)throw"Unmatched left bracket: "+e;for(;s<a;){if(s=$p(e,s,PC),s===a)throw"Unmatched left bracket: "+e;if(l.push(e.substring(o,s).trim()),s<a-1&&e[++s]!==OC)throw"Expected left bracket: "+e;o=++s}if(!(a=n.length)||Hze.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],i?t.markname=n[0].slice(1):Aze(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function _ze(e){let t=e.split(wte);if(!e.length||t.length>2)throw e;return t.map(n=>{let r=+n;if(r!==r)throw e;return r})}function kze(e){return ne(e)?e:{type:e||"pad"}}var Bp=e=>+e||0,Tze=e=>({top:e,bottom:e,left:e,right:e});function Ize(e){return ne(e)?e.signal?e:{top:Bp(e.top),bottom:Bp(e.bottom),left:Bp(e.left),right:Bp(e.right)}:Tze(Bp(e))}var Lr=e=>ne(e)&&!F(e)?ke({},e):{value:e};function zte(e,t,n,r){return n!=null?(ne(n)&&!F(n)||F(n)&&n.length&&ne(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function ti(e,t,n){for(let r in t)zte(e,r,t[r]);for(let r in n)zte(e,r,n[r],"update")}function ff(e,t,n){for(let r in t)n&&de(n,r)||(e[r]=ke(e[r]||{},t[r]));return e}function sf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}var eI="mark",tI="frame",nI="scope",Fze="axis",Rze="axis-domain",Oze="axis-grid",Pze="axis-label",$ze="axis-tick",Bze="axis-title",Uze="legend",jze="legend-band",qze="legend-entry",Gze="legend-gradient",Gte="legend-label",Wze="legend-symbol",Yze="legend-title",Xze="title",Qze="title-text",Kze="title-subtitle";function Zze(e,t,n,r,i){let o={},a={},s,c,l,u;c="lineBreak",t==="text"&&i[c]!=null&&!sf(c,e)&&jT(o,c,i[c]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),u=n===tI?i.group:n===eI?ke({},i.mark,i[t]):null;for(c in u)l=sf(c,e)||(c==="fill"||c==="stroke")&&(sf("fill",e)||sf("stroke",e)),l||jT(o,c,u[c]);te(r).forEach(f=>{let d=i.style&&i.style[f];for(let p in d)sf(p,e)||jT(o,p,d[p])}),e=ke({},e);for(c in o)u=o[c],u.signal?(s=s||{})[c]=u:a[c]=u;return e.enter=ke(a,e.enter),s&&(e.update=ke(s,e.update)),e}function jT(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}var Wte=e=>Q(e)?Z(e):e.signal?`(${e.signal})`:Yte(e);function YC(e){if(e.gradient!=null)return eHe(e);let t=e.signal?`(${e.signal})`:e.color?Jze(e.color):e.field!=null?Yte(e.field):e.value!==void 0?Z(e.value):void 0;return e.scale!=null&&(t=tHe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${BC(e.exponent)})`),e.mult!=null&&(t+=`*${BC(e.mult)}`),e.offset!=null&&(t+=`+${BC(e.offset)}`),e.round&&(t=`round(${t})`),t}var $C=(e,t,n,r)=>`(${e}(${[t,n,r].map(YC).join(",")})+'')`;function Jze(e){return e.c?$C("hcl",e.h,e.c,e.l):e.h||e.s?$C("hsl",e.h,e.s,e.l):e.l||e.a?$C("lab",e.l,e.a,e.b):e.r||e.g||e.b?$C("rgb",e.r,e.g,e.b):null}function eHe(e){let t=[e.start,e.stop,e.count].map(n=>n==null?null:Z(n));for(;t.length&&Ge(t)==null;)t.pop();return t.unshift(Wte(e.gradient)),`gradient(${t.join(",")})`}function BC(e){return ne(e)?"("+YC(e)+")":e}function Yte(e){return Xte(ne(e)?e:{datum:e})}function Xte(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):B("Invalid field reference: "+Z(e));return e.signal||(r=Q(r)?Io(r).map(Z).join("]["):Xte(r)),t+"["+r+"]"}function tHe(e,t){let n=Wte(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+BC(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function nHe(e){let t="";return e.forEach(n=>{let r=YC(n);t+=n.test?`(${n.test})?${r}:`:r}),Ge(t)===":"&&(t+="null"),t}function Qte(e,t,n,r,i,o){let a={};o=o||{},o.encoders={$encode:a},e=Zze(e,t,n,r,i.config);for(let s in e)a[s]=rHe(e[s],t,o,i);return o}function rHe(e,t,n,r){let i={},o={};for(let a in e)e[a]!=null&&(i[a]=oHe(iHe(e[a]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function iHe(e){return F(e)?nHe(e):YC(e)}function oHe(e,t,n,r){let i=j2(e,t);return i.$fields.forEach(o=>r[o]=1),ke(n,i.$params),i.$expr}var aHe="outer",sHe=["value","update","init","react","bind"];function Hte(e,t){B(e+' for "outer" push: '+Z(t))}function Kte(e,t){let n=e.name;if(e.push===aHe)t.signals[n]||Hte("No prior signal definition",n),sHe.forEach(r=>{e[r]!==void 0&&Hte("Invalid property ",r)});else{let r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function WT(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function XC(e,t,n,r){return new WT(e,t,n,r)}function WC(e,t){return XC("operator",e,t)}function Ne(e){let t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function qp(e,t){return t?{$field:e,$name:t}:{$field:e}}var YT=qp("key");function Lte(e,t){return{$compare:e,$order:t}}function cHe(e,t){let n={$key:e};return t&&(n.$flat=!0),n}var lHe="ascending",uHe="descending";function fHe(e){return ne(e)?(e.order===uHe?"-":"+")+QC(e.op,e.field):""}function QC(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}var rI="scope",XT="view";function vr(e){return e&&e.signal}function dHe(e){return e&&e.expr}function UC(e){if(vr(e))return!0;if(ne(e)){for(let t in e)if(UC(e[t]))return!0}return!1}function q2(e,t){return e??t}function d0(e){return e&&e.signal||e}var Ate="timer";function Gp(e,t){return(e.merge?hHe:e.stream?mHe:e.type?gHe:B("Invalid stream specification: "+Z(e)))(e,t)}function pHe(e){return e===rI?XT:e||XT}function hHe(e,t){let n=e.merge.map(i=>Gp(i,t)),r=iI({merge:n},e,t);return t.addStream(r).id}function mHe(e,t){let n=Gp(e.stream,t),r=iI({stream:n},e,t);return t.addStream(r).id}function gHe(e,t){let n;e.type===Ate?(n=t.event(Ate,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(pHe(e.source),e.type);let r=iI({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function iI(e,t,n){let r=t.between;return r&&(r.length!==2&&B('Stream "between" parameter must have 2 entries: '+Z(t)),e.between=[Gp(r[0],n),Gp(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(vHe(t.marktype,t.markname,t.markrole)),t.source===rI&&r.push("inScope(event.item)"),r.length&&(e.filter=j2("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function vHe(e,t,n){let r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}var yHe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function xHe(e,t,n){let r=e.encode,i={target:n},o=e.events,a=e.update,s=[];o||B("Signal update missing events specification."),Q(o)&&(o=Ai(o,t.isSubscope()?rI:XT)),o=te(o).filter(c=>c.signal||c.scale?(s.push(c),0):1),s.length>1&&(s=[bHe(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),r!=null&&(a&&B("Signal encode and update are mutually exclusive."),a="encode(item(),"+Z(r)+")"),i.update=Q(a)?j2(a,t):a.expr!=null?j2(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:yHe,$params:{$value:t.signalRef(a.signal)}}:B("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach(c=>t.addUpdate(ke(CHe(c,t),i)))}function CHe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Gp(e,t)}}function bHe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function MHe(e,t){let n=t.getSignal(e.name),r=e.update;e.init&&(r?B("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=j2(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>xHe(i,t,n.id))}var Ut=e=>(t,n,r)=>XC(e,n,t||void 0,r),Zte=Ut("aggregate"),wHe=Ut("axisticks"),Jte=Ut("bound"),W2=Ut("collect"),Vte=Ut("compare"),SHe=Ut("datajoin"),ene=Ut("encode"),EHe=Ut("expression"),DHe=Ut("facet"),zHe=Ut("field"),HHe=Ut("key"),LHe=Ut("legendentries"),AHe=Ut("load"),VHe=Ut("mark"),NHe=Ut("multiextent"),_He=Ut("multivalues"),kHe=Ut("overlap"),THe=Ut("params"),tne=Ut("prefacet"),IHe=Ut("projection"),FHe=Ut("proxy"),RHe=Ut("relay"),nne=Ut("render"),OHe=Ut("scale"),h0=Ut("sieve"),PHe=Ut("sortitems"),rne=Ut("viewlayout"),$He=Ut("values"),BHe=0,ine={min:"min",max:"max",count:"sum"};function UHe(e,t){let n=e.type||"linear";pV(n)||B("Unrecognized scale type: "+Z(n)),t.addScale(e.name,{type:n,domain:void 0})}function jHe(e,t){let n=t.getScale(e.name).params,r;n.domain=one(e.domain,e,t),e.range!=null&&(n.range=sne(e,t,n)),e.interpolate!=null&&eLe(e.interpolate,n),e.nice!=null&&(n.nice=JHe(e.nice,t)),e.bins!=null&&(n.bins=ZHe(e.bins,t));for(r in e)de(n,r)||r==="name"||(n[r]=Qo(e[r],t))}function Qo(e,t){return ne(e)?e.signal?t.signalRef(e.signal):B("Unsupported object: "+Z(e)):e}function jC(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Qo(n,t))}function KC(e){B("Can not find data set: "+Z(e))}function one(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&B("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(F(e)?qHe:e.fields?WHe:GHe)(e,t,n)}function qHe(e,t,n){return e.map(r=>Qo(r,n))}function GHe(e,t,n){let r=n.getData(e.data);return r||KC(e.data),j3(t.type)?r.valuesRef(n,e.field,ane(e.sort,!1)):gV(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function WHe(e,t,n){let r=e.data,i=e.fields.reduce((o,a)=>(a=Q(a)?{data:r,field:a}:F(a)||a.signal?YHe(a,n):a,o.push(a),o),[]);return(j3(t.type)?XHe:gV(t.type)?QHe:KHe)(e,n,i)}function YHe(e,t){let n="_:vega:_"+BHe++,r=W2({});if(F(e))r.value={$ingest:e};else if(e.signal){let i="setdata("+Z(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,h0({})]),{data:n,field:"data"}}function XHe(e,t,n){let r=ane(e.sort,!0),i,o,a=n.map(l=>{let u=t.getData(l.data);return u||KC(l.data),u.countsRef(t,l.field,r)}),s={groupby:YT,pulse:a};r&&(i=r.op||"count",o=r.field?QC(i,r.field):"count",s.ops=[ine[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(Zte(s));let c=t.add(W2({pulse:Ne(i)}));return o=t.add($He({field:YT,sort:t.sortRef(r),pulse:Ne(c)})),Ne(o)}function ane(e,t){return e&&(!e.field&&!e.op?ne(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?B("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!ine[e.op]&&B("Multiple domain scales can not be sorted using "+e.op)),e}function QHe(e,t,n){let r=n.map(i=>{let o=t.getData(i.data);return o||KC(i.data),o.domainRef(t,i.field)});return Ne(t.add(_He({values:r})))}function KHe(e,t,n){let r=n.map(i=>{let o=t.getData(i.data);return o||KC(i.data),o.extentRef(t,i.field)});return Ne(t.add(NHe({extents:r})))}function ZHe(e,t){return e.signal||F(e)?jC(e,t):t.objectProperty(e)}function JHe(e,t){return e.signal?t.signalRef(e.signal):ne(e)?{interval:Qo(e.interval),step:Qo(e.step)}:Qo(e)}function eLe(e,t){t.interpolate=Qo(e.type||e),e.gamma!=null&&(t.interpolateGamma=Qo(e.gamma))}function sne(e,t,n){let r=t.config.range,i=e.range;if(i.signal)return t.signalRef(i.signal);if(Q(i)){if(r&&de(r,i))return e=ke({},e,{range:r[i]}),sne(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=j3(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:B("Unrecognized scale range value: "+Z(i))}else if(i.scheme){n.scheme=F(i.scheme)?jC(i.scheme,t):Qo(i.scheme,t),i.extent&&(n.schemeExtent=jC(i.extent,t)),i.count&&(n.schemeCount=Qo(i.count,t));return}else if(i.step){n.rangeStep=Qo(i.step,t);return}else{if(j3(e.type)&&!F(i))return one(i,e,t);F(i)||B("Unsupported range type: "+Z(i))}return i.map(o=>(F(o)?jC:Qo)(o,t))}function tLe(e,t){let n=t.config.projection||{},r={};for(let i in e)i!=="name"&&(r[i]=QT(e[i],i,t));for(let i in n)r[i]==null&&(r[i]=QT(n[i],i,t));t.addProjection(e.name,r)}function QT(e,t,n){return F(e)?e.map(r=>QT(r,t,n)):ne(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:B("Unsupported parameter object: "+Z(e)):e}var Y2="top",df="left",pf="right",d4="bottom",cne="center",nLe="vertical",rLe="start",iLe="middle",oLe="end",KT="index",oI="label",aLe="offset",uf="perc",sLe="perc2",Ko="value",Yp="guide-label",aI="guide-title",cLe="group-title",lLe="group-subtitle",Nte="symbol",qC="gradient",ZT="discrete",JT="size",uLe="shape",fLe="fill",dLe="stroke",pLe="strokeWidth",hLe="strokeDash",mLe="opacity",sI=[JT,uLe,fLe,dLe,pLe,hLe,mLe],Xp={name:1,style:1,interactive:1},xt={value:0},Zo={value:1},ZC="group",lne="rect",cI="rule",gLe="symbol",m0="text";function Wp(e){return e.type=ZC,e.interactive=e.interactive||!1,e}function I1(e,t){let n=(r,i)=>q2(e[r],q2(t[r],i));return n.isVertical=r=>nLe===q2(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>q2(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>q2(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>q2(e.columns,q2(t.columns,+n.isVertical(!0))),n}function une(e,t){let n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function vLe(e,t,n){let r=t.config.style[n];return r&&r[e]}function JC(e,t,n){return`item.anchor === '${rLe}' ? ${e} : item.anchor === '${oLe}' ? ${t} : ${n}`}var lI=JC(Z(df),Z(pf),Z(cne));function yLe(e){let t=e("tickBand"),n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ne(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function fne(e,t){return t?e?ne(e)?Object.assign({},e,{offset:fne(e.offset,t)}):{value:e,offset:t}:t:e}function fo(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=ff(e.encode,t,Xp)):e.interactive=!1,e}function xLe(e,t,n,r){let i=I1(e,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength(),c,l,u,f,d;o?(l=[0,1],u=[0,0],f=a,d=s):(l=[0,0],u=[1,0],f=s,d=a);let p={enter:c={opacity:xt,x:xt,y:xt,width:Lr(f),height:Lr(d)},update:ke({},c,{opacity:Zo,fill:{gradient:t,start:l,stop:u}}),exit:{opacity:xt}};return ti(p,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),fo({type:lne,role:Gze,encode:p},r)}function CLe(e,t,n,r,i){let o=I1(e,n),a=o.isVertical(),s=o.gradientThickness(),c=o.gradientLength(),l,u,f,d,p="";a?(l="y",f="y2",u="x",d="width",p="1-"):(l="x",f="x2",u="y",d="height");let h={opacity:xt,fill:{scale:t,field:Ko}};h[l]={signal:p+"datum."+uf,mult:c},h[u]=xt,h[f]={signal:p+"datum."+sLe,mult:c},h[d]=Lr(s);let m={enter:h,update:ke({},h,{opacity:Zo}),exit:{opacity:xt}};return ti(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),fo({type:lne,role:jze,key:Ko,from:i,encode:m},r)}var bLe=`datum.${uf}<=0?"${df}":datum.${uf}>=1?"${pf}":"${cne}"`,MLe=`datum.${uf}<=0?"${d4}":datum.${uf}>=1?"${Y2}":"${iLe}"`;function _te(e,t,n,r){let i=I1(e,t),o=i.isVertical(),a=Lr(i.gradientThickness()),s=i.gradientLength(),c=i("labelOverlap"),l,u,f,d,p="",h={enter:l={opacity:xt},update:u={opacity:Zo,text:{field:oI}},exit:{opacity:xt}};return ti(h,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:q2(e.labelLimit,t.gradientLabelLimit)}),o?(l.align={value:"left"},l.baseline=u.baseline={signal:MLe},f="y",d="x",p="1-"):(l.align=u.align={signal:bLe},l.baseline={value:"top"},f="x",d="y"),l[f]=u[f]={signal:p+"datum."+uf,mult:s},l[d]=u[d]=a,a.offset=q2(e.labelOffset,t.gradientLabelOffset)||0,c=c?{separation:i("labelSeparation"),method:c,order:"datum."+KT}:void 0,fo({type:m0,role:Gte,style:Yp,key:Ko,from:r,encode:h,overlap:c},n)}function wLe(e,t,n,r,i){let o=I1(e,t),a=n.entries,s=!!(a&&a.interactive),c=a?a.name:void 0,l=o("clipHeight"),u=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${aLe} : datum.${JT}`,p=l?Lr(l):{field:JT},h=`datum.${KT}`,m=`max(1, ${i})`,g,v,y,C,b;p.mult=.5,g={enter:v={opacity:xt,x:{signal:d,mult:.5,offset:u},y:p},update:y={opacity:Zo,x:v.x,y:v.y},exit:{opacity:xt}};let M=null,S=null;e.fill||(M=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),ti(g,{fill:o("symbolFillColor",M),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",S),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),sI.forEach(z=>{e[z]&&(y[z]=v[z]={scale:e[z],field:Ko})});let w=fo({type:gLe,role:Wze,key:Ko,from:f,clip:l?!0:void 0,encode:g},n.symbols),E=Lr(u);E.offset=o("labelOffset"),g={enter:v={opacity:xt,x:{signal:d,offset:E},y:p},update:y={opacity:Zo,text:{field:oI},x:v.x,y:v.y},exit:{opacity:xt}},ti(g,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});let D=fo({type:m0,role:Gte,style:Yp,key:Ko,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:xt,height:l?Lr(l):xt,opacity:xt},exit:{opacity:xt},update:y={opacity:Zo,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(C=`ceil(item.mark.items.length / ${m})`,y.row.signal=`${h}%${C}`,y.column.signal=`floor(${h} / ${C})`,b={field:["row",h]}):(y.row.signal=`floor(${h} / ${m})`,y.column.signal=`${h} % ${m}`,b={field:h}),y.column.signal=`(${i})?${y.column.signal}:${h}`,r={facet:{data:r,name:"value",groupby:KT}},Wp({role:nI,from:r,encode:ff(g,a,Xp),marks:[w,D],name:c,interactive:s,sort:b})}function SLe(e,t){let n=I1(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}var uI='item.orient === "left"',fI='item.orient === "right"',eb=`(${uI} || ${fI})`,ELe=`datum.vgrad && ${eb}`,DLe=JC('"top"','"bottom"','"middle"'),zLe=JC('"right"','"left"','"center"'),HLe=`datum.vgrad && ${fI} ? (${zLe}) : (${eb} && !(datum.vgrad && ${uI})) ? "left" : ${lI}`,LLe=`item._anchor || (${eb} ? "middle" : "start")`,ALe=`${ELe} ? (${uI} ? -90 : 90) : 0`,VLe=`${eb} ? (datum.vgrad ? (${fI} ? "bottom" : "top") : ${DLe}) : "top"`;function NLe(e,t,n,r){let i=I1(e,t),o={enter:{opacity:xt},update:{opacity:Zo,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:xt}};return ti(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:LLe},angle:{signal:ALe},align:{signal:HLe},baseline:{signal:VLe},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),fo({type:m0,role:Yze,style:aI,from:r,encode:o},n)}function _Le(e,t){let n;return ne(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+kte(e.path)+")":e.sphere&&(n="geoShape("+kte(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function kte(e){return ne(e)&&e.signal?e.signal:Z(e)}function dne(e){let t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===ZC?nI:t||eI}function kLe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||dne(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function TLe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function dI(e,t){let n=Hv(e.type);n||B("Unrecognized transform type: "+Z(e.type));let r=XC(n.type.toLowerCase(),null,pne(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function pne(e,t,n){let r={},i=e.params.length;for(let o=0;o<i;++o){let a=e.params[o];r[a.name]=ILe(a,t,n)}return r}function ILe(e,t,n){let r=e.type,i=t[e.name];if(r==="index")return FLe(e,t,n);if(i===void 0){e.required&&B("Missing required "+Z(t.type)+" parameter: "+Z(e.name));return}else{if(r==="param")return RLe(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!vr(i)?i.map(o=>Tte(e,o,n)):Tte(e,i,n)}function Tte(e,t,n){let r=e.type;if(vr(t))return Fte(r)?B("Expression references can not be signals."):qT(r)?n.fieldRef(t):Rte(r)?n.compareRef(t):n.signalRef(t.signal);{let i=e.expr||qT(r);return i&&OLe(t)?n.exprRef(t.expr,t.as):i&&PLe(t)?qp(t.field,t.as):Fte(r)?j2(t,n):$Le(r)?Ne(n.getData(t).values):qT(r)?qp(t):Rte(r)?n.compareRef(t):t}}function FLe(e,t,n){return Q(t.from)||B('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function RLe(e,t,n){let r=t[e.name];return e.array?(F(r)||B("Expected an array of sub-parameters. Instead: "+Z(r)),r.map(i=>Ite(e,i,n))):Ite(e,r,n)}function Ite(e,t,n){let r=e.params.length,i;for(let a=0;a<r;++a){i=e.params[a];for(let s in i.key)if(i.key[s]!==t[s]){i=null;break}if(i)break}i||B("Unsupported parameter: "+Z(t));let o=ke(pne(i,t,n),i.key);return Ne(n.add(THe(o)))}var OLe=e=>e&&e.expr,PLe=e=>e&&e.field,$Le=e=>e==="data",Fte=e=>e==="expr",qT=e=>e==="field",Rte=e=>e==="compare";function BLe(e,t,n){let r,i,o,a,s;return e?(r=e.facet)&&(t||B("Only group marks can be faceted."),r.field!=null?a=s=GC(r,n):(e.data?s=Ne(n.getData(e.data).aggregate):(o=dI(ke({type:"aggregate",groupby:te(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=GC(r,n),a=s=Ne(n.add(o))),i=n.keyRef(r.groupby,!0))):a=Ne(n.add(W2(null,[{}]))),a||(a=GC(e,n)),{key:i,pulse:a,parent:s}}function GC(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ne(t.getData(e.data).output)}function p0(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}p0.fromEntries=function(e,t){let n=t.length,r=t[n-1],i=t[n-2],o=t[0],a=null,s=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=Ne(t[s-1]),e.add(t[s]),t[s].type==="aggregate"&&(a=t[s]);return new p0(e,o,i,r,a)};function hne(e){return Q(e)?e:null}function Ote(e,t,n){let r=QC(n.op,n.field),i;if(t.ops){for(let o=0,a=t.as.length;o<a;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function Up(e,t,n,r,i,o,a){let s=t[n]||(t[n]={}),c=fHe(o),l=hne(i),u,f;if(l!=null&&(e=t.scope,l=l+(c?"|"+c:""),u=s[l]),!u){let d=o?{field:YT,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:Ne(t.output)};c&&(d.sort=e.sortRef(o)),f=e.add(XC(r,void 0,d)),a&&(t.index[i]=f),u=Ne(f),l!=null&&(s[l]=u)}return u}p0.prototype={countsRef(e,t,n){let r=this,i=r.counts||(r.counts={}),o=hne(t),a,s,c;return o!=null&&(e=r.scope,a=i[o]),a?n&&n.field&&Ote(e,a.agg.params,n):(c={groupby:e.fieldRef(t,"key"),pulse:Ne(r.output)},n&&n.field&&Ote(e,c,n),s=e.add(Zte(c)),a=e.add(W2({pulse:Ne(s)})),a={agg:s,ref:Ne(a)},o!=null&&(i[o]=a)),a.ref},tuplesRef(){return Ne(this.values)},extentRef(e,t){return Up(e,this,"extent","extent",t,!1)},domainRef(e,t){return Up(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Up(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Up(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Up(e,this,"indata","tupleindex",t,!0,!0)}};function ULe(e,t,n){let r=e.from.facet,i=r.name,o=GC(r,t),a;r.name||B("Facet must have a name: "+Z(r)),r.data||B("Facet must reference a data set: "+Z(r)),r.field?a=t.add(tne({field:t.fieldRef(r.field),pulse:o})):r.groupby?a=t.add(DHe({key:t.keyRef(r.groupby),group:Ne(t.proxy(n.parent)),pulse:o})):B("Facet must specify groupby or field: "+Z(r));let s=t.fork(),c=s.add(W2()),l=s.add(h0({pulse:Ne(c)}));s.addData(i,new p0(s,c,c,l)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}function jLe(e,t,n){let r=t.add(tne({pulse:n.pulse})),i=t.fork();i.add(h0()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function mne(e,t,n){let r=e.remove,i=e.insert,o=e.toggle,a=e.modify,s=e.values,c=t.add(WC()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,o,a,s].map(f=>f??"null").join(",")+"),0)",u=j2(l,t);c.update=u.$expr,c.params=u.$params}function tb(e,t){let n=dne(e),r=e.type===ZC,i=e.from&&e.from.facet,o=e.overlap,a=e.layout||n===nI||n===tI,s,c,l,u,f,d,p,h=n===eI||a||i,m=BLe(e.from,r,t);c=t.add(SHe({key:m.key||(e.key?qp(e.key):void 0),pulse:m.pulse,clean:!r}));let g=Ne(c);c=l=t.add(W2({pulse:g})),c=t.add(VHe({markdef:kLe(e),interactive:TLe(e.interactive,t),clip:_Le(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ne(c)}));let v=Ne(c);c=u=t.add(ene(Qte(e.encode,e.type,n,e.style,t,{mod:!1,pulse:v}))),c.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{let w=dI(S,t),E=w.metadata;(E.generates||E.changes)&&B("Mark transforms should not generate new data."),E.nomod||(u.params.mod=!0),w.params.pulse=Ne(c),t.add(c=w)}),e.sort&&(c=t.add(PHe({sort:t.compareRef(e.sort),pulse:Ne(c)})));let y=Ne(c);(i||a)&&(a=t.add(rne({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:y})),d=Ne(a));let C=t.add(Jte({mark:v,pulse:d||y}));p=Ne(C),r&&(h&&(s=t.operators,s.pop(),a&&s.pop()),t.pushState(y,d||p,g),i?ULe(e,t,m):h?jLe(e,t,m):t.parse(e),t.popState(),h&&(a&&s.push(a),s.push(C))),o&&(p=qLe(o,p,t));let b=t.add(nne({pulse:p})),M=t.add(h0({pulse:Ne(b)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new p0(t,l,b,M)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&B("Marks only support modify triggers."),mne(S,t,f)}))}function qLe(e,t,n){let r=e.method,i=e.bound,o=e.separation,a={separation:vr(o)?n.signalRef(o.signal):o,method:vr(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),i){let s=i.tolerance;a.boundTolerance=vr(s)?n.signalRef(s.signal):+s,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return Ne(n.add(kHe(a)))}function GLe(e,t){let n=t.config.legend,r=e.encode||{},i=I1(e,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,c=o.style,l={},u=0,f,d,p;sI.forEach(C=>e[C]?(l[C]=e[C],u=u||e[C]):0),u||B("Missing valid scale for legend.");let h=WLe(e,t.scaleType(u)),m={title:e.title!=null,scales:l,type:h,vgrad:h!=="symbol"&&i.isVertical()},g=Ne(t.add(W2(null,[m]))),v={enter:{x:{value:0},y:{value:0}}},y=Ne(t.add(LHe(d={type:h,scale:t.scaleRef(u),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return h===qC?(p=[xLe(e,u,n,r.gradient),_te(e,n,r.labels,y)],d.count=d.count||t.signalRef(`max(2,2*floor((${d0(i.gradientLength())})/100))`)):h===ZT?p=[CLe(e,u,n,r.gradient,y),_te(e,n,r.labels,y)]:(f=SLe(e,n),p=[wLe(e,n,r,y,d0(f.columns))],d.size=QLe(e,t,p[0].marks)),p=[Wp({role:qze,from:g,encode:v,marks:p,layout:f,interactive:s})],m.title&&p.push(NLe(e,n,r.title,g)),tb(Wp({role:Uze,from:g,encode:ff(XLe(i,e,n),o,Xp),marks:p,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:c}),t)}function WLe(e,t){let n=e.type||Nte;return!e.type&&YLe(e)===1&&(e.fill||e.stroke)&&(n=y7(t)?qC:Iy(t)?ZT:Nte),n!==qC?n:Iy(t)?ZT:qC}function YLe(e){return sI.reduce((t,n)=>t+(e[n]?1:0),0)}function XLe(e,t,n){let r={enter:{},update:{}};return ti(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function QLe(e,t,n){let r=d0(Pte("size",e,n)),i=d0(Pte("strokeWidth",e,n)),o=d0(KLe(n[1].encode,t,Yp));return j2(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function Pte(e,t,n){return t[e]?`scale("${t[e]}",datum)`:une(e,n[0].encode)}function KLe(e,t,n){return une("fontSize",e)||vLe("fontSize",t,n)}var ZLe=`item.orient==="${df}"?-90:item.orient==="${pf}"?90:0`;function JLe(e,t){e=Q(e)?{text:e}:e;let n=I1(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,c=[],l={},u=Ne(t.add(W2(null,[l])));return c.push(nAe(e,n,eAe(e),u)),e.subtitle&&c.push(rAe(e,n,r.subtitle,u)),tb(Wp({role:Xze,from:u,encode:tAe(n,i),marks:c,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function eAe(e){let t=e.encode;return t&&t.title||ke({name:e.name,interactive:e.interactive,style:e.style},t)}function tAe(e,t){let n={enter:{},update:{}};return ti(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:lI},angle:{signal:ZLe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),ff(n,t,Xp)}function nAe(e,t,n,r){let i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ti(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),fo({type:m0,role:Qze,style:cLe,from:r,encode:a},n)}function rAe(e,t,n,r){let i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ti(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),fo({type:m0,role:Kze,style:lLe,from:r,encode:a},n)}function iAe(e,t){let n=[];e.transform&&e.transform.forEach(r=>{n.push(dI(r,t))}),e.on&&e.on.forEach(r=>{mne(r,t,e.name)}),t.addDataPipeline(e.name,oAe(e,t,n))}function oAe(e,t,n){let r=[],i=null,o=!1,a=!1,s,c,l,u,f;for(e.values?vr(e.values)||UC(e.format)?(r.push($te(t,e)),r.push(i=f0())):r.push(i=f0({$ingest:e.values,$format:e.format})):e.url?UC(e.url)||UC(e.format)?(r.push($te(t,e)),r.push(i=f0())):r.push(i=f0({$request:e.url,$format:e.format})):e.source&&(i=s=te(e.source).map(d=>Ne(t.getData(d).output)),r.push(null)),c=0,l=n.length;c<l;++c)u=n[c],f=u.metadata,!i&&!f.source&&r.push(i=f0()),r.push(u),f.generates&&(a=!0),f.modifies&&!a&&(o=!0),f.source?i=u:f.changes&&(i=null);return s&&(l=s.length-1,r[0]=RHe({derive:o,pulse:l?s:s[0]}),(o||l)&&r.splice(1,0,f0())),i||r.push(f0()),r.push(h0({})),r}function f0(e){let t=W2({},e);return t.metadata={source:!0},t}function $te(e,t){return AHe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}var gne=e=>e===d4||e===Y2,nb=(e,t,n)=>vr(e)?lAe(e.signal,t,n):e===df||e===Y2?t:n,Ar=(e,t,n)=>vr(e)?sAe(e.signal,t,n):gne(e)?t:n,G2=(e,t,n)=>vr(e)?cAe(e.signal,t,n):gne(e)?n:t,vne=(e,t,n)=>vr(e)?uAe(e.signal,t,n):e===Y2?{value:t}:{value:n},aAe=(e,t,n)=>vr(e)?fAe(e.signal,t,n):e===pf?{value:t}:{value:n},sAe=(e,t,n)=>yne(`${e} === '${Y2}' || ${e} === '${d4}'`,t,n),cAe=(e,t,n)=>yne(`${e} !== '${Y2}' && ${e} !== '${d4}'`,t,n),lAe=(e,t,n)=>pI(`${e} === '${df}' || ${e} === '${Y2}'`,t,n),uAe=(e,t,n)=>pI(`${e} === '${Y2}'`,t,n),fAe=(e,t,n)=>pI(`${e} === '${pf}'`,t,n),yne=(e,t,n)=>(t=t!=null?Lr(t):t,n=n!=null?Lr(n):n,Bte(t)&&Bte(n)?(t=t?t.signal||Z(t.value):null,n=n?n.signal||Z(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[ke({test:e},t)].concat(n||[])),Bte=e=>e==null||Object.keys(e).length===1,pI=(e,t,n)=>({signal:`${e} ? (${cf(t)}) : (${cf(n)})`}),dAe=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${df}' ? (${cf(r)}) : `:"")+(n!=null?`${e} === '${d4}' ? (${cf(n)}) : `:"")+(i!=null?`${e} === '${pf}' ? (${cf(i)}) : `:"")+(t!=null?`${e} === '${Y2}' ? (${cf(t)}) : `:"")+"(null)"}),cf=e=>vr(e)?e.signal:e==null?null:Z(e),pAe=(e,t)=>t===0?0:vr(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},lf=(e,t)=>{let n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function af(e,t,n,r){let i;if(t&&de(t,e))return t[e];if(de(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[aI][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Yp][i]}return null}function Ute(e){let t={};for(let n of e)if(n)for(let r in n)t[r]=1;return Object.keys(t)}function hAe(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,s,c,l;if(vr(a)){let f=Ute([n.axisX,n.axisY]),d=Ute([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);s={};for(l of f)s[l]=Ar(a,af(l,n.axisX,i,r),af(l,n.axisY,i,r));c={};for(l of d)c[l]=dAe(a.signal,af(l,n.axisTop,i,r),af(l,n.axisBottom,i,r),af(l,n.axisLeft,i,r),af(l,n.axisRight,i,r))}else s=a===Y2||a===d4?n.axisX:n.axisY,c=n["axis"+a[0].toUpperCase()+a.slice(1)];return s||c||o?ke({},i,s,c,o):i}function mAe(e,t,n,r){let i=I1(e,t),o=e.orient,a,s,c={enter:a={opacity:xt},update:s={opacity:Zo},exit:{opacity:xt}};ti(c,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});let l=jte(e,0),u=jte(e,1);return a.x=s.x=Ar(o,l,xt),a.x2=s.x2=Ar(o,u),a.y=s.y=G2(o,l,xt),a.y2=s.y2=G2(o,u),fo({type:cI,role:Rze,from:r,encode:c},n)}function jte(e,t){return{scale:e.scale,range:t}}function gAe(e,t,n,r,i){let o=I1(e,t),a=e.orient,s=e.gridScale,c=nb(a,1,-1),l=vAe(e.offset,c),u,f,d,p={enter:u={opacity:xt},update:d={opacity:Zo},exit:f={opacity:xt}};ti(p,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});let h={scale:e.scale,field:Ko,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},m=Ar(a,{signal:"height"},{signal:"width"}),g=s?{scale:s,range:0,mult:c,offset:l}:{value:0,offset:l},v=s?{scale:s,range:1,mult:c,offset:l}:ke(m,{mult:c,offset:l});return u.x=d.x=Ar(a,h,g),u.y=d.y=G2(a,h,g),u.x2=d.x2=G2(a,v),u.y2=d.y2=Ar(a,v),f.x=Ar(a,h),f.y=G2(a,h),fo({type:cI,role:Oze,key:Ko,from:r,encode:p},n)}function vAe(e,t){if(t!==1)if(!ne(e))e=vr(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=ke({},e);for(;n.mult!=null;)if(ne(n.mult))n=n.mult=ke({},n.mult);else return n.mult=vr(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function yAe(e,t,n,r,i,o){let a=I1(e,t),s=e.orient,c=nb(s,-1,1),l,u,f,d={enter:l={opacity:xt},update:f={opacity:Zo},exit:u={opacity:xt}};ti(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});let p=Lr(i);p.mult=c;let h={scale:e.scale,field:Ko,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return f.y=l.y=Ar(s,xt,h),f.y2=l.y2=Ar(s,p),u.x=Ar(s,h),f.x=l.x=G2(s,xt,h),f.x2=l.x2=G2(s,p),u.y=G2(s,h),fo({type:cI,role:$ze,key:Ko,from:r,encode:d},n)}function GT(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function xAe(e,t,n,r,i,o){let a=I1(e,t),s=e.orient,c=e.scale,l=nb(s,-1,1),u=d0(a("labelFlush")),f=d0(a("labelFlushOffset")),d=a("labelAlign"),p=a("labelBaseline"),h=u===0||!!u,m,g=Lr(i);g.mult=l,g.offset=Lr(a("labelPadding")||0),g.offset.mult=l;let v={scale:c,field:Ko,band:.5,offset:fne(o.offset,a("labelOffset"))},y=Ar(s,h?GT(c,u,'"left"','"right"','"center"'):{value:"center"},aAe(s,"left","right")),C=Ar(s,vne(s,"bottom","top"),h?GT(c,u,'"top"','"bottom"','"middle"'):{value:"middle"}),b=GT(c,u,`-(${f})`,f,0);h=h&&f;let M={opacity:xt,x:Ar(s,v,g),y:G2(s,v,g)},S={enter:M,update:m={opacity:Zo,text:{field:oI},x:M.x,y:M.y,align:y,baseline:C},exit:{opacity:xt,x:M.x,y:M.y}};ti(S,{dx:!d&&h?Ar(s,b):null,dy:!p&&h?G2(s,b):null}),ti(S,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:p});let w=a("labelBound"),E=a("labelOverlap");return E=E||w?{separation:a("labelSeparation"),method:E,order:"datum.index",bound:w?{scale:c,orient:s,tolerance:w}:null}:void 0,m.align!==y&&(m.align=lf(m.align,y)),m.baseline!==C&&(m.baseline=lf(m.baseline,C)),fo({type:m0,role:Pze,style:Yp,key:Ko,from:r,encode:S,overlap:E},n)}function CAe(e,t,n,r){let i=I1(e,t),o=e.orient,a=nb(o,-1,1),s,c,l={enter:s={opacity:xt,anchor:Lr(i("titleAnchor",null)),align:{signal:lI}},update:c=ke({},s,{opacity:Zo,text:Lr(e.title)}),exit:{opacity:xt}},u={signal:`lerp(range("${e.scale}"), ${JC(0,1,.5)})`};return c.x=Ar(o,u),c.y=G2(o,u),s.angle=Ar(o,xt,pAe(a,90)),s.baseline=Ar(o,vne(o,d4,Y2),{value:d4}),c.angle=s.angle,c.baseline=s.baseline,ti(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),bAe(i,o,l,n),l.update.align=lf(l.update.align,s.align),l.update.angle=lf(l.update.angle,s.angle),l.update.baseline=lf(l.update.baseline,s.baseline),fo({type:m0,role:Bze,style:aI,from:r,encode:l},n)}function bAe(e,t,n,r){let i=(s,c)=>s!=null?(n.update[c]=lf(Lr(s),n.update[c]),!1):!sf(c,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?Lr(a):Ar(t,Lr(a),Lr(o))}function MAe(e,t){let n=hAe(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,c=I1(e,n),l=yLe(c),u={scale:e.scale,ticks:!!c("ticks"),labels:!!c("labels"),grid:!!c("grid"),domain:!!c("domain"),title:e.title!=null},f=Ne(t.add(W2({},[u]))),d=Ne(t.add(wHe({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),p=[],h;return u.grid&&p.push(gAe(e,n,r.grid,d,l)),u.ticks&&(h=c("tickSize"),p.push(yAe(e,n,r.ticks,d,h,l))),u.labels&&(h=u.ticks?h:0,p.push(xAe(e,n,r.labels,d,h,l))),u.domain&&p.push(mAe(e,n,r.domain,f)),u.title&&p.push(CAe(e,n,r.title,f)),tb(Wp({role:Fze,from:f,encode:ff(wAe(c,e),i,Xp),marks:p,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:o,interactive:a,style:s}),t)}function wAe(e,t){let n={enter:{},update:{}};return ti(n,{orient:e("orient"),offset:e("offset")||0,position:q2(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function xne(e,t,n){let r=te(e.signals),i=te(e.scales);return n||r.forEach(o=>Kte(o,t)),te(e.projections).forEach(o=>tLe(o,t)),i.forEach(o=>UHe(o,t)),te(e.data).forEach(o=>iAe(o,t)),i.forEach(o=>jHe(o,t)),(n||r).forEach(o=>MHe(o,t)),te(e.axes).forEach(o=>MAe(o,t)),te(e.marks).forEach(o=>tb(o,t)),te(e.legends).forEach(o=>GLe(o,t)),e.title&&JLe(e.title,t),t.parseLambdas(),t}var SAe=e=>ff({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function EAe(e,t){let n=t.config,r=Ne(t.root=t.add(WC())),i=DAe(e,n);i.forEach(l=>Kte(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;let o=t.add(W2()),a=t.add(ene(Qte(SAe(e.encode),ZC,tI,e.style,t,{pulse:Ne(o)}))),s=t.add(rne({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Ne(a)}));t.operators.pop(),t.pushState(Ne(a),Ne(s),null),xne(e,t,i),t.operators.push(s);let c=t.add(Jte({mark:r,pulse:Ne(s)}));return c=t.add(nne({pulse:Ne(c)})),c=t.add(h0({pulse:Ne(c)})),t.addData("root",new p0(t,o,o,c)),t}function jp(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function DAe(e,t){let n=a=>q2(e[a],t[a]),r=[jp("background",n("background")),jp("autosize",kze(n("autosize"))),jp("padding",Ize(n("padding"))),jp("width",n("width")||0),jp("height",n("height")||0)],i=r.reduce((a,s)=>(a[s.name]=s,a),{}),o={};return te(e.signals).forEach(a=>{de(i,a.name)?a=ke(i[a.name],a):r.push(a),o[a.name]=a}),te(t.signals).forEach(a=>{!de(o,a.name)&&!de(i,a.name)&&r.push(a)}),r}function Cne(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function qte(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Cne.prototype=qte.prototype={parse(e){return xne(e,this)},fork(){return new qte(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){let t=e instanceof WT?Ne(e):e;return this.add(FHe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let a,s;r&&(a=r.data||(r.data={}),s=a[i]||(a[i]=[]),s.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(let r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Ne(this.add(h0({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ne(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Ge(this._parent)},encode(){return Ge(this._encode)},lookup(){return Ge(this._lookup)},markpath(){let e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Q(e))return qp(e,t);e.signal||B("Unsupported field reference: "+Z(e));let n=e.signal,r=this.field[n];if(!r){let i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Ne(this.add(zHe(i)))}return r},compareRef(e){let t=!1,n=o=>vr(o)?(t=!0,this.signalRef(o.signal)):dHe(o)?(t=!0,this.exprRef(o.expr)):o,r=te(e.field).map(n),i=te(e.order).map(n);return t?Ne(this.add(Vte({fields:r,orders:i}))):Lte(r,i)},keyRef(e,t){let n=!1,r=o=>vr(o)?(n=!0,Ne(i[o.signal])):o,i=this.signals;return e=te(e).map(r),n?Ne(this.add(HHe({fields:e,flat:t}))):cHe(e,t)},sortRef(e){if(!e)return e;let t=QC(e.op,e.field),n=e.order||lHe;return n.signal?Ne(this.add(Vte({fields:t,orders:this.signalRef(n.signal)}))):Lte(t,n)},event(e,t){let n=e+":"+t;if(!this.events[n]){let r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return de(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&B("Duplicate signal name: "+Z(e));let n=t instanceof WT?t:this.add(WC(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||B("Unrecognized signal name: "+Z(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ne(this.signals[e]):(de(this.lambdas,e)||(this.lambdas[e]=this.add(WC(null))),Ne(this.lambdas[e]))},parseLambdas(){let e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){let r=e[t],i=j2(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ne(e)?e:this.signalRef(e.signal||hI(e))},exprRef(e,t){let n={expr:j2(e,this)};return t&&(n.expr.$name=t),Ne(this.add(EHe(n)))},addBinding(e,t){this.bindings||B("Nested signals do not support binding: "+Z(e)),this.bindings.push(ke({signal:e},t))},addScaleProj(e,t){de(this.scales,e)&&B("Duplicate scale or projection name: "+Z(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,OHe(t))},addProjection(e,t){this.addScaleProj(e,IHe(t))},getScale(e){return this.scales[e]||B("Unrecognized scale name: "+Z(e)),this.scales[e]},scaleRef(e){return Ne(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return de(this.data,e)&&B("Duplicate data set name: "+Z(e)),this.data[e]=t},getData(e){return this.data[e]||B("Undefined data set name: "+Z(e)),this.data[e]},addDataPipeline(e,t){return de(this.data,e)&&B("Duplicate data set name: "+Z(e)),this.addData(e,p0.fromEntries(this,t))}};function hI(e){return(F(e)?zAe:HAe)(e)}function zAe(e){let t=e.length,n="[";for(let r=0;r<t;++r){let i=e[r];n+=(r>0?",":"")+(ne(i)?i.signal||hI(i):Z(i))}return n+"]"}function HAe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Z(r)+":"+(ne(i)?i.signal||hI(i):Z(i));return t+"}"}function LAe(){let e="sans-serif",r="#4c78a8",i="#000",o="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function bne(e,t,n){return ne(e)||B("Input Vega specification must be an object."),t=Fa(LAe(),t,e.config),EAe(e,new Cne(t,n)).toRuntime()}var AAe="5.28.0";ke(ac,xA,zN,NN,Q_,uk,Zk,$k,nT,oT,cT,fT);function VAe(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var NAe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},_Ae={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},kAe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e},TAe=Array.prototype.slice,g0=(e,t,n)=>{let r=n?n(t[0]):t[0];return r[e].apply(r,TAe.call(t,1))},IAe=(e,t,n,r,i,o,a)=>new Date(e,t||0,n??1,r||0,i||0,o||0,a||0),FAe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:IAe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return g0("join",arguments)},indexof:function(){return g0("indexOf",arguments)},lastindexof:function(){return g0("lastIndexOf",arguments)},slice:function(){return g0("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return g0("substring",arguments,String)},split:function(){return g0("split",arguments,String)},replace:function(){return g0("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)},RAe=["view","item","group","xy","x","y"],gI=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&gI.add(setImmediate);var OAe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{let n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:NAe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{let n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);let i=e(t.property);if(n&&(e.memberDepth-=1),gI.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{let n=t.arguments,r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||FAe[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>_Ae[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>kAe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;let i=e(r.key);return e.memberDepth-=1,gI.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function Qp(e,t,n,r,i,o){let a=s=>OAe[s.type](a,s);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=r,a.event=i,a.item=o,RAe.forEach(s=>a.fn[s]=function(){return i.vega[s](...arguments)}),a(e)}var Mne={operator(e,t){let n=t.ast,r=e.functions;return i=>Qp(n,r,i)},parameter(e,t){let n=t.ast,r=e.functions;return(i,o)=>Qp(n,r,o,i)},event(e,t){let n=t.ast,r=e.functions;return i=>Qp(n,r,void 0,void 0,i)},handler(e,t){let n=t.ast,r=e.functions;return(i,o)=>{let a=o.item&&o.item.datum;return Qp(n,r,i,a,o)}},encode(e,t){let{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(a,s)=>{let c=a.datum,l=0,u;for(let f in r)u=Qp(r[f].ast,i,s,c,void 0,a),a[f]!==u&&(a[f]=u,l=1);return n!=="rule"&&VAe(a,r,o),l}}};var lR={};Cr(lR,{accessPathDepth:()=>v0,accessPathWithDatum:()=>Jp,compile:()=>V2e,contains:()=>Ve,deepEqual:()=>Vr,deleteNestedProperty:()=>Zp,duplicate:()=>le,entries:()=>F1,every:()=>sb,fieldIntersection:()=>lb,flatAccessWithDatum:()=>bI,getFirstDefined:()=>ct,hasIntersection:()=>cb,hash:()=>be,internalField:()=>wI,isBoolean:()=>mf,isEmpty:()=>Qe,isEqual:()=>BAe,isInternalField:()=>Dne,isNullOrFalse:()=>ab,isNumeric:()=>th,keys:()=>R,logicalExpr:()=>hf,mergeDeep:()=>xI,never:()=>yI,normalize:()=>CM,normalizeAngle:()=>m4,omit:()=>Fn,pick:()=>zc,prefixGenerator:()=>vI,removePathFromField:()=>eh,replaceAll:()=>X2,replacePathInField:()=>rr,resetIdCounter:()=>jAe,setEqual:()=>CI,some:()=>as,stringify:()=>ht,titleCase:()=>h4,unique:()=>Vi,uniqueId:()=>MI,vals:()=>rn,varName:()=>pt,version:()=>bIe});var wne={name:"vega-lite",author:'Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',version:"5.16.3",collaborators:["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-Lite is a concise high-level language for interactive visualization.",keywords:["vega","chart","visualization"],main:"build/vega-lite.js",unpkg:"build/vega-lite.min.js",jsdelivr:"build/vega-lite.min.js",module:"build/src/index",types:"build/src/index.d.ts",bin:{vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},files:["bin","build","src","vega-lite*","tsconfig.json"],scripts:{changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@babel/core":"^7.22.10","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-alias":"^5.0.0","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^25.0.4","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.2.1","@rollup/plugin-terser":"^0.4.3","@types/chai":"^4.3.5","@types/d3":"^7.4.0","@types/jest":"^29.5.4","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^6.4.1","@typescript-eslint/parser":"^6.4.1",ajv:"^8.12.0","ajv-formats":"^2.1.1",chai:"^4.3.7",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.0.0",d3:"^7.8.5","del-cli":"^5.0.0",eslint:"^8.47.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.8.0",jest:"^29.6.3","jest-dev-server":"^9.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.0.2",puppeteer:"^15.0.0","release-it":"^16.1.5",rollup:"^3.28.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3",serve:"^14.2.1",terser:"^5.19.2","ts-jest":"^29.1.1","ts-json-schema-generator":"^1.3.0",typescript:"~5.2.2","vega-cli":"^5.25.0","vega-datasets":"^2.7.0","vega-embed":"^6.22.2","vega-tooltip":"^0.33.0","yaml-front-matter":"^4.1.1"},dependencies:{"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},peerDependencies:{vega:"^5.24.0"},engines:{node:">=18"}};function rb(e){return!!e.or}function ib(e){return!!e.and}function ob(e){return!!e.not}function Kp(e,t){if(ob(e))Kp(e.not,t);else if(ib(e))for(let n of e.and)Kp(n,t);else if(rb(e))for(let n of e.or)Kp(n,t);else t(e)}function p4(e,t){return ob(e)?{not:p4(e.not,t)}:ib(e)?{and:e.and.map(n=>p4(n,t))}:rb(e)?{or:e.or.map(n=>p4(n,t))}:t(e)}var le=structuredClone;function yI(e){throw new Error(e)}function zc(e,t){let n={};for(let r of t)de(e,r)&&(n[r]=e[r]);return n}function Fn(e,t){let n=x({},e);for(let r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>ht(e)).join(",")})`};function be(e){if(Pe(e))return e;let t=Q(e)?e:ht(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function ab(e){return e===!1||e===null}function Ve(e,t){return e.includes(t)}function as(e,t){let n=0;for(let[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function sb(e,t){let n=0;for(let[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function xI(e,...t){for(let n of t)$Ae(e,n??{});return e}function $Ae(e,t){for(let n of R(t))Qs(e,n,t[n],!0)}function Vi(e,t){let n=[],r={},i;for(let o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function BAe(e,t){let n=R(e),r=R(t);if(n.length!==r.length)return!1;for(let i of n)if(e[i]!==t[i])return!1;return!0}function CI(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function cb(e,t){for(let n of e)if(t.has(n))return!0;return!1}function vI(e){let t=new Set;for(let n of e){let i=Io(n).map((a,s)=>s===0?a:`[${a}]`),o=i.map((a,s)=>i.slice(0,s+1).join(""));for(let a of o)t.add(a)}return t}function lb(e,t){return e===void 0||t===void 0?!0:cb(vI(e),vI(t))}function Qe(e){return R(e).length===0}var R=Object.keys,rn=Object.values,F1=Object.entries;function mf(e){return e===!0||e===!1}function pt(e){let t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function hf(e,t){return ob(e)?`!(${hf(e.not,t)})`:ib(e)?`(${e.and.map(n=>hf(n,t)).join(") && (")})`:rb(e)?`(${e.or.map(n=>hf(n,t)).join(") || (")})`:t(e)}function Zp(e,t){if(t.length===0)return!0;let n=t.shift();return n in e&&Zp(e[n],t)&&delete e[n],Qe(e)}function h4(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Jp(e,t="datum"){let n=Io(e),r=[];for(let i=1;i<=n.length;i++){let o=`[${n.slice(0,i).map(Z).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function bI(e,t="datum"){return`${t}[${Z(Io(e).join("."))}]`}function UAe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function rr(e){return`${Io(e).map(UAe).join("\\.")}`}function X2(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function eh(e){return`${Io(e).join(".")}`}function v0(e){return e?Io(e).length:0}function ct(...e){for(let t of e)if(t!==void 0)return t}var Ene=42;function MI(e){let t=++Ene;return e?String(e)+t:t}function jAe(){Ene=42}function wI(e){return Dne(e)?e:`__${e}`}function Dne(e){return e.startsWith("__")}function m4(e){if(e!==void 0)return(e%360+360)%360}function th(e){return Pe(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}var Sne=Object.getPrototypeOf(structuredClone({}));function Vr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Vr(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Vr(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Sne.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Sne.toString)return e.toString()===t.toString();let i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){let o=i[r];if(!Vr(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function ht(e){let t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");let a=t.push(r)-1,s=Object.keys(r).sort();for(o="",i=0;i<s.length;i++){let c=s[i],l=n(r[c]);l&&(o&&(o+=","),o+=JSON.stringify(c)+":"+l)}return t.splice(a,1),`{${o}}`}(e)}var R1="row",O1="column",gf="facet",Ct="x",on="y",P1="x2",po="y2",Jo="xOffset",ss="yOffset",Ni="radius",Q2="radius2",ni="theta",K2="theta2",ri="latitude",ii="longitude",_i="latitude2",oi="longitude2",Rn="color",ki="fill",Ti="stroke",wn="shape",$1="size",Z2="angle",f1="opacity",ho="fillOpacity",mo="strokeOpacity",go="strokeWidth",vo="strokeDash",y0="text",g4="order",x0="detail",vf="key",Hc="tooltip",yf="href",xf="url",Cf="description",qAe={x:1,y:1,x2:1,y2:1},Nne={theta:1,theta2:1,radius:1,radius2:1};function SI(e){return e in Nne}var EI={longitude:1,longitude2:1,latitude:1,latitude2:1};function fb(e){switch(e){case ri:return"y";case _i:return"y2";case ii:return"x";case oi:return"x2"}}function db(e){return e in EI}var _ne=R(EI),DI=k(x(x(x({},qAe),Nne),EI),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function Lc(e){return e===Rn||e===ki||e===Ti}var kne={row:1,column:1,facet:1},Nr=R(kne),zI=x(x({},DI),kne),Tne=R(zI),zne=zI,{order:R6t,detail:O6t,tooltip:P6t}=zne,Ine=ie(zne,["order","detail","tooltip"]),Hne=Ine,{row:$6t,column:B6t,facet:U6t}=Hne,Fne=ie(Hne,["row","column","facet"]),j6t=R(Ine),q6t=R(Fne);function Rne(e){return!!Fne[e]}function pb(e){return!!zI[e]}var One=[P1,po,_i,oi,K2,Q2];function hb(e){return yo(e)!==e}function yo(e){switch(e){case P1:return Ct;case po:return on;case _i:return ri;case oi:return ii;case K2:return ni;case Q2:return Ni}return e}function e2(e){if(SI(e))switch(e){case ni:return"startAngle";case K2:return"endAngle";case Ni:return"outerRadius";case Q2:return"innerRadius"}return e}function _r(e){switch(e){case Ct:return P1;case on:return po;case ri:return _i;case ii:return oi;case ni:return K2;case Ni:return Q2}}function Sn(e){switch(e){case Ct:case P1:return"width";case on:case po:return"height"}}function HI(e){switch(e){case Ct:return"xOffset";case on:return"yOffset";case P1:return"x2Offset";case po:return"y2Offset";case ni:return"thetaOffset";case Ni:return"radiusOffset";case K2:return"theta2Offset";case Q2:return"radius2Offset"}}function bf(e){switch(e){case Ct:return"xOffset";case on:return"yOffset"}}function Pne(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}var $ne=R(DI),Lne=DI,{x:G6t,y:W6t,x2:Y6t,y2:X6t,xOffset:Q6t,yOffset:K6t,latitude:Z6t,longitude:J6t,latitude2:eut,longitude2:tut,theta:nut,theta2:rut,radius:iut,radius2:out}=Lne,LI=ie(Lne,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),Bne=R(LI),AI={x:1,y:1},yr=R(AI);function bt(e){return e in AI}var mb={theta:1,radius:1},Une=R(mb);function v4(e){return e==="width"?Ct:on}var VI={xOffset:1,yOffset:1},aut=R(VI);function Ac(e){return e in VI}var Ane=LI,{text:sut,tooltip:cut,href:lut,url:uut,description:fut,detail:dut,key:put,order:hut}=Ane,jne=ie(Ane,["text","tooltip","href","url","description","detail","key","order"]),qne=R(jne);function Gne(e){return!!LI[e]}function Wne(e){switch(e){case Rn:case ki:case Ti:case $1:case wn:case f1:case go:case vo:return!0;case ho:case mo:case Z2:return!1}}var Yne=x(x(x(x({},AI),mb),VI),jne),y4=R(Yne);function kr(e){return!!Yne[e]}function Xne(e,t){return WAe(e)[t]}var Qne={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},Vne=Qne,{geoshape:mut}=Vne,GAe=ie(Vne,["geoshape"]);function WAe(e){switch(e){case Rn:case ki:case Ti:case Cf:case x0:case vf:case Hc:case yf:case g4:case f1:case ho:case mo:case go:case gf:case R1:case O1:return Qne;case Ct:case on:case Jo:case ss:case ri:case ii:return GAe;case P1:case po:case _i:case oi:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case $1:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case vo:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case wn:return{point:"always",geoshape:"always"};case y0:return{text:"always"};case Z2:return{point:"always",square:"always",text:"always"};case xf:return{image:"always"};case ni:return{text:"always",arc:"always"};case Ni:return{text:"always",arc:"always"};case K2:case Q2:return{arc:"always"}}}function gb(e){switch(e){case Ct:case on:case ni:case Ni:case Jo:case ss:case $1:case Z2:case go:case f1:case ho:case mo:case P1:case po:case K2:case Q2:return;case gf:case R1:case O1:case wn:case vo:case y0:case Hc:case yf:case xf:case Cf:return"discrete";case Rn:case ki:case Ti:return"flexible";case ri:case ii:case _i:case oi:case x0:case vf:case g4:return}}var XAe={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Kne={count:1,min:1,max:1};function xo(e){return!!e&&!!e.argmin}function t2(e){return!!e&&!!e.argmax}function Mf(e){return Q(e)&&!!XAe[e]}var QAe=new Set(["count","valid","missing","distinct"]);function vb(e){return Q(e)&&QAe.has(e)}function Zne(e){return Q(e)&&Ve(["min","max"],e)}var Jne=new Set(["count","sum","distinct","valid","missing"]),ere=new Set(["mean","average","median","q1","q3","min","max"]);function yb(e){return D1(e)&&(e=Sf(e,void 0)),"bin"+R(e).map(t=>wf(e[t])?pt(`_${t}_${F1(e[t])}`):pt(`_${t}_${e[t]}`)).join("")}function rt(e){return e===!0||J2(e)&&!e.binned}function an(e){return e==="binned"||J2(e)&&e.binned===!0}function J2(e){return ne(e)}function wf(e){return e?.param}function NI(e){switch(e){case R1:case O1:case $1:case Rn:case ki:case Ti:case go:case f1:case ho:case mo:case wn:return 6;case vo:return 4;default:return 10}}function x4(e){return!!e?.expr}function ir(e){let t=R(e||{}),n={};for(let r of t)n[r]=Tr(e[r]);return n}function xb(e){let b=e,{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:a,color:s,subtitleColor:c,subtitleFont:l,subtitleFontSize:u,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:p,subtitlePadding:h}=b,m=ie(b,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),g=x(x({},m),s?{fill:s}:{}),v=x(x(x(x(x(x({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),o!==void 0?{angle:o}:{}),a!==void 0?{limit:a}:{}),y=x(x(x(x(x(x(x({},c?{subtitleColor:c}:{}),l?{subtitleFont:l}:{}),u?{subtitleFontSize:u}:{}),f?{subtitleFontStyle:f}:{}),d?{subtitleFontWeight:d}:{}),p?{subtitleLineHeight:p}:{}),h?{subtitlePadding:h}:{}),C=zc(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:C,nonMarkTitleProperties:v,subtitle:y}}function ea(e){return Q(e)||F(e)&&Q(e[0])}function ae(e){return!!e?.signal}function Ii(e){return!!e.step}function tre(e){return F(e)?!1:"fields"in e&&!("data"in e)}function nre(e){return F(e)?!1:"fields"in e&&"data"in e}function ta(e){return F(e)?!1:"field"in e&&"data"in e}var KAe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},rre=R(KAe),ire={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Cb=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function bb(e){let t=F(e.condition)?e.condition.map(ore):ore(e.condition);return k(x({},Tr(e)),{condition:t})}function Tr(e){if(x4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return e}function ore(e){if(x4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return e}function it(e){if(x4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return ae(e)?e:e!==void 0?{value:e}:void 0}function are(e){return ae(e)?e.signal:Z(e)}function _I(e){return ae(e)?e.signal:Z(e.value)}function d1(e){return ae(e)?e.signal:e==null?null:Z(e)}function sre(e,t,n){for(let r of n){let i=Co(r,t.markDef,t.config);i!==void 0&&(e[r]=it(i))}return e}function kI(e){return[].concat(e.type,e.style??[])}function je(e,t,n,r={}){let{vgChannel:i,ignoreVgConfig:o}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:Co(e,t,n,r)}function Co(e,t,n,{vgChannel:r}={}){return ct(r?nh(e,t,n.style):void 0,nh(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function nh(e,t,n){return TI(e,kI(t),n)}function TI(e,t,n){t=te(t);let r;for(let i of t){let o=n[i];o&&o[e]!==void 0&&(r=o[e])}return r}function Mb(e,t){return te(e).reduce((n,r)=>(n.field.push(K(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function II(e,t){let n=[...e];return t.forEach(r=>{for(let i of n)if(Vr(i,r))return;n.push(r)}),n}function FI(e,t){return Vr(e,t)||!t?e:e?[...te(e),...te(t)].join(", "):t}function wb(e,t){let n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((ea(n)||ae(n))&&(ea(r)||ae(r)))return{explicit:e.explicit,value:FI(n,r)};if(ea(n)||ae(n))return{explicit:e.explicit,value:n};if(ea(r)||ae(r))return{explicit:e.explicit,value:r};if(!ea(n)&&!ae(n)&&!ea(r)&&!ae(r))return{explicit:e.explicit,value:II(n,r)};throw new Error("It should never reach here")}var P={};Cr(P,{ADD_SAME_CHILD_TWICE:()=>CVe,CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN:()=>GVe,CONCAT_CANNOT_SHARE_AXIS:()=>vVe,FACETED_INDEPENDENT_DIFFERENT_SOURCES:()=>lNe,FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES:()=>uNe,FACETED_INDEPENDENT_SAME_SOURCE:()=>fNe,FIT_NON_SINGLE:()=>JAe,INTERVAL_INITIALIZED_WITH_POS:()=>hVe,INVALID_CHANNEL_FOR_AXIS:()=>dNe,LEGEND_BINDINGS_MUST_HAVE_PROJECTION:()=>uVe,LINE_WITH_VARYING_SIZE:()=>TVe,MORE_THAN_ONE_SORT:()=>cNe,NEEDS_SAME_SELECTION:()=>pVe,NO_FIELDS_NEEDS_AS:()=>MVe,REPLACE_ANGLE_WITH_THETA:()=>EVe,SCALE_BINDINGS_CONTINUOUS:()=>lVe,cannotApplySizeToNonOrientedMark:()=>ZVe,cannotLookupVariableParameter:()=>fVe,cannotProjectAggregate:()=>oVe,cannotProjectOnChannelWithoutField:()=>iVe,cannotStackNonLinearScale:()=>hNe,cannotStackRangedMark:()=>pNe,cannotUseRelativeBandSizeWithNonBandScale:()=>YVe,cannotUseScalePropertyWithNonColor:()=>WVe,channelRequiredForBinned:()=>MNe,channelShouldBeDiscrete:()=>OVe,channelShouldBeDiscreteOrDiscretizing:()=>PVe,channelShouldNotBeUsedForBinned:()=>wNe,columnsNotSupportByRowCol:()=>gVe,containerSizeNonSingle:()=>eVe,containerSizeNotCompatibleWithAutosize:()=>tVe,customFormatTypeNotAllowed:()=>wVe,differentParse:()=>xVe,discreteChannelCannotEncode:()=>BVe,domainRequiredForThresholdScale:()=>SNe,domainSortDropped:()=>sNe,droppedDay:()=>vNe,droppingColor:()=>NVe,droppingFit:()=>nVe,emptyFieldDef:()=>kVe,errorBand1DNotSupport:()=>bNe,errorBarCenterAndExtentAreNotNeeded:()=>yNe,errorBarCenterIsUsedWithWrongExtent:()=>xNe,errorBarContinuousAxisHasCustomizedAggregate:()=>CNe,facetChannelDropped:()=>$Ve,incompatibleChannel:()=>IVe,independentScaleMeansIndependentGuide:()=>aNe,invalidAggregate:()=>AVe,invalidEncodingChannel:()=>RVe,invalidFieldType:()=>HVe,invalidFieldTypeForCountAggregate:()=>LVe,invalidSpec:()=>ZAe,invalidTimeUnit:()=>gNe,invalidTransformIgnored:()=>bVe,lineWithRange:()=>jVe,mergeConflictingDomainProperty:()=>oNe,mergeConflictingProperty:()=>iNe,missingFieldType:()=>VVe,nearestNotSupportForContinuous:()=>aVe,noSameUnitLookup:()=>dVe,noSuchRepeatedValue:()=>mVe,offsetEncodingScaleIgnored:()=>FVe,offsetNestedInsideContinuousPositionScaleDropped:()=>DVe,orientOverridden:()=>qVe,primitiveChannelDef:()=>zVe,projectionOverridden:()=>SVe,rangeMarkAlignmentCannotBeExpression:()=>UVe,relativeBandSizeNotSupported:()=>_Ve,scalePropertyNotWorkWithScaleType:()=>tNe,scaleTypeNotWorkWithChannel:()=>JVe,scaleTypeNotWorkWithFieldDef:()=>eNe,scaleTypeNotWorkWithMark:()=>nNe,selectionNotFound:()=>cVe,selectionNotSupported:()=>sVe,stackNonSummativeAggregate:()=>mNe,stepDropped:()=>rNe,unaggregateDomainHasNoEffectForRawField:()=>XVe,unaggregateDomainWithNonSharedDomainOp:()=>QVe,unaggregatedDomainWithLogScale:()=>KVe,unknownField:()=>rVe,unrecognizedParse:()=>yVe});function ZAe(e){return`Invalid specification ${ht(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}var JAe='Autosize "fit" only works for single views and layered views.';function eVe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function tVe(e){let t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function nVe(e){return e?`Dropping "fit-${e}" because spec has discrete ${Sn(e)}.`:'Dropping "fit" because spec has discrete size.'}function rVe(e){return`Unknown field for ${e}. Cannot calculate view size.`}function iVe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function oVe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function aVe(e){return`The "nearest" transform is not supported for ${e} marks.`}function sVe(e){return`Selection not supported for ${e} yet.`}function cVe(e){return`Cannot find a selection named "${e}".`}var lVe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",uVe="Legend bindings are only supported for selections over an individual field or encoding channel.";function fVe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function dVe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}var pVe="The same selection must be used to override scale domains in a layered view.",hVe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function mVe(e){return`Unknown repeated value "${e}".`}function gVe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}var vVe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function yVe(e){return`Unrecognized parse "${e}".`}function xVe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}var CVe="Attempt to add the same child twice.";function bVe(e){return`Ignoring an invalid transform: ${ht(e)}.`}var MVe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function wVe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function SVe(e){let{parentProjection:t,projection:n}=e;return`Layer's shared projection ${ht(t)} is overridden by a child projection ${ht(n)}.`}var EVe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function DVe(e){return`${e}Offset dropped because ${e} is continuous`}function zVe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${ht(n)}}.`}function HVe(e){return`Invalid field type "${e}".`}function LVe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function AVe(e){return`Invalid aggregation operator "${e}".`}function VVe(e,t){return`Missing type for channel "${e}", using "${t}" instead.`}function NVe(e,t){let{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function _Ve(e){return`Position range does not support relative band size for ${e}.`}function kVe(e,t){return`Dropping ${ht(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}var TVe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function IVe(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function FVe(e){return`${e} encoding has no scale, so specified scale is ignored.`}function RVe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function OVe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function PVe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function $Ve(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function BVe(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function UVe(e){return`The ${e} for range marks cannot be an expression`}function jVe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function qVe(e,t){return`Specified orient "${e}" overridden with "${t}".`}var GVe="Custom domain scale cannot be unioned with default field-based domain.";function WVe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function YVe(e){return`Cannot use the relative band size with ${e} scale.`}function XVe(e){return`Using unaggregated domain with raw field has no effect (${ht(e)}).`}function QVe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function KVe(e){return`Unaggregated domain is currently unsupported for log scale (${ht(e)}).`}function ZVe(e){return`Cannot apply size to non-oriented mark "${e}".`}function JVe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function eNe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function tNe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function nNe(e,t){return`Scale type "${t}" does not work with mark "${e}".`}function rNe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function iNe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${ht(n)} and ${ht(r)}). Using ${ht(n)}.`}function oNe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${ht(n)} and ${ht(r)}). Using the union of the two domains.`}function aNe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function sNe(e){return`Dropping sort property ${ht(e)} as unioned domains only support boolean or op "count", "min", and "max".`}var cNe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",lNe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",uNe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",fNe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",dNe="Invalid channel for axis.";function pNe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function hNe(e){return`Cannot stack non-linear scale (${e}).`}function mNe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function gNe(e,t){return`Invalid ${e}: ${ht(t)}.`}function vNe(e){return`Dropping day from datetime ${ht(e)} as day cannot be combined with other units.`}function yNe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function xNe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function CNe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function bNe(e){return`1D error band does not support ${e}.`}function MNe(e){return`Channel ${e} is required for "binned" bin.`}function wNe(e){return`Channel ${e} should not be used with "binned" bin.`}function SNe(e){return`Domain for ${e} is required for threshold scale.`}var ENe,cre=Q5(Zg),Ef=cre;ENe=new WeakMap;function lre(e){return Ef=e,Ef}function ure(){return Ef=cre,Ef}function U(...e){Ef.warn(...e)}function fre(...e){Ef.debug(...e)}function n2(e){if(e&&ne(e)){for(let t of Sb)if(t in e)return!0}return!1}var dre=["january","february","march","april","may","june","july","august","september","october","november","december"],DNe=dre.map(e=>e.substr(0,3)),pre=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],zNe=pre.map(e=>e.substr(0,3));function HNe(e){if(th(e)&&(e=+e),Pe(e))return e>4&&U(P.invalidTimeUnit("quarter",e)),e-1;throw new Error(P.invalidTimeUnit("quarter",e))}function LNe(e){if(th(e)&&(e=+e),Pe(e))return e-1;{let t=e.toLowerCase(),n=dre.indexOf(t);if(n!==-1)return n;let r=t.substr(0,3),i=DNe.indexOf(r);if(i!==-1)return i;throw new Error(P.invalidTimeUnit("month",e))}}function ANe(e){if(th(e)&&(e=+e),Pe(e))return e%7;{let t=e.toLowerCase(),n=pre.indexOf(t);if(n!==-1)return n;let r=t.substr(0,3),i=zNe.indexOf(r);if(i!==-1)return i;throw new Error(P.invalidTimeUnit("day",e))}}function RI(e,t){let n=[];if(t&&e.day!==void 0&&R(e).length>1&&(U(P.droppedDay(e)),e=le(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){let r=t?LNe(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){let r=t?HNe(e.quarter):e.quarter;n.push(Pe(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){let r=t?ANe(e.day):e.day;n.push(Pe(r)?r+1:`${r}+1`)}else n.push(1);for(let r of["hours","minutes","seconds","milliseconds"]){let i=e[r];n.push(typeof i>"u"?0:i)}return n}function na(e){let n=RI(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function hre(e){let n=RI(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function mre(e){let t=RI(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}var gre={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Sb=R(gre);function vre(e){return!!gre[e]}var VNe={binnedyear:1,binnedyearquarter:1,binnedyearquartermonth:1,binnedyearmonth:1,binnedyearmonthdate:1,binnedyearmonthdatehours:1,binnedyearmonthdatehoursminutes:1,binnedyearmonthdatehoursminutesseconds:1,binnedyearweek:1,binnedyearweekday:1,binnedyearweekdayhours:1,binnedyearweekdayhoursminutes:1,binnedyearweekdayhoursminutesseconds:1,binnedyeardayofyear:1},NNe={binnedutcyear:1,binnedutcyearquarter:1,binnedutcyearquartermonth:1,binnedutcyearmonth:1,binnedutcyearmonthdate:1,binnedutcyearmonthdatehours:1,binnedutcyearmonthdatehoursminutes:1,binnedutcyearmonthdatehoursminutesseconds:1,binnedutcyearweek:1,binnedutcyearweekday:1,binnedutcyearweekdayhours:1,binnedutcyearweekdayhoursminutes:1,binnedutcyearweekdayhoursminutesseconds:1,binnedutcyeardayofyear:1},Jut=x(x({},VNe),NNe);function ra(e){return ne(e)?e.binned:yre(e)}function yre(e){return e&&e.startsWith("binned")}function OI(e){return e.startsWith("utc")}function _Ne(e){return e.substring(3)}var kNe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Df(e){return Sb.filter(t=>xre(e,t))}function PI(e){let t=Df(e);return t[t.length-1]}function xre(e,t){let n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Cre(e,t,{end:n}={end:!1}){let r=Jp(t),i=OI(e)?"utc":"";function o(c){return c==="quarter"?`(${i}quarter(${r})-1)`:`${i}${c}(${r})`}let a,s={};for(let c of Sb)xre(e,c)&&(s[c]=o(c),a=c);return n&&(s[a]+="+1"),hre(s)}function $I(e){if(!e)return;let t=Df(e);return`timeUnitSpecifier(${ht(t)}, ${ht(kNe)})`}function bre(e,t,n){if(!e)return;let r=$I(e);return`${n||OI(e)?"utc":"time"}Format(${t}, ${r})`}function sn(e){if(!e)return;let t;return Q(e)?yre(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ne(e)&&(t=x(x({},e),e.unit?{unit:e.unit}:{})),OI(t.unit)&&(t.utc=!0,t.unit=_Ne(t.unit)),t}function Mre(e){let r=sn(e),{utc:t}=r,n=ie(r,["utc"]);return n.unit?(t?"utc":"")+R(n).map(i=>pt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+R(n).map(i=>pt(`_${i}_${n[i]}`)).join("")}function Eb(e,t=n=>n){let n=sn(e),r=PI(n.unit);if(r&&r!=="day"){let i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:a}=BI(r,n.step),s=k(x({},i),{[a]:+i[a]+o});return`${t(na(s))} - ${t(na(i))}`}}var TNe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function INe(e){return!!TNe[e]}function BI(e,t=1){if(INe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function wre(e){return e?.param}function Db(e){return!!e?.field&&e.equal!==void 0}function zb(e){return!!e?.field&&e.lt!==void 0}function Hb(e){return!!e?.field&&e.lte!==void 0}function Lb(e){return!!e?.field&&e.gt!==void 0}function Ab(e){return!!e?.field&&e.gte!==void 0}function Vb(e){if(e?.field){if(F(e.range)&&e.range.length===2)return!0;if(ae(e.range))return!0}return!1}function Nb(e){return!!e?.field&&(F(e.oneOf)||F(e.in))}function FNe(e){return!!e?.field&&e.valid!==void 0}function UI(e){return Nb(e)||Db(e)||Vb(e)||zb(e)||Lb(e)||Hb(e)||Ab(e)}function cs(e,t){return C0(e,{timeUnit:t,wrapTime:!0})}function RNe(e,t){return e.map(n=>cs(n,t))}function _b(e,t=!0){let{field:n}=e,r=sn(e.timeUnit),{unit:i,binned:o}=r||{},a=K(e,{expr:"datum"}),s=i?`time(${o?a:Cre(i,n)})`:a;if(Db(e))return`${s}===${cs(e.equal,i)}`;if(zb(e)){let c=e.lt;return`${s}<${cs(c,i)}`}else if(Lb(e)){let c=e.gt;return`${s}>${cs(c,i)}`}else if(Hb(e)){let c=e.lte;return`${s}<=${cs(c,i)}`}else if(Ab(e)){let c=e.gte;return`${s}>=${cs(c,i)}`}else{if(Nb(e))return`indexof([${RNe(e.oneOf,i).join(",")}], ${s}) !== -1`;if(FNe(e))return rh(s,e.valid);if(Vb(e)){let{range:c}=e,l=ae(c)?{signal:`${c.signal}[0]`}:c[0],u=ae(c)?{signal:`${c.signal}[1]`}:c[1];if(l!==null&&u!==null&&t)return"inrange("+s+", ["+cs(l,i)+", "+cs(u,i)+"])";let f=[];return l!==null&&f.push(`${s} >= ${cs(l,i)}`),u!==null&&f.push(`${s} <= ${cs(u,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${ht(e)}`)}function rh(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Sre(e){return UI(e)&&e.timeUnit?k(x({},e),{timeUnit:sn(e.timeUnit)}):e}var zf={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Ere(e){return e==="quantitative"||e==="temporal"}function kb(e){return e==="ordinal"||e==="nominal"}var r2=zf.quantitative,ih=zf.ordinal,ls=zf.temporal,oh=zf.nominal,ia=zf.geojson,uft=R(zf);function Dre(e){if(e)switch(e=e.toLowerCase(),e){case"q":case r2:return"quantitative";case"t":case ls:return"temporal";case"o":case ih:return"ordinal";case"n":case oh:return"nominal";case ia:return"geojson"}}var Ir={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},ah={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},vft=R(ah);function Hre(e,t){let n=ah[e],r=ah[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}var ONe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function jI(e){return ONe[e]}var Lre=new Set(["linear","log","pow","sqrt","symlog"]),Are=new Set([...Lre,"time","utc"]);function qI(e){return Lre.has(e)}var Vre=new Set(["quantile","quantize","threshold"]),PNe=new Set([...Are,...Vre,"sequential","identity"]),$Ne=new Set(["ordinal","bin-ordinal","point","band"]);function Rt(e){return $Ne.has(e)}function On(e){return PNe.has(e)}function B1(e){return Are.has(e)}function Vc(e){return Vre.has(e)}var Nre={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function _re(e){return!Q(e)&&!!e.name}function GI(e){return e?.param}function kre(e){return e?.unionWith}function Tre(e){return ne(e)&&"field"in e}var Ire={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},yft=R(Ire),zre=Ire,{type:xft,domain:Cft,range:bft,rangeMax:Mft,rangeMin:wft,scheme:Sft}=zre,BNe=ie(zre,["type","domain","range","rangeMax","rangeMin","scheme"]),Fre=R(BNe);function sh(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return B1(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return B1(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return B1(e);case"nice":return B1(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return On(e)&&!Ve(["log","time","utc","threshold","quantile"],e)}}function Tb(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Lc(e)?void 0:P.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Rre(e,t){return Ve([ih,oh],t)?e===void 0||Rt(e):t===ls?Ve([Ir.TIME,Ir.UTC,void 0],e):t===r2?qI(e)||Vc(e)||e===void 0:!0}function Ore(e,t,n=!1){if(!kr(e))return!1;switch(e){case Ct:case on:case Jo:case ss:case ni:case Ni:return B1(t)||t==="band"?!0:t==="point"?!n:!1;case $1:case go:case f1:case ho:case mo:case Z2:return B1(t)||Vc(t)||Ve(["band","point","ordinal"],t);case Rn:case ki:case Ti:return t!=="band";case vo:case wn:return t==="ordinal"||Vc(t)}}var p1={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},WI=p1.arc,b0=p1.area,M0=p1.bar,Pre=p1.image,w0=p1.line,Hf=p1.point,$re=p1.rect,Lf=p1.rule,Ib=p1.text,ch=p1.tick,Bre=p1.trail,lh=p1.circle,uh=p1.square,Fb=p1.geoshape;function Fi(e){return["line","area","trail"].includes(e)}function Nc(e){return["rect","bar","image","arc"].includes(e)}var Ure=new Set(R(p1));function ai(e){return e.type}var UNe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],jNe=["fill","fillOpacity"],jre=[...UNe,...jNe],qNe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},YI=R(qNe),qre={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},Gre={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},GNe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Rb=R(GNe);function us(e){return e&&e.band!=null}var Wre={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Yre=5,Xre={binSpacing:1,continuousBandSize:Yre,minBandSize:.25,timeUnitBandPosition:.5},Qre={binSpacing:0,continuousBandSize:Yre,minBandSize:.25,timeUnitBandPosition:.5},Kre={thickness:1};function Zre(e){return ai(e)?e.type:e}function Vf(e){let{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,a=dh(e);return Y(n)&&!vb(n.aggregate)&&i&&B1(i.get("type"))?YNe({fieldDef:n,channel:t,markDef:r,ref:a,config:o}):a}function YNe({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Fi(n.type)?r:je("invalid",n,i)===null?[XNe(e,t),r]:r}function XNe(e,t){let n=fh(e,!0),i=yo(t)==="y"?{field:{group:"height"}}:{value:0};return x({test:n},i)}function fh(e,t=!0){return rh(Q(e)?e:K(e,{expr:"datum"}),!t)}function Jre(e){let{datum:t}=e;return n2(t)?na(t):`${ht(t)}`}function fs(e,t,n,r){let i={};if(t&&(i.scale=t),Ri(e)){let{datum:o}=e;n2(o)?i.signal=na(o):ae(o)?i.signal=o.signal:x4(o)?i.signal=o.expr:i.value=o}else i.field=K(e,n);if(r){let{offset:o,band:a}=r;o&&(i.offset=o),a&&(i.band=a)}return i}function Af({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:a=.5}){let s=!ae(a)&&0<a&&a<1?"datum":void 0,c=K(t,{expr:s,suffix:i}),l=n!==void 0?K(n,{expr:s}):K(t,{suffix:o,expr:s}),u={};if(a===0||a===1){u.scale=e;let f=a===0?c:l;u.field=f}else{let f=ae(a)?`(1-${a.signal}) * ${c} + ${a.signal} * ${l}`:`${1-a} * ${c} + ${a} * ${l}`;u.signal=`scale("${e}", ${f})`}return r&&(u.offset=r),u}function eie({scaleName:e,fieldDef:t}){let n=K(t,{expr:"datum"}),r=K(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function dh({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:c,defaultRef:l,bandPosition:u}){if(t){if(_e(t)){let f=a?.get("type");if(En(t)){u??(u=U1({fieldDef:t,fieldDef2:n,markDef:r,config:i}));let{bin:d,timeUnit:p,type:h}=t;if(rt(d)||u&&p&&h===ls)return s?.impute?fs(t,o,{binSuffix:"mid"},{offset:c}):u&&!Rt(f)?Af({scaleName:o,fieldOrDatumDef:t,bandPosition:u,offset:c}):fs(t,o,ds(t,e)?{binSuffix:"range"}:{},{offset:c});if(an(d)){if(Y(n))return Af({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:u,offset:c});{let m=e===Ct?P1:po;U(P.channelRequiredForBinned(m))}}}return fs(t,o,Rt(f)?{binSuffix:"range"}:{},{offset:c,band:f==="band"?u??t.bandPosition??.5:void 0})}else if(or(t)){let f=t.value,d=c?{offset:c}:{};return x(x({},S0(e,f)),d)}}return Ie(l)&&(l=l()),l&&x(x({},l),c?{offset:c}:{})}function S0(e,t){return Ve(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ve(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:it(t)}function ps(e){return e&&e!=="number"&&e!=="time"}function nie(e,t,n){return`${e}(${t}${n?`, ${ht(n)}`:""})`}var QNe=" \u2013 ";function Nf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){if(ps(n))return bo({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});let a=rie(e,r,i),s=_c(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(s==="quantitative"){if(i&&o.normalizedNumberFormatType)return bo({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return bo({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(s==="temporal"&&o.timeFormatType&&Y(e)&&e.timeUnit===void 0)return bo({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(Tc(e)){let c=ZNe({field:a,timeUnit:Y(e)?sn(e.timeUnit)?.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:i2(e)&&e.scale?.type===Ir.UTC});return c?{signal:c}:void 0}if(t=XI({type:s,specifiedFormat:t,config:o,normalizeStack:i}),Y(e)&&rt(e.bin)){let c=K(e,{expr:r,binSuffix:"end"});return{signal:E0(a,c,t,n,o)}}else return t||_c(e)==="quantitative"?{signal:`${iie(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function rie(e,t,n){return Y(e)?n?`${K(e,{expr:t,suffix:"end"})}-${K(e,{expr:t,suffix:"start"})}`:K(e,{expr:t}):Jre(e)}function bo({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a??(a=rie(e,r,i)),a!=="datum.value"&&Y(e)&&rt(e.bin)){let s=K(e,{expr:r,binSuffix:"end"});return{signal:E0(a,s,t,n,o)}}return{signal:nie(n,a,t)}}function Pb(e,t,n,r,i,o){if(!(Q(r)&&ps(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&_c(e)==="quantitative"&&(i.normalizedNumberFormatType&&kc(e)&&e.stack==="normalize"||i.numberFormatType))){if(kc(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return XI({type:"quantitative",config:i,normalizeStack:!0});if(Tc(e)){let a=Y(e)?sn(e.timeUnit)?.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:KNe({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return XI({type:t,specifiedFormat:n,config:i})}}function $b(e,t,n){if(e&&(ae(e)||e==="number"||e==="time"))return e;if(Tc(t)&&n!=="time"&&n!=="utc")return Y(t)&&sn(t?.timeUnit)?.utc?"utc":"time"}function XI({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Q(t))return t;if(e===r2)return r?n.normalizedNumberFormat:n.numberFormat}function KNe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:$I(t)}:r?void 0:n.timeFormat)}function iie(e,t){return`format(${e}, "${t||""}")`}function tie(e,t,n,r){return ps(n)?nie(n,e,t):iie(e,(Q(t)?t:void 0)??r.numberFormat)}function E0(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return E0(e,t,i.numberFormat,i.numberFormatType,i);let o=tie(e,n,r,i),a=tie(t,n,r,i);return`${rh(e,!1)} ? "null" : ${o} + "${QNe}" + ${a}`}function ZNe({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Q(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):bre(t,e,o)}var C4="min",JNe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function QI(e){return e in JNe}function Bb(e){return!!e?.encoding}function Fr(e){return e&&(e.op==="count"||!!e.field)}function Ub(e){return e&&F(e)}function hs(e){return"row"in e||"column"in e}function jb(e){return!!e&&"header"in e}function Ic(e){return"facet"in e}function oie(e){return e.param}function aie(e){return e&&!Q(e)&&"repeat"in e}function KI(e){let{field:t,timeUnit:n,bin:r,aggregate:i}=e;return k(x(x(x({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:t})}function Gb(e){return"sort"in e}function U1({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(_e(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Y(e)){let{timeUnit:i,bin:o}=e;if(i&&!t)return Co("timeUnitBandPosition",n,r);if(rt(o))return .5}}function ZI({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){let s=Sn(e),c=je(a?"size":s,r,i,{vgChannel:s});if(c!==void 0)return c;if(Y(t)){let{timeUnit:l,bin:u}=t;if(l&&!n)return{band:Co("timeUnitBandSize",r,i)};if(rt(u)&&!Rt(o))return{band:1}}if(Nc(r.type))return o?Rt(o)?i[r.type]?.discreteBandSize||{band:1}:i[r.type]?.continuousBandSize:i[r.type]?.discreteBandSize}function Wb(e,t,n,r){return rt(e.bin)||e.timeUnit&&En(e)&&e.type==="temporal"?U1({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Yb(e){return e&&!!e.sort&&!e.field}function b4(e){return e&&"condition"in e}function kf(e){let t=e?.condition;return!!t&&!F(t)&&Y(t)}function M4(e){let t=e?.condition;return!!t&&!F(t)&&_e(t)}function sie(e){let t=e?.condition;return!!t&&(F(t)||or(t))}function Y(e){return e&&(!!e.field||e.aggregate==="count")}function _c(e){return e?.type}function Ri(e){return e&&"datum"in e}function oa(e){return En(e)&&!ph(e)||hh(e)}function JI(e){return En(e)&&e.type==="quantitative"&&!e.bin||hh(e)}function hh(e){return Ri(e)&&Pe(e.datum)}function _e(e){return Y(e)||Ri(e)}function En(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function or(e){return e&&"value"in e&&"value"in e}function i2(e){return e&&("scale"in e||"sort"in e)}function kc(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function cie(e){return e&&"legend"in e}function lie(e){return e&&("format"in e||"formatType"in e)}function uie(e){return Fn(e,["legend","axis","header","scale"])}function e_e(e){return"op"in e}function K(e,t={}){let n=e.field,r=t.prefix,i=t.suffix,o="";if(n_e(e))n=wI("count");else{let a;if(!t.nofn)if(e_e(e))a=e.op;else{let{bin:s,aggregate:c,timeUnit:l}=e;rt(s)?(a=yb(s),i=(t.binSuffix??"")+(t.suffix??"")):c?t2(c)?(o=`["${n}"]`,n=`argmax_${c.argmax}`):xo(c)?(o=`["${n}"]`,n=`argmin_${c.argmin}`):a=String(c):l&&!ra(l)&&(a=Mre(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}a&&(n=n?`${a}_${n}`:a)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?eh(n):t.expr?bI(n,t.expr)+o:rr(n)+o}function ph(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Y(e)&&!!e.bin;case"temporal":return!1}throw new Error(P.invalidFieldType(e.type))}function t_e(e){return i2(e)&&Vc(e.scale?.type)}function n_e(e){return e.aggregate==="count"}function r_e(e,t){let{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(rt(r))return`${n} (binned)`;if(i&&!ra(i)){let a=sn(i)?.unit;if(a)return`${n} (${Df(a).join("-")})`}else if(o)return t2(o)?`${n} for max ${o.argmax}`:xo(o)?`${n} for min ${o.argmin}`:`${h4(o)} of ${n}`;return n}function i_e(e){let{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(t2(t))return`${i} for argmax(${t.argmax})`;if(xo(t))return`${i} for argmin(${t.argmin})`;let o=r&&!ra(r)?sn(r):void 0,a=t||o?.unit||o?.maxbins&&"timeunit"||rt(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}var fie=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return i_e(e);default:return r_e(e,t)}},die=fie;function eF(e){die=e}function pie(){eF(fie)}function ms(e,t,{allowDisabling:n,includeDefault:r=!0}){let i=Xb(e)?.title;if(!Y(e))return i??e.title;let o=e,a=r?mh(o,t):void 0;return n?ct(i,o.title,a):i??o.title??a}function Xb(e){if(kc(e)&&e.axis)return e.axis;if(cie(e)&&e.legend)return e.legend;if(jb(e)&&e.header)return e.header}function mh(e,t){return die(e,t)}function Tf(e){if(lie(e)){let{format:t,formatType:n}=e;return{format:t,formatType:n}}else{let t=Xb(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function o_e(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Gb(e)&&F(e.sort))return"ordinal";let{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!t2(n)&&!xo(n))return"quantitative";if(i2(e)&&e.scale?.type)switch(ah[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function si(e){if(Y(e))return e;if(kf(e))return e.condition}function kt(e){if(_e(e))return e;if(M4(e))return e.condition}function tF(e,t,n,r={}){if(Q(e)||Pe(e)||D1(e)){let i=Q(e)?"string":Pe(e)?"number":"boolean";return U(P.primitiveChannelDef(t,i,e)),{value:e}}return _e(e)?qb(e,t,n,r):M4(e)?k(x({},e),{condition:qb(e.condition,t,n,r)}):e}function qb(e,t,n,r){if(lie(e)){let i=e,{format:a,formatType:s}=i,c=ie(i,["format","formatType"]);if(ps(s)&&!n.customFormatTypes)return U(P.customFormatTypeNotAllowed(t)),qb(c,t,n,r)}else{let a=kc(e)?"axis":cie(e)?"legend":jb(e)?"header":null;if(a&&e[a]){let o=e[a],{format:s,formatType:c}=o,l=ie(o,["format","formatType"]);if(ps(c)&&!n.customFormatTypes)return U(P.customFormatTypeNotAllowed(t)),qb(k(x({},e),{[a]:l}),t,n,r)}}return Y(e)?gh(e,t,r):a_e(e)}function a_e(e){let t=e.type;if(t)return e;let{datum:n}=e;return t=Pe(n)?"quantitative":Q(n)?"nominal":n2(n)?"temporal":void 0,k(x({},e),{type:t})}function gh(e,t,{compositeMark:n=!1}={}){let{aggregate:r,timeUnit:i,bin:o,field:a}=e,s=x({},e);if(!n&&r&&!Mf(r)&&!t2(r)&&!xo(r)&&(U(P.invalidAggregate(r)),delete s.aggregate),i&&(s.timeUnit=sn(i)),a&&(s.field=`${a}`),rt(o)&&(s.bin=Sf(o,t)),an(o)&&!bt(t)&&U(P.channelShouldNotBeUsedForBinned(t)),En(s)){let{type:l}=s,u=Dre(l);l!==u&&(s.type=u),l!=="quantitative"&&vb(r)&&(U(P.invalidFieldTypeForCountAggregate(l,r)),s.type="quantitative")}else if(!hb(t)){let l=o_e(s,t);s.type=l}if(En(s)){let{compatible:l,warning:u}=s_e(s,t)||{};l===!1&&U(u)}if(Gb(s)&&Q(s.sort)){let{sort:l}=s;if(QI(l))return k(x({},s),{sort:{encoding:l}});let u=l.substr(1);if(l.charAt(0)==="-"&&QI(u))return k(x({},s),{sort:{encoding:u,order:"descending"}})}if(jb(s)){let{header:l}=s;if(l){let c=l,{orient:u}=c,f=ie(c,["orient"]);if(u)return k(x({},s),{header:k(x({},f),{labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u})})}}return s}function Sf(e,t){return D1(e)?{maxbins:NI(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?k(x({},e),{maxbins:NI(t)}):e}var _f={compatible:!0};function s_e(e,t){let n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case R1:case O1:case gf:return ph(e)?_f:{compatible:!1,warning:P.channelShouldBeDiscrete(t)};case Ct:case on:case Jo:case ss:case Rn:case ki:case Ti:case y0:case x0:case vf:case Hc:case yf:case xf:case Z2:case ni:case Ni:case Cf:return _f;case ii:case oi:case ri:case _i:return n!==r2?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:_f;case f1:case ho:case mo:case go:case $1:case K2:case Q2:case P1:case po:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:_f;case wn:case vo:return!ph(e)&&!t_e(e)?{compatible:!1,warning:P.channelShouldBeDiscreteOrDiscretizing(t)}:_f;case g4:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:_f}}function Tc(e){let{formatType:t}=Tf(e);return t==="time"||!t&&c_e(e)}function c_e(e){return e&&(e.type==="temporal"||Y(e)&&!!e.timeUnit)}function C0(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){let o=t&&sn(t)?.unit,a=o||n==="temporal",s;return x4(e)?s=e.expr:ae(e)?s=e.signal:n2(e)?(a=!0,s=na(e)):(Q(e)||Pe(e))&&a&&(s=`datetime(${ht(e)})`,vre(o)&&(Pe(e)&&e<1e4||Q(e)&&isNaN(Date.parse(e)))&&(s=na({[o]:e}))),s?r&&a?`time(${s})`:s:i?void 0:ht(e)}function Qb(e,t){let{type:n}=e;return t.map(r=>{let i=Y(e)&&!ra(e.timeUnit)?e.timeUnit:void 0,o=C0(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function ds(e,t){return rt(e.bin)?kr(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}var nF={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Fc(e){return e?.condition}var Kb=["domain","grid","labels","ticks","title"],hie={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},rF={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},mie=k(x({},rF),{style:1,labelExpr:1,encoding:1});function iF(e){return!!mie[e]}var b8t=R(mie),u_e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},oF=R(u_e);function xr(e){return"mark"in e}var gs=class{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return xr(t)?Zre(t.mark)===this.name:!1}};function vs(e,t){let n=e&&e[t];return n?F(n)?as(n,r=>!!r.field):Y(n)||kf(n):!1}function aF(e,t){let n=e&&e[t];return n?F(n)?as(n,r=>!!r.field):Y(n)||Ri(n)||M4(n):!1}function Zb(e,t){if(bt(t)){let n=e[t];if((Y(n)||Ri(n))&&(kb(n.type)||Y(n)&&n.timeUnit)){let r=bf(t);return aF(e,r)}}return!1}function If(e){return as(Tne,t=>{if(vs(e,t)){let n=e[t];if(F(n))return as(n,r=>!!r.aggregate);{let r=si(n);return r&&!!r.aggregate}}return!1})}function Jb(e,t){let n=[],r=[],i=[],o=[],a={};return vh(e,(s,c)=>{if(Y(s)){let l=s,{field:u,aggregate:f,bin:d,timeUnit:p}=l,h=ie(l,["field","aggregate","bin","timeUnit"]);if(f||p||d){let g=Xb(s)?.title,v=K(s,{forAs:!0}),y=k(x(x({},g?[]:{title:ms(s,t,{allowDisabling:!0})}),h),{field:v});if(f){let C;if(t2(f)?(C="argmax",v=K({op:"argmax",field:f.argmax},{forAs:!0}),y.field=`${v}.${u}`):xo(f)?(C="argmin",v=K({op:"argmin",field:f.argmin},{forAs:!0}),y.field=`${v}.${u}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(C=f),C){let b={op:C,as:v};u&&(b.field=u),o.push(b)}}else if(n.push(v),En(s)&&rt(d)){if(r.push({bin:d,field:u,as:v}),n.push(K(s,{binSuffix:"end"})),ds(s,c)&&n.push(K(s,{binSuffix:"range"})),bt(c)){let C={field:`${v}_end`};a[`${c}2`]=C}y.bin="binned",hb(c)||(y.type=r2)}else if(p&&!ra(p)){i.push({timeUnit:p,field:u,as:v});let C=En(s)&&s.type!==ls&&"time";C&&(c===y0||c===Hc?y.formatType=C:Gne(c)?y.legend=x({formatType:C},y.legend):bt(c)&&(y.axis=x({formatType:C},y.axis)))}a[c]=y}else n.push(u),a[c]=e[c]}else a[c]=e[c]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function f_e(e,t,n){let r=Xne(t,n);if(r){if(r==="binned"){let i=e[t===P1?Ct:on];return!!(Y(i)&&Y(e[t])&&an(i.bin))}}else return!1;return!0}function gie(e,t,n,r){let i={};for(let o of R(e))pb(o)||U(P.invalidEncodingChannel(o));for(let o of $ne){if(!e[o])continue;let a=e[o];if(Ac(o)){let s=Pne(o),c=i[s];if(Y(c)&&Ere(c.type)&&Y(a)&&!c.timeUnit){U(P.offsetNestedInsideContinuousPositionScaleDropped(s));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(U(P.REPLACE_ANGLE_WITH_THETA),o=ni),!f_e(e,o,t)){U(P.incompatibleChannel(o,t));continue}if(o===$1&&t==="line"&&si(e[o])?.aggregate){U(P.LINE_WITH_VARYING_SIZE);continue}if(o===Rn&&(n?"fill"in e:"stroke"in e)){U(P.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===x0||o===g4&&!F(a)&&!or(a)||o===Hc&&F(a)){if(a){if(o===g4){let s=e[o];if(Yb(s)){i[o]=s;continue}}i[o]=te(a).reduce((s,c)=>(Y(c)?s.push(gh(c,o)):U(P.emptyFieldDef(c,o)),s),[])}}else{if(o===Hc&&a===null)i[o]=null;else if(!Y(a)&&!Ri(a)&&!or(a)&&!b4(a)&&!ae(a)){U(P.emptyFieldDef(a,o));continue}i[o]=tF(a,o,r)}}return i}function w4(e,t){let n={};for(let r of R(e)){let i=tF(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function vie(e){let t=[];for(let n of R(e))if(vs(e,n)){let r=e[n],i=te(r);for(let o of i)Y(o)?t.push(o):kf(o)&&t.push(o.condition)}return t}function vh(e,t,n){if(e)for(let r of R(e)){let i=e[r];if(F(i))for(let o of i)t.call(n,o,r);else t.call(n,i,r)}}function yie(e,t,n,r){return e?R(e).reduce((i,o)=>{let a=e[o];return F(a)?a.reduce((s,c)=>t.call(r,s,c,o),i):t.call(r,i,a,o)},n):n}function eM(e,t){return R(t).reduce((n,r)=>{switch(r){case Ct:case on:case yf:case Cf:case xf:case P1:case po:case Jo:case ss:case ni:case K2:case Ni:case Q2:case ri:case ii:case _i:case oi:case y0:case wn:case Z2:case Hc:return n;case g4:if(e==="line"||e==="trail")return n;case x0:case vf:{let i=t[r];if(F(i)||Y(i))for(let o of te(i))o.aggregate||n.push(K(o,{}));return n}case $1:if(e==="trail")return n;case Rn:case ki:case Ti:case f1:case ho:case mo:case vo:case go:{let i=si(t[r]);return i&&!i.aggregate&&n.push(K(i,{})),n}}},[])}function xie(e){let o=e,{tooltip:t}=o,n=ie(o,["tooltip"]);if(!t)return{filteredEncoding:n};let r,i;if(F(t)){for(let a of t)a.aggregate?(r||(r=[]),r.push(a)):(i||(i=[]),i.push(a));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return F(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function yh(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};let i=e.map(({fieldPrefix:a,titlePrefix:s})=>{let c=r?` of ${nM(t)}`:"";return{field:a+t.field,type:t.type,title:ae(s)?{signal:`${s}"${escape(c)}"`}:s+c}}),o=vie(n).map(uie);return{tooltip:[...i,...Vi(o,be)]}}function nM(e){let{title:t,field:n}=e;return ct(t,n)}function Ff(e,t,n,r,i){let{scale:o,axis:a}=n;return({partName:s,mark:c,positionPrefix:l,endPositionPrefix:u=void 0,extraEncoding:f={}})=>{let d=nM(n);return sF(e,s,i,{mark:c,encoding:x(x(x({[t]:x(x(x({field:`${l}_${n.field}`,type:n.type},d!==void 0?{title:d}:{}),o!==void 0?{scale:o}:{}),a!==void 0?{axis:a}:{})},Q(u)?{[`${t}2`]:{field:`${u}_${n.field}`}}:{}),r),f)})}}function sF(e,t,n,r){let{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||e[t]===void 0&&n[t]?[k(x({},r),{mark:x(k(x(x(x(x(x({},n[t]),i?{clip:i}:{}),o?{color:o}:{}),a?{opacity:a}:{}),ai(r.mark)?r.mark:{type:r.mark}),{style:`${s}-${String(t)}`}),D1(e[t])?{}:e[t])})]:[]}function rM(e,t,n){let{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],c=r[`${i}Error2`];return{continuousAxisChannelDef:tM(o,n),continuousAxisChannelDef2:tM(a,n),continuousAxisChannelDefError:tM(s,n),continuousAxisChannelDefError2:tM(c,n),continuousAxis:i}}function tM(e,t){if(e?.aggregate){let n=e,{aggregate:r}=n,i=ie(n,["aggregate"]);return r!==t&&U(P.errorBarContinuousAxisHasCustomizedAggregate(r,t)),i}else return e}function iM(e,t){let{mark:n,encoding:r}=e,{x:i,y:o}=r;if(ai(n)&&n.orient)return n.orient;if(oa(i)){if(oa(o)){let a=Y(i)&&i.aggregate,s=Y(o)&&o.aggregate;if(!a&&s===t)return"vertical";if(!s&&a===t)return"horizontal";if(a===t&&s===t)throw new Error("Both x and y cannot have aggregate");return Tc(o)&&!Tc(i)?"horizontal":"vertical"}return"horizontal"}else{if(oa(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}var xh="boxplot",Cie=["box","median","outliers","rule","ticks"],bie=new gs(xh,cF);function Mie(e){return Pe(e)?"tukey":e}function cF(e,{config:t}){e=k(x({},e),{encoding:w4(e.encoding,t)});let ui=e,{mark:n,encoding:r,params:i,projection:o}=ui,a=ie(ui,["mark","encoding","params","projection"]),s=ai(n)?n:{type:n};i&&U(P.selectionNotSupported("boxplot"));let c=s.extent??t.boxplot.extent,l=je("size",s,t),u=s.invalid,f=Mie(c),{bins:d,timeUnits:p,transform:h,continuousAxisChannelDef:m,continuousAxis:g,groupby:v,aggregate:y,encodingWithoutContinuousAxis:C,ticksOrient:b,boxOrient:M,customTooltipWithoutAggregatedField:S}=p_e(e,c,t),ma=C,{color:w,size:E}=ma,D=ie(ma,["color","size"]),z=jae=>Ff(s,g,m,jae,t.boxplot),H=z(D),j=z(C),L=z(x(x({},D),E?{size:E}:{})),N=yh([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,C),A={type:"tick",color:"black",opacity:1,orient:b,invalid:u,aria:!1},T=f==="min-max"?N:yh([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,C),G=[...H({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:T}),...H({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:T}),...H({partName:"ticks",mark:A,positionPrefix:"lower_whisker",extraEncoding:T}),...H({partName:"ticks",mark:A,positionPrefix:"upper_whisker",extraEncoding:T})],X=[...f!=="tukey"?G:[],...j({partName:"box",mark:k(x({type:"bar"},l?{size:l}:{}),{orient:M,invalid:u,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:N}),...L({partName:"median",mark:k(x(x({type:"tick",invalid:u},ne(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),l?{size:l}:{}),{orient:b,aria:!1}),positionPrefix:"mid_box",extraEncoding:N})];if(f==="min-max")return k(x({},a),{transform:(a.transform??[]).concat(h),layer:X});let J=`datum["lower_box_${m.field}"]`,we=`datum["upper_box_${m.field}"]`,Se=`(${we} - ${J})`,Ze=`${J} - ${c} * ${Se}`,Et=`${we} + ${c} * ${Se}`,ut=`datum["${m.field}"]`,Jt={joinaggregate:wie(m.field),groupby:v},Ss={transform:[{filter:`(${Ze} <= ${ut}) && (${ut} <= ${Et})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...y],groupby:v}],layer:G},H8=D,{tooltip:j0}=H8,_4=ie(H8,["tooltip"]),{scale:me,axis:Je}=m,ot=nM(m),oe=Fn(Je,["title"]),$r=sF(s,"outliers",t.boxplot,{transform:[{filter:`(${ut} < ${Ze}) || (${ut} > ${Et})`}],mark:"point",encoding:x(x(x({[g]:x(x(x({field:m.field,type:m.type},ot!==void 0?{title:ot}:{}),me!==void 0?{scale:me}:{}),Qe(oe)?{}:{axis:oe})},_4),w?{color:w}:{}),S?{tooltip:S}:{})})[0],Lt,li=[...d,...p,Jt];return $r?Lt={transform:li,layer:[$r,Ss]}:(Lt=Ss,Lt.transform.unshift(...li)),k(x({},a),{layer:[Lt,{transform:h,layer:X}]})}function wie(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function p_e(e,t,n){let r=iM(e,xh),{continuousAxisChannelDef:i,continuousAxis:o}=rM(e,r,xh),a=i.field,s=Mie(t),c=[...wie(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:(s==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(s==="min-max"?"upper_whisker_":"max_")+a}],l=s==="min-max"||s==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],S=e.encoding,{[o]:u}=S,f=ie(S,[k4(o)]),{customTooltipWithoutAggregatedField:d,filteredEncoding:p}=xie(f),{bins:h,timeUnits:m,aggregate:g,groupby:v,encoding:y}=Jb(p,n),C=r==="vertical"?"horizontal":"vertical",b=r,M=[...h,...m,{aggregate:[...g,...c],groupby:v},...l];return{bins:h,timeUnits:m,transform:M,groupby:v,aggregate:g,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:y,ticksOrient:C,boxOrient:b,customTooltipWithoutAggregatedField:d}}var oM="errorbar",Eie=["ticks","rule"],Die=new gs(oM,lF);function lF(e,{config:t}){e=k(x({},e),{encoding:w4(e.encoding,t)});let{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:c,tooltipEncoding:l}=uF(e,oM,t);delete o.size;let u=Ff(s,i,r,o,t.errorbar),f=s.thickness,d=s.size,p=x(x({type:"tick",orient:a,aria:!1},f!==void 0?{thickness:f}:{}),d!==void 0?{size:d}:{}),h=[...u({partName:"ticks",mark:p,positionPrefix:"lower",extraEncoding:l}),...u({partName:"ticks",mark:p,positionPrefix:"upper",extraEncoding:l}),...u({partName:"rule",mark:x({type:"rule",ariaRoleDescription:"errorbar"},f!==void 0?{size:f}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return x(k(x({},c),{transform:n}),h.length>1?{layer:h}:x({},h[0]))}function h_e(e,t){let{encoding:n}=e;if(m_e(n))return{orient:iM(e,t),inputType:"raw"};let r=g_e(n),i=v_e(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);let s=n.x2,c=n.y2;if(_e(s)&&_e(c))throw new Error(`${t} cannot have both x2 and y2`);if(_e(s)){if(oa(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(_e(c)){if(oa(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{let s=n.xError,c=n.xError2,l=n.yError,u=n.yError2;if(_e(c)&&!_e(s))throw new Error(`${t} cannot have xError2 without xError`);if(_e(u)&&!_e(l))throw new Error(`${t} cannot have yError2 without yError`);if(_e(s)&&_e(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(_e(s)){if(oa(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(_e(l)){if(oa(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function m_e(e){return(_e(e.x)||_e(e.y))&&!_e(e.x2)&&!_e(e.y2)&&!_e(e.xError)&&!_e(e.xError2)&&!_e(e.yError)&&!_e(e.yError2)}function g_e(e){return _e(e.x2)||_e(e.y2)}function v_e(e){return _e(e.xError)||_e(e.xError2)||_e(e.yError)||_e(e.yError2)}function uF(e,t,n){var X,J,we;let G=e,{mark:r,encoding:i,params:o,projection:a}=G,s=ie(G,["mark","encoding","params","projection"]),c=ai(r)?r:{type:r};o&&U(P.selectionNotSupported(t));let{orient:l,inputType:u}=h_e(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:h,continuousAxis:m}=rM(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:v,tooltipSummary:y,tooltipTitleWithFieldName:C}=y_e(c,f,d,p,h,u,t,n),Se=i,{[m]:b,[X=m==="x"?"x2":"y2"]:M,[J=m==="x"?"xError":"yError"]:S,[we=m==="x"?"xError2":"yError2"]:w}=Se,E=ie(Se,[k4(m),k4(X),k4(J),k4(we)]),{bins:D,timeUnits:z,aggregate:H,groupby:j,encoding:L}=Jb(E,n),N=[...H,...g],A=u!=="raw"?[]:j,T=yh(y,f,L,C);return{transform:[...s.transform??[],...D,...z,...N.length===0?[]:[{aggregate:N,groupby:A}],...v],groupby:A,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:L,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:s,tooltipEncoding:T}}function y_e(e,t,n,r,i,o,a,s){let c=[],l=[],u=t.field,f,d=!1;if(o==="raw"){let p=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":s.errorbar.center,h=e.extent?e.extent:p==="mean"?"stderr":"iqr";if(p==="median"!=(h==="iqr")&&U(P.errorBarCenterIsUsedWithWrongExtent(p,h,a)),h==="stderr"||h==="stdev")c=[{op:h,field:u,as:`extent_${u}`},{op:p,field:u,as:`center_${u}`}],l=[{calculate:`datum["center_${u}"] + datum["extent_${u}"]`,as:`upper_${u}`},{calculate:`datum["center_${u}"] - datum["extent_${u}"]`,as:`lower_${u}`}],f=[{fieldPrefix:"center_",titlePrefix:h4(p)},{fieldPrefix:"upper_",titlePrefix:Sie(p,h,"+")},{fieldPrefix:"lower_",titlePrefix:Sie(p,h,"-")}],d=!0;else{let m,g,v;h==="ci"?(m="mean",g="ci0",v="ci1"):(m="median",g="q1",v="q3"),c=[{op:g,field:u,as:`lower_${u}`},{op:v,field:u,as:`upper_${u}`},{op:m,field:u,as:`center_${u}`}],f=[{fieldPrefix:"upper_",titlePrefix:ms({field:u,aggregate:v,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:ms({field:u,aggregate:g,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:ms({field:u,aggregate:m,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&U(P.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${u}`},{calculate:`datum["${u}"]`,as:`lower_${u}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:u}],l=[{calculate:`datum["${u}"] + datum["${r.field}"]`,as:`upper_${u}`}],i?l.push({calculate:`datum["${u}"] + datum["${i.field}"]`,as:`lower_${u}`}):l.push({calculate:`datum["${u}"] - datum["${r.field}"]`,as:`lower_${u}`}));for(let p of l)f.push({fieldPrefix:p.as.substring(0,6),titlePrefix:X2(X2(p.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:c,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Sie(e,t,n){return`${h4(e)} ${n} ${t}`}var aM="errorband",zie=["band","borders"],Hie=new gs(aM,fF);function fF(e,{config:t}){e=k(x({},e),{encoding:w4(e.encoding,t)});let{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:c}=uF(e,aM,t),l=a,u=Ff(l,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0,d={type:f?"area":"rect"},p={type:f?"line":"rule"},h=x(x({},l.interpolate?{interpolate:l.interpolate}:{}),l.tension&&l.interpolate?{tension:l.tension}:{});return f?(d=k(x(x({},d),h),{ariaRoleDescription:"errorband"}),p=k(x(x({},p),h),{aria:!1})):l.interpolate?U(P.errorBand1DNotSupport("interpolate")):l.tension&&U(P.errorBand1DNotSupport("tension")),k(x({},s),{transform:n,layer:[...u({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c}),...u({partName:"borders",mark:p,positionPrefix:"lower",extraEncoding:c}),...u({partName:"borders",mark:p,positionPrefix:"upper",extraEncoding:c})]})}var Lie={};function dF(e,t,n){let r=new gs(e,t);Lie[e]={normalizer:r,parts:n}}function Aie(){return R(Lie)}dF(xh,cF,Cie);dF(oM,lF,Eie);dF(aM,fF,zie);var Vie=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"];var pF={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},hF={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Nie=R(pF),_ie=R(hF),x_e={header:1,headerRow:1,headerColumn:1,headerFacet:1},mF=R(x_e);var sM=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],kie={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},gF={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},D5t=R(gF);var ci="_vgsid_",Tie={point:{on:"click",fields:[ci],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Ch(e){return e==="legend"||!!e?.legend}function cM(e){return Ch(e)&&ne(e)}function Rf(e){return!!e?.select}function lM(e){let t=[];for(let r of e||[]){if(Rf(r))continue;let n=r,{expr:i,bind:o}=n,a=ie(n,["expr","bind"]);if(o&&i){let s=k(x({},a),{bind:o,init:i});t.push(s)}else{let s=x(x(x({},a),i?{update:i}:{}),o?{bind:o}:{});t.push(s)}}return t}function vF(e){return S4(e)||Of(e)||bh(e)}function bh(e){return"concat"in e}function S4(e){return"vconcat"in e}function Of(e){return"hconcat"in e}function yF({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function j1(e){return ne(e)&&e.step!==void 0}function xF(e){return e.view||e.width||e.height}var CF=20,C_e={align:1,bounds:1,center:1,columns:1,spacing:1},b_e=R(C_e);function Iie(e,t,n){let r=n[t],i={},{spacing:o,columns:a}=r;o!==void 0&&(i.spacing=o),a!==void 0&&(Ic(e)&&!hs(e.facet)||bh(e))&&(i.columns=a),S4(e)&&(i.columns=1);for(let s of b_e)if(e[s]!==void 0)if(s==="spacing"){let c=e[s];i[s]=Pe(c)?c:{row:c.row??o,column:c.column??o}}else i[s]=e[s];return i}function Mh(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function D0(e,t){let n=Pf(e,t);return j1(n)?n.step:Oie}function Pf(e,t){let n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ct(n,{step:e.step})}var Oie=20,M_e={continuousWidth:200,continuousHeight:200,step:Oie};var w_e={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:M_e,mark:Gre,arc:{},area:{},bar:Xre,circle:{},geoshape:{},image:{},line:{},point:{},rect:Qre,rule:{color:"black"},square:{},text:{color:"black"},tick:Kre,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Nre,projection:{},legend:kie,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Tie,style:{},title:{},facet:{spacing:CF},concat:{spacing:CF},normalizedNumberFormat:".0%"},Rc=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Fie={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Rie={blue:Rc[0],orange:Rc[1],red:Rc[2],teal:Rc[3],green:Rc[4],yellow:Rc[5],purple:Rc[6],pink:Rc[7],brown:Rc[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function S_e(e={}){return{signals:[{name:"color",value:ne(e)?x(x({},Rie),e):Rie}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function E_e(e){return{signals:[{name:"fontSize",value:ne(e)?x(x({},Fie),e):Fie}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function D_e(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function Pie(e){let t=R(e||{}),n={};for(let r of t){let i=e[r];n[r]=Fc(i)?bb(i):Tr(i)}return n}function z_e(e){let t=R(e),n={};for(let r of t)n[r]=Pie(e[r]);return n}var H_e=[...Rb,...oF,...mF,"background","padding","legend","lineBreak","scale","style","title","view"];function uM(e={}){let c=e,{color:t,font:n,fontSize:r,selection:i}=c,o=ie(c,["color","font","fontSize","selection"]),a=Fa({},le(w_e),n?D_e(n):{},t?S_e(t):{},r?E_e(r):{},o||{});i&&Qs(a,"selection",i,!0);let s=Fn(a,H_e);for(let l of["background","lineBreak","padding"])a[l]&&(s[l]=Tr(a[l]));for(let l of Rb)a[l]&&(s[l]=ir(a[l]));for(let l of oF)a[l]&&(s[l]=Pie(a[l]));for(let l of mF)a[l]&&(s[l]=ir(a[l]));return a.legend&&(s.legend=ir(a.legend)),a.scale&&(s.scale=ir(a.scale)),a.style&&(s.style=z_e(a.style)),a.title&&(s.title=ir(a.title)),a.view&&(s.view=ir(a.view)),s}var L_e=new Set(["view",...Ure]),A_e=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],V_e=x({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},qre);function $ie(e){e=le(e);for(let t of A_e)delete e[t];if(e.axis)for(let t in e.axis)Fc(e.axis[t])&&delete e.axis[t];if(e.legend)for(let t of Vie)delete e.legend[t];if(e.mark){for(let t of YI)delete e.mark[t];e.mark.tooltip&&ne(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(lM(e.params)),delete e.params);for(let t of L_e){for(let r of YI)delete e[t][r];let n=V_e[t];if(n)for(let r of n)delete e[t][r];__e(e,t)}for(let t of Aie())delete e[t];N_e(e);for(let t in e)ne(e[t])&&Qe(e[t])&&delete e[t];return Qe(e)?void 0:e}function N_e(e){let{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=xb(e.title);Qe(t)||(e.style["group-title"]=x(x({},e.style["group-title"]),t)),Qe(n)||(e.style["group-subtitle"]=x(x({},e.style["group-subtitle"]),n)),Qe(r)?delete e.title:e.title=r}function __e(e,t,n,r){let i=r?e[t][r]:e[t];t==="view"&&(n="cell");let o=x(x({},i),e.style[n??t]);Qe(o)||(e.style[n??t]=o),r||delete e[t]}function Oc(e){return"layer"in e}function bF(e){return"repeat"in e}function Bie(e){return!F(e.repeat)&&e.repeat.layer}var E4=class{map(t,n){return Ic(t)?this.mapFacet(t,n):bF(t)?this.mapRepeat(t,n):Of(t)?this.mapHConcat(t,n):S4(t)?this.mapVConcat(t,n):bh(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Oc(t))return this.mapLayer(t,n);if(xr(t))return this.mapUnit(t,n);throw new Error(P.invalidSpec(t))}mapLayer(t,n){return k(x({},t),{layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))})}mapHConcat(t,n){return k(x({},t),{hconcat:t.hconcat.map(r=>this.map(r,n))})}mapVConcat(t,n){return k(x({},t),{vconcat:t.vconcat.map(r=>this.map(r,n))})}mapConcat(t,n){let o=t,{concat:r}=o,i=ie(o,["concat"]);return k(x({},i),{concat:r.map(a=>this.map(a,n))})}mapFacet(t,n){return k(x({},t),{spec:this.map(t.spec,n)})}mapRepeat(t,n){return k(x({},t),{spec:this.map(t.spec,n)})}};var k_e={zero:1,center:1,normalize:1};function T_e(e){return e in k_e}var I_e=new Set([WI,M0,b0,Lf,Hf,lh,uh,w0,Ib,ch]),F_e=new Set([M0,b0,WI]);function $f(e){return Y(e)&&_c(e)==="quantitative"&&!e.bin}function Uie(e,t,{orient:n,type:r}){let i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),a=e[t],s=e[i];if(Y(a)&&Y(s))if($f(a)&&$f(s)){if(a.stack)return t;if(s.stack)return i;let c=Y(a)&&!!a.aggregate,l=Y(s)&&!!s.aggregate;if(c!==l)return c?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if($f(a))return t;if($f(s))return i}else{if($f(a))return o&&n==="vertical"?void 0:t;if($f(s))return o&&n==="horizontal"?void 0:i}}function R_e(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function fM(e,t){let n=ai(e)?e:{type:e},r=n.type;if(!I_e.has(r))return null;let i=Uie(t,"x",n)||Uie(t,"theta",n);if(!i)return null;let o=t[i],a=Y(o)?K(o,{}):void 0,s=R_e(i),c=[],l=new Set;if(t[s]){let m=t[s],g=Y(m)?K(m,{}):void 0;g&&g!==a&&(c.push(s),l.add(g))}let u=s==="x"?"xOffset":"yOffset",f=t[u],d=Y(f)?K(f,{}):void 0;d&&d!==a&&(c.push(u),l.add(d));let p=Bne.reduce((m,g)=>{if(g!=="tooltip"&&vs(t,g)){let v=t[g];for(let y of te(v)){let C=si(y);if(C.aggregate)continue;let b=K(C,{});(!b||!l.has(b))&&m.push({channel:g,fieldDef:C})}}return m},[]),h;return o.stack!==void 0?D1(o.stack)?h=o.stack?"zero":null:h=o.stack:F_e.has(r)&&(h="zero"),!h||!T_e(h)||If(t)&&p.length===0?null:o?.scale?.type&&o?.scale?.type!==Ir.LINEAR?(o?.stack&&U(P.cannotStackNonLinearScale(o.scale.type)),null):_e(t[_r(i)])?(o.stack!==void 0&&U(P.cannotStackRangedMark(i)),null):(Y(o)&&o.aggregate&&!Jne.has(o.aggregate)&&U(P.stackNonSummativeAggregate(o.aggregate)),{groupbyChannels:c,groupbyFields:l,fieldChannel:i,impute:o.impute===null?!1:Fi(r),stackBy:p,offset:h})}function dM(e,t,n){let r=ir(e),i=je("orient",r,n);if(r.orient=$_e(r.type,t,i),i!==void 0&&i!==r.orient&&U(P.orientOverridden(r.orient,i)),r.type==="bar"&&r.orient){let s=je("cornerRadiusEnd",r,n);if(s!==void 0){let c=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Wre[r.orient];for(let l of c)r[l]=s;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}return je("opacity",r,n)===void 0&&(r.opacity=P_e(r.type,t)),je("cursor",r,n)===void 0&&(r.cursor=O_e(r,t,n)),r}function O_e(e,t,n){return t.href||e.href||je("href",e,n)?"pointer":e.cursor}function P_e(e,t){if(Ve([Hf,ch,lh,uh],e)&&!If(t))return .7}function jie(e,t,{graticule:n}){if(n)return!1;let r=Co("filled",e,t),i=e.type;return ct(r,i!==Hf&&i!==w0&&i!==Lf)}function $_e(e,t,n){switch(e){case Hf:case lh:case uh:case Ib:case $re:case Pre:return}let{x:r,y:i,x2:o,y2:a}=t;switch(e){case M0:if(Y(r)&&(an(r.bin)||Y(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Y(i)&&(an(i.bin)||Y(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o)return(Y(r)&&r.type===r2&&!rt(r.bin)||hh(r))&&Y(i)&&an(i.bin)?"horizontal":"vertical";if(!a)return(Y(i)&&i.type===r2&&!rt(i.bin)||hh(i))&&Y(r)&&an(r.bin)?"vertical":"horizontal"}case Lf:if(o&&!(Y(r)&&an(r.bin))&&a&&!(Y(i)&&an(i.bin)))return;case b0:if(a)return Y(i)&&an(i.bin)?"horizontal":"vertical";if(o)return Y(r)&&an(r.bin)?"vertical":"horizontal";if(e===Lf){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case w0:case ch:{let s=JI(r),c=JI(i);if(n)return n;if(s&&!c)return e!=="tick"?"horizontal":"vertical";if(!s&&c)return e!=="tick"?"vertical":"horizontal";if(s&&c)return"vertical";{let l=En(r)&&r.type===ls,u=En(i)&&i.type===ls;if(l&&!u)return"vertical";if(!l&&u)return"horizontal"}return}}return"vertical"}function B_e(e){let i=e,{point:t,line:n}=i,r=ie(i,["point","line"]);return R(r).length>1?r:r.type}function U_e(e){for(let t of["line","area","rule","trail"])e[t]&&(e=k(x({},e),{[t]:Fn(e[t],["point","line"])}));return e}function MF(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ne(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ne(t.point)?t.point:{}:void 0}function qie(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}var pM=class{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(xr(t)){let{mark:r,encoding:i}=t,o=ai(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!MF(o,n[o.type],i);case"area":return!!MF(o,n[o.type],i)||!!qie(o,n[o.type])}}return!1}run(t,n,r){let{config:i}=n,y=t,{params:o,projection:a,mark:s,name:c,encoding:l}=y,u=ie(y,["params","projection","mark","name","encoding"]),f=w4(l,i),d=ai(s)?s:{type:s},p=MF(d,i[d.type],f),h=d.type==="area"&&qie(d,i[d.type]),m=[k(x({name:c},o?{params:o}:{}),{mark:B_e(x(x({},d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{}),d)),encoding:Fn(f,["shape"])})],g=fM(dM(d,f,i),f),v=f;if(g){let{fieldChannel:C,offset:b}=g;v=k(x({},f),{[C]:x(x({},f[C]),b?{stack:b}:{})})}return v=Fn(v,["y2","x2"]),h&&m.push(k(x({},a?{projection:a}:{}),{mark:x(x({type:"line"},zc(d,["clip","interpolate","tension","tooltip"])),h),encoding:v})),p&&m.push(k(x({},a?{projection:a}:{}),{mark:x(x({type:"point",opacity:1,filled:!0},zc(d,["clip","tooltip"])),p),encoding:v})),r(k(x({},u),{layer:m}),k(x({},n),{config:U_e(i)}))}};function Yie(e,t){return t?hs(e)?Qie(e,t):Xie(e,t):e}function hM(e,t){return t?Qie(e,t):e}function wF(e,t,n){let r=t[e];if(aie(r)){if(r.repeat in n)return k(x({},t),{[e]:n[r.repeat]});U(P.noSuchRepeatedValue(r.repeat));return}return t}function Xie(e,t){if(e=wF("field",e,t),e!==void 0){if(e===null)return null;if(Gb(e)&&Fr(e.sort)){let n=wF("field",e.sort,t);e=x(x({},e),n?{sort:n}:{})}return e}}function Gie(e,t){if(Y(e))return Xie(e,t);{let n=wF("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Wie(e,t){if(_e(e)){let r=Gie(e,t);if(r)return r;if(b4(e))return{condition:e.condition}}else{if(M4(e)){let r=Gie(e.condition,t);if(r)return k(x({},e),{condition:r});{let n=e,{condition:i}=n;return ie(n,["condition"])}}return e}}function Qie(e,t){let n={};for(let r in e)if(de(e,r)){let i=e[r];if(F(i))n[r]=i.map(o=>Wie(o,t)).filter(o=>o);else{let o=Wie(i,t);o!==void 0&&(n[r]=o)}}return n}var mM=class{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(xr(t)){let{encoding:n,mark:r}=t;if(r==="line"||ai(r)&&r.type==="line")for(let i of One){let o=yo(i),a=n[o];if(n[i]&&(Y(a)&&!an(a.bin)||Ri(a)))return!0}}return!1}run(t,n,r){let{encoding:i,mark:o}=t;return U(P.lineWithRange(!!i.x2,!!i.y2)),r(k(x({},t),{mark:ne(o)?k(x({},o),{type:"rule"}):"rule"}),n)}};var gM=class extends E4{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[bie,Die,Hie,new pM,new mM]}map(t,n){if(xr(t)){let r=vs(t.encoding,R1),i=vs(t.encoding,O1),o=vs(t.encoding,gf);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){let{parentEncoding:r,parentProjection:i}=n,o=hM(t.encoding,n.repeater),a=x(x(x({},t),t.name?{name:[n.repeaterPrefix,t.name].filter(c=>c).join("_")}:{}),o?{encoding:o}:{});if(r||i)return this.mapUnitWithParentEncodingOrProjection(a,n);let s=this.mapLayerOrUnit.bind(this);for(let c of this.nonFacetUnitNormalizers)if(c.hasMatchingType(a,n.config))return c.run(a,n,s);return a}mapRepeat(t,n){return Bie(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){let f=t,{repeat:r,spec:i}=f,o=ie(f,["repeat","spec"]),{row:a,column:s,layer:c}=r,{repeater:l={},repeaterPrefix:u=""}=n;return a||s?this.mapRepeat(k(x({},t),{repeat:x(x({},a?{row:a}:{}),s?{column:s}:{}),spec:{repeat:{layer:c},spec:i}}),n):k(x({},o),{layer:c.map(d=>{let p=k(x({},l),{layer:d}),h=`${(i.name?`${i.name}_`:"")+u}child__layer_${pt(d)}`,m=this.mapLayerOrUnit(i,k(x({},n),{repeater:p,repeaterPrefix:h}));return m.name=h,m})})}mapNonLayerRepeat(t,n){let h=t,{repeat:r,spec:i,data:o}=h,a=ie(h,["repeat","spec","data"]);!F(r)&&t.columns&&(t=Fn(t,["columns"]),U(P.columnsNotSupportByRowCol("repeat")));let s=[],{repeater:c={},repeaterPrefix:l=""}=n,u=!F(r)&&r.row||[c?c.row:null],f=!F(r)&&r.column||[c?c.column:null],d=F(r)&&r||[c?c.repeat:null];for(let m of d)for(let g of u)for(let v of f){let y={repeat:m,row:g,column:v,layer:c.layer},C=(i.name?`${i.name}_`:"")+l+"child__"+(F(r)?`${pt(m)}`:(r.row?`row_${pt(g)}`:"")+(r.column?`column_${pt(v)}`:"")),b=this.map(i,k(x({},n),{repeater:y,repeaterPrefix:C}));b.name=C,s.push(Fn(b,["data"]))}let p=F(r)?t.columns:r.column?r.column.length:1;return k(x({data:i.data??o,align:"all"},a),{columns:p,concat:s})}mapFacet(t,n){let{facet:r}=t;return hs(r)&&t.columns&&(t=Fn(t,["columns"]),U(P.columnsNotSupportByRowCol("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){let{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:a,config:s}=n,c=Zie({parentProjection:a,projection:i}),l=Kie({parentEncoding:o,encoding:hM(r,n.repeater)});return this.mapUnit(x(x(x({},t),c?{projection:c}:{}),l?{encoding:l}:{}),{config:s})}mapFacetedUnit(t,n){let y=t.encoding,{row:r,column:i,facet:o}=y,a=ie(y,["row","column","facet"]),C=t,{mark:s,width:c,projection:l,height:u,view:f,params:d,encoding:p}=C,h=ie(C,["mark","width","projection","height","view","params","encoding"]),{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),v=hM(a,n.repeater);return this.mapFacet(k(x(x({},h),g),{facet:m,spec:x(k(x(x(x(x({},c?{width:c}:{}),u?{height:u}:{}),f?{view:f}:{}),l?{projection:l}:{}),{mark:s,encoding:v}),d?{params:d}:{})}),n)}getFacetMappingAndLayout(t,n){let{row:r,column:i,facet:o}=t;if(r||i){o&&U(P.facetChannelDropped([...r?[R1]:[],...i?[O1]:[]]));let c={},l={};for(let u of[R1,O1]){let f=t[u];if(f){let a=f,{align:d,center:p,spacing:h,columns:m}=a,g=ie(a,["align","center","spacing","columns"]);c[u]=g;for(let v of["align","center","spacing"])f[v]!==void 0&&(l[v]??(l[v]={}),l[v][u]=f[v])}}return{facetMapping:c,layout:l}}else{let s=o,{align:c,center:l,spacing:u,columns:f}=s,d=ie(s,["align","center","spacing","columns"]);return{facetMapping:Yie(d,n.repeater),layout:x(x(x(x({},c?{align:c}:{}),l?{center:l}:{}),u?{spacing:u}:{}),f?{columns:f}:{})}}}mapLayer(t,o){var a=o,{parentEncoding:n,parentProjection:r}=a,i=ie(a,["parentEncoding","parentProjection"]);let f=t,{encoding:s,projection:c}=f,l=ie(f,["encoding","projection"]),u=k(x({},i),{parentEncoding:Kie({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Zie({parentProjection:r,projection:c})});return super.mapLayer(x(x({},l),t.name?{name:[u.repeaterPrefix,t.name].filter(d=>d).join("_")}:{}),u)}};function Kie({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){let i=new Set([...R(e),...R(t)]);for(let o of i){let a=t[o],s=e[o];if(_e(a)){let c=x(x({},s),a);r[o]=c}else M4(a)?r[o]=k(x({},a),{condition:x(x({},s),a.condition)}):a||a===null?r[o]=a:(n||or(s)||ae(s)||_e(s)||F(s))&&(r[o]=s)}}else r=t;return!r||Qe(r)?void 0:r}function Zie(e){let{parentProjection:t,projection:n}=e;return t&&n&&U(P.projectionOverridden({parentProjection:t,projection:n})),n??t}function wh(e){return"filter"in e}function Jie(e){return e?.stop!==void 0}function vM(e){return"lookup"in e}function e1e(e){return"data"in e}function t1e(e){return"param"in e}function n1e(e){return"pivot"in e}function r1e(e){return"density"in e}function i1e(e){return"quantile"in e}function o1e(e){return"regression"in e}function a1e(e){return"loess"in e}function s1e(e){return"sample"in e}function c1e(e){return"window"in e}function l1e(e){return"joinaggregate"in e}function u1e(e){return"flatten"in e}function f1e(e){return"calculate"in e}function yM(e){return"bin"in e}function d1e(e){return"impute"in e}function p1e(e){return"timeUnit"in e}function h1e(e){return"aggregate"in e}function m1e(e){return"stack"in e}function g1e(e){return"fold"in e}function v1e(e){return"extent"in e&&!("density"in e)}function y1e(e){return e.map(t=>wh(t)?{filter:p4(t.filter,Sre)}:t)}var xM=class extends E4{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=x1e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=x1e(t,n),t.encoding){let r={};for(let[i,o]of F1(t.encoding))r[i]=C1e(o,n);t=k(x({},t),{encoding:r})}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){let o=t,{selection:r}=o,i=ie(o,["selection"]);return r?k(x({},i),{params:F1(r).map(([a,s])=>{let d=s,{init:c,bind:l,empty:u}=d,f=ie(d,["init","bind","empty"]);f.type==="single"?(f.type="point",f.toggle=!1):f.type==="multi"&&(f.type="point"),n.emptySelections[a]=u!=="none";for(let p of rn(n.selectionPredicates[a]??{}))p.empty=u!=="none";return{name:a,value:c,select:f,bind:l}})}):t}};function x1e(e,t){let i=e,{transform:n}=i,r=ie(i,["transform"]);if(n){let o=n.map(a=>{if(wh(a))return{filter:SF(a,t)};if(yM(a)&&J2(a.bin))return k(x({},a),{bin:b1e(a.bin)});if(vM(a)){let s=a.from,{selection:c}=s,l=ie(s,["selection"]);return c?k(x({},a),{from:x({param:c},l)}):a}return a});return k(x({},r),{transform:o})}return e}function C1e(e,t){let n=le(e);if(Y(n)&&J2(n.bin)&&(n.bin=b1e(n.bin)),i2(n)&&n.scale?.domain?.selection){let r=n.scale.domain,{selection:o}=r,a=ie(r,["selection"]);n.scale.domain=x(x({},a),o?{param:o}:{})}if(b4(n))if(F(n.condition))n.condition=n.condition.map(o=>{let u=o,{selection:a,param:s,test:c}=u,l=ie(u,["selection","param","test"]);return s?o:k(x({},l),{test:SF(o,t)})});else{let i=C1e(n.condition,t),{selection:o,param:a,test:s}=i,c=ie(i,["selection","param","test"]);n.condition=a?n.condition:k(x({},c),{test:SF(n.condition,t)})}return n}function b1e(e){let t=e.extent;if(t?.selection){let n=t,{selection:r}=n,i=ie(n,["selection"]);return k(x({},e),{extent:k(x({},i),{param:r})})}return e}function SF(e,t){let n=r=>p4(r,i=>{var o;let a=t.emptySelections[i]??!0,s={param:i,empty:a};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(s),s});return e.selection?n(e.selection):p4(e.test||e.filter,r=>r.selection?n(r.selection):r)}var Bf=class extends E4{map(t,n){let r=n.selections??[];if(t.params&&!xr(t)){let i=[];for(let o of t.params)Rf(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){let r=n.selections;if(!r||!r.length)return t;let i=(n.path??[]).concat(t.name),o=[];for(let a of r)if(!a.views||!a.views.length)o.push(a);else for(let s of a.views)(Q(s)&&(s===t.name||i.includes(s))||F(s)&&s.map(c=>i.indexOf(c)).every((c,l,u)=>c!==-1&&(l===0||c>u[l-1])))&&o.push(a);return o.length&&(t.params=o),t}};for(let e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){let t=Bf.prototype[e];Bf.prototype[e]=function(n,r){return t.call(this,n,j_e(n,r))}}function j_e(e,t){return e.name?k(x({},t),{path:(t.path??[]).concat(e.name)}):t}function CM(e,t){t===void 0&&(t=uM(e.config));let n=Y_e(e,t),{width:r,height:i}=e,o=X_e(n,{width:r,height:i,autosize:e.autosize},t);return x(x({},n),o?{autosize:o}:{})}var q_e=new gM,G_e=new xM,W_e=new Bf;function Y_e(e,t={}){let n={config:t};return W_e.map(q_e.map(G_e.map(e,n),n),n)}function M1e(e){return Q(e)?{type:e}:e??{}}function X_e(e,t,n){let{width:r,height:i}=t,o=xr(e)||Oc(e),a={};o?r=="container"&&i=="container"?(a.type="fit",a.contains="padding"):r=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(r=="container"&&(U(P.containerSizeNonSingle("width")),r=void 0),i=="container"&&(U(P.containerSizeNonSingle("height")),i=void 0));let s=x(x(x({type:"pad"},a),n?M1e(n.autosize):{}),M1e(e.autosize));if(s.type==="fit"&&!o&&(U(P.FIT_NON_SINGLE),s.type="pad"),r=="container"&&!(s.type=="fit"||s.type=="fit-x")&&U(P.containerSizeNotCompatibleWithAutosize("width")),i=="container"&&!(s.type=="fit"||s.type=="fit-y")&&U(P.containerSizeNotCompatibleWithAutosize("height")),!Vr(s,{type:"pad"}))return s}function w1e(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function S1e(e){return e?`fit-${v4(e)}`:"fit"}var Q_e=["background","padding"];function EF(e,t){let n={};for(let r of Q_e)e&&e[r]!==void 0&&(n[r]=Tr(e[r]));return t&&(n.params=e.params),n}var Oi=class e{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new e(le(this.explicit),le(this.implicit))}combine(){return x(x({},this.explicit),this.implicit)}get(t){return ct(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(let n of R(t.combine())){let r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}};function o2(e){return{explicit:!0,value:e}}function Pi(e){return{explicit:!1,value:e}}function bM(e){return(t,n,r,i)=>{let o=e(t.value,n.value);return o>0?t:o<0?n:Uf(t,n,r,i)}}function Uf(e,t,n,r){return e.explicit&&t.explicit&&U(P.mergeConflictingProperty(n,r,e.value,t.value)),e}function q1(e,t,n,r,i=Uf){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Vr(e.value,t.value)?e:i(e,t,n,r)}var MM=class extends Oi{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){let t=super.clone();return t.parseNothing=this.parseNothing,t}};function Pc(e){return"url"in e}function z0(e){return"values"in e}function wM(e){return"name"in e&&!Pc(e)&&!z0(e)&&!aa(e)}function aa(e){return e&&(DF(e)||zF(e)||Sh(e))}function DF(e){return"sequence"in e}function zF(e){return"sphere"in e}function Sh(e){return"graticule"in e}var Mt=function(e){return e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e}(Mt||{});function HF(e){let o=e,{signals:t,hasLegend:n,index:r}=o,i=ie(o,["signals","hasLegend","index"]);return i.field=rr(i.field),i}function $c(e,t=!0,n=Vn){if(F(e)){let r=e.map(i=>$c(i,t,n));return t?`[${r.join(", ")}]`:r}else if(n2(e))return n(t?na(e):mre(e));return t?n(ht(e)):e}function E1e(e,t){for(let n of rn(e.component.selection??{})){let r=n.name,i=`${r}${h1}, ${n.resolve==="global"?"true":`{unit: ${ca(e)}}`}`;for(let o of jf)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+V1e,on:[{events:{signal:n.name+h1},update:`modify(${Z(n.name+sa)}, ${i})`}]})}return AF(t)}function D1e(e,t){if(e.component.selection&&R(e.component.selection).length){let n=Z(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Ai("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return AF(t)}function z1e(e,t){let n=!1;for(let r of rn(e.component.selection??{})){let i=r.name,o=Z(i+sa);if(t.filter(s=>s.name===i).length===0){let s=r.resolve==="global"?"union":r.resolve,c=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${SM}(${o}, ${Z(s)}${c}`})}n=!0;for(let s of jf)s.defined(r)&&s.topLevelSignals&&(t=s.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),AF(t)}function H1e(e,t){let n=[...t],r=ca(e,{escape:!1});for(let i of rn(e.component.selection??{})){let o={name:i.name+sa};if(i.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:ci}}]),i.init){let s=i.project.items.map(HF);o.values=i.project.hasSelectionId?i.init.map(c=>({unit:r,[ci]:$c(c,!1)[0]})):i.init.map(c=>({unit:r,fields:s,values:$c(c,!1)}))}n.filter(s=>s.name===i.name+sa).length||n.push(o)}return n}function LF(e,t){for(let n of rn(e.component.selection??{}))for(let r of jf)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function L1e(e,t){for(let n of e.children)wt(n)&&(t=LF(n,t));return t}function A1e(e,t,n,r){let i=EM(e,t.param,t);return{signal:On(n.get("type"))&&F(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function AF(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}var Le=class{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){U(P.ADD_SAME_CHILD_TWICE);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){let n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(let n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){let n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){let t=this._parent,n=t.parent;for(let i of this._children)i.parent=t;this._children=[],t.removeChild(this);let r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}},Dn=class extends Le{clone(){let t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${MI()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}};function VF(e){return e.as!==void 0}function N1e(e){return`${e}_end`}var a2=class e extends Le{clone(){return new e(null,le(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){let r=n.reduceFieldDef((i,o,a)=>{let{field:s,timeUnit:c}=o;if(c){let l;if(ra(c)){if(wt(n)){let{mark:u,markDef:f,config:d}=n,p=U1({fieldDef:o,markDef:f,config:d});(Nc(u)||p)&&(l={timeUnit:sn(c),field:s})}}else l={as:K(o,{forAs:!0}),field:s,timeUnit:c};if(wt(n)){let{mark:u,markDef:f,config:d}=n,p=U1({fieldDef:o,markDef:f,config:d});Nc(u)&&bt(a)&&p!==.5&&(l.rectBandPosition=p)}l&&(i[be(l)]=l)}return i},{});return Qe(r)?null:new e(t,r)}static makeFromTransform(t,n){let s=x({},n),{timeUnit:r}=s,i=ie(s,["timeUnit"]),o=sn(r),a=k(x({},i),{timeUnit:o});return new e(t,{[be(a)]:a})}merge(t){this.timeUnits=x({},this.timeUnits);for(let n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(let n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){let n={};for(let[r,i]of F1(this.timeUnits)){let o=VF(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(rn(this.timeUnits).map(t=>VF(t)?t.as:N1e(t.field)))}dependentFields(){return new Set(rn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${be(this.timeUnits)}`}assemble(){let t=[];for(let r of rn(this.timeUnits)){let{rectBandPosition:i}=r,o=sn(r.timeUnit);if(VF(r)){let{field:a,as:s}=r,n=o,{unit:c,utc:l}=n,u=ie(n,["unit","utc"]),f=[s,`${s}_end`];t.push(k(x(x(x({field:rr(a),type:"timeunit"},c?{units:Df(c)}:{}),l?{timezone:"utc"}:{}),u),{as:f})),t.push(..._1e(f,i,o))}else if(r){let{field:a}=r,s=a.replaceAll("\\.","."),c=T1e({timeUnit:o,field:s}),l=N1e(s);t.push({type:"formula",expr:c,as:l}),t.push(..._1e([s,l],i,o))}}return t}},H0="offsetted_rect_start",L0="offsetted_rect_end";function T1e({timeUnit:e,field:t,reverse:n}){let{unit:r,utc:i}=e,o=PI(r),{part:a,step:s}=BI(o,e.step);return`${i?"utcOffset":"timeOffset"}('${a}', datum['${t}'], ${n?-s:s})`}function _1e([e,t],n,r){if(n!==void 0&&n!==.5){let i=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:k1e([T1e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${H0}`},{type:"formula",expr:k1e([i,o],n+.5),as:`${e}_${L0}`}]}return[]}function k1e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}var Bc="_tuple_fields",NF=class{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}},K_e={defined:()=>!0,parse:(e,t,n)=>{let r=t.name,i=t.project??(t.project=new NF),o={},a={},s=new Set,c=(h,m)=>{let g=m==="visual"?h.channel:h.field,v=pt(`${r}_${g}`);for(let y=1;s.has(v);y++)v=pt(`${r}_${g}_${y}`);return s.add(v),{[m]:v}},l=t.type,u=e.config.selection[l],f=n.value!==void 0?te(n.value):null,{fields:d,encodings:p}=ne(n.select)?n.select:{};if(!d&&!p&&f){for(let h of f)if(ne(h))for(let m of R(h))Rne(m)?(p||(p=[])).push(m):l==="interval"?(U(P.INTERVAL_INITIALIZED_WITH_POS),p=u.encodings):(d??(d=[])).push(m)}!d&&!p&&(p=u.encodings,"fields"in u&&(d=u.fields));for(let h of p??[]){let m=e.fieldDef(h);if(m){let g=m.field;if(m.aggregate){U(P.cannotProjectAggregate(h,m.aggregate));continue}else if(!g){U(P.cannotProjectOnChannelWithoutField(h));continue}if(m.timeUnit&&!ra(m.timeUnit)){g=e.vgField(h);let v={timeUnit:m.timeUnit,as:g,field:m.field};a[be(v)]=v}if(!o[g]){let v=l==="interval"&&kr(h)&&On(e.getScaleComponent(h).get("type"))?"R":m.bin?"R-RE":"E",y={field:g,channel:h,type:v,index:i.items.length};y.signals=x(x({},c(y,"data")),c(y,"visual")),i.items.push(o[g]=y),i.hasField[g]=o[g],i.hasSelectionId=i.hasSelectionId||g===ci,db(h)?(y.geoChannel=h,y.channel=fb(h),i.hasChannel[y.channel]=o[g]):i.hasChannel[h]=o[g]}}else U(P.cannotProjectOnChannelWithoutField(h))}for(let h of d??[]){if(i.hasField[h])continue;let m={type:"E",field:h,index:i.items.length};m.signals=x({},c(m,"data")),i.items.push(m),i.hasField[h]=m,i.hasSelectionId=i.hasSelectionId||h===ci}f&&(t.init=f.map(h=>i.items.map(m=>ne(h)?h[m.geoChannel||m.channel]!==void 0?h[m.geoChannel||m.channel]:h[m.field]:h))),Qe(a)||(i.timeUnit=new a2(null,a))},signals:(e,t,n)=>{let r=t.name+Bc;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(HF)})}},I1e=K_e;var Z_e={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{let n=t.scales=[];for(let r of t.project.items){let i=r.channel;if(!kr(i))continue;let o=e.getScaleComponent(i),a=o?o.get("type"):void 0;if(!o||!On(a)){U(P.SCALE_BINDINGS_CONTINUOUS);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{let r=t.scales.filter(a=>n.filter(s=>s.name===a.signals.data).length===0);if(!e.parent||F1e(e)||r.length===0)return n;let i=n.filter(a=>a.name===t.name)[0],o=i.update;if(o.indexOf(SM)>=0)i.update=`{${r.map(a=>`${Z(rr(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(let a of r){let s=`${Z(rr(a.field))}: ${a.signals.data}`;o.includes(s)||(o=`${o.substring(0,o.length-1)}, ${s}}`)}i.update=o}return n.concat(r.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!F1e(e))for(let r of t.scales){let i=n.filter(o=>o.name===r.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}},Mo=Z_e;function Eh(e,t){return`domain(${Z(e.scaleName(t))})`}function F1e(e){return e.parent&&s2(e.parent)&&!e.parent.parent}var Uc="_brush",R1e="_scale_trigger",Dh="geo_interval_init_tick",O1e="_init",J_e="_center",eke={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){let i=x({},ne(n.select)?n.select:{});i.fields=[ci],i.encodings||(i.encodings=n.value?R(n.value):[ii,ri]),n.select=x({type:"interval"},i)}if(t.translate&&!Mo.defined(t)){let i=`!event.item || event.item.mark.name !== ${Z(t.name+Uc)}`;for(let o of t.events){if(!o.between){U(`${o} is not an ordered event stream for interval selections.`);continue}let a=te((r=o.between[0]).filter??(r.filter=[]));a.indexOf(i)<0&&a.push(i)}}},signals:(e,t,n)=>{let r=t.name,i=r+h1,o=rn(t.project.hasChannel).filter(s=>s.channel===Ct||s.channel===on),a=t.init?t.init[0]:null;if(n.push(...o.reduce((s,c)=>s.concat(tke(e,t,c,a&&a[c.index])),[])),e.hasProjection){let s=Z(e.projectionName()),c=e.projectionName()+J_e,{x:l,y:u}=t.project.hasChannel,f=l&&l.signals.visual,d=u&&u.signals.visual,p=l?a&&a[l.index]:`${c}[0]`,h=u?a&&a[u.index]:`${c}[1]`,m=M=>e.getSizeSignalRef(M).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;a&&(n.unshift({name:r+O1e,init:`[scale(${s}, [${l?p[0]:p}, ${u?h[0]:h}]), scale(${s}, [${l?p[1]:p}, ${u?h[1]:h}])]`}),(!l||!u)&&(n.find(S=>S.name===c)||n.unshift({name:c,update:`invert(${s}, [${m("width")}/2, ${m("height")}/2])`})));let v=`intersect(${g}, {markname: ${Z(e.getName("marks"))}}, unit.mark)`,y=`{unit: ${ca(e)}}`,C=`vlSelectionTuples(${v}, ${y})`,b=o.map(M=>M.signals.visual);return n.concat({name:i,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...a?[{signal:Dh}]:[]],update:C}]})}else{if(!Mo.defined(t)){let l=r+R1e,u=o.map(f=>{let d=f.channel,{data:p,visual:h}=f.signals,m=Z(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),v=On(g)?"+":"";return`(!isArray(${p}) || (${v}invert(${m}, ${h})[0] === ${v}${p}[0] && ${v}invert(${m}, ${h})[1] === ${v}${p}[1]))`});u.length&&n.push({name:l,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:u.join(" && ")+` ? ${l} : {}`}]})}let s=o.map(l=>l.signals.data),c=`unit: ${ca(e)}, fields: ${r+Bc}, values`;return n.concat(x(x({name:i},a?{init:`{${c}: ${$c(a)}}`}:{}),s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${c}: [${s}]} : null`}]}:{}))}},topLevelSignals:(e,t,n)=>(wt(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===Dh).length||n.unshift({name:Dh,value:null,on:[{events:"timer{1}",update:`${Dh} === null ? {} : ${Dh}`}]})),n),marks:(e,t,n)=>{let r=t.name,{x:i,y:o}=t.project.hasChannel,a=i?.signals.visual,s=o?.signals.visual,c=`data(${Z(t.name+sa)})`;if(Mo.defined(t)||!i&&!o)return n;let l={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:o!==void 0?{signal:`${s}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${s}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(let g of R(l))l[g]=[x({test:`${c}.length && ${c}[0].unit === ${ca(e)}`},l[g]),{value:0}];let m=t.mark,{fill:u,fillOpacity:f,cursor:d}=m,p=ie(m,["fill","fillOpacity","cursor"]),h=R(p).reduce((g,v)=>(g[v]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,o!==void 0&&`${s}[0] !== ${s}[1]`].filter(y=>y).join(" && "),value:p[v]},{value:null}],g),{});return[{name:`${r+Uc}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:u},fillOpacity:{value:f}},update:l}},...n,{name:r+Uc,type:"rect",clip:!0,encode:{enter:k(x({},d?{cursor:{value:d}}:{}),{fill:{value:"transparent"}}),update:x(x({},l),h)}}]}},P1e=eke;function tke(e,t,n,r){let i=!e.hasProjection,o=n.channel,a=n.signals.visual,s=Z(i?e.scaleName(o):e.projectionName()),c=d=>`scale(${s}, ${d})`,l=e.getSizeSignalRef(o===Ct?"width":"height").signal,u=`${o}(unit)`,f=t.events.reduce((d,p)=>[...d,{events:p.between[0],update:`[${u}, ${u}]`},{events:p,update:`[${a}[0], clamp(${u}, 0, ${l})]`}],[]);if(i){let d=n.signals.data,p=Mo.defined(t),h=e.getScaleComponent(o),m=h?h.get("type"):void 0,g=r?{init:$c(r,!0,c)}:{value:[]};return f.push({events:{signal:t.name+R1e},update:On(m)?`[${c(`${d}[0]`)}, ${c(`${d}[1]`)}]`:"[0, 0]"}),p?[{name:d,on:[]}]:[k(x({name:a},g),{on:f}),k(x({name:d},r?{init:$c(r)}:{}),{on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${s}, ${a})`}]})]}else{let d=o===Ct?0:1,p=t.name+O1e,h=r?{init:`[${p}[0][${d}], ${p}[1][${d}]]`}:{value:[]};return[k(x({name:a},h),{on:f})]}}var nke={defined:e=>e.type==="point",signals:(e,t,n)=>{let r=t.name,i=r+Bc,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=rn(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Uc):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),c=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${s?` && ${s}`:""}`,l=`unit: ${ca(e)}, `;if(t.project.hasSelectionId)l+=`${ci}: ${a}[${Z(ci)}]`;else{let f=o.items.map(d=>e.fieldDef(d.channel)?.bin?`[${a}[${Z(e.vgField(d.channel,{}))}], ${a}[${Z(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${a}[${Z(d.field)}]`).join(", ");l+=`fields: ${i}, values: [${f}]`}let u=t.events;return n.concat([{name:r+h1,on:u?[{events:u,update:`${c} ? {${l}} : null`,force:!0}]:[]}])}},$1e=nke;function G1(e,t,n,r){let i=b4(t)&&t.condition,o=r(t);if(i){let s=te(i).map(c=>{let l=r(c);if(oie(c)){let{param:u,empty:f}=c,d=DM(e,{param:u,empty:f});return x({test:d},l)}else{let u=A0(e,c.test);return x({test:u},l)}});return{[n]:[...s,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function D4(e,t="text"){let n=e.encoding[t];return G1(e,n,t,r=>qf(r,e.config))}function qf(e,t,n="datum"){if(e){if(or(e))return it(e.value);if(_e(e)){let{format:r,formatType:i}=Tf(e);return Nf({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Gf(e,t={}){let{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if(F(a))return{tooltip:_F({tooltip:a},o,i,t)};{let s=t.reactiveGeom?"datum.datum":"datum";return G1(e,a,"tooltip",c=>{let l=qf(c,i,s);if(l)return l;if(c===null)return;let u=je("tooltip",r,i);if(u===!0&&(u={content:"encoding"}),Q(u))return{value:u};if(ne(u))return ae(u)?u:u.content==="encoding"?_F(n,o,i,t):{signal:s}})}}function kF(e,t,n,{reactiveGeom:r}={}){let i=x(x({},n),n.tooltipFormat),o={},a=r?"datum.datum":"datum",s=[];function c(u,f){let d=yo(f),p=En(u)?u:k(x({},u),{type:e[d].type}),h=p.title||mh(p,i),m=te(h).join(", ").replaceAll(/"/g,'\\"'),g;if(bt(f)){let v=f==="x"?"x2":"y2",y=si(e[v]);if(an(p.bin)&&y){let C=K(p,{expr:a}),b=K(y,{expr:a}),{format:M,formatType:S}=Tf(p);g=E0(C,b,M,S,i),o[v]=!0}}if((bt(f)||f===ni||f===Ni)&&t&&t.fieldChannel===f&&t.offset==="normalize"){let{format:v,formatType:y}=Tf(p);g=Nf({fieldOrDatumDef:p,format:v,formatType:y,expr:a,config:i,normalizeStack:!0}).signal}g??(g=qf(p,i,a).signal),s.push({channel:f,key:m,value:g})}vh(e,(u,f)=>{Y(u)?c(u,f):kf(u)&&c(u.condition,f)});let l={};for(let{channel:u,key:f,value:d}of s)!o[u]&&!l[f]&&(l[f]=d);return l}function _F(e,t,n,{reactiveGeom:r}={}){let i=kF(e,t,n,{reactiveGeom:r}),o=F1(i).map(([a,s])=>`"${a}": ${s}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function TF(e){let{markDef:t,config:n}=e,r=je("aria",t,n);return r===!1?{}:x(x(x({},r?{aria:r}:{}),rke(e)),ike(e))}function rke(e){let{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};let i=je("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in ire?{}:{ariaRoleDescription:{value:t}}}function ike(e){let{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return G1(e,o,"description",c=>qf(c,e.config));let a=je("description",n,r);if(a!=null)return{description:it(a)};if(r.aria===!1)return{};let s=kF(t,i,r);if(!Qe(s))return{description:{signal:F1(s).map(([c,l],u)=>`"${u>0?"; ":""}${c}: " + (${l})`).join(" + ")}}}function jt(e,t,n={}){let{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n,{defaultRef:s,defaultValue:c}=n;s===void 0&&(c??(c=je(e,r,o,{vgChannel:a,ignoreVgConfig:!0})),c!==void 0&&(s=it(c)));let l=i[e];return G1(t,l,a??e,u=>dh({channel:e,channelDef:u,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s}))}function Wf(e,t={filled:void 0}){let{markDef:n,encoding:r,config:i}=e,{type:o}=n,a=t.filled??je("filled",n,i),s=Ve(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,c=je(a===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[a===!0&&"color"]??s,l=je(a===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[a===!1&&"color"],u=a?"fill":"stroke",f=x(x({},c?{fill:it(c)}:{}),l?{stroke:it(l)}:{});return n.color&&(a?n.fill:n.stroke)&&U(P.droppingColor("property",{fill:"fill"in n,stroke:"stroke"in n})),x(x(x(x({},f),jt("color",e,{vgChannel:u,defaultValue:a?c:l})),jt("fill",e,{defaultValue:r.fill?c:void 0})),jt("stroke",e,{defaultValue:r.stroke?l:void 0}))}function B1e(e){let{encoding:t,mark:n}=e,r=t.order;return!Fi(n)&&or(r)?G1(e,r,"zindex",i=>it(i.value)):{}}function jc({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){let o=`${e}Offset`,a=t[o],s=n[o];if((o==="xOffset"||o==="yOffset")&&s)return{offsetType:"encoding",offset:dh({channel:o,channelDef:s,markDef:t,config:r?.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:it(a),bandPosition:i})};let c=t[o];return c?{offsetType:"visual",offset:c}:{}}function xn(e,t,{defaultPos:n,vgChannel:r}){let{encoding:i,markDef:o,config:a,stack:s}=t,c=i[e],l=i[_r(e)],u=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:p}=jc({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),h=zh({model:t,defaultPos:n,channel:e,scaleName:u,scale:f}),m=!c&&bt(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:oke({channel:e,channelDef:c,channel2Def:l,markDef:o,config:a,scaleName:u,scale:f,stack:s,offset:d,defaultRef:h,bandPosition:p==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function oke(e){let{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(_e(n)&&i&&t===i.fieldChannel){if(Y(n)){let s=n.bandPosition;if(s===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(s=.5),s!==void 0)return Af({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:s,offset:o})}return fs(n,r,{suffix:"end"},{offset:o})}return Vf(e)}function zh({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){let{markDef:o,config:a}=e;return()=>{let s=yo(n),c=e2(n),l=je(n,o,a,{vgChannel:c});if(l!==void 0)return S0(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){let u=i.get("type");if(!Ve([Ir.LOG,Ir.TIME,Ir.UTC],u)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return s==="y"?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{let u=e[Sn(n)];return k(x({},u),{mult:.5})}}}}var ake={left:"x",center:"xc",right:"x2"},ske={top:"y",middle:"yc",bottom:"y2"};function zM(e,t,n,r="middle"){if(e==="radius"||e==="theta")return e2(e);let i=e==="x"?"align":"baseline",o=je(i,t,n),a;return ae(o)?(U(P.rangeMarkAlignmentCannotBeExpression(i)),a=void 0):a=o,e==="x"?ake[a||(r==="top"?"left":"center")]:ske[a||r]}function z4(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Hh(e,t,{defaultPos:n,defaultPos2:r}):xn(e,t,{defaultPos:n})}function Hh(e,t,{defaultPos:n,defaultPos2:r}){let{markDef:i,config:o}=t,a=_r(e),s=Sn(e),c=cke(t,r,a),l=c[s]?zM(e,i,o):e2(e);return x(x({},xn(e,t,{defaultPos:n,vgChannel:l})),c)}function cke(e,t,n){let{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,c=yo(n),l=Sn(n),u=e2(n),f=r[c],d=e.scaleName(c),p=e.getScaleComponent(c),{offset:h}=n in r||n in o?jc({channel:n,markDef:o,encoding:r,model:e}):jc({channel:c,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){let g=Sn(n),v=e.markDef[g];return v!=null?{[g]:{value:v}}:{[u]:{field:e.getName(n)}}}let m=lke({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:s,scaleName:d,scale:p,stack:a,offset:h,defaultRef:void 0});return m!==void 0?{[u]:m}:HM(n,o)||HM(n,{[n]:nh(n,o,s.style),[l]:nh(l,o,s.style)})||HM(n,s[i])||HM(n,s.mark)||{[u]:zh({model:e,defaultPos:t,channel:n,scaleName:d,scale:p})()}}function lke({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:c,defaultRef:l}){return _e(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?fs(t,o,{suffix:"start"},{offset:c}):Vf({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:c,defaultRef:l})}function HM(e,t){let n=Sn(e),r=e2(e);if(t[r]!==void 0)return{[r]:S0(e,t[r])};if(t[e]!==void 0)return{[r]:S0(e,t[e])};if(t[n]){let i=t[n];if(us(i))U(P.relativeBandSizeNotSupported(n));else return{[n]:S0(e,i)}}}function W1(e,t){let{config:n,encoding:r,markDef:i}=e,o=i.type,a=_r(t),s=Sn(t),c=r[t],l=r[a],u=e.getScaleComponent(t),f=u?u.get("type"):void 0,d=i.orient,p=r[s]??r.size??je("size",i,n,{vgChannel:s}),h=HI(t),m=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Y(c)&&(rt(c.bin)||an(c.bin)||c.timeUnit&&!l)&&!(p&&!us(p))&&!r[h]&&!Rt(f)?dke({fieldDef:c,fieldDef2:l,channel:t,model:e}):(_e(c)&&Rt(f)||m)&&!l?fke(c,t,e):Hh(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function uke(e,t,n,r,i,o,a){if(us(i))if(n){let c=n.get("type");if(c==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);let u=Co("minBandSize",{type:a},r);return{signal:u?`max(${d1(u)}, ${l})`:l}}else i.band!==1&&(U(P.cannotUseRelativeBandSizeWithNonBandScale(c)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(ae(i))return i;if(i)return{value:i}}if(n){let c=n.get("range");if(Ii(c)&&Pe(c.step))return{value:c.step-2}}if(!o){let{bandPaddingInner:c,barBandPaddingInner:l,rectBandPaddingInner:u}=r.scale,f=ct(c,a==="bar"?l:u);if(ae(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Pe(f))return{signal:`${1-f} * ${e}`}}return{value:D0(r.view,e)-2}}function fke(e,t,n){let{markDef:r,encoding:i,config:o,stack:a}=n,s=r.orient,c=n.scaleName(t),l=n.getScaleComponent(t),u=Sn(t),f=_r(t),d=HI(t),p=n.scaleName(d),h=n.getScaleComponent(bf(t)),m=s==="horizontal"&&t==="y"||s==="vertical"&&t==="x",g;(i.size||r.size)&&(m?g=jt("size",n,{vgChannel:u,defaultRef:it(r.size)}):U(P.cannotApplySizeToNonOrientedMark(r.type)));let v=!!g,y=ZI({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(l||h)?.get("type"),useVlSizeChannel:m});g=g||{[u]:uke(u,p||c,h||l,o,y,!!e,r.type)};let C=(l||h)?.get("type")==="band"&&us(y)&&!v?"top":"middle",b=zM(t,r,o,C),M=b==="xc"||b==="yc",{offset:S,offsetType:w}=jc({channel:t,markDef:r,encoding:i,model:n,bandPosition:M?.5:0}),E=Vf({channel:t,channelDef:e,markDef:r,config:o,scaleName:c,scale:l,stack:a,offset:S,defaultRef:zh({model:n,defaultPos:"mid",channel:t,scaleName:c,scale:l}),bandPosition:M?w==="encoding"?0:.5:ae(y)?{signal:`(1-${y})/2`}:us(y)?(1-y.band)/2:0});if(u)return x({[b]:E},g);{let D=e2(f),z=g[u],H=S?k(x({},z),{offset:S}):z;return{[b]:E,[D]:F(E)?[E[0],k(x({},E[1]),{offset:H})]:k(x({},E),{offset:H})}}}function U1e(e,t,n,r,i,o,a){if(SI(e))return 0;let s=e==="x"||e==="y2",c=s?-t/2:t/2;if(ae(n)||ae(i)||ae(r)||o){let l=d1(n),u=d1(i),f=d1(r),d=d1(o),h=o?`(${a} < ${d} ? ${s?"":"-"}0.5 * (${d} - (${a})) : ${c})`:c,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",v=u?`(${u} + ${h})`:h;return{signal:m+g+v}}else return i=i||0,r+(n?-i-c:+i+c)}function dke({fieldDef:e,fieldDef2:t,channel:n,model:r}){let{config:i,markDef:o,encoding:a}=r,s=r.getScaleComponent(n),c=r.scaleName(n),l=s?s.get("type"):void 0,u=s.get("reverse"),f=ZI({channel:n,fieldDef:e,markDef:o,config:i,scaleType:l}),p=r.component.axes[n]?.[0]?.get("translate")??.5,h=bt(n)?je("binSpacing",o,i)??0:0,m=_r(n),g=e2(n),v=e2(m),y=Co("minBandSize",o,i),{offset:C}=jc({channel:n,markDef:o,encoding:a,model:r,bandPosition:0}),{offset:b}=jc({channel:m,markDef:o,encoding:a,model:r,bandPosition:0}),M=eie({fieldDef:e,scaleName:c}),S=U1e(n,h,u,p,C,y,M),w=U1e(m,h,u,p,b??C,y,M),E=ae(f)?{signal:`(1-${f.signal})/2`}:us(f)?(1-f.band)/2:.5,D=U1({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(rt(e.bin)||e.timeUnit){let z=e.timeUnit&&D!==.5;return{[v]:j1e({fieldDef:e,scaleName:c,bandPosition:E,offset:w,useRectOffsetField:z}),[g]:j1e({fieldDef:e,scaleName:c,bandPosition:ae(E)?{signal:`1-${E.signal}`}:1-E,offset:S,useRectOffsetField:z})}}else if(an(e.bin)){let z=fs(e,c,{},{offset:w});if(Y(t))return{[v]:z,[g]:fs(t,c,{},{offset:S})};if(J2(e.bin)&&e.bin.step)return{[v]:z,[g]:{signal:`scale("${c}", ${K(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}U(P.channelRequiredForBinned(m))}function j1e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return Af(x({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r},i?{startSuffix:H0,endSuffix:L0}:{}))}var pke=new Set(["aria","width","height"]);function Cn(e,t){let{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Wf(e):{};return x(x(x(x(x(x(x(x(x(x(x(x({},hke(e.markDef,t)),q1e(e,"fill",n)),q1e(e,"stroke",r)),jt("opacity",e)),jt("fillOpacity",e)),jt("strokeOpacity",e)),jt("strokeWidth",e)),jt("strokeDash",e)),B1e(e)),Gf(e)),D4(e,"href")),TF(e))}function q1e(e,t,n){let{config:r,mark:i,markDef:o}=e;if(je("invalid",o,r)==="hide"&&n&&!Fi(i)){let s=mke(e,{invalid:!0,channels:y4});if(s)return{[t]:[{test:s,value:null},...te(n)]}}return n?{[t]:n}:{}}function hke(e,t){return rre.reduce((n,r)=>(!pke.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=it(e[r])),n),{})}function mke(e,{invalid:t=!1,channels:n}){let r=n.reduce((o,a)=>{let s=e.getScaleComponent(a);if(s){let c=s.get("type"),l=e.vgField(a,{expr:"datum"});l&&On(c)&&(o[l]=!0)}return o},{}),i=R(r);if(i.length>0){let o=t?"||":"&&";return i.map(a=>fh(a,t)).join(` ${o} `)}}function Yf(e){let{config:t,markDef:n}=e;if(je("invalid",n,t)){let i=gke(e,{channels:yr});if(i)return{defined:{signal:i}}}return{}}function gke(e,{invalid:t=!1,channels:n}){let r=n.reduce((o,a)=>{let s=e.getScaleComponent(a);if(s){let c=s.get("type"),l=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});l&&On(c)&&(o[l]=!0)}return o},{}),i=R(r);if(i.length>0){let o=t?"||":"&&";return i.map(a=>fh(a,t)).join(` ${o} `)}}function LM(e,t){if(t!==void 0)return{[e]:it(t)}}var IF="voronoi",vke={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(let n of t.events)n.markname=e.getName(IF)},marks:(e,t,n)=>{let{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Fi(o))return U(P.nearestNotSupportForContinuous(o)),n;let a={name:e.getName(IF),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:x({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},Gf(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},s=0,c=!1;return n.forEach((l,u)=>{let f=l.name??"";f===e.component.mark[0].name?s=u:f.indexOf(IF)>=0&&(c=!0)}),c||n.splice(s+1,0,a),n}},AM=vke;var yke={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Ch(e.bind),parse:(e,t,n)=>NM(t,n),topLevelSignals:(e,t,n)=>{let r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],s=AM.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((c,l)=>{let u=pt(`${r}_${c.field}`);n.filter(d=>d.name===u).length||n.unshift(k(x({name:u},a?{init:$c(a[l])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${Z(c.field)}] : null`}]:[],bind:o[c.field]??o[c.channel]??o}))}),n},signals:(e,t,n)=>{let r=t.name,i=t.project,o=n.filter(l=>l.name===r+h1)[0],a=r+Bc,s=i.items.map(l=>pt(`${r}_${l.field}`)),c=s.map(l=>`${l} !== null`).join(" && ");return s.length&&(o.update=`${c} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},VM=yke;var Xf="_toggle",xke={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Xf,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{let n=t.name+h1,r=t.name+Xf;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${ca(e)}}, `)+`${r} ? ${n} : null`}},_M=xke;var Cke={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Q(t.clear)?Ai(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(VM.defined(t))for(let r of t.project.items){let i=n.findIndex(o=>o.name===pt(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(let i of t.project.items){let o=n.findIndex(a=>a.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){let a=n.findIndex(s=>s.name===i.signals.data);r(a,"null")}}else{let i=n.findIndex(o=>o.name===t.name+h1);r(i,"null"),_M.defined(t)&&(i=n.findIndex(o=>o.name===t.name+Xf),r(i,"false"))}return n}},G1e=Cke;var W1e={defined:e=>{let t=e.resolve==="global"&&e.bind&&Ch(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ci;return t&&!n&&U(P.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),t&&n},parse:(e,t,n)=>{let r=le(n);if(r.select=Q(r.select)?{type:r.select,toggle:t.toggle}:k(x({},r.select),{toggle:t.toggle}),NM(t,r),ne(n.select)&&(n.select.on||n.select.clear)){let a='event.item && indexof(event.item.mark.role, "legend") < 0';for(let s of t.events)s.filter=te(s.filter??[]),s.filter.includes(a)||s.filter.push(a)}let i=cM(t.bind)?t.bind.legend:"click",o=Q(i)?Ai(i,"view"):te(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{let r=t.name,i=cM(t.bind)&&t.bind.legend,o=a=>s=>{let c=le(s);return c.markname=a,c};for(let a of t.project.items){if(!a.hasLegend)continue;let s=`${pt(a.field)}_legend`,c=`${r}_${s}`;if(n.filter(u=>u.name===c).length===0){let u=i.merge.map(o(`${s}_symbols`)).concat(i.merge.map(o(`${s}_labels`))).concat(i.merge.map(o(`${s}_entries`)));n.unshift(k(x({name:c},t.init?{}:{value:null}),{on:[{events:u,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${c}`,force:!0}]}))}}return n},signals:(e,t,n)=>{let r=t.name,i=t.project,o=n.find(d=>d.name===r+h1),a=r+Bc,s=i.items.filter(d=>d.hasLegend).map(d=>pt(`${r}_${pt(d.field)}_legend`)),l=`${s.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map(d=>({signal:d})),update:l}):s.length>0&&(o.update=l,delete o.value,delete o.on);let u=n.find(d=>d.name===r+Xf),f=cM(t.bind)&&t.bind.legend;return u&&(t.events?u.on.push(k(x({},u.on[0]),{events:f})):u.on[0].events=f),n}},Y1e=W1e;function X1e(e,t,n){let r=e.fieldDef(t)?.field;for(let i of rn(e.component.selection??{})){let o=i.project.hasField[r]??i.project.hasChannel[t];if(o&&W1e.defined(i)){let a=n.get("selections")??[];a.push(i.name),n.set("selections",a,!1),o.hasLegend=!0}}}var K1e="_translate_anchor",Z1e="_translate_delta",bke={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{let r=t.name,i=Mo.defined(t),o=r+K1e,{x:a,y:s}=t.project.hasChannel,c=Ai(t.translate,"scope");return i||(c=c.map(l=>(l.between[0].markname=r+Uc,l))),n.push({name:o,value:{},on:[{events:c.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?`, extent_x: ${i?Eh(e,Ct):`slice(${a.signals.visual})`}`:"")+(s!==void 0?`, extent_y: ${i?Eh(e,on):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+Z1e,value:{},on:[{events:c,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),a!==void 0&&Q1e(e,t,a,"width",n),s!==void 0&&Q1e(e,t,s,"height",n),n}},J1e=bke;function Q1e(e,t,n,r,i){let o=t.name,a=o+K1e,s=o+Z1e,c=n.channel,l=Mo.defined(t),u=i.filter(M=>M.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(c),p=d&&d.get("type"),h=d&&d.get("reverse"),m=l?c===Ct?h?"":"-":h?"-":"":"",g=`${a}.extent_${c}`,v=`${m}${s}.${c} / ${l?`${f}`:`span(${g})`}`,y=!l||!d?"panLinear":p==="log"?"panLog":p==="symlog"?"panSymlog":p==="pow"?"panPow":"panLinear",C=l?p==="pow"?`, ${d.get("exponent")??1}`:p==="symlog"?`, ${d.get("constant")??1}`:"":"",b=`${y}(${g}, ${v}${C})`;u.on.push({events:{signal:s},update:l?b:`clampRange(${b}, 0, ${f})`})}var toe="_zoom_anchor",noe="_zoom_delta",Mke={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{let r=t.name,i=Mo.defined(t),o=r+noe,{x:a,y:s}=t.project.hasChannel,c=Z(e.scaleName(Ct)),l=Z(e.scaleName(on)),u=Ai(t.zoom,"scope");return i||(u=u.map(f=>(f.markname=r+Uc,f))),n.push({name:r+toe,on:[{events:u,update:i?"{"+[c?`x: invert(${c}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:u,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&eoe(e,t,a,"width",n),s!==void 0&&eoe(e,t,s,"height",n),n}},roe=Mke;function eoe(e,t,n,r,i){let o=t.name,a=n.channel,s=Mo.defined(t),c=i.filter(y=>y.name===n.signals[s?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,u=e.getScaleComponent(a),f=u&&u.get("type"),d=s?Eh(e,a):c.name,p=o+noe,h=`${o}${toe}.${a}`,m=!s||!u?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=s?f==="pow"?`, ${u.get("exponent")??1}`:f==="symlog"?`, ${u.get("constant")??1}`:"":"",v=`${m}(${d}, ${h}, ${p}${g})`;c.on.push({events:{signal:p},update:s?v:`clampRange(${v}, 0, ${l})`})}var sa="_store",h1="_tuple",V1e="_modify";var SM="vlSelectionResolve",jf=[$1e,P1e,I1e,_M,VM,Mo,Y1e,G1e,J1e,roe,AM];function wke(e){let t=e.parent;for(;t&&!Rr(t);)t=t.parent;return t}function ca(e,{escape:t}={escape:!0}){let n=t?Z(e.name):e.name,r=wke(e);if(r){let{facet:i}=r;for(let o of Nr)i[o]&&(n+=` + '__facet_${o}_' + (facet[${Z(r.vgField(o))}])`)}return n}function Lh(e){return rn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function NM(e,t){(Q(t.select)||!t.select.on)&&delete e.events,(Q(t.select)||!t.select.clear)&&delete e.clear,(Q(t.select)||!t.select.toggle)&&delete e.toggle}function FF(e){let t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...FF(e.object)),t.push(...FF(e.property))),t)}function ioe(e){return e.object.type==="MemberExpression"?ioe(e.object):e.object.name==="datum"}function kM(e){let t=rf(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&ioe(r)&&n.add(FF(r).slice(1).join("."))}),n}var ys=class e extends Le{clone(){return new e(null,this.model,le(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=A0(this.model,this.filter,this),this._dependentFields=kM(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}};function ooe(e,t){let n={},r=e.config.selection;if(!t||!t.length)return n;for(let i of t){let o=pt(i.name),a=i.select,s=Q(a)?a:a.type,c=ne(a)?le(a):{type:s},l=r[s];for(let d in l)d==="fields"||d==="encodings"||(d==="mark"&&(c[d]=x(x({},l[d]),c[d])),(c[d]===void 0||c[d]===!0)&&(c[d]=le(l[d]??c[d])));let u=n[o]=k(x({},c),{name:o,type:s,init:i.value,bind:i.bind,events:Q(c.on)?Ai(c.on,"scope"):te(le(c.on))}),f=le(i);for(let d of jf)d.defined(u)&&d.parse&&d.parse(e,u,f)}return n}function DM(e,t,n,r="datum"){let i=Q(t)?t:t.param,o=pt(i),a=Z(o+sa),s;try{s=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(s.project.timeUnit){let d=n??e.component.data.raw,p=s.project.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p}let c=s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=s.resolve==="global"?")":`, ${Z(s.resolve)})`,u=`${c}${a}, ${r}${l}`,f=`length(data(${a}))`;return t.empty===!1?`${f} && ${u}`:`!${f} || ${u}`}function EM(e,t,n){let r=pt(t),i=n.encoding,o=n.field,a;try{a=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=a.project.items[0].field,a.project.items.length>1&&U(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Z(o)}.`);else if(i&&!o){let s=a.project.items.filter(c=>c.channel===i);!s.length||s.length>1?(o=a.project.items[0].field,U((s.length?"Multiple ":"No ")+`matching ${Z(i)} encoding found for selection ${Z(n.param)}. Using "field": ${Z(o)}.`)):o=s[0].field}return`${a.name}[${Z(rr(o))}]`}function aoe(e,t){for(let[n,r]of F1(e.component.selection??{})){let i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Dn(new ys(t,e,{param:n}),i,Mt.Lookup,e.component.data.outputNodeRefCounts)}}function A0(e,t,n){return hf(t,r=>Q(r)?r:wre(r)?DM(e,r,n):_b(r))}function Ske(e,t){if(e)return F(e)&&!ea(e)?e.map(n=>mh(n,t)).join(", "):e}function RF(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function Qf(e,t,n,r={header:!1}){let f=e.combine(),{disable:i,orient:o,scale:a,labelExpr:s,title:c,zindex:l}=f,u=ie(f,["disable","orient","scale","labelExpr","title","zindex"]);if(!i){for(let p in u){let h=hie[p],m=u[p];if(h&&h!==t&&h!=="both")delete u[p];else if(Fc(m)){let d=m,{condition:g}=d,v=ie(d,["condition"]),y=te(g),C=nF[p];if(C){let{vgProp:b,part:M}=C,S=[...y.map(w=>{let z=w,{test:E}=z,D=ie(z,["test"]);return x({test:A0(null,E)},D)}),v];RF(u,M,b,S),delete u[p]}else if(C===null){let b={signal:y.map(M=>{let E=M,{test:S}=E,w=ie(E,["test"]);return`${A0(null,S)} ? ${_I(w)} : `}).join("")+_I(v)};u[p]=b}}else if(ae(m)){let g=nF[p];if(g){let{vgProp:v,part:y}=g;RF(u,y,v,m),delete u[p]}}Ve(["labelAlign","labelBaseline"],p)&&u[p]===null&&delete u[p]}if(t==="grid"){if(!u.grid)return;if(u.encode){let{grid:p}=u.encode;u.encode=x({},p?{grid:p}:{}),Qe(u.encode)&&delete u.encode}return k(x({scale:a,orient:o},u),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ct(l,0)})}else{if(!r.header&&e.mainExtracted)return;if(s!==void 0){let h=s;u.encode?.labels?.update&&ae(u.encode.labels.update.text)&&(h=X2(s,"datum.label",u.encode.labels.update.text.signal)),RF(u,"labels","text",{signal:h})}if(u.labelAlign===null&&delete u.labelAlign,u.encode){for(let h of Kb)e.hasAxisPart(h)||delete u.encode[h];Qe(u.encode)&&delete u.encode}let p=Ske(c,n);return k(x(x(x({scale:a,orient:o,grid:!1},p?{title:p}:{}),u),n.aria===!1?{aria:!1}:{}),{zindex:ct(l,0)})}}}function TM(e){let{axes:t}=e.component,n=[];for(let r of yr)if(t[r]){for(let i of t[r])if(!i.get("disable")&&!i.get("gridScale")){let o=r==="x"?"height":"width",a=e.getSizeSignalRef(o).signal;o!==a&&n.push({name:o,update:a})}}return n}function soe(e,t){let{x:n=[],y:r=[]}=e;return[...n.map(i=>Qf(i,"grid",t)),...r.map(i=>Qf(i,"grid",t)),...n.map(i=>Qf(i,"main",t)),...r.map(i=>Qf(i,"main",t))].filter(i=>i)}function coe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){let o=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},s=t[n==="x"?"axisTop":"axisRight"]||{},c=new Set([...R(a),...R(s)]),l={};for(let u of c.values())l[u]={signal:`${r.signal} === "${o}" ? ${d1(a[u])} : ${d1(s[u])}`};return l}return t[i]})])}function loe(e,t,n,r){let i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:qI(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",a=ae(n)?"axisOrient":`axis${h4(n)}`,s=[...i,...i.map(l=>o+l.substr(4))],c=["axis",a,o];return{vlOnlyAxisConfig:coe(s,r,e,n),vgAxisConfig:coe(c,r,e,n),axisConfigStyle:Eke([...c,...s],r)}}function Eke(e,t){let n=[{}];for(let r of e){let i=t[r]?.style;if(i){i=te(i);for(let o of i)n.push(t.style[o])}}return Object.assign.apply(null,n)}function Ah(e,t,n,r={}){let i=TI(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(let o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(r[o]?.[e]!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}var PF={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Dke(n,e),gridScale:({model:e,channel:t})=>zke(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||BF(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||$F(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Hke(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Lke(t.type,n,Y(t)&&!!t.timeUnit,Y(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{let o=e==="x"?"width":e==="y"?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??Ake({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},tickMinStep:Vke,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;let r=UF(t,n);if(r!==void 0)return r;let i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",a=t.fieldDef(o);return II(i?[KI(i)]:[],Y(a)?[KI(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Nke(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??_ke(n,t)};function Dke(e,t){return!Rt(e)&&Y(t)&&!rt(t?.bin)&&!an(t?.bin)}function zke(e,t){let n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function uoe(e,t,n,r,i){let o=t?.labelAngle;if(o!==void 0)return ae(o)?o:m4(o);{let{configValue:a}=Ah("labelAngle",r,t?.style,i);return a!==void 0?m4(a):n===Ct&&Ve([oh,ih],e.type)&&!(Y(e)&&e.timeUnit)?270:void 0}}function OF(e){return`(((${e.signal} % 360) + 360) % 360)`}function $F(e,t,n,r){if(e!==void 0)if(n==="x"){if(ae(e)){let i=OF(e),o=ae(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(ae(t)){let i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(ae(e)){let i=OF(e),o=ae(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(ae(t)){let i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function BF(e,t,n){if(e===void 0)return;let r=n==="x",i=r?0:90,o=r?"bottom":"left";if(ae(e)){let a=OF(e),s=ae(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${a} + 90)`:a} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${s} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(ae(t)){let a=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${a} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function Hke(e,t){if(t==="x"&&Ve(["quantitative","temporal"],e))return!0}function Lke(e,t,n,r){if(n&&!ne(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function foe(e){return e==="x"?"bottom":"left"}function Ake({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){if(!r&&!Rt(t)&&t!=="log"){if(Y(e)){if(rt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ve(["month","hours","day","quarter"],sn(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Vke({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Y(t)){let{timeUnit:n}=t;if(n){let r=Eb(n);if(r)return{signal:r}}}}function UF(e,t){let n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;if(o&&a)return FI(o,a);if(o)return o;if(a)return a;if(o!==void 0)return o;if(a!==void 0)return a}function Nke(e,t){let n=e.values;if(F(n))return Qb(t,n);if(ae(n))return n}function _ke(e,t){return e==="rect"&&ph(t)?1:0}var V0=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=kM(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(i2(r)&&Ub(r.sort)){let{field:o,timeUnit:a}=r,s=r.sort,c=s.map((l,u)=>`${_b({field:o,timeUnit:a,equal:l})} ? ${u} : `).join("")+s.length;t=new e(t,{calculate:c,as:xs(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${be(this.transform)}`}};function xs(e,t,n){return K(e,x({prefix:t,suffix:"sort_index"},n??{}))}function Kf(e,t){return Ve(["top","bottom"],t)?"column":Ve(["left","right"],t)||e==="row"?"row":"column"}function qc(e,t,n,r){let i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ct((t||{})[e],i[e],n.header[e])}function Vh(e,t,n,r){let i={};for(let o of e){let a=qc(o,t||{},n,r);a!==void 0&&(i[o]=a)}return i}var Zf=["row","column"],Jf=["header","footer"];function doe(e,t){let n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=Vh(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),c=Kf(t,s),l=m4(a);return{name:`${t}-title`,type:"group",role:`${c}-title`,title:x(x(x(k(x({text:n},t==="row"?{orient:"left"}:{}),{style:"guide-title"}),hoe(l,c)),poe(c,l,o)),voe(r,i,t,Nie,pF))}}function poe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}let r=BF(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function hoe(e,t){let n=$F(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function moe(e,t){let n=e.component.layoutHeaders[t],r=[];for(let i of Jf)if(n[i])for(let o of n[i]){let a=Tke(e,t,i,n,o);a!=null&&r.push(a)}return r}function kke(e,t){let{sort:n}=e;return Fr(n)?{field:K(n,{expr:"datum"}),order:n.order??"ascending"}:F(n)?{field:xs(e,t,{expr:"datum"}),order:"ascending"}:{field:K(e,{expr:"datum"}),order:n??"ascending"}}function IM(e,t,n){let{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:c}=Vh(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Nf({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,u=Kf(t,s);return x(x(x(k(x({text:{signal:c?X2(X2(c,"datum.label",l),"datum.value",K(e,{expr:"parent"})):l}},t==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),hoe(o,u)),poe(u,o,a)),voe(n,e,t,_ie,hF))}function Tke(e,t,n,r,i){if(i){let o=null,{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){let{labelOrient:f}=Vh(["labelOrient"],a.header,s,t);(t==="row"&&!Ve(["top","bottom"],f)||t==="column"&&!Ve(["left","right"],f))&&(o=IM(a,t,s))}let c=Rr(e)&&!hs(e.facet),l=i.axes,u=l?.length>0;if(o||u){let f=t==="row"?"height":"width";return x(x(x(x(x({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:kke(a,t)}:{}),u&&c?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{}),u?{axes:l}:{})}}return null}var Ike={column:{start:0,end:1},row:{start:1,end:0}};function Fke(e,t){return Ike[t][e]}function goe(e,t){let n={};for(let r of Nr){let i=e[r];if(i?.facetFieldDef){let{titleAnchor:o,titleOrient:a}=Vh(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),s=Kf(r,a),c=Fke(o,s);c!==void 0&&(n[s]=c)}}return Qe(n)?void 0:n}function voe(e,t,n,r,i){let o={};for(let a of r){if(!i[a])continue;let s=qc(a,t?.header,e,n);s!==void 0&&(o[i[a]]=s)}return o}function e8(e){return[...FM(e,"width"),...FM(e,"height"),...FM(e,"childWidth"),...FM(e,"childHeight")]}function FM(e,t){let n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];let i=e.getSizeSignalRef(t).signal;if(r==="step"){let o=e.getScaleComponent(n);if(o){let a=o.get("type"),s=o.get("range");if(Rt(a)&&Ii(s)){let c=e.scaleName(n);return Rr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[yoe(c,s)]:[yoe(c,s),{name:i,update:jF(c,o,`domain('${c}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){let o=i.endsWith("width"),a=o?"containerSize()[0]":"containerSize()[1]",s=Mh(e.config.view,o?"width":"height"),c=`isFinite(${a}) ? ${a} : ${s}`;return[{name:i,init:c,on:[{update:c,events:"window:resize"}]}]}else return[{name:i,value:r}]}function yoe(e,t){let n=`${e}_step`;return ae(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function jF(e,t,n){let r=t.get("type"),i=t.get("padding"),o=ct(t.get("paddingOuter"),i),a=t.get("paddingInner");return a=r==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${d1(a)}, ${d1(o)}) * ${e}_step`}function RM(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function OM(e,t){return R(e).reduce((n,r)=>{let i=e[r];return x(x({},n),G1(t,i,r,o=>it(o.value)))},{})}function PM(e,t){if(Rr(t))return e==="theta"?"independent":"shared";if(s2(t))return"shared";if(n8(t))return bt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function t8(e,t){let n=e.scale[t],r=bt(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&U(P.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}var Rke=k(x({},gF),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),qF=R(Rke),$M=class extends Oi{};var GF={symbols:Oke,gradient:Pke,labels:$ke,entries:Bke};function Oke(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;let{markDef:a,encoding:s,config:c,mark:l}=n,u=a.filled&&l!=="trail",f=x(x({},sre({},n,jre)),Wf(n,{filled:u})),d=i.get("symbolOpacity")??c.legend.symbolOpacity,p=i.get("symbolFillColor")??c.legend.symbolFillColor,h=i.get("symbolStrokeColor")??c.legend.symbolStrokeColor,m=d===void 0?xoe(s.opacity)??a.opacity:void 0;if(f.fill){if(r==="fill"||u&&r===Rn)delete f.fill;else if(f.fill.field)p?delete f.fill:(f.fill=it(c.legend.symbolBaseFillColor??"black"),f.fillOpacity=it(m??1));else if(F(f.fill)){let g=BM(s.fill??s.color)??a.fill??(u&&a.color);g&&(f.fill=it(g))}}if(f.stroke){if(r==="stroke"||!u&&r===Rn)delete f.stroke;else if(f.stroke.field||h)delete f.stroke;else if(F(f.stroke)){let g=ct(BM(s.stroke||s.color),a.stroke,u?a.color:void 0);g&&(f.stroke={value:g})}}if(r!==f1){let g=Y(t)&&boe(n,i,t);g?f.opacity=[x({test:g},it(m??1)),it(c.legend.unselectedOpacity)]:m&&(f.opacity=it(m))}return f=x(x({},f),e),Qe(f)?void 0:f}function Pke(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;let{config:i,markDef:o,encoding:a}=t,s={},l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?xoe(a.opacity)||o.opacity:void 0;return l&&(s.opacity=it(l)),s=x(x({},s),e),Qe(s)?void 0:s}function $ke(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){let o=n.legend(r)||{},a=n.config,s=Y(t)?boe(n,i,t):void 0,c=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:l,formatType:u}=o,f;ps(u)?f=bo({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:u,config:a}):l===void 0&&u===void 0&&a.customFormatTypes&&(t.type==="quantitative"&&a.numberFormatType?f=bo({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):t.type==="temporal"&&a.timeFormatType&&Y(t)&&t.timeUnit===void 0&&(f=bo({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));let d=x(x(x({},c?{opacity:c}:{}),f?{text:f}:{}),e);return Qe(d)?void 0:d}function Bke(e,{legendCmpt:t}){return t.get("selections")?.length?k(x({},e),{fill:{value:"transparent"}}):e}function xoe(e){return Coe(e,(t,n)=>Math.max(t,n.value))}function BM(e){return Coe(e,(t,n)=>ct(t,n.value))}function Coe(e,t){if(sie(e))return te(e.condition).reduce(t,e.value);if(or(e))return e.value}function boe(e,t,n){let r=t.get("selections");if(!r?.length)return;let i=Z(n.field);return r.map(o=>`(!length(data(${Z(pt(o)+sa)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}var WF={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{let{format:r,formatType:i}=t;return Pb(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{let{formatType:r}=e;return $b(r,t,n)},gradientLength:e=>{let{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Wke(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Yke(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??jke(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>ms(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Lc(n)&&B1(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Uke(t,e)};function Uke(e,t){let n=e.values;if(F(n))return Qb(t,n);if(ae(n))return n}function jke(e,t,n,r){if(t!=="shape"){let i=BM(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function woe(e){let{legend:t}=e;return ct(t.type,qke(e))}function qke({channel:e,timeUnit:t,scaleType:n}){if(Lc(e)){if(Ve(["quarter","month","day"],t))return"symbol";if(B1(n))return"gradient"}return"symbol"}function Soe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Gke(n,t)}function Gke(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Wke({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){let{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:c}=e;if(B1(i))return n==="horizontal"?r==="top"||r==="bottom"?Moe(t,"width",a,o):a:Moe(t,"height",c,s)}function Moe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Yke(e){if(Ve(["quantile","threshold","log","symlog"],e))return"greedy"}function YF(e){let t=wt(e)?Xke(e):Jke(e);return e.component.legends=t,t}function Xke(e){let{encoding:t}=e,n={};for(let r of[Rn,...sM]){let i=kt(t[r]);!i||!e.getScaleComponent(r)||r===wn&&Y(i)&&i.type===ia||(n[r]=Zke(e,r))}return n}function Qke(e,t){let n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Kke(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===r?.title)return!0}return e===(n||{})[t]}function Zke(e,t){let n=e.legend(t),{markDef:r,encoding:i,config:o}=e,a=o.legend,s=new $M({},Qke(e,t));X1e(e,t,s);let c=n!==void 0?!n:a.disable;if(s.set("disable",c,n!==void 0),c)return s;n=n||{};let l=e.getScaleComponent(t).get("type"),u=kt(i[t]),f=Y(u)?sn(u.timeUnit)?.unit:void 0,d=n.orient||o.legend.orient||"right",p=woe({legend:n,channel:t,timeUnit:f,scaleType:l}),h=Soe({legend:n,legendType:p,orient:d,legendConfig:a}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:u,legendConfig:a,config:o,scaleType:l,orient:d,legendType:p,direction:h};for(let b of qF){if(p==="gradient"&&b.startsWith("symbol")||p==="symbol"&&b.startsWith("gradient"))continue;let M=b in WF?WF[b](m):n[b];if(M!==void 0){let S=Kke(M,b,n,e.fieldDef(t));(S||o.legend[b]===void 0)&&s.set(b,M,S)}}let g=n?.encoding??{},v=s.get("selections"),y={},C={fieldOrDatumDef:u,model:e,channel:t,legendCmpt:s,legendType:p};for(let b of["labels","legend","title","symbols","gradient","entries"]){let M=OM(g[b]??{},e),S=b in GF?GF[b](M,C):M;S!==void 0&&!Qe(S)&&(y[b]=k(x(x({},v?.length&&Y(u)?{name:`${pt(u.field)}_legend_${b}`}:{}),v?.length?{interactive:!!v}:{}),{update:S}))}return Qe(y)||s.set("encode",y,!!n?.encoding),s}function Jke(e){let{legends:t,resolve:n}=e.component;for(let r of e.children){YF(r);for(let i of R(r.component.legends))n.legend[i]=t8(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=XF(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(let r of R(t))for(let i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function XF(e,t){if(!e)return t.clone();let n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(let o of qF){let a=q1(e.getWithExplicit(o),t.getWithExplicit(o),o,"legend",(s,c)=>{switch(o){case"symbolType":return eTe(s,c);case"title":return wb(s,c);case"type":return i=!0,Pi("symbol")}return Uf(s,c,o,"legend")});e.setWithExplicit(o,a)}return i&&(e.implicit?.encode?.gradient&&Zp(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&Zp(e.explicit,["encode","gradient"])),e}function eTe(e,t){return t.value==="circle"?t:e}function tTe(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function UM(e){let t=e.component.legends,n={};for(let i of R(t)){let o=e.getScaleComponent(i),a=ht(o.get("domains"));if(n[a])for(let s of n[a])XF(s,t[i])||n[a].push(t[i]);else n[a]=[t[i].clone()]}return rn(n).flat().map(i=>nTe(i,e.config)).filter(i=>i!==void 0)}function nTe(e,t){let a=e.combine(),{disable:n,labelExpr:r,selections:i}=a,o=ie(a,["disable","labelExpr","selections"]);if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),o.encode?.symbols){let s=o.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!o.stroke&&(s.stroke={value:"transparent"});for(let c of sM)o[c]&&delete s[c]}if(o.title||delete o.title,r!==void 0){let s=r;o.encode?.labels?.update&&ae(o.encode.labels.update.text)&&(s=X2(r,"datum.label",o.encode.labels.update.text.signal)),tTe(o,"labels","text",{signal:s})}return o}}function Eoe(e){return s2(e)||n8(e)?rTe(e):Doe(e)}function rTe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Doe(e))}function Doe(e){let t=e.component.projection;if(!t||t.merged)return[];let n=t.combine(),{name:r}=n;if(t.data){let i={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},o=t.data.reduce((a,s)=>{let c=ae(s)?s.signal:`data('${e.lookupDataSource(s)}')`;return Ve(a,c)||a.push(c),a},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[x({name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}else return[x({name:r,translate:{signal:"[width / 2, height / 2]"}},n)]}var zoe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];var Nh=class extends Oi{constructor(t,n,r,i){super(x({},n),{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}};function QF(e){e.component.projection=wt(e)?iTe(e):sTe(e)}function iTe(e){if(e.hasProjection){let t=ir(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?oTe(e):void 0,o=new Nh(e.projectionName(!0),x(x({},ir(e.config.projection)??{}),t??{}),r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function oTe(e){let t=[],{encoding:n}=e;for(let r of[[ii,ri],[oi,_i]])(kt(n[r[0]])||kt(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(wn)&&e.typedFieldDef(wn).type===ia&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Mt.Main)),t}function aTe(e,t){let n=sb(zoe,i=>!!(!de(e.explicit,i)&&!de(t.explicit,i)||de(e.explicit,i)&&de(t.explicit,i)&&Vr(e.get(i),t.get(i))));if(Vr(e.size,t.size)){if(n)return e;if(Vr(e.explicit,{}))return t;if(Vr(t.explicit,{}))return e}return null}function sTe(e){if(e.children.length===0)return;let t;for(let r of e.children)QF(r);let n=sb(e.children,r=>{let i=r.component.projection;if(i)if(t){let o=aTe(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){let r=e.projectionName(!0),i=new Nh(r,t.specifiedProjection,t.size,le(t.data));for(let o of e.children){let a=o.component.projection;a&&(a.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(a.get("name"),r),a.merged=!0)}return i}}function cTe(e,t,n,r){if(ds(t,n)){let i=wt(e)?e.axis(n)??e.legend(n)??{}:{},o=K(t,{expr:"datum"}),a=K(t,{expr:"datum",binSuffix:"end"});return{formulaAs:K(t,{binSuffix:"range",forAs:!0}),formula:E0(o,a,i.format,i.formatType,r)}}return{}}function Loe(e,t){return`${yb(e)}_${t}`}function lTe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function r8(e,t,n){let r=Sf(n,void 0)??{},i=Loe(r,t);return e.getName(`${i}_bins`)}function uTe(e){return"as"in e}function Hoe(e,t,n){let r,i;uTe(e)?r=Q(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[K(e,{forAs:!0}),K(e,{binSuffix:"end",forAs:!0})];let o=x({},Sf(t,void 0)),a=Loe(o,e.field),{signal:s,extentSignal:c}=lTe(n,a);if(wf(o.extent)){let u=o.extent;i=EM(n,u.param,u),delete o.extent}let l=x(x(x({bin:o,field:e.field,as:[r]},s?{signal:s}:{}),c?{extentSignal:c}:{}),i?{span:i}:{});return{key:a,binComponent:l}}var la=class e extends Le{clone(){return new e(null,le(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){let r=n.reduceFieldDef((i,o,a)=>{if(En(o)&&rt(o.bin)){let{key:s,binComponent:c}=Hoe(o,o.bin,n);i[s]=x(x(x({},c),i[s]),cTe(n,o,a,n.config))}return i},{});return Qe(r)?null:new e(t,r)}static makeFromTransform(t,n,r){let{key:i,binComponent:o}=Hoe(n,n.bin,r);return new e(t,{[i]:o})}merge(t,n){for(let r of R(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Vi([...this.bins[r].as,...t.bins[r].as],be)):this.bins[r]=t.bins[r];for(let r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(rn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(rn(this.bins).map(t=>t.field))}hash(){return`Bin ${be(this.bins)}`}assemble(){return rn(this.bins).flatMap(t=>{let n=[],[r,...i]=t.as,c=t.bin,{extent:o}=c,a=ie(c,["extent"]),s=x(x(x({type:"bin",field:rr(t.field),as:r,signal:t.signal},wf(o)?{extent:null}:{extent:o}),t.span?{span:{signal:`span(${t.span})`}}:{}),a);!o&&t.extentSignal&&(n.push({type:"extent",field:rr(t.field),signal:t.extentSignal}),s.extent={signal:t.extentSignal}),n.push(s);for(let l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:K({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}};function fTe(e,t,n,r){let i=wt(r)?r.encoding[_r(t)]:void 0;if(En(n)&&wt(r)&&Wb(n,i,r.markDef,r.config)){e.add(K(n,{})),e.add(K(n,{suffix:"end"}));let{mark:o,markDef:a,config:s}=r,c=U1({fieldDef:n,markDef:a,config:s});Nc(o)&&c!==.5&&bt(t)&&(e.add(K(n,{suffix:H0})),e.add(K(n,{suffix:L0}))),n.bin&&ds(n,t)&&e.add(K(n,{binSuffix:"range"}))}else if(db(t)){let o=fb(t);e.add(r.getName(o))}else e.add(K(n));return i2(n)&&Tre(n.scale?.range)&&e.add(n.scale.range.field),e}function dTe(e,t){for(let n of R(t)){let r=t[n];for(let i of R(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}var wo=class e extends Le{clone(){return new e(null,new Set(this.dimensions),le(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(a=>{a.aggregate&&(r=!0)});let i={},o=new Set;return!r||(n.forEachFieldDef((a,s)=>{let{aggregate:c,field:l}=a;if(c)if(c==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([K(a,{forAs:!0})]);else{if(xo(c)||t2(c)){let u=xo(c)?"argmin":"argmax",f=c[u];i[f]??(i[f]={}),i[f][u]=new Set([K({op:u,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][c]=new Set([K(a,{forAs:!0})]);kr(s)&&n.scaleDomain(s)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([K({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([K({field:l,aggregate:"max"},{forAs:!0})]))}else fTe(o,s,a,n)}),o.size+R(i).length===0)?null:new e(t,o,i)}static makeFromTransform(t,n){let r=new Set,i={};for(let o of n.aggregate){let{op:a,field:s,as:c}=o;a&&(a==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([c||K(o,{forAs:!0})])):(i[s]??(i[s]={}),i[s][a]=new Set([c||K(o,{forAs:!0})])))}for(let o of n.groupby??[])r.add(o);return r.size+R(i).length===0?null:new e(t,r,i)}merge(t){return CI(this.dimensions,t.dimensions)?(dTe(this.measures,t.measures),!0):(fre("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...R(this.measures)])}producedFields(){let t=new Set;for(let n of R(this.measures))for(let r of R(this.measures[n])){let i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${be({dimensions:this.dimensions,measures:this.measures})}`}assemble(){let t=[],n=[],r=[];for(let o of R(this.measures))for(let a of R(this.measures[o]))for(let s of this.measures[o][a])r.push(s),t.push(a),n.push(o==="*"?null:rr(o));return{type:"aggregate",groupby:[...this.dimensions].map(rr),ops:t,fields:n,as:r}}};var l2=class extends Le{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(let o of Nr){let a=n.facet[o];if(a){let{bin:s,sort:c}=a;this[o]=x({name:n.getName(`${o}_domain`),fields:[K(a),...rt(s)?[K(a,{binSuffix:"end"})]:[]]},Fr(c)?{sortField:c}:F(c)?{sortIndexField:xs(a,o)}:{})}}this.childModel=n.child}hash(){let t="Facet";for(let n of Nr)this[n]&&(t+=` ${n.charAt(0)}:${be(this[n])}`);return t}get fields(){let t=[];for(let n of Nr)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){let t=new Set(this.fields);for(let n of Nr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){let t={};for(let n of yr){let r=this.childModel.component.scales[n];if(r&&!r.merged){let i=r.get("type"),o=r.get("range");if(Rt(i)&&Ii(o)){let a=H4(this.childModel,n),s=i8(a);s?t[n]=s:U(P.unknownField(n))}}}return t}assembleRowColumnHeaderData(t,n,r){let i={row:"y",column:"x",facet:void 0}[t],o=[],a=[],s=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),a.push("max")):(o.push(r[i]),a.push("distinct")),s.push(`distinct_${r[i]}`));let{sortField:c,sortIndexField:l}=this[t];if(c){let{op:u=C4,field:f}=c;o.push(f),a.push(u),s.push(K(c,{forAs:!0}))}else l&&(o.push(l),a.push("max"),s.push(l));return{name:this[t].name,source:n??this.data,transform:[x({type:"aggregate",groupby:this[t].fields},o.length?{fields:o,ops:a,as:s}:{})]}}assembleFacetHeaderData(t){let{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(let c of Zf){for(let l of Jf){let u=(r[c]&&r[c][l])??[];for(let f of u)if(f.axes?.length>0){o[c]=!0;break}}if(o[c]){let l=`length(data("${this.facet.name}"))`,u=c==="row"?n?{signal:`ceil(${l} / ${n})`}:1:n?{signal:`min(${l}, ${n})`}:{signal:l};i.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:u}]})}}let{row:a,column:s}=o;return(a||s)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){let t=[],n=null,r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:a}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;let s=[].concat(r.x??[],r.y??[]),c=s.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:c}]})}for(let s of[O1,R1])this[s]&&t.push(this.assembleRowColumnHeaderData(s,n,r));if(a){let s=this.assembleFacetHeaderData(r);s&&t.push(...s)}return t}};function Aoe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function pTe(e,t){let n=Jp(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){let r=Aoe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){let r=Aoe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return U(P.unrecognizedParse(t)),null}function Voe(e){let t={};return Kp(e.filter,n=>{if(UI(n)){let r=null;Db(n)?r=Tr(n.equal):Hb(n)?r=Tr(n.lte):zb(n)?r=Tr(n.lt):Lb(n)?r=Tr(n.gt):Ab(n)?r=Tr(n.gte):Vb(n)?r=n.range[0]:Nb(n)&&(r=(n.oneOf??n.in)[0]),r&&(n2(r)?t[n.field]="date":Pe(r)?t[n.field]="number":Q(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Noe(e){let t={};function n(r){Tc(r)?t[r.field]="date":r.type==="quantitative"&&Zne(r.aggregate)?t[r.field]="number":v0(r.field)>1?r.field in t||(t[r.field]="flatten"):i2(r)&&Fr(r.sort)&&v0(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((wt(e)||Rr(e))&&e.forEachFieldDef((r,i)=>{if(En(r))n(r);else{let o=yo(i),a=e.fieldDef(o);n(k(x({},r),{type:a.type}))}}),wt(e)){let{mark:r,markDef:i,encoding:o}=e;if(Fi(r)&&!e.encoding.order){let a=i.orient==="horizontal"?"y":"x",s=o[a];Y(s)&&s.type==="quantitative"&&!(s.field in t)&&(t[s.field]="number")}}return t}function _oe(e){let t={};if(wt(e)&&e.component.selection)for(let n of R(e.component.selection)){let r=e.component.selection[n];for(let i of r.project.items)!i.channel&&v0(i.field)>1&&(t[i.field]="flatten")}return t}var Or=class e extends Le{clone(){return new e(null,le(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${be(this._parse)}`}static makeExplicit(t,n,r){let i={},o=n.data;return!aa(o)&&o?.format?.parse&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(let s of R(r)){let c=i.getWithExplicit(s);c.value!==void 0&&(c.explicit||c.value===r[s]||c.value==="derived"||r[s]==="flatten"?delete r[s]:U(P.differentParse(s,r[s],c.value)))}for(let s of R(n)){let c=i.get(s);c!==void 0&&(c===n[s]?delete n[s]:U(P.differentParse(s,n[s],c)))}let o=new Oi(n,r);i.copyAll(o);let a={};for(let s of R(o.combine())){let c=o.get(s);c!==null&&(a[s]=c)}return R(a).length===0||i.parseNothing?null:new e(t,a)}get parse(){return this._parse}merge(t){this._parse=x(x({},this._parse),t.parse),t.remove()}assembleFormatParse(){let t={};for(let n of R(this._parse)){let r=this._parse[n];v0(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(R(this._parse))}dependentFields(){return new Set(R(this._parse))}assembleTransforms(t=!1){return R(this._parse).filter(n=>t?v0(n)>1:!0).map(n=>{let r=pTe(n,this._parse[n]);return r?{type:"formula",expr:r,as:eh(n)}:null}).filter(n=>n!==null)}};var ua=class e extends Le{clone(){return new e(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ci])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ci}}};var L4=class e extends Le{clone(){return new e(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${be(this.params)}`}assemble(){return x({type:"graticule"},this.params===!0?{}:this.params)}};var A4=class e extends Le{clone(){return new e(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${be(this.params)}`}assemble(){return x({type:"sequence"},this.params)}};var Y1=class extends Le{constructor(t){super(null),t??(t={name:"source"});let n;if(aa(t)||(n=t.format?x({},Fn(t.format,["parse"])):{}),z0(t))this._data={values:t.values};else if(Pc(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Ve(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else zF(t)?this._data={values:[{type:"Sphere"}]}:(wM(t)||aa(t))&&(this._data={});this._generator=aa(t),t.name&&(this._name=t.name),n&&!Qe(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return k(x({name:this._name},this._data),{transform:[]})}};var koe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},hTe=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},_h;function jM(e){return e instanceof Y1||e instanceof L4||e instanceof A4}var o8=class{constructor(){_h.set(this,void 0),koe(this,_h,!1,"f")}setModified(){koe(this,_h,!0,"f")}get modifiedFlag(){return hTe(this,_h,"f")}};_h=new WeakMap;var Cs=class extends o8{getNodeDepths(t,n,r){r.set(t,n);for(let i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){let r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(let i of r)this.run(i[0]);return this.modifiedFlag}},a8=class extends o8{optimize(t){this.run(t);for(let n of t.children)this.optimize(n);return this.modifiedFlag}};var qM=class extends a8{mergeNodes(t,n){let r=n.shift();for(let i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){let n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(let i of R(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}},GM=class extends a8{constructor(t){super(),this.requiresSelectionId=t&&Lh(t)}run(t){t instanceof ua&&(this.requiresSelectionId&&(jM(t.parent)||t.parent instanceof wo||t.parent instanceof Or)||(this.setModified(),t.remove()))}},WM=class extends o8{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof a2&&(r=t.producedFields(),cb(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(let i of t.children)this.run(i,new Set([...n,...r]))}},YM=class extends a8{constructor(){super()}run(t){t instanceof Dn&&!t.isRequired()&&(this.setModified(),t.remove())}},XM=class extends Cs{run(t){if(!jM(t)&&!(t.numChildren()>1)){for(let n of t.children)if(n instanceof Or)if(t instanceof Or)this.setModified(),t.merge(n);else{if(lb(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}},QM=class extends Cs{run(t){let n=[...t.children],r=t.children.filter(i=>i instanceof Or);if(t.numChildren()>1&&r.length>=1){let i={},o=new Set;for(let a of r){let s=a.parse;for(let c of R(s))c in i?i[c]!==s[c]&&o.add(c):i[c]=s[c]}for(let a of o)delete i[a];if(!Qe(i)){this.setModified();let a=new Or(t,i);for(let s of n){if(s instanceof Or)for(let c of R(i))delete s.parse[c];t.removeChild(s),s.parent=a,s instanceof Or&&R(s.parse).length===0&&s.remove()}}}}},KM=class extends Cs{run(t){t instanceof Dn||t.numChildren()>0||t instanceof l2||t instanceof Y1||(this.setModified(),t.remove())}},ZM=class extends Cs{run(t){let n=t.children.filter(i=>i instanceof a2),r=n.pop();for(let i of n)this.setModified(),r.merge(i)}},JM=class extends Cs{run(t){let n=t.children.filter(i=>i instanceof wo),r={};for(let i of n){let o=be(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(let i of R(r)){let o=r[i];if(o.length>1){let a=o.pop();for(let s of o)a.merge(s)&&(t.removeChild(s),s.parent=a,s.remove(),this.setModified())}}}},ew=class extends Cs{constructor(t){super(),this.model=t}run(t){let n=!(jM(t)||t instanceof ys||t instanceof Or||t instanceof ua),r=[],i=[];for(let o of t.children)o instanceof la&&(n&&!lb(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){let o=r.pop();for(let a of r)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof la?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){let o=i.pop();for(let a of i)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}},tw=class extends Cs{run(t){let n=[...t.children];if(!as(n,a=>a instanceof Dn)||t.numChildren()<=1)return;let i=[],o;for(let a of n)if(a instanceof Dn){let s=a;for(;s.numChildren()===1;){let[c]=s.children;if(c instanceof Dn)s=c;else break}i.push(...s.children),o?(t.removeChild(a),a.parent=o.parent,o.parent.removeChild(o),o.parent=s,this.setModified()):o=s}else i.push(a);if(i.length){this.setModified();for(let a of i)a.parent.removeChild(a),a.parent=o}}};var fa=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Vi(this.transform.groupby.concat(t),n=>n)}dependentFields(){let t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??K(t)}hash(){return`JoinAggregateTransform ${be(this.transform)}`}assemble(){let t=[],n=[],r=[];for(let o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);let i=this.transform.groupby;return x({type:"joinaggregate",as:r,ops:n,fields:t},i!==void 0?{groupby:i}:{})}};function gTe(e){return e.stack.stackBy.reduce((t,n)=>{let r=n.fieldDef,i=K(r);return i&&t.push(i),t},[])}function vTe(e){return F(e)&&e.every(t=>Q(t))&&e.length>1}var bs=class e extends Le{clone(){return new e(null,le(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){let{stack:r,groupby:i,as:o,offset:a="zero"}=n,s=[],c=[];if(n.sort!==void 0)for(let f of n.sort)s.push(f.field),c.push(ct(f.order,"ascending"));let l={field:s,order:c},u;return vTe(o)?u=o:Q(o)?u=[o,`${o}_end`]:u=[`${n.stack}_start`,`${n.stack}_end`],new e(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:a,sort:l,facetby:[],as:u})}static makeFromEncoding(t,n){let r=n.stack,{encoding:i}=n;if(!r)return null;let{groupbyChannels:o,fieldChannel:a,offset:s,impute:c}=r,l=o.map(p=>{let h=i[p];return si(h)}).filter(p=>!!p),u=gTe(n),f=n.encoding.order,d;if(F(f)||Y(f))d=Mb(f);else{let p=Yb(f)?f.sort:a==="y"?"descending":"ascending";d=u.reduce((h,m)=>(h.field.push(m),h.order.push(p),h),{field:[],order:[]})}return new e(t,{dimensionFieldDefs:l,stackField:n.vgField(a),facetby:[],stackby:u,sort:d,offset:s,impute:c,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){let t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${be(this._stack)}`}getGroupbyFields(){let{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[K(i,{binSuffix:"mid"})]:[K(i,{}),K(i,{binSuffix:"end"})]:[K(i)]).flat():r??[]}assemble(){let t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:a,offset:s,impute:c,as:l}=this._stack;if(c)for(let u of r){let{bandPosition:f=.5,bin:d}=u;if(d){let p=K(u,{expr:"datum"}),h=K(u,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${p}+${1-f}*${h}`,as:K(u,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:K(u,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:l,offset:s}),t}};var Gc=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Vi(this.transform.groupby.concat(t),n=>n)}dependentFields(){let t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??K(t)}hash(){return`WindowTransform ${be(this.transform)}`}assemble(){let t=[],n=[],r=[],i=[];for(let f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);let o=this.transform.frame,a=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>Mf(f)))return x({type:"joinaggregate",as:r,ops:n,fields:t},a!==void 0?{groupby:a}:{});let s=[],c=[];if(this.transform.sort!==void 0)for(let f of this.transform.sort)s.push(f.field),c.push(f.order??"ascending");let l={field:s,order:c},u=this.transform.ignorePeers;return x(x(x({type:"window",params:i,as:r,ops:n,fields:t,sort:l},u!==void 0?{ignorePeers:u}:{}),a!==void 0?{groupby:a}:{}),o!==void 0?{frame:o}:{})}};function yTe(e){function t(n){if(!(n instanceof l2)){let r=n.clone();if(r instanceof Dn){let i=kh+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof wo||r instanceof bs||r instanceof Gc||r instanceof fa)&&r.addDimensions(e.fields);for(let i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function nw(e){if(e instanceof l2)if(e.numChildren()===1&&!(e.children[0]instanceof Dn)){let t=e.children[0];(t instanceof wo||t instanceof bs||t instanceof Gc||t instanceof fa)&&t.addDimensions(e.fields),t.swapWithParent(),nw(e)}else{let t=e.model.component.data.main;Toe(t);let n=yTe(e),r=e.children.map(n).flat();for(let i of r)i.parent=t}else e.children.map(nw)}function Toe(e){if(e instanceof Dn&&e.type===Mt.Main&&e.numChildren()===1){let t=e.children[0];t instanceof l2||(t.swapWithParent(),Toe(e))}}var kh="scale_",rw=5;function KF(e){for(let t of e){for(let n of t.children)if(n.parent!==t)return!1;if(!KF(t.children))return!1}return!0}function da(e,t){let n=!1;for(let r of t)n=e.optimize(r)||n;return n}function Ioe(e,t,n){let r=e.sources,i=!1;return i=da(new YM,r)||i,i=da(new GM(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=da(new KM,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=da(new XM,r)||i,i=da(new ew(t),r)||i,i=da(new WM,r)||i,i=da(new QM,r)||i,i=da(new JM,r)||i,i=da(new ZM,r)||i,i=da(new qM,r)||i,i=da(new tw,r)||i),e.sources=r,i}function Foe(e,t){KF(e.sources);let n=0,r=0;for(let i=0;i<rw&&Ioe(e,t,!0);i++)n++;e.sources.map(nw);for(let i=0;i<rw&&Ioe(e,t,!1);i++)r++;KF(e.sources),Math.max(n,r)===rw&&U(`Maximum optimization runs(${rw}) reached.`)}var qn=class e{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new e(()=>t(n))}};function tR(e){wt(e)?xTe(e):CTe(e)}function xTe(e){let t=e.component.scales;for(let n of R(t)){let r=MTe(e,n);if(t[n].setWithExplicit("domains",r),STe(e,n),e.component.data.isFaceted){let o=e;for(;!Rr(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(let s of r.value)ta(s)&&(s.data=kh+s.data.replace(kh,""))}}}function CTe(e){for(let n of e.children)tR(n);let t=e.component.scales;for(let n of R(t)){let r,i=null;for(let o of e.children){let a=o.component.scales[n];if(a){r===void 0?r=a.getWithExplicit("domains"):r=q1(r,a.getWithExplicit("domains"),"domains","scale",eR);let s=a.get("selectionExtent");i&&s&&i.param!==s.param&&U(P.NEEDS_SAME_SELECTION),i=s}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function bTe(e,t,n,r){if(e==="unaggregated"){let{valid:i,reason:o}=Roe(t,n);if(!i){U(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){let{valid:i}=Roe(t,n);if(i)return"unaggregated"}return e}function MTe(e,t){let n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=bTe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=k(x({},e.specifiedScales[t]),{domain:i})),t==="x"&&kt(r.x2)?kt(r.x)?q1(V4(n,i,e,"x"),V4(n,i,e,"x2"),"domain","scale",eR):V4(n,i,e,"x2"):t==="y"&&kt(r.y2)?kt(r.y)?q1(V4(n,i,e,"y"),V4(n,i,e,"y2"),"domain","scale",eR):V4(n,i,e,"y2"):V4(n,i,e,t)}function wTe(e,t,n){return e.map(r=>({signal:`{data: ${C0(r,{timeUnit:n,type:t})}}`}))}function ZF(e,t,n){let r=sn(n)?.unit;return t==="temporal"||r?wTe(e,t,r):[e]}function V4(e,t,n,r){let{encoding:i,markDef:o,mark:a,config:s,stack:c}=n,l=kt(i[r]),{type:u}=l,f=l.timeUnit;if(kre(t)){let h=V4(e,void 0,n,r),m=ZF(t.unionWith,u,f);return o2([...m,...h.value])}else{if(ae(t))return o2([t]);if(t&&t!=="unaggregated"&&!GI(t))return o2(ZF(t,u,f))}if(c&&r===c.fieldChannel){if(c.offset==="normalize")return Pi([[0,1]]);let h=n.requestDataName(Mt.Main);return Pi([{data:h,field:n.vgField(r,{suffix:"start"})},{data:h,field:n.vgField(r,{suffix:"end"})}])}let d=kr(r)&&Y(l)?ETe(n,r,e):void 0;if(Ri(l)){let h=ZF([l.datum],u,f);return Pi(h)}let p=l;if(t==="unaggregated"){let h=n.requestDataName(Mt.Main),{field:m}=l;return Pi([{data:h,field:K({field:m,aggregate:"min"})},{data:h,field:K({field:m,aggregate:"max"})}])}else if(rt(p.bin)){if(Rt(e))return e==="bin-ordinal"?Pi([]):Pi([{data:mf(d)?n.requestDataName(Mt.Main):n.requestDataName(Mt.Raw),field:n.vgField(r,ds(p,r)?{binSuffix:"range"}:{}),sort:d===!0||!ne(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{let{bin:h}=p;if(rt(h)){let m=r8(n,p.field,h);return Pi([new qn(()=>{let g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Pi([{data:n.requestDataName(Mt.Main),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Ve(["time","utc"],e)){let h=i[_r(r)];if(Wb(p,h,o,s)){let m=n.requestDataName(Mt.Main),g=U1({fieldDef:p,fieldDef2:h,markDef:o,config:s}),v=Nc(a)&&g!==.5&&bt(r);return Pi([{data:m,field:n.vgField(r,v?{suffix:H0}:{})},{data:m,field:n.vgField(r,{suffix:v?L0:"end"})}])}}return d?Pi([{data:mf(d)?n.requestDataName(Mt.Main):n.requestDataName(Mt.Raw),field:n.vgField(r),sort:d}]):Pi([{data:n.requestDataName(Mt.Main),field:n.vgField(r)}])}function JF(e,t){let{op:n,field:r,order:i}=e;return x(x({op:n??(t?"sum":C4)},r?{field:rr(r)}:{}),i?{order:i}:{})}function STe(e,t){let n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t)?.bin,o=GI(r)&&r,a=J2(i)&&wf(i.extent)&&i.extent;(o||a)&&n.set("selectionExtent",o??a,!0)}function ETe(e,t,n){if(!Rt(n))return;let r=e.fieldDef(t),i=r.sort;if(Ub(i))return{op:"min",field:xs(r,t),order:"ascending"};let{stack:o}=e,a=o?new Set([...o.groupbyFields,...o.stackBy.map(s=>s.fieldDef.field)]):void 0;if(Fr(i)){let s=o&&!a.has(i.field);return JF(i,s)}else if(Bb(i)){let{encoding:s,order:c}=i,l=e.fieldDef(s),{aggregate:u,field:f}=l,d=o&&!a.has(f);if(xo(u)||t2(u))return JF({field:K(l),order:c},d);if(Mf(u)||!u)return JF({op:u,field:f,order:c},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ve(["ascending",void 0],i))return!0}}function Roe(e,t){let{aggregate:n,type:r}=e;return n?Q(n)&&!ere.has(n)?{valid:!1,reason:P.unaggregateDomainWithNonSharedDomainOp(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:P.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:P.unaggregateDomainHasNoEffectForRawField(e)}}function eR(e,t,n,r){return e.explicit&&t.explicit&&U(P.mergeConflictingDomainProperty(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function DTe(e){let t=Vi(e.map(a=>{if(ta(a)){let s=a,{sort:c}=s;return ie(s,["sort"])}return a}),be),n=Vi(e.map(a=>{if(ta(a)){let s=a.sort;return s!==void 0&&!mf(s)&&("op"in s&&s.op==="count"&&delete s.field,s.order==="ascending"&&delete s.order),s}}).filter(a=>a!==void 0),be);if(t.length===0)return;if(t.length===1){let a=e[0];if(ta(a)&&n.length>0){let s=n[0];if(n.length>1){U(P.MORE_THAN_ONE_SORT);let c=n.filter(l=>ne(l)&&"op"in l&&l.op!=="min");n.every(l=>ne(l)&&"op"in l)&&c.length===1?s=c[0]:s=!0}else if(ne(s)&&"field"in s){let c=s.field;a.field===c&&(s=s.order?{order:s.order}:!0)}return k(x({},a),{sort:s})}return a}let r=Vi(n.map(a=>mf(a)||!("op"in a)||Q(a.op)&&a.op in Kne?a:(U(P.domainSortDropped(a)),!0)),be),i;r.length===1?i=r[0]:r.length>1&&(U(P.MORE_THAN_ONE_SORT),i=!0);let o=Vi(e.map(a=>ta(a)?a.data:null),a=>a);return o.length===1&&o[0]!==null?x({data:o[0],fields:t.map(s=>s.field)},i?{sort:i}:{}):x({fields:t},i?{sort:i}:{})}function i8(e){if(ta(e)&&Q(e.field))return e.field;if(tre(e)){let t;for(let n of e.fields)if(ta(n)&&Q(n.field)){if(!t)t=n.field;else if(t!==n.field)return U(P.FACETED_INDEPENDENT_DIFFERENT_SOURCES),t}return U(P.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),t}else if(nre(e)){U(P.FACETED_INDEPENDENT_SAME_SOURCE);let t=e.fields[0];return Q(t)?t:void 0}}function H4(e,t){let r=e.component.scales[t].get("domains").map(i=>(ta(i)&&(i.data=e.lookupDataSource(i.data)),i));return DTe(r)}function nR(e){return s2(e)||n8(e)?e.children.reduce((t,n)=>t.concat(nR(n)),Ooe(e)):Ooe(e)}function Ooe(e){return R(e.component.scales).reduce((t,n)=>{let r=e.component.scales[n];if(r.merged)return t;let i=r.combine(),m=i,{name:o,type:a,selectionExtent:s,domains:c,range:l,reverse:u}=m,f=ie(m,["name","type","selectionExtent","domains","range","reverse"]),d=zTe(i.range,o,n,e),p=H4(e,n),h=s?A1e(e,s,r,p):null;return t.push(x(x(k(x(x({name:o,type:a},p?{domain:p}:{}),h?{domainRaw:h}:{}),{range:d}),u!==void 0?{reverse:u}:{}),f)),t},[])}function zTe(e,t,n,r){if(bt(n)){if(Ii(e))return{step:{signal:`${t}_step`}}}else if(ne(e)&&ta(e))return k(x({},e),{data:r.lookupDataSource(e.data)});return e}var Th=class extends Oi{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:as(this.get("domains"),t=>F(t)&&t.length===2&&Pe(t[0])&&t[0]<=0&&Pe(t[1])&&t[1]>=0)}};var HTe=["range","scheme"];function Uoe(e){let t=e.component.scales;for(let n of y4){let r=t[n];if(!r)continue;let i=LTe(n,e);r.setWithExplicit("range",i)}}function Poe(e,t){let n=e.fieldDef(t);if(n?.bin){let{bin:r,field:i}=n,o=Sn(t),a=e.getName(o);if(ne(r)&&r.binned&&r.step!==void 0)return new qn(()=>{let s=e.scaleName(t),c=`(domain("${s}")[1] - domain("${s}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${c})`});if(rt(r)){let s=r8(e,i,r);return new qn(()=>{let c=e.getSignalName(s),l=`(${c}.stop - ${c}.start) / ${c}.step`;return`${e.getSignalName(a)} / (${l})`})}}}function LTe(e,t){let n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(let f of HTe)if(n[f]!==void 0){let d=sh(o,f),p=Tb(e,f);if(!d)U(P.scalePropertyNotWorkWithScaleType(o,f,e));else if(p)U(p);else switch(f){case"range":{let h=n.range;if(F(h)){if(bt(e))return o2(h.map(m=>{if(m==="width"||m==="height"){let g=t.getName(m),v=t.getSignalName.bind(t);return qn.fromName(v,g)}return m}))}else if(ne(h))return o2({data:t.requestDataName(Mt.Main),field:h.field,sort:{op:"min",field:t.vgField(e)}});return o2(h)}case"scheme":return o2(ATe(n[f]))}}let a=e===Ct||e==="xOffset"?"width":"height",s=r[a];if(j1(s)){if(bt(e))if(Rt(o)){let f=qoe(s,t,e);if(f)return o2({step:f})}else U(P.stepDropped(a));else if(Ac(e)){let f=e===Jo?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){let h=Goe(s,o);if(h)return o2(h)}}}let{rangeMin:c,rangeMax:l}=n,u=VTe(e,t);return(c!==void 0||l!==void 0)&&sh(o,"rangeMin")&&F(u)&&u.length===2?o2([c??u[0],l??u[1]]):Pi(u)}function ATe(e){return _re(e)?x({scheme:e.name},Fn(e,["name"])):{scheme:e}}function joe(e,t,n,{center:r}={}){let i=Sn(e),o=t.getName(i),a=t.getSignalName.bind(t);return e===on&&On(n)?r?[qn.fromName(s=>`${a(s)}/2`,o),qn.fromName(s=>`-${a(s)}/2`,o)]:[qn.fromName(a,o),0]:r?[qn.fromName(s=>`-${a(s)}/2`,o),qn.fromName(s=>`${a(s)}/2`,o)]:[0,qn.fromName(a,o)]}function VTe(e,t){let{size:n,config:r,mark:i,encoding:o}=t,{type:a}=kt(o[e]),c=t.getScaleComponent(e).get("type"),{domain:l,domainMid:u}=t.specifiedScales[e];switch(e){case Ct:case on:{if(Ve(["point","band"],c)){let f=Woe(e,n,r.view);if(j1(f))return{step:qoe(f,t,e)}}return joe(e,t,c)}case Jo:case ss:return NTe(e,t,c);case $1:{let f=t.component.scales[e].get("zero"),d=Yoe(i,f,r),p=TTe(i,n,t,r);return Vc(c)?kTe(d,p,_Te(c,r,l,e)):[d,p]}case ni:return[0,Math.PI*2];case Z2:return[0,360];case Ni:return[0,new qn(()=>{let f=t.getSignalName("width"),d=t.getSignalName("height");return`min(${f},${d})/2`})];case go:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case vo:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case wn:return"symbol";case Rn:case ki:case Ti:return c==="ordinal"?a==="nominal"?"category":"ordinal":u!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case f1:case ho:case mo:return[r.scale.minOpacity,r.scale.maxOpacity]}}function qoe(e,t,n){let{encoding:r}=t,i=t.getScaleComponent(n),o=bf(n),a=r[o];if(yF({step:e,offsetIsDiscrete:_e(a)&&kb(a.type)})==="offset"&&aF(r,o)){let c=t.getScaleComponent(o),u=`domain('${t.scaleName(o)}').length`;if(c.get("type")==="band"){let d=c.get("paddingInner")??c.get("padding")??0,p=c.get("paddingOuter")??c.get("padding")??0;u=`bandspace(${u}, ${d}, ${p})`}let f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${u} / (1-${are(f)})`}}else return e.step}function Goe(e,t){if(yF({step:e,offsetIsDiscrete:Rt(t)})==="offset")return{step:e.step}}function NTe(e,t,n){let r=e===Jo?"x":"y",i=t.getScaleComponent(r);if(!i)return joe(r,t,n,{center:!0});let o=i.get("type"),a=t.scaleName(r),{markDef:s,config:c}=t;if(o==="band"){let l=Woe(r,t.size,t.config.view);if(j1(l)){let u=Goe(l,n);if(u)return u}return[0,{signal:`bandwidth('${a}')`}]}else{let l=t.encoding[r];if(Y(l)&&l.timeUnit){let u=Eb(l.timeUnit,h=>`scale('${a}', ${h})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=U1({fieldDef:l,markDef:s,config:c})-.5,p=d!==0?` + ${d}`:"";if(f){let h=ae(f)?`${f.signal}/2`+p:`${f/2+d}`,m=ae(f)?`(1 - ${f.signal}/2)`+p:`${1-f/2+d}`;return[{signal:`${h} * (${u})`},{signal:`${m} * (${u})`}]}return[0,{signal:u}]}return yI(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function Woe(e,t,n){let r=e===Ct?"width":"height",i=t[r];return i||Pf(n,r)}function _Te(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&F(n)?n.length+1:(U(P.domainRequiredForThresholdScale(r)),3)}}function kTe(e,t,n){let r=()=>{let i=d1(t),o=d1(e),a=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${a}, ${a})`};return ae(t)?new qn(r):{signal:r()}}function Yoe(e,t,n){if(t)return ae(t)?{signal:`${t.signal} ? 0 : ${Yoe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(P.incompatibleChannel("size",e))}var $oe=.95;function TTe(e,t,n,r){let i={x:Poe(n,"x"),y:Poe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;let o=Boe(t,i,r.view);return Pe(o)?o-1:new qn(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;let o=Boe(t,i,r.view);return Pe(o)?Math.pow($oe*o,2):new qn(()=>`pow(${$oe} * ${o.signal}, 2)`)}}throw new Error(P.incompatibleChannel("size",e))}function Boe(e,t,n){let r=j1(e.width)?e.width.step:D0(n,"width"),i=j1(e.height)?e.height.step:D0(n,"height");return t.x||t.y?new qn(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function rR(e,t){wt(e)?ITe(e,t):Qoe(e,t)}function ITe(e,t){let n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(let s of R(n)){let c=a[s],l=n[s],u=e.getScaleComponent(s),f=kt(i[s]),d=c[t],p=u.get("type"),h=u.get("padding"),m=u.get("paddingInner"),g=sh(p,t),v=Tb(s,t);if(d!==void 0&&(g?v&&U(v):U(P.scalePropertyNotWorkWithScaleType(p,t,s))),g&&v===void 0)if(d!==void 0){let y=f.timeUnit,C=f.type;switch(t){case"domainMax":case"domainMin":n2(c[t])||C==="temporal"||y?l.set(t,{signal:C0(c[t],{type:C,timeUnit:y})},!0):l.set(t,c[t],!0);break;default:l.copyKeyFromObject(t,c)}}else{let y=t in Xoe?Xoe[t]({model:e,channel:s,fieldOrDatumDef:f,scaleType:p,scalePadding:h,scalePaddingInner:m,domain:c.domain,domainMin:c.domainMin,domainMax:c.domainMax,markDef:o,config:r,hasNestedOffsetScale:Zb(i,s),hasSecondaryRangeChannel:!!i[_r(s)]}):r.scale[t];y!==void 0&&l.set(t,y,!1)}}}var Xoe={bins:({model:e,fieldOrDatumDef:t})=>Y(t)?FTe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>RTe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>OTe(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>PTe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>$Te(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>BTe(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{let i=Y(e)?e.sort:void 0;return UTe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:a})=>jTe(e,t,n,r,i,o.scale,a)};function iR(e){wt(e)?Uoe(e):Qoe(e,"range")}function Qoe(e,t){let n=e.component.scales;for(let r of e.children)t==="range"?iR(r):rR(r,t);for(let r of R(n)){let i;for(let o of e.children){let a=o.component.scales[r];if(a){let s=a.getWithExplicit(t);i=q1(i,s,t,"scale",bM((c,l)=>{switch(t){case"range":return c.step&&l.step?c.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function FTe(e,t){let n=t.bin;if(rt(n)){let r=r8(e,t.field,n);return new qn(()=>e.getSignalName(r))}else if(an(n)&&J2(n)&&n.step!==void 0)return{step:n.step}}function RTe(e,t){if(Ve([Rn,ki,Ti],e)&&t!=="nominal")return"hcl"}function OTe(e,t,n,r,i,o){if(!(si(o)?.bin||F(n)||i!=null||r!=null||Ve([Ir.TIME,Ir.UTC],e)))return bt(t)?!0:void 0}function PTe(e,t,n,r,i,o){if(bt(e)){if(B1(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;let{type:a,orient:s}=i;if(a==="bar"&&!(Y(r)&&(r.bin||r.timeUnit))&&(s==="vertical"&&e==="x"||s==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Ir.POINT)return n.pointPadding}}function $Te(e,t,n,r,i,o=!1){if(e===void 0){if(bt(t)){let{bandPaddingInner:a,barBandPaddingInner:s,rectBandPaddingInner:c,bandWithNestedOffsetPaddingInner:l}=i;return o?l:ct(a,n==="bar"?s:c)}else if(Ac(t)&&r===Ir.BAND)return i.offsetBandPaddingInner}}function BTe(e,t,n,r,i,o=!1){if(e===void 0){if(bt(t)){let{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:s}=i;if(o)return s;if(n===Ir.BAND)return ct(a,ae(r)?{signal:`${r.signal}/2`}:r/2)}else if(Ac(t)){if(n===Ir.POINT)return .5;if(n===Ir.BAND)return i.offsetBandPaddingOuter}}}function UTe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return On(e)&&t==="descending"?ae(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(On(e)&&t==="descending")return!0}function jTe(e,t,n,r,i,o,a){if(!!n&&n!=="unaggregated"&&On(i)){if(F(n)){let c=n[0],l=n[n.length-1];if(Pe(c)&&c<=0&&Pe(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Vc(i))return!0;if(!(Y(t)&&t.bin)&&Ve([...yr,...Une],e)){let{orient:c,type:l}=r;return Ve(["bar","area","line","trail"],l)&&(c==="horizontal"&&e==="y"||c==="vertical"&&e==="x")?!1:Ve(["bar","area"],l)&&!a?!0:o?.zero}return!1}function Koe(e,t,n,r,i=!1){let o=qTe(t,n,r,i),{type:a}=e;return kr(t)?a!==void 0?Ore(t,a)?Y(n)&&!Rre(a,n.type)?(U(P.scaleTypeNotWorkWithFieldDef(a,o)),o):a:(U(P.scaleTypeNotWorkWithChannel(t,a,o)),o):o:null}function qTe(e,t,n,r){switch(t.type){case"nominal":case"ordinal":{if(Lc(e)||gb(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&U(P.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(bt(e)||Ac(e)){if(Ve(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in mb)return"band";let i=n[Sn(e)];return us(i)||kc(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return Lc(e)?"time":gb(e)==="discrete"?(U(P.discreteChannelCannotEncode(e,"temporal")),"ordinal"):Y(t)&&t.timeUnit&&sn(t.timeUnit).utc?"utc":"time";case"quantitative":return Lc(e)?Y(t)&&rt(t.bin)?"bin-ordinal":"linear":gb(e)==="discrete"?(U(P.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(P.invalidFieldType(t.type))}function Zoe(e,{ignoreRange:t}={}){Joe(e),tR(e);for(let n of Fre)rR(e,n);t||iR(e)}function Joe(e){wt(e)?e.component.scales=GTe(e):e.component.scales=YTe(e)}function GTe(e){let{encoding:t,mark:n,markDef:r}=e,i={};for(let o of y4){let a=kt(t[o]);if(a&&n===Fb&&o===wn&&a.type===ia)continue;let s=a&&a.scale;if(a&&s!==null&&s!==!1){s??(s={});let c=Zb(t,o),l=Koe(s,o,a,r,c);i[o]=new Th(e.scaleName(`${o}`,!0),{value:l,explicit:s.type===l})}}return i}var WTe=bM((e,t)=>jI(e)-jI(t));function YTe(e){var t;let n=e.component.scales={},r={},i=e.component.resolve;for(let o of e.children){Joe(o);for(let a of R(o.component.scales))if((t=i.scale)[a]??(t[a]=PM(a,e)),i.scale[a]==="shared"){let s=r[a],c=o.component.scales[a].getWithExplicit("type");s?Hre(s.value,c.value)?r[a]=q1(s,c,"type","scale",WTe):(i.scale[a]="independent",delete r[a]):r[a]=c}}for(let o of R(r)){let a=e.scaleName(o,!0),s=r[o];n[o]=new Th(a,s);for(let c of e.children){let l=c.component.scales[o];l&&(c.renameScale(l.get("name"),a),l.merged=!0)}}return n}var Ih=class{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}};function wt(e){return e?.type==="unit"}function Rr(e){return e?.type==="facet"}function n8(e){return e?.type==="concat"}function s2(e){return e?.type==="layer"}var N0=class{constructor(t,n,r,i,o,a,s){this.type=n,this.parent=r,this.config=o,this.correctDataNames=c=>(c.from?.data&&(c.from.data=this.lookupDataSource(c.from.data)),c.from?.facet?.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c),this.parent=r,this.config=o,this.view=ir(s),this.name=t.name??i,this.title=ea(t.title)?{text:t.title}:t.title?ir(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Ih,this.projectionNameMap=r?r.projectionNameMap:new Ih,this.signalNameMap=r?r.signalNameMap:new Ih,this.data=t.data,this.description=t.description,this.transforms=y1e(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Iie(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:Ic(t)||r?.component.data.isFaceted&&t.data===void 0},layoutSize:new Oi,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:x({scale:{},axis:{},legend:{}},a?le(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Zoe(this)}parseProjection(){QF(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){YF(this)}assembleEncodeFromView(t){let o=t,{style:n}=o,r=ie(o,["style"]),i={};for(let a of R(r)){let s=r[a];s!==void 0&&(i[a]=it(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=it(this.description)),this.type==="unit"||this.type==="layer")?x({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n??{}):Qe(n)?void 0:n}assembleLayout(){if(!this.layout)return;let a=this.layout,{spacing:t}=a,n=ie(a,["spacing"]),{component:r,config:i}=this,o=goe(r.layoutHeaders,i);return x(x(x({padding:t},this.assembleDefaultLayout()),n),o?{titleBand:o}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){let{layoutHeaders:t}=this.component,n=[];for(let r of Nr)t[r].title&&n.push(doe(this,r));for(let r of Zf)n=n.concat(moe(this,r));return n}assembleAxes(){return soe(this.component.axes,this.config)}assembleLegends(){return UM(this)}assembleProjections(){return Eoe(this)}assembleTitle(){let i=this.title??{},{encoding:t}=i,n=ie(i,["encoding"]),r=x(x(x({},xb(this.config.title).nonMarkTitleProperties),n),t?{encode:{update:t}}:{});if(r.text)return Ve(["unit","layer"],this.type)?Ve(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Qe(r)?void 0:r}assembleGroup(t=[]){let n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);let r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());let i=!this.parent||Rr(this.parent)?nR(this):[];i.length>0&&(n.scales=i);let o=this.assembleAxes();o.length>0&&(n.axes=o);let a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return pt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Mt[t].toLowerCase())}requestDataName(t){let n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Rr(this.parent)){let n=RM(t),r=v4(n),i=this.component.scales[r];if(i&&!i.merged){let o=i.get("type"),a=i.get("range");if(Rt(o)&&Ii(a)){let s=i.get("name"),c=H4(this,r),l=i8(c);if(l){let u=K({aggregate:"distinct",field:l},{expr:"datum"});return{signal:jF(s,i,u)}}else return U(P.unknownField(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){let n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(pb(t)&&kr(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");let n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(P.selectionNotFound(n));return r}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}},s8=class extends N0{vgField(t,n={}){let r=this.fieldDef(t);if(r)return K(r,n)}reduceFieldDef(t,n){return yie(this.getMapping(),(r,i,o)=>{let a=si(i);return a?t(r,a,o):r},n)}forEachFieldDef(t,n){vh(this.getMapping(),(r,i)=>{let o=si(r);o&&t(o,i)},n)}};var c8=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${be(this.transform)}`}assemble(){let i=this.transform,{density:t}=i,n=ie(i,["density"]),r=x({type:"kde",field:t},n);return this.transform.groupby&&(r.resolve="shared"),r}};var l8=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${be(this.transform)}`}assemble(){let{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}};var u8=class e extends Le{clone(){return new e(null,x({},this.filter))}constructor(t,n){super(t),this.filter=n}static make(t,n){let{config:r,mark:i,markDef:o}=n;if(je("invalid",o,r)!=="filter")return null;let s=n.reduceFieldDef((c,l,u)=>{let f=kr(u)&&n.getScaleComponent(u);if(f){let d=f.get("type");On(d)&&l.aggregate!=="count"&&!Fi(i)&&(c[l.field]=l)}return c},{});return R(s).length?new e(t,s):null}dependentFields(){return new Set(R(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${be(this.filter)}`}assemble(){let t=R(this.filter).reduce((n,r)=>{let i=this.filter[r],o=K(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):i.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}};var f8=class e extends Le{clone(){return new e(this.parent,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,a)=>i[a]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${be(this.transform)}`}assemble(){let{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}};var d8=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${be(this.transform)}`}assemble(){let{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}};var p8=class e extends Le{clone(){return new e(null,le(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(let i of[[ii,ri],[oi,_i]]){let o=i.map(a=>{let s=kt(n.encoding[a]);return Y(s)?s.field:Ri(s)?{expr:`${s.datum}`}:or(s)?{expr:`${s.value}`}:void 0});(o[0]||o[1])&&(t=new e(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(wn)){let i=n.typedFieldDef(wn);i.type===ia&&(t=new e(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){let t=(this.fields??[]).filter(Q);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${be(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],k(x(x({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}};var h8=class e extends Le{clone(){return new e(null,this.projection,le(this.fields),le(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(let r of[[ii,ri],[oi,_i]]){let i=r.map(a=>{let s=kt(n.encoding[a]);return Y(s)?s.field:Ri(s)?{expr:`${s.datum}`}:or(s)?{expr:`${s.value}`}:void 0}),o=r[0]===oi?"2":"";(i[0]||i[1])&&(t=new e(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Q))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${be(this.fields)} ${be(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}};var _0=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){let{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new e(t,n)}static makeFromEncoding(t,n){let r=n.encoding,i=r.x,o=r.y;if(Y(i)&&Y(o)){let a=i.impute?i:o.impute?o:void 0;if(a===void 0)return;let s=i.impute?o:o.impute?i:void 0,{method:c,value:l,frame:u,keyvals:f}=a.impute,d=eM(n.mark,r);return new e(t,x(x(x(x(x({impute:a.field,key:s.field},c?{method:c}:{}),l!==void 0?{value:l}:{}),u?{frame:u}:{}),f!==void 0?{keyvals:f}:{}),d.length?{groupby:d}:{}))}return null}hash(){return`Impute ${be(this.transform)}`}assemble(){let{impute:t,key:n,keyvals:r,method:i,groupby:o,value:a,frame:s=[null,null]}=this.transform,c=k(x(k(x({type:"impute",field:t,key:n},r?{keyvals:Jie(r)?this.processSequence(r):r}:{}),{method:"value"}),o?{groupby:o}:{}),{value:!i||i==="value"?a:null});if(i&&i!=="value"){let l=x({type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:s,ignorePeers:!1},o?{groupby:o}:{}),u={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[c,l,u]}else return[c]}};var m8=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${be(this.transform)}`}assemble(){let o=this.transform,{loess:t,on:n}=o,r=ie(o,["loess","on"]);return x({type:"loess",x:n,y:t},r)}};var g8=class e extends Le{clone(){return new e(null,le(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){let o=n.component.data.sources,{from:a}=r,s=null;if(e1e(a)){let c=oR(a.data,o);c||(c=new Y1(a.data),o.push(c));let l=n.getName(`lookup_${i}`);s=new Dn(c,l,Mt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=s}else if(t1e(a)){let c=a.param;r=x({as:c},r);let l;try{l=n.getSelectionComponent(pt(c),c)}catch{throw new Error(P.cannotLookupVariableParameter(c))}if(s=l.materialized,!s)throw new Error(P.noSameUnitLookup(c))}return new e(t,r,s.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?te(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${be({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=x({values:this.transform.from.fields},this.transform.as?{as:te(this.transform.as)}:{});else{let n=this.transform.as;Q(n)||(U(P.NO_FIELDS_NEEDS_AS),n="_lookup"),t={as:[n]}}return x(x({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}};var v8=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${be(this.transform)}`}assemble(){let i=this.transform,{quantile:t}=i,n=ie(i,["quantile"]);return x({type:"quantile",field:t},n)}};var y8=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${be(this.transform)}`}assemble(){let o=this.transform,{regression:t,on:n}=o,r=ie(o,["regression","on"]);return x({type:"regression",x:n,y:t},r)}};var x8=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Vi((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${be(this.transform)}`}assemble(){let{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return x(x(x({type:"pivot",field:t,value:n},i!==void 0?{limit:i}:{}),o!==void 0?{op:o}:{}),r!==void 0?{groupby:r}:{})}};var C8=class e extends Le{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${be(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}};function e2e(e){let t=0;function n(r,i){if(r instanceof Y1&&!r.isGenerator&&!Pc(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Or&&(r.parent instanceof Y1&&!i.source?(i.format=k(x({},i.format??{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof l2){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof L4||r instanceof A4||r instanceof u8||r instanceof ys||r instanceof V0||r instanceof h8||r instanceof wo||r instanceof g8||r instanceof Gc||r instanceof fa||r instanceof d8||r instanceof f8||r instanceof c8||r instanceof m8||r instanceof v8||r instanceof y8||r instanceof ua||r instanceof C8||r instanceof x8||r instanceof l8)&&i.transform.push(r.assemble()),(r instanceof la||r instanceof a2||r instanceof _0||r instanceof bs||r instanceof p8)&&i.transform.push(...r.assemble()),r instanceof Dn&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Dn?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Dn&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(let a of r.children)n(a,{name:null,source:o,transform:[]});break}}}return n}function t2e(e){let t=[],n=e2e(t);for(let r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function n2e(e,t){let n=[],r=e2e(n),i=0;for(let a of e.sources){a.hasName()||(a.dataName=`source_${i++}`);let s=a.assemble();r(a,s)}for(let a of n)a.transform.length===0&&delete a.transform;let o=0;for(let[a,s]of n.entries())(s.transform??[]).length===0&&!s.source&&n.splice(o++,0,n.splice(a,1)[0]);for(let a of n)for(let s of a.transform??[])s.type==="lookup"&&(s.from=e.outputNodes[s.from].getSource());for(let a of n)a.name in t&&(a.values=t[a.name]);return n}function XTe(e){return e==="top"||e==="left"||ae(e)?"header":"footer"}function i2e(e){for(let t of Nr)QTe(e,t);r2e(e,"x"),r2e(e,"y")}function QTe(e,t){let{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){let a=n[t],s=qc("title",null,r,t),c=ms(a,r,{allowDisabling:!0,includeDefault:s===void 0||!!s});i.component.layoutHeaders[t].title&&(c=F(c)?c.join(", "):c,c+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);let l=qc("labelOrient",a.header,r,t),u=a.header!==null?ct(a.header?.labels,r.header.labels,!0):!1,f=Ve(["bottom","right"],l)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?c:null,facetFieldDef:a,[f]:t==="facet"?[]:[o2e(e,t,u)]}}}function o2e(e,t,n){let r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function r2e(e,t){let{child:n}=e;if(n.component.axes[t]){let{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=t8(i,t),i.axis[t]==="shared"){let o=t==="x"?"column":"row",a=r[o];for(let s of n.component.axes[t]){let c=XTe(s.get("orient"));a[c]??(a[c]=[o2e(e,o,!1)]);let l=Qf(s,"main",e.config,{header:!0});l&&a[c][0].axes.push(l),s.mainExtracted=!0}}}}function a2e(e){ow(e),iw(e,"width"),iw(e,"height")}function s2e(e){ow(e);let t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";iw(e,t),iw(e,n)}function ow(e){for(let t of e.children)t.parseLayoutSize()}function iw(e,t){let n=RM(t),r=v4(n),i=e.component.resolve,o=e.component.layoutSize,a;for(let s of e.children){let c=s.component.layoutSize.getWithExplicit(n),l=i.scale[r]??PM(r,e);if(l==="independent"&&c.value==="step"){a=void 0;break}if(a){if(l==="independent"&&a.value!==c.value){a=void 0;break}a=q1(a,c,n,"")}else a=c}if(a){for(let s of e.children)e.renameSignal(s.getName(n),e.getName(t)),s.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function c2e(e){let{size:t,component:n}=e;for(let r of yr){let i=Sn(r);if(t[i]){let o=t[i];n.layoutSize.set(i,j1(o)?"step":o,!0)}else{let o=KTe(e,i);n.layoutSize.set(i,o,!1)}}}function KTe(e,t){let n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){let o=i.get("type"),a=i.get("range");if(Rt(o)){let s=Pf(r.view,t);return Ii(a)||j1(s)?"step":s}else return Mh(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return Mh(r.view,t);{let o=Pf(r.view,t);return j1(o)?o.step:o}}}function aw(e,t,n){return K(t,x({suffix:`by_${K(e)}`},n??{}))}var sw=class e extends s8{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=b8(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!hs(t))return{facet:this.initFacetFieldDef(t,"facet")};let n=R(t),r={};for(let i of n){if(![R1,O1].includes(i)){U(P.incompatibleChannel(i,"facet"));break}let o=t[i];if(o.field===void 0){U(P.emptyFieldDef(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){let r=gh(t,n);return r.header?r.header=ir(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=N4(this),this.child.parseData()}parseLayoutSize(){ow(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),i2e(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){let t={};for(let n of Nr)for(let r of Jf){let i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:a}=i;if(a){let s=qc("titleOrient",a.header,this.config,n);if(["right","bottom"].includes(s)){let c=Kf(n,s);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[c]="end"}}if(o?.[0]){let s=n==="row"?"height":"width",c=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(s)&&(t[c]??(t[c]={}),t[c][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){let{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0,i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),k(x(x({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof e))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof e?x(x({},this.channelHasField("column")?{encode:{update:{columns:{field:K(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){let t=[],n=[],r=[];if(this.child instanceof e){if(this.child.channelHasField("column")){let i=K(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(let i of yr){let o=this.child.component.scales[i];if(o&&!o.merged){let a=o.get("type"),s=o.get("range");if(Rt(a)&&Ii(s)){let c=H4(this.child,i),l=i8(c);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):U(P.unknownField(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){let{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:a,as:s}=this.getCardinalityAggregateForChild(),c=[];for(let u of Nr){let f=this.facet[u];if(f){c.push(K(f));let{bin:d,sort:p}=f;if(rt(d)&&c.push(K(f,{binSuffix:"end"})),Fr(p)){let{field:h,op:m=C4}=p,g=aw(f,p);r&&i?(o.push(g),a.push("max"),s.push(g)):(o.push(h),a.push(m),s.push(g))}else if(F(p)){let h=xs(f,u);o.push(h),a.push("max"),s.push(h)}}}let l=!!r&&!!i;return x({name:t,data:n,groupby:c},l||o.length>0?{aggregate:x(x({},l?{cross:l}:{}),o.length?{fields:o,ops:a,as:s}:{})}:{})}facetSortFields(t){let{facet:n}=this,r=n[t];return r?Fr(r.sort)?[aw(r,r.sort,{expr:"datum"})]:F(r.sort)?[xs(r,t,{expr:"datum"})]:[K(r,{expr:"datum"})]:[]}facetSortOrder(t){let{facet:n}=this,r=n[t];if(r){let{sort:i}=r;return[(Fr(i)?i.order:!F(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){let{facet:t,config:n}=this;if(t.facet)return IM(t.facet,"facet",n);let r={row:["top","bottom"],column:["left","right"]};for(let i of Zf)if(t[i]){let o=qc("labelOrient",t[i]?.header,n,i);if(r[i].includes(o))return IM(t[i],i,n)}}assembleMarks(){let{child:t}=this,n=this.component.data.facetRoot,r=t2e(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[x(x(x(k(x(x({name:this.getName("cell"),type:"group"},o?{title:o}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:Nr.map(c=>this.facetSortFields(c)).flat(),order:Nr.map(c=>this.facetSortOrder(c)).flat()}}),r.length>0?{data:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup(D1e(this,[])))]}getMapping(){return this.facet}};function l2e(e,t){let{row:n,column:r}=t;if(n&&r){let i=null;for(let o of[n,r])if(Fr(o.sort)){let{field:a,op:s=C4}=o.sort;e=i=new fa(e,{joinaggregate:[{op:s,field:a,as:aw(o,o.sort,{forAs:!0})}],groupby:[K(o)]})}return i}return null}function oR(e,t){for(let n of t){let r=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;let i=e.format?.mesh,o=r.format?.feature;if(i&&o)continue;let a=e.format?.feature;if((a||o)&&a!==o)continue;let s=r.format?.mesh;if(!((i||s)&&i!==s)){if(z0(e)&&z0(r)){if(Vr(e.values,r.values))return n}else if(Pc(e)&&Pc(r)){if(e.url===r.url)return n}else if(wM(e)&&e.name===n.dataName)return n}}return null}function ZTe(e,t){if(e.data||!e.parent){if(e.data===null){let r=new Y1({values:[]});return t.push(r),r}let n=oR(e.data,t);if(n)return aa(e.data)||(n.data.format=xI({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{let r=new Y1(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function JTe(e,t,n){let r=0;for(let i of t.transforms){let o,a;if(f1e(i))a=e=new V0(e,i),o="derived";else if(wh(i)){let s=Voe(i);a=e=Or.makeWithAncestors(e,{},s,n)??e,e=new ys(e,t,i.filter)}else if(yM(i))a=e=la.makeFromTransform(e,i,t),o="number";else if(p1e(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new Or(e,{[i.field]:o}),n.set(i.field,o,!1)),a=e=a2.makeFromTransform(e,i);else if(h1e(i))a=e=wo.makeFromTransform(e,i),o="number",Lh(t)&&(e=new ua(e));else if(vM(i))a=e=g8.make(e,t,i,r++),o="derived";else if(c1e(i))a=e=new Gc(e,i),o="number";else if(l1e(i))a=e=new fa(e,i),o="number";else if(m1e(i))a=e=bs.makeFromTransform(e,i),o="derived";else if(g1e(i))a=e=new d8(e,i),o="derived";else if(v1e(i))a=e=new l8(e,i),o="derived";else if(u1e(i))a=e=new f8(e,i),o="derived";else if(n1e(i))a=e=new x8(e,i),o="derived";else if(s1e(i))e=new C8(e,i);else if(d1e(i))a=e=_0.makeFromTransform(e,i),o="derived";else if(r1e(i))a=e=new c8(e,i),o="derived";else if(i1e(i))a=e=new v8(e,i),o="derived";else if(o1e(i))a=e=new y8(e,i),o="derived";else if(a1e(i))a=e=new m8(e,i),o="derived";else{U(P.invalidTransformIgnored(i));continue}if(a&&o!==void 0)for(let s of a.producedFields()??[])n.set(s,o,!1)}return e}function N4(e){let t=ZTe(e,e.component.data.sources),{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,a=!(i&&(aa(i)||Pc(i)||z0(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new MM;aa(i)?(DF(i)?t=new A4(t,i.sequence):Sh(i)&&(t=new L4(t,i.graticule)),a.parseNothing=!0):i?.format?.parse===null&&(a.parseNothing=!0),t=Or.makeExplicit(t,e,a)??t,t=new ua(t);let s=e.parent&&s2(e.parent);(wt(e)||Rr(e))&&s&&(t=la.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=JTe(t,e,a));let c=_oe(e),l=Noe(e);t=Or.makeWithAncestors(t,{},x(x({},c),l),a)??t,wt(e)&&(t=p8.parseAll(t,e),t=h8.parseAll(t,e)),(wt(e)||Rr(e))&&(s||(t=la.makeFromEncoding(t,e)??t),t=a2.makeFromEncoding(t,e)??t,t=V0.parseAllForSortIndex(t,e));let u=e.getDataName(Mt.Raw),f=new Dn(t,u,Mt.Raw,r);if(n[u]=f,t=f,wt(e)){let m=wo.makeFromEncoding(t,e);m&&(t=m,Lh(e)&&(t=new ua(t))),t=_0.makeFromEncoding(t,e)??t,t=bs.makeFromEncoding(t,e)??t}wt(e)&&(t=u8.make(t,e)??t);let d=e.getDataName(Mt.Main),p=new Dn(t,d,Mt.Main,r);n[d]=p,t=p,wt(e)&&aoe(e,p);let h=null;if(Rr(e)){let m=e.getName("facet");t=l2e(t,e.facet)??t,h=new l2(t,e,m,p.getSource()),n[m]=h}return k(x({},e.component.data),{outputNodes:n,outputNodeRefCounts:r,raw:f,main:p,facetRoot:h,ancestorParse:a})}var cw=class extends N0{constructor(t,n,r,i){super(t,"concat",n,r,i,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&U(P.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(t).map((o,a)=>b8(o,this,this.getName(`concat_${a}`),void 0,i))}parseData(){this.component.data=N4(this);for(let t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(let t of this.children){t.parseSelections();for(let n of R(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(let t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(let t of this.children)t.parseAxesAndHeaders()}getChildren(t){return S4(t)?t.vconcat:Of(t)?t.hconcat:t.concat}parseLayoutSize(){s2e(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){let t=e8(this);for(let n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{let n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return x(x(x(x({type:"group",name:t.getName("group")},n?{title:n}:{}),r?{style:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){let t=this.layout.columns;return k(x({},t!=null?{columns:t}:{}),{bounds:"full",align:"each"})}};function eIe(e){return e===!1||e===null}var tIe=k(x({disable:1,gridScale:1,scale:1},rF),{labelExpr:1,encode:1}),aR=R(tIe),lw=class e extends Oi{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new e(le(this.explicit),le(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!eIe(this.get(t))}hasOrientSignalRef(){return ae(this.explicit.orient)}};function u2e(e,t,n){let{encoding:r,config:i}=e,o=kt(r[t])??kt(r[_r(t)]),a=e.axis(t)||{},{format:s,formatType:c}=a;if(ps(c))return x({text:bo({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:c,config:i})},n);if(s===void 0&&c===void 0&&i.customFormatTypes){if(_c(o)==="quantitative"){if(kc(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return x({text:bo({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i})},n);if(i.numberFormatType)return x({text:bo({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i})},n)}if(_c(o)==="temporal"&&i.timeFormatType&&Y(o)&&!o.timeUnit)return x({text:bo({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i})},n)}return n}function f2e(e){return yr.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[cIe(n,e)]),t),{})}var rIe={bottom:"top",top:"bottom",left:"right",right:"left"};function d2e(e){let{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(let i of e.children){i.parseAxesAndHeaders();for(let o of R(i.component.axes))n.axis[o]=t8(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=iIe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(let i of yr){for(let o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(let a of o.component.axes[i]){let{value:s,explicit:c}=a.getWithExplicit("orient");if(!ae(s)){if(r[s]>0&&!c){let l=rIe[s];r[s]>r[l]&&a.set("orient",l,!1)}r[s]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(let[o,a]of(t[i]||[]).entries())o>0&&a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function iIe(e,t){if(e){if(e.length!==t.length)return;let n=e.length;for(let r=0;r<n;r++){let i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){let a=i.getWithExplicit("orient"),s=o.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;e[r]=oIe(i,o)}}}else return t.map(n=>n.clone());return e}function oIe(e,t){for(let n of aR){let r=q1(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return wb(i,o);case"gridScale":return{explicit:i.explicit,value:ct(i.value,o.value)}}return Uf(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function aIe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(ae(n.labelAngle)?n.labelAngle:m4(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===UF(r,i))return!0}return e===n[t]}var sIe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function cIe(e,t){let n=t.axis(e),r=new lw,i=kt(t.encoding[e]),{mark:o,config:a}=t,s=n?.orient||a[e==="x"?"axisX":"axisY"]?.orient||a.axis?.orient||foe(e),c=t.getScaleComponent(e).get("type"),l=loe(e,c,s,t.config),u=n!==void 0?!n:Ah("disable",a.style,n?.style,l).configValue;if(r.set("disable",u,n!==void 0),u)return r;n=n||{};let f=uoe(i,n,e,a.style,l),d=$b(n.formatType,i,c),p=Pb(i,i.type,n.format,n.formatType,a,!0),h={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:c,orient:s,labelAngle:f,format:p,formatType:d,mark:o,config:a};for(let v of aR){let y=v in PF?PF[v](h):iF(v)?n[v]:void 0,C=y!==void 0,b=aIe(y,v,n,t,e);if(C&&b)r.set(v,y,b);else{let{configValue:M=void 0,configFrom:S=void 0}=iF(v)&&v!=="values"?Ah(v,a.style,n.style,l):{},w=M!==void 0;C&&!w?r.set(v,y,b):(S!=="vgAxisConfig"||sIe.has(v)&&w||Fc(M)||ae(M))&&r.set(v,M,!1)}}let m=n.encoding??{},g=Kb.reduce((v,y)=>{if(!r.hasAxisPart(y))return v;let C=OM(m[y]??{},t),b=y==="labels"?u2e(t,e,C):C;return b!==void 0&&!Qe(b)&&(v[y]={update:b}),v},{});return Qe(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function p2e({encoding:e,size:t}){for(let n of yr){let r=Sn(n);j1(t[r])&&oa(e[n])&&(delete t[r],U(P.stepDropped(r)))}return t}var h2e={vgMark:"arc",encodeEntry:e=>x(x(x(x(x({},Cn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),xn("x",e,{defaultPos:"mid"})),xn("y",e,{defaultPos:"mid"})),W1(e,"radius")),W1(e,"theta"))};var m2e={vgMark:"area",encodeEntry:e=>x(x(x(x({},Cn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),z4("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"})),z4("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"})),Yf(e))};var g2e={vgMark:"rect",encodeEntry:e=>x(x(x({},Cn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),W1(e,"x")),W1(e,"y"))};var v2e={vgMark:"shape",encodeEntry:e=>x({},Cn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{let{encoding:t}=e,n=t.shape;return[x({type:"geoshape",projection:e.projectionName()},n&&Y(n)&&n.type===ia?{field:K(n,{expr:"datum"})}:{})]}};var y2e={vgMark:"image",encodeEntry:e=>x(x(x(x({},Cn(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),W1(e,"x")),W1(e,"y")),D4(e,"url"))};var x2e={vgMark:"line",encodeEntry:e=>x(x(x(x(x({},Cn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),xn("x",e,{defaultPos:"mid"})),xn("y",e,{defaultPos:"mid"})),jt("size",e,{vgChannel:"strokeWidth"})),Yf(e))},C2e={vgMark:"trail",encodeEntry:e=>x(x(x(x(x({},Cn(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),xn("x",e,{defaultPos:"mid"})),xn("y",e,{defaultPos:"mid"})),jt("size",e)),Yf(e))};function sR(e,t){let{config:n}=e;return x(x(x(x(x(x({},Cn(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),xn("x",e,{defaultPos:"mid"})),xn("y",e,{defaultPos:"mid"})),jt("size",e)),jt("angle",e)),lIe(e,n,t))}function lIe(e,t,n){return n?{shape:{value:n}}:jt("shape",e)}var b2e={vgMark:"symbol",encodeEntry:e=>sR(e)},M2e={vgMark:"symbol",encodeEntry:e=>sR(e,"circle")},w2e={vgMark:"symbol",encodeEntry:e=>sR(e,"square")};var S2e={vgMark:"rect",encodeEntry:e=>x(x(x({},Cn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),W1(e,"x")),W1(e,"y"))};var E2e={vgMark:"rule",encodeEntry:e=>{let{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:x(x(x(x({},Cn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),z4("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),z4("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),jt("size",e,{vgChannel:"strokeWidth"}))}};var D2e={vgMark:"text",encodeEntry:e=>{let{config:t,encoding:n}=e;return x(x(x(x(x(x(x(x(x(x({},Cn(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),xn("x",e,{defaultPos:"mid"})),xn("y",e,{defaultPos:"mid"})),D4(e)),jt("size",e,{vgChannel:"fontSize"})),jt("angle",e)),LM("align",uIe(e.markDef,n,t))),LM("baseline",fIe(e.markDef,n,t))),xn("radius",e,{defaultPos:null})),xn("theta",e,{defaultPos:null}))}};function uIe(e,t,n){if(je("align",e,n)===void 0)return"center"}function fIe(e,t,n){if(je("baseline",e,n)===void 0)return"middle"}var z2e={vgMark:"rect",encodeEntry:e=>{let{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",o=r==="horizontal"?"height":"width";return k(x(x(x(x({},Cn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),xn("x",e,{defaultPos:"mid",vgChannel:"xc"})),xn("y",e,{defaultPos:"mid",vgChannel:"yc"})),jt("size",e,{defaultValue:dIe(e),vgChannel:i})),{[o]:it(je("thickness",n,t))})}};function dIe(e){let{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",o=e.getScaleComponent(r==="horizontal"?"x":"y"),a=je("size",n,t,{vgChannel:i})??t.tick.bandSize;if(a!==void 0)return a;{let s=o?o.get("range"):void 0;return s&&Ii(s)&&Pe(s.step)?s.step*3/4:D0(t.view,i)*3/4}}var uw={arc:h2e,area:m2e,bar:g2e,circle:M2e,geoshape:v2e,image:y2e,line:x2e,point:b2e,rect:S2e,rule:E2e,square:w2e,text:D2e,tick:z2e,trail:C2e};function A2e(e){if(Ve([w0,b0,Bre],e.mark)){let t=eM(e.mark,e.encoding);if(t.length>0)return pIe(e,t)}else if(e.mark===M0){let t=Cb.some(n=>je(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return hIe(e)}return cR(e)}var H2e="faceted_path_";function pIe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:H2e+e.requestDataName(Mt.Main),data:e.requestDataName(Mt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:cR(e,{fromPrefix:H2e})}]}var L2e="stack_group_";function hIe(e){let[t]=cR(e,{fromPrefix:L2e}),n=e.scaleName(e.stack.fieldChannel),r=(l={})=>e.vgField(e.stack.fieldChannel,l),i=(l,u)=>{let f=[r({prefix:"min",suffix:"start",expr:u}),r({prefix:"max",suffix:"start",expr:u}),r({prefix:"min",suffix:"end",expr:u}),r({prefix:"max",suffix:"end",expr:u})];return`${l}(${f.map(d=>`scale('${n}',${d})`).join(",")})`},o,a;e.stack.fieldChannel==="x"?(o=k(x({},zc(t.encode.update,["y","yc","y2","height",...Cb])),{x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}}),a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update=k(x({},Fn(t.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(o=k(x({},zc(t.encode.update,["x","xc","x2","width"])),{y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}}),a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update=k(x({},Fn(t.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(let l of Cb){let u=Co(l,e.markDef,e.config);t.encode.update[l]?(o[l]=t.encode.update[l],delete t.encode.update[l]):u&&(o[l]=it(u)),u&&(t.encode.update[l]={value:0})}let s=[];if(e.stack.groupbyChannels?.length>0)for(let l of e.stack.groupbyChannels){let u=e.fieldDef(l),f=K(u);f&&s.push(f),(u?.bin||u?.timeUnit)&&s.push(K(u,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((l,u)=>{if(t.encode.update[u])return k(x({},l),{[u]:t.encode.update[u]});{let f=Co(u,e.markDef,e.config);return f!==void 0?k(x({},l),{[u]:it(f)}):l}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Mt.Main),name:L2e+e.requestDataName(Mt.Main),groupby:s,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}function mIe(e){let{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,a=t.order;if(!(!F(a)&&or(a)&&ab(a.value)||!a&&ab(je("order",i,o)))){if((F(a)||Y(a))&&!n)return Mb(a,{expr:"datum"});if(Fi(r)){let s=i.orient==="horizontal"?"y":"x",c=t[s];if(Y(c)){let l=c.sort;if(F(l))return{field:K(c,{prefix:s,suffix:"sort_index",expr:"datum"})};if(Fr(l))return{field:K({aggregate:If(e.encoding)?l.op:void 0,field:l.field},{expr:"datum"})};if(Bb(l)){let u=e.fieldDef(l.encoding);return{field:K(u,{expr:"datum"}),order:l.order}}else return l===null?void 0:{field:K(c,{binSuffix:e.stack?.impute?"mid":void 0,expr:"datum"})}}return}}}function cR(e,t={fromPrefix:""}){let{mark:n,markDef:r,encoding:i,config:o}=e,a=ct(r.clip,gIe(e),vIe(e)),s=kI(r),c=i.key,l=mIe(e),u=yIe(e),f=je("aria",r,o),d=uw[n].postEncodingTransform?uw[n].postEncodingTransform(e):null;return[x(k(x(x(x(x(x(x({name:e.getName("marks"),type:uw[n].vgMark},a?{clip:!0}:{}),s?{style:s}:{}),c?{key:c.field}:{}),l?{sort:l}:{}),u||{}),f===!1?{aria:f}:{}),{from:{data:t.fromPrefix+e.requestDataName(Mt.Main)},encode:{update:uw[n].encodeEntry(e)}}),d?{transform:d}:{})]}function gIe(e){let t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function vIe(e){let t=e.component.projection;return t&&!t.isFit?!0:void 0}function yIe(e){if(!e.component.selection)return null;let t=R(e.component.selection).length,n=t,r=e.parent;for(;r&&n===0;)n=R(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip}:null}var M8=class extends s8{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,xF(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];let a=ai(t.mark)?x({},t.mark):{type:t.mark},s=a.type;a.filled===void 0&&(a.filled=jie(a,o,{graticule:t.data&&Sh(t.data)}));let c=this.encoding=gie(t.encoding||{},s,a.filled,o);this.markDef=dM(a,c,o),this.size=p2e({encoding:c,size:xF(t)?x(x(x({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):i}),this.stack=fM(this.markDef,c),this.specifiedScales=this.initScales(s,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegends(c),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Rf(l))}get hasProjection(){let{encoding:t}=this,n=this.mark===Fb,r=t&&_ne.some(i=>_e(t[i]));return n||r}scaleDomain(t){let n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return y4.reduce((r,i)=>{let o=kt(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){let{domain:n,range:r}=t,i=ir(t);return F(n)&&(i.domain=n.map(Tr)),F(r)&&(i.range=r.map(Tr)),i}initAxes(t){return yr.reduce((n,r)=>{let i=t[r];if(_e(i)||r===Ct&&_e(t.x2)||r===on&&_e(t.y2)){let o=_e(i)?i.axis:void 0;n[r]=o&&this.initAxis(x({},o))}return n},{})}initAxis(t){let n=R(t),r={};for(let i of n){let o=t[i];r[i]=Fc(o)?bb(o):Tr(o)}return r}initLegends(t){return qne.reduce((n,r)=>{let i=kt(t[r]);if(i&&Wne(r)){let o=i.legend;n[r]=o&&ir(o)}return n},{})}parseData(){this.component.data=N4(this)}parseLayoutSize(){c2e(this)}parseSelections(){this.component.selection=ooe(this,this.selection)}parseMarkGroup(){this.component.mark=A2e(this)}parseAxesAndHeaders(){this.component.axes=f2e(this)}assembleSelectionTopLevelSignals(t){return z1e(this,t)}assembleSignals(){return[...TM(this),...E1e(this,[])]}assembleSelectionData(t){return H1e(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return e8(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!s2(this.parent))&&(t=LF(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){let{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return vs(this.encoding,t)}fieldDef(t){let n=this.encoding[t];return si(n)}typedFieldDef(t){let n=this.fieldDef(t);return En(n)?n:null}};var fw=class e extends N0{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);let a=x(x(x({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((s,c)=>{if(Oc(s))return new e(s,this,this.getName(`layer_${c}`),a,o);if(xr(s))return new M8(s,this,this.getName(`layer_${c}`),a,o);throw new Error(P.invalidSpec(s))})}parseData(){this.component.data=N4(this);for(let t of this.children)t.parseData()}parseLayoutSize(){a2e(this)}parseSelections(){this.component.selection={};for(let t of this.children){t.parseSelections();for(let n of R(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(let t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){d2e(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),TM(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),e8(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){let t=new Set;for(let r of this.children)for(let i of te(r.assembleGroupStyle()))t.add(i);let n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(let n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return L1e(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),UM(this))}};function b8(e,t,n,r,i){if(Ic(e))return new sw(e,t,n,i);if(Oc(e))return new fw(e,t,n,r,i);if(xr(e))return new M8(e,t,n,r,i);if(vF(e))return new cw(e,t,n,i);throw new Error(P.invalidSpec(e))}function V2e(e,t={}){t.logger&&lre(t.logger),t.fieldTitle&&eF(t.fieldTitle);try{let n=uM(Fa(t.config,e.config)),r=CM(e,n),i=b8(r,null,"",void 0,n);return i.parse(),Foe(i.component.data,i),{spec:CIe(i,xIe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&ure(),t.fieldTitle&&pie()}}function xIe(e,t,n,r){let i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Q(t)&&(t={type:t}),i&&o&&w1e(t.type)){if(i==="step"&&o==="step")U(P.droppingFit()),t.type="pad";else if(i==="step"||o==="step"){let a=i==="step"?"width":"height";U(P.droppingFit(v4(a)));let s=a==="width"?"height":"width";t.type=S1e(s)}}return x(x(x({},R(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t}),EF(n,!1)),EF(e,!0))}function CIe(e,t,n={},r){let i=e.config?$ie(e.config):void 0,o=[].concat(e.assembleSelectionData([]),n2e(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),c=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0),u=e.assembleLayoutSignals();u=u.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);let p=t,{params:f}=p,d=ie(p,["params"]);return x(x(x(x(k(x(x(x(x(x({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),d),s?{title:s}:{}),c?{style:c}:{}),l?{encode:{update:l}}:{}),{data:o}),a.length>0?{projections:a}:{}),e.assembleGroup([...u,...e.assembleSelectionTopLevelSignals([]),...lM(f)])),i?{config:i}:{}),r?{usermeta:r}:{})}var bIe=wne.version;function MIe(e){let[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var uR=MIe;var gR={};Cr(gR,{carbong10:()=>xFe,carbong100:()=>bFe,carbong90:()=>CFe,carbonwhite:()=>yFe,dark:()=>BIe,excel:()=>UIe,fivethirtyeight:()=>GIe,ggplot2:()=>WIe,googlecharts:()=>oFe,latimes:()=>KIe,powerbi:()=>mFe,quartz:()=>ZIe,urbaninstitute:()=>iFe,version:()=>MFe,vox:()=>JIe});var wIe="vega-themes",SIe="2.14.0",EIe="Themes for stylized Vega and Vega-Lite visualizations.",DIe=["vega","vega-lite","themes","style"],zIe="BSD-3-Clause",HIe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},LIe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],AIe="build/vega-themes.js",VIe="build/vega-themes.module.js",NIe="build/vega-themes.min.js",_Ie="build/vega-themes.min.js",kIe="build/vega-themes.module.d.ts",TIe={type:"git",url:"https://github.com/vega/vega-themes.git"},IIe=["src","build"],FIe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},RIe={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},OIe={vega:"*","vega-lite":"*"},PIe={},$Ie={name:wIe,version:SIe,description:EIe,keywords:DIe,license:zIe,author:HIe,contributors:LIe,main:AIe,module:VIe,unpkg:NIe,jsdelivr:_Ie,types:kIe,repository:TIe,files:IIe,scripts:FIe,devDependencies:RIe,peerDependencies:OIe,dependencies:PIe},w8="#fff",N2e="#888",BIe={background:"#333",view:{stroke:N2e},title:{color:w8,subtitleColor:w8},style:{"guide-label":{fill:w8},"guide-title":{fill:w8}},axis:{domainColor:w8,gridColor:N2e,tickColor:w8}},k0="#4572a7",UIe={background:"#fff",arc:{fill:k0},area:{fill:k0},line:{stroke:k0,strokeWidth:2},path:{stroke:k0},rect:{fill:k0},shape:{stroke:k0},symbol:{fill:k0,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},T0="#30a2da",fR="#cbcbcb",jIe="#999",qIe="#333",_2e="#f0f0f0",k2e="#333",GIe={arc:{fill:T0},area:{fill:T0},axis:{domainColor:fR,grid:!0,gridColor:fR,gridWidth:1,labelColor:jIe,labelFontSize:10,titleColor:qIe,tickColor:fR,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:_2e,group:{fill:_2e},legend:{labelColor:k2e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:k2e,titleFontSize:14,titlePadding:10},line:{stroke:T0,strokeWidth:2},path:{stroke:T0,strokeWidth:.5},rect:{fill:T0},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:T0},bar:{binSpacing:2,fill:T0,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},I0="#000",WIe={group:{fill:"#e5e5e5"},arc:{fill:I0},area:{fill:I0},line:{stroke:I0},path:{stroke:I0},rect:{fill:I0},shape:{stroke:I0},symbol:{fill:I0,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},YIe=22,XIe="normal",T2e="Benton Gothic, sans-serif",I2e=11.5,QIe="normal",F0="#82c6df",dR="Benton Gothic Bold, sans-serif",F2e="normal",R2e=13,Fh={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},KIe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:dR,fontSize:YIe,fontWeight:XIe},arc:{fill:F0},area:{fill:F0},line:{stroke:F0,strokeWidth:2},path:{stroke:F0},rect:{fill:F0},shape:{stroke:F0},symbol:{fill:F0,size:30},axis:{labelFont:T2e,labelFontSize:I2e,labelFontWeight:QIe,titleFont:dR,titleFontSize:R2e,titleFontWeight:F2e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:T2e,labelFontSize:I2e,symbolType:"square",titleFont:dR,titleFontSize:R2e,titleFontWeight:F2e},range:{category:Fh["category-6"],diverging:Fh["fireandice-6"],heatmap:Fh["fire-7"],ordinal:Fh["fire-7"],ramp:Fh["fire-7"]}},R0="#ab5787",dw="#979797",ZIe={background:"#f9f9f9",arc:{fill:R0},area:{fill:R0},line:{stroke:R0},path:{stroke:R0},rect:{fill:R0},shape:{stroke:R0},symbol:{fill:R0,size:30},axis:{domainColor:dw,domainWidth:.5,gridWidth:.2,labelColor:dw,tickColor:dw,tickWidth:.2,titleColor:dw},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},O0="#3e5c69",JIe={background:"#fff",arc:{fill:O0},area:{fill:O0},line:{stroke:O0},path:{stroke:O0},rect:{fill:O0},shape:{stroke:O0},symbol:{fill:O0},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},u2="#1696d2",O2e="#000000",eFe="#FFFFFF",pw="Lato",pR="Lato",tFe="Lato",nFe="#DEDDDD",rFe=18,Rh={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},iFe={background:eFe,title:{anchor:"start",fontSize:rFe,font:pw},axisX:{domain:!0,domainColor:O2e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:pR,labelAngle:0,tickColor:O2e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:pw},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:nFe,gridWidth:1,labelFontSize:12,labelFont:pR,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:pw,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:pR,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:pw,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Rh["six-groups-cat-1"],diverging:Rh["diverging-colors"],heatmap:Rh["diverging-colors"],ordinal:Rh["six-groups-seq"],ramp:Rh["shades-blue"]},area:{fill:u2},rect:{fill:u2},line:{color:u2,stroke:u2,strokeWidth:5},trail:{color:u2,stroke:u2,strokeWidth:0,size:1},path:{stroke:u2,strokeWidth:.5},point:{filled:!0},text:{font:tFe,color:u2,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:u2,stroke:null}},arc:{fill:u2},shape:{stroke:u2},symbol:{fill:u2,size:30}},P0="#3366CC",P2e="#ccc",hw="Arial, sans-serif",oFe={arc:{fill:P0},area:{fill:P0},path:{stroke:P0},rect:{fill:P0},shape:{stroke:P0},symbol:{stroke:P0},circle:{fill:P0},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:hw,fontSize:12},"guide-title":{font:hw,fontSize:12},"group-title":{font:hw,fontSize:12}},title:{font:hw,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:P2e,tickColor:P2e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},mR=e=>e*(1/3+1),$2e=mR(9),B2e=mR(10),U2e=mR(12),Oh="Segoe UI",j2e="wf_standard-font, helvetica, arial, sans-serif",q2e="#252423",Ph="#605E5C",G2e="transparent",aFe="#C8C6C4",pa="#118DFF",sFe="#12239E",cFe="#E66C37",lFe="#6B007B",uFe="#E044A7",fFe="#744EC2",dFe="#D9B300",pFe="#D64550",X2e=pa,Q2e="#DEEFFF",W2e=[Q2e,X2e],hFe=[Q2e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",X2e],mFe={view:{stroke:G2e},background:G2e,font:Oh,header:{titleFont:j2e,titleFontSize:U2e,titleColor:q2e,labelFont:Oh,labelFontSize:B2e,labelColor:Ph},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Ph,labelFontSize:$2e,titleFont:j2e,titleColor:q2e,titleFontSize:U2e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:aFe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:pa},line:{stroke:pa,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Oh,fontSize:$2e,fill:Ph},arc:{fill:pa},area:{fill:pa,line:!0,opacity:.6},path:{stroke:pa},rect:{fill:pa},point:{fill:pa,filled:!0,size:75},shape:{stroke:pa},symbol:{fill:pa,strokeWidth:1.5,size:50},legend:{titleFont:Oh,titleFontWeight:"bold",titleColor:Ph,labelFont:Oh,labelFontSize:B2e,labelColor:Ph,symbolType:"circle",symbolSize:75},range:{category:[pa,sFe,cFe,lFe,uFe,fFe,dFe,pFe],diverging:W2e,heatmap:W2e,ordinal:hFe}},hR='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Y2e=400,gFe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],vFe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function mw({type:e,background:t}){let n=e==="dark"?"#161616":"#ffffff",r=e==="dark"?"#f4f4f4":"#161616",i=e==="dark"?gFe:vFe,o=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:hR,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:hR,fill:r,fontWeight:Y2e},"guide-title":{font:hR,fill:r,fontWeight:Y2e}},range:{category:i,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}var yFe=mw({type:"light",background:"#ffffff"}),xFe=mw({type:"light",background:"#f4f4f4"}),CFe=mw({type:"dark",background:"#262626"}),bFe=mw({type:"dark",background:"#161616"}),MFe=$Ie.version;var wFe="vega-tooltip",SFe="0.34.0",EFe="A tooltip plugin for Vega-Lite and Vega visualizations.",DFe=["vega-lite","vega","tooltip"],zFe={type:"git",url:"https://github.com/vega/vega-tooltip.git"},HFe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},LFe=["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],AFe="BSD-3-Clause",VFe={url:"https://github.com/vega/vega-tooltip/issues"},NFe="https://github.com/vega/vega-tooltip#readme",_Fe="build/vega-tooltip.js",kFe="build/vega-tooltip.module.js",TFe="build/vega-tooltip.min.js",IFe="build/vega-tooltip.min.js",FFe="build/vega-tooltip.module.d.ts",RFe=["src","build","types"],OFe={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"rimraf build && rimraf src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prepare:"yarn copy:data",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},PFe={"@babel/core":"^7.22.10","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.10","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@types/jest":"^29.5.3","@typescript-eslint/eslint-plugin":"^6.3.0","@typescript-eslint/parser":"^6.3.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.46.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","gh-pages":"^6.1.0",jest:"^29.6.2","jest-environment-jsdom":"^29.6.2",path:"^0.12.7",prettier:"^3.0.1","release-it":"^16.1.3",rollup:"^4.6.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.3",sass:"^1.64.2",typescript:"~5.3.2","vega-datasets":"^2.7.0","vega-typings":"^0.24.2"},$Fe={"vega-util":"^1.17.2"},BFe={name:wFe,version:SFe,description:EFe,keywords:DFe,repository:zFe,author:HFe,collaborators:LFe,license:AFe,bugs:VFe,homepage:NFe,main:_Fe,module:kFe,unpkg:TFe,jsdelivr:IFe,types:FFe,files:RFe,scripts:OFe,devDependencies:PFe,dependencies:$Fe};function UFe(e,t,n,r){if(F(e))return`[${e.map(o=>t(Q(o)?o:K2e(o,n))).join(", ")}]`;if(ne(e)){let o="",i=e,{title:a,image:s}=i,c=ie(i,["title","image"]);a&&(o+=`<h2>${t(a)}</h2>`),s&&(o+=`<img src="${new URL(t(s),r||location.href).href}">`);let l=Object.keys(c);if(l.length>0){o+="<table>";for(let u of l){let f=c[u];f!==void 0&&(ne(f)&&(f=K2e(f,n)),o+=`<tr><td class="key">${t(u)}</td><td class="value">${t(f)}</td></tr>`)}o+="</table>"}return o||"{}"}return t(e)}function jFe(e){let t=[];return function(n,r){if(typeof r!="object"||r===null)return r;let i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function K2e(e,t){return JSON.stringify(e,jFe(t))}var qFe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`,Z2e="vg-tooltip-element",GFe={offsetX:10,offsetY:10,id:Z2e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:WFe,maxDepth:2,formatTooltip:UFe,baseURL:""};function WFe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function YFe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return qFe.toString().replace(Z2e,e)}function XFe(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}var gw=class{constructor(t){this.options=x(x({},GFe),t);let n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){let r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=YFe(n);let i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);let{x:o,y:a}=XFe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${a}px`,this.el.style.left=`${o}px`}},mAt=BFe.version;function QFe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vR,J2e;function KFe(){return J2e||(J2e=1,vR=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),vR}var ZFe=Ht;Ht.Node=U0;Ht.create=Ht;function Ht(e){var t=this;if(t instanceof Ht||(t=new Ht),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}Ht.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Ht.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Ht.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Ht.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)eRe(this,arguments[e]);return this.length};Ht.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)tRe(this,arguments[e]);return this.length};Ht.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Ht.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Ht.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};Ht.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};Ht.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Ht.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Ht.prototype.map=function(e,t){t=t||this;for(var n=new Ht,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};Ht.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Ht,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};Ht.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};Ht.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};Ht.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Ht.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Ht.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Ht;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};Ht.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Ht;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};Ht.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var o=[],r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=JFe(this,i,n[r]);return o};Ht.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function JFe(e,t,n){var r=t===e.head?new U0(n,null,t,e):new U0(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function eRe(e,t){e.tail=new U0(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function tRe(e,t){e.head=new U0(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function U0(e,t,n,r){if(!(this instanceof U0))return new U0(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{KFe()(Ht)}catch{}var nRe=ZFe,$0=Symbol("max"),Yc=Symbol("length"),S8=Symbol("lengthCalculator"),Uh=Symbol("allowStale"),B0=Symbol("maxAge"),Wc=Symbol("dispose"),eae=Symbol("noDisposeOnSet"),Pr=Symbol("lruList"),ha=Symbol("cache"),pae=Symbol("updateAgeOnGet"),yR=()=>1,MR=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[$0]=t.max||1/0;let n=t.length||yR;if(this[S8]=typeof n!="function"?yR:n,this[Uh]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[B0]=t.maxAge||0,this[Wc]=t.dispose,this[eae]=t.noDisposeOnSet||!1,this[pae]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[$0]=t||1/0,$h(this)}get max(){return this[$0]}set allowStale(t){this[Uh]=!!t}get allowStale(){return this[Uh]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[B0]=t,$h(this)}get maxAge(){return this[B0]}set lengthCalculator(t){typeof t!="function"&&(t=yR),t!==this[S8]&&(this[S8]=t,this[Yc]=0,this[Pr].forEach(n=>{n.length=this[S8](n.value,n.key),this[Yc]+=n.length})),$h(this)}get lengthCalculator(){return this[S8]}get length(){return this[Yc]}get itemCount(){return this[Pr].length}rforEach(t,n){n=n||this;for(let r=this[Pr].tail;r!==null;){let i=r.prev;tae(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Pr].head;r!==null;){let i=r.next;tae(this,t,r,n),r=i}}keys(){return this[Pr].toArray().map(t=>t.key)}values(){return this[Pr].toArray().map(t=>t.value)}reset(){this[Wc]&&this[Pr]&&this[Pr].length&&this[Pr].forEach(t=>this[Wc](t.key,t.value)),this[ha]=new Map,this[Pr]=new nRe,this[Yc]=0}dump(){return this[Pr].map(t=>Cw(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Pr]}set(t,n,r){if(r=r||this[B0],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,o=this[S8](n,t);if(this[ha].has(t)){if(o>this[$0])return D8(this,this[ha].get(t)),!1;let c=this[ha].get(t).value;return this[Wc]&&(this[eae]||this[Wc](t,c.value)),c.now=i,c.maxAge=r,c.value=n,this[Yc]+=o-c.length,c.length=o,this.get(t),$h(this),!0}let a=new wR(t,n,o,i,r);return a.length>this[$0]?(this[Wc]&&this[Wc](t,n),!1):(this[Yc]+=a.length,this[Pr].unshift(a),this[ha].set(t,this[Pr].head),$h(this),!0)}has(t){if(!this[ha].has(t))return!1;let n=this[ha].get(t).value;return!Cw(this,n)}get(t){return xR(this,t,!0)}peek(t){return xR(this,t,!1)}pop(){let t=this[Pr].tail;return t?(D8(this,t),t.value):null}del(t){D8(this,this[ha].get(t))}load(t){this.reset();let n=Date.now();for(let r=t.length-1;r>=0;r--){let i=t[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let a=o-n;a>0&&this.set(i.k,i.v,a)}}}prune(){this[ha].forEach((t,n)=>xR(this,n,!1))}},xR=(e,t,n)=>{let r=e[ha].get(t);if(r){let i=r.value;if(Cw(e,i)){if(D8(e,r),!e[Uh])return}else n&&(e[pae]&&(r.value.now=Date.now()),e[Pr].unshiftNode(r));return i.value}},Cw=(e,t)=>{if(!t||!t.maxAge&&!e[B0])return!1;let n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[B0]&&n>e[B0]},$h=e=>{if(e[Yc]>e[$0])for(let t=e[Pr].tail;e[Yc]>e[$0]&&t!==null;){let n=t.prev;D8(e,t),t=n}},D8=(e,t)=>{if(t){let n=t.value;e[Wc]&&e[Wc](n.key,n.value),e[Yc]-=n.length,e[ha].delete(n.key),e[Pr].removeNode(t)}},wR=class{constructor(t,n,r,i,o){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}},tae=(e,t,n,r)=>{let i=n.value;Cw(e,i)&&(D8(e,n),e[Uh]||(i=void 0)),i&&t.call(r,i.value,i.key,e)},rRe=MR,iRe=Object.freeze({loose:!0}),oRe=Object.freeze({}),aRe=e=>e?typeof e!="object"?iRe:e:oRe,ER=aRe,SR={exports:{}},sRe="2.0.0",hae=256,cRe=Number.MAX_SAFE_INTEGER||9007199254740991,lRe=16,uRe=hae-6,fRe=["major","premajor","minor","preminor","patch","prepatch","prerelease"],DR={MAX_LENGTH:hae,MAX_SAFE_COMPONENT_LENGTH:lRe,MAX_SAFE_BUILD_LENGTH:uRe,MAX_SAFE_INTEGER:cRe,RELEASE_TYPES:fRe,SEMVER_SPEC_VERSION:sRe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},dRe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},Mw=dRe;(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=DR,o=Mw;t=e.exports={};let a=t.re=[],s=t.safeRe=[],c=t.src=[],l=t.t={},u=0,f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],p=m=>{for(let[g,v]of d)m=m.split(`${g}*`).join(`${g}{0,${v}}`).split(`${g}+`).join(`${g}{1,${v}}`);return m},h=(m,g,v)=>{let y=p(g),C=u++;o(m,C,g),l[m]=C,c[C]=g,a[C]=new RegExp(g,v?"g":void 0),s[C]=new RegExp(y,v?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),h("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${f}+`),h("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),h("FULL",`^${c[l.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),h("LOOSE",`^${c[l.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),h("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),h("COERCERTL",c[l.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(SR,SR.exports);var zR=SR.exports,nae=/^[0-9]+$/,mae=(e,t)=>{let n=nae.test(e),r=nae.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},pRe=(e,t)=>mae(t,e),hRe={compareIdentifiers:mae,rcompareIdentifiers:pRe},vw=Mw,{MAX_LENGTH:rae,MAX_SAFE_INTEGER:yw}=DR,{safeRe:iae,t:oae}=zR,mRe=ER,{compareIdentifiers:E8}=hRe,gRe=class Ms{constructor(t,n){if(n=mRe(n),t instanceof Ms){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>rae)throw new TypeError(`version is longer than ${rae} characters`);vw("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=t.trim().match(n.loose?iae[oae.LOOSE]:iae[oae.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>yw||this.major<0)throw new TypeError("Invalid major version");if(this.minor>yw||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>yw||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<yw)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(vw("SemVer.compare",this.version,this.options,t),!(t instanceof Ms)){if(typeof t=="string"&&t===this.version)return 0;t=new Ms(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Ms||(t=new Ms(t,this.options)),E8(this.major,t.major)||E8(this.minor,t.minor)||E8(this.patch,t.patch)}comparePre(t){if(t instanceof Ms||(t=new Ms(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=t.prerelease[n];if(vw("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return E8(r,i)}while(++n)}compareBuild(t){t instanceof Ms||(t=new Ms(t,this.options));let n=0;do{let r=this.build[n],i=t.build[n];if(vw("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return E8(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),E8(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}},HR=gRe,aae=HR,vRe=(e,t,n)=>new aae(e,n).compare(new aae(t,n)),z8=vRe,yRe=z8,xRe=(e,t,n)=>yRe(e,t,n)===0,CRe=xRe,bRe=z8,MRe=(e,t,n)=>bRe(e,t,n)!==0,wRe=MRe,SRe=z8,ERe=(e,t,n)=>SRe(e,t,n)>0,DRe=ERe,zRe=z8,HRe=(e,t,n)=>zRe(e,t,n)>=0,LRe=HRe,ARe=z8,VRe=(e,t,n)=>ARe(e,t,n)<0,NRe=VRe,_Re=z8,kRe=(e,t,n)=>_Re(e,t,n)<=0,TRe=kRe,IRe=CRe,FRe=wRe,RRe=DRe,ORe=LRe,PRe=NRe,$Re=TRe,BRe=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return IRe(e,n,r);case"!=":return FRe(e,n,r);case">":return RRe(e,n,r);case">=":return ORe(e,n,r);case"<":return PRe(e,n,r);case"<=":return $Re(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}},URe=BRe,CR,sae;function jRe(){if(sae)return CR;sae=1;let e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,f){if(f=n(f),u instanceof t){if(u.loose===!!f.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),a("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(u){let f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=u.match(f);if(!d)throw new TypeError(`Invalid comparator: ${u}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new s(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(a("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new s(u,this.options)}catch{return!1}return o(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new c(this.value,f).test(u.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||o(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||o(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}CR=t;let n=ER,{safeRe:r,t:i}=zR,o=URe,a=Mw,s=HR,c=gae();return CR}var bR,cae;function gae(){if(cae)return bR;cae=1;class e{constructor(N,A){if(A=r(A),N instanceof e)return N.loose===!!A.loose&&N.includePrerelease===!!A.includePrerelease?N:new e(N.raw,A);if(N instanceof i)return this.raw=N.value,this.set=[[N]],this.format(),this;if(this.options=A,this.loose=!!A.loose,this.includePrerelease=!!A.includePrerelease,this.raw=N.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(T=>this.parseRange(T.trim())).filter(T=>T.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let T=this.set[0];if(this.set=this.set.filter(G=>!h(G[0])),this.set.length===0)this.set=[T];else if(this.set.length>1){for(let G of this.set)if(G.length===1&&m(G[0])){this.set=[G];break}}}this.format()}format(){return this.range=this.set.map(N=>N.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(N){let T=((this.options.includePrerelease&&d)|(this.options.loose&&p))+":"+N,G=n.get(T);if(G)return G;let X=this.options.loose,J=X?s[c.HYPHENRANGELOOSE]:s[c.HYPHENRANGE];N=N.replace(J,H(this.options.includePrerelease)),o("hyphen replace",N),N=N.replace(s[c.COMPARATORTRIM],l),o("comparator trim",N),N=N.replace(s[c.TILDETRIM],u),o("tilde trim",N),N=N.replace(s[c.CARETTRIM],f),o("caret trim",N);let we=N.split(" ").map(ut=>v(ut,this.options)).join(" ").split(/\s+/).map(ut=>z(ut,this.options));X&&(we=we.filter(ut=>(o("loose invalid filter",ut,this.options),!!ut.match(s[c.COMPARATORLOOSE])))),o("range list",we);let Se=new Map,Ze=we.map(ut=>new i(ut,this.options));for(let ut of Ze){if(h(ut))return[ut];Se.set(ut.value,ut)}Se.size>1&&Se.has("")&&Se.delete("");let Et=[...Se.values()];return n.set(T,Et),Et}intersects(N,A){if(!(N instanceof e))throw new TypeError("a Range is required");return this.set.some(T=>g(T,A)&&N.set.some(G=>g(G,A)&&T.every(X=>G.every(J=>X.intersects(J,A)))))}test(N){if(!N)return!1;if(typeof N=="string")try{N=new a(N,this.options)}catch{return!1}for(let A=0;A<this.set.length;A++)if(j(this.set[A],N,this.options))return!0;return!1}}bR=e;let t=rRe,n=new t({max:1e3}),r=ER,i=jRe(),o=Mw,a=HR,{safeRe:s,t:c,comparatorTrimReplace:l,tildeTrimReplace:u,caretTrimReplace:f}=zR,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:p}=DR,h=L=>L.value==="<0.0.0-0",m=L=>L.value==="",g=(L,N)=>{let A=!0,T=L.slice(),G=T.pop();for(;A&&T.length;)A=T.every(X=>G.intersects(X,N)),G=T.pop();return A},v=(L,N)=>(o("comp",L,N),L=M(L,N),o("caret",L),L=C(L,N),o("tildes",L),L=w(L,N),o("xrange",L),L=D(L,N),o("stars",L),L),y=L=>!L||L.toLowerCase()==="x"||L==="*",C=(L,N)=>L.trim().split(/\s+/).map(A=>b(A,N)).join(" "),b=(L,N)=>{let A=N.loose?s[c.TILDELOOSE]:s[c.TILDE];return L.replace(A,(T,G,X,J,we)=>{o("tilde",L,T,G,X,J,we);let Se;return y(G)?Se="":y(X)?Se=`>=${G}.0.0 <${+G+1}.0.0-0`:y(J)?Se=`>=${G}.${X}.0 <${G}.${+X+1}.0-0`:we?(o("replaceTilde pr",we),Se=`>=${G}.${X}.${J}-${we} <${G}.${+X+1}.0-0`):Se=`>=${G}.${X}.${J} <${G}.${+X+1}.0-0`,o("tilde return",Se),Se})},M=(L,N)=>L.trim().split(/\s+/).map(A=>S(A,N)).join(" "),S=(L,N)=>{o("caret",L,N);let A=N.loose?s[c.CARETLOOSE]:s[c.CARET],T=N.includePrerelease?"-0":"";return L.replace(A,(G,X,J,we,Se)=>{o("caret",L,G,X,J,we,Se);let Ze;return y(X)?Ze="":y(J)?Ze=`>=${X}.0.0${T} <${+X+1}.0.0-0`:y(we)?X==="0"?Ze=`>=${X}.${J}.0${T} <${X}.${+J+1}.0-0`:Ze=`>=${X}.${J}.0${T} <${+X+1}.0.0-0`:Se?(o("replaceCaret pr",Se),X==="0"?J==="0"?Ze=`>=${X}.${J}.${we}-${Se} <${X}.${J}.${+we+1}-0`:Ze=`>=${X}.${J}.${we}-${Se} <${X}.${+J+1}.0-0`:Ze=`>=${X}.${J}.${we}-${Se} <${+X+1}.0.0-0`):(o("no pr"),X==="0"?J==="0"?Ze=`>=${X}.${J}.${we}${T} <${X}.${J}.${+we+1}-0`:Ze=`>=${X}.${J}.${we}${T} <${X}.${+J+1}.0-0`:Ze=`>=${X}.${J}.${we} <${+X+1}.0.0-0`),o("caret return",Ze),Ze})},w=(L,N)=>(o("replaceXRanges",L,N),L.split(/\s+/).map(A=>E(A,N)).join(" ")),E=(L,N)=>{L=L.trim();let A=N.loose?s[c.XRANGELOOSE]:s[c.XRANGE];return L.replace(A,(T,G,X,J,we,Se)=>{o("xRange",L,T,G,X,J,we,Se);let Ze=y(X),Et=Ze||y(J),ut=Et||y(we),Jt=ut;return G==="="&&Jt&&(G=""),Se=N.includePrerelease?"-0":"",Ze?G===">"||G==="<"?T="<0.0.0-0":T="*":G&&Jt?(Et&&(J=0),we=0,G===">"?(G=">=",Et?(X=+X+1,J=0,we=0):(J=+J+1,we=0)):G==="<="&&(G="<",Et?X=+X+1:J=+J+1),G==="<"&&(Se="-0"),T=`${G+X}.${J}.${we}${Se}`):Et?T=`>=${X}.0.0${Se} <${+X+1}.0.0-0`:ut&&(T=`>=${X}.${J}.0${Se} <${X}.${+J+1}.0-0`),o("xRange return",T),T})},D=(L,N)=>(o("replaceStars",L,N),L.trim().replace(s[c.STAR],"")),z=(L,N)=>(o("replaceGTE0",L,N),L.trim().replace(s[N.includePrerelease?c.GTE0PRE:c.GTE0],"")),H=L=>(N,A,T,G,X,J,we,Se,Ze,Et,ut,Jt,Ss)=>(y(T)?A="":y(G)?A=`>=${T}.0.0${L?"-0":""}`:y(X)?A=`>=${T}.${G}.0${L?"-0":""}`:J?A=`>=${A}`:A=`>=${A}${L?"-0":""}`,y(Ze)?Se="":y(Et)?Se=`<${+Ze+1}.0.0-0`:y(ut)?Se=`<${Ze}.${+Et+1}.0-0`:Jt?Se=`<=${Ze}.${Et}.${ut}-${Jt}`:L?Se=`<${Ze}.${Et}.${+ut+1}-0`:Se=`<=${Se}`,`${A} ${Se}`.trim()),j=(L,N,A)=>{for(let T=0;T<L.length;T++)if(!L[T].test(N))return!1;if(N.prerelease.length&&!A.includePrerelease){for(let T=0;T<L.length;T++)if(o(L[T].semver),L[T].semver!==i.ANY&&L[T].semver.prerelease.length>0){let G=L[T].semver;if(G.major===N.major&&G.minor===N.minor&&G.patch===N.patch)return!0}return!1}return!0};return bR}var qRe=gae(),GRe=(e,t,n)=>{try{t=new qRe(t,n)}catch{return!1}return t.test(e)},WRe=GRe,vae=QFe(WRe);function YRe(e,t,n){let r=e.open(t),i=1e4,o=250,{origin:a}=new URL(t),s=~~(i/o);function c(u){u.source===r&&(s=0,e.removeEventListener("message",c,!1))}e.addEventListener("message",c,!1);function l(){s<=0||(r.postMessage(n,a),setTimeout(l,o),s-=1)}setTimeout(l,o)}var XRe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function yae(e,...t){for(let n of t)QRe(e,n);return e}function QRe(e,t){for(let n of Object.keys(t))Qs(e,n,t[n],!0)}var KRe="vega-embed",ZRe="6.24.0",JRe="Publish Vega visualizations as embedded web components.",eOe=["vega","data","visualization","component","embed"],tOe={type:"git",url:"http://github.com/vega/vega-embed.git"},nOe={name:"UW Interactive Data Lab",url:"http://idl.cs.washington.edu"},rOe=[{name:"Dominik Moritz",url:"https://www.domoritz.de"}],iOe={url:"https://github.com/vega/vega-embed/issues"},oOe="https://github.com/vega/vega-embed#readme",aOe="BSD-3-Clause",sOe="build/vega-embed.js",cOe="build/vega-embed.module.js",lOe="build/vega-embed.min.js",uOe="build/vega-embed.min.js",fOe="build/vega-embed.module.d.ts",dOe=["src","build","patches"],pOe={"@babel/core":"^7.23.6","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.23.6","@babel/preset-env":"^7.23.6","@babel/preset-typescript":"^7.23.3","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-commonjs":"25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/jest":"^29.5.11","@types/semver":"^7.5.6","@typescript-eslint/eslint-plugin":"^6.14.0","@typescript-eslint/parser":"^6.14.0","browser-sync":"^2.29.3",concurrently:"^8.2.2","del-cli":"^5.1.0",eslint:"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.6.0","eslint-plugin-prettier":"^5.0.1",jest:"^29.7.0","jest-canvas-mock":"^2.5.2","jest-environment-jsdom":"^29.7.0","patch-package":"^8.0.0","postinstall-postinstall":"^2.1.0",prettier:"^3.1.1","release-it":"^17.0.1",rollup:"4.9.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",sass:"^1.69.5",typescript:"^5.3.3",vega:"^5.22.1","vega-lite":"^5.2.0"},hOe={vega:"^5.21.0","vega-lite":"*"},mOe={"fast-json-patch":"^3.1.1","json-stringify-pretty-compact":"^3.0.0",semver:"^7.5.4",tslib:"^2.6.2","vega-interpreter":"^1.0.5","vega-schema-url-parser":"^2.2.0","vega-themes":"^2.14.0","vega-tooltip":"^0.34.0"},gOe=["yallist"],vOe={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"del-cli build src/style.ts",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start --directory -s -f build *.html",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},yOe={name:KRe,version:ZRe,description:JRe,keywords:eOe,repository:tOe,author:nOe,contributors:rOe,bugs:iOe,homepage:oOe,license:aOe,main:sOe,module:cOe,unpkg:lOe,jsdelivr:uOe,types:fOe,files:dOe,devDependencies:pOe,peerDependencies:hOe,dependencies:mOe,bundledDependencies:gOe,scripts:vOe},wAt=yOe.version,ws=mI,jh=lR,lae=typeof window<"u"?window:void 0;jh===void 0&&lae?.vl?.compile&&(jh=lae.vl);var xOe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},COe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Bh={vega:"Vega","vega-lite":"Vega-Lite"},bw={vega:ws.version,"vega-lite":jh?jh.version:"not available"},bOe={vega:e=>e,"vega-lite":(e,t)=>jh.compile(e,{config:t}).spec},MOe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,wOe="chart-wrapper";function SOe(e){return typeof e=="function"}function uae(e,t,n,r){let i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+o),a.document.title=`${Bh[r]} JSON Source`}function EOe(e,t){if(e.$schema){let n=uR(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Bh[n.library]}, but mode argument sets ${Bh[t]??t}.`);let r=n.library;return vae(bw[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Bh[r]} ${n.version}, but the current version of ${Bh[r]} is v${bw[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function xae(e){return!!(e&&"load"in e)}function fae(e){return xae(e)?e:ws.loader(e)}function DOe(e){let t=e.usermeta?.embedOptions??{};return Q(t.defaultStyle)&&(t.defaultStyle=!1),t}function Cae(r,i){return qt(this,arguments,function*(e,t,n={}){let o,a;Q(t)?(a=fae(n.loader),o=JSON.parse(yield a.load(t))):o=t;let s=DOe(o),c=s.loader;(!a||c)&&(a=fae(n.loader??c));let l=yield dae(s,a),u=yield dae(n,a),f=k(x({},yae(u,l)),{config:Fa(u.config??{},l.config??{})});return yield HOe(e,o,f,a)})}function dae(e,t){return qt(this,null,function*(){let n=Q(e.config)?JSON.parse(yield t.load(e.config)):e.config??{},r=Q(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return x(x(x({},e),r?{patch:r}:{}),n?{config:n}:{})})}function zOe(e){let t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}function HOe(i,o){return qt(this,arguments,function*(e,t,n={},r){let a=n.theme?Fa(gR[n.theme],n.config??{}):n.config,s=D1(n.actions)?n.actions:yae({},xOe,n.actions??{}),c=x(x({},COe),n.i18n),l=n.renderer??"canvas",u=n.logLevel??ws.Warn,f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){let w="vega-embed-style",{root:E,rootContainer:D}=zOe(d);if(!E.getElementById(w)){let z=document.createElement("style");z.id=w,z.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?XRe.toString():n.defaultStyle,D.appendChild(z)}}let p=EOe(t,n.mode),h=bOe[p](t,a);if(p==="vega-lite"&&h.$schema){let w=uR(h.$schema);vae(bw.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${bw.vega}.`)}d.classList.add("vega-embed"),s&&d.classList.add("has-actions"),d.innerHTML="";let m=d;if(s){let w=document.createElement("div");w.classList.add(wOe),d.appendChild(w),m=w}let g=n.patch;if(g&&(h=g instanceof Function?g(h):q6(h,g,!0,!1).newDocument),n.formatLocale&&ws.formatLocale(n.formatLocale),n.timeFormatLocale&&ws.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(let w in n.expressionFunctions){let E=n.expressionFunctions[w];"fn"in E?ws.expressionFunction(w,E.fn,E.visitor):E instanceof Function&&ws.expressionFunction(w,E)}let{ast:v}=n,y=ws.parse(h,p==="vega-lite"?{}:a,{ast:v}),C=new(n.viewClass||ws.View)(y,x({loader:r,logLevel:u,renderer:l},v?{expr:ws.expressionInterpreter??n.expr??Mne}:{}));if(C.addSignalListener("autosize",(w,E)=>{let{type:D}=E;D=="fit-x"?(m.classList.add("fit-x"),m.classList.remove("fit-y")):D=="fit-y"?(m.classList.remove("fit-x"),m.classList.add("fit-y")):D=="fit"?m.classList.add("fit-x","fit-y"):m.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){let{loader:w,tooltip:E}=n,D=w&&!xae(w)?w?.baseURL:void 0,z=SOe(E)?E:new gw(x({baseURL:D},E===!0?{}:E)).call;C.tooltip(z)}let{hover:b}=n;if(b===void 0&&(b=p==="vega"),b){let{hoverSet:w,updateSet:E}=typeof b=="boolean"?{}:b;C.hover(w,E)}n&&(n.width!=null&&C.width(n.width),n.height!=null&&C.height(n.height),n.padding!=null&&C.padding(n.padding)),yield C.initialize(m,n.bind).runAsync();let M;if(s!==!1){let w=d;if(n.defaultStyle!==!1||n.forceActionsMenu){let D=document.createElement("details");D.title=c.CLICK_TO_VIEW_ACTIONS,d.append(D),w=D;let z=document.createElement("summary");z.innerHTML=MOe,D.append(z),M=H=>{D.contains(H.target)||D.removeAttribute("open")},document.addEventListener("click",M)}let E=document.createElement("div");if(w.append(E),E.classList.add("vega-actions"),s===!0||s.export!==!1){for(let D of["svg","png"])if(s===!0||s.export===!0||s.export[D]){let z=c[`${D.toUpperCase()}_ACTION`],H=document.createElement("a"),j=ne(n.scaleFactor)?n.scaleFactor[D]:n.scaleFactor;H.text=z,H.href="#",H.target="_blank",H.download=`${f}.${D}`,H.addEventListener("mousedown",function(L){return qt(this,null,function*(){L.preventDefault();let N=yield C.toImageURL(D,j);this.href=N})}),E.append(H)}}if(s===!0||s.source!==!1){let D=document.createElement("a");D.text=c.SOURCE_ACTION,D.href="#",D.addEventListener("click",function(z){uae((0,xw.default)(t),n.sourceHeader??"",n.sourceFooter??"",p),z.preventDefault()}),E.append(D)}if(p==="vega-lite"&&(s===!0||s.compiled!==!1)){let D=document.createElement("a");D.text=c.COMPILED_ACTION,D.href="#",D.addEventListener("click",function(z){uae((0,xw.default)(h),n.sourceHeader??"",n.sourceFooter??"","vega"),z.preventDefault()}),E.append(D)}if(s===!0||s.editor!==!1){let D=n.editorUrl??"https://vega.github.io/editor/",z=document.createElement("a");z.text=c.EDITOR_ACTION,z.href="#",z.addEventListener("click",function(H){YRe(window,D,{config:a,mode:p,renderer:l,spec:(0,xw.default)(t)}),H.preventDefault()}),E.append(z)}}function S(){M&&document.removeEventListener("click",M),C.finalize()}return{view:C,spec:t,vgSpec:h,finalize:S,embedOptions:n}})}var bae=(()=>{let t=class t{constructor(){this.data=[],this.spec=Nq}ngAfterViewInit(){return qt(this,null,function*(){this.spec=this.addDataToSpec(this.data,this.spec),this.chart=yield Cae("#calendar-element",this.spec)})}addDataToSpec(r,i){let o=i;return o.data.values=this.formatData(r),o}formatData(r){let i=Array.from(new Set(r)),o=i.map(u=>new Date(u).getFullYear()),a=Math.min(...o),s=Math.max(...o),c={};for(let u=a;u<=s;u++)for(let f=1;f<=12;f++)for(let d=1;d<=31;d++){let p=new Date(u,f-1,d).toLocaleDateString().split("T")[0];c[p]=0}return i.forEach(u=>{let f=new Date(u).toLocaleDateString().split("T")[0];c[f]+=1}),Object.entries(c).map(([u,f])=>({date:u,count:f}))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-calendar-heatmap"]],inputs:{data:"data"},standalone:!0,features:[Ce],decls:1,vars:0,consts:[["id","calendar-element"]],template:function(i,o){i&1&&gt(0,"div",0)},styles:["#calendar-element[_ngcontent-%COMP%]{position:relative;width:100%}"]});let e=t;return e})();function LOe(e,t){if(e&1&&(V(0,"pre"),I(1),_()),e&2){let n=qe();O(),Hn(n.model==null?null:n.model.Description)}}function AOe(e,t){if(e&1&&(V(0,"p"),I(1),_()),e&2){let n=qe();O(),K8(" Completed Value: ",n.model==null?null:n.model.TimesCompletedToday," / ",n.model==null?null:n.model.TargetValue,`
`)}}function VOe(e,t){if(e&1&&(V(0,"p"),I(1," Associated Goal: "),V(2,"a",5),I(3),_()()),e&2){let n=qe();O(2),se("routerLink",n.goalModel.ViewUrl),O(),ze(" ",n.goalModel.Name," ")}}function NOe(e,t){if(e&1&&(V(0,"li"),I(1),mi(2,"date"),_()),e&2){let n=t.$implicit;O(),ze(" ",gi(2,1,n)," ")}}function _Oe(e,t){if(e&1&&(b1(0),gt(1,"app-calendar-heatmap",6),M1()),e&2){let n=qe();O(),se("data",n.model.FormattedCompletedDates)}}var Mae=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.goalApi=o,this.faCheck=Ug,this.faXmark=Bg,this.recentCompletedDates=[]}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(ye(1)).subscribe(i=>{this.model=new E1(i.data);let o=this.model?.CompletedDates??[],a=Array.from(new Set(o));this.recentCompletedDates=a.slice(-7),this.model?.Goal&&this.goalApi.getGoal(this.model?.Goal).pipe(ye(1)).subscribe(s=>{this.goalModel=new ur(s.data)})})}};t.\u0275fac=function(i){return new(i||t)(W(To),W(Nt),W(Kn))},t.\u0275cmp=xe({type:t,selectors:[["app-habit-page"]],standalone:!0,features:[Ce],decls:17,vars:11,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right","uk-margin-small-top",3,"routerLink"],[1,"uk-button-danger","uk-button","uk-margin-small-top",3,"routerLink"],[3,"icon"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"routerLink"],[3,"data"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),_(),V(2,"button",0),I(3),_(),V(4,"button",1),I(5),_(),Xe(6,LOe,2,1,"pre"),V(7,"p"),I(8," Is Anti Habit: "),gt(9,"fa-icon",2),_(),Xe(10,AOe,2,2,"p",3)(11,VOe,4,2,"p",3),V(12,"h2"),I(13,"Completed Dates"),_(),V(14,"ul"),Xe(15,NOe,3,3,"li",4),_(),Xe(16,_Oe,2,1,"ng-container",3)),i&2&&(O(),ze("Habit: ",o.model==null?null:o.model.Name,""),O(),se("routerLink",o.model==null?null:o.model.EditUrl),O(),ze(" Edit: ",o.model==null?null:o.model.Name,`
`),O(),se("routerLink",o.model==null?null:o.model.DeleteUrl),O(),ze(" Delete: ",o.model==null?null:o.model.Name,`
`),O(),hi(6,o.model!=null&&o.model.Description?6:-1),O(3),se("icon",o.model!=null&&o.model.AntiHabit?o.faCheck:o.faXmark),O(),se("ngIf",o.model==null?null:o.model.IsQuantifiable),O(),se("ngIf",o.goalModel),O(4),se("ngForOf",o.recentCompletedDates),O(),se("ngIf",o.model))},dependencies:[hn,Ag,w1,vi,bae,Vo],encapsulation:2});let e=t;return e})();var wae=(()=>{let t=class t{constructor(){}onRightClick(r){r.preventDefault()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=Tt({type:t,selectors:[["","appNoContextMenu",""]],hostBindings:function(i,o){i&1&&Re("contextmenu",function(s){return o.onRightClick(s)})},standalone:!0});let e=t;return e})();function kOe(e,t){if(e&1){let n=Z1();V(0,"input",12),Re("change",function(){fi(n);let i=qe().$implicit,o=qe();return di(o.changeState.emit(i))}),_()}if(e&2){let n=qe().$implicit;se("checked",n.IsCompletedToday)}}function TOe(e,t){if(e&1){let n=Z1();V(0,"button",13),Re("click",function(){fi(n);let i=qe().$implicit,o=qe();return di(o.changeState.emit(i))})("contextmenu",function(){fi(n);let i=qe().$implicit,o=qe();return di(o.decrementState.emit(i))}),I(1),_()}if(e&2){let n=qe().$implicit,r;O(),ze(" ",(r=n==null?null:n.TimesCompletedToday)!==null&&r!==void 0?r:0," ")}}function IOe(e,t){if(e&1&&(b1(0),V(1,"p",14),I(2),_(),M1()),e&2){let n=qe().$implicit;O(2),ze(" ",n.Description," ")}}function FOe(e,t){if(e&1&&(V(0,"tr")(1,"td"),Xe(2,kOe,1,1,"input",7)(3,TOe,2,1),_(),V(4,"td")(5,"a",8),I(6),_()(),V(7,"td",1),Xe(8,IOe,3,1,"ng-container",9),_(),V(9,"td",2),gt(10,"fa-icon",10),_(),V(11,"td")(12,"a",11),I(13,"View"),_()()()),e&2){let n=t.$implicit,r=qe(),i=el(19);O(2),hi(2,!n.IsQuantifiable||n.IsCompletedToday?2:3),O(3),se("routerLink",n.ViewUrl),O(),Hn(n.Name),O(2),se("ngIf",n.Description)("ngIfElse",i),O(2),se("icon",n.AntiHabit?r.faCheck:r.faXmark),O(2),se("routerLink",n.ViewUrl)}}function ROe(e,t){}function OOe(e,t){}function POe(e,t){e&1&&(V(0,"i"),I(1,"No description"),_())}var Sae=(()=>{let t=class t{constructor(){this.faCheck=Ug,this.faXmark=Bg,this.models=[],this.changeState=new bn,this.decrementState=new bn}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-habits-table"]],inputs:{models:"models"},outputs:{changeState:"changeState",decrementState:"decrementState"},standalone:!0,features:[Ce],decls:20,vars:1,consts:[[1,"uk-table","uk-table-striped","uk-table-middle"],[1,"hide-in-mobile"],[1,"centered"],[4,"ngFor","ngForOf"],["quantifiableAction",""],["booleanAction",""],["defaultDescription",""],["type","checkbox","class","uk-checkbox",3,"checked"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[4,"ngIf","ngIfElse"],[3,"icon"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],["type","checkbox",1,"uk-checkbox",3,"checked","change"],["appNoContextMenu","",1,"uk-button","uk-button-default","increment-button",3,"click","contextmenu"],[1,"description"]],template:function(i,o){i&1&&(V(0,"table",0)(1,"thead")(2,"tr"),gt(3,"th"),V(4,"th"),I(5,"Name"),_(),V(6,"th",1),I(7,"Description"),_(),V(8,"th",2),I(9,"Anti"),_(),V(10,"th"),I(11,"Action"),_()()(),V(12,"tbody"),Xe(13,FOe,14,7,"tr",3),_()(),Xe(14,ROe,0,0,"ng-template",null,4,Fs)(16,OOe,0,0,"ng-template",null,5,Fs)(18,POe,2,0,"ng-template",null,6,Fs)),i&2&&(O(13),se("ngForOf",o.models))},dependencies:[vi,wae,hn,w1,Ag],styles:["p.description[_ngcontent-%COMP%]{text-wrap:nowrap;padding-right:10rem;width:28rem;overflow:hidden}.increment-button[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:center;align-items:center;padding:0rem;height:1.6rem;width:1.6rem;border:1px solid #999}.centered[_ngcontent-%COMP%]{display:flex;justify-content:center}"]});let e=t;return e})();function $Oe(e,t){if(e&1){let n=Z1();V(0,"section")(1,"h2"),I(2,"Completed Habits"),_(),V(3,"app-habits-table",4),Re("changeState",function(i){fi(n);let o=qe();return di(o.uncompleteHabit(i))}),_()()}if(e&2){let n=qe();O(3),se("models",n.completedHabits)}}var Eae=(()=>{let t=class t{constructor(r){this.api=r,this.habits=[]}get inCompleteHabits(){return this.habits.filter(r=>!this.isCompletedToday(r))}get completedHabits(){return this.habits.filter(r=>!r.AntiHabit&&this.isCompletedToday(r))}get failedAntiHabits(){return this.habits.filter(r=>r.AntiHabit&&this.isCompletedToday(r))}ngOnInit(){this.api.getHabits().pipe(ye(1)).subscribe(r=>{this.habits=r.data.map(i=>new E1(i))})}completeHabit(r){r.CompletedDates?.length||(r.CompletedDates=[]),r.CompletedDates.push(new Date().toLocaleDateString()),this.api.updateHabit(r).pipe(ye(1)).subscribe(i=>{r=new E1(i.data)})}uncompleteHabit(r){let i=new Date().toLocaleDateString(),o=r.CompletedDates.findIndex(a=>{let s=new Date(a).toLocaleDateString();return i===s});r.CompletedDates.splice(o,1),this.api.updateHabit(r).pipe(ye(1)).subscribe(a=>{r=new E1(a.data)})}isCompletedToday(r){return r.IsCompletedToday}};t.\u0275fac=function(i){return new(i||t)(W(To))},t.\u0275cmp=xe({type:t,selectors:[["app-list-page"]],standalone:!0,features:[Ce],decls:10,vars:2,consts:[[1,"list-header"],["routerLink","/habits/new",1,"uk-button","uk-button-primary"],[3,"models","changeState","decrementState"],[4,"ngIf"],[3,"models","changeState"]],template:function(i,o){i&1&&(V(0,"div",0)(1,"h1"),I(2,"Habits"),_(),V(3,"nav")(4,"a",1),I(5,"New Habit"),_()()(),V(6,"main")(7,"section")(8,"app-habits-table",2),Re("changeState",function(s){return o.completeHabit(s)})("decrementState",function(s){return o.uncompleteHabit(s)}),_()(),Xe(9,$Oe,4,1,"section",3),_()),i&2&&(O(8),se("models",o.inCompleteHabits),O(),se("ngIf",o.completedHabits.length>0))},dependencies:[hn,Sae,w1]});let e=t;return e})();function BOe(e,t){e&1&&(V(0,"h1"),I(1,"Create Habit"),_())}function UOe(e,t){if(e&1&&(V(0,"h1"),I(1),_()),e&2){let n=qe();O(),ze("Edit Habit: ",n.model.Name,"")}}function jOe(e,t){if(e&1&&(b1(0),V(1,"option",10),I(2),_(),M1()),e&2){let n=t.$implicit;O(),se("value",n.Id),O(),Hn(n.Name)}}function qOe(e,t){if(e&1){let n=Z1();V(0,"div",11)(1,"label"),I(2," Target Value "),V(3,"input",12),Yt("ngModelChange",function(i){fi(n);let o=qe();return tn(o.model.TargetValue,i)||(o.model.TargetValue=i),di(i)}),_()()()}if(e&2){let n=qe();O(3),Wt("ngModel",n.model.TargetValue)}}var ww=(()=>{let t=class t extends U6{constructor(r,i,o){super(),this.router=r,this.api=i,this.goalApi=o,this.goals$=new Pn([])}ngOnInit(){this.goalApi.listGoals().pipe(ye(1)).subscribe(r=>this.goals$.next(r.data.map(i=>new ur(i))))}submitForm(){let r=new E1(this.model);this.creating&&this.api.createHabit(r).pipe(ye(1)).subscribe(()=>this.router.navigate(["/"])),this.api.updateHabit(r).pipe(ye(1)).subscribe(()=>this.router.navigate(r.ViewUrl))}};t.\u0275fac=function(i){return new(i||t)(W(Qt),W(To),W(Kn))},t.\u0275cmp=xe({type:t,selectors:[["app-habit-form"]],standalone:!0,features:[cr,Ce],decls:25,vars:11,consts:[[1,"uk-form-label"],["name","name","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["name","description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["name","goal",1,"uk-select",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["id","boolean-selectors"],["name","anti-habit","type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange"],["name","quantifiable-habit","type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange"],["class","uk-form-label target-value",4,"ngIf"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"],[3,"value"],[1,"uk-form-label","target-value"],["name","target-value","type","number","placeholder","eg. 5 (km run)",1,"uk-input",3,"ngModel","ngModelChange"]],template:function(i,o){i&1&&(Xe(0,BOe,2,0,"h1")(1,UOe,2,1),V(2,"form")(3,"label",0),I(4," Habit Name "),V(5,"input",1),Yt("ngModelChange",function(s){return tn(o.model.Name,s)||(o.model.Name=s),s}),_()(),V(6,"label",0),I(7," Habit Description "),V(8,"textarea",2),Yt("ngModelChange",function(s){return tn(o.model.Description,s)||(o.model.Description=s),s}),_()(),V(9,"label",0),I(10," Associated Goal "),V(11,"select",3),Yt("ngModelChange",function(s){return tn(o.model.Goal,s)||(o.model.Goal=s),s}),Xe(12,jOe,3,2,"ng-container",4),mi(13,"async"),_()(),V(14,"div",5)(15,"label",0)(16,"input",6),Yt("ngModelChange",function(s){return tn(o.model.AntiHabit,s)||(o.model.AntiHabit=s),s}),_(),I(17," Anti Habit "),_(),V(18,"label",0)(19,"input",7),Yt("ngModelChange",function(s){return tn(o.model.IsQuantifiable,s)||(o.model.IsQuantifiable=s),s}),_(),I(20," Quantifiable "),_()(),Xe(21,qOe,4,1,"div",8),V(22,"div")(23,"button",9),Re("click",function(){return o.submitForm()}),I(24),_()()()),i&2&&(hi(0,o.creating?0:1),O(5),Wt("ngModel",o.model.Name),O(3),Wt("ngModel",o.model.Description),O(3),Wt("ngModel",o.model.Goal),O(),se("ngForOf",gi(13,9,o.goals$)),O(4),Wt("ngModel",o.model.AntiHabit),O(3),Wt("ngModel",o.model.IsQuantifiable),O(2),se("ngIf",o.model.IsQuantifiable),O(3),ze(" ",o.creating?"Create":"Update"," Habit "))},dependencies:[Mr,_a,Rg,Og,S1,oH,ul,$6,xi,Na,Wr,w2,vi,w1,F9],styles:["#boolean-selectors[_ngcontent-%COMP%]{margin-top:.5rem;margin-right:.5rem}#boolean-selectors[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:1rem}.target-value[_ngcontent-%COMP%]{margin-top:1rem}"]});let e=t;return e})();var Dae=(()=>{let t=class t{constructor(){this.partialModel={CreatedAt:new Date().toLocaleDateString()}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-new-page"]],standalone:!0,features:[Ce],decls:1,vars:2,consts:[[3,"creating","model"]],template:function(i,o){i&1&&gt(0,"app-habit-form",0),i&2&&se("creating",!0)("model",o.partialModel)},dependencies:[ww],encapsulation:2});let e=t;return e})();var zae=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-schedule-page"]],standalone:!0,features:[Ce],decls:2,vars:0,template:function(i,o){i&1&&(V(0,"h1"),I(1,"Schedule"),_())},encapsulation:2});let e=t;return e})();var f2=(()=>{let t=class t extends ko{constructor(r){super(),this.http=r}getTodaysRemainingTasks(){throw new Error("Not implemented")}getTasks(){let r=Kt("/tasks");return this.http.get(r)}getTask(r){let i=Kt(`/tasks/${r}`);return this.http.get(i)}createTask(r){let i=Kt("/tasks");return this.http.post(i,r)}updateTask(r){let i=Kt(`/tasks/${r.Id}`);return this.http.put(i,r)}deleteTask(r){let i=Kt(`/tasks/${r}`);return this.http.delete(i)}};t.\u0275fac=function(i){return new(i||t)(ge(Us))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();var Hae=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(ye(1)).subscribe(i=>{this.model=new no(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteTask(this.model?.Id).pipe(ye(1)).subscribe(()=>this.router.navigateByUrl("/tasks"))}};t.\u0275fac=function(i){return new(i||t)(W(f2),W(Nt),W(Qt))},t.\u0275cmp=xe({type:t,selectors:[["app-delete-task-page"]],standalone:!0,features:[Ce],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),_(),V(2,"p"),I(3,` Deleting this model will make it unrecoverable.
`),_(),V(4,"button",0),Re("click",function(){return o.deleteModel()}),I(5),_()),i&2&&(O(),ze("Delete ",o.model==null?null:o.model.Name,"?"),O(4),ze(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();function GOe(e,t){if(e&1&&(b1(0),V(1,"p",10),I(2),_(),M1()),e&2){let n=qe().$implicit;O(2),ze(" ",n.Description," ")}}function WOe(e,t){if(e&1&&(b1(0),I(1),mi(2,"date"),M1()),e&2){let n=qe().$implicit;O(),ze(" ",gi(2,1,n.CompleteBy)," ")}}var YOe=e=>({"uk-text-danger":e});function XOe(e,t){if(e&1){let n=Z1();V(0,"tr")(1,"td")(2,"input",5),Yt("ngModelChange",function(i){let a=fi(n).$implicit;return tn(a.Completed,i)||(a.Completed=i),di(i)}),Re("change",function(){let o=fi(n).$implicit,a=qe();return di(a.changeState.emit(o))}),_()(),V(3,"td")(4,"a",6),I(5),_()(),V(6,"td",1),Xe(7,GOe,3,1,"ng-container",7),_(),V(8,"td",1),I(9),_(),V(10,"td",8),Xe(11,WOe,3,3,"ng-container",7),_(),V(12,"td")(13,"a",9),I(14,"View"),_()()()}if(e&2){let n=t.$implicit;qe();let r=el(17),i=el(19);O(2),Wt("ngModel",n.Completed),O(2),se("routerLink",n.ViewUrl),O(),ze(" ",n.Name," "),O(2),se("ngIf",n.Description)("ngIfElse",r),O(2),Hn(n.ImportanceHuman),O(),se("ngClass",mB(10,YOe,n.isOverdue)),O(),se("ngIf",n.CompleteBy)("ngIfElse",i),O(2),se("routerLink",n.ViewUrl)}}function QOe(e,t){e&1&&(V(0,"i"),I(1,"No description"),_())}function KOe(e,t){e&1&&(V(0,"i"),I(1,"No date set"),_())}var Lae=(()=>{let t=class t{constructor(){this.models=[],this.changeState=new bn}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-tasks-table"]],inputs:{models:"models"},outputs:{changeState:"changeState"},standalone:!0,features:[Ce],decls:20,vars:1,consts:[[1,"uk-table","uk-table-striped"],[1,"hide-in-mobile"],[4,"ngFor","ngForOf"],["defaultDescription",""],["defaultCompleteBy",""],["type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange","change"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[4,"ngIf","ngIfElse"],[3,"ngClass"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],[1,"description"]],template:function(i,o){i&1&&(V(0,"table",0)(1,"thead")(2,"tr"),gt(3,"th"),V(4,"th"),I(5,"Name"),_(),V(6,"th",1),I(7,"Description"),_(),V(8,"th",1),I(9,"Importance"),_(),V(10,"th"),I(11,"Due Date"),_(),V(12,"th"),I(13,"Action"),_()()(),V(14,"tbody"),Xe(15,XOe,15,12,"tr",2),_()(),Xe(16,QOe,2,0,"ng-template",null,3,Fs)(18,KOe,2,0,"ng-template",null,4,Fs)),i&2&&(O(15),se("ngForOf",o.models))},dependencies:[vi,IB,Mr,ul,xi,Wr,hn,w1,Vo]});let e=t;return e})();function ZOe(e,t){if(e&1){let n=Z1();V(0,"section")(1,"h2"),I(2,"Completed Tasks"),_(),V(3,"app-tasks-table",3),Re("changeState",function(i){fi(n);let o=qe();return di(o.updateTask(i))}),_()()}if(e&2){let n=qe();O(3),se("models",n.completedTasks)}}var Aae=(()=>{let t=class t{constructor(r){this.api=r,this.tasks=[]}get completedTasks(){return this.tasks.filter(r=>r.Completed)}get incompleteTasks(){return this.tasks.filter(r=>!r.Completed)}ngOnInit(){this.api.getTasks().pipe(ye(1)).subscribe(r=>{this.tasks=r.data.map(i=>new no(i))})}updateTask(r){this.api.updateTask(r).pipe(ye(1)).subscribe(i=>{r=new no(i.data)})}};t.\u0275fac=function(i){return new(i||t)(W(f2))},t.\u0275cmp=xe({type:t,selectors:[["app-tasks-page"]],standalone:!0,features:[Ce],decls:9,vars:2,consts:[[1,"list-header"],["routerLink","/tasks/new",1,"uk-button","uk-button-primary"],[1,"incompleteTasks.length",">","0"],[3,"models","changeState"],[4,"ngIf"]],template:function(i,o){i&1&&(V(0,"div",0)(1,"h1"),I(2,"Tasks"),_(),V(3,"nav")(4,"a",1),I(5,"New Task"),_()()(),V(6,"section",2)(7,"app-tasks-table",3),Re("changeState",function(s){return o.updateTask(s)}),_()(),Xe(8,ZOe,4,1,"section",4)),i&2&&(O(7),se("models",o.incompleteTasks),O(),se("ngIf",o.completedTasks.length>0))},dependencies:[hn,Lae,w1],styles:[".overdue-task[_ngcontent-%COMP%]{color:#f5222d}"]});let e=t;return e})();function JOe(e,t){e&1&&(V(0,"h1"),I(1,"Create a New Task"),_())}function ePe(e,t){if(e&1&&(V(0,"h1"),I(1),_()),e&2){let n=qe();O(),ze("Edit Task: ",n.model.Name,"")}}function tPe(e,t){if(e&1&&(b1(0),V(1,"option",13),I(2),_(),M1()),e&2){let n=t.$implicit;O(),se("value",n.Id),O(),Hn(n.Name)}}var Sw=(()=>{let t=class t extends U6{constructor(r,i,o){super(),this.api=r,this.goalApi=i,this.router=o,this.goals$=new Pn([])}ngOnInit(){this.goalApi.listGoals().pipe(ye(1)).subscribe(r=>this.goals$.next(r.data.map(i=>new ur(i))))}submitForm(){let r=new no(this.model);if(this.creating){this.api.createTask(r).pipe(ye(1)).subscribe(()=>this.router.navigate(["/tasks"]));return}this.api.updateTask(r).pipe(ye(1)).subscribe(()=>this.router.navigate(r.ViewUrl))}updateImportance(r){let i=r.target.value;this.model.Importance=parseInt(i,10)}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString()}};t.\u0275fac=function(i){return new(i||t)(W(f2),W(Kn),W(Qt))},t.\u0275cmp=xe({type:t,selectors:[["app-task-form"]],standalone:!0,features:[cr,Ce],decls:32,vars:8,consts:[[1,"uk-form-label"],["name","name","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["name","description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],[1,"uk-select",3,"change"],["value","1","selected",""],["value","2"],["value","3"],["value","4"],["value","5"],["name","associated-goal",1,"uk-select",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","date",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"],[3,"value"]],template:function(i,o){i&1&&(Xe(0,JOe,2,0,"h1")(1,ePe,2,1),V(2,"form")(3,"label",0),I(4," Task Name "),V(5,"input",1),Yt("ngModelChange",function(s){return tn(o.model.Name,s)||(o.model.Name=s),s}),_()(),V(6,"label",0),I(7," Task Description "),V(8,"textarea",2),Yt("ngModelChange",function(s){return tn(o.model.Description,s)||(o.model.Description=s),s}),_()(),V(9,"label",0),I(10," Importance "),V(11,"select",3),Re("change",function(s){return o.updateImportance(s)}),V(12,"option",4),I(13,"Low"),_(),V(14,"option",5),I(15,"Low-Medium"),_(),V(16,"option",6),I(17,"Medium"),_(),V(18,"option",7),I(19,"Medium-High"),_(),V(20,"option",8),I(21,"High"),_()()(),V(22,"label",0),I(23," Associated Goal "),V(24,"select",9),Yt("ngModelChange",function(s){return tn(o.model.Goal,s)||(o.model.Goal=s),s}),Xe(25,tPe,3,2,"ng-container",10),mi(26,"async"),_()(),V(27,"label",0),I(28," Complete By "),V(29,"input",11),Re("change",function(s){return o.updateCompleteBy(s)}),_()(),V(30,"button",12),Re("click",function(){return o.submitForm()}),I(31),_()()),i&2&&(hi(0,o.creating?0:1),O(5),Wt("ngModel",o.model.Name),O(3),Wt("ngModel",o.model.Description),O(16),Wt("ngModel",o.model.Goal),O(),se("ngForOf",gi(26,6,o.goals$)),O(6),ze(" ",o.creating?"Create":"Update"," Task "))},dependencies:[Mr,_a,Rg,Og,S1,$6,xi,Na,Wr,w2,vi,F9]});let e=t;return e})();var Vae=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-new-task-page"]],standalone:!0,features:[Ce],decls:1,vars:1,consts:[[3,"creating"]],template:function(i,o){i&1&&gt(0,"app-task-form",0),i&2&&se("creating",!0)},dependencies:[Sw],encapsulation:2});let e=t;return e})();function nPe(e,t){if(e&1&&(V(0,"pre",4),I(1),_()),e&2){let n=qe();O(),Hn(n.model==null?null:n.model.Description)}}var Nae=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.goalApi=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(ye(1)).subscribe(i=>{this.model=new no(i.data),this.goalApi.getGoal(this.model?.Goal).pipe(ye(1)).subscribe(o=>{this.goalModel=new ur(o.data)})})}};t.\u0275fac=function(i){return new(i||t)(W(f2),W(Nt),W(Kn))},t.\u0275cmp=xe({type:t,selectors:[["app-task-page"]],standalone:!0,features:[Ce],decls:16,vars:13,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right","uk-margin-small-top",3,"routerLink"],[1,"uk-button-danger","uk-button","uk-margin-small-top",3,"routerLink"],["class","uk-text-default"],[3,"routerLink"],[1,"uk-text-default"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),_(),V(2,"button",0),I(3),_(),V(4,"button",1),I(5),_(),Xe(6,nPe,2,1,"pre",2),V(7,"p"),I(8),_(),V(9,"p"),I(10),mi(11,"date"),_(),V(12,"p"),I(13," Associated Goal: "),V(14,"a",3),I(15),_()()),i&2&&(O(),K8(" Task: ",o.model==null?null:o.model.Name," (",o.model!=null&&o.model.Completed?"Completed":"Incomplete",`)
`),O(),se("routerLink",o.model==null?null:o.model.EditUrl),O(),ze(" Edit: ",o.model==null?null:o.model.Name,`
`),O(),se("routerLink",o.model==null?null:o.model.DeleteUrl),O(),ze(" Delete: ",o.model==null?null:o.model.Name,`
`),O(),hi(6,o.model!=null&&o.model.Description?6:-1),O(2),ze("Importance: ",o.model==null?null:o.model.ImportanceHuman,""),O(2),ze("Complete By: ",gi(11,11,o.model==null?null:o.model.CompleteBy),""),O(4),se("routerLink",o.goalModel==null?null:o.goalModel.ViewUrl),O(),ze(" ",o.goalModel==null?null:o.goalModel.Name," "))},dependencies:[hn,Vo],encapsulation:2});let e=t;return e})();var d2=class extends ka{constructor(t){super(t)}get ViewUrl(){return["/logbook",this.Id]}get EditUrl(){return["/logbook",this.Id,"edit"]}get DeleteUrl(){return["/logbook",this.Id,"delete"]}};var p2=(()=>{let t=class t extends ko{constructor(r){super(),this.http=r}getLogbooks(){let r=Kt("/logbooks");return this.http.get(r)}getLogbook(r){let i=Kt(`/logbooks/${r}`);return this.http.get(i)}createLogbook(r){let i=Kt("/logbooks");return this.http.post(i,r)}updateLogbook(r){let i=Kt(`/logbooks/${r.Id}`);return this.http.put(i,r)}deleteLogbook(r){let i=Kt(`/logbooks/${r}`);return this.http.delete(i)}};t.\u0275fac=function(i){return new(i||t)(ge(Us))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function rPe(e,t){if(e&1&&(V(0,"tr")(1,"td")(2,"a",4),I(3),_()(),V(4,"td"),I(5),mi(6,"date"),_(),V(7,"td")(8,"a",5),I(9," View "),_()()()),e&2){let n=t.$implicit;O(2),se("routerLink",n.ViewUrl),O(),ze(" ",n.Name," "),O(2),Hn(gi(6,4,n.CreatedAt)),O(3),se("routerLink",n.ViewUrl)}}var _ae=(()=>{let t=class t{constructor(r){this.api=r,this.logbooks=[]}ngOnInit(){this.api.getLogbooks().pipe(ye(1)).subscribe(r=>{this.logbooks=r.data.map(i=>new d2(i))})}};t.\u0275fac=function(i){return new(i||t)(W(p2))},t.\u0275cmp=xe({type:t,selectors:[["app-list"]],standalone:!0,features:[Ce],decls:19,vars:1,consts:[[1,"list-header"],["routerLink","/logbook/new",1,"uk-button","uk-button-primary"],[1,"uk-table"],[4,"ngFor","ngForOf"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"]],template:function(i,o){i&1&&(V(0,"div",0)(1,"h1"),I(2,"Logbook"),_(),V(3,"section")(4,"nav")(5,"a",1),I(6,"New Entry"),_()()()(),V(7,"section")(8,"table",2)(9,"thead")(10,"tr")(11,"th"),I(12,"Name"),_(),V(13,"th"),I(14,"Created"),_(),V(15,"th"),I(16,"Action"),_()()(),V(17,"tbody"),Xe(18,rPe,10,6,"tr",3),_()()()),i&2&&(O(18),se("ngForOf",o.logbooks))},dependencies:[hn,vi,Vo]});let e=t;return e})();var kae=(()=>{let t=class t{constructor(r,i){this.router=r,this.api=i,this.model={CreatedAt:new Date().toLocaleDateString()}}submitForm(){let r=new d2(this.model);this.api.createLogbook(r).subscribe(()=>this.router.navigateByUrl("/logbook"))}};t.\u0275fac=function(i){return new(i||t)(W(Qt),W(p2))},t.\u0275cmp=xe({type:t,selectors:[["app-new"]],standalone:!0,features:[Ce],decls:12,vars:2,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","20",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(V(0,"h1"),I(1,"New Logbook"),_(),V(2,"form",0,1)(4,"label",2),I(5,"Logbook Name"),_(),V(6,"input",3),Yt("ngModelChange",function(s){return tn(o.model.Name,s)||(o.model.Name=s),s}),_(),V(7,"label",4),I(8," Content "),_(),V(9,"textarea",5),Yt("ngModelChange",function(s){return tn(o.model.Content,s)||(o.model.Content=s),s}),_(),V(10,"button",6),Re("click",function(){return o.submitForm()}),I(11," Add Logbook Entry "),_()()),i&2&&(O(6),Wt("ngModel",o.model.Name),O(3),Wt("ngModel",o.model.Content))},dependencies:[Mr,_a,S1,xi,Na,Wr,w2]});let e=t;return e})();function iPe(e,t){if(e&1&&(V(0,"pre"),I(1),_()),e&2){let n=qe();O(),Hn(n.model==null?null:n.model.Content)}}function oPe(e,t){e&1&&(V(0,"p"),I(1,"No content"),_())}var Tae=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getLogbook(r).pipe(ye(1)).subscribe(i=>{this.model=new d2(i.data)})}};t.\u0275fac=function(i){return new(i||t)(W(p2),W(Nt))},t.\u0275cmp=xe({type:t,selectors:[["app-show"]],standalone:!0,features:[Ce],decls:12,vars:9,consts:[[1,"uk-button","uk-button-secondary","uk-margin-small-right",3,"routerLink"],[1,"uk-button","uk-button-danger",3,"routerLink"],[1,"uk-text-default"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),_(),V(2,"button",0),I(3),_(),V(4,"button",1),I(5),_(),V(6,"div",2),I(7),mi(8,"date"),_(),gt(9,"hr"),Xe(10,iPe,2,1,"pre")(11,oPe,2,0)),i&2&&(O(),Hn(o.model==null?null:o.model.Name),O(),se("routerLink",o.model==null?null:o.model.EditUrl),O(),ze(" Edit: ",o.model==null?null:o.model.Name,`
`),O(),se("routerLink",o.model==null?null:o.model.DeleteUrl),O(),ze(" Delete: ",o.model==null?null:o.model.Name,`
`),O(2),ze("Created: ",gi(8,7,o.model==null?null:o.model.CreatedAt),""),O(3),hi(10,o.model!=null&&o.model.Content?10:11))},dependencies:[hn,Vo]});let e=t;return e})();var Iae=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getLogbook(r).pipe(ye(1)).subscribe(i=>{this.model=new d2(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteLogbook(this.model?.Id).pipe(ye(1)).subscribe(()=>this.router.navigateByUrl("/logbook"))}};t.\u0275fac=function(i){return new(i||t)(W(p2),W(Nt),W(Qt))},t.\u0275cmp=xe({type:t,selectors:[["app-delete"]],standalone:!0,features:[Ce],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),_(),V(2,"p"),I(3,` Deleting this model will make it unrecoverable.
`),_(),V(4,"button",0),Re("click",function(){return o.deleteModel()}),I(5),_()),i&2&&(O(),ze("Delete ",o.model==null?null:o.model.Name,"?"),O(4),ze(" Delete ",o.model==null?null:o.model.Name,`
`))}});let e=t;return e})();var Fae=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(ye(1)).subscribe(i=>{this.model=i.data})}};t.\u0275fac=function(i){return new(i||t)(W(Kn),W(Nt))},t.\u0275cmp=xe({type:t,selectors:[["app-update"]],standalone:!0,features:[Ce],decls:1,vars:2,consts:[[3,"creating","model"]],template:function(i,o){i&1&&gt(0,"app-goal-form",0),i&2&&se("creating",!1)("model",o.model)},dependencies:[$g],encapsulation:2});let e=t;return e})();var Rae=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(ye(1)).subscribe(i=>{this.model=i.data})}};t.\u0275fac=function(i){return new(i||t)(W(To),W(Nt))},t.\u0275cmp=xe({type:t,selectors:[["app-update"]],standalone:!0,features:[Ce],decls:1,vars:2,consts:[[3,"creating","model"]],template:function(i,o){i&1&&gt(0,"app-habit-form",0),i&2&&se("creating",!1)("model",o.model)},dependencies:[ww],encapsulation:2});let e=t;return e})();var Oae=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(ye(1)).subscribe(i=>{this.model=i.data})}};t.\u0275fac=function(i){return new(i||t)(W(f2),W(Nt))},t.\u0275cmp=xe({type:t,selectors:[["app-update"]],standalone:!0,features:[Ce],decls:1,vars:2,consts:[[3,"creating","model"]],template:function(i,o){i&1&&gt(0,"app-task-form",0),i&2&&se("creating",!1)("model",o.model)},dependencies:[Sw],encapsulation:2});let e=t;return e})();var Pae=(()=>{let t=class t{constructor(r){this.configService=r,this.customServerUrl=this.configService.getCustomServerUrl()??"",this.formFeedback=""}saveCustomServerUrl(){this.customServerUrl?(this.configService.setCustomServerUrl(this.customServerUrl),this.formFeedback="Custom server URL saved!"):this.formFeedback="Please enter a valid server URL."}clearCustomServerUrl(){this.customServerUrl="",this.configService.clearCustomServerUrl(),this.formFeedback="Custom server URL cleared!"}};t.\u0275fac=function(i){return new(i||t)(W(B6))},t.\u0275cmp=xe({type:t,selectors:[["app-configure"]],standalone:!0,features:[Ce],decls:28,vars:2,consts:[["href","https://github.com/hudson-newey/habit-tracker/tree/main/server"],["href","https://github.com/hudson-newey/habit-tracker"],["type","text","placeholder","Server URL",1,"uk-input",3,"ngModel","ngModelChange"],[1,"action-buttons"],["id","save-server-button",1,"uk-button","uk-button-primary",3,"click"],["id","remove-server-button",1,"uk-button","uk-button-danger",3,"click"],[1,"uk-text-secondary"]],template:function(i,o){i&1&&(V(0,"h1"),I(1,"Configure"),_(),V(2,"p"),I(3," This web app is intended to be used with the GoLang API found "),V(4,"a",0),I(5,"on GitHub"),_(),I(6,`.
`),_(),V(7,"p"),I(8,` It is possible to use this app without the API, but you will not be able to sync your Todo items and Habits between devices.
`),_(),V(9,"p"),I(10," You are free to use this GitHub pages hosted version of the application with your own hosted server (or without) by inputting the custom URL below, or you can host your own instance of the server, client and mobile application using the code available "),V(11,"a",1),I(12,"here"),_(),I(13,`.
`),_(),V(14,"section")(15,"h2"),I(16,"Custom Server URL"),_(),V(17,"p"),I(18," If you are using a custom server, please input the URL below. If you are using the habit tracker without device syncing, you can leave this blank. "),_(),V(19,"input",2),Yt("ngModelChange",function(s){return tn(o.customServerUrl,s)||(o.customServerUrl=s),s}),_(),V(20,"div",3)(21,"button",4),Re("click",function(){return o.saveCustomServerUrl()}),I(22," Save "),_(),V(23,"button",5),Re("click",function(){return o.clearCustomServerUrl()}),I(24," Remove Server "),_()(),gt(25,"div"),V(26,"p",6),I(27),_()()),i&2&&(O(19),Wt("ngModel",o.customServerUrl),O(8),Hn(o.formFeedback))},dependencies:[Mr,S1,xi,Wr],styles:[".action-buttons[_ngcontent-%COMP%]{margin-top:.5rem}.action-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:.5rem}"]});let e=t;return e})();var $ae=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getLogbook(r).pipe(ye(1)).subscribe(i=>{this.model=i.data})}submitForm(){let r=new d2(this.model);this.api.updateLogbook(r).pipe(ye(1)).subscribe(()=>{this.router.navigate(r.ViewUrl)})}};t.\u0275fac=function(i){return new(i||t)(W(p2),W(Nt),W(Qt))},t.\u0275cmp=xe({type:t,selectors:[["app-edit"]],standalone:!0,features:[Ce],decls:12,vars:3,consts:[["action",""],["ngForm",""],["for","logbook-name-input",1,"uk-form-label"],["id","logbook-name-input","name","logbook-name-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","logbook-content-input",1,"uk-form-label"],["id","logbook-content-input","name","logbook-content-input","rows","20",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(V(0,"h1"),I(1),_(),V(2,"form",0,1)(4,"label",2),I(5,"Logbook Name"),_(),V(6,"input",3),Yt("ngModelChange",function(s){return tn(o.model.Name,s)||(o.model.Name=s),s}),_(),V(7,"label",4),I(8,"Logbook Content"),_(),V(9,"textarea",5),Yt("ngModelChange",function(s){return tn(o.model.Content,s)||(o.model.Content=s),s}),_(),V(10,"button",6),Re("click",function(){return o.submitForm()}),I(11," Update Logbook Entry "),_()()),i&2&&(O(),ze("Edit: ",o.model.Name,""),O(5),Wt("ngModel",o.model.Name),O(3),Wt("ngModel",o.model.Content))},dependencies:[Mr,_a,S1,xi,Na,Wr,w2]});let e=t;return e})();var aPe=[{path:"goals",component:Lq},{path:"goals/new",component:Aq},{path:"goals/:id",component:Hq},{path:"goals/:id/delete",component:zq},{path:"goals/:id/edit",component:Fae},{path:"",component:Eae},{path:"habits/new",component:Dae},{path:"habits/:id",component:Mae},{path:"habits/:id/delete",component:Vq},{path:"habits/:id/edit",component:Rae},{path:"tasks",component:Aae},{path:"tasks/new",component:Vae},{path:"tasks/:id",component:Nae},{path:"tasks/:id/delete",component:Hae},{path:"tasks/:id/edit",component:Oae},{path:"logbook",component:_ae},{path:"logbook/new",component:kae},{path:"logbook/:id",component:Tae},{path:"logbook/:id/delete",component:Iae},{path:"logbook/:id/edit",component:$ae},{path:"schedule",component:zae},{path:"configure",component:Pae}],Bae=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=qi({type:t}),t.\u0275inj=Gi({imports:[Ez.forRoot(aPe),Ez]});let e=t;return e})();var Ew=(()=>{let t=class t extends ko{constructor(){super()}applyApiRequest(r){let i=r.url.split("/")[1],o=Number(r.url.split("/")[2]),a=r.body;localStorage.getItem(i)===null&&this.updateTable(i,"[]");let s=this.tableValue(i);if(r.method==="GET"&&o){if(i==="goals"&&r.url.split("/").length>3){let l=r.url.split("/")[3];return this.tableValue(l).filter(f=>f.Goal===String(o))}return s.find(l=>l.Id===o)}if(r.method==="POST"){let l=JSON.parse(JSON.stringify(a));l.Id=this.nextTableId(i),s.push(l),this.updateTable(i,JSON.stringify(s))}if(r.method==="DELETE"){let l=s.findIndex(u=>u.Id===o);s.splice(l,1),this.updateTable(i,JSON.stringify(s))}if(r.method==="PUT"){let l=s.findIndex(u=>u.Id===o);s[l]=a,this.updateTable(i,JSON.stringify(s))}return this.tableValue(i)}tableValue(r){return JSON.parse(localStorage.getItem(r))??[]}nextTableId(r){let i=this.tableValue(r);return i.length===0?1:Math.max(...i.map(o=>o.Id))+1}updateTable(r,i){localStorage.removeItem(r),localStorage.setItem(r,i)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Uae=(()=>{let t=class t{constructor(r,i){this.config=r,this.virtualDb=i}intercept(r,i){if(this.config.isCustomServerUrlSet())return i.handle(r);let o=this.virtualDb.applyApiRequest(r);return Te(new w6({status:200,body:{data:o}}))}};t.\u0275fac=function(i){return new(i||t)(ge(B6),ge(Ew))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();var cPe=[To,Kn,f2,B6,p2,Ew];oU(ej,{providers:[NE(R9,sU,Bae,Mr,nq),{provide:LD,useClass:Uae,multi:!0},...cPe,QB(KB())]}).catch(e=>console.error(e));
