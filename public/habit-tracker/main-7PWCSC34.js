var Yae=Object.create;var Xh=Object.defineProperty,Xae=Object.defineProperties,Qae=Object.getOwnPropertyDescriptor,Kae=Object.getOwnPropertyDescriptors,Zae=Object.getOwnPropertyNames,Yh=Object.getOwnPropertySymbols,Jae=Object.getPrototypeOf,Hw=Object.prototype.hasOwnProperty,JR=Object.prototype.propertyIsEnumerable;var zw=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e);var ZR=(e,t,n)=>t in e?Xh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x=(e,t)=>{for(var n in t||={})Hw.call(t,n)&&ZR(e,n,t[n]);if(Yh)for(var n of Yh(t))JR.call(t,n)&&ZR(e,n,t[n]);return e},k=(e,t)=>Xae(e,Kae(t));var I4=e=>typeof e=="symbol"?e:e+"",ie=(e,t)=>{var n={};for(var r in e)Hw.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Yh)for(var r of Yh(e))t.indexOf(r)<0&&JR.call(e,r)&&(n[r]=e[r]);return n};var ese=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),br=(e,t)=>{for(var n in t)Xh(e,n,{get:t[n],enumerable:!0})},tse=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Zae(t))!Hw.call(e,i)&&i!==n&&Xh(e,i,{get:()=>t[i],enumerable:!(r=Qae(t,i))||r.enumerable});return e};var nse=(e,t,n)=>(n=e!=null?Yae(Jae(e)):{},tse(t||!e||!e.__esModule?Xh(n,"default",{value:e,enumerable:!0}):n,e));var qt=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{s(n.next(c))}catch(l){i(l)}},a=c=>{try{s(n.throw(c))}catch(l){i(l)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);s((n=n.apply(e,t)).next())}),rse=function(e,t){this[0]=e,this[1]=t};var eO=e=>{var t=e[zw("asyncIterator")],n=!1,r,i={};return t==null?(t=e[zw("iterator")](),r=o=>i[o]=a=>t[o](a)):(t=t.call(e),r=o=>i[o]=a=>{if(n){if(n=!1,o==="throw")throw a;return a}return n=!0,{done:!1,value:new rse(new Promise(s=>{var c=t[o](a);if(!(c instanceof Object))throw TypeError("Object expected");s(c)}),1)}}),i[zw("iterator")]=()=>i,r("next"),"throw"in t?r("throw"):i.throw=o=>{throw o},"return"in t&&r("return"),i};var rG=ese((QYe,nG)=>{"use strict";var A7e=/("(?:[^\\"]|\\.)*")|[:,]/g;nG.exports=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function a(s,c,l){var u,f,d,p,h,m,g,v,y,C,b,M;if(s&&typeof s.toJSON=="function"&&(s=s.toJSON()),b=JSON.stringify(s,o),b===void 0)return b;if(g=i-c.length-l,b.length<=g&&(y=b.replace(A7e,function(S,w){return w||S+" "}),y.length<=g))return y;if(o!=null&&(s=JSON.parse(b),o=void 0),typeof s=="object"&&s!==null){if(v=c+r,d=[],f=0,Array.isArray(s))for(C="[",u="]",g=s.length;f<g;f++)d.push(a(s[f],v,f===g-1?0:1)||"null");else for(C="{",u="}",m=Object.keys(s),g=m.length;f<g;f++)p=m[f],h=JSON.stringify(p)+": ",M=a(s[p],v,h.length+(f===g-1?0:1)),M!==void 0&&d.push(h+M);if(d.length>0)return[C,r+d.join(`,
`+v),u].join(`
`+c)}return b}(t,"",0)}});var tO=null;var Lw=1,Aw=Symbol("SIGNAL");function Oi(e){let t=tO;return tO=e,t}var nO={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ise(e){if(!(_w(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Lw)){if(!e.producerMustRecompute(e)&&!Vw(e)){e.dirty=!1,e.lastCleanEpoch=Lw;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Lw}}function rO(e){return e&&(e.nextProducerIndex=0),Oi(e)}function iO(e,t){if(Oi(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(_w(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Nw(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Vw(e){Qh(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(ise(n),r!==n.version))return!0}return!1}function oO(e){if(Qh(e),_w(e))for(let t=0;t<e.producerNode.length;t++)Nw(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Nw(e,t){if(ose(e),Qh(e),e.liveConsumerNode.length===1)for(let r=0;r<e.producerNode.length;r++)Nw(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Qh(i),i.producerIndexOfThis[r]=t}}function _w(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Qh(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function ose(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function ase(){throw new Error}var sse=ase;function aO(e){sse=e}function qe(e){return typeof e=="function"}function Y0(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Kh=Y0(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function V8(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var lr=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(qe(r))try{r()}catch(o){t=o instanceof Kh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{sO(o)}catch(a){t=t??[],a instanceof Kh?t=[...t,...a.errors]:t.push(a)}}if(t)throw new Kh(t)}}add(t){var n;if(t&&t!==this)if(this.closed)sO(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&V8(n,t)}remove(t){let{_finalizers:n}=this;n&&V8(n,t),t instanceof e&&t._removeParent(this)}};lr.EMPTY=(()=>{let e=new lr;return e.closed=!0,e})();var kw=lr.EMPTY;function Zh(e){return e instanceof lr||e&&"closed"in e&&qe(e.remove)&&qe(e.add)&&qe(e.unsubscribe)}function sO(e){qe(e)?e():e.unsubscribe()}var m2={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var X0={setTimeout(e,t,...n){let{delegate:r}=X0;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=X0;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Jh(e){X0.setTimeout(()=>{let{onUnhandledError:t}=m2;if(t)t(e);else throw e})}function N8(){}var cO=Tw("C",void 0,void 0);function lO(e){return Tw("E",void 0,e)}function uO(e){return Tw("N",e,void 0)}function Tw(e,t,n){return{kind:e,value:t,error:n}}var F4=null;function Q0(e){if(m2.useDeprecatedSynchronousErrorHandling){let t=!F4;if(t&&(F4={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=F4;if(F4=null,n)throw r}}else e()}function fO(e){m2.useDeprecatedSynchronousErrorHandling&&F4&&(F4.errorThrown=!0,F4.error=e)}var R4=class extends lr{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Zh(t)&&t.add(this)):this.destination=use}static create(t,n,r){return new K0(t,n,r)}next(t){this.isStopped?Fw(uO(t),this):this._next(t)}error(t){this.isStopped?Fw(lO(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Fw(cO,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},cse=Function.prototype.bind;function Iw(e,t){return cse.call(e,t)}var Rw=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){em(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){em(r)}else em(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){em(n)}}},K0=class extends R4{constructor(t,n,r){super();let i;if(qe(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&m2.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Iw(t.next,o),error:t.error&&Iw(t.error,o),complete:t.complete&&Iw(t.complete,o)}):i=t}this.destination=new Rw(i)}};function em(e){m2.useDeprecatedSynchronousErrorHandling?fO(e):Jh(e)}function lse(e){throw e}function Fw(e,t){let{onStoppedNotification:n}=m2;n&&X0.setTimeout(()=>n(e,t))}var use={closed:!0,next:N8,error:lse,complete:N8};var Z0=typeof Symbol=="function"&&Symbol.observable||"@@observable";function X1(e){return e}function Ow(...e){return Pw(e)}function Pw(e){return e.length===0?X1:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var Ct=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=dse(n)?n:new K0(n,r,i);return Q0(()=>{let{operator:a,source:s}=this;o.add(a?a.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=dO(r),new r((i,o)=>{let a=new K0({next:s=>{try{n(s)}catch(c){o(c),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Z0](){return this}pipe(...n){return Pw(n)(this)}toPromise(n){return n=dO(n),new n((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return e.create=t=>new e(t),e})();function dO(e){var t;return(t=e??m2.Promise)!==null&&t!==void 0?t:Promise}function fse(e){return e&&qe(e.next)&&qe(e.error)&&qe(e.complete)}function dse(e){return e&&e instanceof R4||fse(e)&&Zh(e)}function $w(e){return qe(e?.lift)}function dt(e){return t=>{if($w(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ct(e,t,n,r,i){return new Bw(e,t,n,r,i)}var Bw=class extends R4{constructor(t,n,r,i,o,a){super(t),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(s){try{n(s)}catch(c){t.error(c)}}:super._next,this._error=i?function(s){try{i(s)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(s){t.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function J0(){return dt((e,t)=>{let n=null;e._refCount++;let r=ct(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var e6=class extends Ct{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,$w(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new lr;let n=this.getSubject();t.add(this.source.subscribe(ct(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=lr.EMPTY)}return t}refCount(){return J0()(this)}};var pO=Y0(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var m1=(()=>{class e extends Ct{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new tm(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new pO}next(n){Q0(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Q0(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Q0(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?kw:(this.currentObservers=null,o.push(n),new lr(()=>{this.currentObservers=null,V8(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Ct;return n.source=this,n}}return e.create=(t,n)=>new tm(t,n),e})(),tm=class extends m1{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:kw}};var On=class extends m1{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var So=new Ct(e=>e.complete());function hO(e){return e&&qe(e.schedule)}function mO(e){return e[e.length-1]}function nm(e){return qe(mO(e))?e.pop():void 0}function Jc(e){return hO(mO(e))?e.pop():void 0}function vO(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(e,t||[])).next())})}function gO(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function O4(e){return this instanceof O4?(this.v=e,this):new O4(e)}function yO(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(d){r[d]&&(i[d]=function(p){return new Promise(function(h,m){o.push([d,p,h,m])>1||s(d,p)})})}function s(d,p){try{c(r[d](p))}catch(h){f(o[0][3],h)}}function c(d){d.value instanceof O4?Promise.resolve(d.value.v).then(l,u):f(o[0][2],d)}function l(d){s("next",d)}function u(d){s("throw",d)}function f(d,p){d(p),o.shift(),o.length&&s(o[0][0],o[0][1])}}function xO(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof gO=="function"?gO(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(s,c){a=e[o](a),i(s,c,a.done,a.value)})}}function i(o,a,s,c){Promise.resolve(c).then(function(l){o({value:l,done:s})},a)}}var rm=e=>e&&typeof e.length=="number"&&typeof e!="function";function im(e){return qe(e?.then)}function om(e){return qe(e[Z0])}function am(e){return Symbol.asyncIterator&&qe(e?.[Symbol.asyncIterator])}function sm(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function pse(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var cm=pse();function lm(e){return qe(e?.[cm])}function um(e){return yO(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield O4(n.read());if(i)return yield O4(void 0);yield yield O4(r)}}finally{n.releaseLock()}})}function fm(e){return qe(e?.getReader)}function Xn(e){if(e instanceof Ct)return e;if(e!=null){if(om(e))return hse(e);if(rm(e))return mse(e);if(im(e))return gse(e);if(am(e))return CO(e);if(lm(e))return vse(e);if(fm(e))return yse(e)}throw sm(e)}function hse(e){return new Ct(t=>{let n=e[Z0]();if(qe(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function mse(e){return new Ct(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function gse(e){return new Ct(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Jh)})}function vse(e){return new Ct(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function CO(e){return new Ct(t=>{xse(e,t).catch(n=>t.error(n))})}function yse(e){return CO(um(e))}function xse(e,t){var n,r,i,o;return vO(this,void 0,void 0,function*(){try{for(n=xO(e);r=yield n.next(),!r.done;){let a=r.value;if(t.next(a),t.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function g1(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function dm(e,t=0){return dt((n,r)=>{n.subscribe(ct(r,i=>g1(r,e,()=>r.next(i),t),()=>g1(r,e,()=>r.complete(),t),i=>g1(r,e,()=>r.error(i),t)))})}function pm(e,t=0){return dt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function bO(e,t){return Xn(e).pipe(pm(t),dm(t))}function MO(e,t){return Xn(e).pipe(pm(t),dm(t))}function wO(e,t){return new Ct(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function SO(e,t){return new Ct(n=>{let r;return g1(n,t,()=>{r=e[cm](),g1(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){n.error(a);return}o?n.complete():n.next(i)},0,!0)}),()=>qe(r?.return)&&r.return()})}function hm(e,t){if(!e)throw new Error("Iterable cannot be null");return new Ct(n=>{g1(n,t,()=>{let r=e[Symbol.asyncIterator]();g1(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function EO(e,t){return hm(um(e),t)}function DO(e,t){if(e!=null){if(om(e))return bO(e,t);if(rm(e))return wO(e,t);if(im(e))return MO(e,t);if(am(e))return hm(e,t);if(lm(e))return SO(e,t);if(fm(e))return EO(e,t)}throw sm(e)}function Zt(e,t){return t?DO(e,t):Xn(e)}function se(...e){let t=Jc(e);return Zt(e,t)}function t6(e,t){let n=qe(e)?e:()=>e,r=i=>i.error(n());return new Ct(t?i=>t.schedule(r,0,i):r)}function Uw(e){return!!e&&(e instanceof Ct||qe(e.lift)&&qe(e.subscribe))}var Ds=Y0(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Qe(e,t){return dt((n,r)=>{let i=0;n.subscribe(ct(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:Cse}=Array;function bse(e,t){return Cse(t)?e(...t):e(t)}function mm(e){return Qe(t=>bse(e,t))}var{isArray:Mse}=Array,{getPrototypeOf:wse,prototype:Sse,keys:Ese}=Object;function gm(e){if(e.length===1){let t=e[0];if(Mse(t))return{args:t,keys:null};if(Dse(t)){let n=Ese(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function Dse(e){return e&&typeof e=="object"&&wse(e)===Sse}function vm(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function _8(...e){let t=Jc(e),n=nm(e),{args:r,keys:i}=gm(e);if(r.length===0)return Zt([],t);let o=new Ct(zse(r,t,i?a=>vm(i,a):X1));return n?o.pipe(mm(n)):o}function zse(e,t,n=X1){return r=>{zO(t,()=>{let{length:i}=e,o=new Array(i),a=i,s=i;for(let c=0;c<i;c++)zO(t,()=>{let l=Zt(e[c],t),u=!1;l.subscribe(ct(r,f=>{o[c]=f,u||(u=!0,s--),s||r.next(n(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function zO(e,t,n){e?g1(n,e,t):t()}function HO(e,t,n,r,i,o,a,s){let c=[],l=0,u=0,f=!1,d=()=>{f&&!c.length&&!l&&t.complete()},p=m=>l<r?h(m):c.push(m),h=m=>{o&&t.next(m),l++;let g=!1;Xn(n(m,u++)).subscribe(ct(t,v=>{i?.(v),o?p(v):t.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<r;){let v=c.shift();a?g1(t,a,()=>h(v)):h(v)}d()}catch(v){t.error(v)}}))};return e.subscribe(ct(t,p,()=>{f=!0,d()})),()=>{s?.()}}function Qn(e,t,n=1/0){return qe(t)?Qn((r,i)=>Qe((o,a)=>t(r,o,i,a))(Xn(e(r,i))),n):(typeof t=="number"&&(n=t),dt((r,i)=>HO(r,i,e,n)))}function e3(e=1/0){return Qn(X1,e)}function LO(){return e3(1)}function n6(...e){return LO()(Zt(e,Jc(e)))}function ym(e){return new Ct(t=>{Xn(e()).subscribe(t)})}function jw(...e){let t=nm(e),{args:n,keys:r}=gm(e),i=new Ct(o=>{let{length:a}=n;if(!a){o.complete();return}let s=new Array(a),c=a,l=a;for(let u=0;u<a;u++){let f=!1;Xn(n[u]).subscribe(ct(o,d=>{f||(f=!0,l--),s[u]=d},()=>c--,void 0,()=>{(!c||!f)&&(l||o.next(r?vm(r,s):s),o.complete())}))}});return t?i.pipe(mm(t)):i}function v1(e,t){return dt((n,r)=>{let i=0;n.subscribe(ct(r,o=>e.call(t,o,i++)&&r.next(o)))})}function t3(e){return dt((t,n)=>{let r=null,i=!1,o;r=t.subscribe(ct(n,void 0,void 0,a=>{o=Xn(e(a,t3(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function AO(e,t,n,r,i){return(o,a)=>{let s=n,c=t,l=0;o.subscribe(ct(a,u=>{let f=l++;c=s?e(c,u,f):(s=!0,u),r&&a.next(c)},i&&(()=>{s&&a.next(c),a.complete()})))}}function zs(e,t){return qe(t)?Qn(e,t,1):Qn(e,1)}function n3(e){return dt((t,n)=>{let r=!1;t.subscribe(ct(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Ce(e){return e<=0?()=>So:dt((t,n)=>{let r=0;t.subscribe(ct(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function qw(e){return Qe(()=>e)}function xm(e=Hse){return dt((t,n)=>{let r=!1;t.subscribe(ct(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function Hse(){return new Ds}function r3(e){return dt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function xa(e,t){let n=arguments.length>=2;return r=>r.pipe(e?v1((i,o)=>e(i,o,r)):X1,Ce(1),n?n3(t):xm(()=>new Ds))}function r6(e){return e<=0?()=>So:dt((t,n)=>{let r=[];t.subscribe(ct(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Gw(e,t){let n=arguments.length>=2;return r=>r.pipe(e?v1((i,o)=>e(i,o,r)):X1,r6(1),n?n3(t):xm(()=>new Ds))}function Ww(e,t){return dt(AO(e,t,arguments.length>=2,!0))}function Yw(...e){let t=Jc(e);return dt((n,r)=>{(t?n6(e,n,t):n6(e,n)).subscribe(r)})}function y1(e,t){return dt((n,r)=>{let i=null,o=0,a=!1,s=()=>a&&!i&&r.complete();n.subscribe(ct(r,c=>{i?.unsubscribe();let l=0,u=o++;Xn(e(c,u)).subscribe(i=ct(r,f=>r.next(t?t(c,f,u,l++):f),()=>{i=null,s()}))},()=>{a=!0,s()}))})}function Xw(e){return dt((t,n)=>{Xn(e).subscribe(ct(n,()=>n.complete(),N8)),!n.closed&&t.subscribe(n)})}function ur(e,t,n){let r=qe(e)||t||n?{next:e,error:t,complete:n}:e;return r?dt((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let s=!0;i.subscribe(ct(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;s=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;s=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;s&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):X1}var CP="https://g.co/ng/security#xss",ye=class extends Error{constructor(t,n){super(Jm(t,n)),this.code=t}};function Jm(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}var dS=class extends m1{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),a=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),a=c.complete?.bind(c)}this.__isAsync&&(o=Qw(o),i&&(i=Qw(i)),a&&(a=Qw(a)));let s=super.subscribe({next:i,error:o,complete:a});return t instanceof lr&&t.add(s),s}};function Qw(e){return t=>{setTimeout(e,void 0,t)}}var Jt=dS;var rt=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(rt||{});function $i(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map($i).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function VO(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var bP=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(bP||{}),Ma=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Ma||{});function W8(e){return{toString:e}.toString()}var Pn=globalThis;var u6={},Eo=[];function Wt(e){for(let t in e)if(e[t]===Wt)return t;throw Error("Could not find renamed property on target object.")}function Lse(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}var Ase=Wt({\u0275cmp:Wt}),Vse=Wt({\u0275dir:Wt}),Nse=Wt({\u0275pipe:Wt}),_se=Wt({\u0275mod:Wt}),_m=Wt({\u0275fac:Wt}),k8=Wt({__NG_ELEMENT_ID__:Wt}),NO=Wt({__NG_ENV_ID__:Wt}),qr=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(qr||{});function MP(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function pS(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],a=n[r++],s=n[r++];e.setAttribute(t,a,s,o)}else{let o=i,a=n[++r];kse(o)?e.setProperty(t,o,a):e.setAttribute(t,o,a),r++}}return r}function wP(e){return e===3||e===4||e===6}function kse(e){return e.charCodeAt(0)===64}function I8(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?_O(e,n,i,null,t[++r]):_O(e,n,i,null,null))}}return e}function _O(e,t,n,r,i){let o=0,a=e.length;if(t===-1)a=-1;else for(;o<e.length;){let s=e[o++];if(typeof s=="number"){if(s===t){a=-1;break}else if(s>t){a=o-1;break}}}for(;o<e.length;){let s=e[o];if(typeof s=="number")break;if(s===n){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}a!==-1&&(e.splice(a,0,t),o=a+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var SP="ng-template";function Tse(e,t,n){let r=0,i=!0;for(;r<e.length;){let o=e[r++];if(typeof o=="string"&&i){let a=e[r++];if(n&&o==="class"&&MP(a.toLowerCase(),t,0)!==-1)return!0}else if(o===1){for(;r<e.length&&typeof(o=e[r++])=="string";)if(o.toLowerCase()===t)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function EP(e){return e.type===4&&e.value!==SP}function Ise(e,t,n){let r=e.type===4&&!n?SP:e.value;return t===r}function Fse(e,t,n){let r=4,i=e.attrs||[],o=Pse(i),a=!1;for(let s=0;s<t.length;s++){let c=t[s];if(typeof c=="number"){if(!a&&!g2(r)&&!g2(c))return!1;if(a&&g2(c))continue;a=!1,r=c|r&1;continue}if(!a)if(r&4){if(r=2|r&1,c!==""&&!Ise(e,c,n)||c===""&&t.length===1){if(g2(r))return!1;a=!0}}else{let l=r&8?c:t[++s];if(r&8&&e.attrs!==null){if(!Tse(e.attrs,l,n)){if(g2(r))return!1;a=!0}continue}let u=r&8?"class":c,f=Rse(u,i,EP(e),n);if(f===-1){if(g2(r))return!1;a=!0;continue}if(l!==""){let d;f>o?d="":d=i[f+1].toLowerCase();let p=r&8?d:null;if(p&&MP(p,l,0)!==-1||r&2&&l!==d){if(g2(r))return!1;a=!0}}}}return g2(r)||a}function g2(e){return(e&1)===0}function Rse(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let a=t[i];if(a===e)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let s=t[++i];for(;typeof s=="string";)s=t[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return $se(t,e)}function DP(e,t,n=!1){for(let r=0;r<t.length;r++)if(Fse(e,t[r],n))return!0;return!1}function Ose(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function Pse(e){for(let t=0;t<e.length;t++){let n=e[t];if(wP(n))return t}return e.length}function $se(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Bse(e,t){e:for(let n=0;n<t.length;n++){let r=t[n];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function kO(e,t){return e?":not("+t.trim()+")":t}function Use(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let a=e[n];if(typeof a=="string")if(r&2){let s=e[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!g2(a)&&(t+=kO(o,i),i=""),r=a,o=o||!g2(r);n++}return i!==""&&(t+=kO(o,i)),t}function jse(e){return e.map(Use).join(",")}function qse(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!g2(i))break;i=o}r++}return{attrs:t,classes:n}}function Le(e){return W8(()=>{let t=VP(e),n=k(x({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===bP.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Ma.Emulated,styles:e.styles||Eo,_:null,schemas:e.schemas||null,tView:null,id:""});NP(n);let r=e.dependencies;return n.directiveDefs=IO(r,!1),n.pipeDefs=IO(r,!0),n.id=Yse(n),n})}function Gse(e){return a3(e)||zP(e)}function Wse(e){return e!==null}function Mr(e){return W8(()=>({type:e.type,bootstrap:e.bootstrap||Eo,declarations:e.declarations||Eo,imports:e.imports||Eo,exports:e.exports||Eo,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function TO(e,t){if(e==null)return u6;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,a,s=qr.None;Array.isArray(i)?(s=i[0],o=i[1],a=i[2]??o):(o=i,a=i),t?(n[o]=s!==qr.None?[r,s]:r,t[o]=a):n[o]=r}return n}function dn(e){return W8(()=>{let t=VP(e);return NP(t),t})}function pE(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone===!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function a3(e){return e[Ase]||null}function zP(e){return e[Vse]||null}function HP(e){return e[Nse]||null}function LP(e){let t=a3(e)||zP(e)||HP(e);return t!==null?t.standalone:!1}function AP(e,t){let n=e[_se]||null;if(!n&&t===!0)throw new Error(`Type ${$i(e)} does not have '\u0275mod' property.`);return n}function VP(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||u6,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Eo,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:TO(e.inputs,t),outputs:TO(e.outputs),debugInfo:null}}function NP(e){e.features?.forEach(t=>t(e))}function IO(e,t){if(!e)return null;let n=t?HP:Gse;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(Wse)}function Yse(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}var _s=0,Ze=1,Pe=2,Gr=3,v2=4,Z1=5,F8=6,R8=7,y2=8,f6=9,Hs=10,Dn=11,O8=12,FO=13,y6=14,x2=15,Y8=16,i6=17,Ls=18,e9=19,_P=20,o3=21,Kw=22,U4=23,K1=25,kP=1;var j4=7,km=8,d6=9,Q1=10,hE=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(hE||{});function $4(e){return Array.isArray(e)&&typeof e[kP]=="object"}function ks(e){return Array.isArray(e)&&e[kP]===!0}function mE(e){return(e.flags&4)!==0}function t9(e){return e.componentOffset>-1}function n9(e){return(e.flags&1)===1}function s3(e){return!!e.template}function Xse(e){return(e[Pe]&512)!==0}var Qse="svg",Kse="math",Zse=!1;function Jse(){return Zse}function wa(e){for(;Array.isArray(e);)e=e[_s];return e}function TP(e,t){return wa(t[e])}function Do(e,t){return wa(t[e.index])}function IP(e,t){return e.data[t]}function FP(e,t){return e[t]}function u3(e,t){let n=t[e];return $4(n)?n:n[_s]}function ece(e){return(e[Pe]&4)===4}function gE(e){return(e[Pe]&128)===128}function tce(e){return ks(e[Gr])}function p6(e,t){return t==null?null:e[t]}function RP(e){e[i6]=0}function nce(e){e[Pe]&1024||(e[Pe]|=1024,gE(e)&&P8(e))}function rce(e,t){for(;e>0;)t=t[y6],e--;return t}function vE(e){return!!(e[Pe]&9216||e[U4]?.dirty)}function hS(e){vE(e)?P8(e):e[Pe]&64&&(Jse()?(e[Pe]|=1024,P8(e)):e[Hs].changeDetectionScheduler?.notify())}function P8(e){e[Hs].changeDetectionScheduler?.notify();let t=$8(e);for(;t!==null&&!(t[Pe]&8192||(t[Pe]|=8192,!gE(t)));)t=$8(t)}function OP(e,t){if((e[Pe]&256)===256)throw new ye(911,!1);e[o3]===null&&(e[o3]=[]),e[o3].push(t)}function ice(e,t){if(e[o3]===null)return;let n=e[o3].indexOf(t);n!==-1&&e[o3].splice(n,1)}function $8(e){let t=e[Gr];return ks(t)?t[Gr]:t}var Je={lFrame:WP(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function oce(){return Je.lFrame.elementDepthCount}function ace(){Je.lFrame.elementDepthCount++}function sce(){Je.lFrame.elementDepthCount--}function PP(){return Je.bindingsEnabled}function $P(){return Je.skipHydrationRootTNode!==null}function cce(e){return Je.skipHydrationRootTNode===e}function lce(){Je.skipHydrationRootTNode=null}function ot(){return Je.lFrame.lView}function Kn(){return Je.lFrame.tView}function zo(e){return Je.lFrame.contextLView=e,e[y2]}function Ho(e){return Je.lFrame.contextLView=null,e}function pi(){let e=BP();for(;e!==null&&e.type===64;)e=e.parent;return e}function BP(){return Je.lFrame.currentTNode}function uce(){let e=Je.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function J4(e,t){let n=Je.lFrame;n.currentTNode=e,n.isParent=t}function yE(){return Je.lFrame.isParent}function xE(){Je.lFrame.isParent=!1}function fce(){return Je.lFrame.contextLView}function CE(){let e=Je.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function dce(){return Je.lFrame.bindingIndex}function pce(e){return Je.lFrame.bindingIndex=e}function X8(){return Je.lFrame.bindingIndex++}function UP(e){let t=Je.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function hce(){return Je.lFrame.inI18n}function mce(e,t){let n=Je.lFrame;n.bindingIndex=n.bindingRootIndex=e,mS(t)}function gce(){return Je.lFrame.currentDirectiveIndex}function mS(e){Je.lFrame.currentDirectiveIndex=e}function vce(e){let t=Je.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function jP(){return Je.lFrame.currentQueryIndex}function bE(e){Je.lFrame.currentQueryIndex=e}function yce(e){let t=e[Ze];return t.type===2?t.declTNode:t.type===1?e[Z1]:null}function qP(e,t,n){if(n&rt.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&rt.Host);)if(i=yce(o),i===null||(o=o[y6],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=Je.lFrame=GP();return r.currentTNode=t,r.lView=e,!0}function ME(e){let t=GP(),n=e[Ze];Je.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function GP(){let e=Je.lFrame,t=e===null?null:e.child;return t===null?WP(e):t}function WP(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function YP(){let e=Je.lFrame;return Je.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var XP=YP;function wE(){let e=YP();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function xce(e){return(Je.lFrame.contextLView=rce(e,Je.lFrame.contextLView))[y2]}function el(){return Je.lFrame.selectedIndex}function q4(e){Je.lFrame.selectedIndex=e}function r9(){let e=Je.lFrame;return IP(e.tView,e.selectedIndex)}function Cce(){return Je.lFrame.currentNamespace}var QP=!0;function i9(){return QP}function o9(e){QP=e}function bce(){return x6(pi(),ot())}function x6(e,t){return new Wr(Do(e,t))}var Wr=(()=>{let t=class t{constructor(r){this.nativeElement=r}};t.__NG_ELEMENT_ID__=bce;let e=t;return e})();function Mce(e){return e instanceof Wr?e.nativeElement:e}function wce(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function Sce(e){return e.flat(Number.POSITIVE_INFINITY)}function SE(e,t){e.forEach(n=>Array.isArray(n)?SE(n,t):t(n))}function KP(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Tm(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Ece(e,t){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function Dce(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function zce(e,t,n){let r=Q8(e,t);return r>=0?e[r|1]=n:(r=~r,Dce(e,r,t,n)),r}function Zw(e,t){let n=Q8(e,t);if(n>=0)return e[n|1]}function Q8(e,t){return Hce(e,t,1)}function Hce(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),a=e[o<<n];if(t===a)return o<<n;a>t?i=o:r=o+1}return~(i<<n)}function Lce(){return this._results[Symbol.iterator]()}var gS=class e{get changes(){return this._changes??=new Jt}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Lce)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=Sce(t);(this._changesDetected=!wce(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function ZP(e){return(e.flags&128)===128}var vS;function JP(e){vS=e}function e$(){if(vS!==void 0)return vS;if(typeof document<"u")return document;throw new ye(210,!1)}function ue(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function wr(e){return{providers:e.providers||[],imports:e.imports||[]}}function a9(e){return RO(e,n$)||RO(e,r$)}function t$(e){return a9(e)!==null}function RO(e,t){return e.hasOwnProperty(t)?e[t]:null}function Ace(e){let t=e&&(e[n$]||e[r$]);return t||null}function OO(e){return e&&(e.hasOwnProperty(PO)||e.hasOwnProperty(Vce))?e[PO]:null}var n$=Wt({\u0275prov:Wt}),PO=Wt({\u0275inj:Wt}),r$=Wt({ngInjectableDef:Wt}),Vce=Wt({ngInjectorDef:Wt}),De=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ue({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}},s9=new De("",{providedIn:"root",factory:()=>Nce}),Nce="ng",EE=new De(""),Ea=new De("",{providedIn:"platform",factory:()=>"unknown"});var DE=new De("",{providedIn:"root",factory:()=>e$().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var _ce=Wt({__forward_ref__:Wt});function Ts(e){return e.__forward_ref__=Ts,e.toString=function(){return $i(this())},e}function Pi(e){return i$(e)?e():e}function i$(e){return typeof e=="function"&&e.hasOwnProperty(_ce)&&e.__forward_ref__===Ts}function o$(e){return e&&!!e.\u0275providers}function G4(e){return typeof e=="string"?e:e==null?"":String(e)}function kce(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():G4(e)}function Tce(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new ye(-200,e)}function zE(e,t){throw new ye(-201,!1)}var yS;function a$(){return yS}function x1(e){let t=yS;return yS=e,t}function s$(e,t,n){let r=a9(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&rt.Optional)return null;if(t!==void 0)return t;zE(e,"Injector")}var Ice={},B8=Ice,xS="__NG_DI_FLAG__",Im="ngTempTokenPath",Fce="ngTokenPath",Rce=/\n/gm,Oce="\u0275",$O="__source",c6;function Pce(){return c6}function i3(e){let t=c6;return c6=e,t}function $ce(e,t=rt.Default){if(c6===void 0)throw new ye(-203,!1);return c6===null?s$(e,void 0,t):c6.get(e,t&rt.Optional?null:void 0,t)}function ge(e,t=rt.Default){return(a$()||$ce)(Pi(e),t)}function ce(e,t=rt.Default){return ge(e,c9(t))}function c9(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function CS(e){let t=[];for(let n=0;n<e.length;n++){let r=Pi(e[n]);if(Array.isArray(r)){if(r.length===0)throw new ye(900,!1);let i,o=rt.Default;for(let a=0;a<r.length;a++){let s=r[a],c=Bce(s);typeof c=="number"?c===-1?i=s.token:o|=c:i=s}t.push(ge(i,o))}else t.push(ge(r))}return t}function c$(e,t){return e[xS]=t,e.prototype[xS]=t,e}function Bce(e){return e[xS]}function Uce(e,t,n,r){let i=e[Im];throw t[$O]&&i.unshift(t[$O]),e.message=jce(`
`+e.message,i,n,r),e[Fce]=i,e[Im]=null,e}function jce(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==Oce?e.slice(2):e;let i=$i(t);if(Array.isArray(t))i=t.map($i).join(" -> ");else if(typeof t=="object"){let o=[];for(let a in t)if(t.hasOwnProperty(a)){let s=t[a];o.push(a+":"+(typeof s=="string"?JSON.stringify(s):$i(s)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Rce,`
  `)}`}var qce="h",Gce="b";var Wce=()=>null;function HE(e,t,n=!1){return Wce(e,t,n)}var Cm="__parameters__";function Yce(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function l$(e,t,n){return W8(()=>{let r=Yce(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let a=new i(...o);return s.annotation=a,s;function s(c,l,u){let f=c.hasOwnProperty(Cm)?c[Cm]:Object.defineProperty(c,Cm,{value:[]})[Cm];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(a),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var l9=c$(l$("Optional"),8);var LE=c$(l$("SkipSelf"),4);function W4(e,t){let n=e.hasOwnProperty(_m);return n?e[_m]:null}var h6=new De(""),u$=new De("",-1),f$=new De(""),Fm=class{get(t,n=B8){if(n===B8){let r=new Error(`NullInjectorError: No provider for ${$i(t)}!`);throw r.name="NullInjectorError",r}return n}};function u9(e){return{\u0275providers:e}}function Xce(...e){return{\u0275providers:d$(!0,e),\u0275fromNgModule:!0}}function d$(e,...t){let n=[],r=new Set,i,o=a=>{n.push(a)};return SE(t,a=>{let s=a;bS(s,o,[],r)&&(i||=[],i.push(s))}),i!==void 0&&p$(i,o),n}function p$(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];AE(i,o=>{t(o,r)})}}function bS(e,t,n,r){if(e=Pi(e),!e)return!1;let i=null,o=OO(e),a=!o&&a3(e);if(!o&&!a){let c=e.ngModule;if(o=OO(c),o)i=c;else return!1}else{if(a&&!a.standalone)return!1;i=e}let s=r.has(i);if(a){if(s)return!1;if(r.add(i),a.dependencies){let c=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let l of c)bS(l,t,n,r)}}else if(o){if(o.imports!=null&&!s){r.add(i);let l;try{SE(o.imports,u=>{bS(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&p$(l,t)}if(!s){let l=W4(i)||(()=>new i);t({provide:i,useFactory:l,deps:Eo},i),t({provide:f$,useValue:i,multi:!0},i),t({provide:h6,useValue:()=>ge(i),multi:!0},i)}let c=o.providers;if(c!=null&&!s){let l=e;AE(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function AE(e,t){for(let n of e)o$(n)&&(n=n.\u0275providers),Array.isArray(n)?AE(n,t):t(n)}var Qce=Wt({provide:String,useValue:Wt});function h$(e){return e!==null&&typeof e=="object"&&Qce in e}function Kce(e){return!!(e&&e.useExisting)}function Zce(e){return!!(e&&e.useFactory)}function m6(e){return typeof e=="function"}function Jce(e){return!!e.useClass}var f9=new De(""),zm={},e3e={},Jw;function VE(){return Jw===void 0&&(Jw=new Fm),Jw}var Bi=class{},U8=class extends Bi{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wS(t,a=>this.processProvider(a)),this.records.set(u$,o6(void 0,this)),i.has("environment")&&this.records.set(Bi,o6(void 0,this));let o=this.records.get(f9);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(f$,Eo,rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=i3(this),r=x1(void 0),i;try{return t()}finally{i3(n),x1(r)}}get(t,n=B8,r=rt.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(NO))return t[NO](this);r=c9(r);let i,o=i3(this),a=x1(void 0);try{if(!(r&rt.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=o3e(t)&&a9(t);l&&this.injectableDefInScope(l)?c=o6(MS(t),zm):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let s=r&rt.Self?VE():this.parent;return n=r&rt.Optional&&n===B8?null:n,s.get(t,n)}catch(s){if(s.name==="NullInjectorError"){if((s[Im]=s[Im]||[]).unshift($i(t)),o)throw s;return Uce(s,t,"R3InjectorError",this.source)}else throw s}finally{x1(a),i3(o)}}resolveInjectorInitializers(){let t=i3(this),n=x1(void 0),r;try{let i=this.get(h6,Eo,rt.Self);for(let o of i)o()}finally{i3(t),x1(n)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push($i(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ye(205,!1)}processProvider(t){t=Pi(t);let n=m6(t)?t:Pi(t&&t.provide),r=n3e(t);if(!m6(t)&&t.multi===!0){let i=this.records.get(n);i||(i=o6(void 0,zm,!0),i.factory=()=>CS(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===zm&&(n.value=e3e,n.value=n.factory()),typeof n.value=="object"&&n.value&&i3e(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Pi(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function MS(e){let t=a9(e),n=t!==null?t.factory:W4(e);if(n!==null)return n;if(e instanceof De)throw new ye(204,!1);if(e instanceof Function)return t3e(e);throw new ye(204,!1)}function t3e(e){if(e.length>0)throw new ye(204,!1);let n=Ace(e);return n!==null?()=>n.factory(e):()=>new e}function n3e(e){if(h$(e))return o6(void 0,e.useValue);{let t=m$(e);return o6(t,zm)}}function m$(e,t,n){let r;if(m6(e)){let i=Pi(e);return W4(i)||MS(i)}else if(h$(e))r=()=>Pi(e.useValue);else if(Zce(e))r=()=>e.useFactory(...CS(e.deps||[]));else if(Kce(e))r=()=>ge(Pi(e.useExisting));else{let i=Pi(e&&(e.useClass||e.provide));if(r3e(e))r=()=>new i(...CS(e.deps));else return W4(i)||MS(i)}return r}function o6(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function r3e(e){return!!e.deps}function i3e(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function o3e(e){return typeof e=="function"||typeof e=="object"&&e instanceof De}function wS(e,t){for(let n of e)Array.isArray(n)?wS(n,t):n&&o$(n)?wS(n.\u0275providers,t):t(n)}function Da(e,t){e instanceof U8&&e.assertNotDestroyed();let n,r=i3(e),i=x1(void 0);try{return t()}finally{i3(r),x1(i)}}function a3e(e){if(!a$()&&!Pce())throw new ye(-203,!1)}function s3e(e){let t=Pn.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function c3e(e){return typeof e=="function"}var SS=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function g$(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function Lo(){return v$}function v$(e){return e.type.prototype.ngOnChanges&&(e.setInput=u3e),l3e}Lo.ngInherit=!0;function l3e(){let e=x$(this),t=e?.current;if(t){let n=e.previous;if(n===u6)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function u3e(e,t,n,r,i){let o=this.declaredInputs[r],a=x$(e)||f3e(e,{previous:u6,current:null}),s=a.current||(a.current={}),c=a.previous,l=c[o];s[o]=new SS(l&&l.currentValue,n,c===u6),g$(e,t,i,n)}var y$="__ngSimpleChanges__";function x$(e){return e[y$]||null}function f3e(e,t){return e[y$]=t}var BO=null;var Ca=function(e,t,n){BO?.(e,t,n)};function d3e(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let a=v$(t);(n.preOrderHooks??=[]).push(e,a),(n.preOrderCheckHooks??=[]).push(e,a)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function d9(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:s,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;a&&(e.contentHooks??=[]).push(-n,a),s&&((e.contentHooks??=[]).push(n,s),(e.contentCheckHooks??=[]).push(n,s)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Hm(e,t,n){C$(e,t,3,n)}function Lm(e,t,n,r){(e[Pe]&3)===n&&C$(e,t,n,r)}function eS(e,t){let n=e[Pe];(n&3)===t&&(n&=16383,n+=1,e[Pe]=n)}function C$(e,t,n,r){let i=r!==void 0?e[i6]&65535:0,o=r??-1,a=t.length-1,s=0;for(let c=i;c<a;c++)if(typeof t[c+1]=="number"){if(s=t[c],r!=null&&s>=r)break}else t[c]<0&&(e[i6]+=65536),(s<o||o==-1)&&(p3e(e,n,t,c),e[i6]=(e[i6]&4294901760)+c+2),c++}function UO(e,t){Ca(4,e,t);let n=Oi(null);try{t.call(e)}finally{Oi(n),Ca(5,e,t)}}function p3e(e,t,n,r){let i=n[r]<0,o=n[r+1],a=i?-n[r]:n[r],s=e[a];i?e[Pe]>>14<e[i6]>>16&&(e[Pe]&3)===t&&(e[Pe]+=16384,UO(s,o)):UO(s,o)}var l6=-1,Y4=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function h3e(e){return e instanceof Y4}function m3e(e){return(e.flags&8)!==0}function g3e(e){return(e.flags&16)!==0}function b$(e){return e!==l6}function Rm(e){return e&32767}function v3e(e){return e>>16}function Om(e,t){let n=v3e(e),r=t;for(;n>0;)r=r[y6],n--;return r}var ES=!0;function Pm(e){let t=ES;return ES=e,t}var y3e=256,M$=y3e-1,w$=5,x3e=0,ba={};function C3e(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(k8)&&(r=n[k8]),r==null&&(r=n[k8]=x3e++);let i=r&M$,o=1<<i;t.data[e+(i>>w$)]|=o}function $m(e,t){let n=S$(e,t);if(n!==-1)return n;let r=t[Ze];r.firstCreatePass&&(e.injectorIndex=t.length,tS(r.data,e),tS(t,null),tS(r.blueprint,null));let i=NE(e,t),o=e.injectorIndex;if(b$(i)){let a=Rm(i),s=Om(i,t),c=s[Ze].data;for(let l=0;l<8;l++)t[o+l]=s[a+l]|c[a+l]}return t[o+8]=i,o}function tS(e,t){e.push(0,0,0,0,0,0,0,0,t)}function S$(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function NE(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=L$(i),r===null)return l6;if(n++,i=i[y6],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return l6}function DS(e,t,n){C3e(e,t,n)}function b3e(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(wP(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===t)return n[i+1];i=i+2}}}return null}function E$(e,t,n){if(n&rt.Optional||e!==void 0)return e;zE(t,"NodeInjector")}function D$(e,t,n,r){if(n&rt.Optional&&r===void 0&&(r=null),!(n&(rt.Self|rt.Host))){let i=e[f6],o=x1(void 0);try{return i?i.get(t,r,n&rt.Optional):s$(t,r,n&rt.Optional)}finally{x1(o)}}return E$(r,t,n)}function z$(e,t,n,r=rt.Default,i){if(e!==null){if(t[Pe]&2048&&!(r&rt.Self)){let a=E3e(e,t,n,r,ba);if(a!==ba)return a}let o=H$(e,t,n,r,ba);if(o!==ba)return o}return D$(t,n,r,i)}function H$(e,t,n,r,i){let o=w3e(n);if(typeof o=="function"){if(!qP(t,e,r))return r&rt.Host?E$(i,n,r):D$(t,n,r,i);try{let a;if(a=o(r),a==null&&!(r&rt.Optional))zE(n);else return a}finally{XP()}}else if(typeof o=="number"){let a=null,s=S$(e,t),c=l6,l=r&rt.Host?t[x2][Z1]:null;for((s===-1||r&rt.SkipSelf)&&(c=s===-1?NE(e,t):t[s+8],c===l6||!qO(r,!1)?s=-1:(a=t[Ze],s=Rm(c),t=Om(c,t)));s!==-1;){let u=t[Ze];if(jO(o,s,u.data)){let f=M3e(s,t,n,a,r,l);if(f!==ba)return f}c=t[s+8],c!==l6&&qO(r,t[Ze].data[s+8]===l)&&jO(o,s,t)?(a=u,s=Rm(c),t=Om(c,t)):s=-1}}return i}function M3e(e,t,n,r,i,o){let a=t[Ze],s=a.data[e+8],c=r==null?t9(s)&&ES:r!=a&&(s.type&3)!==0,l=i&rt.Host&&o===s,u=Am(s,a,n,c,l);return u!==null?X4(t,a,u,s):ba}function Am(e,t,n,r,i){let o=e.providerIndexes,a=t.data,s=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,f=r?s:s+u,d=i?s+u:l;for(let p=f;p<d;p++){let h=a[p];if(p<c&&n===h||p>=c&&h.type===n)return p}if(i){let p=a[c];if(p&&s3(p)&&p.type===n)return c}return null}function X4(e,t,n,r){let i=e[n],o=t.data;if(h3e(i)){let a=i;a.resolving&&Tce(kce(o[n]));let s=Pm(a.canSeeViewProviders);a.resolving=!0;let c,l=a.injectImpl?x1(a.injectImpl):null,u=qP(e,r,rt.Default);try{i=e[n]=a.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&d3e(n,o[n],t)}finally{l!==null&&x1(l),Pm(s),a.resolving=!1,XP()}}return i}function w3e(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(k8)?e[k8]:void 0;return typeof t=="number"?t>=0?t&M$:S3e:t}function jO(e,t,n){let r=1<<e;return!!(n[t+(e>>w$)]&r)}function qO(e,t){return!(e&rt.Self)&&!(e&rt.Host&&t)}var B4=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return z$(this._tNode,this._lView,t,c9(r),n)}};function S3e(){return new B4(pi(),ot())}function Is(e){return W8(()=>{let t=e.prototype.constructor,n=t[_m]||zS(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[_m]||zS(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function zS(e){return i$(e)?()=>{let t=zS(Pi(e));return t&&t()}:W4(e)}function E3e(e,t,n,r,i){let o=e,a=t;for(;o!==null&&a!==null&&a[Pe]&2048&&!(a[Pe]&512);){let s=H$(o,a,n,r|rt.Self,ba);if(s!==ba)return s;let c=o.parent;if(!c){let l=a[_P];if(l){let u=l.get(n,ba,r);if(u!==ba)return u}c=L$(a),a=a[y6]}o=c}return i}function L$(e){let t=e[Ze],n=t.type;return n===2?t.declTNode:n===1?e[Z1]:null}function _E(e){return b3e(pi(),e)}function GO(e,t=null,n=null,r){let i=A$(e,t,n,r);return i.resolveInjectorInitializers(),i}function A$(e,t=null,n=null,r,i=new Set){let o=[n||Eo,Xce(e)];return r=r||(typeof e=="object"?void 0:$i(e)),new U8(o,t||VE(),r||null,i)}var C2=(()=>{let t=class t{static create(r,i){if(Array.isArray(r))return GO({name:""},i,r,"");{let o=r.name??"";return GO({name:o},r.parent,r.providers,o)}}};t.THROW_IF_NOT_FOUND=B8,t.NULL=new Fm,t.\u0275prov=ue({token:t,providedIn:"any",factory:()=>ge(u$)}),t.__NG_ELEMENT_ID__=-1;let e=t;return e})(),D3e="ngOriginalError";function nS(e){return e[D3e]}var Sa=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&nS(t);for(;n&&nS(n);)n=nS(n);return n||null}},V$=new De("",{providedIn:"root",factory:()=>ce(Sa).handleError.bind(void 0)});var N$=!1,z3e=new De("",{providedIn:"root",factory:()=>N$}),bm;function H3e(){if(bm===void 0&&(bm=null,Pn.trustedTypes))try{bm=Pn.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return bm}function p9(e){return H3e()?.createHTML(e)||e}var Mm;function _$(){if(Mm===void 0&&(Mm=null,Pn.trustedTypes))try{Mm=Pn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Mm}function WO(e){return _$()?.createHTML(e)||e}function YO(e){return _$()?.createScriptURL(e)||e}var As=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${CP})`}},HS=class extends As{getTypeName(){return"HTML"}},LS=class extends As{getTypeName(){return"Style"}},AS=class extends As{getTypeName(){return"Script"}},VS=class extends As{getTypeName(){return"URL"}},NS=class extends As{getTypeName(){return"ResourceURL"}};function b2(e){return e instanceof As?e.changingThisBreaksApplicationSecurity:e}function Fs(e,t){let n=L3e(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${CP})`)}return n===t}function L3e(e){return e instanceof As&&e.getTypeName()||null}function k$(e){return new HS(e)}function T$(e){return new LS(e)}function I$(e){return new AS(e)}function F$(e){return new VS(e)}function R$(e){return new NS(e)}function A3e(e){let t=new kS(e);return V3e()?new _S(t):t}var _S=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let n=new window.DOMParser().parseFromString(p9(t),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch{return null}}},kS=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let n=this.inertDocument.createElement("template");return n.innerHTML=p9(t),n}};function V3e(){try{return!!new window.DOMParser().parseFromString(p9(""),"text/html")}catch{return!1}}var N3e=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function h9(e){return e=String(e),e.match(N3e)?e:"unsafe:"+e}function Rs(e){let t={};for(let n of e.split(","))t[n]=!0;return t}function K8(...e){let t={};for(let n of e)for(let r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}var O$=Rs("area,br,col,hr,img,wbr"),P$=Rs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$$=Rs("rp,rt"),_3e=K8($$,P$),k3e=K8(P$,Rs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),T3e=K8($$,Rs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),XO=K8(O$,k3e,T3e,_3e),B$=Rs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),I3e=Rs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),F3e=Rs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),R3e=K8(B$,I3e,F3e),O3e=Rs("script,style,template"),TS=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,r=!0;for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){n=n.firstChild;continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}}return this.buf.join("")}startElement(t){let n=t.nodeName.toLowerCase();if(!XO.hasOwnProperty(n))return this.sanitizedSomething=!0,!O3e.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=t.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),a=o.name,s=a.toLowerCase();if(!R3e.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let c=o.value;B$[s]&&(c=h9(c)),this.buf.push(" ",a,'="',QO(c),'"')}return this.buf.push(">"),!0}endElement(t){let n=t.nodeName.toLowerCase();XO.hasOwnProperty(n)&&!O$.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(QO(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}},P3e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$3e=/([^\#-~ |!])/g;function QO(e){return e.replace(/&/g,"&amp;").replace(P3e,function(t){let n=t.charCodeAt(0),r=t.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace($3e,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var wm;function kE(e,t){let n=null;try{wm=wm||A3e(e);let r=t?String(t):"";n=wm.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=wm.getInertBodyElement(r)}while(r!==o);let s=new TS().sanitizeChildren(KO(n)||n);return p9(s)}finally{if(n){let r=KO(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function KO(e){return"content"in e&&B3e(e)?e.content:null}function B3e(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var M2=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(M2||{});function U$(e){let t=TE();return t?WO(t.sanitize(M2.HTML,e)||""):Fs(e,"HTML")?WO(b2(e)):kE(e$(),G4(e))}function U3e(e){let t=TE();return t?t.sanitize(M2.URL,e)||"":Fs(e,"URL")?b2(e):h9(G4(e))}function j3e(e){let t=TE();if(t)return YO(t.sanitize(M2.RESOURCE_URL,e)||"");if(Fs(e,"ResourceURL"))return YO(b2(e));throw new ye(904,!1)}function q3e(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?j3e:U3e}function j$(e,t,n){return q3e(t,n)(e)}function TE(){let e=ot();return e&&e[Hs].sanitizer}var G3e=/^>|^->|<!--|-->|--!>|<!-$/g,W3e=/(<|>)/g,Y3e="\u200B$1\u200B";function X3e(e){return e.replace(G3e,t=>t.replace(W3e,Y3e))}var q$=new Map,Q3e=0;function K3e(){return Q3e++}function Z3e(e){q$.set(e[e9],e)}function J3e(e){q$.delete(e[e9])}var ZO="__ngContext__";function c3(e,t){$4(t)?(e[ZO]=t[e9],Z3e(t)):e[ZO]=t}function G$(e){return e instanceof Function?e():e}function e4e(e){return(e??ce(C2)).get(Ea)==="browser"}var Vs=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Vs||{}),t4e;function IE(e,t){return t4e(e,t)}function a6(e,t,n,r,i){if(r!=null){let o,a=!1;ks(r)?o=r:$4(r)&&(a=!0,r=r[_s]);let s=wa(r);e===0&&n!==null?i==null?Z$(t,n,s):Bm(t,n,s,i||null,!0):e===1&&n!==null?Bm(t,n,s,i||null,!0):e===2?v4e(t,s,a):e===3&&t.destroyNode(s),o!=null&&x4e(t,e,o,n,i)}}function n4e(e,t){return e.createText(t)}function r4e(e,t,n){e.setValue(t,n)}function i4e(e,t){return e.createComment(X3e(t))}function W$(e,t,n){return e.createElement(t,n)}function o4e(e,t){Y$(e,t),t[_s]=null,t[Z1]=null}function a4e(e,t,n,r,i,o){r[_s]=i,r[Z1]=t,g9(e,r,n,1,i,o)}function Y$(e,t){g9(e,t,t[Dn],2,null,null)}function s4e(e){let t=e[O8];if(!t)return rS(e[Ze],e);for(;t;){let n=null;if($4(t))n=t[O8];else{let r=t[Q1];r&&(n=r)}if(!n){for(;t&&!t[v2]&&t!==e;)$4(t)&&rS(t[Ze],t),t=t[Gr];t===null&&(t=e),$4(t)&&rS(t[Ze],t),n=t&&t[v2]}t=n}}function c4e(e,t,n,r){let i=Q1+r,o=n.length;r>0&&(n[i-1][v2]=t),r<o-Q1?(t[v2]=n[i],KP(n,Q1+r,t)):(n.push(t),t[v2]=null),t[Gr]=n;let a=t[Y8];a!==null&&n!==a&&l4e(a,t);let s=t[Ls];s!==null&&s.insertView(e),hS(t),t[Pe]|=128}function l4e(e,t){let n=e[d6],i=t[Gr][Gr][x2];t[x2]!==i&&(e[Pe]|=hE.HasTransplantedViews),n===null?e[d6]=[t]:n.push(t)}function X$(e,t){let n=e[d6],r=n.indexOf(t);n.splice(r,1)}function IS(e,t){if(e.length<=Q1)return;let n=Q1+t,r=e[n];if(r){let i=r[Y8];i!==null&&i!==e&&X$(i,r),t>0&&(e[n-1][v2]=r[v2]);let o=Tm(e,Q1+t);o4e(r[Ze],r);let a=o[Ls];a!==null&&a.detachView(o[Ze]),r[Gr]=null,r[v2]=null,r[Pe]&=-129}return r}function Q$(e,t){if(!(t[Pe]&256)){let n=t[Dn];n.destroyNode&&g9(e,t,n,3,null,null),s4e(t)}}function rS(e,t){if(!(t[Pe]&256)){t[Pe]&=-129,t[Pe]|=256,t[U4]&&oO(t[U4]),f4e(e,t),u4e(e,t),t[Ze].type===1&&t[Dn].destroy();let n=t[Y8];if(n!==null&&ks(t[Gr])){n!==t[Gr]&&X$(n,t);let r=t[Ls];r!==null&&r.detachView(e)}J3e(t)}}function u4e(e,t){let n=e.cleanup,r=t[R8];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[n[o+1]];n[o].call(a)}r!==null&&(t[R8]=null);let i=t[o3];if(i!==null){t[o3]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}}function f4e(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Y4)){let o=n[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let s=i[o[a]],c=o[a+1];Ca(4,s,c);try{c.call(s)}finally{Ca(5,s,c)}}else{Ca(4,i,o);try{o.call(i)}finally{Ca(5,i,o)}}}}}function K$(e,t,n){return d4e(e,t.parent,n)}function d4e(e,t,n){let r=t;for(;r!==null&&r.type&40;)t=r,r=t.parent;if(r===null)return n[_s];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===Ma.None||o===Ma.Emulated)return null}return Do(r,n)}}function Bm(e,t,n,r,i){e.insertBefore(t,n,r,i)}function Z$(e,t,n){e.appendChild(t,n)}function JO(e,t,n,r,i){r!==null?Bm(e,t,n,r,i):Z$(e,t,n)}function p4e(e,t,n,r){e.removeChild(t,n,r)}function FE(e,t){return e.parentNode(t)}function h4e(e,t){return e.nextSibling(t)}function J$(e,t,n){return g4e(e,t,n)}function m4e(e,t,n){return e.type&40?Do(e,n):null}var g4e=m4e,eP;function m9(e,t,n,r){let i=K$(e,r,t),o=t[Dn],a=r.parent||t[Z1],s=J$(a,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)JO(o,i,n[c],s,!1);else JO(o,i,n,s,!1);eP!==void 0&&eP(o,r,t,n,i)}function Vm(e,t){if(t!==null){let n=t.type;if(n&3)return Do(t,e);if(n&4)return FS(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Vm(e,r);{let i=e[t.index];return ks(i)?FS(-1,i):wa(i)}}else{if(n&32)return IE(t,e)()||wa(e[t.index]);{let r=eB(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=$8(e[x2]);return Vm(i,r)}else return Vm(e,t.next)}}}return null}function eB(e,t){if(t!==null){let r=e[x2][Z1],i=t.projection;return r.projection[i]}return null}function FS(e,t){let n=Q1+e+1;if(n<t.length){let r=t[n],i=r[Ze].firstChild;if(i!==null)return Vm(r,i)}return t[j4]}function v4e(e,t,n){let r=FE(e,t);r&&p4e(e,r,t,n)}function RE(e,t,n,r,i,o,a){for(;n!=null;){let s=r[n.index],c=n.type;if(a&&t===0&&(s&&c3(wa(s),r),n.flags|=2),(n.flags&32)!==32)if(c&8)RE(e,t,n.child,r,i,o,!1),a6(t,e,i,s,o);else if(c&32){let l=IE(n,r),u;for(;u=l();)a6(t,e,i,u,o);a6(t,e,i,s,o)}else c&16?tB(e,t,r,n,i,o):a6(t,e,i,s,o);n=a?n.projectionNext:n.next}}function g9(e,t,n,r,i,o){RE(n,r,e.firstChild,t,i,o,!1)}function y4e(e,t,n){let r=t[Dn],i=K$(e,n,t),o=n.parent||t[Z1],a=J$(o,n,t);tB(r,0,t,n,i,a)}function tB(e,t,n,r,i,o){let a=n[x2],c=a[Z1].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];a6(t,e,i,u,o)}else{let l=c,u=a[Gr];ZP(r)&&(l.flags|=128),RE(e,t,l,u,i,o,!0)}}function x4e(e,t,n,r,i){let o=n[j4],a=wa(n);o!==a&&a6(t,e,r,o,i);for(let s=Q1;s<n.length;s++){let c=n[s];g9(c[Ze],c,e,t,r,o)}}function C4e(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Vs.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Vs.Important),e.setStyle(n,r,i,o))}}function b4e(e,t,n){e.setAttribute(t,"style",n)}function nB(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function rB(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&pS(e,t,r),i!==null&&nB(e,t,i),o!==null&&b4e(e,t,o)}var za={};function B(e=1){iB(Kn(),ot(),el()+e,!1)}function iB(e,t,n,r){if(!r)if((t[Pe]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Hm(t,o,n)}else{let o=e.preOrderHooks;o!==null&&Lm(t,o,0,n)}q4(n)}function W(e,t=rt.Default){let n=ot();if(n===null)return ge(e,t);let r=pi();return z$(r,n,Pi(e),t)}function oB(){let e="invalid";throw new Error(e)}function aB(e,t,n,r,i,o){let a=Oi(null);try{let s=null;i&qr.SignalBased&&(s=t[r][Aw]),s!==null&&s.transformFn!==void 0&&(o=s.transformFn(o)),i&qr.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(t,o)),e.setInput!==null?e.setInput(t,s,o,n,r):g$(t,s,r,o)}finally{Oi(a)}}function M4e(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)q4(~i);else{let o=i,a=n[++r],s=n[++r];mce(a,o);let c=t[o];s(2,c)}}}finally{q4(-1)}}function v9(e,t,n,r,i,o,a,s,c,l,u){let f=t.blueprint.slice();return f[_s]=i,f[Pe]=r|4|128|8|64,(l!==null||e&&e[Pe]&2048)&&(f[Pe]|=2048),RP(f),f[Gr]=f[y6]=e,f[y2]=n,f[Hs]=a||e&&e[Hs],f[Dn]=s||e&&e[Dn],f[f6]=c||e&&e[f6]||null,f[Z1]=o,f[e9]=K3e(),f[F8]=u,f[_P]=l,f[x2]=t.type==2?e[x2]:f,f}function C6(e,t,n,r,i){let o=e.data[t];if(o===null)o=w4e(e,t,n,r,i),hce()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let a=uce();o.injectorIndex=a===null?-1:a.injectorIndex}return J4(o,!0),o}function w4e(e,t,n,r,i){let o=BP(),a=yE(),s=a?o:o&&o.parent,c=e.data[t]=L4e(e,s,n,t,r,i);return e.firstChild===null&&(e.firstChild=c),o!==null&&(a?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function sB(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function cB(e,t,n,r,i){let o=el(),a=r&2;try{q4(-1),a&&t.length>K1&&iB(e,t,K1,!1),Ca(a?2:0,i),n(r,i)}finally{q4(o),Ca(a?3:1,i)}}function OE(e,t,n){if(mE(t)){let r=Oi(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let a=i;a<o;a++){let s=e.data[a];if(s.contentQueries){let c=n[a];s.contentQueries(1,c,a)}}}finally{Oi(r)}}}function PE(e,t,n){PP()&&(T4e(e,t,n,Do(n,t)),(n.flags&64)===64&&fB(e,t,n))}function $E(e,t,n=Do){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],s=a===-1?n(t,e):e[a];e[i++]=s}}}function lB(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=BE(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function BE(e,t,n,r,i,o,a,s,c,l,u){let f=K1+r,d=f+i,p=S4e(f,d),h=typeof l=="function"?l():l;return p[Ze]={type:e,blueprint:p,template:n,queries:null,viewQuery:s,declTNode:t,data:p.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:c,consts:h,incompleteFirstPass:!1,ssrId:u}}function S4e(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:za);return n}function E4e(e,t,n,r){let o=r.get(z3e,N$)||n===Ma.ShadowDom,a=e.selectRootElement(t,o);return D4e(a),a}function D4e(e){z4e(e)}var z4e=()=>null;function H4e(e,t,n,r){let i=hB(t);i.push(n),e.firstCreatePass&&mB(e).push(r,i.length-1)}function L4e(e,t,n,r,i,o){let a=t?t.injectorIndex:-1,s=0;return $P()&&(s|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function tP(e,t,n,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let a=t[o];if(a===void 0)continue;r??={};let s,c=qr.None;Array.isArray(a)?(s=a[0],c=a[1]):s=a;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}e===0?nP(r,n,l,s,c):nP(r,n,l,s)}return r}function nP(e,t,n,r,i){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,r):o=e[n]=[t,r],i!==void 0&&o.push(i)}function A4e(e,t,n){let r=t.directiveStart,i=t.directiveEnd,o=e.data,a=t.attrs,s=[],c=null,l=null;for(let u=r;u<i;u++){let f=o[u],d=n?n.get(f):null,p=d?d.inputs:null,h=d?d.outputs:null;c=tP(0,f.inputs,u,c,p),l=tP(1,f.outputs,u,l,h);let m=c!==null&&a!==null&&!EP(t)?G4e(c,u,a):null;s.push(m)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=s,t.inputs=c,t.outputs=l}function V4e(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function UE(e,t,n,r,i,o,a,s){let c=Do(t,n),l=t.inputs,u;!s&&l!=null&&(u=l[r])?(qE(e,n,u,r,i),t9(t)&&N4e(n,t.index)):t.type&3?(r=V4e(r),i=a!=null?a(i,t.value||"",r):i,o.setProperty(c,r,i)):t.type&12}function N4e(e,t){let n=u3(t,e);n[Pe]&16||(n[Pe]|=64)}function jE(e,t,n,r){if(PP()){let i=r===null?null:{"":-1},o=F4e(e,n),a,s;o===null?a=s=null:[a,s]=o,a!==null&&uB(e,t,n,a,i,s),i&&R4e(n,r,i)}n.mergedAttrs=I8(n.mergedAttrs,n.attrs)}function uB(e,t,n,r,i,o){for(let l=0;l<r.length;l++)DS($m(n,t),e,r[l].type);P4e(n,e.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let a=!1,s=!1,c=sB(e,t,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=I8(n.mergedAttrs,u.hostAttrs),$4e(e,n,t,c,u),O4e(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let f=u.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),a=!0),!s&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),s=!0),c++}A4e(e,n,o)}function _4e(e,t,n,r,i){let o=i.hostBindings;if(o){let a=e.hostBindingOpCodes;a===null&&(a=e.hostBindingOpCodes=[]);let s=~t.index;k4e(a)!=s&&a.push(s),a.push(n,r,o)}}function k4e(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function T4e(e,t,n,r){let i=n.directiveStart,o=n.directiveEnd;t9(n)&&B4e(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||$m(n,t),c3(r,t);let a=n.initialInputs;for(let s=i;s<o;s++){let c=e.data[s],l=X4(t,e,s,n);if(c3(l,t),a!==null&&q4e(t,s-i,l,c,n,a),s3(c)){let u=u3(n.index,t);u[y2]=X4(t,e,s,n)}}}function fB(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,a=gce();try{q4(o);for(let s=r;s<i;s++){let c=e.data[s],l=t[s];mS(s),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&I4e(c,l)}}finally{q4(-1),mS(a)}}function I4e(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function F4e(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let a=n[o];if(DP(t,a.selectors,!1))if(r||(r=[]),s3(a))if(a.findHostDirectiveDefs!==null){let s=[];i=i||new Map,a.findHostDirectiveDefs(a,s,i),r.unshift(...s,a);let c=s.length;RS(e,t,c)}else r.unshift(a),RS(e,t,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return r===null?null:[r,i]}function RS(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function R4e(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new ye(-301,!1);r.push(t[i],o)}}}function O4e(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;s3(t)&&(n[""]=e)}}function P4e(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function $4e(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=W4(i.type,!0)),a=new Y4(o,s3(i),W);e.blueprint[r]=a,n[r]=a,_4e(e,t,r,sB(e,n,i.hostVars,za),i)}function B4e(e,t,n){let r=Do(t,e),i=lB(n),o=e[Hs].rendererFactory,a=16;n.signals?a=4096:n.onPush&&(a=64);let s=y9(e,v9(e,i,null,a,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=s}function U4e(e,t,n,r,i,o){let a=Do(e,t);j4e(t[Dn],a,o,e.value,n,r,i)}function j4e(e,t,n,r,i,o,a){if(o==null)e.removeAttribute(t,i,n);else{let s=a==null?G4(o):a(o,r||"",i);e.setAttribute(t,i,s,n)}}function q4e(e,t,n,r,i,o){let a=o[t];if(a!==null)for(let s=0;s<a.length;){let c=a[s++],l=a[s++],u=a[s++],f=a[s++];aB(r,n,c,l,u,f)}}function G4e(e,t,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let a=e[o];for(let s=0;s<a.length;s+=3)if(a[s]===t){r.push(o,a[s+1],a[s+2],n[i+1]);break}}i+=2}return r}function dB(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function pB(e,t){let n=e.contentQueries;if(n!==null){let r=Oi(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a!==-1){let s=e.data[a];bE(o),s.contentQueries(2,t[a],a)}}}finally{Oi(r)}}}function y9(e,t){return e[O8]?e[FO][v2]=t:e[O8]=t,e[FO]=t,t}function OS(e,t,n){bE(0);let r=Oi(null);try{t(e,n)}finally{Oi(r)}}function hB(e){return e[R8]||(e[R8]=[])}function mB(e){return e.cleanup||(e.cleanup=[])}function gB(e,t){let n=e[f6],r=n?n.get(Sa,null):null;r&&r.handleError(t)}function qE(e,t,n,r,i){for(let o=0;o<n.length;){let a=n[o++],s=n[o++],c=n[o++],l=t[a],u=e.data[a];aB(u,l,r,s,c,i)}}function vB(e,t,n){let r=TP(t,e);r4e(e[Dn],r,n)}function W4e(e,t){let n=u3(t,e),r=n[Ze];Y4e(r,n);let i=n[_s];i!==null&&n[F8]===null&&(n[F8]=HE(i,n[f6])),GE(r,n,n[y2])}function Y4e(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function GE(e,t,n){ME(t);try{let r=e.viewQuery;r!==null&&OS(1,r,n);let i=e.template;i!==null&&cB(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Ls]?.finishViewCreation(e),e.staticContentQueries&&pB(e,t),e.staticViewQueries&&OS(2,e.viewQuery,n);let o=e.components;o!==null&&X4e(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[Pe]&=-5,wE()}}function X4e(e,t){for(let n=0;n<t.length;n++)W4e(e,t[n])}function Q4e(e,t,n,r){let i=t.tView,a=e[Pe]&4096?4096:16,s=v9(e,i,n,a,null,t,null,null,null,r?.injector??null,r?.dehydratedView??null),c=e[t.index];s[Y8]=c;let l=e[Ls];return l!==null&&(s[Ls]=l.createEmbeddedView(i)),GE(i,s,n),s}function rP(e,t){return!t||t.firstChild===null||ZP(e)}function K4e(e,t,n,r=!0){let i=t[Ze];if(c4e(i,t,e,n),r){let a=FS(n,e),s=t[Dn],c=FE(s,e[j4]);c!==null&&a4e(i,e[Z1],s,t,c,a)}let o=t[F8];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Um(e,t,n,r,i=!1){for(;n!==null;){let o=t[n.index];o!==null&&r.push(wa(o)),ks(o)&&Z4e(o,r);let a=n.type;if(a&8)Um(e,t,n.child,r);else if(a&32){let s=IE(n,t),c;for(;c=s();)r.push(c)}else if(a&16){let s=eB(t,n);if(Array.isArray(s))r.push(...s);else{let c=$8(t[x2]);Um(c[Ze],c,s,r,!0)}}n=i?n.projectionNext:n.next}return r}function Z4e(e,t){for(let n=Q1;n<e.length;n++){let r=e[n],i=r[Ze].firstChild;i!==null&&Um(r[Ze],r,i,t)}e[j4]!==e[_s]&&t.push(e[j4])}var yB=[];function J4e(e){return e[U4]??ele(e)}function ele(e){let t=yB.pop()??Object.create(nle);return t.lView=e,t}function tle(e){e.lView[U4]!==e&&(e.lView=null,yB.push(e))}var nle=k(x({},nO),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{P8(e.lView)},consumerOnSignalRead(){this.lView[U4]=this}});function xB(e){return bB(e[O8])}function CB(e){return bB(e[v2])}function bB(e){for(;e!==null&&!ks(e);)e=e[v2];return e}var MB=100;function wB(e,t=!0,n=0){let r=e[Hs],i=r.rendererFactory,o=!1;o||i.begin?.();try{rle(e,n)}catch(a){throw t&&gB(e,a),a}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function rle(e,t){PS(e,t);let n=0;for(;vE(e);){if(n===MB)throw new ye(103,!1);n++,PS(e,1)}}function ile(e,t,n,r){let i=t[Pe];if((i&256)===256)return;let o=!1;!o&&t[Hs].inlineEffectRunner?.flush(),ME(t);let a=null,s=null;!o&&ole(e)&&(s=J4e(t),a=rO(s));try{RP(t),pce(e.bindingStartIndex),n!==null&&cB(e,t,n,2,r);let c=(i&3)===3;if(!o)if(c){let f=e.preOrderCheckHooks;f!==null&&Hm(t,f,null)}else{let f=e.preOrderHooks;f!==null&&Lm(t,f,0,null),eS(t,0)}if(ale(t),SB(t,0),e.contentQueries!==null&&pB(e,t),!o)if(c){let f=e.contentCheckHooks;f!==null&&Hm(t,f)}else{let f=e.contentHooks;f!==null&&Lm(t,f,1),eS(t,1)}M4e(e,t);let l=e.components;l!==null&&DB(t,l,0);let u=e.viewQuery;if(u!==null&&OS(2,u,r),!o)if(c){let f=e.viewCheckHooks;f!==null&&Hm(t,f)}else{let f=e.viewHooks;f!==null&&Lm(t,f,2),eS(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Kw]){for(let f of t[Kw])f();t[Kw]=null}o||(t[Pe]&=-73)}catch(c){throw P8(t),c}finally{s!==null&&(iO(s,a),tle(s)),wE()}}function ole(e){return e.type!==2}function SB(e,t){for(let n=xB(e);n!==null;n=CB(n))for(let r=Q1;r<n.length;r++){let i=n[r];EB(i,t)}}function ale(e){for(let t=xB(e);t!==null;t=CB(t)){if(!(t[Pe]&hE.HasTransplantedViews))continue;let n=t[d6];for(let r=0;r<n.length;r++){let i=n[r],o=i[Gr];nce(i)}}}function sle(e,t,n){let r=u3(t,e);EB(r,n)}function EB(e,t){gE(e)&&PS(e,t)}function PS(e,t){let r=e[Ze],i=e[Pe],o=e[U4],a=!!(t===0&&i&16);if(a||=!!(i&64&&t===0),a||=!!(i&1024),a||=!!(o?.dirty&&Vw(o)),o&&(o.dirty=!1),e[Pe]&=-9217,a)ile(r,e,r.template,e[y2]);else if(i&8192){SB(e,1);let s=r.components;s!==null&&DB(e,s,1)}}function DB(e,t,n){for(let r=0;r<t.length;r++)sle(e,t[r],n)}function WE(e){for(e[Hs].changeDetectionScheduler?.notify();e;){e[Pe]|=64;let t=$8(e);if(Xse(e)&&!t)return e;e=t}return null}var Q4=class{get rootNodes(){let t=this._lView,n=t[Ze];return Um(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[y2]}set context(t){this._lView[y2]=t}get destroyed(){return(this._lView[Pe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Gr];if(ks(t)){let n=t[km],r=n?n.indexOf(this):-1;r>-1&&(IS(t,r),Tm(n,r))}this._attachedToViewContainer=!1}Q$(this._lView[Ze],this._lView)}onDestroy(t){OP(this._lView,t)}markForCheck(){WE(this._cdRefInjectingView||this._lView)}detach(){this._lView[Pe]&=-129}reattach(){hS(this._lView),this._lView[Pe]|=128}detectChanges(){this._lView[Pe]|=1024,wB(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Y$(this._lView[Ze],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ye(902,!1);this._appRef=t,hS(this._lView)}},K4=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=ule;let e=t;return e})(),cle=K4,lle=class extends cle{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=Q4e(this._declarationLView,this._declarationTContainer,t,{injector:n,dehydratedView:r});return new Q4(i)}};function ule(){return x9(pi(),ot())}function x9(e,t){return e.type&4?new lle(t,e,x6(e,t)):null}var cGe=new RegExp(`^(\\d+)*(${Gce}|${qce})*(.*)`);var fle=()=>null;function iP(e,t){return fle(e,t)}var $S=class{},BS=class{},jm=class{};function dle(e){let t=Error(`No component factory found for ${$i(e)}.`);return t[ple]=e,t}var ple="ngComponent";var US=class{resolveComponentFactory(t){throw dle(t)}},C9=(()=>{let t=class t{};t.NULL=new US;let e=t;return e})(),j8=class{},J1=(()=>{let t=class t{constructor(){this.destroyNode=null}};t.__NG_ELEMENT_ID__=()=>hle();let e=t;return e})();function hle(){let e=ot(),t=pi(),n=u3(t.index,e);return($4(n)?n:e)[Dn]}var mle=(()=>{let t=class t{};t.\u0275prov=ue({token:t,providedIn:"root",factory:()=>null});let e=t;return e})(),iS={};function gle(e){return typeof e=="function"&&e[Aw]!==void 0}var oP=new Set;function b9(e){oP.has(e)||(oP.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function zB(e){return gle(e)&&typeof e.set=="function"}function YE(e){let t=Oi(null);try{return e()}finally{Oi(t)}}function HB(e){return yle(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function vle(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function yle(e){return e!==null&&(typeof e=="function"||typeof e=="object")}var jS=class{constructor(){}supports(t){return HB(t)}create(t){return new qS(t)}},xle=(e,t)=>t,qS=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||xle}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let a=!r||n&&n.currentIndex<aP(r,i,o)?n:r,s=aP(a,i,o),c=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(n=n._next,a.previousIndex==null)i++;else{o||(o=[]);let l=s-i,u=c-i;if(l!=u){for(let d=0;d<l;d++){let p=d<o.length?o[d]:o[d]=0,h=p+d;u<=h&&h<l&&(o[d]=p+1)}let f=a.previousIndex;o[f]=u-l}}s!==c&&t(a,s,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!HB(t))throw new ye(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,a;if(Array.isArray(t)){this.length=t.length;for(let s=0;s<this.length;s++)o=t[s],a=this._trackByFn(s,o),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,o,a,s),r=!0):(r&&(n=this._verifyReinsertion(n,o,a,s)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,vle(t,s=>{a=this._trackByFn(i,s),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,s,a,i),r=!0):(r&&(n=this._verifyReinsertion(n,s,a,i)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new GS(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new qm),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new qm),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},GS=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},WS=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},qm=class{constructor(){this.map=new Map}put(t){let n=t.trackById,r=this.map.get(n);r||(r=new WS,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function aP(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function sP(){return new XE([new jS])}var XE=(()=>{let t=class t{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new t(r)}static extend(r){return{provide:t,useFactory:i=>t.create(r,i||sP()),deps:[[t,new LE,new l9]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new ye(901,!1)}};t.\u0275prov=ue({token:t,providedIn:"root",factory:sP});let e=t;return e})();var Os=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=Cle;let e=t;return e})();function Cle(e){return ble(pi(),ot(),(e&16)===16)}function ble(e,t,n){if(t9(e)&&!n){let r=u3(e.index,t);return new Q4(r,r)}else if(e.type&47){let r=t[x2];return new Q4(r,t)}return null}var LB=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=Mle,t.__NG_ENV_ID__=r=>r;let e=t;return e})(),YS=class extends LB{constructor(t){super(),this._lView=t}onDestroy(t){return OP(this._lView,t),()=>ice(this._lView,t)}};function Mle(){return new YS(ot())}function cP(...e){}function wle(){let e=typeof Pn.requestAnimationFrame=="function",t=Pn[e?"requestAnimationFrame":"setTimeout"],n=Pn[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}var Gt=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Jt(!1),this.onMicrotaskEmpty=new Jt(!1),this.onStable=new Jt(!1),this.onError=new Jt(!1),typeof Zone>"u")throw new ye(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=wle().nativeRequestAnimationFrame,Dle(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new ye(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new ye(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,t,Sle,cP,cP);try{return o.runTask(a,n,r)}finally{o.cancelTask(a)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},Sle={};function QE(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Ele(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Pn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,XS(e),e.isCheckStableRunning=!0,QE(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),XS(e))}function Dle(e){let t=()=>{Ele(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,a,s)=>{if(zle(s))return n.invokeTask(i,o,a,s);try{return lP(e),n.invokeTask(i,o,a,s)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),uP(e)}},onInvoke:(n,r,i,o,a,s,c)=>{try{return lP(e),n.invoke(i,o,a,s,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),uP(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,XS(e),QE(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function XS(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function lP(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function uP(e){e._nesting--,QE(e)}var QS=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Jt,this.onMicrotaskEmpty=new Jt,this.onStable=new Jt,this.onError=new Jt}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function zle(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}function Hle(e="zone.js",t){return e==="noop"?new QS:e==="zone.js"?new Gt(t):e}var s6=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(s6||{}),Lle={destroy(){}};function KE(e,t){!t&&a3e(KE);let n=t?.injector??ce(C2);if(!e4e(n))return Lle;b9("NgAfterNextRender");let r=n.get(ZE),i=r.handler??=new ZS,o=t?.phase??s6.MixedReadWrite,a=()=>{i.unregister(c),s()},s=n.get(LB).onDestroy(a),c=new KS(n,o,()=>{a(),e()});return i.register(c),{destroy:a}}var KS=class{constructor(t,n,r){this.phase=n,this.callbackFn=r,this.zone=t.get(Gt),this.errorHandler=t.get(Sa,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(t){this.errorHandler?.handleError(t)}}},ZS=class{constructor(){this.executingCallbacks=!1,this.buckets={[s6.EarlyRead]:new Set,[s6.Write]:new Set,[s6.MixedReadWrite]:new Set,[s6.Read]:new Set},this.deferredCallbacks=new Set}register(t){(this.executingCallbacks?this.deferredCallbacks:this.buckets[t.phase]).add(t)}unregister(t){this.buckets[t.phase].delete(t),this.deferredCallbacks.delete(t)}execute(){this.executingCallbacks=!0;for(let t of Object.values(this.buckets))for(let n of t)n.invoke();this.executingCallbacks=!1;for(let t of this.deferredCallbacks)this.buckets[t.phase].add(t);this.deferredCallbacks.clear()}destroy(){for(let t of Object.values(this.buckets))t.clear();this.deferredCallbacks.clear()}},ZE=(()=>{let t=class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=ue({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();function Gm(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let a=0;a<t.length;a++){let s=t[a];if(typeof s=="number")o=s;else if(o==1)i=VO(i,s);else if(o==2){let c=s,l=t[++a];r=VO(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Wm=class extends C9{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=a3(t);return new g6(n,this.ngModule)}};function fP(e){let t=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let r=e[n];r!==void 0&&t.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return t}function Ale(e){let t=e.toLowerCase();return t==="svg"?Qse:t==="math"?Kse:null}var JS=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=c9(r);let i=this.injector.get(t,iS,r);return i!==iS||n===iS?i:this.parentInjector.get(t,n,r)}},g6=class extends jm{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=fP(t.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return fP(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=jse(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){i=i||this.ngModule;let o=i instanceof Bi?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new JS(t,o):t,s=a.get(j8,null);if(s===null)throw new ye(407,!1);let c=a.get(mle,null),l=a.get(ZE,null),u=a.get($S,null),f={rendererFactory:s,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:u},d=s.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",h=r?E4e(d,r,this.componentDef.encapsulation,a):W$(d,p,Ale(p)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let g=null;h!==null&&(g=HE(h,a,!0));let v=BE(0,null,null,1,0,null,null,null,null,null,null),y=v9(null,v,null,m,null,null,f,d,a,null,g);ME(y);let C,b;try{let M=this.componentDef,S,w=null;M.findHostDirectiveDefs?(S=[],w=new Map,M.findHostDirectiveDefs(M,S,w),S.push(M)):S=[M];let E=Vle(y,h),D=Nle(E,h,M,S,y,f,d);b=IP(v,K1),h&&Tle(d,M,h,r),n!==void 0&&Ile(b,this.ngContentSelectors,n),C=kle(D,M,S,w,y,[Fle]),GE(v,y,null)}finally{wE()}return new eE(this.componentType,C,x6(b,y),y,b)}},eE=class extends BS{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Q4(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;qE(o[Ze],o,i,t,n),this.previousInputValues.set(t,n);let a=u3(this._tNode.index,o);WE(a)}}get injector(){return new B4(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Vle(e,t){let n=e[Ze],r=K1;return e[r]=t,C6(n,r,2,"#host",null)}function Nle(e,t,n,r,i,o,a){let s=i[Ze];_le(r,e,t,a);let c=null;t!==null&&(c=HE(t,i[f6]));let l=o.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let f=v9(i,lB(n),null,u,i[e.index],e,o,l,null,null,c);return s.firstCreatePass&&RS(s,e,r.length-1),y9(i,f),i[e.index]=f}function _le(e,t,n,r){for(let i of e)t.mergedAttrs=I8(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(Gm(t,t.mergedAttrs,!0),n!==null&&rB(r,n,t))}function kle(e,t,n,r,i,o){let a=pi(),s=i[Ze],c=Do(a,i);uB(s,i,a,n,null,r);for(let u=0;u<n.length;u++){let f=a.directiveStart+u,d=X4(i,s,f,a);c3(d,i)}fB(s,i,a),c&&c3(c,i);let l=X4(i,s,a.directiveStart+a.componentOffset,a);if(e[y2]=i[y2]=l,o!==null)for(let u of o)u(l,t);return OE(s,a,i),l}function Tle(e,t,n,r){if(r)pS(e,n,["ng-version","17.2.3"]);else{let{attrs:i,classes:o}=qse(t.selectors[0]);i&&pS(e,n,i),o&&o.length>0&&nB(e,n,o.join(" "))}}function Ile(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function Fle(){let e=pi();d9(ot()[Ze],e)}var f3=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=Rle;let e=t;return e})();function Rle(){let e=pi();return VB(e,ot())}var Ole=f3,AB=class extends Ole{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return x6(this._hostTNode,this._hostLView)}get injector(){return new B4(this._hostTNode,this._hostLView)}get parentInjector(){let t=NE(this._hostTNode,this._hostLView);if(b$(t)){let n=Om(t,this._hostLView),r=Rm(t),i=n[Ze].data[r+8];return new B4(i,n)}else return new B4(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=dP(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Q1}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=iP(this._lContainer,t.ssrId),s=t.createEmbeddedViewImpl(n||{},o,a);return this.insertImpl(s,i,rP(this._hostTNode,a)),s}createComponent(t,n,r,i,o){let a=t&&!c3e(t),s;if(a)s=n;else{let h=n||{};s=h.index,r=h.injector,i=h.projectableNodes,o=h.environmentInjector||h.ngModuleRef}let c=a?t:new g6(a3(t)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let m=(a?l:this.parentInjector).get(Bi,null);m&&(o=m)}let u=a3(c.componentType??{}),f=iP(this._lContainer,u?.id??null),d=f?.firstChild??null,p=c.create(l,i,d,o);return this.insertImpl(p.hostView,s,rP(this._hostTNode,f)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(tce(i)){let s=this.indexOf(t);if(s!==-1)this.detach(s);else{let c=i[Gr],l=new AB(c,c[Z1],c[Gr]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),a=this._lContainer;return K4e(a,i,o,r),t.attachToViewContainerRef(),KP(oS(a),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=dP(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=IS(this._lContainer,n);r&&(Tm(oS(this._lContainer),n),Q$(r[Ze],r))}detach(t){let n=this._adjustIndex(t,-1),r=IS(this._lContainer,n);return r&&Tm(oS(this._lContainer),n)!=null?new Q4(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function dP(e){return e[km]}function oS(e){return e[km]||(e[km]=[])}function VB(e,t){let n,r=t[e.index];return ks(r)?n=r:(n=dB(r,t,null,e),t[e.index]=n,y9(t,n)),$le(n,t,e,r),new AB(n,e,t)}function Ple(e,t){let n=e[Dn],r=n.createComment(""),i=Do(t,e),o=FE(n,i);return Bm(n,o,r,h4e(n,i),!1),r}var $le=jle,Ble=()=>!1;function Ule(e,t,n){return Ble(e,t,n)}function jle(e,t,n,r){if(e[j4])return;let i;n.type&8?i=wa(r):i=Ple(t,n),e[j4]=i}var tE=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},nE=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let a=n.getByIndex(o),s=this.queries[a.indexInDeclarationView];i.push(s.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)JE(t,n).matches!==null&&this.queries[n].setDirty()}},rE=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=Zle(t):this.predicate=t}},iE=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},oE=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,n,qle(n,o)),this.matchTNodeWithReadOption(t,n,Am(n,t,o,!1,!1))}else r===K4?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Am(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Wr||i===f3||i===K4&&n.type&4)this.addMatch(n.index,-2);else{let o=Am(n,t,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function qle(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function Gle(e,t){return e.type&11?x6(e,t):e.type&4?x9(e,t):null}function Wle(e,t,n,r){return n===-1?Gle(t,e):n===-2?Yle(e,t,r):X4(e,e[Ze],n,t)}function Yle(e,t,n){if(n===Wr)return x6(t,e);if(n===K4)return x9(t,e);if(n===f3)return VB(t,e)}function NB(e,t,n,r){let i=t[Ls].queries[r];if(i.matches===null){let o=e.data,a=n.matches,s=[];for(let c=0;a!==null&&c<a.length;c+=2){let l=a[c];if(l<0)s.push(null);else{let u=o[l];s.push(Wle(t,u,a[c+1],n.metadata.read))}}i.matches=s}return i.matches}function aE(e,t,n,r){let i=e.queries.getByIndex(n),o=i.matches;if(o!==null){let a=NB(e,t,i,n);for(let s=0;s<o.length;s+=2){let c=o[s];if(c>0)r.push(a[s/2]);else{let l=o[s+1],u=t[-c];for(let f=Q1;f<u.length;f++){let d=u[f];d[Y8]===d[Gr]&&aE(d[Ze],d,l,r)}if(u[d6]!==null){let f=u[d6];for(let d=0;d<f.length;d++){let p=f[d];aE(p[Ze],p,l,r)}}}}}return r}function Xle(e,t){return e[Ls].queries[t].queryList}function Qle(e,t,n){let r=new gS((n&4)===4);return H4e(e,t,r,r.destroy),(t[Ls]??=new nE).queries.push(new tE(r))-1}function Kle(e,t,n,r){let i=Kn();if(i.firstCreatePass){let o=pi();Jle(i,new rE(t,n,r),o.index),e0e(i,e),(n&2)===2&&(i.staticContentQueries=!0)}return Qle(i,ot(),n)}function Zle(e){return e.split(",").map(t=>t.trim())}function Jle(e,t,n){e.queries===null&&(e.queries=new iE),e.queries.track(new oE(t,n))}function e0e(e,t){let n=e.contentQueries||(e.contentQueries=[]),r=n.length?n[n.length-1]:-1;t!==r&&n.push(e.queries.length-1,t)}function JE(e,t){return e.queries.getByIndex(t)}function t0e(e,t){let n=e[Ze],r=JE(n,t);return r.crossesNgTemplate?aE(n,e,t,[]):NB(n,e,r,t)}function n0e(e){let t=[],n=new Map;function r(i){let o=n.get(i);if(!o){let a=e(i);n.set(i,o=a.then(a0e))}return o}return Ym.forEach((i,o)=>{let a=[];i.templateUrl&&a.push(r(i.templateUrl).then(l=>{i.template=l}));let s=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=s,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,u=i.styleUrls;i.styleUrls.forEach((f,d)=>{s.push(""),a.push(r(f).then(p=>{s[l+d]=p,u.splice(u.indexOf(f),1),u.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&a.push(r(i.styleUrl).then(l=>{s.push(l),i.styleUrl=void 0}));let c=Promise.all(a).then(()=>s0e(o));t.push(c)}),i0e(),Promise.all(t).then(()=>{})}var Ym=new Map,r0e=new Set;function i0e(){let e=Ym;return Ym=new Map,e}function o0e(){return Ym.size===0}function a0e(e){return typeof e=="string"?e:e.text()}function s0e(e){r0e.delete(e)}function c0e(e){return Object.getPrototypeOf(e.prototype).constructor}function Ao(e){let t=c0e(e.type),n=!0,r=[e];for(;t;){let i;if(s3(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new ye(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let a=e;a.inputs=Sm(e.inputs),a.inputTransforms=Sm(e.inputTransforms),a.declaredInputs=Sm(e.declaredInputs),a.outputs=Sm(e.outputs);let s=i.hostBindings;s&&p0e(e,s);let c=i.viewQuery,l=i.contentQueries;if(c&&f0e(e,c),l&&d0e(e,l),l0e(e,i),Lse(e.outputs,i.outputs),s3(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let a=0;a<o.length;a++){let s=o[a];s&&s.ngInherit&&s(e),s===Ao&&(n=!1)}}t=Object.getPrototypeOf(t)}u0e(r)}function l0e(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=t.inputTransforms[i]}}}function u0e(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=I8(i.hostAttrs,n=I8(n,i.hostAttrs))}}function Sm(e){return e===u6?{}:e===Eo?[]:e}function f0e(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function d0e(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function p0e(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function eD(e){let t=e.inputConfig,n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}e.inputTransforms=n}var l3=class{},q8=class{};var Xm=class extends l3{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Wm(this);let i=AP(t);this._bootstrapComponents=G$(i.bootstrap),this._r3Injector=A$(t,n,[{provide:l3,useValue:this},{provide:C9,useValue:this.componentFactoryResolver},...r],$i(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Qm=class extends q8{constructor(t){super(),this.moduleType=t}create(t){return new Xm(this.moduleType,t,[])}};function h0e(e,t,n){return new Xm(e,t,n)}var sE=class extends l3{constructor(t){super(),this.componentFactoryResolver=new Wm(this),this.instance=null;let n=new U8([...t.providers,{provide:l3,useValue:this},{provide:C9,useValue:this.componentFactoryResolver}],t.parent||VE(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function M9(e,t,n=null){return new sE({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var tl=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new On(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function _B(e,t,n){return e[t]=n}function m0e(e,t){return e[t]}function Ns(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function g0e(e,t,n,r){let i=Ns(e,t,n);return Ns(e,t+1,r)||i}function v0e(e,t,n,r,i,o,a,s,c){let l=t.consts,u=C6(t,e,4,a||null,p6(l,s));jE(t,n,u,p6(l,c)),d9(t,u);let f=u.tView=BE(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,u),f.queries=t.queries.embeddedTView(u)),u}function _t(e,t,n,r,i,o,a,s){let c=ot(),l=Kn(),u=e+K1,f=l.firstCreatePass?v0e(u,l,c,t,n,r,i,o,a):l.data[u];J4(f,!1);let d=y0e(l,c,f,e);i9()&&m9(l,c,d,f),c3(d,c);let p=dB(d,c,d,f);return c[u]=p,y9(c,p),Ule(p,f,c),n9(f)&&PE(l,c,f),a!=null&&$E(c,f,s),_t}var y0e=x0e;function x0e(e,t,n,r){return o9(!0),t[Dn].createComment("")}function b6(e,t,n,r){let i=ot(),o=X8();if(Ns(i,o,t)){let a=Kn(),s=r9();U4e(s,i,e,t,n,r)}return b6}function C0e(e,t,n,r){return Ns(e,X8(),n)?t+G4(n)+r:za}function b0e(e,t,n,r,i,o){let a=dce(),s=g0e(e,a,n,i);return UP(2),s?t+G4(n)+r+G4(i)+o:za}function Em(e,t){return e<<17|t<<2}function Z4(e){return e>>17&32767}function M0e(e){return(e&2)==2}function w0e(e,t){return e&131071|t<<17}function cE(e){return e|2}function v6(e){return(e&131068)>>2}function aS(e,t){return e&-131069|t<<2}function S0e(e){return(e&1)===1}function lE(e){return e|1}function E0e(e,t,n,r,i,o){let a=o?t.classBindings:t.styleBindings,s=Z4(a),c=v6(a);e[r]=n;let l=!1,u;if(Array.isArray(n)){let f=n;u=f[1],(u===null||Q8(f,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let d=Z4(e[s+1]);e[r+1]=Em(d,s),d!==0&&(e[d+1]=aS(e[d+1],r)),e[s+1]=w0e(e[s+1],r)}else e[r+1]=Em(s,0),s!==0&&(e[s+1]=aS(e[s+1],r)),s=r;else e[r+1]=Em(c,0),s===0?s=r:e[c+1]=aS(e[c+1],r),c=r;l&&(e[r+1]=cE(e[r+1])),pP(e,u,r,!0),pP(e,u,r,!1),D0e(t,u,e,r,o),a=Em(s,c),o?t.classBindings=a:t.styleBindings=a}function D0e(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&Q8(o,t)>=0&&(n[r+1]=lE(n[r+1]))}function pP(e,t,n,r){let i=e[n+1],o=t===null,a=r?Z4(i):v6(i),s=!1;for(;a!==0&&(s===!1||o);){let c=e[a],l=e[a+1];z0e(c,t)&&(s=!0,e[a+1]=r?lE(l):cE(l)),a=r?Z4(l):v6(l)}s&&(e[n+1]=r?cE(i):lE(i))}function z0e(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Q8(e,t)>=0:!1}function be(e,t,n){let r=ot(),i=X8();if(Ns(r,i,t)){let o=Kn(),a=r9();UE(o,a,r,e,t,r[Dn],n,!1)}return be}function hP(e,t,n,r,i){let o=t.inputs,a=i?"class":"style";qE(e,n,o[a],a,r)}function Z8(e,t){return H0e(e,t,null,!0),Z8}function H0e(e,t,n,r){let i=ot(),o=Kn(),a=UP(2);if(o.firstUpdatePass&&A0e(o,e,a,r),t!==za&&Ns(i,a,t)){let s=o.data[el()];T0e(o,s,i,i[Dn],e,i[a+1]=I0e(t,n),r,a)}}function L0e(e,t){return t>=e.expandoStartIndex}function A0e(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[el()],a=L0e(e,n);F0e(o,r)&&t===null&&!a&&(t=!1),t=V0e(i,o,t,r),E0e(i,o,t,n,a,r)}}function V0e(e,t,n,r){let i=vce(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=sS(null,e,t,n,r),n=G8(n,t.attrs,r),o=null);else{let a=t.directiveStylingLast;if(a===-1||e[a]!==i)if(n=sS(i,e,t,n,r),o===null){let c=N0e(e,t,r);c!==void 0&&Array.isArray(c)&&(c=sS(null,e,t,c[1],r),c=G8(c,t.attrs,r),_0e(e,t,r,c))}else o=k0e(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function N0e(e,t,n){let r=n?t.classBindings:t.styleBindings;if(v6(r)!==0)return e[Z4(r)]}function _0e(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[Z4(i)]=r}function k0e(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let a=e[o].hostAttrs;r=G8(r,a,n)}return G8(r,t.attrs,n)}function sS(e,t,n,r,i){let o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(s===-1?s=n.directiveStart:s++;s<a&&(o=t[s],r=G8(r,o.hostAttrs,i),o!==e);)s++;return e!==null&&(n.directiveStylingLast=s),r}function G8(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];typeof a=="number"?i=a:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),zce(e,a,n?!0:t[++o]))}return e===void 0?null:e}function T0e(e,t,n,r,i,o,a,s){if(!(t.type&3))return;let c=e.data,l=c[s+1],u=S0e(l)?mP(c,t,n,i,v6(l),a):void 0;if(!Km(u)){Km(o)||M0e(l)&&(o=mP(c,null,n,i,s,a));let f=TP(el(),n);C4e(r,a,f,i,o)}}function mP(e,t,n,r,i,o){let a=t===null,s;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,f=u===null,d=n[i+1];d===za&&(d=f?Eo:void 0);let p=f?Zw(d,r):u===r?d:void 0;if(l&&!Km(p)&&(p=Zw(c,r)),Km(p)&&(s=p,a))return s;let h=e[i+1];i=a?Z4(h):v6(h)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(s=Zw(c,r))}return s}function Km(e){return e!==void 0}function I0e(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=$i(b2(e)))),e}function F0e(e,t){return(e.flags&(t?8:16))!==0}function R0e(e,t,n,r,i,o){let a=t.consts,s=p6(a,i),c=C6(t,e,2,r,s);return jE(t,n,c,p6(a,o)),c.attrs!==null&&Gm(c,c.attrs,!1),c.mergedAttrs!==null&&Gm(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function z(e,t,n,r){let i=ot(),o=Kn(),a=K1+e,s=i[Dn],c=o.firstCreatePass?R0e(a,o,i,t,n,r):o.data[a],l=O0e(o,i,c,s,t,e);i[a]=l;let u=n9(c);return J4(c,!0),rB(s,l,c),(c.flags&32)!==32&&i9()&&m9(o,i,l,c),oce()===0&&c3(l,i),ace(),u&&(PE(o,i,c),OE(o,c,i)),r!==null&&$E(i,c),z}function L(){let e=pi();yE()?xE():(e=e.parent,J4(e,!1));let t=e;cce(t)&&lce(),sce();let n=Kn();return n.firstCreatePass&&(d9(n,e),mE(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&m3e(t)&&hP(n,t,ot(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&g3e(t)&&hP(n,t,ot(),t.stylesWithoutHost,!1),L}function pn(e,t,n,r){return z(e,t,n,r),L(),pn}var O0e=(e,t,n,r,i,o)=>(o9(!0),W$(r,i,Cce()));function P0e(e,t,n,r,i){let o=t.consts,a=p6(o,r),s=C6(t,e,8,"ng-container",a);a!==null&&Gm(s,a,!0);let c=p6(o,i);return jE(t,n,s,c),t.queries!==null&&t.queries.elementStart(t,s),s}function C1(e,t,n){let r=ot(),i=Kn(),o=e+K1,a=i.firstCreatePass?P0e(o,i,r,t,n):i.data[o];J4(a,!0);let s=$0e(i,r,a,e);return r[o]=s,i9()&&m9(i,r,s,a),c3(s,r),n9(a)&&(PE(i,r,a),OE(i,a,r)),n!=null&&$E(r,a),C1}function b1(){let e=pi(),t=Kn();return yE()?xE():(e=e.parent,J4(e,!1)),t.firstCreatePass&&(d9(t,e),mE(e)&&t.queries.elementEnd(e)),b1}var $0e=(e,t,n,r)=>(o9(!0),i4e(t[Dn],""));function Ha(){return ot()}function tD(e,t,n){let r=ot(),i=X8();if(Ns(r,i,t)){let o=Kn(),a=r9();UE(o,a,r,e,t,r[Dn],n,!0)}return tD}var P4=void 0;function B0e(e){let t=e,n=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var U0e=["en",[["a","p"],["AM","PM"],P4],[["AM","PM"],P4,P4],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],P4,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],P4,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",P4,"{1} 'at' {0}",P4],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",B0e],cS={};function Vo(e){let t=j0e(e),n=gP(t);if(n)return n;let r=t.split("-")[0];if(n=gP(r),n)return n;if(r==="en")return U0e;throw new ye(701,!1)}function gP(e){return e in cS||(cS[e]=Pn.ng&&Pn.ng.common&&Pn.ng.common.locales&&Pn.ng.common.locales[e]),cS[e]}var $n=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}($n||{});function j0e(e){return e.toLowerCase().replace(/_/g,"-")}var Zm="en-US";var q0e=Zm;function G0e(e){typeof e=="string"&&(q0e=e.toLowerCase().replace(/_/g,"-"))}function Te(e,t,n,r){let i=ot(),o=Kn(),a=pi();return kB(o,i,i[Dn],a,e,t,r),Te}function W0e(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===n&&i[o+1]===r){let s=t[R8],c=i[o+2];return s.length>c?s[c]:null}typeof a=="string"&&(o+=2)}return null}function kB(e,t,n,r,i,o,a){let s=n9(r),l=e.firstCreatePass&&mB(e),u=t[y2],f=hB(t),d=!0;if(r.type&3||a){let m=Do(r,t),g=a?a(m):m,v=f.length,y=a?b=>a(wa(b[r.index])):r.index,C=null;if(!a&&s&&(C=W0e(e,t,i,r.index)),C!==null){let b=C.__ngLastListenerFn__||C;b.__ngNextListenerFn__=o,C.__ngLastListenerFn__=o,d=!1}else{o=yP(r,t,u,o,!1);let b=n.listen(g,i,o);f.push(o,b),l&&l.push(i,y,v,v+1)}}else o=yP(r,t,u,o,!1);let p=r.outputs,h;if(d&&p!==null&&(h=p[i])){let m=h.length;if(m)for(let g=0;g<m;g+=2){let v=h[g],y=h[g+1],M=t[v][y].subscribe(o),S=f.length;if(f.push(o,M),l){let w=typeof M=="function"?S+1:-(S+1);l.push(i,r.index,S,w)}}}}function vP(e,t,n,r){try{return Ca(6,t,n),n(r)!==!1}catch(i){return gB(e,i),!1}finally{Ca(7,t,n)}}function yP(e,t,n,r,i){return function o(a){if(a===Function)return r;let s=e.componentOffset>-1?u3(e.index,t):t;WE(s);let c=vP(t,n,r,a),l=o.__ngNextListenerFn__;for(;l;)c=vP(t,n,l,a)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&a.preventDefault(),c}}function Bn(e=1){return xce(e)}function Y0e(e,t){let n=null,r=Ose(e);for(let i=0;i<t.length;i++){let o=t[i];if(o==="*"){n=i;continue}if(r===null?DP(e,o,!0):Bse(r,o))return i}return n}function TB(e){let t=ot()[x2][Z1];if(!t.projection){let n=e?e.length:1,r=t.projection=Ece(n,null),i=r.slice(),o=t.child;for(;o!==null;){let a=e?Y0e(o,e):0;a!==null&&(i[a]?i[a].projectionNext=o:r[a]=o,i[a]=o),o=o.next}}}function IB(e,t=0,n){let r=ot(),i=Kn(),o=C6(i,K1+e,16,null,n||null);o.projection===null&&(o.projection=t),xE(),(!r[F8]||$P())&&(o.flags&32)!==32&&y4e(i,r,o)}function FB(e,t,n,r){Kle(e,t,n,r)}function RB(e){let t=ot(),n=Kn(),r=jP();bE(r+1);let i=JE(n,r);if(e.dirty&&ece(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=t0e(t,r);e.reset(o,Mce),e.notifyOnChanges()}return!0}return!1}function OB(){return Xle(ot(),jP())}function X0e(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function nl(e){let t=fce();return FP(t,K1+e)}function T(e,t=""){let n=ot(),r=Kn(),i=e+K1,o=r.firstCreatePass?C6(r,i,1,t,null):r.data[i],a=Q0e(r,n,o,t,e);n[i]=a,i9()&&m9(r,n,a,o),J4(o,!1)}var Q0e=(e,t,n,r,i)=>(o9(!0),n4e(t[Dn],r));function Yr(e){return Ie("",e,""),Yr}function Ie(e,t,n){let r=ot(),i=C0e(r,e,t,n);return i!==za&&vB(r,el(),i),Ie}function nD(e,t,n,r,i){let o=ot(),a=b0e(o,e,t,n,r,i);return a!==za&&vB(o,el(),a),nD}function Mt(e,t,n){zB(t)&&(t=t());let r=ot(),i=X8();if(Ns(r,i,t)){let o=Kn(),a=r9();UE(o,a,r,e,t,r[Dn],n,!1)}return Mt}function Ht(e,t){let n=zB(e);return n&&e.set(t),n}function wt(e,t){let n=ot(),r=Kn(),i=pi();return kB(r,n,n[Dn],i,e,t),wt}function K0e(e,t,n){let r=Kn();if(r.firstCreatePass){let i=s3(e);uE(n,r.data,r.blueprint,i,!0),uE(t,r.data,r.blueprint,i,!1)}}function uE(e,t,n,r,i){if(e=Pi(e),Array.isArray(e))for(let o=0;o<e.length;o++)uE(e[o],t,n,r,i);else{let o=Kn(),a=ot(),s=pi(),c=m6(e)?e:Pi(e.provide),l=m$(e),u=s.providerIndexes&1048575,f=s.directiveStart,d=s.providerIndexes>>20;if(m6(e)||!e.multi){let p=new Y4(l,i,W),h=uS(c,t,i?u:u+d,f);h===-1?(DS($m(s,a),o,c),lS(o,e,t.length),t.push(c),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),n.push(p),a.push(p)):(n[h]=p,a[h]=p)}else{let p=uS(c,t,u+d,f),h=uS(c,t,u,u+d),m=p>=0&&n[p],g=h>=0&&n[h];if(i&&!g||!i&&!m){DS($m(s,a),o,c);let v=e6e(i?J0e:Z0e,n.length,i,r,l);!i&&g&&(n[h].providerFactory=v),lS(o,e,t.length,0),t.push(c),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),n.push(v),a.push(v)}else{let v=PB(n[i?h:p],l,!i&&r);lS(o,e,p>-1?p:h,v)}!i&&r&&g&&n[h].componentProviders++}}}function lS(e,t,n,r){let i=m6(t),o=Jce(t);if(i||o){let c=(o?Pi(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function PB(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function uS(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function Z0e(e,t,n,r){return fE(this.multi,[])}function J0e(e,t,n,r){let i=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,s=X4(n,n[Ze],this.providerFactory.index,r);o=s.slice(0,a),fE(i,o);for(let c=a;c<s.length;c++)o.push(s[c])}else o=[],fE(i,o);return o}function fE(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function e6e(e,t,n,r,i){let o=new Y4(e,n,W);return o.multi=[],o.index=t,o.componentProviders=0,PB(o,i,r&&!n),o}function rl(e,t=[]){return n=>{n.providersResolver=(r,i)=>K0e(r,i?i(e):e,t)}}var t6e=(()=>{let t=class t{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=d$(!1,r.type),o=i.length>0?M9([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=ue({token:t,providedIn:"environment",factory:()=>new t(ge(Bi))});let e=t;return e})();function J8(e){b9("NgStandalone"),e.getStandaloneInjector=t=>t.get(t6e).getOrCreateStandaloneInjector(e)}function w2(e,t,n){let r=CE()+e,i=ot();return i[r]===za?_B(i,r,n?t.call(n):t()):m0e(i,r)}function $B(e,t,n,r){return BB(ot(),CE(),e,t,n,r)}function n6e(e,t){let n=e[t];return n===za?void 0:n}function BB(e,t,n,r,i,o){let a=t+n;return Ns(e,a,i)?_B(e,a+1,o?r.call(o,i):r(i)):n6e(e,a+1)}function hi(e,t){let n=Kn(),r,i=e+K1;n.firstCreatePass?(r=r6e(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=W4(r.type,!0)),a,s=x1(W);try{let c=Pm(!1),l=o();return Pm(c),X0e(n,ot(),i,l),l}finally{x1(s)}}function r6e(e,t){if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(e===r.name)return r}}function mi(e,t,n){let r=e+K1,i=ot(),o=FP(i,r);return i6e(i,r)?BB(i,CE(),t,o.transform,n,o):o.transform(n)}function i6e(e,t){return e[Ze].data[t].pure}function il(e,t){return x9(e,t)}var Dm=null;function o6e(e){Dm!==null&&(e.defaultEncapsulation!==Dm.defaultEncapsulation||e.preserveWhitespaces!==Dm.preserveWhitespaces)||(Dm=e)}var w9=(()=>{let t=class t{log(r){console.log(r)}warn(r){console.warn(r)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();var rD=new De(""),e5=new De(""),S9=(()=>{let t=class t{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,iD||(a6e(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==a),r()},i)),this._callbacks.push({doneCb:r,timeoutId:a,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};t.\u0275fac=function(i){return new(i||t)(ge(Gt),ge(E9),ge(e5))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),E9=(()=>{let t=class t{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return iD?.findTestabilityInTree(this,r,i)??null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();function a6e(e){iD=e}var iD;function d3(e){return!!e&&typeof e.then=="function"}function oD(e){return!!e&&typeof e.subscribe=="function"}var D9=new De(""),UB=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=ce(D9,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let a=o();if(d3(a))r.push(a);else if(oD(a)){let s=new Promise((c,l)=>{a.subscribe({complete:c,error:l})});r.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),z9=new De("");function s6e(){aO(()=>{throw new ye(600,!1)})}function c6e(e){return e.isBoundToModule}function l6e(e,t,n){try{let r=n();return d3(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}function jB(e,t){return Array.isArray(t)?t.reduce(jB,e):x(x({},e),t)}var ol=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ce(V$),this.afterRenderEffectManager=ce(ZE),this.componentTypes=[],this.components=[],this.isStable=ce(tl).hasPendingTasks.pipe(Qe(r=>!r)),this._injector=ce(Bi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof jm;if(!this._injector.get(UB).done){let p=!o&&LP(r),h=!1;throw new ye(405,h)}let s;o?s=r:s=this._injector.get(C9).resolveComponentFactory(r),this.componentTypes.push(s.componentType);let c=c6e(s)?void 0:this._injector.get(l3),l=i||s.selector,u=s.create(C2.NULL,[],l,c),f=u.location.nativeElement,d=u.injector.get(rD,null);return d?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),Nm(this.components,u),d?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new ye(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===MB)throw new ye(103,!1);let o=r===0;for(let{_lView:a,notifyErrorHandler:s}of this._views)!o&&!fS(a)||this.detectChangesInView(a,s,o);if(r++,i.executeInternalCallbacks(),!this._views.some(({_lView:a})=>fS(a))&&(i.execute(),!this._views.some(({_lView:a})=>fS(a))))break}}detectChangesInView(r,i,o){let a;o?(a=0,r[Pe]|=1024):r[Pe]&64?a=0:a=1,wB(r,i,a)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Nm(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(z9,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Nm(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new ye(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Nm(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function fS(e){return vE(e)}var dE=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},H9=(()=>{let t=class t{compileModuleSync(r){return new Qm(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=AP(r),a=G$(o.declarations).reduce((s,c)=>{let l=a3(c);return l&&s.push(new g6(l)),s},[]);return new dE(i,a)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),u6e=new De("");function f6e(e,t,n){let r=new Qm(n);return Promise.resolve(r)}function xP(e){for(let t=e.length-1;t>=0;t--)if(e[t]!==void 0)return e[t]}var d6e=(()=>{let t=class t{constructor(){this.zone=ce(Gt),this.applicationRef=ce(ol)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function p6e(e){return[{provide:Gt,useFactory:e},{provide:h6,multi:!0,useFactory:()=>{let t=ce(d6e,{optional:!0});return()=>t.initialize()}},{provide:h6,multi:!0,useFactory:()=>{let t=ce(g6e);return()=>{t.initialize()}}},{provide:V$,useFactory:h6e}]}function h6e(){let e=ce(Gt),t=ce(Sa);return n=>e.runOutsideAngular(()=>t.handleError(n))}function m6e(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var g6e=(()=>{let t=class t{constructor(){this.subscription=new lr,this.initialized=!1,this.zone=ce(Gt),this.pendingTasks=ce(tl)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Gt.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Gt.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function v6e(){return typeof $localize<"u"&&$localize.locale||Zm}var L9=new De("",{providedIn:"root",factory:()=>ce(L9,rt.Optional|rt.SkipSelf)||v6e()});var qB=new De(""),GB=(()=>{let t=class t{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=Hle(i?.ngZone,m6e({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let a=h0e(r.moduleType,this.injector,p6e(()=>o)),s=a.injector.get(Sa,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:l=>{s.handleError(l)}});a.onDestroy(()=>{Nm(this._modules,a),c.unsubscribe()})}),l6e(s,o,()=>{let c=a.injector.get(UB);return c.runInitializers(),c.donePromise.then(()=>{let l=a.injector.get(L9,Zm);return G0e(l||Zm),this._moduleDoBootstrap(a),a})})})}bootstrapModule(r,i=[]){let o=jB({},i);return f6e(this.injector,o,r).then(a=>this.bootstrapModuleFactory(a,o))}_moduleDoBootstrap(r){let i=r.injector.get(ol);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new ye(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ye(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(qB,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};t.\u0275fac=function(i){return new(i||t)(ge(C2))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})(),T8=null,WB=new De("");function y6e(e){if(T8&&!T8.get(WB,!1))throw new ye(400,!1);s6e(),T8=e;let t=e.get(GB);return b6e(e),t}function aD(e,t,n=[]){let r=`Platform: ${t}`,i=new De(r);return(o=[])=>{let a=YB();if(!a||a.injector.get(WB,!1)){let s=[...n,...o,{provide:i,useValue:!0}];e?e(s):y6e(x6e(s,r))}return C6e(i)}}function x6e(e=[],t){return C2.create({name:t,providers:[{provide:f9,useValue:"platform"},{provide:qB,useValue:new Set([()=>T8=null])},...e]})}function C6e(e){let t=YB();if(!t)throw new ye(401,!1);return t}function YB(){return T8?.get(GB)??null}function b6e(e){e.get(EE,null)?.forEach(n=>n())}var XB=aD(null,"core",[]),QB=(()=>{let t=class t{constructor(r){}};t.\u0275fac=function(i){return new(i||t)(ge(ol))},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({});let e=t;return e})();function al(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function KB(e){let t=a3(e);if(!t)return null;let n=new g6(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var iU=null;function La(){return iU}function oU(e){iU??=e}var R9=class{};var Xr=new De(""),yD=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(M6e),providedIn:"platform"});let e=t;return e})(),aU=new De(""),M6e=(()=>{let t=class t extends yD{constructor(){super(),this._doc=ce(Xr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return La().getBaseHref(this._doc)}onPopState(r){let i=La().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=La().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>new t,providedIn:"platform"});let e=t;return e})();function xD(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function ZB(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function $s(e){return e&&e[0]!=="?"?"?"+e:e}var js=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(CD),providedIn:"root"});let e=t;return e})(),sU=new De(""),CD=(()=>{let t=class t extends js{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ce(Xr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return xD(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+$s(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,a){let s=this.prepareExternalUrl(o+$s(a));this._platformLocation.pushState(r,i,s)}replaceState(r,i,o,a){let s=this.prepareExternalUrl(o+$s(a));this._platformLocation.replaceState(r,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(i){return new(i||t)(ge(yD),ge(sU,8))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),cU=(()=>{let t=class t extends js{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=xD(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,a){let s=this.prepareExternalUrl(o+$s(a));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(r,i,s)}replaceState(r,i,o,a){let s=this.prepareExternalUrl(o+$s(a));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(i){return new(i||t)(ge(yD),ge(sU,8))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),w6=(()=>{let t=class t{constructor(r){this._subject=new Jt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=E6e(ZB(JB(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+$s(i))}normalize(r){return t.stripTrailingSlash(S6e(this._basePath,JB(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+$s(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+$s(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};t.normalizeQueryParams=$s,t.joinWithSlash=xD,t.stripTrailingSlash=ZB,t.\u0275fac=function(i){return new(i||t)(ge(js))},t.\u0275prov=ue({token:t,factory:()=>w6e(),providedIn:"root"});let e=t;return e})();function w6e(){return new w6(ge(js))}function S6e(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function JB(e){return e.replace(/\/index.html$/,"")}function E6e(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var Ui=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}(Ui||{}),Yt=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}(Yt||{}),eo=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}(eo||{}),Bs=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e.Infinity=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}(Bs||{});function D6e(e){return Vo(e)[$n.LocaleId]}function z6e(e,t,n){let r=Vo(e),i=[r[$n.DayPeriodsFormat],r[$n.DayPeriodsStandalone]],o=No(i,t);return No(o,n)}function H6e(e,t,n){let r=Vo(e),i=[r[$n.DaysFormat],r[$n.DaysStandalone]],o=No(i,t);return No(o,n)}function L6e(e,t,n){let r=Vo(e),i=[r[$n.MonthsFormat],r[$n.MonthsStandalone]],o=No(i,t);return No(o,n)}function A6e(e,t){let r=Vo(e)[$n.Eras];return No(r,t)}function A9(e,t){let n=Vo(e);return No(n[$n.DateFormat],t)}function V9(e,t){let n=Vo(e);return No(n[$n.TimeFormat],t)}function N9(e,t){let r=Vo(e)[$n.DateTimeFormat];return No(r,t)}function P9(e,t){let n=Vo(e),r=n[$n.NumberSymbols][t];if(typeof r>"u"){if(t===Bs.CurrencyDecimal)return n[$n.NumberSymbols][Bs.Decimal];if(t===Bs.CurrencyGroup)return n[$n.NumberSymbols][Bs.Group]}return r}function lU(e){if(!e[$n.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[$n.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function V6e(e){let t=Vo(e);return lU(t),(t[$n.ExtraData][2]||[]).map(r=>typeof r=="string"?sD(r):[sD(r[0]),sD(r[1])])}function N6e(e,t,n){let r=Vo(e);lU(r);let i=[r[$n.ExtraData][0],r[$n.ExtraData][1]],o=No(i,t)||[];return No(o,n)||[]}function No(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new Error("Locale data API: locale data undefined")}function sD(e){let[t,n]=e.split(":");return{hours:+t,minutes:+n}}var _6e=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,_9={},k6e=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Us=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}(Us||{}),At=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}(At||{}),Lt=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}(Lt||{});function T6e(e,t,n,r){let i=j6e(e);t=Ps(n,t)||t;let a=[],s;for(;t;)if(s=k6e.exec(t),s){a=a.concat(s.slice(1));let u=a.pop();if(!u)break;t=u}else{a.push(t);break}let c=i.getTimezoneOffset();r&&(c=fU(r,c),i=U6e(i,r,!0));let l="";return a.forEach(u=>{let f=$6e(u);l+=f?f(i,n,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function O9(e,t,n){let r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function Ps(e,t){let n=D6e(e);if(_9[n]??={},_9[n][t])return _9[n][t];let r="";switch(t){case"shortDate":r=A9(e,eo.Short);break;case"mediumDate":r=A9(e,eo.Medium);break;case"longDate":r=A9(e,eo.Long);break;case"fullDate":r=A9(e,eo.Full);break;case"shortTime":r=V9(e,eo.Short);break;case"mediumTime":r=V9(e,eo.Medium);break;case"longTime":r=V9(e,eo.Long);break;case"fullTime":r=V9(e,eo.Full);break;case"short":let i=Ps(e,"shortTime"),o=Ps(e,"shortDate");r=k9(N9(e,eo.Short),[i,o]);break;case"medium":let a=Ps(e,"mediumTime"),s=Ps(e,"mediumDate");r=k9(N9(e,eo.Medium),[a,s]);break;case"long":let c=Ps(e,"longTime"),l=Ps(e,"longDate");r=k9(N9(e,eo.Long),[c,l]);break;case"full":let u=Ps(e,"fullTime"),f=Ps(e,"fullDate");r=k9(N9(e,eo.Full),[u,f]);break}return r&&(_9[n][t]=r),r}function k9(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,r){return t!=null&&r in t?t[r]:n})),e}function S2(e,t,n="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=-e+1:(e=-e,o=n));let a=String(e);for(;a.length<t;)a="0"+a;return r&&(a=a.slice(a.length-t)),o+a}function I6e(e,t){return S2(e,3).substring(0,t)}function Zn(e,t,n=0,r=!1,i=!1){return function(o,a){let s=F6e(e,o);if((n>0||s>-n)&&(s+=n),e===At.Hours)s===0&&n===-12&&(s=12);else if(e===At.FractionalSeconds)return I6e(s,t);let c=P9(a,Bs.MinusSign);return S2(s,t,c,r,i)}}function F6e(e,t){switch(e){case At.FullYear:return t.getFullYear();case At.Month:return t.getMonth();case At.Date:return t.getDate();case At.Hours:return t.getHours();case At.Minutes:return t.getMinutes();case At.Seconds:return t.getSeconds();case At.FractionalSeconds:return t.getMilliseconds();case At.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}function en(e,t,n=Ui.Format,r=!1){return function(i,o){return R6e(i,o,e,t,n,r)}}function R6e(e,t,n,r,i,o){switch(n){case Lt.Months:return L6e(t,i,r)[e.getMonth()];case Lt.Days:return H6e(t,i,r)[e.getDay()];case Lt.DayPeriods:let a=e.getHours(),s=e.getMinutes();if(o){let l=V6e(t),u=N6e(t,i,r),f=l.findIndex(d=>{if(Array.isArray(d)){let[p,h]=d,m=a>=p.hours&&s>=p.minutes,g=a<h.hours||a===h.hours&&s<h.minutes;if(p.hours<h.hours){if(m&&g)return!0}else if(m||g)return!0}else if(d.hours===a&&d.minutes===s)return!0;return!1});if(f!==-1)return u[f]}return z6e(t,i,r)[a<12?0:1];case Lt.Eras:return A6e(t,r)[e.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function T9(e){return function(t,n,r){let i=-1*r,o=P9(n,Bs.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case Us.Short:return(i>=0?"+":"")+S2(a,2,o)+S2(Math.abs(i%60),2,o);case Us.ShortGMT:return"GMT"+(i>=0?"+":"")+S2(a,1,o);case Us.Long:return"GMT"+(i>=0?"+":"")+S2(a,2,o)+":"+S2(Math.abs(i%60),2,o);case Us.Extended:return r===0?"Z":(i>=0?"+":"")+S2(a,2,o)+":"+S2(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${e}"`)}}}var O6e=0,F9=4;function P6e(e){let t=O9(e,O6e,1).getDay();return O9(e,0,1+(t<=F9?F9:F9+7)-t)}function uU(e){let t=e.getDay(),n=t===0?-3:F9-t;return O9(e.getFullYear(),e.getMonth(),e.getDate()+n)}function cD(e,t=!1){return function(n,r){let i;if(t){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,a=n.getDate();i=1+Math.floor((a+o)/7)}else{let o=uU(n),a=P6e(o.getFullYear()),s=o.getTime()-a.getTime();i=1+Math.round(s/6048e5)}return S2(i,e,P9(r,Bs.MinusSign))}}function I9(e,t=!1){return function(n,r){let o=uU(n).getFullYear();return S2(o,e,P9(r,Bs.MinusSign),t)}}var lD={};function $6e(e){if(lD[e])return lD[e];let t;switch(e){case"G":case"GG":case"GGG":t=en(Lt.Eras,Yt.Abbreviated);break;case"GGGG":t=en(Lt.Eras,Yt.Wide);break;case"GGGGG":t=en(Lt.Eras,Yt.Narrow);break;case"y":t=Zn(At.FullYear,1,0,!1,!0);break;case"yy":t=Zn(At.FullYear,2,0,!0,!0);break;case"yyy":t=Zn(At.FullYear,3,0,!1,!0);break;case"yyyy":t=Zn(At.FullYear,4,0,!1,!0);break;case"Y":t=I9(1);break;case"YY":t=I9(2,!0);break;case"YYY":t=I9(3);break;case"YYYY":t=I9(4);break;case"M":case"L":t=Zn(At.Month,1,1);break;case"MM":case"LL":t=Zn(At.Month,2,1);break;case"MMM":t=en(Lt.Months,Yt.Abbreviated);break;case"MMMM":t=en(Lt.Months,Yt.Wide);break;case"MMMMM":t=en(Lt.Months,Yt.Narrow);break;case"LLL":t=en(Lt.Months,Yt.Abbreviated,Ui.Standalone);break;case"LLLL":t=en(Lt.Months,Yt.Wide,Ui.Standalone);break;case"LLLLL":t=en(Lt.Months,Yt.Narrow,Ui.Standalone);break;case"w":t=cD(1);break;case"ww":t=cD(2);break;case"W":t=cD(1,!0);break;case"d":t=Zn(At.Date,1);break;case"dd":t=Zn(At.Date,2);break;case"c":case"cc":t=Zn(At.Day,1);break;case"ccc":t=en(Lt.Days,Yt.Abbreviated,Ui.Standalone);break;case"cccc":t=en(Lt.Days,Yt.Wide,Ui.Standalone);break;case"ccccc":t=en(Lt.Days,Yt.Narrow,Ui.Standalone);break;case"cccccc":t=en(Lt.Days,Yt.Short,Ui.Standalone);break;case"E":case"EE":case"EEE":t=en(Lt.Days,Yt.Abbreviated);break;case"EEEE":t=en(Lt.Days,Yt.Wide);break;case"EEEEE":t=en(Lt.Days,Yt.Narrow);break;case"EEEEEE":t=en(Lt.Days,Yt.Short);break;case"a":case"aa":case"aaa":t=en(Lt.DayPeriods,Yt.Abbreviated);break;case"aaaa":t=en(Lt.DayPeriods,Yt.Wide);break;case"aaaaa":t=en(Lt.DayPeriods,Yt.Narrow);break;case"b":case"bb":case"bbb":t=en(Lt.DayPeriods,Yt.Abbreviated,Ui.Standalone,!0);break;case"bbbb":t=en(Lt.DayPeriods,Yt.Wide,Ui.Standalone,!0);break;case"bbbbb":t=en(Lt.DayPeriods,Yt.Narrow,Ui.Standalone,!0);break;case"B":case"BB":case"BBB":t=en(Lt.DayPeriods,Yt.Abbreviated,Ui.Format,!0);break;case"BBBB":t=en(Lt.DayPeriods,Yt.Wide,Ui.Format,!0);break;case"BBBBB":t=en(Lt.DayPeriods,Yt.Narrow,Ui.Format,!0);break;case"h":t=Zn(At.Hours,1,-12);break;case"hh":t=Zn(At.Hours,2,-12);break;case"H":t=Zn(At.Hours,1);break;case"HH":t=Zn(At.Hours,2);break;case"m":t=Zn(At.Minutes,1);break;case"mm":t=Zn(At.Minutes,2);break;case"s":t=Zn(At.Seconds,1);break;case"ss":t=Zn(At.Seconds,2);break;case"S":t=Zn(At.FractionalSeconds,1);break;case"SS":t=Zn(At.FractionalSeconds,2);break;case"SSS":t=Zn(At.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=T9(Us.Short);break;case"ZZZZZ":t=T9(Us.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=T9(Us.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=T9(Us.Long);break;default:return null}return lD[e]=t,t}function fU(e,t){e=e.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function B6e(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function U6e(e,t,n){let r=n?-1:1,i=e.getTimezoneOffset(),o=fU(t,i);return B6e(e,r*(o-i))}function j6e(e){if(eU(e))return e;if(typeof e=="number"&&!isNaN(e))return new Date(e);if(typeof e=="string"){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){let[i,o=1,a=1]=e.split("-").map(s=>+s);return O9(i,o-1,a)}let n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let r;if(r=e.match(_6e))return q6e(r)}let t=new Date(e);if(!eU(t))throw new Error(`Unable to convert "${e}" into a date`);return t}function q6e(e){let t=new Date(0),n=0,r=0,i=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));let a=Number(e[4]||0)-n,s=Number(e[5]||0)-r,c=Number(e[6]||0),l=Math.floor(parseFloat("0."+(e[7]||0))*1e3);return o.call(t,a,s,c,l),t}function eU(e){return e instanceof Date&&!isNaN(e.valueOf())}function $9(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var uD=/\s+/,tU=[],dU=(()=>{let t=class t{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=tU,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(uD):tU}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(uD):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(uD).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};t.\u0275fac=function(i){return new(i||t)(W(Wr),W(J1))},t.\u0275dir=dn({type:t,selectors:[["","ngClass",""]],inputs:{klass:[qr.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let e=t;return e})();var fD=class{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},gi=(()=>{let t=class t{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,a,s)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new fD(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(a===null?void 0:a);else if(a!==null){let c=i.get(a);i.move(c,s),nU(c,o)}});for(let o=0,a=i.length;o<a;o++){let c=i.get(o).context;c.index=o,c.count=a,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let a=i.get(o.currentIndex);nU(a,o)})}static ngTemplateContextGuard(r,i){return!0}};t.\u0275fac=function(i){return new(i||t)(W(f3),W(K4),W(XE))},t.\u0275dir=dn({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let e=t;return e})();function nU(e,t){e.context.$implicit=t.item}var _o=(()=>{let t=class t{constructor(r,i){this._viewContainer=r,this._context=new dD,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){rU("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){rU("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};t.\u0275fac=function(i){return new(i||t)(W(f3),W(K4))},t.\u0275dir=dn({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let e=t;return e})(),dD=class{constructor(){this.$implicit=null,this.ngIf=null}};function rU(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${$i(t)}'.`)}function pU(e,t){return new ye(2100,!1)}var pD=class{createSubscription(t,n){return YE(()=>t.subscribe({next:n,error:r=>{throw r}}))}dispose(t){YE(()=>t.unsubscribe())}},hD=class{createSubscription(t,n){return t.then(n,r=>{throw r})}dispose(t){}},G6e=new hD,W6e=new pD,B9=(()=>{let t=class t{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(d3(r))return G6e;if(oD(r))return W6e;throw pU(t,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};t.\u0275fac=function(i){return new(i||t)(W(Os,16))},t.\u0275pipe=pE({name:"async",type:t,pure:!1,standalone:!0});let e=t;return e})();var Y6e="mediumDate",X6e=new De(""),Q6e=new De(""),ko=(()=>{let t=class t{constructor(r,i,o){this.locale=r,this.defaultTimezone=i,this.defaultOptions=o}transform(r,i,o,a){if(r==null||r===""||r!==r)return null;try{let s=i??this.defaultOptions?.dateFormat??Y6e,c=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return T6e(r,s,a||this.locale,c)}catch(s){throw pU(t,s.message)}}};t.\u0275fac=function(i){return new(i||t)(W(L9,16),W(X6e,24),W(Q6e,24))},t.\u0275pipe=pE({name:"date",type:t,pure:!0,standalone:!0});let e=t;return e})();var U9=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({});let e=t;return e})(),bD="browser",K6e="server";function Z6e(e){return e===bD}function MD(e){return e===K6e}var hU=(()=>{let t=class t{};t.\u0275prov=ue({token:t,providedIn:"root",factory:()=>Z6e(ce(Ea))?new mD(ce(Xr),window):new gD});let e=t;return e})(),mD=class{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let n=J6e(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function J6e(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let a=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(a)return a}i=r.nextNode()}}return null}var gD=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},M6=class{};var n5=class{},q9=class{},sl=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),a=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let a=this.headers.get(n);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}break}}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var SD=class{encodeKey(t){return mU(t)}encodeValue(t){return mU(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function nue(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[a,s]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=n.get(a)||[];c.push(s),n.set(a,c)}),n}var rue=/%(\d[a-f0-9])/gi,iue={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function mU(e){return encodeURIComponent(e).replace(rue,(t,n)=>iue[n]??t)}function j9(e){return`${e}`}var p3=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new SD,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=nue(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],i=Array.isArray(r)?r.map(j9):[j9(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(j9(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(j9(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var ED=class{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function oue(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function gU(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function vU(e){return typeof Blob<"u"&&e instanceof Blob}function yU(e){return typeof FormData<"u"&&e instanceof FormData}function aue(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var t5=class e{constructor(t,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(oue(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new sl,this.context??=new ED,!this.params)this.params=new p3,this.urlWithParams=n;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=n;else{let s=n.indexOf("?"),c=s===-1?"?":s<n.length-1?"&":"";this.urlWithParams=n+c+a}}}serializeBody(){return this.body===null?null:gU(this.body)||vU(this.body)||yU(this.body)||aue(this.body)||typeof this.body=="string"?this.body:this.body instanceof p3?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||yU(this.body)?null:vU(this.body)?this.body.type||null:gU(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof p3?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.body!==void 0?t.body:this.body,a=t.withCredentials!==void 0?t.withCredentials:this.withCredentials,s=t.reportProgress!==void 0?t.reportProgress:this.reportProgress,c=t.headers||this.headers,l=t.params||this.params,u=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((f,d)=>f.set(d,t.setHeaders[d]),c)),t.setParams&&(l=Object.keys(t.setParams).reduce((f,d)=>f.set(d,t.setParams[d]),l)),new e(n,r,o,{params:l,headers:c,context:u,reportProgress:s,responseType:i,withCredentials:a})}},S6=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(S6||{}),r5=class{constructor(t,n=W9.Ok,r="OK"){this.headers=t.headers||new sl,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},DD=class e extends r5{constructor(t={}){super(t),this.type=S6.ResponseHeader}clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},E6=class e extends r5{constructor(t={}){super(t),this.type=S6.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},G9=class extends r5{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},W9=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(W9||{});function wD(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var qs=(()=>{let t=class t{constructor(r){this.handler=r}request(r,i,o={}){let a;if(r instanceof t5)a=r;else{let l;o.headers instanceof sl?l=o.headers:l=new sl(o.headers);let u;o.params&&(o.params instanceof p3?u=o.params:u=new p3({fromObject:o.params})),a=new t5(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let s=se(a).pipe(zs(l=>this.handler.handle(l)));if(r instanceof t5||o.observe==="events")return s;let c=s.pipe(v1(l=>l instanceof E6));switch(o.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return c.pipe(Qe(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(Qe(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(Qe(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(Qe(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new p3().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,wD(o,i))}post(r,i,o={}){return this.request("POST",r,wD(o,i))}put(r,i,o={}){return this.request("PUT",r,wD(o,i))}};t.\u0275fac=function(i){return new(i||t)(ge(n5))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function MU(e,t){return t(e)}function sue(e,t){return(n,r)=>t.intercept(n,{handle:i=>e(i,r)})}function cue(e,t,n){return(r,i)=>Da(n,()=>t(r,o=>e(o,i)))}var zD=new De(""),HD=new De(""),lue=new De(""),uue=new De("");function fue(){let e=null;return(t,n)=>{e===null&&(e=(ce(zD,{optional:!0})??[]).reduceRight(sue,MU));let r=ce(tl),i=r.add();return e(t,n).pipe(r3(()=>r.remove(i)))}}var xU=(()=>{let t=class t extends n5{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=ce(tl);let o=ce(uue,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(HD),...this.injector.get(lue,[])]));this.chain=o.reduceRight((a,s)=>cue(a,s,this.injector),MU)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(r3(()=>this.pendingTasks.remove(i)))}};t.\u0275fac=function(i){return new(i||t)(ge(q9),ge(Bi))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();var due=/^\)\]\}',?\n/;function pue(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var CU=(()=>{let t=class t{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new ye(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Zt(i.\u0275loadImpl()):se(null)).pipe(y1(()=>new Ct(a=>{let s=i.build();if(s.open(r.method,r.urlWithParams),r.withCredentials&&(s.withCredentials=!0),r.headers.forEach((g,v)=>s.setRequestHeader(g,v.join(","))),r.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let g=r.detectContentTypeHeader();g!==null&&s.setRequestHeader("Content-Type",g)}if(r.responseType){let g=r.responseType.toLowerCase();s.responseType=g!=="json"?g:"text"}let c=r.serializeBody(),l=null,u=()=>{if(l!==null)return l;let g=s.statusText||"OK",v=new sl(s.getAllResponseHeaders()),y=pue(s)||r.url;return l=new DD({headers:v,status:s.status,statusText:g,url:y}),l},f=()=>{let{headers:g,status:v,statusText:y,url:C}=u(),b=null;v!==W9.NoContent&&(b=typeof s.response>"u"?s.responseText:s.response),v===0&&(v=b?W9.Ok:0);let M=v>=200&&v<300;if(r.responseType==="json"&&typeof b=="string"){let S=b;b=b.replace(due,"");try{b=b!==""?JSON.parse(b):null}catch(w){b=S,M&&(M=!1,b={error:w,text:b})}}M?(a.next(new E6({body:b,headers:g,status:v,statusText:y,url:C||void 0})),a.complete()):a.error(new G9({error:b,headers:g,status:v,statusText:y,url:C||void 0}))},d=g=>{let{url:v}=u(),y=new G9({error:g,status:s.status||0,statusText:s.statusText||"Unknown Error",url:v||void 0});a.error(y)},p=!1,h=g=>{p||(a.next(u()),p=!0);let v={type:S6.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),r.responseType==="text"&&s.responseText&&(v.partialText=s.responseText),a.next(v)},m=g=>{let v={type:S6.UploadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),a.next(v)};return s.addEventListener("load",f),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),r.reportProgress&&(s.addEventListener("progress",h),c!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(c),a.next({type:S6.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",f),s.removeEventListener("timeout",d),r.reportProgress&&(s.removeEventListener("progress",h),c!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}};t.\u0275fac=function(i){return new(i||t)(ge(M6))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),wU=new De(""),hue="XSRF-TOKEN",mue=new De("",{providedIn:"root",factory:()=>hue}),gue="X-XSRF-TOKEN",vue=new De("",{providedIn:"root",factory:()=>gue}),Y9=class{},yue=(()=>{let t=class t{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=$9(r,this.cookieName),this.lastCookieString=r),this.lastToken}};t.\u0275fac=function(i){return new(i||t)(ge(Xr),ge(Ea),ge(mue))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function xue(e,t){let n=e.url.toLowerCase();if(!ce(wU)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let r=ce(Y9).getToken(),i=ce(vue);return r!=null&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),t(e)}var SU=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(SU||{});function Cue(e,t){return{\u0275kind:e,\u0275providers:t}}function bue(...e){let t=[qs,CU,xU,{provide:n5,useExisting:xU},{provide:q9,useExisting:CU},{provide:HD,useValue:xue,multi:!0},{provide:wU,useValue:!0},{provide:Y9,useClass:yue}];for(let n of e)t.push(...n.\u0275providers);return u9(t)}var bU=new De("");function Mue(){return Cue(SU.LegacyInterceptors,[{provide:bU,useFactory:fue},{provide:HD,useExisting:bU,multi:!0}])}var EU=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({providers:[bue(Mue())]});let e=t;return e})();var VD=class extends R9{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ND=class e extends VD{static makeCurrent(){oU(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=wue();return n==null?null:Sue(n)}resetBaseElement(){i5=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return $9(document.cookie,t)}},i5=null;function wue(){return i5=i5||document.querySelector("base"),i5?i5.getAttribute("href"):null}function Sue(e){return new URL(e,document.baseURI).pathname}var _D=class{addToWindow(t){Pn.getAngularTestability=(r,i=!0)=>{let o=t.findTestabilityInTree(r,i);if(o==null)throw new ye(5103,!1);return o},Pn.getAllAngularTestabilities=()=>t.getAllTestabilities(),Pn.getAllAngularRootElements=()=>t.getAllRootElements();let n=r=>{let i=Pn.getAllAngularTestabilities(),o=i.length,a=function(){o--,o==0&&r()};i.forEach(s=>{s.whenStable(a)})};Pn.frameworkStabilizers||(Pn.frameworkStabilizers=[]),Pn.frameworkStabilizers.push(n)}findTestabilityInTree(t,n,r){if(n==null)return null;let i=t.getTestability(n);return i??(r?La().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},Eue=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),kD=new De(""),LU=(()=>{let t=class t{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(a=>a.supports(r)),!i)throw new ye(5101,!1);return this._eventNameToPlugin.set(r,i),i}};t.\u0275fac=function(i){return new(i||t)(ge(kD),ge(Gt))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),Q9=class{constructor(t){this._doc=t}},LD="ng-app-id",AU=(()=>{let t=class t{constructor(r,i,o,a={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=MD(a),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${LD}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let a=o.get(r);return a.usage+=i,a.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,a=o?.get(i);if(a?.parentNode===r)return o.delete(i),a.removeAttribute(LD),a;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(LD,this.appId),r.appendChild(s),s}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),a=this.styleRef,s=a.get(i)?.elements;s?s.push(o):a.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};t.\u0275fac=function(i){return new(i||t)(ge(Xr),ge(s9),ge(DE,8),ge(Ea))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),AD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ID=/%COMP%/g,VU="%COMP%",Due=`_nghost-${VU}`,zue=`_ngcontent-${VU}`,Hue=!0,Lue=new De("",{providedIn:"root",factory:()=>Hue});function Aue(e){return zue.replace(ID,e)}function Vue(e){return Due.replace(ID,e)}function NU(e,t){return t.map(n=>n.replace(ID,e))}var DU=(()=>{let t=class t{constructor(r,i,o,a,s,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=a,this.doc=s,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=MD(c),this.defaultRenderer=new o5(r,s,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ma.ShadowDom&&(i=k(x({},i),{encapsulation:Ma.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof K9?o.applyToHost(r):o instanceof a5&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,a=o.get(i.id);if(!a){let s=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Ma.Emulated:a=new K9(l,u,i,this.appId,f,s,c,d);break;case Ma.ShadowDom:return new TD(l,u,r,i,s,c,this.nonce,d);default:a=new a5(l,u,i,f,s,c,d);break}o.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(i){return new(i||t)(ge(LU),ge(AU),ge(s9),ge(Lue),ge(Xr),ge(Ea),ge(Gt),ge(DE))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),o5=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(AD[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(zU(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(zU(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new ye(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=AD[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=AD[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Vs.DashCase|Vs.Important)?t.style.setProperty(n,r,i&Vs.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Vs.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=La().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function zU(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var TD=class extends o5{constructor(t,n,r,i,o,a,s,c){super(t,o,a,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=NU(i.id,i.styles);for(let u of l){let f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=u,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},a5=class extends o5{constructor(t,n,r,i,o,a,s,c){super(t,o,a,s),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?NU(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},K9=class extends a5{constructor(t,n,r,i,o,a,s,c){let l=i+"-"+r.id;super(t,n,r,o,a,s,c,l),this.contentAttr=Aue(l),this.hostAttr=Vue(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},Nue=(()=>{let t=class t extends Q9{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};t.\u0275fac=function(i){return new(i||t)(ge(Xr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),HU=["alt","control","meta","shift"],_ue={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kue={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},Tue=(()=>{let t=class t extends Q9{constructor(r){super(r)}supports(r){return t.parseEventName(r)!=null}addEventListener(r,i,o){let a=t.parseEventName(i),s=t.eventCallback(a.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>La().onAndCancel(r,a.domEventName,s))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let a=t._normalizeKey(i.pop()),s="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),s="code."),HU.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=a,i.length!=0||a.length===0)return null;let l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(r,i){let o=_ue[r.key]||r.key,a="";return i.indexOf("code.")>-1&&(o=r.code,a="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),HU.forEach(s=>{if(s!==o){let c=kue[s];c(r)&&(a+=s+".")}}),a+=o,a===i)}static eventCallback(r,i,o){return a=>{t.matchEventFullKeyCode(a,r)&&o.runGuarded(()=>i(a))}}static _normalizeKey(r){return r==="esc"?"escape":r}};t.\u0275fac=function(i){return new(i||t)(ge(Xr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function Iue(){ND.makeCurrent()}function Fue(){return new Sa}function Rue(){return JP(document),document}var Oue=[{provide:Ea,useValue:bD},{provide:EE,useValue:Iue,multi:!0},{provide:Xr,useFactory:Rue,deps:[]}],_U=aD(XB,"browser",Oue),Pue=new De(""),$ue=[{provide:e5,useClass:_D,deps:[]},{provide:rD,useClass:S9,deps:[Gt,E9,e5]},{provide:S9,useClass:S9,deps:[Gt,E9,e5]}],Bue=[{provide:f9,useValue:"root"},{provide:Sa,useFactory:Fue,deps:[]},{provide:kD,useClass:Nue,multi:!0,deps:[Xr,Gt,Ea]},{provide:kD,useClass:Tue,multi:!0,deps:[Xr]},DU,AU,LU,{provide:j8,useExisting:DU},{provide:M6,useClass:Eue,deps:[]},[]],kU=(()=>{let t=class t{constructor(r){}static withServerTransition(r){return{ngModule:t,providers:[{provide:s9,useValue:r.appId}]}}};t.\u0275fac=function(i){return new(i||t)(ge(Pue,12))},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({providers:[...Bue,...$ue],imports:[U9,QB]});let e=t;return e})();var TU=(()=>{let t=class t{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};t.\u0275fac=function(i){return new(i||t)(ge(Xr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var FD=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:function(i){let o=null;return i?o=new(i||t):o=ge(Uue),o},providedIn:"root"});let e=t;return e})(),Uue=(()=>{let t=class t extends FD{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case M2.NONE:return i;case M2.HTML:return Fs(i,"HTML")?b2(i):kE(this._doc,String(i)).toString();case M2.STYLE:return Fs(i,"Style")?b2(i):i;case M2.SCRIPT:if(Fs(i,"Script"))return b2(i);throw new ye(5200,!1);case M2.URL:return Fs(i,"URL")?b2(i):h9(String(i));case M2.RESOURCE_URL:if(Fs(i,"ResourceURL"))return b2(i);throw new ye(5201,!1);default:throw new ye(5202,!1)}}bypassSecurityTrustHtml(r){return k$(r)}bypassSecurityTrustStyle(r){return T$(r)}bypassSecurityTrustScript(r){return I$(r)}bypassSecurityTrustUrl(r){return F$(r)}bypassSecurityTrustResourceUrl(r){return R$(r)}};t.\u0275fac=function(i){return new(i||t)(ge(Xr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var jU=(()=>{let t=class t{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};t.\u0275fac=function(i){return new(i||t)(W(J1),W(Wr))},t.\u0275dir=dn({type:t});let e=t;return e})(),ig=(()=>{let t=class t extends jU{};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Is(t)))(o||t)}})(),t.\u0275dir=dn({type:t,features:[Ao]});let e=t;return e})(),f5=new De(""),jue={provide:f5,useExisting:Ts(()=>Gs),multi:!0},Gs=(()=>{let t=class t extends ig{writeValue(r){this.setProperty("checked",r)}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Is(t)))(o||t)}})(),t.\u0275dir=dn({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){i&1&&Te("change",function(s){return o.onChange(s.target.checked)})("blur",function(){return o.onTouched()})},features:[rl([jue]),Ao]});let e=t;return e})(),que={provide:f5,useExisting:Ts(()=>Sr),multi:!0};function Gue(){let e=La()?La().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var Wue=new De(""),Sr=(()=>{let t=class t extends jU{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Gue())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};t.\u0275fac=function(i){return new(i||t)(W(J1),W(Wr),W(Wue,8))},t.\u0275dir=dn({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Te("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[rl([que]),Ao]});let e=t;return e})();var qU=new De(""),GU=new De("");function WU(e){return e!=null}function YU(e){return d3(e)?Zt(e):e}function XU(e){let t={};return e.forEach(n=>{t=n!=null?x(x({},t),n):t}),Object.keys(t).length===0?null:t}function QU(e,t){return t.map(n=>n(e))}function Yue(e){return!e.validate}function KU(e){return e.map(t=>Yue(t)?t:n=>t.validate(n))}function Xue(e){if(!e)return null;let t=e.filter(WU);return t.length==0?null:function(n){return XU(QU(n,t))}}function PD(e){return e!=null?Xue(KU(e)):null}function Que(e){if(!e)return null;let t=e.filter(WU);return t.length==0?null:function(n){let r=QU(n,t).map(YU);return jw(r).pipe(Qe(XU))}}function $D(e){return e!=null?Que(KU(e)):null}function IU(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Kue(e){return e._rawValidators}function Zue(e){return e._rawAsyncValidators}function OD(e){return e?Array.isArray(e)?e:[e]:[]}function J9(e,t){return Array.isArray(e)?e.includes(t):e===t}function FU(e,t){let n=OD(t);return OD(e).forEach(i=>{J9(n,i)||n.push(i)}),n}function RU(e,t){return OD(t).filter(n=>!J9(e,n))}var eg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=PD(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=$D(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},z6=class extends eg{get formDirective(){return null}get path(){return null}},u5=class extends eg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},tg=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Jue={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},gWe=k(x({},Jue),{"[class.ng-submitted]":"isSubmitted"}),Jn=(()=>{let t=class t extends tg{constructor(r){super(r)}};t.\u0275fac=function(i){return new(i||t)(W(u5,2))},t.\u0275dir=dn({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Z8("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Ao]});let e=t;return e})(),w1=(()=>{let t=class t extends tg{constructor(r){super(r)}};t.\u0275fac=function(i){return new(i||t)(W(z6,10))},t.\u0275dir=dn({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&Z8("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Ao]});let e=t;return e})();var s5="VALID",Z9="INVALID",D6="PENDING",c5="DISABLED";function ZU(e){return(og(e)?e.validators:e)||null}function efe(e){return Array.isArray(e)?PD(e):e||null}function JU(e,t){return(og(t)?t.asyncValidators:e)||null}function tfe(e){return Array.isArray(e)?$D(e):e||null}function og(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function nfe(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new ye(1e3,"");if(!r[n])throw new ye(1001,"")}function rfe(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new ye(1002,"")})}var ng=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===s5}get invalid(){return this.status===Z9}get pending(){return this.status==D6}get disabled(){return this.status===c5}get enabled(){return this.status!==c5}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(FU(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(FU(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(RU(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(RU(t,this._rawAsyncValidators))}hasValidator(t){return J9(this._rawValidators,t)}hasAsyncValidator(t){return J9(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=D6,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=c5,this.errors=null,this._forEachChild(r=>{r.disable(k(x({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(k(x({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=s5,this._forEachChild(r=>{r.enable(k(x({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(k(x({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===s5||this.status===D6)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?c5:s5}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=D6,this._hasOwnPendingAsyncValidator=!0;let n=YU(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Jt,this.statusChanges=new Jt}_calculateStatus(){return this._allControlsDisabled()?c5:this.errors?Z9:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(D6)?D6:this._anyControlsHaveStatus(Z9)?Z9:s5}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){og(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=efe(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=tfe(this._rawAsyncValidators)}},rg=class extends ng{constructor(t,n,r){super(ZU(n),JU(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){rfe(this,!0,t),Object.keys(t).forEach(r=>{nfe(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var BD=new De("CallSetDisabledState",{providedIn:"root",factory:()=>UD}),UD="always";function ife(e,t){return[...t.path,e]}function ej(e,t,n=UD){tj(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),afe(e,t),cfe(e,t),sfe(e,t),ofe(e,t)}function OU(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function ofe(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function tj(e,t){let n=Kue(e);t.validator!==null?e.setValidators(IU(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=Zue(e);t.asyncValidator!==null?e.setAsyncValidators(IU(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();OU(t._rawValidators,i),OU(t._rawAsyncValidators,i)}function afe(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&nj(e,t)})}function sfe(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&nj(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function nj(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function cfe(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function lfe(e,t){e==null,tj(e,t)}function ufe(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function ffe(e){return Object.getPrototypeOf(e.constructor)===ig}function dfe(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function pfe(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===Sr?n=o:ffe(o)?r=o:i=o}),i||r||n||null}var hfe={provide:z6,useExisting:Ts(()=>ji)},l5=Promise.resolve(),ji=(()=>{let t=class t extends z6{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Jt,this.form=new rg({},PD(r),$D(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){l5.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),ej(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){l5.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){l5.then(()=>{let i=this._findContainer(r.path),o=new rg({});lfe(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){l5.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){l5.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,dfe(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};t.\u0275fac=function(i){return new(i||t)(W(qU,10),W(GU,10),W(BD,8))},t.\u0275dir=dn({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&Te("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{options:[qr.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[rl([hfe]),Ao]});let e=t;return e})();function PU(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function $U(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var mfe=class extends ng{constructor(t=null,n,r){super(ZU(n),JU(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),og(n)&&(n.nonNullable||n.initialValueIsDefault)&&($U(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){PU(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){PU(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){$U(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var gfe={provide:u5,useExisting:Ts(()=>Un)},BU=Promise.resolve(),Un=(()=>{let t=class t extends u5{constructor(r,i,o,a,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this.control=new mfe,this._registered=!1,this.name="",this.update=new Jt,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=pfe(this,a)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),ufe(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ej(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){BU.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&al(i);BU.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?ife(r,this._parent):[r]}};t.\u0275fac=function(i){return new(i||t)(W(z6,9),W(qU,10),W(GU,10),W(f5,10),W(Os,8),W(BD,8))},t.\u0275dir=dn({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[qr.None,"disabled","isDisabled"],model:[qr.None,"ngModel","model"],options:[qr.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[rl([gfe]),Ao,Lo]});let e=t;return e})(),S1=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=dn({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let e=t;return e})();var vfe={provide:f5,useExisting:Ts(()=>H6),multi:!0};function rj(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function yfe(e){return e.split(":")[0]}var H6=(()=>{let t=class t extends ig{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),o=rj(i,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=yfe(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Is(t)))(o||t)}})(),t.\u0275dir=dn({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&Te("change",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[rl([vfe]),Ao]});let e=t;return e})(),L6=(()=>{let t=class t{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(rj(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(i){return new(i||t)(W(Wr),W(J1),W(H6,9))},t.\u0275dir=dn({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let e=t;return e})(),xfe={provide:f5,useExisting:Ts(()=>ij),multi:!0};function UU(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function Cfe(e){return e.split(":")[0]}var ij=(()=>{let t=class t extends ig{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let o=r.map(a=>this._getOptionId(a));i=(a,s)=>{a._setSelected(o.indexOf(s.toString())>-1)}}else i=(o,a)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let o=[],a=i.selectedOptions;if(a!==void 0){let s=a;for(let c=0;c<s.length;c++){let l=s[c],u=this._getOptionValue(l.value);o.push(u)}}else{let s=i.options;for(let c=0;c<s.length;c++){let l=s[c];if(l.selected){let u=this._getOptionValue(l.value);o.push(u)}}}this.value=o,r(o)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=Cfe(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Is(t)))(o||t)}})(),t.\u0275dir=dn({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&Te("change",function(s){return o.onChange(s.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[rl([xfe]),Ao]});let e=t;return e})(),A6=(()=>{let t=class t{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(UU(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(UU(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(i){return new(i||t)(W(Wr),W(J1),W(ij,9))},t.\u0275dir=dn({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let e=t;return e})();var bfe=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({});let e=t;return e})();var oj=(()=>{let t=class t{static withConfig(r){return{ngModule:t,providers:[{provide:BD,useValue:r.callSetDisabledState??UD}]}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({imports:[bfe]});let e=t;return e})();function aj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aj(Object(n),!0).forEach(function(r){fr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vg(e){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vg(e)}function Mfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wfe(e,t,n){return t&&sj(e.prototype,t),n&&sj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oz(e,t){return Efe(e)||zfe(e,t)||Nj(e,t)||Lfe()}function C5(e){return Sfe(e)||Dfe(e)||Nj(e)||Hfe()}function Sfe(e){if(Array.isArray(e))return YD(e)}function Efe(e){if(Array.isArray(e))return e}function Dfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(c){o=!0,s=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function Nj(e,t){if(e){if(typeof e=="string")return YD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YD(e,t)}}function YD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var cj=function(){},az={},_j={},kj=null,Tj={mark:cj,measure:cj};try{typeof window<"u"&&(az=window),typeof document<"u"&&(_j=document),typeof MutationObserver<"u"&&(kj=MutationObserver),typeof performance<"u"&&(Tj=performance)}catch{}var Afe=az.navigator||{},lj=Afe.userAgent,uj=lj===void 0?"":lj,m3=az,sn=_j,fj=kj,ag=Tj,xWe=!!m3.document,Qs=!!sn.documentElement&&!!sn.head&&typeof sn.addEventListener=="function"&&typeof sn.createElement=="function",Ij=~uj.indexOf("MSIE")||~uj.indexOf("Trident/"),sg,cg,lg,ug,fg,Ws="___FONT_AWESOME___",XD=16,Fj="fa",Rj="svg-inline--fa",ul="data-fa-i2svg",QD="data-fa-pseudo-element",Vfe="data-fa-pseudo-element-pending",sz="data-prefix",cz="data-icon",dj="fontawesome-i2svg",Nfe="async",_fe=["HTML","HEAD","STYLE","SCRIPT"],Oj=function(){try{return!0}catch{return!1}}(),an="classic",zn="sharp",lz=[an,zn];function b5(e){return new Proxy(e,{get:function(n,r){return r in n?n[r]:n[an]}})}var m5=b5((sg={},fr(sg,an,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),fr(sg,zn,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),sg)),g5=b5((cg={},fr(cg,an,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),fr(cg,zn,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),cg)),v5=b5((lg={},fr(lg,an,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),fr(lg,zn,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),lg)),kfe=b5((ug={},fr(ug,an,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),fr(ug,zn,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),ug)),Tfe=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,Pj="fa-layers-text",Ife=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,Ffe=b5((fg={},fr(fg,an,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),fr(fg,zn,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),fg)),$j=[1,2,3,4,5,6,7,8,9,10],Rfe=$j.concat([11,12,13,14,15,16,17,18,19,20]),Ofe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],cl={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},y5=new Set;Object.keys(g5[an]).map(y5.add.bind(y5));Object.keys(g5[zn]).map(y5.add.bind(y5));var Pfe=[].concat(lz,C5(y5),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",cl.GROUP,cl.SWAP_OPACITY,cl.PRIMARY,cl.SECONDARY]).concat($j.map(function(e){return"".concat(e,"x")})).concat(Rfe.map(function(e){return"w-".concat(e)})),p5=m3.FontAwesomeConfig||{};function $fe(e){var t=sn.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function Bfe(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}sn&&typeof sn.querySelector=="function"&&(pj=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]],pj.forEach(function(e){var t=oz(e,2),n=t[0],r=t[1],i=Bfe($fe(n));i!=null&&(p5[r]=i)}));var pj,Bj={styleDefault:"solid",familyDefault:"classic",cssPrefix:Fj,replacementClass:Rj,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};p5.familyPrefix&&(p5.cssPrefix=p5.familyPrefix);var k6=ve(ve({},Bj),p5);k6.autoReplaceSvg||(k6.observeMutations=!1);var ze={};Object.keys(Bj).forEach(function(e){Object.defineProperty(ze,e,{enumerable:!0,set:function(n){k6[e]=n,h5.forEach(function(r){return r(ze)})},get:function(){return k6[e]}})});Object.defineProperty(ze,"familyPrefix",{enumerable:!0,set:function(t){k6.cssPrefix=t,h5.forEach(function(n){return n(ze)})},get:function(){return k6.cssPrefix}});m3.FontAwesomeConfig=ze;var h5=[];function Ufe(e){return h5.push(e),function(){h5.splice(h5.indexOf(e),1)}}var h3=XD,Va={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function jfe(e){if(!(!e||!Qs)){var t=sn.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=sn.head.childNodes,r=null,i=n.length-1;i>-1;i--){var o=n[i],a=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(r=o)}return sn.head.insertBefore(t,r),e}}var qfe="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function x5(){for(var e=12,t="";e-- >0;)t+=qfe[Math.random()*62|0];return t}function T6(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function uz(e){return e.classList?T6(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function Uj(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Gfe(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,'="').concat(Uj(e[n]),'" ')},"").trim()}function Cg(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")},"")}function fz(e){return e.size!==Va.size||e.x!==Va.x||e.y!==Va.y||e.rotate!==Va.rotate||e.flipX||e.flipY}function Wfe(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(t.x*32,", ").concat(t.y*32,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)"),c={transform:"".concat(o," ").concat(a," ").concat(s)},l={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:c,path:l}}function Yfe(e){var t=e.transform,n=e.width,r=n===void 0?XD:n,i=e.height,o=i===void 0?XD:i,a=e.startCentered,s=a===void 0?!1:a,c="";return s&&Ij?c+="translate(".concat(t.x/h3-r/2,"em, ").concat(t.y/h3-o/2,"em) "):s?c+="translate(calc(-50% + ".concat(t.x/h3,"em), calc(-50% + ").concat(t.y/h3,"em)) "):c+="translate(".concat(t.x/h3,"em, ").concat(t.y/h3,"em) "),c+="scale(".concat(t.size/h3*(t.flipX?-1:1),", ").concat(t.size/h3*(t.flipY?-1:1),") "),c+="rotate(".concat(t.rotate,"deg) "),c}var Xfe=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function jj(){var e=Fj,t=Rj,n=ze.cssPrefix,r=ze.replacementClass,i=Xfe;if(n!==e||r!==t){var o=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(o,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(s,".".concat(r))}return i}var hj=!1;function jD(){ze.autoAddCss&&!hj&&(jfe(jj()),hj=!0)}var Qfe={mixout:function(){return{dom:{css:jj,insertCss:jD}}},hooks:function(){return{beforeDOMElementCreation:function(){jD()},beforeI2svg:function(){jD()}}}},Ys=m3||{};Ys[Ws]||(Ys[Ws]={});Ys[Ws].styles||(Ys[Ws].styles={});Ys[Ws].hooks||(Ys[Ws].hooks={});Ys[Ws].shims||(Ys[Ws].shims=[]);var E2=Ys[Ws],qj=[],Kfe=function e(){sn.removeEventListener("DOMContentLoaded",e),yg=1,qj.map(function(t){return t()})},yg=!1;Qs&&(yg=(sn.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(sn.readyState),yg||sn.addEventListener("DOMContentLoaded",Kfe));function Zfe(e){Qs&&(yg?setTimeout(e,0):qj.push(e))}function M5(e){var t=e.tag,n=e.attributes,r=n===void 0?{}:n,i=e.children,o=i===void 0?[]:i;return typeof e=="string"?Uj(e):"<".concat(t," ").concat(Gfe(r),">").concat(o.map(M5).join(""),"</").concat(t,">")}function mj(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}var Jfe=function(t,n){return function(r,i,o,a){return t.call(n,r,i,o,a)}},qD=function(t,n,r,i){var o=Object.keys(t),a=o.length,s=i!==void 0?Jfe(n,i):n,c,l,u;for(r===void 0?(c=1,u=t[o[0]]):(c=0,u=r);c<a;c++)l=o[c],u=s(u,t[l],l,t);return u};function e8e(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);(o&64512)==56320?t.push(((i&1023)<<10)+(o&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}function KD(e){var t=e8e(e);return t.length===1?t[0].toString(16):null}function t8e(e,t){var n=e.length,r=e.charCodeAt(t),i;return r>=55296&&r<=56319&&n>t+1&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function gj(e){return Object.keys(e).reduce(function(t,n){var r=e[n],i=!!r.icon;return i?t[r.iconName]=r.icon:t[n]=r,t},{})}function ZD(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,o=gj(t);typeof E2.hooks.addPack=="function"&&!i?E2.hooks.addPack(e,gj(t)):E2.styles[e]=ve(ve({},E2.styles[e]||{}),o),e==="fas"&&ZD("fa",t)}var dg,pg,hg,V6=E2.styles,n8e=E2.shims,r8e=(dg={},fr(dg,an,Object.values(v5[an])),fr(dg,zn,Object.values(v5[zn])),dg),dz=null,Gj={},Wj={},Yj={},Xj={},Qj={},i8e=(pg={},fr(pg,an,Object.keys(m5[an])),fr(pg,zn,Object.keys(m5[zn])),pg);function o8e(e){return~Pfe.indexOf(e)}function a8e(e,t){var n=t.split("-"),r=n[0],i=n.slice(1).join("-");return r===e&&i!==""&&!o8e(i)?i:null}var Kj=function(){var t=function(o){return qD(V6,function(a,s,c){return a[c]=qD(s,o,{}),a},{})};Gj=t(function(i,o,a){if(o[3]&&(i[o[3]]=a),o[2]){var s=o[2].filter(function(c){return typeof c=="number"});s.forEach(function(c){i[c.toString(16)]=a})}return i}),Wj=t(function(i,o,a){if(i[a]=a,o[2]){var s=o[2].filter(function(c){return typeof c=="string"});s.forEach(function(c){i[c]=a})}return i}),Qj=t(function(i,o,a){var s=o[2];return i[a]=a,s.forEach(function(c){i[c]=a}),i});var n="far"in V6||ze.autoFetchSvg,r=qD(n8e,function(i,o){var a=o[0],s=o[1],c=o[2];return s==="far"&&!n&&(s="fas"),typeof a=="string"&&(i.names[a]={prefix:s,iconName:c}),typeof a=="number"&&(i.unicodes[a.toString(16)]={prefix:s,iconName:c}),i},{names:{},unicodes:{}});Yj=r.names,Xj=r.unicodes,dz=bg(ze.styleDefault,{family:ze.familyDefault})};Ufe(function(e){dz=bg(e.styleDefault,{family:ze.familyDefault})});Kj();function pz(e,t){return(Gj[e]||{})[t]}function s8e(e,t){return(Wj[e]||{})[t]}function ll(e,t){return(Qj[e]||{})[t]}function Zj(e){return Yj[e]||{prefix:null,iconName:null}}function c8e(e){var t=Xj[e],n=pz("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function g3(){return dz}var hz=function(){return{prefix:null,iconName:null,rest:[]}};function bg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.family,r=n===void 0?an:n,i=m5[r][e],o=g5[r][e]||g5[r][i],a=e in E2.styles?e:null;return o||a||null}var vj=(hg={},fr(hg,an,Object.keys(v5[an])),fr(hg,zn,Object.keys(v5[zn])),hg);function Mg(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,i=r===void 0?!1:r,o=(t={},fr(t,an,"".concat(ze.cssPrefix,"-").concat(an)),fr(t,zn,"".concat(ze.cssPrefix,"-").concat(zn)),t),a=null,s=an;(e.includes(o[an])||e.some(function(l){return vj[an].includes(l)}))&&(s=an),(e.includes(o[zn])||e.some(function(l){return vj[zn].includes(l)}))&&(s=zn);var c=e.reduce(function(l,u){var f=a8e(ze.cssPrefix,u);if(V6[u]?(u=r8e[s].includes(u)?kfe[s][u]:u,a=u,l.prefix=u):i8e[s].indexOf(u)>-1?(a=u,l.prefix=bg(u,{family:s})):f?l.iconName=f:u!==ze.replacementClass&&u!==o[an]&&u!==o[zn]&&l.rest.push(u),!i&&l.prefix&&l.iconName){var d=a==="fa"?Zj(l.iconName):{},p=ll(l.prefix,l.iconName);d.prefix&&(a=null),l.iconName=d.iconName||p||l.iconName,l.prefix=d.prefix||l.prefix,l.prefix==="far"&&!V6.far&&V6.fas&&!ze.autoFetchSvg&&(l.prefix="fas")}return l},hz());return(e.includes("fa-brands")||e.includes("fab"))&&(c.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(c.prefix="fad"),!c.prefix&&s===zn&&(V6.fass||ze.autoFetchSvg)&&(c.prefix="fass",c.iconName=ll(c.prefix,c.iconName)||c.iconName),(c.prefix==="fa"||a==="fa")&&(c.prefix=g3()||"fas"),c}var l8e=function(){function e(){Mfe(this,e),this.definitions={}}return wfe(e,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.reduce(this._pullDefinitions,{});Object.keys(a).forEach(function(s){n.definitions[s]=ve(ve({},n.definitions[s]||{}),a[s]),ZD(s,a[s]);var c=v5[an][s];c&&ZD(c,a[s]),Kj()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(o){var a=i[o],s=a.prefix,c=a.iconName,l=a.icon,u=l[2];n[s]||(n[s]={}),u.length>0&&u.forEach(function(f){typeof f=="string"&&(n[s][f]=l)}),n[s][c]=l}),n}}]),e}(),yj=[],N6={},_6={},u8e=Object.keys(_6);function f8e(e,t){var n=t.mixoutsTo;return yj=e,N6={},Object.keys(_6).forEach(function(r){u8e.indexOf(r)===-1&&delete _6[r]}),yj.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(a){typeof i[a]=="function"&&(n[a]=i[a]),vg(i[a])==="object"&&Object.keys(i[a]).forEach(function(s){n[a]||(n[a]={}),n[a][s]=i[a][s]})}),r.hooks){var o=r.hooks();Object.keys(o).forEach(function(a){N6[a]||(N6[a]=[]),N6[a].push(o[a])})}r.provides&&r.provides(_6)}),n}function JD(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=N6[e]||[];return o.forEach(function(a){t=a.apply(null,[t].concat(r))}),t}function fl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=N6[e]||[];i.forEach(function(o){o.apply(null,n)})}function Xs(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return _6[e]?_6[e].apply(null,t):void 0}function ez(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,n=e.prefix||g3();if(t)return t=ll(n,t)||t,mj(Jj.definitions,n,t)||mj(E2.styles,n,t)}var Jj=new l8e,d8e=function(){ze.autoReplaceSvg=!1,ze.observeMutations=!1,fl("noAuto")},p8e={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Qs?(fl("beforeI2svg",t),Xs("pseudoElements2svg",t),Xs("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot;ze.autoReplaceSvg===!1&&(ze.autoReplaceSvg=!0),ze.observeMutations=!0,Zfe(function(){m8e({autoReplaceSvgRoot:n}),fl("watch",t)})}},h8e={icon:function(t){if(t===null)return null;if(vg(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:ll(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var n=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],r=bg(t[0]);return{prefix:r,iconName:ll(r,n)||n}}if(typeof t=="string"&&(t.indexOf("".concat(ze.cssPrefix,"-"))>-1||t.match(Tfe))){var i=Mg(t.split(" "),{skipLookups:!0});return{prefix:i.prefix||g3(),iconName:ll(i.prefix,i.iconName)||i.iconName}}if(typeof t=="string"){var o=g3();return{prefix:o,iconName:ll(o,t)||t}}}},to={noAuto:d8e,config:ze,dom:p8e,parse:h8e,library:Jj,findIconDefinition:ez,toHtml:M5},m8e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot,r=n===void 0?sn:n;(Object.keys(E2.styles).length>0||ze.autoFetchSvg)&&Qs&&ze.autoReplaceSvg&&to.dom.i2svg({node:r})};function wg(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(r){return M5(r)})}}),Object.defineProperty(e,"node",{get:function(){if(Qs){var r=sn.createElement("div");return r.innerHTML=e.html,r.children}}}),e}function g8e(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,o=e.styles,a=e.transform;if(fz(a)&&n.found&&!r.found){var s=n.width,c=n.height,l={x:s/c/2,y:.5};i.style=Cg(ve(ve({},o),{},{"transform-origin":"".concat(l.x+a.x/16,"em ").concat(l.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}function v8e(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,o=e.symbol,a=o===!0?"".concat(t,"-").concat(ze.cssPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ve(ve({},i),{},{id:a}),children:r}]}]}function mz(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,o=e.iconName,a=e.transform,s=e.symbol,c=e.title,l=e.maskId,u=e.titleId,f=e.extra,d=e.watchable,p=d===void 0?!1:d,h=r.found?r:n,m=h.width,g=h.height,v=i==="fak",y=[ze.replacementClass,o?"".concat(ze.cssPrefix,"-").concat(o):""].filter(function(D){return f.classes.indexOf(D)===-1}).filter(function(D){return D!==""||!!D}).concat(f.classes).join(" "),C={children:[],attributes:ve(ve({},f.attributes),{},{"data-prefix":i,"data-icon":o,class:y,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},b=v&&!~f.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};p&&(C.attributes[ul]=""),c&&(C.children.push({tag:"title",attributes:{id:C.attributes["aria-labelledby"]||"title-".concat(u||x5())},children:[c]}),delete C.attributes.title);var M=ve(ve({},C),{},{prefix:i,iconName:o,main:n,mask:r,maskId:l,transform:a,symbol:s,styles:ve(ve({},b),f.styles)}),S=r.found&&n.found?Xs("generateAbstractMask",M)||{children:[],attributes:{}}:Xs("generateAbstractIcon",M)||{children:[],attributes:{}},w=S.children,E=S.attributes;return M.children=w,M.attributes=E,s?v8e(M):g8e(M)}function xj(e){var t=e.content,n=e.width,r=e.height,i=e.transform,o=e.title,a=e.extra,s=e.watchable,c=s===void 0?!1:s,l=ve(ve(ve({},a.attributes),o?{title:o}:{}),{},{class:a.classes.join(" ")});c&&(l[ul]="");var u=ve({},a.styles);fz(i)&&(u.transform=Yfe({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var f=Cg(u);f.length>0&&(l.style=f);var d=[];return d.push({tag:"span",attributes:l,children:[t]}),o&&d.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),d}function y8e(e){var t=e.content,n=e.title,r=e.extra,i=ve(ve(ve({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),o=Cg(r.styles);o.length>0&&(i.style=o);var a=[];return a.push({tag:"span",attributes:i,children:[t]}),n&&a.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),a}var GD=E2.styles;function tz(e){var t=e[0],n=e[1],r=e.slice(4),i=oz(r,1),o=i[0],a=null;return Array.isArray(o)?a={tag:"g",attributes:{class:"".concat(ze.cssPrefix,"-").concat(cl.GROUP)},children:[{tag:"path",attributes:{class:"".concat(ze.cssPrefix,"-").concat(cl.SECONDARY),fill:"currentColor",d:o[0]}},{tag:"path",attributes:{class:"".concat(ze.cssPrefix,"-").concat(cl.PRIMARY),fill:"currentColor",d:o[1]}}]}:a={tag:"path",attributes:{fill:"currentColor",d:o}},{found:!0,width:t,height:n,icon:a}}var x8e={found:!1,width:512,height:512};function C8e(e,t){!Oj&&!ze.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function nz(e,t){var n=t;return t==="fa"&&ze.styleDefault!==null&&(t=g3()),new Promise(function(r,i){var o={found:!1,width:512,height:512,icon:Xs("missingIconAbstract")||{}};if(n==="fa"){var a=Zj(e)||{};e=a.iconName||e,t=a.prefix||t}if(e&&t&&GD[t]&&GD[t][e]){var s=GD[t][e];return r(tz(s))}C8e(e,t),r(ve(ve({},x8e),{},{icon:ze.showMissingIcons&&e?Xs("missingIconAbstract")||{}:{}}))})}var Cj=function(){},rz=ze.measurePerformance&&ag&&ag.mark&&ag.measure?ag:{mark:Cj,measure:Cj},d5='FA "6.5.1"',b8e=function(t){return rz.mark("".concat(d5," ").concat(t," begins")),function(){return eq(t)}},eq=function(t){rz.mark("".concat(d5," ").concat(t," ends")),rz.measure("".concat(d5," ").concat(t),"".concat(d5," ").concat(t," begins"),"".concat(d5," ").concat(t," ends"))},gz={begin:b8e,end:eq},mg=function(){};function bj(e){var t=e.getAttribute?e.getAttribute(ul):null;return typeof t=="string"}function M8e(e){var t=e.getAttribute?e.getAttribute(sz):null,n=e.getAttribute?e.getAttribute(cz):null;return t&&n}function w8e(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(ze.replacementClass)}function S8e(){if(ze.autoReplaceSvg===!0)return gg.replace;var e=gg[ze.autoReplaceSvg];return e||gg.replace}function E8e(e){return sn.createElementNS("http://www.w3.org/2000/svg",e)}function D8e(e){return sn.createElement(e)}function tq(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.ceFn,r=n===void 0?e.tag==="svg"?E8e:D8e:n;if(typeof e=="string")return sn.createTextNode(e);var i=r(e.tag);Object.keys(e.attributes||[]).forEach(function(a){i.setAttribute(a,e.attributes[a])});var o=e.children||[];return o.forEach(function(a){i.appendChild(tq(a,{ceFn:r}))}),i}function z8e(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var gg={replace:function(t){var n=t[0];if(n.parentNode)if(t[1].forEach(function(i){n.parentNode.insertBefore(tq(i),n)}),n.getAttribute(ul)===null&&ze.keepOriginalSource){var r=sn.createComment(z8e(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(t){var n=t[0],r=t[1];if(~uz(n).indexOf(ze.replacementClass))return gg.replace(t);var i=new RegExp("".concat(ze.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var o=r[0].attributes.class.split(" ").reduce(function(s,c){return c===ze.replacementClass||c.match(i)?s.toSvg.push(c):s.toNode.push(c),s},{toNode:[],toSvg:[]});r[0].attributes.class=o.toSvg.join(" "),o.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",o.toNode.join(" "))}var a=r.map(function(s){return M5(s)}).join(`
`);n.setAttribute(ul,""),n.innerHTML=a}};function Mj(e){e()}function nq(e,t){var n=typeof t=="function"?t:mg;if(e.length===0)n();else{var r=Mj;ze.mutateApproach===Nfe&&(r=m3.requestAnimationFrame||Mj),r(function(){var i=S8e(),o=gz.begin("mutate");e.map(i),o(),n()})}}var vz=!1;function rq(){vz=!0}function iz(){vz=!1}var xg=null;function wj(e){if(fj&&ze.observeMutations){var t=e.treeCallback,n=t===void 0?mg:t,r=e.nodeCallback,i=r===void 0?mg:r,o=e.pseudoElementsCallback,a=o===void 0?mg:o,s=e.observeMutationsRoot,c=s===void 0?sn:s;xg=new fj(function(l){if(!vz){var u=g3();T6(l).forEach(function(f){if(f.type==="childList"&&f.addedNodes.length>0&&!bj(f.addedNodes[0])&&(ze.searchPseudoElements&&a(f.target),n(f.target)),f.type==="attributes"&&f.target.parentNode&&ze.searchPseudoElements&&a(f.target.parentNode),f.type==="attributes"&&bj(f.target)&&~Ofe.indexOf(f.attributeName))if(f.attributeName==="class"&&M8e(f.target)){var d=Mg(uz(f.target)),p=d.prefix,h=d.iconName;f.target.setAttribute(sz,p||u),h&&f.target.setAttribute(cz,h)}else w8e(f.target)&&i(f.target)})}}),Qs&&xg.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function H8e(){xg&&xg.disconnect()}function L8e(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce(function(r,i){var o=i.split(":"),a=o[0],s=o.slice(1);return a&&s.length>0&&(r[a]=s.join(":").trim()),r},{})),n}function A8e(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=e.innerText!==void 0?e.innerText.trim():"",i=Mg(uz(e));return i.prefix||(i.prefix=g3()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=s8e(i.prefix,e.innerText)||pz(i.prefix,KD(e.innerText))),!i.iconName&&ze.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function V8e(e){var t=T6(e.attributes).reduce(function(i,o){return i.name!=="class"&&i.name!=="style"&&(i[o.name]=o.value),i},{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return ze.autoA11y&&(n?t["aria-labelledby"]="".concat(ze.replacementClass,"-title-").concat(r||x5()):(t["aria-hidden"]="true",t.focusable="false")),t}function N8e(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Va,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Sj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=A8e(e),r=n.iconName,i=n.prefix,o=n.rest,a=V8e(e),s=JD("parseNodeAttributes",{},e),c=t.styleParser?L8e(e):[];return ve({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:Va,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:o,styles:c,attributes:a}},s)}var _8e=E2.styles;function iq(e){var t=ze.autoReplaceSvg==="nest"?Sj(e,{styleParser:!1}):Sj(e);return~t.extra.classes.indexOf(Pj)?Xs("generateLayersText",e,t):Xs("generateSvgReplacementMutation",e,t)}var v3=new Set;lz.map(function(e){v3.add("fa-".concat(e))});Object.keys(m5[an]).map(v3.add.bind(v3));Object.keys(m5[zn]).map(v3.add.bind(v3));v3=C5(v3);function Ej(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Qs)return Promise.resolve();var n=sn.documentElement.classList,r=function(f){return n.add("".concat(dj,"-").concat(f))},i=function(f){return n.remove("".concat(dj,"-").concat(f))},o=ze.autoFetchSvg?v3:lz.map(function(u){return"fa-".concat(u)}).concat(Object.keys(_8e));o.includes("fa")||o.push("fa");var a=[".".concat(Pj,":not([").concat(ul,"])")].concat(o.map(function(u){return".".concat(u,":not([").concat(ul,"])")})).join(", ");if(a.length===0)return Promise.resolve();var s=[];try{s=T6(e.querySelectorAll(a))}catch{}if(s.length>0)r("pending"),i("complete");else return Promise.resolve();var c=gz.begin("onTree"),l=s.reduce(function(u,f){try{var d=iq(f);d&&u.push(d)}catch(p){Oj||p.name==="MissingIcon"&&console.error(p)}return u},[]);return new Promise(function(u,f){Promise.all(l).then(function(d){nq(d,function(){r("active"),r("complete"),i("pending"),typeof t=="function"&&t(),c(),u()})}).catch(function(d){c(),f(d)})})}function k8e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;iq(e).then(function(n){n&&nq([n],t)})}function T8e(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(t||{}).icon?t:ez(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:ez(i||{})),e(r,ve(ve({},n),{},{mask:i}))}}var I8e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?Va:r,o=n.symbol,a=o===void 0?!1:o,s=n.mask,c=s===void 0?null:s,l=n.maskId,u=l===void 0?null:l,f=n.title,d=f===void 0?null:f,p=n.titleId,h=p===void 0?null:p,m=n.classes,g=m===void 0?[]:m,v=n.attributes,y=v===void 0?{}:v,C=n.styles,b=C===void 0?{}:C;if(t){var M=t.prefix,S=t.iconName,w=t.icon;return wg(ve({type:"icon"},t),function(){return fl("beforeDOMElementCreation",{iconDefinition:t,params:n}),ze.autoA11y&&(d?y["aria-labelledby"]="".concat(ze.replacementClass,"-title-").concat(h||x5()):(y["aria-hidden"]="true",y.focusable="false")),mz({icons:{main:tz(w),mask:c?tz(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:M,iconName:S,transform:ve(ve({},Va),i),symbol:a,title:d,maskId:u,titleId:h,extra:{attributes:y,styles:b,classes:g}})})}},F8e={mixout:function(){return{icon:T8e(I8e)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=Ej,n.nodeCallback=k8e,n}}},provides:function(t){t.i2svg=function(n){var r=n.node,i=r===void 0?sn:r,o=n.callback,a=o===void 0?function(){}:o;return Ej(i,a)},t.generateSvgReplacementMutation=function(n,r){var i=r.iconName,o=r.title,a=r.titleId,s=r.prefix,c=r.transform,l=r.symbol,u=r.mask,f=r.maskId,d=r.extra;return new Promise(function(p,h){Promise.all([nz(i,s),u.iconName?nz(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=oz(m,2),v=g[0],y=g[1];p([n,mz({icons:{main:v,mask:y},prefix:s,iconName:i,transform:c,symbol:l,maskId:f,title:o,titleId:a,extra:d,watchable:!0})])}).catch(h)})},t.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,o=n.main,a=n.transform,s=n.styles,c=Cg(s);c.length>0&&(i.style=c);var l;return fz(a)&&(l=Xs("generateAbstractTransformGrouping",{main:o,transform:a,containerWidth:o.width,iconWidth:o.width})),r.push(l||o.icon),{children:r,attributes:i}}}},R8e={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,o=i===void 0?[]:i;return wg({type:"layer"},function(){fl("beforeDOMElementCreation",{assembler:n,params:r});var a=[];return n(function(s){Array.isArray(s)?s.map(function(c){a=a.concat(c.abstract)}):a=a.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(ze.cssPrefix,"-layers")].concat(C5(o)).join(" ")},children:a}]})}}}},O8e={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,o=i===void 0?null:i,a=r.classes,s=a===void 0?[]:a,c=r.attributes,l=c===void 0?{}:c,u=r.styles,f=u===void 0?{}:u;return wg({type:"counter",content:n},function(){return fl("beforeDOMElementCreation",{content:n,params:r}),y8e({content:n.toString(),title:o,extra:{attributes:l,styles:f,classes:["".concat(ze.cssPrefix,"-layers-counter")].concat(C5(s))}})})}}}},P8e={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,o=i===void 0?Va:i,a=r.title,s=a===void 0?null:a,c=r.classes,l=c===void 0?[]:c,u=r.attributes,f=u===void 0?{}:u,d=r.styles,p=d===void 0?{}:d;return wg({type:"text",content:n},function(){return fl("beforeDOMElementCreation",{content:n,params:r}),xj({content:n,transform:ve(ve({},Va),o),title:s,extra:{attributes:f,styles:p,classes:["".concat(ze.cssPrefix,"-layers-text")].concat(C5(l))}})})}}},provides:function(t){t.generateLayersText=function(n,r){var i=r.title,o=r.transform,a=r.extra,s=null,c=null;if(Ij){var l=parseInt(getComputedStyle(n).fontSize,10),u=n.getBoundingClientRect();s=u.width/l,c=u.height/l}return ze.autoA11y&&!i&&(a.attributes["aria-hidden"]="true"),Promise.resolve([n,xj({content:n.innerHTML,width:s,height:c,transform:o,title:i,extra:a,watchable:!0})])}}},$8e=new RegExp('"',"ug"),Dj=[1105920,1112319];function B8e(e){var t=e.replace($8e,""),n=t8e(t,0),r=n>=Dj[0]&&n<=Dj[1],i=t.length===2?t[0]===t[1]:!1;return{value:KD(i?t[0]:t),isSecondary:r||i}}function zj(e,t){var n="".concat(Vfe).concat(t.replace(":","-"));return new Promise(function(r,i){if(e.getAttribute(n)!==null)return r();var o=T6(e.children),a=o.filter(function(w){return w.getAttribute(QD)===t})[0],s=m3.getComputedStyle(e,t),c=s.getPropertyValue("font-family").match(Ife),l=s.getPropertyValue("font-weight"),u=s.getPropertyValue("content");if(a&&!c)return e.removeChild(a),r();if(c&&u!=="none"&&u!==""){var f=s.getPropertyValue("content"),d=~["Sharp"].indexOf(c[2])?zn:an,p=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?g5[d][c[2].toLowerCase()]:Ffe[d][l],h=B8e(f),m=h.value,g=h.isSecondary,v=c[0].startsWith("FontAwesome"),y=pz(p,m),C=y;if(v){var b=c8e(m);b.iconName&&b.prefix&&(y=b.iconName,p=b.prefix)}if(y&&!g&&(!a||a.getAttribute(sz)!==p||a.getAttribute(cz)!==C)){e.setAttribute(n,C),a&&e.removeChild(a);var M=N8e(),S=M.extra;S.attributes[QD]=t,nz(y,p).then(function(w){var E=mz(ve(ve({},M),{},{icons:{main:w,mask:hz()},prefix:p,iconName:C,extra:S,watchable:!0})),D=sn.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(D,e.firstChild):e.appendChild(D),D.outerHTML=E.map(function(H){return M5(H)}).join(`
`),e.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function U8e(e){return Promise.all([zj(e,"::before"),zj(e,"::after")])}function j8e(e){return e.parentNode!==document.head&&!~_fe.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(QD)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function Hj(e){if(Qs)return new Promise(function(t,n){var r=T6(e.querySelectorAll("*")).filter(j8e).map(U8e),i=gz.begin("searchPseudoElements");rq(),Promise.all(r).then(function(){i(),iz(),t()}).catch(function(){i(),iz(),n()})})}var q8e={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=Hj,n}}},provides:function(t){t.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?sn:r;ze.searchPseudoElements&&Hj(i)}}},Lj=!1,G8e={mixout:function(){return{dom:{unwatch:function(){rq(),Lj=!0}}}},hooks:function(){return{bootstrap:function(){wj(JD("mutationObserverCallbacks",{}))},noAuto:function(){H8e()},watch:function(n){var r=n.observeMutationsRoot;Lj?iz():wj(JD("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},Aj=function(t){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(r,i){var o=i.toLowerCase().split("-"),a=o[0],s=o.slice(1).join("-");if(a&&s==="h")return r.flipX=!0,r;if(a&&s==="v")return r.flipY=!0,r;if(s=parseFloat(s),isNaN(s))return r;switch(a){case"grow":r.size=r.size+s;break;case"shrink":r.size=r.size-s;break;case"left":r.x=r.x-s;break;case"right":r.x=r.x+s;break;case"up":r.y=r.y-s;break;case"down":r.y=r.y+s;break;case"rotate":r.rotate=r.rotate+s;break}return r},n)},W8e={mixout:function(){return{parse:{transform:function(n){return Aj(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=Aj(i)),n}}},provides:function(t){t.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,o=n.containerWidth,a=n.iconWidth,s={transform:"translate(".concat(o/2," 256)")},c="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),f={transform:"".concat(c," ").concat(l," ").concat(u)},d={transform:"translate(".concat(a/2*-1," -256)")},p={outer:s,inner:f,path:d};return{tag:"g",attributes:ve({},p.outer),children:[{tag:"g",attributes:ve({},p.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:ve(ve({},r.icon.attributes),p.path)}]}]}}}},WD={x:0,y:0,width:"100%",height:"100%"};function Vj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function Y8e(e){return e.tag==="g"?e.children:[e]}var X8e={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),o=i?Mg(i.split(" ").map(function(a){return a.trim()})):hz();return o.prefix||(o.prefix=g3()),n.mask=o,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(t){t.generateAbstractMask=function(n){var r=n.children,i=n.attributes,o=n.main,a=n.mask,s=n.maskId,c=n.transform,l=o.width,u=o.icon,f=a.width,d=a.icon,p=Wfe({transform:c,containerWidth:f,iconWidth:l}),h={tag:"rect",attributes:ve(ve({},WD),{},{fill:"white"})},m=u.children?{children:u.children.map(Vj)}:{},g={tag:"g",attributes:ve({},p.inner),children:[Vj(ve({tag:u.tag,attributes:ve(ve({},u.attributes),p.path)},m))]},v={tag:"g",attributes:ve({},p.outer),children:[g]},y="mask-".concat(s||x5()),C="clip-".concat(s||x5()),b={tag:"mask",attributes:ve(ve({},WD),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,v]},M={tag:"defs",children:[{tag:"clipPath",attributes:{id:C},children:Y8e(d)},b]};return r.push(M,{tag:"rect",attributes:ve({fill:"currentColor","clip-path":"url(#".concat(C,")"),mask:"url(#".concat(y,")")},WD)}),{children:r,attributes:i}}}},Q8e={provides:function(t){var n=!1;m3.matchMedia&&(n=m3.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},o={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:ve(ve({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var a=ve(ve({},o),{},{attributeName:"opacity"}),s={tag:"circle",attributes:ve(ve({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||s.children.push({tag:"animate",attributes:ve(ve({},o),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:ve(ve({},a),{},{values:"1;0;1;1;0;1;"})}),r.push(s),r.push({tag:"path",attributes:ve(ve({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:ve(ve({},a),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:ve(ve({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:ve(ve({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},K8e={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),o=i===null?!1:i===""?!0:i;return n.symbol=o,n}}}},Z8e=[Qfe,F8e,R8e,O8e,P8e,q8e,G8e,W8e,X8e,Q8e,K8e];f8e(Z8e,{mixoutsTo:to});var CWe=to.noAuto,bWe=to.config,MWe=to.library,wWe=to.dom,oq=to.parse,SWe=to.findIconDefinition,EWe=to.toHtml,aq=to.icon,DWe=to.layer,J8e=to.text,e5e=to.counter;var t5e=["*"],n5e=e=>{throw new Error(`Could not find icon with iconName=${e.iconName} and prefix=${e.prefix} in the icon library.`)},r5e=()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")},i5e=e=>{let t={[`fa-${e.animation}`]:e.animation!=null&&!e.animation.startsWith("spin"),"fa-spin":e.animation==="spin"||e.animation==="spin-reverse","fa-spin-pulse":e.animation==="spin-pulse"||e.animation==="spin-pulse-reverse","fa-spin-reverse":e.animation==="spin-reverse"||e.animation==="spin-pulse-reverse","fa-pulse":e.animation==="spin-pulse"||e.animation==="spin-pulse-reverse","fa-fw":e.fixedWidth,"fa-border":e.border,"fa-inverse":e.inverse,"fa-layers-counter":e.counter,"fa-flip-horizontal":e.flip==="horizontal"||e.flip==="both","fa-flip-vertical":e.flip==="vertical"||e.flip==="both",[`fa-${e.size}`]:e.size!==null,[`fa-rotate-${e.rotate}`]:e.rotate!==null,[`fa-pull-${e.pull}`]:e.pull!==null,[`fa-stack-${e.stackItemSize}`]:e.stackItemSize!=null};return Object.keys(t).map(n=>t[n]?n:null).filter(n=>n)},o5e=e=>e.prefix!==void 0&&e.iconName!==void 0,a5e=(e,t)=>o5e(e)?e:typeof e=="string"?{prefix:t,iconName:e}:{prefix:e[0],iconName:e[1]},s5e=(()=>{let t=class t{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),c5e=(()=>{let t=class t{constructor(){this.definitions={}}addIcons(...r){for(let i of r){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(let o of i.icon[2])typeof o=="string"&&(this.definitions[i.prefix][o]=i)}}addIconPacks(...r){for(let i of r){let o=Object.keys(i).map(a=>i[a]);this.addIcons(...o)}}getIconDefinition(r,i){return r in this.definitions&&i in this.definitions[r]?this.definitions[r][i]:null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),l5e=(()=>{let t=class t{constructor(){this.stackItemSize="1x"}ngOnChanges(r){if("size"in r)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=dn({type:t,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},standalone:!0,features:[Lo]});let e=t;return e})(),u5e=(()=>{let t=class t{constructor(r,i){this.renderer=r,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(r){"size"in r&&(r.size.currentValue!=null&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${r.size.currentValue}`),r.size.previousValue!=null&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${r.size.previousValue}`))}};t.\u0275fac=function(i){return new(i||t)(W(J1),W(Wr))},t.\u0275cmp=Le({type:t,selectors:[["fa-stack"]],inputs:{size:"size"},standalone:!0,features:[Lo,J8],ngContentSelectors:t5e,decls:1,vars:0,template:function(i,o){i&1&&(TB(),IB(0))},encapsulation:2});let e=t;return e})(),Sg=(()=>{let t=class t{set spin(r){this.animation=r?"spin":void 0}set pulse(r){this.animation=r?"spin-pulse":void 0}constructor(r,i,o,a,s){this.sanitizer=r,this.config=i,this.iconLibrary=o,this.stackItem=a,this.classes=[],s!=null&&a==null&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(r){if(this.icon==null&&this.config.fallbackIcon==null){r5e();return}if(r){let i=this.icon!=null?this.icon:this.config.fallbackIcon,o=this.findIconDefinition(i);if(o!=null){let a=this.buildParams();this.renderIcon(o,a)}}}render(){this.ngOnChanges({})}findIconDefinition(r){let i=a5e(r,this.config.defaultPrefix);if("icon"in i)return i;let o=this.iconLibrary.getIconDefinition(i.prefix,i.iconName);return o??(n5e(i),null)}buildParams(){let r={flip:this.flip,animation:this.animation,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:typeof this.fixedWidth=="boolean"?this.fixedWidth:this.config.fixedWidth,stackItemSize:this.stackItem!=null?this.stackItem.stackItemSize:null},i=typeof this.transform=="string"?oq.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...i5e(r),...this.classes],mask:this.mask!=null?this.findIconDefinition(this.mask):null,styles:this.styles!=null?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(r,i){let o=aq(r,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(o.html.join(`
`))}};t.\u0275fac=function(i){return new(i||t)(W(FD),W(s5e),W(c5e),W(l5e,8),W(u5e,8))},t.\u0275cmp=Le({type:t,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(i,o){i&2&&(tD("innerHTML",o.renderedIconHTML,U$),b6("title",o.title))},inputs:{icon:"icon",title:"title",animation:"animation",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},standalone:!0,features:[Lo,J8],decls:0,vars:0,template:function(i,o){},encapsulation:2});let e=t;return e})();var sq=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({});let e=t;return e})();var Ke="primary",F5=Symbol("RouteTitle"),Mz=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function P6(e){return new Mz(e)}function f5e(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],s=e[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function d5e(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Na(e[n],t[n]))return!1;return!0}function Na(e,t){let n=e?wz(e):void 0,r=t?wz(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!vq(e[i],t[i]))return!1;return!0}function wz(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function vq(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function yq(e){return e.length>0?e[e.length-1]:null}function b3(e){return Uw(e)?e:d3(e)?Zt(Promise.resolve(e)):se(e)}var p5e={exact:Cq,subset:bq},xq={exact:h5e,subset:m5e,ignored:()=>!0};function lq(e,t,n){return p5e[n.paths](e.root,t.root,n.matrixParams)&&xq[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function h5e(e,t){return Na(e,t)}function Cq(e,t,n){if(!pl(e.segments,t.segments)||!zg(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!Cq(e.children[r],t.children[r],n))return!1;return!0}function m5e(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>vq(e[n],t[n]))}function bq(e,t,n){return Mq(e,t,t.segments,n)}function Mq(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!pl(i,n)||t.hasChildren()||!zg(i,n,r))}else if(e.segments.length===n.length){if(!pl(e.segments,n)||!zg(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!bq(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!pl(e.segments,i)||!zg(e.segments,i,r)||!e.children[Ke]?!1:Mq(e.children[Ke],t,o,r)}}function zg(e,t,n){return t.every((r,i)=>xq[n](e[i].parameters,r.parameters))}var y3=class{constructor(t=new kt([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=P6(this.queryParams),this._queryParamMap}toString(){return y5e.serialize(this)}},kt=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hg(this)}},dl=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=P6(this.parameters),this._parameterMap}toString(){return Sq(this)}};function g5e(e,t){return pl(e,t)&&e.every((n,r)=>Na(n.parameters,t[r].parameters))}function pl(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function v5e(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===Ke&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==Ke&&(n=n.concat(t(i,r)))}),n}var R5=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>new L5,providedIn:"root"});let e=t;return e})(),L5=class{parse(t){let n=new Ez(t);return new y3(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${w5(t.root,!0)}`,r=b5e(t.queryParams),i=typeof t.fragment=="string"?`#${x5e(t.fragment)}`:"";return`${n}${r}${i}`}},y5e=new L5;function Hg(e){return e.segments.map(t=>Sq(t)).join("/")}function w5(e,t){if(!e.hasChildren())return Hg(e);if(t){let n=e.children[Ke]?w5(e.children[Ke],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==Ke&&r.push(`${i}:${w5(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=v5e(e,(r,i)=>i===Ke?[w5(e.children[Ke],!1)]:[`${i}:${w5(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[Ke]!=null?`${Hg(e)}/${n[0]}`:`${Hg(e)}/(${n.join("//")})`}}function wq(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Eg(e){return wq(e).replace(/%3B/gi,";")}function x5e(e){return encodeURI(e)}function Sz(e){return wq(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lg(e){return decodeURIComponent(e)}function uq(e){return Lg(e.replace(/\+/g,"%20"))}function Sq(e){return`${Sz(e.path)}${C5e(e.parameters)}`}function C5e(e){return Object.entries(e).map(([t,n])=>`;${Sz(t)}=${Sz(n)}`).join("")}function b5e(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Eg(n)}=${Eg(i)}`).join("&"):`${Eg(n)}=${Eg(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var M5e=/^[^\/()?;#]+/;function yz(e){let t=e.match(M5e);return t?t[0]:""}var w5e=/^[^\/()?;=#]+/;function S5e(e){let t=e.match(w5e);return t?t[0]:""}var E5e=/^[^=?&#]+/;function D5e(e){let t=e.match(E5e);return t?t[0]:""}var z5e=/^[^&#]+/;function H5e(e){let t=e.match(z5e);return t?t[0]:""}var Ez=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new kt([],{}):new kt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Ke]=new kt(t,n)),r}parseSegment(){let t=yz(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new ye(4009,!1);return this.capture(t),new dl(Lg(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=S5e(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=yz(this.remaining);i&&(r=i,this.capture(r))}t[Lg(n)]=Lg(r)}parseQueryParam(t){let n=D5e(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let a=H5e(this.remaining);a&&(r=a,this.capture(r))}let i=uq(n),o=uq(r);if(t.hasOwnProperty(i)){let a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=yz(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ye(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Ke);let a=this.parseChildren();n[o]=Object.keys(a).length===1?a[Ke]:new kt([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new ye(4011,!1)}};function Eq(e){return e.segments.length>0?new kt([],{[Ke]:e}):e}function Dq(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=Dq(i);if(r===Ke&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))t[a]=s;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new kt(e.segments,t);return L5e(n)}function L5e(e){if(e.numberOfChildren===1&&e.children[Ke]){let t=e.children[Ke];return new kt(e.segments.concat(t.segments),t.children)}return e}function $6(e){return e instanceof y3}function A5e(e,t,n=null,r=null){let i=zq(e);return Hq(i,t,n,r)}function zq(e){let t;function n(o){let a={};for(let c of o.children){let l=n(c);a[c.outlet]=l}let s=new kt(o.url,a);return o===e&&(t=s),s}let r=n(e.root),i=Eq(r);return t??i}function Hq(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return xz(i,i,i,n,r);let o=V5e(t);if(o.toRoot())return xz(i,i,new kt([],{}),n,r);let a=N5e(o,i,e),s=a.processChildren?D5(a.segmentGroup,a.index,o.commands):Aq(a.segmentGroup,a.index,o.commands);return xz(i,a.segmentGroup,s,n,r)}function Ag(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function A5(e){return typeof e=="object"&&e!=null&&e.outlets}function xz(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let a;e===t?a=n:a=Lq(e,t,n);let s=Eq(Dq(a));return new y3(s,o,i)}function Lq(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=Lq(o,t,n)}),new kt(e.segments,r)}var Vg=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Ag(r[0]))throw new ye(4003,!1);let i=r.find(A5);if(i&&i!==yq(r))throw new ye(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function V5e(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Vg(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([c,l])=>{s[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:s}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((s,c)=>{c==0&&s==="."||(c==0&&s===""?n=!0:s===".."?t++:s!=""&&i.push(s))}),i):[...i,o]},[]);return new Vg(n,t,r)}var R6=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function N5e(e,t,n){if(e.isAbsolute)return new R6(t,!0,0);if(!n)return new R6(t,!1,NaN);if(n.parent===null)return new R6(n,!0,0);let r=Ag(e.commands[0])?0:1,i=n.segments.length-1+r;return _5e(n,i,e.numberOfDoubleDots)}function _5e(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ye(4005,!1);i=r.segments.length}return new R6(r,!1,i-o)}function k5e(e){return A5(e[0])?e[0].outlets:{[Ke]:e}}function Aq(e,t,n){if(e??=new kt([],{}),e.segments.length===0&&e.hasChildren())return D5(e,t,n);let r=T5e(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new kt(e.segments.slice(0,r.pathIndex),{});return o.children[Ke]=new kt(e.segments.slice(r.pathIndex),e.children),D5(o,0,i)}else return r.match&&i.length===0?new kt(e.segments,{}):r.match&&!e.hasChildren()?Dz(e,t,n):r.match?D5(e,0,i):Dz(e,t,n)}function D5(e,t,n){if(n.length===0)return new kt(e.segments,{});{let r=k5e(n),i={};if(Object.keys(r).some(o=>o!==Ke)&&e.children[Ke]&&e.numberOfChildren===1&&e.children[Ke].segments.length===0){let o=D5(e.children[Ke],t,n);return new kt(e.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=Aq(e.children[o],t,a))}),Object.entries(e.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new kt(e.segments,i)}}function T5e(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let a=e.segments[i],s=n[r];if(A5(s))break;let c=`${s}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!dq(c,l,a))return o;r+=2}else{if(!dq(c,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Dz(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(A5(o)){let c=I5e(o.outlets);return new kt(r,c)}if(i===0&&Ag(n[0])){let c=e.segments[t];r.push(new dl(c.path,fq(n[0]))),i++;continue}let a=A5(o)?o.outlets[Ke]:`${o}`,s=i<n.length-1?n[i+1]:null;a&&s&&Ag(s)?(r.push(new dl(a,fq(s))),i+=2):(r.push(new dl(a,{})),i++)}return new kt(r,{})}function I5e(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Dz(new kt([],{}),0,r))}),t}function fq(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function dq(e,t,n){return e==n.path&&Na(t,n.parameters)}var z5="imperative",Er=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Er||{}),Io=class{constructor(t,n){this.id=t,this.url=n}},B6=class extends Io{constructor(t,n,r="imperative",i=null){super(t,n),this.type=Er.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},D2=class extends Io{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=Er.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},To=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(To||{}),Ng=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Ng||{}),x3=class extends Io{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Er.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},C3=class extends Io{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Er.NavigationSkipped}},V5=class extends Io{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=Er.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},_g=class extends Io{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Er.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zz=class extends Io{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Er.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hz=class extends Io{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Er.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Lz=class extends Io{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Er.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Az=class extends Io{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Er.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vz=class{constructor(t){this.route=t,this.type=Er.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Nz=class{constructor(t){this.route=t,this.type=Er.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},_z=class{constructor(t){this.snapshot=t,this.type=Er.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kz=class{constructor(t){this.snapshot=t,this.type=Er.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tz=class{constructor(t){this.snapshot=t,this.type=Er.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Iz=class{constructor(t){this.snapshot=t,this.type=Er.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kg=class{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=Er.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},N5=class{},_5=class{constructor(t){this.url=t}};var Fz=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new O5,this.attachRef=null}},O5=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Fz,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Tg=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Rz(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=Rz(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Oz(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Oz(t,this._root).map(n=>n.value)}};function Rz(e,t){if(e===t.value)return t;for(let n of t.children){let r=Rz(e,n);if(r)return r}return null}function Oz(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Oz(e,n);if(r.length)return r.unshift(t),r}return[]}var no=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function F6(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Ig=class extends Tg{constructor(t,n){super(t),this.snapshot=n,Xz(this,t)}toString(){return this.snapshot.toString()}};function Vq(e){let t=F5e(e),n=new On([new dl("",{})]),r=new On({}),i=new On({}),o=new On({}),a=new On(""),s=new It(n,r,o,a,i,Ke,e,t.root);return s.snapshot=t.root,new Ig(new no(s,[]),t)}function F5e(e){let t={},n={},r={},i="",o=new k5([],t,r,i,n,Ke,e,null,{});return new Fg("",new no(o,[]))}var It=class{constructor(t,n,r,i,o,a,s,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Qe(l=>l[F5]))??se(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Qe(t=>P6(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Qe(t=>P6(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Yz(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:x(x({},t.params),e.params),data:x(x({},t.data),e.data),resolve:x(x(x(x({},e.data),t.data),i?.data),e._resolvedData)}:r={params:x({},e.params),data:x({},e.data),resolve:x(x({},e.data),e._resolvedData??{})},i&&_q(i)&&(r.resolve[F5]=i.title),r}var k5=class{get title(){return this.data?.[F5]}constructor(t,n,r,i,o,a,s,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=P6(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=P6(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Fg=class extends Tg{constructor(t,n){super(n),this.url=t,Xz(this,n)}toString(){return Nq(this._root)}};function Xz(e,t){t.value._routerState=e,t.children.forEach(n=>Xz(e,n))}function Nq(e){let t=e.children.length>0?` { ${e.children.map(Nq).join(", ")} } `:"";return`${e.value}${t}`}function Cz(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Na(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Na(t.params,n.params)||e.paramsSubject.next(n.params),d5e(t.url,n.url)||e.urlSubject.next(n.url),Na(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Pz(e,t){let n=Na(e.params,t.params)&&g5e(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Pz(e.parent,t.parent))}function _q(e){return typeof e.title=="string"||e.title===null}var Qz=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ke,this.activateEvents=new Jt,this.deactivateEvents=new Jt,this.attachEvents=new Jt,this.detachEvents=new Jt,this.parentContexts=ce(O5),this.location=ce(f3),this.changeDetector=ce(Os),this.environmentInjector=ce(Bi),this.inputBinder=ce(Bg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ye(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ye(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ye(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new ye(4013,!1);this._activatedRoute=r;let o=this.location,s=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new $z(r,c,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=dn({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Lo]});let e=t;return e})(),$z=class{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===It?this.route:t===O5?this.childContexts:this.parent.get(t,n)}},Bg=new De(""),pq=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=_8([i.queryParams,i.params,i.data]).pipe(y1(([a,s,c],l)=>(c=x(x(x({},a),s),c),l===0?se(c):Promise.resolve(c)))).subscribe(a=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let s=KB(i.component);if(!s){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of s.inputs)r.activatedComponentRef.setInput(c,a[c])});this.outletDataSubscriptions.set(r,o)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function R5e(e,t,n){let r=T5(e,t._root,n?n._root:void 0);return new Ig(r,t)}function T5(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=O5e(e,t,n);return new no(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(s=>T5(e,s)),a}}let r=P5e(t.value),i=t.children.map(o=>T5(e,o));return new no(r,i)}}function O5e(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return T5(e,r,i);return T5(e,r)})}function P5e(e){return new It(new On(e.url),new On(e.params),new On(e.queryParams),new On(e.fragment),new On(e.data),e.outlet,e.component,e)}var kq="ngNavigationCancelingError";function Tq(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=$6(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=Iq(!1,To.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Iq(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[kq]=!0,n.cancellationCode=t,n}function $5e(e){return Fq(e)&&$6(e.url)}function Fq(e){return!!e&&e[kq]}var B5e=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["ng-component"]],standalone:!0,features:[J8],decls:1,vars:0,template:function(i,o){i&1&&pn(0,"router-outlet")},dependencies:[Qz],encapsulation:2});let e=t;return e})();function U5e(e,t){return e.providers&&!e._injector&&(e._injector=M9(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Kz(e){let t=e.children&&e.children.map(Kz),n=t?k(x({},e),{children:t}):x({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ke&&(n.component=B5e),n}function _a(e){return e.outlet||Ke}function j5e(e,t){let n=e.filter(r=>_a(r)===t);return n.push(...e.filter(r=>_a(r)!==t)),n}function P5(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var q5e=(e,t,n,r)=>Qe(i=>(new Bz(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),Bz=class{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Cz(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=F6(n);t.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=F6(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),s=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:s})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=F6(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=F6(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Iz(o.value.snapshot))}),t.children.length&&this.forwardEvent(new kz(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(Cz(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Cz(s.route.value),this.activateChildRoutes(t,null,a.children)}else{let s=P5(i.snapshot);a.attachRef=null,a.route=i,a.injector=s,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,r)}},Rg=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},O6=class{constructor(t,n){this.component=t,this.route=n}};function G5e(e,t,n){let r=e._root,i=t?t._root:null;return S5(r,i,n,[r.value])}function W5e(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function j6(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!t$(e)?e:t.get(e):r}function S5(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=F6(t);return e.children.forEach(a=>{Y5e(a,o[a.value.outlet],n,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>H5(s,n.getContext(a),i)),i}function Y5e(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,a=t?t.value:null,s=n?n.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let c=X5e(a,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Rg(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?S5(e,t,s?s.children:null,r,i):S5(e,t,n,r,i),c&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new O6(s.outlet.component,a))}else a&&H5(t,s,i),i.canActivateChecks.push(new Rg(r)),o.component?S5(e,null,s?s.children:null,r,i):S5(e,null,n,r,i);return i}function X5e(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!pl(e.url,t.url);case"pathParamsOrQueryParamsChange":return!pl(e.url,t.url)||!Na(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pz(e,t)||!Na(e.queryParams,t.queryParams);case"paramsChange":default:return!Pz(e,t)}}function H5(e,t,n){let r=F6(e),i=e.value;Object.entries(r).forEach(([o,a])=>{i.component?t?H5(a,t.children.getContext(o),n):H5(a,null,n):H5(a,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new O6(t.outlet.component,i)):n.canDeactivateChecks.push(new O6(null,i)):n.canDeactivateChecks.push(new O6(null,i))}function $5(e){return typeof e=="function"}function Q5e(e){return typeof e=="boolean"}function K5e(e){return e&&$5(e.canLoad)}function Z5e(e){return e&&$5(e.canActivate)}function J5e(e){return e&&$5(e.canActivateChild)}function ede(e){return e&&$5(e.canDeactivate)}function tde(e){return e&&$5(e.canMatch)}function Rq(e){return e instanceof Ds||e?.name==="EmptyError"}var Dg=Symbol("INITIAL_VALUE");function U6(){return y1(e=>_8(e.map(t=>t.pipe(Ce(1),Yw(Dg)))).pipe(Qe(t=>{for(let n of t)if(n!==!0){if(n===Dg)return Dg;if(n===!1||n instanceof y3)return n}return!0}),v1(t=>t!==Dg),Ce(1)))}function nde(e,t){return Qn(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return a.length===0&&o.length===0?se(k(x({},n),{guardsResult:!0})):rde(a,r,i,e).pipe(Qn(s=>s&&Q5e(s)?ide(r,o,e,t):se(s)),Qe(s=>k(x({},n),{guardsResult:s})))})}function rde(e,t,n,r){return Zt(e).pipe(Qn(i=>lde(i.component,i.route,n,t,r)),xa(i=>i!==!0,!0))}function ide(e,t,n,r){return Zt(t).pipe(zs(i=>n6(ade(i.route.parent,r),ode(i.route,r),cde(e,i.path,n),sde(e,i.route,n))),xa(i=>i!==!0,!0))}function ode(e,t){return e!==null&&t&&t(new Tz(e)),se(!0)}function ade(e,t){return e!==null&&t&&t(new _z(e)),se(!0)}function sde(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(o=>ym(()=>{let a=P5(t)??n,s=j6(o,a),c=Z5e(s)?s.canActivate(t,e):Da(a,()=>s(t,e));return b3(c).pipe(xa())}));return se(i).pipe(U6())}function cde(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(a=>W5e(a)).filter(a=>a!==null).map(a=>ym(()=>{let s=a.guards.map(c=>{let l=P5(a.node)??n,u=j6(c,l),f=J5e(u)?u.canActivateChild(r,e):Da(l,()=>u(r,e));return b3(f).pipe(xa())});return se(s).pipe(U6())}));return se(o).pipe(U6())}function lde(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return se(!0);let a=o.map(s=>{let c=P5(t)??i,l=j6(s,c),u=ede(l)?l.canDeactivate(e,t,n,r):Da(c,()=>l(e,t,n,r));return b3(u).pipe(xa())});return se(a).pipe(U6())}function ude(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return se(!0);let o=i.map(a=>{let s=j6(a,e),c=K5e(s)?s.canLoad(t,n):Da(e,()=>s(t,n));return b3(c)});return se(o).pipe(U6(),Oq(r))}function Oq(e){return Ow(ur(t=>{if($6(t))throw Tq(e,t)}),Qe(t=>t===!0))}function fde(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return se(!0);let o=i.map(a=>{let s=j6(a,e),c=tde(s)?s.canMatch(t,n):Da(e,()=>s(t,n));return b3(c)});return se(o).pipe(U6(),Oq(r))}var I5=class{constructor(t){this.segmentGroup=t||null}},Og=class extends Error{constructor(t){super(),this.urlTree=t}};function I6(e){return t6(new I5(e))}function dde(e){return t6(new ye(4e3,!1))}function pde(e){return t6(Iq(!1,To.GuardRejected))}var Uz=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return se(r);if(i.numberOfChildren>1||!i.children[Ke])return dde(t.redirectTo);i=i.children[Ke]}}applyRedirectCommands(t,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n.startsWith("/"))throw new Og(i);return i}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new y3(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let s=o.substring(1);r[i]=n[s]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),a={};return Object.entries(n.children).forEach(([s,c])=>{a[s]=this.createSegmentGroup(t,c,r,i)}),new kt(o,a)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new ye(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},jz={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function hde(e,t,n,r,i){let o=Zz(e,t,n);return o.matched?(r=U5e(t,r),fde(r,t,n,i).pipe(Qe(a=>a===!0?o:x({},jz)))):se(o)}function Zz(e,t,n){if(t.path==="**")return mde(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?x({},jz):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||f5e)(n,e,t);if(!i)return x({},jz);let o={};Object.entries(i.posParams??{}).forEach(([s,c])=>{o[s]=c.path});let a=i.consumed.length>0?x(x({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function mde(e){return{matched:!0,parameters:e.length>0?yq(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function hq(e,t,n,r){return n.length>0&&yde(e,n,r)?{segmentGroup:new kt(t,vde(r,new kt(n,e.children))),slicedSegments:[]}:n.length===0&&xde(e,n,r)?{segmentGroup:new kt(e.segments,gde(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new kt(e.segments,e.children),slicedSegments:n}}function gde(e,t,n,r){let i={};for(let o of n)if(Ug(e,t,o)&&!r[_a(o)]){let a=new kt([],{});i[_a(o)]=a}return x(x({},r),i)}function vde(e,t){let n={};n[Ke]=t;for(let r of e)if(r.path===""&&_a(r)!==Ke){let i=new kt([],{});n[_a(r)]=i}return n}function yde(e,t,n){return n.some(r=>Ug(e,t,r)&&_a(r)!==Ke)}function xde(e,t,n){return n.some(r=>Ug(e,t,r))}function Ug(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Cde(e,t,n,r){return _a(e)!==r&&(r===Ke||!Ug(t,n,e))?!1:Zz(t,e,n).matched}function bde(e,t,n){return t.length===0&&!e.children[n]}var qz=class{};function Mde(e,t,n,r,i,o,a="emptyOnly"){return new Gz(e,t,n,r,i,a,o).recognize()}var wde=31,Gz=class{constructor(t,n,r,i,o,a,s){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new Uz(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new ye(4002,`'${t.segmentGroup}'`)}recognize(){let t=hq(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Qe(n=>{let r=new k5([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ke,this.rootComponentType,null,{}),i=new no(r,n),o=new Fg("",i),a=A5e(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root,null),{state:o,tree:a}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,Ke).pipe(t3(r=>{if(r instanceof Og)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof I5?this.noMatchError(r):r}))}inheritParamsAndData(t,n){let r=t.value,i=Yz(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(t,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0).pipe(Qe(o=>o instanceof no?[o]:[]))}processChildren(t,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return Zt(i).pipe(zs(o=>{let a=r.children[o],s=j5e(n,o);return this.processSegmentGroup(t,s,a,o)}),Ww((o,a)=>(o.push(...a),o)),n3(null),Gw(),Qn(o=>{if(o===null)return I6(r);let a=Pq(o);return Sde(a),se(a)}))}processSegment(t,n,r,i,o,a){return Zt(n).pipe(zs(s=>this.processSegmentAgainstRoute(s._injector??t,n,s,r,i,o,a).pipe(t3(c=>{if(c instanceof I5)return se(null);throw c}))),xa(s=>!!s),t3(s=>{if(Rq(s))return bde(r,i,o)?se(new qz):I6(r);throw s}))}processSegmentAgainstRoute(t,n,r,i,o,a,s){return Cde(r,i,o,a)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,a):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,a):I6(i):I6(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,a){let{matched:s,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=Zz(n,i,o);if(!s)return I6(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wde&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,f).pipe(Qn(d=>this.processSegment(t,r,n,d.concat(u),a,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){let a=hde(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(y1(s=>s.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(y1(({routes:c})=>{let l=r._loadedInjector??t,{consumedSegments:u,remainingSegments:f,parameters:d}=s,p=new k5(u,d,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,Dde(r),_a(r),r.component??r._loadedComponent??null,r,zde(r)),{segmentGroup:h,slicedSegments:m}=hq(n,u,f,c);if(m.length===0&&h.hasChildren())return this.processChildren(l,c,h).pipe(Qe(v=>v===null?null:new no(p,v)));if(c.length===0&&m.length===0)return se(new no(p,[]));let g=_a(r)===o;return this.processSegment(l,c,h,m,g?Ke:o,!0).pipe(Qe(v=>new no(p,v instanceof no?[v]:[])))}))):I6(n)))}getChildConfig(t,n,r){return n.children?se({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?se({routes:n._loadedRoutes,injector:n._loadedInjector}):ude(t,n,r,this.urlSerializer).pipe(Qn(i=>i?this.configLoader.loadChildren(t,n).pipe(ur(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):pde(n))):se({routes:[],injector:t})}};function Sde(e){e.sort((t,n)=>t.value.outlet===Ke?-1:n.value.outlet===Ke?1:t.value.outlet.localeCompare(n.value.outlet))}function Ede(e){let t=e.value.routeConfig;return t&&t.path===""}function Pq(e){let t=[],n=new Set;for(let r of e){if(!Ede(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=Pq(r.children);t.push(new no(r.value,i))}return t.filter(r=>!n.has(r))}function Dde(e){return e.data||{}}function zde(e){return e.resolve||{}}function Hde(e,t,n,r,i,o){return Qn(a=>Mde(e,t,n,r,a.extractedUrl,i,o).pipe(Qe(({state:s,tree:c})=>k(x({},a),{targetSnapshot:s,urlAfterRedirects:c}))))}function Lde(e,t){return Qn(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return se(n);let o=new Set(i.map(c=>c.route)),a=new Set;for(let c of o)if(!a.has(c))for(let l of $q(c))a.add(l);let s=0;return Zt(a).pipe(zs(c=>o.has(c)?Ade(c,r,e,t):(c.data=Yz(c,c.parent,e).resolve,se(void 0))),ur(()=>s++),r6(1),Qn(c=>s===a.size?se(n):So))})}function $q(e){let t=e.children.map(n=>$q(n)).flat();return[e,...t]}function Ade(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!_q(i)&&(o[F5]=i.title),Vde(o,e,t,r).pipe(Qe(a=>(e._resolvedData=a,e.data=Yz(e,e.parent,n).resolve,null)))}function Vde(e,t,n,r){let i=wz(e);if(i.length===0)return se({});let o={};return Zt(i).pipe(Qn(a=>Nde(e[a],t,n,r).pipe(xa(),ur(s=>{o[a]=s}))),r6(1),qw(o),t3(a=>Rq(a)?So:t6(a)))}function Nde(e,t,n,r){let i=P5(t)??r,o=j6(e,i),a=o.resolve?o.resolve(t,n):Da(i,()=>o(t,n));return b3(a)}function bz(e){return y1(t=>{let n=e(t);return n?Zt(n).pipe(Qe(()=>t)):se(t)})}var Bq=(()=>{let t=class t{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(a=>a.outlet===Ke);return i}getResolvedTitleForRoute(r){return r.data[F5]}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(_de),providedIn:"root"});let e=t;return e})(),_de=(()=>{let t=class t extends Bq{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};t.\u0275fac=function(i){return new(i||t)(ge(TU))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),B5=new De("",{providedIn:"root",factory:()=>({})}),Pg=new De(""),Jz=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ce(H9)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return se(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=b3(r.loadComponent()).pipe(Qe(Uq),ur(a=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a}),r3(()=>{this.componentLoaders.delete(r)})),o=new e6(i,()=>new m1).pipe(J0());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return se({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let a=kde(i,this.compiler,r,this.onLoadEndListener).pipe(r3(()=>{this.childrenLoaders.delete(i)})),s=new e6(a,()=>new m1).pipe(J0());return this.childrenLoaders.set(i,s),s}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function kde(e,t,n,r){return b3(e.loadChildren()).pipe(Qe(Uq),Qn(i=>i instanceof q8||Array.isArray(i)?se(i):Zt(t.compileModuleAsync(i))),Qe(i=>{r&&r(e);let o,a,s=!1;return Array.isArray(i)?(a=i,s=!0):(o=i.create(n).injector,a=o.get(Pg,[],{optional:!0,self:!0}).flat()),{routes:a.map(Kz),injector:o}}))}function Tde(e){return e&&typeof e=="object"&&"default"in e}function Uq(e){return Tde(e)?e.default:e}var eH=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(Ide),providedIn:"root"});let e=t;return e})(),Ide=(()=>{let t=class t{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),jq=new De(""),qq=new De("");function Fde(e,t,n){let r=e.get(qq),i=e.get(Xr);return e.get(Gt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,a=new Promise(l=>{o=l}),s=i.startViewTransition(()=>(o(),Rde(e))),{onViewTransitionCreated:c}=r;return c&&Da(e,()=>c({transition:s,from:t,to:n})),a})}function Rde(e){return new Promise(t=>{KE(t,{injector:e})})}var tH=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new m1,this.transitionAbortSubject=new m1,this.configLoader=ce(Jz),this.environmentInjector=ce(Bi),this.urlSerializer=ce(R5),this.rootContexts=ce(O5),this.location=ce(w6),this.inputBindingEnabled=ce(Bg,{optional:!0})!==null,this.titleStrategy=ce(Bq),this.options=ce(B5,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ce(eH),this.createViewTransition=ce(jq,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>se(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Vz(o)),i=o=>this.events.next(new Nz(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(k(x(x({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new On({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:z5,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(v1(a=>a.id!==0),Qe(a=>k(x({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),y1(a=>{this.currentTransition=a;let s=!1,c=!1;return se(a).pipe(ur(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?k(x({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),y1(l=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&f!=="reload"){let d="";return this.events.next(new C3(l.id,this.urlSerializer.serialize(l.rawUrl),d,Ng.IgnoredSameUrlNavigation)),l.resolve(null),So}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return se(l).pipe(y1(d=>{let p=this.transitions?.getValue();return this.events.next(new B6(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),p!==this.transitions?.getValue()?So:Promise.resolve(d)}),Hde(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ur(d=>{a.targetSnapshot=d.targetSnapshot,a.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=k(x({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let p=new _g(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:p,source:h,restoredState:m,extras:g}=l,v=new B6(d,this.urlSerializer.serialize(p),h,m);this.events.next(v);let y=Vq(this.rootComponentType).snapshot;return this.currentTransition=a=k(x({},l),{targetSnapshot:y,urlAfterRedirects:p,extras:k(x({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,se(a)}else{let d="";return this.events.next(new C3(l.id,this.urlSerializer.serialize(l.extractedUrl),d,Ng.IgnoredByUrlHandlingStrategy)),l.resolve(null),So}}),ur(l=>{let u=new zz(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Qe(l=>(this.currentTransition=a=k(x({},l),{guards:G5e(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),a)),nde(this.environmentInjector,l=>this.events.next(l)),ur(l=>{if(a.guardsResult=l.guardsResult,$6(l.guardsResult))throw Tq(this.urlSerializer,l.guardsResult);let u=new Hz(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),v1(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",To.GuardRejected),!1)),bz(l=>{if(l.guards.canActivateChecks.length)return se(l).pipe(ur(u=>{let f=new Lz(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),y1(u=>{let f=!1;return se(u).pipe(Lde(this.paramsInheritanceStrategy,this.environmentInjector),ur({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",To.NoDataFromResolver)}}))}),ur(u=>{let f=new Az(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),bz(l=>{let u=f=>{let d=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(f.routeConfig).pipe(ur(p=>{f.component=p}),Qe(()=>{})));for(let p of f.children)d.push(...u(p));return d};return _8(u(l.targetSnapshot.root)).pipe(n3(null),Ce(1))}),bz(()=>this.afterPreactivation()),y1(()=>{let{currentSnapshot:l,targetSnapshot:u}=a,f=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return f?Zt(f).pipe(Qe(()=>a)):se(a)}),Qe(l=>{let u=R5e(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=a=k(x({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,a}),ur(()=>{this.events.next(new N5)}),q5e(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Ce(1),ur({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new D2(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Xw(this.transitionAbortSubject.pipe(ur(l=>{throw l}))),r3(()=>{!s&&!c&&this.cancelNavigationTransition(a,"",To.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),t3(l=>{if(c=!0,Fq(l))this.events.next(new x3(a.id,this.urlSerializer.serialize(a.extractedUrl),l.message,l.cancellationCode)),$5e(l)?this.events.next(new _5(l.url)):a.resolve(!1);else{this.events.next(new V5(a.id,this.urlSerializer.serialize(a.extractedUrl),l,a.targetSnapshot??void 0));try{a.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(u)}}return So}))}))}cancelNavigationTransition(r,i,o){let a=new x3(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(a),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Ode(e){return e!==z5}var Pde=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce($de),providedIn:"root"});let e=t;return e})(),Wz=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},$de=(()=>{let t=class t extends Wz{};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Is(t)))(o||t)}})(),t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Gq=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(Bde),providedIn:"root"});let e=t;return e})(),Bde=(()=>{let t=class t extends Gq{constructor(){super(...arguments),this.location=ce(w6),this.urlSerializer=ce(R5),this.options=ce(B5,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ce(eH),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new y3,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Vq(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof B6)this.stateMemento=this.createStateMemento();else if(r instanceof C3)this.rawUrlTree=i.initialUrl;else if(r instanceof _g){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof N5?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof x3&&(r.code===To.GuardRejected||r.code===To.NoDataFromResolver)?this.restoreHistory(i):r instanceof V5?this.restoreHistory(i,!0):r instanceof D2&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let a=this.browserPageId,s=x(x({},i.extras.state),this.generateNgRouterState(i.id,a));this.location.replaceState(o,"",s)}else{let a=x(x({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",a)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,a=this.currentPageId-o;a!==0?this.location.historyGo(a):this.currentUrlTree===r.finalUrl&&a===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Is(t)))(o||t)}})(),t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),E5=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(E5||{});function Wq(e,t){e.events.pipe(v1(n=>n instanceof D2||n instanceof x3||n instanceof V5||n instanceof C3),Qe(n=>n instanceof D2||n instanceof C3?E5.COMPLETE:(n instanceof x3?n.code===To.Redirect||n.code===To.SupersededByNewNavigation:!1)?E5.REDIRECTING:E5.FAILED),v1(n=>n!==E5.REDIRECTING),Ce(1)).subscribe(()=>{t()})}function Ude(e){throw e}var jde={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qde={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Vt=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=ce(w9),this.stateManager=ce(Gq),this.options=ce(B5,{optional:!0})||{},this.pendingTasks=ce(tl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ce(tH),this.urlSerializer=ce(R5),this.location=ce(w6),this.urlHandlingStrategy=ce(eH),this._events=new m1,this.errorHandler=this.options.errorHandler||Ude,this.navigated=!1,this.routeReuseStrategy=ce(Pde),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ce(Pg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ce(Bg,{optional:!0}),this.eventsSubscription=new lr,this.isNgZoneEnabled=ce(Gt)instanceof Gt&&Gt.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(o!==null&&a!==null){if(this.stateManager.handleRouterEvent(i,a),i instanceof x3&&i.code!==To.Redirect&&i.code!==To.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof D2)this.navigated=!0;else if(i instanceof _5){let s=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Ode(o.source)};this.scheduleNavigation(s,z5,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}Wde(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),z5,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let a={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let l=x({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(a.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,s,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Kz),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:a,fragment:s,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,f=null;switch(c){case"merge":f=x(x({},this.currentUrlTree.queryParams),a);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=a||null}f!==null&&(f=this.removeEmptyProps(f));let d;try{let p=o?o.snapshot:this.routerState.snapshot.root;d=zq(p)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),d=this.currentUrlTree.root}return Hq(d,r,f,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=$6(r)?r:this.parseUrl(r),a=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(a,z5,null,i)}navigate(r,i={skipLocationChange:!1}){return Gde(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=x({},jde):i===!1?o=x({},qde):o=i,$6(r))return lq(this.currentUrlTree,r,o);let a=this.parseUrl(r);return lq(this.currentUrlTree,a,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,a])=>(a!=null&&(i[o]=a),i),{})}scheduleNavigation(r,i,o,a,s){if(this.disposed)return Promise.resolve(!1);let c,l,u;s?(c=s.resolve,l=s.reject,u=s.promise):u=new Promise((d,p)=>{c=d,l=p});let f=this.pendingTasks.add();return Wq(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:a,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Gde(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new ye(4008,!1)}function Wde(e){return!(e instanceof N5)&&!(e instanceof _5)}var Hn=(()=>{let t=class t{constructor(r,i,o,a,s,c){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=a,this.el=s,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new m1,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof D2&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,a,s){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||o||a||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:j$(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,a=this.el.nativeElement;i!==null?o.setAttribute(a,r,i):o.removeAttribute(a,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};t.\u0275fac=function(i){return new(i||t)(W(Vt),W(It),_E("tabindex"),W(J1),W(Wr),W(js))},t.\u0275dir=dn({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&Te("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&b6("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[qr.HasDecoratorInputTransform,"preserveFragment","preserveFragment",al],skipLocationChange:[qr.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",al],replaceUrl:[qr.HasDecoratorInputTransform,"replaceUrl","replaceUrl",al],routerLink:"routerLink"},standalone:!0,features:[eD,Lo]});let e=t;return e})(),Yq=(()=>{let t=class t{get isActive(){return this._isActive}constructor(r,i,o,a,s){this.router=r,this.element=i,this.renderer=o,this.cdr=a,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Jt,this.routerEventsSubscription=r.events.subscribe(c=>{c instanceof D2&&this.update()})}ngAfterContentInit(){se(this.links.changes,se(null)).pipe(e3()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let r=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Zt(r).pipe(e3()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(r){let i=Array.isArray(r)?r:r.split(" ");this.classes=i.filter(o=>!!o)}ngOnChanges(r){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let r=this.hasActiveLinks();this._isActive!==r&&(this._isActive=r,this.cdr.markForCheck(),this.classes.forEach(i=>{r?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),r&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(r))})}isLinkActive(r){let i=Yde(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{let a=o.urlTree;return a?r.isActive(a,i):!1}}hasActiveLinks(){let r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.links.some(r)}};t.\u0275fac=function(i){return new(i||t)(W(Vt),W(Wr),W(J1),W(Os),W(Hn,8))},t.\u0275dir=dn({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(i,o,a){if(i&1&&FB(a,Hn,5),i&2){let s;RB(s=OB())&&(o.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Lo]});let e=t;return e})();function Yde(e){return!!e.paths}var $g=class{};var Xde=(()=>{let t=class t{constructor(r,i,o,a,s){this.router=r,this.injector=o,this.preloadingStrategy=a,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(v1(r=>r instanceof D2),zs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let a of i){a.providers&&!a._injector&&(a._injector=M9(a.providers,r,`Route: ${a.path}`));let s=a._injector??r,c=a._loadedInjector??s;(a.loadChildren&&!a._loadedRoutes&&a.canLoad===void 0||a.loadComponent&&!a._loadedComponent)&&o.push(this.preloadConfig(s,a)),(a.children||a._loadedRoutes)&&o.push(this.processRoutes(c,a.children??a._loadedRoutes))}return Zt(o).pipe(e3())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=se(null);let a=o.pipe(Qn(s=>s===null?se(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??r,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return Zt([a,s]).pipe(e3())}else return a})}};t.\u0275fac=function(i){return new(i||t)(ge(Vt),ge(H9),ge(Bi),ge($g),ge(Jz))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Xq=new De(""),Qde=(()=>{let t=class t{constructor(r,i,o,a,s={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=a,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof B6?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof D2?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof C3&&r.code===Ng.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof kg&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new kg(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(i){oB()},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function Kde(e){return e.routerState.root}function U5(e,t){return{\u0275kind:e,\u0275providers:t}}function Zde(){let e=ce(C2);return t=>{let n=e.get(ol);if(t!==n.components[0])return;let r=e.get(Vt),i=e.get(Qq);e.get(nH)===1&&r.initialNavigation(),e.get(Kq,null,rt.Optional)?.setUpPreloading(),e.get(Xq,null,rt.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Qq=new De("",{factory:()=>new m1}),nH=new De("",{providedIn:"root",factory:()=>1});function Jde(){return U5(2,[{provide:nH,useValue:0},{provide:D9,multi:!0,deps:[C2],useFactory:t=>{let n=t.get(aU,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=t.get(Vt),o=t.get(Qq);Wq(i,()=>{r(!0)}),t.get(tH).afterPreactivation=()=>(r(!0),o.closed?se(void 0):o),i.initialNavigation()}))}}])}function e7e(){return U5(3,[{provide:D9,multi:!0,useFactory:()=>{let t=ce(Vt);return()=>{t.setUpLocationChangeListener()}}},{provide:nH,useValue:2}])}var Kq=new De("");function t7e(e){return U5(0,[{provide:Kq,useExisting:Xde},{provide:$g,useExisting:e}])}function n7e(){return U5(8,[pq,{provide:Bg,useExisting:pq}])}function r7e(e){let t=[{provide:jq,useValue:Fde},{provide:qq,useValue:x({skipNextTransition:!!e?.skipInitialTransition},e)}];return U5(9,t)}var mq=new De("ROUTER_FORROOT_GUARD"),i7e=[w6,{provide:R5,useClass:L5},Vt,O5,{provide:It,useFactory:Kde,deps:[Vt]},Jz,[]],rH=(()=>{let t=class t{constructor(r){}static forRoot(r,i){return{ngModule:t,providers:[i7e,[],{provide:Pg,multi:!0,useValue:r},{provide:mq,useFactory:c7e,deps:[[Vt,new l9,new LE]]},{provide:B5,useValue:i||{}},i?.useHash?a7e():s7e(),o7e(),i?.preloadingStrategy?t7e(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?l7e(i):[],i?.bindToComponentInputs?n7e().\u0275providers:[],i?.enableViewTransitions?r7e().\u0275providers:[],u7e()]}}static forChild(r){return{ngModule:t,providers:[{provide:Pg,multi:!0,useValue:r}]}}};t.\u0275fac=function(i){return new(i||t)(ge(mq,8))},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({});let e=t;return e})();function o7e(){return{provide:Xq,useFactory:()=>{let e=ce(hU),t=ce(Gt),n=ce(B5),r=ce(tH),i=ce(R5);return n.scrollOffset&&e.setOffset(n.scrollOffset),new Qde(i,r,e,t,n)}}}function a7e(){return{provide:js,useClass:cU}}function s7e(){return{provide:js,useClass:CD}}function c7e(e){return"guarded"}function l7e(e){return[e.initialNavigation==="disabled"?e7e().\u0275providers:[],e.initialNavigation==="enabledBlocking"?Jde().\u0275providers:[]]}var gq=new De("");function u7e(){return[{provide:gq,useFactory:Zde},{provide:z9,multi:!0,useExisting:gq}]}var ka=class{constructor(t){Object.assign(this,t)}toString(){return JSON.stringify(this)}get ViewUrl(){throw new Error("ViewUrl not implemented")}get EditUrl(){throw new Error("EditUrl not implemented")}get DeleteUrl(){throw new Error("DeleteUrl not implemented")}};var jn=class extends ka{constructor(t){super(t)}get ViewUrl(){return["/goals",this.Id]}get EditUrl(){return["/goals",this.Id,"edit"]}get DeleteUrl(){return["/goals",this.Id,"delete"]}};var Fo=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var j5="customServerUrl",q6=(()=>{let t=class t extends Fo{constructor(){super()}getCustomServerUrl(){return localStorage.getItem(j5)}setCustomServerUrl(r){return Nt.endpoint=r,localStorage.setItem(j5,r)}clearCustomServerUrl(){localStorage.removeItem(j5)}isCustomServerUrlSet(){return this.getCustomServerUrl()!==null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Nt={production:!0,endpoint:localStorage.getItem(j5)??""};function Xt(e){return Nt.endpoint+e}function E1(){return{Id:"1",Name:"Fake Goal",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1}}function qi(){return{Id:"1",Name:"Fake Task",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1}}function Gi(){return{Id:"1",Name:"Fake Habit",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",CompletedDates:["2020-01-01"]}}var er=(()=>{let t=class t extends Fo{constructor(r){super(),this.http=r}listGoals(){if(Nt.production){let r=Xt("/goals");return this.http.get(r)}return console.debug("/goals"),se({data:[E1(),E1(),E1(),E1(),E1()],message:"success"})}findGoals(r){if(Nt.production){let i=Xt(`/goals?q=${r}`);return this.http.get(i)}return console.debug(r),se({data:[E1(),E1(),E1(),E1(),E1()],message:"success"})}getGoal(r){if(Nt.production){let i=Xt(`/goals/${r}`);return this.http.get(i)}return console.debug(r),se({data:E1(),message:"success"})}createGoal(r){if(Nt.production){let i=Xt("/goals");return this.http.post(i,r)}return console.debug(r),se({data:E1(),message:"success"})}updateGoal(r){if(Nt.production){let i=Xt(`/goals/${r.Id}`);return this.http.put(i,r)}return console.debug(r),se({data:E1(),message:"success"})}deleteGoal(r){if(Nt.production){let i=Xt(`/goals/${r}`);return this.http.delete(i)}return console.debug(r),se(void 0)}getGoalTasks(r){if(Nt.production){let i=Xt(`/goals/${r}/tasks`);return this.http.get(i)}return console.debug(r),se({data:[qi(),qi(),qi(),qi(),qi()],message:"success"})}getGoalHabits(r){if(Nt.production){let i=Xt(`/goals/${r}/habits`);return this.http.get(i)}return console.debug(r),se({data:[Gi(),Gi(),Gi(),Gi(),Gi()],message:"success"})}};t.\u0275fac=function(i){return new(i||t)(ge(qs))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var iH=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(Ce(1)).subscribe(i=>{this.model=new jn(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteGoal(this.model?.Id).pipe(Ce(1)).subscribe(()=>this.router.navigateByUrl("/goals"))}};t.\u0275fac=function(i){return new(i||t)(W(er),W(It),W(Vt))},t.\u0275cmp=Le({type:t,selectors:[["app-delete-page"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),L(),z(2,"p"),T(3,` Deleting this model will make it unrecoverable.
`),L(),z(4,"button",0),Te("click",function(){return o.deleteModel()}),T(5),L()),i&2&&(B(),Ie("Delete ",o.model==null?null:o.model.Name,"?"),B(4),Ie(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();var vi=class extends ka{constructor(t){super(t)}get ViewUrl(){return["/habits",this.Id]}get EditUrl(){return["/habits",this.Id,"edit"]}get DeleteUrl(){return["/habits",this.Id,"delete"]}get IsCompletedToday(){let t=new Date().toLocaleDateString().split("T")[0];return this.CompletedDates?.includes(t)??!1}get FormattedCompletedDates(){let t=[];if(this.AntiHabit){let n=new Date,r=new Date(this.CreatedAt);for(let i=r;i<=n;i.setDate(i.getDate()+1)){let o=i.toLocaleDateString().split("T")[0];(!this.CompletedDates||!this.CompletedDates.includes(o))&&t.push(o)}}else t=this.CompletedDates?.map(n=>new Date(n).toLocaleDateString().split("T")[0]);return t=t.slice(-7),t}};var Wi=class extends ka{constructor(t){super(t)}get ViewUrl(){return["/tasks",this.Id]}get EditUrl(){return["/tasks",this.Id,"edit"]}get DeleteUrl(){return["/tasks",this.Id,"delete"]}get ImportanceHuman(){let t={1:"Low",2:"Low-Medium",3:"Medium",4:"Medium-High",5:"High"};return this.Importance in t?t[this.Importance]:"Unknown Importance"}get isOverdue(){let t=new Date,n=new Date(this.CompleteBy);return t>n}};function f7e(e,t){if(e&1&&(z(0,"li")(1,"a",4),T(2),L()()),e&2){let n=t.$implicit;B(),be("routerLink",n.ViewUrl),B(),Ie(" ",n.Name," ")}}function d7e(e,t){if(e&1&&(z(0,"li")(1,"a",4),T(2),L()()),e&2){let n=t.$implicit;B(),be("routerLink",n.ViewUrl),B(),Ie(" ",n.Name," ")}}var oH=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(Ce(1)).subscribe(i=>{this.model=new jn(i.data),this.api.getGoalHabits(r).pipe(Ce(1)).subscribe(o=>{this.associatedHabits=o.data.map(a=>new vi(a))}),this.api.getGoalTasks(r).pipe(Ce(1)).subscribe(o=>{this.associatedTasks=o.data.map(a=>new Wi(a))})})}};t.\u0275fac=function(i){return new(i||t)(W(er),W(It))},t.\u0275cmp=Le({type:t,selectors:[["app-goal-page"]],decls:20,vars:11,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right",3,"routerLink"],[1,"uk-button-danger","uk-button",3,"routerLink"],[1,"uk-text-default"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),L(),z(2,"button",0),T(3),L(),z(4,"button",1),T(5),L(),z(6,"pre",2),T(7),L(),pn(8,"hr"),z(9,"p"),T(10),hi(11,"date"),L(),z(12,"p"),T(13,"Associated Habits:"),L(),z(14,"ul"),_t(15,f7e,3,2,"li",3),L(),z(16,"p"),T(17,"Associated Tasks:"),L(),z(18,"ul"),_t(19,d7e,3,2,"li",3),L()),i&2&&(B(),Ie("Goal: ",o.model==null?null:o.model.Name,""),B(),be("routerLink",o.model==null?null:o.model.EditUrl),B(),Ie(" Edit: ",o.model==null?null:o.model.Name,`
`),B(),be("routerLink",o.model==null?null:o.model.DeleteUrl),B(),Ie(" Delete: ",o.model==null?null:o.model.Name,`
`),B(2),Ie("    ",o.model==null?null:o.model.Description,`
`),B(3),Ie(" Complete By: ",mi(11,9,o.model==null?null:o.model.CompleteBy),`
`),B(5),be("ngForOf",o.associatedHabits),B(4),be("ngForOf",o.associatedTasks))},dependencies:[gi,Hn,ko],encapsulation:2});let e=t;return e})();function p7e(e,t){if(e&1&&(C1(0),z(1,"p",9),T(2),L(),b1()),e&2){let n=Bn().$implicit;B(2),Ie(" ",n.Description," ")}}function h7e(e,t){if(e&1){let n=Ha();z(0,"tr")(1,"td")(2,"input",6),wt("ngModelChange",function(i){let a=zo(n).$implicit;return Ht(a.Completed,i)||(a.Completed=i),Ho(i)}),Te("change",function(){let o=zo(n).$implicit,a=Bn();return Ho(a.updateGoal(o))}),L()(),z(3,"td"),T(4),L(),z(5,"td",3),_t(6,p7e,3,1,"ng-container",7),L(),z(7,"td")(8,"a",8),T(9,"View"),L()()()}if(e&2){let n=t.$implicit;Bn();let r=nl(21);B(2),Mt("ngModel",n.Completed),B(2),Yr(n.Name),B(2),be("ngIf",n.Description)("ngIfElse",r),B(2),be("routerLink",n.ViewUrl)}}function m7e(e,t){e&1&&(z(0,"i"),T(1,"No description provided."),L())}var aH=(()=>{let t=class t{constructor(r){this.api=r,this.goals=[]}ngOnInit(){this.api.listGoals().pipe(Ce(1)).subscribe(r=>{this.goals=r.data.map(i=>new jn(i))})}updateGoal(r){this.api.updateGoal(r).pipe(Ce(1)).subscribe(i=>{r=new jn(i.data)})}};t.\u0275fac=function(i){return new(i||t)(W(er))},t.\u0275cmp=Le({type:t,selectors:[["app-goals-page"]],decls:22,vars:1,consts:[[1,"list-header"],["routerLink","/goals/new",1,"uk-button","uk-button-primary"],[1,"uk-table","uk-table-striped"],[1,"hide-in-mobile"],[4,"ngFor","ngForOf"],["defaultDescription",""],["type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange","change"],[4,"ngIf","ngIfElse"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],[1,"description"]],template:function(i,o){i&1&&(z(0,"div",0)(1,"h1"),T(2,"Goals"),L(),z(3,"section")(4,"nav")(5,"a",1),T(6,"New Goal"),L()()()(),z(7,"section")(8,"table",2)(9,"thead")(10,"tr"),pn(11,"th"),z(12,"th"),T(13,"Name"),L(),z(14,"th",3),T(15,"Description"),L(),z(16,"th"),T(17,"Action"),L()()(),z(18,"tbody"),_t(19,h7e,10,5,"tr",4),L()()(),_t(20,m7e,2,0,"ng-template",null,5,il)),i&2&&(B(19),be("ngForOf",o.goals))},dependencies:[gi,_o,Hn,Gs,Jn,Un],styles:["p.description[_ngcontent-%COMP%]{text-wrap:nowrap;padding-right:10rem;width:28rem;overflow:hidden}@media screen and (max-width: 768px){.hide-in-mobile[_ngcontent-%COMP%]{display:none}}"]});let e=t;return e})();var sH=(()=>{let t=class t{constructor(r,i){this.api=r,this.router=i,this.model={}}submitForm(){let r=new jn(this.model);r.Completed=!1,this.api.createGoal(r).pipe(Ce(1)).subscribe(()=>this.router.navigateByUrl("/goals"))}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString()}};t.\u0275fac=function(i){return new(i||t)(W(er),W(Vt))},t.\u0275cmp=Le({type:t,selectors:[["app-new-goal-page"]],decls:15,vars:2,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1,"New Goal"),L(),z(2,"form",0,1)(4,"label",2),T(5,"Goal Name"),L(),z(6,"input",3),wt("ngModelChange",function(s){return Ht(o.model.Name,s)||(o.model.Name=s),s}),L(),z(7,"label",4),T(8," Goal Description "),L(),z(9,"textarea",5),wt("ngModelChange",function(s){return Ht(o.model.Description,s)||(o.model.Description=s),s}),L(),z(10,"label",6),T(11,"Complete By"),L(),z(12,"input",7),Te("change",function(s){return o.updateCompleteBy(s)}),L(),z(13,"button",8),Te("click",function(){return o.submitForm()}),T(14," Add New Goal "),L()()),i&2&&(B(6),Mt("ngModel",o.model.Name),B(3),Mt("ngModel",o.model.Description))},dependencies:[S1,Sr,Jn,w1,Un,ji],encapsulation:2});let e=t;return e})();var Ro=(()=>{let t=class t extends Fo{constructor(r){super(),this.http=r}getHabits(){if(Nt.production){let r=Xt("/habits");return this.http.get(r)}return console.debug("/habits"),se({data:[Gi(),Gi(),Gi(),Gi(),Gi()],message:"success"})}getHabit(r){if(Nt.production){let i=Xt(`/habits/${r}`);return this.http.get(i)}return console.debug(r),se({data:Gi(),message:"success"})}createHabit(r){if(Nt.production){let i=Xt("/habits");return this.http.post(i,r)}return console.debug(r),se({data:Gi(),message:"success"})}updateHabit(r){if(Nt.production){let i=Xt(`/habits/${r.Id}`);return this.http.put(i,r)}return console.debug(r),se({data:Gi(),message:"success"})}deleteHabit(r){if(Nt.production){let i=Xt(`/habits/${r}`);return this.http.delete(i)}return console.debug(r),se(void 0)}};t.\u0275fac=function(i){return new(i||t)(ge(qs))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var cH=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(Ce(1)).subscribe(i=>{this.model=new vi(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteHabit(this.model?.Id).pipe(Ce(1)).subscribe(()=>this.router.navigateByUrl("/"))}};t.\u0275fac=function(i){return new(i||t)(W(Ro),W(It),W(Vt))},t.\u0275cmp=Le({type:t,selectors:[["app-delete-habit-page"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),L(),z(2,"p"),T(3,` Deleting this model will make it unrecoverable.
`),L(),z(4,"button",0),Te("click",function(){return o.deleteModel()}),T(5),L()),i&2&&(B(),Ie("Delete ",o.model==null?null:o.model.Name,"?"),B(4),Ie(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();var jg={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]};var qg={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]};var Jq={$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:"container",data:{values:[]},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"date",timeUnit:"date",type:"ordinal",title:"Day",axis:{tickCount:{timeUnit:"day",step:1}}},y:{field:"date",timeUnit:"month",type:"ordinal",title:"Month",scale:{domain:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},color:{field:"count",type:"quantitative",title:"Count",condition:{test:"datum.count === 0",value:"transparent"},legend:null},tooltip:[{field:"count",type:"quantitative",title:"Count"}]}};var lH={};br(lH,{JsonPatchError:()=>Ln,_areEquals:()=>Y5,applyOperation:()=>hl,applyPatch:()=>W6,applyReducer:()=>b7e,deepClone:()=>x7e,getValueByPointer:()=>Qg,validate:()=>tG,validator:()=>Kg});var v7e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),y7e=Object.prototype.hasOwnProperty;function Wg(e,t){return y7e.call(e,t)}function Yg(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Wg(e,i)&&r.push(i);return r}function Qr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Xg(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Ta(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function G5(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Gg(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Gg(e[t]))return!0}else if(typeof e=="object"){for(var r=Yg(e),i=r.length,o=0;o<i;o++)if(Gg(e[r[o]]))return!0}}return!1}function eG(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var W5=function(e){v7e(t,e);function t(n,r,i,o,a){var s=this.constructor,c=e.call(this,eG(n,{name:r,index:i,operation:o,tree:a}))||this;return c.name=r,c.index=i,c.operation=o,c.tree=a,Object.setPrototypeOf(c,s.prototype),c.message=eG(n,{name:r,index:i,operation:o,tree:a}),c}return t}(Error);var Ln=W5,x7e=Qr,G6={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Qg(n,this.path);r&&(r=Qr(r));var i=hl(n,{op:"remove",path:this.from}).removed;return hl(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Qg(n,this.from);return hl(n,{op:"add",path:this.path,value:Qr(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Y5(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},C7e={add:function(e,t,n){return Xg(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:G6.move,copy:G6.copy,test:G6.test,_get:G6._get};function Qg(e,t){if(t=="")return e;var n={op:"_get",path:t};return hl(e,n),n.value}function hl(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):Kg(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=Qg(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=Y5(e,t.value),a.test===!1)throw new Ln("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new Ln("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}}else{r||(e=Qr(e));var s=t.path||"",c=s.split("/"),l=e,u=1,f=c.length,d=void 0,p=void 0,h=void 0;for(typeof n=="function"?h=n:h=Kg;;){if(p=c[u],p&&p.indexOf("~")!=-1&&(p=G5(p)),i&&(p=="__proto__"||p=="prototype"&&u>0&&c[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[p]===void 0?d=c.slice(0,u).join("/"):u==f-1&&(d=t.path),d!==void 0&&h(t,0,e,d)),u++,Array.isArray(l)){if(p==="-")p=l.length;else{if(n&&!Xg(p))throw new Ln("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);Xg(p)&&(p=~~p)}if(u>=f){if(n&&t.op==="add"&&p>l.length)throw new Ln("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var a=C7e[t.op].call(t,l,p,e);if(a.test===!1)throw new Ln("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(u>=f){var a=G6[t.op].call(t,l,p,e);if(a.test===!1)throw new Ln("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}if(l=l[p],n&&u<f&&(!l||typeof l!="object"))throw new Ln("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function W6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ln("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Qr(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=hl(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function b7e(e,t,n){var r=hl(e,t);if(r.test===!1)throw new Ln("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Kg(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ln("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(G6[e.op]){if(typeof e.path!="string")throw new Ln("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ln('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ln("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ln("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Gg(e.value))throw new Ln("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Ln("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ln("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},s=tG([a],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ln("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ln("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function tG(e,t,n){try{if(!Array.isArray(e))throw new Ln("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)W6(Qr(t),Qr(e),n||!0);else{n=n||Kg;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ln)return i;throw i}}function Y5(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,a;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!Y5(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var s=Object.keys(e);if(o=s.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(s[i]))return!1;for(i=o;i--!==0;)if(a=s[i],!Y5(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}var pH={};br(pH,{compare:()=>L7e,generate:()=>uH,observe:()=>H7e,unobserve:()=>z7e});var fH=new WeakMap,M7e=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),w7e=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function S7e(e){return fH.get(e)}function E7e(e,t){return e.observers.get(t)}function D7e(e,t){e.observers.delete(t.callback)}function z7e(e,t){t.unobserve()}function H7e(e,t){var n=[],r,i=S7e(e);if(!i)i=new M7e(e),fH.set(e,i);else{var o=E7e(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Qr(e),t){r.callback=t,r.next=null;var a=function(){uH(r)},s=function(){clearTimeout(r.next),r.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return r.patches=n,r.object=e,r.unobserve=function(){uH(r),clearTimeout(r.next),D7e(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},i.observers.set(t,new w7e(t,r)),r}function uH(e,t){t===void 0&&(t=!1);var n=fH.get(e.object);dH(n.value,e.object,e.patches,"",t),e.patches.length&&W6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function dH(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=Yg(t),a=Yg(e),s=!1,c=!1,l=a.length-1;l>=0;l--){var u=a[l],f=e[u];if(Wg(t,u)&&!(t[u]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof f=="object"&&f!=null&&typeof d=="object"&&d!=null&&Array.isArray(f)===Array.isArray(d)?dH(f,d,n,r+"/"+Ta(u),i):f!==d&&(s=!0,i&&n.push({op:"test",path:r+"/"+Ta(u),value:Qr(f)}),n.push({op:"replace",path:r+"/"+Ta(u),value:Qr(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Ta(u),value:Qr(f)}),n.push({op:"remove",path:r+"/"+Ta(u)}),c=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}),s=!0)}if(!(!c&&o.length==a.length))for(var l=0;l<o.length;l++){var u=o[l];!Wg(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Ta(u),value:Qr(t[u])})}}}function L7e(e,t,n){n===void 0&&(n=!1);var r=[];return dH(e,t,r,"",n),r}var qYe=Object.assign({},lH,pH,{JsonPatchError:W5,deepClone:Qr,escapePathComponent:Ta,unescapePathComponent:G5});var bw=nse(rG());var yI={};br(yI,{Bounds:()=>Vn,CanvasHandler:()=>vc,CanvasRenderer:()=>N7,DATE:()=>Ji,DAY:()=>Kr,DAYOFYEAR:()=>Pa,Dataflow:()=>_3,Debug:()=>mH,Error:()=>Q5,EventStream:()=>uu,Gradient:()=>jV,GroupItem:()=>F7,HOURS:()=>L1,Handler:()=>e4,HybridHandler:()=>vN,HybridRenderer:()=>lx,Info:()=>hH,Item:()=>I7,MILLISECONDS:()=>jo,MINUTES:()=>A1,MONTH:()=>Zr,Marks:()=>n1,MultiPulse:()=>Lv,None:()=>aG,Operator:()=>Ft,Parameters:()=>kd,Pulse:()=>cc,QUARTER:()=>Zi,RenderType:()=>yc,Renderer:()=>so,ResourceLoader:()=>YV,SECONDS:()=>oo,SVGHandler:()=>uN,SVGRenderer:()=>xx,SVGStringRenderer:()=>gN,Scenegraph:()=>yx,TIME_UNITS:()=>mv,Transform:()=>P,View:()=>qT,WEEK:()=>tr,Warn:()=>ev,YEAR:()=>zr,accessor:()=>yi,accessorFields:()=>dr,accessorName:()=>cn,array:()=>te,ascending:()=>nd,bandwidthNRD:()=>_v,bin:()=>FL,bootstrapCI:()=>RL,boundClip:()=>xN,boundContext:()=>R7,boundItem:()=>IV,boundMark:()=>PQ,boundStroke:()=>Za,changeset:()=>uc,clampRange:()=>MH,codegenExpression:()=>LC,compare:()=>td,constant:()=>hn,cumulativeLogNormal:()=>Ov,cumulativeNormal:()=>Fd,cumulativeUniform:()=>Uv,dayofyear:()=>uL,debounce:()=>rd,defaultLocale:()=>Ad,definition:()=>Av,densityLogNormal:()=>Rv,densityNormal:()=>kv,densityUniform:()=>Bv,domChild:()=>vr,domClear:()=>Qo,domCreate:()=>Y3,domFind:()=>lN,dotbin:()=>OL,error:()=>$,expressionFunction:()=>Tn,extend:()=>_e,extent:()=>Yi,extentIndex:()=>wH,falsy:()=>Zs,fastmap:()=>M3,field:()=>Dr,flush:()=>SH,font:()=>gx,fontFamily:()=>$7,fontSize:()=>Ja,format:()=>Mv,formatLocale:()=>Ld,formats:()=>AL,hasOwnProperty:()=>de,id:()=>Y6,identity:()=>An,inferType:()=>EW,inferTypes:()=>DW,ingest:()=>at,inherits:()=>ee,inrange:()=>w3,interpolate:()=>C7,interpolateColors:()=>zu,interpolateRange:()=>Oy,intersect:()=>yN,intersectBoxLine:()=>Lu,intersectPath:()=>XV,intersectPoint:()=>QV,intersectRule:()=>LQ,isArray:()=>F,isBoolean:()=>D1,isDate:()=>H2,isFunction:()=>ke,isIterable:()=>EH,isNumber:()=>Oe,isObject:()=>ne,isRegExp:()=>DH,isString:()=>Q,isTuple:()=>Dl,key:()=>id,lerp:()=>zH,lineHeight:()=>Z3,loader:()=>cu,locale:()=>Cv,logger:()=>K5,lruCache:()=>HH,markup:()=>mN,merge:()=>LH,mergeConfig:()=>Fa,multiLineOffset:()=>mx,one:()=>Ia,pad:()=>AH,panLinear:()=>gH,panLog:()=>vH,panPow:()=>yH,panSymlog:()=>xH,parse:()=>Bne,parseExpression:()=>af,parseSelector:()=>Hi,path:()=>Al,pathCurves:()=>qV,pathEqual:()=>vK,pathParse:()=>Ql,pathRectangle:()=>SQ,pathRender:()=>Au,pathSymbols:()=>wQ,pathTrail:()=>EQ,peek:()=>Ue,point:()=>B7,projection:()=>pp,quantileLogNormal:()=>Pv,quantileNormal:()=>Rd,quantileUniform:()=>jv,quantiles:()=>Vv,quantizeInterpolator:()=>Py,quarter:()=>CH,quartiles:()=>Nv,random:()=>e1,randomInteger:()=>jme,randomKDE:()=>Iv,randomLCG:()=>Ume,randomLogNormal:()=>PL,randomMixture:()=>$L,randomNormal:()=>Tv,randomUniform:()=>BL,read:()=>NL,regressionConstant:()=>qv,regressionExp:()=>jL,regressionLinear:()=>Wv,regressionLoess:()=>WL,regressionLog:()=>UL,regressionPoly:()=>GL,regressionPow:()=>qL,regressionQuad:()=>Yv,renderModule:()=>U7,repeat:()=>X5,resetDefaultLocale:()=>bW,resetSVGClipId:()=>zQ,resetSVGDefIds:()=>Hxe,responseType:()=>VL,runtimeContext:()=>kC,sampleCurve:()=>du,sampleLogNormal:()=>Fv,sampleNormal:()=>Id,sampleUniform:()=>$v,scale:()=>lt,sceneEqual:()=>CN,sceneFromJSON:()=>BQ,scenePickVisit:()=>ex,sceneToJSON:()=>$Q,sceneVisit:()=>I2,sceneZOrder:()=>KV,scheme:()=>b7,serializeXML:()=>oK,setHybridRendererOptions:()=>Sxe,setRandom:()=>$me,span:()=>ec,splitAccessPath:()=>Oo,stringValue:()=>Z,textMetrics:()=>V1,timeBin:()=>CL,timeFloor:()=>hL,timeFormatLocale:()=>El,timeInterval:()=>oc,timeOffset:()=>gL,timeSequence:()=>yL,timeUnitSpecifier:()=>cL,timeUnits:()=>gv,toBoolean:()=>od,toDate:()=>ad,toNumber:()=>qn,toSet:()=>hr,toString:()=>sd,transform:()=>IL,transforms:()=>lc,truncate:()=>VH,truthy:()=>pr,tupleid:()=>Ee,typeParsers:()=>zL,utcFloor:()=>mL,utcInterval:()=>ac,utcOffset:()=>vL,utcSequence:()=>xL,utcdayofyear:()=>dL,utcquarter:()=>bH,utcweek:()=>pL,version:()=>PAe,visitArray:()=>tc,week:()=>fL,writeConfig:()=>Js,zero:()=>z2,zoomLinear:()=>Z5,zoomLog:()=>J5,zoomPow:()=>X6,zoomSymlog:()=>ed});function yi(e,t,n){return e.fields=t||[],e.fname=n,e}function cn(e){return e==null?null:e.fname}function dr(e){return e==null?null:e.fields}function oG(e){return e.length===1?V7e(e[0]):N7e(e)}var V7e=e=>function(t){return t[e]},N7e=e=>{let t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function $(e){throw Error(e)}function Oo(e){let t=[],n=e.length,r=null,i=0,o="",a,s,c;e=e+"";function l(){t.push(o+e.substring(a,s)),o="",a=s+1}for(a=s=0;s<n;++s)if(c=e[s],c==="\\")o+=e.substring(a,s++),a=s;else if(c===r)l(),r=null,i=-1;else{if(r)continue;a===i&&c==='"'||a===i&&c==="'"?(a=s+1,r=c):c==="."&&!i?s>a?l():a=s+1:c==="["?(s>a&&l(),i=a=s+1):c==="]"&&(i||$("Access path missing open bracket: "+e),i>0&&l(),i=0,a=s+1)}return i&&$("Access path missing closing bracket: "+e),r&&$("Access path missing closing quote: "+e),s>a&&(s++,l()),t}function Dr(e,t,n){let r=Oo(e);return e=r.length===1?r[0]:e,yi((n&&n.get||oG)(r),[e],t||e)}var Y6=Dr("id"),An=yi(e=>e,[],"identity"),z2=yi(()=>0,[],"zero"),Ia=yi(()=>1,[],"one"),pr=yi(()=>!0,[],"true"),Zs=yi(()=>!1,[],"false");function _7e(e,t,n){let r=[t].concat([].slice.call(n));console[e].apply(console,r)}var aG=0,Q5=1,ev=2,hH=3,mH=4;function K5(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_7e,r=e||aG;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=Q5&&n(t||"error","ERROR",arguments),this},warn(){return r>=ev&&n(t||"warn","WARN",arguments),this},info(){return r>=hH&&n(t||"log","INFO",arguments),this},debug(){return r>=mH&&n(t||"log","DEBUG",arguments),this}}}var F=Array.isArray;function ne(e){return e===Object(e)}var iG=e=>e!=="__proto__";function Fa(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(let o in i)if(o==="signals")r.signals=k7e(r.signals,i.signals);else{let a=o==="legend"?{layout:1}:o==="style"?!0:null;Js(r,o,i[o],a)}return r},{})}function Js(e,t,n,r){if(!iG(t))return;let i,o;if(ne(n)&&!F(n)){o=ne(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Js(o,i,n[i]):iG(i)&&(o[i]=n[i])}else e[t]=n}function k7e(e,t){if(e==null)return t;let n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function Ue(e){return e[e.length-1]}function qn(e){return e==null||e===""?null:+e}var sG=e=>t=>e*Math.exp(t),cG=e=>t=>Math.log(e*t),lG=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),uG=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Jg=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function tv(e,t,n,r){let i=n(e[0]),o=n(Ue(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function gH(e,t){return tv(e,t,qn,An)}function vH(e,t){var n=Math.sign(e[0]);return tv(e,t,cG(n),sG(n))}function yH(e,t,n){return tv(e,t,Jg(n),Jg(1/n))}function xH(e,t,n){return tv(e,t,lG(n),uG(n))}function nv(e,t,n,r,i){let o=r(e[0]),a=r(Ue(e)),s=t!=null?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function Z5(e,t,n){return nv(e,t,n,qn,An)}function J5(e,t,n){let r=Math.sign(e[0]);return nv(e,t,n,cG(r),sG(r))}function X6(e,t,n,r){return nv(e,t,n,Jg(r),Jg(1/r))}function ed(e,t,n,r){return nv(e,t,n,lG(r),uG(r))}function CH(e){return 1+~~(new Date(e).getMonth()/3)}function bH(e){return 1+~~(new Date(e).getUTCMonth()/3)}function te(e){return e!=null?F(e)?e:[e]:[]}function MH(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function ke(e){return typeof e=="function"}var T7e="descending";function td(e,t,n){n=n||{},t=te(t)||[];let r=[],i=[],o={},a=n.comparator||I7e;return te(e).forEach((s,c)=>{s!=null&&(r.push(t[c]===T7e?-1:1),i.push(s=ke(s)?s:Dr(s,null,n)),(dr(s)||[]).forEach(l=>o[l]=1))}),i.length===0?null:yi(a(i,r),Object.keys(o))}var nd=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),I7e=(e,t)=>e.length===1?F7e(e[0],t[0]):R7e(e,t,e.length),F7e=(e,t)=>function(n,r){return nd(e(n),e(r))*t},R7e=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;a===0&&++s<n;)o=e[s],a=nd(o(r),o(i));return a*t[s]});function hn(e){return ke(e)?e:()=>e}function rd(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function _e(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Yi(e,t){let n=0,r,i,o,a;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=a=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>a&&(a=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=a=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>a&&(a=i))}return[o,a]}function wH(e,t){let n=e.length,r=-1,i,o,a,s,c;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=c=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,c=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=c=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,c=r))}return[s,c]}var O7e=Object.prototype.hasOwnProperty;function de(e,t){return O7e.call(e,t)}var Zg={};function M3(e){let t={},n;function r(o){return de(t,o)&&t[o]!==Zg}let i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,a){return r(o)||(++i.size,t[o]===Zg&&--i.empty),t[o]=a,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=Zg),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){let o={},a=0;for(let s in t){let c=t[s];c!==Zg&&(!n||!n(c))&&(o[s]=c,++a)}i.size=a,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function SH(e,t,n,r,i,o){if(!n&&n!==0)return o;let a=+n,s=e[0],c=Ue(e),l;c<s&&(l=s,s=c,c=l),l=Math.abs(t-s);let u=Math.abs(c-t);return l<u&&l<=a?r:u<=a?i:o}function ee(e,t,n){let r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),_e(r,n)}function w3(e,t,n,r){let i=t[0],o=t[t.length-1],a;return i>o&&(a=i,i=o,o=a),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function D1(e){return typeof e=="boolean"}function H2(e){return Object.prototype.toString.call(e)==="[object Date]"}function EH(e){return e&&ke(e[Symbol.iterator])}function Oe(e){return typeof e=="number"}function DH(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Q(e){return typeof e=="string"}function id(e,t,n){e&&(e=t?te(e).map(s=>s.replace(/\\(.)/g,"$1")):te(e));let r=e&&e.length,i=n&&n.get||oG,o=s=>i(t?[s]:Oo(s)),a;if(!r)a=function(){return""};else if(r===1){let s=o(e[0]);a=function(c){return""+s(c)}}else{let s=e.map(o);a=function(c){let l=""+s[0](c),u=0;for(;++u<r;)l+="|"+s[u](c);return l}}return yi(a,e,"key")}function zH(e,t){let n=e[0],r=Ue(e),i=+t;return i?i===1?r:n+i*(r-n):n}var P7e=1e4;function HH(e){e=+e||P7e;let t,n,r,i=()=>{t={},n={},r=0},o=(a,s)=>(++r>e&&(n=t,t={},r=1),t[a]=s);return i(),{clear:i,has:a=>de(t,a)||de(n,a),get:a=>de(t,a)?t[a]:de(n,a)?o(a,n[a]):void 0,set:(a,s)=>de(t,a)?t[a]=s:o(a,s)}}function LH(e,t,n,r){let i=t.length,o=n.length;if(!o)return t;if(!i)return n;let a=r||new t.constructor(i+o),s=0,c=0,l=0;for(;s<i&&c<o;++l)a[l]=e(t[s],n[c])>0?n[c++]:t[s++];for(;s<i;++s,++l)a[l]=t[s];for(;c<o;++c,++l)a[l]=n[c];return a}function X5(e,t){let n="";for(;--t>=0;)n+=e;return n}function AH(e,t,n,r){let i=n||" ",o=e+"",a=t-o.length;return a<=0?o:r==="left"?X5(i,a)+o:r==="center"?X5(i,~~(a/2))+o+X5(i,Math.ceil(a/2)):o+X5(i,a)}function ec(e){return e&&Ue(e)-e[0]||0}function Z(e){return F(e)?"["+e.map(Z)+"]":ne(e)||Q(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function od(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}var $7e=e=>Oe(e)||H2(e)?e:Date.parse(e);function ad(e,t){return t=t||$7e,e==null||e===""?null:t(e)}function sd(e){return e==null||e===""?null:e+""}function hr(e){let t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function VH(e,t,n,r){let i=r??"\u2026",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:n==="left"?i+o.slice(a-s):n==="center"?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function tc(e,t,n){if(e)if(t){let r=e.length;for(let i=0;i<r;++i){let o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var fG={},NH={},_H=34,cd=10,kH=13;function pG(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function B7e(e,t){var n=pG(e);return function(r,i){return t(n(r),i,e)}}function dG(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function z1(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function U7e(e){return e<0?"-"+z1(-e,6):e>9999?"+"+z1(e,6):z1(e,4)}function j7e(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":U7e(e.getUTCFullYear(),4)+"-"+z1(e.getUTCMonth()+1,2)+"-"+z1(e.getUTCDate(),2)+(i?"T"+z1(t,2)+":"+z1(n,2)+":"+z1(r,2)+"."+z1(i,3)+"Z":r?"T"+z1(t,2)+":"+z1(n,2)+":"+z1(r,2)+"Z":n||t?"T"+z1(t,2)+":"+z1(n,2)+"Z":"")}function TH(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var p,h,m=i(f,function(g,v){if(p)return p(g,v-1);h=g,p=d?B7e(g,d):pG(g)});return m.columns=h||[],m}function i(f,d){var p=[],h=f.length,m=0,g=0,v,y=h<=0,C=!1;f.charCodeAt(h-1)===cd&&--h,f.charCodeAt(h-1)===kH&&--h;function b(){if(y)return NH;if(C)return C=!1,fG;var S,w=m,E;if(f.charCodeAt(w)===_H){for(;m++<h&&f.charCodeAt(m)!==_H||f.charCodeAt(++m)===_H;);return(S=m)>=h?y=!0:(E=f.charCodeAt(m++))===cd?C=!0:E===kH&&(C=!0,f.charCodeAt(m)===cd&&++m),f.slice(w+1,S-1).replace(/""/g,'"')}for(;m<h;){if((E=f.charCodeAt(S=m++))===cd)C=!0;else if(E===kH)C=!0,f.charCodeAt(m)===cd&&++m;else if(E!==n)continue;return f.slice(w,S)}return y=!0,f.slice(w,h)}for(;(v=b())!==NH;){for(var M=[];v!==fG&&v!==NH;)M.push(v),v=b();d&&(M=d(M,g++))==null||p.push(M)}return p}function o(f,d){return f.map(function(p){return d.map(function(h){return u(p[h])}).join(e)})}function a(f,d){return d==null&&(d=dG(f)),[d.map(u).join(e)].concat(o(f,d)).join(`
`)}function s(f,d){return d==null&&(d=dG(f)),o(f,d).join(`
`)}function c(f){return f.map(l).join(`
`)}function l(f){return f.map(u).join(e)}function u(f){return f==null?"":f instanceof Date?j7e(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:c,formatRow:l,formatValue:u}}function IH(e){return e}function rv(e){if(e==null)return IH;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(s,c){c||(t=n=0);var l=2,u=s.length,f=new Array(u);for(f[0]=(t+=s[0])*r+o,f[1]=(n+=s[1])*i+a;l<u;)f[l]=s[l],++l;return f}}function hG(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function FH(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return mG(e,n)})}:mG(e,t)}function mG(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=iv(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function iv(e,t){var n=rv(e.transform),r=e.arcs;function i(u,f){f.length&&f.pop();for(var d=r[u<0?~u:u],p=0,h=d.length;p<h;++p)f.push(n(d[p],p));u<0&&hG(f,h)}function o(u){return n(u)}function a(u){for(var f=[],d=0,p=u.length;d<p;++d)i(u[d],f);return f.length<2&&f.push(f[0]),f}function s(u){for(var f=a(u);f.length<4;)f.push(f[0]);return f}function c(u){return u.map(s)}function l(u){var f=u.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(l)};case"Point":d=o(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(o);break;case"LineString":d=a(u.arcs);break;case"MultiLineString":d=u.arcs.map(a);break;case"Polygon":d=c(u.arcs);break;case"MultiPolygon":d=u.arcs.map(c);break;default:return null}return{type:f,coordinates:d}}return l(t)}function RH(e,t){var n={},r={},i={},o=[],a=-1;t.forEach(function(l,u){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++a],t[a]=l,t[u]=d)}),t.forEach(function(l){var u=s(l),f=u[0],d=u[1],p,h;if(p=i[f])if(delete i[p.end],p.push(l),p.end=d,h=r[d]){delete r[h.start];var m=h===p?p:p.concat(h);r[m.start=p.start]=i[m.end=h.end]=m}else r[p.start]=i[p.end]=p;else if(p=r[d])if(delete r[p.start],p.unshift(l),p.start=f,h=i[f]){delete i[h.end];var g=h===p?p:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[p.start]=i[p.end]=p;else p=[l],r[p.start=f]=i[p.end=d]=p});function s(l){var u=e.arcs[l<0?~l:l],f=u[0],d;return e.transform?(d=[0,0],u.forEach(function(p){d[0]+=p[0],d[1]+=p[1]})):d=u[u.length-1],l<0?[d,f]:[f,d]}function c(l,u){for(var f in l){var d=l[f];delete u[d.start],delete d.start,delete d.end,d.forEach(function(p){n[p<0?~p:p]=1}),o.push(d)}}return c(i,r),c(r,i),t.forEach(function(l){n[l<0?~l:l]||o.push([l])}),o}function OH(e){return iv(e,gG.apply(this,arguments))}function gG(e,t,n){var r,i,o;if(arguments.length>1)r=q7e(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:RH(e,r)}}function q7e(e,t,n){var r=[],i=[],o;function a(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function s(f){f.forEach(a)}function c(f){f.forEach(s)}function l(f){f.forEach(c)}function u(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(u);break;case"LineString":s(f.arcs);break;case"MultiLineString":case"Polygon":c(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return u(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function xi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function PH(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ro(e){let t,n,r;e.length!==2?(t=xi,n=(s,c)=>xi(e(s),c),r=(s,c)=>e(s)-c):(t=e===xi||e===PH?e:Y7e,n=e,r=e);function i(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{let f=l+u>>>1;n(s[f],c)<0?l=f+1:u=f}while(l<u)}return l}function o(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{let f=l+u>>>1;n(s[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function a(s,c,l=0,u=s.length){let f=i(s,c,l,u-1);return f>l&&r(s[f-1],c)>-r(s[f],c)?f-1:f}return{left:i,center:a,right:o}}function Y7e(){return 0}function ld(e){return e===null?NaN:+e}function*vG(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}var yG=ro(xi),ml=yG.right,$H=yG.left,X7e=ro(ld).center,L2=ml;function BH(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i))}if(n>1)return o/(n-1)}function ov(e,t){let n=BH(e,t);return n&&Math.sqrt(n)}var mn=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){let n=this._partials,r=0;for(let i=0;i<this._n&&i<32;i++){let o=n[i],a=t+o,s=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);s&&(n[r++]=s),t=a}return n[r]=t,this._n=r+1,this}valueOf(){let t=this._partials,n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}};var Q6=class extends Map{constructor(t,n=bG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let[r,i]of t)this.set(r,i)}get(t){return super.get(UH(this,t))}has(t){return super.has(UH(this,t))}set(t,n){return super.set(xG(this,t),n)}delete(t){return super.delete(CG(this,t))}},nc=class extends Set{constructor(t,n=bG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let r of t)this.add(r)}has(t){return super.has(UH(this,t))}add(t){return super.add(xG(this,t))}delete(t){return super.delete(CG(this,t))}};function UH({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function xG({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function CG({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function bG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function av(e,t){return Array.from(t,n=>e[n])}function MG(e=xi){if(e===xi)return jH;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{let r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function jH(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var Q7e=Math.sqrt(50),K7e=Math.sqrt(10),Z7e=Math.sqrt(2);function sv(e,t,n){let r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Q7e?10:o>=K7e?5:o>=Z7e?2:1,s,c,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(e*l),c=Math.round(t*l),s/l<e&&++s,c/l>t&&--c,l=-l):(l=Math.pow(10,i)*a,s=Math.round(e/l),c=Math.round(t/l),s*l<e&&++s,c*l>t&&--c),c<s&&.5<=n&&n<2?sv(e,t,n*2):[s,c,l]}function gl(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];let r=t<e,[i,o,a]=r?sv(t,e,n):sv(e,t,n);if(!(o>=i))return[];let s=o-i+1,c=new Array(s);if(r)if(a<0)for(let l=0;l<s;++l)c[l]=(o-l)/-a;else for(let l=0;l<s;++l)c[l]=(o-l)*a;else if(a<0)for(let l=0;l<s;++l)c[l]=(i+l)/-a;else for(let l=0;l<s;++l)c[l]=(i+l)*a;return c}function ud(e,t,n){return t=+t,e=+e,n=+n,sv(e,t,n)[2]}function Xi(e,t,n){t=+t,e=+e,n=+n;let r=t<e,i=r?ud(t,e,n):ud(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Po(e,t){let n;if(t===void 0)for(let r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function vl(e,t){let n;if(t===void 0)for(let r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function cv(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?jH:MG(i);r>n;){if(r-n>600){let c=r-n+1,l=t-n+1,u=Math.log(c),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(c-f)/c)*(l-c/2<0?-1:1),p=Math.max(n,Math.floor(t-l*f/c+d)),h=Math.min(r,Math.floor(t+(c-l)*f/c+d));cv(e,t,p,h,i)}let o=e[t],a=n,s=r;for(fd(e,n,t),i(e[r],o)>0&&fd(e,n,r);a<s;){for(fd(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}i(e[n],o)===0?fd(e,n,s):(++s,fd(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function fd(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function yl(e,t,n){if(e=Float64Array.from(vG(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return vl(e);if(t>=1)return Po(e);var r,i=(r-1)*t,o=Math.floor(i),a=Po(cv(e,o).subarray(0,o+1)),s=vl(e.subarray(o+1));return a+(s-a)*(i-o)}}function dd(e,t,n=ld){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(i-o)}}function lv(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function K6(e,t){return yl(e,.5,t)}function*epe(e){for(let t of e)yield*eO(t)}function Z6(e){return Array.from(epe(e))}function Gn(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function J6(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function uv(e,...t){e=new nc(e),t=t.map(tpe);e:for(let n of e)for(let r of t)if(!r.has(n)){e.delete(n);continue e}return e}function tpe(e){return e instanceof nc?e:new nc(e)}function fv(...e){let t=new nc;for(let n of e)for(let r of n)t.add(r);return t}function wG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function xl(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Ra(e){return e=xl(Math.abs(e)),e?e[1]:NaN}function SG(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function EG(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var npe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function io(e){if(!(t=npe.exec(e)))throw new Error("invalid format: "+e);var t;return new dv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}io.prototype=dv.prototype;function dv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}dv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function DG(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var qH;function zG(e,t){var n=xl(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(qH=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+xl(e,Math.max(0,t+o-1))[0]}function GH(e,t){var n=xl(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var WH={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:wG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>GH(e*100,t),r:GH,s:zG,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function YH(e){return e}var HG=Array.prototype.map,LG=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function pd(e){var t=e.grouping===void 0||e.thousands===void 0?YH:SG(HG.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?YH:EG(HG.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(f){f=io(f);var d=f.fill,p=f.align,h=f.sign,m=f.symbol,g=f.zero,v=f.width,y=f.comma,C=f.precision,b=f.trim,M=f.type;M==="n"?(y=!0,M="g"):WH[M]||(C===void 0&&(C=12),b=!0,M="g"),(g||d==="0"&&p==="=")&&(g=!0,d="0",p="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",w=m==="$"?r:/[%p]/.test(M)?a:"",E=WH[M],D=/[defgprs%]/.test(M);C=C===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function H(A){var j=S,V=w,_,N,I;if(M==="c")V=E(A)+V,A="";else{A=+A;var G=A<0||1/A<0;if(A=isNaN(A)?c:E(Math.abs(A),C),b&&(A=DG(A)),G&&+A==0&&h!=="+"&&(G=!1),j=(G?h==="("?h:s:h==="-"||h==="("?"":h)+j,V=(M==="s"?LG[8+qH/3]:"")+V+(G&&h==="("?")":""),D){for(_=-1,N=A.length;++_<N;)if(I=A.charCodeAt(_),48>I||I>57){V=(I===46?i+A.slice(_+1):A.slice(_))+V,A=A.slice(0,_);break}}}y&&!g&&(A=t(A,1/0));var X=j.length+A.length+V.length,J=X<v?new Array(v-X+1).join(d):"";switch(y&&g&&(A=t(J+A,J.length?v-V.length:1/0),J=""),p){case"<":A=j+A+V+J;break;case"=":A=j+J+A+V;break;case"^":A=J.slice(0,X=J.length>>1)+j+A+V+J.slice(X);break;default:A=J+j+A+V;break}return o(A)}return H.toString=function(){return f+""},H}function u(f,d){var p=l((f=io(f),f.type="f",f)),h=Math.max(-8,Math.min(8,Math.floor(Ra(d)/3)))*3,m=Math.pow(10,-h),g=LG[8+h/3];return function(v){return p(m*v)+g}}return{format:l,formatPrefix:u}}var pv,S3,eu;XH({thousands:",",grouping:[3],currency:["$",""]});function XH(e){return pv=pd(e),S3=pv.format,eu=pv.formatPrefix,pv}function hd(e){return Math.max(0,-Ra(Math.abs(e)))}function md(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ra(t)/3)))*3-Ra(Math.abs(e)))}function gd(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ra(t)-Ra(e))+1}var QH=new Date,KH=new Date;function Qt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{let a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{let c=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return c;let l;do c.push(l=new Date(+o)),t(o,s),e(o);while(l<o&&o<a);return c},i.filter=o=>Qt(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(QH.setTime(+o),KH.setTime(+a),e(QH),e(KH),Math.floor(n(QH,KH))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}var A2=Qt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);A2.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Qt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):A2);var AG=A2.range;var Ci=Qt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*1e3)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds()),VG=Ci.range;var E3=Qt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getMinutes()),rpe=E3.range,D3=Qt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes()),ipe=D3.range;var z3=Qt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3-e.getMinutes()*6e4)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getHours()),ope=z3.range,H3=Qt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours()),ape=H3.range;var H1=Qt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1),spe=H1.range,$o=Qt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1),cpe=$o.range,hv=Qt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5)),lpe=hv.range;function Ml(e){return Qt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/6048e5)}var Bo=Ml(0),tu=Ml(1),_G=Ml(2),kG=Ml(3),L3=Ml(4),TG=Ml(5),IG=Ml(6),FG=Bo.range,upe=tu.range,fpe=_G.range,dpe=kG.range,ppe=L3.range,hpe=TG.range,mpe=IG.range;function wl(e){return Qt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/6048e5)}var Uo=wl(0),nu=wl(1),RG=wl(2),OG=wl(3),A3=wl(4),PG=wl(5),$G=wl(6),BG=Uo.range,gpe=nu.range,vpe=RG.range,ype=OG.range,xpe=A3.range,Cpe=PG.range,bpe=$G.range;var rc=Qt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),Mpe=rc.range,ic=Qt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),wpe=ic.range;var Qi=Qt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Qt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});var Spe=Qi.range,Ki=Qt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ki.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Qt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});var Epe=Ki.range;function jG(e,t,n,r,i,o){let a=[[Ci,1,1e3],[Ci,5,5*1e3],[Ci,15,15*1e3],[Ci,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[r,1,864e5],[r,2,2*864e5],[n,1,6048e5],[t,1,2592e6],[t,3,3*2592e6],[e,1,31536e6]];function s(l,u,f){let d=u<l;d&&([l,u]=[u,l]);let p=f&&typeof f.range=="function"?f:c(l,u,f),h=p?p.range(l,+u+1):[];return d?h.reverse():h}function c(l,u,f){let d=Math.abs(u-l)/f,p=ro(([,,g])=>g).right(a,d);if(p===a.length)return e.every(Xi(l/31536e6,u/31536e6,f));if(p===0)return A2.every(Math.max(Xi(l,u,f),1));let[h,m]=a[d/a[p-1][2]<a[p][2]/d?p-1:p];return h.every(m)}return[s,c]}var[ZH,JH]=jG(Ki,ic,Uo,hv,H3,D3),[eL,tL]=jG(Qi,rc,Bo,H1,z3,E3);var zr="year",Zi="quarter",Zr="month",tr="week",Ji="date",Kr="day",Pa="dayofyear",L1="hours",A1="minutes",oo="seconds",jo="milliseconds",mv=[zr,Zi,Zr,tr,Ji,Kr,Pa,L1,A1,oo,jo],nL=mv.reduce((e,t,n)=>(e[t]=1+n,e),{});function gv(e){let t=te(e).slice(),n={};return t.length||$("Missing time unit."),t.forEach(i=>{de(nL,i)?n[i]=1:$(`Invalid time unit: ${i}.`)}),(n[tr]||n[Kr]?1:0)+(n[Zi]||n[Zr]||n[Ji]?1:0)+(n[Pa]?1:0)>1&&$(`Incompatible time units: ${e}`),t.sort((i,o)=>nL[i]-nL[o]),t}var zpe={[zr]:"%Y ",[Zi]:"Q%q ",[Zr]:"%b ",[Ji]:"%d ",[tr]:"W%U ",[Kr]:"%a ",[Pa]:"%j ",[L1]:"%H:00",[A1]:"00:%M",[oo]:":%S",[jo]:".%L",[`${zr}-${Zr}`]:"%Y-%m ",[`${zr}-${Zr}-${Ji}`]:"%Y-%m-%d ",[`${L1}-${A1}`]:"%H:%M"};function cL(e,t){let n=_e({},zpe,t),r=gv(e),i=r.length,o="",a=0,s,c;for(a=0;a<i;)for(s=r.length;s>a;--s)if(c=r.slice(a,s).join("-"),n[c]!=null){o+=n[c],a=s;break}return o.trim()}var Sl=new Date;function lL(e){return Sl.setFullYear(e),Sl.setMonth(0),Sl.setDate(1),Sl.setHours(0,0,0,0),Sl}function uL(e){return WG(new Date(e))}function fL(e){return rL(new Date(e))}function WG(e){return H1.count(lL(e.getFullYear())-1,e)}function rL(e){return Bo.count(lL(e.getFullYear())-1,e)}function iL(e){return lL(e).getDay()}function Hpe(e,t,n,r,i,o,a){if(0<=e&&e<100){let s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function dL(e){return YG(new Date(e))}function pL(e){return oL(new Date(e))}function YG(e){let t=Date.UTC(e.getUTCFullYear(),0,1);return $o.count(t-1,e)}function oL(e){let t=Date.UTC(e.getUTCFullYear(),0,1);return Uo.count(t-1,e)}function aL(e){return Sl.setTime(Date.UTC(e,0,1)),Sl.getUTCDay()}function Lpe(e,t,n,r,i,o,a){if(0<=e&&e<100){let s=new Date(Date.UTC(-1,t,n,r,i,o,a));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(e,t,n,r,i,o,a))}function XG(e,t,n,r,i){let o=t||1,a=Ue(e),s=(v,y,C)=>(C=C||v,Ape(n[C],r[C],v===a&&o,y)),c=new Date,l=hr(e),u=l[zr]?s(zr):hn(2012),f=l[Zr]?s(Zr):l[Zi]?s(Zi):z2,d=l[tr]&&l[Kr]?s(Kr,1,tr+Kr):l[tr]?s(tr,1):l[Kr]?s(Kr,1):l[Ji]?s(Ji,1):l[Pa]?s(Pa,1):Ia,p=l[L1]?s(L1):z2,h=l[A1]?s(A1):z2,m=l[oo]?s(oo):z2,g=l[jo]?s(jo):z2;return function(v){c.setTime(+v);let y=u(c);return i(y,f(c),d(c,y),p(c),h(c),m(c),g(c))}}function Ape(e,t,n,r){let i=n<=1?e:r?(o,a)=>r+n*Math.floor((e(o,a)-r)/n):(o,a)=>n*Math.floor(e(o,a)/n);return t?(o,a)=>t(i(o,a),a):i}function ru(e,t,n){return t+e*7-(n+6)%7}var Vpe={[zr]:e=>e.getFullYear(),[Zi]:e=>Math.floor(e.getMonth()/3),[Zr]:e=>e.getMonth(),[Ji]:e=>e.getDate(),[L1]:e=>e.getHours(),[A1]:e=>e.getMinutes(),[oo]:e=>e.getSeconds(),[jo]:e=>e.getMilliseconds(),[Pa]:e=>WG(e),[tr]:e=>rL(e),[tr+Kr]:(e,t)=>ru(rL(e),e.getDay(),iL(t)),[Kr]:(e,t)=>ru(1,e.getDay(),iL(t))},Npe={[Zi]:e=>3*e,[tr]:(e,t)=>ru(e,0,iL(t))};function hL(e,t){return XG(e,t||1,Vpe,Npe,Hpe)}var _pe={[zr]:e=>e.getUTCFullYear(),[Zi]:e=>Math.floor(e.getUTCMonth()/3),[Zr]:e=>e.getUTCMonth(),[Ji]:e=>e.getUTCDate(),[L1]:e=>e.getUTCHours(),[A1]:e=>e.getUTCMinutes(),[oo]:e=>e.getUTCSeconds(),[jo]:e=>e.getUTCMilliseconds(),[Pa]:e=>YG(e),[tr]:e=>oL(e),[Kr]:(e,t)=>ru(1,e.getUTCDay(),aL(t)),[tr+Kr]:(e,t)=>ru(oL(e),e.getUTCDay(),aL(t))},kpe={[Zi]:e=>3*e,[tr]:(e,t)=>ru(e,0,aL(t))};function mL(e,t){return XG(e,t||1,_pe,kpe,Lpe)}var Tpe={[zr]:Qi,[Zi]:rc.every(3),[Zr]:rc,[tr]:Bo,[Ji]:H1,[Kr]:H1,[Pa]:H1,[L1]:z3,[A1]:E3,[oo]:Ci,[jo]:A2},Ipe={[zr]:Ki,[Zi]:ic.every(3),[Zr]:ic,[tr]:Uo,[Ji]:$o,[Kr]:$o,[Pa]:$o,[L1]:H3,[A1]:D3,[oo]:Ci,[jo]:A2};function oc(e){return Tpe[e]}function ac(e){return Ipe[e]}function QG(e,t,n){return e?e.offset(t,n):void 0}function gL(e,t,n){return QG(oc(e),t,n)}function vL(e,t,n){return QG(ac(e),t,n)}function KG(e,t,n,r){return e?e.range(t,n,r):void 0}function yL(e,t,n,r){return KG(oc(e),t,n,r)}function xL(e,t,n,r){return KG(ac(e),t,n,r)}var xd=1e3,Cd=xd*60,bd=Cd*60,vv=bd*24,Fpe=vv*7,qG=vv*30,sL=vv*365,ZG=[zr,Zr,Ji,L1,A1,oo,jo],Md=ZG.slice(0,-1),wd=Md.slice(0,-1),Sd=wd.slice(0,-1),Rpe=Sd.slice(0,-1),Ope=[zr,tr],GG=[zr,Zr],JG=[zr],yd=[[Md,1,xd],[Md,5,5*xd],[Md,15,15*xd],[Md,30,30*xd],[wd,1,Cd],[wd,5,5*Cd],[wd,15,15*Cd],[wd,30,30*Cd],[Sd,1,bd],[Sd,3,3*bd],[Sd,6,6*bd],[Sd,12,12*bd],[Rpe,1,vv],[Ope,1,Fpe],[GG,1,qG],[GG,3,3*qG],[JG,1,sL]];function CL(e){let t=e.extent,n=e.maxbins||40,r=Math.abs(ec(t))/n,i=ro(s=>s[2]).right(yd,r),o,a;return i===yd.length?(o=JG,a=Xi(t[0]/sL,t[1]/sL,n)):i?(i=yd[r/yd[i-1][2]<yd[i][2]/r?i-1:i],o=i[0],a=i[1]):(o=ZG,a=Math.max(Xi(t[0],t[1],n),1)),{units:o,step:a}}function bL(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ML(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ed(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function iu(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,c=e.shortMonths,l=Dd(i),u=zd(i),f=Dd(o),d=zd(o),p=Dd(a),h=zd(a),m=Dd(s),g=zd(s),v=Dd(c),y=zd(c),C={a:G,A:X,b:J,B:we,c:null,d:oW,e:oW,f:che,g:yhe,G:Che,H:ohe,I:ahe,j:she,L:uW,m:lhe,M:uhe,p:Se,q:Ye,Q:cW,s:lW,S:fhe,u:dhe,U:phe,V:hhe,w:mhe,W:ghe,x:null,X:null,y:vhe,Y:xhe,Z:bhe,"%":sW},b={a:bt,A:st,b:Kt,B:Es,c:null,d:aW,e:aW,f:Ehe,g:The,G:Fhe,H:Mhe,I:whe,j:She,L:dW,m:Dhe,M:zhe,p:W0,q:T4,Q:cW,s:lW,S:Hhe,u:Lhe,U:Ahe,V:Vhe,w:Nhe,W:_he,x:null,X:null,y:khe,Y:Ihe,Z:Rhe,"%":sW},M={a:H,A,b:j,B:V,c:_,d:rW,e:rW,f:the,g:nW,G:tW,H:iW,I:iW,j:Kpe,L:ehe,m:Qpe,M:Zpe,p:D,q:Xpe,Q:rhe,s:ihe,S:Jpe,u:jpe,U:qpe,V:Gpe,w:Upe,W:Wpe,x:N,X:I,y:nW,Y:tW,Z:Ype,"%":nhe};C.x=S(n,C),C.X=S(r,C),C.c=S(t,C),b.x=S(n,b),b.X=S(r,b),b.c=S(t,b);function S(me,Xe){return function(nt){var oe=[],jr=-1,zt=0,fi=me.length,di,ya,A8;for(nt instanceof Date||(nt=new Date(+nt));++jr<fi;)me.charCodeAt(jr)===37&&(oe.push(me.slice(zt,jr)),(ya=eW[di=me.charAt(++jr)])!=null?di=me.charAt(++jr):ya=di==="e"?" ":"0",(A8=Xe[di])&&(di=A8(nt,ya)),oe.push(di),zt=jr+1);return oe.push(me.slice(zt,jr)),oe.join("")}}function w(me,Xe){return function(nt){var oe=Ed(1900,void 0,1),jr=E(oe,me,nt+="",0),zt,fi;if(jr!=nt.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(Xe&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(zt=ML(Ed(oe.y,0,1)),fi=zt.getUTCDay(),zt=fi>4||fi===0?nu.ceil(zt):nu(zt),zt=$o.offset(zt,(oe.V-1)*7),oe.y=zt.getUTCFullYear(),oe.m=zt.getUTCMonth(),oe.d=zt.getUTCDate()+(oe.w+6)%7):(zt=bL(Ed(oe.y,0,1)),fi=zt.getDay(),zt=fi>4||fi===0?tu.ceil(zt):tu(zt),zt=H1.offset(zt,(oe.V-1)*7),oe.y=zt.getFullYear(),oe.m=zt.getMonth(),oe.d=zt.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),fi="Z"in oe?ML(Ed(oe.y,0,1)).getUTCDay():bL(Ed(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(fi+5)%7:oe.w+oe.U*7-(fi+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,ML(oe)):bL(oe)}}function E(me,Xe,nt,oe){for(var jr=0,zt=Xe.length,fi=nt.length,di,ya;jr<zt;){if(oe>=fi)return-1;if(di=Xe.charCodeAt(jr++),di===37){if(di=Xe.charAt(jr++),ya=M[di in eW?Xe.charAt(jr++):di],!ya||(oe=ya(me,nt,oe))<0)return-1}else if(di!=nt.charCodeAt(oe++))return-1}return oe}function D(me,Xe,nt){var oe=l.exec(Xe.slice(nt));return oe?(me.p=u.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function H(me,Xe,nt){var oe=p.exec(Xe.slice(nt));return oe?(me.w=h.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function A(me,Xe,nt){var oe=f.exec(Xe.slice(nt));return oe?(me.w=d.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function j(me,Xe,nt){var oe=v.exec(Xe.slice(nt));return oe?(me.m=y.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function V(me,Xe,nt){var oe=m.exec(Xe.slice(nt));return oe?(me.m=g.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function _(me,Xe,nt){return E(me,t,Xe,nt)}function N(me,Xe,nt){return E(me,n,Xe,nt)}function I(me,Xe,nt){return E(me,r,Xe,nt)}function G(me){return a[me.getDay()]}function X(me){return o[me.getDay()]}function J(me){return c[me.getMonth()]}function we(me){return s[me.getMonth()]}function Se(me){return i[+(me.getHours()>=12)]}function Ye(me){return 1+~~(me.getMonth()/3)}function bt(me){return a[me.getUTCDay()]}function st(me){return o[me.getUTCDay()]}function Kt(me){return c[me.getUTCMonth()]}function Es(me){return s[me.getUTCMonth()]}function W0(me){return i[+(me.getUTCHours()>=12)]}function T4(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var Xe=S(me+="",C);return Xe.toString=function(){return me},Xe},parse:function(me){var Xe=w(me+="",!1);return Xe.toString=function(){return me},Xe},utcFormat:function(me){var Xe=S(me+="",b);return Xe.toString=function(){return me},Xe},utcParse:function(me){var Xe=w(me+="",!0);return Xe.toString=function(){return me},Xe}}}var eW={"-":"",_:" ",0:"0"},Hr=/^\s*\d+/,Ppe=/^%/,$pe=/[\\^$*+?|[\]().{}]/g;function St(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Bpe(e){return e.replace($pe,"\\$&")}function Dd(e){return new RegExp("^(?:"+e.map(Bpe).join("|")+")","i")}function zd(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Upe(e,t,n){var r=Hr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function jpe(e,t,n){var r=Hr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function qpe(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Gpe(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Wpe(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function tW(e,t,n){var r=Hr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function nW(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ype(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Xpe(e,t,n){var r=Hr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Qpe(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function rW(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Kpe(e,t,n){var r=Hr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function iW(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Zpe(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Jpe(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ehe(e,t,n){var r=Hr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function the(e,t,n){var r=Hr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function nhe(e,t,n){var r=Ppe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function rhe(e,t,n){var r=Hr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function ihe(e,t,n){var r=Hr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function oW(e,t){return St(e.getDate(),t,2)}function ohe(e,t){return St(e.getHours(),t,2)}function ahe(e,t){return St(e.getHours()%12||12,t,2)}function she(e,t){return St(1+H1.count(Qi(e),e),t,3)}function uW(e,t){return St(e.getMilliseconds(),t,3)}function che(e,t){return uW(e,t)+"000"}function lhe(e,t){return St(e.getMonth()+1,t,2)}function uhe(e,t){return St(e.getMinutes(),t,2)}function fhe(e,t){return St(e.getSeconds(),t,2)}function dhe(e){var t=e.getDay();return t===0?7:t}function phe(e,t){return St(Bo.count(Qi(e)-1,e),t,2)}function fW(e){var t=e.getDay();return t>=4||t===0?L3(e):L3.ceil(e)}function hhe(e,t){return e=fW(e),St(L3.count(Qi(e),e)+(Qi(e).getDay()===4),t,2)}function mhe(e){return e.getDay()}function ghe(e,t){return St(tu.count(Qi(e)-1,e),t,2)}function vhe(e,t){return St(e.getFullYear()%100,t,2)}function yhe(e,t){return e=fW(e),St(e.getFullYear()%100,t,2)}function xhe(e,t){return St(e.getFullYear()%1e4,t,4)}function Che(e,t){var n=e.getDay();return e=n>=4||n===0?L3(e):L3.ceil(e),St(e.getFullYear()%1e4,t,4)}function bhe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+St(t/60|0,"0",2)+St(t%60,"0",2)}function aW(e,t){return St(e.getUTCDate(),t,2)}function Mhe(e,t){return St(e.getUTCHours(),t,2)}function whe(e,t){return St(e.getUTCHours()%12||12,t,2)}function She(e,t){return St(1+$o.count(Ki(e),e),t,3)}function dW(e,t){return St(e.getUTCMilliseconds(),t,3)}function Ehe(e,t){return dW(e,t)+"000"}function Dhe(e,t){return St(e.getUTCMonth()+1,t,2)}function zhe(e,t){return St(e.getUTCMinutes(),t,2)}function Hhe(e,t){return St(e.getUTCSeconds(),t,2)}function Lhe(e){var t=e.getUTCDay();return t===0?7:t}function Ahe(e,t){return St(Uo.count(Ki(e)-1,e),t,2)}function pW(e){var t=e.getUTCDay();return t>=4||t===0?A3(e):A3.ceil(e)}function Vhe(e,t){return e=pW(e),St(A3.count(Ki(e),e)+(Ki(e).getUTCDay()===4),t,2)}function Nhe(e){return e.getUTCDay()}function _he(e,t){return St(nu.count(Ki(e)-1,e),t,2)}function khe(e,t){return St(e.getUTCFullYear()%100,t,2)}function The(e,t){return e=pW(e),St(e.getUTCFullYear()%100,t,2)}function Ihe(e,t){return St(e.getUTCFullYear()%1e4,t,4)}function Fhe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?A3(e):A3.ceil(e),St(e.getUTCFullYear()%1e4,t,4)}function Rhe(){return"+0000"}function sW(){return"%"}function cW(e){return+e}function lW(e){return Math.floor(+e/1e3)}var ou,au,yv,su,xv;wL({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wL(e){return ou=iu(e),au=ou.format,yv=ou.parse,su=ou.utcFormat,xv=ou.utcParse,ou}function Hd(e){let t={};return n=>t[n]||(t[n]=e(n))}function Ohe(e,t){return n=>{let r=e(n),i=r.indexOf(t);if(i<0)return r;let o=Phe(r,i),a=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+a}}function Phe(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function mW(e){let t=Hd(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){let i=io(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Ohe(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,a){a=io(a??",f");let s=Xi(r,i,o),c=Math.max(Math.abs(r),Math.abs(i)),l;if(a.precision==null)switch(a.type){case"s":return isNaN(l=md(s,c))||(a.precision=l),n(a,c);case"":case"e":case"g":case"p":case"r":{isNaN(l=gd(s,c))||(a.precision=l-(a.type==="e"));break}case"f":case"%":{isNaN(l=hd(s))||(a.precision=l-(a.type==="%")*2);break}}return t(a)}}}var SL;gW();function gW(){return SL=mW({format:S3,formatPrefix:eu})}function vW(e){return mW(pd(e))}function Ld(e){return arguments.length?SL=vW(e):SL}function hW(e,t,n){n=n||{},ne(n)||$(`Invalid time multi-format specifier: ${n}`);let r=t(oo),i=t(A1),o=t(L1),a=t(Ji),s=t(tr),c=t(Zr),l=t(Zi),u=t(zr),f=e(n[jo]||".%L"),d=e(n[oo]||":%S"),p=e(n[A1]||"%I:%M"),h=e(n[L1]||"%I %p"),m=e(n[Ji]||n[Kr]||"%a %d"),g=e(n[tr]||"%b %d"),v=e(n[Zr]||"%B"),y=e(n[Zi]||"%B"),C=e(n[zr]||"%Y");return b=>(r(b)<b?f:i(b)<b?d:o(b)<b?p:a(b)<b?h:c(b)<b?s(b)<b?m:g:u(b)<b?l(b)<b?v:y:C)(b)}function yW(e){let t=Hd(e.format),n=Hd(e.utcFormat);return{timeFormat:r=>Q(r)?t(r):hW(t,oc,r),utcFormat:r=>Q(r)?n(r):hW(n,ac,r),timeParse:Hd(e.parse),utcParse:Hd(e.utcParse)}}var EL;xW();function xW(){return EL=yW({format:au,parse:yv,utcFormat:su,utcParse:xv})}function CW(e){return yW(iu(e))}function El(e){return arguments.length?EL=CW(e):EL}var DL=(e,t)=>_e({},e,t);function Cv(e,t){let n=e?vW(e):Ld(),r=t?CW(t):El();return DL(n,r)}function Ad(e,t){let n=arguments.length;return n&&n!==2&&$("defaultLocale expects either zero or two arguments."),n?DL(Ld(e),El(t)):DL(Ld(),El())}function bW(){return gW(),xW(),Ad()}var $he=/^(data:|([A-Za-z]+:)?\/\/)/,Bhe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Uhe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,MW="file://";function jhe(e,t){return n=>({options:n||{},sanitize:Ghe,load:qhe,fileAccess:!!t,file:Whe(t),http:Xhe(e)})}function qhe(e,t){return qt(this,null,function*(){let n=yield this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)})}function Ghe(e,t){return qt(this,null,function*(){t=_e({},this.options,t);let n=this.fileAccess,r={href:null},i,o,a,s=Bhe.test(e.replace(Uhe,""));(e==null||typeof e!="string"||!s)&&$("Sanitize failure, invalid URI: "+Z(e));let c=$he.test(e);return(a=t.baseURL)&&!c&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),o=(i=e.startsWith(MW))||t.mode==="file"||t.mode!=="http"&&!c&&n,i?e=e.slice(MW.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r})}function Whe(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):Yhe}function Yhe(){return qt(this,null,function*(){$("No file system access.")})}function Xhe(e){return e?function(t,n){return qt(this,null,function*(){let r=_e({},this.options.http,n),i=n&&n.response,o=yield e(t,r);return o.ok?ke(o[i])?o[i]():o.text():$(o.status+""+o.statusText)})}:Qhe}function Qhe(){return qt(this,null,function*(){$("No HTTP fetch method available.")})}var Khe=e=>e!=null&&e===e,Zhe=e=>e==="true"||e==="false"||e===!0||e===!1,Jhe=e=>!Number.isNaN(Date.parse(e)),SW=e=>!Number.isNaN(+e)&&!(e instanceof Date),eme=e=>SW(e)&&Number.isInteger(+e),zL={boolean:od,integer:qn,number:qn,date:ad,string:sd,unknown:An},bv=[Zhe,eme,SW,Jhe],tme=["boolean","integer","number","date"];function EW(e,t){if(!e||!e.length)return"unknown";let n=e.length,r=bv.length,i=bv.map((o,a)=>a+1);for(let o=0,a=0,s,c;o<n;++o)for(c=t?e[o][t]:e[o],s=0;s<r;++s)if(i[s]&&Khe(c)&&!bv[s](c)&&(i[s]=0,++a,a===bv.length))return"string";return tme[i.reduce((o,a)=>o===0?a:o,0)-1]}function DW(e,t){return t.reduce((n,r)=>(n[r]=EW(e,r),n),{})}function wW(e){let t=function(n,r){let i={delimiter:e};return HL(n,r?_e(r,i):i)};return t.responseType="text",t}function HL(e,t){return t.header&&(e=t.header.map(Z).join(t.delimiter)+`
`+e),TH(t.delimiter).parse(e+"")}HL.responseType="text";function nme(e){return typeof Buffer=="function"&&ke(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function LL(e,t){let n=t&&t.property?Dr(t.property):An;return ne(e)&&!nme(e)?rme(n(e),t):n(JSON.parse(e))}LL.responseType="json";function rme(e,t){return!F(e)&&EH(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}var ime={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function zW(e,t){let n,r,i,o;return e=LL(e,t),t&&t.feature?(n=FH,i=t.feature):t&&t.mesh?(n=OH,i=t.mesh,o=ime[t.filter]):$("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):$("Invalid TopoJSON object: "+i),r&&r.features||[r]}zW.responseType="json";var Mv={dsv:HL,csv:wW(","),tsv:wW("	"),json:LL,topojson:zW};function AL(e,t){return arguments.length>1?(Mv[e]=t,this):de(Mv,e)?Mv[e]:null}function VL(e){let t=AL(e);return t&&t.responseType||"text"}function NL(e,t,n,r){t=t||{};let i=AL(t.type||"json");return i||$("Unknown data format type: "+t.type),e=i(e,t),t.parse&&ome(e,t.parse,n,r),de(e,"columns")&&delete e.columns,e}function ome(e,t,n,r){if(!e.length)return;let i=El();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),a,s,c,l,u,f;t==="auto"&&(t=DW(e,o)),o=Object.keys(t);let d=o.map(p=>{let h=t[p],m,g;if(h&&(h.startsWith("date:")||h.startsWith("utc:")))return m=h.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!zL[h])throw Error("Illegal format pattern: "+p+":"+h);return zL[h]});for(c=0,u=e.length,f=o.length;c<u;++c)for(a=e[c],l=0;l<f;++l)s=o[l],a[s]=d[l](a[s])}var cu=jhe(typeof fetch<"u"&&fetch,null);function Dv(e){let t=e||An,n=[],r={};return n.add=i=>{let o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{let o=t(i);if(r[o]){r[o]=0;let a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}function _d(e,t){return qt(this,null,function*(){try{yield t(e)}catch(n){e.error(n)}})}var kW=Symbol("vega_id"),ame=1;function Dl(e){return!!(e&&Ee(e))}function Ee(e){return e[kW]}function TW(e,t){return e[kW]=t,e}function at(e){let t=e===Object(e)?e:{data:e};return Ee(t)?t:TW(t,ame++)}function zv(e){return zl(e,at({}))}function zl(e,t){for(let n in e)t[n]=e[n];return t}function Hv(e,t){return TW(t,Ee(e))}function Ba(e,t){return e?t?(n,r)=>e(n,r)||Ee(t(n))-Ee(t(r)):(n,r)=>e(n,r)||Ee(n)-Ee(r):null}function kL(e){return e&&e.constructor===uc}function uc(){let e=[],t=[],n=[],r=[],i=[],o=null,a=!1;return{constructor:uc,insert(s){let c=te(s),l=c.length;for(let u=0;u<l;++u)e.push(c[u]);return this},remove(s){let c=ke(s)?r:t,l=te(s),u=l.length;for(let f=0;f<u;++f)c.push(l[f]);return this},modify(s,c,l){let u={field:c,value:hn(l)};return ke(s)?(u.filter=s,i.push(u)):(u.tuple=s,n.push(u)),this},encode(s,c){return ke(s)?i.push({filter:s,field:c}):n.push({tuple:s,field:c}),this},clean(s){return o=s,this},reflow(){return a=!0,this},pulse(s,c){let l={},u={},f,d,p,h,m,g;for(f=0,d=c.length;f<d;++f)l[Ee(c[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Ee(m)]=-1;for(f=0,d=r.length;f<d;++f)h=r[f],c.forEach(y=>{h(y)&&(l[Ee(y)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Ee(m),l[g]?l[g]=1:s.add.push(at(e[f]));for(f=0,d=c.length;f<d;++f)m=c[f],l[Ee(m)]<0&&s.rem.push(m);function v(y,C,b){b?y[C]=b(y):s.encode=C,a||(u[Ee(y)]=y)}for(f=0,d=n.length;f<d;++f)p=n[f],m=p.tuple,h=p.field,g=l[Ee(m)],g>0&&(v(m,h,p.value),s.modifies(h));for(f=0,d=i.length;f<d;++f)p=i[f],h=p.filter,c.forEach(y=>{h(y)&&l[Ee(y)]>0&&v(y,p.field,p.value)}),s.modifies(p.field);if(a)s.mod=t.length||r.length?c.filter(y=>l[Ee(y)]>0):c.slice();else for(g in u)s.mod.push(u[g]);return(o||o==null&&(t.length||r.length))&&s.clean(!0),s}}}var Sv="_:mod:_";function kd(){Object.defineProperty(this,Sv,{writable:!0,value:{}})}kd.prototype={set(e,t,n,r){let i=this,o=i[e],a=i[Sv];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=F(n)?1+n.length:-1),i},modified(e,t){let n=this[Sv];if(arguments.length){if(F(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(let r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[Sv]={},this}};var sme=0,cme="pulse",lme=new kd,ume=1,fme=2;function Ft(e,t,n,r){this.id=++sme,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function HW(e){return function(t){let n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Ft.prototype={targets(){return this._targets||(this._targets=Dv(Y6))},set(e){return this.value!==e?(this.value=e,1):0},skip:HW(ume),modified:HW(fme),parameters(e,t,n){t=t!==!1;let r=this._argval=this._argval||new kd,i=this._argops=this._argops||[],o=[],a,s,c,l,u=(f,d,p)=>{p instanceof Ft?(p!==this&&(t&&p.targets().add(this),o.push(p)),i.push({op:p,name:f,index:d})):r.set(f,d,p)};for(a in e)if(s=e[a],a===cme)te(s).forEach(f=>{f instanceof Ft?f!==this&&(f.targets().add(this),o.push(f)):$("Pulse parameters must be operator instances.")}),this.source=s;else if(F(s))for(r.set(a,-1,Array(c=s.length)),l=0;l<c;++l)u(a,l,s[l]);else u(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){let t=this._argval||lme,n=this._argops,r,i,o,a;if(n){let s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){let e=this._argops,t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){let t=this._update;if(t){let n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function dme(e,t,n,r){let i=1,o;return e instanceof Ft?o=e:e&&e.prototype instanceof Ft?o=new e:ke(e)?o=new Ft(null,e):(i=0,o=new Ft(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function pme(e,t){let n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}var hme=0;function uu(e,t,n){this.id=++hme,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function V3(e,t,n){return new uu(e,t,n)}uu.prototype={_filter:pr,_apply:An,targets(){return this._targets||(this._targets=Dv(Y6))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){let t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){let t=V3(e);return this.targets().add(t),t},apply(e){let t=V3(null,e);return this.targets().add(t),t},merge(){let e=V3();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{let n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){let t=V3();return this.targets().add(V3(null,null,rd(e,n=>{let r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(V3(null,null,()=>n=!0)),t.targets().add(V3(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=pr,this._targets=null}};function mme(e,t,n,r){let i=this,o=V3(n,r),a=function(l){l.dataflow=i;try{o.receive(l)}catch(u){i.error(u)}finally{i.run()}},s;typeof e=="string"&&typeof document<"u"?s=document.querySelectorAll(e):s=te(e);let c=s.length;for(let l=0;l<c;++l)s[l].addEventListener(t,a);return o}function gme(e,t){let n=this.locale();return NL(e,t,n.timeParse,n.utcParse)}function vme(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}function yme(e,t){return qt(this,null,function*(){let n=this,r=0,i;try{i=yield n.loader().load(e,{context:"dataflow",response:VL(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}})}function xme(e,t,n){return qt(this,null,function*(){let r=this,i=r._pending||Cme(r);i.requests+=1;let o=yield r.request(t,n);return r.pulse(e,r.changeset().remove(pr).insert(o.data||[])),i.done(),o})}function Cme(e){let t,n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}var bme={skip:!0};function Mme(e,t,n,r,i){return(e instanceof Ft?Sme:wme)(this,e,t,n,r,i),this}function wme(e,t,n,r,i,o){let a=_e({},o,bme),s,c;ke(n)||(n=hn(n)),r===void 0?s=l=>e.touch(n(l)):ke(r)?(c=new Ft(null,r,i,!1),s=l=>{c.evaluate(l);let u=n(l),f=c.value;kL(f)?e.pulse(u,f,o):e.update(u,f,a)}):s=l=>e.update(n(l),r,a),t.apply(s)}function Sme(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{let a=o||{},s=new Ft(null,Eme(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}function Eme(e,t){return t=ke(t)?t:hn(t),e?function(n,r){let i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function Dme(e){e.rank=++this._rank}function zme(e){let t=[e],n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&$("Cycle detected in dataflow graph.")}var Ev={},$a=1,N3=2,sc=4,Hme=$a|N3,LW=$a|sc,lu=$a|N3|sc,AW=8,Vd=16,VW=32,NW=64;function cc(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function _L(e,t){let n=[];return tc(e,t,r=>n.push(r)),n}function _W(e,t){let n={};return e.visit(t,r=>{n[Ee(r)]=1}),r=>n[Ee(r)]?null:r}function wv(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}cc.prototype={StopPropagation:Ev,ADD:$a,REM:N3,MOD:sc,ADD_REM:Hme,ADD_MOD:LW,ALL:lu,REFLOW:AW,SOURCE:Vd,NO_SOURCE:VW,NO_FIELDS:NW,fork(e){return new cc(this.dataflow).init(this,e)},clone(){let e=this.fork(lu);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(lu|Vd)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new cc(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){let n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&NW)&&(n.fields=e.fields),t&$a?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&N3?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&sc?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&VW?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){let t=e||lu;return t&$a&&this.add.length||t&N3&&this.rem.length||t&sc&&this.mod.length},reflow(e){if(e)return this.fork(lu).reflow();let t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(sc,_W(this,$a))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){let t=this.fields||(this.fields={});return F(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){let n=this.fields;return(t||this.mod.length)&&n?arguments.length?F(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){let n=this;return e&$a&&(n.addF=wv(n.addF,t)),e&N3&&(n.remF=wv(n.remF,t)),e&sc&&(n.modF=wv(n.modF,t)),e&Vd&&(n.srcF=wv(n.srcF,t)),n},materialize(e){e=e||lu;let t=this;return e&$a&&t.addF&&(t.add=_L(t.add,t.addF),t.addF=null),e&N3&&t.remF&&(t.rem=_L(t.rem,t.remF),t.remF=null),e&sc&&t.modF&&(t.mod=_L(t.mod,t.modF),t.modF=null),e&Vd&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){let n=this,r=t;if(e&Vd)return tc(n.source,n.srcF,r),n;e&$a&&tc(n.add,n.addF,r),e&N3&&tc(n.rem,n.remF,r),e&sc&&tc(n.mod,n.modF,r);let i=n.source;if(e&AW&&i){let o=n.add.length+n.mod.length;o===i.length||(o?tc(i,_W(n,LW),r):tc(i,n.srcF,r))}return n}};function Lv(e,t,n,r){let i=this,o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(let a of n)if(a.stamp===t){if(a.fields){let s=i.fields||(i.fields={});for(let c in a.fields)s[c]=1}a.changed(i.ADD)&&(o|=i.ADD),a.changed(i.REM)&&(o|=i.REM),a.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}ee(Lv,cc,{fork(e){let t=new cc(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){let t=this,n=t.fields;return n&&t.changes&t.MOD?F(e)?e.some(r=>n[r]):n[e]:0},filter(){$("MultiPulse does not support filtering.")},materialize(){$("MultiPulse does not support materialization.")},visit(e,t){let n=this,r=n.pulses,i=r.length,o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});function Lme(e,t,n){return qt(this,null,function*(){let r=this,i=[];if(r._pulse)return IW(r);if(r._pending&&(yield r._pending),t&&(yield _d(r,t)),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;let o=++r._clock;r._pulse=new cc(r,o,e),r._touched.forEach(u=>r._enqueue(u,!0)),r._touched=Dv(Y6);let a=0,s,c,l;try{for(;r._heap.size()>0;){if(s=r._heap.pop(),s.rank!==s.qrank){r._enqueue(s,!0);continue}c=s.run(r._getPulse(s,e)),c.then?c=yield c:c.async&&(i.push(c.async),c=Ev),c!==Ev&&s._targets&&s._targets.forEach(u=>r._enqueue(u)),++a}}catch(u){r._heap.clear(),l=u}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${a} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){let u=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<u.length;++f)yield _d(r,u[f].callback)}return n&&(yield _d(r,n)),i.length&&Promise.all(i).then(u=>r.runAsync(null,()=>{u.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r})}function Ame(e,t,n){return qt(this,null,function*(){for(;this._running;)yield this._running;let r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running})}function Vme(e,t,n){return this._pulse?IW(this):(this.evaluate(e,t,n),this)}function Nme(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function IW(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function _me(e,t){let n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function kme(e,t){let n=e.source,r=this._clock;return n&&F(n)?new Lv(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Tme(this._pulse,n&&n.pulse)}function Tme(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Ev&&(e.source=t.source),e)}var TL={skip:!1,force:!1};function Ime(e,t){let n=t||TL;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Fme(e,t,n){let r=n||TL;return(e.set(t)||r.force)&&this.touch(e,r),this}function Rme(e,t,n){this.touch(e,n||TL);let r=new cc(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Ome(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),FW(t,0,t.length-1,e)),pop:()=>{let n=t.pop(),r;return t.length?(r=t[0],t[0]=n,Pme(t,0,e)):r=n,r}}}function FW(e,t,n,r){let i,o,a=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(a,i)<0){e[n]=i,n=o;continue}break}return e[n]=a}function Pme(e,t,n){let r=t,i=e.length,o=e[t],a=(t<<1)+1,s;for(;a<i;)s=a+1,s<i&&n(e[a],e[s])>=0&&(a=s),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=o,FW(e,r,t,n)}function _3(){this.logger(K5()),this.logLevel(Q5),this._clock=0,this._rank=0,this._locale=Ad();try{this._loader=cu()}catch{}this._touched=Dv(Y6),this._input={},this._pulse=null,this._heap=Ome((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Nd(e){return function(){return this._log[e].apply(this,arguments)}}_3.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Nd("error"),warn:Nd("warn"),info:Nd("info"),debug:Nd("debug"),logLevel:Nd("level"),cleanThreshold:1e4,add:dme,connect:pme,rank:Dme,rerank:zme,pulse:Rme,touch:Ime,update:Fme,changeset:uc,ingest:vme,parse:gme,preload:xme,request:yme,events:mme,on:Mme,evaluate:Lme,run:Vme,runAsync:Ame,runAfter:Nme,_enqueue:_me,_getPulse:kme};function P(e,t){Ft.call(this,e,null,t)}ee(P,Ft,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){let t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});var lc={};function Av(e){let t=IL(e);return t&&t.Definition||null}function IL(e){return e=e&&e.toLowerCase(),de(lc,e)?lc[e]:null}var MA={};br(MA,{aggregate:()=>k3,bin:()=>ZL,collect:()=>JL,compare:()=>XW,countpattern:()=>eA,cross:()=>tA,density:()=>nA,dotbin:()=>iA,expression:()=>eY,extent:()=>oA,facet:()=>Qv,field:()=>tY,filter:()=>sA,flatten:()=>cA,fold:()=>lA,formula:()=>uA,generate:()=>nY,impute:()=>fA,joinaggregate:()=>dA,kde:()=>pA,key:()=>rY,load:()=>iY,lookup:()=>hA,multiextent:()=>oY,multivalues:()=>aY,params:()=>sY,pivot:()=>mA,prefacet:()=>cY,project:()=>gA,proxy:()=>lY,quantile:()=>vA,relay:()=>uY,sample:()=>yA,sequence:()=>xA,sieve:()=>fY,subflow:()=>aA,timeunit:()=>CA,tupleindex:()=>pY,values:()=>hY,window:()=>bA});function*PW(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Vv(e,t,n){let r=Float64Array.from(PW(e,n));return r.sort(xi),t.map(i=>dd(r,i))}function Nv(e,t){return Vv(e,[.25,.5,.75],t)}function _v(e,t){let n=e.length,r=ov(e,t),i=Nv(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function FL(e){let t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2],o=e.extent[0],a=e.extent[1],s,c,l,u,f,d,p=e.span||a-o||Math.abs(o)||1;if(e.step)s=e.step;else if(e.steps){for(u=p/t,f=0,d=e.steps.length;f<d&&e.steps[f]<u;++f);s=e.steps[Math.max(0,f-1)]}else{for(c=Math.ceil(Math.log(t)/r),l=e.minstep||0,s=Math.max(l,Math.pow(n,Math.round(Math.log(p)/r)-c));Math.ceil(p/s)>t;)s*=n;for(f=0,d=i.length;f<d;++f)u=s/i[f],u>=l&&p/u<=t&&(s=u)}u=Math.log(s);let h=u>=0?0:~~(-u/r)+1,m=Math.pow(n,-h-1);return(e.nice||e.nice===void 0)&&(u=Math.floor(o/s+m)*s,o=o<u?u-s:u,a=Math.ceil(a/s)*s),{start:o,stop:a===o?o+s:a,step:s}}var e1=Math.random;function $me(e){e1=e}function RL(e,t,n,r){if(!e.length)return[void 0,void 0];let i=Float64Array.from(PW(e,r)),o=i.length,a=t,s,c,l,u;for(l=0,u=Array(a);l<a;++l){for(s=0,c=0;c<o;++c)s+=i[~~(e1()*o)];u[l]=s/o}return u.sort(xi),[yl(u,n/2),yl(u,1-n/2)]}function OL(e,t,n,r){r=r||(d=>d);let i=e.length,o=new Float64Array(i),a=0,s=1,c=r(e[0]),l=c,u=c+t,f;for(;s<i;++s){if(f=r(e[s]),f>=u){for(l=(c+l)/2;a<s;++a)o[a]=l;u=f+t,c=f}l=f}for(l=(c+l)/2;a<s;++a)o[a]=l;return n?Bme(o,t+t/4):o}function Bme(e,t){let n=e.length,r=0,i=1,o,a;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(a=i+(r+o-i-i>>1);a<i;)e[a++]=e[i];for(;a>i;)e[a--]=e[r]}r=i,i=o}return e}function Ume(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function jme(e,t){t==null&&(t=e,e=0);let n,r,i,o={min(a){return arguments.length?(n=a||0,i=r-n,o):n},max(a){return arguments.length?(r=a||0,i=r-n,o):r},sample(){return n+Math.floor(i*e1())},pdf(a){return a===Math.floor(a)&&a>=n&&a<r?1/i:0},cdf(a){let s=Math.floor(a);return s<n?0:s>=r?1:(s-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return o.min(e).max(t)}var $W=Math.sqrt(2*Math.PI),qme=Math.SQRT2,Td=NaN;function Id(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(Td===Td)n=Td,Td=NaN;else{do n=e1()*2-1,r=e1()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,Td=r*o}return e+n*t}function kv(e,t,n){n=n??1;let r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*$W)}function Fd(e,t,n){t=t||0,n=n??1;let r=(e-t)/n,i=Math.abs(r),o;if(i>37)o=0;else{let a=Math.exp(-i*i/2),s;i<7.07106781186547?(s=.0352624965998911*i+.700383064443688,s=s*i+6.37396220353165,s=s*i+33.912866078383,s=s*i+112.079291497871,s=s*i+221.213596169931,s=s*i+220.206867912376,o=a*s,s=.0883883476483184*i+1.75566716318264,s=s*i+16.064177579207,s=s*i+86.7807322029461,s=s*i+296.564248779674,s=s*i+637.333633378831,s=s*i+793.826512519948,s=s*i+440.413735824752,o=o/s):(s=i+.65,s=i+4/s,s=i+3/s,s=i+2/s,s=i+1/s,o=a/s/2.506628274631)}return r>0?1-o:o}function Rd(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*qme*Gme(2*e-1)}function Gme(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Tv(e,t){let n,r,i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>Id(n,r),pdf:o=>kv(o,n,r),cdf:o=>Fd(o,n,r),icdf:o=>Rd(o,n,r)};return i.mean(e).stdev(t)}function Iv(e,t){let n=Tv(),r=0,i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=_v(e)),i):t},sample(){return e[~~(e1()*r)]+t*n.sample()},pdf(o){let a=0,s=0;for(;s<r;++s)a+=n.pdf((o-e[s])/t);return a/t/r},cdf(o){let a=0,s=0;for(;s<r;++s)a+=n.cdf((o-e[s])/t);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Fv(e,t){return e=e||0,t=t??1,Math.exp(e+Id()*t)}function Rv(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;let r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*$W*e)}function Ov(e,t,n){return Fd(Math.log(e),t,n)}function Pv(e,t,n){return Math.exp(Rd(e,t,n))}function PL(e,t){let n,r,i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>Fv(n,r),pdf:o=>Rv(o,n,r),cdf:o=>Ov(o,n,r),icdf:o=>Pv(o,n,r)};return i.mean(e).stdev(t)}function $L(e,t){let n=0,r;function i(a){let s=[],c=0,l;for(l=0;l<n;++l)c+=s[l]=a[l]==null?1:+a[l];for(l=0;l<n;++l)s[l]/=c;return s}let o={weights(a){return arguments.length?(r=i(t=a||[]),o):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),o.weights(t)):e},sample(){let a=e1(),s=e[n-1],c=r[0],l=0;for(;l<n-1;c+=r[++l])if(a<c){s=e[l];break}return s.sample()},pdf(a){let s=0,c=0;for(;c<n;++c)s+=r[c]*e[c].pdf(a);return s},cdf(a){let s=0,c=0;for(;c<n;++c)s+=r[c]*e[c].cdf(a);return s},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function $v(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*e1()}function Bv(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Uv(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function jv(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function BL(e,t){let n,r,i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>$v(n,r),pdf:o=>Bv(o,n,r),cdf:o=>Uv(o,n,r),icdf:o=>jv(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function qv(e,t,n){let r=0,i=0;for(let o of e){let a=n(o);t(o)==null||a==null||isNaN(a)||(r+=(a-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Od(e,t,n,r){let i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function Gv(e,t,n,r){e=e.filter(p=>{let h=t(p),m=n(p);return h!=null&&(h=+h)>=h&&m!=null&&(m=+m)>=m}),r&&e.sort((p,h)=>t(p)-t(h));let i=e.length,o=new Float64Array(i),a=new Float64Array(i),s=0,c=0,l=0,u,f,d;for(d of e)o[s]=u=+t(d),a[s]=f=+n(d),++s,c+=(u-c)/s,l+=(f-l)/s;for(s=0;s<i;++s)o[s]-=c,a[s]-=l;return[o,a,c,l]}function Pd(e,t,n,r){let i=-1,o,a;for(let s of e)o=t(s),a=n(s),o!=null&&(o=+o)>=o&&a!=null&&(a=+a)>=a&&r(o,a,++i)}function fu(e,t,n,r,i){let o=0,a=0;return Pd(e,t,n,(s,c)=>{let l=c-i(s),u=c-r;o+=l*l,a+=u*u}),1-o/a}function Wv(e,t,n){let r=0,i=0,o=0,a=0,s=0;Pd(e,t,n,(u,f)=>{++s,r+=(u-r)/s,i+=(f-i)/s,o+=(u*f-o)/s,a+=(u*u-a)/s});let c=Od(r,i,o,a),l=u=>c[0]+c[1]*u;return{coef:c,predict:l,rSquared:fu(e,t,n,i,l)}}function UL(e,t,n){let r=0,i=0,o=0,a=0,s=0;Pd(e,t,n,(u,f)=>{++s,u=Math.log(u),r+=(u-r)/s,i+=(f-i)/s,o+=(u*f-o)/s,a+=(u*u-a)/s});let c=Od(r,i,o,a),l=u=>c[0]+c[1]*Math.log(u);return{coef:c,predict:l,rSquared:fu(e,t,n,i,l)}}function jL(e,t,n){let[r,i,o,a]=Gv(e,t,n),s=0,c=0,l=0,u=0,f=0,d,p,h;Pd(e,t,n,(y,C)=>{d=r[f++],p=Math.log(C),h=d*C,s+=(C*p-s)/f,c+=(h-c)/f,l+=(h*p-l)/f,u+=(d*h-u)/f});let[m,g]=Od(c/a,s/a,l/a,u/a),v=y=>Math.exp(m+g*(y-o));return{coef:[Math.exp(m-g*o),g],predict:v,rSquared:fu(e,t,n,a,v)}}function qL(e,t,n){let r=0,i=0,o=0,a=0,s=0,c=0;Pd(e,t,n,(f,d)=>{let p=Math.log(f),h=Math.log(d);++c,r+=(p-r)/c,i+=(h-i)/c,o+=(p*h-o)/c,a+=(p*p-a)/c,s+=(d-s)/c});let l=Od(r,i,o,a),u=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:u,rSquared:fu(e,t,n,s,u)}}function Yv(e,t,n){let[r,i,o,a]=Gv(e,t,n),s=r.length,c=0,l=0,u=0,f=0,d=0,p,h,m,g;for(p=0;p<s;)h=r[p],m=i[p++],g=h*h,c+=(g-c)/p,l+=(g*h-l)/p,u+=(g*g-u)/p,f+=(h*m-f)/p,d+=(g*m-d)/p;let v=u-c*c,y=c*v-l*l,C=(d*c-f*l)/y,b=(f*v-d*l)/y,M=-C*c,S=w=>(w=w-o,C*w*w+b*w+M+a);return{coef:[M-b*o+C*o*o+a,b-2*C*o,C],predict:S,rSquared:fu(e,t,n,a,S)}}function GL(e,t,n,r){if(r===0)return qv(e,t,n);if(r===1)return Wv(e,t,n);if(r===2)return Yv(e,t,n);let[i,o,a,s]=Gv(e,t,n),c=i.length,l=[],u=[],f=r+1,d,p,h,m,g;for(d=0;d<f;++d){for(h=0,m=0;h<c;++h)m+=Math.pow(i[h],d)*o[h];for(l.push(m),g=new Float64Array(f),p=0;p<f;++p){for(h=0,m=0;h<c;++h)m+=Math.pow(i[h],d+p);g[p]=m}u.push(g)}u.push(l);let v=Yme(u),y=C=>{C-=a;let b=s+v[0]+v[1]*C+v[2]*C*C;for(d=3;d<f;++d)b+=v[d]*Math.pow(C,d);return b};return{coef:Wme(f,v,-a,s),predict:y,rSquared:fu(e,t,n,s,y)}}function Wme(e,t,n,r){let i=Array(e),o,a,s,c;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],c=1,i[o]+=s,a=1;a<=o;++a)c*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*c;return i[0]+=r,i}function Yme(e){let t=e.length-1,n=[],r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}var RW=2,OW=1e-12;function WL(e,t,n,r){let[i,o,a,s]=Gv(e,t,n,!0),c=i.length,l=Math.max(2,~~(r*c)),u=new Float64Array(c),f=new Float64Array(c),d=new Float64Array(c).fill(1);for(let p=-1;++p<=RW;){let h=[0,l-1];for(let g=0;g<c;++g){let v=i[g],y=h[0],C=h[1],b=v-i[y]>i[C]-v?y:C,M=0,S=0,w=0,E=0,D=0,H=1/Math.abs(i[b]-v||1);for(let V=y;V<=C;++V){let _=i[V],N=o[V],I=Xme(Math.abs(v-_)*H)*d[V],G=_*I;M+=I,S+=G,w+=N*I,E+=N*G,D+=_*G}let[A,j]=Od(S/M,w/M,E/M,D/M);u[g]=A+j*v,f[g]=Math.abs(o[g]-u[g]),Qme(i,g+1,h)}if(p===RW)break;let m=K6(f);if(Math.abs(m)<OW)break;for(let g=0,v,y;g<c;++g)v=f[g]/(6*m),d[g]=v>=1?OW:(y=1-v*v)*y}return Kme(i,u,a,s)}function Xme(e){return(e=1-e*e*e)*e*e}function Qme(e,t,n){let r=e[t],i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function Kme(e,t,n,r){let i=e.length,o=[],a=0,s=0,c=[],l;for(;a<i;++a)l=e[a]+n,c[0]===l?c[1]+=(t[a]-c[1])/++s:(s=0,c[1]+=r,c=[l,t[a]],o.push(c));return c[1]+=r,o}var Zme=.5*Math.PI/180;function du(e,t,n,r){n=n||25,r=Math.max(n,r||200);let i=m=>[m,e(m)],o=t[0],a=t[1],s=a-o,c=s/r,l=[i(o)],u=[];if(n===r){for(let m=1;m<r;++m)l.push(i(o+m/n*s));return l.push(i(a)),l}else{u.push(i(a));for(let m=n;--m>0;)u.push(i(o+m/n*s))}let f=l[0],d=u[u.length-1],p=1/s,h=Jme(f[1],u);for(;d;){let m=i((f[0]+d[0])/2);m[0]-f[0]>=c&&e9e(f,m,d,p,h)>Zme?u.push(m):(f=d,l.push(d),u.pop()),d=u[u.length-1]}return l}function Jme(e,t){let n=e,r=e,i=t.length;for(let o=0;o<i;++o){let a=t[o][1];a<n&&(n=a),a>r&&(r=a)}return 1/(r-n)}function e9e(e,t,n,r,i){let o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),a=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-a)}function t9e(e){return t=>{let n=e.length,r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function QL(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:t9e(e)}function jW(e,t,n){return n||e+(t?"_"+t:"")}var YL=()=>{},n9e={init:YL,add:YL,rem:YL,idx:0},$d={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Ud=Object.keys($d).filter(e=>e!=="__count__");function r9e(e,t){return(n,r)=>_e({name:e,aggregate_param:r,out:n||e},n9e,t)}[...Ud,"__count__"].forEach(e=>{$d[e]=r9e(e,$d[e])});function qW(e,t,n){return $d[e](n,t)}function GW(e,t){return e.idx-t.idx}function i9e(e){let t={};e.forEach(r=>t[r.name]=r);let n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=$d[i]())})};return e.forEach(n),Object.values(t).sort(GW)}function o9e(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function a9e(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function s9e(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function c9e(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function WW(e,t){let n=t||An,r=i9e(e),i=e.slice().sort(GW);function o(a){this._ops=r,this._out=i,this.cell=a,this.init()}return o.prototype.init=o9e,o.prototype.add=a9e,o.prototype.rem=s9e,o.prototype.set=c9e,o.prototype.get=n,o.fields=e.map(a=>a.out),o}function KL(e){this._key=e?Dr(e):Ee,this.reset()}var Jr=KL.prototype;Jr.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Jr.add=function(e){this._add.push(e)};Jr.rem=function(e){this._rem.push(e)};Jr.values=function(){if(this._get=null,this._rem.length===0)return this._add;let e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={},s,c,l;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,c=0;s<r;++s)a[n(l=e[s])]?a[n(l)]=0:o[c++]=l;return this._rem=[],this._add=o};Jr.distinct=function(e){let t=this.values(),n={},r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",de(n,o)||(n[o]=1,++i);return i};Jr.extent=function(e){if(this._get!==e||!this._ext){let t=this.values(),n=wH(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Jr.argmin=function(e){return this.extent(e)[0]||{}};Jr.argmax=function(e){return this.extent(e)[1]||{}};Jr.min=function(e){let t=this.extent(e)[0];return t!=null?e(t):void 0};Jr.max=function(e){let t=this.extent(e)[1];return t!=null?e(t):void 0};Jr.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Nv(this.values(),e),this._get=e),this._q};Jr.q1=function(e){return this.quartile(e)[0]};Jr.q2=function(e){return this.quartile(e)[1]};Jr.q3=function(e){return this.quartile(e)[2]};Jr.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=RL(this.values(),1e3,.05,e),this._get=e),this._ci};Jr.ci0=function(e){return this.ci(e)[0]};Jr.ci1=function(e){return this.ci(e)[1]};function k3(e){P.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}k3.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ud},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ee(k3,P,{transform(e,t){let n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){let e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(s){let c,l,u,f;for(c in s)for(u=s[c].tuple,l=0;l<i;++l)r[l][f=u[n[l]]]=f}o(e._prev),o(t);function a(s,c,l){let u=n[l],f=r[l++];for(let d in f){let p=s?s+"|"+d:d;c[u]=f[d],l<i?a(p,c,l):t[p]||e.cell(p,c)}}a("",{},0)},init(e){let t=this._inputs=[],n=this._outputs=[],r={};function i(y){let C=te(dr(y)),b=C.length,M=0,S;for(;M<b;++M)r[S=C[M]]||(r[S]=1,t.push(S))}this._dims=te(e.groupby),this._dnames=this._dims.map(y=>{let C=cn(y);return i(y),n.push(C),C}),this.cellkey=e.key?e.key:QL(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];let o=e.fields||[null],a=e.ops||["count"],s=e.aggregate_params||[null],c=e.as||[],l=o.length,u={},f,d,p,h,m,g,v;for(l!==a.length&&$("Unmatched number of fields and aggregate ops."),v=0;v<l;++v){if(f=o[v],d=a[v],p=s[v]||null,f==null&&d!=="count"&&$("Null aggregate field specified."),m=cn(f),g=jW(d,m,c[v]),n.push(g),d==="count"){this._counts.push(g);continue}h=u[m],h||(i(f),h=u[m]=[],h.field=f,this._measures.push(h)),d!=="count"&&(this._countOnly=!1),h.push(qW(d,p,g))}return this._measures=this._measures.map(y=>WW(y,y.field)),Object.create(null)},cellkey:QL(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){let n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){let r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new KL),n},newtuple(e,t){let n=this._dnames,r=this._dims,i=r.length,o={};for(let a=0;a<i;++a)o[n[a]]=r[a](e);return t?Hv(t.tuple,o):at(o)},clean(){let e=this.value;for(let t in e)e[t].num===0&&delete e[t]},add(e){let t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);let r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){let t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);let r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){let t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){let r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){let t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod,c,l,u,f;if(r)for(l in r)c=r[l],(!i||c.num)&&a.push(c.tuple);for(u=0,f=this._alen;u<f;++u)o.push(this.celltuple(t[u])),t[u]=null;for(u=0,f=this._mlen;u<f;++u)c=n[u],(c.num===0&&i?a:s).push(this.celltuple(c)),n[u]=null;return this._alen=this._mlen=0,this._prev=null,e}});var l9e=1e-14;function ZL(e){P.call(this,null,e)}ZL.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ee(ZL,P,{transform(e,t){let n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,a=e.as||["bin0","bin1"],s=a[0],c=a[1],l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(dr(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?u=>{let f=r(u);u[s]=f,u[c]=f==null?null:i+o*(1+(f-i)/o)}:u=>u[s]=r(u)),t.modifies(n?a:s)},_bins(e){if(this.value&&!e.modified())return this.value;let t=e.field,n=FL(e),r=n.step,i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,a,s;(a=e.anchor)!=null&&(s=a-(i+r*Math.floor((a-i)/r)),i+=s,o+=s);let c=function(l){let u=qn(t(l));return u==null?null:u<i?-1/0:u>o?1/0:(u=Math.max(i,Math.min(u,o-r)),i+r*Math.floor(l9e+(u-i)/r))};return c.start=i,c.stop=n.stop,c.step=r,this.value=yi(c,dr(t),e.name||"bin_"+cn(t))}});function YW(e,t,n){let r=e,i=t||[],o=n||[],a={},s=0;return{add:c=>o.push(c),remove:c=>a[r(c)]=++s,size:()=>i.length,data:(c,l)=>(s&&(i=i.filter(u=>!a[r(u)]),a={},s=0),l&&c&&i.sort(c),o.length&&(i=c?LH(c,i,o.sort(c)):i.concat(o),o=[]),i)}}function JL(e){P.call(this,[],e)}JL.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ee(JL,P,{transform(e,t){let n=t.fork(t.ALL),r=YW(Ee,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(Ba(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function XW(e){Ft.call(this,null,u9e,e)}ee(XW,Ft);function u9e(e){return this.value&&!e.modified()?this.value:td(e.fields,e.orders)}function eA(e){P.call(this,null,e)}eA.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function f9e(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ee(eA,P,{transform(e,t){let n=f=>d=>{for(var p=f9e(s(d),e.case,o)||[],h,m=0,g=p.length;m<g;++m)a.test(h=p[m])||f(h)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,c=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),u=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,u)),this._finish(t,c)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){let n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS),s,c,l;for(s in n)c=r[s],l=n[s]||0,!c&&l?(r[s]=c=at({}),c[i]=s,c[o]=l,a.add.push(c)):l===0?(c&&a.rem.push(c),n[s]=null,r[s]=null):c[o]!==l&&(c[o]=l,a.mod.push(c));return a.modifies(t)}});function tA(e){P.call(this,null,e)}tA.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ee(tA,P,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter"),s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=d9e(s,i,o,e.filter||pr)):n.mod=s,n.source=this.value,n.modifies(r)}});function d9e(e,t,n,r){for(var i=[],o={},a=e.length,s=0,c,l;s<a;++s)for(o[t]=l=e[s],c=0;c<a;++c)o[n]=e[c],r(o)&&(i.push(at(o)),o={},o[t]=l);return i}var BW={kde:Iv,mixture:$L,normal:Tv,lognormal:PL,uniform:BL},p9e="distributions",UW="function",h9e="field";function QW(e,t){let n=e[UW];de(BW,n)||$("Unknown distribution function: "+n);let r=BW[n]();for(let i in e)i===h9e?r.data((e.from||t()).map(e[i])):i===p9e?r[i](e[i].map(o=>QW(o,t))):typeof r[i]===UW&&r[i](e[i]);return r}function nA(e){P.call(this,null,e)}var KW=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],m9e={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:KW},{name:"weights",type:"number",array:!0}]};nA.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:KW.concat(m9e)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ee(nA,P,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=QW(e.distribution,g9e(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200,a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&$("Invalid density method: "+a),!e.extent&&!r.data&&$("Missing density extent parameter."),a=r[a];let s=e.as||["value","density"],c=e.extent||Yi(r.data()),l=du(a,c,i,o).map(u=>{let f={};return f[s[0]]=u[0],f[s[1]]=u[1],at(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function g9e(e){return()=>e.materialize(e.SOURCE).source}function ZW(e,t){return e?e.map((n,r)=>t[r]||cn(n)):null}function rA(e,t,n){let r=[],i=f=>f(c),o,a,s,c,l,u;if(t==null)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)c=e[a],l=t.map(i),u=o[l],u||(o[l]=u=[],u.dims=l,r.push(u)),u.push(n(c));return r}var JW="bin";function iA(e){P.call(this,null,e)}iA.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:JW}]};var v9e=(e,t)=>ec(Yi(e,t))/30;ee(iA,P,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;let n=t.materialize(t.SOURCE).source,r=rA(t.source,e.groupby,An),i=e.smooth||!1,o=e.field,a=e.step||v9e(n,o),s=Ba((h,m)=>o(h)-o(m)),c=e.as||JW,l=r.length,u=1/0,f=-1/0,d=0,p;for(;d<l;++d){let h=r[d].sort(s);p=-1;for(let m of OL(h,a,i,o))m<u&&(u=m),m>f&&(f=m),h[++p][c]=m}return this.value={start:u,stop:f,step:a},t.reflow(!0).modifies(c)}});function eY(e){Ft.call(this,null,y9e,e),this.modified(!0)}ee(eY,Ft);function y9e(e){let t=e.expr;return this.value&&!e.modified("expr")?this.value:yi(n=>t(n,e),dr(t),cn(t))}function oA(e){P.call(this,[void 0,void 0],e)}oA.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ee(oA,P,{transform(e,t){let n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field"),o=n[0],a=n[1];if((i||o==null)&&(o=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,s=>{let c=qn(r(s));c!=null&&(c<o&&(o=c),c>a&&(a=c))}),!Number.isFinite(o)||!Number.isFinite(a)){let s=cn(r);s&&(s=` for field "${s}"`),t.dataflow.warn(`Infinite extent${s}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}});function aA(e,t){Ft.call(this,e),this.parent=t,this.count=0}ee(aA,Ft,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Qv(e){P.call(this,{},e),this._keys=M3();let t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ee(Qv,P,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){let i=this.value,o=de(i,e)&&i[e],a,s;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(s=r||(s=this._group[e])&&s.tuple,a=n.dataflow,o=new aA(n.fork(n.NO_SOURCE),this),a.add(o).connect(t(a,e,s)),i[e]=o,this.activate(o)),o},clean(){let e=this.value,t=0;for(let n in e)if(e[n].count===0){let r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){let n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){let t=this._targets,n=t.length,r=e?e.length:0,i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){let n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,a=e.modified("key"),s=c=>this.subflow(c,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,c=>{let l=Ee(c),u=o.get(l);u!==void 0&&(o.delete(l),s(u).rem(c))}),t.visit(t.ADD,c=>{let l=r(c);o.set(Ee(c),l),s(l).add(c)}),a||t.modified(r.fields)?t.visit(t.MOD,c=>{let l=Ee(c),u=o.get(l),f=r(c);u===f?s(f).mod(c):(o.set(l,f),s(u).rem(c),s(f).add(c))}):t.changed(t.MOD)&&t.visit(t.MOD,c=>{s(o.get(Ee(c))).mod(c)}),a&&t.visit(t.REFLOW,c=>{let l=Ee(c),u=o.get(l),f=r(c);u!==f&&(o.set(l,f),s(u).rem(c),s(f).add(c))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function tY(e){Ft.call(this,null,x9e,e)}ee(tY,Ft);function x9e(e){return this.value&&!e.modified()?this.value:F(e.name)?te(e.name).map(t=>Dr(t)):Dr(e.name,e.as)}function sA(e){P.call(this,M3(),e)}sA.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ee(sA,P,{transform(e,t){let n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,c=e.expr,l=!0;t.visit(t.REM,f=>{let d=Ee(f);r.has(d)?r.delete(d):a.push(f)}),t.visit(t.ADD,f=>{c(f,e)?o.push(f):r.set(Ee(f),1)});function u(f){let d=Ee(f),p=c(f,e),h=r.get(d);p&&h?(r.delete(d),o.push(f)):!p&&!h?(r.set(d,1),a.push(f)):l&&p&&!h&&s.push(f)}return t.visit(t.MOD,u),e.modified()&&(l=!1,t.visit(t.REFLOW,u)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function cA(e){P.call(this,[],e)}cA.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ee(cA,P,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=ZW(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,s=>{let c=r.map(h=>h(s)),l=c.reduce((h,m)=>Math.max(h,m.length),0),u=0,f,d,p;for(;u<l;++u){for(d=zv(s),f=0;f<a;++f)d[i[f]]=(p=c[f][u])==null?null:p;o&&(d[o]=u),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function lA(e){P.call(this,[],e)}lA.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ee(lA,P,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(cn),o=e.as||["key","value"],a=o[0],s=o[1],c=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let u=0,f;u<c;++u)f=zv(l),f[a]=i[u],f[s]=r[u](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function uA(e){P.call(this,null,e)}uA.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ee(uA,P,{transform(e,t){let n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,a=>a[r]=n(a,e))}});function nY(e){P.call(this,[],e)}ee(nY,P,{transform(e,t){let n=t.fork(t.ALL),r=e.generator,i=this.value,o=e.size-i.length,a,s,c;if(o>0){for(a=[];--o>=0;)a.push(c=at(r(e))),i.push(c);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else s=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(s):s,i=i.slice(-o);return n.source=this.value=i,n}});var Xv={value:"value",median:K6,mean:lv,min:vl,max:Po},C9e=[];function fA(e){P.call(this,[],e)}fA.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function b9e(e){var t=e.method||Xv.value,n;if(Xv[t]==null)$("Unrecognized imputation method: "+t);else return t===Xv.value?(n=e.value!==void 0?e.value:0,()=>n):Xv[t]}function M9e(e){let t=e.field;return n=>n?t(n):NaN}ee(fA,P,{transform(e,t){var n=t.fork(t.ALL),r=b9e(e),i=M9e(e),o=cn(e.field),a=cn(e.key),s=(e.groupby||[]).map(cn),c=w9e(t.source,e.groupby,e.key,e.keyvals),l=[],u=this.value,f=c.domain.length,d,p,h,m,g,v,y,C,b,M;for(g=0,C=c.length;g<C;++g)for(d=c[g],h=d.values,p=NaN,y=0;y<f;++y)if(d[y]==null){for(m=c.domain[y],M={_impute:!0},v=0,b=h.length;v<b;++v)M[s[v]]=h[v];M[a]=m,M[o]=Number.isNaN(p)?p=r(d,i):p,l.push(at(M))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),u.length&&(n.rem=n.materialize(n.REM).rem.concat(u)),this.value=l,n}});function w9e(e,t,n,r){var i=v=>v(g),o=[],a=r?r.slice():[],s={},c={},l,u,f,d,p,h,m,g;for(a.forEach((v,y)=>s[v]=y+1),d=0,m=e.length;d<m;++d)g=e[d],h=n(g),p=s[h]||(s[h]=a.push(h)),u=(l=t?t.map(i):C9e)+"",(f=c[u])||(f=c[u]=[],o.push(f),f.values=l),f[p-1]=g;return o.domain=a,o}function dA(e){k3.call(this,e)}dA.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Ud},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ee(dA,k3,{transform(e,t){let n=this,r=e.modified(),i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{_e(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){let e=this._adds,t=this._mods,n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function pA(e){P.call(this,null,e)}pA.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ee(pA,P,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=rA(r,e.groupby,e.field),o=(e.groupby||[]).map(cn),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",c=e.as||["value","density"],l=[],u=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;s!=="pdf"&&s!=="cdf"&&$("Invalid density method: "+s),e.resolve==="shared"&&(u||(u=Yi(r,e.field)),f=d=e.steps||d),i.forEach(p=>{let h=Iv(p,a)[s],m=e.counts?p.length:1,g=u||Yi(p);du(h,g,f,d).forEach(v=>{let y={};for(let C=0;C<o.length;++C)y[o[C]]=p.dims[C];y[c[0]]=v[0],y[c[1]]=v[1]*m,l.push(at(y))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function rY(e){Ft.call(this,null,S9e,e)}ee(rY,Ft);function S9e(e){return this.value&&!e.modified()?this.value:id(e.fields,e.flat)}function iY(e){P.call(this,[],e),this._pending=null}ee(iY,P,{transform(e,t){let n=t.dataflow;return this._pending?XL(this,t,this._pending):E9e(e)?t.StopPropagation:e.values?XL(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=te(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>XL(this,t,te(r.data)))}});function E9e(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function XL(e,t,n){n.forEach(at);let r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function hA(e){P.call(this,{},e)}hA.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ee(hA,P,{transform(e,t){let n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,a=e.modified(),s=n.length,c=a?t.SOURCE:t.ADD,l=t,u=e.as,f,d,p;return i?(d=i.length,s>1&&!u&&$('Multi-field lookup requires explicit "as" parameter.'),u&&u.length!==s*d&&$('The "as" parameter has too few output field names.'),u=u||i.map(cn),f=function(h){for(var m=0,g=0,v,y;m<s;++m)if(y=r.get(n[m](h)),y==null)for(v=0;v<d;++v,++g)h[u[g]]=o;else for(v=0;v<d;++v,++g)h[u[g]]=i[v](y)}):(u||$("Missing output field names."),f=function(h){for(var m=0,g;m<s;++m)g=r.get(n[m](h)),h[u[m]]=g??o}),a?l=t.reflow(!0):(p=n.some(h=>t.modified(h.fields)),c|=p?t.MOD:0),t.visit(c,f),l.modifies(u)}});function oY(e){Ft.call(this,null,D9e,e)}ee(oY,Ft);function D9e(e){if(this.value&&!e.modified())return this.value;let t=e.extents,n=t.length,r=1/0,i=-1/0,o,a;for(o=0;o<n;++o)a=t[o],a[0]<r&&(r=a[0]),a[1]>i&&(i=a[1]);return[r,i]}function aY(e){Ft.call(this,null,z9e,e)}ee(aY,Ft);function z9e(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function sY(e){P.call(this,null,e)}ee(sY,P,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function mA(e){k3.call(this,e)}mA.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Ud,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ee(mA,k3,{_transform:k3.prototype.transform,transform(e,t){return this._transform(H9e(e,t),t)}});function H9e(e,t){let n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=dr(n).concat(dr(r)),a=A9e(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>i),fields:a.map(s=>L9e(s,n,r,o)),as:a.map(s=>s+""),modified:e.modified.bind(e)}}function L9e(e,t,n,r){return yi(i=>t(i)===e?n(i):NaN,r,e+"")}function A9e(e,t,n){let r={},i=[];return n.visit(n.SOURCE,o=>{let a=e(o);r[a]||(r[a]=1,i.push(a))}),i.sort(nd),t?i.slice(0,t):i}function cY(e){Qv.call(this,e)}ee(cY,Qv,{transform(e,t){let n=e.subflow,r=e.field,i=o=>this.subflow(Ee(o),n,t,o);return(e.modified("field")||r&&t.modified(dr(r)))&&$("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{let a=i(o);r(o).forEach(s=>a.mod(s))}),t.visit(t.ADD,o=>{let a=i(o);r(o).forEach(s=>a.add(at(s)))}),t.visit(t.REM,o=>{let a=i(o);r(o).forEach(s=>a.rem(s))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function gA(e){P.call(this,null,e)}gA.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ee(gA,P,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=ZW(e.fields,e.as||[]),o=r?(s,c)=>V9e(s,c,r,i):zl,a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,s=>{let c=Ee(s);n.rem.push(a[c]),a[c]=null}),t.visit(t.ADD,s=>{let c=o(s,at({}));a[Ee(s)]=c,n.add.push(c)}),t.visit(t.MOD,s=>{n.mod.push(o(s,a[Ee(s)]))}),n}});function V9e(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function lY(e){P.call(this,null,e)}ee(lY,P,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function vA(e){P.call(this,null,e)}vA.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};var N9e=1e-14;ee(vA,P,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;let i=t.materialize(t.SOURCE).source,o=rA(i,e.groupby,e.field),a=(e.groupby||[]).map(cn),s=[],c=e.step||.01,l=e.probs||Gn(c/2,1-N9e,c),u=l.length;return o.forEach(f=>{let d=Vv(f,l);for(let p=0;p<u;++p){let h={};for(let m=0;m<a.length;++m)h[a[m]]=f.dims[m];h[r[0]]=l[p],h[r[1]]=d[p],s.push(at(h))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}});function uY(e){P.call(this,null,e)}ee(uY,P,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{let o=Ee(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{let o=zv(i);r[Ee(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{let o=r[Ee(i)];for(let a in i)o[a]=i[a],n.modifies(a);n.mod.push(o)})),n}});function yA(e){P.call(this,[],e),this.count=0}yA.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ee(yA,P,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((u,f)=>(u[Ee(f)]=1,u),{}),a=this.value,s=this.count,c=0;function l(u){let f,d;a.length<i?a.push(u):(d=~~((s+1)*e1()),d<a.length&&d>=c&&(f=a[d],o[Ee(f)]&&n.rem.push(f),a[d]=u)),++s}if(t.rem.length&&(t.visit(t.REM,u=>{let f=Ee(u);o[f]&&(o[f]=-1,n.rem.push(u)),--s}),a=a.filter(u=>o[Ee(u)]!==-1)),(t.rem.length||r)&&a.length<i&&t.source&&(c=s=a.length,t.visit(t.SOURCE,u=>{o[Ee(u)]||l(u)}),c=-1),r&&a.length>i){let u=a.length-i;for(let f=0;f<u;++f)o[Ee(a[f])]=-1,n.rem.push(a[f]);a=a.slice(u)}return t.mod.length&&t.visit(t.MOD,u=>{o[Ee(u)]&&n.mod.push(u)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||c<0)&&(n.add=a.filter(u=>!o[Ee(u)])),this.count=s,this.value=n.source=a,n}});function xA(e){P.call(this,null,e)}xA.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ee(xA,P,{transform(e,t){if(this.value&&!e.modified())return;let n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Gn(e.start,e.stop,e.step||1).map(i=>{let o={};return o[r]=i,at(o)}),n.add=t.add.concat(this.value),n}});function fY(e){P.call(this,null,e),this.modified(!0)}ee(fY,P,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function CA(e){P.call(this,null,e)}var dY=["unit0","unit1"];CA.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:mv,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:dY}]};ee(CA,P,{transform(e,t){let n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),a=(i?ac:oc)(o.unit).offset,s=e.as||dY,c=s[0],l=s[1],u=o.step,f=o.start||1/0,d=o.stop||-1/0,p=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(dr(n)))&&(t=t.reflow(!0),p=t.SOURCE,f=1/0,d=-1/0),t.visit(p,h=>{let m=n(h),g,v;m==null?(h[c]=null,r&&(h[l]=null)):(h[c]=g=v=o(m),r&&(h[l]=v=a(g,u)),g<f&&(f=g),v>d&&(d=v))}),o.start=f,o.stop=d,t.modifies(r?s:c)},_floor(e,t){let n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:CL({extent:e.extent||Yi(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=gv(r),a=this.value||{},s=(n?mL:hL)(o,i);return s.unit=Ue(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}});function pY(e){P.call(this,M3(),e)}ee(pY,P,{transform(e,t){let n=t.dataflow,r=e.field,i=this.value,o=s=>i.set(r(s),s),a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,s=>i.delete(r(s))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function hY(e){P.call(this,null,e)}ee(hY,P,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Ba(e.sort)):t.source).map(e.field))}});function _9e(e,t,n,r){let i=Bd[e](t,n);return{init:i.init||z2,update:function(o,a){a[r]=i.next(o)}}}var Bd={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{let n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{let n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){let e=Bd.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{let n=t.data,r=t.compare,i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||$("ntile num must be greater than zero.");let n=Bd.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{let r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{let r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||$("nth_value nth must be greater than zero."),{next:n=>{let r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{let r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{let i=r.data;return r.index<=n?t:(n=k9e(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function k9e(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}var T9e=Object.keys(Bd);function mY(e){let t=te(e.ops),n=te(e.fields),r=te(e.params),i=te(e.aggregate_params),o=te(e.as),a=this.outputs=[],s=this.windows=[],c={},l={},u=[],f=[],d=!0;function p(h){te(dr(h)).forEach(m=>c[m]=1)}p(e.sort),t.forEach((h,m)=>{let g=n[m],v=r[m],y=i[m]||null,C=cn(g),b=jW(h,C,o[m]);if(p(g),a.push(b),de(Bd,h))s.push(_9e(h,g,v,b));else{if(g==null&&h!=="count"&&$("Null aggregate field specified."),h==="count"){u.push(b);return}d=!1;let M=l[C];M||(M=l[C]=[],M.field=g,f.push(M)),M.push(qW(h,y,b))}}),(u.length||f.length)&&(this.cell=I9e(f,u,d)),this.inputs=Object.keys(c)}var gY=mY.prototype;gY.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};gY.update=function(e,t){let n=this.cell,r=this.windows,i=e.data,o=r&&r.length,a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)};function I9e(e,t,n){e=e.map(c=>WW(c,c.field));let r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new KL;return r.add=function(c){if(r.num+=1,!n){s&&s.add(c);for(let l=0;l<i;++l)o[l].add(o[l].get(c),c)}},r.rem=function(c){if(r.num-=1,!n){s&&s.rem(c);for(let l=0;l<i;++l)o[l].rem(o[l].get(c),c)}},r.set=function(c){let l,u;for(s&&s.values(),l=0,u=t.length;l<u;++l)c[t[l]]=r.num;if(!n)for(l=0,u=o.length;l<u;++l)o[l].set(c)},r.init=function(){r.num=0,s&&s.reset();for(let c=0;c<i;++c)o[c].init()},r}function bA(e){P.call(this,{},e),this._mlen=0,this._mods=[]}bA.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:T9e.concat(Ud)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ee(bA,P,{transform(e,t){this.stamp=t.stamp;let n=e.modified(),r=Ba(e.sort),i=QL(e.groupby),o=s=>this.group(i(s)),a=this.state;(!a||n)&&(a=this.state=new mY(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,s=>o(s).add(s))):(t.visit(t.REM,s=>o(s).remove(s)),t.visit(t.ADD,s=>o(s).add(s)));for(let s=0,c=this._mlen;s<c;++s)F9e(this._mods[s],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=YW(Ee),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function F9e(e,t,n,r){let i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),c=s.length,l=o?ro(i):null,u={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||hn(-1)};t.init();for(let f=0;f<c;++f)R9e(u,a,f,c),o&&O9e(u,l),t.update(u,s[f])}function R9e(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function O9e(e,t){let n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}var AN={};br(AN,{bound:()=>IK,identifier:()=>LN,mark:()=>FK,overlap:()=>RK,render:()=>PK,viewlayout:()=>BK});function pt(e){return function(){return e}}var wA=Math.abs,ei=Math.atan2,T3=Math.cos,vY=Math.max,Kv=Math.min,V2=Math.sin,fc=Math.sqrt,Lr=1e-12,I3=Math.PI,jd=I3/2,Zv=2*I3;function yY(e){return e>1?0:e<-1?I3:Math.acos(e)}function SA(e){return e>=1?jd:e<=-1?-jd:Math.asin(e)}var EA=Math.PI,DA=2*EA,Hl=1e-6,P9e=DA-Hl;function xY(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function $9e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return xY;let n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}var Ll=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?xY:$9e(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,c=r-t,l=i-n,u=a-t,f=s-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Hl)if(!(Math.abs(f*c-l*u)>Hl)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-a,h=i-s,m=c*c+l*l,g=p*p+h*h,v=Math.sqrt(m),y=Math.sqrt(d),C=o*Math.tan((EA-Math.acos((m+d-g)/(2*v*y)))/2),b=C/y,M=C/v;Math.abs(b-1)>Hl&&this._append`L${t+b*u},${n+b*f}`,this._append`A${o},${o},0,0,${+(f*p>u*h)},${this._x1=t+M*c},${this._y1=n+M*l}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),c=r*Math.sin(i),l=t+s,u=n+c,f=1^a,d=a?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>Hl||Math.abs(this._y1-u)>Hl)&&this._append`L${l},${u}`,r&&(d<0&&(d=d%DA+DA),d>P9e?this._append`A${r},${r},0,1,${f},${t-s},${n-c}A${r},${r},0,1,${f},${this._x1=l},${this._y1=u}`:d>Hl&&this._append`A${r},${r},0,${+(d>=EA)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Al(){return new Ll}Al.prototype=Ll.prototype;function F3(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{let r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Ll(t)}function B9e(e){return e.innerRadius}function U9e(e){return e.outerRadius}function j9e(e){return e.startAngle}function q9e(e){return e.endAngle}function G9e(e){return e&&e.padAngle}function W9e(e,t,n,r,i,o,a,s){var c=n-e,l=r-t,u=a-i,f=s-o,d=f*c-u*l;if(!(d*d<Lr))return d=(u*(t-o)-f*(e-i))/d,[e+d*c,t+d*l]}function Jv(e,t,n,r,i,o,a){var s=e-n,c=t-r,l=(a?o:-o)/fc(s*s+c*c),u=l*c,f=-l*s,d=e+u,p=t+f,h=n+u,m=r+f,g=(d+h)/2,v=(p+m)/2,y=h-d,C=m-p,b=y*y+C*C,M=i-o,S=d*m-h*p,w=(C<0?-1:1)*fc(vY(0,M*M*b-S*S)),E=(S*C-y*w)/b,D=(-S*y-C*w)/b,H=(S*C+y*w)/b,A=(-S*y+C*w)/b,j=E-g,V=D-v,_=H-g,N=A-v;return j*j+V*V>_*_+N*N&&(E=H,D=A),{cx:E,cy:D,x01:-u,y01:-f,x11:E*(i/M-1),y11:D*(i/M-1)}}function zA(){var e=B9e,t=U9e,n=pt(0),r=null,i=j9e,o=q9e,a=G9e,s=null,c=F3(l);function l(){var u,f,d=+e.apply(this,arguments),p=+t.apply(this,arguments),h=i.apply(this,arguments)-jd,m=o.apply(this,arguments)-jd,g=wA(m-h),v=m>h;if(s||(s=u=c()),p<d&&(f=p,p=d,d=f),!(p>Lr))s.moveTo(0,0);else if(g>Zv-Lr)s.moveTo(p*T3(h),p*V2(h)),s.arc(0,0,p,h,m,!v),d>Lr&&(s.moveTo(d*T3(m),d*V2(m)),s.arc(0,0,d,m,h,v));else{var y=h,C=m,b=h,M=m,S=g,w=g,E=a.apply(this,arguments)/2,D=E>Lr&&(r?+r.apply(this,arguments):fc(d*d+p*p)),H=Kv(wA(p-d)/2,+n.apply(this,arguments)),A=H,j=H,V,_;if(D>Lr){var N=SA(D/d*V2(E)),I=SA(D/p*V2(E));(S-=N*2)>Lr?(N*=v?1:-1,b+=N,M-=N):(S=0,b=M=(h+m)/2),(w-=I*2)>Lr?(I*=v?1:-1,y+=I,C-=I):(w=0,y=C=(h+m)/2)}var G=p*T3(y),X=p*V2(y),J=d*T3(M),we=d*V2(M);if(H>Lr){var Se=p*T3(C),Ye=p*V2(C),bt=d*T3(b),st=d*V2(b),Kt;if(g<I3)if(Kt=W9e(G,X,bt,st,Se,Ye,J,we)){var Es=G-Kt[0],W0=X-Kt[1],T4=Se-Kt[0],me=Ye-Kt[1],Xe=1/V2(yY((Es*T4+W0*me)/(fc(Es*Es+W0*W0)*fc(T4*T4+me*me)))/2),nt=fc(Kt[0]*Kt[0]+Kt[1]*Kt[1]);A=Kv(H,(d-nt)/(Xe-1)),j=Kv(H,(p-nt)/(Xe+1))}else A=j=0}w>Lr?j>Lr?(V=Jv(bt,st,G,X,p,j,v),_=Jv(Se,Ye,J,we,p,j,v),s.moveTo(V.cx+V.x01,V.cy+V.y01),j<H?s.arc(V.cx,V.cy,j,ei(V.y01,V.x01),ei(_.y01,_.x01),!v):(s.arc(V.cx,V.cy,j,ei(V.y01,V.x01),ei(V.y11,V.x11),!v),s.arc(0,0,p,ei(V.cy+V.y11,V.cx+V.x11),ei(_.cy+_.y11,_.cx+_.x11),!v),s.arc(_.cx,_.cy,j,ei(_.y11,_.x11),ei(_.y01,_.x01),!v))):(s.moveTo(G,X),s.arc(0,0,p,y,C,!v)):s.moveTo(G,X),!(d>Lr)||!(S>Lr)?s.lineTo(J,we):A>Lr?(V=Jv(J,we,Se,Ye,d,-A,v),_=Jv(G,X,bt,st,d,-A,v),s.lineTo(V.cx+V.x01,V.cy+V.y01),A<H?s.arc(V.cx,V.cy,A,ei(V.y01,V.x01),ei(_.y01,_.x01),!v):(s.arc(V.cx,V.cy,A,ei(V.y01,V.x01),ei(V.y11,V.x11),!v),s.arc(0,0,d,ei(V.cy+V.y11,V.cx+V.x11),ei(_.cy+_.y11,_.cx+_.x11),v),s.arc(_.cx,_.cy,A,ei(_.y11,_.x11),ei(_.y01,_.x01),!v))):s.arc(0,0,d,M,b,v)}if(s.closePath(),u)return s=null,u+""||null}return l.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-I3/2;return[T3(f)*u,V2(f)*u]},l.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:pt(+u),l):e},l.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:pt(+u),l):t},l.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:pt(+u),l):n},l.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:pt(+u),l):r},l.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:pt(+u),l):i},l.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:pt(+u),l):o},l.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:pt(+u),l):a},l.context=function(u){return arguments.length?(s=u??null,l):s},l}var cJe=Array.prototype.slice;function ey(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function CY(e){this._context=e}CY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Vl(e){return new CY(e)}function ty(e){return e[0]}function ny(e){return e[1]}function qd(e,t){var n=pt(!0),r=null,i=Vl,o=null,a=F3(s);e=typeof e=="function"?e:e===void 0?ty:pt(e),t=typeof t=="function"?t:t===void 0?ny:pt(t);function s(c){var l,u=(c=ey(c)).length,f,d=!1,p;for(r==null&&(o=i(p=a())),l=0;l<=u;++l)!(l<u&&n(f=c[l],l,c))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,l,c),+t(f,l,c));if(p)return o=null,p+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:pt(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:pt(+c),s):t},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:pt(!!c),s):n},s.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),s):i},s.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),s):r},s}function ry(e,t,n){var r=null,i=pt(!0),o=null,a=Vl,s=null,c=F3(l);e=typeof e=="function"?e:e===void 0?ty:pt(+e),t=typeof t=="function"?t:t===void 0?pt(0):pt(+t),n=typeof n=="function"?n:n===void 0?ny:pt(+n);function l(f){var d,p,h,m=(f=ey(f)).length,g,v=!1,y,C=new Array(m),b=new Array(m);for(o==null&&(s=a(y=c())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===v)if(v=!v)p=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=d-1;h>=p;--h)s.point(C[h],b[h]);s.lineEnd(),s.areaEnd()}v&&(C[d]=+e(g,d,f),b[d]=+t(g,d,f),s.point(r?+r(g,d,f):C[d],n?+n(g,d,f):b[d]))}if(y)return s=null,y+""||null}function u(){return qd().defined(i).curve(a).context(o)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:pt(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:pt(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:pt(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:pt(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:pt(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:pt(+f),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:pt(!!f),l):i},l.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),l):a},l.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),l):o},l}var bY={draw(e,t){let n=fc(t/I3);e.moveTo(n,0),e.arc(0,0,n,0,Zv)}};function iy(e,t){let n=null,r=F3(i);e=typeof e=="function"?e:pt(e||bY),t=typeof t=="function"?t:pt(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:pt(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:pt(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function qo(){}function pu(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Gd(e){this._context=e}Gd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function HA(e){return new Gd(e)}function MY(e){this._context=e}MY.prototype={areaStart:qo,areaEnd:qo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:pu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function LA(e){return new MY(e)}function wY(e){this._context=e}wY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:pu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function AA(e){return new wY(e)}function SY(e,t){this._basis=new Gd(e),this._beta=t}SY.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,a=t[n]-i,s=-1,c;++s<=n;)c=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+c*o),this._beta*t[s]+(1-this._beta)*(i+c*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var VA=function e(t){function n(r){return t===1?new Gd(r):new SY(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function hu(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function oy(e,t){this._context=e,this._k=(1-t)/6}oy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:hu(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:hu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var NA=function e(t){function n(r){return new oy(r,t)}return n.tension=function(r){return e(+r)},n}(0);function ay(e,t){this._context=e,this._k=(1-t)/6}ay.prototype={areaStart:qo,areaEnd:qo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:hu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var _A=function e(t){function n(r){return new ay(r,t)}return n.tension=function(r){return e(+r)},n}(0);function sy(e,t){this._context=e,this._k=(1-t)/6}sy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:hu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var kA=function e(t){function n(r){return new sy(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Wd(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>Lr){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>Lr){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*l+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function EY(e,t){this._context=e,this._alpha=t}EY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Wd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var TA=function e(t){function n(r){return t?new EY(r,t):new oy(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function DY(e,t){this._context=e,this._alpha=t}DY.prototype={areaStart:qo,areaEnd:qo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Wd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var IA=function e(t){function n(r){return t?new DY(r,t):new ay(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function zY(e,t){this._context=e,this._alpha=t}zY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Wd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var FA=function e(t){function n(r){return t?new zY(r,t):new sy(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function HY(e){this._context=e}HY.prototype={areaStart:qo,areaEnd:qo,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function RA(e){return new HY(e)}function LY(e){return e<0?-1:1}function AY(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(LY(o)+LY(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function VY(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function OA(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function cy(e){this._context=e}cy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:OA(this,this._t0,VY(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,OA(this,VY(this,n=AY(this,e,t)),n);break;default:OA(this,this._t0,n=AY(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function NY(e){this._context=new _Y(e)}(NY.prototype=Object.create(cy.prototype)).point=function(e,t){cy.prototype.point.call(this,t,e)};function _Y(e){this._context=e}_Y.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function PA(e){return new cy(e)}function $A(e){return new NY(e)}function TY(e){this._context=e}TY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=kY(e),i=kY(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function kY(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function BA(e){return new TY(e)}function ly(e,t){this._context=e,this._t=t}ly.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function UA(e){return new ly(e,.5)}function jA(e){return new ly(e,0)}function qA(e){return new ly(e,1)}function Go(e,t){if(typeof document<"u"&&document.createElement){let n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}var IY=()=>typeof Image<"u"?Image:null;function nr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ua(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}var mu=Symbol("implicit");function Nl(){var e=new Q6,t=[],n=[],r=mu;function i(o){let a=e.get(o);if(a===void 0){if(r!==mu)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Q6;for(let a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Nl(t,n).unknown(r)},nr.apply(i,arguments),i}var oV={};br(oV,{interpolate:()=>bi,interpolateArray:()=>cX,interpolateBasis:()=>vy,interpolateBasisClosed:()=>yy,interpolateCubehelix:()=>DX,interpolateCubehelixLong:()=>zX,interpolateDate:()=>Cy,interpolateDiscrete:()=>lX,interpolateHcl:()=>wX,interpolateHclLong:()=>SX,interpolateHsl:()=>CX,interpolateHslLong:()=>bX,interpolateHue:()=>uX,interpolateLab:()=>iV,interpolateNumber:()=>Mi,interpolateNumberArray:()=>Cu,interpolateObject:()=>by,interpolateRgb:()=>Kd,interpolateRgbBasis:()=>aX,interpolateRgbBasisClosed:()=>sX,interpolateRound:()=>Wa,interpolateString:()=>My,interpolateTransformCss:()=>mX,interpolateTransformSvg:()=>gX,interpolateZoom:()=>yX,piecewise:()=>Ol,quantize:()=>HX});function dc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function R3(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function qa(){}var O3=.7,Tl=1/O3,gu="\\s*([+-]?\\d+)\\s*",Yd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ja="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",X9e=/^#([0-9a-f]{3,8})$/,Q9e=new RegExp(`^rgb\\(${gu},${gu},${gu}\\)$`),K9e=new RegExp(`^rgb\\(${ja},${ja},${ja}\\)$`),Z9e=new RegExp(`^rgba\\(${gu},${gu},${gu},${Yd}\\)$`),J9e=new RegExp(`^rgba\\(${ja},${ja},${ja},${Yd}\\)$`),ege=new RegExp(`^hsl\\(${Yd},${ja},${ja}\\)$`),tge=new RegExp(`^hsla\\(${Yd},${ja},${ja},${Yd}\\)$`),FY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dc(qa,P3,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:RY,formatHex:RY,formatHex8:nge,formatHsl:rge,formatRgb:OY,toString:OY});function RY(){return this.rgb().formatHex()}function nge(){return this.rgb().formatHex8()}function rge(){return qY(this).formatHsl()}function OY(){return this.rgb().formatRgb()}function P3(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=X9e.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?PY(t):n===3?new rr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?uy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?uy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Q9e.exec(e))?new rr(t[1],t[2],t[3],1):(t=K9e.exec(e))?new rr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Z9e.exec(e))?uy(t[1],t[2],t[3],t[4]):(t=J9e.exec(e))?uy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ege.exec(e))?UY(t[1],t[2]/100,t[3]/100,1):(t=tge.exec(e))?UY(t[1],t[2]/100,t[3]/100,t[4]):FY.hasOwnProperty(e)?PY(FY[e]):e==="transparent"?new rr(NaN,NaN,NaN,0):null}function PY(e){return new rr(e>>16&255,e>>8&255,e&255,1)}function uy(e,t,n,r){return r<=0&&(e=t=n=NaN),new rr(e,t,n,r)}function Xd(e){return e instanceof qa||(e=P3(e)),e?(e=e.rgb(),new rr(e.r,e.g,e.b,e.opacity)):new rr}function Wo(e,t,n,r){return arguments.length===1?Xd(e):new rr(e,t,n,r??1)}function rr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}dc(rr,Wo,R3(qa,{brighter(e){return e=e==null?Tl:Math.pow(Tl,e),new rr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?O3:Math.pow(O3,e),new rr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new rr(kl(this.r),kl(this.g),kl(this.b),dy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$Y,formatHex:$Y,formatHex8:ige,formatRgb:BY,toString:BY}));function $Y(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}`}function ige(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}${_l((isNaN(this.opacity)?1:this.opacity)*255)}`}function BY(){let e=dy(this.opacity);return`${e===1?"rgb(":"rgba("}${kl(this.r)}, ${kl(this.g)}, ${kl(this.b)}${e===1?")":`, ${e})`}`}function dy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function kl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _l(e){return e=kl(e),(e<16?"0":"")+e.toString(16)}function UY(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new N2(e,t,n,r)}function qY(e){if(e instanceof N2)return new N2(e.h,e.s,e.l,e.opacity);if(e instanceof qa||(e=P3(e)),!e)return new N2;if(e instanceof N2)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new N2(a,s,c,e.opacity)}function Il(e,t,n,r){return arguments.length===1?qY(e):new N2(e,t,n,r??1)}function N2(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}dc(N2,Il,R3(qa,{brighter(e){return e=e==null?Tl:Math.pow(Tl,e),new N2(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?O3:Math.pow(O3,e),new N2(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new rr(GA(e>=240?e-240:e+120,i,r),GA(e,i,r),GA(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new N2(jY(this.h),fy(this.s),fy(this.l),dy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=dy(this.opacity);return`${e===1?"hsl(":"hsla("}${jY(this.h)}, ${fy(this.s)*100}%, ${fy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function jY(e){return e=(e||0)%360,e<0?e+360:e}function fy(e){return Math.max(0,Math.min(1,e||0))}function GA(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var py=Math.PI/180,hy=180/Math.PI;var my=18,GY=.96422,WY=1,YY=.82521,XY=4/29,vu=6/29,QY=3*vu*vu,oge=vu*vu*vu;function KY(e){if(e instanceof Ga)return new Ga(e.l,e.a,e.b,e.opacity);if(e instanceof pc)return ZY(e);e instanceof rr||(e=Xd(e));var t=QA(e.r),n=QA(e.g),r=QA(e.b),i=WA((.2225045*t+.7168786*n+.0606169*r)/WY),o,a;return t===n&&n===r?o=a=i:(o=WA((.4360747*t+.3850649*n+.1430804*r)/GY),a=WA((.0139322*t+.0971045*n+.7141733*r)/YY)),new Ga(116*i-16,500*(o-i),200*(i-a),e.opacity)}function $3(e,t,n,r){return arguments.length===1?KY(e):new Ga(e,t,n,r??1)}function Ga(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}dc(Ga,$3,R3(qa,{brighter(e){return new Ga(this.l+my*(e??1),this.a,this.b,this.opacity)},darker(e){return new Ga(this.l-my*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=GY*YA(t),e=WY*YA(e),n=YY*YA(n),new rr(XA(3.1338561*t-1.6168667*e-.4906146*n),XA(-.9787684*t+1.9161415*e+.033454*n),XA(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function WA(e){return e>oge?Math.pow(e,1/3):e/QY+XY}function YA(e){return e>vu?e*e*e:QY*(e-XY)}function XA(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function QA(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function age(e){if(e instanceof pc)return new pc(e.h,e.c,e.l,e.opacity);if(e instanceof Ga||(e=KY(e)),e.a===0&&e.b===0)return new pc(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*hy;return new pc(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Fl(e,t,n,r){return arguments.length===1?age(e):new pc(e,t,n,r??1)}function pc(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function ZY(e){if(isNaN(e.h))return new Ga(e.l,0,0,e.opacity);var t=e.h*py;return new Ga(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}dc(pc,Fl,R3(qa,{brighter(e){return new pc(this.h,this.c,this.l+my*(e??1),this.opacity)},darker(e){return new pc(this.h,this.c,this.l-my*(e??1),this.opacity)},rgb(){return ZY(this).rgb()}}));var nX=-.14861,KA=1.78277,ZA=-.29227,gy=-.90649,Qd=1.97294,JY=Qd*gy,eX=Qd*KA,tX=KA*ZA-gy*nX;function sge(e){if(e instanceof Rl)return new Rl(e.h,e.s,e.l,e.opacity);e instanceof rr||(e=Xd(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(tX*r+JY*t-eX*n)/(tX+JY-eX),o=r-i,a=(Qd*(n-i)-ZA*o)/gy,s=Math.sqrt(a*a+o*o)/(Qd*i*(1-i)),c=s?Math.atan2(a,o)*hy-120:NaN;return new Rl(c<0?c+360:c,s,i,e.opacity)}function yu(e,t,n,r){return arguments.length===1?sge(e):new Rl(e,t,n,r??1)}function Rl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}dc(Rl,yu,R3(qa,{brighter(e){return e=e==null?Tl:Math.pow(Tl,e),new Rl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?O3:Math.pow(O3,e),new Rl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*py,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new rr(255*(t+n*(nX*r+KA*i)),255*(t+n*(ZA*r+gy*i)),255*(t+n*(Qd*r)),this.opacity)}}));function JA(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function vy(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return JA((n-r/t)*t,a,i,o,s)}}function yy(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return JA((n-r/t)*t,i,o,a,s)}}var xu=e=>()=>e;function rX(e,t){return function(n){return e+n*t}}function cge(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function B3(e,t){var n=t-e;return n?rX(e,n>180||n<-180?n-360*Math.round(n/360):n):xu(isNaN(e)?t:e)}function iX(e){return(e=+e)==1?gn:function(t,n){return n-t?cge(t,n,e):xu(isNaN(t)?n:t)}}function gn(e,t){var n=t-e;return n?rX(e,n):xu(isNaN(e)?t:e)}var Kd=function e(t){var n=iX(t);function r(i,o){var a=n((i=Wo(i)).r,(o=Wo(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),l=gn(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function oX(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=Wo(t[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=e(r),i=e(i),o=e(o),s.opacity=1,function(c){return s.r=r(c),s.g=i(c),s.b=o(c),s+""}}}var aX=oX(vy),sX=oX(yy);function Cu(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function xy(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function cX(e,t){return(xy(t)?Cu:eV)(e,t)}function eV(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=bi(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Cy(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Mi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function by(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=bi(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var nV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tV=new RegExp(nV.source,"g");function lge(e){return function(){return e}}function uge(e){return function(t){return e(t)+""}}function My(e,t){var n=nV.lastIndex=tV.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(e=e+"",t=t+"";(r=nV.exec(e))&&(i=tV.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:Mi(r,i)})),n=tV.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?uge(c[0].x):lge(t):(t=c.length,function(l){for(var u=0,f;u<t;++u)s[(f=c[u]).i]=f.x(l);return s.join("")})}function bi(e,t){var n=typeof t,r;return t==null||n==="boolean"?xu(t):(n==="number"?Mi:n==="string"?(r=P3(t))?(t=r,Kd):My:t instanceof P3?Kd:t instanceof Date?Cy:xy(t)?Cu:Array.isArray(t)?eV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?by:Mi)(e,t)}function lX(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function uX(e,t){var n=B3(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Wa(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var fX=180/Math.PI,wy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rV(e,t,n,r,i,o){var a,s,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*fX,skewX:Math.atan(c)*fX,scaleX:a,scaleY:s}}var Sy;function dX(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?wy:rV(t.a,t.b,t.c,t.d,t.e,t.f)}function pX(e){return e==null?wy:(Sy||(Sy=document.createElementNS("http://www.w3.org/2000/svg","g")),Sy.setAttribute("transform",e),(e=Sy.transform.baseVal.consolidate())?(e=e.matrix,rV(e.a,e.b,e.c,e.d,e.e,e.f)):wy)}function hX(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,d,p,h){if(l!==f||u!==d){var m=p.push("translate(",null,t,null,n);h.push({i:m-4,x:Mi(l,f)},{i:m-2,x:Mi(u,d)})}else(f||d)&&p.push("translate("+f+t+d+n)}function a(l,u,f,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Mi(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function s(l,u,f,d){l!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Mi(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,d,p,h){if(l!==f||u!==d){var m=p.push(i(p)+"scale(",null,",",null,")");h.push({i:m-4,x:Mi(l,f)},{i:m-2,x:Mi(u,d)})}else(f!==1||d!==1)&&p.push(i(p)+"scale("+f+","+d+")")}return function(l,u){var f=[],d=[];return l=e(l),u=e(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,d),a(l.rotate,u.rotate,f,d),s(l.skewX,u.skewX,f,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,d),l=u=null,function(p){for(var h=-1,m=d.length,g;++h<m;)f[(g=d[h]).i]=g.x(p);return f.join("")}}}var mX=hX(dX,"px, ","px)","deg)"),gX=hX(pX,", ",")",")");var fge=1e-12;function vX(e){return((e=Math.exp(e))+1/e)/2}function dge(e){return((e=Math.exp(e))-1/e)/2}function pge(e){return((e=Math.exp(2*e))-1)/(e+1)}var yX=function e(t,n,r){function i(o,a){var s=o[0],c=o[1],l=o[2],u=a[0],f=a[1],d=a[2],p=u-s,h=f-c,m=p*p+h*h,g,v;if(m<fge)v=Math.log(d/l)/t,g=function(w){return[s+w*p,c+w*h,l*Math.exp(t*w*v)]};else{var y=Math.sqrt(m),C=(d*d-l*l+r*m)/(2*l*n*y),b=(d*d-l*l-r*m)/(2*d*n*y),M=Math.log(Math.sqrt(C*C+1)-C),S=Math.log(Math.sqrt(b*b+1)-b);v=(S-M)/t,g=function(w){var E=w*v,D=vX(M),H=l/(n*y)*(D*pge(t*E+M)-dge(M));return[s+H*p,c+H*h,l*D/vX(t*E+M)]}}return g.duration=v*1e3*t/Math.SQRT2,g}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return e(a,s,c)},i}(Math.SQRT2,2,4);function xX(e){return function(t,n){var r=e((t=Il(t)).h,(n=Il(n)).h),i=gn(t.s,n.s),o=gn(t.l,n.l),a=gn(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=o(s),t.opacity=a(s),t+""}}}var CX=xX(B3),bX=xX(gn);function iV(e,t){var n=gn((e=$3(e)).l,(t=$3(t)).l),r=gn(e.a,t.a),i=gn(e.b,t.b),o=gn(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=o(a),e+""}}function MX(e){return function(t,n){var r=e((t=Fl(t)).h,(n=Fl(n)).h),i=gn(t.c,n.c),o=gn(t.l,n.l),a=gn(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=o(s),t.opacity=a(s),t+""}}}var wX=MX(B3),SX=MX(gn);function EX(e){return function t(n){n=+n;function r(i,o){var a=e((i=yu(i)).h,(o=yu(o)).h),s=gn(i.s,o.s),c=gn(i.l,o.l),l=gn(i.opacity,o.opacity);return function(u){return i.h=a(u),i.s=s(u),i.l=c(Math.pow(u,n)),i.opacity=l(u),i+""}}return r.gamma=t,r}(1)}var DX=EX(B3),zX=EX(gn);function Ol(e,t){t===void 0&&(t=e,e=bi);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function HX(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function aV(e){return function(){return e}}function bu(e){return+e}var LX=[0,1];function ti(e){return e}function sV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:aV(isNaN(t)?NaN:.5)}function hge(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function mge(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=sV(i,r),o=n(a,o)):(r=sV(r,i),o=n(o,a)),function(s){return o(r(s))}}function gge(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=sV(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var c=L2(e,s,1,r)-1;return o[c](i[c](s))}}function Ya(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Pl(){var e=LX,t=LX,n=bi,r,i,o,a=ti,s,c,l;function u(){var d=Math.min(e.length,t.length);return a!==ti&&(a=hge(e[0],e[d-1])),s=d>2?gge:mge,c=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(c||(c=s(e.map(r),t,n)))(r(a(d)))}return f.invert=function(d){return a(i((l||(l=s(t,e.map(r),Mi)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,bu),u()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Wa,u()},f.clamp=function(d){return arguments.length?(a=d?!0:ti,u()):a!==ti},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,p){return r=d,i=p,u()}}function Zd(){return Pl()(ti,ti)}function Mu(e,t,n,r){var i=Xi(e,t,n),o;switch(r=io(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=md(i,a))&&(r.precision=o),eu(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=gd(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=hd(i))&&(r.precision=o-(r.type==="%")*2);break}}return S3(r)}function ao(e){var t=e.domain;return e.ticks=function(n){var r=t();return gl(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Mu(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],s=r[o],c,l,u=10;for(s<a&&(l=a,a=s,s=l,l=i,i=o,o=l);u-- >0;){if(l=ud(a,s,n),l===c)return r[i]=a,r[o]=s,t(r);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;c=l}return e},e}function Jd(){var e=Zd();return e.copy=function(){return Ya(e,Jd())},nr.apply(e,arguments),ao(e)}function e7(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,bu),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return e7(e).unknown(t)},e=arguments.length?Array.from(e,bu):[0,1],ao(n)}function t7(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function AX(e){return Math.log(e)}function VX(e){return Math.exp(e)}function vge(e){return-Math.log(-e)}function yge(e){return-Math.exp(-e)}function xge(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Cge(e){return e===10?xge:e===Math.E?Math.exp:t=>Math.pow(e,t)}function bge(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function NX(e){return(t,n)=>-e(-t,n)}function n7(e){let t=e(AX,VX),n=t.domain,r=10,i,o;function a(){return i=bge(r),o=Cge(r),n()[0]<0?(i=NX(i),o=NX(o),e(vge,yge)):e(AX,VX),t}return t.base=function(s){return arguments.length?(r=+s,a()):r},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=s=>{let c=n(),l=c[0],u=c[c.length-1],f=u<l;f&&([l,u]=[u,l]);let d=i(l),p=i(u),h,m,g=s==null?10:+s,v=[];if(!(r%1)&&p-d<g){if(d=Math.floor(d),p=Math.ceil(p),l>0){for(;d<=p;++d)for(h=1;h<r;++h)if(m=d<0?h/o(-d):h*o(d),!(m<l)){if(m>u)break;v.push(m)}}else for(;d<=p;++d)for(h=r-1;h>=1;--h)if(m=d>0?h/o(-d):h*o(d),!(m<l)){if(m>u)break;v.push(m)}v.length*2<g&&(v=gl(l,u,g))}else v=gl(d,p,Math.min(p-d,g)).map(o);return f?v.reverse():v},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=io(c)).precision==null&&(c.trim=!0),c=S3(c)),s===1/0)return c;let l=Math.max(1,r*s/t.ticks().length);return u=>{let f=u/o(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=l?c(u):""}},t.nice=()=>n(t7(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),t}function r7(){let e=n7(Pl()).domain([1,10]);return e.copy=()=>Ya(e,r7()).base(e.base()),nr.apply(e,arguments),e}function _X(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function kX(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function i7(e){var t=1,n=e(_X(t),kX(t));return n.constant=function(r){return arguments.length?e(_X(t=+r),kX(t)):t},ao(n)}function o7(){var e=i7(Pl());return e.copy=function(){return Ya(e,o7()).constant(e.constant())},nr.apply(e,arguments)}function TX(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Mge(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function wge(e){return e<0?-e*e:e*e}function a7(e){var t=e(ti,ti),n=1;function r(){return n===1?e(ti,ti):n===.5?e(Mge,wge):e(TX(n),TX(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},ao(t)}function wu(){var e=a7(Pl());return e.copy=function(){return Ya(e,wu()).exponent(e.exponent())},nr.apply(e,arguments),e}function cV(){return wu.apply(null,arguments).exponent(.5)}function s7(){var e=[],t=[],n=[],r;function i(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=dd(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:t[L2(n,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(xi),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return s7().domain(e).range(t).unknown(r)},nr.apply(o,arguments)}function c7(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function a(c){return c!=null&&c<=c?i[L2(r,c,0,n)]:o}function s(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return a}return a.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},a.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,s()):i.slice()},a.invertExtent=function(c){var l=i.indexOf(c);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},a.unknown=function(c){return arguments.length&&(o=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return c7().domain([e,t]).range(i).unknown(o)},nr.apply(ao(a),arguments)}function l7(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[L2(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return l7().domain(e).range(t).unknown(n)},nr.apply(i,arguments)}function Sge(e){return new Date(e)}function Ege(e){return e instanceof Date?+e:+new Date(+e)}function Ey(e,t,n,r,i,o,a,s,c,l){var u=Zd(),f=u.invert,d=u.domain,p=l(".%L"),h=l(":%S"),m=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),y=l("%b %d"),C=l("%B"),b=l("%Y");function M(S){return(c(S)<S?p:s(S)<S?h:a(S)<S?m:o(S)<S?g:r(S)<S?i(S)<S?v:y:n(S)<S?C:b)(S)}return u.invert=function(S){return new Date(f(S))},u.domain=function(S){return arguments.length?d(Array.from(S,Ege)):d().map(Sge)},u.ticks=function(S){var w=d();return e(w[0],w[w.length-1],S??10)},u.tickFormat=function(S,w){return w==null?M:l(w)},u.nice=function(S){var w=d();return(!S||typeof S.range!="function")&&(S=t(w[0],w[w.length-1],S??10)),S?d(t7(w,S)):u},u.copy=function(){return Ya(u,Ey(e,t,n,r,i,o,a,s,c,l))},u}function Dy(){return nr.apply(Ey(eL,tL,Qi,rc,Bo,H1,z3,E3,Ci,au).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function zy(){return nr.apply(Ey(ZH,JH,Ki,ic,Uo,$o,H3,D3,Ci,su).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Hy(){var e=0,t=1,n,r,i,o,a=ti,s=!1,c;function l(f){return f==null||isNaN(f=+f)?c:a(i===0?.5:(f=(o(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(s=!!f,l):s},l.interpolator=function(f){return arguments.length?(a=f,l):a};function u(f){return function(d){var p,h;return arguments.length?([p,h]=d,a=f(p,h),l):[a(0),a(1)]}}return l.range=u(bi),l.rangeRound=u(Wa),l.unknown=function(f){return arguments.length?(c=f,l):c},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function hc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Su(){var e=ao(Hy()(ti));return e.copy=function(){return hc(e,Su())},Ua.apply(e,arguments)}function Ly(){var e=n7(Hy()).domain([1,10]);return e.copy=function(){return hc(e,Ly()).base(e.base())},Ua.apply(e,arguments)}function Ay(){var e=i7(Hy());return e.copy=function(){return hc(e,Ay()).constant(e.constant())},Ua.apply(e,arguments)}function u7(){var e=a7(Hy());return e.copy=function(){return hc(e,u7()).exponent(e.exponent())},Ua.apply(e,arguments)}function lV(){return u7.apply(null,arguments).exponent(.5)}function Vy(){var e=0,t=.5,n=1,r=1,i,o,a,s,c,l=ti,u,f=!1,d;function p(m){return isNaN(m=+m)?d:(m=.5+((m=+u(m))-o)*(r*m<r*o?s:c),l(f?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,n]=m,i=u(e=+e),o=u(t=+t),a=u(n=+n),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,p):[e,t,n]},p.clamp=function(m){return arguments.length?(f=!!m,p):f},p.interpolator=function(m){return arguments.length?(l=m,p):l};function h(m){return function(g){var v,y,C;return arguments.length?([v,y,C]=g,l=Ol(m,[v,y,C]),p):[l(0),l(.5),l(1)]}}return p.range=h(bi),p.rangeRound=h(Wa),p.unknown=function(m){return arguments.length?(d=m,p):d},function(m){return u=m,i=m(e),o=m(t),a=m(n),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,p}}function f7(){var e=ao(Vy()(ti));return e.copy=function(){return hc(e,f7())},Ua.apply(e,arguments)}function Ny(){var e=n7(Vy()).domain([.1,1,10]);return e.copy=function(){return hc(e,Ny()).base(e.base())},Ua.apply(e,arguments)}function _y(){var e=i7(Vy());return e.copy=function(){return hc(e,_y()).constant(e.constant())},Ua.apply(e,arguments)}function d7(){var e=a7(Vy());return e.copy=function(){return hc(e,d7()).exponent(e.exponent())},Ua.apply(e,arguments)}function uV(){return d7.apply(null,arguments).exponent(.5)}function p7(e,t,n){let r=e-t+n*2;return e?r>0?r:1:0}var zge="identity",Bl="linear",Xa="log",Eu="pow",Du="sqrt",h7="symlog",U3="time",j3="utc",_2="sequential",Ul="diverging",$l="quantile",m7="quantize",g7="threshold",Ty="ordinal",Iy="point",dV="band",Fy="bin-ordinal",mr="continuous",v7="discrete",y7="discretizing",Yo="interpolating",pV="temporal";function Hge(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Lge(e){return function(t){let n=e.range(),r=t[0],i=t[1],o=-1,a,s,c,l;for(i<r&&(s=r,r=i,i=s),c=0,l=n.length;c<l;++c)n[c]>=r&&n[c]<=i&&(o<0&&(o=c),a=c);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function hV(){let e=Nl().unknown(void 0),t=e.domain,n=e.range,r=[0,1],i,o,a=!1,s=0,c=0,l=.5;delete e.unknown;function u(){let f=t().length,d=r[1]<r[0],p=r[1-d],h=p7(f,s,c),m=r[d-0];i=(p-m)/(h||1),a&&(i=Math.floor(i)),m+=(p-m-i*(f-s))*l,o=i*(1-s),a&&(m=Math.round(m),o=Math.round(o));let g=Gn(f).map(v=>m+i*v);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),u()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],u()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,u()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,u()):a},e.padding=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),s=c,u()):s},e.paddingInner=function(f){return arguments.length?(s=Math.max(0,Math.min(1,f)),u()):s},e.paddingOuter=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),u()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;let d=r[1]<r[0],p=d?n().reverse():n(),h=p.length-1,m=+f[0],g=+f[1],v,y,C;if(!(m!==m||g!==g)&&(g<m&&(C=m,m=g,g=C),!(g<p[0]||m>r[1-d])))return v=Math.max(0,ml(p,m)-1),y=m===g?v:ml(p,g)-1,m-p[v]>o+1e-10&&++v,d&&(C=v,v=h-y,y=h-C),v>y?void 0:t().slice(v,y+1)},e.invert=function(f){let d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return hV().domain(t()).range(r).round(a).paddingInner(s).paddingOuter(c).align(l)},u()}function OX(e){let t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return OX(t())},e}function Age(){return OX(hV().paddingInner(1))}var Vge=Array.prototype.map;function Nge(e){return Vge.call(e,qn)}var _ge=Array.prototype.slice;function PX(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(L2(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Nge(r),n):e.slice()},n.range=function(r){return arguments.length?(t=_ge.call(r),n):t.slice()},n.tickFormat=function(r,i){return Mu(e[0],Ue(e),r??10,i)},n.copy=function(){return PX().domain(n.domain()).range(n.range())},n}var ky=new Map,$X=Symbol("vega_scale");function mV(e){return e[$X]=!0,e}function BX(e){return e&&e[$X]===!0}function kge(e,t,n){let r=function(){let o=t();return o.invertRange||(o.invertRange=o.invert?Hge(o):o.invertExtent?Lge(o):void 0),o.type=e,mV(o)};return r.metadata=hr(te(n)),r}function lt(e,t,n){return arguments.length>1?(ky.set(e,kge(e,t,n)),this):gV(e)?ky.get(e):void 0}lt(zge,e7);lt(Bl,Jd,mr);lt(Xa,r7,[mr,Xa]);lt(Eu,wu,mr);lt(Du,cV,mr);lt(h7,o7,mr);lt(U3,Dy,[mr,pV]);lt(j3,zy,[mr,pV]);lt(_2,Su,[mr,Yo]);lt(`${_2}-${Bl}`,Su,[mr,Yo]);lt(`${_2}-${Xa}`,Ly,[mr,Yo,Xa]);lt(`${_2}-${Eu}`,u7,[mr,Yo]);lt(`${_2}-${Du}`,lV,[mr,Yo]);lt(`${_2}-${h7}`,Ay,[mr,Yo]);lt(`${Ul}-${Bl}`,f7,[mr,Yo]);lt(`${Ul}-${Xa}`,Ny,[mr,Yo,Xa]);lt(`${Ul}-${Eu}`,d7,[mr,Yo]);lt(`${Ul}-${Du}`,uV,[mr,Yo]);lt(`${Ul}-${h7}`,_y,[mr,Yo]);lt($l,s7,[y7,$l]);lt(m7,c7,y7);lt(g7,l7,y7);lt(Fy,PX,[v7,y7]);lt(Ty,Nl,v7);lt(dV,hV,v7);lt(Iy,Age,v7);function gV(e){return ky.has(e)}function jl(e,t){let n=ky.get(e);return n&&n.metadata[t]}function x7(e){return jl(e,mr)}function q3(e){return jl(e,v7)}function Ry(e){return jl(e,y7)}function vV(e){return jl(e,Xa)}function Tge(e){return jl(e,pV)}function yV(e){return jl(e,Yo)}function xV(e){return jl(e,$l)}var Ige=["clamp","base","constant","exponent"];function Oy(e,t){let n=t[0],r=Ue(t)-n;return function(i){return e(n+i*r)}}function zu(e,t,n){return Ol(C7(t||"rgb",n),e)}function Py(e,t){let n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function $y(e,t,n){let r=n-t,i,o,a;return!r||!Number.isFinite(r)?hn(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=lt(o)().domain([t,n]).range([0,1]),Ige.forEach(s=>e[s]?a[s](e[s]()):0),a)}function C7(e,t){let n=oV[Fge(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Fge(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}var Rge={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Oge={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function UX(e){let t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function jX(e,t){for(let n in e)b7(n,t(e[n]))}var IX={};jX(Oge,UX);jX(Rge,e=>zu(UX(e)));function b7(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(IX[e]=t,this):IX[e]}var M7="symbol",Pge="discrete",qX="gradient",$ge=e=>F(e)?e.map(t=>String(t)):String(e),Bge=(e,t)=>e[1]-t[1],Uge=(e,t)=>t[1]-e[1];function By(e,t,n){let r;return Oe(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(ec(e.domain())/n||1)+1))),ne(t)&&(r=t.step,t=t.interval),Q(t)&&(t=e.type===U3?oc(t):e.type==j3?ac(t):$("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function CV(e,t,n){let r=e.range(),i=r[0],o=Ue(r),a=Bge;if(i>o&&(r=o,o=i,i=r,a=Uge),i=Math.floor(i),o=Math.ceil(o),t=t.map(s=>[s,e(s)]).filter(s=>i<=s[1]&&s[1]<=o).sort(a).map(s=>s[0]),n>0&&t.length>1){let s=[t[0],Ue(t)];for(;t.length>n&&t.length>=3;)t=t.filter((c,l)=>!(l%2));t.length<3&&(t=s)}return t}function Uy(e,t){return e.bins?CV(e,e.bins):e.ticks?e.ticks(t):e.domain()}function bV(e,t,n,r,i,o){let a=t.type,s=$ge;if(a===U3||i===U3)s=e.timeFormat(r);else if(a===j3||i===j3)s=e.utcFormat(r);else if(vV(a)){let c=e.formatFloat(r);if(o||t.bins)s=c;else{let l=GX(t,n,!1);s=u=>l(u)?c(u):""}}else if(t.tickFormat){let c=t.domain();s=e.formatSpan(c[0],c[c.length-1],n,r)}else r&&(s=e.format(r));return s}function GX(e,t,n){let r=Uy(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=c=>{let l=c/Math.pow(i,Math.round(Math.log(c)/o));return l*i<i-.5&&(l*=i),l<=a};return n?r.filter(s):s}var fV={[$l]:"quantiles",[m7]:"thresholds",[g7]:"domain"},WX={[$l]:"quantiles",[m7]:"domain"};function MV(e,t){return e.bins?Gge(e.bins):e.type===Xa?GX(e,t,!0):fV[e.type]?qge(e[fV[e.type]]()):Uy(e,t)}function jge(e,t,n){let r=t[WX[t.type]](),i=r.length,o=i>1?r[1]-r[0]:r[0],a;for(a=1;a<i;++a)o=Math.min(o,r[a]-r[a-1]);return e.formatSpan(0,o,3*10,n)}function qge(e){let t=[-1/0].concat(e);return t.max=1/0,t}function Gge(e){let t=e.slice(0,-1);return t.max=Ue(e),t}var Wge=e=>fV[e.type]||e.bins;function wV(e,t,n,r,i,o,a){let s=WX[t.type]&&o!==U3&&o!==j3?jge(e,t,i):bV(e,t,n,i,o,a);return r===M7&&Wge(t)?Yge(s):r===Pge?Xge(s):Qge(s)}var Yge=e=>(t,n,r)=>{let i=FX(r[n+1],FX(r.max,1/0)),o=RX(t,e),a=RX(i,e);return o&&a?o+" \u2013 "+a:a?"< "+a:"\u2265 "+o},FX=(e,t)=>e??t,Xge=e=>(t,n)=>n?e(t):null,Qge=e=>t=>e(t),RX=(e,t)=>Number.isFinite(e)?t(e):null;function YX(e){let t=e.domain(),n=t.length-1,r=+t[0],i=+Ue(t),o=i-r;if(e.type===g7){let a=n?o/n:.1;r-=a,i+=a,o=i-r}return a=>(a-r)/o}function Kge(e,t,n,r){let i=r||t.type;return Q(n)&&Tge(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===U3?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===j3?e.utcFormat("%A, %d %B %Y, %X UTC"):wV(e,t,5,null,n,r,!0)}function SV(e,t,n){n=n||{};let r=Math.max(3,n.maxlen||7),i=Kge(e,t,n.format,n.formatType);if(Ry(t.type)){let o=MV(t).slice(1).map(i),a=o.length;return`${a} boundar${a===1?"y":"ies"}: ${o.join(", ")}`}else if(q3(t.type)){let o=t.domain(),a=o.length,s=a>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${a} value${a===1?"":"s"}: ${s}`}else{let o=t.domain();return`values from ${i(o[0])} to ${i(Ue(o))}`}}var CQ=0;function Zge(){CQ=0}var Zy="p_";function UV(e){return e&&e.gradient}function bQ(e,t,n){let r=e.gradient,i=e.id,o=r==="radial"?Zy:"";return i||(i=e.id="gradient_"+CQ++,r==="radial"?(e.x1=Qa(e.x1,.5),e.y1=Qa(e.y1,.5),e.r1=Qa(e.r1,0),e.x2=Qa(e.x2,.5),e.y2=Qa(e.y2,.5),e.r2=Qa(e.r2,.5),o=Zy):(e.x1=Qa(e.x1,0),e.y1=Qa(e.y1,0),e.x2=Qa(e.x2,1),e.y2=Qa(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function Qa(e,t){return e??t}function jV(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}var XX={basis:{curve:HA},"basis-closed":{curve:LA},"basis-open":{curve:AA},bundle:{curve:VA,tension:"beta",value:.85},cardinal:{curve:NA,tension:"tension",value:0},"cardinal-open":{curve:kA,tension:"tension",value:0},"cardinal-closed":{curve:_A,tension:"tension",value:0},"catmull-rom":{curve:TA,tension:"alpha",value:.5},"catmull-rom-closed":{curve:IA,tension:"alpha",value:.5},"catmull-rom-open":{curve:FA,tension:"alpha",value:.5},linear:{curve:Vl},"linear-closed":{curve:RA},monotone:{horizontal:$A,vertical:PA},natural:{curve:BA},step:{curve:UA},"step-after":{curve:qA},"step-before":{curve:jA}};function qV(e,t,n){var r=de(XX,e)&&XX[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}var Jge={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},eve=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,tve=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,nve=/^((\s+,?\s*)|(,\s*))/,rve=/^[01]/;function Ql(e){let t=[];return(e.match(eve)||[]).forEach(r=>{let i=r[0],o=i.toLowerCase(),a=Jge[o],s=ive(o,a,r.slice(1).trim()),c=s.length;if(c<a||c&&c%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...s.slice(0,a)]),c!==a){o==="m"&&(i=i==="M"?"L":"l");for(let l=a;l<c;l+=a)t.push([i,...s.slice(l,l+a)])}}),t}function ive(e,t,n){let r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){let a=e==="a"&&(o===3||o===4)?rve:tve,s=n.slice(i).match(a);if(s===null)throw Error("Invalid SVG path, incorrect parameter type");i+=s[0].length,r.push(+s[0]);let c=n.slice(i).match(nve);c!==null&&(i+=c[0].length)}return r}var K3=Math.PI/180,ove=1e-14,ql=Math.PI/2,Ka=Math.PI*2,Hu=Math.sqrt(3)/2,EV={},DV={},MQ=[].join;function ave(e,t,n,r,i,o,a,s,c){let l=MQ.call(arguments);if(EV[l])return EV[l];let u=a*K3,f=Math.sin(u),d=Math.cos(u);n=Math.abs(n),r=Math.abs(r);let p=d*(s-e)*.5+f*(c-t)*.5,h=d*(c-t)*.5-f*(s-e)*.5,m=p*p/(n*n)+h*h/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);let g=d/n,v=f/n,y=-f/r,C=d/r,b=g*s+v*c,M=y*s+C*c,S=g*e+v*t,w=y*e+C*t,D=1/((S-b)*(S-b)+(w-M)*(w-M))-.25;D<0&&(D=0);let H=Math.sqrt(D);o==i&&(H=-H);let A=.5*(b+S)-H*(w-M),j=.5*(M+w)+H*(S-b),V=Math.atan2(M-j,b-A),N=Math.atan2(w-j,S-A)-V;N<0&&o===1?N+=Ka:N>0&&o===0&&(N-=Ka);let I=Math.ceil(Math.abs(N/(ql+.001))),G=[];for(let X=0;X<I;++X){let J=V+X*N/I,we=V+(X+1)*N/I;G[X]=[A,j,J,we,n,r,f,d]}return EV[l]=G}function sve(e){let t=MQ.call(e);if(DV[t])return DV[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7];let u=l*a,f=-c*s,d=c*a,p=l*s,h=Math.cos(i),m=Math.sin(i),g=Math.cos(o),v=Math.sin(o),y=.5*(o-i),C=Math.sin(y*.5),b=8/3*C*C/Math.sin(y),M=n+h-b*m,S=r+m+b*h,w=n+g,E=r+v,D=w+b*v,H=E-b*g;return DV[t]=[u*M+f*S,d*M+p*S,u*D+f*H,d*D+p*H,u*w+f*E,d*w+p*E]}var Xo=["l",0,0,0,0,0,0,0];function cve(e,t,n){let r=Xo[0]=e[0];if(r==="a"||r==="A")Xo[1]=t*e[1],Xo[2]=n*e[2],Xo[3]=e[3],Xo[4]=e[4],Xo[5]=e[5],Xo[6]=t*e[6],Xo[7]=n*e[7];else if(r==="h"||r==="H")Xo[1]=t*e[1];else if(r==="v"||r==="V")Xo[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)Xo[i]=(i%2==1?t:n)*e[i];return Xo}function Au(e,t,n,r,i,o){var a,s=null,c=0,l=0,u=0,f=0,d,p,h,m,g=0,v=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var y=0,C=t.length;y<C;++y){switch(a=t[y],(i!==1||o!==1)&&(a=cve(a,i,o)),a[0]){case"l":c+=a[1],l+=a[2],e.lineTo(c+n,l+r);break;case"L":c=a[1],l=a[2],e.lineTo(c+n,l+r);break;case"h":c+=a[1],e.lineTo(c+n,l+r);break;case"H":c=a[1],e.lineTo(c+n,l+r);break;case"v":l+=a[1],e.lineTo(c+n,l+r);break;case"V":l=a[1],e.lineTo(c+n,l+r);break;case"m":c+=a[1],l+=a[2],g=c,v=l,e.moveTo(c+n,l+r);break;case"M":c=a[1],l=a[2],g=c,v=l,e.moveTo(c+n,l+r);break;case"c":d=c+a[5],p=l+a[6],u=c+a[3],f=l+a[4],e.bezierCurveTo(c+a[1]+n,l+a[2]+r,u+n,f+r,d+n,p+r),c=d,l=p;break;case"C":c=a[5],l=a[6],u=a[3],f=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,u+n,f+r,c+n,l+r);break;case"s":d=c+a[3],p=l+a[4],u=2*c-u,f=2*l-f,e.bezierCurveTo(u+n,f+r,c+a[1]+n,l+a[2]+r,d+n,p+r),u=c+a[1],f=l+a[2],c=d,l=p;break;case"S":d=a[3],p=a[4],u=2*c-u,f=2*l-f,e.bezierCurveTo(u+n,f+r,a[1]+n,a[2]+r,d+n,p+r),c=d,l=p,u=a[1],f=a[2];break;case"q":d=c+a[3],p=l+a[4],u=c+a[1],f=l+a[2],e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p;break;case"Q":d=a[3],p=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,d+n,p+r),c=d,l=p,u=a[1],f=a[2];break;case"t":d=c+a[1],p=l+a[2],s[0].match(/[QqTt]/)===null?(u=c,f=l):s[0]==="t"?(u=2*c-h,f=2*l-m):s[0]==="q"&&(u=2*c-u,f=2*l-f),h=u,m=f,e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p,u=c+a[1],f=l+a[2];break;case"T":d=a[1],p=a[2],u=2*c-u,f=2*l-f,e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p;break;case"a":QX(e,c+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+c+n,a[7]+l+r]),c+=a[6],l+=a[7];break;case"A":QX(e,c+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),c=a[6],l=a[7];break;case"z":case"Z":c=g,l=v,e.closePath();break}s=a}}function QX(e,t,n,r){let i=ave(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){let a=sve(i[o]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}var KX=.5773502691896257,ZX={circle:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Ka)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Hu*n,i=r-n*KX,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Hu*n,i=r-n*KX;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Hu*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Hu*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Hu*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Hu*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function wQ(e){return de(ZX,e)?ZX[e]:lve(e)}var zV={};function lve(e){if(!de(zV,e)){let t=Ql(e);zV[e]={draw:function(n,r){Au(n,t,0,0,Math.sqrt(r)/2)}}}return zV[e]}var G3=.448084975506;function uve(e){return e.x}function fve(e){return e.y}function dve(e){return e.width}function pve(e){return e.height}function mc(e){return typeof e=="function"?e:()=>+e}function jy(e,t,n){return Math.max(t,Math.min(e,n))}function SQ(){var e=uve,t=fve,n=dve,r=pve,i=mc(0),o=i,a=i,s=i,c=null;function l(u,f,d){var p,h=f??+e.call(this,u),m=d??+t.call(this,u),g=+n.call(this,u),v=+r.call(this,u),y=Math.min(g,v)/2,C=jy(+i.call(this,u),0,y),b=jy(+o.call(this,u),0,y),M=jy(+a.call(this,u),0,y),S=jy(+s.call(this,u),0,y);if(c||(c=p=Al()),C<=0&&b<=0&&M<=0&&S<=0)c.rect(h,m,g,v);else{var w=h+g,E=m+v;c.moveTo(h+C,m),c.lineTo(w-b,m),c.bezierCurveTo(w-G3*b,m,w,m+G3*b,w,m+b),c.lineTo(w,E-S),c.bezierCurveTo(w,E-G3*S,w-G3*S,E,w-S,E),c.lineTo(h+M,E),c.bezierCurveTo(h+G3*M,E,h,E-G3*M,h,E-M),c.lineTo(h,m+C),c.bezierCurveTo(h,m+G3*C,h+G3*C,m,h+C,m),c.closePath()}if(p)return c=null,p+""||null}return l.x=function(u){return arguments.length?(e=mc(u),l):e},l.y=function(u){return arguments.length?(t=mc(u),l):t},l.width=function(u){return arguments.length?(n=mc(u),l):n},l.height=function(u){return arguments.length?(r=mc(u),l):r},l.cornerRadius=function(u,f,d,p){return arguments.length?(i=mc(u),o=f!=null?mc(f):i,s=d!=null?mc(d):i,a=p!=null?mc(p):o,l):i},l.context=function(u){return arguments.length?(c=u??null,l):c},l}function EQ(){var e,t,n,r,i=null,o,a,s,c;function l(f,d,p){let h=p/2;if(o){var m=s-d,g=f-a;if(m||g){var v=Math.hypot(m,g),y=(m/=v)*c,C=(g/=v)*c,b=Math.atan2(g,m);i.moveTo(a-y,s-C),i.lineTo(f-m*h,d-g*h),i.arc(f,d,h,b-Math.PI,b),i.lineTo(a+y,s+C),i.arc(a,s,c,b,b+Math.PI)}else i.arc(f,d,h,0,Ka);i.closePath()}else o=1;a=f,s=d,c=h}function u(f){var d,p=f.length,h,m=!1,g;for(i==null&&(i=g=Al()),d=0;d<=p;++d)!(d<p&&r(h=f[d],d,f))===m&&(m=!m)&&(o=0),m&&l(+e(h,d,f),+t(h,d,f),+n(h,d,f));if(g)return i=null,g+""||null}return u.x=function(f){return arguments.length?(e=f,u):e},u.y=function(f){return arguments.length?(t=f,u):t},u.size=function(f){return arguments.length?(n=f,u):n},u.defined=function(f){return arguments.length?(r=f,u):r},u.context=function(f){return arguments.length?(f==null?i=null:i=f,u):i},u}function _7(e,t){return e??t}var k7=e=>e.x||0,T7=e=>e.y||0,hve=e=>e.width||0,mve=e=>e.height||0,gve=e=>(e.x||0)+(e.width||0),vve=e=>(e.y||0)+(e.height||0),yve=e=>e.startAngle||0,xve=e=>e.endAngle||0,Cve=e=>e.padAngle||0,bve=e=>e.innerRadius||0,Mve=e=>e.outerRadius||0,wve=e=>e.cornerRadius||0,Sve=e=>_7(e.cornerRadiusTopLeft,e.cornerRadius)||0,Eve=e=>_7(e.cornerRadiusTopRight,e.cornerRadius)||0,Dve=e=>_7(e.cornerRadiusBottomRight,e.cornerRadius)||0,zve=e=>_7(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Hve=e=>_7(e.size,64),Lve=e=>e.size||1,ux=e=>e.defined!==!1,Ave=e=>wQ(e.shape||"circle"),Vve=zA().startAngle(yve).endAngle(xve).padAngle(Cve).innerRadius(bve).outerRadius(Mve).cornerRadius(wve),Nve=ry().x(k7).y1(T7).y0(vve).defined(ux),_ve=ry().y(T7).x1(k7).x0(gve).defined(ux),kve=qd().x(k7).y(T7).defined(ux),Tve=SQ().x(k7).y(T7).width(hve).height(mve).cornerRadius(Sve,Eve,Dve,zve),Ive=iy().type(Ave).size(Hve),Fve=EQ().x(k7).y(T7).defined(ux).size(Lve);function GV(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Rve(e,t){return Vve.context(e)(t)}function Ove(e,t){let n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?_ve:Nve).curve(qV(r,n.orient,n.tension)).context(e)(t)}function Pve(e,t){let n=t[0],r=n.interpolate||"linear";return kve.curve(qV(r,n.orient,n.tension)).context(e)(t)}function _u(e,t,n,r){return Tve.context(e)(t,n,r)}function $ve(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Bve(e,t){return Ive.context(e)(t)}function Uve(e,t){return Fve.context(e)(t)}var DQ=1;function zQ(){DQ=1}function WV(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+DQ++),a=i.clipping[o]||(i.clipping[o]={id:o});return ke(r)?a.path=r(null):GV(n)?a.path=_u(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function Vn(e){this.clear(),e&&this.union(e)}Vn.prototype={clone(){return new Vn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){let r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),c=Math.sin(e),l=t-t*s+n*c,u=n-t*c-n*s;return[s*r-c*i+l,c*r+s*i+u,s*r-c*a+l,c*r+s*a+u,s*o-c*i+l,c*o+s*i+u,s*o-c*a+l,c*o+s*a+u]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function I7(e){this.mark=e,this.bounds=this.bounds||new Vn}function F7(e){I7.call(this,e),this.items=this.items||[]}ee(F7,I7);function YV(e){this._pending=0,this._loader=e||cu()}function JX(e){e._pending+=1}function w7(e){e._pending-=1}YV.prototype={pending(){return this._pending},sanitizeURL(e){let t=this;return JX(t),t._loader.sanitize(e,{context:"href"}).then(n=>(w7(t),n)).catch(()=>(w7(t),null))},loadImage(e){let t=this,n=IY();return JX(t),t._loader.sanitize(e,{context:"image"}).then(r=>{let i=r.href;if(!i||!n)throw{url:i};let o=new n,a=de(r,"crossOrigin")?r.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>w7(t),o.onerror=()=>w7(t),o.src=i,o}).catch(r=>(w7(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){let e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function Za(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){let r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?jve(t,r):0))}return e}function jve(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}var qve=Ka-1e-8,fx,qy,Gy,Yl,NV,Wy,_V,kV,W3=(e,t)=>fx.add(e,t),Yy=(e,t)=>W3(qy=e,Gy=t),eQ=e=>W3(e,fx.y1),tQ=e=>W3(fx.x1,e),Gl=(e,t)=>NV*e+_V*t,Wl=(e,t)=>Wy*e+kV*t,HV=(e,t)=>W3(Gl(e,t),Wl(e,t)),LV=(e,t)=>Yy(Gl(e,t),Wl(e,t));function R7(e,t){return fx=e,t?(Yl=t*K3,NV=kV=Math.cos(Yl),Wy=Math.sin(Yl),_V=-Wy):(NV=kV=1,Yl=Wy=_V=0),Gve}var Gve={beginPath(){},closePath(){},moveTo:LV,lineTo:LV,rect(e,t,n,r){Yl?(HV(e+n,t),HV(e+n,t+r),HV(e,t+r),LV(e,t)):(W3(e+n,t+r),Yy(e,t))},quadraticCurveTo(e,t,n,r){let i=Gl(e,t),o=Wl(e,t),a=Gl(n,r),s=Wl(n,r);nQ(qy,i,a,eQ),nQ(Gy,o,s,tQ),Yy(a,s)},bezierCurveTo(e,t,n,r,i,o){let a=Gl(e,t),s=Wl(e,t),c=Gl(n,r),l=Wl(n,r),u=Gl(i,o),f=Wl(i,o);rQ(qy,a,c,u,eQ),rQ(Gy,s,l,f,tQ),Yy(u,f)},arc(e,t,n,r,i,o){if(r+=Yl,i+=Yl,qy=n*Math.cos(i)+e,Gy=n*Math.sin(i)+t,Math.abs(i-r)>qve)W3(e-n,t-n),W3(e+n,t+n);else{let a=l=>W3(n*Math.cos(l)+e,n*Math.sin(l)+t),s,c;if(a(r),a(i),i!==r)if(r=r%Ka,r<0&&(r+=Ka),i=i%Ka,i<0&&(i+=Ka),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=Ka,s=r-r%ql,c=0;c<4&&s>i;++c,s-=ql)a(s);else for(s=r-r%ql+ql,c=0;c<4&&s<i;++c,s=s+ql)a(s)}}};function nQ(e,t,n,r){let i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function rQ(e,t,n,r,i){let o=r-e+3*t-3*n,a=e+n-2*t,s=e-t,c=0,l=0,u;Math.abs(o)>ove?(u=a*a+s*o,u>=0&&(u=Math.sqrt(u),c=(-a+u)/o,l=(-a-u)/o)):c=.5*s/a,0<c&&c<1&&i(iQ(c,e,t,n,r)),0<l&&l<1&&i(iQ(l,e,t,n,r))}function iQ(e,t,n,r,i){let o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var Q3=(Q3=Go(1,1))?Q3.getContext("2d"):null,TV=new Vn;function XV(e){return function(t,n){if(!Q3)return!0;e(Q3,t),TV.clear().union(t.bounds).intersect(n).round();let{x1:r,y1:i,x2:o,y2:a}=TV;for(let s=i;s<=a;++s)for(let c=r;c<=o;++c)if(Q3.isPointInPath(c,s))return!0;return!1}}function QV(e,t){return t.contains(e.x||0,e.y||0)}function HQ(e,t){let n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(TV.set(n,r,n+i,r+o))}function LQ(e,t){let n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return Lu(t,n,r,i,o)}function Lu(e,t,n,r,i){let{x1:o,y1:a,x2:s,y2:c}=e,l=r-t,u=i-n,f=0,d=1,p,h,m,g;for(g=0;g<4;++g){if(g===0&&(p=-l,h=-(o-t)),g===1&&(p=l,h=s-t),g===2&&(p=-u,h=-(a-n)),g===3&&(p=u,h=c-n),Math.abs(p)<1e-10&&h<0)return!1;if(m=h/p,p<0){if(m>d)return!1;m>f&&(f=m)}else if(p>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function Vu(e,t){e.globalCompositeOperation=t.blend||"source-over"}function k2(e,t){return e??t}function oQ(e,t){let n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Wve(e,t,n){let r=n.width(),i=n.height(),o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+k2(t.x1,.5)*r,n.y1+k2(t.y1,.5)*i,Math.max(r,i)*k2(t.r1,0),n.x1+k2(t.x2,.5)*r,n.y1+k2(t.y2,.5)*i,Math.max(r,i)*k2(t.r2,.5));else{let a=k2(t.x1,0),s=k2(t.y1,0),c=k2(t.x2,1),l=k2(t.y2,0);if(a===c||s===l||r===i)o=e.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+c*r,n.y1+l*i);else{let u=Go(Math.ceil(r),Math.ceil(i)),f=u.getContext("2d");return f.scale(r,i),f.fillStyle=oQ(f.createLinearGradient(a,s,c,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(u,"no-repeat")}}return oQ(o,t.stops)}function AQ(e,t,n){return UV(n)?Wve(e,n,t.bounds):n}function Jy(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=AQ(e,t,t.fill),!0):!1}var Yve=[];function Nu(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=AQ(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Yve),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Xve(e,t){return e.zindex-t.zindex||e.index-t.index}function KV(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Xve)}function I2(e,t){var n=e.items,r,i;if(!n||!n.length)return;let o=KV(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function ex(e,t){var n=e.items,r,i;if(!n||!n.length)return null;let o=KV(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function ZV(e){return function(t,n,r){I2(n,i=>{(!r||r.intersects(i.bounds))&&VQ(e,t,i,i)})}}function Qve(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&VQ(e,t,n.items[0],n.items)}}function VQ(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Vu(t,n),n.fill&&Jy(t,n,i)&&t.fill(),n.stroke&&Nu(t,n,i)&&t.stroke()))}function dx(e){return e=e||pr,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,ex(n,s=>{let c=s.bounds;if(!(c&&!c.contains(o,a)||!c)&&e(t,s,r,i,o,a))return s})}}function O7(e,t){return function(n,r,i,o){var a=Array.isArray(r)?r[0]:r,s=t??a.fill,c=a.stroke&&n.isPointInStroke,l,u;return c&&(l=a.strokeWidth,u=a.strokeCap,n.lineWidth=l??1,n.lineCap=u??"butt"),e(n,r)?!1:s&&n.isPointInPath(i,o)||c&&n.isPointInStroke(i,o)}}function JV(e){return dx(O7(e))}function Xl(e,t){return"translate("+e+","+t+")"}function eN(e){return"rotate("+e+")"}function Kve(e,t){return"scale("+e+","+t+")"}function NQ(e){return Xl(e.x||0,e.y||0)}function Zve(e){return Xl(e.x||0,e.y||0)+(e.angle?" "+eN(e.angle):"")}function Jve(e){return Xl(e.x||0,e.y||0)+(e.angle?" "+eN(e.angle):"")+(e.scaleX||e.scaleY?" "+Kve(e.scaleX||1,e.scaleY||1):"")}function tN(e,t,n){function r(a,s){a("transform",Zve(s)),a("d",t(null,s))}function i(a,s){return t(R7(a,s.angle),s),Za(a,s).translate(s.x||0,s.y||0)}function o(a,s){var c=s.x||0,l=s.y||0,u=s.angle||0;a.translate(c,l),u&&a.rotate(u*=K3),a.beginPath(),t(a,s),u&&a.rotate(-u),a.translate(-c,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:ZV(o),pick:JV(o),isect:n||XV(o)}}var eye=tN("arc",Rve);function tye(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,a,s;--i>=0;)e[i].defined!==!1&&(s=Math.abs(e[i][r]-n),s<o&&(o=s,a=e[i]));return a}function nye(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,a;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],a=i*i+o*o,a<n))return e[r];return null}function rye(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function nN(e,t,n){function r(c,l){var u=l.mark.items;u.length&&c("d",t(null,u))}function i(c,l){var u=l.items;return u.length===0?c:(t(R7(c),u),Za(c,u[0]))}function o(c,l){c.beginPath(),t(c,l)}let a=O7(o);function s(c,l,u,f,d,p){var h=l.items,m=l.bounds;return!h||!h.length||m&&!m.contains(d,p)?null:(u*=c.pixelRatio,f*=c.pixelRatio,a(c,h,u,f)?h[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Qve(o),pick:s,isect:QV,tip:n}}var iye=nN("area",Ove,tye);function oye(e,t){var n=t.clip;e.save(),ke(n)?(e.beginPath(),n(e),e.clip()):_Q(e,t.group)}function _Q(e,t){e.beginPath(),GV(t)?_u(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function kQ(e){let t=k2(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function aye(e,t){e("transform",NQ(t))}function TQ(e,t){let n=kQ(t);e("d",_u(null,t,n,n))}function sye(e,t){e("class","background"),e("aria-hidden",!0),TQ(e,t)}function cye(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?TQ(e,t):e("d","")}function lye(e,t,n){let r=t.clip?WV(n,t,t):null;e("clip-path",r)}function uye(e,t){if(!t.clip&&t.items){let n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Za(e,t),e.translate(t.x||0,t.y||0)}function L7(e,t,n,r){let i=kQ(t);e.beginPath(),_u(e,t,(n||0)+i,(r||0)+i)}var fye=O7(L7),dye=O7(L7,!1),pye=O7(L7,!0);function hye(e,t,n,r){I2(t,i=>{let o=i.x||0,a=i.y||0,s=i.strokeForeground,c=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&c&&(L7(e,i,o,a),Vu(e,i),i.fill&&Jy(e,i,c)&&e.fill(),i.stroke&&!s&&Nu(e,i,c)&&e.stroke()),e.save(),e.translate(o,a),i.clip&&_Q(e,i),n&&n.translate(-o,-a),I2(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(o,a),e.restore(),s&&i.stroke&&c&&(L7(e,i,o,a),Vu(e,i),Nu(e,i,c)&&e.stroke())})}function mye(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;let a=n*e.pixelRatio,s=r*e.pixelRatio;return ex(t,c=>{let l,u,f,d=c.bounds;if(d&&!d.contains(i,o))return;u=c.x||0,f=c.y||0;let p=u+(c.width||0),h=f+(c.height||0),m=c.clip;if(m&&(i<u||i>p||o<f||o>h))return;if(e.save(),e.translate(u,f),u=i-u,f=o-f,m&&GV(c)&&!pye(e,c,a,s))return e.restore(),null;let g=c.strokeForeground,v=t.interactive!==!1;return v&&g&&c.stroke&&dye(e,c,a,s)?(e.restore(),c):(l=ex(c,y=>gye(y,u,f)?this.pick(y,n,r,u,f):null),!l&&v&&(c.fill||!g&&c.stroke)&&fye(e,c,a,s)&&(l=c),e.restore(),l||null)})}function gye(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var vye={type:"group",tag:"g",nested:!1,attr:aye,bound:uye,draw:hye,pick:mye,isect:HQ,content:lye,background:sye,foreground:cye},A7={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function rN(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function iN(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function oN(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function px(e,t){return e==="center"?t/2:e==="right"?t:0}function hx(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function yye(e,t,n){let r=rN(t,n),i=iN(t,r),o=oN(t,r),a=(t.x||0)-px(t.align,i),s=(t.y||0)-hx(t.baseline,o),c=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",c,A7["xmlns:xlink"],"xlink:href"),e("transform",Xl(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function xye(e,t){let n=t.image,r=iN(t,n),i=oN(t,n),o=(t.x||0)-px(t.align,r),a=(t.y||0)-hx(t.baseline,i);return e.set(o,a,o+r,a+i)}function Cye(e,t,n){I2(t,r=>{if(n&&!n.intersects(r.bounds))return;let i=rN(r,this),o=iN(r,i),a=oN(r,i);if(o===0||a===0)return;let s=(r.x||0)-px(r.align,o),c=(r.y||0)-hx(r.baseline,a),l,u,f,d;r.aspect!==!1&&(u=i.width/i.height,f=r.width/r.height,u===u&&f===f&&u!==f&&(f<u?(d=o/u,c+=(a-d)/2,a=d):(d=a*u,s+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(Vu(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,s,c,o,a))})}var bye={type:"image",tag:"image",nested:!1,attr:yye,bound:xye,draw:Cye,pick:dx(),isect:pr,get:rN,xOffset:px,yOffset:hx},Mye=nN("line",Pve,nye);function wye(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Jve(t)),e("d",t.path)}function Xy(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*K3,c=t.pathCache;(!c||c.path!==n)&&((t.pathCache=c=Ql(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),Au(e,c,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):Au(e,c,r,i,o,a)}function Sye(e,t){return Xy(R7(e,t.angle),t)?e.set(0,0,0,0):Za(e,t,!0)}var Eye={type:"path",tag:"path",nested:!1,attr:wye,bound:Sye,draw:ZV(Xy),pick:JV(Xy),isect:XV(Xy)};function Dye(e,t){e("d",_u(null,t))}function zye(e,t){var n,r;return Za(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function aQ(e,t){e.beginPath(),_u(e,t)}var Hye={type:"rect",tag:"path",nested:!1,attr:Dye,bound:zye,draw:ZV(aQ),pick:JV(aQ),isect:HQ};function Lye(e,t){e("transform",NQ(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Aye(e,t){var n,r;return Za(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function IQ(e,t,n){var r,i,o,a;return t.stroke&&Nu(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0):!1}function Vye(e,t,n){I2(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&IQ(e,r,i)&&(Vu(e,r),e.stroke())}})}function Nye(e,t,n,r){return e.isPointInStroke?IQ(e,t,1)&&e.isPointInStroke(n,r):!1}var _ye={type:"rule",tag:"line",nested:!1,attr:Lye,bound:Aye,draw:Vye,pick:dx(Nye),isect:LQ},kye=tN("shape",$ve),Tye=tN("symbol",Bve,QV),sQ=HH(),V1={height:Ja,measureWidth:aN,estimateWidth:tx,width:tx,canvas:FQ};FQ(!0);function FQ(e){V1.width=e&&Q3?aN:tx}function tx(e,t){return RQ(J3(e,t),Ja(e))}function RQ(e,t){return~~(.8*e.length*t)}function aN(e,t){return Ja(e)<=0||!(t=J3(e,t))?0:OQ(t,gx(e))}function OQ(e,t){let n=`(${t}) ${e}`,r=sQ.get(n);return r===void 0&&(Q3.font=t,r=Q3.measureText(e).width,sQ.set(n,r)),r}function Ja(e){return e.fontSize!=null?+e.fontSize||0:11}function Z3(e){return e.lineHeight!=null?e.lineHeight:Ja(e)+2}function Iye(e){return F(e)?e.length>1?e:e[0]:e}function P7(e){return Iye(e.lineBreak&&e.text&&!F(e.text)?e.text.split(e.lineBreak):e.text)}function mx(e){let t=P7(e);return(F(t)?t.length-1:0)*Z3(e)}function J3(e,t){let n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Rye(e,n):n}function Fye(e){if(V1.width===aN){let t=gx(e);return n=>OQ(n,t)}else if(V1.width===tx){let t=Ja(e);return n=>RQ(n,t)}else return t=>V1.width(e,t)}function Rye(e,t){var n=+e.limit,r=Fye(e);if(r(t)<n)return t;var i=e.ellipsis||"\u2026",o=e.dir==="rtl",a=0,s=t.length,c;if(n-=r(i),o){for(;a<s;)c=a+s>>>1,r(t.slice(c))>n?a=c+1:s=c;return i+t.slice(a)}else{for(;a<s;)c=1+(a+s>>>1),r(t.slice(0,c))<n?a=c:s=c-1;return t.slice(0,a)+i}}function $7(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function gx(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Ja(e)+"px "+$7(e,t)}function sN(e){var t=e.baseline,n=Ja(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Z3(e):t==="line-bottom"?.29*n-.5*Z3(e):0)}var Oye={left:"start",center:"middle",right:"end"},D7=new Vn;function vx(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-ql,t+=r*Math.cos(i),n+=r*Math.sin(i)),D7.x1=t,D7.y1=n,D7}function Pye(e,t){var n=t.dx||0,r=(t.dy||0)+sN(t),i=vx(t),o=i.x1,a=i.y1,s=t.angle||0,c;e("text-anchor",Oye[t.align]||"start"),s?(c=Xl(o,a)+" "+eN(s),(n||r)&&(c+=" "+Xl(n,r))):c=Xl(o+n,a+r),e("transform",c)}function cN(e,t,n){var r=V1.height(t),i=t.align,o=vx(t),a=o.x1,s=o.y1,c=t.dx||0,l=(t.dy||0)+sN(t)-Math.round(.8*r),u=P7(t),f;if(F(u)?(r+=Z3(t)*(u.length-1),f=u.reduce((d,p)=>Math.max(d,V1.width(t,p)),0)):f=V1.width(t,u),i==="center"?c-=f/2:i==="right"&&(c-=f),e.set(c+=a,l+=s,c+f,l+r),t.angle&&!n)e.rotate(t.angle*K3,a,s);else if(n===2)return e.rotatedPoints(t.angle*K3,a,s);return e}function $ye(e,t,n){I2(t,r=>{var i=r.opacity==null?1:r.opacity,o,a,s,c,l,u,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=gx(r),e.textAlign=r.align||"left",o=vx(r),a=o.x1,s=o.y1,r.angle&&(e.save(),e.translate(a,s),e.rotate(r.angle*K3),a=s=0),a+=r.dx||0,s+=(r.dy||0)+sN(r),u=P7(r),Vu(e,r),F(u))for(l=Z3(r),c=0;c<u.length;++c)f=J3(r,u[c]),r.fill&&Jy(e,r,i)&&e.fillText(f,a,s),r.stroke&&Nu(e,r,i)&&e.strokeText(f,a,s),s+=l;else f=J3(r,u),r.fill&&Jy(e,r,i)&&e.fillText(f,a,s),r.stroke&&Nu(e,r,i)&&e.strokeText(f,a,s);r.angle&&e.restore()}})}function Bye(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=vx(t),s=a.x1,c=a.y1,l=cN(D7,t,1),u=-t.angle*K3,f=Math.cos(u),d=Math.sin(u),p=f*i-d*o+(s-f*s+d*c),h=d*i+f*o+(c-d*s-f*c);return l.contains(p,h)}function Uye(e,t){let n=cN(D7,e,2);return Lu(t,n[0],n[1],n[2],n[3])||Lu(t,n[0],n[1],n[4],n[5])||Lu(t,n[4],n[5],n[6],n[7])||Lu(t,n[2],n[3],n[6],n[7])}var jye={type:"text",tag:"text",nested:!1,attr:Pye,bound:cN,draw:$ye,pick:dx(Bye),isect:Uye},qye=nN("trail",Uve,rye),n1={arc:eye,area:iye,group:vye,image:bye,line:Mye,path:Eye,rect:Hye,rule:_ye,shape:kye,symbol:Tye,text:jye,trail:qye};function IV(e,t,n){var r=n1[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Vn),e,n)}var cQ={mark:null};function PQ(e,t,n){var r=n1[e.marktype],i=r.bound,o=e.items,a=o&&o.length,s,c,l,u;if(r.nested)return a?l=o[0]:(cQ.mark=e,l=cQ),u=IV(l,i,n),t=t&&t.union(u)||u,t;if(t=t||e.bounds&&e.bounds.clear()||new Vn,a)for(s=0,c=o.length;s<c;++s)t.union(IV(o[s],i,n));return e.bounds=t}var Gye=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function $Q(e,t){return JSON.stringify(e,Gye,t)}function BQ(e){let t=typeof e=="string"?JSON.parse(e):e;return UQ(t)}function UQ(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&UQ(n[i]);return t&&PQ(e),e}function yx(e){arguments.length?this.root=BQ(e):(this.root=jQ({marktype:"group",name:"root",role:"frame"}),this.root.items=[new F7(this.root)])}yx.prototype={toJSON(e){return $Q(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];let r=jQ(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function jQ(e,t){let n={bounds:new Vn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Y3(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function lN(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function vr(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=Y3(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function Qo(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function qQ(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function B7(e,t){let n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Wye(e,t,n,r){var i=e&&e.mark,o,a;if(i&&(o=n1[i.marktype]).tip){for(a=B7(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=o.tip(i.items,a)}return e}function e4(e,t){this._active=null,this._handlers={},this._loader=e||cu(),this._tooltip=t||Yye}function Yye(e,t,n,r){e.element().setAttribute("title",r||"")}e4.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){let t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(let r in t)n.push(...t[r]);return n},eventName(e){let t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{let i=new MouseEvent(e.type,e),o=Y3(null,"a");for(let a in r)o.setAttribute(a,r[a]);o.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=Wye(t,e,this.canvas(),this._origin);let r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){let t=this.canvas();if(!t)return;let n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),a=i.height(),s=i.x1+r[0]+n.left,c=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,c+=e.y||0;return{x:s,y:c,width:o,height:a,left:s,top:c,right:s+o,bottom:c+a}}};function so(e){this._el=null,this._bgcolor=null,this._loader=new YV(e)}so.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e,t){let n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){let n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){let i=n._call;n._ready=n._loader.ready().then(o=>{o&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};var Xye="keydown",Qye="keypress",Kye="keyup",GQ="dragenter",Qy="dragleave",WQ="dragover",FV="pointerdown",Zye="pointerup",nx="pointermove",z7="pointerout",YQ="pointerover",RV="mousedown",Jye="mouseup",XQ="mousemove",OV="mouseout",QQ="mouseover",rx="click",exe="dblclick",txe="wheel",KQ="mousewheel",ix="touchstart",ox="touchmove",ax="touchend",nxe=[Xye,Qye,Kye,GQ,Qy,WQ,FV,Zye,nx,z7,YQ,RV,Jye,XQ,OV,QQ,rx,exe,txe,KQ,ix,ox,ax],PV=nx,V7=z7,$V=rx;function vc(e,t){e4.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}var rxe=e=>e===ix||e===ox||e===ax?[ix,ox,ax]:[e];function lQ(e,t){rxe(t).forEach(n=>ixe(e,n))}function ixe(e,t){let n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function E7(e,t,n){t.forEach(r=>e.fire(r,n))}function uQ(e,t,n){return function(r){let i=this._active,o=this.pickEvent(r);o===i?E7(this,e,r):((!i||!i.exit)&&E7(this,n,r),this._active=o,E7(this,t,r),E7(this,e,r))}}function fQ(e){return function(t){E7(this,e,t),this._active=null}}ee(vc,e4,{initialize(e,t,n){return this._canvas=e&&lN(e,"canvas"),[rx,RV,FV,nx,z7,Qy].forEach(r=>lQ(this,r)),e4.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:nxe,DOMMouseScroll(e){this.fire(KQ,e)},pointermove:uQ([nx,XQ],[YQ,QQ],[z7,OV]),dragover:uQ([WQ],[GQ],[Qy]),pointerout:fQ([z7,OV]),dragleave:fQ([Qy]),pointerdown(e){this._down=this._active,this.fire(FV,e)},mousedown(e){this._down=this._active,this.fire(RV,e)},click(e){this._down===this._active&&(this.fire(rx,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(ix,e,!0)},touchmove(e){this.fire(ox,e,!0)},touchend(e){this.fire(ax,e,!0),this._touch=null},fire(e,t,n){let r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===$V&&r&&r.href?this.handleHref(t,r,r.href):(e===PV||e===V7)&&this.handleTooltip(t,r,e!==V7),i)for(let o=0,a=i.length;o<a;++o)i[o].handler.call(this._obj,t,r)},on(e,t){let n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(lQ(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){let n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){let t=B7(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){let o=this.context();return n1[e.marktype].pick.call(this,o,e,t,n,r,i)}});function oxe(){return typeof window<"u"&&window.devicePixelRatio||1}function axe(e,t,n,r,i,o){let a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,s=e.getContext("2d"),c=a?oxe():i;e.width=t*c,e.height=n*c;for(let l in o)s[l]=o[l];return a&&c!==1&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=c,s.setTransform(c,0,0,c,c*r[0],c*r[1]),e}function N7(e){so.call(this,e),this._options={},this._redraw=!1,this._dirty=new Vn,this._tempb=new Vn}var dQ=so.prototype,sxe=(e,t,n)=>new Vn().set(0,0,t,n).translate(-e[0],-e[1]);function cxe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}ee(N7,so,{initialize(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Go(1,1,this._options.type),e&&this._canvas&&(Qo(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),dQ.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(dQ.resize.call(this,e,t,n,r),this._canvas)axe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let i=this._options.externalContext;i||$("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){let t=this._tempb.clear().union(e.bounds),n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){let n=this.context(),r=this._origin,i=this._width,o=this._height,a=this._dirty,s=sxe(r,i,o);n.save();let c=this._redraw||a.empty()?(this._redraw=!1,s.expand(1)):cxe(n,s.intersect(a),r);return this.clear(-r[0],-r[1],i,o),this.draw(n,e,c,t),n.restore(),a.clear(),this},draw(e,t,n,r){if(t.marktype!=="group"&&r!=null&&!r.includes(t.marktype))return;let i=n1[t.marktype];t.clip&&oye(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()},clear(e,t,n,r){let i=this._options,o=this.context();i.type!=="pdf"&&!i.externalContext&&o.clearRect(e,t,n,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});function uN(e,t){e4.call(this,e,t);let n=this;n._hrefHandler=BV(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=BV(n,(r,i)=>{n.handleTooltip(r,i,r.type!==V7)})}var BV=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};ee(uN,e4,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener($V,this._hrefHandler),r.removeEventListener(PV,this._tooltipHandler),r.removeEventListener(V7,this._tooltipHandler)),this._svg=r=e&&lN(e,"svg"),r&&(r.addEventListener($V,this._hrefHandler),r.addEventListener(PV,this._tooltipHandler),r.addEventListener(V7,this._tooltipHandler)),e4.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){let n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){let o={type:e,handler:t,listener:BV(this,t)};(r[n]||(r[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){let n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});var ZQ="aria-hidden",fN="aria-label",dN="role",pN="aria-roledescription",JQ="graphics-object",hN="graphics-symbol",eK=(e,t,n)=>({[dN]:e,[pN]:t,[fN]:n||void 0}),lxe=hr(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),pQ={axis:{desc:"axis",caption:dxe},legend:{desc:"legend",caption:pxe},"title-text":{desc:"title",caption:e=>`Title text '${mQ(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${mQ(e)}'`}},hQ={ariaRole:dN,ariaRoleDescription:pN,description:fN};function tK(e,t){let n=t.aria===!1;if(e(ZQ,n||void 0),n||t.description==null)for(let r in hQ)e(hQ[r],void 0);else{let r=t.mark.marktype;e(fN,t.description),e(dN,t.ariaRole||(r==="group"?JQ:hN)),e(pN,t.ariaRoleDescription||`${r} mark`)}}function nK(e){return e.aria===!1?{[ZQ]:!0}:lxe[e.role]?null:pQ[e.role]?fxe(e,pQ[e.role]):uxe(e)}function uxe(e){let t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return eK(n?JQ:hN,`${t} mark container`,e.description)}function fxe(e,t){try{let n=e.items[0],r=t.caption||(()=>"");return eK(t.role||hN,t.desc,n.description||r(n))}catch{return null}}function mQ(e){return te(e.text).join(" ")}function dxe(e){let t=e.datum,n=e.orient,r=t.title?rK(e):null,i=e.context,o=i.scales[t.scale].value,a=i.dataflow.locale(),s=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${q3(s)?"discrete":s} scale with ${SV(a,o,e)}`}function pxe(e){let t=e.datum,n=t.title?rK(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),a=e.context,s=a.scales[i[o[0]]].value,c=a.dataflow.locale();return mxe(r)+(n?` titled '${n}'`:"")+` for ${hxe(o)} with ${SV(c,s,e)}`}function rK(e){try{return te(Ue(e.items).items[0].text).join(" ")}catch{return null}}function hxe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Ue(e)}function mxe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}var iK=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),gxe=e=>iK(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function mN(){let e="",t="",n="",r=[],i=()=>t=n="",o=c=>{t&&(e+=`${t}>${n}`,i()),r.push(c)},a=(c,l)=>(l!=null&&(t+=` ${c}="${gxe(l)}"`),s),s={open(c){o(c),t="<"+c;for(var l=arguments.length,u=new Array(l>1?l-1:0),f=1;f<l;f++)u[f-1]=arguments[f];for(let d of u)for(let p in d)a(p,d[p]);return s},close(){let c=r.pop();return t?e+=t+(n?`>${n}</${c}>`:"/>"):e+=`</${c}>`,i(),s},attr:a,text:c=>(n+=iK(c),s),toString:()=>e};return s}var oK=e=>aK(mN(),e)+"";function aK(e,t){if(e.open(t.tagName),t.hasAttributes()){let n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){let n=t.childNodes;for(let r of n)r.nodeType===3?e.text(r.nodeValue):aK(e,r)}return e.close()}var sx={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},cx={blend:"mix-blend-mode"},sK={fill:"none","stroke-miterlimit":10},S7=0,gQ="http://www.w3.org/2000/xmlns/",gr=A7.xmlns;function xx(e){so.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var AV=so.prototype;ee(xx,so,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=vr(e,0,"svg",gr),this._svg.setAttributeNS(gQ,"xmlns",gr),this._svg.setAttributeNS(gQ,"xmlns:xlink",A7["xmlns:xlink"]),this._svg.setAttribute("version",A7.version),this._svg.setAttribute("class","marks"),Qo(e,1),this._root=vr(this._svg,S7,"g",gr),X3(this._root,sK),Qo(this._svg,S7+1)),this.background(this._bgcolor),AV.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),AV.background.apply(this,arguments)},resize(e,t,n,r){return AV.resize.call(this,e,t,n,r),this._svg&&(X3(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){let e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=vr(e,S7,"rect",gr),X3(n,{width:this._width,height:this._height,fill:t}));let r=oK(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Qo(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;let e=this._dirty;if(!e.length||!this._dirtyID)return!0;let t=++this._dirtyID,n,r,i,o,a,s,c;for(a=0,s=e.length;a<s;++a)if(n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=n1[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,vQ(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){o.nested&&r.items.length?(c=r.items[0],c._svg&&this._update(o,c._svg,c)):n._svg&&(c=n._svg.parentNode,c&&c.removeChild(n._svg)),n._svg=null;continue}n=o.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,vQ(n,t)):this._update(o,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,r){if(!this.isDirty(t))return t._svg;let i=this._svg,o=t.marktype,a=n1[o],s=t.interactive===!1?"none":null,c=a.tag==="g",l=yQ(t,e,n,"g",i);if(o!=="group"&&r!=null&&!r.includes(o))return Qo(l,0),t._svg;l.setAttribute("class",qQ(t));let u=nK(t);for(let h in u)t1(l,h,u[h]);c||t1(l,"pointer-events",s),t1(l,"clip-path",t.clip?WV(this,t,t.group):null);let f=null,d=0,p=h=>{let m=this.isDirty(h),g=yQ(h,l,f,a.tag,i);m&&(this._update(a,g,h),c&&xxe(this,g,h,r)),f=g,++d};return a.nested?t.items.length&&p(t.items[0]):I2(t,p),Qo(l,d),l},_update(e,t,n){gc=t,wi=t.__values__,tK(H7,n),e.attr(H7,n,this);let r=bxe[e.type];r&&r.call(this,e,t,n),gc&&this.style(gc,n)},style(e,t){if(t!=null){for(let n in sx){let r=n==="font"?$7(t):t[n];if(r===wi[n])continue;let i=sx[n];r==null?e.removeAttribute(i):(UV(r)&&(r=bQ(r,this._defs.gradient,cK())),e.setAttribute(i,r+"")),wi[n]=r}for(let n in cx)Ky(e,cx[n],t[n])}},defs(){let e=this._svg,t=this._defs,n=t.el,r=0;for(let i in t.gradient)n||(t.el=n=vr(e,S7+1,"defs",gr)),r=vxe(n,t.gradient[i],r);for(let i in t.clipping)n||(t.el=n=vr(e,S7+1,"defs",gr)),r=yxe(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):Qo(n,r))},_clearDefs(){let e=this._defs;e.gradient={},e.clipping={}}});function vQ(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function vxe(e,t,n){let r,i,o;if(t.gradient==="radial"){let a=vr(e,n++,"pattern",gr);X3(a,{id:Zy+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=vr(a,0,"rect",gr),X3(a,{width:1,height:1,fill:`url(${cK()}#${t.id})`}),e=vr(e,n++,"radialGradient",gr),X3(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=vr(e,n++,"linearGradient",gr),X3(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=vr(e,r,"stop",gr),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return Qo(e,r),n}function yxe(e,t,n){let r;return e=vr(e,n,"clipPath",gr),e.setAttribute("id",t.id),t.path?(r=vr(e,0,"path",gr),r.setAttribute("d",t.path)):(r=vr(e,0,"rect",gr),X3(r,{x:0,y:0,width:t.width,height:t.height})),Qo(e,1),n+1}function xxe(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;I2(n,a=>{i=e.mark(t,a,i,r),++o}),Qo(t,1+o)}function yQ(e,t,n,r,i){let o=e._svg,a;if(!o&&(a=t.ownerDocument,o=Y3(a,r,gr),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){let s=Y3(a,"path",gr);o.appendChild(s),s.__data__=e;let c=Y3(a,"g",gr);o.appendChild(c),c.__data__=e;let l=Y3(a,"path",gr);o.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(o.ownerSVGElement!==i||Cxe(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function Cxe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}var gc=null,wi=null,bxe={group(e,t,n){let r=gc=t.childNodes[2];wi=r.__values__,e.foreground(H7,n,this),wi=t.__values__,gc=t.childNodes[1],e.content(H7,n,this);let i=gc=t.childNodes[0];e.background(H7,n,this);let o=n.mark.interactive===!1?"none":null;if(o!==wi.events&&(t1(r,"pointer-events",o),t1(i,"pointer-events",o),wi.events=o),n.strokeForeground&&n.stroke){let a=n.fill;t1(r,"display",null),this.style(i,n),t1(i,"stroke",null),a&&(n.fill=null),wi=r.__values__,this.style(r,n),a&&(n.fill=a),gc=null}else t1(r,"display","none")},image(e,t,n){n.smooth===!1?(Ky(t,"image-rendering","optimizeSpeed"),Ky(t,"image-rendering","pixelated")):Ky(t,"image-rendering",null)},text(e,t,n){let r=P7(n),i,o,a,s;F(r)?(o=r.map(c=>J3(n,c)),i=o.join(`
`),i!==wi.text&&(Qo(t,0),a=t.ownerDocument,s=Z3(n),o.forEach((c,l)=>{let u=Y3(a,"tspan",gr);u.__data__=n,u.textContent=c,l&&(u.setAttribute("x",0),u.setAttribute("dy",s)),t.appendChild(u)}),wi.text=i)):(o=J3(n,r),o!==wi.text&&(t.textContent=o,wi.text=o)),t1(t,"font-family",$7(n)),t1(t,"font-size",Ja(n)+"px"),t1(t,"font-style",n.fontStyle),t1(t,"font-variant",n.fontVariant),t1(t,"font-weight",n.fontWeight)}};function H7(e,t,n){t!==wi[e]&&(n?Mxe(gc,e,t,n):t1(gc,e,t),wi[e]=t)}function Ky(e,t,n){n!==wi[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),wi[t]=n)}function X3(e,t){for(let n in t)t1(e,n,t[n])}function t1(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Mxe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function cK(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function gN(e){so.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}ee(gN,so,{svg(){return this._text},_render(e){let t=mN();t.open("svg",_e({},A7,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",sK,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){let n=n1[t.marktype],r=n.tag,i=[tK,n.attr];e.open("g",{class:qQ(t),"clip-path":t.clip?WV(this,t,t.group):null},nK(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});let o=a=>{let s=this.href(a);if(s&&e.open("a",s),e.open(r,this.attr(t,a,i,r!=="g"?r:null)),r==="text"){let c=P7(a);if(F(c)){let l={x:0,dy:Z3(a)};for(let u=0;u<c.length;++u)e.open("tspan",u?l:null).text(J3(a,c[u])).close()}else e.text(J3(a,c))}else if(r==="g"){let c=a.strokeForeground,l=a.fill,u=a.stroke;c&&u&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),I2(a,f=>this.mark(e,f)),e.close(),c&&u?(l&&(a.fill=null),a.stroke=u,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),l&&(a.fill=l)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),s&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):I2(t,o),e.close()},href(e){let t=e.href,n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){let i={},o=(a,s,c,l)=>{i[l||a]=s};return Array.isArray(n)?n.forEach(a=>a(o,t,this)):n(o,t,this),r&&wxe(i,t,e,r,this._defs),i},defs(e){let t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(let i in t){let o=t[i],a=o.stops;o.gradient==="radial"?(e.open("pattern",{id:Zy+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:i,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let s=0;s<a.length;++s)e.open("stop",{offset:a[s].offset,"stop-color":a[s].color}).close();e.close()}for(let i in n){let o=n[i];e.open("clipPath",{id:i}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});function wxe(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=$7(t),e["font-size"]=Ja(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(let a in sx){let s=t[a],c=sx[a];s==="transparent"&&(c==="fill"||c==="stroke")||s!=null&&(UV(s)&&(s=bQ(s,i.gradient,"")),e[c]=s)}for(let a in cx){let s=t[a];s!=null&&(o=o||[],o.push(`${cx[a]}: ${s};`))}return o&&(e.style=o.join(" ")),e}var T2={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Sxe(e){T2.svgMarkTypes=e.svgMarkTypes??["text"],T2.svgOnTop=e.svgOnTop??!0,T2.debug=e.debug??!1}function lx(e){so.call(this,e),this._svgRenderer=new xx(e),this._canvasRenderer=new N7(e)}var xQ=so.prototype;ee(lx,so,{initialize(e,t,n,r,i){this._root_el=vr(e,0,"div");let o=vr(this._root_el,0,"div"),a=vr(this._root_el,1,"div");return this._root_el.style.position="relative",T2.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=T2.svgOnTop?a:o,this._canvasEl=T2.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),xQ.initialize.call(this,e,t,n,r,i)},dirty(e){return T2.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){let r=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(i=>!T2.svgMarkTypes.includes(i));this._svgRenderer.render(e,T2.svgMarkTypes),this._canvasRenderer.render(e,r)},resize(e,t,n,r){return xQ.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background(e){return T2.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function vN(e,t){vc.call(this,e,t)}ee(vN,vc,{initialize(e,t,n){let r=vr(vr(e,0,"div"),T2.svgOnTop?0:1,"div");return vc.prototype.initialize.call(this,r,t,n)}});var lK="canvas",uK="hybrid",fK="png",dK="svg",pK="none",yc={Canvas:lK,PNG:fK,SVG:dK,Hybrid:uK,None:pK},Kl={};Kl[lK]=Kl[fK]={renderer:N7,headless:N7,handler:vc};Kl[dK]={renderer:xx,headless:gN,handler:uN};Kl[uK]={renderer:lx,headless:lx,handler:vN};Kl[pK]={};function U7(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Kl[e]=t,this):Kl[e]}function yN(e,t,n){let r=[],i=new Vn().union(t),o=e.marktype;return o?hK(e,i,n,r):o==="group"?mK(e,i,n,r):$("Intersect scene must be mark node or group item.")}function hK(e,t,n,r){if(Exe(e,t,n)){let i=e.items,o=e.marktype,a=i.length,s=0;if(o==="group")for(;s<a;++s)mK(i[s],t,n,r);else for(let c=n1[o].isect;s<a;++s){let l=i[s];gK(l,t,c)&&r.push(l)}}return r}function Exe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function mK(e,t,n,r){n&&n(e.mark)&&gK(e,t,n1.group.isect)&&r.push(e);let i=e.items,o=i&&i.length;if(o){let a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let c=0;c<o;++c)hK(i[c],t,n,r);t.translate(a,s)}return r}function gK(e,t,n){let r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}var VV=new Vn;function xN(e){let t=e.clip;if(ke(t))t(R7(VV.clear()));else if(t)VV.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(VV)}var Dxe=1e-9;function CN(e,t,n){return e===t?!0:n==="path"?vK(e,t):e instanceof Date&&t instanceof Date?+e==+t:Oe(e)&&Oe(t)?Math.abs(e-t)<=Dxe:!e||!t||!ne(e)&&!ne(t)?e==t:zxe(e,t)}function vK(e,t){return CN(Ql(e),Ql(t))}function zxe(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!CN(e[i],t[i],i))return!1;return typeof e==typeof t}function Hxe(){zQ(),Zge()}var Iu="top",F2="left",R2="right",r4="bottom",Lxe="top-left",Axe="top-right",Vxe="bottom-left",Nxe="bottom-right",wN="start",bN="middle",r1="end",_xe="x",kxe="y",Sx="group",SN="axis",EN="title",Txe="frame",Ixe="scope",DN="legend",zK="row-header",HK="row-footer",LK="row-title",AK="column-header",VK="column-footer",NK="column-title",Fxe="padding",Rxe="symbol",_K="fit",kK="fit-x",TK="fit-y",Oxe="pad",zN="none",Cx="all",MN="each",HN="flush",t4="column",n4="row";function IK(e){P.call(this,null,e)}ee(IK,P,{transform(e,t){let n=t.dataflow,r=e.mark,i=r.marktype,o=n1[i],a=o.bound,s=r.bounds,c;if(o.nested)r.items.length&&n.dirty(r.items[0]),s=bx(r,a),r.items.forEach(l=>{l.bounds.clear().union(s)});else if(i===Sx||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),s.clear(),r.items.forEach(l=>s.union(bx(l,a))),r.role){case SN:case DN:case EN:t.reflow()}else c=t.changed(t.REM),t.visit(t.ADD,l=>{s.union(bx(l,a))}),t.visit(t.MOD,l=>{c=c||s.alignsWith(l.bounds),n.dirty(l),s.union(bx(l,a))}),c&&(s.clear(),r.items.forEach(l=>s.union(l.bounds)));return xN(r),t.modifies("bounds")}});function bx(e,t,n){return t(e.bounds.clear(),e,n)}var yK=":vega_identifier:";function LN(e){P.call(this,0,e)}LN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ee(LN,P,{transform(e,t){let n=Pxe(t.dataflow),r=e.as,i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function Pxe(e){return e._signals[yK]||(e._signals[yK]=e.add(0))}function FK(e){P.call(this,null,e)}ee(FK,P,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,$xe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);let r=n.marktype===Sx?F7:I7;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function $xe(e){let t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function RK(e){P.call(this,null,e)}var xK={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!OK(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},OK=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),CK=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(OK(i,o=e[n].bounds,t))return!0},Bxe=e=>{let t=e.bounds;return t.width()>1&&t.height()>1},Uxe=(e,t,n)=>{var r=e.range(),i=new Vn;return t===Iu||t===r4?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},bK=e=>(e.forEach(t=>t.opacity=1),e),MK=(e,t)=>e.reflow(t.modified()).modifies("opacity");ee(RK,P,{transform(e,t){let n=xK[e.method]||xK.parity,r=e.separation||0,i=t.materialize(t.SOURCE).source,o,a;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(bK(i),t=MK(t,e)),t;if(i=i.filter(Bxe),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=bK(i),t=MK(t,e),o.length>=3&&CK(o,r)){do o=n(o,r);while(o.length>=3&&CK(o,r));o.length<3&&!Ue(i).opacity&&(o.length>1&&(Ue(o).opacity=0),Ue(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=Uxe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(c=>{a(c)||(c.opacity=0)}));let s=o[0].mark.bounds.clear();return i.forEach(c=>{c.opacity&&s.union(c.bounds)}),t}});function PK(e){P.call(this,null,e)}ee(PK,P,{transform(e,t){let n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){let r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});var Si=new Vn;function Tu(e,t,n){return e[t]===n?0:(e[t]=n,1)}function jxe(e){var t=e.items[0].orient;return t===F2||t===R2}function qxe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Gxe(e,t,n,r){var i=t.items[0],o=i.datum,a=i.translate!=null?i.translate:.5,s=i.orient,c=qxe(o),l=i.range,u=i.offset,f=i.position,d=i.minExtent,p=i.maxExtent,h=o.title&&i.items[c[2]].items[0],m=i.titlePadding,g=i.bounds,v=h&&mx(h),y=0,C=0,b,M;switch(Si.clear().union(g),g.clear(),(b=c[0])>-1&&g.union(i.items[b].bounds),(b=c[1])>-1&&g.union(i.items[b].bounds),s){case Iu:y=f||0,C=-u,M=Math.max(d,Math.min(p,-g.y1)),g.add(0,-M).add(l,0),h&&Mx(e,h,M,m,v,0,-1,g);break;case F2:y=-u,C=f||0,M=Math.max(d,Math.min(p,-g.x1)),g.add(-M,0).add(0,l),h&&Mx(e,h,M,m,v,1,-1,g);break;case R2:y=n+u,C=f||0,M=Math.max(d,Math.min(p,g.x2)),g.add(0,0).add(M,l),h&&Mx(e,h,M,m,v,1,1,g);break;case r4:y=f||0,C=r+u,M=Math.max(d,Math.min(p,g.y2)),g.add(0,0).add(l,M),h&&Mx(e,h,M,m,0,0,1,g);break;default:y=i.x,C=i.y}return Za(g.translate(y,C),i),Tu(i,"x",y+a)|Tu(i,"y",C+a)&&(i.bounds=Si,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function Mx(e,t,n,r,i,o,a,s){let c=t.bounds;if(t.auto){let l=a*(n+i+r),u=0,f=0;e.dirty(t),o?u=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(c.translate(-u,-f)),e.dirty(t)}s.union(c)}var wK=(e,t)=>Math.floor(Math.min(e,t)),SK=(e,t)=>Math.ceil(Math.max(e,t));function Wxe(e){var t=e.items,n=t.length,r=0,i,o;let a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===Sx)switch(i.role){case SN:case DN:case EN:break;case zK:a.rowheaders.push(...o);break;case HK:a.rowfooters.push(...o);break;case AK:a.colheaders.push(...o);break;case VK:a.colfooters.push(...o);break;case LK:a.rowtitle=o[0];break;case NK:a.coltitle=o[0];break;default:a.marks.push(...o)}return a}function Yxe(e){return new Vn().set(0,0,e.width||0,e.height||0)}function Xxe(e){let t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function vn(e,t,n){let r=ne(e)?e[t]:e;return r??(n!==void 0?n:0)}function EK(e){return e<0?Math.ceil(-e):0}function $K(e,t,n){var r=!n.nodirty,i=n.bounds===HN?Yxe:Xxe,o=Si.set(0,0,0,0),a=vn(n.align,t4),s=vn(n.align,n4),c=vn(n.padding,t4),l=vn(n.padding,n4),u=n.columns||t.length,f=u<=0?1:Math.ceil(t.length/u),d=t.length,p=Array(d),h=Array(u),m=0,g=Array(d),v=Array(f),y=0,C=Array(d),b=Array(d),M=Array(d),S,w,E,D,H,A,j,V,_,N,I;for(w=0;w<u;++w)h[w]=0;for(w=0;w<f;++w)v[w]=0;for(w=0;w<d;++w)A=t[w],H=M[w]=i(A),A.x=A.x||0,C[w]=0,A.y=A.y||0,b[w]=0,E=w%u,D=~~(w/u),m=Math.max(m,j=Math.ceil(H.x2)),y=Math.max(y,V=Math.ceil(H.y2)),h[E]=Math.max(h[E],j),v[D]=Math.max(v[D],V),p[w]=c+EK(H.x1),g[w]=l+EK(H.y1),r&&e.dirty(t[w]);for(w=0;w<d;++w)w%u===0&&(p[w]=0),w<u&&(g[w]=0);if(a===MN)for(E=1;E<u;++E){for(I=0,w=E;w<d;w+=u)I<p[w]&&(I=p[w]);for(w=E;w<d;w+=u)p[w]=I+h[E-1]}else if(a===Cx){for(I=0,w=0;w<d;++w)w%u&&I<p[w]&&(I=p[w]);for(w=0;w<d;++w)w%u&&(p[w]=I+m)}else for(a=!1,E=1;E<u;++E)for(w=E;w<d;w+=u)p[w]+=h[E-1];if(s===MN)for(D=1;D<f;++D){for(I=0,w=D*u,S=w+u;w<S;++w)I<g[w]&&(I=g[w]);for(w=D*u;w<S;++w)g[w]=I+v[D-1]}else if(s===Cx){for(I=0,w=u;w<d;++w)I<g[w]&&(I=g[w]);for(w=u;w<d;++w)g[w]=I+y}else for(s=!1,D=1;D<f;++D)for(w=D*u,S=w+u;w<S;++w)g[w]+=v[D-1];for(_=0,w=0;w<d;++w)_=p[w]+(w%u?_:0),C[w]+=_-t[w].x;for(E=0;E<u;++E)for(N=0,w=E;w<d;w+=u)N+=g[w],b[w]+=N-t[w].y;if(a&&vn(n.center,t4)&&f>1)for(w=0;w<d;++w)H=a===Cx?m:h[w%u],_=H-M[w].x2-t[w].x-C[w],_>0&&(C[w]+=_/2);if(s&&vn(n.center,n4)&&u!==1)for(w=0;w<d;++w)H=s===Cx?y:v[~~(w/u)],N=H-M[w].y2-t[w].y-b[w],N>0&&(b[w]+=N/2);for(w=0;w<d;++w)o.union(M[w].translate(C[w],b[w]));switch(_=vn(n.anchor,_xe),N=vn(n.anchor,kxe),vn(n.anchor,t4)){case r1:_-=o.width();break;case bN:_-=o.width()/2}switch(vn(n.anchor,n4)){case r1:N-=o.height();break;case bN:N-=o.height()/2}for(_=Math.round(_),N=Math.round(N),o.clear(),w=0;w<d;++w)t[w].mark.bounds.clear();for(w=0;w<d;++w)A=t[w],A.x+=C[w]+=_,A.y+=b[w]+=N,o.union(A.mark.bounds.union(A.bounds.translate(C[w],b[w]))),r&&e.dirty(A);return o}function Qxe(e,t,n){var r=Wxe(t),i=r.marks,o=n.bounds===HN?Kxe:Zxe,a=n.offset,s=n.columns||i.length,c=s<=0?1:Math.ceil(i.length/s),l=c*s,u,f,d,p,h,m,g;let v=$K(e,i,n);v.empty()&&v.set(0,0,0,0),r.rowheaders&&(m=vn(n.headerBand,n4,null),u=wx(e,r.rowheaders,i,s,c,-vn(a,"rowHeader"),wK,0,o,"x1",0,s,1,m)),r.colheaders&&(m=vn(n.headerBand,t4,null),f=wx(e,r.colheaders,i,s,s,-vn(a,"columnHeader"),wK,1,o,"y1",0,1,s,m)),r.rowfooters&&(m=vn(n.footerBand,n4,null),d=wx(e,r.rowfooters,i,s,c,vn(a,"rowFooter"),SK,0,o,"x2",s-1,s,1,m)),r.colfooters&&(m=vn(n.footerBand,t4,null),p=wx(e,r.colfooters,i,s,s,vn(a,"columnFooter"),SK,1,o,"y2",l-s,1,s,m)),r.rowtitle&&(h=vn(n.titleAnchor,n4),g=vn(a,"rowTitle"),g=h===r1?d+g:u-g,m=vn(n.titleBand,n4,.5),DK(e,r.rowtitle,g,0,v,m)),r.coltitle&&(h=vn(n.titleAnchor,t4),g=vn(a,"columnTitle"),g=h===r1?p+g:f-g,m=vn(n.titleBand,t4,.5),DK(e,r.coltitle,g,1,v,m))}function Kxe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Zxe(e,t){return e.bounds[t]}function wx(e,t,n,r,i,o,a,s,c,l,u,f,d,p){var h=n.length,m=0,g=0,v,y,C,b,M,S,w,E,D;if(!h)return m;for(v=u;v<h;v+=f)n[v]&&(m=a(m,c(n[v],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=o,y=0,b=t.length;y<b;++y)e.dirty(t[y]),t[y].mark.bounds.clear();for(v=u,y=0,b=t.length;y<b;++y,v+=f){for(S=t[y],M=S.mark.bounds,C=v;C>=0&&(w=n[C])==null;C-=d);s?(E=p==null?w.x:Math.round(w.bounds.x1+p*w.bounds.width()),D=m):(E=m,D=p==null?w.y:Math.round(w.bounds.y1+p*w.bounds.height())),M.union(S.bounds.translate(E-(S.x||0),D-(S.y||0))),S.x=E,S.y=D,e.dirty(S),g=a(g,M[l])}return g}function DK(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function Jxe(e,t){let n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function eCe(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function tCe(e,t,n,r,i,o,a){let s=Jxe(n,t),c=eCe(e,s("offset",0)),l=s("anchor",wN),u=l===r1?1:l===bN?.5:0,f={align:MN,bounds:s("bounds",HN),columns:s("direction")==="vertical"?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case F2:f.anchor={x:Math.floor(r.x1)-c,column:r1,y:u*(a||r.height()+2*r.y1),row:l};break;case R2:f.anchor={x:Math.ceil(r.x2)+c,y:u*(a||r.height()+2*r.y1),row:l};break;case Iu:f.anchor={y:Math.floor(i.y1)-c,row:r1,x:u*(o||i.width()+2*i.x1),column:l};break;case r4:f.anchor={y:Math.ceil(i.y2)+c,x:u*(o||i.width()+2*i.x1),column:l};break;case Lxe:f.anchor={x:c,y:c};break;case Axe:f.anchor={x:o-c,y:c,column:r1};break;case Vxe:f.anchor={x:c,y:a-c,row:r1};break;case Nxe:f.anchor={x:o-c,y:a-c,column:r1,row:r1};break}return f}function nCe(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,a=n.x,s=n.y,c,l;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),iCe(e,n,n.items[0].items[0]),o=rCe(n,o),c=2*n.padding,l=2*n.padding,o.empty()||(c=Math.ceil(o.width()+c),l=Math.ceil(o.height()+l)),r.type===Rxe&&oCe(n.items[0].items[0].items[0].items),i!==zN&&(n.x=a=0,n.y=s=0),n.width=c,n.height=l,Za(o.set(a,s,a+c,s+l),n),n.mark.bounds.clear().union(o),n}function rCe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function iCe(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&j7(e,n,i,o);else{var a=t.items[1].items[0],s=a.anchor,c=t.titlePadding||0,l=r-a.x,u=r-a.y;switch(a.orient){case F2:i+=Math.ceil(a.bounds.width())+c;break;case R2:case r4:break;default:o+=a.bounds.height()+c}switch((i||o)&&j7(e,n,i,o),a.orient){case F2:u+=ku(t,n,a,s,1,1);break;case R2:l+=ku(t,n,a,r1,0,0)+c,u+=ku(t,n,a,s,1,1);break;case r4:l+=ku(t,n,a,s,0,0),u+=ku(t,n,a,r1,-1,0,1)+c;break;default:l+=ku(t,n,a,s,0,0)}(l||u)&&j7(e,a,l,u),(l=Math.round(a.bounds.x1-r))<0&&(j7(e,n,-l,0),j7(e,a,-l,0))}}function ku(e,t,n,r,i,o,a){let s=e.datum.type!=="symbol",c=n.datum.vgrad,l=s&&(o||!c)&&!a?t.items[0]:t,u=l.bounds[i?"y2":"x2"]-e.padding,f=c&&o?u:0,d=c&&o?0:u,p=i<=0?0:mx(n);return Math.round(r===wN?f:r===r1?d-p:.5*(u-p))}function j7(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function oCe(e){let t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function aCe(e,t,n,r,i){var o=t.items[0],a=o.frame,s=o.orient,c=o.anchor,l=o.offset,u=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],p=s===F2||s===R2?r:n,h=0,m=0,g=0,v=0,y=0,C;if(a!==Sx?s===F2?(h=i.y2,p=i.y1):s===R2?(h=i.y1,p=i.y2):(h=i.x1,p=i.x2):s===F2&&(h=r,p=0),C=c===wN?h:c===r1?p:(h+p)/2,d&&d.text){switch(s){case Iu:case r4:y=f.bounds.height()+u;break;case F2:v=f.bounds.width()+u;break;case R2:v=-f.bounds.width()-u;break}Si.clear().union(d.bounds),Si.translate(v-(d.x||0),y-(d.y||0)),Tu(d,"x",v)|Tu(d,"y",y)&&(e.dirty(d),d.bounds.clear().union(Si),d.mark.bounds.clear().union(Si),e.dirty(d)),Si.clear().union(d.bounds)}else Si.clear();switch(Si.union(f.bounds),s){case Iu:m=C,g=i.y1-Si.height()-l;break;case F2:m=i.x1-Si.width()-l,g=C;break;case R2:m=i.x2+Si.width()+l,g=C;break;case r4:m=C,g=i.y2+l;break;default:m=o.x,g=o.y}return Tu(o,"x",m)|Tu(o,"y",g)&&(Si.translate(m,g),e.dirty(o),o.bounds.clear().union(Si),t.bounds.clear().union(Si),e.dirty(o)),o.bounds}function BK(e){P.call(this,null,e)}ee(BK,P,{transform(e,t){let n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Qxe(n,r,e.layout),cCe(n,r,e)}),sCe(e.mark.group)?t.reflow():t}});function sCe(e){return e&&e.mark.role!=="legend-entry"}function cCe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),a=new Vn().set(0,0,i,o),s=a.clone(),c=a.clone(),l=[],u,f,d,p,h,m;for(h=0,m=r.length;h<m;++h)switch(f=r[h],f.role){case SN:p=jxe(f)?s:c,p.union(Gxe(e,f,i,o));break;case EN:u=f;break;case DN:l.push(nCe(e,f));break;case Txe:case Ixe:case zK:case HK:case LK:case AK:case VK:case NK:s.union(f.bounds),c.union(f.bounds);break;default:a.union(f.bounds)}if(l.length){let g={};l.forEach(v=>{d=v.orient||R2,d!==zN&&(g[d]||(g[d]=[])).push(v)});for(let v in g){let y=g[v];$K(e,y,tCe(y,v,n.legends,s,c,i,o))}l.forEach(v=>{let y=v.bounds;if(y.equals(v._bounds)||(v.bounds=v._bounds,e.dirty(v),v.bounds=y,e.dirty(v)),n.autosize&&(n.autosize.type===_K||n.autosize.type===kK||n.autosize.type===TK))switch(v.orient){case F2:case R2:a.add(y.x1,0).add(y.x2,0);break;case Iu:case r4:a.add(0,y.y1).add(0,y.y2)}else a.union(y)})}a.union(s).union(c),u&&a.union(aCe(e,u,i,o,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),lCe(e,t,a,n)}function lCe(e,t,n,r){let i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,c=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),u=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1)),d=Math.max(0,Math.ceil(n.x2-c)),p=Math.max(0,Math.ceil(n.y2-u));if(i.contains===Fxe){let h=e.padding();a-=h.left+h.right,s-=h.top+h.bottom}o===zN?(l=0,f=0,c=a,u=s):o===_K?(c=Math.max(0,a-l-d),u=Math.max(0,s-f-p)):o===kK?(c=Math.max(0,a-l-d),s=u+f+p):o===TK?(a=c+l+d,u=Math.max(0,s-f-p)):o===Oxe&&(a=c+l+d,s=u+f+p),e._resizeView(a,s,c,u,[l,f],i.resize)}var TN={};br(TN,{axisticks:()=>GK,datajoin:()=>WK,encode:()=>YK,legendentries:()=>XK,linkpath:()=>NN,pie:()=>_N,scale:()=>eZ,sortitems:()=>nZ,stack:()=>kN});function GK(e){P.call(this,null,e)}ee(GK,P,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,s=By(o,a,e.minstep),c=e.format||bV(n,o,s,e.formatSpecifier,e.formatType,!!e.values),l=e.values?CV(o,e.values,s):Uy(o,s);return i&&(r.rem=i),i=l.map((u,f)=>at({index:f/(l.length-1||1),value:u,label:c(u)})),e.extra&&i.length&&i.push(at({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function WK(e){P.call(this,null,e)}function uCe(){return at({})}function fCe(e){let t=M3().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ee(WK,P,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||uCe,o=e.key||Ee,a=this.value;return F(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&$("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=fCe(o)),t.visit(t.ADD,s=>{let c=o(s),l=a.get(c);l?l.exit?(a.empty--,r.add.push(l)):r.mod.push(l):(l=i(s),a.set(c,l),r.add.push(l)),l.datum=s,l.exit=!1}),t.visit(t.MOD,s=>{let c=o(s),l=a.get(c);l&&(l.datum=s,r.mod.push(l))}),t.visit(t.REM,s=>{let c=o(s),l=a.get(c);s===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}});function YK(e){P.call(this,null,e)}ee(YK,P,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(F(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var a=o==="enter",s=i.update||Zs,c=i.enter||Zs,l=i.exit||Zs,u=(o&&!a?i[o]:s)||Zs;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{c(f,e),s(f,e)}),n.modifies(c.output),n.modifies(s.output),u!==Zs&&u!==s&&(t.visit(t.ADD,f=>{u(f,e)}),n.modifies(u.output))),t.changed(t.REM)&&l!==Zs&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),a||u!==Zs){let f=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(f,d=>{let p=c(d,e)||r;(u(d,e)||p)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)):t.visit(f,d=>{(u(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)}return n.changed()?n:t.StopPropagation}});function XK(e){P.call(this,[],e)}ee(XK,P,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||M7,a=e.scale,s=+e.limit,c=By(a,e.count==null?5:e.count,e.minstep),l=!!e.values||o===M7,u=e.format||wV(n,a,c,o,e.formatSpecifier,e.formatType,l),f=e.values||MV(a,c),d,p,h,m,g;return i&&(r.rem=i),o===M7?(s&&f.length>s?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,s-1),g=!0):i=f,ke(h=e.size)?(!e.values&&a(i[0])===0&&(i=i.slice(1)),m=i.reduce((v,y)=>Math.max(v,h(y,e)),0)):h=hn(m=h||8),i=i.map((v,y)=>at({index:y,label:u(v,y,i),value:v,offset:m,size:h(v,e)})),g&&(g=f[i.length],i.push(at({index:i.length,label:`\u2026${f.length-i.length} entries`,value:g,offset:m,size:h(g,e)})))):o===qX?(d=a.domain(),p=$y(a,d[0],Ue(d)),f.length<3&&!e.values&&d[0]!==Ue(d)&&(f=[d[0],Ue(d)]),i=f.map((v,y)=>at({index:y,label:u(v,y,f),value:v,perc:p(v)}))):(h=f.length-1,p=YX(a),i=f.map((v,y)=>at({index:y,label:u(v,y,f),value:v,perc:y?p(v):0,perc2:y===h?1:p(f[y+1])}))),r.source=i,r.add=i,this.value=i,r}});var dCe=e=>e.source.x,pCe=e=>e.source.y,hCe=e=>e.target.x,mCe=e=>e.target.y;function NN(e){P.call(this,{},e)}NN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ee(NN,P,{transform(e,t){var n=e.sourceX||dCe,r=e.sourceY||pCe,i=e.targetX||hCe,o=e.targetY||mCe,a=e.as||"path",s=e.orient||"vertical",c=e.shape||"line",l=UK.get(c+"-"+s)||UK.get(c);return l||$("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,u=>{u[a]=l(n(u),r(u),i(u),o(u))}),t.reflow(e.modified()).modifies(a)}});var QK=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,gCe=(e,t,n,r)=>QK(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),KK=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.hypot(i,o)/2,s=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+s+" 0 1 "+n+","+r},vCe=(e,t,n,r)=>KK(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),ZK=(e,t,n,r)=>{let i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},yCe=(e,t,n,r)=>ZK(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),xCe=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,CCe=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,bCe=(e,t,n,r)=>{let i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),c=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(c?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},MCe=(e,t,n,r)=>{let i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},wCe=(e,t,n,r)=>{let i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},SCe=(e,t,n,r)=>{let i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),c=(t+r)/2;return"M"+t*i+","+t*o+"C"+c*i+","+c*o+" "+c*a+","+c*s+" "+r*a+","+r*s},UK=M3({line:QK,"line-radial":gCe,arc:KK,"arc-radial":vCe,curve:ZK,"curve-radial":yCe,"orthogonal-horizontal":xCe,"orthogonal-vertical":CCe,"orthogonal-radial":bCe,"diagonal-horizontal":MCe,"diagonal-vertical":wCe,"diagonal-radial":SCe});function _N(e){P.call(this,null,e)}_N.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ee(_N,P,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||Ia,a=e.startAngle||0,s=e.endAngle!=null?e.endAngle:2*Math.PI,c=t.source,l=c.map(o),u=l.length,f=a,d=(s-a)/J6(l),p=Gn(u),h,m,g;for(e.sort&&p.sort((v,y)=>l[v]-l[y]),h=0;h<u;++h)g=l[p[h]],m=c[p[h]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});var ECe=5;function DCe(e){let t=e.type;return!e.bins&&(t===Bl||t===Eu||t===Du)}function JK(e){return x7(e)&&e!==_2}var zCe=hr(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function eZ(e){P.call(this,null,e),this.modified(!0)}ee(eZ,P,{transform(e,t){var n=t.dataflow,r=this.value,i=HCe(e);(!r||i!==r.type)&&(this.value=r=lt(i)());for(i in e)if(!zCe[i]){if(i==="padding"&&JK(r.type))continue;ke(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return kCe(r,e,_Ce(r,e,ACe(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function HCe(e){var t=e.type,n="",r;return t===_2?_2+"-"+Bl:(LCe(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?_2+"-":r===3?Ul+"-":""),(n+t||Bl).toLowerCase())}function LCe(e){let t=e.type;return x7(t)&&t!==U3&&t!==j3&&(e.scheme||e.range&&e.range.length&&e.range.every(Q))}function ACe(e,t,n){let r=VCe(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,a=t.zero||t.zero===void 0&&DCe(e),s,c;if(!i)return 0;if(JK(o)&&t.padding&&i[0]!==Ue(i)&&(i=NCe(o,i,t.range,t.padding,t.exponent,t.constant)),(a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(s=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[s]<0&&(i[s]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[s]=t.domainMax),t.domainMid!=null)){c=t.domainMid;let l=c>i[s]?s+1:c<i[0]?0:s;l!==s&&n.warn("Scale domainMid exceeds domain min or max.",c),i.splice(l,0,c)}return e.domain(tZ(o,i,n)),o===Ty&&e.unknown(t.domainImplicit?mu:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&By(e,t.nice)||null),i.length}function VCe(e,t,n){return t?(e.domain(tZ(e.type,t,n)),t.length):-1}function NCe(e,t,n,r,i,o){var a=Math.abs(Ue(n)-n[0]),s=a/(a-2*r),c=e===Xa?J5(t,null,s):e===Du?X6(t,null,s,.5):e===Eu?X6(t,null,s,i||1):e===h7?ed(t,null,s,o||1):Z5(t,null,s);return t=t.slice(),t[0]=c[0],t[t.length-1]=c[1],t}function tZ(e,t,n){if(vV(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Z(t))}return t}function _Ce(e,t,n){let r=t.bins;if(r&&!F(r)){let i=e.domain(),o=i[0],a=Ue(i),s=r.step,c=r.start==null?o:r.start,l=r.stop==null?a:r.stop;s||$("Scale bins parameter missing step property."),c<o&&(c=s*Math.ceil(o/s)),l>a&&(l=s*Math.floor(a/s)),r=Gn(c,l+s/2,s)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Fy&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function kCe(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=TCe(r,t,n);else if(t.scheme&&(o=ICe(r,t,n),ke(o))){if(e.interpolator)return e.interpolator(o);$(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&yV(r))return e.interpolator(zu(VN(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(C7(t.interpolate,t.interpolateGamma)):ke(e.round)?e.round(i):ke(e.rangeRound)&&e.interpolate(i?Wa:bi),o&&e.range(VN(o,t.reverse))}function TCe(e,t,n){e!==dV&&e!==Iy&&$("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===Iy?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*p7(n,i,r)]}function ICe(e,t,n){var r=t.schemeExtent,i,o;return F(t.scheme)?o=zu(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=b7(i),o||$(`Unrecognized scheme name: ${t.scheme}`)),n=e===g7?n+1:e===Fy?n-1:e===$l||e===m7?+t.schemeCount||ECe:n,yV(e)?jK(o,r,t.reverse):ke(o)?Py(jK(o,r),n):e===Ty?o:o.slice(0,n)}function jK(e,t,n){return ke(e)&&(t||n)?Oy(e,VN(t||[0,1],n)):e}function VN(e,t){return t?e.slice().reverse():e}function nZ(e){P.call(this,null,e)}ee(nZ,P,{transform(e,t){let n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Ba(e.sort)),this.modified(n),t}});var qK="zero",rZ="center",iZ="normalize",oZ=["y0","y1"];function kN(e){P.call(this,null,e)}kN.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:qK,values:[qK,rZ,iZ]},{name:"as",type:"string",array:!0,length:2,default:oZ}]};ee(kN,P,{transform(e,t){var n=e.as||oZ,r=n[0],i=n[1],o=Ba(e.sort),a=e.field||Ia,s=e.offset===rZ?FCe:e.offset===iZ?RCe:OCe,c,l,u,f;for(c=PCe(t.source,e.groupby,o,a),l=0,u=c.length,f=c.max;l<u;++l)s(c[l],f,a,r,i);return t.reflow(e.modified()).modifies(n)}});function FCe(e,t,n,r,i){for(var o=(t-e.sum)/2,a=e.length,s=0,c;s<a;++s)c=e[s],c[r]=o,c[i]=o+=Math.abs(n(c))}function RCe(e,t,n,r,i){for(var o=1/e.sum,a=0,s=e.length,c=0,l=0,u;c<s;++c)u=e[c],u[r]=a,u[i]=a=o*(l+=Math.abs(n(u)))}function OCe(e,t,n,r,i){for(var o=0,a=0,s=e.length,c=0,l,u;c<s;++c)u=e[c],l=+n(u),l<0?(u[r]=a,u[i]=a+=l):(u[r]=o,u[i]=o+=l)}function PCe(e,t,n,r){var i=[],o=m=>m(u),a,s,c,l,u,f,d,p,h;if(t==null)i.push(e.slice());else for(a={},s=0,c=e.length;s<c;++s)u=e[s],f=t.map(o),d=a[f],d||(a[f]=d=[],i.push(d)),d.push(u);for(f=0,h=0,l=i.length;f<l;++f){for(d=i[f],s=0,p=0,c=d.length;s<c;++s)p+=Math.abs(r(d[s]));d.sum=p,p>h&&(h=p),n&&d.sort(n)}return i.max=h,i}var J_={};br(J_,{contour:()=>q_,geojson:()=>W_,geopath:()=>Y_,geopoint:()=>X_,geoshape:()=>Q_,graticule:()=>K_,heatmap:()=>Z_,isocontour:()=>U_,kde2d:()=>j_,projection:()=>mJ});var he=1e-6,Zl=1e-12,$e=Math.PI,Pt=$e/2,Fu=$e/4,Wn=$e*2,$t=180/$e,Re=$e/180,Fe=Math.abs,Ko=Math.atan,Nn=Math.atan2,pe=Math.cos,q7=Math.ceil,Ex=Math.exp;var Dx=Math.hypot,Jl=Math.log,zx=Math.pow,fe=Math.sin,Ei=Math.sign||function(e){return e>0?1:e<0?-1:0},Bt=Math.sqrt,Ru=Math.tan;function Hx(e){return e>1?0:e<-1?$e:Math.acos(e)}function ln(e){return e>1?Pt:e<-1?-Pt:Math.asin(e)}function un(){}function Lx(e,t){e&&sZ.hasOwnProperty(e.type)&&sZ[e.type](e,t)}var aZ={Feature:function(e,t){Lx(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Lx(n[r].geometry,t)}},sZ={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){IN(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)IN(n[r],t,0)},Polygon:function(e,t){cZ(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)cZ(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Lx(n[r],t)}};function IN(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function cZ(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)IN(e[n],t,1);t.polygonEnd()}function N1(e,t){e&&aZ.hasOwnProperty(e.type)?aZ[e.type](e,t):Lx(e,t)}var G7=new mn,Ax=new mn,lZ,uZ,FN,RN,ON,O2={point:un,lineStart:un,lineEnd:un,polygonStart:function(){G7=new mn,O2.lineStart=$Ce,O2.lineEnd=BCe},polygonEnd:function(){var e=+G7;Ax.add(e<0?Wn+e:e),this.lineStart=this.lineEnd=this.point=un},sphere:function(){Ax.add(Wn)}};function $Ce(){O2.point=UCe}function BCe(){fZ(lZ,uZ)}function UCe(e,t){O2.point=fZ,lZ=e,uZ=t,e*=Re,t*=Re,FN=e,RN=pe(t=t/2+Fu),ON=fe(t)}function fZ(e,t){e*=Re,t*=Re,t=t/2+Fu;var n=e-FN,r=n>=0?1:-1,i=r*n,o=pe(t),a=fe(t),s=ON*a,c=RN*o+s*pe(i),l=s*r*fe(i);G7.add(Nn(l,c)),FN=e,RN=o,ON=a}function PN(e){return Ax=new mn,N1(e,O2),Ax*2}function e0(e){return[Nn(e[1],e[0]),ln(e[2])]}function Zo(e){var t=e[0],n=e[1],r=pe(n);return[r*pe(t),r*fe(t),fe(n)]}function W7(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function xc(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Vx(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Y7(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function t0(e){var t=Bt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var bn,_1,_n,lo,n0,mZ,gZ,Ou,X7,i4,bc,Cc={point:$N,lineStart:dZ,lineEnd:pZ,polygonStart:function(){Cc.point=yZ,Cc.lineStart=jCe,Cc.lineEnd=qCe,X7=new mn,O2.polygonStart()},polygonEnd:function(){O2.polygonEnd(),Cc.point=$N,Cc.lineStart=dZ,Cc.lineEnd=pZ,G7<0?(bn=-(_n=180),_1=-(lo=90)):X7>he?lo=90:X7<-he&&(_1=-90),bc[0]=bn,bc[1]=_n},sphere:function(){bn=-(_n=180),_1=-(lo=90)}};function $N(e,t){i4.push(bc=[bn=e,_n=e]),t<_1&&(_1=t),t>lo&&(lo=t)}function vZ(e,t){var n=Zo([e*Re,t*Re]);if(Ou){var r=xc(Ou,n),i=[r[1],-r[0],0],o=xc(i,r);t0(o),o=e0(o);var a=e-n0,s=a>0?1:-1,c=o[0]*$t*s,l,u=Fe(a)>180;u^(s*n0<c&&c<s*e)?(l=o[1]*$t,l>lo&&(lo=l)):(c=(c+360)%360-180,u^(s*n0<c&&c<s*e)?(l=-o[1]*$t,l<_1&&(_1=l)):(t<_1&&(_1=t),t>lo&&(lo=t))),u?e<n0?co(bn,e)>co(bn,_n)&&(_n=e):co(e,_n)>co(bn,_n)&&(bn=e):_n>=bn?(e<bn&&(bn=e),e>_n&&(_n=e)):e>n0?co(bn,e)>co(bn,_n)&&(_n=e):co(e,_n)>co(bn,_n)&&(bn=e)}else i4.push(bc=[bn=e,_n=e]);t<_1&&(_1=t),t>lo&&(lo=t),Ou=n,n0=e}function dZ(){Cc.point=vZ}function pZ(){bc[0]=bn,bc[1]=_n,Cc.point=$N,Ou=null}function yZ(e,t){if(Ou){var n=e-n0;X7.add(Fe(n)>180?n+(n>0?360:-360):n)}else mZ=e,gZ=t;O2.point(e,t),vZ(e,t)}function jCe(){O2.lineStart()}function qCe(){yZ(mZ,gZ),O2.lineEnd(),Fe(X7)>he&&(bn=-(_n=180)),bc[0]=bn,bc[1]=_n,Ou=null}function co(e,t){return(t-=e)<0?t+360:t}function GCe(e,t){return e[0]-t[0]}function hZ(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function BN(e){var t,n,r,i,o,a,s;if(lo=_n=-(bn=_1=1/0),i4=[],N1(e,Cc),n=i4.length){for(i4.sort(GCe),t=1,r=i4[0],o=[r];t<n;++t)i=i4[t],hZ(r,i[0])||hZ(r,i[1])?(co(r[0],i[1])>co(r[0],r[1])&&(r[1]=i[1]),co(i[0],r[1])>co(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(s=co(r[1],i[0]))>a&&(a=s,bn=i[0],_n=r[1])}return i4=bc=null,bn===1/0||_1===1/0?[[NaN,NaN],[NaN,NaN]]:[[bn,_1],[_n,lo]]}var Q7,Nx,_x,kx,Tx,Ix,Fx,Rx,UN,jN,qN,bZ,MZ,i1,o1,a1,P2={sphere:un,point:GN,lineStart:xZ,lineEnd:CZ,polygonStart:function(){P2.lineStart=XCe,P2.lineEnd=QCe},polygonEnd:function(){P2.lineStart=xZ,P2.lineEnd=CZ}};function GN(e,t){e*=Re,t*=Re;var n=pe(t);K7(n*pe(e),n*fe(e),fe(t))}function K7(e,t,n){++Q7,_x+=(e-_x)/Q7,kx+=(t-kx)/Q7,Tx+=(n-Tx)/Q7}function xZ(){P2.point=WCe}function WCe(e,t){e*=Re,t*=Re;var n=pe(t);i1=n*pe(e),o1=n*fe(e),a1=fe(t),P2.point=YCe,K7(i1,o1,a1)}function YCe(e,t){e*=Re,t*=Re;var n=pe(t),r=n*pe(e),i=n*fe(e),o=fe(t),a=Nn(Bt((a=o1*o-a1*i)*a+(a=a1*r-i1*o)*a+(a=i1*i-o1*r)*a),i1*r+o1*i+a1*o);Nx+=a,Ix+=a*(i1+(i1=r)),Fx+=a*(o1+(o1=i)),Rx+=a*(a1+(a1=o)),K7(i1,o1,a1)}function CZ(){P2.point=GN}function XCe(){P2.point=KCe}function QCe(){wZ(bZ,MZ),P2.point=GN}function KCe(e,t){bZ=e,MZ=t,e*=Re,t*=Re,P2.point=wZ;var n=pe(t);i1=n*pe(e),o1=n*fe(e),a1=fe(t),K7(i1,o1,a1)}function wZ(e,t){e*=Re,t*=Re;var n=pe(t),r=n*pe(e),i=n*fe(e),o=fe(t),a=o1*o-a1*i,s=a1*r-i1*o,c=i1*i-o1*r,l=Dx(a,s,c),u=ln(l),f=l&&-u/l;UN.add(f*a),jN.add(f*s),qN.add(f*c),Nx+=u,Ix+=u*(i1+(i1=r)),Fx+=u*(o1+(o1=i)),Rx+=u*(a1+(a1=o)),K7(i1,o1,a1)}function WN(e){Q7=Nx=_x=kx=Tx=Ix=Fx=Rx=0,UN=new mn,jN=new mn,qN=new mn,N1(e,P2);var t=+UN,n=+jN,r=+qN,i=Dx(t,n,r);return i<Zl&&(t=Ix,n=Fx,r=Rx,Nx<he&&(t=_x,n=kx,r=Tx),i=Dx(t,n,r),i<Zl)?[NaN,NaN]:[Nn(n,t)*$t,ln(r/i)*$t]}function Z7(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function YN(e,t){return Fe(e)>$e&&(e-=Math.round(e/Wn)*Wn),[e,t]}YN.invert=YN;function XN(e,t,n){return(e%=Wn)?t||n?Z7(EZ(e),DZ(t,n)):EZ(e):t||n?DZ(t,n):YN}function SZ(e){return function(t,n){return t+=e,Fe(t)>$e&&(t-=Math.round(t/Wn)*Wn),[t,n]}}function EZ(e){var t=SZ(e);return t.invert=SZ(-e),t}function DZ(e,t){var n=pe(e),r=fe(e),i=pe(t),o=fe(t);function a(s,c){var l=pe(c),u=pe(s)*l,f=fe(s)*l,d=fe(c),p=d*n+u*r;return[Nn(f*i-p*o,u*n-d*r),ln(p*i+f*o)]}return a.invert=function(s,c){var l=pe(c),u=pe(s)*l,f=fe(s)*l,d=fe(c),p=d*i-f*o;return[Nn(f*i+d*o,u*n+p*r),ln(p*n-u*r)]},a}function zZ(e){e=XN(e[0]*Re,e[1]*Re,e.length>2?e[2]*Re:0);function t(n){return n=e(n[0]*Re,n[1]*Re),n[0]*=$t,n[1]*=$t,n}return t.invert=function(n){return n=e.invert(n[0]*Re,n[1]*Re),n[0]*=$t,n[1]*=$t,n},t}function LZ(e,t,n,r,i,o){if(n){var a=pe(t),s=fe(t),c=r*n;i==null?(i=t+r*Wn,o=t-c/2):(i=HZ(a,i),o=HZ(a,o),(r>0?i<o:i>o)&&(i+=r*Wn));for(var l,u=i;r>0?u>o:u<o;u-=c)l=e0([a,-s*pe(u),-s*fe(u)]),e.point(l[0],l[1])}}function HZ(e,t){t=Zo(t),t[0]-=e,t0(t);var n=Hx(-t[1]);return((-t[2]<0?-n:n)+Wn-he)%Wn}function Ox(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:un,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Pu(e,t){return Fe(e[0]-t[0])<he&&Fe(e[1]-t[1])<he}function Px(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function $x(e,t,n,r,i){var o=[],a=[],s,c;if(e.forEach(function(h){if(!((m=h.length-1)<=0)){var m,g=h[0],v=h[m],y;if(Pu(g,v)){if(!g[2]&&!v[2]){for(i.lineStart(),s=0;s<m;++s)i.point((g=h[s])[0],g[1]);i.lineEnd();return}v[0]+=2*he}o.push(y=new Px(g,h,null,!0)),a.push(y.o=new Px(g,null,y,!1)),o.push(y=new Px(v,h,null,!1)),a.push(y.o=new Px(v,null,y,!0))}}),!!o.length){for(a.sort(t),AZ(o),AZ(a),s=0,c=a.length;s<c;++s)a[s].e=n=!n;for(var l=o[0],u,f;;){for(var d=l,p=!0;d.v;)if((d=d.n)===l)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,c=u.length;s<c;++s)i.point((f=u[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(u=d.p.z,s=u.length-1;s>=0;--s)i.point((f=u[s])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,u=d.z,p=!p}while(!d.v);i.lineEnd()}}}function AZ(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function QN(e){return Fe(e[0])<=$e?e[0]:Ei(e[0])*((Fe(e[0])+$e)%Wn-$e)}function VZ(e,t){var n=QN(t),r=t[1],i=fe(r),o=[fe(n),-pe(n),0],a=0,s=0,c=new mn;i===1?r=Pt+he:i===-1&&(r=-Pt-he);for(var l=0,u=e.length;l<u;++l)if(d=(f=e[l]).length)for(var f,d,p=f[d-1],h=QN(p),m=p[1]/2+Fu,g=fe(m),v=pe(m),y=0;y<d;++y,h=b,g=S,v=w,p=C){var C=f[y],b=QN(C),M=C[1]/2+Fu,S=fe(M),w=pe(M),E=b-h,D=E>=0?1:-1,H=D*E,A=H>$e,j=g*S;if(c.add(Nn(j*D*fe(H),v*w+j*pe(H))),a+=A?E+D*Wn:E,A^h>=n^b>=n){var V=xc(Zo(p),Zo(C));t0(V);var _=xc(o,V);t0(_);var N=(A^E>=0?-1:1)*ln(_[2]);(r>N||r===N&&(V[0]||V[1]))&&(s+=A^E>=0?1:-1)}}return(a<-he||a<he&&c<-Zl)^s&1}function Bx(e,t,n,r){return function(i){var o=t(i),a=Ox(),s=t(a),c=!1,l,u,f,d={point:p,lineStart:m,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=C,u=[],l=[]},polygonEnd:function(){d.point=p,d.lineStart=m,d.lineEnd=g,u=Z6(u);var b=VZ(l,r);u.length?(c||(i.polygonStart(),c=!0),$x(u,JCe,b,n,i)):b&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),u=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(b,M){e(b,M)&&i.point(b,M)}function h(b,M){o.point(b,M)}function m(){d.point=h,o.lineStart()}function g(){d.point=p,o.lineEnd()}function v(b,M){f.push([b,M]),s.point(b,M)}function y(){s.lineStart(),f=[]}function C(){v(f[0][0],f[0][1]),s.lineEnd();var b=s.clean(),M=a.result(),S,w=M.length,E,D,H;if(f.pop(),l.push(f),f=null,!!w){if(b&1){if(D=M[0],(E=D.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),S=0;S<E;++S)i.point((H=D[S])[0],H[1]);i.lineEnd()}return}w>1&&b&2&&M.push(M.pop().concat(M.shift())),u.push(M.filter(ZCe))}}return d}}function ZCe(e){return e.length>1}function JCe(e,t){return((e=e.x)[0]<0?e[1]-Pt-he:Pt-e[1])-((t=t.x)[0]<0?t[1]-Pt-he:Pt-t[1])}var KN=Bx(function(){return!0},ebe,nbe,[-$e,-Pt]);function ebe(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var s=o>0?$e:-$e,c=Fe(o-t);Fe(c-$e)<he?(e.point(t,n=(n+a)/2>0?Pt:-Pt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),i=0):r!==s&&c>=$e&&(Fe(t-r)<he&&(t-=r*he),Fe(o-s)<he&&(o-=s*he),n=tbe(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=o,n=a),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function tbe(e,t,n,r){var i,o,a=fe(e-n);return Fe(a)>he?Ko((fe(t)*(o=pe(r))*fe(n)-fe(r)*(i=pe(t))*fe(e))/(i*o*a)):(t+r)/2}function nbe(e,t,n,r){var i;if(e==null)i=n*Pt,r.point(-$e,i),r.point(0,i),r.point($e,i),r.point($e,0),r.point($e,-i),r.point(0,-i),r.point(-$e,-i),r.point(-$e,0),r.point(-$e,i);else if(Fe(e[0]-t[0])>he){var o=e[0]<t[0]?$e:-$e;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function NZ(e){var t=pe(e),n=6*Re,r=t>0,i=Fe(t)>he;function o(u,f,d,p){LZ(p,e,n,d,u,f)}function a(u,f){return pe(u)*pe(f)>t}function s(u){var f,d,p,h,m;return{lineStart:function(){h=p=!1,m=1},point:function(g,v){var y=[g,v],C,b=a(g,v),M=r?b?0:l(g,v):b?l(g+(g<0?$e:-$e),v):0;if(!f&&(h=p=b)&&u.lineStart(),b!==p&&(C=c(f,y),(!C||Pu(f,C)||Pu(y,C))&&(y[2]=1)),b!==p)m=0,b?(u.lineStart(),C=c(y,f),u.point(C[0],C[1])):(C=c(f,y),u.point(C[0],C[1],2),u.lineEnd()),f=C;else if(i&&f&&r^b){var S;!(M&d)&&(S=c(y,f,!0))&&(m=0,r?(u.lineStart(),u.point(S[0][0],S[0][1]),u.point(S[1][0],S[1][1]),u.lineEnd()):(u.point(S[1][0],S[1][1]),u.lineEnd(),u.lineStart(),u.point(S[0][0],S[0][1],3)))}b&&(!f||!Pu(f,y))&&u.point(y[0],y[1]),f=y,p=b,d=M},lineEnd:function(){p&&u.lineEnd(),f=null},clean:function(){return m|(h&&p)<<1}}}function c(u,f,d){var p=Zo(u),h=Zo(f),m=[1,0,0],g=xc(p,h),v=W7(g,g),y=g[0],C=v-y*y;if(!C)return!d&&u;var b=t*v/C,M=-t*y/C,S=xc(m,g),w=Y7(m,b),E=Y7(g,M);Vx(w,E);var D=S,H=W7(w,D),A=W7(D,D),j=H*H-A*(W7(w,w)-1);if(!(j<0)){var V=Bt(j),_=Y7(D,(-H-V)/A);if(Vx(_,w),_=e0(_),!d)return _;var N=u[0],I=f[0],G=u[1],X=f[1],J;I<N&&(J=N,N=I,I=J);var we=I-N,Se=Fe(we-$e)<he,Ye=Se||we<he;if(!Se&&X<G&&(J=G,G=X,X=J),Ye?Se?G+X>0^_[1]<(Fe(_[0]-N)<he?G:X):G<=_[1]&&_[1]<=X:we>$e^(N<=_[0]&&_[0]<=I)){var bt=Y7(D,(-H+V)/A);return Vx(bt,w),[_,e0(bt)]}}}function l(u,f){var d=r?e:$e-e,p=0;return u<-d?p|=1:u>d&&(p|=2),f<-d?p|=4:f>d&&(p|=8),p}return Bx(a,s,o,r?[0,-e]:[-$e,e-$e])}function _Z(e,t,n,r,i,o){var a=e[0],s=e[1],c=t[0],l=t[1],u=0,f=1,d=c-a,p=l-s,h;if(h=n-a,!(!d&&h>0)){if(h/=d,d<0){if(h<u)return;h<f&&(f=h)}else if(d>0){if(h>f)return;h>u&&(u=h)}if(h=i-a,!(!d&&h<0)){if(h/=d,d<0){if(h>f)return;h>u&&(u=h)}else if(d>0){if(h<u)return;h<f&&(f=h)}if(h=r-s,!(!p&&h>0)){if(h/=p,p<0){if(h<u)return;h<f&&(f=h)}else if(p>0){if(h>f)return;h>u&&(u=h)}if(h=o-s,!(!p&&h<0)){if(h/=p,p<0){if(h>f)return;h>u&&(u=h)}else if(p>0){if(h<u)return;h<f&&(f=h)}return u>0&&(e[0]=a+u*d,e[1]=s+u*p),f<1&&(t[0]=a+f*d,t[1]=s+f*p),!0}}}}}var J7=1e9,Ux=-J7;function ep(e,t,n,r){function i(l,u){return e<=l&&l<=n&&t<=u&&u<=r}function o(l,u,f,d){var p=0,h=0;if(l==null||(p=a(l,f))!==(h=a(u,f))||c(l,u)<0^f>0)do d.point(p===0||p===3?e:n,p>1?r:t);while((p=(p+f+4)%4)!==h);else d.point(u[0],u[1])}function a(l,u){return Fe(l[0]-e)<he?u>0?0:3:Fe(l[0]-n)<he?u>0?2:1:Fe(l[1]-t)<he?u>0?1:0:u>0?3:2}function s(l,u){return c(l.x,u.x)}function c(l,u){var f=a(l,1),d=a(u,1);return f!==d?f-d:f===0?u[1]-l[1]:f===1?l[0]-u[0]:f===2?l[1]-u[1]:u[0]-l[0]}return function(l){var u=l,f=Ox(),d,p,h,m,g,v,y,C,b,M,S,w={point:E,lineStart:j,lineEnd:V,polygonStart:H,polygonEnd:A};function E(N,I){i(N,I)&&u.point(N,I)}function D(){for(var N=0,I=0,G=p.length;I<G;++I)for(var X=p[I],J=1,we=X.length,Se=X[0],Ye,bt,st=Se[0],Kt=Se[1];J<we;++J)Ye=st,bt=Kt,Se=X[J],st=Se[0],Kt=Se[1],bt<=r?Kt>r&&(st-Ye)*(r-bt)>(Kt-bt)*(e-Ye)&&++N:Kt<=r&&(st-Ye)*(r-bt)<(Kt-bt)*(e-Ye)&&--N;return N}function H(){u=f,d=[],p=[],S=!0}function A(){var N=D(),I=S&&N,G=(d=Z6(d)).length;(I||G)&&(l.polygonStart(),I&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),G&&$x(d,s,N,o,l),l.polygonEnd()),u=l,d=p=h=null}function j(){w.point=_,p&&p.push(h=[]),M=!0,b=!1,y=C=NaN}function V(){d&&(_(m,g),v&&b&&f.rejoin(),d.push(f.result())),w.point=E,b&&u.lineEnd()}function _(N,I){var G=i(N,I);if(p&&h.push([N,I]),M)m=N,g=I,v=G,M=!1,G&&(u.lineStart(),u.point(N,I));else if(G&&b)u.point(N,I);else{var X=[y=Math.max(Ux,Math.min(J7,y)),C=Math.max(Ux,Math.min(J7,C))],J=[N=Math.max(Ux,Math.min(J7,N)),I=Math.max(Ux,Math.min(J7,I))];_Z(X,J,e,t,n,r)?(b||(u.lineStart(),u.point(X[0],X[1])),u.point(J[0],J[1]),G||u.lineEnd(),S=!1):G&&(u.lineStart(),u.point(N,I),S=!1)}y=N,C=I,b=G}return w}}function kZ(e,t,n){var r=Gn(e,t-he,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function TZ(e,t,n){var r=Gn(e,t-he,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function jx(){var e,t,n,r,i,o,a,s,c=10,l=c,u=90,f=360,d,p,h,m,g=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return Gn(q7(r/u)*u,n,u).map(h).concat(Gn(q7(s/f)*f,a,f).map(m)).concat(Gn(q7(t/c)*c,e,c).filter(function(C){return Fe(C%u)>he}).map(d)).concat(Gn(q7(o/l)*l,i,l).filter(function(C){return Fe(C%f)>he}).map(p))}return v.lines=function(){return y().map(function(C){return{type:"LineString",coordinates:C}})},v.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(m(a).slice(1),h(n).reverse().slice(1),m(s).reverse().slice(1))]}},v.extent=function(C){return arguments.length?v.extentMajor(C).extentMinor(C):v.extentMinor()},v.extentMajor=function(C){return arguments.length?(r=+C[0][0],n=+C[1][0],s=+C[0][1],a=+C[1][1],r>n&&(C=r,r=n,n=C),s>a&&(C=s,s=a,a=C),v.precision(g)):[[r,s],[n,a]]},v.extentMinor=function(C){return arguments.length?(t=+C[0][0],e=+C[1][0],o=+C[0][1],i=+C[1][1],t>e&&(C=t,t=e,e=C),o>i&&(C=o,o=i,i=C),v.precision(g)):[[t,o],[e,i]]},v.step=function(C){return arguments.length?v.stepMajor(C).stepMinor(C):v.stepMinor()},v.stepMajor=function(C){return arguments.length?(u=+C[0],f=+C[1],v):[u,f]},v.stepMinor=function(C){return arguments.length?(c=+C[0],l=+C[1],v):[c,l]},v.precision=function(C){return arguments.length?(g=+C,d=kZ(o,i,90),p=TZ(t,e,g),h=kZ(s,a,90),m=TZ(r,n,g),v):g},v.extentMajor([[-180,-90+he],[180,90-he]]).extentMinor([[-180,-80-he],[180,80+he]])}var o4=e=>e;var ZN=new mn,JN=new mn,IZ,FZ,e_,t_,a4={point:un,lineStart:un,lineEnd:un,polygonStart:function(){a4.lineStart=rbe,a4.lineEnd=obe},polygonEnd:function(){a4.lineStart=a4.lineEnd=a4.point=un,ZN.add(Fe(JN)),JN=new mn},result:function(){var e=ZN/2;return ZN=new mn,e}};function rbe(){a4.point=ibe}function ibe(e,t){a4.point=RZ,IZ=e_=e,FZ=t_=t}function RZ(e,t){JN.add(t_*e-e_*t),e_=e,t_=t}function obe(){RZ(IZ,FZ)}var n_=a4;var $u=1/0,qx=$u,tp=-$u,Gx=tp,abe={point:sbe,lineStart:un,lineEnd:un,polygonStart:un,polygonEnd:un,result:function(){var e=[[$u,qx],[tp,Gx]];return tp=Gx=-(qx=$u=1/0),e}};function sbe(e,t){e<$u&&($u=e),e>tp&&(tp=e),t<qx&&(qx=t),t>Gx&&(Gx=t)}var Bu=abe;var r_=0,i_=0,np=0,Wx=0,Yx=0,Uu=0,o_=0,a_=0,rp=0,$Z,BZ,es,ts,$2={point:r0,lineStart:OZ,lineEnd:PZ,polygonStart:function(){$2.lineStart=ube,$2.lineEnd=fbe},polygonEnd:function(){$2.point=r0,$2.lineStart=OZ,$2.lineEnd=PZ},result:function(){var e=rp?[o_/rp,a_/rp]:Uu?[Wx/Uu,Yx/Uu]:np?[r_/np,i_/np]:[NaN,NaN];return r_=i_=np=Wx=Yx=Uu=o_=a_=rp=0,e}};function r0(e,t){r_+=e,i_+=t,++np}function OZ(){$2.point=cbe}function cbe(e,t){$2.point=lbe,r0(es=e,ts=t)}function lbe(e,t){var n=e-es,r=t-ts,i=Bt(n*n+r*r);Wx+=i*(es+e)/2,Yx+=i*(ts+t)/2,Uu+=i,r0(es=e,ts=t)}function PZ(){$2.point=r0}function ube(){$2.point=dbe}function fbe(){UZ($Z,BZ)}function dbe(e,t){$2.point=UZ,r0($Z=es=e,BZ=ts=t)}function UZ(e,t){var n=e-es,r=t-ts,i=Bt(n*n+r*r);Wx+=i*(es+e)/2,Yx+=i*(ts+t)/2,Uu+=i,i=ts*e-es*t,o_+=i*(es+e),a_+=i*(ts+t),rp+=i*3,r0(es=e,ts=t)}var s_=$2;function Xx(e){this._context=e}Xx.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Wn);break}}},result:un};var l_=new mn,c_,jZ,qZ,ip,op,Qx={point:un,lineStart:function(){Qx.point=pbe},lineEnd:function(){c_&&GZ(jZ,qZ),Qx.point=un},polygonStart:function(){c_=!0},polygonEnd:function(){c_=null},result:function(){var e=+l_;return l_=new mn,e}};function pbe(e,t){Qx.point=GZ,jZ=ip=e,qZ=op=t}function GZ(e,t){ip-=e,op-=t,l_.add(Bt(ip*ip+op*op)),ip=e,op=t}var u_=Qx;var WZ,Kx,YZ,XZ,ap=class{constructor(t){this._append=t==null?QZ:hbe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==YZ||this._append!==Kx){let r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,YZ=r,Kx=this._append,XZ=this._,this._=i}this._+=XZ;break}}}result(){let t=this._;return this._="",t.length?t:null}};function QZ(e){let t=1;this._+=e[0];for(let n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function hbe(e){let t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return QZ;if(t!==WZ){let n=10**t;WZ=t,Kx=function(i){let o=1;this._+=i[0];for(let a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return Kx}function Zx(e,t){let n=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),N1(s,i(o))),o.result()}return a.area=function(s){return N1(s,i(n_)),n_.result()},a.measure=function(s){return N1(s,i(u_)),u_.result()},a.bounds=function(s){return N1(s,i(Bu)),Bu.result()},a.centroid=function(s){return N1(s,i(s_)),s_.result()},a.projection=function(s){return arguments.length?(i=s==null?(e=null,o4):(e=s).stream,a):e},a.context=function(s){return arguments.length?(o=s==null?(t=null,new ap(n)):new Xx(t=s),typeof r!="function"&&o.pointRadius(r),a):t},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{let c=Math.floor(s);if(!(c>=0))throw new RangeError(`invalid digits: ${s}`);n=c}return t===null&&(o=new ap(n)),a},a.projection(e).digits(n).context(t)}function i0(e){return function(t){var n=new f_;for(var r in e)n[r]=e[r];return n.stream=t,n}}function f_(){}f_.prototype={constructor:f_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function d_(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),N1(n,e.stream(Bu)),t(Bu.result()),r!=null&&e.clipExtent(r),e}function o0(e,t,n){return d_(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,c=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,c])},n)}function ju(e,t,n){return o0(e,[[0,0],t],n)}function qu(e,t,n){return d_(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];e.scale(150*o).translate([a,s])},n)}function Gu(e,t,n){return d_(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,s])},n)}var KZ=16,mbe=pe(30*Re);function p_(e,t){return+t?vbe(e,t):gbe(e)}function gbe(e){return i0({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function vbe(e,t){function n(r,i,o,a,s,c,l,u,f,d,p,h,m,g){var v=l-r,y=u-i,C=v*v+y*y;if(C>4*t&&m--){var b=a+d,M=s+p,S=c+h,w=Bt(b*b+M*M+S*S),E=ln(S/=w),D=Fe(Fe(S)-1)<he||Fe(o-f)<he?(o+f)/2:Nn(M,b),H=e(D,E),A=H[0],j=H[1],V=A-r,_=j-i,N=y*V-v*_;(N*N/C>t||Fe((v*V+y*_)/C-.5)>.3||a*d+s*p+c*h<mbe)&&(n(r,i,o,a,s,c,A,j,D,b/=w,M/=w,S,m,g),g.point(A,j),n(A,j,D,b,M,S,l,u,f,d,p,h,m,g))}}return function(r){var i,o,a,s,c,l,u,f,d,p,h,m,g={point:v,lineStart:y,lineEnd:b,polygonStart:function(){r.polygonStart(),g.lineStart=M},polygonEnd:function(){r.polygonEnd(),g.lineStart=y}};function v(E,D){E=e(E,D),r.point(E[0],E[1])}function y(){f=NaN,g.point=C,r.lineStart()}function C(E,D){var H=Zo([E,D]),A=e(E,D);n(f,d,u,p,h,m,f=A[0],d=A[1],u=E,p=H[0],h=H[1],m=H[2],KZ,r),r.point(f,d)}function b(){g.point=v,r.lineEnd()}function M(){y(),g.point=S,g.lineEnd=w}function S(E,D){C(i=E,D),o=f,a=d,s=p,c=h,l=m,g.point=C}function w(){n(f,d,u,p,h,m,o,a,i,s,c,l,KZ,r),g.lineEnd=b,b()}return g}}var ybe=i0({point:function(e,t){this.stream.point(e*Re,t*Re)}});function xbe(e){return i0({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Cbe(e,t,n,r,i){function o(a,s){return a*=r,s*=i,[t+e*a,n-e*s]}return o.invert=function(a,s){return[(a-t)/e*r,(n-s)/e*i]},o}function ZZ(e,t,n,r,i,o){if(!o)return Cbe(e,t,n,r,i);var a=pe(o),s=fe(o),c=a*e,l=s*e,u=a/e,f=s/e,d=(s*n-a*t)/e,p=(s*t+a*n)/e;function h(m,g){return m*=r,g*=i,[c*m-l*g+t,n-l*m-c*g]}return h.invert=function(m,g){return[r*(u*m-f*g+d),i*(p-f*m-u*g)]},h}function kn(e){return Jx(function(){return e})()}function Jx(e){var t,n=150,r=480,i=250,o=0,a=0,s=0,c=0,l=0,u,f=0,d=1,p=1,h=null,m=KN,g=null,v,y,C,b=o4,M=.5,S,w,E,D,H;function A(N){return E(N[0]*Re,N[1]*Re)}function j(N){return N=E.invert(N[0],N[1]),N&&[N[0]*$t,N[1]*$t]}A.stream=function(N){return D&&H===N?D:D=ybe(xbe(u)(m(S(b(H=N)))))},A.preclip=function(N){return arguments.length?(m=N,h=void 0,_()):m},A.postclip=function(N){return arguments.length?(b=N,g=v=y=C=null,_()):b},A.clipAngle=function(N){return arguments.length?(m=+N?NZ(h=N*Re):(h=null,KN),_()):h*$t},A.clipExtent=function(N){return arguments.length?(b=N==null?(g=v=y=C=null,o4):ep(g=+N[0][0],v=+N[0][1],y=+N[1][0],C=+N[1][1]),_()):g==null?null:[[g,v],[y,C]]},A.scale=function(N){return arguments.length?(n=+N,V()):n},A.translate=function(N){return arguments.length?(r=+N[0],i=+N[1],V()):[r,i]},A.center=function(N){return arguments.length?(o=N[0]%360*Re,a=N[1]%360*Re,V()):[o*$t,a*$t]},A.rotate=function(N){return arguments.length?(s=N[0]%360*Re,c=N[1]%360*Re,l=N.length>2?N[2]%360*Re:0,V()):[s*$t,c*$t,l*$t]},A.angle=function(N){return arguments.length?(f=N%360*Re,V()):f*$t},A.reflectX=function(N){return arguments.length?(d=N?-1:1,V()):d<0},A.reflectY=function(N){return arguments.length?(p=N?-1:1,V()):p<0},A.precision=function(N){return arguments.length?(S=p_(w,M=N*N),_()):Bt(M)},A.fitExtent=function(N,I){return o0(A,N,I)},A.fitSize=function(N,I){return ju(A,N,I)},A.fitWidth=function(N,I){return qu(A,N,I)},A.fitHeight=function(N,I){return Gu(A,N,I)};function V(){var N=ZZ(n,0,0,d,p,f).apply(null,t(o,a)),I=ZZ(n,r-N[0],i-N[1],d,p,f);return u=XN(s,c,l),w=Z7(t,I),E=Z7(u,w),S=p_(w,M),_()}function _(){return D=H=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&j,V()}}function Wu(e){var t=0,n=$e/3,r=Jx(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Re,n=o[1]*Re):[t*$t,n*$t]},i}function JZ(e){var t=pe(e);function n(r,i){return[r*t,fe(i)/t]}return n.invert=function(r,i){return[r/t,ln(i*t)]},n}function eJ(e,t){var n=fe(e),r=(n+fe(t))/2;if(Fe(r)<he)return JZ(e);var i=1+n*(2*r-n),o=Bt(i)/r;function a(s,c){var l=Bt(i-2*r*fe(c))/r;return[l*fe(s*=r),o-l*pe(s)]}return a.invert=function(s,c){var l=o-c,u=Nn(s,Fe(l))*Ei(l);return l*r<0&&(u-=$e*Ei(s)*Ei(l)),[u/r,ln((i-(s*s+l*l)*r*r)/(2*r))]},a}function s4(){return Wu(eJ).scale(155.424).center([0,33.6442])}function sp(){return s4().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function bbe(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function h_(){var e,t,n=sp(),r,i=s4().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=s4().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,c,l={point:function(d,p){c=[d,p]}};function u(d){var p=d[0],h=d[1];return c=null,r.point(p,h),c||(o.point(p,h),c)||(s.point(p,h),c)}u.invert=function(d){var p=n.scale(),h=n.translate(),m=(d[0]-h[0])/p,g=(d[1]-h[1])/p;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(d)},u.stream=function(d){return e&&t===d?e:e=bbe([n.stream(t=d),i.stream(d),a.stream(d)])},u.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),a.precision(d),f()):n.precision()},u.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),a.scale(d),u.translate(n.translate())):n.scale()},u.translate=function(d){if(!arguments.length)return n.translate();var p=n.scale(),h=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[h-.455*p,m-.238*p],[h+.455*p,m+.238*p]]).stream(l),o=i.translate([h-.307*p,m+.201*p]).clipExtent([[h-.425*p+he,m+.12*p+he],[h-.214*p-he,m+.234*p-he]]).stream(l),s=a.translate([h-.205*p,m+.212*p]).clipExtent([[h-.214*p+he,m+.166*p+he],[h-.115*p-he,m+.234*p-he]]).stream(l),f()},u.fitExtent=function(d,p){return o0(u,d,p)},u.fitSize=function(d,p){return ju(u,d,p)},u.fitWidth=function(d,p){return qu(u,d,p)},u.fitHeight=function(d,p){return Gu(u,d,p)};function f(){return e=t=null,u}return u.scale(1070)}function eC(e){return function(t,n){var r=pe(t),i=pe(n),o=e(r*i);return o===1/0?[2,0]:[o*i*fe(t),o*fe(n)]}}function ns(e){return function(t,n){var r=Bt(t*t+n*n),i=e(r),o=fe(i),a=pe(i);return[Nn(t*o,r*a),ln(r&&n*o/r)]}}var m_=eC(function(e){return Bt(2/(1+e))});m_.invert=ns(function(e){return 2*ln(e/2)});function g_(){return kn(m_).scale(124.75).clipAngle(180-.001)}var v_=eC(function(e){return(e=Hx(e))&&e/fe(e)});v_.invert=ns(function(e){return e});function y_(){return kn(v_).scale(79.4188).clipAngle(180-.001)}function Yu(e,t){return[e,Jl(Ru((Pt+t)/2))]}Yu.invert=function(e,t){return[e,2*Ko(Ex(t))-Pt]};function x_(){return C_(Yu).scale(961/Wn)}function C_(e){var t=kn(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,s,c,l;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?a=s=c=l=null:(a=+f[0][0],s=+f[0][1],c=+f[1][0],l=+f[1][1]),u()):a==null?null:[[a,s],[c,l]]};function u(){var f=$e*r(),d=t(zZ(t.rotate()).invert([0,0]));return o(a==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===Yu?[[Math.max(d[0]-f,a),s],[Math.min(d[0]+f,c),l]]:[[a,Math.max(d[1]-f,s)],[c,Math.min(d[1]+f,l)]])}return u()}function tC(e){return Ru((Pt+e)/2)}function tJ(e,t){var n=pe(e),r=e===t?fe(e):Jl(n/pe(t))/Jl(tC(t)/tC(e)),i=n*zx(tC(e),r)/r;if(!r)return Yu;function o(a,s){i>0?s<-Pt+he&&(s=-Pt+he):s>Pt-he&&(s=Pt-he);var c=i/zx(tC(s),r);return[c*fe(r*a),i-c*pe(r*a)]}return o.invert=function(a,s){var c=i-s,l=Ei(r)*Bt(a*a+c*c),u=Nn(a,Fe(c))*Ei(c);return c*r<0&&(u-=$e*Ei(a)*Ei(c)),[u/r,2*Ko(zx(i/l,1/r))-Pt]},o}function b_(){return Wu(tJ).scale(109.5).parallels([30,30])}function Xu(e,t){return[e,t]}Xu.invert=Xu;function M_(){return kn(Xu).scale(152.63)}function nJ(e,t){var n=pe(e),r=e===t?fe(e):(n-pe(t))/(t-e),i=n/r+e;if(Fe(r)<he)return Xu;function o(a,s){var c=i-s,l=r*a;return[c*fe(l),i-c*pe(l)]}return o.invert=function(a,s){var c=i-s,l=Nn(a,Fe(c))*Ei(c);return c*r<0&&(l-=$e*Ei(a)*Ei(c)),[l/r,i-Ei(r)*Bt(a*a+c*c)]},o}function w_(){return Wu(nJ).scale(131.154).center([0,13.9389])}var cp=1.340264,lp=-.081106,up=893e-6,fp=.003796,nC=Bt(3)/2,Mbe=12;function S_(e,t){var n=ln(nC*fe(t)),r=n*n,i=r*r*r;return[e*pe(n)/(nC*(cp+3*lp*r+i*(7*up+9*fp*r))),n*(cp+lp*r+i*(up+fp*r))]}S_.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,s,c;o<Mbe&&(s=n*(cp+lp*r+i*(up+fp*r))-t,c=cp+3*lp*r+i*(7*up+9*fp*r),n-=a=s/c,r=n*n,i=r*r*r,!(Fe(a)<Zl));++o);return[nC*e*(cp+3*lp*r+i*(7*up+9*fp*r))/pe(n),ln(fe(n)/nC)]};function E_(){return kn(S_).scale(177.158)}function D_(e,t){var n=pe(t),r=pe(e)*n;return[n*fe(e)/r,fe(t)/r]}D_.invert=ns(Ko);function z_(){return kn(D_).scale(144.049).clipAngle(60)}function H_(){var e=1,t=0,n=0,r=1,i=1,o=0,a,s,c=null,l,u,f,d=1,p=1,h=i0({point:function(b,M){var S=C([b,M]);this.stream.point(S[0],S[1])}}),m=o4,g,v;function y(){return d=e*r,p=e*i,g=v=null,C}function C(b){var M=b[0]*d,S=b[1]*p;if(o){var w=S*a-M*s;M=M*a+S*s,S=w}return[M+t,S+n]}return C.invert=function(b){var M=b[0]-t,S=b[1]-n;if(o){var w=S*a+M*s;M=M*a-S*s,S=w}return[M/d,S/p]},C.stream=function(b){return g&&v===b?g:g=h(m(v=b))},C.postclip=function(b){return arguments.length?(m=b,c=l=u=f=null,y()):m},C.clipExtent=function(b){return arguments.length?(m=b==null?(c=l=u=f=null,o4):ep(c=+b[0][0],l=+b[0][1],u=+b[1][0],f=+b[1][1]),y()):c==null?null:[[c,l],[u,f]]},C.scale=function(b){return arguments.length?(e=+b,y()):e},C.translate=function(b){return arguments.length?(t=+b[0],n=+b[1],y()):[t,n]},C.angle=function(b){return arguments.length?(o=b%360*Re,s=fe(o),a=pe(o),y()):o*$t},C.reflectX=function(b){return arguments.length?(r=b?-1:1,y()):r<0},C.reflectY=function(b){return arguments.length?(i=b?-1:1,y()):i<0},C.fitExtent=function(b,M){return o0(C,b,M)},C.fitSize=function(b,M){return ju(C,b,M)},C.fitWidth=function(b,M){return qu(C,b,M)},C.fitHeight=function(b,M){return Gu(C,b,M)},C}function L_(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}L_.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,a=o*o;n-=i=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(Fe(i)>he&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function A_(){return kn(L_).scale(175.295)}function V_(e,t){return[pe(t)*fe(e),fe(t)]}V_.invert=ns(ln);function N_(){return kn(V_).scale(249.5).clipAngle(90+he)}function __(e,t){var n=pe(t),r=1+pe(e)*n;return[n*fe(e)/r,fe(t)/r]}__.invert=ns(function(e){return 2*Ko(e)});function k_(){return kn(__).scale(250).clipAngle(142)}function T_(e,t){return[Jl(Ru((Pt+t)/2)),-e]}T_.invert=function(e,t){return[-t,2*Ko(Ex(e))-Pt]};function I_(){var e=C_(T_),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var rJ=Math.abs;var iC=Math.cos;var dp=Math.sin;var iJ=1e-6;var c4=Math.PI,rC=c4/2,aat=c4/4;var F_=oJ(2),sat=oJ(c4),cat=c4*2,lat=180/c4,uat=c4/180;function R_(e){return e>1?rC:e<-1?-rC:Math.asin(e)}function oJ(e){return e>0?Math.sqrt(e):0}function wbe(e,t){var n=e*dp(t),r=30,i;do t-=i=(t+dp(t)-n)/(1+iC(t));while(rJ(i)>iJ&&--r>0);return t/2}function Sbe(e,t,n){function r(i,o){return[e*i*iC(o=wbe(n,o)),t*dp(o)]}return r.invert=function(i,o){return o=R_(o/t),[i/(e*iC(o)),R_((2*o+dp(2*o))/n)]},r}var aJ=Sbe(F_/rC,F_,c4);function O_(){return kn(aJ).scale(169.529)}var Ebe=Zx(),aC=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Dbe(e,t){return function n(){let r=t();return r.type=e,r.path=Zx().projection(r),r.copy=r.copy||function(){let i=n();return aC.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},mV(r)}}function pp(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(oC[e]=Dbe(e,t),this):oC[e]||null}function P_(e){return e&&e.path||Ebe}var oC={albers:sp,albersusa:h_,azimuthalequalarea:g_,azimuthalequidistant:y_,conicconformal:b_,conicequalarea:s4,conicequidistant:w_,equalEarth:E_,equirectangular:M_,gnomonic:z_,identity:H_,mercator:x_,mollweide:O_,naturalEarth1:A_,orthographic:N_,stereographic:k_,transversemercator:I_};for(let e in oC)pp(e,oC[e]);function zbe(){}var Mc=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function lJ(){var e=1,t=1,n=s;function r(c,l){return l.map(u=>i(c,u))}function i(c,l){var u=[],f=[];return o(c,l,d=>{n(d,c,l),Hbe(d)>0?u.push([d]):f.push(d)}),f.forEach(d=>{for(var p=0,h=u.length,m;p<h;++p)if(Lbe((m=u[p])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:u}}function o(c,l,u){var f=new Array,d=new Array,p,h,m,g,v,y;for(p=h=-1,g=c[0]>=l,Mc[g<<1].forEach(C);++p<e-1;)m=g,g=c[p+1]>=l,Mc[m|g<<1].forEach(C);for(Mc[g<<0].forEach(C);++h<t-1;){for(p=-1,g=c[h*e+e]>=l,v=c[h*e]>=l,Mc[g<<1|v<<2].forEach(C);++p<e-1;)m=g,g=c[h*e+e+p+1]>=l,y=v,v=c[h*e+p+1]>=l,Mc[m|g<<1|v<<2|y<<3].forEach(C);Mc[g|v<<3].forEach(C)}for(p=-1,v=c[h*e]>=l,Mc[v<<2].forEach(C);++p<e-1;)y=v,v=c[h*e+p+1]>=l,Mc[v<<2|y<<3].forEach(C);Mc[v<<3].forEach(C);function C(b){var M=[b[0][0]+p,b[0][1]+h],S=[b[1][0]+p,b[1][1]+h],w=a(M),E=a(S),D,H;(D=d[w])?(H=f[E])?(delete d[D.end],delete f[H.start],D===H?(D.ring.push(S),u(D.ring)):f[D.start]=d[H.end]={start:D.start,end:H.end,ring:D.ring.concat(H.ring)}):(delete d[D.end],D.ring.push(S),d[D.end=E]=D):(D=f[E])?(H=d[w])?(delete f[D.start],delete d[H.end],D===H?(D.ring.push(S),u(D.ring)):f[H.start]=d[D.end]={start:H.start,end:D.end,ring:H.ring.concat(D.ring)}):(delete f[D.start],D.ring.unshift(M),f[D.start=w]=D):f[w]=d[E]={start:w,end:E,ring:[M,S]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function s(c,l,u){c.forEach(f=>{var d=f[0],p=f[1],h=d|0,m=p|0,g,v=l[m*e+h];d>0&&d<e&&h===d&&(g=l[m*e+h-1],f[0]=d+(u-g)/(v-g)-.5),p>0&&p<t&&m===p&&(g=l[(m-1)*e+h],f[1]=p+(u-g)/(v-g)-.5)})}return r.contour=i,r.size=function(c){if(!arguments.length)return[e,t];var l=Math.floor(c[0]),u=Math.floor(c[1]);return l>=0&&u>=0||$("invalid size"),e=l,t=u,r},r.smooth=function(c){return arguments.length?(n=c?s:zbe,r):n===s},r}function Hbe(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Lbe(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Abe(e,t[n]))return i;return 0}function Abe(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var c=e[o],l=c[0],u=c[1],f=e[s],d=f[0],p=f[1];if(Vbe(c,f,t))return 0;u>r!=p>r&&n<(d-l)*(r-u)/(p-u)+l&&(i=-i)}return i}function Vbe(e,t,n){var r;return Nbe(e,t,n)&&_be(e[r=+(e[0]===t[0])],n[r],t[r])}function Nbe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function _be(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function uJ(e,t,n){return function(r){var i=Yi(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,c=t?Xi(o,a,e):s/(e+1);return Gn(o+c,a,c)}}function U_(e){P.call(this,null,e)}U_.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ee(U_,P,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||An,o=lJ().smooth(e.smooth!==!1),a=e.thresholds||kbe(r,i,e),s=e.as===null?null:e.as||"contour",c=[];return r.forEach(l=>{let u=i(l),f=o.size([u.width,u.height])(u.values,F(a)?a:a(u.values));Tbe(f,u,l,e),f.forEach(d=>{c.push(zl(l,at(s!=null?{[s]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function kbe(e,t,n){let r=uJ(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Po(t(i).values)))}function Tbe(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(ke(i)&&(i=i(n,r)),ke(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;let a=(Oe(i)?i:i[0])||1,s=(Oe(i)?i:i[1])||1,c=o&&o[0]||0,l=o&&o[1]||0;e.forEach(fJ(t,a,s,c,l))}function fJ(e,t,n,r,i){let o=e.x1||0,a=e.y1||0,s=t*n<0;function c(f){f.forEach(l)}function l(f){s&&f.reverse(),f.forEach(u)}function u(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-a)*n+i}return function(f){return f.coordinates.forEach(c),f}}function sJ(e,t,n){let r=e>=0?e:_v(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function $_(e){return ke(e)?e:hn(+e)}function dJ(){var e=c=>c[0],t=c=>c[1],n=Ia,r=[-1,-1],i=960,o=500,a=2;function s(c,l){let u=sJ(r[0],c,e)>>a,f=sJ(r[1],c,t)>>a,d=u?u+2:0,p=f?f+2:0,h=2*d+(i>>a),m=2*p+(o>>a),g=new Float32Array(h*m),v=new Float32Array(h*m),y=g;c.forEach(b=>{let M=d+(+e(b)>>a),S=p+(+t(b)>>a);M>=0&&M<h&&S>=0&&S<m&&(g[M+S*h]+=+n(b))}),u>0&&f>0?(Qu(h,m,g,v,u),Ku(h,m,v,g,f),Qu(h,m,g,v,u),Ku(h,m,v,g,f),Qu(h,m,g,v,u),Ku(h,m,v,g,f)):u>0?(Qu(h,m,g,v,u),Qu(h,m,v,g,u),Qu(h,m,g,v,u),y=v):f>0&&(Ku(h,m,g,v,f),Ku(h,m,v,g,f),Ku(h,m,g,v,f),y=v);let C=l?Math.pow(2,-2*a):1/J6(y);for(let b=0,M=h*m;b<M;++b)y[b]*=C;return{values:y,scale:1<<a,width:h,height:m,x1:d,y1:p,x2:d+(i>>a),y2:p+(o>>a)}}return s.x=function(c){return arguments.length?(e=$_(c),s):e},s.y=function(c){return arguments.length?(t=$_(c),s):t},s.weight=function(c){return arguments.length?(n=$_(c),s):n},s.size=function(c){if(!arguments.length)return[i,o];var l=+c[0],u=+c[1];return l>=0&&u>=0||$("invalid size"),i=l,o=u,s},s.cellSize=function(c){return arguments.length?((c=+c)>=1||$("invalid cell size"),a=Math.floor(Math.log(c)/Math.LN2),s):1<<a},s.bandwidth=function(c){return arguments.length?(c=te(c),c.length===1&&(c=[+c[0],+c[0]]),c.length!==2&&$("invalid bandwidth"),r=c,s):r},s}function Qu(e,t,n,r,i){let o=(i<<1)+1;for(let a=0;a<t;++a)for(let s=0,c=0;s<e+i;++s)s<e&&(c+=n[s+a*e]),s>=i&&(s>=o&&(c-=n[s-o+a*e]),r[s-i+a*e]=c/Math.min(s+1,e-1+o-s,o))}function Ku(e,t,n,r,i){let o=(i<<1)+1;for(let a=0;a<e;++a)for(let s=0,c=0;s<t+i;++s)s<t&&(c+=n[a+s*e]),s>=i&&(s>=o&&(c-=n[a+(s-o)*e]),r[a+(s-i)*e]=c/Math.min(s+1,t-1+o-s,o))}function j_(e){P.call(this,null,e)}j_.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var Ibe=["x","y","weight","size","cellSize","bandwidth"];function pJ(e,t){return Ibe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ee(j_,P,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Fbe(r,e.groupby),o=(e.groupby||[]).map(cn),a=pJ(dJ(),e),s=e.as||"grid",c=[];function l(u,f){for(let d=0;d<o.length;++d)u[o[d]]=f[d];return u}return c=i.map(u=>at(l({[s]:a(u,e.counts)},u.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function Fbe(e,t){var n=[],r=u=>u(s),i,o,a,s,c,l;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],c=t.map(r),l=i[c],l||(i[c]=l=[],l.dims=c,n.push(l)),l.push(s);return n}function q_(e){P.call(this,null,e)}q_.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ee(q_,P,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=lJ().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||uJ(e.count||10,e.nice,!!i),a=e.size,s,c;return i||(i=t.materialize(t.SOURCE).source,s=pJ(dJ(),e)(i,!0),c=fJ(s,s.scale||1,s.scale||1,0,0),a=[s.width,s.height],i=s.values),o=F(o)?o:o(i),i=r.size(a)(i,o),c&&i.forEach(c),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(at),n}});var B_="Feature",G_="FeatureCollection",Rbe="MultiPoint";function W_(e){P.call(this,null,e)}W_.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ee(W_,P,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],a=i&&i[1],s=e.geojson||!i&&An,c=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(dr(s))||o&&t.modified(dr(o))||a&&t.modified(dr(a)),(!this.value||l)&&(c=t.SOURCE,this._features=n=[],this._points=r=[]),s&&t.visit(c,u=>n.push(s(u))),o&&a&&(t.visit(c,u=>{var f=o(u),d=a(u);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:B_,geometry:{type:Rbe,coordinates:r}})),this.value={type:G_,features:n}}});function Y_(e){P.call(this,null,e)}Y_.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ee(Y_,P,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||An,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=P_(e.projection),n.materialize().reflow()):a=i===An||t.modified(i.fields)?n.ADD_MOD:n.ADD;let s=Obe(r,e.pointRadius);return n.visit(a,c=>c[o]=r(i(c))),r.pointRadius(s),n.modifies(o)}});function Obe(e,t){let n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function X_(e){P.call(this,null,e)}X_.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ee(X_,P,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],a=o[0],s=o[1],c;function l(u){let f=n([r(u),i(u)]);f?(u[a]=f[0],u[s]=f[1]):(u[a]=void 0,u[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(c=t.modified(r.fields)||t.modified(i.fields),t.visit(c?t.ADD_MOD:t.ADD,l)),t.modifies(o)}});function Q_(e){P.call(this,null,e)}Q_.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ee(Q_,P,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=Pbe(P_(e.projection),e.field||Dr("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,a=>a[i]=r),n.modifies(i)}});function Pbe(e,t,n){let r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),a=e.pointRadius(n)(t(i));return e.pointRadius(o),a};return r.context=i=>(e.context(i),r),r}function K_(e){P.call(this,[],e),this.generator=jx()}K_.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ee(K_,P,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(let o in e)ke(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(Hv(n[0],i)):t.add.push(at(i)),n[0]=i,t}});function Z_(e){P.call(this,null,e)}Z_.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ee(Z_,P,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||An,o=Bbe(e.opacity,e),a=$be(e.color,e),s=e.as||"image",c={$x:0,$y:0,$value:0,$max:r?Po(n.map(l=>Po(i(l).values))):0};return n.forEach(l=>{let u=i(l),f=_e({},l,c);r||(f.$max=Po(u.values||[])),l[s]=Ube(u,f,a.dep?a:hn(a(f)),o.dep?o:hn(o(f)))}),t.reflow(!0).modifies(s)}});function $be(e,t){let n;return ke(e)?(n=r=>Wo(e(r,t)),n.dep=hJ(e)):n=hn(Wo(e||"#888")),n}function Bbe(e,t){let n;return ke(e)?(n=r=>e(r,t),n.dep=hJ(e)):e?n=hn(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function hJ(e){if(!ke(e))return!1;let t=hr(dr(e));return t.$x||t.$y||t.$value||t.$max}function Ube(e,t,n,r){let i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,c=e.x2||i,l=e.y2||o,u=e.values,f=u?g=>u[g]:z2,d=Go(c-a,l-s),p=d.getContext("2d"),h=p.getImageData(0,0,c-a,l-s),m=h.data;for(let g=s,v=0;g<l;++g){t.$y=g-s;for(let y=a,C=g*i;y<c;++y,v+=4){t.$x=y-a,t.$value=f(y+C);let b=n(t);m[v+0]=b.r,m[v+1]=b.g,m[v+2]=b.b,m[v+3]=~~(255*r(t))}}return p.putImageData(h,0,0),d}function mJ(e){P.call(this,null,e),this.modified(!0)}ee(mJ,P,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=qbe(e.type),aC.forEach(r=>{e[r]!=null&&cJ(n,r,e[r])})):aC.forEach(r=>{e.modified(r)&&cJ(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&jbe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function jbe(e,t){let n=Gbe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function qbe(e){let t=pp((e||"mercator").toLowerCase());return t||$("Unrecognized projection type: "+e),t()}function cJ(e,t,n){ke(e[t])&&e[t](n)}function Gbe(e){return e=te(e),e.length===1?e[0]:{type:G_,features:e.reduce((t,n)=>t.concat(Wbe(n)),[])}}function Wbe(e){return e.type===G_?e.features:te(e).filter(t=>t!=null).map(t=>t.type===B_?t:{type:B_,geometry:t})}var pk={};br(pk,{force:()=>dk});function ek(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,a=n.length,s,c=0,l=0;for(o=0;o<a;++o)s=n[o],c+=s.x,l+=s.y;for(c=(c/a-e)*r,l=(l/a-t)*r,o=0;o<a;++o)s=n[o],s.x-=c,s.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function gJ(e){let t=+this._x.call(null,e),n=+this._y.call(null,e);return vJ(this.cover(t,n),t,n,e)}function vJ(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,a={data:r},s=e._x0,c=e._y0,l=e._x1,u=e._y1,f,d,p,h,m,g,v,y;if(!o)return e._root=a,e;for(;o.length;)if((m=t>=(f=(s+l)/2))?s=f:l=f,(g=n>=(d=(c+u)/2))?c=d:u=d,i=o,!(o=o[v=g<<1|m]))return i[v]=a,e;if(p=+e._x.call(null,o.data),h=+e._y.call(null,o.data),t===p&&n===h)return a.next=o,i?i[v]=a:e._root=a,e;do i=i?i[v]=new Array(4):e._root=new Array(4),(m=t>=(f=(s+l)/2))?s=f:l=f,(g=n>=(d=(c+u)/2))?c=d:u=d;while((v=g<<1|m)===(y=(h>=d)<<1|p>=f));return i[y]=o,i[v]=a,e}function yJ(e){var t,n,r=e.length,i,o,a=new Array(r),s=new Array(r),c=1/0,l=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=i,s[n]=o,i<c&&(c=i),i>u&&(u=i),o<l&&(l=o),o>f&&(f=o));if(c>u||l>f)return this;for(this.cover(c,l).cover(u,f),n=0;n<r;++n)vJ(this,a[n],s[n],e[n]);return this}function xJ(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a=i-n||1,s=this._root,c,l;n>e||e>=i||r>t||t>=o;)switch(l=(t<r)<<1|e<n,c=new Array(4),c[l]=s,s=c,a*=2,l){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function CJ(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function bJ(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ar(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function MJ(e,t,n){var r,i=this._x0,o=this._y0,a,s,c,l,u=this._x1,f=this._y1,d=[],p=this._root,h,m;for(p&&d.push(new Ar(p,i,o,u,f)),n==null?n=1/0:(i=e-n,o=t-n,u=e+n,f=t+n,n*=n);h=d.pop();)if(!(!(p=h.node)||(a=h.x0)>u||(s=h.y0)>f||(c=h.x1)<i||(l=h.y1)<o))if(p.length){var g=(a+c)/2,v=(s+l)/2;d.push(new Ar(p[3],g,v,c,l),new Ar(p[2],a,v,g,l),new Ar(p[1],g,s,c,v),new Ar(p[0],a,s,g,v)),(m=(t>=v)<<1|e>=g)&&(h=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=h)}else{var y=e-+this._x.call(null,p.data),C=t-+this._y.call(null,p.data),b=y*y+C*C;if(b<n){var M=Math.sqrt(n=b);i=e-M,o=t-M,u=e+M,f=t+M,r=p.data}}return r}function wJ(e){if(isNaN(u=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,a=this._x0,s=this._y0,c=this._x1,l=this._y1,u,f,d,p,h,m,g,v;if(!n)return this;if(n.length)for(;;){if((h=u>=(d=(a+c)/2))?a=d:c=d,(m=f>=(p=(s+l)/2))?s=p:l=p,t=n,!(n=n[g=m<<1|h]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,v=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[g]=o:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=o,this)}function SJ(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function EJ(){return this._root}function DJ(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function zJ(e){var t=[],n,r=this._root,i,o,a,s,c;for(r&&t.push(new Ar(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,a=n.y0,s=n.x1,c=n.y1)&&r.length){var l=(o+s)/2,u=(a+c)/2;(i=r[3])&&t.push(new Ar(i,l,u,s,c)),(i=r[2])&&t.push(new Ar(i,o,u,l,c)),(i=r[1])&&t.push(new Ar(i,l,a,s,u)),(i=r[0])&&t.push(new Ar(i,o,a,l,u))}return this}function HJ(e){var t=[],n=[],r;for(this._root&&t.push(new Ar(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,c=r.x1,l=r.y1,u=(a+c)/2,f=(s+l)/2;(o=i[0])&&t.push(new Ar(o,a,s,u,f)),(o=i[1])&&t.push(new Ar(o,u,s,c,f)),(o=i[2])&&t.push(new Ar(o,a,f,u,l)),(o=i[3])&&t.push(new Ar(o,u,f,c,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function LJ(e){return e[0]}function AJ(e){return arguments.length?(this._x=e,this):this._x}function VJ(e){return e[1]}function NJ(e){return arguments.length?(this._y=e,this):this._y}function a0(e,t,n){var r=new tk(t??LJ,n??VJ,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function tk(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function _J(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var s1=a0.prototype=tk.prototype;s1.copy=function(){var e=new tk(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=_J(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=_J(r));return e};s1.add=gJ;s1.addAll=yJ;s1.cover=xJ;s1.data=CJ;s1.extent=bJ;s1.find=MJ;s1.remove=wJ;s1.removeAll=SJ;s1.root=EJ;s1.size=DJ;s1.visit=zJ;s1.visitAfter=HJ;s1.x=AJ;s1.y=NJ;function ir(e){return function(){return e}}function B2(e){return(e()-.5)*1e-6}function Ybe(e){return e.x+e.vx}function Xbe(e){return e.y+e.vy}function nk(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=ir(e==null?1:+e));function a(){for(var l,u=t.length,f,d,p,h,m,g,v=0;v<o;++v)for(f=a0(t,Ybe,Xbe).visitAfter(s),l=0;l<u;++l)d=t[l],m=n[d.index],g=m*m,p=d.x+d.vx,h=d.y+d.vy,f.visit(y);function y(C,b,M,S,w){var E=C.data,D=C.r,H=m+D;if(E){if(E.index>d.index){var A=p-E.x-E.vx,j=h-E.y-E.vy,V=A*A+j*j;V<H*H&&(A===0&&(A=B2(r),V+=A*A),j===0&&(j=B2(r),V+=j*j),V=(H-(V=Math.sqrt(V)))/V*i,d.vx+=(A*=V)*(H=(D*=D)/(g+D)),d.vy+=(j*=V)*H,E.vx-=A*(H=1-H),E.vy-=j*H)}return}return b>p+H||S<p-H||M>h+H||w<h-H}}function s(l){if(l.data)return l.r=n[l.data.index];for(var u=l.r=0;u<4;++u)l[u]&&l[u].r>l.r&&(l.r=l[u].r)}function c(){if(t){var l,u=t.length,f;for(n=new Array(u),l=0;l<u;++l)f=t[l],n[f.index]=+e(f,l,t)}}return a.initialize=function(l,u){t=l,r=u,c()},a.iterations=function(l){return arguments.length?(o=+l,a):o},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(e=typeof l=="function"?l:ir(+l),c(),a):e},a}function Qbe(e){return e.index}function kJ(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function rk(e){var t=Qbe,n=f,r,i=ir(30),o,a,s,c,l,u=1;e==null&&(e=[]);function f(g){return 1/Math.min(s[g.source.index],s[g.target.index])}function d(g){for(var v=0,y=e.length;v<u;++v)for(var C=0,b,M,S,w,E,D,H;C<y;++C)b=e[C],M=b.source,S=b.target,w=S.x+S.vx-M.x-M.vx||B2(l),E=S.y+S.vy-M.y-M.vy||B2(l),D=Math.sqrt(w*w+E*E),D=(D-o[C])/D*g*r[C],w*=D,E*=D,S.vx-=w*(H=c[C]),S.vy-=E*H,M.vx+=w*(H=1-H),M.vy+=E*H}function p(){if(a){var g,v=a.length,y=e.length,C=new Map(a.map((M,S)=>[t(M,S,a),M])),b;for(g=0,s=new Array(v);g<y;++g)b=e[g],b.index=g,typeof b.source!="object"&&(b.source=kJ(C,b.source)),typeof b.target!="object"&&(b.target=kJ(C,b.target)),s[b.source.index]=(s[b.source.index]||0)+1,s[b.target.index]=(s[b.target.index]||0)+1;for(g=0,c=new Array(y);g<y;++g)b=e[g],c[g]=s[b.source.index]/(s[b.source.index]+s[b.target.index]);r=new Array(y),h(),o=new Array(y),m()}}function h(){if(a)for(var g=0,v=e.length;g<v;++g)r[g]=+n(e[g],g,e)}function m(){if(a)for(var g=0,v=e.length;g<v;++g)o[g]=+i(e[g],g,e)}return d.initialize=function(g,v){a=g,l=v,p()},d.links=function(g){return arguments.length?(e=g,p(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(u=+g,d):u},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:ir(+g),h(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:ir(+g),m(),d):i},d}var Kbe={value:()=>{}};function IJ(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new sC(n)}function sC(e){this._=e}function Zbe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}sC.prototype=IJ.prototype={constructor:sC,on:function(e,t){var n=this._,r=Zbe(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=Jbe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=TJ(n[i],e.name,t);else if(t==null)for(i in n)n[i]=TJ(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new sC(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Jbe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function TJ(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Kbe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ik=IJ;var Zu=0,mp=0,hp=0,RJ=1e3,cC,gp,lC=0,s0=0,uC=0,vp=typeof performance=="object"&&performance.now?performance:Date,OJ=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function xp(){return s0||(OJ(eMe),s0=vp.now()+uC)}function eMe(){s0=0}function yp(){this._call=this._time=this._next=null}yp.prototype=fC.prototype={constructor:yp,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?xp():+n)+(t==null?0:+t),!this._next&&gp!==this&&(gp?gp._next=this:cC=this,gp=this),this._call=e,this._time=n,ok()},stop:function(){this._call&&(this._call=null,this._time=1/0,ok())}};function fC(e,t,n){var r=new yp;return r.restart(e,t,n),r}function PJ(){xp(),++Zu;for(var e=cC,t;e;)(t=s0-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Zu}function FJ(){s0=(lC=vp.now())+uC,Zu=mp=0;try{PJ()}finally{Zu=0,nMe(),s0=0}}function tMe(){var e=vp.now(),t=e-lC;t>RJ&&(uC-=t,lC=e)}function nMe(){for(var e,t=cC,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:cC=n);gp=e,ok(r)}function ok(e){if(!Zu){mp&&(mp=clearTimeout(mp));var t=e-s0;t>24?(e<1/0&&(mp=setTimeout(FJ,e-vp.now()-uC)),hp&&(hp=clearInterval(hp))):(hp||(lC=vp.now(),hp=setInterval(tMe,RJ)),Zu=1,OJ(FJ))}}function ak(e,t,n){var r=new yp,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,a,s){a=+a,s=s==null?xp():+s,r._restart(function c(l){l+=i,r._restart(c,i+=a,s),o(l)},a,s)},r.restart(e,t,n),r)}function $J(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function BJ(e){return e.x}function UJ(e){return e.y}var rMe=10,iMe=Math.PI*(3-Math.sqrt(5));function sk(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,c=fC(f),l=ik("tick","end"),u=$J();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(c.stop(),l.call("end",t))}function d(m){var g,v=e.length,y;m===void 0&&(m=1);for(var C=0;C<m;++C)for(n+=(o-n)*i,s.forEach(function(b){b(n)}),g=0;g<v;++g)y=e[g],y.fx==null?y.x+=y.vx*=a:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=a:(y.y=y.fy,y.vy=0);return t}function p(){for(var m=0,g=e.length,v;m<g;++m){if(v=e[m],v.index=m,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var y=rMe*Math.sqrt(.5+m),C=m*iMe;v.x=y*Math.cos(C),v.y=y*Math.sin(C)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function h(m){return m.initialize&&m.initialize(e,u),m}return p(),t={tick:d,restart:function(){return c.restart(f),t},stop:function(){return c.stop(),t},nodes:function(m){return arguments.length?(e=m,p(),s.forEach(h),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(o=+m,t):o},velocityDecay:function(m){return arguments.length?(a=1-m,t):1-a},randomSource:function(m){return arguments.length?(u=m,s.forEach(h),t):u},force:function(m,g){return arguments.length>1?(g==null?s.delete(m):s.set(m,h(g)),t):s.get(m)},find:function(m,g,v){var y=0,C=e.length,b,M,S,w,E;for(v==null?v=1/0:v*=v,y=0;y<C;++y)w=e[y],b=m-w.x,M=g-w.y,S=b*b+M*M,S<v&&(E=w,v=S);return E},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function ck(){var e,t,n,r,i=ir(-30),o,a=1,s=1/0,c=.81;function l(p){var h,m=e.length,g=a0(e,BJ,UJ).visitAfter(f);for(r=p,h=0;h<m;++h)t=e[h],g.visit(d)}function u(){if(e){var p,h=e.length,m;for(o=new Array(h),p=0;p<h;++p)m=e[p],o[m.index]=+i(m,p,e)}}function f(p){var h=0,m,g,v=0,y,C,b;if(p.length){for(y=C=b=0;b<4;++b)(m=p[b])&&(g=Math.abs(m.value))&&(h+=m.value,v+=g,y+=g*m.x,C+=g*m.y);p.x=y/v,p.y=C/v}else{m=p,m.x=m.data.x,m.y=m.data.y;do h+=o[m.data.index];while(m=m.next)}p.value=h}function d(p,h,m,g){if(!p.value)return!0;var v=p.x-t.x,y=p.y-t.y,C=g-h,b=v*v+y*y;if(C*C/c<b)return b<s&&(v===0&&(v=B2(n),b+=v*v),y===0&&(y=B2(n),b+=y*y),b<a&&(b=Math.sqrt(a*b)),t.vx+=v*p.value*r/b,t.vy+=y*p.value*r/b),!0;if(p.length||b>=s)return;(p.data!==t||p.next)&&(v===0&&(v=B2(n),b+=v*v),y===0&&(y=B2(n),b+=y*y),b<a&&(b=Math.sqrt(a*b)));do p.data!==t&&(C=o[p.data.index]*r/b,t.vx+=v*C,t.vy+=y*C);while(p=p.next)}return l.initialize=function(p,h){e=p,n=h,u()},l.strength=function(p){return arguments.length?(i=typeof p=="function"?p:ir(+p),u(),l):i},l.distanceMin=function(p){return arguments.length?(a=p*p,l):Math.sqrt(a)},l.distanceMax=function(p){return arguments.length?(s=p*p,l):Math.sqrt(s)},l.theta=function(p){return arguments.length?(c=p*p,l):Math.sqrt(c)},l}function lk(e){var t=ir(.1),n,r,i;typeof e!="function"&&(e=ir(e==null?0:+e));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vx+=(i[c]-u.x)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:ir(+s),a(),o):t},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:ir(+s),a(),o):e},o}function uk(e){var t=ir(.1),n,r,i;typeof e!="function"&&(e=ir(e==null?0:+e));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vy+=(i[c]-u.y)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:ir(+s),a(),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:ir(+s),a(),o):e},o}var jJ={center:ek,collide:nk,nbody:ck,link:rk,x:lk,y:uk},Cp="forces",fk=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],oMe=["static","iterations"],qJ=["x","y","vx","vy"];function dk(e){P.call(this,null,e)}dk.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:qJ}]};ee(dk,P,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(fk),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&GJ(n,e,0,t)):(this.value=n=sMe(t.source,e),n.on("tick",aMe(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(oMe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){let n=t.dataflow;for(let s=this._argops,c=0,l=s.length,u;c<l;++c)if(u=s[c],!(u.name!==Cp||u.op._argval.force!=="link")){for(var r=u.op._argops,i=0,o=r.length,a;i<o;++i)if(r[i].name==="links"&&(a=r[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(qJ)}});function aMe(e,t){return()=>e.touch(t).run()}function sMe(e,t){let n=sk(e),r=n.stop,i=n.restart,o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),GJ(n,t,!0).on("end",()=>o=!0)}function GJ(e,t,n,r){var i=te(t.forces),o,a,s,c;for(o=0,a=fk.length;o<a;++o)s=fk[o],s!==Cp&&t.modified(s)&&e[s](t[s]);for(o=0,a=i.length;o<a;++o)c=Cp+o,s=n||t.modified(Cp,o)?lMe(i[o]):r&&cMe(i[o],r)?e.force(c):null,s&&e.force(c,s);for(a=e.numForces||0;o<a;++o)e.force(Cp+o,null);return e.numForces=i.length,e}function cMe(e,t){var n,r;for(n in e)if(ke(r=e[n])&&t.modified(dr(r)))return 1;return 0}function lMe(e){var t,n;de(jJ,e.force)||$("Unrecognized force: "+e.force),t=jJ[e.force]();for(n in e)ke(t[n])&&uMe(t[n],e[n],e);return t}function uMe(e,t,n){e(ke(t)?r=>t(r,n):t)}var jk={};br(jk,{nest:()=>Fk,pack:()=>Rk,partition:()=>Ok,stratify:()=>Pk,tree:()=>$k,treelinks:()=>Bk,treemap:()=>Uk});function fMe(e,t){return e.parent===t.parent?1:2}function dMe(e){return e.reduce(pMe,0)/e.length}function pMe(e,t){return e+t.x}function hMe(e){return 1+e.reduce(mMe,0)}function mMe(e,t){return Math.max(e,t.y)}function gMe(e){for(var t;t=e.children;)e=t[0];return e}function vMe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function hk(){var e=fMe,t=1,n=1,r=!1;function i(o){var a,s=0;o.eachAfter(function(d){var p=d.children;p?(d.x=dMe(p),d.y=hMe(p)):(d.x=a?s+=e(d,a):0,d.y=0,a=d)});var c=gMe(o),l=vMe(o),u=c.x-e(c,l)/2,f=l.x+e(l,c)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-u)/(f-u)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function yMe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function WJ(){return this.eachAfter(yMe)}function YJ(e,t){let n=-1;for(let r of this)e.call(t,r,++n,this);return this}function XJ(e,t){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function QJ(e,t){for(var n=this,r=[n],i=[],o,a,s,c=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)e.call(t,n,++c,this);return this}function KJ(e,t){let n=-1;for(let r of this)if(e.call(t,r,++n,this))return r}function ZJ(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function JJ(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function eee(e){for(var t=this,n=xMe(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function xMe(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function tee(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function nee(){return Array.from(this)}function ree(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function iee(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*oee(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function Ju(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=MMe)):t===void 0&&(t=bMe);for(var n=new wc(e),r,i=[n],o,a,s,c;r=i.pop();)if((a=t(r.data))&&(c=(a=Array.from(a)).length))for(r.children=a,s=c-1;s>=0;--s)i.push(o=a[s]=new wc(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(mk)}function CMe(){return Ju(this).eachBefore(wMe)}function bMe(e){return e.children}function MMe(e){return Array.isArray(e)?e[1]:null}function wMe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function mk(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function wc(e){this.data=e,this.depth=this.height=0,this.parent=null}wc.prototype=Ju.prototype={constructor:wc,count:WJ,each:YJ,eachAfter:QJ,eachBefore:XJ,find:KJ,sum:ZJ,sort:JJ,path:eee,ancestors:tee,descendants:nee,leaves:ree,links:iee,copy:CMe,[Symbol.iterator]:oee};function ef(e){return e==null?null:gk(e)}function gk(e){if(typeof e!="function")throw new Error;return e}function Sc(){return 0}function l4(e){return function(){return e}}function aee(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function see(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function cee(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function lee(e,t){for(var n=0,r=(e=cee(Array.from(e),t)).length,i=[],o,a;n<r;)o=e[n],a&&uee(a,o)?++n:(a=EMe(i=SMe(i,o)),n=0);return a}function SMe(e,t){var n,r;if(vk(t,e))return[t];for(n=0;n<e.length;++n)if(dC(t,e[n])&&vk(bp(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(dC(bp(e[n],e[r]),t)&&dC(bp(e[n],t),e[r])&&dC(bp(e[r],t),e[n])&&vk(fee(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function dC(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function uee(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function vk(e,t){for(var n=0;n<t.length;++n)if(!uee(e,t[n]))return!1;return!0}function EMe(e){switch(e.length){case 1:return DMe(e[0]);case 2:return bp(e[0],e[1]);case 3:return fee(e[0],e[1],e[2])}}function DMe(e){return{x:e.x,y:e.y,r:e.r}}function bp(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,c=o-n,l=a-r,u=s-i,f=Math.sqrt(c*c+l*l);return{x:(n+o+c/f*u)/2,y:(r+a+l/f*u)/2,r:(f+i+s)/2}}function fee(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,c=t.r,l=n.x,u=n.y,f=n.r,d=r-a,p=r-l,h=i-s,m=i-u,g=c-o,v=f-o,y=r*r+i*i-o*o,C=y-a*a-s*s+c*c,b=y-l*l-u*u+f*f,M=p*h-d*m,S=(h*b-m*C)/(M*2)-r,w=(m*g-h*v)/M,E=(p*C-d*b)/(M*2)-i,D=(d*v-p*g)/M,H=w*w+D*D-1,A=2*(o+S*w+E*D),j=S*S+E*E-o*o,V=-(Math.abs(H)>1e-6?(A+Math.sqrt(A*A-4*H*j))/(2*H):j/A);return{x:r+S+w*V,y:i+E+D*V,r:V}}function dee(e,t,n){var r=e.x-t.x,i,o,a=e.y-t.y,s,c,l=r*r+a*a;l?(o=t.r+n.r,o*=o,c=e.r+n.r,c*=c,o>c?(i=(l+c-o)/(2*l),s=Math.sqrt(Math.max(0,c/l-i*i)),n.x=e.x-i*r-s*a,n.y=e.y-i*a+s*r):(i=(l+o-c)/(2*l),s=Math.sqrt(Math.max(0,o/l-i*i)),n.x=t.x+i*r-s*a,n.y=t.y+i*a+s*r)):(n.x=t.x+n.r,n.y=t.y)}function pee(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function hee(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function pC(e){this._=e,this.next=null,this.previous=null}function mee(e,t){if(!(o=(e=see(e)).length))return 0;var n,r,i,o,a,s,c,l,u,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;dee(r,n,i=e[2]),n=new pC(n),r=new pC(r),i=new pC(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(c=3;c<o;++c){dee(n._,r._,i=e[c]),i=new pC(i),l=r.next,u=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(pee(l._,i._)){r=l,n.next=r,r.previous=n,--c;continue e}f+=l._.r,l=l.next}else{if(pee(u._,i._)){n=u,n.next=r,r.previous=n,--c;continue e}d+=u._.r,u=u.previous}while(l!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=hee(n);(i=i.next)!==r;)(s=hee(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=lee(n,t),c=0;c<o;++c)n=e[c],n.x-=i.x,n.y-=i.y;return i.r}function zMe(e){return Math.sqrt(e.value)}function xk(){var e=null,t=1,n=1,r=Sc;function i(o){let a=aee();return o.x=t/2,o.y=n/2,e?o.eachBefore(gee(e)).eachAfter(yk(r,.5,a)).eachBefore(vee(1)):o.eachBefore(gee(zMe)).eachAfter(yk(Sc,1,a)).eachAfter(yk(r,o.r/Math.min(t,n),a)).eachBefore(vee(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=ef(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:l4(+o),i):r},i}function gee(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function yk(e,t,n){return function(r){if(i=r.children){var i,o,a=i.length,s=e(r)*t||0,c;if(s)for(o=0;o<a;++o)i[o].r+=s;if(c=mee(i,n),s)for(o=0;o<a;++o)i[o].r-=s;r.r=c+s}}}function vee(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function hC(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function U2(e,t,n,r,i){for(var o=e.children,a,s=-1,c=o.length,l=e.value&&(r-t)/e.value;++s<c;)a=o[s],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*l}function Ck(){var e=1,t=1,n=0,r=!1;function i(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/s,a.eachBefore(o(t,s)),r&&a.eachBefore(hC),a}function o(a,s){return function(c){c.children&&U2(c,c.x0,a*(c.depth+1)/s,c.x1,a*(c.depth+2)/s);var l=c.x0,u=c.y0,f=c.x1-n,d=c.y1-n;f<l&&(l=f=(l+f)/2),d<u&&(u=d=(u+d)/2),c.x0=l,c.y0=u,c.x1=f,c.y1=d}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var HMe={depth:-1},yee={},bk={};function LMe(e){return e.id}function AMe(e){return e.parentId}function mC(){var e=LMe,t=AMe,n;function r(i){var o=Array.from(i),a=e,s=t,c,l,u,f,d,p,h,m,g=new Map;if(n!=null){let v=o.map((b,M)=>VMe(n(b,M,i))),y=v.map(xee),C=new Set(v).add("");for(let b of y)C.has(b)||(C.add(b),v.push(b),y.push(xee(b)),o.push(bk));a=(b,M)=>v[M],s=(b,M)=>y[M]}for(u=0,c=o.length;u<c;++u)l=o[u],p=o[u]=new wc(l),(h=a(l,u,i))!=null&&(h+="")&&(m=p.id=h,g.set(m,g.has(m)?yee:p)),(h=s(l,u,i))!=null&&(h+="")&&(p.parent=h);for(u=0;u<c;++u)if(p=o[u],h=p.parent){if(d=g.get(h),!d)throw new Error("missing: "+h);if(d===yee)throw new Error("ambiguous: "+h);d.children?d.children.push(p):d.children=[p],p.parent=d}else{if(f)throw new Error("multiple roots");f=p}if(!f)throw new Error("no root");if(n!=null){for(;f.data===bk&&f.children.length===1;)f=f.children[0],--c;for(let v=o.length-1;v>=0&&(p=o[v],p.data===bk);--v)p.data=null}if(f.parent=HMe,f.eachBefore(function(v){v.depth=v.parent.depth+1,--c}).eachBefore(mk),f.parent=null,c>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=ef(i),r):e},r.parentId=function(i){return arguments.length?(t=ef(i),r):t},r.path=function(i){return arguments.length?(n=ef(i),r):n},r}function VMe(e){e=`${e}`;let t=e.length;return Mk(e,t-1)&&!Mk(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function xee(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Mk(e,t););return e.slice(0,t)}function Mk(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function NMe(e,t){return e.parent===t.parent?1:2}function wk(e){var t=e.children;return t?t[0]:e.t}function Sk(e){var t=e.children;return t?t[t.length-1]:e.t}function _Me(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function kMe(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function TMe(e,t,n){return e.a.parent===t.parent?e.a:n}function gC(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}gC.prototype=Object.create(wc.prototype);function IMe(e){for(var t=new gC(e,0),n,r=[t],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new gC(o[a],a)),i.parent=n;return(t.parent=new gC(null,0)).children=[t],t}function Ek(){var e=NMe,t=1,n=1,r=null;function i(l){var u=IMe(l);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)l.eachBefore(c);else{var f=l,d=l,p=l;l.eachBefore(function(y){y.x<f.x&&(f=y),y.x>d.x&&(d=y),y.depth>p.depth&&(p=y)});var h=f===d?1:e(f,d)/2,m=h-f.x,g=t/(d.x+h+m),v=n/(p.depth||1);l.eachBefore(function(y){y.x=(y.x+m)*g,y.y=y.depth*v})}return l}function o(l){var u=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(u){kMe(l);var p=(u[0].z+u[u.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-p):l.z=p}else d&&(l.z=d.z+e(l._,d._));l.parent.A=s(l,d,l.parent.A||f[0])}function a(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function s(l,u,f){if(u){for(var d=l,p=l,h=u,m=d.parent.children[0],g=d.m,v=p.m,y=h.m,C=m.m,b;h=Sk(h),d=wk(d),h&&d;)m=wk(m),p=Sk(p),p.a=l,b=h.z+y-d.z-g+e(h._,d._),b>0&&(_Me(TMe(h,l,f),l,b),g+=b,v+=b),y+=h.m,g+=d.m,C+=m.m,v+=p.m;h&&!Sk(p)&&(p.t=h,p.m+=y-v),d&&!wk(m)&&(m.t=d,m.m+=g-C,f=l)}return f}function c(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function Ec(e,t,n,r,i){for(var o=e.children,a,s=-1,c=o.length,l=e.value&&(i-n)/e.value;++s<c;)a=o[s],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*l}var Dk=(1+Math.sqrt(5))/2;function zk(e,t,n,r,i,o){for(var a=[],s=t.children,c,l,u=0,f=0,d=s.length,p,h,m=t.value,g,v,y,C,b,M,S;u<d;){p=i-n,h=o-r;do g=s[f++].value;while(!g&&f<d);for(v=y=g,M=Math.max(h/p,p/h)/(m*e),S=g*g*M,b=Math.max(y/S,S/v);f<d;++f){if(g+=l=s[f].value,l<v&&(v=l),l>y&&(y=l),S=g*g*M,C=Math.max(y/S,S/v),C>b){g-=l;break}b=C}a.push(c={value:g,dice:p<h,children:s.slice(u,f)}),c.dice?U2(c,n,r,i,m?r+=h*g/m:o):Ec(c,n,r,m?n+=p*g/m:i,o),m-=g,u=f}return a}var Mp=function e(t){function n(r,i,o,a,s){zk(t,r,i,o,a,s)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Dk);function Hk(){var e=Mp,t=!1,n=1,r=1,i=[0],o=Sc,a=Sc,s=Sc,c=Sc,l=Sc;function u(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(hC),d}function f(d){var p=i[d.depth],h=d.x0+p,m=d.y0+p,g=d.x1-p,v=d.y1-p;g<h&&(h=g=(h+g)/2),v<m&&(m=v=(m+v)/2),d.x0=h,d.y0=m,d.x1=g,d.y1=v,d.children&&(p=i[d.depth+1]=o(d)/2,h+=l(d)-p,m+=a(d)-p,g-=s(d)-p,v-=c(d)-p,g<h&&(h=g=(h+g)/2),v<m&&(m=v=(m+v)/2),e(d,h,m,g,v))}return u.round=function(d){return arguments.length?(t=!!d,u):t},u.size=function(d){return arguments.length?(n=+d[0],r=+d[1],u):[n,r]},u.tile=function(d){return arguments.length?(e=gk(d),u):e},u.padding=function(d){return arguments.length?u.paddingInner(d).paddingOuter(d):u.paddingInner()},u.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:l4(+d),u):o},u.paddingOuter=function(d){return arguments.length?u.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):u.paddingTop()},u.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:l4(+d),u):a},u.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:l4(+d),u):s},u.paddingBottom=function(d){return arguments.length?(c=typeof d=="function"?d:l4(+d),u):c},u.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:l4(+d),u):l},u}function Lk(e,t,n,r,i){var o=e.children,a,s=o.length,c,l=new Array(s+1);for(l[0]=c=a=0;a<s;++a)l[a+1]=c+=o[a].value;u(0,s,e.value,t,n,r,i);function u(f,d,p,h,m,g,v){if(f>=d-1){var y=o[f];y.x0=h,y.y0=m,y.x1=g,y.y1=v;return}for(var C=l[f],b=p/2+C,M=f+1,S=d-1;M<S;){var w=M+S>>>1;l[w]<b?M=w+1:S=w}b-l[M-1]<l[M]-b&&f+1<M&&--M;var E=l[M]-C,D=p-E;if(g-h>v-m){var H=p?(h*D+g*E)/p:g;u(f,M,E,h,m,H,v),u(M,d,D,H,m,g,v)}else{var A=p?(m*D+v*E)/p:v;u(f,M,E,h,m,g,A),u(M,d,D,h,A,g,v)}}}function Ak(e,t,n,r,i){(e.depth&1?Ec:U2)(e,t,n,r,i)}var Vk=function e(t){function n(r,i,o,a,s){if((c=r._squarify)&&c.ratio===t)for(var c,l,u,f,d=-1,p,h=c.length,m=r.value;++d<h;){for(l=c[d],u=l.children,f=l.value=0,p=u.length;f<p;++f)l.value+=u[f].value;l.dice?U2(l,i,o,a,m?o+=(s-o)*l.value/m:s):Ec(l,i,o,m?i+=(a-i)*l.value/m:a,s),m-=l.value}else r._squarify=c=zk(t,r,i,o,a,s),c.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Dk);function Nk(e,t,n){let r={};return e.each(i=>{let o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function Fk(e){P.call(this,null,e)}Fk.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var FMe=e=>e.values;ee(Fk,P,{transform(e,t){t.source||$("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(a=>{a.children&&Dl(a.data)&&i.rem.push(a.data)}),this.value=o=Ju({values:te(e.keys).reduce((a,s)=>(a.key(s),a),RMe()).entries(i.source)},FMe),n&&o.each(a=>{a.children&&(a=at(a.data),i.add.push(a),i.source.push(a))}),Nk(o,Ee,Ee)),i.source.root=o,i}});function RMe(){let e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;let a=i.length,s=e[o++],c={},l={},u=-1,f,d,p;for(;++u<a;)f=s(d=i[u])+"",(p=c[f])?p.push(d):c[f]=[d];for(f in c)l[f]=n(c[f],o);return l}function r(i,o){if(++o>e.length)return i;let a=[];for(let s in i)a.push({key:s,values:r(i[s],o)});return a}return t}function Dc(e){P.call(this,null,e)}var OMe=(e,t)=>e.parent===t.parent?1:2;ee(Dc,P,{transform(e,t){(!t.source||!t.source.root)&&$(this.constructor.name+" transform requires a backing tree data source.");let n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Ba(e.sort,a=>a.data)),PMe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?OMe:Ia);try{this.value=n(i)}catch(a){$(a)}return i.each(a=>$Me(a,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function PMe(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function $Me(e,t,n){let r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}var _k=["x","y","r","depth","children"];function Rk(e){Dc.call(this,e)}Rk.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:_k.length,default:_k}]};ee(Rk,Dc,{layout:xk,params:["radius","size","padding"],fields:_k});var kk=["x0","y0","x1","y1","depth","children"];function Ok(e){Dc.call(this,e)}Ok.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:kk.length,default:kk}]};ee(Ok,Dc,{layout:Ck,params:["size","round","padding"],fields:kk});function Pk(e){P.call(this,null,e)}Pk.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ee(Pk,P,{transform(e,t){t.source||$("Stratify transform requires an upstream data source.");let n=this.value,r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?Nk(mC().id(e.key).parentId(e.parentKey)(i.source),e.key,pr):Nk(mC()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});var Cee={tidy:Ek,cluster:hk},Tk=["x","y","depth","children"];function $k(e){Dc.call(this,e)}$k.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Tk.length,default:Tk}]};ee($k,Dc,{layout(e){let t=e||"tidy";if(de(Cee,t))return Cee[t]();$("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Tk});function Bk(e){P.call(this,[],e)}Bk.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ee(Bk,P,{transform(e,t){let n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||$("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,a=>o[Ee(a)]=1),r.each(a=>{let s=a.data,c=a.parent&&a.parent.data;c&&o[Ee(s)]&&o[Ee(c)]&&i.add.push(at({source:c,target:s}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>o[Ee(a)]=1),n.forEach(a=>{(o[Ee(a.source)]||o[Ee(a.target)])&&i.mod.push(a)})),i}});var bee={binary:Lk,dice:U2,slice:Ec,slicedice:Ak,squarify:Mp,resquarify:Vk},Ik=["x0","y0","x1","y1","depth","children"];function Uk(e){Dc.call(this,e)}Uk.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Ik.length,default:Ik}]};ee(Uk,Dc,{layout(){let e=Hk();return e.ratio=t=>{let n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{de(bee,t)?e.tile(bee[t]):$("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:Ik});var tT={};br(tT,{label:()=>eT});var qk=4278190080;function BMe(e,t){let n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function UMe(e,t,n,r,i){let o=e.width,a=e.height,s=r||i,c=Go(o,a).getContext("2d"),l=Go(o,a).getContext("2d"),u=s&&Go(o,a).getContext("2d");n.forEach(E=>vC(c,E,!1)),vC(l,t,!1),s&&vC(u,t,!0);let f=Gk(c,o,a),d=Gk(l,o,a),p=s&&Gk(u,o,a),h=e.bitmap(),m=s&&e.bitmap(),g,v,y,C,b,M,S,w;for(v=0;v<a;++v)for(g=0;g<o;++g)b=v*o+g,M=f[b]&qk,w=d[b]&qk,S=s&&p[b]&qk,(M||S||w)&&(y=e(g),C=e(v),!i&&(M||w)&&h.set(y,C),s&&(M||S)&&m.set(y,C));return[h,m]}function Gk(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function vC(e,t,n){if(!t.length)return;let r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>vC(e,o.items,n))}):n1[r].draw(e,{items:n?t.map(jMe):t})}function jMe(e){let t=zl(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?k(x({},t),{strokeOpacity:1,stroke:"#000",fillOpacity:0}):t}var zc=5,c1=31,wp=32,u4=new Uint32Array(wp+1),j2=new Uint32Array(wp+1);j2[0]=0;u4[0]=~j2[0];for(let e=1;e<=wp;++e)j2[e]=j2[e-1]<<1|1,u4[e]=~j2[e];function qMe(e,t){let n=new Uint32Array(~~((e*t+wp)/wp));function r(o,a){n[o]|=a}function i(o,a){n[o]&=a}return{array:n,get:(o,a)=>{let s=a*e+o;return n[s>>>zc]&1<<(s&c1)},set:(o,a)=>{let s=a*e+o;r(s>>>zc,1<<(s&c1))},clear:(o,a)=>{let s=a*e+o;i(s>>>zc,~(1<<(s&c1)))},getRange:(o,a,s,c)=>{let l=c,u,f,d,p;for(;l>=a;--l)if(u=l*e+o,f=l*e+s,d=u>>>zc,p=f>>>zc,d===p){if(n[d]&u4[u&c1]&j2[(f&c1)+1])return!0}else{if(n[d]&u4[u&c1]||n[p]&j2[(f&c1)+1])return!0;for(let h=d+1;h<p;++h)if(n[h])return!0}return!1},setRange:(o,a,s,c)=>{let l,u,f,d,p;for(;a<=c;++a)if(l=a*e+o,u=a*e+s,f=l>>>zc,d=u>>>zc,f===d)r(f,u4[l&c1]&j2[(u&c1)+1]);else for(r(f,u4[l&c1]),r(d,j2[(u&c1)+1]),p=f+1;p<d;++p)r(p,4294967295)},clearRange:(o,a,s,c)=>{let l,u,f,d,p;for(;a<=c;++a)if(l=a*e+o,u=a*e+s,f=l>>>zc,d=u>>>zc,f===d)i(f,j2[l&c1]|u4[(u&c1)+1]);else for(i(f,j2[l&c1]),i(d,u4[(u&c1)+1]),p=f+1;p<d;++p)i(p,0)},outOfBounds:(o,a,s,c)=>o<0||a<0||c>=t||s>=e}}function GMe(e,t,n){let r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=s=>~~((s+n)/r);return a.invert=s=>s*r-n,a.bitmap=()=>qMe(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function WMe(e,t,n,r){let i=e.width,o=e.height;return function(a){let s=a.datum.datum.items[r].items,c=s.length,l=a.datum.fontSize,u=V1.width(a.datum,a.datum.text),f=0,d,p,h,m,g,v,y;for(let C=0;C<c;++C)d=s[C].x,h=s[C].y,p=s[C].x2===void 0?d:s[C].x2,m=s[C].y2===void 0?h:s[C].y2,g=(d+p)/2,v=(h+m)/2,y=Math.abs(p-d+m-h),y>=f&&(f=y,a.x=g,a.y=v);return g=u/2,v=l/2,d=a.x-g,p=a.x+g,h=a.y-v,m=a.y+v,a.align="center",d<0&&p<=i?a.align="left":0<=d&&i<p&&(a.align="right"),a.baseline="middle",h<0&&m<=o?a.baseline="top":0<=h&&o<m&&(a.baseline="bottom"),!0}}function yC(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function f4(e,t,n,r,i,o,a,s){let c=i*o/(r*2),l=e(t-c),u=e(t+c),f=e(n-(o=o/2)),d=e(n+o);return a.outOfBounds(l,f,u,d)||a.getRange(l,f,u,d)||s&&s.getRange(l,f,u,d)}function YMe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1];function c(l,u,f,d,p){let h=e.invert(l),m=e.invert(u),g=f,v=o,y;if(!yC(h,m,d,p,i,o)&&!f4(e,h,m,p,d,g,a,s)&&!f4(e,h,m,p,d,p,a,null)){for(;v-g>=1;)y=(g+v)/2,f4(e,h,m,p,d,y,a,s)?v=y:g=y;if(g>f)return[h,m,g,!0]}}return function(l){let u=l.datum.datum.items[r].items,f=u.length,d=l.datum.fontSize,p=V1.width(l.datum,l.datum.text),h=n?d:0,m=!1,g=!1,v=0,y,C,b,M,S,w,E,D,H,A,j,V,_,N,I,G,X;for(let J=0;J<f;++J){for(y=u[J].x,b=u[J].y,C=u[J].x2===void 0?y:u[J].x2,M=u[J].y2===void 0?b:u[J].y2,y>C&&(X=y,y=C,C=X),b>M&&(X=b,b=M,M=X),H=e(y),j=e(C),A=~~((H+j)/2),V=e(b),N=e(M),_=~~((V+N)/2),E=A;E>=H;--E)for(D=_;D>=V;--D)G=c(E,D,h,p,d),G&&([l.x,l.y,h,m]=G);for(E=A;E<=j;++E)for(D=_;D<=N;++D)G=c(E,D,h,p,d),G&&([l.x,l.y,h,m]=G);!m&&!n&&(I=Math.abs(C-y+M-b),S=(y+C)/2,w=(b+M)/2,I>=v&&!yC(S,w,p,d,i,o)&&!f4(e,S,w,d,p,d,a,null)&&(v=I,l.x=S,l.y=w,g=!0))}return m||g?(S=p/2,w=d/2,a.setRange(e(l.x-S),e(l.y-w),e(l.x+S),e(l.y+w)),l.align="center",l.baseline="middle",!0):!1}}var XMe=[-1,-1,1,1],QMe=[-1,1,-1,1];function KMe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1],c=e.bitmap();return function(l){let u=l.datum.datum.items[r].items,f=u.length,d=l.datum.fontSize,p=V1.width(l.datum,l.datum.text),h=[],m=n?d:0,g=!1,v=!1,y=0,C,b,M,S,w,E,D,H,A,j,V,_;for(let N=0;N<f;++N){for(C=u[N].x,M=u[N].y,b=u[N].x2===void 0?C:u[N].x2,S=u[N].y2===void 0?M:u[N].y2,h.push([e((C+b)/2),e((M+S)/2)]);h.length;)if([D,H]=h.pop(),!(a.get(D,H)||s.get(D,H)||c.get(D,H))){c.set(D,H);for(let I=0;I<4;++I)w=D+XMe[I],E=H+QMe[I],c.outOfBounds(w,E,w,E)||h.push([w,E]);if(w=e.invert(D),E=e.invert(H),A=m,j=o,!yC(w,E,p,d,i,o)&&!f4(e,w,E,d,p,A,a,s)&&!f4(e,w,E,d,p,d,a,null)){for(;j-A>=1;)V=(A+j)/2,f4(e,w,E,d,p,V,a,s)?j=V:A=V;A>m&&(l.x=w,l.y=E,m=A,g=!0)}}!g&&!n&&(_=Math.abs(b-C+S-M),w=(C+b)/2,E=(M+S)/2,_>=y&&!yC(w,E,p,d,i,o)&&!f4(e,w,E,d,p,d,a,null)&&(y=_,l.x=w,l.y=E,v=!0))}return g||v?(w=p/2,E=d/2,a.setRange(e(l.x-w),e(l.y-E),e(l.x+w),e(l.y+E)),l.align="center",l.baseline="middle",!0):!1}}var ZMe=["right","center","left"],JMe=["bottom","middle","top"];function ewe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1],c=r.length;return function(l){let u=l.boundary,f=l.datum.fontSize;if(u[2]<0||u[5]<0||u[0]>i||u[3]>o)return!1;let d=l.textWidth??0,p,h,m,g,v,y,C,b,M,S,w,E,D,H,A;for(let j=0;j<c;++j){if(p=(n[j]&3)-1,h=(n[j]>>>2&3)-1,m=p===0&&h===0||r[j]<0,g=p&&h?Math.SQRT1_2:1,v=r[j]<0?-1:1,y=u[1+p]+r[j]*p*g,w=u[4+h]+v*f*h/2+r[j]*h*g,b=w-f/2,M=w+f/2,E=e(y),H=e(b),A=e(M),!d)if(Mee(E,E,H,A,a,s,y,y,b,M,u,m))d=V1.width(l.datum,l.datum.text);else continue;if(S=y+v*d*p/2,y=S-d/2,C=S+d/2,E=e(y),D=e(C),Mee(E,D,H,A,a,s,y,C,b,M,u,m))return l.x=p?p*v<0?C:y:S,l.y=h?h*v<0?M:b:w,l.align=ZMe[p*v+1],l.baseline=JMe[h*v+1],a.setRange(E,H,D,A),!0}return!1}}function Mee(e,t,n,r,i,o,a,s,c,l,u,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}var Wk=0,Yk=4,Xk=8,Qk=0,Kk=1,Zk=2,twe={"top-left":Wk+Qk,top:Wk+Kk,"top-right":Wk+Zk,left:Yk+Qk,middle:Yk+Kk,right:Yk+Zk,"bottom-left":Xk+Qk,bottom:Xk+Kk,"bottom-right":Xk+Zk},nwe={naive:WMe,"reduced-search":YMe,floodfill:KMe};function rwe(e,t,n,r,i,o,a,s,c,l,u){if(!e.length)return e;let f=Math.max(r.length,i.length),d=iwe(r,f),p=owe(i,f),h=awe(e[0].datum),m=h==="group"&&e[0].datum.items[c].marktype,g=m==="area",v=swe(h,m,s,c),y=l===null||l===1/0,C=g&&u==="naive",b=-1,M=-1,S=e.map(H=>{let A=y?V1.width(H,H.text):void 0;return b=Math.max(b,A),M=Math.max(M,H.fontSize),{datum:H,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(H),textWidth:A}});l=l===null||l===1/0?Math.max(b,M)+Math.max(...r):l;let w=GMe(t[0],t[1],l),E;if(!C){n&&S.sort((j,V)=>n(j.datum,V.datum));let H=!1;for(let j=0;j<p.length&&!H;++j)H=p[j]===5||d[j]<0;let A=(h&&a||g)&&e.map(j=>j.datum);E=o.length||A?UMe(w,A||[],o,H,g):BMe(w,a&&S)}let D=g?nwe[u](w,E,a,c):ewe(w,E,p,d);return S.forEach(H=>H.opacity=+D(H)),S}function iwe(e,t){let n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function owe(e,t){let n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=twe[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function awe(e){return e&&e.mark&&e.mark.marktype}function swe(e,t,n,r){let i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{let a=o.datum.items[r].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:o=>{let a=o.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}var Jk=["x","y","opacity","align","baseline"],wee=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function eT(e){P.call(this,null,e)}eT.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:wee},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:Jk.length,default:Jk}]};ee(eT,P,{transform(e,t){function n(o){let a=e[o];return ke(a)&&t.modified(a.fields)}let r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&$("Size parameter should be specified as a [width, height] array.");let i=e.as||Jk;return rwe(t.materialize(t.SOURCE).source||[],e.size,e.sort,te(e.offset==null?1:e.offset),te(e.anchor||wee),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{let a=o.datum;a[i[0]]=o.x,a[i[1]]=o.y,a[i[2]]=o.opacity,a[i[3]]=o.align,a[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});var oT={};br(oT,{loess:()=>rT,regression:()=>iT});function See(e,t){var n=[],r=function(u){return u(s)},i,o,a,s,c,l;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],c=t.map(r),l=i[c],l||(i[c]=l=[],l.dims=c,n.push(l)),l.push(s);return n}function rT(e){P.call(this,null,e)}rT.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ee(rT,P,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=See(r,e.groupby),o=(e.groupby||[]).map(cn),a=o.length,s=e.as||[cn(e.x),cn(e.y)],c=[];i.forEach(l=>{WL(l,e.x,e.y,e.bandwidth||.3).forEach(u=>{let f={};for(let d=0;d<a;++d)f[o[d]]=l.dims[d];f[s[0]]=u[0],f[s[1]]=u[1],c.push(at(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});var nT={constant:qv,linear:Wv,log:UL,exp:jL,pow:qL,quad:Yv,poly:GL},cwe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function iT(e){P.call(this,null,e)}iT.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(nT)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ee(iT,P,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=See(r,e.groupby),o=(e.groupby||[]).map(cn),a=e.method||"linear",s=e.order==null?3:e.order,c=cwe(a,s),l=e.as||[cn(e.x),cn(e.y)],u=nT[a],f=[],d=e.extent;de(nT,a)||$("Invalid regression method: "+a),d!=null&&a==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(p=>{if(p.length<=c){t.dataflow.warn("Skipping regression with more parameters than data points.");return}let m=u(p,e.x,e.y,s);if(e.params){f.push(at({keys:p.dims,coef:m.coef,rSquared:m.rSquared}));return}let g=d||Yi(p,e.x),v=y=>{let C={};for(let b=0;b<o.length;++b)C[o[b]]=p.dims[b];C[l[0]]=y[0],C[l[1]]=y[1],f.push(at(C))};a==="linear"||a==="constant"?g.forEach(y=>v([y,m.predict(y)])):du(m.predict,g,25,200).forEach(v)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});var cT={};br(cT,{voronoi:()=>sT});var ht=11102230246251565e-32,or=134217729,Sp=(3+8*ht)*ht;function c0(e,t,n,r,i){let o,a,s,c,l=t[0],u=r[0],f=0,d=0;u>l==u>-l?(o=l,l=t[++f]):(o=u,u=r[++d]);let p=0;if(f<e&&d<n)for(u>l==u>-l?(a=l+o,s=o-(a-l),l=t[++f]):(a=u+o,s=o-(a-u),u=r[++d]),o=a,s!==0&&(i[p++]=s);f<e&&d<n;)u>l==u>-l?(a=o+l,c=a-o,s=o-(a-c)+(l-c),l=t[++f]):(a=o+u,c=a-o,s=o-(a-c)+(u-c),u=r[++d]),o=a,s!==0&&(i[p++]=s);for(;f<e;)a=o+l,c=a-o,s=o-(a-c)+(l-c),l=t[++f],o=a,s!==0&&(i[p++]=s);for(;d<n;)a=o+u,c=a-o,s=o-(a-c)+(u-c),u=r[++d],o=a,s!==0&&(i[p++]=s);return(o!==0||p===0)&&(i[p++]=o),p}function Ep(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function re(e){return new Float64Array(e)}var lwe=(3+16*ht)*ht,uwe=(2+12*ht)*ht,fwe=(9+64*ht)*ht*ht,tf=re(4),Eee=re(8),Dee=re(12),zee=re(16),l1=re(4);function dwe(e,t,n,r,i,o,a){let s,c,l,u,f,d,p,h,m,g,v,y,C,b,M,S,w,E,D=e-i,H=n-i,A=t-o,j=r-o;b=D*j,d=or*D,p=d-(d-D),h=D-p,d=or*j,m=d-(d-j),g=j-m,M=h*g-(b-p*m-h*m-p*g),S=A*H,d=or*A,p=d-(d-A),h=A-p,d=or*H,m=d-(d-H),g=H-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,tf[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,tf[1]=C-(v+f)+(f-S),E=y+v,f=E-y,tf[2]=y-(E-f)+(v-f),tf[3]=E;let V=Ep(4,tf),_=uwe*a;if(V>=_||-V>=_||(f=e-D,s=e-(D+f)+(f-i),f=n-H,l=n-(H+f)+(f-i),f=t-A,c=t-(A+f)+(f-o),f=r-j,u=r-(j+f)+(f-o),s===0&&c===0&&l===0&&u===0)||(_=fwe*a+Sp*Math.abs(V),V+=D*u+j*s-(A*l+H*c),V>=_||-V>=_))return V;b=s*j,d=or*s,p=d-(d-s),h=s-p,d=or*j,m=d-(d-j),g=j-m,M=h*g-(b-p*m-h*m-p*g),S=c*H,d=or*c,p=d-(d-c),h=c-p,d=or*H,m=d-(d-H),g=H-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,l1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,l1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,l1[2]=y-(E-f)+(v-f),l1[3]=E;let N=c0(4,tf,4,l1,Eee);b=D*u,d=or*D,p=d-(d-D),h=D-p,d=or*u,m=d-(d-u),g=u-m,M=h*g-(b-p*m-h*m-p*g),S=A*l,d=or*A,p=d-(d-A),h=A-p,d=or*l,m=d-(d-l),g=l-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,l1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,l1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,l1[2]=y-(E-f)+(v-f),l1[3]=E;let I=c0(N,Eee,4,l1,Dee);b=s*u,d=or*s,p=d-(d-s),h=s-p,d=or*u,m=d-(d-u),g=u-m,M=h*g-(b-p*m-h*m-p*g),S=c*l,d=or*c,p=d-(d-c),h=c-p,d=or*l,m=d-(d-l),g=l-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,l1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,l1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,l1[2]=y-(E-f)+(v-f),l1[3]=E;let G=c0(I,Dee,4,l1,zee);return zee[G-1]}function nf(e,t,n,r,i,o){let a=(t-o)*(n-i),s=(e-i)*(r-o),c=a-s,l=Math.abs(a+s);return Math.abs(c)>=lwe*l?c:-dwe(e,t,n,r,i,o,l)}var P3t=(7+56*ht)*ht,$3t=(3+28*ht)*ht,B3t=(26+288*ht)*ht*ht,U3t=re(4),j3t=re(4),q3t=re(4),G3t=re(4),W3t=re(4),Y3t=re(4),X3t=re(4),Q3t=re(4),K3t=re(4),Z3t=re(8),J3t=re(8),e4t=re(8),t4t=re(4),n4t=re(8),r4t=re(8),i4t=re(8),o4t=re(12),a4t=re(192),s4t=re(192);var u4t=(10+96*ht)*ht,f4t=(4+48*ht)*ht,d4t=(44+576*ht)*ht*ht,p4t=re(4),h4t=re(4),m4t=re(4),g4t=re(4),v4t=re(4),y4t=re(4),x4t=re(4),C4t=re(4),b4t=re(8),M4t=re(8),w4t=re(8),S4t=re(8),E4t=re(8),D4t=re(8),z4t=re(8),H4t=re(8),L4t=re(8),A4t=re(4),V4t=re(4),N4t=re(4),_4t=re(8),k4t=re(16),T4t=re(16),I4t=re(16),F4t=re(32),R4t=re(32),O4t=re(48),P4t=re(64),$4t=re(1152),B4t=re(1152);var G4t=(16+224*ht)*ht,W4t=(5+72*ht)*ht,Y4t=(71+1408*ht)*ht*ht,X4t=re(4),Q4t=re(4),K4t=re(4),Z4t=re(4),J4t=re(4),elt=re(4),tlt=re(4),nlt=re(4),rlt=re(4),ilt=re(4),olt=re(24),alt=re(24),slt=re(24),clt=re(24),llt=re(24),ult=re(24),flt=re(24),dlt=re(24),plt=re(24),hlt=re(24),mlt=re(1152),glt=re(1152),vlt=re(1152),ylt=re(1152),xlt=re(1152),Clt=re(2304),blt=re(2304),Mlt=re(3456),wlt=re(5760),Slt=re(8),Elt=re(8),Dlt=re(8),zlt=re(16),Hlt=re(24),Llt=re(48),Alt=re(48),Vlt=re(96),Nlt=re(192),_lt=re(384),klt=re(384),Tlt=re(384),Ilt=re(768);var Flt=re(96),Rlt=re(96),Olt=re(96),Plt=re(1152);var Lee=Math.pow(2,-52),xC=new Uint32Array(512),zp=class e{static from(t,n=ywe,r=xwe){let i=t.length,o=new Float64Array(i*2);for(let a=0;a<i;a++){let s=t[a];o[2*a]=n(s),o[2*a+1]=r(s)}return new e(o)}constructor(t){let n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;let r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){let{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,a=t.length>>1,s=1/0,c=1/0,l=-1/0,u=-1/0;for(let D=0;D<a;D++){let H=t[2*D],A=t[2*D+1];H<s&&(s=H),A<c&&(c=A),H>l&&(l=H),A>u&&(u=A),this._ids[D]=D}let f=(s+l)/2,d=(c+u)/2,p,h,m;for(let D=0,H=1/0;D<a;D++){let A=aT(f,d,t[2*D],t[2*D+1]);A<H&&(p=D,H=A)}let g=t[2*p],v=t[2*p+1];for(let D=0,H=1/0;D<a;D++){if(D===p)continue;let A=aT(g,v,t[2*D],t[2*D+1]);A<H&&A>0&&(h=D,H=A)}let y=t[2*h],C=t[2*h+1],b=1/0;for(let D=0;D<a;D++){if(D===p||D===h)continue;let H=gwe(g,v,y,C,t[2*D],t[2*D+1]);H<b&&(m=D,b=H)}let M=t[2*m],S=t[2*m+1];if(b===1/0){for(let A=0;A<a;A++)this._dists[A]=t[2*A]-t[0]||t[2*A+1]-t[1];rf(this._ids,this._dists,0,a-1);let D=new Uint32Array(a),H=0;for(let A=0,j=-1/0;A<a;A++){let V=this._ids[A],_=this._dists[V];_>j&&(D[H++]=V,j=_)}this.hull=D.subarray(0,H),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(nf(g,v,y,C,M,S)<0){let D=h,H=y,A=C;h=m,y=M,C=S,m=D,M=H,S=A}let w=vwe(g,v,y,C,M,S);this._cx=w.x,this._cy=w.y;for(let D=0;D<a;D++)this._dists[D]=aT(t[2*D],t[2*D+1],w.x,w.y);rf(this._ids,this._dists,0,a-1),this._hullStart=p;let E=3;r[p]=n[m]=h,r[h]=n[p]=m,r[m]=n[h]=p,i[p]=0,i[h]=1,i[m]=2,o.fill(-1),o[this._hashKey(g,v)]=p,o[this._hashKey(y,C)]=h,o[this._hashKey(M,S)]=m,this.trianglesLen=0,this._addTriangle(p,h,m,-1,-1,-1);for(let D=0,H,A;D<this._ids.length;D++){let j=this._ids[D],V=t[2*j],_=t[2*j+1];if(D>0&&Math.abs(V-H)<=Lee&&Math.abs(_-A)<=Lee||(H=V,A=_,j===p||j===h||j===m))continue;let N=0;for(let we=0,Se=this._hashKey(V,_);we<this._hashSize&&(N=o[(Se+we)%this._hashSize],!(N!==-1&&N!==r[N]));we++);N=n[N];let I=N,G;for(;G=r[I],nf(V,_,t[2*I],t[2*I+1],t[2*G],t[2*G+1])>=0;)if(I=G,I===N){I=-1;break}if(I===-1)continue;let X=this._addTriangle(I,j,r[I],-1,-1,i[I]);i[j]=this._legalize(X+2),i[I]=X,E++;let J=r[I];for(;G=r[J],nf(V,_,t[2*J],t[2*J+1],t[2*G],t[2*G+1])<0;)X=this._addTriangle(J,j,G,i[j],-1,i[J]),i[j]=this._legalize(X+2),r[J]=J,E--,J=G;if(I===N)for(;G=n[I],nf(V,_,t[2*G],t[2*G+1],t[2*I],t[2*I+1])<0;)X=this._addTriangle(G,j,I,-1,i[I],i[G]),this._legalize(X+2),i[G]=X,r[I]=I,E--,I=G;this._hullStart=n[j]=I,r[I]=n[J]=j,r[j]=J,o[this._hashKey(V,_)]=j,o[this._hashKey(t[2*I],t[2*I+1])]=I}this.hull=new Uint32Array(E);for(let D=0,H=this._hullStart;D<E;D++)this.hull[D]=H,H=r[H];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(hwe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){let{_triangles:n,_halfedges:r,coords:i}=this,o=0,a=0;for(;;){let s=r[t],c=t-t%3;if(a=c+(t+2)%3,s===-1){if(o===0)break;t=xC[--o];continue}let l=s-s%3,u=c+(t+1)%3,f=l+(s+2)%3,d=n[a],p=n[t],h=n[u],m=n[f];if(mwe(i[2*d],i[2*d+1],i[2*p],i[2*p+1],i[2*h],i[2*h+1],i[2*m],i[2*m+1])){n[t]=m,n[s]=d;let v=r[f];if(v===-1){let C=this._hullStart;do{if(this._hullTri[C]===f){this._hullTri[C]=t;break}C=this._hullPrev[C]}while(C!==this._hullStart)}this._link(t,v),this._link(s,r[a]),this._link(a,f);let y=l+(s+1)%3;o<xC.length&&(xC[o++]=y)}else{if(o===0)break;t=xC[--o]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,a){let s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=n,this._triangles[s+2]=r,this._link(s,i),this._link(s+1,o),this._link(s+2,a),this.trianglesLen+=3,s}};function hwe(e,t){let n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function aT(e,t,n,r){let i=e-n,o=t-r;return i*i+o*o}function mwe(e,t,n,r,i,o,a,s){let c=e-a,l=t-s,u=n-a,f=r-s,d=i-a,p=o-s,h=c*c+l*l,m=u*u+f*f,g=d*d+p*p;return c*(f*g-m*p)-l*(u*g-m*d)+h*(u*p-f*d)<0}function gwe(e,t,n,r,i,o){let a=n-e,s=r-t,c=i-e,l=o-t,u=a*a+s*s,f=c*c+l*l,d=.5/(a*l-s*c),p=(l*u-s*f)*d,h=(a*f-c*u)*d;return p*p+h*h}function vwe(e,t,n,r,i,o){let a=n-e,s=r-t,c=i-e,l=o-t,u=a*a+s*s,f=c*c+l*l,d=.5/(a*l-s*c),p=e+(l*u-s*f)*d,h=t+(a*f-c*u)*d;return{x:p,y:h}}function rf(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){let o=e[i],a=t[o],s=i-1;for(;s>=n&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=o}else{let i=n+r>>1,o=n+1,a=r;Dp(e,i,o),t[e[n]]>t[e[r]]&&Dp(e,n,r),t[e[o]]>t[e[r]]&&Dp(e,o,r),t[e[n]]>t[e[o]]&&Dp(e,n,o);let s=e[o],c=t[s];for(;;){do o++;while(t[e[o]]<c);do a--;while(t[e[a]]>c);if(a<o)break;Dp(e,o,a)}e[n+1]=e[a],e[a]=s,r-o+1>=a-n?(rf(e,t,o,r),rf(e,t,n,a-1)):(rf(e,t,n,a-1),rf(e,t,o,r))}}function Dp(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function ywe(e){return e[0]}function xwe(e){return e[1]}var q2=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;let i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}};var l0=class{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}};var CC=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this,o,a,s=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,v=r.length,y,C;m<v;m+=3,g+=2){let b=r[m]*2,M=r[m+1]*2,S=r[m+2]*2,w=t[b],E=t[b+1],D=t[M],H=t[M+1],A=t[S],j=t[S+1],V=D-w,_=H-E,N=A-w,I=j-E,G=(V*I-_*N)*2;if(Math.abs(G)<1e-9){if(o===void 0){o=a=0;for(let J of n)o+=t[J*2],a+=t[J*2+1];o/=n.length,a/=n.length}let X=1e9*Math.sign((o-w)*I-(a-E)*N);y=(w+A)/2-X*I,C=(E+j)/2+X*N}else{let X=1/G,J=V*V+_*_,we=N*N+I*I;y=w+(I*J-_*we)*X,C=E+(V*we-N*J)*X}s[g]=y,s[g+1]=C}let c=n[n.length-1],l,u=c*4,f,d=t[2*c],p,h=t[2*c+1];i.fill(0);for(let m=0;m<n.length;++m)c=n[m],l=u,f=d,p=h,u=c*4,d=t[2*c],h=t[2*c+1],i[l+2]=i[u]=p-h,i[l+3]=i[u+1]=d-f}render(t){let n=t==null?t=new q2:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:a,vectors:s}=this;if(o.length<=1)return null;for(let u=0,f=r.length;u<f;++u){let d=r[u];if(d<u)continue;let p=Math.floor(u/3)*2,h=Math.floor(d/3)*2,m=a[p],g=a[p+1],v=a[h],y=a[h+1];this._renderSegment(m,g,v,y,t)}let c,l=o[o.length-1];for(let u=0;u<o.length;++u){c=l,l=o[u];let f=Math.floor(i[l]/3)*2,d=a[f],p=a[f+1],h=c*4,m=this._project(d,p,s[h+2],s[h+3]);m&&this._renderSegment(d,p,m[0],m[1],t)}return n&&n.value()}renderBounds(t){let n=t==null?t=new q2:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){let r=n==null?n=new q2:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let a=2;a<o;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),r&&r.value()}*cellPolygons(){let{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){let i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){let n=new l0;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let a,s=this._regioncode(t,n),c=this._regioncode(r,i);s===0&&c===0?(o.moveTo(t,n),o.lineTo(r,i)):(a=this._clipSegment(t,n,r,i,s,c))&&(o.moveTo(a[0],a[1]),o.lineTo(a[2],a[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){let n=this._clip(t);if(n)for(let r of this.delaunay.neighbors(t)){let i=this._clip(r);if(i){e:for(let o=0,a=n.length;o<a;o+=2)for(let s=0,c=i.length;s<c;s+=2)if(n[o]===i[s]&&n[o+1]===i[s+1]&&n[(o+2)%a]===i[(s+c-2)%c]&&n[(o+3)%a]===i[(s+c-1)%c]){yield r;break e}}}}_cell(t){let{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,a=r[t];if(a===-1)return null;let s=[],c=a;do{let l=Math.floor(c/3);if(s.push(n[l*2],n[l*2+1]),c=c%3===2?c-2:c+1,o[c]!==t)break;c=i[c]}while(c!==a&&c!==-1);return s}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let n=this._cell(t);if(n===null)return null;let{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){let r=n.length,i=null,o,a,s=n[r-2],c=n[r-1],l,u=this._regioncode(s,c),f,d=0;for(let p=0;p<r;p+=2)if(o=s,a=c,s=n[p],c=n[p+1],l=u,u=this._regioncode(s,c),l===0&&u===0)f=d,d=0,i?i.push(s,c):i=[s,c];else{let h,m,g,v,y;if(l===0){if((h=this._clipSegment(o,a,s,c,l,u))===null)continue;[m,g,v,y]=h}else{if((h=this._clipSegment(s,c,o,a,u,l))===null)continue;[v,y,m,g]=h,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(v,y),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(v,y):i=[v,y]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,a){let s=o<a;for(s&&([t,n,r,i,o,a]=[r,i,t,n,a,o]);;){if(o===0&&a===0)return s?[r,i,t,n]:[t,n,r,i];if(o&a)return null;let c,l,u=o||a;u&8?(c=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):u&4?(c=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):u&2?(l=n+(i-n)*(this.xmax-t)/(r-t),c=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),c=this.xmin),o?(t=c,n=l,o=this._regioncode(t,n)):(r=c,i=l,a=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,a){let s=Array.from(n),c;if((c=this._project(s[0],s[1],r,i))&&s.unshift(c[0],c[1]),(c=this._project(s[s.length-2],s[s.length-1],o,a))&&s.push(c[0],c[1]),s=this._clipFinite(t,s))for(let l=0,u=s.length,f,d=this._edgecode(s[u-2],s[u-1]);l<u;l+=2)f=d,d=this._edgecode(s[l],s[l+1]),f&&d&&(l=this._edge(t,f,d,s,l),u=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,n,r,i,o){for(;n!==r;){let a,s;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,s=this.ymin;break}(i[o]!==a||i[o+1]!==s)&&this.contains(t,a,s)&&(i.splice(o,0,a,s),o+=2)}return o}_project(t,n,r,i){let o=1/0,a,s,c;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<o&&(c=this.ymin,s=t+(o=a)*r)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<o&&(c=this.ymax,s=t+(o=a)*r)}if(r>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/r)<o&&(s=this.xmax,c=n+(o=a)*i)}else if(r<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/r)<o&&(s=this.xmin,c=n+(o=a)*i)}return[s,c]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){let r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};var Cwe=2*Math.PI,of=Math.pow;function bwe(e){return e[0]}function Mwe(e){return e[1]}function wwe(e){let{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){let i=2*t[r],o=2*t[r+1],a=2*t[r+2];if((n[a]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function Swe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}var Hp=class e{static from(t,n=bwe,r=Mwe,i){return new e("length"in t?Ewe(t,n,r,i):Float64Array.from(Dwe(t,n,r,i)))}constructor(t){this._delaunator=new zp(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&wwe(t)){this.collinear=Int32Array.from({length:n.length/2},(d,p)=>p).sort((d,p)=>n[2*d]-n[2*p]||n[2*d+1]-n[2*p+1]);let c=this.collinear[0],l=this.collinear[this.collinear.length-1],u=[n[2*c],n[2*c+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let d=0,p=n.length/2;d<p;++d){let h=Swe(n[2*d],n[2*d+1],f);n[2*d]=h[0],n[2*d+1]=h[1]}this._delaunator=new zp(n)}else delete this.collinear;let r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let c=0,l=r.length;c<l;++c){let u=o[c%3===2?c-2:c+1];(r[c]===-1||a[u]===-1)&&(a[u]=c)}for(let c=0,l=i.length;c<l;++c)s[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],a[i[0]]=1,i.length===2&&(a[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new CC(this,t)}*neighbors(t){let{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:a,collinear:s}=this;if(s){let f=s.indexOf(t);f>0&&(yield s[f-1]),f<s.length-1&&(yield s[f+1]);return}let c=n[t];if(c===-1)return;let l=c,u=-1;do{if(yield u=a[l],l=l%3===2?l-2:l+1,a[l]!==t)return;if(l=o[l],l===-1){let f=r[(i[t]+1)%r.length];f!==u&&(yield f);return}}while(l!==c)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;let i=r,o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){let{inedges:i,hull:o,_hullIndex:a,halfedges:s,triangles:c,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let u=t,f=of(n-l[t*2],2)+of(r-l[t*2+1],2),d=i[t],p=d;do{let h=c[p],m=of(n-l[h*2],2)+of(r-l[h*2+1],2);if(m<f&&(f=m,u=h),p=p%3===2?p-2:p+1,c[p]!==t)break;if(p=s[p],p===-1){if(p=o[(a[t]+1)%o.length],p!==h&&of(n-l[p*2],2)+of(r-l[p*2+1],2)<f)return p;break}}while(p!==d);return u}render(t){let n=t==null?t=new q2:void 0,{points:r,halfedges:i,triangles:o}=this;for(let a=0,s=i.length;a<s;++a){let c=i[a];if(c<a)continue;let l=o[a]*2,u=o[c]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;let r=t==null?t=new q2:void 0,{points:i}=this;for(let o=0,a=i.length;o<a;o+=2){let s=i[o],c=i[o+1];t.moveTo(s+n,c),t.arc(s,c,n,0,Cwe)}return r&&r.value()}renderHull(t){let n=t==null?t=new q2:void 0,{hull:r,points:i}=this,o=r[0]*2,a=r.length;t.moveTo(i[o],i[o+1]);for(let s=1;s<a;++s){let c=2*r[s];t.lineTo(i[c],i[c+1])}return t.closePath(),n&&n.value()}hullPolygon(){let t=new l0;return this.renderHull(t),t.value()}renderTriangle(t,n){let r=n==null?n=new q2:void 0,{points:i,triangles:o}=this,a=o[t*=3]*2,s=o[t+1]*2,c=o[t+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[s],i[s+1]),n.lineTo(i[c],i[c+1]),n.closePath(),r&&r.value()}*trianglePolygons(){let{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){let n=new l0;return this.renderTriangle(t,n),n.value()}};function Ewe(e,t,n,r){let i=e.length,o=new Float64Array(i*2);for(let a=0;a<i;++a){let s=e[a];o[a*2]=t.call(r,s,a,e),o[a*2+1]=n.call(r,s,a,e)}return o}function*Dwe(e,t,n,r){let i=0;for(let o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function sT(e){P.call(this,null,e)}sT.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var zwe=[-1e5,-1e5,1e5,1e5];ee(sT,P,{transform(e,t){let n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:zwe;let o=this.value=Hp.from(r,e.x,e.y).voronoi(i);for(let a=0,s=r.length;a<s;++a){let c=o.cellPolygon(a);r[a][n]=c&&!Lwe(c)?Hwe(c):null}return t.reflow(e.modified()).modifies(n)}});function Hwe(e){let t=e[0][0],n=e[0][1],r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Lwe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}var fT={};br(fT,{wordcloud:()=>uT});var lT=Math.PI/180,Lp=64,bC=2048;function Awe(){var e=[256,256],t,n,r,i,o,a,s,c=Aee,l=[],u=Math.random,f={};f.layout=function(){for(var h=d(Go()),m=Iwe((e[0]>>5)*e[1]),g=null,v=l.length,y=-1,C=[],b=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:o(S),rotate:a(S),size:~~(r(S)+1e-14),padding:s(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,w)=>w.size-S.size);++y<v;){var M=b[y];M.x=e[0]*(u()+.5)>>1,M.y=e[1]*(u()+.5)>>1,Vwe(h,M,b,y),M.hasText&&p(m,M,g)&&(C.push(M),g?_we(g,M):g=[{x:M.x+M.x0,y:M.y+M.y0},{x:M.x+M.x1,y:M.y+M.y1}],M.x-=e[0]>>1,M.y-=e[1]>>1)}return C};function d(h){h.width=h.height=1;var m=Math.sqrt(h.getContext("2d").getImageData(0,0,1,1).data.length>>2);h.width=(Lp<<5)/m,h.height=bC/m;var g=h.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function p(h,m,g){for(var v=m.x,y=m.y,C=Math.sqrt(e[0]*e[0]+e[1]*e[1]),b=c(e),M=u()<.5?1:-1,S=-M,w,E,D;(w=b(S+=M))&&(E=~~w[0],D=~~w[1],!(Math.min(Math.abs(E),Math.abs(D))>=C));)if(m.x=v+E,m.y=y+D,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!Nwe(m,h,e[0]))&&(!g||kwe(m,g))){for(var H=m.sprite,A=m.width>>5,j=e[0]>>5,V=m.x-(A<<4),_=V&127,N=32-_,I=m.y1-m.y0,G=(m.y+m.y0)*j+(V>>5),X,J=0;J<I;J++){X=0;for(var we=0;we<=A;we++)h[G+we]|=X<<N|(we<A?(X=H[J*A+we])>>>_:0);G+=j}return m.sprite=null,!0}return!1}return f.words=function(h){return arguments.length?(l=h,f):l},f.size=function(h){return arguments.length?(e=[+h[0],+h[1]],f):e},f.font=function(h){return arguments.length?(n=u0(h),f):n},f.fontStyle=function(h){return arguments.length?(i=u0(h),f):i},f.fontWeight=function(h){return arguments.length?(o=u0(h),f):o},f.rotate=function(h){return arguments.length?(a=u0(h),f):a},f.text=function(h){return arguments.length?(t=u0(h),f):t},f.spiral=function(h){return arguments.length?(c=Fwe[h]||h,f):c},f.fontSize=function(h){return arguments.length?(r=u0(h),f):r},f.padding=function(h){return arguments.length?(s=u0(h),f):s},f.random=function(h){return arguments.length?(u=h,f):u},f}function Vwe(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(Lp<<5)/o,bC/o);var a=0,s=0,c=0,l=n.length,u,f,d,p,h;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,u=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*lT),g=Math.cos(t.rotate*lT),v=u*g,y=u*m,C=d*g,b=d*m;u=Math.max(Math.abs(v+b),Math.abs(v-b))+31>>5<<5,d=~~Math.max(Math.abs(y+C),Math.abs(y-C))}else u=u+31>>5<<5;if(d>c&&(c=d),a+u>=Lp<<5&&(a=0,s+=c,c=0),s+d>=bC)break;i.translate((a+(u>>1))/o,(s+(d>>1))/o),t.rotate&&i.rotate(t.rotate*lT),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=u,t.height=d,t.xoff=a,t.yoff=s,t.x1=u>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=u}for(var M=i.getImageData(0,0,(Lp<<5)/o,bC/o).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(u=t.width,f=u>>5,d=t.y1-t.y0,p=0;p<d*f;p++)S[p]=0;if(a=t.xoff,a==null)return;s=t.yoff;var w=0,E=-1;for(h=0;h<d;h++){for(p=0;p<u;p++){var D=f*h+(p>>5),H=M[(s+h)*(Lp<<5)+(a+p)<<2]?1<<31-p%32:0;S[D]|=H,w|=H}w?E=h:(t.y0++,d--,h--,s++)}t.y1=t.y0+E,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function Nwe(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),a=o&127,s=32-a,c=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),u,f=0;f<c;f++){u=0;for(var d=0;d<=i;d++)if((u<<s|(d<i?(u=r[f*i+d])>>>a:0))&t[l+d])return!0;l+=n}return!1}function _we(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function kwe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Aee(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Twe(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var a=o<0?-1:1;switch(Math.sqrt(1+4*a*o)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Iwe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function u0(e){return typeof e=="function"?e:function(){return e}}var Fwe={archimedean:Aee,rectangular:Twe},Vee=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Rwe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function uT(e){P.call(this,Awe(),e)}uT.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Vee}]};ee(uT,P,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&$("Wordcloud size dimensions must be non-zero.");function n(h){let m=e[h];return ke(m)&&t.modified(m.fields)}let r=e.modified();if(!(r||t.changed(t.ADD_REM)||Rwe.some(n)))return;let i=t.materialize(t.SOURCE).source,o=this.value,a=e.as||Vee,s=e.fontSize||14,c;if(ke(s)?c=e.fontSizeRange:s=hn(s),c){let h=s,m=lt("sqrt")().domain(Yi(i,h)).range(c);s=g=>m(h(g))}i.forEach(h=>{h[a[0]]=NaN,h[a[1]]=NaN,h[a[3]]=0});let l=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(e1).layout(),u=o.size(),f=u[0]>>1,d=u[1]>>1,p=l.length;for(let h=0,m,g;h<p;++h)m=l[h],g=m.datum,g[a[0]]=m.x+f,g[a[1]]=m.y+d,g[a[2]]=m.font,g[a[3]]=m.size,g[a[4]]=m.style,g[a[5]]=m.weight,g[a[6]]=m.rotate;return t.reflow(r).modifies(a)}});var hT={};br(hT,{crossfilter:()=>dT,resolvefilter:()=>pT});var Owe=e=>new Uint8Array(e),Pwe=e=>new Uint16Array(e),Ap=e=>new Uint32Array(e);function $we(){let e=8,t=[],n=Ap(0),r=MC(0,e),i=MC(0,e);return{data:()=>t,seen:()=>n=Bwe(n,t.length),add(o){for(let a=0,s=t.length,c=o.length,l;a<c;++a)l=o[a],l._index=s++,t.push(l)},remove(o,a){let s=t.length,c=Array(s-o),l=t,u,f,d;for(f=0;!a[f]&&f<s;++f)c[f]=t[f],l[f]=f;for(d=f;f<s;++f)u=t[f],a[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],c[d]=u,u._index=d++),r[f]=0;return t=c,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,a){r[o]|=a},clear(o,a){r[o]&=~a},resize(o,a){let s=r.length;(o>s||a>e)&&(e=Math.max(a,e),r=MC(o,e,r),i=MC(o,e))}}}function Bwe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function MC(e,t,n){let r=(t<257?Owe:t<65537?Pwe:Ap)(e);return n&&r.set(n),r}function Nee(e,t,n){let r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){let a=this,s=a.bisect(a.range,i.value),c=i.index,l=s[0],u=s[1],f=c.length,d;for(d=0;d<l;++d)o[c[d]]|=r;for(d=u;d<f;++d)o[c[d]]|=r;return a}}}function _ee(){let e=Ap(0),t=[],n=0;function r(s,c,l){if(!c.length)return[];let u=n,f=c.length,d=Ap(f),p=Array(f),h,m,g;for(g=0;g<f;++g)p[g]=s(c[g]),d[g]=g;if(p=Uwe(p,d),u)h=t,m=e,t=Array(u+f),e=Ap(u+f),jwe(l,h,m,u,p,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=p,e=d}return n=u+f,{index:d,value:p}}function i(s,c){let l=n,u,f,d;for(f=0;!c[e[f]]&&f<l;++f);for(d=f;f<l;++f)c[u=e[f]]||(e[d]=u,t[d]=t[f],++d);n=l-s}function o(s){for(let c=0,l=n;c<l;++c)e[c]=s[e[c]]}function a(s,c){let l;return c?l=c.length:(c=t,l=n),[$H(c,s[0],0,l),ml(c,s[1],0,l)]}return{insert:r,remove:i,bisect:a,reindex:o,index:()=>e,size:()=>n}}function Uwe(e,t){return e.sort.call(t,(n,r)=>{let i=e[n],o=e[r];return i<o?-1:i>o?1:0}),av(e,t)}function jwe(e,t,n,r,i,o,a,s,c){let l=0,u=0,f;for(f=0;l<r&&u<a;++f)t[l]<i[u]?(s[f]=t[l],c[f]=n[l++]):(s[f]=i[u],c[f]=o[u++]+e);for(;l<r;++l,++f)s[f]=t[l],c[f]=n[l];for(;u<a;++u,++f)s[f]=i[u],c[f]=o[u]+e}function dT(e){P.call(this,$we(),e),this._indices=null,this._dims=null}dT.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ee(dT,P,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){let n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length,s=0,c,l;for(;s<a;++s)c=n[s].fname,l=i[c]||(i[c]=_ee()),o.push(Nee(l,s,r[s]));return this.eval(e,t)},reinit(e,t){let n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,c=s.curr(),l=s.prev(),u=s.all(),f=n.rem=n.add,d=n.mod,p=i.length,h={},m,g,v,y,C,b,M,S,w;if(l.set(c),t.rem.length&&(C=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(b={},y=t.mod,M=0,S=y.length;M<S;++M)b[y[M]._index]=1;for(M=0;M<p;++M)w=r[M],(!a[M]||e.modified("fields",M)||t.modified(w.fields))&&(v=w.fname,(m=h[v])||(o[v]=g=_ee(),h[v]=m=g.insert(w,t.source,0)),a[M]=Nee(g,M,i[M]).onAdd(m,c));for(M=0,S=s.data().length;M<S;++M)C[M]||(l[M]!==c[M]?f.push(M):b[M]&&c[M]!==u&&d.push(M));return s.mask=(1<<p)-1,n},eval(e,t){let n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){let r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,c={},l=n.add,u=i.size()+r.length,f=o.length,d=i.size(),p,h,m;i.resize(u,f),i.add(r);let g=i.curr(),v=i.prev(),y=i.all();for(p=0;p<f;++p)h=s[p].fname,m=c[h]||(c[h]=a[h].insert(s[p],r,d)),o[p].onAdd(m,g);for(;d<u;++d)v[d]=y,g[d]!==y&&l.push(d)},modify(e,t){let n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod,s,c,l;for(s=0,c=a.length;s<c;++s)l=a[s]._index,i[l]!==o&&n.push(l)},remove(e,t,n){let r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),c={},l=n.rem,u=t.rem,f,d,p,h;for(f=0,d=u.length;f<d;++f)p=u[f]._index,c[p]=1,a[p]=h=o[p],o[p]=s,h!==s&&l.push(p);for(p in r)r[p].remove(d,c);return this.reindex(t,d,c),c},reindex(e,t,n){let r=this._indices,i=this.value;e.runAfter(()=>{let o=i.remove(t,n);for(let a in r)r[a].reindex(o)})},update(e,t,n){let r=this._dims,i=e.query,o=t.stamp,a=r.length,s=0,c,l;for(n.filters=0,l=0;l<a;++l)e.modified("query",l)&&(c=l,++s);if(s===1)s=r[c].one,this.incrementOne(r[c],i[c],n.add,n.rem);else for(l=0,s=0;l<a;++l)e.modified("query",l)&&(s|=r[l].one,this.incrementAll(r[l],i[l],o,n.add),n.rem=n.add);return s},incrementAll(e,t,n,r){let i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),c=e.index(),l=e.bisect(e.range),u=e.bisect(t),f=u[0],d=u[1],p=l[0],h=l[1],m=e.one,g,v,y;if(f<p)for(g=f,v=Math.min(p,d);g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;else if(f>p)for(g=p,v=Math.min(f,h);g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;if(d>h)for(g=Math.max(f,h),v=d;g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;else if(d<h)for(g=Math.max(p,d),v=h;g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;e.range=t.slice()},incrementOne(e,t,n,r){let i=this.value,o=i.curr(),a=e.index(),s=e.bisect(e.range),c=e.bisect(t),l=c[0],u=c[1],f=s[0],d=s[1],p=e.one,h,m,g;if(l<f)for(h=l,m=Math.min(f,u);h<m;++h)g=a[h],o[g]^=p,n.push(g);else if(l>f)for(h=f,m=Math.min(l,d);h<m;++h)g=a[h],o[g]^=p,r.push(g);if(u>d)for(h=Math.max(l,d),m=u;h<m;++h)g=a[h],o[g]^=p,n.push(g);else if(u<d)for(h=Math.max(f,u),m=d;h<m;++h)g=a[h],o[g]^=p,r.push(g);e.range=t.slice()}});function pT(e){P.call(this,null,e)}pT.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ee(pT,P,{transform(e,t){let n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;let o=t.fork(t.ALL),a=r.data(),s=r.curr(),c=r.prev(),l=u=>s[u]&n?null:a[u];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,u=>{let f=s[u]&n;return!f&&f^c[u]&n?a[u]:null}),o.filter(o.REM,u=>{let f=s[u]&n;return f&&!(f^(f^c[u]&n))?a[u]:null})):(o.filter(o.ADD,l),o.filter(o.REM,u=>(s[u]&n)===i?a[u]:null)),o.filter(o.SOURCE,u=>l(u._index))}});var qwe="RawCode",Lc="Literal",Gwe="Property",Wwe="Identifier",Ywe="ArrayExpression",Xwe="BinaryExpression",CT="CallExpression",Qwe="ConditionalExpression",Kwe="LogicalExpression",Zwe="MemberExpression",Jwe="ObjectExpression",eSe="UnaryExpression";function G2(e){this.type=e}G2.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=tSe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function tSe(e){switch(e.type){case Ywe:return e.elements;case Xwe:case Kwe:return[e.left,e.right];case CT:return[e.callee].concat(e.arguments);case Qwe:return[e.test,e.consequent,e.alternate];case Zwe:return[e.object,e.property];case Jwe:return e.properties;case Gwe:return[e.key,e.value];case eSe:return[e.argument];case Wwe:case Lc:case qwe:default:return[]}}var rs,Me,q,Di,Rt,EC=1,Tp=2,f0=3,d4=4,DC=5,p0=6,k1=7,Ip=8,nSe=9;rs={};rs[EC]="Boolean";rs[Tp]="<end>";rs[f0]="Identifier";rs[d4]="Keyword";rs[DC]="Null";rs[p0]="Numeric";rs[k1]="Punctuator";rs[Ip]="String";rs[nSe]="RegularExpression";var rSe="ArrayExpression",iSe="BinaryExpression",oSe="CallExpression",aSe="ConditionalExpression",$ee="Identifier",sSe="Literal",cSe="LogicalExpression",lSe="MemberExpression",uSe="ObjectExpression",fSe="Property",dSe="UnaryExpression",Vr="Unexpected token %0",pSe="Unexpected number",hSe="Unexpected string",mSe="Unexpected identifier",gSe="Unexpected reserved word",vSe="Unexpected end of input",yT="Invalid regular expression",mT="Invalid regular expression: missing /",Bee="Octal literals are not allowed in strict mode.",ySe="Duplicate data property in object literal not allowed in strict mode",ni="ILLEGAL",_p="Disabled.",xSe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),CSe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function zC(e,t){if(!e)throw new Error("ASSERT: "+t)}function Hc(e){return e>=48&&e<=57}function bT(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Np(e){return"01234567".indexOf(e)>=0}function bSe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function kp(e){return e===10||e===13||e===8232||e===8233}function Fp(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&xSe.test(String.fromCharCode(e))}function SC(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&CSe.test(String.fromCharCode(e))}var MSe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Uee(){for(;q<Di;){let e=Me.charCodeAt(q);if(bSe(e)||kp(e))++q;else break}}function xT(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)q<Di&&bT(Me[q])?(r=Me[q++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Et({},Vr,ni);return String.fromCharCode(i)}function wSe(){var e,t,n,r;for(e=Me[q],t=0,e==="}"&&Et({},Vr,ni);q<Di&&(e=Me[q++],!!bT(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Et({},Vr,ni),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function jee(){var e,t;for(e=Me.charCodeAt(q++),t=String.fromCharCode(e),e===92&&(Me.charCodeAt(q)!==117&&Et({},Vr,ni),++q,e=xT("u"),(!e||e==="\\"||!Fp(e.charCodeAt(0)))&&Et({},Vr,ni),t=e);q<Di&&(e=Me.charCodeAt(q),!!SC(e));)++q,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Me.charCodeAt(q)!==117&&Et({},Vr,ni),++q,e=xT("u"),(!e||e==="\\"||!SC(e.charCodeAt(0)))&&Et({},Vr,ni),t+=e);return t}function SSe(){var e,t;for(e=q++;q<Di;){if(t=Me.charCodeAt(q),t===92)return q=e,jee();if(SC(t))++q;else break}return Me.slice(e,q)}function ESe(){var e,t,n;return e=q,t=Me.charCodeAt(q)===92?jee():SSe(),t.length===1?n=f0:MSe.hasOwnProperty(t)?n=d4:t==="null"?n=DC:t==="true"||t==="false"?n=EC:n=f0,{type:n,value:t,start:e,end:q}}function gT(){var e=q,t=Me.charCodeAt(q),n,r=Me[q],i,o,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++q,{type:k1,value:String.fromCharCode(t),start:e,end:q};default:if(n=Me.charCodeAt(q+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return q+=2,{type:k1,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:q};case 33:case 61:return q+=2,Me.charCodeAt(q)===61&&++q,{type:k1,value:Me.slice(e,q),start:e,end:q}}}if(a=Me.substr(q,4),a===">>>=")return q+=4,{type:k1,value:a,start:e,end:q};if(o=a.substr(0,3),o===">>>"||o==="<<="||o===">>=")return q+=3,{type:k1,value:o,start:e,end:q};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return q+=2,{type:k1,value:i,start:e,end:q};if(i==="//"&&Et({},Vr,ni),"<>=!+-*%&|^/".indexOf(r)>=0)return++q,{type:k1,value:r,start:e,end:q};Et({},Vr,ni)}function DSe(e){let t="";for(;q<Di&&bT(Me[q]);)t+=Me[q++];return t.length===0&&Et({},Vr,ni),Fp(Me.charCodeAt(q))&&Et({},Vr,ni),{type:p0,value:parseInt("0x"+t,16),start:e,end:q}}function zSe(e){let t="0"+Me[q++];for(;q<Di&&Np(Me[q]);)t+=Me[q++];return(Fp(Me.charCodeAt(q))||Hc(Me.charCodeAt(q)))&&Et({},Vr,ni),{type:p0,value:parseInt(t,8),octal:!0,start:e,end:q}}function kee(){var e,t,n;if(n=Me[q],zC(Hc(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=q,e="",n!=="."){if(e=Me[q++],n=Me[q],e==="0"){if(n==="x"||n==="X")return++q,DSe(t);if(Np(n))return zSe(t);n&&Hc(n.charCodeAt(0))&&Et({},Vr,ni)}for(;Hc(Me.charCodeAt(q));)e+=Me[q++];n=Me[q]}if(n==="."){for(e+=Me[q++];Hc(Me.charCodeAt(q));)e+=Me[q++];n=Me[q]}if(n==="e"||n==="E")if(e+=Me[q++],n=Me[q],(n==="+"||n==="-")&&(e+=Me[q++]),Hc(Me.charCodeAt(q)))for(;Hc(Me.charCodeAt(q));)e+=Me[q++];else Et({},Vr,ni);return Fp(Me.charCodeAt(q))&&Et({},Vr,ni),{type:p0,value:parseFloat(e),start:t,end:q}}function HSe(){var e="",t,n,r,i,o=!1;for(t=Me[q],zC(t==="'"||t==='"',"String literal must starts with a quote"),n=q,++q;q<Di;)if(r=Me[q++],r===t){t="";break}else if(r==="\\")if(r=Me[q++],!r||!kp(r.charCodeAt(0)))switch(r){case"u":case"x":Me[q]==="{"?(++q,e+=wSe()):e+=xT(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Np(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),q<Di&&Np(Me[q])&&(o=!0,i=i*8+"01234567".indexOf(Me[q++]),"0123".indexOf(r)>=0&&q<Di&&Np(Me[q])&&(i=i*8+"01234567".indexOf(Me[q++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Me[q]===`
`&&++q;else{if(kp(r.charCodeAt(0)))break;e+=r}return t!==""&&Et({},Vr,ni),{type:Ip,value:e,octal:o,start:n,end:q}}function LSe(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Et({},yT)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Et({},yT)}try{return new RegExp(e,t)}catch{return null}}function ASe(){var e,t,n,r,i;for(e=Me[q],zC(e==="/","Regular expression literal must start with a slash"),t=Me[q++],n=!1,r=!1;q<Di;)if(e=Me[q++],t+=e,e==="\\")e=Me[q++],kp(e.charCodeAt(0))&&Et({},mT),t+=e;else if(kp(e.charCodeAt(0)))Et({},mT);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Et({},mT),i=t.substr(1,t.length-2),{value:i,literal:t}}function VSe(){var e,t,n;for(t="",n="";q<Di&&(e=Me[q],!!SC(e.charCodeAt(0)));)++q,e==="\\"&&q<Di?Et({},Vr,ni):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Et({},yT,n),{value:n,literal:t}}function NSe(){var e,t,n,r;return Rt=null,Uee(),e=q,t=ASe(),n=VSe(),r=LSe(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:q}}function _Se(e){return e.type===f0||e.type===d4||e.type===EC||e.type===DC}function qee(){if(Uee(),q>=Di)return{type:Tp,start:q,end:q};let e=Me.charCodeAt(q);return Fp(e)?ESe():e===40||e===41||e===59?gT():e===39||e===34?HSe():e===46?Hc(Me.charCodeAt(q+1))?kee():gT():Hc(e)?kee():gT()}function T1(){let e=Rt;return q=e.end,Rt=qee(),q=e.end,e}function Gee(){let e=q;Rt=qee(),q=e}function kSe(e){let t=new G2(rSe);return t.elements=e,t}function Tee(e,t,n){let r=new G2(e==="||"||e==="&&"?cSe:iSe);return r.operator=e,r.left=t,r.right=n,r}function TSe(e,t){let n=new G2(oSe);return n.callee=e,n.arguments=t,n}function ISe(e,t,n){let r=new G2(aSe);return r.test=e,r.consequent=t,r.alternate=n,r}function MT(e){let t=new G2($ee);return t.name=e,t}function Vp(e){let t=new G2(sSe);return t.value=e.value,t.raw=Me.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Iee(e,t,n){let r=new G2(lSe);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function FSe(e){let t=new G2(uSe);return t.properties=e,t}function Fee(e,t,n){let r=new G2(fSe);return r.key=t,r.value=n,r.kind=e,r}function RSe(e,t){let n=new G2(dSe);return n.operator=e,n.argument=t,n.prefix=!0,n}function Et(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,a)=>(zC(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=q,n.description=i,n}function HC(e){e.type===Tp&&Et(e,vSe),e.type===p0&&Et(e,pSe),e.type===Ip&&Et(e,hSe),e.type===f0&&Et(e,mSe),e.type===d4&&Et(e,gSe),Et(e,Vr,e.value)}function zi(e){let t=T1();(t.type!==k1||t.value!==e)&&HC(t)}function fn(e){return Rt.type===k1&&Rt.value===e}function vT(e){return Rt.type===d4&&Rt.value===e}function OSe(){let e=[];for(q=Rt.start,zi("[");!fn("]");)fn(",")?(T1(),e.push(null)):(e.push(d0()),fn("]")||zi(","));return T1(),kSe(e)}function Ree(){q=Rt.start;let e=T1();return e.type===Ip||e.type===p0?(e.octal&&Et(e,Bee),Vp(e)):MT(e.value)}function PSe(){var e,t,n,r;if(q=Rt.start,e=Rt,e.type===f0)return n=Ree(),zi(":"),r=d0(),Fee("init",n,r);if(e.type===Tp||e.type===k1)HC(e);else return t=Ree(),zi(":"),r=d0(),Fee("init",t,r)}function $Se(){var e=[],t,n,r,i={},o=String;for(q=Rt.start,zi("{");!fn("}");)t=PSe(),t.key.type===$ee?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Et({},ySe):i[r]=!0,e.push(t),fn("}")||zi(",");return zi("}"),FSe(e)}function BSe(){zi("(");let e=wT();return zi(")"),e}var USe={if:1};function jSe(){var e,t,n;if(fn("("))return BSe();if(fn("["))return OSe();if(fn("{"))return $Se();if(e=Rt.type,q=Rt.start,e===f0||USe[Rt.value])n=MT(T1().value);else if(e===Ip||e===p0)Rt.octal&&Et(Rt,Bee),n=Vp(T1());else{if(e===d4)throw new Error(_p);e===EC?(t=T1(),t.value=t.value==="true",n=Vp(t)):e===DC?(t=T1(),t.value=null,n=Vp(t)):fn("/")||fn("/=")?(n=Vp(NSe()),Gee()):HC(T1())}return n}function qSe(){let e=[];if(zi("("),!fn(")"))for(;q<Di&&(e.push(d0()),!fn(")"));)zi(",");return zi(")"),e}function GSe(){q=Rt.start;let e=T1();return _Se(e)||HC(e),MT(e.value)}function WSe(){return zi("."),GSe()}function YSe(){zi("[");let e=wT();return zi("]"),e}function XSe(){var e,t,n;for(e=jSe();;)if(fn("."))n=WSe(),e=Iee(".",e,n);else if(fn("("))t=qSe(),e=TSe(e,t);else if(fn("["))n=YSe(),e=Iee("[",e,n);else break;return e}function Oee(){let e=XSe();if(Rt.type===k1&&(fn("++")||fn("--")))throw new Error(_p);return e}function wC(){var e,t;if(Rt.type!==k1&&Rt.type!==d4)t=Oee();else{if(fn("++")||fn("--"))throw new Error(_p);if(fn("+")||fn("-")||fn("~")||fn("!"))e=T1(),t=wC(),t=RSe(e.value,t);else{if(vT("delete")||vT("void")||vT("typeof"))throw new Error(_p);t=Oee()}}return t}function Pee(e){let t=0;if(e.type!==k1&&e.type!==d4)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function QSe(){var e,t,n,r,i,o,a,s,c,l;if(e=Rt,c=wC(),r=Rt,i=Pee(r),i===0)return c;for(r.prec=i,T1(),t=[e,Rt],a=wC(),o=[c,r,a];(i=Pee(Rt))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,c=o.pop(),t.pop(),n=Tee(s,c,a),o.push(n);r=T1(),r.prec=i,o.push(r),t.push(Rt),n=wC(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=Tee(o[l-1].value,o[l-2],n),l-=2;return n}function d0(){var e,t,n;return e=QSe(),fn("?")&&(T1(),t=d0(),zi(":"),n=d0(),e=ISe(e,t,n)),e}function wT(){let e=d0();if(fn(","))throw new Error(_p);return e}function af(e){Me=e,q=0,Di=Me.length,Rt=null,Gee();let t=wT();if(Rt.type!==Tp)throw new Error("Unexpect token after expression.");return t}var ST={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function ET(e){function t(a,s,c,l){let u=e(s[0]);return c&&(u=c+"("+u+")",c.lastIndexOf("new ",0)===0&&(u="("+u+")")),u+"."+a+(l<0?"":l===0?"()":"("+s.slice(1).map(e).join(",")+")")}function n(a,s,c){return l=>t(a,l,s,c)}let r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&$("Missing arguments to clamp function."),a.length>3&&$("Too many arguments to clamp function.");let s=a.map(e);return"Math.max("+s[1]+", Math.min("+s[2]+","+s[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(a){a.length<3&&$("Missing arguments to if function."),a.length>3&&$("Too many arguments to if function.");let s=a.map(e);return"("+s[0]+"?"+s[1]+":"+s[2]+")"}}}function KSe(e){let t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function LC(e){e=e||{};let t=e.allowed?hr(e.allowed):{},n=e.forbidden?hr(e.forbidden):{},r=e.constants||ST,i=(e.functions||ET)(f),o=e.globalvar,a=e.fieldvar,s=ke(o)?o:h=>`${o}["${h}"]`,c={},l={},u=0;function f(h){if(Q(h))return h;let m=d[h.type];return m==null&&$("Unsupported type: "+h.type),m(h)}let d={Literal:h=>h.raw,Identifier:h=>{let m=h.name;return u>0?m:de(n,m)?$("Illegal identifier: "+m):de(r,m)?r[m]:de(t,m)?m:(c[m]=1,s(m))},MemberExpression:h=>{let m=!h.computed,g=f(h.object);m&&(u+=1);let v=f(h.property);return g===a&&(l[KSe(v)]=1),m&&(u-=1),g+(m?"."+v:"["+v+"]")},CallExpression:h=>{h.callee.type!=="Identifier"&&$("Illegal callee type: "+h.callee.type);let m=h.callee.name,g=h.arguments,v=de(i,m)&&i[m];return v||$("Unrecognized function: "+m),ke(v)?v(g):v+"("+g.map(f).join(",")+")"},ArrayExpression:h=>"["+h.elements.map(f).join(",")+"]",BinaryExpression:h=>"("+f(h.left)+" "+h.operator+" "+f(h.right)+")",UnaryExpression:h=>"("+h.operator+f(h.argument)+")",ConditionalExpression:h=>"("+f(h.test)+"?"+f(h.consequent)+":"+f(h.alternate)+")",LogicalExpression:h=>"("+f(h.left)+h.operator+f(h.right)+")",ObjectExpression:h=>"{"+h.properties.map(f).join(",")+"}",Property:h=>{u+=1;let m=f(h.key);return u-=1,m+":"+f(h.value)}};function p(h){let m={code:f(h),globals:Object.keys(c),fields:Object.keys(l)};return c={},l={},m}return p.functions=i,p.constants=r,p}var Wee=Symbol("vega_selection_getter");function Kee(e){return(!e.getter||!e.getter[Wee])&&(e.getter=Dr(e.field),e.getter[Wee]=!0),e.getter}var zT="intersect",Yee="union",ZSe="vlMulti",JSe="vlPoint",Xee="or",eEe="and",is="_vgsid_",Rp=Dr(is),tEe="E",nEe="R",rEe="R-E",iEe="R-LE",oEe="R-RE",AC="index:unit";function Qee(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,a,s;o<i;++o)if(s=n[o],a=Kee(s)(e),H2(a)&&(a=qn(a)),H2(r[o])&&(r[o]=qn(r[o])),F(r[o])&&H2(r[o][0])&&(r[o]=r[o].map(qn)),s.type===tEe){if(F(r[o])?r[o].indexOf(a)<0:a!==r[o])return!1}else if(s.type===nEe){if(!w3(a,r[o]))return!1}else if(s.type===oEe){if(!w3(a,r[o],!0,!1))return!1}else if(s.type===rEe){if(!w3(a,r[o],!1,!1))return!1}else if(s.type===iEe&&!w3(a,r[o],!1,!0))return!1;return!0}function Zee(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[AC]&&r[AC].value:void 0,a=n===zT,s=i.length,c=0,l,u,f,d,p;c<s;++c)if(l=i[c],o&&a){if(u=u||{},f=u[d=l.unit]||0,f===-1)continue;if(p=Qee(t,l),u[d]=p?-1:++f,p&&o.size===1)return!0;if(!p&&f===o.get(d).count)return!1}else if(p=Qee(t,l),a^p)return p;return s&&a}var Jee=ro(Rp),aEe=Jee.left,sEe=Jee.right;function ete(e,t,n){let r=this.context.data[e],i=r?r.values.value:[],o=r?r[AC]&&r[AC].value:void 0,a=n===zT,s=Rp(t),c=aEe(i,s);if(c===i.length||Rp(i[c])!==s)return!1;if(o&&a){if(o.size===1)return!0;if(sEe(i,s)-c<o.size)return!1}return!0}function tte(e,t){return e.map(n=>_e(t.fields?{values:t.fields.map(r=>Kee(r)(n.datum))}:{[is]:Rp(n.datum)},t))}function nte(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],a={},s={},c={},l,u,f,d,p,h,m,g,v,y,C=o.length,b=0,M,S;b<C;++b)if(l=o[b],d=l.unit,u=l.fields,f=l.values,u&&f){for(M=0,S=u.length;M<S;++M)p=u[M],m=a[p.field]||(a[p.field]={}),g=m[d]||(m[d]=[]),c[p.field]=v=p.type.charAt(0),y=DT[`${v}_union`],m[d]=y(g,te(f[M]));n&&(g=s[d]||(s[d]=[]),g.push(te(f).reduce((w,E,D)=>(w[u[D].field]=E,w),{})))}else p=is,h=Rp(l),m=a[p]||(a[p]={}),g=m[d]||(m[d]=[]),g.push(h),n&&(g=s[d]||(s[d]=[]),g.push({[is]:h}));if(t=t||Yee,a[is]?a[is]=DT[`${is}_${t}`](...Object.values(a[is])):Object.keys(a).forEach(w=>{a[w]=Object.keys(a[w]).map(E=>a[w][E]).reduce((E,D)=>E===void 0?D:DT[`${c[w]}_${t}`](E,D))}),o=Object.keys(s),n&&o.length){let w=r?JSe:ZSe;a[w]=t===Yee?{[Xee]:o.reduce((E,D)=>(E.push(...s[D]),E),[])}:{[eEe]:o.map(E=>({[Xee]:s[E]}))}}return a}var DT={[`${is}_union`]:fv,[`${is}_intersect`]:uv,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=qn(t[0]),r=qn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=qn(t[0]),r=qn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}},cEe=":",lEe="@";function VC(e,t,n,r){t[0].type!==Lc&&$("First argument to selection functions must be a string literal.");let i=t[0].value,o=t.length>=2&&Ue(t).value,a="unit",s=lEe+a,c=cEe+i;o===zT&&!de(r,s)&&(r[s]=n.getData(i).indataRef(n,a)),de(r,c)||(r[c]=n.getData(i).tuplesRef())}function ate(e){let t=this.context.data[e];return t?t.values.value:[]}function uEe(e,t,n){let r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function fEe(e,t){let n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(pr).insert(t)),1}function dEe(e,t,n){if(e){let r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}var Op=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},pEe=Op("format"),ste=Op("timeFormat"),hEe=Op("utcFormat"),mEe=Op("timeParse"),gEe=Op("utcParse"),NC=new Date(2e3,0,1);function _C(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(NC.setYear(2e3),NC.setMonth(e),NC.setDate(t),ste.call(this,NC,n))}function vEe(e){return _C.call(this,e,1,"%B")}function yEe(e){return _C.call(this,e,1,"%b")}function xEe(e){return _C.call(this,0,2+e,"%A")}function CEe(e){return _C.call(this,0,2+e,"%a")}var bEe=":",MEe="@",LT="%",cte="$";function NT(e,t,n,r){t[0].type!==Lc&&$("First argument to data functions must be a string literal.");let i=t[0].value,o=bEe+i;if(!de(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function wEe(e,t,n,r){t[0].type!==Lc&&$("First argument to indata must be a string literal."),t[1].type!==Lc&&$("Second argument to indata must be a string literal.");let i=t[0].value,o=t[1].value,a=MEe+o;de(a,r)||(r[a]=n.getData(i).indataRef(n,o))}function u1(e,t,n,r){if(t[0].type===Lc)rte(n,r,t[0].value);else for(e in n.scales)rte(n,r,e)}function rte(e,t,n){let r=LT+n;if(!de(t,r))try{t[r]=e.scaleRef(n)}catch{}}function os(e,t){if(ke(e))return e;if(Q(e)){let n=t.scales[e];return n&&BX(n.value)?n.value:void 0}}function SEe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=u1,n._range=u1,n._scale=u1;let r=i=>"_["+(i.type===Lc?Z(LT+i.value):Z(LT)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function _T(e,t){return function(n,r,i){if(n){let o=os(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}var EEe=_T("area",PN),DEe=_T("bounds",BN),zEe=_T("centroid",WN);function HEe(e,t){let n=os(e,(t||this).context);return n&&n.scale()}function LEe(e){let t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function kT(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function AEe(){return kT(this.context.dataflow,"warn",arguments)}function VEe(){return kT(this.context.dataflow,"info",arguments)}function NEe(){return kT(this.context.dataflow,"debug",arguments)}function HT(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function AT(e){let t=Wo(e),n=HT(t.r),r=HT(t.g),i=HT(t.b);return .2126*n+.7152*r+.0722*i}function _Ee(e,t){let n=AT(e),r=AT(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function kEe(){let e=[].slice.call(arguments);return e.unshift({}),_e(...e)}function lte(e,t){return e===t||e!==e&&t!==t?!0:F(e)?F(t)&&e.length===t.length?TEe(e,t):!1:ne(e)&&ne(t)?ute(e,t):!1}function TEe(e,t){for(let n=0,r=e.length;n<r;++n)if(!lte(e[n],t[n]))return!1;return!0}function ute(e,t){for(let n in e)if(!lte(e[n],t[n]))return!1;return!0}function ite(e){return t=>ute(e,t)}function IEe(e,t,n,r,i,o){let a=this.context.dataflow,s=this.context.data[e],c=s.input,l=a.stamp(),u=s.changes,f,d;if(a._trigger===!1||!(c.value.length||t||r))return 0;if((!u||u.stamp<l)&&(s.changes=u=a.changeset(),u.stamp=l,a.runAfter(()=>{s.modified=!0,a.pulse(c,u).run()},!0,1)),n&&(f=n===!0?pr:F(n)||Dl(n)?n:ite(n),u.remove(f)),t&&u.insert(t),r&&(f=ite(r),c.value.some(f)?u.remove(f):u.insert(r)),i)for(d in o)u.modify(i,d,o[d]);return 1}function FEe(e){let t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function REe(e){let t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}var ote={};function OEe(e,t){let n=ote[t]||(ote[t]=Dr(t));return F(e)?e.map(n):n(e)}function TT(e){return F(e)||ArrayBuffer.isView(e)?e:null}function IT(e){return TT(e)||(Q(e)?e:null)}function PEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return TT(e).join(...n)}function $Ee(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return IT(e).indexOf(...n)}function BEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return IT(e).lastIndexOf(...n)}function UEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return IT(e).slice(...n)}function jEe(e,t,n){return ke(n)&&$("Function argument passed to replace."),String(e).replace(t,n)}function qEe(e){return TT(e).slice().reverse()}function GEe(e,t,n){return p7(e||0,t||0,n||0)}function WEe(e,t){let n=os(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function YEe(e,t){let n=os(e,(t||this).context);return n?n.copy():void 0}function XEe(e,t){let n=os(e,(t||this).context);return n?n.domain():[]}function QEe(e,t,n){let r=os(e,(n||this).context);return r?F(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function KEe(e,t){let n=os(e,(t||this).context);return n&&n.range?n.range():[]}function ZEe(e,t,n){let r=os(e,(n||this).context);return r?r(t):void 0}function JEe(e,t,n,r,i){e=os(e,(i||this).context);let o=jV(t,n),a=e.domain(),s=a[0],c=Ue(a),l=An;return c-s?l=$y(e,s,c):e=(e.interpolator?lt("sequential")().interpolator(e.interpolator()):lt("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,c=1]),e.ticks&&(a=e.ticks(+r||15),s!==a[0]&&a.unshift(s),c!==Ue(a)&&a.push(c)),a.forEach(u=>o.stop(l(u),e(u))),o}function eDe(e,t,n){let r=os(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function tDe(e){let t=null;return function(n){return n?Au(n,t=t||Ql(e)):e}}var fte=e=>e.data;function dte(e,t){let n=ate.call(t,e);return n.root&&n.root.lookup||{}}function nDe(e,t,n){let r=dte(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(fte):void 0}function rDe(e,t){let n=dte(e,this)[t];return n?n.ancestors().map(fte):void 0}var pte=()=>typeof window<"u"&&window||null;function iDe(){let e=pte();return e?e.screen:{}}function oDe(){let e=pte();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function aDe(){let e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function hte(e,t,n){if(!e)return[];let[r,i]=e,o=new Vn().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return yN(a,o,sDe(t))}function sDe(e){let t=null;if(e){let n=te(e.marktype),r=te(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function cDe(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=te(e);let i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function lDe(e){return te(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function uDe(e,t,n){let{x:r,y:i,mark:o}=n,a=new Vn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(let[c,l]of t)c<a.x1&&(a.x1=c),c>a.x2&&(a.x2=c),l<a.y1&&(a.y1=l),l>a.y2&&(a.y2=l);return a.translate(r,i),hte([[a.x1,a.y1],[a.x2,a.y2]],e,o).filter(c=>fDe(c.x,c.y,t))}function fDe(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){let[a,s]=n[o],[c,l]=n[i];l>t!=s>t&&e<(a-c)*(t-l)/(s-l)+c&&r++}return r&1}var sf={random(){return e1()},cumulativeNormal:Fd,cumulativeLogNormal:Ov,cumulativeUniform:Uv,densityNormal:kv,densityLogNormal:Rv,densityUniform:Bv,quantileNormal:Rd,quantileLogNormal:Pv,quantileUniform:jv,sampleNormal:Id,sampleLogNormal:Fv,sampleUniform:$v,isArray:F,isBoolean:D1,isDate:H2,isDefined(e){return e!==void 0},isNumber:Oe,isObject:ne,isRegExp:DH,isString:Q,isTuple:Dl,isValid(e){return e!=null&&e===e},toBoolean:od,toDate(e){return ad(e)},toNumber:qn,toString:sd,indexof:$Ee,join:PEe,lastindexof:BEe,replace:jEe,reverse:qEe,slice:UEe,flush:SH,lerp:zH,merge:kEe,pad:AH,peek:Ue,pluck:OEe,span:ec,inrange:w3,truncate:VH,rgb:Wo,lab:$3,hcl:Fl,hsl:Il,luminance:AT,contrast:_Ee,sequence:Gn,format:pEe,utcFormat:hEe,utcParse:gEe,utcOffset:vL,utcSequence:xL,timeFormat:ste,timeParse:mEe,timeOffset:gL,timeSequence:yL,timeUnitSpecifier:cL,monthFormat:vEe,monthAbbrevFormat:yEe,dayFormat:xEe,dayAbbrevFormat:CEe,quarter:CH,utcquarter:bH,week:fL,utcweek:pL,dayofyear:uL,utcdayofyear:dL,warn:AEe,info:VEe,debug:NEe,extent(e){return Yi(e)},inScope:LEe,intersect:hte,clampRange:MH,pinchDistance:FEe,pinchAngle:REe,screen:iDe,containerSize:aDe,windowSize:oDe,bandspace:GEe,setdata:fEe,pathShape:tDe,panLinear:gH,panLog:vH,panPow:yH,panSymlog:xH,zoomLinear:Z5,zoomLog:J5,zoomPow:X6,zoomSymlog:ed,encode:dEe,modify:IEe,lassoAppend:cDe,lassoPath:lDe,intersectLasso:uDe},dDe=["view","item","group","xy","x","y"],pDe="event.vega.",mte="this.",FT={},gte={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Z(cte+e)}]`,functions:hDe,constants:ST,visitors:FT},VT=LC(gte);function hDe(e){let t=ET(e);dDe.forEach(n=>t[n]=pDe+n);for(let n in sf)t[n]=mte+n;return _e(t,SEe(e,sf,FT)),t}function Tn(e,t,n){return arguments.length===1?sf[e]:(sf[e]=t,n&&(FT[e]=n),VT&&(VT.functions[e]=mte+e),this)}Tn("bandwidth",WEe,u1);Tn("copy",YEe,u1);Tn("domain",XEe,u1);Tn("range",KEe,u1);Tn("invert",QEe,u1);Tn("scale",ZEe,u1);Tn("gradient",JEe,u1);Tn("geoArea",EEe,u1);Tn("geoBounds",DEe,u1);Tn("geoCentroid",zEe,u1);Tn("geoShape",eDe,u1);Tn("geoScale",HEe,u1);Tn("indata",uEe,wEe);Tn("data",ate,NT);Tn("treePath",nDe,NT);Tn("treeAncestors",rDe,NT);Tn("vlSelectionTest",Zee,VC);Tn("vlSelectionIdTest",ete,VC);Tn("vlSelectionResolve",nte,VC);Tn("vlSelectionTuples",tte);function W2(e,t){let n={},r;try{e=Q(e)?e:Z(e)+"",r=af(e)}catch{$("Expression parse error: "+e)}r.visit(o=>{if(o.type!==CT)return;let a=o.callee.name,s=gte.visitors[a];s&&s(a,o.arguments,t,n)});let i=VT(r);return i.globals.forEach(o=>{let a=cte+o;!de(n,a)&&t.getSignal(o)&&(n[a]=t.signalRef(o))}),{$expr:_e({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function mDe(e){let t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}var gDe=hr(["rule"]),vte=hr(["group","image","rect"]);function vDe(e,t){let n="";return gDe[t]||(e.x2&&(e.x?(vte[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(vte[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function RT(e){return(e+"").toLowerCase()}function yDe(e){return RT(e)==="operator"}function xDe(e){return RT(e)==="collect"}function Pp(e,t,n){n.endsWith(";")||(n="return("+n+");");let r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function CDe(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var bDe={operator:(e,t)=>Pp(e,["_"],t.code),parameter:(e,t)=>Pp(e,["datum","_"],t.code),event:(e,t)=>Pp(e,["event"],t.code),handler:(e,t)=>{let n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Pp(e,["_","event"],n)},encode:(e,t)=>{let{marktype:n,channels:r}=t,i="var o=item,datum=o.datum,m=0,$;";for(let o in r){let a="o["+Z(o)+"]";i+=`$=${r[o].code};if(${a}!==$)${a}=$,m=1;`}return i+=vDe(r,n),i+="return m;",Pp(e,["item","_"],i)},codegen:{get(e){let t=`[${e.map(Z).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n,r=(o,a)=>{let s=t[a],c,l;return o.path?(c=`a${o.path}`,l=`b${o.path}`):((n=n||{})["f"+a]=o,c=`this.f${a}(a)`,l=`this.f${a}(b)`),CDe(c,l,-s,s)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function MDe(e){let t=this;yDe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function wDe(e){let t=this;if(e.params){let n=t.get(e.id);n||$("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function SDe(e,t){t=t||{};let n=this;for(let r in e){let i=e[r];t[r]=F(i)?i.map(o=>yte(o,n,t)):yte(i,n,t)}return t}function yte(e,t,n){if(!e||!ne(e))return e;for(let r=0,i=xte.length,o;r<i;++r)if(o=xte[r],de(e,o.key))return o.parse(e,t,n);return e}var xte=[{key:"$ref",parse:EDe},{key:"$key",parse:zDe},{key:"$expr",parse:DDe},{key:"$field",parse:HDe},{key:"$encode",parse:ADe},{key:"$compare",parse:LDe},{key:"$context",parse:VDe},{key:"$subflow",parse:NDe},{key:"$tupleid",parse:_De}];function EDe(e,t){return t.get(e.$ref)||$("Operator not defined: "+e.$ref)}function DDe(e,t,n){e.$params&&t.parseParameters(e.$params,n);let r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=yi(t.parameterExpression(e.$expr),e.$fields))}function zDe(e,t){let n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=id(e.$key,e.$flat,t.expr.codegen))}function HDe(e,t){if(!e.$field)return null;let n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Dr(e.$field,e.$name,t.expr.codegen))}function LDe(e,t){let n="c:"+e.$compare+"_"+e.$order,r=te(e.$compare).map(i=>i&&i.$tupleid?Ee:i);return t.fn[n]||(t.fn[n]=td(r,e.$order,t.expr.codegen))}function ADe(e,t){let n=e.$encode,r={};for(let i in n){let o=n[i];r[i]=yi(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function VDe(e,t){return t}function NDe(e,t){let n=e.$subflow;return function(r,i,o){let a=t.fork().parse(n),s=a.get(n.operators[0].id),c=a.signals.parent;return c&&c.set(o),s.detachSubflow=()=>t.detach(a),s}}function _De(){return Ee}function kDe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&$("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function TDe(e){var t=this,n=ne(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,a=void 0;r||$("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(a=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,a)}var IDe={skip:!0};function FDe(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{let a=t.signals[o];e.signals(o,a)&&(r[o]=a.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{let a=t.data[o];e.data(o,a)&&(i[o]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function RDe(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],IDe)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(pr).insert(r[o]))}),(e.subcontext||[]).forEach((o,a)=>{let s=t.subcontext[a];s&&s.setState(o)})}function kC(e,t,n,r){return new bte(e,t,n,r)}function bte(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||bDe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Cte(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}bte.prototype=Cte.prototype={fork(){let e=new Cte(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);let t=Object.keys(e.nodes);for(let n of t)e.nodes[n]._targets=null;for(let n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){let n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),xDe(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(let o in e.data){let a=n.data[o]||(n.data[o]={});e.data[o].forEach(s=>a[s]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[RT(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:mDe,parseOperator:MDe,parseOperatorParameters:wDe,parseParameters:SDe,parseStream:kDe,parseUpdate:TDe,getState:FDe,setState:RDe};function ODe(e){let t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Ate(t,e.description()))}function Ate(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function PDe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}var OT="default";function $De(e){let t=e._signals.cursor||(e._signals.cursor=e.add({user:OT,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{let i=t.value,o=i?Q(i)?i:i.user:OT,a=r.item&&r.item.cursor||null;return i&&o===i.user&&a==i.item?i:{user:o,item:a}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Q(r)||(i=r.item,r=r.user),$T(e,r&&r!==OT?r:i||r),i},{cursor:t})}function $T(e,t){let n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function FC(e,t){var n=e._runtime.data;return de(n,t)||$("Unrecognized data set: "+t),n[t]}function BDe(e,t){return arguments.length<2?FC(this,e).values.value:OC.call(this,e,uc().remove(pr).insert(t))}function OC(e,t){kL(t)||$("Second argument to changes must be a changeset.");let n=FC(this,e);return n.modified=!0,this.pulse(n.input,t)}function UDe(e,t){return OC.call(this,e,uc().insert(t))}function jDe(e,t){return OC.call(this,e,uc().remove(t))}function Vte(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Nte(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function PC(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function qDe(e){var t=PC(e),n=Vte(e),r=Nte(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function GDe(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,a,s;return i&&(s=PC(e),a=t.changedTouches?t.changedTouches[0]:t,o=B7(a,i),o[0]-=s[0],o[1]-=s[1]),t.dataflow=e,t.item=n,t.vega=WDe(e,n,o),t}function WDe(e,t,n){let r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(a){var s=r,c;if(a){for(c=t;c;c=c.mark.group)if(c.mark.name===a){s=c;break}}return s&&s.mark&&s.mark.interactive?s:{}}function o(a){if(!a)return n;Q(a)&&(a=i(a));let s=n.slice();for(;a;)s[0]-=a.x||0,s[1]-=a.y||0,a=a.mark&&a.mark.group;return s}return{view:hn(e),item:hn(t||{}),group:i,xy:o,x:a=>o(a)[0],y:a=>o(a)[1]}}var Mte="view",YDe="timer",XDe="window",QDe={trap:!1};function KDe(e){let t=_e({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{F(r[o])&&(r[o]=hr(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function _te(e,t,n,r){e._eventListeners.push({type:n,sources:te(t),handler:r})}function ZDe(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function TC(e,t,n){let r=e._eventConfig&&e._eventConfig[t];return r===!1||ne(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function JDe(e,t,n){var r=this,i=new uu(n),o=function(l,u){r.runAsync(null,()=>{e===Mte&&ZDe(r,t)&&l.preventDefault(),i.receive(GDe(r,l,u))})},a;if(e===YDe)TC(r,"timer",t)&&r.timer(o,t);else if(e===Mte)TC(r,"view",t)&&r.addEventListener(t,o,QDe);else if(e===XDe?TC(r,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&TC(r,"selector",t)&&(a=Array.from(document.querySelectorAll(e))),!a)r.warn("Can not resolve event source: "+e);else{for(var s=0,c=a.length;s<c;++s)a[s].addEventListener(t,o);_te(r,a,t,o)}return i}function wte(e){return e.item}function Ste(e){return e.item.mark.source}function Ete(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function eze(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",wte),Ste,Ete(e)),this.on(this.events("view","pointerout",wte),Ste,Ete(t)),this}function tze(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,o;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(o=n[r],i=o.sources.length;--i>=0;)o.sources[i].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this}function uo(e,t,n){let r=document.createElement(e);for(let i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}var nze="vega-bind",rze="vega-bind-name",ize="vega-bind-radio";function oze(e,t,n){if(!t)return;let r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,a)})}},r.debounce&&(i.update=rd(r.debounce,i.update))),(r.input==null&&r.element?aze:cze)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function aze(e,t,n,r){let i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),_te(r,t,i,o),e.set=a=>{t.value=a,t.dispatchEvent(sze(i))}}function sze(e){return typeof Event<"u"?new Event(e):{type:e}}function cze(e,t,n,r){let i=r.signal(n.signal),o=uo("div",{class:nze}),a=n.input==="radio"?o:o.appendChild(uo("label"));a.appendChild(uo("span",{class:rze},n.name||n.signal)),t.appendChild(o);let s=lze;switch(n.input){case"checkbox":s=uze;break;case"select":s=fze;break;case"radio":s=dze;break;case"range":s=pze;break}s(e,a,n,i)}function lze(e,t,n,r){let i=uo("input");for(let o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function uze(e,t,n,r){let i={type:"checkbox",name:n.signal};r&&(i.checked=!0);let o=uo("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=a=>o.checked=!!a||null}function fze(e,t,n,r){let i=uo("select",{name:n.signal}),o=n.labels||[];n.options.forEach((a,s)=>{let c={value:a};RC(a,r)&&(c.selected=!0),i.appendChild(uo("option",c,(o[s]||a)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=a=>{for(let s=0,c=n.options.length;s<c;++s)if(RC(n.options[s],a)){i.selectedIndex=s;return}}}function dze(e,t,n,r){let i=uo("span",{class:ize}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((a,s)=>{let c={type:"radio",name:n.signal,value:a};RC(a,r)&&(c.checked=!0);let l=uo("input",c);l.addEventListener("change",()=>e.update(a));let u=uo("label",{},(o[s]||a)+"");return u.prepend(l),i.appendChild(u),l}),e.set=a=>{let s=e.elements,c=s.length;for(let l=0;l<c;++l)RC(s[l].value,a)&&(s[l].checked=!0)}}function pze(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;let i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||Xi(o,i,100),s=uo("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;let c=uo("span",{},+r);t.appendChild(s),t.appendChild(c);let l=()=>{c.textContent=s.value,e.update(+s.value)};s.addEventListener("input",l),s.addEventListener("change",l),e.elements=[s],e.set=u=>{s.value=u,c.textContent=u}}function RC(e,t){return e===t||e+""==t+""}function kte(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,Vte(e),Nte(e),PC(e),i,o).background(e.background())}function BT(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function hze(e,t,n,r){let i=new r(e.loader(),BT(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,PC(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function mze(e,t){let n=this,r=n._renderType,i=n._eventConfig.bind,o=U7(r);e=n._el=e?PT(n,e,!0):null,ODe(n),o||n.error("Unrecognized renderer type: "+r);let a=o.handler||vc,s=e?o.renderer:o.headless;return n._renderer=s?kte(n,n._renderer,e,s):null,n._handler=hze(n,n._handler,e,a),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=PT(n,t,!0):e.appendChild(uo("form",{class:"vega-bindings"})),n._bind.forEach(c=>{c.param.element&&i!=="container"&&(c.element=PT(n,c.param.element,!!c.param.input))}),n._bind.forEach(c=>{oze(n,c.element||t,c)})),n}function PT(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}var $p=e=>+e||0,gze=e=>({top:e,bottom:e,left:e,right:e});function Dte(e){return ne(e)?{top:$p(e.top),bottom:$p(e.bottom),left:$p(e.left),right:$p(e.right)}:gze($p(e))}function UT(e,t,n,r){return qt(this,null,function*(){let i=U7(t),o=i&&i.headless;return o||$("Unrecognized renderer type: "+t),yield e.runAsync(),kte(e,null,null,o,n,r).renderAsync(e._scenegraph.root)})}function vze(e,t){return qt(this,null,function*(){e!==yc.Canvas&&e!==yc.SVG&&e!==yc.PNG&&$("Unrecognized image type: "+e);let n=yield UT(this,e,t);return e===yc.SVG?yze(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")})}function yze(e,t){let n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function xze(e,t){return qt(this,null,function*(){return(yield UT(this,yc.Canvas,e,t)).canvas()})}function Cze(e){return qt(this,null,function*(){return(yield UT(this,yc.SVG,e)).svg()})}function bze(e,t,n){return kC(e,lc,sf,n).parse(t)}function Mze(e){var t=this._runtime.scales;return de(t,e)||$("Unrecognized scale or projection: "+e),t[e].value}var Tte="width",Ite="height",jT="padding",zte={skip:!0};function Fte(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===jT?r.left+r.right:0)}function Rte(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===jT?r.top+r.bottom:0)}function wze(e){var t=e._signals,n=t[Tte],r=t[Ite],i=t[jT];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,s=>{e._width=s.size,e._viewWidth=Fte(e,s.size),o()},{size:n}),e._resizeHeight=e.add(null,s=>{e._height=s.size,e._viewHeight=Rte(e,s.size),o()},{size:r});let a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function Sze(e,t,n,r,i,o){this.runAfter(a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(Tte,n,zte),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(Ite,r,zte),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter(c=>c.resize())},!1,1)}function Eze(e){return this._runtime.getState(e||{data:Dze,signals:zze,recurse:!0})}function Dze(e,t){return t.modified&&F(t.input.value)&&!e.startsWith("_:vega:_")}function zze(e,t){return!(e==="parent"||t instanceof lc.proxy)}function Hze(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Lze(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(ak(n,t))}function Aze(e,t,n,r){let i=e.element();i&&i.setAttribute("title",Vze(r))}function Vze(e){return e==null?"":F(e)?Ote(e):ne(e)&&!H2(e)?Nze(e):e+""}function Nze(e){return Object.keys(e).map(t=>{let n=e[t];return t+": "+(F(n)?Ote(n):Pte(n))}).join(`
`)}function Ote(e){return"["+e.map(Pte).join(", ")+"]"}function Pte(e){return F(e)?"[\u2026]":ne(e)&&!H2(e)?"{\u2026}":e}function _ze(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null,t=()=>{e?.();let n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function qT(e,t){let n=this;if(t=t||{},_3.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){let o=_e({},e.locale,t.locale);n.locale(Cv(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||yc.Canvas,n._scenegraph=new yx;let r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Aze,n._redraw=!0,n._handler=new vc().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=KDe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);let i=bze(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:_e({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Fte(n,n._width),n._viewHeight=Rte(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,wze(n),PDe(n),$De(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function IC(e,t){return de(e._signals,t)?e._signals[t]:$("Unrecognized signal name: "+Z(t))}function $te(e,t){let n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Hte(e,t,n,r){let i=$te(n,r);return i||(i=BT(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Lte(e,t,n){let r=$te(t,n);return r&&t._targets.remove(r),e}ee(qT,_3,{evaluate(e,t,n){return qt(this,null,function*(){if(yield _3.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,qDe(this)),yield this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&_d(this,n),this})},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){let t=e!=null?e+"":null;return t!==this._desc&&Ate(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){let r=IC(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Dte(e)):Dte(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(U7(e)||$("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(_3.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(IC(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Sze,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=BT(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){let t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Hte(this,e,IC(this,e),t)},removeSignalListener(e,t){return Lte(this,IC(this,e),t)},addDataListener(e,t){return Hte(this,e,FC(this,e).values,t)},removeDataListener(e,t){return Lte(this,FC(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){let t=$T(this,null);this._globalCursor=!!e,t&&$T(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Lze,events:JDe,finalize:tze,hover:eze,data:BDe,change:OC,insert:UDe,remove:jDe,scale:Mze,initialize:mze,toImageURL:vze,toCanvas:xze,toSVG:Cze,getState:Eze,setState:Hze,_watchPixelRatio:_ze});var kze="view",$C="[",BC="]",Bte="{",Ute="}",Tze=":",jte=",",Ize="@",Fze=">",Rze=/[[\]{}]/,Oze={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},qte,Gte;function Hi(e,t,n){return qte=t||kze,Gte=n||Oze,Wte(e.trim()).map(GT)}function Pze(e){return Gte[e]}function Bp(e,t,n,r,i){let o=e.length,a=0,s;for(;t<o;++t){if(s=e[t],!a&&s===n)return t;i&&i.indexOf(s)>=0?--a:r&&r.indexOf(s)>=0&&++a}return t}function Wte(e){let t=[],n=e.length,r=0,i=0;for(;i<n;)i=Bp(e,i,jte,$C+Bte,BC+Ute),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function GT(e){return e[0]==="["?$ze(e):Bze(e)}function $ze(e){let t=e.length,n=1,r;if(n=Bp(e,n,BC,$C,BC),n===t)throw"Empty between selector: "+e;if(r=Wte(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Fze)throw"Expected '>' after between selector: "+e;r=r.map(GT);let i=GT(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Bze(e){let t={source:qte},n=[],r=[0,0],i=0,o=0,a=e.length,s=0,c,l;if(e[a-1]===Ute){if(s=e.lastIndexOf(Bte),s>=0){try{r=Uze(e.substring(s+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,s).trim(),a=e.length}else throw"Unmatched right brace: "+e;s=0}if(!a)throw e;if(e[0]===Ize&&(i=++s),c=Bp(e,s,Tze),c<a&&(n.push(e.substring(o,c).trim()),o=s=++c),s=Bp(e,s,$C),s===a)n.push(e.substring(o,a).trim());else if(n.push(e.substring(o,s).trim()),l=[],o=++s,o===a)throw"Unmatched left bracket: "+e;for(;s<a;){if(s=Bp(e,s,BC),s===a)throw"Unmatched left bracket: "+e;if(l.push(e.substring(o,s).trim()),s<a-1&&e[++s]!==$C)throw"Expected left bracket: "+e;o=++s}if(!(a=n.length)||Rze.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],i?t.markname=n[0].slice(1):Pze(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Uze(e){let t=e.split(jte);if(!e.length||t.length>2)throw e;return t.map(n=>{let r=+n;if(r!==r)throw e;return r})}function jze(e){return ne(e)?e:{type:e||"pad"}}var Up=e=>+e||0,qze=e=>({top:e,bottom:e,left:e,right:e});function Gze(e){return ne(e)?e.signal?e:{top:Up(e.top),bottom:Up(e.bottom),left:Up(e.left),right:Up(e.right)}:qze(Up(e))}var Nr=e=>ne(e)&&!F(e)?_e({},e):{value:e};function Yte(e,t,n,r){return n!=null?(ne(n)&&!F(n)||F(n)&&n.length&&ne(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function ri(e,t,n){for(let r in t)Yte(e,r,t[r]);for(let r in n)Yte(e,r,n[r],"update")}function pf(e,t,n){for(let r in t)n&&de(n,r)||(e[r]=_e(e[r]||{},t[r]));return e}function lf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}var rI="mark",iI="frame",oI="scope",Wze="axis",Yze="axis-domain",Xze="axis-grid",Qze="axis-label",Kze="axis-tick",Zze="axis-title",Jze="legend",eHe="legend-band",tHe="legend-entry",nHe="legend-gradient",pne="legend-label",rHe="legend-symbol",iHe="legend-title",oHe="title",aHe="title-text",sHe="title-subtitle";function cHe(e,t,n,r,i){let o={},a={},s,c,l,u;c="lineBreak",t==="text"&&i[c]!=null&&!lf(c,e)&&WT(o,c,i[c]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),u=n===iI?i.group:n===rI?_e({},i.mark,i[t]):null;for(c in u)l=lf(c,e)||(c==="fill"||c==="stroke")&&(lf("fill",e)||lf("stroke",e)),l||WT(o,c,u[c]);te(r).forEach(f=>{let d=i.style&&i.style[f];for(let p in d)lf(p,e)||WT(o,p,d[p])}),e=_e({},e);for(c in o)u=o[c],u.signal?(s=s||{})[c]=u:a[c]=u;return e.enter=_e(a,e.enter),s&&(e.update=_e(s,e.update)),e}function WT(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}var hne=e=>Q(e)?Z(e):e.signal?`(${e.signal})`:mne(e);function QC(e){if(e.gradient!=null)return uHe(e);let t=e.signal?`(${e.signal})`:e.color?lHe(e.color):e.field!=null?mne(e.field):e.value!==void 0?Z(e.value):void 0;return e.scale!=null&&(t=fHe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${jC(e.exponent)})`),e.mult!=null&&(t+=`*${jC(e.mult)}`),e.offset!=null&&(t+=`+${jC(e.offset)}`),e.round&&(t=`round(${t})`),t}var UC=(e,t,n,r)=>`(${e}(${[t,n,r].map(QC).join(",")})+'')`;function lHe(e){return e.c?UC("hcl",e.h,e.c,e.l):e.h||e.s?UC("hsl",e.h,e.s,e.l):e.l||e.a?UC("lab",e.l,e.a,e.b):e.r||e.g||e.b?UC("rgb",e.r,e.g,e.b):null}function uHe(e){let t=[e.start,e.stop,e.count].map(n=>n==null?null:Z(n));for(;t.length&&Ue(t)==null;)t.pop();return t.unshift(hne(e.gradient)),`gradient(${t.join(",")})`}function jC(e){return ne(e)?"("+QC(e)+")":e}function mne(e){return gne(ne(e)?e:{datum:e})}function gne(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):$("Invalid field reference: "+Z(e));return e.signal||(r=Q(r)?Oo(r).map(Z).join("]["):gne(r)),t+"["+r+"]"}function fHe(e,t){let n=hne(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+jC(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function dHe(e){let t="";return e.forEach(n=>{let r=QC(n);t+=n.test?`(${n.test})?${r}:`:r}),Ue(t)===":"&&(t+="null"),t}function vne(e,t,n,r,i,o){let a={};o=o||{},o.encoders={$encode:a},e=cHe(e,t,n,r,i.config);for(let s in e)a[s]=pHe(e[s],t,o,i);return o}function pHe(e,t,n,r){let i={},o={};for(let a in e)e[a]!=null&&(i[a]=mHe(hHe(e[a]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function hHe(e){return F(e)?dHe(e):QC(e)}function mHe(e,t,n,r){let i=W2(e,t);return i.$fields.forEach(o=>r[o]=1),_e(n,i.$params),i.$expr}var gHe="outer",vHe=["value","update","init","react","bind"];function Xte(e,t){$(e+' for "outer" push: '+Z(t))}function yne(e,t){let n=e.name;if(e.push===gHe)t.signals[n]||Xte("No prior signal definition",n),vHe.forEach(r=>{e[r]!==void 0&&Xte("Invalid property ",r)});else{let r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function QT(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function KC(e,t,n,r){return new QT(e,t,n,r)}function XC(e,t){return KC("operator",e,t)}function Ve(e){let t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Gp(e,t){return t?{$field:e,$name:t}:{$field:e}}var KT=Gp("key");function Qte(e,t){return{$compare:e,$order:t}}function yHe(e,t){let n={$key:e};return t&&(n.$flat=!0),n}var xHe="ascending",CHe="descending";function bHe(e){return ne(e)?(e.order===CHe?"-":"+")+ZC(e.op,e.field):""}function ZC(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}var aI="scope",ZT="view";function yr(e){return e&&e.signal}function MHe(e){return e&&e.expr}function qC(e){if(yr(e))return!0;if(ne(e)){for(let t in e)if(qC(e[t]))return!0}return!1}function Y2(e,t){return e??t}function m0(e){return e&&e.signal||e}var Kte="timer";function Wp(e,t){return(e.merge?SHe:e.stream?EHe:e.type?DHe:$("Invalid stream specification: "+Z(e)))(e,t)}function wHe(e){return e===aI?ZT:e||ZT}function SHe(e,t){let n=e.merge.map(i=>Wp(i,t)),r=sI({merge:n},e,t);return t.addStream(r).id}function EHe(e,t){let n=Wp(e.stream,t),r=sI({stream:n},e,t);return t.addStream(r).id}function DHe(e,t){let n;e.type===Kte?(n=t.event(Kte,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(wHe(e.source),e.type);let r=sI({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function sI(e,t,n){let r=t.between;return r&&(r.length!==2&&$('Stream "between" parameter must have 2 entries: '+Z(t)),e.between=[Wp(r[0],n),Wp(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(zHe(t.marktype,t.markname,t.markrole)),t.source===aI&&r.push("inScope(event.item)"),r.length&&(e.filter=W2("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function zHe(e,t,n){let r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}var HHe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function LHe(e,t,n){let r=e.encode,i={target:n},o=e.events,a=e.update,s=[];o||$("Signal update missing events specification."),Q(o)&&(o=Hi(o,t.isSubscope()?aI:ZT)),o=te(o).filter(c=>c.signal||c.scale?(s.push(c),0):1),s.length>1&&(s=[VHe(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),r!=null&&(a&&$("Signal encode and update are mutually exclusive."),a="encode(item(),"+Z(r)+")"),i.update=Q(a)?W2(a,t):a.expr!=null?W2(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:HHe,$params:{$value:t.signalRef(a.signal)}}:$("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach(c=>t.addUpdate(_e(AHe(c,t),i)))}function AHe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Wp(e,t)}}function VHe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function NHe(e,t){let n=t.getSignal(e.name),r=e.update;e.init&&(r?$("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=W2(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>LHe(i,t,n.id))}var Ut=e=>(t,n,r)=>KC(e,n,t||void 0,r),xne=Ut("aggregate"),_He=Ut("axisticks"),Cne=Ut("bound"),Q2=Ut("collect"),Zte=Ut("compare"),kHe=Ut("datajoin"),bne=Ut("encode"),THe=Ut("expression"),IHe=Ut("facet"),FHe=Ut("field"),RHe=Ut("key"),OHe=Ut("legendentries"),PHe=Ut("load"),$He=Ut("mark"),BHe=Ut("multiextent"),UHe=Ut("multivalues"),jHe=Ut("overlap"),qHe=Ut("params"),Mne=Ut("prefacet"),GHe=Ut("projection"),WHe=Ut("proxy"),YHe=Ut("relay"),wne=Ut("render"),XHe=Ut("scale"),v0=Ut("sieve"),QHe=Ut("sortitems"),Sne=Ut("viewlayout"),KHe=Ut("values"),ZHe=0,Ene={min:"min",max:"max",count:"sum"};function JHe(e,t){let n=e.type||"linear";gV(n)||$("Unrecognized scale type: "+Z(n)),t.addScale(e.name,{type:n,domain:void 0})}function eLe(e,t){let n=t.getScale(e.name).params,r;n.domain=Dne(e.domain,e,t),e.range!=null&&(n.range=Hne(e,t,n)),e.interpolate!=null&&uLe(e.interpolate,n),e.nice!=null&&(n.nice=lLe(e.nice,t)),e.bins!=null&&(n.bins=cLe(e.bins,t));for(r in e)de(n,r)||r==="name"||(n[r]=Jo(e[r],t))}function Jo(e,t){return ne(e)?e.signal?t.signalRef(e.signal):$("Unsupported object: "+Z(e)):e}function GC(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Jo(n,t))}function JC(e){$("Can not find data set: "+Z(e))}function Dne(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&$("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(F(e)?tLe:e.fields?rLe:nLe)(e,t,n)}function tLe(e,t,n){return e.map(r=>Jo(r,n))}function nLe(e,t,n){let r=n.getData(e.data);return r||JC(e.data),q3(t.type)?r.valuesRef(n,e.field,zne(e.sort,!1)):xV(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function rLe(e,t,n){let r=e.data,i=e.fields.reduce((o,a)=>(a=Q(a)?{data:r,field:a}:F(a)||a.signal?iLe(a,n):a,o.push(a),o),[]);return(q3(t.type)?oLe:xV(t.type)?aLe:sLe)(e,n,i)}function iLe(e,t){let n="_:vega:_"+ZHe++,r=Q2({});if(F(e))r.value={$ingest:e};else if(e.signal){let i="setdata("+Z(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,v0({})]),{data:n,field:"data"}}function oLe(e,t,n){let r=zne(e.sort,!0),i,o,a=n.map(l=>{let u=t.getData(l.data);return u||JC(l.data),u.countsRef(t,l.field,r)}),s={groupby:KT,pulse:a};r&&(i=r.op||"count",o=r.field?ZC(i,r.field):"count",s.ops=[Ene[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(xne(s));let c=t.add(Q2({pulse:Ve(i)}));return o=t.add(KHe({field:KT,sort:t.sortRef(r),pulse:Ve(c)})),Ve(o)}function zne(e,t){return e&&(!e.field&&!e.op?ne(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?$("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Ene[e.op]&&$("Multiple domain scales can not be sorted using "+e.op)),e}function aLe(e,t,n){let r=n.map(i=>{let o=t.getData(i.data);return o||JC(i.data),o.domainRef(t,i.field)});return Ve(t.add(UHe({values:r})))}function sLe(e,t,n){let r=n.map(i=>{let o=t.getData(i.data);return o||JC(i.data),o.extentRef(t,i.field)});return Ve(t.add(BHe({extents:r})))}function cLe(e,t){return e.signal||F(e)?GC(e,t):t.objectProperty(e)}function lLe(e,t){return e.signal?t.signalRef(e.signal):ne(e)?{interval:Jo(e.interval),step:Jo(e.step)}:Jo(e)}function uLe(e,t){t.interpolate=Jo(e.type||e),e.gamma!=null&&(t.interpolateGamma=Jo(e.gamma))}function Hne(e,t,n){let r=t.config.range,i=e.range;if(i.signal)return t.signalRef(i.signal);if(Q(i)){if(r&&de(r,i))return e=_e({},e,{range:r[i]}),Hne(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=q3(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:$("Unrecognized scale range value: "+Z(i))}else if(i.scheme){n.scheme=F(i.scheme)?GC(i.scheme,t):Jo(i.scheme,t),i.extent&&(n.schemeExtent=GC(i.extent,t)),i.count&&(n.schemeCount=Jo(i.count,t));return}else if(i.step){n.rangeStep=Jo(i.step,t);return}else{if(q3(e.type)&&!F(i))return Dne(i,e,t);F(i)||$("Unsupported range type: "+Z(i))}return i.map(o=>(F(o)?GC:Jo)(o,t))}function fLe(e,t){let n=t.config.projection||{},r={};for(let i in e)i!=="name"&&(r[i]=JT(e[i],i,t));for(let i in n)r[i]==null&&(r[i]=JT(n[i],i,t));t.addProjection(e.name,r)}function JT(e,t,n){return F(e)?e.map(r=>JT(r,t,n)):ne(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:$("Unsupported parameter object: "+Z(e)):e}var K2="top",hf="left",mf="right",p4="bottom",Lne="center",dLe="vertical",pLe="start",hLe="middle",mLe="end",eI="index",cI="label",gLe="offset",df="perc",vLe="perc2",e2="value",Xp="guide-label",lI="guide-title",yLe="group-title",xLe="group-subtitle",Jte="symbol",WC="gradient",tI="discrete",nI="size",CLe="shape",bLe="fill",MLe="stroke",wLe="strokeWidth",SLe="strokeDash",ELe="opacity",uI=[nI,CLe,bLe,MLe,wLe,SLe,ELe],Qp={name:1,style:1,interactive:1},mt={value:0},t2={value:1},eb="group",Ane="rect",fI="rule",DLe="symbol",y0="text";function Yp(e){return e.type=eb,e.interactive=e.interactive||!1,e}function I1(e,t){let n=(r,i)=>Y2(e[r],Y2(t[r],i));return n.isVertical=r=>dLe===Y2(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Y2(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Y2(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Y2(e.columns,Y2(t.columns,+n.isVertical(!0))),n}function Vne(e,t){let n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function zLe(e,t,n){let r=t.config.style[n];return r&&r[e]}function tb(e,t,n){return`item.anchor === '${pLe}' ? ${e} : item.anchor === '${mLe}' ? ${t} : ${n}`}var dI=tb(Z(hf),Z(mf),Z(Lne));function HLe(e){let t=e("tickBand"),n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ne(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function Nne(e,t){return t?e?ne(e)?Object.assign({},e,{offset:Nne(e.offset,t)}):{value:e,offset:t}:t:e}function fo(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=pf(e.encode,t,Qp)):e.interactive=!1,e}function LLe(e,t,n,r){let i=I1(e,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength(),c,l,u,f,d;o?(l=[0,1],u=[0,0],f=a,d=s):(l=[0,0],u=[1,0],f=s,d=a);let p={enter:c={opacity:mt,x:mt,y:mt,width:Nr(f),height:Nr(d)},update:_e({},c,{opacity:t2,fill:{gradient:t,start:l,stop:u}}),exit:{opacity:mt}};return ri(p,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),fo({type:Ane,role:nHe,encode:p},r)}function ALe(e,t,n,r,i){let o=I1(e,n),a=o.isVertical(),s=o.gradientThickness(),c=o.gradientLength(),l,u,f,d,p="";a?(l="y",f="y2",u="x",d="width",p="1-"):(l="x",f="x2",u="y",d="height");let h={opacity:mt,fill:{scale:t,field:e2}};h[l]={signal:p+"datum."+df,mult:c},h[u]=mt,h[f]={signal:p+"datum."+vLe,mult:c},h[d]=Nr(s);let m={enter:h,update:_e({},h,{opacity:t2}),exit:{opacity:mt}};return ri(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),fo({type:Ane,role:eHe,key:e2,from:i,encode:m},r)}var VLe=`datum.${df}<=0?"${hf}":datum.${df}>=1?"${mf}":"${Lne}"`,NLe=`datum.${df}<=0?"${p4}":datum.${df}>=1?"${K2}":"${hLe}"`;function ene(e,t,n,r){let i=I1(e,t),o=i.isVertical(),a=Nr(i.gradientThickness()),s=i.gradientLength(),c=i("labelOverlap"),l,u,f,d,p="",h={enter:l={opacity:mt},update:u={opacity:t2,text:{field:cI}},exit:{opacity:mt}};return ri(h,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Y2(e.labelLimit,t.gradientLabelLimit)}),o?(l.align={value:"left"},l.baseline=u.baseline={signal:NLe},f="y",d="x",p="1-"):(l.align=u.align={signal:VLe},l.baseline={value:"top"},f="x",d="y"),l[f]=u[f]={signal:p+"datum."+df,mult:s},l[d]=u[d]=a,a.offset=Y2(e.labelOffset,t.gradientLabelOffset)||0,c=c?{separation:i("labelSeparation"),method:c,order:"datum."+eI}:void 0,fo({type:y0,role:pne,style:Xp,key:e2,from:r,encode:h,overlap:c},n)}function _Le(e,t,n,r,i){let o=I1(e,t),a=n.entries,s=!!(a&&a.interactive),c=a?a.name:void 0,l=o("clipHeight"),u=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${gLe} : datum.${nI}`,p=l?Nr(l):{field:nI},h=`datum.${eI}`,m=`max(1, ${i})`,g,v,y,C,b;p.mult=.5,g={enter:v={opacity:mt,x:{signal:d,mult:.5,offset:u},y:p},update:y={opacity:t2,x:v.x,y:v.y},exit:{opacity:mt}};let M=null,S=null;e.fill||(M=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),ri(g,{fill:o("symbolFillColor",M),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",S),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),uI.forEach(H=>{e[H]&&(y[H]=v[H]={scale:e[H],field:e2})});let w=fo({type:DLe,role:rHe,key:e2,from:f,clip:l?!0:void 0,encode:g},n.symbols),E=Nr(u);E.offset=o("labelOffset"),g={enter:v={opacity:mt,x:{signal:d,offset:E},y:p},update:y={opacity:t2,text:{field:cI},x:v.x,y:v.y},exit:{opacity:mt}},ri(g,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});let D=fo({type:y0,role:pne,style:Xp,key:e2,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:mt,height:l?Nr(l):mt,opacity:mt},exit:{opacity:mt},update:y={opacity:t2,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(C=`ceil(item.mark.items.length / ${m})`,y.row.signal=`${h}%${C}`,y.column.signal=`floor(${h} / ${C})`,b={field:["row",h]}):(y.row.signal=`floor(${h} / ${m})`,y.column.signal=`${h} % ${m}`,b={field:h}),y.column.signal=`(${i})?${y.column.signal}:${h}`,r={facet:{data:r,name:"value",groupby:eI}},Yp({role:oI,from:r,encode:pf(g,a,Qp),marks:[w,D],name:c,interactive:s,sort:b})}function kLe(e,t){let n=I1(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}var pI='item.orient === "left"',hI='item.orient === "right"',nb=`(${pI} || ${hI})`,TLe=`datum.vgrad && ${nb}`,ILe=tb('"top"','"bottom"','"middle"'),FLe=tb('"right"','"left"','"center"'),RLe=`datum.vgrad && ${hI} ? (${FLe}) : (${nb} && !(datum.vgrad && ${pI})) ? "left" : ${dI}`,OLe=`item._anchor || (${nb} ? "middle" : "start")`,PLe=`${TLe} ? (${pI} ? -90 : 90) : 0`,$Le=`${nb} ? (datum.vgrad ? (${hI} ? "bottom" : "top") : ${ILe}) : "top"`;function BLe(e,t,n,r){let i=I1(e,t),o={enter:{opacity:mt},update:{opacity:t2,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:mt}};return ri(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:OLe},angle:{signal:PLe},align:{signal:RLe},baseline:{signal:$Le},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),fo({type:y0,role:iHe,style:lI,from:r,encode:o},n)}function ULe(e,t){let n;return ne(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+tne(e.path)+")":e.sphere&&(n="geoShape("+tne(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function tne(e){return ne(e)&&e.signal?e.signal:Z(e)}function _ne(e){let t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===eb?oI:t||rI}function jLe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||_ne(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function qLe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function mI(e,t){let n=Av(e.type);n||$("Unrecognized transform type: "+Z(e.type));let r=KC(n.type.toLowerCase(),null,kne(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function kne(e,t,n){let r={},i=e.params.length;for(let o=0;o<i;++o){let a=e.params[o];r[a.name]=GLe(a,t,n)}return r}function GLe(e,t,n){let r=e.type,i=t[e.name];if(r==="index")return WLe(e,t,n);if(i===void 0){e.required&&$("Missing required "+Z(t.type)+" parameter: "+Z(e.name));return}else{if(r==="param")return YLe(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!yr(i)?i.map(o=>nne(e,o,n)):nne(e,i,n)}function nne(e,t,n){let r=e.type;if(yr(t))return ine(r)?$("Expression references can not be signals."):YT(r)?n.fieldRef(t):one(r)?n.compareRef(t):n.signalRef(t.signal);{let i=e.expr||YT(r);return i&&XLe(t)?n.exprRef(t.expr,t.as):i&&QLe(t)?Gp(t.field,t.as):ine(r)?W2(t,n):KLe(r)?Ve(n.getData(t).values):YT(r)?Gp(t):one(r)?n.compareRef(t):t}}function WLe(e,t,n){return Q(t.from)||$('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function YLe(e,t,n){let r=t[e.name];return e.array?(F(r)||$("Expected an array of sub-parameters. Instead: "+Z(r)),r.map(i=>rne(e,i,n))):rne(e,r,n)}function rne(e,t,n){let r=e.params.length,i;for(let a=0;a<r;++a){i=e.params[a];for(let s in i.key)if(i.key[s]!==t[s]){i=null;break}if(i)break}i||$("Unsupported parameter: "+Z(t));let o=_e(kne(i,t,n),i.key);return Ve(n.add(qHe(o)))}var XLe=e=>e&&e.expr,QLe=e=>e&&e.field,KLe=e=>e==="data",ine=e=>e==="expr",YT=e=>e==="field",one=e=>e==="compare";function ZLe(e,t,n){let r,i,o,a,s;return e?(r=e.facet)&&(t||$("Only group marks can be faceted."),r.field!=null?a=s=YC(r,n):(e.data?s=Ve(n.getData(e.data).aggregate):(o=mI(_e({type:"aggregate",groupby:te(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=YC(r,n),a=s=Ve(n.add(o))),i=n.keyRef(r.groupby,!0))):a=Ve(n.add(Q2(null,[{}]))),a||(a=YC(e,n)),{key:i,pulse:a,parent:s}}function YC(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ve(t.getData(e.data).output)}function g0(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}g0.fromEntries=function(e,t){let n=t.length,r=t[n-1],i=t[n-2],o=t[0],a=null,s=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=Ve(t[s-1]),e.add(t[s]),t[s].type==="aggregate"&&(a=t[s]);return new g0(e,o,i,r,a)};function Tne(e){return Q(e)?e:null}function ane(e,t,n){let r=ZC(n.op,n.field),i;if(t.ops){for(let o=0,a=t.as.length;o<a;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function jp(e,t,n,r,i,o,a){let s=t[n]||(t[n]={}),c=bHe(o),l=Tne(i),u,f;if(l!=null&&(e=t.scope,l=l+(c?"|"+c:""),u=s[l]),!u){let d=o?{field:KT,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:Ve(t.output)};c&&(d.sort=e.sortRef(o)),f=e.add(KC(r,void 0,d)),a&&(t.index[i]=f),u=Ve(f),l!=null&&(s[l]=u)}return u}g0.prototype={countsRef(e,t,n){let r=this,i=r.counts||(r.counts={}),o=Tne(t),a,s,c;return o!=null&&(e=r.scope,a=i[o]),a?n&&n.field&&ane(e,a.agg.params,n):(c={groupby:e.fieldRef(t,"key"),pulse:Ve(r.output)},n&&n.field&&ane(e,c,n),s=e.add(xne(c)),a=e.add(Q2({pulse:Ve(s)})),a={agg:s,ref:Ve(a)},o!=null&&(i[o]=a)),a.ref},tuplesRef(){return Ve(this.values)},extentRef(e,t){return jp(e,this,"extent","extent",t,!1)},domainRef(e,t){return jp(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return jp(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return jp(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return jp(e,this,"indata","tupleindex",t,!0,!0)}};function JLe(e,t,n){let r=e.from.facet,i=r.name,o=YC(r,t),a;r.name||$("Facet must have a name: "+Z(r)),r.data||$("Facet must reference a data set: "+Z(r)),r.field?a=t.add(Mne({field:t.fieldRef(r.field),pulse:o})):r.groupby?a=t.add(IHe({key:t.keyRef(r.groupby),group:Ve(t.proxy(n.parent)),pulse:o})):$("Facet must specify groupby or field: "+Z(r));let s=t.fork(),c=s.add(Q2()),l=s.add(v0({pulse:Ve(c)}));s.addData(i,new g0(s,c,c,l)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}function eAe(e,t,n){let r=t.add(Mne({pulse:n.pulse})),i=t.fork();i.add(v0()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function Ine(e,t,n){let r=e.remove,i=e.insert,o=e.toggle,a=e.modify,s=e.values,c=t.add(XC()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,o,a,s].map(f=>f??"null").join(",")+"),0)",u=W2(l,t);c.update=u.$expr,c.params=u.$params}function rb(e,t){let n=_ne(e),r=e.type===eb,i=e.from&&e.from.facet,o=e.overlap,a=e.layout||n===oI||n===iI,s,c,l,u,f,d,p,h=n===rI||a||i,m=ZLe(e.from,r,t);c=t.add(kHe({key:m.key||(e.key?Gp(e.key):void 0),pulse:m.pulse,clean:!r}));let g=Ve(c);c=l=t.add(Q2({pulse:g})),c=t.add($He({markdef:jLe(e),interactive:qLe(e.interactive,t),clip:ULe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ve(c)}));let v=Ve(c);c=u=t.add(bne(vne(e.encode,e.type,n,e.style,t,{mod:!1,pulse:v}))),c.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{let w=mI(S,t),E=w.metadata;(E.generates||E.changes)&&$("Mark transforms should not generate new data."),E.nomod||(u.params.mod=!0),w.params.pulse=Ve(c),t.add(c=w)}),e.sort&&(c=t.add(QHe({sort:t.compareRef(e.sort),pulse:Ve(c)})));let y=Ve(c);(i||a)&&(a=t.add(Sne({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:y})),d=Ve(a));let C=t.add(Cne({mark:v,pulse:d||y}));p=Ve(C),r&&(h&&(s=t.operators,s.pop(),a&&s.pop()),t.pushState(y,d||p,g),i?JLe(e,t,m):h?eAe(e,t,m):t.parse(e),t.popState(),h&&(a&&s.push(a),s.push(C))),o&&(p=tAe(o,p,t));let b=t.add(wne({pulse:p})),M=t.add(v0({pulse:Ve(b)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new g0(t,l,b,M)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&$("Marks only support modify triggers."),Ine(S,t,f)}))}function tAe(e,t,n){let r=e.method,i=e.bound,o=e.separation,a={separation:yr(o)?n.signalRef(o.signal):o,method:yr(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),i){let s=i.tolerance;a.boundTolerance=yr(s)?n.signalRef(s.signal):+s,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return Ve(n.add(jHe(a)))}function nAe(e,t){let n=t.config.legend,r=e.encode||{},i=I1(e,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,c=o.style,l={},u=0,f,d,p;uI.forEach(C=>e[C]?(l[C]=e[C],u=u||e[C]):0),u||$("Missing valid scale for legend.");let h=rAe(e,t.scaleType(u)),m={title:e.title!=null,scales:l,type:h,vgrad:h!=="symbol"&&i.isVertical()},g=Ve(t.add(Q2(null,[m]))),v={enter:{x:{value:0},y:{value:0}}},y=Ve(t.add(OHe(d={type:h,scale:t.scaleRef(u),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return h===WC?(p=[LLe(e,u,n,r.gradient),ene(e,n,r.labels,y)],d.count=d.count||t.signalRef(`max(2,2*floor((${m0(i.gradientLength())})/100))`)):h===tI?p=[ALe(e,u,n,r.gradient,y),ene(e,n,r.labels,y)]:(f=kLe(e,n),p=[_Le(e,n,r,y,m0(f.columns))],d.size=aAe(e,t,p[0].marks)),p=[Yp({role:tHe,from:g,encode:v,marks:p,layout:f,interactive:s})],m.title&&p.push(BLe(e,n,r.title,g)),rb(Yp({role:Jze,from:g,encode:pf(oAe(i,e,n),o,Qp),marks:p,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:c}),t)}function rAe(e,t){let n=e.type||Jte;return!e.type&&iAe(e)===1&&(e.fill||e.stroke)&&(n=x7(t)?WC:Ry(t)?tI:Jte),n!==WC?n:Ry(t)?tI:WC}function iAe(e){return uI.reduce((t,n)=>t+(e[n]?1:0),0)}function oAe(e,t,n){let r={enter:{},update:{}};return ri(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function aAe(e,t,n){let r=m0(sne("size",e,n)),i=m0(sne("strokeWidth",e,n)),o=m0(sAe(n[1].encode,t,Xp));return W2(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function sne(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Vne(e,n[0].encode)}function sAe(e,t,n){return Vne("fontSize",e)||zLe("fontSize",t,n)}var cAe=`item.orient==="${hf}"?-90:item.orient==="${mf}"?90:0`;function lAe(e,t){e=Q(e)?{text:e}:e;let n=I1(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,c=[],l={},u=Ve(t.add(Q2(null,[l])));return c.push(dAe(e,n,uAe(e),u)),e.subtitle&&c.push(pAe(e,n,r.subtitle,u)),rb(Yp({role:oHe,from:u,encode:fAe(n,i),marks:c,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function uAe(e){let t=e.encode;return t&&t.title||_e({name:e.name,interactive:e.interactive,style:e.style},t)}function fAe(e,t){let n={enter:{},update:{}};return ri(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:dI},angle:{signal:cAe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),pf(n,t,Qp)}function dAe(e,t,n,r){let i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ri(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),fo({type:y0,role:aHe,style:yLe,from:r,encode:a},n)}function pAe(e,t,n,r){let i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ri(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),fo({type:y0,role:sHe,style:xLe,from:r,encode:a},n)}function hAe(e,t){let n=[];e.transform&&e.transform.forEach(r=>{n.push(mI(r,t))}),e.on&&e.on.forEach(r=>{Ine(r,t,e.name)}),t.addDataPipeline(e.name,mAe(e,t,n))}function mAe(e,t,n){let r=[],i=null,o=!1,a=!1,s,c,l,u,f;for(e.values?yr(e.values)||qC(e.format)?(r.push(cne(t,e)),r.push(i=h0())):r.push(i=h0({$ingest:e.values,$format:e.format})):e.url?qC(e.url)||qC(e.format)?(r.push(cne(t,e)),r.push(i=h0())):r.push(i=h0({$request:e.url,$format:e.format})):e.source&&(i=s=te(e.source).map(d=>Ve(t.getData(d).output)),r.push(null)),c=0,l=n.length;c<l;++c)u=n[c],f=u.metadata,!i&&!f.source&&r.push(i=h0()),r.push(u),f.generates&&(a=!0),f.modifies&&!a&&(o=!0),f.source?i=u:f.changes&&(i=null);return s&&(l=s.length-1,r[0]=YHe({derive:o,pulse:l?s:s[0]}),(o||l)&&r.splice(1,0,h0())),i||r.push(h0()),r.push(v0({})),r}function h0(e){let t=Q2({},e);return t.metadata={source:!0},t}function cne(e,t){return PHe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}var Fne=e=>e===p4||e===K2,ib=(e,t,n)=>yr(e)?xAe(e.signal,t,n):e===hf||e===K2?t:n,_r=(e,t,n)=>yr(e)?vAe(e.signal,t,n):Fne(e)?t:n,X2=(e,t,n)=>yr(e)?yAe(e.signal,t,n):Fne(e)?n:t,Rne=(e,t,n)=>yr(e)?CAe(e.signal,t,n):e===K2?{value:t}:{value:n},gAe=(e,t,n)=>yr(e)?bAe(e.signal,t,n):e===mf?{value:t}:{value:n},vAe=(e,t,n)=>One(`${e} === '${K2}' || ${e} === '${p4}'`,t,n),yAe=(e,t,n)=>One(`${e} !== '${K2}' && ${e} !== '${p4}'`,t,n),xAe=(e,t,n)=>gI(`${e} === '${hf}' || ${e} === '${K2}'`,t,n),CAe=(e,t,n)=>gI(`${e} === '${K2}'`,t,n),bAe=(e,t,n)=>gI(`${e} === '${mf}'`,t,n),One=(e,t,n)=>(t=t!=null?Nr(t):t,n=n!=null?Nr(n):n,lne(t)&&lne(n)?(t=t?t.signal||Z(t.value):null,n=n?n.signal||Z(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[_e({test:e},t)].concat(n||[])),lne=e=>e==null||Object.keys(e).length===1,gI=(e,t,n)=>({signal:`${e} ? (${uf(t)}) : (${uf(n)})`}),MAe=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${hf}' ? (${uf(r)}) : `:"")+(n!=null?`${e} === '${p4}' ? (${uf(n)}) : `:"")+(i!=null?`${e} === '${mf}' ? (${uf(i)}) : `:"")+(t!=null?`${e} === '${K2}' ? (${uf(t)}) : `:"")+"(null)"}),uf=e=>yr(e)?e.signal:e==null?null:Z(e),wAe=(e,t)=>t===0?0:yr(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},ff=(e,t)=>{let n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function cf(e,t,n,r){let i;if(t&&de(t,e))return t[e];if(de(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[lI][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Xp][i]}return null}function une(e){let t={};for(let n of e)if(n)for(let r in n)t[r]=1;return Object.keys(t)}function SAe(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,s,c,l;if(yr(a)){let f=une([n.axisX,n.axisY]),d=une([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);s={};for(l of f)s[l]=_r(a,cf(l,n.axisX,i,r),cf(l,n.axisY,i,r));c={};for(l of d)c[l]=MAe(a.signal,cf(l,n.axisTop,i,r),cf(l,n.axisBottom,i,r),cf(l,n.axisLeft,i,r),cf(l,n.axisRight,i,r))}else s=a===K2||a===p4?n.axisX:n.axisY,c=n["axis"+a[0].toUpperCase()+a.slice(1)];return s||c||o?_e({},i,s,c,o):i}function EAe(e,t,n,r){let i=I1(e,t),o=e.orient,a,s,c={enter:a={opacity:mt},update:s={opacity:t2},exit:{opacity:mt}};ri(c,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});let l=fne(e,0),u=fne(e,1);return a.x=s.x=_r(o,l,mt),a.x2=s.x2=_r(o,u),a.y=s.y=X2(o,l,mt),a.y2=s.y2=X2(o,u),fo({type:fI,role:Yze,from:r,encode:c},n)}function fne(e,t){return{scale:e.scale,range:t}}function DAe(e,t,n,r,i){let o=I1(e,t),a=e.orient,s=e.gridScale,c=ib(a,1,-1),l=zAe(e.offset,c),u,f,d,p={enter:u={opacity:mt},update:d={opacity:t2},exit:f={opacity:mt}};ri(p,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});let h={scale:e.scale,field:e2,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},m=_r(a,{signal:"height"},{signal:"width"}),g=s?{scale:s,range:0,mult:c,offset:l}:{value:0,offset:l},v=s?{scale:s,range:1,mult:c,offset:l}:_e(m,{mult:c,offset:l});return u.x=d.x=_r(a,h,g),u.y=d.y=X2(a,h,g),u.x2=d.x2=X2(a,v),u.y2=d.y2=_r(a,v),f.x=_r(a,h),f.y=X2(a,h),fo({type:fI,role:Xze,key:e2,from:r,encode:p},n)}function zAe(e,t){if(t!==1)if(!ne(e))e=yr(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=_e({},e);for(;n.mult!=null;)if(ne(n.mult))n=n.mult=_e({},n.mult);else return n.mult=yr(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function HAe(e,t,n,r,i,o){let a=I1(e,t),s=e.orient,c=ib(s,-1,1),l,u,f,d={enter:l={opacity:mt},update:f={opacity:t2},exit:u={opacity:mt}};ri(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});let p=Nr(i);p.mult=c;let h={scale:e.scale,field:e2,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return f.y=l.y=_r(s,mt,h),f.y2=l.y2=_r(s,p),u.x=_r(s,h),f.x=l.x=X2(s,mt,h),f.x2=l.x2=X2(s,p),u.y=X2(s,h),fo({type:fI,role:Kze,key:e2,from:r,encode:d},n)}function XT(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function LAe(e,t,n,r,i,o){let a=I1(e,t),s=e.orient,c=e.scale,l=ib(s,-1,1),u=m0(a("labelFlush")),f=m0(a("labelFlushOffset")),d=a("labelAlign"),p=a("labelBaseline"),h=u===0||!!u,m,g=Nr(i);g.mult=l,g.offset=Nr(a("labelPadding")||0),g.offset.mult=l;let v={scale:c,field:e2,band:.5,offset:Nne(o.offset,a("labelOffset"))},y=_r(s,h?XT(c,u,'"left"','"right"','"center"'):{value:"center"},gAe(s,"left","right")),C=_r(s,Rne(s,"bottom","top"),h?XT(c,u,'"top"','"bottom"','"middle"'):{value:"middle"}),b=XT(c,u,`-(${f})`,f,0);h=h&&f;let M={opacity:mt,x:_r(s,v,g),y:X2(s,v,g)},S={enter:M,update:m={opacity:t2,text:{field:cI},x:M.x,y:M.y,align:y,baseline:C},exit:{opacity:mt,x:M.x,y:M.y}};ri(S,{dx:!d&&h?_r(s,b):null,dy:!p&&h?X2(s,b):null}),ri(S,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:p});let w=a("labelBound"),E=a("labelOverlap");return E=E||w?{separation:a("labelSeparation"),method:E,order:"datum.index",bound:w?{scale:c,orient:s,tolerance:w}:null}:void 0,m.align!==y&&(m.align=ff(m.align,y)),m.baseline!==C&&(m.baseline=ff(m.baseline,C)),fo({type:y0,role:Qze,style:Xp,key:e2,from:r,encode:S,overlap:E},n)}function AAe(e,t,n,r){let i=I1(e,t),o=e.orient,a=ib(o,-1,1),s,c,l={enter:s={opacity:mt,anchor:Nr(i("titleAnchor",null)),align:{signal:dI}},update:c=_e({},s,{opacity:t2,text:Nr(e.title)}),exit:{opacity:mt}},u={signal:`lerp(range("${e.scale}"), ${tb(0,1,.5)})`};return c.x=_r(o,u),c.y=X2(o,u),s.angle=_r(o,mt,wAe(a,90)),s.baseline=_r(o,Rne(o,p4,K2),{value:p4}),c.angle=s.angle,c.baseline=s.baseline,ri(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),VAe(i,o,l,n),l.update.align=ff(l.update.align,s.align),l.update.angle=ff(l.update.angle,s.angle),l.update.baseline=ff(l.update.baseline,s.baseline),fo({type:y0,role:Zze,style:lI,from:r,encode:l},n)}function VAe(e,t,n,r){let i=(s,c)=>s!=null?(n.update[c]=ff(Nr(s),n.update[c]),!1):!lf(c,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?Nr(a):_r(t,Nr(a),Nr(o))}function NAe(e,t){let n=SAe(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,c=I1(e,n),l=HLe(c),u={scale:e.scale,ticks:!!c("ticks"),labels:!!c("labels"),grid:!!c("grid"),domain:!!c("domain"),title:e.title!=null},f=Ve(t.add(Q2({},[u]))),d=Ve(t.add(_He({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),p=[],h;return u.grid&&p.push(DAe(e,n,r.grid,d,l)),u.ticks&&(h=c("tickSize"),p.push(HAe(e,n,r.ticks,d,h,l))),u.labels&&(h=u.ticks?h:0,p.push(LAe(e,n,r.labels,d,h,l))),u.domain&&p.push(EAe(e,n,r.domain,f)),u.title&&p.push(AAe(e,n,r.title,f)),rb(Yp({role:Wze,from:f,encode:pf(_Ae(c,e),i,Qp),marks:p,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:o,interactive:a,style:s}),t)}function _Ae(e,t){let n={enter:{},update:{}};return ri(n,{orient:e("orient"),offset:e("offset")||0,position:Y2(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Pne(e,t,n){let r=te(e.signals),i=te(e.scales);return n||r.forEach(o=>yne(o,t)),te(e.projections).forEach(o=>fLe(o,t)),i.forEach(o=>JHe(o,t)),te(e.data).forEach(o=>hAe(o,t)),i.forEach(o=>eLe(o,t)),(n||r).forEach(o=>NHe(o,t)),te(e.axes).forEach(o=>NAe(o,t)),te(e.marks).forEach(o=>rb(o,t)),te(e.legends).forEach(o=>nAe(o,t)),e.title&&lAe(e.title,t),t.parseLambdas(),t}var kAe=e=>pf({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function TAe(e,t){let n=t.config,r=Ve(t.root=t.add(XC())),i=IAe(e,n);i.forEach(l=>yne(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;let o=t.add(Q2()),a=t.add(bne(vne(kAe(e.encode),eb,iI,e.style,t,{pulse:Ve(o)}))),s=t.add(Sne({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Ve(a)}));t.operators.pop(),t.pushState(Ve(a),Ve(s),null),Pne(e,t,i),t.operators.push(s);let c=t.add(Cne({mark:r,pulse:Ve(s)}));return c=t.add(wne({pulse:Ve(c)})),c=t.add(v0({pulse:Ve(c)})),t.addData("root",new g0(t,o,o,c)),t}function qp(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function IAe(e,t){let n=a=>Y2(e[a],t[a]),r=[qp("background",n("background")),qp("autosize",jze(n("autosize"))),qp("padding",Gze(n("padding"))),qp("width",n("width")||0),qp("height",n("height")||0)],i=r.reduce((a,s)=>(a[s.name]=s,a),{}),o={};return te(e.signals).forEach(a=>{de(i,a.name)?a=_e(i[a.name],a):r.push(a),o[a.name]=a}),te(t.signals).forEach(a=>{!de(o,a.name)&&!de(i,a.name)&&r.push(a)}),r}function $ne(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function dne(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}$ne.prototype=dne.prototype={parse(e){return Pne(e,this)},fork(){return new dne(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){let t=e instanceof QT?Ve(e):e;return this.add(WHe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let a,s;r&&(a=r.data||(r.data={}),s=a[i]||(a[i]=[]),s.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(let r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Ve(this.add(v0({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ve(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Ue(this._parent)},encode(){return Ue(this._encode)},lookup(){return Ue(this._lookup)},markpath(){let e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Q(e))return Gp(e,t);e.signal||$("Unsupported field reference: "+Z(e));let n=e.signal,r=this.field[n];if(!r){let i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Ve(this.add(FHe(i)))}return r},compareRef(e){let t=!1,n=o=>yr(o)?(t=!0,this.signalRef(o.signal)):MHe(o)?(t=!0,this.exprRef(o.expr)):o,r=te(e.field).map(n),i=te(e.order).map(n);return t?Ve(this.add(Zte({fields:r,orders:i}))):Qte(r,i)},keyRef(e,t){let n=!1,r=o=>yr(o)?(n=!0,Ve(i[o.signal])):o,i=this.signals;return e=te(e).map(r),n?Ve(this.add(RHe({fields:e,flat:t}))):yHe(e,t)},sortRef(e){if(!e)return e;let t=ZC(e.op,e.field),n=e.order||xHe;return n.signal?Ve(this.add(Zte({fields:t,orders:this.signalRef(n.signal)}))):Qte(t,n)},event(e,t){let n=e+":"+t;if(!this.events[n]){let r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return de(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&$("Duplicate signal name: "+Z(e));let n=t instanceof QT?t:this.add(XC(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||$("Unrecognized signal name: "+Z(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ve(this.signals[e]):(de(this.lambdas,e)||(this.lambdas[e]=this.add(XC(null))),Ve(this.lambdas[e]))},parseLambdas(){let e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){let r=e[t],i=W2(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ne(e)?e:this.signalRef(e.signal||vI(e))},exprRef(e,t){let n={expr:W2(e,this)};return t&&(n.expr.$name=t),Ve(this.add(THe(n)))},addBinding(e,t){this.bindings||$("Nested signals do not support binding: "+Z(e)),this.bindings.push(_e({signal:e},t))},addScaleProj(e,t){de(this.scales,e)&&$("Duplicate scale or projection name: "+Z(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,XHe(t))},addProjection(e,t){this.addScaleProj(e,GHe(t))},getScale(e){return this.scales[e]||$("Unrecognized scale name: "+Z(e)),this.scales[e]},scaleRef(e){return Ve(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return de(this.data,e)&&$("Duplicate data set name: "+Z(e)),this.data[e]=t},getData(e){return this.data[e]||$("Undefined data set name: "+Z(e)),this.data[e]},addDataPipeline(e,t){return de(this.data,e)&&$("Duplicate data set name: "+Z(e)),this.addData(e,g0.fromEntries(this,t))}};function vI(e){return(F(e)?FAe:RAe)(e)}function FAe(e){let t=e.length,n="[";for(let r=0;r<t;++r){let i=e[r];n+=(r>0?",":"")+(ne(i)?i.signal||vI(i):Z(i))}return n+"]"}function RAe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Z(r)+":"+(ne(i)?i.signal||vI(i):Z(i));return t+"}"}function OAe(){let e="sans-serif",r="#4c78a8",i="#000",o="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Bne(e,t,n){return ne(e)||$("Input Vega specification must be an object."),t=Fa(OAe(),t,e.config),TAe(e,new $ne(t,n)).toRuntime()}var PAe="5.28.0";_e(lc,MA,AN,TN,J_,pk,tT,jk,oT,cT,fT,hT);function $Ae(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var BAe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},UAe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},jAe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e},qAe=Array.prototype.slice,x0=(e,t,n)=>{let r=n?n(t[0]):t[0];return r[e].apply(r,qAe.call(t,1))},GAe=(e,t,n,r,i,o,a)=>new Date(e,t||0,n??1,r||0,i||0,o||0,a||0),WAe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:GAe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return x0("join",arguments)},indexof:function(){return x0("indexOf",arguments)},lastindexof:function(){return x0("lastIndexOf",arguments)},slice:function(){return x0("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return x0("substring",arguments,String)},split:function(){return x0("split",arguments,String)},replace:function(){return x0("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)},YAe=["view","item","group","xy","x","y"],xI=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&xI.add(setImmediate);var XAe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{let n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:BAe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{let n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);let i=e(t.property);if(n&&(e.memberDepth-=1),xI.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{let n=t.arguments,r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||WAe[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>UAe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>jAe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;let i=e(r.key);return e.memberDepth-=1,xI.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function Kp(e,t,n,r,i,o){let a=s=>XAe[s.type](a,s);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=r,a.event=i,a.item=o,YAe.forEach(s=>a.fn[s]=function(){return i.vega[s](...arguments)}),a(e)}var Une={operator(e,t){let n=t.ast,r=e.functions;return i=>Kp(n,r,i)},parameter(e,t){let n=t.ast,r=e.functions;return(i,o)=>Kp(n,r,o,i)},event(e,t){let n=t.ast,r=e.functions;return i=>Kp(n,r,void 0,void 0,i)},handler(e,t){let n=t.ast,r=e.functions;return(i,o)=>{let a=o.item&&o.item.datum;return Kp(n,r,i,a,o)}},encode(e,t){let{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(a,s)=>{let c=a.datum,l=0,u;for(let f in r)u=Kp(r[f].ast,i,s,c,void 0,a),a[f]!==u&&(a[f]=u,l=1);return n!=="rule"&&$Ae(a,r,o),l}}};var dR={};br(dR,{accessPathDepth:()=>C0,accessPathWithDatum:()=>eh,compile:()=>Z2e,contains:()=>Ae,deepEqual:()=>kr,deleteNestedProperty:()=>Jp,duplicate:()=>le,entries:()=>F1,every:()=>lb,fieldIntersection:()=>fb,flatAccessWithDatum:()=>SI,getFirstDefined:()=>it,hasIntersection:()=>ub,hash:()=>xe,internalField:()=>DI,isBoolean:()=>vf,isEmpty:()=>Ge,isEqual:()=>ZAe,isInternalField:()=>Wne,isNullOrFalse:()=>cb,isNumeric:()=>nh,keys:()=>R,logicalExpr:()=>gf,mergeDeep:()=>MI,never:()=>bI,normalize:()=>MM,normalizeAngle:()=>g4,omit:()=>In,pick:()=>Ac,prefixGenerator:()=>CI,removePathFromField:()=>th,replaceAll:()=>Z2,replacePathInField:()=>ar,resetIdCounter:()=>eVe,setEqual:()=>wI,some:()=>as,stringify:()=>ft,titleCase:()=>m4,unique:()=>Li,uniqueId:()=>EI,vals:()=>tn,varName:()=>ut,version:()=>VIe});var jne={name:"vega-lite",author:'Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',version:"5.16.3",collaborators:["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-Lite is a concise high-level language for interactive visualization.",keywords:["vega","chart","visualization"],main:"build/vega-lite.js",unpkg:"build/vega-lite.min.js",jsdelivr:"build/vega-lite.min.js",module:"build/src/index",types:"build/src/index.d.ts",bin:{vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},files:["bin","build","src","vega-lite*","tsconfig.json"],scripts:{changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@babel/core":"^7.22.10","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-alias":"^5.0.0","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^25.0.4","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.2.1","@rollup/plugin-terser":"^0.4.3","@types/chai":"^4.3.5","@types/d3":"^7.4.0","@types/jest":"^29.5.4","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^6.4.1","@typescript-eslint/parser":"^6.4.1",ajv:"^8.12.0","ajv-formats":"^2.1.1",chai:"^4.3.7",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.0.0",d3:"^7.8.5","del-cli":"^5.0.0",eslint:"^8.47.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.8.0",jest:"^29.6.3","jest-dev-server":"^9.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.0.2",puppeteer:"^15.0.0","release-it":"^16.1.5",rollup:"^3.28.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3",serve:"^14.2.1",terser:"^5.19.2","ts-jest":"^29.1.1","ts-json-schema-generator":"^1.3.0",typescript:"~5.2.2","vega-cli":"^5.25.0","vega-datasets":"^2.7.0","vega-embed":"^6.22.2","vega-tooltip":"^0.33.0","yaml-front-matter":"^4.1.1"},dependencies:{"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},peerDependencies:{vega:"^5.24.0"},engines:{node:">=18"}};function ob(e){return!!e.or}function ab(e){return!!e.and}function sb(e){return!!e.not}function Zp(e,t){if(sb(e))Zp(e.not,t);else if(ab(e))for(let n of e.and)Zp(n,t);else if(ob(e))for(let n of e.or)Zp(n,t);else t(e)}function h4(e,t){return sb(e)?{not:h4(e.not,t)}:ab(e)?{and:e.and.map(n=>h4(n,t))}:ob(e)?{or:e.or.map(n=>h4(n,t))}:t(e)}var le=structuredClone;function bI(e){throw new Error(e)}function Ac(e,t){let n={};for(let r of t)de(e,r)&&(n[r]=e[r]);return n}function In(e,t){let n=x({},e);for(let r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>ft(e)).join(",")})`};function xe(e){if(Oe(e))return e;let t=Q(e)?e:ft(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function cb(e){return e===!1||e===null}function Ae(e,t){return e.includes(t)}function as(e,t){let n=0;for(let[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function lb(e,t){let n=0;for(let[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function MI(e,...t){for(let n of t)KAe(e,n??{});return e}function KAe(e,t){for(let n of R(t))Js(e,n,t[n],!0)}function Li(e,t){let n=[],r={},i;for(let o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function ZAe(e,t){let n=R(e),r=R(t);if(n.length!==r.length)return!1;for(let i of n)if(e[i]!==t[i])return!1;return!0}function wI(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function ub(e,t){for(let n of e)if(t.has(n))return!0;return!1}function CI(e){let t=new Set;for(let n of e){let i=Oo(n).map((a,s)=>s===0?a:`[${a}]`),o=i.map((a,s)=>i.slice(0,s+1).join(""));for(let a of o)t.add(a)}return t}function fb(e,t){return e===void 0||t===void 0?!0:ub(CI(e),CI(t))}function Ge(e){return R(e).length===0}var R=Object.keys,tn=Object.values,F1=Object.entries;function vf(e){return e===!0||e===!1}function ut(e){let t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function gf(e,t){return sb(e)?`!(${gf(e.not,t)})`:ab(e)?`(${e.and.map(n=>gf(n,t)).join(") && (")})`:ob(e)?`(${e.or.map(n=>gf(n,t)).join(") || (")})`:t(e)}function Jp(e,t){if(t.length===0)return!0;let n=t.shift();return n in e&&Jp(e[n],t)&&delete e[n],Ge(e)}function m4(e){return e.charAt(0).toUpperCase()+e.substr(1)}function eh(e,t="datum"){let n=Oo(e),r=[];for(let i=1;i<=n.length;i++){let o=`[${n.slice(0,i).map(Z).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function SI(e,t="datum"){return`${t}[${Z(Oo(e).join("."))}]`}function JAe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function ar(e){return`${Oo(e).map(JAe).join("\\.")}`}function Z2(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function th(e){return`${Oo(e).join(".")}`}function C0(e){return e?Oo(e).length:0}function it(...e){for(let t of e)if(t!==void 0)return t}var Gne=42;function EI(e){let t=++Gne;return e?String(e)+t:t}function eVe(){Gne=42}function DI(e){return Wne(e)?e:`__${e}`}function Wne(e){return e.startsWith("__")}function g4(e){if(e!==void 0)return(e%360+360)%360}function nh(e){return Oe(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}var qne=Object.getPrototypeOf(structuredClone({}));function kr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!kr(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!kr(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==qne.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==qne.toString)return e.toString()===t.toString();let i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){let o=i[r];if(!kr(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function ft(e){let t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");let a=t.push(r)-1,s=Object.keys(r).sort();for(o="",i=0;i<s.length;i++){let c=s[i],l=n(r[c]);l&&(o&&(o+=","),o+=JSON.stringify(c)+":"+l)}return t.splice(a,1),`{${o}}`}(e)}var R1="row",O1="column",yf="facet",gt="x",nn="y",P1="x2",po="y2",n2="xOffset",ss="yOffset",Ai="radius",J2="radius2",ii="theta",ea="theta2",oi="latitude",ai="longitude",Vi="latitude2",si="longitude2",Fn="color",Ni="fill",_i="stroke",Mn="shape",$1="size",ta="angle",f1="opacity",ho="fillOpacity",mo="strokeOpacity",go="strokeWidth",vo="strokeDash",b0="text",v4="order",M0="detail",xf="key",Vc="tooltip",Cf="href",bf="url",Mf="description",tVe={x:1,y:1,x2:1,y2:1},Jne={theta:1,theta2:1,radius:1,radius2:1};function zI(e){return e in Jne}var HI={longitude:1,longitude2:1,latitude:1,latitude2:1};function pb(e){switch(e){case oi:return"y";case Vi:return"y2";case ai:return"x";case si:return"x2"}}function hb(e){return e in HI}var ere=R(HI),LI=k(x(x(x({},tVe),Jne),HI),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function Nc(e){return e===Fn||e===Ni||e===_i}var tre={row:1,column:1,facet:1},Tr=R(tre),AI=x(x({},LI),tre),nre=R(AI),Yne=AI,{order:_6t,detail:k6t,tooltip:T6t}=Yne,rre=ie(Yne,["order","detail","tooltip"]),Xne=rre,{row:I6t,column:F6t,facet:R6t}=Xne,ire=ie(Xne,["row","column","facet"]),O6t=R(rre),P6t=R(ire);function ore(e){return!!ire[e]}function mb(e){return!!AI[e]}var are=[P1,po,Vi,si,ea,J2];function gb(e){return yo(e)!==e}function yo(e){switch(e){case P1:return gt;case po:return nn;case Vi:return oi;case si:return ai;case ea:return ii;case J2:return Ai}return e}function r2(e){if(zI(e))switch(e){case ii:return"startAngle";case ea:return"endAngle";case Ai:return"outerRadius";case J2:return"innerRadius"}return e}function Ir(e){switch(e){case gt:return P1;case nn:return po;case oi:return Vi;case ai:return si;case ii:return ea;case Ai:return J2}}function wn(e){switch(e){case gt:case P1:return"width";case nn:case po:return"height"}}function VI(e){switch(e){case gt:return"xOffset";case nn:return"yOffset";case P1:return"x2Offset";case po:return"y2Offset";case ii:return"thetaOffset";case Ai:return"radiusOffset";case ea:return"theta2Offset";case J2:return"radius2Offset"}}function wf(e){switch(e){case gt:return"xOffset";case nn:return"yOffset"}}function sre(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}var cre=R(LI),Qne=LI,{x:$6t,y:B6t,x2:U6t,y2:j6t,xOffset:q6t,yOffset:G6t,latitude:W6t,longitude:Y6t,latitude2:X6t,longitude2:Q6t,theta:K6t,theta2:Z6t,radius:J6t,radius2:eut}=Qne,NI=ie(Qne,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),lre=R(NI),_I={x:1,y:1},xr=R(_I);function vt(e){return e in _I}var vb={theta:1,radius:1},ure=R(vb);function y4(e){return e==="width"?gt:nn}var kI={xOffset:1,yOffset:1},tut=R(kI);function _c(e){return e in kI}var Kne=NI,{text:nut,tooltip:rut,href:iut,url:out,description:aut,detail:sut,key:cut,order:lut}=Kne,fre=ie(Kne,["text","tooltip","href","url","description","detail","key","order"]),dre=R(fre);function pre(e){return!!NI[e]}function hre(e){switch(e){case Fn:case Ni:case _i:case $1:case Mn:case f1:case go:case vo:return!0;case ho:case mo:case ta:return!1}}var mre=x(x(x(x({},_I),vb),kI),fre),x4=R(mre);function Fr(e){return!!mre[e]}function gre(e,t){return rVe(e)[t]}var vre={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},Zne=vre,{geoshape:uut}=Zne,nVe=ie(Zne,["geoshape"]);function rVe(e){switch(e){case Fn:case Ni:case _i:case Mf:case M0:case xf:case Vc:case Cf:case v4:case f1:case ho:case mo:case go:case yf:case R1:case O1:return vre;case gt:case nn:case n2:case ss:case oi:case ai:return nVe;case P1:case po:case Vi:case si:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case $1:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case vo:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Mn:return{point:"always",geoshape:"always"};case b0:return{text:"always"};case ta:return{point:"always",square:"always",text:"always"};case bf:return{image:"always"};case ii:return{text:"always",arc:"always"};case Ai:return{text:"always",arc:"always"};case ea:case J2:return{arc:"always"}}}function yb(e){switch(e){case gt:case nn:case ii:case Ai:case n2:case ss:case $1:case ta:case go:case f1:case ho:case mo:case P1:case po:case ea:case J2:return;case yf:case R1:case O1:case Mn:case vo:case b0:case Vc:case Cf:case bf:case Mf:return"discrete";case Fn:case Ni:case _i:return"flexible";case oi:case ai:case Vi:case si:case M0:case xf:case v4:return}}var oVe={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},yre={count:1,min:1,max:1};function xo(e){return!!e&&!!e.argmin}function i2(e){return!!e&&!!e.argmax}function Sf(e){return Q(e)&&!!oVe[e]}var aVe=new Set(["count","valid","missing","distinct"]);function xb(e){return Q(e)&&aVe.has(e)}function xre(e){return Q(e)&&Ae(["min","max"],e)}var Cre=new Set(["count","sum","distinct","valid","missing"]),bre=new Set(["mean","average","median","q1","q3","min","max"]);function Cb(e){return D1(e)&&(e=Df(e,void 0)),"bin"+R(e).map(t=>Ef(e[t])?ut(`_${t}_${F1(e[t])}`):ut(`_${t}_${e[t]}`)).join("")}function et(e){return e===!0||na(e)&&!e.binned}function rn(e){return e==="binned"||na(e)&&e.binned===!0}function na(e){return ne(e)}function Ef(e){return e?.param}function TI(e){switch(e){case R1:case O1:case $1:case Fn:case Ni:case _i:case go:case f1:case ho:case mo:case Mn:return 6;case vo:return 4;default:return 10}}function C4(e){return!!e?.expr}function sr(e){let t=R(e||{}),n={};for(let r of t)n[r]=Rr(e[r]);return n}function bb(e){let b=e,{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:a,color:s,subtitleColor:c,subtitleFont:l,subtitleFontSize:u,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:p,subtitlePadding:h}=b,m=ie(b,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),g=x(x({},m),s?{fill:s}:{}),v=x(x(x(x(x(x({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),o!==void 0?{angle:o}:{}),a!==void 0?{limit:a}:{}),y=x(x(x(x(x(x(x({},c?{subtitleColor:c}:{}),l?{subtitleFont:l}:{}),u?{subtitleFontSize:u}:{}),f?{subtitleFontStyle:f}:{}),d?{subtitleFontWeight:d}:{}),p?{subtitleLineHeight:p}:{}),h?{subtitlePadding:h}:{}),C=Ac(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:C,nonMarkTitleProperties:v,subtitle:y}}function ra(e){return Q(e)||F(e)&&Q(e[0])}function ae(e){return!!e?.signal}function ki(e){return!!e.step}function Mre(e){return F(e)?!1:"fields"in e&&!("data"in e)}function wre(e){return F(e)?!1:"fields"in e&&"data"in e}function ia(e){return F(e)?!1:"field"in e&&"data"in e}var sVe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Sre=R(sVe),Ere={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Mb=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function wb(e){let t=F(e.condition)?e.condition.map(Dre):Dre(e.condition);return k(x({},Rr(e)),{condition:t})}function Rr(e){if(C4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return e}function Dre(e){if(C4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return e}function tt(e){if(C4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return ae(e)?e:e!==void 0?{value:e}:void 0}function zre(e){return ae(e)?e.signal:Z(e)}function II(e){return ae(e)?e.signal:Z(e.value)}function d1(e){return ae(e)?e.signal:e==null?null:Z(e)}function Hre(e,t,n){for(let r of n){let i=Co(r,t.markDef,t.config);i!==void 0&&(e[r]=tt(i))}return e}function FI(e){return[].concat(e.type,e.style??[])}function Be(e,t,n,r={}){let{vgChannel:i,ignoreVgConfig:o}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:Co(e,t,n,r)}function Co(e,t,n,{vgChannel:r}={}){return it(r?rh(e,t,n.style):void 0,rh(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function rh(e,t,n){return RI(e,FI(t),n)}function RI(e,t,n){t=te(t);let r;for(let i of t){let o=n[i];o&&o[e]!==void 0&&(r=o[e])}return r}function Sb(e,t){return te(e).reduce((n,r)=>(n.field.push(K(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function OI(e,t){let n=[...e];return t.forEach(r=>{for(let i of n)if(kr(i,r))return;n.push(r)}),n}function PI(e,t){return kr(e,t)||!t?e:e?[...te(e),...te(t)].join(", "):t}function Eb(e,t){let n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((ra(n)||ae(n))&&(ra(r)||ae(r)))return{explicit:e.explicit,value:PI(n,r)};if(ra(n)||ae(n))return{explicit:e.explicit,value:n};if(ra(r)||ae(r))return{explicit:e.explicit,value:r};if(!ra(n)&&!ae(n)&&!ra(r)&&!ae(r))return{explicit:e.explicit,value:OI(n,r)};throw new Error("It should never reach here")}var O={};br(O,{ADD_SAME_CHILD_TWICE:()=>AVe,CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN:()=>nNe,CONCAT_CANNOT_SHARE_AXIS:()=>zVe,FACETED_INDEPENDENT_DIFFERENT_SOURCES:()=>xNe,FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES:()=>CNe,FACETED_INDEPENDENT_SAME_SOURCE:()=>bNe,FIT_NON_SINGLE:()=>lVe,INTERVAL_INITIALIZED_WITH_POS:()=>SVe,INVALID_CHANNEL_FOR_AXIS:()=>MNe,LEGEND_BINDINGS_MUST_HAVE_PROJECTION:()=>CVe,LINE_WITH_VARYING_SIZE:()=>qVe,MORE_THAN_ONE_SORT:()=>yNe,NEEDS_SAME_SELECTION:()=>wVe,NO_FIELDS_NEEDS_AS:()=>NVe,REPLACE_ANGLE_WITH_THETA:()=>TVe,SCALE_BINDINGS_CONTINUOUS:()=>xVe,cannotApplySizeToNonOrientedMark:()=>cNe,cannotLookupVariableParameter:()=>bVe,cannotProjectAggregate:()=>mVe,cannotProjectOnChannelWithoutField:()=>hVe,cannotStackNonLinearScale:()=>SNe,cannotStackRangedMark:()=>wNe,cannotUseRelativeBandSizeWithNonBandScale:()=>iNe,cannotUseScalePropertyWithNonColor:()=>rNe,channelRequiredForBinned:()=>NNe,channelShouldBeDiscrete:()=>XVe,channelShouldBeDiscreteOrDiscretizing:()=>QVe,channelShouldNotBeUsedForBinned:()=>_Ne,columnsNotSupportByRowCol:()=>DVe,containerSizeNonSingle:()=>uVe,containerSizeNotCompatibleWithAutosize:()=>fVe,customFormatTypeNotAllowed:()=>_Ve,differentParse:()=>LVe,discreteChannelCannotEncode:()=>ZVe,domainRequiredForThresholdScale:()=>kNe,domainSortDropped:()=>vNe,droppedDay:()=>zNe,droppingColor:()=>BVe,droppingFit:()=>dVe,emptyFieldDef:()=>jVe,errorBand1DNotSupport:()=>VNe,errorBarCenterAndExtentAreNotNeeded:()=>HNe,errorBarCenterIsUsedWithWrongExtent:()=>LNe,errorBarContinuousAxisHasCustomizedAggregate:()=>ANe,facetChannelDropped:()=>KVe,incompatibleChannel:()=>GVe,independentScaleMeansIndependentGuide:()=>gNe,invalidAggregate:()=>PVe,invalidEncodingChannel:()=>YVe,invalidFieldType:()=>RVe,invalidFieldTypeForCountAggregate:()=>OVe,invalidSpec:()=>cVe,invalidTimeUnit:()=>DNe,invalidTransformIgnored:()=>VVe,lineWithRange:()=>eNe,mergeConflictingDomainProperty:()=>mNe,mergeConflictingProperty:()=>hNe,missingFieldType:()=>$Ve,nearestNotSupportForContinuous:()=>gVe,noSameUnitLookup:()=>MVe,noSuchRepeatedValue:()=>EVe,offsetEncodingScaleIgnored:()=>WVe,offsetNestedInsideContinuousPositionScaleDropped:()=>IVe,orientOverridden:()=>tNe,primitiveChannelDef:()=>FVe,projectionOverridden:()=>kVe,rangeMarkAlignmentCannotBeExpression:()=>JVe,relativeBandSizeNotSupported:()=>UVe,scalePropertyNotWorkWithScaleType:()=>fNe,scaleTypeNotWorkWithChannel:()=>lNe,scaleTypeNotWorkWithFieldDef:()=>uNe,scaleTypeNotWorkWithMark:()=>dNe,selectionNotFound:()=>yVe,selectionNotSupported:()=>vVe,stackNonSummativeAggregate:()=>ENe,stepDropped:()=>pNe,unaggregateDomainHasNoEffectForRawField:()=>oNe,unaggregateDomainWithNonSharedDomainOp:()=>aNe,unaggregatedDomainWithLogScale:()=>sNe,unknownField:()=>pVe,unrecognizedParse:()=>HVe});function cVe(e){return`Invalid specification ${ft(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}var lVe='Autosize "fit" only works for single views and layered views.';function uVe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function fVe(e){let t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function dVe(e){return e?`Dropping "fit-${e}" because spec has discrete ${wn(e)}.`:'Dropping "fit" because spec has discrete size.'}function pVe(e){return`Unknown field for ${e}. Cannot calculate view size.`}function hVe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function mVe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function gVe(e){return`The "nearest" transform is not supported for ${e} marks.`}function vVe(e){return`Selection not supported for ${e} yet.`}function yVe(e){return`Cannot find a selection named "${e}".`}var xVe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",CVe="Legend bindings are only supported for selections over an individual field or encoding channel.";function bVe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function MVe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}var wVe="The same selection must be used to override scale domains in a layered view.",SVe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function EVe(e){return`Unknown repeated value "${e}".`}function DVe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}var zVe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function HVe(e){return`Unrecognized parse "${e}".`}function LVe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}var AVe="Attempt to add the same child twice.";function VVe(e){return`Ignoring an invalid transform: ${ft(e)}.`}var NVe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function _Ve(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function kVe(e){let{parentProjection:t,projection:n}=e;return`Layer's shared projection ${ft(t)} is overridden by a child projection ${ft(n)}.`}var TVe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function IVe(e){return`${e}Offset dropped because ${e} is continuous`}function FVe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${ft(n)}}.`}function RVe(e){return`Invalid field type "${e}".`}function OVe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function PVe(e){return`Invalid aggregation operator "${e}".`}function $Ve(e,t){return`Missing type for channel "${e}", using "${t}" instead.`}function BVe(e,t){let{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function UVe(e){return`Position range does not support relative band size for ${e}.`}function jVe(e,t){return`Dropping ${ft(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}var qVe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function GVe(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function WVe(e){return`${e} encoding has no scale, so specified scale is ignored.`}function YVe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function XVe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function QVe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function KVe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function ZVe(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function JVe(e){return`The ${e} for range marks cannot be an expression`}function eNe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function tNe(e,t){return`Specified orient "${e}" overridden with "${t}".`}var nNe="Custom domain scale cannot be unioned with default field-based domain.";function rNe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function iNe(e){return`Cannot use the relative band size with ${e} scale.`}function oNe(e){return`Using unaggregated domain with raw field has no effect (${ft(e)}).`}function aNe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function sNe(e){return`Unaggregated domain is currently unsupported for log scale (${ft(e)}).`}function cNe(e){return`Cannot apply size to non-oriented mark "${e}".`}function lNe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function uNe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function fNe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function dNe(e,t){return`Scale type "${t}" does not work with mark "${e}".`}function pNe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function hNe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${ft(n)} and ${ft(r)}). Using ${ft(n)}.`}function mNe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${ft(n)} and ${ft(r)}). Using the union of the two domains.`}function gNe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function vNe(e){return`Dropping sort property ${ft(e)} as unioned domains only support boolean or op "count", "min", and "max".`}var yNe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",xNe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",CNe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",bNe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",MNe="Invalid channel for axis.";function wNe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function SNe(e){return`Cannot stack non-linear scale (${e}).`}function ENe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function DNe(e,t){return`Invalid ${e}: ${ft(t)}.`}function zNe(e){return`Dropping day from datetime ${ft(e)} as day cannot be combined with other units.`}function HNe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function LNe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function ANe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function VNe(e){return`1D error band does not support ${e}.`}function NNe(e){return`Channel ${e} is required for "binned" bin.`}function _Ne(e){return`Channel ${e} should not be used with "binned" bin.`}function kNe(e){return`Domain for ${e} is required for threshold scale.`}var TNe,Lre=K5(ev),zf=Lre;TNe=new WeakMap;function Are(e){return zf=e,zf}function Vre(){return zf=Lre,zf}function U(...e){zf.warn(...e)}function Nre(...e){zf.debug(...e)}function o2(e){if(e&&ne(e)){for(let t of Db)if(t in e)return!0}return!1}var _re=["january","february","march","april","may","june","july","august","september","october","november","december"],INe=_re.map(e=>e.substr(0,3)),kre=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],FNe=kre.map(e=>e.substr(0,3));function RNe(e){if(nh(e)&&(e=+e),Oe(e))return e>4&&U(O.invalidTimeUnit("quarter",e)),e-1;throw new Error(O.invalidTimeUnit("quarter",e))}function ONe(e){if(nh(e)&&(e=+e),Oe(e))return e-1;{let t=e.toLowerCase(),n=_re.indexOf(t);if(n!==-1)return n;let r=t.substr(0,3),i=INe.indexOf(r);if(i!==-1)return i;throw new Error(O.invalidTimeUnit("month",e))}}function PNe(e){if(nh(e)&&(e=+e),Oe(e))return e%7;{let t=e.toLowerCase(),n=kre.indexOf(t);if(n!==-1)return n;let r=t.substr(0,3),i=FNe.indexOf(r);if(i!==-1)return i;throw new Error(O.invalidTimeUnit("day",e))}}function $I(e,t){let n=[];if(t&&e.day!==void 0&&R(e).length>1&&(U(O.droppedDay(e)),e=le(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){let r=t?ONe(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){let r=t?RNe(e.quarter):e.quarter;n.push(Oe(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){let r=t?PNe(e.day):e.day;n.push(Oe(r)?r+1:`${r}+1`)}else n.push(1);for(let r of["hours","minutes","seconds","milliseconds"]){let i=e[r];n.push(typeof i>"u"?0:i)}return n}function oa(e){let n=$I(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Tre(e){let n=$I(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Ire(e){let t=$I(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}var Fre={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Db=R(Fre);function Rre(e){return!!Fre[e]}var $Ne={binnedyear:1,binnedyearquarter:1,binnedyearquartermonth:1,binnedyearmonth:1,binnedyearmonthdate:1,binnedyearmonthdatehours:1,binnedyearmonthdatehoursminutes:1,binnedyearmonthdatehoursminutesseconds:1,binnedyearweek:1,binnedyearweekday:1,binnedyearweekdayhours:1,binnedyearweekdayhoursminutes:1,binnedyearweekdayhoursminutesseconds:1,binnedyeardayofyear:1},BNe={binnedutcyear:1,binnedutcyearquarter:1,binnedutcyearquartermonth:1,binnedutcyearmonth:1,binnedutcyearmonthdate:1,binnedutcyearmonthdatehours:1,binnedutcyearmonthdatehoursminutes:1,binnedutcyearmonthdatehoursminutesseconds:1,binnedutcyearweek:1,binnedutcyearweekday:1,binnedutcyearweekdayhours:1,binnedutcyearweekdayhoursminutes:1,binnedutcyearweekdayhoursminutesseconds:1,binnedutcyeardayofyear:1},Yut=x(x({},$Ne),BNe);function aa(e){return ne(e)?e.binned:Ore(e)}function Ore(e){return e&&e.startsWith("binned")}function BI(e){return e.startsWith("utc")}function UNe(e){return e.substring(3)}var jNe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Hf(e){return Db.filter(t=>Pre(e,t))}function UI(e){let t=Hf(e);return t[t.length-1]}function Pre(e,t){let n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function $re(e,t,{end:n}={end:!1}){let r=eh(t),i=BI(e)?"utc":"";function o(c){return c==="quarter"?`(${i}quarter(${r})-1)`:`${i}${c}(${r})`}let a,s={};for(let c of Db)Pre(e,c)&&(s[c]=o(c),a=c);return n&&(s[a]+="+1"),Tre(s)}function jI(e){if(!e)return;let t=Hf(e);return`timeUnitSpecifier(${ft(t)}, ${ft(jNe)})`}function Bre(e,t,n){if(!e)return;let r=jI(e);return`${n||BI(e)?"utc":"time"}Format(${t}, ${r})`}function on(e){if(!e)return;let t;return Q(e)?Ore(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ne(e)&&(t=x(x({},e),e.unit?{unit:e.unit}:{})),BI(t.unit)&&(t.utc=!0,t.unit=UNe(t.unit)),t}function Ure(e){let r=on(e),{utc:t}=r,n=ie(r,["utc"]);return n.unit?(t?"utc":"")+R(n).map(i=>ut(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+R(n).map(i=>ut(`_${i}_${n[i]}`)).join("")}function zb(e,t=n=>n){let n=on(e),r=UI(n.unit);if(r&&r!=="day"){let i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:a}=qI(r,n.step),s=k(x({},i),{[a]:+i[a]+o});return`${t(oa(s))} - ${t(oa(i))}`}}var qNe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function GNe(e){return!!qNe[e]}function qI(e,t=1){if(GNe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function jre(e){return e?.param}function Hb(e){return!!e?.field&&e.equal!==void 0}function Lb(e){return!!e?.field&&e.lt!==void 0}function Ab(e){return!!e?.field&&e.lte!==void 0}function Vb(e){return!!e?.field&&e.gt!==void 0}function Nb(e){return!!e?.field&&e.gte!==void 0}function _b(e){if(e?.field){if(F(e.range)&&e.range.length===2)return!0;if(ae(e.range))return!0}return!1}function kb(e){return!!e?.field&&(F(e.oneOf)||F(e.in))}function WNe(e){return!!e?.field&&e.valid!==void 0}function GI(e){return kb(e)||Hb(e)||_b(e)||Lb(e)||Vb(e)||Ab(e)||Nb(e)}function cs(e,t){return w0(e,{timeUnit:t,wrapTime:!0})}function YNe(e,t){return e.map(n=>cs(n,t))}function Tb(e,t=!0){let{field:n}=e,r=on(e.timeUnit),{unit:i,binned:o}=r||{},a=K(e,{expr:"datum"}),s=i?`time(${o?a:$re(i,n)})`:a;if(Hb(e))return`${s}===${cs(e.equal,i)}`;if(Lb(e)){let c=e.lt;return`${s}<${cs(c,i)}`}else if(Vb(e)){let c=e.gt;return`${s}>${cs(c,i)}`}else if(Ab(e)){let c=e.lte;return`${s}<=${cs(c,i)}`}else if(Nb(e)){let c=e.gte;return`${s}>=${cs(c,i)}`}else{if(kb(e))return`indexof([${YNe(e.oneOf,i).join(",")}], ${s}) !== -1`;if(WNe(e))return ih(s,e.valid);if(_b(e)){let{range:c}=e,l=ae(c)?{signal:`${c.signal}[0]`}:c[0],u=ae(c)?{signal:`${c.signal}[1]`}:c[1];if(l!==null&&u!==null&&t)return"inrange("+s+", ["+cs(l,i)+", "+cs(u,i)+"])";let f=[];return l!==null&&f.push(`${s} >= ${cs(l,i)}`),u!==null&&f.push(`${s} <= ${cs(u,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${ft(e)}`)}function ih(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function qre(e){return GI(e)&&e.timeUnit?k(x({},e),{timeUnit:on(e.timeUnit)}):e}var Lf={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Gre(e){return e==="quantitative"||e==="temporal"}function Ib(e){return e==="ordinal"||e==="nominal"}var a2=Lf.quantitative,oh=Lf.ordinal,ls=Lf.temporal,ah=Lf.nominal,sa=Lf.geojson,oft=R(Lf);function Wre(e){if(e)switch(e=e.toLowerCase(),e){case"q":case a2:return"quantitative";case"t":case ls:return"temporal";case"o":case oh:return"ordinal";case"n":case ah:return"nominal";case sa:return"geojson"}}var Or={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},sh={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},dft=R(sh);function Xre(e,t){let n=sh[e],r=sh[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}var XNe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function WI(e){return XNe[e]}var Qre=new Set(["linear","log","pow","sqrt","symlog"]),Kre=new Set([...Qre,"time","utc"]);function YI(e){return Qre.has(e)}var Zre=new Set(["quantile","quantize","threshold"]),QNe=new Set([...Kre,...Zre,"sequential","identity"]),KNe=new Set(["ordinal","bin-ordinal","point","band"]);function Ot(e){return KNe.has(e)}function Rn(e){return QNe.has(e)}function B1(e){return Kre.has(e)}function kc(e){return Zre.has(e)}var Jre={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function eie(e){return!Q(e)&&!!e.name}function XI(e){return e?.param}function tie(e){return e?.unionWith}function nie(e){return ne(e)&&"field"in e}var rie={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},pft=R(rie),Yre=rie,{type:hft,domain:mft,range:gft,rangeMax:vft,rangeMin:yft,scheme:xft}=Yre,ZNe=ie(Yre,["type","domain","range","rangeMax","rangeMin","scheme"]),iie=R(ZNe);function ch(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return B1(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return B1(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return B1(e);case"nice":return B1(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Rn(e)&&!Ae(["log","time","utc","threshold","quantile"],e)}}function Fb(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Nc(e)?void 0:O.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function oie(e,t){return Ae([oh,ah],t)?e===void 0||Ot(e):t===ls?Ae([Or.TIME,Or.UTC,void 0],e):t===a2?YI(e)||kc(e)||e===void 0:!0}function aie(e,t,n=!1){if(!Fr(e))return!1;switch(e){case gt:case nn:case n2:case ss:case ii:case Ai:return B1(t)||t==="band"?!0:t==="point"?!n:!1;case $1:case go:case f1:case ho:case mo:case ta:return B1(t)||kc(t)||Ae(["band","point","ordinal"],t);case Fn:case Ni:case _i:return t!=="band";case vo:case Mn:return t==="ordinal"||kc(t)}}var p1={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},QI=p1.arc,S0=p1.area,E0=p1.bar,sie=p1.image,D0=p1.line,Af=p1.point,cie=p1.rect,Vf=p1.rule,Rb=p1.text,lh=p1.tick,lie=p1.trail,uh=p1.circle,fh=p1.square,Ob=p1.geoshape;function Ti(e){return["line","area","trail"].includes(e)}function Tc(e){return["rect","bar","image","arc"].includes(e)}var uie=new Set(R(p1));function ci(e){return e.type}var JNe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],e_e=["fill","fillOpacity"],fie=[...JNe,...e_e],t_e={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},KI=R(t_e),die={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},pie={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},n_e={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Pb=R(n_e);function us(e){return e&&e.band!=null}var hie={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},mie=5,gie={binSpacing:1,continuousBandSize:mie,minBandSize:.25,timeUnitBandPosition:.5},vie={binSpacing:0,continuousBandSize:mie,minBandSize:.25,timeUnitBandPosition:.5},yie={thickness:1};function xie(e){return ci(e)?e.type:e}function _f(e){let{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,a=ph(e);return Y(n)&&!xb(n.aggregate)&&i&&B1(i.get("type"))?i_e({fieldDef:n,channel:t,markDef:r,ref:a,config:o}):a}function i_e({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Ti(n.type)?r:Be("invalid",n,i)===null?[o_e(e,t),r]:r}function o_e(e,t){let n=dh(e,!0),i=yo(t)==="y"?{field:{group:"height"}}:{value:0};return x({test:n},i)}function dh(e,t=!0){return ih(Q(e)?e:K(e,{expr:"datum"}),!t)}function Cie(e){let{datum:t}=e;return o2(t)?oa(t):`${ft(t)}`}function fs(e,t,n,r){let i={};if(t&&(i.scale=t),Ii(e)){let{datum:o}=e;o2(o)?i.signal=oa(o):ae(o)?i.signal=o.signal:C4(o)?i.signal=o.expr:i.value=o}else i.field=K(e,n);if(r){let{offset:o,band:a}=r;o&&(i.offset=o),a&&(i.band=a)}return i}function Nf({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:a=.5}){let s=!ae(a)&&0<a&&a<1?"datum":void 0,c=K(t,{expr:s,suffix:i}),l=n!==void 0?K(n,{expr:s}):K(t,{suffix:o,expr:s}),u={};if(a===0||a===1){u.scale=e;let f=a===0?c:l;u.field=f}else{let f=ae(a)?`(1-${a.signal}) * ${c} + ${a.signal} * ${l}`:`${1-a} * ${c} + ${a} * ${l}`;u.signal=`scale("${e}", ${f})`}return r&&(u.offset=r),u}function bie({scaleName:e,fieldDef:t}){let n=K(t,{expr:"datum"}),r=K(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function ph({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:c,defaultRef:l,bandPosition:u}){if(t){if(Ne(t)){let f=a?.get("type");if(Sn(t)){u??(u=U1({fieldDef:t,fieldDef2:n,markDef:r,config:i}));let{bin:d,timeUnit:p,type:h}=t;if(et(d)||u&&p&&h===ls)return s?.impute?fs(t,o,{binSuffix:"mid"},{offset:c}):u&&!Ot(f)?Nf({scaleName:o,fieldOrDatumDef:t,bandPosition:u,offset:c}):fs(t,o,ds(t,e)?{binSuffix:"range"}:{},{offset:c});if(rn(d)){if(Y(n))return Nf({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:u,offset:c});{let m=e===gt?P1:po;U(O.channelRequiredForBinned(m))}}}return fs(t,o,Ot(f)?{binSuffix:"range"}:{},{offset:c,band:f==="band"?u??t.bandPosition??.5:void 0})}else if(cr(t)){let f=t.value,d=c?{offset:c}:{};return x(x({},z0(e,f)),d)}}return ke(l)&&(l=l()),l&&x(x({},l),c?{offset:c}:{})}function z0(e,t){return Ae(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ae(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:tt(t)}function ps(e){return e&&e!=="number"&&e!=="time"}function wie(e,t,n){return`${e}(${t}${n?`, ${ft(n)}`:""})`}var a_e=" \u2013 ";function kf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){if(ps(n))return bo({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});let a=Sie(e,r,i),s=Ic(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(s==="quantitative"){if(i&&o.normalizedNumberFormatType)return bo({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return bo({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(s==="temporal"&&o.timeFormatType&&Y(e)&&e.timeUnit===void 0)return bo({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(Rc(e)){let c=c_e({field:a,timeUnit:Y(e)?on(e.timeUnit)?.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:s2(e)&&e.scale?.type===Or.UTC});return c?{signal:c}:void 0}if(t=ZI({type:s,specifiedFormat:t,config:o,normalizeStack:i}),Y(e)&&et(e.bin)){let c=K(e,{expr:r,binSuffix:"end"});return{signal:H0(a,c,t,n,o)}}else return t||Ic(e)==="quantitative"?{signal:`${Eie(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function Sie(e,t,n){return Y(e)?n?`${K(e,{expr:t,suffix:"end"})}-${K(e,{expr:t,suffix:"start"})}`:K(e,{expr:t}):Cie(e)}function bo({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a??(a=Sie(e,r,i)),a!=="datum.value"&&Y(e)&&et(e.bin)){let s=K(e,{expr:r,binSuffix:"end"});return{signal:H0(a,s,t,n,o)}}return{signal:wie(n,a,t)}}function Bb(e,t,n,r,i,o){if(!(Q(r)&&ps(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Ic(e)==="quantitative"&&(i.normalizedNumberFormatType&&Fc(e)&&e.stack==="normalize"||i.numberFormatType))){if(Fc(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return ZI({type:"quantitative",config:i,normalizeStack:!0});if(Rc(e)){let a=Y(e)?on(e.timeUnit)?.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:s_e({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return ZI({type:t,specifiedFormat:n,config:i})}}function Ub(e,t,n){if(e&&(ae(e)||e==="number"||e==="time"))return e;if(Rc(t)&&n!=="time"&&n!=="utc")return Y(t)&&on(t?.timeUnit)?.utc?"utc":"time"}function ZI({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Q(t))return t;if(e===a2)return r?n.normalizedNumberFormat:n.numberFormat}function s_e({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:jI(t)}:r?void 0:n.timeFormat)}function Eie(e,t){return`format(${e}, "${t||""}")`}function Mie(e,t,n,r){return ps(n)?wie(n,e,t):Eie(e,(Q(t)?t:void 0)??r.numberFormat)}function H0(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return H0(e,t,i.numberFormat,i.numberFormatType,i);let o=Mie(e,n,r,i),a=Mie(t,n,r,i);return`${ih(e,!1)} ? "null" : ${o} + "${a_e}" + ${a}`}function c_e({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Q(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):Bre(t,e,o)}var b4="min",l_e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function JI(e){return e in l_e}function jb(e){return!!e?.encoding}function Pr(e){return e&&(e.op==="count"||!!e.field)}function qb(e){return e&&F(e)}function hs(e){return"row"in e||"column"in e}function Gb(e){return!!e&&"header"in e}function Oc(e){return"facet"in e}function Die(e){return e.param}function zie(e){return e&&!Q(e)&&"repeat"in e}function eF(e){let{field:t,timeUnit:n,bin:r,aggregate:i}=e;return k(x(x(x({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:t})}function Yb(e){return"sort"in e}function U1({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Ne(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Y(e)){let{timeUnit:i,bin:o}=e;if(i&&!t)return Co("timeUnitBandPosition",n,r);if(et(o))return .5}}function tF({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){let s=wn(e),c=Be(a?"size":s,r,i,{vgChannel:s});if(c!==void 0)return c;if(Y(t)){let{timeUnit:l,bin:u}=t;if(l&&!n)return{band:Co("timeUnitBandSize",r,i)};if(et(u)&&!Ot(o))return{band:1}}if(Tc(r.type))return o?Ot(o)?i[r.type]?.discreteBandSize||{band:1}:i[r.type]?.continuousBandSize:i[r.type]?.discreteBandSize}function Xb(e,t,n,r){return et(e.bin)||e.timeUnit&&Sn(e)&&e.type==="temporal"?U1({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Qb(e){return e&&!!e.sort&&!e.field}function M4(e){return e&&"condition"in e}function If(e){let t=e?.condition;return!!t&&!F(t)&&Y(t)}function w4(e){let t=e?.condition;return!!t&&!F(t)&&Ne(t)}function Hie(e){let t=e?.condition;return!!t&&(F(t)||cr(t))}function Y(e){return e&&(!!e.field||e.aggregate==="count")}function Ic(e){return e?.type}function Ii(e){return e&&"datum"in e}function ca(e){return Sn(e)&&!hh(e)||mh(e)}function nF(e){return Sn(e)&&e.type==="quantitative"&&!e.bin||mh(e)}function mh(e){return Ii(e)&&Oe(e.datum)}function Ne(e){return Y(e)||Ii(e)}function Sn(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function cr(e){return e&&"value"in e&&"value"in e}function s2(e){return e&&("scale"in e||"sort"in e)}function Fc(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function Lie(e){return e&&"legend"in e}function Aie(e){return e&&("format"in e||"formatType"in e)}function Vie(e){return In(e,["legend","axis","header","scale"])}function u_e(e){return"op"in e}function K(e,t={}){let n=e.field,r=t.prefix,i=t.suffix,o="";if(d_e(e))n=DI("count");else{let a;if(!t.nofn)if(u_e(e))a=e.op;else{let{bin:s,aggregate:c,timeUnit:l}=e;et(s)?(a=Cb(s),i=(t.binSuffix??"")+(t.suffix??"")):c?i2(c)?(o=`["${n}"]`,n=`argmax_${c.argmax}`):xo(c)?(o=`["${n}"]`,n=`argmin_${c.argmin}`):a=String(c):l&&!aa(l)&&(a=Ure(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}a&&(n=n?`${a}_${n}`:a)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?th(n):t.expr?SI(n,t.expr)+o:ar(n)+o}function hh(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Y(e)&&!!e.bin;case"temporal":return!1}throw new Error(O.invalidFieldType(e.type))}function f_e(e){return s2(e)&&kc(e.scale?.type)}function d_e(e){return e.aggregate==="count"}function p_e(e,t){let{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(et(r))return`${n} (binned)`;if(i&&!aa(i)){let a=on(i)?.unit;if(a)return`${n} (${Hf(a).join("-")})`}else if(o)return i2(o)?`${n} for max ${o.argmax}`:xo(o)?`${n} for min ${o.argmin}`:`${m4(o)} of ${n}`;return n}function h_e(e){let{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(i2(t))return`${i} for argmax(${t.argmax})`;if(xo(t))return`${i} for argmin(${t.argmin})`;let o=r&&!aa(r)?on(r):void 0,a=t||o?.unit||o?.maxbins&&"timeunit"||et(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}var Nie=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return h_e(e);default:return p_e(e,t)}},_ie=Nie;function rF(e){_ie=e}function kie(){rF(Nie)}function ms(e,t,{allowDisabling:n,includeDefault:r=!0}){let i=Kb(e)?.title;if(!Y(e))return i??e.title;let o=e,a=r?gh(o,t):void 0;return n?it(i,o.title,a):i??o.title??a}function Kb(e){if(Fc(e)&&e.axis)return e.axis;if(Lie(e)&&e.legend)return e.legend;if(Gb(e)&&e.header)return e.header}function gh(e,t){return _ie(e,t)}function Ff(e){if(Aie(e)){let{format:t,formatType:n}=e;return{format:t,formatType:n}}else{let t=Kb(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function m_e(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Yb(e)&&F(e.sort))return"ordinal";let{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!i2(n)&&!xo(n))return"quantitative";if(s2(e)&&e.scale?.type)switch(sh[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function li(e){if(Y(e))return e;if(If(e))return e.condition}function Tt(e){if(Ne(e))return e;if(w4(e))return e.condition}function iF(e,t,n,r={}){if(Q(e)||Oe(e)||D1(e)){let i=Q(e)?"string":Oe(e)?"number":"boolean";return U(O.primitiveChannelDef(t,i,e)),{value:e}}return Ne(e)?Wb(e,t,n,r):w4(e)?k(x({},e),{condition:Wb(e.condition,t,n,r)}):e}function Wb(e,t,n,r){if(Aie(e)){let i=e,{format:a,formatType:s}=i,c=ie(i,["format","formatType"]);if(ps(s)&&!n.customFormatTypes)return U(O.customFormatTypeNotAllowed(t)),Wb(c,t,n,r)}else{let a=Fc(e)?"axis":Lie(e)?"legend":Gb(e)?"header":null;if(a&&e[a]){let o=e[a],{format:s,formatType:c}=o,l=ie(o,["format","formatType"]);if(ps(c)&&!n.customFormatTypes)return U(O.customFormatTypeNotAllowed(t)),Wb(k(x({},e),{[a]:l}),t,n,r)}}return Y(e)?vh(e,t,r):g_e(e)}function g_e(e){let t=e.type;if(t)return e;let{datum:n}=e;return t=Oe(n)?"quantitative":Q(n)?"nominal":o2(n)?"temporal":void 0,k(x({},e),{type:t})}function vh(e,t,{compositeMark:n=!1}={}){let{aggregate:r,timeUnit:i,bin:o,field:a}=e,s=x({},e);if(!n&&r&&!Sf(r)&&!i2(r)&&!xo(r)&&(U(O.invalidAggregate(r)),delete s.aggregate),i&&(s.timeUnit=on(i)),a&&(s.field=`${a}`),et(o)&&(s.bin=Df(o,t)),rn(o)&&!vt(t)&&U(O.channelShouldNotBeUsedForBinned(t)),Sn(s)){let{type:l}=s,u=Wre(l);l!==u&&(s.type=u),l!=="quantitative"&&xb(r)&&(U(O.invalidFieldTypeForCountAggregate(l,r)),s.type="quantitative")}else if(!gb(t)){let l=m_e(s,t);s.type=l}if(Sn(s)){let{compatible:l,warning:u}=v_e(s,t)||{};l===!1&&U(u)}if(Yb(s)&&Q(s.sort)){let{sort:l}=s;if(JI(l))return k(x({},s),{sort:{encoding:l}});let u=l.substr(1);if(l.charAt(0)==="-"&&JI(u))return k(x({},s),{sort:{encoding:u,order:"descending"}})}if(Gb(s)){let{header:l}=s;if(l){let c=l,{orient:u}=c,f=ie(c,["orient"]);if(u)return k(x({},s),{header:k(x({},f),{labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u})})}}return s}function Df(e,t){return D1(e)?{maxbins:TI(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?k(x({},e),{maxbins:TI(t)}):e}var Tf={compatible:!0};function v_e(e,t){let n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case R1:case O1:case yf:return hh(e)?Tf:{compatible:!1,warning:O.channelShouldBeDiscrete(t)};case gt:case nn:case n2:case ss:case Fn:case Ni:case _i:case b0:case M0:case xf:case Vc:case Cf:case bf:case ta:case ii:case Ai:case Mf:return Tf;case ai:case si:case oi:case Vi:return n!==a2?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Tf;case f1:case ho:case mo:case go:case $1:case ea:case J2:case P1:case po:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Tf;case Mn:case vo:return!hh(e)&&!f_e(e)?{compatible:!1,warning:O.channelShouldBeDiscreteOrDiscretizing(t)}:Tf;case v4:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Tf}}function Rc(e){let{formatType:t}=Ff(e);return t==="time"||!t&&y_e(e)}function y_e(e){return e&&(e.type==="temporal"||Y(e)&&!!e.timeUnit)}function w0(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){let o=t&&on(t)?.unit,a=o||n==="temporal",s;return C4(e)?s=e.expr:ae(e)?s=e.signal:o2(e)?(a=!0,s=oa(e)):(Q(e)||Oe(e))&&a&&(s=`datetime(${ft(e)})`,Rre(o)&&(Oe(e)&&e<1e4||Q(e)&&isNaN(Date.parse(e)))&&(s=oa({[o]:e}))),s?r&&a?`time(${s})`:s:i?void 0:ft(e)}function Zb(e,t){let{type:n}=e;return t.map(r=>{let i=Y(e)&&!aa(e.timeUnit)?e.timeUnit:void 0,o=w0(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function ds(e,t){return et(e.bin)?Fr(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}var oF={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Pc(e){return e?.condition}var Jb=["domain","grid","labels","ticks","title"],Tie={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},aF={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Iie=k(x({},aF),{style:1,labelExpr:1,encoding:1});function sF(e){return!!Iie[e]}var g8t=R(Iie),C_e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},cF=R(C_e);function Cr(e){return"mark"in e}var gs=class{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Cr(t)?xie(t.mark)===this.name:!1}};function vs(e,t){let n=e&&e[t];return n?F(n)?as(n,r=>!!r.field):Y(n)||If(n):!1}function lF(e,t){let n=e&&e[t];return n?F(n)?as(n,r=>!!r.field):Y(n)||Ii(n)||w4(n):!1}function eM(e,t){if(vt(t)){let n=e[t];if((Y(n)||Ii(n))&&(Ib(n.type)||Y(n)&&n.timeUnit)){let r=wf(t);return lF(e,r)}}return!1}function Rf(e){return as(nre,t=>{if(vs(e,t)){let n=e[t];if(F(n))return as(n,r=>!!r.aggregate);{let r=li(n);return r&&!!r.aggregate}}return!1})}function tM(e,t){let n=[],r=[],i=[],o=[],a={};return yh(e,(s,c)=>{if(Y(s)){let l=s,{field:u,aggregate:f,bin:d,timeUnit:p}=l,h=ie(l,["field","aggregate","bin","timeUnit"]);if(f||p||d){let g=Kb(s)?.title,v=K(s,{forAs:!0}),y=k(x(x({},g?[]:{title:ms(s,t,{allowDisabling:!0})}),h),{field:v});if(f){let C;if(i2(f)?(C="argmax",v=K({op:"argmax",field:f.argmax},{forAs:!0}),y.field=`${v}.${u}`):xo(f)?(C="argmin",v=K({op:"argmin",field:f.argmin},{forAs:!0}),y.field=`${v}.${u}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(C=f),C){let b={op:C,as:v};u&&(b.field=u),o.push(b)}}else if(n.push(v),Sn(s)&&et(d)){if(r.push({bin:d,field:u,as:v}),n.push(K(s,{binSuffix:"end"})),ds(s,c)&&n.push(K(s,{binSuffix:"range"})),vt(c)){let C={field:`${v}_end`};a[`${c}2`]=C}y.bin="binned",gb(c)||(y.type=a2)}else if(p&&!aa(p)){i.push({timeUnit:p,field:u,as:v});let C=Sn(s)&&s.type!==ls&&"time";C&&(c===b0||c===Vc?y.formatType=C:pre(c)?y.legend=x({formatType:C},y.legend):vt(c)&&(y.axis=x({formatType:C},y.axis)))}a[c]=y}else n.push(u),a[c]=e[c]}else a[c]=e[c]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function b_e(e,t,n){let r=gre(t,n);if(r){if(r==="binned"){let i=e[t===P1?gt:nn];return!!(Y(i)&&Y(e[t])&&rn(i.bin))}}else return!1;return!0}function Fie(e,t,n,r){let i={};for(let o of R(e))mb(o)||U(O.invalidEncodingChannel(o));for(let o of cre){if(!e[o])continue;let a=e[o];if(_c(o)){let s=sre(o),c=i[s];if(Y(c)&&Gre(c.type)&&Y(a)&&!c.timeUnit){U(O.offsetNestedInsideContinuousPositionScaleDropped(s));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(U(O.REPLACE_ANGLE_WITH_THETA),o=ii),!b_e(e,o,t)){U(O.incompatibleChannel(o,t));continue}if(o===$1&&t==="line"&&li(e[o])?.aggregate){U(O.LINE_WITH_VARYING_SIZE);continue}if(o===Fn&&(n?"fill"in e:"stroke"in e)){U(O.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===M0||o===v4&&!F(a)&&!cr(a)||o===Vc&&F(a)){if(a){if(o===v4){let s=e[o];if(Qb(s)){i[o]=s;continue}}i[o]=te(a).reduce((s,c)=>(Y(c)?s.push(vh(c,o)):U(O.emptyFieldDef(c,o)),s),[])}}else{if(o===Vc&&a===null)i[o]=null;else if(!Y(a)&&!Ii(a)&&!cr(a)&&!M4(a)&&!ae(a)){U(O.emptyFieldDef(a,o));continue}i[o]=iF(a,o,r)}}return i}function S4(e,t){let n={};for(let r of R(e)){let i=iF(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Rie(e){let t=[];for(let n of R(e))if(vs(e,n)){let r=e[n],i=te(r);for(let o of i)Y(o)?t.push(o):If(o)&&t.push(o.condition)}return t}function yh(e,t,n){if(e)for(let r of R(e)){let i=e[r];if(F(i))for(let o of i)t.call(n,o,r);else t.call(n,i,r)}}function Oie(e,t,n,r){return e?R(e).reduce((i,o)=>{let a=e[o];return F(a)?a.reduce((s,c)=>t.call(r,s,c,o),i):t.call(r,i,a,o)},n):n}function nM(e,t){return R(t).reduce((n,r)=>{switch(r){case gt:case nn:case Cf:case Mf:case bf:case P1:case po:case n2:case ss:case ii:case ea:case Ai:case J2:case oi:case ai:case Vi:case si:case b0:case Mn:case ta:case Vc:return n;case v4:if(e==="line"||e==="trail")return n;case M0:case xf:{let i=t[r];if(F(i)||Y(i))for(let o of te(i))o.aggregate||n.push(K(o,{}));return n}case $1:if(e==="trail")return n;case Fn:case Ni:case _i:case f1:case ho:case mo:case vo:case go:{let i=li(t[r]);return i&&!i.aggregate&&n.push(K(i,{})),n}}},[])}function Pie(e){let o=e,{tooltip:t}=o,n=ie(o,["tooltip"]);if(!t)return{filteredEncoding:n};let r,i;if(F(t)){for(let a of t)a.aggregate?(r||(r=[]),r.push(a)):(i||(i=[]),i.push(a));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return F(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function xh(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};let i=e.map(({fieldPrefix:a,titlePrefix:s})=>{let c=r?` of ${iM(t)}`:"";return{field:a+t.field,type:t.type,title:ae(s)?{signal:`${s}"${escape(c)}"`}:s+c}}),o=Rie(n).map(Vie);return{tooltip:[...i,...Li(o,xe)]}}function iM(e){let{title:t,field:n}=e;return it(t,n)}function Of(e,t,n,r,i){let{scale:o,axis:a}=n;return({partName:s,mark:c,positionPrefix:l,endPositionPrefix:u=void 0,extraEncoding:f={}})=>{let d=iM(n);return uF(e,s,i,{mark:c,encoding:x(x(x({[t]:x(x(x({field:`${l}_${n.field}`,type:n.type},d!==void 0?{title:d}:{}),o!==void 0?{scale:o}:{}),a!==void 0?{axis:a}:{})},Q(u)?{[`${t}2`]:{field:`${u}_${n.field}`}}:{}),r),f)})}}function uF(e,t,n,r){let{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||e[t]===void 0&&n[t]?[k(x({},r),{mark:x(k(x(x(x(x(x({},n[t]),i?{clip:i}:{}),o?{color:o}:{}),a?{opacity:a}:{}),ci(r.mark)?r.mark:{type:r.mark}),{style:`${s}-${String(t)}`}),D1(e[t])?{}:e[t])})]:[]}function oM(e,t,n){let{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],c=r[`${i}Error2`];return{continuousAxisChannelDef:rM(o,n),continuousAxisChannelDef2:rM(a,n),continuousAxisChannelDefError:rM(s,n),continuousAxisChannelDefError2:rM(c,n),continuousAxis:i}}function rM(e,t){if(e?.aggregate){let n=e,{aggregate:r}=n,i=ie(n,["aggregate"]);return r!==t&&U(O.errorBarContinuousAxisHasCustomizedAggregate(r,t)),i}else return e}function aM(e,t){let{mark:n,encoding:r}=e,{x:i,y:o}=r;if(ci(n)&&n.orient)return n.orient;if(ca(i)){if(ca(o)){let a=Y(i)&&i.aggregate,s=Y(o)&&o.aggregate;if(!a&&s===t)return"vertical";if(!s&&a===t)return"horizontal";if(a===t&&s===t)throw new Error("Both x and y cannot have aggregate");return Rc(o)&&!Rc(i)?"horizontal":"vertical"}return"horizontal"}else{if(ca(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}var Ch="boxplot",$ie=["box","median","outliers","rule","ticks"],Bie=new gs(Ch,fF);function Uie(e){return Oe(e)?"tukey":e}function fF(e,{config:t}){e=k(x({},e),{encoding:S4(e.encoding,t)});let di=e,{mark:n,encoding:r,params:i,projection:o}=di,a=ie(di,["mark","encoding","params","projection"]),s=ci(n)?n:{type:n};i&&U(O.selectionNotSupported("boxplot"));let c=s.extent??t.boxplot.extent,l=Be("size",s,t),u=s.invalid,f=Uie(c),{bins:d,timeUnits:p,transform:h,continuousAxisChannelDef:m,continuousAxis:g,groupby:v,aggregate:y,encodingWithoutContinuousAxis:C,ticksOrient:b,boxOrient:M,customTooltipWithoutAggregatedField:S}=w_e(e,c,t),ya=C,{color:w,size:E}=ya,D=ie(ya,["color","size"]),H=Wae=>Of(s,g,m,Wae,t.boxplot),A=H(D),j=H(C),V=H(x(x({},D),E?{size:E}:{})),_=xh([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,C),N={type:"tick",color:"black",opacity:1,orient:b,invalid:u,aria:!1},I=f==="min-max"?_:xh([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,C),G=[...A({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:I}),...A({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:I}),...A({partName:"ticks",mark:N,positionPrefix:"lower_whisker",extraEncoding:I}),...A({partName:"ticks",mark:N,positionPrefix:"upper_whisker",extraEncoding:I})],X=[...f!=="tukey"?G:[],...j({partName:"box",mark:k(x({type:"bar"},l?{size:l}:{}),{orient:M,invalid:u,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:_}),...V({partName:"median",mark:k(x(x({type:"tick",invalid:u},ne(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),l?{size:l}:{}),{orient:b,aria:!1}),positionPrefix:"mid_box",extraEncoding:_})];if(f==="min-max")return k(x({},a),{transform:(a.transform??[]).concat(h),layer:X});let J=`datum["lower_box_${m.field}"]`,we=`datum["upper_box_${m.field}"]`,Se=`(${we} - ${J})`,Ye=`${J} - ${c} * ${Se}`,bt=`${we} + ${c} * ${Se}`,st=`datum["${m.field}"]`,Kt={joinaggregate:jie(m.field),groupby:v},Es={transform:[{filter:`(${Ye} <= ${st}) && (${st} <= ${bt})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...y],groupby:v}],layer:G},A8=D,{tooltip:W0}=A8,T4=ie(A8,["tooltip"]),{scale:me,axis:Xe}=m,nt=iM(m),oe=In(Xe,["title"]),jr=uF(s,"outliers",t.boxplot,{transform:[{filter:`(${st} < ${Ye}) || (${st} > ${bt})`}],mark:"point",encoding:x(x(x({[g]:x(x(x({field:m.field,type:m.type},nt!==void 0?{title:nt}:{}),me!==void 0?{scale:me}:{}),Ge(oe)?{}:{axis:oe})},T4),w?{color:w}:{}),S?{tooltip:S}:{})})[0],zt,fi=[...d,...p,Kt];return jr?zt={transform:fi,layer:[jr,Es]}:(zt=Es,zt.transform.unshift(...fi)),k(x({},a),{layer:[zt,{transform:h,layer:X}]})}function jie(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function w_e(e,t,n){let r=aM(e,Ch),{continuousAxisChannelDef:i,continuousAxis:o}=oM(e,r,Ch),a=i.field,s=Uie(t),c=[...jie(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:(s==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(s==="min-max"?"upper_whisker_":"max_")+a}],l=s==="min-max"||s==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],S=e.encoding,{[o]:u}=S,f=ie(S,[I4(o)]),{customTooltipWithoutAggregatedField:d,filteredEncoding:p}=Pie(f),{bins:h,timeUnits:m,aggregate:g,groupby:v,encoding:y}=tM(p,n),C=r==="vertical"?"horizontal":"vertical",b=r,M=[...h,...m,{aggregate:[...g,...c],groupby:v},...l];return{bins:h,timeUnits:m,transform:M,groupby:v,aggregate:g,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:y,ticksOrient:C,boxOrient:b,customTooltipWithoutAggregatedField:d}}var sM="errorbar",Gie=["ticks","rule"],Wie=new gs(sM,dF);function dF(e,{config:t}){e=k(x({},e),{encoding:S4(e.encoding,t)});let{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:c,tooltipEncoding:l}=pF(e,sM,t);delete o.size;let u=Of(s,i,r,o,t.errorbar),f=s.thickness,d=s.size,p=x(x({type:"tick",orient:a,aria:!1},f!==void 0?{thickness:f}:{}),d!==void 0?{size:d}:{}),h=[...u({partName:"ticks",mark:p,positionPrefix:"lower",extraEncoding:l}),...u({partName:"ticks",mark:p,positionPrefix:"upper",extraEncoding:l}),...u({partName:"rule",mark:x({type:"rule",ariaRoleDescription:"errorbar"},f!==void 0?{size:f}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return x(k(x({},c),{transform:n}),h.length>1?{layer:h}:x({},h[0]))}function S_e(e,t){let{encoding:n}=e;if(E_e(n))return{orient:aM(e,t),inputType:"raw"};let r=D_e(n),i=z_e(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);let s=n.x2,c=n.y2;if(Ne(s)&&Ne(c))throw new Error(`${t} cannot have both x2 and y2`);if(Ne(s)){if(ca(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Ne(c)){if(ca(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{let s=n.xError,c=n.xError2,l=n.yError,u=n.yError2;if(Ne(c)&&!Ne(s))throw new Error(`${t} cannot have xError2 without xError`);if(Ne(u)&&!Ne(l))throw new Error(`${t} cannot have yError2 without yError`);if(Ne(s)&&Ne(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Ne(s)){if(ca(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Ne(l)){if(ca(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function E_e(e){return(Ne(e.x)||Ne(e.y))&&!Ne(e.x2)&&!Ne(e.y2)&&!Ne(e.xError)&&!Ne(e.xError2)&&!Ne(e.yError)&&!Ne(e.yError2)}function D_e(e){return Ne(e.x2)||Ne(e.y2)}function z_e(e){return Ne(e.xError)||Ne(e.xError2)||Ne(e.yError)||Ne(e.yError2)}function pF(e,t,n){var X,J,we;let G=e,{mark:r,encoding:i,params:o,projection:a}=G,s=ie(G,["mark","encoding","params","projection"]),c=ci(r)?r:{type:r};o&&U(O.selectionNotSupported(t));let{orient:l,inputType:u}=S_e(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:h,continuousAxis:m}=oM(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:v,tooltipSummary:y,tooltipTitleWithFieldName:C}=H_e(c,f,d,p,h,u,t,n),Se=i,{[m]:b,[X=m==="x"?"x2":"y2"]:M,[J=m==="x"?"xError":"yError"]:S,[we=m==="x"?"xError2":"yError2"]:w}=Se,E=ie(Se,[I4(m),I4(X),I4(J),I4(we)]),{bins:D,timeUnits:H,aggregate:A,groupby:j,encoding:V}=tM(E,n),_=[...A,...g],N=u!=="raw"?[]:j,I=xh(y,f,V,C);return{transform:[...s.transform??[],...D,...H,..._.length===0?[]:[{aggregate:_,groupby:N}],...v],groupby:N,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:V,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:s,tooltipEncoding:I}}function H_e(e,t,n,r,i,o,a,s){let c=[],l=[],u=t.field,f,d=!1;if(o==="raw"){let p=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":s.errorbar.center,h=e.extent?e.extent:p==="mean"?"stderr":"iqr";if(p==="median"!=(h==="iqr")&&U(O.errorBarCenterIsUsedWithWrongExtent(p,h,a)),h==="stderr"||h==="stdev")c=[{op:h,field:u,as:`extent_${u}`},{op:p,field:u,as:`center_${u}`}],l=[{calculate:`datum["center_${u}"] + datum["extent_${u}"]`,as:`upper_${u}`},{calculate:`datum["center_${u}"] - datum["extent_${u}"]`,as:`lower_${u}`}],f=[{fieldPrefix:"center_",titlePrefix:m4(p)},{fieldPrefix:"upper_",titlePrefix:qie(p,h,"+")},{fieldPrefix:"lower_",titlePrefix:qie(p,h,"-")}],d=!0;else{let m,g,v;h==="ci"?(m="mean",g="ci0",v="ci1"):(m="median",g="q1",v="q3"),c=[{op:g,field:u,as:`lower_${u}`},{op:v,field:u,as:`upper_${u}`},{op:m,field:u,as:`center_${u}`}],f=[{fieldPrefix:"upper_",titlePrefix:ms({field:u,aggregate:v,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:ms({field:u,aggregate:g,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:ms({field:u,aggregate:m,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&U(O.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${u}`},{calculate:`datum["${u}"]`,as:`lower_${u}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:u}],l=[{calculate:`datum["${u}"] + datum["${r.field}"]`,as:`upper_${u}`}],i?l.push({calculate:`datum["${u}"] + datum["${i.field}"]`,as:`lower_${u}`}):l.push({calculate:`datum["${u}"] - datum["${r.field}"]`,as:`lower_${u}`}));for(let p of l)f.push({fieldPrefix:p.as.substring(0,6),titlePrefix:Z2(Z2(p.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:c,tooltipSummary:f,tooltipTitleWithFieldName:d}}function qie(e,t,n){return`${m4(e)} ${n} ${t}`}var cM="errorband",Yie=["band","borders"],Xie=new gs(cM,hF);function hF(e,{config:t}){e=k(x({},e),{encoding:S4(e.encoding,t)});let{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:c}=pF(e,cM,t),l=a,u=Of(l,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0,d={type:f?"area":"rect"},p={type:f?"line":"rule"},h=x(x({},l.interpolate?{interpolate:l.interpolate}:{}),l.tension&&l.interpolate?{tension:l.tension}:{});return f?(d=k(x(x({},d),h),{ariaRoleDescription:"errorband"}),p=k(x(x({},p),h),{aria:!1})):l.interpolate?U(O.errorBand1DNotSupport("interpolate")):l.tension&&U(O.errorBand1DNotSupport("tension")),k(x({},s),{transform:n,layer:[...u({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c}),...u({partName:"borders",mark:p,positionPrefix:"lower",extraEncoding:c}),...u({partName:"borders",mark:p,positionPrefix:"upper",extraEncoding:c})]})}var Qie={};function mF(e,t,n){let r=new gs(e,t);Qie[e]={normalizer:r,parts:n}}function Kie(){return R(Qie)}mF(Ch,fF,$ie);mF(sM,dF,Gie);mF(cM,hF,Yie);var Zie=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"];var gF={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},vF={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Jie=R(gF),e1e=R(vF),L_e={header:1,headerRow:1,headerColumn:1,headerFacet:1},yF=R(L_e);var lM=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],t1e={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},xF={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},b5t=R(xF);var ui="_vgsid_",n1e={point:{on:"click",fields:[ui],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function bh(e){return e==="legend"||!!e?.legend}function uM(e){return bh(e)&&ne(e)}function Pf(e){return!!e?.select}function fM(e){let t=[];for(let r of e||[]){if(Pf(r))continue;let n=r,{expr:i,bind:o}=n,a=ie(n,["expr","bind"]);if(o&&i){let s=k(x({},a),{bind:o,init:i});t.push(s)}else{let s=x(x(x({},a),i?{update:i}:{}),o?{bind:o}:{});t.push(s)}}return t}function CF(e){return E4(e)||$f(e)||Mh(e)}function Mh(e){return"concat"in e}function E4(e){return"vconcat"in e}function $f(e){return"hconcat"in e}function bF({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function j1(e){return ne(e)&&e.step!==void 0}function MF(e){return e.view||e.width||e.height}var wF=20,A_e={align:1,bounds:1,center:1,columns:1,spacing:1},V_e=R(A_e);function r1e(e,t,n){let r=n[t],i={},{spacing:o,columns:a}=r;o!==void 0&&(i.spacing=o),a!==void 0&&(Oc(e)&&!hs(e.facet)||Mh(e))&&(i.columns=a),E4(e)&&(i.columns=1);for(let s of V_e)if(e[s]!==void 0)if(s==="spacing"){let c=e[s];i[s]=Oe(c)?c:{row:c.row??o,column:c.column??o}}else i[s]=e[s];return i}function wh(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function L0(e,t){let n=Bf(e,t);return j1(n)?n.step:a1e}function Bf(e,t){let n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return it(n,{step:e.step})}var a1e=20,N_e={continuousWidth:200,continuousHeight:200,step:a1e};var __e={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:N_e,mark:pie,arc:{},area:{},bar:gie,circle:{},geoshape:{},image:{},line:{},point:{},rect:vie,rule:{color:"black"},square:{},text:{color:"black"},tick:yie,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Jre,projection:{},legend:t1e,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:n1e,style:{},title:{},facet:{spacing:wF},concat:{spacing:wF},normalizedNumberFormat:".0%"},$c=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],i1e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},o1e={blue:$c[0],orange:$c[1],red:$c[2],teal:$c[3],green:$c[4],yellow:$c[5],purple:$c[6],pink:$c[7],brown:$c[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function k_e(e={}){return{signals:[{name:"color",value:ne(e)?x(x({},o1e),e):o1e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function T_e(e){return{signals:[{name:"fontSize",value:ne(e)?x(x({},i1e),e):i1e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function I_e(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function s1e(e){let t=R(e||{}),n={};for(let r of t){let i=e[r];n[r]=Pc(i)?wb(i):Rr(i)}return n}function F_e(e){let t=R(e),n={};for(let r of t)n[r]=s1e(e[r]);return n}var R_e=[...Pb,...cF,...yF,"background","padding","legend","lineBreak","scale","style","title","view"];function dM(e={}){let c=e,{color:t,font:n,fontSize:r,selection:i}=c,o=ie(c,["color","font","fontSize","selection"]),a=Fa({},le(__e),n?I_e(n):{},t?k_e(t):{},r?T_e(r):{},o||{});i&&Js(a,"selection",i,!0);let s=In(a,R_e);for(let l of["background","lineBreak","padding"])a[l]&&(s[l]=Rr(a[l]));for(let l of Pb)a[l]&&(s[l]=sr(a[l]));for(let l of cF)a[l]&&(s[l]=s1e(a[l]));for(let l of yF)a[l]&&(s[l]=sr(a[l]));return a.legend&&(s.legend=sr(a.legend)),a.scale&&(s.scale=sr(a.scale)),a.style&&(s.style=F_e(a.style)),a.title&&(s.title=sr(a.title)),a.view&&(s.view=sr(a.view)),s}var O_e=new Set(["view",...uie]),P_e=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],$_e=x({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},die);function c1e(e){e=le(e);for(let t of P_e)delete e[t];if(e.axis)for(let t in e.axis)Pc(e.axis[t])&&delete e.axis[t];if(e.legend)for(let t of Zie)delete e.legend[t];if(e.mark){for(let t of KI)delete e.mark[t];e.mark.tooltip&&ne(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(fM(e.params)),delete e.params);for(let t of O_e){for(let r of KI)delete e[t][r];let n=$_e[t];if(n)for(let r of n)delete e[t][r];U_e(e,t)}for(let t of Kie())delete e[t];B_e(e);for(let t in e)ne(e[t])&&Ge(e[t])&&delete e[t];return Ge(e)?void 0:e}function B_e(e){let{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=bb(e.title);Ge(t)||(e.style["group-title"]=x(x({},e.style["group-title"]),t)),Ge(n)||(e.style["group-subtitle"]=x(x({},e.style["group-subtitle"]),n)),Ge(r)?delete e.title:e.title=r}function U_e(e,t,n,r){let i=r?e[t][r]:e[t];t==="view"&&(n="cell");let o=x(x({},i),e.style[n??t]);Ge(o)||(e.style[n??t]=o),r||delete e[t]}function Bc(e){return"layer"in e}function SF(e){return"repeat"in e}function l1e(e){return!F(e.repeat)&&e.repeat.layer}var D4=class{map(t,n){return Oc(t)?this.mapFacet(t,n):SF(t)?this.mapRepeat(t,n):$f(t)?this.mapHConcat(t,n):E4(t)?this.mapVConcat(t,n):Mh(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Bc(t))return this.mapLayer(t,n);if(Cr(t))return this.mapUnit(t,n);throw new Error(O.invalidSpec(t))}mapLayer(t,n){return k(x({},t),{layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))})}mapHConcat(t,n){return k(x({},t),{hconcat:t.hconcat.map(r=>this.map(r,n))})}mapVConcat(t,n){return k(x({},t),{vconcat:t.vconcat.map(r=>this.map(r,n))})}mapConcat(t,n){let o=t,{concat:r}=o,i=ie(o,["concat"]);return k(x({},i),{concat:r.map(a=>this.map(a,n))})}mapFacet(t,n){return k(x({},t),{spec:this.map(t.spec,n)})}mapRepeat(t,n){return k(x({},t),{spec:this.map(t.spec,n)})}};var j_e={zero:1,center:1,normalize:1};function q_e(e){return e in j_e}var G_e=new Set([QI,E0,S0,Vf,Af,uh,fh,D0,Rb,lh]),W_e=new Set([E0,S0,QI]);function Uf(e){return Y(e)&&Ic(e)==="quantitative"&&!e.bin}function u1e(e,t,{orient:n,type:r}){let i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),a=e[t],s=e[i];if(Y(a)&&Y(s))if(Uf(a)&&Uf(s)){if(a.stack)return t;if(s.stack)return i;let c=Y(a)&&!!a.aggregate,l=Y(s)&&!!s.aggregate;if(c!==l)return c?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Uf(a))return t;if(Uf(s))return i}else{if(Uf(a))return o&&n==="vertical"?void 0:t;if(Uf(s))return o&&n==="horizontal"?void 0:i}}function Y_e(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function pM(e,t){let n=ci(e)?e:{type:e},r=n.type;if(!G_e.has(r))return null;let i=u1e(t,"x",n)||u1e(t,"theta",n);if(!i)return null;let o=t[i],a=Y(o)?K(o,{}):void 0,s=Y_e(i),c=[],l=new Set;if(t[s]){let m=t[s],g=Y(m)?K(m,{}):void 0;g&&g!==a&&(c.push(s),l.add(g))}let u=s==="x"?"xOffset":"yOffset",f=t[u],d=Y(f)?K(f,{}):void 0;d&&d!==a&&(c.push(u),l.add(d));let p=lre.reduce((m,g)=>{if(g!=="tooltip"&&vs(t,g)){let v=t[g];for(let y of te(v)){let C=li(y);if(C.aggregate)continue;let b=K(C,{});(!b||!l.has(b))&&m.push({channel:g,fieldDef:C})}}return m},[]),h;return o.stack!==void 0?D1(o.stack)?h=o.stack?"zero":null:h=o.stack:W_e.has(r)&&(h="zero"),!h||!q_e(h)||Rf(t)&&p.length===0?null:o?.scale?.type&&o?.scale?.type!==Or.LINEAR?(o?.stack&&U(O.cannotStackNonLinearScale(o.scale.type)),null):Ne(t[Ir(i)])?(o.stack!==void 0&&U(O.cannotStackRangedMark(i)),null):(Y(o)&&o.aggregate&&!Cre.has(o.aggregate)&&U(O.stackNonSummativeAggregate(o.aggregate)),{groupbyChannels:c,groupbyFields:l,fieldChannel:i,impute:o.impute===null?!1:Ti(r),stackBy:p,offset:h})}function hM(e,t,n){let r=sr(e),i=Be("orient",r,n);if(r.orient=K_e(r.type,t,i),i!==void 0&&i!==r.orient&&U(O.orientOverridden(r.orient,i)),r.type==="bar"&&r.orient){let s=Be("cornerRadiusEnd",r,n);if(s!==void 0){let c=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:hie[r.orient];for(let l of c)r[l]=s;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}return Be("opacity",r,n)===void 0&&(r.opacity=Q_e(r.type,t)),Be("cursor",r,n)===void 0&&(r.cursor=X_e(r,t,n)),r}function X_e(e,t,n){return t.href||e.href||Be("href",e,n)?"pointer":e.cursor}function Q_e(e,t){if(Ae([Af,lh,uh,fh],e)&&!Rf(t))return .7}function f1e(e,t,{graticule:n}){if(n)return!1;let r=Co("filled",e,t),i=e.type;return it(r,i!==Af&&i!==D0&&i!==Vf)}function K_e(e,t,n){switch(e){case Af:case uh:case fh:case Rb:case cie:case sie:return}let{x:r,y:i,x2:o,y2:a}=t;switch(e){case E0:if(Y(r)&&(rn(r.bin)||Y(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Y(i)&&(rn(i.bin)||Y(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o)return(Y(r)&&r.type===a2&&!et(r.bin)||mh(r))&&Y(i)&&rn(i.bin)?"horizontal":"vertical";if(!a)return(Y(i)&&i.type===a2&&!et(i.bin)||mh(i))&&Y(r)&&rn(r.bin)?"vertical":"horizontal"}case Vf:if(o&&!(Y(r)&&rn(r.bin))&&a&&!(Y(i)&&rn(i.bin)))return;case S0:if(a)return Y(i)&&rn(i.bin)?"horizontal":"vertical";if(o)return Y(r)&&rn(r.bin)?"vertical":"horizontal";if(e===Vf){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case D0:case lh:{let s=nF(r),c=nF(i);if(n)return n;if(s&&!c)return e!=="tick"?"horizontal":"vertical";if(!s&&c)return e!=="tick"?"vertical":"horizontal";if(s&&c)return"vertical";{let l=Sn(r)&&r.type===ls,u=Sn(i)&&i.type===ls;if(l&&!u)return"vertical";if(!l&&u)return"horizontal"}return}}return"vertical"}function Z_e(e){let i=e,{point:t,line:n}=i,r=ie(i,["point","line"]);return R(r).length>1?r:r.type}function J_e(e){for(let t of["line","area","rule","trail"])e[t]&&(e=k(x({},e),{[t]:In(e[t],["point","line"])}));return e}function EF(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ne(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ne(t.point)?t.point:{}:void 0}function d1e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}var mM=class{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Cr(t)){let{mark:r,encoding:i}=t,o=ci(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!EF(o,n[o.type],i);case"area":return!!EF(o,n[o.type],i)||!!d1e(o,n[o.type])}}return!1}run(t,n,r){let{config:i}=n,y=t,{params:o,projection:a,mark:s,name:c,encoding:l}=y,u=ie(y,["params","projection","mark","name","encoding"]),f=S4(l,i),d=ci(s)?s:{type:s},p=EF(d,i[d.type],f),h=d.type==="area"&&d1e(d,i[d.type]),m=[k(x({name:c},o?{params:o}:{}),{mark:Z_e(x(x({},d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{}),d)),encoding:In(f,["shape"])})],g=pM(hM(d,f,i),f),v=f;if(g){let{fieldChannel:C,offset:b}=g;v=k(x({},f),{[C]:x(x({},f[C]),b?{stack:b}:{})})}return v=In(v,["y2","x2"]),h&&m.push(k(x({},a?{projection:a}:{}),{mark:x(x({type:"line"},Ac(d,["clip","interpolate","tension","tooltip"])),h),encoding:v})),p&&m.push(k(x({},a?{projection:a}:{}),{mark:x(x({type:"point",opacity:1,filled:!0},Ac(d,["clip","tooltip"])),p),encoding:v})),r(k(x({},u),{layer:m}),k(x({},n),{config:J_e(i)}))}};function m1e(e,t){return t?hs(e)?v1e(e,t):g1e(e,t):e}function gM(e,t){return t?v1e(e,t):e}function DF(e,t,n){let r=t[e];if(zie(r)){if(r.repeat in n)return k(x({},t),{[e]:n[r.repeat]});U(O.noSuchRepeatedValue(r.repeat));return}return t}function g1e(e,t){if(e=DF("field",e,t),e!==void 0){if(e===null)return null;if(Yb(e)&&Pr(e.sort)){let n=DF("field",e.sort,t);e=x(x({},e),n?{sort:n}:{})}return e}}function p1e(e,t){if(Y(e))return g1e(e,t);{let n=DF("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function h1e(e,t){if(Ne(e)){let r=p1e(e,t);if(r)return r;if(M4(e))return{condition:e.condition}}else{if(w4(e)){let r=p1e(e.condition,t);if(r)return k(x({},e),{condition:r});{let n=e,{condition:i}=n;return ie(n,["condition"])}}return e}}function v1e(e,t){let n={};for(let r in e)if(de(e,r)){let i=e[r];if(F(i))n[r]=i.map(o=>h1e(o,t)).filter(o=>o);else{let o=h1e(i,t);o!==void 0&&(n[r]=o)}}return n}var vM=class{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Cr(t)){let{encoding:n,mark:r}=t;if(r==="line"||ci(r)&&r.type==="line")for(let i of are){let o=yo(i),a=n[o];if(n[i]&&(Y(a)&&!rn(a.bin)||Ii(a)))return!0}}return!1}run(t,n,r){let{encoding:i,mark:o}=t;return U(O.lineWithRange(!!i.x2,!!i.y2)),r(k(x({},t),{mark:ne(o)?k(x({},o),{type:"rule"}):"rule"}),n)}};var yM=class extends D4{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Bie,Wie,Xie,new mM,new vM]}map(t,n){if(Cr(t)){let r=vs(t.encoding,R1),i=vs(t.encoding,O1),o=vs(t.encoding,yf);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){let{parentEncoding:r,parentProjection:i}=n,o=gM(t.encoding,n.repeater),a=x(x(x({},t),t.name?{name:[n.repeaterPrefix,t.name].filter(c=>c).join("_")}:{}),o?{encoding:o}:{});if(r||i)return this.mapUnitWithParentEncodingOrProjection(a,n);let s=this.mapLayerOrUnit.bind(this);for(let c of this.nonFacetUnitNormalizers)if(c.hasMatchingType(a,n.config))return c.run(a,n,s);return a}mapRepeat(t,n){return l1e(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){let f=t,{repeat:r,spec:i}=f,o=ie(f,["repeat","spec"]),{row:a,column:s,layer:c}=r,{repeater:l={},repeaterPrefix:u=""}=n;return a||s?this.mapRepeat(k(x({},t),{repeat:x(x({},a?{row:a}:{}),s?{column:s}:{}),spec:{repeat:{layer:c},spec:i}}),n):k(x({},o),{layer:c.map(d=>{let p=k(x({},l),{layer:d}),h=`${(i.name?`${i.name}_`:"")+u}child__layer_${ut(d)}`,m=this.mapLayerOrUnit(i,k(x({},n),{repeater:p,repeaterPrefix:h}));return m.name=h,m})})}mapNonLayerRepeat(t,n){let h=t,{repeat:r,spec:i,data:o}=h,a=ie(h,["repeat","spec","data"]);!F(r)&&t.columns&&(t=In(t,["columns"]),U(O.columnsNotSupportByRowCol("repeat")));let s=[],{repeater:c={},repeaterPrefix:l=""}=n,u=!F(r)&&r.row||[c?c.row:null],f=!F(r)&&r.column||[c?c.column:null],d=F(r)&&r||[c?c.repeat:null];for(let m of d)for(let g of u)for(let v of f){let y={repeat:m,row:g,column:v,layer:c.layer},C=(i.name?`${i.name}_`:"")+l+"child__"+(F(r)?`${ut(m)}`:(r.row?`row_${ut(g)}`:"")+(r.column?`column_${ut(v)}`:"")),b=this.map(i,k(x({},n),{repeater:y,repeaterPrefix:C}));b.name=C,s.push(In(b,["data"]))}let p=F(r)?t.columns:r.column?r.column.length:1;return k(x({data:i.data??o,align:"all"},a),{columns:p,concat:s})}mapFacet(t,n){let{facet:r}=t;return hs(r)&&t.columns&&(t=In(t,["columns"]),U(O.columnsNotSupportByRowCol("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){let{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:a,config:s}=n,c=x1e({parentProjection:a,projection:i}),l=y1e({parentEncoding:o,encoding:gM(r,n.repeater)});return this.mapUnit(x(x(x({},t),c?{projection:c}:{}),l?{encoding:l}:{}),{config:s})}mapFacetedUnit(t,n){let y=t.encoding,{row:r,column:i,facet:o}=y,a=ie(y,["row","column","facet"]),C=t,{mark:s,width:c,projection:l,height:u,view:f,params:d,encoding:p}=C,h=ie(C,["mark","width","projection","height","view","params","encoding"]),{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),v=gM(a,n.repeater);return this.mapFacet(k(x(x({},h),g),{facet:m,spec:x(k(x(x(x(x({},c?{width:c}:{}),u?{height:u}:{}),f?{view:f}:{}),l?{projection:l}:{}),{mark:s,encoding:v}),d?{params:d}:{})}),n)}getFacetMappingAndLayout(t,n){let{row:r,column:i,facet:o}=t;if(r||i){o&&U(O.facetChannelDropped([...r?[R1]:[],...i?[O1]:[]]));let c={},l={};for(let u of[R1,O1]){let f=t[u];if(f){let a=f,{align:d,center:p,spacing:h,columns:m}=a,g=ie(a,["align","center","spacing","columns"]);c[u]=g;for(let v of["align","center","spacing"])f[v]!==void 0&&(l[v]??(l[v]={}),l[v][u]=f[v])}}return{facetMapping:c,layout:l}}else{let s=o,{align:c,center:l,spacing:u,columns:f}=s,d=ie(s,["align","center","spacing","columns"]);return{facetMapping:m1e(d,n.repeater),layout:x(x(x(x({},c?{align:c}:{}),l?{center:l}:{}),u?{spacing:u}:{}),f?{columns:f}:{})}}}mapLayer(t,o){var a=o,{parentEncoding:n,parentProjection:r}=a,i=ie(a,["parentEncoding","parentProjection"]);let f=t,{encoding:s,projection:c}=f,l=ie(f,["encoding","projection"]),u=k(x({},i),{parentEncoding:y1e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:x1e({parentProjection:r,projection:c})});return super.mapLayer(x(x({},l),t.name?{name:[u.repeaterPrefix,t.name].filter(d=>d).join("_")}:{}),u)}};function y1e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){let i=new Set([...R(e),...R(t)]);for(let o of i){let a=t[o],s=e[o];if(Ne(a)){let c=x(x({},s),a);r[o]=c}else w4(a)?r[o]=k(x({},a),{condition:x(x({},s),a.condition)}):a||a===null?r[o]=a:(n||cr(s)||ae(s)||Ne(s)||F(s))&&(r[o]=s)}}else r=t;return!r||Ge(r)?void 0:r}function x1e(e){let{parentProjection:t,projection:n}=e;return t&&n&&U(O.projectionOverridden({parentProjection:t,projection:n})),n??t}function Sh(e){return"filter"in e}function C1e(e){return e?.stop!==void 0}function xM(e){return"lookup"in e}function b1e(e){return"data"in e}function M1e(e){return"param"in e}function w1e(e){return"pivot"in e}function S1e(e){return"density"in e}function E1e(e){return"quantile"in e}function D1e(e){return"regression"in e}function z1e(e){return"loess"in e}function H1e(e){return"sample"in e}function L1e(e){return"window"in e}function A1e(e){return"joinaggregate"in e}function V1e(e){return"flatten"in e}function N1e(e){return"calculate"in e}function CM(e){return"bin"in e}function _1e(e){return"impute"in e}function k1e(e){return"timeUnit"in e}function T1e(e){return"aggregate"in e}function I1e(e){return"stack"in e}function F1e(e){return"fold"in e}function R1e(e){return"extent"in e&&!("density"in e)}function O1e(e){return e.map(t=>Sh(t)?{filter:h4(t.filter,qre)}:t)}var bM=class extends D4{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=P1e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=P1e(t,n),t.encoding){let r={};for(let[i,o]of F1(t.encoding))r[i]=$1e(o,n);t=k(x({},t),{encoding:r})}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){let o=t,{selection:r}=o,i=ie(o,["selection"]);return r?k(x({},i),{params:F1(r).map(([a,s])=>{let d=s,{init:c,bind:l,empty:u}=d,f=ie(d,["init","bind","empty"]);f.type==="single"?(f.type="point",f.toggle=!1):f.type==="multi"&&(f.type="point"),n.emptySelections[a]=u!=="none";for(let p of tn(n.selectionPredicates[a]??{}))p.empty=u!=="none";return{name:a,value:c,select:f,bind:l}})}):t}};function P1e(e,t){let i=e,{transform:n}=i,r=ie(i,["transform"]);if(n){let o=n.map(a=>{if(Sh(a))return{filter:zF(a,t)};if(CM(a)&&na(a.bin))return k(x({},a),{bin:B1e(a.bin)});if(xM(a)){let s=a.from,{selection:c}=s,l=ie(s,["selection"]);return c?k(x({},a),{from:x({param:c},l)}):a}return a});return k(x({},r),{transform:o})}return e}function $1e(e,t){let n=le(e);if(Y(n)&&na(n.bin)&&(n.bin=B1e(n.bin)),s2(n)&&n.scale?.domain?.selection){let r=n.scale.domain,{selection:o}=r,a=ie(r,["selection"]);n.scale.domain=x(x({},a),o?{param:o}:{})}if(M4(n))if(F(n.condition))n.condition=n.condition.map(o=>{let u=o,{selection:a,param:s,test:c}=u,l=ie(u,["selection","param","test"]);return s?o:k(x({},l),{test:zF(o,t)})});else{let i=$1e(n.condition,t),{selection:o,param:a,test:s}=i,c=ie(i,["selection","param","test"]);n.condition=a?n.condition:k(x({},c),{test:zF(n.condition,t)})}return n}function B1e(e){let t=e.extent;if(t?.selection){let n=t,{selection:r}=n,i=ie(n,["selection"]);return k(x({},e),{extent:k(x({},i),{param:r})})}return e}function zF(e,t){let n=r=>h4(r,i=>{var o;let a=t.emptySelections[i]??!0,s={param:i,empty:a};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(s),s});return e.selection?n(e.selection):h4(e.test||e.filter,r=>r.selection?n(r.selection):r)}var jf=class extends D4{map(t,n){let r=n.selections??[];if(t.params&&!Cr(t)){let i=[];for(let o of t.params)Pf(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){let r=n.selections;if(!r||!r.length)return t;let i=(n.path??[]).concat(t.name),o=[];for(let a of r)if(!a.views||!a.views.length)o.push(a);else for(let s of a.views)(Q(s)&&(s===t.name||i.includes(s))||F(s)&&s.map(c=>i.indexOf(c)).every((c,l,u)=>c!==-1&&(l===0||c>u[l-1])))&&o.push(a);return o.length&&(t.params=o),t}};for(let e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){let t=jf.prototype[e];jf.prototype[e]=function(n,r){return t.call(this,n,eke(n,r))}}function eke(e,t){return e.name?k(x({},t),{path:(t.path??[]).concat(e.name)}):t}function MM(e,t){t===void 0&&(t=dM(e.config));let n=ike(e,t),{width:r,height:i}=e,o=oke(n,{width:r,height:i,autosize:e.autosize},t);return x(x({},n),o?{autosize:o}:{})}var tke=new yM,nke=new bM,rke=new jf;function ike(e,t={}){let n={config:t};return rke.map(tke.map(nke.map(e,n),n),n)}function U1e(e){return Q(e)?{type:e}:e??{}}function oke(e,t,n){let{width:r,height:i}=t,o=Cr(e)||Bc(e),a={};o?r=="container"&&i=="container"?(a.type="fit",a.contains="padding"):r=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(r=="container"&&(U(O.containerSizeNonSingle("width")),r=void 0),i=="container"&&(U(O.containerSizeNonSingle("height")),i=void 0));let s=x(x(x({type:"pad"},a),n?U1e(n.autosize):{}),U1e(e.autosize));if(s.type==="fit"&&!o&&(U(O.FIT_NON_SINGLE),s.type="pad"),r=="container"&&!(s.type=="fit"||s.type=="fit-x")&&U(O.containerSizeNotCompatibleWithAutosize("width")),i=="container"&&!(s.type=="fit"||s.type=="fit-y")&&U(O.containerSizeNotCompatibleWithAutosize("height")),!kr(s,{type:"pad"}))return s}function j1e(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function q1e(e){return e?`fit-${y4(e)}`:"fit"}var ake=["background","padding"];function HF(e,t){let n={};for(let r of ake)e&&e[r]!==void 0&&(n[r]=Rr(e[r]));return t&&(n.params=e.params),n}var Fi=class e{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new e(le(this.explicit),le(this.implicit))}combine(){return x(x({},this.explicit),this.implicit)}get(t){return it(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(let n of R(t.combine())){let r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}};function c2(e){return{explicit:!0,value:e}}function Ri(e){return{explicit:!1,value:e}}function wM(e){return(t,n,r,i)=>{let o=e(t.value,n.value);return o>0?t:o<0?n:qf(t,n,r,i)}}function qf(e,t,n,r){return e.explicit&&t.explicit&&U(O.mergeConflictingProperty(n,r,e.value,t.value)),e}function q1(e,t,n,r,i=qf){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:kr(e.value,t.value)?e:i(e,t,n,r)}var SM=class extends Fi{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){let t=super.clone();return t.parseNothing=this.parseNothing,t}};function Uc(e){return"url"in e}function A0(e){return"values"in e}function EM(e){return"name"in e&&!Uc(e)&&!A0(e)&&!la(e)}function la(e){return e&&(LF(e)||AF(e)||Eh(e))}function LF(e){return"sequence"in e}function AF(e){return"sphere"in e}function Eh(e){return"graticule"in e}var yt=function(e){return e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e}(yt||{});function VF(e){let o=e,{signals:t,hasLegend:n,index:r}=o,i=ie(o,["signals","hasLegend","index"]);return i.field=ar(i.field),i}function jc(e,t=!0,n=An){if(F(e)){let r=e.map(i=>jc(i,t,n));return t?`[${r.join(", ")}]`:r}else if(o2(e))return n(t?oa(e):Ire(e));return t?n(ft(e)):e}function G1e(e,t){for(let n of tn(e.component.selection??{})){let r=n.name,i=`${r}${h1}, ${n.resolve==="global"?"true":`{unit: ${fa(e)}}`}`;for(let o of Gf)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+Z1e,on:[{events:{signal:n.name+h1},update:`modify(${Z(n.name+ua)}, ${i})`}]})}return _F(t)}function W1e(e,t){if(e.component.selection&&R(e.component.selection).length){let n=Z(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Hi("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return _F(t)}function Y1e(e,t){let n=!1;for(let r of tn(e.component.selection??{})){let i=r.name,o=Z(i+ua);if(t.filter(s=>s.name===i).length===0){let s=r.resolve==="global"?"union":r.resolve,c=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${DM}(${o}, ${Z(s)}${c}`})}n=!0;for(let s of Gf)s.defined(r)&&s.topLevelSignals&&(t=s.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),_F(t)}function X1e(e,t){let n=[...t],r=fa(e,{escape:!1});for(let i of tn(e.component.selection??{})){let o={name:i.name+ua};if(i.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:ui}}]),i.init){let s=i.project.items.map(VF);o.values=i.project.hasSelectionId?i.init.map(c=>({unit:r,[ui]:jc(c,!1)[0]})):i.init.map(c=>({unit:r,fields:s,values:jc(c,!1)}))}n.filter(s=>s.name===i.name+ua).length||n.push(o)}return n}function NF(e,t){for(let n of tn(e.component.selection??{}))for(let r of Gf)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Q1e(e,t){for(let n of e.children)xt(n)&&(t=NF(n,t));return t}function K1e(e,t,n,r){let i=zM(e,t.param,t);return{signal:Rn(n.get("type"))&&F(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function _F(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}var He=class{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){U(O.ADD_SAME_CHILD_TWICE);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){let n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(let n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){let n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){let t=this._parent,n=t.parent;for(let i of this._children)i.parent=t;this._children=[],t.removeChild(this);let r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}},En=class extends He{clone(){let t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${EI()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}};function kF(e){return e.as!==void 0}function J1e(e){return`${e}_end`}var l2=class e extends He{clone(){return new e(null,le(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){let r=n.reduceFieldDef((i,o,a)=>{let{field:s,timeUnit:c}=o;if(c){let l;if(aa(c)){if(xt(n)){let{mark:u,markDef:f,config:d}=n,p=U1({fieldDef:o,markDef:f,config:d});(Tc(u)||p)&&(l={timeUnit:on(c),field:s})}}else l={as:K(o,{forAs:!0}),field:s,timeUnit:c};if(xt(n)){let{mark:u,markDef:f,config:d}=n,p=U1({fieldDef:o,markDef:f,config:d});Tc(u)&&vt(a)&&p!==.5&&(l.rectBandPosition=p)}l&&(i[xe(l)]=l)}return i},{});return Ge(r)?null:new e(t,r)}static makeFromTransform(t,n){let s=x({},n),{timeUnit:r}=s,i=ie(s,["timeUnit"]),o=on(r),a=k(x({},i),{timeUnit:o});return new e(t,{[xe(a)]:a})}merge(t){this.timeUnits=x({},this.timeUnits);for(let n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(let n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){let n={};for(let[r,i]of F1(this.timeUnits)){let o=kF(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(tn(this.timeUnits).map(t=>kF(t)?t.as:J1e(t.field)))}dependentFields(){return new Set(tn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${xe(this.timeUnits)}`}assemble(){let t=[];for(let r of tn(this.timeUnits)){let{rectBandPosition:i}=r,o=on(r.timeUnit);if(kF(r)){let{field:a,as:s}=r,n=o,{unit:c,utc:l}=n,u=ie(n,["unit","utc"]),f=[s,`${s}_end`];t.push(k(x(x(x({field:ar(a),type:"timeunit"},c?{units:Hf(c)}:{}),l?{timezone:"utc"}:{}),u),{as:f})),t.push(...eoe(f,i,o))}else if(r){let{field:a}=r,s=a.replaceAll("\\.","."),c=noe({timeUnit:o,field:s}),l=J1e(s);t.push({type:"formula",expr:c,as:l}),t.push(...eoe([s,l],i,o))}}return t}},V0="offsetted_rect_start",N0="offsetted_rect_end";function noe({timeUnit:e,field:t,reverse:n}){let{unit:r,utc:i}=e,o=UI(r),{part:a,step:s}=qI(o,e.step);return`${i?"utcOffset":"timeOffset"}('${a}', datum['${t}'], ${n?-s:s})`}function eoe([e,t],n,r){if(n!==void 0&&n!==.5){let i=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:toe([noe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${V0}`},{type:"formula",expr:toe([i,o],n+.5),as:`${e}_${N0}`}]}return[]}function toe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}var qc="_tuple_fields",TF=class{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}},ske={defined:()=>!0,parse:(e,t,n)=>{let r=t.name,i=t.project??(t.project=new TF),o={},a={},s=new Set,c=(h,m)=>{let g=m==="visual"?h.channel:h.field,v=ut(`${r}_${g}`);for(let y=1;s.has(v);y++)v=ut(`${r}_${g}_${y}`);return s.add(v),{[m]:v}},l=t.type,u=e.config.selection[l],f=n.value!==void 0?te(n.value):null,{fields:d,encodings:p}=ne(n.select)?n.select:{};if(!d&&!p&&f){for(let h of f)if(ne(h))for(let m of R(h))ore(m)?(p||(p=[])).push(m):l==="interval"?(U(O.INTERVAL_INITIALIZED_WITH_POS),p=u.encodings):(d??(d=[])).push(m)}!d&&!p&&(p=u.encodings,"fields"in u&&(d=u.fields));for(let h of p??[]){let m=e.fieldDef(h);if(m){let g=m.field;if(m.aggregate){U(O.cannotProjectAggregate(h,m.aggregate));continue}else if(!g){U(O.cannotProjectOnChannelWithoutField(h));continue}if(m.timeUnit&&!aa(m.timeUnit)){g=e.vgField(h);let v={timeUnit:m.timeUnit,as:g,field:m.field};a[xe(v)]=v}if(!o[g]){let v=l==="interval"&&Fr(h)&&Rn(e.getScaleComponent(h).get("type"))?"R":m.bin?"R-RE":"E",y={field:g,channel:h,type:v,index:i.items.length};y.signals=x(x({},c(y,"data")),c(y,"visual")),i.items.push(o[g]=y),i.hasField[g]=o[g],i.hasSelectionId=i.hasSelectionId||g===ui,hb(h)?(y.geoChannel=h,y.channel=pb(h),i.hasChannel[y.channel]=o[g]):i.hasChannel[h]=o[g]}}else U(O.cannotProjectOnChannelWithoutField(h))}for(let h of d??[]){if(i.hasField[h])continue;let m={type:"E",field:h,index:i.items.length};m.signals=x({},c(m,"data")),i.items.push(m),i.hasField[h]=m,i.hasSelectionId=i.hasSelectionId||h===ui}f&&(t.init=f.map(h=>i.items.map(m=>ne(h)?h[m.geoChannel||m.channel]!==void 0?h[m.geoChannel||m.channel]:h[m.field]:h))),Ge(a)||(i.timeUnit=new l2(null,a))},signals:(e,t,n)=>{let r=t.name+qc;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(VF)})}},roe=ske;var cke={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{let n=t.scales=[];for(let r of t.project.items){let i=r.channel;if(!Fr(i))continue;let o=e.getScaleComponent(i),a=o?o.get("type"):void 0;if(!o||!Rn(a)){U(O.SCALE_BINDINGS_CONTINUOUS);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{let r=t.scales.filter(a=>n.filter(s=>s.name===a.signals.data).length===0);if(!e.parent||ioe(e)||r.length===0)return n;let i=n.filter(a=>a.name===t.name)[0],o=i.update;if(o.indexOf(DM)>=0)i.update=`{${r.map(a=>`${Z(ar(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(let a of r){let s=`${Z(ar(a.field))}: ${a.signals.data}`;o.includes(s)||(o=`${o.substring(0,o.length-1)}, ${s}}`)}i.update=o}return n.concat(r.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!ioe(e))for(let r of t.scales){let i=n.filter(o=>o.name===r.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}},Mo=cke;function Dh(e,t){return`domain(${Z(e.scaleName(t))})`}function ioe(e){return e.parent&&u2(e.parent)&&!e.parent.parent}var Gc="_brush",ooe="_scale_trigger",zh="geo_interval_init_tick",aoe="_init",lke="_center",uke={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){let i=x({},ne(n.select)?n.select:{});i.fields=[ui],i.encodings||(i.encodings=n.value?R(n.value):[ai,oi]),n.select=x({type:"interval"},i)}if(t.translate&&!Mo.defined(t)){let i=`!event.item || event.item.mark.name !== ${Z(t.name+Gc)}`;for(let o of t.events){if(!o.between){U(`${o} is not an ordered event stream for interval selections.`);continue}let a=te((r=o.between[0]).filter??(r.filter=[]));a.indexOf(i)<0&&a.push(i)}}},signals:(e,t,n)=>{let r=t.name,i=r+h1,o=tn(t.project.hasChannel).filter(s=>s.channel===gt||s.channel===nn),a=t.init?t.init[0]:null;if(n.push(...o.reduce((s,c)=>s.concat(fke(e,t,c,a&&a[c.index])),[])),e.hasProjection){let s=Z(e.projectionName()),c=e.projectionName()+lke,{x:l,y:u}=t.project.hasChannel,f=l&&l.signals.visual,d=u&&u.signals.visual,p=l?a&&a[l.index]:`${c}[0]`,h=u?a&&a[u.index]:`${c}[1]`,m=M=>e.getSizeSignalRef(M).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;a&&(n.unshift({name:r+aoe,init:`[scale(${s}, [${l?p[0]:p}, ${u?h[0]:h}]), scale(${s}, [${l?p[1]:p}, ${u?h[1]:h}])]`}),(!l||!u)&&(n.find(S=>S.name===c)||n.unshift({name:c,update:`invert(${s}, [${m("width")}/2, ${m("height")}/2])`})));let v=`intersect(${g}, {markname: ${Z(e.getName("marks"))}}, unit.mark)`,y=`{unit: ${fa(e)}}`,C=`vlSelectionTuples(${v}, ${y})`,b=o.map(M=>M.signals.visual);return n.concat({name:i,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...a?[{signal:zh}]:[]],update:C}]})}else{if(!Mo.defined(t)){let l=r+ooe,u=o.map(f=>{let d=f.channel,{data:p,visual:h}=f.signals,m=Z(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),v=Rn(g)?"+":"";return`(!isArray(${p}) || (${v}invert(${m}, ${h})[0] === ${v}${p}[0] && ${v}invert(${m}, ${h})[1] === ${v}${p}[1]))`});u.length&&n.push({name:l,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:u.join(" && ")+` ? ${l} : {}`}]})}let s=o.map(l=>l.signals.data),c=`unit: ${fa(e)}, fields: ${r+qc}, values`;return n.concat(x(x({name:i},a?{init:`{${c}: ${jc(a)}}`}:{}),s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${c}: [${s}]} : null`}]}:{}))}},topLevelSignals:(e,t,n)=>(xt(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===zh).length||n.unshift({name:zh,value:null,on:[{events:"timer{1}",update:`${zh} === null ? {} : ${zh}`}]})),n),marks:(e,t,n)=>{let r=t.name,{x:i,y:o}=t.project.hasChannel,a=i?.signals.visual,s=o?.signals.visual,c=`data(${Z(t.name+ua)})`;if(Mo.defined(t)||!i&&!o)return n;let l={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:o!==void 0?{signal:`${s}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${s}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(let g of R(l))l[g]=[x({test:`${c}.length && ${c}[0].unit === ${fa(e)}`},l[g]),{value:0}];let m=t.mark,{fill:u,fillOpacity:f,cursor:d}=m,p=ie(m,["fill","fillOpacity","cursor"]),h=R(p).reduce((g,v)=>(g[v]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,o!==void 0&&`${s}[0] !== ${s}[1]`].filter(y=>y).join(" && "),value:p[v]},{value:null}],g),{});return[{name:`${r+Gc}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:u},fillOpacity:{value:f}},update:l}},...n,{name:r+Gc,type:"rect",clip:!0,encode:{enter:k(x({},d?{cursor:{value:d}}:{}),{fill:{value:"transparent"}}),update:x(x({},l),h)}}]}},soe=uke;function fke(e,t,n,r){let i=!e.hasProjection,o=n.channel,a=n.signals.visual,s=Z(i?e.scaleName(o):e.projectionName()),c=d=>`scale(${s}, ${d})`,l=e.getSizeSignalRef(o===gt?"width":"height").signal,u=`${o}(unit)`,f=t.events.reduce((d,p)=>[...d,{events:p.between[0],update:`[${u}, ${u}]`},{events:p,update:`[${a}[0], clamp(${u}, 0, ${l})]`}],[]);if(i){let d=n.signals.data,p=Mo.defined(t),h=e.getScaleComponent(o),m=h?h.get("type"):void 0,g=r?{init:jc(r,!0,c)}:{value:[]};return f.push({events:{signal:t.name+ooe},update:Rn(m)?`[${c(`${d}[0]`)}, ${c(`${d}[1]`)}]`:"[0, 0]"}),p?[{name:d,on:[]}]:[k(x({name:a},g),{on:f}),k(x({name:d},r?{init:jc(r)}:{}),{on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${s}, ${a})`}]})]}else{let d=o===gt?0:1,p=t.name+aoe,h=r?{init:`[${p}[0][${d}], ${p}[1][${d}]]`}:{value:[]};return[k(x({name:a},h),{on:f})]}}var dke={defined:e=>e.type==="point",signals:(e,t,n)=>{let r=t.name,i=r+qc,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=tn(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Gc):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),c=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${s?` && ${s}`:""}`,l=`unit: ${fa(e)}, `;if(t.project.hasSelectionId)l+=`${ui}: ${a}[${Z(ui)}]`;else{let f=o.items.map(d=>e.fieldDef(d.channel)?.bin?`[${a}[${Z(e.vgField(d.channel,{}))}], ${a}[${Z(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${a}[${Z(d.field)}]`).join(", ");l+=`fields: ${i}, values: [${f}]`}let u=t.events;return n.concat([{name:r+h1,on:u?[{events:u,update:`${c} ? {${l}} : null`,force:!0}]:[]}])}},coe=dke;function G1(e,t,n,r){let i=M4(t)&&t.condition,o=r(t);if(i){let s=te(i).map(c=>{let l=r(c);if(Die(c)){let{param:u,empty:f}=c,d=HM(e,{param:u,empty:f});return x({test:d},l)}else{let u=_0(e,c.test);return x({test:u},l)}});return{[n]:[...s,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function z4(e,t="text"){let n=e.encoding[t];return G1(e,n,t,r=>Wf(r,e.config))}function Wf(e,t,n="datum"){if(e){if(cr(e))return tt(e.value);if(Ne(e)){let{format:r,formatType:i}=Ff(e);return kf({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Yf(e,t={}){let{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if(F(a))return{tooltip:IF({tooltip:a},o,i,t)};{let s=t.reactiveGeom?"datum.datum":"datum";return G1(e,a,"tooltip",c=>{let l=Wf(c,i,s);if(l)return l;if(c===null)return;let u=Be("tooltip",r,i);if(u===!0&&(u={content:"encoding"}),Q(u))return{value:u};if(ne(u))return ae(u)?u:u.content==="encoding"?IF(n,o,i,t):{signal:s}})}}function FF(e,t,n,{reactiveGeom:r}={}){let i=x(x({},n),n.tooltipFormat),o={},a=r?"datum.datum":"datum",s=[];function c(u,f){let d=yo(f),p=Sn(u)?u:k(x({},u),{type:e[d].type}),h=p.title||gh(p,i),m=te(h).join(", ").replaceAll(/"/g,'\\"'),g;if(vt(f)){let v=f==="x"?"x2":"y2",y=li(e[v]);if(rn(p.bin)&&y){let C=K(p,{expr:a}),b=K(y,{expr:a}),{format:M,formatType:S}=Ff(p);g=H0(C,b,M,S,i),o[v]=!0}}if((vt(f)||f===ii||f===Ai)&&t&&t.fieldChannel===f&&t.offset==="normalize"){let{format:v,formatType:y}=Ff(p);g=kf({fieldOrDatumDef:p,format:v,formatType:y,expr:a,config:i,normalizeStack:!0}).signal}g??(g=Wf(p,i,a).signal),s.push({channel:f,key:m,value:g})}yh(e,(u,f)=>{Y(u)?c(u,f):If(u)&&c(u.condition,f)});let l={};for(let{channel:u,key:f,value:d}of s)!o[u]&&!l[f]&&(l[f]=d);return l}function IF(e,t,n,{reactiveGeom:r}={}){let i=FF(e,t,n,{reactiveGeom:r}),o=F1(i).map(([a,s])=>`"${a}": ${s}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function RF(e){let{markDef:t,config:n}=e,r=Be("aria",t,n);return r===!1?{}:x(x(x({},r?{aria:r}:{}),pke(e)),hke(e))}function pke(e){let{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};let i=Be("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in Ere?{}:{ariaRoleDescription:{value:t}}}function hke(e){let{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return G1(e,o,"description",c=>Wf(c,e.config));let a=Be("description",n,r);if(a!=null)return{description:tt(a)};if(r.aria===!1)return{};let s=FF(t,i,r);if(!Ge(s))return{description:{signal:F1(s).map(([c,l],u)=>`"${u>0?"; ":""}${c}: " + (${l})`).join(" + ")}}}function jt(e,t,n={}){let{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n,{defaultRef:s,defaultValue:c}=n;s===void 0&&(c??(c=Be(e,r,o,{vgChannel:a,ignoreVgConfig:!0})),c!==void 0&&(s=tt(c)));let l=i[e];return G1(t,l,a??e,u=>ph({channel:e,channelDef:u,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s}))}function Xf(e,t={filled:void 0}){let{markDef:n,encoding:r,config:i}=e,{type:o}=n,a=t.filled??Be("filled",n,i),s=Ae(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,c=Be(a===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[a===!0&&"color"]??s,l=Be(a===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[a===!1&&"color"],u=a?"fill":"stroke",f=x(x({},c?{fill:tt(c)}:{}),l?{stroke:tt(l)}:{});return n.color&&(a?n.fill:n.stroke)&&U(O.droppingColor("property",{fill:"fill"in n,stroke:"stroke"in n})),x(x(x(x({},f),jt("color",e,{vgChannel:u,defaultValue:a?c:l})),jt("fill",e,{defaultValue:r.fill?c:void 0})),jt("stroke",e,{defaultValue:r.stroke?l:void 0}))}function loe(e){let{encoding:t,mark:n}=e,r=t.order;return!Ti(n)&&cr(r)?G1(e,r,"zindex",i=>tt(i.value)):{}}function Wc({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){let o=`${e}Offset`,a=t[o],s=n[o];if((o==="xOffset"||o==="yOffset")&&s)return{offsetType:"encoding",offset:ph({channel:o,channelDef:s,markDef:t,config:r?.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:tt(a),bandPosition:i})};let c=t[o];return c?{offsetType:"visual",offset:c}:{}}function yn(e,t,{defaultPos:n,vgChannel:r}){let{encoding:i,markDef:o,config:a,stack:s}=t,c=i[e],l=i[Ir(e)],u=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:p}=Wc({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),h=Hh({model:t,defaultPos:n,channel:e,scaleName:u,scale:f}),m=!c&&vt(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:mke({channel:e,channelDef:c,channel2Def:l,markDef:o,config:a,scaleName:u,scale:f,stack:s,offset:d,defaultRef:h,bandPosition:p==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function mke(e){let{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(Ne(n)&&i&&t===i.fieldChannel){if(Y(n)){let s=n.bandPosition;if(s===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(s=.5),s!==void 0)return Nf({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:s,offset:o})}return fs(n,r,{suffix:"end"},{offset:o})}return _f(e)}function Hh({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){let{markDef:o,config:a}=e;return()=>{let s=yo(n),c=r2(n),l=Be(n,o,a,{vgChannel:c});if(l!==void 0)return z0(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){let u=i.get("type");if(!Ae([Or.LOG,Or.TIME,Or.UTC],u)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return s==="y"?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{let u=e[wn(n)];return k(x({},u),{mult:.5})}}}}var gke={left:"x",center:"xc",right:"x2"},vke={top:"y",middle:"yc",bottom:"y2"};function LM(e,t,n,r="middle"){if(e==="radius"||e==="theta")return r2(e);let i=e==="x"?"align":"baseline",o=Be(i,t,n),a;return ae(o)?(U(O.rangeMarkAlignmentCannotBeExpression(i)),a=void 0):a=o,e==="x"?gke[a||(r==="top"?"left":"center")]:vke[a||r]}function H4(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Lh(e,t,{defaultPos:n,defaultPos2:r}):yn(e,t,{defaultPos:n})}function Lh(e,t,{defaultPos:n,defaultPos2:r}){let{markDef:i,config:o}=t,a=Ir(e),s=wn(e),c=yke(t,r,a),l=c[s]?LM(e,i,o):r2(e);return x(x({},yn(e,t,{defaultPos:n,vgChannel:l})),c)}function yke(e,t,n){let{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,c=yo(n),l=wn(n),u=r2(n),f=r[c],d=e.scaleName(c),p=e.getScaleComponent(c),{offset:h}=n in r||n in o?Wc({channel:n,markDef:o,encoding:r,model:e}):Wc({channel:c,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){let g=wn(n),v=e.markDef[g];return v!=null?{[g]:{value:v}}:{[u]:{field:e.getName(n)}}}let m=xke({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:s,scaleName:d,scale:p,stack:a,offset:h,defaultRef:void 0});return m!==void 0?{[u]:m}:AM(n,o)||AM(n,{[n]:rh(n,o,s.style),[l]:rh(l,o,s.style)})||AM(n,s[i])||AM(n,s.mark)||{[u]:Hh({model:e,defaultPos:t,channel:n,scaleName:d,scale:p})()}}function xke({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:c,defaultRef:l}){return Ne(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?fs(t,o,{suffix:"start"},{offset:c}):_f({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:c,defaultRef:l})}function AM(e,t){let n=wn(e),r=r2(e);if(t[r]!==void 0)return{[r]:z0(e,t[r])};if(t[e]!==void 0)return{[r]:z0(e,t[e])};if(t[n]){let i=t[n];if(us(i))U(O.relativeBandSizeNotSupported(n));else return{[n]:z0(e,i)}}}function W1(e,t){let{config:n,encoding:r,markDef:i}=e,o=i.type,a=Ir(t),s=wn(t),c=r[t],l=r[a],u=e.getScaleComponent(t),f=u?u.get("type"):void 0,d=i.orient,p=r[s]??r.size??Be("size",i,n,{vgChannel:s}),h=VI(t),m=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Y(c)&&(et(c.bin)||rn(c.bin)||c.timeUnit&&!l)&&!(p&&!us(p))&&!r[h]&&!Ot(f)?Mke({fieldDef:c,fieldDef2:l,channel:t,model:e}):(Ne(c)&&Ot(f)||m)&&!l?bke(c,t,e):Lh(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Cke(e,t,n,r,i,o,a){if(us(i))if(n){let c=n.get("type");if(c==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);let u=Co("minBandSize",{type:a},r);return{signal:u?`max(${d1(u)}, ${l})`:l}}else i.band!==1&&(U(O.cannotUseRelativeBandSizeWithNonBandScale(c)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(ae(i))return i;if(i)return{value:i}}if(n){let c=n.get("range");if(ki(c)&&Oe(c.step))return{value:c.step-2}}if(!o){let{bandPaddingInner:c,barBandPaddingInner:l,rectBandPaddingInner:u}=r.scale,f=it(c,a==="bar"?l:u);if(ae(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Oe(f))return{signal:`${1-f} * ${e}`}}return{value:L0(r.view,e)-2}}function bke(e,t,n){let{markDef:r,encoding:i,config:o,stack:a}=n,s=r.orient,c=n.scaleName(t),l=n.getScaleComponent(t),u=wn(t),f=Ir(t),d=VI(t),p=n.scaleName(d),h=n.getScaleComponent(wf(t)),m=s==="horizontal"&&t==="y"||s==="vertical"&&t==="x",g;(i.size||r.size)&&(m?g=jt("size",n,{vgChannel:u,defaultRef:tt(r.size)}):U(O.cannotApplySizeToNonOrientedMark(r.type)));let v=!!g,y=tF({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(l||h)?.get("type"),useVlSizeChannel:m});g=g||{[u]:Cke(u,p||c,h||l,o,y,!!e,r.type)};let C=(l||h)?.get("type")==="band"&&us(y)&&!v?"top":"middle",b=LM(t,r,o,C),M=b==="xc"||b==="yc",{offset:S,offsetType:w}=Wc({channel:t,markDef:r,encoding:i,model:n,bandPosition:M?.5:0}),E=_f({channel:t,channelDef:e,markDef:r,config:o,scaleName:c,scale:l,stack:a,offset:S,defaultRef:Hh({model:n,defaultPos:"mid",channel:t,scaleName:c,scale:l}),bandPosition:M?w==="encoding"?0:.5:ae(y)?{signal:`(1-${y})/2`}:us(y)?(1-y.band)/2:0});if(u)return x({[b]:E},g);{let D=r2(f),H=g[u],A=S?k(x({},H),{offset:S}):H;return{[b]:E,[D]:F(E)?[E[0],k(x({},E[1]),{offset:A})]:k(x({},E),{offset:A})}}}function uoe(e,t,n,r,i,o,a){if(zI(e))return 0;let s=e==="x"||e==="y2",c=s?-t/2:t/2;if(ae(n)||ae(i)||ae(r)||o){let l=d1(n),u=d1(i),f=d1(r),d=d1(o),h=o?`(${a} < ${d} ? ${s?"":"-"}0.5 * (${d} - (${a})) : ${c})`:c,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",v=u?`(${u} + ${h})`:h;return{signal:m+g+v}}else return i=i||0,r+(n?-i-c:+i+c)}function Mke({fieldDef:e,fieldDef2:t,channel:n,model:r}){let{config:i,markDef:o,encoding:a}=r,s=r.getScaleComponent(n),c=r.scaleName(n),l=s?s.get("type"):void 0,u=s.get("reverse"),f=tF({channel:n,fieldDef:e,markDef:o,config:i,scaleType:l}),p=r.component.axes[n]?.[0]?.get("translate")??.5,h=vt(n)?Be("binSpacing",o,i)??0:0,m=Ir(n),g=r2(n),v=r2(m),y=Co("minBandSize",o,i),{offset:C}=Wc({channel:n,markDef:o,encoding:a,model:r,bandPosition:0}),{offset:b}=Wc({channel:m,markDef:o,encoding:a,model:r,bandPosition:0}),M=bie({fieldDef:e,scaleName:c}),S=uoe(n,h,u,p,C,y,M),w=uoe(m,h,u,p,b??C,y,M),E=ae(f)?{signal:`(1-${f.signal})/2`}:us(f)?(1-f.band)/2:.5,D=U1({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(et(e.bin)||e.timeUnit){let H=e.timeUnit&&D!==.5;return{[v]:foe({fieldDef:e,scaleName:c,bandPosition:E,offset:w,useRectOffsetField:H}),[g]:foe({fieldDef:e,scaleName:c,bandPosition:ae(E)?{signal:`1-${E.signal}`}:1-E,offset:S,useRectOffsetField:H})}}else if(rn(e.bin)){let H=fs(e,c,{},{offset:w});if(Y(t))return{[v]:H,[g]:fs(t,c,{},{offset:S})};if(na(e.bin)&&e.bin.step)return{[v]:H,[g]:{signal:`scale("${c}", ${K(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}U(O.channelRequiredForBinned(m))}function foe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return Nf(x({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r},i?{startSuffix:V0,endSuffix:N0}:{}))}var wke=new Set(["aria","width","height"]);function xn(e,t){let{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Xf(e):{};return x(x(x(x(x(x(x(x(x(x(x(x({},Ske(e.markDef,t)),doe(e,"fill",n)),doe(e,"stroke",r)),jt("opacity",e)),jt("fillOpacity",e)),jt("strokeOpacity",e)),jt("strokeWidth",e)),jt("strokeDash",e)),loe(e)),Yf(e)),z4(e,"href")),RF(e))}function doe(e,t,n){let{config:r,mark:i,markDef:o}=e;if(Be("invalid",o,r)==="hide"&&n&&!Ti(i)){let s=Eke(e,{invalid:!0,channels:x4});if(s)return{[t]:[{test:s,value:null},...te(n)]}}return n?{[t]:n}:{}}function Ske(e,t){return Sre.reduce((n,r)=>(!wke.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=tt(e[r])),n),{})}function Eke(e,{invalid:t=!1,channels:n}){let r=n.reduce((o,a)=>{let s=e.getScaleComponent(a);if(s){let c=s.get("type"),l=e.vgField(a,{expr:"datum"});l&&Rn(c)&&(o[l]=!0)}return o},{}),i=R(r);if(i.length>0){let o=t?"||":"&&";return i.map(a=>dh(a,t)).join(` ${o} `)}}function Qf(e){let{config:t,markDef:n}=e;if(Be("invalid",n,t)){let i=Dke(e,{channels:xr});if(i)return{defined:{signal:i}}}return{}}function Dke(e,{invalid:t=!1,channels:n}){let r=n.reduce((o,a)=>{let s=e.getScaleComponent(a);if(s){let c=s.get("type"),l=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});l&&Rn(c)&&(o[l]=!0)}return o},{}),i=R(r);if(i.length>0){let o=t?"||":"&&";return i.map(a=>dh(a,t)).join(` ${o} `)}}function VM(e,t){if(t!==void 0)return{[e]:tt(t)}}var OF="voronoi",zke={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(let n of t.events)n.markname=e.getName(OF)},marks:(e,t,n)=>{let{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Ti(o))return U(O.nearestNotSupportForContinuous(o)),n;let a={name:e.getName(OF),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:x({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},Yf(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},s=0,c=!1;return n.forEach((l,u)=>{let f=l.name??"";f===e.component.mark[0].name?s=u:f.indexOf(OF)>=0&&(c=!0)}),c||n.splice(s+1,0,a),n}},NM=zke;var Hke={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!bh(e.bind),parse:(e,t,n)=>kM(t,n),topLevelSignals:(e,t,n)=>{let r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],s=NM.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((c,l)=>{let u=ut(`${r}_${c.field}`);n.filter(d=>d.name===u).length||n.unshift(k(x({name:u},a?{init:jc(a[l])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${Z(c.field)}] : null`}]:[],bind:o[c.field]??o[c.channel]??o}))}),n},signals:(e,t,n)=>{let r=t.name,i=t.project,o=n.filter(l=>l.name===r+h1)[0],a=r+qc,s=i.items.map(l=>ut(`${r}_${l.field}`)),c=s.map(l=>`${l} !== null`).join(" && ");return s.length&&(o.update=`${c} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},_M=Hke;var Kf="_toggle",Lke={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Kf,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{let n=t.name+h1,r=t.name+Kf;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${fa(e)}}, `)+`${r} ? ${n} : null`}},TM=Lke;var Ake={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Q(t.clear)?Hi(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(_M.defined(t))for(let r of t.project.items){let i=n.findIndex(o=>o.name===ut(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(let i of t.project.items){let o=n.findIndex(a=>a.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){let a=n.findIndex(s=>s.name===i.signals.data);r(a,"null")}}else{let i=n.findIndex(o=>o.name===t.name+h1);r(i,"null"),TM.defined(t)&&(i=n.findIndex(o=>o.name===t.name+Kf),r(i,"false"))}return n}},poe=Ake;var hoe={defined:e=>{let t=e.resolve==="global"&&e.bind&&bh(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ui;return t&&!n&&U(O.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),t&&n},parse:(e,t,n)=>{let r=le(n);if(r.select=Q(r.select)?{type:r.select,toggle:t.toggle}:k(x({},r.select),{toggle:t.toggle}),kM(t,r),ne(n.select)&&(n.select.on||n.select.clear)){let a='event.item && indexof(event.item.mark.role, "legend") < 0';for(let s of t.events)s.filter=te(s.filter??[]),s.filter.includes(a)||s.filter.push(a)}let i=uM(t.bind)?t.bind.legend:"click",o=Q(i)?Hi(i,"view"):te(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{let r=t.name,i=uM(t.bind)&&t.bind.legend,o=a=>s=>{let c=le(s);return c.markname=a,c};for(let a of t.project.items){if(!a.hasLegend)continue;let s=`${ut(a.field)}_legend`,c=`${r}_${s}`;if(n.filter(u=>u.name===c).length===0){let u=i.merge.map(o(`${s}_symbols`)).concat(i.merge.map(o(`${s}_labels`))).concat(i.merge.map(o(`${s}_entries`)));n.unshift(k(x({name:c},t.init?{}:{value:null}),{on:[{events:u,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${c}`,force:!0}]}))}}return n},signals:(e,t,n)=>{let r=t.name,i=t.project,o=n.find(d=>d.name===r+h1),a=r+qc,s=i.items.filter(d=>d.hasLegend).map(d=>ut(`${r}_${ut(d.field)}_legend`)),l=`${s.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map(d=>({signal:d})),update:l}):s.length>0&&(o.update=l,delete o.value,delete o.on);let u=n.find(d=>d.name===r+Kf),f=uM(t.bind)&&t.bind.legend;return u&&(t.events?u.on.push(k(x({},u.on[0]),{events:f})):u.on[0].events=f),n}},moe=hoe;function goe(e,t,n){let r=e.fieldDef(t)?.field;for(let i of tn(e.component.selection??{})){let o=i.project.hasField[r]??i.project.hasChannel[t];if(o&&hoe.defined(i)){let a=n.get("selections")??[];a.push(i.name),n.set("selections",a,!1),o.hasLegend=!0}}}var yoe="_translate_anchor",xoe="_translate_delta",Vke={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{let r=t.name,i=Mo.defined(t),o=r+yoe,{x:a,y:s}=t.project.hasChannel,c=Hi(t.translate,"scope");return i||(c=c.map(l=>(l.between[0].markname=r+Gc,l))),n.push({name:o,value:{},on:[{events:c.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?`, extent_x: ${i?Dh(e,gt):`slice(${a.signals.visual})`}`:"")+(s!==void 0?`, extent_y: ${i?Dh(e,nn):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+xoe,value:{},on:[{events:c,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),a!==void 0&&voe(e,t,a,"width",n),s!==void 0&&voe(e,t,s,"height",n),n}},Coe=Vke;function voe(e,t,n,r,i){let o=t.name,a=o+yoe,s=o+xoe,c=n.channel,l=Mo.defined(t),u=i.filter(M=>M.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(c),p=d&&d.get("type"),h=d&&d.get("reverse"),m=l?c===gt?h?"":"-":h?"-":"":"",g=`${a}.extent_${c}`,v=`${m}${s}.${c} / ${l?`${f}`:`span(${g})`}`,y=!l||!d?"panLinear":p==="log"?"panLog":p==="symlog"?"panSymlog":p==="pow"?"panPow":"panLinear",C=l?p==="pow"?`, ${d.get("exponent")??1}`:p==="symlog"?`, ${d.get("constant")??1}`:"":"",b=`${y}(${g}, ${v}${C})`;u.on.push({events:{signal:s},update:l?b:`clampRange(${b}, 0, ${f})`})}var Moe="_zoom_anchor",woe="_zoom_delta",Nke={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{let r=t.name,i=Mo.defined(t),o=r+woe,{x:a,y:s}=t.project.hasChannel,c=Z(e.scaleName(gt)),l=Z(e.scaleName(nn)),u=Hi(t.zoom,"scope");return i||(u=u.map(f=>(f.markname=r+Gc,f))),n.push({name:r+Moe,on:[{events:u,update:i?"{"+[c?`x: invert(${c}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:u,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&boe(e,t,a,"width",n),s!==void 0&&boe(e,t,s,"height",n),n}},Soe=Nke;function boe(e,t,n,r,i){let o=t.name,a=n.channel,s=Mo.defined(t),c=i.filter(y=>y.name===n.signals[s?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,u=e.getScaleComponent(a),f=u&&u.get("type"),d=s?Dh(e,a):c.name,p=o+woe,h=`${o}${Moe}.${a}`,m=!s||!u?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=s?f==="pow"?`, ${u.get("exponent")??1}`:f==="symlog"?`, ${u.get("constant")??1}`:"":"",v=`${m}(${d}, ${h}, ${p}${g})`;c.on.push({events:{signal:p},update:s?v:`clampRange(${v}, 0, ${l})`})}var ua="_store",h1="_tuple",Z1e="_modify";var DM="vlSelectionResolve",Gf=[coe,soe,roe,TM,_M,Mo,moe,poe,Coe,Soe,NM];function _ke(e){let t=e.parent;for(;t&&!$r(t);)t=t.parent;return t}function fa(e,{escape:t}={escape:!0}){let n=t?Z(e.name):e.name,r=_ke(e);if(r){let{facet:i}=r;for(let o of Tr)i[o]&&(n+=` + '__facet_${o}_' + (facet[${Z(r.vgField(o))}])`)}return n}function Ah(e){return tn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function kM(e,t){(Q(t.select)||!t.select.on)&&delete e.events,(Q(t.select)||!t.select.clear)&&delete e.clear,(Q(t.select)||!t.select.toggle)&&delete e.toggle}function PF(e){let t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...PF(e.object)),t.push(...PF(e.property))),t)}function Eoe(e){return e.object.type==="MemberExpression"?Eoe(e.object):e.object.name==="datum"}function IM(e){let t=af(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&Eoe(r)&&n.add(PF(r).slice(1).join("."))}),n}var ys=class e extends He{clone(){return new e(null,this.model,le(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=_0(this.model,this.filter,this),this._dependentFields=IM(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}};function Doe(e,t){let n={},r=e.config.selection;if(!t||!t.length)return n;for(let i of t){let o=ut(i.name),a=i.select,s=Q(a)?a:a.type,c=ne(a)?le(a):{type:s},l=r[s];for(let d in l)d==="fields"||d==="encodings"||(d==="mark"&&(c[d]=x(x({},l[d]),c[d])),(c[d]===void 0||c[d]===!0)&&(c[d]=le(l[d]??c[d])));let u=n[o]=k(x({},c),{name:o,type:s,init:i.value,bind:i.bind,events:Q(c.on)?Hi(c.on,"scope"):te(le(c.on))}),f=le(i);for(let d of Gf)d.defined(u)&&d.parse&&d.parse(e,u,f)}return n}function HM(e,t,n,r="datum"){let i=Q(t)?t:t.param,o=ut(i),a=Z(o+ua),s;try{s=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(s.project.timeUnit){let d=n??e.component.data.raw,p=s.project.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p}let c=s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=s.resolve==="global"?")":`, ${Z(s.resolve)})`,u=`${c}${a}, ${r}${l}`,f=`length(data(${a}))`;return t.empty===!1?`${f} && ${u}`:`!${f} || ${u}`}function zM(e,t,n){let r=ut(t),i=n.encoding,o=n.field,a;try{a=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=a.project.items[0].field,a.project.items.length>1&&U(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Z(o)}.`);else if(i&&!o){let s=a.project.items.filter(c=>c.channel===i);!s.length||s.length>1?(o=a.project.items[0].field,U((s.length?"Multiple ":"No ")+`matching ${Z(i)} encoding found for selection ${Z(n.param)}. Using "field": ${Z(o)}.`)):o=s[0].field}return`${a.name}[${Z(ar(o))}]`}function zoe(e,t){for(let[n,r]of F1(e.component.selection??{})){let i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new En(new ys(t,e,{param:n}),i,yt.Lookup,e.component.data.outputNodeRefCounts)}}function _0(e,t,n){return gf(t,r=>Q(r)?r:jre(r)?HM(e,r,n):Tb(r))}function kke(e,t){if(e)return F(e)&&!ra(e)?e.map(n=>gh(n,t)).join(", "):e}function $F(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function Zf(e,t,n,r={header:!1}){let f=e.combine(),{disable:i,orient:o,scale:a,labelExpr:s,title:c,zindex:l}=f,u=ie(f,["disable","orient","scale","labelExpr","title","zindex"]);if(!i){for(let p in u){let h=Tie[p],m=u[p];if(h&&h!==t&&h!=="both")delete u[p];else if(Pc(m)){let d=m,{condition:g}=d,v=ie(d,["condition"]),y=te(g),C=oF[p];if(C){let{vgProp:b,part:M}=C,S=[...y.map(w=>{let H=w,{test:E}=H,D=ie(H,["test"]);return x({test:_0(null,E)},D)}),v];$F(u,M,b,S),delete u[p]}else if(C===null){let b={signal:y.map(M=>{let E=M,{test:S}=E,w=ie(E,["test"]);return`${_0(null,S)} ? ${II(w)} : `}).join("")+II(v)};u[p]=b}}else if(ae(m)){let g=oF[p];if(g){let{vgProp:v,part:y}=g;$F(u,y,v,m),delete u[p]}}Ae(["labelAlign","labelBaseline"],p)&&u[p]===null&&delete u[p]}if(t==="grid"){if(!u.grid)return;if(u.encode){let{grid:p}=u.encode;u.encode=x({},p?{grid:p}:{}),Ge(u.encode)&&delete u.encode}return k(x({scale:a,orient:o},u),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:it(l,0)})}else{if(!r.header&&e.mainExtracted)return;if(s!==void 0){let h=s;u.encode?.labels?.update&&ae(u.encode.labels.update.text)&&(h=Z2(s,"datum.label",u.encode.labels.update.text.signal)),$F(u,"labels","text",{signal:h})}if(u.labelAlign===null&&delete u.labelAlign,u.encode){for(let h of Jb)e.hasAxisPart(h)||delete u.encode[h];Ge(u.encode)&&delete u.encode}let p=kke(c,n);return k(x(x(x({scale:a,orient:o,grid:!1},p?{title:p}:{}),u),n.aria===!1?{aria:!1}:{}),{zindex:it(l,0)})}}}function FM(e){let{axes:t}=e.component,n=[];for(let r of xr)if(t[r]){for(let i of t[r])if(!i.get("disable")&&!i.get("gridScale")){let o=r==="x"?"height":"width",a=e.getSizeSignalRef(o).signal;o!==a&&n.push({name:o,update:a})}}return n}function Hoe(e,t){let{x:n=[],y:r=[]}=e;return[...n.map(i=>Zf(i,"grid",t)),...r.map(i=>Zf(i,"grid",t)),...n.map(i=>Zf(i,"main",t)),...r.map(i=>Zf(i,"main",t))].filter(i=>i)}function Loe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){let o=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},s=t[n==="x"?"axisTop":"axisRight"]||{},c=new Set([...R(a),...R(s)]),l={};for(let u of c.values())l[u]={signal:`${r.signal} === "${o}" ? ${d1(a[u])} : ${d1(s[u])}`};return l}return t[i]})])}function Aoe(e,t,n,r){let i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:YI(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",a=ae(n)?"axisOrient":`axis${m4(n)}`,s=[...i,...i.map(l=>o+l.substr(4))],c=["axis",a,o];return{vlOnlyAxisConfig:Loe(s,r,e,n),vgAxisConfig:Loe(c,r,e,n),axisConfigStyle:Tke([...c,...s],r)}}function Tke(e,t){let n=[{}];for(let r of e){let i=t[r]?.style;if(i){i=te(i);for(let o of i)n.push(t.style[o])}}return Object.assign.apply(null,n)}function Vh(e,t,n,r={}){let i=RI(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(let o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(r[o]?.[e]!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}var UF={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Ike(n,e),gridScale:({model:e,channel:t})=>Fke(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||qF(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||jF(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Rke(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Oke(t.type,n,Y(t)&&!!t.timeUnit,Y(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{let o=e==="x"?"width":e==="y"?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??Pke({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},tickMinStep:$ke,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;let r=GF(t,n);if(r!==void 0)return r;let i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",a=t.fieldDef(o);return OI(i?[eF(i)]:[],Y(a)?[eF(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Bke(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Uke(n,t)};function Ike(e,t){return!Ot(e)&&Y(t)&&!et(t?.bin)&&!rn(t?.bin)}function Fke(e,t){let n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Voe(e,t,n,r,i){let o=t?.labelAngle;if(o!==void 0)return ae(o)?o:g4(o);{let{configValue:a}=Vh("labelAngle",r,t?.style,i);return a!==void 0?g4(a):n===gt&&Ae([ah,oh],e.type)&&!(Y(e)&&e.timeUnit)?270:void 0}}function BF(e){return`(((${e.signal} % 360) + 360) % 360)`}function jF(e,t,n,r){if(e!==void 0)if(n==="x"){if(ae(e)){let i=BF(e),o=ae(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(ae(t)){let i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(ae(e)){let i=BF(e),o=ae(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(ae(t)){let i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function qF(e,t,n){if(e===void 0)return;let r=n==="x",i=r?0:90,o=r?"bottom":"left";if(ae(e)){let a=BF(e),s=ae(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${a} + 90)`:a} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${s} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(ae(t)){let a=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${a} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function Rke(e,t){if(t==="x"&&Ae(["quantitative","temporal"],e))return!0}function Oke(e,t,n,r){if(n&&!ne(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Noe(e){return e==="x"?"bottom":"left"}function Pke({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){if(!r&&!Ot(t)&&t!=="log"){if(Y(e)){if(et(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ae(["month","hours","day","quarter"],on(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function $ke({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Y(t)){let{timeUnit:n}=t;if(n){let r=zb(n);if(r)return{signal:r}}}}function GF(e,t){let n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;if(o&&a)return PI(o,a);if(o)return o;if(a)return a;if(o!==void 0)return o;if(a!==void 0)return a}function Bke(e,t){let n=e.values;if(F(n))return Zb(t,n);if(ae(n))return n}function Uke(e,t){return e==="rect"&&hh(t)?1:0}var k0=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=IM(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(s2(r)&&qb(r.sort)){let{field:o,timeUnit:a}=r,s=r.sort,c=s.map((l,u)=>`${Tb({field:o,timeUnit:a,equal:l})} ? ${u} : `).join("")+s.length;t=new e(t,{calculate:c,as:xs(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${xe(this.transform)}`}};function xs(e,t,n){return K(e,x({prefix:t,suffix:"sort_index"},n??{}))}function Jf(e,t){return Ae(["top","bottom"],t)?"column":Ae(["left","right"],t)||e==="row"?"row":"column"}function Yc(e,t,n,r){let i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return it((t||{})[e],i[e],n.header[e])}function Nh(e,t,n,r){let i={};for(let o of e){let a=Yc(o,t||{},n,r);a!==void 0&&(i[o]=a)}return i}var e8=["row","column"],t8=["header","footer"];function _oe(e,t){let n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=Nh(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),c=Jf(t,s),l=g4(a);return{name:`${t}-title`,type:"group",role:`${c}-title`,title:x(x(x(k(x({text:n},t==="row"?{orient:"left"}:{}),{style:"guide-title"}),Toe(l,c)),koe(c,l,o)),Roe(r,i,t,Jie,gF))}}function koe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}let r=qF(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Toe(e,t){let n=jF(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Ioe(e,t){let n=e.component.layoutHeaders[t],r=[];for(let i of t8)if(n[i])for(let o of n[i]){let a=qke(e,t,i,n,o);a!=null&&r.push(a)}return r}function jke(e,t){let{sort:n}=e;return Pr(n)?{field:K(n,{expr:"datum"}),order:n.order??"ascending"}:F(n)?{field:xs(e,t,{expr:"datum"}),order:"ascending"}:{field:K(e,{expr:"datum"}),order:n??"ascending"}}function RM(e,t,n){let{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:c}=Nh(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=kf({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,u=Jf(t,s);return x(x(x(k(x({text:{signal:c?Z2(Z2(c,"datum.label",l),"datum.value",K(e,{expr:"parent"})):l}},t==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),Toe(o,u)),koe(u,o,a)),Roe(n,e,t,e1e,vF))}function qke(e,t,n,r,i){if(i){let o=null,{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){let{labelOrient:f}=Nh(["labelOrient"],a.header,s,t);(t==="row"&&!Ae(["top","bottom"],f)||t==="column"&&!Ae(["left","right"],f))&&(o=RM(a,t,s))}let c=$r(e)&&!hs(e.facet),l=i.axes,u=l?.length>0;if(o||u){let f=t==="row"?"height":"width";return x(x(x(x(x({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:jke(a,t)}:{}),u&&c?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{}),u?{axes:l}:{})}}return null}var Gke={column:{start:0,end:1},row:{start:1,end:0}};function Wke(e,t){return Gke[t][e]}function Foe(e,t){let n={};for(let r of Tr){let i=e[r];if(i?.facetFieldDef){let{titleAnchor:o,titleOrient:a}=Nh(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),s=Jf(r,a),c=Wke(o,s);c!==void 0&&(n[s]=c)}}return Ge(n)?void 0:n}function Roe(e,t,n,r,i){let o={};for(let a of r){if(!i[a])continue;let s=Yc(a,t?.header,e,n);s!==void 0&&(o[i[a]]=s)}return o}function n8(e){return[...OM(e,"width"),...OM(e,"height"),...OM(e,"childWidth"),...OM(e,"childHeight")]}function OM(e,t){let n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];let i=e.getSizeSignalRef(t).signal;if(r==="step"){let o=e.getScaleComponent(n);if(o){let a=o.get("type"),s=o.get("range");if(Ot(a)&&ki(s)){let c=e.scaleName(n);return $r(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Ooe(c,s)]:[Ooe(c,s),{name:i,update:WF(c,o,`domain('${c}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){let o=i.endsWith("width"),a=o?"containerSize()[0]":"containerSize()[1]",s=wh(e.config.view,o?"width":"height"),c=`isFinite(${a}) ? ${a} : ${s}`;return[{name:i,init:c,on:[{update:c,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Ooe(e,t){let n=`${e}_step`;return ae(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function WF(e,t,n){let r=t.get("type"),i=t.get("padding"),o=it(t.get("paddingOuter"),i),a=t.get("paddingInner");return a=r==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${d1(a)}, ${d1(o)}) * ${e}_step`}function PM(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function $M(e,t){return R(e).reduce((n,r)=>{let i=e[r];return x(x({},n),G1(t,i,r,o=>tt(o.value)))},{})}function BM(e,t){if($r(t))return e==="theta"?"independent":"shared";if(u2(t))return"shared";if(i8(t))return vt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function r8(e,t){let n=e.scale[t],r=vt(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&U(O.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}var Yke=k(x({},xF),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),YF=R(Yke),UM=class extends Fi{};var XF={symbols:Xke,gradient:Qke,labels:Kke,entries:Zke};function Xke(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;let{markDef:a,encoding:s,config:c,mark:l}=n,u=a.filled&&l!=="trail",f=x(x({},Hre({},n,fie)),Xf(n,{filled:u})),d=i.get("symbolOpacity")??c.legend.symbolOpacity,p=i.get("symbolFillColor")??c.legend.symbolFillColor,h=i.get("symbolStrokeColor")??c.legend.symbolStrokeColor,m=d===void 0?Poe(s.opacity)??a.opacity:void 0;if(f.fill){if(r==="fill"||u&&r===Fn)delete f.fill;else if(f.fill.field)p?delete f.fill:(f.fill=tt(c.legend.symbolBaseFillColor??"black"),f.fillOpacity=tt(m??1));else if(F(f.fill)){let g=jM(s.fill??s.color)??a.fill??(u&&a.color);g&&(f.fill=tt(g))}}if(f.stroke){if(r==="stroke"||!u&&r===Fn)delete f.stroke;else if(f.stroke.field||h)delete f.stroke;else if(F(f.stroke)){let g=it(jM(s.stroke||s.color),a.stroke,u?a.color:void 0);g&&(f.stroke={value:g})}}if(r!==f1){let g=Y(t)&&Boe(n,i,t);g?f.opacity=[x({test:g},tt(m??1)),tt(c.legend.unselectedOpacity)]:m&&(f.opacity=tt(m))}return f=x(x({},f),e),Ge(f)?void 0:f}function Qke(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;let{config:i,markDef:o,encoding:a}=t,s={},l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?Poe(a.opacity)||o.opacity:void 0;return l&&(s.opacity=tt(l)),s=x(x({},s),e),Ge(s)?void 0:s}function Kke(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){let o=n.legend(r)||{},a=n.config,s=Y(t)?Boe(n,i,t):void 0,c=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:l,formatType:u}=o,f;ps(u)?f=bo({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:u,config:a}):l===void 0&&u===void 0&&a.customFormatTypes&&(t.type==="quantitative"&&a.numberFormatType?f=bo({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):t.type==="temporal"&&a.timeFormatType&&Y(t)&&t.timeUnit===void 0&&(f=bo({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));let d=x(x(x({},c?{opacity:c}:{}),f?{text:f}:{}),e);return Ge(d)?void 0:d}function Zke(e,{legendCmpt:t}){return t.get("selections")?.length?k(x({},e),{fill:{value:"transparent"}}):e}function Poe(e){return $oe(e,(t,n)=>Math.max(t,n.value))}function jM(e){return $oe(e,(t,n)=>it(t,n.value))}function $oe(e,t){if(Hie(e))return te(e.condition).reduce(t,e.value);if(cr(e))return e.value}function Boe(e,t,n){let r=t.get("selections");if(!r?.length)return;let i=Z(n.field);return r.map(o=>`(!length(data(${Z(ut(o)+ua)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}var QF={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{let{format:r,formatType:i}=t;return Bb(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{let{formatType:r}=e;return Ub(r,t,n)},gradientLength:e=>{let{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??rTe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??iTe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??eTe(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>ms(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Nc(n)&&B1(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Jke(t,e)};function Jke(e,t){let n=e.values;if(F(n))return Zb(t,n);if(ae(n))return n}function eTe(e,t,n,r){if(t!=="shape"){let i=jM(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function joe(e){let{legend:t}=e;return it(t.type,tTe(e))}function tTe({channel:e,timeUnit:t,scaleType:n}){if(Nc(e)){if(Ae(["quarter","month","day"],t))return"symbol";if(B1(n))return"gradient"}return"symbol"}function qoe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??nTe(n,t)}function nTe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function rTe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){let{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:c}=e;if(B1(i))return n==="horizontal"?r==="top"||r==="bottom"?Uoe(t,"width",a,o):a:Uoe(t,"height",c,s)}function Uoe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function iTe(e){if(Ae(["quantile","threshold","log","symlog"],e))return"greedy"}function KF(e){let t=xt(e)?oTe(e):lTe(e);return e.component.legends=t,t}function oTe(e){let{encoding:t}=e,n={};for(let r of[Fn,...lM]){let i=Tt(t[r]);!i||!e.getScaleComponent(r)||r===Mn&&Y(i)&&i.type===sa||(n[r]=cTe(e,r))}return n}function aTe(e,t){let n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function sTe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===r?.title)return!0}return e===(n||{})[t]}function cTe(e,t){let n=e.legend(t),{markDef:r,encoding:i,config:o}=e,a=o.legend,s=new UM({},aTe(e,t));goe(e,t,s);let c=n!==void 0?!n:a.disable;if(s.set("disable",c,n!==void 0),c)return s;n=n||{};let l=e.getScaleComponent(t).get("type"),u=Tt(i[t]),f=Y(u)?on(u.timeUnit)?.unit:void 0,d=n.orient||o.legend.orient||"right",p=joe({legend:n,channel:t,timeUnit:f,scaleType:l}),h=qoe({legend:n,legendType:p,orient:d,legendConfig:a}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:u,legendConfig:a,config:o,scaleType:l,orient:d,legendType:p,direction:h};for(let b of YF){if(p==="gradient"&&b.startsWith("symbol")||p==="symbol"&&b.startsWith("gradient"))continue;let M=b in QF?QF[b](m):n[b];if(M!==void 0){let S=sTe(M,b,n,e.fieldDef(t));(S||o.legend[b]===void 0)&&s.set(b,M,S)}}let g=n?.encoding??{},v=s.get("selections"),y={},C={fieldOrDatumDef:u,model:e,channel:t,legendCmpt:s,legendType:p};for(let b of["labels","legend","title","symbols","gradient","entries"]){let M=$M(g[b]??{},e),S=b in XF?XF[b](M,C):M;S!==void 0&&!Ge(S)&&(y[b]=k(x(x({},v?.length&&Y(u)?{name:`${ut(u.field)}_legend_${b}`}:{}),v?.length?{interactive:!!v}:{}),{update:S}))}return Ge(y)||s.set("encode",y,!!n?.encoding),s}function lTe(e){let{legends:t,resolve:n}=e.component;for(let r of e.children){KF(r);for(let i of R(r.component.legends))n.legend[i]=r8(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=ZF(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(let r of R(t))for(let i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function ZF(e,t){if(!e)return t.clone();let n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(let o of YF){let a=q1(e.getWithExplicit(o),t.getWithExplicit(o),o,"legend",(s,c)=>{switch(o){case"symbolType":return uTe(s,c);case"title":return Eb(s,c);case"type":return i=!0,Ri("symbol")}return qf(s,c,o,"legend")});e.setWithExplicit(o,a)}return i&&(e.implicit?.encode?.gradient&&Jp(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&Jp(e.explicit,["encode","gradient"])),e}function uTe(e,t){return t.value==="circle"?t:e}function fTe(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function qM(e){let t=e.component.legends,n={};for(let i of R(t)){let o=e.getScaleComponent(i),a=ft(o.get("domains"));if(n[a])for(let s of n[a])ZF(s,t[i])||n[a].push(t[i]);else n[a]=[t[i].clone()]}return tn(n).flat().map(i=>dTe(i,e.config)).filter(i=>i!==void 0)}function dTe(e,t){let a=e.combine(),{disable:n,labelExpr:r,selections:i}=a,o=ie(a,["disable","labelExpr","selections"]);if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),o.encode?.symbols){let s=o.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!o.stroke&&(s.stroke={value:"transparent"});for(let c of lM)o[c]&&delete s[c]}if(o.title||delete o.title,r!==void 0){let s=r;o.encode?.labels?.update&&ae(o.encode.labels.update.text)&&(s=Z2(r,"datum.label",o.encode.labels.update.text.signal)),fTe(o,"labels","text",{signal:s})}return o}}function Goe(e){return u2(e)||i8(e)?pTe(e):Woe(e)}function pTe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Woe(e))}function Woe(e){let t=e.component.projection;if(!t||t.merged)return[];let n=t.combine(),{name:r}=n;if(t.data){let i={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},o=t.data.reduce((a,s)=>{let c=ae(s)?s.signal:`data('${e.lookupDataSource(s)}')`;return Ae(a,c)||a.push(c),a},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[x({name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}else return[x({name:r,translate:{signal:"[width / 2, height / 2]"}},n)]}var Yoe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];var _h=class extends Fi{constructor(t,n,r,i){super(x({},n),{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}};function JF(e){e.component.projection=xt(e)?hTe(e):vTe(e)}function hTe(e){if(e.hasProjection){let t=sr(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?mTe(e):void 0,o=new _h(e.projectionName(!0),x(x({},sr(e.config.projection)??{}),t??{}),r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function mTe(e){let t=[],{encoding:n}=e;for(let r of[[ai,oi],[si,Vi]])(Tt(n[r[0]])||Tt(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Mn)&&e.typedFieldDef(Mn).type===sa&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(yt.Main)),t}function gTe(e,t){let n=lb(Yoe,i=>!!(!de(e.explicit,i)&&!de(t.explicit,i)||de(e.explicit,i)&&de(t.explicit,i)&&kr(e.get(i),t.get(i))));if(kr(e.size,t.size)){if(n)return e;if(kr(e.explicit,{}))return t;if(kr(t.explicit,{}))return e}return null}function vTe(e){if(e.children.length===0)return;let t;for(let r of e.children)JF(r);let n=lb(e.children,r=>{let i=r.component.projection;if(i)if(t){let o=gTe(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){let r=e.projectionName(!0),i=new _h(r,t.specifiedProjection,t.size,le(t.data));for(let o of e.children){let a=o.component.projection;a&&(a.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(a.get("name"),r),a.merged=!0)}return i}}function yTe(e,t,n,r){if(ds(t,n)){let i=xt(e)?e.axis(n)??e.legend(n)??{}:{},o=K(t,{expr:"datum"}),a=K(t,{expr:"datum",binSuffix:"end"});return{formulaAs:K(t,{binSuffix:"range",forAs:!0}),formula:H0(o,a,i.format,i.formatType,r)}}return{}}function Qoe(e,t){return`${Cb(e)}_${t}`}function xTe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function o8(e,t,n){let r=Df(n,void 0)??{},i=Qoe(r,t);return e.getName(`${i}_bins`)}function CTe(e){return"as"in e}function Xoe(e,t,n){let r,i;CTe(e)?r=Q(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[K(e,{forAs:!0}),K(e,{binSuffix:"end",forAs:!0})];let o=x({},Df(t,void 0)),a=Qoe(o,e.field),{signal:s,extentSignal:c}=xTe(n,a);if(Ef(o.extent)){let u=o.extent;i=zM(n,u.param,u),delete o.extent}let l=x(x(x({bin:o,field:e.field,as:[r]},s?{signal:s}:{}),c?{extentSignal:c}:{}),i?{span:i}:{});return{key:a,binComponent:l}}var da=class e extends He{clone(){return new e(null,le(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){let r=n.reduceFieldDef((i,o,a)=>{if(Sn(o)&&et(o.bin)){let{key:s,binComponent:c}=Xoe(o,o.bin,n);i[s]=x(x(x({},c),i[s]),yTe(n,o,a,n.config))}return i},{});return Ge(r)?null:new e(t,r)}static makeFromTransform(t,n,r){let{key:i,binComponent:o}=Xoe(n,n.bin,r);return new e(t,{[i]:o})}merge(t,n){for(let r of R(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Li([...this.bins[r].as,...t.bins[r].as],xe)):this.bins[r]=t.bins[r];for(let r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(tn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(tn(this.bins).map(t=>t.field))}hash(){return`Bin ${xe(this.bins)}`}assemble(){return tn(this.bins).flatMap(t=>{let n=[],[r,...i]=t.as,c=t.bin,{extent:o}=c,a=ie(c,["extent"]),s=x(x(x({type:"bin",field:ar(t.field),as:r,signal:t.signal},Ef(o)?{extent:null}:{extent:o}),t.span?{span:{signal:`span(${t.span})`}}:{}),a);!o&&t.extentSignal&&(n.push({type:"extent",field:ar(t.field),signal:t.extentSignal}),s.extent={signal:t.extentSignal}),n.push(s);for(let l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:K({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}};function bTe(e,t,n,r){let i=xt(r)?r.encoding[Ir(t)]:void 0;if(Sn(n)&&xt(r)&&Xb(n,i,r.markDef,r.config)){e.add(K(n,{})),e.add(K(n,{suffix:"end"}));let{mark:o,markDef:a,config:s}=r,c=U1({fieldDef:n,markDef:a,config:s});Tc(o)&&c!==.5&&vt(t)&&(e.add(K(n,{suffix:V0})),e.add(K(n,{suffix:N0}))),n.bin&&ds(n,t)&&e.add(K(n,{binSuffix:"range"}))}else if(hb(t)){let o=pb(t);e.add(r.getName(o))}else e.add(K(n));return s2(n)&&nie(n.scale?.range)&&e.add(n.scale.range.field),e}function MTe(e,t){for(let n of R(t)){let r=t[n];for(let i of R(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}var wo=class e extends He{clone(){return new e(null,new Set(this.dimensions),le(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(a=>{a.aggregate&&(r=!0)});let i={},o=new Set;return!r||(n.forEachFieldDef((a,s)=>{let{aggregate:c,field:l}=a;if(c)if(c==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([K(a,{forAs:!0})]);else{if(xo(c)||i2(c)){let u=xo(c)?"argmin":"argmax",f=c[u];i[f]??(i[f]={}),i[f][u]=new Set([K({op:u,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][c]=new Set([K(a,{forAs:!0})]);Fr(s)&&n.scaleDomain(s)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([K({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([K({field:l,aggregate:"max"},{forAs:!0})]))}else bTe(o,s,a,n)}),o.size+R(i).length===0)?null:new e(t,o,i)}static makeFromTransform(t,n){let r=new Set,i={};for(let o of n.aggregate){let{op:a,field:s,as:c}=o;a&&(a==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([c||K(o,{forAs:!0})])):(i[s]??(i[s]={}),i[s][a]=new Set([c||K(o,{forAs:!0})])))}for(let o of n.groupby??[])r.add(o);return r.size+R(i).length===0?null:new e(t,r,i)}merge(t){return wI(this.dimensions,t.dimensions)?(MTe(this.measures,t.measures),!0):(Nre("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...R(this.measures)])}producedFields(){let t=new Set;for(let n of R(this.measures))for(let r of R(this.measures[n])){let i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${xe({dimensions:this.dimensions,measures:this.measures})}`}assemble(){let t=[],n=[],r=[];for(let o of R(this.measures))for(let a of R(this.measures[o]))for(let s of this.measures[o][a])r.push(s),t.push(a),n.push(o==="*"?null:ar(o));return{type:"aggregate",groupby:[...this.dimensions].map(ar),ops:t,fields:n,as:r}}};var d2=class extends He{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(let o of Tr){let a=n.facet[o];if(a){let{bin:s,sort:c}=a;this[o]=x({name:n.getName(`${o}_domain`),fields:[K(a),...et(s)?[K(a,{binSuffix:"end"})]:[]]},Pr(c)?{sortField:c}:F(c)?{sortIndexField:xs(a,o)}:{})}}this.childModel=n.child}hash(){let t="Facet";for(let n of Tr)this[n]&&(t+=` ${n.charAt(0)}:${xe(this[n])}`);return t}get fields(){let t=[];for(let n of Tr)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){let t=new Set(this.fields);for(let n of Tr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){let t={};for(let n of xr){let r=this.childModel.component.scales[n];if(r&&!r.merged){let i=r.get("type"),o=r.get("range");if(Ot(i)&&ki(o)){let a=L4(this.childModel,n),s=a8(a);s?t[n]=s:U(O.unknownField(n))}}}return t}assembleRowColumnHeaderData(t,n,r){let i={row:"y",column:"x",facet:void 0}[t],o=[],a=[],s=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),a.push("max")):(o.push(r[i]),a.push("distinct")),s.push(`distinct_${r[i]}`));let{sortField:c,sortIndexField:l}=this[t];if(c){let{op:u=b4,field:f}=c;o.push(f),a.push(u),s.push(K(c,{forAs:!0}))}else l&&(o.push(l),a.push("max"),s.push(l));return{name:this[t].name,source:n??this.data,transform:[x({type:"aggregate",groupby:this[t].fields},o.length?{fields:o,ops:a,as:s}:{})]}}assembleFacetHeaderData(t){let{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(let c of e8){for(let l of t8){let u=(r[c]&&r[c][l])??[];for(let f of u)if(f.axes?.length>0){o[c]=!0;break}}if(o[c]){let l=`length(data("${this.facet.name}"))`,u=c==="row"?n?{signal:`ceil(${l} / ${n})`}:1:n?{signal:`min(${l}, ${n})`}:{signal:l};i.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:u}]})}}let{row:a,column:s}=o;return(a||s)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){let t=[],n=null,r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:a}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;let s=[].concat(r.x??[],r.y??[]),c=s.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:c}]})}for(let s of[O1,R1])this[s]&&t.push(this.assembleRowColumnHeaderData(s,n,r));if(a){let s=this.assembleFacetHeaderData(r);s&&t.push(...s)}return t}};function Koe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function wTe(e,t){let n=eh(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){let r=Koe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){let r=Koe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return U(O.unrecognizedParse(t)),null}function Zoe(e){let t={};return Zp(e.filter,n=>{if(GI(n)){let r=null;Hb(n)?r=Rr(n.equal):Ab(n)?r=Rr(n.lte):Lb(n)?r=Rr(n.lt):Vb(n)?r=Rr(n.gt):Nb(n)?r=Rr(n.gte):_b(n)?r=n.range[0]:kb(n)&&(r=(n.oneOf??n.in)[0]),r&&(o2(r)?t[n.field]="date":Oe(r)?t[n.field]="number":Q(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Joe(e){let t={};function n(r){Rc(r)?t[r.field]="date":r.type==="quantitative"&&xre(r.aggregate)?t[r.field]="number":C0(r.field)>1?r.field in t||(t[r.field]="flatten"):s2(r)&&Pr(r.sort)&&C0(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((xt(e)||$r(e))&&e.forEachFieldDef((r,i)=>{if(Sn(r))n(r);else{let o=yo(i),a=e.fieldDef(o);n(k(x({},r),{type:a.type}))}}),xt(e)){let{mark:r,markDef:i,encoding:o}=e;if(Ti(r)&&!e.encoding.order){let a=i.orient==="horizontal"?"y":"x",s=o[a];Y(s)&&s.type==="quantitative"&&!(s.field in t)&&(t[s.field]="number")}}return t}function e2e(e){let t={};if(xt(e)&&e.component.selection)for(let n of R(e.component.selection)){let r=e.component.selection[n];for(let i of r.project.items)!i.channel&&C0(i.field)>1&&(t[i.field]="flatten")}return t}var Br=class e extends He{clone(){return new e(null,le(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${xe(this._parse)}`}static makeExplicit(t,n,r){let i={},o=n.data;return!la(o)&&o?.format?.parse&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(let s of R(r)){let c=i.getWithExplicit(s);c.value!==void 0&&(c.explicit||c.value===r[s]||c.value==="derived"||r[s]==="flatten"?delete r[s]:U(O.differentParse(s,r[s],c.value)))}for(let s of R(n)){let c=i.get(s);c!==void 0&&(c===n[s]?delete n[s]:U(O.differentParse(s,n[s],c)))}let o=new Fi(n,r);i.copyAll(o);let a={};for(let s of R(o.combine())){let c=o.get(s);c!==null&&(a[s]=c)}return R(a).length===0||i.parseNothing?null:new e(t,a)}get parse(){return this._parse}merge(t){this._parse=x(x({},this._parse),t.parse),t.remove()}assembleFormatParse(){let t={};for(let n of R(this._parse)){let r=this._parse[n];C0(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(R(this._parse))}dependentFields(){return new Set(R(this._parse))}assembleTransforms(t=!1){return R(this._parse).filter(n=>t?C0(n)>1:!0).map(n=>{let r=wTe(n,this._parse[n]);return r?{type:"formula",expr:r,as:th(n)}:null}).filter(n=>n!==null)}};var pa=class e extends He{clone(){return new e(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ui])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ui}}};var A4=class e extends He{clone(){return new e(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${xe(this.params)}`}assemble(){return x({type:"graticule"},this.params===!0?{}:this.params)}};var V4=class e extends He{clone(){return new e(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${xe(this.params)}`}assemble(){return x({type:"sequence"},this.params)}};var Y1=class extends He{constructor(t){super(null),t??(t={name:"source"});let n;if(la(t)||(n=t.format?x({},In(t.format,["parse"])):{}),A0(t))this._data={values:t.values};else if(Uc(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Ae(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else AF(t)?this._data={values:[{type:"Sphere"}]}:(EM(t)||la(t))&&(this._data={});this._generator=la(t),t.name&&(this._name=t.name),n&&!Ge(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return k(x({name:this._name},this._data),{transform:[]})}};var t2e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},STe=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},kh;function GM(e){return e instanceof Y1||e instanceof A4||e instanceof V4}var s8=class{constructor(){kh.set(this,void 0),t2e(this,kh,!1,"f")}setModified(){t2e(this,kh,!0,"f")}get modifiedFlag(){return STe(this,kh,"f")}};kh=new WeakMap;var Cs=class extends s8{getNodeDepths(t,n,r){r.set(t,n);for(let i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){let r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(let i of r)this.run(i[0]);return this.modifiedFlag}},c8=class extends s8{optimize(t){this.run(t);for(let n of t.children)this.optimize(n);return this.modifiedFlag}};var WM=class extends c8{mergeNodes(t,n){let r=n.shift();for(let i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){let n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(let i of R(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}},YM=class extends c8{constructor(t){super(),this.requiresSelectionId=t&&Ah(t)}run(t){t instanceof pa&&(this.requiresSelectionId&&(GM(t.parent)||t.parent instanceof wo||t.parent instanceof Br)||(this.setModified(),t.remove()))}},XM=class extends s8{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof l2&&(r=t.producedFields(),ub(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(let i of t.children)this.run(i,new Set([...n,...r]))}},QM=class extends c8{constructor(){super()}run(t){t instanceof En&&!t.isRequired()&&(this.setModified(),t.remove())}},KM=class extends Cs{run(t){if(!GM(t)&&!(t.numChildren()>1)){for(let n of t.children)if(n instanceof Br)if(t instanceof Br)this.setModified(),t.merge(n);else{if(fb(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}},ZM=class extends Cs{run(t){let n=[...t.children],r=t.children.filter(i=>i instanceof Br);if(t.numChildren()>1&&r.length>=1){let i={},o=new Set;for(let a of r){let s=a.parse;for(let c of R(s))c in i?i[c]!==s[c]&&o.add(c):i[c]=s[c]}for(let a of o)delete i[a];if(!Ge(i)){this.setModified();let a=new Br(t,i);for(let s of n){if(s instanceof Br)for(let c of R(i))delete s.parse[c];t.removeChild(s),s.parent=a,s instanceof Br&&R(s.parse).length===0&&s.remove()}}}}},JM=class extends Cs{run(t){t instanceof En||t.numChildren()>0||t instanceof d2||t instanceof Y1||(this.setModified(),t.remove())}},ew=class extends Cs{run(t){let n=t.children.filter(i=>i instanceof l2),r=n.pop();for(let i of n)this.setModified(),r.merge(i)}},tw=class extends Cs{run(t){let n=t.children.filter(i=>i instanceof wo),r={};for(let i of n){let o=xe(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(let i of R(r)){let o=r[i];if(o.length>1){let a=o.pop();for(let s of o)a.merge(s)&&(t.removeChild(s),s.parent=a,s.remove(),this.setModified())}}}},nw=class extends Cs{constructor(t){super(),this.model=t}run(t){let n=!(GM(t)||t instanceof ys||t instanceof Br||t instanceof pa),r=[],i=[];for(let o of t.children)o instanceof da&&(n&&!fb(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){let o=r.pop();for(let a of r)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof da?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){let o=i.pop();for(let a of i)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}},rw=class extends Cs{run(t){let n=[...t.children];if(!as(n,a=>a instanceof En)||t.numChildren()<=1)return;let i=[],o;for(let a of n)if(a instanceof En){let s=a;for(;s.numChildren()===1;){let[c]=s.children;if(c instanceof En)s=c;else break}i.push(...s.children),o?(t.removeChild(a),a.parent=o.parent,o.parent.removeChild(o),o.parent=s,this.setModified()):o=s}else i.push(a);if(i.length){this.setModified();for(let a of i)a.parent.removeChild(a),a.parent=o}}};var ha=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Li(this.transform.groupby.concat(t),n=>n)}dependentFields(){let t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??K(t)}hash(){return`JoinAggregateTransform ${xe(this.transform)}`}assemble(){let t=[],n=[],r=[];for(let o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);let i=this.transform.groupby;return x({type:"joinaggregate",as:r,ops:n,fields:t},i!==void 0?{groupby:i}:{})}};function DTe(e){return e.stack.stackBy.reduce((t,n)=>{let r=n.fieldDef,i=K(r);return i&&t.push(i),t},[])}function zTe(e){return F(e)&&e.every(t=>Q(t))&&e.length>1}var bs=class e extends He{clone(){return new e(null,le(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){let{stack:r,groupby:i,as:o,offset:a="zero"}=n,s=[],c=[];if(n.sort!==void 0)for(let f of n.sort)s.push(f.field),c.push(it(f.order,"ascending"));let l={field:s,order:c},u;return zTe(o)?u=o:Q(o)?u=[o,`${o}_end`]:u=[`${n.stack}_start`,`${n.stack}_end`],new e(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:a,sort:l,facetby:[],as:u})}static makeFromEncoding(t,n){let r=n.stack,{encoding:i}=n;if(!r)return null;let{groupbyChannels:o,fieldChannel:a,offset:s,impute:c}=r,l=o.map(p=>{let h=i[p];return li(h)}).filter(p=>!!p),u=DTe(n),f=n.encoding.order,d;if(F(f)||Y(f))d=Sb(f);else{let p=Qb(f)?f.sort:a==="y"?"descending":"ascending";d=u.reduce((h,m)=>(h.field.push(m),h.order.push(p),h),{field:[],order:[]})}return new e(t,{dimensionFieldDefs:l,stackField:n.vgField(a),facetby:[],stackby:u,sort:d,offset:s,impute:c,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){let t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${xe(this._stack)}`}getGroupbyFields(){let{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[K(i,{binSuffix:"mid"})]:[K(i,{}),K(i,{binSuffix:"end"})]:[K(i)]).flat():r??[]}assemble(){let t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:a,offset:s,impute:c,as:l}=this._stack;if(c)for(let u of r){let{bandPosition:f=.5,bin:d}=u;if(d){let p=K(u,{expr:"datum"}),h=K(u,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${p}+${1-f}*${h}`,as:K(u,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:K(u,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:l,offset:s}),t}};var Xc=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Li(this.transform.groupby.concat(t),n=>n)}dependentFields(){let t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??K(t)}hash(){return`WindowTransform ${xe(this.transform)}`}assemble(){let t=[],n=[],r=[],i=[];for(let f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);let o=this.transform.frame,a=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>Sf(f)))return x({type:"joinaggregate",as:r,ops:n,fields:t},a!==void 0?{groupby:a}:{});let s=[],c=[];if(this.transform.sort!==void 0)for(let f of this.transform.sort)s.push(f.field),c.push(f.order??"ascending");let l={field:s,order:c},u=this.transform.ignorePeers;return x(x(x({type:"window",params:i,as:r,ops:n,fields:t,sort:l},u!==void 0?{ignorePeers:u}:{}),a!==void 0?{groupby:a}:{}),o!==void 0?{frame:o}:{})}};function HTe(e){function t(n){if(!(n instanceof d2)){let r=n.clone();if(r instanceof En){let i=Th+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof wo||r instanceof bs||r instanceof Xc||r instanceof ha)&&r.addDimensions(e.fields);for(let i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function iw(e){if(e instanceof d2)if(e.numChildren()===1&&!(e.children[0]instanceof En)){let t=e.children[0];(t instanceof wo||t instanceof bs||t instanceof Xc||t instanceof ha)&&t.addDimensions(e.fields),t.swapWithParent(),iw(e)}else{let t=e.model.component.data.main;n2e(t);let n=HTe(e),r=e.children.map(n).flat();for(let i of r)i.parent=t}else e.children.map(iw)}function n2e(e){if(e instanceof En&&e.type===yt.Main&&e.numChildren()===1){let t=e.children[0];t instanceof d2||(t.swapWithParent(),n2e(e))}}var Th="scale_",ow=5;function eR(e){for(let t of e){for(let n of t.children)if(n.parent!==t)return!1;if(!eR(t.children))return!1}return!0}function ma(e,t){let n=!1;for(let r of t)n=e.optimize(r)||n;return n}function r2e(e,t,n){let r=e.sources,i=!1;return i=ma(new QM,r)||i,i=ma(new YM(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=ma(new JM,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=ma(new KM,r)||i,i=ma(new nw(t),r)||i,i=ma(new XM,r)||i,i=ma(new ZM,r)||i,i=ma(new tw,r)||i,i=ma(new ew,r)||i,i=ma(new WM,r)||i,i=ma(new rw,r)||i),e.sources=r,i}function i2e(e,t){eR(e.sources);let n=0,r=0;for(let i=0;i<ow&&r2e(e,t,!0);i++)n++;e.sources.map(iw);for(let i=0;i<ow&&r2e(e,t,!1);i++)r++;eR(e.sources),Math.max(n,r)===ow&&U(`Maximum optimization runs(${ow}) reached.`)}var Yn=class e{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new e(()=>t(n))}};function iR(e){xt(e)?LTe(e):ATe(e)}function LTe(e){let t=e.component.scales;for(let n of R(t)){let r=NTe(e,n);if(t[n].setWithExplicit("domains",r),kTe(e,n),e.component.data.isFaceted){let o=e;for(;!$r(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(let s of r.value)ia(s)&&(s.data=Th+s.data.replace(Th,""))}}}function ATe(e){for(let n of e.children)iR(n);let t=e.component.scales;for(let n of R(t)){let r,i=null;for(let o of e.children){let a=o.component.scales[n];if(a){r===void 0?r=a.getWithExplicit("domains"):r=q1(r,a.getWithExplicit("domains"),"domains","scale",rR);let s=a.get("selectionExtent");i&&s&&i.param!==s.param&&U(O.NEEDS_SAME_SELECTION),i=s}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function VTe(e,t,n,r){if(e==="unaggregated"){let{valid:i,reason:o}=o2e(t,n);if(!i){U(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){let{valid:i}=o2e(t,n);if(i)return"unaggregated"}return e}function NTe(e,t){let n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=VTe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=k(x({},e.specifiedScales[t]),{domain:i})),t==="x"&&Tt(r.x2)?Tt(r.x)?q1(N4(n,i,e,"x"),N4(n,i,e,"x2"),"domain","scale",rR):N4(n,i,e,"x2"):t==="y"&&Tt(r.y2)?Tt(r.y)?q1(N4(n,i,e,"y"),N4(n,i,e,"y2"),"domain","scale",rR):N4(n,i,e,"y2"):N4(n,i,e,t)}function _Te(e,t,n){return e.map(r=>({signal:`{data: ${w0(r,{timeUnit:n,type:t})}}`}))}function tR(e,t,n){let r=on(n)?.unit;return t==="temporal"||r?_Te(e,t,r):[e]}function N4(e,t,n,r){let{encoding:i,markDef:o,mark:a,config:s,stack:c}=n,l=Tt(i[r]),{type:u}=l,f=l.timeUnit;if(tie(t)){let h=N4(e,void 0,n,r),m=tR(t.unionWith,u,f);return c2([...m,...h.value])}else{if(ae(t))return c2([t]);if(t&&t!=="unaggregated"&&!XI(t))return c2(tR(t,u,f))}if(c&&r===c.fieldChannel){if(c.offset==="normalize")return Ri([[0,1]]);let h=n.requestDataName(yt.Main);return Ri([{data:h,field:n.vgField(r,{suffix:"start"})},{data:h,field:n.vgField(r,{suffix:"end"})}])}let d=Fr(r)&&Y(l)?TTe(n,r,e):void 0;if(Ii(l)){let h=tR([l.datum],u,f);return Ri(h)}let p=l;if(t==="unaggregated"){let h=n.requestDataName(yt.Main),{field:m}=l;return Ri([{data:h,field:K({field:m,aggregate:"min"})},{data:h,field:K({field:m,aggregate:"max"})}])}else if(et(p.bin)){if(Ot(e))return e==="bin-ordinal"?Ri([]):Ri([{data:vf(d)?n.requestDataName(yt.Main):n.requestDataName(yt.Raw),field:n.vgField(r,ds(p,r)?{binSuffix:"range"}:{}),sort:d===!0||!ne(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{let{bin:h}=p;if(et(h)){let m=o8(n,p.field,h);return Ri([new Yn(()=>{let g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Ri([{data:n.requestDataName(yt.Main),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Ae(["time","utc"],e)){let h=i[Ir(r)];if(Xb(p,h,o,s)){let m=n.requestDataName(yt.Main),g=U1({fieldDef:p,fieldDef2:h,markDef:o,config:s}),v=Tc(a)&&g!==.5&&vt(r);return Ri([{data:m,field:n.vgField(r,v?{suffix:V0}:{})},{data:m,field:n.vgField(r,{suffix:v?N0:"end"})}])}}return d?Ri([{data:vf(d)?n.requestDataName(yt.Main):n.requestDataName(yt.Raw),field:n.vgField(r),sort:d}]):Ri([{data:n.requestDataName(yt.Main),field:n.vgField(r)}])}function nR(e,t){let{op:n,field:r,order:i}=e;return x(x({op:n??(t?"sum":b4)},r?{field:ar(r)}:{}),i?{order:i}:{})}function kTe(e,t){let n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t)?.bin,o=XI(r)&&r,a=na(i)&&Ef(i.extent)&&i.extent;(o||a)&&n.set("selectionExtent",o??a,!0)}function TTe(e,t,n){if(!Ot(n))return;let r=e.fieldDef(t),i=r.sort;if(qb(i))return{op:"min",field:xs(r,t),order:"ascending"};let{stack:o}=e,a=o?new Set([...o.groupbyFields,...o.stackBy.map(s=>s.fieldDef.field)]):void 0;if(Pr(i)){let s=o&&!a.has(i.field);return nR(i,s)}else if(jb(i)){let{encoding:s,order:c}=i,l=e.fieldDef(s),{aggregate:u,field:f}=l,d=o&&!a.has(f);if(xo(u)||i2(u))return nR({field:K(l),order:c},d);if(Sf(u)||!u)return nR({op:u,field:f,order:c},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ae(["ascending",void 0],i))return!0}}function o2e(e,t){let{aggregate:n,type:r}=e;return n?Q(n)&&!bre.has(n)?{valid:!1,reason:O.unaggregateDomainWithNonSharedDomainOp(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:O.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:O.unaggregateDomainHasNoEffectForRawField(e)}}function rR(e,t,n,r){return e.explicit&&t.explicit&&U(O.mergeConflictingDomainProperty(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function ITe(e){let t=Li(e.map(a=>{if(ia(a)){let s=a,{sort:c}=s;return ie(s,["sort"])}return a}),xe),n=Li(e.map(a=>{if(ia(a)){let s=a.sort;return s!==void 0&&!vf(s)&&("op"in s&&s.op==="count"&&delete s.field,s.order==="ascending"&&delete s.order),s}}).filter(a=>a!==void 0),xe);if(t.length===0)return;if(t.length===1){let a=e[0];if(ia(a)&&n.length>0){let s=n[0];if(n.length>1){U(O.MORE_THAN_ONE_SORT);let c=n.filter(l=>ne(l)&&"op"in l&&l.op!=="min");n.every(l=>ne(l)&&"op"in l)&&c.length===1?s=c[0]:s=!0}else if(ne(s)&&"field"in s){let c=s.field;a.field===c&&(s=s.order?{order:s.order}:!0)}return k(x({},a),{sort:s})}return a}let r=Li(n.map(a=>vf(a)||!("op"in a)||Q(a.op)&&a.op in yre?a:(U(O.domainSortDropped(a)),!0)),xe),i;r.length===1?i=r[0]:r.length>1&&(U(O.MORE_THAN_ONE_SORT),i=!0);let o=Li(e.map(a=>ia(a)?a.data:null),a=>a);return o.length===1&&o[0]!==null?x({data:o[0],fields:t.map(s=>s.field)},i?{sort:i}:{}):x({fields:t},i?{sort:i}:{})}function a8(e){if(ia(e)&&Q(e.field))return e.field;if(Mre(e)){let t;for(let n of e.fields)if(ia(n)&&Q(n.field)){if(!t)t=n.field;else if(t!==n.field)return U(O.FACETED_INDEPENDENT_DIFFERENT_SOURCES),t}return U(O.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),t}else if(wre(e)){U(O.FACETED_INDEPENDENT_SAME_SOURCE);let t=e.fields[0];return Q(t)?t:void 0}}function L4(e,t){let r=e.component.scales[t].get("domains").map(i=>(ia(i)&&(i.data=e.lookupDataSource(i.data)),i));return ITe(r)}function oR(e){return u2(e)||i8(e)?e.children.reduce((t,n)=>t.concat(oR(n)),a2e(e)):a2e(e)}function a2e(e){return R(e.component.scales).reduce((t,n)=>{let r=e.component.scales[n];if(r.merged)return t;let i=r.combine(),m=i,{name:o,type:a,selectionExtent:s,domains:c,range:l,reverse:u}=m,f=ie(m,["name","type","selectionExtent","domains","range","reverse"]),d=FTe(i.range,o,n,e),p=L4(e,n),h=s?K1e(e,s,r,p):null;return t.push(x(x(k(x(x({name:o,type:a},p?{domain:p}:{}),h?{domainRaw:h}:{}),{range:d}),u!==void 0?{reverse:u}:{}),f)),t},[])}function FTe(e,t,n,r){if(vt(n)){if(ki(e))return{step:{signal:`${t}_step`}}}else if(ne(e)&&ia(e))return k(x({},e),{data:r.lookupDataSource(e.data)});return e}var Ih=class extends Fi{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:as(this.get("domains"),t=>F(t)&&t.length===2&&Oe(t[0])&&t[0]<=0&&Oe(t[1])&&t[1]>=0)}};var RTe=["range","scheme"];function u2e(e){let t=e.component.scales;for(let n of x4){let r=t[n];if(!r)continue;let i=OTe(n,e);r.setWithExplicit("range",i)}}function s2e(e,t){let n=e.fieldDef(t);if(n?.bin){let{bin:r,field:i}=n,o=wn(t),a=e.getName(o);if(ne(r)&&r.binned&&r.step!==void 0)return new Yn(()=>{let s=e.scaleName(t),c=`(domain("${s}")[1] - domain("${s}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${c})`});if(et(r)){let s=o8(e,i,r);return new Yn(()=>{let c=e.getSignalName(s),l=`(${c}.stop - ${c}.start) / ${c}.step`;return`${e.getSignalName(a)} / (${l})`})}}}function OTe(e,t){let n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(let f of RTe)if(n[f]!==void 0){let d=ch(o,f),p=Fb(e,f);if(!d)U(O.scalePropertyNotWorkWithScaleType(o,f,e));else if(p)U(p);else switch(f){case"range":{let h=n.range;if(F(h)){if(vt(e))return c2(h.map(m=>{if(m==="width"||m==="height"){let g=t.getName(m),v=t.getSignalName.bind(t);return Yn.fromName(v,g)}return m}))}else if(ne(h))return c2({data:t.requestDataName(yt.Main),field:h.field,sort:{op:"min",field:t.vgField(e)}});return c2(h)}case"scheme":return c2(PTe(n[f]))}}let a=e===gt||e==="xOffset"?"width":"height",s=r[a];if(j1(s)){if(vt(e))if(Ot(o)){let f=d2e(s,t,e);if(f)return c2({step:f})}else U(O.stepDropped(a));else if(_c(e)){let f=e===n2?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){let h=p2e(s,o);if(h)return c2(h)}}}let{rangeMin:c,rangeMax:l}=n,u=$Te(e,t);return(c!==void 0||l!==void 0)&&ch(o,"rangeMin")&&F(u)&&u.length===2?c2([c??u[0],l??u[1]]):Ri(u)}function PTe(e){return eie(e)?x({scheme:e.name},In(e,["name"])):{scheme:e}}function f2e(e,t,n,{center:r}={}){let i=wn(e),o=t.getName(i),a=t.getSignalName.bind(t);return e===nn&&Rn(n)?r?[Yn.fromName(s=>`${a(s)}/2`,o),Yn.fromName(s=>`-${a(s)}/2`,o)]:[Yn.fromName(a,o),0]:r?[Yn.fromName(s=>`-${a(s)}/2`,o),Yn.fromName(s=>`${a(s)}/2`,o)]:[0,Yn.fromName(a,o)]}function $Te(e,t){let{size:n,config:r,mark:i,encoding:o}=t,{type:a}=Tt(o[e]),c=t.getScaleComponent(e).get("type"),{domain:l,domainMid:u}=t.specifiedScales[e];switch(e){case gt:case nn:{if(Ae(["point","band"],c)){let f=h2e(e,n,r.view);if(j1(f))return{step:d2e(f,t,e)}}return f2e(e,t,c)}case n2:case ss:return BTe(e,t,c);case $1:{let f=t.component.scales[e].get("zero"),d=m2e(i,f,r),p=qTe(i,n,t,r);return kc(c)?jTe(d,p,UTe(c,r,l,e)):[d,p]}case ii:return[0,Math.PI*2];case ta:return[0,360];case Ai:return[0,new Yn(()=>{let f=t.getSignalName("width"),d=t.getSignalName("height");return`min(${f},${d})/2`})];case go:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case vo:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Mn:return"symbol";case Fn:case Ni:case _i:return c==="ordinal"?a==="nominal"?"category":"ordinal":u!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case f1:case ho:case mo:return[r.scale.minOpacity,r.scale.maxOpacity]}}function d2e(e,t,n){let{encoding:r}=t,i=t.getScaleComponent(n),o=wf(n),a=r[o];if(bF({step:e,offsetIsDiscrete:Ne(a)&&Ib(a.type)})==="offset"&&lF(r,o)){let c=t.getScaleComponent(o),u=`domain('${t.scaleName(o)}').length`;if(c.get("type")==="band"){let d=c.get("paddingInner")??c.get("padding")??0,p=c.get("paddingOuter")??c.get("padding")??0;u=`bandspace(${u}, ${d}, ${p})`}let f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${u} / (1-${zre(f)})`}}else return e.step}function p2e(e,t){if(bF({step:e,offsetIsDiscrete:Ot(t)})==="offset")return{step:e.step}}function BTe(e,t,n){let r=e===n2?"x":"y",i=t.getScaleComponent(r);if(!i)return f2e(r,t,n,{center:!0});let o=i.get("type"),a=t.scaleName(r),{markDef:s,config:c}=t;if(o==="band"){let l=h2e(r,t.size,t.config.view);if(j1(l)){let u=p2e(l,n);if(u)return u}return[0,{signal:`bandwidth('${a}')`}]}else{let l=t.encoding[r];if(Y(l)&&l.timeUnit){let u=zb(l.timeUnit,h=>`scale('${a}', ${h})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=U1({fieldDef:l,markDef:s,config:c})-.5,p=d!==0?` + ${d}`:"";if(f){let h=ae(f)?`${f.signal}/2`+p:`${f/2+d}`,m=ae(f)?`(1 - ${f.signal}/2)`+p:`${1-f/2+d}`;return[{signal:`${h} * (${u})`},{signal:`${m} * (${u})`}]}return[0,{signal:u}]}return bI(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function h2e(e,t,n){let r=e===gt?"width":"height",i=t[r];return i||Bf(n,r)}function UTe(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&F(n)?n.length+1:(U(O.domainRequiredForThresholdScale(r)),3)}}function jTe(e,t,n){let r=()=>{let i=d1(t),o=d1(e),a=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${a}, ${a})`};return ae(t)?new Yn(r):{signal:r()}}function m2e(e,t,n){if(t)return ae(t)?{signal:`${t.signal} ? 0 : ${m2e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(O.incompatibleChannel("size",e))}var c2e=.95;function qTe(e,t,n,r){let i={x:s2e(n,"x"),y:s2e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;let o=l2e(t,i,r.view);return Oe(o)?o-1:new Yn(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;let o=l2e(t,i,r.view);return Oe(o)?Math.pow(c2e*o,2):new Yn(()=>`pow(${c2e} * ${o.signal}, 2)`)}}throw new Error(O.incompatibleChannel("size",e))}function l2e(e,t,n){let r=j1(e.width)?e.width.step:L0(n,"width"),i=j1(e.height)?e.height.step:L0(n,"height");return t.x||t.y?new Yn(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function aR(e,t){xt(e)?GTe(e,t):v2e(e,t)}function GTe(e,t){let n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(let s of R(n)){let c=a[s],l=n[s],u=e.getScaleComponent(s),f=Tt(i[s]),d=c[t],p=u.get("type"),h=u.get("padding"),m=u.get("paddingInner"),g=ch(p,t),v=Fb(s,t);if(d!==void 0&&(g?v&&U(v):U(O.scalePropertyNotWorkWithScaleType(p,t,s))),g&&v===void 0)if(d!==void 0){let y=f.timeUnit,C=f.type;switch(t){case"domainMax":case"domainMin":o2(c[t])||C==="temporal"||y?l.set(t,{signal:w0(c[t],{type:C,timeUnit:y})},!0):l.set(t,c[t],!0);break;default:l.copyKeyFromObject(t,c)}}else{let y=t in g2e?g2e[t]({model:e,channel:s,fieldOrDatumDef:f,scaleType:p,scalePadding:h,scalePaddingInner:m,domain:c.domain,domainMin:c.domainMin,domainMax:c.domainMax,markDef:o,config:r,hasNestedOffsetScale:eM(i,s),hasSecondaryRangeChannel:!!i[Ir(s)]}):r.scale[t];y!==void 0&&l.set(t,y,!1)}}}var g2e={bins:({model:e,fieldOrDatumDef:t})=>Y(t)?WTe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>YTe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>XTe(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>QTe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>KTe(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>ZTe(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{let i=Y(e)?e.sort:void 0;return JTe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:a})=>eIe(e,t,n,r,i,o.scale,a)};function sR(e){xt(e)?u2e(e):v2e(e,"range")}function v2e(e,t){let n=e.component.scales;for(let r of e.children)t==="range"?sR(r):aR(r,t);for(let r of R(n)){let i;for(let o of e.children){let a=o.component.scales[r];if(a){let s=a.getWithExplicit(t);i=q1(i,s,t,"scale",wM((c,l)=>{switch(t){case"range":return c.step&&l.step?c.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function WTe(e,t){let n=t.bin;if(et(n)){let r=o8(e,t.field,n);return new Yn(()=>e.getSignalName(r))}else if(rn(n)&&na(n)&&n.step!==void 0)return{step:n.step}}function YTe(e,t){if(Ae([Fn,Ni,_i],e)&&t!=="nominal")return"hcl"}function XTe(e,t,n,r,i,o){if(!(li(o)?.bin||F(n)||i!=null||r!=null||Ae([Or.TIME,Or.UTC],e)))return vt(t)?!0:void 0}function QTe(e,t,n,r,i,o){if(vt(e)){if(B1(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;let{type:a,orient:s}=i;if(a==="bar"&&!(Y(r)&&(r.bin||r.timeUnit))&&(s==="vertical"&&e==="x"||s==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Or.POINT)return n.pointPadding}}function KTe(e,t,n,r,i,o=!1){if(e===void 0){if(vt(t)){let{bandPaddingInner:a,barBandPaddingInner:s,rectBandPaddingInner:c,bandWithNestedOffsetPaddingInner:l}=i;return o?l:it(a,n==="bar"?s:c)}else if(_c(t)&&r===Or.BAND)return i.offsetBandPaddingInner}}function ZTe(e,t,n,r,i,o=!1){if(e===void 0){if(vt(t)){let{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:s}=i;if(o)return s;if(n===Or.BAND)return it(a,ae(r)?{signal:`${r.signal}/2`}:r/2)}else if(_c(t)){if(n===Or.POINT)return .5;if(n===Or.BAND)return i.offsetBandPaddingOuter}}}function JTe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Rn(e)&&t==="descending"?ae(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Rn(e)&&t==="descending")return!0}function eIe(e,t,n,r,i,o,a){if(!!n&&n!=="unaggregated"&&Rn(i)){if(F(n)){let c=n[0],l=n[n.length-1];if(Oe(c)&&c<=0&&Oe(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!kc(i))return!0;if(!(Y(t)&&t.bin)&&Ae([...xr,...ure],e)){let{orient:c,type:l}=r;return Ae(["bar","area","line","trail"],l)&&(c==="horizontal"&&e==="y"||c==="vertical"&&e==="x")?!1:Ae(["bar","area"],l)&&!a?!0:o?.zero}return!1}function y2e(e,t,n,r,i=!1){let o=tIe(t,n,r,i),{type:a}=e;return Fr(t)?a!==void 0?aie(t,a)?Y(n)&&!oie(a,n.type)?(U(O.scaleTypeNotWorkWithFieldDef(a,o)),o):a:(U(O.scaleTypeNotWorkWithChannel(t,a,o)),o):o:null}function tIe(e,t,n,r){switch(t.type){case"nominal":case"ordinal":{if(Nc(e)||yb(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&U(O.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(vt(e)||_c(e)){if(Ae(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in vb)return"band";let i=n[wn(e)];return us(i)||Fc(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return Nc(e)?"time":yb(e)==="discrete"?(U(O.discreteChannelCannotEncode(e,"temporal")),"ordinal"):Y(t)&&t.timeUnit&&on(t.timeUnit).utc?"utc":"time";case"quantitative":return Nc(e)?Y(t)&&et(t.bin)?"bin-ordinal":"linear":yb(e)==="discrete"?(U(O.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(O.invalidFieldType(t.type))}function x2e(e,{ignoreRange:t}={}){C2e(e),iR(e);for(let n of iie)aR(e,n);t||sR(e)}function C2e(e){xt(e)?e.component.scales=nIe(e):e.component.scales=iIe(e)}function nIe(e){let{encoding:t,mark:n,markDef:r}=e,i={};for(let o of x4){let a=Tt(t[o]);if(a&&n===Ob&&o===Mn&&a.type===sa)continue;let s=a&&a.scale;if(a&&s!==null&&s!==!1){s??(s={});let c=eM(t,o),l=y2e(s,o,a,r,c);i[o]=new Ih(e.scaleName(`${o}`,!0),{value:l,explicit:s.type===l})}}return i}var rIe=wM((e,t)=>WI(e)-WI(t));function iIe(e){var t;let n=e.component.scales={},r={},i=e.component.resolve;for(let o of e.children){C2e(o);for(let a of R(o.component.scales))if((t=i.scale)[a]??(t[a]=BM(a,e)),i.scale[a]==="shared"){let s=r[a],c=o.component.scales[a].getWithExplicit("type");s?Xre(s.value,c.value)?r[a]=q1(s,c,"type","scale",rIe):(i.scale[a]="independent",delete r[a]):r[a]=c}}for(let o of R(r)){let a=e.scaleName(o,!0),s=r[o];n[o]=new Ih(a,s);for(let c of e.children){let l=c.component.scales[o];l&&(c.renameScale(l.get("name"),a),l.merged=!0)}}return n}var Fh=class{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}};function xt(e){return e?.type==="unit"}function $r(e){return e?.type==="facet"}function i8(e){return e?.type==="concat"}function u2(e){return e?.type==="layer"}var T0=class{constructor(t,n,r,i,o,a,s){this.type=n,this.parent=r,this.config=o,this.correctDataNames=c=>(c.from?.data&&(c.from.data=this.lookupDataSource(c.from.data)),c.from?.facet?.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c),this.parent=r,this.config=o,this.view=sr(s),this.name=t.name??i,this.title=ra(t.title)?{text:t.title}:t.title?sr(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Fh,this.projectionNameMap=r?r.projectionNameMap:new Fh,this.signalNameMap=r?r.signalNameMap:new Fh,this.data=t.data,this.description=t.description,this.transforms=O1e(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:r1e(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:Oc(t)||r?.component.data.isFaceted&&t.data===void 0},layoutSize:new Fi,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:x({scale:{},axis:{},legend:{}},a?le(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){x2e(this)}parseProjection(){JF(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){KF(this)}assembleEncodeFromView(t){let o=t,{style:n}=o,r=ie(o,["style"]),i={};for(let a of R(r)){let s=r[a];s!==void 0&&(i[a]=tt(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=tt(this.description)),this.type==="unit"||this.type==="layer")?x({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n??{}):Ge(n)?void 0:n}assembleLayout(){if(!this.layout)return;let a=this.layout,{spacing:t}=a,n=ie(a,["spacing"]),{component:r,config:i}=this,o=Foe(r.layoutHeaders,i);return x(x(x({padding:t},this.assembleDefaultLayout()),n),o?{titleBand:o}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){let{layoutHeaders:t}=this.component,n=[];for(let r of Tr)t[r].title&&n.push(_oe(this,r));for(let r of e8)n=n.concat(Ioe(this,r));return n}assembleAxes(){return Hoe(this.component.axes,this.config)}assembleLegends(){return qM(this)}assembleProjections(){return Goe(this)}assembleTitle(){let i=this.title??{},{encoding:t}=i,n=ie(i,["encoding"]),r=x(x(x({},bb(this.config.title).nonMarkTitleProperties),n),t?{encode:{update:t}}:{});if(r.text)return Ae(["unit","layer"],this.type)?Ae(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Ge(r)?void 0:r}assembleGroup(t=[]){let n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);let r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());let i=!this.parent||$r(this.parent)?oR(this):[];i.length>0&&(n.scales=i);let o=this.assembleAxes();o.length>0&&(n.axes=o);let a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return ut((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(yt[t].toLowerCase())}requestDataName(t){let n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if($r(this.parent)){let n=PM(t),r=y4(n),i=this.component.scales[r];if(i&&!i.merged){let o=i.get("type"),a=i.get("range");if(Ot(o)&&ki(a)){let s=i.get("name"),c=L4(this,r),l=a8(c);if(l){let u=K({aggregate:"distinct",field:l},{expr:"datum"});return{signal:WF(s,i,u)}}else return U(O.unknownField(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){let n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(mb(t)&&Fr(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");let n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(O.selectionNotFound(n));return r}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}},l8=class extends T0{vgField(t,n={}){let r=this.fieldDef(t);if(r)return K(r,n)}reduceFieldDef(t,n){return Oie(this.getMapping(),(r,i,o)=>{let a=li(i);return a?t(r,a,o):r},n)}forEachFieldDef(t,n){yh(this.getMapping(),(r,i)=>{let o=li(r);o&&t(o,i)},n)}};var u8=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${xe(this.transform)}`}assemble(){let i=this.transform,{density:t}=i,n=ie(i,["density"]),r=x({type:"kde",field:t},n);return this.transform.groupby&&(r.resolve="shared"),r}};var f8=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${xe(this.transform)}`}assemble(){let{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}};var d8=class e extends He{clone(){return new e(null,x({},this.filter))}constructor(t,n){super(t),this.filter=n}static make(t,n){let{config:r,mark:i,markDef:o}=n;if(Be("invalid",o,r)!=="filter")return null;let s=n.reduceFieldDef((c,l,u)=>{let f=Fr(u)&&n.getScaleComponent(u);if(f){let d=f.get("type");Rn(d)&&l.aggregate!=="count"&&!Ti(i)&&(c[l.field]=l)}return c},{});return R(s).length?new e(t,s):null}dependentFields(){return new Set(R(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${xe(this.filter)}`}assemble(){let t=R(this.filter).reduce((n,r)=>{let i=this.filter[r],o=K(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):i.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}};var p8=class e extends He{clone(){return new e(this.parent,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,a)=>i[a]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${xe(this.transform)}`}assemble(){let{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}};var h8=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${xe(this.transform)}`}assemble(){let{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}};var m8=class e extends He{clone(){return new e(null,le(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(let i of[[ai,oi],[si,Vi]]){let o=i.map(a=>{let s=Tt(n.encoding[a]);return Y(s)?s.field:Ii(s)?{expr:`${s.datum}`}:cr(s)?{expr:`${s.value}`}:void 0});(o[0]||o[1])&&(t=new e(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Mn)){let i=n.typedFieldDef(Mn);i.type===sa&&(t=new e(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){let t=(this.fields??[]).filter(Q);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${xe(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],k(x(x({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}};var g8=class e extends He{clone(){return new e(null,this.projection,le(this.fields),le(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(let r of[[ai,oi],[si,Vi]]){let i=r.map(a=>{let s=Tt(n.encoding[a]);return Y(s)?s.field:Ii(s)?{expr:`${s.datum}`}:cr(s)?{expr:`${s.value}`}:void 0}),o=r[0]===si?"2":"";(i[0]||i[1])&&(t=new e(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Q))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${xe(this.fields)} ${xe(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}};var I0=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){let{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new e(t,n)}static makeFromEncoding(t,n){let r=n.encoding,i=r.x,o=r.y;if(Y(i)&&Y(o)){let a=i.impute?i:o.impute?o:void 0;if(a===void 0)return;let s=i.impute?o:o.impute?i:void 0,{method:c,value:l,frame:u,keyvals:f}=a.impute,d=nM(n.mark,r);return new e(t,x(x(x(x(x({impute:a.field,key:s.field},c?{method:c}:{}),l!==void 0?{value:l}:{}),u?{frame:u}:{}),f!==void 0?{keyvals:f}:{}),d.length?{groupby:d}:{}))}return null}hash(){return`Impute ${xe(this.transform)}`}assemble(){let{impute:t,key:n,keyvals:r,method:i,groupby:o,value:a,frame:s=[null,null]}=this.transform,c=k(x(k(x({type:"impute",field:t,key:n},r?{keyvals:C1e(r)?this.processSequence(r):r}:{}),{method:"value"}),o?{groupby:o}:{}),{value:!i||i==="value"?a:null});if(i&&i!=="value"){let l=x({type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:s,ignorePeers:!1},o?{groupby:o}:{}),u={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[c,l,u]}else return[c]}};var v8=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${xe(this.transform)}`}assemble(){let o=this.transform,{loess:t,on:n}=o,r=ie(o,["loess","on"]);return x({type:"loess",x:n,y:t},r)}};var y8=class e extends He{clone(){return new e(null,le(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){let o=n.component.data.sources,{from:a}=r,s=null;if(b1e(a)){let c=cR(a.data,o);c||(c=new Y1(a.data),o.push(c));let l=n.getName(`lookup_${i}`);s=new En(c,l,yt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=s}else if(M1e(a)){let c=a.param;r=x({as:c},r);let l;try{l=n.getSelectionComponent(ut(c),c)}catch{throw new Error(O.cannotLookupVariableParameter(c))}if(s=l.materialized,!s)throw new Error(O.noSameUnitLookup(c))}return new e(t,r,s.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?te(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${xe({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=x({values:this.transform.from.fields},this.transform.as?{as:te(this.transform.as)}:{});else{let n=this.transform.as;Q(n)||(U(O.NO_FIELDS_NEEDS_AS),n="_lookup"),t={as:[n]}}return x(x({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}};var x8=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${xe(this.transform)}`}assemble(){let i=this.transform,{quantile:t}=i,n=ie(i,["quantile"]);return x({type:"quantile",field:t},n)}};var C8=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${xe(this.transform)}`}assemble(){let o=this.transform,{regression:t,on:n}=o,r=ie(o,["regression","on"]);return x({type:"regression",x:n,y:t},r)}};var b8=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Li((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${xe(this.transform)}`}assemble(){let{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return x(x(x({type:"pivot",field:t,value:n},i!==void 0?{limit:i}:{}),o!==void 0?{op:o}:{}),r!==void 0?{groupby:r}:{})}};var M8=class e extends He{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${xe(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}};function b2e(e){let t=0;function n(r,i){if(r instanceof Y1&&!r.isGenerator&&!Uc(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Br&&(r.parent instanceof Y1&&!i.source?(i.format=k(x({},i.format??{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof d2){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof A4||r instanceof V4||r instanceof d8||r instanceof ys||r instanceof k0||r instanceof g8||r instanceof wo||r instanceof y8||r instanceof Xc||r instanceof ha||r instanceof h8||r instanceof p8||r instanceof u8||r instanceof v8||r instanceof x8||r instanceof C8||r instanceof pa||r instanceof M8||r instanceof b8||r instanceof f8)&&i.transform.push(r.assemble()),(r instanceof da||r instanceof l2||r instanceof I0||r instanceof bs||r instanceof m8)&&i.transform.push(...r.assemble()),r instanceof En&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof En?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof En&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(let a of r.children)n(a,{name:null,source:o,transform:[]});break}}}return n}function M2e(e){let t=[],n=b2e(t);for(let r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function w2e(e,t){let n=[],r=b2e(n),i=0;for(let a of e.sources){a.hasName()||(a.dataName=`source_${i++}`);let s=a.assemble();r(a,s)}for(let a of n)a.transform.length===0&&delete a.transform;let o=0;for(let[a,s]of n.entries())(s.transform??[]).length===0&&!s.source&&n.splice(o++,0,n.splice(a,1)[0]);for(let a of n)for(let s of a.transform??[])s.type==="lookup"&&(s.from=e.outputNodes[s.from].getSource());for(let a of n)a.name in t&&(a.values=t[a.name]);return n}function oIe(e){return e==="top"||e==="left"||ae(e)?"header":"footer"}function E2e(e){for(let t of Tr)aIe(e,t);S2e(e,"x"),S2e(e,"y")}function aIe(e,t){let{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){let a=n[t],s=Yc("title",null,r,t),c=ms(a,r,{allowDisabling:!0,includeDefault:s===void 0||!!s});i.component.layoutHeaders[t].title&&(c=F(c)?c.join(", "):c,c+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);let l=Yc("labelOrient",a.header,r,t),u=a.header!==null?it(a.header?.labels,r.header.labels,!0):!1,f=Ae(["bottom","right"],l)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?c:null,facetFieldDef:a,[f]:t==="facet"?[]:[D2e(e,t,u)]}}}function D2e(e,t,n){let r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function S2e(e,t){let{child:n}=e;if(n.component.axes[t]){let{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=r8(i,t),i.axis[t]==="shared"){let o=t==="x"?"column":"row",a=r[o];for(let s of n.component.axes[t]){let c=oIe(s.get("orient"));a[c]??(a[c]=[D2e(e,o,!1)]);let l=Zf(s,"main",e.config,{header:!0});l&&a[c][0].axes.push(l),s.mainExtracted=!0}}}}function z2e(e){sw(e),aw(e,"width"),aw(e,"height")}function H2e(e){sw(e);let t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";aw(e,t),aw(e,n)}function sw(e){for(let t of e.children)t.parseLayoutSize()}function aw(e,t){let n=PM(t),r=y4(n),i=e.component.resolve,o=e.component.layoutSize,a;for(let s of e.children){let c=s.component.layoutSize.getWithExplicit(n),l=i.scale[r]??BM(r,e);if(l==="independent"&&c.value==="step"){a=void 0;break}if(a){if(l==="independent"&&a.value!==c.value){a=void 0;break}a=q1(a,c,n,"")}else a=c}if(a){for(let s of e.children)e.renameSignal(s.getName(n),e.getName(t)),s.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function L2e(e){let{size:t,component:n}=e;for(let r of xr){let i=wn(r);if(t[i]){let o=t[i];n.layoutSize.set(i,j1(o)?"step":o,!0)}else{let o=sIe(e,i);n.layoutSize.set(i,o,!1)}}}function sIe(e,t){let n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){let o=i.get("type"),a=i.get("range");if(Ot(o)){let s=Bf(r.view,t);return ki(a)||j1(s)?"step":s}else return wh(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return wh(r.view,t);{let o=Bf(r.view,t);return j1(o)?o.step:o}}}function cw(e,t,n){return K(t,x({suffix:`by_${K(e)}`},n??{}))}var lw=class e extends l8{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=w8(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!hs(t))return{facet:this.initFacetFieldDef(t,"facet")};let n=R(t),r={};for(let i of n){if(![R1,O1].includes(i)){U(O.incompatibleChannel(i,"facet"));break}let o=t[i];if(o.field===void 0){U(O.emptyFieldDef(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){let r=vh(t,n);return r.header?r.header=sr(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=_4(this),this.child.parseData()}parseLayoutSize(){sw(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),E2e(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){let t={};for(let n of Tr)for(let r of t8){let i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:a}=i;if(a){let s=Yc("titleOrient",a.header,this.config,n);if(["right","bottom"].includes(s)){let c=Jf(n,s);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[c]="end"}}if(o?.[0]){let s=n==="row"?"height":"width",c=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(s)&&(t[c]??(t[c]={}),t[c][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){let{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0,i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),k(x(x({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof e))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof e?x(x({},this.channelHasField("column")?{encode:{update:{columns:{field:K(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){let t=[],n=[],r=[];if(this.child instanceof e){if(this.child.channelHasField("column")){let i=K(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(let i of xr){let o=this.child.component.scales[i];if(o&&!o.merged){let a=o.get("type"),s=o.get("range");if(Ot(a)&&ki(s)){let c=L4(this.child,i),l=a8(c);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):U(O.unknownField(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){let{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:a,as:s}=this.getCardinalityAggregateForChild(),c=[];for(let u of Tr){let f=this.facet[u];if(f){c.push(K(f));let{bin:d,sort:p}=f;if(et(d)&&c.push(K(f,{binSuffix:"end"})),Pr(p)){let{field:h,op:m=b4}=p,g=cw(f,p);r&&i?(o.push(g),a.push("max"),s.push(g)):(o.push(h),a.push(m),s.push(g))}else if(F(p)){let h=xs(f,u);o.push(h),a.push("max"),s.push(h)}}}let l=!!r&&!!i;return x({name:t,data:n,groupby:c},l||o.length>0?{aggregate:x(x({},l?{cross:l}:{}),o.length?{fields:o,ops:a,as:s}:{})}:{})}facetSortFields(t){let{facet:n}=this,r=n[t];return r?Pr(r.sort)?[cw(r,r.sort,{expr:"datum"})]:F(r.sort)?[xs(r,t,{expr:"datum"})]:[K(r,{expr:"datum"})]:[]}facetSortOrder(t){let{facet:n}=this,r=n[t];if(r){let{sort:i}=r;return[(Pr(i)?i.order:!F(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){let{facet:t,config:n}=this;if(t.facet)return RM(t.facet,"facet",n);let r={row:["top","bottom"],column:["left","right"]};for(let i of e8)if(t[i]){let o=Yc("labelOrient",t[i]?.header,n,i);if(r[i].includes(o))return RM(t[i],i,n)}}assembleMarks(){let{child:t}=this,n=this.component.data.facetRoot,r=M2e(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[x(x(x(k(x(x({name:this.getName("cell"),type:"group"},o?{title:o}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:Tr.map(c=>this.facetSortFields(c)).flat(),order:Tr.map(c=>this.facetSortOrder(c)).flat()}}),r.length>0?{data:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup(W1e(this,[])))]}getMapping(){return this.facet}};function A2e(e,t){let{row:n,column:r}=t;if(n&&r){let i=null;for(let o of[n,r])if(Pr(o.sort)){let{field:a,op:s=b4}=o.sort;e=i=new ha(e,{joinaggregate:[{op:s,field:a,as:cw(o,o.sort,{forAs:!0})}],groupby:[K(o)]})}return i}return null}function cR(e,t){for(let n of t){let r=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;let i=e.format?.mesh,o=r.format?.feature;if(i&&o)continue;let a=e.format?.feature;if((a||o)&&a!==o)continue;let s=r.format?.mesh;if(!((i||s)&&i!==s)){if(A0(e)&&A0(r)){if(kr(e.values,r.values))return n}else if(Uc(e)&&Uc(r)){if(e.url===r.url)return n}else if(EM(e)&&e.name===n.dataName)return n}}return null}function cIe(e,t){if(e.data||!e.parent){if(e.data===null){let r=new Y1({values:[]});return t.push(r),r}let n=cR(e.data,t);if(n)return la(e.data)||(n.data.format=MI({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{let r=new Y1(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function lIe(e,t,n){let r=0;for(let i of t.transforms){let o,a;if(N1e(i))a=e=new k0(e,i),o="derived";else if(Sh(i)){let s=Zoe(i);a=e=Br.makeWithAncestors(e,{},s,n)??e,e=new ys(e,t,i.filter)}else if(CM(i))a=e=da.makeFromTransform(e,i,t),o="number";else if(k1e(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new Br(e,{[i.field]:o}),n.set(i.field,o,!1)),a=e=l2.makeFromTransform(e,i);else if(T1e(i))a=e=wo.makeFromTransform(e,i),o="number",Ah(t)&&(e=new pa(e));else if(xM(i))a=e=y8.make(e,t,i,r++),o="derived";else if(L1e(i))a=e=new Xc(e,i),o="number";else if(A1e(i))a=e=new ha(e,i),o="number";else if(I1e(i))a=e=bs.makeFromTransform(e,i),o="derived";else if(F1e(i))a=e=new h8(e,i),o="derived";else if(R1e(i))a=e=new f8(e,i),o="derived";else if(V1e(i))a=e=new p8(e,i),o="derived";else if(w1e(i))a=e=new b8(e,i),o="derived";else if(H1e(i))e=new M8(e,i);else if(_1e(i))a=e=I0.makeFromTransform(e,i),o="derived";else if(S1e(i))a=e=new u8(e,i),o="derived";else if(E1e(i))a=e=new x8(e,i),o="derived";else if(D1e(i))a=e=new C8(e,i),o="derived";else if(z1e(i))a=e=new v8(e,i),o="derived";else{U(O.invalidTransformIgnored(i));continue}if(a&&o!==void 0)for(let s of a.producedFields()??[])n.set(s,o,!1)}return e}function _4(e){let t=cIe(e,e.component.data.sources),{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,a=!(i&&(la(i)||Uc(i)||A0(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new SM;la(i)?(LF(i)?t=new V4(t,i.sequence):Eh(i)&&(t=new A4(t,i.graticule)),a.parseNothing=!0):i?.format?.parse===null&&(a.parseNothing=!0),t=Br.makeExplicit(t,e,a)??t,t=new pa(t);let s=e.parent&&u2(e.parent);(xt(e)||$r(e))&&s&&(t=da.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=lIe(t,e,a));let c=e2e(e),l=Joe(e);t=Br.makeWithAncestors(t,{},x(x({},c),l),a)??t,xt(e)&&(t=m8.parseAll(t,e),t=g8.parseAll(t,e)),(xt(e)||$r(e))&&(s||(t=da.makeFromEncoding(t,e)??t),t=l2.makeFromEncoding(t,e)??t,t=k0.parseAllForSortIndex(t,e));let u=e.getDataName(yt.Raw),f=new En(t,u,yt.Raw,r);if(n[u]=f,t=f,xt(e)){let m=wo.makeFromEncoding(t,e);m&&(t=m,Ah(e)&&(t=new pa(t))),t=I0.makeFromEncoding(t,e)??t,t=bs.makeFromEncoding(t,e)??t}xt(e)&&(t=d8.make(t,e)??t);let d=e.getDataName(yt.Main),p=new En(t,d,yt.Main,r);n[d]=p,t=p,xt(e)&&zoe(e,p);let h=null;if($r(e)){let m=e.getName("facet");t=A2e(t,e.facet)??t,h=new d2(t,e,m,p.getSource()),n[m]=h}return k(x({},e.component.data),{outputNodes:n,outputNodeRefCounts:r,raw:f,main:p,facetRoot:h,ancestorParse:a})}var uw=class extends T0{constructor(t,n,r,i){super(t,"concat",n,r,i,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&U(O.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(t).map((o,a)=>w8(o,this,this.getName(`concat_${a}`),void 0,i))}parseData(){this.component.data=_4(this);for(let t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(let t of this.children){t.parseSelections();for(let n of R(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(let t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(let t of this.children)t.parseAxesAndHeaders()}getChildren(t){return E4(t)?t.vconcat:$f(t)?t.hconcat:t.concat}parseLayoutSize(){H2e(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){let t=n8(this);for(let n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{let n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return x(x(x(x({type:"group",name:t.getName("group")},n?{title:n}:{}),r?{style:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){let t=this.layout.columns;return k(x({},t!=null?{columns:t}:{}),{bounds:"full",align:"each"})}};function uIe(e){return e===!1||e===null}var fIe=k(x({disable:1,gridScale:1,scale:1},aF),{labelExpr:1,encode:1}),lR=R(fIe),fw=class e extends Fi{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new e(le(this.explicit),le(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!uIe(this.get(t))}hasOrientSignalRef(){return ae(this.explicit.orient)}};function V2e(e,t,n){let{encoding:r,config:i}=e,o=Tt(r[t])??Tt(r[Ir(t)]),a=e.axis(t)||{},{format:s,formatType:c}=a;if(ps(c))return x({text:bo({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:c,config:i})},n);if(s===void 0&&c===void 0&&i.customFormatTypes){if(Ic(o)==="quantitative"){if(Fc(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return x({text:bo({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i})},n);if(i.numberFormatType)return x({text:bo({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i})},n)}if(Ic(o)==="temporal"&&i.timeFormatType&&Y(o)&&!o.timeUnit)return x({text:bo({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i})},n)}return n}function N2e(e){return xr.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[yIe(n,e)]),t),{})}var pIe={bottom:"top",top:"bottom",left:"right",right:"left"};function _2e(e){let{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(let i of e.children){i.parseAxesAndHeaders();for(let o of R(i.component.axes))n.axis[o]=r8(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=hIe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(let i of xr){for(let o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(let a of o.component.axes[i]){let{value:s,explicit:c}=a.getWithExplicit("orient");if(!ae(s)){if(r[s]>0&&!c){let l=pIe[s];r[s]>r[l]&&a.set("orient",l,!1)}r[s]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(let[o,a]of(t[i]||[]).entries())o>0&&a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function hIe(e,t){if(e){if(e.length!==t.length)return;let n=e.length;for(let r=0;r<n;r++){let i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){let a=i.getWithExplicit("orient"),s=o.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;e[r]=mIe(i,o)}}}else return t.map(n=>n.clone());return e}function mIe(e,t){for(let n of lR){let r=q1(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return Eb(i,o);case"gridScale":return{explicit:i.explicit,value:it(i.value,o.value)}}return qf(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function gIe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(ae(n.labelAngle)?n.labelAngle:g4(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===GF(r,i))return!0}return e===n[t]}var vIe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function yIe(e,t){let n=t.axis(e),r=new fw,i=Tt(t.encoding[e]),{mark:o,config:a}=t,s=n?.orient||a[e==="x"?"axisX":"axisY"]?.orient||a.axis?.orient||Noe(e),c=t.getScaleComponent(e).get("type"),l=Aoe(e,c,s,t.config),u=n!==void 0?!n:Vh("disable",a.style,n?.style,l).configValue;if(r.set("disable",u,n!==void 0),u)return r;n=n||{};let f=Voe(i,n,e,a.style,l),d=Ub(n.formatType,i,c),p=Bb(i,i.type,n.format,n.formatType,a,!0),h={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:c,orient:s,labelAngle:f,format:p,formatType:d,mark:o,config:a};for(let v of lR){let y=v in UF?UF[v](h):sF(v)?n[v]:void 0,C=y!==void 0,b=gIe(y,v,n,t,e);if(C&&b)r.set(v,y,b);else{let{configValue:M=void 0,configFrom:S=void 0}=sF(v)&&v!=="values"?Vh(v,a.style,n.style,l):{},w=M!==void 0;C&&!w?r.set(v,y,b):(S!=="vgAxisConfig"||vIe.has(v)&&w||Pc(M)||ae(M))&&r.set(v,M,!1)}}let m=n.encoding??{},g=Jb.reduce((v,y)=>{if(!r.hasAxisPart(y))return v;let C=$M(m[y]??{},t),b=y==="labels"?V2e(t,e,C):C;return b!==void 0&&!Ge(b)&&(v[y]={update:b}),v},{});return Ge(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function k2e({encoding:e,size:t}){for(let n of xr){let r=wn(n);j1(t[r])&&ca(e[n])&&(delete t[r],U(O.stepDropped(r)))}return t}var T2e={vgMark:"arc",encodeEntry:e=>x(x(x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),yn("x",e,{defaultPos:"mid"})),yn("y",e,{defaultPos:"mid"})),W1(e,"radius")),W1(e,"theta"))};var I2e={vgMark:"area",encodeEntry:e=>x(x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),H4("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"})),H4("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"})),Qf(e))};var F2e={vgMark:"rect",encodeEntry:e=>x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),W1(e,"x")),W1(e,"y"))};var R2e={vgMark:"shape",encodeEntry:e=>x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{let{encoding:t}=e,n=t.shape;return[x({type:"geoshape",projection:e.projectionName()},n&&Y(n)&&n.type===sa?{field:K(n,{expr:"datum"})}:{})]}};var O2e={vgMark:"image",encodeEntry:e=>x(x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),W1(e,"x")),W1(e,"y")),z4(e,"url"))};var P2e={vgMark:"line",encodeEntry:e=>x(x(x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),yn("x",e,{defaultPos:"mid"})),yn("y",e,{defaultPos:"mid"})),jt("size",e,{vgChannel:"strokeWidth"})),Qf(e))},$2e={vgMark:"trail",encodeEntry:e=>x(x(x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),yn("x",e,{defaultPos:"mid"})),yn("y",e,{defaultPos:"mid"})),jt("size",e)),Qf(e))};function uR(e,t){let{config:n}=e;return x(x(x(x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),yn("x",e,{defaultPos:"mid"})),yn("y",e,{defaultPos:"mid"})),jt("size",e)),jt("angle",e)),xIe(e,n,t))}function xIe(e,t,n){return n?{shape:{value:n}}:jt("shape",e)}var B2e={vgMark:"symbol",encodeEntry:e=>uR(e)},U2e={vgMark:"symbol",encodeEntry:e=>uR(e,"circle")},j2e={vgMark:"symbol",encodeEntry:e=>uR(e,"square")};var q2e={vgMark:"rect",encodeEntry:e=>x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),W1(e,"x")),W1(e,"y"))};var G2e={vgMark:"rule",encodeEntry:e=>{let{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:x(x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),H4("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),H4("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),jt("size",e,{vgChannel:"strokeWidth"}))}};var W2e={vgMark:"text",encodeEntry:e=>{let{config:t,encoding:n}=e;return x(x(x(x(x(x(x(x(x(x({},xn(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),yn("x",e,{defaultPos:"mid"})),yn("y",e,{defaultPos:"mid"})),z4(e)),jt("size",e,{vgChannel:"fontSize"})),jt("angle",e)),VM("align",CIe(e.markDef,n,t))),VM("baseline",bIe(e.markDef,n,t))),yn("radius",e,{defaultPos:null})),yn("theta",e,{defaultPos:null}))}};function CIe(e,t,n){if(Be("align",e,n)===void 0)return"center"}function bIe(e,t,n){if(Be("baseline",e,n)===void 0)return"middle"}var Y2e={vgMark:"rect",encodeEntry:e=>{let{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",o=r==="horizontal"?"height":"width";return k(x(x(x(x({},xn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),yn("x",e,{defaultPos:"mid",vgChannel:"xc"})),yn("y",e,{defaultPos:"mid",vgChannel:"yc"})),jt("size",e,{defaultValue:MIe(e),vgChannel:i})),{[o]:tt(Be("thickness",n,t))})}};function MIe(e){let{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",o=e.getScaleComponent(r==="horizontal"?"x":"y"),a=Be("size",n,t,{vgChannel:i})??t.tick.bandSize;if(a!==void 0)return a;{let s=o?o.get("range"):void 0;return s&&ki(s)&&Oe(s.step)?s.step*3/4:L0(t.view,i)*3/4}}var dw={arc:T2e,area:I2e,bar:F2e,circle:U2e,geoshape:R2e,image:O2e,line:P2e,point:B2e,rect:q2e,rule:G2e,square:j2e,text:W2e,tick:Y2e,trail:$2e};function K2e(e){if(Ae([D0,S0,lie],e.mark)){let t=nM(e.mark,e.encoding);if(t.length>0)return wIe(e,t)}else if(e.mark===E0){let t=Mb.some(n=>Be(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return SIe(e)}return fR(e)}var X2e="faceted_path_";function wIe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:X2e+e.requestDataName(yt.Main),data:e.requestDataName(yt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:fR(e,{fromPrefix:X2e})}]}var Q2e="stack_group_";function SIe(e){let[t]=fR(e,{fromPrefix:Q2e}),n=e.scaleName(e.stack.fieldChannel),r=(l={})=>e.vgField(e.stack.fieldChannel,l),i=(l,u)=>{let f=[r({prefix:"min",suffix:"start",expr:u}),r({prefix:"max",suffix:"start",expr:u}),r({prefix:"min",suffix:"end",expr:u}),r({prefix:"max",suffix:"end",expr:u})];return`${l}(${f.map(d=>`scale('${n}',${d})`).join(",")})`},o,a;e.stack.fieldChannel==="x"?(o=k(x({},Ac(t.encode.update,["y","yc","y2","height",...Mb])),{x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}}),a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update=k(x({},In(t.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(o=k(x({},Ac(t.encode.update,["x","xc","x2","width"])),{y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}}),a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update=k(x({},In(t.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(let l of Mb){let u=Co(l,e.markDef,e.config);t.encode.update[l]?(o[l]=t.encode.update[l],delete t.encode.update[l]):u&&(o[l]=tt(u)),u&&(t.encode.update[l]={value:0})}let s=[];if(e.stack.groupbyChannels?.length>0)for(let l of e.stack.groupbyChannels){let u=e.fieldDef(l),f=K(u);f&&s.push(f),(u?.bin||u?.timeUnit)&&s.push(K(u,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((l,u)=>{if(t.encode.update[u])return k(x({},l),{[u]:t.encode.update[u]});{let f=Co(u,e.markDef,e.config);return f!==void 0?k(x({},l),{[u]:tt(f)}):l}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(yt.Main),name:Q2e+e.requestDataName(yt.Main),groupby:s,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}function EIe(e){let{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,a=t.order;if(!(!F(a)&&cr(a)&&cb(a.value)||!a&&cb(Be("order",i,o)))){if((F(a)||Y(a))&&!n)return Sb(a,{expr:"datum"});if(Ti(r)){let s=i.orient==="horizontal"?"y":"x",c=t[s];if(Y(c)){let l=c.sort;if(F(l))return{field:K(c,{prefix:s,suffix:"sort_index",expr:"datum"})};if(Pr(l))return{field:K({aggregate:Rf(e.encoding)?l.op:void 0,field:l.field},{expr:"datum"})};if(jb(l)){let u=e.fieldDef(l.encoding);return{field:K(u,{expr:"datum"}),order:l.order}}else return l===null?void 0:{field:K(c,{binSuffix:e.stack?.impute?"mid":void 0,expr:"datum"})}}return}}}function fR(e,t={fromPrefix:""}){let{mark:n,markDef:r,encoding:i,config:o}=e,a=it(r.clip,DIe(e),zIe(e)),s=FI(r),c=i.key,l=EIe(e),u=HIe(e),f=Be("aria",r,o),d=dw[n].postEncodingTransform?dw[n].postEncodingTransform(e):null;return[x(k(x(x(x(x(x(x({name:e.getName("marks"),type:dw[n].vgMark},a?{clip:!0}:{}),s?{style:s}:{}),c?{key:c.field}:{}),l?{sort:l}:{}),u||{}),f===!1?{aria:f}:{}),{from:{data:t.fromPrefix+e.requestDataName(yt.Main)},encode:{update:dw[n].encodeEntry(e)}}),d?{transform:d}:{})]}function DIe(e){let t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function zIe(e){let t=e.component.projection;return t&&!t.isFit?!0:void 0}function HIe(e){if(!e.component.selection)return null;let t=R(e.component.selection).length,n=t,r=e.parent;for(;r&&n===0;)n=R(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip}:null}var S8=class extends l8{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,MF(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];let a=ci(t.mark)?x({},t.mark):{type:t.mark},s=a.type;a.filled===void 0&&(a.filled=f1e(a,o,{graticule:t.data&&Eh(t.data)}));let c=this.encoding=Fie(t.encoding||{},s,a.filled,o);this.markDef=hM(a,c,o),this.size=k2e({encoding:c,size:MF(t)?x(x(x({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):i}),this.stack=pM(this.markDef,c),this.specifiedScales=this.initScales(s,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegends(c),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Pf(l))}get hasProjection(){let{encoding:t}=this,n=this.mark===Ob,r=t&&ere.some(i=>Ne(t[i]));return n||r}scaleDomain(t){let n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return x4.reduce((r,i)=>{let o=Tt(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){let{domain:n,range:r}=t,i=sr(t);return F(n)&&(i.domain=n.map(Rr)),F(r)&&(i.range=r.map(Rr)),i}initAxes(t){return xr.reduce((n,r)=>{let i=t[r];if(Ne(i)||r===gt&&Ne(t.x2)||r===nn&&Ne(t.y2)){let o=Ne(i)?i.axis:void 0;n[r]=o&&this.initAxis(x({},o))}return n},{})}initAxis(t){let n=R(t),r={};for(let i of n){let o=t[i];r[i]=Pc(o)?wb(o):Rr(o)}return r}initLegends(t){return dre.reduce((n,r)=>{let i=Tt(t[r]);if(i&&hre(r)){let o=i.legend;n[r]=o&&sr(o)}return n},{})}parseData(){this.component.data=_4(this)}parseLayoutSize(){L2e(this)}parseSelections(){this.component.selection=Doe(this,this.selection)}parseMarkGroup(){this.component.mark=K2e(this)}parseAxesAndHeaders(){this.component.axes=N2e(this)}assembleSelectionTopLevelSignals(t){return Y1e(this,t)}assembleSignals(){return[...FM(this),...G1e(this,[])]}assembleSelectionData(t){return X1e(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return n8(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!u2(this.parent))&&(t=NF(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){let{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return vs(this.encoding,t)}fieldDef(t){let n=this.encoding[t];return li(n)}typedFieldDef(t){let n=this.fieldDef(t);return Sn(n)?n:null}};var pw=class e extends T0{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);let a=x(x(x({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((s,c)=>{if(Bc(s))return new e(s,this,this.getName(`layer_${c}`),a,o);if(Cr(s))return new S8(s,this,this.getName(`layer_${c}`),a,o);throw new Error(O.invalidSpec(s))})}parseData(){this.component.data=_4(this);for(let t of this.children)t.parseData()}parseLayoutSize(){z2e(this)}parseSelections(){this.component.selection={};for(let t of this.children){t.parseSelections();for(let n of R(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(let t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){_2e(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),FM(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),n8(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){let t=new Set;for(let r of this.children)for(let i of te(r.assembleGroupStyle()))t.add(i);let n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(let n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Q1e(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),qM(this))}};function w8(e,t,n,r,i){if(Oc(e))return new lw(e,t,n,i);if(Bc(e))return new pw(e,t,n,r,i);if(Cr(e))return new S8(e,t,n,r,i);if(CF(e))return new uw(e,t,n,i);throw new Error(O.invalidSpec(e))}function Z2e(e,t={}){t.logger&&Are(t.logger),t.fieldTitle&&rF(t.fieldTitle);try{let n=dM(Fa(t.config,e.config)),r=MM(e,n),i=w8(r,null,"",void 0,n);return i.parse(),i2e(i.component.data,i),{spec:AIe(i,LIe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Vre(),t.fieldTitle&&kie()}}function LIe(e,t,n,r){let i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Q(t)&&(t={type:t}),i&&o&&j1e(t.type)){if(i==="step"&&o==="step")U(O.droppingFit()),t.type="pad";else if(i==="step"||o==="step"){let a=i==="step"?"width":"height";U(O.droppingFit(y4(a)));let s=a==="width"?"height":"width";t.type=q1e(s)}}return x(x(x({},R(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t}),HF(n,!1)),HF(e,!0))}function AIe(e,t,n={},r){let i=e.config?c1e(e.config):void 0,o=[].concat(e.assembleSelectionData([]),w2e(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),c=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0),u=e.assembleLayoutSignals();u=u.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);let p=t,{params:f}=p,d=ie(p,["params"]);return x(x(x(x(k(x(x(x(x(x({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),d),s?{title:s}:{}),c?{style:c}:{}),l?{encode:{update:l}}:{}),{data:o}),a.length>0?{projections:a}:{}),e.assembleGroup([...u,...e.assembleSelectionTopLevelSignals([]),...fM(f)])),i?{config:i}:{}),r?{usermeta:r}:{})}var VIe=jne.version;function NIe(e){let[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var pR=NIe;var xR={};br(xR,{carbong10:()=>LFe,carbong100:()=>VFe,carbong90:()=>AFe,carbonwhite:()=>HFe,dark:()=>ZIe,excel:()=>JIe,fivethirtyeight:()=>nFe,ggplot2:()=>rFe,googlecharts:()=>mFe,latimes:()=>sFe,powerbi:()=>EFe,quartz:()=>cFe,urbaninstitute:()=>hFe,version:()=>NFe,vox:()=>lFe});var _Ie="vega-themes",kIe="2.14.0",TIe="Themes for stylized Vega and Vega-Lite visualizations.",IIe=["vega","vega-lite","themes","style"],FIe="BSD-3-Clause",RIe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},OIe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],PIe="build/vega-themes.js",$Ie="build/vega-themes.module.js",BIe="build/vega-themes.min.js",UIe="build/vega-themes.min.js",jIe="build/vega-themes.module.d.ts",qIe={type:"git",url:"https://github.com/vega/vega-themes.git"},GIe=["src","build"],WIe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},YIe={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},XIe={vega:"*","vega-lite":"*"},QIe={},KIe={name:_Ie,version:kIe,description:TIe,keywords:IIe,license:FIe,author:RIe,contributors:OIe,main:PIe,module:$Ie,unpkg:BIe,jsdelivr:UIe,types:jIe,repository:qIe,files:GIe,scripts:WIe,devDependencies:YIe,peerDependencies:XIe,dependencies:QIe},E8="#fff",J2e="#888",ZIe={background:"#333",view:{stroke:J2e},title:{color:E8,subtitleColor:E8},style:{"guide-label":{fill:E8},"guide-title":{fill:E8}},axis:{domainColor:E8,gridColor:J2e,tickColor:E8}},F0="#4572a7",JIe={background:"#fff",arc:{fill:F0},area:{fill:F0},line:{stroke:F0,strokeWidth:2},path:{stroke:F0},rect:{fill:F0},shape:{stroke:F0},symbol:{fill:F0,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},R0="#30a2da",hR="#cbcbcb",eFe="#999",tFe="#333",eae="#f0f0f0",tae="#333",nFe={arc:{fill:R0},area:{fill:R0},axis:{domainColor:hR,grid:!0,gridColor:hR,gridWidth:1,labelColor:eFe,labelFontSize:10,titleColor:tFe,tickColor:hR,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:eae,group:{fill:eae},legend:{labelColor:tae,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:tae,titleFontSize:14,titlePadding:10},line:{stroke:R0,strokeWidth:2},path:{stroke:R0,strokeWidth:.5},rect:{fill:R0},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:R0},bar:{binSpacing:2,fill:R0,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},O0="#000",rFe={group:{fill:"#e5e5e5"},arc:{fill:O0},area:{fill:O0},line:{stroke:O0},path:{stroke:O0},rect:{fill:O0},shape:{stroke:O0},symbol:{fill:O0,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},iFe=22,oFe="normal",nae="Benton Gothic, sans-serif",rae=11.5,aFe="normal",P0="#82c6df",mR="Benton Gothic Bold, sans-serif",iae="normal",oae=13,Rh={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},sFe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:mR,fontSize:iFe,fontWeight:oFe},arc:{fill:P0},area:{fill:P0},line:{stroke:P0,strokeWidth:2},path:{stroke:P0},rect:{fill:P0},shape:{stroke:P0},symbol:{fill:P0,size:30},axis:{labelFont:nae,labelFontSize:rae,labelFontWeight:aFe,titleFont:mR,titleFontSize:oae,titleFontWeight:iae},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:nae,labelFontSize:rae,symbolType:"square",titleFont:mR,titleFontSize:oae,titleFontWeight:iae},range:{category:Rh["category-6"],diverging:Rh["fireandice-6"],heatmap:Rh["fire-7"],ordinal:Rh["fire-7"],ramp:Rh["fire-7"]}},$0="#ab5787",hw="#979797",cFe={background:"#f9f9f9",arc:{fill:$0},area:{fill:$0},line:{stroke:$0},path:{stroke:$0},rect:{fill:$0},shape:{stroke:$0},symbol:{fill:$0,size:30},axis:{domainColor:hw,domainWidth:.5,gridWidth:.2,labelColor:hw,tickColor:hw,tickWidth:.2,titleColor:hw},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},B0="#3e5c69",lFe={background:"#fff",arc:{fill:B0},area:{fill:B0},line:{stroke:B0},path:{stroke:B0},rect:{fill:B0},shape:{stroke:B0},symbol:{fill:B0},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},p2="#1696d2",aae="#000000",uFe="#FFFFFF",mw="Lato",gR="Lato",fFe="Lato",dFe="#DEDDDD",pFe=18,Oh={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},hFe={background:uFe,title:{anchor:"start",fontSize:pFe,font:mw},axisX:{domain:!0,domainColor:aae,domainWidth:1,grid:!1,labelFontSize:12,labelFont:gR,labelAngle:0,tickColor:aae,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:mw},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:dFe,gridWidth:1,labelFontSize:12,labelFont:gR,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:mw,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:gR,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:mw,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Oh["six-groups-cat-1"],diverging:Oh["diverging-colors"],heatmap:Oh["diverging-colors"],ordinal:Oh["six-groups-seq"],ramp:Oh["shades-blue"]},area:{fill:p2},rect:{fill:p2},line:{color:p2,stroke:p2,strokeWidth:5},trail:{color:p2,stroke:p2,strokeWidth:0,size:1},path:{stroke:p2,strokeWidth:.5},point:{filled:!0},text:{font:fFe,color:p2,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:p2,stroke:null}},arc:{fill:p2},shape:{stroke:p2},symbol:{fill:p2,size:30}},U0="#3366CC",sae="#ccc",gw="Arial, sans-serif",mFe={arc:{fill:U0},area:{fill:U0},path:{stroke:U0},rect:{fill:U0},shape:{stroke:U0},symbol:{stroke:U0},circle:{fill:U0},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:gw,fontSize:12},"guide-title":{font:gw,fontSize:12},"group-title":{font:gw,fontSize:12}},title:{font:gw,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:sae,tickColor:sae,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},yR=e=>e*(1/3+1),cae=yR(9),lae=yR(10),uae=yR(12),Ph="Segoe UI",fae="wf_standard-font, helvetica, arial, sans-serif",dae="#252423",$h="#605E5C",pae="transparent",gFe="#C8C6C4",ga="#118DFF",vFe="#12239E",yFe="#E66C37",xFe="#6B007B",CFe="#E044A7",bFe="#744EC2",MFe="#D9B300",wFe="#D64550",gae=ga,vae="#DEEFFF",hae=[vae,gae],SFe=[vae,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",gae],EFe={view:{stroke:pae},background:pae,font:Ph,header:{titleFont:fae,titleFontSize:uae,titleColor:dae,labelFont:Ph,labelFontSize:lae,labelColor:$h},axis:{ticks:!1,grid:!1,domain:!1,labelColor:$h,labelFontSize:cae,titleFont:fae,titleColor:dae,titleFontSize:uae,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:gFe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ga},line:{stroke:ga,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Ph,fontSize:cae,fill:$h},arc:{fill:ga},area:{fill:ga,line:!0,opacity:.6},path:{stroke:ga},rect:{fill:ga},point:{fill:ga,filled:!0,size:75},shape:{stroke:ga},symbol:{fill:ga,strokeWidth:1.5,size:50},legend:{titleFont:Ph,titleFontWeight:"bold",titleColor:$h,labelFont:Ph,labelFontSize:lae,labelColor:$h,symbolType:"circle",symbolSize:75},range:{category:[ga,vFe,yFe,xFe,CFe,bFe,MFe,wFe],diverging:hae,heatmap:hae,ordinal:SFe}},vR='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',mae=400,DFe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],zFe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function vw({type:e,background:t}){let n=e==="dark"?"#161616":"#ffffff",r=e==="dark"?"#f4f4f4":"#161616",i=e==="dark"?DFe:zFe,o=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:vR,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:vR,fill:r,fontWeight:mae},"guide-title":{font:vR,fill:r,fontWeight:mae}},range:{category:i,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}var HFe=vw({type:"light",background:"#ffffff"}),LFe=vw({type:"light",background:"#f4f4f4"}),AFe=vw({type:"dark",background:"#262626"}),VFe=vw({type:"dark",background:"#161616"}),NFe=KIe.version;var _Fe="vega-tooltip",kFe="0.34.0",TFe="A tooltip plugin for Vega-Lite and Vega visualizations.",IFe=["vega-lite","vega","tooltip"],FFe={type:"git",url:"https://github.com/vega/vega-tooltip.git"},RFe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},OFe=["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],PFe="BSD-3-Clause",$Fe={url:"https://github.com/vega/vega-tooltip/issues"},BFe="https://github.com/vega/vega-tooltip#readme",UFe="build/vega-tooltip.js",jFe="build/vega-tooltip.module.js",qFe="build/vega-tooltip.min.js",GFe="build/vega-tooltip.min.js",WFe="build/vega-tooltip.module.d.ts",YFe=["src","build","types"],XFe={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"rimraf build && rimraf src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prepare:"yarn copy:data",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},QFe={"@babel/core":"^7.22.10","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.10","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@types/jest":"^29.5.3","@typescript-eslint/eslint-plugin":"^6.3.0","@typescript-eslint/parser":"^6.3.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.46.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","gh-pages":"^6.1.0",jest:"^29.6.2","jest-environment-jsdom":"^29.6.2",path:"^0.12.7",prettier:"^3.0.1","release-it":"^16.1.3",rollup:"^4.6.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.3",sass:"^1.64.2",typescript:"~5.3.2","vega-datasets":"^2.7.0","vega-typings":"^0.24.2"},KFe={"vega-util":"^1.17.2"},ZFe={name:_Fe,version:kFe,description:TFe,keywords:IFe,repository:FFe,author:RFe,collaborators:OFe,license:PFe,bugs:$Fe,homepage:BFe,main:UFe,module:jFe,unpkg:qFe,jsdelivr:GFe,types:WFe,files:YFe,scripts:XFe,devDependencies:QFe,dependencies:KFe};function JFe(e,t,n,r){if(F(e))return`[${e.map(o=>t(Q(o)?o:yae(o,n))).join(", ")}]`;if(ne(e)){let o="",i=e,{title:a,image:s}=i,c=ie(i,["title","image"]);a&&(o+=`<h2>${t(a)}</h2>`),s&&(o+=`<img src="${new URL(t(s),r||location.href).href}">`);let l=Object.keys(c);if(l.length>0){o+="<table>";for(let u of l){let f=c[u];f!==void 0&&(ne(f)&&(f=yae(f,n)),o+=`<tr><td class="key">${t(u)}</td><td class="value">${t(f)}</td></tr>`)}o+="</table>"}return o||"{}"}return t(e)}function eRe(e){let t=[];return function(n,r){if(typeof r!="object"||r===null)return r;let i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function yae(e,t){return JSON.stringify(e,eRe(t))}var tRe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`,xae="vg-tooltip-element",nRe={offsetX:10,offsetY:10,id:xae,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:rRe,maxDepth:2,formatTooltip:JFe,baseURL:""};function rRe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function iRe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return tRe.toString().replace(xae,e)}function oRe(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}var yw=class{constructor(t){this.options=x(x({},nRe),t);let n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){let r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=iRe(n);let i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);let{x:o,y:a}=oRe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${a}px`,this.el.style.left=`${o}px`}},uAt=ZFe.version;function aRe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var CR,Cae;function sRe(){return Cae||(Cae=1,CR=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),CR}var cRe=Dt;Dt.Node=G0;Dt.create=Dt;function Dt(e){var t=this;if(t instanceof Dt||(t=new Dt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}Dt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Dt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Dt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Dt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)uRe(this,arguments[e]);return this.length};Dt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)fRe(this,arguments[e]);return this.length};Dt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Dt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Dt.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};Dt.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};Dt.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Dt.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Dt.prototype.map=function(e,t){t=t||this;for(var n=new Dt,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};Dt.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Dt,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};Dt.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};Dt.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};Dt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Dt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Dt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Dt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};Dt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Dt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};Dt.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var o=[],r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=lRe(this,i,n[r]);return o};Dt.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function lRe(e,t,n){var r=t===e.head?new G0(n,null,t,e):new G0(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function uRe(e,t){e.tail=new G0(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function fRe(e,t){e.head=new G0(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function G0(e,t,n,r){if(!(this instanceof G0))return new G0(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{sRe()(Dt)}catch{}var dRe=cRe,j0=Symbol("max"),Kc=Symbol("length"),D8=Symbol("lengthCalculator"),jh=Symbol("allowStale"),q0=Symbol("maxAge"),Qc=Symbol("dispose"),bae=Symbol("noDisposeOnSet"),Ur=Symbol("lruList"),va=Symbol("cache"),kae=Symbol("updateAgeOnGet"),bR=()=>1,ER=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[j0]=t.max||1/0;let n=t.length||bR;if(this[D8]=typeof n!="function"?bR:n,this[jh]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[q0]=t.maxAge||0,this[Qc]=t.dispose,this[bae]=t.noDisposeOnSet||!1,this[kae]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[j0]=t||1/0,Bh(this)}get max(){return this[j0]}set allowStale(t){this[jh]=!!t}get allowStale(){return this[jh]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[q0]=t,Bh(this)}get maxAge(){return this[q0]}set lengthCalculator(t){typeof t!="function"&&(t=bR),t!==this[D8]&&(this[D8]=t,this[Kc]=0,this[Ur].forEach(n=>{n.length=this[D8](n.value,n.key),this[Kc]+=n.length})),Bh(this)}get lengthCalculator(){return this[D8]}get length(){return this[Kc]}get itemCount(){return this[Ur].length}rforEach(t,n){n=n||this;for(let r=this[Ur].tail;r!==null;){let i=r.prev;Mae(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Ur].head;r!==null;){let i=r.next;Mae(this,t,r,n),r=i}}keys(){return this[Ur].toArray().map(t=>t.key)}values(){return this[Ur].toArray().map(t=>t.value)}reset(){this[Qc]&&this[Ur]&&this[Ur].length&&this[Ur].forEach(t=>this[Qc](t.key,t.value)),this[va]=new Map,this[Ur]=new dRe,this[Kc]=0}dump(){return this[Ur].map(t=>Mw(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ur]}set(t,n,r){if(r=r||this[q0],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,o=this[D8](n,t);if(this[va].has(t)){if(o>this[j0])return H8(this,this[va].get(t)),!1;let c=this[va].get(t).value;return this[Qc]&&(this[bae]||this[Qc](t,c.value)),c.now=i,c.maxAge=r,c.value=n,this[Kc]+=o-c.length,c.length=o,this.get(t),Bh(this),!0}let a=new DR(t,n,o,i,r);return a.length>this[j0]?(this[Qc]&&this[Qc](t,n),!1):(this[Kc]+=a.length,this[Ur].unshift(a),this[va].set(t,this[Ur].head),Bh(this),!0)}has(t){if(!this[va].has(t))return!1;let n=this[va].get(t).value;return!Mw(this,n)}get(t){return MR(this,t,!0)}peek(t){return MR(this,t,!1)}pop(){let t=this[Ur].tail;return t?(H8(this,t),t.value):null}del(t){H8(this,this[va].get(t))}load(t){this.reset();let n=Date.now();for(let r=t.length-1;r>=0;r--){let i=t[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let a=o-n;a>0&&this.set(i.k,i.v,a)}}}prune(){this[va].forEach((t,n)=>MR(this,n,!1))}},MR=(e,t,n)=>{let r=e[va].get(t);if(r){let i=r.value;if(Mw(e,i)){if(H8(e,r),!e[jh])return}else n&&(e[kae]&&(r.value.now=Date.now()),e[Ur].unshiftNode(r));return i.value}},Mw=(e,t)=>{if(!t||!t.maxAge&&!e[q0])return!1;let n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[q0]&&n>e[q0]},Bh=e=>{if(e[Kc]>e[j0])for(let t=e[Ur].tail;e[Kc]>e[j0]&&t!==null;){let n=t.prev;H8(e,t),t=n}},H8=(e,t)=>{if(t){let n=t.value;e[Qc]&&e[Qc](n.key,n.value),e[Kc]-=n.length,e[va].delete(n.key),e[Ur].removeNode(t)}},DR=class{constructor(t,n,r,i,o){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}},Mae=(e,t,n,r)=>{let i=n.value;Mw(e,i)&&(H8(e,n),e[jh]||(i=void 0)),i&&t.call(r,i.value,i.key,e)},pRe=ER,hRe=Object.freeze({loose:!0}),mRe=Object.freeze({}),gRe=e=>e?typeof e!="object"?hRe:e:mRe,HR=gRe,zR={exports:{}},vRe="2.0.0",Tae=256,yRe=Number.MAX_SAFE_INTEGER||9007199254740991,xRe=16,CRe=Tae-6,bRe=["major","premajor","minor","preminor","patch","prepatch","prerelease"],LR={MAX_LENGTH:Tae,MAX_SAFE_COMPONENT_LENGTH:xRe,MAX_SAFE_BUILD_LENGTH:CRe,MAX_SAFE_INTEGER:yRe,RELEASE_TYPES:bRe,SEMVER_SPEC_VERSION:vRe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},MRe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},Sw=MRe;(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=LR,o=Sw;t=e.exports={};let a=t.re=[],s=t.safeRe=[],c=t.src=[],l=t.t={},u=0,f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],p=m=>{for(let[g,v]of d)m=m.split(`${g}*`).join(`${g}{0,${v}}`).split(`${g}+`).join(`${g}{1,${v}}`);return m},h=(m,g,v)=>{let y=p(g),C=u++;o(m,C,g),l[m]=C,c[C]=g,a[C]=new RegExp(g,v?"g":void 0),s[C]=new RegExp(y,v?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),h("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${f}+`),h("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),h("FULL",`^${c[l.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),h("LOOSE",`^${c[l.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),h("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),h("COERCERTL",c[l.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(zR,zR.exports);var AR=zR.exports,wae=/^[0-9]+$/,Iae=(e,t)=>{let n=wae.test(e),r=wae.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},wRe=(e,t)=>Iae(t,e),SRe={compareIdentifiers:Iae,rcompareIdentifiers:wRe},xw=Sw,{MAX_LENGTH:Sae,MAX_SAFE_INTEGER:Cw}=LR,{safeRe:Eae,t:Dae}=AR,ERe=HR,{compareIdentifiers:z8}=SRe,DRe=class Ms{constructor(t,n){if(n=ERe(n),t instanceof Ms){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Sae)throw new TypeError(`version is longer than ${Sae} characters`);xw("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=t.trim().match(n.loose?Eae[Dae.LOOSE]:Eae[Dae.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Cw||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Cw||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Cw||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<Cw)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(xw("SemVer.compare",this.version,this.options,t),!(t instanceof Ms)){if(typeof t=="string"&&t===this.version)return 0;t=new Ms(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Ms||(t=new Ms(t,this.options)),z8(this.major,t.major)||z8(this.minor,t.minor)||z8(this.patch,t.patch)}comparePre(t){if(t instanceof Ms||(t=new Ms(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=t.prerelease[n];if(xw("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return z8(r,i)}while(++n)}compareBuild(t){t instanceof Ms||(t=new Ms(t,this.options));let n=0;do{let r=this.build[n],i=t.build[n];if(xw("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return z8(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),z8(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}},VR=DRe,zae=VR,zRe=(e,t,n)=>new zae(e,n).compare(new zae(t,n)),L8=zRe,HRe=L8,LRe=(e,t,n)=>HRe(e,t,n)===0,ARe=LRe,VRe=L8,NRe=(e,t,n)=>VRe(e,t,n)!==0,_Re=NRe,kRe=L8,TRe=(e,t,n)=>kRe(e,t,n)>0,IRe=TRe,FRe=L8,RRe=(e,t,n)=>FRe(e,t,n)>=0,ORe=RRe,PRe=L8,$Re=(e,t,n)=>PRe(e,t,n)<0,BRe=$Re,URe=L8,jRe=(e,t,n)=>URe(e,t,n)<=0,qRe=jRe,GRe=ARe,WRe=_Re,YRe=IRe,XRe=ORe,QRe=BRe,KRe=qRe,ZRe=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return GRe(e,n,r);case"!=":return WRe(e,n,r);case">":return YRe(e,n,r);case">=":return XRe(e,n,r);case"<":return QRe(e,n,r);case"<=":return KRe(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}},JRe=ZRe,wR,Hae;function eOe(){if(Hae)return wR;Hae=1;let e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,f){if(f=n(f),u instanceof t){if(u.loose===!!f.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),a("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(u){let f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=u.match(f);if(!d)throw new TypeError(`Invalid comparator: ${u}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new s(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(a("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new s(u,this.options)}catch{return!1}return o(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new c(this.value,f).test(u.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||o(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||o(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}wR=t;let n=HR,{safeRe:r,t:i}=AR,o=JRe,a=Sw,s=VR,c=Fae();return wR}var SR,Lae;function Fae(){if(Lae)return SR;Lae=1;class e{constructor(_,N){if(N=r(N),_ instanceof e)return _.loose===!!N.loose&&_.includePrerelease===!!N.includePrerelease?_:new e(_.raw,N);if(_ instanceof i)return this.raw=_.value,this.set=[[_]],this.format(),this;if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=_.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(I=>this.parseRange(I.trim())).filter(I=>I.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let I=this.set[0];if(this.set=this.set.filter(G=>!h(G[0])),this.set.length===0)this.set=[I];else if(this.set.length>1){for(let G of this.set)if(G.length===1&&m(G[0])){this.set=[G];break}}}this.format()}format(){return this.range=this.set.map(_=>_.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(_){let I=((this.options.includePrerelease&&d)|(this.options.loose&&p))+":"+_,G=n.get(I);if(G)return G;let X=this.options.loose,J=X?s[c.HYPHENRANGELOOSE]:s[c.HYPHENRANGE];_=_.replace(J,A(this.options.includePrerelease)),o("hyphen replace",_),_=_.replace(s[c.COMPARATORTRIM],l),o("comparator trim",_),_=_.replace(s[c.TILDETRIM],u),o("tilde trim",_),_=_.replace(s[c.CARETTRIM],f),o("caret trim",_);let we=_.split(" ").map(st=>v(st,this.options)).join(" ").split(/\s+/).map(st=>H(st,this.options));X&&(we=we.filter(st=>(o("loose invalid filter",st,this.options),!!st.match(s[c.COMPARATORLOOSE])))),o("range list",we);let Se=new Map,Ye=we.map(st=>new i(st,this.options));for(let st of Ye){if(h(st))return[st];Se.set(st.value,st)}Se.size>1&&Se.has("")&&Se.delete("");let bt=[...Se.values()];return n.set(I,bt),bt}intersects(_,N){if(!(_ instanceof e))throw new TypeError("a Range is required");return this.set.some(I=>g(I,N)&&_.set.some(G=>g(G,N)&&I.every(X=>G.every(J=>X.intersects(J,N)))))}test(_){if(!_)return!1;if(typeof _=="string")try{_=new a(_,this.options)}catch{return!1}for(let N=0;N<this.set.length;N++)if(j(this.set[N],_,this.options))return!0;return!1}}SR=e;let t=pRe,n=new t({max:1e3}),r=HR,i=eOe(),o=Sw,a=VR,{safeRe:s,t:c,comparatorTrimReplace:l,tildeTrimReplace:u,caretTrimReplace:f}=AR,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:p}=LR,h=V=>V.value==="<0.0.0-0",m=V=>V.value==="",g=(V,_)=>{let N=!0,I=V.slice(),G=I.pop();for(;N&&I.length;)N=I.every(X=>G.intersects(X,_)),G=I.pop();return N},v=(V,_)=>(o("comp",V,_),V=M(V,_),o("caret",V),V=C(V,_),o("tildes",V),V=w(V,_),o("xrange",V),V=D(V,_),o("stars",V),V),y=V=>!V||V.toLowerCase()==="x"||V==="*",C=(V,_)=>V.trim().split(/\s+/).map(N=>b(N,_)).join(" "),b=(V,_)=>{let N=_.loose?s[c.TILDELOOSE]:s[c.TILDE];return V.replace(N,(I,G,X,J,we)=>{o("tilde",V,I,G,X,J,we);let Se;return y(G)?Se="":y(X)?Se=`>=${G}.0.0 <${+G+1}.0.0-0`:y(J)?Se=`>=${G}.${X}.0 <${G}.${+X+1}.0-0`:we?(o("replaceTilde pr",we),Se=`>=${G}.${X}.${J}-${we} <${G}.${+X+1}.0-0`):Se=`>=${G}.${X}.${J} <${G}.${+X+1}.0-0`,o("tilde return",Se),Se})},M=(V,_)=>V.trim().split(/\s+/).map(N=>S(N,_)).join(" "),S=(V,_)=>{o("caret",V,_);let N=_.loose?s[c.CARETLOOSE]:s[c.CARET],I=_.includePrerelease?"-0":"";return V.replace(N,(G,X,J,we,Se)=>{o("caret",V,G,X,J,we,Se);let Ye;return y(X)?Ye="":y(J)?Ye=`>=${X}.0.0${I} <${+X+1}.0.0-0`:y(we)?X==="0"?Ye=`>=${X}.${J}.0${I} <${X}.${+J+1}.0-0`:Ye=`>=${X}.${J}.0${I} <${+X+1}.0.0-0`:Se?(o("replaceCaret pr",Se),X==="0"?J==="0"?Ye=`>=${X}.${J}.${we}-${Se} <${X}.${J}.${+we+1}-0`:Ye=`>=${X}.${J}.${we}-${Se} <${X}.${+J+1}.0-0`:Ye=`>=${X}.${J}.${we}-${Se} <${+X+1}.0.0-0`):(o("no pr"),X==="0"?J==="0"?Ye=`>=${X}.${J}.${we}${I} <${X}.${J}.${+we+1}-0`:Ye=`>=${X}.${J}.${we}${I} <${X}.${+J+1}.0-0`:Ye=`>=${X}.${J}.${we} <${+X+1}.0.0-0`),o("caret return",Ye),Ye})},w=(V,_)=>(o("replaceXRanges",V,_),V.split(/\s+/).map(N=>E(N,_)).join(" ")),E=(V,_)=>{V=V.trim();let N=_.loose?s[c.XRANGELOOSE]:s[c.XRANGE];return V.replace(N,(I,G,X,J,we,Se)=>{o("xRange",V,I,G,X,J,we,Se);let Ye=y(X),bt=Ye||y(J),st=bt||y(we),Kt=st;return G==="="&&Kt&&(G=""),Se=_.includePrerelease?"-0":"",Ye?G===">"||G==="<"?I="<0.0.0-0":I="*":G&&Kt?(bt&&(J=0),we=0,G===">"?(G=">=",bt?(X=+X+1,J=0,we=0):(J=+J+1,we=0)):G==="<="&&(G="<",bt?X=+X+1:J=+J+1),G==="<"&&(Se="-0"),I=`${G+X}.${J}.${we}${Se}`):bt?I=`>=${X}.0.0${Se} <${+X+1}.0.0-0`:st&&(I=`>=${X}.${J}.0${Se} <${X}.${+J+1}.0-0`),o("xRange return",I),I})},D=(V,_)=>(o("replaceStars",V,_),V.trim().replace(s[c.STAR],"")),H=(V,_)=>(o("replaceGTE0",V,_),V.trim().replace(s[_.includePrerelease?c.GTE0PRE:c.GTE0],"")),A=V=>(_,N,I,G,X,J,we,Se,Ye,bt,st,Kt,Es)=>(y(I)?N="":y(G)?N=`>=${I}.0.0${V?"-0":""}`:y(X)?N=`>=${I}.${G}.0${V?"-0":""}`:J?N=`>=${N}`:N=`>=${N}${V?"-0":""}`,y(Ye)?Se="":y(bt)?Se=`<${+Ye+1}.0.0-0`:y(st)?Se=`<${Ye}.${+bt+1}.0-0`:Kt?Se=`<=${Ye}.${bt}.${st}-${Kt}`:V?Se=`<${Ye}.${bt}.${+st+1}-0`:Se=`<=${Se}`,`${N} ${Se}`.trim()),j=(V,_,N)=>{for(let I=0;I<V.length;I++)if(!V[I].test(_))return!1;if(_.prerelease.length&&!N.includePrerelease){for(let I=0;I<V.length;I++)if(o(V[I].semver),V[I].semver!==i.ANY&&V[I].semver.prerelease.length>0){let G=V[I].semver;if(G.major===_.major&&G.minor===_.minor&&G.patch===_.patch)return!0}return!1}return!0};return SR}var tOe=Fae(),nOe=(e,t,n)=>{try{t=new tOe(t,n)}catch{return!1}return t.test(e)},rOe=nOe,Rae=aRe(rOe);function iOe(e,t,n){let r=e.open(t),i=1e4,o=250,{origin:a}=new URL(t),s=~~(i/o);function c(u){u.source===r&&(s=0,e.removeEventListener("message",c,!1))}e.addEventListener("message",c,!1);function l(){s<=0||(r.postMessage(n,a),setTimeout(l,o),s-=1)}setTimeout(l,o)}var oOe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Oae(e,...t){for(let n of t)aOe(e,n);return e}function aOe(e,t){for(let n of Object.keys(t))Js(e,n,t[n],!0)}var sOe="vega-embed",cOe="6.24.0",lOe="Publish Vega visualizations as embedded web components.",uOe=["vega","data","visualization","component","embed"],fOe={type:"git",url:"http://github.com/vega/vega-embed.git"},dOe={name:"UW Interactive Data Lab",url:"http://idl.cs.washington.edu"},pOe=[{name:"Dominik Moritz",url:"https://www.domoritz.de"}],hOe={url:"https://github.com/vega/vega-embed/issues"},mOe="https://github.com/vega/vega-embed#readme",gOe="BSD-3-Clause",vOe="build/vega-embed.js",yOe="build/vega-embed.module.js",xOe="build/vega-embed.min.js",COe="build/vega-embed.min.js",bOe="build/vega-embed.module.d.ts",MOe=["src","build","patches"],wOe={"@babel/core":"^7.23.6","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.23.6","@babel/preset-env":"^7.23.6","@babel/preset-typescript":"^7.23.3","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-commonjs":"25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/jest":"^29.5.11","@types/semver":"^7.5.6","@typescript-eslint/eslint-plugin":"^6.14.0","@typescript-eslint/parser":"^6.14.0","browser-sync":"^2.29.3",concurrently:"^8.2.2","del-cli":"^5.1.0",eslint:"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.6.0","eslint-plugin-prettier":"^5.0.1",jest:"^29.7.0","jest-canvas-mock":"^2.5.2","jest-environment-jsdom":"^29.7.0","patch-package":"^8.0.0","postinstall-postinstall":"^2.1.0",prettier:"^3.1.1","release-it":"^17.0.1",rollup:"4.9.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",sass:"^1.69.5",typescript:"^5.3.3",vega:"^5.22.1","vega-lite":"^5.2.0"},SOe={vega:"^5.21.0","vega-lite":"*"},EOe={"fast-json-patch":"^3.1.1","json-stringify-pretty-compact":"^3.0.0",semver:"^7.5.4",tslib:"^2.6.2","vega-interpreter":"^1.0.5","vega-schema-url-parser":"^2.2.0","vega-themes":"^2.14.0","vega-tooltip":"^0.34.0"},DOe=["yallist"],zOe={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"del-cli build src/style.ts",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start --directory -s -f build *.html",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},HOe={name:sOe,version:cOe,description:lOe,keywords:uOe,repository:fOe,author:dOe,contributors:pOe,bugs:hOe,homepage:mOe,license:gOe,main:vOe,module:yOe,unpkg:xOe,jsdelivr:COe,types:bOe,files:MOe,devDependencies:wOe,peerDependencies:SOe,dependencies:EOe,bundledDependencies:DOe,scripts:zOe},yAt=HOe.version,ws=yI,qh=dR,Aae=typeof window<"u"?window:void 0;qh===void 0&&Aae?.vl?.compile&&(qh=Aae.vl);var LOe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},AOe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Uh={vega:"Vega","vega-lite":"Vega-Lite"},ww={vega:ws.version,"vega-lite":qh?qh.version:"not available"},VOe={vega:e=>e,"vega-lite":(e,t)=>qh.compile(e,{config:t}).spec},NOe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,_Oe="chart-wrapper";function kOe(e){return typeof e=="function"}function Vae(e,t,n,r){let i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+o),a.document.title=`${Uh[r]} JSON Source`}function TOe(e,t){if(e.$schema){let n=pR(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Uh[n.library]}, but mode argument sets ${Uh[t]??t}.`);let r=n.library;return Rae(ww[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Uh[r]} ${n.version}, but the current version of ${Uh[r]} is v${ww[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Pae(e){return!!(e&&"load"in e)}function Nae(e){return Pae(e)?e:ws.loader(e)}function IOe(e){let t=e.usermeta?.embedOptions??{};return Q(t.defaultStyle)&&(t.defaultStyle=!1),t}function $ae(r,i){return qt(this,arguments,function*(e,t,n={}){let o,a;Q(t)?(a=Nae(n.loader),o=JSON.parse(yield a.load(t))):o=t;let s=IOe(o),c=s.loader;(!a||c)&&(a=Nae(n.loader??c));let l=yield _ae(s,a),u=yield _ae(n,a),f=k(x({},Oae(u,l)),{config:Fa(u.config??{},l.config??{})});return yield ROe(e,o,f,a)})}function _ae(e,t){return qt(this,null,function*(){let n=Q(e.config)?JSON.parse(yield t.load(e.config)):e.config??{},r=Q(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return x(x(x({},e),r?{patch:r}:{}),n?{config:n}:{})})}function FOe(e){let t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}function ROe(i,o){return qt(this,arguments,function*(e,t,n={},r){let a=n.theme?Fa(xR[n.theme],n.config??{}):n.config,s=D1(n.actions)?n.actions:Oae({},LOe,n.actions??{}),c=x(x({},AOe),n.i18n),l=n.renderer??"canvas",u=n.logLevel??ws.Warn,f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){let w="vega-embed-style",{root:E,rootContainer:D}=FOe(d);if(!E.getElementById(w)){let H=document.createElement("style");H.id=w,H.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?oOe.toString():n.defaultStyle,D.appendChild(H)}}let p=TOe(t,n.mode),h=VOe[p](t,a);if(p==="vega-lite"&&h.$schema){let w=pR(h.$schema);Rae(ww.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${ww.vega}.`)}d.classList.add("vega-embed"),s&&d.classList.add("has-actions"),d.innerHTML="";let m=d;if(s){let w=document.createElement("div");w.classList.add(_Oe),d.appendChild(w),m=w}let g=n.patch;if(g&&(h=g instanceof Function?g(h):W6(h,g,!0,!1).newDocument),n.formatLocale&&ws.formatLocale(n.formatLocale),n.timeFormatLocale&&ws.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(let w in n.expressionFunctions){let E=n.expressionFunctions[w];"fn"in E?ws.expressionFunction(w,E.fn,E.visitor):E instanceof Function&&ws.expressionFunction(w,E)}let{ast:v}=n,y=ws.parse(h,p==="vega-lite"?{}:a,{ast:v}),C=new(n.viewClass||ws.View)(y,x({loader:r,logLevel:u,renderer:l},v?{expr:ws.expressionInterpreter??n.expr??Une}:{}));if(C.addSignalListener("autosize",(w,E)=>{let{type:D}=E;D=="fit-x"?(m.classList.add("fit-x"),m.classList.remove("fit-y")):D=="fit-y"?(m.classList.remove("fit-x"),m.classList.add("fit-y")):D=="fit"?m.classList.add("fit-x","fit-y"):m.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){let{loader:w,tooltip:E}=n,D=w&&!Pae(w)?w?.baseURL:void 0,H=kOe(E)?E:new yw(x({baseURL:D},E===!0?{}:E)).call;C.tooltip(H)}let{hover:b}=n;if(b===void 0&&(b=p==="vega"),b){let{hoverSet:w,updateSet:E}=typeof b=="boolean"?{}:b;C.hover(w,E)}n&&(n.width!=null&&C.width(n.width),n.height!=null&&C.height(n.height),n.padding!=null&&C.padding(n.padding)),yield C.initialize(m,n.bind).runAsync();let M;if(s!==!1){let w=d;if(n.defaultStyle!==!1||n.forceActionsMenu){let D=document.createElement("details");D.title=c.CLICK_TO_VIEW_ACTIONS,d.append(D),w=D;let H=document.createElement("summary");H.innerHTML=NOe,D.append(H),M=A=>{D.contains(A.target)||D.removeAttribute("open")},document.addEventListener("click",M)}let E=document.createElement("div");if(w.append(E),E.classList.add("vega-actions"),s===!0||s.export!==!1){for(let D of["svg","png"])if(s===!0||s.export===!0||s.export[D]){let H=c[`${D.toUpperCase()}_ACTION`],A=document.createElement("a"),j=ne(n.scaleFactor)?n.scaleFactor[D]:n.scaleFactor;A.text=H,A.href="#",A.target="_blank",A.download=`${f}.${D}`,A.addEventListener("mousedown",function(V){return qt(this,null,function*(){V.preventDefault();let _=yield C.toImageURL(D,j);this.href=_})}),E.append(A)}}if(s===!0||s.source!==!1){let D=document.createElement("a");D.text=c.SOURCE_ACTION,D.href="#",D.addEventListener("click",function(H){Vae((0,bw.default)(t),n.sourceHeader??"",n.sourceFooter??"",p),H.preventDefault()}),E.append(D)}if(p==="vega-lite"&&(s===!0||s.compiled!==!1)){let D=document.createElement("a");D.text=c.COMPILED_ACTION,D.href="#",D.addEventListener("click",function(H){Vae((0,bw.default)(h),n.sourceHeader??"",n.sourceFooter??"","vega"),H.preventDefault()}),E.append(D)}if(s===!0||s.editor!==!1){let D=n.editorUrl??"https://vega.github.io/editor/",H=document.createElement("a");H.text=c.EDITOR_ACTION,H.href="#",H.addEventListener("click",function(A){iOe(window,D,{config:a,mode:p,renderer:l,spec:(0,bw.default)(t)}),A.preventDefault()}),E.append(H)}}function S(){M&&document.removeEventListener("click",M),C.finalize()}return{view:C,spec:t,vgSpec:h,finalize:S,embedOptions:n}})}var NR=(()=>{let t=class t{constructor(){this.data=[],this.spec=Jq}ngAfterViewInit(){return qt(this,null,function*(){this.spec=this.addDataToSpec(this.data,this.spec),this.chart=yield $ae("#calendar-element",this.spec)})}addDataToSpec(r,i){let o=i;return o.data.values=this.formatData(r),o}formatData(r){let i=Array.from(new Set(r)),o=i.map(u=>new Date(u).getFullYear()),a=Math.min(...o),s=Math.max(...o),c={};for(let u=a;u<=s;u++)for(let f=1;f<=12;f++)for(let d=1;d<=31;d++){let p=new Date(u,f-1,d).toLocaleDateString().split("T")[0];c[p]=0}return i.forEach(u=>{let f=new Date(u).toLocaleDateString().split("T")[0];c[f]+=1}),Object.entries(c).map(([u,f])=>({date:u,count:f}))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-calendar-heatmap"]],inputs:{data:"data"},decls:1,vars:0,consts:[["id","calendar-element"]],template:function(i,o){i&1&&pn(0,"div",0)},styles:["#calendar-element[_ngcontent-%COMP%]{position:relative;width:100%}"]});let e=t;return e})();function POe(e,t){if(e&1&&(z(0,"li"),T(1),hi(2,"date"),L()),e&2){let n=t.$implicit;B(),Ie(" ",mi(2,1,n)," ")}}var Bae=()=>[];function $Oe(e,t){if(e&1&&(C1(0),pn(1,"app-calendar-heatmap",6),b1()),e&2){let n=Bn();B(),be("data",n.model.FormattedCompletedDates?n.model.FormattedCompletedDates:w2(1,Bae))}}var _R=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.goalApi=o,this.faCheck=qg,this.faXmark=jg}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(Ce(1)).subscribe(i=>{this.model=new vi(i.data),this.model?.Goal&&this.goalApi.getGoal(this.model?.Goal).pipe(Ce(1)).subscribe(o=>{this.goalModel=new jn(o.data)})})}};t.\u0275fac=function(i){return new(i||t)(W(Ro),W(It),W(er))},t.\u0275cmp=Le({type:t,selectors:[["app-habit-page"]],decls:22,vars:12,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right",3,"routerLink"],[1,"uk-button-danger","uk-button",3,"routerLink"],[3,"icon"],[3,"routerLink"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"data"]],template:function(i,o){if(i&1&&(z(0,"h1"),T(1),L(),z(2,"button",0),T(3),L(),z(4,"button",1),T(5),L(),z(6,"p"),T(7),L(),pn(8,"hr"),z(9,"span"),T(10," Is Anti Habit: "),pn(11,"fa-icon",2),L(),z(12,"p"),T(13," Associated Goal: "),z(14,"a",3),T(15),L()(),pn(16,"hr"),z(17,"h2"),T(18,"Completed Dates"),L(),z(19,"ul"),_t(20,POe,3,3,"li",4),L(),_t(21,$Oe,2,2,"ng-container",5)),i&2){let a;B(),Ie("Habit: ",o.model==null?null:o.model.Name,""),B(),be("routerLink",o.model==null?null:o.model.EditUrl),B(),Ie(" Edit: ",o.model==null?null:o.model.Name,`
`),B(),be("routerLink",o.model==null?null:o.model.DeleteUrl),B(),Ie(" Delete: ",o.model==null?null:o.model.Name,`
`),B(2),Ie(" ",o.model==null?null:o.model.Description,`
`),B(4),be("icon",o.model!=null&&o.model.AntiHabit?o.faCheck:o.faXmark),B(3),be("routerLink",o.goalModel==null?null:o.goalModel.ViewUrl),B(),Ie(" ",o.goalModel==null?null:o.goalModel.Name," "),B(5),be("ngForOf",(a=o.model==null?null:o.model.FormattedCompletedDates)!==null&&a!==void 0?a:w2(11,Bae)),B(),be("ngIf",o.model)}},dependencies:[gi,_o,Hn,Sg,NR,ko],encapsulation:2});let e=t;return e})();function BOe(e,t){if(e&1&&(C1(0),z(1,"p",9),T(2),L(),b1()),e&2){let n=Bn().$implicit;B(2),Ie(" ",n.Description," ")}}function UOe(e,t){if(e&1){let n=Ha();z(0,"tr")(1,"td")(2,"input",5),Te("change",function(){let o=zo(n).$implicit,a=Bn();return Ho(a.changeState.emit(o))}),L()(),z(3,"td"),T(4),L(),z(5,"td",1),_t(6,BOe,3,1,"ng-container",6),L(),z(7,"td",2),pn(8,"fa-icon",7),L(),z(9,"td")(10,"a",8),T(11,"View"),L()()()}if(e&2){let n=t.$implicit,r=Bn(),i=nl(15);B(2),be("checked",n.IsCompletedToday),B(2),Yr(n.Name),B(2),be("ngIf",n.Description)("ngIfElse",i),B(2),be("icon",n.AntiHabit?r.faCheck:r.faXmark),B(2),be("routerLink",n.ViewUrl)}}function jOe(e,t){e&1&&(z(0,"i"),T(1,"No description"),L())}var kR=(()=>{let t=class t{constructor(){this.faCheck=qg,this.faXmark=jg,this.models=[],this.changeState=new Jt}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-habits-table"]],inputs:{models:"models"},outputs:{changeState:"changeState"},decls:16,vars:1,consts:[[1,"uk-table","uk-table-striped","uk-table-middle"],[1,"hide-in-mobile"],[1,"centered"],[4,"ngFor","ngForOf"],["defaultDescription",""],["type","checkbox",1,"uk-checkbox",3,"checked","change"],[4,"ngIf","ngIfElse"],[3,"icon"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],[1,"description"]],template:function(i,o){i&1&&(z(0,"table",0)(1,"thead")(2,"tr"),pn(3,"th"),z(4,"th"),T(5,"Name"),L(),z(6,"th",1),T(7,"Description"),L(),z(8,"th",2),T(9,"Anti"),L(),z(10,"th"),T(11,"Action"),L()()(),z(12,"tbody"),_t(13,UOe,12,6,"tr",3),L()(),_t(14,jOe,2,0,"ng-template",null,4,il)),i&2&&(B(13),be("ngForOf",o.models))},dependencies:[gi,_o,Hn,Sg],styles:["p.description[_ngcontent-%COMP%]{text-wrap:nowrap;padding-right:10rem;width:28rem;overflow:hidden}.centered[_ngcontent-%COMP%]{display:flex;justify-content:center}@media screen and (max-width: 768px){.hide-in-mobile[_ngcontent-%COMP%]{display:none}}"]});let e=t;return e})();function GOe(e,t){if(e&1){let n=Ha();z(0,"section")(1,"h2"),T(2,"Completed Habits"),L(),z(3,"app-habits-table",2),Te("changeState",function(i){zo(n);let o=Bn();return Ho(o.uncompleteHabit(i))}),L()()}if(e&2){let n=Bn();B(3),be("models",n.completedHabits)}}var TR=(()=>{let t=class t{constructor(r){this.api=r,this.habits=[]}get inCompleteHabits(){return this.habits.filter(r=>!this.isCompletedToday(r))}get completedHabits(){return this.habits.filter(r=>!r.AntiHabit&&this.isCompletedToday(r))}get failedAntiHabits(){return this.habits.filter(r=>r.AntiHabit&&this.isCompletedToday(r))}ngOnInit(){this.api.getHabits().pipe(Ce(1)).subscribe(r=>{this.habits=r.data.map(i=>new vi(i))})}completeHabit(r){r.CompletedDates?.length||(r.CompletedDates=[]),r.CompletedDates.push(new Date().toLocaleDateString()),this.api.updateHabit(r).pipe(Ce(1)).subscribe(i=>{r=new vi(i.data)})}uncompleteHabit(r){let i=new Date().toLocaleDateString(),o=r.CompletedDates.findIndex(a=>{let s=new Date(a).toLocaleDateString();return i===s});r.CompletedDates.splice(o,1),this.api.updateHabit(r).pipe(Ce(1)).subscribe(a=>{r=new vi(a.data)})}isCompletedToday(r){let i=r.CompletedDates?.at(-1)?.split("T")[0],o=new Date()?.toLocaleDateString()?.split("T")[0];return i===o}};t.\u0275fac=function(i){return new(i||t)(W(Ro))},t.\u0275cmp=Le({type:t,selectors:[["app-list-page"]],decls:10,vars:2,consts:[[1,"list-header"],["routerLink","/habits/new",1,"uk-button","uk-button-primary"],[3,"models","changeState"],[4,"ngIf"]],template:function(i,o){i&1&&(z(0,"div",0)(1,"h1"),T(2,"Habits"),L(),z(3,"nav")(4,"a",1),T(5,"New Habit"),L()()(),z(6,"main")(7,"section")(8,"app-habits-table",2),Te("changeState",function(s){return o.completeHabit(s)}),L()(),_t(9,GOe,4,1,"section",3),L()),i&2&&(B(8),be("models",o.inCompleteHabits),B(),be("ngIf",o.completedHabits.length>0))},dependencies:[_o,Hn,kR]});let e=t;return e})();function WOe(e,t){if(e&1&&(C1(0),z(1,"option",12),T(2),L(),b1()),e&2){let n=t.$implicit;B(),be("value",n.Id),B(),Yr(n.Name)}}var IR=(()=>{let t=class t{constructor(r,i,o){this.router=r,this.api=i,this.goalApi=o,this.model={CreatedAt:new Date().toLocaleDateString()},this.goals$=new On([])}ngOnInit(){this.goalApi.listGoals().pipe(Ce(1)).subscribe(r=>this.goals$.next(r.data.map(i=>new jn(i))))}submitForm(){let r=new vi(this.model);this.api.createHabit(r).pipe(Ce(1)).subscribe(()=>this.router.navigateByUrl("/"))}};t.\u0275fac=function(i){return new(i||t)(W(Vt),W(Ro),W(er))},t.\u0275cmp=Le({type:t,selectors:[["app-new-page"]],decls:21,vars:7,consts:[["action",""],["ngForm",""],["for","new-habit-input",1,"uk-form-label"],["id","new-habit-input","name","new-habit-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-habit-description",1,"uk-form-label"],["id","new-habit-description","name","new-habit-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","associated-goal",1,"uk-form-label"],["name","associated-goal","id","associated-goal",1,"uk-input",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","checkbox","name","anti-habit","id","anti-habit",1,"uk-checkbox",3,"ngModel","ngModelChange"],["for","anti-habit",1,"uk-form-label"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"],[3,"value"]],template:function(i,o){i&1&&(z(0,"h1"),T(1,"Add New Habit"),L(),z(2,"form",0,1)(4,"label",2),T(5,"Habit Name"),L(),z(6,"input",3),wt("ngModelChange",function(s){return Ht(o.model.Name,s)||(o.model.Name=s),s}),L(),z(7,"label",4),T(8," Habit Description "),L(),z(9,"textarea",5),wt("ngModelChange",function(s){return Ht(o.model.Description,s)||(o.model.Description=s),s}),L(),z(10,"label",6),T(11,"Associated Goal"),L(),z(12,"select",7),wt("ngModelChange",function(s){return Ht(o.model.Goal,s)||(o.model.Goal=s),s}),_t(13,WOe,3,2,"ng-container",8),hi(14,"async"),L(),z(15,"input",9),wt("ngModelChange",function(s){return Ht(o.model.AntiHabit,s)||(o.model.AntiHabit=s),s}),L(),z(16,"label",10),T(17,"Anti Habit"),L(),z(18,"div")(19,"button",11),Te("click",function(){return o.submitForm()}),T(20," Add New Habit "),L()()()),i&2&&(B(6),Mt("ngModel",o.model.Name),B(3),Mt("ngModel",o.model.Description),B(3),Mt("ngModel",o.model.Goal),B(),be("ngForOf",mi(14,5,o.goals$)),B(2),Mt("ngModel",o.model.AntiHabit))},dependencies:[gi,S1,L6,A6,Sr,Gs,H6,Jn,w1,Un,ji,B9],encapsulation:2});let e=t;return e})();var FR=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-schedule-page"]],decls:2,vars:0,template:function(i,o){i&1&&(z(0,"h1"),T(1,"Schedule"),L())},encapsulation:2});let e=t;return e})();var h2=(()=>{let t=class t extends Fo{constructor(r){super(),this.http=r}getTodaysRemainingTasks(){throw new Error("Not implemented")}getTasks(){if(Nt.production){let r=Xt("/tasks");return this.http.get(r)}return console.debug("/tasks"),se({data:[qi(),qi(),qi(),qi(),qi()],message:"success"})}getTask(r){if(Nt.production){let i=Xt(`/tasks/${r}`);return this.http.get(i)}return console.debug(r),se({data:qi(),message:"success"})}createTask(r){if(Nt.production){let i=Xt("/tasks");return this.http.post(i,r)}return console.debug(r),se({data:qi(),message:"success"})}updateTask(r){if(Nt.production){let i=Xt(`/tasks/${r.Id}`);return this.http.put(i,r)}return console.debug(r),se({data:qi(),message:"success"})}deleteTask(r){if(Nt.production){let i=Xt(`/tasks/${r}`);return this.http.delete(i)}return console.debug(r),se(void 0)}};t.\u0275fac=function(i){return new(i||t)(ge(qs))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var RR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(Ce(1)).subscribe(i=>{this.model=new Wi(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteTask(this.model?.Id).pipe(Ce(1)).subscribe(()=>this.router.navigateByUrl("/tasks"))}};t.\u0275fac=function(i){return new(i||t)(W(h2),W(It),W(Vt))},t.\u0275cmp=Le({type:t,selectors:[["app-delete-task-page"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),L(),z(2,"p"),T(3,` Deleting this model will make it unrecoverable.
`),L(),z(4,"button",0),Te("click",function(){return o.deleteModel()}),T(5),L()),i&2&&(B(),Ie("Delete ",o.model==null?null:o.model.Name,"?"),B(4),Ie(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();function YOe(e,t){if(e&1&&(C1(0),z(1,"p",9),T(2),L(),b1()),e&2){let n=Bn().$implicit;B(2),Ie(" ",n.Description," ")}}function XOe(e,t){if(e&1&&(C1(0),T(1),hi(2,"date"),b1()),e&2){let n=Bn().$implicit;B(),Ie(" ",mi(2,1,n.CompleteBy)," ")}}var QOe=e=>({"overdue-task":e});function KOe(e,t){if(e&1){let n=Ha();z(0,"tr",5)(1,"td")(2,"input",6),wt("ngModelChange",function(i){let a=zo(n).$implicit;return Ht(a.Completed,i)||(a.Completed=i),Ho(i)}),Te("change",function(){let o=zo(n).$implicit,a=Bn();return Ho(a.changeState.emit(o))}),L()(),z(3,"td"),T(4),L(),z(5,"td",1),_t(6,YOe,3,1,"ng-container",7),L(),z(7,"td",1),T(8),L(),z(9,"td"),_t(10,XOe,3,3,"ng-container",7),L(),z(11,"td")(12,"a",8),T(13,"View"),L()()()}if(e&2){let n=t.$implicit;Bn();let r=nl(17),i=nl(19);be("ngClass",$B(9,QOe,n.isOverdue)),B(2),Mt("ngModel",n.Completed),B(2),Yr(n.Name),B(2),be("ngIf",n.Description)("ngIfElse",r),B(2),Yr(n.ImportanceHuman),B(2),be("ngIf",n.CompleteBy)("ngIfElse",i),B(2),be("routerLink",n.ViewUrl)}}function ZOe(e,t){e&1&&(z(0,"i"),T(1,"No description"),L())}function JOe(e,t){e&1&&(z(0,"i"),T(1,"No date set"),L())}var OR=(()=>{let t=class t{constructor(){this.models=[],this.changeState=new Jt}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-tasks-table"]],inputs:{models:"models"},outputs:{changeState:"changeState"},decls:20,vars:1,consts:[[1,"uk-table","uk-table-striped"],[1,"hide-in-mobile"],[3,"ngClass",4,"ngFor","ngForOf"],["defaultDescription",""],["defaultCompleteBy",""],[3,"ngClass"],["type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange","change"],[4,"ngIf","ngIfElse"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],[1,"description"]],template:function(i,o){i&1&&(z(0,"table",0)(1,"thead")(2,"tr"),pn(3,"th"),z(4,"th"),T(5,"Name"),L(),z(6,"th",1),T(7,"Description"),L(),z(8,"th",1),T(9,"Importance"),L(),z(10,"th"),T(11,"Complete By"),L(),z(12,"th"),T(13,"Action"),L()()(),z(14,"tbody"),_t(15,KOe,14,11,"tr",2),L()(),_t(16,ZOe,2,0,"ng-template",null,3,il)(18,JOe,2,0,"ng-template",null,4,il)),i&2&&(B(15),be("ngForOf",o.models))},dependencies:[dU,gi,_o,Hn,Gs,Jn,Un,ko]});let e=t;return e})();function tPe(e,t){if(e&1){let n=Ha();z(0,"section")(1,"h2"),T(2,"Completed Tasks"),L(),z(3,"app-tasks-table",3),Te("changeState",function(i){zo(n);let o=Bn();return Ho(o.updateTask(i))}),L()()}if(e&2){let n=Bn();B(3),be("models",n.completedTasks)}}var PR=(()=>{let t=class t{constructor(r){this.api=r,this.tasks=[]}get completedTasks(){return this.tasks.filter(r=>r.Completed)}get incompleteTasks(){return this.tasks.filter(r=>!r.Completed)}ngOnInit(){this.api.getTasks().pipe(Ce(1)).subscribe(r=>{this.tasks=r.data.map(i=>new Wi(i))})}updateTask(r){this.api.updateTask(r).pipe(Ce(1)).subscribe(i=>{r=new Wi(i.data)})}};t.\u0275fac=function(i){return new(i||t)(W(h2))},t.\u0275cmp=Le({type:t,selectors:[["app-tasks-page"]],decls:9,vars:2,consts:[[1,"list-header"],["routerLink","/tasks/new",1,"uk-button","uk-button-primary"],[1,"incompleteTasks.length",">","0"],[3,"models","changeState"],[4,"ngIf"]],template:function(i,o){i&1&&(z(0,"div",0)(1,"h1"),T(2,"Tasks"),L(),z(3,"nav")(4,"a",1),T(5,"New Task"),L()()(),z(6,"section",2)(7,"app-tasks-table",3),Te("changeState",function(s){return o.updateTask(s)}),L()(),_t(8,tPe,4,1,"section",4)),i&2&&(B(7),be("models",o.incompleteTasks),B(),be("ngIf",o.completedTasks.length>0))},dependencies:[_o,Hn,OR],styles:[".overdue-task[_ngcontent-%COMP%]{color:#f5222d}@media screen and (max-width: 768px){.hide-in-mobile[_ngcontent-%COMP%]{display:none}}"]});let e=t;return e})();function nPe(e,t){if(e&1&&(C1(0),z(1,"option",19),T(2),L(),b1()),e&2){let n=t.$implicit;B(),be("value",n.Id),B(),Yr(n.Name)}}var $R=(()=>{let t=class t{constructor(r,i,o){this.router=r,this.api=i,this.goalApi=o,this.model={Importance:1},this.goals$=new On([])}ngOnInit(){this.goalApi.listGoals().pipe(Ce(1)).subscribe(r=>this.goals$.next(r.data.map(i=>new jn(i))))}submitForm(){let r=new Wi(this.model);r.Completed=!1,this.api.createTask(r).pipe(Ce(1)).subscribe(()=>this.router.navigateByUrl("/tasks"))}updateImportance(r){let i=r.target.value;this.model.Importance=parseInt(i,10)}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString()}};t.\u0275fac=function(i){return new(i||t)(W(Vt),W(h2),W(er))},t.\u0275cmp=Le({type:t,selectors:[["app-new-task-page"]],decls:33,vars:6,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","importance-input",1,"uk-form-label"],["id","importance-input","name","importance-input",1,"uk-input",3,"change"],["value","1","selected",""],["value","2"],["value","3"],["value","4"],["value","5"],["for","associated-goal",1,"uk-form-label"],["name","associated-goal","id","associated-goal",1,"uk-input",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"],[3,"value"]],template:function(i,o){i&1&&(z(0,"h1"),T(1,"New Task"),L(),z(2,"form",0,1)(4,"label",2),T(5,"Task Name"),L(),z(6,"input",3),wt("ngModelChange",function(s){return Ht(o.model.Name,s)||(o.model.Name=s),s}),L(),z(7,"label",4),T(8," Task Description "),L(),z(9,"textarea",5),wt("ngModelChange",function(s){return Ht(o.model.Description,s)||(o.model.Description=s),s}),L(),z(10,"label",6),T(11," Importance (low number = low importance; high number = high importance) "),L(),z(12,"select",7),Te("change",function(s){return o.updateImportance(s)}),z(13,"option",8),T(14,"Low"),L(),z(15,"option",9),T(16,"Low-Medium"),L(),z(17,"option",10),T(18,"Medium"),L(),z(19,"option",11),T(20,"Medium-High"),L(),z(21,"option",12),T(22,"High"),L()(),z(23,"label",13),T(24,"Associated Goal"),L(),z(25,"select",14),wt("ngModelChange",function(s){return Ht(o.model.Goal,s)||(o.model.Goal=s),s}),_t(26,nPe,3,2,"ng-container",15),hi(27,"async"),L(),z(28,"label",16),T(29,"Complete By"),L(),z(30,"input",17),Te("change",function(s){return o.updateCompleteBy(s)}),L(),z(31,"button",18),Te("click",function(){return o.submitForm()}),T(32," Add New Task "),L()()),i&2&&(B(6),Mt("ngModel",o.model.Name),B(3),Mt("ngModel",o.model.Description),B(16),Mt("ngModel",o.model.Goal),B(),be("ngForOf",mi(27,4,o.goals$)))},dependencies:[gi,S1,L6,A6,Sr,H6,Jn,w1,Un,ji,B9],encapsulation:2});let e=t;return e})();var BR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.goalApi=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(Ce(1)).subscribe(i=>{this.model=new Wi(i.data),this.goalApi.getGoal(this.model?.Goal).pipe(Ce(1)).subscribe(o=>{this.goalModel=new jn(o.data)})})}};t.\u0275fac=function(i){return new(i||t)(W(h2),W(It),W(er))},t.\u0275cmp=Le({type:t,selectors:[["app-task-page"]],decls:17,vars:13,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right",3,"routerLink"],[1,"uk-button-danger","uk-button",3,"routerLink"],[3,"routerLink"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),L(),z(2,"button",0),T(3),L(),z(4,"button",1),T(5),L(),z(6,"p"),T(7),L(),z(8,"p"),T(9),L(),z(10,"p"),T(11),hi(12,"date"),L(),z(13,"p"),T(14," Associated Goal: "),z(15,"a",2),T(16),L()()),i&2&&(B(),nD(" Task: ",o.model==null?null:o.model.Name," (",o.model!=null&&o.model.Completed?"Completed":"Incomplete",`)
`),B(),be("routerLink",o.model==null?null:o.model.EditUrl),B(),Ie(" Edit: ",o.model==null?null:o.model.Name,`
`),B(),be("routerLink",o.model==null?null:o.model.DeleteUrl),B(),Ie(" Delete: ",o.model==null?null:o.model.Name,`
`),B(2),Ie(" ",o.model==null?null:o.model.Description,`
`),B(2),Ie("Importance: ",o.model==null?null:o.model.ImportanceHuman,""),B(2),Ie("Complete By: ",mi(12,11,o.model==null?null:o.model.CompleteBy),""),B(4),be("routerLink",o.goalModel==null?null:o.goalModel.ViewUrl),B(),Ie(" ",o.goalModel==null?null:o.goalModel.Name," "))},dependencies:[Hn,ko],encapsulation:2});let e=t;return e})();var Ss=class extends ka{constructor(t){super(t)}get ViewUrl(){return["/logbook",this.Id]}get DeleteUrl(){return["/logbook",this.Id,"delete"]}};function Zc(){return{Id:"1",Name:"Fake Logbook Entry",Content:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api"}}var k4=(()=>{let t=class t extends Fo{constructor(r){super(),this.http=r}getLogbooks(){if(Nt.production){let r=Xt("/logbooks");return this.http.get(r)}return console.debug("/logbook"),se({data:[Zc(),Zc(),Zc(),Zc(),Zc()],message:"success"})}getLogbook(r){if(Nt.production){let i=Xt(`/logbooks/${r}`);return this.http.get(i)}return console.debug(r),se({data:Zc(),message:"success"})}createLogbook(r){if(Nt.production){let i=Xt("/logbooks");return this.http.post(i,r)}return console.debug(r),se({data:Zc(),message:"success"})}updateLogbook(r){if(Nt.production){let i=Xt(`/logbooks/${r.Id}`);return this.http.put(i,r)}return console.debug(r),se({data:Zc(),message:"success"})}deleteLogbook(r){if(Nt.production){let i=Xt(`/logbooks/${r}`);return this.http.delete(i)}return console.debug(r),se(void 0)}};t.\u0275fac=function(i){return new(i||t)(ge(qs))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function rPe(e,t){if(e&1&&(z(0,"tr")(1,"td"),T(2),L(),z(3,"td"),T(4),hi(5,"date"),L(),z(6,"td")(7,"a",4),T(8," View "),L()()()),e&2){let n=t.$implicit;B(2),Yr(n.Name),B(2),Yr(mi(5,3,n.CreatedAt)),B(3),be("routerLink",n.ViewUrl)}}var UR=(()=>{let t=class t{constructor(r){this.api=r,this.logbooks=[]}ngOnInit(){this.api.getLogbooks().pipe(Ce(1)).subscribe(r=>{this.logbooks=r.data.map(i=>new Ss(i))})}};t.\u0275fac=function(i){return new(i||t)(W(k4))},t.\u0275cmp=Le({type:t,selectors:[["app-list"]],decls:19,vars:1,consts:[[1,"list-header"],["routerLink","/logbook/new",1,"uk-button","uk-button-primary"],[1,"uk-table"],[4,"ngFor","ngForOf"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"]],template:function(i,o){i&1&&(z(0,"div",0)(1,"h1"),T(2,"Logbook"),L(),z(3,"section")(4,"nav")(5,"a",1),T(6,"New Entry"),L()()()(),z(7,"section")(8,"table",2)(9,"thead")(10,"tr")(11,"th"),T(12,"Name"),L(),z(13,"th"),T(14,"Created"),L(),z(15,"th"),T(16,"Action"),L()()(),z(17,"tbody"),_t(18,rPe,9,5,"tr",3),L()()()),i&2&&(B(18),be("ngForOf",o.logbooks))},dependencies:[gi,Hn,ko]});let e=t;return e})();var jR=(()=>{let t=class t{constructor(r,i){this.router=r,this.api=i,this.model={CreatedAt:new Date().toLocaleDateString()}}submitForm(){let r=new Ss(this.model);this.api.createLogbook(r).subscribe(()=>this.router.navigateByUrl("/logbook"))}};t.\u0275fac=function(i){return new(i||t)(W(Vt),W(k4))},t.\u0275cmp=Le({type:t,selectors:[["app-new"]],decls:12,vars:2,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","20",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1,"New Task"),L(),z(2,"form",0,1)(4,"label",2),T(5,"Task Name"),L(),z(6,"input",3),wt("ngModelChange",function(s){return Ht(o.model.Name,s)||(o.model.Name=s),s}),L(),z(7,"label",4),T(8," Content "),L(),z(9,"textarea",5),wt("ngModelChange",function(s){return Ht(o.model.Content,s)||(o.model.Content=s),s}),L(),z(10,"button",6),Te("click",function(){return o.submitForm()}),T(11," Add Logbook Entry "),L()()),i&2&&(B(6),Mt("ngModel",o.model.Name),B(3),Mt("ngModel",o.model.Content))},dependencies:[S1,Sr,Jn,w1,Un,ji]});let e=t;return e})();var qR=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getLogbook(r).pipe(Ce(1)).subscribe(i=>{this.model=new Ss(i.data)})}};t.\u0275fac=function(i){return new(i||t)(W(k4),W(It))},t.\u0275cmp=Le({type:t,selectors:[["app-show"]],decls:7,vars:5,consts:[[1,"uk-text-default"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),L(),z(2,"span",0),T(3),hi(4,"date"),L(),z(5,"pre"),T(6),L()),i&2&&(B(),Ie("Task: ",o.model==null?null:o.model.Name,""),B(2),Ie("Created: ",mi(4,3,o.model==null?null:o.model.CreatedAt),""),B(3),Ie("    ",o.model==null?null:o.model.Content,`
`))},dependencies:[ko]});let e=t;return e})();var GR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getLogbook(r).pipe(Ce(1)).subscribe(i=>{this.model=new Ss(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteLogbook(this.model?.Id).pipe(Ce(1)).subscribe(()=>this.router.navigateByUrl("/logbook"))}};t.\u0275fac=function(i){return new(i||t)(W(k4),W(It),W(Vt))},t.\u0275cmp=Le({type:t,selectors:[["app-delete"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),L(),z(2,"p"),T(3,` Deleting this model will make it unrecoverable.
`),L(),z(4,"button",0),Te("click",function(){return o.deleteModel()}),T(5),L()),i&2&&(B(),Ie("Delete ",o.model==null?null:o.model.Name,"?"),B(4),Ie(" Delete ",o.model==null?null:o.model.Name,`
`))}});let e=t;return e})();var WR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(Ce(1)).subscribe(i=>{this.model=i.data})}submitForm(){let r=new jn(this.model);this.api.updateGoal(r).pipe(Ce(1)).subscribe(()=>this.router.navigateByUrl("/goals"))}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString()}};t.\u0275fac=function(i){return new(i||t)(W(er),W(It),W(Vt))},t.\u0275cmp=Le({type:t,selectors:[["app-update"]],decls:15,vars:4,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"value","change"],["type","submit",1,"uk-button","uk-button-secondary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),L(),z(2,"form",0,1)(4,"label",2),T(5,"Goal Name"),L(),z(6,"input",3),wt("ngModelChange",function(s){return Ht(o.model.Name,s)||(o.model.Name=s),s}),L(),z(7,"label",4),T(8," Goal Description "),L(),z(9,"textarea",5),wt("ngModelChange",function(s){return Ht(o.model.Description,s)||(o.model.Description=s),s}),L(),z(10,"label",6),T(11,"Complete By"),L(),z(12,"input",7),Te("change",function(s){return o.updateCompleteBy(s)}),L(),z(13,"button",8),Te("click",function(){return o.submitForm()}),T(14," Update Goal "),L()()),i&2&&(B(),Ie("Edit: ",o.model.Name,""),B(5),Mt("ngModel",o.model.Name),B(3),Mt("ngModel",o.model.Description),B(3),be("value",o.model.CompleteBy))},dependencies:[S1,Sr,Jn,w1,Un,ji]});let e=t;return e})();var YR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(Ce(1)).subscribe(i=>{this.model=i.data})}submitForm(){let r=new vi(this.model);this.api.updateHabit(r).pipe(Ce(1)).subscribe(()=>this.router.navigateByUrl("/"))}};t.\u0275fac=function(i){return new(i||t)(W(Ro),W(It),W(Vt))},t.\u0275cmp=Le({type:t,selectors:[["app-update"]],decls:16,vars:3,consts:[["action",""],["ngForm",""],["for","new-habit-input",1,"uk-form-label"],["id","new-habit-input","name","new-habit-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-habit-description",1,"uk-form-label"],["id","new-habit-description","name","new-habit-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","checkbox","name","anti-habit","id","anti-habit",1,"uk-checkbox",3,"ngModel","ngModelChange"],["for","anti-habit",1,"uk-form-label"],["type","submit",1,"uk-button","uk-button-secondary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(z(0,"p"),T(1,"update works!"),L(),z(2,"form",0,1)(4,"label",2),T(5,"Habit Name"),L(),z(6,"input",3),wt("ngModelChange",function(s){return Ht(o.model.Name,s)||(o.model.Name=s),s}),L(),z(7,"label",4),T(8," Habit Description "),L(),z(9,"textarea",5),wt("ngModelChange",function(s){return Ht(o.model.Description,s)||(o.model.Description=s),s}),L(),z(10,"input",6),wt("ngModelChange",function(s){return Ht(o.model.AntiHabit,s)||(o.model.AntiHabit=s),s}),L(),z(11,"label",7),T(12,"Anti Habit"),L(),z(13,"div")(14,"button",8),Te("click",function(){return o.submitForm()}),T(15," Update Habit "),L()()()),i&2&&(B(6),Mt("ngModel",o.model.Name),B(3),Mt("ngModel",o.model.Description),B(),Mt("ngModel",o.model.AntiHabit))},dependencies:[S1,Sr,Gs,Jn,w1,Un,ji]});let e=t;return e})();var XR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(Ce(1)).subscribe(i=>{this.model=i.data})}submitForm(){let r=new Wi(this.model);this.api.updateTask(r).pipe(Ce(1)).subscribe(()=>this.router.navigateByUrl("/tasks"))}updateImportance(r){let i=r.target.value;this.model.Importance=parseInt(i,10)}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString()}};t.\u0275fac=function(i){return new(i||t)(W(h2),W(It),W(Vt))},t.\u0275cmp=Le({type:t,selectors:[["app-update"]],decls:28,vars:3,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","importance-input",1,"uk-form-label"],["id","importance-input","name","importance-input",1,"uk-input",3,"change"],["value","1","selected",""],["value","2"],["value","3"],["value","4"],["value","5"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-secondary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),L(),z(2,"form",0,1)(4,"label",2),T(5,"Task Name"),L(),z(6,"input",3),wt("ngModelChange",function(s){return Ht(o.model.Name,s)||(o.model.Name=s),s}),L(),z(7,"label",4),T(8," Task Description "),L(),z(9,"textarea",5),wt("ngModelChange",function(s){return Ht(o.model.Description,s)||(o.model.Description=s),s}),L(),z(10,"label",6),T(11," Importance (low number = low importance; high number = high importance) "),L(),z(12,"select",7),Te("change",function(s){return o.updateImportance(s)}),z(13,"option",8),T(14,"Low"),L(),z(15,"option",9),T(16,"Low-Medium"),L(),z(17,"option",10),T(18,"Medium"),L(),z(19,"option",11),T(20,"Medium-High"),L(),z(21,"option",12),T(22,"High"),L()(),z(23,"label",13),T(24,"Complete By"),L(),z(25,"input",14),Te("change",function(s){return o.updateCompleteBy(s)}),L(),z(26,"button",15),Te("click",function(){return o.submitForm()}),T(27," Update Task "),L()()),i&2&&(B(),Ie("Edit: ",o.model.Name,""),B(5),Mt("ngModel",o.model.Name),B(3),Mt("ngModel",o.model.Description))},dependencies:[S1,L6,A6,Sr,Jn,w1,Un,ji]});let e=t;return e})();var QR=(()=>{let t=class t{constructor(r){this.configService=r,this.customServerUrl=this.configService.getCustomServerUrl()??"",this.formFeedback=""}saveCustomServerUrl(){this.customServerUrl?(this.configService.setCustomServerUrl(this.customServerUrl),this.formFeedback="Custom server URL saved!"):this.formFeedback="Please enter a valid server URL."}clearCustomServerUrl(){this.customServerUrl="",this.configService.clearCustomServerUrl(),this.formFeedback="Custom server URL cleared!"}};t.\u0275fac=function(i){return new(i||t)(W(q6))},t.\u0275cmp=Le({type:t,selectors:[["app-configure"]],decls:28,vars:2,consts:[["href","https://github.com/hudson-newey/habit-tracker/tree/main/server"],["href","https://github.com/hudson-newey/habit-tracker"],["type","text","placeholder","Server URL",1,"uk-input",3,"ngModel","ngModelChange"],[1,"action-buttons"],["id","save-server-button",1,"uk-button","uk-button-primary",3,"click"],["id","remove-server-button",1,"uk-button","uk-button-danger",3,"click"],[1,"uk-text-secondary"]],template:function(i,o){i&1&&(z(0,"h1"),T(1,"Configure"),L(),z(2,"p"),T(3," This web app is intended to be used with the GoLang API found "),z(4,"a",0),T(5,"on GitHub"),L(),T(6,`.
`),L(),z(7,"p"),T(8,` It is possible to use this app without the API, but you will not be able to sync your Todo items and Habits between devices.
`),L(),z(9,"p"),T(10," You are free to use this GitHub pages hosted version of the application with your own hosted server (or without) by inputting the custom URL below, or you can host your own instance of the server, client and mobile application using the code available "),z(11,"a",1),T(12,"here"),L(),T(13,`.
`),L(),z(14,"section")(15,"h2"),T(16,"Custom Server URL"),L(),z(17,"p"),T(18," If you are using a custom server, please input the URL below. If you are using the habit tracker without device syncing, you can leave this blank. "),L(),z(19,"input",2),wt("ngModelChange",function(s){return Ht(o.customServerUrl,s)||(o.customServerUrl=s),s}),L(),z(20,"div",3)(21,"button",4),Te("click",function(){return o.saveCustomServerUrl()}),T(22," Save "),L(),z(23,"button",5),Te("click",function(){return o.clearCustomServerUrl()}),T(24," Remove Server "),L()(),pn(25,"div"),z(26,"p",6),T(27),L()()),i&2&&(B(19),Mt("ngModel",o.customServerUrl),B(8),Yr(o.formFeedback))},dependencies:[Sr,Jn,Un],styles:[".action-buttons[_ngcontent-%COMP%]{margin-top:.5rem}.action-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:.5rem}"]});let e=t;return e})();var iPe=[{path:"goals",component:aH},{path:"goals/new",component:sH},{path:"goals/:id",component:oH},{path:"goals/:id/delete",component:iH},{path:"goals/:id/edit",component:WR},{path:"",component:TR},{path:"habits/new",component:IR},{path:"habits/:id",component:_R},{path:"habits/:id/delete",component:cH},{path:"habits/:id/edit",component:YR},{path:"tasks",component:PR},{path:"tasks/new",component:$R},{path:"tasks/:id",component:BR},{path:"tasks/:id/delete",component:RR},{path:"tasks/:id/edit",component:XR},{path:"logbook",component:UR},{path:"logbook/new",component:jR},{path:"logbook/:id",component:qR},{path:"logbook/:id/delete",component:GR},{path:"schedule",component:FR},{path:"configure",component:QR}],Uae=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Mr({type:t}),t.\u0275inj=wr({imports:[rH.forRoot(iPe),rH]});let e=t;return e})();var oPe=()=>["/"],aPe=()=>({exact:!0}),Wh=()=>["uk-active"],KR=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-navbar"]],decls:23,vars:14,consts:[[1,"uk-navbar-container","navbar-container"],[1,"uk-container","navbar-container"],[1,"uk-navbar-left"],["routerLinkActive","uk-active",1,"uk-navbar-item","uk-logo",3,"routerLink"],[1,"uk-nav-primary","hide-in-mobile"],[1,"uk-navbar-nav"],[3,"routerLinkActiveOptions","routerLinkActive"],["routerLink","/",1,"uk-link","uk-navbar-item"],[3,"routerLinkActive"],["routerLink","/goals",1,"uk-link","uk-navbar-item"],["routerLink","/tasks",1,"uk-link","uk-navbar-item"],["routerLink","/logbook",1,"uk-link","uk-navbar-item"],[1,"navbar-right","hide-in-mobile"],["routerLink","/configure",1,"uk-link-muted","uk-navbar-item"]],template:function(i,o){i&1&&(z(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"strong",4),T(5,"Goal Tracker"),L()(),z(6,"ul",5)(7,"li",6)(8,"a",7),T(9,"Habits"),L()(),z(10,"li",8)(11,"a",9),T(12,"Goals"),L()(),z(13,"li",8)(14,"a",10),T(15,"Tasks"),L()(),z(16,"li",8)(17,"a",11),T(18,"Logbook"),L()(),z(19,"span",12)(20,"li",8)(21,"a",13),T(22,"Configure Server"),L()()()()()()()),i&2&&(B(3),be("routerLink",w2(7,oPe)),B(4),be("routerLinkActiveOptions",w2(8,aPe))("routerLinkActive",w2(9,Wh)),B(3),be("routerLinkActive",w2(10,Wh)),B(3),be("routerLinkActive",w2(11,Wh)),B(3),be("routerLinkActive",w2(12,Wh)),B(4),be("routerLinkActive",w2(13,Wh)))},dependencies:[Hn,Yq],styles:[".navbar-right[_ngcontent-%COMP%]{position:absolute;right:5em}@media screen and (max-width: 768px){.hide-in-mobile[_ngcontent-%COMP%]{display:none}}"]});let e=t;return e})();var jae=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"main-content"]],template:function(i,o){i&1&&(pn(0,"app-navbar"),z(1,"div",0),pn(2,"router-outlet"),L())},dependencies:[Qz,KR],styles:[".main-content[_ngcontent-%COMP%]{position:relative;margin:auto;width:60%;margin-top:2rem}@media screen and (max-width: 768px){.main-content[_ngcontent-%COMP%]{width:calc(100% - 2.4rem);margin-left:1.2rem}}"]});let e=t;return e})();var Dw=(()=>{let t=class t extends Fo{constructor(){super()}applyApiRequest(r){let i=r.url.split("/")[1],o=Number(r.url.split("/")[2]),a=r.body;localStorage.getItem(i)===null&&localStorage.setItem(i,"[]");let s=this.tableValue(i);if(r.method==="GET"&&o){if(i==="goals"&&r.url.split("/").length>3){let l=r.url.split("/")[3],u=this.tableValue(l).filter(f=>f.Goal=o);return console.log(u),u}return s.find(l=>l.Id===o)}if(r.method==="POST"){let l=JSON.parse(JSON.stringify(a));l.Id=this.nextTableId(i),s.push(l),localStorage.setItem(i,JSON.stringify(s))}if(r.method==="DELETE"){let l=s.findIndex(u=>u.Id===o);s.splice(l,1),localStorage.setItem(i,JSON.stringify(s))}if(r.method==="PUT"){let l=s.findIndex(u=>u.Id===o);s[l]=a,localStorage.setItem(i,JSON.stringify(s))}return this.tableValue(i)}tableValue(r){return JSON.parse(localStorage.getItem(r))??[]}nextTableId(r){let i=this.tableValue(r);return i.length===0?1:Math.max(...i.map(o=>o.Id))+1}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var qae=(()=>{let t=class t{constructor(r,i){this.config=r,this.virtualDb=i}intercept(r,i){if(this.config.isCustomServerUrlSet())return i.handle(r);let o=this.virtualDb.applyApiRequest(r);return se(new E6({status:200,body:{data:o}}))}};t.\u0275fac=function(i){return new(i||t)(ge(q6),ge(Dw))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();var lPe=[Ro,er,h2,q6,Dw];var Gae=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Mr({type:t,bootstrap:[jae]}),t.\u0275inj=wr({providers:[{provide:zD,useClass:qae,multi:!0},...lPe],imports:[U9,kU,Uae,oj,EU,sq]});let e=t;return e})();_U().bootstrapModule(Gae).catch(e=>console.error(e));
