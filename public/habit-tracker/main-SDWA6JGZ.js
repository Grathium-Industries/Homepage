var Jae=Object.create;var Jh=Object.defineProperty,ese=Object.defineProperties,tse=Object.getOwnPropertyDescriptor,nse=Object.getOwnPropertyDescriptors,rse=Object.getOwnPropertyNames,Zh=Object.getOwnPropertySymbols,ise=Object.getPrototypeOf,Aw=Object.prototype.hasOwnProperty,aO=Object.prototype.propertyIsEnumerable;var Lw=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e);var oO=(e,t,n)=>t in e?Jh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x=(e,t)=>{for(var n in t||={})Aw.call(t,n)&&oO(e,n,t[n]);if(Zh)for(var n of Zh(t))aO.call(t,n)&&oO(e,n,t[n]);return e},k=(e,t)=>ese(e,nse(t));var R4=e=>typeof e=="symbol"?e:e+"",ie=(e,t)=>{var n={};for(var r in e)Aw.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Zh)for(var r of Zh(e))t.indexOf(r)<0&&aO.call(e,r)&&(n[r]=e[r]);return n};var ose=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Mr=(e,t)=>{for(var n in t)Jh(e,n,{get:t[n],enumerable:!0})},ase=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of rse(t))!Aw.call(e,i)&&i!==n&&Jh(e,i,{get:()=>t[i],enumerable:!(r=tse(t,i))||r.enumerable});return e};var sse=(e,t,n)=>(n=e!=null?Jae(ise(e)):{},ase(t||!e||!e.__esModule?Jh(n,"default",{value:e,enumerable:!0}):n,e));var Gt=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{s(n.next(c))}catch(l){i(l)}},a=c=>{try{s(n.throw(c))}catch(l){i(l)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);s((n=n.apply(e,t)).next())}),cse=function(e,t){this[0]=e,this[1]=t};var sO=e=>{var t=e[Lw("asyncIterator")],n=!1,r,i={};return t==null?(t=e[Lw("iterator")](),r=o=>i[o]=a=>t[o](a)):(t=t.call(e),r=o=>i[o]=a=>{if(n){if(n=!1,o==="throw")throw a;return a}return n=!0,{done:!1,value:new cse(new Promise(s=>{var c=t[o](a);if(!(c instanceof Object))throw TypeError("Object expected");s(c)}),1)}}),i[Lw("iterator")]=()=>i,r("next"),"throw"in t?r("throw"):i.throw=o=>{throw o},"return"in t&&r("return"),i};var lG=ose((pXe,cG)=>{"use strict";var R7e=/("(?:[^\\"]|\\.)*")|[:,]/g;cG.exports=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function a(s,c,l){var u,f,d,p,h,m,g,v,y,C,b,M;if(s&&typeof s.toJSON=="function"&&(s=s.toJSON()),b=JSON.stringify(s,o),b===void 0)return b;if(g=i-c.length-l,b.length<=g&&(y=b.replace(R7e,function(S,w){return w||S+" "}),y.length<=g))return y;if(o!=null&&(s=JSON.parse(b),o=void 0),typeof s=="object"&&s!==null){if(v=c+r,d=[],f=0,Array.isArray(s))for(C="[",u="]",g=s.length;f<g;f++)d.push(a(s[f],v,f===g-1?0:1)||"null");else for(C="{",u="}",m=Object.keys(s),g=m.length;f<g;f++)p=m[f],h=JSON.stringify(p)+": ",M=a(s[p],v,h.length+(f===g-1?0:1)),M!==void 0&&d.push(h+M);if(d.length>0)return[C,r+d.join(`,
`+v),u].join(`
`+c)}return b}(t,"",0)}});var cO=null;var Vw=1,Nw=Symbol("SIGNAL");function qr(e){let t=cO;return cO=e,t}var lO={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function lse(e){if(!(Tw(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Vw)){if(!e.producerMustRecompute(e)&&!_w(e)){e.dirty=!1,e.lastCleanEpoch=Vw;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Vw}}function uO(e){return e&&(e.nextProducerIndex=0),qr(e)}function fO(e,t){if(qr(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Tw(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)kw(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function _w(e){em(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(lse(n),r!==n.version))return!0}return!1}function dO(e){if(em(e),Tw(e))for(let t=0;t<e.producerNode.length;t++)kw(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function kw(e,t){if(use(e),em(e),e.liveConsumerNode.length===1)for(let r=0;r<e.producerNode.length;r++)kw(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];em(i),i.producerIndexOfThis[r]=t}}function Tw(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function em(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function use(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function fse(){throw new Error}var dse=fse;function pO(e){dse=e}function Ge(e){return typeof e=="function"}function Y0(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var tm=Y0(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function _8(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ur=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Ge(r))try{r()}catch(o){t=o instanceof tm?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{hO(o)}catch(a){t=t??[],a instanceof tm?t=[...t,...a.errors]:t.push(a)}}if(t)throw new tm(t)}}add(t){var n;if(t&&t!==this)if(this.closed)hO(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&_8(n,t)}remove(t){let{_finalizers:n}=this;n&&_8(n,t),t instanceof e&&t._removeParent(this)}};ur.EMPTY=(()=>{let e=new ur;return e.closed=!0,e})();var Iw=ur.EMPTY;function nm(e){return e instanceof ur||e&&"closed"in e&&Ge(e.remove)&&Ge(e.add)&&Ge(e.unsubscribe)}function hO(e){Ge(e)?e():e.unsubscribe()}var y2={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var X0={setTimeout(e,t,...n){let{delegate:r}=X0;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=X0;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function rm(e){X0.setTimeout(()=>{let{onUnhandledError:t}=y2;if(t)t(e);else throw e})}function k8(){}var mO=Fw("C",void 0,void 0);function gO(e){return Fw("E",void 0,e)}function vO(e){return Fw("N",e,void 0)}function Fw(e,t,n){return{kind:e,value:t,error:n}}var O4=null;function Q0(e){if(y2.useDeprecatedSynchronousErrorHandling){let t=!O4;if(t&&(O4={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=O4;if(O4=null,n)throw r}}else e()}function yO(e){y2.useDeprecatedSynchronousErrorHandling&&O4&&(O4.errorThrown=!0,O4.error=e)}var P4=class extends ur{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,nm(t)&&t.add(this)):this.destination=mse}static create(t,n,r){return new K0(t,n,r)}next(t){this.isStopped?Ow(vO(t),this):this._next(t)}error(t){this.isStopped?Ow(gO(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Ow(mO,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},pse=Function.prototype.bind;function Rw(e,t){return pse.call(e,t)}var Pw=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){im(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){im(r)}else im(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){im(n)}}},K0=class extends P4{constructor(t,n,r){super();let i;if(Ge(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&y2.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Rw(t.next,o),error:t.error&&Rw(t.error,o),complete:t.complete&&Rw(t.complete,o)}):i=t}this.destination=new Pw(i)}};function im(e){y2.useDeprecatedSynchronousErrorHandling?yO(e):rm(e)}function hse(e){throw e}function Ow(e,t){let{onStoppedNotification:n}=y2;n&&X0.setTimeout(()=>n(e,t))}var mse={closed:!0,next:k8,error:hse,complete:k8};var Z0=typeof Symbol=="function"&&Symbol.observable||"@@observable";function J1(e){return e}function $w(...e){return Bw(e)}function Bw(e){return e.length===0?J1:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var wt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=vse(n)?n:new K0(n,r,i);return Q0(()=>{let{operator:a,source:s}=this;o.add(a?a.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=xO(r),new r((i,o)=>{let a=new K0({next:s=>{try{n(s)}catch(c){o(c),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Z0](){return this}pipe(...n){return Bw(n)(this)}toPromise(n){return n=xO(n),new n((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return e.create=t=>new e(t),e})();function xO(e){var t;return(t=e??y2.Promise)!==null&&t!==void 0?t:Promise}function gse(e){return e&&Ge(e.next)&&Ge(e.error)&&Ge(e.complete)}function vse(e){return e&&e instanceof P4||gse(e)&&nm(e)}function Uw(e){return Ge(e?.lift)}function mt(e){return t=>{if(Uw(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ut(e,t,n,r,i){return new jw(e,t,n,r,i)}var jw=class extends P4{constructor(t,n,r,i,o,a){super(t),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(s){try{n(s)}catch(c){t.error(c)}}:super._next,this._error=i?function(s){try{i(s)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(s){t.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function J0(){return mt((e,t)=>{let n=null;e._refCount++;let r=ut(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var e6=class extends wt{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Uw(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ur;let n=this.getSubject();t.add(this.source.subscribe(ut(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ur.EMPTY)}return t}refCount(){return J0()(this)}};var CO=Y0(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var x1=(()=>{class e extends wt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new om(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new CO}next(n){Q0(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Q0(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Q0(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Iw:(this.currentObservers=null,o.push(n),new ur(()=>{this.currentObservers=null,_8(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new wt;return n.source=this,n}}return e.create=(t,n)=>new om(t,n),e})(),om=class extends x1{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Iw}};var Bn=class extends x1{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Lo=new wt(e=>e.complete());function bO(e){return e&&Ge(e.schedule)}function MO(e){return e[e.length-1]}function am(e){return Ge(MO(e))?e.pop():void 0}function t3(e){return bO(MO(e))?e.pop():void 0}function SO(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(e,t||[])).next())})}function wO(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $4(e){return this instanceof $4?(this.v=e,this):new $4(e)}function EO(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(d){r[d]&&(i[d]=function(p){return new Promise(function(h,m){o.push([d,p,h,m])>1||s(d,p)})})}function s(d,p){try{c(r[d](p))}catch(h){f(o[0][3],h)}}function c(d){d.value instanceof $4?Promise.resolve(d.value.v).then(l,u):f(o[0][2],d)}function l(d){s("next",d)}function u(d){s("throw",d)}function f(d,p){d(p),o.shift(),o.length&&s(o[0][0],o[0][1])}}function DO(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof wO=="function"?wO(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(s,c){a=e[o](a),i(s,c,a.done,a.value)})}}function i(o,a,s,c){Promise.resolve(c).then(function(l){o({value:l,done:s})},a)}}var sm=e=>e&&typeof e.length=="number"&&typeof e!="function";function cm(e){return Ge(e?.then)}function lm(e){return Ge(e[Z0])}function um(e){return Symbol.asyncIterator&&Ge(e?.[Symbol.asyncIterator])}function fm(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function yse(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var dm=yse();function pm(e){return Ge(e?.[dm])}function hm(e){return EO(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield $4(n.read());if(i)return yield $4(void 0);yield yield $4(r)}}finally{n.releaseLock()}})}function mm(e){return Ge(e?.getReader)}function Qn(e){if(e instanceof wt)return e;if(e!=null){if(lm(e))return xse(e);if(sm(e))return Cse(e);if(cm(e))return bse(e);if(um(e))return zO(e);if(pm(e))return Mse(e);if(mm(e))return wse(e)}throw fm(e)}function xse(e){return new wt(t=>{let n=e[Z0]();if(Ge(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Cse(e){return new wt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function bse(e){return new wt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,rm)})}function Mse(e){return new wt(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function zO(e){return new wt(t=>{Sse(e,t).catch(n=>t.error(n))})}function wse(e){return zO(hm(e))}function Sse(e,t){var n,r,i,o;return SO(this,void 0,void 0,function*(){try{for(n=DO(e);r=yield n.next(),!r.done;){let a=r.value;if(t.next(a),t.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function C1(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function gm(e,t=0){return mt((n,r)=>{n.subscribe(ut(r,i=>C1(r,e,()=>r.next(i),t),()=>C1(r,e,()=>r.complete(),t),i=>C1(r,e,()=>r.error(i),t)))})}function vm(e,t=0){return mt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function HO(e,t){return Qn(e).pipe(vm(t),gm(t))}function LO(e,t){return Qn(e).pipe(vm(t),gm(t))}function AO(e,t){return new wt(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function VO(e,t){return new wt(n=>{let r;return C1(n,t,()=>{r=e[dm](),C1(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){n.error(a);return}o?n.complete():n.next(i)},0,!0)}),()=>Ge(r?.return)&&r.return()})}function ym(e,t){if(!e)throw new Error("Iterable cannot be null");return new wt(n=>{C1(n,t,()=>{let r=e[Symbol.asyncIterator]();C1(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function NO(e,t){return ym(hm(e),t)}function _O(e,t){if(e!=null){if(lm(e))return HO(e,t);if(sm(e))return AO(e,t);if(cm(e))return LO(e,t);if(um(e))return ym(e,t);if(pm(e))return VO(e,t);if(mm(e))return NO(e,t)}throw fm(e)}function tn(e,t){return t?_O(e,t):Qn(e)}function se(...e){let t=t3(e);return tn(e,t)}function t6(e,t){let n=Ge(e)?e:()=>e,r=i=>i.error(n());return new wt(t?i=>t.schedule(r,0,i):r)}function qw(e){return!!e&&(e instanceof wt||Ge(e.lift)&&Ge(e.subscribe))}var As=Y0(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Ke(e,t){return mt((n,r)=>{let i=0;n.subscribe(ut(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:Ese}=Array;function Dse(e,t){return Ese(t)?e(...t):e(t)}function xm(e){return Ke(t=>Dse(e,t))}var{isArray:zse}=Array,{getPrototypeOf:Hse,prototype:Lse,keys:Ase}=Object;function Cm(e){if(e.length===1){let t=e[0];if(zse(t))return{args:t,keys:null};if(Vse(t)){let n=Ase(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function Vse(e){return e&&typeof e=="object"&&Hse(e)===Lse}function bm(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function T8(...e){let t=t3(e),n=am(e),{args:r,keys:i}=Cm(e);if(r.length===0)return tn([],t);let o=new wt(Nse(r,t,i?a=>bm(i,a):J1));return n?o.pipe(xm(n)):o}function Nse(e,t,n=J1){return r=>{kO(t,()=>{let{length:i}=e,o=new Array(i),a=i,s=i;for(let c=0;c<i;c++)kO(t,()=>{let l=tn(e[c],t),u=!1;l.subscribe(ut(r,f=>{o[c]=f,u||(u=!0,s--),s||r.next(n(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function kO(e,t,n){e?C1(n,e,t):t()}function TO(e,t,n,r,i,o,a,s){let c=[],l=0,u=0,f=!1,d=()=>{f&&!c.length&&!l&&t.complete()},p=m=>l<r?h(m):c.push(m),h=m=>{o&&t.next(m),l++;let g=!1;Qn(n(m,u++)).subscribe(ut(t,v=>{i?.(v),o?p(v):t.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<r;){let v=c.shift();a?C1(t,a,()=>h(v)):h(v)}d()}catch(v){t.error(v)}}))};return e.subscribe(ut(t,p,()=>{f=!0,d()})),()=>{s?.()}}function Kn(e,t,n=1/0){return Ge(t)?Kn((r,i)=>Ke((o,a)=>t(r,o,i,a))(Qn(e(r,i))),n):(typeof t=="number"&&(n=t),mt((r,i)=>TO(r,i,e,n)))}function n3(e=1/0){return Kn(J1,e)}function IO(){return n3(1)}function n6(...e){return IO()(tn(e,t3(e)))}function Mm(e){return new wt(t=>{Qn(e()).subscribe(t)})}function Gw(...e){let t=am(e),{args:n,keys:r}=Cm(e),i=new wt(o=>{let{length:a}=n;if(!a){o.complete();return}let s=new Array(a),c=a,l=a;for(let u=0;u<a;u++){let f=!1;Qn(n[u]).subscribe(ut(o,d=>{f||(f=!0,l--),s[u]=d},()=>c--,void 0,()=>{(!c||!f)&&(l||o.next(r?bm(r,s):s),o.complete())}))}});return t?i.pipe(xm(t)):i}function b1(e,t){return mt((n,r)=>{let i=0;n.subscribe(ut(r,o=>e.call(t,o,i++)&&r.next(o)))})}function r3(e){return mt((t,n)=>{let r=null,i=!1,o;r=t.subscribe(ut(n,void 0,void 0,a=>{o=Qn(e(a,r3(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function FO(e,t,n,r,i){return(o,a)=>{let s=n,c=t,l=0;o.subscribe(ut(a,u=>{let f=l++;c=s?e(c,u,f):(s=!0,u),r&&a.next(c)},i&&(()=>{s&&a.next(c),a.complete()})))}}function Vs(e,t){return Ge(t)?Kn(e,t,1):Kn(e,1)}function i3(e){return mt((t,n)=>{let r=!1;t.subscribe(ut(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function xe(e){return e<=0?()=>Lo:mt((t,n)=>{let r=0;t.subscribe(ut(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Ww(e){return Ke(()=>e)}function wm(e=_se){return mt((t,n)=>{let r=!1;t.subscribe(ut(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function _se(){return new As}function o3(e){return mt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function ba(e,t){let n=arguments.length>=2;return r=>r.pipe(e?b1((i,o)=>e(i,o,r)):J1,xe(1),n?i3(t):wm(()=>new As))}function r6(e){return e<=0?()=>Lo:mt((t,n)=>{let r=[];t.subscribe(ut(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Yw(e,t){let n=arguments.length>=2;return r=>r.pipe(e?b1((i,o)=>e(i,o,r)):J1,r6(1),n?i3(t):wm(()=>new As))}function Xw(e,t){return mt(FO(e,t,arguments.length>=2,!0))}function Qw(...e){let t=t3(e);return mt((n,r)=>{(t?n6(e,n,t):n6(e,n)).subscribe(r)})}function M1(e,t){return mt((n,r)=>{let i=null,o=0,a=!1,s=()=>a&&!i&&r.complete();n.subscribe(ut(r,c=>{i?.unsubscribe();let l=0,u=o++;Qn(e(c,u)).subscribe(i=ut(r,f=>r.next(t?t(c,f,u,l++):f),()=>{i=null,s()}))},()=>{a=!0,s()}))})}function Kw(e){return mt((t,n)=>{Qn(e).subscribe(ut(n,()=>n.complete(),k8)),!n.closed&&t.subscribe(n)})}function fr(e,t,n){let r=Ge(e)||t||n?{next:e,error:t,complete:n}:e;return r?mt((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let s=!0;i.subscribe(ut(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;s=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;s=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;s&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):J1}var EP="https://g.co/ng/security#xss",Ce=class extends Error{constructor(t,n){super(i9(t,n)),this.code=t}};function i9(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}var hS=class extends x1{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),a=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),a=c.complete?.bind(c)}this.__isAsync&&(o=Zw(o),i&&(i=Zw(i)),a&&(a=Zw(a)));let s=super.subscribe({next:i,error:o,complete:a});return t instanceof ur&&t.add(s),s}};function Zw(e){return t=>{setTimeout(e,void 0,t)}}var Wt=hS;var rt=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(rt||{});function qi(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(qi).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function RO(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var DP=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(DP||{}),Sa=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Sa||{});function X8(e){return{toString:e}.toString()}var Un=globalThis;var u6={},Ao=[];function Xt(e){for(let t in e)if(e[t]===Xt)return t;throw Error("Could not find renamed property on target object.")}function kse(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}var Tse=Xt({\u0275cmp:Xt}),Ise=Xt({\u0275dir:Xt}),Fse=Xt({\u0275pipe:Xt}),Rse=Xt({\u0275mod:Xt}),Fm=Xt({\u0275fac:Xt}),I8=Xt({__NG_ELEMENT_ID__:Xt}),OO=Xt({__NG_ENV_ID__:Xt}),Gr=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Gr||{});function zP(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function mS(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],a=n[r++],s=n[r++];e.setAttribute(t,a,s,o)}else{let o=i,a=n[++r];Ose(o)?e.setProperty(t,o,a):e.setAttribute(t,o,a),r++}}return r}function HP(e){return e===3||e===4||e===6}function Ose(e){return e.charCodeAt(0)===64}function R8(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?PO(e,n,i,null,t[++r]):PO(e,n,i,null,null))}}return e}function PO(e,t,n,r,i){let o=0,a=e.length;if(t===-1)a=-1;else for(;o<e.length;){let s=e[o++];if(typeof s=="number"){if(s===t){a=-1;break}else if(s>t){a=o-1;break}}}for(;o<e.length;){let s=e[o];if(typeof s=="number")break;if(s===n){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}a!==-1&&(e.splice(a,0,t),o=a+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var LP="ng-template";function Pse(e,t,n){let r=0,i=!0;for(;r<e.length;){let o=e[r++];if(typeof o=="string"&&i){let a=e[r++];if(n&&o==="class"&&zP(a.toLowerCase(),t,0)!==-1)return!0}else if(o===1){for(;r<e.length&&typeof(o=e[r++])=="string";)if(o.toLowerCase()===t)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function AP(e){return e.type===4&&e.value!==LP}function $se(e,t,n){let r=e.type===4&&!n?LP:e.value;return t===r}function Bse(e,t,n){let r=4,i=e.attrs||[],o=qse(i),a=!1;for(let s=0;s<t.length;s++){let c=t[s];if(typeof c=="number"){if(!a&&!x2(r)&&!x2(c))return!1;if(a&&x2(c))continue;a=!1,r=c|r&1;continue}if(!a)if(r&4){if(r=2|r&1,c!==""&&!$se(e,c,n)||c===""&&t.length===1){if(x2(r))return!1;a=!0}}else{let l=r&8?c:t[++s];if(r&8&&e.attrs!==null){if(!Pse(e.attrs,l,n)){if(x2(r))return!1;a=!0}continue}let u=r&8?"class":c,f=Use(u,i,AP(e),n);if(f===-1){if(x2(r))return!1;a=!0;continue}if(l!==""){let d;f>o?d="":d=i[f+1].toLowerCase();let p=r&8?d:null;if(p&&zP(p,l,0)!==-1||r&2&&l!==d){if(x2(r))return!1;a=!0}}}}return x2(r)||a}function x2(e){return(e&1)===0}function Use(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let a=t[i];if(a===e)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let s=t[++i];for(;typeof s=="string";)s=t[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return Gse(t,e)}function VP(e,t,n=!1){for(let r=0;r<t.length;r++)if(Bse(e,t[r],n))return!0;return!1}function jse(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function qse(e){for(let t=0;t<e.length;t++){let n=e[t];if(HP(n))return t}return e.length}function Gse(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Wse(e,t){e:for(let n=0;n<t.length;n++){let r=t[n];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function $O(e,t){return e?":not("+t.trim()+")":t}function Yse(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let a=e[n];if(typeof a=="string")if(r&2){let s=e[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!x2(a)&&(t+=$O(o,i),i=""),r=a,o=o||!x2(r);n++}return i!==""&&(t+=$O(o,i)),t}function Xse(e){return e.map(Yse).join(",")}function Qse(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!x2(i))break;i=o}r++}return{attrs:t,classes:n}}function Le(e){return X8(()=>{let t=IP(e),n=k(x({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===DP.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Sa.Emulated,styles:e.styles||Ao,_:null,schemas:e.schemas||null,tView:null,id:""});FP(n);let r=e.dependencies;return n.directiveDefs=UO(r,!1),n.pipeDefs=UO(r,!0),n.id=Jse(n),n})}function Kse(e){return c3(e)||NP(e)}function Zse(e){return e!==null}function wr(e){return X8(()=>({type:e.type,bootstrap:e.bootstrap||Ao,declarations:e.declarations||Ao,imports:e.imports||Ao,exports:e.exports||Ao,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function BO(e,t){if(e==null)return u6;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,a,s=Gr.None;Array.isArray(i)?(s=i[0],o=i[1],a=i[2]??o):(o=i,a=i),t?(n[o]=s!==Gr.None?[r,s]:r,t[o]=a):n[o]=r}return n}function Qt(e){return X8(()=>{let t=IP(e);return FP(t),t})}function gE(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone===!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function c3(e){return e[Tse]||null}function NP(e){return e[Ise]||null}function _P(e){return e[Fse]||null}function kP(e){let t=c3(e)||NP(e)||_P(e);return t!==null?t.standalone:!1}function TP(e,t){let n=e[Rse]||null;if(!n&&t===!0)throw new Error(`Type ${qi(e)} does not have '\u0275mod' property.`);return n}function IP(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||u6,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Ao,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:BO(e.inputs,t),outputs:BO(e.outputs),debugInfo:null}}function FP(e){e.features?.forEach(t=>t(e))}function UO(e,t){if(!e)return null;let n=t?_P:Kse;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(Zse)}function Jse(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}var Is=0,Ye=1,Pe=2,Wr=3,C2=4,eo=5,O8=6,P8=7,Vo=8,f6=9,Ns=10,Ln=11,$8=12,jO=13,y6=14,b2=15,Q8=16,i6=17,_s=18,o9=19,RP=20,s3=21,Jw=22,q4=23,Gi=25,OP=1;var G4=7,Rm=8,d6=9,S1=10,vE=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(vE||{});function U4(e){return Array.isArray(e)&&typeof e[OP]=="object"}function Fs(e){return Array.isArray(e)&&e[OP]===!0}function yE(e){return(e.flags&4)!==0}function a9(e){return e.componentOffset>-1}function s9(e){return(e.flags&1)===1}function l3(e){return!!e.template}function ece(e){return(e[Pe]&512)!==0}var tce="svg",nce="math",rce=!1;function ice(){return rce}function Ea(e){for(;Array.isArray(e);)e=e[Is];return e}function PP(e,t){return Ea(t[e])}function No(e,t){return Ea(t[e.index])}function xE(e,t){return e.data[t]}function $P(e,t){return e[t]}function d3(e,t){let n=t[e];return U4(n)?n:n[Is]}function oce(e){return(e[Pe]&4)===4}function CE(e){return(e[Pe]&128)===128}function ace(e){return Fs(e[Wr])}function p6(e,t){return t==null?null:e[t]}function BP(e){e[i6]=0}function sce(e){e[Pe]&1024||(e[Pe]|=1024,CE(e)&&B8(e))}function cce(e,t){for(;e>0;)t=t[y6],e--;return t}function bE(e){return!!(e[Pe]&9216||e[q4]?.dirty)}function gS(e){bE(e)?B8(e):e[Pe]&64&&(ice()?(e[Pe]|=1024,B8(e)):e[Ns].changeDetectionScheduler?.notify())}function B8(e){e[Ns].changeDetectionScheduler?.notify();let t=U8(e);for(;t!==null&&!(t[Pe]&8192||(t[Pe]|=8192,!CE(t)));)t=U8(t)}function UP(e,t){if((e[Pe]&256)===256)throw new Ce(911,!1);e[s3]===null&&(e[s3]=[]),e[s3].push(t)}function lce(e,t){if(e[s3]===null)return;let n=e[s3].indexOf(t);n!==-1&&e[s3].splice(n,1)}function U8(e){let t=e[Wr];return Fs(t)?t[Wr]:t}var Je={lFrame:KP(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function uce(){return Je.lFrame.elementDepthCount}function fce(){Je.lFrame.elementDepthCount++}function dce(){Je.lFrame.elementDepthCount--}function jP(){return Je.bindingsEnabled}function qP(){return Je.skipHydrationRootTNode!==null}function pce(e){return Je.skipHydrationRootTNode===e}function hce(){Je.skipHydrationRootTNode=null}function it(){return Je.lFrame.lView}function Zn(){return Je.lFrame.tView}function hi(e){return Je.lFrame.contextLView=e,e[Vo]}function mi(e){return Je.lFrame.contextLView=null,e}function gi(){let e=GP();for(;e!==null&&e.type===64;)e=e.parent;return e}function GP(){return Je.lFrame.currentTNode}function mce(){let e=Je.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function tl(e,t){let n=Je.lFrame;n.currentTNode=e,n.isParent=t}function ME(){return Je.lFrame.isParent}function wE(){Je.lFrame.isParent=!1}function gce(){return Je.lFrame.contextLView}function SE(){let e=Je.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function vce(){return Je.lFrame.bindingIndex}function yce(e){return Je.lFrame.bindingIndex=e}function x6(){return Je.lFrame.bindingIndex++}function WP(e){let t=Je.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function xce(){return Je.lFrame.inI18n}function Cce(e,t){let n=Je.lFrame;n.bindingIndex=n.bindingRootIndex=e,vS(t)}function bce(){return Je.lFrame.currentDirectiveIndex}function vS(e){Je.lFrame.currentDirectiveIndex=e}function Mce(e){let t=Je.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function YP(){return Je.lFrame.currentQueryIndex}function EE(e){Je.lFrame.currentQueryIndex=e}function wce(e){let t=e[Ye];return t.type===2?t.declTNode:t.type===1?e[eo]:null}function XP(e,t,n){if(n&rt.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&rt.Host);)if(i=wce(o),i===null||(o=o[y6],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=Je.lFrame=QP();return r.currentTNode=t,r.lView=e,!0}function DE(e){let t=QP(),n=e[Ye];Je.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function QP(){let e=Je.lFrame,t=e===null?null:e.child;return t===null?KP(e):t}function KP(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function ZP(){let e=Je.lFrame;return Je.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var JP=ZP;function zE(){let e=ZP();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Sce(e){return(Je.lFrame.contextLView=cce(e,Je.lFrame.contextLView))[Vo]}function nl(){return Je.lFrame.selectedIndex}function W4(e){Je.lFrame.selectedIndex=e}function c9(){let e=Je.lFrame;return xE(e.tView,e.selectedIndex)}function Ece(){return Je.lFrame.currentNamespace}var e$=!0;function l9(){return e$}function u9(e){e$=e}function Dce(){return C6(gi(),it())}function C6(e,t){return new Yr(No(e,t))}var Yr=(()=>{let t=class t{constructor(r){this.nativeElement=r}};t.__NG_ELEMENT_ID__=Dce;let e=t;return e})();function zce(e){return e instanceof Yr?e.nativeElement:e}function Hce(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function Lce(e){return e.flat(Number.POSITIVE_INFINITY)}function HE(e,t){e.forEach(n=>Array.isArray(n)?HE(n,t):t(n))}function t$(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Om(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Ace(e,t){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function Vce(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function Nce(e,t,n){let r=K8(e,t);return r>=0?e[r|1]=n:(r=~r,Vce(e,r,t,n)),r}function eS(e,t){let n=K8(e,t);if(n>=0)return e[n|1]}function K8(e,t){return _ce(e,t,1)}function _ce(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),a=e[o<<n];if(t===a)return o<<n;a>t?i=o:r=o+1}return~(i<<n)}function kce(){return this._results[Symbol.iterator]()}var yS=class e{get changes(){return this._changes??=new Wt}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=kce)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=Lce(t);(this._changesDetected=!Hce(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function n$(e){return(e.flags&128)===128}var xS;function r$(e){xS=e}function i$(){if(xS!==void 0)return xS;if(typeof document<"u")return document;throw new Ce(210,!1)}function ue(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Sr(e){return{providers:e.providers||[],imports:e.imports||[]}}function f9(e){return qO(e,a$)||qO(e,s$)}function o$(e){return f9(e)!==null}function qO(e,t){return e.hasOwnProperty(t)?e[t]:null}function Tce(e){let t=e&&(e[a$]||e[s$]);return t||null}function GO(e){return e&&(e.hasOwnProperty(WO)||e.hasOwnProperty(Ice))?e[WO]:null}var a$=Xt({\u0275prov:Xt}),WO=Xt({\u0275inj:Xt}),s$=Xt({ngInjectableDef:Xt}),Ice=Xt({ngInjectorDef:Xt}),ze=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ue({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}},d9=new ze("",{providedIn:"root",factory:()=>Fce}),Fce="ng",LE=new ze(""),Ha=new ze("",{providedIn:"platform",factory:()=>"unknown"});var AE=new ze("",{providedIn:"root",factory:()=>i$().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Rce=Xt({__forward_ref__:Xt});function La(e){return e.__forward_ref__=La,e.toString=function(){return qi(this())},e}function ji(e){return c$(e)?e():e}function c$(e){return typeof e=="function"&&e.hasOwnProperty(Rce)&&e.__forward_ref__===La}function l$(e){return e&&!!e.\u0275providers}function Y4(e){return typeof e=="string"?e:e==null?"":String(e)}function Oce(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Y4(e)}function Pce(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Ce(-200,e)}function VE(e,t){throw new Ce(-201,!1)}var CS;function u$(){return CS}function w1(e){let t=CS;return CS=e,t}function f$(e,t,n){let r=f9(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&rt.Optional)return null;if(t!==void 0)return t;VE(e,"Injector")}var $ce={},j8=$ce,bS="__NG_DI_FLAG__",Pm="ngTempTokenPath",Bce="ngTokenPath",Uce=/\n/gm,jce="\u0275",YO="__source",c6;function qce(){return c6}function a3(e){let t=c6;return c6=e,t}function Gce(e,t=rt.Default){if(c6===void 0)throw new Ce(-203,!1);return c6===null?f$(e,void 0,t):c6.get(e,t&rt.Optional?null:void 0,t)}function ve(e,t=rt.Default){return(u$()||Gce)(ji(e),t)}function ce(e,t=rt.Default){return ve(e,p9(t))}function p9(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function MS(e){let t=[];for(let n=0;n<e.length;n++){let r=ji(e[n]);if(Array.isArray(r)){if(r.length===0)throw new Ce(900,!1);let i,o=rt.Default;for(let a=0;a<r.length;a++){let s=r[a],c=Wce(s);typeof c=="number"?c===-1?i=s.token:o|=c:i=s}t.push(ve(i,o))}else t.push(ve(r))}return t}function d$(e,t){return e[bS]=t,e.prototype[bS]=t,e}function Wce(e){return e[bS]}function Yce(e,t,n,r){let i=e[Pm];throw t[YO]&&i.unshift(t[YO]),e.message=Xce(`
`+e.message,i,n,r),e[Bce]=i,e[Pm]=null,e}function Xce(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==jce?e.slice(2):e;let i=qi(t);if(Array.isArray(t))i=t.map(qi).join(" -> ");else if(typeof t=="object"){let o=[];for(let a in t)if(t.hasOwnProperty(a)){let s=t[a];o.push(a+":"+(typeof s=="string"?JSON.stringify(s):qi(s)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Uce,`
  `)}`}var Qce="h",Kce="b";var Zce=()=>null;function NE(e,t,n=!1){return Zce(e,t,n)}var Sm="__parameters__";function Jce(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function p$(e,t,n){return X8(()=>{let r=Jce(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let a=new i(...o);return s.annotation=a,s;function s(c,l,u){let f=c.hasOwnProperty(Sm)?c[Sm]:Object.defineProperty(c,Sm,{value:[]})[Sm];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(a),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var h9=d$(p$("Optional"),8);var _E=d$(p$("SkipSelf"),4);function X4(e,t){let n=e.hasOwnProperty(Fm);return n?e[Fm]:null}var h6=new ze(""),h$=new ze("",-1),m$=new ze(""),$m=class{get(t,n=j8){if(n===j8){let r=new Error(`NullInjectorError: No provider for ${qi(t)}!`);throw r.name="NullInjectorError",r}return n}};function m9(e){return{\u0275providers:e}}function e3e(...e){return{\u0275providers:g$(!0,e),\u0275fromNgModule:!0}}function g$(e,...t){let n=[],r=new Set,i,o=a=>{n.push(a)};return HE(t,a=>{let s=a;wS(s,o,[],r)&&(i||=[],i.push(s))}),i!==void 0&&v$(i,o),n}function v$(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];kE(i,o=>{t(o,r)})}}function wS(e,t,n,r){if(e=ji(e),!e)return!1;let i=null,o=GO(e),a=!o&&c3(e);if(!o&&!a){let c=e.ngModule;if(o=GO(c),o)i=c;else return!1}else{if(a&&!a.standalone)return!1;i=e}let s=r.has(i);if(a){if(s)return!1;if(r.add(i),a.dependencies){let c=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let l of c)wS(l,t,n,r)}}else if(o){if(o.imports!=null&&!s){r.add(i);let l;try{HE(o.imports,u=>{wS(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&v$(l,t)}if(!s){let l=X4(i)||(()=>new i);t({provide:i,useFactory:l,deps:Ao},i),t({provide:m$,useValue:i,multi:!0},i),t({provide:h6,useValue:()=>ve(i),multi:!0},i)}let c=o.providers;if(c!=null&&!s){let l=e;kE(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function kE(e,t){for(let n of e)l$(n)&&(n=n.\u0275providers),Array.isArray(n)?kE(n,t):t(n)}var t3e=Xt({provide:String,useValue:Xt});function y$(e){return e!==null&&typeof e=="object"&&t3e in e}function n3e(e){return!!(e&&e.useExisting)}function r3e(e){return!!(e&&e.useFactory)}function m6(e){return typeof e=="function"}function i3e(e){return!!e.useClass}var g9=new ze(""),Vm={},o3e={},tS;function TE(){return tS===void 0&&(tS=new $m),tS}var Wi=class{},q8=class extends Wi{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ES(t,a=>this.processProvider(a)),this.records.set(h$,o6(void 0,this)),i.has("environment")&&this.records.set(Wi,o6(void 0,this));let o=this.records.get(g9);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(m$,Ao,rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=a3(this),r=w1(void 0),i;try{return t()}finally{a3(n),w1(r)}}get(t,n=j8,r=rt.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(OO))return t[OO](this);r=p9(r);let i,o=a3(this),a=w1(void 0);try{if(!(r&rt.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=u3e(t)&&f9(t);l&&this.injectableDefInScope(l)?c=o6(SS(t),Vm):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let s=r&rt.Self?TE():this.parent;return n=r&rt.Optional&&n===j8?null:n,s.get(t,n)}catch(s){if(s.name==="NullInjectorError"){if((s[Pm]=s[Pm]||[]).unshift(qi(t)),o)throw s;return Yce(s,t,"R3InjectorError",this.source)}else throw s}finally{w1(a),a3(o)}}resolveInjectorInitializers(){let t=a3(this),n=w1(void 0),r;try{let i=this.get(h6,Ao,rt.Self);for(let o of i)o()}finally{a3(t),w1(n)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(qi(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ce(205,!1)}processProvider(t){t=ji(t);let n=m6(t)?t:ji(t&&t.provide),r=s3e(t);if(!m6(t)&&t.multi===!0){let i=this.records.get(n);i||(i=o6(void 0,Vm,!0),i.factory=()=>MS(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Vm&&(n.value=o3e,n.value=n.factory()),typeof n.value=="object"&&n.value&&l3e(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;let n=ji(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function SS(e){let t=f9(e),n=t!==null?t.factory:X4(e);if(n!==null)return n;if(e instanceof ze)throw new Ce(204,!1);if(e instanceof Function)return a3e(e);throw new Ce(204,!1)}function a3e(e){if(e.length>0)throw new Ce(204,!1);let n=Tce(e);return n!==null?()=>n.factory(e):()=>new e}function s3e(e){if(y$(e))return o6(void 0,e.useValue);{let t=x$(e);return o6(t,Vm)}}function x$(e,t,n){let r;if(m6(e)){let i=ji(e);return X4(i)||SS(i)}else if(y$(e))r=()=>ji(e.useValue);else if(r3e(e))r=()=>e.useFactory(...MS(e.deps||[]));else if(n3e(e))r=()=>ve(ji(e.useExisting));else{let i=ji(e&&(e.useClass||e.provide));if(c3e(e))r=()=>new i(...MS(e.deps));else return X4(i)||SS(i)}return r}function o6(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function c3e(e){return!!e.deps}function l3e(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function u3e(e){return typeof e=="function"||typeof e=="object"&&e instanceof ze}function ES(e,t){for(let n of e)Array.isArray(n)?ES(n,t):n&&l$(n)?ES(n.\u0275providers,t):t(n)}function Aa(e,t){e instanceof q8&&e.assertNotDestroyed();let n,r=a3(e),i=w1(void 0);try{return t()}finally{a3(r),w1(i)}}function f3e(e){if(!u$()&&!qce())throw new Ce(-203,!1)}function d3e(e){let t=Un.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function p3e(e){return typeof e=="function"}var DS=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function C$(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function _o(){return b$}function b$(e){return e.type.prototype.ngOnChanges&&(e.setInput=m3e),h3e}_o.ngInherit=!0;function h3e(){let e=w$(this),t=e?.current;if(t){let n=e.previous;if(n===u6)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function m3e(e,t,n,r,i){let o=this.declaredInputs[r],a=w$(e)||g3e(e,{previous:u6,current:null}),s=a.current||(a.current={}),c=a.previous,l=c[o];s[o]=new DS(l&&l.currentValue,n,c===u6),C$(e,t,i,n)}var M$="__ngSimpleChanges__";function w$(e){return e[M$]||null}function g3e(e,t){return e[M$]=t}var XO=null;var Ma=function(e,t,n){XO?.(e,t,n)};function v3e(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let a=b$(t);(n.preOrderHooks??=[]).push(e,a),(n.preOrderCheckHooks??=[]).push(e,a)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function v9(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:s,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;a&&(e.contentHooks??=[]).push(-n,a),s&&((e.contentHooks??=[]).push(n,s),(e.contentCheckHooks??=[]).push(n,s)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Nm(e,t,n){S$(e,t,3,n)}function _m(e,t,n,r){(e[Pe]&3)===n&&S$(e,t,n,r)}function nS(e,t){let n=e[Pe];(n&3)===t&&(n&=16383,n+=1,e[Pe]=n)}function S$(e,t,n,r){let i=r!==void 0?e[i6]&65535:0,o=r??-1,a=t.length-1,s=0;for(let c=i;c<a;c++)if(typeof t[c+1]=="number"){if(s=t[c],r!=null&&s>=r)break}else t[c]<0&&(e[i6]+=65536),(s<o||o==-1)&&(y3e(e,n,t,c),e[i6]=(e[i6]&4294901760)+c+2),c++}function QO(e,t){Ma(4,e,t);let n=qr(null);try{t.call(e)}finally{qr(n),Ma(5,e,t)}}function y3e(e,t,n,r){let i=n[r]<0,o=n[r+1],a=i?-n[r]:n[r],s=e[a];i?e[Pe]>>14<e[i6]>>16&&(e[Pe]&3)===t&&(e[Pe]+=16384,QO(s,o)):QO(s,o)}var l6=-1,Q4=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function x3e(e){return e instanceof Q4}function C3e(e){return(e.flags&8)!==0}function b3e(e){return(e.flags&16)!==0}function E$(e){return e!==l6}function Bm(e){return e&32767}function M3e(e){return e>>16}function Um(e,t){let n=M3e(e),r=t;for(;n>0;)r=r[y6],n--;return r}var zS=!0;function jm(e){let t=zS;return zS=e,t}var w3e=256,D$=w3e-1,z$=5,S3e=0,wa={};function E3e(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(I8)&&(r=n[I8]),r==null&&(r=n[I8]=S3e++);let i=r&D$,o=1<<i;t.data[e+(i>>z$)]|=o}function qm(e,t){let n=H$(e,t);if(n!==-1)return n;let r=t[Ye];r.firstCreatePass&&(e.injectorIndex=t.length,rS(r.data,e),rS(t,null),rS(r.blueprint,null));let i=IE(e,t),o=e.injectorIndex;if(E$(i)){let a=Bm(i),s=Um(i,t),c=s[Ye].data;for(let l=0;l<8;l++)t[o+l]=s[a+l]|c[a+l]}return t[o+8]=i,o}function rS(e,t){e.push(0,0,0,0,0,0,0,0,t)}function H$(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function IE(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=_$(i),r===null)return l6;if(n++,i=i[y6],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return l6}function HS(e,t,n){E3e(e,t,n)}function D3e(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(HP(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===t)return n[i+1];i=i+2}}}return null}function L$(e,t,n){if(n&rt.Optional||e!==void 0)return e;VE(t,"NodeInjector")}function A$(e,t,n,r){if(n&rt.Optional&&r===void 0&&(r=null),!(n&(rt.Self|rt.Host))){let i=e[f6],o=w1(void 0);try{return i?i.get(t,r,n&rt.Optional):f$(t,r,n&rt.Optional)}finally{w1(o)}}return L$(r,t,n)}function V$(e,t,n,r=rt.Default,i){if(e!==null){if(t[Pe]&2048&&!(r&rt.Self)){let a=A3e(e,t,n,r,wa);if(a!==wa)return a}let o=N$(e,t,n,r,wa);if(o!==wa)return o}return A$(t,n,r,i)}function N$(e,t,n,r,i){let o=H3e(n);if(typeof o=="function"){if(!XP(t,e,r))return r&rt.Host?L$(i,n,r):A$(t,n,r,i);try{let a;if(a=o(r),a==null&&!(r&rt.Optional))VE(n);else return a}finally{JP()}}else if(typeof o=="number"){let a=null,s=H$(e,t),c=l6,l=r&rt.Host?t[b2][eo]:null;for((s===-1||r&rt.SkipSelf)&&(c=s===-1?IE(e,t):t[s+8],c===l6||!ZO(r,!1)?s=-1:(a=t[Ye],s=Bm(c),t=Um(c,t)));s!==-1;){let u=t[Ye];if(KO(o,s,u.data)){let f=z3e(s,t,n,a,r,l);if(f!==wa)return f}c=t[s+8],c!==l6&&ZO(r,t[Ye].data[s+8]===l)&&KO(o,s,t)?(a=u,s=Bm(c),t=Um(c,t)):s=-1}}return i}function z3e(e,t,n,r,i,o){let a=t[Ye],s=a.data[e+8],c=r==null?a9(s)&&zS:r!=a&&(s.type&3)!==0,l=i&rt.Host&&o===s,u=km(s,a,n,c,l);return u!==null?K4(t,a,u,s):wa}function km(e,t,n,r,i){let o=e.providerIndexes,a=t.data,s=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,f=r?s:s+u,d=i?s+u:l;for(let p=f;p<d;p++){let h=a[p];if(p<c&&n===h||p>=c&&h.type===n)return p}if(i){let p=a[c];if(p&&l3(p)&&p.type===n)return c}return null}function K4(e,t,n,r){let i=e[n],o=t.data;if(x3e(i)){let a=i;a.resolving&&Pce(Oce(o[n]));let s=jm(a.canSeeViewProviders);a.resolving=!0;let c,l=a.injectImpl?w1(a.injectImpl):null,u=XP(e,r,rt.Default);try{i=e[n]=a.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&v3e(n,o[n],t)}finally{l!==null&&w1(l),jm(s),a.resolving=!1,JP()}}return i}function H3e(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(I8)?e[I8]:void 0;return typeof t=="number"?t>=0?t&D$:L3e:t}function KO(e,t,n){let r=1<<e;return!!(n[t+(e>>z$)]&r)}function ZO(e,t){return!(e&rt.Self)&&!(e&rt.Host&&t)}var j4=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return V$(this._tNode,this._lView,t,p9(r),n)}};function L3e(){return new j4(gi(),it())}function Va(e){return X8(()=>{let t=e.prototype.constructor,n=t[Fm]||LS(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[Fm]||LS(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function LS(e){return c$(e)?()=>{let t=LS(ji(e));return t&&t()}:X4(e)}function A3e(e,t,n,r,i){let o=e,a=t;for(;o!==null&&a!==null&&a[Pe]&2048&&!(a[Pe]&512);){let s=N$(o,a,n,r|rt.Self,wa);if(s!==wa)return s;let c=o.parent;if(!c){let l=a[RP];if(l){let u=l.get(n,wa,r);if(u!==wa)return u}c=_$(a),a=a[y6]}o=c}return i}function _$(e){let t=e[Ye],n=t.type;return n===2?t.declTNode:n===1?e[eo]:null}function FE(e){return D3e(gi(),e)}function JO(e,t=null,n=null,r){let i=k$(e,t,n,r);return i.resolveInjectorInitializers(),i}function k$(e,t=null,n=null,r,i=new Set){let o=[n||Ao,e3e(e)];return r=r||(typeof e=="object"?void 0:qi(e)),new q8(o,t||TE(),r||null,i)}var M2=(()=>{let t=class t{static create(r,i){if(Array.isArray(r))return JO({name:""},i,r,"");{let o=r.name??"";return JO({name:o},r.parent,r.providers,o)}}};t.THROW_IF_NOT_FOUND=j8,t.NULL=new $m,t.\u0275prov=ue({token:t,providedIn:"any",factory:()=>ve(h$)}),t.__NG_ELEMENT_ID__=-1;let e=t;return e})(),V3e="ngOriginalError";function iS(e){return e[V3e]}var Da=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&iS(t);for(;n&&iS(n);)n=iS(n);return n||null}},T$=new ze("",{providedIn:"root",factory:()=>ce(Da).handleError.bind(void 0)});var I$=!1,N3e=new ze("",{providedIn:"root",factory:()=>I$}),Em;function _3e(){if(Em===void 0&&(Em=null,Un.trustedTypes))try{Em=Un.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Em}function y9(e){return _3e()?.createHTML(e)||e}var Dm;function F$(){if(Dm===void 0&&(Dm=null,Un.trustedTypes))try{Dm=Un.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Dm}function eP(e){return F$()?.createHTML(e)||e}function tP(e){return F$()?.createScriptURL(e)||e}var ks=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${EP})`}},AS=class extends ks{getTypeName(){return"HTML"}},VS=class extends ks{getTypeName(){return"Style"}},NS=class extends ks{getTypeName(){return"Script"}},_S=class extends ks{getTypeName(){return"URL"}},kS=class extends ks{getTypeName(){return"ResourceURL"}};function w2(e){return e instanceof ks?e.changingThisBreaksApplicationSecurity:e}function Rs(e,t){let n=k3e(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${EP})`)}return n===t}function k3e(e){return e instanceof ks&&e.getTypeName()||null}function R$(e){return new AS(e)}function O$(e){return new VS(e)}function P$(e){return new NS(e)}function $$(e){return new _S(e)}function B$(e){return new kS(e)}function T3e(e){let t=new IS(e);return I3e()?new TS(t):t}var TS=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let n=new window.DOMParser().parseFromString(y9(t),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch{return null}}},IS=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let n=this.inertDocument.createElement("template");return n.innerHTML=y9(t),n}};function I3e(){try{return!!new window.DOMParser().parseFromString(y9(""),"text/html")}catch{return!1}}var F3e=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function x9(e){return e=String(e),e.match(F3e)?e:"unsafe:"+e}function Os(e){let t={};for(let n of e.split(","))t[n]=!0;return t}function Z8(...e){let t={};for(let n of e)for(let r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}var U$=Os("area,br,col,hr,img,wbr"),j$=Os("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),q$=Os("rp,rt"),R3e=Z8(q$,j$),O3e=Z8(j$,Os("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),P3e=Z8(q$,Os("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),nP=Z8(U$,O3e,P3e,R3e),G$=Os("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$3e=Os("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),B3e=Os("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),U3e=Z8(G$,$3e,B3e),j3e=Os("script,style,template"),FS=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,r=!0;for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){n=n.firstChild;continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}}return this.buf.join("")}startElement(t){let n=t.nodeName.toLowerCase();if(!nP.hasOwnProperty(n))return this.sanitizedSomething=!0,!j3e.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=t.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),a=o.name,s=a.toLowerCase();if(!U3e.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let c=o.value;G$[s]&&(c=x9(c)),this.buf.push(" ",a,'="',rP(c),'"')}return this.buf.push(">"),!0}endElement(t){let n=t.nodeName.toLowerCase();nP.hasOwnProperty(n)&&!U$.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(rP(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}},q3e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,G3e=/([^\#-~ |!])/g;function rP(e){return e.replace(/&/g,"&amp;").replace(q3e,function(t){let n=t.charCodeAt(0),r=t.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(G3e,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var zm;function RE(e,t){let n=null;try{zm=zm||T3e(e);let r=t?String(t):"";n=zm.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=zm.getInertBodyElement(r)}while(r!==o);let s=new FS().sanitizeChildren(iP(n)||n);return y9(s)}finally{if(n){let r=iP(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function iP(e){return"content"in e&&W3e(e)?e.content:null}function W3e(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var S2=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(S2||{});function W$(e){let t=OE();return t?eP(t.sanitize(S2.HTML,e)||""):Rs(e,"HTML")?eP(w2(e)):RE(i$(),Y4(e))}function Y3e(e){let t=OE();return t?t.sanitize(S2.URL,e)||"":Rs(e,"URL")?w2(e):x9(Y4(e))}function X3e(e){let t=OE();if(t)return tP(t.sanitize(S2.RESOURCE_URL,e)||"");if(Rs(e,"ResourceURL"))return tP(w2(e));throw new Ce(904,!1)}function Q3e(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?X3e:Y3e}function Y$(e,t,n){return Q3e(t,n)(e)}function OE(){let e=it();return e&&e[Ns].sanitizer}var K3e=/^>|^->|<!--|-->|--!>|<!-$/g,Z3e=/(<|>)/g,J3e="\u200B$1\u200B";function e4e(e){return e.replace(K3e,t=>t.replace(Z3e,J3e))}var X$=new Map,t4e=0;function n4e(){return t4e++}function r4e(e){X$.set(e[o9],e)}function i4e(e){X$.delete(e[o9])}var oP="__ngContext__";function u3(e,t){U4(t)?(e[oP]=t[o9],r4e(t)):e[oP]=t}function Q$(e){return e instanceof Function?e():e}function o4e(e){return(e??ce(M2)).get(Ha)==="browser"}var Ts=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Ts||{}),a4e;function PE(e,t){return a4e(e,t)}function a6(e,t,n,r,i){if(r!=null){let o,a=!1;Fs(r)?o=r:U4(r)&&(a=!0,r=r[Is]);let s=Ea(r);e===0&&n!==null?i==null?tB(t,n,s):Wm(t,n,s,i||null,!0):e===1&&n!==null?Wm(t,n,s,i||null,!0):e===2?M4e(t,s,a):e===3&&t.destroyNode(s),o!=null&&S4e(t,e,o,n,i)}}function s4e(e,t){return e.createText(t)}function c4e(e,t,n){e.setValue(t,n)}function l4e(e,t){return e.createComment(e4e(t))}function K$(e,t,n){return e.createElement(t,n)}function u4e(e,t){Z$(e,t),t[Is]=null,t[eo]=null}function f4e(e,t,n,r,i,o){r[Is]=i,r[eo]=t,b9(e,r,n,1,i,o)}function Z$(e,t){b9(e,t,t[Ln],2,null,null)}function d4e(e){let t=e[$8];if(!t)return oS(e[Ye],e);for(;t;){let n=null;if(U4(t))n=t[$8];else{let r=t[S1];r&&(n=r)}if(!n){for(;t&&!t[C2]&&t!==e;)U4(t)&&oS(t[Ye],t),t=t[Wr];t===null&&(t=e),U4(t)&&oS(t[Ye],t),n=t&&t[C2]}t=n}}function p4e(e,t,n,r){let i=S1+r,o=n.length;r>0&&(n[i-1][C2]=t),r<o-S1?(t[C2]=n[i],t$(n,S1+r,t)):(n.push(t),t[C2]=null),t[Wr]=n;let a=t[Q8];a!==null&&n!==a&&h4e(a,t);let s=t[_s];s!==null&&s.insertView(e),gS(t),t[Pe]|=128}function h4e(e,t){let n=e[d6],i=t[Wr][Wr][b2];t[b2]!==i&&(e[Pe]|=vE.HasTransplantedViews),n===null?e[d6]=[t]:n.push(t)}function J$(e,t){let n=e[d6],r=n.indexOf(t);n.splice(r,1)}function Gm(e,t){if(e.length<=S1)return;let n=S1+t,r=e[n];if(r){let i=r[Q8];i!==null&&i!==e&&J$(i,r),t>0&&(e[n-1][C2]=r[C2]);let o=Om(e,S1+t);u4e(r[Ye],r);let a=o[_s];a!==null&&a.detachView(o[Ye]),r[Wr]=null,r[C2]=null,r[Pe]&=-129}return r}function $E(e,t){if(!(t[Pe]&256)){let n=t[Ln];n.destroyNode&&b9(e,t,n,3,null,null),d4e(t)}}function oS(e,t){if(!(t[Pe]&256)){t[Pe]&=-129,t[Pe]|=256,t[q4]&&dO(t[q4]),g4e(e,t),m4e(e,t),t[Ye].type===1&&t[Ln].destroy();let n=t[Q8];if(n!==null&&Fs(t[Wr])){n!==t[Wr]&&J$(n,t);let r=t[_s];r!==null&&r.detachView(e)}i4e(t)}}function m4e(e,t){let n=e.cleanup,r=t[P8];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[n[o+1]];n[o].call(a)}r!==null&&(t[P8]=null);let i=t[s3];if(i!==null){t[s3]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}}function g4e(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Q4)){let o=n[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let s=i[o[a]],c=o[a+1];Ma(4,s,c);try{c.call(s)}finally{Ma(5,s,c)}}else{Ma(4,i,o);try{o.call(i)}finally{Ma(5,i,o)}}}}}function eB(e,t,n){return v4e(e,t.parent,n)}function v4e(e,t,n){let r=t;for(;r!==null&&r.type&40;)t=r,r=t.parent;if(r===null)return n[Is];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===Sa.None||o===Sa.Emulated)return null}return No(r,n)}}function Wm(e,t,n,r,i){e.insertBefore(t,n,r,i)}function tB(e,t,n){e.appendChild(t,n)}function aP(e,t,n,r,i){r!==null?Wm(e,t,n,r,i):tB(e,t,n)}function y4e(e,t,n,r){e.removeChild(t,n,r)}function BE(e,t){return e.parentNode(t)}function x4e(e,t){return e.nextSibling(t)}function nB(e,t,n){return b4e(e,t,n)}function C4e(e,t,n){return e.type&40?No(e,n):null}var b4e=C4e,sP;function C9(e,t,n,r){let i=eB(e,r,t),o=t[Ln],a=r.parent||t[eo],s=nB(a,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)aP(o,i,n[c],s,!1);else aP(o,i,n,s,!1);sP!==void 0&&sP(o,r,t,n,i)}function Tm(e,t){if(t!==null){let n=t.type;if(n&3)return No(t,e);if(n&4)return RS(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Tm(e,r);{let i=e[t.index];return Fs(i)?RS(-1,i):Ea(i)}}else{if(n&32)return PE(t,e)()||Ea(e[t.index]);{let r=rB(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=U8(e[b2]);return Tm(i,r)}else return Tm(e,t.next)}}}return null}function rB(e,t){if(t!==null){let r=e[b2][eo],i=t.projection;return r.projection[i]}return null}function RS(e,t){let n=S1+e+1;if(n<t.length){let r=t[n],i=r[Ye].firstChild;if(i!==null)return Tm(r,i)}return t[G4]}function M4e(e,t,n){let r=BE(e,t);r&&y4e(e,r,t,n)}function UE(e,t,n,r,i,o,a){for(;n!=null;){let s=r[n.index],c=n.type;if(a&&t===0&&(s&&u3(Ea(s),r),n.flags|=2),(n.flags&32)!==32)if(c&8)UE(e,t,n.child,r,i,o,!1),a6(t,e,i,s,o);else if(c&32){let l=PE(n,r),u;for(;u=l();)a6(t,e,i,u,o);a6(t,e,i,s,o)}else c&16?iB(e,t,r,n,i,o):a6(t,e,i,s,o);n=a?n.projectionNext:n.next}}function b9(e,t,n,r,i,o){UE(n,r,e.firstChild,t,i,o,!1)}function w4e(e,t,n){let r=t[Ln],i=eB(e,n,t),o=n.parent||t[eo],a=nB(o,n,t);iB(r,0,t,n,i,a)}function iB(e,t,n,r,i,o){let a=n[b2],c=a[eo].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];a6(t,e,i,u,o)}else{let l=c,u=a[Wr];n$(r)&&(l.flags|=128),UE(e,t,l,u,i,o,!0)}}function S4e(e,t,n,r,i){let o=n[G4],a=Ea(n);o!==a&&a6(t,e,r,o,i);for(let s=S1;s<n.length;s++){let c=n[s];b9(c[Ye],c,e,t,r,o)}}function E4e(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Ts.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ts.Important),e.setStyle(n,r,i,o))}}function D4e(e,t,n){e.setAttribute(t,"style",n)}function oB(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function aB(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&mS(e,t,r),i!==null&&oB(e,t,i),o!==null&&D4e(e,t,o)}var Na={};function R(e=1){sB(Zn(),it(),nl()+e,!1)}function sB(e,t,n,r){if(!r)if((t[Pe]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Nm(t,o,n)}else{let o=e.preOrderHooks;o!==null&&_m(t,o,0,n)}W4(n)}function q(e,t=rt.Default){let n=it();if(n===null)return ve(e,t);let r=gi();return V$(r,n,ji(e),t)}function cB(){let e="invalid";throw new Error(e)}function lB(e,t,n,r,i,o){let a=qr(null);try{let s=null;i&Gr.SignalBased&&(s=t[r][Nw]),s!==null&&s.transformFn!==void 0&&(o=s.transformFn(o)),i&Gr.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(t,o)),e.setInput!==null?e.setInput(t,s,o,n,r):C$(t,s,r,o)}finally{qr(a)}}function z4e(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)W4(~i);else{let o=i,a=n[++r],s=n[++r];Cce(a,o);let c=t[o];s(2,c)}}}finally{W4(-1)}}function M9(e,t,n,r,i,o,a,s,c,l,u){let f=t.blueprint.slice();return f[Is]=i,f[Pe]=r|4|128|8|64,(l!==null||e&&e[Pe]&2048)&&(f[Pe]|=2048),BP(f),f[Wr]=f[y6]=e,f[Vo]=n,f[Ns]=a||e&&e[Ns],f[Ln]=s||e&&e[Ln],f[f6]=c||e&&e[f6]||null,f[eo]=o,f[o9]=n4e(),f[O8]=u,f[RP]=l,f[b2]=t.type==2?e[b2]:f,f}function b6(e,t,n,r,i){let o=e.data[t];if(o===null)o=H4e(e,t,n,r,i),xce()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let a=mce();o.injectorIndex=a===null?-1:a.injectorIndex}return tl(o,!0),o}function H4e(e,t,n,r,i){let o=GP(),a=ME(),s=a?o:o&&o.parent,c=e.data[t]=k4e(e,s,n,t,r,i);return e.firstChild===null&&(e.firstChild=c),o!==null&&(a?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function uB(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function fB(e,t,n,r,i){let o=nl(),a=r&2;try{W4(-1),a&&t.length>Gi&&sB(e,t,Gi,!1),Ma(a?2:0,i),n(r,i)}finally{W4(o),Ma(a?3:1,i)}}function jE(e,t,n){if(yE(t)){let r=qr(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let a=i;a<o;a++){let s=e.data[a];if(s.contentQueries){let c=n[a];s.contentQueries(1,c,a)}}}finally{qr(r)}}}function qE(e,t,n){jP()&&(P4e(e,t,n,No(n,t)),(n.flags&64)===64&&hB(e,t,n))}function GE(e,t,n=No){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],s=a===-1?n(t,e):e[a];e[i++]=s}}}function dB(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=WE(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function WE(e,t,n,r,i,o,a,s,c,l,u){let f=Gi+r,d=f+i,p=L4e(f,d),h=typeof l=="function"?l():l;return p[Ye]={type:e,blueprint:p,template:n,queries:null,viewQuery:s,declTNode:t,data:p.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:c,consts:h,incompleteFirstPass:!1,ssrId:u}}function L4e(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Na);return n}function A4e(e,t,n,r){let o=r.get(N3e,I$)||n===Sa.ShadowDom,a=e.selectRootElement(t,o);return V4e(a),a}function V4e(e){N4e(e)}var N4e=()=>null;function _4e(e,t,n,r){let i=vB(t);i.push(n),e.firstCreatePass&&yB(e).push(r,i.length-1)}function k4e(e,t,n,r,i,o){let a=t?t.injectorIndex:-1,s=0;return qP()&&(s|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function cP(e,t,n,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let a=t[o];if(a===void 0)continue;r??={};let s,c=Gr.None;Array.isArray(a)?(s=a[0],c=a[1]):s=a;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}e===0?lP(r,n,l,s,c):lP(r,n,l,s)}return r}function lP(e,t,n,r,i){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,r):o=e[n]=[t,r],i!==void 0&&o.push(i)}function T4e(e,t,n){let r=t.directiveStart,i=t.directiveEnd,o=e.data,a=t.attrs,s=[],c=null,l=null;for(let u=r;u<i;u++){let f=o[u],d=n?n.get(f):null,p=d?d.inputs:null,h=d?d.outputs:null;c=cP(0,f.inputs,u,c,p),l=cP(1,f.outputs,u,l,h);let m=c!==null&&a!==null&&!AP(t)?K4e(c,u,a):null;s.push(m)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=s,t.inputs=c,t.outputs=l}function I4e(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function YE(e,t,n,r,i,o,a,s){let c=No(t,n),l=t.inputs,u;!s&&l!=null&&(u=l[r])?(QE(e,n,u,r,i),a9(t)&&F4e(n,t.index)):t.type&3?(r=I4e(r),i=a!=null?a(i,t.value||"",r):i,o.setProperty(c,r,i)):t.type&12}function F4e(e,t){let n=d3(t,e);n[Pe]&16||(n[Pe]|=64)}function XE(e,t,n,r){if(jP()){let i=r===null?null:{"":-1},o=B4e(e,n),a,s;o===null?a=s=null:[a,s]=o,a!==null&&pB(e,t,n,a,i,s),i&&U4e(n,r,i)}n.mergedAttrs=R8(n.mergedAttrs,n.attrs)}function pB(e,t,n,r,i,o){for(let l=0;l<r.length;l++)HS(qm(n,t),e,r[l].type);q4e(n,e.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let a=!1,s=!1,c=uB(e,t,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=R8(n.mergedAttrs,u.hostAttrs),G4e(e,n,t,c,u),j4e(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let f=u.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),a=!0),!s&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),s=!0),c++}T4e(e,n,o)}function R4e(e,t,n,r,i){let o=i.hostBindings;if(o){let a=e.hostBindingOpCodes;a===null&&(a=e.hostBindingOpCodes=[]);let s=~t.index;O4e(a)!=s&&a.push(s),a.push(n,r,o)}}function O4e(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function P4e(e,t,n,r){let i=n.directiveStart,o=n.directiveEnd;a9(n)&&W4e(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||qm(n,t),u3(r,t);let a=n.initialInputs;for(let s=i;s<o;s++){let c=e.data[s],l=K4(t,e,s,n);if(u3(l,t),a!==null&&Q4e(t,s-i,l,c,n,a),l3(c)){let u=d3(n.index,t);u[Vo]=K4(t,e,s,n)}}}function hB(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,a=bce();try{W4(o);for(let s=r;s<i;s++){let c=e.data[s],l=t[s];vS(s),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&$4e(c,l)}}finally{W4(-1),vS(a)}}function $4e(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function B4e(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let a=n[o];if(VP(t,a.selectors,!1))if(r||(r=[]),l3(a))if(a.findHostDirectiveDefs!==null){let s=[];i=i||new Map,a.findHostDirectiveDefs(a,s,i),r.unshift(...s,a);let c=s.length;OS(e,t,c)}else r.unshift(a),OS(e,t,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return r===null?null:[r,i]}function OS(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function U4e(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new Ce(-301,!1);r.push(t[i],o)}}}function j4e(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;l3(t)&&(n[""]=e)}}function q4e(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function G4e(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=X4(i.type,!0)),a=new Q4(o,l3(i),q);e.blueprint[r]=a,n[r]=a,R4e(e,t,r,uB(e,n,i.hostVars,Na),i)}function W4e(e,t,n){let r=No(t,e),i=dB(n),o=e[Ns].rendererFactory,a=16;n.signals?a=4096:n.onPush&&(a=64);let s=w9(e,M9(e,i,null,a,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=s}function Y4e(e,t,n,r,i,o){let a=No(e,t);X4e(t[Ln],a,o,e.value,n,r,i)}function X4e(e,t,n,r,i,o,a){if(o==null)e.removeAttribute(t,i,n);else{let s=a==null?Y4(o):a(o,r||"",i);e.setAttribute(t,i,s,n)}}function Q4e(e,t,n,r,i,o){let a=o[t];if(a!==null)for(let s=0;s<a.length;){let c=a[s++],l=a[s++],u=a[s++],f=a[s++];lB(r,n,c,l,u,f)}}function K4e(e,t,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let a=e[o];for(let s=0;s<a.length;s+=3)if(a[s]===t){r.push(o,a[s+1],a[s+2],n[i+1]);break}}i+=2}return r}function mB(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function gB(e,t){let n=e.contentQueries;if(n!==null){let r=qr(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a!==-1){let s=e.data[a];EE(o),s.contentQueries(2,t[a],a)}}}finally{qr(r)}}}function w9(e,t){return e[$8]?e[jO][C2]=t:e[$8]=t,e[jO]=t,t}function PS(e,t,n){EE(0);let r=qr(null);try{t(e,n)}finally{qr(r)}}function vB(e){return e[P8]||(e[P8]=[])}function yB(e){return e.cleanup||(e.cleanup=[])}function xB(e,t){let n=e[f6],r=n?n.get(Da,null):null;r&&r.handleError(t)}function QE(e,t,n,r,i){for(let o=0;o<n.length;){let a=n[o++],s=n[o++],c=n[o++],l=t[a],u=e.data[a];lB(u,l,r,s,c,i)}}function CB(e,t,n){let r=PP(t,e);c4e(e[Ln],r,n)}function Z4e(e,t){let n=d3(t,e),r=n[Ye];J4e(r,n);let i=n[Is];i!==null&&n[O8]===null&&(n[O8]=NE(i,n[f6])),KE(r,n,n[Vo])}function J4e(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function KE(e,t,n){DE(t);try{let r=e.viewQuery;r!==null&&PS(1,r,n);let i=e.template;i!==null&&fB(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[_s]?.finishViewCreation(e),e.staticContentQueries&&gB(e,t),e.staticViewQueries&&PS(2,e.viewQuery,n);let o=e.components;o!==null&&ele(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[Pe]&=-5,zE()}}function ele(e,t){for(let n=0;n<t.length;n++)Z4e(e,t[n])}function bB(e,t,n,r){let i=t.tView,a=e[Pe]&4096?4096:16,s=M9(e,i,n,a,null,t,null,null,null,r?.injector??null,r?.dehydratedView??null),c=e[t.index];s[Q8]=c;let l=e[_s];return l!==null&&(s[_s]=l.createEmbeddedView(i)),KE(i,s,n),s}function tle(e,t){let n=S1+t;if(n<e.length)return e[n]}function $S(e,t){return!t||t.firstChild===null||n$(e)}function MB(e,t,n,r=!0){let i=t[Ye];if(p4e(i,t,e,n),r){let a=RS(n,e),s=t[Ln],c=BE(s,e[G4]);c!==null&&f4e(i,e[eo],s,t,c,a)}let o=t[O8];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function nle(e,t){let n=Gm(e,t);return n!==void 0&&$E(n[Ye],n),n}function Ym(e,t,n,r,i=!1){for(;n!==null;){let o=t[n.index];o!==null&&r.push(Ea(o)),Fs(o)&&rle(o,r);let a=n.type;if(a&8)Ym(e,t,n.child,r);else if(a&32){let s=PE(n,t),c;for(;c=s();)r.push(c)}else if(a&16){let s=rB(t,n);if(Array.isArray(s))r.push(...s);else{let c=U8(t[b2]);Ym(c[Ye],c,s,r,!0)}}n=i?n.projectionNext:n.next}return r}function rle(e,t){for(let n=S1;n<e.length;n++){let r=e[n],i=r[Ye].firstChild;i!==null&&Ym(r[Ye],r,i,t)}e[G4]!==e[Is]&&t.push(e[G4])}var wB=[];function ile(e){return e[q4]??ole(e)}function ole(e){let t=wB.pop()??Object.create(sle);return t.lView=e,t}function ale(e){e.lView[q4]!==e&&(e.lView=null,wB.push(e))}var sle=k(x({},lO),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{B8(e.lView)},consumerOnSignalRead(){this.lView[q4]=this}});function SB(e){return DB(e[$8])}function EB(e){return DB(e[C2])}function DB(e){for(;e!==null&&!Fs(e);)e=e[C2];return e}var zB=100;function HB(e,t=!0,n=0){let r=e[Ns],i=r.rendererFactory,o=!1;o||i.begin?.();try{cle(e,n)}catch(a){throw t&&xB(e,a),a}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function cle(e,t){BS(e,t);let n=0;for(;bE(e);){if(n===zB)throw new Ce(103,!1);n++,BS(e,1)}}function lle(e,t,n,r){let i=t[Pe];if((i&256)===256)return;let o=!1;!o&&t[Ns].inlineEffectRunner?.flush(),DE(t);let a=null,s=null;!o&&ule(e)&&(s=ile(t),a=uO(s));try{BP(t),yce(e.bindingStartIndex),n!==null&&fB(e,t,n,2,r);let c=(i&3)===3;if(!o)if(c){let f=e.preOrderCheckHooks;f!==null&&Nm(t,f,null)}else{let f=e.preOrderHooks;f!==null&&_m(t,f,0,null),nS(t,0)}if(fle(t),LB(t,0),e.contentQueries!==null&&gB(e,t),!o)if(c){let f=e.contentCheckHooks;f!==null&&Nm(t,f)}else{let f=e.contentHooks;f!==null&&_m(t,f,1),nS(t,1)}z4e(e,t);let l=e.components;l!==null&&VB(t,l,0);let u=e.viewQuery;if(u!==null&&PS(2,u,r),!o)if(c){let f=e.viewCheckHooks;f!==null&&Nm(t,f)}else{let f=e.viewHooks;f!==null&&_m(t,f,2),nS(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Jw]){for(let f of t[Jw])f();t[Jw]=null}o||(t[Pe]&=-73)}catch(c){throw B8(t),c}finally{s!==null&&(fO(s,a),ale(s)),zE()}}function ule(e){return e.type!==2}function LB(e,t){for(let n=SB(e);n!==null;n=EB(n))for(let r=S1;r<n.length;r++){let i=n[r];AB(i,t)}}function fle(e){for(let t=SB(e);t!==null;t=EB(t)){if(!(t[Pe]&vE.HasTransplantedViews))continue;let n=t[d6];for(let r=0;r<n.length;r++){let i=n[r],o=i[Wr];sce(i)}}}function dle(e,t,n){let r=d3(t,e);AB(r,n)}function AB(e,t){CE(e)&&BS(e,t)}function BS(e,t){let r=e[Ye],i=e[Pe],o=e[q4],a=!!(t===0&&i&16);if(a||=!!(i&64&&t===0),a||=!!(i&1024),a||=!!(o?.dirty&&_w(o)),o&&(o.dirty=!1),e[Pe]&=-9217,a)lle(r,e,r.template,e[Vo]);else if(i&8192){LB(e,1);let s=r.components;s!==null&&VB(e,s,1)}}function VB(e,t,n){for(let r=0;r<t.length;r++)dle(e,t[r],n)}function ZE(e){for(e[Ns].changeDetectionScheduler?.notify();e;){e[Pe]|=64;let t=U8(e);if(ece(e)&&!t)return e;e=t}return null}var Z4=class{get rootNodes(){let t=this._lView,n=t[Ye];return Ym(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vo]}set context(t){this._lView[Vo]=t}get destroyed(){return(this._lView[Pe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Wr];if(Fs(t)){let n=t[Rm],r=n?n.indexOf(this):-1;r>-1&&(Gm(t,r),Om(n,r))}this._attachedToViewContainer=!1}$E(this._lView[Ye],this._lView)}onDestroy(t){UP(this._lView,t)}markForCheck(){ZE(this._cdRefInjectingView||this._lView)}detach(){this._lView[Pe]&=-129}reattach(){gS(this._lView),this._lView[Pe]|=128}detectChanges(){this._lView[Pe]|=1024,HB(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Z$(this._lView[Ye],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Ce(902,!1);this._appRef=t,gS(this._lView)}},J4=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=mle;let e=t;return e})(),ple=J4,hle=class extends ple{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=bB(this._declarationLView,this._declarationTContainer,t,{injector:n,dehydratedView:r});return new Z4(i)}};function mle(){return S9(gi(),it())}function S9(e,t){return e.type&4?new hle(t,e,C6(e,t)):null}var EGe=new RegExp(`^(\\d+)*(${Kce}|${Qce})*(.*)`);var gle=()=>null;function US(e,t){return gle(e,t)}var jS=class{},qS=class{},Xm=class{};function vle(e){let t=Error(`No component factory found for ${qi(e)}.`);return t[yle]=e,t}var yle="ngComponent";var GS=class{resolveComponentFactory(t){throw vle(t)}},E9=(()=>{let t=class t{};t.NULL=new GS;let e=t;return e})(),G8=class{},to=(()=>{let t=class t{constructor(){this.destroyNode=null}};t.__NG_ELEMENT_ID__=()=>xle();let e=t;return e})();function xle(){let e=it(),t=gi(),n=d3(t.index,e);return(U4(n)?n:e)[Ln]}var Cle=(()=>{let t=class t{};t.\u0275prov=ue({token:t,providedIn:"root",factory:()=>null});let e=t;return e})(),aS={};function ble(e){return typeof e=="function"&&e[Nw]!==void 0}var uP=new Set;function J8(e){uP.has(e)||(uP.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function NB(e){return ble(e)&&typeof e.set=="function"}function JE(e){let t=qr(null);try{return e()}finally{qr(t)}}function _B(e){return wle(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function Mle(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function wle(e){return e!==null&&(typeof e=="function"||typeof e=="object")}var WS=class{constructor(){}supports(t){return _B(t)}create(t){return new YS(t)}},Sle=(e,t)=>t,YS=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Sle}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let a=!r||n&&n.currentIndex<fP(r,i,o)?n:r,s=fP(a,i,o),c=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(n=n._next,a.previousIndex==null)i++;else{o||(o=[]);let l=s-i,u=c-i;if(l!=u){for(let d=0;d<l;d++){let p=d<o.length?o[d]:o[d]=0,h=p+d;u<=h&&h<l&&(o[d]=p+1)}let f=a.previousIndex;o[f]=u-l}}s!==c&&t(a,s,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!_B(t))throw new Ce(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,a;if(Array.isArray(t)){this.length=t.length;for(let s=0;s<this.length;s++)o=t[s],a=this._trackByFn(s,o),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,o,a,s),r=!0):(r&&(n=this._verifyReinsertion(n,o,a,s)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,Mle(t,s=>{a=this._trackByFn(i,s),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,s,a,i),r=!0):(r&&(n=this._verifyReinsertion(n,s,a,i)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new XS(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Qm),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Qm),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},XS=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},QS=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Qm=class{constructor(){this.map=new Map}put(t){let n=t.trackById,r=this.map.get(n);r||(r=new QS,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function fP(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function dP(){return new eD([new WS])}var eD=(()=>{let t=class t{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new t(r)}static extend(r){return{provide:t,useFactory:i=>t.create(r,i||dP()),deps:[[t,new _E,new h9]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new Ce(901,!1)}};t.\u0275prov=ue({token:t,providedIn:"root",factory:dP});let e=t;return e})();var Ps=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=Ele;let e=t;return e})();function Ele(e){return Dle(gi(),it(),(e&16)===16)}function Dle(e,t,n){if(a9(e)&&!n){let r=d3(e.index,t);return new Z4(r,r)}else if(e.type&47){let r=t[b2];return new Z4(r,t)}return null}var kB=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=zle,t.__NG_ENV_ID__=r=>r;let e=t;return e})(),KS=class extends kB{constructor(t){super(),this._lView=t}onDestroy(t){return UP(this._lView,t),()=>lce(this._lView,t)}};function zle(){return new KS(it())}function pP(...e){}function Hle(){let e=typeof Un.requestAnimationFrame=="function",t=Un[e?"requestAnimationFrame":"setTimeout"],n=Un[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}var Yt=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Wt(!1),this.onMicrotaskEmpty=new Wt(!1),this.onStable=new Wt(!1),this.onError=new Wt(!1),typeof Zone>"u")throw new Ce(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=Hle().nativeRequestAnimationFrame,Vle(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new Ce(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new Ce(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,t,Lle,pP,pP);try{return o.runTask(a,n,r)}finally{o.cancelTask(a)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},Lle={};function tD(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Ale(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Un,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,ZS(e),e.isCheckStableRunning=!0,tD(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),ZS(e))}function Vle(e){let t=()=>{Ale(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,a,s)=>{if(Nle(s))return n.invokeTask(i,o,a,s);try{return hP(e),n.invokeTask(i,o,a,s)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),mP(e)}},onInvoke:(n,r,i,o,a,s,c)=>{try{return hP(e),n.invoke(i,o,a,s,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),mP(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,ZS(e),tD(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function ZS(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function hP(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function mP(e){e._nesting--,tD(e)}var JS=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wt,this.onMicrotaskEmpty=new Wt,this.onStable=new Wt,this.onError=new Wt}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function Nle(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}function _le(e="zone.js",t){return e==="noop"?new JS:e==="zone.js"?new Yt(t):e}var s6=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(s6||{}),kle={destroy(){}};function nD(e,t){!t&&f3e(nD);let n=t?.injector??ce(M2);if(!o4e(n))return kle;J8("NgAfterNextRender");let r=n.get(rD),i=r.handler??=new tE,o=t?.phase??s6.MixedReadWrite,a=()=>{i.unregister(c),s()},s=n.get(kB).onDestroy(a),c=new eE(n,o,()=>{a(),e()});return i.register(c),{destroy:a}}var eE=class{constructor(t,n,r){this.phase=n,this.callbackFn=r,this.zone=t.get(Yt),this.errorHandler=t.get(Da,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(t){this.errorHandler?.handleError(t)}}},tE=class{constructor(){this.executingCallbacks=!1,this.buckets={[s6.EarlyRead]:new Set,[s6.Write]:new Set,[s6.MixedReadWrite]:new Set,[s6.Read]:new Set},this.deferredCallbacks=new Set}register(t){(this.executingCallbacks?this.deferredCallbacks:this.buckets[t.phase]).add(t)}unregister(t){this.buckets[t.phase].delete(t),this.deferredCallbacks.delete(t)}execute(){this.executingCallbacks=!0;for(let t of Object.values(this.buckets))for(let n of t)n.invoke();this.executingCallbacks=!1;for(let t of this.deferredCallbacks)this.buckets[t.phase].add(t);this.deferredCallbacks.clear()}destroy(){for(let t of Object.values(this.buckets))t.clear();this.deferredCallbacks.clear()}},rD=(()=>{let t=class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=ue({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();function Km(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let a=0;a<t.length;a++){let s=t[a];if(typeof s=="number")o=s;else if(o==1)i=RO(i,s);else if(o==2){let c=s,l=t[++a];r=RO(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Zm=class extends E9{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=c3(t);return new g6(n,this.ngModule)}};function gP(e){let t=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let r=e[n];r!==void 0&&t.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return t}function Tle(e){let t=e.toLowerCase();return t==="svg"?tce:t==="math"?nce:null}var nE=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=p9(r);let i=this.injector.get(t,aS,r);return i!==aS||n===aS?i:this.parentInjector.get(t,n,r)}},g6=class extends Xm{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=gP(t.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return gP(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=Xse(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){i=i||this.ngModule;let o=i instanceof Wi?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new nE(t,o):t,s=a.get(G8,null);if(s===null)throw new Ce(407,!1);let c=a.get(Cle,null),l=a.get(rD,null),u=a.get(jS,null),f={rendererFactory:s,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:u},d=s.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",h=r?A4e(d,r,this.componentDef.encapsulation,a):K$(d,p,Tle(p)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let g=null;h!==null&&(g=NE(h,a,!0));let v=WE(0,null,null,1,0,null,null,null,null,null,null),y=M9(null,v,null,m,null,null,f,d,a,null,g);DE(y);let C,b;try{let M=this.componentDef,S,w=null;M.findHostDirectiveDefs?(S=[],w=new Map,M.findHostDirectiveDefs(M,S,w),S.push(M)):S=[M];let E=Ile(y,h),D=Fle(E,h,M,S,y,f,d);b=xE(v,Gi),h&&Ple(d,M,h,r),n!==void 0&&$le(b,this.ngContentSelectors,n),C=Ole(D,M,S,w,y,[Ble]),KE(v,y,null)}finally{zE()}return new rE(this.componentType,C,C6(b,y),y,b)}},rE=class extends qS{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Z4(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;QE(o[Ye],o,i,t,n),this.previousInputValues.set(t,n);let a=d3(this._tNode.index,o);ZE(a)}}get injector(){return new j4(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Ile(e,t){let n=e[Ye],r=Gi;return e[r]=t,b6(n,r,2,"#host",null)}function Fle(e,t,n,r,i,o,a){let s=i[Ye];Rle(r,e,t,a);let c=null;t!==null&&(c=NE(t,i[f6]));let l=o.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let f=M9(i,dB(n),null,u,i[e.index],e,o,l,null,null,c);return s.firstCreatePass&&OS(s,e,r.length-1),w9(i,f),i[e.index]=f}function Rle(e,t,n,r){for(let i of e)t.mergedAttrs=R8(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(Km(t,t.mergedAttrs,!0),n!==null&&aB(r,n,t))}function Ole(e,t,n,r,i,o){let a=gi(),s=i[Ye],c=No(a,i);pB(s,i,a,n,null,r);for(let u=0;u<n.length;u++){let f=a.directiveStart+u,d=K4(i,s,f,a);u3(d,i)}hB(s,i,a),c&&u3(c,i);let l=K4(i,s,a.directiveStart+a.componentOffset,a);if(e[Vo]=i[Vo]=l,o!==null)for(let u of o)u(l,t);return jE(s,a,i),l}function Ple(e,t,n,r){if(r)mS(e,n,["ng-version","17.2.3"]);else{let{attrs:i,classes:o}=Qse(t.selectors[0]);i&&mS(e,n,i),o&&o.length>0&&oB(e,n,o.join(" "))}}function $le(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function Ble(){let e=gi();v9(it()[Ye],e)}var p3=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=Ule;let e=t;return e})();function Ule(){let e=gi();return IB(e,it())}var jle=p3,TB=class extends jle{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return C6(this._hostTNode,this._hostLView)}get injector(){return new j4(this._hostTNode,this._hostLView)}get parentInjector(){let t=IE(this._hostTNode,this._hostLView);if(E$(t)){let n=Um(t,this._hostLView),r=Bm(t),i=n[Ye].data[r+8];return new j4(i,n)}else return new j4(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=vP(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-S1}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=US(this._lContainer,t.ssrId),s=t.createEmbeddedViewImpl(n||{},o,a);return this.insertImpl(s,i,$S(this._hostTNode,a)),s}createComponent(t,n,r,i,o){let a=t&&!p3e(t),s;if(a)s=n;else{let h=n||{};s=h.index,r=h.injector,i=h.projectableNodes,o=h.environmentInjector||h.ngModuleRef}let c=a?t:new g6(c3(t)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let m=(a?l:this.parentInjector).get(Wi,null);m&&(o=m)}let u=c3(c.componentType??{}),f=US(this._lContainer,u?.id??null),d=f?.firstChild??null,p=c.create(l,i,d,o);return this.insertImpl(p.hostView,s,$S(this._hostTNode,f)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(ace(i)){let s=this.indexOf(t);if(s!==-1)this.detach(s);else{let c=i[Wr],l=new TB(c,c[eo],c[Wr]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),a=this._lContainer;return MB(a,i,o,r),t.attachToViewContainerRef(),t$(sS(a),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=vP(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Gm(this._lContainer,n);r&&(Om(sS(this._lContainer),n),$E(r[Ye],r))}detach(t){let n=this._adjustIndex(t,-1),r=Gm(this._lContainer,n);return r&&Om(sS(this._lContainer),n)!=null?new Z4(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function vP(e){return e[Rm]}function sS(e){return e[Rm]||(e[Rm]=[])}function IB(e,t){let n,r=t[e.index];return Fs(r)?n=r:(n=mB(r,t,null,e),t[e.index]=n,w9(t,n)),Gle(n,t,e,r),new TB(n,e,t)}function qle(e,t){let n=e[Ln],r=n.createComment(""),i=No(t,e),o=BE(n,i);return Wm(n,o,r,x4e(n,i),!1),r}var Gle=Xle,Wle=()=>!1;function Yle(e,t,n){return Wle(e,t,n)}function Xle(e,t,n,r){if(e[G4])return;let i;n.type&8?i=Ea(r):i=qle(t,n),e[G4]=i}var iE=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},oE=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let a=n.getByIndex(o),s=this.queries[a.indexInDeclarationView];i.push(s.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)iD(t,n).matches!==null&&this.queries[n].setDirty()}},aE=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=r0e(t):this.predicate=t}},sE=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},cE=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,n,Qle(n,o)),this.matchTNodeWithReadOption(t,n,km(n,t,o,!1,!1))}else r===J4?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,km(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Yr||i===p3||i===J4&&n.type&4)this.addMatch(n.index,-2);else{let o=km(n,t,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function Qle(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function Kle(e,t){return e.type&11?C6(e,t):e.type&4?S9(e,t):null}function Zle(e,t,n,r){return n===-1?Kle(t,e):n===-2?Jle(e,t,r):K4(e,e[Ye],n,t)}function Jle(e,t,n){if(n===Yr)return C6(t,e);if(n===J4)return S9(t,e);if(n===p3)return IB(t,e)}function FB(e,t,n,r){let i=t[_s].queries[r];if(i.matches===null){let o=e.data,a=n.matches,s=[];for(let c=0;a!==null&&c<a.length;c+=2){let l=a[c];if(l<0)s.push(null);else{let u=o[l];s.push(Zle(t,u,a[c+1],n.metadata.read))}}i.matches=s}return i.matches}function lE(e,t,n,r){let i=e.queries.getByIndex(n),o=i.matches;if(o!==null){let a=FB(e,t,i,n);for(let s=0;s<o.length;s+=2){let c=o[s];if(c>0)r.push(a[s/2]);else{let l=o[s+1],u=t[-c];for(let f=S1;f<u.length;f++){let d=u[f];d[Q8]===d[Wr]&&lE(d[Ye],d,l,r)}if(u[d6]!==null){let f=u[d6];for(let d=0;d<f.length;d++){let p=f[d];lE(p[Ye],p,l,r)}}}}}return r}function e0e(e,t){return e[_s].queries[t].queryList}function t0e(e,t,n){let r=new yS((n&4)===4);return _4e(e,t,r,r.destroy),(t[_s]??=new oE).queries.push(new iE(r))-1}function n0e(e,t,n,r){let i=Zn();if(i.firstCreatePass){let o=gi();i0e(i,new aE(t,n,r),o.index),o0e(i,e),(n&2)===2&&(i.staticContentQueries=!0)}return t0e(i,it(),n)}function r0e(e){return e.split(",").map(t=>t.trim())}function i0e(e,t,n){e.queries===null&&(e.queries=new sE),e.queries.track(new cE(t,n))}function o0e(e,t){let n=e.contentQueries||(e.contentQueries=[]),r=n.length?n[n.length-1]:-1;t!==r&&n.push(e.queries.length-1,t)}function iD(e,t){return e.queries.getByIndex(t)}function a0e(e,t){let n=e[Ye],r=iD(n,t);return r.crossesNgTemplate?lE(n,e,t,[]):FB(n,e,r,t)}function s0e(e){let t=[],n=new Map;function r(i){let o=n.get(i);if(!o){let a=e(i);n.set(i,o=a.then(f0e))}return o}return Jm.forEach((i,o)=>{let a=[];i.templateUrl&&a.push(r(i.templateUrl).then(l=>{i.template=l}));let s=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=s,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,u=i.styleUrls;i.styleUrls.forEach((f,d)=>{s.push(""),a.push(r(f).then(p=>{s[l+d]=p,u.splice(u.indexOf(f),1),u.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&a.push(r(i.styleUrl).then(l=>{s.push(l),i.styleUrl=void 0}));let c=Promise.all(a).then(()=>d0e(o));t.push(c)}),l0e(),Promise.all(t).then(()=>{})}var Jm=new Map,c0e=new Set;function l0e(){let e=Jm;return Jm=new Map,e}function u0e(){return Jm.size===0}function f0e(e){return typeof e=="string"?e:e.text()}function d0e(e){c0e.delete(e)}function p0e(e){return Object.getPrototypeOf(e.prototype).constructor}function no(e){let t=p0e(e.type),n=!0,r=[e];for(;t;){let i;if(l3(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Ce(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let a=e;a.inputs=Hm(e.inputs),a.inputTransforms=Hm(e.inputTransforms),a.declaredInputs=Hm(e.declaredInputs),a.outputs=Hm(e.outputs);let s=i.hostBindings;s&&y0e(e,s);let c=i.viewQuery,l=i.contentQueries;if(c&&g0e(e,c),l&&v0e(e,l),h0e(e,i),kse(e.outputs,i.outputs),l3(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let a=0;a<o.length;a++){let s=o[a];s&&s.ngInherit&&s(e),s===no&&(n=!1)}}t=Object.getPrototypeOf(t)}m0e(r)}function h0e(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=t.inputTransforms[i]}}}function m0e(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=R8(i.hostAttrs,n=R8(n,i.hostAttrs))}}function Hm(e){return e===u6?{}:e===Ao?[]:e}function g0e(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function v0e(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function y0e(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function oD(e){let t=e.inputConfig,n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}e.inputTransforms=n}var f3=class{},W8=class{};var e9=class extends f3{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Zm(this);let i=TP(t);this._bootstrapComponents=Q$(i.bootstrap),this._r3Injector=k$(t,n,[{provide:f3,useValue:this},{provide:E9,useValue:this.componentFactoryResolver},...r],qi(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},t9=class extends W8{constructor(t){super(),this.moduleType=t}create(t){return new e9(this.moduleType,t,[])}};function x0e(e,t,n){return new e9(e,t,n)}var uE=class extends f3{constructor(t){super(),this.componentFactoryResolver=new Zm(this),this.instance=null;let n=new q8([...t.providers,{provide:f3,useValue:this},{provide:E9,useValue:this.componentFactoryResolver}],t.parent||TE(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function D9(e,t,n=null){return new uE({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var rl=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Bn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function RB(e,t,n){return e[t]=n}function C0e(e,t){return e[t]}function za(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function b0e(e,t,n,r){let i=za(e,t,n);return za(e,t+1,r)||i}function M0e(e,t,n,r,i,o,a,s,c){let l=t.consts,u=b6(t,e,4,a||null,p6(l,s));XE(t,n,u,p6(l,c)),v9(t,u);let f=u.tView=WE(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,u),f.queries=t.queries.embeddedTView(u)),u}function St(e,t,n,r,i,o,a,s){let c=it(),l=Zn(),u=e+Gi,f=l.firstCreatePass?M0e(u,l,c,t,n,r,i,o,a):l.data[u];tl(f,!1);let d=w0e(l,c,f,e);l9()&&C9(l,c,d,f),u3(d,c);let p=mB(d,c,d,f);return c[u]=p,w9(c,p),Yle(p,f,c),s9(f)&&qE(l,c,f),a!=null&&GE(c,f,s),St}var w0e=S0e;function S0e(e,t,n,r){return u9(!0),t[Ln].createComment("")}function M6(e,t,n,r){let i=it(),o=x6();if(za(i,o,t)){let a=Zn(),s=c9();Y4e(s,i,e,t,n,r)}return M6}function E0e(e,t,n,r){return za(e,x6(),n)?t+Y4(n)+r:Na}function D0e(e,t,n,r,i,o){let a=vce(),s=b0e(e,a,n,i);return WP(2),s?t+Y4(n)+r+Y4(i)+o:Na}function Lm(e,t){return e<<17|t<<2}function el(e){return e>>17&32767}function z0e(e){return(e&2)==2}function H0e(e,t){return e&131071|t<<17}function fE(e){return e|2}function v6(e){return(e&131068)>>2}function cS(e,t){return e&-131069|t<<2}function L0e(e){return(e&1)===1}function dE(e){return e|1}function A0e(e,t,n,r,i,o){let a=o?t.classBindings:t.styleBindings,s=el(a),c=v6(a);e[r]=n;let l=!1,u;if(Array.isArray(n)){let f=n;u=f[1],(u===null||K8(f,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let d=el(e[s+1]);e[r+1]=Lm(d,s),d!==0&&(e[d+1]=cS(e[d+1],r)),e[s+1]=H0e(e[s+1],r)}else e[r+1]=Lm(s,0),s!==0&&(e[s+1]=cS(e[s+1],r)),s=r;else e[r+1]=Lm(c,0),s===0?s=r:e[c+1]=cS(e[c+1],r),c=r;l&&(e[r+1]=fE(e[r+1])),yP(e,u,r,!0),yP(e,u,r,!1),V0e(t,u,e,r,o),a=Lm(s,c),o?t.classBindings=a:t.styleBindings=a}function V0e(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&K8(o,t)>=0&&(n[r+1]=dE(n[r+1]))}function yP(e,t,n,r){let i=e[n+1],o=t===null,a=r?el(i):v6(i),s=!1;for(;a!==0&&(s===!1||o);){let c=e[a],l=e[a+1];N0e(c,t)&&(s=!0,e[a+1]=r?dE(l):fE(l)),a=r?el(l):v6(l)}s&&(e[n+1]=r?fE(i):dE(i))}function N0e(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?K8(e,t)>=0:!1}function he(e,t,n){let r=it(),i=x6();if(za(r,i,t)){let o=Zn(),a=c9();YE(o,a,r,e,t,r[Ln],n,!1)}return he}function xP(e,t,n,r,i){let o=t.inputs,a=i?"class":"style";QE(e,n,o[a],a,r)}function e5(e,t){return _0e(e,t,null,!0),e5}function _0e(e,t,n,r){let i=it(),o=Zn(),a=WP(2);if(o.firstUpdatePass&&T0e(o,e,a,r),t!==Na&&za(i,a,t)){let s=o.data[nl()];P0e(o,s,i,i[Ln],e,i[a+1]=$0e(t,n),r,a)}}function k0e(e,t){return t>=e.expandoStartIndex}function T0e(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[nl()],a=k0e(e,n);B0e(o,r)&&t===null&&!a&&(t=!1),t=I0e(i,o,t,r),A0e(i,o,t,n,a,r)}}function I0e(e,t,n,r){let i=Mce(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=lS(null,e,t,n,r),n=Y8(n,t.attrs,r),o=null);else{let a=t.directiveStylingLast;if(a===-1||e[a]!==i)if(n=lS(i,e,t,n,r),o===null){let c=F0e(e,t,r);c!==void 0&&Array.isArray(c)&&(c=lS(null,e,t,c[1],r),c=Y8(c,t.attrs,r),R0e(e,t,r,c))}else o=O0e(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function F0e(e,t,n){let r=n?t.classBindings:t.styleBindings;if(v6(r)!==0)return e[el(r)]}function R0e(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[el(i)]=r}function O0e(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let a=e[o].hostAttrs;r=Y8(r,a,n)}return Y8(r,t.attrs,n)}function lS(e,t,n,r,i){let o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(s===-1?s=n.directiveStart:s++;s<a&&(o=t[s],r=Y8(r,o.hostAttrs,i),o!==e);)s++;return e!==null&&(n.directiveStylingLast=s),r}function Y8(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];typeof a=="number"?i=a:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Nce(e,a,n?!0:t[++o]))}return e===void 0?null:e}function P0e(e,t,n,r,i,o,a,s){if(!(t.type&3))return;let c=e.data,l=c[s+1],u=L0e(l)?CP(c,t,n,i,v6(l),a):void 0;if(!n9(u)){n9(o)||z0e(l)&&(o=CP(c,null,n,i,s,a));let f=PP(nl(),n);E4e(r,a,f,i,o)}}function CP(e,t,n,r,i,o){let a=t===null,s;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,f=u===null,d=n[i+1];d===Na&&(d=f?Ao:void 0);let p=f?eS(d,r):u===r?d:void 0;if(l&&!n9(p)&&(p=eS(c,r)),n9(p)&&(s=p,a))return s;let h=e[i+1];i=a?el(h):v6(h)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(s=eS(c,r))}return s}function n9(e){return e!==void 0}function $0e(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=qi(w2(e)))),e}function B0e(e,t){return(e.flags&(t?8:16))!==0}function OB(e,t,n){J8("NgControlFlow");let r=it(),i=x6(),o=U0e(r,Gi+e),a=0;if(za(r,i,t)){let s=qr(null);try{if(nle(o,a),t!==-1){let c=j0e(r[Ye],Gi+t),l=US(o,c.tView.ssrId),u=bB(r,c,n,{dehydratedView:l});MB(o,u,a,$S(c,l))}}finally{qr(s)}}else{let s=tle(o,a);s!==void 0&&(s[Vo]=n)}}function U0e(e,t){return e[t]}function j0e(e,t){return xE(e,t)}function q0e(e,t,n,r,i,o){let a=t.consts,s=p6(a,i),c=b6(t,e,2,r,s);return XE(t,n,c,p6(a,o)),c.attrs!==null&&Km(c,c.attrs,!1),c.mergedAttrs!==null&&Km(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function z(e,t,n,r){let i=it(),o=Zn(),a=Gi+e,s=i[Ln],c=o.firstCreatePass?q0e(a,o,i,t,n,r):o.data[a],l=G0e(o,i,c,s,t,e);i[a]=l;let u=s9(c);return tl(c,!0),aB(s,l,c),(c.flags&32)!==32&&l9()&&C9(o,i,l,c),uce()===0&&u3(l,i),fce(),u&&(qE(o,i,c),jE(o,c,i)),r!==null&&GE(i,c),z}function H(){let e=gi();ME()?wE():(e=e.parent,tl(e,!1));let t=e;pce(t)&&hce(),dce();let n=Zn();return n.firstCreatePass&&(v9(n,e),yE(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&C3e(t)&&xP(n,t,it(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&b3e(t)&&xP(n,t,it(),t.stylesWithoutHost,!1),H}function Mn(e,t,n,r){return z(e,t,n,r),H(),Mn}var G0e=(e,t,n,r,i,o)=>(u9(!0),K$(r,i,Ece()));function W0e(e,t,n,r,i){let o=t.consts,a=p6(o,r),s=b6(t,e,8,"ng-container",a);a!==null&&Km(s,a,!0);let c=p6(o,i);return XE(t,n,s,c),t.queries!==null&&t.queries.elementStart(t,s),s}function E1(e,t,n){let r=it(),i=Zn(),o=e+Gi,a=i.firstCreatePass?W0e(o,i,r,t,n):i.data[o];tl(a,!0);let s=Y0e(i,r,a,e);return r[o]=s,l9()&&C9(i,r,s,a),u3(s,r),s9(a)&&(qE(i,r,a),jE(i,a,r)),n!=null&&GE(r,a),E1}function D1(){let e=gi(),t=Zn();return ME()?wE():(e=e.parent,tl(e,!1)),t.firstCreatePass&&(v9(t,e),yE(e)&&t.queries.elementEnd(e)),D1}var Y0e=(e,t,n,r)=>(u9(!0),l4e(t[Ln],""));function ro(){return it()}function aD(e,t,n){let r=it(),i=x6();if(za(r,i,t)){let o=Zn(),a=c9();YE(o,a,r,e,t,r[Ln],n,!0)}return aD}var B4=void 0;function X0e(e){let t=e,n=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var Q0e=["en",[["a","p"],["AM","PM"],B4],[["AM","PM"],B4,B4],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],B4,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],B4,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",B4,"{1} 'at' {0}",B4],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",X0e],uS={};function ko(e){let t=K0e(e),n=bP(t);if(n)return n;let r=t.split("-")[0];if(n=bP(r),n)return n;if(r==="en")return Q0e;throw new Ce(701,!1)}function bP(e){return e in uS||(uS[e]=Un.ng&&Un.ng.common&&Un.ng.common.locales&&Un.ng.common.locales[e]),uS[e]}var jn=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(jn||{});function K0e(e){return e.toLowerCase().replace(/_/g,"-")}var r9="en-US";var Z0e=r9;function J0e(e){typeof e=="string"&&(Z0e=e.toLowerCase().replace(/_/g,"-"))}function Ve(e,t,n,r){let i=it(),o=Zn(),a=gi();return PB(o,i,i[Ln],a,e,t,r),Ve}function e6e(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===n&&i[o+1]===r){let s=t[P8],c=i[o+2];return s.length>c?s[c]:null}typeof a=="string"&&(o+=2)}return null}function PB(e,t,n,r,i,o,a){let s=s9(r),l=e.firstCreatePass&&yB(e),u=t[Vo],f=vB(t),d=!0;if(r.type&3||a){let m=No(r,t),g=a?a(m):m,v=f.length,y=a?b=>a(Ea(b[r.index])):r.index,C=null;if(!a&&s&&(C=e6e(e,t,i,r.index)),C!==null){let b=C.__ngLastListenerFn__||C;b.__ngNextListenerFn__=o,C.__ngLastListenerFn__=o,d=!1}else{o=wP(r,t,u,o,!1);let b=n.listen(g,i,o);f.push(o,b),l&&l.push(i,y,v,v+1)}}else o=wP(r,t,u,o,!1);let p=r.outputs,h;if(d&&p!==null&&(h=p[i])){let m=h.length;if(m)for(let g=0;g<m;g+=2){let v=h[g],y=h[g+1],M=t[v][y].subscribe(o),S=f.length;if(f.push(o,M),l){let w=typeof M=="function"?S+1:-(S+1);l.push(i,r.index,S,w)}}}}function MP(e,t,n,r){try{return Ma(6,t,n),n(r)!==!1}catch(i){return xB(e,i),!1}finally{Ma(7,t,n)}}function wP(e,t,n,r,i){return function o(a){if(a===Function)return r;let s=e.componentOffset>-1?d3(e.index,t):t;ZE(s);let c=MP(t,n,r,a),l=o.__ngNextListenerFn__;for(;l;)c=MP(t,n,l,a)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&a.preventDefault(),c}}function Et(e=1){return Sce(e)}function t6e(e,t){let n=null,r=jse(e);for(let i=0;i<t.length;i++){let o=t[i];if(o==="*"){n=i;continue}if(r===null?VP(e,o,!0):Wse(r,o))return i}return n}function $B(e){let t=it()[b2][eo];if(!t.projection){let n=e?e.length:1,r=t.projection=Ace(n,null),i=r.slice(),o=t.child;for(;o!==null;){let a=e?t6e(o,e):0;a!==null&&(i[a]?i[a].projectionNext=o:r[a]=o,i[a]=o),o=o.next}}}function BB(e,t=0,n){let r=it(),i=Zn(),o=b6(i,Gi+e,16,null,n||null);o.projection===null&&(o.projection=t),wE(),(!r[O8]||qP())&&(o.flags&32)!==32&&w4e(i,r,o)}function UB(e,t,n,r){n0e(e,t,n,r)}function jB(e){let t=it(),n=Zn(),r=YP();EE(r+1);let i=iD(n,r);if(e.dirty&&oce(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=a0e(t,r);e.reset(o,zce),e.notifyOnChanges()}return!0}return!1}function qB(){return e0e(it(),YP())}function n6e(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function il(e){let t=gce();return $P(t,Gi+e)}function T(e,t=""){let n=it(),r=Zn(),i=e+Gi,o=r.firstCreatePass?b6(r,i,1,t,null):r.data[i],a=r6e(r,n,o,t,e);n[i]=a,l9()&&C9(r,n,a,o),tl(o,!1)}var r6e=(e,t,n,r,i)=>(u9(!0),s4e(t[Ln],r));function io(e){return Me("",e,""),io}function Me(e,t,n){let r=it(),i=E0e(r,e,t,n);return i!==Na&&CB(r,nl(),i),Me}function t5(e,t,n,r,i){let o=it(),a=D0e(o,e,t,n,r,i);return a!==Na&&CB(o,nl(),a),t5}function at(e,t,n){NB(t)&&(t=t());let r=it(),i=x6();if(za(r,i,t)){let o=Zn(),a=c9();YE(o,a,r,e,t,r[Ln],n,!1)}return at}function ft(e,t){let n=NB(e);return n&&e.set(t),n}function st(e,t){let n=it(),r=Zn(),i=gi();return PB(r,n,n[Ln],i,e,t),st}function i6e(e,t,n){let r=Zn();if(r.firstCreatePass){let i=l3(e);pE(n,r.data,r.blueprint,i,!0),pE(t,r.data,r.blueprint,i,!1)}}function pE(e,t,n,r,i){if(e=ji(e),Array.isArray(e))for(let o=0;o<e.length;o++)pE(e[o],t,n,r,i);else{let o=Zn(),a=it(),s=gi(),c=m6(e)?e:ji(e.provide),l=x$(e),u=s.providerIndexes&1048575,f=s.directiveStart,d=s.providerIndexes>>20;if(m6(e)||!e.multi){let p=new Q4(l,i,q),h=dS(c,t,i?u:u+d,f);h===-1?(HS(qm(s,a),o,c),fS(o,e,t.length),t.push(c),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),n.push(p),a.push(p)):(n[h]=p,a[h]=p)}else{let p=dS(c,t,u+d,f),h=dS(c,t,u,u+d),m=p>=0&&n[p],g=h>=0&&n[h];if(i&&!g||!i&&!m){HS(qm(s,a),o,c);let v=s6e(i?a6e:o6e,n.length,i,r,l);!i&&g&&(n[h].providerFactory=v),fS(o,e,t.length,0),t.push(c),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),n.push(v),a.push(v)}else{let v=GB(n[i?h:p],l,!i&&r);fS(o,e,p>-1?p:h,v)}!i&&r&&g&&n[h].componentProviders++}}}function fS(e,t,n,r){let i=m6(t),o=i3e(t);if(i||o){let c=(o?ji(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function GB(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function dS(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function o6e(e,t,n,r){return hE(this.multi,[])}function a6e(e,t,n,r){let i=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,s=K4(n,n[Ye],this.providerFactory.index,r);o=s.slice(0,a),hE(i,o);for(let c=a;c<s.length;c++)o.push(s[c])}else o=[],hE(i,o);return o}function hE(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function s6e(e,t,n,r,i){let o=new Q4(e,n,q);return o.multi=[],o.index=t,o.componentProviders=0,GB(o,i,r&&!n),o}function h3(e,t=[]){return n=>{n.providersResolver=(r,i)=>i6e(r,i?i(e):e,t)}}var c6e=(()=>{let t=class t{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=g$(!1,r.type),o=i.length>0?D9([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=ue({token:t,providedIn:"environment",factory:()=>new t(ve(Wi))});let e=t;return e})();function n5(e){J8("NgStandalone"),e.getStandaloneInjector=t=>t.get(c6e).getOrCreateStandaloneInjector(e)}function _a(e,t,n){let r=SE()+e,i=it();return i[r]===Na?RB(i,r,n?t.call(n):t()):C0e(i,r)}function WB(e,t,n,r){return YB(it(),SE(),e,t,n,r)}function l6e(e,t){let n=e[t];return n===Na?void 0:n}function YB(e,t,n,r,i,o){let a=t+n;return za(e,a,i)?RB(e,a+1,o?r.call(o,i):r(i)):l6e(e,a+1)}function vi(e,t){let n=Zn(),r,i=e+Gi;n.firstCreatePass?(r=u6e(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=X4(r.type,!0)),a,s=w1(q);try{let c=jm(!1),l=o();return jm(c),n6e(n,it(),i,l),l}finally{w1(s)}}function u6e(e,t){if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(e===r.name)return r}}function yi(e,t,n){let r=e+Gi,i=it(),o=$P(i,r);return f6e(i,r)?YB(i,SE(),t,o.transform,n,o):o.transform(n)}function f6e(e,t){return e[Ye].data[t].pure}function $s(e,t){return S9(e,t)}var Am=null;function d6e(e){Am!==null&&(e.defaultEncapsulation!==Am.defaultEncapsulation||e.preserveWhitespaces!==Am.preserveWhitespaces)||(Am=e)}var z9=(()=>{let t=class t{log(r){console.log(r)}warn(r){console.warn(r)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();var sD=new ze(""),r5=new ze(""),H9=(()=>{let t=class t{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,cD||(p6e(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==a),r()},i)),this._callbacks.push({doneCb:r,timeoutId:a,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};t.\u0275fac=function(i){return new(i||t)(ve(Yt),ve(L9),ve(r5))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),L9=(()=>{let t=class t{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return cD?.findTestabilityInTree(this,r,i)??null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();function p6e(e){cD=e}var cD;function m3(e){return!!e&&typeof e.then=="function"}function lD(e){return!!e&&typeof e.subscribe=="function"}var A9=new ze(""),XB=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=ce(A9,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let a=o();if(m3(a))r.push(a);else if(lD(a)){let s=new Promise((c,l)=>{a.subscribe({complete:c,error:l})});r.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),V9=new ze("");function h6e(){pO(()=>{throw new Ce(600,!1)})}function m6e(e){return e.isBoundToModule}function g6e(e,t,n){try{let r=n();return m3(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}function QB(e,t){return Array.isArray(t)?t.reduce(QB,e):x(x({},e),t)}var ol=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ce(T$),this.afterRenderEffectManager=ce(rD),this.componentTypes=[],this.components=[],this.isStable=ce(rl).hasPendingTasks.pipe(Ke(r=>!r)),this._injector=ce(Wi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Xm;if(!this._injector.get(XB).done){let p=!o&&kP(r),h=!1;throw new Ce(405,h)}let s;o?s=r:s=this._injector.get(E9).resolveComponentFactory(r),this.componentTypes.push(s.componentType);let c=m6e(s)?void 0:this._injector.get(f3),l=i||s.selector,u=s.create(M2.NULL,[],l,c),f=u.location.nativeElement,d=u.injector.get(sD,null);return d?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),Im(this.components,u),d?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new Ce(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===zB)throw new Ce(103,!1);let o=r===0;for(let{_lView:a,notifyErrorHandler:s}of this._views)!o&&!pS(a)||this.detectChangesInView(a,s,o);if(r++,i.executeInternalCallbacks(),!this._views.some(({_lView:a})=>pS(a))&&(i.execute(),!this._views.some(({_lView:a})=>pS(a))))break}}detectChangesInView(r,i,o){let a;o?(a=0,r[Pe]|=1024):r[Pe]&64?a=0:a=1,HB(r,i,a)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Im(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(V9,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Im(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Ce(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Im(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function pS(e){return bE(e)}var mE=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},N9=(()=>{let t=class t{compileModuleSync(r){return new t9(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=TP(r),a=Q$(o.declarations).reduce((s,c)=>{let l=c3(c);return l&&s.push(new g6(l)),s},[]);return new mE(i,a)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),v6e=new ze("");function y6e(e,t,n){let r=new t9(n);return Promise.resolve(r)}function SP(e){for(let t=e.length-1;t>=0;t--)if(e[t]!==void 0)return e[t]}var x6e=(()=>{let t=class t{constructor(){this.zone=ce(Yt),this.applicationRef=ce(ol)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function C6e(e){return[{provide:Yt,useFactory:e},{provide:h6,multi:!0,useFactory:()=>{let t=ce(x6e,{optional:!0});return()=>t.initialize()}},{provide:h6,multi:!0,useFactory:()=>{let t=ce(w6e);return()=>{t.initialize()}}},{provide:T$,useFactory:b6e}]}function b6e(){let e=ce(Yt),t=ce(Da);return n=>e.runOutsideAngular(()=>t.handleError(n))}function M6e(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var w6e=(()=>{let t=class t{constructor(){this.subscription=new ur,this.initialized=!1,this.zone=ce(Yt),this.pendingTasks=ce(rl)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Yt.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Yt.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function S6e(){return typeof $localize<"u"&&$localize.locale||r9}var _9=new ze("",{providedIn:"root",factory:()=>ce(_9,rt.Optional|rt.SkipSelf)||S6e()});var KB=new ze(""),ZB=(()=>{let t=class t{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=_le(i?.ngZone,M6e({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let a=x0e(r.moduleType,this.injector,C6e(()=>o)),s=a.injector.get(Da,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:l=>{s.handleError(l)}});a.onDestroy(()=>{Im(this._modules,a),c.unsubscribe()})}),g6e(s,o,()=>{let c=a.injector.get(XB);return c.runInitializers(),c.donePromise.then(()=>{let l=a.injector.get(_9,r9);return J0e(l||r9),this._moduleDoBootstrap(a),a})})})}bootstrapModule(r,i=[]){let o=QB({},i);return y6e(this.injector,o,r).then(a=>this.bootstrapModuleFactory(a,o))}_moduleDoBootstrap(r){let i=r.injector.get(ol);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new Ce(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ce(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(KB,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};t.\u0275fac=function(i){return new(i||t)(ve(M2))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})(),F8=null,JB=new ze("");function E6e(e){if(F8&&!F8.get(JB,!1))throw new Ce(400,!1);h6e(),F8=e;let t=e.get(ZB);return H6e(e),t}function uD(e,t,n=[]){let r=`Platform: ${t}`,i=new ze(r);return(o=[])=>{let a=eU();if(!a||a.injector.get(JB,!1)){let s=[...n,...o,{provide:i,useValue:!0}];e?e(s):E6e(D6e(s,r))}return z6e(i)}}function D6e(e=[],t){return M2.create({name:t,providers:[{provide:g9,useValue:"platform"},{provide:KB,useValue:new Set([()=>F8=null])},...e]})}function z6e(e){let t=eU();if(!t)throw new Ce(401,!1);return t}function eU(){return F8?.get(ZB)??null}function H6e(e){e.get(LE,null)?.forEach(n=>n())}var tU=uD(null,"core",[]),nU=(()=>{let t=class t{constructor(r){}};t.\u0275fac=function(i){return new(i||t)(ve(ol))},t.\u0275mod=wr({type:t}),t.\u0275inj=Sr({});let e=t;return e})();function al(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function rU(e){let t=c3(e);if(!t)return null;let n=new g6(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var uU=null;function ka(){return uU}function fU(e){uU??=e}var B9=class{};var Xr=new ze(""),MD=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(L6e),providedIn:"platform"});let e=t;return e})(),dU=new ze(""),L6e=(()=>{let t=class t extends MD{constructor(){super(),this._doc=ce(Xr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ka().getBaseHref(this._doc)}onPopState(r){let i=ka().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=ka().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>new t,providedIn:"platform"});let e=t;return e})();function wD(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function iU(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function Us(e){return e&&e[0]!=="?"?"?"+e:e}var Gs=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(SD),providedIn:"root"});let e=t;return e})(),pU=new ze(""),SD=(()=>{let t=class t extends Gs{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ce(Xr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return wD(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Us(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,a){let s=this.prepareExternalUrl(o+Us(a));this._platformLocation.pushState(r,i,s)}replaceState(r,i,o,a){let s=this.prepareExternalUrl(o+Us(a));this._platformLocation.replaceState(r,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(i){return new(i||t)(ve(MD),ve(pU,8))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),hU=(()=>{let t=class t extends Gs{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=wD(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,a){let s=this.prepareExternalUrl(o+Us(a));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(r,i,s)}replaceState(r,i,o,a){let s=this.prepareExternalUrl(o+Us(a));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(i){return new(i||t)(ve(MD),ve(pU,8))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),S6=(()=>{let t=class t{constructor(r){this._subject=new Wt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=N6e(iU(oU(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Us(i))}normalize(r){return t.stripTrailingSlash(V6e(this._basePath,oU(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Us(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Us(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};t.normalizeQueryParams=Us,t.joinWithSlash=wD,t.stripTrailingSlash=iU,t.\u0275fac=function(i){return new(i||t)(ve(Gs))},t.\u0275prov=ue({token:t,factory:()=>A6e(),providedIn:"root"});let e=t;return e})();function A6e(){return new S6(ve(Gs))}function V6e(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function oU(e){return e.replace(/\/index.html$/,"")}function N6e(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var Yi=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}(Yi||{}),Kt=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}(Kt||{}),oo=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}(oo||{}),js=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e.Infinity=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}(js||{});function _6e(e){return ko(e)[jn.LocaleId]}function k6e(e,t,n){let r=ko(e),i=[r[jn.DayPeriodsFormat],r[jn.DayPeriodsStandalone]],o=To(i,t);return To(o,n)}function T6e(e,t,n){let r=ko(e),i=[r[jn.DaysFormat],r[jn.DaysStandalone]],o=To(i,t);return To(o,n)}function I6e(e,t,n){let r=ko(e),i=[r[jn.MonthsFormat],r[jn.MonthsStandalone]],o=To(i,t);return To(o,n)}function F6e(e,t){let r=ko(e)[jn.Eras];return To(r,t)}function k9(e,t){let n=ko(e);return To(n[jn.DateFormat],t)}function T9(e,t){let n=ko(e);return To(n[jn.TimeFormat],t)}function I9(e,t){let r=ko(e)[jn.DateTimeFormat];return To(r,t)}function j9(e,t){let n=ko(e),r=n[jn.NumberSymbols][t];if(typeof r>"u"){if(t===js.CurrencyDecimal)return n[jn.NumberSymbols][js.Decimal];if(t===js.CurrencyGroup)return n[jn.NumberSymbols][js.Group]}return r}function mU(e){if(!e[jn.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[jn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function R6e(e){let t=ko(e);return mU(t),(t[jn.ExtraData][2]||[]).map(r=>typeof r=="string"?fD(r):[fD(r[0]),fD(r[1])])}function O6e(e,t,n){let r=ko(e);mU(r);let i=[r[jn.ExtraData][0],r[jn.ExtraData][1]],o=To(i,t)||[];return To(o,n)||[]}function To(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new Error("Locale data API: locale data undefined")}function fD(e){let[t,n]=e.split(":");return{hours:+t,minutes:+n}}var P6e=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,F9={},$6e=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,qs=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}(qs||{}),_t=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}(_t||{}),Nt=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}(Nt||{});function B6e(e,t,n,r){let i=K6e(e);t=Bs(n,t)||t;let a=[],s;for(;t;)if(s=$6e.exec(t),s){a=a.concat(s.slice(1));let u=a.pop();if(!u)break;t=u}else{a.push(t);break}let c=i.getTimezoneOffset();r&&(c=vU(r,c),i=Q6e(i,r,!0));let l="";return a.forEach(u=>{let f=Y6e(u);l+=f?f(i,n,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function U9(e,t,n){let r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function Bs(e,t){let n=_6e(e);if(F9[n]??={},F9[n][t])return F9[n][t];let r="";switch(t){case"shortDate":r=k9(e,oo.Short);break;case"mediumDate":r=k9(e,oo.Medium);break;case"longDate":r=k9(e,oo.Long);break;case"fullDate":r=k9(e,oo.Full);break;case"shortTime":r=T9(e,oo.Short);break;case"mediumTime":r=T9(e,oo.Medium);break;case"longTime":r=T9(e,oo.Long);break;case"fullTime":r=T9(e,oo.Full);break;case"short":let i=Bs(e,"shortTime"),o=Bs(e,"shortDate");r=R9(I9(e,oo.Short),[i,o]);break;case"medium":let a=Bs(e,"mediumTime"),s=Bs(e,"mediumDate");r=R9(I9(e,oo.Medium),[a,s]);break;case"long":let c=Bs(e,"longTime"),l=Bs(e,"longDate");r=R9(I9(e,oo.Long),[c,l]);break;case"full":let u=Bs(e,"fullTime"),f=Bs(e,"fullDate");r=R9(I9(e,oo.Full),[u,f]);break}return r&&(F9[n][t]=r),r}function R9(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,r){return t!=null&&r in t?t[r]:n})),e}function E2(e,t,n="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=-e+1:(e=-e,o=n));let a=String(e);for(;a.length<t;)a="0"+a;return r&&(a=a.slice(a.length-t)),o+a}function U6e(e,t){return E2(e,3).substring(0,t)}function Jn(e,t,n=0,r=!1,i=!1){return function(o,a){let s=j6e(e,o);if((n>0||s>-n)&&(s+=n),e===_t.Hours)s===0&&n===-12&&(s=12);else if(e===_t.FractionalSeconds)return U6e(s,t);let c=j9(a,js.MinusSign);return E2(s,t,c,r,i)}}function j6e(e,t){switch(e){case _t.FullYear:return t.getFullYear();case _t.Month:return t.getMonth();case _t.Date:return t.getDate();case _t.Hours:return t.getHours();case _t.Minutes:return t.getMinutes();case _t.Seconds:return t.getSeconds();case _t.FractionalSeconds:return t.getMilliseconds();case _t.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}function nn(e,t,n=Yi.Format,r=!1){return function(i,o){return q6e(i,o,e,t,n,r)}}function q6e(e,t,n,r,i,o){switch(n){case Nt.Months:return I6e(t,i,r)[e.getMonth()];case Nt.Days:return T6e(t,i,r)[e.getDay()];case Nt.DayPeriods:let a=e.getHours(),s=e.getMinutes();if(o){let l=R6e(t),u=O6e(t,i,r),f=l.findIndex(d=>{if(Array.isArray(d)){let[p,h]=d,m=a>=p.hours&&s>=p.minutes,g=a<h.hours||a===h.hours&&s<h.minutes;if(p.hours<h.hours){if(m&&g)return!0}else if(m||g)return!0}else if(d.hours===a&&d.minutes===s)return!0;return!1});if(f!==-1)return u[f]}return k6e(t,i,r)[a<12?0:1];case Nt.Eras:return F6e(t,r)[e.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function O9(e){return function(t,n,r){let i=-1*r,o=j9(n,js.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case qs.Short:return(i>=0?"+":"")+E2(a,2,o)+E2(Math.abs(i%60),2,o);case qs.ShortGMT:return"GMT"+(i>=0?"+":"")+E2(a,1,o);case qs.Long:return"GMT"+(i>=0?"+":"")+E2(a,2,o)+":"+E2(Math.abs(i%60),2,o);case qs.Extended:return r===0?"Z":(i>=0?"+":"")+E2(a,2,o)+":"+E2(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${e}"`)}}}var G6e=0,$9=4;function W6e(e){let t=U9(e,G6e,1).getDay();return U9(e,0,1+(t<=$9?$9:$9+7)-t)}function gU(e){let t=e.getDay(),n=t===0?-3:$9-t;return U9(e.getFullYear(),e.getMonth(),e.getDate()+n)}function dD(e,t=!1){return function(n,r){let i;if(t){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,a=n.getDate();i=1+Math.floor((a+o)/7)}else{let o=gU(n),a=W6e(o.getFullYear()),s=o.getTime()-a.getTime();i=1+Math.round(s/6048e5)}return E2(i,e,j9(r,js.MinusSign))}}function P9(e,t=!1){return function(n,r){let o=gU(n).getFullYear();return E2(o,e,j9(r,js.MinusSign),t)}}var pD={};function Y6e(e){if(pD[e])return pD[e];let t;switch(e){case"G":case"GG":case"GGG":t=nn(Nt.Eras,Kt.Abbreviated);break;case"GGGG":t=nn(Nt.Eras,Kt.Wide);break;case"GGGGG":t=nn(Nt.Eras,Kt.Narrow);break;case"y":t=Jn(_t.FullYear,1,0,!1,!0);break;case"yy":t=Jn(_t.FullYear,2,0,!0,!0);break;case"yyy":t=Jn(_t.FullYear,3,0,!1,!0);break;case"yyyy":t=Jn(_t.FullYear,4,0,!1,!0);break;case"Y":t=P9(1);break;case"YY":t=P9(2,!0);break;case"YYY":t=P9(3);break;case"YYYY":t=P9(4);break;case"M":case"L":t=Jn(_t.Month,1,1);break;case"MM":case"LL":t=Jn(_t.Month,2,1);break;case"MMM":t=nn(Nt.Months,Kt.Abbreviated);break;case"MMMM":t=nn(Nt.Months,Kt.Wide);break;case"MMMMM":t=nn(Nt.Months,Kt.Narrow);break;case"LLL":t=nn(Nt.Months,Kt.Abbreviated,Yi.Standalone);break;case"LLLL":t=nn(Nt.Months,Kt.Wide,Yi.Standalone);break;case"LLLLL":t=nn(Nt.Months,Kt.Narrow,Yi.Standalone);break;case"w":t=dD(1);break;case"ww":t=dD(2);break;case"W":t=dD(1,!0);break;case"d":t=Jn(_t.Date,1);break;case"dd":t=Jn(_t.Date,2);break;case"c":case"cc":t=Jn(_t.Day,1);break;case"ccc":t=nn(Nt.Days,Kt.Abbreviated,Yi.Standalone);break;case"cccc":t=nn(Nt.Days,Kt.Wide,Yi.Standalone);break;case"ccccc":t=nn(Nt.Days,Kt.Narrow,Yi.Standalone);break;case"cccccc":t=nn(Nt.Days,Kt.Short,Yi.Standalone);break;case"E":case"EE":case"EEE":t=nn(Nt.Days,Kt.Abbreviated);break;case"EEEE":t=nn(Nt.Days,Kt.Wide);break;case"EEEEE":t=nn(Nt.Days,Kt.Narrow);break;case"EEEEEE":t=nn(Nt.Days,Kt.Short);break;case"a":case"aa":case"aaa":t=nn(Nt.DayPeriods,Kt.Abbreviated);break;case"aaaa":t=nn(Nt.DayPeriods,Kt.Wide);break;case"aaaaa":t=nn(Nt.DayPeriods,Kt.Narrow);break;case"b":case"bb":case"bbb":t=nn(Nt.DayPeriods,Kt.Abbreviated,Yi.Standalone,!0);break;case"bbbb":t=nn(Nt.DayPeriods,Kt.Wide,Yi.Standalone,!0);break;case"bbbbb":t=nn(Nt.DayPeriods,Kt.Narrow,Yi.Standalone,!0);break;case"B":case"BB":case"BBB":t=nn(Nt.DayPeriods,Kt.Abbreviated,Yi.Format,!0);break;case"BBBB":t=nn(Nt.DayPeriods,Kt.Wide,Yi.Format,!0);break;case"BBBBB":t=nn(Nt.DayPeriods,Kt.Narrow,Yi.Format,!0);break;case"h":t=Jn(_t.Hours,1,-12);break;case"hh":t=Jn(_t.Hours,2,-12);break;case"H":t=Jn(_t.Hours,1);break;case"HH":t=Jn(_t.Hours,2);break;case"m":t=Jn(_t.Minutes,1);break;case"mm":t=Jn(_t.Minutes,2);break;case"s":t=Jn(_t.Seconds,1);break;case"ss":t=Jn(_t.Seconds,2);break;case"S":t=Jn(_t.FractionalSeconds,1);break;case"SS":t=Jn(_t.FractionalSeconds,2);break;case"SSS":t=Jn(_t.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=O9(qs.Short);break;case"ZZZZZ":t=O9(qs.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=O9(qs.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=O9(qs.Long);break;default:return null}return pD[e]=t,t}function vU(e,t){e=e.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function X6e(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function Q6e(e,t,n){let r=n?-1:1,i=e.getTimezoneOffset(),o=vU(t,i);return X6e(e,r*(o-i))}function K6e(e){if(aU(e))return e;if(typeof e=="number"&&!isNaN(e))return new Date(e);if(typeof e=="string"){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){let[i,o=1,a=1]=e.split("-").map(s=>+s);return U9(i,o-1,a)}let n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let r;if(r=e.match(P6e))return Z6e(r)}let t=new Date(e);if(!aU(t))throw new Error(`Unable to convert "${e}" into a date`);return t}function Z6e(e){let t=new Date(0),n=0,r=0,i=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));let a=Number(e[4]||0)-n,s=Number(e[5]||0)-r,c=Number(e[6]||0),l=Math.floor(parseFloat("0."+(e[7]||0))*1e3);return o.call(t,a,s,c,l),t}function aU(e){return e instanceof Date&&!isNaN(e.valueOf())}function q9(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var hD=/\s+/,sU=[],yU=(()=>{let t=class t{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=sU,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(hD):sU}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(hD):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(hD).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};t.\u0275fac=function(i){return new(i||t)(q(Yr),q(to))},t.\u0275dir=Qt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[Gr.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let e=t;return e})();var mD=class{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},xi=(()=>{let t=class t{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,a,s)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new mD(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(a===null?void 0:a);else if(a!==null){let c=i.get(a);i.move(c,s),cU(c,o)}});for(let o=0,a=i.length;o<a;o++){let c=i.get(o).context;c.index=o,c.count=a,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let a=i.get(o.currentIndex);cU(a,o)})}static ngTemplateContextGuard(r,i){return!0}};t.\u0275fac=function(i){return new(i||t)(q(p3),q(J4),q(eD))},t.\u0275dir=Qt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let e=t;return e})();function cU(e,t){e.context.$implicit=t.item}var z1=(()=>{let t=class t{constructor(r,i){this._viewContainer=r,this._context=new gD,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){lU("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){lU("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};t.\u0275fac=function(i){return new(i||t)(q(p3),q(J4))},t.\u0275dir=Qt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let e=t;return e})(),gD=class{constructor(){this.$implicit=null,this.ngIf=null}};function lU(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${qi(t)}'.`)}function xU(e,t){return new Ce(2100,!1)}var vD=class{createSubscription(t,n){return JE(()=>t.subscribe({next:n,error:r=>{throw r}}))}dispose(t){JE(()=>t.unsubscribe())}},yD=class{createSubscription(t,n){return t.then(n,r=>{throw r})}dispose(t){}},J6e=new yD,eue=new vD,G9=(()=>{let t=class t{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(m3(r))return J6e;if(lD(r))return eue;throw xU(t,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};t.\u0275fac=function(i){return new(i||t)(q(Ps,16))},t.\u0275pipe=gE({name:"async",type:t,pure:!1,standalone:!0});let e=t;return e})();var tue="mediumDate",nue=new ze(""),rue=new ze(""),Io=(()=>{let t=class t{constructor(r,i,o){this.locale=r,this.defaultTimezone=i,this.defaultOptions=o}transform(r,i,o,a){if(r==null||r===""||r!==r)return null;try{let s=i??this.defaultOptions?.dateFormat??tue,c=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return B6e(r,s,a||this.locale,c)}catch(s){throw xU(t,s.message)}}};t.\u0275fac=function(i){return new(i||t)(q(_9,16),q(nue,24),q(rue,24))},t.\u0275pipe=gE({name:"date",type:t,pure:!0,standalone:!0});let e=t;return e})();var W9=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=wr({type:t}),t.\u0275inj=Sr({});let e=t;return e})(),ED="browser",iue="server";function oue(e){return e===ED}function DD(e){return e===iue}var CU=(()=>{let t=class t{};t.\u0275prov=ue({token:t,providedIn:"root",factory:()=>oue(ce(Ha))?new xD(ce(Xr),window):new CD});let e=t;return e})(),xD=class{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let n=aue(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function aue(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let a=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(a)return a}i=r.nextNode()}}return null}var CD=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},w6=class{};var o5=class{},X9=class{},sl=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),a=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let a=this.headers.get(n);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}break}}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var HD=class{encodeKey(t){return bU(t)}encodeValue(t){return bU(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function lue(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[a,s]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=n.get(a)||[];c.push(s),n.set(a,c)}),n}var uue=/%(\d[a-f0-9])/gi,fue={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function bU(e){return encodeURIComponent(e).replace(uue,(t,n)=>fue[n]??t)}function Y9(e){return`${e}`}var g3=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new HD,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=lue(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],i=Array.isArray(r)?r.map(Y9):[Y9(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(Y9(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(Y9(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var LD=class{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function due(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function MU(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function wU(e){return typeof Blob<"u"&&e instanceof Blob}function SU(e){return typeof FormData<"u"&&e instanceof FormData}function pue(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var i5=class e{constructor(t,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(due(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new sl,this.context??=new LD,!this.params)this.params=new g3,this.urlWithParams=n;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=n;else{let s=n.indexOf("?"),c=s===-1?"?":s<n.length-1?"&":"";this.urlWithParams=n+c+a}}}serializeBody(){return this.body===null?null:MU(this.body)||wU(this.body)||SU(this.body)||pue(this.body)||typeof this.body=="string"?this.body:this.body instanceof g3?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||SU(this.body)?null:wU(this.body)?this.body.type||null:MU(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof g3?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.body!==void 0?t.body:this.body,a=t.withCredentials!==void 0?t.withCredentials:this.withCredentials,s=t.reportProgress!==void 0?t.reportProgress:this.reportProgress,c=t.headers||this.headers,l=t.params||this.params,u=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((f,d)=>f.set(d,t.setHeaders[d]),c)),t.setParams&&(l=Object.keys(t.setParams).reduce((f,d)=>f.set(d,t.setParams[d]),l)),new e(n,r,o,{params:l,headers:c,context:u,reportProgress:s,responseType:i,withCredentials:a})}},E6=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(E6||{}),a5=class{constructor(t,n=K9.Ok,r="OK"){this.headers=t.headers||new sl,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},AD=class e extends a5{constructor(t={}){super(t),this.type=E6.ResponseHeader}clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},D6=class e extends a5{constructor(t={}){super(t),this.type=E6.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Q9=class extends a5{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},K9=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(K9||{});function zD(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var Ws=(()=>{let t=class t{constructor(r){this.handler=r}request(r,i,o={}){let a;if(r instanceof i5)a=r;else{let l;o.headers instanceof sl?l=o.headers:l=new sl(o.headers);let u;o.params&&(o.params instanceof g3?u=o.params:u=new g3({fromObject:o.params})),a=new i5(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let s=se(a).pipe(Vs(l=>this.handler.handle(l)));if(r instanceof i5||o.observe==="events")return s;let c=s.pipe(b1(l=>l instanceof D6));switch(o.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return c.pipe(Ke(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(Ke(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(Ke(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(Ke(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new g3().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,zD(o,i))}post(r,i,o={}){return this.request("POST",r,zD(o,i))}put(r,i,o={}){return this.request("PUT",r,zD(o,i))}};t.\u0275fac=function(i){return new(i||t)(ve(o5))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function HU(e,t){return t(e)}function hue(e,t){return(n,r)=>t.intercept(n,{handle:i=>e(i,r)})}function mue(e,t,n){return(r,i)=>Aa(n,()=>t(r,o=>e(o,i)))}var VD=new ze(""),ND=new ze(""),gue=new ze(""),vue=new ze("");function yue(){let e=null;return(t,n)=>{e===null&&(e=(ce(VD,{optional:!0})??[]).reduceRight(hue,HU));let r=ce(rl),i=r.add();return e(t,n).pipe(o3(()=>r.remove(i)))}}var EU=(()=>{let t=class t extends o5{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=ce(rl);let o=ce(vue,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(ND),...this.injector.get(gue,[])]));this.chain=o.reduceRight((a,s)=>mue(a,s,this.injector),HU)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(o3(()=>this.pendingTasks.remove(i)))}};t.\u0275fac=function(i){return new(i||t)(ve(X9),ve(Wi))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();var xue=/^\)\]\}',?\n/;function Cue(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var DU=(()=>{let t=class t{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new Ce(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?tn(i.\u0275loadImpl()):se(null)).pipe(M1(()=>new wt(a=>{let s=i.build();if(s.open(r.method,r.urlWithParams),r.withCredentials&&(s.withCredentials=!0),r.headers.forEach((g,v)=>s.setRequestHeader(g,v.join(","))),r.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let g=r.detectContentTypeHeader();g!==null&&s.setRequestHeader("Content-Type",g)}if(r.responseType){let g=r.responseType.toLowerCase();s.responseType=g!=="json"?g:"text"}let c=r.serializeBody(),l=null,u=()=>{if(l!==null)return l;let g=s.statusText||"OK",v=new sl(s.getAllResponseHeaders()),y=Cue(s)||r.url;return l=new AD({headers:v,status:s.status,statusText:g,url:y}),l},f=()=>{let{headers:g,status:v,statusText:y,url:C}=u(),b=null;v!==K9.NoContent&&(b=typeof s.response>"u"?s.responseText:s.response),v===0&&(v=b?K9.Ok:0);let M=v>=200&&v<300;if(r.responseType==="json"&&typeof b=="string"){let S=b;b=b.replace(xue,"");try{b=b!==""?JSON.parse(b):null}catch(w){b=S,M&&(M=!1,b={error:w,text:b})}}M?(a.next(new D6({body:b,headers:g,status:v,statusText:y,url:C||void 0})),a.complete()):a.error(new Q9({error:b,headers:g,status:v,statusText:y,url:C||void 0}))},d=g=>{let{url:v}=u(),y=new Q9({error:g,status:s.status||0,statusText:s.statusText||"Unknown Error",url:v||void 0});a.error(y)},p=!1,h=g=>{p||(a.next(u()),p=!0);let v={type:E6.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),r.responseType==="text"&&s.responseText&&(v.partialText=s.responseText),a.next(v)},m=g=>{let v={type:E6.UploadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),a.next(v)};return s.addEventListener("load",f),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),r.reportProgress&&(s.addEventListener("progress",h),c!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(c),a.next({type:E6.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",f),s.removeEventListener("timeout",d),r.reportProgress&&(s.removeEventListener("progress",h),c!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}};t.\u0275fac=function(i){return new(i||t)(ve(w6))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),LU=new ze(""),bue="XSRF-TOKEN",Mue=new ze("",{providedIn:"root",factory:()=>bue}),wue="X-XSRF-TOKEN",Sue=new ze("",{providedIn:"root",factory:()=>wue}),Z9=class{},Eue=(()=>{let t=class t{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=q9(r,this.cookieName),this.lastCookieString=r),this.lastToken}};t.\u0275fac=function(i){return new(i||t)(ve(Xr),ve(Ha),ve(Mue))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function Due(e,t){let n=e.url.toLowerCase();if(!ce(LU)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let r=ce(Z9).getToken(),i=ce(Sue);return r!=null&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),t(e)}var AU=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(AU||{});function zue(e,t){return{\u0275kind:e,\u0275providers:t}}function Hue(...e){let t=[Ws,DU,EU,{provide:o5,useExisting:EU},{provide:X9,useExisting:DU},{provide:ND,useValue:Due,multi:!0},{provide:LU,useValue:!0},{provide:Z9,useClass:Eue}];for(let n of e)t.push(...n.\u0275providers);return m9(t)}var zU=new ze("");function Lue(){return zue(AU.LegacyInterceptors,[{provide:zU,useFactory:yue},{provide:ND,useExisting:zU,multi:!0}])}var VU=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=wr({type:t}),t.\u0275inj=Sr({providers:[Hue(Lue())]});let e=t;return e})();var TD=class extends B9{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ID=class e extends TD{static makeCurrent(){fU(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=Aue();return n==null?null:Vue(n)}resetBaseElement(){s5=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return q9(document.cookie,t)}},s5=null;function Aue(){return s5=s5||document.querySelector("base"),s5?s5.getAttribute("href"):null}function Vue(e){return new URL(e,document.baseURI).pathname}var FD=class{addToWindow(t){Un.getAngularTestability=(r,i=!0)=>{let o=t.findTestabilityInTree(r,i);if(o==null)throw new Ce(5103,!1);return o},Un.getAllAngularTestabilities=()=>t.getAllTestabilities(),Un.getAllAngularRootElements=()=>t.getAllRootElements();let n=r=>{let i=Un.getAllAngularTestabilities(),o=i.length,a=function(){o--,o==0&&r()};i.forEach(s=>{s.whenStable(a)})};Un.frameworkStabilizers||(Un.frameworkStabilizers=[]),Un.frameworkStabilizers.push(n)}findTestabilityInTree(t,n,r){if(n==null)return null;let i=t.getTestability(n);return i??(r?ka().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},Nue=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),RD=new ze(""),TU=(()=>{let t=class t{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(a=>a.supports(r)),!i)throw new Ce(5101,!1);return this._eventNameToPlugin.set(r,i),i}};t.\u0275fac=function(i){return new(i||t)(ve(RD),ve(Yt))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),eg=class{constructor(t){this._doc=t}},_D="ng-app-id",IU=(()=>{let t=class t{constructor(r,i,o,a={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=DD(a),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${_D}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let a=o.get(r);return a.usage+=i,a.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,a=o?.get(i);if(a?.parentNode===r)return o.delete(i),a.removeAttribute(_D),a;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(_D,this.appId),r.appendChild(s),s}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),a=this.styleRef,s=a.get(i)?.elements;s?s.push(o):a.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};t.\u0275fac=function(i){return new(i||t)(ve(Xr),ve(d9),ve(AE,8),ve(Ha))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),kD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},PD=/%COMP%/g,FU="%COMP%",_ue=`_nghost-${FU}`,kue=`_ngcontent-${FU}`,Tue=!0,Iue=new ze("",{providedIn:"root",factory:()=>Tue});function Fue(e){return kue.replace(PD,e)}function Rue(e){return _ue.replace(PD,e)}function RU(e,t){return t.map(n=>n.replace(PD,e))}var NU=(()=>{let t=class t{constructor(r,i,o,a,s,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=a,this.doc=s,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=DD(c),this.defaultRenderer=new c5(r,s,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Sa.ShadowDom&&(i=k(x({},i),{encapsulation:Sa.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof tg?o.applyToHost(r):o instanceof l5&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,a=o.get(i.id);if(!a){let s=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Sa.Emulated:a=new tg(l,u,i,this.appId,f,s,c,d);break;case Sa.ShadowDom:return new OD(l,u,r,i,s,c,this.nonce,d);default:a=new l5(l,u,i,f,s,c,d);break}o.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(i){return new(i||t)(ve(TU),ve(IU),ve(d9),ve(Iue),ve(Xr),ve(Ha),ve(Yt),ve(AE))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),c5=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(kD[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(_U(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(_U(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new Ce(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=kD[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=kD[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Ts.DashCase|Ts.Important)?t.style.setProperty(n,r,i&Ts.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Ts.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=ka().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function _U(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var OD=class extends c5{constructor(t,n,r,i,o,a,s,c){super(t,o,a,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=RU(i.id,i.styles);for(let u of l){let f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=u,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},l5=class extends c5{constructor(t,n,r,i,o,a,s,c){super(t,o,a,s),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?RU(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},tg=class extends l5{constructor(t,n,r,i,o,a,s,c){let l=i+"-"+r.id;super(t,n,r,o,a,s,c,l),this.contentAttr=Fue(l),this.hostAttr=Rue(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},Oue=(()=>{let t=class t extends eg{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};t.\u0275fac=function(i){return new(i||t)(ve(Xr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})(),kU=["alt","control","meta","shift"],Pue={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$ue={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},Bue=(()=>{let t=class t extends eg{constructor(r){super(r)}supports(r){return t.parseEventName(r)!=null}addEventListener(r,i,o){let a=t.parseEventName(i),s=t.eventCallback(a.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ka().onAndCancel(r,a.domEventName,s))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let a=t._normalizeKey(i.pop()),s="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),s="code."),kU.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=a,i.length!=0||a.length===0)return null;let l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(r,i){let o=Pue[r.key]||r.key,a="";return i.indexOf("code.")>-1&&(o=r.code,a="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),kU.forEach(s=>{if(s!==o){let c=$ue[s];c(r)&&(a+=s+".")}}),a+=o,a===i)}static eventCallback(r,i,o){return a=>{t.matchEventFullKeyCode(a,r)&&o.runGuarded(()=>i(a))}}static _normalizeKey(r){return r==="esc"?"escape":r}};t.\u0275fac=function(i){return new(i||t)(ve(Xr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function Uue(){ID.makeCurrent()}function jue(){return new Da}function que(){return r$(document),document}var Gue=[{provide:Ha,useValue:ED},{provide:LE,useValue:Uue,multi:!0},{provide:Xr,useFactory:que,deps:[]}],OU=uD(tU,"browser",Gue),Wue=new ze(""),Yue=[{provide:r5,useClass:FD,deps:[]},{provide:sD,useClass:H9,deps:[Yt,L9,r5]},{provide:H9,useClass:H9,deps:[Yt,L9,r5]}],Xue=[{provide:g9,useValue:"root"},{provide:Da,useFactory:jue,deps:[]},{provide:RD,useClass:Oue,multi:!0,deps:[Xr,Yt,Ha]},{provide:RD,useClass:Bue,multi:!0,deps:[Xr]},NU,IU,TU,{provide:G8,useExisting:NU},{provide:w6,useClass:Nue,deps:[]},[]],PU=(()=>{let t=class t{constructor(r){}static withServerTransition(r){return{ngModule:t,providers:[{provide:d9,useValue:r.appId}]}}};t.\u0275fac=function(i){return new(i||t)(ve(Wue,12))},t.\u0275mod=wr({type:t}),t.\u0275inj=Sr({providers:[...Xue,...Yue],imports:[W9,nU]});let e=t;return e})();var $U=(()=>{let t=class t{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};t.\u0275fac=function(i){return new(i||t)(ve(Xr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var $D=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:function(i){let o=null;return i?o=new(i||t):o=ve(Que),o},providedIn:"root"});let e=t;return e})(),Que=(()=>{let t=class t extends $D{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case S2.NONE:return i;case S2.HTML:return Rs(i,"HTML")?w2(i):RE(this._doc,String(i)).toString();case S2.STYLE:return Rs(i,"Style")?w2(i):i;case S2.SCRIPT:if(Rs(i,"Script"))return w2(i);throw new Ce(5200,!1);case S2.URL:return Rs(i,"URL")?w2(i):x9(String(i));case S2.RESOURCE_URL:if(Rs(i,"ResourceURL"))return w2(i);throw new Ce(5201,!1);default:throw new Ce(5202,!1)}}bypassSecurityTrustHtml(r){return R$(r)}bypassSecurityTrustStyle(r){return O$(r)}bypassSecurityTrustScript(r){return P$(r)}bypassSecurityTrustUrl(r){return $$(r)}bypassSecurityTrustResourceUrl(r){return B$(r)}};t.\u0275fac=function(i){return new(i||t)(ve(Xr))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var QU=(()=>{let t=class t{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};t.\u0275fac=function(i){return new(i||t)(q(to),q(Yr))},t.\u0275dir=Qt({type:t});let e=t;return e})(),h5=(()=>{let t=class t extends QU{};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Va(t)))(o||t)}})(),t.\u0275dir=Qt({type:t,features:[no]});let e=t;return e})(),L6=new ze(""),Kue={provide:L6,useExisting:La(()=>Ys),multi:!0},Ys=(()=>{let t=class t extends h5{writeValue(r){this.setProperty("checked",r)}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Va(t)))(o||t)}})(),t.\u0275dir=Qt({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){i&1&&Ve("change",function(s){return o.onChange(s.target.checked)})("blur",function(){return o.onTouched()})},features:[h3([Kue]),no]});let e=t;return e})(),Zue={provide:L6,useExisting:La(()=>er),multi:!0};function Jue(){let e=ka()?ka().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var efe=new ze(""),er=(()=>{let t=class t extends QU{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Jue())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};t.\u0275fac=function(i){return new(i||t)(q(to),q(Yr),q(efe,8))},t.\u0275dir=Qt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Ve("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[h3([Zue]),no]});let e=t;return e})();var KU=new ze(""),ZU=new ze("");function JU(e){return e!=null}function ej(e){return m3(e)?tn(e):e}function tj(e){let t={};return e.forEach(n=>{t=n!=null?x(x({},t),n):t}),Object.keys(t).length===0?null:t}function nj(e,t){return t.map(n=>n(e))}function tfe(e){return!e.validate}function rj(e){return e.map(t=>tfe(t)?t:n=>t.validate(n))}function nfe(e){if(!e)return null;let t=e.filter(JU);return t.length==0?null:function(n){return tj(nj(n,t))}}function jD(e){return e!=null?nfe(rj(e)):null}function rfe(e){if(!e)return null;let t=e.filter(JU);return t.length==0?null:function(n){let r=nj(n,t).map(ej);return Gw(r).pipe(Ke(tj))}}function qD(e){return e!=null?rfe(rj(e)):null}function BU(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function ife(e){return e._rawValidators}function ofe(e){return e._rawAsyncValidators}function UD(e){return e?Array.isArray(e)?e:[e]:[]}function rg(e,t){return Array.isArray(e)?e.includes(t):e===t}function UU(e,t){let n=UD(t);return UD(e).forEach(i=>{rg(n,i)||n.push(i)}),n}function jU(e,t){return UD(t).filter(n=>!rg(e,n))}var ig=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=jD(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=qD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},H6=class extends ig{get formDirective(){return null}get path(){return null}},p5=class extends ig{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},og=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},afe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},_We=k(x({},afe),{"[class.ng-submitted]":"isSubmitted"}),An=(()=>{let t=class t extends og{constructor(r){super(r)}};t.\u0275fac=function(i){return new(i||t)(q(p5,2))},t.\u0275dir=Qt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&e5("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[no]});let e=t;return e})(),Ci=(()=>{let t=class t extends og{constructor(r){super(r)}};t.\u0275fac=function(i){return new(i||t)(q(H6,10))},t.\u0275dir=Qt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&e5("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[no]});let e=t;return e})();var u5="VALID",ng="INVALID",z6="PENDING",f5="DISABLED";function ij(e){return(cg(e)?e.validators:e)||null}function sfe(e){return Array.isArray(e)?jD(e):e||null}function oj(e,t){return(cg(t)?t.asyncValidators:e)||null}function cfe(e){return Array.isArray(e)?qD(e):e||null}function cg(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function lfe(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new Ce(1e3,"");if(!r[n])throw new Ce(1001,"")}function ufe(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new Ce(1002,"")})}var ag=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===u5}get invalid(){return this.status===ng}get pending(){return this.status==z6}get disabled(){return this.status===f5}get enabled(){return this.status!==f5}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(UU(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(UU(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(jU(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(jU(t,this._rawAsyncValidators))}hasValidator(t){return rg(this._rawValidators,t)}hasAsyncValidator(t){return rg(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=z6,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=f5,this.errors=null,this._forEachChild(r=>{r.disable(k(x({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(k(x({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=u5,this._forEachChild(r=>{r.enable(k(x({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(k(x({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===u5||this.status===z6)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?f5:u5}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=z6,this._hasOwnPendingAsyncValidator=!0;let n=ej(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Wt,this.statusChanges=new Wt}_calculateStatus(){return this._allControlsDisabled()?f5:this.errors?ng:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(z6)?z6:this._anyControlsHaveStatus(ng)?ng:u5}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){cg(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=sfe(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=cfe(this._rawAsyncValidators)}},sg=class extends ag{constructor(t,n,r){super(ij(n),oj(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){ufe(this,!0,t),Object.keys(t).forEach(r=>{lfe(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var GD=new ze("CallSetDisabledState",{providedIn:"root",factory:()=>WD}),WD="always";function ffe(e,t){return[...t.path,e]}function aj(e,t,n=WD){sj(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),pfe(e,t),mfe(e,t),hfe(e,t),dfe(e,t)}function qU(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function dfe(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function sj(e,t){let n=ife(e);t.validator!==null?e.setValidators(BU(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=ofe(e);t.asyncValidator!==null?e.setAsyncValidators(BU(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();qU(t._rawValidators,i),qU(t._rawAsyncValidators,i)}function pfe(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&cj(e,t)})}function hfe(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&cj(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function cj(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function mfe(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function gfe(e,t){e==null,sj(e,t)}function vfe(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function yfe(e){return Object.getPrototypeOf(e.constructor)===h5}function xfe(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Cfe(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===er?n=o:yfe(o)?r=o:i=o}),i||r||n||null}var bfe={provide:H6,useExisting:La(()=>Qr)},d5=Promise.resolve(),Qr=(()=>{let t=class t extends H6{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Wt,this.form=new sg({},jD(r),qD(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){d5.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),aj(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){d5.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){d5.then(()=>{let i=this._findContainer(r.path),o=new sg({});gfe(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){d5.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){d5.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,xfe(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};t.\u0275fac=function(i){return new(i||t)(q(KU,10),q(ZU,10),q(GD,8))},t.\u0275dir=Qt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&Ve("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{options:[Gr.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h3([bfe]),no]});let e=t;return e})();function GU(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function WU(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var Mfe=class extends ag{constructor(t=null,n,r){super(ij(n),oj(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),cg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(WU(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){GU(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){GU(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){WU(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var wfe={provide:p5,useExisting:La(()=>wn)},YU=Promise.resolve(),wn=(()=>{let t=class t extends p5{constructor(r,i,o,a,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this.control=new Mfe,this._registered=!1,this.name="",this.update=new Wt,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=Cfe(this,a)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),vfe(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){aj(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){YU.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&al(i);YU.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?ffe(r,this._parent):[r]}};t.\u0275fac=function(i){return new(i||t)(q(H6,9),q(KU,10),q(ZU,10),q(L6,10),q(Ps,8),q(GD,8))},t.\u0275dir=Qt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Gr.None,"disabled","isDisabled"],model:[Gr.None,"ngModel","model"],options:[Gr.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h3([wfe]),no,_o]});let e=t;return e})(),bi=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=Qt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let e=t;return e})(),Sfe={provide:L6,useExisting:La(()=>YD),multi:!0},YD=(()=>{let t=class t extends h5{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Va(t)))(o||t)}})(),t.\u0275dir=Qt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&Ve("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},features:[h3([Sfe]),no]});let e=t;return e})();var Efe={provide:L6,useExisting:La(()=>A6),multi:!0};function lj(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function Dfe(e){return e.split(":")[0]}var A6=(()=>{let t=class t extends h5{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),o=lj(i,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=Dfe(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Va(t)))(o||t)}})(),t.\u0275dir=Qt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&Ve("change",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[h3([Efe]),no]});let e=t;return e})(),V6=(()=>{let t=class t{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(lj(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(i){return new(i||t)(q(Yr),q(to),q(A6,9))},t.\u0275dir=Qt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let e=t;return e})(),zfe={provide:L6,useExisting:La(()=>uj),multi:!0};function XU(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function Hfe(e){return e.split(":")[0]}var uj=(()=>{let t=class t extends h5{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let o=r.map(a=>this._getOptionId(a));i=(a,s)=>{a._setSelected(o.indexOf(s.toString())>-1)}}else i=(o,a)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let o=[],a=i.selectedOptions;if(a!==void 0){let s=a;for(let c=0;c<s.length;c++){let l=s[c],u=this._getOptionValue(l.value);o.push(u)}}else{let s=i.options;for(let c=0;c<s.length;c++){let l=s[c];if(l.selected){let u=this._getOptionValue(l.value);o.push(u)}}}this.value=o,r(o)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=Hfe(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Va(t)))(o||t)}})(),t.\u0275dir=Qt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&Ve("change",function(s){return o.onChange(s.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[h3([zfe]),no]});let e=t;return e})(),N6=(()=>{let t=class t{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(XU(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(XU(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(i){return new(i||t)(q(Yr),q(to),q(uj,9))},t.\u0275dir=Qt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let e=t;return e})();var Lfe=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=wr({type:t}),t.\u0275inj=Sr({});let e=t;return e})();var fj=(()=>{let t=class t{static withConfig(r){return{ngModule:t,providers:[{provide:GD,useValue:r.callSetDisabledState??WD}]}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=wr({type:t}),t.\u0275inj=Sr({imports:[Lfe]});let e=t;return e})();function dj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dj(Object(n),!0).forEach(function(r){dr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cg(e){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(e)}function Afe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vfe(e,t,n){return t&&pj(e.prototype,t),n&&pj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uz(e,t){return _fe(e)||Tfe(e,t)||Rj(e,t)||Ffe()}function w5(e){return Nfe(e)||kfe(e)||Rj(e)||Ife()}function Nfe(e){if(Array.isArray(e))return JD(e)}function _fe(e){if(Array.isArray(e))return e}function kfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Tfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(c){o=!0,s=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function Rj(e,t){if(e){if(typeof e=="string")return JD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JD(e,t)}}function JD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ife(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ffe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hj=function(){},fz={},Oj={},Pj=null,$j={mark:hj,measure:hj};try{typeof window<"u"&&(fz=window),typeof document<"u"&&(Oj=document),typeof MutationObserver<"u"&&(Pj=MutationObserver),typeof performance<"u"&&($j=performance)}catch{}var Rfe=fz.navigator||{},mj=Rfe.userAgent,gj=mj===void 0?"":mj,y3=fz,ln=Oj,vj=Pj,lg=$j,IWe=!!y3.document,Zs=!!ln.documentElement&&!!ln.head&&typeof ln.addEventListener=="function"&&typeof ln.createElement=="function",Bj=~gj.indexOf("MSIE")||~gj.indexOf("Trident/"),ug,fg,dg,pg,hg,Xs="___FONT_AWESOME___",ez=16,Uj="fa",jj="svg-inline--fa",ul="data-fa-i2svg",tz="data-fa-pseudo-element",Ofe="data-fa-pseudo-element-pending",dz="data-prefix",pz="data-icon",yj="fontawesome-i2svg",Pfe="async",$fe=["HTML","HEAD","STYLE","SCRIPT"],qj=function(){try{return!0}catch{return!1}}(),cn="classic",Vn="sharp",hz=[cn,Vn];function S5(e){return new Proxy(e,{get:function(n,r){return r in n?n[r]:n[cn]}})}var y5=S5((ug={},dr(ug,cn,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),dr(ug,Vn,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),ug)),x5=S5((fg={},dr(fg,cn,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),dr(fg,Vn,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),fg)),C5=S5((dg={},dr(dg,cn,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),dr(dg,Vn,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),dg)),Bfe=S5((pg={},dr(pg,cn,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),dr(pg,Vn,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),pg)),Ufe=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,Gj="fa-layers-text",jfe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,qfe=S5((hg={},dr(hg,cn,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),dr(hg,Vn,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),hg)),Wj=[1,2,3,4,5,6,7,8,9,10],Gfe=Wj.concat([11,12,13,14,15,16,17,18,19,20]),Wfe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],cl={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},b5=new Set;Object.keys(x5[cn]).map(b5.add.bind(b5));Object.keys(x5[Vn]).map(b5.add.bind(b5));var Yfe=[].concat(hz,w5(b5),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",cl.GROUP,cl.SWAP_OPACITY,cl.PRIMARY,cl.SECONDARY]).concat(Wj.map(function(e){return"".concat(e,"x")})).concat(Gfe.map(function(e){return"w-".concat(e)})),g5=y3.FontAwesomeConfig||{};function Xfe(e){var t=ln.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function Qfe(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}ln&&typeof ln.querySelector=="function"&&(xj=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]],xj.forEach(function(e){var t=uz(e,2),n=t[0],r=t[1],i=Qfe(Xfe(n));i!=null&&(g5[r]=i)}));var xj,Yj={styleDefault:"solid",familyDefault:"classic",cssPrefix:Uj,replacementClass:jj,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};g5.familyPrefix&&(g5.cssPrefix=g5.familyPrefix);var I6=ye(ye({},Yj),g5);I6.autoReplaceSvg||(I6.observeMutations=!1);var He={};Object.keys(Yj).forEach(function(e){Object.defineProperty(He,e,{enumerable:!0,set:function(n){I6[e]=n,v5.forEach(function(r){return r(He)})},get:function(){return I6[e]}})});Object.defineProperty(He,"familyPrefix",{enumerable:!0,set:function(t){I6.cssPrefix=t,v5.forEach(function(n){return n(He)})},get:function(){return I6.cssPrefix}});y3.FontAwesomeConfig=He;var v5=[];function Kfe(e){return v5.push(e),function(){v5.splice(v5.indexOf(e),1)}}var v3=ez,Ta={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Zfe(e){if(!(!e||!Zs)){var t=ln.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=ln.head.childNodes,r=null,i=n.length-1;i>-1;i--){var o=n[i],a=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(r=o)}return ln.head.insertBefore(t,r),e}}var Jfe="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function M5(){for(var e=12,t="";e-- >0;)t+=Jfe[Math.random()*62|0];return t}function F6(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function mz(e){return e.classList?F6(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function Xj(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function e8e(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,'="').concat(Xj(e[n]),'" ')},"").trim()}function wg(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")},"")}function gz(e){return e.size!==Ta.size||e.x!==Ta.x||e.y!==Ta.y||e.rotate!==Ta.rotate||e.flipX||e.flipY}function t8e(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(t.x*32,", ").concat(t.y*32,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)"),c={transform:"".concat(o," ").concat(a," ").concat(s)},l={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:c,path:l}}function n8e(e){var t=e.transform,n=e.width,r=n===void 0?ez:n,i=e.height,o=i===void 0?ez:i,a=e.startCentered,s=a===void 0?!1:a,c="";return s&&Bj?c+="translate(".concat(t.x/v3-r/2,"em, ").concat(t.y/v3-o/2,"em) "):s?c+="translate(calc(-50% + ".concat(t.x/v3,"em), calc(-50% + ").concat(t.y/v3,"em)) "):c+="translate(".concat(t.x/v3,"em, ").concat(t.y/v3,"em) "),c+="scale(".concat(t.size/v3*(t.flipX?-1:1),", ").concat(t.size/v3*(t.flipY?-1:1),") "),c+="rotate(".concat(t.rotate,"deg) "),c}var r8e=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function Qj(){var e=Uj,t=jj,n=He.cssPrefix,r=He.replacementClass,i=r8e;if(n!==e||r!==t){var o=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(o,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(s,".".concat(r))}return i}var Cj=!1;function XD(){He.autoAddCss&&!Cj&&(Zfe(Qj()),Cj=!0)}var i8e={mixout:function(){return{dom:{css:Qj,insertCss:XD}}},hooks:function(){return{beforeDOMElementCreation:function(){XD()},beforeI2svg:function(){XD()}}}},Qs=y3||{};Qs[Xs]||(Qs[Xs]={});Qs[Xs].styles||(Qs[Xs].styles={});Qs[Xs].hooks||(Qs[Xs].hooks={});Qs[Xs].shims||(Qs[Xs].shims=[]);var z2=Qs[Xs],Kj=[],o8e=function e(){ln.removeEventListener("DOMContentLoaded",e),bg=1,Kj.map(function(t){return t()})},bg=!1;Zs&&(bg=(ln.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ln.readyState),bg||ln.addEventListener("DOMContentLoaded",o8e));function a8e(e){Zs&&(bg?setTimeout(e,0):Kj.push(e))}function E5(e){var t=e.tag,n=e.attributes,r=n===void 0?{}:n,i=e.children,o=i===void 0?[]:i;return typeof e=="string"?Xj(e):"<".concat(t," ").concat(e8e(r),">").concat(o.map(E5).join(""),"</").concat(t,">")}function bj(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}var s8e=function(t,n){return function(r,i,o,a){return t.call(n,r,i,o,a)}},QD=function(t,n,r,i){var o=Object.keys(t),a=o.length,s=i!==void 0?s8e(n,i):n,c,l,u;for(r===void 0?(c=1,u=t[o[0]]):(c=0,u=r);c<a;c++)l=o[c],u=s(u,t[l],l,t);return u};function c8e(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);(o&64512)==56320?t.push(((i&1023)<<10)+(o&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}function nz(e){var t=c8e(e);return t.length===1?t[0].toString(16):null}function l8e(e,t){var n=e.length,r=e.charCodeAt(t),i;return r>=55296&&r<=56319&&n>t+1&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function Mj(e){return Object.keys(e).reduce(function(t,n){var r=e[n],i=!!r.icon;return i?t[r.iconName]=r.icon:t[n]=r,t},{})}function rz(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,o=Mj(t);typeof z2.hooks.addPack=="function"&&!i?z2.hooks.addPack(e,Mj(t)):z2.styles[e]=ye(ye({},z2.styles[e]||{}),o),e==="fas"&&rz("fa",t)}var mg,gg,vg,_6=z2.styles,u8e=z2.shims,f8e=(mg={},dr(mg,cn,Object.values(C5[cn])),dr(mg,Vn,Object.values(C5[Vn])),mg),vz=null,Zj={},Jj={},eq={},tq={},nq={},d8e=(gg={},dr(gg,cn,Object.keys(y5[cn])),dr(gg,Vn,Object.keys(y5[Vn])),gg);function p8e(e){return~Yfe.indexOf(e)}function h8e(e,t){var n=t.split("-"),r=n[0],i=n.slice(1).join("-");return r===e&&i!==""&&!p8e(i)?i:null}var rq=function(){var t=function(o){return QD(_6,function(a,s,c){return a[c]=QD(s,o,{}),a},{})};Zj=t(function(i,o,a){if(o[3]&&(i[o[3]]=a),o[2]){var s=o[2].filter(function(c){return typeof c=="number"});s.forEach(function(c){i[c.toString(16)]=a})}return i}),Jj=t(function(i,o,a){if(i[a]=a,o[2]){var s=o[2].filter(function(c){return typeof c=="string"});s.forEach(function(c){i[c]=a})}return i}),nq=t(function(i,o,a){var s=o[2];return i[a]=a,s.forEach(function(c){i[c]=a}),i});var n="far"in _6||He.autoFetchSvg,r=QD(u8e,function(i,o){var a=o[0],s=o[1],c=o[2];return s==="far"&&!n&&(s="fas"),typeof a=="string"&&(i.names[a]={prefix:s,iconName:c}),typeof a=="number"&&(i.unicodes[a.toString(16)]={prefix:s,iconName:c}),i},{names:{},unicodes:{}});eq=r.names,tq=r.unicodes,vz=Sg(He.styleDefault,{family:He.familyDefault})};Kfe(function(e){vz=Sg(e.styleDefault,{family:He.familyDefault})});rq();function yz(e,t){return(Zj[e]||{})[t]}function m8e(e,t){return(Jj[e]||{})[t]}function ll(e,t){return(nq[e]||{})[t]}function iq(e){return eq[e]||{prefix:null,iconName:null}}function g8e(e){var t=tq[e],n=yz("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function x3(){return vz}var xz=function(){return{prefix:null,iconName:null,rest:[]}};function Sg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.family,r=n===void 0?cn:n,i=y5[r][e],o=x5[r][e]||x5[r][i],a=e in z2.styles?e:null;return o||a||null}var wj=(vg={},dr(vg,cn,Object.keys(C5[cn])),dr(vg,Vn,Object.keys(C5[Vn])),vg);function Eg(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,i=r===void 0?!1:r,o=(t={},dr(t,cn,"".concat(He.cssPrefix,"-").concat(cn)),dr(t,Vn,"".concat(He.cssPrefix,"-").concat(Vn)),t),a=null,s=cn;(e.includes(o[cn])||e.some(function(l){return wj[cn].includes(l)}))&&(s=cn),(e.includes(o[Vn])||e.some(function(l){return wj[Vn].includes(l)}))&&(s=Vn);var c=e.reduce(function(l,u){var f=h8e(He.cssPrefix,u);if(_6[u]?(u=f8e[s].includes(u)?Bfe[s][u]:u,a=u,l.prefix=u):d8e[s].indexOf(u)>-1?(a=u,l.prefix=Sg(u,{family:s})):f?l.iconName=f:u!==He.replacementClass&&u!==o[cn]&&u!==o[Vn]&&l.rest.push(u),!i&&l.prefix&&l.iconName){var d=a==="fa"?iq(l.iconName):{},p=ll(l.prefix,l.iconName);d.prefix&&(a=null),l.iconName=d.iconName||p||l.iconName,l.prefix=d.prefix||l.prefix,l.prefix==="far"&&!_6.far&&_6.fas&&!He.autoFetchSvg&&(l.prefix="fas")}return l},xz());return(e.includes("fa-brands")||e.includes("fab"))&&(c.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(c.prefix="fad"),!c.prefix&&s===Vn&&(_6.fass||He.autoFetchSvg)&&(c.prefix="fass",c.iconName=ll(c.prefix,c.iconName)||c.iconName),(c.prefix==="fa"||a==="fa")&&(c.prefix=x3()||"fas"),c}var v8e=function(){function e(){Afe(this,e),this.definitions={}}return Vfe(e,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.reduce(this._pullDefinitions,{});Object.keys(a).forEach(function(s){n.definitions[s]=ye(ye({},n.definitions[s]||{}),a[s]),rz(s,a[s]);var c=C5[cn][s];c&&rz(c,a[s]),rq()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(o){var a=i[o],s=a.prefix,c=a.iconName,l=a.icon,u=l[2];n[s]||(n[s]={}),u.length>0&&u.forEach(function(f){typeof f=="string"&&(n[s][f]=l)}),n[s][c]=l}),n}}]),e}(),Sj=[],k6={},T6={},y8e=Object.keys(T6);function x8e(e,t){var n=t.mixoutsTo;return Sj=e,k6={},Object.keys(T6).forEach(function(r){y8e.indexOf(r)===-1&&delete T6[r]}),Sj.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(a){typeof i[a]=="function"&&(n[a]=i[a]),Cg(i[a])==="object"&&Object.keys(i[a]).forEach(function(s){n[a]||(n[a]={}),n[a][s]=i[a][s]})}),r.hooks){var o=r.hooks();Object.keys(o).forEach(function(a){k6[a]||(k6[a]=[]),k6[a].push(o[a])})}r.provides&&r.provides(T6)}),n}function iz(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=k6[e]||[];return o.forEach(function(a){t=a.apply(null,[t].concat(r))}),t}function fl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=k6[e]||[];i.forEach(function(o){o.apply(null,n)})}function Ks(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return T6[e]?T6[e].apply(null,t):void 0}function oz(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,n=e.prefix||x3();if(t)return t=ll(n,t)||t,bj(oq.definitions,n,t)||bj(z2.styles,n,t)}var oq=new v8e,C8e=function(){He.autoReplaceSvg=!1,He.observeMutations=!1,fl("noAuto")},b8e={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Zs?(fl("beforeI2svg",t),Ks("pseudoElements2svg",t),Ks("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot;He.autoReplaceSvg===!1&&(He.autoReplaceSvg=!0),He.observeMutations=!0,a8e(function(){w8e({autoReplaceSvgRoot:n}),fl("watch",t)})}},M8e={icon:function(t){if(t===null)return null;if(Cg(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:ll(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var n=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],r=Sg(t[0]);return{prefix:r,iconName:ll(r,n)||n}}if(typeof t=="string"&&(t.indexOf("".concat(He.cssPrefix,"-"))>-1||t.match(Ufe))){var i=Eg(t.split(" "),{skipLookups:!0});return{prefix:i.prefix||x3(),iconName:ll(i.prefix,i.iconName)||i.iconName}}if(typeof t=="string"){var o=x3();return{prefix:o,iconName:ll(o,t)||t}}}},ao={noAuto:C8e,config:He,dom:b8e,parse:M8e,library:oq,findIconDefinition:oz,toHtml:E5},w8e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot,r=n===void 0?ln:n;(Object.keys(z2.styles).length>0||He.autoFetchSvg)&&Zs&&He.autoReplaceSvg&&ao.dom.i2svg({node:r})};function Dg(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(r){return E5(r)})}}),Object.defineProperty(e,"node",{get:function(){if(Zs){var r=ln.createElement("div");return r.innerHTML=e.html,r.children}}}),e}function S8e(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,o=e.styles,a=e.transform;if(gz(a)&&n.found&&!r.found){var s=n.width,c=n.height,l={x:s/c/2,y:.5};i.style=wg(ye(ye({},o),{},{"transform-origin":"".concat(l.x+a.x/16,"em ").concat(l.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}function E8e(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,o=e.symbol,a=o===!0?"".concat(t,"-").concat(He.cssPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ye(ye({},i),{},{id:a}),children:r}]}]}function Cz(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,o=e.iconName,a=e.transform,s=e.symbol,c=e.title,l=e.maskId,u=e.titleId,f=e.extra,d=e.watchable,p=d===void 0?!1:d,h=r.found?r:n,m=h.width,g=h.height,v=i==="fak",y=[He.replacementClass,o?"".concat(He.cssPrefix,"-").concat(o):""].filter(function(D){return f.classes.indexOf(D)===-1}).filter(function(D){return D!==""||!!D}).concat(f.classes).join(" "),C={children:[],attributes:ye(ye({},f.attributes),{},{"data-prefix":i,"data-icon":o,class:y,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},b=v&&!~f.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};p&&(C.attributes[ul]=""),c&&(C.children.push({tag:"title",attributes:{id:C.attributes["aria-labelledby"]||"title-".concat(u||M5())},children:[c]}),delete C.attributes.title);var M=ye(ye({},C),{},{prefix:i,iconName:o,main:n,mask:r,maskId:l,transform:a,symbol:s,styles:ye(ye({},b),f.styles)}),S=r.found&&n.found?Ks("generateAbstractMask",M)||{children:[],attributes:{}}:Ks("generateAbstractIcon",M)||{children:[],attributes:{}},w=S.children,E=S.attributes;return M.children=w,M.attributes=E,s?E8e(M):S8e(M)}function Ej(e){var t=e.content,n=e.width,r=e.height,i=e.transform,o=e.title,a=e.extra,s=e.watchable,c=s===void 0?!1:s,l=ye(ye(ye({},a.attributes),o?{title:o}:{}),{},{class:a.classes.join(" ")});c&&(l[ul]="");var u=ye({},a.styles);gz(i)&&(u.transform=n8e({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var f=wg(u);f.length>0&&(l.style=f);var d=[];return d.push({tag:"span",attributes:l,children:[t]}),o&&d.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),d}function D8e(e){var t=e.content,n=e.title,r=e.extra,i=ye(ye(ye({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),o=wg(r.styles);o.length>0&&(i.style=o);var a=[];return a.push({tag:"span",attributes:i,children:[t]}),n&&a.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),a}var KD=z2.styles;function az(e){var t=e[0],n=e[1],r=e.slice(4),i=uz(r,1),o=i[0],a=null;return Array.isArray(o)?a={tag:"g",attributes:{class:"".concat(He.cssPrefix,"-").concat(cl.GROUP)},children:[{tag:"path",attributes:{class:"".concat(He.cssPrefix,"-").concat(cl.SECONDARY),fill:"currentColor",d:o[0]}},{tag:"path",attributes:{class:"".concat(He.cssPrefix,"-").concat(cl.PRIMARY),fill:"currentColor",d:o[1]}}]}:a={tag:"path",attributes:{fill:"currentColor",d:o}},{found:!0,width:t,height:n,icon:a}}var z8e={found:!1,width:512,height:512};function H8e(e,t){!qj&&!He.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function sz(e,t){var n=t;return t==="fa"&&He.styleDefault!==null&&(t=x3()),new Promise(function(r,i){var o={found:!1,width:512,height:512,icon:Ks("missingIconAbstract")||{}};if(n==="fa"){var a=iq(e)||{};e=a.iconName||e,t=a.prefix||t}if(e&&t&&KD[t]&&KD[t][e]){var s=KD[t][e];return r(az(s))}H8e(e,t),r(ye(ye({},z8e),{},{icon:He.showMissingIcons&&e?Ks("missingIconAbstract")||{}:{}}))})}var Dj=function(){},cz=He.measurePerformance&&lg&&lg.mark&&lg.measure?lg:{mark:Dj,measure:Dj},m5='FA "6.5.1"',L8e=function(t){return cz.mark("".concat(m5," ").concat(t," begins")),function(){return aq(t)}},aq=function(t){cz.mark("".concat(m5," ").concat(t," ends")),cz.measure("".concat(m5," ").concat(t),"".concat(m5," ").concat(t," begins"),"".concat(m5," ").concat(t," ends"))},bz={begin:L8e,end:aq},yg=function(){};function zj(e){var t=e.getAttribute?e.getAttribute(ul):null;return typeof t=="string"}function A8e(e){var t=e.getAttribute?e.getAttribute(dz):null,n=e.getAttribute?e.getAttribute(pz):null;return t&&n}function V8e(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(He.replacementClass)}function N8e(){if(He.autoReplaceSvg===!0)return xg.replace;var e=xg[He.autoReplaceSvg];return e||xg.replace}function _8e(e){return ln.createElementNS("http://www.w3.org/2000/svg",e)}function k8e(e){return ln.createElement(e)}function sq(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.ceFn,r=n===void 0?e.tag==="svg"?_8e:k8e:n;if(typeof e=="string")return ln.createTextNode(e);var i=r(e.tag);Object.keys(e.attributes||[]).forEach(function(a){i.setAttribute(a,e.attributes[a])});var o=e.children||[];return o.forEach(function(a){i.appendChild(sq(a,{ceFn:r}))}),i}function T8e(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var xg={replace:function(t){var n=t[0];if(n.parentNode)if(t[1].forEach(function(i){n.parentNode.insertBefore(sq(i),n)}),n.getAttribute(ul)===null&&He.keepOriginalSource){var r=ln.createComment(T8e(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(t){var n=t[0],r=t[1];if(~mz(n).indexOf(He.replacementClass))return xg.replace(t);var i=new RegExp("".concat(He.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var o=r[0].attributes.class.split(" ").reduce(function(s,c){return c===He.replacementClass||c.match(i)?s.toSvg.push(c):s.toNode.push(c),s},{toNode:[],toSvg:[]});r[0].attributes.class=o.toSvg.join(" "),o.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",o.toNode.join(" "))}var a=r.map(function(s){return E5(s)}).join(`
`);n.setAttribute(ul,""),n.innerHTML=a}};function Hj(e){e()}function cq(e,t){var n=typeof t=="function"?t:yg;if(e.length===0)n();else{var r=Hj;He.mutateApproach===Pfe&&(r=y3.requestAnimationFrame||Hj),r(function(){var i=N8e(),o=bz.begin("mutate");e.map(i),o(),n()})}}var Mz=!1;function lq(){Mz=!0}function lz(){Mz=!1}var Mg=null;function Lj(e){if(vj&&He.observeMutations){var t=e.treeCallback,n=t===void 0?yg:t,r=e.nodeCallback,i=r===void 0?yg:r,o=e.pseudoElementsCallback,a=o===void 0?yg:o,s=e.observeMutationsRoot,c=s===void 0?ln:s;Mg=new vj(function(l){if(!Mz){var u=x3();F6(l).forEach(function(f){if(f.type==="childList"&&f.addedNodes.length>0&&!zj(f.addedNodes[0])&&(He.searchPseudoElements&&a(f.target),n(f.target)),f.type==="attributes"&&f.target.parentNode&&He.searchPseudoElements&&a(f.target.parentNode),f.type==="attributes"&&zj(f.target)&&~Wfe.indexOf(f.attributeName))if(f.attributeName==="class"&&A8e(f.target)){var d=Eg(mz(f.target)),p=d.prefix,h=d.iconName;f.target.setAttribute(dz,p||u),h&&f.target.setAttribute(pz,h)}else V8e(f.target)&&i(f.target)})}}),Zs&&Mg.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function I8e(){Mg&&Mg.disconnect()}function F8e(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce(function(r,i){var o=i.split(":"),a=o[0],s=o.slice(1);return a&&s.length>0&&(r[a]=s.join(":").trim()),r},{})),n}function R8e(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=e.innerText!==void 0?e.innerText.trim():"",i=Eg(mz(e));return i.prefix||(i.prefix=x3()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=m8e(i.prefix,e.innerText)||yz(i.prefix,nz(e.innerText))),!i.iconName&&He.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function O8e(e){var t=F6(e.attributes).reduce(function(i,o){return i.name!=="class"&&i.name!=="style"&&(i[o.name]=o.value),i},{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return He.autoA11y&&(n?t["aria-labelledby"]="".concat(He.replacementClass,"-title-").concat(r||M5()):(t["aria-hidden"]="true",t.focusable="false")),t}function P8e(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ta,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Aj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=R8e(e),r=n.iconName,i=n.prefix,o=n.rest,a=O8e(e),s=iz("parseNodeAttributes",{},e),c=t.styleParser?F8e(e):[];return ye({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:Ta,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:o,styles:c,attributes:a}},s)}var $8e=z2.styles;function uq(e){var t=He.autoReplaceSvg==="nest"?Aj(e,{styleParser:!1}):Aj(e);return~t.extra.classes.indexOf(Gj)?Ks("generateLayersText",e,t):Ks("generateSvgReplacementMutation",e,t)}var C3=new Set;hz.map(function(e){C3.add("fa-".concat(e))});Object.keys(y5[cn]).map(C3.add.bind(C3));Object.keys(y5[Vn]).map(C3.add.bind(C3));C3=w5(C3);function Vj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Zs)return Promise.resolve();var n=ln.documentElement.classList,r=function(f){return n.add("".concat(yj,"-").concat(f))},i=function(f){return n.remove("".concat(yj,"-").concat(f))},o=He.autoFetchSvg?C3:hz.map(function(u){return"fa-".concat(u)}).concat(Object.keys($8e));o.includes("fa")||o.push("fa");var a=[".".concat(Gj,":not([").concat(ul,"])")].concat(o.map(function(u){return".".concat(u,":not([").concat(ul,"])")})).join(", ");if(a.length===0)return Promise.resolve();var s=[];try{s=F6(e.querySelectorAll(a))}catch{}if(s.length>0)r("pending"),i("complete");else return Promise.resolve();var c=bz.begin("onTree"),l=s.reduce(function(u,f){try{var d=uq(f);d&&u.push(d)}catch(p){qj||p.name==="MissingIcon"&&console.error(p)}return u},[]);return new Promise(function(u,f){Promise.all(l).then(function(d){cq(d,function(){r("active"),r("complete"),i("pending"),typeof t=="function"&&t(),c(),u()})}).catch(function(d){c(),f(d)})})}function B8e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;uq(e).then(function(n){n&&cq([n],t)})}function U8e(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(t||{}).icon?t:oz(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:oz(i||{})),e(r,ye(ye({},n),{},{mask:i}))}}var j8e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?Ta:r,o=n.symbol,a=o===void 0?!1:o,s=n.mask,c=s===void 0?null:s,l=n.maskId,u=l===void 0?null:l,f=n.title,d=f===void 0?null:f,p=n.titleId,h=p===void 0?null:p,m=n.classes,g=m===void 0?[]:m,v=n.attributes,y=v===void 0?{}:v,C=n.styles,b=C===void 0?{}:C;if(t){var M=t.prefix,S=t.iconName,w=t.icon;return Dg(ye({type:"icon"},t),function(){return fl("beforeDOMElementCreation",{iconDefinition:t,params:n}),He.autoA11y&&(d?y["aria-labelledby"]="".concat(He.replacementClass,"-title-").concat(h||M5()):(y["aria-hidden"]="true",y.focusable="false")),Cz({icons:{main:az(w),mask:c?az(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:M,iconName:S,transform:ye(ye({},Ta),i),symbol:a,title:d,maskId:u,titleId:h,extra:{attributes:y,styles:b,classes:g}})})}},q8e={mixout:function(){return{icon:U8e(j8e)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=Vj,n.nodeCallback=B8e,n}}},provides:function(t){t.i2svg=function(n){var r=n.node,i=r===void 0?ln:r,o=n.callback,a=o===void 0?function(){}:o;return Vj(i,a)},t.generateSvgReplacementMutation=function(n,r){var i=r.iconName,o=r.title,a=r.titleId,s=r.prefix,c=r.transform,l=r.symbol,u=r.mask,f=r.maskId,d=r.extra;return new Promise(function(p,h){Promise.all([sz(i,s),u.iconName?sz(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=uz(m,2),v=g[0],y=g[1];p([n,Cz({icons:{main:v,mask:y},prefix:s,iconName:i,transform:c,symbol:l,maskId:f,title:o,titleId:a,extra:d,watchable:!0})])}).catch(h)})},t.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,o=n.main,a=n.transform,s=n.styles,c=wg(s);c.length>0&&(i.style=c);var l;return gz(a)&&(l=Ks("generateAbstractTransformGrouping",{main:o,transform:a,containerWidth:o.width,iconWidth:o.width})),r.push(l||o.icon),{children:r,attributes:i}}}},G8e={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,o=i===void 0?[]:i;return Dg({type:"layer"},function(){fl("beforeDOMElementCreation",{assembler:n,params:r});var a=[];return n(function(s){Array.isArray(s)?s.map(function(c){a=a.concat(c.abstract)}):a=a.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(He.cssPrefix,"-layers")].concat(w5(o)).join(" ")},children:a}]})}}}},W8e={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,o=i===void 0?null:i,a=r.classes,s=a===void 0?[]:a,c=r.attributes,l=c===void 0?{}:c,u=r.styles,f=u===void 0?{}:u;return Dg({type:"counter",content:n},function(){return fl("beforeDOMElementCreation",{content:n,params:r}),D8e({content:n.toString(),title:o,extra:{attributes:l,styles:f,classes:["".concat(He.cssPrefix,"-layers-counter")].concat(w5(s))}})})}}}},Y8e={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,o=i===void 0?Ta:i,a=r.title,s=a===void 0?null:a,c=r.classes,l=c===void 0?[]:c,u=r.attributes,f=u===void 0?{}:u,d=r.styles,p=d===void 0?{}:d;return Dg({type:"text",content:n},function(){return fl("beforeDOMElementCreation",{content:n,params:r}),Ej({content:n,transform:ye(ye({},Ta),o),title:s,extra:{attributes:f,styles:p,classes:["".concat(He.cssPrefix,"-layers-text")].concat(w5(l))}})})}}},provides:function(t){t.generateLayersText=function(n,r){var i=r.title,o=r.transform,a=r.extra,s=null,c=null;if(Bj){var l=parseInt(getComputedStyle(n).fontSize,10),u=n.getBoundingClientRect();s=u.width/l,c=u.height/l}return He.autoA11y&&!i&&(a.attributes["aria-hidden"]="true"),Promise.resolve([n,Ej({content:n.innerHTML,width:s,height:c,transform:o,title:i,extra:a,watchable:!0})])}}},X8e=new RegExp('"',"ug"),Nj=[1105920,1112319];function Q8e(e){var t=e.replace(X8e,""),n=l8e(t,0),r=n>=Nj[0]&&n<=Nj[1],i=t.length===2?t[0]===t[1]:!1;return{value:nz(i?t[0]:t),isSecondary:r||i}}function _j(e,t){var n="".concat(Ofe).concat(t.replace(":","-"));return new Promise(function(r,i){if(e.getAttribute(n)!==null)return r();var o=F6(e.children),a=o.filter(function(w){return w.getAttribute(tz)===t})[0],s=y3.getComputedStyle(e,t),c=s.getPropertyValue("font-family").match(jfe),l=s.getPropertyValue("font-weight"),u=s.getPropertyValue("content");if(a&&!c)return e.removeChild(a),r();if(c&&u!=="none"&&u!==""){var f=s.getPropertyValue("content"),d=~["Sharp"].indexOf(c[2])?Vn:cn,p=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?x5[d][c[2].toLowerCase()]:qfe[d][l],h=Q8e(f),m=h.value,g=h.isSecondary,v=c[0].startsWith("FontAwesome"),y=yz(p,m),C=y;if(v){var b=g8e(m);b.iconName&&b.prefix&&(y=b.iconName,p=b.prefix)}if(y&&!g&&(!a||a.getAttribute(dz)!==p||a.getAttribute(pz)!==C)){e.setAttribute(n,C),a&&e.removeChild(a);var M=P8e(),S=M.extra;S.attributes[tz]=t,sz(y,p).then(function(w){var E=Cz(ye(ye({},M),{},{icons:{main:w,mask:xz()},prefix:p,iconName:C,extra:S,watchable:!0})),D=ln.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(D,e.firstChild):e.appendChild(D),D.outerHTML=E.map(function(L){return E5(L)}).join(`
`),e.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function K8e(e){return Promise.all([_j(e,"::before"),_j(e,"::after")])}function Z8e(e){return e.parentNode!==document.head&&!~$fe.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(tz)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function kj(e){if(Zs)return new Promise(function(t,n){var r=F6(e.querySelectorAll("*")).filter(Z8e).map(K8e),i=bz.begin("searchPseudoElements");lq(),Promise.all(r).then(function(){i(),lz(),t()}).catch(function(){i(),lz(),n()})})}var J8e={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=kj,n}}},provides:function(t){t.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?ln:r;He.searchPseudoElements&&kj(i)}}},Tj=!1,e5e={mixout:function(){return{dom:{unwatch:function(){lq(),Tj=!0}}}},hooks:function(){return{bootstrap:function(){Lj(iz("mutationObserverCallbacks",{}))},noAuto:function(){I8e()},watch:function(n){var r=n.observeMutationsRoot;Tj?lz():Lj(iz("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},Ij=function(t){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(r,i){var o=i.toLowerCase().split("-"),a=o[0],s=o.slice(1).join("-");if(a&&s==="h")return r.flipX=!0,r;if(a&&s==="v")return r.flipY=!0,r;if(s=parseFloat(s),isNaN(s))return r;switch(a){case"grow":r.size=r.size+s;break;case"shrink":r.size=r.size-s;break;case"left":r.x=r.x-s;break;case"right":r.x=r.x+s;break;case"up":r.y=r.y-s;break;case"down":r.y=r.y+s;break;case"rotate":r.rotate=r.rotate+s;break}return r},n)},t5e={mixout:function(){return{parse:{transform:function(n){return Ij(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=Ij(i)),n}}},provides:function(t){t.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,o=n.containerWidth,a=n.iconWidth,s={transform:"translate(".concat(o/2," 256)")},c="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),f={transform:"".concat(c," ").concat(l," ").concat(u)},d={transform:"translate(".concat(a/2*-1," -256)")},p={outer:s,inner:f,path:d};return{tag:"g",attributes:ye({},p.outer),children:[{tag:"g",attributes:ye({},p.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:ye(ye({},r.icon.attributes),p.path)}]}]}}}},ZD={x:0,y:0,width:"100%",height:"100%"};function Fj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function n5e(e){return e.tag==="g"?e.children:[e]}var r5e={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),o=i?Eg(i.split(" ").map(function(a){return a.trim()})):xz();return o.prefix||(o.prefix=x3()),n.mask=o,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(t){t.generateAbstractMask=function(n){var r=n.children,i=n.attributes,o=n.main,a=n.mask,s=n.maskId,c=n.transform,l=o.width,u=o.icon,f=a.width,d=a.icon,p=t8e({transform:c,containerWidth:f,iconWidth:l}),h={tag:"rect",attributes:ye(ye({},ZD),{},{fill:"white"})},m=u.children?{children:u.children.map(Fj)}:{},g={tag:"g",attributes:ye({},p.inner),children:[Fj(ye({tag:u.tag,attributes:ye(ye({},u.attributes),p.path)},m))]},v={tag:"g",attributes:ye({},p.outer),children:[g]},y="mask-".concat(s||M5()),C="clip-".concat(s||M5()),b={tag:"mask",attributes:ye(ye({},ZD),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,v]},M={tag:"defs",children:[{tag:"clipPath",attributes:{id:C},children:n5e(d)},b]};return r.push(M,{tag:"rect",attributes:ye({fill:"currentColor","clip-path":"url(#".concat(C,")"),mask:"url(#".concat(y,")")},ZD)}),{children:r,attributes:i}}}},i5e={provides:function(t){var n=!1;y3.matchMedia&&(n=y3.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},o={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:ye(ye({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var a=ye(ye({},o),{},{attributeName:"opacity"}),s={tag:"circle",attributes:ye(ye({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||s.children.push({tag:"animate",attributes:ye(ye({},o),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:ye(ye({},a),{},{values:"1;0;1;1;0;1;"})}),r.push(s),r.push({tag:"path",attributes:ye(ye({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:ye(ye({},a),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:ye(ye({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:ye(ye({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},o5e={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),o=i===null?!1:i===""?!0:i;return n.symbol=o,n}}}},a5e=[i8e,q8e,G8e,W8e,Y8e,J8e,e5e,t5e,r5e,i5e,o5e];x8e(a5e,{mixoutsTo:ao});var FWe=ao.noAuto,RWe=ao.config,OWe=ao.library,PWe=ao.dom,fq=ao.parse,$We=ao.findIconDefinition,BWe=ao.toHtml,dq=ao.icon,UWe=ao.layer,s5e=ao.text,c5e=ao.counter;var l5e=["*"],u5e=e=>{throw new Error(`Could not find icon with iconName=${e.iconName} and prefix=${e.prefix} in the icon library.`)},f5e=()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")},d5e=e=>{let t={[`fa-${e.animation}`]:e.animation!=null&&!e.animation.startsWith("spin"),"fa-spin":e.animation==="spin"||e.animation==="spin-reverse","fa-spin-pulse":e.animation==="spin-pulse"||e.animation==="spin-pulse-reverse","fa-spin-reverse":e.animation==="spin-reverse"||e.animation==="spin-pulse-reverse","fa-pulse":e.animation==="spin-pulse"||e.animation==="spin-pulse-reverse","fa-fw":e.fixedWidth,"fa-border":e.border,"fa-inverse":e.inverse,"fa-layers-counter":e.counter,"fa-flip-horizontal":e.flip==="horizontal"||e.flip==="both","fa-flip-vertical":e.flip==="vertical"||e.flip==="both",[`fa-${e.size}`]:e.size!==null,[`fa-rotate-${e.rotate}`]:e.rotate!==null,[`fa-pull-${e.pull}`]:e.pull!==null,[`fa-stack-${e.stackItemSize}`]:e.stackItemSize!=null};return Object.keys(t).map(n=>t[n]?n:null).filter(n=>n)},p5e=e=>e.prefix!==void 0&&e.iconName!==void 0,h5e=(e,t)=>p5e(e)?e:typeof e=="string"?{prefix:t,iconName:e}:{prefix:e[0],iconName:e[1]},m5e=(()=>{let t=class t{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),g5e=(()=>{let t=class t{constructor(){this.definitions={}}addIcons(...r){for(let i of r){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(let o of i.icon[2])typeof o=="string"&&(this.definitions[i.prefix][o]=i)}}addIconPacks(...r){for(let i of r){let o=Object.keys(i).map(a=>i[a]);this.addIcons(...o)}}getIconDefinition(r,i){return r in this.definitions&&i in this.definitions[r]?this.definitions[r][i]:null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),v5e=(()=>{let t=class t{constructor(){this.stackItemSize="1x"}ngOnChanges(r){if("size"in r)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=Qt({type:t,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},standalone:!0,features:[_o]});let e=t;return e})(),y5e=(()=>{let t=class t{constructor(r,i){this.renderer=r,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(r){"size"in r&&(r.size.currentValue!=null&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${r.size.currentValue}`),r.size.previousValue!=null&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${r.size.previousValue}`))}};t.\u0275fac=function(i){return new(i||t)(q(to),q(Yr))},t.\u0275cmp=Le({type:t,selectors:[["fa-stack"]],inputs:{size:"size"},standalone:!0,features:[_o,n5],ngContentSelectors:l5e,decls:1,vars:0,template:function(i,o){i&1&&($B(),BB(0))},encapsulation:2});let e=t;return e})(),zg=(()=>{let t=class t{set spin(r){this.animation=r?"spin":void 0}set pulse(r){this.animation=r?"spin-pulse":void 0}constructor(r,i,o,a,s){this.sanitizer=r,this.config=i,this.iconLibrary=o,this.stackItem=a,this.classes=[],s!=null&&a==null&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(r){if(this.icon==null&&this.config.fallbackIcon==null){f5e();return}if(r){let i=this.icon!=null?this.icon:this.config.fallbackIcon,o=this.findIconDefinition(i);if(o!=null){let a=this.buildParams();this.renderIcon(o,a)}}}render(){this.ngOnChanges({})}findIconDefinition(r){let i=h5e(r,this.config.defaultPrefix);if("icon"in i)return i;let o=this.iconLibrary.getIconDefinition(i.prefix,i.iconName);return o??(u5e(i),null)}buildParams(){let r={flip:this.flip,animation:this.animation,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:typeof this.fixedWidth=="boolean"?this.fixedWidth:this.config.fixedWidth,stackItemSize:this.stackItem!=null?this.stackItem.stackItemSize:null},i=typeof this.transform=="string"?fq.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...d5e(r),...this.classes],mask:this.mask!=null?this.findIconDefinition(this.mask):null,styles:this.styles!=null?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(r,i){let o=dq(r,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(o.html.join(`
`))}};t.\u0275fac=function(i){return new(i||t)(q($D),q(m5e),q(g5e),q(v5e,8),q(y5e,8))},t.\u0275cmp=Le({type:t,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(i,o){i&2&&(aD("innerHTML",o.renderedIconHTML,W$),M6("title",o.title))},inputs:{icon:"icon",title:"title",animation:"animation",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},standalone:!0,features:[_o,n5],decls:0,vars:0,template:function(i,o){},encapsulation:2});let e=t;return e})();var pq=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=wr({type:t}),t.\u0275inj=Sr({});let e=t;return e})();var Ze="primary",P5=Symbol("RouteTitle"),zz=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function B6(e){return new zz(e)}function x5e(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],s=e[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function C5e(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Ia(e[n],t[n]))return!1;return!0}function Ia(e,t){let n=e?Hz(e):void 0,r=t?Hz(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!wq(e[i],t[i]))return!1;return!0}function Hz(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function wq(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function Sq(e){return e.length>0?e[e.length-1]:null}function S3(e){return qw(e)?e:m3(e)?tn(Promise.resolve(e)):se(e)}var b5e={exact:Dq,subset:zq},Eq={exact:M5e,subset:w5e,ignored:()=>!0};function mq(e,t,n){return b5e[n.paths](e.root,t.root,n.matrixParams)&&Eq[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function M5e(e,t){return Ia(e,t)}function Dq(e,t,n){if(!pl(e.segments,t.segments)||!Ag(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!Dq(e.children[r],t.children[r],n))return!1;return!0}function w5e(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>wq(e[n],t[n]))}function zq(e,t,n){return Hq(e,t,t.segments,n)}function Hq(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!pl(i,n)||t.hasChildren()||!Ag(i,n,r))}else if(e.segments.length===n.length){if(!pl(e.segments,n)||!Ag(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!zq(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!pl(e.segments,i)||!Ag(e.segments,i,r)||!e.children[Ze]?!1:Hq(e.children[Ze],t,o,r)}}function Ag(e,t,n){return t.every((r,i)=>Eq[n](e[i].parameters,r.parameters))}var b3=class{constructor(t=new It([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=B6(this.queryParams),this._queryParamMap}toString(){return D5e.serialize(this)}},It=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vg(this)}},dl=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=B6(this.parameters),this._parameterMap}toString(){return Aq(this)}};function S5e(e,t){return pl(e,t)&&e.every((n,r)=>Ia(n.parameters,t[r].parameters))}function pl(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function E5e(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===Ze&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==Ze&&(n=n.concat(t(i,r)))}),n}var $5=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>new N5,providedIn:"root"});let e=t;return e})(),N5=class{parse(t){let n=new Az(t);return new b3(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${D5(t.root,!0)}`,r=L5e(t.queryParams),i=typeof t.fragment=="string"?`#${z5e(t.fragment)}`:"";return`${n}${r}${i}`}},D5e=new N5;function Vg(e){return e.segments.map(t=>Aq(t)).join("/")}function D5(e,t){if(!e.hasChildren())return Vg(e);if(t){let n=e.children[Ze]?D5(e.children[Ze],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==Ze&&r.push(`${i}:${D5(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=E5e(e,(r,i)=>i===Ze?[D5(e.children[Ze],!1)]:[`${i}:${D5(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[Ze]!=null?`${Vg(e)}/${n[0]}`:`${Vg(e)}/(${n.join("//")})`}}function Lq(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hg(e){return Lq(e).replace(/%3B/gi,";")}function z5e(e){return encodeURI(e)}function Lz(e){return Lq(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ng(e){return decodeURIComponent(e)}function gq(e){return Ng(e.replace(/\+/g,"%20"))}function Aq(e){return`${Lz(e.path)}${H5e(e.parameters)}`}function H5e(e){return Object.entries(e).map(([t,n])=>`;${Lz(t)}=${Lz(n)}`).join("")}function L5e(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Hg(n)}=${Hg(i)}`).join("&"):`${Hg(n)}=${Hg(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var A5e=/^[^\/()?;#]+/;function wz(e){let t=e.match(A5e);return t?t[0]:""}var V5e=/^[^\/()?;=#]+/;function N5e(e){let t=e.match(V5e);return t?t[0]:""}var _5e=/^[^=?&#]+/;function k5e(e){let t=e.match(_5e);return t?t[0]:""}var T5e=/^[^&#]+/;function I5e(e){let t=e.match(T5e);return t?t[0]:""}var Az=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new It([],{}):new It([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Ze]=new It(t,n)),r}parseSegment(){let t=wz(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Ce(4009,!1);return this.capture(t),new dl(Ng(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=N5e(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=wz(this.remaining);i&&(r=i,this.capture(r))}t[Ng(n)]=Ng(r)}parseQueryParam(t){let n=k5e(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let a=I5e(this.remaining);a&&(r=a,this.capture(r))}let i=gq(n),o=gq(r);if(t.hasOwnProperty(i)){let a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=wz(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Ce(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Ze);let a=this.parseChildren();n[o]=Object.keys(a).length===1?a[Ze]:new It([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Ce(4011,!1)}};function Vq(e){return e.segments.length>0?new It([],{[Ze]:e}):e}function Nq(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=Nq(i);if(r===Ze&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))t[a]=s;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new It(e.segments,t);return F5e(n)}function F5e(e){if(e.numberOfChildren===1&&e.children[Ze]){let t=e.children[Ze];return new It(e.segments.concat(t.segments),t.children)}return e}function U6(e){return e instanceof b3}function R5e(e,t,n=null,r=null){let i=_q(e);return kq(i,t,n,r)}function _q(e){let t;function n(o){let a={};for(let c of o.children){let l=n(c);a[c.outlet]=l}let s=new It(o.url,a);return o===e&&(t=s),s}let r=n(e.root),i=Vq(r);return t??i}function kq(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return Sz(i,i,i,n,r);let o=O5e(t);if(o.toRoot())return Sz(i,i,new It([],{}),n,r);let a=P5e(o,i,e),s=a.processChildren?L5(a.segmentGroup,a.index,o.commands):Iq(a.segmentGroup,a.index,o.commands);return Sz(i,a.segmentGroup,s,n,r)}function _g(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function _5(e){return typeof e=="object"&&e!=null&&e.outlets}function Sz(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let a;e===t?a=n:a=Tq(e,t,n);let s=Vq(Nq(a));return new b3(s,o,i)}function Tq(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=Tq(o,t,n)}),new It(e.segments,r)}var kg=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&_g(r[0]))throw new Ce(4003,!1);let i=r.find(_5);if(i&&i!==Sq(r))throw new Ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function O5e(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new kg(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([c,l])=>{s[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:s}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((s,c)=>{c==0&&s==="."||(c==0&&s===""?n=!0:s===".."?t++:s!=""&&i.push(s))}),i):[...i,o]},[]);return new kg(n,t,r)}var P6=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function P5e(e,t,n){if(e.isAbsolute)return new P6(t,!0,0);if(!n)return new P6(t,!1,NaN);if(n.parent===null)return new P6(n,!0,0);let r=_g(e.commands[0])?0:1,i=n.segments.length-1+r;return $5e(n,i,e.numberOfDoubleDots)}function $5e(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Ce(4005,!1);i=r.segments.length}return new P6(r,!1,i-o)}function B5e(e){return _5(e[0])?e[0].outlets:{[Ze]:e}}function Iq(e,t,n){if(e??=new It([],{}),e.segments.length===0&&e.hasChildren())return L5(e,t,n);let r=U5e(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new It(e.segments.slice(0,r.pathIndex),{});return o.children[Ze]=new It(e.segments.slice(r.pathIndex),e.children),L5(o,0,i)}else return r.match&&i.length===0?new It(e.segments,{}):r.match&&!e.hasChildren()?Vz(e,t,n):r.match?L5(e,0,i):Vz(e,t,n)}function L5(e,t,n){if(n.length===0)return new It(e.segments,{});{let r=B5e(n),i={};if(Object.keys(r).some(o=>o!==Ze)&&e.children[Ze]&&e.numberOfChildren===1&&e.children[Ze].segments.length===0){let o=L5(e.children[Ze],t,n);return new It(e.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=Iq(e.children[o],t,a))}),Object.entries(e.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new It(e.segments,i)}}function U5e(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let a=e.segments[i],s=n[r];if(_5(s))break;let c=`${s}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!yq(c,l,a))return o;r+=2}else{if(!yq(c,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Vz(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(_5(o)){let c=j5e(o.outlets);return new It(r,c)}if(i===0&&_g(n[0])){let c=e.segments[t];r.push(new dl(c.path,vq(n[0]))),i++;continue}let a=_5(o)?o.outlets[Ze]:`${o}`,s=i<n.length-1?n[i+1]:null;a&&s&&_g(s)?(r.push(new dl(a,vq(s))),i+=2):(r.push(new dl(a,{})),i++)}return new It(r,{})}function j5e(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Vz(new It([],{}),0,r))}),t}function vq(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function yq(e,t,n){return e==n.path&&Ia(t,n.parameters)}var A5="imperative",Er=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Er||{}),Ro=class{constructor(t,n){this.id=t,this.url=n}},j6=class extends Ro{constructor(t,n,r="imperative",i=null){super(t,n),this.type=Er.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},H2=class extends Ro{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=Er.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Fo=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Fo||{}),Tg=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Tg||{}),M3=class extends Ro{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Er.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},w3=class extends Ro{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Er.NavigationSkipped}},k5=class extends Ro{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=Er.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ig=class extends Ro{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Er.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nz=class extends Ro{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Er.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_z=class extends Ro{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Er.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},kz=class extends Ro{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Er.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tz=class extends Ro{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Er.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Iz=class{constructor(t){this.route=t,this.type=Er.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Fz=class{constructor(t){this.route=t,this.type=Er.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Rz=class{constructor(t){this.snapshot=t,this.type=Er.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Oz=class{constructor(t){this.snapshot=t,this.type=Er.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pz=class{constructor(t){this.snapshot=t,this.type=Er.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$z=class{constructor(t){this.snapshot=t,this.type=Er.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fg=class{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=Er.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},T5=class{},I5=class{constructor(t){this.url=t}};var Bz=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new B5,this.attachRef=null}},B5=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Bz,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Rg=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Uz(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=Uz(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=jz(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return jz(t,this._root).map(n=>n.value)}};function Uz(e,t){if(e===t.value)return t;for(let n of t.children){let r=Uz(e,n);if(r)return r}return null}function jz(e,t){if(e===t.value)return[t];for(let n of t.children){let r=jz(e,n);if(r.length)return r.unshift(t),r}return[]}var so=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function O6(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Og=class extends Rg{constructor(t,n){super(t),this.snapshot=n,eH(this,t)}toString(){return this.snapshot.toString()}};function Fq(e){let t=q5e(e),n=new Bn([new dl("",{})]),r=new Bn({}),i=new Bn({}),o=new Bn({}),a=new Bn(""),s=new kt(n,r,o,a,i,Ze,e,t.root);return s.snapshot=t.root,new Og(new so(s,[]),t)}function q5e(e){let t={},n={},r={},i="",o=new F5([],t,r,i,n,Ze,e,null,{});return new Pg("",new so(o,[]))}var kt=class{constructor(t,n,r,i,o,a,s,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ke(l=>l[P5]))??se(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ke(t=>B6(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ke(t=>B6(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Jz(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:x(x({},t.params),e.params),data:x(x({},t.data),e.data),resolve:x(x(x(x({},e.data),t.data),i?.data),e._resolvedData)}:r={params:x({},e.params),data:x({},e.data),resolve:x(x({},e.data),e._resolvedData??{})},i&&Oq(i)&&(r.resolve[P5]=i.title),r}var F5=class{get title(){return this.data?.[P5]}constructor(t,n,r,i,o,a,s,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=B6(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=B6(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Pg=class extends Rg{constructor(t,n){super(n),this.url=t,eH(this,n)}toString(){return Rq(this._root)}};function eH(e,t){t.value._routerState=e,t.children.forEach(n=>eH(e,n))}function Rq(e){let t=e.children.length>0?` { ${e.children.map(Rq).join(", ")} } `:"";return`${e.value}${t}`}function Ez(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Ia(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Ia(t.params,n.params)||e.paramsSubject.next(n.params),C5e(t.url,n.url)||e.urlSubject.next(n.url),Ia(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function qz(e,t){let n=Ia(e.params,t.params)&&S5e(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||qz(e.parent,t.parent))}function Oq(e){return typeof e.title=="string"||e.title===null}var tH=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ze,this.activateEvents=new Wt,this.deactivateEvents=new Wt,this.attachEvents=new Wt,this.detachEvents=new Wt,this.parentContexts=ce(B5),this.location=ce(p3),this.changeDetector=ce(Ps),this.environmentInjector=ce(Wi),this.inputBinder=ce(qg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ce(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Ce(4013,!1);this._activatedRoute=r;let o=this.location,s=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Gz(r,c,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=Qt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_o]});let e=t;return e})(),Gz=class{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===kt?this.route:t===B5?this.childContexts:this.parent.get(t,n)}},qg=new ze(""),xq=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=T8([i.queryParams,i.params,i.data]).pipe(M1(([a,s,c],l)=>(c=x(x(x({},a),s),c),l===0?se(c):Promise.resolve(c)))).subscribe(a=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let s=rU(i.component);if(!s){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of s.inputs)r.activatedComponentRef.setInput(c,a[c])});this.outletDataSubscriptions.set(r,o)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function G5e(e,t,n){let r=R5(e,t._root,n?n._root:void 0);return new Og(r,t)}function R5(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=W5e(e,t,n);return new so(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(s=>R5(e,s)),a}}let r=Y5e(t.value),i=t.children.map(o=>R5(e,o));return new so(r,i)}}function W5e(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return R5(e,r,i);return R5(e,r)})}function Y5e(e){return new kt(new Bn(e.url),new Bn(e.params),new Bn(e.queryParams),new Bn(e.fragment),new Bn(e.data),e.outlet,e.component,e)}var Pq="ngNavigationCancelingError";function $q(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=U6(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=Bq(!1,Fo.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Bq(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Pq]=!0,n.cancellationCode=t,n}function X5e(e){return Uq(e)&&U6(e.url)}function Uq(e){return!!e&&e[Pq]}var Q5e=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["ng-component"]],standalone:!0,features:[n5],decls:1,vars:0,template:function(i,o){i&1&&Mn(0,"router-outlet")},dependencies:[tH],encapsulation:2});let e=t;return e})();function K5e(e,t){return e.providers&&!e._injector&&(e._injector=D9(e.providers,t,`Route: ${e.path}`)),e._injector??t}function nH(e){let t=e.children&&e.children.map(nH),n=t?k(x({},e),{children:t}):x({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ze&&(n.component=Q5e),n}function Fa(e){return e.outlet||Ze}function Z5e(e,t){let n=e.filter(r=>Fa(r)===t);return n.push(...e.filter(r=>Fa(r)!==t)),n}function U5(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var J5e=(e,t,n,r)=>Ke(i=>(new Wz(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),Wz=class{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Ez(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=O6(n);t.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=O6(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),s=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:s})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=O6(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=O6(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new $z(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Oz(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(Ez(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Ez(s.route.value),this.activateChildRoutes(t,null,a.children)}else{let s=U5(i.snapshot);a.attachRef=null,a.route=i,a.injector=s,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,r)}},$g=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},$6=class{constructor(t,n){this.component=t,this.route=n}};function ede(e,t,n){let r=e._root,i=t?t._root:null;return z5(r,i,n,[r.value])}function tde(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function G6(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!o$(e)?e:t.get(e):r}function z5(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=O6(t);return e.children.forEach(a=>{nde(a,o[a.value.outlet],n,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>V5(s,n.getContext(a),i)),i}function nde(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,a=t?t.value:null,s=n?n.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let c=rde(a,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new $g(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?z5(e,t,s?s.children:null,r,i):z5(e,t,n,r,i),c&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new $6(s.outlet.component,a))}else a&&V5(t,s,i),i.canActivateChecks.push(new $g(r)),o.component?z5(e,null,s?s.children:null,r,i):z5(e,null,n,r,i);return i}function rde(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!pl(e.url,t.url);case"pathParamsOrQueryParamsChange":return!pl(e.url,t.url)||!Ia(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qz(e,t)||!Ia(e.queryParams,t.queryParams);case"paramsChange":default:return!qz(e,t)}}function V5(e,t,n){let r=O6(e),i=e.value;Object.entries(r).forEach(([o,a])=>{i.component?t?V5(a,t.children.getContext(o),n):V5(a,null,n):V5(a,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new $6(t.outlet.component,i)):n.canDeactivateChecks.push(new $6(null,i)):n.canDeactivateChecks.push(new $6(null,i))}function j5(e){return typeof e=="function"}function ide(e){return typeof e=="boolean"}function ode(e){return e&&j5(e.canLoad)}function ade(e){return e&&j5(e.canActivate)}function sde(e){return e&&j5(e.canActivateChild)}function cde(e){return e&&j5(e.canDeactivate)}function lde(e){return e&&j5(e.canMatch)}function jq(e){return e instanceof As||e?.name==="EmptyError"}var Lg=Symbol("INITIAL_VALUE");function q6(){return M1(e=>T8(e.map(t=>t.pipe(xe(1),Qw(Lg)))).pipe(Ke(t=>{for(let n of t)if(n!==!0){if(n===Lg)return Lg;if(n===!1||n instanceof b3)return n}return!0}),b1(t=>t!==Lg),xe(1)))}function ude(e,t){return Kn(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return a.length===0&&o.length===0?se(k(x({},n),{guardsResult:!0})):fde(a,r,i,e).pipe(Kn(s=>s&&ide(s)?dde(r,o,e,t):se(s)),Ke(s=>k(x({},n),{guardsResult:s})))})}function fde(e,t,n,r){return tn(e).pipe(Kn(i=>vde(i.component,i.route,n,t,r)),ba(i=>i!==!0,!0))}function dde(e,t,n,r){return tn(t).pipe(Vs(i=>n6(hde(i.route.parent,r),pde(i.route,r),gde(e,i.path,n),mde(e,i.route,n))),ba(i=>i!==!0,!0))}function pde(e,t){return e!==null&&t&&t(new Pz(e)),se(!0)}function hde(e,t){return e!==null&&t&&t(new Rz(e)),se(!0)}function mde(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(o=>Mm(()=>{let a=U5(t)??n,s=G6(o,a),c=ade(s)?s.canActivate(t,e):Aa(a,()=>s(t,e));return S3(c).pipe(ba())}));return se(i).pipe(q6())}function gde(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(a=>tde(a)).filter(a=>a!==null).map(a=>Mm(()=>{let s=a.guards.map(c=>{let l=U5(a.node)??n,u=G6(c,l),f=sde(u)?u.canActivateChild(r,e):Aa(l,()=>u(r,e));return S3(f).pipe(ba())});return se(s).pipe(q6())}));return se(o).pipe(q6())}function vde(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return se(!0);let a=o.map(s=>{let c=U5(t)??i,l=G6(s,c),u=cde(l)?l.canDeactivate(e,t,n,r):Aa(c,()=>l(e,t,n,r));return S3(u).pipe(ba())});return se(a).pipe(q6())}function yde(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return se(!0);let o=i.map(a=>{let s=G6(a,e),c=ode(s)?s.canLoad(t,n):Aa(e,()=>s(t,n));return S3(c)});return se(o).pipe(q6(),qq(r))}function qq(e){return $w(fr(t=>{if(U6(t))throw $q(e,t)}),Ke(t=>t===!0))}function xde(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return se(!0);let o=i.map(a=>{let s=G6(a,e),c=lde(s)?s.canMatch(t,n):Aa(e,()=>s(t,n));return S3(c)});return se(o).pipe(q6(),qq(r))}var O5=class{constructor(t){this.segmentGroup=t||null}},Bg=class extends Error{constructor(t){super(),this.urlTree=t}};function R6(e){return t6(new O5(e))}function Cde(e){return t6(new Ce(4e3,!1))}function bde(e){return t6(Bq(!1,Fo.GuardRejected))}var Yz=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return se(r);if(i.numberOfChildren>1||!i.children[Ze])return Cde(t.redirectTo);i=i.children[Ze]}}applyRedirectCommands(t,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n.startsWith("/"))throw new Bg(i);return i}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new b3(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let s=o.substring(1);r[i]=n[s]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),a={};return Object.entries(n.children).forEach(([s,c])=>{a[s]=this.createSegmentGroup(t,c,r,i)}),new It(o,a)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new Ce(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},Xz={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Mde(e,t,n,r,i){let o=rH(e,t,n);return o.matched?(r=K5e(t,r),xde(r,t,n,i).pipe(Ke(a=>a===!0?o:x({},Xz)))):se(o)}function rH(e,t,n){if(t.path==="**")return wde(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?x({},Xz):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||x5e)(n,e,t);if(!i)return x({},Xz);let o={};Object.entries(i.posParams??{}).forEach(([s,c])=>{o[s]=c.path});let a=i.consumed.length>0?x(x({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function wde(e){return{matched:!0,parameters:e.length>0?Sq(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function Cq(e,t,n,r){return n.length>0&&Dde(e,n,r)?{segmentGroup:new It(t,Ede(r,new It(n,e.children))),slicedSegments:[]}:n.length===0&&zde(e,n,r)?{segmentGroup:new It(e.segments,Sde(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new It(e.segments,e.children),slicedSegments:n}}function Sde(e,t,n,r){let i={};for(let o of n)if(Gg(e,t,o)&&!r[Fa(o)]){let a=new It([],{});i[Fa(o)]=a}return x(x({},r),i)}function Ede(e,t){let n={};n[Ze]=t;for(let r of e)if(r.path===""&&Fa(r)!==Ze){let i=new It([],{});n[Fa(r)]=i}return n}function Dde(e,t,n){return n.some(r=>Gg(e,t,r)&&Fa(r)!==Ze)}function zde(e,t,n){return n.some(r=>Gg(e,t,r))}function Gg(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Hde(e,t,n,r){return Fa(e)!==r&&(r===Ze||!Gg(t,n,e))?!1:rH(t,e,n).matched}function Lde(e,t,n){return t.length===0&&!e.children[n]}var Qz=class{};function Ade(e,t,n,r,i,o,a="emptyOnly"){return new Kz(e,t,n,r,i,a,o).recognize()}var Vde=31,Kz=class{constructor(t,n,r,i,o,a,s){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new Yz(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Ce(4002,`'${t.segmentGroup}'`)}recognize(){let t=Cq(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Ke(n=>{let r=new F5([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ze,this.rootComponentType,null,{}),i=new so(r,n),o=new Pg("",i),a=R5e(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root,null),{state:o,tree:a}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,Ze).pipe(r3(r=>{if(r instanceof Bg)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof O5?this.noMatchError(r):r}))}inheritParamsAndData(t,n){let r=t.value,i=Jz(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(t,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0).pipe(Ke(o=>o instanceof so?[o]:[]))}processChildren(t,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return tn(i).pipe(Vs(o=>{let a=r.children[o],s=Z5e(n,o);return this.processSegmentGroup(t,s,a,o)}),Xw((o,a)=>(o.push(...a),o)),i3(null),Yw(),Kn(o=>{if(o===null)return R6(r);let a=Gq(o);return Nde(a),se(a)}))}processSegment(t,n,r,i,o,a){return tn(n).pipe(Vs(s=>this.processSegmentAgainstRoute(s._injector??t,n,s,r,i,o,a).pipe(r3(c=>{if(c instanceof O5)return se(null);throw c}))),ba(s=>!!s),r3(s=>{if(jq(s))return Lde(r,i,o)?se(new Qz):R6(r);throw s}))}processSegmentAgainstRoute(t,n,r,i,o,a,s){return Hde(r,i,o,a)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,a):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,a):R6(i):R6(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,a){let{matched:s,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=rH(n,i,o);if(!s)return R6(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Vde&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,f).pipe(Kn(d=>this.processSegment(t,r,n,d.concat(u),a,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){let a=Mde(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(M1(s=>s.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(M1(({routes:c})=>{let l=r._loadedInjector??t,{consumedSegments:u,remainingSegments:f,parameters:d}=s,p=new F5(u,d,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,kde(r),Fa(r),r.component??r._loadedComponent??null,r,Tde(r)),{segmentGroup:h,slicedSegments:m}=Cq(n,u,f,c);if(m.length===0&&h.hasChildren())return this.processChildren(l,c,h).pipe(Ke(v=>v===null?null:new so(p,v)));if(c.length===0&&m.length===0)return se(new so(p,[]));let g=Fa(r)===o;return this.processSegment(l,c,h,m,g?Ze:o,!0).pipe(Ke(v=>new so(p,v instanceof so?[v]:[])))}))):R6(n)))}getChildConfig(t,n,r){return n.children?se({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?se({routes:n._loadedRoutes,injector:n._loadedInjector}):yde(t,n,r,this.urlSerializer).pipe(Kn(i=>i?this.configLoader.loadChildren(t,n).pipe(fr(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):bde(n))):se({routes:[],injector:t})}};function Nde(e){e.sort((t,n)=>t.value.outlet===Ze?-1:n.value.outlet===Ze?1:t.value.outlet.localeCompare(n.value.outlet))}function _de(e){let t=e.value.routeConfig;return t&&t.path===""}function Gq(e){let t=[],n=new Set;for(let r of e){if(!_de(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=Gq(r.children);t.push(new so(r.value,i))}return t.filter(r=>!n.has(r))}function kde(e){return e.data||{}}function Tde(e){return e.resolve||{}}function Ide(e,t,n,r,i,o){return Kn(a=>Ade(e,t,n,r,a.extractedUrl,i,o).pipe(Ke(({state:s,tree:c})=>k(x({},a),{targetSnapshot:s,urlAfterRedirects:c}))))}function Fde(e,t){return Kn(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return se(n);let o=new Set(i.map(c=>c.route)),a=new Set;for(let c of o)if(!a.has(c))for(let l of Wq(c))a.add(l);let s=0;return tn(a).pipe(Vs(c=>o.has(c)?Rde(c,r,e,t):(c.data=Jz(c,c.parent,e).resolve,se(void 0))),fr(()=>s++),r6(1),Kn(c=>s===a.size?se(n):Lo))})}function Wq(e){let t=e.children.map(n=>Wq(n)).flat();return[e,...t]}function Rde(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!Oq(i)&&(o[P5]=i.title),Ode(o,e,t,r).pipe(Ke(a=>(e._resolvedData=a,e.data=Jz(e,e.parent,n).resolve,null)))}function Ode(e,t,n,r){let i=Hz(e);if(i.length===0)return se({});let o={};return tn(i).pipe(Kn(a=>Pde(e[a],t,n,r).pipe(ba(),fr(s=>{o[a]=s}))),r6(1),Ww(o),r3(a=>jq(a)?Lo:t6(a)))}function Pde(e,t,n,r){let i=U5(t)??r,o=G6(e,i),a=o.resolve?o.resolve(t,n):Aa(i,()=>o(t,n));return S3(a)}function Dz(e){return M1(t=>{let n=e(t);return n?tn(n).pipe(Ke(()=>t)):se(t)})}var Yq=(()=>{let t=class t{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(a=>a.outlet===Ze);return i}getResolvedTitleForRoute(r){return r.data[P5]}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce($de),providedIn:"root"});let e=t;return e})(),$de=(()=>{let t=class t extends Yq{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};t.\u0275fac=function(i){return new(i||t)(ve($U))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),q5=new ze("",{providedIn:"root",factory:()=>({})}),Ug=new ze(""),iH=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ce(N9)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return se(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=S3(r.loadComponent()).pipe(Ke(Xq),fr(a=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a}),o3(()=>{this.componentLoaders.delete(r)})),o=new e6(i,()=>new x1).pipe(J0());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return se({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let a=Bde(i,this.compiler,r,this.onLoadEndListener).pipe(o3(()=>{this.childrenLoaders.delete(i)})),s=new e6(a,()=>new x1).pipe(J0());return this.childrenLoaders.set(i,s),s}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Bde(e,t,n,r){return S3(e.loadChildren()).pipe(Ke(Xq),Kn(i=>i instanceof W8||Array.isArray(i)?se(i):tn(t.compileModuleAsync(i))),Ke(i=>{r&&r(e);let o,a,s=!1;return Array.isArray(i)?(a=i,s=!0):(o=i.create(n).injector,a=o.get(Ug,[],{optional:!0,self:!0}).flat()),{routes:a.map(nH),injector:o}}))}function Ude(e){return e&&typeof e=="object"&&"default"in e}function Xq(e){return Ude(e)?e.default:e}var oH=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(jde),providedIn:"root"});let e=t;return e})(),jde=(()=>{let t=class t{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Qq=new ze(""),Kq=new ze("");function qde(e,t,n){let r=e.get(Kq),i=e.get(Xr);return e.get(Yt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,a=new Promise(l=>{o=l}),s=i.startViewTransition(()=>(o(),Gde(e))),{onViewTransitionCreated:c}=r;return c&&Aa(e,()=>c({transition:s,from:t,to:n})),a})}function Gde(e){return new Promise(t=>{nD(t,{injector:e})})}var aH=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new x1,this.transitionAbortSubject=new x1,this.configLoader=ce(iH),this.environmentInjector=ce(Wi),this.urlSerializer=ce($5),this.rootContexts=ce(B5),this.location=ce(S6),this.inputBindingEnabled=ce(qg,{optional:!0})!==null,this.titleStrategy=ce(Yq),this.options=ce(q5,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ce(oH),this.createViewTransition=ce(Qq,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>se(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Iz(o)),i=o=>this.events.next(new Fz(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(k(x(x({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Bn({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:A5,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(b1(a=>a.id!==0),Ke(a=>k(x({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),M1(a=>{this.currentTransition=a;let s=!1,c=!1;return se(a).pipe(fr(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?k(x({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),M1(l=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&f!=="reload"){let d="";return this.events.next(new w3(l.id,this.urlSerializer.serialize(l.rawUrl),d,Tg.IgnoredSameUrlNavigation)),l.resolve(null),Lo}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return se(l).pipe(M1(d=>{let p=this.transitions?.getValue();return this.events.next(new j6(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),p!==this.transitions?.getValue()?Lo:Promise.resolve(d)}),Ide(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),fr(d=>{a.targetSnapshot=d.targetSnapshot,a.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=k(x({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let p=new Ig(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:p,source:h,restoredState:m,extras:g}=l,v=new j6(d,this.urlSerializer.serialize(p),h,m);this.events.next(v);let y=Fq(this.rootComponentType).snapshot;return this.currentTransition=a=k(x({},l),{targetSnapshot:y,urlAfterRedirects:p,extras:k(x({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,se(a)}else{let d="";return this.events.next(new w3(l.id,this.urlSerializer.serialize(l.extractedUrl),d,Tg.IgnoredByUrlHandlingStrategy)),l.resolve(null),Lo}}),fr(l=>{let u=new Nz(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Ke(l=>(this.currentTransition=a=k(x({},l),{guards:ede(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),a)),ude(this.environmentInjector,l=>this.events.next(l)),fr(l=>{if(a.guardsResult=l.guardsResult,U6(l.guardsResult))throw $q(this.urlSerializer,l.guardsResult);let u=new _z(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),b1(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Fo.GuardRejected),!1)),Dz(l=>{if(l.guards.canActivateChecks.length)return se(l).pipe(fr(u=>{let f=new kz(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),M1(u=>{let f=!1;return se(u).pipe(Fde(this.paramsInheritanceStrategy,this.environmentInjector),fr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",Fo.NoDataFromResolver)}}))}),fr(u=>{let f=new Tz(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),Dz(l=>{let u=f=>{let d=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(f.routeConfig).pipe(fr(p=>{f.component=p}),Ke(()=>{})));for(let p of f.children)d.push(...u(p));return d};return T8(u(l.targetSnapshot.root)).pipe(i3(null),xe(1))}),Dz(()=>this.afterPreactivation()),M1(()=>{let{currentSnapshot:l,targetSnapshot:u}=a,f=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return f?tn(f).pipe(Ke(()=>a)):se(a)}),Ke(l=>{let u=G5e(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=a=k(x({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,a}),fr(()=>{this.events.next(new T5)}),J5e(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),xe(1),fr({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new H2(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Kw(this.transitionAbortSubject.pipe(fr(l=>{throw l}))),o3(()=>{!s&&!c&&this.cancelNavigationTransition(a,"",Fo.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),r3(l=>{if(c=!0,Uq(l))this.events.next(new M3(a.id,this.urlSerializer.serialize(a.extractedUrl),l.message,l.cancellationCode)),X5e(l)?this.events.next(new I5(l.url)):a.resolve(!1);else{this.events.next(new k5(a.id,this.urlSerializer.serialize(a.extractedUrl),l,a.targetSnapshot??void 0));try{a.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(u)}}return Lo}))}))}cancelNavigationTransition(r,i,o){let a=new M3(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(a),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Wde(e){return e!==A5}var Yde=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(Xde),providedIn:"root"});let e=t;return e})(),Zz=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},Xde=(()=>{let t=class t extends Zz{};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Va(t)))(o||t)}})(),t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Zq=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:()=>ce(Qde),providedIn:"root"});let e=t;return e})(),Qde=(()=>{let t=class t extends Zq{constructor(){super(...arguments),this.location=ce(S6),this.urlSerializer=ce($5),this.options=ce(q5,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ce(oH),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new b3,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Fq(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof j6)this.stateMemento=this.createStateMemento();else if(r instanceof w3)this.rawUrlTree=i.initialUrl;else if(r instanceof Ig){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof T5?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof M3&&(r.code===Fo.GuardRejected||r.code===Fo.NoDataFromResolver)?this.restoreHistory(i):r instanceof k5?this.restoreHistory(i,!0):r instanceof H2&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let a=this.browserPageId,s=x(x({},i.extras.state),this.generateNgRouterState(i.id,a));this.location.replaceState(o,"",s)}else{let a=x(x({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",a)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,a=this.currentPageId-o;a!==0?this.location.historyGo(a):this.currentUrlTree===r.finalUrl&&a===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=Va(t)))(o||t)}})(),t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),H5=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(H5||{});function Jq(e,t){e.events.pipe(b1(n=>n instanceof H2||n instanceof M3||n instanceof k5||n instanceof w3),Ke(n=>n instanceof H2||n instanceof w3?H5.COMPLETE:(n instanceof M3?n.code===Fo.Redirect||n.code===Fo.SupersededByNewNavigation:!1)?H5.REDIRECTING:H5.FAILED),b1(n=>n!==H5.REDIRECTING),xe(1)).subscribe(()=>{t()})}function Kde(e){throw e}var Zde={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jde={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Dt=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=ce(z9),this.stateManager=ce(Zq),this.options=ce(q5,{optional:!0})||{},this.pendingTasks=ce(rl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ce(aH),this.urlSerializer=ce($5),this.location=ce(S6),this.urlHandlingStrategy=ce(oH),this._events=new x1,this.errorHandler=this.options.errorHandler||Kde,this.navigated=!1,this.routeReuseStrategy=ce(Yde),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ce(Ug,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ce(qg,{optional:!0}),this.eventsSubscription=new ur,this.isNgZoneEnabled=ce(Yt)instanceof Yt&&Yt.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(o!==null&&a!==null){if(this.stateManager.handleRouterEvent(i,a),i instanceof M3&&i.code!==Fo.Redirect&&i.code!==Fo.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof H2)this.navigated=!0;else if(i instanceof I5){let s=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Wde(o.source)};this.scheduleNavigation(s,A5,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}t7e(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),A5,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let a={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let l=x({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(a.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,s,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(nH),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:a,fragment:s,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,f=null;switch(c){case"merge":f=x(x({},this.currentUrlTree.queryParams),a);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=a||null}f!==null&&(f=this.removeEmptyProps(f));let d;try{let p=o?o.snapshot:this.routerState.snapshot.root;d=_q(p)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),d=this.currentUrlTree.root}return kq(d,r,f,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=U6(r)?r:this.parseUrl(r),a=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(a,A5,null,i)}navigate(r,i={skipLocationChange:!1}){return e7e(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=x({},Zde):i===!1?o=x({},Jde):o=i,U6(r))return mq(this.currentUrlTree,r,o);let a=this.parseUrl(r);return mq(this.currentUrlTree,a,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,a])=>(a!=null&&(i[o]=a),i),{})}scheduleNavigation(r,i,o,a,s){if(this.disposed)return Promise.resolve(!1);let c,l,u;s?(c=s.resolve,l=s.reject,u=s.promise):u=new Promise((d,p)=>{c=d,l=p});let f=this.pendingTasks.add();return Jq(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:a,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function e7e(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new Ce(4008,!1)}function t7e(e){return!(e instanceof T5)&&!(e instanceof I5)}var hn=(()=>{let t=class t{constructor(r,i,o,a,s,c){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=a,this.el=s,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new x1,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof H2&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,a,s){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||o||a||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:Y$(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,a=this.el.nativeElement;i!==null?o.setAttribute(a,r,i):o.removeAttribute(a,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};t.\u0275fac=function(i){return new(i||t)(q(Dt),q(kt),FE("tabindex"),q(to),q(Yr),q(Gs))},t.\u0275dir=Qt({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&Ve("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&M6("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Gr.HasDecoratorInputTransform,"preserveFragment","preserveFragment",al],skipLocationChange:[Gr.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",al],replaceUrl:[Gr.HasDecoratorInputTransform,"replaceUrl","replaceUrl",al],routerLink:"routerLink"},standalone:!0,features:[oD,_o]});let e=t;return e})(),eG=(()=>{let t=class t{get isActive(){return this._isActive}constructor(r,i,o,a,s){this.router=r,this.element=i,this.renderer=o,this.cdr=a,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Wt,this.routerEventsSubscription=r.events.subscribe(c=>{c instanceof H2&&this.update()})}ngAfterContentInit(){se(this.links.changes,se(null)).pipe(n3()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let r=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=tn(r).pipe(n3()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(r){let i=Array.isArray(r)?r:r.split(" ");this.classes=i.filter(o=>!!o)}ngOnChanges(r){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let r=this.hasActiveLinks();this._isActive!==r&&(this._isActive=r,this.cdr.markForCheck(),this.classes.forEach(i=>{r?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),r&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(r))})}isLinkActive(r){let i=n7e(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{let a=o.urlTree;return a?r.isActive(a,i):!1}}hasActiveLinks(){let r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.links.some(r)}};t.\u0275fac=function(i){return new(i||t)(q(Dt),q(Yr),q(to),q(Ps),q(hn,8))},t.\u0275dir=Qt({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(i,o,a){if(i&1&&UB(a,hn,5),i&2){let s;jB(s=qB())&&(o.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[_o]});let e=t;return e})();function n7e(e){return!!e.paths}var jg=class{};var r7e=(()=>{let t=class t{constructor(r,i,o,a,s){this.router=r,this.injector=o,this.preloadingStrategy=a,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(b1(r=>r instanceof H2),Vs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let a of i){a.providers&&!a._injector&&(a._injector=D9(a.providers,r,`Route: ${a.path}`));let s=a._injector??r,c=a._loadedInjector??s;(a.loadChildren&&!a._loadedRoutes&&a.canLoad===void 0||a.loadComponent&&!a._loadedComponent)&&o.push(this.preloadConfig(s,a)),(a.children||a._loadedRoutes)&&o.push(this.processRoutes(c,a.children??a._loadedRoutes))}return tn(o).pipe(n3())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=se(null);let a=o.pipe(Kn(s=>s===null?se(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??r,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return tn([a,s]).pipe(n3())}else return a})}};t.\u0275fac=function(i){return new(i||t)(ve(Dt),ve(N9),ve(Wi),ve(jg),ve(iH))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),tG=new ze(""),i7e=(()=>{let t=class t{constructor(r,i,o,a,s={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=a,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof j6?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof H2?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof w3&&r.code===Tg.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Fg&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Fg(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(i){cB()},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();function o7e(e){return e.routerState.root}function G5(e,t){return{\u0275kind:e,\u0275providers:t}}function a7e(){let e=ce(M2);return t=>{let n=e.get(ol);if(t!==n.components[0])return;let r=e.get(Dt),i=e.get(nG);e.get(sH)===1&&r.initialNavigation(),e.get(rG,null,rt.Optional)?.setUpPreloading(),e.get(tG,null,rt.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var nG=new ze("",{factory:()=>new x1}),sH=new ze("",{providedIn:"root",factory:()=>1});function s7e(){return G5(2,[{provide:sH,useValue:0},{provide:A9,multi:!0,deps:[M2],useFactory:t=>{let n=t.get(dU,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=t.get(Dt),o=t.get(nG);Jq(i,()=>{r(!0)}),t.get(aH).afterPreactivation=()=>(r(!0),o.closed?se(void 0):o),i.initialNavigation()}))}}])}function c7e(){return G5(3,[{provide:A9,multi:!0,useFactory:()=>{let t=ce(Dt);return()=>{t.setUpLocationChangeListener()}}},{provide:sH,useValue:2}])}var rG=new ze("");function l7e(e){return G5(0,[{provide:rG,useExisting:r7e},{provide:jg,useExisting:e}])}function u7e(){return G5(8,[xq,{provide:qg,useExisting:xq}])}function f7e(e){let t=[{provide:Qq,useValue:qde},{provide:Kq,useValue:x({skipNextTransition:!!e?.skipInitialTransition},e)}];return G5(9,t)}var bq=new ze("ROUTER_FORROOT_GUARD"),d7e=[S6,{provide:$5,useClass:N5},Dt,B5,{provide:kt,useFactory:o7e,deps:[Dt]},iH,[]],cH=(()=>{let t=class t{constructor(r){}static forRoot(r,i){return{ngModule:t,providers:[d7e,[],{provide:Ug,multi:!0,useValue:r},{provide:bq,useFactory:g7e,deps:[[Dt,new h9,new _E]]},{provide:q5,useValue:i||{}},i?.useHash?h7e():m7e(),p7e(),i?.preloadingStrategy?l7e(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?v7e(i):[],i?.bindToComponentInputs?u7e().\u0275providers:[],i?.enableViewTransitions?f7e().\u0275providers:[],y7e()]}}static forChild(r){return{ngModule:t,providers:[{provide:Ug,multi:!0,useValue:r}]}}};t.\u0275fac=function(i){return new(i||t)(ve(bq,8))},t.\u0275mod=wr({type:t}),t.\u0275inj=Sr({});let e=t;return e})();function p7e(){return{provide:tG,useFactory:()=>{let e=ce(CU),t=ce(Yt),n=ce(q5),r=ce(aH),i=ce($5);return n.scrollOffset&&e.setOffset(n.scrollOffset),new i7e(i,r,e,t,n)}}}function h7e(){return{provide:Gs,useClass:hU}}function m7e(){return{provide:Gs,useClass:SD}}function g7e(e){return"guarded"}function v7e(e){return[e.initialNavigation==="disabled"?c7e().\u0275providers:[],e.initialNavigation==="enabledBlocking"?s7e().\u0275providers:[]]}var Mq=new ze("");function y7e(){return[{provide:Mq,useFactory:a7e},{provide:V9,multi:!0,useExisting:Mq}]}var Ra=class{constructor(t){Object.assign(this,t)}toString(){return JSON.stringify(this)}get ViewUrl(){throw new Error("ViewUrl not implemented")}get EditUrl(){throw new Error("EditUrl not implemented")}get DeleteUrl(){throw new Error("DeleteUrl not implemented")}};var qn=class extends Ra{constructor(t){super(t)}get ViewUrl(){return["/goals",this.Id]}get EditUrl(){return["/goals",this.Id,"edit"]}get DeleteUrl(){return["/goals",this.Id,"delete"]}};var Oo=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var W5="customServerUrl",W6=(()=>{let t=class t extends Oo{constructor(){super()}getCustomServerUrl(){return localStorage.getItem(W5)}setCustomServerUrl(r){return Tt.endpoint=r,localStorage.setItem(W5,r)}clearCustomServerUrl(){localStorage.removeItem(W5)}isCustomServerUrlSet(){return this.getCustomServerUrl()!==null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Tt={production:!0,endpoint:localStorage.getItem(W5)??""};function Zt(e){return Tt.endpoint+e}function L1(){return{Id:"1",Name:"Fake Goal",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1}}function Xi(){return{Id:"1",Name:"Fake Task",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",Completed:!1}}function Qi(){return{Id:"1",Name:"Fake Habit",Description:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api",CompletedDates:["2020-01-01"]}}var tr=(()=>{let t=class t extends Oo{constructor(r){super(),this.http=r}listGoals(){if(Tt.production){let r=Zt("/goals");return this.http.get(r)}return console.debug("/goals"),se({data:[L1(),L1(),L1(),L1(),L1()],message:"success"})}findGoals(r){if(Tt.production){let i=Zt(`/goals?q=${r}`);return this.http.get(i)}return console.debug(r),se({data:[L1(),L1(),L1(),L1(),L1()],message:"success"})}getGoal(r){if(Tt.production){let i=Zt(`/goals/${r}`);return this.http.get(i)}return console.debug(r),se({data:L1(),message:"success"})}createGoal(r){if(Tt.production){let i=Zt("/goals");return this.http.post(i,r)}return console.debug(r),se({data:L1(),message:"success"})}updateGoal(r){if(Tt.production){let i=Zt(`/goals/${r.Id}`);return this.http.put(i,r)}return console.debug(r),se({data:L1(),message:"success"})}deleteGoal(r){if(Tt.production){let i=Zt(`/goals/${r}`);return this.http.delete(i)}return console.debug(r),se(void 0)}getGoalTasks(r){if(Tt.production){let i=Zt(`/goals/${r}/tasks`);return this.http.get(i)}return console.debug(r),se({data:[Xi(),Xi(),Xi(),Xi(),Xi()],message:"success"})}getGoalHabits(r){if(Tt.production){let i=Zt(`/goals/${r}/habits`);return this.http.get(i)}return console.debug(r),se({data:[Qi(),Qi(),Qi(),Qi(),Qi()],message:"success"})}};t.\u0275fac=function(i){return new(i||t)(ve(Ws))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var lH=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(xe(1)).subscribe(i=>{this.model=new qn(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteGoal(this.model?.Id).pipe(xe(1)).subscribe(()=>this.router.navigateByUrl("/goals"))}};t.\u0275fac=function(i){return new(i||t)(q(tr),q(kt),q(Dt))},t.\u0275cmp=Le({type:t,selectors:[["app-delete-page"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"p"),T(3,` Deleting this model will make it unrecoverable.
`),H(),z(4,"button",0),Ve("click",function(){return o.deleteModel()}),T(5),H()),i&2&&(R(),Me("Delete ",o.model==null?null:o.model.Name,"?"),R(4),Me(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();var Mi=class extends Ra{constructor(t){super(t)}get ViewUrl(){return["/habits",this.Id]}get EditUrl(){return["/habits",this.Id,"edit"]}get DeleteUrl(){return["/habits",this.Id,"delete"]}get TimesCompletedToday(){let t=new Date().toLocaleDateString().split("T")[0];return this.CompletedDates?.filter(n=>n===t).length??0}get IsCompletedToday(){return this.IsQuantifiable?this.TimesCompletedToday>=this.TargetValue:this.TimesCompletedToday>0}get FormattedCompletedDates(){let t=[];if(this.AntiHabit){let n=new Date,r=new Date(this.CreatedAt);for(let i=r;i<=n;i.setDate(i.getDate()+1)){let o=i.toLocaleDateString().split("T")[0];(!this.CompletedDates||!this.CompletedDates.includes(o))&&t.push(o)}}else t=this.CompletedDates?.map(n=>new Date(n).toLocaleDateString().split("T")[0]??[]);return t??[]}};var Ki=class extends Ra{constructor(t){super(t)}get ViewUrl(){return["/tasks",this.Id]}get EditUrl(){return["/tasks",this.Id,"edit"]}get DeleteUrl(){return["/tasks",this.Id,"delete"]}get ImportanceHuman(){let t={1:"Low",2:"Low-Medium",3:"Medium",4:"Medium-High",5:"High"};return this.Importance in t?t[this.Importance]:"Unknown Importance"}get isOverdue(){let t=new Date,n=new Date(this.CompleteBy);return t>n}};function x7e(e,t){if(e&1&&(z(0,"li")(1,"a",4),T(2),H()()),e&2){let n=t.$implicit;R(),he("routerLink",n.ViewUrl),R(),Me(" ",n.Name," ")}}function C7e(e,t){if(e&1&&(z(0,"li")(1,"a",4),T(2),H()()),e&2){let n=t.$implicit;R(),he("routerLink",n.ViewUrl),R(),Me(" ",n.Name," ")}}var uH=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(xe(1)).subscribe(i=>{this.model=new qn(i.data),this.api.getGoalHabits(r).pipe(xe(1)).subscribe(o=>{this.associatedHabits=o.data.map(a=>new Mi(a))}),this.api.getGoalTasks(r).pipe(xe(1)).subscribe(o=>{this.associatedTasks=o.data.map(a=>new Ki(a))})})}};t.\u0275fac=function(i){return new(i||t)(q(tr),q(kt))},t.\u0275cmp=Le({type:t,selectors:[["app-goal-page"]],decls:20,vars:11,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right",3,"routerLink"],[1,"uk-button-danger","uk-button",3,"routerLink"],[1,"uk-text-default"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"button",0),T(3),H(),z(4,"button",1),T(5),H(),z(6,"pre",2),T(7),H(),Mn(8,"hr"),z(9,"p"),T(10),vi(11,"date"),H(),z(12,"p"),T(13,"Associated Habits:"),H(),z(14,"ul"),St(15,x7e,3,2,"li",3),H(),z(16,"p"),T(17,"Associated Tasks:"),H(),z(18,"ul"),St(19,C7e,3,2,"li",3),H()),i&2&&(R(),Me("Goal: ",o.model==null?null:o.model.Name,""),R(),he("routerLink",o.model==null?null:o.model.EditUrl),R(),Me(" Edit: ",o.model==null?null:o.model.Name,`
`),R(),he("routerLink",o.model==null?null:o.model.DeleteUrl),R(),Me(" Delete: ",o.model==null?null:o.model.Name,`
`),R(2),Me("    ",o.model==null?null:o.model.Description,`
`),R(3),Me(" Complete By: ",yi(11,9,o.model==null?null:o.model.CompleteBy),`
`),R(5),he("ngForOf",o.associatedHabits),R(4),he("ngForOf",o.associatedTasks))},dependencies:[xi,hn,Io],encapsulation:2});let e=t;return e})();function b7e(e,t){if(e&1&&(E1(0),z(1,"p",10),T(2),H(),D1()),e&2){let n=Et().$implicit;R(2),Me(" ",n.Description," ")}}function M7e(e,t){if(e&1){let n=ro();z(0,"tr")(1,"td")(2,"input",6),st("ngModelChange",function(i){let a=hi(n).$implicit;return ft(a.Completed,i)||(a.Completed=i),mi(i)}),Ve("change",function(){let o=hi(n).$implicit,a=Et();return mi(a.updateGoal(o))}),H()(),z(3,"td")(4,"a",7),T(5),H()(),z(6,"td",3),St(7,b7e,3,1,"ng-container",8),H(),z(8,"td")(9,"a",9),T(10,"View"),H()()()}if(e&2){let n=t.$implicit;Et();let r=il(21);R(2),at("ngModel",n.Completed),R(2),he("routerLink",n.ViewUrl),R(),Me(" ",n.Name," "),R(2),he("ngIf",n.Description)("ngIfElse",r),R(2),he("routerLink",n.ViewUrl)}}function w7e(e,t){e&1&&(z(0,"i"),T(1,"No description provided."),H())}var fH=(()=>{let t=class t{constructor(r){this.api=r,this.goals=[]}ngOnInit(){this.api.listGoals().pipe(xe(1)).subscribe(r=>{this.goals=r.data.map(i=>new qn(i))})}updateGoal(r){this.api.updateGoal(r).pipe(xe(1)).subscribe(i=>{r=new qn(i.data)})}};t.\u0275fac=function(i){return new(i||t)(q(tr))},t.\u0275cmp=Le({type:t,selectors:[["app-goals-page"]],decls:22,vars:1,consts:[[1,"list-header"],["routerLink","/goals/new",1,"uk-button","uk-button-primary"],[1,"uk-table","uk-table-striped"],[1,"hide-in-mobile"],[4,"ngFor","ngForOf"],["defaultDescription",""],["type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange","change"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[4,"ngIf","ngIfElse"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],[1,"description"]],template:function(i,o){i&1&&(z(0,"div",0)(1,"h1"),T(2,"Goals"),H(),z(3,"section")(4,"nav")(5,"a",1),T(6,"New Goal"),H()()()(),z(7,"section")(8,"table",2)(9,"thead")(10,"tr"),Mn(11,"th"),z(12,"th"),T(13,"Name"),H(),z(14,"th",3),T(15,"Description"),H(),z(16,"th"),T(17,"Action"),H()()(),z(18,"tbody"),St(19,M7e,11,6,"tr",4),H()()(),St(20,w7e,2,0,"ng-template",null,5,$s)),i&2&&(R(19),he("ngForOf",o.goals))},dependencies:[xi,z1,hn,Ys,An,wn],styles:["p.description[_ngcontent-%COMP%]{text-wrap:nowrap;padding-right:10rem;width:28rem;overflow:hidden}"]});let e=t;return e})();var dH=(()=>{let t=class t{constructor(r,i){this.api=r,this.router=i,this.model={}}submitForm(){let r=new qn(this.model);r.Completed=!1,this.api.createGoal(r).pipe(xe(1)).subscribe(()=>this.router.navigateByUrl("/goals"))}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString()}};t.\u0275fac=function(i){return new(i||t)(q(tr),q(Dt))},t.\u0275cmp=Le({type:t,selectors:[["app-new-goal-page"]],decls:15,vars:2,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1,"New Goal"),H(),z(2,"form",0,1)(4,"label",2),T(5,"Goal Name"),H(),z(6,"input",3),st("ngModelChange",function(s){return ft(o.model.Name,s)||(o.model.Name=s),s}),H(),z(7,"label",4),T(8," Goal Description "),H(),z(9,"textarea",5),st("ngModelChange",function(s){return ft(o.model.Description,s)||(o.model.Description=s),s}),H(),z(10,"label",6),T(11,"Complete By"),H(),z(12,"input",7),Ve("change",function(s){return o.updateCompleteBy(s)}),H(),z(13,"button",8),Ve("click",function(){return o.submitForm()}),T(14," Add New Goal "),H()()),i&2&&(R(6),at("ngModel",o.model.Name),R(3),at("ngModel",o.model.Description))},dependencies:[bi,er,An,Ci,wn,Qr],encapsulation:2});let e=t;return e})();var Po=(()=>{let t=class t extends Oo{constructor(r){super(),this.http=r}getHabits(){if(Tt.production){let r=Zt("/habits");return this.http.get(r)}return console.debug("/habits"),se({data:[Qi(),Qi(),Qi(),Qi(),Qi()],message:"success"})}getHabit(r){if(Tt.production){let i=Zt(`/habits/${r}`);return this.http.get(i)}return console.debug(r),se({data:Qi(),message:"success"})}createHabit(r){if(Tt.production){let i=Zt("/habits");return this.http.post(i,r)}return console.debug(r),se({data:Qi(),message:"success"})}updateHabit(r){if(Tt.production){let i=Zt(`/habits/${r.Id}`);return this.http.put(i,r)}return console.debug(r),se({data:Qi(),message:"success"})}deleteHabit(r){if(Tt.production){let i=Zt(`/habits/${r}`);return this.http.delete(i)}return console.debug(r),se(void 0)}};t.\u0275fac=function(i){return new(i||t)(ve(Ws))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var pH=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(xe(1)).subscribe(i=>{this.model=new Mi(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteHabit(this.model?.Id).pipe(xe(1)).subscribe(()=>this.router.navigateByUrl("/"))}};t.\u0275fac=function(i){return new(i||t)(q(Po),q(kt),q(Dt))},t.\u0275cmp=Le({type:t,selectors:[["app-delete-habit-page"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"p"),T(3,` Deleting this model will make it unrecoverable.
`),H(),z(4,"button",0),Ve("click",function(){return o.deleteModel()}),T(5),H()),i&2&&(R(),Me("Delete ",o.model==null?null:o.model.Name,"?"),R(4),Me(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();var Wg={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]};var Yg={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]};var oG={$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:"container",data:{values:[]},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"date",timeUnit:"date",type:"ordinal",title:"Day",axis:{tickCount:{timeUnit:"day",step:1}}},y:{field:"date",timeUnit:"month",type:"ordinal",title:"Month",scale:{domain:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},color:{field:"count",type:"quantitative",title:"Count",condition:{test:"datum.count === 0",value:"transparent"},legend:null},tooltip:[{field:"count",type:"quantitative",title:"Count"}]}};var hH={};Mr(hH,{JsonPatchError:()=>Nn,_areEquals:()=>K5,applyOperation:()=>hl,applyPatch:()=>X6,applyReducer:()=>L7e,deepClone:()=>z7e,getValueByPointer:()=>Jg,validate:()=>sG,validator:()=>ev});var E7e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),D7e=Object.prototype.hasOwnProperty;function Qg(e,t){return D7e.call(e,t)}function Kg(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Qg(e,i)&&r.push(i);return r}function Kr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Zg(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Oa(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function X5(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Xg(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Xg(e[t]))return!0}else if(typeof e=="object"){for(var r=Kg(e),i=r.length,o=0;o<i;o++)if(Xg(e[r[o]]))return!0}}return!1}function aG(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var Q5=function(e){E7e(t,e);function t(n,r,i,o,a){var s=this.constructor,c=e.call(this,aG(n,{name:r,index:i,operation:o,tree:a}))||this;return c.name=r,c.index=i,c.operation=o,c.tree=a,Object.setPrototypeOf(c,s.prototype),c.message=aG(n,{name:r,index:i,operation:o,tree:a}),c}return t}(Error);var Nn=Q5,z7e=Kr,Y6={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Jg(n,this.path);r&&(r=Kr(r));var i=hl(n,{op:"remove",path:this.from}).removed;return hl(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Jg(n,this.from);return hl(n,{op:"add",path:this.path,value:Kr(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:K5(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},H7e={add:function(e,t,n){return Zg(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Y6.move,copy:Y6.copy,test:Y6.test,_get:Y6._get};function Jg(e,t){if(t=="")return e;var n={op:"_get",path:t};return hl(e,n),n.value}function hl(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):ev(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=Jg(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=K5(e,t.value),a.test===!1)throw new Nn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new Nn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}}else{r||(e=Kr(e));var s=t.path||"",c=s.split("/"),l=e,u=1,f=c.length,d=void 0,p=void 0,h=void 0;for(typeof n=="function"?h=n:h=ev;;){if(p=c[u],p&&p.indexOf("~")!=-1&&(p=X5(p)),i&&(p=="__proto__"||p=="prototype"&&u>0&&c[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[p]===void 0?d=c.slice(0,u).join("/"):u==f-1&&(d=t.path),d!==void 0&&h(t,0,e,d)),u++,Array.isArray(l)){if(p==="-")p=l.length;else{if(n&&!Zg(p))throw new Nn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);Zg(p)&&(p=~~p)}if(u>=f){if(n&&t.op==="add"&&p>l.length)throw new Nn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var a=H7e[t.op].call(t,l,p,e);if(a.test===!1)throw new Nn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(u>=f){var a=Y6[t.op].call(t,l,p,e);if(a.test===!1)throw new Nn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}if(l=l[p],n&&u<f&&(!l||typeof l!="object"))throw new Nn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function X6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Nn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Kr(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=hl(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function L7e(e,t,n){var r=hl(e,t);if(r.test===!1)throw new Nn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function ev(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Nn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Y6[e.op]){if(typeof e.path!="string")throw new Nn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Nn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Nn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Nn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Xg(e.value))throw new Nn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Nn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Nn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},s=sG([a],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new Nn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Nn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function sG(e,t,n){try{if(!Array.isArray(e))throw new Nn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)X6(Kr(t),Kr(e),n||!0);else{n=n||ev;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Nn)return i;throw i}}function K5(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,a;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!K5(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var s=Object.keys(e);if(o=s.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(s[i]))return!1;for(i=o;i--!==0;)if(a=s[i],!K5(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}var yH={};Mr(yH,{compare:()=>F7e,generate:()=>mH,observe:()=>I7e,unobserve:()=>T7e});var gH=new WeakMap,A7e=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),V7e=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function N7e(e){return gH.get(e)}function _7e(e,t){return e.observers.get(t)}function k7e(e,t){e.observers.delete(t.callback)}function T7e(e,t){t.unobserve()}function I7e(e,t){var n=[],r,i=N7e(e);if(!i)i=new A7e(e),gH.set(e,i);else{var o=_7e(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Kr(e),t){r.callback=t,r.next=null;var a=function(){mH(r)},s=function(){clearTimeout(r.next),r.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return r.patches=n,r.object=e,r.unobserve=function(){mH(r),clearTimeout(r.next),k7e(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},i.observers.set(t,new V7e(t,r)),r}function mH(e,t){t===void 0&&(t=!1);var n=gH.get(e.object);vH(n.value,e.object,e.patches,"",t),e.patches.length&&X6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function vH(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=Kg(t),a=Kg(e),s=!1,c=!1,l=a.length-1;l>=0;l--){var u=a[l],f=e[u];if(Qg(t,u)&&!(t[u]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof f=="object"&&f!=null&&typeof d=="object"&&d!=null&&Array.isArray(f)===Array.isArray(d)?vH(f,d,n,r+"/"+Oa(u),i):f!==d&&(s=!0,i&&n.push({op:"test",path:r+"/"+Oa(u),value:Kr(f)}),n.push({op:"replace",path:r+"/"+Oa(u),value:Kr(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Oa(u),value:Kr(f)}),n.push({op:"remove",path:r+"/"+Oa(u)}),c=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}),s=!0)}if(!(!c&&o.length==a.length))for(var l=0;l<o.length;l++){var u=o[l];!Qg(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Oa(u),value:Kr(t[u])})}}}function F7e(e,t,n){n===void 0&&(n=!1);var r=[];return vH(e,t,r,"",n),r}var cXe=Object.assign({},hH,yH,{JsonPatchError:Q5,deepClone:Kr,escapePathComponent:Oa,unescapePathComponent:X5});var Sw=sse(lG());var wI={};Mr(wI,{Bounds:()=>kn,CanvasHandler:()=>xc,CanvasRenderer:()=>T7,DATE:()=>r1,DAY:()=>Zr,DAYOFYEAR:()=>ja,Dataflow:()=>I3,Debug:()=>CH,Error:()=>J5,EventStream:()=>du,Gradient:()=>XV,GroupItem:()=>P7,HOURS:()=>_1,Handler:()=>r4,HybridHandler:()=>MN,HybridRenderer:()=>dx,Info:()=>xH,Item:()=>O7,MILLISECONDS:()=>Go,MINUTES:()=>k1,MONTH:()=>Jr,Marks:()=>a1,MultiPulse:()=>Nv,None:()=>dG,Operator:()=>Rt,Parameters:()=>Fd,Pulse:()=>uc,QUARTER:()=>n1,RenderType:()=>Cc,Renderer:()=>po,ResourceLoader:()=>JV,SECONDS:()=>uo,SVGHandler:()=>mN,SVGRenderer:()=>Mx,SVGStringRenderer:()=>bN,Scenegraph:()=>bx,TIME_UNITS:()=>yv,Transform:()=>$,View:()=>QT,WEEK:()=>nr,Warn:()=>rv,YEAR:()=>zr,accessor:()=>wi,accessorFields:()=>pr,accessorName:()=>un,array:()=>te,ascending:()=>od,bandwidthNRD:()=>Iv,bin:()=>BL,bootstrapCI:()=>UL,boundClip:()=>SN,boundContext:()=>$7,boundItem:()=>$V,boundMark:()=>GQ,boundStroke:()=>ns,changeset:()=>dc,clampRange:()=>zH,codegenExpression:()=>NC,compare:()=>id,constant:()=>gn,cumulativeLogNormal:()=>Bv,cumulativeNormal:()=>Pd,cumulativeUniform:()=>Gv,dayofyear:()=>mL,debounce:()=>ad,defaultLocale:()=>_d,definition:()=>_v,densityLogNormal:()=>$v,densityNormal:()=>Fv,densityUniform:()=>qv,domChild:()=>yr,domClear:()=>Zo,domCreate:()=>K3,domFind:()=>hN,dotbin:()=>jL,error:()=>B,expressionFunction:()=>Rn,extend:()=>Te,extent:()=>Zi,extentIndex:()=>HH,falsy:()=>ec,fastmap:()=>E3,field:()=>Dr,flush:()=>LH,font:()=>xx,fontFamily:()=>j7,fontSize:()=>rs,format:()=>Ev,formatLocale:()=>Nd,formats:()=>TL,hasOwnProperty:()=>de,id:()=>Q6,identity:()=>_n,inferType:()=>VW,inferTypes:()=>NW,ingest:()=>ct,inherits:()=>ee,inrange:()=>D3,interpolate:()=>w7,interpolateColors:()=>Lu,interpolateRange:()=>By,intersect:()=>wN,intersectBoxLine:()=>Vu,intersectPath:()=>eN,intersectPoint:()=>tN,intersectRule:()=>TQ,isArray:()=>F,isBoolean:()=>A1,isDate:()=>A2,isFunction:()=>Ie,isIterable:()=>AH,isNumber:()=>Oe,isObject:()=>ne,isRegExp:()=>VH,isString:()=>Q,isTuple:()=>Dl,key:()=>sd,lerp:()=>NH,lineHeight:()=>t4,loader:()=>uu,locale:()=>wv,logger:()=>ed,lruCache:()=>_H,markup:()=>CN,merge:()=>kH,mergeConfig:()=>$a,multiLineOffset:()=>yx,one:()=>Pa,pad:()=>TH,panLinear:()=>bH,panLog:()=>MH,panPow:()=>wH,panSymlog:()=>SH,parse:()=>Yne,parseExpression:()=>cf,parseSelector:()=>_i,path:()=>Al,pathCurves:()=>QV,pathEqual:()=>wK,pathParse:()=>Ql,pathRectangle:()=>AQ,pathRender:()=>Nu,pathSymbols:()=>LQ,pathTrail:()=>VQ,peek:()=>je,point:()=>q7,projection:()=>gp,quantileLogNormal:()=>Uv,quantileNormal:()=>$d,quantileUniform:()=>Wv,quantiles:()=>kv,quantizeInterpolator:()=>Uy,quarter:()=>EH,quartiles:()=>Tv,random:()=>i1,randomInteger:()=>Zme,randomKDE:()=>Ov,randomLCG:()=>Kme,randomLogNormal:()=>qL,randomMixture:()=>GL,randomNormal:()=>Rv,randomUniform:()=>WL,read:()=>FL,regressionConstant:()=>Yv,regressionExp:()=>XL,regressionLinear:()=>Qv,regressionLoess:()=>ZL,regressionLog:()=>YL,regressionPoly:()=>KL,regressionPow:()=>QL,regressionQuad:()=>Kv,renderModule:()=>G7,repeat:()=>Z5,resetDefaultLocale:()=>zW,resetSVGClipId:()=>_Q,resetSVGDefIds:()=>Ixe,responseType:()=>IL,runtimeContext:()=>FC,sampleCurve:()=>hu,sampleLogNormal:()=>Pv,sampleNormal:()=>Od,sampleUniform:()=>jv,scale:()=>dt,sceneEqual:()=>EN,sceneFromJSON:()=>YQ,scenePickVisit:()=>rx,sceneToJSON:()=>WQ,sceneVisit:()=>R2,sceneZOrder:()=>nN,scheme:()=>S7,serializeXML:()=>fK,setHybridRendererOptions:()=>Nxe,setRandom:()=>Xme,span:()=>nc,splitAccessPath:()=>$o,stringValue:()=>Z,textMetrics:()=>T1,timeBin:()=>EL,timeFloor:()=>xL,timeFormatLocale:()=>El,timeInterval:()=>sc,timeOffset:()=>bL,timeSequence:()=>wL,timeUnitSpecifier:()=>pL,timeUnits:()=>xv,toBoolean:()=>cd,toDate:()=>ld,toNumber:()=>Gn,toSet:()=>mr,toString:()=>ud,transform:()=>$L,transforms:()=>fc,truncate:()=>IH,truthy:()=>hr,tupleid:()=>De,typeParsers:()=>NL,utcFloor:()=>CL,utcInterval:()=>cc,utcOffset:()=>ML,utcSequence:()=>SL,utcdayofyear:()=>vL,utcquarter:()=>DH,utcweek:()=>yL,version:()=>YAe,visitArray:()=>rc,week:()=>gL,writeConfig:()=>tc,zero:()=>L2,zoomLinear:()=>td,zoomLog:()=>nd,zoomPow:()=>K6,zoomSymlog:()=>rd});function wi(e,t,n){return e.fields=t||[],e.fname=n,e}function un(e){return e==null?null:e.fname}function pr(e){return e==null?null:e.fields}function fG(e){return e.length===1?O7e(e[0]):P7e(e)}var O7e=e=>function(t){return t[e]},P7e=e=>{let t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function B(e){throw Error(e)}function $o(e){let t=[],n=e.length,r=null,i=0,o="",a,s,c;e=e+"";function l(){t.push(o+e.substring(a,s)),o="",a=s+1}for(a=s=0;s<n;++s)if(c=e[s],c==="\\")o+=e.substring(a,s++),a=s;else if(c===r)l(),r=null,i=-1;else{if(r)continue;a===i&&c==='"'||a===i&&c==="'"?(a=s+1,r=c):c==="."&&!i?s>a?l():a=s+1:c==="["?(s>a&&l(),i=a=s+1):c==="]"&&(i||B("Access path missing open bracket: "+e),i>0&&l(),i=0,a=s+1)}return i&&B("Access path missing closing bracket: "+e),r&&B("Access path missing closing quote: "+e),s>a&&(s++,l()),t}function Dr(e,t,n){let r=$o(e);return e=r.length===1?r[0]:e,wi((n&&n.get||fG)(r),[e],t||e)}var Q6=Dr("id"),_n=wi(e=>e,[],"identity"),L2=wi(()=>0,[],"zero"),Pa=wi(()=>1,[],"one"),hr=wi(()=>!0,[],"true"),ec=wi(()=>!1,[],"false");function $7e(e,t,n){let r=[t].concat([].slice.call(n));console[e].apply(console,r)}var dG=0,J5=1,rv=2,xH=3,CH=4;function ed(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$7e,r=e||dG;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=J5&&n(t||"error","ERROR",arguments),this},warn(){return r>=rv&&n(t||"warn","WARN",arguments),this},info(){return r>=xH&&n(t||"log","INFO",arguments),this},debug(){return r>=CH&&n(t||"log","DEBUG",arguments),this}}}var F=Array.isArray;function ne(e){return e===Object(e)}var uG=e=>e!=="__proto__";function $a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(let o in i)if(o==="signals")r.signals=B7e(r.signals,i.signals);else{let a=o==="legend"?{layout:1}:o==="style"?!0:null;tc(r,o,i[o],a)}return r},{})}function tc(e,t,n,r){if(!uG(t))return;let i,o;if(ne(n)&&!F(n)){o=ne(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?tc(o,i,n[i]):uG(i)&&(o[i]=n[i])}else e[t]=n}function B7e(e,t){if(e==null)return t;let n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function je(e){return e[e.length-1]}function Gn(e){return e==null||e===""?null:+e}var pG=e=>t=>e*Math.exp(t),hG=e=>t=>Math.log(e*t),mG=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),gG=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,nv=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function iv(e,t,n,r){let i=n(e[0]),o=n(je(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function bH(e,t){return iv(e,t,Gn,_n)}function MH(e,t){var n=Math.sign(e[0]);return iv(e,t,hG(n),pG(n))}function wH(e,t,n){return iv(e,t,nv(n),nv(1/n))}function SH(e,t,n){return iv(e,t,mG(n),gG(n))}function ov(e,t,n,r,i){let o=r(e[0]),a=r(je(e)),s=t!=null?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function td(e,t,n){return ov(e,t,n,Gn,_n)}function nd(e,t,n){let r=Math.sign(e[0]);return ov(e,t,n,hG(r),pG(r))}function K6(e,t,n,r){return ov(e,t,n,nv(r),nv(1/r))}function rd(e,t,n,r){return ov(e,t,n,mG(r),gG(r))}function EH(e){return 1+~~(new Date(e).getMonth()/3)}function DH(e){return 1+~~(new Date(e).getUTCMonth()/3)}function te(e){return e!=null?F(e)?e:[e]:[]}function zH(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Ie(e){return typeof e=="function"}var U7e="descending";function id(e,t,n){n=n||{},t=te(t)||[];let r=[],i=[],o={},a=n.comparator||j7e;return te(e).forEach((s,c)=>{s!=null&&(r.push(t[c]===U7e?-1:1),i.push(s=Ie(s)?s:Dr(s,null,n)),(pr(s)||[]).forEach(l=>o[l]=1))}),i.length===0?null:wi(a(i,r),Object.keys(o))}var od=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),j7e=(e,t)=>e.length===1?q7e(e[0],t[0]):G7e(e,t,e.length),q7e=(e,t)=>function(n,r){return od(e(n),e(r))*t},G7e=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;a===0&&++s<n;)o=e[s],a=od(o(r),o(i));return a*t[s]});function gn(e){return Ie(e)?e:()=>e}function ad(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Te(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Zi(e,t){let n=0,r,i,o,a;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=a=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>a&&(a=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=a=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>a&&(a=i))}return[o,a]}function HH(e,t){let n=e.length,r=-1,i,o,a,s,c;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=c=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,c=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=c=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,c=r))}return[s,c]}var W7e=Object.prototype.hasOwnProperty;function de(e,t){return W7e.call(e,t)}var tv={};function E3(e){let t={},n;function r(o){return de(t,o)&&t[o]!==tv}let i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,a){return r(o)||(++i.size,t[o]===tv&&--i.empty),t[o]=a,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=tv),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){let o={},a=0;for(let s in t){let c=t[s];c!==tv&&(!n||!n(c))&&(o[s]=c,++a)}i.size=a,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function LH(e,t,n,r,i,o){if(!n&&n!==0)return o;let a=+n,s=e[0],c=je(e),l;c<s&&(l=s,s=c,c=l),l=Math.abs(t-s);let u=Math.abs(c-t);return l<u&&l<=a?r:u<=a?i:o}function ee(e,t,n){let r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Te(r,n)}function D3(e,t,n,r){let i=t[0],o=t[t.length-1],a;return i>o&&(a=i,i=o,o=a),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function A1(e){return typeof e=="boolean"}function A2(e){return Object.prototype.toString.call(e)==="[object Date]"}function AH(e){return e&&Ie(e[Symbol.iterator])}function Oe(e){return typeof e=="number"}function VH(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Q(e){return typeof e=="string"}function sd(e,t,n){e&&(e=t?te(e).map(s=>s.replace(/\\(.)/g,"$1")):te(e));let r=e&&e.length,i=n&&n.get||fG,o=s=>i(t?[s]:$o(s)),a;if(!r)a=function(){return""};else if(r===1){let s=o(e[0]);a=function(c){return""+s(c)}}else{let s=e.map(o);a=function(c){let l=""+s[0](c),u=0;for(;++u<r;)l+="|"+s[u](c);return l}}return wi(a,e,"key")}function NH(e,t){let n=e[0],r=je(e),i=+t;return i?i===1?r:n+i*(r-n):n}var Y7e=1e4;function _H(e){e=+e||Y7e;let t,n,r,i=()=>{t={},n={},r=0},o=(a,s)=>(++r>e&&(n=t,t={},r=1),t[a]=s);return i(),{clear:i,has:a=>de(t,a)||de(n,a),get:a=>de(t,a)?t[a]:de(n,a)?o(a,n[a]):void 0,set:(a,s)=>de(t,a)?t[a]=s:o(a,s)}}function kH(e,t,n,r){let i=t.length,o=n.length;if(!o)return t;if(!i)return n;let a=r||new t.constructor(i+o),s=0,c=0,l=0;for(;s<i&&c<o;++l)a[l]=e(t[s],n[c])>0?n[c++]:t[s++];for(;s<i;++s,++l)a[l]=t[s];for(;c<o;++c,++l)a[l]=n[c];return a}function Z5(e,t){let n="";for(;--t>=0;)n+=e;return n}function TH(e,t,n,r){let i=n||" ",o=e+"",a=t-o.length;return a<=0?o:r==="left"?Z5(i,a)+o:r==="center"?Z5(i,~~(a/2))+o+Z5(i,Math.ceil(a/2)):o+Z5(i,a)}function nc(e){return e&&je(e)-e[0]||0}function Z(e){return F(e)?"["+e.map(Z)+"]":ne(e)||Q(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function cd(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}var X7e=e=>Oe(e)||A2(e)?e:Date.parse(e);function ld(e,t){return t=t||X7e,e==null||e===""?null:t(e)}function ud(e){return e==null||e===""?null:e+""}function mr(e){let t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function IH(e,t,n,r){let i=r??"\u2026",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:n==="left"?i+o.slice(a-s):n==="center"?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function rc(e,t,n){if(e)if(t){let r=e.length;for(let i=0;i<r;++i){let o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var vG={},FH={},RH=34,fd=10,OH=13;function xG(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Q7e(e,t){var n=xG(e);return function(r,i){return t(n(r),i,e)}}function yG(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function V1(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function K7e(e){return e<0?"-"+V1(-e,6):e>9999?"+"+V1(e,6):V1(e,4)}function Z7e(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":K7e(e.getUTCFullYear(),4)+"-"+V1(e.getUTCMonth()+1,2)+"-"+V1(e.getUTCDate(),2)+(i?"T"+V1(t,2)+":"+V1(n,2)+":"+V1(r,2)+"."+V1(i,3)+"Z":r?"T"+V1(t,2)+":"+V1(n,2)+":"+V1(r,2)+"Z":n||t?"T"+V1(t,2)+":"+V1(n,2)+"Z":"")}function PH(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var p,h,m=i(f,function(g,v){if(p)return p(g,v-1);h=g,p=d?Q7e(g,d):xG(g)});return m.columns=h||[],m}function i(f,d){var p=[],h=f.length,m=0,g=0,v,y=h<=0,C=!1;f.charCodeAt(h-1)===fd&&--h,f.charCodeAt(h-1)===OH&&--h;function b(){if(y)return FH;if(C)return C=!1,vG;var S,w=m,E;if(f.charCodeAt(w)===RH){for(;m++<h&&f.charCodeAt(m)!==RH||f.charCodeAt(++m)===RH;);return(S=m)>=h?y=!0:(E=f.charCodeAt(m++))===fd?C=!0:E===OH&&(C=!0,f.charCodeAt(m)===fd&&++m),f.slice(w+1,S-1).replace(/""/g,'"')}for(;m<h;){if((E=f.charCodeAt(S=m++))===fd)C=!0;else if(E===OH)C=!0,f.charCodeAt(m)===fd&&++m;else if(E!==n)continue;return f.slice(w,S)}return y=!0,f.slice(w,h)}for(;(v=b())!==FH;){for(var M=[];v!==vG&&v!==FH;)M.push(v),v=b();d&&(M=d(M,g++))==null||p.push(M)}return p}function o(f,d){return f.map(function(p){return d.map(function(h){return u(p[h])}).join(e)})}function a(f,d){return d==null&&(d=yG(f)),[d.map(u).join(e)].concat(o(f,d)).join(`
`)}function s(f,d){return d==null&&(d=yG(f)),o(f,d).join(`
`)}function c(f){return f.map(l).join(`
`)}function l(f){return f.map(u).join(e)}function u(f){return f==null?"":f instanceof Date?Z7e(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:c,formatRow:l,formatValue:u}}function $H(e){return e}function av(e){if(e==null)return $H;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(s,c){c||(t=n=0);var l=2,u=s.length,f=new Array(u);for(f[0]=(t+=s[0])*r+o,f[1]=(n+=s[1])*i+a;l<u;)f[l]=s[l],++l;return f}}function CG(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function BH(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return bG(e,n)})}:bG(e,t)}function bG(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=sv(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function sv(e,t){var n=av(e.transform),r=e.arcs;function i(u,f){f.length&&f.pop();for(var d=r[u<0?~u:u],p=0,h=d.length;p<h;++p)f.push(n(d[p],p));u<0&&CG(f,h)}function o(u){return n(u)}function a(u){for(var f=[],d=0,p=u.length;d<p;++d)i(u[d],f);return f.length<2&&f.push(f[0]),f}function s(u){for(var f=a(u);f.length<4;)f.push(f[0]);return f}function c(u){return u.map(s)}function l(u){var f=u.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(l)};case"Point":d=o(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(o);break;case"LineString":d=a(u.arcs);break;case"MultiLineString":d=u.arcs.map(a);break;case"Polygon":d=c(u.arcs);break;case"MultiPolygon":d=u.arcs.map(c);break;default:return null}return{type:f,coordinates:d}}return l(t)}function UH(e,t){var n={},r={},i={},o=[],a=-1;t.forEach(function(l,u){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++a],t[a]=l,t[u]=d)}),t.forEach(function(l){var u=s(l),f=u[0],d=u[1],p,h;if(p=i[f])if(delete i[p.end],p.push(l),p.end=d,h=r[d]){delete r[h.start];var m=h===p?p:p.concat(h);r[m.start=p.start]=i[m.end=h.end]=m}else r[p.start]=i[p.end]=p;else if(p=r[d])if(delete r[p.start],p.unshift(l),p.start=f,h=i[f]){delete i[h.end];var g=h===p?p:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[p.start]=i[p.end]=p;else p=[l],r[p.start=f]=i[p.end=d]=p});function s(l){var u=e.arcs[l<0?~l:l],f=u[0],d;return e.transform?(d=[0,0],u.forEach(function(p){d[0]+=p[0],d[1]+=p[1]})):d=u[u.length-1],l<0?[d,f]:[f,d]}function c(l,u){for(var f in l){var d=l[f];delete u[d.start],delete d.start,delete d.end,d.forEach(function(p){n[p<0?~p:p]=1}),o.push(d)}}return c(i,r),c(r,i),t.forEach(function(l){n[l<0?~l:l]||o.push([l])}),o}function jH(e){return sv(e,MG.apply(this,arguments))}function MG(e,t,n){var r,i,o;if(arguments.length>1)r=J7e(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:UH(e,r)}}function J7e(e,t,n){var r=[],i=[],o;function a(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function s(f){f.forEach(a)}function c(f){f.forEach(s)}function l(f){f.forEach(c)}function u(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(u);break;case"LineString":s(f.arcs);break;case"MultiLineString":case"Polygon":c(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return u(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function Si(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qH(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function co(e){let t,n,r;e.length!==2?(t=Si,n=(s,c)=>Si(e(s),c),r=(s,c)=>e(s)-c):(t=e===Si||e===qH?e:npe,n=e,r=e);function i(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{let f=l+u>>>1;n(s[f],c)<0?l=f+1:u=f}while(l<u)}return l}function o(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{let f=l+u>>>1;n(s[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function a(s,c,l=0,u=s.length){let f=i(s,c,l,u-1);return f>l&&r(s[f-1],c)>-r(s[f],c)?f-1:f}return{left:i,center:a,right:o}}function npe(){return 0}function dd(e){return e===null?NaN:+e}function*wG(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}var SG=co(Si),ml=SG.right,GH=SG.left,rpe=co(dd).center,V2=ml;function WH(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i))}if(n>1)return o/(n-1)}function cv(e,t){let n=WH(e,t);return n&&Math.sqrt(n)}var vn=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){let n=this._partials,r=0;for(let i=0;i<this._n&&i<32;i++){let o=n[i],a=t+o,s=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);s&&(n[r++]=s),t=a}return n[r]=t,this._n=r+1,this}valueOf(){let t=this._partials,n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}};var Z6=class extends Map{constructor(t,n=zG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let[r,i]of t)this.set(r,i)}get(t){return super.get(YH(this,t))}has(t){return super.has(YH(this,t))}set(t,n){return super.set(EG(this,t),n)}delete(t){return super.delete(DG(this,t))}},ic=class extends Set{constructor(t,n=zG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let r of t)this.add(r)}has(t){return super.has(YH(this,t))}add(t){return super.add(EG(this,t))}delete(t){return super.delete(DG(this,t))}};function YH({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function EG({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function DG({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function zG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function lv(e,t){return Array.from(t,n=>e[n])}function HG(e=Si){if(e===Si)return XH;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{let r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function XH(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var ipe=Math.sqrt(50),ope=Math.sqrt(10),ape=Math.sqrt(2);function uv(e,t,n){let r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=ipe?10:o>=ope?5:o>=ape?2:1,s,c,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(e*l),c=Math.round(t*l),s/l<e&&++s,c/l>t&&--c,l=-l):(l=Math.pow(10,i)*a,s=Math.round(e/l),c=Math.round(t/l),s*l<e&&++s,c*l>t&&--c),c<s&&.5<=n&&n<2?uv(e,t,n*2):[s,c,l]}function gl(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];let r=t<e,[i,o,a]=r?uv(t,e,n):uv(e,t,n);if(!(o>=i))return[];let s=o-i+1,c=new Array(s);if(r)if(a<0)for(let l=0;l<s;++l)c[l]=(o-l)/-a;else for(let l=0;l<s;++l)c[l]=(o-l)*a;else if(a<0)for(let l=0;l<s;++l)c[l]=(i+l)/-a;else for(let l=0;l<s;++l)c[l]=(i+l)*a;return c}function pd(e,t,n){return t=+t,e=+e,n=+n,uv(e,t,n)[2]}function Ji(e,t,n){t=+t,e=+e,n=+n;let r=t<e,i=r?pd(t,e,n):pd(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Bo(e,t){let n;if(t===void 0)for(let r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function vl(e,t){let n;if(t===void 0)for(let r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function fv(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?XH:HG(i);r>n;){if(r-n>600){let c=r-n+1,l=t-n+1,u=Math.log(c),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(c-f)/c)*(l-c/2<0?-1:1),p=Math.max(n,Math.floor(t-l*f/c+d)),h=Math.min(r,Math.floor(t+(c-l)*f/c+d));fv(e,t,p,h,i)}let o=e[t],a=n,s=r;for(hd(e,n,t),i(e[r],o)>0&&hd(e,n,r);a<s;){for(hd(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}i(e[n],o)===0?hd(e,n,s):(++s,hd(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function hd(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function yl(e,t,n){if(e=Float64Array.from(wG(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return vl(e);if(t>=1)return Bo(e);var r,i=(r-1)*t,o=Math.floor(i),a=Bo(fv(e,o).subarray(0,o+1)),s=vl(e.subarray(o+1));return a+(s-a)*(i-o)}}function md(e,t,n=dd){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(i-o)}}function dv(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function J6(e,t){return yl(e,.5,t)}function*cpe(e){for(let t of e)yield*sO(t)}function eu(e){return Array.from(cpe(e))}function Wn(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function tu(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function pv(e,...t){e=new ic(e),t=t.map(lpe);e:for(let n of e)for(let r of t)if(!r.has(n)){e.delete(n);continue e}return e}function lpe(e){return e instanceof ic?e:new ic(e)}function hv(...e){let t=new ic;for(let n of e)for(let r of n)t.add(r);return t}function LG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function xl(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Ba(e){return e=xl(Math.abs(e)),e?e[1]:NaN}function AG(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function VG(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var upe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lo(e){if(!(t=upe.exec(e)))throw new Error("invalid format: "+e);var t;return new mv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}lo.prototype=mv.prototype;function mv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}mv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function NG(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var QH;function _G(e,t){var n=xl(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(QH=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+xl(e,Math.max(0,t+o-1))[0]}function KH(e,t){var n=xl(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var ZH={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:LG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>KH(e*100,t),r:KH,s:_G,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function JH(e){return e}var kG=Array.prototype.map,TG=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function gd(e){var t=e.grouping===void 0||e.thousands===void 0?JH:AG(kG.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?JH:VG(kG.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(f){f=lo(f);var d=f.fill,p=f.align,h=f.sign,m=f.symbol,g=f.zero,v=f.width,y=f.comma,C=f.precision,b=f.trim,M=f.type;M==="n"?(y=!0,M="g"):ZH[M]||(C===void 0&&(C=12),b=!0,M="g"),(g||d==="0"&&p==="=")&&(g=!0,d="0",p="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",w=m==="$"?r:/[%p]/.test(M)?a:"",E=ZH[M],D=/[defgprs%]/.test(M);C=C===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function L(A){var j=S,V=w,_,N,I;if(M==="c")V=E(A)+V,A="";else{A=+A;var W=A<0||1/A<0;if(A=isNaN(A)?c:E(Math.abs(A),C),b&&(A=NG(A)),W&&+A==0&&h!=="+"&&(W=!1),j=(W?h==="("?h:s:h==="-"||h==="("?"":h)+j,V=(M==="s"?TG[8+QH/3]:"")+V+(W&&h==="("?")":""),D){for(_=-1,N=A.length;++_<N;)if(I=A.charCodeAt(_),48>I||I>57){V=(I===46?i+A.slice(_+1):A.slice(_))+V,A=A.slice(0,_);break}}}y&&!g&&(A=t(A,1/0));var X=j.length+A.length+V.length,J=X<v?new Array(v-X+1).join(d):"";switch(y&&g&&(A=t(J+A,J.length?v-V.length:1/0),J=""),p){case"<":A=j+A+V+J;break;case"=":A=j+J+A+V;break;case"^":A=J.slice(0,X=J.length>>1)+j+A+V+J.slice(X);break;default:A=J+j+A+V;break}return o(A)}return L.toString=function(){return f+""},L}function u(f,d){var p=l((f=lo(f),f.type="f",f)),h=Math.max(-8,Math.min(8,Math.floor(Ba(d)/3)))*3,m=Math.pow(10,-h),g=TG[8+h/3];return function(v){return p(m*v)+g}}return{format:l,formatPrefix:u}}var gv,z3,nu;eL({thousands:",",grouping:[3],currency:["$",""]});function eL(e){return gv=gd(e),z3=gv.format,nu=gv.formatPrefix,gv}function vd(e){return Math.max(0,-Ba(Math.abs(e)))}function yd(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ba(t)/3)))*3-Ba(Math.abs(e)))}function xd(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ba(t)-Ba(e))+1}var tL=new Date,nL=new Date;function Jt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{let a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{let c=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return c;let l;do c.push(l=new Date(+o)),t(o,s),e(o);while(l<o&&o<a);return c},i.filter=o=>Jt(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(tL.setTime(+o),nL.setTime(+a),e(tL),e(nL),Math.floor(n(tL,nL))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}var N2=Jt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);N2.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Jt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):N2);var IG=N2.range;var Ei=Jt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*1e3)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds()),FG=Ei.range;var H3=Jt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getMinutes()),fpe=H3.range,L3=Jt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes()),dpe=L3.range;var A3=Jt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3-e.getMinutes()*6e4)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getHours()),ppe=A3.range,V3=Jt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours()),hpe=V3.range;var N1=Jt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1),mpe=N1.range,Uo=Jt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1),gpe=Uo.range,vv=Jt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5)),vpe=vv.range;function Ml(e){return Jt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/6048e5)}var jo=Ml(0),ru=Ml(1),OG=Ml(2),PG=Ml(3),N3=Ml(4),$G=Ml(5),BG=Ml(6),UG=jo.range,ype=ru.range,xpe=OG.range,Cpe=PG.range,bpe=N3.range,Mpe=$G.range,wpe=BG.range;function wl(e){return Jt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/6048e5)}var qo=wl(0),iu=wl(1),jG=wl(2),qG=wl(3),_3=wl(4),GG=wl(5),WG=wl(6),YG=qo.range,Spe=iu.range,Epe=jG.range,Dpe=qG.range,zpe=_3.range,Hpe=GG.range,Lpe=WG.range;var oc=Jt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),Ape=oc.range,ac=Jt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),Vpe=ac.range;var e1=Jt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());e1.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Jt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});var Npe=e1.range,t1=Jt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());t1.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Jt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});var _pe=t1.range;function QG(e,t,n,r,i,o){let a=[[Ei,1,1e3],[Ei,5,5*1e3],[Ei,15,15*1e3],[Ei,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[r,1,864e5],[r,2,2*864e5],[n,1,6048e5],[t,1,2592e6],[t,3,3*2592e6],[e,1,31536e6]];function s(l,u,f){let d=u<l;d&&([l,u]=[u,l]);let p=f&&typeof f.range=="function"?f:c(l,u,f),h=p?p.range(l,+u+1):[];return d?h.reverse():h}function c(l,u,f){let d=Math.abs(u-l)/f,p=co(([,,g])=>g).right(a,d);if(p===a.length)return e.every(Ji(l/31536e6,u/31536e6,f));if(p===0)return N2.every(Math.max(Ji(l,u,f),1));let[h,m]=a[d/a[p-1][2]<a[p][2]/d?p-1:p];return h.every(m)}return[s,c]}var[rL,iL]=QG(t1,ac,qo,vv,V3,L3),[oL,aL]=QG(e1,oc,jo,N1,A3,H3);var zr="year",n1="quarter",Jr="month",nr="week",r1="date",Zr="day",ja="dayofyear",_1="hours",k1="minutes",uo="seconds",Go="milliseconds",yv=[zr,n1,Jr,nr,r1,Zr,ja,_1,k1,uo,Go],sL=yv.reduce((e,t,n)=>(e[t]=1+n,e),{});function xv(e){let t=te(e).slice(),n={};return t.length||B("Missing time unit."),t.forEach(i=>{de(sL,i)?n[i]=1:B(`Invalid time unit: ${i}.`)}),(n[nr]||n[Zr]?1:0)+(n[n1]||n[Jr]||n[r1]?1:0)+(n[ja]?1:0)>1&&B(`Incompatible time units: ${e}`),t.sort((i,o)=>sL[i]-sL[o]),t}var Tpe={[zr]:"%Y ",[n1]:"Q%q ",[Jr]:"%b ",[r1]:"%d ",[nr]:"W%U ",[Zr]:"%a ",[ja]:"%j ",[_1]:"%H:00",[k1]:"00:%M",[uo]:":%S",[Go]:".%L",[`${zr}-${Jr}`]:"%Y-%m ",[`${zr}-${Jr}-${r1}`]:"%Y-%m-%d ",[`${_1}-${k1}`]:"%H:%M"};function pL(e,t){let n=Te({},Tpe,t),r=xv(e),i=r.length,o="",a=0,s,c;for(a=0;a<i;)for(s=r.length;s>a;--s)if(c=r.slice(a,s).join("-"),n[c]!=null){o+=n[c],a=s;break}return o.trim()}var Sl=new Date;function hL(e){return Sl.setFullYear(e),Sl.setMonth(0),Sl.setDate(1),Sl.setHours(0,0,0,0),Sl}function mL(e){return JG(new Date(e))}function gL(e){return cL(new Date(e))}function JG(e){return N1.count(hL(e.getFullYear())-1,e)}function cL(e){return jo.count(hL(e.getFullYear())-1,e)}function lL(e){return hL(e).getDay()}function Ipe(e,t,n,r,i,o,a){if(0<=e&&e<100){let s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function vL(e){return eW(new Date(e))}function yL(e){return uL(new Date(e))}function eW(e){let t=Date.UTC(e.getUTCFullYear(),0,1);return Uo.count(t-1,e)}function uL(e){let t=Date.UTC(e.getUTCFullYear(),0,1);return qo.count(t-1,e)}function fL(e){return Sl.setTime(Date.UTC(e,0,1)),Sl.getUTCDay()}function Fpe(e,t,n,r,i,o,a){if(0<=e&&e<100){let s=new Date(Date.UTC(-1,t,n,r,i,o,a));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(e,t,n,r,i,o,a))}function tW(e,t,n,r,i){let o=t||1,a=je(e),s=(v,y,C)=>(C=C||v,Rpe(n[C],r[C],v===a&&o,y)),c=new Date,l=mr(e),u=l[zr]?s(zr):gn(2012),f=l[Jr]?s(Jr):l[n1]?s(n1):L2,d=l[nr]&&l[Zr]?s(Zr,1,nr+Zr):l[nr]?s(nr,1):l[Zr]?s(Zr,1):l[r1]?s(r1,1):l[ja]?s(ja,1):Pa,p=l[_1]?s(_1):L2,h=l[k1]?s(k1):L2,m=l[uo]?s(uo):L2,g=l[Go]?s(Go):L2;return function(v){c.setTime(+v);let y=u(c);return i(y,f(c),d(c,y),p(c),h(c),m(c),g(c))}}function Rpe(e,t,n,r){let i=n<=1?e:r?(o,a)=>r+n*Math.floor((e(o,a)-r)/n):(o,a)=>n*Math.floor(e(o,a)/n);return t?(o,a)=>t(i(o,a),a):i}function ou(e,t,n){return t+e*7-(n+6)%7}var Ope={[zr]:e=>e.getFullYear(),[n1]:e=>Math.floor(e.getMonth()/3),[Jr]:e=>e.getMonth(),[r1]:e=>e.getDate(),[_1]:e=>e.getHours(),[k1]:e=>e.getMinutes(),[uo]:e=>e.getSeconds(),[Go]:e=>e.getMilliseconds(),[ja]:e=>JG(e),[nr]:e=>cL(e),[nr+Zr]:(e,t)=>ou(cL(e),e.getDay(),lL(t)),[Zr]:(e,t)=>ou(1,e.getDay(),lL(t))},Ppe={[n1]:e=>3*e,[nr]:(e,t)=>ou(e,0,lL(t))};function xL(e,t){return tW(e,t||1,Ope,Ppe,Ipe)}var $pe={[zr]:e=>e.getUTCFullYear(),[n1]:e=>Math.floor(e.getUTCMonth()/3),[Jr]:e=>e.getUTCMonth(),[r1]:e=>e.getUTCDate(),[_1]:e=>e.getUTCHours(),[k1]:e=>e.getUTCMinutes(),[uo]:e=>e.getUTCSeconds(),[Go]:e=>e.getUTCMilliseconds(),[ja]:e=>eW(e),[nr]:e=>uL(e),[Zr]:(e,t)=>ou(1,e.getUTCDay(),fL(t)),[nr+Zr]:(e,t)=>ou(uL(e),e.getUTCDay(),fL(t))},Bpe={[n1]:e=>3*e,[nr]:(e,t)=>ou(e,0,fL(t))};function CL(e,t){return tW(e,t||1,$pe,Bpe,Fpe)}var Upe={[zr]:e1,[n1]:oc.every(3),[Jr]:oc,[nr]:jo,[r1]:N1,[Zr]:N1,[ja]:N1,[_1]:A3,[k1]:H3,[uo]:Ei,[Go]:N2},jpe={[zr]:t1,[n1]:ac.every(3),[Jr]:ac,[nr]:qo,[r1]:Uo,[Zr]:Uo,[ja]:Uo,[_1]:V3,[k1]:L3,[uo]:Ei,[Go]:N2};function sc(e){return Upe[e]}function cc(e){return jpe[e]}function nW(e,t,n){return e?e.offset(t,n):void 0}function bL(e,t,n){return nW(sc(e),t,n)}function ML(e,t,n){return nW(cc(e),t,n)}function rW(e,t,n,r){return e?e.range(t,n,r):void 0}function wL(e,t,n,r){return rW(sc(e),t,n,r)}function SL(e,t,n,r){return rW(cc(e),t,n,r)}var Md=1e3,wd=Md*60,Sd=wd*60,Cv=Sd*24,qpe=Cv*7,KG=Cv*30,dL=Cv*365,iW=[zr,Jr,r1,_1,k1,uo,Go],Ed=iW.slice(0,-1),Dd=Ed.slice(0,-1),zd=Dd.slice(0,-1),Gpe=zd.slice(0,-1),Wpe=[zr,nr],ZG=[zr,Jr],oW=[zr],bd=[[Ed,1,Md],[Ed,5,5*Md],[Ed,15,15*Md],[Ed,30,30*Md],[Dd,1,wd],[Dd,5,5*wd],[Dd,15,15*wd],[Dd,30,30*wd],[zd,1,Sd],[zd,3,3*Sd],[zd,6,6*Sd],[zd,12,12*Sd],[Gpe,1,Cv],[Wpe,1,qpe],[ZG,1,KG],[ZG,3,3*KG],[oW,1,dL]];function EL(e){let t=e.extent,n=e.maxbins||40,r=Math.abs(nc(t))/n,i=co(s=>s[2]).right(bd,r),o,a;return i===bd.length?(o=oW,a=Ji(t[0]/dL,t[1]/dL,n)):i?(i=bd[r/bd[i-1][2]<bd[i][2]/r?i-1:i],o=i[0],a=i[1]):(o=iW,a=Math.max(Ji(t[0],t[1],n),1)),{units:o,step:a}}function DL(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function zL(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Hd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function au(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,c=e.shortMonths,l=Ld(i),u=Ad(i),f=Ld(o),d=Ad(o),p=Ld(a),h=Ad(a),m=Ld(s),g=Ad(s),v=Ld(c),y=Ad(c),C={a:W,A:X,b:J,B:Se,c:null,d:fW,e:fW,f:ghe,g:Dhe,G:Hhe,H:phe,I:hhe,j:mhe,L:gW,m:vhe,M:yhe,p:Ee,q:Xe,Q:hW,s:mW,S:xhe,u:Che,U:bhe,V:Mhe,w:whe,W:She,x:null,X:null,y:Ehe,Y:zhe,Z:Lhe,"%":pW},b={a:zt,A:lt,b:en,B:Ls,c:null,d:dW,e:dW,f:_he,g:Uhe,G:qhe,H:Ahe,I:Vhe,j:Nhe,L:yW,m:khe,M:The,p:W0,q:F4,Q:hW,s:mW,S:Ihe,u:Fhe,U:Rhe,V:Ohe,w:Phe,W:$he,x:null,X:null,y:Bhe,Y:jhe,Z:Ghe,"%":pW},M={a:L,A,b:j,B:V,c:_,d:lW,e:lW,f:lhe,g:cW,G:sW,H:uW,I:uW,j:ohe,L:che,m:ihe,M:ahe,p:D,q:rhe,Q:fhe,s:dhe,S:she,u:Zpe,U:Jpe,V:ehe,w:Kpe,W:the,x:N,X:I,y:cW,Y:sW,Z:nhe,"%":uhe};C.x=S(n,C),C.X=S(r,C),C.c=S(t,C),b.x=S(n,b),b.X=S(r,b),b.c=S(t,b);function S(ge,Qe){return function(nt){var oe=[],jr=-1,Vt=0,di=ge.length,pi,Ca,N8;for(nt instanceof Date||(nt=new Date(+nt));++jr<di;)ge.charCodeAt(jr)===37&&(oe.push(ge.slice(Vt,jr)),(Ca=aW[pi=ge.charAt(++jr)])!=null?pi=ge.charAt(++jr):Ca=pi==="e"?" ":"0",(N8=Qe[pi])&&(pi=N8(nt,Ca)),oe.push(pi),Vt=jr+1);return oe.push(ge.slice(Vt,jr)),oe.join("")}}function w(ge,Qe){return function(nt){var oe=Hd(1900,void 0,1),jr=E(oe,ge,nt+="",0),Vt,di;if(jr!=nt.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(Qe&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(Vt=zL(Hd(oe.y,0,1)),di=Vt.getUTCDay(),Vt=di>4||di===0?iu.ceil(Vt):iu(Vt),Vt=Uo.offset(Vt,(oe.V-1)*7),oe.y=Vt.getUTCFullYear(),oe.m=Vt.getUTCMonth(),oe.d=Vt.getUTCDate()+(oe.w+6)%7):(Vt=DL(Hd(oe.y,0,1)),di=Vt.getDay(),Vt=di>4||di===0?ru.ceil(Vt):ru(Vt),Vt=N1.offset(Vt,(oe.V-1)*7),oe.y=Vt.getFullYear(),oe.m=Vt.getMonth(),oe.d=Vt.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),di="Z"in oe?zL(Hd(oe.y,0,1)).getUTCDay():DL(Hd(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(di+5)%7:oe.w+oe.U*7-(di+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,zL(oe)):DL(oe)}}function E(ge,Qe,nt,oe){for(var jr=0,Vt=Qe.length,di=nt.length,pi,Ca;jr<Vt;){if(oe>=di)return-1;if(pi=Qe.charCodeAt(jr++),pi===37){if(pi=Qe.charAt(jr++),Ca=M[pi in aW?Qe.charAt(jr++):pi],!Ca||(oe=Ca(ge,nt,oe))<0)return-1}else if(pi!=nt.charCodeAt(oe++))return-1}return oe}function D(ge,Qe,nt){var oe=l.exec(Qe.slice(nt));return oe?(ge.p=u.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function L(ge,Qe,nt){var oe=p.exec(Qe.slice(nt));return oe?(ge.w=h.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function A(ge,Qe,nt){var oe=f.exec(Qe.slice(nt));return oe?(ge.w=d.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function j(ge,Qe,nt){var oe=v.exec(Qe.slice(nt));return oe?(ge.m=y.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function V(ge,Qe,nt){var oe=m.exec(Qe.slice(nt));return oe?(ge.m=g.get(oe[0].toLowerCase()),nt+oe[0].length):-1}function _(ge,Qe,nt){return E(ge,t,Qe,nt)}function N(ge,Qe,nt){return E(ge,n,Qe,nt)}function I(ge,Qe,nt){return E(ge,r,Qe,nt)}function W(ge){return a[ge.getDay()]}function X(ge){return o[ge.getDay()]}function J(ge){return c[ge.getMonth()]}function Se(ge){return s[ge.getMonth()]}function Ee(ge){return i[+(ge.getHours()>=12)]}function Xe(ge){return 1+~~(ge.getMonth()/3)}function zt(ge){return a[ge.getUTCDay()]}function lt(ge){return o[ge.getUTCDay()]}function en(ge){return c[ge.getUTCMonth()]}function Ls(ge){return s[ge.getUTCMonth()]}function W0(ge){return i[+(ge.getUTCHours()>=12)]}function F4(ge){return 1+~~(ge.getUTCMonth()/3)}return{format:function(ge){var Qe=S(ge+="",C);return Qe.toString=function(){return ge},Qe},parse:function(ge){var Qe=w(ge+="",!1);return Qe.toString=function(){return ge},Qe},utcFormat:function(ge){var Qe=S(ge+="",b);return Qe.toString=function(){return ge},Qe},utcParse:function(ge){var Qe=w(ge+="",!0);return Qe.toString=function(){return ge},Qe}}}var aW={"-":"",_:" ",0:"0"},Hr=/^\s*\d+/,Ype=/^%/,Xpe=/[\\^$*+?|[\]().{}]/g;function Ht(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Qpe(e){return e.replace(Xpe,"\\$&")}function Ld(e){return new RegExp("^(?:"+e.map(Qpe).join("|")+")","i")}function Ad(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Kpe(e,t,n){var r=Hr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Zpe(e,t,n){var r=Hr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Jpe(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function ehe(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function the(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function sW(e,t,n){var r=Hr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function cW(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function nhe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function rhe(e,t,n){var r=Hr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function ihe(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function lW(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function ohe(e,t,n){var r=Hr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function uW(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ahe(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function she(e,t,n){var r=Hr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function che(e,t,n){var r=Hr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function lhe(e,t,n){var r=Hr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function uhe(e,t,n){var r=Ype.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function fhe(e,t,n){var r=Hr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function dhe(e,t,n){var r=Hr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function fW(e,t){return Ht(e.getDate(),t,2)}function phe(e,t){return Ht(e.getHours(),t,2)}function hhe(e,t){return Ht(e.getHours()%12||12,t,2)}function mhe(e,t){return Ht(1+N1.count(e1(e),e),t,3)}function gW(e,t){return Ht(e.getMilliseconds(),t,3)}function ghe(e,t){return gW(e,t)+"000"}function vhe(e,t){return Ht(e.getMonth()+1,t,2)}function yhe(e,t){return Ht(e.getMinutes(),t,2)}function xhe(e,t){return Ht(e.getSeconds(),t,2)}function Che(e){var t=e.getDay();return t===0?7:t}function bhe(e,t){return Ht(jo.count(e1(e)-1,e),t,2)}function vW(e){var t=e.getDay();return t>=4||t===0?N3(e):N3.ceil(e)}function Mhe(e,t){return e=vW(e),Ht(N3.count(e1(e),e)+(e1(e).getDay()===4),t,2)}function whe(e){return e.getDay()}function She(e,t){return Ht(ru.count(e1(e)-1,e),t,2)}function Ehe(e,t){return Ht(e.getFullYear()%100,t,2)}function Dhe(e,t){return e=vW(e),Ht(e.getFullYear()%100,t,2)}function zhe(e,t){return Ht(e.getFullYear()%1e4,t,4)}function Hhe(e,t){var n=e.getDay();return e=n>=4||n===0?N3(e):N3.ceil(e),Ht(e.getFullYear()%1e4,t,4)}function Lhe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ht(t/60|0,"0",2)+Ht(t%60,"0",2)}function dW(e,t){return Ht(e.getUTCDate(),t,2)}function Ahe(e,t){return Ht(e.getUTCHours(),t,2)}function Vhe(e,t){return Ht(e.getUTCHours()%12||12,t,2)}function Nhe(e,t){return Ht(1+Uo.count(t1(e),e),t,3)}function yW(e,t){return Ht(e.getUTCMilliseconds(),t,3)}function _he(e,t){return yW(e,t)+"000"}function khe(e,t){return Ht(e.getUTCMonth()+1,t,2)}function The(e,t){return Ht(e.getUTCMinutes(),t,2)}function Ihe(e,t){return Ht(e.getUTCSeconds(),t,2)}function Fhe(e){var t=e.getUTCDay();return t===0?7:t}function Rhe(e,t){return Ht(qo.count(t1(e)-1,e),t,2)}function xW(e){var t=e.getUTCDay();return t>=4||t===0?_3(e):_3.ceil(e)}function Ohe(e,t){return e=xW(e),Ht(_3.count(t1(e),e)+(t1(e).getUTCDay()===4),t,2)}function Phe(e){return e.getUTCDay()}function $he(e,t){return Ht(iu.count(t1(e)-1,e),t,2)}function Bhe(e,t){return Ht(e.getUTCFullYear()%100,t,2)}function Uhe(e,t){return e=xW(e),Ht(e.getUTCFullYear()%100,t,2)}function jhe(e,t){return Ht(e.getUTCFullYear()%1e4,t,4)}function qhe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?_3(e):_3.ceil(e),Ht(e.getUTCFullYear()%1e4,t,4)}function Ghe(){return"+0000"}function pW(){return"%"}function hW(e){return+e}function mW(e){return Math.floor(+e/1e3)}var su,cu,bv,lu,Mv;HL({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function HL(e){return su=au(e),cu=su.format,bv=su.parse,lu=su.utcFormat,Mv=su.utcParse,su}function Vd(e){let t={};return n=>t[n]||(t[n]=e(n))}function Whe(e,t){return n=>{let r=e(n),i=r.indexOf(t);if(i<0)return r;let o=Yhe(r,i),a=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+a}}function Yhe(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function bW(e){let t=Vd(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){let i=lo(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Whe(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,a){a=lo(a??",f");let s=Ji(r,i,o),c=Math.max(Math.abs(r),Math.abs(i)),l;if(a.precision==null)switch(a.type){case"s":return isNaN(l=yd(s,c))||(a.precision=l),n(a,c);case"":case"e":case"g":case"p":case"r":{isNaN(l=xd(s,c))||(a.precision=l-(a.type==="e"));break}case"f":case"%":{isNaN(l=vd(s))||(a.precision=l-(a.type==="%")*2);break}}return t(a)}}}var LL;MW();function MW(){return LL=bW({format:z3,formatPrefix:nu})}function wW(e){return bW(gd(e))}function Nd(e){return arguments.length?LL=wW(e):LL}function CW(e,t,n){n=n||{},ne(n)||B(`Invalid time multi-format specifier: ${n}`);let r=t(uo),i=t(k1),o=t(_1),a=t(r1),s=t(nr),c=t(Jr),l=t(n1),u=t(zr),f=e(n[Go]||".%L"),d=e(n[uo]||":%S"),p=e(n[k1]||"%I:%M"),h=e(n[_1]||"%I %p"),m=e(n[r1]||n[Zr]||"%a %d"),g=e(n[nr]||"%b %d"),v=e(n[Jr]||"%B"),y=e(n[n1]||"%B"),C=e(n[zr]||"%Y");return b=>(r(b)<b?f:i(b)<b?d:o(b)<b?p:a(b)<b?h:c(b)<b?s(b)<b?m:g:u(b)<b?l(b)<b?v:y:C)(b)}function SW(e){let t=Vd(e.format),n=Vd(e.utcFormat);return{timeFormat:r=>Q(r)?t(r):CW(t,sc,r),utcFormat:r=>Q(r)?n(r):CW(n,cc,r),timeParse:Vd(e.parse),utcParse:Vd(e.utcParse)}}var AL;EW();function EW(){return AL=SW({format:cu,parse:bv,utcFormat:lu,utcParse:Mv})}function DW(e){return SW(au(e))}function El(e){return arguments.length?AL=DW(e):AL}var VL=(e,t)=>Te({},e,t);function wv(e,t){let n=e?wW(e):Nd(),r=t?DW(t):El();return VL(n,r)}function _d(e,t){let n=arguments.length;return n&&n!==2&&B("defaultLocale expects either zero or two arguments."),n?VL(Nd(e),El(t)):VL(Nd(),El())}function zW(){return MW(),EW(),_d()}var Xhe=/^(data:|([A-Za-z]+:)?\/\/)/,Qhe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Khe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,HW="file://";function Zhe(e,t){return n=>({options:n||{},sanitize:eme,load:Jhe,fileAccess:!!t,file:tme(t),http:rme(e)})}function Jhe(e,t){return Gt(this,null,function*(){let n=yield this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)})}function eme(e,t){return Gt(this,null,function*(){t=Te({},this.options,t);let n=this.fileAccess,r={href:null},i,o,a,s=Qhe.test(e.replace(Khe,""));(e==null||typeof e!="string"||!s)&&B("Sanitize failure, invalid URI: "+Z(e));let c=Xhe.test(e);return(a=t.baseURL)&&!c&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),o=(i=e.startsWith(HW))||t.mode==="file"||t.mode!=="http"&&!c&&n,i?e=e.slice(HW.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r})}function tme(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):nme}function nme(){return Gt(this,null,function*(){B("No file system access.")})}function rme(e){return e?function(t,n){return Gt(this,null,function*(){let r=Te({},this.options.http,n),i=n&&n.response,o=yield e(t,r);return o.ok?Ie(o[i])?o[i]():o.text():B(o.status+""+o.statusText)})}:ime}function ime(){return Gt(this,null,function*(){B("No HTTP fetch method available.")})}var ome=e=>e!=null&&e===e,ame=e=>e==="true"||e==="false"||e===!0||e===!1,sme=e=>!Number.isNaN(Date.parse(e)),AW=e=>!Number.isNaN(+e)&&!(e instanceof Date),cme=e=>AW(e)&&Number.isInteger(+e),NL={boolean:cd,integer:Gn,number:Gn,date:ld,string:ud,unknown:_n},Sv=[ame,cme,AW,sme],lme=["boolean","integer","number","date"];function VW(e,t){if(!e||!e.length)return"unknown";let n=e.length,r=Sv.length,i=Sv.map((o,a)=>a+1);for(let o=0,a=0,s,c;o<n;++o)for(c=t?e[o][t]:e[o],s=0;s<r;++s)if(i[s]&&ome(c)&&!Sv[s](c)&&(i[s]=0,++a,a===Sv.length))return"string";return lme[i.reduce((o,a)=>o===0?a:o,0)-1]}function NW(e,t){return t.reduce((n,r)=>(n[r]=VW(e,r),n),{})}function LW(e){let t=function(n,r){let i={delimiter:e};return _L(n,r?Te(r,i):i)};return t.responseType="text",t}function _L(e,t){return t.header&&(e=t.header.map(Z).join(t.delimiter)+`
`+e),PH(t.delimiter).parse(e+"")}_L.responseType="text";function ume(e){return typeof Buffer=="function"&&Ie(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function kL(e,t){let n=t&&t.property?Dr(t.property):_n;return ne(e)&&!ume(e)?fme(n(e),t):n(JSON.parse(e))}kL.responseType="json";function fme(e,t){return!F(e)&&AH(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}var dme={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function _W(e,t){let n,r,i,o;return e=kL(e,t),t&&t.feature?(n=BH,i=t.feature):t&&t.mesh?(n=jH,i=t.mesh,o=dme[t.filter]):B("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):B("Invalid TopoJSON object: "+i),r&&r.features||[r]}_W.responseType="json";var Ev={dsv:_L,csv:LW(","),tsv:LW("	"),json:kL,topojson:_W};function TL(e,t){return arguments.length>1?(Ev[e]=t,this):de(Ev,e)?Ev[e]:null}function IL(e){let t=TL(e);return t&&t.responseType||"text"}function FL(e,t,n,r){t=t||{};let i=TL(t.type||"json");return i||B("Unknown data format type: "+t.type),e=i(e,t),t.parse&&pme(e,t.parse,n,r),de(e,"columns")&&delete e.columns,e}function pme(e,t,n,r){if(!e.length)return;let i=El();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),a,s,c,l,u,f;t==="auto"&&(t=NW(e,o)),o=Object.keys(t);let d=o.map(p=>{let h=t[p],m,g;if(h&&(h.startsWith("date:")||h.startsWith("utc:")))return m=h.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!NL[h])throw Error("Illegal format pattern: "+p+":"+h);return NL[h]});for(c=0,u=e.length,f=o.length;c<u;++c)for(a=e[c],l=0;l<f;++l)s=o[l],a[s]=d[l](a[s])}var uu=Zhe(typeof fetch<"u"&&fetch,null);function Lv(e){let t=e||_n,n=[],r={};return n.add=i=>{let o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{let o=t(i);if(r[o]){r[o]=0;let a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}function Id(e,t){return Gt(this,null,function*(){try{yield t(e)}catch(n){e.error(n)}})}var PW=Symbol("vega_id"),hme=1;function Dl(e){return!!(e&&De(e))}function De(e){return e[PW]}function $W(e,t){return e[PW]=t,e}function ct(e){let t=e===Object(e)?e:{data:e};return De(t)?t:$W(t,hme++)}function Av(e){return zl(e,ct({}))}function zl(e,t){for(let n in e)t[n]=e[n];return t}function Vv(e,t){return $W(t,De(e))}function Ga(e,t){return e?t?(n,r)=>e(n,r)||De(t(n))-De(t(r)):(n,r)=>e(n,r)||De(n)-De(r):null}function OL(e){return e&&e.constructor===dc}function dc(){let e=[],t=[],n=[],r=[],i=[],o=null,a=!1;return{constructor:dc,insert(s){let c=te(s),l=c.length;for(let u=0;u<l;++u)e.push(c[u]);return this},remove(s){let c=Ie(s)?r:t,l=te(s),u=l.length;for(let f=0;f<u;++f)c.push(l[f]);return this},modify(s,c,l){let u={field:c,value:gn(l)};return Ie(s)?(u.filter=s,i.push(u)):(u.tuple=s,n.push(u)),this},encode(s,c){return Ie(s)?i.push({filter:s,field:c}):n.push({tuple:s,field:c}),this},clean(s){return o=s,this},reflow(){return a=!0,this},pulse(s,c){let l={},u={},f,d,p,h,m,g;for(f=0,d=c.length;f<d;++f)l[De(c[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[De(m)]=-1;for(f=0,d=r.length;f<d;++f)h=r[f],c.forEach(y=>{h(y)&&(l[De(y)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=De(m),l[g]?l[g]=1:s.add.push(ct(e[f]));for(f=0,d=c.length;f<d;++f)m=c[f],l[De(m)]<0&&s.rem.push(m);function v(y,C,b){b?y[C]=b(y):s.encode=C,a||(u[De(y)]=y)}for(f=0,d=n.length;f<d;++f)p=n[f],m=p.tuple,h=p.field,g=l[De(m)],g>0&&(v(m,h,p.value),s.modifies(h));for(f=0,d=i.length;f<d;++f)p=i[f],h=p.filter,c.forEach(y=>{h(y)&&l[De(y)]>0&&v(y,p.field,p.value)}),s.modifies(p.field);if(a)s.mod=t.length||r.length?c.filter(y=>l[De(y)]>0):c.slice();else for(g in u)s.mod.push(u[g]);return(o||o==null&&(t.length||r.length))&&s.clean(!0),s}}}var zv="_:mod:_";function Fd(){Object.defineProperty(this,zv,{writable:!0,value:{}})}Fd.prototype={set(e,t,n,r){let i=this,o=i[e],a=i[zv];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=F(n)?1+n.length:-1),i},modified(e,t){let n=this[zv];if(arguments.length){if(F(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(let r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[zv]={},this}};var mme=0,gme="pulse",vme=new Fd,yme=1,xme=2;function Rt(e,t,n,r){this.id=++mme,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function kW(e){return function(t){let n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Rt.prototype={targets(){return this._targets||(this._targets=Lv(Q6))},set(e){return this.value!==e?(this.value=e,1):0},skip:kW(yme),modified:kW(xme),parameters(e,t,n){t=t!==!1;let r=this._argval=this._argval||new Fd,i=this._argops=this._argops||[],o=[],a,s,c,l,u=(f,d,p)=>{p instanceof Rt?(p!==this&&(t&&p.targets().add(this),o.push(p)),i.push({op:p,name:f,index:d})):r.set(f,d,p)};for(a in e)if(s=e[a],a===gme)te(s).forEach(f=>{f instanceof Rt?f!==this&&(f.targets().add(this),o.push(f)):B("Pulse parameters must be operator instances.")}),this.source=s;else if(F(s))for(r.set(a,-1,Array(c=s.length)),l=0;l<c;++l)u(a,l,s[l]);else u(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){let t=this._argval||vme,n=this._argops,r,i,o,a;if(n){let s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){let e=this._argops,t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){let t=this._update;if(t){let n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Cme(e,t,n,r){let i=1,o;return e instanceof Rt?o=e:e&&e.prototype instanceof Rt?o=new e:Ie(e)?o=new Rt(null,e):(i=0,o=new Rt(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function bme(e,t){let n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}var Mme=0;function du(e,t,n){this.id=++Mme,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function k3(e,t,n){return new du(e,t,n)}du.prototype={_filter:hr,_apply:_n,targets(){return this._targets||(this._targets=Lv(Q6))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){let t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){let t=k3(e);return this.targets().add(t),t},apply(e){let t=k3(null,e);return this.targets().add(t),t},merge(){let e=k3();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{let n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){let t=k3();return this.targets().add(k3(null,null,ad(e,n=>{let r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(k3(null,null,()=>n=!0)),t.targets().add(k3(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=hr,this._targets=null}};function wme(e,t,n,r){let i=this,o=k3(n,r),a=function(l){l.dataflow=i;try{o.receive(l)}catch(u){i.error(u)}finally{i.run()}},s;typeof e=="string"&&typeof document<"u"?s=document.querySelectorAll(e):s=te(e);let c=s.length;for(let l=0;l<c;++l)s[l].addEventListener(t,a);return o}function Sme(e,t){let n=this.locale();return FL(e,t,n.timeParse,n.utcParse)}function Eme(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}function Dme(e,t){return Gt(this,null,function*(){let n=this,r=0,i;try{i=yield n.loader().load(e,{context:"dataflow",response:IL(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}})}function zme(e,t,n){return Gt(this,null,function*(){let r=this,i=r._pending||Hme(r);i.requests+=1;let o=yield r.request(t,n);return r.pulse(e,r.changeset().remove(hr).insert(o.data||[])),i.done(),o})}function Hme(e){let t,n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}var Lme={skip:!0};function Ame(e,t,n,r,i){return(e instanceof Rt?Nme:Vme)(this,e,t,n,r,i),this}function Vme(e,t,n,r,i,o){let a=Te({},o,Lme),s,c;Ie(n)||(n=gn(n)),r===void 0?s=l=>e.touch(n(l)):Ie(r)?(c=new Rt(null,r,i,!1),s=l=>{c.evaluate(l);let u=n(l),f=c.value;OL(f)?e.pulse(u,f,o):e.update(u,f,a)}):s=l=>e.update(n(l),r,a),t.apply(s)}function Nme(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{let a=o||{},s=new Rt(null,_me(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}function _me(e,t){return t=Ie(t)?t:gn(t),e?function(n,r){let i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function kme(e){e.rank=++this._rank}function Tme(e){let t=[e],n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&B("Cycle detected in dataflow graph.")}var Hv={},qa=1,T3=2,lc=4,Ime=qa|T3,TW=qa|lc,fu=qa|T3|lc,IW=8,kd=16,FW=32,RW=64;function uc(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function RL(e,t){let n=[];return rc(e,t,r=>n.push(r)),n}function OW(e,t){let n={};return e.visit(t,r=>{n[De(r)]=1}),r=>n[De(r)]?null:r}function Dv(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}uc.prototype={StopPropagation:Hv,ADD:qa,REM:T3,MOD:lc,ADD_REM:Ime,ADD_MOD:TW,ALL:fu,REFLOW:IW,SOURCE:kd,NO_SOURCE:FW,NO_FIELDS:RW,fork(e){return new uc(this.dataflow).init(this,e)},clone(){let e=this.fork(fu);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(fu|kd)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new uc(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){let n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&RW)&&(n.fields=e.fields),t&qa?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&T3?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&lc?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&FW?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){let t=e||fu;return t&qa&&this.add.length||t&T3&&this.rem.length||t&lc&&this.mod.length},reflow(e){if(e)return this.fork(fu).reflow();let t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(lc,OW(this,qa))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){let t=this.fields||(this.fields={});return F(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){let n=this.fields;return(t||this.mod.length)&&n?arguments.length?F(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){let n=this;return e&qa&&(n.addF=Dv(n.addF,t)),e&T3&&(n.remF=Dv(n.remF,t)),e&lc&&(n.modF=Dv(n.modF,t)),e&kd&&(n.srcF=Dv(n.srcF,t)),n},materialize(e){e=e||fu;let t=this;return e&qa&&t.addF&&(t.add=RL(t.add,t.addF),t.addF=null),e&T3&&t.remF&&(t.rem=RL(t.rem,t.remF),t.remF=null),e&lc&&t.modF&&(t.mod=RL(t.mod,t.modF),t.modF=null),e&kd&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){let n=this,r=t;if(e&kd)return rc(n.source,n.srcF,r),n;e&qa&&rc(n.add,n.addF,r),e&T3&&rc(n.rem,n.remF,r),e&lc&&rc(n.mod,n.modF,r);let i=n.source;if(e&IW&&i){let o=n.add.length+n.mod.length;o===i.length||(o?rc(i,OW(n,TW),r):rc(i,n.srcF,r))}return n}};function Nv(e,t,n,r){let i=this,o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(let a of n)if(a.stamp===t){if(a.fields){let s=i.fields||(i.fields={});for(let c in a.fields)s[c]=1}a.changed(i.ADD)&&(o|=i.ADD),a.changed(i.REM)&&(o|=i.REM),a.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}ee(Nv,uc,{fork(e){let t=new uc(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){let t=this,n=t.fields;return n&&t.changes&t.MOD?F(e)?e.some(r=>n[r]):n[e]:0},filter(){B("MultiPulse does not support filtering.")},materialize(){B("MultiPulse does not support materialization.")},visit(e,t){let n=this,r=n.pulses,i=r.length,o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});function Fme(e,t,n){return Gt(this,null,function*(){let r=this,i=[];if(r._pulse)return BW(r);if(r._pending&&(yield r._pending),t&&(yield Id(r,t)),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;let o=++r._clock;r._pulse=new uc(r,o,e),r._touched.forEach(u=>r._enqueue(u,!0)),r._touched=Lv(Q6);let a=0,s,c,l;try{for(;r._heap.size()>0;){if(s=r._heap.pop(),s.rank!==s.qrank){r._enqueue(s,!0);continue}c=s.run(r._getPulse(s,e)),c.then?c=yield c:c.async&&(i.push(c.async),c=Hv),c!==Hv&&s._targets&&s._targets.forEach(u=>r._enqueue(u)),++a}}catch(u){r._heap.clear(),l=u}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${a} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){let u=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<u.length;++f)yield Id(r,u[f].callback)}return n&&(yield Id(r,n)),i.length&&Promise.all(i).then(u=>r.runAsync(null,()=>{u.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r})}function Rme(e,t,n){return Gt(this,null,function*(){for(;this._running;)yield this._running;let r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running})}function Ome(e,t,n){return this._pulse?BW(this):(this.evaluate(e,t,n),this)}function Pme(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function BW(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function $me(e,t){let n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Bme(e,t){let n=e.source,r=this._clock;return n&&F(n)?new Nv(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Ume(this._pulse,n&&n.pulse)}function Ume(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Hv&&(e.source=t.source),e)}var PL={skip:!1,force:!1};function jme(e,t){let n=t||PL;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function qme(e,t,n){let r=n||PL;return(e.set(t)||r.force)&&this.touch(e,r),this}function Gme(e,t,n){this.touch(e,n||PL);let r=new uc(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Wme(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),UW(t,0,t.length-1,e)),pop:()=>{let n=t.pop(),r;return t.length?(r=t[0],t[0]=n,Yme(t,0,e)):r=n,r}}}function UW(e,t,n,r){let i,o,a=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(a,i)<0){e[n]=i,n=o;continue}break}return e[n]=a}function Yme(e,t,n){let r=t,i=e.length,o=e[t],a=(t<<1)+1,s;for(;a<i;)s=a+1,s<i&&n(e[a],e[s])>=0&&(a=s),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=o,UW(e,r,t,n)}function I3(){this.logger(ed()),this.logLevel(J5),this._clock=0,this._rank=0,this._locale=_d();try{this._loader=uu()}catch{}this._touched=Lv(Q6),this._input={},this._pulse=null,this._heap=Wme((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Td(e){return function(){return this._log[e].apply(this,arguments)}}I3.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Td("error"),warn:Td("warn"),info:Td("info"),debug:Td("debug"),logLevel:Td("level"),cleanThreshold:1e4,add:Cme,connect:bme,rank:kme,rerank:Tme,pulse:Gme,touch:jme,update:qme,changeset:dc,ingest:Eme,parse:Sme,preload:zme,request:Dme,events:wme,on:Ame,evaluate:Fme,run:Ome,runAsync:Rme,runAfter:Pme,_enqueue:$me,_getPulse:Bme};function $(e,t){Rt.call(this,e,null,t)}ee($,Rt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){let t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});var fc={};function _v(e){let t=$L(e);return t&&t.Definition||null}function $L(e){return e=e&&e.toLowerCase(),de(fc,e)?fc[e]:null}var zA={};Mr(zA,{aggregate:()=>F3,bin:()=>rA,collect:()=>iA,compare:()=>tY,countpattern:()=>oA,cross:()=>aA,density:()=>sA,dotbin:()=>lA,expression:()=>aY,extent:()=>uA,facet:()=>Jv,field:()=>sY,filter:()=>dA,flatten:()=>pA,fold:()=>hA,formula:()=>mA,generate:()=>cY,impute:()=>gA,joinaggregate:()=>vA,kde:()=>yA,key:()=>lY,load:()=>uY,lookup:()=>xA,multiextent:()=>fY,multivalues:()=>dY,params:()=>pY,pivot:()=>CA,prefacet:()=>hY,project:()=>bA,proxy:()=>mY,quantile:()=>MA,relay:()=>gY,sample:()=>wA,sequence:()=>SA,sieve:()=>vY,subflow:()=>fA,timeunit:()=>EA,tupleindex:()=>xY,values:()=>CY,window:()=>DA});function*GW(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function kv(e,t,n){let r=Float64Array.from(GW(e,n));return r.sort(Si),t.map(i=>md(r,i))}function Tv(e,t){return kv(e,[.25,.5,.75],t)}function Iv(e,t){let n=e.length,r=cv(e,t),i=Tv(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function BL(e){let t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2],o=e.extent[0],a=e.extent[1],s,c,l,u,f,d,p=e.span||a-o||Math.abs(o)||1;if(e.step)s=e.step;else if(e.steps){for(u=p/t,f=0,d=e.steps.length;f<d&&e.steps[f]<u;++f);s=e.steps[Math.max(0,f-1)]}else{for(c=Math.ceil(Math.log(t)/r),l=e.minstep||0,s=Math.max(l,Math.pow(n,Math.round(Math.log(p)/r)-c));Math.ceil(p/s)>t;)s*=n;for(f=0,d=i.length;f<d;++f)u=s/i[f],u>=l&&p/u<=t&&(s=u)}u=Math.log(s);let h=u>=0?0:~~(-u/r)+1,m=Math.pow(n,-h-1);return(e.nice||e.nice===void 0)&&(u=Math.floor(o/s+m)*s,o=o<u?u-s:u,a=Math.ceil(a/s)*s),{start:o,stop:a===o?o+s:a,step:s}}var i1=Math.random;function Xme(e){i1=e}function UL(e,t,n,r){if(!e.length)return[void 0,void 0];let i=Float64Array.from(GW(e,r)),o=i.length,a=t,s,c,l,u;for(l=0,u=Array(a);l<a;++l){for(s=0,c=0;c<o;++c)s+=i[~~(i1()*o)];u[l]=s/o}return u.sort(Si),[yl(u,n/2),yl(u,1-n/2)]}function jL(e,t,n,r){r=r||(d=>d);let i=e.length,o=new Float64Array(i),a=0,s=1,c=r(e[0]),l=c,u=c+t,f;for(;s<i;++s){if(f=r(e[s]),f>=u){for(l=(c+l)/2;a<s;++a)o[a]=l;u=f+t,c=f}l=f}for(l=(c+l)/2;a<s;++a)o[a]=l;return n?Qme(o,t+t/4):o}function Qme(e,t){let n=e.length,r=0,i=1,o,a;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(a=i+(r+o-i-i>>1);a<i;)e[a++]=e[i];for(;a>i;)e[a--]=e[r]}r=i,i=o}return e}function Kme(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Zme(e,t){t==null&&(t=e,e=0);let n,r,i,o={min(a){return arguments.length?(n=a||0,i=r-n,o):n},max(a){return arguments.length?(r=a||0,i=r-n,o):r},sample(){return n+Math.floor(i*i1())},pdf(a){return a===Math.floor(a)&&a>=n&&a<r?1/i:0},cdf(a){let s=Math.floor(a);return s<n?0:s>=r?1:(s-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return o.min(e).max(t)}var WW=Math.sqrt(2*Math.PI),Jme=Math.SQRT2,Rd=NaN;function Od(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(Rd===Rd)n=Rd,Rd=NaN;else{do n=i1()*2-1,r=i1()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,Rd=r*o}return e+n*t}function Fv(e,t,n){n=n??1;let r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*WW)}function Pd(e,t,n){t=t||0,n=n??1;let r=(e-t)/n,i=Math.abs(r),o;if(i>37)o=0;else{let a=Math.exp(-i*i/2),s;i<7.07106781186547?(s=.0352624965998911*i+.700383064443688,s=s*i+6.37396220353165,s=s*i+33.912866078383,s=s*i+112.079291497871,s=s*i+221.213596169931,s=s*i+220.206867912376,o=a*s,s=.0883883476483184*i+1.75566716318264,s=s*i+16.064177579207,s=s*i+86.7807322029461,s=s*i+296.564248779674,s=s*i+637.333633378831,s=s*i+793.826512519948,s=s*i+440.413735824752,o=o/s):(s=i+.65,s=i+4/s,s=i+3/s,s=i+2/s,s=i+1/s,o=a/s/2.506628274631)}return r>0?1-o:o}function $d(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Jme*e9e(2*e-1)}function e9e(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Rv(e,t){let n,r,i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>Od(n,r),pdf:o=>Fv(o,n,r),cdf:o=>Pd(o,n,r),icdf:o=>$d(o,n,r)};return i.mean(e).stdev(t)}function Ov(e,t){let n=Rv(),r=0,i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=Iv(e)),i):t},sample(){return e[~~(i1()*r)]+t*n.sample()},pdf(o){let a=0,s=0;for(;s<r;++s)a+=n.pdf((o-e[s])/t);return a/t/r},cdf(o){let a=0,s=0;for(;s<r;++s)a+=n.cdf((o-e[s])/t);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Pv(e,t){return e=e||0,t=t??1,Math.exp(e+Od()*t)}function $v(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;let r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*WW*e)}function Bv(e,t,n){return Pd(Math.log(e),t,n)}function Uv(e,t,n){return Math.exp($d(e,t,n))}function qL(e,t){let n,r,i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>Pv(n,r),pdf:o=>$v(o,n,r),cdf:o=>Bv(o,n,r),icdf:o=>Uv(o,n,r)};return i.mean(e).stdev(t)}function GL(e,t){let n=0,r;function i(a){let s=[],c=0,l;for(l=0;l<n;++l)c+=s[l]=a[l]==null?1:+a[l];for(l=0;l<n;++l)s[l]/=c;return s}let o={weights(a){return arguments.length?(r=i(t=a||[]),o):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),o.weights(t)):e},sample(){let a=i1(),s=e[n-1],c=r[0],l=0;for(;l<n-1;c+=r[++l])if(a<c){s=e[l];break}return s.sample()},pdf(a){let s=0,c=0;for(;c<n;++c)s+=r[c]*e[c].pdf(a);return s},cdf(a){let s=0,c=0;for(;c<n;++c)s+=r[c]*e[c].cdf(a);return s},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function jv(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*i1()}function qv(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Gv(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Wv(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function WL(e,t){let n,r,i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>jv(n,r),pdf:o=>qv(o,n,r),cdf:o=>Gv(o,n,r),icdf:o=>Wv(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Yv(e,t,n){let r=0,i=0;for(let o of e){let a=n(o);t(o)==null||a==null||isNaN(a)||(r+=(a-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Bd(e,t,n,r){let i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function Xv(e,t,n,r){e=e.filter(p=>{let h=t(p),m=n(p);return h!=null&&(h=+h)>=h&&m!=null&&(m=+m)>=m}),r&&e.sort((p,h)=>t(p)-t(h));let i=e.length,o=new Float64Array(i),a=new Float64Array(i),s=0,c=0,l=0,u,f,d;for(d of e)o[s]=u=+t(d),a[s]=f=+n(d),++s,c+=(u-c)/s,l+=(f-l)/s;for(s=0;s<i;++s)o[s]-=c,a[s]-=l;return[o,a,c,l]}function Ud(e,t,n,r){let i=-1,o,a;for(let s of e)o=t(s),a=n(s),o!=null&&(o=+o)>=o&&a!=null&&(a=+a)>=a&&r(o,a,++i)}function pu(e,t,n,r,i){let o=0,a=0;return Ud(e,t,n,(s,c)=>{let l=c-i(s),u=c-r;o+=l*l,a+=u*u}),1-o/a}function Qv(e,t,n){let r=0,i=0,o=0,a=0,s=0;Ud(e,t,n,(u,f)=>{++s,r+=(u-r)/s,i+=(f-i)/s,o+=(u*f-o)/s,a+=(u*u-a)/s});let c=Bd(r,i,o,a),l=u=>c[0]+c[1]*u;return{coef:c,predict:l,rSquared:pu(e,t,n,i,l)}}function YL(e,t,n){let r=0,i=0,o=0,a=0,s=0;Ud(e,t,n,(u,f)=>{++s,u=Math.log(u),r+=(u-r)/s,i+=(f-i)/s,o+=(u*f-o)/s,a+=(u*u-a)/s});let c=Bd(r,i,o,a),l=u=>c[0]+c[1]*Math.log(u);return{coef:c,predict:l,rSquared:pu(e,t,n,i,l)}}function XL(e,t,n){let[r,i,o,a]=Xv(e,t,n),s=0,c=0,l=0,u=0,f=0,d,p,h;Ud(e,t,n,(y,C)=>{d=r[f++],p=Math.log(C),h=d*C,s+=(C*p-s)/f,c+=(h-c)/f,l+=(h*p-l)/f,u+=(d*h-u)/f});let[m,g]=Bd(c/a,s/a,l/a,u/a),v=y=>Math.exp(m+g*(y-o));return{coef:[Math.exp(m-g*o),g],predict:v,rSquared:pu(e,t,n,a,v)}}function QL(e,t,n){let r=0,i=0,o=0,a=0,s=0,c=0;Ud(e,t,n,(f,d)=>{let p=Math.log(f),h=Math.log(d);++c,r+=(p-r)/c,i+=(h-i)/c,o+=(p*h-o)/c,a+=(p*p-a)/c,s+=(d-s)/c});let l=Bd(r,i,o,a),u=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:u,rSquared:pu(e,t,n,s,u)}}function Kv(e,t,n){let[r,i,o,a]=Xv(e,t,n),s=r.length,c=0,l=0,u=0,f=0,d=0,p,h,m,g;for(p=0;p<s;)h=r[p],m=i[p++],g=h*h,c+=(g-c)/p,l+=(g*h-l)/p,u+=(g*g-u)/p,f+=(h*m-f)/p,d+=(g*m-d)/p;let v=u-c*c,y=c*v-l*l,C=(d*c-f*l)/y,b=(f*v-d*l)/y,M=-C*c,S=w=>(w=w-o,C*w*w+b*w+M+a);return{coef:[M-b*o+C*o*o+a,b-2*C*o,C],predict:S,rSquared:pu(e,t,n,a,S)}}function KL(e,t,n,r){if(r===0)return Yv(e,t,n);if(r===1)return Qv(e,t,n);if(r===2)return Kv(e,t,n);let[i,o,a,s]=Xv(e,t,n),c=i.length,l=[],u=[],f=r+1,d,p,h,m,g;for(d=0;d<f;++d){for(h=0,m=0;h<c;++h)m+=Math.pow(i[h],d)*o[h];for(l.push(m),g=new Float64Array(f),p=0;p<f;++p){for(h=0,m=0;h<c;++h)m+=Math.pow(i[h],d+p);g[p]=m}u.push(g)}u.push(l);let v=n9e(u),y=C=>{C-=a;let b=s+v[0]+v[1]*C+v[2]*C*C;for(d=3;d<f;++d)b+=v[d]*Math.pow(C,d);return b};return{coef:t9e(f,v,-a,s),predict:y,rSquared:pu(e,t,n,s,y)}}function t9e(e,t,n,r){let i=Array(e),o,a,s,c;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],c=1,i[o]+=s,a=1;a<=o;++a)c*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*c;return i[0]+=r,i}function n9e(e){let t=e.length-1,n=[],r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}var jW=2,qW=1e-12;function ZL(e,t,n,r){let[i,o,a,s]=Xv(e,t,n,!0),c=i.length,l=Math.max(2,~~(r*c)),u=new Float64Array(c),f=new Float64Array(c),d=new Float64Array(c).fill(1);for(let p=-1;++p<=jW;){let h=[0,l-1];for(let g=0;g<c;++g){let v=i[g],y=h[0],C=h[1],b=v-i[y]>i[C]-v?y:C,M=0,S=0,w=0,E=0,D=0,L=1/Math.abs(i[b]-v||1);for(let V=y;V<=C;++V){let _=i[V],N=o[V],I=r9e(Math.abs(v-_)*L)*d[V],W=_*I;M+=I,S+=W,w+=N*I,E+=N*W,D+=_*W}let[A,j]=Bd(S/M,w/M,E/M,D/M);u[g]=A+j*v,f[g]=Math.abs(o[g]-u[g]),i9e(i,g+1,h)}if(p===jW)break;let m=J6(f);if(Math.abs(m)<qW)break;for(let g=0,v,y;g<c;++g)v=f[g]/(6*m),d[g]=v>=1?qW:(y=1-v*v)*y}return o9e(i,u,a,s)}function r9e(e){return(e=1-e*e*e)*e*e}function i9e(e,t,n){let r=e[t],i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function o9e(e,t,n,r){let i=e.length,o=[],a=0,s=0,c=[],l;for(;a<i;++a)l=e[a]+n,c[0]===l?c[1]+=(t[a]-c[1])/++s:(s=0,c[1]+=r,c=[l,t[a]],o.push(c));return c[1]+=r,o}var a9e=.5*Math.PI/180;function hu(e,t,n,r){n=n||25,r=Math.max(n,r||200);let i=m=>[m,e(m)],o=t[0],a=t[1],s=a-o,c=s/r,l=[i(o)],u=[];if(n===r){for(let m=1;m<r;++m)l.push(i(o+m/n*s));return l.push(i(a)),l}else{u.push(i(a));for(let m=n;--m>0;)u.push(i(o+m/n*s))}let f=l[0],d=u[u.length-1],p=1/s,h=s9e(f[1],u);for(;d;){let m=i((f[0]+d[0])/2);m[0]-f[0]>=c&&c9e(f,m,d,p,h)>a9e?u.push(m):(f=d,l.push(d),u.pop()),d=u[u.length-1]}return l}function s9e(e,t){let n=e,r=e,i=t.length;for(let o=0;o<i;++o){let a=t[o][1];a<n&&(n=a),a>r&&(r=a)}return 1/(r-n)}function c9e(e,t,n,r,i){let o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),a=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-a)}function l9e(e){return t=>{let n=e.length,r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function tA(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:l9e(e)}function QW(e,t,n){return n||e+(t?"_"+t:"")}var JL=()=>{},u9e={init:JL,add:JL,rem:JL,idx:0},jd={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Gd=Object.keys(jd).filter(e=>e!=="__count__");function f9e(e,t){return(n,r)=>Te({name:e,aggregate_param:r,out:n||e},u9e,t)}[...Gd,"__count__"].forEach(e=>{jd[e]=f9e(e,jd[e])});function KW(e,t,n){return jd[e](n,t)}function ZW(e,t){return e.idx-t.idx}function d9e(e){let t={};e.forEach(r=>t[r.name]=r);let n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=jd[i]())})};return e.forEach(n),Object.values(t).sort(ZW)}function p9e(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function h9e(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function m9e(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function g9e(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function JW(e,t){let n=t||_n,r=d9e(e),i=e.slice().sort(ZW);function o(a){this._ops=r,this._out=i,this.cell=a,this.init()}return o.prototype.init=p9e,o.prototype.add=h9e,o.prototype.rem=m9e,o.prototype.set=g9e,o.prototype.get=n,o.fields=e.map(a=>a.out),o}function nA(e){this._key=e?Dr(e):De,this.reset()}var ei=nA.prototype;ei.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};ei.add=function(e){this._add.push(e)};ei.rem=function(e){this._rem.push(e)};ei.values=function(){if(this._get=null,this._rem.length===0)return this._add;let e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={},s,c,l;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,c=0;s<r;++s)a[n(l=e[s])]?a[n(l)]=0:o[c++]=l;return this._rem=[],this._add=o};ei.distinct=function(e){let t=this.values(),n={},r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",de(n,o)||(n[o]=1,++i);return i};ei.extent=function(e){if(this._get!==e||!this._ext){let t=this.values(),n=HH(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};ei.argmin=function(e){return this.extent(e)[0]||{}};ei.argmax=function(e){return this.extent(e)[1]||{}};ei.min=function(e){let t=this.extent(e)[0];return t!=null?e(t):void 0};ei.max=function(e){let t=this.extent(e)[1];return t!=null?e(t):void 0};ei.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Tv(this.values(),e),this._get=e),this._q};ei.q1=function(e){return this.quartile(e)[0]};ei.q2=function(e){return this.quartile(e)[1]};ei.q3=function(e){return this.quartile(e)[2]};ei.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=UL(this.values(),1e3,.05,e),this._get=e),this._ci};ei.ci0=function(e){return this.ci(e)[0]};ei.ci1=function(e){return this.ci(e)[1]};function F3(e){$.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}F3.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Gd},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ee(F3,$,{transform(e,t){let n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){let e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(s){let c,l,u,f;for(c in s)for(u=s[c].tuple,l=0;l<i;++l)r[l][f=u[n[l]]]=f}o(e._prev),o(t);function a(s,c,l){let u=n[l],f=r[l++];for(let d in f){let p=s?s+"|"+d:d;c[u]=f[d],l<i?a(p,c,l):t[p]||e.cell(p,c)}}a("",{},0)},init(e){let t=this._inputs=[],n=this._outputs=[],r={};function i(y){let C=te(pr(y)),b=C.length,M=0,S;for(;M<b;++M)r[S=C[M]]||(r[S]=1,t.push(S))}this._dims=te(e.groupby),this._dnames=this._dims.map(y=>{let C=un(y);return i(y),n.push(C),C}),this.cellkey=e.key?e.key:tA(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];let o=e.fields||[null],a=e.ops||["count"],s=e.aggregate_params||[null],c=e.as||[],l=o.length,u={},f,d,p,h,m,g,v;for(l!==a.length&&B("Unmatched number of fields and aggregate ops."),v=0;v<l;++v){if(f=o[v],d=a[v],p=s[v]||null,f==null&&d!=="count"&&B("Null aggregate field specified."),m=un(f),g=QW(d,m,c[v]),n.push(g),d==="count"){this._counts.push(g);continue}h=u[m],h||(i(f),h=u[m]=[],h.field=f,this._measures.push(h)),d!=="count"&&(this._countOnly=!1),h.push(KW(d,p,g))}return this._measures=this._measures.map(y=>JW(y,y.field)),Object.create(null)},cellkey:tA(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){let n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){let r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new nA),n},newtuple(e,t){let n=this._dnames,r=this._dims,i=r.length,o={};for(let a=0;a<i;++a)o[n[a]]=r[a](e);return t?Vv(t.tuple,o):ct(o)},clean(){let e=this.value;for(let t in e)e[t].num===0&&delete e[t]},add(e){let t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);let r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){let t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);let r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){let t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){let r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){let t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod,c,l,u,f;if(r)for(l in r)c=r[l],(!i||c.num)&&a.push(c.tuple);for(u=0,f=this._alen;u<f;++u)o.push(this.celltuple(t[u])),t[u]=null;for(u=0,f=this._mlen;u<f;++u)c=n[u],(c.num===0&&i?a:s).push(this.celltuple(c)),n[u]=null;return this._alen=this._mlen=0,this._prev=null,e}});var v9e=1e-14;function rA(e){$.call(this,null,e)}rA.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ee(rA,$,{transform(e,t){let n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,a=e.as||["bin0","bin1"],s=a[0],c=a[1],l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(pr(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?u=>{let f=r(u);u[s]=f,u[c]=f==null?null:i+o*(1+(f-i)/o)}:u=>u[s]=r(u)),t.modifies(n?a:s)},_bins(e){if(this.value&&!e.modified())return this.value;let t=e.field,n=BL(e),r=n.step,i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,a,s;(a=e.anchor)!=null&&(s=a-(i+r*Math.floor((a-i)/r)),i+=s,o+=s);let c=function(l){let u=Gn(t(l));return u==null?null:u<i?-1/0:u>o?1/0:(u=Math.max(i,Math.min(u,o-r)),i+r*Math.floor(v9e+(u-i)/r))};return c.start=i,c.stop=n.stop,c.step=r,this.value=wi(c,pr(t),e.name||"bin_"+un(t))}});function eY(e,t,n){let r=e,i=t||[],o=n||[],a={},s=0;return{add:c=>o.push(c),remove:c=>a[r(c)]=++s,size:()=>i.length,data:(c,l)=>(s&&(i=i.filter(u=>!a[r(u)]),a={},s=0),l&&c&&i.sort(c),o.length&&(i=c?kH(c,i,o.sort(c)):i.concat(o),o=[]),i)}}function iA(e){$.call(this,[],e)}iA.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ee(iA,$,{transform(e,t){let n=t.fork(t.ALL),r=eY(De,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(Ga(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function tY(e){Rt.call(this,null,y9e,e)}ee(tY,Rt);function y9e(e){return this.value&&!e.modified()?this.value:id(e.fields,e.orders)}function oA(e){$.call(this,null,e)}oA.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function x9e(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ee(oA,$,{transform(e,t){let n=f=>d=>{for(var p=x9e(s(d),e.case,o)||[],h,m=0,g=p.length;m<g;++m)a.test(h=p[m])||f(h)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,c=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),u=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,u)),this._finish(t,c)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){let n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS),s,c,l;for(s in n)c=r[s],l=n[s]||0,!c&&l?(r[s]=c=ct({}),c[i]=s,c[o]=l,a.add.push(c)):l===0?(c&&a.rem.push(c),n[s]=null,r[s]=null):c[o]!==l&&(c[o]=l,a.mod.push(c));return a.modifies(t)}});function aA(e){$.call(this,null,e)}aA.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ee(aA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter"),s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=C9e(s,i,o,e.filter||hr)):n.mod=s,n.source=this.value,n.modifies(r)}});function C9e(e,t,n,r){for(var i=[],o={},a=e.length,s=0,c,l;s<a;++s)for(o[t]=l=e[s],c=0;c<a;++c)o[n]=e[c],r(o)&&(i.push(ct(o)),o={},o[t]=l);return i}var YW={kde:Ov,mixture:GL,normal:Rv,lognormal:qL,uniform:WL},b9e="distributions",XW="function",M9e="field";function nY(e,t){let n=e[XW];de(YW,n)||B("Unknown distribution function: "+n);let r=YW[n]();for(let i in e)i===M9e?r.data((e.from||t()).map(e[i])):i===b9e?r[i](e[i].map(o=>nY(o,t))):typeof r[i]===XW&&r[i](e[i]);return r}function sA(e){$.call(this,null,e)}var rY=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],w9e={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:rY},{name:"weights",type:"number",array:!0}]};sA.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:rY.concat(w9e)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ee(sA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=nY(e.distribution,S9e(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200,a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&B("Invalid density method: "+a),!e.extent&&!r.data&&B("Missing density extent parameter."),a=r[a];let s=e.as||["value","density"],c=e.extent||Zi(r.data()),l=hu(a,c,i,o).map(u=>{let f={};return f[s[0]]=u[0],f[s[1]]=u[1],ct(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function S9e(e){return()=>e.materialize(e.SOURCE).source}function iY(e,t){return e?e.map((n,r)=>t[r]||un(n)):null}function cA(e,t,n){let r=[],i=f=>f(c),o,a,s,c,l,u;if(t==null)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)c=e[a],l=t.map(i),u=o[l],u||(o[l]=u=[],u.dims=l,r.push(u)),u.push(n(c));return r}var oY="bin";function lA(e){$.call(this,null,e)}lA.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:oY}]};var E9e=(e,t)=>nc(Zi(e,t))/30;ee(lA,$,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;let n=t.materialize(t.SOURCE).source,r=cA(t.source,e.groupby,_n),i=e.smooth||!1,o=e.field,a=e.step||E9e(n,o),s=Ga((h,m)=>o(h)-o(m)),c=e.as||oY,l=r.length,u=1/0,f=-1/0,d=0,p;for(;d<l;++d){let h=r[d].sort(s);p=-1;for(let m of jL(h,a,i,o))m<u&&(u=m),m>f&&(f=m),h[++p][c]=m}return this.value={start:u,stop:f,step:a},t.reflow(!0).modifies(c)}});function aY(e){Rt.call(this,null,D9e,e),this.modified(!0)}ee(aY,Rt);function D9e(e){let t=e.expr;return this.value&&!e.modified("expr")?this.value:wi(n=>t(n,e),pr(t),un(t))}function uA(e){$.call(this,[void 0,void 0],e)}uA.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ee(uA,$,{transform(e,t){let n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field"),o=n[0],a=n[1];if((i||o==null)&&(o=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,s=>{let c=Gn(r(s));c!=null&&(c<o&&(o=c),c>a&&(a=c))}),!Number.isFinite(o)||!Number.isFinite(a)){let s=un(r);s&&(s=` for field "${s}"`),t.dataflow.warn(`Infinite extent${s}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}});function fA(e,t){Rt.call(this,e),this.parent=t,this.count=0}ee(fA,Rt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Jv(e){$.call(this,{},e),this._keys=E3();let t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ee(Jv,$,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){let i=this.value,o=de(i,e)&&i[e],a,s;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(s=r||(s=this._group[e])&&s.tuple,a=n.dataflow,o=new fA(n.fork(n.NO_SOURCE),this),a.add(o).connect(t(a,e,s)),i[e]=o,this.activate(o)),o},clean(){let e=this.value,t=0;for(let n in e)if(e[n].count===0){let r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){let n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){let t=this._targets,n=t.length,r=e?e.length:0,i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){let n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,a=e.modified("key"),s=c=>this.subflow(c,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,c=>{let l=De(c),u=o.get(l);u!==void 0&&(o.delete(l),s(u).rem(c))}),t.visit(t.ADD,c=>{let l=r(c);o.set(De(c),l),s(l).add(c)}),a||t.modified(r.fields)?t.visit(t.MOD,c=>{let l=De(c),u=o.get(l),f=r(c);u===f?s(f).mod(c):(o.set(l,f),s(u).rem(c),s(f).add(c))}):t.changed(t.MOD)&&t.visit(t.MOD,c=>{s(o.get(De(c))).mod(c)}),a&&t.visit(t.REFLOW,c=>{let l=De(c),u=o.get(l),f=r(c);u!==f&&(o.set(l,f),s(u).rem(c),s(f).add(c))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function sY(e){Rt.call(this,null,z9e,e)}ee(sY,Rt);function z9e(e){return this.value&&!e.modified()?this.value:F(e.name)?te(e.name).map(t=>Dr(t)):Dr(e.name,e.as)}function dA(e){$.call(this,E3(),e)}dA.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ee(dA,$,{transform(e,t){let n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,c=e.expr,l=!0;t.visit(t.REM,f=>{let d=De(f);r.has(d)?r.delete(d):a.push(f)}),t.visit(t.ADD,f=>{c(f,e)?o.push(f):r.set(De(f),1)});function u(f){let d=De(f),p=c(f,e),h=r.get(d);p&&h?(r.delete(d),o.push(f)):!p&&!h?(r.set(d,1),a.push(f)):l&&p&&!h&&s.push(f)}return t.visit(t.MOD,u),e.modified()&&(l=!1,t.visit(t.REFLOW,u)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function pA(e){$.call(this,[],e)}pA.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ee(pA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=iY(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,s=>{let c=r.map(h=>h(s)),l=c.reduce((h,m)=>Math.max(h,m.length),0),u=0,f,d,p;for(;u<l;++u){for(d=Av(s),f=0;f<a;++f)d[i[f]]=(p=c[f][u])==null?null:p;o&&(d[o]=u),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function hA(e){$.call(this,[],e)}hA.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ee(hA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(un),o=e.as||["key","value"],a=o[0],s=o[1],c=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let u=0,f;u<c;++u)f=Av(l),f[a]=i[u],f[s]=r[u](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function mA(e){$.call(this,null,e)}mA.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ee(mA,$,{transform(e,t){let n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,a=>a[r]=n(a,e))}});function cY(e){$.call(this,[],e)}ee(cY,$,{transform(e,t){let n=t.fork(t.ALL),r=e.generator,i=this.value,o=e.size-i.length,a,s,c;if(o>0){for(a=[];--o>=0;)a.push(c=ct(r(e))),i.push(c);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else s=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(s):s,i=i.slice(-o);return n.source=this.value=i,n}});var Zv={value:"value",median:J6,mean:dv,min:vl,max:Bo},H9e=[];function gA(e){$.call(this,[],e)}gA.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function L9e(e){var t=e.method||Zv.value,n;if(Zv[t]==null)B("Unrecognized imputation method: "+t);else return t===Zv.value?(n=e.value!==void 0?e.value:0,()=>n):Zv[t]}function A9e(e){let t=e.field;return n=>n?t(n):NaN}ee(gA,$,{transform(e,t){var n=t.fork(t.ALL),r=L9e(e),i=A9e(e),o=un(e.field),a=un(e.key),s=(e.groupby||[]).map(un),c=V9e(t.source,e.groupby,e.key,e.keyvals),l=[],u=this.value,f=c.domain.length,d,p,h,m,g,v,y,C,b,M;for(g=0,C=c.length;g<C;++g)for(d=c[g],h=d.values,p=NaN,y=0;y<f;++y)if(d[y]==null){for(m=c.domain[y],M={_impute:!0},v=0,b=h.length;v<b;++v)M[s[v]]=h[v];M[a]=m,M[o]=Number.isNaN(p)?p=r(d,i):p,l.push(ct(M))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),u.length&&(n.rem=n.materialize(n.REM).rem.concat(u)),this.value=l,n}});function V9e(e,t,n,r){var i=v=>v(g),o=[],a=r?r.slice():[],s={},c={},l,u,f,d,p,h,m,g;for(a.forEach((v,y)=>s[v]=y+1),d=0,m=e.length;d<m;++d)g=e[d],h=n(g),p=s[h]||(s[h]=a.push(h)),u=(l=t?t.map(i):H9e)+"",(f=c[u])||(f=c[u]=[],o.push(f),f.values=l),f[p-1]=g;return o.domain=a,o}function vA(e){F3.call(this,e)}vA.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Gd},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ee(vA,F3,{transform(e,t){let n=this,r=e.modified(),i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{Te(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){let e=this._adds,t=this._mods,n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function yA(e){$.call(this,null,e)}yA.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ee(yA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=cA(r,e.groupby,e.field),o=(e.groupby||[]).map(un),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",c=e.as||["value","density"],l=[],u=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;s!=="pdf"&&s!=="cdf"&&B("Invalid density method: "+s),e.resolve==="shared"&&(u||(u=Zi(r,e.field)),f=d=e.steps||d),i.forEach(p=>{let h=Ov(p,a)[s],m=e.counts?p.length:1,g=u||Zi(p);hu(h,g,f,d).forEach(v=>{let y={};for(let C=0;C<o.length;++C)y[o[C]]=p.dims[C];y[c[0]]=v[0],y[c[1]]=v[1]*m,l.push(ct(y))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function lY(e){Rt.call(this,null,N9e,e)}ee(lY,Rt);function N9e(e){return this.value&&!e.modified()?this.value:sd(e.fields,e.flat)}function uY(e){$.call(this,[],e),this._pending=null}ee(uY,$,{transform(e,t){let n=t.dataflow;return this._pending?eA(this,t,this._pending):_9e(e)?t.StopPropagation:e.values?eA(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=te(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>eA(this,t,te(r.data)))}});function _9e(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function eA(e,t,n){n.forEach(ct);let r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function xA(e){$.call(this,{},e)}xA.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ee(xA,$,{transform(e,t){let n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,a=e.modified(),s=n.length,c=a?t.SOURCE:t.ADD,l=t,u=e.as,f,d,p;return i?(d=i.length,s>1&&!u&&B('Multi-field lookup requires explicit "as" parameter.'),u&&u.length!==s*d&&B('The "as" parameter has too few output field names.'),u=u||i.map(un),f=function(h){for(var m=0,g=0,v,y;m<s;++m)if(y=r.get(n[m](h)),y==null)for(v=0;v<d;++v,++g)h[u[g]]=o;else for(v=0;v<d;++v,++g)h[u[g]]=i[v](y)}):(u||B("Missing output field names."),f=function(h){for(var m=0,g;m<s;++m)g=r.get(n[m](h)),h[u[m]]=g??o}),a?l=t.reflow(!0):(p=n.some(h=>t.modified(h.fields)),c|=p?t.MOD:0),t.visit(c,f),l.modifies(u)}});function fY(e){Rt.call(this,null,k9e,e)}ee(fY,Rt);function k9e(e){if(this.value&&!e.modified())return this.value;let t=e.extents,n=t.length,r=1/0,i=-1/0,o,a;for(o=0;o<n;++o)a=t[o],a[0]<r&&(r=a[0]),a[1]>i&&(i=a[1]);return[r,i]}function dY(e){Rt.call(this,null,T9e,e)}ee(dY,Rt);function T9e(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function pY(e){$.call(this,null,e)}ee(pY,$,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function CA(e){F3.call(this,e)}CA.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Gd,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ee(CA,F3,{_transform:F3.prototype.transform,transform(e,t){return this._transform(I9e(e,t),t)}});function I9e(e,t){let n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=pr(n).concat(pr(r)),a=R9e(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>i),fields:a.map(s=>F9e(s,n,r,o)),as:a.map(s=>s+""),modified:e.modified.bind(e)}}function F9e(e,t,n,r){return wi(i=>t(i)===e?n(i):NaN,r,e+"")}function R9e(e,t,n){let r={},i=[];return n.visit(n.SOURCE,o=>{let a=e(o);r[a]||(r[a]=1,i.push(a))}),i.sort(od),t?i.slice(0,t):i}function hY(e){Jv.call(this,e)}ee(hY,Jv,{transform(e,t){let n=e.subflow,r=e.field,i=o=>this.subflow(De(o),n,t,o);return(e.modified("field")||r&&t.modified(pr(r)))&&B("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{let a=i(o);r(o).forEach(s=>a.mod(s))}),t.visit(t.ADD,o=>{let a=i(o);r(o).forEach(s=>a.add(ct(s)))}),t.visit(t.REM,o=>{let a=i(o);r(o).forEach(s=>a.rem(s))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function bA(e){$.call(this,null,e)}bA.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ee(bA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=iY(e.fields,e.as||[]),o=r?(s,c)=>O9e(s,c,r,i):zl,a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,s=>{let c=De(s);n.rem.push(a[c]),a[c]=null}),t.visit(t.ADD,s=>{let c=o(s,ct({}));a[De(s)]=c,n.add.push(c)}),t.visit(t.MOD,s=>{n.mod.push(o(s,a[De(s)]))}),n}});function O9e(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function mY(e){$.call(this,null,e)}ee(mY,$,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function MA(e){$.call(this,null,e)}MA.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};var P9e=1e-14;ee(MA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;let i=t.materialize(t.SOURCE).source,o=cA(i,e.groupby,e.field),a=(e.groupby||[]).map(un),s=[],c=e.step||.01,l=e.probs||Wn(c/2,1-P9e,c),u=l.length;return o.forEach(f=>{let d=kv(f,l);for(let p=0;p<u;++p){let h={};for(let m=0;m<a.length;++m)h[a[m]]=f.dims[m];h[r[0]]=l[p],h[r[1]]=d[p],s.push(ct(h))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}});function gY(e){$.call(this,null,e)}ee(gY,$,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{let o=De(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{let o=Av(i);r[De(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{let o=r[De(i)];for(let a in i)o[a]=i[a],n.modifies(a);n.mod.push(o)})),n}});function wA(e){$.call(this,[],e),this.count=0}wA.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ee(wA,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((u,f)=>(u[De(f)]=1,u),{}),a=this.value,s=this.count,c=0;function l(u){let f,d;a.length<i?a.push(u):(d=~~((s+1)*i1()),d<a.length&&d>=c&&(f=a[d],o[De(f)]&&n.rem.push(f),a[d]=u)),++s}if(t.rem.length&&(t.visit(t.REM,u=>{let f=De(u);o[f]&&(o[f]=-1,n.rem.push(u)),--s}),a=a.filter(u=>o[De(u)]!==-1)),(t.rem.length||r)&&a.length<i&&t.source&&(c=s=a.length,t.visit(t.SOURCE,u=>{o[De(u)]||l(u)}),c=-1),r&&a.length>i){let u=a.length-i;for(let f=0;f<u;++f)o[De(a[f])]=-1,n.rem.push(a[f]);a=a.slice(u)}return t.mod.length&&t.visit(t.MOD,u=>{o[De(u)]&&n.mod.push(u)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||c<0)&&(n.add=a.filter(u=>!o[De(u)])),this.count=s,this.value=n.source=a,n}});function SA(e){$.call(this,null,e)}SA.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ee(SA,$,{transform(e,t){if(this.value&&!e.modified())return;let n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Wn(e.start,e.stop,e.step||1).map(i=>{let o={};return o[r]=i,ct(o)}),n.add=t.add.concat(this.value),n}});function vY(e){$.call(this,null,e),this.modified(!0)}ee(vY,$,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function EA(e){$.call(this,null,e)}var yY=["unit0","unit1"];EA.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:yv,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:yY}]};ee(EA,$,{transform(e,t){let n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),a=(i?cc:sc)(o.unit).offset,s=e.as||yY,c=s[0],l=s[1],u=o.step,f=o.start||1/0,d=o.stop||-1/0,p=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(pr(n)))&&(t=t.reflow(!0),p=t.SOURCE,f=1/0,d=-1/0),t.visit(p,h=>{let m=n(h),g,v;m==null?(h[c]=null,r&&(h[l]=null)):(h[c]=g=v=o(m),r&&(h[l]=v=a(g,u)),g<f&&(f=g),v>d&&(d=v))}),o.start=f,o.stop=d,t.modifies(r?s:c)},_floor(e,t){let n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:EL({extent:e.extent||Zi(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=xv(r),a=this.value||{},s=(n?CL:xL)(o,i);return s.unit=je(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}});function xY(e){$.call(this,E3(),e)}ee(xY,$,{transform(e,t){let n=t.dataflow,r=e.field,i=this.value,o=s=>i.set(r(s),s),a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,s=>i.delete(r(s))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function CY(e){$.call(this,null,e)}ee(CY,$,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Ga(e.sort)):t.source).map(e.field))}});function $9e(e,t,n,r){let i=qd[e](t,n);return{init:i.init||L2,update:function(o,a){a[r]=i.next(o)}}}var qd={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{let n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{let n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){let e=qd.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{let n=t.data,r=t.compare,i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||B("ntile num must be greater than zero.");let n=qd.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{let r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{let r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||B("nth_value nth must be greater than zero."),{next:n=>{let r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{let r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{let i=r.data;return r.index<=n?t:(n=B9e(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function B9e(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}var U9e=Object.keys(qd);function bY(e){let t=te(e.ops),n=te(e.fields),r=te(e.params),i=te(e.aggregate_params),o=te(e.as),a=this.outputs=[],s=this.windows=[],c={},l={},u=[],f=[],d=!0;function p(h){te(pr(h)).forEach(m=>c[m]=1)}p(e.sort),t.forEach((h,m)=>{let g=n[m],v=r[m],y=i[m]||null,C=un(g),b=QW(h,C,o[m]);if(p(g),a.push(b),de(qd,h))s.push($9e(h,g,v,b));else{if(g==null&&h!=="count"&&B("Null aggregate field specified."),h==="count"){u.push(b);return}d=!1;let M=l[C];M||(M=l[C]=[],M.field=g,f.push(M)),M.push(KW(h,y,b))}}),(u.length||f.length)&&(this.cell=j9e(f,u,d)),this.inputs=Object.keys(c)}var MY=bY.prototype;MY.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};MY.update=function(e,t){let n=this.cell,r=this.windows,i=e.data,o=r&&r.length,a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)};function j9e(e,t,n){e=e.map(c=>JW(c,c.field));let r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new nA;return r.add=function(c){if(r.num+=1,!n){s&&s.add(c);for(let l=0;l<i;++l)o[l].add(o[l].get(c),c)}},r.rem=function(c){if(r.num-=1,!n){s&&s.rem(c);for(let l=0;l<i;++l)o[l].rem(o[l].get(c),c)}},r.set=function(c){let l,u;for(s&&s.values(),l=0,u=t.length;l<u;++l)c[t[l]]=r.num;if(!n)for(l=0,u=o.length;l<u;++l)o[l].set(c)},r.init=function(){r.num=0,s&&s.reset();for(let c=0;c<i;++c)o[c].init()},r}function DA(e){$.call(this,{},e),this._mlen=0,this._mods=[]}DA.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:U9e.concat(Gd)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ee(DA,$,{transform(e,t){this.stamp=t.stamp;let n=e.modified(),r=Ga(e.sort),i=tA(e.groupby),o=s=>this.group(i(s)),a=this.state;(!a||n)&&(a=this.state=new bY(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,s=>o(s).add(s))):(t.visit(t.REM,s=>o(s).remove(s)),t.visit(t.ADD,s=>o(s).add(s)));for(let s=0,c=this._mlen;s<c;++s)q9e(this._mods[s],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=eY(De),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function q9e(e,t,n,r){let i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),c=s.length,l=o?co(i):null,u={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||gn(-1)};t.init();for(let f=0;f<c;++f)G9e(u,a,f,c),o&&W9e(u,l),t.update(u,s[f])}function G9e(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function W9e(e,t){let n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}var TN={};Mr(TN,{bound:()=>BK,identifier:()=>kN,mark:()=>UK,overlap:()=>jK,render:()=>GK,viewlayout:()=>YK});function gt(e){return function(){return e}}var HA=Math.abs,ti=Math.atan2,R3=Math.cos,wY=Math.max,ey=Math.min,_2=Math.sin,pc=Math.sqrt,Lr=1e-12,O3=Math.PI,Wd=O3/2,ty=2*O3;function SY(e){return e>1?0:e<-1?O3:Math.acos(e)}function LA(e){return e>=1?Wd:e<=-1?-Wd:Math.asin(e)}var AA=Math.PI,VA=2*AA,Hl=1e-6,Y9e=VA-Hl;function EY(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function X9e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return EY;let n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}var Ll=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?EY:X9e(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,c=r-t,l=i-n,u=a-t,f=s-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Hl)if(!(Math.abs(f*c-l*u)>Hl)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-a,h=i-s,m=c*c+l*l,g=p*p+h*h,v=Math.sqrt(m),y=Math.sqrt(d),C=o*Math.tan((AA-Math.acos((m+d-g)/(2*v*y)))/2),b=C/y,M=C/v;Math.abs(b-1)>Hl&&this._append`L${t+b*u},${n+b*f}`,this._append`A${o},${o},0,0,${+(f*p>u*h)},${this._x1=t+M*c},${this._y1=n+M*l}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),c=r*Math.sin(i),l=t+s,u=n+c,f=1^a,d=a?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>Hl||Math.abs(this._y1-u)>Hl)&&this._append`L${l},${u}`,r&&(d<0&&(d=d%VA+VA),d>Y9e?this._append`A${r},${r},0,1,${f},${t-s},${n-c}A${r},${r},0,1,${f},${this._x1=l},${this._y1=u}`:d>Hl&&this._append`A${r},${r},0,${+(d>=AA)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Al(){return new Ll}Al.prototype=Ll.prototype;function P3(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{let r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Ll(t)}function Q9e(e){return e.innerRadius}function K9e(e){return e.outerRadius}function Z9e(e){return e.startAngle}function J9e(e){return e.endAngle}function ege(e){return e&&e.padAngle}function tge(e,t,n,r,i,o,a,s){var c=n-e,l=r-t,u=a-i,f=s-o,d=f*c-u*l;if(!(d*d<Lr))return d=(u*(t-o)-f*(e-i))/d,[e+d*c,t+d*l]}function ny(e,t,n,r,i,o,a){var s=e-n,c=t-r,l=(a?o:-o)/pc(s*s+c*c),u=l*c,f=-l*s,d=e+u,p=t+f,h=n+u,m=r+f,g=(d+h)/2,v=(p+m)/2,y=h-d,C=m-p,b=y*y+C*C,M=i-o,S=d*m-h*p,w=(C<0?-1:1)*pc(wY(0,M*M*b-S*S)),E=(S*C-y*w)/b,D=(-S*y-C*w)/b,L=(S*C+y*w)/b,A=(-S*y+C*w)/b,j=E-g,V=D-v,_=L-g,N=A-v;return j*j+V*V>_*_+N*N&&(E=L,D=A),{cx:E,cy:D,x01:-u,y01:-f,x11:E*(i/M-1),y11:D*(i/M-1)}}function NA(){var e=Q9e,t=K9e,n=gt(0),r=null,i=Z9e,o=J9e,a=ege,s=null,c=P3(l);function l(){var u,f,d=+e.apply(this,arguments),p=+t.apply(this,arguments),h=i.apply(this,arguments)-Wd,m=o.apply(this,arguments)-Wd,g=HA(m-h),v=m>h;if(s||(s=u=c()),p<d&&(f=p,p=d,d=f),!(p>Lr))s.moveTo(0,0);else if(g>ty-Lr)s.moveTo(p*R3(h),p*_2(h)),s.arc(0,0,p,h,m,!v),d>Lr&&(s.moveTo(d*R3(m),d*_2(m)),s.arc(0,0,d,m,h,v));else{var y=h,C=m,b=h,M=m,S=g,w=g,E=a.apply(this,arguments)/2,D=E>Lr&&(r?+r.apply(this,arguments):pc(d*d+p*p)),L=ey(HA(p-d)/2,+n.apply(this,arguments)),A=L,j=L,V,_;if(D>Lr){var N=LA(D/d*_2(E)),I=LA(D/p*_2(E));(S-=N*2)>Lr?(N*=v?1:-1,b+=N,M-=N):(S=0,b=M=(h+m)/2),(w-=I*2)>Lr?(I*=v?1:-1,y+=I,C-=I):(w=0,y=C=(h+m)/2)}var W=p*R3(y),X=p*_2(y),J=d*R3(M),Se=d*_2(M);if(L>Lr){var Ee=p*R3(C),Xe=p*_2(C),zt=d*R3(b),lt=d*_2(b),en;if(g<O3)if(en=tge(W,X,zt,lt,Ee,Xe,J,Se)){var Ls=W-en[0],W0=X-en[1],F4=Ee-en[0],ge=Xe-en[1],Qe=1/_2(SY((Ls*F4+W0*ge)/(pc(Ls*Ls+W0*W0)*pc(F4*F4+ge*ge)))/2),nt=pc(en[0]*en[0]+en[1]*en[1]);A=ey(L,(d-nt)/(Qe-1)),j=ey(L,(p-nt)/(Qe+1))}else A=j=0}w>Lr?j>Lr?(V=ny(zt,lt,W,X,p,j,v),_=ny(Ee,Xe,J,Se,p,j,v),s.moveTo(V.cx+V.x01,V.cy+V.y01),j<L?s.arc(V.cx,V.cy,j,ti(V.y01,V.x01),ti(_.y01,_.x01),!v):(s.arc(V.cx,V.cy,j,ti(V.y01,V.x01),ti(V.y11,V.x11),!v),s.arc(0,0,p,ti(V.cy+V.y11,V.cx+V.x11),ti(_.cy+_.y11,_.cx+_.x11),!v),s.arc(_.cx,_.cy,j,ti(_.y11,_.x11),ti(_.y01,_.x01),!v))):(s.moveTo(W,X),s.arc(0,0,p,y,C,!v)):s.moveTo(W,X),!(d>Lr)||!(S>Lr)?s.lineTo(J,Se):A>Lr?(V=ny(J,Se,Ee,Xe,d,-A,v),_=ny(W,X,zt,lt,d,-A,v),s.lineTo(V.cx+V.x01,V.cy+V.y01),A<L?s.arc(V.cx,V.cy,A,ti(V.y01,V.x01),ti(_.y01,_.x01),!v):(s.arc(V.cx,V.cy,A,ti(V.y01,V.x01),ti(V.y11,V.x11),!v),s.arc(0,0,d,ti(V.cy+V.y11,V.cx+V.x11),ti(_.cy+_.y11,_.cx+_.x11),v),s.arc(_.cx,_.cy,A,ti(_.y11,_.x11),ti(_.y01,_.x01),!v))):s.arc(0,0,d,M,b,v)}if(s.closePath(),u)return s=null,u+""||null}return l.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-O3/2;return[R3(f)*u,_2(f)*u]},l.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:gt(+u),l):e},l.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:gt(+u),l):t},l.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:gt(+u),l):n},l.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:gt(+u),l):r},l.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:gt(+u),l):i},l.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:gt(+u),l):o},l.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:gt(+u),l):a},l.context=function(u){return arguments.length?(s=u??null,l):s},l}var EJe=Array.prototype.slice;function ry(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function DY(e){this._context=e}DY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Vl(e){return new DY(e)}function iy(e){return e[0]}function oy(e){return e[1]}function Yd(e,t){var n=gt(!0),r=null,i=Vl,o=null,a=P3(s);e=typeof e=="function"?e:e===void 0?iy:gt(e),t=typeof t=="function"?t:t===void 0?oy:gt(t);function s(c){var l,u=(c=ry(c)).length,f,d=!1,p;for(r==null&&(o=i(p=a())),l=0;l<=u;++l)!(l<u&&n(f=c[l],l,c))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,l,c),+t(f,l,c));if(p)return o=null,p+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:gt(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:gt(+c),s):t},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:gt(!!c),s):n},s.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),s):i},s.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),s):r},s}function ay(e,t,n){var r=null,i=gt(!0),o=null,a=Vl,s=null,c=P3(l);e=typeof e=="function"?e:e===void 0?iy:gt(+e),t=typeof t=="function"?t:t===void 0?gt(0):gt(+t),n=typeof n=="function"?n:n===void 0?oy:gt(+n);function l(f){var d,p,h,m=(f=ry(f)).length,g,v=!1,y,C=new Array(m),b=new Array(m);for(o==null&&(s=a(y=c())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===v)if(v=!v)p=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=d-1;h>=p;--h)s.point(C[h],b[h]);s.lineEnd(),s.areaEnd()}v&&(C[d]=+e(g,d,f),b[d]=+t(g,d,f),s.point(r?+r(g,d,f):C[d],n?+n(g,d,f):b[d]))}if(y)return s=null,y+""||null}function u(){return Yd().defined(i).curve(a).context(o)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:gt(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:gt(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:gt(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:gt(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:gt(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:gt(+f),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:gt(!!f),l):i},l.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),l):a},l.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),l):o},l}var zY={draw(e,t){let n=pc(t/O3);e.moveTo(n,0),e.arc(0,0,n,0,ty)}};function sy(e,t){let n=null,r=P3(i);e=typeof e=="function"?e:gt(e||zY),t=typeof t=="function"?t:gt(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:gt(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:gt(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Wo(){}function mu(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Xd(e){this._context=e}Xd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _A(e){return new Xd(e)}function HY(e){this._context=e}HY.prototype={areaStart:Wo,areaEnd:Wo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kA(e){return new HY(e)}function LY(e){this._context=e}LY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function TA(e){return new LY(e)}function AY(e,t){this._basis=new Xd(e),this._beta=t}AY.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,a=t[n]-i,s=-1,c;++s<=n;)c=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+c*o),this._beta*t[s]+(1-this._beta)*(i+c*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var IA=function e(t){function n(r){return t===1?new Xd(r):new AY(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function gu(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function cy(e,t){this._context=e,this._k=(1-t)/6}cy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:gu(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:gu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var FA=function e(t){function n(r){return new cy(r,t)}return n.tension=function(r){return e(+r)},n}(0);function ly(e,t){this._context=e,this._k=(1-t)/6}ly.prototype={areaStart:Wo,areaEnd:Wo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:gu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var RA=function e(t){function n(r){return new ly(r,t)}return n.tension=function(r){return e(+r)},n}(0);function uy(e,t){this._context=e,this._k=(1-t)/6}uy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:gu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var OA=function e(t){function n(r){return new uy(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Qd(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>Lr){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>Lr){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*l+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function VY(e,t){this._context=e,this._alpha=t}VY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Qd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var PA=function e(t){function n(r){return t?new VY(r,t):new cy(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function NY(e,t){this._context=e,this._alpha=t}NY.prototype={areaStart:Wo,areaEnd:Wo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Qd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var $A=function e(t){function n(r){return t?new NY(r,t):new ly(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function _Y(e,t){this._context=e,this._alpha=t}_Y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Qd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var BA=function e(t){function n(r){return t?new _Y(r,t):new uy(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function kY(e){this._context=e}kY.prototype={areaStart:Wo,areaEnd:Wo,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function UA(e){return new kY(e)}function TY(e){return e<0?-1:1}function IY(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(TY(o)+TY(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function FY(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function jA(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function fy(e){this._context=e}fy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jA(this,this._t0,FY(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,jA(this,FY(this,n=IY(this,e,t)),n);break;default:jA(this,this._t0,n=IY(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function RY(e){this._context=new OY(e)}(RY.prototype=Object.create(fy.prototype)).point=function(e,t){fy.prototype.point.call(this,t,e)};function OY(e){this._context=e}OY.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function qA(e){return new fy(e)}function GA(e){return new RY(e)}function $Y(e){this._context=e}$Y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=PY(e),i=PY(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function PY(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function WA(e){return new $Y(e)}function dy(e,t){this._context=e,this._t=t}dy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function YA(e){return new dy(e,.5)}function XA(e){return new dy(e,0)}function QA(e){return new dy(e,1)}function Yo(e,t){if(typeof document<"u"&&document.createElement){let n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}var BY=()=>typeof Image<"u"?Image:null;function rr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Wa(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}var vu=Symbol("implicit");function Nl(){var e=new Z6,t=[],n=[],r=vu;function i(o){let a=e.get(o);if(a===void 0){if(r!==vu)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Z6;for(let a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Nl(t,n).unknown(r)},rr.apply(i,arguments),i}var uV={};Mr(uV,{interpolate:()=>Di,interpolateArray:()=>hX,interpolateBasis:()=>Cy,interpolateBasisClosed:()=>by,interpolateCubehelix:()=>NX,interpolateCubehelixLong:()=>_X,interpolateDate:()=>wy,interpolateDiscrete:()=>mX,interpolateHcl:()=>LX,interpolateHclLong:()=>AX,interpolateHsl:()=>DX,interpolateHslLong:()=>zX,interpolateHue:()=>gX,interpolateLab:()=>lV,interpolateNumber:()=>zi,interpolateNumberArray:()=>Mu,interpolateObject:()=>Sy,interpolateRgb:()=>e7,interpolateRgbBasis:()=>dX,interpolateRgbBasisClosed:()=>pX,interpolateRound:()=>Ka,interpolateString:()=>Ey,interpolateTransformCss:()=>bX,interpolateTransformSvg:()=>MX,interpolateZoom:()=>SX,piecewise:()=>Ol,quantize:()=>kX});function hc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function $3(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Xa(){}var B3=.7,Tl=1/B3,yu="\\s*([+-]?\\d+)\\s*",Kd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ya="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rge=/^#([0-9a-f]{3,8})$/,ige=new RegExp(`^rgb\\(${yu},${yu},${yu}\\)$`),oge=new RegExp(`^rgb\\(${Ya},${Ya},${Ya}\\)$`),age=new RegExp(`^rgba\\(${yu},${yu},${yu},${Kd}\\)$`),sge=new RegExp(`^rgba\\(${Ya},${Ya},${Ya},${Kd}\\)$`),cge=new RegExp(`^hsl\\(${Kd},${Ya},${Ya}\\)$`),lge=new RegExp(`^hsla\\(${Kd},${Ya},${Ya},${Kd}\\)$`),UY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hc(Xa,U3,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:jY,formatHex:jY,formatHex8:uge,formatHsl:fge,formatRgb:qY,toString:qY});function jY(){return this.rgb().formatHex()}function uge(){return this.rgb().formatHex8()}function fge(){return KY(this).formatHsl()}function qY(){return this.rgb().formatRgb()}function U3(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rge.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?GY(t):n===3?new ir(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?py(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?py(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ige.exec(e))?new ir(t[1],t[2],t[3],1):(t=oge.exec(e))?new ir(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=age.exec(e))?py(t[1],t[2],t[3],t[4]):(t=sge.exec(e))?py(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cge.exec(e))?XY(t[1],t[2]/100,t[3]/100,1):(t=lge.exec(e))?XY(t[1],t[2]/100,t[3]/100,t[4]):UY.hasOwnProperty(e)?GY(UY[e]):e==="transparent"?new ir(NaN,NaN,NaN,0):null}function GY(e){return new ir(e>>16&255,e>>8&255,e&255,1)}function py(e,t,n,r){return r<=0&&(e=t=n=NaN),new ir(e,t,n,r)}function Zd(e){return e instanceof Xa||(e=U3(e)),e?(e=e.rgb(),new ir(e.r,e.g,e.b,e.opacity)):new ir}function Xo(e,t,n,r){return arguments.length===1?Zd(e):new ir(e,t,n,r??1)}function ir(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}hc(ir,Xo,$3(Xa,{brighter(e){return e=e==null?Tl:Math.pow(Tl,e),new ir(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?B3:Math.pow(B3,e),new ir(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ir(kl(this.r),kl(this.g),kl(this.b),my(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:WY,formatHex:WY,formatHex8:dge,formatRgb:YY,toString:YY}));function WY(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}`}function dge(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}${_l((isNaN(this.opacity)?1:this.opacity)*255)}`}function YY(){let e=my(this.opacity);return`${e===1?"rgb(":"rgba("}${kl(this.r)}, ${kl(this.g)}, ${kl(this.b)}${e===1?")":`, ${e})`}`}function my(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function kl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _l(e){return e=kl(e),(e<16?"0":"")+e.toString(16)}function XY(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new k2(e,t,n,r)}function KY(e){if(e instanceof k2)return new k2(e.h,e.s,e.l,e.opacity);if(e instanceof Xa||(e=U3(e)),!e)return new k2;if(e instanceof k2)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new k2(a,s,c,e.opacity)}function Il(e,t,n,r){return arguments.length===1?KY(e):new k2(e,t,n,r??1)}function k2(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}hc(k2,Il,$3(Xa,{brighter(e){return e=e==null?Tl:Math.pow(Tl,e),new k2(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?B3:Math.pow(B3,e),new k2(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ir(KA(e>=240?e-240:e+120,i,r),KA(e,i,r),KA(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new k2(QY(this.h),hy(this.s),hy(this.l),my(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=my(this.opacity);return`${e===1?"hsl(":"hsla("}${QY(this.h)}, ${hy(this.s)*100}%, ${hy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function QY(e){return e=(e||0)%360,e<0?e+360:e}function hy(e){return Math.max(0,Math.min(1,e||0))}function KA(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var gy=Math.PI/180,vy=180/Math.PI;var yy=18,ZY=.96422,JY=1,eX=.82521,tX=4/29,xu=6/29,nX=3*xu*xu,pge=xu*xu*xu;function rX(e){if(e instanceof Qa)return new Qa(e.l,e.a,e.b,e.opacity);if(e instanceof mc)return iX(e);e instanceof ir||(e=Zd(e));var t=tV(e.r),n=tV(e.g),r=tV(e.b),i=ZA((.2225045*t+.7168786*n+.0606169*r)/JY),o,a;return t===n&&n===r?o=a=i:(o=ZA((.4360747*t+.3850649*n+.1430804*r)/ZY),a=ZA((.0139322*t+.0971045*n+.7141733*r)/eX)),new Qa(116*i-16,500*(o-i),200*(i-a),e.opacity)}function j3(e,t,n,r){return arguments.length===1?rX(e):new Qa(e,t,n,r??1)}function Qa(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}hc(Qa,j3,$3(Xa,{brighter(e){return new Qa(this.l+yy*(e??1),this.a,this.b,this.opacity)},darker(e){return new Qa(this.l-yy*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=ZY*JA(t),e=JY*JA(e),n=eX*JA(n),new ir(eV(3.1338561*t-1.6168667*e-.4906146*n),eV(-.9787684*t+1.9161415*e+.033454*n),eV(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function ZA(e){return e>pge?Math.pow(e,1/3):e/nX+tX}function JA(e){return e>xu?e*e*e:nX*(e-tX)}function eV(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function tV(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function hge(e){if(e instanceof mc)return new mc(e.h,e.c,e.l,e.opacity);if(e instanceof Qa||(e=rX(e)),e.a===0&&e.b===0)return new mc(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*vy;return new mc(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Fl(e,t,n,r){return arguments.length===1?hge(e):new mc(e,t,n,r??1)}function mc(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function iX(e){if(isNaN(e.h))return new Qa(e.l,0,0,e.opacity);var t=e.h*gy;return new Qa(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}hc(mc,Fl,$3(Xa,{brighter(e){return new mc(this.h,this.c,this.l+yy*(e??1),this.opacity)},darker(e){return new mc(this.h,this.c,this.l-yy*(e??1),this.opacity)},rgb(){return iX(this).rgb()}}));var cX=-.14861,nV=1.78277,rV=-.29227,xy=-.90649,Jd=1.97294,oX=Jd*xy,aX=Jd*nV,sX=nV*rV-xy*cX;function mge(e){if(e instanceof Rl)return new Rl(e.h,e.s,e.l,e.opacity);e instanceof ir||(e=Zd(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(sX*r+oX*t-aX*n)/(sX+oX-aX),o=r-i,a=(Jd*(n-i)-rV*o)/xy,s=Math.sqrt(a*a+o*o)/(Jd*i*(1-i)),c=s?Math.atan2(a,o)*vy-120:NaN;return new Rl(c<0?c+360:c,s,i,e.opacity)}function Cu(e,t,n,r){return arguments.length===1?mge(e):new Rl(e,t,n,r??1)}function Rl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}hc(Rl,Cu,$3(Xa,{brighter(e){return e=e==null?Tl:Math.pow(Tl,e),new Rl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?B3:Math.pow(B3,e),new Rl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*gy,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ir(255*(t+n*(cX*r+nV*i)),255*(t+n*(rV*r+xy*i)),255*(t+n*(Jd*r)),this.opacity)}}));function iV(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function Cy(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return iV((n-r/t)*t,a,i,o,s)}}function by(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return iV((n-r/t)*t,i,o,a,s)}}var bu=e=>()=>e;function lX(e,t){return function(n){return e+n*t}}function gge(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function q3(e,t){var n=t-e;return n?lX(e,n>180||n<-180?n-360*Math.round(n/360):n):bu(isNaN(e)?t:e)}function uX(e){return(e=+e)==1?yn:function(t,n){return n-t?gge(t,n,e):bu(isNaN(t)?n:t)}}function yn(e,t){var n=t-e;return n?lX(e,n):bu(isNaN(e)?t:e)}var e7=function e(t){var n=uX(t);function r(i,o){var a=n((i=Xo(i)).r,(o=Xo(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),l=yn(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function fX(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=Xo(t[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=e(r),i=e(i),o=e(o),s.opacity=1,function(c){return s.r=r(c),s.g=i(c),s.b=o(c),s+""}}}var dX=fX(Cy),pX=fX(by);function Mu(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function My(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function hX(e,t){return(My(t)?Mu:oV)(e,t)}function oV(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Di(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function wy(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function zi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Sy(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Di(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var sV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aV=new RegExp(sV.source,"g");function vge(e){return function(){return e}}function yge(e){return function(t){return e(t)+""}}function Ey(e,t){var n=sV.lastIndex=aV.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(e=e+"",t=t+"";(r=sV.exec(e))&&(i=aV.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:zi(r,i)})),n=aV.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?yge(c[0].x):vge(t):(t=c.length,function(l){for(var u=0,f;u<t;++u)s[(f=c[u]).i]=f.x(l);return s.join("")})}function Di(e,t){var n=typeof t,r;return t==null||n==="boolean"?bu(t):(n==="number"?zi:n==="string"?(r=U3(t))?(t=r,e7):Ey:t instanceof U3?e7:t instanceof Date?wy:My(t)?Mu:Array.isArray(t)?oV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Sy:zi)(e,t)}function mX(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function gX(e,t){var n=q3(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Ka(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var vX=180/Math.PI,Dy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cV(e,t,n,r,i,o){var a,s,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*vX,skewX:Math.atan(c)*vX,scaleX:a,scaleY:s}}var zy;function yX(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Dy:cV(t.a,t.b,t.c,t.d,t.e,t.f)}function xX(e){return e==null?Dy:(zy||(zy=document.createElementNS("http://www.w3.org/2000/svg","g")),zy.setAttribute("transform",e),(e=zy.transform.baseVal.consolidate())?(e=e.matrix,cV(e.a,e.b,e.c,e.d,e.e,e.f)):Dy)}function CX(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,d,p,h){if(l!==f||u!==d){var m=p.push("translate(",null,t,null,n);h.push({i:m-4,x:zi(l,f)},{i:m-2,x:zi(u,d)})}else(f||d)&&p.push("translate("+f+t+d+n)}function a(l,u,f,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:zi(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function s(l,u,f,d){l!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:zi(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,d,p,h){if(l!==f||u!==d){var m=p.push(i(p)+"scale(",null,",",null,")");h.push({i:m-4,x:zi(l,f)},{i:m-2,x:zi(u,d)})}else(f!==1||d!==1)&&p.push(i(p)+"scale("+f+","+d+")")}return function(l,u){var f=[],d=[];return l=e(l),u=e(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,d),a(l.rotate,u.rotate,f,d),s(l.skewX,u.skewX,f,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,d),l=u=null,function(p){for(var h=-1,m=d.length,g;++h<m;)f[(g=d[h]).i]=g.x(p);return f.join("")}}}var bX=CX(yX,"px, ","px)","deg)"),MX=CX(xX,", ",")",")");var xge=1e-12;function wX(e){return((e=Math.exp(e))+1/e)/2}function Cge(e){return((e=Math.exp(e))-1/e)/2}function bge(e){return((e=Math.exp(2*e))-1)/(e+1)}var SX=function e(t,n,r){function i(o,a){var s=o[0],c=o[1],l=o[2],u=a[0],f=a[1],d=a[2],p=u-s,h=f-c,m=p*p+h*h,g,v;if(m<xge)v=Math.log(d/l)/t,g=function(w){return[s+w*p,c+w*h,l*Math.exp(t*w*v)]};else{var y=Math.sqrt(m),C=(d*d-l*l+r*m)/(2*l*n*y),b=(d*d-l*l-r*m)/(2*d*n*y),M=Math.log(Math.sqrt(C*C+1)-C),S=Math.log(Math.sqrt(b*b+1)-b);v=(S-M)/t,g=function(w){var E=w*v,D=wX(M),L=l/(n*y)*(D*bge(t*E+M)-Cge(M));return[s+L*p,c+L*h,l*D/wX(t*E+M)]}}return g.duration=v*1e3*t/Math.SQRT2,g}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return e(a,s,c)},i}(Math.SQRT2,2,4);function EX(e){return function(t,n){var r=e((t=Il(t)).h,(n=Il(n)).h),i=yn(t.s,n.s),o=yn(t.l,n.l),a=yn(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=o(s),t.opacity=a(s),t+""}}}var DX=EX(q3),zX=EX(yn);function lV(e,t){var n=yn((e=j3(e)).l,(t=j3(t)).l),r=yn(e.a,t.a),i=yn(e.b,t.b),o=yn(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=o(a),e+""}}function HX(e){return function(t,n){var r=e((t=Fl(t)).h,(n=Fl(n)).h),i=yn(t.c,n.c),o=yn(t.l,n.l),a=yn(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=o(s),t.opacity=a(s),t+""}}}var LX=HX(q3),AX=HX(yn);function VX(e){return function t(n){n=+n;function r(i,o){var a=e((i=Cu(i)).h,(o=Cu(o)).h),s=yn(i.s,o.s),c=yn(i.l,o.l),l=yn(i.opacity,o.opacity);return function(u){return i.h=a(u),i.s=s(u),i.l=c(Math.pow(u,n)),i.opacity=l(u),i+""}}return r.gamma=t,r}(1)}var NX=VX(q3),_X=VX(yn);function Ol(e,t){t===void 0&&(t=e,e=Di);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function kX(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function fV(e){return function(){return e}}function wu(e){return+e}var TX=[0,1];function ni(e){return e}function dV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:fV(isNaN(t)?NaN:.5)}function Mge(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function wge(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=dV(i,r),o=n(a,o)):(r=dV(r,i),o=n(o,a)),function(s){return o(r(s))}}function Sge(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=dV(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var c=V2(e,s,1,r)-1;return o[c](i[c](s))}}function Za(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Pl(){var e=TX,t=TX,n=Di,r,i,o,a=ni,s,c,l;function u(){var d=Math.min(e.length,t.length);return a!==ni&&(a=Mge(e[0],e[d-1])),s=d>2?Sge:wge,c=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(c||(c=s(e.map(r),t,n)))(r(a(d)))}return f.invert=function(d){return a(i((l||(l=s(t,e.map(r),zi)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,wu),u()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Ka,u()},f.clamp=function(d){return arguments.length?(a=d?!0:ni,u()):a!==ni},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,p){return r=d,i=p,u()}}function t7(){return Pl()(ni,ni)}function Su(e,t,n,r){var i=Ji(e,t,n),o;switch(r=lo(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=yd(i,a))&&(r.precision=o),nu(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=xd(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=vd(i))&&(r.precision=o-(r.type==="%")*2);break}}return z3(r)}function fo(e){var t=e.domain;return e.ticks=function(n){var r=t();return gl(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Su(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],s=r[o],c,l,u=10;for(s<a&&(l=a,a=s,s=l,l=i,i=o,o=l);u-- >0;){if(l=pd(a,s,n),l===c)return r[i]=a,r[o]=s,t(r);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;c=l}return e},e}function n7(){var e=t7();return e.copy=function(){return Za(e,n7())},rr.apply(e,arguments),fo(e)}function r7(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,wu),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return r7(e).unknown(t)},e=arguments.length?Array.from(e,wu):[0,1],fo(n)}function i7(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function IX(e){return Math.log(e)}function FX(e){return Math.exp(e)}function Ege(e){return-Math.log(-e)}function Dge(e){return-Math.exp(-e)}function zge(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Hge(e){return e===10?zge:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Lge(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function RX(e){return(t,n)=>-e(-t,n)}function o7(e){let t=e(IX,FX),n=t.domain,r=10,i,o;function a(){return i=Lge(r),o=Hge(r),n()[0]<0?(i=RX(i),o=RX(o),e(Ege,Dge)):e(IX,FX),t}return t.base=function(s){return arguments.length?(r=+s,a()):r},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=s=>{let c=n(),l=c[0],u=c[c.length-1],f=u<l;f&&([l,u]=[u,l]);let d=i(l),p=i(u),h,m,g=s==null?10:+s,v=[];if(!(r%1)&&p-d<g){if(d=Math.floor(d),p=Math.ceil(p),l>0){for(;d<=p;++d)for(h=1;h<r;++h)if(m=d<0?h/o(-d):h*o(d),!(m<l)){if(m>u)break;v.push(m)}}else for(;d<=p;++d)for(h=r-1;h>=1;--h)if(m=d>0?h/o(-d):h*o(d),!(m<l)){if(m>u)break;v.push(m)}v.length*2<g&&(v=gl(l,u,g))}else v=gl(d,p,Math.min(p-d,g)).map(o);return f?v.reverse():v},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=lo(c)).precision==null&&(c.trim=!0),c=z3(c)),s===1/0)return c;let l=Math.max(1,r*s/t.ticks().length);return u=>{let f=u/o(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=l?c(u):""}},t.nice=()=>n(i7(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),t}function a7(){let e=o7(Pl()).domain([1,10]);return e.copy=()=>Za(e,a7()).base(e.base()),rr.apply(e,arguments),e}function OX(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function PX(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function s7(e){var t=1,n=e(OX(t),PX(t));return n.constant=function(r){return arguments.length?e(OX(t=+r),PX(t)):t},fo(n)}function c7(){var e=s7(Pl());return e.copy=function(){return Za(e,c7()).constant(e.constant())},rr.apply(e,arguments)}function $X(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Age(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Vge(e){return e<0?-e*e:e*e}function l7(e){var t=e(ni,ni),n=1;function r(){return n===1?e(ni,ni):n===.5?e(Age,Vge):e($X(n),$X(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},fo(t)}function Eu(){var e=l7(Pl());return e.copy=function(){return Za(e,Eu()).exponent(e.exponent())},rr.apply(e,arguments),e}function pV(){return Eu.apply(null,arguments).exponent(.5)}function u7(){var e=[],t=[],n=[],r;function i(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=md(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:t[V2(n,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Si),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return u7().domain(e).range(t).unknown(r)},rr.apply(o,arguments)}function f7(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function a(c){return c!=null&&c<=c?i[V2(r,c,0,n)]:o}function s(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return a}return a.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},a.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,s()):i.slice()},a.invertExtent=function(c){var l=i.indexOf(c);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},a.unknown=function(c){return arguments.length&&(o=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return f7().domain([e,t]).range(i).unknown(o)},rr.apply(fo(a),arguments)}function d7(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[V2(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return d7().domain(e).range(t).unknown(n)},rr.apply(i,arguments)}function Nge(e){return new Date(e)}function _ge(e){return e instanceof Date?+e:+new Date(+e)}function Hy(e,t,n,r,i,o,a,s,c,l){var u=t7(),f=u.invert,d=u.domain,p=l(".%L"),h=l(":%S"),m=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),y=l("%b %d"),C=l("%B"),b=l("%Y");function M(S){return(c(S)<S?p:s(S)<S?h:a(S)<S?m:o(S)<S?g:r(S)<S?i(S)<S?v:y:n(S)<S?C:b)(S)}return u.invert=function(S){return new Date(f(S))},u.domain=function(S){return arguments.length?d(Array.from(S,_ge)):d().map(Nge)},u.ticks=function(S){var w=d();return e(w[0],w[w.length-1],S??10)},u.tickFormat=function(S,w){return w==null?M:l(w)},u.nice=function(S){var w=d();return(!S||typeof S.range!="function")&&(S=t(w[0],w[w.length-1],S??10)),S?d(i7(w,S)):u},u.copy=function(){return Za(u,Hy(e,t,n,r,i,o,a,s,c,l))},u}function Ly(){return rr.apply(Hy(oL,aL,e1,oc,jo,N1,A3,H3,Ei,cu).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ay(){return rr.apply(Hy(rL,iL,t1,ac,qo,Uo,V3,L3,Ei,lu).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Vy(){var e=0,t=1,n,r,i,o,a=ni,s=!1,c;function l(f){return f==null||isNaN(f=+f)?c:a(i===0?.5:(f=(o(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(s=!!f,l):s},l.interpolator=function(f){return arguments.length?(a=f,l):a};function u(f){return function(d){var p,h;return arguments.length?([p,h]=d,a=f(p,h),l):[a(0),a(1)]}}return l.range=u(Di),l.rangeRound=u(Ka),l.unknown=function(f){return arguments.length?(c=f,l):c},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function gc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Du(){var e=fo(Vy()(ni));return e.copy=function(){return gc(e,Du())},Wa.apply(e,arguments)}function Ny(){var e=o7(Vy()).domain([1,10]);return e.copy=function(){return gc(e,Ny()).base(e.base())},Wa.apply(e,arguments)}function _y(){var e=s7(Vy());return e.copy=function(){return gc(e,_y()).constant(e.constant())},Wa.apply(e,arguments)}function p7(){var e=l7(Vy());return e.copy=function(){return gc(e,p7()).exponent(e.exponent())},Wa.apply(e,arguments)}function hV(){return p7.apply(null,arguments).exponent(.5)}function ky(){var e=0,t=.5,n=1,r=1,i,o,a,s,c,l=ni,u,f=!1,d;function p(m){return isNaN(m=+m)?d:(m=.5+((m=+u(m))-o)*(r*m<r*o?s:c),l(f?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,n]=m,i=u(e=+e),o=u(t=+t),a=u(n=+n),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,p):[e,t,n]},p.clamp=function(m){return arguments.length?(f=!!m,p):f},p.interpolator=function(m){return arguments.length?(l=m,p):l};function h(m){return function(g){var v,y,C;return arguments.length?([v,y,C]=g,l=Ol(m,[v,y,C]),p):[l(0),l(.5),l(1)]}}return p.range=h(Di),p.rangeRound=h(Ka),p.unknown=function(m){return arguments.length?(d=m,p):d},function(m){return u=m,i=m(e),o=m(t),a=m(n),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,p}}function h7(){var e=fo(ky()(ni));return e.copy=function(){return gc(e,h7())},Wa.apply(e,arguments)}function Ty(){var e=o7(ky()).domain([.1,1,10]);return e.copy=function(){return gc(e,Ty()).base(e.base())},Wa.apply(e,arguments)}function Iy(){var e=s7(ky());return e.copy=function(){return gc(e,Iy()).constant(e.constant())},Wa.apply(e,arguments)}function m7(){var e=l7(ky());return e.copy=function(){return gc(e,m7()).exponent(e.exponent())},Wa.apply(e,arguments)}function mV(){return m7.apply(null,arguments).exponent(.5)}function g7(e,t,n){let r=e-t+n*2;return e?r>0?r:1:0}var Tge="identity",Bl="linear",Ja="log",zu="pow",Hu="sqrt",v7="symlog",G3="time",W3="utc",T2="sequential",Ul="diverging",$l="quantile",y7="quantize",x7="threshold",Ry="ordinal",Oy="point",vV="band",Py="bin-ordinal",gr="continuous",C7="discrete",b7="discretizing",Qo="interpolating",yV="temporal";function Ige(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Fge(e){return function(t){let n=e.range(),r=t[0],i=t[1],o=-1,a,s,c,l;for(i<r&&(s=r,r=i,i=s),c=0,l=n.length;c<l;++c)n[c]>=r&&n[c]<=i&&(o<0&&(o=c),a=c);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function xV(){let e=Nl().unknown(void 0),t=e.domain,n=e.range,r=[0,1],i,o,a=!1,s=0,c=0,l=.5;delete e.unknown;function u(){let f=t().length,d=r[1]<r[0],p=r[1-d],h=g7(f,s,c),m=r[d-0];i=(p-m)/(h||1),a&&(i=Math.floor(i)),m+=(p-m-i*(f-s))*l,o=i*(1-s),a&&(m=Math.round(m),o=Math.round(o));let g=Wn(f).map(v=>m+i*v);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),u()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],u()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,u()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,u()):a},e.padding=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),s=c,u()):s},e.paddingInner=function(f){return arguments.length?(s=Math.max(0,Math.min(1,f)),u()):s},e.paddingOuter=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),u()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;let d=r[1]<r[0],p=d?n().reverse():n(),h=p.length-1,m=+f[0],g=+f[1],v,y,C;if(!(m!==m||g!==g)&&(g<m&&(C=m,m=g,g=C),!(g<p[0]||m>r[1-d])))return v=Math.max(0,ml(p,m)-1),y=m===g?v:ml(p,g)-1,m-p[v]>o+1e-10&&++v,d&&(C=v,v=h-y,y=h-C),v>y?void 0:t().slice(v,y+1)},e.invert=function(f){let d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return xV().domain(t()).range(r).round(a).paddingInner(s).paddingOuter(c).align(l)},u()}function qX(e){let t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return qX(t())},e}function Rge(){return qX(xV().paddingInner(1))}var Oge=Array.prototype.map;function Pge(e){return Oge.call(e,Gn)}var $ge=Array.prototype.slice;function GX(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(V2(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Pge(r),n):e.slice()},n.range=function(r){return arguments.length?(t=$ge.call(r),n):t.slice()},n.tickFormat=function(r,i){return Su(e[0],je(e),r??10,i)},n.copy=function(){return GX().domain(n.domain()).range(n.range())},n}var Fy=new Map,WX=Symbol("vega_scale");function CV(e){return e[WX]=!0,e}function YX(e){return e&&e[WX]===!0}function Bge(e,t,n){let r=function(){let o=t();return o.invertRange||(o.invertRange=o.invert?Ige(o):o.invertExtent?Fge(o):void 0),o.type=e,CV(o)};return r.metadata=mr(te(n)),r}function dt(e,t,n){return arguments.length>1?(Fy.set(e,Bge(e,t,n)),this):bV(e)?Fy.get(e):void 0}dt(Tge,r7);dt(Bl,n7,gr);dt(Ja,a7,[gr,Ja]);dt(zu,Eu,gr);dt(Hu,pV,gr);dt(v7,c7,gr);dt(G3,Ly,[gr,yV]);dt(W3,Ay,[gr,yV]);dt(T2,Du,[gr,Qo]);dt(`${T2}-${Bl}`,Du,[gr,Qo]);dt(`${T2}-${Ja}`,Ny,[gr,Qo,Ja]);dt(`${T2}-${zu}`,p7,[gr,Qo]);dt(`${T2}-${Hu}`,hV,[gr,Qo]);dt(`${T2}-${v7}`,_y,[gr,Qo]);dt(`${Ul}-${Bl}`,h7,[gr,Qo]);dt(`${Ul}-${Ja}`,Ty,[gr,Qo,Ja]);dt(`${Ul}-${zu}`,m7,[gr,Qo]);dt(`${Ul}-${Hu}`,mV,[gr,Qo]);dt(`${Ul}-${v7}`,Iy,[gr,Qo]);dt($l,u7,[b7,$l]);dt(y7,f7,b7);dt(x7,d7,b7);dt(Py,GX,[C7,b7]);dt(Ry,Nl,C7);dt(vV,xV,C7);dt(Oy,Rge,C7);function bV(e){return Fy.has(e)}function jl(e,t){let n=Fy.get(e);return n&&n.metadata[t]}function M7(e){return jl(e,gr)}function Y3(e){return jl(e,C7)}function $y(e){return jl(e,b7)}function MV(e){return jl(e,Ja)}function Uge(e){return jl(e,yV)}function wV(e){return jl(e,Qo)}function SV(e){return jl(e,$l)}var jge=["clamp","base","constant","exponent"];function By(e,t){let n=t[0],r=je(t)-n;return function(i){return e(n+i*r)}}function Lu(e,t,n){return Ol(w7(t||"rgb",n),e)}function Uy(e,t){let n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function jy(e,t,n){let r=n-t,i,o,a;return!r||!Number.isFinite(r)?gn(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=dt(o)().domain([t,n]).range([0,1]),jge.forEach(s=>e[s]?a[s](e[s]()):0),a)}function w7(e,t){let n=uV[qge(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function qge(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}var Gge={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Wge={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function XX(e){let t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function QX(e,t){for(let n in e)S7(n,t(e[n]))}var BX={};QX(Wge,XX);QX(Gge,e=>Lu(XX(e)));function S7(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(BX[e]=t,this):BX[e]}var E7="symbol",Yge="discrete",KX="gradient",Xge=e=>F(e)?e.map(t=>String(t)):String(e),Qge=(e,t)=>e[1]-t[1],Kge=(e,t)=>t[1]-e[1];function qy(e,t,n){let r;return Oe(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(nc(e.domain())/n||1)+1))),ne(t)&&(r=t.step,t=t.interval),Q(t)&&(t=e.type===G3?sc(t):e.type==W3?cc(t):B("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function EV(e,t,n){let r=e.range(),i=r[0],o=je(r),a=Qge;if(i>o&&(r=o,o=i,i=r,a=Kge),i=Math.floor(i),o=Math.ceil(o),t=t.map(s=>[s,e(s)]).filter(s=>i<=s[1]&&s[1]<=o).sort(a).map(s=>s[0]),n>0&&t.length>1){let s=[t[0],je(t)];for(;t.length>n&&t.length>=3;)t=t.filter((c,l)=>!(l%2));t.length<3&&(t=s)}return t}function Gy(e,t){return e.bins?EV(e,e.bins):e.ticks?e.ticks(t):e.domain()}function DV(e,t,n,r,i,o){let a=t.type,s=Xge;if(a===G3||i===G3)s=e.timeFormat(r);else if(a===W3||i===W3)s=e.utcFormat(r);else if(MV(a)){let c=e.formatFloat(r);if(o||t.bins)s=c;else{let l=ZX(t,n,!1);s=u=>l(u)?c(u):""}}else if(t.tickFormat){let c=t.domain();s=e.formatSpan(c[0],c[c.length-1],n,r)}else r&&(s=e.format(r));return s}function ZX(e,t,n){let r=Gy(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=c=>{let l=c/Math.pow(i,Math.round(Math.log(c)/o));return l*i<i-.5&&(l*=i),l<=a};return n?r.filter(s):s}var gV={[$l]:"quantiles",[y7]:"thresholds",[x7]:"domain"},JX={[$l]:"quantiles",[y7]:"domain"};function zV(e,t){return e.bins?eve(e.bins):e.type===Ja?ZX(e,t,!0):gV[e.type]?Jge(e[gV[e.type]]()):Gy(e,t)}function Zge(e,t,n){let r=t[JX[t.type]](),i=r.length,o=i>1?r[1]-r[0]:r[0],a;for(a=1;a<i;++a)o=Math.min(o,r[a]-r[a-1]);return e.formatSpan(0,o,3*10,n)}function Jge(e){let t=[-1/0].concat(e);return t.max=1/0,t}function eve(e){let t=e.slice(0,-1);return t.max=je(e),t}var tve=e=>gV[e.type]||e.bins;function HV(e,t,n,r,i,o,a){let s=JX[t.type]&&o!==G3&&o!==W3?Zge(e,t,i):DV(e,t,n,i,o,a);return r===E7&&tve(t)?nve(s):r===Yge?rve(s):ive(s)}var nve=e=>(t,n,r)=>{let i=UX(r[n+1],UX(r.max,1/0)),o=jX(t,e),a=jX(i,e);return o&&a?o+" \u2013 "+a:a?"< "+a:"\u2265 "+o},UX=(e,t)=>e??t,rve=e=>(t,n)=>n?e(t):null,ive=e=>t=>e(t),jX=(e,t)=>Number.isFinite(e)?t(e):null;function eQ(e){let t=e.domain(),n=t.length-1,r=+t[0],i=+je(t),o=i-r;if(e.type===x7){let a=n?o/n:.1;r-=a,i+=a,o=i-r}return a=>(a-r)/o}function ove(e,t,n,r){let i=r||t.type;return Q(n)&&Uge(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===G3?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===W3?e.utcFormat("%A, %d %B %Y, %X UTC"):HV(e,t,5,null,n,r,!0)}function LV(e,t,n){n=n||{};let r=Math.max(3,n.maxlen||7),i=ove(e,t,n.format,n.formatType);if($y(t.type)){let o=zV(t).slice(1).map(i),a=o.length;return`${a} boundar${a===1?"y":"ies"}: ${o.join(", ")}`}else if(Y3(t.type)){let o=t.domain(),a=o.length,s=a>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${a} value${a===1?"":"s"}: ${s}`}else{let o=t.domain();return`values from ${i(o[0])} to ${i(je(o))}`}}var DQ=0;function ave(){DQ=0}var tx="p_";function YV(e){return e&&e.gradient}function zQ(e,t,n){let r=e.gradient,i=e.id,o=r==="radial"?tx:"";return i||(i=e.id="gradient_"+DQ++,r==="radial"?(e.x1=es(e.x1,.5),e.y1=es(e.y1,.5),e.r1=es(e.r1,0),e.x2=es(e.x2,.5),e.y2=es(e.y2,.5),e.r2=es(e.r2,.5),o=tx):(e.x1=es(e.x1,0),e.y1=es(e.y1,0),e.x2=es(e.x2,1),e.y2=es(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function es(e,t){return e??t}function XV(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}var tQ={basis:{curve:_A},"basis-closed":{curve:kA},"basis-open":{curve:TA},bundle:{curve:IA,tension:"beta",value:.85},cardinal:{curve:FA,tension:"tension",value:0},"cardinal-open":{curve:OA,tension:"tension",value:0},"cardinal-closed":{curve:RA,tension:"tension",value:0},"catmull-rom":{curve:PA,tension:"alpha",value:.5},"catmull-rom-closed":{curve:$A,tension:"alpha",value:.5},"catmull-rom-open":{curve:BA,tension:"alpha",value:.5},linear:{curve:Vl},"linear-closed":{curve:UA},monotone:{horizontal:GA,vertical:qA},natural:{curve:WA},step:{curve:YA},"step-after":{curve:QA},"step-before":{curve:XA}};function QV(e,t,n){var r=de(tQ,e)&&tQ[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}var sve={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},cve=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,lve=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,uve=/^((\s+,?\s*)|(,\s*))/,fve=/^[01]/;function Ql(e){let t=[];return(e.match(cve)||[]).forEach(r=>{let i=r[0],o=i.toLowerCase(),a=sve[o],s=dve(o,a,r.slice(1).trim()),c=s.length;if(c<a||c&&c%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...s.slice(0,a)]),c!==a){o==="m"&&(i=i==="M"?"L":"l");for(let l=a;l<c;l+=a)t.push([i,...s.slice(l,l+a)])}}),t}function dve(e,t,n){let r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){let a=e==="a"&&(o===3||o===4)?fve:lve,s=n.slice(i).match(a);if(s===null)throw Error("Invalid SVG path, incorrect parameter type");i+=s[0].length,r.push(+s[0]);let c=n.slice(i).match(uve);c!==null&&(i+=c[0].length)}return r}var e4=Math.PI/180,pve=1e-14,ql=Math.PI/2,ts=Math.PI*2,Au=Math.sqrt(3)/2,AV={},VV={},HQ=[].join;function hve(e,t,n,r,i,o,a,s,c){let l=HQ.call(arguments);if(AV[l])return AV[l];let u=a*e4,f=Math.sin(u),d=Math.cos(u);n=Math.abs(n),r=Math.abs(r);let p=d*(s-e)*.5+f*(c-t)*.5,h=d*(c-t)*.5-f*(s-e)*.5,m=p*p/(n*n)+h*h/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);let g=d/n,v=f/n,y=-f/r,C=d/r,b=g*s+v*c,M=y*s+C*c,S=g*e+v*t,w=y*e+C*t,D=1/((S-b)*(S-b)+(w-M)*(w-M))-.25;D<0&&(D=0);let L=Math.sqrt(D);o==i&&(L=-L);let A=.5*(b+S)-L*(w-M),j=.5*(M+w)+L*(S-b),V=Math.atan2(M-j,b-A),N=Math.atan2(w-j,S-A)-V;N<0&&o===1?N+=ts:N>0&&o===0&&(N-=ts);let I=Math.ceil(Math.abs(N/(ql+.001))),W=[];for(let X=0;X<I;++X){let J=V+X*N/I,Se=V+(X+1)*N/I;W[X]=[A,j,J,Se,n,r,f,d]}return AV[l]=W}function mve(e){let t=HQ.call(e);if(VV[t])return VV[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7];let u=l*a,f=-c*s,d=c*a,p=l*s,h=Math.cos(i),m=Math.sin(i),g=Math.cos(o),v=Math.sin(o),y=.5*(o-i),C=Math.sin(y*.5),b=8/3*C*C/Math.sin(y),M=n+h-b*m,S=r+m+b*h,w=n+g,E=r+v,D=w+b*v,L=E-b*g;return VV[t]=[u*M+f*S,d*M+p*S,u*D+f*L,d*D+p*L,u*w+f*E,d*w+p*E]}var Ko=["l",0,0,0,0,0,0,0];function gve(e,t,n){let r=Ko[0]=e[0];if(r==="a"||r==="A")Ko[1]=t*e[1],Ko[2]=n*e[2],Ko[3]=e[3],Ko[4]=e[4],Ko[5]=e[5],Ko[6]=t*e[6],Ko[7]=n*e[7];else if(r==="h"||r==="H")Ko[1]=t*e[1];else if(r==="v"||r==="V")Ko[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)Ko[i]=(i%2==1?t:n)*e[i];return Ko}function Nu(e,t,n,r,i,o){var a,s=null,c=0,l=0,u=0,f=0,d,p,h,m,g=0,v=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var y=0,C=t.length;y<C;++y){switch(a=t[y],(i!==1||o!==1)&&(a=gve(a,i,o)),a[0]){case"l":c+=a[1],l+=a[2],e.lineTo(c+n,l+r);break;case"L":c=a[1],l=a[2],e.lineTo(c+n,l+r);break;case"h":c+=a[1],e.lineTo(c+n,l+r);break;case"H":c=a[1],e.lineTo(c+n,l+r);break;case"v":l+=a[1],e.lineTo(c+n,l+r);break;case"V":l=a[1],e.lineTo(c+n,l+r);break;case"m":c+=a[1],l+=a[2],g=c,v=l,e.moveTo(c+n,l+r);break;case"M":c=a[1],l=a[2],g=c,v=l,e.moveTo(c+n,l+r);break;case"c":d=c+a[5],p=l+a[6],u=c+a[3],f=l+a[4],e.bezierCurveTo(c+a[1]+n,l+a[2]+r,u+n,f+r,d+n,p+r),c=d,l=p;break;case"C":c=a[5],l=a[6],u=a[3],f=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,u+n,f+r,c+n,l+r);break;case"s":d=c+a[3],p=l+a[4],u=2*c-u,f=2*l-f,e.bezierCurveTo(u+n,f+r,c+a[1]+n,l+a[2]+r,d+n,p+r),u=c+a[1],f=l+a[2],c=d,l=p;break;case"S":d=a[3],p=a[4],u=2*c-u,f=2*l-f,e.bezierCurveTo(u+n,f+r,a[1]+n,a[2]+r,d+n,p+r),c=d,l=p,u=a[1],f=a[2];break;case"q":d=c+a[3],p=l+a[4],u=c+a[1],f=l+a[2],e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p;break;case"Q":d=a[3],p=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,d+n,p+r),c=d,l=p,u=a[1],f=a[2];break;case"t":d=c+a[1],p=l+a[2],s[0].match(/[QqTt]/)===null?(u=c,f=l):s[0]==="t"?(u=2*c-h,f=2*l-m):s[0]==="q"&&(u=2*c-u,f=2*l-f),h=u,m=f,e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p,u=c+a[1],f=l+a[2];break;case"T":d=a[1],p=a[2],u=2*c-u,f=2*l-f,e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p;break;case"a":nQ(e,c+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+c+n,a[7]+l+r]),c+=a[6],l+=a[7];break;case"A":nQ(e,c+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),c=a[6],l=a[7];break;case"z":case"Z":c=g,l=v,e.closePath();break}s=a}}function nQ(e,t,n,r){let i=hve(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){let a=mve(i[o]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}var rQ=.5773502691896257,iQ={circle:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,ts)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Au*n,i=r-n*rQ,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Au*n,i=r-n*rQ;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Au*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Au*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Au*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Au*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function LQ(e){return de(iQ,e)?iQ[e]:vve(e)}var NV={};function vve(e){if(!de(NV,e)){let t=Ql(e);NV[e]={draw:function(n,r){Nu(n,t,0,0,Math.sqrt(r)/2)}}}return NV[e]}var X3=.448084975506;function yve(e){return e.x}function xve(e){return e.y}function Cve(e){return e.width}function bve(e){return e.height}function vc(e){return typeof e=="function"?e:()=>+e}function Wy(e,t,n){return Math.max(t,Math.min(e,n))}function AQ(){var e=yve,t=xve,n=Cve,r=bve,i=vc(0),o=i,a=i,s=i,c=null;function l(u,f,d){var p,h=f??+e.call(this,u),m=d??+t.call(this,u),g=+n.call(this,u),v=+r.call(this,u),y=Math.min(g,v)/2,C=Wy(+i.call(this,u),0,y),b=Wy(+o.call(this,u),0,y),M=Wy(+a.call(this,u),0,y),S=Wy(+s.call(this,u),0,y);if(c||(c=p=Al()),C<=0&&b<=0&&M<=0&&S<=0)c.rect(h,m,g,v);else{var w=h+g,E=m+v;c.moveTo(h+C,m),c.lineTo(w-b,m),c.bezierCurveTo(w-X3*b,m,w,m+X3*b,w,m+b),c.lineTo(w,E-S),c.bezierCurveTo(w,E-X3*S,w-X3*S,E,w-S,E),c.lineTo(h+M,E),c.bezierCurveTo(h+X3*M,E,h,E-X3*M,h,E-M),c.lineTo(h,m+C),c.bezierCurveTo(h,m+X3*C,h+X3*C,m,h+C,m),c.closePath()}if(p)return c=null,p+""||null}return l.x=function(u){return arguments.length?(e=vc(u),l):e},l.y=function(u){return arguments.length?(t=vc(u),l):t},l.width=function(u){return arguments.length?(n=vc(u),l):n},l.height=function(u){return arguments.length?(r=vc(u),l):r},l.cornerRadius=function(u,f,d,p){return arguments.length?(i=vc(u),o=f!=null?vc(f):i,s=d!=null?vc(d):i,a=p!=null?vc(p):o,l):i},l.context=function(u){return arguments.length?(c=u??null,l):c},l}function VQ(){var e,t,n,r,i=null,o,a,s,c;function l(f,d,p){let h=p/2;if(o){var m=s-d,g=f-a;if(m||g){var v=Math.hypot(m,g),y=(m/=v)*c,C=(g/=v)*c,b=Math.atan2(g,m);i.moveTo(a-y,s-C),i.lineTo(f-m*h,d-g*h),i.arc(f,d,h,b-Math.PI,b),i.lineTo(a+y,s+C),i.arc(a,s,c,b,b+Math.PI)}else i.arc(f,d,h,0,ts);i.closePath()}else o=1;a=f,s=d,c=h}function u(f){var d,p=f.length,h,m=!1,g;for(i==null&&(i=g=Al()),d=0;d<=p;++d)!(d<p&&r(h=f[d],d,f))===m&&(m=!m)&&(o=0),m&&l(+e(h,d,f),+t(h,d,f),+n(h,d,f));if(g)return i=null,g+""||null}return u.x=function(f){return arguments.length?(e=f,u):e},u.y=function(f){return arguments.length?(t=f,u):t},u.size=function(f){return arguments.length?(n=f,u):n},u.defined=function(f){return arguments.length?(r=f,u):r},u.context=function(f){return arguments.length?(f==null?i=null:i=f,u):i},u}function I7(e,t){return e??t}var F7=e=>e.x||0,R7=e=>e.y||0,Mve=e=>e.width||0,wve=e=>e.height||0,Sve=e=>(e.x||0)+(e.width||0),Eve=e=>(e.y||0)+(e.height||0),Dve=e=>e.startAngle||0,zve=e=>e.endAngle||0,Hve=e=>e.padAngle||0,Lve=e=>e.innerRadius||0,Ave=e=>e.outerRadius||0,Vve=e=>e.cornerRadius||0,Nve=e=>I7(e.cornerRadiusTopLeft,e.cornerRadius)||0,_ve=e=>I7(e.cornerRadiusTopRight,e.cornerRadius)||0,kve=e=>I7(e.cornerRadiusBottomRight,e.cornerRadius)||0,Tve=e=>I7(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Ive=e=>I7(e.size,64),Fve=e=>e.size||1,px=e=>e.defined!==!1,Rve=e=>LQ(e.shape||"circle"),Ove=NA().startAngle(Dve).endAngle(zve).padAngle(Hve).innerRadius(Lve).outerRadius(Ave).cornerRadius(Vve),Pve=ay().x(F7).y1(R7).y0(Eve).defined(px),$ve=ay().y(R7).x1(F7).x0(Sve).defined(px),Bve=Yd().x(F7).y(R7).defined(px),Uve=AQ().x(F7).y(R7).width(Mve).height(wve).cornerRadius(Nve,_ve,kve,Tve),jve=sy().type(Rve).size(Ive),qve=VQ().x(F7).y(R7).defined(px).size(Fve);function KV(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Gve(e,t){return Ove.context(e)(t)}function Wve(e,t){let n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?$ve:Pve).curve(QV(r,n.orient,n.tension)).context(e)(t)}function Yve(e,t){let n=t[0],r=n.interpolate||"linear";return Bve.curve(QV(r,n.orient,n.tension)).context(e)(t)}function Tu(e,t,n,r){return Uve.context(e)(t,n,r)}function Xve(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Qve(e,t){return jve.context(e)(t)}function Kve(e,t){return qve.context(e)(t)}var NQ=1;function _Q(){NQ=1}function ZV(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+NQ++),a=i.clipping[o]||(i.clipping[o]={id:o});return Ie(r)?a.path=r(null):KV(n)?a.path=Tu(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function kn(e){this.clear(),e&&this.union(e)}kn.prototype={clone(){return new kn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){let r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),c=Math.sin(e),l=t-t*s+n*c,u=n-t*c-n*s;return[s*r-c*i+l,c*r+s*i+u,s*r-c*a+l,c*r+s*a+u,s*o-c*i+l,c*o+s*i+u,s*o-c*a+l,c*o+s*a+u]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function O7(e){this.mark=e,this.bounds=this.bounds||new kn}function P7(e){O7.call(this,e),this.items=this.items||[]}ee(P7,O7);function JV(e){this._pending=0,this._loader=e||uu()}function oQ(e){e._pending+=1}function D7(e){e._pending-=1}JV.prototype={pending(){return this._pending},sanitizeURL(e){let t=this;return oQ(t),t._loader.sanitize(e,{context:"href"}).then(n=>(D7(t),n)).catch(()=>(D7(t),null))},loadImage(e){let t=this,n=BY();return oQ(t),t._loader.sanitize(e,{context:"image"}).then(r=>{let i=r.href;if(!i||!n)throw{url:i};let o=new n,a=de(r,"crossOrigin")?r.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>D7(t),o.onerror=()=>D7(t),o.src=i,o}).catch(r=>(D7(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){let e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function ns(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){let r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?Zve(t,r):0))}return e}function Zve(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}var Jve=ts-1e-8,hx,Yy,Xy,Yl,FV,Qy,RV,OV,Q3=(e,t)=>hx.add(e,t),Ky=(e,t)=>Q3(Yy=e,Xy=t),aQ=e=>Q3(e,hx.y1),sQ=e=>Q3(hx.x1,e),Gl=(e,t)=>FV*e+RV*t,Wl=(e,t)=>Qy*e+OV*t,_V=(e,t)=>Q3(Gl(e,t),Wl(e,t)),kV=(e,t)=>Ky(Gl(e,t),Wl(e,t));function $7(e,t){return hx=e,t?(Yl=t*e4,FV=OV=Math.cos(Yl),Qy=Math.sin(Yl),RV=-Qy):(FV=OV=1,Yl=Qy=RV=0),eye}var eye={beginPath(){},closePath(){},moveTo:kV,lineTo:kV,rect(e,t,n,r){Yl?(_V(e+n,t),_V(e+n,t+r),_V(e,t+r),kV(e,t)):(Q3(e+n,t+r),Ky(e,t))},quadraticCurveTo(e,t,n,r){let i=Gl(e,t),o=Wl(e,t),a=Gl(n,r),s=Wl(n,r);cQ(Yy,i,a,aQ),cQ(Xy,o,s,sQ),Ky(a,s)},bezierCurveTo(e,t,n,r,i,o){let a=Gl(e,t),s=Wl(e,t),c=Gl(n,r),l=Wl(n,r),u=Gl(i,o),f=Wl(i,o);lQ(Yy,a,c,u,aQ),lQ(Xy,s,l,f,sQ),Ky(u,f)},arc(e,t,n,r,i,o){if(r+=Yl,i+=Yl,Yy=n*Math.cos(i)+e,Xy=n*Math.sin(i)+t,Math.abs(i-r)>Jve)Q3(e-n,t-n),Q3(e+n,t+n);else{let a=l=>Q3(n*Math.cos(l)+e,n*Math.sin(l)+t),s,c;if(a(r),a(i),i!==r)if(r=r%ts,r<0&&(r+=ts),i=i%ts,i<0&&(i+=ts),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=ts,s=r-r%ql,c=0;c<4&&s>i;++c,s-=ql)a(s);else for(s=r-r%ql+ql,c=0;c<4&&s<i;++c,s=s+ql)a(s)}}};function cQ(e,t,n,r){let i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function lQ(e,t,n,r,i){let o=r-e+3*t-3*n,a=e+n-2*t,s=e-t,c=0,l=0,u;Math.abs(o)>pve?(u=a*a+s*o,u>=0&&(u=Math.sqrt(u),c=(-a+u)/o,l=(-a-u)/o)):c=.5*s/a,0<c&&c<1&&i(uQ(c,e,t,n,r)),0<l&&l<1&&i(uQ(l,e,t,n,r))}function uQ(e,t,n,r,i){let o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var J3=(J3=Yo(1,1))?J3.getContext("2d"):null,PV=new kn;function eN(e){return function(t,n){if(!J3)return!0;e(J3,t),PV.clear().union(t.bounds).intersect(n).round();let{x1:r,y1:i,x2:o,y2:a}=PV;for(let s=i;s<=a;++s)for(let c=r;c<=o;++c)if(J3.isPointInPath(c,s))return!0;return!1}}function tN(e,t){return t.contains(e.x||0,e.y||0)}function kQ(e,t){let n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(PV.set(n,r,n+i,r+o))}function TQ(e,t){let n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return Vu(t,n,r,i,o)}function Vu(e,t,n,r,i){let{x1:o,y1:a,x2:s,y2:c}=e,l=r-t,u=i-n,f=0,d=1,p,h,m,g;for(g=0;g<4;++g){if(g===0&&(p=-l,h=-(o-t)),g===1&&(p=l,h=s-t),g===2&&(p=-u,h=-(a-n)),g===3&&(p=u,h=c-n),Math.abs(p)<1e-10&&h<0)return!1;if(m=h/p,p<0){if(m>d)return!1;m>f&&(f=m)}else if(p>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function _u(e,t){e.globalCompositeOperation=t.blend||"source-over"}function I2(e,t){return e??t}function fQ(e,t){let n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function tye(e,t,n){let r=n.width(),i=n.height(),o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+I2(t.x1,.5)*r,n.y1+I2(t.y1,.5)*i,Math.max(r,i)*I2(t.r1,0),n.x1+I2(t.x2,.5)*r,n.y1+I2(t.y2,.5)*i,Math.max(r,i)*I2(t.r2,.5));else{let a=I2(t.x1,0),s=I2(t.y1,0),c=I2(t.x2,1),l=I2(t.y2,0);if(a===c||s===l||r===i)o=e.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+c*r,n.y1+l*i);else{let u=Yo(Math.ceil(r),Math.ceil(i)),f=u.getContext("2d");return f.scale(r,i),f.fillStyle=fQ(f.createLinearGradient(a,s,c,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(u,"no-repeat")}}return fQ(o,t.stops)}function IQ(e,t,n){return YV(n)?tye(e,n,t.bounds):n}function nx(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=IQ(e,t,t.fill),!0):!1}var nye=[];function ku(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=IQ(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||nye),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function rye(e,t){return e.zindex-t.zindex||e.index-t.index}function nN(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(rye)}function R2(e,t){var n=e.items,r,i;if(!n||!n.length)return;let o=nN(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function rx(e,t){var n=e.items,r,i;if(!n||!n.length)return null;let o=nN(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function rN(e){return function(t,n,r){R2(n,i=>{(!r||r.intersects(i.bounds))&&FQ(e,t,i,i)})}}function iye(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&FQ(e,t,n.items[0],n.items)}}function FQ(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(_u(t,n),n.fill&&nx(t,n,i)&&t.fill(),n.stroke&&ku(t,n,i)&&t.stroke()))}function mx(e){return e=e||hr,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,rx(n,s=>{let c=s.bounds;if(!(c&&!c.contains(o,a)||!c)&&e(t,s,r,i,o,a))return s})}}function B7(e,t){return function(n,r,i,o){var a=Array.isArray(r)?r[0]:r,s=t??a.fill,c=a.stroke&&n.isPointInStroke,l,u;return c&&(l=a.strokeWidth,u=a.strokeCap,n.lineWidth=l??1,n.lineCap=u??"butt"),e(n,r)?!1:s&&n.isPointInPath(i,o)||c&&n.isPointInStroke(i,o)}}function iN(e){return mx(B7(e))}function Xl(e,t){return"translate("+e+","+t+")"}function oN(e){return"rotate("+e+")"}function oye(e,t){return"scale("+e+","+t+")"}function RQ(e){return Xl(e.x||0,e.y||0)}function aye(e){return Xl(e.x||0,e.y||0)+(e.angle?" "+oN(e.angle):"")}function sye(e){return Xl(e.x||0,e.y||0)+(e.angle?" "+oN(e.angle):"")+(e.scaleX||e.scaleY?" "+oye(e.scaleX||1,e.scaleY||1):"")}function aN(e,t,n){function r(a,s){a("transform",aye(s)),a("d",t(null,s))}function i(a,s){return t($7(a,s.angle),s),ns(a,s).translate(s.x||0,s.y||0)}function o(a,s){var c=s.x||0,l=s.y||0,u=s.angle||0;a.translate(c,l),u&&a.rotate(u*=e4),a.beginPath(),t(a,s),u&&a.rotate(-u),a.translate(-c,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:rN(o),pick:iN(o),isect:n||eN(o)}}var cye=aN("arc",Gve);function lye(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,a,s;--i>=0;)e[i].defined!==!1&&(s=Math.abs(e[i][r]-n),s<o&&(o=s,a=e[i]));return a}function uye(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,a;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],a=i*i+o*o,a<n))return e[r];return null}function fye(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function sN(e,t,n){function r(c,l){var u=l.mark.items;u.length&&c("d",t(null,u))}function i(c,l){var u=l.items;return u.length===0?c:(t($7(c),u),ns(c,u[0]))}function o(c,l){c.beginPath(),t(c,l)}let a=B7(o);function s(c,l,u,f,d,p){var h=l.items,m=l.bounds;return!h||!h.length||m&&!m.contains(d,p)?null:(u*=c.pixelRatio,f*=c.pixelRatio,a(c,h,u,f)?h[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:iye(o),pick:s,isect:tN,tip:n}}var dye=sN("area",Wve,lye);function pye(e,t){var n=t.clip;e.save(),Ie(n)?(e.beginPath(),n(e),e.clip()):OQ(e,t.group)}function OQ(e,t){e.beginPath(),KV(t)?Tu(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function PQ(e){let t=I2(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function hye(e,t){e("transform",RQ(t))}function $Q(e,t){let n=PQ(t);e("d",Tu(null,t,n,n))}function mye(e,t){e("class","background"),e("aria-hidden",!0),$Q(e,t)}function gye(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?$Q(e,t):e("d","")}function vye(e,t,n){let r=t.clip?ZV(n,t,t):null;e("clip-path",r)}function yye(e,t){if(!t.clip&&t.items){let n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ns(e,t),e.translate(t.x||0,t.y||0)}function N7(e,t,n,r){let i=PQ(t);e.beginPath(),Tu(e,t,(n||0)+i,(r||0)+i)}var xye=B7(N7),Cye=B7(N7,!1),bye=B7(N7,!0);function Mye(e,t,n,r){R2(t,i=>{let o=i.x||0,a=i.y||0,s=i.strokeForeground,c=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&c&&(N7(e,i,o,a),_u(e,i),i.fill&&nx(e,i,c)&&e.fill(),i.stroke&&!s&&ku(e,i,c)&&e.stroke()),e.save(),e.translate(o,a),i.clip&&OQ(e,i),n&&n.translate(-o,-a),R2(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(o,a),e.restore(),s&&i.stroke&&c&&(N7(e,i,o,a),_u(e,i),ku(e,i,c)&&e.stroke())})}function wye(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;let a=n*e.pixelRatio,s=r*e.pixelRatio;return rx(t,c=>{let l,u,f,d=c.bounds;if(d&&!d.contains(i,o))return;u=c.x||0,f=c.y||0;let p=u+(c.width||0),h=f+(c.height||0),m=c.clip;if(m&&(i<u||i>p||o<f||o>h))return;if(e.save(),e.translate(u,f),u=i-u,f=o-f,m&&KV(c)&&!bye(e,c,a,s))return e.restore(),null;let g=c.strokeForeground,v=t.interactive!==!1;return v&&g&&c.stroke&&Cye(e,c,a,s)?(e.restore(),c):(l=rx(c,y=>Sye(y,u,f)?this.pick(y,n,r,u,f):null),!l&&v&&(c.fill||!g&&c.stroke)&&xye(e,c,a,s)&&(l=c),e.restore(),l||null)})}function Sye(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Eye={type:"group",tag:"g",nested:!1,attr:hye,bound:yye,draw:Mye,pick:wye,isect:kQ,content:vye,background:mye,foreground:gye},_7={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function cN(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function lN(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function uN(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function gx(e,t){return e==="center"?t/2:e==="right"?t:0}function vx(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Dye(e,t,n){let r=cN(t,n),i=lN(t,r),o=uN(t,r),a=(t.x||0)-gx(t.align,i),s=(t.y||0)-vx(t.baseline,o),c=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",c,_7["xmlns:xlink"],"xlink:href"),e("transform",Xl(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function zye(e,t){let n=t.image,r=lN(t,n),i=uN(t,n),o=(t.x||0)-gx(t.align,r),a=(t.y||0)-vx(t.baseline,i);return e.set(o,a,o+r,a+i)}function Hye(e,t,n){R2(t,r=>{if(n&&!n.intersects(r.bounds))return;let i=cN(r,this),o=lN(r,i),a=uN(r,i);if(o===0||a===0)return;let s=(r.x||0)-gx(r.align,o),c=(r.y||0)-vx(r.baseline,a),l,u,f,d;r.aspect!==!1&&(u=i.width/i.height,f=r.width/r.height,u===u&&f===f&&u!==f&&(f<u?(d=o/u,c+=(a-d)/2,a=d):(d=a*u,s+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(_u(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,s,c,o,a))})}var Lye={type:"image",tag:"image",nested:!1,attr:Dye,bound:zye,draw:Hye,pick:mx(),isect:hr,get:cN,xOffset:gx,yOffset:vx},Aye=sN("line",Yve,uye);function Vye(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",sye(t)),e("d",t.path)}function Zy(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*e4,c=t.pathCache;(!c||c.path!==n)&&((t.pathCache=c=Ql(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),Nu(e,c,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):Nu(e,c,r,i,o,a)}function Nye(e,t){return Zy($7(e,t.angle),t)?e.set(0,0,0,0):ns(e,t,!0)}var _ye={type:"path",tag:"path",nested:!1,attr:Vye,bound:Nye,draw:rN(Zy),pick:iN(Zy),isect:eN(Zy)};function kye(e,t){e("d",Tu(null,t))}function Tye(e,t){var n,r;return ns(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function dQ(e,t){e.beginPath(),Tu(e,t)}var Iye={type:"rect",tag:"path",nested:!1,attr:kye,bound:Tye,draw:rN(dQ),pick:iN(dQ),isect:kQ};function Fye(e,t){e("transform",RQ(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Rye(e,t){var n,r;return ns(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function BQ(e,t,n){var r,i,o,a;return t.stroke&&ku(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0):!1}function Oye(e,t,n){R2(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&BQ(e,r,i)&&(_u(e,r),e.stroke())}})}function Pye(e,t,n,r){return e.isPointInStroke?BQ(e,t,1)&&e.isPointInStroke(n,r):!1}var $ye={type:"rule",tag:"line",nested:!1,attr:Fye,bound:Rye,draw:Oye,pick:mx(Pye),isect:TQ},Bye=aN("shape",Xve),Uye=aN("symbol",Qve,tN),pQ=_H(),T1={height:rs,measureWidth:fN,estimateWidth:ix,width:ix,canvas:UQ};UQ(!0);function UQ(e){T1.width=e&&J3?fN:ix}function ix(e,t){return jQ(n4(e,t),rs(e))}function jQ(e,t){return~~(.8*e.length*t)}function fN(e,t){return rs(e)<=0||!(t=n4(e,t))?0:qQ(t,xx(e))}function qQ(e,t){let n=`(${t}) ${e}`,r=pQ.get(n);return r===void 0&&(J3.font=t,r=J3.measureText(e).width,pQ.set(n,r)),r}function rs(e){return e.fontSize!=null?+e.fontSize||0:11}function t4(e){return e.lineHeight!=null?e.lineHeight:rs(e)+2}function jye(e){return F(e)?e.length>1?e:e[0]:e}function U7(e){return jye(e.lineBreak&&e.text&&!F(e.text)?e.text.split(e.lineBreak):e.text)}function yx(e){let t=U7(e);return(F(t)?t.length-1:0)*t4(e)}function n4(e,t){let n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Gye(e,n):n}function qye(e){if(T1.width===fN){let t=xx(e);return n=>qQ(n,t)}else if(T1.width===ix){let t=rs(e);return n=>jQ(n,t)}else return t=>T1.width(e,t)}function Gye(e,t){var n=+e.limit,r=qye(e);if(r(t)<n)return t;var i=e.ellipsis||"\u2026",o=e.dir==="rtl",a=0,s=t.length,c;if(n-=r(i),o){for(;a<s;)c=a+s>>>1,r(t.slice(c))>n?a=c+1:s=c;return i+t.slice(a)}else{for(;a<s;)c=1+(a+s>>>1),r(t.slice(0,c))<n?a=c:s=c-1;return t.slice(0,a)+i}}function j7(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function xx(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+rs(e)+"px "+j7(e,t)}function dN(e){var t=e.baseline,n=rs(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*t4(e):t==="line-bottom"?.29*n-.5*t4(e):0)}var Wye={left:"start",center:"middle",right:"end"},L7=new kn;function Cx(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-ql,t+=r*Math.cos(i),n+=r*Math.sin(i)),L7.x1=t,L7.y1=n,L7}function Yye(e,t){var n=t.dx||0,r=(t.dy||0)+dN(t),i=Cx(t),o=i.x1,a=i.y1,s=t.angle||0,c;e("text-anchor",Wye[t.align]||"start"),s?(c=Xl(o,a)+" "+oN(s),(n||r)&&(c+=" "+Xl(n,r))):c=Xl(o+n,a+r),e("transform",c)}function pN(e,t,n){var r=T1.height(t),i=t.align,o=Cx(t),a=o.x1,s=o.y1,c=t.dx||0,l=(t.dy||0)+dN(t)-Math.round(.8*r),u=U7(t),f;if(F(u)?(r+=t4(t)*(u.length-1),f=u.reduce((d,p)=>Math.max(d,T1.width(t,p)),0)):f=T1.width(t,u),i==="center"?c-=f/2:i==="right"&&(c-=f),e.set(c+=a,l+=s,c+f,l+r),t.angle&&!n)e.rotate(t.angle*e4,a,s);else if(n===2)return e.rotatedPoints(t.angle*e4,a,s);return e}function Xye(e,t,n){R2(t,r=>{var i=r.opacity==null?1:r.opacity,o,a,s,c,l,u,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=xx(r),e.textAlign=r.align||"left",o=Cx(r),a=o.x1,s=o.y1,r.angle&&(e.save(),e.translate(a,s),e.rotate(r.angle*e4),a=s=0),a+=r.dx||0,s+=(r.dy||0)+dN(r),u=U7(r),_u(e,r),F(u))for(l=t4(r),c=0;c<u.length;++c)f=n4(r,u[c]),r.fill&&nx(e,r,i)&&e.fillText(f,a,s),r.stroke&&ku(e,r,i)&&e.strokeText(f,a,s),s+=l;else f=n4(r,u),r.fill&&nx(e,r,i)&&e.fillText(f,a,s),r.stroke&&ku(e,r,i)&&e.strokeText(f,a,s);r.angle&&e.restore()}})}function Qye(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=Cx(t),s=a.x1,c=a.y1,l=pN(L7,t,1),u=-t.angle*e4,f=Math.cos(u),d=Math.sin(u),p=f*i-d*o+(s-f*s+d*c),h=d*i+f*o+(c-d*s-f*c);return l.contains(p,h)}function Kye(e,t){let n=pN(L7,e,2);return Vu(t,n[0],n[1],n[2],n[3])||Vu(t,n[0],n[1],n[4],n[5])||Vu(t,n[4],n[5],n[6],n[7])||Vu(t,n[2],n[3],n[6],n[7])}var Zye={type:"text",tag:"text",nested:!1,attr:Yye,bound:pN,draw:Xye,pick:mx(Qye),isect:Kye},Jye=sN("trail",Kve,fye),a1={arc:cye,area:dye,group:Eye,image:Lye,line:Aye,path:_ye,rect:Iye,rule:$ye,shape:Bye,symbol:Uye,text:Zye,trail:Jye};function $V(e,t,n){var r=a1[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new kn),e,n)}var hQ={mark:null};function GQ(e,t,n){var r=a1[e.marktype],i=r.bound,o=e.items,a=o&&o.length,s,c,l,u;if(r.nested)return a?l=o[0]:(hQ.mark=e,l=hQ),u=$V(l,i,n),t=t&&t.union(u)||u,t;if(t=t||e.bounds&&e.bounds.clear()||new kn,a)for(s=0,c=o.length;s<c;++s)t.union($V(o[s],i,n));return e.bounds=t}var exe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function WQ(e,t){return JSON.stringify(e,exe,t)}function YQ(e){let t=typeof e=="string"?JSON.parse(e):e;return XQ(t)}function XQ(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&XQ(n[i]);return t&&GQ(e),e}function bx(e){arguments.length?this.root=YQ(e):(this.root=QQ({marktype:"group",name:"root",role:"frame"}),this.root.items=[new P7(this.root)])}bx.prototype={toJSON(e){return WQ(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];let r=QQ(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function QQ(e,t){let n={bounds:new kn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function K3(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function hN(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function yr(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=K3(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function Zo(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function KQ(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function q7(e,t){let n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function txe(e,t,n,r){var i=e&&e.mark,o,a;if(i&&(o=a1[i.marktype]).tip){for(a=q7(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=o.tip(i.items,a)}return e}function r4(e,t){this._active=null,this._handlers={},this._loader=e||uu(),this._tooltip=t||nxe}function nxe(e,t,n,r){e.element().setAttribute("title",r||"")}r4.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){let t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(let r in t)n.push(...t[r]);return n},eventName(e){let t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{let i=new MouseEvent(e.type,e),o=K3(null,"a");for(let a in r)o.setAttribute(a,r[a]);o.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=txe(t,e,this.canvas(),this._origin);let r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){let t=this.canvas();if(!t)return;let n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),a=i.height(),s=i.x1+r[0]+n.left,c=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,c+=e.y||0;return{x:s,y:c,width:o,height:a,left:s,top:c,right:s+o,bottom:c+a}}};function po(e){this._el=null,this._bgcolor=null,this._loader=new JV(e)}po.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e,t){let n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){let n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){let i=n._call;n._ready=n._loader.ready().then(o=>{o&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};var rxe="keydown",ixe="keypress",oxe="keyup",ZQ="dragenter",Jy="dragleave",JQ="dragover",BV="pointerdown",axe="pointerup",ox="pointermove",A7="pointerout",eK="pointerover",UV="mousedown",sxe="mouseup",tK="mousemove",jV="mouseout",nK="mouseover",ax="click",cxe="dblclick",lxe="wheel",rK="mousewheel",sx="touchstart",cx="touchmove",lx="touchend",uxe=[rxe,ixe,oxe,ZQ,Jy,JQ,BV,axe,ox,A7,eK,UV,sxe,tK,jV,nK,ax,cxe,lxe,rK,sx,cx,lx],qV=ox,k7=A7,GV=ax;function xc(e,t){r4.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}var fxe=e=>e===sx||e===cx||e===lx?[sx,cx,lx]:[e];function mQ(e,t){fxe(t).forEach(n=>dxe(e,n))}function dxe(e,t){let n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function H7(e,t,n){t.forEach(r=>e.fire(r,n))}function gQ(e,t,n){return function(r){let i=this._active,o=this.pickEvent(r);o===i?H7(this,e,r):((!i||!i.exit)&&H7(this,n,r),this._active=o,H7(this,t,r),H7(this,e,r))}}function vQ(e){return function(t){H7(this,e,t),this._active=null}}ee(xc,r4,{initialize(e,t,n){return this._canvas=e&&hN(e,"canvas"),[ax,UV,BV,ox,A7,Jy].forEach(r=>mQ(this,r)),r4.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:uxe,DOMMouseScroll(e){this.fire(rK,e)},pointermove:gQ([ox,tK],[eK,nK],[A7,jV]),dragover:gQ([JQ],[ZQ],[Jy]),pointerout:vQ([A7,jV]),dragleave:vQ([Jy]),pointerdown(e){this._down=this._active,this.fire(BV,e)},mousedown(e){this._down=this._active,this.fire(UV,e)},click(e){this._down===this._active&&(this.fire(ax,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(sx,e,!0)},touchmove(e){this.fire(cx,e,!0)},touchend(e){this.fire(lx,e,!0),this._touch=null},fire(e,t,n){let r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===GV&&r&&r.href?this.handleHref(t,r,r.href):(e===qV||e===k7)&&this.handleTooltip(t,r,e!==k7),i)for(let o=0,a=i.length;o<a;++o)i[o].handler.call(this._obj,t,r)},on(e,t){let n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(mQ(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){let n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){let t=q7(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){let o=this.context();return a1[e.marktype].pick.call(this,o,e,t,n,r,i)}});function pxe(){return typeof window<"u"&&window.devicePixelRatio||1}function hxe(e,t,n,r,i,o){let a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,s=e.getContext("2d"),c=a?pxe():i;e.width=t*c,e.height=n*c;for(let l in o)s[l]=o[l];return a&&c!==1&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=c,s.setTransform(c,0,0,c,c*r[0],c*r[1]),e}function T7(e){po.call(this,e),this._options={},this._redraw=!1,this._dirty=new kn,this._tempb=new kn}var yQ=po.prototype,mxe=(e,t,n)=>new kn().set(0,0,t,n).translate(-e[0],-e[1]);function gxe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}ee(T7,po,{initialize(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Yo(1,1,this._options.type),e&&this._canvas&&(Zo(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),yQ.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(yQ.resize.call(this,e,t,n,r),this._canvas)hxe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let i=this._options.externalContext;i||B("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){let t=this._tempb.clear().union(e.bounds),n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){let n=this.context(),r=this._origin,i=this._width,o=this._height,a=this._dirty,s=mxe(r,i,o);n.save();let c=this._redraw||a.empty()?(this._redraw=!1,s.expand(1)):gxe(n,s.intersect(a),r);return this.clear(-r[0],-r[1],i,o),this.draw(n,e,c,t),n.restore(),a.clear(),this},draw(e,t,n,r){if(t.marktype!=="group"&&r!=null&&!r.includes(t.marktype))return;let i=a1[t.marktype];t.clip&&pye(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()},clear(e,t,n,r){let i=this._options,o=this.context();i.type!=="pdf"&&!i.externalContext&&o.clearRect(e,t,n,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});function mN(e,t){r4.call(this,e,t);let n=this;n._hrefHandler=WV(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=WV(n,(r,i)=>{n.handleTooltip(r,i,r.type!==k7)})}var WV=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};ee(mN,r4,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(GV,this._hrefHandler),r.removeEventListener(qV,this._tooltipHandler),r.removeEventListener(k7,this._tooltipHandler)),this._svg=r=e&&hN(e,"svg"),r&&(r.addEventListener(GV,this._hrefHandler),r.addEventListener(qV,this._tooltipHandler),r.addEventListener(k7,this._tooltipHandler)),r4.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){let n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){let o={type:e,handler:t,listener:WV(this,t)};(r[n]||(r[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){let n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});var iK="aria-hidden",gN="aria-label",vN="role",yN="aria-roledescription",oK="graphics-object",xN="graphics-symbol",aK=(e,t,n)=>({[vN]:e,[yN]:t,[gN]:n||void 0}),vxe=mr(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),xQ={axis:{desc:"axis",caption:Cxe},legend:{desc:"legend",caption:bxe},"title-text":{desc:"title",caption:e=>`Title text '${bQ(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${bQ(e)}'`}},CQ={ariaRole:vN,ariaRoleDescription:yN,description:gN};function sK(e,t){let n=t.aria===!1;if(e(iK,n||void 0),n||t.description==null)for(let r in CQ)e(CQ[r],void 0);else{let r=t.mark.marktype;e(gN,t.description),e(vN,t.ariaRole||(r==="group"?oK:xN)),e(yN,t.ariaRoleDescription||`${r} mark`)}}function cK(e){return e.aria===!1?{[iK]:!0}:vxe[e.role]?null:xQ[e.role]?xxe(e,xQ[e.role]):yxe(e)}function yxe(e){let t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return aK(n?oK:xN,`${t} mark container`,e.description)}function xxe(e,t){try{let n=e.items[0],r=t.caption||(()=>"");return aK(t.role||xN,t.desc,n.description||r(n))}catch{return null}}function bQ(e){return te(e.text).join(" ")}function Cxe(e){let t=e.datum,n=e.orient,r=t.title?lK(e):null,i=e.context,o=i.scales[t.scale].value,a=i.dataflow.locale(),s=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Y3(s)?"discrete":s} scale with ${LV(a,o,e)}`}function bxe(e){let t=e.datum,n=t.title?lK(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),a=e.context,s=a.scales[i[o[0]]].value,c=a.dataflow.locale();return wxe(r)+(n?` titled '${n}'`:"")+` for ${Mxe(o)} with ${LV(c,s,e)}`}function lK(e){try{return te(je(e.items).items[0].text).join(" ")}catch{return null}}function Mxe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+je(e)}function wxe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}var uK=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Sxe=e=>uK(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function CN(){let e="",t="",n="",r=[],i=()=>t=n="",o=c=>{t&&(e+=`${t}>${n}`,i()),r.push(c)},a=(c,l)=>(l!=null&&(t+=` ${c}="${Sxe(l)}"`),s),s={open(c){o(c),t="<"+c;for(var l=arguments.length,u=new Array(l>1?l-1:0),f=1;f<l;f++)u[f-1]=arguments[f];for(let d of u)for(let p in d)a(p,d[p]);return s},close(){let c=r.pop();return t?e+=t+(n?`>${n}</${c}>`:"/>"):e+=`</${c}>`,i(),s},attr:a,text:c=>(n+=uK(c),s),toString:()=>e};return s}var fK=e=>dK(CN(),e)+"";function dK(e,t){if(e.open(t.tagName),t.hasAttributes()){let n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){let n=t.childNodes;for(let r of n)r.nodeType===3?e.text(r.nodeValue):dK(e,r)}return e.close()}var ux={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},fx={blend:"mix-blend-mode"},pK={fill:"none","stroke-miterlimit":10},z7=0,MQ="http://www.w3.org/2000/xmlns/",vr=_7.xmlns;function Mx(e){po.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var TV=po.prototype;ee(Mx,po,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=yr(e,0,"svg",vr),this._svg.setAttributeNS(MQ,"xmlns",vr),this._svg.setAttributeNS(MQ,"xmlns:xlink",_7["xmlns:xlink"]),this._svg.setAttribute("version",_7.version),this._svg.setAttribute("class","marks"),Zo(e,1),this._root=yr(this._svg,z7,"g",vr),Z3(this._root,pK),Zo(this._svg,z7+1)),this.background(this._bgcolor),TV.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),TV.background.apply(this,arguments)},resize(e,t,n,r){return TV.resize.call(this,e,t,n,r),this._svg&&(Z3(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){let e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=yr(e,z7,"rect",vr),Z3(n,{width:this._width,height:this._height,fill:t}));let r=fK(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Zo(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;let e=this._dirty;if(!e.length||!this._dirtyID)return!0;let t=++this._dirtyID,n,r,i,o,a,s,c;for(a=0,s=e.length;a<s;++a)if(n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=a1[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,wQ(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){o.nested&&r.items.length?(c=r.items[0],c._svg&&this._update(o,c._svg,c)):n._svg&&(c=n._svg.parentNode,c&&c.removeChild(n._svg)),n._svg=null;continue}n=o.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,wQ(n,t)):this._update(o,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,r){if(!this.isDirty(t))return t._svg;let i=this._svg,o=t.marktype,a=a1[o],s=t.interactive===!1?"none":null,c=a.tag==="g",l=SQ(t,e,n,"g",i);if(o!=="group"&&r!=null&&!r.includes(o))return Zo(l,0),t._svg;l.setAttribute("class",KQ(t));let u=cK(t);for(let h in u)o1(l,h,u[h]);c||o1(l,"pointer-events",s),o1(l,"clip-path",t.clip?ZV(this,t,t.group):null);let f=null,d=0,p=h=>{let m=this.isDirty(h),g=SQ(h,l,f,a.tag,i);m&&(this._update(a,g,h),c&&zxe(this,g,h,r)),f=g,++d};return a.nested?t.items.length&&p(t.items[0]):R2(t,p),Zo(l,d),l},_update(e,t,n){yc=t,Hi=t.__values__,sK(V7,n),e.attr(V7,n,this);let r=Lxe[e.type];r&&r.call(this,e,t,n),yc&&this.style(yc,n)},style(e,t){if(t!=null){for(let n in ux){let r=n==="font"?j7(t):t[n];if(r===Hi[n])continue;let i=ux[n];r==null?e.removeAttribute(i):(YV(r)&&(r=zQ(r,this._defs.gradient,hK())),e.setAttribute(i,r+"")),Hi[n]=r}for(let n in fx)ex(e,fx[n],t[n])}},defs(){let e=this._svg,t=this._defs,n=t.el,r=0;for(let i in t.gradient)n||(t.el=n=yr(e,z7+1,"defs",vr)),r=Exe(n,t.gradient[i],r);for(let i in t.clipping)n||(t.el=n=yr(e,z7+1,"defs",vr)),r=Dxe(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):Zo(n,r))},_clearDefs(){let e=this._defs;e.gradient={},e.clipping={}}});function wQ(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Exe(e,t,n){let r,i,o;if(t.gradient==="radial"){let a=yr(e,n++,"pattern",vr);Z3(a,{id:tx+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=yr(a,0,"rect",vr),Z3(a,{width:1,height:1,fill:`url(${hK()}#${t.id})`}),e=yr(e,n++,"radialGradient",vr),Z3(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=yr(e,n++,"linearGradient",vr),Z3(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=yr(e,r,"stop",vr),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return Zo(e,r),n}function Dxe(e,t,n){let r;return e=yr(e,n,"clipPath",vr),e.setAttribute("id",t.id),t.path?(r=yr(e,0,"path",vr),r.setAttribute("d",t.path)):(r=yr(e,0,"rect",vr),Z3(r,{x:0,y:0,width:t.width,height:t.height})),Zo(e,1),n+1}function zxe(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;R2(n,a=>{i=e.mark(t,a,i,r),++o}),Zo(t,1+o)}function SQ(e,t,n,r,i){let o=e._svg,a;if(!o&&(a=t.ownerDocument,o=K3(a,r,vr),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){let s=K3(a,"path",vr);o.appendChild(s),s.__data__=e;let c=K3(a,"g",vr);o.appendChild(c),c.__data__=e;let l=K3(a,"path",vr);o.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(o.ownerSVGElement!==i||Hxe(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function Hxe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}var yc=null,Hi=null,Lxe={group(e,t,n){let r=yc=t.childNodes[2];Hi=r.__values__,e.foreground(V7,n,this),Hi=t.__values__,yc=t.childNodes[1],e.content(V7,n,this);let i=yc=t.childNodes[0];e.background(V7,n,this);let o=n.mark.interactive===!1?"none":null;if(o!==Hi.events&&(o1(r,"pointer-events",o),o1(i,"pointer-events",o),Hi.events=o),n.strokeForeground&&n.stroke){let a=n.fill;o1(r,"display",null),this.style(i,n),o1(i,"stroke",null),a&&(n.fill=null),Hi=r.__values__,this.style(r,n),a&&(n.fill=a),yc=null}else o1(r,"display","none")},image(e,t,n){n.smooth===!1?(ex(t,"image-rendering","optimizeSpeed"),ex(t,"image-rendering","pixelated")):ex(t,"image-rendering",null)},text(e,t,n){let r=U7(n),i,o,a,s;F(r)?(o=r.map(c=>n4(n,c)),i=o.join(`
`),i!==Hi.text&&(Zo(t,0),a=t.ownerDocument,s=t4(n),o.forEach((c,l)=>{let u=K3(a,"tspan",vr);u.__data__=n,u.textContent=c,l&&(u.setAttribute("x",0),u.setAttribute("dy",s)),t.appendChild(u)}),Hi.text=i)):(o=n4(n,r),o!==Hi.text&&(t.textContent=o,Hi.text=o)),o1(t,"font-family",j7(n)),o1(t,"font-size",rs(n)+"px"),o1(t,"font-style",n.fontStyle),o1(t,"font-variant",n.fontVariant),o1(t,"font-weight",n.fontWeight)}};function V7(e,t,n){t!==Hi[e]&&(n?Axe(yc,e,t,n):o1(yc,e,t),Hi[e]=t)}function ex(e,t,n){n!==Hi[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Hi[t]=n)}function Z3(e,t){for(let n in t)o1(e,n,t[n])}function o1(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Axe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function hK(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function bN(e){po.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}ee(bN,po,{svg(){return this._text},_render(e){let t=CN();t.open("svg",Te({},_7,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",pK,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){let n=a1[t.marktype],r=n.tag,i=[sK,n.attr];e.open("g",{class:KQ(t),"clip-path":t.clip?ZV(this,t,t.group):null},cK(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});let o=a=>{let s=this.href(a);if(s&&e.open("a",s),e.open(r,this.attr(t,a,i,r!=="g"?r:null)),r==="text"){let c=U7(a);if(F(c)){let l={x:0,dy:t4(a)};for(let u=0;u<c.length;++u)e.open("tspan",u?l:null).text(n4(a,c[u])).close()}else e.text(n4(a,c))}else if(r==="g"){let c=a.strokeForeground,l=a.fill,u=a.stroke;c&&u&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),R2(a,f=>this.mark(e,f)),e.close(),c&&u?(l&&(a.fill=null),a.stroke=u,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),l&&(a.fill=l)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),s&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):R2(t,o),e.close()},href(e){let t=e.href,n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){let i={},o=(a,s,c,l)=>{i[l||a]=s};return Array.isArray(n)?n.forEach(a=>a(o,t,this)):n(o,t,this),r&&Vxe(i,t,e,r,this._defs),i},defs(e){let t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(let i in t){let o=t[i],a=o.stops;o.gradient==="radial"?(e.open("pattern",{id:tx+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:i,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let s=0;s<a.length;++s)e.open("stop",{offset:a[s].offset,"stop-color":a[s].color}).close();e.close()}for(let i in n){let o=n[i];e.open("clipPath",{id:i}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});function Vxe(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=j7(t),e["font-size"]=rs(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(let a in ux){let s=t[a],c=ux[a];s==="transparent"&&(c==="fill"||c==="stroke")||s!=null&&(YV(s)&&(s=zQ(s,i.gradient,"")),e[c]=s)}for(let a in fx){let s=t[a];s!=null&&(o=o||[],o.push(`${fx[a]}: ${s};`))}return o&&(e.style=o.join(" ")),e}var F2={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Nxe(e){F2.svgMarkTypes=e.svgMarkTypes??["text"],F2.svgOnTop=e.svgOnTop??!0,F2.debug=e.debug??!1}function dx(e){po.call(this,e),this._svgRenderer=new Mx(e),this._canvasRenderer=new T7(e)}var EQ=po.prototype;ee(dx,po,{initialize(e,t,n,r,i){this._root_el=yr(e,0,"div");let o=yr(this._root_el,0,"div"),a=yr(this._root_el,1,"div");return this._root_el.style.position="relative",F2.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=F2.svgOnTop?a:o,this._canvasEl=F2.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),EQ.initialize.call(this,e,t,n,r,i)},dirty(e){return F2.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){let r=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(i=>!F2.svgMarkTypes.includes(i));this._svgRenderer.render(e,F2.svgMarkTypes),this._canvasRenderer.render(e,r)},resize(e,t,n,r){return EQ.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background(e){return F2.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function MN(e,t){xc.call(this,e,t)}ee(MN,xc,{initialize(e,t,n){let r=yr(yr(e,0,"div"),F2.svgOnTop?0:1,"div");return xc.prototype.initialize.call(this,r,t,n)}});var mK="canvas",gK="hybrid",vK="png",yK="svg",xK="none",Cc={Canvas:mK,PNG:vK,SVG:yK,Hybrid:gK,None:xK},Kl={};Kl[mK]=Kl[vK]={renderer:T7,headless:T7,handler:xc};Kl[yK]={renderer:Mx,headless:bN,handler:mN};Kl[gK]={renderer:dx,headless:dx,handler:MN};Kl[xK]={};function G7(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Kl[e]=t,this):Kl[e]}function wN(e,t,n){let r=[],i=new kn().union(t),o=e.marktype;return o?CK(e,i,n,r):o==="group"?bK(e,i,n,r):B("Intersect scene must be mark node or group item.")}function CK(e,t,n,r){if(_xe(e,t,n)){let i=e.items,o=e.marktype,a=i.length,s=0;if(o==="group")for(;s<a;++s)bK(i[s],t,n,r);else for(let c=a1[o].isect;s<a;++s){let l=i[s];MK(l,t,c)&&r.push(l)}}return r}function _xe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function bK(e,t,n,r){n&&n(e.mark)&&MK(e,t,a1.group.isect)&&r.push(e);let i=e.items,o=i&&i.length;if(o){let a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let c=0;c<o;++c)CK(i[c],t,n,r);t.translate(a,s)}return r}function MK(e,t,n){let r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}var IV=new kn;function SN(e){let t=e.clip;if(Ie(t))t($7(IV.clear()));else if(t)IV.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(IV)}var kxe=1e-9;function EN(e,t,n){return e===t?!0:n==="path"?wK(e,t):e instanceof Date&&t instanceof Date?+e==+t:Oe(e)&&Oe(t)?Math.abs(e-t)<=kxe:!e||!t||!ne(e)&&!ne(t)?e==t:Txe(e,t)}function wK(e,t){return EN(Ql(e),Ql(t))}function Txe(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!EN(e[i],t[i],i))return!1;return typeof e==typeof t}function Ixe(){_Q(),ave()}var Ru="top",O2="left",P2="right",a4="bottom",Fxe="top-left",Rxe="top-right",Oxe="bottom-left",Pxe="bottom-right",HN="start",DN="middle",s1="end",$xe="x",Bxe="y",zx="group",LN="axis",AN="title",Uxe="frame",jxe="scope",VN="legend",_K="row-header",kK="row-footer",TK="row-title",IK="column-header",FK="column-footer",RK="column-title",qxe="padding",Gxe="symbol",OK="fit",PK="fit-x",$K="fit-y",Wxe="pad",NN="none",wx="all",zN="each",_N="flush",i4="column",o4="row";function BK(e){$.call(this,null,e)}ee(BK,$,{transform(e,t){let n=t.dataflow,r=e.mark,i=r.marktype,o=a1[i],a=o.bound,s=r.bounds,c;if(o.nested)r.items.length&&n.dirty(r.items[0]),s=Sx(r,a),r.items.forEach(l=>{l.bounds.clear().union(s)});else if(i===zx||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),s.clear(),r.items.forEach(l=>s.union(Sx(l,a))),r.role){case LN:case VN:case AN:t.reflow()}else c=t.changed(t.REM),t.visit(t.ADD,l=>{s.union(Sx(l,a))}),t.visit(t.MOD,l=>{c=c||s.alignsWith(l.bounds),n.dirty(l),s.union(Sx(l,a))}),c&&(s.clear(),r.items.forEach(l=>s.union(l.bounds)));return SN(r),t.modifies("bounds")}});function Sx(e,t,n){return t(e.bounds.clear(),e,n)}var SK=":vega_identifier:";function kN(e){$.call(this,0,e)}kN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ee(kN,$,{transform(e,t){let n=Yxe(t.dataflow),r=e.as,i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function Yxe(e){return e._signals[SK]||(e._signals[SK]=e.add(0))}function UK(e){$.call(this,null,e)}ee(UK,$,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Xxe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);let r=n.marktype===zx?P7:O7;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Xxe(e){let t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function jK(e){$.call(this,null,e)}var EK={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!qK(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},qK=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),DK=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(qK(i,o=e[n].bounds,t))return!0},Qxe=e=>{let t=e.bounds;return t.width()>1&&t.height()>1},Kxe=(e,t,n)=>{var r=e.range(),i=new kn;return t===Ru||t===a4?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},zK=e=>(e.forEach(t=>t.opacity=1),e),HK=(e,t)=>e.reflow(t.modified()).modifies("opacity");ee(jK,$,{transform(e,t){let n=EK[e.method]||EK.parity,r=e.separation||0,i=t.materialize(t.SOURCE).source,o,a;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(zK(i),t=HK(t,e)),t;if(i=i.filter(Qxe),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=zK(i),t=HK(t,e),o.length>=3&&DK(o,r)){do o=n(o,r);while(o.length>=3&&DK(o,r));o.length<3&&!je(i).opacity&&(o.length>1&&(je(o).opacity=0),je(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=Kxe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(c=>{a(c)||(c.opacity=0)}));let s=o[0].mark.bounds.clear();return i.forEach(c=>{c.opacity&&s.union(c.bounds)}),t}});function GK(e){$.call(this,null,e)}ee(GK,$,{transform(e,t){let n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){let r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});var Li=new kn;function Fu(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Zxe(e){var t=e.items[0].orient;return t===O2||t===P2}function Jxe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function eCe(e,t,n,r){var i=t.items[0],o=i.datum,a=i.translate!=null?i.translate:.5,s=i.orient,c=Jxe(o),l=i.range,u=i.offset,f=i.position,d=i.minExtent,p=i.maxExtent,h=o.title&&i.items[c[2]].items[0],m=i.titlePadding,g=i.bounds,v=h&&yx(h),y=0,C=0,b,M;switch(Li.clear().union(g),g.clear(),(b=c[0])>-1&&g.union(i.items[b].bounds),(b=c[1])>-1&&g.union(i.items[b].bounds),s){case Ru:y=f||0,C=-u,M=Math.max(d,Math.min(p,-g.y1)),g.add(0,-M).add(l,0),h&&Ex(e,h,M,m,v,0,-1,g);break;case O2:y=-u,C=f||0,M=Math.max(d,Math.min(p,-g.x1)),g.add(-M,0).add(0,l),h&&Ex(e,h,M,m,v,1,-1,g);break;case P2:y=n+u,C=f||0,M=Math.max(d,Math.min(p,g.x2)),g.add(0,0).add(M,l),h&&Ex(e,h,M,m,v,1,1,g);break;case a4:y=f||0,C=r+u,M=Math.max(d,Math.min(p,g.y2)),g.add(0,0).add(l,M),h&&Ex(e,h,M,m,0,0,1,g);break;default:y=i.x,C=i.y}return ns(g.translate(y,C),i),Fu(i,"x",y+a)|Fu(i,"y",C+a)&&(i.bounds=Li,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function Ex(e,t,n,r,i,o,a,s){let c=t.bounds;if(t.auto){let l=a*(n+i+r),u=0,f=0;e.dirty(t),o?u=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(c.translate(-u,-f)),e.dirty(t)}s.union(c)}var LK=(e,t)=>Math.floor(Math.min(e,t)),AK=(e,t)=>Math.ceil(Math.max(e,t));function tCe(e){var t=e.items,n=t.length,r=0,i,o;let a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===zx)switch(i.role){case LN:case VN:case AN:break;case _K:a.rowheaders.push(...o);break;case kK:a.rowfooters.push(...o);break;case IK:a.colheaders.push(...o);break;case FK:a.colfooters.push(...o);break;case TK:a.rowtitle=o[0];break;case RK:a.coltitle=o[0];break;default:a.marks.push(...o)}return a}function nCe(e){return new kn().set(0,0,e.width||0,e.height||0)}function rCe(e){let t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function xn(e,t,n){let r=ne(e)?e[t]:e;return r??(n!==void 0?n:0)}function VK(e){return e<0?Math.ceil(-e):0}function WK(e,t,n){var r=!n.nodirty,i=n.bounds===_N?nCe:rCe,o=Li.set(0,0,0,0),a=xn(n.align,i4),s=xn(n.align,o4),c=xn(n.padding,i4),l=xn(n.padding,o4),u=n.columns||t.length,f=u<=0?1:Math.ceil(t.length/u),d=t.length,p=Array(d),h=Array(u),m=0,g=Array(d),v=Array(f),y=0,C=Array(d),b=Array(d),M=Array(d),S,w,E,D,L,A,j,V,_,N,I;for(w=0;w<u;++w)h[w]=0;for(w=0;w<f;++w)v[w]=0;for(w=0;w<d;++w)A=t[w],L=M[w]=i(A),A.x=A.x||0,C[w]=0,A.y=A.y||0,b[w]=0,E=w%u,D=~~(w/u),m=Math.max(m,j=Math.ceil(L.x2)),y=Math.max(y,V=Math.ceil(L.y2)),h[E]=Math.max(h[E],j),v[D]=Math.max(v[D],V),p[w]=c+VK(L.x1),g[w]=l+VK(L.y1),r&&e.dirty(t[w]);for(w=0;w<d;++w)w%u===0&&(p[w]=0),w<u&&(g[w]=0);if(a===zN)for(E=1;E<u;++E){for(I=0,w=E;w<d;w+=u)I<p[w]&&(I=p[w]);for(w=E;w<d;w+=u)p[w]=I+h[E-1]}else if(a===wx){for(I=0,w=0;w<d;++w)w%u&&I<p[w]&&(I=p[w]);for(w=0;w<d;++w)w%u&&(p[w]=I+m)}else for(a=!1,E=1;E<u;++E)for(w=E;w<d;w+=u)p[w]+=h[E-1];if(s===zN)for(D=1;D<f;++D){for(I=0,w=D*u,S=w+u;w<S;++w)I<g[w]&&(I=g[w]);for(w=D*u;w<S;++w)g[w]=I+v[D-1]}else if(s===wx){for(I=0,w=u;w<d;++w)I<g[w]&&(I=g[w]);for(w=u;w<d;++w)g[w]=I+y}else for(s=!1,D=1;D<f;++D)for(w=D*u,S=w+u;w<S;++w)g[w]+=v[D-1];for(_=0,w=0;w<d;++w)_=p[w]+(w%u?_:0),C[w]+=_-t[w].x;for(E=0;E<u;++E)for(N=0,w=E;w<d;w+=u)N+=g[w],b[w]+=N-t[w].y;if(a&&xn(n.center,i4)&&f>1)for(w=0;w<d;++w)L=a===wx?m:h[w%u],_=L-M[w].x2-t[w].x-C[w],_>0&&(C[w]+=_/2);if(s&&xn(n.center,o4)&&u!==1)for(w=0;w<d;++w)L=s===wx?y:v[~~(w/u)],N=L-M[w].y2-t[w].y-b[w],N>0&&(b[w]+=N/2);for(w=0;w<d;++w)o.union(M[w].translate(C[w],b[w]));switch(_=xn(n.anchor,$xe),N=xn(n.anchor,Bxe),xn(n.anchor,i4)){case s1:_-=o.width();break;case DN:_-=o.width()/2}switch(xn(n.anchor,o4)){case s1:N-=o.height();break;case DN:N-=o.height()/2}for(_=Math.round(_),N=Math.round(N),o.clear(),w=0;w<d;++w)t[w].mark.bounds.clear();for(w=0;w<d;++w)A=t[w],A.x+=C[w]+=_,A.y+=b[w]+=N,o.union(A.mark.bounds.union(A.bounds.translate(C[w],b[w]))),r&&e.dirty(A);return o}function iCe(e,t,n){var r=tCe(t),i=r.marks,o=n.bounds===_N?oCe:aCe,a=n.offset,s=n.columns||i.length,c=s<=0?1:Math.ceil(i.length/s),l=c*s,u,f,d,p,h,m,g;let v=WK(e,i,n);v.empty()&&v.set(0,0,0,0),r.rowheaders&&(m=xn(n.headerBand,o4,null),u=Dx(e,r.rowheaders,i,s,c,-xn(a,"rowHeader"),LK,0,o,"x1",0,s,1,m)),r.colheaders&&(m=xn(n.headerBand,i4,null),f=Dx(e,r.colheaders,i,s,s,-xn(a,"columnHeader"),LK,1,o,"y1",0,1,s,m)),r.rowfooters&&(m=xn(n.footerBand,o4,null),d=Dx(e,r.rowfooters,i,s,c,xn(a,"rowFooter"),AK,0,o,"x2",s-1,s,1,m)),r.colfooters&&(m=xn(n.footerBand,i4,null),p=Dx(e,r.colfooters,i,s,s,xn(a,"columnFooter"),AK,1,o,"y2",l-s,1,s,m)),r.rowtitle&&(h=xn(n.titleAnchor,o4),g=xn(a,"rowTitle"),g=h===s1?d+g:u-g,m=xn(n.titleBand,o4,.5),NK(e,r.rowtitle,g,0,v,m)),r.coltitle&&(h=xn(n.titleAnchor,i4),g=xn(a,"columnTitle"),g=h===s1?p+g:f-g,m=xn(n.titleBand,i4,.5),NK(e,r.coltitle,g,1,v,m))}function oCe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function aCe(e,t){return e.bounds[t]}function Dx(e,t,n,r,i,o,a,s,c,l,u,f,d,p){var h=n.length,m=0,g=0,v,y,C,b,M,S,w,E,D;if(!h)return m;for(v=u;v<h;v+=f)n[v]&&(m=a(m,c(n[v],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=o,y=0,b=t.length;y<b;++y)e.dirty(t[y]),t[y].mark.bounds.clear();for(v=u,y=0,b=t.length;y<b;++y,v+=f){for(S=t[y],M=S.mark.bounds,C=v;C>=0&&(w=n[C])==null;C-=d);s?(E=p==null?w.x:Math.round(w.bounds.x1+p*w.bounds.width()),D=m):(E=m,D=p==null?w.y:Math.round(w.bounds.y1+p*w.bounds.height())),M.union(S.bounds.translate(E-(S.x||0),D-(S.y||0))),S.x=E,S.y=D,e.dirty(S),g=a(g,M[l])}return g}function NK(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function sCe(e,t){let n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function cCe(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function lCe(e,t,n,r,i,o,a){let s=sCe(n,t),c=cCe(e,s("offset",0)),l=s("anchor",HN),u=l===s1?1:l===DN?.5:0,f={align:zN,bounds:s("bounds",_N),columns:s("direction")==="vertical"?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case O2:f.anchor={x:Math.floor(r.x1)-c,column:s1,y:u*(a||r.height()+2*r.y1),row:l};break;case P2:f.anchor={x:Math.ceil(r.x2)+c,y:u*(a||r.height()+2*r.y1),row:l};break;case Ru:f.anchor={y:Math.floor(i.y1)-c,row:s1,x:u*(o||i.width()+2*i.x1),column:l};break;case a4:f.anchor={y:Math.ceil(i.y2)+c,x:u*(o||i.width()+2*i.x1),column:l};break;case Fxe:f.anchor={x:c,y:c};break;case Rxe:f.anchor={x:o-c,y:c,column:s1};break;case Oxe:f.anchor={x:c,y:a-c,row:s1};break;case Pxe:f.anchor={x:o-c,y:a-c,column:s1,row:s1};break}return f}function uCe(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,a=n.x,s=n.y,c,l;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),dCe(e,n,n.items[0].items[0]),o=fCe(n,o),c=2*n.padding,l=2*n.padding,o.empty()||(c=Math.ceil(o.width()+c),l=Math.ceil(o.height()+l)),r.type===Gxe&&pCe(n.items[0].items[0].items[0].items),i!==NN&&(n.x=a=0,n.y=s=0),n.width=c,n.height=l,ns(o.set(a,s,a+c,s+l),n),n.mark.bounds.clear().union(o),n}function fCe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function dCe(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&W7(e,n,i,o);else{var a=t.items[1].items[0],s=a.anchor,c=t.titlePadding||0,l=r-a.x,u=r-a.y;switch(a.orient){case O2:i+=Math.ceil(a.bounds.width())+c;break;case P2:case a4:break;default:o+=a.bounds.height()+c}switch((i||o)&&W7(e,n,i,o),a.orient){case O2:u+=Iu(t,n,a,s,1,1);break;case P2:l+=Iu(t,n,a,s1,0,0)+c,u+=Iu(t,n,a,s,1,1);break;case a4:l+=Iu(t,n,a,s,0,0),u+=Iu(t,n,a,s1,-1,0,1)+c;break;default:l+=Iu(t,n,a,s,0,0)}(l||u)&&W7(e,a,l,u),(l=Math.round(a.bounds.x1-r))<0&&(W7(e,n,-l,0),W7(e,a,-l,0))}}function Iu(e,t,n,r,i,o,a){let s=e.datum.type!=="symbol",c=n.datum.vgrad,l=s&&(o||!c)&&!a?t.items[0]:t,u=l.bounds[i?"y2":"x2"]-e.padding,f=c&&o?u:0,d=c&&o?0:u,p=i<=0?0:yx(n);return Math.round(r===HN?f:r===s1?d-p:.5*(u-p))}function W7(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function pCe(e){let t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function hCe(e,t,n,r,i){var o=t.items[0],a=o.frame,s=o.orient,c=o.anchor,l=o.offset,u=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],p=s===O2||s===P2?r:n,h=0,m=0,g=0,v=0,y=0,C;if(a!==zx?s===O2?(h=i.y2,p=i.y1):s===P2?(h=i.y1,p=i.y2):(h=i.x1,p=i.x2):s===O2&&(h=r,p=0),C=c===HN?h:c===s1?p:(h+p)/2,d&&d.text){switch(s){case Ru:case a4:y=f.bounds.height()+u;break;case O2:v=f.bounds.width()+u;break;case P2:v=-f.bounds.width()-u;break}Li.clear().union(d.bounds),Li.translate(v-(d.x||0),y-(d.y||0)),Fu(d,"x",v)|Fu(d,"y",y)&&(e.dirty(d),d.bounds.clear().union(Li),d.mark.bounds.clear().union(Li),e.dirty(d)),Li.clear().union(d.bounds)}else Li.clear();switch(Li.union(f.bounds),s){case Ru:m=C,g=i.y1-Li.height()-l;break;case O2:m=i.x1-Li.width()-l,g=C;break;case P2:m=i.x2+Li.width()+l,g=C;break;case a4:m=C,g=i.y2+l;break;default:m=o.x,g=o.y}return Fu(o,"x",m)|Fu(o,"y",g)&&(Li.translate(m,g),e.dirty(o),o.bounds.clear().union(Li),t.bounds.clear().union(Li),e.dirty(o)),o.bounds}function YK(e){$.call(this,null,e)}ee(YK,$,{transform(e,t){let n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&iCe(n,r,e.layout),gCe(n,r,e)}),mCe(e.mark.group)?t.reflow():t}});function mCe(e){return e&&e.mark.role!=="legend-entry"}function gCe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),a=new kn().set(0,0,i,o),s=a.clone(),c=a.clone(),l=[],u,f,d,p,h,m;for(h=0,m=r.length;h<m;++h)switch(f=r[h],f.role){case LN:p=Zxe(f)?s:c,p.union(eCe(e,f,i,o));break;case AN:u=f;break;case VN:l.push(uCe(e,f));break;case Uxe:case jxe:case _K:case kK:case TK:case IK:case FK:case RK:s.union(f.bounds),c.union(f.bounds);break;default:a.union(f.bounds)}if(l.length){let g={};l.forEach(v=>{d=v.orient||P2,d!==NN&&(g[d]||(g[d]=[])).push(v)});for(let v in g){let y=g[v];WK(e,y,lCe(y,v,n.legends,s,c,i,o))}l.forEach(v=>{let y=v.bounds;if(y.equals(v._bounds)||(v.bounds=v._bounds,e.dirty(v),v.bounds=y,e.dirty(v)),n.autosize&&(n.autosize.type===OK||n.autosize.type===PK||n.autosize.type===$K))switch(v.orient){case O2:case P2:a.add(y.x1,0).add(y.x2,0);break;case Ru:case a4:a.add(0,y.y1).add(0,y.y2)}else a.union(y)})}a.union(s).union(c),u&&a.union(hCe(e,u,i,o,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),vCe(e,t,a,n)}function vCe(e,t,n,r){let i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,c=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),u=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1)),d=Math.max(0,Math.ceil(n.x2-c)),p=Math.max(0,Math.ceil(n.y2-u));if(i.contains===qxe){let h=e.padding();a-=h.left+h.right,s-=h.top+h.bottom}o===NN?(l=0,f=0,c=a,u=s):o===OK?(c=Math.max(0,a-l-d),u=Math.max(0,s-f-p)):o===PK?(c=Math.max(0,a-l-d),s=u+f+p):o===$K?(a=c+l+d,u=Math.max(0,s-f-p)):o===Wxe&&(a=c+l+d,s=u+f+p),e._resizeView(a,s,c,u,[l,f],i.resize)}var PN={};Mr(PN,{axisticks:()=>ZK,datajoin:()=>JK,encode:()=>eZ,legendentries:()=>tZ,linkpath:()=>FN,pie:()=>RN,scale:()=>aZ,sortitems:()=>cZ,stack:()=>ON});function ZK(e){$.call(this,null,e)}ee(ZK,$,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,s=qy(o,a,e.minstep),c=e.format||DV(n,o,s,e.formatSpecifier,e.formatType,!!e.values),l=e.values?EV(o,e.values,s):Gy(o,s);return i&&(r.rem=i),i=l.map((u,f)=>ct({index:f/(l.length-1||1),value:u,label:c(u)})),e.extra&&i.length&&i.push(ct({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function JK(e){$.call(this,null,e)}function yCe(){return ct({})}function xCe(e){let t=E3().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ee(JK,$,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||yCe,o=e.key||De,a=this.value;return F(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&B("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=xCe(o)),t.visit(t.ADD,s=>{let c=o(s),l=a.get(c);l?l.exit?(a.empty--,r.add.push(l)):r.mod.push(l):(l=i(s),a.set(c,l),r.add.push(l)),l.datum=s,l.exit=!1}),t.visit(t.MOD,s=>{let c=o(s),l=a.get(c);l&&(l.datum=s,r.mod.push(l))}),t.visit(t.REM,s=>{let c=o(s),l=a.get(c);s===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}});function eZ(e){$.call(this,null,e)}ee(eZ,$,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(F(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var a=o==="enter",s=i.update||ec,c=i.enter||ec,l=i.exit||ec,u=(o&&!a?i[o]:s)||ec;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{c(f,e),s(f,e)}),n.modifies(c.output),n.modifies(s.output),u!==ec&&u!==s&&(t.visit(t.ADD,f=>{u(f,e)}),n.modifies(u.output))),t.changed(t.REM)&&l!==ec&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),a||u!==ec){let f=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(f,d=>{let p=c(d,e)||r;(u(d,e)||p)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)):t.visit(f,d=>{(u(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)}return n.changed()?n:t.StopPropagation}});function tZ(e){$.call(this,[],e)}ee(tZ,$,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||E7,a=e.scale,s=+e.limit,c=qy(a,e.count==null?5:e.count,e.minstep),l=!!e.values||o===E7,u=e.format||HV(n,a,c,o,e.formatSpecifier,e.formatType,l),f=e.values||zV(a,c),d,p,h,m,g;return i&&(r.rem=i),o===E7?(s&&f.length>s?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,s-1),g=!0):i=f,Ie(h=e.size)?(!e.values&&a(i[0])===0&&(i=i.slice(1)),m=i.reduce((v,y)=>Math.max(v,h(y,e)),0)):h=gn(m=h||8),i=i.map((v,y)=>ct({index:y,label:u(v,y,i),value:v,offset:m,size:h(v,e)})),g&&(g=f[i.length],i.push(ct({index:i.length,label:`\u2026${f.length-i.length} entries`,value:g,offset:m,size:h(g,e)})))):o===KX?(d=a.domain(),p=jy(a,d[0],je(d)),f.length<3&&!e.values&&d[0]!==je(d)&&(f=[d[0],je(d)]),i=f.map((v,y)=>ct({index:y,label:u(v,y,f),value:v,perc:p(v)}))):(h=f.length-1,p=eQ(a),i=f.map((v,y)=>ct({index:y,label:u(v,y,f),value:v,perc:y?p(v):0,perc2:y===h?1:p(f[y+1])}))),r.source=i,r.add=i,this.value=i,r}});var CCe=e=>e.source.x,bCe=e=>e.source.y,MCe=e=>e.target.x,wCe=e=>e.target.y;function FN(e){$.call(this,{},e)}FN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ee(FN,$,{transform(e,t){var n=e.sourceX||CCe,r=e.sourceY||bCe,i=e.targetX||MCe,o=e.targetY||wCe,a=e.as||"path",s=e.orient||"vertical",c=e.shape||"line",l=XK.get(c+"-"+s)||XK.get(c);return l||B("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,u=>{u[a]=l(n(u),r(u),i(u),o(u))}),t.reflow(e.modified()).modifies(a)}});var nZ=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,SCe=(e,t,n,r)=>nZ(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),rZ=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.hypot(i,o)/2,s=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+s+" 0 1 "+n+","+r},ECe=(e,t,n,r)=>rZ(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),iZ=(e,t,n,r)=>{let i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},DCe=(e,t,n,r)=>iZ(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),zCe=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,HCe=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,LCe=(e,t,n,r)=>{let i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),c=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(c?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},ACe=(e,t,n,r)=>{let i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},VCe=(e,t,n,r)=>{let i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},NCe=(e,t,n,r)=>{let i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),c=(t+r)/2;return"M"+t*i+","+t*o+"C"+c*i+","+c*o+" "+c*a+","+c*s+" "+r*a+","+r*s},XK=E3({line:nZ,"line-radial":SCe,arc:rZ,"arc-radial":ECe,curve:iZ,"curve-radial":DCe,"orthogonal-horizontal":zCe,"orthogonal-vertical":HCe,"orthogonal-radial":LCe,"diagonal-horizontal":ACe,"diagonal-vertical":VCe,"diagonal-radial":NCe});function RN(e){$.call(this,null,e)}RN.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ee(RN,$,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||Pa,a=e.startAngle||0,s=e.endAngle!=null?e.endAngle:2*Math.PI,c=t.source,l=c.map(o),u=l.length,f=a,d=(s-a)/tu(l),p=Wn(u),h,m,g;for(e.sort&&p.sort((v,y)=>l[v]-l[y]),h=0;h<u;++h)g=l[p[h]],m=c[p[h]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});var _Ce=5;function kCe(e){let t=e.type;return!e.bins&&(t===Bl||t===zu||t===Hu)}function oZ(e){return M7(e)&&e!==T2}var TCe=mr(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function aZ(e){$.call(this,null,e),this.modified(!0)}ee(aZ,$,{transform(e,t){var n=t.dataflow,r=this.value,i=ICe(e);(!r||i!==r.type)&&(this.value=r=dt(i)());for(i in e)if(!TCe[i]){if(i==="padding"&&oZ(r.type))continue;Ie(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return BCe(r,e,$Ce(r,e,RCe(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function ICe(e){var t=e.type,n="",r;return t===T2?T2+"-"+Bl:(FCe(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?T2+"-":r===3?Ul+"-":""),(n+t||Bl).toLowerCase())}function FCe(e){let t=e.type;return M7(t)&&t!==G3&&t!==W3&&(e.scheme||e.range&&e.range.length&&e.range.every(Q))}function RCe(e,t,n){let r=OCe(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,a=t.zero||t.zero===void 0&&kCe(e),s,c;if(!i)return 0;if(oZ(o)&&t.padding&&i[0]!==je(i)&&(i=PCe(o,i,t.range,t.padding,t.exponent,t.constant)),(a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(s=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[s]<0&&(i[s]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[s]=t.domainMax),t.domainMid!=null)){c=t.domainMid;let l=c>i[s]?s+1:c<i[0]?0:s;l!==s&&n.warn("Scale domainMid exceeds domain min or max.",c),i.splice(l,0,c)}return e.domain(sZ(o,i,n)),o===Ry&&e.unknown(t.domainImplicit?vu:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&qy(e,t.nice)||null),i.length}function OCe(e,t,n){return t?(e.domain(sZ(e.type,t,n)),t.length):-1}function PCe(e,t,n,r,i,o){var a=Math.abs(je(n)-n[0]),s=a/(a-2*r),c=e===Ja?nd(t,null,s):e===Hu?K6(t,null,s,.5):e===zu?K6(t,null,s,i||1):e===v7?rd(t,null,s,o||1):td(t,null,s);return t=t.slice(),t[0]=c[0],t[t.length-1]=c[1],t}function sZ(e,t,n){if(MV(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Z(t))}return t}function $Ce(e,t,n){let r=t.bins;if(r&&!F(r)){let i=e.domain(),o=i[0],a=je(i),s=r.step,c=r.start==null?o:r.start,l=r.stop==null?a:r.stop;s||B("Scale bins parameter missing step property."),c<o&&(c=s*Math.ceil(o/s)),l>a&&(l=s*Math.floor(a/s)),r=Wn(c,l+s/2,s)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Py&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function BCe(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=UCe(r,t,n);else if(t.scheme&&(o=jCe(r,t,n),Ie(o))){if(e.interpolator)return e.interpolator(o);B(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&wV(r))return e.interpolator(Lu(IN(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(w7(t.interpolate,t.interpolateGamma)):Ie(e.round)?e.round(i):Ie(e.rangeRound)&&e.interpolate(i?Ka:Di),o&&e.range(IN(o,t.reverse))}function UCe(e,t,n){e!==vV&&e!==Oy&&B("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===Oy?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*g7(n,i,r)]}function jCe(e,t,n){var r=t.schemeExtent,i,o;return F(t.scheme)?o=Lu(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=S7(i),o||B(`Unrecognized scheme name: ${t.scheme}`)),n=e===x7?n+1:e===Py?n-1:e===$l||e===y7?+t.schemeCount||_Ce:n,wV(e)?QK(o,r,t.reverse):Ie(o)?Uy(QK(o,r),n):e===Ry?o:o.slice(0,n)}function QK(e,t,n){return Ie(e)&&(t||n)?By(e,IN(t||[0,1],n)):e}function IN(e,t){return t?e.slice().reverse():e}function cZ(e){$.call(this,null,e)}ee(cZ,$,{transform(e,t){let n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Ga(e.sort)),this.modified(n),t}});var KK="zero",lZ="center",uZ="normalize",fZ=["y0","y1"];function ON(e){$.call(this,null,e)}ON.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:KK,values:[KK,lZ,uZ]},{name:"as",type:"string",array:!0,length:2,default:fZ}]};ee(ON,$,{transform(e,t){var n=e.as||fZ,r=n[0],i=n[1],o=Ga(e.sort),a=e.field||Pa,s=e.offset===lZ?qCe:e.offset===uZ?GCe:WCe,c,l,u,f;for(c=YCe(t.source,e.groupby,o,a),l=0,u=c.length,f=c.max;l<u;++l)s(c[l],f,a,r,i);return t.reflow(e.modified()).modifies(n)}});function qCe(e,t,n,r,i){for(var o=(t-e.sum)/2,a=e.length,s=0,c;s<a;++s)c=e[s],c[r]=o,c[i]=o+=Math.abs(n(c))}function GCe(e,t,n,r,i){for(var o=1/e.sum,a=0,s=e.length,c=0,l=0,u;c<s;++c)u=e[c],u[r]=a,u[i]=a=o*(l+=Math.abs(n(u)))}function WCe(e,t,n,r,i){for(var o=0,a=0,s=e.length,c=0,l,u;c<s;++c)u=e[c],l=+n(u),l<0?(u[r]=a,u[i]=a+=l):(u[r]=o,u[i]=o+=l)}function YCe(e,t,n,r){var i=[],o=m=>m(u),a,s,c,l,u,f,d,p,h;if(t==null)i.push(e.slice());else for(a={},s=0,c=e.length;s<c;++s)u=e[s],f=t.map(o),d=a[f],d||(a[f]=d=[],i.push(d)),d.push(u);for(f=0,h=0,l=i.length;f<l;++f){for(d=i[f],s=0,p=0,c=d.length;s<c;++s)p+=Math.abs(r(d[s]));d.sum=p,p>h&&(h=p),n&&d.sort(n)}return i.max=h,i}var ik={};Mr(ik,{contour:()=>Q_,geojson:()=>Z_,geopath:()=>J_,geopoint:()=>ek,geoshape:()=>tk,graticule:()=>nk,heatmap:()=>rk,isocontour:()=>Y_,kde2d:()=>X_,projection:()=>bJ});var me=1e-6,Zl=1e-12,$e=Math.PI,$t=$e/2,Ou=$e/4,Yn=$e*2,Bt=180/$e,Re=$e/180,Fe=Math.abs,Jo=Math.atan,Tn=Math.atan2,pe=Math.cos,Y7=Math.ceil,Hx=Math.exp;var Lx=Math.hypot,Jl=Math.log,Ax=Math.pow,fe=Math.sin,Ai=Math.sign||function(e){return e>0?1:e<0?-1:0},Ut=Math.sqrt,Pu=Math.tan;function Vx(e){return e>1?0:e<-1?$e:Math.acos(e)}function fn(e){return e>1?$t:e<-1?-$t:Math.asin(e)}function dn(){}function Nx(e,t){e&&pZ.hasOwnProperty(e.type)&&pZ[e.type](e,t)}var dZ={Feature:function(e,t){Nx(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Nx(n[r].geometry,t)}},pZ={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){$N(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)$N(n[r],t,0)},Polygon:function(e,t){hZ(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)hZ(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Nx(n[r],t)}};function $N(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function hZ(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)$N(e[n],t,1);t.polygonEnd()}function I1(e,t){e&&dZ.hasOwnProperty(e.type)?dZ[e.type](e,t):Nx(e,t)}var X7=new vn,_x=new vn,mZ,gZ,BN,UN,jN,$2={point:dn,lineStart:dn,lineEnd:dn,polygonStart:function(){X7=new vn,$2.lineStart=XCe,$2.lineEnd=QCe},polygonEnd:function(){var e=+X7;_x.add(e<0?Yn+e:e),this.lineStart=this.lineEnd=this.point=dn},sphere:function(){_x.add(Yn)}};function XCe(){$2.point=KCe}function QCe(){vZ(mZ,gZ)}function KCe(e,t){$2.point=vZ,mZ=e,gZ=t,e*=Re,t*=Re,BN=e,UN=pe(t=t/2+Ou),jN=fe(t)}function vZ(e,t){e*=Re,t*=Re,t=t/2+Ou;var n=e-BN,r=n>=0?1:-1,i=r*n,o=pe(t),a=fe(t),s=jN*a,c=UN*o+s*pe(i),l=s*r*fe(i);X7.add(Tn(l,c)),BN=e,UN=o,jN=a}function qN(e){return _x=new vn,I1(e,$2),_x*2}function e0(e){return[Tn(e[1],e[0]),fn(e[2])]}function e2(e){var t=e[0],n=e[1],r=pe(n);return[r*pe(t),r*fe(t),fe(n)]}function Q7(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function bc(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function kx(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function K7(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function t0(e){var t=Ut(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Sn,F1,In,mo,n0,bZ,MZ,$u,Z7,s4,wc,Mc={point:GN,lineStart:yZ,lineEnd:xZ,polygonStart:function(){Mc.point=SZ,Mc.lineStart=ZCe,Mc.lineEnd=JCe,Z7=new vn,$2.polygonStart()},polygonEnd:function(){$2.polygonEnd(),Mc.point=GN,Mc.lineStart=yZ,Mc.lineEnd=xZ,X7<0?(Sn=-(In=180),F1=-(mo=90)):Z7>me?mo=90:Z7<-me&&(F1=-90),wc[0]=Sn,wc[1]=In},sphere:function(){Sn=-(In=180),F1=-(mo=90)}};function GN(e,t){s4.push(wc=[Sn=e,In=e]),t<F1&&(F1=t),t>mo&&(mo=t)}function wZ(e,t){var n=e2([e*Re,t*Re]);if($u){var r=bc($u,n),i=[r[1],-r[0],0],o=bc(i,r);t0(o),o=e0(o);var a=e-n0,s=a>0?1:-1,c=o[0]*Bt*s,l,u=Fe(a)>180;u^(s*n0<c&&c<s*e)?(l=o[1]*Bt,l>mo&&(mo=l)):(c=(c+360)%360-180,u^(s*n0<c&&c<s*e)?(l=-o[1]*Bt,l<F1&&(F1=l)):(t<F1&&(F1=t),t>mo&&(mo=t))),u?e<n0?ho(Sn,e)>ho(Sn,In)&&(In=e):ho(e,In)>ho(Sn,In)&&(Sn=e):In>=Sn?(e<Sn&&(Sn=e),e>In&&(In=e)):e>n0?ho(Sn,e)>ho(Sn,In)&&(In=e):ho(e,In)>ho(Sn,In)&&(Sn=e)}else s4.push(wc=[Sn=e,In=e]);t<F1&&(F1=t),t>mo&&(mo=t),$u=n,n0=e}function yZ(){Mc.point=wZ}function xZ(){wc[0]=Sn,wc[1]=In,Mc.point=GN,$u=null}function SZ(e,t){if($u){var n=e-n0;Z7.add(Fe(n)>180?n+(n>0?360:-360):n)}else bZ=e,MZ=t;$2.point(e,t),wZ(e,t)}function ZCe(){$2.lineStart()}function JCe(){SZ(bZ,MZ),$2.lineEnd(),Fe(Z7)>me&&(Sn=-(In=180)),wc[0]=Sn,wc[1]=In,$u=null}function ho(e,t){return(t-=e)<0?t+360:t}function ebe(e,t){return e[0]-t[0]}function CZ(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function WN(e){var t,n,r,i,o,a,s;if(mo=In=-(Sn=F1=1/0),s4=[],I1(e,Mc),n=s4.length){for(s4.sort(ebe),t=1,r=s4[0],o=[r];t<n;++t)i=s4[t],CZ(r,i[0])||CZ(r,i[1])?(ho(r[0],i[1])>ho(r[0],r[1])&&(r[1]=i[1]),ho(i[0],r[1])>ho(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(s=ho(r[1],i[0]))>a&&(a=s,Sn=i[0],In=r[1])}return s4=wc=null,Sn===1/0||F1===1/0?[[NaN,NaN],[NaN,NaN]]:[[Sn,F1],[In,mo]]}var J7,Tx,Ix,Fx,Rx,Ox,Px,$x,YN,XN,QN,zZ,HZ,c1,l1,u1,B2={sphere:dn,point:KN,lineStart:EZ,lineEnd:DZ,polygonStart:function(){B2.lineStart=rbe,B2.lineEnd=ibe},polygonEnd:function(){B2.lineStart=EZ,B2.lineEnd=DZ}};function KN(e,t){e*=Re,t*=Re;var n=pe(t);ep(n*pe(e),n*fe(e),fe(t))}function ep(e,t,n){++J7,Ix+=(e-Ix)/J7,Fx+=(t-Fx)/J7,Rx+=(n-Rx)/J7}function EZ(){B2.point=tbe}function tbe(e,t){e*=Re,t*=Re;var n=pe(t);c1=n*pe(e),l1=n*fe(e),u1=fe(t),B2.point=nbe,ep(c1,l1,u1)}function nbe(e,t){e*=Re,t*=Re;var n=pe(t),r=n*pe(e),i=n*fe(e),o=fe(t),a=Tn(Ut((a=l1*o-u1*i)*a+(a=u1*r-c1*o)*a+(a=c1*i-l1*r)*a),c1*r+l1*i+u1*o);Tx+=a,Ox+=a*(c1+(c1=r)),Px+=a*(l1+(l1=i)),$x+=a*(u1+(u1=o)),ep(c1,l1,u1)}function DZ(){B2.point=KN}function rbe(){B2.point=obe}function ibe(){LZ(zZ,HZ),B2.point=KN}function obe(e,t){zZ=e,HZ=t,e*=Re,t*=Re,B2.point=LZ;var n=pe(t);c1=n*pe(e),l1=n*fe(e),u1=fe(t),ep(c1,l1,u1)}function LZ(e,t){e*=Re,t*=Re;var n=pe(t),r=n*pe(e),i=n*fe(e),o=fe(t),a=l1*o-u1*i,s=u1*r-c1*o,c=c1*i-l1*r,l=Lx(a,s,c),u=fn(l),f=l&&-u/l;YN.add(f*a),XN.add(f*s),QN.add(f*c),Tx+=u,Ox+=u*(c1+(c1=r)),Px+=u*(l1+(l1=i)),$x+=u*(u1+(u1=o)),ep(c1,l1,u1)}function ZN(e){J7=Tx=Ix=Fx=Rx=Ox=Px=$x=0,YN=new vn,XN=new vn,QN=new vn,I1(e,B2);var t=+YN,n=+XN,r=+QN,i=Lx(t,n,r);return i<Zl&&(t=Ox,n=Px,r=$x,Tx<me&&(t=Ix,n=Fx,r=Rx),i=Lx(t,n,r),i<Zl)?[NaN,NaN]:[Tn(n,t)*Bt,fn(r/i)*Bt]}function tp(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function JN(e,t){return Fe(e)>$e&&(e-=Math.round(e/Yn)*Yn),[e,t]}JN.invert=JN;function e_(e,t,n){return(e%=Yn)?t||n?tp(VZ(e),NZ(t,n)):VZ(e):t||n?NZ(t,n):JN}function AZ(e){return function(t,n){return t+=e,Fe(t)>$e&&(t-=Math.round(t/Yn)*Yn),[t,n]}}function VZ(e){var t=AZ(e);return t.invert=AZ(-e),t}function NZ(e,t){var n=pe(e),r=fe(e),i=pe(t),o=fe(t);function a(s,c){var l=pe(c),u=pe(s)*l,f=fe(s)*l,d=fe(c),p=d*n+u*r;return[Tn(f*i-p*o,u*n-d*r),fn(p*i+f*o)]}return a.invert=function(s,c){var l=pe(c),u=pe(s)*l,f=fe(s)*l,d=fe(c),p=d*i-f*o;return[Tn(f*i+d*o,u*n+p*r),fn(p*n-u*r)]},a}function _Z(e){e=e_(e[0]*Re,e[1]*Re,e.length>2?e[2]*Re:0);function t(n){return n=e(n[0]*Re,n[1]*Re),n[0]*=Bt,n[1]*=Bt,n}return t.invert=function(n){return n=e.invert(n[0]*Re,n[1]*Re),n[0]*=Bt,n[1]*=Bt,n},t}function TZ(e,t,n,r,i,o){if(n){var a=pe(t),s=fe(t),c=r*n;i==null?(i=t+r*Yn,o=t-c/2):(i=kZ(a,i),o=kZ(a,o),(r>0?i<o:i>o)&&(i+=r*Yn));for(var l,u=i;r>0?u>o:u<o;u-=c)l=e0([a,-s*pe(u),-s*fe(u)]),e.point(l[0],l[1])}}function kZ(e,t){t=e2(t),t[0]-=e,t0(t);var n=Vx(-t[1]);return((-t[2]<0?-n:n)+Yn-me)%Yn}function Bx(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:dn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Bu(e,t){return Fe(e[0]-t[0])<me&&Fe(e[1]-t[1])<me}function Ux(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function jx(e,t,n,r,i){var o=[],a=[],s,c;if(e.forEach(function(h){if(!((m=h.length-1)<=0)){var m,g=h[0],v=h[m],y;if(Bu(g,v)){if(!g[2]&&!v[2]){for(i.lineStart(),s=0;s<m;++s)i.point((g=h[s])[0],g[1]);i.lineEnd();return}v[0]+=2*me}o.push(y=new Ux(g,h,null,!0)),a.push(y.o=new Ux(g,null,y,!1)),o.push(y=new Ux(v,h,null,!1)),a.push(y.o=new Ux(v,null,y,!0))}}),!!o.length){for(a.sort(t),IZ(o),IZ(a),s=0,c=a.length;s<c;++s)a[s].e=n=!n;for(var l=o[0],u,f;;){for(var d=l,p=!0;d.v;)if((d=d.n)===l)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,c=u.length;s<c;++s)i.point((f=u[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(u=d.p.z,s=u.length-1;s>=0;--s)i.point((f=u[s])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,u=d.z,p=!p}while(!d.v);i.lineEnd()}}}function IZ(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function t_(e){return Fe(e[0])<=$e?e[0]:Ai(e[0])*((Fe(e[0])+$e)%Yn-$e)}function FZ(e,t){var n=t_(t),r=t[1],i=fe(r),o=[fe(n),-pe(n),0],a=0,s=0,c=new vn;i===1?r=$t+me:i===-1&&(r=-$t-me);for(var l=0,u=e.length;l<u;++l)if(d=(f=e[l]).length)for(var f,d,p=f[d-1],h=t_(p),m=p[1]/2+Ou,g=fe(m),v=pe(m),y=0;y<d;++y,h=b,g=S,v=w,p=C){var C=f[y],b=t_(C),M=C[1]/2+Ou,S=fe(M),w=pe(M),E=b-h,D=E>=0?1:-1,L=D*E,A=L>$e,j=g*S;if(c.add(Tn(j*D*fe(L),v*w+j*pe(L))),a+=A?E+D*Yn:E,A^h>=n^b>=n){var V=bc(e2(p),e2(C));t0(V);var _=bc(o,V);t0(_);var N=(A^E>=0?-1:1)*fn(_[2]);(r>N||r===N&&(V[0]||V[1]))&&(s+=A^E>=0?1:-1)}}return(a<-me||a<me&&c<-Zl)^s&1}function qx(e,t,n,r){return function(i){var o=t(i),a=Bx(),s=t(a),c=!1,l,u,f,d={point:p,lineStart:m,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=C,u=[],l=[]},polygonEnd:function(){d.point=p,d.lineStart=m,d.lineEnd=g,u=eu(u);var b=FZ(l,r);u.length?(c||(i.polygonStart(),c=!0),jx(u,sbe,b,n,i)):b&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),u=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(b,M){e(b,M)&&i.point(b,M)}function h(b,M){o.point(b,M)}function m(){d.point=h,o.lineStart()}function g(){d.point=p,o.lineEnd()}function v(b,M){f.push([b,M]),s.point(b,M)}function y(){s.lineStart(),f=[]}function C(){v(f[0][0],f[0][1]),s.lineEnd();var b=s.clean(),M=a.result(),S,w=M.length,E,D,L;if(f.pop(),l.push(f),f=null,!!w){if(b&1){if(D=M[0],(E=D.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),S=0;S<E;++S)i.point((L=D[S])[0],L[1]);i.lineEnd()}return}w>1&&b&2&&M.push(M.pop().concat(M.shift())),u.push(M.filter(abe))}}return d}}function abe(e){return e.length>1}function sbe(e,t){return((e=e.x)[0]<0?e[1]-$t-me:$t-e[1])-((t=t.x)[0]<0?t[1]-$t-me:$t-t[1])}var n_=qx(function(){return!0},cbe,ube,[-$e,-$t]);function cbe(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var s=o>0?$e:-$e,c=Fe(o-t);Fe(c-$e)<me?(e.point(t,n=(n+a)/2>0?$t:-$t),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),i=0):r!==s&&c>=$e&&(Fe(t-r)<me&&(t-=r*me),Fe(o-s)<me&&(o-=s*me),n=lbe(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=o,n=a),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function lbe(e,t,n,r){var i,o,a=fe(e-n);return Fe(a)>me?Jo((fe(t)*(o=pe(r))*fe(n)-fe(r)*(i=pe(t))*fe(e))/(i*o*a)):(t+r)/2}function ube(e,t,n,r){var i;if(e==null)i=n*$t,r.point(-$e,i),r.point(0,i),r.point($e,i),r.point($e,0),r.point($e,-i),r.point(0,-i),r.point(-$e,-i),r.point(-$e,0),r.point(-$e,i);else if(Fe(e[0]-t[0])>me){var o=e[0]<t[0]?$e:-$e;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function RZ(e){var t=pe(e),n=6*Re,r=t>0,i=Fe(t)>me;function o(u,f,d,p){TZ(p,e,n,d,u,f)}function a(u,f){return pe(u)*pe(f)>t}function s(u){var f,d,p,h,m;return{lineStart:function(){h=p=!1,m=1},point:function(g,v){var y=[g,v],C,b=a(g,v),M=r?b?0:l(g,v):b?l(g+(g<0?$e:-$e),v):0;if(!f&&(h=p=b)&&u.lineStart(),b!==p&&(C=c(f,y),(!C||Bu(f,C)||Bu(y,C))&&(y[2]=1)),b!==p)m=0,b?(u.lineStart(),C=c(y,f),u.point(C[0],C[1])):(C=c(f,y),u.point(C[0],C[1],2),u.lineEnd()),f=C;else if(i&&f&&r^b){var S;!(M&d)&&(S=c(y,f,!0))&&(m=0,r?(u.lineStart(),u.point(S[0][0],S[0][1]),u.point(S[1][0],S[1][1]),u.lineEnd()):(u.point(S[1][0],S[1][1]),u.lineEnd(),u.lineStart(),u.point(S[0][0],S[0][1],3)))}b&&(!f||!Bu(f,y))&&u.point(y[0],y[1]),f=y,p=b,d=M},lineEnd:function(){p&&u.lineEnd(),f=null},clean:function(){return m|(h&&p)<<1}}}function c(u,f,d){var p=e2(u),h=e2(f),m=[1,0,0],g=bc(p,h),v=Q7(g,g),y=g[0],C=v-y*y;if(!C)return!d&&u;var b=t*v/C,M=-t*y/C,S=bc(m,g),w=K7(m,b),E=K7(g,M);kx(w,E);var D=S,L=Q7(w,D),A=Q7(D,D),j=L*L-A*(Q7(w,w)-1);if(!(j<0)){var V=Ut(j),_=K7(D,(-L-V)/A);if(kx(_,w),_=e0(_),!d)return _;var N=u[0],I=f[0],W=u[1],X=f[1],J;I<N&&(J=N,N=I,I=J);var Se=I-N,Ee=Fe(Se-$e)<me,Xe=Ee||Se<me;if(!Ee&&X<W&&(J=W,W=X,X=J),Xe?Ee?W+X>0^_[1]<(Fe(_[0]-N)<me?W:X):W<=_[1]&&_[1]<=X:Se>$e^(N<=_[0]&&_[0]<=I)){var zt=K7(D,(-L+V)/A);return kx(zt,w),[_,e0(zt)]}}}function l(u,f){var d=r?e:$e-e,p=0;return u<-d?p|=1:u>d&&(p|=2),f<-d?p|=4:f>d&&(p|=8),p}return qx(a,s,o,r?[0,-e]:[-$e,e-$e])}function OZ(e,t,n,r,i,o){var a=e[0],s=e[1],c=t[0],l=t[1],u=0,f=1,d=c-a,p=l-s,h;if(h=n-a,!(!d&&h>0)){if(h/=d,d<0){if(h<u)return;h<f&&(f=h)}else if(d>0){if(h>f)return;h>u&&(u=h)}if(h=i-a,!(!d&&h<0)){if(h/=d,d<0){if(h>f)return;h>u&&(u=h)}else if(d>0){if(h<u)return;h<f&&(f=h)}if(h=r-s,!(!p&&h>0)){if(h/=p,p<0){if(h<u)return;h<f&&(f=h)}else if(p>0){if(h>f)return;h>u&&(u=h)}if(h=o-s,!(!p&&h<0)){if(h/=p,p<0){if(h>f)return;h>u&&(u=h)}else if(p>0){if(h<u)return;h<f&&(f=h)}return u>0&&(e[0]=a+u*d,e[1]=s+u*p),f<1&&(t[0]=a+f*d,t[1]=s+f*p),!0}}}}}var np=1e9,Gx=-np;function rp(e,t,n,r){function i(l,u){return e<=l&&l<=n&&t<=u&&u<=r}function o(l,u,f,d){var p=0,h=0;if(l==null||(p=a(l,f))!==(h=a(u,f))||c(l,u)<0^f>0)do d.point(p===0||p===3?e:n,p>1?r:t);while((p=(p+f+4)%4)!==h);else d.point(u[0],u[1])}function a(l,u){return Fe(l[0]-e)<me?u>0?0:3:Fe(l[0]-n)<me?u>0?2:1:Fe(l[1]-t)<me?u>0?1:0:u>0?3:2}function s(l,u){return c(l.x,u.x)}function c(l,u){var f=a(l,1),d=a(u,1);return f!==d?f-d:f===0?u[1]-l[1]:f===1?l[0]-u[0]:f===2?l[1]-u[1]:u[0]-l[0]}return function(l){var u=l,f=Bx(),d,p,h,m,g,v,y,C,b,M,S,w={point:E,lineStart:j,lineEnd:V,polygonStart:L,polygonEnd:A};function E(N,I){i(N,I)&&u.point(N,I)}function D(){for(var N=0,I=0,W=p.length;I<W;++I)for(var X=p[I],J=1,Se=X.length,Ee=X[0],Xe,zt,lt=Ee[0],en=Ee[1];J<Se;++J)Xe=lt,zt=en,Ee=X[J],lt=Ee[0],en=Ee[1],zt<=r?en>r&&(lt-Xe)*(r-zt)>(en-zt)*(e-Xe)&&++N:en<=r&&(lt-Xe)*(r-zt)<(en-zt)*(e-Xe)&&--N;return N}function L(){u=f,d=[],p=[],S=!0}function A(){var N=D(),I=S&&N,W=(d=eu(d)).length;(I||W)&&(l.polygonStart(),I&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),W&&jx(d,s,N,o,l),l.polygonEnd()),u=l,d=p=h=null}function j(){w.point=_,p&&p.push(h=[]),M=!0,b=!1,y=C=NaN}function V(){d&&(_(m,g),v&&b&&f.rejoin(),d.push(f.result())),w.point=E,b&&u.lineEnd()}function _(N,I){var W=i(N,I);if(p&&h.push([N,I]),M)m=N,g=I,v=W,M=!1,W&&(u.lineStart(),u.point(N,I));else if(W&&b)u.point(N,I);else{var X=[y=Math.max(Gx,Math.min(np,y)),C=Math.max(Gx,Math.min(np,C))],J=[N=Math.max(Gx,Math.min(np,N)),I=Math.max(Gx,Math.min(np,I))];OZ(X,J,e,t,n,r)?(b||(u.lineStart(),u.point(X[0],X[1])),u.point(J[0],J[1]),W||u.lineEnd(),S=!1):W&&(u.lineStart(),u.point(N,I),S=!1)}y=N,C=I,b=W}return w}}function PZ(e,t,n){var r=Wn(e,t-me,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function $Z(e,t,n){var r=Wn(e,t-me,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function Wx(){var e,t,n,r,i,o,a,s,c=10,l=c,u=90,f=360,d,p,h,m,g=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return Wn(Y7(r/u)*u,n,u).map(h).concat(Wn(Y7(s/f)*f,a,f).map(m)).concat(Wn(Y7(t/c)*c,e,c).filter(function(C){return Fe(C%u)>me}).map(d)).concat(Wn(Y7(o/l)*l,i,l).filter(function(C){return Fe(C%f)>me}).map(p))}return v.lines=function(){return y().map(function(C){return{type:"LineString",coordinates:C}})},v.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(m(a).slice(1),h(n).reverse().slice(1),m(s).reverse().slice(1))]}},v.extent=function(C){return arguments.length?v.extentMajor(C).extentMinor(C):v.extentMinor()},v.extentMajor=function(C){return arguments.length?(r=+C[0][0],n=+C[1][0],s=+C[0][1],a=+C[1][1],r>n&&(C=r,r=n,n=C),s>a&&(C=s,s=a,a=C),v.precision(g)):[[r,s],[n,a]]},v.extentMinor=function(C){return arguments.length?(t=+C[0][0],e=+C[1][0],o=+C[0][1],i=+C[1][1],t>e&&(C=t,t=e,e=C),o>i&&(C=o,o=i,i=C),v.precision(g)):[[t,o],[e,i]]},v.step=function(C){return arguments.length?v.stepMajor(C).stepMinor(C):v.stepMinor()},v.stepMajor=function(C){return arguments.length?(u=+C[0],f=+C[1],v):[u,f]},v.stepMinor=function(C){return arguments.length?(c=+C[0],l=+C[1],v):[c,l]},v.precision=function(C){return arguments.length?(g=+C,d=PZ(o,i,90),p=$Z(t,e,g),h=PZ(s,a,90),m=$Z(r,n,g),v):g},v.extentMajor([[-180,-90+me],[180,90-me]]).extentMinor([[-180,-80-me],[180,80+me]])}var c4=e=>e;var r_=new vn,i_=new vn,BZ,UZ,o_,a_,l4={point:dn,lineStart:dn,lineEnd:dn,polygonStart:function(){l4.lineStart=fbe,l4.lineEnd=pbe},polygonEnd:function(){l4.lineStart=l4.lineEnd=l4.point=dn,r_.add(Fe(i_)),i_=new vn},result:function(){var e=r_/2;return r_=new vn,e}};function fbe(){l4.point=dbe}function dbe(e,t){l4.point=jZ,BZ=o_=e,UZ=a_=t}function jZ(e,t){i_.add(a_*e-o_*t),o_=e,a_=t}function pbe(){jZ(BZ,UZ)}var s_=l4;var Uu=1/0,Yx=Uu,ip=-Uu,Xx=ip,hbe={point:mbe,lineStart:dn,lineEnd:dn,polygonStart:dn,polygonEnd:dn,result:function(){var e=[[Uu,Yx],[ip,Xx]];return ip=Xx=-(Yx=Uu=1/0),e}};function mbe(e,t){e<Uu&&(Uu=e),e>ip&&(ip=e),t<Yx&&(Yx=t),t>Xx&&(Xx=t)}var ju=hbe;var c_=0,l_=0,op=0,Qx=0,Kx=0,qu=0,u_=0,f_=0,ap=0,WZ,YZ,is,os,U2={point:r0,lineStart:qZ,lineEnd:GZ,polygonStart:function(){U2.lineStart=ybe,U2.lineEnd=xbe},polygonEnd:function(){U2.point=r0,U2.lineStart=qZ,U2.lineEnd=GZ},result:function(){var e=ap?[u_/ap,f_/ap]:qu?[Qx/qu,Kx/qu]:op?[c_/op,l_/op]:[NaN,NaN];return c_=l_=op=Qx=Kx=qu=u_=f_=ap=0,e}};function r0(e,t){c_+=e,l_+=t,++op}function qZ(){U2.point=gbe}function gbe(e,t){U2.point=vbe,r0(is=e,os=t)}function vbe(e,t){var n=e-is,r=t-os,i=Ut(n*n+r*r);Qx+=i*(is+e)/2,Kx+=i*(os+t)/2,qu+=i,r0(is=e,os=t)}function GZ(){U2.point=r0}function ybe(){U2.point=Cbe}function xbe(){XZ(WZ,YZ)}function Cbe(e,t){U2.point=XZ,r0(WZ=is=e,YZ=os=t)}function XZ(e,t){var n=e-is,r=t-os,i=Ut(n*n+r*r);Qx+=i*(is+e)/2,Kx+=i*(os+t)/2,qu+=i,i=os*e-is*t,u_+=i*(is+e),f_+=i*(os+t),ap+=i*3,r0(is=e,os=t)}var d_=U2;function Zx(e){this._context=e}Zx.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Yn);break}}},result:dn};var h_=new vn,p_,QZ,KZ,sp,cp,Jx={point:dn,lineStart:function(){Jx.point=bbe},lineEnd:function(){p_&&ZZ(QZ,KZ),Jx.point=dn},polygonStart:function(){p_=!0},polygonEnd:function(){p_=null},result:function(){var e=+h_;return h_=new vn,e}};function bbe(e,t){Jx.point=ZZ,QZ=sp=e,KZ=cp=t}function ZZ(e,t){sp-=e,cp-=t,h_.add(Ut(sp*sp+cp*cp)),sp=e,cp=t}var m_=Jx;var JZ,eC,eJ,tJ,lp=class{constructor(t){this._append=t==null?nJ:Mbe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==eJ||this._append!==eC){let r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,eJ=r,eC=this._append,tJ=this._,this._=i}this._+=tJ;break}}}result(){let t=this._;return this._="",t.length?t:null}};function nJ(e){let t=1;this._+=e[0];for(let n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Mbe(e){let t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return nJ;if(t!==JZ){let n=10**t;JZ=t,eC=function(i){let o=1;this._+=i[0];for(let a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return eC}function tC(e,t){let n=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),I1(s,i(o))),o.result()}return a.area=function(s){return I1(s,i(s_)),s_.result()},a.measure=function(s){return I1(s,i(m_)),m_.result()},a.bounds=function(s){return I1(s,i(ju)),ju.result()},a.centroid=function(s){return I1(s,i(d_)),d_.result()},a.projection=function(s){return arguments.length?(i=s==null?(e=null,c4):(e=s).stream,a):e},a.context=function(s){return arguments.length?(o=s==null?(t=null,new lp(n)):new Zx(t=s),typeof r!="function"&&o.pointRadius(r),a):t},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{let c=Math.floor(s);if(!(c>=0))throw new RangeError(`invalid digits: ${s}`);n=c}return t===null&&(o=new lp(n)),a},a.projection(e).digits(n).context(t)}function i0(e){return function(t){var n=new g_;for(var r in e)n[r]=e[r];return n.stream=t,n}}function g_(){}g_.prototype={constructor:g_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function v_(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),I1(n,e.stream(ju)),t(ju.result()),r!=null&&e.clipExtent(r),e}function o0(e,t,n){return v_(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,c=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,c])},n)}function Gu(e,t,n){return o0(e,[[0,0],t],n)}function Wu(e,t,n){return v_(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];e.scale(150*o).translate([a,s])},n)}function Yu(e,t,n){return v_(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,s])},n)}var rJ=16,wbe=pe(30*Re);function y_(e,t){return+t?Ebe(e,t):Sbe(e)}function Sbe(e){return i0({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Ebe(e,t){function n(r,i,o,a,s,c,l,u,f,d,p,h,m,g){var v=l-r,y=u-i,C=v*v+y*y;if(C>4*t&&m--){var b=a+d,M=s+p,S=c+h,w=Ut(b*b+M*M+S*S),E=fn(S/=w),D=Fe(Fe(S)-1)<me||Fe(o-f)<me?(o+f)/2:Tn(M,b),L=e(D,E),A=L[0],j=L[1],V=A-r,_=j-i,N=y*V-v*_;(N*N/C>t||Fe((v*V+y*_)/C-.5)>.3||a*d+s*p+c*h<wbe)&&(n(r,i,o,a,s,c,A,j,D,b/=w,M/=w,S,m,g),g.point(A,j),n(A,j,D,b,M,S,l,u,f,d,p,h,m,g))}}return function(r){var i,o,a,s,c,l,u,f,d,p,h,m,g={point:v,lineStart:y,lineEnd:b,polygonStart:function(){r.polygonStart(),g.lineStart=M},polygonEnd:function(){r.polygonEnd(),g.lineStart=y}};function v(E,D){E=e(E,D),r.point(E[0],E[1])}function y(){f=NaN,g.point=C,r.lineStart()}function C(E,D){var L=e2([E,D]),A=e(E,D);n(f,d,u,p,h,m,f=A[0],d=A[1],u=E,p=L[0],h=L[1],m=L[2],rJ,r),r.point(f,d)}function b(){g.point=v,r.lineEnd()}function M(){y(),g.point=S,g.lineEnd=w}function S(E,D){C(i=E,D),o=f,a=d,s=p,c=h,l=m,g.point=C}function w(){n(f,d,u,p,h,m,o,a,i,s,c,l,rJ,r),g.lineEnd=b,b()}return g}}var Dbe=i0({point:function(e,t){this.stream.point(e*Re,t*Re)}});function zbe(e){return i0({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Hbe(e,t,n,r,i){function o(a,s){return a*=r,s*=i,[t+e*a,n-e*s]}return o.invert=function(a,s){return[(a-t)/e*r,(n-s)/e*i]},o}function iJ(e,t,n,r,i,o){if(!o)return Hbe(e,t,n,r,i);var a=pe(o),s=fe(o),c=a*e,l=s*e,u=a/e,f=s/e,d=(s*n-a*t)/e,p=(s*t+a*n)/e;function h(m,g){return m*=r,g*=i,[c*m-l*g+t,n-l*m-c*g]}return h.invert=function(m,g){return[r*(u*m-f*g+d),i*(p-f*m-u*g)]},h}function Fn(e){return nC(function(){return e})()}function nC(e){var t,n=150,r=480,i=250,o=0,a=0,s=0,c=0,l=0,u,f=0,d=1,p=1,h=null,m=n_,g=null,v,y,C,b=c4,M=.5,S,w,E,D,L;function A(N){return E(N[0]*Re,N[1]*Re)}function j(N){return N=E.invert(N[0],N[1]),N&&[N[0]*Bt,N[1]*Bt]}A.stream=function(N){return D&&L===N?D:D=Dbe(zbe(u)(m(S(b(L=N)))))},A.preclip=function(N){return arguments.length?(m=N,h=void 0,_()):m},A.postclip=function(N){return arguments.length?(b=N,g=v=y=C=null,_()):b},A.clipAngle=function(N){return arguments.length?(m=+N?RZ(h=N*Re):(h=null,n_),_()):h*Bt},A.clipExtent=function(N){return arguments.length?(b=N==null?(g=v=y=C=null,c4):rp(g=+N[0][0],v=+N[0][1],y=+N[1][0],C=+N[1][1]),_()):g==null?null:[[g,v],[y,C]]},A.scale=function(N){return arguments.length?(n=+N,V()):n},A.translate=function(N){return arguments.length?(r=+N[0],i=+N[1],V()):[r,i]},A.center=function(N){return arguments.length?(o=N[0]%360*Re,a=N[1]%360*Re,V()):[o*Bt,a*Bt]},A.rotate=function(N){return arguments.length?(s=N[0]%360*Re,c=N[1]%360*Re,l=N.length>2?N[2]%360*Re:0,V()):[s*Bt,c*Bt,l*Bt]},A.angle=function(N){return arguments.length?(f=N%360*Re,V()):f*Bt},A.reflectX=function(N){return arguments.length?(d=N?-1:1,V()):d<0},A.reflectY=function(N){return arguments.length?(p=N?-1:1,V()):p<0},A.precision=function(N){return arguments.length?(S=y_(w,M=N*N),_()):Ut(M)},A.fitExtent=function(N,I){return o0(A,N,I)},A.fitSize=function(N,I){return Gu(A,N,I)},A.fitWidth=function(N,I){return Wu(A,N,I)},A.fitHeight=function(N,I){return Yu(A,N,I)};function V(){var N=iJ(n,0,0,d,p,f).apply(null,t(o,a)),I=iJ(n,r-N[0],i-N[1],d,p,f);return u=e_(s,c,l),w=tp(t,I),E=tp(u,w),S=y_(w,M),_()}function _(){return D=L=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&j,V()}}function Xu(e){var t=0,n=$e/3,r=nC(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Re,n=o[1]*Re):[t*Bt,n*Bt]},i}function oJ(e){var t=pe(e);function n(r,i){return[r*t,fe(i)/t]}return n.invert=function(r,i){return[r/t,fn(i*t)]},n}function aJ(e,t){var n=fe(e),r=(n+fe(t))/2;if(Fe(r)<me)return oJ(e);var i=1+n*(2*r-n),o=Ut(i)/r;function a(s,c){var l=Ut(i-2*r*fe(c))/r;return[l*fe(s*=r),o-l*pe(s)]}return a.invert=function(s,c){var l=o-c,u=Tn(s,Fe(l))*Ai(l);return l*r<0&&(u-=$e*Ai(s)*Ai(l)),[u/r,fn((i-(s*s+l*l)*r*r)/(2*r))]},a}function u4(){return Xu(aJ).scale(155.424).center([0,33.6442])}function up(){return u4().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Lbe(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function x_(){var e,t,n=up(),r,i=u4().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=u4().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,c,l={point:function(d,p){c=[d,p]}};function u(d){var p=d[0],h=d[1];return c=null,r.point(p,h),c||(o.point(p,h),c)||(s.point(p,h),c)}u.invert=function(d){var p=n.scale(),h=n.translate(),m=(d[0]-h[0])/p,g=(d[1]-h[1])/p;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(d)},u.stream=function(d){return e&&t===d?e:e=Lbe([n.stream(t=d),i.stream(d),a.stream(d)])},u.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),a.precision(d),f()):n.precision()},u.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),a.scale(d),u.translate(n.translate())):n.scale()},u.translate=function(d){if(!arguments.length)return n.translate();var p=n.scale(),h=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[h-.455*p,m-.238*p],[h+.455*p,m+.238*p]]).stream(l),o=i.translate([h-.307*p,m+.201*p]).clipExtent([[h-.425*p+me,m+.12*p+me],[h-.214*p-me,m+.234*p-me]]).stream(l),s=a.translate([h-.205*p,m+.212*p]).clipExtent([[h-.214*p+me,m+.166*p+me],[h-.115*p-me,m+.234*p-me]]).stream(l),f()},u.fitExtent=function(d,p){return o0(u,d,p)},u.fitSize=function(d,p){return Gu(u,d,p)},u.fitWidth=function(d,p){return Wu(u,d,p)},u.fitHeight=function(d,p){return Yu(u,d,p)};function f(){return e=t=null,u}return u.scale(1070)}function rC(e){return function(t,n){var r=pe(t),i=pe(n),o=e(r*i);return o===1/0?[2,0]:[o*i*fe(t),o*fe(n)]}}function as(e){return function(t,n){var r=Ut(t*t+n*n),i=e(r),o=fe(i),a=pe(i);return[Tn(t*o,r*a),fn(r&&n*o/r)]}}var C_=rC(function(e){return Ut(2/(1+e))});C_.invert=as(function(e){return 2*fn(e/2)});function b_(){return Fn(C_).scale(124.75).clipAngle(180-.001)}var M_=rC(function(e){return(e=Vx(e))&&e/fe(e)});M_.invert=as(function(e){return e});function w_(){return Fn(M_).scale(79.4188).clipAngle(180-.001)}function Qu(e,t){return[e,Jl(Pu(($t+t)/2))]}Qu.invert=function(e,t){return[e,2*Jo(Hx(t))-$t]};function S_(){return E_(Qu).scale(961/Yn)}function E_(e){var t=Fn(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,s,c,l;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?a=s=c=l=null:(a=+f[0][0],s=+f[0][1],c=+f[1][0],l=+f[1][1]),u()):a==null?null:[[a,s],[c,l]]};function u(){var f=$e*r(),d=t(_Z(t.rotate()).invert([0,0]));return o(a==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===Qu?[[Math.max(d[0]-f,a),s],[Math.min(d[0]+f,c),l]]:[[a,Math.max(d[1]-f,s)],[c,Math.min(d[1]+f,l)]])}return u()}function iC(e){return Pu(($t+e)/2)}function sJ(e,t){var n=pe(e),r=e===t?fe(e):Jl(n/pe(t))/Jl(iC(t)/iC(e)),i=n*Ax(iC(e),r)/r;if(!r)return Qu;function o(a,s){i>0?s<-$t+me&&(s=-$t+me):s>$t-me&&(s=$t-me);var c=i/Ax(iC(s),r);return[c*fe(r*a),i-c*pe(r*a)]}return o.invert=function(a,s){var c=i-s,l=Ai(r)*Ut(a*a+c*c),u=Tn(a,Fe(c))*Ai(c);return c*r<0&&(u-=$e*Ai(a)*Ai(c)),[u/r,2*Jo(Ax(i/l,1/r))-$t]},o}function D_(){return Xu(sJ).scale(109.5).parallels([30,30])}function Ku(e,t){return[e,t]}Ku.invert=Ku;function z_(){return Fn(Ku).scale(152.63)}function cJ(e,t){var n=pe(e),r=e===t?fe(e):(n-pe(t))/(t-e),i=n/r+e;if(Fe(r)<me)return Ku;function o(a,s){var c=i-s,l=r*a;return[c*fe(l),i-c*pe(l)]}return o.invert=function(a,s){var c=i-s,l=Tn(a,Fe(c))*Ai(c);return c*r<0&&(l-=$e*Ai(a)*Ai(c)),[l/r,i-Ai(r)*Ut(a*a+c*c)]},o}function H_(){return Xu(cJ).scale(131.154).center([0,13.9389])}var fp=1.340264,dp=-.081106,pp=893e-6,hp=.003796,oC=Ut(3)/2,Abe=12;function L_(e,t){var n=fn(oC*fe(t)),r=n*n,i=r*r*r;return[e*pe(n)/(oC*(fp+3*dp*r+i*(7*pp+9*hp*r))),n*(fp+dp*r+i*(pp+hp*r))]}L_.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,s,c;o<Abe&&(s=n*(fp+dp*r+i*(pp+hp*r))-t,c=fp+3*dp*r+i*(7*pp+9*hp*r),n-=a=s/c,r=n*n,i=r*r*r,!(Fe(a)<Zl));++o);return[oC*e*(fp+3*dp*r+i*(7*pp+9*hp*r))/pe(n),fn(fe(n)/oC)]};function A_(){return Fn(L_).scale(177.158)}function V_(e,t){var n=pe(t),r=pe(e)*n;return[n*fe(e)/r,fe(t)/r]}V_.invert=as(Jo);function N_(){return Fn(V_).scale(144.049).clipAngle(60)}function __(){var e=1,t=0,n=0,r=1,i=1,o=0,a,s,c=null,l,u,f,d=1,p=1,h=i0({point:function(b,M){var S=C([b,M]);this.stream.point(S[0],S[1])}}),m=c4,g,v;function y(){return d=e*r,p=e*i,g=v=null,C}function C(b){var M=b[0]*d,S=b[1]*p;if(o){var w=S*a-M*s;M=M*a+S*s,S=w}return[M+t,S+n]}return C.invert=function(b){var M=b[0]-t,S=b[1]-n;if(o){var w=S*a+M*s;M=M*a-S*s,S=w}return[M/d,S/p]},C.stream=function(b){return g&&v===b?g:g=h(m(v=b))},C.postclip=function(b){return arguments.length?(m=b,c=l=u=f=null,y()):m},C.clipExtent=function(b){return arguments.length?(m=b==null?(c=l=u=f=null,c4):rp(c=+b[0][0],l=+b[0][1],u=+b[1][0],f=+b[1][1]),y()):c==null?null:[[c,l],[u,f]]},C.scale=function(b){return arguments.length?(e=+b,y()):e},C.translate=function(b){return arguments.length?(t=+b[0],n=+b[1],y()):[t,n]},C.angle=function(b){return arguments.length?(o=b%360*Re,s=fe(o),a=pe(o),y()):o*Bt},C.reflectX=function(b){return arguments.length?(r=b?-1:1,y()):r<0},C.reflectY=function(b){return arguments.length?(i=b?-1:1,y()):i<0},C.fitExtent=function(b,M){return o0(C,b,M)},C.fitSize=function(b,M){return Gu(C,b,M)},C.fitWidth=function(b,M){return Wu(C,b,M)},C.fitHeight=function(b,M){return Yu(C,b,M)},C}function k_(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}k_.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,a=o*o;n-=i=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(Fe(i)>me&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function T_(){return Fn(k_).scale(175.295)}function I_(e,t){return[pe(t)*fe(e),fe(t)]}I_.invert=as(fn);function F_(){return Fn(I_).scale(249.5).clipAngle(90+me)}function R_(e,t){var n=pe(t),r=1+pe(e)*n;return[n*fe(e)/r,fe(t)/r]}R_.invert=as(function(e){return 2*Jo(e)});function O_(){return Fn(R_).scale(250).clipAngle(142)}function P_(e,t){return[Jl(Pu(($t+t)/2)),-e]}P_.invert=function(e,t){return[-t,2*Jo(Hx(e))-$t]};function $_(){var e=E_(P_),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var lJ=Math.abs;var sC=Math.cos;var mp=Math.sin;var uJ=1e-6;var f4=Math.PI,aC=f4/2,wat=f4/4;var B_=fJ(2),Sat=fJ(f4),Eat=f4*2,Dat=180/f4,zat=f4/180;function U_(e){return e>1?aC:e<-1?-aC:Math.asin(e)}function fJ(e){return e>0?Math.sqrt(e):0}function Vbe(e,t){var n=e*mp(t),r=30,i;do t-=i=(t+mp(t)-n)/(1+sC(t));while(lJ(i)>uJ&&--r>0);return t/2}function Nbe(e,t,n){function r(i,o){return[e*i*sC(o=Vbe(n,o)),t*mp(o)]}return r.invert=function(i,o){return o=U_(o/t),[i/(e*sC(o)),U_((2*o+mp(2*o))/n)]},r}var dJ=Nbe(B_/aC,B_,f4);function j_(){return Fn(dJ).scale(169.529)}var _be=tC(),lC=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function kbe(e,t){return function n(){let r=t();return r.type=e,r.path=tC().projection(r),r.copy=r.copy||function(){let i=n();return lC.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},CV(r)}}function gp(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(cC[e]=kbe(e,t),this):cC[e]||null}function q_(e){return e&&e.path||_be}var cC={albers:up,albersusa:x_,azimuthalequalarea:b_,azimuthalequidistant:w_,conicconformal:D_,conicequalarea:u4,conicequidistant:H_,equalEarth:A_,equirectangular:z_,gnomonic:N_,identity:__,mercator:S_,mollweide:j_,naturalEarth1:T_,orthographic:F_,stereographic:O_,transversemercator:$_};for(let e in cC)gp(e,cC[e]);function Tbe(){}var Sc=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function mJ(){var e=1,t=1,n=s;function r(c,l){return l.map(u=>i(c,u))}function i(c,l){var u=[],f=[];return o(c,l,d=>{n(d,c,l),Ibe(d)>0?u.push([d]):f.push(d)}),f.forEach(d=>{for(var p=0,h=u.length,m;p<h;++p)if(Fbe((m=u[p])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:u}}function o(c,l,u){var f=new Array,d=new Array,p,h,m,g,v,y;for(p=h=-1,g=c[0]>=l,Sc[g<<1].forEach(C);++p<e-1;)m=g,g=c[p+1]>=l,Sc[m|g<<1].forEach(C);for(Sc[g<<0].forEach(C);++h<t-1;){for(p=-1,g=c[h*e+e]>=l,v=c[h*e]>=l,Sc[g<<1|v<<2].forEach(C);++p<e-1;)m=g,g=c[h*e+e+p+1]>=l,y=v,v=c[h*e+p+1]>=l,Sc[m|g<<1|v<<2|y<<3].forEach(C);Sc[g|v<<3].forEach(C)}for(p=-1,v=c[h*e]>=l,Sc[v<<2].forEach(C);++p<e-1;)y=v,v=c[h*e+p+1]>=l,Sc[v<<2|y<<3].forEach(C);Sc[v<<3].forEach(C);function C(b){var M=[b[0][0]+p,b[0][1]+h],S=[b[1][0]+p,b[1][1]+h],w=a(M),E=a(S),D,L;(D=d[w])?(L=f[E])?(delete d[D.end],delete f[L.start],D===L?(D.ring.push(S),u(D.ring)):f[D.start]=d[L.end]={start:D.start,end:L.end,ring:D.ring.concat(L.ring)}):(delete d[D.end],D.ring.push(S),d[D.end=E]=D):(D=f[E])?(L=d[w])?(delete f[D.start],delete d[L.end],D===L?(D.ring.push(S),u(D.ring)):f[L.start]=d[D.end]={start:L.start,end:D.end,ring:L.ring.concat(D.ring)}):(delete f[D.start],D.ring.unshift(M),f[D.start=w]=D):f[w]=d[E]={start:w,end:E,ring:[M,S]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function s(c,l,u){c.forEach(f=>{var d=f[0],p=f[1],h=d|0,m=p|0,g,v=l[m*e+h];d>0&&d<e&&h===d&&(g=l[m*e+h-1],f[0]=d+(u-g)/(v-g)-.5),p>0&&p<t&&m===p&&(g=l[(m-1)*e+h],f[1]=p+(u-g)/(v-g)-.5)})}return r.contour=i,r.size=function(c){if(!arguments.length)return[e,t];var l=Math.floor(c[0]),u=Math.floor(c[1]);return l>=0&&u>=0||B("invalid size"),e=l,t=u,r},r.smooth=function(c){return arguments.length?(n=c?s:Tbe,r):n===s},r}function Ibe(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Fbe(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Rbe(e,t[n]))return i;return 0}function Rbe(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var c=e[o],l=c[0],u=c[1],f=e[s],d=f[0],p=f[1];if(Obe(c,f,t))return 0;u>r!=p>r&&n<(d-l)*(r-u)/(p-u)+l&&(i=-i)}return i}function Obe(e,t,n){var r;return Pbe(e,t,n)&&$be(e[r=+(e[0]===t[0])],n[r],t[r])}function Pbe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function $be(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function gJ(e,t,n){return function(r){var i=Zi(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,c=t?Ji(o,a,e):s/(e+1);return Wn(o+c,a,c)}}function Y_(e){$.call(this,null,e)}Y_.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ee(Y_,$,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||_n,o=mJ().smooth(e.smooth!==!1),a=e.thresholds||Bbe(r,i,e),s=e.as===null?null:e.as||"contour",c=[];return r.forEach(l=>{let u=i(l),f=o.size([u.width,u.height])(u.values,F(a)?a:a(u.values));Ube(f,u,l,e),f.forEach(d=>{c.push(zl(l,ct(s!=null?{[s]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function Bbe(e,t,n){let r=gJ(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Bo(t(i).values)))}function Ube(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Ie(i)&&(i=i(n,r)),Ie(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;let a=(Oe(i)?i:i[0])||1,s=(Oe(i)?i:i[1])||1,c=o&&o[0]||0,l=o&&o[1]||0;e.forEach(vJ(t,a,s,c,l))}function vJ(e,t,n,r,i){let o=e.x1||0,a=e.y1||0,s=t*n<0;function c(f){f.forEach(l)}function l(f){s&&f.reverse(),f.forEach(u)}function u(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-a)*n+i}return function(f){return f.coordinates.forEach(c),f}}function pJ(e,t,n){let r=e>=0?e:Iv(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function G_(e){return Ie(e)?e:gn(+e)}function yJ(){var e=c=>c[0],t=c=>c[1],n=Pa,r=[-1,-1],i=960,o=500,a=2;function s(c,l){let u=pJ(r[0],c,e)>>a,f=pJ(r[1],c,t)>>a,d=u?u+2:0,p=f?f+2:0,h=2*d+(i>>a),m=2*p+(o>>a),g=new Float32Array(h*m),v=new Float32Array(h*m),y=g;c.forEach(b=>{let M=d+(+e(b)>>a),S=p+(+t(b)>>a);M>=0&&M<h&&S>=0&&S<m&&(g[M+S*h]+=+n(b))}),u>0&&f>0?(Zu(h,m,g,v,u),Ju(h,m,v,g,f),Zu(h,m,g,v,u),Ju(h,m,v,g,f),Zu(h,m,g,v,u),Ju(h,m,v,g,f)):u>0?(Zu(h,m,g,v,u),Zu(h,m,v,g,u),Zu(h,m,g,v,u),y=v):f>0&&(Ju(h,m,g,v,f),Ju(h,m,v,g,f),Ju(h,m,g,v,f),y=v);let C=l?Math.pow(2,-2*a):1/tu(y);for(let b=0,M=h*m;b<M;++b)y[b]*=C;return{values:y,scale:1<<a,width:h,height:m,x1:d,y1:p,x2:d+(i>>a),y2:p+(o>>a)}}return s.x=function(c){return arguments.length?(e=G_(c),s):e},s.y=function(c){return arguments.length?(t=G_(c),s):t},s.weight=function(c){return arguments.length?(n=G_(c),s):n},s.size=function(c){if(!arguments.length)return[i,o];var l=+c[0],u=+c[1];return l>=0&&u>=0||B("invalid size"),i=l,o=u,s},s.cellSize=function(c){return arguments.length?((c=+c)>=1||B("invalid cell size"),a=Math.floor(Math.log(c)/Math.LN2),s):1<<a},s.bandwidth=function(c){return arguments.length?(c=te(c),c.length===1&&(c=[+c[0],+c[0]]),c.length!==2&&B("invalid bandwidth"),r=c,s):r},s}function Zu(e,t,n,r,i){let o=(i<<1)+1;for(let a=0;a<t;++a)for(let s=0,c=0;s<e+i;++s)s<e&&(c+=n[s+a*e]),s>=i&&(s>=o&&(c-=n[s-o+a*e]),r[s-i+a*e]=c/Math.min(s+1,e-1+o-s,o))}function Ju(e,t,n,r,i){let o=(i<<1)+1;for(let a=0;a<e;++a)for(let s=0,c=0;s<t+i;++s)s<t&&(c+=n[a+s*e]),s>=i&&(s>=o&&(c-=n[a+(s-o)*e]),r[a+(s-i)*e]=c/Math.min(s+1,t-1+o-s,o))}function X_(e){$.call(this,null,e)}X_.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var jbe=["x","y","weight","size","cellSize","bandwidth"];function xJ(e,t){return jbe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ee(X_,$,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=qbe(r,e.groupby),o=(e.groupby||[]).map(un),a=xJ(yJ(),e),s=e.as||"grid",c=[];function l(u,f){for(let d=0;d<o.length;++d)u[o[d]]=f[d];return u}return c=i.map(u=>ct(l({[s]:a(u,e.counts)},u.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function qbe(e,t){var n=[],r=u=>u(s),i,o,a,s,c,l;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],c=t.map(r),l=i[c],l||(i[c]=l=[],l.dims=c,n.push(l)),l.push(s);return n}function Q_(e){$.call(this,null,e)}Q_.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ee(Q_,$,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=mJ().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||gJ(e.count||10,e.nice,!!i),a=e.size,s,c;return i||(i=t.materialize(t.SOURCE).source,s=xJ(yJ(),e)(i,!0),c=vJ(s,s.scale||1,s.scale||1,0,0),a=[s.width,s.height],i=s.values),o=F(o)?o:o(i),i=r.size(a)(i,o),c&&i.forEach(c),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(ct),n}});var W_="Feature",K_="FeatureCollection",Gbe="MultiPoint";function Z_(e){$.call(this,null,e)}Z_.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ee(Z_,$,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],a=i&&i[1],s=e.geojson||!i&&_n,c=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(pr(s))||o&&t.modified(pr(o))||a&&t.modified(pr(a)),(!this.value||l)&&(c=t.SOURCE,this._features=n=[],this._points=r=[]),s&&t.visit(c,u=>n.push(s(u))),o&&a&&(t.visit(c,u=>{var f=o(u),d=a(u);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:W_,geometry:{type:Gbe,coordinates:r}})),this.value={type:K_,features:n}}});function J_(e){$.call(this,null,e)}J_.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ee(J_,$,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||_n,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=q_(e.projection),n.materialize().reflow()):a=i===_n||t.modified(i.fields)?n.ADD_MOD:n.ADD;let s=Wbe(r,e.pointRadius);return n.visit(a,c=>c[o]=r(i(c))),r.pointRadius(s),n.modifies(o)}});function Wbe(e,t){let n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function ek(e){$.call(this,null,e)}ek.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ee(ek,$,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],a=o[0],s=o[1],c;function l(u){let f=n([r(u),i(u)]);f?(u[a]=f[0],u[s]=f[1]):(u[a]=void 0,u[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(c=t.modified(r.fields)||t.modified(i.fields),t.visit(c?t.ADD_MOD:t.ADD,l)),t.modifies(o)}});function tk(e){$.call(this,null,e)}tk.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ee(tk,$,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=Ybe(q_(e.projection),e.field||Dr("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,a=>a[i]=r),n.modifies(i)}});function Ybe(e,t,n){let r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),a=e.pointRadius(n)(t(i));return e.pointRadius(o),a};return r.context=i=>(e.context(i),r),r}function nk(e){$.call(this,[],e),this.generator=Wx()}nk.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ee(nk,$,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(let o in e)Ie(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(Vv(n[0],i)):t.add.push(ct(i)),n[0]=i,t}});function rk(e){$.call(this,null,e)}rk.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ee(rk,$,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||_n,o=Qbe(e.opacity,e),a=Xbe(e.color,e),s=e.as||"image",c={$x:0,$y:0,$value:0,$max:r?Bo(n.map(l=>Bo(i(l).values))):0};return n.forEach(l=>{let u=i(l),f=Te({},l,c);r||(f.$max=Bo(u.values||[])),l[s]=Kbe(u,f,a.dep?a:gn(a(f)),o.dep?o:gn(o(f)))}),t.reflow(!0).modifies(s)}});function Xbe(e,t){let n;return Ie(e)?(n=r=>Xo(e(r,t)),n.dep=CJ(e)):n=gn(Xo(e||"#888")),n}function Qbe(e,t){let n;return Ie(e)?(n=r=>e(r,t),n.dep=CJ(e)):e?n=gn(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function CJ(e){if(!Ie(e))return!1;let t=mr(pr(e));return t.$x||t.$y||t.$value||t.$max}function Kbe(e,t,n,r){let i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,c=e.x2||i,l=e.y2||o,u=e.values,f=u?g=>u[g]:L2,d=Yo(c-a,l-s),p=d.getContext("2d"),h=p.getImageData(0,0,c-a,l-s),m=h.data;for(let g=s,v=0;g<l;++g){t.$y=g-s;for(let y=a,C=g*i;y<c;++y,v+=4){t.$x=y-a,t.$value=f(y+C);let b=n(t);m[v+0]=b.r,m[v+1]=b.g,m[v+2]=b.b,m[v+3]=~~(255*r(t))}}return p.putImageData(h,0,0),d}function bJ(e){$.call(this,null,e),this.modified(!0)}ee(bJ,$,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Jbe(e.type),lC.forEach(r=>{e[r]!=null&&hJ(n,r,e[r])})):lC.forEach(r=>{e.modified(r)&&hJ(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Zbe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Zbe(e,t){let n=eMe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Jbe(e){let t=gp((e||"mercator").toLowerCase());return t||B("Unrecognized projection type: "+e),t()}function hJ(e,t,n){Ie(e[t])&&e[t](n)}function eMe(e){return e=te(e),e.length===1?e[0]:{type:K_,features:e.reduce((t,n)=>t.concat(tMe(n)),[])}}function tMe(e){return e.type===K_?e.features:te(e).filter(t=>t!=null).map(t=>t.type===W_?t:{type:W_,geometry:t})}var yk={};Mr(yk,{force:()=>vk});function ok(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,a=n.length,s,c=0,l=0;for(o=0;o<a;++o)s=n[o],c+=s.x,l+=s.y;for(c=(c/a-e)*r,l=(l/a-t)*r,o=0;o<a;++o)s=n[o],s.x-=c,s.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function MJ(e){let t=+this._x.call(null,e),n=+this._y.call(null,e);return wJ(this.cover(t,n),t,n,e)}function wJ(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,a={data:r},s=e._x0,c=e._y0,l=e._x1,u=e._y1,f,d,p,h,m,g,v,y;if(!o)return e._root=a,e;for(;o.length;)if((m=t>=(f=(s+l)/2))?s=f:l=f,(g=n>=(d=(c+u)/2))?c=d:u=d,i=o,!(o=o[v=g<<1|m]))return i[v]=a,e;if(p=+e._x.call(null,o.data),h=+e._y.call(null,o.data),t===p&&n===h)return a.next=o,i?i[v]=a:e._root=a,e;do i=i?i[v]=new Array(4):e._root=new Array(4),(m=t>=(f=(s+l)/2))?s=f:l=f,(g=n>=(d=(c+u)/2))?c=d:u=d;while((v=g<<1|m)===(y=(h>=d)<<1|p>=f));return i[y]=o,i[v]=a,e}function SJ(e){var t,n,r=e.length,i,o,a=new Array(r),s=new Array(r),c=1/0,l=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=i,s[n]=o,i<c&&(c=i),i>u&&(u=i),o<l&&(l=o),o>f&&(f=o));if(c>u||l>f)return this;for(this.cover(c,l).cover(u,f),n=0;n<r;++n)wJ(this,a[n],s[n],e[n]);return this}function EJ(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a=i-n||1,s=this._root,c,l;n>e||e>=i||r>t||t>=o;)switch(l=(t<r)<<1|e<n,c=new Array(4),c[l]=s,s=c,a*=2,l){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function DJ(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function zJ(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ar(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function HJ(e,t,n){var r,i=this._x0,o=this._y0,a,s,c,l,u=this._x1,f=this._y1,d=[],p=this._root,h,m;for(p&&d.push(new Ar(p,i,o,u,f)),n==null?n=1/0:(i=e-n,o=t-n,u=e+n,f=t+n,n*=n);h=d.pop();)if(!(!(p=h.node)||(a=h.x0)>u||(s=h.y0)>f||(c=h.x1)<i||(l=h.y1)<o))if(p.length){var g=(a+c)/2,v=(s+l)/2;d.push(new Ar(p[3],g,v,c,l),new Ar(p[2],a,v,g,l),new Ar(p[1],g,s,c,v),new Ar(p[0],a,s,g,v)),(m=(t>=v)<<1|e>=g)&&(h=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=h)}else{var y=e-+this._x.call(null,p.data),C=t-+this._y.call(null,p.data),b=y*y+C*C;if(b<n){var M=Math.sqrt(n=b);i=e-M,o=t-M,u=e+M,f=t+M,r=p.data}}return r}function LJ(e){if(isNaN(u=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,a=this._x0,s=this._y0,c=this._x1,l=this._y1,u,f,d,p,h,m,g,v;if(!n)return this;if(n.length)for(;;){if((h=u>=(d=(a+c)/2))?a=d:c=d,(m=f>=(p=(s+l)/2))?s=p:l=p,t=n,!(n=n[g=m<<1|h]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,v=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[g]=o:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=o,this)}function AJ(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function VJ(){return this._root}function NJ(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function _J(e){var t=[],n,r=this._root,i,o,a,s,c;for(r&&t.push(new Ar(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,a=n.y0,s=n.x1,c=n.y1)&&r.length){var l=(o+s)/2,u=(a+c)/2;(i=r[3])&&t.push(new Ar(i,l,u,s,c)),(i=r[2])&&t.push(new Ar(i,o,u,l,c)),(i=r[1])&&t.push(new Ar(i,l,a,s,u)),(i=r[0])&&t.push(new Ar(i,o,a,l,u))}return this}function kJ(e){var t=[],n=[],r;for(this._root&&t.push(new Ar(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,c=r.x1,l=r.y1,u=(a+c)/2,f=(s+l)/2;(o=i[0])&&t.push(new Ar(o,a,s,u,f)),(o=i[1])&&t.push(new Ar(o,u,s,c,f)),(o=i[2])&&t.push(new Ar(o,a,f,u,l)),(o=i[3])&&t.push(new Ar(o,u,f,c,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function TJ(e){return e[0]}function IJ(e){return arguments.length?(this._x=e,this):this._x}function FJ(e){return e[1]}function RJ(e){return arguments.length?(this._y=e,this):this._y}function a0(e,t,n){var r=new ak(t??TJ,n??FJ,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function ak(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function OJ(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var f1=a0.prototype=ak.prototype;f1.copy=function(){var e=new ak(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=OJ(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=OJ(r));return e};f1.add=MJ;f1.addAll=SJ;f1.cover=EJ;f1.data=DJ;f1.extent=zJ;f1.find=HJ;f1.remove=LJ;f1.removeAll=AJ;f1.root=VJ;f1.size=NJ;f1.visit=_J;f1.visitAfter=kJ;f1.x=IJ;f1.y=RJ;function or(e){return function(){return e}}function j2(e){return(e()-.5)*1e-6}function nMe(e){return e.x+e.vx}function rMe(e){return e.y+e.vy}function sk(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=or(e==null?1:+e));function a(){for(var l,u=t.length,f,d,p,h,m,g,v=0;v<o;++v)for(f=a0(t,nMe,rMe).visitAfter(s),l=0;l<u;++l)d=t[l],m=n[d.index],g=m*m,p=d.x+d.vx,h=d.y+d.vy,f.visit(y);function y(C,b,M,S,w){var E=C.data,D=C.r,L=m+D;if(E){if(E.index>d.index){var A=p-E.x-E.vx,j=h-E.y-E.vy,V=A*A+j*j;V<L*L&&(A===0&&(A=j2(r),V+=A*A),j===0&&(j=j2(r),V+=j*j),V=(L-(V=Math.sqrt(V)))/V*i,d.vx+=(A*=V)*(L=(D*=D)/(g+D)),d.vy+=(j*=V)*L,E.vx-=A*(L=1-L),E.vy-=j*L)}return}return b>p+L||S<p-L||M>h+L||w<h-L}}function s(l){if(l.data)return l.r=n[l.data.index];for(var u=l.r=0;u<4;++u)l[u]&&l[u].r>l.r&&(l.r=l[u].r)}function c(){if(t){var l,u=t.length,f;for(n=new Array(u),l=0;l<u;++l)f=t[l],n[f.index]=+e(f,l,t)}}return a.initialize=function(l,u){t=l,r=u,c()},a.iterations=function(l){return arguments.length?(o=+l,a):o},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(e=typeof l=="function"?l:or(+l),c(),a):e},a}function iMe(e){return e.index}function PJ(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function ck(e){var t=iMe,n=f,r,i=or(30),o,a,s,c,l,u=1;e==null&&(e=[]);function f(g){return 1/Math.min(s[g.source.index],s[g.target.index])}function d(g){for(var v=0,y=e.length;v<u;++v)for(var C=0,b,M,S,w,E,D,L;C<y;++C)b=e[C],M=b.source,S=b.target,w=S.x+S.vx-M.x-M.vx||j2(l),E=S.y+S.vy-M.y-M.vy||j2(l),D=Math.sqrt(w*w+E*E),D=(D-o[C])/D*g*r[C],w*=D,E*=D,S.vx-=w*(L=c[C]),S.vy-=E*L,M.vx+=w*(L=1-L),M.vy+=E*L}function p(){if(a){var g,v=a.length,y=e.length,C=new Map(a.map((M,S)=>[t(M,S,a),M])),b;for(g=0,s=new Array(v);g<y;++g)b=e[g],b.index=g,typeof b.source!="object"&&(b.source=PJ(C,b.source)),typeof b.target!="object"&&(b.target=PJ(C,b.target)),s[b.source.index]=(s[b.source.index]||0)+1,s[b.target.index]=(s[b.target.index]||0)+1;for(g=0,c=new Array(y);g<y;++g)b=e[g],c[g]=s[b.source.index]/(s[b.source.index]+s[b.target.index]);r=new Array(y),h(),o=new Array(y),m()}}function h(){if(a)for(var g=0,v=e.length;g<v;++g)r[g]=+n(e[g],g,e)}function m(){if(a)for(var g=0,v=e.length;g<v;++g)o[g]=+i(e[g],g,e)}return d.initialize=function(g,v){a=g,l=v,p()},d.links=function(g){return arguments.length?(e=g,p(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(u=+g,d):u},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:or(+g),h(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:or(+g),m(),d):i},d}var oMe={value:()=>{}};function BJ(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new uC(n)}function uC(e){this._=e}function aMe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}uC.prototype=BJ.prototype={constructor:uC,on:function(e,t){var n=this._,r=aMe(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=sMe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=$J(n[i],e.name,t);else if(t==null)for(i in n)n[i]=$J(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new uC(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function sMe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function $J(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=oMe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var lk=BJ;var ef=0,yp=0,vp=0,jJ=1e3,fC,xp,dC=0,s0=0,pC=0,Cp=typeof performance=="object"&&performance.now?performance:Date,qJ=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Mp(){return s0||(qJ(cMe),s0=Cp.now()+pC)}function cMe(){s0=0}function bp(){this._call=this._time=this._next=null}bp.prototype=hC.prototype={constructor:bp,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Mp():+n)+(t==null?0:+t),!this._next&&xp!==this&&(xp?xp._next=this:fC=this,xp=this),this._call=e,this._time=n,uk()},stop:function(){this._call&&(this._call=null,this._time=1/0,uk())}};function hC(e,t,n){var r=new bp;return r.restart(e,t,n),r}function GJ(){Mp(),++ef;for(var e=fC,t;e;)(t=s0-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ef}function UJ(){s0=(dC=Cp.now())+pC,ef=yp=0;try{GJ()}finally{ef=0,uMe(),s0=0}}function lMe(){var e=Cp.now(),t=e-dC;t>jJ&&(pC-=t,dC=e)}function uMe(){for(var e,t=fC,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:fC=n);xp=e,uk(r)}function uk(e){if(!ef){yp&&(yp=clearTimeout(yp));var t=e-s0;t>24?(e<1/0&&(yp=setTimeout(UJ,e-Cp.now()-pC)),vp&&(vp=clearInterval(vp))):(vp||(dC=Cp.now(),vp=setInterval(lMe,jJ)),ef=1,qJ(UJ))}}function fk(e,t,n){var r=new bp,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,a,s){a=+a,s=s==null?Mp():+s,r._restart(function c(l){l+=i,r._restart(c,i+=a,s),o(l)},a,s)},r.restart(e,t,n),r)}function WJ(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function YJ(e){return e.x}function XJ(e){return e.y}var fMe=10,dMe=Math.PI*(3-Math.sqrt(5));function dk(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,c=hC(f),l=lk("tick","end"),u=WJ();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(c.stop(),l.call("end",t))}function d(m){var g,v=e.length,y;m===void 0&&(m=1);for(var C=0;C<m;++C)for(n+=(o-n)*i,s.forEach(function(b){b(n)}),g=0;g<v;++g)y=e[g],y.fx==null?y.x+=y.vx*=a:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=a:(y.y=y.fy,y.vy=0);return t}function p(){for(var m=0,g=e.length,v;m<g;++m){if(v=e[m],v.index=m,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var y=fMe*Math.sqrt(.5+m),C=m*dMe;v.x=y*Math.cos(C),v.y=y*Math.sin(C)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function h(m){return m.initialize&&m.initialize(e,u),m}return p(),t={tick:d,restart:function(){return c.restart(f),t},stop:function(){return c.stop(),t},nodes:function(m){return arguments.length?(e=m,p(),s.forEach(h),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(o=+m,t):o},velocityDecay:function(m){return arguments.length?(a=1-m,t):1-a},randomSource:function(m){return arguments.length?(u=m,s.forEach(h),t):u},force:function(m,g){return arguments.length>1?(g==null?s.delete(m):s.set(m,h(g)),t):s.get(m)},find:function(m,g,v){var y=0,C=e.length,b,M,S,w,E;for(v==null?v=1/0:v*=v,y=0;y<C;++y)w=e[y],b=m-w.x,M=g-w.y,S=b*b+M*M,S<v&&(E=w,v=S);return E},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function pk(){var e,t,n,r,i=or(-30),o,a=1,s=1/0,c=.81;function l(p){var h,m=e.length,g=a0(e,YJ,XJ).visitAfter(f);for(r=p,h=0;h<m;++h)t=e[h],g.visit(d)}function u(){if(e){var p,h=e.length,m;for(o=new Array(h),p=0;p<h;++p)m=e[p],o[m.index]=+i(m,p,e)}}function f(p){var h=0,m,g,v=0,y,C,b;if(p.length){for(y=C=b=0;b<4;++b)(m=p[b])&&(g=Math.abs(m.value))&&(h+=m.value,v+=g,y+=g*m.x,C+=g*m.y);p.x=y/v,p.y=C/v}else{m=p,m.x=m.data.x,m.y=m.data.y;do h+=o[m.data.index];while(m=m.next)}p.value=h}function d(p,h,m,g){if(!p.value)return!0;var v=p.x-t.x,y=p.y-t.y,C=g-h,b=v*v+y*y;if(C*C/c<b)return b<s&&(v===0&&(v=j2(n),b+=v*v),y===0&&(y=j2(n),b+=y*y),b<a&&(b=Math.sqrt(a*b)),t.vx+=v*p.value*r/b,t.vy+=y*p.value*r/b),!0;if(p.length||b>=s)return;(p.data!==t||p.next)&&(v===0&&(v=j2(n),b+=v*v),y===0&&(y=j2(n),b+=y*y),b<a&&(b=Math.sqrt(a*b)));do p.data!==t&&(C=o[p.data.index]*r/b,t.vx+=v*C,t.vy+=y*C);while(p=p.next)}return l.initialize=function(p,h){e=p,n=h,u()},l.strength=function(p){return arguments.length?(i=typeof p=="function"?p:or(+p),u(),l):i},l.distanceMin=function(p){return arguments.length?(a=p*p,l):Math.sqrt(a)},l.distanceMax=function(p){return arguments.length?(s=p*p,l):Math.sqrt(s)},l.theta=function(p){return arguments.length?(c=p*p,l):Math.sqrt(c)},l}function hk(e){var t=or(.1),n,r,i;typeof e!="function"&&(e=or(e==null?0:+e));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vx+=(i[c]-u.x)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:or(+s),a(),o):t},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:or(+s),a(),o):e},o}function mk(e){var t=or(.1),n,r,i;typeof e!="function"&&(e=or(e==null?0:+e));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vy+=(i[c]-u.y)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:or(+s),a(),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:or(+s),a(),o):e},o}var QJ={center:ok,collide:sk,nbody:pk,link:ck,x:hk,y:mk},wp="forces",gk=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],pMe=["static","iterations"],KJ=["x","y","vx","vy"];function vk(e){$.call(this,null,e)}vk.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:KJ}]};ee(vk,$,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(gk),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&ZJ(n,e,0,t)):(this.value=n=mMe(t.source,e),n.on("tick",hMe(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(pMe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){let n=t.dataflow;for(let s=this._argops,c=0,l=s.length,u;c<l;++c)if(u=s[c],!(u.name!==wp||u.op._argval.force!=="link")){for(var r=u.op._argops,i=0,o=r.length,a;i<o;++i)if(r[i].name==="links"&&(a=r[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(KJ)}});function hMe(e,t){return()=>e.touch(t).run()}function mMe(e,t){let n=dk(e),r=n.stop,i=n.restart,o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),ZJ(n,t,!0).on("end",()=>o=!0)}function ZJ(e,t,n,r){var i=te(t.forces),o,a,s,c;for(o=0,a=gk.length;o<a;++o)s=gk[o],s!==wp&&t.modified(s)&&e[s](t[s]);for(o=0,a=i.length;o<a;++o)c=wp+o,s=n||t.modified(wp,o)?vMe(i[o]):r&&gMe(i[o],r)?e.force(c):null,s&&e.force(c,s);for(a=e.numForces||0;o<a;++o)e.force(wp+o,null);return e.numForces=i.length,e}function gMe(e,t){var n,r;for(n in e)if(Ie(r=e[n])&&t.modified(pr(r)))return 1;return 0}function vMe(e){var t,n;de(QJ,e.force)||B("Unrecognized force: "+e.force),t=QJ[e.force]();for(n in e)Ie(t[n])&&yMe(t[n],e[n],e);return t}function yMe(e,t,n){e(Ie(t)?r=>t(r,n):t)}var Xk={};Mr(Xk,{nest:()=>Bk,pack:()=>Uk,partition:()=>jk,stratify:()=>qk,tree:()=>Gk,treelinks:()=>Wk,treemap:()=>Yk});function xMe(e,t){return e.parent===t.parent?1:2}function CMe(e){return e.reduce(bMe,0)/e.length}function bMe(e,t){return e+t.x}function MMe(e){return 1+e.reduce(wMe,0)}function wMe(e,t){return Math.max(e,t.y)}function SMe(e){for(var t;t=e.children;)e=t[0];return e}function EMe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function xk(){var e=xMe,t=1,n=1,r=!1;function i(o){var a,s=0;o.eachAfter(function(d){var p=d.children;p?(d.x=CMe(p),d.y=MMe(p)):(d.x=a?s+=e(d,a):0,d.y=0,a=d)});var c=SMe(o),l=EMe(o),u=c.x-e(c,l)/2,f=l.x+e(l,c)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-u)/(f-u)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function DMe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function JJ(){return this.eachAfter(DMe)}function eee(e,t){let n=-1;for(let r of this)e.call(t,r,++n,this);return this}function tee(e,t){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function nee(e,t){for(var n=this,r=[n],i=[],o,a,s,c=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)e.call(t,n,++c,this);return this}function ree(e,t){let n=-1;for(let r of this)if(e.call(t,r,++n,this))return r}function iee(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function oee(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function aee(e){for(var t=this,n=zMe(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function zMe(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function see(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function cee(){return Array.from(this)}function lee(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function uee(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*fee(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function tf(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=AMe)):t===void 0&&(t=LMe);for(var n=new Ec(e),r,i=[n],o,a,s,c;r=i.pop();)if((a=t(r.data))&&(c=(a=Array.from(a)).length))for(r.children=a,s=c-1;s>=0;--s)i.push(o=a[s]=new Ec(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(Ck)}function HMe(){return tf(this).eachBefore(VMe)}function LMe(e){return e.children}function AMe(e){return Array.isArray(e)?e[1]:null}function VMe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Ck(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Ec(e){this.data=e,this.depth=this.height=0,this.parent=null}Ec.prototype=tf.prototype={constructor:Ec,count:JJ,each:eee,eachAfter:nee,eachBefore:tee,find:ree,sum:iee,sort:oee,path:aee,ancestors:see,descendants:cee,leaves:lee,links:uee,copy:HMe,[Symbol.iterator]:fee};function nf(e){return e==null?null:bk(e)}function bk(e){if(typeof e!="function")throw new Error;return e}function Dc(){return 0}function d4(e){return function(){return e}}function dee(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function pee(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function hee(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function mee(e,t){for(var n=0,r=(e=hee(Array.from(e),t)).length,i=[],o,a;n<r;)o=e[n],a&&gee(a,o)?++n:(a=_Me(i=NMe(i,o)),n=0);return a}function NMe(e,t){var n,r;if(Mk(t,e))return[t];for(n=0;n<e.length;++n)if(mC(t,e[n])&&Mk(Sp(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(mC(Sp(e[n],e[r]),t)&&mC(Sp(e[n],t),e[r])&&mC(Sp(e[r],t),e[n])&&Mk(vee(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function mC(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function gee(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Mk(e,t){for(var n=0;n<t.length;++n)if(!gee(e,t[n]))return!1;return!0}function _Me(e){switch(e.length){case 1:return kMe(e[0]);case 2:return Sp(e[0],e[1]);case 3:return vee(e[0],e[1],e[2])}}function kMe(e){return{x:e.x,y:e.y,r:e.r}}function Sp(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,c=o-n,l=a-r,u=s-i,f=Math.sqrt(c*c+l*l);return{x:(n+o+c/f*u)/2,y:(r+a+l/f*u)/2,r:(f+i+s)/2}}function vee(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,c=t.r,l=n.x,u=n.y,f=n.r,d=r-a,p=r-l,h=i-s,m=i-u,g=c-o,v=f-o,y=r*r+i*i-o*o,C=y-a*a-s*s+c*c,b=y-l*l-u*u+f*f,M=p*h-d*m,S=(h*b-m*C)/(M*2)-r,w=(m*g-h*v)/M,E=(p*C-d*b)/(M*2)-i,D=(d*v-p*g)/M,L=w*w+D*D-1,A=2*(o+S*w+E*D),j=S*S+E*E-o*o,V=-(Math.abs(L)>1e-6?(A+Math.sqrt(A*A-4*L*j))/(2*L):j/A);return{x:r+S+w*V,y:i+E+D*V,r:V}}function yee(e,t,n){var r=e.x-t.x,i,o,a=e.y-t.y,s,c,l=r*r+a*a;l?(o=t.r+n.r,o*=o,c=e.r+n.r,c*=c,o>c?(i=(l+c-o)/(2*l),s=Math.sqrt(Math.max(0,c/l-i*i)),n.x=e.x-i*r-s*a,n.y=e.y-i*a+s*r):(i=(l+o-c)/(2*l),s=Math.sqrt(Math.max(0,o/l-i*i)),n.x=t.x+i*r-s*a,n.y=t.y+i*a+s*r)):(n.x=t.x+n.r,n.y=t.y)}function xee(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Cee(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function gC(e){this._=e,this.next=null,this.previous=null}function bee(e,t){if(!(o=(e=pee(e)).length))return 0;var n,r,i,o,a,s,c,l,u,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;yee(r,n,i=e[2]),n=new gC(n),r=new gC(r),i=new gC(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(c=3;c<o;++c){yee(n._,r._,i=e[c]),i=new gC(i),l=r.next,u=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(xee(l._,i._)){r=l,n.next=r,r.previous=n,--c;continue e}f+=l._.r,l=l.next}else{if(xee(u._,i._)){n=u,n.next=r,r.previous=n,--c;continue e}d+=u._.r,u=u.previous}while(l!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=Cee(n);(i=i.next)!==r;)(s=Cee(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=mee(n,t),c=0;c<o;++c)n=e[c],n.x-=i.x,n.y-=i.y;return i.r}function TMe(e){return Math.sqrt(e.value)}function Sk(){var e=null,t=1,n=1,r=Dc;function i(o){let a=dee();return o.x=t/2,o.y=n/2,e?o.eachBefore(Mee(e)).eachAfter(wk(r,.5,a)).eachBefore(wee(1)):o.eachBefore(Mee(TMe)).eachAfter(wk(Dc,1,a)).eachAfter(wk(r,o.r/Math.min(t,n),a)).eachBefore(wee(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=nf(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:d4(+o),i):r},i}function Mee(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function wk(e,t,n){return function(r){if(i=r.children){var i,o,a=i.length,s=e(r)*t||0,c;if(s)for(o=0;o<a;++o)i[o].r+=s;if(c=bee(i,n),s)for(o=0;o<a;++o)i[o].r-=s;r.r=c+s}}}function wee(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function vC(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function q2(e,t,n,r,i){for(var o=e.children,a,s=-1,c=o.length,l=e.value&&(r-t)/e.value;++s<c;)a=o[s],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*l}function Ek(){var e=1,t=1,n=0,r=!1;function i(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/s,a.eachBefore(o(t,s)),r&&a.eachBefore(vC),a}function o(a,s){return function(c){c.children&&q2(c,c.x0,a*(c.depth+1)/s,c.x1,a*(c.depth+2)/s);var l=c.x0,u=c.y0,f=c.x1-n,d=c.y1-n;f<l&&(l=f=(l+f)/2),d<u&&(u=d=(u+d)/2),c.x0=l,c.y0=u,c.x1=f,c.y1=d}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var IMe={depth:-1},See={},Dk={};function FMe(e){return e.id}function RMe(e){return e.parentId}function yC(){var e=FMe,t=RMe,n;function r(i){var o=Array.from(i),a=e,s=t,c,l,u,f,d,p,h,m,g=new Map;if(n!=null){let v=o.map((b,M)=>OMe(n(b,M,i))),y=v.map(Eee),C=new Set(v).add("");for(let b of y)C.has(b)||(C.add(b),v.push(b),y.push(Eee(b)),o.push(Dk));a=(b,M)=>v[M],s=(b,M)=>y[M]}for(u=0,c=o.length;u<c;++u)l=o[u],p=o[u]=new Ec(l),(h=a(l,u,i))!=null&&(h+="")&&(m=p.id=h,g.set(m,g.has(m)?See:p)),(h=s(l,u,i))!=null&&(h+="")&&(p.parent=h);for(u=0;u<c;++u)if(p=o[u],h=p.parent){if(d=g.get(h),!d)throw new Error("missing: "+h);if(d===See)throw new Error("ambiguous: "+h);d.children?d.children.push(p):d.children=[p],p.parent=d}else{if(f)throw new Error("multiple roots");f=p}if(!f)throw new Error("no root");if(n!=null){for(;f.data===Dk&&f.children.length===1;)f=f.children[0],--c;for(let v=o.length-1;v>=0&&(p=o[v],p.data===Dk);--v)p.data=null}if(f.parent=IMe,f.eachBefore(function(v){v.depth=v.parent.depth+1,--c}).eachBefore(Ck),f.parent=null,c>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=nf(i),r):e},r.parentId=function(i){return arguments.length?(t=nf(i),r):t},r.path=function(i){return arguments.length?(n=nf(i),r):n},r}function OMe(e){e=`${e}`;let t=e.length;return zk(e,t-1)&&!zk(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Eee(e){let t=e.length;if(t<2)return"";for(;--t>1&&!zk(e,t););return e.slice(0,t)}function zk(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function PMe(e,t){return e.parent===t.parent?1:2}function Hk(e){var t=e.children;return t?t[0]:e.t}function Lk(e){var t=e.children;return t?t[t.length-1]:e.t}function $Me(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function BMe(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function UMe(e,t,n){return e.a.parent===t.parent?e.a:n}function xC(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}xC.prototype=Object.create(Ec.prototype);function jMe(e){for(var t=new xC(e,0),n,r=[t],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new xC(o[a],a)),i.parent=n;return(t.parent=new xC(null,0)).children=[t],t}function Ak(){var e=PMe,t=1,n=1,r=null;function i(l){var u=jMe(l);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)l.eachBefore(c);else{var f=l,d=l,p=l;l.eachBefore(function(y){y.x<f.x&&(f=y),y.x>d.x&&(d=y),y.depth>p.depth&&(p=y)});var h=f===d?1:e(f,d)/2,m=h-f.x,g=t/(d.x+h+m),v=n/(p.depth||1);l.eachBefore(function(y){y.x=(y.x+m)*g,y.y=y.depth*v})}return l}function o(l){var u=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(u){BMe(l);var p=(u[0].z+u[u.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-p):l.z=p}else d&&(l.z=d.z+e(l._,d._));l.parent.A=s(l,d,l.parent.A||f[0])}function a(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function s(l,u,f){if(u){for(var d=l,p=l,h=u,m=d.parent.children[0],g=d.m,v=p.m,y=h.m,C=m.m,b;h=Lk(h),d=Hk(d),h&&d;)m=Hk(m),p=Lk(p),p.a=l,b=h.z+y-d.z-g+e(h._,d._),b>0&&($Me(UMe(h,l,f),l,b),g+=b,v+=b),y+=h.m,g+=d.m,C+=m.m,v+=p.m;h&&!Lk(p)&&(p.t=h,p.m+=y-v),d&&!Hk(m)&&(m.t=d,m.m+=g-C,f=l)}return f}function c(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function zc(e,t,n,r,i){for(var o=e.children,a,s=-1,c=o.length,l=e.value&&(i-n)/e.value;++s<c;)a=o[s],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*l}var Vk=(1+Math.sqrt(5))/2;function Nk(e,t,n,r,i,o){for(var a=[],s=t.children,c,l,u=0,f=0,d=s.length,p,h,m=t.value,g,v,y,C,b,M,S;u<d;){p=i-n,h=o-r;do g=s[f++].value;while(!g&&f<d);for(v=y=g,M=Math.max(h/p,p/h)/(m*e),S=g*g*M,b=Math.max(y/S,S/v);f<d;++f){if(g+=l=s[f].value,l<v&&(v=l),l>y&&(y=l),S=g*g*M,C=Math.max(y/S,S/v),C>b){g-=l;break}b=C}a.push(c={value:g,dice:p<h,children:s.slice(u,f)}),c.dice?q2(c,n,r,i,m?r+=h*g/m:o):zc(c,n,r,m?n+=p*g/m:i,o),m-=g,u=f}return a}var Ep=function e(t){function n(r,i,o,a,s){Nk(t,r,i,o,a,s)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Vk);function _k(){var e=Ep,t=!1,n=1,r=1,i=[0],o=Dc,a=Dc,s=Dc,c=Dc,l=Dc;function u(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(vC),d}function f(d){var p=i[d.depth],h=d.x0+p,m=d.y0+p,g=d.x1-p,v=d.y1-p;g<h&&(h=g=(h+g)/2),v<m&&(m=v=(m+v)/2),d.x0=h,d.y0=m,d.x1=g,d.y1=v,d.children&&(p=i[d.depth+1]=o(d)/2,h+=l(d)-p,m+=a(d)-p,g-=s(d)-p,v-=c(d)-p,g<h&&(h=g=(h+g)/2),v<m&&(m=v=(m+v)/2),e(d,h,m,g,v))}return u.round=function(d){return arguments.length?(t=!!d,u):t},u.size=function(d){return arguments.length?(n=+d[0],r=+d[1],u):[n,r]},u.tile=function(d){return arguments.length?(e=bk(d),u):e},u.padding=function(d){return arguments.length?u.paddingInner(d).paddingOuter(d):u.paddingInner()},u.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:d4(+d),u):o},u.paddingOuter=function(d){return arguments.length?u.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):u.paddingTop()},u.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:d4(+d),u):a},u.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:d4(+d),u):s},u.paddingBottom=function(d){return arguments.length?(c=typeof d=="function"?d:d4(+d),u):c},u.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:d4(+d),u):l},u}function kk(e,t,n,r,i){var o=e.children,a,s=o.length,c,l=new Array(s+1);for(l[0]=c=a=0;a<s;++a)l[a+1]=c+=o[a].value;u(0,s,e.value,t,n,r,i);function u(f,d,p,h,m,g,v){if(f>=d-1){var y=o[f];y.x0=h,y.y0=m,y.x1=g,y.y1=v;return}for(var C=l[f],b=p/2+C,M=f+1,S=d-1;M<S;){var w=M+S>>>1;l[w]<b?M=w+1:S=w}b-l[M-1]<l[M]-b&&f+1<M&&--M;var E=l[M]-C,D=p-E;if(g-h>v-m){var L=p?(h*D+g*E)/p:g;u(f,M,E,h,m,L,v),u(M,d,D,L,m,g,v)}else{var A=p?(m*D+v*E)/p:v;u(f,M,E,h,m,g,A),u(M,d,D,h,A,g,v)}}}function Tk(e,t,n,r,i){(e.depth&1?zc:q2)(e,t,n,r,i)}var Ik=function e(t){function n(r,i,o,a,s){if((c=r._squarify)&&c.ratio===t)for(var c,l,u,f,d=-1,p,h=c.length,m=r.value;++d<h;){for(l=c[d],u=l.children,f=l.value=0,p=u.length;f<p;++f)l.value+=u[f].value;l.dice?q2(l,i,o,a,m?o+=(s-o)*l.value/m:s):zc(l,i,o,m?i+=(a-i)*l.value/m:a,s),m-=l.value}else r._squarify=c=Nk(t,r,i,o,a,s),c.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Vk);function Fk(e,t,n){let r={};return e.each(i=>{let o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function Bk(e){$.call(this,null,e)}Bk.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var qMe=e=>e.values;ee(Bk,$,{transform(e,t){t.source||B("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(a=>{a.children&&Dl(a.data)&&i.rem.push(a.data)}),this.value=o=tf({values:te(e.keys).reduce((a,s)=>(a.key(s),a),GMe()).entries(i.source)},qMe),n&&o.each(a=>{a.children&&(a=ct(a.data),i.add.push(a),i.source.push(a))}),Fk(o,De,De)),i.source.root=o,i}});function GMe(){let e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;let a=i.length,s=e[o++],c={},l={},u=-1,f,d,p;for(;++u<a;)f=s(d=i[u])+"",(p=c[f])?p.push(d):c[f]=[d];for(f in c)l[f]=n(c[f],o);return l}function r(i,o){if(++o>e.length)return i;let a=[];for(let s in i)a.push({key:s,values:r(i[s],o)});return a}return t}function Hc(e){$.call(this,null,e)}var WMe=(e,t)=>e.parent===t.parent?1:2;ee(Hc,$,{transform(e,t){(!t.source||!t.source.root)&&B(this.constructor.name+" transform requires a backing tree data source.");let n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Ga(e.sort,a=>a.data)),YMe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?WMe:Pa);try{this.value=n(i)}catch(a){B(a)}return i.each(a=>XMe(a,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function YMe(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function XMe(e,t,n){let r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}var Rk=["x","y","r","depth","children"];function Uk(e){Hc.call(this,e)}Uk.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Rk.length,default:Rk}]};ee(Uk,Hc,{layout:Sk,params:["radius","size","padding"],fields:Rk});var Ok=["x0","y0","x1","y1","depth","children"];function jk(e){Hc.call(this,e)}jk.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Ok.length,default:Ok}]};ee(jk,Hc,{layout:Ek,params:["size","round","padding"],fields:Ok});function qk(e){$.call(this,null,e)}qk.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ee(qk,$,{transform(e,t){t.source||B("Stratify transform requires an upstream data source.");let n=this.value,r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?Fk(yC().id(e.key).parentId(e.parentKey)(i.source),e.key,hr):Fk(yC()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});var Dee={tidy:Ak,cluster:xk},Pk=["x","y","depth","children"];function Gk(e){Hc.call(this,e)}Gk.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Pk.length,default:Pk}]};ee(Gk,Hc,{layout(e){let t=e||"tidy";if(de(Dee,t))return Dee[t]();B("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Pk});function Wk(e){$.call(this,[],e)}Wk.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ee(Wk,$,{transform(e,t){let n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||B("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,a=>o[De(a)]=1),r.each(a=>{let s=a.data,c=a.parent&&a.parent.data;c&&o[De(s)]&&o[De(c)]&&i.add.push(ct({source:c,target:s}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>o[De(a)]=1),n.forEach(a=>{(o[De(a.source)]||o[De(a.target)])&&i.mod.push(a)})),i}});var zee={binary:kk,dice:q2,slice:zc,slicedice:Tk,squarify:Ep,resquarify:Ik},$k=["x0","y0","x1","y1","depth","children"];function Yk(e){Hc.call(this,e)}Yk.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:$k.length,default:$k}]};ee(Yk,Hc,{layout(){let e=_k();return e.ratio=t=>{let n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{de(zee,t)?e.tile(zee[t]):B("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:$k});var aT={};Mr(aT,{label:()=>oT});var Qk=4278190080;function QMe(e,t){let n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function KMe(e,t,n,r,i){let o=e.width,a=e.height,s=r||i,c=Yo(o,a).getContext("2d"),l=Yo(o,a).getContext("2d"),u=s&&Yo(o,a).getContext("2d");n.forEach(E=>CC(c,E,!1)),CC(l,t,!1),s&&CC(u,t,!0);let f=Kk(c,o,a),d=Kk(l,o,a),p=s&&Kk(u,o,a),h=e.bitmap(),m=s&&e.bitmap(),g,v,y,C,b,M,S,w;for(v=0;v<a;++v)for(g=0;g<o;++g)b=v*o+g,M=f[b]&Qk,w=d[b]&Qk,S=s&&p[b]&Qk,(M||S||w)&&(y=e(g),C=e(v),!i&&(M||w)&&h.set(y,C),s&&(M||S)&&m.set(y,C));return[h,m]}function Kk(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function CC(e,t,n){if(!t.length)return;let r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>CC(e,o.items,n))}):a1[r].draw(e,{items:n?t.map(ZMe):t})}function ZMe(e){let t=zl(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?k(x({},t),{strokeOpacity:1,stroke:"#000",fillOpacity:0}):t}var Lc=5,d1=31,Dp=32,p4=new Uint32Array(Dp+1),G2=new Uint32Array(Dp+1);G2[0]=0;p4[0]=~G2[0];for(let e=1;e<=Dp;++e)G2[e]=G2[e-1]<<1|1,p4[e]=~G2[e];function JMe(e,t){let n=new Uint32Array(~~((e*t+Dp)/Dp));function r(o,a){n[o]|=a}function i(o,a){n[o]&=a}return{array:n,get:(o,a)=>{let s=a*e+o;return n[s>>>Lc]&1<<(s&d1)},set:(o,a)=>{let s=a*e+o;r(s>>>Lc,1<<(s&d1))},clear:(o,a)=>{let s=a*e+o;i(s>>>Lc,~(1<<(s&d1)))},getRange:(o,a,s,c)=>{let l=c,u,f,d,p;for(;l>=a;--l)if(u=l*e+o,f=l*e+s,d=u>>>Lc,p=f>>>Lc,d===p){if(n[d]&p4[u&d1]&G2[(f&d1)+1])return!0}else{if(n[d]&p4[u&d1]||n[p]&G2[(f&d1)+1])return!0;for(let h=d+1;h<p;++h)if(n[h])return!0}return!1},setRange:(o,a,s,c)=>{let l,u,f,d,p;for(;a<=c;++a)if(l=a*e+o,u=a*e+s,f=l>>>Lc,d=u>>>Lc,f===d)r(f,p4[l&d1]&G2[(u&d1)+1]);else for(r(f,p4[l&d1]),r(d,G2[(u&d1)+1]),p=f+1;p<d;++p)r(p,4294967295)},clearRange:(o,a,s,c)=>{let l,u,f,d,p;for(;a<=c;++a)if(l=a*e+o,u=a*e+s,f=l>>>Lc,d=u>>>Lc,f===d)i(f,G2[l&d1]|p4[(u&d1)+1]);else for(i(f,G2[l&d1]),i(d,p4[(u&d1)+1]),p=f+1;p<d;++p)i(p,0)},outOfBounds:(o,a,s,c)=>o<0||a<0||c>=t||s>=e}}function ewe(e,t,n){let r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=s=>~~((s+n)/r);return a.invert=s=>s*r-n,a.bitmap=()=>JMe(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function twe(e,t,n,r){let i=e.width,o=e.height;return function(a){let s=a.datum.datum.items[r].items,c=s.length,l=a.datum.fontSize,u=T1.width(a.datum,a.datum.text),f=0,d,p,h,m,g,v,y;for(let C=0;C<c;++C)d=s[C].x,h=s[C].y,p=s[C].x2===void 0?d:s[C].x2,m=s[C].y2===void 0?h:s[C].y2,g=(d+p)/2,v=(h+m)/2,y=Math.abs(p-d+m-h),y>=f&&(f=y,a.x=g,a.y=v);return g=u/2,v=l/2,d=a.x-g,p=a.x+g,h=a.y-v,m=a.y+v,a.align="center",d<0&&p<=i?a.align="left":0<=d&&i<p&&(a.align="right"),a.baseline="middle",h<0&&m<=o?a.baseline="top":0<=h&&o<m&&(a.baseline="bottom"),!0}}function bC(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function h4(e,t,n,r,i,o,a,s){let c=i*o/(r*2),l=e(t-c),u=e(t+c),f=e(n-(o=o/2)),d=e(n+o);return a.outOfBounds(l,f,u,d)||a.getRange(l,f,u,d)||s&&s.getRange(l,f,u,d)}function nwe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1];function c(l,u,f,d,p){let h=e.invert(l),m=e.invert(u),g=f,v=o,y;if(!bC(h,m,d,p,i,o)&&!h4(e,h,m,p,d,g,a,s)&&!h4(e,h,m,p,d,p,a,null)){for(;v-g>=1;)y=(g+v)/2,h4(e,h,m,p,d,y,a,s)?v=y:g=y;if(g>f)return[h,m,g,!0]}}return function(l){let u=l.datum.datum.items[r].items,f=u.length,d=l.datum.fontSize,p=T1.width(l.datum,l.datum.text),h=n?d:0,m=!1,g=!1,v=0,y,C,b,M,S,w,E,D,L,A,j,V,_,N,I,W,X;for(let J=0;J<f;++J){for(y=u[J].x,b=u[J].y,C=u[J].x2===void 0?y:u[J].x2,M=u[J].y2===void 0?b:u[J].y2,y>C&&(X=y,y=C,C=X),b>M&&(X=b,b=M,M=X),L=e(y),j=e(C),A=~~((L+j)/2),V=e(b),N=e(M),_=~~((V+N)/2),E=A;E>=L;--E)for(D=_;D>=V;--D)W=c(E,D,h,p,d),W&&([l.x,l.y,h,m]=W);for(E=A;E<=j;++E)for(D=_;D<=N;++D)W=c(E,D,h,p,d),W&&([l.x,l.y,h,m]=W);!m&&!n&&(I=Math.abs(C-y+M-b),S=(y+C)/2,w=(b+M)/2,I>=v&&!bC(S,w,p,d,i,o)&&!h4(e,S,w,d,p,d,a,null)&&(v=I,l.x=S,l.y=w,g=!0))}return m||g?(S=p/2,w=d/2,a.setRange(e(l.x-S),e(l.y-w),e(l.x+S),e(l.y+w)),l.align="center",l.baseline="middle",!0):!1}}var rwe=[-1,-1,1,1],iwe=[-1,1,-1,1];function owe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1],c=e.bitmap();return function(l){let u=l.datum.datum.items[r].items,f=u.length,d=l.datum.fontSize,p=T1.width(l.datum,l.datum.text),h=[],m=n?d:0,g=!1,v=!1,y=0,C,b,M,S,w,E,D,L,A,j,V,_;for(let N=0;N<f;++N){for(C=u[N].x,M=u[N].y,b=u[N].x2===void 0?C:u[N].x2,S=u[N].y2===void 0?M:u[N].y2,h.push([e((C+b)/2),e((M+S)/2)]);h.length;)if([D,L]=h.pop(),!(a.get(D,L)||s.get(D,L)||c.get(D,L))){c.set(D,L);for(let I=0;I<4;++I)w=D+rwe[I],E=L+iwe[I],c.outOfBounds(w,E,w,E)||h.push([w,E]);if(w=e.invert(D),E=e.invert(L),A=m,j=o,!bC(w,E,p,d,i,o)&&!h4(e,w,E,d,p,A,a,s)&&!h4(e,w,E,d,p,d,a,null)){for(;j-A>=1;)V=(A+j)/2,h4(e,w,E,d,p,V,a,s)?j=V:A=V;A>m&&(l.x=w,l.y=E,m=A,g=!0)}}!g&&!n&&(_=Math.abs(b-C+S-M),w=(C+b)/2,E=(M+S)/2,_>=y&&!bC(w,E,p,d,i,o)&&!h4(e,w,E,d,p,d,a,null)&&(y=_,l.x=w,l.y=E,v=!0))}return g||v?(w=p/2,E=d/2,a.setRange(e(l.x-w),e(l.y-E),e(l.x+w),e(l.y+E)),l.align="center",l.baseline="middle",!0):!1}}var awe=["right","center","left"],swe=["bottom","middle","top"];function cwe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1],c=r.length;return function(l){let u=l.boundary,f=l.datum.fontSize;if(u[2]<0||u[5]<0||u[0]>i||u[3]>o)return!1;let d=l.textWidth??0,p,h,m,g,v,y,C,b,M,S,w,E,D,L,A;for(let j=0;j<c;++j){if(p=(n[j]&3)-1,h=(n[j]>>>2&3)-1,m=p===0&&h===0||r[j]<0,g=p&&h?Math.SQRT1_2:1,v=r[j]<0?-1:1,y=u[1+p]+r[j]*p*g,w=u[4+h]+v*f*h/2+r[j]*h*g,b=w-f/2,M=w+f/2,E=e(y),L=e(b),A=e(M),!d)if(Hee(E,E,L,A,a,s,y,y,b,M,u,m))d=T1.width(l.datum,l.datum.text);else continue;if(S=y+v*d*p/2,y=S-d/2,C=S+d/2,E=e(y),D=e(C),Hee(E,D,L,A,a,s,y,C,b,M,u,m))return l.x=p?p*v<0?C:y:S,l.y=h?h*v<0?M:b:w,l.align=awe[p*v+1],l.baseline=swe[h*v+1],a.setRange(E,L,D,A),!0}return!1}}function Hee(e,t,n,r,i,o,a,s,c,l,u,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}var Zk=0,Jk=4,eT=8,tT=0,nT=1,rT=2,lwe={"top-left":Zk+tT,top:Zk+nT,"top-right":Zk+rT,left:Jk+tT,middle:Jk+nT,right:Jk+rT,"bottom-left":eT+tT,bottom:eT+nT,"bottom-right":eT+rT},uwe={naive:twe,"reduced-search":nwe,floodfill:owe};function fwe(e,t,n,r,i,o,a,s,c,l,u){if(!e.length)return e;let f=Math.max(r.length,i.length),d=dwe(r,f),p=pwe(i,f),h=hwe(e[0].datum),m=h==="group"&&e[0].datum.items[c].marktype,g=m==="area",v=mwe(h,m,s,c),y=l===null||l===1/0,C=g&&u==="naive",b=-1,M=-1,S=e.map(L=>{let A=y?T1.width(L,L.text):void 0;return b=Math.max(b,A),M=Math.max(M,L.fontSize),{datum:L,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(L),textWidth:A}});l=l===null||l===1/0?Math.max(b,M)+Math.max(...r):l;let w=ewe(t[0],t[1],l),E;if(!C){n&&S.sort((j,V)=>n(j.datum,V.datum));let L=!1;for(let j=0;j<p.length&&!L;++j)L=p[j]===5||d[j]<0;let A=(h&&a||g)&&e.map(j=>j.datum);E=o.length||A?KMe(w,A||[],o,L,g):QMe(w,a&&S)}let D=g?uwe[u](w,E,a,c):cwe(w,E,p,d);return S.forEach(L=>L.opacity=+D(L)),S}function dwe(e,t){let n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function pwe(e,t){let n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=lwe[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function hwe(e){return e&&e.mark&&e.mark.marktype}function mwe(e,t,n,r){let i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{let a=o.datum.items[r].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:o=>{let a=o.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}var iT=["x","y","opacity","align","baseline"],Lee=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function oT(e){$.call(this,null,e)}oT.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Lee},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:iT.length,default:iT}]};ee(oT,$,{transform(e,t){function n(o){let a=e[o];return Ie(a)&&t.modified(a.fields)}let r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&B("Size parameter should be specified as a [width, height] array.");let i=e.as||iT;return fwe(t.materialize(t.SOURCE).source||[],e.size,e.sort,te(e.offset==null?1:e.offset),te(e.anchor||Lee),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{let a=o.datum;a[i[0]]=o.x,a[i[1]]=o.y,a[i[2]]=o.opacity,a[i[3]]=o.align,a[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});var uT={};Mr(uT,{loess:()=>cT,regression:()=>lT});function Aee(e,t){var n=[],r=function(u){return u(s)},i,o,a,s,c,l;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],c=t.map(r),l=i[c],l||(i[c]=l=[],l.dims=c,n.push(l)),l.push(s);return n}function cT(e){$.call(this,null,e)}cT.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ee(cT,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=Aee(r,e.groupby),o=(e.groupby||[]).map(un),a=o.length,s=e.as||[un(e.x),un(e.y)],c=[];i.forEach(l=>{ZL(l,e.x,e.y,e.bandwidth||.3).forEach(u=>{let f={};for(let d=0;d<a;++d)f[o[d]]=l.dims[d];f[s[0]]=u[0],f[s[1]]=u[1],c.push(ct(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});var sT={constant:Yv,linear:Qv,log:YL,exp:XL,pow:QL,quad:Kv,poly:KL},gwe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function lT(e){$.call(this,null,e)}lT.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(sT)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ee(lT,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=Aee(r,e.groupby),o=(e.groupby||[]).map(un),a=e.method||"linear",s=e.order==null?3:e.order,c=gwe(a,s),l=e.as||[un(e.x),un(e.y)],u=sT[a],f=[],d=e.extent;de(sT,a)||B("Invalid regression method: "+a),d!=null&&a==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(p=>{if(p.length<=c){t.dataflow.warn("Skipping regression with more parameters than data points.");return}let m=u(p,e.x,e.y,s);if(e.params){f.push(ct({keys:p.dims,coef:m.coef,rSquared:m.rSquared}));return}let g=d||Zi(p,e.x),v=y=>{let C={};for(let b=0;b<o.length;++b)C[o[b]]=p.dims[b];C[l[0]]=y[0],C[l[1]]=y[1],f.push(ct(C))};a==="linear"||a==="constant"?g.forEach(y=>v([y,m.predict(y)])):hu(m.predict,g,25,200).forEach(v)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});var pT={};Mr(pT,{voronoi:()=>dT});var vt=11102230246251565e-32,ar=134217729,zp=(3+8*vt)*vt;function c0(e,t,n,r,i){let o,a,s,c,l=t[0],u=r[0],f=0,d=0;u>l==u>-l?(o=l,l=t[++f]):(o=u,u=r[++d]);let p=0;if(f<e&&d<n)for(u>l==u>-l?(a=l+o,s=o-(a-l),l=t[++f]):(a=u+o,s=o-(a-u),u=r[++d]),o=a,s!==0&&(i[p++]=s);f<e&&d<n;)u>l==u>-l?(a=o+l,c=a-o,s=o-(a-c)+(l-c),l=t[++f]):(a=o+u,c=a-o,s=o-(a-c)+(u-c),u=r[++d]),o=a,s!==0&&(i[p++]=s);for(;f<e;)a=o+l,c=a-o,s=o-(a-c)+(l-c),l=t[++f],o=a,s!==0&&(i[p++]=s);for(;d<n;)a=o+u,c=a-o,s=o-(a-c)+(u-c),u=r[++d],o=a,s!==0&&(i[p++]=s);return(o!==0||p===0)&&(i[p++]=o),p}function Hp(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function re(e){return new Float64Array(e)}var vwe=(3+16*vt)*vt,ywe=(2+12*vt)*vt,xwe=(9+64*vt)*vt*vt,rf=re(4),Vee=re(8),Nee=re(12),_ee=re(16),p1=re(4);function Cwe(e,t,n,r,i,o,a){let s,c,l,u,f,d,p,h,m,g,v,y,C,b,M,S,w,E,D=e-i,L=n-i,A=t-o,j=r-o;b=D*j,d=ar*D,p=d-(d-D),h=D-p,d=ar*j,m=d-(d-j),g=j-m,M=h*g-(b-p*m-h*m-p*g),S=A*L,d=ar*A,p=d-(d-A),h=A-p,d=ar*L,m=d-(d-L),g=L-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,rf[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,rf[1]=C-(v+f)+(f-S),E=y+v,f=E-y,rf[2]=y-(E-f)+(v-f),rf[3]=E;let V=Hp(4,rf),_=ywe*a;if(V>=_||-V>=_||(f=e-D,s=e-(D+f)+(f-i),f=n-L,l=n-(L+f)+(f-i),f=t-A,c=t-(A+f)+(f-o),f=r-j,u=r-(j+f)+(f-o),s===0&&c===0&&l===0&&u===0)||(_=xwe*a+zp*Math.abs(V),V+=D*u+j*s-(A*l+L*c),V>=_||-V>=_))return V;b=s*j,d=ar*s,p=d-(d-s),h=s-p,d=ar*j,m=d-(d-j),g=j-m,M=h*g-(b-p*m-h*m-p*g),S=c*L,d=ar*c,p=d-(d-c),h=c-p,d=ar*L,m=d-(d-L),g=L-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,p1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,p1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,p1[2]=y-(E-f)+(v-f),p1[3]=E;let N=c0(4,rf,4,p1,Vee);b=D*u,d=ar*D,p=d-(d-D),h=D-p,d=ar*u,m=d-(d-u),g=u-m,M=h*g-(b-p*m-h*m-p*g),S=A*l,d=ar*A,p=d-(d-A),h=A-p,d=ar*l,m=d-(d-l),g=l-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,p1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,p1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,p1[2]=y-(E-f)+(v-f),p1[3]=E;let I=c0(N,Vee,4,p1,Nee);b=s*u,d=ar*s,p=d-(d-s),h=s-p,d=ar*u,m=d-(d-u),g=u-m,M=h*g-(b-p*m-h*m-p*g),S=c*l,d=ar*c,p=d-(d-c),h=c-p,d=ar*l,m=d-(d-l),g=l-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,p1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,p1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,p1[2]=y-(E-f)+(v-f),p1[3]=E;let W=c0(I,Nee,4,p1,_ee);return _ee[W-1]}function of(e,t,n,r,i,o){let a=(t-o)*(n-i),s=(e-i)*(r-o),c=a-s,l=Math.abs(a+s);return Math.abs(c)>=vwe*l?c:-Cwe(e,t,n,r,i,o,l)}var r4t=(7+56*vt)*vt,i4t=(3+28*vt)*vt,o4t=(26+288*vt)*vt*vt,a4t=re(4),s4t=re(4),c4t=re(4),l4t=re(4),u4t=re(4),f4t=re(4),d4t=re(4),p4t=re(4),h4t=re(4),m4t=re(8),g4t=re(8),v4t=re(8),y4t=re(4),x4t=re(8),C4t=re(8),b4t=re(8),M4t=re(12),w4t=re(192),S4t=re(192);var z4t=(10+96*vt)*vt,H4t=(4+48*vt)*vt,L4t=(44+576*vt)*vt*vt,A4t=re(4),V4t=re(4),N4t=re(4),_4t=re(4),k4t=re(4),T4t=re(4),I4t=re(4),F4t=re(4),R4t=re(8),O4t=re(8),P4t=re(8),$4t=re(8),B4t=re(8),U4t=re(8),j4t=re(8),q4t=re(8),G4t=re(8),W4t=re(4),Y4t=re(4),X4t=re(4),Q4t=re(8),K4t=re(16),Z4t=re(16),J4t=re(16),elt=re(32),tlt=re(32),nlt=re(48),rlt=re(64),ilt=re(1152),olt=re(1152);var llt=(16+224*vt)*vt,ult=(5+72*vt)*vt,flt=(71+1408*vt)*vt*vt,dlt=re(4),plt=re(4),hlt=re(4),mlt=re(4),glt=re(4),vlt=re(4),ylt=re(4),xlt=re(4),Clt=re(4),blt=re(4),Mlt=re(24),wlt=re(24),Slt=re(24),Elt=re(24),Dlt=re(24),zlt=re(24),Hlt=re(24),Llt=re(24),Alt=re(24),Vlt=re(24),Nlt=re(1152),_lt=re(1152),klt=re(1152),Tlt=re(1152),Ilt=re(1152),Flt=re(2304),Rlt=re(2304),Olt=re(3456),Plt=re(5760),$lt=re(8),Blt=re(8),Ult=re(8),jlt=re(16),qlt=re(24),Glt=re(48),Wlt=re(48),Ylt=re(96),Xlt=re(192),Qlt=re(384),Klt=re(384),Zlt=re(384),Jlt=re(768);var e0t=re(96),t0t=re(96),n0t=re(96),r0t=re(1152);var Tee=Math.pow(2,-52),MC=new Uint32Array(512),Ap=class e{static from(t,n=Dwe,r=zwe){let i=t.length,o=new Float64Array(i*2);for(let a=0;a<i;a++){let s=t[a];o[2*a]=n(s),o[2*a+1]=r(s)}return new e(o)}constructor(t){let n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;let r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){let{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,a=t.length>>1,s=1/0,c=1/0,l=-1/0,u=-1/0;for(let D=0;D<a;D++){let L=t[2*D],A=t[2*D+1];L<s&&(s=L),A<c&&(c=A),L>l&&(l=L),A>u&&(u=A),this._ids[D]=D}let f=(s+l)/2,d=(c+u)/2,p,h,m;for(let D=0,L=1/0;D<a;D++){let A=fT(f,d,t[2*D],t[2*D+1]);A<L&&(p=D,L=A)}let g=t[2*p],v=t[2*p+1];for(let D=0,L=1/0;D<a;D++){if(D===p)continue;let A=fT(g,v,t[2*D],t[2*D+1]);A<L&&A>0&&(h=D,L=A)}let y=t[2*h],C=t[2*h+1],b=1/0;for(let D=0;D<a;D++){if(D===p||D===h)continue;let L=Swe(g,v,y,C,t[2*D],t[2*D+1]);L<b&&(m=D,b=L)}let M=t[2*m],S=t[2*m+1];if(b===1/0){for(let A=0;A<a;A++)this._dists[A]=t[2*A]-t[0]||t[2*A+1]-t[1];af(this._ids,this._dists,0,a-1);let D=new Uint32Array(a),L=0;for(let A=0,j=-1/0;A<a;A++){let V=this._ids[A],_=this._dists[V];_>j&&(D[L++]=V,j=_)}this.hull=D.subarray(0,L),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(of(g,v,y,C,M,S)<0){let D=h,L=y,A=C;h=m,y=M,C=S,m=D,M=L,S=A}let w=Ewe(g,v,y,C,M,S);this._cx=w.x,this._cy=w.y;for(let D=0;D<a;D++)this._dists[D]=fT(t[2*D],t[2*D+1],w.x,w.y);af(this._ids,this._dists,0,a-1),this._hullStart=p;let E=3;r[p]=n[m]=h,r[h]=n[p]=m,r[m]=n[h]=p,i[p]=0,i[h]=1,i[m]=2,o.fill(-1),o[this._hashKey(g,v)]=p,o[this._hashKey(y,C)]=h,o[this._hashKey(M,S)]=m,this.trianglesLen=0,this._addTriangle(p,h,m,-1,-1,-1);for(let D=0,L,A;D<this._ids.length;D++){let j=this._ids[D],V=t[2*j],_=t[2*j+1];if(D>0&&Math.abs(V-L)<=Tee&&Math.abs(_-A)<=Tee||(L=V,A=_,j===p||j===h||j===m))continue;let N=0;for(let Se=0,Ee=this._hashKey(V,_);Se<this._hashSize&&(N=o[(Ee+Se)%this._hashSize],!(N!==-1&&N!==r[N]));Se++);N=n[N];let I=N,W;for(;W=r[I],of(V,_,t[2*I],t[2*I+1],t[2*W],t[2*W+1])>=0;)if(I=W,I===N){I=-1;break}if(I===-1)continue;let X=this._addTriangle(I,j,r[I],-1,-1,i[I]);i[j]=this._legalize(X+2),i[I]=X,E++;let J=r[I];for(;W=r[J],of(V,_,t[2*J],t[2*J+1],t[2*W],t[2*W+1])<0;)X=this._addTriangle(J,j,W,i[j],-1,i[J]),i[j]=this._legalize(X+2),r[J]=J,E--,J=W;if(I===N)for(;W=n[I],of(V,_,t[2*W],t[2*W+1],t[2*I],t[2*I+1])<0;)X=this._addTriangle(W,j,I,-1,i[I],i[W]),this._legalize(X+2),i[W]=X,r[I]=I,E--,I=W;this._hullStart=n[j]=I,r[I]=n[J]=j,r[j]=J,o[this._hashKey(V,_)]=j,o[this._hashKey(t[2*I],t[2*I+1])]=I}this.hull=new Uint32Array(E);for(let D=0,L=this._hullStart;D<E;D++)this.hull[D]=L,L=r[L];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Mwe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){let{_triangles:n,_halfedges:r,coords:i}=this,o=0,a=0;for(;;){let s=r[t],c=t-t%3;if(a=c+(t+2)%3,s===-1){if(o===0)break;t=MC[--o];continue}let l=s-s%3,u=c+(t+1)%3,f=l+(s+2)%3,d=n[a],p=n[t],h=n[u],m=n[f];if(wwe(i[2*d],i[2*d+1],i[2*p],i[2*p+1],i[2*h],i[2*h+1],i[2*m],i[2*m+1])){n[t]=m,n[s]=d;let v=r[f];if(v===-1){let C=this._hullStart;do{if(this._hullTri[C]===f){this._hullTri[C]=t;break}C=this._hullPrev[C]}while(C!==this._hullStart)}this._link(t,v),this._link(s,r[a]),this._link(a,f);let y=l+(s+1)%3;o<MC.length&&(MC[o++]=y)}else{if(o===0)break;t=MC[--o]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,a){let s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=n,this._triangles[s+2]=r,this._link(s,i),this._link(s+1,o),this._link(s+2,a),this.trianglesLen+=3,s}};function Mwe(e,t){let n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function fT(e,t,n,r){let i=e-n,o=t-r;return i*i+o*o}function wwe(e,t,n,r,i,o,a,s){let c=e-a,l=t-s,u=n-a,f=r-s,d=i-a,p=o-s,h=c*c+l*l,m=u*u+f*f,g=d*d+p*p;return c*(f*g-m*p)-l*(u*g-m*d)+h*(u*p-f*d)<0}function Swe(e,t,n,r,i,o){let a=n-e,s=r-t,c=i-e,l=o-t,u=a*a+s*s,f=c*c+l*l,d=.5/(a*l-s*c),p=(l*u-s*f)*d,h=(a*f-c*u)*d;return p*p+h*h}function Ewe(e,t,n,r,i,o){let a=n-e,s=r-t,c=i-e,l=o-t,u=a*a+s*s,f=c*c+l*l,d=.5/(a*l-s*c),p=e+(l*u-s*f)*d,h=t+(a*f-c*u)*d;return{x:p,y:h}}function af(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){let o=e[i],a=t[o],s=i-1;for(;s>=n&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=o}else{let i=n+r>>1,o=n+1,a=r;Lp(e,i,o),t[e[n]]>t[e[r]]&&Lp(e,n,r),t[e[o]]>t[e[r]]&&Lp(e,o,r),t[e[n]]>t[e[o]]&&Lp(e,n,o);let s=e[o],c=t[s];for(;;){do o++;while(t[e[o]]<c);do a--;while(t[e[a]]>c);if(a<o)break;Lp(e,o,a)}e[n+1]=e[a],e[a]=s,r-o+1>=a-n?(af(e,t,o,r),af(e,t,n,a-1)):(af(e,t,n,a-1),af(e,t,o,r))}}function Lp(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function Dwe(e){return e[0]}function zwe(e){return e[1]}var W2=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;let i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}};var l0=class{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}};var wC=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this,o,a,s=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,v=r.length,y,C;m<v;m+=3,g+=2){let b=r[m]*2,M=r[m+1]*2,S=r[m+2]*2,w=t[b],E=t[b+1],D=t[M],L=t[M+1],A=t[S],j=t[S+1],V=D-w,_=L-E,N=A-w,I=j-E,W=(V*I-_*N)*2;if(Math.abs(W)<1e-9){if(o===void 0){o=a=0;for(let J of n)o+=t[J*2],a+=t[J*2+1];o/=n.length,a/=n.length}let X=1e9*Math.sign((o-w)*I-(a-E)*N);y=(w+A)/2-X*I,C=(E+j)/2+X*N}else{let X=1/W,J=V*V+_*_,Se=N*N+I*I;y=w+(I*J-_*Se)*X,C=E+(V*Se-N*J)*X}s[g]=y,s[g+1]=C}let c=n[n.length-1],l,u=c*4,f,d=t[2*c],p,h=t[2*c+1];i.fill(0);for(let m=0;m<n.length;++m)c=n[m],l=u,f=d,p=h,u=c*4,d=t[2*c],h=t[2*c+1],i[l+2]=i[u]=p-h,i[l+3]=i[u+1]=d-f}render(t){let n=t==null?t=new W2:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:a,vectors:s}=this;if(o.length<=1)return null;for(let u=0,f=r.length;u<f;++u){let d=r[u];if(d<u)continue;let p=Math.floor(u/3)*2,h=Math.floor(d/3)*2,m=a[p],g=a[p+1],v=a[h],y=a[h+1];this._renderSegment(m,g,v,y,t)}let c,l=o[o.length-1];for(let u=0;u<o.length;++u){c=l,l=o[u];let f=Math.floor(i[l]/3)*2,d=a[f],p=a[f+1],h=c*4,m=this._project(d,p,s[h+2],s[h+3]);m&&this._renderSegment(d,p,m[0],m[1],t)}return n&&n.value()}renderBounds(t){let n=t==null?t=new W2:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){let r=n==null?n=new W2:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let a=2;a<o;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),r&&r.value()}*cellPolygons(){let{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){let i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){let n=new l0;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let a,s=this._regioncode(t,n),c=this._regioncode(r,i);s===0&&c===0?(o.moveTo(t,n),o.lineTo(r,i)):(a=this._clipSegment(t,n,r,i,s,c))&&(o.moveTo(a[0],a[1]),o.lineTo(a[2],a[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){let n=this._clip(t);if(n)for(let r of this.delaunay.neighbors(t)){let i=this._clip(r);if(i){e:for(let o=0,a=n.length;o<a;o+=2)for(let s=0,c=i.length;s<c;s+=2)if(n[o]===i[s]&&n[o+1]===i[s+1]&&n[(o+2)%a]===i[(s+c-2)%c]&&n[(o+3)%a]===i[(s+c-1)%c]){yield r;break e}}}}_cell(t){let{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,a=r[t];if(a===-1)return null;let s=[],c=a;do{let l=Math.floor(c/3);if(s.push(n[l*2],n[l*2+1]),c=c%3===2?c-2:c+1,o[c]!==t)break;c=i[c]}while(c!==a&&c!==-1);return s}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let n=this._cell(t);if(n===null)return null;let{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){let r=n.length,i=null,o,a,s=n[r-2],c=n[r-1],l,u=this._regioncode(s,c),f,d=0;for(let p=0;p<r;p+=2)if(o=s,a=c,s=n[p],c=n[p+1],l=u,u=this._regioncode(s,c),l===0&&u===0)f=d,d=0,i?i.push(s,c):i=[s,c];else{let h,m,g,v,y;if(l===0){if((h=this._clipSegment(o,a,s,c,l,u))===null)continue;[m,g,v,y]=h}else{if((h=this._clipSegment(s,c,o,a,u,l))===null)continue;[v,y,m,g]=h,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(v,y),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(v,y):i=[v,y]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,a){let s=o<a;for(s&&([t,n,r,i,o,a]=[r,i,t,n,a,o]);;){if(o===0&&a===0)return s?[r,i,t,n]:[t,n,r,i];if(o&a)return null;let c,l,u=o||a;u&8?(c=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):u&4?(c=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):u&2?(l=n+(i-n)*(this.xmax-t)/(r-t),c=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),c=this.xmin),o?(t=c,n=l,o=this._regioncode(t,n)):(r=c,i=l,a=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,a){let s=Array.from(n),c;if((c=this._project(s[0],s[1],r,i))&&s.unshift(c[0],c[1]),(c=this._project(s[s.length-2],s[s.length-1],o,a))&&s.push(c[0],c[1]),s=this._clipFinite(t,s))for(let l=0,u=s.length,f,d=this._edgecode(s[u-2],s[u-1]);l<u;l+=2)f=d,d=this._edgecode(s[l],s[l+1]),f&&d&&(l=this._edge(t,f,d,s,l),u=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,n,r,i,o){for(;n!==r;){let a,s;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,s=this.ymin;break}(i[o]!==a||i[o+1]!==s)&&this.contains(t,a,s)&&(i.splice(o,0,a,s),o+=2)}return o}_project(t,n,r,i){let o=1/0,a,s,c;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<o&&(c=this.ymin,s=t+(o=a)*r)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<o&&(c=this.ymax,s=t+(o=a)*r)}if(r>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/r)<o&&(s=this.xmax,c=n+(o=a)*i)}else if(r<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/r)<o&&(s=this.xmin,c=n+(o=a)*i)}return[s,c]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){let r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};var Hwe=2*Math.PI,sf=Math.pow;function Lwe(e){return e[0]}function Awe(e){return e[1]}function Vwe(e){let{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){let i=2*t[r],o=2*t[r+1],a=2*t[r+2];if((n[a]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function Nwe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}var Vp=class e{static from(t,n=Lwe,r=Awe,i){return new e("length"in t?_we(t,n,r,i):Float64Array.from(kwe(t,n,r,i)))}constructor(t){this._delaunator=new Ap(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Vwe(t)){this.collinear=Int32Array.from({length:n.length/2},(d,p)=>p).sort((d,p)=>n[2*d]-n[2*p]||n[2*d+1]-n[2*p+1]);let c=this.collinear[0],l=this.collinear[this.collinear.length-1],u=[n[2*c],n[2*c+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let d=0,p=n.length/2;d<p;++d){let h=Nwe(n[2*d],n[2*d+1],f);n[2*d]=h[0],n[2*d+1]=h[1]}this._delaunator=new Ap(n)}else delete this.collinear;let r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let c=0,l=r.length;c<l;++c){let u=o[c%3===2?c-2:c+1];(r[c]===-1||a[u]===-1)&&(a[u]=c)}for(let c=0,l=i.length;c<l;++c)s[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],a[i[0]]=1,i.length===2&&(a[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new wC(this,t)}*neighbors(t){let{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:a,collinear:s}=this;if(s){let f=s.indexOf(t);f>0&&(yield s[f-1]),f<s.length-1&&(yield s[f+1]);return}let c=n[t];if(c===-1)return;let l=c,u=-1;do{if(yield u=a[l],l=l%3===2?l-2:l+1,a[l]!==t)return;if(l=o[l],l===-1){let f=r[(i[t]+1)%r.length];f!==u&&(yield f);return}}while(l!==c)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;let i=r,o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){let{inedges:i,hull:o,_hullIndex:a,halfedges:s,triangles:c,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let u=t,f=sf(n-l[t*2],2)+sf(r-l[t*2+1],2),d=i[t],p=d;do{let h=c[p],m=sf(n-l[h*2],2)+sf(r-l[h*2+1],2);if(m<f&&(f=m,u=h),p=p%3===2?p-2:p+1,c[p]!==t)break;if(p=s[p],p===-1){if(p=o[(a[t]+1)%o.length],p!==h&&sf(n-l[p*2],2)+sf(r-l[p*2+1],2)<f)return p;break}}while(p!==d);return u}render(t){let n=t==null?t=new W2:void 0,{points:r,halfedges:i,triangles:o}=this;for(let a=0,s=i.length;a<s;++a){let c=i[a];if(c<a)continue;let l=o[a]*2,u=o[c]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;let r=t==null?t=new W2:void 0,{points:i}=this;for(let o=0,a=i.length;o<a;o+=2){let s=i[o],c=i[o+1];t.moveTo(s+n,c),t.arc(s,c,n,0,Hwe)}return r&&r.value()}renderHull(t){let n=t==null?t=new W2:void 0,{hull:r,points:i}=this,o=r[0]*2,a=r.length;t.moveTo(i[o],i[o+1]);for(let s=1;s<a;++s){let c=2*r[s];t.lineTo(i[c],i[c+1])}return t.closePath(),n&&n.value()}hullPolygon(){let t=new l0;return this.renderHull(t),t.value()}renderTriangle(t,n){let r=n==null?n=new W2:void 0,{points:i,triangles:o}=this,a=o[t*=3]*2,s=o[t+1]*2,c=o[t+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[s],i[s+1]),n.lineTo(i[c],i[c+1]),n.closePath(),r&&r.value()}*trianglePolygons(){let{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){let n=new l0;return this.renderTriangle(t,n),n.value()}};function _we(e,t,n,r){let i=e.length,o=new Float64Array(i*2);for(let a=0;a<i;++a){let s=e[a];o[a*2]=t.call(r,s,a,e),o[a*2+1]=n.call(r,s,a,e)}return o}function*kwe(e,t,n,r){let i=0;for(let o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function dT(e){$.call(this,null,e)}dT.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var Twe=[-1e5,-1e5,1e5,1e5];ee(dT,$,{transform(e,t){let n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Twe;let o=this.value=Vp.from(r,e.x,e.y).voronoi(i);for(let a=0,s=r.length;a<s;++a){let c=o.cellPolygon(a);r[a][n]=c&&!Fwe(c)?Iwe(c):null}return t.reflow(e.modified()).modifies(n)}});function Iwe(e){let t=e[0][0],n=e[0][1],r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Fwe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}var gT={};Mr(gT,{wordcloud:()=>mT});var hT=Math.PI/180,Np=64,SC=2048;function Rwe(){var e=[256,256],t,n,r,i,o,a,s,c=Iee,l=[],u=Math.random,f={};f.layout=function(){for(var h=d(Yo()),m=jwe((e[0]>>5)*e[1]),g=null,v=l.length,y=-1,C=[],b=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:o(S),rotate:a(S),size:~~(r(S)+1e-14),padding:s(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,w)=>w.size-S.size);++y<v;){var M=b[y];M.x=e[0]*(u()+.5)>>1,M.y=e[1]*(u()+.5)>>1,Owe(h,M,b,y),M.hasText&&p(m,M,g)&&(C.push(M),g?$we(g,M):g=[{x:M.x+M.x0,y:M.y+M.y0},{x:M.x+M.x1,y:M.y+M.y1}],M.x-=e[0]>>1,M.y-=e[1]>>1)}return C};function d(h){h.width=h.height=1;var m=Math.sqrt(h.getContext("2d").getImageData(0,0,1,1).data.length>>2);h.width=(Np<<5)/m,h.height=SC/m;var g=h.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function p(h,m,g){for(var v=m.x,y=m.y,C=Math.sqrt(e[0]*e[0]+e[1]*e[1]),b=c(e),M=u()<.5?1:-1,S=-M,w,E,D;(w=b(S+=M))&&(E=~~w[0],D=~~w[1],!(Math.min(Math.abs(E),Math.abs(D))>=C));)if(m.x=v+E,m.y=y+D,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!Pwe(m,h,e[0]))&&(!g||Bwe(m,g))){for(var L=m.sprite,A=m.width>>5,j=e[0]>>5,V=m.x-(A<<4),_=V&127,N=32-_,I=m.y1-m.y0,W=(m.y+m.y0)*j+(V>>5),X,J=0;J<I;J++){X=0;for(var Se=0;Se<=A;Se++)h[W+Se]|=X<<N|(Se<A?(X=L[J*A+Se])>>>_:0);W+=j}return m.sprite=null,!0}return!1}return f.words=function(h){return arguments.length?(l=h,f):l},f.size=function(h){return arguments.length?(e=[+h[0],+h[1]],f):e},f.font=function(h){return arguments.length?(n=u0(h),f):n},f.fontStyle=function(h){return arguments.length?(i=u0(h),f):i},f.fontWeight=function(h){return arguments.length?(o=u0(h),f):o},f.rotate=function(h){return arguments.length?(a=u0(h),f):a},f.text=function(h){return arguments.length?(t=u0(h),f):t},f.spiral=function(h){return arguments.length?(c=qwe[h]||h,f):c},f.fontSize=function(h){return arguments.length?(r=u0(h),f):r},f.padding=function(h){return arguments.length?(s=u0(h),f):s},f.random=function(h){return arguments.length?(u=h,f):u},f}function Owe(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(Np<<5)/o,SC/o);var a=0,s=0,c=0,l=n.length,u,f,d,p,h;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,u=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*hT),g=Math.cos(t.rotate*hT),v=u*g,y=u*m,C=d*g,b=d*m;u=Math.max(Math.abs(v+b),Math.abs(v-b))+31>>5<<5,d=~~Math.max(Math.abs(y+C),Math.abs(y-C))}else u=u+31>>5<<5;if(d>c&&(c=d),a+u>=Np<<5&&(a=0,s+=c,c=0),s+d>=SC)break;i.translate((a+(u>>1))/o,(s+(d>>1))/o),t.rotate&&i.rotate(t.rotate*hT),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=u,t.height=d,t.xoff=a,t.yoff=s,t.x1=u>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=u}for(var M=i.getImageData(0,0,(Np<<5)/o,SC/o).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(u=t.width,f=u>>5,d=t.y1-t.y0,p=0;p<d*f;p++)S[p]=0;if(a=t.xoff,a==null)return;s=t.yoff;var w=0,E=-1;for(h=0;h<d;h++){for(p=0;p<u;p++){var D=f*h+(p>>5),L=M[(s+h)*(Np<<5)+(a+p)<<2]?1<<31-p%32:0;S[D]|=L,w|=L}w?E=h:(t.y0++,d--,h--,s++)}t.y1=t.y0+E,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function Pwe(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),a=o&127,s=32-a,c=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),u,f=0;f<c;f++){u=0;for(var d=0;d<=i;d++)if((u<<s|(d<i?(u=r[f*i+d])>>>a:0))&t[l+d])return!0;l+=n}return!1}function $we(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Bwe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Iee(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Uwe(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var a=o<0?-1:1;switch(Math.sqrt(1+4*a*o)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function jwe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function u0(e){return typeof e=="function"?e:function(){return e}}var qwe={archimedean:Iee,rectangular:Uwe},Fee=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Gwe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function mT(e){$.call(this,Rwe(),e)}mT.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Fee}]};ee(mT,$,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&B("Wordcloud size dimensions must be non-zero.");function n(h){let m=e[h];return Ie(m)&&t.modified(m.fields)}let r=e.modified();if(!(r||t.changed(t.ADD_REM)||Gwe.some(n)))return;let i=t.materialize(t.SOURCE).source,o=this.value,a=e.as||Fee,s=e.fontSize||14,c;if(Ie(s)?c=e.fontSizeRange:s=gn(s),c){let h=s,m=dt("sqrt")().domain(Zi(i,h)).range(c);s=g=>m(h(g))}i.forEach(h=>{h[a[0]]=NaN,h[a[1]]=NaN,h[a[3]]=0});let l=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(i1).layout(),u=o.size(),f=u[0]>>1,d=u[1]>>1,p=l.length;for(let h=0,m,g;h<p;++h)m=l[h],g=m.datum,g[a[0]]=m.x+f,g[a[1]]=m.y+d,g[a[2]]=m.font,g[a[3]]=m.size,g[a[4]]=m.style,g[a[5]]=m.weight,g[a[6]]=m.rotate;return t.reflow(r).modifies(a)}});var xT={};Mr(xT,{crossfilter:()=>vT,resolvefilter:()=>yT});var Wwe=e=>new Uint8Array(e),Ywe=e=>new Uint16Array(e),_p=e=>new Uint32Array(e);function Xwe(){let e=8,t=[],n=_p(0),r=EC(0,e),i=EC(0,e);return{data:()=>t,seen:()=>n=Qwe(n,t.length),add(o){for(let a=0,s=t.length,c=o.length,l;a<c;++a)l=o[a],l._index=s++,t.push(l)},remove(o,a){let s=t.length,c=Array(s-o),l=t,u,f,d;for(f=0;!a[f]&&f<s;++f)c[f]=t[f],l[f]=f;for(d=f;f<s;++f)u=t[f],a[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],c[d]=u,u._index=d++),r[f]=0;return t=c,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,a){r[o]|=a},clear(o,a){r[o]&=~a},resize(o,a){let s=r.length;(o>s||a>e)&&(e=Math.max(a,e),r=EC(o,e,r),i=EC(o,e))}}}function Qwe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function EC(e,t,n){let r=(t<257?Wwe:t<65537?Ywe:_p)(e);return n&&r.set(n),r}function Ree(e,t,n){let r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){let a=this,s=a.bisect(a.range,i.value),c=i.index,l=s[0],u=s[1],f=c.length,d;for(d=0;d<l;++d)o[c[d]]|=r;for(d=u;d<f;++d)o[c[d]]|=r;return a}}}function Oee(){let e=_p(0),t=[],n=0;function r(s,c,l){if(!c.length)return[];let u=n,f=c.length,d=_p(f),p=Array(f),h,m,g;for(g=0;g<f;++g)p[g]=s(c[g]),d[g]=g;if(p=Kwe(p,d),u)h=t,m=e,t=Array(u+f),e=_p(u+f),Zwe(l,h,m,u,p,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=p,e=d}return n=u+f,{index:d,value:p}}function i(s,c){let l=n,u,f,d;for(f=0;!c[e[f]]&&f<l;++f);for(d=f;f<l;++f)c[u=e[f]]||(e[d]=u,t[d]=t[f],++d);n=l-s}function o(s){for(let c=0,l=n;c<l;++c)e[c]=s[e[c]]}function a(s,c){let l;return c?l=c.length:(c=t,l=n),[GH(c,s[0],0,l),ml(c,s[1],0,l)]}return{insert:r,remove:i,bisect:a,reindex:o,index:()=>e,size:()=>n}}function Kwe(e,t){return e.sort.call(t,(n,r)=>{let i=e[n],o=e[r];return i<o?-1:i>o?1:0}),lv(e,t)}function Zwe(e,t,n,r,i,o,a,s,c){let l=0,u=0,f;for(f=0;l<r&&u<a;++f)t[l]<i[u]?(s[f]=t[l],c[f]=n[l++]):(s[f]=i[u],c[f]=o[u++]+e);for(;l<r;++l,++f)s[f]=t[l],c[f]=n[l];for(;u<a;++u,++f)s[f]=i[u],c[f]=o[u]+e}function vT(e){$.call(this,Xwe(),e),this._indices=null,this._dims=null}vT.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ee(vT,$,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){let n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length,s=0,c,l;for(;s<a;++s)c=n[s].fname,l=i[c]||(i[c]=Oee()),o.push(Ree(l,s,r[s]));return this.eval(e,t)},reinit(e,t){let n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,c=s.curr(),l=s.prev(),u=s.all(),f=n.rem=n.add,d=n.mod,p=i.length,h={},m,g,v,y,C,b,M,S,w;if(l.set(c),t.rem.length&&(C=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(b={},y=t.mod,M=0,S=y.length;M<S;++M)b[y[M]._index]=1;for(M=0;M<p;++M)w=r[M],(!a[M]||e.modified("fields",M)||t.modified(w.fields))&&(v=w.fname,(m=h[v])||(o[v]=g=Oee(),h[v]=m=g.insert(w,t.source,0)),a[M]=Ree(g,M,i[M]).onAdd(m,c));for(M=0,S=s.data().length;M<S;++M)C[M]||(l[M]!==c[M]?f.push(M):b[M]&&c[M]!==u&&d.push(M));return s.mask=(1<<p)-1,n},eval(e,t){let n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){let r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,c={},l=n.add,u=i.size()+r.length,f=o.length,d=i.size(),p,h,m;i.resize(u,f),i.add(r);let g=i.curr(),v=i.prev(),y=i.all();for(p=0;p<f;++p)h=s[p].fname,m=c[h]||(c[h]=a[h].insert(s[p],r,d)),o[p].onAdd(m,g);for(;d<u;++d)v[d]=y,g[d]!==y&&l.push(d)},modify(e,t){let n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod,s,c,l;for(s=0,c=a.length;s<c;++s)l=a[s]._index,i[l]!==o&&n.push(l)},remove(e,t,n){let r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),c={},l=n.rem,u=t.rem,f,d,p,h;for(f=0,d=u.length;f<d;++f)p=u[f]._index,c[p]=1,a[p]=h=o[p],o[p]=s,h!==s&&l.push(p);for(p in r)r[p].remove(d,c);return this.reindex(t,d,c),c},reindex(e,t,n){let r=this._indices,i=this.value;e.runAfter(()=>{let o=i.remove(t,n);for(let a in r)r[a].reindex(o)})},update(e,t,n){let r=this._dims,i=e.query,o=t.stamp,a=r.length,s=0,c,l;for(n.filters=0,l=0;l<a;++l)e.modified("query",l)&&(c=l,++s);if(s===1)s=r[c].one,this.incrementOne(r[c],i[c],n.add,n.rem);else for(l=0,s=0;l<a;++l)e.modified("query",l)&&(s|=r[l].one,this.incrementAll(r[l],i[l],o,n.add),n.rem=n.add);return s},incrementAll(e,t,n,r){let i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),c=e.index(),l=e.bisect(e.range),u=e.bisect(t),f=u[0],d=u[1],p=l[0],h=l[1],m=e.one,g,v,y;if(f<p)for(g=f,v=Math.min(p,d);g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;else if(f>p)for(g=p,v=Math.min(f,h);g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;if(d>h)for(g=Math.max(f,h),v=d;g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;else if(d<h)for(g=Math.max(p,d),v=h;g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;e.range=t.slice()},incrementOne(e,t,n,r){let i=this.value,o=i.curr(),a=e.index(),s=e.bisect(e.range),c=e.bisect(t),l=c[0],u=c[1],f=s[0],d=s[1],p=e.one,h,m,g;if(l<f)for(h=l,m=Math.min(f,u);h<m;++h)g=a[h],o[g]^=p,n.push(g);else if(l>f)for(h=f,m=Math.min(l,d);h<m;++h)g=a[h],o[g]^=p,r.push(g);if(u>d)for(h=Math.max(l,d),m=u;h<m;++h)g=a[h],o[g]^=p,n.push(g);else if(u<d)for(h=Math.max(f,u),m=d;h<m;++h)g=a[h],o[g]^=p,r.push(g);e.range=t.slice()}});function yT(e){$.call(this,null,e)}yT.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ee(yT,$,{transform(e,t){let n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;let o=t.fork(t.ALL),a=r.data(),s=r.curr(),c=r.prev(),l=u=>s[u]&n?null:a[u];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,u=>{let f=s[u]&n;return!f&&f^c[u]&n?a[u]:null}),o.filter(o.REM,u=>{let f=s[u]&n;return f&&!(f^(f^c[u]&n))?a[u]:null})):(o.filter(o.ADD,l),o.filter(o.REM,u=>(s[u]&n)===i?a[u]:null)),o.filter(o.SOURCE,u=>l(u._index))}});var Jwe="RawCode",Vc="Literal",eSe="Property",tSe="Identifier",nSe="ArrayExpression",rSe="BinaryExpression",ET="CallExpression",iSe="ConditionalExpression",oSe="LogicalExpression",aSe="MemberExpression",sSe="ObjectExpression",cSe="UnaryExpression";function Y2(e){this.type=e}Y2.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=lSe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function lSe(e){switch(e.type){case nSe:return e.elements;case rSe:case oSe:return[e.left,e.right];case ET:return[e.callee].concat(e.arguments);case iSe:return[e.test,e.consequent,e.alternate];case aSe:return[e.object,e.property];case sSe:return e.properties;case eSe:return[e.key,e.value];case cSe:return[e.argument];case tSe:case Vc:case Jwe:default:return[]}}var ss,we,G,Vi,Ot,HC=1,Rp=2,f0=3,m4=4,LC=5,p0=6,R1=7,Op=8,uSe=9;ss={};ss[HC]="Boolean";ss[Rp]="<end>";ss[f0]="Identifier";ss[m4]="Keyword";ss[LC]="Null";ss[p0]="Numeric";ss[R1]="Punctuator";ss[Op]="String";ss[uSe]="RegularExpression";var fSe="ArrayExpression",dSe="BinaryExpression",pSe="CallExpression",hSe="ConditionalExpression",Wee="Identifier",mSe="Literal",gSe="LogicalExpression",vSe="MemberExpression",ySe="ObjectExpression",xSe="Property",CSe="UnaryExpression",Vr="Unexpected token %0",bSe="Unexpected number",MSe="Unexpected string",wSe="Unexpected identifier",SSe="Unexpected reserved word",ESe="Unexpected end of input",wT="Invalid regular expression",CT="Invalid regular expression: missing /",Yee="Octal literals are not allowed in strict mode.",DSe="Duplicate data property in object literal not allowed in strict mode",ri="ILLEGAL",Ip="Disabled.",zSe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),HSe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function AC(e,t){if(!e)throw new Error("ASSERT: "+t)}function Ac(e){return e>=48&&e<=57}function DT(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Tp(e){return"01234567".indexOf(e)>=0}function LSe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Fp(e){return e===10||e===13||e===8232||e===8233}function Pp(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&zSe.test(String.fromCharCode(e))}function zC(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&HSe.test(String.fromCharCode(e))}var ASe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Xee(){for(;G<Vi;){let e=we.charCodeAt(G);if(LSe(e)||Fp(e))++G;else break}}function ST(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)G<Vi&&DT(we[G])?(r=we[G++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Lt({},Vr,ri);return String.fromCharCode(i)}function VSe(){var e,t,n,r;for(e=we[G],t=0,e==="}"&&Lt({},Vr,ri);G<Vi&&(e=we[G++],!!DT(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Lt({},Vr,ri),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function Qee(){var e,t;for(e=we.charCodeAt(G++),t=String.fromCharCode(e),e===92&&(we.charCodeAt(G)!==117&&Lt({},Vr,ri),++G,e=ST("u"),(!e||e==="\\"||!Pp(e.charCodeAt(0)))&&Lt({},Vr,ri),t=e);G<Vi&&(e=we.charCodeAt(G),!!zC(e));)++G,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),we.charCodeAt(G)!==117&&Lt({},Vr,ri),++G,e=ST("u"),(!e||e==="\\"||!zC(e.charCodeAt(0)))&&Lt({},Vr,ri),t+=e);return t}function NSe(){var e,t;for(e=G++;G<Vi;){if(t=we.charCodeAt(G),t===92)return G=e,Qee();if(zC(t))++G;else break}return we.slice(e,G)}function _Se(){var e,t,n;return e=G,t=we.charCodeAt(G)===92?Qee():NSe(),t.length===1?n=f0:ASe.hasOwnProperty(t)?n=m4:t==="null"?n=LC:t==="true"||t==="false"?n=HC:n=f0,{type:n,value:t,start:e,end:G}}function bT(){var e=G,t=we.charCodeAt(G),n,r=we[G],i,o,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++G,{type:R1,value:String.fromCharCode(t),start:e,end:G};default:if(n=we.charCodeAt(G+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return G+=2,{type:R1,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:G};case 33:case 61:return G+=2,we.charCodeAt(G)===61&&++G,{type:R1,value:we.slice(e,G),start:e,end:G}}}if(a=we.substr(G,4),a===">>>=")return G+=4,{type:R1,value:a,start:e,end:G};if(o=a.substr(0,3),o===">>>"||o==="<<="||o===">>=")return G+=3,{type:R1,value:o,start:e,end:G};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return G+=2,{type:R1,value:i,start:e,end:G};if(i==="//"&&Lt({},Vr,ri),"<>=!+-*%&|^/".indexOf(r)>=0)return++G,{type:R1,value:r,start:e,end:G};Lt({},Vr,ri)}function kSe(e){let t="";for(;G<Vi&&DT(we[G]);)t+=we[G++];return t.length===0&&Lt({},Vr,ri),Pp(we.charCodeAt(G))&&Lt({},Vr,ri),{type:p0,value:parseInt("0x"+t,16),start:e,end:G}}function TSe(e){let t="0"+we[G++];for(;G<Vi&&Tp(we[G]);)t+=we[G++];return(Pp(we.charCodeAt(G))||Ac(we.charCodeAt(G)))&&Lt({},Vr,ri),{type:p0,value:parseInt(t,8),octal:!0,start:e,end:G}}function Pee(){var e,t,n;if(n=we[G],AC(Ac(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=G,e="",n!=="."){if(e=we[G++],n=we[G],e==="0"){if(n==="x"||n==="X")return++G,kSe(t);if(Tp(n))return TSe(t);n&&Ac(n.charCodeAt(0))&&Lt({},Vr,ri)}for(;Ac(we.charCodeAt(G));)e+=we[G++];n=we[G]}if(n==="."){for(e+=we[G++];Ac(we.charCodeAt(G));)e+=we[G++];n=we[G]}if(n==="e"||n==="E")if(e+=we[G++],n=we[G],(n==="+"||n==="-")&&(e+=we[G++]),Ac(we.charCodeAt(G)))for(;Ac(we.charCodeAt(G));)e+=we[G++];else Lt({},Vr,ri);return Pp(we.charCodeAt(G))&&Lt({},Vr,ri),{type:p0,value:parseFloat(e),start:t,end:G}}function ISe(){var e="",t,n,r,i,o=!1;for(t=we[G],AC(t==="'"||t==='"',"String literal must starts with a quote"),n=G,++G;G<Vi;)if(r=we[G++],r===t){t="";break}else if(r==="\\")if(r=we[G++],!r||!Fp(r.charCodeAt(0)))switch(r){case"u":case"x":we[G]==="{"?(++G,e+=VSe()):e+=ST(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Tp(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),G<Vi&&Tp(we[G])&&(o=!0,i=i*8+"01234567".indexOf(we[G++]),"0123".indexOf(r)>=0&&G<Vi&&Tp(we[G])&&(i=i*8+"01234567".indexOf(we[G++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&we[G]===`
`&&++G;else{if(Fp(r.charCodeAt(0)))break;e+=r}return t!==""&&Lt({},Vr,ri),{type:Op,value:e,octal:o,start:n,end:G}}function FSe(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Lt({},wT)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Lt({},wT)}try{return new RegExp(e,t)}catch{return null}}function RSe(){var e,t,n,r,i;for(e=we[G],AC(e==="/","Regular expression literal must start with a slash"),t=we[G++],n=!1,r=!1;G<Vi;)if(e=we[G++],t+=e,e==="\\")e=we[G++],Fp(e.charCodeAt(0))&&Lt({},CT),t+=e;else if(Fp(e.charCodeAt(0)))Lt({},CT);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Lt({},CT),i=t.substr(1,t.length-2),{value:i,literal:t}}function OSe(){var e,t,n;for(t="",n="";G<Vi&&(e=we[G],!!zC(e.charCodeAt(0)));)++G,e==="\\"&&G<Vi?Lt({},Vr,ri):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Lt({},wT,n),{value:n,literal:t}}function PSe(){var e,t,n,r;return Ot=null,Xee(),e=G,t=RSe(),n=OSe(),r=FSe(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:G}}function $Se(e){return e.type===f0||e.type===m4||e.type===HC||e.type===LC}function Kee(){if(Xee(),G>=Vi)return{type:Rp,start:G,end:G};let e=we.charCodeAt(G);return Pp(e)?_Se():e===40||e===41||e===59?bT():e===39||e===34?ISe():e===46?Ac(we.charCodeAt(G+1))?Pee():bT():Ac(e)?Pee():bT()}function O1(){let e=Ot;return G=e.end,Ot=Kee(),G=e.end,e}function Zee(){let e=G;Ot=Kee(),G=e}function BSe(e){let t=new Y2(fSe);return t.elements=e,t}function $ee(e,t,n){let r=new Y2(e==="||"||e==="&&"?gSe:dSe);return r.operator=e,r.left=t,r.right=n,r}function USe(e,t){let n=new Y2(pSe);return n.callee=e,n.arguments=t,n}function jSe(e,t,n){let r=new Y2(hSe);return r.test=e,r.consequent=t,r.alternate=n,r}function zT(e){let t=new Y2(Wee);return t.name=e,t}function kp(e){let t=new Y2(mSe);return t.value=e.value,t.raw=we.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Bee(e,t,n){let r=new Y2(vSe);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function qSe(e){let t=new Y2(ySe);return t.properties=e,t}function Uee(e,t,n){let r=new Y2(xSe);return r.key=t,r.value=n,r.kind=e,r}function GSe(e,t){let n=new Y2(CSe);return n.operator=e,n.argument=t,n.prefix=!0,n}function Lt(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,a)=>(AC(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=G,n.description=i,n}function VC(e){e.type===Rp&&Lt(e,ESe),e.type===p0&&Lt(e,bSe),e.type===Op&&Lt(e,MSe),e.type===f0&&Lt(e,wSe),e.type===m4&&Lt(e,SSe),Lt(e,Vr,e.value)}function Ni(e){let t=O1();(t.type!==R1||t.value!==e)&&VC(t)}function pn(e){return Ot.type===R1&&Ot.value===e}function MT(e){return Ot.type===m4&&Ot.value===e}function WSe(){let e=[];for(G=Ot.start,Ni("[");!pn("]");)pn(",")?(O1(),e.push(null)):(e.push(d0()),pn("]")||Ni(","));return O1(),BSe(e)}function jee(){G=Ot.start;let e=O1();return e.type===Op||e.type===p0?(e.octal&&Lt(e,Yee),kp(e)):zT(e.value)}function YSe(){var e,t,n,r;if(G=Ot.start,e=Ot,e.type===f0)return n=jee(),Ni(":"),r=d0(),Uee("init",n,r);if(e.type===Rp||e.type===R1)VC(e);else return t=jee(),Ni(":"),r=d0(),Uee("init",t,r)}function XSe(){var e=[],t,n,r,i={},o=String;for(G=Ot.start,Ni("{");!pn("}");)t=YSe(),t.key.type===Wee?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Lt({},DSe):i[r]=!0,e.push(t),pn("}")||Ni(",");return Ni("}"),qSe(e)}function QSe(){Ni("(");let e=HT();return Ni(")"),e}var KSe={if:1};function ZSe(){var e,t,n;if(pn("("))return QSe();if(pn("["))return WSe();if(pn("{"))return XSe();if(e=Ot.type,G=Ot.start,e===f0||KSe[Ot.value])n=zT(O1().value);else if(e===Op||e===p0)Ot.octal&&Lt(Ot,Yee),n=kp(O1());else{if(e===m4)throw new Error(Ip);e===HC?(t=O1(),t.value=t.value==="true",n=kp(t)):e===LC?(t=O1(),t.value=null,n=kp(t)):pn("/")||pn("/=")?(n=kp(PSe()),Zee()):VC(O1())}return n}function JSe(){let e=[];if(Ni("("),!pn(")"))for(;G<Vi&&(e.push(d0()),!pn(")"));)Ni(",");return Ni(")"),e}function eEe(){G=Ot.start;let e=O1();return $Se(e)||VC(e),zT(e.value)}function tEe(){return Ni("."),eEe()}function nEe(){Ni("[");let e=HT();return Ni("]"),e}function rEe(){var e,t,n;for(e=ZSe();;)if(pn("."))n=tEe(),e=Bee(".",e,n);else if(pn("("))t=JSe(),e=USe(e,t);else if(pn("["))n=nEe(),e=Bee("[",e,n);else break;return e}function qee(){let e=rEe();if(Ot.type===R1&&(pn("++")||pn("--")))throw new Error(Ip);return e}function DC(){var e,t;if(Ot.type!==R1&&Ot.type!==m4)t=qee();else{if(pn("++")||pn("--"))throw new Error(Ip);if(pn("+")||pn("-")||pn("~")||pn("!"))e=O1(),t=DC(),t=GSe(e.value,t);else{if(MT("delete")||MT("void")||MT("typeof"))throw new Error(Ip);t=qee()}}return t}function Gee(e){let t=0;if(e.type!==R1&&e.type!==m4)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function iEe(){var e,t,n,r,i,o,a,s,c,l;if(e=Ot,c=DC(),r=Ot,i=Gee(r),i===0)return c;for(r.prec=i,O1(),t=[e,Ot],a=DC(),o=[c,r,a];(i=Gee(Ot))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,c=o.pop(),t.pop(),n=$ee(s,c,a),o.push(n);r=O1(),r.prec=i,o.push(r),t.push(Ot),n=DC(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=$ee(o[l-1].value,o[l-2],n),l-=2;return n}function d0(){var e,t,n;return e=iEe(),pn("?")&&(O1(),t=d0(),Ni(":"),n=d0(),e=jSe(e,t,n)),e}function HT(){let e=d0();if(pn(","))throw new Error(Ip);return e}function cf(e){we=e,G=0,Vi=we.length,Ot=null,Zee();let t=HT();if(Ot.type!==Rp)throw new Error("Unexpect token after expression.");return t}var LT={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function AT(e){function t(a,s,c,l){let u=e(s[0]);return c&&(u=c+"("+u+")",c.lastIndexOf("new ",0)===0&&(u="("+u+")")),u+"."+a+(l<0?"":l===0?"()":"("+s.slice(1).map(e).join(",")+")")}function n(a,s,c){return l=>t(a,l,s,c)}let r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&B("Missing arguments to clamp function."),a.length>3&&B("Too many arguments to clamp function.");let s=a.map(e);return"Math.max("+s[1]+", Math.min("+s[2]+","+s[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(a){a.length<3&&B("Missing arguments to if function."),a.length>3&&B("Too many arguments to if function.");let s=a.map(e);return"("+s[0]+"?"+s[1]+":"+s[2]+")"}}}function oEe(e){let t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function NC(e){e=e||{};let t=e.allowed?mr(e.allowed):{},n=e.forbidden?mr(e.forbidden):{},r=e.constants||LT,i=(e.functions||AT)(f),o=e.globalvar,a=e.fieldvar,s=Ie(o)?o:h=>`${o}["${h}"]`,c={},l={},u=0;function f(h){if(Q(h))return h;let m=d[h.type];return m==null&&B("Unsupported type: "+h.type),m(h)}let d={Literal:h=>h.raw,Identifier:h=>{let m=h.name;return u>0?m:de(n,m)?B("Illegal identifier: "+m):de(r,m)?r[m]:de(t,m)?m:(c[m]=1,s(m))},MemberExpression:h=>{let m=!h.computed,g=f(h.object);m&&(u+=1);let v=f(h.property);return g===a&&(l[oEe(v)]=1),m&&(u-=1),g+(m?"."+v:"["+v+"]")},CallExpression:h=>{h.callee.type!=="Identifier"&&B("Illegal callee type: "+h.callee.type);let m=h.callee.name,g=h.arguments,v=de(i,m)&&i[m];return v||B("Unrecognized function: "+m),Ie(v)?v(g):v+"("+g.map(f).join(",")+")"},ArrayExpression:h=>"["+h.elements.map(f).join(",")+"]",BinaryExpression:h=>"("+f(h.left)+" "+h.operator+" "+f(h.right)+")",UnaryExpression:h=>"("+h.operator+f(h.argument)+")",ConditionalExpression:h=>"("+f(h.test)+"?"+f(h.consequent)+":"+f(h.alternate)+")",LogicalExpression:h=>"("+f(h.left)+h.operator+f(h.right)+")",ObjectExpression:h=>"{"+h.properties.map(f).join(",")+"}",Property:h=>{u+=1;let m=f(h.key);return u-=1,m+":"+f(h.value)}};function p(h){let m={code:f(h),globals:Object.keys(c),fields:Object.keys(l)};return c={},l={},m}return p.functions=i,p.constants=r,p}var Jee=Symbol("vega_selection_getter");function rte(e){return(!e.getter||!e.getter[Jee])&&(e.getter=Dr(e.field),e.getter[Jee]=!0),e.getter}var NT="intersect",ete="union",aEe="vlMulti",sEe="vlPoint",tte="or",cEe="and",cs="_vgsid_",$p=Dr(cs),lEe="E",uEe="R",fEe="R-E",dEe="R-LE",pEe="R-RE",_C="index:unit";function nte(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,a,s;o<i;++o)if(s=n[o],a=rte(s)(e),A2(a)&&(a=Gn(a)),A2(r[o])&&(r[o]=Gn(r[o])),F(r[o])&&A2(r[o][0])&&(r[o]=r[o].map(Gn)),s.type===lEe){if(F(r[o])?r[o].indexOf(a)<0:a!==r[o])return!1}else if(s.type===uEe){if(!D3(a,r[o]))return!1}else if(s.type===pEe){if(!D3(a,r[o],!0,!1))return!1}else if(s.type===fEe){if(!D3(a,r[o],!1,!1))return!1}else if(s.type===dEe&&!D3(a,r[o],!1,!0))return!1;return!0}function ite(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[_C]&&r[_C].value:void 0,a=n===NT,s=i.length,c=0,l,u,f,d,p;c<s;++c)if(l=i[c],o&&a){if(u=u||{},f=u[d=l.unit]||0,f===-1)continue;if(p=nte(t,l),u[d]=p?-1:++f,p&&o.size===1)return!0;if(!p&&f===o.get(d).count)return!1}else if(p=nte(t,l),a^p)return p;return s&&a}var ote=co($p),hEe=ote.left,mEe=ote.right;function ate(e,t,n){let r=this.context.data[e],i=r?r.values.value:[],o=r?r[_C]&&r[_C].value:void 0,a=n===NT,s=$p(t),c=hEe(i,s);if(c===i.length||$p(i[c])!==s)return!1;if(o&&a){if(o.size===1)return!0;if(mEe(i,s)-c<o.size)return!1}return!0}function ste(e,t){return e.map(n=>Te(t.fields?{values:t.fields.map(r=>rte(r)(n.datum))}:{[cs]:$p(n.datum)},t))}function cte(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],a={},s={},c={},l,u,f,d,p,h,m,g,v,y,C=o.length,b=0,M,S;b<C;++b)if(l=o[b],d=l.unit,u=l.fields,f=l.values,u&&f){for(M=0,S=u.length;M<S;++M)p=u[M],m=a[p.field]||(a[p.field]={}),g=m[d]||(m[d]=[]),c[p.field]=v=p.type.charAt(0),y=VT[`${v}_union`],m[d]=y(g,te(f[M]));n&&(g=s[d]||(s[d]=[]),g.push(te(f).reduce((w,E,D)=>(w[u[D].field]=E,w),{})))}else p=cs,h=$p(l),m=a[p]||(a[p]={}),g=m[d]||(m[d]=[]),g.push(h),n&&(g=s[d]||(s[d]=[]),g.push({[cs]:h}));if(t=t||ete,a[cs]?a[cs]=VT[`${cs}_${t}`](...Object.values(a[cs])):Object.keys(a).forEach(w=>{a[w]=Object.keys(a[w]).map(E=>a[w][E]).reduce((E,D)=>E===void 0?D:VT[`${c[w]}_${t}`](E,D))}),o=Object.keys(s),n&&o.length){let w=r?sEe:aEe;a[w]=t===ete?{[tte]:o.reduce((E,D)=>(E.push(...s[D]),E),[])}:{[cEe]:o.map(E=>({[tte]:s[E]}))}}return a}var VT={[`${cs}_union`]:hv,[`${cs}_intersect`]:pv,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Gn(t[0]),r=Gn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Gn(t[0]),r=Gn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}},gEe=":",vEe="@";function kC(e,t,n,r){t[0].type!==Vc&&B("First argument to selection functions must be a string literal.");let i=t[0].value,o=t.length>=2&&je(t).value,a="unit",s=vEe+a,c=gEe+i;o===NT&&!de(r,s)&&(r[s]=n.getData(i).indataRef(n,a)),de(r,c)||(r[c]=n.getData(i).tuplesRef())}function dte(e){let t=this.context.data[e];return t?t.values.value:[]}function yEe(e,t,n){let r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function xEe(e,t){let n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(hr).insert(t)),1}function CEe(e,t,n){if(e){let r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}var Bp=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},bEe=Bp("format"),pte=Bp("timeFormat"),MEe=Bp("utcFormat"),wEe=Bp("timeParse"),SEe=Bp("utcParse"),TC=new Date(2e3,0,1);function IC(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(TC.setYear(2e3),TC.setMonth(e),TC.setDate(t),pte.call(this,TC,n))}function EEe(e){return IC.call(this,e,1,"%B")}function DEe(e){return IC.call(this,e,1,"%b")}function zEe(e){return IC.call(this,0,2+e,"%A")}function HEe(e){return IC.call(this,0,2+e,"%a")}var LEe=":",AEe="@",kT="%",hte="$";function FT(e,t,n,r){t[0].type!==Vc&&B("First argument to data functions must be a string literal.");let i=t[0].value,o=LEe+i;if(!de(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function VEe(e,t,n,r){t[0].type!==Vc&&B("First argument to indata must be a string literal."),t[1].type!==Vc&&B("Second argument to indata must be a string literal.");let i=t[0].value,o=t[1].value,a=AEe+o;de(a,r)||(r[a]=n.getData(i).indataRef(n,o))}function h1(e,t,n,r){if(t[0].type===Vc)lte(n,r,t[0].value);else for(e in n.scales)lte(n,r,e)}function lte(e,t,n){let r=kT+n;if(!de(t,r))try{t[r]=e.scaleRef(n)}catch{}}function ls(e,t){if(Ie(e))return e;if(Q(e)){let n=t.scales[e];return n&&YX(n.value)?n.value:void 0}}function NEe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=h1,n._range=h1,n._scale=h1;let r=i=>"_["+(i.type===Vc?Z(kT+i.value):Z(kT)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function RT(e,t){return function(n,r,i){if(n){let o=ls(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}var _Ee=RT("area",qN),kEe=RT("bounds",WN),TEe=RT("centroid",ZN);function IEe(e,t){let n=ls(e,(t||this).context);return n&&n.scale()}function FEe(e){let t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function OT(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function REe(){return OT(this.context.dataflow,"warn",arguments)}function OEe(){return OT(this.context.dataflow,"info",arguments)}function PEe(){return OT(this.context.dataflow,"debug",arguments)}function _T(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function TT(e){let t=Xo(e),n=_T(t.r),r=_T(t.g),i=_T(t.b);return .2126*n+.7152*r+.0722*i}function $Ee(e,t){let n=TT(e),r=TT(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function BEe(){let e=[].slice.call(arguments);return e.unshift({}),Te(...e)}function mte(e,t){return e===t||e!==e&&t!==t?!0:F(e)?F(t)&&e.length===t.length?UEe(e,t):!1:ne(e)&&ne(t)?gte(e,t):!1}function UEe(e,t){for(let n=0,r=e.length;n<r;++n)if(!mte(e[n],t[n]))return!1;return!0}function gte(e,t){for(let n in e)if(!mte(e[n],t[n]))return!1;return!0}function ute(e){return t=>gte(e,t)}function jEe(e,t,n,r,i,o){let a=this.context.dataflow,s=this.context.data[e],c=s.input,l=a.stamp(),u=s.changes,f,d;if(a._trigger===!1||!(c.value.length||t||r))return 0;if((!u||u.stamp<l)&&(s.changes=u=a.changeset(),u.stamp=l,a.runAfter(()=>{s.modified=!0,a.pulse(c,u).run()},!0,1)),n&&(f=n===!0?hr:F(n)||Dl(n)?n:ute(n),u.remove(f)),t&&u.insert(t),r&&(f=ute(r),c.value.some(f)?u.remove(f):u.insert(r)),i)for(d in o)u.modify(i,d,o[d]);return 1}function qEe(e){let t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function GEe(e){let t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}var fte={};function WEe(e,t){let n=fte[t]||(fte[t]=Dr(t));return F(e)?e.map(n):n(e)}function PT(e){return F(e)||ArrayBuffer.isView(e)?e:null}function $T(e){return PT(e)||(Q(e)?e:null)}function YEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return PT(e).join(...n)}function XEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $T(e).indexOf(...n)}function QEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $T(e).lastIndexOf(...n)}function KEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $T(e).slice(...n)}function ZEe(e,t,n){return Ie(n)&&B("Function argument passed to replace."),String(e).replace(t,n)}function JEe(e){return PT(e).slice().reverse()}function eDe(e,t,n){return g7(e||0,t||0,n||0)}function tDe(e,t){let n=ls(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function nDe(e,t){let n=ls(e,(t||this).context);return n?n.copy():void 0}function rDe(e,t){let n=ls(e,(t||this).context);return n?n.domain():[]}function iDe(e,t,n){let r=ls(e,(n||this).context);return r?F(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function oDe(e,t){let n=ls(e,(t||this).context);return n&&n.range?n.range():[]}function aDe(e,t,n){let r=ls(e,(n||this).context);return r?r(t):void 0}function sDe(e,t,n,r,i){e=ls(e,(i||this).context);let o=XV(t,n),a=e.domain(),s=a[0],c=je(a),l=_n;return c-s?l=jy(e,s,c):e=(e.interpolator?dt("sequential")().interpolator(e.interpolator()):dt("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,c=1]),e.ticks&&(a=e.ticks(+r||15),s!==a[0]&&a.unshift(s),c!==je(a)&&a.push(c)),a.forEach(u=>o.stop(l(u),e(u))),o}function cDe(e,t,n){let r=ls(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function lDe(e){let t=null;return function(n){return n?Nu(n,t=t||Ql(e)):e}}var vte=e=>e.data;function yte(e,t){let n=dte.call(t,e);return n.root&&n.root.lookup||{}}function uDe(e,t,n){let r=yte(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(vte):void 0}function fDe(e,t){let n=yte(e,this)[t];return n?n.ancestors().map(vte):void 0}var xte=()=>typeof window<"u"&&window||null;function dDe(){let e=xte();return e?e.screen:{}}function pDe(){let e=xte();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function hDe(){let e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Cte(e,t,n){if(!e)return[];let[r,i]=e,o=new kn().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return wN(a,o,mDe(t))}function mDe(e){let t=null;if(e){let n=te(e.marktype),r=te(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function gDe(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=te(e);let i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function vDe(e){return te(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function yDe(e,t,n){let{x:r,y:i,mark:o}=n,a=new kn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(let[c,l]of t)c<a.x1&&(a.x1=c),c>a.x2&&(a.x2=c),l<a.y1&&(a.y1=l),l>a.y2&&(a.y2=l);return a.translate(r,i),Cte([[a.x1,a.y1],[a.x2,a.y2]],e,o).filter(c=>xDe(c.x,c.y,t))}function xDe(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){let[a,s]=n[o],[c,l]=n[i];l>t!=s>t&&e<(a-c)*(t-l)/(s-l)+c&&r++}return r&1}var lf={random(){return i1()},cumulativeNormal:Pd,cumulativeLogNormal:Bv,cumulativeUniform:Gv,densityNormal:Fv,densityLogNormal:$v,densityUniform:qv,quantileNormal:$d,quantileLogNormal:Uv,quantileUniform:Wv,sampleNormal:Od,sampleLogNormal:Pv,sampleUniform:jv,isArray:F,isBoolean:A1,isDate:A2,isDefined(e){return e!==void 0},isNumber:Oe,isObject:ne,isRegExp:VH,isString:Q,isTuple:Dl,isValid(e){return e!=null&&e===e},toBoolean:cd,toDate(e){return ld(e)},toNumber:Gn,toString:ud,indexof:XEe,join:YEe,lastindexof:QEe,replace:ZEe,reverse:JEe,slice:KEe,flush:LH,lerp:NH,merge:BEe,pad:TH,peek:je,pluck:WEe,span:nc,inrange:D3,truncate:IH,rgb:Xo,lab:j3,hcl:Fl,hsl:Il,luminance:TT,contrast:$Ee,sequence:Wn,format:bEe,utcFormat:MEe,utcParse:SEe,utcOffset:ML,utcSequence:SL,timeFormat:pte,timeParse:wEe,timeOffset:bL,timeSequence:wL,timeUnitSpecifier:pL,monthFormat:EEe,monthAbbrevFormat:DEe,dayFormat:zEe,dayAbbrevFormat:HEe,quarter:EH,utcquarter:DH,week:gL,utcweek:yL,dayofyear:mL,utcdayofyear:vL,warn:REe,info:OEe,debug:PEe,extent(e){return Zi(e)},inScope:FEe,intersect:Cte,clampRange:zH,pinchDistance:qEe,pinchAngle:GEe,screen:dDe,containerSize:hDe,windowSize:pDe,bandspace:eDe,setdata:xEe,pathShape:lDe,panLinear:bH,panLog:MH,panPow:wH,panSymlog:SH,zoomLinear:td,zoomLog:nd,zoomPow:K6,zoomSymlog:rd,encode:CEe,modify:jEe,lassoAppend:gDe,lassoPath:vDe,intersectLasso:yDe},CDe=["view","item","group","xy","x","y"],bDe="event.vega.",bte="this.",BT={},Mte={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Z(hte+e)}]`,functions:MDe,constants:LT,visitors:BT},IT=NC(Mte);function MDe(e){let t=AT(e);CDe.forEach(n=>t[n]=bDe+n);for(let n in lf)t[n]=bte+n;return Te(t,NEe(e,lf,BT)),t}function Rn(e,t,n){return arguments.length===1?lf[e]:(lf[e]=t,n&&(BT[e]=n),IT&&(IT.functions[e]=bte+e),this)}Rn("bandwidth",tDe,h1);Rn("copy",nDe,h1);Rn("domain",rDe,h1);Rn("range",oDe,h1);Rn("invert",iDe,h1);Rn("scale",aDe,h1);Rn("gradient",sDe,h1);Rn("geoArea",_Ee,h1);Rn("geoBounds",kEe,h1);Rn("geoCentroid",TEe,h1);Rn("geoShape",cDe,h1);Rn("geoScale",IEe,h1);Rn("indata",yEe,VEe);Rn("data",dte,FT);Rn("treePath",uDe,FT);Rn("treeAncestors",fDe,FT);Rn("vlSelectionTest",ite,kC);Rn("vlSelectionIdTest",ate,kC);Rn("vlSelectionResolve",cte,kC);Rn("vlSelectionTuples",ste);function X2(e,t){let n={},r;try{e=Q(e)?e:Z(e)+"",r=cf(e)}catch{B("Expression parse error: "+e)}r.visit(o=>{if(o.type!==ET)return;let a=o.callee.name,s=Mte.visitors[a];s&&s(a,o.arguments,t,n)});let i=IT(r);return i.globals.forEach(o=>{let a=hte+o;!de(n,a)&&t.getSignal(o)&&(n[a]=t.signalRef(o))}),{$expr:Te({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function wDe(e){let t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}var SDe=mr(["rule"]),wte=mr(["group","image","rect"]);function EDe(e,t){let n="";return SDe[t]||(e.x2&&(e.x?(wte[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(wte[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function UT(e){return(e+"").toLowerCase()}function DDe(e){return UT(e)==="operator"}function zDe(e){return UT(e)==="collect"}function Up(e,t,n){n.endsWith(";")||(n="return("+n+");");let r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function HDe(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var LDe={operator:(e,t)=>Up(e,["_"],t.code),parameter:(e,t)=>Up(e,["datum","_"],t.code),event:(e,t)=>Up(e,["event"],t.code),handler:(e,t)=>{let n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Up(e,["_","event"],n)},encode:(e,t)=>{let{marktype:n,channels:r}=t,i="var o=item,datum=o.datum,m=0,$;";for(let o in r){let a="o["+Z(o)+"]";i+=`$=${r[o].code};if(${a}!==$)${a}=$,m=1;`}return i+=EDe(r,n),i+="return m;",Up(e,["item","_"],i)},codegen:{get(e){let t=`[${e.map(Z).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n,r=(o,a)=>{let s=t[a],c,l;return o.path?(c=`a${o.path}`,l=`b${o.path}`):((n=n||{})["f"+a]=o,c=`this.f${a}(a)`,l=`this.f${a}(b)`),HDe(c,l,-s,s)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function ADe(e){let t=this;DDe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function VDe(e){let t=this;if(e.params){let n=t.get(e.id);n||B("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function NDe(e,t){t=t||{};let n=this;for(let r in e){let i=e[r];t[r]=F(i)?i.map(o=>Ste(o,n,t)):Ste(i,n,t)}return t}function Ste(e,t,n){if(!e||!ne(e))return e;for(let r=0,i=Ete.length,o;r<i;++r)if(o=Ete[r],de(e,o.key))return o.parse(e,t,n);return e}var Ete=[{key:"$ref",parse:_De},{key:"$key",parse:TDe},{key:"$expr",parse:kDe},{key:"$field",parse:IDe},{key:"$encode",parse:RDe},{key:"$compare",parse:FDe},{key:"$context",parse:ODe},{key:"$subflow",parse:PDe},{key:"$tupleid",parse:$De}];function _De(e,t){return t.get(e.$ref)||B("Operator not defined: "+e.$ref)}function kDe(e,t,n){e.$params&&t.parseParameters(e.$params,n);let r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=wi(t.parameterExpression(e.$expr),e.$fields))}function TDe(e,t){let n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=sd(e.$key,e.$flat,t.expr.codegen))}function IDe(e,t){if(!e.$field)return null;let n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Dr(e.$field,e.$name,t.expr.codegen))}function FDe(e,t){let n="c:"+e.$compare+"_"+e.$order,r=te(e.$compare).map(i=>i&&i.$tupleid?De:i);return t.fn[n]||(t.fn[n]=id(r,e.$order,t.expr.codegen))}function RDe(e,t){let n=e.$encode,r={};for(let i in n){let o=n[i];r[i]=wi(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function ODe(e,t){return t}function PDe(e,t){let n=e.$subflow;return function(r,i,o){let a=t.fork().parse(n),s=a.get(n.operators[0].id),c=a.signals.parent;return c&&c.set(o),s.detachSubflow=()=>t.detach(a),s}}function $De(){return De}function BDe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&B("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function UDe(e){var t=this,n=ne(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,a=void 0;r||B("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(a=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,a)}var jDe={skip:!0};function qDe(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{let a=t.signals[o];e.signals(o,a)&&(r[o]=a.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{let a=t.data[o];e.data(o,a)&&(i[o]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function GDe(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],jDe)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(hr).insert(r[o]))}),(e.subcontext||[]).forEach((o,a)=>{let s=t.subcontext[a];s&&s.setState(o)})}function FC(e,t,n,r){return new zte(e,t,n,r)}function zte(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||LDe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Dte(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}zte.prototype=Dte.prototype={fork(){let e=new Dte(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);let t=Object.keys(e.nodes);for(let n of t)e.nodes[n]._targets=null;for(let n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){let n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),zDe(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(let o in e.data){let a=n.data[o]||(n.data[o]={});e.data[o].forEach(s=>a[s]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[UT(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:wDe,parseOperator:ADe,parseOperatorParameters:VDe,parseParameters:NDe,parseStream:BDe,parseUpdate:UDe,getState:qDe,setState:GDe};function WDe(e){let t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Ite(t,e.description()))}function Ite(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function YDe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}var jT="default";function XDe(e){let t=e._signals.cursor||(e._signals.cursor=e.add({user:jT,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{let i=t.value,o=i?Q(i)?i:i.user:jT,a=r.item&&r.item.cursor||null;return i&&o===i.user&&a==i.item?i:{user:o,item:a}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Q(r)||(i=r.item,r=r.user),GT(e,r&&r!==jT?r:i||r),i},{cursor:t})}function GT(e,t){let n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function PC(e,t){var n=e._runtime.data;return de(n,t)||B("Unrecognized data set: "+t),n[t]}function QDe(e,t){return arguments.length<2?PC(this,e).values.value:BC.call(this,e,dc().remove(hr).insert(t))}function BC(e,t){OL(t)||B("Second argument to changes must be a changeset.");let n=PC(this,e);return n.modified=!0,this.pulse(n.input,t)}function KDe(e,t){return BC.call(this,e,dc().insert(t))}function ZDe(e,t){return BC.call(this,e,dc().remove(t))}function Fte(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Rte(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function UC(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function JDe(e){var t=UC(e),n=Fte(e),r=Rte(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function eze(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,a,s;return i&&(s=UC(e),a=t.changedTouches?t.changedTouches[0]:t,o=q7(a,i),o[0]-=s[0],o[1]-=s[1]),t.dataflow=e,t.item=n,t.vega=tze(e,n,o),t}function tze(e,t,n){let r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(a){var s=r,c;if(a){for(c=t;c;c=c.mark.group)if(c.mark.name===a){s=c;break}}return s&&s.mark&&s.mark.interactive?s:{}}function o(a){if(!a)return n;Q(a)&&(a=i(a));let s=n.slice();for(;a;)s[0]-=a.x||0,s[1]-=a.y||0,a=a.mark&&a.mark.group;return s}return{view:gn(e),item:gn(t||{}),group:i,xy:o,x:a=>o(a)[0],y:a=>o(a)[1]}}var Hte="view",nze="timer",rze="window",ize={trap:!1};function oze(e){let t=Te({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{F(r[o])&&(r[o]=mr(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Ote(e,t,n,r){e._eventListeners.push({type:n,sources:te(t),handler:r})}function aze(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function RC(e,t,n){let r=e._eventConfig&&e._eventConfig[t];return r===!1||ne(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function sze(e,t,n){var r=this,i=new du(n),o=function(l,u){r.runAsync(null,()=>{e===Hte&&aze(r,t)&&l.preventDefault(),i.receive(eze(r,l,u))})},a;if(e===nze)RC(r,"timer",t)&&r.timer(o,t);else if(e===Hte)RC(r,"view",t)&&r.addEventListener(t,o,ize);else if(e===rze?RC(r,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&RC(r,"selector",t)&&(a=Array.from(document.querySelectorAll(e))),!a)r.warn("Can not resolve event source: "+e);else{for(var s=0,c=a.length;s<c;++s)a[s].addEventListener(t,o);Ote(r,a,t,o)}return i}function Lte(e){return e.item}function Ate(e){return e.item.mark.source}function Vte(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function cze(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Lte),Ate,Vte(e)),this.on(this.events("view","pointerout",Lte),Ate,Vte(t)),this}function lze(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,o;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(o=n[r],i=o.sources.length;--i>=0;)o.sources[i].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this}function go(e,t,n){let r=document.createElement(e);for(let i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}var uze="vega-bind",fze="vega-bind-name",dze="vega-bind-radio";function pze(e,t,n){if(!t)return;let r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,a)})}},r.debounce&&(i.update=ad(r.debounce,i.update))),(r.input==null&&r.element?hze:gze)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function hze(e,t,n,r){let i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),Ote(r,t,i,o),e.set=a=>{t.value=a,t.dispatchEvent(mze(i))}}function mze(e){return typeof Event<"u"?new Event(e):{type:e}}function gze(e,t,n,r){let i=r.signal(n.signal),o=go("div",{class:uze}),a=n.input==="radio"?o:o.appendChild(go("label"));a.appendChild(go("span",{class:fze},n.name||n.signal)),t.appendChild(o);let s=vze;switch(n.input){case"checkbox":s=yze;break;case"select":s=xze;break;case"radio":s=Cze;break;case"range":s=bze;break}s(e,a,n,i)}function vze(e,t,n,r){let i=go("input");for(let o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function yze(e,t,n,r){let i={type:"checkbox",name:n.signal};r&&(i.checked=!0);let o=go("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=a=>o.checked=!!a||null}function xze(e,t,n,r){let i=go("select",{name:n.signal}),o=n.labels||[];n.options.forEach((a,s)=>{let c={value:a};$C(a,r)&&(c.selected=!0),i.appendChild(go("option",c,(o[s]||a)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=a=>{for(let s=0,c=n.options.length;s<c;++s)if($C(n.options[s],a)){i.selectedIndex=s;return}}}function Cze(e,t,n,r){let i=go("span",{class:dze}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((a,s)=>{let c={type:"radio",name:n.signal,value:a};$C(a,r)&&(c.checked=!0);let l=go("input",c);l.addEventListener("change",()=>e.update(a));let u=go("label",{},(o[s]||a)+"");return u.prepend(l),i.appendChild(u),l}),e.set=a=>{let s=e.elements,c=s.length;for(let l=0;l<c;++l)$C(s[l].value,a)&&(s[l].checked=!0)}}function bze(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;let i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||Ji(o,i,100),s=go("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;let c=go("span",{},+r);t.appendChild(s),t.appendChild(c);let l=()=>{c.textContent=s.value,e.update(+s.value)};s.addEventListener("input",l),s.addEventListener("change",l),e.elements=[s],e.set=u=>{s.value=u,c.textContent=u}}function $C(e,t){return e===t||e+""==t+""}function Pte(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,Fte(e),Rte(e),UC(e),i,o).background(e.background())}function WT(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Mze(e,t,n,r){let i=new r(e.loader(),WT(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,UC(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function wze(e,t){let n=this,r=n._renderType,i=n._eventConfig.bind,o=G7(r);e=n._el=e?qT(n,e,!0):null,WDe(n),o||n.error("Unrecognized renderer type: "+r);let a=o.handler||xc,s=e?o.renderer:o.headless;return n._renderer=s?Pte(n,n._renderer,e,s):null,n._handler=Mze(n,n._handler,e,a),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=qT(n,t,!0):e.appendChild(go("form",{class:"vega-bindings"})),n._bind.forEach(c=>{c.param.element&&i!=="container"&&(c.element=qT(n,c.param.element,!!c.param.input))}),n._bind.forEach(c=>{pze(n,c.element||t,c)})),n}function qT(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}var jp=e=>+e||0,Sze=e=>({top:e,bottom:e,left:e,right:e});function Nte(e){return ne(e)?{top:jp(e.top),bottom:jp(e.bottom),left:jp(e.left),right:jp(e.right)}:Sze(jp(e))}function YT(e,t,n,r){return Gt(this,null,function*(){let i=G7(t),o=i&&i.headless;return o||B("Unrecognized renderer type: "+t),yield e.runAsync(),Pte(e,null,null,o,n,r).renderAsync(e._scenegraph.root)})}function Eze(e,t){return Gt(this,null,function*(){e!==Cc.Canvas&&e!==Cc.SVG&&e!==Cc.PNG&&B("Unrecognized image type: "+e);let n=yield YT(this,e,t);return e===Cc.SVG?Dze(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")})}function Dze(e,t){let n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function zze(e,t){return Gt(this,null,function*(){return(yield YT(this,Cc.Canvas,e,t)).canvas()})}function Hze(e){return Gt(this,null,function*(){return(yield YT(this,Cc.SVG,e)).svg()})}function Lze(e,t,n){return FC(e,fc,lf,n).parse(t)}function Aze(e){var t=this._runtime.scales;return de(t,e)||B("Unrecognized scale or projection: "+e),t[e].value}var $te="width",Bte="height",XT="padding",_te={skip:!0};function Ute(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===XT?r.left+r.right:0)}function jte(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===XT?r.top+r.bottom:0)}function Vze(e){var t=e._signals,n=t[$te],r=t[Bte],i=t[XT];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,s=>{e._width=s.size,e._viewWidth=Ute(e,s.size),o()},{size:n}),e._resizeHeight=e.add(null,s=>{e._height=s.size,e._viewHeight=jte(e,s.size),o()},{size:r});let a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function Nze(e,t,n,r,i,o){this.runAfter(a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal($te,n,_te),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(Bte,r,_te),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter(c=>c.resize())},!1,1)}function _ze(e){return this._runtime.getState(e||{data:kze,signals:Tze,recurse:!0})}function kze(e,t){return t.modified&&F(t.input.value)&&!e.startsWith("_:vega:_")}function Tze(e,t){return!(e==="parent"||t instanceof fc.proxy)}function Ize(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Fze(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(fk(n,t))}function Rze(e,t,n,r){let i=e.element();i&&i.setAttribute("title",Oze(r))}function Oze(e){return e==null?"":F(e)?qte(e):ne(e)&&!A2(e)?Pze(e):e+""}function Pze(e){return Object.keys(e).map(t=>{let n=e[t];return t+": "+(F(n)?qte(n):Gte(n))}).join(`
`)}function qte(e){return"["+e.map(Gte).join(", ")+"]"}function Gte(e){return F(e)?"[\u2026]":ne(e)&&!A2(e)?"{\u2026}":e}function $ze(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null,t=()=>{e?.();let n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function QT(e,t){let n=this;if(t=t||{},I3.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){let o=Te({},e.locale,t.locale);n.locale(wv(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Cc.Canvas,n._scenegraph=new bx;let r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Rze,n._redraw=!0,n._handler=new xc().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=oze(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);let i=Lze(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:Te({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Ute(n,n._width),n._viewHeight=jte(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Vze(n),YDe(n),XDe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function OC(e,t){return de(e._signals,t)?e._signals[t]:B("Unrecognized signal name: "+Z(t))}function Wte(e,t){let n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function kte(e,t,n,r){let i=Wte(n,r);return i||(i=WT(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Tte(e,t,n){let r=Wte(t,n);return r&&t._targets.remove(r),e}ee(QT,I3,{evaluate(e,t,n){return Gt(this,null,function*(){if(yield I3.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,JDe(this)),yield this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&Id(this,n),this})},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){let t=e!=null?e+"":null;return t!==this._desc&&Ite(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){let r=OC(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Nte(e)):Nte(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(G7(e)||B("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(I3.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(OC(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Nze,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=WT(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){let t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return kte(this,e,OC(this,e),t)},removeSignalListener(e,t){return Tte(this,OC(this,e),t)},addDataListener(e,t){return kte(this,e,PC(this,e).values,t)},removeDataListener(e,t){return Tte(this,PC(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){let t=GT(this,null);this._globalCursor=!!e,t&&GT(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Fze,events:sze,finalize:lze,hover:cze,data:QDe,change:BC,insert:KDe,remove:ZDe,scale:Aze,initialize:wze,toImageURL:Eze,toCanvas:zze,toSVG:Hze,getState:_ze,setState:Ize,_watchPixelRatio:$ze});var Bze="view",jC="[",qC="]",Yte="{",Xte="}",Uze=":",Qte=",",jze="@",qze=">",Gze=/[[\]{}]/,Wze={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Kte,Zte;function _i(e,t,n){return Kte=t||Bze,Zte=n||Wze,Jte(e.trim()).map(KT)}function Yze(e){return Zte[e]}function qp(e,t,n,r,i){let o=e.length,a=0,s;for(;t<o;++t){if(s=e[t],!a&&s===n)return t;i&&i.indexOf(s)>=0?--a:r&&r.indexOf(s)>=0&&++a}return t}function Jte(e){let t=[],n=e.length,r=0,i=0;for(;i<n;)i=qp(e,i,Qte,jC+Yte,qC+Xte),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function KT(e){return e[0]==="["?Xze(e):Qze(e)}function Xze(e){let t=e.length,n=1,r;if(n=qp(e,n,qC,jC,qC),n===t)throw"Empty between selector: "+e;if(r=Jte(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==qze)throw"Expected '>' after between selector: "+e;r=r.map(KT);let i=KT(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Qze(e){let t={source:Kte},n=[],r=[0,0],i=0,o=0,a=e.length,s=0,c,l;if(e[a-1]===Xte){if(s=e.lastIndexOf(Yte),s>=0){try{r=Kze(e.substring(s+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,s).trim(),a=e.length}else throw"Unmatched right brace: "+e;s=0}if(!a)throw e;if(e[0]===jze&&(i=++s),c=qp(e,s,Uze),c<a&&(n.push(e.substring(o,c).trim()),o=s=++c),s=qp(e,s,jC),s===a)n.push(e.substring(o,a).trim());else if(n.push(e.substring(o,s).trim()),l=[],o=++s,o===a)throw"Unmatched left bracket: "+e;for(;s<a;){if(s=qp(e,s,qC),s===a)throw"Unmatched left bracket: "+e;if(l.push(e.substring(o,s).trim()),s<a-1&&e[++s]!==jC)throw"Expected left bracket: "+e;o=++s}if(!(a=n.length)||Gze.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],i?t.markname=n[0].slice(1):Yze(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Kze(e){let t=e.split(Qte);if(!e.length||t.length>2)throw e;return t.map(n=>{let r=+n;if(r!==r)throw e;return r})}function Zze(e){return ne(e)?e:{type:e||"pad"}}var Gp=e=>+e||0,Jze=e=>({top:e,bottom:e,left:e,right:e});function eHe(e){return ne(e)?e.signal?e:{top:Gp(e.top),bottom:Gp(e.bottom),left:Gp(e.left),right:Gp(e.right)}:Jze(Gp(e))}var Nr=e=>ne(e)&&!F(e)?Te({},e):{value:e};function ene(e,t,n,r){return n!=null?(ne(n)&&!F(n)||F(n)&&n.length&&ne(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function ii(e,t,n){for(let r in t)ene(e,r,t[r]);for(let r in n)ene(e,r,n[r],"update")}function mf(e,t,n){for(let r in t)n&&de(n,r)||(e[r]=Te(e[r]||{},t[r]));return e}function ff(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}var cI="mark",lI="frame",uI="scope",tHe="axis",nHe="axis-domain",rHe="axis-grid",iHe="axis-label",oHe="axis-tick",aHe="axis-title",sHe="legend",cHe="legend-band",lHe="legend-entry",uHe="legend-gradient",xne="legend-label",fHe="legend-symbol",dHe="legend-title",pHe="title",hHe="title-text",mHe="title-subtitle";function gHe(e,t,n,r,i){let o={},a={},s,c,l,u;c="lineBreak",t==="text"&&i[c]!=null&&!ff(c,e)&&ZT(o,c,i[c]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),u=n===lI?i.group:n===cI?Te({},i.mark,i[t]):null;for(c in u)l=ff(c,e)||(c==="fill"||c==="stroke")&&(ff("fill",e)||ff("stroke",e)),l||ZT(o,c,u[c]);te(r).forEach(f=>{let d=i.style&&i.style[f];for(let p in d)ff(p,e)||ZT(o,p,d[p])}),e=Te({},e);for(c in o)u=o[c],u.signal?(s=s||{})[c]=u:a[c]=u;return e.enter=Te(a,e.enter),s&&(e.update=Te(s,e.update)),e}function ZT(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}var Cne=e=>Q(e)?Z(e):e.signal?`(${e.signal})`:bne(e);function JC(e){if(e.gradient!=null)return yHe(e);let t=e.signal?`(${e.signal})`:e.color?vHe(e.color):e.field!=null?bne(e.field):e.value!==void 0?Z(e.value):void 0;return e.scale!=null&&(t=xHe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${WC(e.exponent)})`),e.mult!=null&&(t+=`*${WC(e.mult)}`),e.offset!=null&&(t+=`+${WC(e.offset)}`),e.round&&(t=`round(${t})`),t}var GC=(e,t,n,r)=>`(${e}(${[t,n,r].map(JC).join(",")})+'')`;function vHe(e){return e.c?GC("hcl",e.h,e.c,e.l):e.h||e.s?GC("hsl",e.h,e.s,e.l):e.l||e.a?GC("lab",e.l,e.a,e.b):e.r||e.g||e.b?GC("rgb",e.r,e.g,e.b):null}function yHe(e){let t=[e.start,e.stop,e.count].map(n=>n==null?null:Z(n));for(;t.length&&je(t)==null;)t.pop();return t.unshift(Cne(e.gradient)),`gradient(${t.join(",")})`}function WC(e){return ne(e)?"("+JC(e)+")":e}function bne(e){return Mne(ne(e)?e:{datum:e})}function Mne(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):B("Invalid field reference: "+Z(e));return e.signal||(r=Q(r)?$o(r).map(Z).join("]["):Mne(r)),t+"["+r+"]"}function xHe(e,t){let n=Cne(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+WC(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function CHe(e){let t="";return e.forEach(n=>{let r=JC(n);t+=n.test?`(${n.test})?${r}:`:r}),je(t)===":"&&(t+="null"),t}function wne(e,t,n,r,i,o){let a={};o=o||{},o.encoders={$encode:a},e=gHe(e,t,n,r,i.config);for(let s in e)a[s]=bHe(e[s],t,o,i);return o}function bHe(e,t,n,r){let i={},o={};for(let a in e)e[a]!=null&&(i[a]=wHe(MHe(e[a]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function MHe(e){return F(e)?CHe(e):JC(e)}function wHe(e,t,n,r){let i=X2(e,t);return i.$fields.forEach(o=>r[o]=1),Te(n,i.$params),i.$expr}var SHe="outer",EHe=["value","update","init","react","bind"];function tne(e,t){B(e+' for "outer" push: '+Z(t))}function Sne(e,t){let n=e.name;if(e.push===SHe)t.signals[n]||tne("No prior signal definition",n),EHe.forEach(r=>{e[r]!==void 0&&tne("Invalid property ",r)});else{let r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function tI(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function eb(e,t,n,r){return new tI(e,t,n,r)}function ZC(e,t){return eb("operator",e,t)}function _e(e){let t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Xp(e,t){return t?{$field:e,$name:t}:{$field:e}}var nI=Xp("key");function nne(e,t){return{$compare:e,$order:t}}function DHe(e,t){let n={$key:e};return t&&(n.$flat=!0),n}var zHe="ascending",HHe="descending";function LHe(e){return ne(e)?(e.order===HHe?"-":"+")+tb(e.op,e.field):""}function tb(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}var fI="scope",rI="view";function xr(e){return e&&e.signal}function AHe(e){return e&&e.expr}function YC(e){if(xr(e))return!0;if(ne(e)){for(let t in e)if(YC(e[t]))return!0}return!1}function Q2(e,t){return e??t}function m0(e){return e&&e.signal||e}var rne="timer";function Qp(e,t){return(e.merge?NHe:e.stream?_He:e.type?kHe:B("Invalid stream specification: "+Z(e)))(e,t)}function VHe(e){return e===fI?rI:e||rI}function NHe(e,t){let n=e.merge.map(i=>Qp(i,t)),r=dI({merge:n},e,t);return t.addStream(r).id}function _He(e,t){let n=Qp(e.stream,t),r=dI({stream:n},e,t);return t.addStream(r).id}function kHe(e,t){let n;e.type===rne?(n=t.event(rne,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(VHe(e.source),e.type);let r=dI({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function dI(e,t,n){let r=t.between;return r&&(r.length!==2&&B('Stream "between" parameter must have 2 entries: '+Z(t)),e.between=[Qp(r[0],n),Qp(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(THe(t.marktype,t.markname,t.markrole)),t.source===fI&&r.push("inScope(event.item)"),r.length&&(e.filter=X2("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function THe(e,t,n){let r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}var IHe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function FHe(e,t,n){let r=e.encode,i={target:n},o=e.events,a=e.update,s=[];o||B("Signal update missing events specification."),Q(o)&&(o=_i(o,t.isSubscope()?fI:rI)),o=te(o).filter(c=>c.signal||c.scale?(s.push(c),0):1),s.length>1&&(s=[OHe(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),r!=null&&(a&&B("Signal encode and update are mutually exclusive."),a="encode(item(),"+Z(r)+")"),i.update=Q(a)?X2(a,t):a.expr!=null?X2(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:IHe,$params:{$value:t.signalRef(a.signal)}}:B("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach(c=>t.addUpdate(Te(RHe(c,t),i)))}function RHe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Qp(e,t)}}function OHe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function PHe(e,t){let n=t.getSignal(e.name),r=e.update;e.init&&(r?B("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=X2(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>FHe(i,t,n.id))}var jt=e=>(t,n,r)=>eb(e,n,t||void 0,r),Ene=jt("aggregate"),$He=jt("axisticks"),Dne=jt("bound"),Z2=jt("collect"),ine=jt("compare"),BHe=jt("datajoin"),zne=jt("encode"),UHe=jt("expression"),jHe=jt("facet"),qHe=jt("field"),GHe=jt("key"),WHe=jt("legendentries"),YHe=jt("load"),XHe=jt("mark"),QHe=jt("multiextent"),KHe=jt("multivalues"),ZHe=jt("overlap"),JHe=jt("params"),Hne=jt("prefacet"),eLe=jt("projection"),tLe=jt("proxy"),nLe=jt("relay"),Lne=jt("render"),rLe=jt("scale"),v0=jt("sieve"),iLe=jt("sortitems"),Ane=jt("viewlayout"),oLe=jt("values"),aLe=0,Vne={min:"min",max:"max",count:"sum"};function sLe(e,t){let n=e.type||"linear";bV(n)||B("Unrecognized scale type: "+Z(n)),t.addScale(e.name,{type:n,domain:void 0})}function cLe(e,t){let n=t.getScale(e.name).params,r;n.domain=Nne(e.domain,e,t),e.range!=null&&(n.range=kne(e,t,n)),e.interpolate!=null&&yLe(e.interpolate,n),e.nice!=null&&(n.nice=vLe(e.nice,t)),e.bins!=null&&(n.bins=gLe(e.bins,t));for(r in e)de(n,r)||r==="name"||(n[r]=t2(e[r],t))}function t2(e,t){return ne(e)?e.signal?t.signalRef(e.signal):B("Unsupported object: "+Z(e)):e}function XC(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>t2(n,t))}function nb(e){B("Can not find data set: "+Z(e))}function Nne(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&B("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(F(e)?lLe:e.fields?fLe:uLe)(e,t,n)}function lLe(e,t,n){return e.map(r=>t2(r,n))}function uLe(e,t,n){let r=n.getData(e.data);return r||nb(e.data),Y3(t.type)?r.valuesRef(n,e.field,_ne(e.sort,!1)):SV(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function fLe(e,t,n){let r=e.data,i=e.fields.reduce((o,a)=>(a=Q(a)?{data:r,field:a}:F(a)||a.signal?dLe(a,n):a,o.push(a),o),[]);return(Y3(t.type)?pLe:SV(t.type)?hLe:mLe)(e,n,i)}function dLe(e,t){let n="_:vega:_"+aLe++,r=Z2({});if(F(e))r.value={$ingest:e};else if(e.signal){let i="setdata("+Z(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,v0({})]),{data:n,field:"data"}}function pLe(e,t,n){let r=_ne(e.sort,!0),i,o,a=n.map(l=>{let u=t.getData(l.data);return u||nb(l.data),u.countsRef(t,l.field,r)}),s={groupby:nI,pulse:a};r&&(i=r.op||"count",o=r.field?tb(i,r.field):"count",s.ops=[Vne[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(Ene(s));let c=t.add(Z2({pulse:_e(i)}));return o=t.add(oLe({field:nI,sort:t.sortRef(r),pulse:_e(c)})),_e(o)}function _ne(e,t){return e&&(!e.field&&!e.op?ne(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?B("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Vne[e.op]&&B("Multiple domain scales can not be sorted using "+e.op)),e}function hLe(e,t,n){let r=n.map(i=>{let o=t.getData(i.data);return o||nb(i.data),o.domainRef(t,i.field)});return _e(t.add(KHe({values:r})))}function mLe(e,t,n){let r=n.map(i=>{let o=t.getData(i.data);return o||nb(i.data),o.extentRef(t,i.field)});return _e(t.add(QHe({extents:r})))}function gLe(e,t){return e.signal||F(e)?XC(e,t):t.objectProperty(e)}function vLe(e,t){return e.signal?t.signalRef(e.signal):ne(e)?{interval:t2(e.interval),step:t2(e.step)}:t2(e)}function yLe(e,t){t.interpolate=t2(e.type||e),e.gamma!=null&&(t.interpolateGamma=t2(e.gamma))}function kne(e,t,n){let r=t.config.range,i=e.range;if(i.signal)return t.signalRef(i.signal);if(Q(i)){if(r&&de(r,i))return e=Te({},e,{range:r[i]}),kne(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Y3(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:B("Unrecognized scale range value: "+Z(i))}else if(i.scheme){n.scheme=F(i.scheme)?XC(i.scheme,t):t2(i.scheme,t),i.extent&&(n.schemeExtent=XC(i.extent,t)),i.count&&(n.schemeCount=t2(i.count,t));return}else if(i.step){n.rangeStep=t2(i.step,t);return}else{if(Y3(e.type)&&!F(i))return Nne(i,e,t);F(i)||B("Unsupported range type: "+Z(i))}return i.map(o=>(F(o)?XC:t2)(o,t))}function xLe(e,t){let n=t.config.projection||{},r={};for(let i in e)i!=="name"&&(r[i]=iI(e[i],i,t));for(let i in n)r[i]==null&&(r[i]=iI(n[i],i,t));t.addProjection(e.name,r)}function iI(e,t,n){return F(e)?e.map(r=>iI(r,t,n)):ne(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:B("Unsupported parameter object: "+Z(e)):e}var J2="top",gf="left",vf="right",g4="bottom",Tne="center",CLe="vertical",bLe="start",MLe="middle",wLe="end",oI="index",pI="label",SLe="offset",hf="perc",ELe="perc2",n2="value",Zp="guide-label",hI="guide-title",DLe="group-title",zLe="group-subtitle",one="symbol",QC="gradient",aI="discrete",sI="size",HLe="shape",LLe="fill",ALe="stroke",VLe="strokeWidth",NLe="strokeDash",_Le="opacity",mI=[sI,HLe,LLe,ALe,VLe,NLe,_Le],Jp={name:1,style:1,interactive:1},yt={value:0},r2={value:1},rb="group",Ine="rect",gI="rule",kLe="symbol",y0="text";function Kp(e){return e.type=rb,e.interactive=e.interactive||!1,e}function P1(e,t){let n=(r,i)=>Q2(e[r],Q2(t[r],i));return n.isVertical=r=>CLe===Q2(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Q2(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Q2(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Q2(e.columns,Q2(t.columns,+n.isVertical(!0))),n}function Fne(e,t){let n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function TLe(e,t,n){let r=t.config.style[n];return r&&r[e]}function ib(e,t,n){return`item.anchor === '${bLe}' ? ${e} : item.anchor === '${wLe}' ? ${t} : ${n}`}var vI=ib(Z(gf),Z(vf),Z(Tne));function ILe(e){let t=e("tickBand"),n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ne(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function Rne(e,t){return t?e?ne(e)?Object.assign({},e,{offset:Rne(e.offset,t)}):{value:e,offset:t}:t:e}function vo(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=mf(e.encode,t,Jp)):e.interactive=!1,e}function FLe(e,t,n,r){let i=P1(e,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength(),c,l,u,f,d;o?(l=[0,1],u=[0,0],f=a,d=s):(l=[0,0],u=[1,0],f=s,d=a);let p={enter:c={opacity:yt,x:yt,y:yt,width:Nr(f),height:Nr(d)},update:Te({},c,{opacity:r2,fill:{gradient:t,start:l,stop:u}}),exit:{opacity:yt}};return ii(p,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),vo({type:Ine,role:uHe,encode:p},r)}function RLe(e,t,n,r,i){let o=P1(e,n),a=o.isVertical(),s=o.gradientThickness(),c=o.gradientLength(),l,u,f,d,p="";a?(l="y",f="y2",u="x",d="width",p="1-"):(l="x",f="x2",u="y",d="height");let h={opacity:yt,fill:{scale:t,field:n2}};h[l]={signal:p+"datum."+hf,mult:c},h[u]=yt,h[f]={signal:p+"datum."+ELe,mult:c},h[d]=Nr(s);let m={enter:h,update:Te({},h,{opacity:r2}),exit:{opacity:yt}};return ii(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),vo({type:Ine,role:cHe,key:n2,from:i,encode:m},r)}var OLe=`datum.${hf}<=0?"${gf}":datum.${hf}>=1?"${vf}":"${Tne}"`,PLe=`datum.${hf}<=0?"${g4}":datum.${hf}>=1?"${J2}":"${MLe}"`;function ane(e,t,n,r){let i=P1(e,t),o=i.isVertical(),a=Nr(i.gradientThickness()),s=i.gradientLength(),c=i("labelOverlap"),l,u,f,d,p="",h={enter:l={opacity:yt},update:u={opacity:r2,text:{field:pI}},exit:{opacity:yt}};return ii(h,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Q2(e.labelLimit,t.gradientLabelLimit)}),o?(l.align={value:"left"},l.baseline=u.baseline={signal:PLe},f="y",d="x",p="1-"):(l.align=u.align={signal:OLe},l.baseline={value:"top"},f="x",d="y"),l[f]=u[f]={signal:p+"datum."+hf,mult:s},l[d]=u[d]=a,a.offset=Q2(e.labelOffset,t.gradientLabelOffset)||0,c=c?{separation:i("labelSeparation"),method:c,order:"datum."+oI}:void 0,vo({type:y0,role:xne,style:Zp,key:n2,from:r,encode:h,overlap:c},n)}function $Le(e,t,n,r,i){let o=P1(e,t),a=n.entries,s=!!(a&&a.interactive),c=a?a.name:void 0,l=o("clipHeight"),u=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${SLe} : datum.${sI}`,p=l?Nr(l):{field:sI},h=`datum.${oI}`,m=`max(1, ${i})`,g,v,y,C,b;p.mult=.5,g={enter:v={opacity:yt,x:{signal:d,mult:.5,offset:u},y:p},update:y={opacity:r2,x:v.x,y:v.y},exit:{opacity:yt}};let M=null,S=null;e.fill||(M=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),ii(g,{fill:o("symbolFillColor",M),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",S),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),mI.forEach(L=>{e[L]&&(y[L]=v[L]={scale:e[L],field:n2})});let w=vo({type:kLe,role:fHe,key:n2,from:f,clip:l?!0:void 0,encode:g},n.symbols),E=Nr(u);E.offset=o("labelOffset"),g={enter:v={opacity:yt,x:{signal:d,offset:E},y:p},update:y={opacity:r2,text:{field:pI},x:v.x,y:v.y},exit:{opacity:yt}},ii(g,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});let D=vo({type:y0,role:xne,style:Zp,key:n2,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:yt,height:l?Nr(l):yt,opacity:yt},exit:{opacity:yt},update:y={opacity:r2,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(C=`ceil(item.mark.items.length / ${m})`,y.row.signal=`${h}%${C}`,y.column.signal=`floor(${h} / ${C})`,b={field:["row",h]}):(y.row.signal=`floor(${h} / ${m})`,y.column.signal=`${h} % ${m}`,b={field:h}),y.column.signal=`(${i})?${y.column.signal}:${h}`,r={facet:{data:r,name:"value",groupby:oI}},Kp({role:uI,from:r,encode:mf(g,a,Jp),marks:[w,D],name:c,interactive:s,sort:b})}function BLe(e,t){let n=P1(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}var yI='item.orient === "left"',xI='item.orient === "right"',ob=`(${yI} || ${xI})`,ULe=`datum.vgrad && ${ob}`,jLe=ib('"top"','"bottom"','"middle"'),qLe=ib('"right"','"left"','"center"'),GLe=`datum.vgrad && ${xI} ? (${qLe}) : (${ob} && !(datum.vgrad && ${yI})) ? "left" : ${vI}`,WLe=`item._anchor || (${ob} ? "middle" : "start")`,YLe=`${ULe} ? (${yI} ? -90 : 90) : 0`,XLe=`${ob} ? (datum.vgrad ? (${xI} ? "bottom" : "top") : ${jLe}) : "top"`;function QLe(e,t,n,r){let i=P1(e,t),o={enter:{opacity:yt},update:{opacity:r2,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:yt}};return ii(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:WLe},angle:{signal:YLe},align:{signal:GLe},baseline:{signal:XLe},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),vo({type:y0,role:dHe,style:hI,from:r,encode:o},n)}function KLe(e,t){let n;return ne(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+sne(e.path)+")":e.sphere&&(n="geoShape("+sne(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function sne(e){return ne(e)&&e.signal?e.signal:Z(e)}function One(e){let t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===rb?uI:t||cI}function ZLe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||One(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function JLe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function CI(e,t){let n=_v(e.type);n||B("Unrecognized transform type: "+Z(e.type));let r=eb(n.type.toLowerCase(),null,Pne(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Pne(e,t,n){let r={},i=e.params.length;for(let o=0;o<i;++o){let a=e.params[o];r[a.name]=eAe(a,t,n)}return r}function eAe(e,t,n){let r=e.type,i=t[e.name];if(r==="index")return tAe(e,t,n);if(i===void 0){e.required&&B("Missing required "+Z(t.type)+" parameter: "+Z(e.name));return}else{if(r==="param")return nAe(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!xr(i)?i.map(o=>cne(e,o,n)):cne(e,i,n)}function cne(e,t,n){let r=e.type;if(xr(t))return une(r)?B("Expression references can not be signals."):JT(r)?n.fieldRef(t):fne(r)?n.compareRef(t):n.signalRef(t.signal);{let i=e.expr||JT(r);return i&&rAe(t)?n.exprRef(t.expr,t.as):i&&iAe(t)?Xp(t.field,t.as):une(r)?X2(t,n):oAe(r)?_e(n.getData(t).values):JT(r)?Xp(t):fne(r)?n.compareRef(t):t}}function tAe(e,t,n){return Q(t.from)||B('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function nAe(e,t,n){let r=t[e.name];return e.array?(F(r)||B("Expected an array of sub-parameters. Instead: "+Z(r)),r.map(i=>lne(e,i,n))):lne(e,r,n)}function lne(e,t,n){let r=e.params.length,i;for(let a=0;a<r;++a){i=e.params[a];for(let s in i.key)if(i.key[s]!==t[s]){i=null;break}if(i)break}i||B("Unsupported parameter: "+Z(t));let o=Te(Pne(i,t,n),i.key);return _e(n.add(JHe(o)))}var rAe=e=>e&&e.expr,iAe=e=>e&&e.field,oAe=e=>e==="data",une=e=>e==="expr",JT=e=>e==="field",fne=e=>e==="compare";function aAe(e,t,n){let r,i,o,a,s;return e?(r=e.facet)&&(t||B("Only group marks can be faceted."),r.field!=null?a=s=KC(r,n):(e.data?s=_e(n.getData(e.data).aggregate):(o=CI(Te({type:"aggregate",groupby:te(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=KC(r,n),a=s=_e(n.add(o))),i=n.keyRef(r.groupby,!0))):a=_e(n.add(Z2(null,[{}]))),a||(a=KC(e,n)),{key:i,pulse:a,parent:s}}function KC(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:_e(t.getData(e.data).output)}function g0(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}g0.fromEntries=function(e,t){let n=t.length,r=t[n-1],i=t[n-2],o=t[0],a=null,s=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=_e(t[s-1]),e.add(t[s]),t[s].type==="aggregate"&&(a=t[s]);return new g0(e,o,i,r,a)};function $ne(e){return Q(e)?e:null}function dne(e,t,n){let r=tb(n.op,n.field),i;if(t.ops){for(let o=0,a=t.as.length;o<a;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function Wp(e,t,n,r,i,o,a){let s=t[n]||(t[n]={}),c=LHe(o),l=$ne(i),u,f;if(l!=null&&(e=t.scope,l=l+(c?"|"+c:""),u=s[l]),!u){let d=o?{field:nI,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:_e(t.output)};c&&(d.sort=e.sortRef(o)),f=e.add(eb(r,void 0,d)),a&&(t.index[i]=f),u=_e(f),l!=null&&(s[l]=u)}return u}g0.prototype={countsRef(e,t,n){let r=this,i=r.counts||(r.counts={}),o=$ne(t),a,s,c;return o!=null&&(e=r.scope,a=i[o]),a?n&&n.field&&dne(e,a.agg.params,n):(c={groupby:e.fieldRef(t,"key"),pulse:_e(r.output)},n&&n.field&&dne(e,c,n),s=e.add(Ene(c)),a=e.add(Z2({pulse:_e(s)})),a={agg:s,ref:_e(a)},o!=null&&(i[o]=a)),a.ref},tuplesRef(){return _e(this.values)},extentRef(e,t){return Wp(e,this,"extent","extent",t,!1)},domainRef(e,t){return Wp(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Wp(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Wp(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Wp(e,this,"indata","tupleindex",t,!0,!0)}};function sAe(e,t,n){let r=e.from.facet,i=r.name,o=KC(r,t),a;r.name||B("Facet must have a name: "+Z(r)),r.data||B("Facet must reference a data set: "+Z(r)),r.field?a=t.add(Hne({field:t.fieldRef(r.field),pulse:o})):r.groupby?a=t.add(jHe({key:t.keyRef(r.groupby),group:_e(t.proxy(n.parent)),pulse:o})):B("Facet must specify groupby or field: "+Z(r));let s=t.fork(),c=s.add(Z2()),l=s.add(v0({pulse:_e(c)}));s.addData(i,new g0(s,c,c,l)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}function cAe(e,t,n){let r=t.add(Hne({pulse:n.pulse})),i=t.fork();i.add(v0()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function Bne(e,t,n){let r=e.remove,i=e.insert,o=e.toggle,a=e.modify,s=e.values,c=t.add(ZC()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,o,a,s].map(f=>f??"null").join(",")+"),0)",u=X2(l,t);c.update=u.$expr,c.params=u.$params}function ab(e,t){let n=One(e),r=e.type===rb,i=e.from&&e.from.facet,o=e.overlap,a=e.layout||n===uI||n===lI,s,c,l,u,f,d,p,h=n===cI||a||i,m=aAe(e.from,r,t);c=t.add(BHe({key:m.key||(e.key?Xp(e.key):void 0),pulse:m.pulse,clean:!r}));let g=_e(c);c=l=t.add(Z2({pulse:g})),c=t.add(XHe({markdef:ZLe(e),interactive:JLe(e.interactive,t),clip:KLe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:_e(c)}));let v=_e(c);c=u=t.add(zne(wne(e.encode,e.type,n,e.style,t,{mod:!1,pulse:v}))),c.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{let w=CI(S,t),E=w.metadata;(E.generates||E.changes)&&B("Mark transforms should not generate new data."),E.nomod||(u.params.mod=!0),w.params.pulse=_e(c),t.add(c=w)}),e.sort&&(c=t.add(iLe({sort:t.compareRef(e.sort),pulse:_e(c)})));let y=_e(c);(i||a)&&(a=t.add(Ane({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:y})),d=_e(a));let C=t.add(Dne({mark:v,pulse:d||y}));p=_e(C),r&&(h&&(s=t.operators,s.pop(),a&&s.pop()),t.pushState(y,d||p,g),i?sAe(e,t,m):h?cAe(e,t,m):t.parse(e),t.popState(),h&&(a&&s.push(a),s.push(C))),o&&(p=lAe(o,p,t));let b=t.add(Lne({pulse:p})),M=t.add(v0({pulse:_e(b)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new g0(t,l,b,M)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&B("Marks only support modify triggers."),Bne(S,t,f)}))}function lAe(e,t,n){let r=e.method,i=e.bound,o=e.separation,a={separation:xr(o)?n.signalRef(o.signal):o,method:xr(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),i){let s=i.tolerance;a.boundTolerance=xr(s)?n.signalRef(s.signal):+s,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return _e(n.add(ZHe(a)))}function uAe(e,t){let n=t.config.legend,r=e.encode||{},i=P1(e,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,c=o.style,l={},u=0,f,d,p;mI.forEach(C=>e[C]?(l[C]=e[C],u=u||e[C]):0),u||B("Missing valid scale for legend.");let h=fAe(e,t.scaleType(u)),m={title:e.title!=null,scales:l,type:h,vgrad:h!=="symbol"&&i.isVertical()},g=_e(t.add(Z2(null,[m]))),v={enter:{x:{value:0},y:{value:0}}},y=_e(t.add(WHe(d={type:h,scale:t.scaleRef(u),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return h===QC?(p=[FLe(e,u,n,r.gradient),ane(e,n,r.labels,y)],d.count=d.count||t.signalRef(`max(2,2*floor((${m0(i.gradientLength())})/100))`)):h===aI?p=[RLe(e,u,n,r.gradient,y),ane(e,n,r.labels,y)]:(f=BLe(e,n),p=[$Le(e,n,r,y,m0(f.columns))],d.size=hAe(e,t,p[0].marks)),p=[Kp({role:lHe,from:g,encode:v,marks:p,layout:f,interactive:s})],m.title&&p.push(QLe(e,n,r.title,g)),ab(Kp({role:sHe,from:g,encode:mf(pAe(i,e,n),o,Jp),marks:p,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:c}),t)}function fAe(e,t){let n=e.type||one;return!e.type&&dAe(e)===1&&(e.fill||e.stroke)&&(n=M7(t)?QC:$y(t)?aI:one),n!==QC?n:$y(t)?aI:QC}function dAe(e){return mI.reduce((t,n)=>t+(e[n]?1:0),0)}function pAe(e,t,n){let r={enter:{},update:{}};return ii(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function hAe(e,t,n){let r=m0(pne("size",e,n)),i=m0(pne("strokeWidth",e,n)),o=m0(mAe(n[1].encode,t,Zp));return X2(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function pne(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Fne(e,n[0].encode)}function mAe(e,t,n){return Fne("fontSize",e)||TLe("fontSize",t,n)}var gAe=`item.orient==="${gf}"?-90:item.orient==="${vf}"?90:0`;function vAe(e,t){e=Q(e)?{text:e}:e;let n=P1(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,c=[],l={},u=_e(t.add(Z2(null,[l])));return c.push(CAe(e,n,yAe(e),u)),e.subtitle&&c.push(bAe(e,n,r.subtitle,u)),ab(Kp({role:pHe,from:u,encode:xAe(n,i),marks:c,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function yAe(e){let t=e.encode;return t&&t.title||Te({name:e.name,interactive:e.interactive,style:e.style},t)}function xAe(e,t){let n={enter:{},update:{}};return ii(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:vI},angle:{signal:gAe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),mf(n,t,Jp)}function CAe(e,t,n,r){let i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ii(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vo({type:y0,role:hHe,style:DLe,from:r,encode:a},n)}function bAe(e,t,n,r){let i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ii(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vo({type:y0,role:mHe,style:zLe,from:r,encode:a},n)}function MAe(e,t){let n=[];e.transform&&e.transform.forEach(r=>{n.push(CI(r,t))}),e.on&&e.on.forEach(r=>{Bne(r,t,e.name)}),t.addDataPipeline(e.name,wAe(e,t,n))}function wAe(e,t,n){let r=[],i=null,o=!1,a=!1,s,c,l,u,f;for(e.values?xr(e.values)||YC(e.format)?(r.push(hne(t,e)),r.push(i=h0())):r.push(i=h0({$ingest:e.values,$format:e.format})):e.url?YC(e.url)||YC(e.format)?(r.push(hne(t,e)),r.push(i=h0())):r.push(i=h0({$request:e.url,$format:e.format})):e.source&&(i=s=te(e.source).map(d=>_e(t.getData(d).output)),r.push(null)),c=0,l=n.length;c<l;++c)u=n[c],f=u.metadata,!i&&!f.source&&r.push(i=h0()),r.push(u),f.generates&&(a=!0),f.modifies&&!a&&(o=!0),f.source?i=u:f.changes&&(i=null);return s&&(l=s.length-1,r[0]=nLe({derive:o,pulse:l?s:s[0]}),(o||l)&&r.splice(1,0,h0())),i||r.push(h0()),r.push(v0({})),r}function h0(e){let t=Z2({},e);return t.metadata={source:!0},t}function hne(e,t){return YHe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}var Une=e=>e===g4||e===J2,sb=(e,t,n)=>xr(e)?zAe(e.signal,t,n):e===gf||e===J2?t:n,_r=(e,t,n)=>xr(e)?EAe(e.signal,t,n):Une(e)?t:n,K2=(e,t,n)=>xr(e)?DAe(e.signal,t,n):Une(e)?n:t,jne=(e,t,n)=>xr(e)?HAe(e.signal,t,n):e===J2?{value:t}:{value:n},SAe=(e,t,n)=>xr(e)?LAe(e.signal,t,n):e===vf?{value:t}:{value:n},EAe=(e,t,n)=>qne(`${e} === '${J2}' || ${e} === '${g4}'`,t,n),DAe=(e,t,n)=>qne(`${e} !== '${J2}' && ${e} !== '${g4}'`,t,n),zAe=(e,t,n)=>bI(`${e} === '${gf}' || ${e} === '${J2}'`,t,n),HAe=(e,t,n)=>bI(`${e} === '${J2}'`,t,n),LAe=(e,t,n)=>bI(`${e} === '${vf}'`,t,n),qne=(e,t,n)=>(t=t!=null?Nr(t):t,n=n!=null?Nr(n):n,mne(t)&&mne(n)?(t=t?t.signal||Z(t.value):null,n=n?n.signal||Z(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Te({test:e},t)].concat(n||[])),mne=e=>e==null||Object.keys(e).length===1,bI=(e,t,n)=>({signal:`${e} ? (${df(t)}) : (${df(n)})`}),AAe=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${gf}' ? (${df(r)}) : `:"")+(n!=null?`${e} === '${g4}' ? (${df(n)}) : `:"")+(i!=null?`${e} === '${vf}' ? (${df(i)}) : `:"")+(t!=null?`${e} === '${J2}' ? (${df(t)}) : `:"")+"(null)"}),df=e=>xr(e)?e.signal:e==null?null:Z(e),VAe=(e,t)=>t===0?0:xr(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},pf=(e,t)=>{let n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function uf(e,t,n,r){let i;if(t&&de(t,e))return t[e];if(de(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[hI][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Zp][i]}return null}function gne(e){let t={};for(let n of e)if(n)for(let r in n)t[r]=1;return Object.keys(t)}function NAe(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,s,c,l;if(xr(a)){let f=gne([n.axisX,n.axisY]),d=gne([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);s={};for(l of f)s[l]=_r(a,uf(l,n.axisX,i,r),uf(l,n.axisY,i,r));c={};for(l of d)c[l]=AAe(a.signal,uf(l,n.axisTop,i,r),uf(l,n.axisBottom,i,r),uf(l,n.axisLeft,i,r),uf(l,n.axisRight,i,r))}else s=a===J2||a===g4?n.axisX:n.axisY,c=n["axis"+a[0].toUpperCase()+a.slice(1)];return s||c||o?Te({},i,s,c,o):i}function _Ae(e,t,n,r){let i=P1(e,t),o=e.orient,a,s,c={enter:a={opacity:yt},update:s={opacity:r2},exit:{opacity:yt}};ii(c,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});let l=vne(e,0),u=vne(e,1);return a.x=s.x=_r(o,l,yt),a.x2=s.x2=_r(o,u),a.y=s.y=K2(o,l,yt),a.y2=s.y2=K2(o,u),vo({type:gI,role:nHe,from:r,encode:c},n)}function vne(e,t){return{scale:e.scale,range:t}}function kAe(e,t,n,r,i){let o=P1(e,t),a=e.orient,s=e.gridScale,c=sb(a,1,-1),l=TAe(e.offset,c),u,f,d,p={enter:u={opacity:yt},update:d={opacity:r2},exit:f={opacity:yt}};ii(p,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});let h={scale:e.scale,field:n2,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},m=_r(a,{signal:"height"},{signal:"width"}),g=s?{scale:s,range:0,mult:c,offset:l}:{value:0,offset:l},v=s?{scale:s,range:1,mult:c,offset:l}:Te(m,{mult:c,offset:l});return u.x=d.x=_r(a,h,g),u.y=d.y=K2(a,h,g),u.x2=d.x2=K2(a,v),u.y2=d.y2=_r(a,v),f.x=_r(a,h),f.y=K2(a,h),vo({type:gI,role:rHe,key:n2,from:r,encode:p},n)}function TAe(e,t){if(t!==1)if(!ne(e))e=xr(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Te({},e);for(;n.mult!=null;)if(ne(n.mult))n=n.mult=Te({},n.mult);else return n.mult=xr(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function IAe(e,t,n,r,i,o){let a=P1(e,t),s=e.orient,c=sb(s,-1,1),l,u,f,d={enter:l={opacity:yt},update:f={opacity:r2},exit:u={opacity:yt}};ii(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});let p=Nr(i);p.mult=c;let h={scale:e.scale,field:n2,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return f.y=l.y=_r(s,yt,h),f.y2=l.y2=_r(s,p),u.x=_r(s,h),f.x=l.x=K2(s,yt,h),f.x2=l.x2=K2(s,p),u.y=K2(s,h),vo({type:gI,role:oHe,key:n2,from:r,encode:d},n)}function eI(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function FAe(e,t,n,r,i,o){let a=P1(e,t),s=e.orient,c=e.scale,l=sb(s,-1,1),u=m0(a("labelFlush")),f=m0(a("labelFlushOffset")),d=a("labelAlign"),p=a("labelBaseline"),h=u===0||!!u,m,g=Nr(i);g.mult=l,g.offset=Nr(a("labelPadding")||0),g.offset.mult=l;let v={scale:c,field:n2,band:.5,offset:Rne(o.offset,a("labelOffset"))},y=_r(s,h?eI(c,u,'"left"','"right"','"center"'):{value:"center"},SAe(s,"left","right")),C=_r(s,jne(s,"bottom","top"),h?eI(c,u,'"top"','"bottom"','"middle"'):{value:"middle"}),b=eI(c,u,`-(${f})`,f,0);h=h&&f;let M={opacity:yt,x:_r(s,v,g),y:K2(s,v,g)},S={enter:M,update:m={opacity:r2,text:{field:pI},x:M.x,y:M.y,align:y,baseline:C},exit:{opacity:yt,x:M.x,y:M.y}};ii(S,{dx:!d&&h?_r(s,b):null,dy:!p&&h?K2(s,b):null}),ii(S,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:p});let w=a("labelBound"),E=a("labelOverlap");return E=E||w?{separation:a("labelSeparation"),method:E,order:"datum.index",bound:w?{scale:c,orient:s,tolerance:w}:null}:void 0,m.align!==y&&(m.align=pf(m.align,y)),m.baseline!==C&&(m.baseline=pf(m.baseline,C)),vo({type:y0,role:iHe,style:Zp,key:n2,from:r,encode:S,overlap:E},n)}function RAe(e,t,n,r){let i=P1(e,t),o=e.orient,a=sb(o,-1,1),s,c,l={enter:s={opacity:yt,anchor:Nr(i("titleAnchor",null)),align:{signal:vI}},update:c=Te({},s,{opacity:r2,text:Nr(e.title)}),exit:{opacity:yt}},u={signal:`lerp(range("${e.scale}"), ${ib(0,1,.5)})`};return c.x=_r(o,u),c.y=K2(o,u),s.angle=_r(o,yt,VAe(a,90)),s.baseline=_r(o,jne(o,g4,J2),{value:g4}),c.angle=s.angle,c.baseline=s.baseline,ii(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),OAe(i,o,l,n),l.update.align=pf(l.update.align,s.align),l.update.angle=pf(l.update.angle,s.angle),l.update.baseline=pf(l.update.baseline,s.baseline),vo({type:y0,role:aHe,style:hI,from:r,encode:l},n)}function OAe(e,t,n,r){let i=(s,c)=>s!=null?(n.update[c]=pf(Nr(s),n.update[c]),!1):!ff(c,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?Nr(a):_r(t,Nr(a),Nr(o))}function PAe(e,t){let n=NAe(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,c=P1(e,n),l=ILe(c),u={scale:e.scale,ticks:!!c("ticks"),labels:!!c("labels"),grid:!!c("grid"),domain:!!c("domain"),title:e.title!=null},f=_e(t.add(Z2({},[u]))),d=_e(t.add($He({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),p=[],h;return u.grid&&p.push(kAe(e,n,r.grid,d,l)),u.ticks&&(h=c("tickSize"),p.push(IAe(e,n,r.ticks,d,h,l))),u.labels&&(h=u.ticks?h:0,p.push(FAe(e,n,r.labels,d,h,l))),u.domain&&p.push(_Ae(e,n,r.domain,f)),u.title&&p.push(RAe(e,n,r.title,f)),ab(Kp({role:tHe,from:f,encode:mf($Ae(c,e),i,Jp),marks:p,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:o,interactive:a,style:s}),t)}function $Ae(e,t){let n={enter:{},update:{}};return ii(n,{orient:e("orient"),offset:e("offset")||0,position:Q2(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Gne(e,t,n){let r=te(e.signals),i=te(e.scales);return n||r.forEach(o=>Sne(o,t)),te(e.projections).forEach(o=>xLe(o,t)),i.forEach(o=>sLe(o,t)),te(e.data).forEach(o=>MAe(o,t)),i.forEach(o=>cLe(o,t)),(n||r).forEach(o=>PHe(o,t)),te(e.axes).forEach(o=>PAe(o,t)),te(e.marks).forEach(o=>ab(o,t)),te(e.legends).forEach(o=>uAe(o,t)),e.title&&vAe(e.title,t),t.parseLambdas(),t}var BAe=e=>mf({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function UAe(e,t){let n=t.config,r=_e(t.root=t.add(ZC())),i=jAe(e,n);i.forEach(l=>Sne(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;let o=t.add(Z2()),a=t.add(zne(wne(BAe(e.encode),rb,lI,e.style,t,{pulse:_e(o)}))),s=t.add(Ane({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:_e(a)}));t.operators.pop(),t.pushState(_e(a),_e(s),null),Gne(e,t,i),t.operators.push(s);let c=t.add(Dne({mark:r,pulse:_e(s)}));return c=t.add(Lne({pulse:_e(c)})),c=t.add(v0({pulse:_e(c)})),t.addData("root",new g0(t,o,o,c)),t}function Yp(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function jAe(e,t){let n=a=>Q2(e[a],t[a]),r=[Yp("background",n("background")),Yp("autosize",Zze(n("autosize"))),Yp("padding",eHe(n("padding"))),Yp("width",n("width")||0),Yp("height",n("height")||0)],i=r.reduce((a,s)=>(a[s.name]=s,a),{}),o={};return te(e.signals).forEach(a=>{de(i,a.name)?a=Te(i[a.name],a):r.push(a),o[a.name]=a}),te(t.signals).forEach(a=>{!de(o,a.name)&&!de(i,a.name)&&r.push(a)}),r}function Wne(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function yne(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Wne.prototype=yne.prototype={parse(e){return Gne(e,this)},fork(){return new yne(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){let t=e instanceof tI?_e(e):e;return this.add(tLe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let a,s;r&&(a=r.data||(r.data={}),s=a[i]||(a[i]=[]),s.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(let r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(_e(this.add(v0({pulse:e})))),this._parent.push(t),this._lookup.push(n?_e(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return je(this._parent)},encode(){return je(this._encode)},lookup(){return je(this._lookup)},markpath(){let e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Q(e))return Xp(e,t);e.signal||B("Unsupported field reference: "+Z(e));let n=e.signal,r=this.field[n];if(!r){let i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=_e(this.add(qHe(i)))}return r},compareRef(e){let t=!1,n=o=>xr(o)?(t=!0,this.signalRef(o.signal)):AHe(o)?(t=!0,this.exprRef(o.expr)):o,r=te(e.field).map(n),i=te(e.order).map(n);return t?_e(this.add(ine({fields:r,orders:i}))):nne(r,i)},keyRef(e,t){let n=!1,r=o=>xr(o)?(n=!0,_e(i[o.signal])):o,i=this.signals;return e=te(e).map(r),n?_e(this.add(GHe({fields:e,flat:t}))):DHe(e,t)},sortRef(e){if(!e)return e;let t=tb(e.op,e.field),n=e.order||zHe;return n.signal?_e(this.add(ine({fields:t,orders:this.signalRef(n.signal)}))):nne(t,n)},event(e,t){let n=e+":"+t;if(!this.events[n]){let r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return de(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&B("Duplicate signal name: "+Z(e));let n=t instanceof tI?t:this.add(ZC(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||B("Unrecognized signal name: "+Z(e)),this.signals[e]},signalRef(e){return this.signals[e]?_e(this.signals[e]):(de(this.lambdas,e)||(this.lambdas[e]=this.add(ZC(null))),_e(this.lambdas[e]))},parseLambdas(){let e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){let r=e[t],i=X2(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ne(e)?e:this.signalRef(e.signal||MI(e))},exprRef(e,t){let n={expr:X2(e,this)};return t&&(n.expr.$name=t),_e(this.add(UHe(n)))},addBinding(e,t){this.bindings||B("Nested signals do not support binding: "+Z(e)),this.bindings.push(Te({signal:e},t))},addScaleProj(e,t){de(this.scales,e)&&B("Duplicate scale or projection name: "+Z(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,rLe(t))},addProjection(e,t){this.addScaleProj(e,eLe(t))},getScale(e){return this.scales[e]||B("Unrecognized scale name: "+Z(e)),this.scales[e]},scaleRef(e){return _e(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return de(this.data,e)&&B("Duplicate data set name: "+Z(e)),this.data[e]=t},getData(e){return this.data[e]||B("Undefined data set name: "+Z(e)),this.data[e]},addDataPipeline(e,t){return de(this.data,e)&&B("Duplicate data set name: "+Z(e)),this.addData(e,g0.fromEntries(this,t))}};function MI(e){return(F(e)?qAe:GAe)(e)}function qAe(e){let t=e.length,n="[";for(let r=0;r<t;++r){let i=e[r];n+=(r>0?",":"")+(ne(i)?i.signal||MI(i):Z(i))}return n+"]"}function GAe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Z(r)+":"+(ne(i)?i.signal||MI(i):Z(i));return t+"}"}function WAe(){let e="sans-serif",r="#4c78a8",i="#000",o="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Yne(e,t,n){return ne(e)||B("Input Vega specification must be an object."),t=$a(WAe(),t,e.config),UAe(e,new Wne(t,n)).toRuntime()}var YAe="5.28.0";Te(fc,zA,TN,PN,ik,yk,aT,Xk,uT,pT,gT,xT);function XAe(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var QAe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},KAe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},ZAe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e},JAe=Array.prototype.slice,x0=(e,t,n)=>{let r=n?n(t[0]):t[0];return r[e].apply(r,JAe.call(t,1))},eVe=(e,t,n,r,i,o,a)=>new Date(e,t||0,n??1,r||0,i||0,o||0,a||0),tVe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:eVe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return x0("join",arguments)},indexof:function(){return x0("indexOf",arguments)},lastindexof:function(){return x0("lastIndexOf",arguments)},slice:function(){return x0("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return x0("substring",arguments,String)},split:function(){return x0("split",arguments,String)},replace:function(){return x0("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)},nVe=["view","item","group","xy","x","y"],SI=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&SI.add(setImmediate);var rVe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{let n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:QAe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{let n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);let i=e(t.property);if(n&&(e.memberDepth-=1),SI.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{let n=t.arguments,r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||tVe[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>KAe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>ZAe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;let i=e(r.key);return e.memberDepth-=1,SI.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function eh(e,t,n,r,i,o){let a=s=>rVe[s.type](a,s);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=r,a.event=i,a.item=o,nVe.forEach(s=>a.fn[s]=function(){return i.vega[s](...arguments)}),a(e)}var Xne={operator(e,t){let n=t.ast,r=e.functions;return i=>eh(n,r,i)},parameter(e,t){let n=t.ast,r=e.functions;return(i,o)=>eh(n,r,o,i)},event(e,t){let n=t.ast,r=e.functions;return i=>eh(n,r,void 0,void 0,i)},handler(e,t){let n=t.ast,r=e.functions;return(i,o)=>{let a=o.item&&o.item.datum;return eh(n,r,i,a,o)}},encode(e,t){let{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(a,s)=>{let c=a.datum,l=0,u;for(let f in r)u=eh(r[f].ast,i,s,c,void 0,a),a[f]!==u&&(a[f]=u,l=1);return n!=="rule"&&XAe(a,r,o),l}}};var vR={};Mr(vR,{accessPathDepth:()=>C0,accessPathWithDatum:()=>rh,compile:()=>iae,contains:()=>Ne,deepEqual:()=>kr,deleteNestedProperty:()=>nh,duplicate:()=>le,entries:()=>$1,every:()=>db,fieldIntersection:()=>hb,flatAccessWithDatum:()=>LI,getFirstDefined:()=>ot,hasIntersection:()=>pb,hash:()=>be,internalField:()=>VI,isBoolean:()=>xf,isEmpty:()=>We,isEqual:()=>aVe,isInternalField:()=>Jne,isNullOrFalse:()=>fb,isNumeric:()=>oh,keys:()=>O,logicalExpr:()=>yf,mergeDeep:()=>zI,never:()=>DI,normalize:()=>EM,normalizeAngle:()=>x4,omit:()=>On,pick:()=>Nc,prefixGenerator:()=>EI,removePathFromField:()=>ih,replaceAll:()=>ea,replacePathInField:()=>sr,resetIdCounter:()=>cVe,setEqual:()=>HI,some:()=>us,stringify:()=>ht,titleCase:()=>y4,unique:()=>ki,uniqueId:()=>AI,vals:()=>rn,varName:()=>pt,version:()=>OIe});var Qne={name:"vega-lite",author:'Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',version:"5.16.3",collaborators:["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-Lite is a concise high-level language for interactive visualization.",keywords:["vega","chart","visualization"],main:"build/vega-lite.js",unpkg:"build/vega-lite.min.js",jsdelivr:"build/vega-lite.min.js",module:"build/src/index",types:"build/src/index.d.ts",bin:{vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},files:["bin","build","src","vega-lite*","tsconfig.json"],scripts:{changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@babel/core":"^7.22.10","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-alias":"^5.0.0","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^25.0.4","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.2.1","@rollup/plugin-terser":"^0.4.3","@types/chai":"^4.3.5","@types/d3":"^7.4.0","@types/jest":"^29.5.4","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^6.4.1","@typescript-eslint/parser":"^6.4.1",ajv:"^8.12.0","ajv-formats":"^2.1.1",chai:"^4.3.7",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.0.0",d3:"^7.8.5","del-cli":"^5.0.0",eslint:"^8.47.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.8.0",jest:"^29.6.3","jest-dev-server":"^9.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.0.2",puppeteer:"^15.0.0","release-it":"^16.1.5",rollup:"^3.28.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3",serve:"^14.2.1",terser:"^5.19.2","ts-jest":"^29.1.1","ts-json-schema-generator":"^1.3.0",typescript:"~5.2.2","vega-cli":"^5.25.0","vega-datasets":"^2.7.0","vega-embed":"^6.22.2","vega-tooltip":"^0.33.0","yaml-front-matter":"^4.1.1"},dependencies:{"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},peerDependencies:{vega:"^5.24.0"},engines:{node:">=18"}};function cb(e){return!!e.or}function lb(e){return!!e.and}function ub(e){return!!e.not}function th(e,t){if(ub(e))th(e.not,t);else if(lb(e))for(let n of e.and)th(n,t);else if(cb(e))for(let n of e.or)th(n,t);else t(e)}function v4(e,t){return ub(e)?{not:v4(e.not,t)}:lb(e)?{and:e.and.map(n=>v4(n,t))}:cb(e)?{or:e.or.map(n=>v4(n,t))}:t(e)}var le=structuredClone;function DI(e){throw new Error(e)}function Nc(e,t){let n={};for(let r of t)de(e,r)&&(n[r]=e[r]);return n}function On(e,t){let n=x({},e);for(let r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>ht(e)).join(",")})`};function be(e){if(Oe(e))return e;let t=Q(e)?e:ht(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function fb(e){return e===!1||e===null}function Ne(e,t){return e.includes(t)}function us(e,t){let n=0;for(let[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function db(e,t){let n=0;for(let[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function zI(e,...t){for(let n of t)oVe(e,n??{});return e}function oVe(e,t){for(let n of O(t))tc(e,n,t[n],!0)}function ki(e,t){let n=[],r={},i;for(let o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function aVe(e,t){let n=O(e),r=O(t);if(n.length!==r.length)return!1;for(let i of n)if(e[i]!==t[i])return!1;return!0}function HI(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function pb(e,t){for(let n of e)if(t.has(n))return!0;return!1}function EI(e){let t=new Set;for(let n of e){let i=$o(n).map((a,s)=>s===0?a:`[${a}]`),o=i.map((a,s)=>i.slice(0,s+1).join(""));for(let a of o)t.add(a)}return t}function hb(e,t){return e===void 0||t===void 0?!0:pb(EI(e),EI(t))}function We(e){return O(e).length===0}var O=Object.keys,rn=Object.values,$1=Object.entries;function xf(e){return e===!0||e===!1}function pt(e){let t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function yf(e,t){return ub(e)?`!(${yf(e.not,t)})`:lb(e)?`(${e.and.map(n=>yf(n,t)).join(") && (")})`:cb(e)?`(${e.or.map(n=>yf(n,t)).join(") || (")})`:t(e)}function nh(e,t){if(t.length===0)return!0;let n=t.shift();return n in e&&nh(e[n],t)&&delete e[n],We(e)}function y4(e){return e.charAt(0).toUpperCase()+e.substr(1)}function rh(e,t="datum"){let n=$o(e),r=[];for(let i=1;i<=n.length;i++){let o=`[${n.slice(0,i).map(Z).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function LI(e,t="datum"){return`${t}[${Z($o(e).join("."))}]`}function sVe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function sr(e){return`${$o(e).map(sVe).join("\\.")}`}function ea(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function ih(e){return`${$o(e).join(".")}`}function C0(e){return e?$o(e).length:0}function ot(...e){for(let t of e)if(t!==void 0)return t}var Zne=42;function AI(e){let t=++Zne;return e?String(e)+t:t}function cVe(){Zne=42}function VI(e){return Jne(e)?e:`__${e}`}function Jne(e){return e.startsWith("__")}function x4(e){if(e!==void 0)return(e%360+360)%360}function oh(e){return Oe(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}var Kne=Object.getPrototypeOf(structuredClone({}));function kr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!kr(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!kr(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Kne.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Kne.toString)return e.toString()===t.toString();let i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){let o=i[r];if(!kr(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function ht(e){let t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");let a=t.push(r)-1,s=Object.keys(r).sort();for(o="",i=0;i<s.length;i++){let c=s[i],l=n(r[c]);l&&(o&&(o+=","),o+=JSON.stringify(c)+":"+l)}return t.splice(a,1),`{${o}}`}(e)}var B1="row",U1="column",Cf="facet",xt="x",on="y",j1="x2",yo="y2",i2="xOffset",fs="yOffset",Ti="radius",ta="radius2",oi="theta",na="theta2",ai="latitude",si="longitude",Ii="latitude2",ci="longitude2",Pn="color",Fi="fill",Ri="stroke",En="shape",q1="size",ra="angle",m1="opacity",xo="fillOpacity",Co="strokeOpacity",bo="strokeWidth",Mo="strokeDash",b0="text",C4="order",M0="detail",bf="key",_c="tooltip",Mf="href",wf="url",Sf="description",lVe={x:1,y:1,x2:1,y2:1},ore={theta:1,theta2:1,radius:1,radius2:1};function NI(e){return e in ore}var _I={longitude:1,longitude2:1,latitude:1,latitude2:1};function gb(e){switch(e){case ai:return"y";case Ii:return"y2";case si:return"x";case ci:return"x2"}}function vb(e){return e in _I}var are=O(_I),kI=k(x(x(x({},lVe),ore),_I),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function kc(e){return e===Pn||e===Fi||e===Ri}var sre={row:1,column:1,facet:1},Tr=O(sre),TI=x(x({},kI),sre),cre=O(TI),ere=TI,{order:Q6t,detail:K6t,tooltip:Z6t}=ere,lre=ie(ere,["order","detail","tooltip"]),tre=lre,{row:J6t,column:eut,facet:tut}=tre,ure=ie(tre,["row","column","facet"]),nut=O(lre),rut=O(ure);function fre(e){return!!ure[e]}function yb(e){return!!TI[e]}var dre=[j1,yo,Ii,ci,na,ta];function xb(e){return wo(e)!==e}function wo(e){switch(e){case j1:return xt;case yo:return on;case Ii:return ai;case ci:return si;case na:return oi;case ta:return Ti}return e}function o2(e){if(NI(e))switch(e){case oi:return"startAngle";case na:return"endAngle";case Ti:return"outerRadius";case ta:return"innerRadius"}return e}function Ir(e){switch(e){case xt:return j1;case on:return yo;case ai:return Ii;case si:return ci;case oi:return na;case Ti:return ta}}function Dn(e){switch(e){case xt:case j1:return"width";case on:case yo:return"height"}}function II(e){switch(e){case xt:return"xOffset";case on:return"yOffset";case j1:return"x2Offset";case yo:return"y2Offset";case oi:return"thetaOffset";case Ti:return"radiusOffset";case na:return"theta2Offset";case ta:return"radius2Offset"}}function Ef(e){switch(e){case xt:return"xOffset";case on:return"yOffset"}}function pre(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}var hre=O(kI),nre=kI,{x:iut,y:out,x2:aut,y2:sut,xOffset:cut,yOffset:lut,latitude:uut,longitude:fut,latitude2:dut,longitude2:put,theta:hut,theta2:mut,radius:gut,radius2:vut}=nre,FI=ie(nre,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),mre=O(FI),RI={x:1,y:1},Cr=O(RI);function Ct(e){return e in RI}var Cb={theta:1,radius:1},gre=O(Cb);function b4(e){return e==="width"?xt:on}var OI={xOffset:1,yOffset:1},yut=O(OI);function Tc(e){return e in OI}var rre=FI,{text:xut,tooltip:Cut,href:but,url:Mut,description:wut,detail:Sut,key:Eut,order:Dut}=rre,vre=ie(rre,["text","tooltip","href","url","description","detail","key","order"]),yre=O(vre);function xre(e){return!!FI[e]}function Cre(e){switch(e){case Pn:case Fi:case Ri:case q1:case En:case m1:case bo:case Mo:return!0;case xo:case Co:case ra:return!1}}var bre=x(x(x(x({},RI),Cb),OI),vre),M4=O(bre);function Fr(e){return!!bre[e]}function Mre(e,t){return fVe(e)[t]}var wre={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},ire=wre,{geoshape:zut}=ire,uVe=ie(ire,["geoshape"]);function fVe(e){switch(e){case Pn:case Fi:case Ri:case Sf:case M0:case bf:case _c:case Mf:case C4:case m1:case xo:case Co:case bo:case Cf:case B1:case U1:return wre;case xt:case on:case i2:case fs:case ai:case si:return uVe;case j1:case yo:case Ii:case ci:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case q1:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Mo:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case En:return{point:"always",geoshape:"always"};case b0:return{text:"always"};case ra:return{point:"always",square:"always",text:"always"};case wf:return{image:"always"};case oi:return{text:"always",arc:"always"};case Ti:return{text:"always",arc:"always"};case na:case ta:return{arc:"always"}}}function bb(e){switch(e){case xt:case on:case oi:case Ti:case i2:case fs:case q1:case ra:case bo:case m1:case xo:case Co:case j1:case yo:case na:case ta:return;case Cf:case B1:case U1:case En:case Mo:case b0:case _c:case Mf:case wf:case Sf:return"discrete";case Pn:case Fi:case Ri:return"flexible";case ai:case si:case Ii:case ci:case M0:case bf:case C4:return}}var pVe={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Sre={count:1,min:1,max:1};function So(e){return!!e&&!!e.argmin}function a2(e){return!!e&&!!e.argmax}function Df(e){return Q(e)&&!!pVe[e]}var hVe=new Set(["count","valid","missing","distinct"]);function Mb(e){return Q(e)&&hVe.has(e)}function Ere(e){return Q(e)&&Ne(["min","max"],e)}var Dre=new Set(["count","sum","distinct","valid","missing"]),zre=new Set(["mean","average","median","q1","q3","min","max"]);function wb(e){return A1(e)&&(e=Hf(e,void 0)),"bin"+O(e).map(t=>zf(e[t])?pt(`_${t}_${$1(e[t])}`):pt(`_${t}_${e[t]}`)).join("")}function et(e){return e===!0||ia(e)&&!e.binned}function an(e){return e==="binned"||ia(e)&&e.binned===!0}function ia(e){return ne(e)}function zf(e){return e?.param}function PI(e){switch(e){case B1:case U1:case q1:case Pn:case Fi:case Ri:case bo:case m1:case xo:case Co:case En:return 6;case Mo:return 4;default:return 10}}function w4(e){return!!e?.expr}function cr(e){let t=O(e||{}),n={};for(let r of t)n[r]=Rr(e[r]);return n}function Sb(e){let b=e,{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:a,color:s,subtitleColor:c,subtitleFont:l,subtitleFontSize:u,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:p,subtitlePadding:h}=b,m=ie(b,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),g=x(x({},m),s?{fill:s}:{}),v=x(x(x(x(x(x({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),o!==void 0?{angle:o}:{}),a!==void 0?{limit:a}:{}),y=x(x(x(x(x(x(x({},c?{subtitleColor:c}:{}),l?{subtitleFont:l}:{}),u?{subtitleFontSize:u}:{}),f?{subtitleFontStyle:f}:{}),d?{subtitleFontWeight:d}:{}),p?{subtitleLineHeight:p}:{}),h?{subtitlePadding:h}:{}),C=Nc(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:C,nonMarkTitleProperties:v,subtitle:y}}function oa(e){return Q(e)||F(e)&&Q(e[0])}function ae(e){return!!e?.signal}function Oi(e){return!!e.step}function Hre(e){return F(e)?!1:"fields"in e&&!("data"in e)}function Lre(e){return F(e)?!1:"fields"in e&&"data"in e}function aa(e){return F(e)?!1:"field"in e&&"data"in e}var mVe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Are=O(mVe),Vre={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Eb=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function Db(e){let t=F(e.condition)?e.condition.map(Nre):Nre(e.condition);return k(x({},Rr(e)),{condition:t})}function Rr(e){if(w4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return e}function Nre(e){if(w4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return e}function tt(e){if(w4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return ae(e)?e:e!==void 0?{value:e}:void 0}function _re(e){return ae(e)?e.signal:Z(e)}function $I(e){return ae(e)?e.signal:Z(e.value)}function g1(e){return ae(e)?e.signal:e==null?null:Z(e)}function kre(e,t,n){for(let r of n){let i=Eo(r,t.markDef,t.config);i!==void 0&&(e[r]=tt(i))}return e}function BI(e){return[].concat(e.type,e.style??[])}function Be(e,t,n,r={}){let{vgChannel:i,ignoreVgConfig:o}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:Eo(e,t,n,r)}function Eo(e,t,n,{vgChannel:r}={}){return ot(r?ah(e,t,n.style):void 0,ah(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function ah(e,t,n){return UI(e,BI(t),n)}function UI(e,t,n){t=te(t);let r;for(let i of t){let o=n[i];o&&o[e]!==void 0&&(r=o[e])}return r}function zb(e,t){return te(e).reduce((n,r)=>(n.field.push(K(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function jI(e,t){let n=[...e];return t.forEach(r=>{for(let i of n)if(kr(i,r))return;n.push(r)}),n}function qI(e,t){return kr(e,t)||!t?e:e?[...te(e),...te(t)].join(", "):t}function Hb(e,t){let n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((oa(n)||ae(n))&&(oa(r)||ae(r)))return{explicit:e.explicit,value:qI(n,r)};if(oa(n)||ae(n))return{explicit:e.explicit,value:n};if(oa(r)||ae(r))return{explicit:e.explicit,value:r};if(!oa(n)&&!ae(n)&&!oa(r)&&!ae(r))return{explicit:e.explicit,value:jI(n,r)};throw new Error("It should never reach here")}var P={};Mr(P,{ADD_SAME_CHILD_TWICE:()=>RVe,CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN:()=>uNe,CONCAT_CANNOT_SHARE_AXIS:()=>TVe,FACETED_INDEPENDENT_DIFFERENT_SOURCES:()=>zNe,FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES:()=>HNe,FACETED_INDEPENDENT_SAME_SOURCE:()=>LNe,FIT_NON_SINGLE:()=>vVe,INTERVAL_INITIALIZED_WITH_POS:()=>NVe,INVALID_CHANNEL_FOR_AXIS:()=>ANe,LEGEND_BINDINGS_MUST_HAVE_PROJECTION:()=>HVe,LINE_WITH_VARYING_SIZE:()=>JVe,MORE_THAN_ONE_SORT:()=>DNe,NEEDS_SAME_SELECTION:()=>VVe,NO_FIELDS_NEEDS_AS:()=>PVe,REPLACE_ANGLE_WITH_THETA:()=>UVe,SCALE_BINDINGS_CONTINUOUS:()=>zVe,cannotApplySizeToNonOrientedMark:()=>gNe,cannotLookupVariableParameter:()=>LVe,cannotProjectAggregate:()=>wVe,cannotProjectOnChannelWithoutField:()=>MVe,cannotStackNonLinearScale:()=>NNe,cannotStackRangedMark:()=>VNe,cannotUseRelativeBandSizeWithNonBandScale:()=>dNe,cannotUseScalePropertyWithNonColor:()=>fNe,channelRequiredForBinned:()=>PNe,channelShouldBeDiscrete:()=>rNe,channelShouldBeDiscreteOrDiscretizing:()=>iNe,channelShouldNotBeUsedForBinned:()=>$Ne,columnsNotSupportByRowCol:()=>kVe,containerSizeNonSingle:()=>yVe,containerSizeNotCompatibleWithAutosize:()=>xVe,customFormatTypeNotAllowed:()=>$Ve,differentParse:()=>FVe,discreteChannelCannotEncode:()=>aNe,domainRequiredForThresholdScale:()=>BNe,domainSortDropped:()=>ENe,droppedDay:()=>TNe,droppingColor:()=>QVe,droppingFit:()=>CVe,emptyFieldDef:()=>ZVe,errorBand1DNotSupport:()=>ONe,errorBarCenterAndExtentAreNotNeeded:()=>INe,errorBarCenterIsUsedWithWrongExtent:()=>FNe,errorBarContinuousAxisHasCustomizedAggregate:()=>RNe,facetChannelDropped:()=>oNe,incompatibleChannel:()=>eNe,independentScaleMeansIndependentGuide:()=>SNe,invalidAggregate:()=>YVe,invalidEncodingChannel:()=>nNe,invalidFieldType:()=>GVe,invalidFieldTypeForCountAggregate:()=>WVe,invalidSpec:()=>gVe,invalidTimeUnit:()=>kNe,invalidTransformIgnored:()=>OVe,lineWithRange:()=>cNe,mergeConflictingDomainProperty:()=>wNe,mergeConflictingProperty:()=>MNe,missingFieldType:()=>XVe,nearestNotSupportForContinuous:()=>SVe,noSameUnitLookup:()=>AVe,noSuchRepeatedValue:()=>_Ve,offsetEncodingScaleIgnored:()=>tNe,offsetNestedInsideContinuousPositionScaleDropped:()=>jVe,orientOverridden:()=>lNe,primitiveChannelDef:()=>qVe,projectionOverridden:()=>BVe,rangeMarkAlignmentCannotBeExpression:()=>sNe,relativeBandSizeNotSupported:()=>KVe,scalePropertyNotWorkWithScaleType:()=>xNe,scaleTypeNotWorkWithChannel:()=>vNe,scaleTypeNotWorkWithFieldDef:()=>yNe,scaleTypeNotWorkWithMark:()=>CNe,selectionNotFound:()=>DVe,selectionNotSupported:()=>EVe,stackNonSummativeAggregate:()=>_Ne,stepDropped:()=>bNe,unaggregateDomainHasNoEffectForRawField:()=>pNe,unaggregateDomainWithNonSharedDomainOp:()=>hNe,unaggregatedDomainWithLogScale:()=>mNe,unknownField:()=>bVe,unrecognizedParse:()=>IVe});function gVe(e){return`Invalid specification ${ht(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}var vVe='Autosize "fit" only works for single views and layered views.';function yVe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function xVe(e){let t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function CVe(e){return e?`Dropping "fit-${e}" because spec has discrete ${Dn(e)}.`:'Dropping "fit" because spec has discrete size.'}function bVe(e){return`Unknown field for ${e}. Cannot calculate view size.`}function MVe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function wVe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function SVe(e){return`The "nearest" transform is not supported for ${e} marks.`}function EVe(e){return`Selection not supported for ${e} yet.`}function DVe(e){return`Cannot find a selection named "${e}".`}var zVe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",HVe="Legend bindings are only supported for selections over an individual field or encoding channel.";function LVe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function AVe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}var VVe="The same selection must be used to override scale domains in a layered view.",NVe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function _Ve(e){return`Unknown repeated value "${e}".`}function kVe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}var TVe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function IVe(e){return`Unrecognized parse "${e}".`}function FVe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}var RVe="Attempt to add the same child twice.";function OVe(e){return`Ignoring an invalid transform: ${ht(e)}.`}var PVe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function $Ve(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function BVe(e){let{parentProjection:t,projection:n}=e;return`Layer's shared projection ${ht(t)} is overridden by a child projection ${ht(n)}.`}var UVe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function jVe(e){return`${e}Offset dropped because ${e} is continuous`}function qVe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${ht(n)}}.`}function GVe(e){return`Invalid field type "${e}".`}function WVe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function YVe(e){return`Invalid aggregation operator "${e}".`}function XVe(e,t){return`Missing type for channel "${e}", using "${t}" instead.`}function QVe(e,t){let{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function KVe(e){return`Position range does not support relative band size for ${e}.`}function ZVe(e,t){return`Dropping ${ht(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}var JVe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function eNe(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function tNe(e){return`${e} encoding has no scale, so specified scale is ignored.`}function nNe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function rNe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function iNe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function oNe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function aNe(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function sNe(e){return`The ${e} for range marks cannot be an expression`}function cNe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function lNe(e,t){return`Specified orient "${e}" overridden with "${t}".`}var uNe="Custom domain scale cannot be unioned with default field-based domain.";function fNe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function dNe(e){return`Cannot use the relative band size with ${e} scale.`}function pNe(e){return`Using unaggregated domain with raw field has no effect (${ht(e)}).`}function hNe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function mNe(e){return`Unaggregated domain is currently unsupported for log scale (${ht(e)}).`}function gNe(e){return`Cannot apply size to non-oriented mark "${e}".`}function vNe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function yNe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function xNe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function CNe(e,t){return`Scale type "${t}" does not work with mark "${e}".`}function bNe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function MNe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${ht(n)} and ${ht(r)}). Using ${ht(n)}.`}function wNe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${ht(n)} and ${ht(r)}). Using the union of the two domains.`}function SNe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function ENe(e){return`Dropping sort property ${ht(e)} as unioned domains only support boolean or op "count", "min", and "max".`}var DNe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",zNe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",HNe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",LNe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",ANe="Invalid channel for axis.";function VNe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function NNe(e){return`Cannot stack non-linear scale (${e}).`}function _Ne(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function kNe(e,t){return`Invalid ${e}: ${ht(t)}.`}function TNe(e){return`Dropping day from datetime ${ht(e)} as day cannot be combined with other units.`}function INe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function FNe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function RNe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function ONe(e){return`1D error band does not support ${e}.`}function PNe(e){return`Channel ${e} is required for "binned" bin.`}function $Ne(e){return`Channel ${e} should not be used with "binned" bin.`}function BNe(e){return`Domain for ${e} is required for threshold scale.`}var UNe,Tre=ed(rv),Lf=Tre;UNe=new WeakMap;function Ire(e){return Lf=e,Lf}function Fre(){return Lf=Tre,Lf}function U(...e){Lf.warn(...e)}function Rre(...e){Lf.debug(...e)}function s2(e){if(e&&ne(e)){for(let t of Lb)if(t in e)return!0}return!1}var Ore=["january","february","march","april","may","june","july","august","september","october","november","december"],jNe=Ore.map(e=>e.substr(0,3)),Pre=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],qNe=Pre.map(e=>e.substr(0,3));function GNe(e){if(oh(e)&&(e=+e),Oe(e))return e>4&&U(P.invalidTimeUnit("quarter",e)),e-1;throw new Error(P.invalidTimeUnit("quarter",e))}function WNe(e){if(oh(e)&&(e=+e),Oe(e))return e-1;{let t=e.toLowerCase(),n=Ore.indexOf(t);if(n!==-1)return n;let r=t.substr(0,3),i=jNe.indexOf(r);if(i!==-1)return i;throw new Error(P.invalidTimeUnit("month",e))}}function YNe(e){if(oh(e)&&(e=+e),Oe(e))return e%7;{let t=e.toLowerCase(),n=Pre.indexOf(t);if(n!==-1)return n;let r=t.substr(0,3),i=qNe.indexOf(r);if(i!==-1)return i;throw new Error(P.invalidTimeUnit("day",e))}}function GI(e,t){let n=[];if(t&&e.day!==void 0&&O(e).length>1&&(U(P.droppedDay(e)),e=le(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){let r=t?WNe(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){let r=t?GNe(e.quarter):e.quarter;n.push(Oe(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){let r=t?YNe(e.day):e.day;n.push(Oe(r)?r+1:`${r}+1`)}else n.push(1);for(let r of["hours","minutes","seconds","milliseconds"]){let i=e[r];n.push(typeof i>"u"?0:i)}return n}function sa(e){let n=GI(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function $re(e){let n=GI(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Bre(e){let t=GI(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}var Ure={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Lb=O(Ure);function jre(e){return!!Ure[e]}var XNe={binnedyear:1,binnedyearquarter:1,binnedyearquartermonth:1,binnedyearmonth:1,binnedyearmonthdate:1,binnedyearmonthdatehours:1,binnedyearmonthdatehoursminutes:1,binnedyearmonthdatehoursminutesseconds:1,binnedyearweek:1,binnedyearweekday:1,binnedyearweekdayhours:1,binnedyearweekdayhoursminutes:1,binnedyearweekdayhoursminutesseconds:1,binnedyeardayofyear:1},QNe={binnedutcyear:1,binnedutcyearquarter:1,binnedutcyearquartermonth:1,binnedutcyearmonth:1,binnedutcyearmonthdate:1,binnedutcyearmonthdatehours:1,binnedutcyearmonthdatehoursminutes:1,binnedutcyearmonthdatehoursminutesseconds:1,binnedutcyearweek:1,binnedutcyearweekday:1,binnedutcyearweekdayhours:1,binnedutcyearweekdayhoursminutes:1,binnedutcyearweekdayhoursminutesseconds:1,binnedutcyeardayofyear:1},fft=x(x({},XNe),QNe);function ca(e){return ne(e)?e.binned:qre(e)}function qre(e){return e&&e.startsWith("binned")}function WI(e){return e.startsWith("utc")}function KNe(e){return e.substring(3)}var ZNe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Af(e){return Lb.filter(t=>Gre(e,t))}function YI(e){let t=Af(e);return t[t.length-1]}function Gre(e,t){let n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Wre(e,t,{end:n}={end:!1}){let r=rh(t),i=WI(e)?"utc":"";function o(c){return c==="quarter"?`(${i}quarter(${r})-1)`:`${i}${c}(${r})`}let a,s={};for(let c of Lb)Gre(e,c)&&(s[c]=o(c),a=c);return n&&(s[a]+="+1"),$re(s)}function XI(e){if(!e)return;let t=Af(e);return`timeUnitSpecifier(${ht(t)}, ${ht(ZNe)})`}function Yre(e,t,n){if(!e)return;let r=XI(e);return`${n||WI(e)?"utc":"time"}Format(${t}, ${r})`}function sn(e){if(!e)return;let t;return Q(e)?qre(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ne(e)&&(t=x(x({},e),e.unit?{unit:e.unit}:{})),WI(t.unit)&&(t.utc=!0,t.unit=KNe(t.unit)),t}function Xre(e){let r=sn(e),{utc:t}=r,n=ie(r,["utc"]);return n.unit?(t?"utc":"")+O(n).map(i=>pt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+O(n).map(i=>pt(`_${i}_${n[i]}`)).join("")}function Ab(e,t=n=>n){let n=sn(e),r=YI(n.unit);if(r&&r!=="day"){let i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:a}=QI(r,n.step),s=k(x({},i),{[a]:+i[a]+o});return`${t(sa(s))} - ${t(sa(i))}`}}var JNe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function e_e(e){return!!JNe[e]}function QI(e,t=1){if(e_e(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Qre(e){return e?.param}function Vb(e){return!!e?.field&&e.equal!==void 0}function Nb(e){return!!e?.field&&e.lt!==void 0}function _b(e){return!!e?.field&&e.lte!==void 0}function kb(e){return!!e?.field&&e.gt!==void 0}function Tb(e){return!!e?.field&&e.gte!==void 0}function Ib(e){if(e?.field){if(F(e.range)&&e.range.length===2)return!0;if(ae(e.range))return!0}return!1}function Fb(e){return!!e?.field&&(F(e.oneOf)||F(e.in))}function t_e(e){return!!e?.field&&e.valid!==void 0}function KI(e){return Fb(e)||Vb(e)||Ib(e)||Nb(e)||kb(e)||_b(e)||Tb(e)}function ds(e,t){return w0(e,{timeUnit:t,wrapTime:!0})}function n_e(e,t){return e.map(n=>ds(n,t))}function Rb(e,t=!0){let{field:n}=e,r=sn(e.timeUnit),{unit:i,binned:o}=r||{},a=K(e,{expr:"datum"}),s=i?`time(${o?a:Wre(i,n)})`:a;if(Vb(e))return`${s}===${ds(e.equal,i)}`;if(Nb(e)){let c=e.lt;return`${s}<${ds(c,i)}`}else if(kb(e)){let c=e.gt;return`${s}>${ds(c,i)}`}else if(_b(e)){let c=e.lte;return`${s}<=${ds(c,i)}`}else if(Tb(e)){let c=e.gte;return`${s}>=${ds(c,i)}`}else{if(Fb(e))return`indexof([${n_e(e.oneOf,i).join(",")}], ${s}) !== -1`;if(t_e(e))return sh(s,e.valid);if(Ib(e)){let{range:c}=e,l=ae(c)?{signal:`${c.signal}[0]`}:c[0],u=ae(c)?{signal:`${c.signal}[1]`}:c[1];if(l!==null&&u!==null&&t)return"inrange("+s+", ["+ds(l,i)+", "+ds(u,i)+"])";let f=[];return l!==null&&f.push(`${s} >= ${ds(l,i)}`),u!==null&&f.push(`${s} <= ${ds(u,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${ht(e)}`)}function sh(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Kre(e){return KI(e)&&e.timeUnit?k(x({},e),{timeUnit:sn(e.timeUnit)}):e}var Vf={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Zre(e){return e==="quantitative"||e==="temporal"}function Ob(e){return e==="ordinal"||e==="nominal"}var c2=Vf.quantitative,ch=Vf.ordinal,ps=Vf.temporal,lh=Vf.nominal,la=Vf.geojson,Mft=O(Vf);function Jre(e){if(e)switch(e=e.toLowerCase(),e){case"q":case c2:return"quantitative";case"t":case ps:return"temporal";case"o":case ch:return"ordinal";case"n":case lh:return"nominal";case la:return"geojson"}}var Or={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},uh={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},Lft=O(uh);function tie(e,t){let n=uh[e],r=uh[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}var r_e={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function ZI(e){return r_e[e]}var nie=new Set(["linear","log","pow","sqrt","symlog"]),rie=new Set([...nie,"time","utc"]);function JI(e){return nie.has(e)}var iie=new Set(["quantile","quantize","threshold"]),i_e=new Set([...rie,...iie,"sequential","identity"]),o_e=new Set(["ordinal","bin-ordinal","point","band"]);function Pt(e){return o_e.has(e)}function $n(e){return i_e.has(e)}function G1(e){return rie.has(e)}function Ic(e){return iie.has(e)}var oie={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function aie(e){return!Q(e)&&!!e.name}function eF(e){return e?.param}function sie(e){return e?.unionWith}function cie(e){return ne(e)&&"field"in e}var lie={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},Aft=O(lie),eie=lie,{type:Vft,domain:Nft,range:_ft,rangeMax:kft,rangeMin:Tft,scheme:Ift}=eie,a_e=ie(eie,["type","domain","range","rangeMax","rangeMin","scheme"]),uie=O(a_e);function fh(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return G1(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return G1(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return G1(e);case"nice":return G1(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return $n(e)&&!Ne(["log","time","utc","threshold","quantile"],e)}}function Pb(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return kc(e)?void 0:P.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function fie(e,t){return Ne([ch,lh],t)?e===void 0||Pt(e):t===ps?Ne([Or.TIME,Or.UTC,void 0],e):t===c2?JI(e)||Ic(e)||e===void 0:!0}function die(e,t,n=!1){if(!Fr(e))return!1;switch(e){case xt:case on:case i2:case fs:case oi:case Ti:return G1(t)||t==="band"?!0:t==="point"?!n:!1;case q1:case bo:case m1:case xo:case Co:case ra:return G1(t)||Ic(t)||Ne(["band","point","ordinal"],t);case Pn:case Fi:case Ri:return t!=="band";case Mo:case En:return t==="ordinal"||Ic(t)}}var v1={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},tF=v1.arc,S0=v1.area,E0=v1.bar,pie=v1.image,D0=v1.line,Nf=v1.point,hie=v1.rect,_f=v1.rule,$b=v1.text,dh=v1.tick,mie=v1.trail,ph=v1.circle,hh=v1.square,Bb=v1.geoshape;function Pi(e){return["line","area","trail"].includes(e)}function Fc(e){return["rect","bar","image","arc"].includes(e)}var gie=new Set(O(v1));function li(e){return e.type}var s_e=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],c_e=["fill","fillOpacity"],vie=[...s_e,...c_e],l_e={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},nF=O(l_e),yie={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},xie={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},u_e={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Ub=O(u_e);function hs(e){return e&&e.band!=null}var Cie={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},bie=5,Mie={binSpacing:1,continuousBandSize:bie,minBandSize:.25,timeUnitBandPosition:.5},wie={binSpacing:0,continuousBandSize:bie,minBandSize:.25,timeUnitBandPosition:.5},Sie={thickness:1};function Eie(e){return li(e)?e.type:e}function Tf(e){let{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,a=gh(e);return Y(n)&&!Mb(n.aggregate)&&i&&G1(i.get("type"))?d_e({fieldDef:n,channel:t,markDef:r,ref:a,config:o}):a}function d_e({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Pi(n.type)?r:Be("invalid",n,i)===null?[p_e(e,t),r]:r}function p_e(e,t){let n=mh(e,!0),i=wo(t)==="y"?{field:{group:"height"}}:{value:0};return x({test:n},i)}function mh(e,t=!0){return sh(Q(e)?e:K(e,{expr:"datum"}),!t)}function Die(e){let{datum:t}=e;return s2(t)?sa(t):`${ht(t)}`}function ms(e,t,n,r){let i={};if(t&&(i.scale=t),$i(e)){let{datum:o}=e;s2(o)?i.signal=sa(o):ae(o)?i.signal=o.signal:w4(o)?i.signal=o.expr:i.value=o}else i.field=K(e,n);if(r){let{offset:o,band:a}=r;o&&(i.offset=o),a&&(i.band=a)}return i}function kf({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:a=.5}){let s=!ae(a)&&0<a&&a<1?"datum":void 0,c=K(t,{expr:s,suffix:i}),l=n!==void 0?K(n,{expr:s}):K(t,{suffix:o,expr:s}),u={};if(a===0||a===1){u.scale=e;let f=a===0?c:l;u.field=f}else{let f=ae(a)?`(1-${a.signal}) * ${c} + ${a.signal} * ${l}`:`${1-a} * ${c} + ${a} * ${l}`;u.signal=`scale("${e}", ${f})`}return r&&(u.offset=r),u}function zie({scaleName:e,fieldDef:t}){let n=K(t,{expr:"datum"}),r=K(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function gh({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:c,defaultRef:l,bandPosition:u}){if(t){if(ke(t)){let f=a?.get("type");if(zn(t)){u??(u=W1({fieldDef:t,fieldDef2:n,markDef:r,config:i}));let{bin:d,timeUnit:p,type:h}=t;if(et(d)||u&&p&&h===ps)return s?.impute?ms(t,o,{binSuffix:"mid"},{offset:c}):u&&!Pt(f)?kf({scaleName:o,fieldOrDatumDef:t,bandPosition:u,offset:c}):ms(t,o,gs(t,e)?{binSuffix:"range"}:{},{offset:c});if(an(d)){if(Y(n))return kf({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:u,offset:c});{let m=e===xt?j1:yo;U(P.channelRequiredForBinned(m))}}}return ms(t,o,Pt(f)?{binSuffix:"range"}:{},{offset:c,band:f==="band"?u??t.bandPosition??.5:void 0})}else if(lr(t)){let f=t.value,d=c?{offset:c}:{};return x(x({},z0(e,f)),d)}}return Ie(l)&&(l=l()),l&&x(x({},l),c?{offset:c}:{})}function z0(e,t){return Ne(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ne(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:tt(t)}function vs(e){return e&&e!=="number"&&e!=="time"}function Lie(e,t,n){return`${e}(${t}${n?`, ${ht(n)}`:""})`}var h_e=" \u2013 ";function If({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){if(vs(n))return Do({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});let a=Aie(e,r,i),s=Rc(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(s==="quantitative"){if(i&&o.normalizedNumberFormatType)return Do({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return Do({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(s==="temporal"&&o.timeFormatType&&Y(e)&&e.timeUnit===void 0)return Do({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(Pc(e)){let c=g_e({field:a,timeUnit:Y(e)?sn(e.timeUnit)?.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:l2(e)&&e.scale?.type===Or.UTC});return c?{signal:c}:void 0}if(t=rF({type:s,specifiedFormat:t,config:o,normalizeStack:i}),Y(e)&&et(e.bin)){let c=K(e,{expr:r,binSuffix:"end"});return{signal:H0(a,c,t,n,o)}}else return t||Rc(e)==="quantitative"?{signal:`${Vie(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function Aie(e,t,n){return Y(e)?n?`${K(e,{expr:t,suffix:"end"})}-${K(e,{expr:t,suffix:"start"})}`:K(e,{expr:t}):Die(e)}function Do({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a??(a=Aie(e,r,i)),a!=="datum.value"&&Y(e)&&et(e.bin)){let s=K(e,{expr:r,binSuffix:"end"});return{signal:H0(a,s,t,n,o)}}return{signal:Lie(n,a,t)}}function qb(e,t,n,r,i,o){if(!(Q(r)&&vs(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Rc(e)==="quantitative"&&(i.normalizedNumberFormatType&&Oc(e)&&e.stack==="normalize"||i.numberFormatType))){if(Oc(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return rF({type:"quantitative",config:i,normalizeStack:!0});if(Pc(e)){let a=Y(e)?sn(e.timeUnit)?.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:m_e({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return rF({type:t,specifiedFormat:n,config:i})}}function Gb(e,t,n){if(e&&(ae(e)||e==="number"||e==="time"))return e;if(Pc(t)&&n!=="time"&&n!=="utc")return Y(t)&&sn(t?.timeUnit)?.utc?"utc":"time"}function rF({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Q(t))return t;if(e===c2)return r?n.normalizedNumberFormat:n.numberFormat}function m_e({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:XI(t)}:r?void 0:n.timeFormat)}function Vie(e,t){return`format(${e}, "${t||""}")`}function Hie(e,t,n,r){return vs(n)?Lie(n,e,t):Vie(e,(Q(t)?t:void 0)??r.numberFormat)}function H0(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return H0(e,t,i.numberFormat,i.numberFormatType,i);let o=Hie(e,n,r,i),a=Hie(t,n,r,i);return`${sh(e,!1)} ? "null" : ${o} + "${h_e}" + ${a}`}function g_e({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Q(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):Yre(t,e,o)}var S4="min",v_e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function iF(e){return e in v_e}function Wb(e){return!!e?.encoding}function Pr(e){return e&&(e.op==="count"||!!e.field)}function Yb(e){return e&&F(e)}function ys(e){return"row"in e||"column"in e}function Xb(e){return!!e&&"header"in e}function $c(e){return"facet"in e}function Nie(e){return e.param}function _ie(e){return e&&!Q(e)&&"repeat"in e}function oF(e){let{field:t,timeUnit:n,bin:r,aggregate:i}=e;return k(x(x(x({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:t})}function Kb(e){return"sort"in e}function W1({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(ke(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Y(e)){let{timeUnit:i,bin:o}=e;if(i&&!t)return Eo("timeUnitBandPosition",n,r);if(et(o))return .5}}function aF({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){let s=Dn(e),c=Be(a?"size":s,r,i,{vgChannel:s});if(c!==void 0)return c;if(Y(t)){let{timeUnit:l,bin:u}=t;if(l&&!n)return{band:Eo("timeUnitBandSize",r,i)};if(et(u)&&!Pt(o))return{band:1}}if(Fc(r.type))return o?Pt(o)?i[r.type]?.discreteBandSize||{band:1}:i[r.type]?.continuousBandSize:i[r.type]?.discreteBandSize}function Zb(e,t,n,r){return et(e.bin)||e.timeUnit&&zn(e)&&e.type==="temporal"?W1({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Jb(e){return e&&!!e.sort&&!e.field}function E4(e){return e&&"condition"in e}function Rf(e){let t=e?.condition;return!!t&&!F(t)&&Y(t)}function D4(e){let t=e?.condition;return!!t&&!F(t)&&ke(t)}function kie(e){let t=e?.condition;return!!t&&(F(t)||lr(t))}function Y(e){return e&&(!!e.field||e.aggregate==="count")}function Rc(e){return e?.type}function $i(e){return e&&"datum"in e}function ua(e){return zn(e)&&!vh(e)||yh(e)}function sF(e){return zn(e)&&e.type==="quantitative"&&!e.bin||yh(e)}function yh(e){return $i(e)&&Oe(e.datum)}function ke(e){return Y(e)||$i(e)}function zn(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function lr(e){return e&&"value"in e&&"value"in e}function l2(e){return e&&("scale"in e||"sort"in e)}function Oc(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function Tie(e){return e&&"legend"in e}function Iie(e){return e&&("format"in e||"formatType"in e)}function Fie(e){return On(e,["legend","axis","header","scale"])}function y_e(e){return"op"in e}function K(e,t={}){let n=e.field,r=t.prefix,i=t.suffix,o="";if(C_e(e))n=VI("count");else{let a;if(!t.nofn)if(y_e(e))a=e.op;else{let{bin:s,aggregate:c,timeUnit:l}=e;et(s)?(a=wb(s),i=(t.binSuffix??"")+(t.suffix??"")):c?a2(c)?(o=`["${n}"]`,n=`argmax_${c.argmax}`):So(c)?(o=`["${n}"]`,n=`argmin_${c.argmin}`):a=String(c):l&&!ca(l)&&(a=Xre(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}a&&(n=n?`${a}_${n}`:a)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?ih(n):t.expr?LI(n,t.expr)+o:sr(n)+o}function vh(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Y(e)&&!!e.bin;case"temporal":return!1}throw new Error(P.invalidFieldType(e.type))}function x_e(e){return l2(e)&&Ic(e.scale?.type)}function C_e(e){return e.aggregate==="count"}function b_e(e,t){let{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(et(r))return`${n} (binned)`;if(i&&!ca(i)){let a=sn(i)?.unit;if(a)return`${n} (${Af(a).join("-")})`}else if(o)return a2(o)?`${n} for max ${o.argmax}`:So(o)?`${n} for min ${o.argmin}`:`${y4(o)} of ${n}`;return n}function M_e(e){let{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(a2(t))return`${i} for argmax(${t.argmax})`;if(So(t))return`${i} for argmin(${t.argmin})`;let o=r&&!ca(r)?sn(r):void 0,a=t||o?.unit||o?.maxbins&&"timeunit"||et(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}var Rie=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return M_e(e);default:return b_e(e,t)}},Oie=Rie;function cF(e){Oie=e}function Pie(){cF(Rie)}function xs(e,t,{allowDisabling:n,includeDefault:r=!0}){let i=eM(e)?.title;if(!Y(e))return i??e.title;let o=e,a=r?xh(o,t):void 0;return n?ot(i,o.title,a):i??o.title??a}function eM(e){if(Oc(e)&&e.axis)return e.axis;if(Tie(e)&&e.legend)return e.legend;if(Xb(e)&&e.header)return e.header}function xh(e,t){return Oie(e,t)}function Of(e){if(Iie(e)){let{format:t,formatType:n}=e;return{format:t,formatType:n}}else{let t=eM(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function w_e(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Kb(e)&&F(e.sort))return"ordinal";let{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!a2(n)&&!So(n))return"quantitative";if(l2(e)&&e.scale?.type)switch(uh[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function ui(e){if(Y(e))return e;if(Rf(e))return e.condition}function Ft(e){if(ke(e))return e;if(D4(e))return e.condition}function lF(e,t,n,r={}){if(Q(e)||Oe(e)||A1(e)){let i=Q(e)?"string":Oe(e)?"number":"boolean";return U(P.primitiveChannelDef(t,i,e)),{value:e}}return ke(e)?Qb(e,t,n,r):D4(e)?k(x({},e),{condition:Qb(e.condition,t,n,r)}):e}function Qb(e,t,n,r){if(Iie(e)){let i=e,{format:a,formatType:s}=i,c=ie(i,["format","formatType"]);if(vs(s)&&!n.customFormatTypes)return U(P.customFormatTypeNotAllowed(t)),Qb(c,t,n,r)}else{let a=Oc(e)?"axis":Tie(e)?"legend":Xb(e)?"header":null;if(a&&e[a]){let o=e[a],{format:s,formatType:c}=o,l=ie(o,["format","formatType"]);if(vs(c)&&!n.customFormatTypes)return U(P.customFormatTypeNotAllowed(t)),Qb(k(x({},e),{[a]:l}),t,n,r)}}return Y(e)?Ch(e,t,r):S_e(e)}function S_e(e){let t=e.type;if(t)return e;let{datum:n}=e;return t=Oe(n)?"quantitative":Q(n)?"nominal":s2(n)?"temporal":void 0,k(x({},e),{type:t})}function Ch(e,t,{compositeMark:n=!1}={}){let{aggregate:r,timeUnit:i,bin:o,field:a}=e,s=x({},e);if(!n&&r&&!Df(r)&&!a2(r)&&!So(r)&&(U(P.invalidAggregate(r)),delete s.aggregate),i&&(s.timeUnit=sn(i)),a&&(s.field=`${a}`),et(o)&&(s.bin=Hf(o,t)),an(o)&&!Ct(t)&&U(P.channelShouldNotBeUsedForBinned(t)),zn(s)){let{type:l}=s,u=Jre(l);l!==u&&(s.type=u),l!=="quantitative"&&Mb(r)&&(U(P.invalidFieldTypeForCountAggregate(l,r)),s.type="quantitative")}else if(!xb(t)){let l=w_e(s,t);s.type=l}if(zn(s)){let{compatible:l,warning:u}=E_e(s,t)||{};l===!1&&U(u)}if(Kb(s)&&Q(s.sort)){let{sort:l}=s;if(iF(l))return k(x({},s),{sort:{encoding:l}});let u=l.substr(1);if(l.charAt(0)==="-"&&iF(u))return k(x({},s),{sort:{encoding:u,order:"descending"}})}if(Xb(s)){let{header:l}=s;if(l){let c=l,{orient:u}=c,f=ie(c,["orient"]);if(u)return k(x({},s),{header:k(x({},f),{labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u})})}}return s}function Hf(e,t){return A1(e)?{maxbins:PI(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?k(x({},e),{maxbins:PI(t)}):e}var Ff={compatible:!0};function E_e(e,t){let n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case B1:case U1:case Cf:return vh(e)?Ff:{compatible:!1,warning:P.channelShouldBeDiscrete(t)};case xt:case on:case i2:case fs:case Pn:case Fi:case Ri:case b0:case M0:case bf:case _c:case Mf:case wf:case ra:case oi:case Ti:case Sf:return Ff;case si:case ci:case ai:case Ii:return n!==c2?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Ff;case m1:case xo:case Co:case bo:case q1:case na:case ta:case j1:case yo:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Ff;case En:case Mo:return!vh(e)&&!x_e(e)?{compatible:!1,warning:P.channelShouldBeDiscreteOrDiscretizing(t)}:Ff;case C4:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Ff}}function Pc(e){let{formatType:t}=Of(e);return t==="time"||!t&&D_e(e)}function D_e(e){return e&&(e.type==="temporal"||Y(e)&&!!e.timeUnit)}function w0(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){let o=t&&sn(t)?.unit,a=o||n==="temporal",s;return w4(e)?s=e.expr:ae(e)?s=e.signal:s2(e)?(a=!0,s=sa(e)):(Q(e)||Oe(e))&&a&&(s=`datetime(${ht(e)})`,jre(o)&&(Oe(e)&&e<1e4||Q(e)&&isNaN(Date.parse(e)))&&(s=sa({[o]:e}))),s?r&&a?`time(${s})`:s:i?void 0:ht(e)}function tM(e,t){let{type:n}=e;return t.map(r=>{let i=Y(e)&&!ca(e.timeUnit)?e.timeUnit:void 0,o=w0(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function gs(e,t){return et(e.bin)?Fr(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}var uF={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Bc(e){return e?.condition}var nM=["domain","grid","labels","ticks","title"],$ie={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},fF={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Bie=k(x({},fF),{style:1,labelExpr:1,encoding:1});function dF(e){return!!Bie[e]}var _8t=O(Bie),H_e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},pF=O(H_e);function br(e){return"mark"in e}var Cs=class{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return br(t)?Eie(t.mark)===this.name:!1}};function bs(e,t){let n=e&&e[t];return n?F(n)?us(n,r=>!!r.field):Y(n)||Rf(n):!1}function hF(e,t){let n=e&&e[t];return n?F(n)?us(n,r=>!!r.field):Y(n)||$i(n)||D4(n):!1}function rM(e,t){if(Ct(t)){let n=e[t];if((Y(n)||$i(n))&&(Ob(n.type)||Y(n)&&n.timeUnit)){let r=Ef(t);return hF(e,r)}}return!1}function Pf(e){return us(cre,t=>{if(bs(e,t)){let n=e[t];if(F(n))return us(n,r=>!!r.aggregate);{let r=ui(n);return r&&!!r.aggregate}}return!1})}function iM(e,t){let n=[],r=[],i=[],o=[],a={};return bh(e,(s,c)=>{if(Y(s)){let l=s,{field:u,aggregate:f,bin:d,timeUnit:p}=l,h=ie(l,["field","aggregate","bin","timeUnit"]);if(f||p||d){let g=eM(s)?.title,v=K(s,{forAs:!0}),y=k(x(x({},g?[]:{title:xs(s,t,{allowDisabling:!0})}),h),{field:v});if(f){let C;if(a2(f)?(C="argmax",v=K({op:"argmax",field:f.argmax},{forAs:!0}),y.field=`${v}.${u}`):So(f)?(C="argmin",v=K({op:"argmin",field:f.argmin},{forAs:!0}),y.field=`${v}.${u}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(C=f),C){let b={op:C,as:v};u&&(b.field=u),o.push(b)}}else if(n.push(v),zn(s)&&et(d)){if(r.push({bin:d,field:u,as:v}),n.push(K(s,{binSuffix:"end"})),gs(s,c)&&n.push(K(s,{binSuffix:"range"})),Ct(c)){let C={field:`${v}_end`};a[`${c}2`]=C}y.bin="binned",xb(c)||(y.type=c2)}else if(p&&!ca(p)){i.push({timeUnit:p,field:u,as:v});let C=zn(s)&&s.type!==ps&&"time";C&&(c===b0||c===_c?y.formatType=C:xre(c)?y.legend=x({formatType:C},y.legend):Ct(c)&&(y.axis=x({formatType:C},y.axis)))}a[c]=y}else n.push(u),a[c]=e[c]}else a[c]=e[c]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function L_e(e,t,n){let r=Mre(t,n);if(r){if(r==="binned"){let i=e[t===j1?xt:on];return!!(Y(i)&&Y(e[t])&&an(i.bin))}}else return!1;return!0}function Uie(e,t,n,r){let i={};for(let o of O(e))yb(o)||U(P.invalidEncodingChannel(o));for(let o of hre){if(!e[o])continue;let a=e[o];if(Tc(o)){let s=pre(o),c=i[s];if(Y(c)&&Zre(c.type)&&Y(a)&&!c.timeUnit){U(P.offsetNestedInsideContinuousPositionScaleDropped(s));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(U(P.REPLACE_ANGLE_WITH_THETA),o=oi),!L_e(e,o,t)){U(P.incompatibleChannel(o,t));continue}if(o===q1&&t==="line"&&ui(e[o])?.aggregate){U(P.LINE_WITH_VARYING_SIZE);continue}if(o===Pn&&(n?"fill"in e:"stroke"in e)){U(P.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===M0||o===C4&&!F(a)&&!lr(a)||o===_c&&F(a)){if(a){if(o===C4){let s=e[o];if(Jb(s)){i[o]=s;continue}}i[o]=te(a).reduce((s,c)=>(Y(c)?s.push(Ch(c,o)):U(P.emptyFieldDef(c,o)),s),[])}}else{if(o===_c&&a===null)i[o]=null;else if(!Y(a)&&!$i(a)&&!lr(a)&&!E4(a)&&!ae(a)){U(P.emptyFieldDef(a,o));continue}i[o]=lF(a,o,r)}}return i}function z4(e,t){let n={};for(let r of O(e)){let i=lF(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function jie(e){let t=[];for(let n of O(e))if(bs(e,n)){let r=e[n],i=te(r);for(let o of i)Y(o)?t.push(o):Rf(o)&&t.push(o.condition)}return t}function bh(e,t,n){if(e)for(let r of O(e)){let i=e[r];if(F(i))for(let o of i)t.call(n,o,r);else t.call(n,i,r)}}function qie(e,t,n,r){return e?O(e).reduce((i,o)=>{let a=e[o];return F(a)?a.reduce((s,c)=>t.call(r,s,c,o),i):t.call(r,i,a,o)},n):n}function oM(e,t){return O(t).reduce((n,r)=>{switch(r){case xt:case on:case Mf:case Sf:case wf:case j1:case yo:case i2:case fs:case oi:case na:case Ti:case ta:case ai:case si:case Ii:case ci:case b0:case En:case ra:case _c:return n;case C4:if(e==="line"||e==="trail")return n;case M0:case bf:{let i=t[r];if(F(i)||Y(i))for(let o of te(i))o.aggregate||n.push(K(o,{}));return n}case q1:if(e==="trail")return n;case Pn:case Fi:case Ri:case m1:case xo:case Co:case Mo:case bo:{let i=ui(t[r]);return i&&!i.aggregate&&n.push(K(i,{})),n}}},[])}function Gie(e){let o=e,{tooltip:t}=o,n=ie(o,["tooltip"]);if(!t)return{filteredEncoding:n};let r,i;if(F(t)){for(let a of t)a.aggregate?(r||(r=[]),r.push(a)):(i||(i=[]),i.push(a));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return F(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function Mh(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};let i=e.map(({fieldPrefix:a,titlePrefix:s})=>{let c=r?` of ${sM(t)}`:"";return{field:a+t.field,type:t.type,title:ae(s)?{signal:`${s}"${escape(c)}"`}:s+c}}),o=jie(n).map(Fie);return{tooltip:[...i,...ki(o,be)]}}function sM(e){let{title:t,field:n}=e;return ot(t,n)}function $f(e,t,n,r,i){let{scale:o,axis:a}=n;return({partName:s,mark:c,positionPrefix:l,endPositionPrefix:u=void 0,extraEncoding:f={}})=>{let d=sM(n);return mF(e,s,i,{mark:c,encoding:x(x(x({[t]:x(x(x({field:`${l}_${n.field}`,type:n.type},d!==void 0?{title:d}:{}),o!==void 0?{scale:o}:{}),a!==void 0?{axis:a}:{})},Q(u)?{[`${t}2`]:{field:`${u}_${n.field}`}}:{}),r),f)})}}function mF(e,t,n,r){let{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||e[t]===void 0&&n[t]?[k(x({},r),{mark:x(k(x(x(x(x(x({},n[t]),i?{clip:i}:{}),o?{color:o}:{}),a?{opacity:a}:{}),li(r.mark)?r.mark:{type:r.mark}),{style:`${s}-${String(t)}`}),A1(e[t])?{}:e[t])})]:[]}function cM(e,t,n){let{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],c=r[`${i}Error2`];return{continuousAxisChannelDef:aM(o,n),continuousAxisChannelDef2:aM(a,n),continuousAxisChannelDefError:aM(s,n),continuousAxisChannelDefError2:aM(c,n),continuousAxis:i}}function aM(e,t){if(e?.aggregate){let n=e,{aggregate:r}=n,i=ie(n,["aggregate"]);return r!==t&&U(P.errorBarContinuousAxisHasCustomizedAggregate(r,t)),i}else return e}function lM(e,t){let{mark:n,encoding:r}=e,{x:i,y:o}=r;if(li(n)&&n.orient)return n.orient;if(ua(i)){if(ua(o)){let a=Y(i)&&i.aggregate,s=Y(o)&&o.aggregate;if(!a&&s===t)return"vertical";if(!s&&a===t)return"horizontal";if(a===t&&s===t)throw new Error("Both x and y cannot have aggregate");return Pc(o)&&!Pc(i)?"horizontal":"vertical"}return"horizontal"}else{if(ua(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}var wh="boxplot",Wie=["box","median","outliers","rule","ticks"],Yie=new Cs(wh,gF);function Xie(e){return Oe(e)?"tukey":e}function gF(e,{config:t}){e=k(x({},e),{encoding:z4(e.encoding,t)});let pi=e,{mark:n,encoding:r,params:i,projection:o}=pi,a=ie(pi,["mark","encoding","params","projection"]),s=li(n)?n:{type:n};i&&U(P.selectionNotSupported("boxplot"));let c=s.extent??t.boxplot.extent,l=Be("size",s,t),u=s.invalid,f=Xie(c),{bins:d,timeUnits:p,transform:h,continuousAxisChannelDef:m,continuousAxis:g,groupby:v,aggregate:y,encodingWithoutContinuousAxis:C,ticksOrient:b,boxOrient:M,customTooltipWithoutAggregatedField:S}=V_e(e,c,t),Ca=C,{color:w,size:E}=Ca,D=ie(Ca,["color","size"]),L=Zae=>$f(s,g,m,Zae,t.boxplot),A=L(D),j=L(C),V=L(x(x({},D),E?{size:E}:{})),_=Mh([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,C),N={type:"tick",color:"black",opacity:1,orient:b,invalid:u,aria:!1},I=f==="min-max"?_:Mh([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,C),W=[...A({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:I}),...A({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:I}),...A({partName:"ticks",mark:N,positionPrefix:"lower_whisker",extraEncoding:I}),...A({partName:"ticks",mark:N,positionPrefix:"upper_whisker",extraEncoding:I})],X=[...f!=="tukey"?W:[],...j({partName:"box",mark:k(x({type:"bar"},l?{size:l}:{}),{orient:M,invalid:u,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:_}),...V({partName:"median",mark:k(x(x({type:"tick",invalid:u},ne(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),l?{size:l}:{}),{orient:b,aria:!1}),positionPrefix:"mid_box",extraEncoding:_})];if(f==="min-max")return k(x({},a),{transform:(a.transform??[]).concat(h),layer:X});let J=`datum["lower_box_${m.field}"]`,Se=`datum["upper_box_${m.field}"]`,Ee=`(${Se} - ${J})`,Xe=`${J} - ${c} * ${Ee}`,zt=`${Se} + ${c} * ${Ee}`,lt=`datum["${m.field}"]`,en={joinaggregate:Qie(m.field),groupby:v},Ls={transform:[{filter:`(${Xe} <= ${lt}) && (${lt} <= ${zt})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...y],groupby:v}],layer:W},N8=D,{tooltip:W0}=N8,F4=ie(N8,["tooltip"]),{scale:ge,axis:Qe}=m,nt=sM(m),oe=On(Qe,["title"]),jr=mF(s,"outliers",t.boxplot,{transform:[{filter:`(${lt} < ${Xe}) || (${lt} > ${zt})`}],mark:"point",encoding:x(x(x({[g]:x(x(x({field:m.field,type:m.type},nt!==void 0?{title:nt}:{}),ge!==void 0?{scale:ge}:{}),We(oe)?{}:{axis:oe})},F4),w?{color:w}:{}),S?{tooltip:S}:{})})[0],Vt,di=[...d,...p,en];return jr?Vt={transform:di,layer:[jr,Ls]}:(Vt=Ls,Vt.transform.unshift(...di)),k(x({},a),{layer:[Vt,{transform:h,layer:X}]})}function Qie(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function V_e(e,t,n){let r=lM(e,wh),{continuousAxisChannelDef:i,continuousAxis:o}=cM(e,r,wh),a=i.field,s=Xie(t),c=[...Qie(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:(s==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(s==="min-max"?"upper_whisker_":"max_")+a}],l=s==="min-max"||s==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],S=e.encoding,{[o]:u}=S,f=ie(S,[R4(o)]),{customTooltipWithoutAggregatedField:d,filteredEncoding:p}=Gie(f),{bins:h,timeUnits:m,aggregate:g,groupby:v,encoding:y}=iM(p,n),C=r==="vertical"?"horizontal":"vertical",b=r,M=[...h,...m,{aggregate:[...g,...c],groupby:v},...l];return{bins:h,timeUnits:m,transform:M,groupby:v,aggregate:g,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:y,ticksOrient:C,boxOrient:b,customTooltipWithoutAggregatedField:d}}var uM="errorbar",Zie=["ticks","rule"],Jie=new Cs(uM,vF);function vF(e,{config:t}){e=k(x({},e),{encoding:z4(e.encoding,t)});let{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:c,tooltipEncoding:l}=yF(e,uM,t);delete o.size;let u=$f(s,i,r,o,t.errorbar),f=s.thickness,d=s.size,p=x(x({type:"tick",orient:a,aria:!1},f!==void 0?{thickness:f}:{}),d!==void 0?{size:d}:{}),h=[...u({partName:"ticks",mark:p,positionPrefix:"lower",extraEncoding:l}),...u({partName:"ticks",mark:p,positionPrefix:"upper",extraEncoding:l}),...u({partName:"rule",mark:x({type:"rule",ariaRoleDescription:"errorbar"},f!==void 0?{size:f}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return x(k(x({},c),{transform:n}),h.length>1?{layer:h}:x({},h[0]))}function N_e(e,t){let{encoding:n}=e;if(__e(n))return{orient:lM(e,t),inputType:"raw"};let r=k_e(n),i=T_e(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);let s=n.x2,c=n.y2;if(ke(s)&&ke(c))throw new Error(`${t} cannot have both x2 and y2`);if(ke(s)){if(ua(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(ke(c)){if(ua(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{let s=n.xError,c=n.xError2,l=n.yError,u=n.yError2;if(ke(c)&&!ke(s))throw new Error(`${t} cannot have xError2 without xError`);if(ke(u)&&!ke(l))throw new Error(`${t} cannot have yError2 without yError`);if(ke(s)&&ke(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(ke(s)){if(ua(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(ke(l)){if(ua(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function __e(e){return(ke(e.x)||ke(e.y))&&!ke(e.x2)&&!ke(e.y2)&&!ke(e.xError)&&!ke(e.xError2)&&!ke(e.yError)&&!ke(e.yError2)}function k_e(e){return ke(e.x2)||ke(e.y2)}function T_e(e){return ke(e.xError)||ke(e.xError2)||ke(e.yError)||ke(e.yError2)}function yF(e,t,n){var X,J,Se;let W=e,{mark:r,encoding:i,params:o,projection:a}=W,s=ie(W,["mark","encoding","params","projection"]),c=li(r)?r:{type:r};o&&U(P.selectionNotSupported(t));let{orient:l,inputType:u}=N_e(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:h,continuousAxis:m}=cM(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:v,tooltipSummary:y,tooltipTitleWithFieldName:C}=I_e(c,f,d,p,h,u,t,n),Ee=i,{[m]:b,[X=m==="x"?"x2":"y2"]:M,[J=m==="x"?"xError":"yError"]:S,[Se=m==="x"?"xError2":"yError2"]:w}=Ee,E=ie(Ee,[R4(m),R4(X),R4(J),R4(Se)]),{bins:D,timeUnits:L,aggregate:A,groupby:j,encoding:V}=iM(E,n),_=[...A,...g],N=u!=="raw"?[]:j,I=Mh(y,f,V,C);return{transform:[...s.transform??[],...D,...L,..._.length===0?[]:[{aggregate:_,groupby:N}],...v],groupby:N,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:V,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:s,tooltipEncoding:I}}function I_e(e,t,n,r,i,o,a,s){let c=[],l=[],u=t.field,f,d=!1;if(o==="raw"){let p=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":s.errorbar.center,h=e.extent?e.extent:p==="mean"?"stderr":"iqr";if(p==="median"!=(h==="iqr")&&U(P.errorBarCenterIsUsedWithWrongExtent(p,h,a)),h==="stderr"||h==="stdev")c=[{op:h,field:u,as:`extent_${u}`},{op:p,field:u,as:`center_${u}`}],l=[{calculate:`datum["center_${u}"] + datum["extent_${u}"]`,as:`upper_${u}`},{calculate:`datum["center_${u}"] - datum["extent_${u}"]`,as:`lower_${u}`}],f=[{fieldPrefix:"center_",titlePrefix:y4(p)},{fieldPrefix:"upper_",titlePrefix:Kie(p,h,"+")},{fieldPrefix:"lower_",titlePrefix:Kie(p,h,"-")}],d=!0;else{let m,g,v;h==="ci"?(m="mean",g="ci0",v="ci1"):(m="median",g="q1",v="q3"),c=[{op:g,field:u,as:`lower_${u}`},{op:v,field:u,as:`upper_${u}`},{op:m,field:u,as:`center_${u}`}],f=[{fieldPrefix:"upper_",titlePrefix:xs({field:u,aggregate:v,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:xs({field:u,aggregate:g,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:xs({field:u,aggregate:m,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&U(P.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${u}`},{calculate:`datum["${u}"]`,as:`lower_${u}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:u}],l=[{calculate:`datum["${u}"] + datum["${r.field}"]`,as:`upper_${u}`}],i?l.push({calculate:`datum["${u}"] + datum["${i.field}"]`,as:`lower_${u}`}):l.push({calculate:`datum["${u}"] - datum["${r.field}"]`,as:`lower_${u}`}));for(let p of l)f.push({fieldPrefix:p.as.substring(0,6),titlePrefix:ea(ea(p.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:c,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Kie(e,t,n){return`${y4(e)} ${n} ${t}`}var fM="errorband",e1e=["band","borders"],t1e=new Cs(fM,xF);function xF(e,{config:t}){e=k(x({},e),{encoding:z4(e.encoding,t)});let{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:c}=yF(e,fM,t),l=a,u=$f(l,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0,d={type:f?"area":"rect"},p={type:f?"line":"rule"},h=x(x({},l.interpolate?{interpolate:l.interpolate}:{}),l.tension&&l.interpolate?{tension:l.tension}:{});return f?(d=k(x(x({},d),h),{ariaRoleDescription:"errorband"}),p=k(x(x({},p),h),{aria:!1})):l.interpolate?U(P.errorBand1DNotSupport("interpolate")):l.tension&&U(P.errorBand1DNotSupport("tension")),k(x({},s),{transform:n,layer:[...u({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c}),...u({partName:"borders",mark:p,positionPrefix:"lower",extraEncoding:c}),...u({partName:"borders",mark:p,positionPrefix:"upper",extraEncoding:c})]})}var n1e={};function CF(e,t,n){let r=new Cs(e,t);n1e[e]={normalizer:r,parts:n}}function r1e(){return O(n1e)}CF(wh,gF,Wie);CF(uM,vF,Zie);CF(fM,xF,e1e);var i1e=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"];var bF={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},MF={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},o1e=O(bF),a1e=O(MF),F_e={header:1,headerRow:1,headerColumn:1,headerFacet:1},wF=O(F_e);var dM=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],s1e={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},SF={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},R5t=O(SF);var fi="_vgsid_",c1e={point:{on:"click",fields:[fi],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Sh(e){return e==="legend"||!!e?.legend}function pM(e){return Sh(e)&&ne(e)}function Bf(e){return!!e?.select}function hM(e){let t=[];for(let r of e||[]){if(Bf(r))continue;let n=r,{expr:i,bind:o}=n,a=ie(n,["expr","bind"]);if(o&&i){let s=k(x({},a),{bind:o,init:i});t.push(s)}else{let s=x(x(x({},a),i?{update:i}:{}),o?{bind:o}:{});t.push(s)}}return t}function EF(e){return H4(e)||Uf(e)||Eh(e)}function Eh(e){return"concat"in e}function H4(e){return"vconcat"in e}function Uf(e){return"hconcat"in e}function DF({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Y1(e){return ne(e)&&e.step!==void 0}function zF(e){return e.view||e.width||e.height}var HF=20,R_e={align:1,bounds:1,center:1,columns:1,spacing:1},O_e=O(R_e);function l1e(e,t,n){let r=n[t],i={},{spacing:o,columns:a}=r;o!==void 0&&(i.spacing=o),a!==void 0&&($c(e)&&!ys(e.facet)||Eh(e))&&(i.columns=a),H4(e)&&(i.columns=1);for(let s of O_e)if(e[s]!==void 0)if(s==="spacing"){let c=e[s];i[s]=Oe(c)?c:{row:c.row??o,column:c.column??o}}else i[s]=e[s];return i}function Dh(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function L0(e,t){let n=jf(e,t);return Y1(n)?n.step:d1e}function jf(e,t){let n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ot(n,{step:e.step})}var d1e=20,P_e={continuousWidth:200,continuousHeight:200,step:d1e};var $_e={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:P_e,mark:xie,arc:{},area:{},bar:Mie,circle:{},geoshape:{},image:{},line:{},point:{},rect:wie,rule:{color:"black"},square:{},text:{color:"black"},tick:Sie,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:oie,projection:{},legend:s1e,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:c1e,style:{},title:{},facet:{spacing:HF},concat:{spacing:HF},normalizedNumberFormat:".0%"},Uc=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],u1e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},f1e={blue:Uc[0],orange:Uc[1],red:Uc[2],teal:Uc[3],green:Uc[4],yellow:Uc[5],purple:Uc[6],pink:Uc[7],brown:Uc[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function B_e(e={}){return{signals:[{name:"color",value:ne(e)?x(x({},f1e),e):f1e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function U_e(e){return{signals:[{name:"fontSize",value:ne(e)?x(x({},u1e),e):u1e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function j_e(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function p1e(e){let t=O(e||{}),n={};for(let r of t){let i=e[r];n[r]=Bc(i)?Db(i):Rr(i)}return n}function q_e(e){let t=O(e),n={};for(let r of t)n[r]=p1e(e[r]);return n}var G_e=[...Ub,...pF,...wF,"background","padding","legend","lineBreak","scale","style","title","view"];function mM(e={}){let c=e,{color:t,font:n,fontSize:r,selection:i}=c,o=ie(c,["color","font","fontSize","selection"]),a=$a({},le($_e),n?j_e(n):{},t?B_e(t):{},r?U_e(r):{},o||{});i&&tc(a,"selection",i,!0);let s=On(a,G_e);for(let l of["background","lineBreak","padding"])a[l]&&(s[l]=Rr(a[l]));for(let l of Ub)a[l]&&(s[l]=cr(a[l]));for(let l of pF)a[l]&&(s[l]=p1e(a[l]));for(let l of wF)a[l]&&(s[l]=cr(a[l]));return a.legend&&(s.legend=cr(a.legend)),a.scale&&(s.scale=cr(a.scale)),a.style&&(s.style=q_e(a.style)),a.title&&(s.title=cr(a.title)),a.view&&(s.view=cr(a.view)),s}var W_e=new Set(["view",...gie]),Y_e=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],X_e=x({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},yie);function h1e(e){e=le(e);for(let t of Y_e)delete e[t];if(e.axis)for(let t in e.axis)Bc(e.axis[t])&&delete e.axis[t];if(e.legend)for(let t of i1e)delete e.legend[t];if(e.mark){for(let t of nF)delete e.mark[t];e.mark.tooltip&&ne(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(hM(e.params)),delete e.params);for(let t of W_e){for(let r of nF)delete e[t][r];let n=X_e[t];if(n)for(let r of n)delete e[t][r];K_e(e,t)}for(let t of r1e())delete e[t];Q_e(e);for(let t in e)ne(e[t])&&We(e[t])&&delete e[t];return We(e)?void 0:e}function Q_e(e){let{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=Sb(e.title);We(t)||(e.style["group-title"]=x(x({},e.style["group-title"]),t)),We(n)||(e.style["group-subtitle"]=x(x({},e.style["group-subtitle"]),n)),We(r)?delete e.title:e.title=r}function K_e(e,t,n,r){let i=r?e[t][r]:e[t];t==="view"&&(n="cell");let o=x(x({},i),e.style[n??t]);We(o)||(e.style[n??t]=o),r||delete e[t]}function jc(e){return"layer"in e}function LF(e){return"repeat"in e}function m1e(e){return!F(e.repeat)&&e.repeat.layer}var L4=class{map(t,n){return $c(t)?this.mapFacet(t,n):LF(t)?this.mapRepeat(t,n):Uf(t)?this.mapHConcat(t,n):H4(t)?this.mapVConcat(t,n):Eh(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(jc(t))return this.mapLayer(t,n);if(br(t))return this.mapUnit(t,n);throw new Error(P.invalidSpec(t))}mapLayer(t,n){return k(x({},t),{layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))})}mapHConcat(t,n){return k(x({},t),{hconcat:t.hconcat.map(r=>this.map(r,n))})}mapVConcat(t,n){return k(x({},t),{vconcat:t.vconcat.map(r=>this.map(r,n))})}mapConcat(t,n){let o=t,{concat:r}=o,i=ie(o,["concat"]);return k(x({},i),{concat:r.map(a=>this.map(a,n))})}mapFacet(t,n){return k(x({},t),{spec:this.map(t.spec,n)})}mapRepeat(t,n){return k(x({},t),{spec:this.map(t.spec,n)})}};var Z_e={zero:1,center:1,normalize:1};function J_e(e){return e in Z_e}var eke=new Set([tF,E0,S0,_f,Nf,ph,hh,D0,$b,dh]),tke=new Set([E0,S0,tF]);function qf(e){return Y(e)&&Rc(e)==="quantitative"&&!e.bin}function g1e(e,t,{orient:n,type:r}){let i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),a=e[t],s=e[i];if(Y(a)&&Y(s))if(qf(a)&&qf(s)){if(a.stack)return t;if(s.stack)return i;let c=Y(a)&&!!a.aggregate,l=Y(s)&&!!s.aggregate;if(c!==l)return c?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(qf(a))return t;if(qf(s))return i}else{if(qf(a))return o&&n==="vertical"?void 0:t;if(qf(s))return o&&n==="horizontal"?void 0:i}}function nke(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function gM(e,t){let n=li(e)?e:{type:e},r=n.type;if(!eke.has(r))return null;let i=g1e(t,"x",n)||g1e(t,"theta",n);if(!i)return null;let o=t[i],a=Y(o)?K(o,{}):void 0,s=nke(i),c=[],l=new Set;if(t[s]){let m=t[s],g=Y(m)?K(m,{}):void 0;g&&g!==a&&(c.push(s),l.add(g))}let u=s==="x"?"xOffset":"yOffset",f=t[u],d=Y(f)?K(f,{}):void 0;d&&d!==a&&(c.push(u),l.add(d));let p=mre.reduce((m,g)=>{if(g!=="tooltip"&&bs(t,g)){let v=t[g];for(let y of te(v)){let C=ui(y);if(C.aggregate)continue;let b=K(C,{});(!b||!l.has(b))&&m.push({channel:g,fieldDef:C})}}return m},[]),h;return o.stack!==void 0?A1(o.stack)?h=o.stack?"zero":null:h=o.stack:tke.has(r)&&(h="zero"),!h||!J_e(h)||Pf(t)&&p.length===0?null:o?.scale?.type&&o?.scale?.type!==Or.LINEAR?(o?.stack&&U(P.cannotStackNonLinearScale(o.scale.type)),null):ke(t[Ir(i)])?(o.stack!==void 0&&U(P.cannotStackRangedMark(i)),null):(Y(o)&&o.aggregate&&!Dre.has(o.aggregate)&&U(P.stackNonSummativeAggregate(o.aggregate)),{groupbyChannels:c,groupbyFields:l,fieldChannel:i,impute:o.impute===null?!1:Pi(r),stackBy:p,offset:h})}function vM(e,t,n){let r=cr(e),i=Be("orient",r,n);if(r.orient=oke(r.type,t,i),i!==void 0&&i!==r.orient&&U(P.orientOverridden(r.orient,i)),r.type==="bar"&&r.orient){let s=Be("cornerRadiusEnd",r,n);if(s!==void 0){let c=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Cie[r.orient];for(let l of c)r[l]=s;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}return Be("opacity",r,n)===void 0&&(r.opacity=ike(r.type,t)),Be("cursor",r,n)===void 0&&(r.cursor=rke(r,t,n)),r}function rke(e,t,n){return t.href||e.href||Be("href",e,n)?"pointer":e.cursor}function ike(e,t){if(Ne([Nf,dh,ph,hh],e)&&!Pf(t))return .7}function v1e(e,t,{graticule:n}){if(n)return!1;let r=Eo("filled",e,t),i=e.type;return ot(r,i!==Nf&&i!==D0&&i!==_f)}function oke(e,t,n){switch(e){case Nf:case ph:case hh:case $b:case hie:case pie:return}let{x:r,y:i,x2:o,y2:a}=t;switch(e){case E0:if(Y(r)&&(an(r.bin)||Y(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Y(i)&&(an(i.bin)||Y(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o)return(Y(r)&&r.type===c2&&!et(r.bin)||yh(r))&&Y(i)&&an(i.bin)?"horizontal":"vertical";if(!a)return(Y(i)&&i.type===c2&&!et(i.bin)||yh(i))&&Y(r)&&an(r.bin)?"vertical":"horizontal"}case _f:if(o&&!(Y(r)&&an(r.bin))&&a&&!(Y(i)&&an(i.bin)))return;case S0:if(a)return Y(i)&&an(i.bin)?"horizontal":"vertical";if(o)return Y(r)&&an(r.bin)?"vertical":"horizontal";if(e===_f){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case D0:case dh:{let s=sF(r),c=sF(i);if(n)return n;if(s&&!c)return e!=="tick"?"horizontal":"vertical";if(!s&&c)return e!=="tick"?"vertical":"horizontal";if(s&&c)return"vertical";{let l=zn(r)&&r.type===ps,u=zn(i)&&i.type===ps;if(l&&!u)return"vertical";if(!l&&u)return"horizontal"}return}}return"vertical"}function ake(e){let i=e,{point:t,line:n}=i,r=ie(i,["point","line"]);return O(r).length>1?r:r.type}function ske(e){for(let t of["line","area","rule","trail"])e[t]&&(e=k(x({},e),{[t]:On(e[t],["point","line"])}));return e}function AF(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ne(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ne(t.point)?t.point:{}:void 0}function y1e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}var yM=class{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(br(t)){let{mark:r,encoding:i}=t,o=li(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!AF(o,n[o.type],i);case"area":return!!AF(o,n[o.type],i)||!!y1e(o,n[o.type])}}return!1}run(t,n,r){let{config:i}=n,y=t,{params:o,projection:a,mark:s,name:c,encoding:l}=y,u=ie(y,["params","projection","mark","name","encoding"]),f=z4(l,i),d=li(s)?s:{type:s},p=AF(d,i[d.type],f),h=d.type==="area"&&y1e(d,i[d.type]),m=[k(x({name:c},o?{params:o}:{}),{mark:ake(x(x({},d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{}),d)),encoding:On(f,["shape"])})],g=gM(vM(d,f,i),f),v=f;if(g){let{fieldChannel:C,offset:b}=g;v=k(x({},f),{[C]:x(x({},f[C]),b?{stack:b}:{})})}return v=On(v,["y2","x2"]),h&&m.push(k(x({},a?{projection:a}:{}),{mark:x(x({type:"line"},Nc(d,["clip","interpolate","tension","tooltip"])),h),encoding:v})),p&&m.push(k(x({},a?{projection:a}:{}),{mark:x(x({type:"point",opacity:1,filled:!0},Nc(d,["clip","tooltip"])),p),encoding:v})),r(k(x({},u),{layer:m}),k(x({},n),{config:ske(i)}))}};function b1e(e,t){return t?ys(e)?w1e(e,t):M1e(e,t):e}function xM(e,t){return t?w1e(e,t):e}function VF(e,t,n){let r=t[e];if(_ie(r)){if(r.repeat in n)return k(x({},t),{[e]:n[r.repeat]});U(P.noSuchRepeatedValue(r.repeat));return}return t}function M1e(e,t){if(e=VF("field",e,t),e!==void 0){if(e===null)return null;if(Kb(e)&&Pr(e.sort)){let n=VF("field",e.sort,t);e=x(x({},e),n?{sort:n}:{})}return e}}function x1e(e,t){if(Y(e))return M1e(e,t);{let n=VF("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function C1e(e,t){if(ke(e)){let r=x1e(e,t);if(r)return r;if(E4(e))return{condition:e.condition}}else{if(D4(e)){let r=x1e(e.condition,t);if(r)return k(x({},e),{condition:r});{let n=e,{condition:i}=n;return ie(n,["condition"])}}return e}}function w1e(e,t){let n={};for(let r in e)if(de(e,r)){let i=e[r];if(F(i))n[r]=i.map(o=>C1e(o,t)).filter(o=>o);else{let o=C1e(i,t);o!==void 0&&(n[r]=o)}}return n}var CM=class{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(br(t)){let{encoding:n,mark:r}=t;if(r==="line"||li(r)&&r.type==="line")for(let i of dre){let o=wo(i),a=n[o];if(n[i]&&(Y(a)&&!an(a.bin)||$i(a)))return!0}}return!1}run(t,n,r){let{encoding:i,mark:o}=t;return U(P.lineWithRange(!!i.x2,!!i.y2)),r(k(x({},t),{mark:ne(o)?k(x({},o),{type:"rule"}):"rule"}),n)}};var bM=class extends L4{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Yie,Jie,t1e,new yM,new CM]}map(t,n){if(br(t)){let r=bs(t.encoding,B1),i=bs(t.encoding,U1),o=bs(t.encoding,Cf);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){let{parentEncoding:r,parentProjection:i}=n,o=xM(t.encoding,n.repeater),a=x(x(x({},t),t.name?{name:[n.repeaterPrefix,t.name].filter(c=>c).join("_")}:{}),o?{encoding:o}:{});if(r||i)return this.mapUnitWithParentEncodingOrProjection(a,n);let s=this.mapLayerOrUnit.bind(this);for(let c of this.nonFacetUnitNormalizers)if(c.hasMatchingType(a,n.config))return c.run(a,n,s);return a}mapRepeat(t,n){return m1e(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){let f=t,{repeat:r,spec:i}=f,o=ie(f,["repeat","spec"]),{row:a,column:s,layer:c}=r,{repeater:l={},repeaterPrefix:u=""}=n;return a||s?this.mapRepeat(k(x({},t),{repeat:x(x({},a?{row:a}:{}),s?{column:s}:{}),spec:{repeat:{layer:c},spec:i}}),n):k(x({},o),{layer:c.map(d=>{let p=k(x({},l),{layer:d}),h=`${(i.name?`${i.name}_`:"")+u}child__layer_${pt(d)}`,m=this.mapLayerOrUnit(i,k(x({},n),{repeater:p,repeaterPrefix:h}));return m.name=h,m})})}mapNonLayerRepeat(t,n){let h=t,{repeat:r,spec:i,data:o}=h,a=ie(h,["repeat","spec","data"]);!F(r)&&t.columns&&(t=On(t,["columns"]),U(P.columnsNotSupportByRowCol("repeat")));let s=[],{repeater:c={},repeaterPrefix:l=""}=n,u=!F(r)&&r.row||[c?c.row:null],f=!F(r)&&r.column||[c?c.column:null],d=F(r)&&r||[c?c.repeat:null];for(let m of d)for(let g of u)for(let v of f){let y={repeat:m,row:g,column:v,layer:c.layer},C=(i.name?`${i.name}_`:"")+l+"child__"+(F(r)?`${pt(m)}`:(r.row?`row_${pt(g)}`:"")+(r.column?`column_${pt(v)}`:"")),b=this.map(i,k(x({},n),{repeater:y,repeaterPrefix:C}));b.name=C,s.push(On(b,["data"]))}let p=F(r)?t.columns:r.column?r.column.length:1;return k(x({data:i.data??o,align:"all"},a),{columns:p,concat:s})}mapFacet(t,n){let{facet:r}=t;return ys(r)&&t.columns&&(t=On(t,["columns"]),U(P.columnsNotSupportByRowCol("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){let{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:a,config:s}=n,c=E1e({parentProjection:a,projection:i}),l=S1e({parentEncoding:o,encoding:xM(r,n.repeater)});return this.mapUnit(x(x(x({},t),c?{projection:c}:{}),l?{encoding:l}:{}),{config:s})}mapFacetedUnit(t,n){let y=t.encoding,{row:r,column:i,facet:o}=y,a=ie(y,["row","column","facet"]),C=t,{mark:s,width:c,projection:l,height:u,view:f,params:d,encoding:p}=C,h=ie(C,["mark","width","projection","height","view","params","encoding"]),{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),v=xM(a,n.repeater);return this.mapFacet(k(x(x({},h),g),{facet:m,spec:x(k(x(x(x(x({},c?{width:c}:{}),u?{height:u}:{}),f?{view:f}:{}),l?{projection:l}:{}),{mark:s,encoding:v}),d?{params:d}:{})}),n)}getFacetMappingAndLayout(t,n){let{row:r,column:i,facet:o}=t;if(r||i){o&&U(P.facetChannelDropped([...r?[B1]:[],...i?[U1]:[]]));let c={},l={};for(let u of[B1,U1]){let f=t[u];if(f){let a=f,{align:d,center:p,spacing:h,columns:m}=a,g=ie(a,["align","center","spacing","columns"]);c[u]=g;for(let v of["align","center","spacing"])f[v]!==void 0&&(l[v]??(l[v]={}),l[v][u]=f[v])}}return{facetMapping:c,layout:l}}else{let s=o,{align:c,center:l,spacing:u,columns:f}=s,d=ie(s,["align","center","spacing","columns"]);return{facetMapping:b1e(d,n.repeater),layout:x(x(x(x({},c?{align:c}:{}),l?{center:l}:{}),u?{spacing:u}:{}),f?{columns:f}:{})}}}mapLayer(t,o){var a=o,{parentEncoding:n,parentProjection:r}=a,i=ie(a,["parentEncoding","parentProjection"]);let f=t,{encoding:s,projection:c}=f,l=ie(f,["encoding","projection"]),u=k(x({},i),{parentEncoding:S1e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:E1e({parentProjection:r,projection:c})});return super.mapLayer(x(x({},l),t.name?{name:[u.repeaterPrefix,t.name].filter(d=>d).join("_")}:{}),u)}};function S1e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){let i=new Set([...O(e),...O(t)]);for(let o of i){let a=t[o],s=e[o];if(ke(a)){let c=x(x({},s),a);r[o]=c}else D4(a)?r[o]=k(x({},a),{condition:x(x({},s),a.condition)}):a||a===null?r[o]=a:(n||lr(s)||ae(s)||ke(s)||F(s))&&(r[o]=s)}}else r=t;return!r||We(r)?void 0:r}function E1e(e){let{parentProjection:t,projection:n}=e;return t&&n&&U(P.projectionOverridden({parentProjection:t,projection:n})),n??t}function zh(e){return"filter"in e}function D1e(e){return e?.stop!==void 0}function MM(e){return"lookup"in e}function z1e(e){return"data"in e}function H1e(e){return"param"in e}function L1e(e){return"pivot"in e}function A1e(e){return"density"in e}function V1e(e){return"quantile"in e}function N1e(e){return"regression"in e}function _1e(e){return"loess"in e}function k1e(e){return"sample"in e}function T1e(e){return"window"in e}function I1e(e){return"joinaggregate"in e}function F1e(e){return"flatten"in e}function R1e(e){return"calculate"in e}function wM(e){return"bin"in e}function O1e(e){return"impute"in e}function P1e(e){return"timeUnit"in e}function $1e(e){return"aggregate"in e}function B1e(e){return"stack"in e}function U1e(e){return"fold"in e}function j1e(e){return"extent"in e&&!("density"in e)}function q1e(e){return e.map(t=>zh(t)?{filter:v4(t.filter,Kre)}:t)}var SM=class extends L4{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=G1e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=G1e(t,n),t.encoding){let r={};for(let[i,o]of $1(t.encoding))r[i]=W1e(o,n);t=k(x({},t),{encoding:r})}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){let o=t,{selection:r}=o,i=ie(o,["selection"]);return r?k(x({},i),{params:$1(r).map(([a,s])=>{let d=s,{init:c,bind:l,empty:u}=d,f=ie(d,["init","bind","empty"]);f.type==="single"?(f.type="point",f.toggle=!1):f.type==="multi"&&(f.type="point"),n.emptySelections[a]=u!=="none";for(let p of rn(n.selectionPredicates[a]??{}))p.empty=u!=="none";return{name:a,value:c,select:f,bind:l}})}):t}};function G1e(e,t){let i=e,{transform:n}=i,r=ie(i,["transform"]);if(n){let o=n.map(a=>{if(zh(a))return{filter:NF(a,t)};if(wM(a)&&ia(a.bin))return k(x({},a),{bin:Y1e(a.bin)});if(MM(a)){let s=a.from,{selection:c}=s,l=ie(s,["selection"]);return c?k(x({},a),{from:x({param:c},l)}):a}return a});return k(x({},r),{transform:o})}return e}function W1e(e,t){let n=le(e);if(Y(n)&&ia(n.bin)&&(n.bin=Y1e(n.bin)),l2(n)&&n.scale?.domain?.selection){let r=n.scale.domain,{selection:o}=r,a=ie(r,["selection"]);n.scale.domain=x(x({},a),o?{param:o}:{})}if(E4(n))if(F(n.condition))n.condition=n.condition.map(o=>{let u=o,{selection:a,param:s,test:c}=u,l=ie(u,["selection","param","test"]);return s?o:k(x({},l),{test:NF(o,t)})});else{let i=W1e(n.condition,t),{selection:o,param:a,test:s}=i,c=ie(i,["selection","param","test"]);n.condition=a?n.condition:k(x({},c),{test:NF(n.condition,t)})}return n}function Y1e(e){let t=e.extent;if(t?.selection){let n=t,{selection:r}=n,i=ie(n,["selection"]);return k(x({},e),{extent:k(x({},i),{param:r})})}return e}function NF(e,t){let n=r=>v4(r,i=>{var o;let a=t.emptySelections[i]??!0,s={param:i,empty:a};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(s),s});return e.selection?n(e.selection):v4(e.test||e.filter,r=>r.selection?n(r.selection):r)}var Gf=class extends L4{map(t,n){let r=n.selections??[];if(t.params&&!br(t)){let i=[];for(let o of t.params)Bf(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){let r=n.selections;if(!r||!r.length)return t;let i=(n.path??[]).concat(t.name),o=[];for(let a of r)if(!a.views||!a.views.length)o.push(a);else for(let s of a.views)(Q(s)&&(s===t.name||i.includes(s))||F(s)&&s.map(c=>i.indexOf(c)).every((c,l,u)=>c!==-1&&(l===0||c>u[l-1])))&&o.push(a);return o.length&&(t.params=o),t}};for(let e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){let t=Gf.prototype[e];Gf.prototype[e]=function(n,r){return t.call(this,n,cke(n,r))}}function cke(e,t){return e.name?k(x({},t),{path:(t.path??[]).concat(e.name)}):t}function EM(e,t){t===void 0&&(t=mM(e.config));let n=dke(e,t),{width:r,height:i}=e,o=pke(n,{width:r,height:i,autosize:e.autosize},t);return x(x({},n),o?{autosize:o}:{})}var lke=new bM,uke=new SM,fke=new Gf;function dke(e,t={}){let n={config:t};return fke.map(lke.map(uke.map(e,n),n),n)}function X1e(e){return Q(e)?{type:e}:e??{}}function pke(e,t,n){let{width:r,height:i}=t,o=br(e)||jc(e),a={};o?r=="container"&&i=="container"?(a.type="fit",a.contains="padding"):r=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(r=="container"&&(U(P.containerSizeNonSingle("width")),r=void 0),i=="container"&&(U(P.containerSizeNonSingle("height")),i=void 0));let s=x(x(x({type:"pad"},a),n?X1e(n.autosize):{}),X1e(e.autosize));if(s.type==="fit"&&!o&&(U(P.FIT_NON_SINGLE),s.type="pad"),r=="container"&&!(s.type=="fit"||s.type=="fit-x")&&U(P.containerSizeNotCompatibleWithAutosize("width")),i=="container"&&!(s.type=="fit"||s.type=="fit-y")&&U(P.containerSizeNotCompatibleWithAutosize("height")),!kr(s,{type:"pad"}))return s}function Q1e(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function K1e(e){return e?`fit-${b4(e)}`:"fit"}var hke=["background","padding"];function _F(e,t){let n={};for(let r of hke)e&&e[r]!==void 0&&(n[r]=Rr(e[r]));return t&&(n.params=e.params),n}var Bi=class e{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new e(le(this.explicit),le(this.implicit))}combine(){return x(x({},this.explicit),this.implicit)}get(t){return ot(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(let n of O(t.combine())){let r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}};function u2(e){return{explicit:!0,value:e}}function Ui(e){return{explicit:!1,value:e}}function DM(e){return(t,n,r,i)=>{let o=e(t.value,n.value);return o>0?t:o<0?n:Wf(t,n,r,i)}}function Wf(e,t,n,r){return e.explicit&&t.explicit&&U(P.mergeConflictingProperty(n,r,e.value,t.value)),e}function X1(e,t,n,r,i=Wf){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:kr(e.value,t.value)?e:i(e,t,n,r)}var zM=class extends Bi{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){let t=super.clone();return t.parseNothing=this.parseNothing,t}};function qc(e){return"url"in e}function A0(e){return"values"in e}function HM(e){return"name"in e&&!qc(e)&&!A0(e)&&!fa(e)}function fa(e){return e&&(kF(e)||TF(e)||Hh(e))}function kF(e){return"sequence"in e}function TF(e){return"sphere"in e}function Hh(e){return"graticule"in e}var bt=function(e){return e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e}(bt||{});function IF(e){let o=e,{signals:t,hasLegend:n,index:r}=o,i=ie(o,["signals","hasLegend","index"]);return i.field=sr(i.field),i}function Gc(e,t=!0,n=_n){if(F(e)){let r=e.map(i=>Gc(i,t,n));return t?`[${r.join(", ")}]`:r}else if(s2(e))return n(t?sa(e):Bre(e));return t?n(ht(e)):e}function Z1e(e,t){for(let n of rn(e.component.selection??{})){let r=n.name,i=`${r}${y1}, ${n.resolve==="global"?"true":`{unit: ${pa(e)}}`}`;for(let o of Yf)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+ioe,on:[{events:{signal:n.name+y1},update:`modify(${Z(n.name+da)}, ${i})`}]})}return RF(t)}function J1e(e,t){if(e.component.selection&&O(e.component.selection).length){let n=Z(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:_i("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return RF(t)}function eoe(e,t){let n=!1;for(let r of rn(e.component.selection??{})){let i=r.name,o=Z(i+da);if(t.filter(s=>s.name===i).length===0){let s=r.resolve==="global"?"union":r.resolve,c=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${LM}(${o}, ${Z(s)}${c}`})}n=!0;for(let s of Yf)s.defined(r)&&s.topLevelSignals&&(t=s.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),RF(t)}function toe(e,t){let n=[...t],r=pa(e,{escape:!1});for(let i of rn(e.component.selection??{})){let o={name:i.name+da};if(i.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:fi}}]),i.init){let s=i.project.items.map(IF);o.values=i.project.hasSelectionId?i.init.map(c=>({unit:r,[fi]:Gc(c,!1)[0]})):i.init.map(c=>({unit:r,fields:s,values:Gc(c,!1)}))}n.filter(s=>s.name===i.name+da).length||n.push(o)}return n}function FF(e,t){for(let n of rn(e.component.selection??{}))for(let r of Yf)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function noe(e,t){for(let n of e.children)Mt(n)&&(t=FF(n,t));return t}function roe(e,t,n,r){let i=AM(e,t.param,t);return{signal:$n(n.get("type"))&&F(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function RF(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}var Ae=class{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){U(P.ADD_SAME_CHILD_TWICE);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){let n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(let n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){let n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){let t=this._parent,n=t.parent;for(let i of this._children)i.parent=t;this._children=[],t.removeChild(this);let r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}},Hn=class extends Ae{clone(){let t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${AI()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}};function OF(e){return e.as!==void 0}function ooe(e){return`${e}_end`}var f2=class e extends Ae{clone(){return new e(null,le(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){let r=n.reduceFieldDef((i,o,a)=>{let{field:s,timeUnit:c}=o;if(c){let l;if(ca(c)){if(Mt(n)){let{mark:u,markDef:f,config:d}=n,p=W1({fieldDef:o,markDef:f,config:d});(Fc(u)||p)&&(l={timeUnit:sn(c),field:s})}}else l={as:K(o,{forAs:!0}),field:s,timeUnit:c};if(Mt(n)){let{mark:u,markDef:f,config:d}=n,p=W1({fieldDef:o,markDef:f,config:d});Fc(u)&&Ct(a)&&p!==.5&&(l.rectBandPosition=p)}l&&(i[be(l)]=l)}return i},{});return We(r)?null:new e(t,r)}static makeFromTransform(t,n){let s=x({},n),{timeUnit:r}=s,i=ie(s,["timeUnit"]),o=sn(r),a=k(x({},i),{timeUnit:o});return new e(t,{[be(a)]:a})}merge(t){this.timeUnits=x({},this.timeUnits);for(let n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(let n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){let n={};for(let[r,i]of $1(this.timeUnits)){let o=OF(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(rn(this.timeUnits).map(t=>OF(t)?t.as:ooe(t.field)))}dependentFields(){return new Set(rn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${be(this.timeUnits)}`}assemble(){let t=[];for(let r of rn(this.timeUnits)){let{rectBandPosition:i}=r,o=sn(r.timeUnit);if(OF(r)){let{field:a,as:s}=r,n=o,{unit:c,utc:l}=n,u=ie(n,["unit","utc"]),f=[s,`${s}_end`];t.push(k(x(x(x({field:sr(a),type:"timeunit"},c?{units:Af(c)}:{}),l?{timezone:"utc"}:{}),u),{as:f})),t.push(...aoe(f,i,o))}else if(r){let{field:a}=r,s=a.replaceAll("\\.","."),c=coe({timeUnit:o,field:s}),l=ooe(s);t.push({type:"formula",expr:c,as:l}),t.push(...aoe([s,l],i,o))}}return t}},V0="offsetted_rect_start",N0="offsetted_rect_end";function coe({timeUnit:e,field:t,reverse:n}){let{unit:r,utc:i}=e,o=YI(r),{part:a,step:s}=QI(o,e.step);return`${i?"utcOffset":"timeOffset"}('${a}', datum['${t}'], ${n?-s:s})`}function aoe([e,t],n,r){if(n!==void 0&&n!==.5){let i=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:soe([coe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${V0}`},{type:"formula",expr:soe([i,o],n+.5),as:`${e}_${N0}`}]}return[]}function soe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}var Wc="_tuple_fields",PF=class{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}},mke={defined:()=>!0,parse:(e,t,n)=>{let r=t.name,i=t.project??(t.project=new PF),o={},a={},s=new Set,c=(h,m)=>{let g=m==="visual"?h.channel:h.field,v=pt(`${r}_${g}`);for(let y=1;s.has(v);y++)v=pt(`${r}_${g}_${y}`);return s.add(v),{[m]:v}},l=t.type,u=e.config.selection[l],f=n.value!==void 0?te(n.value):null,{fields:d,encodings:p}=ne(n.select)?n.select:{};if(!d&&!p&&f){for(let h of f)if(ne(h))for(let m of O(h))fre(m)?(p||(p=[])).push(m):l==="interval"?(U(P.INTERVAL_INITIALIZED_WITH_POS),p=u.encodings):(d??(d=[])).push(m)}!d&&!p&&(p=u.encodings,"fields"in u&&(d=u.fields));for(let h of p??[]){let m=e.fieldDef(h);if(m){let g=m.field;if(m.aggregate){U(P.cannotProjectAggregate(h,m.aggregate));continue}else if(!g){U(P.cannotProjectOnChannelWithoutField(h));continue}if(m.timeUnit&&!ca(m.timeUnit)){g=e.vgField(h);let v={timeUnit:m.timeUnit,as:g,field:m.field};a[be(v)]=v}if(!o[g]){let v=l==="interval"&&Fr(h)&&$n(e.getScaleComponent(h).get("type"))?"R":m.bin?"R-RE":"E",y={field:g,channel:h,type:v,index:i.items.length};y.signals=x(x({},c(y,"data")),c(y,"visual")),i.items.push(o[g]=y),i.hasField[g]=o[g],i.hasSelectionId=i.hasSelectionId||g===fi,vb(h)?(y.geoChannel=h,y.channel=gb(h),i.hasChannel[y.channel]=o[g]):i.hasChannel[h]=o[g]}}else U(P.cannotProjectOnChannelWithoutField(h))}for(let h of d??[]){if(i.hasField[h])continue;let m={type:"E",field:h,index:i.items.length};m.signals=x({},c(m,"data")),i.items.push(m),i.hasField[h]=m,i.hasSelectionId=i.hasSelectionId||h===fi}f&&(t.init=f.map(h=>i.items.map(m=>ne(h)?h[m.geoChannel||m.channel]!==void 0?h[m.geoChannel||m.channel]:h[m.field]:h))),We(a)||(i.timeUnit=new f2(null,a))},signals:(e,t,n)=>{let r=t.name+Wc;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(IF)})}},loe=mke;var gke={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{let n=t.scales=[];for(let r of t.project.items){let i=r.channel;if(!Fr(i))continue;let o=e.getScaleComponent(i),a=o?o.get("type"):void 0;if(!o||!$n(a)){U(P.SCALE_BINDINGS_CONTINUOUS);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{let r=t.scales.filter(a=>n.filter(s=>s.name===a.signals.data).length===0);if(!e.parent||uoe(e)||r.length===0)return n;let i=n.filter(a=>a.name===t.name)[0],o=i.update;if(o.indexOf(LM)>=0)i.update=`{${r.map(a=>`${Z(sr(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(let a of r){let s=`${Z(sr(a.field))}: ${a.signals.data}`;o.includes(s)||(o=`${o.substring(0,o.length-1)}, ${s}}`)}i.update=o}return n.concat(r.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!uoe(e))for(let r of t.scales){let i=n.filter(o=>o.name===r.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}},zo=gke;function Lh(e,t){return`domain(${Z(e.scaleName(t))})`}function uoe(e){return e.parent&&d2(e.parent)&&!e.parent.parent}var Yc="_brush",foe="_scale_trigger",Ah="geo_interval_init_tick",doe="_init",vke="_center",yke={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){let i=x({},ne(n.select)?n.select:{});i.fields=[fi],i.encodings||(i.encodings=n.value?O(n.value):[si,ai]),n.select=x({type:"interval"},i)}if(t.translate&&!zo.defined(t)){let i=`!event.item || event.item.mark.name !== ${Z(t.name+Yc)}`;for(let o of t.events){if(!o.between){U(`${o} is not an ordered event stream for interval selections.`);continue}let a=te((r=o.between[0]).filter??(r.filter=[]));a.indexOf(i)<0&&a.push(i)}}},signals:(e,t,n)=>{let r=t.name,i=r+y1,o=rn(t.project.hasChannel).filter(s=>s.channel===xt||s.channel===on),a=t.init?t.init[0]:null;if(n.push(...o.reduce((s,c)=>s.concat(xke(e,t,c,a&&a[c.index])),[])),e.hasProjection){let s=Z(e.projectionName()),c=e.projectionName()+vke,{x:l,y:u}=t.project.hasChannel,f=l&&l.signals.visual,d=u&&u.signals.visual,p=l?a&&a[l.index]:`${c}[0]`,h=u?a&&a[u.index]:`${c}[1]`,m=M=>e.getSizeSignalRef(M).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;a&&(n.unshift({name:r+doe,init:`[scale(${s}, [${l?p[0]:p}, ${u?h[0]:h}]), scale(${s}, [${l?p[1]:p}, ${u?h[1]:h}])]`}),(!l||!u)&&(n.find(S=>S.name===c)||n.unshift({name:c,update:`invert(${s}, [${m("width")}/2, ${m("height")}/2])`})));let v=`intersect(${g}, {markname: ${Z(e.getName("marks"))}}, unit.mark)`,y=`{unit: ${pa(e)}}`,C=`vlSelectionTuples(${v}, ${y})`,b=o.map(M=>M.signals.visual);return n.concat({name:i,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...a?[{signal:Ah}]:[]],update:C}]})}else{if(!zo.defined(t)){let l=r+foe,u=o.map(f=>{let d=f.channel,{data:p,visual:h}=f.signals,m=Z(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),v=$n(g)?"+":"";return`(!isArray(${p}) || (${v}invert(${m}, ${h})[0] === ${v}${p}[0] && ${v}invert(${m}, ${h})[1] === ${v}${p}[1]))`});u.length&&n.push({name:l,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:u.join(" && ")+` ? ${l} : {}`}]})}let s=o.map(l=>l.signals.data),c=`unit: ${pa(e)}, fields: ${r+Wc}, values`;return n.concat(x(x({name:i},a?{init:`{${c}: ${Gc(a)}}`}:{}),s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${c}: [${s}]} : null`}]}:{}))}},topLevelSignals:(e,t,n)=>(Mt(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===Ah).length||n.unshift({name:Ah,value:null,on:[{events:"timer{1}",update:`${Ah} === null ? {} : ${Ah}`}]})),n),marks:(e,t,n)=>{let r=t.name,{x:i,y:o}=t.project.hasChannel,a=i?.signals.visual,s=o?.signals.visual,c=`data(${Z(t.name+da)})`;if(zo.defined(t)||!i&&!o)return n;let l={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:o!==void 0?{signal:`${s}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${s}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(let g of O(l))l[g]=[x({test:`${c}.length && ${c}[0].unit === ${pa(e)}`},l[g]),{value:0}];let m=t.mark,{fill:u,fillOpacity:f,cursor:d}=m,p=ie(m,["fill","fillOpacity","cursor"]),h=O(p).reduce((g,v)=>(g[v]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,o!==void 0&&`${s}[0] !== ${s}[1]`].filter(y=>y).join(" && "),value:p[v]},{value:null}],g),{});return[{name:`${r+Yc}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:u},fillOpacity:{value:f}},update:l}},...n,{name:r+Yc,type:"rect",clip:!0,encode:{enter:k(x({},d?{cursor:{value:d}}:{}),{fill:{value:"transparent"}}),update:x(x({},l),h)}}]}},poe=yke;function xke(e,t,n,r){let i=!e.hasProjection,o=n.channel,a=n.signals.visual,s=Z(i?e.scaleName(o):e.projectionName()),c=d=>`scale(${s}, ${d})`,l=e.getSizeSignalRef(o===xt?"width":"height").signal,u=`${o}(unit)`,f=t.events.reduce((d,p)=>[...d,{events:p.between[0],update:`[${u}, ${u}]`},{events:p,update:`[${a}[0], clamp(${u}, 0, ${l})]`}],[]);if(i){let d=n.signals.data,p=zo.defined(t),h=e.getScaleComponent(o),m=h?h.get("type"):void 0,g=r?{init:Gc(r,!0,c)}:{value:[]};return f.push({events:{signal:t.name+foe},update:$n(m)?`[${c(`${d}[0]`)}, ${c(`${d}[1]`)}]`:"[0, 0]"}),p?[{name:d,on:[]}]:[k(x({name:a},g),{on:f}),k(x({name:d},r?{init:Gc(r)}:{}),{on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${s}, ${a})`}]})]}else{let d=o===xt?0:1,p=t.name+doe,h=r?{init:`[${p}[0][${d}], ${p}[1][${d}]]`}:{value:[]};return[k(x({name:a},h),{on:f})]}}var Cke={defined:e=>e.type==="point",signals:(e,t,n)=>{let r=t.name,i=r+Wc,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=rn(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Yc):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),c=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${s?` && ${s}`:""}`,l=`unit: ${pa(e)}, `;if(t.project.hasSelectionId)l+=`${fi}: ${a}[${Z(fi)}]`;else{let f=o.items.map(d=>e.fieldDef(d.channel)?.bin?`[${a}[${Z(e.vgField(d.channel,{}))}], ${a}[${Z(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${a}[${Z(d.field)}]`).join(", ");l+=`fields: ${i}, values: [${f}]`}let u=t.events;return n.concat([{name:r+y1,on:u?[{events:u,update:`${c} ? {${l}} : null`,force:!0}]:[]}])}},hoe=Cke;function Q1(e,t,n,r){let i=E4(t)&&t.condition,o=r(t);if(i){let s=te(i).map(c=>{let l=r(c);if(Nie(c)){let{param:u,empty:f}=c,d=VM(e,{param:u,empty:f});return x({test:d},l)}else{let u=_0(e,c.test);return x({test:u},l)}});return{[n]:[...s,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function A4(e,t="text"){let n=e.encoding[t];return Q1(e,n,t,r=>Xf(r,e.config))}function Xf(e,t,n="datum"){if(e){if(lr(e))return tt(e.value);if(ke(e)){let{format:r,formatType:i}=Of(e);return If({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Qf(e,t={}){let{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if(F(a))return{tooltip:$F({tooltip:a},o,i,t)};{let s=t.reactiveGeom?"datum.datum":"datum";return Q1(e,a,"tooltip",c=>{let l=Xf(c,i,s);if(l)return l;if(c===null)return;let u=Be("tooltip",r,i);if(u===!0&&(u={content:"encoding"}),Q(u))return{value:u};if(ne(u))return ae(u)?u:u.content==="encoding"?$F(n,o,i,t):{signal:s}})}}function BF(e,t,n,{reactiveGeom:r}={}){let i=x(x({},n),n.tooltipFormat),o={},a=r?"datum.datum":"datum",s=[];function c(u,f){let d=wo(f),p=zn(u)?u:k(x({},u),{type:e[d].type}),h=p.title||xh(p,i),m=te(h).join(", ").replaceAll(/"/g,'\\"'),g;if(Ct(f)){let v=f==="x"?"x2":"y2",y=ui(e[v]);if(an(p.bin)&&y){let C=K(p,{expr:a}),b=K(y,{expr:a}),{format:M,formatType:S}=Of(p);g=H0(C,b,M,S,i),o[v]=!0}}if((Ct(f)||f===oi||f===Ti)&&t&&t.fieldChannel===f&&t.offset==="normalize"){let{format:v,formatType:y}=Of(p);g=If({fieldOrDatumDef:p,format:v,formatType:y,expr:a,config:i,normalizeStack:!0}).signal}g??(g=Xf(p,i,a).signal),s.push({channel:f,key:m,value:g})}bh(e,(u,f)=>{Y(u)?c(u,f):Rf(u)&&c(u.condition,f)});let l={};for(let{channel:u,key:f,value:d}of s)!o[u]&&!l[f]&&(l[f]=d);return l}function $F(e,t,n,{reactiveGeom:r}={}){let i=BF(e,t,n,{reactiveGeom:r}),o=$1(i).map(([a,s])=>`"${a}": ${s}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function UF(e){let{markDef:t,config:n}=e,r=Be("aria",t,n);return r===!1?{}:x(x(x({},r?{aria:r}:{}),bke(e)),Mke(e))}function bke(e){let{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};let i=Be("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in Vre?{}:{ariaRoleDescription:{value:t}}}function Mke(e){let{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Q1(e,o,"description",c=>Xf(c,e.config));let a=Be("description",n,r);if(a!=null)return{description:tt(a)};if(r.aria===!1)return{};let s=BF(t,i,r);if(!We(s))return{description:{signal:$1(s).map(([c,l],u)=>`"${u>0?"; ":""}${c}: " + (${l})`).join(" + ")}}}function qt(e,t,n={}){let{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n,{defaultRef:s,defaultValue:c}=n;s===void 0&&(c??(c=Be(e,r,o,{vgChannel:a,ignoreVgConfig:!0})),c!==void 0&&(s=tt(c)));let l=i[e];return Q1(t,l,a??e,u=>gh({channel:e,channelDef:u,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s}))}function Kf(e,t={filled:void 0}){let{markDef:n,encoding:r,config:i}=e,{type:o}=n,a=t.filled??Be("filled",n,i),s=Ne(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,c=Be(a===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[a===!0&&"color"]??s,l=Be(a===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[a===!1&&"color"],u=a?"fill":"stroke",f=x(x({},c?{fill:tt(c)}:{}),l?{stroke:tt(l)}:{});return n.color&&(a?n.fill:n.stroke)&&U(P.droppingColor("property",{fill:"fill"in n,stroke:"stroke"in n})),x(x(x(x({},f),qt("color",e,{vgChannel:u,defaultValue:a?c:l})),qt("fill",e,{defaultValue:r.fill?c:void 0})),qt("stroke",e,{defaultValue:r.stroke?l:void 0}))}function moe(e){let{encoding:t,mark:n}=e,r=t.order;return!Pi(n)&&lr(r)?Q1(e,r,"zindex",i=>tt(i.value)):{}}function Xc({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){let o=`${e}Offset`,a=t[o],s=n[o];if((o==="xOffset"||o==="yOffset")&&s)return{offsetType:"encoding",offset:gh({channel:o,channelDef:s,markDef:t,config:r?.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:tt(a),bandPosition:i})};let c=t[o];return c?{offsetType:"visual",offset:c}:{}}function Cn(e,t,{defaultPos:n,vgChannel:r}){let{encoding:i,markDef:o,config:a,stack:s}=t,c=i[e],l=i[Ir(e)],u=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:p}=Xc({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),h=Vh({model:t,defaultPos:n,channel:e,scaleName:u,scale:f}),m=!c&&Ct(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:wke({channel:e,channelDef:c,channel2Def:l,markDef:o,config:a,scaleName:u,scale:f,stack:s,offset:d,defaultRef:h,bandPosition:p==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function wke(e){let{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(ke(n)&&i&&t===i.fieldChannel){if(Y(n)){let s=n.bandPosition;if(s===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(s=.5),s!==void 0)return kf({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:s,offset:o})}return ms(n,r,{suffix:"end"},{offset:o})}return Tf(e)}function Vh({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){let{markDef:o,config:a}=e;return()=>{let s=wo(n),c=o2(n),l=Be(n,o,a,{vgChannel:c});if(l!==void 0)return z0(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){let u=i.get("type");if(!Ne([Or.LOG,Or.TIME,Or.UTC],u)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return s==="y"?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{let u=e[Dn(n)];return k(x({},u),{mult:.5})}}}}var Ske={left:"x",center:"xc",right:"x2"},Eke={top:"y",middle:"yc",bottom:"y2"};function NM(e,t,n,r="middle"){if(e==="radius"||e==="theta")return o2(e);let i=e==="x"?"align":"baseline",o=Be(i,t,n),a;return ae(o)?(U(P.rangeMarkAlignmentCannotBeExpression(i)),a=void 0):a=o,e==="x"?Ske[a||(r==="top"?"left":"center")]:Eke[a||r]}function V4(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Nh(e,t,{defaultPos:n,defaultPos2:r}):Cn(e,t,{defaultPos:n})}function Nh(e,t,{defaultPos:n,defaultPos2:r}){let{markDef:i,config:o}=t,a=Ir(e),s=Dn(e),c=Dke(t,r,a),l=c[s]?NM(e,i,o):o2(e);return x(x({},Cn(e,t,{defaultPos:n,vgChannel:l})),c)}function Dke(e,t,n){let{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,c=wo(n),l=Dn(n),u=o2(n),f=r[c],d=e.scaleName(c),p=e.getScaleComponent(c),{offset:h}=n in r||n in o?Xc({channel:n,markDef:o,encoding:r,model:e}):Xc({channel:c,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){let g=Dn(n),v=e.markDef[g];return v!=null?{[g]:{value:v}}:{[u]:{field:e.getName(n)}}}let m=zke({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:s,scaleName:d,scale:p,stack:a,offset:h,defaultRef:void 0});return m!==void 0?{[u]:m}:_M(n,o)||_M(n,{[n]:ah(n,o,s.style),[l]:ah(l,o,s.style)})||_M(n,s[i])||_M(n,s.mark)||{[u]:Vh({model:e,defaultPos:t,channel:n,scaleName:d,scale:p})()}}function zke({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:c,defaultRef:l}){return ke(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?ms(t,o,{suffix:"start"},{offset:c}):Tf({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:c,defaultRef:l})}function _M(e,t){let n=Dn(e),r=o2(e);if(t[r]!==void 0)return{[r]:z0(e,t[r])};if(t[e]!==void 0)return{[r]:z0(e,t[e])};if(t[n]){let i=t[n];if(hs(i))U(P.relativeBandSizeNotSupported(n));else return{[n]:z0(e,i)}}}function K1(e,t){let{config:n,encoding:r,markDef:i}=e,o=i.type,a=Ir(t),s=Dn(t),c=r[t],l=r[a],u=e.getScaleComponent(t),f=u?u.get("type"):void 0,d=i.orient,p=r[s]??r.size??Be("size",i,n,{vgChannel:s}),h=II(t),m=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Y(c)&&(et(c.bin)||an(c.bin)||c.timeUnit&&!l)&&!(p&&!hs(p))&&!r[h]&&!Pt(f)?Ake({fieldDef:c,fieldDef2:l,channel:t,model:e}):(ke(c)&&Pt(f)||m)&&!l?Lke(c,t,e):Nh(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Hke(e,t,n,r,i,o,a){if(hs(i))if(n){let c=n.get("type");if(c==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);let u=Eo("minBandSize",{type:a},r);return{signal:u?`max(${g1(u)}, ${l})`:l}}else i.band!==1&&(U(P.cannotUseRelativeBandSizeWithNonBandScale(c)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(ae(i))return i;if(i)return{value:i}}if(n){let c=n.get("range");if(Oi(c)&&Oe(c.step))return{value:c.step-2}}if(!o){let{bandPaddingInner:c,barBandPaddingInner:l,rectBandPaddingInner:u}=r.scale,f=ot(c,a==="bar"?l:u);if(ae(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Oe(f))return{signal:`${1-f} * ${e}`}}return{value:L0(r.view,e)-2}}function Lke(e,t,n){let{markDef:r,encoding:i,config:o,stack:a}=n,s=r.orient,c=n.scaleName(t),l=n.getScaleComponent(t),u=Dn(t),f=Ir(t),d=II(t),p=n.scaleName(d),h=n.getScaleComponent(Ef(t)),m=s==="horizontal"&&t==="y"||s==="vertical"&&t==="x",g;(i.size||r.size)&&(m?g=qt("size",n,{vgChannel:u,defaultRef:tt(r.size)}):U(P.cannotApplySizeToNonOrientedMark(r.type)));let v=!!g,y=aF({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(l||h)?.get("type"),useVlSizeChannel:m});g=g||{[u]:Hke(u,p||c,h||l,o,y,!!e,r.type)};let C=(l||h)?.get("type")==="band"&&hs(y)&&!v?"top":"middle",b=NM(t,r,o,C),M=b==="xc"||b==="yc",{offset:S,offsetType:w}=Xc({channel:t,markDef:r,encoding:i,model:n,bandPosition:M?.5:0}),E=Tf({channel:t,channelDef:e,markDef:r,config:o,scaleName:c,scale:l,stack:a,offset:S,defaultRef:Vh({model:n,defaultPos:"mid",channel:t,scaleName:c,scale:l}),bandPosition:M?w==="encoding"?0:.5:ae(y)?{signal:`(1-${y})/2`}:hs(y)?(1-y.band)/2:0});if(u)return x({[b]:E},g);{let D=o2(f),L=g[u],A=S?k(x({},L),{offset:S}):L;return{[b]:E,[D]:F(E)?[E[0],k(x({},E[1]),{offset:A})]:k(x({},E),{offset:A})}}}function goe(e,t,n,r,i,o,a){if(NI(e))return 0;let s=e==="x"||e==="y2",c=s?-t/2:t/2;if(ae(n)||ae(i)||ae(r)||o){let l=g1(n),u=g1(i),f=g1(r),d=g1(o),h=o?`(${a} < ${d} ? ${s?"":"-"}0.5 * (${d} - (${a})) : ${c})`:c,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",v=u?`(${u} + ${h})`:h;return{signal:m+g+v}}else return i=i||0,r+(n?-i-c:+i+c)}function Ake({fieldDef:e,fieldDef2:t,channel:n,model:r}){let{config:i,markDef:o,encoding:a}=r,s=r.getScaleComponent(n),c=r.scaleName(n),l=s?s.get("type"):void 0,u=s.get("reverse"),f=aF({channel:n,fieldDef:e,markDef:o,config:i,scaleType:l}),p=r.component.axes[n]?.[0]?.get("translate")??.5,h=Ct(n)?Be("binSpacing",o,i)??0:0,m=Ir(n),g=o2(n),v=o2(m),y=Eo("minBandSize",o,i),{offset:C}=Xc({channel:n,markDef:o,encoding:a,model:r,bandPosition:0}),{offset:b}=Xc({channel:m,markDef:o,encoding:a,model:r,bandPosition:0}),M=zie({fieldDef:e,scaleName:c}),S=goe(n,h,u,p,C,y,M),w=goe(m,h,u,p,b??C,y,M),E=ae(f)?{signal:`(1-${f.signal})/2`}:hs(f)?(1-f.band)/2:.5,D=W1({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(et(e.bin)||e.timeUnit){let L=e.timeUnit&&D!==.5;return{[v]:voe({fieldDef:e,scaleName:c,bandPosition:E,offset:w,useRectOffsetField:L}),[g]:voe({fieldDef:e,scaleName:c,bandPosition:ae(E)?{signal:`1-${E.signal}`}:1-E,offset:S,useRectOffsetField:L})}}else if(an(e.bin)){let L=ms(e,c,{},{offset:w});if(Y(t))return{[v]:L,[g]:ms(t,c,{},{offset:S})};if(ia(e.bin)&&e.bin.step)return{[v]:L,[g]:{signal:`scale("${c}", ${K(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}U(P.channelRequiredForBinned(m))}function voe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return kf(x({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r},i?{startSuffix:V0,endSuffix:N0}:{}))}var Vke=new Set(["aria","width","height"]);function bn(e,t){let{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Kf(e):{};return x(x(x(x(x(x(x(x(x(x(x(x({},Nke(e.markDef,t)),yoe(e,"fill",n)),yoe(e,"stroke",r)),qt("opacity",e)),qt("fillOpacity",e)),qt("strokeOpacity",e)),qt("strokeWidth",e)),qt("strokeDash",e)),moe(e)),Qf(e)),A4(e,"href")),UF(e))}function yoe(e,t,n){let{config:r,mark:i,markDef:o}=e;if(Be("invalid",o,r)==="hide"&&n&&!Pi(i)){let s=_ke(e,{invalid:!0,channels:M4});if(s)return{[t]:[{test:s,value:null},...te(n)]}}return n?{[t]:n}:{}}function Nke(e,t){return Are.reduce((n,r)=>(!Vke.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=tt(e[r])),n),{})}function _ke(e,{invalid:t=!1,channels:n}){let r=n.reduce((o,a)=>{let s=e.getScaleComponent(a);if(s){let c=s.get("type"),l=e.vgField(a,{expr:"datum"});l&&$n(c)&&(o[l]=!0)}return o},{}),i=O(r);if(i.length>0){let o=t?"||":"&&";return i.map(a=>mh(a,t)).join(` ${o} `)}}function Zf(e){let{config:t,markDef:n}=e;if(Be("invalid",n,t)){let i=kke(e,{channels:Cr});if(i)return{defined:{signal:i}}}return{}}function kke(e,{invalid:t=!1,channels:n}){let r=n.reduce((o,a)=>{let s=e.getScaleComponent(a);if(s){let c=s.get("type"),l=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});l&&$n(c)&&(o[l]=!0)}return o},{}),i=O(r);if(i.length>0){let o=t?"||":"&&";return i.map(a=>mh(a,t)).join(` ${o} `)}}function kM(e,t){if(t!==void 0)return{[e]:tt(t)}}var jF="voronoi",Tke={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(let n of t.events)n.markname=e.getName(jF)},marks:(e,t,n)=>{let{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Pi(o))return U(P.nearestNotSupportForContinuous(o)),n;let a={name:e.getName(jF),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:x({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},Qf(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},s=0,c=!1;return n.forEach((l,u)=>{let f=l.name??"";f===e.component.mark[0].name?s=u:f.indexOf(jF)>=0&&(c=!0)}),c||n.splice(s+1,0,a),n}},TM=Tke;var Ike={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Sh(e.bind),parse:(e,t,n)=>FM(t,n),topLevelSignals:(e,t,n)=>{let r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],s=TM.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((c,l)=>{let u=pt(`${r}_${c.field}`);n.filter(d=>d.name===u).length||n.unshift(k(x({name:u},a?{init:Gc(a[l])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${Z(c.field)}] : null`}]:[],bind:o[c.field]??o[c.channel]??o}))}),n},signals:(e,t,n)=>{let r=t.name,i=t.project,o=n.filter(l=>l.name===r+y1)[0],a=r+Wc,s=i.items.map(l=>pt(`${r}_${l.field}`)),c=s.map(l=>`${l} !== null`).join(" && ");return s.length&&(o.update=`${c} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},IM=Ike;var Jf="_toggle",Fke={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Jf,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{let n=t.name+y1,r=t.name+Jf;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${pa(e)}}, `)+`${r} ? ${n} : null`}},RM=Fke;var Rke={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Q(t.clear)?_i(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(IM.defined(t))for(let r of t.project.items){let i=n.findIndex(o=>o.name===pt(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(let i of t.project.items){let o=n.findIndex(a=>a.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){let a=n.findIndex(s=>s.name===i.signals.data);r(a,"null")}}else{let i=n.findIndex(o=>o.name===t.name+y1);r(i,"null"),RM.defined(t)&&(i=n.findIndex(o=>o.name===t.name+Jf),r(i,"false"))}return n}},xoe=Rke;var Coe={defined:e=>{let t=e.resolve==="global"&&e.bind&&Sh(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==fi;return t&&!n&&U(P.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),t&&n},parse:(e,t,n)=>{let r=le(n);if(r.select=Q(r.select)?{type:r.select,toggle:t.toggle}:k(x({},r.select),{toggle:t.toggle}),FM(t,r),ne(n.select)&&(n.select.on||n.select.clear)){let a='event.item && indexof(event.item.mark.role, "legend") < 0';for(let s of t.events)s.filter=te(s.filter??[]),s.filter.includes(a)||s.filter.push(a)}let i=pM(t.bind)?t.bind.legend:"click",o=Q(i)?_i(i,"view"):te(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{let r=t.name,i=pM(t.bind)&&t.bind.legend,o=a=>s=>{let c=le(s);return c.markname=a,c};for(let a of t.project.items){if(!a.hasLegend)continue;let s=`${pt(a.field)}_legend`,c=`${r}_${s}`;if(n.filter(u=>u.name===c).length===0){let u=i.merge.map(o(`${s}_symbols`)).concat(i.merge.map(o(`${s}_labels`))).concat(i.merge.map(o(`${s}_entries`)));n.unshift(k(x({name:c},t.init?{}:{value:null}),{on:[{events:u,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${c}`,force:!0}]}))}}return n},signals:(e,t,n)=>{let r=t.name,i=t.project,o=n.find(d=>d.name===r+y1),a=r+Wc,s=i.items.filter(d=>d.hasLegend).map(d=>pt(`${r}_${pt(d.field)}_legend`)),l=`${s.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map(d=>({signal:d})),update:l}):s.length>0&&(o.update=l,delete o.value,delete o.on);let u=n.find(d=>d.name===r+Jf),f=pM(t.bind)&&t.bind.legend;return u&&(t.events?u.on.push(k(x({},u.on[0]),{events:f})):u.on[0].events=f),n}},boe=Coe;function Moe(e,t,n){let r=e.fieldDef(t)?.field;for(let i of rn(e.component.selection??{})){let o=i.project.hasField[r]??i.project.hasChannel[t];if(o&&Coe.defined(i)){let a=n.get("selections")??[];a.push(i.name),n.set("selections",a,!1),o.hasLegend=!0}}}var Soe="_translate_anchor",Eoe="_translate_delta",Oke={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{let r=t.name,i=zo.defined(t),o=r+Soe,{x:a,y:s}=t.project.hasChannel,c=_i(t.translate,"scope");return i||(c=c.map(l=>(l.between[0].markname=r+Yc,l))),n.push({name:o,value:{},on:[{events:c.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?`, extent_x: ${i?Lh(e,xt):`slice(${a.signals.visual})`}`:"")+(s!==void 0?`, extent_y: ${i?Lh(e,on):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+Eoe,value:{},on:[{events:c,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),a!==void 0&&woe(e,t,a,"width",n),s!==void 0&&woe(e,t,s,"height",n),n}},Doe=Oke;function woe(e,t,n,r,i){let o=t.name,a=o+Soe,s=o+Eoe,c=n.channel,l=zo.defined(t),u=i.filter(M=>M.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(c),p=d&&d.get("type"),h=d&&d.get("reverse"),m=l?c===xt?h?"":"-":h?"-":"":"",g=`${a}.extent_${c}`,v=`${m}${s}.${c} / ${l?`${f}`:`span(${g})`}`,y=!l||!d?"panLinear":p==="log"?"panLog":p==="symlog"?"panSymlog":p==="pow"?"panPow":"panLinear",C=l?p==="pow"?`, ${d.get("exponent")??1}`:p==="symlog"?`, ${d.get("constant")??1}`:"":"",b=`${y}(${g}, ${v}${C})`;u.on.push({events:{signal:s},update:l?b:`clampRange(${b}, 0, ${f})`})}var Hoe="_zoom_anchor",Loe="_zoom_delta",Pke={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{let r=t.name,i=zo.defined(t),o=r+Loe,{x:a,y:s}=t.project.hasChannel,c=Z(e.scaleName(xt)),l=Z(e.scaleName(on)),u=_i(t.zoom,"scope");return i||(u=u.map(f=>(f.markname=r+Yc,f))),n.push({name:r+Hoe,on:[{events:u,update:i?"{"+[c?`x: invert(${c}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:u,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&zoe(e,t,a,"width",n),s!==void 0&&zoe(e,t,s,"height",n),n}},Aoe=Pke;function zoe(e,t,n,r,i){let o=t.name,a=n.channel,s=zo.defined(t),c=i.filter(y=>y.name===n.signals[s?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,u=e.getScaleComponent(a),f=u&&u.get("type"),d=s?Lh(e,a):c.name,p=o+Loe,h=`${o}${Hoe}.${a}`,m=!s||!u?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=s?f==="pow"?`, ${u.get("exponent")??1}`:f==="symlog"?`, ${u.get("constant")??1}`:"":"",v=`${m}(${d}, ${h}, ${p}${g})`;c.on.push({events:{signal:p},update:s?v:`clampRange(${v}, 0, ${l})`})}var da="_store",y1="_tuple",ioe="_modify";var LM="vlSelectionResolve",Yf=[hoe,poe,loe,RM,IM,zo,boe,xoe,Doe,Aoe,TM];function $ke(e){let t=e.parent;for(;t&&!$r(t);)t=t.parent;return t}function pa(e,{escape:t}={escape:!0}){let n=t?Z(e.name):e.name,r=$ke(e);if(r){let{facet:i}=r;for(let o of Tr)i[o]&&(n+=` + '__facet_${o}_' + (facet[${Z(r.vgField(o))}])`)}return n}function _h(e){return rn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function FM(e,t){(Q(t.select)||!t.select.on)&&delete e.events,(Q(t.select)||!t.select.clear)&&delete e.clear,(Q(t.select)||!t.select.toggle)&&delete e.toggle}function qF(e){let t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...qF(e.object)),t.push(...qF(e.property))),t)}function Voe(e){return e.object.type==="MemberExpression"?Voe(e.object):e.object.name==="datum"}function OM(e){let t=cf(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&Voe(r)&&n.add(qF(r).slice(1).join("."))}),n}var Ms=class e extends Ae{clone(){return new e(null,this.model,le(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=_0(this.model,this.filter,this),this._dependentFields=OM(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}};function Noe(e,t){let n={},r=e.config.selection;if(!t||!t.length)return n;for(let i of t){let o=pt(i.name),a=i.select,s=Q(a)?a:a.type,c=ne(a)?le(a):{type:s},l=r[s];for(let d in l)d==="fields"||d==="encodings"||(d==="mark"&&(c[d]=x(x({},l[d]),c[d])),(c[d]===void 0||c[d]===!0)&&(c[d]=le(l[d]??c[d])));let u=n[o]=k(x({},c),{name:o,type:s,init:i.value,bind:i.bind,events:Q(c.on)?_i(c.on,"scope"):te(le(c.on))}),f=le(i);for(let d of Yf)d.defined(u)&&d.parse&&d.parse(e,u,f)}return n}function VM(e,t,n,r="datum"){let i=Q(t)?t:t.param,o=pt(i),a=Z(o+da),s;try{s=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(s.project.timeUnit){let d=n??e.component.data.raw,p=s.project.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p}let c=s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=s.resolve==="global"?")":`, ${Z(s.resolve)})`,u=`${c}${a}, ${r}${l}`,f=`length(data(${a}))`;return t.empty===!1?`${f} && ${u}`:`!${f} || ${u}`}function AM(e,t,n){let r=pt(t),i=n.encoding,o=n.field,a;try{a=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=a.project.items[0].field,a.project.items.length>1&&U(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Z(o)}.`);else if(i&&!o){let s=a.project.items.filter(c=>c.channel===i);!s.length||s.length>1?(o=a.project.items[0].field,U((s.length?"Multiple ":"No ")+`matching ${Z(i)} encoding found for selection ${Z(n.param)}. Using "field": ${Z(o)}.`)):o=s[0].field}return`${a.name}[${Z(sr(o))}]`}function _oe(e,t){for(let[n,r]of $1(e.component.selection??{})){let i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Hn(new Ms(t,e,{param:n}),i,bt.Lookup,e.component.data.outputNodeRefCounts)}}function _0(e,t,n){return yf(t,r=>Q(r)?r:Qre(r)?VM(e,r,n):Rb(r))}function Bke(e,t){if(e)return F(e)&&!oa(e)?e.map(n=>xh(n,t)).join(", "):e}function GF(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function e8(e,t,n,r={header:!1}){let f=e.combine(),{disable:i,orient:o,scale:a,labelExpr:s,title:c,zindex:l}=f,u=ie(f,["disable","orient","scale","labelExpr","title","zindex"]);if(!i){for(let p in u){let h=$ie[p],m=u[p];if(h&&h!==t&&h!=="both")delete u[p];else if(Bc(m)){let d=m,{condition:g}=d,v=ie(d,["condition"]),y=te(g),C=uF[p];if(C){let{vgProp:b,part:M}=C,S=[...y.map(w=>{let L=w,{test:E}=L,D=ie(L,["test"]);return x({test:_0(null,E)},D)}),v];GF(u,M,b,S),delete u[p]}else if(C===null){let b={signal:y.map(M=>{let E=M,{test:S}=E,w=ie(E,["test"]);return`${_0(null,S)} ? ${$I(w)} : `}).join("")+$I(v)};u[p]=b}}else if(ae(m)){let g=uF[p];if(g){let{vgProp:v,part:y}=g;GF(u,y,v,m),delete u[p]}}Ne(["labelAlign","labelBaseline"],p)&&u[p]===null&&delete u[p]}if(t==="grid"){if(!u.grid)return;if(u.encode){let{grid:p}=u.encode;u.encode=x({},p?{grid:p}:{}),We(u.encode)&&delete u.encode}return k(x({scale:a,orient:o},u),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ot(l,0)})}else{if(!r.header&&e.mainExtracted)return;if(s!==void 0){let h=s;u.encode?.labels?.update&&ae(u.encode.labels.update.text)&&(h=ea(s,"datum.label",u.encode.labels.update.text.signal)),GF(u,"labels","text",{signal:h})}if(u.labelAlign===null&&delete u.labelAlign,u.encode){for(let h of nM)e.hasAxisPart(h)||delete u.encode[h];We(u.encode)&&delete u.encode}let p=Bke(c,n);return k(x(x(x({scale:a,orient:o,grid:!1},p?{title:p}:{}),u),n.aria===!1?{aria:!1}:{}),{zindex:ot(l,0)})}}}function PM(e){let{axes:t}=e.component,n=[];for(let r of Cr)if(t[r]){for(let i of t[r])if(!i.get("disable")&&!i.get("gridScale")){let o=r==="x"?"height":"width",a=e.getSizeSignalRef(o).signal;o!==a&&n.push({name:o,update:a})}}return n}function koe(e,t){let{x:n=[],y:r=[]}=e;return[...n.map(i=>e8(i,"grid",t)),...r.map(i=>e8(i,"grid",t)),...n.map(i=>e8(i,"main",t)),...r.map(i=>e8(i,"main",t))].filter(i=>i)}function Toe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){let o=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},s=t[n==="x"?"axisTop":"axisRight"]||{},c=new Set([...O(a),...O(s)]),l={};for(let u of c.values())l[u]={signal:`${r.signal} === "${o}" ? ${g1(a[u])} : ${g1(s[u])}`};return l}return t[i]})])}function Ioe(e,t,n,r){let i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:JI(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",a=ae(n)?"axisOrient":`axis${y4(n)}`,s=[...i,...i.map(l=>o+l.substr(4))],c=["axis",a,o];return{vlOnlyAxisConfig:Toe(s,r,e,n),vgAxisConfig:Toe(c,r,e,n),axisConfigStyle:Uke([...c,...s],r)}}function Uke(e,t){let n=[{}];for(let r of e){let i=t[r]?.style;if(i){i=te(i);for(let o of i)n.push(t.style[o])}}return Object.assign.apply(null,n)}function kh(e,t,n,r={}){let i=UI(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(let o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(r[o]?.[e]!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}var YF={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??jke(n,e),gridScale:({model:e,channel:t})=>qke(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||QF(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||XF(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Gke(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Wke(t.type,n,Y(t)&&!!t.timeUnit,Y(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{let o=e==="x"?"width":e==="y"?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??Yke({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},tickMinStep:Xke,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;let r=KF(t,n);if(r!==void 0)return r;let i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",a=t.fieldDef(o);return jI(i?[oF(i)]:[],Y(a)?[oF(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Qke(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Kke(n,t)};function jke(e,t){return!Pt(e)&&Y(t)&&!et(t?.bin)&&!an(t?.bin)}function qke(e,t){let n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Foe(e,t,n,r,i){let o=t?.labelAngle;if(o!==void 0)return ae(o)?o:x4(o);{let{configValue:a}=kh("labelAngle",r,t?.style,i);return a!==void 0?x4(a):n===xt&&Ne([lh,ch],e.type)&&!(Y(e)&&e.timeUnit)?270:void 0}}function WF(e){return`(((${e.signal} % 360) + 360) % 360)`}function XF(e,t,n,r){if(e!==void 0)if(n==="x"){if(ae(e)){let i=WF(e),o=ae(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(ae(t)){let i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(ae(e)){let i=WF(e),o=ae(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(ae(t)){let i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function QF(e,t,n){if(e===void 0)return;let r=n==="x",i=r?0:90,o=r?"bottom":"left";if(ae(e)){let a=WF(e),s=ae(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${a} + 90)`:a} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${s} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(ae(t)){let a=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${a} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function Gke(e,t){if(t==="x"&&Ne(["quantitative","temporal"],e))return!0}function Wke(e,t,n,r){if(n&&!ne(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Roe(e){return e==="x"?"bottom":"left"}function Yke({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){if(!r&&!Pt(t)&&t!=="log"){if(Y(e)){if(et(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ne(["month","hours","day","quarter"],sn(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Xke({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Y(t)){let{timeUnit:n}=t;if(n){let r=Ab(n);if(r)return{signal:r}}}}function KF(e,t){let n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;if(o&&a)return qI(o,a);if(o)return o;if(a)return a;if(o!==void 0)return o;if(a!==void 0)return a}function Qke(e,t){let n=e.values;if(F(n))return tM(t,n);if(ae(n))return n}function Kke(e,t){return e==="rect"&&vh(t)?1:0}var k0=class e extends Ae{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=OM(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(l2(r)&&Yb(r.sort)){let{field:o,timeUnit:a}=r,s=r.sort,c=s.map((l,u)=>`${Rb({field:o,timeUnit:a,equal:l})} ? ${u} : `).join("")+s.length;t=new e(t,{calculate:c,as:ws(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${be(this.transform)}`}};function ws(e,t,n){return K(e,x({prefix:t,suffix:"sort_index"},n??{}))}function t8(e,t){return Ne(["top","bottom"],t)?"column":Ne(["left","right"],t)||e==="row"?"row":"column"}function Qc(e,t,n,r){let i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ot((t||{})[e],i[e],n.header[e])}function Th(e,t,n,r){let i={};for(let o of e){let a=Qc(o,t||{},n,r);a!==void 0&&(i[o]=a)}return i}var n8=["row","column"],r8=["header","footer"];function Ooe(e,t){let n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=Th(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),c=t8(t,s),l=x4(a);return{name:`${t}-title`,type:"group",role:`${c}-title`,title:x(x(x(k(x({text:n},t==="row"?{orient:"left"}:{}),{style:"guide-title"}),$oe(l,c)),Poe(c,l,o)),joe(r,i,t,o1e,bF))}}function Poe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}let r=QF(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function $oe(e,t){let n=XF(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Boe(e,t){let n=e.component.layoutHeaders[t],r=[];for(let i of r8)if(n[i])for(let o of n[i]){let a=Jke(e,t,i,n,o);a!=null&&r.push(a)}return r}function Zke(e,t){let{sort:n}=e;return Pr(n)?{field:K(n,{expr:"datum"}),order:n.order??"ascending"}:F(n)?{field:ws(e,t,{expr:"datum"}),order:"ascending"}:{field:K(e,{expr:"datum"}),order:n??"ascending"}}function $M(e,t,n){let{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:c}=Th(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=If({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,u=t8(t,s);return x(x(x(k(x({text:{signal:c?ea(ea(c,"datum.label",l),"datum.value",K(e,{expr:"parent"})):l}},t==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),$oe(o,u)),Poe(u,o,a)),joe(n,e,t,a1e,MF))}function Jke(e,t,n,r,i){if(i){let o=null,{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){let{labelOrient:f}=Th(["labelOrient"],a.header,s,t);(t==="row"&&!Ne(["top","bottom"],f)||t==="column"&&!Ne(["left","right"],f))&&(o=$M(a,t,s))}let c=$r(e)&&!ys(e.facet),l=i.axes,u=l?.length>0;if(o||u){let f=t==="row"?"height":"width";return x(x(x(x(x({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Zke(a,t)}:{}),u&&c?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{}),u?{axes:l}:{})}}return null}var eTe={column:{start:0,end:1},row:{start:1,end:0}};function tTe(e,t){return eTe[t][e]}function Uoe(e,t){let n={};for(let r of Tr){let i=e[r];if(i?.facetFieldDef){let{titleAnchor:o,titleOrient:a}=Th(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),s=t8(r,a),c=tTe(o,s);c!==void 0&&(n[s]=c)}}return We(n)?void 0:n}function joe(e,t,n,r,i){let o={};for(let a of r){if(!i[a])continue;let s=Qc(a,t?.header,e,n);s!==void 0&&(o[i[a]]=s)}return o}function i8(e){return[...BM(e,"width"),...BM(e,"height"),...BM(e,"childWidth"),...BM(e,"childHeight")]}function BM(e,t){let n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];let i=e.getSizeSignalRef(t).signal;if(r==="step"){let o=e.getScaleComponent(n);if(o){let a=o.get("type"),s=o.get("range");if(Pt(a)&&Oi(s)){let c=e.scaleName(n);return $r(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[qoe(c,s)]:[qoe(c,s),{name:i,update:ZF(c,o,`domain('${c}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){let o=i.endsWith("width"),a=o?"containerSize()[0]":"containerSize()[1]",s=Dh(e.config.view,o?"width":"height"),c=`isFinite(${a}) ? ${a} : ${s}`;return[{name:i,init:c,on:[{update:c,events:"window:resize"}]}]}else return[{name:i,value:r}]}function qoe(e,t){let n=`${e}_step`;return ae(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function ZF(e,t,n){let r=t.get("type"),i=t.get("padding"),o=ot(t.get("paddingOuter"),i),a=t.get("paddingInner");return a=r==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${g1(a)}, ${g1(o)}) * ${e}_step`}function UM(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function jM(e,t){return O(e).reduce((n,r)=>{let i=e[r];return x(x({},n),Q1(t,i,r,o=>tt(o.value)))},{})}function qM(e,t){if($r(t))return e==="theta"?"independent":"shared";if(d2(t))return"shared";if(a8(t))return Ct(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function o8(e,t){let n=e.scale[t],r=Ct(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&U(P.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}var nTe=k(x({},SF),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),JF=O(nTe),GM=class extends Bi{};var eR={symbols:rTe,gradient:iTe,labels:oTe,entries:aTe};function rTe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;let{markDef:a,encoding:s,config:c,mark:l}=n,u=a.filled&&l!=="trail",f=x(x({},kre({},n,vie)),Kf(n,{filled:u})),d=i.get("symbolOpacity")??c.legend.symbolOpacity,p=i.get("symbolFillColor")??c.legend.symbolFillColor,h=i.get("symbolStrokeColor")??c.legend.symbolStrokeColor,m=d===void 0?Goe(s.opacity)??a.opacity:void 0;if(f.fill){if(r==="fill"||u&&r===Pn)delete f.fill;else if(f.fill.field)p?delete f.fill:(f.fill=tt(c.legend.symbolBaseFillColor??"black"),f.fillOpacity=tt(m??1));else if(F(f.fill)){let g=WM(s.fill??s.color)??a.fill??(u&&a.color);g&&(f.fill=tt(g))}}if(f.stroke){if(r==="stroke"||!u&&r===Pn)delete f.stroke;else if(f.stroke.field||h)delete f.stroke;else if(F(f.stroke)){let g=ot(WM(s.stroke||s.color),a.stroke,u?a.color:void 0);g&&(f.stroke={value:g})}}if(r!==m1){let g=Y(t)&&Yoe(n,i,t);g?f.opacity=[x({test:g},tt(m??1)),tt(c.legend.unselectedOpacity)]:m&&(f.opacity=tt(m))}return f=x(x({},f),e),We(f)?void 0:f}function iTe(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;let{config:i,markDef:o,encoding:a}=t,s={},l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?Goe(a.opacity)||o.opacity:void 0;return l&&(s.opacity=tt(l)),s=x(x({},s),e),We(s)?void 0:s}function oTe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){let o=n.legend(r)||{},a=n.config,s=Y(t)?Yoe(n,i,t):void 0,c=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:l,formatType:u}=o,f;vs(u)?f=Do({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:u,config:a}):l===void 0&&u===void 0&&a.customFormatTypes&&(t.type==="quantitative"&&a.numberFormatType?f=Do({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):t.type==="temporal"&&a.timeFormatType&&Y(t)&&t.timeUnit===void 0&&(f=Do({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));let d=x(x(x({},c?{opacity:c}:{}),f?{text:f}:{}),e);return We(d)?void 0:d}function aTe(e,{legendCmpt:t}){return t.get("selections")?.length?k(x({},e),{fill:{value:"transparent"}}):e}function Goe(e){return Woe(e,(t,n)=>Math.max(t,n.value))}function WM(e){return Woe(e,(t,n)=>ot(t,n.value))}function Woe(e,t){if(kie(e))return te(e.condition).reduce(t,e.value);if(lr(e))return e.value}function Yoe(e,t,n){let r=t.get("selections");if(!r?.length)return;let i=Z(n.field);return r.map(o=>`(!length(data(${Z(pt(o)+da)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}var tR={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{let{format:r,formatType:i}=t;return qb(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{let{formatType:r}=e;return Gb(r,t,n)},gradientLength:e=>{let{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??fTe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??dTe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??cTe(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>xs(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(kc(n)&&G1(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>sTe(t,e)};function sTe(e,t){let n=e.values;if(F(n))return tM(t,n);if(ae(n))return n}function cTe(e,t,n,r){if(t!=="shape"){let i=WM(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Qoe(e){let{legend:t}=e;return ot(t.type,lTe(e))}function lTe({channel:e,timeUnit:t,scaleType:n}){if(kc(e)){if(Ne(["quarter","month","day"],t))return"symbol";if(G1(n))return"gradient"}return"symbol"}function Koe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??uTe(n,t)}function uTe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function fTe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){let{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:c}=e;if(G1(i))return n==="horizontal"?r==="top"||r==="bottom"?Xoe(t,"width",a,o):a:Xoe(t,"height",c,s)}function Xoe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function dTe(e){if(Ne(["quantile","threshold","log","symlog"],e))return"greedy"}function nR(e){let t=Mt(e)?pTe(e):vTe(e);return e.component.legends=t,t}function pTe(e){let{encoding:t}=e,n={};for(let r of[Pn,...dM]){let i=Ft(t[r]);!i||!e.getScaleComponent(r)||r===En&&Y(i)&&i.type===la||(n[r]=gTe(e,r))}return n}function hTe(e,t){let n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function mTe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===r?.title)return!0}return e===(n||{})[t]}function gTe(e,t){let n=e.legend(t),{markDef:r,encoding:i,config:o}=e,a=o.legend,s=new GM({},hTe(e,t));Moe(e,t,s);let c=n!==void 0?!n:a.disable;if(s.set("disable",c,n!==void 0),c)return s;n=n||{};let l=e.getScaleComponent(t).get("type"),u=Ft(i[t]),f=Y(u)?sn(u.timeUnit)?.unit:void 0,d=n.orient||o.legend.orient||"right",p=Qoe({legend:n,channel:t,timeUnit:f,scaleType:l}),h=Koe({legend:n,legendType:p,orient:d,legendConfig:a}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:u,legendConfig:a,config:o,scaleType:l,orient:d,legendType:p,direction:h};for(let b of JF){if(p==="gradient"&&b.startsWith("symbol")||p==="symbol"&&b.startsWith("gradient"))continue;let M=b in tR?tR[b](m):n[b];if(M!==void 0){let S=mTe(M,b,n,e.fieldDef(t));(S||o.legend[b]===void 0)&&s.set(b,M,S)}}let g=n?.encoding??{},v=s.get("selections"),y={},C={fieldOrDatumDef:u,model:e,channel:t,legendCmpt:s,legendType:p};for(let b of["labels","legend","title","symbols","gradient","entries"]){let M=jM(g[b]??{},e),S=b in eR?eR[b](M,C):M;S!==void 0&&!We(S)&&(y[b]=k(x(x({},v?.length&&Y(u)?{name:`${pt(u.field)}_legend_${b}`}:{}),v?.length?{interactive:!!v}:{}),{update:S}))}return We(y)||s.set("encode",y,!!n?.encoding),s}function vTe(e){let{legends:t,resolve:n}=e.component;for(let r of e.children){nR(r);for(let i of O(r.component.legends))n.legend[i]=o8(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=rR(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(let r of O(t))for(let i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function rR(e,t){if(!e)return t.clone();let n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(let o of JF){let a=X1(e.getWithExplicit(o),t.getWithExplicit(o),o,"legend",(s,c)=>{switch(o){case"symbolType":return yTe(s,c);case"title":return Hb(s,c);case"type":return i=!0,Ui("symbol")}return Wf(s,c,o,"legend")});e.setWithExplicit(o,a)}return i&&(e.implicit?.encode?.gradient&&nh(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&nh(e.explicit,["encode","gradient"])),e}function yTe(e,t){return t.value==="circle"?t:e}function xTe(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function YM(e){let t=e.component.legends,n={};for(let i of O(t)){let o=e.getScaleComponent(i),a=ht(o.get("domains"));if(n[a])for(let s of n[a])rR(s,t[i])||n[a].push(t[i]);else n[a]=[t[i].clone()]}return rn(n).flat().map(i=>CTe(i,e.config)).filter(i=>i!==void 0)}function CTe(e,t){let a=e.combine(),{disable:n,labelExpr:r,selections:i}=a,o=ie(a,["disable","labelExpr","selections"]);if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),o.encode?.symbols){let s=o.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!o.stroke&&(s.stroke={value:"transparent"});for(let c of dM)o[c]&&delete s[c]}if(o.title||delete o.title,r!==void 0){let s=r;o.encode?.labels?.update&&ae(o.encode.labels.update.text)&&(s=ea(r,"datum.label",o.encode.labels.update.text.signal)),xTe(o,"labels","text",{signal:s})}return o}}function Zoe(e){return d2(e)||a8(e)?bTe(e):Joe(e)}function bTe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Joe(e))}function Joe(e){let t=e.component.projection;if(!t||t.merged)return[];let n=t.combine(),{name:r}=n;if(t.data){let i={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},o=t.data.reduce((a,s)=>{let c=ae(s)?s.signal:`data('${e.lookupDataSource(s)}')`;return Ne(a,c)||a.push(c),a},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[x({name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}else return[x({name:r,translate:{signal:"[width / 2, height / 2]"}},n)]}var e2e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];var Ih=class extends Bi{constructor(t,n,r,i){super(x({},n),{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}};function iR(e){e.component.projection=Mt(e)?MTe(e):ETe(e)}function MTe(e){if(e.hasProjection){let t=cr(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?wTe(e):void 0,o=new Ih(e.projectionName(!0),x(x({},cr(e.config.projection)??{}),t??{}),r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function wTe(e){let t=[],{encoding:n}=e;for(let r of[[si,ai],[ci,Ii]])(Ft(n[r[0]])||Ft(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(En)&&e.typedFieldDef(En).type===la&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(bt.Main)),t}function STe(e,t){let n=db(e2e,i=>!!(!de(e.explicit,i)&&!de(t.explicit,i)||de(e.explicit,i)&&de(t.explicit,i)&&kr(e.get(i),t.get(i))));if(kr(e.size,t.size)){if(n)return e;if(kr(e.explicit,{}))return t;if(kr(t.explicit,{}))return e}return null}function ETe(e){if(e.children.length===0)return;let t;for(let r of e.children)iR(r);let n=db(e.children,r=>{let i=r.component.projection;if(i)if(t){let o=STe(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){let r=e.projectionName(!0),i=new Ih(r,t.specifiedProjection,t.size,le(t.data));for(let o of e.children){let a=o.component.projection;a&&(a.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(a.get("name"),r),a.merged=!0)}return i}}function DTe(e,t,n,r){if(gs(t,n)){let i=Mt(e)?e.axis(n)??e.legend(n)??{}:{},o=K(t,{expr:"datum"}),a=K(t,{expr:"datum",binSuffix:"end"});return{formulaAs:K(t,{binSuffix:"range",forAs:!0}),formula:H0(o,a,i.format,i.formatType,r)}}return{}}function n2e(e,t){return`${wb(e)}_${t}`}function zTe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function s8(e,t,n){let r=Hf(n,void 0)??{},i=n2e(r,t);return e.getName(`${i}_bins`)}function HTe(e){return"as"in e}function t2e(e,t,n){let r,i;HTe(e)?r=Q(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[K(e,{forAs:!0}),K(e,{binSuffix:"end",forAs:!0})];let o=x({},Hf(t,void 0)),a=n2e(o,e.field),{signal:s,extentSignal:c}=zTe(n,a);if(zf(o.extent)){let u=o.extent;i=AM(n,u.param,u),delete o.extent}let l=x(x(x({bin:o,field:e.field,as:[r]},s?{signal:s}:{}),c?{extentSignal:c}:{}),i?{span:i}:{});return{key:a,binComponent:l}}var ha=class e extends Ae{clone(){return new e(null,le(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){let r=n.reduceFieldDef((i,o,a)=>{if(zn(o)&&et(o.bin)){let{key:s,binComponent:c}=t2e(o,o.bin,n);i[s]=x(x(x({},c),i[s]),DTe(n,o,a,n.config))}return i},{});return We(r)?null:new e(t,r)}static makeFromTransform(t,n,r){let{key:i,binComponent:o}=t2e(n,n.bin,r);return new e(t,{[i]:o})}merge(t,n){for(let r of O(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=ki([...this.bins[r].as,...t.bins[r].as],be)):this.bins[r]=t.bins[r];for(let r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(rn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(rn(this.bins).map(t=>t.field))}hash(){return`Bin ${be(this.bins)}`}assemble(){return rn(this.bins).flatMap(t=>{let n=[],[r,...i]=t.as,c=t.bin,{extent:o}=c,a=ie(c,["extent"]),s=x(x(x({type:"bin",field:sr(t.field),as:r,signal:t.signal},zf(o)?{extent:null}:{extent:o}),t.span?{span:{signal:`span(${t.span})`}}:{}),a);!o&&t.extentSignal&&(n.push({type:"extent",field:sr(t.field),signal:t.extentSignal}),s.extent={signal:t.extentSignal}),n.push(s);for(let l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:K({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}};function LTe(e,t,n,r){let i=Mt(r)?r.encoding[Ir(t)]:void 0;if(zn(n)&&Mt(r)&&Zb(n,i,r.markDef,r.config)){e.add(K(n,{})),e.add(K(n,{suffix:"end"}));let{mark:o,markDef:a,config:s}=r,c=W1({fieldDef:n,markDef:a,config:s});Fc(o)&&c!==.5&&Ct(t)&&(e.add(K(n,{suffix:V0})),e.add(K(n,{suffix:N0}))),n.bin&&gs(n,t)&&e.add(K(n,{binSuffix:"range"}))}else if(vb(t)){let o=gb(t);e.add(r.getName(o))}else e.add(K(n));return l2(n)&&cie(n.scale?.range)&&e.add(n.scale.range.field),e}function ATe(e,t){for(let n of O(t)){let r=t[n];for(let i of O(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}var Ho=class e extends Ae{clone(){return new e(null,new Set(this.dimensions),le(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(a=>{a.aggregate&&(r=!0)});let i={},o=new Set;return!r||(n.forEachFieldDef((a,s)=>{let{aggregate:c,field:l}=a;if(c)if(c==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([K(a,{forAs:!0})]);else{if(So(c)||a2(c)){let u=So(c)?"argmin":"argmax",f=c[u];i[f]??(i[f]={}),i[f][u]=new Set([K({op:u,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][c]=new Set([K(a,{forAs:!0})]);Fr(s)&&n.scaleDomain(s)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([K({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([K({field:l,aggregate:"max"},{forAs:!0})]))}else LTe(o,s,a,n)}),o.size+O(i).length===0)?null:new e(t,o,i)}static makeFromTransform(t,n){let r=new Set,i={};for(let o of n.aggregate){let{op:a,field:s,as:c}=o;a&&(a==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([c||K(o,{forAs:!0})])):(i[s]??(i[s]={}),i[s][a]=new Set([c||K(o,{forAs:!0})])))}for(let o of n.groupby??[])r.add(o);return r.size+O(i).length===0?null:new e(t,r,i)}merge(t){return HI(this.dimensions,t.dimensions)?(ATe(this.measures,t.measures),!0):(Rre("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...O(this.measures)])}producedFields(){let t=new Set;for(let n of O(this.measures))for(let r of O(this.measures[n])){let i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${be({dimensions:this.dimensions,measures:this.measures})}`}assemble(){let t=[],n=[],r=[];for(let o of O(this.measures))for(let a of O(this.measures[o]))for(let s of this.measures[o][a])r.push(s),t.push(a),n.push(o==="*"?null:sr(o));return{type:"aggregate",groupby:[...this.dimensions].map(sr),ops:t,fields:n,as:r}}};var h2=class extends Ae{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(let o of Tr){let a=n.facet[o];if(a){let{bin:s,sort:c}=a;this[o]=x({name:n.getName(`${o}_domain`),fields:[K(a),...et(s)?[K(a,{binSuffix:"end"})]:[]]},Pr(c)?{sortField:c}:F(c)?{sortIndexField:ws(a,o)}:{})}}this.childModel=n.child}hash(){let t="Facet";for(let n of Tr)this[n]&&(t+=` ${n.charAt(0)}:${be(this[n])}`);return t}get fields(){let t=[];for(let n of Tr)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){let t=new Set(this.fields);for(let n of Tr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){let t={};for(let n of Cr){let r=this.childModel.component.scales[n];if(r&&!r.merged){let i=r.get("type"),o=r.get("range");if(Pt(i)&&Oi(o)){let a=N4(this.childModel,n),s=c8(a);s?t[n]=s:U(P.unknownField(n))}}}return t}assembleRowColumnHeaderData(t,n,r){let i={row:"y",column:"x",facet:void 0}[t],o=[],a=[],s=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),a.push("max")):(o.push(r[i]),a.push("distinct")),s.push(`distinct_${r[i]}`));let{sortField:c,sortIndexField:l}=this[t];if(c){let{op:u=S4,field:f}=c;o.push(f),a.push(u),s.push(K(c,{forAs:!0}))}else l&&(o.push(l),a.push("max"),s.push(l));return{name:this[t].name,source:n??this.data,transform:[x({type:"aggregate",groupby:this[t].fields},o.length?{fields:o,ops:a,as:s}:{})]}}assembleFacetHeaderData(t){let{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(let c of n8){for(let l of r8){let u=(r[c]&&r[c][l])??[];for(let f of u)if(f.axes?.length>0){o[c]=!0;break}}if(o[c]){let l=`length(data("${this.facet.name}"))`,u=c==="row"?n?{signal:`ceil(${l} / ${n})`}:1:n?{signal:`min(${l}, ${n})`}:{signal:l};i.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:u}]})}}let{row:a,column:s}=o;return(a||s)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){let t=[],n=null,r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:a}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;let s=[].concat(r.x??[],r.y??[]),c=s.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:c}]})}for(let s of[U1,B1])this[s]&&t.push(this.assembleRowColumnHeaderData(s,n,r));if(a){let s=this.assembleFacetHeaderData(r);s&&t.push(...s)}return t}};function r2e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function VTe(e,t){let n=rh(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){let r=r2e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){let r=r2e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return U(P.unrecognizedParse(t)),null}function i2e(e){let t={};return th(e.filter,n=>{if(KI(n)){let r=null;Vb(n)?r=Rr(n.equal):_b(n)?r=Rr(n.lte):Nb(n)?r=Rr(n.lt):kb(n)?r=Rr(n.gt):Tb(n)?r=Rr(n.gte):Ib(n)?r=n.range[0]:Fb(n)&&(r=(n.oneOf??n.in)[0]),r&&(s2(r)?t[n.field]="date":Oe(r)?t[n.field]="number":Q(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function o2e(e){let t={};function n(r){Pc(r)?t[r.field]="date":r.type==="quantitative"&&Ere(r.aggregate)?t[r.field]="number":C0(r.field)>1?r.field in t||(t[r.field]="flatten"):l2(r)&&Pr(r.sort)&&C0(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Mt(e)||$r(e))&&e.forEachFieldDef((r,i)=>{if(zn(r))n(r);else{let o=wo(i),a=e.fieldDef(o);n(k(x({},r),{type:a.type}))}}),Mt(e)){let{mark:r,markDef:i,encoding:o}=e;if(Pi(r)&&!e.encoding.order){let a=i.orient==="horizontal"?"y":"x",s=o[a];Y(s)&&s.type==="quantitative"&&!(s.field in t)&&(t[s.field]="number")}}return t}function a2e(e){let t={};if(Mt(e)&&e.component.selection)for(let n of O(e.component.selection)){let r=e.component.selection[n];for(let i of r.project.items)!i.channel&&C0(i.field)>1&&(t[i.field]="flatten")}return t}var Br=class e extends Ae{clone(){return new e(null,le(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${be(this._parse)}`}static makeExplicit(t,n,r){let i={},o=n.data;return!fa(o)&&o?.format?.parse&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(let s of O(r)){let c=i.getWithExplicit(s);c.value!==void 0&&(c.explicit||c.value===r[s]||c.value==="derived"||r[s]==="flatten"?delete r[s]:U(P.differentParse(s,r[s],c.value)))}for(let s of O(n)){let c=i.get(s);c!==void 0&&(c===n[s]?delete n[s]:U(P.differentParse(s,n[s],c)))}let o=new Bi(n,r);i.copyAll(o);let a={};for(let s of O(o.combine())){let c=o.get(s);c!==null&&(a[s]=c)}return O(a).length===0||i.parseNothing?null:new e(t,a)}get parse(){return this._parse}merge(t){this._parse=x(x({},this._parse),t.parse),t.remove()}assembleFormatParse(){let t={};for(let n of O(this._parse)){let r=this._parse[n];C0(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(O(this._parse))}dependentFields(){return new Set(O(this._parse))}assembleTransforms(t=!1){return O(this._parse).filter(n=>t?C0(n)>1:!0).map(n=>{let r=VTe(n,this._parse[n]);return r?{type:"formula",expr:r,as:ih(n)}:null}).filter(n=>n!==null)}};var ma=class e extends Ae{clone(){return new e(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([fi])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:fi}}};var _4=class e extends Ae{clone(){return new e(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${be(this.params)}`}assemble(){return x({type:"graticule"},this.params===!0?{}:this.params)}};var k4=class e extends Ae{clone(){return new e(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${be(this.params)}`}assemble(){return x({type:"sequence"},this.params)}};var Z1=class extends Ae{constructor(t){super(null),t??(t={name:"source"});let n;if(fa(t)||(n=t.format?x({},On(t.format,["parse"])):{}),A0(t))this._data={values:t.values};else if(qc(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Ne(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else TF(t)?this._data={values:[{type:"Sphere"}]}:(HM(t)||fa(t))&&(this._data={});this._generator=fa(t),t.name&&(this._name=t.name),n&&!We(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return k(x({name:this._name},this._data),{transform:[]})}};var s2e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},NTe=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Fh;function XM(e){return e instanceof Z1||e instanceof _4||e instanceof k4}var l8=class{constructor(){Fh.set(this,void 0),s2e(this,Fh,!1,"f")}setModified(){s2e(this,Fh,!0,"f")}get modifiedFlag(){return NTe(this,Fh,"f")}};Fh=new WeakMap;var Ss=class extends l8{getNodeDepths(t,n,r){r.set(t,n);for(let i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){let r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(let i of r)this.run(i[0]);return this.modifiedFlag}},u8=class extends l8{optimize(t){this.run(t);for(let n of t.children)this.optimize(n);return this.modifiedFlag}};var QM=class extends u8{mergeNodes(t,n){let r=n.shift();for(let i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){let n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(let i of O(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}},KM=class extends u8{constructor(t){super(),this.requiresSelectionId=t&&_h(t)}run(t){t instanceof ma&&(this.requiresSelectionId&&(XM(t.parent)||t.parent instanceof Ho||t.parent instanceof Br)||(this.setModified(),t.remove()))}},ZM=class extends l8{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof f2&&(r=t.producedFields(),pb(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(let i of t.children)this.run(i,new Set([...n,...r]))}},JM=class extends u8{constructor(){super()}run(t){t instanceof Hn&&!t.isRequired()&&(this.setModified(),t.remove())}},ew=class extends Ss{run(t){if(!XM(t)&&!(t.numChildren()>1)){for(let n of t.children)if(n instanceof Br)if(t instanceof Br)this.setModified(),t.merge(n);else{if(hb(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}},tw=class extends Ss{run(t){let n=[...t.children],r=t.children.filter(i=>i instanceof Br);if(t.numChildren()>1&&r.length>=1){let i={},o=new Set;for(let a of r){let s=a.parse;for(let c of O(s))c in i?i[c]!==s[c]&&o.add(c):i[c]=s[c]}for(let a of o)delete i[a];if(!We(i)){this.setModified();let a=new Br(t,i);for(let s of n){if(s instanceof Br)for(let c of O(i))delete s.parse[c];t.removeChild(s),s.parent=a,s instanceof Br&&O(s.parse).length===0&&s.remove()}}}}},nw=class extends Ss{run(t){t instanceof Hn||t.numChildren()>0||t instanceof h2||t instanceof Z1||(this.setModified(),t.remove())}},rw=class extends Ss{run(t){let n=t.children.filter(i=>i instanceof f2),r=n.pop();for(let i of n)this.setModified(),r.merge(i)}},iw=class extends Ss{run(t){let n=t.children.filter(i=>i instanceof Ho),r={};for(let i of n){let o=be(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(let i of O(r)){let o=r[i];if(o.length>1){let a=o.pop();for(let s of o)a.merge(s)&&(t.removeChild(s),s.parent=a,s.remove(),this.setModified())}}}},ow=class extends Ss{constructor(t){super(),this.model=t}run(t){let n=!(XM(t)||t instanceof Ms||t instanceof Br||t instanceof ma),r=[],i=[];for(let o of t.children)o instanceof ha&&(n&&!hb(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){let o=r.pop();for(let a of r)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof ha?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){let o=i.pop();for(let a of i)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}},aw=class extends Ss{run(t){let n=[...t.children];if(!us(n,a=>a instanceof Hn)||t.numChildren()<=1)return;let i=[],o;for(let a of n)if(a instanceof Hn){let s=a;for(;s.numChildren()===1;){let[c]=s.children;if(c instanceof Hn)s=c;else break}i.push(...s.children),o?(t.removeChild(a),a.parent=o.parent,o.parent.removeChild(o),o.parent=s,this.setModified()):o=s}else i.push(a);if(i.length){this.setModified();for(let a of i)a.parent.removeChild(a),a.parent=o}}};var ga=class e extends Ae{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ki(this.transform.groupby.concat(t),n=>n)}dependentFields(){let t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??K(t)}hash(){return`JoinAggregateTransform ${be(this.transform)}`}assemble(){let t=[],n=[],r=[];for(let o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);let i=this.transform.groupby;return x({type:"joinaggregate",as:r,ops:n,fields:t},i!==void 0?{groupby:i}:{})}};function kTe(e){return e.stack.stackBy.reduce((t,n)=>{let r=n.fieldDef,i=K(r);return i&&t.push(i),t},[])}function TTe(e){return F(e)&&e.every(t=>Q(t))&&e.length>1}var Es=class e extends Ae{clone(){return new e(null,le(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){let{stack:r,groupby:i,as:o,offset:a="zero"}=n,s=[],c=[];if(n.sort!==void 0)for(let f of n.sort)s.push(f.field),c.push(ot(f.order,"ascending"));let l={field:s,order:c},u;return TTe(o)?u=o:Q(o)?u=[o,`${o}_end`]:u=[`${n.stack}_start`,`${n.stack}_end`],new e(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:a,sort:l,facetby:[],as:u})}static makeFromEncoding(t,n){let r=n.stack,{encoding:i}=n;if(!r)return null;let{groupbyChannels:o,fieldChannel:a,offset:s,impute:c}=r,l=o.map(p=>{let h=i[p];return ui(h)}).filter(p=>!!p),u=kTe(n),f=n.encoding.order,d;if(F(f)||Y(f))d=zb(f);else{let p=Jb(f)?f.sort:a==="y"?"descending":"ascending";d=u.reduce((h,m)=>(h.field.push(m),h.order.push(p),h),{field:[],order:[]})}return new e(t,{dimensionFieldDefs:l,stackField:n.vgField(a),facetby:[],stackby:u,sort:d,offset:s,impute:c,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){let t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${be(this._stack)}`}getGroupbyFields(){let{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[K(i,{binSuffix:"mid"})]:[K(i,{}),K(i,{binSuffix:"end"})]:[K(i)]).flat():r??[]}assemble(){let t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:a,offset:s,impute:c,as:l}=this._stack;if(c)for(let u of r){let{bandPosition:f=.5,bin:d}=u;if(d){let p=K(u,{expr:"datum"}),h=K(u,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${p}+${1-f}*${h}`,as:K(u,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:K(u,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:l,offset:s}),t}};var Kc=class e extends Ae{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ki(this.transform.groupby.concat(t),n=>n)}dependentFields(){let t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??K(t)}hash(){return`WindowTransform ${be(this.transform)}`}assemble(){let t=[],n=[],r=[],i=[];for(let f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);let o=this.transform.frame,a=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>Df(f)))return x({type:"joinaggregate",as:r,ops:n,fields:t},a!==void 0?{groupby:a}:{});let s=[],c=[];if(this.transform.sort!==void 0)for(let f of this.transform.sort)s.push(f.field),c.push(f.order??"ascending");let l={field:s,order:c},u=this.transform.ignorePeers;return x(x(x({type:"window",params:i,as:r,ops:n,fields:t,sort:l},u!==void 0?{ignorePeers:u}:{}),a!==void 0?{groupby:a}:{}),o!==void 0?{frame:o}:{})}};function ITe(e){function t(n){if(!(n instanceof h2)){let r=n.clone();if(r instanceof Hn){let i=Rh+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Ho||r instanceof Es||r instanceof Kc||r instanceof ga)&&r.addDimensions(e.fields);for(let i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function sw(e){if(e instanceof h2)if(e.numChildren()===1&&!(e.children[0]instanceof Hn)){let t=e.children[0];(t instanceof Ho||t instanceof Es||t instanceof Kc||t instanceof ga)&&t.addDimensions(e.fields),t.swapWithParent(),sw(e)}else{let t=e.model.component.data.main;c2e(t);let n=ITe(e),r=e.children.map(n).flat();for(let i of r)i.parent=t}else e.children.map(sw)}function c2e(e){if(e instanceof Hn&&e.type===bt.Main&&e.numChildren()===1){let t=e.children[0];t instanceof h2||(t.swapWithParent(),c2e(e))}}var Rh="scale_",cw=5;function oR(e){for(let t of e){for(let n of t.children)if(n.parent!==t)return!1;if(!oR(t.children))return!1}return!0}function va(e,t){let n=!1;for(let r of t)n=e.optimize(r)||n;return n}function l2e(e,t,n){let r=e.sources,i=!1;return i=va(new JM,r)||i,i=va(new KM(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=va(new nw,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=va(new ew,r)||i,i=va(new ow(t),r)||i,i=va(new ZM,r)||i,i=va(new tw,r)||i,i=va(new iw,r)||i,i=va(new rw,r)||i,i=va(new QM,r)||i,i=va(new aw,r)||i),e.sources=r,i}function u2e(e,t){oR(e.sources);let n=0,r=0;for(let i=0;i<cw&&l2e(e,t,!0);i++)n++;e.sources.map(sw);for(let i=0;i<cw&&l2e(e,t,!1);i++)r++;oR(e.sources),Math.max(n,r)===cw&&U(`Maximum optimization runs(${cw}) reached.`)}var Xn=class e{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new e(()=>t(n))}};function lR(e){Mt(e)?FTe(e):RTe(e)}function FTe(e){let t=e.component.scales;for(let n of O(t)){let r=PTe(e,n);if(t[n].setWithExplicit("domains",r),BTe(e,n),e.component.data.isFaceted){let o=e;for(;!$r(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(let s of r.value)aa(s)&&(s.data=Rh+s.data.replace(Rh,""))}}}function RTe(e){for(let n of e.children)lR(n);let t=e.component.scales;for(let n of O(t)){let r,i=null;for(let o of e.children){let a=o.component.scales[n];if(a){r===void 0?r=a.getWithExplicit("domains"):r=X1(r,a.getWithExplicit("domains"),"domains","scale",cR);let s=a.get("selectionExtent");i&&s&&i.param!==s.param&&U(P.NEEDS_SAME_SELECTION),i=s}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function OTe(e,t,n,r){if(e==="unaggregated"){let{valid:i,reason:o}=f2e(t,n);if(!i){U(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){let{valid:i}=f2e(t,n);if(i)return"unaggregated"}return e}function PTe(e,t){let n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=OTe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=k(x({},e.specifiedScales[t]),{domain:i})),t==="x"&&Ft(r.x2)?Ft(r.x)?X1(T4(n,i,e,"x"),T4(n,i,e,"x2"),"domain","scale",cR):T4(n,i,e,"x2"):t==="y"&&Ft(r.y2)?Ft(r.y)?X1(T4(n,i,e,"y"),T4(n,i,e,"y2"),"domain","scale",cR):T4(n,i,e,"y2"):T4(n,i,e,t)}function $Te(e,t,n){return e.map(r=>({signal:`{data: ${w0(r,{timeUnit:n,type:t})}}`}))}function aR(e,t,n){let r=sn(n)?.unit;return t==="temporal"||r?$Te(e,t,r):[e]}function T4(e,t,n,r){let{encoding:i,markDef:o,mark:a,config:s,stack:c}=n,l=Ft(i[r]),{type:u}=l,f=l.timeUnit;if(sie(t)){let h=T4(e,void 0,n,r),m=aR(t.unionWith,u,f);return u2([...m,...h.value])}else{if(ae(t))return u2([t]);if(t&&t!=="unaggregated"&&!eF(t))return u2(aR(t,u,f))}if(c&&r===c.fieldChannel){if(c.offset==="normalize")return Ui([[0,1]]);let h=n.requestDataName(bt.Main);return Ui([{data:h,field:n.vgField(r,{suffix:"start"})},{data:h,field:n.vgField(r,{suffix:"end"})}])}let d=Fr(r)&&Y(l)?UTe(n,r,e):void 0;if($i(l)){let h=aR([l.datum],u,f);return Ui(h)}let p=l;if(t==="unaggregated"){let h=n.requestDataName(bt.Main),{field:m}=l;return Ui([{data:h,field:K({field:m,aggregate:"min"})},{data:h,field:K({field:m,aggregate:"max"})}])}else if(et(p.bin)){if(Pt(e))return e==="bin-ordinal"?Ui([]):Ui([{data:xf(d)?n.requestDataName(bt.Main):n.requestDataName(bt.Raw),field:n.vgField(r,gs(p,r)?{binSuffix:"range"}:{}),sort:d===!0||!ne(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{let{bin:h}=p;if(et(h)){let m=s8(n,p.field,h);return Ui([new Xn(()=>{let g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Ui([{data:n.requestDataName(bt.Main),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Ne(["time","utc"],e)){let h=i[Ir(r)];if(Zb(p,h,o,s)){let m=n.requestDataName(bt.Main),g=W1({fieldDef:p,fieldDef2:h,markDef:o,config:s}),v=Fc(a)&&g!==.5&&Ct(r);return Ui([{data:m,field:n.vgField(r,v?{suffix:V0}:{})},{data:m,field:n.vgField(r,{suffix:v?N0:"end"})}])}}return d?Ui([{data:xf(d)?n.requestDataName(bt.Main):n.requestDataName(bt.Raw),field:n.vgField(r),sort:d}]):Ui([{data:n.requestDataName(bt.Main),field:n.vgField(r)}])}function sR(e,t){let{op:n,field:r,order:i}=e;return x(x({op:n??(t?"sum":S4)},r?{field:sr(r)}:{}),i?{order:i}:{})}function BTe(e,t){let n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t)?.bin,o=eF(r)&&r,a=ia(i)&&zf(i.extent)&&i.extent;(o||a)&&n.set("selectionExtent",o??a,!0)}function UTe(e,t,n){if(!Pt(n))return;let r=e.fieldDef(t),i=r.sort;if(Yb(i))return{op:"min",field:ws(r,t),order:"ascending"};let{stack:o}=e,a=o?new Set([...o.groupbyFields,...o.stackBy.map(s=>s.fieldDef.field)]):void 0;if(Pr(i)){let s=o&&!a.has(i.field);return sR(i,s)}else if(Wb(i)){let{encoding:s,order:c}=i,l=e.fieldDef(s),{aggregate:u,field:f}=l,d=o&&!a.has(f);if(So(u)||a2(u))return sR({field:K(l),order:c},d);if(Df(u)||!u)return sR({op:u,field:f,order:c},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ne(["ascending",void 0],i))return!0}}function f2e(e,t){let{aggregate:n,type:r}=e;return n?Q(n)&&!zre.has(n)?{valid:!1,reason:P.unaggregateDomainWithNonSharedDomainOp(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:P.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:P.unaggregateDomainHasNoEffectForRawField(e)}}function cR(e,t,n,r){return e.explicit&&t.explicit&&U(P.mergeConflictingDomainProperty(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function jTe(e){let t=ki(e.map(a=>{if(aa(a)){let s=a,{sort:c}=s;return ie(s,["sort"])}return a}),be),n=ki(e.map(a=>{if(aa(a)){let s=a.sort;return s!==void 0&&!xf(s)&&("op"in s&&s.op==="count"&&delete s.field,s.order==="ascending"&&delete s.order),s}}).filter(a=>a!==void 0),be);if(t.length===0)return;if(t.length===1){let a=e[0];if(aa(a)&&n.length>0){let s=n[0];if(n.length>1){U(P.MORE_THAN_ONE_SORT);let c=n.filter(l=>ne(l)&&"op"in l&&l.op!=="min");n.every(l=>ne(l)&&"op"in l)&&c.length===1?s=c[0]:s=!0}else if(ne(s)&&"field"in s){let c=s.field;a.field===c&&(s=s.order?{order:s.order}:!0)}return k(x({},a),{sort:s})}return a}let r=ki(n.map(a=>xf(a)||!("op"in a)||Q(a.op)&&a.op in Sre?a:(U(P.domainSortDropped(a)),!0)),be),i;r.length===1?i=r[0]:r.length>1&&(U(P.MORE_THAN_ONE_SORT),i=!0);let o=ki(e.map(a=>aa(a)?a.data:null),a=>a);return o.length===1&&o[0]!==null?x({data:o[0],fields:t.map(s=>s.field)},i?{sort:i}:{}):x({fields:t},i?{sort:i}:{})}function c8(e){if(aa(e)&&Q(e.field))return e.field;if(Hre(e)){let t;for(let n of e.fields)if(aa(n)&&Q(n.field)){if(!t)t=n.field;else if(t!==n.field)return U(P.FACETED_INDEPENDENT_DIFFERENT_SOURCES),t}return U(P.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),t}else if(Lre(e)){U(P.FACETED_INDEPENDENT_SAME_SOURCE);let t=e.fields[0];return Q(t)?t:void 0}}function N4(e,t){let r=e.component.scales[t].get("domains").map(i=>(aa(i)&&(i.data=e.lookupDataSource(i.data)),i));return jTe(r)}function uR(e){return d2(e)||a8(e)?e.children.reduce((t,n)=>t.concat(uR(n)),d2e(e)):d2e(e)}function d2e(e){return O(e.component.scales).reduce((t,n)=>{let r=e.component.scales[n];if(r.merged)return t;let i=r.combine(),m=i,{name:o,type:a,selectionExtent:s,domains:c,range:l,reverse:u}=m,f=ie(m,["name","type","selectionExtent","domains","range","reverse"]),d=qTe(i.range,o,n,e),p=N4(e,n),h=s?roe(e,s,r,p):null;return t.push(x(x(k(x(x({name:o,type:a},p?{domain:p}:{}),h?{domainRaw:h}:{}),{range:d}),u!==void 0?{reverse:u}:{}),f)),t},[])}function qTe(e,t,n,r){if(Ct(n)){if(Oi(e))return{step:{signal:`${t}_step`}}}else if(ne(e)&&aa(e))return k(x({},e),{data:r.lookupDataSource(e.data)});return e}var Oh=class extends Bi{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:us(this.get("domains"),t=>F(t)&&t.length===2&&Oe(t[0])&&t[0]<=0&&Oe(t[1])&&t[1]>=0)}};var GTe=["range","scheme"];function g2e(e){let t=e.component.scales;for(let n of M4){let r=t[n];if(!r)continue;let i=WTe(n,e);r.setWithExplicit("range",i)}}function p2e(e,t){let n=e.fieldDef(t);if(n?.bin){let{bin:r,field:i}=n,o=Dn(t),a=e.getName(o);if(ne(r)&&r.binned&&r.step!==void 0)return new Xn(()=>{let s=e.scaleName(t),c=`(domain("${s}")[1] - domain("${s}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${c})`});if(et(r)){let s=s8(e,i,r);return new Xn(()=>{let c=e.getSignalName(s),l=`(${c}.stop - ${c}.start) / ${c}.step`;return`${e.getSignalName(a)} / (${l})`})}}}function WTe(e,t){let n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(let f of GTe)if(n[f]!==void 0){let d=fh(o,f),p=Pb(e,f);if(!d)U(P.scalePropertyNotWorkWithScaleType(o,f,e));else if(p)U(p);else switch(f){case"range":{let h=n.range;if(F(h)){if(Ct(e))return u2(h.map(m=>{if(m==="width"||m==="height"){let g=t.getName(m),v=t.getSignalName.bind(t);return Xn.fromName(v,g)}return m}))}else if(ne(h))return u2({data:t.requestDataName(bt.Main),field:h.field,sort:{op:"min",field:t.vgField(e)}});return u2(h)}case"scheme":return u2(YTe(n[f]))}}let a=e===xt||e==="xOffset"?"width":"height",s=r[a];if(Y1(s)){if(Ct(e))if(Pt(o)){let f=y2e(s,t,e);if(f)return u2({step:f})}else U(P.stepDropped(a));else if(Tc(e)){let f=e===i2?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){let h=x2e(s,o);if(h)return u2(h)}}}let{rangeMin:c,rangeMax:l}=n,u=XTe(e,t);return(c!==void 0||l!==void 0)&&fh(o,"rangeMin")&&F(u)&&u.length===2?u2([c??u[0],l??u[1]]):Ui(u)}function YTe(e){return aie(e)?x({scheme:e.name},On(e,["name"])):{scheme:e}}function v2e(e,t,n,{center:r}={}){let i=Dn(e),o=t.getName(i),a=t.getSignalName.bind(t);return e===on&&$n(n)?r?[Xn.fromName(s=>`${a(s)}/2`,o),Xn.fromName(s=>`-${a(s)}/2`,o)]:[Xn.fromName(a,o),0]:r?[Xn.fromName(s=>`-${a(s)}/2`,o),Xn.fromName(s=>`${a(s)}/2`,o)]:[0,Xn.fromName(a,o)]}function XTe(e,t){let{size:n,config:r,mark:i,encoding:o}=t,{type:a}=Ft(o[e]),c=t.getScaleComponent(e).get("type"),{domain:l,domainMid:u}=t.specifiedScales[e];switch(e){case xt:case on:{if(Ne(["point","band"],c)){let f=C2e(e,n,r.view);if(Y1(f))return{step:y2e(f,t,e)}}return v2e(e,t,c)}case i2:case fs:return QTe(e,t,c);case q1:{let f=t.component.scales[e].get("zero"),d=b2e(i,f,r),p=JTe(i,n,t,r);return Ic(c)?ZTe(d,p,KTe(c,r,l,e)):[d,p]}case oi:return[0,Math.PI*2];case ra:return[0,360];case Ti:return[0,new Xn(()=>{let f=t.getSignalName("width"),d=t.getSignalName("height");return`min(${f},${d})/2`})];case bo:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Mo:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case En:return"symbol";case Pn:case Fi:case Ri:return c==="ordinal"?a==="nominal"?"category":"ordinal":u!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case m1:case xo:case Co:return[r.scale.minOpacity,r.scale.maxOpacity]}}function y2e(e,t,n){let{encoding:r}=t,i=t.getScaleComponent(n),o=Ef(n),a=r[o];if(DF({step:e,offsetIsDiscrete:ke(a)&&Ob(a.type)})==="offset"&&hF(r,o)){let c=t.getScaleComponent(o),u=`domain('${t.scaleName(o)}').length`;if(c.get("type")==="band"){let d=c.get("paddingInner")??c.get("padding")??0,p=c.get("paddingOuter")??c.get("padding")??0;u=`bandspace(${u}, ${d}, ${p})`}let f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${u} / (1-${_re(f)})`}}else return e.step}function x2e(e,t){if(DF({step:e,offsetIsDiscrete:Pt(t)})==="offset")return{step:e.step}}function QTe(e,t,n){let r=e===i2?"x":"y",i=t.getScaleComponent(r);if(!i)return v2e(r,t,n,{center:!0});let o=i.get("type"),a=t.scaleName(r),{markDef:s,config:c}=t;if(o==="band"){let l=C2e(r,t.size,t.config.view);if(Y1(l)){let u=x2e(l,n);if(u)return u}return[0,{signal:`bandwidth('${a}')`}]}else{let l=t.encoding[r];if(Y(l)&&l.timeUnit){let u=Ab(l.timeUnit,h=>`scale('${a}', ${h})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=W1({fieldDef:l,markDef:s,config:c})-.5,p=d!==0?` + ${d}`:"";if(f){let h=ae(f)?`${f.signal}/2`+p:`${f/2+d}`,m=ae(f)?`(1 - ${f.signal}/2)`+p:`${1-f/2+d}`;return[{signal:`${h} * (${u})`},{signal:`${m} * (${u})`}]}return[0,{signal:u}]}return DI(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function C2e(e,t,n){let r=e===xt?"width":"height",i=t[r];return i||jf(n,r)}function KTe(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&F(n)?n.length+1:(U(P.domainRequiredForThresholdScale(r)),3)}}function ZTe(e,t,n){let r=()=>{let i=g1(t),o=g1(e),a=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${a}, ${a})`};return ae(t)?new Xn(r):{signal:r()}}function b2e(e,t,n){if(t)return ae(t)?{signal:`${t.signal} ? 0 : ${b2e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(P.incompatibleChannel("size",e))}var h2e=.95;function JTe(e,t,n,r){let i={x:p2e(n,"x"),y:p2e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;let o=m2e(t,i,r.view);return Oe(o)?o-1:new Xn(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;let o=m2e(t,i,r.view);return Oe(o)?Math.pow(h2e*o,2):new Xn(()=>`pow(${h2e} * ${o.signal}, 2)`)}}throw new Error(P.incompatibleChannel("size",e))}function m2e(e,t,n){let r=Y1(e.width)?e.width.step:L0(n,"width"),i=Y1(e.height)?e.height.step:L0(n,"height");return t.x||t.y?new Xn(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function fR(e,t){Mt(e)?eIe(e,t):w2e(e,t)}function eIe(e,t){let n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(let s of O(n)){let c=a[s],l=n[s],u=e.getScaleComponent(s),f=Ft(i[s]),d=c[t],p=u.get("type"),h=u.get("padding"),m=u.get("paddingInner"),g=fh(p,t),v=Pb(s,t);if(d!==void 0&&(g?v&&U(v):U(P.scalePropertyNotWorkWithScaleType(p,t,s))),g&&v===void 0)if(d!==void 0){let y=f.timeUnit,C=f.type;switch(t){case"domainMax":case"domainMin":s2(c[t])||C==="temporal"||y?l.set(t,{signal:w0(c[t],{type:C,timeUnit:y})},!0):l.set(t,c[t],!0);break;default:l.copyKeyFromObject(t,c)}}else{let y=t in M2e?M2e[t]({model:e,channel:s,fieldOrDatumDef:f,scaleType:p,scalePadding:h,scalePaddingInner:m,domain:c.domain,domainMin:c.domainMin,domainMax:c.domainMax,markDef:o,config:r,hasNestedOffsetScale:rM(i,s),hasSecondaryRangeChannel:!!i[Ir(s)]}):r.scale[t];y!==void 0&&l.set(t,y,!1)}}}var M2e={bins:({model:e,fieldOrDatumDef:t})=>Y(t)?tIe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>nIe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>rIe(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>iIe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>oIe(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>aIe(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{let i=Y(e)?e.sort:void 0;return sIe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:a})=>cIe(e,t,n,r,i,o.scale,a)};function dR(e){Mt(e)?g2e(e):w2e(e,"range")}function w2e(e,t){let n=e.component.scales;for(let r of e.children)t==="range"?dR(r):fR(r,t);for(let r of O(n)){let i;for(let o of e.children){let a=o.component.scales[r];if(a){let s=a.getWithExplicit(t);i=X1(i,s,t,"scale",DM((c,l)=>{switch(t){case"range":return c.step&&l.step?c.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function tIe(e,t){let n=t.bin;if(et(n)){let r=s8(e,t.field,n);return new Xn(()=>e.getSignalName(r))}else if(an(n)&&ia(n)&&n.step!==void 0)return{step:n.step}}function nIe(e,t){if(Ne([Pn,Fi,Ri],e)&&t!=="nominal")return"hcl"}function rIe(e,t,n,r,i,o){if(!(ui(o)?.bin||F(n)||i!=null||r!=null||Ne([Or.TIME,Or.UTC],e)))return Ct(t)?!0:void 0}function iIe(e,t,n,r,i,o){if(Ct(e)){if(G1(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;let{type:a,orient:s}=i;if(a==="bar"&&!(Y(r)&&(r.bin||r.timeUnit))&&(s==="vertical"&&e==="x"||s==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Or.POINT)return n.pointPadding}}function oIe(e,t,n,r,i,o=!1){if(e===void 0){if(Ct(t)){let{bandPaddingInner:a,barBandPaddingInner:s,rectBandPaddingInner:c,bandWithNestedOffsetPaddingInner:l}=i;return o?l:ot(a,n==="bar"?s:c)}else if(Tc(t)&&r===Or.BAND)return i.offsetBandPaddingInner}}function aIe(e,t,n,r,i,o=!1){if(e===void 0){if(Ct(t)){let{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:s}=i;if(o)return s;if(n===Or.BAND)return ot(a,ae(r)?{signal:`${r.signal}/2`}:r/2)}else if(Tc(t)){if(n===Or.POINT)return .5;if(n===Or.BAND)return i.offsetBandPaddingOuter}}}function sIe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return $n(e)&&t==="descending"?ae(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if($n(e)&&t==="descending")return!0}function cIe(e,t,n,r,i,o,a){if(!!n&&n!=="unaggregated"&&$n(i)){if(F(n)){let c=n[0],l=n[n.length-1];if(Oe(c)&&c<=0&&Oe(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Ic(i))return!0;if(!(Y(t)&&t.bin)&&Ne([...Cr,...gre],e)){let{orient:c,type:l}=r;return Ne(["bar","area","line","trail"],l)&&(c==="horizontal"&&e==="y"||c==="vertical"&&e==="x")?!1:Ne(["bar","area"],l)&&!a?!0:o?.zero}return!1}function S2e(e,t,n,r,i=!1){let o=lIe(t,n,r,i),{type:a}=e;return Fr(t)?a!==void 0?die(t,a)?Y(n)&&!fie(a,n.type)?(U(P.scaleTypeNotWorkWithFieldDef(a,o)),o):a:(U(P.scaleTypeNotWorkWithChannel(t,a,o)),o):o:null}function lIe(e,t,n,r){switch(t.type){case"nominal":case"ordinal":{if(kc(e)||bb(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&U(P.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(Ct(e)||Tc(e)){if(Ne(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Cb)return"band";let i=n[Dn(e)];return hs(i)||Oc(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return kc(e)?"time":bb(e)==="discrete"?(U(P.discreteChannelCannotEncode(e,"temporal")),"ordinal"):Y(t)&&t.timeUnit&&sn(t.timeUnit).utc?"utc":"time";case"quantitative":return kc(e)?Y(t)&&et(t.bin)?"bin-ordinal":"linear":bb(e)==="discrete"?(U(P.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(P.invalidFieldType(t.type))}function E2e(e,{ignoreRange:t}={}){D2e(e),lR(e);for(let n of uie)fR(e,n);t||dR(e)}function D2e(e){Mt(e)?e.component.scales=uIe(e):e.component.scales=dIe(e)}function uIe(e){let{encoding:t,mark:n,markDef:r}=e,i={};for(let o of M4){let a=Ft(t[o]);if(a&&n===Bb&&o===En&&a.type===la)continue;let s=a&&a.scale;if(a&&s!==null&&s!==!1){s??(s={});let c=rM(t,o),l=S2e(s,o,a,r,c);i[o]=new Oh(e.scaleName(`${o}`,!0),{value:l,explicit:s.type===l})}}return i}var fIe=DM((e,t)=>ZI(e)-ZI(t));function dIe(e){var t;let n=e.component.scales={},r={},i=e.component.resolve;for(let o of e.children){D2e(o);for(let a of O(o.component.scales))if((t=i.scale)[a]??(t[a]=qM(a,e)),i.scale[a]==="shared"){let s=r[a],c=o.component.scales[a].getWithExplicit("type");s?tie(s.value,c.value)?r[a]=X1(s,c,"type","scale",fIe):(i.scale[a]="independent",delete r[a]):r[a]=c}}for(let o of O(r)){let a=e.scaleName(o,!0),s=r[o];n[o]=new Oh(a,s);for(let c of e.children){let l=c.component.scales[o];l&&(c.renameScale(l.get("name"),a),l.merged=!0)}}return n}var Ph=class{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}};function Mt(e){return e?.type==="unit"}function $r(e){return e?.type==="facet"}function a8(e){return e?.type==="concat"}function d2(e){return e?.type==="layer"}var T0=class{constructor(t,n,r,i,o,a,s){this.type=n,this.parent=r,this.config=o,this.correctDataNames=c=>(c.from?.data&&(c.from.data=this.lookupDataSource(c.from.data)),c.from?.facet?.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c),this.parent=r,this.config=o,this.view=cr(s),this.name=t.name??i,this.title=oa(t.title)?{text:t.title}:t.title?cr(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Ph,this.projectionNameMap=r?r.projectionNameMap:new Ph,this.signalNameMap=r?r.signalNameMap:new Ph,this.data=t.data,this.description=t.description,this.transforms=q1e(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:l1e(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:$c(t)||r?.component.data.isFaceted&&t.data===void 0},layoutSize:new Bi,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:x({scale:{},axis:{},legend:{}},a?le(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){E2e(this)}parseProjection(){iR(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){nR(this)}assembleEncodeFromView(t){let o=t,{style:n}=o,r=ie(o,["style"]),i={};for(let a of O(r)){let s=r[a];s!==void 0&&(i[a]=tt(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=tt(this.description)),this.type==="unit"||this.type==="layer")?x({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n??{}):We(n)?void 0:n}assembleLayout(){if(!this.layout)return;let a=this.layout,{spacing:t}=a,n=ie(a,["spacing"]),{component:r,config:i}=this,o=Uoe(r.layoutHeaders,i);return x(x(x({padding:t},this.assembleDefaultLayout()),n),o?{titleBand:o}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){let{layoutHeaders:t}=this.component,n=[];for(let r of Tr)t[r].title&&n.push(Ooe(this,r));for(let r of n8)n=n.concat(Boe(this,r));return n}assembleAxes(){return koe(this.component.axes,this.config)}assembleLegends(){return YM(this)}assembleProjections(){return Zoe(this)}assembleTitle(){let i=this.title??{},{encoding:t}=i,n=ie(i,["encoding"]),r=x(x(x({},Sb(this.config.title).nonMarkTitleProperties),n),t?{encode:{update:t}}:{});if(r.text)return Ne(["unit","layer"],this.type)?Ne(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),We(r)?void 0:r}assembleGroup(t=[]){let n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);let r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());let i=!this.parent||$r(this.parent)?uR(this):[];i.length>0&&(n.scales=i);let o=this.assembleAxes();o.length>0&&(n.axes=o);let a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return pt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(bt[t].toLowerCase())}requestDataName(t){let n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if($r(this.parent)){let n=UM(t),r=b4(n),i=this.component.scales[r];if(i&&!i.merged){let o=i.get("type"),a=i.get("range");if(Pt(o)&&Oi(a)){let s=i.get("name"),c=N4(this,r),l=c8(c);if(l){let u=K({aggregate:"distinct",field:l},{expr:"datum"});return{signal:ZF(s,i,u)}}else return U(P.unknownField(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){let n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(yb(t)&&Fr(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");let n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(P.selectionNotFound(n));return r}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}},f8=class extends T0{vgField(t,n={}){let r=this.fieldDef(t);if(r)return K(r,n)}reduceFieldDef(t,n){return qie(this.getMapping(),(r,i,o)=>{let a=ui(i);return a?t(r,a,o):r},n)}forEachFieldDef(t,n){bh(this.getMapping(),(r,i)=>{let o=ui(r);o&&t(o,i)},n)}};var d8=class e extends Ae{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${be(this.transform)}`}assemble(){let i=this.transform,{density:t}=i,n=ie(i,["density"]),r=x({type:"kde",field:t},n);return this.transform.groupby&&(r.resolve="shared"),r}};var p8=class e extends Ae{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${be(this.transform)}`}assemble(){let{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}};var h8=class e extends Ae{clone(){return new e(null,x({},this.filter))}constructor(t,n){super(t),this.filter=n}static make(t,n){let{config:r,mark:i,markDef:o}=n;if(Be("invalid",o,r)!=="filter")return null;let s=n.reduceFieldDef((c,l,u)=>{let f=Fr(u)&&n.getScaleComponent(u);if(f){let d=f.get("type");$n(d)&&l.aggregate!=="count"&&!Pi(i)&&(c[l.field]=l)}return c},{});return O(s).length?new e(t,s):null}dependentFields(){return new Set(O(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${be(this.filter)}`}assemble(){let t=O(this.filter).reduce((n,r)=>{let i=this.filter[r],o=K(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):i.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}};var m8=class e extends Ae{clone(){return new e(this.parent,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,a)=>i[a]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${be(this.transform)}`}assemble(){let{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}};var g8=class e extends Ae{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${be(this.transform)}`}assemble(){let{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}};var v8=class e extends Ae{clone(){return new e(null,le(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(let i of[[si,ai],[ci,Ii]]){let o=i.map(a=>{let s=Ft(n.encoding[a]);return Y(s)?s.field:$i(s)?{expr:`${s.datum}`}:lr(s)?{expr:`${s.value}`}:void 0});(o[0]||o[1])&&(t=new e(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(En)){let i=n.typedFieldDef(En);i.type===la&&(t=new e(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){let t=(this.fields??[]).filter(Q);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${be(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],k(x(x({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}};var y8=class e extends Ae{clone(){return new e(null,this.projection,le(this.fields),le(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(let r of[[si,ai],[ci,Ii]]){let i=r.map(a=>{let s=Ft(n.encoding[a]);return Y(s)?s.field:$i(s)?{expr:`${s.datum}`}:lr(s)?{expr:`${s.value}`}:void 0}),o=r[0]===ci?"2":"";(i[0]||i[1])&&(t=new e(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Q))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${be(this.fields)} ${be(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}};var I0=class e extends Ae{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){let{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new e(t,n)}static makeFromEncoding(t,n){let r=n.encoding,i=r.x,o=r.y;if(Y(i)&&Y(o)){let a=i.impute?i:o.impute?o:void 0;if(a===void 0)return;let s=i.impute?o:o.impute?i:void 0,{method:c,value:l,frame:u,keyvals:f}=a.impute,d=oM(n.mark,r);return new e(t,x(x(x(x(x({impute:a.field,key:s.field},c?{method:c}:{}),l!==void 0?{value:l}:{}),u?{frame:u}:{}),f!==void 0?{keyvals:f}:{}),d.length?{groupby:d}:{}))}return null}hash(){return`Impute ${be(this.transform)}`}assemble(){let{impute:t,key:n,keyvals:r,method:i,groupby:o,value:a,frame:s=[null,null]}=this.transform,c=k(x(k(x({type:"impute",field:t,key:n},r?{keyvals:D1e(r)?this.processSequence(r):r}:{}),{method:"value"}),o?{groupby:o}:{}),{value:!i||i==="value"?a:null});if(i&&i!=="value"){let l=x({type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:s,ignorePeers:!1},o?{groupby:o}:{}),u={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[c,l,u]}else return[c]}};var x8=class e extends Ae{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${be(this.transform)}`}assemble(){let o=this.transform,{loess:t,on:n}=o,r=ie(o,["loess","on"]);return x({type:"loess",x:n,y:t},r)}};var C8=class e extends Ae{clone(){return new e(null,le(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){let o=n.component.data.sources,{from:a}=r,s=null;if(z1e(a)){let c=pR(a.data,o);c||(c=new Z1(a.data),o.push(c));let l=n.getName(`lookup_${i}`);s=new Hn(c,l,bt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=s}else if(H1e(a)){let c=a.param;r=x({as:c},r);let l;try{l=n.getSelectionComponent(pt(c),c)}catch{throw new Error(P.cannotLookupVariableParameter(c))}if(s=l.materialized,!s)throw new Error(P.noSameUnitLookup(c))}return new e(t,r,s.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?te(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${be({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=x({values:this.transform.from.fields},this.transform.as?{as:te(this.transform.as)}:{});else{let n=this.transform.as;Q(n)||(U(P.NO_FIELDS_NEEDS_AS),n="_lookup"),t={as:[n]}}return x(x({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}};var b8=class e extends Ae{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${be(this.transform)}`}assemble(){let i=this.transform,{quantile:t}=i,n=ie(i,["quantile"]);return x({type:"quantile",field:t},n)}};var M8=class e extends Ae{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=le(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${be(this.transform)}`}assemble(){let o=this.transform,{regression:t,on:n}=o,r=ie(o,["regression","on"]);return x({type:"regression",x:n,y:t},r)}};var w8=class e extends Ae{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ki((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${be(this.transform)}`}assemble(){let{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return x(x(x({type:"pivot",field:t,value:n},i!==void 0?{limit:i}:{}),o!==void 0?{op:o}:{}),r!==void 0?{groupby:r}:{})}};var S8=class e extends Ae{clone(){return new e(null,le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${be(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}};function z2e(e){let t=0;function n(r,i){if(r instanceof Z1&&!r.isGenerator&&!qc(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Br&&(r.parent instanceof Z1&&!i.source?(i.format=k(x({},i.format??{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof h2){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof _4||r instanceof k4||r instanceof h8||r instanceof Ms||r instanceof k0||r instanceof y8||r instanceof Ho||r instanceof C8||r instanceof Kc||r instanceof ga||r instanceof g8||r instanceof m8||r instanceof d8||r instanceof x8||r instanceof b8||r instanceof M8||r instanceof ma||r instanceof S8||r instanceof w8||r instanceof p8)&&i.transform.push(r.assemble()),(r instanceof ha||r instanceof f2||r instanceof I0||r instanceof Es||r instanceof v8)&&i.transform.push(...r.assemble()),r instanceof Hn&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Hn?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Hn&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(let a of r.children)n(a,{name:null,source:o,transform:[]});break}}}return n}function H2e(e){let t=[],n=z2e(t);for(let r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function L2e(e,t){let n=[],r=z2e(n),i=0;for(let a of e.sources){a.hasName()||(a.dataName=`source_${i++}`);let s=a.assemble();r(a,s)}for(let a of n)a.transform.length===0&&delete a.transform;let o=0;for(let[a,s]of n.entries())(s.transform??[]).length===0&&!s.source&&n.splice(o++,0,n.splice(a,1)[0]);for(let a of n)for(let s of a.transform??[])s.type==="lookup"&&(s.from=e.outputNodes[s.from].getSource());for(let a of n)a.name in t&&(a.values=t[a.name]);return n}function pIe(e){return e==="top"||e==="left"||ae(e)?"header":"footer"}function V2e(e){for(let t of Tr)hIe(e,t);A2e(e,"x"),A2e(e,"y")}function hIe(e,t){let{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){let a=n[t],s=Qc("title",null,r,t),c=xs(a,r,{allowDisabling:!0,includeDefault:s===void 0||!!s});i.component.layoutHeaders[t].title&&(c=F(c)?c.join(", "):c,c+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);let l=Qc("labelOrient",a.header,r,t),u=a.header!==null?ot(a.header?.labels,r.header.labels,!0):!1,f=Ne(["bottom","right"],l)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?c:null,facetFieldDef:a,[f]:t==="facet"?[]:[N2e(e,t,u)]}}}function N2e(e,t,n){let r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function A2e(e,t){let{child:n}=e;if(n.component.axes[t]){let{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=o8(i,t),i.axis[t]==="shared"){let o=t==="x"?"column":"row",a=r[o];for(let s of n.component.axes[t]){let c=pIe(s.get("orient"));a[c]??(a[c]=[N2e(e,o,!1)]);let l=e8(s,"main",e.config,{header:!0});l&&a[c][0].axes.push(l),s.mainExtracted=!0}}}}function _2e(e){uw(e),lw(e,"width"),lw(e,"height")}function k2e(e){uw(e);let t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";lw(e,t),lw(e,n)}function uw(e){for(let t of e.children)t.parseLayoutSize()}function lw(e,t){let n=UM(t),r=b4(n),i=e.component.resolve,o=e.component.layoutSize,a;for(let s of e.children){let c=s.component.layoutSize.getWithExplicit(n),l=i.scale[r]??qM(r,e);if(l==="independent"&&c.value==="step"){a=void 0;break}if(a){if(l==="independent"&&a.value!==c.value){a=void 0;break}a=X1(a,c,n,"")}else a=c}if(a){for(let s of e.children)e.renameSignal(s.getName(n),e.getName(t)),s.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function T2e(e){let{size:t,component:n}=e;for(let r of Cr){let i=Dn(r);if(t[i]){let o=t[i];n.layoutSize.set(i,Y1(o)?"step":o,!0)}else{let o=mIe(e,i);n.layoutSize.set(i,o,!1)}}}function mIe(e,t){let n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){let o=i.get("type"),a=i.get("range");if(Pt(o)){let s=jf(r.view,t);return Oi(a)||Y1(s)?"step":s}else return Dh(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return Dh(r.view,t);{let o=jf(r.view,t);return Y1(o)?o.step:o}}}function fw(e,t,n){return K(t,x({suffix:`by_${K(e)}`},n??{}))}var dw=class e extends f8{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=E8(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!ys(t))return{facet:this.initFacetFieldDef(t,"facet")};let n=O(t),r={};for(let i of n){if(![B1,U1].includes(i)){U(P.incompatibleChannel(i,"facet"));break}let o=t[i];if(o.field===void 0){U(P.emptyFieldDef(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){let r=Ch(t,n);return r.header?r.header=cr(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=I4(this),this.child.parseData()}parseLayoutSize(){uw(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),V2e(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){let t={};for(let n of Tr)for(let r of r8){let i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:a}=i;if(a){let s=Qc("titleOrient",a.header,this.config,n);if(["right","bottom"].includes(s)){let c=t8(n,s);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[c]="end"}}if(o?.[0]){let s=n==="row"?"height":"width",c=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(s)&&(t[c]??(t[c]={}),t[c][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){let{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0,i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),k(x(x({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof e))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof e?x(x({},this.channelHasField("column")?{encode:{update:{columns:{field:K(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){let t=[],n=[],r=[];if(this.child instanceof e){if(this.child.channelHasField("column")){let i=K(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(let i of Cr){let o=this.child.component.scales[i];if(o&&!o.merged){let a=o.get("type"),s=o.get("range");if(Pt(a)&&Oi(s)){let c=N4(this.child,i),l=c8(c);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):U(P.unknownField(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){let{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:a,as:s}=this.getCardinalityAggregateForChild(),c=[];for(let u of Tr){let f=this.facet[u];if(f){c.push(K(f));let{bin:d,sort:p}=f;if(et(d)&&c.push(K(f,{binSuffix:"end"})),Pr(p)){let{field:h,op:m=S4}=p,g=fw(f,p);r&&i?(o.push(g),a.push("max"),s.push(g)):(o.push(h),a.push(m),s.push(g))}else if(F(p)){let h=ws(f,u);o.push(h),a.push("max"),s.push(h)}}}let l=!!r&&!!i;return x({name:t,data:n,groupby:c},l||o.length>0?{aggregate:x(x({},l?{cross:l}:{}),o.length?{fields:o,ops:a,as:s}:{})}:{})}facetSortFields(t){let{facet:n}=this,r=n[t];return r?Pr(r.sort)?[fw(r,r.sort,{expr:"datum"})]:F(r.sort)?[ws(r,t,{expr:"datum"})]:[K(r,{expr:"datum"})]:[]}facetSortOrder(t){let{facet:n}=this,r=n[t];if(r){let{sort:i}=r;return[(Pr(i)?i.order:!F(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){let{facet:t,config:n}=this;if(t.facet)return $M(t.facet,"facet",n);let r={row:["top","bottom"],column:["left","right"]};for(let i of n8)if(t[i]){let o=Qc("labelOrient",t[i]?.header,n,i);if(r[i].includes(o))return $M(t[i],i,n)}}assembleMarks(){let{child:t}=this,n=this.component.data.facetRoot,r=H2e(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[x(x(x(k(x(x({name:this.getName("cell"),type:"group"},o?{title:o}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:Tr.map(c=>this.facetSortFields(c)).flat(),order:Tr.map(c=>this.facetSortOrder(c)).flat()}}),r.length>0?{data:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup(J1e(this,[])))]}getMapping(){return this.facet}};function I2e(e,t){let{row:n,column:r}=t;if(n&&r){let i=null;for(let o of[n,r])if(Pr(o.sort)){let{field:a,op:s=S4}=o.sort;e=i=new ga(e,{joinaggregate:[{op:s,field:a,as:fw(o,o.sort,{forAs:!0})}],groupby:[K(o)]})}return i}return null}function pR(e,t){for(let n of t){let r=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;let i=e.format?.mesh,o=r.format?.feature;if(i&&o)continue;let a=e.format?.feature;if((a||o)&&a!==o)continue;let s=r.format?.mesh;if(!((i||s)&&i!==s)){if(A0(e)&&A0(r)){if(kr(e.values,r.values))return n}else if(qc(e)&&qc(r)){if(e.url===r.url)return n}else if(HM(e)&&e.name===n.dataName)return n}}return null}function gIe(e,t){if(e.data||!e.parent){if(e.data===null){let r=new Z1({values:[]});return t.push(r),r}let n=pR(e.data,t);if(n)return fa(e.data)||(n.data.format=zI({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{let r=new Z1(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function vIe(e,t,n){let r=0;for(let i of t.transforms){let o,a;if(R1e(i))a=e=new k0(e,i),o="derived";else if(zh(i)){let s=i2e(i);a=e=Br.makeWithAncestors(e,{},s,n)??e,e=new Ms(e,t,i.filter)}else if(wM(i))a=e=ha.makeFromTransform(e,i,t),o="number";else if(P1e(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new Br(e,{[i.field]:o}),n.set(i.field,o,!1)),a=e=f2.makeFromTransform(e,i);else if($1e(i))a=e=Ho.makeFromTransform(e,i),o="number",_h(t)&&(e=new ma(e));else if(MM(i))a=e=C8.make(e,t,i,r++),o="derived";else if(T1e(i))a=e=new Kc(e,i),o="number";else if(I1e(i))a=e=new ga(e,i),o="number";else if(B1e(i))a=e=Es.makeFromTransform(e,i),o="derived";else if(U1e(i))a=e=new g8(e,i),o="derived";else if(j1e(i))a=e=new p8(e,i),o="derived";else if(F1e(i))a=e=new m8(e,i),o="derived";else if(L1e(i))a=e=new w8(e,i),o="derived";else if(k1e(i))e=new S8(e,i);else if(O1e(i))a=e=I0.makeFromTransform(e,i),o="derived";else if(A1e(i))a=e=new d8(e,i),o="derived";else if(V1e(i))a=e=new b8(e,i),o="derived";else if(N1e(i))a=e=new M8(e,i),o="derived";else if(_1e(i))a=e=new x8(e,i),o="derived";else{U(P.invalidTransformIgnored(i));continue}if(a&&o!==void 0)for(let s of a.producedFields()??[])n.set(s,o,!1)}return e}function I4(e){let t=gIe(e,e.component.data.sources),{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,a=!(i&&(fa(i)||qc(i)||A0(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new zM;fa(i)?(kF(i)?t=new k4(t,i.sequence):Hh(i)&&(t=new _4(t,i.graticule)),a.parseNothing=!0):i?.format?.parse===null&&(a.parseNothing=!0),t=Br.makeExplicit(t,e,a)??t,t=new ma(t);let s=e.parent&&d2(e.parent);(Mt(e)||$r(e))&&s&&(t=ha.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=vIe(t,e,a));let c=a2e(e),l=o2e(e);t=Br.makeWithAncestors(t,{},x(x({},c),l),a)??t,Mt(e)&&(t=v8.parseAll(t,e),t=y8.parseAll(t,e)),(Mt(e)||$r(e))&&(s||(t=ha.makeFromEncoding(t,e)??t),t=f2.makeFromEncoding(t,e)??t,t=k0.parseAllForSortIndex(t,e));let u=e.getDataName(bt.Raw),f=new Hn(t,u,bt.Raw,r);if(n[u]=f,t=f,Mt(e)){let m=Ho.makeFromEncoding(t,e);m&&(t=m,_h(e)&&(t=new ma(t))),t=I0.makeFromEncoding(t,e)??t,t=Es.makeFromEncoding(t,e)??t}Mt(e)&&(t=h8.make(t,e)??t);let d=e.getDataName(bt.Main),p=new Hn(t,d,bt.Main,r);n[d]=p,t=p,Mt(e)&&_oe(e,p);let h=null;if($r(e)){let m=e.getName("facet");t=I2e(t,e.facet)??t,h=new h2(t,e,m,p.getSource()),n[m]=h}return k(x({},e.component.data),{outputNodes:n,outputNodeRefCounts:r,raw:f,main:p,facetRoot:h,ancestorParse:a})}var pw=class extends T0{constructor(t,n,r,i){super(t,"concat",n,r,i,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&U(P.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(t).map((o,a)=>E8(o,this,this.getName(`concat_${a}`),void 0,i))}parseData(){this.component.data=I4(this);for(let t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(let t of this.children){t.parseSelections();for(let n of O(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(let t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(let t of this.children)t.parseAxesAndHeaders()}getChildren(t){return H4(t)?t.vconcat:Uf(t)?t.hconcat:t.concat}parseLayoutSize(){k2e(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){let t=i8(this);for(let n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{let n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return x(x(x(x({type:"group",name:t.getName("group")},n?{title:n}:{}),r?{style:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){let t=this.layout.columns;return k(x({},t!=null?{columns:t}:{}),{bounds:"full",align:"each"})}};function yIe(e){return e===!1||e===null}var xIe=k(x({disable:1,gridScale:1,scale:1},fF),{labelExpr:1,encode:1}),hR=O(xIe),hw=class e extends Bi{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new e(le(this.explicit),le(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!yIe(this.get(t))}hasOrientSignalRef(){return ae(this.explicit.orient)}};function F2e(e,t,n){let{encoding:r,config:i}=e,o=Ft(r[t])??Ft(r[Ir(t)]),a=e.axis(t)||{},{format:s,formatType:c}=a;if(vs(c))return x({text:Do({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:c,config:i})},n);if(s===void 0&&c===void 0&&i.customFormatTypes){if(Rc(o)==="quantitative"){if(Oc(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return x({text:Do({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i})},n);if(i.numberFormatType)return x({text:Do({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i})},n)}if(Rc(o)==="temporal"&&i.timeFormatType&&Y(o)&&!o.timeUnit)return x({text:Do({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i})},n)}return n}function R2e(e){return Cr.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[DIe(n,e)]),t),{})}var bIe={bottom:"top",top:"bottom",left:"right",right:"left"};function O2e(e){let{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(let i of e.children){i.parseAxesAndHeaders();for(let o of O(i.component.axes))n.axis[o]=o8(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=MIe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(let i of Cr){for(let o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(let a of o.component.axes[i]){let{value:s,explicit:c}=a.getWithExplicit("orient");if(!ae(s)){if(r[s]>0&&!c){let l=bIe[s];r[s]>r[l]&&a.set("orient",l,!1)}r[s]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(let[o,a]of(t[i]||[]).entries())o>0&&a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function MIe(e,t){if(e){if(e.length!==t.length)return;let n=e.length;for(let r=0;r<n;r++){let i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){let a=i.getWithExplicit("orient"),s=o.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;e[r]=wIe(i,o)}}}else return t.map(n=>n.clone());return e}function wIe(e,t){for(let n of hR){let r=X1(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return Hb(i,o);case"gridScale":return{explicit:i.explicit,value:ot(i.value,o.value)}}return Wf(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function SIe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(ae(n.labelAngle)?n.labelAngle:x4(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===KF(r,i))return!0}return e===n[t]}var EIe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function DIe(e,t){let n=t.axis(e),r=new hw,i=Ft(t.encoding[e]),{mark:o,config:a}=t,s=n?.orient||a[e==="x"?"axisX":"axisY"]?.orient||a.axis?.orient||Roe(e),c=t.getScaleComponent(e).get("type"),l=Ioe(e,c,s,t.config),u=n!==void 0?!n:kh("disable",a.style,n?.style,l).configValue;if(r.set("disable",u,n!==void 0),u)return r;n=n||{};let f=Foe(i,n,e,a.style,l),d=Gb(n.formatType,i,c),p=qb(i,i.type,n.format,n.formatType,a,!0),h={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:c,orient:s,labelAngle:f,format:p,formatType:d,mark:o,config:a};for(let v of hR){let y=v in YF?YF[v](h):dF(v)?n[v]:void 0,C=y!==void 0,b=SIe(y,v,n,t,e);if(C&&b)r.set(v,y,b);else{let{configValue:M=void 0,configFrom:S=void 0}=dF(v)&&v!=="values"?kh(v,a.style,n.style,l):{},w=M!==void 0;C&&!w?r.set(v,y,b):(S!=="vgAxisConfig"||EIe.has(v)&&w||Bc(M)||ae(M))&&r.set(v,M,!1)}}let m=n.encoding??{},g=nM.reduce((v,y)=>{if(!r.hasAxisPart(y))return v;let C=jM(m[y]??{},t),b=y==="labels"?F2e(t,e,C):C;return b!==void 0&&!We(b)&&(v[y]={update:b}),v},{});return We(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function P2e({encoding:e,size:t}){for(let n of Cr){let r=Dn(n);Y1(t[r])&&ua(e[n])&&(delete t[r],U(P.stepDropped(r)))}return t}var $2e={vgMark:"arc",encodeEntry:e=>x(x(x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Cn("x",e,{defaultPos:"mid"})),Cn("y",e,{defaultPos:"mid"})),K1(e,"radius")),K1(e,"theta"))};var B2e={vgMark:"area",encodeEntry:e=>x(x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),V4("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"})),V4("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"})),Zf(e))};var U2e={vgMark:"rect",encodeEntry:e=>x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),K1(e,"x")),K1(e,"y"))};var j2e={vgMark:"shape",encodeEntry:e=>x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{let{encoding:t}=e,n=t.shape;return[x({type:"geoshape",projection:e.projectionName()},n&&Y(n)&&n.type===la?{field:K(n,{expr:"datum"})}:{})]}};var q2e={vgMark:"image",encodeEntry:e=>x(x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),K1(e,"x")),K1(e,"y")),A4(e,"url"))};var G2e={vgMark:"line",encodeEntry:e=>x(x(x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Cn("x",e,{defaultPos:"mid"})),Cn("y",e,{defaultPos:"mid"})),qt("size",e,{vgChannel:"strokeWidth"})),Zf(e))},W2e={vgMark:"trail",encodeEntry:e=>x(x(x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Cn("x",e,{defaultPos:"mid"})),Cn("y",e,{defaultPos:"mid"})),qt("size",e)),Zf(e))};function mR(e,t){let{config:n}=e;return x(x(x(x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Cn("x",e,{defaultPos:"mid"})),Cn("y",e,{defaultPos:"mid"})),qt("size",e)),qt("angle",e)),zIe(e,n,t))}function zIe(e,t,n){return n?{shape:{value:n}}:qt("shape",e)}var Y2e={vgMark:"symbol",encodeEntry:e=>mR(e)},X2e={vgMark:"symbol",encodeEntry:e=>mR(e,"circle")},Q2e={vgMark:"symbol",encodeEntry:e=>mR(e,"square")};var K2e={vgMark:"rect",encodeEntry:e=>x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),K1(e,"x")),K1(e,"y"))};var Z2e={vgMark:"rule",encodeEntry:e=>{let{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:x(x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),V4("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),V4("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),qt("size",e,{vgChannel:"strokeWidth"}))}};var J2e={vgMark:"text",encodeEntry:e=>{let{config:t,encoding:n}=e;return x(x(x(x(x(x(x(x(x(x({},bn(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Cn("x",e,{defaultPos:"mid"})),Cn("y",e,{defaultPos:"mid"})),A4(e)),qt("size",e,{vgChannel:"fontSize"})),qt("angle",e)),kM("align",HIe(e.markDef,n,t))),kM("baseline",LIe(e.markDef,n,t))),Cn("radius",e,{defaultPos:null})),Cn("theta",e,{defaultPos:null}))}};function HIe(e,t,n){if(Be("align",e,n)===void 0)return"center"}function LIe(e,t,n){if(Be("baseline",e,n)===void 0)return"middle"}var eae={vgMark:"rect",encodeEntry:e=>{let{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",o=r==="horizontal"?"height":"width";return k(x(x(x(x({},bn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Cn("x",e,{defaultPos:"mid",vgChannel:"xc"})),Cn("y",e,{defaultPos:"mid",vgChannel:"yc"})),qt("size",e,{defaultValue:AIe(e),vgChannel:i})),{[o]:tt(Be("thickness",n,t))})}};function AIe(e){let{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",o=e.getScaleComponent(r==="horizontal"?"x":"y"),a=Be("size",n,t,{vgChannel:i})??t.tick.bandSize;if(a!==void 0)return a;{let s=o?o.get("range"):void 0;return s&&Oi(s)&&Oe(s.step)?s.step*3/4:L0(t.view,i)*3/4}}var mw={arc:$2e,area:B2e,bar:U2e,circle:X2e,geoshape:j2e,image:q2e,line:G2e,point:Y2e,rect:K2e,rule:Z2e,square:Q2e,text:J2e,tick:eae,trail:W2e};function rae(e){if(Ne([D0,S0,mie],e.mark)){let t=oM(e.mark,e.encoding);if(t.length>0)return VIe(e,t)}else if(e.mark===E0){let t=Eb.some(n=>Be(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return NIe(e)}return gR(e)}var tae="faceted_path_";function VIe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:tae+e.requestDataName(bt.Main),data:e.requestDataName(bt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:gR(e,{fromPrefix:tae})}]}var nae="stack_group_";function NIe(e){let[t]=gR(e,{fromPrefix:nae}),n=e.scaleName(e.stack.fieldChannel),r=(l={})=>e.vgField(e.stack.fieldChannel,l),i=(l,u)=>{let f=[r({prefix:"min",suffix:"start",expr:u}),r({prefix:"max",suffix:"start",expr:u}),r({prefix:"min",suffix:"end",expr:u}),r({prefix:"max",suffix:"end",expr:u})];return`${l}(${f.map(d=>`scale('${n}',${d})`).join(",")})`},o,a;e.stack.fieldChannel==="x"?(o=k(x({},Nc(t.encode.update,["y","yc","y2","height",...Eb])),{x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}}),a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update=k(x({},On(t.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(o=k(x({},Nc(t.encode.update,["x","xc","x2","width"])),{y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}}),a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update=k(x({},On(t.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(let l of Eb){let u=Eo(l,e.markDef,e.config);t.encode.update[l]?(o[l]=t.encode.update[l],delete t.encode.update[l]):u&&(o[l]=tt(u)),u&&(t.encode.update[l]={value:0})}let s=[];if(e.stack.groupbyChannels?.length>0)for(let l of e.stack.groupbyChannels){let u=e.fieldDef(l),f=K(u);f&&s.push(f),(u?.bin||u?.timeUnit)&&s.push(K(u,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((l,u)=>{if(t.encode.update[u])return k(x({},l),{[u]:t.encode.update[u]});{let f=Eo(u,e.markDef,e.config);return f!==void 0?k(x({},l),{[u]:tt(f)}):l}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(bt.Main),name:nae+e.requestDataName(bt.Main),groupby:s,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}function _Ie(e){let{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,a=t.order;if(!(!F(a)&&lr(a)&&fb(a.value)||!a&&fb(Be("order",i,o)))){if((F(a)||Y(a))&&!n)return zb(a,{expr:"datum"});if(Pi(r)){let s=i.orient==="horizontal"?"y":"x",c=t[s];if(Y(c)){let l=c.sort;if(F(l))return{field:K(c,{prefix:s,suffix:"sort_index",expr:"datum"})};if(Pr(l))return{field:K({aggregate:Pf(e.encoding)?l.op:void 0,field:l.field},{expr:"datum"})};if(Wb(l)){let u=e.fieldDef(l.encoding);return{field:K(u,{expr:"datum"}),order:l.order}}else return l===null?void 0:{field:K(c,{binSuffix:e.stack?.impute?"mid":void 0,expr:"datum"})}}return}}}function gR(e,t={fromPrefix:""}){let{mark:n,markDef:r,encoding:i,config:o}=e,a=ot(r.clip,kIe(e),TIe(e)),s=BI(r),c=i.key,l=_Ie(e),u=IIe(e),f=Be("aria",r,o),d=mw[n].postEncodingTransform?mw[n].postEncodingTransform(e):null;return[x(k(x(x(x(x(x(x({name:e.getName("marks"),type:mw[n].vgMark},a?{clip:!0}:{}),s?{style:s}:{}),c?{key:c.field}:{}),l?{sort:l}:{}),u||{}),f===!1?{aria:f}:{}),{from:{data:t.fromPrefix+e.requestDataName(bt.Main)},encode:{update:mw[n].encodeEntry(e)}}),d?{transform:d}:{})]}function kIe(e){let t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function TIe(e){let t=e.component.projection;return t&&!t.isFit?!0:void 0}function IIe(e){if(!e.component.selection)return null;let t=O(e.component.selection).length,n=t,r=e.parent;for(;r&&n===0;)n=O(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip}:null}var D8=class extends f8{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,zF(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];let a=li(t.mark)?x({},t.mark):{type:t.mark},s=a.type;a.filled===void 0&&(a.filled=v1e(a,o,{graticule:t.data&&Hh(t.data)}));let c=this.encoding=Uie(t.encoding||{},s,a.filled,o);this.markDef=vM(a,c,o),this.size=P2e({encoding:c,size:zF(t)?x(x(x({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):i}),this.stack=gM(this.markDef,c),this.specifiedScales=this.initScales(s,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegends(c),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Bf(l))}get hasProjection(){let{encoding:t}=this,n=this.mark===Bb,r=t&&are.some(i=>ke(t[i]));return n||r}scaleDomain(t){let n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return M4.reduce((r,i)=>{let o=Ft(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){let{domain:n,range:r}=t,i=cr(t);return F(n)&&(i.domain=n.map(Rr)),F(r)&&(i.range=r.map(Rr)),i}initAxes(t){return Cr.reduce((n,r)=>{let i=t[r];if(ke(i)||r===xt&&ke(t.x2)||r===on&&ke(t.y2)){let o=ke(i)?i.axis:void 0;n[r]=o&&this.initAxis(x({},o))}return n},{})}initAxis(t){let n=O(t),r={};for(let i of n){let o=t[i];r[i]=Bc(o)?Db(o):Rr(o)}return r}initLegends(t){return yre.reduce((n,r)=>{let i=Ft(t[r]);if(i&&Cre(r)){let o=i.legend;n[r]=o&&cr(o)}return n},{})}parseData(){this.component.data=I4(this)}parseLayoutSize(){T2e(this)}parseSelections(){this.component.selection=Noe(this,this.selection)}parseMarkGroup(){this.component.mark=rae(this)}parseAxesAndHeaders(){this.component.axes=R2e(this)}assembleSelectionTopLevelSignals(t){return eoe(this,t)}assembleSignals(){return[...PM(this),...Z1e(this,[])]}assembleSelectionData(t){return toe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return i8(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!d2(this.parent))&&(t=FF(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){let{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return bs(this.encoding,t)}fieldDef(t){let n=this.encoding[t];return ui(n)}typedFieldDef(t){let n=this.fieldDef(t);return zn(n)?n:null}};var gw=class e extends T0{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);let a=x(x(x({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((s,c)=>{if(jc(s))return new e(s,this,this.getName(`layer_${c}`),a,o);if(br(s))return new D8(s,this,this.getName(`layer_${c}`),a,o);throw new Error(P.invalidSpec(s))})}parseData(){this.component.data=I4(this);for(let t of this.children)t.parseData()}parseLayoutSize(){_2e(this)}parseSelections(){this.component.selection={};for(let t of this.children){t.parseSelections();for(let n of O(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(let t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){O2e(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),PM(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),i8(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){let t=new Set;for(let r of this.children)for(let i of te(r.assembleGroupStyle()))t.add(i);let n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(let n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return noe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),YM(this))}};function E8(e,t,n,r,i){if($c(e))return new dw(e,t,n,i);if(jc(e))return new gw(e,t,n,r,i);if(br(e))return new D8(e,t,n,r,i);if(EF(e))return new pw(e,t,n,i);throw new Error(P.invalidSpec(e))}function iae(e,t={}){t.logger&&Ire(t.logger),t.fieldTitle&&cF(t.fieldTitle);try{let n=mM($a(t.config,e.config)),r=EM(e,n),i=E8(r,null,"",void 0,n);return i.parse(),u2e(i.component.data,i),{spec:RIe(i,FIe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Fre(),t.fieldTitle&&Pie()}}function FIe(e,t,n,r){let i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Q(t)&&(t={type:t}),i&&o&&Q1e(t.type)){if(i==="step"&&o==="step")U(P.droppingFit()),t.type="pad";else if(i==="step"||o==="step"){let a=i==="step"?"width":"height";U(P.droppingFit(b4(a)));let s=a==="width"?"height":"width";t.type=K1e(s)}}return x(x(x({},O(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t}),_F(n,!1)),_F(e,!0))}function RIe(e,t,n={},r){let i=e.config?h1e(e.config):void 0,o=[].concat(e.assembleSelectionData([]),L2e(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),c=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0),u=e.assembleLayoutSignals();u=u.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);let p=t,{params:f}=p,d=ie(p,["params"]);return x(x(x(x(k(x(x(x(x(x({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),d),s?{title:s}:{}),c?{style:c}:{}),l?{encode:{update:l}}:{}),{data:o}),a.length>0?{projections:a}:{}),e.assembleGroup([...u,...e.assembleSelectionTopLevelSignals([]),...hM(f)])),i?{config:i}:{}),r?{usermeta:r}:{})}var OIe=Qne.version;function PIe(e){let[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var yR=PIe;var SR={};Mr(SR,{carbong10:()=>FFe,carbong100:()=>OFe,carbong90:()=>RFe,carbonwhite:()=>IFe,dark:()=>aFe,excel:()=>sFe,fivethirtyeight:()=>uFe,ggplot2:()=>fFe,googlecharts:()=>wFe,latimes:()=>mFe,powerbi:()=>_Fe,quartz:()=>gFe,urbaninstitute:()=>MFe,version:()=>PFe,vox:()=>vFe});var $Ie="vega-themes",BIe="2.14.0",UIe="Themes for stylized Vega and Vega-Lite visualizations.",jIe=["vega","vega-lite","themes","style"],qIe="BSD-3-Clause",GIe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},WIe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],YIe="build/vega-themes.js",XIe="build/vega-themes.module.js",QIe="build/vega-themes.min.js",KIe="build/vega-themes.min.js",ZIe="build/vega-themes.module.d.ts",JIe={type:"git",url:"https://github.com/vega/vega-themes.git"},eFe=["src","build"],tFe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},nFe={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},rFe={vega:"*","vega-lite":"*"},iFe={},oFe={name:$Ie,version:BIe,description:UIe,keywords:jIe,license:qIe,author:GIe,contributors:WIe,main:YIe,module:XIe,unpkg:QIe,jsdelivr:KIe,types:ZIe,repository:JIe,files:eFe,scripts:tFe,devDependencies:nFe,peerDependencies:rFe,dependencies:iFe},z8="#fff",oae="#888",aFe={background:"#333",view:{stroke:oae},title:{color:z8,subtitleColor:z8},style:{"guide-label":{fill:z8},"guide-title":{fill:z8}},axis:{domainColor:z8,gridColor:oae,tickColor:z8}},F0="#4572a7",sFe={background:"#fff",arc:{fill:F0},area:{fill:F0},line:{stroke:F0,strokeWidth:2},path:{stroke:F0},rect:{fill:F0},shape:{stroke:F0},symbol:{fill:F0,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},R0="#30a2da",xR="#cbcbcb",cFe="#999",lFe="#333",aae="#f0f0f0",sae="#333",uFe={arc:{fill:R0},area:{fill:R0},axis:{domainColor:xR,grid:!0,gridColor:xR,gridWidth:1,labelColor:cFe,labelFontSize:10,titleColor:lFe,tickColor:xR,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:aae,group:{fill:aae},legend:{labelColor:sae,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:sae,titleFontSize:14,titlePadding:10},line:{stroke:R0,strokeWidth:2},path:{stroke:R0,strokeWidth:.5},rect:{fill:R0},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:R0},bar:{binSpacing:2,fill:R0,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},O0="#000",fFe={group:{fill:"#e5e5e5"},arc:{fill:O0},area:{fill:O0},line:{stroke:O0},path:{stroke:O0},rect:{fill:O0},shape:{stroke:O0},symbol:{fill:O0,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},dFe=22,pFe="normal",cae="Benton Gothic, sans-serif",lae=11.5,hFe="normal",P0="#82c6df",CR="Benton Gothic Bold, sans-serif",uae="normal",fae=13,$h={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},mFe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:CR,fontSize:dFe,fontWeight:pFe},arc:{fill:P0},area:{fill:P0},line:{stroke:P0,strokeWidth:2},path:{stroke:P0},rect:{fill:P0},shape:{stroke:P0},symbol:{fill:P0,size:30},axis:{labelFont:cae,labelFontSize:lae,labelFontWeight:hFe,titleFont:CR,titleFontSize:fae,titleFontWeight:uae},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:cae,labelFontSize:lae,symbolType:"square",titleFont:CR,titleFontSize:fae,titleFontWeight:uae},range:{category:$h["category-6"],diverging:$h["fireandice-6"],heatmap:$h["fire-7"],ordinal:$h["fire-7"],ramp:$h["fire-7"]}},$0="#ab5787",vw="#979797",gFe={background:"#f9f9f9",arc:{fill:$0},area:{fill:$0},line:{stroke:$0},path:{stroke:$0},rect:{fill:$0},shape:{stroke:$0},symbol:{fill:$0,size:30},axis:{domainColor:vw,domainWidth:.5,gridWidth:.2,labelColor:vw,tickColor:vw,tickWidth:.2,titleColor:vw},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},B0="#3e5c69",vFe={background:"#fff",arc:{fill:B0},area:{fill:B0},line:{stroke:B0},path:{stroke:B0},rect:{fill:B0},shape:{stroke:B0},symbol:{fill:B0},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},m2="#1696d2",dae="#000000",yFe="#FFFFFF",yw="Lato",bR="Lato",xFe="Lato",CFe="#DEDDDD",bFe=18,Bh={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},MFe={background:yFe,title:{anchor:"start",fontSize:bFe,font:yw},axisX:{domain:!0,domainColor:dae,domainWidth:1,grid:!1,labelFontSize:12,labelFont:bR,labelAngle:0,tickColor:dae,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:yw},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:CFe,gridWidth:1,labelFontSize:12,labelFont:bR,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:yw,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:bR,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:yw,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Bh["six-groups-cat-1"],diverging:Bh["diverging-colors"],heatmap:Bh["diverging-colors"],ordinal:Bh["six-groups-seq"],ramp:Bh["shades-blue"]},area:{fill:m2},rect:{fill:m2},line:{color:m2,stroke:m2,strokeWidth:5},trail:{color:m2,stroke:m2,strokeWidth:0,size:1},path:{stroke:m2,strokeWidth:.5},point:{filled:!0},text:{font:xFe,color:m2,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:m2,stroke:null}},arc:{fill:m2},shape:{stroke:m2},symbol:{fill:m2,size:30}},U0="#3366CC",pae="#ccc",xw="Arial, sans-serif",wFe={arc:{fill:U0},area:{fill:U0},path:{stroke:U0},rect:{fill:U0},shape:{stroke:U0},symbol:{stroke:U0},circle:{fill:U0},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:xw,fontSize:12},"guide-title":{font:xw,fontSize:12},"group-title":{font:xw,fontSize:12}},title:{font:xw,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:pae,tickColor:pae,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},wR=e=>e*(1/3+1),hae=wR(9),mae=wR(10),gae=wR(12),Uh="Segoe UI",vae="wf_standard-font, helvetica, arial, sans-serif",yae="#252423",jh="#605E5C",xae="transparent",SFe="#C8C6C4",ya="#118DFF",EFe="#12239E",DFe="#E66C37",zFe="#6B007B",HFe="#E044A7",LFe="#744EC2",AFe="#D9B300",VFe="#D64550",Mae=ya,wae="#DEEFFF",Cae=[wae,Mae],NFe=[wae,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Mae],_Fe={view:{stroke:xae},background:xae,font:Uh,header:{titleFont:vae,titleFontSize:gae,titleColor:yae,labelFont:Uh,labelFontSize:mae,labelColor:jh},axis:{ticks:!1,grid:!1,domain:!1,labelColor:jh,labelFontSize:hae,titleFont:vae,titleColor:yae,titleFontSize:gae,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:SFe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ya},line:{stroke:ya,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Uh,fontSize:hae,fill:jh},arc:{fill:ya},area:{fill:ya,line:!0,opacity:.6},path:{stroke:ya},rect:{fill:ya},point:{fill:ya,filled:!0,size:75},shape:{stroke:ya},symbol:{fill:ya,strokeWidth:1.5,size:50},legend:{titleFont:Uh,titleFontWeight:"bold",titleColor:jh,labelFont:Uh,labelFontSize:mae,labelColor:jh,symbolType:"circle",symbolSize:75},range:{category:[ya,EFe,DFe,zFe,HFe,LFe,AFe,VFe],diverging:Cae,heatmap:Cae,ordinal:NFe}},MR='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',bae=400,kFe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],TFe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function Cw({type:e,background:t}){let n=e==="dark"?"#161616":"#ffffff",r=e==="dark"?"#f4f4f4":"#161616",i=e==="dark"?kFe:TFe,o=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:MR,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:MR,fill:r,fontWeight:bae},"guide-title":{font:MR,fill:r,fontWeight:bae}},range:{category:i,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}var IFe=Cw({type:"light",background:"#ffffff"}),FFe=Cw({type:"light",background:"#f4f4f4"}),RFe=Cw({type:"dark",background:"#262626"}),OFe=Cw({type:"dark",background:"#161616"}),PFe=oFe.version;var $Fe="vega-tooltip",BFe="0.34.0",UFe="A tooltip plugin for Vega-Lite and Vega visualizations.",jFe=["vega-lite","vega","tooltip"],qFe={type:"git",url:"https://github.com/vega/vega-tooltip.git"},GFe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},WFe=["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],YFe="BSD-3-Clause",XFe={url:"https://github.com/vega/vega-tooltip/issues"},QFe="https://github.com/vega/vega-tooltip#readme",KFe="build/vega-tooltip.js",ZFe="build/vega-tooltip.module.js",JFe="build/vega-tooltip.min.js",eRe="build/vega-tooltip.min.js",tRe="build/vega-tooltip.module.d.ts",nRe=["src","build","types"],rRe={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"rimraf build && rimraf src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prepare:"yarn copy:data",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},iRe={"@babel/core":"^7.22.10","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.10","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@types/jest":"^29.5.3","@typescript-eslint/eslint-plugin":"^6.3.0","@typescript-eslint/parser":"^6.3.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.46.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","gh-pages":"^6.1.0",jest:"^29.6.2","jest-environment-jsdom":"^29.6.2",path:"^0.12.7",prettier:"^3.0.1","release-it":"^16.1.3",rollup:"^4.6.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.3",sass:"^1.64.2",typescript:"~5.3.2","vega-datasets":"^2.7.0","vega-typings":"^0.24.2"},oRe={"vega-util":"^1.17.2"},aRe={name:$Fe,version:BFe,description:UFe,keywords:jFe,repository:qFe,author:GFe,collaborators:WFe,license:YFe,bugs:XFe,homepage:QFe,main:KFe,module:ZFe,unpkg:JFe,jsdelivr:eRe,types:tRe,files:nRe,scripts:rRe,devDependencies:iRe,dependencies:oRe};function sRe(e,t,n,r){if(F(e))return`[${e.map(o=>t(Q(o)?o:Sae(o,n))).join(", ")}]`;if(ne(e)){let o="",i=e,{title:a,image:s}=i,c=ie(i,["title","image"]);a&&(o+=`<h2>${t(a)}</h2>`),s&&(o+=`<img src="${new URL(t(s),r||location.href).href}">`);let l=Object.keys(c);if(l.length>0){o+="<table>";for(let u of l){let f=c[u];f!==void 0&&(ne(f)&&(f=Sae(f,n)),o+=`<tr><td class="key">${t(u)}</td><td class="value">${t(f)}</td></tr>`)}o+="</table>"}return o||"{}"}return t(e)}function cRe(e){let t=[];return function(n,r){if(typeof r!="object"||r===null)return r;let i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Sae(e,t){return JSON.stringify(e,cRe(t))}var lRe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`,Eae="vg-tooltip-element",uRe={offsetX:10,offsetY:10,id:Eae,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:fRe,maxDepth:2,formatTooltip:sRe,baseURL:""};function fRe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function dRe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return lRe.toString().replace(Eae,e)}function pRe(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}var bw=class{constructor(t){this.options=x(x({},uRe),t);let n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){let r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=dRe(n);let i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);let{x:o,y:a}=pRe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${a}px`,this.el.style.left=`${o}px`}},zAt=aRe.version;function hRe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ER,Dae;function mRe(){return Dae||(Dae=1,ER=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),ER}var gRe=At;At.Node=G0;At.create=At;function At(e){var t=this;if(t instanceof At||(t=new At),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}At.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};At.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};At.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};At.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)yRe(this,arguments[e]);return this.length};At.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)xRe(this,arguments[e]);return this.length};At.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};At.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};At.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};At.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};At.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};At.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};At.prototype.map=function(e,t){t=t||this;for(var n=new At,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};At.prototype.mapReverse=function(e,t){t=t||this;for(var n=new At,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};At.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};At.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};At.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};At.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};At.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new At;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};At.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new At;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};At.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var o=[],r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=vRe(this,i,n[r]);return o};At.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function vRe(e,t,n){var r=t===e.head?new G0(n,null,t,e):new G0(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function yRe(e,t){e.tail=new G0(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function xRe(e,t){e.head=new G0(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function G0(e,t,n,r){if(!(this instanceof G0))return new G0(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{mRe()(At)}catch{}var CRe=gRe,j0=Symbol("max"),Jc=Symbol("length"),H8=Symbol("lengthCalculator"),Wh=Symbol("allowStale"),q0=Symbol("maxAge"),Zc=Symbol("dispose"),zae=Symbol("noDisposeOnSet"),Ur=Symbol("lruList"),xa=Symbol("cache"),Pae=Symbol("updateAgeOnGet"),DR=()=>1,AR=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[j0]=t.max||1/0;let n=t.length||DR;if(this[H8]=typeof n!="function"?DR:n,this[Wh]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[q0]=t.maxAge||0,this[Zc]=t.dispose,this[zae]=t.noDisposeOnSet||!1,this[Pae]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[j0]=t||1/0,qh(this)}get max(){return this[j0]}set allowStale(t){this[Wh]=!!t}get allowStale(){return this[Wh]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[q0]=t,qh(this)}get maxAge(){return this[q0]}set lengthCalculator(t){typeof t!="function"&&(t=DR),t!==this[H8]&&(this[H8]=t,this[Jc]=0,this[Ur].forEach(n=>{n.length=this[H8](n.value,n.key),this[Jc]+=n.length})),qh(this)}get lengthCalculator(){return this[H8]}get length(){return this[Jc]}get itemCount(){return this[Ur].length}rforEach(t,n){n=n||this;for(let r=this[Ur].tail;r!==null;){let i=r.prev;Hae(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Ur].head;r!==null;){let i=r.next;Hae(this,t,r,n),r=i}}keys(){return this[Ur].toArray().map(t=>t.key)}values(){return this[Ur].toArray().map(t=>t.value)}reset(){this[Zc]&&this[Ur]&&this[Ur].length&&this[Ur].forEach(t=>this[Zc](t.key,t.value)),this[xa]=new Map,this[Ur]=new CRe,this[Jc]=0}dump(){return this[Ur].map(t=>Ew(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ur]}set(t,n,r){if(r=r||this[q0],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,o=this[H8](n,t);if(this[xa].has(t)){if(o>this[j0])return A8(this,this[xa].get(t)),!1;let c=this[xa].get(t).value;return this[Zc]&&(this[zae]||this[Zc](t,c.value)),c.now=i,c.maxAge=r,c.value=n,this[Jc]+=o-c.length,c.length=o,this.get(t),qh(this),!0}let a=new VR(t,n,o,i,r);return a.length>this[j0]?(this[Zc]&&this[Zc](t,n),!1):(this[Jc]+=a.length,this[Ur].unshift(a),this[xa].set(t,this[Ur].head),qh(this),!0)}has(t){if(!this[xa].has(t))return!1;let n=this[xa].get(t).value;return!Ew(this,n)}get(t){return zR(this,t,!0)}peek(t){return zR(this,t,!1)}pop(){let t=this[Ur].tail;return t?(A8(this,t),t.value):null}del(t){A8(this,this[xa].get(t))}load(t){this.reset();let n=Date.now();for(let r=t.length-1;r>=0;r--){let i=t[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let a=o-n;a>0&&this.set(i.k,i.v,a)}}}prune(){this[xa].forEach((t,n)=>zR(this,n,!1))}},zR=(e,t,n)=>{let r=e[xa].get(t);if(r){let i=r.value;if(Ew(e,i)){if(A8(e,r),!e[Wh])return}else n&&(e[Pae]&&(r.value.now=Date.now()),e[Ur].unshiftNode(r));return i.value}},Ew=(e,t)=>{if(!t||!t.maxAge&&!e[q0])return!1;let n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[q0]&&n>e[q0]},qh=e=>{if(e[Jc]>e[j0])for(let t=e[Ur].tail;e[Jc]>e[j0]&&t!==null;){let n=t.prev;A8(e,t),t=n}},A8=(e,t)=>{if(t){let n=t.value;e[Zc]&&e[Zc](n.key,n.value),e[Jc]-=n.length,e[xa].delete(n.key),e[Ur].removeNode(t)}},VR=class{constructor(t,n,r,i,o){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}},Hae=(e,t,n,r)=>{let i=n.value;Ew(e,i)&&(A8(e,n),e[Wh]||(i=void 0)),i&&t.call(r,i.value,i.key,e)},bRe=AR,MRe=Object.freeze({loose:!0}),wRe=Object.freeze({}),SRe=e=>e?typeof e!="object"?MRe:e:wRe,_R=SRe,NR={exports:{}},ERe="2.0.0",$ae=256,DRe=Number.MAX_SAFE_INTEGER||9007199254740991,zRe=16,HRe=$ae-6,LRe=["major","premajor","minor","preminor","patch","prepatch","prerelease"],kR={MAX_LENGTH:$ae,MAX_SAFE_COMPONENT_LENGTH:zRe,MAX_SAFE_BUILD_LENGTH:HRe,MAX_SAFE_INTEGER:DRe,RELEASE_TYPES:LRe,SEMVER_SPEC_VERSION:ERe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ARe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},zw=ARe;(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=kR,o=zw;t=e.exports={};let a=t.re=[],s=t.safeRe=[],c=t.src=[],l=t.t={},u=0,f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],p=m=>{for(let[g,v]of d)m=m.split(`${g}*`).join(`${g}{0,${v}}`).split(`${g}+`).join(`${g}{1,${v}}`);return m},h=(m,g,v)=>{let y=p(g),C=u++;o(m,C,g),l[m]=C,c[C]=g,a[C]=new RegExp(g,v?"g":void 0),s[C]=new RegExp(y,v?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),h("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${f}+`),h("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),h("FULL",`^${c[l.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),h("LOOSE",`^${c[l.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),h("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),h("COERCERTL",c[l.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(NR,NR.exports);var TR=NR.exports,Lae=/^[0-9]+$/,Bae=(e,t)=>{let n=Lae.test(e),r=Lae.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},VRe=(e,t)=>Bae(t,e),NRe={compareIdentifiers:Bae,rcompareIdentifiers:VRe},Mw=zw,{MAX_LENGTH:Aae,MAX_SAFE_INTEGER:ww}=kR,{safeRe:Vae,t:Nae}=TR,_Re=_R,{compareIdentifiers:L8}=NRe,kRe=class Ds{constructor(t,n){if(n=_Re(n),t instanceof Ds){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Aae)throw new TypeError(`version is longer than ${Aae} characters`);Mw("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=t.trim().match(n.loose?Vae[Nae.LOOSE]:Vae[Nae.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>ww||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ww||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ww||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<ww)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Mw("SemVer.compare",this.version,this.options,t),!(t instanceof Ds)){if(typeof t=="string"&&t===this.version)return 0;t=new Ds(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Ds||(t=new Ds(t,this.options)),L8(this.major,t.major)||L8(this.minor,t.minor)||L8(this.patch,t.patch)}comparePre(t){if(t instanceof Ds||(t=new Ds(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=t.prerelease[n];if(Mw("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return L8(r,i)}while(++n)}compareBuild(t){t instanceof Ds||(t=new Ds(t,this.options));let n=0;do{let r=this.build[n],i=t.build[n];if(Mw("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return L8(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),L8(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}},IR=kRe,_ae=IR,TRe=(e,t,n)=>new _ae(e,n).compare(new _ae(t,n)),V8=TRe,IRe=V8,FRe=(e,t,n)=>IRe(e,t,n)===0,RRe=FRe,ORe=V8,PRe=(e,t,n)=>ORe(e,t,n)!==0,$Re=PRe,BRe=V8,URe=(e,t,n)=>BRe(e,t,n)>0,jRe=URe,qRe=V8,GRe=(e,t,n)=>qRe(e,t,n)>=0,WRe=GRe,YRe=V8,XRe=(e,t,n)=>YRe(e,t,n)<0,QRe=XRe,KRe=V8,ZRe=(e,t,n)=>KRe(e,t,n)<=0,JRe=ZRe,eOe=RRe,tOe=$Re,nOe=jRe,rOe=WRe,iOe=QRe,oOe=JRe,aOe=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return eOe(e,n,r);case"!=":return tOe(e,n,r);case">":return nOe(e,n,r);case">=":return rOe(e,n,r);case"<":return iOe(e,n,r);case"<=":return oOe(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}},sOe=aOe,HR,kae;function cOe(){if(kae)return HR;kae=1;let e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,f){if(f=n(f),u instanceof t){if(u.loose===!!f.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),a("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(u){let f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=u.match(f);if(!d)throw new TypeError(`Invalid comparator: ${u}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new s(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(a("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new s(u,this.options)}catch{return!1}return o(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new c(this.value,f).test(u.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||o(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||o(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}HR=t;let n=_R,{safeRe:r,t:i}=TR,o=sOe,a=zw,s=IR,c=Uae();return HR}var LR,Tae;function Uae(){if(Tae)return LR;Tae=1;class e{constructor(_,N){if(N=r(N),_ instanceof e)return _.loose===!!N.loose&&_.includePrerelease===!!N.includePrerelease?_:new e(_.raw,N);if(_ instanceof i)return this.raw=_.value,this.set=[[_]],this.format(),this;if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=_.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(I=>this.parseRange(I.trim())).filter(I=>I.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let I=this.set[0];if(this.set=this.set.filter(W=>!h(W[0])),this.set.length===0)this.set=[I];else if(this.set.length>1){for(let W of this.set)if(W.length===1&&m(W[0])){this.set=[W];break}}}this.format()}format(){return this.range=this.set.map(_=>_.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(_){let I=((this.options.includePrerelease&&d)|(this.options.loose&&p))+":"+_,W=n.get(I);if(W)return W;let X=this.options.loose,J=X?s[c.HYPHENRANGELOOSE]:s[c.HYPHENRANGE];_=_.replace(J,A(this.options.includePrerelease)),o("hyphen replace",_),_=_.replace(s[c.COMPARATORTRIM],l),o("comparator trim",_),_=_.replace(s[c.TILDETRIM],u),o("tilde trim",_),_=_.replace(s[c.CARETTRIM],f),o("caret trim",_);let Se=_.split(" ").map(lt=>v(lt,this.options)).join(" ").split(/\s+/).map(lt=>L(lt,this.options));X&&(Se=Se.filter(lt=>(o("loose invalid filter",lt,this.options),!!lt.match(s[c.COMPARATORLOOSE])))),o("range list",Se);let Ee=new Map,Xe=Se.map(lt=>new i(lt,this.options));for(let lt of Xe){if(h(lt))return[lt];Ee.set(lt.value,lt)}Ee.size>1&&Ee.has("")&&Ee.delete("");let zt=[...Ee.values()];return n.set(I,zt),zt}intersects(_,N){if(!(_ instanceof e))throw new TypeError("a Range is required");return this.set.some(I=>g(I,N)&&_.set.some(W=>g(W,N)&&I.every(X=>W.every(J=>X.intersects(J,N)))))}test(_){if(!_)return!1;if(typeof _=="string")try{_=new a(_,this.options)}catch{return!1}for(let N=0;N<this.set.length;N++)if(j(this.set[N],_,this.options))return!0;return!1}}LR=e;let t=bRe,n=new t({max:1e3}),r=_R,i=cOe(),o=zw,a=IR,{safeRe:s,t:c,comparatorTrimReplace:l,tildeTrimReplace:u,caretTrimReplace:f}=TR,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:p}=kR,h=V=>V.value==="<0.0.0-0",m=V=>V.value==="",g=(V,_)=>{let N=!0,I=V.slice(),W=I.pop();for(;N&&I.length;)N=I.every(X=>W.intersects(X,_)),W=I.pop();return N},v=(V,_)=>(o("comp",V,_),V=M(V,_),o("caret",V),V=C(V,_),o("tildes",V),V=w(V,_),o("xrange",V),V=D(V,_),o("stars",V),V),y=V=>!V||V.toLowerCase()==="x"||V==="*",C=(V,_)=>V.trim().split(/\s+/).map(N=>b(N,_)).join(" "),b=(V,_)=>{let N=_.loose?s[c.TILDELOOSE]:s[c.TILDE];return V.replace(N,(I,W,X,J,Se)=>{o("tilde",V,I,W,X,J,Se);let Ee;return y(W)?Ee="":y(X)?Ee=`>=${W}.0.0 <${+W+1}.0.0-0`:y(J)?Ee=`>=${W}.${X}.0 <${W}.${+X+1}.0-0`:Se?(o("replaceTilde pr",Se),Ee=`>=${W}.${X}.${J}-${Se} <${W}.${+X+1}.0-0`):Ee=`>=${W}.${X}.${J} <${W}.${+X+1}.0-0`,o("tilde return",Ee),Ee})},M=(V,_)=>V.trim().split(/\s+/).map(N=>S(N,_)).join(" "),S=(V,_)=>{o("caret",V,_);let N=_.loose?s[c.CARETLOOSE]:s[c.CARET],I=_.includePrerelease?"-0":"";return V.replace(N,(W,X,J,Se,Ee)=>{o("caret",V,W,X,J,Se,Ee);let Xe;return y(X)?Xe="":y(J)?Xe=`>=${X}.0.0${I} <${+X+1}.0.0-0`:y(Se)?X==="0"?Xe=`>=${X}.${J}.0${I} <${X}.${+J+1}.0-0`:Xe=`>=${X}.${J}.0${I} <${+X+1}.0.0-0`:Ee?(o("replaceCaret pr",Ee),X==="0"?J==="0"?Xe=`>=${X}.${J}.${Se}-${Ee} <${X}.${J}.${+Se+1}-0`:Xe=`>=${X}.${J}.${Se}-${Ee} <${X}.${+J+1}.0-0`:Xe=`>=${X}.${J}.${Se}-${Ee} <${+X+1}.0.0-0`):(o("no pr"),X==="0"?J==="0"?Xe=`>=${X}.${J}.${Se}${I} <${X}.${J}.${+Se+1}-0`:Xe=`>=${X}.${J}.${Se}${I} <${X}.${+J+1}.0-0`:Xe=`>=${X}.${J}.${Se} <${+X+1}.0.0-0`),o("caret return",Xe),Xe})},w=(V,_)=>(o("replaceXRanges",V,_),V.split(/\s+/).map(N=>E(N,_)).join(" ")),E=(V,_)=>{V=V.trim();let N=_.loose?s[c.XRANGELOOSE]:s[c.XRANGE];return V.replace(N,(I,W,X,J,Se,Ee)=>{o("xRange",V,I,W,X,J,Se,Ee);let Xe=y(X),zt=Xe||y(J),lt=zt||y(Se),en=lt;return W==="="&&en&&(W=""),Ee=_.includePrerelease?"-0":"",Xe?W===">"||W==="<"?I="<0.0.0-0":I="*":W&&en?(zt&&(J=0),Se=0,W===">"?(W=">=",zt?(X=+X+1,J=0,Se=0):(J=+J+1,Se=0)):W==="<="&&(W="<",zt?X=+X+1:J=+J+1),W==="<"&&(Ee="-0"),I=`${W+X}.${J}.${Se}${Ee}`):zt?I=`>=${X}.0.0${Ee} <${+X+1}.0.0-0`:lt&&(I=`>=${X}.${J}.0${Ee} <${X}.${+J+1}.0-0`),o("xRange return",I),I})},D=(V,_)=>(o("replaceStars",V,_),V.trim().replace(s[c.STAR],"")),L=(V,_)=>(o("replaceGTE0",V,_),V.trim().replace(s[_.includePrerelease?c.GTE0PRE:c.GTE0],"")),A=V=>(_,N,I,W,X,J,Se,Ee,Xe,zt,lt,en,Ls)=>(y(I)?N="":y(W)?N=`>=${I}.0.0${V?"-0":""}`:y(X)?N=`>=${I}.${W}.0${V?"-0":""}`:J?N=`>=${N}`:N=`>=${N}${V?"-0":""}`,y(Xe)?Ee="":y(zt)?Ee=`<${+Xe+1}.0.0-0`:y(lt)?Ee=`<${Xe}.${+zt+1}.0-0`:en?Ee=`<=${Xe}.${zt}.${lt}-${en}`:V?Ee=`<${Xe}.${zt}.${+lt+1}-0`:Ee=`<=${Ee}`,`${N} ${Ee}`.trim()),j=(V,_,N)=>{for(let I=0;I<V.length;I++)if(!V[I].test(_))return!1;if(_.prerelease.length&&!N.includePrerelease){for(let I=0;I<V.length;I++)if(o(V[I].semver),V[I].semver!==i.ANY&&V[I].semver.prerelease.length>0){let W=V[I].semver;if(W.major===_.major&&W.minor===_.minor&&W.patch===_.patch)return!0}return!1}return!0};return LR}var lOe=Uae(),uOe=(e,t,n)=>{try{t=new lOe(t,n)}catch{return!1}return t.test(e)},fOe=uOe,jae=hRe(fOe);function dOe(e,t,n){let r=e.open(t),i=1e4,o=250,{origin:a}=new URL(t),s=~~(i/o);function c(u){u.source===r&&(s=0,e.removeEventListener("message",c,!1))}e.addEventListener("message",c,!1);function l(){s<=0||(r.postMessage(n,a),setTimeout(l,o),s-=1)}setTimeout(l,o)}var pOe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function qae(e,...t){for(let n of t)hOe(e,n);return e}function hOe(e,t){for(let n of Object.keys(t))tc(e,n,t[n],!0)}var mOe="vega-embed",gOe="6.24.0",vOe="Publish Vega visualizations as embedded web components.",yOe=["vega","data","visualization","component","embed"],xOe={type:"git",url:"http://github.com/vega/vega-embed.git"},COe={name:"UW Interactive Data Lab",url:"http://idl.cs.washington.edu"},bOe=[{name:"Dominik Moritz",url:"https://www.domoritz.de"}],MOe={url:"https://github.com/vega/vega-embed/issues"},wOe="https://github.com/vega/vega-embed#readme",SOe="BSD-3-Clause",EOe="build/vega-embed.js",DOe="build/vega-embed.module.js",zOe="build/vega-embed.min.js",HOe="build/vega-embed.min.js",LOe="build/vega-embed.module.d.ts",AOe=["src","build","patches"],VOe={"@babel/core":"^7.23.6","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.23.6","@babel/preset-env":"^7.23.6","@babel/preset-typescript":"^7.23.3","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-commonjs":"25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/jest":"^29.5.11","@types/semver":"^7.5.6","@typescript-eslint/eslint-plugin":"^6.14.0","@typescript-eslint/parser":"^6.14.0","browser-sync":"^2.29.3",concurrently:"^8.2.2","del-cli":"^5.1.0",eslint:"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.6.0","eslint-plugin-prettier":"^5.0.1",jest:"^29.7.0","jest-canvas-mock":"^2.5.2","jest-environment-jsdom":"^29.7.0","patch-package":"^8.0.0","postinstall-postinstall":"^2.1.0",prettier:"^3.1.1","release-it":"^17.0.1",rollup:"4.9.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",sass:"^1.69.5",typescript:"^5.3.3",vega:"^5.22.1","vega-lite":"^5.2.0"},NOe={vega:"^5.21.0","vega-lite":"*"},_Oe={"fast-json-patch":"^3.1.1","json-stringify-pretty-compact":"^3.0.0",semver:"^7.5.4",tslib:"^2.6.2","vega-interpreter":"^1.0.5","vega-schema-url-parser":"^2.2.0","vega-themes":"^2.14.0","vega-tooltip":"^0.34.0"},kOe=["yallist"],TOe={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"del-cli build src/style.ts",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start --directory -s -f build *.html",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},IOe={name:mOe,version:gOe,description:vOe,keywords:yOe,repository:xOe,author:COe,contributors:bOe,bugs:MOe,homepage:wOe,license:SOe,main:EOe,module:DOe,unpkg:zOe,jsdelivr:HOe,types:LOe,files:AOe,devDependencies:VOe,peerDependencies:NOe,dependencies:_Oe,bundledDependencies:kOe,scripts:TOe},TAt=IOe.version,zs=wI,Yh=vR,Iae=typeof window<"u"?window:void 0;Yh===void 0&&Iae?.vl?.compile&&(Yh=Iae.vl);var FOe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},ROe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Gh={vega:"Vega","vega-lite":"Vega-Lite"},Dw={vega:zs.version,"vega-lite":Yh?Yh.version:"not available"},OOe={vega:e=>e,"vega-lite":(e,t)=>Yh.compile(e,{config:t}).spec},POe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,$Oe="chart-wrapper";function BOe(e){return typeof e=="function"}function Fae(e,t,n,r){let i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+o),a.document.title=`${Gh[r]} JSON Source`}function UOe(e,t){if(e.$schema){let n=yR(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Gh[n.library]}, but mode argument sets ${Gh[t]??t}.`);let r=n.library;return jae(Dw[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Gh[r]} ${n.version}, but the current version of ${Gh[r]} is v${Dw[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Gae(e){return!!(e&&"load"in e)}function Rae(e){return Gae(e)?e:zs.loader(e)}function jOe(e){let t=e.usermeta?.embedOptions??{};return Q(t.defaultStyle)&&(t.defaultStyle=!1),t}function Wae(r,i){return Gt(this,arguments,function*(e,t,n={}){let o,a;Q(t)?(a=Rae(n.loader),o=JSON.parse(yield a.load(t))):o=t;let s=jOe(o),c=s.loader;(!a||c)&&(a=Rae(n.loader??c));let l=yield Oae(s,a),u=yield Oae(n,a),f=k(x({},qae(u,l)),{config:$a(u.config??{},l.config??{})});return yield GOe(e,o,f,a)})}function Oae(e,t){return Gt(this,null,function*(){let n=Q(e.config)?JSON.parse(yield t.load(e.config)):e.config??{},r=Q(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return x(x(x({},e),r?{patch:r}:{}),n?{config:n}:{})})}function qOe(e){let t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}function GOe(i,o){return Gt(this,arguments,function*(e,t,n={},r){let a=n.theme?$a(SR[n.theme],n.config??{}):n.config,s=A1(n.actions)?n.actions:qae({},FOe,n.actions??{}),c=x(x({},ROe),n.i18n),l=n.renderer??"canvas",u=n.logLevel??zs.Warn,f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){let w="vega-embed-style",{root:E,rootContainer:D}=qOe(d);if(!E.getElementById(w)){let L=document.createElement("style");L.id=w,L.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?pOe.toString():n.defaultStyle,D.appendChild(L)}}let p=UOe(t,n.mode),h=OOe[p](t,a);if(p==="vega-lite"&&h.$schema){let w=yR(h.$schema);jae(Dw.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${Dw.vega}.`)}d.classList.add("vega-embed"),s&&d.classList.add("has-actions"),d.innerHTML="";let m=d;if(s){let w=document.createElement("div");w.classList.add($Oe),d.appendChild(w),m=w}let g=n.patch;if(g&&(h=g instanceof Function?g(h):X6(h,g,!0,!1).newDocument),n.formatLocale&&zs.formatLocale(n.formatLocale),n.timeFormatLocale&&zs.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(let w in n.expressionFunctions){let E=n.expressionFunctions[w];"fn"in E?zs.expressionFunction(w,E.fn,E.visitor):E instanceof Function&&zs.expressionFunction(w,E)}let{ast:v}=n,y=zs.parse(h,p==="vega-lite"?{}:a,{ast:v}),C=new(n.viewClass||zs.View)(y,x({loader:r,logLevel:u,renderer:l},v?{expr:zs.expressionInterpreter??n.expr??Xne}:{}));if(C.addSignalListener("autosize",(w,E)=>{let{type:D}=E;D=="fit-x"?(m.classList.add("fit-x"),m.classList.remove("fit-y")):D=="fit-y"?(m.classList.remove("fit-x"),m.classList.add("fit-y")):D=="fit"?m.classList.add("fit-x","fit-y"):m.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){let{loader:w,tooltip:E}=n,D=w&&!Gae(w)?w?.baseURL:void 0,L=BOe(E)?E:new bw(x({baseURL:D},E===!0?{}:E)).call;C.tooltip(L)}let{hover:b}=n;if(b===void 0&&(b=p==="vega"),b){let{hoverSet:w,updateSet:E}=typeof b=="boolean"?{}:b;C.hover(w,E)}n&&(n.width!=null&&C.width(n.width),n.height!=null&&C.height(n.height),n.padding!=null&&C.padding(n.padding)),yield C.initialize(m,n.bind).runAsync();let M;if(s!==!1){let w=d;if(n.defaultStyle!==!1||n.forceActionsMenu){let D=document.createElement("details");D.title=c.CLICK_TO_VIEW_ACTIONS,d.append(D),w=D;let L=document.createElement("summary");L.innerHTML=POe,D.append(L),M=A=>{D.contains(A.target)||D.removeAttribute("open")},document.addEventListener("click",M)}let E=document.createElement("div");if(w.append(E),E.classList.add("vega-actions"),s===!0||s.export!==!1){for(let D of["svg","png"])if(s===!0||s.export===!0||s.export[D]){let L=c[`${D.toUpperCase()}_ACTION`],A=document.createElement("a"),j=ne(n.scaleFactor)?n.scaleFactor[D]:n.scaleFactor;A.text=L,A.href="#",A.target="_blank",A.download=`${f}.${D}`,A.addEventListener("mousedown",function(V){return Gt(this,null,function*(){V.preventDefault();let _=yield C.toImageURL(D,j);this.href=_})}),E.append(A)}}if(s===!0||s.source!==!1){let D=document.createElement("a");D.text=c.SOURCE_ACTION,D.href="#",D.addEventListener("click",function(L){Fae((0,Sw.default)(t),n.sourceHeader??"",n.sourceFooter??"",p),L.preventDefault()}),E.append(D)}if(p==="vega-lite"&&(s===!0||s.compiled!==!1)){let D=document.createElement("a");D.text=c.COMPILED_ACTION,D.href="#",D.addEventListener("click",function(L){Fae((0,Sw.default)(h),n.sourceHeader??"",n.sourceFooter??"","vega"),L.preventDefault()}),E.append(D)}if(s===!0||s.editor!==!1){let D=n.editorUrl??"https://vega.github.io/editor/",L=document.createElement("a");L.text=c.EDITOR_ACTION,L.href="#",L.addEventListener("click",function(A){dOe(window,D,{config:a,mode:p,renderer:l,spec:(0,Sw.default)(t)}),A.preventDefault()}),E.append(L)}}function S(){M&&document.removeEventListener("click",M),C.finalize()}return{view:C,spec:t,vgSpec:h,finalize:S,embedOptions:n}})}var FR=(()=>{let t=class t{constructor(){this.data=[],this.spec=oG}ngAfterViewInit(){return Gt(this,null,function*(){this.spec=this.addDataToSpec(this.data,this.spec),this.chart=yield Wae("#calendar-element",this.spec)})}addDataToSpec(r,i){let o=i;return o.data.values=this.formatData(r),o}formatData(r){let i=Array.from(new Set(r)),o=i.map(u=>new Date(u).getFullYear()),a=Math.min(...o),s=Math.max(...o),c={};for(let u=a;u<=s;u++)for(let f=1;f<=12;f++)for(let d=1;d<=31;d++){let p=new Date(u,f-1,d).toLocaleDateString().split("T")[0];c[p]=0}return i.forEach(u=>{let f=new Date(u).toLocaleDateString().split("T")[0];c[f]+=1}),Object.entries(c).map(([u,f])=>({date:u,count:f}))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-calendar-heatmap"]],inputs:{data:"data"},decls:1,vars:0,consts:[["id","calendar-element"]],template:function(i,o){i&1&&Mn(0,"div",0)},styles:["#calendar-element[_ngcontent-%COMP%]{position:relative;width:100%}"]});let e=t;return e})();function YOe(e,t){if(e&1&&(z(0,"p"),T(1),H()),e&2){let n=Et();R(),t5(" Completed Value: ",n.model==null?null:n.model.TimesCompletedToday," / ",n.model==null?null:n.model.TargetValue,`
`)}}function XOe(e,t){if(e&1&&(z(0,"p"),T(1," Associated Goal: "),z(2,"a",5),T(3),H()()),e&2){let n=Et();R(2),he("routerLink",n.goalModel.ViewUrl),R(),Me(" ",n.goalModel.Name," ")}}function QOe(e,t){if(e&1&&(z(0,"li"),T(1),vi(2,"date"),H()),e&2){let n=t.$implicit;R(),Me(" ",yi(2,1,n)," ")}}var KOe=()=>[];function ZOe(e,t){if(e&1&&(E1(0),Mn(1,"app-calendar-heatmap",6),D1()),e&2){let n=Et();R(),he("data",n.model.FormattedCompletedDates?n.model.FormattedCompletedDates:_a(1,KOe))}}var RR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.goalApi=o,this.faCheck=Yg,this.faXmark=Wg,this.recentCompletedDates=[]}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(xe(1)).subscribe(i=>{this.model=new Mi(i.data),this.recentCompletedDates=this.model?.FormattedCompletedDates.slice(-7)??[],this.model?.Goal&&this.goalApi.getGoal(this.model?.Goal).pipe(xe(1)).subscribe(o=>{this.goalModel=new qn(o.data)})})}};t.\u0275fac=function(i){return new(i||t)(q(Po),q(kt),q(tr))},t.\u0275cmp=Le({type:t,selectors:[["app-habit-page"]],decls:19,vars:11,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right",3,"routerLink"],[1,"uk-button-danger","uk-button",3,"routerLink"],[3,"icon"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"routerLink"],[3,"data"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"button",0),T(3),H(),z(4,"button",1),T(5),H(),z(6,"p"),T(7),H(),Mn(8,"hr"),z(9,"p"),T(10," Is Anti Habit: "),Mn(11,"fa-icon",2),H(),St(12,YOe,2,2,"p",3)(13,XOe,4,2,"p",3),z(14,"h2"),T(15,"Completed Dates"),H(),z(16,"ul"),St(17,QOe,3,3,"li",4),H(),St(18,ZOe,2,2,"ng-container",3)),i&2&&(R(),Me("Habit: ",o.model==null?null:o.model.Name,""),R(),he("routerLink",o.model==null?null:o.model.EditUrl),R(),Me(" Edit: ",o.model==null?null:o.model.Name,`
`),R(),he("routerLink",o.model==null?null:o.model.DeleteUrl),R(),Me(" Delete: ",o.model==null?null:o.model.Name,`
`),R(2),Me(" ",o.model==null?null:o.model.Description,`
`),R(4),he("icon",o.model!=null&&o.model.AntiHabit?o.faCheck:o.faXmark),R(),he("ngIf",o.model==null?null:o.model.IsQuantifiable),R(),he("ngIf",o.goalModel),R(4),he("ngForOf",o.recentCompletedDates),R(),he("ngIf",o.model))},dependencies:[xi,z1,hn,zg,FR,Io],encapsulation:2});let e=t;return e})();var OR=(()=>{let t=class t{constructor(){}onRightClick(r){r.preventDefault()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=Qt({type:t,selectors:[["","appNoContextMenu",""]],hostBindings:function(i,o){i&1&&Ve("contextmenu",function(s){return o.onRightClick(s)})}});let e=t;return e})();function ePe(e,t){if(e&1){let n=ro();z(0,"input",12),Ve("change",function(){hi(n);let i=Et().$implicit,o=Et();return mi(o.changeState.emit(i))}),H()}if(e&2){let n=Et().$implicit;he("checked",n.IsCompletedToday)}}function tPe(e,t){if(e&1){let n=ro();z(0,"button",13),Ve("click",function(){hi(n);let i=Et().$implicit,o=Et();return mi(o.changeState.emit(i))})("contextmenu",function(){hi(n);let i=Et().$implicit,o=Et();return mi(o.decrementState.emit(i))}),T(1),H()}if(e&2){let n=Et().$implicit,r;R(),Me(" ",(r=n==null?null:n.TimesCompletedToday)!==null&&r!==void 0?r:0," ")}}function nPe(e,t){if(e&1&&(E1(0),z(1,"p",14),T(2),H(),D1()),e&2){let n=Et().$implicit;R(2),Me(" ",n.Description," ")}}function rPe(e,t){if(e&1&&(z(0,"tr")(1,"td"),St(2,ePe,1,1,"input",7)(3,tPe,2,1),H(),z(4,"td")(5,"a",8),T(6),H()(),z(7,"td",1),St(8,nPe,3,1,"ng-container",9),H(),z(9,"td",2),Mn(10,"fa-icon",10),H(),z(11,"td")(12,"a",11),T(13,"View"),H()()()),e&2){let n=t.$implicit,r=Et(),i=il(19);R(2),OB(2,!n.IsQuantifiable||n.IsCompletedToday?2:3),R(3),he("routerLink",n.ViewUrl),R(),io(n.Name),R(2),he("ngIf",n.Description)("ngIfElse",i),R(2),he("icon",n.AntiHabit?r.faCheck:r.faXmark),R(2),he("routerLink",n.ViewUrl)}}function iPe(e,t){}function oPe(e,t){}function aPe(e,t){e&1&&(z(0,"i"),T(1,"No description"),H())}var PR=(()=>{let t=class t{constructor(){this.faCheck=Yg,this.faXmark=Wg,this.models=[],this.changeState=new Wt,this.decrementState=new Wt}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-habits-table"]],inputs:{models:"models"},outputs:{changeState:"changeState",decrementState:"decrementState"},decls:20,vars:1,consts:[[1,"uk-table","uk-table-striped","uk-table-middle"],[1,"hide-in-mobile"],[1,"centered"],[4,"ngFor","ngForOf"],["quantifiableAction",""],["booleanAction",""],["defaultDescription",""],["type","checkbox","class","uk-checkbox",3,"checked"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[4,"ngIf","ngIfElse"],[3,"icon"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],["type","checkbox",1,"uk-checkbox",3,"checked","change"],["appNoContextMenu","",1,"uk-button","uk-button-default","increment-button",3,"click","contextmenu"],[1,"description"]],template:function(i,o){i&1&&(z(0,"table",0)(1,"thead")(2,"tr"),Mn(3,"th"),z(4,"th"),T(5,"Name"),H(),z(6,"th",1),T(7,"Description"),H(),z(8,"th",2),T(9,"Anti"),H(),z(10,"th"),T(11,"Action"),H()()(),z(12,"tbody"),St(13,rPe,14,7,"tr",3),H()(),St(14,iPe,0,0,"ng-template",null,4,$s)(16,oPe,0,0,"ng-template",null,5,$s)(18,aPe,2,0,"ng-template",null,6,$s)),i&2&&(R(13),he("ngForOf",o.models))},dependencies:[xi,z1,hn,zg,OR],styles:["p.description[_ngcontent-%COMP%]{text-wrap:nowrap;padding-right:10rem;width:28rem;overflow:hidden}.increment-button[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:center;align-items:center;padding:0rem;height:1.6rem;width:1.6rem;border:1px solid #999}.centered[_ngcontent-%COMP%]{display:flex;justify-content:center}"]});let e=t;return e})();function cPe(e,t){if(e&1){let n=ro();z(0,"section")(1,"h2"),T(2,"Completed Habits"),H(),z(3,"app-habits-table",4),Ve("changeState",function(i){hi(n);let o=Et();return mi(o.uncompleteHabit(i))}),H()()}if(e&2){let n=Et();R(3),he("models",n.completedHabits)}}var $R=(()=>{let t=class t{constructor(r){this.api=r,this.habits=[]}get inCompleteHabits(){return this.habits.filter(r=>!this.isCompletedToday(r))}get completedHabits(){return this.habits.filter(r=>!r.AntiHabit&&this.isCompletedToday(r))}get failedAntiHabits(){return this.habits.filter(r=>r.AntiHabit&&this.isCompletedToday(r))}ngOnInit(){this.api.getHabits().pipe(xe(1)).subscribe(r=>{this.habits=r.data.map(i=>new Mi(i))})}completeHabit(r){r.CompletedDates?.length||(r.CompletedDates=[]),r.CompletedDates.push(new Date().toLocaleDateString()),this.api.updateHabit(r).pipe(xe(1)).subscribe(i=>{r=new Mi(i.data)})}uncompleteHabit(r){let i=new Date().toLocaleDateString(),o=r.CompletedDates.findIndex(a=>{let s=new Date(a).toLocaleDateString();return i===s});r.CompletedDates.splice(o,1),this.api.updateHabit(r).pipe(xe(1)).subscribe(a=>{r=new Mi(a.data)})}isCompletedToday(r){return r.IsCompletedToday}};t.\u0275fac=function(i){return new(i||t)(q(Po))},t.\u0275cmp=Le({type:t,selectors:[["app-list-page"]],decls:10,vars:2,consts:[[1,"list-header"],["routerLink","/habits/new",1,"uk-button","uk-button-primary"],[3,"models","changeState","decrementState"],[4,"ngIf"],[3,"models","changeState"]],template:function(i,o){i&1&&(z(0,"div",0)(1,"h1"),T(2,"Habits"),H(),z(3,"nav")(4,"a",1),T(5,"New Habit"),H()()(),z(6,"main")(7,"section")(8,"app-habits-table",2),Ve("changeState",function(s){return o.completeHabit(s)})("decrementState",function(s){return o.uncompleteHabit(s)}),H()(),St(9,cPe,4,1,"section",3),H()),i&2&&(R(8),he("models",o.inCompleteHabits),R(),he("ngIf",o.completedHabits.length>0))},dependencies:[z1,hn,PR]});let e=t;return e})();function lPe(e,t){if(e&1&&(E1(0),z(1,"option",16),T(2),H(),D1()),e&2){let n=t.$implicit;R(),he("value",n.Id),R(),io(n.Name)}}function uPe(e,t){if(e&1){let n=ro();z(0,"div",17)(1,"label",18),T(2," Target Value "),z(3,"input",19),st("ngModelChange",function(i){hi(n);let o=Et();return ft(o.model.TargetValue,i)||(o.model.TargetValue=i),mi(i)}),H()()()}if(e&2){let n=Et();R(3),at("ngModel",n.model.TargetValue)}}var BR=(()=>{let t=class t{constructor(r,i,o){this.router=r,this.api=i,this.goalApi=o,this.model={CreatedAt:new Date().toLocaleDateString()},this.goals$=new Bn([])}ngOnInit(){this.goalApi.listGoals().pipe(xe(1)).subscribe(r=>this.goals$.next(r.data.map(i=>new qn(i))))}submitForm(){let r=new Mi(this.model);this.api.createHabit(r).pipe(xe(1)).subscribe(()=>this.router.navigateByUrl("/"))}};t.\u0275fac=function(i){return new(i||t)(q(Dt),q(Po),q(tr))},t.\u0275cmp=Le({type:t,selectors:[["app-new-page"]],decls:26,vars:9,consts:[["action",""],["ngForm",""],["for","new-habit-input",1,"uk-form-label"],["id","new-habit-input","name","new-habit-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-habit-description",1,"uk-form-label"],["id","new-habit-description","name","new-habit-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","associated-goal",1,"uk-form-label"],["name","associated-goal","id","associated-goal",1,"uk-input",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["id","boolean-selectors"],["for","anti-habit",1,"uk-form-label"],["id","anti-habit","name","anti-habit","type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange"],["for","quantifiable-habit",1,"uk-form-label"],["id","quantifiable-habit","name","quantifiable-habit","type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange"],["class","uk-form-label target-value",4,"ngIf"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"],[3,"value"],[1,"uk-form-label","target-value"],["for","target-value"],["name","target-value","type","number","placeholder","eg. 5 (km run)",1,"uk-input",3,"ngModel","ngModelChange"]],template:function(i,o){i&1&&(z(0,"h1"),T(1,"Add New Habit"),H(),z(2,"form",0,1)(4,"label",2),T(5,"Habit Name"),H(),z(6,"input",3),st("ngModelChange",function(s){return ft(o.model.Name,s)||(o.model.Name=s),s}),H(),z(7,"label",4),T(8," Habit Description "),H(),z(9,"textarea",5),st("ngModelChange",function(s){return ft(o.model.Description,s)||(o.model.Description=s),s}),H(),z(10,"label",6),T(11,"Associated Goal"),H(),z(12,"select",7),st("ngModelChange",function(s){return ft(o.model.Goal,s)||(o.model.Goal=s),s}),St(13,lPe,3,2,"ng-container",8),vi(14,"async"),H(),z(15,"div",9)(16,"label",10)(17,"input",11),st("ngModelChange",function(s){return ft(o.model.AntiHabit,s)||(o.model.AntiHabit=s),s}),H(),T(18," Anti Habit "),H(),z(19,"label",12)(20,"input",13),st("ngModelChange",function(s){return ft(o.model.IsQuantifiable,s)||(o.model.IsQuantifiable=s),s}),H(),T(21," Quantifiable "),H()(),St(22,uPe,4,1,"div",14),z(23,"div")(24,"button",15),Ve("click",function(){return o.submitForm()}),T(25," Add New Habit "),H()()()),i&2&&(R(6),at("ngModel",o.model.Name),R(3),at("ngModel",o.model.Description),R(3),at("ngModel",o.model.Goal),R(),he("ngForOf",yi(14,7,o.goals$)),R(4),at("ngModel",o.model.AntiHabit),R(3),at("ngModel",o.model.IsQuantifiable),R(2),he("ngIf",o.model.IsQuantifiable))},dependencies:[xi,z1,bi,V6,N6,er,YD,Ys,A6,An,Ci,wn,Qr,G9],styles:["#boolean-selectors[_ngcontent-%COMP%]{margin-top:.5rem;margin-right:.5rem}#boolean-selectors[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:1rem}.target-value[_ngcontent-%COMP%]{margin-top:1rem}"]});let e=t;return e})();var UR=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-schedule-page"]],decls:2,vars:0,template:function(i,o){i&1&&(z(0,"h1"),T(1,"Schedule"),H())},encapsulation:2});let e=t;return e})();var g2=(()=>{let t=class t extends Oo{constructor(r){super(),this.http=r}getTodaysRemainingTasks(){throw new Error("Not implemented")}getTasks(){if(Tt.production){let r=Zt("/tasks");return this.http.get(r)}return console.debug("/tasks"),se({data:[Xi(),Xi(),Xi(),Xi(),Xi()],message:"success"})}getTask(r){if(Tt.production){let i=Zt(`/tasks/${r}`);return this.http.get(i)}return console.debug(r),se({data:Xi(),message:"success"})}createTask(r){if(Tt.production){let i=Zt("/tasks");return this.http.post(i,r)}return console.debug(r),se({data:Xi(),message:"success"})}updateTask(r){if(Tt.production){let i=Zt(`/tasks/${r.Id}`);return this.http.put(i,r)}return console.debug(r),se({data:Xi(),message:"success"})}deleteTask(r){if(Tt.production){let i=Zt(`/tasks/${r}`);return this.http.delete(i)}return console.debug(r),se(void 0)}};t.\u0275fac=function(i){return new(i||t)(ve(Ws))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var jR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(xe(1)).subscribe(i=>{this.model=new Ki(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteTask(this.model?.Id).pipe(xe(1)).subscribe(()=>this.router.navigateByUrl("/tasks"))}};t.\u0275fac=function(i){return new(i||t)(q(g2),q(kt),q(Dt))},t.\u0275cmp=Le({type:t,selectors:[["app-delete-task-page"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"p"),T(3,` Deleting this model will make it unrecoverable.
`),H(),z(4,"button",0),Ve("click",function(){return o.deleteModel()}),T(5),H()),i&2&&(R(),Me("Delete ",o.model==null?null:o.model.Name,"?"),R(4),Me(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();function fPe(e,t){if(e&1&&(E1(0),z(1,"p",10),T(2),H(),D1()),e&2){let n=Et().$implicit;R(2),Me(" ",n.Description," ")}}function dPe(e,t){if(e&1&&(E1(0),T(1),vi(2,"date"),D1()),e&2){let n=Et().$implicit;R(),Me(" ",yi(2,1,n.CompleteBy)," ")}}var pPe=e=>({"overdue-task":e});function hPe(e,t){if(e&1){let n=ro();z(0,"tr",5)(1,"td")(2,"input",6),st("ngModelChange",function(i){let a=hi(n).$implicit;return ft(a.Completed,i)||(a.Completed=i),mi(i)}),Ve("change",function(){let o=hi(n).$implicit,a=Et();return mi(a.changeState.emit(o))}),H()(),z(3,"td")(4,"a",7),T(5),H()(),z(6,"td",1),St(7,fPe,3,1,"ng-container",8),H(),z(8,"td",1),T(9),H(),z(10,"td"),St(11,dPe,3,3,"ng-container",8),H(),z(12,"td")(13,"a",9),T(14,"View"),H()()()}if(e&2){let n=t.$implicit;Et();let r=il(17),i=il(19);he("ngClass",WB(10,pPe,n.isOverdue)),R(2),at("ngModel",n.Completed),R(2),he("routerLink",n.ViewUrl),R(),Me(" ",n.Name," "),R(2),he("ngIf",n.Description)("ngIfElse",r),R(2),io(n.ImportanceHuman),R(2),he("ngIf",n.CompleteBy)("ngIfElse",i),R(2),he("routerLink",n.ViewUrl)}}function mPe(e,t){e&1&&(z(0,"i"),T(1,"No description"),H())}function gPe(e,t){e&1&&(z(0,"i"),T(1,"No date set"),H())}var qR=(()=>{let t=class t{constructor(){this.models=[],this.changeState=new Wt}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-tasks-table"]],inputs:{models:"models"},outputs:{changeState:"changeState"},decls:20,vars:1,consts:[[1,"uk-table","uk-table-striped"],[1,"hide-in-mobile"],[3,"ngClass",4,"ngFor","ngForOf"],["defaultDescription",""],["defaultCompleteBy",""],[3,"ngClass"],["type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange","change"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[4,"ngIf","ngIfElse"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],[1,"description"]],template:function(i,o){i&1&&(z(0,"table",0)(1,"thead")(2,"tr"),Mn(3,"th"),z(4,"th"),T(5,"Name"),H(),z(6,"th",1),T(7,"Description"),H(),z(8,"th",1),T(9,"Importance"),H(),z(10,"th"),T(11,"Due Date"),H(),z(12,"th"),T(13,"Action"),H()()(),z(14,"tbody"),St(15,hPe,15,12,"tr",2),H()(),St(16,mPe,2,0,"ng-template",null,3,$s)(18,gPe,2,0,"ng-template",null,4,$s)),i&2&&(R(15),he("ngForOf",o.models))},dependencies:[yU,xi,z1,hn,Ys,An,wn,Io]});let e=t;return e})();function yPe(e,t){if(e&1){let n=ro();z(0,"section")(1,"h2"),T(2,"Completed Tasks"),H(),z(3,"app-tasks-table",3),Ve("changeState",function(i){hi(n);let o=Et();return mi(o.updateTask(i))}),H()()}if(e&2){let n=Et();R(3),he("models",n.completedTasks)}}var GR=(()=>{let t=class t{constructor(r){this.api=r,this.tasks=[]}get completedTasks(){return this.tasks.filter(r=>r.Completed)}get incompleteTasks(){return this.tasks.filter(r=>!r.Completed)}ngOnInit(){this.api.getTasks().pipe(xe(1)).subscribe(r=>{this.tasks=r.data.map(i=>new Ki(i))})}updateTask(r){this.api.updateTask(r).pipe(xe(1)).subscribe(i=>{r=new Ki(i.data)})}};t.\u0275fac=function(i){return new(i||t)(q(g2))},t.\u0275cmp=Le({type:t,selectors:[["app-tasks-page"]],decls:9,vars:2,consts:[[1,"list-header"],["routerLink","/tasks/new",1,"uk-button","uk-button-primary"],[1,"incompleteTasks.length",">","0"],[3,"models","changeState"],[4,"ngIf"]],template:function(i,o){i&1&&(z(0,"div",0)(1,"h1"),T(2,"Tasks"),H(),z(3,"nav")(4,"a",1),T(5,"New Task"),H()()(),z(6,"section",2)(7,"app-tasks-table",3),Ve("changeState",function(s){return o.updateTask(s)}),H()(),St(8,yPe,4,1,"section",4)),i&2&&(R(7),he("models",o.incompleteTasks),R(),he("ngIf",o.completedTasks.length>0))},dependencies:[z1,hn,qR],styles:[".overdue-task[_ngcontent-%COMP%]{color:#f5222d}"]});let e=t;return e})();function xPe(e,t){if(e&1&&(E1(0),z(1,"option",19),T(2),H(),D1()),e&2){let n=t.$implicit;R(),he("value",n.Id),R(),io(n.Name)}}var WR=(()=>{let t=class t{constructor(r,i,o){this.router=r,this.api=i,this.goalApi=o,this.model={Importance:1},this.goals$=new Bn([])}ngOnInit(){this.goalApi.listGoals().pipe(xe(1)).subscribe(r=>this.goals$.next(r.data.map(i=>new qn(i))))}submitForm(){let r=new Ki(this.model);r.Completed=!1,this.api.createTask(r).pipe(xe(1)).subscribe(()=>this.router.navigateByUrl("/tasks"))}updateImportance(r){let i=r.target.value;this.model.Importance=parseInt(i,10)}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString()}};t.\u0275fac=function(i){return new(i||t)(q(Dt),q(g2),q(tr))},t.\u0275cmp=Le({type:t,selectors:[["app-new-task-page"]],decls:33,vars:6,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","importance-input",1,"uk-form-label"],["id","importance-input","name","importance-input",1,"uk-input",3,"change"],["value","1","selected",""],["value","2"],["value","3"],["value","4"],["value","5"],["for","associated-goal",1,"uk-form-label"],["name","associated-goal","id","associated-goal",1,"uk-input",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"],[3,"value"]],template:function(i,o){i&1&&(z(0,"h1"),T(1,"New Task"),H(),z(2,"form",0,1)(4,"label",2),T(5,"Task Name"),H(),z(6,"input",3),st("ngModelChange",function(s){return ft(o.model.Name,s)||(o.model.Name=s),s}),H(),z(7,"label",4),T(8," Task Description "),H(),z(9,"textarea",5),st("ngModelChange",function(s){return ft(o.model.Description,s)||(o.model.Description=s),s}),H(),z(10,"label",6),T(11," Importance (low number = low importance; high number = high importance) "),H(),z(12,"select",7),Ve("change",function(s){return o.updateImportance(s)}),z(13,"option",8),T(14,"Low"),H(),z(15,"option",9),T(16,"Low-Medium"),H(),z(17,"option",10),T(18,"Medium"),H(),z(19,"option",11),T(20,"Medium-High"),H(),z(21,"option",12),T(22,"High"),H()(),z(23,"label",13),T(24,"Associated Goal"),H(),z(25,"select",14),st("ngModelChange",function(s){return ft(o.model.Goal,s)||(o.model.Goal=s),s}),St(26,xPe,3,2,"ng-container",15),vi(27,"async"),H(),z(28,"label",16),T(29,"Complete By"),H(),z(30,"input",17),Ve("change",function(s){return o.updateCompleteBy(s)}),H(),z(31,"button",18),Ve("click",function(){return o.submitForm()}),T(32," Add New Task "),H()()),i&2&&(R(6),at("ngModel",o.model.Name),R(3),at("ngModel",o.model.Description),R(16),at("ngModel",o.model.Goal),R(),he("ngForOf",yi(27,4,o.goals$)))},dependencies:[xi,bi,V6,N6,er,A6,An,Ci,wn,Qr,G9],encapsulation:2});let e=t;return e})();var YR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.goalApi=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(xe(1)).subscribe(i=>{this.model=new Ki(i.data),this.goalApi.getGoal(this.model?.Goal).pipe(xe(1)).subscribe(o=>{this.goalModel=new qn(o.data)})})}};t.\u0275fac=function(i){return new(i||t)(q(g2),q(kt),q(tr))},t.\u0275cmp=Le({type:t,selectors:[["app-task-page"]],decls:17,vars:13,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right",3,"routerLink"],[1,"uk-button-danger","uk-button",3,"routerLink"],[3,"routerLink"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"button",0),T(3),H(),z(4,"button",1),T(5),H(),z(6,"p"),T(7),H(),z(8,"p"),T(9),H(),z(10,"p"),T(11),vi(12,"date"),H(),z(13,"p"),T(14," Associated Goal: "),z(15,"a",2),T(16),H()()),i&2&&(R(),t5(" Task: ",o.model==null?null:o.model.Name," (",o.model!=null&&o.model.Completed?"Completed":"Incomplete",`)
`),R(),he("routerLink",o.model==null?null:o.model.EditUrl),R(),Me(" Edit: ",o.model==null?null:o.model.Name,`
`),R(),he("routerLink",o.model==null?null:o.model.DeleteUrl),R(),Me(" Delete: ",o.model==null?null:o.model.Name,`
`),R(2),Me(" ",o.model==null?null:o.model.Description,`
`),R(2),Me("Importance: ",o.model==null?null:o.model.ImportanceHuman,""),R(2),Me("Complete By: ",yi(12,11,o.model==null?null:o.model.CompleteBy),""),R(4),he("routerLink",o.goalModel==null?null:o.goalModel.ViewUrl),R(),Me(" ",o.goalModel==null?null:o.goalModel.Name," "))},dependencies:[hn,Io],encapsulation:2});let e=t;return e})();var v2=class extends Ra{constructor(t){super(t)}get ViewUrl(){return["/logbook",this.Id]}get EditUrl(){return["/logbook",this.Id,"edit"]}get DeleteUrl(){return["/logbook",this.Id,"delete"]}};function e3(){return{Id:"1",Name:"Fake Logbook Entry",Content:"This is a fake model used in development. Change production = true in the environment.ts to enable communication with the api"}}var Hs=(()=>{let t=class t extends Oo{constructor(r){super(),this.http=r}getLogbooks(){if(Tt.production){let r=Zt("/logbooks");return this.http.get(r)}return console.debug("/logbook"),se({data:[e3(),e3(),e3(),e3(),e3()],message:"success"})}getLogbook(r){if(Tt.production){let i=Zt(`/logbooks/${r}`);return this.http.get(i)}return console.debug(r),se({data:e3(),message:"success"})}createLogbook(r){if(Tt.production){let i=Zt("/logbooks");return this.http.post(i,r)}return console.debug(r),se({data:e3(),message:"success"})}updateLogbook(r){if(Tt.production){let i=Zt(`/logbooks/${r.Id}`);return this.http.put(i,r)}return console.debug(r),se({data:e3(),message:"success"})}deleteLogbook(r){if(Tt.production){let i=Zt(`/logbooks/${r}`);return this.http.delete(i)}return console.debug(r),se(void 0)}};t.\u0275fac=function(i){return new(i||t)(ve(Ws))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function CPe(e,t){if(e&1&&(z(0,"tr")(1,"td")(2,"a",4),T(3),H()(),z(4,"td"),T(5),vi(6,"date"),H(),z(7,"td")(8,"a",5),T(9," View "),H()()()),e&2){let n=t.$implicit;R(2),he("routerLink",n.ViewUrl),R(),Me(" ",n.Name," "),R(2),io(yi(6,4,n.CreatedAt)),R(3),he("routerLink",n.ViewUrl)}}var XR=(()=>{let t=class t{constructor(r){this.api=r,this.logbooks=[]}ngOnInit(){this.api.getLogbooks().pipe(xe(1)).subscribe(r=>{this.logbooks=r.data.map(i=>new v2(i))})}};t.\u0275fac=function(i){return new(i||t)(q(Hs))},t.\u0275cmp=Le({type:t,selectors:[["app-list"]],decls:19,vars:1,consts:[[1,"list-header"],["routerLink","/logbook/new",1,"uk-button","uk-button-primary"],[1,"uk-table"],[4,"ngFor","ngForOf"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"]],template:function(i,o){i&1&&(z(0,"div",0)(1,"h1"),T(2,"Logbook"),H(),z(3,"section")(4,"nav")(5,"a",1),T(6,"New Entry"),H()()()(),z(7,"section")(8,"table",2)(9,"thead")(10,"tr")(11,"th"),T(12,"Name"),H(),z(13,"th"),T(14,"Created"),H(),z(15,"th"),T(16,"Action"),H()()(),z(17,"tbody"),St(18,CPe,10,6,"tr",3),H()()()),i&2&&(R(18),he("ngForOf",o.logbooks))},dependencies:[xi,hn,Io]});let e=t;return e})();var QR=(()=>{let t=class t{constructor(r,i){this.router=r,this.api=i,this.model={CreatedAt:new Date().toLocaleDateString()}}submitForm(){let r=new v2(this.model);this.api.createLogbook(r).subscribe(()=>this.router.navigateByUrl("/logbook"))}};t.\u0275fac=function(i){return new(i||t)(q(Dt),q(Hs))},t.\u0275cmp=Le({type:t,selectors:[["app-new"]],decls:12,vars:2,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","20",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1,"New Logbook"),H(),z(2,"form",0,1)(4,"label",2),T(5,"Logbook Name"),H(),z(6,"input",3),st("ngModelChange",function(s){return ft(o.model.Name,s)||(o.model.Name=s),s}),H(),z(7,"label",4),T(8," Content "),H(),z(9,"textarea",5),st("ngModelChange",function(s){return ft(o.model.Content,s)||(o.model.Content=s),s}),H(),z(10,"button",6),Ve("click",function(){return o.submitForm()}),T(11," Add Logbook Entry "),H()()),i&2&&(R(6),at("ngModel",o.model.Name),R(3),at("ngModel",o.model.Content))},dependencies:[bi,er,An,Ci,wn,Qr]});let e=t;return e})();var KR=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getLogbook(r).pipe(xe(1)).subscribe(i=>{this.model=new v2(i.data)})}};t.\u0275fac=function(i){return new(i||t)(q(Hs),q(kt))},t.\u0275cmp=Le({type:t,selectors:[["app-show"]],decls:11,vars:9,consts:[[1,"uk-button","uk-button-secondary","uk-margin-small-right",3,"routerLink"],[1,"uk-button","uk-button-danger",3,"routerLink"],[1,"uk-text-default"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"button",0),T(3),H(),z(4,"button",1),T(5),H(),z(6,"div",2),T(7),vi(8,"date"),H(),z(9,"pre"),T(10),H()),i&2&&(R(),Me("Task: ",o.model==null?null:o.model.Name,""),R(),he("routerLink",o.model==null?null:o.model.EditUrl),R(),Me(" Edit: ",o.model==null?null:o.model.Name,`
`),R(),he("routerLink",o.model==null?null:o.model.DeleteUrl),R(),Me(" Delete: ",o.model==null?null:o.model.Name,`
`),R(2),Me("Created: ",yi(8,7,o.model==null?null:o.model.CreatedAt),""),R(3),Me("    ",o.model==null?null:o.model.Content,`
`))},dependencies:[hn,Io]});let e=t;return e})();var ZR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getLogbook(r).pipe(xe(1)).subscribe(i=>{this.model=new v2(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteLogbook(this.model?.Id).pipe(xe(1)).subscribe(()=>this.router.navigateByUrl("/logbook"))}};t.\u0275fac=function(i){return new(i||t)(q(Hs),q(kt),q(Dt))},t.\u0275cmp=Le({type:t,selectors:[["app-delete"]],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"p"),T(3,` Deleting this model will make it unrecoverable.
`),H(),z(4,"button",0),Ve("click",function(){return o.deleteModel()}),T(5),H()),i&2&&(R(),Me("Delete ",o.model==null?null:o.model.Name,"?"),R(4),Me(" Delete ",o.model==null?null:o.model.Name,`
`))}});let e=t;return e})();var JR=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(xe(1)).subscribe(i=>{this.model=i.data})}submitForm(){let r=new qn(this.model);this.api.updateGoal(r).pipe(xe(1)).subscribe(()=>this.router.navigateByUrl("/goals"))}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString()}};t.\u0275fac=function(i){return new(i||t)(q(tr),q(kt),q(Dt))},t.\u0275cmp=Le({type:t,selectors:[["app-update"]],decls:15,vars:4,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"value","change"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"form",0,1)(4,"label",2),T(5,"Goal Name"),H(),z(6,"input",3),st("ngModelChange",function(s){return ft(o.model.Name,s)||(o.model.Name=s),s}),H(),z(7,"label",4),T(8," Goal Description "),H(),z(9,"textarea",5),st("ngModelChange",function(s){return ft(o.model.Description,s)||(o.model.Description=s),s}),H(),z(10,"label",6),T(11,"Complete By"),H(),z(12,"input",7),Ve("change",function(s){return o.updateCompleteBy(s)}),H(),z(13,"button",8),Ve("click",function(){return o.submitForm()}),T(14," Update Goal "),H()()),i&2&&(R(),Me("Edit: ",o.model.Name,""),R(5),at("ngModel",o.model.Name),R(3),at("ngModel",o.model.Description),R(3),he("value",o.model.CompleteBy))},dependencies:[bi,er,An,Ci,wn,Qr]});let e=t;return e})();var eO=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(xe(1)).subscribe(i=>{this.model=i.data})}submitForm(){let r=new Mi(this.model);this.api.updateHabit(r).pipe(xe(1)).subscribe(()=>this.router.navigateByUrl("/"))}};t.\u0275fac=function(i){return new(i||t)(q(Po),q(kt),q(Dt))},t.\u0275cmp=Le({type:t,selectors:[["app-update"]],decls:16,vars:4,consts:[["action",""],["ngForm",""],["for","new-habit-input",1,"uk-form-label"],["id","new-habit-input","name","new-habit-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-habit-description",1,"uk-form-label"],["id","new-habit-description","name","new-habit-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","checkbox","name","anti-habit","id","anti-habit",1,"uk-checkbox",3,"ngModel","ngModelChange"],["for","anti-habit",1,"uk-form-label"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"form",0,1)(4,"label",2),T(5,"Habit Name"),H(),z(6,"input",3),st("ngModelChange",function(s){return ft(o.model.Name,s)||(o.model.Name=s),s}),H(),z(7,"label",4),T(8," Habit Description "),H(),z(9,"textarea",5),st("ngModelChange",function(s){return ft(o.model.Description,s)||(o.model.Description=s),s}),H(),z(10,"input",6),st("ngModelChange",function(s){return ft(o.model.AntiHabit,s)||(o.model.AntiHabit=s),s}),H(),z(11,"label",7),T(12,"Anti Habit"),H(),z(13,"div")(14,"button",8),Ve("click",function(){return o.submitForm()}),T(15," Update Habit "),H()()()),i&2&&(R(),Me("Edit: ",o.model.Name,""),R(5),at("ngModel",o.model.Name),R(3),at("ngModel",o.model.Description),R(),at("ngModel",o.model.AntiHabit))},dependencies:[bi,er,Ys,An,Ci,wn,Qr]});let e=t;return e})();var tO=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(xe(1)).subscribe(i=>{this.model=i.data})}submitForm(){let r=new Ki(this.model);this.api.updateTask(r).pipe(xe(1)).subscribe(()=>this.router.navigate(r.ViewUrl))}updateImportance(r){let i=r.target.value;this.model.Importance=parseInt(i,10)}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString()}};t.\u0275fac=function(i){return new(i||t)(q(g2),q(kt),q(Dt))},t.\u0275cmp=Le({type:t,selectors:[["app-update"]],decls:28,vars:3,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["for","importance-input",1,"uk-form-label"],["id","importance-input","name","importance-input",1,"uk-input",3,"change"],["value","1","selected",""],["value","2"],["value","3"],["value","4"],["value","5"],["for","complete-by-input",1,"uk-form-label"],["type","date","name","complete-by-input","id","complete-by-input",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"form",0,1)(4,"label",2),T(5,"Task Name"),H(),z(6,"input",3),st("ngModelChange",function(s){return ft(o.model.Name,s)||(o.model.Name=s),s}),H(),z(7,"label",4),T(8," Task Description "),H(),z(9,"textarea",5),st("ngModelChange",function(s){return ft(o.model.Description,s)||(o.model.Description=s),s}),H(),z(10,"label",6),T(11," Importance (low number = low importance; high number = high importance) "),H(),z(12,"select",7),Ve("change",function(s){return o.updateImportance(s)}),z(13,"option",8),T(14,"Low"),H(),z(15,"option",9),T(16,"Low-Medium"),H(),z(17,"option",10),T(18,"Medium"),H(),z(19,"option",11),T(20,"Medium-High"),H(),z(21,"option",12),T(22,"High"),H()(),z(23,"label",13),T(24,"Complete By"),H(),z(25,"input",14),Ve("change",function(s){return o.updateCompleteBy(s)}),H(),z(26,"button",15),Ve("click",function(){return o.submitForm()}),T(27," Update Task "),H()()),i&2&&(R(),Me("Edit: ",o.model.Name,""),R(5),at("ngModel",o.model.Name),R(3),at("ngModel",o.model.Description))},dependencies:[bi,V6,N6,er,An,Ci,wn,Qr]});let e=t;return e})();var nO=(()=>{let t=class t{constructor(r){this.configService=r,this.customServerUrl=this.configService.getCustomServerUrl()??"",this.formFeedback=""}saveCustomServerUrl(){this.customServerUrl?(this.configService.setCustomServerUrl(this.customServerUrl),this.formFeedback="Custom server URL saved!"):this.formFeedback="Please enter a valid server URL."}clearCustomServerUrl(){this.customServerUrl="",this.configService.clearCustomServerUrl(),this.formFeedback="Custom server URL cleared!"}};t.\u0275fac=function(i){return new(i||t)(q(W6))},t.\u0275cmp=Le({type:t,selectors:[["app-configure"]],decls:28,vars:2,consts:[["href","https://github.com/hudson-newey/habit-tracker/tree/main/server"],["href","https://github.com/hudson-newey/habit-tracker"],["type","text","placeholder","Server URL",1,"uk-input",3,"ngModel","ngModelChange"],[1,"action-buttons"],["id","save-server-button",1,"uk-button","uk-button-primary",3,"click"],["id","remove-server-button",1,"uk-button","uk-button-danger",3,"click"],[1,"uk-text-secondary"]],template:function(i,o){i&1&&(z(0,"h1"),T(1,"Configure"),H(),z(2,"p"),T(3," This web app is intended to be used with the GoLang API found "),z(4,"a",0),T(5,"on GitHub"),H(),T(6,`.
`),H(),z(7,"p"),T(8,` It is possible to use this app without the API, but you will not be able to sync your Todo items and Habits between devices.
`),H(),z(9,"p"),T(10," You are free to use this GitHub pages hosted version of the application with your own hosted server (or without) by inputting the custom URL below, or you can host your own instance of the server, client and mobile application using the code available "),z(11,"a",1),T(12,"here"),H(),T(13,`.
`),H(),z(14,"section")(15,"h2"),T(16,"Custom Server URL"),H(),z(17,"p"),T(18," If you are using a custom server, please input the URL below. If you are using the habit tracker without device syncing, you can leave this blank. "),H(),z(19,"input",2),st("ngModelChange",function(s){return ft(o.customServerUrl,s)||(o.customServerUrl=s),s}),H(),z(20,"div",3)(21,"button",4),Ve("click",function(){return o.saveCustomServerUrl()}),T(22," Save "),H(),z(23,"button",5),Ve("click",function(){return o.clearCustomServerUrl()}),T(24," Remove Server "),H()(),Mn(25,"div"),z(26,"p",6),T(27),H()()),i&2&&(R(19),at("ngModel",o.customServerUrl),R(8),io(o.formFeedback))},dependencies:[er,An,wn],styles:[".action-buttons[_ngcontent-%COMP%]{margin-top:.5rem}.action-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:.5rem}"]});let e=t;return e})();var rO=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getLogbook(r).pipe(xe(1)).subscribe(i=>{this.model=i.data})}submitForm(){let r=new v2(this.model);this.api.updateLogbook(r).pipe(xe(1)).subscribe(()=>{this.router.navigate(r.ViewUrl)})}};t.\u0275fac=function(i){return new(i||t)(q(Hs),q(kt),q(Dt))},t.\u0275cmp=Le({type:t,selectors:[["app-edit"]],decls:12,vars:3,consts:[["action",""],["ngForm",""],["for","logbook-name-input",1,"uk-form-label"],["id","logbook-name-input","name","logbook-name-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","logbook-content-input",1,"uk-form-label"],["id","logbook-content-input","name","logbook-content-input","rows","20",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(z(0,"h1"),T(1),H(),z(2,"form",0,1)(4,"label",2),T(5,"Logbook Name"),H(),z(6,"input",3),st("ngModelChange",function(s){return ft(o.model.Name,s)||(o.model.Name=s),s}),H(),z(7,"label",4),T(8,"Logbook Content"),H(),z(9,"textarea",5),st("ngModelChange",function(s){return ft(o.model.Content,s)||(o.model.Content=s),s}),H(),z(10,"button",6),Ve("click",function(){return o.submitForm()}),T(11," Update Logbook Entry "),H()()),i&2&&(R(),Me("Edit: ",o.model.Name,""),R(5),at("ngModel",o.model.Name),R(3),at("ngModel",o.model.Content))},dependencies:[bi,er,An,Ci,wn,Qr]});let e=t;return e})();var bPe=[{path:"goals",component:fH},{path:"goals/new",component:dH},{path:"goals/:id",component:uH},{path:"goals/:id/delete",component:lH},{path:"goals/:id/edit",component:JR},{path:"",component:$R},{path:"habits/new",component:BR},{path:"habits/:id",component:RR},{path:"habits/:id/delete",component:pH},{path:"habits/:id/edit",component:eO},{path:"tasks",component:GR},{path:"tasks/new",component:WR},{path:"tasks/:id",component:YR},{path:"tasks/:id/delete",component:jR},{path:"tasks/:id/edit",component:tO},{path:"logbook",component:XR},{path:"logbook/new",component:QR},{path:"logbook/:id",component:KR},{path:"logbook/:id/delete",component:ZR},{path:"logbook/:id/edit",component:rO},{path:"schedule",component:UR},{path:"configure",component:nO}],Yae=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=wr({type:t}),t.\u0275inj=Sr({imports:[cH.forRoot(bPe),cH]});let e=t;return e})();var MPe=()=>["/"],wPe=()=>({exact:!0}),Kh=()=>["uk-active"],iO=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-navbar"]],decls:23,vars:14,consts:[[1,"uk-navbar-container","uk-navbar-transparent"],[1,"uk-container","navbar-container"],[1,"uk-navbar-left"],["routerLinkActive","uk-active",1,"uk-navbar-item","uk-logo",3,"routerLink"],[1,"uk-nav-primary","hide-in-mobile"],[1,"uk-navbar-nav"],[3,"routerLinkActiveOptions","routerLinkActive"],["routerLink","/",1,"uk-link","uk-navbar-item"],[3,"routerLinkActive"],["routerLink","/goals",1,"uk-link","uk-navbar-item"],["routerLink","/tasks",1,"uk-link","uk-navbar-item"],["routerLink","/logbook",1,"uk-link","uk-navbar-item"],[1,"navbar-right","hide-in-mobile"],["routerLink","/configure",1,"uk-link-muted","uk-navbar-item"]],template:function(i,o){i&1&&(z(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"strong",4),T(5,"Goal Tracker"),H()(),z(6,"ul",5)(7,"li",6)(8,"a",7),T(9,"Habits"),H()(),z(10,"li",8)(11,"a",9),T(12,"Goals"),H()(),z(13,"li",8)(14,"a",10),T(15,"Tasks"),H()(),z(16,"li",8)(17,"a",11),T(18,"Logbook"),H()(),z(19,"span",12)(20,"li",8)(21,"a",13),T(22,"Configure Server"),H()()()()()()()),i&2&&(R(3),he("routerLink",_a(7,MPe)),R(4),he("routerLinkActiveOptions",_a(8,wPe))("routerLinkActive",_a(9,Kh)),R(3),he("routerLinkActive",_a(10,Kh)),R(3),he("routerLinkActive",_a(11,Kh)),R(3),he("routerLinkActive",_a(12,Kh)),R(4),he("routerLinkActive",_a(13,Kh)))},dependencies:[hn,eG],styles:[".navbar-right[_ngcontent-%COMP%]{position:absolute;right:5em}"]});let e=t;return e})();var Xae=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Le({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"light-dark"],[1,"main-content"]],template:function(i,o){i&1&&(z(0,"div",0),Mn(1,"app-navbar"),z(2,"div",1),Mn(3,"router-outlet"),H()())},dependencies:[tH,iO],styles:[".main-content[_ngcontent-%COMP%]{position:relative;margin:auto;width:60%;margin-top:2rem}@media screen and (max-width: 768px){.main-content[_ngcontent-%COMP%]{width:calc(100% - 2.4rem);margin-left:1.2rem}}"]});let e=t;return e})();var Hw=(()=>{let t=class t extends Oo{constructor(){super()}applyApiRequest(r){let i=r.url.split("/")[1],o=Number(r.url.split("/")[2]),a=r.body;localStorage.getItem(i)===null&&this.updateTable(i,"[]");let s=this.tableValue(i);if(r.method==="GET"&&o){if(i==="goals"&&r.url.split("/").length>3){let l=r.url.split("/")[3],u=this.tableValue(l).filter(f=>f.Goal===String(o));return console.log(u),u}return s.find(l=>l.Id===o)}if(r.method==="POST"){let l=JSON.parse(JSON.stringify(a));l.Id=this.nextTableId(i),s.push(l),this.updateTable(i,JSON.stringify(s))}if(r.method==="DELETE"){let l=s.findIndex(u=>u.Id===o);s.splice(l,1),this.updateTable(i,JSON.stringify(s))}if(r.method==="PUT"){let l=s.findIndex(u=>u.Id===o);s[l]=a,this.updateTable(i,JSON.stringify(s))}return this.tableValue(i)}tableValue(r){return JSON.parse(localStorage.getItem(r))??[]}nextTableId(r){let i=this.tableValue(r);return i.length===0?1:Math.max(...i.map(o=>o.Id))+1}updateTable(r,i){localStorage.removeItem(r),localStorage.setItem(r,i)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Qae=(()=>{let t=class t{constructor(r,i){this.config=r,this.virtualDb=i}intercept(r,i){if(this.config.isCustomServerUrlSet())return i.handle(r);let o=this.virtualDb.applyApiRequest(r);return se(new D6({status:200,body:{data:o}}))}};t.\u0275fac=function(i){return new(i||t)(ve(W6),ve(Hw))},t.\u0275prov=ue({token:t,factory:t.\u0275fac});let e=t;return e})();var DPe=[Po,tr,g2,W6,Hw];var Kae=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=wr({type:t,bootstrap:[Xae]}),t.\u0275inj=Sr({providers:[{provide:VD,useClass:Qae,multi:!0},...DPe],imports:[W9,PU,Yae,fj,VU,pq]});let e=t;return e})();OU().bootstrapModule(Kae).catch(e=>console.error(e));
