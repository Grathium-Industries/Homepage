var Eae=Object.create;var Rh=Object.defineProperty,Dae=Object.defineProperties,zae=Object.getOwnPropertyDescriptor,Hae=Object.getOwnPropertyDescriptors,Lae=Object.getOwnPropertyNames,Fh=Object.getOwnPropertySymbols,Aae=Object.getPrototypeOf,uw=Object.prototype.hasOwnProperty,pR=Object.prototype.propertyIsEnumerable;var lw=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e);var dR=(e,t,n)=>t in e?Rh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x=(e,t)=>{for(var n in t||={})uw.call(t,n)&&dR(e,n,t[n]);if(Fh)for(var n of Fh(t))pR.call(t,n)&&dR(e,n,t[n]);return e},k=(e,t)=>Dae(e,Hae(t));var x4=e=>typeof e=="symbol"?e:e+"",ie=(e,t)=>{var n={};for(var r in e)uw.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Fh)for(var r of Fh(e))t.indexOf(r)<0&&pR.call(e,r)&&(n[r]=e[r]);return n};var Vae=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),mr=(e,t)=>{for(var n in t)Rh(e,n,{get:t[n],enumerable:!0})},Nae=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Lae(t))!uw.call(e,i)&&i!==n&&Rh(e,i,{get:()=>t[i],enumerable:!(r=zae(t,i))||r.enumerable});return e};var _ae=(e,t,n)=>(n=e!=null?Eae(Aae(e)):{},Nae(t||!e||!e.__esModule?Rh(n,"default",{value:e,enumerable:!0}):n,e));var jt=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{s(n.next(c))}catch(l){i(l)}},a=c=>{try{s(n.throw(c))}catch(l){i(l)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);s((n=n.apply(e,t)).next())}),kae=function(e,t){this[0]=e,this[1]=t};var hR=e=>{var t=e[lw("asyncIterator")],n=!1,r,i={};return t==null?(t=e[lw("iterator")](),r=o=>i[o]=a=>t[o](a)):(t=t.call(e),r=o=>i[o]=a=>{if(n){if(n=!1,o==="throw")throw a;return a}return n=!0,{done:!1,value:new kae(new Promise(s=>{var c=t[o](a);if(!(c instanceof Object))throw TypeError("Object expected");s(c)}),1)}}),i[lw("iterator")]=()=>i,r("next"),"throw"in t?r("throw"):i.throw=o=>{throw o},"return"in t&&r("return"),i};var gG=Vae((aXe,mG)=>{"use strict";var Tde=/("(?:[^\\"]|\\.)*")|[:,]/g;mG.exports=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function a(s,c,l){var u,f,d,p,h,m,g,v,y,C,b,M;if(s&&typeof s.toJSON=="function"&&(s=s.toJSON()),b=JSON.stringify(s,o),b===void 0)return b;if(g=i-c.length-l,b.length<=g&&(y=b.replace(Tde,function(S,w){return w||S+" "}),y.length<=g))return y;if(o!=null&&(s=JSON.parse(b),o=void 0),typeof s=="object"&&s!==null){if(v=c+r,d=[],f=0,Array.isArray(s))for(C="[",u="]",g=s.length;f<g;f++)d.push(a(s[f],v,f===g-1?0:1)||"null");else for(C="{",u="}",m=Object.keys(s),g=m.length;f<g;f++)p=m[f],h=JSON.stringify(p)+": ",M=a(s[p],v,h.length+(f===g-1?0:1)),M!==void 0&&d.push(h+M);if(d.length>0)return[C,r+d.join(`,
`+v),u].join(`
`+c)}return b}(t,"",0)}});var mR=null;var fw=1,dw=Symbol("SIGNAL");function Or(e){let t=mR;return mR=e,t}var gR={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Tae(e){if(!(mw(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===fw)){if(!e.producerMustRecompute(e)&&!pw(e)){e.dirty=!1,e.lastCleanEpoch=fw;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=fw}}function vR(e){return e&&(e.nextProducerIndex=0),Or(e)}function yR(e,t){if(Or(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(mw(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)hw(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function pw(e){Oh(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Tae(n),r!==n.version))return!0}return!1}function xR(e){if(Oh(e),mw(e))for(let t=0;t<e.producerNode.length;t++)hw(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function hw(e,t){if(Iae(e),Oh(e),e.liveConsumerNode.length===1)for(let r=0;r<e.producerNode.length;r++)hw(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Oh(i),i.producerIndexOfThis[r]=t}}function mw(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Oh(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Iae(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Fae(){throw new Error}var Rae=Fae;function CR(e){Rae=e}function Qe(e){return typeof e=="function"}function V0(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ph=V0(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function C4(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var In=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Qe(r))try{r()}catch(o){t=o instanceof Ph?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{bR(o)}catch(a){t=t??[],a instanceof Ph?t=[...t,...a.errors]:t.push(a)}}if(t)throw new Ph(t)}}add(t){var n;if(t&&t!==this)if(this.closed)bR(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&C4(n,t)}remove(t){let{_finalizers:n}=this;n&&C4(n,t),t instanceof e&&t._removeParent(this)}};In.EMPTY=(()=>{let e=new In;return e.closed=!0,e})();var gw=In.EMPTY;function $h(e){return e instanceof In||e&&"closed"in e&&Qe(e.remove)&&Qe(e.add)&&Qe(e.unsubscribe)}function bR(e){Qe(e)?e():e.unsubscribe()}var i2={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var N0={setTimeout(e,t,...n){let{delegate:r}=N0;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=N0;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Bh(e){N0.setTimeout(()=>{let{onUnhandledError:t}=i2;if(t)t(e);else throw e})}function b8(){}var MR=vw("C",void 0,void 0);function wR(e){return vw("E",void 0,e)}function SR(e){return vw("N",e,void 0)}function vw(e,t,n){return{kind:e,value:t,error:n}}var b4=null;function _0(e){if(i2.useDeprecatedSynchronousErrorHandling){let t=!b4;if(t&&(b4={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=b4;if(b4=null,n)throw r}}else e()}function ER(e){i2.useDeprecatedSynchronousErrorHandling&&b4&&(b4.errorThrown=!0,b4.error=e)}var M4=class extends In{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,$h(t)&&t.add(this)):this.destination=$ae}static create(t,n,r){return new k0(t,n,r)}next(t){this.isStopped?xw(SR(t),this):this._next(t)}error(t){this.isStopped?xw(wR(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?xw(MR,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Oae=Function.prototype.bind;function yw(e,t){return Oae.call(e,t)}var Cw=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Uh(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Uh(r)}else Uh(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Uh(n)}}},k0=class extends M4{constructor(t,n,r){super();let i;if(Qe(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&i2.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&yw(t.next,o),error:t.error&&yw(t.error,o),complete:t.complete&&yw(t.complete,o)}):i=t}this.destination=new Cw(i)}};function Uh(e){i2.useDeprecatedSynchronousErrorHandling?ER(e):Bh(e)}function Pae(e){throw e}function xw(e,t){let{onStoppedNotification:n}=i2;n&&N0.setTimeout(()=>n(e,t))}var $ae={closed:!0,next:b8,error:Pae,complete:b8};var T0=typeof Symbol=="function"&&Symbol.observable||"@@observable";function W1(e){return e}function bw(...e){return Mw(e)}function Mw(e){return e.length===0?W1:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var gt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Uae(n)?n:new k0(n,r,i);return _0(()=>{let{operator:a,source:s}=this;o.add(a?a.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=DR(r),new r((i,o)=>{let a=new k0({next:s=>{try{n(s)}catch(c){o(c),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[T0](){return this}pipe(...n){return Mw(n)(this)}toPromise(n){return n=DR(n),new n((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return e.create=t=>new e(t),e})();function DR(e){var t;return(t=e??i2.Promise)!==null&&t!==void 0?t:Promise}function Bae(e){return e&&Qe(e.next)&&Qe(e.error)&&Qe(e.complete)}function Uae(e){return e&&e instanceof M4||Bae(e)&&$h(e)}function ww(e){return Qe(e?.lift)}function yt(e){return t=>{if(ww(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ft(e,t,n,r,i){return new Sw(e,t,n,r,i)}var Sw=class extends M4{constructor(t,n,r,i,o,a){super(t),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(s){try{n(s)}catch(c){t.error(c)}}:super._next,this._error=i?function(s){try{i(s)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(s){t.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function I0(){return yt((e,t)=>{let n=null;e._refCount++;let r=ft(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var F0=class extends gt{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ww(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new In;let n=this.getSubject();t.add(this.source.subscribe(ft(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=In.EMPTY)}return t}refCount(){return I0()(this)}};var zR=V0(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var d1=(()=>{class e extends gt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new jh(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new zR}next(n){_0(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){_0(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){_0(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?gw:(this.currentObservers=null,o.push(n),new In(()=>{this.currentObservers=null,C4(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new gt;return n.source=this,n}}return e.create=(t,n)=>new jh(t,n),e})(),jh=class extends d1{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:gw}};var Fn=class extends d1{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Ew={now(){return(Ew.delegate||Date).now()},delegate:void 0};var Gh=class extends In{constructor(t,n){super()}schedule(t,n=0){return this}};var M8={setInterval(e,t,...n){let{delegate:r}=M8;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=M8;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var qh=class extends Gh{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return M8.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&M8.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,C4(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var R0=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};R0.now=Ew.now;var Wh=class extends R0{constructor(t,n=R0.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var Dw=new Wh(qh),HR=Dw;var xo=new gt(e=>e.complete());function Yh(e){return e&&Qe(e.schedule)}function LR(e){return e[e.length-1]}function Xh(e){return Qe(LR(e))?e.pop():void 0}function Fc(e){return Yh(LR(e))?e.pop():void 0}function VR(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(e,t||[])).next())})}function AR(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function w4(e){return this instanceof w4?(this.v=e,this):new w4(e)}function NR(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(d){r[d]&&(i[d]=function(p){return new Promise(function(h,m){o.push([d,p,h,m])>1||s(d,p)})})}function s(d,p){try{c(r[d](p))}catch(h){f(o[0][3],h)}}function c(d){d.value instanceof w4?Promise.resolve(d.value.v).then(l,u):f(o[0][2],d)}function l(d){s("next",d)}function u(d){s("throw",d)}function f(d,p){d(p),o.shift(),o.length&&s(o[0][0],o[0][1])}}function _R(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof AR=="function"?AR(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(s,c){a=e[o](a),i(s,c,a.done,a.value)})}}function i(o,a,s,c){Promise.resolve(c).then(function(l){o({value:l,done:s})},a)}}var Qh=e=>e&&typeof e.length=="number"&&typeof e!="function";function Kh(e){return Qe(e?.then)}function Zh(e){return Qe(e[T0])}function Jh(e){return Symbol.asyncIterator&&Qe(e?.[Symbol.asyncIterator])}function em(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function jae(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var tm=jae();function nm(e){return Qe(e?.[tm])}function rm(e){return NR(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield w4(n.read());if(i)return yield w4(void 0);yield yield w4(r)}}finally{n.releaseLock()}})}function im(e){return Qe(e?.getReader)}function Bn(e){if(e instanceof gt)return e;if(e!=null){if(Zh(e))return Gae(e);if(Qh(e))return qae(e);if(Kh(e))return Wae(e);if(Jh(e))return kR(e);if(nm(e))return Yae(e);if(im(e))return Xae(e)}throw em(e)}function Gae(e){return new gt(t=>{let n=e[T0]();if(Qe(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function qae(e){return new gt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Wae(e){return new gt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Bh)})}function Yae(e){return new gt(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function kR(e){return new gt(t=>{Qae(e,t).catch(n=>t.error(n))})}function Xae(e){return kR(rm(e))}function Qae(e,t){var n,r,i,o;return VR(this,void 0,void 0,function*(){try{for(n=_R(e);r=yield n.next(),!r.done;){let a=r.value;if(t.next(a),t.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function p1(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function om(e,t=0){return yt((n,r)=>{n.subscribe(ft(r,i=>p1(r,e,()=>r.next(i),t),()=>p1(r,e,()=>r.complete(),t),i=>p1(r,e,()=>r.error(i),t)))})}function am(e,t=0){return yt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function TR(e,t){return Bn(e).pipe(am(t),om(t))}function IR(e,t){return Bn(e).pipe(am(t),om(t))}function FR(e,t){return new gt(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function RR(e,t){return new gt(n=>{let r;return p1(n,t,()=>{r=e[tm](),p1(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){n.error(a);return}o?n.complete():n.next(i)},0,!0)}),()=>Qe(r?.return)&&r.return()})}function sm(e,t){if(!e)throw new Error("Iterable cannot be null");return new gt(n=>{p1(n,t,()=>{let r=e[Symbol.asyncIterator]();p1(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function OR(e,t){return sm(rm(e),t)}function PR(e,t){if(e!=null){if(Zh(e))return TR(e,t);if(Qh(e))return FR(e,t);if(Kh(e))return IR(e,t);if(Jh(e))return sm(e,t);if(nm(e))return RR(e,t);if(im(e))return OR(e,t)}throw em(e)}function Kt(e,t){return t?PR(e,t):Bn(e)}function Ve(...e){let t=Fc(e);return Kt(e,t)}function O0(e,t){let n=Qe(e)?e:()=>e,r=i=>i.error(n());return new gt(t?i=>t.schedule(r,0,i):r)}function zw(e){return!!e&&(e instanceof gt||Qe(e.lift)&&Qe(e.subscribe))}var gs=V0(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function $R(e){return e instanceof Date&&!isNaN(e)}function We(e,t){return yt((n,r)=>{let i=0;n.subscribe(ft(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:Kae}=Array;function Zae(e,t){return Kae(t)?e(...t):e(t)}function cm(e){return We(t=>Zae(e,t))}var{isArray:Jae}=Array,{getPrototypeOf:ese,prototype:tse,keys:nse}=Object;function lm(e){if(e.length===1){let t=e[0];if(Jae(t))return{args:t,keys:null};if(rse(t)){let n=nse(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function rse(e){return e&&typeof e=="object"&&ese(e)===tse}function um(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function w8(...e){let t=Fc(e),n=Xh(e),{args:r,keys:i}=lm(e);if(r.length===0)return Kt([],t);let o=new gt(ise(r,t,i?a=>um(i,a):W1));return n?o.pipe(cm(n)):o}function ise(e,t,n=W1){return r=>{BR(t,()=>{let{length:i}=e,o=new Array(i),a=i,s=i;for(let c=0;c<i;c++)BR(t,()=>{let l=Kt(e[c],t),u=!1;l.subscribe(ft(r,f=>{o[c]=f,u||(u=!0,s--),s||r.next(n(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function BR(e,t,n){e?p1(n,e,t):t()}function UR(e,t,n,r,i,o,a,s){let c=[],l=0,u=0,f=!1,d=()=>{f&&!c.length&&!l&&t.complete()},p=m=>l<r?h(m):c.push(m),h=m=>{o&&t.next(m),l++;let g=!1;Bn(n(m,u++)).subscribe(ft(t,v=>{i?.(v),o?p(v):t.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<r;){let v=c.shift();a?p1(t,a,()=>h(v)):h(v)}d()}catch(v){t.error(v)}}))};return e.subscribe(ft(t,p,()=>{f=!0,d()})),()=>{s?.()}}function Un(e,t,n=1/0){return Qe(t)?Un((r,i)=>We((o,a)=>t(r,o,i,a))(Bn(e(r,i))),n):(typeof t=="number"&&(n=t),yt((r,i)=>UR(r,i,e,n)))}function Rc(e=1/0){return Un(W1,e)}function jR(){return Rc(1)}function P0(...e){return jR()(Kt(e,Fc(e)))}function fm(e){return new gt(t=>{Bn(e()).subscribe(t)})}function Hw(...e){let t=Xh(e),{args:n,keys:r}=lm(e),i=new gt(o=>{let{length:a}=n;if(!a){o.complete();return}let s=new Array(a),c=a,l=a;for(let u=0;u<a;u++){let f=!1;Bn(n[u]).subscribe(ft(o,d=>{f||(f=!0,l--),s[u]=d},()=>c--,void 0,()=>{(!c||!f)&&(l||o.next(r?um(r,s):s),o.complete())}))}});return t?i.pipe(cm(t)):i}function GR(e=0,t,n=HR){let r=-1;return t!=null&&(Yh(t)?n=t:r=t),new gt(i=>{let o=$R(e)?+e-n.now():e;o<0&&(o=0);let a=0;return n.schedule(function(){i.closed||(i.next(a++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Lw(e=0,t=Dw){return e<0&&(e=0),GR(e,e,t)}function h1(e,t){return yt((n,r)=>{let i=0;n.subscribe(ft(r,o=>e.call(t,o,i++)&&r.next(o)))})}function o2(e){return yt((t,n)=>{let r=null,i=!1,o;r=t.subscribe(ft(n,void 0,void 0,a=>{o=Bn(e(a,o2(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function qR(e,t,n,r,i){return(o,a)=>{let s=n,c=t,l=0;o.subscribe(ft(a,u=>{let f=l++;c=s?e(c,u,f):(s=!0,u),r&&a.next(c)},i&&(()=>{s&&a.next(c),a.complete()})))}}function vs(e,t){return Qe(t)?Un(e,t,1):Un(e,1)}function Oc(e){return yt((t,n)=>{let r=!1;t.subscribe(ft(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function de(e){return e<=0?()=>xo:yt((t,n)=>{let r=0;t.subscribe(ft(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Aw(e){return We(()=>e)}function dm(e=ose){return yt((t,n)=>{let r=!1;t.subscribe(ft(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function ose(){return new gs}function Pc(e){return yt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function aa(e,t){let n=arguments.length>=2;return r=>r.pipe(e?h1((i,o)=>e(i,o,r)):W1,de(1),n?Oc(t):dm(()=>new gs))}function $0(e){return e<=0?()=>xo:yt((t,n)=>{let r=[];t.subscribe(ft(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Vw(e,t){let n=arguments.length>=2;return r=>r.pipe(e?h1((i,o)=>e(i,o,r)):W1,$0(1),n?Oc(t):dm(()=>new gs))}function Nw(e,t){return yt(qR(e,t,arguments.length>=2,!0))}function _w(...e){let t=Fc(e);return yt((n,r)=>{(t?P0(e,n,t):P0(e,n)).subscribe(r)})}function m1(e,t){return yt((n,r)=>{let i=null,o=0,a=!1,s=()=>a&&!i&&r.complete();n.subscribe(ft(r,c=>{i?.unsubscribe();let l=0,u=o++;Bn(e(c,u)).subscribe(i=ft(r,f=>r.next(t?t(c,f,u,l++):f),()=>{i=null,s()}))},()=>{a=!0,s()}))})}function kw(e){return yt((t,n)=>{Bn(e).subscribe(ft(n,()=>n.complete(),b8)),!n.closed&&t.subscribe(n)})}function er(e,t,n){let r=Qe(e)||t||n?{next:e,error:t,complete:n}:e;return r?yt((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let s=!0;i.subscribe(ft(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;s=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;s=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;s&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):W1}var NO="https://g.co/ng/security#xss",ze=class extends Error{constructor(t,n){super(jm(t,n)),this.code=t}};function jm(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}var Kw=class extends d1{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),a=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),a=c.complete?.bind(c)}this.__isAsync&&(o=Tw(o),i&&(i=Tw(i)),a&&(a=Tw(a)));let s=super.subscribe({next:i,error:o,complete:a});return t instanceof In&&t.add(s),s}};function Tw(e){return t=>{setTimeout(e,void 0,t)}}var vn=Kw;var at=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(at||{});function Ri(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Ri).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function WR(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var _O=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(_O||{}),la=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(la||{});function I8(e){return{toString:e}.toString()}var ci=globalThis;var Y0={},Co=[];function Gt(e){for(let t in e)if(e[t]===Gt)return t;throw Error("Could not find renamed property on target object.")}function ase(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}var sse=Gt({\u0275cmp:Gt}),cse=Gt({\u0275dir:Gt}),lse=Gt({\u0275pipe:Gt}),use=Gt({\u0275mod:Gt}),Em=Gt({\u0275fac:Gt}),S8=Gt({__NG_ELEMENT_ID__:Gt}),YR=Gt({__NG_ENV_ID__:Gt}),Pr=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Pr||{});function kO(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function Zw(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],a=n[r++],s=n[r++];e.setAttribute(t,a,s,o)}else{let o=i,a=n[++r];fse(o)?e.setProperty(t,o,a):e.setAttribute(t,o,a),r++}}return r}function TO(e){return e===3||e===4||e===6}function fse(e){return e.charCodeAt(0)===64}function E8(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?XR(e,n,i,null,t[++r]):XR(e,n,i,null,null))}}return e}function XR(e,t,n,r,i){let o=0,a=e.length;if(t===-1)a=-1;else for(;o<e.length;){let s=e[o++];if(typeof s=="number"){if(s===t){a=-1;break}else if(s>t){a=o-1;break}}}for(;o<e.length;){let s=e[o];if(typeof s=="number")break;if(s===n){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}a!==-1&&(e.splice(a,0,t),o=a+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var IO="ng-template";function dse(e,t,n){let r=0,i=!0;for(;r<e.length;){let o=e[r++];if(typeof o=="string"&&i){let a=e[r++];if(n&&o==="class"&&kO(a.toLowerCase(),t,0)!==-1)return!0}else if(o===1){for(;r<e.length&&typeof(o=e[r++])=="string";)if(o.toLowerCase()===t)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function FO(e){return e.type===4&&e.value!==IO}function pse(e,t,n){let r=e.type===4&&!n?IO:e.value;return t===r}function hse(e,t,n){let r=4,i=e.attrs||[],o=vse(i),a=!1;for(let s=0;s<t.length;s++){let c=t[s];if(typeof c=="number"){if(!a&&!a2(r)&&!a2(c))return!1;if(a&&a2(c))continue;a=!1,r=c|r&1;continue}if(!a)if(r&4){if(r=2|r&1,c!==""&&!pse(e,c,n)||c===""&&t.length===1){if(a2(r))return!1;a=!0}}else{let l=r&8?c:t[++s];if(r&8&&e.attrs!==null){if(!dse(e.attrs,l,n)){if(a2(r))return!1;a=!0}continue}let u=r&8?"class":c,f=mse(u,i,FO(e),n);if(f===-1){if(a2(r))return!1;a=!0;continue}if(l!==""){let d;f>o?d="":d=i[f+1].toLowerCase();let p=r&8?d:null;if(p&&kO(p,l,0)!==-1||r&2&&l!==d){if(a2(r))return!1;a=!0}}}}return a2(r)||a}function a2(e){return(e&1)===0}function mse(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let a=t[i];if(a===e)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let s=t[++i];for(;typeof s=="string";)s=t[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return yse(t,e)}function RO(e,t,n=!1){for(let r=0;r<t.length;r++)if(hse(e,t[r],n))return!0;return!1}function gse(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function vse(e){for(let t=0;t<e.length;t++){let n=e[t];if(TO(n))return t}return e.length}function yse(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function xse(e,t){e:for(let n=0;n<t.length;n++){let r=t[n];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function QR(e,t){return e?":not("+t.trim()+")":t}function Cse(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let a=e[n];if(typeof a=="string")if(r&2){let s=e[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!a2(a)&&(t+=QR(o,i),i=""),r=a,o=o||!a2(r);n++}return i!==""&&(t+=QR(o,i)),t}function bse(e){return e.map(Cse).join(",")}function Mse(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!a2(i))break;i=o}r++}return{attrs:t,classes:n}}function xe(e){return I8(()=>{let t=jO(e),n=k(x({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===_O.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||la.Emulated,styles:e.styles||Co,_:null,schemas:e.schemas||null,tView:null,id:""});GO(n);let r=e.dependencies;return n.directiveDefs=ZR(r,!1),n.pipeDefs=ZR(r,!0),n.id=Ese(n),n})}function wse(e){return Uc(e)||PO(e)}function Sse(e){return e!==null}function $i(e){return I8(()=>({type:e.type,bootstrap:e.bootstrap||Co,declarations:e.declarations||Co,imports:e.imports||Co,exports:e.exports||Co,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function KR(e,t){if(e==null)return Y0;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,a,s=Pr.None;Array.isArray(i)?(s=i[0],o=i[1],a=i[2]??o):(o=i,a=i),t?(n[o]=s!==Pr.None?[r,s]:r,t[o]=a):n[o]=r}return n}function kt(e){return I8(()=>{let t=jO(e);return GO(t),t})}function OO(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone===!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function Uc(e){return e[sse]||null}function PO(e){return e[cse]||null}function $O(e){return e[lse]||null}function BO(e){let t=Uc(e)||PO(e)||$O(e);return t!==null?t.standalone:!1}function UO(e,t){let n=e[use]||null;if(!n&&t===!0)throw new Error(`Type ${Ri(e)} does not have '\u0275mod' property.`);return n}function jO(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Y0,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Co,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:KR(e.inputs,t),outputs:KR(e.outputs),debugInfo:null}}function GO(e){e.features?.forEach(t=>t(e))}function ZR(e,t){if(!e)return null;let n=t?$O:wse;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(Sse)}function Ese(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}var Ms=0,Ze=1,Ue=2,$r=3,s2=4,Y1=5,D8=6,z8=7,bo=8,X0=9,ys=10,wn=11,H8=12,JR=13,n6=14,c2=15,F8=16,B0=17,xs=18,Gm=19,qO=20,Bc=21,Iw=22,D4=23,Oi=25,WO=1;var z4=7,Dm=8,Q0=9,v1=10,JS=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(JS||{});function S4(e){return Array.isArray(e)&&typeof e[WO]=="object"}function ws(e){return Array.isArray(e)&&e[WO]===!0}function eE(e){return(e.flags&4)!==0}function qm(e){return e.componentOffset>-1}function Wm(e){return(e.flags&1)===1}function jc(e){return!!e.template}function Dse(e){return(e[Ue]&512)!==0}var zse="svg",Hse="math",Lse=!1;function Ase(){return Lse}function ua(e){for(;Array.isArray(e);)e=e[Ms];return e}function YO(e,t){return ua(t[e])}function Mo(e,t){return ua(t[e.index])}function tE(e,t){return e.data[t]}function XO(e,t){return e[t]}function Wc(e,t){let n=t[e];return S4(n)?n:n[Ms]}function Vse(e){return(e[Ue]&4)===4}function nE(e){return(e[Ue]&128)===128}function Nse(e){return ws(e[$r])}function K0(e,t){return t==null?null:e[t]}function QO(e){e[B0]=0}function _se(e){e[Ue]&1024||(e[Ue]|=1024,nE(e)&&L8(e))}function kse(e,t){for(;e>0;)t=t[n6],e--;return t}function rE(e){return!!(e[Ue]&9216||e[D4]?.dirty)}function Jw(e){rE(e)?L8(e):e[Ue]&64&&(Ase()?(e[Ue]|=1024,L8(e)):e[ys].changeDetectionScheduler?.notify())}function L8(e){e[ys].changeDetectionScheduler?.notify();let t=A8(e);for(;t!==null&&!(t[Ue]&8192||(t[Ue]|=8192,!nE(t)));)t=A8(t)}function KO(e,t){if((e[Ue]&256)===256)throw new ze(911,!1);e[Bc]===null&&(e[Bc]=[]),e[Bc].push(t)}function Tse(e,t){if(e[Bc]===null)return;let n=e[Bc].indexOf(t);n!==-1&&e[Bc].splice(n,1)}function A8(e){let t=e[$r];return ws(t)?t[$r]:t}var nt={lFrame:oP(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ise(){return nt.lFrame.elementDepthCount}function Fse(){nt.lFrame.elementDepthCount++}function Rse(){nt.lFrame.elementDepthCount--}function ZO(){return nt.bindingsEnabled}function JO(){return nt.skipHydrationRootTNode!==null}function Ose(e){return nt.skipHydrationRootTNode===e}function Pse(){nt.skipHydrationRootTNode=null}function st(){return nt.lFrame.lView}function jn(){return nt.lFrame.tView}function tr(e){return nt.lFrame.contextLView=e,e[bo]}function nr(e){return nt.lFrame.contextLView=null,e}function li(){let e=eP();for(;e!==null&&e.type===64;)e=e.parent;return e}function eP(){return nt.lFrame.currentTNode}function $se(){let e=nt.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function I4(e,t){let n=nt.lFrame;n.currentTNode=e,n.isParent=t}function iE(){return nt.lFrame.isParent}function oE(){nt.lFrame.isParent=!1}function Bse(){return nt.lFrame.contextLView}function aE(){let e=nt.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Use(){return nt.lFrame.bindingIndex}function jse(e){return nt.lFrame.bindingIndex=e}function r6(){return nt.lFrame.bindingIndex++}function tP(e){let t=nt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Gse(){return nt.lFrame.inI18n}function qse(e,t){let n=nt.lFrame;n.bindingIndex=n.bindingRootIndex=e,eS(t)}function Wse(){return nt.lFrame.currentDirectiveIndex}function eS(e){nt.lFrame.currentDirectiveIndex=e}function Yse(e){let t=nt.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function nP(){return nt.lFrame.currentQueryIndex}function sE(e){nt.lFrame.currentQueryIndex=e}function Xse(e){let t=e[Ze];return t.type===2?t.declTNode:t.type===1?e[Y1]:null}function rP(e,t,n){if(n&at.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&at.Host);)if(i=Xse(o),i===null||(o=o[n6],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=nt.lFrame=iP();return r.currentTNode=t,r.lView=e,!0}function cE(e){let t=iP(),n=e[Ze];nt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function iP(){let e=nt.lFrame,t=e===null?null:e.child;return t===null?oP(e):t}function oP(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function aP(){let e=nt.lFrame;return nt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var sP=aP;function lE(){let e=aP();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Qse(e){return(nt.lFrame.contextLView=kse(e,nt.lFrame.contextLView))[bo]}function F4(){return nt.lFrame.selectedIndex}function H4(e){nt.lFrame.selectedIndex=e}function Ym(){let e=nt.lFrame;return tE(e.tView,e.selectedIndex)}function Kse(){return nt.lFrame.currentNamespace}var cP=!0;function Xm(){return cP}function Qm(e){cP=e}function Zse(){return i6(li(),st())}function i6(e,t){return new Br(Mo(e,t))}var Br=(()=>{let t=class t{constructor(r){this.nativeElement=r}};t.__NG_ELEMENT_ID__=Zse;let e=t;return e})();function Jse(e){return e instanceof Br?e.nativeElement:e}function ece(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function tce(e){return e.flat(Number.POSITIVE_INFINITY)}function uE(e,t){e.forEach(n=>Array.isArray(n)?uE(n,t):t(n))}function lP(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function zm(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function nce(e,t){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function rce(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function ice(e,t,n){let r=R8(e,t);return r>=0?e[r|1]=n:(r=~r,rce(e,r,t,n)),r}function Fw(e,t){let n=R8(e,t);if(n>=0)return e[n|1]}function R8(e,t){return oce(e,t,1)}function oce(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),a=e[o<<n];if(t===a)return o<<n;a>t?i=o:r=o+1}return~(i<<n)}function ace(){return this._results[Symbol.iterator]()}var tS=class e{get changes(){return this._changes??=new vn}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=ace)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=tce(t);(this._changesDetected=!ece(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function uP(e){return(e.flags&128)===128}var nS;function fP(e){nS=e}function dP(){if(nS!==void 0)return nS;if(typeof document<"u")return document;throw new ze(210,!1)}function ce(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Bi(e){return{providers:e.providers||[],imports:e.imports||[]}}function Km(e){return eO(e,hP)||eO(e,mP)}function pP(e){return Km(e)!==null}function eO(e,t){return e.hasOwnProperty(t)?e[t]:null}function sce(e){let t=e&&(e[hP]||e[mP]);return t||null}function tO(e){return e&&(e.hasOwnProperty(nO)||e.hasOwnProperty(cce))?e[nO]:null}var hP=Gt({\u0275prov:Gt}),nO=Gt({\u0275inj:Gt}),mP=Gt({ngInjectableDef:Gt}),cce=Gt({ngInjectorDef:Gt}),ke=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ce({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}},Zm=new ke("",{providedIn:"root",factory:()=>lce}),lce="ng",fE=new ke(""),pa=new ke("",{providedIn:"platform",factory:()=>"unknown"});var dE=new ke("",{providedIn:"root",factory:()=>dP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var uce=Gt({__forward_ref__:Gt});function ha(e){return e.__forward_ref__=ha,e.toString=function(){return Ri(this())},e}function Fi(e){return gP(e)?e():e}function gP(e){return typeof e=="function"&&e.hasOwnProperty(uce)&&e.__forward_ref__===ha}function vP(e){return e&&!!e.\u0275providers}function L4(e){return typeof e=="string"?e:e==null?"":String(e)}function fce(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():L4(e)}function dce(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new ze(-200,e)}function pE(e,t){throw new ze(-201,!1)}var rS;function yP(){return rS}function g1(e){let t=rS;return rS=e,t}function xP(e,t,n){let r=Km(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&at.Optional)return null;if(t!==void 0)return t;pE(e,"Injector")}var pce={},V8=pce,iS="__NG_DI_FLAG__",Hm="ngTempTokenPath",hce="ngTokenPath",mce=/\n/gm,gce="\u0275",rO="__source",q0;function vce(){return q0}function $c(e){let t=q0;return q0=e,t}function yce(e,t=at.Default){if(q0===void 0)throw new ze(-203,!1);return q0===null?xP(e,void 0,t):q0.get(e,t&at.Optional?null:void 0,t)}function le(e,t=at.Default){return(yP()||yce)(Fi(e),t)}function ue(e,t=at.Default){return le(e,Jm(t))}function Jm(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function oS(e){let t=[];for(let n=0;n<e.length;n++){let r=Fi(e[n]);if(Array.isArray(r)){if(r.length===0)throw new ze(900,!1);let i,o=at.Default;for(let a=0;a<r.length;a++){let s=r[a],c=xce(s);typeof c=="number"?c===-1?i=s.token:o|=c:i=s}t.push(le(i,o))}else t.push(le(r))}return t}function CP(e,t){return e[iS]=t,e.prototype[iS]=t,e}function xce(e){return e[iS]}function Cce(e,t,n,r){let i=e[Hm];throw t[rO]&&i.unshift(t[rO]),e.message=bce(`
`+e.message,i,n,r),e[hce]=i,e[Hm]=null,e}function bce(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==gce?e.slice(2):e;let i=Ri(t);if(Array.isArray(t))i=t.map(Ri).join(" -> ");else if(typeof t=="object"){let o=[];for(let a in t)if(t.hasOwnProperty(a)){let s=t[a];o.push(a+":"+(typeof s=="string"?JSON.stringify(s):Ri(s)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(mce,`
  `)}`}var Mce="h",wce="b";var Sce=()=>null;function hE(e,t,n=!1){return Sce(e,t,n)}var pm="__parameters__";function Ece(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function bP(e,t,n){return I8(()=>{let r=Ece(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let a=new i(...o);return s.annotation=a,s;function s(c,l,u){let f=c.hasOwnProperty(pm)?c[pm]:Object.defineProperty(c,pm,{value:[]})[pm];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(a),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var e9=CP(bP("Optional"),8);var mE=CP(bP("SkipSelf"),4);function A4(e,t){let n=e.hasOwnProperty(Em);return n?e[Em]:null}var Z0=new ke(""),MP=new ke("",-1),wP=new ke(""),Lm=class{get(t,n=V8){if(n===V8){let r=new Error(`NullInjectorError: No provider for ${Ri(t)}!`);throw r.name="NullInjectorError",r}return n}};function O8(e){return{\u0275providers:e}}function gE(...e){return{\u0275providers:SP(!0,e),\u0275fromNgModule:!0}}function SP(e,...t){let n=[],r=new Set,i,o=a=>{n.push(a)};return uE(t,a=>{let s=a;aS(s,o,[],r)&&(i||=[],i.push(s))}),i!==void 0&&EP(i,o),n}function EP(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];vE(i,o=>{t(o,r)})}}function aS(e,t,n,r){if(e=Fi(e),!e)return!1;let i=null,o=tO(e),a=!o&&Uc(e);if(!o&&!a){let c=e.ngModule;if(o=tO(c),o)i=c;else return!1}else{if(a&&!a.standalone)return!1;i=e}let s=r.has(i);if(a){if(s)return!1;if(r.add(i),a.dependencies){let c=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let l of c)aS(l,t,n,r)}}else if(o){if(o.imports!=null&&!s){r.add(i);let l;try{uE(o.imports,u=>{aS(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&EP(l,t)}if(!s){let l=A4(i)||(()=>new i);t({provide:i,useFactory:l,deps:Co},i),t({provide:wP,useValue:i,multi:!0},i),t({provide:Z0,useValue:()=>le(i),multi:!0},i)}let c=o.providers;if(c!=null&&!s){let l=e;vE(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function vE(e,t){for(let n of e)vP(n)&&(n=n.\u0275providers),Array.isArray(n)?vE(n,t):t(n)}var Dce=Gt({provide:String,useValue:Gt});function DP(e){return e!==null&&typeof e=="object"&&Dce in e}function zce(e){return!!(e&&e.useExisting)}function Hce(e){return!!(e&&e.useFactory)}function J0(e){return typeof e=="function"}function Lce(e){return!!e.useClass}var t9=new ke(""),xm={},Ace={},Rw;function yE(){return Rw===void 0&&(Rw=new Lm),Rw}var Pi=class{},N8=class extends Pi{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cS(t,a=>this.processProvider(a)),this.records.set(MP,U0(void 0,this)),i.has("environment")&&this.records.set(Pi,U0(void 0,this));let o=this.records.get(t9);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(wP,Co,at.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=$c(this),r=g1(void 0),i;try{return t()}finally{$c(n),g1(r)}}get(t,n=V8,r=at.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(YR))return t[YR](this);r=Jm(r);let i,o=$c(this),a=g1(void 0);try{if(!(r&at.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=Tce(t)&&Km(t);l&&this.injectableDefInScope(l)?c=U0(sS(t),xm):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let s=r&at.Self?yE():this.parent;return n=r&at.Optional&&n===V8?null:n,s.get(t,n)}catch(s){if(s.name==="NullInjectorError"){if((s[Hm]=s[Hm]||[]).unshift(Ri(t)),o)throw s;return Cce(s,t,"R3InjectorError",this.source)}else throw s}finally{g1(a),$c(o)}}resolveInjectorInitializers(){let t=$c(this),n=g1(void 0),r;try{let i=this.get(Z0,Co,at.Self);for(let o of i)o()}finally{$c(t),g1(n)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Ri(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ze(205,!1)}processProvider(t){t=Fi(t);let n=J0(t)?t:Fi(t&&t.provide),r=Nce(t);if(!J0(t)&&t.multi===!0){let i=this.records.get(n);i||(i=U0(void 0,xm,!0),i.factory=()=>oS(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===xm&&(n.value=Ace,n.value=n.factory()),typeof n.value=="object"&&n.value&&kce(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Fi(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function sS(e){let t=Km(e),n=t!==null?t.factory:A4(e);if(n!==null)return n;if(e instanceof ke)throw new ze(204,!1);if(e instanceof Function)return Vce(e);throw new ze(204,!1)}function Vce(e){if(e.length>0)throw new ze(204,!1);let n=sce(e);return n!==null?()=>n.factory(e):()=>new e}function Nce(e){if(DP(e))return U0(void 0,e.useValue);{let t=zP(e);return U0(t,xm)}}function zP(e,t,n){let r;if(J0(e)){let i=Fi(e);return A4(i)||sS(i)}else if(DP(e))r=()=>Fi(e.useValue);else if(Hce(e))r=()=>e.useFactory(...oS(e.deps||[]));else if(zce(e))r=()=>le(Fi(e.useExisting));else{let i=Fi(e&&(e.useClass||e.provide));if(_ce(e))r=()=>new i(...oS(e.deps));else return A4(i)||sS(i)}return r}function U0(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function _ce(e){return!!e.deps}function kce(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function Tce(e){return typeof e=="function"||typeof e=="object"&&e instanceof ke}function cS(e,t){for(let n of e)Array.isArray(n)?cS(n,t):n&&vP(n)?cS(n.\u0275providers,t):t(n)}function ma(e,t){e instanceof N8&&e.assertNotDestroyed();let n,r=$c(e),i=g1(void 0);try{return t()}finally{$c(r),g1(i)}}function Ice(e){if(!yP()&&!vce())throw new ze(-203,!1)}function Fce(e){return typeof e=="function"}var lS=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function HP(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function wo(){return LP}function LP(e){return e.type.prototype.ngOnChanges&&(e.setInput=Oce),Rce}wo.ngInherit=!0;function Rce(){let e=VP(this),t=e?.current;if(t){let n=e.previous;if(n===Y0)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Oce(e,t,n,r,i){let o=this.declaredInputs[r],a=VP(e)||Pce(e,{previous:Y0,current:null}),s=a.current||(a.current={}),c=a.previous,l=c[o];s[o]=new lS(l&&l.currentValue,n,c===Y0),HP(e,t,i,n)}var AP="__ngSimpleChanges__";function VP(e){return e[AP]||null}function Pce(e,t){return e[AP]=t}var iO=null;var sa=function(e,t,n){iO?.(e,t,n)};function $ce(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let a=LP(t);(n.preOrderHooks??=[]).push(e,a),(n.preOrderCheckHooks??=[]).push(e,a)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function n9(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:s,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;a&&(e.contentHooks??=[]).push(-n,a),s&&((e.contentHooks??=[]).push(n,s),(e.contentCheckHooks??=[]).push(n,s)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Cm(e,t,n){NP(e,t,3,n)}function bm(e,t,n,r){(e[Ue]&3)===n&&NP(e,t,n,r)}function Ow(e,t){let n=e[Ue];(n&3)===t&&(n&=16383,n+=1,e[Ue]=n)}function NP(e,t,n,r){let i=r!==void 0?e[B0]&65535:0,o=r??-1,a=t.length-1,s=0;for(let c=i;c<a;c++)if(typeof t[c+1]=="number"){if(s=t[c],r!=null&&s>=r)break}else t[c]<0&&(e[B0]+=65536),(s<o||o==-1)&&(Bce(e,n,t,c),e[B0]=(e[B0]&4294901760)+c+2),c++}function oO(e,t){sa(4,e,t);let n=Or(null);try{t.call(e)}finally{Or(n),sa(5,e,t)}}function Bce(e,t,n,r){let i=n[r]<0,o=n[r+1],a=i?-n[r]:n[r],s=e[a];i?e[Ue]>>14<e[B0]>>16&&(e[Ue]&3)===t&&(e[Ue]+=16384,oO(s,o)):oO(s,o)}var W0=-1,V4=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Uce(e){return e instanceof V4}function jce(e){return(e.flags&8)!==0}function Gce(e){return(e.flags&16)!==0}function _P(e){return e!==W0}function Am(e){return e&32767}function qce(e){return e>>16}function Vm(e,t){let n=qce(e),r=t;for(;n>0;)r=r[n6],n--;return r}var uS=!0;function Nm(e){let t=uS;return uS=e,t}var Wce=256,kP=Wce-1,TP=5,Yce=0,ca={};function Xce(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(S8)&&(r=n[S8]),r==null&&(r=n[S8]=Yce++);let i=r&kP,o=1<<i;t.data[e+(i>>TP)]|=o}function _m(e,t){let n=IP(e,t);if(n!==-1)return n;let r=t[Ze];r.firstCreatePass&&(e.injectorIndex=t.length,Pw(r.data,e),Pw(t,null),Pw(r.blueprint,null));let i=xE(e,t),o=e.injectorIndex;if(_P(i)){let a=Am(i),s=Vm(i,t),c=s[Ze].data;for(let l=0;l<8;l++)t[o+l]=s[a+l]|c[a+l]}return t[o+8]=i,o}function Pw(e,t){e.push(0,0,0,0,0,0,0,0,t)}function IP(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function xE(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=$P(i),r===null)return W0;if(n++,i=i[n6],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return W0}function fS(e,t,n){Xce(e,t,n)}function Qce(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(TO(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===t)return n[i+1];i=i+2}}}return null}function FP(e,t,n){if(n&at.Optional||e!==void 0)return e;pE(t,"NodeInjector")}function RP(e,t,n,r){if(n&at.Optional&&r===void 0&&(r=null),!(n&(at.Self|at.Host))){let i=e[X0],o=g1(void 0);try{return i?i.get(t,r,n&at.Optional):xP(t,r,n&at.Optional)}finally{g1(o)}}return FP(r,t,n)}function OP(e,t,n,r=at.Default,i){if(e!==null){if(t[Ue]&2048&&!(r&at.Self)){let a=e3e(e,t,n,r,ca);if(a!==ca)return a}let o=PP(e,t,n,r,ca);if(o!==ca)return o}return RP(t,n,r,i)}function PP(e,t,n,r,i){let o=Zce(n);if(typeof o=="function"){if(!rP(t,e,r))return r&at.Host?FP(i,n,r):RP(t,n,r,i);try{let a;if(a=o(r),a==null&&!(r&at.Optional))pE(n);else return a}finally{sP()}}else if(typeof o=="number"){let a=null,s=IP(e,t),c=W0,l=r&at.Host?t[c2][Y1]:null;for((s===-1||r&at.SkipSelf)&&(c=s===-1?xE(e,t):t[s+8],c===W0||!sO(r,!1)?s=-1:(a=t[Ze],s=Am(c),t=Vm(c,t)));s!==-1;){let u=t[Ze];if(aO(o,s,u.data)){let f=Kce(s,t,n,a,r,l);if(f!==ca)return f}c=t[s+8],c!==W0&&sO(r,t[Ze].data[s+8]===l)&&aO(o,s,t)?(a=u,s=Am(c),t=Vm(c,t)):s=-1}}return i}function Kce(e,t,n,r,i,o){let a=t[Ze],s=a.data[e+8],c=r==null?qm(s)&&uS:r!=a&&(s.type&3)!==0,l=i&at.Host&&o===s,u=Mm(s,a,n,c,l);return u!==null?N4(t,a,u,s):ca}function Mm(e,t,n,r,i){let o=e.providerIndexes,a=t.data,s=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,f=r?s:s+u,d=i?s+u:l;for(let p=f;p<d;p++){let h=a[p];if(p<c&&n===h||p>=c&&h.type===n)return p}if(i){let p=a[c];if(p&&jc(p)&&p.type===n)return c}return null}function N4(e,t,n,r){let i=e[n],o=t.data;if(Uce(i)){let a=i;a.resolving&&dce(fce(o[n]));let s=Nm(a.canSeeViewProviders);a.resolving=!0;let c,l=a.injectImpl?g1(a.injectImpl):null,u=rP(e,r,at.Default);try{i=e[n]=a.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&$ce(n,o[n],t)}finally{l!==null&&g1(l),Nm(s),a.resolving=!1,sP()}}return i}function Zce(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(S8)?e[S8]:void 0;return typeof t=="number"?t>=0?t&kP:Jce:t}function aO(e,t,n){let r=1<<e;return!!(n[t+(e>>TP)]&r)}function sO(e,t){return!(e&at.Self)&&!(e&at.Host&&t)}var E4=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return OP(this._tNode,this._lView,t,Jm(r),n)}};function Jce(){return new E4(li(),st())}function ga(e){return I8(()=>{let t=e.prototype.constructor,n=t[Em]||dS(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[Em]||dS(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function dS(e){return gP(e)?()=>{let t=dS(Fi(e));return t&&t()}:A4(e)}function e3e(e,t,n,r,i){let o=e,a=t;for(;o!==null&&a!==null&&a[Ue]&2048&&!(a[Ue]&512);){let s=PP(o,a,n,r|at.Self,ca);if(s!==ca)return s;let c=o.parent;if(!c){let l=a[qO];if(l){let u=l.get(n,ca,r);if(u!==ca)return u}c=$P(a),a=a[n6]}o=c}return i}function $P(e){let t=e[Ze],n=t.type;return n===2?t.declTNode:n===1?e[Y1]:null}function CE(e){return Qce(li(),e)}function cO(e,t=null,n=null,r){let i=BP(e,t,n,r);return i.resolveInjectorInitializers(),i}function BP(e,t=null,n=null,r,i=new Set){let o=[n||Co,gE(e)];return r=r||(typeof e=="object"?void 0:Ri(e)),new N8(o,t||yE(),r||null,i)}var Ss=(()=>{let t=class t{static create(r,i){if(Array.isArray(r))return cO({name:""},i,r,"");{let o=r.name??"";return cO({name:o},r.parent,r.providers,o)}}};t.THROW_IF_NOT_FOUND=V8,t.NULL=new Lm,t.\u0275prov=ce({token:t,providedIn:"any",factory:()=>le(MP)}),t.__NG_ELEMENT_ID__=-1;let e=t;return e})(),t3e="ngOriginalError";function $w(e){return e[t3e]}var fa=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&$w(t);for(;n&&$w(n);)n=$w(n);return n||null}},UP=new ke("",{providedIn:"root",factory:()=>ue(fa).handleError.bind(void 0)});var jP=!1,n3e=new ke("",{providedIn:"root",factory:()=>jP}),hm;function r3e(){if(hm===void 0&&(hm=null,ci.trustedTypes))try{hm=ci.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return hm}function r9(e){return r3e()?.createHTML(e)||e}var mm;function GP(){if(mm===void 0&&(mm=null,ci.trustedTypes))try{mm=ci.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return mm}function lO(e){return GP()?.createHTML(e)||e}function uO(e){return GP()?.createScriptURL(e)||e}var Cs=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${NO})`}},pS=class extends Cs{getTypeName(){return"HTML"}},hS=class extends Cs{getTypeName(){return"Style"}},mS=class extends Cs{getTypeName(){return"Script"}},gS=class extends Cs{getTypeName(){return"URL"}},vS=class extends Cs{getTypeName(){return"ResourceURL"}};function l2(e){return e instanceof Cs?e.changingThisBreaksApplicationSecurity:e}function Es(e,t){let n=i3e(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${NO})`)}return n===t}function i3e(e){return e instanceof Cs&&e.getTypeName()||null}function qP(e){return new pS(e)}function WP(e){return new hS(e)}function YP(e){return new mS(e)}function XP(e){return new gS(e)}function QP(e){return new vS(e)}function o3e(e){let t=new xS(e);return a3e()?new yS(t):t}var yS=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let n=new window.DOMParser().parseFromString(r9(t),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch{return null}}},xS=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let n=this.inertDocument.createElement("template");return n.innerHTML=r9(t),n}};function a3e(){try{return!!new window.DOMParser().parseFromString(r9(""),"text/html")}catch{return!1}}var s3e=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function i9(e){return e=String(e),e.match(s3e)?e:"unsafe:"+e}function Ds(e){let t={};for(let n of e.split(","))t[n]=!0;return t}function P8(...e){let t={};for(let n of e)for(let r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}var KP=Ds("area,br,col,hr,img,wbr"),ZP=Ds("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),JP=Ds("rp,rt"),c3e=P8(JP,ZP),l3e=P8(ZP,Ds("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),u3e=P8(JP,Ds("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fO=P8(KP,l3e,u3e,c3e),e$=Ds("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),f3e=Ds("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),d3e=Ds("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),p3e=P8(e$,f3e,d3e),h3e=Ds("script,style,template"),CS=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,r=!0;for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){n=n.firstChild;continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}}return this.buf.join("")}startElement(t){let n=t.nodeName.toLowerCase();if(!fO.hasOwnProperty(n))return this.sanitizedSomething=!0,!h3e.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=t.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),a=o.name,s=a.toLowerCase();if(!p3e.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let c=o.value;e$[s]&&(c=i9(c)),this.buf.push(" ",a,'="',dO(c),'"')}return this.buf.push(">"),!0}endElement(t){let n=t.nodeName.toLowerCase();fO.hasOwnProperty(n)&&!KP.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(dO(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}},m3e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g3e=/([^\#-~ |!])/g;function dO(e){return e.replace(/&/g,"&amp;").replace(m3e,function(t){let n=t.charCodeAt(0),r=t.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(g3e,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var gm;function bE(e,t){let n=null;try{gm=gm||o3e(e);let r=t?String(t):"";n=gm.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=gm.getInertBodyElement(r)}while(r!==o);let s=new CS().sanitizeChildren(pO(n)||n);return r9(s)}finally{if(n){let r=pO(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function pO(e){return"content"in e&&v3e(e)?e.content:null}function v3e(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var u2=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(u2||{});function t$(e){let t=ME();return t?lO(t.sanitize(u2.HTML,e)||""):Es(e,"HTML")?lO(l2(e)):bE(dP(),L4(e))}function y3e(e){let t=ME();return t?t.sanitize(u2.URL,e)||"":Es(e,"URL")?l2(e):i9(L4(e))}function x3e(e){let t=ME();if(t)return uO(t.sanitize(u2.RESOURCE_URL,e)||"");if(Es(e,"ResourceURL"))return uO(l2(e));throw new ze(904,!1)}function C3e(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?x3e:y3e}function n$(e,t,n){return C3e(t,n)(e)}function ME(){let e=st();return e&&e[ys].sanitizer}var b3e=/^>|^->|<!--|-->|--!>|<!-$/g,M3e=/(<|>)/g,w3e="\u200B$1\u200B";function S3e(e){return e.replace(b3e,t=>t.replace(M3e,w3e))}var r$=new Map,E3e=0;function D3e(){return E3e++}function z3e(e){r$.set(e[Gm],e)}function H3e(e){r$.delete(e[Gm])}var hO="__ngContext__";function Gc(e,t){S4(t)?(e[hO]=t[Gm],z3e(t)):e[hO]=t}function i$(e){return e instanceof Function?e():e}function L3e(e){return(e??ue(Ss)).get(pa)==="browser"}var bs=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(bs||{}),A3e;function wE(e,t){return A3e(e,t)}function j0(e,t,n,r,i){if(r!=null){let o,a=!1;ws(r)?o=r:S4(r)&&(a=!0,r=r[Ms]);let s=ua(r);e===0&&n!==null?i==null?l$(t,n,s):Tm(t,n,s,i||null,!0):e===1&&n!==null?Tm(t,n,s,i||null,!0):e===2?q3e(t,s,a):e===3&&t.destroyNode(s),o!=null&&Y3e(t,e,o,n,i)}}function V3e(e,t){return e.createText(t)}function N3e(e,t,n){e.setValue(t,n)}function _3e(e,t){return e.createComment(S3e(t))}function o$(e,t,n){return e.createElement(t,n)}function k3e(e,t){a$(e,t),t[Ms]=null,t[Y1]=null}function T3e(e,t,n,r,i,o){r[Ms]=i,r[Y1]=t,a9(e,r,n,1,i,o)}function a$(e,t){a9(e,t,t[wn],2,null,null)}function I3e(e){let t=e[H8];if(!t)return Bw(e[Ze],e);for(;t;){let n=null;if(S4(t))n=t[H8];else{let r=t[v1];r&&(n=r)}if(!n){for(;t&&!t[s2]&&t!==e;)S4(t)&&Bw(t[Ze],t),t=t[$r];t===null&&(t=e),S4(t)&&Bw(t[Ze],t),n=t&&t[s2]}t=n}}function F3e(e,t,n,r){let i=v1+r,o=n.length;r>0&&(n[i-1][s2]=t),r<o-v1?(t[s2]=n[i],lP(n,v1+r,t)):(n.push(t),t[s2]=null),t[$r]=n;let a=t[F8];a!==null&&n!==a&&R3e(a,t);let s=t[xs];s!==null&&s.insertView(e),Jw(t),t[Ue]|=128}function R3e(e,t){let n=e[Q0],i=t[$r][$r][c2];t[c2]!==i&&(e[Ue]|=JS.HasTransplantedViews),n===null?e[Q0]=[t]:n.push(t)}function s$(e,t){let n=e[Q0],r=n.indexOf(t);n.splice(r,1)}function km(e,t){if(e.length<=v1)return;let n=v1+t,r=e[n];if(r){let i=r[F8];i!==null&&i!==e&&s$(i,r),t>0&&(e[n-1][s2]=r[s2]);let o=zm(e,v1+t);k3e(r[Ze],r);let a=o[xs];a!==null&&a.detachView(o[Ze]),r[$r]=null,r[s2]=null,r[Ue]&=-129}return r}function SE(e,t){if(!(t[Ue]&256)){let n=t[wn];n.destroyNode&&a9(e,t,n,3,null,null),I3e(t)}}function Bw(e,t){if(!(t[Ue]&256)){t[Ue]&=-129,t[Ue]|=256,t[D4]&&xR(t[D4]),P3e(e,t),O3e(e,t),t[Ze].type===1&&t[wn].destroy();let n=t[F8];if(n!==null&&ws(t[$r])){n!==t[$r]&&s$(n,t);let r=t[xs];r!==null&&r.detachView(e)}H3e(t)}}function O3e(e,t){let n=e.cleanup,r=t[z8];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[n[o+1]];n[o].call(a)}r!==null&&(t[z8]=null);let i=t[Bc];if(i!==null){t[Bc]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}}function P3e(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof V4)){let o=n[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let s=i[o[a]],c=o[a+1];sa(4,s,c);try{c.call(s)}finally{sa(5,s,c)}}else{sa(4,i,o);try{o.call(i)}finally{sa(5,i,o)}}}}}function c$(e,t,n){return $3e(e,t.parent,n)}function $3e(e,t,n){let r=t;for(;r!==null&&r.type&40;)t=r,r=t.parent;if(r===null)return n[Ms];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===la.None||o===la.Emulated)return null}return Mo(r,n)}}function Tm(e,t,n,r,i){e.insertBefore(t,n,r,i)}function l$(e,t,n){e.appendChild(t,n)}function mO(e,t,n,r,i){r!==null?Tm(e,t,n,r,i):l$(e,t,n)}function B3e(e,t,n,r){e.removeChild(t,n,r)}function EE(e,t){return e.parentNode(t)}function U3e(e,t){return e.nextSibling(t)}function u$(e,t,n){return G3e(e,t,n)}function j3e(e,t,n){return e.type&40?Mo(e,n):null}var G3e=j3e,gO;function o9(e,t,n,r){let i=c$(e,r,t),o=t[wn],a=r.parent||t[Y1],s=u$(a,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)mO(o,i,n[c],s,!1);else mO(o,i,n,s,!1);gO!==void 0&&gO(o,r,t,n,i)}function wm(e,t){if(t!==null){let n=t.type;if(n&3)return Mo(t,e);if(n&4)return bS(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return wm(e,r);{let i=e[t.index];return ws(i)?bS(-1,i):ua(i)}}else{if(n&32)return wE(t,e)()||ua(e[t.index]);{let r=f$(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=A8(e[c2]);return wm(i,r)}else return wm(e,t.next)}}}return null}function f$(e,t){if(t!==null){let r=e[c2][Y1],i=t.projection;return r.projection[i]}return null}function bS(e,t){let n=v1+e+1;if(n<t.length){let r=t[n],i=r[Ze].firstChild;if(i!==null)return wm(r,i)}return t[z4]}function q3e(e,t,n){let r=EE(e,t);r&&B3e(e,r,t,n)}function DE(e,t,n,r,i,o,a){for(;n!=null;){let s=r[n.index],c=n.type;if(a&&t===0&&(s&&Gc(ua(s),r),n.flags|=2),(n.flags&32)!==32)if(c&8)DE(e,t,n.child,r,i,o,!1),j0(t,e,i,s,o);else if(c&32){let l=wE(n,r),u;for(;u=l();)j0(t,e,i,u,o);j0(t,e,i,s,o)}else c&16?d$(e,t,r,n,i,o):j0(t,e,i,s,o);n=a?n.projectionNext:n.next}}function a9(e,t,n,r,i,o){DE(n,r,e.firstChild,t,i,o,!1)}function W3e(e,t,n){let r=t[wn],i=c$(e,n,t),o=n.parent||t[Y1],a=u$(o,n,t);d$(r,0,t,n,i,a)}function d$(e,t,n,r,i,o){let a=n[c2],c=a[Y1].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];j0(t,e,i,u,o)}else{let l=c,u=a[$r];uP(r)&&(l.flags|=128),DE(e,t,l,u,i,o,!0)}}function Y3e(e,t,n,r,i){let o=n[z4],a=ua(n);o!==a&&j0(t,e,r,o,i);for(let s=v1;s<n.length;s++){let c=n[s];a9(c[Ze],c,e,t,r,o)}}function X3e(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:bs.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=bs.Important),e.setStyle(n,r,i,o))}}function Q3e(e,t,n){e.setAttribute(t,"style",n)}function p$(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function h$(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Zw(e,t,r),i!==null&&p$(e,t,i),o!==null&&Q3e(e,t,o)}var va={};function R(e=1){m$(jn(),st(),F4()+e,!1)}function m$(e,t,n,r){if(!r)if((t[Ue]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Cm(t,o,n)}else{let o=e.preOrderHooks;o!==null&&bm(t,o,0,n)}H4(n)}function j(e,t=at.Default){let n=st();if(n===null)return le(e,t);let r=li();return OP(r,n,Fi(e),t)}function g$(){let e="invalid";throw new Error(e)}function v$(e,t,n,r,i,o){let a=Or(null);try{let s=null;i&Pr.SignalBased&&(s=t[r][dw]),s!==null&&s.transformFn!==void 0&&(o=s.transformFn(o)),i&Pr.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(t,o)),e.setInput!==null?e.setInput(t,s,o,n,r):HP(t,s,r,o)}finally{Or(a)}}function K3e(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)H4(~i);else{let o=i,a=n[++r],s=n[++r];qse(a,o);let c=t[o];s(2,c)}}}finally{H4(-1)}}function s9(e,t,n,r,i,o,a,s,c,l,u){let f=t.blueprint.slice();return f[Ms]=i,f[Ue]=r|4|128|8|64,(l!==null||e&&e[Ue]&2048)&&(f[Ue]|=2048),QO(f),f[$r]=f[n6]=e,f[bo]=n,f[ys]=a||e&&e[ys],f[wn]=s||e&&e[wn],f[X0]=c||e&&e[X0]||null,f[Y1]=o,f[Gm]=D3e(),f[D8]=u,f[qO]=l,f[c2]=t.type==2?e[c2]:f,f}function o6(e,t,n,r,i){let o=e.data[t];if(o===null)o=Z3e(e,t,n,r,i),Gse()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let a=$se();o.injectorIndex=a===null?-1:a.injectorIndex}return I4(o,!0),o}function Z3e(e,t,n,r,i){let o=eP(),a=iE(),s=a?o:o&&o.parent,c=e.data[t]=i4e(e,s,n,t,r,i);return e.firstChild===null&&(e.firstChild=c),o!==null&&(a?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function y$(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function x$(e,t,n,r,i){let o=F4(),a=r&2;try{H4(-1),a&&t.length>Oi&&m$(e,t,Oi,!1),sa(a?2:0,i),n(r,i)}finally{H4(o),sa(a?3:1,i)}}function zE(e,t,n){if(eE(t)){let r=Or(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let a=i;a<o;a++){let s=e.data[a];if(s.contentQueries){let c=n[a];s.contentQueries(1,c,a)}}}finally{Or(r)}}}function HE(e,t,n){ZO()&&(u4e(e,t,n,Mo(n,t)),(n.flags&64)===64&&M$(e,t,n))}function LE(e,t,n=Mo){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],s=a===-1?n(t,e):e[a];e[i++]=s}}}function C$(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=AE(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function AE(e,t,n,r,i,o,a,s,c,l,u){let f=Oi+r,d=f+i,p=J3e(f,d),h=typeof l=="function"?l():l;return p[Ze]={type:e,blueprint:p,template:n,queries:null,viewQuery:s,declTNode:t,data:p.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:c,consts:h,incompleteFirstPass:!1,ssrId:u}}function J3e(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:va);return n}function e4e(e,t,n,r){let o=r.get(n3e,jP)||n===la.ShadowDom,a=e.selectRootElement(t,o);return t4e(a),a}function t4e(e){n4e(e)}var n4e=()=>null;function r4e(e,t,n,r){let i=E$(t);i.push(n),e.firstCreatePass&&D$(e).push(r,i.length-1)}function i4e(e,t,n,r,i,o){let a=t?t.injectorIndex:-1,s=0;return JO()&&(s|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function vO(e,t,n,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let a=t[o];if(a===void 0)continue;r??={};let s,c=Pr.None;Array.isArray(a)?(s=a[0],c=a[1]):s=a;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}e===0?yO(r,n,l,s,c):yO(r,n,l,s)}return r}function yO(e,t,n,r,i){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,r):o=e[n]=[t,r],i!==void 0&&o.push(i)}function o4e(e,t,n){let r=t.directiveStart,i=t.directiveEnd,o=e.data,a=t.attrs,s=[],c=null,l=null;for(let u=r;u<i;u++){let f=o[u],d=n?n.get(f):null,p=d?d.inputs:null,h=d?d.outputs:null;c=vO(0,f.inputs,u,c,p),l=vO(1,f.outputs,u,l,h);let m=c!==null&&a!==null&&!FO(t)?b4e(c,u,a):null;s.push(m)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=s,t.inputs=c,t.outputs=l}function a4e(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function VE(e,t,n,r,i,o,a,s){let c=Mo(t,n),l=t.inputs,u;!s&&l!=null&&(u=l[r])?(_E(e,n,u,r,i),qm(t)&&s4e(n,t.index)):t.type&3?(r=a4e(r),i=a!=null?a(i,t.value||"",r):i,o.setProperty(c,r,i)):t.type&12}function s4e(e,t){let n=Wc(t,e);n[Ue]&16||(n[Ue]|=64)}function NE(e,t,n,r){if(ZO()){let i=r===null?null:{"":-1},o=d4e(e,n),a,s;o===null?a=s=null:[a,s]=o,a!==null&&b$(e,t,n,a,i,s),i&&p4e(n,r,i)}n.mergedAttrs=E8(n.mergedAttrs,n.attrs)}function b$(e,t,n,r,i,o){for(let l=0;l<r.length;l++)fS(_m(n,t),e,r[l].type);m4e(n,e.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let a=!1,s=!1,c=y$(e,t,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=E8(n.mergedAttrs,u.hostAttrs),g4e(e,n,t,c,u),h4e(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let f=u.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),a=!0),!s&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),s=!0),c++}o4e(e,n,o)}function c4e(e,t,n,r,i){let o=i.hostBindings;if(o){let a=e.hostBindingOpCodes;a===null&&(a=e.hostBindingOpCodes=[]);let s=~t.index;l4e(a)!=s&&a.push(s),a.push(n,r,o)}}function l4e(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function u4e(e,t,n,r){let i=n.directiveStart,o=n.directiveEnd;qm(n)&&v4e(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||_m(n,t),Gc(r,t);let a=n.initialInputs;for(let s=i;s<o;s++){let c=e.data[s],l=N4(t,e,s,n);if(Gc(l,t),a!==null&&C4e(t,s-i,l,c,n,a),jc(c)){let u=Wc(n.index,t);u[bo]=N4(t,e,s,n)}}}function M$(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,a=Wse();try{H4(o);for(let s=r;s<i;s++){let c=e.data[s],l=t[s];eS(s),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&f4e(c,l)}}finally{H4(-1),eS(a)}}function f4e(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function d4e(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let a=n[o];if(RO(t,a.selectors,!1))if(r||(r=[]),jc(a))if(a.findHostDirectiveDefs!==null){let s=[];i=i||new Map,a.findHostDirectiveDefs(a,s,i),r.unshift(...s,a);let c=s.length;MS(e,t,c)}else r.unshift(a),MS(e,t,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return r===null?null:[r,i]}function MS(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function p4e(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new ze(-301,!1);r.push(t[i],o)}}}function h4e(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;jc(t)&&(n[""]=e)}}function m4e(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function g4e(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=A4(i.type,!0)),a=new V4(o,jc(i),j);e.blueprint[r]=a,n[r]=a,c4e(e,t,r,y$(e,n,i.hostVars,va),i)}function v4e(e,t,n){let r=Mo(t,e),i=C$(n),o=e[ys].rendererFactory,a=16;n.signals?a=4096:n.onPush&&(a=64);let s=c9(e,s9(e,i,null,a,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=s}function y4e(e,t,n,r,i,o){let a=Mo(e,t);x4e(t[wn],a,o,e.value,n,r,i)}function x4e(e,t,n,r,i,o,a){if(o==null)e.removeAttribute(t,i,n);else{let s=a==null?L4(o):a(o,r||"",i);e.setAttribute(t,i,s,n)}}function C4e(e,t,n,r,i,o){let a=o[t];if(a!==null)for(let s=0;s<a.length;){let c=a[s++],l=a[s++],u=a[s++],f=a[s++];v$(r,n,c,l,u,f)}}function b4e(e,t,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let a=e[o];for(let s=0;s<a.length;s+=3)if(a[s]===t){r.push(o,a[s+1],a[s+2],n[i+1]);break}}i+=2}return r}function w$(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function S$(e,t){let n=e.contentQueries;if(n!==null){let r=Or(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a!==-1){let s=e.data[a];sE(o),s.contentQueries(2,t[a],a)}}}finally{Or(r)}}}function c9(e,t){return e[H8]?e[JR][s2]=t:e[H8]=t,e[JR]=t,t}function wS(e,t,n){sE(0);let r=Or(null);try{t(e,n)}finally{Or(r)}}function E$(e){return e[z8]||(e[z8]=[])}function D$(e){return e.cleanup||(e.cleanup=[])}function z$(e,t){let n=e[X0],r=n?n.get(fa,null):null;r&&r.handleError(t)}function _E(e,t,n,r,i){for(let o=0;o<n.length;){let a=n[o++],s=n[o++],c=n[o++],l=t[a],u=e.data[a];v$(u,l,r,s,c,i)}}function H$(e,t,n){let r=YO(t,e);N3e(e[wn],r,n)}function M4e(e,t){let n=Wc(t,e),r=n[Ze];w4e(r,n);let i=n[Ms];i!==null&&n[D8]===null&&(n[D8]=hE(i,n[X0])),kE(r,n,n[bo])}function w4e(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function kE(e,t,n){cE(t);try{let r=e.viewQuery;r!==null&&wS(1,r,n);let i=e.template;i!==null&&x$(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[xs]?.finishViewCreation(e),e.staticContentQueries&&S$(e,t),e.staticViewQueries&&wS(2,e.viewQuery,n);let o=e.components;o!==null&&S4e(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[Ue]&=-5,lE()}}function S4e(e,t){for(let n=0;n<t.length;n++)M4e(e,t[n])}function L$(e,t,n,r){let i=t.tView,a=e[Ue]&4096?4096:16,s=s9(e,i,n,a,null,t,null,null,null,r?.injector??null,r?.dehydratedView??null),c=e[t.index];s[F8]=c;let l=e[xs];return l!==null&&(s[xs]=l.createEmbeddedView(i)),kE(i,s,n),s}function E4e(e,t){let n=v1+t;if(n<e.length)return e[n]}function SS(e,t){return!t||t.firstChild===null||uP(e)}function A$(e,t,n,r=!0){let i=t[Ze];if(F3e(i,t,e,n),r){let a=bS(n,e),s=t[wn],c=EE(s,e[z4]);c!==null&&T3e(i,e[Y1],s,t,c,a)}let o=t[D8];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function D4e(e,t){let n=km(e,t);return n!==void 0&&SE(n[Ze],n),n}function Im(e,t,n,r,i=!1){for(;n!==null;){let o=t[n.index];o!==null&&r.push(ua(o)),ws(o)&&z4e(o,r);let a=n.type;if(a&8)Im(e,t,n.child,r);else if(a&32){let s=wE(n,t),c;for(;c=s();)r.push(c)}else if(a&16){let s=f$(t,n);if(Array.isArray(s))r.push(...s);else{let c=A8(t[c2]);Im(c[Ze],c,s,r,!0)}}n=i?n.projectionNext:n.next}return r}function z4e(e,t){for(let n=v1;n<e.length;n++){let r=e[n],i=r[Ze].firstChild;i!==null&&Im(r[Ze],r,i,t)}e[z4]!==e[Ms]&&t.push(e[z4])}var V$=[];function H4e(e){return e[D4]??L4e(e)}function L4e(e){let t=V$.pop()??Object.create(V4e);return t.lView=e,t}function A4e(e){e.lView[D4]!==e&&(e.lView=null,V$.push(e))}var V4e=k(x({},gR),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{L8(e.lView)},consumerOnSignalRead(){this.lView[D4]=this}});function N$(e){return k$(e[H8])}function _$(e){return k$(e[s2])}function k$(e){for(;e!==null&&!ws(e);)e=e[s2];return e}var T$=100;function I$(e,t=!0,n=0){let r=e[ys],i=r.rendererFactory,o=!1;o||i.begin?.();try{N4e(e,n)}catch(a){throw t&&z$(e,a),a}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function N4e(e,t){ES(e,t);let n=0;for(;rE(e);){if(n===T$)throw new ze(103,!1);n++,ES(e,1)}}function _4e(e,t,n,r){let i=t[Ue];if((i&256)===256)return;let o=!1;!o&&t[ys].inlineEffectRunner?.flush(),cE(t);let a=null,s=null;!o&&k4e(e)&&(s=H4e(t),a=vR(s));try{QO(t),jse(e.bindingStartIndex),n!==null&&x$(e,t,n,2,r);let c=(i&3)===3;if(!o)if(c){let f=e.preOrderCheckHooks;f!==null&&Cm(t,f,null)}else{let f=e.preOrderHooks;f!==null&&bm(t,f,0,null),Ow(t,0)}if(T4e(t),F$(t,0),e.contentQueries!==null&&S$(e,t),!o)if(c){let f=e.contentCheckHooks;f!==null&&Cm(t,f)}else{let f=e.contentHooks;f!==null&&bm(t,f,1),Ow(t,1)}K3e(e,t);let l=e.components;l!==null&&O$(t,l,0);let u=e.viewQuery;if(u!==null&&wS(2,u,r),!o)if(c){let f=e.viewCheckHooks;f!==null&&Cm(t,f)}else{let f=e.viewHooks;f!==null&&bm(t,f,2),Ow(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Iw]){for(let f of t[Iw])f();t[Iw]=null}o||(t[Ue]&=-73)}catch(c){throw L8(t),c}finally{s!==null&&(yR(s,a),A4e(s)),lE()}}function k4e(e){return e.type!==2}function F$(e,t){for(let n=N$(e);n!==null;n=_$(n))for(let r=v1;r<n.length;r++){let i=n[r];R$(i,t)}}function T4e(e){for(let t=N$(e);t!==null;t=_$(t)){if(!(t[Ue]&JS.HasTransplantedViews))continue;let n=t[Q0];for(let r=0;r<n.length;r++){let i=n[r],o=i[$r];_se(i)}}}function I4e(e,t,n){let r=Wc(t,e);R$(r,n)}function R$(e,t){nE(e)&&ES(e,t)}function ES(e,t){let r=e[Ze],i=e[Ue],o=e[D4],a=!!(t===0&&i&16);if(a||=!!(i&64&&t===0),a||=!!(i&1024),a||=!!(o?.dirty&&pw(o)),o&&(o.dirty=!1),e[Ue]&=-9217,a)_4e(r,e,r.template,e[bo]);else if(i&8192){F$(e,1);let s=r.components;s!==null&&O$(e,s,1)}}function O$(e,t,n){for(let r=0;r<t.length;r++)I4e(e,t[r],n)}function TE(e){for(e[ys].changeDetectionScheduler?.notify();e;){e[Ue]|=64;let t=A8(e);if(Dse(e)&&!t)return e;e=t}return null}var _4=class{get rootNodes(){let t=this._lView,n=t[Ze];return Im(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[bo]}set context(t){this._lView[bo]=t}get destroyed(){return(this._lView[Ue]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[$r];if(ws(t)){let n=t[Dm],r=n?n.indexOf(this):-1;r>-1&&(km(t,r),zm(n,r))}this._attachedToViewContainer=!1}SE(this._lView[Ze],this._lView)}onDestroy(t){KO(this._lView,t)}markForCheck(){TE(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ue]&=-129}reattach(){Jw(this._lView),this._lView[Ue]|=128}detectChanges(){this._lView[Ue]|=1024,I$(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ze(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,a$(this._lView[Ze],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ze(902,!1);this._appRef=t,Jw(this._lView)}},k4=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=O4e;let e=t;return e})(),F4e=k4,R4e=class extends F4e{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=L$(this._declarationLView,this._declarationTContainer,t,{injector:n,dehydratedView:r});return new _4(i)}};function O4e(){return l9(li(),st())}function l9(e,t){return e.type&4?new R4e(t,e,i6(e,t)):null}var YGe=new RegExp(`^(\\d+)*(${wce}|${Mce})*(.*)`);var P4e=()=>null;function DS(e,t){return P4e(e,t)}var zS=class{},HS=class{},Fm=class{};function $4e(e){let t=Error(`No component factory found for ${Ri(e)}.`);return t[B4e]=e,t}var B4e="ngComponent";var LS=class{resolveComponentFactory(t){throw $4e(t)}},u9=(()=>{let t=class t{};t.NULL=new LS;let e=t;return e})(),_8=class{},X1=(()=>{let t=class t{constructor(){this.destroyNode=null}};t.__NG_ELEMENT_ID__=()=>U4e();let e=t;return e})();function U4e(){let e=st(),t=li(),n=Wc(t.index,e);return(S4(n)?n:e)[wn]}var j4e=(()=>{let t=class t{};t.\u0275prov=ce({token:t,providedIn:"root",factory:()=>null});let e=t;return e})(),Uw={};function G4e(e){return typeof e=="function"&&e[dw]!==void 0}var xO=new Set;function $8(e){xO.has(e)||(xO.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function P$(e){return G4e(e)&&typeof e.set=="function"}function IE(e){let t=Or(null);try{return e()}finally{Or(t)}}function $$(e){return W4e(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function q4e(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function W4e(e){return e!==null&&(typeof e=="function"||typeof e=="object")}var AS=class{constructor(){}supports(t){return $$(t)}create(t){return new VS(t)}},Y4e=(e,t)=>t,VS=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Y4e}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let a=!r||n&&n.currentIndex<CO(r,i,o)?n:r,s=CO(a,i,o),c=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(n=n._next,a.previousIndex==null)i++;else{o||(o=[]);let l=s-i,u=c-i;if(l!=u){for(let d=0;d<l;d++){let p=d<o.length?o[d]:o[d]=0,h=p+d;u<=h&&h<l&&(o[d]=p+1)}let f=a.previousIndex;o[f]=u-l}}s!==c&&t(a,s,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!$$(t))throw new ze(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,a;if(Array.isArray(t)){this.length=t.length;for(let s=0;s<this.length;s++)o=t[s],a=this._trackByFn(s,o),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,o,a,s),r=!0):(r&&(n=this._verifyReinsertion(n,o,a,s)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,q4e(t,s=>{a=this._trackByFn(i,s),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,s,a,i),r=!0):(r&&(n=this._verifyReinsertion(n,s,a,i)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new NS(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Rm),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Rm),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},NS=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},_S=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Rm=class{constructor(){this.map=new Map}put(t){let n=t.trackById,r=this.map.get(n);r||(r=new _S,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function CO(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function bO(){return new FE([new AS])}var FE=(()=>{let t=class t{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new t(r)}static extend(r){return{provide:t,useFactory:i=>t.create(r,i||bO()),deps:[[t,new mE,new e9]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new ze(901,!1)}};t.\u0275prov=ce({token:t,providedIn:"root",factory:bO});let e=t;return e})();var zs=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=X4e;let e=t;return e})();function X4e(e){return Q4e(li(),st(),(e&16)===16)}function Q4e(e,t,n){if(qm(e)&&!n){let r=Wc(e.index,t);return new _4(r,r)}else if(e.type&47){let r=t[c2];return new _4(r,t)}return null}var B$=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=K4e,t.__NG_ENV_ID__=r=>r;let e=t;return e})(),kS=class extends B${constructor(t){super(),this._lView=t}onDestroy(t){return KO(this._lView,t),()=>Tse(this._lView,t)}};function K4e(){return new kS(st())}function MO(...e){}function Z4e(){let e=typeof ci.requestAnimationFrame=="function",t=ci[e?"requestAnimationFrame":"setTimeout"],n=ci[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}var Rt=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vn(!1),this.onMicrotaskEmpty=new vn(!1),this.onStable=new vn(!1),this.onError=new vn(!1),typeof Zone>"u")throw new ze(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=Z4e().nativeRequestAnimationFrame,tle(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new ze(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new ze(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,t,J4e,MO,MO);try{return o.runTask(a,n,r)}finally{o.cancelTask(a)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},J4e={};function RE(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function ele(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ci,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,TS(e),e.isCheckStableRunning=!0,RE(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),TS(e))}function tle(e){let t=()=>{ele(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,a,s)=>{if(nle(s))return n.invokeTask(i,o,a,s);try{return wO(e),n.invokeTask(i,o,a,s)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),SO(e)}},onInvoke:(n,r,i,o,a,s,c)=>{try{return wO(e),n.invoke(i,o,a,s,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),SO(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,TS(e),RE(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function TS(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function wO(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function SO(e){e._nesting--,RE(e)}function nle(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}var G0=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(G0||{}),rle={destroy(){}};function OE(e,t){!t&&Ice(OE);let n=t?.injector??ue(Ss);if(!L3e(n))return rle;$8("NgAfterNextRender");let r=n.get(PE),i=r.handler??=new FS,o=t?.phase??G0.MixedReadWrite,a=()=>{i.unregister(c),s()},s=n.get(B$).onDestroy(a),c=new IS(n,o,()=>{a(),e()});return i.register(c),{destroy:a}}var IS=class{constructor(t,n,r){this.phase=n,this.callbackFn=r,this.zone=t.get(Rt),this.errorHandler=t.get(fa,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(t){this.errorHandler?.handleError(t)}}},FS=class{constructor(){this.executingCallbacks=!1,this.buckets={[G0.EarlyRead]:new Set,[G0.Write]:new Set,[G0.MixedReadWrite]:new Set,[G0.Read]:new Set},this.deferredCallbacks=new Set}register(t){(this.executingCallbacks?this.deferredCallbacks:this.buckets[t.phase]).add(t)}unregister(t){this.buckets[t.phase].delete(t),this.deferredCallbacks.delete(t)}execute(){this.executingCallbacks=!0;for(let t of Object.values(this.buckets))for(let n of t)n.invoke();this.executingCallbacks=!1;for(let t of this.deferredCallbacks)this.buckets[t.phase].add(t);this.deferredCallbacks.clear()}destroy(){for(let t of Object.values(this.buckets))t.clear();this.deferredCallbacks.clear()}},PE=(()=>{let t=class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=ce({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();function Om(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let a=0;a<t.length;a++){let s=t[a];if(typeof s=="number")o=s;else if(o==1)i=WR(i,s);else if(o==2){let c=s,l=t[++a];r=WR(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Pm=class extends u9{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Uc(t);return new e6(n,this.ngModule)}};function EO(e){let t=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let r=e[n];r!==void 0&&t.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return t}function ile(e){let t=e.toLowerCase();return t==="svg"?zse:t==="math"?Hse:null}var RS=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Jm(r);let i=this.injector.get(t,Uw,r);return i!==Uw||n===Uw?i:this.parentInjector.get(t,n,r)}},e6=class extends Fm{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=EO(t.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return EO(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=bse(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){i=i||this.ngModule;let o=i instanceof Pi?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new RS(t,o):t,s=a.get(_8,null);if(s===null)throw new ze(407,!1);let c=a.get(j4e,null),l=a.get(PE,null),u=a.get(zS,null),f={rendererFactory:s,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:u},d=s.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",h=r?e4e(d,r,this.componentDef.encapsulation,a):o$(d,p,ile(p)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let g=null;h!==null&&(g=hE(h,a,!0));let v=AE(0,null,null,1,0,null,null,null,null,null,null),y=s9(null,v,null,m,null,null,f,d,a,null,g);cE(y);let C,b;try{let M=this.componentDef,S,w=null;M.findHostDirectiveDefs?(S=[],w=new Map,M.findHostDirectiveDefs(M,S,w),S.push(M)):S=[M];let E=ole(y,h),D=ale(E,h,M,S,y,f,d);b=tE(v,Oi),h&&lle(d,M,h,r),n!==void 0&&ule(b,this.ngContentSelectors,n),C=cle(D,M,S,w,y,[fle]),kE(v,y,null)}finally{lE()}return new OS(this.componentType,C,i6(b,y),y,b)}},OS=class extends HS{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new _4(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;_E(o[Ze],o,i,t,n),this.previousInputValues.set(t,n);let a=Wc(this._tNode.index,o);TE(a)}}get injector(){return new E4(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function ole(e,t){let n=e[Ze],r=Oi;return e[r]=t,o6(n,r,2,"#host",null)}function ale(e,t,n,r,i,o,a){let s=i[Ze];sle(r,e,t,a);let c=null;t!==null&&(c=hE(t,i[X0]));let l=o.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let f=s9(i,C$(n),null,u,i[e.index],e,o,l,null,null,c);return s.firstCreatePass&&MS(s,e,r.length-1),c9(i,f),i[e.index]=f}function sle(e,t,n,r){for(let i of e)t.mergedAttrs=E8(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(Om(t,t.mergedAttrs,!0),n!==null&&h$(r,n,t))}function cle(e,t,n,r,i,o){let a=li(),s=i[Ze],c=Mo(a,i);b$(s,i,a,n,null,r);for(let u=0;u<n.length;u++){let f=a.directiveStart+u,d=N4(i,s,f,a);Gc(d,i)}M$(s,i,a),c&&Gc(c,i);let l=N4(i,s,a.directiveStart+a.componentOffset,a);if(e[bo]=i[bo]=l,o!==null)for(let u of o)u(l,t);return zE(s,a,i),l}function lle(e,t,n,r){if(r)Zw(e,n,["ng-version","17.2.3"]);else{let{attrs:i,classes:o}=Mse(t.selectors[0]);i&&Zw(e,n,i),o&&o.length>0&&p$(e,n,o.join(" "))}}function ule(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function fle(){let e=li();n9(st()[Ze],e)}var Yc=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=dle;let e=t;return e})();function dle(){let e=li();return j$(e,st())}var ple=Yc,U$=class extends ple{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return i6(this._hostTNode,this._hostLView)}get injector(){return new E4(this._hostTNode,this._hostLView)}get parentInjector(){let t=xE(this._hostTNode,this._hostLView);if(_P(t)){let n=Vm(t,this._hostLView),r=Am(t),i=n[Ze].data[r+8];return new E4(i,n)}else return new E4(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=DO(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-v1}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=DS(this._lContainer,t.ssrId),s=t.createEmbeddedViewImpl(n||{},o,a);return this.insertImpl(s,i,SS(this._hostTNode,a)),s}createComponent(t,n,r,i,o){let a=t&&!Fce(t),s;if(a)s=n;else{let h=n||{};s=h.index,r=h.injector,i=h.projectableNodes,o=h.environmentInjector||h.ngModuleRef}let c=a?t:new e6(Uc(t)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let m=(a?l:this.parentInjector).get(Pi,null);m&&(o=m)}let u=Uc(c.componentType??{}),f=DS(this._lContainer,u?.id??null),d=f?.firstChild??null,p=c.create(l,i,d,o);return this.insertImpl(p.hostView,s,SS(this._hostTNode,f)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(Nse(i)){let s=this.indexOf(t);if(s!==-1)this.detach(s);else{let c=i[$r],l=new U$(c,c[Y1],c[$r]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),a=this._lContainer;return A$(a,i,o,r),t.attachToViewContainerRef(),lP(jw(a),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=DO(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=km(this._lContainer,n);r&&(zm(jw(this._lContainer),n),SE(r[Ze],r))}detach(t){let n=this._adjustIndex(t,-1),r=km(this._lContainer,n);return r&&zm(jw(this._lContainer),n)!=null?new _4(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function DO(e){return e[Dm]}function jw(e){return e[Dm]||(e[Dm]=[])}function j$(e,t){let n,r=t[e.index];return ws(r)?n=r:(n=w$(r,t,null,e),t[e.index]=n,c9(t,n)),mle(n,t,e,r),new U$(n,e,t)}function hle(e,t){let n=e[wn],r=n.createComment(""),i=Mo(t,e),o=EE(n,i);return Tm(n,o,r,U3e(n,i),!1),r}var mle=yle,gle=()=>!1;function vle(e,t,n){return gle(e,t,n)}function yle(e,t,n,r){if(e[z4])return;let i;n.type&8?i=ua(r):i=hle(t,n),e[z4]=i}var PS=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},$S=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let a=n.getByIndex(o),s=this.queries[a.indexInDeclarationView];i.push(s.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)$E(t,n).matches!==null&&this.queries[n].setDirty()}},BS=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=Dle(t):this.predicate=t}},US=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},jS=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,n,xle(n,o)),this.matchTNodeWithReadOption(t,n,Mm(n,t,o,!1,!1))}else r===k4?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Mm(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Br||i===Yc||i===k4&&n.type&4)this.addMatch(n.index,-2);else{let o=Mm(n,t,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function xle(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function Cle(e,t){return e.type&11?i6(e,t):e.type&4?l9(e,t):null}function ble(e,t,n,r){return n===-1?Cle(t,e):n===-2?Mle(e,t,r):N4(e,e[Ze],n,t)}function Mle(e,t,n){if(n===Br)return i6(t,e);if(n===k4)return l9(t,e);if(n===Yc)return j$(t,e)}function G$(e,t,n,r){let i=t[xs].queries[r];if(i.matches===null){let o=e.data,a=n.matches,s=[];for(let c=0;a!==null&&c<a.length;c+=2){let l=a[c];if(l<0)s.push(null);else{let u=o[l];s.push(ble(t,u,a[c+1],n.metadata.read))}}i.matches=s}return i.matches}function GS(e,t,n,r){let i=e.queries.getByIndex(n),o=i.matches;if(o!==null){let a=G$(e,t,i,n);for(let s=0;s<o.length;s+=2){let c=o[s];if(c>0)r.push(a[s/2]);else{let l=o[s+1],u=t[-c];for(let f=v1;f<u.length;f++){let d=u[f];d[F8]===d[$r]&&GS(d[Ze],d,l,r)}if(u[Q0]!==null){let f=u[Q0];for(let d=0;d<f.length;d++){let p=f[d];GS(p[Ze],p,l,r)}}}}}return r}function wle(e,t){return e[xs].queries[t].queryList}function Sle(e,t,n){let r=new tS((n&4)===4);return r4e(e,t,r,r.destroy),(t[xs]??=new $S).queries.push(new PS(r))-1}function Ele(e,t,n,r){let i=jn();if(i.firstCreatePass){let o=li();zle(i,new BS(t,n,r),o.index),Hle(i,e),(n&2)===2&&(i.staticContentQueries=!0)}return Sle(i,st(),n)}function Dle(e){return e.split(",").map(t=>t.trim())}function zle(e,t,n){e.queries===null&&(e.queries=new US),e.queries.track(new jS(t,n))}function Hle(e,t){let n=e.contentQueries||(e.contentQueries=[]),r=n.length?n[n.length-1]:-1;t!==r&&n.push(e.queries.length-1,t)}function $E(e,t){return e.queries.getByIndex(t)}function Lle(e,t){let n=e[Ze],r=$E(n,t);return r.crossesNgTemplate?GS(n,e,t,[]):G$(n,e,r,t)}function Ale(e){return Object.getPrototypeOf(e.prototype).constructor}function rr(e){let t=Ale(e.type),n=!0,r=[e];for(;t;){let i;if(jc(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new ze(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let a=e;a.inputs=vm(e.inputs),a.inputTransforms=vm(e.inputTransforms),a.declaredInputs=vm(e.declaredInputs),a.outputs=vm(e.outputs);let s=i.hostBindings;s&&Tle(e,s);let c=i.viewQuery,l=i.contentQueries;if(c&&_le(e,c),l&&kle(e,l),Vle(e,i),ase(e.outputs,i.outputs),jc(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let a=0;a<o.length;a++){let s=o[a];s&&s.ngInherit&&s(e),s===rr&&(n=!1)}}t=Object.getPrototypeOf(t)}Nle(r)}function Vle(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=t.inputTransforms[i]}}}function Nle(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=E8(i.hostAttrs,n=E8(n,i.hostAttrs))}}function vm(e){return e===Y0?{}:e===Co?[]:e}function _le(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function kle(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function Tle(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function BE(e){let t=e.inputConfig,n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}e.inputTransforms=n}var qc=class{},k8=class{};var qS=class extends qc{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Pm(this);let i=UO(t);this._bootstrapComponents=i$(i.bootstrap),this._r3Injector=BP(t,n,[{provide:qc,useValue:this},{provide:u9,useValue:this.componentFactoryResolver},...r],Ri(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},WS=class extends k8{constructor(t){super(),this.moduleType=t}create(t){return new qS(this.moduleType,t,[])}};var $m=class extends qc{constructor(t){super(),this.componentFactoryResolver=new Pm(this),this.instance=null;let n=new N8([...t.providers,{provide:qc,useValue:this},{provide:u9,useValue:this.componentFactoryResolver}],t.parent||yE(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function f9(e,t,n=null){return new $m({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var R4=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Fn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function q$(e,t,n){return e[t]=n}function Ile(e,t){return e[t]}function da(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function Fle(e,t,n,r){let i=da(e,t,n);return da(e,t+1,r)||i}function Rle(e,t,n,r,i,o,a,s,c){let l=t.consts,u=o6(t,e,4,a||null,K0(l,s));NE(t,n,u,K0(l,c)),n9(t,u);let f=u.tView=AE(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,u),f.queries=t.queries.embeddedTView(u)),u}function qe(e,t,n,r,i,o,a,s){let c=st(),l=jn(),u=e+Oi,f=l.firstCreatePass?Rle(u,l,c,t,n,r,i,o,a):l.data[u];I4(f,!1);let d=Ole(l,c,f,e);Xm()&&o9(l,c,d,f),Gc(d,c);let p=w$(d,c,d,f);return c[u]=p,c9(c,p),vle(p,f,c),Wm(f)&&HE(l,c,f),a!=null&&LE(c,f,s),qe}var Ole=Ple;function Ple(e,t,n,r){return Qm(!0),t[wn].createComment("")}function a6(e,t,n,r){let i=st(),o=r6();if(da(i,o,t)){let a=jn(),s=Ym();y4e(s,i,e,t,n,r)}return a6}function $le(e,t,n,r){return da(e,r6(),n)?t+L4(n)+r:va}function Ble(e,t,n,r,i,o){let a=Use(),s=Fle(e,a,n,i);return tP(2),s?t+L4(n)+r+L4(i)+o:va}function ym(e,t){return e<<17|t<<2}function T4(e){return e>>17&32767}function Ule(e){return(e&2)==2}function jle(e,t){return e&131071|t<<17}function YS(e){return e|2}function t6(e){return(e&131068)>>2}function Gw(e,t){return e&-131069|t<<2}function Gle(e){return(e&1)===1}function XS(e){return e|1}function qle(e,t,n,r,i,o){let a=o?t.classBindings:t.styleBindings,s=T4(a),c=t6(a);e[r]=n;let l=!1,u;if(Array.isArray(n)){let f=n;u=f[1],(u===null||R8(f,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let d=T4(e[s+1]);e[r+1]=ym(d,s),d!==0&&(e[d+1]=Gw(e[d+1],r)),e[s+1]=jle(e[s+1],r)}else e[r+1]=ym(s,0),s!==0&&(e[s+1]=Gw(e[s+1],r)),s=r;else e[r+1]=ym(c,0),s===0?s=r:e[c+1]=Gw(e[c+1],r),c=r;l&&(e[r+1]=YS(e[r+1])),zO(e,u,r,!0),zO(e,u,r,!1),Wle(t,u,e,r,o),a=ym(s,c),o?t.classBindings=a:t.styleBindings=a}function Wle(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&R8(o,t)>=0&&(n[r+1]=XS(n[r+1]))}function zO(e,t,n,r){let i=e[n+1],o=t===null,a=r?T4(i):t6(i),s=!1;for(;a!==0&&(s===!1||o);){let c=e[a],l=e[a+1];Yle(c,t)&&(s=!0,e[a+1]=r?XS(l):YS(l)),a=r?T4(l):t6(l)}s&&(e[n+1]=r?YS(i):XS(i))}function Yle(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?R8(e,t)>=0:!1}function ae(e,t,n){let r=st(),i=r6();if(da(r,i,t)){let o=jn(),a=Ym();VE(o,a,r,e,t,r[wn],n,!1)}return ae}function HO(e,t,n,r,i){let o=t.inputs,a=i?"class":"style";_E(e,n,o[a],a,r)}function B8(e,t){return Xle(e,t,null,!0),B8}function Xle(e,t,n,r){let i=st(),o=jn(),a=tP(2);if(o.firstUpdatePass&&Kle(o,e,a,r),t!==va&&da(i,a,t)){let s=o.data[F4()];n0e(o,s,i,i[wn],e,i[a+1]=r0e(t,n),r,a)}}function Qle(e,t){return t>=e.expandoStartIndex}function Kle(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[F4()],a=Qle(e,n);i0e(o,r)&&t===null&&!a&&(t=!1),t=Zle(i,o,t,r),qle(i,o,t,n,a,r)}}function Zle(e,t,n,r){let i=Yse(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=qw(null,e,t,n,r),n=T8(n,t.attrs,r),o=null);else{let a=t.directiveStylingLast;if(a===-1||e[a]!==i)if(n=qw(i,e,t,n,r),o===null){let c=Jle(e,t,r);c!==void 0&&Array.isArray(c)&&(c=qw(null,e,t,c[1],r),c=T8(c,t.attrs,r),e0e(e,t,r,c))}else o=t0e(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function Jle(e,t,n){let r=n?t.classBindings:t.styleBindings;if(t6(r)!==0)return e[T4(r)]}function e0e(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[T4(i)]=r}function t0e(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let a=e[o].hostAttrs;r=T8(r,a,n)}return T8(r,t.attrs,n)}function qw(e,t,n,r,i){let o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(s===-1?s=n.directiveStart:s++;s<a&&(o=t[s],r=T8(r,o.hostAttrs,i),o!==e);)s++;return e!==null&&(n.directiveStylingLast=s),r}function T8(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];typeof a=="number"?i=a:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),ice(e,a,n?!0:t[++o]))}return e===void 0?null:e}function n0e(e,t,n,r,i,o,a,s){if(!(t.type&3))return;let c=e.data,l=c[s+1],u=Gle(l)?LO(c,t,n,i,t6(l),a):void 0;if(!Bm(u)){Bm(o)||Ule(l)&&(o=LO(c,null,n,i,s,a));let f=YO(F4(),n);X3e(r,a,f,i,o)}}function LO(e,t,n,r,i,o){let a=t===null,s;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,f=u===null,d=n[i+1];d===va&&(d=f?Co:void 0);let p=f?Fw(d,r):u===r?d:void 0;if(l&&!Bm(p)&&(p=Fw(c,r)),Bm(p)&&(s=p,a))return s;let h=e[i+1];i=a?T4(h):t6(h)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(s=Fw(c,r))}return s}function Bm(e){return e!==void 0}function r0e(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Ri(l2(e)))),e}function i0e(e,t){return(e.flags&(t?8:16))!==0}function ui(e,t,n){$8("NgControlFlow");let r=st(),i=r6(),o=o0e(r,Oi+e),a=0;if(da(r,i,t)){let s=Or(null);try{if(D4e(o,a),t!==-1){let c=a0e(r[Ze],Oi+t),l=DS(o,c.tView.ssrId),u=L$(r,c,n,{dehydratedView:l});A$(o,u,a,SS(c,l))}}finally{Or(s)}}else{let s=E4e(o,a);s!==void 0&&(s[bo]=n)}}function o0e(e,t){return e[t]}function a0e(e,t){return tE(e,t)}function s0e(e,t,n,r,i,o){let a=t.consts,s=K0(a,i),c=o6(t,e,2,r,s);return NE(t,n,c,K0(a,o)),c.attrs!==null&&Om(c,c.attrs,!1),c.mergedAttrs!==null&&Om(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function H(e,t,n,r){let i=st(),o=jn(),a=Oi+e,s=i[wn],c=o.firstCreatePass?s0e(a,o,i,t,n,r):o.data[a],l=c0e(o,i,c,s,t,e);i[a]=l;let u=Wm(c);return I4(c,!0),h$(s,l,c),(c.flags&32)!==32&&Xm()&&o9(o,i,l,c),Ise()===0&&Gc(l,i),Fse(),u&&(HE(o,i,c),zE(o,c,i)),r!==null&&LE(i,c),H}function N(){let e=li();iE()?oE():(e=e.parent,I4(e,!1));let t=e;Ose(t)&&Pse(),Rse();let n=jn();return n.firstCreatePass&&(n9(n,e),eE(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&jce(t)&&HO(n,t,st(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Gce(t)&&HO(n,t,st(),t.stylesWithoutHost,!1),N}function dt(e,t,n,r){return H(e,t,n,r),N(),dt}var c0e=(e,t,n,r,i,o)=>(Qm(!0),o$(r,i,Kse()));function l0e(e,t,n,r,i){let o=t.consts,a=K0(o,r),s=o6(t,e,8,"ng-container",a);a!==null&&Om(s,a,!0);let c=K0(o,i);return NE(t,n,s,c),t.queries!==null&&t.queries.elementStart(t,s),s}function y1(e,t,n){let r=st(),i=jn(),o=e+Oi,a=i.firstCreatePass?l0e(o,i,r,t,n):i.data[o];I4(a,!0);let s=u0e(i,r,a,e);return r[o]=s,Xm()&&o9(i,r,s,a),Gc(s,r),Wm(a)&&(HE(i,r,a),zE(i,a,r)),n!=null&&LE(r,a),y1}function x1(){let e=li(),t=jn();return iE()?oE():(e=e.parent,I4(e,!1)),t.firstCreatePass&&(n9(t,e),eE(e)&&t.queries.elementEnd(e)),x1}var u0e=(e,t,n,r)=>(Qm(!0),_3e(t[wn],""));function fi(){return st()}function UE(e,t,n){let r=st(),i=r6();if(da(r,i,t)){let o=jn(),a=Ym();VE(o,a,r,e,t,r[wn],n,!0)}return UE}var Um="en-US";var f0e=Um;function d0e(e){typeof e=="string"&&(f0e=e.toLowerCase().replace(/_/g,"-"))}function Fe(e,t,n,r){let i=st(),o=jn(),a=li();return W$(o,i,i[wn],a,e,t,r),Fe}function p0e(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===n&&i[o+1]===r){let s=t[z8],c=i[o+2];return s.length>c?s[c]:null}typeof a=="string"&&(o+=2)}return null}function W$(e,t,n,r,i,o,a){let s=Wm(r),l=e.firstCreatePass&&D$(e),u=t[bo],f=E$(t),d=!0;if(r.type&3||a){let m=Mo(r,t),g=a?a(m):m,v=f.length,y=a?b=>a(ua(b[r.index])):r.index,C=null;if(!a&&s&&(C=p0e(e,t,i,r.index)),C!==null){let b=C.__ngLastListenerFn__||C;b.__ngNextListenerFn__=o,C.__ngLastListenerFn__=o,d=!1}else{o=VO(r,t,u,o,!1);let b=n.listen(g,i,o);f.push(o,b),l&&l.push(i,y,v,v+1)}}else o=VO(r,t,u,o,!1);let p=r.outputs,h;if(d&&p!==null&&(h=p[i])){let m=h.length;if(m)for(let g=0;g<m;g+=2){let v=h[g],y=h[g+1],M=t[v][y].subscribe(o),S=f.length;if(f.push(o,M),l){let w=typeof M=="function"?S+1:-(S+1);l.push(i,r.index,S,w)}}}}function AO(e,t,n,r){try{return sa(6,t,n),n(r)!==!1}catch(i){return z$(e,i),!1}finally{sa(7,t,n)}}function VO(e,t,n,r,i){return function o(a){if(a===Function)return r;let s=e.componentOffset>-1?Wc(e.index,t):t;TE(s);let c=AO(t,n,r,a),l=o.__ngNextListenerFn__;for(;l;)c=AO(t,n,l,a)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&a.preventDefault(),c}}function Pe(e=1){return Qse(e)}function h0e(e,t){let n=null,r=gse(e);for(let i=0;i<t.length;i++){let o=t[i];if(o==="*"){n=i;continue}if(r===null?RO(e,o,!0):xse(r,o))return i}return n}function Y$(e){let t=st()[c2][Y1];if(!t.projection){let n=e?e.length:1,r=t.projection=nce(n,null),i=r.slice(),o=t.child;for(;o!==null;){let a=e?h0e(o,e):0;a!==null&&(i[a]?i[a].projectionNext=o:r[a]=o,i[a]=o),o=o.next}}}function X$(e,t=0,n){let r=st(),i=jn(),o=o6(i,Oi+e,16,null,n||null);o.projection===null&&(o.projection=t),oE(),(!r[D8]||JO())&&(o.flags&32)!==32&&W3e(i,r,o)}function Q$(e,t,n,r){Ele(e,t,n,r)}function K$(e){let t=st(),n=jn(),r=nP();sE(r+1);let i=$E(n,r);if(e.dirty&&Vse(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=Lle(t,r);e.reset(o,Jse),e.notifyOnChanges()}return!0}return!1}function Z$(){return wle(st(),nP())}function m0e(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function O4(e){let t=Bse();return XO(t,Oi+e)}function T(e,t=""){let n=st(),r=jn(),i=e+Oi,o=r.firstCreatePass?o6(r,i,1,t,null):r.data[i],a=g0e(r,n,o,t,e);n[i]=a,Xm()&&o9(r,n,a,o),I4(o,!1)}var g0e=(e,t,n,r,i)=>(Qm(!0),V3e(t[wn],r));function Sn(e){return Me("",e,""),Sn}function Me(e,t,n){let r=st(),i=$le(r,e,t,n);return i!==va&&H$(r,F4(),i),Me}function U8(e,t,n,r,i){let o=st(),a=Ble(o,e,t,n,r,i);return a!==va&&H$(o,F4(),a),U8}function qt(e,t,n){P$(t)&&(t=t());let r=st(),i=r6();if(da(r,i,t)){let o=jn(),a=Ym();VE(o,a,r,e,t,r[wn],n,!1)}return qt}function Zt(e,t){let n=P$(e);return n&&e.set(t),n}function Wt(e,t){let n=st(),r=jn(),i=li();return W$(r,n,n[wn],i,e,t),Wt}function v0e(e,t,n){let r=jn();if(r.firstCreatePass){let i=jc(e);QS(n,r.data,r.blueprint,i,!0),QS(t,r.data,r.blueprint,i,!1)}}function QS(e,t,n,r,i){if(e=Fi(e),Array.isArray(e))for(let o=0;o<e.length;o++)QS(e[o],t,n,r,i);else{let o=jn(),a=st(),s=li(),c=J0(e)?e:Fi(e.provide),l=zP(e),u=s.providerIndexes&1048575,f=s.directiveStart,d=s.providerIndexes>>20;if(J0(e)||!e.multi){let p=new V4(l,i,j),h=Yw(c,t,i?u:u+d,f);h===-1?(fS(_m(s,a),o,c),Ww(o,e,t.length),t.push(c),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),n.push(p),a.push(p)):(n[h]=p,a[h]=p)}else{let p=Yw(c,t,u+d,f),h=Yw(c,t,u,u+d),m=p>=0&&n[p],g=h>=0&&n[h];if(i&&!g||!i&&!m){fS(_m(s,a),o,c);let v=C0e(i?x0e:y0e,n.length,i,r,l);!i&&g&&(n[h].providerFactory=v),Ww(o,e,t.length,0),t.push(c),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),n.push(v),a.push(v)}else{let v=J$(n[i?h:p],l,!i&&r);Ww(o,e,p>-1?p:h,v)}!i&&r&&g&&n[h].componentProviders++}}}function Ww(e,t,n,r){let i=J0(t),o=Lce(t);if(i||o){let c=(o?Fi(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function J$(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Yw(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function y0e(e,t,n,r){return KS(this.multi,[])}function x0e(e,t,n,r){let i=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,s=N4(n,n[Ze],this.providerFactory.index,r);o=s.slice(0,a),KS(i,o);for(let c=a;c<s.length;c++)o.push(s[c])}else o=[],KS(i,o);return o}function KS(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function C0e(e,t,n,r,i){let o=new V4(e,n,j);return o.multi=[],o.index=t,o.componentProviders=0,J$(o,i,r&&!n),o}function ya(e,t=[]){return n=>{n.providersResolver=(r,i)=>v0e(r,i?i(e):e,t)}}var b0e=(()=>{let t=class t{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=SP(!1,r.type),o=i.length>0?f9([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=ce({token:t,providedIn:"environment",factory:()=>new t(le(Pi))});let e=t;return e})();function Ce(e){$8("NgStandalone"),e.getStandaloneInjector=t=>t.get(b0e).getOrCreateStandaloneInjector(e)}function Hs(e,t,n){let r=aE()+e,i=st();return i[r]===va?q$(i,r,n?t.call(n):t()):Ile(i,r)}function eB(e,t,n,r){return tB(st(),aE(),e,t,n,r)}function M0e(e,t){let n=e[t];return n===va?void 0:n}function tB(e,t,n,r,i,o){let a=t+n;return da(e,a,i)?q$(e,a+1,o?r.call(o,i):r(i)):M0e(e,a+1)}function d9(e,t){let n=jn(),r,i=e+Oi;n.firstCreatePass?(r=w0e(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=A4(r.type,!0)),a,s=g1(j);try{let c=Nm(!1),l=o();return Nm(c),m0e(n,st(),i,l),l}finally{g1(s)}}function w0e(e,t){if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(e===r.name)return r}}function p9(e,t,n){let r=e+Oi,i=st(),o=XO(i,r);return S0e(i,r)?tB(i,aE(),t,o.transform,n,o):o.transform(n)}function S0e(e,t){return e[Ze].data[t].pure}function Ls(e,t){return l9(e,t)}var h9=(()=>{let t=class t{log(r){console.log(r)}warn(r){console.warn(r)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();var jE=new ke(""),j8=new ke(""),m9=(()=>{let t=class t{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,GE||(E0e(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Rt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==a),r()},i)),this._callbacks.push({doneCb:r,timeoutId:a,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};t.\u0275fac=function(i){return new(i||t)(le(Rt),le(g9),le(j8))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})(),g9=(()=>{let t=class t{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return GE?.findTestabilityInTree(this,r,i)??null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();function E0e(e){GE=e}var GE;function Xc(e){return!!e&&typeof e.then=="function"}function qE(e){return!!e&&typeof e.subscribe=="function"}var v9=new ke(""),nB=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=ue(v9,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let a=o();if(Xc(a))r.push(a);else if(qE(a)){let s=new Promise((c,l)=>{a.subscribe({complete:c,error:l})});r.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),y9=new ke("");function D0e(){CR(()=>{throw new ze(600,!1)})}function z0e(e){return e.isBoundToModule}function H0e(e,t,n){try{let r=n();return Xc(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var P4=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ue(UP),this.afterRenderEffectManager=ue(PE),this.componentTypes=[],this.components=[],this.isStable=ue(R4).hasPendingTasks.pipe(We(r=>!r)),this._injector=ue(Pi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Fm;if(!this._injector.get(nB).done){let p=!o&&BO(r),h=!1;throw new ze(405,h)}let s;o?s=r:s=this._injector.get(u9).resolveComponentFactory(r),this.componentTypes.push(s.componentType);let c=z0e(s)?void 0:this._injector.get(qc),l=i||s.selector,u=s.create(Ss.NULL,[],l,c),f=u.location.nativeElement,d=u.injector.get(jE,null);return d?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),Xw(this.components,u),d?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new ze(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===T$)throw new ze(103,!1);let o=r===0;for(let{_lView:a,notifyErrorHandler:s}of this._views)!o&&!Qw(a)||this.detectChangesInView(a,s,o);if(r++,i.executeInternalCallbacks(),!this._views.some(({_lView:a})=>Qw(a))&&(i.execute(),!this._views.some(({_lView:a})=>Qw(a))))break}}detectChangesInView(r,i,o){let a;o?(a=0,r[Ue]|=1024):r[Ue]&64?a=0:a=1,I$(r,i,a)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Xw(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(y9,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Xw(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new ze(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Xw(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Qw(e){return rE(e)}var ZS=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},x9=(()=>{let t=class t{compileModuleSync(r){return new WS(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=UO(r),a=i$(o.declarations).reduce((s,c)=>{let l=Uc(c);return l&&s.push(new e6(l)),s},[]);return new ZS(i,a)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var L0e=(()=>{let t=class t{constructor(){this.zone=ue(Rt),this.applicationRef=ue(P4)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function A0e(e){return[{provide:Rt,useFactory:e},{provide:Z0,multi:!0,useFactory:()=>{let t=ue(L0e,{optional:!0});return()=>t.initialize()}},{provide:Z0,multi:!0,useFactory:()=>{let t=ue(k0e);return()=>{t.initialize()}}},{provide:UP,useFactory:V0e}]}function V0e(){let e=ue(Rt),t=ue(fa);return n=>e.runOutsideAngular(()=>t.handleError(n))}function N0e(e){let t=A0e(()=>new Rt(_0e(e)));return O8([[],t])}function _0e(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var k0e=(()=>{let t=class t{constructor(){this.subscription=new In,this.initialized=!1,this.zone=ue(Rt),this.pendingTasks=ue(R4)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Rt.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Rt.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function T0e(){return typeof $localize<"u"&&$localize.locale||Um}var WE=new ke("",{providedIn:"root",factory:()=>ue(WE,at.Optional|at.SkipSelf)||T0e()});var rB=new ke("");var Sm=null;function I0e(e=[],t){return Ss.create({name:t,providers:[{provide:t9,useValue:"platform"},{provide:rB,useValue:new Set([()=>Sm=null])},...e]})}function F0e(e=[]){if(Sm)return Sm;let t=I0e(e);return Sm=t,D0e(),R0e(t),t}function R0e(e){e.get(fE,null)?.forEach(n=>n())}var iB=(()=>{let t=class t{constructor(r){}};t.\u0275fac=function(i){return new(i||t)(le(P4))},t.\u0275mod=$i({type:t}),t.\u0275inj=Bi({});let e=t;return e})();function oB(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=F0e(r),o=[N0e(),...n||[]],s=new $m({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=s.get(Rt);return c.run(()=>{s.resolveInjectorInitializers();let l=s.get(fa,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:p=>{l.handleError(p)}})});let f=()=>s.destroy(),d=i.get(rB);return d.add(f),s.onDestroy(()=>{u.unsubscribe(),d.delete(f)}),H0e(l,c,()=>{let p=s.get(nB);return p.runInitializers(),p.donePromise.then(()=>{let h=s.get(WE,Um);d0e(h||Um);let m=s.get(P4);return t!==void 0&&m.bootstrap(t),m})})})}catch(t){return Promise.reject(t)}}function $4(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function aB(e){let t=Uc(e);if(!t)return null;let n=new e6(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var dB=null;function xa(){return dB}function pB(e){dB??=e}var C9=class{};var Ur=new ke(""),nD=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:()=>ue(O0e),providedIn:"platform"});let e=t;return e})(),hB=new ke(""),O0e=(()=>{let t=class t extends nD{constructor(){super(),this._doc=ue(Ur),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xa().getBaseHref(this._doc)}onPopState(r){let i=xa().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=xa().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:()=>new t,providedIn:"platform"});let e=t;return e})();function rD(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function sB(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function As(e){return e&&e[0]!=="?"?"?"+e:e}var Vs=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:()=>ue(iD),providedIn:"root"});let e=t;return e})(),mB=new ke(""),iD=(()=>{let t=class t extends Vs{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ue(Ur).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return rD(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+As(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,a){let s=this.prepareExternalUrl(o+As(a));this._platformLocation.pushState(r,i,s)}replaceState(r,i,o,a){let s=this.prepareExternalUrl(o+As(a));this._platformLocation.replaceState(r,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(i){return new(i||t)(le(nD),le(mB,8))},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),gB=(()=>{let t=class t extends Vs{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=rD(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,a){let s=this.prepareExternalUrl(o+As(a));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(r,i,s)}replaceState(r,i,o,a){let s=this.prepareExternalUrl(o+As(a));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(i){return new(i||t)(le(nD),le(mB,8))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})(),c6=(()=>{let t=class t{constructor(r){this._subject=new vn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=B0e(sB(cB(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+As(i))}normalize(r){return t.stripTrailingSlash($0e(this._basePath,cB(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+As(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+As(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};t.normalizeQueryParams=As,t.joinWithSlash=rD,t.stripTrailingSlash=sB,t.\u0275fac=function(i){return new(i||t)(le(Vs))},t.\u0275prov=ce({token:t,factory:()=>P0e(),providedIn:"root"});let e=t;return e})();function P0e(){return new c6(le(Vs))}function $0e(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function cB(e){return e.replace(/\/index.html$/,"")}function B0e(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function b9(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var YE=/\s+/,lB=[],vB=(()=>{let t=class t{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=lB,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(YE):lB}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(YE):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(YE).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};t.\u0275fac=function(i){return new(i||t)(j(Br),j(X1))},t.\u0275dir=kt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[Pr.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let e=t;return e})();var XE=class{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},gr=(()=>{let t=class t{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,a,s)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new XE(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(a===null?void 0:a);else if(a!==null){let c=i.get(a);i.move(c,s),uB(c,o)}});for(let o=0,a=i.length;o<a;o++){let c=i.get(o).context;c.index=o,c.count=a,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let a=i.get(o.currentIndex);uB(a,o)})}static ngTemplateContextGuard(r,i){return!0}};t.\u0275fac=function(i){return new(i||t)(j(Yc),j(k4),j(FE))},t.\u0275dir=kt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let e=t;return e})();function uB(e,t){e.context.$implicit=t.item}var di=(()=>{let t=class t{constructor(r,i){this._viewContainer=r,this._context=new QE,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){fB("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){fB("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};t.\u0275fac=function(i){return new(i||t)(j(Yc),j(k4))},t.\u0275dir=kt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let e=t;return e})(),QE=class{constructor(){this.$implicit=null,this.ngIf=null}};function fB(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${Ri(t)}'.`)}function U0e(e,t){return new ze(2100,!1)}var KE=class{createSubscription(t,n){return IE(()=>t.subscribe({next:n,error:r=>{throw r}}))}dispose(t){IE(()=>t.unsubscribe())}},ZE=class{createSubscription(t,n){return t.then(n,r=>{throw r})}dispose(t){}},j0e=new ZE,G0e=new KE,M9=(()=>{let t=class t{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(Xc(r))return j0e;if(qE(r))return G0e;throw U0e(t,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};t.\u0275fac=function(i){return new(i||t)(j(zs,16))},t.\u0275pipe=OO({name:"async",type:t,pure:!1,standalone:!0});let e=t;return e})();var l6=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=$i({type:t}),t.\u0275inj=Bi({});let e=t;return e})(),oD="browser",q0e="server";function W0e(e){return e===oD}function aD(e){return e===q0e}var yB=(()=>{let t=class t{};t.\u0275prov=ce({token:t,providedIn:"root",factory:()=>W0e(ue(pa))?new JE(ue(Ur),window):new eD});let e=t;return e})(),JE=class{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let n=Y0e(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function Y0e(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let a=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(a)return a}i=r.nextNode()}}return null}var eD=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},s6=class{};var q8=class{},S9=class{},B4=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),a=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let a=this.headers.get(n);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}break}}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var lD=class{encodeKey(t){return xB(t)}encodeValue(t){return xB(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function K0e(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[a,s]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=n.get(a)||[];c.push(s),n.set(a,c)}),n}var Z0e=/%(\d[a-f0-9])/gi,J0e={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function xB(e){return encodeURIComponent(e).replace(Z0e,(t,n)=>J0e[n]??t)}function w9(e){return`${e}`}var Qc=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new lD,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=K0e(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],i=Array.isArray(r)?r.map(w9):[w9(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(w9(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(w9(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var uD=class{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function e6e(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function CB(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function bB(e){return typeof Blob<"u"&&e instanceof Blob}function MB(e){return typeof FormData<"u"&&e instanceof FormData}function t6e(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var G8=class e{constructor(t,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(e6e(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new B4,this.context??=new uD,!this.params)this.params=new Qc,this.urlWithParams=n;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=n;else{let s=n.indexOf("?"),c=s===-1?"?":s<n.length-1?"&":"";this.urlWithParams=n+c+a}}}serializeBody(){return this.body===null?null:CB(this.body)||bB(this.body)||MB(this.body)||t6e(this.body)||typeof this.body=="string"?this.body:this.body instanceof Qc?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||MB(this.body)?null:bB(this.body)?this.body.type||null:CB(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Qc?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.body!==void 0?t.body:this.body,a=t.withCredentials!==void 0?t.withCredentials:this.withCredentials,s=t.reportProgress!==void 0?t.reportProgress:this.reportProgress,c=t.headers||this.headers,l=t.params||this.params,u=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((f,d)=>f.set(d,t.setHeaders[d]),c)),t.setParams&&(l=Object.keys(t.setParams).reduce((f,d)=>f.set(d,t.setParams[d]),l)),new e(n,r,o,{params:l,headers:c,context:u,reportProgress:s,responseType:i,withCredentials:a})}},u6=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(u6||{}),W8=class{constructor(t,n=D9.Ok,r="OK"){this.headers=t.headers||new B4,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},fD=class e extends W8{constructor(t={}){super(t),this.type=u6.ResponseHeader}clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},f6=class e extends W8{constructor(t={}){super(t),this.type=u6.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},E9=class extends W8{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},D9=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(D9||{});function cD(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var Ui=(()=>{let t=class t{constructor(r){this.handler=r}request(r,i,o={}){let a;if(r instanceof G8)a=r;else{let l;o.headers instanceof B4?l=o.headers:l=new B4(o.headers);let u;o.params&&(o.params instanceof Qc?u=o.params:u=new Qc({fromObject:o.params})),a=new G8(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let s=Ve(a).pipe(vs(l=>this.handler.handle(l)));if(r instanceof G8||o.observe==="events")return s;let c=s.pipe(h1(l=>l instanceof f6));switch(o.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return c.pipe(We(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(We(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(We(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(We(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Qc().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,cD(o,i))}post(r,i,o={}){return this.request("POST",r,cD(o,i))}put(r,i,o={}){return this.request("PUT",r,cD(o,i))}};t.\u0275fac=function(i){return new(i||t)(le(q8))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})();function DB(e,t){return t(e)}function n6e(e,t){return(n,r)=>t.intercept(n,{handle:i=>e(i,r)})}function r6e(e,t,n){return(r,i)=>ma(n,()=>t(r,o=>e(o,i)))}var dD=new ke(""),pD=new ke(""),i6e=new ke(""),o6e=new ke("");function a6e(){let e=null;return(t,n)=>{e===null&&(e=(ue(dD,{optional:!0})??[]).reduceRight(n6e,DB));let r=ue(R4),i=r.add();return e(t,n).pipe(Pc(()=>r.remove(i)))}}var wB=(()=>{let t=class t extends q8{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=ue(R4);let o=ue(o6e,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(pD),...this.injector.get(i6e,[])]));this.chain=o.reduceRight((a,s)=>r6e(a,s,this.injector),DB)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(Pc(()=>this.pendingTasks.remove(i)))}};t.\u0275fac=function(i){return new(i||t)(le(S9),le(Pi))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})();var s6e=/^\)\]\}',?\n/;function c6e(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var SB=(()=>{let t=class t{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new ze(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Kt(i.\u0275loadImpl()):Ve(null)).pipe(m1(()=>new gt(a=>{let s=i.build();if(s.open(r.method,r.urlWithParams),r.withCredentials&&(s.withCredentials=!0),r.headers.forEach((g,v)=>s.setRequestHeader(g,v.join(","))),r.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let g=r.detectContentTypeHeader();g!==null&&s.setRequestHeader("Content-Type",g)}if(r.responseType){let g=r.responseType.toLowerCase();s.responseType=g!=="json"?g:"text"}let c=r.serializeBody(),l=null,u=()=>{if(l!==null)return l;let g=s.statusText||"OK",v=new B4(s.getAllResponseHeaders()),y=c6e(s)||r.url;return l=new fD({headers:v,status:s.status,statusText:g,url:y}),l},f=()=>{let{headers:g,status:v,statusText:y,url:C}=u(),b=null;v!==D9.NoContent&&(b=typeof s.response>"u"?s.responseText:s.response),v===0&&(v=b?D9.Ok:0);let M=v>=200&&v<300;if(r.responseType==="json"&&typeof b=="string"){let S=b;b=b.replace(s6e,"");try{b=b!==""?JSON.parse(b):null}catch(w){b=S,M&&(M=!1,b={error:w,text:b})}}M?(a.next(new f6({body:b,headers:g,status:v,statusText:y,url:C||void 0})),a.complete()):a.error(new E9({error:b,headers:g,status:v,statusText:y,url:C||void 0}))},d=g=>{let{url:v}=u(),y=new E9({error:g,status:s.status||0,statusText:s.statusText||"Unknown Error",url:v||void 0});a.error(y)},p=!1,h=g=>{p||(a.next(u()),p=!0);let v={type:u6.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),r.responseType==="text"&&s.responseText&&(v.partialText=s.responseText),a.next(v)},m=g=>{let v={type:u6.UploadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),a.next(v)};return s.addEventListener("load",f),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),r.reportProgress&&(s.addEventListener("progress",h),c!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(c),a.next({type:u6.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",f),s.removeEventListener("timeout",d),r.reportProgress&&(s.removeEventListener("progress",h),c!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}};t.\u0275fac=function(i){return new(i||t)(le(s6))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})(),zB=new ke(""),l6e="XSRF-TOKEN",u6e=new ke("",{providedIn:"root",factory:()=>l6e}),f6e="X-XSRF-TOKEN",d6e=new ke("",{providedIn:"root",factory:()=>f6e}),z9=class{},p6e=(()=>{let t=class t{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=b9(r,this.cookieName),this.lastCookieString=r),this.lastToken}};t.\u0275fac=function(i){return new(i||t)(le(Ur),le(pa),le(u6e))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})();function h6e(e,t){let n=e.url.toLowerCase();if(!ue(zB)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let r=ue(z9).getToken(),i=ue(d6e);return r!=null&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),t(e)}var HB=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(HB||{});function m6e(e,t){return{\u0275kind:e,\u0275providers:t}}function LB(...e){let t=[Ui,SB,wB,{provide:q8,useExisting:wB},{provide:S9,useExisting:SB},{provide:pD,useValue:h6e,multi:!0},{provide:zB,useValue:!0},{provide:z9,useClass:p6e}];for(let n of e)t.push(...n.\u0275providers);return O8(t)}var EB=new ke("");function AB(){return m6e(HB.LegacyInterceptors,[{provide:EB,useFactory:a6e},{provide:pD,useExisting:EB,multi:!0}])}var gD=class extends C9{constructor(){super(...arguments),this.supportsDOMEvents=!0}},vD=class e extends gD{static makeCurrent(){pB(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=g6e();return n==null?null:v6e(n)}resetBaseElement(){Y8=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return b9(document.cookie,t)}},Y8=null;function g6e(){return Y8=Y8||document.querySelector("base"),Y8?Y8.getAttribute("href"):null}function v6e(e){return new URL(e,document.baseURI).pathname}var yD=class{addToWindow(t){ci.getAngularTestability=(r,i=!0)=>{let o=t.findTestabilityInTree(r,i);if(o==null)throw new ze(5103,!1);return o},ci.getAllAngularTestabilities=()=>t.getAllTestabilities(),ci.getAllAngularRootElements=()=>t.getAllRootElements();let n=r=>{let i=ci.getAllAngularTestabilities(),o=i.length,a=function(){o--,o==0&&r()};i.forEach(s=>{s.whenStable(a)})};ci.frameworkStabilizers||(ci.frameworkStabilizers=[]),ci.frameworkStabilizers.push(n)}findTestabilityInTree(t,n,r){if(n==null)return null;let i=t.getTestability(n);return i??(r?xa().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},y6e=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})(),xD=new ke(""),kB=(()=>{let t=class t{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(a=>a.supports(r)),!i)throw new ze(5101,!1);return this._eventNameToPlugin.set(r,i),i}};t.\u0275fac=function(i){return new(i||t)(le(xD),le(Rt))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})(),H9=class{constructor(t){this._doc=t}},hD="ng-app-id",TB=(()=>{let t=class t{constructor(r,i,o,a={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=aD(a),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${hD}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let a=o.get(r);return a.usage+=i,a.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,a=o?.get(i);if(a?.parentNode===r)return o.delete(i),a.removeAttribute(hD),a;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(hD,this.appId),r.appendChild(s),s}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),a=this.styleRef,s=a.get(i)?.elements;s?s.push(o):a.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};t.\u0275fac=function(i){return new(i||t)(le(Ur),le(Zm),le(dE,8),le(pa))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})(),mD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},bD=/%COMP%/g,IB="%COMP%",x6e=`_nghost-${IB}`,C6e=`_ngcontent-${IB}`,b6e=!0,M6e=new ke("",{providedIn:"root",factory:()=>b6e});function w6e(e){return C6e.replace(bD,e)}function S6e(e){return x6e.replace(bD,e)}function FB(e,t){return t.map(n=>n.replace(bD,e))}var VB=(()=>{let t=class t{constructor(r,i,o,a,s,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=a,this.doc=s,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=aD(c),this.defaultRenderer=new X8(r,s,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===la.ShadowDom&&(i=k(x({},i),{encapsulation:la.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof L9?o.applyToHost(r):o instanceof Q8&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,a=o.get(i.id);if(!a){let s=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case la.Emulated:a=new L9(l,u,i,this.appId,f,s,c,d);break;case la.ShadowDom:return new CD(l,u,r,i,s,c,this.nonce,d);default:a=new Q8(l,u,i,f,s,c,d);break}o.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(i){return new(i||t)(le(kB),le(TB),le(Zm),le(M6e),le(Ur),le(pa),le(Rt),le(dE))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})(),X8=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(mD[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(NB(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(NB(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new ze(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=mD[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=mD[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(bs.DashCase|bs.Important)?t.style.setProperty(n,r,i&bs.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&bs.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=xa().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function NB(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var CD=class extends X8{constructor(t,n,r,i,o,a,s,c){super(t,o,a,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=FB(i.id,i.styles);for(let u of l){let f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=u,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Q8=class extends X8{constructor(t,n,r,i,o,a,s,c){super(t,o,a,s),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?FB(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},L9=class extends Q8{constructor(t,n,r,i,o,a,s,c){let l=i+"-"+r.id;super(t,n,r,o,a,s,c,l),this.contentAttr=w6e(l),this.hostAttr=S6e(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},E6e=(()=>{let t=class t extends H9{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};t.\u0275fac=function(i){return new(i||t)(le(Ur))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})(),_B=["alt","control","meta","shift"],D6e={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},z6e={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},H6e=(()=>{let t=class t extends H9{constructor(r){super(r)}supports(r){return t.parseEventName(r)!=null}addEventListener(r,i,o){let a=t.parseEventName(i),s=t.eventCallback(a.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xa().onAndCancel(r,a.domEventName,s))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let a=t._normalizeKey(i.pop()),s="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),s="code."),_B.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=a,i.length!=0||a.length===0)return null;let l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(r,i){let o=D6e[r.key]||r.key,a="";return i.indexOf("code.")>-1&&(o=r.code,a="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),_B.forEach(s=>{if(s!==o){let c=z6e[s];c(r)&&(a+=s+".")}}),a+=o,a===i)}static eventCallback(r,i,o){return a=>{t.matchEventFullKeyCode(a,r)&&o.runGuarded(()=>i(a))}}static _normalizeKey(r){return r==="esc"?"escape":r}};t.\u0275fac=function(i){return new(i||t)(le(Ur))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})();function RB(e,t){return oB(x({rootComponent:e},L6e(t)))}function L6e(e){return{appProviders:[...OB,...e?.providers??[]],platformProviders:_6e}}function A6e(){vD.makeCurrent()}function V6e(){return new fa}function N6e(){return fP(document),document}var _6e=[{provide:pa,useValue:oD},{provide:fE,useValue:A6e,multi:!0},{provide:Ur,useFactory:N6e,deps:[]}];var k6e=new ke(""),T6e=[{provide:j8,useClass:yD,deps:[]},{provide:jE,useClass:m9,deps:[Rt,g9,j8]},{provide:m9,useClass:m9,deps:[Rt,g9,j8]}],OB=[{provide:t9,useValue:"root"},{provide:fa,useFactory:V6e,deps:[]},{provide:xD,useClass:E6e,multi:!0,deps:[Ur,Rt,pa]},{provide:xD,useClass:H6e,multi:!0,deps:[Ur]},VB,TB,kB,{provide:_8,useExisting:VB},{provide:s6,useClass:y6e,deps:[]},[]],PB=(()=>{let t=class t{constructor(r){}static withServerTransition(r){return{ngModule:t,providers:[{provide:Zm,useValue:r.appId}]}}};t.\u0275fac=function(i){return new(i||t)(le(k6e,12))},t.\u0275mod=$i({type:t}),t.\u0275inj=Bi({providers:[...OB,...T6e],imports:[l6,iB]});let e=t;return e})();var $B=(()=>{let t=class t{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};t.\u0275fac=function(i){return new(i||t)(le(Ur))},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var MD=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:function(i){let o=null;return i?o=new(i||t):o=le(I6e),o},providedIn:"root"});let e=t;return e})(),I6e=(()=>{let t=class t extends MD{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case u2.NONE:return i;case u2.HTML:return Es(i,"HTML")?l2(i):bE(this._doc,String(i)).toString();case u2.STYLE:return Es(i,"Style")?l2(i):i;case u2.SCRIPT:if(Es(i,"Script"))return l2(i);throw new ze(5200,!1);case u2.URL:return Es(i,"URL")?l2(i):i9(String(i));case u2.RESOURCE_URL:if(Es(i,"ResourceURL"))return l2(i);throw new ze(5201,!1);default:throw new ze(5202,!1)}}bypassSecurityTrustHtml(r){return qP(r)}bypassSecurityTrustStyle(r){return WP(r)}bypassSecurityTrustScript(r){return YP(r)}bypassSecurityTrustUrl(r){return XP(r)}bypassSecurityTrustResourceUrl(r){return QP(r)}};t.\u0275fac=function(i){return new(i||t)(le(Ur))},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var tt="primary",f5=Symbol("RouteTitle"),zD=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function g6(e){return new zD(e)}function F6e(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],s=e[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function R6e(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Ca(e[n],t[n]))return!1;return!0}function Ca(e,t){let n=e?HD(e):void 0,r=t?HD(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!KB(e[i],t[i]))return!1;return!0}function HD(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function KB(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function ZB(e){return e.length>0?e[e.length-1]:null}function e3(e){return zw(e)?e:Xc(e)?Kt(Promise.resolve(e)):Ve(e)}var O6e={exact:eU,subset:tU},JB={exact:P6e,subset:$6e,ignored:()=>!0};function UB(e,t,n){return O6e[n.paths](e.root,t.root,n.matrixParams)&&JB[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function P6e(e,t){return Ca(e,t)}function eU(e,t,n){if(!G4(e.segments,t.segments)||!N9(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!eU(e.children[r],t.children[r],n))return!1;return!0}function $6e(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>KB(e[n],t[n]))}function tU(e,t,n){return nU(e,t,t.segments,n)}function nU(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!G4(i,n)||t.hasChildren()||!N9(i,n,r))}else if(e.segments.length===n.length){if(!G4(e.segments,n)||!N9(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!tU(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!G4(e.segments,i)||!N9(e.segments,i,r)||!e.children[tt]?!1:nU(e.children[tt],t,o,r)}}function N9(e,t,n){return t.every((r,i)=>JB[n](e[i].parameters,r.parameters))}var Kc=class{constructor(t=new Nt([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=g6(this.queryParams),this._queryParamMap}toString(){return j6e.serialize(this)}},Nt=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _9(this)}},j4=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=g6(this.parameters),this._parameterMap}toString(){return iU(this)}};function B6e(e,t){return G4(e,t)&&e.every((n,r)=>Ca(n.parameters,t[r].parameters))}function G4(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function U6e(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===tt&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==tt&&(n=n.concat(t(i,r)))}),n}var d5=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:()=>new r5,providedIn:"root"});let e=t;return e})(),r5=class{parse(t){let n=new AD(t);return new Kc(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${K8(t.root,!0)}`,r=W6e(t.queryParams),i=typeof t.fragment=="string"?`#${G6e(t.fragment)}`:"";return`${n}${r}${i}`}},j6e=new r5;function _9(e){return e.segments.map(t=>iU(t)).join("/")}function K8(e,t){if(!e.hasChildren())return _9(e);if(t){let n=e.children[tt]?K8(e.children[tt],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==tt&&r.push(`${i}:${K8(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=U6e(e,(r,i)=>i===tt?[K8(e.children[tt],!1)]:[`${i}:${K8(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[tt]!=null?`${_9(e)}/${n[0]}`:`${_9(e)}/(${n.join("//")})`}}function rU(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function A9(e){return rU(e).replace(/%3B/gi,";")}function G6e(e){return encodeURI(e)}function LD(e){return rU(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function k9(e){return decodeURIComponent(e)}function jB(e){return k9(e.replace(/\+/g,"%20"))}function iU(e){return`${LD(e.path)}${q6e(e.parameters)}`}function q6e(e){return Object.entries(e).map(([t,n])=>`;${LD(t)}=${LD(n)}`).join("")}function W6e(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${A9(n)}=${A9(i)}`).join("&"):`${A9(n)}=${A9(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var Y6e=/^[^\/()?;#]+/;function wD(e){let t=e.match(Y6e);return t?t[0]:""}var X6e=/^[^\/()?;=#]+/;function Q6e(e){let t=e.match(X6e);return t?t[0]:""}var K6e=/^[^=?&#]+/;function Z6e(e){let t=e.match(K6e);return t?t[0]:""}var J6e=/^[^&#]+/;function eue(e){let t=e.match(J6e);return t?t[0]:""}var AD=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nt([],{}):new Nt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[tt]=new Nt(t,n)),r}parseSegment(){let t=wD(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new ze(4009,!1);return this.capture(t),new j4(k9(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=Q6e(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=wD(this.remaining);i&&(r=i,this.capture(r))}t[k9(n)]=k9(r)}parseQueryParam(t){let n=Z6e(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let a=eue(this.remaining);a&&(r=a,this.capture(r))}let i=jB(n),o=jB(r);if(t.hasOwnProperty(i)){let a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=wD(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ze(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=tt);let a=this.parseChildren();n[o]=Object.keys(a).length===1?a[tt]:new Nt([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new ze(4011,!1)}};function oU(e){return e.segments.length>0?new Nt([],{[tt]:e}):e}function aU(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=aU(i);if(r===tt&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))t[a]=s;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new Nt(e.segments,t);return tue(n)}function tue(e){if(e.numberOfChildren===1&&e.children[tt]){let t=e.children[tt];return new Nt(e.segments.concat(t.segments),t.children)}return e}function v6(e){return e instanceof Kc}function nue(e,t,n=null,r=null){let i=sU(e);return cU(i,t,n,r)}function sU(e){let t;function n(o){let a={};for(let c of o.children){let l=n(c);a[c.outlet]=l}let s=new Nt(o.url,a);return o===e&&(t=s),s}let r=n(e.root),i=oU(r);return t??i}function cU(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return SD(i,i,i,n,r);let o=rue(t);if(o.toRoot())return SD(i,i,new Nt([],{}),n,r);let a=iue(o,i,e),s=a.processChildren?e5(a.segmentGroup,a.index,o.commands):uU(a.segmentGroup,a.index,o.commands);return SD(i,a.segmentGroup,s,n,r)}function T9(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function i5(e){return typeof e=="object"&&e!=null&&e.outlets}function SD(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let a;e===t?a=n:a=lU(e,t,n);let s=oU(aU(a));return new Kc(s,o,i)}function lU(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=lU(o,t,n)}),new Nt(e.segments,r)}var I9=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&T9(r[0]))throw new ze(4003,!1);let i=r.find(i5);if(i&&i!==ZB(r))throw new ze(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function rue(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new I9(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([c,l])=>{s[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:s}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((s,c)=>{c==0&&s==="."||(c==0&&s===""?n=!0:s===".."?t++:s!=""&&i.push(s))}),i):[...i,o]},[]);return new I9(n,t,r)}var h6=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function iue(e,t,n){if(e.isAbsolute)return new h6(t,!0,0);if(!n)return new h6(t,!1,NaN);if(n.parent===null)return new h6(n,!0,0);let r=T9(e.commands[0])?0:1,i=n.segments.length-1+r;return oue(n,i,e.numberOfDoubleDots)}function oue(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ze(4005,!1);i=r.segments.length}return new h6(r,!1,i-o)}function aue(e){return i5(e[0])?e[0].outlets:{[tt]:e}}function uU(e,t,n){if(e??=new Nt([],{}),e.segments.length===0&&e.hasChildren())return e5(e,t,n);let r=sue(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new Nt(e.segments.slice(0,r.pathIndex),{});return o.children[tt]=new Nt(e.segments.slice(r.pathIndex),e.children),e5(o,0,i)}else return r.match&&i.length===0?new Nt(e.segments,{}):r.match&&!e.hasChildren()?VD(e,t,n):r.match?e5(e,0,i):VD(e,t,n)}function e5(e,t,n){if(n.length===0)return new Nt(e.segments,{});{let r=aue(n),i={};if(Object.keys(r).some(o=>o!==tt)&&e.children[tt]&&e.numberOfChildren===1&&e.children[tt].segments.length===0){let o=e5(e.children[tt],t,n);return new Nt(e.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=uU(e.children[o],t,a))}),Object.entries(e.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new Nt(e.segments,i)}}function sue(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let a=e.segments[i],s=n[r];if(i5(s))break;let c=`${s}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!qB(c,l,a))return o;r+=2}else{if(!qB(c,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function VD(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(i5(o)){let c=cue(o.outlets);return new Nt(r,c)}if(i===0&&T9(n[0])){let c=e.segments[t];r.push(new j4(c.path,GB(n[0]))),i++;continue}let a=i5(o)?o.outlets[tt]:`${o}`,s=i<n.length-1?n[i+1]:null;a&&s&&T9(s)?(r.push(new j4(a,GB(s))),i+=2):(r.push(new j4(a,{})),i++)}return new Nt(r,{})}function cue(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=VD(new Nt([],{}),0,r))}),t}function GB(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function qB(e,t,n){return e==n.path&&Ca(t,n.parameters)}var t5="imperative",vr=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(vr||{}),Eo=class{constructor(t,n){this.id=t,this.url=n}},y6=class extends Eo{constructor(t,n,r="imperative",i=null){super(t,n),this.type=vr.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},f2=class extends Eo{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=vr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},So=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(So||{}),F9=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(F9||{}),Zc=class extends Eo{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=vr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Jc=class extends Eo{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=vr.NavigationSkipped}},o5=class extends Eo{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=vr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},R9=class extends Eo{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=vr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ND=class extends Eo{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=vr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_D=class extends Eo{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=vr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},kD=class extends Eo{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=vr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},TD=class extends Eo{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=vr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ID=class{constructor(t){this.route=t,this.type=vr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},FD=class{constructor(t){this.route=t,this.type=vr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},RD=class{constructor(t){this.snapshot=t,this.type=vr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},OD=class{constructor(t){this.snapshot=t,this.type=vr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},PD=class{constructor(t){this.snapshot=t,this.type=vr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$D=class{constructor(t){this.snapshot=t,this.type=vr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},O9=class{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=vr.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},a5=class{},s5=class{constructor(t){this.url=t}};var BD=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new p5,this.attachRef=null}},p5=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new BD,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),P9=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=UD(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=UD(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=jD(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return jD(t,this._root).map(n=>n.value)}};function UD(e,t){if(e===t.value)return t;for(let n of t.children){let r=UD(e,n);if(r)return r}return null}function jD(e,t){if(e===t.value)return[t];for(let n of t.children){let r=jD(e,n);if(r.length)return r.unshift(t),r}return[]}var Q1=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function p6(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var $9=class extends P9{constructor(t,n){super(t),this.snapshot=n,ez(this,t)}toString(){return this.snapshot.toString()}};function fU(e){let t=lue(e),n=new Fn([new j4("",{})]),r=new Fn({}),i=new Fn({}),o=new Fn({}),a=new Fn(""),s=new Vt(n,r,o,a,i,tt,e,t.root);return s.snapshot=t.root,new $9(new Q1(s,[]),t)}function lue(e){let t={},n={},r={},i="",o=new c5([],t,r,i,n,tt,e,null,{});return new B9("",new Q1(o,[]))}var Vt=class{constructor(t,n,r,i,o,a,s,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(We(l=>l[f5]))??Ve(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(We(t=>g6(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(We(t=>g6(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function JD(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:x(x({},t.params),e.params),data:x(x({},t.data),e.data),resolve:x(x(x(x({},e.data),t.data),i?.data),e._resolvedData)}:r={params:x({},e.params),data:x({},e.data),resolve:x(x({},e.data),e._resolvedData??{})},i&&pU(i)&&(r.resolve[f5]=i.title),r}var c5=class{get title(){return this.data?.[f5]}constructor(t,n,r,i,o,a,s,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=g6(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=g6(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},B9=class extends P9{constructor(t,n){super(n),this.url=t,ez(this,n)}toString(){return dU(this._root)}};function ez(e,t){t.value._routerState=e,t.children.forEach(n=>ez(e,n))}function dU(e){let t=e.children.length>0?` { ${e.children.map(dU).join(", ")} } `:"";return`${e.value}${t}`}function ED(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Ca(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Ca(t.params,n.params)||e.paramsSubject.next(n.params),R6e(t.url,n.url)||e.urlSubject.next(n.url),Ca(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function GD(e,t){let n=Ca(e.params,t.params)&&B6e(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||GD(e.parent,t.parent))}function pU(e){return typeof e.title=="string"||e.title===null}var tz=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=tt,this.activateEvents=new vn,this.deactivateEvents=new vn,this.attachEvents=new vn,this.detachEvents=new vn,this.parentContexts=ue(p5),this.location=ue(Yc),this.changeDetector=ue(zs),this.environmentInjector=ue(Pi),this.inputBinder=ue(W9,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ze(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ze(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ze(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new ze(4013,!1);this._activatedRoute=r;let o=this.location,s=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new qD(r,c,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=kt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[wo]});let e=t;return e})(),qD=class{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Vt?this.route:t===p5?this.childContexts:this.parent.get(t,n)}},W9=new ke(""),WB=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=w8([i.queryParams,i.params,i.data]).pipe(m1(([a,s,c],l)=>(c=x(x(x({},a),s),c),l===0?Ve(c):Promise.resolve(c)))).subscribe(a=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let s=aB(i.component);if(!s){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of s.inputs)r.activatedComponentRef.setInput(c,a[c])});this.outletDataSubscriptions.set(r,o)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})();function uue(e,t,n){let r=l5(e,t._root,n?n._root:void 0);return new $9(r,t)}function l5(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=fue(e,t,n);return new Q1(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(s=>l5(e,s)),a}}let r=due(t.value),i=t.children.map(o=>l5(e,o));return new Q1(r,i)}}function fue(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return l5(e,r,i);return l5(e,r)})}function due(e){return new Vt(new Fn(e.url),new Fn(e.params),new Fn(e.queryParams),new Fn(e.fragment),new Fn(e.data),e.outlet,e.component,e)}var hU="ngNavigationCancelingError";function mU(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=v6(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=gU(!1,So.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function gU(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[hU]=!0,n.cancellationCode=t,n}function pue(e){return vU(e)&&v6(e.url)}function vU(e){return!!e&&e[hU]}var hue=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["ng-component"]],standalone:!0,features:[Ce],decls:1,vars:0,template:function(i,o){i&1&&dt(0,"router-outlet")},dependencies:[tz],encapsulation:2});let e=t;return e})();function mue(e,t){return e.providers&&!e._injector&&(e._injector=f9(e.providers,t,`Route: ${e.path}`)),e._injector??t}function nz(e){let t=e.children&&e.children.map(nz),n=t?k(x({},e),{children:t}):x({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==tt&&(n.component=hue),n}function ba(e){return e.outlet||tt}function gue(e,t){let n=e.filter(r=>ba(r)===t);return n.push(...e.filter(r=>ba(r)!==t)),n}function h5(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var vue=(e,t,n,r)=>We(i=>(new WD(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),WD=class{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),ED(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=p6(n);t.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=p6(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),s=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:s})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=p6(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=p6(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new $D(o.value.snapshot))}),t.children.length&&this.forwardEvent(new OD(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(ED(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),ED(s.route.value),this.activateChildRoutes(t,null,a.children)}else{let s=h5(i.snapshot);a.attachRef=null,a.route=i,a.injector=s,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,r)}},U9=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},m6=class{constructor(t,n){this.component=t,this.route=n}};function yue(e,t,n){let r=e._root,i=t?t._root:null;return Z8(r,i,n,[r.value])}function xue(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function C6(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!pP(e)?e:t.get(e):r}function Z8(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=p6(t);return e.children.forEach(a=>{Cue(a,o[a.value.outlet],n,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>n5(s,n.getContext(a),i)),i}function Cue(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,a=t?t.value:null,s=n?n.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let c=bue(a,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new U9(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Z8(e,t,s?s.children:null,r,i):Z8(e,t,n,r,i),c&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new m6(s.outlet.component,a))}else a&&n5(t,s,i),i.canActivateChecks.push(new U9(r)),o.component?Z8(e,null,s?s.children:null,r,i):Z8(e,null,n,r,i);return i}function bue(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!G4(e.url,t.url);case"pathParamsOrQueryParamsChange":return!G4(e.url,t.url)||!Ca(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!GD(e,t)||!Ca(e.queryParams,t.queryParams);case"paramsChange":default:return!GD(e,t)}}function n5(e,t,n){let r=p6(e),i=e.value;Object.entries(r).forEach(([o,a])=>{i.component?t?n5(a,t.children.getContext(o),n):n5(a,null,n):n5(a,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new m6(t.outlet.component,i)):n.canDeactivateChecks.push(new m6(null,i)):n.canDeactivateChecks.push(new m6(null,i))}function m5(e){return typeof e=="function"}function Mue(e){return typeof e=="boolean"}function wue(e){return e&&m5(e.canLoad)}function Sue(e){return e&&m5(e.canActivate)}function Eue(e){return e&&m5(e.canActivateChild)}function Due(e){return e&&m5(e.canDeactivate)}function zue(e){return e&&m5(e.canMatch)}function yU(e){return e instanceof gs||e?.name==="EmptyError"}var V9=Symbol("INITIAL_VALUE");function x6(){return m1(e=>w8(e.map(t=>t.pipe(de(1),_w(V9)))).pipe(We(t=>{for(let n of t)if(n!==!0){if(n===V9)return V9;if(n===!1||n instanceof Kc)return n}return!0}),h1(t=>t!==V9),de(1)))}function Hue(e,t){return Un(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return a.length===0&&o.length===0?Ve(k(x({},n),{guardsResult:!0})):Lue(a,r,i,e).pipe(Un(s=>s&&Mue(s)?Aue(r,o,e,t):Ve(s)),We(s=>k(x({},n),{guardsResult:s})))})}function Lue(e,t,n,r){return Kt(e).pipe(Un(i=>Tue(i.component,i.route,n,t,r)),aa(i=>i!==!0,!0))}function Aue(e,t,n,r){return Kt(t).pipe(vs(i=>P0(Nue(i.route.parent,r),Vue(i.route,r),kue(e,i.path,n),_ue(e,i.route,n))),aa(i=>i!==!0,!0))}function Vue(e,t){return e!==null&&t&&t(new PD(e)),Ve(!0)}function Nue(e,t){return e!==null&&t&&t(new RD(e)),Ve(!0)}function _ue(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return Ve(!0);let i=r.map(o=>fm(()=>{let a=h5(t)??n,s=C6(o,a),c=Sue(s)?s.canActivate(t,e):ma(a,()=>s(t,e));return e3(c).pipe(aa())}));return Ve(i).pipe(x6())}function kue(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(a=>xue(a)).filter(a=>a!==null).map(a=>fm(()=>{let s=a.guards.map(c=>{let l=h5(a.node)??n,u=C6(c,l),f=Eue(u)?u.canActivateChild(r,e):ma(l,()=>u(r,e));return e3(f).pipe(aa())});return Ve(s).pipe(x6())}));return Ve(o).pipe(x6())}function Tue(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return Ve(!0);let a=o.map(s=>{let c=h5(t)??i,l=C6(s,c),u=Due(l)?l.canDeactivate(e,t,n,r):ma(c,()=>l(e,t,n,r));return e3(u).pipe(aa())});return Ve(a).pipe(x6())}function Iue(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return Ve(!0);let o=i.map(a=>{let s=C6(a,e),c=wue(s)?s.canLoad(t,n):ma(e,()=>s(t,n));return e3(c)});return Ve(o).pipe(x6(),xU(r))}function xU(e){return bw(er(t=>{if(v6(t))throw mU(e,t)}),We(t=>t===!0))}function Fue(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return Ve(!0);let o=i.map(a=>{let s=C6(a,e),c=zue(s)?s.canMatch(t,n):ma(e,()=>s(t,n));return e3(c)});return Ve(o).pipe(x6(),xU(r))}var u5=class{constructor(t){this.segmentGroup=t||null}},j9=class extends Error{constructor(t){super(),this.urlTree=t}};function d6(e){return O0(new u5(e))}function Rue(e){return O0(new ze(4e3,!1))}function Oue(e){return O0(gU(!1,So.GuardRejected))}var YD=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Ve(r);if(i.numberOfChildren>1||!i.children[tt])return Rue(t.redirectTo);i=i.children[tt]}}applyRedirectCommands(t,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n.startsWith("/"))throw new j9(i);return i}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new Kc(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let s=o.substring(1);r[i]=n[s]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),a={};return Object.entries(n.children).forEach(([s,c])=>{a[s]=this.createSegmentGroup(t,c,r,i)}),new Nt(o,a)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new ze(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},XD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Pue(e,t,n,r,i){let o=rz(e,t,n);return o.matched?(r=mue(t,r),Fue(r,t,n,i).pipe(We(a=>a===!0?o:x({},XD)))):Ve(o)}function rz(e,t,n){if(t.path==="**")return $ue(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?x({},XD):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||F6e)(n,e,t);if(!i)return x({},XD);let o={};Object.entries(i.posParams??{}).forEach(([s,c])=>{o[s]=c.path});let a=i.consumed.length>0?x(x({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function $ue(e){return{matched:!0,parameters:e.length>0?ZB(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function YB(e,t,n,r){return n.length>0&&jue(e,n,r)?{segmentGroup:new Nt(t,Uue(r,new Nt(n,e.children))),slicedSegments:[]}:n.length===0&&Gue(e,n,r)?{segmentGroup:new Nt(e.segments,Bue(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Nt(e.segments,e.children),slicedSegments:n}}function Bue(e,t,n,r){let i={};for(let o of n)if(Y9(e,t,o)&&!r[ba(o)]){let a=new Nt([],{});i[ba(o)]=a}return x(x({},r),i)}function Uue(e,t){let n={};n[tt]=t;for(let r of e)if(r.path===""&&ba(r)!==tt){let i=new Nt([],{});n[ba(r)]=i}return n}function jue(e,t,n){return n.some(r=>Y9(e,t,r)&&ba(r)!==tt)}function Gue(e,t,n){return n.some(r=>Y9(e,t,r))}function Y9(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function que(e,t,n,r){return ba(e)!==r&&(r===tt||!Y9(t,n,e))?!1:rz(t,e,n).matched}function Wue(e,t,n){return t.length===0&&!e.children[n]}var QD=class{};function Yue(e,t,n,r,i,o,a="emptyOnly"){return new KD(e,t,n,r,i,a,o).recognize()}var Xue=31,KD=class{constructor(t,n,r,i,o,a,s){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new YD(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new ze(4002,`'${t.segmentGroup}'`)}recognize(){let t=YB(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(We(n=>{let r=new c5([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,{},tt,this.rootComponentType,null,{}),i=new Q1(r,n),o=new B9("",i),a=nue(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root,null),{state:o,tree:a}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,tt).pipe(o2(r=>{if(r instanceof j9)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof u5?this.noMatchError(r):r}))}inheritParamsAndData(t,n){let r=t.value,i=JD(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(t,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0).pipe(We(o=>o instanceof Q1?[o]:[]))}processChildren(t,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return Kt(i).pipe(vs(o=>{let a=r.children[o],s=gue(n,o);return this.processSegmentGroup(t,s,a,o)}),Nw((o,a)=>(o.push(...a),o)),Oc(null),Vw(),Un(o=>{if(o===null)return d6(r);let a=CU(o);return Que(a),Ve(a)}))}processSegment(t,n,r,i,o,a){return Kt(n).pipe(vs(s=>this.processSegmentAgainstRoute(s._injector??t,n,s,r,i,o,a).pipe(o2(c=>{if(c instanceof u5)return Ve(null);throw c}))),aa(s=>!!s),o2(s=>{if(yU(s))return Wue(r,i,o)?Ve(new QD):d6(r);throw s}))}processSegmentAgainstRoute(t,n,r,i,o,a,s){return que(r,i,o,a)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,a):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,a):d6(i):d6(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,a){let{matched:s,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=rz(n,i,o);if(!s)return d6(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Xue&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,f).pipe(Un(d=>this.processSegment(t,r,n,d.concat(u),a,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){let a=Pue(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(m1(s=>s.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(m1(({routes:c})=>{let l=r._loadedInjector??t,{consumedSegments:u,remainingSegments:f,parameters:d}=s,p=new c5(u,d,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,Zue(r),ba(r),r.component??r._loadedComponent??null,r,Jue(r)),{segmentGroup:h,slicedSegments:m}=YB(n,u,f,c);if(m.length===0&&h.hasChildren())return this.processChildren(l,c,h).pipe(We(v=>v===null?null:new Q1(p,v)));if(c.length===0&&m.length===0)return Ve(new Q1(p,[]));let g=ba(r)===o;return this.processSegment(l,c,h,m,g?tt:o,!0).pipe(We(v=>new Q1(p,v instanceof Q1?[v]:[])))}))):d6(n)))}getChildConfig(t,n,r){return n.children?Ve({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?Ve({routes:n._loadedRoutes,injector:n._loadedInjector}):Iue(t,n,r,this.urlSerializer).pipe(Un(i=>i?this.configLoader.loadChildren(t,n).pipe(er(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):Oue(n))):Ve({routes:[],injector:t})}};function Que(e){e.sort((t,n)=>t.value.outlet===tt?-1:n.value.outlet===tt?1:t.value.outlet.localeCompare(n.value.outlet))}function Kue(e){let t=e.value.routeConfig;return t&&t.path===""}function CU(e){let t=[],n=new Set;for(let r of e){if(!Kue(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=CU(r.children);t.push(new Q1(r.value,i))}return t.filter(r=>!n.has(r))}function Zue(e){return e.data||{}}function Jue(e){return e.resolve||{}}function efe(e,t,n,r,i,o){return Un(a=>Yue(e,t,n,r,a.extractedUrl,i,o).pipe(We(({state:s,tree:c})=>k(x({},a),{targetSnapshot:s,urlAfterRedirects:c}))))}function tfe(e,t){return Un(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Ve(n);let o=new Set(i.map(c=>c.route)),a=new Set;for(let c of o)if(!a.has(c))for(let l of bU(c))a.add(l);let s=0;return Kt(a).pipe(vs(c=>o.has(c)?nfe(c,r,e,t):(c.data=JD(c,c.parent,e).resolve,Ve(void 0))),er(()=>s++),$0(1),Un(c=>s===a.size?Ve(n):xo))})}function bU(e){let t=e.children.map(n=>bU(n)).flat();return[e,...t]}function nfe(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!pU(i)&&(o[f5]=i.title),rfe(o,e,t,r).pipe(We(a=>(e._resolvedData=a,e.data=JD(e,e.parent,n).resolve,null)))}function rfe(e,t,n,r){let i=HD(e);if(i.length===0)return Ve({});let o={};return Kt(i).pipe(Un(a=>ife(e[a],t,n,r).pipe(aa(),er(s=>{o[a]=s}))),$0(1),Aw(o),o2(a=>yU(a)?xo:O0(a)))}function ife(e,t,n,r){let i=h5(t)??r,o=C6(e,i),a=o.resolve?o.resolve(t,n):ma(i,()=>o(t,n));return e3(a)}function DD(e){return m1(t=>{let n=e(t);return n?Kt(n).pipe(We(()=>t)):Ve(t)})}var MU=(()=>{let t=class t{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(a=>a.outlet===tt);return i}getResolvedTitleForRoute(r){return r.data[f5]}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:()=>ue(ofe),providedIn:"root"});let e=t;return e})(),ofe=(()=>{let t=class t extends MU{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};t.\u0275fac=function(i){return new(i||t)(le($B))},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),g5=new ke("",{providedIn:"root",factory:()=>({})}),G9=new ke(""),iz=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ue(x9)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Ve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=e3(r.loadComponent()).pipe(We(wU),er(a=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a}),Pc(()=>{this.componentLoaders.delete(r)})),o=new F0(i,()=>new d1).pipe(I0());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ve({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let a=afe(i,this.compiler,r,this.onLoadEndListener).pipe(Pc(()=>{this.childrenLoaders.delete(i)})),s=new F0(a,()=>new d1).pipe(I0());return this.childrenLoaders.set(i,s),s}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function afe(e,t,n,r){return e3(e.loadChildren()).pipe(We(wU),Un(i=>i instanceof k8||Array.isArray(i)?Ve(i):Kt(t.compileModuleAsync(i))),We(i=>{r&&r(e);let o,a,s=!1;return Array.isArray(i)?(a=i,s=!0):(o=i.create(n).injector,a=o.get(G9,[],{optional:!0,self:!0}).flat()),{routes:a.map(nz),injector:o}}))}function sfe(e){return e&&typeof e=="object"&&"default"in e}function wU(e){return sfe(e)?e.default:e}var oz=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:()=>ue(cfe),providedIn:"root"});let e=t;return e})(),cfe=(()=>{let t=class t{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),SU=new ke(""),EU=new ke("");function lfe(e,t,n){let r=e.get(EU),i=e.get(Ur);return e.get(Rt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,a=new Promise(l=>{o=l}),s=i.startViewTransition(()=>(o(),ufe(e))),{onViewTransitionCreated:c}=r;return c&&ma(e,()=>c({transition:s,from:t,to:n})),a})}function ufe(e){return new Promise(t=>{OE(t,{injector:e})})}var az=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new d1,this.transitionAbortSubject=new d1,this.configLoader=ue(iz),this.environmentInjector=ue(Pi),this.urlSerializer=ue(d5),this.rootContexts=ue(p5),this.location=ue(c6),this.inputBindingEnabled=ue(W9,{optional:!0})!==null,this.titleStrategy=ue(MU),this.options=ue(g5,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ue(oz),this.createViewTransition=ue(SU,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ve(void 0),this.rootComponentType=null;let r=o=>this.events.next(new ID(o)),i=o=>this.events.next(new FD(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(k(x(x({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Fn({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:t5,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(h1(a=>a.id!==0),We(a=>k(x({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),m1(a=>{this.currentTransition=a;let s=!1,c=!1;return Ve(a).pipe(er(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?k(x({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),m1(l=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&f!=="reload"){let d="";return this.events.next(new Jc(l.id,this.urlSerializer.serialize(l.rawUrl),d,F9.IgnoredSameUrlNavigation)),l.resolve(null),xo}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Ve(l).pipe(m1(d=>{let p=this.transitions?.getValue();return this.events.next(new y6(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),p!==this.transitions?.getValue()?xo:Promise.resolve(d)}),efe(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),er(d=>{a.targetSnapshot=d.targetSnapshot,a.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=k(x({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let p=new R9(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:p,source:h,restoredState:m,extras:g}=l,v=new y6(d,this.urlSerializer.serialize(p),h,m);this.events.next(v);let y=fU(this.rootComponentType).snapshot;return this.currentTransition=a=k(x({},l),{targetSnapshot:y,urlAfterRedirects:p,extras:k(x({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,Ve(a)}else{let d="";return this.events.next(new Jc(l.id,this.urlSerializer.serialize(l.extractedUrl),d,F9.IgnoredByUrlHandlingStrategy)),l.resolve(null),xo}}),er(l=>{let u=new ND(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),We(l=>(this.currentTransition=a=k(x({},l),{guards:yue(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),a)),Hue(this.environmentInjector,l=>this.events.next(l)),er(l=>{if(a.guardsResult=l.guardsResult,v6(l.guardsResult))throw mU(this.urlSerializer,l.guardsResult);let u=new _D(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),h1(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",So.GuardRejected),!1)),DD(l=>{if(l.guards.canActivateChecks.length)return Ve(l).pipe(er(u=>{let f=new kD(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),m1(u=>{let f=!1;return Ve(u).pipe(tfe(this.paramsInheritanceStrategy,this.environmentInjector),er({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",So.NoDataFromResolver)}}))}),er(u=>{let f=new TD(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),DD(l=>{let u=f=>{let d=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(f.routeConfig).pipe(er(p=>{f.component=p}),We(()=>{})));for(let p of f.children)d.push(...u(p));return d};return w8(u(l.targetSnapshot.root)).pipe(Oc(null),de(1))}),DD(()=>this.afterPreactivation()),m1(()=>{let{currentSnapshot:l,targetSnapshot:u}=a,f=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return f?Kt(f).pipe(We(()=>a)):Ve(a)}),We(l=>{let u=uue(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=a=k(x({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,a}),er(()=>{this.events.next(new a5)}),vue(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),de(1),er({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new f2(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),kw(this.transitionAbortSubject.pipe(er(l=>{throw l}))),Pc(()=>{!s&&!c&&this.cancelNavigationTransition(a,"",So.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),o2(l=>{if(c=!0,vU(l))this.events.next(new Zc(a.id,this.urlSerializer.serialize(a.extractedUrl),l.message,l.cancellationCode)),pue(l)?this.events.next(new s5(l.url)):a.resolve(!1);else{this.events.next(new o5(a.id,this.urlSerializer.serialize(a.extractedUrl),l,a.targetSnapshot??void 0));try{a.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(u)}}return xo}))}))}cancelNavigationTransition(r,i,o){let a=new Zc(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(a),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function ffe(e){return e!==t5}var dfe=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:()=>ue(pfe),providedIn:"root"});let e=t;return e})(),ZD=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},pfe=(()=>{let t=class t extends ZD{};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=ga(t)))(o||t)}})(),t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),DU=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:()=>ue(hfe),providedIn:"root"});let e=t;return e})(),hfe=(()=>{let t=class t extends DU{constructor(){super(...arguments),this.location=ue(c6),this.urlSerializer=ue(d5),this.options=ue(g5,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ue(oz),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Kc,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=fU(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof y6)this.stateMemento=this.createStateMemento();else if(r instanceof Jc)this.rawUrlTree=i.initialUrl;else if(r instanceof R9){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof a5?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Zc&&(r.code===So.GuardRejected||r.code===So.NoDataFromResolver)?this.restoreHistory(i):r instanceof o5?this.restoreHistory(i,!0):r instanceof f2&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let a=this.browserPageId,s=x(x({},i.extras.state),this.generateNgRouterState(i.id,a));this.location.replaceState(o,"",s)}else{let a=x(x({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",a)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,a=this.currentPageId-o;a!==0?this.location.historyGo(a):this.currentUrlTree===r.finalUrl&&a===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=ga(t)))(o||t)}})(),t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),J8=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(J8||{});function zU(e,t){e.events.pipe(h1(n=>n instanceof f2||n instanceof Zc||n instanceof o5||n instanceof Jc),We(n=>n instanceof f2||n instanceof Jc?J8.COMPLETE:(n instanceof Zc?n.code===So.Redirect||n.code===So.SupersededByNewNavigation:!1)?J8.REDIRECTING:J8.FAILED),h1(n=>n!==J8.REDIRECTING),de(1)).subscribe(()=>{t()})}function mfe(e){throw e}var gfe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vfe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Yt=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=ue(h9),this.stateManager=ue(DU),this.options=ue(g5,{optional:!0})||{},this.pendingTasks=ue(R4),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ue(az),this.urlSerializer=ue(d5),this.location=ue(c6),this.urlHandlingStrategy=ue(oz),this._events=new d1,this.errorHandler=this.options.errorHandler||mfe,this.navigated=!1,this.routeReuseStrategy=ue(dfe),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ue(G9,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ue(W9,{optional:!0}),this.eventsSubscription=new In,this.isNgZoneEnabled=ue(Rt)instanceof Rt&&Rt.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(o!==null&&a!==null){if(this.stateManager.handleRouterEvent(i,a),i instanceof Zc&&i.code!==So.Redirect&&i.code!==So.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof f2)this.navigated=!0;else if(i instanceof s5){let s=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||ffe(o.source)};this.scheduleNavigation(s,t5,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}xfe(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),t5,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let a={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let l=x({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(a.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,s,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(nz),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:a,fragment:s,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,f=null;switch(c){case"merge":f=x(x({},this.currentUrlTree.queryParams),a);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=a||null}f!==null&&(f=this.removeEmptyProps(f));let d;try{let p=o?o.snapshot:this.routerState.snapshot.root;d=sU(p)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),d=this.currentUrlTree.root}return cU(d,r,f,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=v6(r)?r:this.parseUrl(r),a=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(a,t5,null,i)}navigate(r,i={skipLocationChange:!1}){return yfe(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=x({},gfe):i===!1?o=x({},vfe):o=i,v6(r))return UB(this.currentUrlTree,r,o);let a=this.parseUrl(r);return UB(this.currentUrlTree,a,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,a])=>(a!=null&&(i[o]=a),i),{})}scheduleNavigation(r,i,o,a,s){if(this.disposed)return Promise.resolve(!1);let c,l,u;s?(c=s.resolve,l=s.reject,u=s.promise):u=new Promise((d,p)=>{c=d,l=p});let f=this.pendingTasks.add();return zU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:a,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function yfe(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new ze(4008,!1)}function xfe(e){return!(e instanceof a5)&&!(e instanceof s5)}var un=(()=>{let t=class t{constructor(r,i,o,a,s,c){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=a,this.el=s,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new d1,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof f2&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,a,s){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||o||a||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:n$(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,a=this.el.nativeElement;i!==null?o.setAttribute(a,r,i):o.removeAttribute(a,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};t.\u0275fac=function(i){return new(i||t)(j(Yt),j(Vt),CE("tabindex"),j(X1),j(Br),j(Vs))},t.\u0275dir=kt({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&Fe("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&a6("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Pr.HasDecoratorInputTransform,"preserveFragment","preserveFragment",$4],skipLocationChange:[Pr.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",$4],replaceUrl:[Pr.HasDecoratorInputTransform,"replaceUrl","replaceUrl",$4],routerLink:"routerLink"},standalone:!0,features:[BE,wo]});let e=t;return e})(),HU=(()=>{let t=class t{get isActive(){return this._isActive}constructor(r,i,o,a,s){this.router=r,this.element=i,this.renderer=o,this.cdr=a,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new vn,this.routerEventsSubscription=r.events.subscribe(c=>{c instanceof f2&&this.update()})}ngAfterContentInit(){Ve(this.links.changes,Ve(null)).pipe(Rc()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let r=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Kt(r).pipe(Rc()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(r){let i=Array.isArray(r)?r:r.split(" ");this.classes=i.filter(o=>!!o)}ngOnChanges(r){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let r=this.hasActiveLinks();this._isActive!==r&&(this._isActive=r,this.cdr.markForCheck(),this.classes.forEach(i=>{r?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),r&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(r))})}isLinkActive(r){let i=Cfe(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{let a=o.urlTree;return a?r.isActive(a,i):!1}}hasActiveLinks(){let r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.links.some(r)}};t.\u0275fac=function(i){return new(i||t)(j(Yt),j(Br),j(X1),j(zs),j(un,8))},t.\u0275dir=kt({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(i,o,a){if(i&1&&Q$(a,un,5),i&2){let s;K$(s=Z$())&&(o.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[wo]});let e=t;return e})();function Cfe(e){return!!e.paths}var q9=class{};var bfe=(()=>{let t=class t{constructor(r,i,o,a,s){this.router=r,this.injector=o,this.preloadingStrategy=a,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(h1(r=>r instanceof f2),vs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let a of i){a.providers&&!a._injector&&(a._injector=f9(a.providers,r,`Route: ${a.path}`));let s=a._injector??r,c=a._loadedInjector??s;(a.loadChildren&&!a._loadedRoutes&&a.canLoad===void 0||a.loadComponent&&!a._loadedComponent)&&o.push(this.preloadConfig(s,a)),(a.children||a._loadedRoutes)&&o.push(this.processRoutes(c,a.children??a._loadedRoutes))}return Kt(o).pipe(Rc())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=Ve(null);let a=o.pipe(Un(s=>s===null?Ve(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??r,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return Kt([a,s]).pipe(Rc())}else return a})}};t.\u0275fac=function(i){return new(i||t)(le(Yt),le(x9),le(Pi),le(q9),le(iz))},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),LU=new ke(""),Mfe=(()=>{let t=class t{constructor(r,i,o,a,s={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=a,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof y6?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof f2?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Jc&&r.code===F9.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof O9&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new O9(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(i){g$()},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})();function wfe(e){return e.routerState.root}function v5(e,t){return{\u0275kind:e,\u0275providers:t}}function Sfe(){let e=ue(Ss);return t=>{let n=e.get(P4);if(t!==n.components[0])return;let r=e.get(Yt),i=e.get(AU);e.get(sz)===1&&r.initialNavigation(),e.get(VU,null,at.Optional)?.setUpPreloading(),e.get(LU,null,at.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var AU=new ke("",{factory:()=>new d1}),sz=new ke("",{providedIn:"root",factory:()=>1});function Efe(){return v5(2,[{provide:sz,useValue:0},{provide:v9,multi:!0,deps:[Ss],useFactory:t=>{let n=t.get(hB,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=t.get(Yt),o=t.get(AU);zU(i,()=>{r(!0)}),t.get(az).afterPreactivation=()=>(r(!0),o.closed?Ve(void 0):o),i.initialNavigation()}))}}])}function Dfe(){return v5(3,[{provide:v9,multi:!0,useFactory:()=>{let t=ue(Yt);return()=>{t.setUpLocationChangeListener()}}},{provide:sz,useValue:2}])}var VU=new ke("");function zfe(e){return v5(0,[{provide:VU,useExisting:bfe},{provide:q9,useExisting:e}])}function Hfe(){return v5(8,[WB,{provide:W9,useExisting:WB}])}function Lfe(e){let t=[{provide:SU,useValue:lfe},{provide:EU,useValue:x({skipNextTransition:!!e?.skipInitialTransition},e)}];return v5(9,t)}var XB=new ke("ROUTER_FORROOT_GUARD"),Afe=[c6,{provide:d5,useClass:r5},Yt,p5,{provide:Vt,useFactory:wfe,deps:[Yt]},iz,[]],cz=(()=>{let t=class t{constructor(r){}static forRoot(r,i){return{ngModule:t,providers:[Afe,[],{provide:G9,multi:!0,useValue:r},{provide:XB,useFactory:kfe,deps:[[Yt,new e9,new mE]]},{provide:g5,useValue:i||{}},i?.useHash?Nfe():_fe(),Vfe(),i?.preloadingStrategy?zfe(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Tfe(i):[],i?.bindToComponentInputs?Hfe().\u0275providers:[],i?.enableViewTransitions?Lfe().\u0275providers:[],Ife()]}}static forChild(r){return{ngModule:t,providers:[{provide:G9,multi:!0,useValue:r}]}}};t.\u0275fac=function(i){return new(i||t)(le(XB,8))},t.\u0275mod=$i({type:t}),t.\u0275inj=Bi({});let e=t;return e})();function Vfe(){return{provide:LU,useFactory:()=>{let e=ue(yB),t=ue(Rt),n=ue(g5),r=ue(az),i=ue(d5);return n.scrollOffset&&e.setOffset(n.scrollOffset),new Mfe(i,r,e,t,n)}}}function Nfe(){return{provide:Vs,useClass:gB}}function _fe(){return{provide:Vs,useClass:iD}}function kfe(e){return"guarded"}function Tfe(e){return[e.initialNavigation==="disabled"?Dfe().\u0275providers:[],e.initialNavigation==="enabledBlocking"?Efe().\u0275providers:[]]}var QB=new ke("");function Ife(){return[{provide:QB,useFactory:Sfe},{provide:y9,multi:!0,useExisting:QB}]}var Ffe=()=>["/"],Rfe=()=>({exact:!0}),b6=()=>["uk-active"],NU=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-navbar"]],standalone:!0,features:[Ce],decls:26,vars:16,consts:[[1,"uk-navbar-container","uk-navbar-transparent"],[1,"uk-container","navbar-container"],[1,"uk-navbar-left"],["routerLinkActive","uk-active",1,"uk-navbar-item","uk-logo",3,"routerLink"],[1,"uk-nav-primary","hide-in-mobile"],[1,"uk-navbar-nav"],[3,"routerLinkActiveOptions","routerLinkActive"],["routerLink","/",1,"uk-link","uk-navbar-item"],[3,"routerLinkActive"],["routerLink","/goals",1,"uk-link","uk-navbar-item"],["routerLink","/tasks",1,"uk-link","uk-navbar-item"],["routerLink","/logbook",1,"uk-link","uk-navbar-item"],["routerLink","/configure",1,"uk-link","uk-navbar-item"],[1,"navbar-right","hide-in-mobile"],["routerLink","/configure",1,"uk-link-muted","uk-navbar-item"]],template:function(i,o){i&1&&(H(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"strong",4),T(5,"Goal Tracker"),N()(),H(6,"ul",5)(7,"li",6)(8,"a",7),T(9,"Habits"),N()(),H(10,"li",8)(11,"a",9),T(12,"Goals"),N()(),H(13,"li",8)(14,"a",10),T(15,"Tasks"),N()(),H(16,"li",8)(17,"a",11),T(18,"Logbook"),N()(),H(19,"li",8)(20,"a",12),T(21,"Config"),N()(),H(22,"span",13)(23,"li",8)(24,"a",14),T(25,"Configure Server"),N()()()()()()()),i&2&&(R(3),ae("routerLink",Hs(8,Ffe)),R(4),ae("routerLinkActiveOptions",Hs(9,Rfe))("routerLinkActive",Hs(10,b6)),R(3),ae("routerLinkActive",Hs(11,b6)),R(3),ae("routerLinkActive",Hs(12,b6)),R(3),ae("routerLinkActive",Hs(13,b6)),R(3),ae("routerLinkActive",Hs(14,b6)),R(4),ae("routerLinkActive",Hs(15,b6)))},dependencies:[HU,un],styles:[".navbar-right[_ngcontent-%COMP%]{position:absolute;right:5em}"]});let e=t;return e})();var yr=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var y5="customServerUrl",Do=(()=>{let t=class t extends yr{constructor(){super()}getCustomServerUrl(){return localStorage.getItem(y5)}setCustomServerUrl(r){return X9.endpoint=r,localStorage.setItem(y5,r)}clearCustomServerUrl(){localStorage.removeItem(y5)}isCustomServerUrlSet(){return this.getCustomServerUrl()!==null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var X9={endpoint:localStorage.getItem(y5)??""};function vt(e){return X9.endpoint+e}var _U=(()=>{let t=class t extends yr{constructor(r,i){super(),this.http=r,this.config=i}pingServer(){let r=vt("/ping");return this.http.get(r)}hasServerConnection(){return!navigator.onLine||!this.config.isCustomServerUrlSet()?Ve(!1):this.pingServer().pipe(We(r=>r.message==="Success")).pipe(o2(()=>Ve(!1)))}};t.\u0275fac=function(i){return new(i||t)(le(Ui),le(Do))},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var C1=(()=>{let t=class t extends yr{constructor(r){super(),this.config=r,this.knownVirtualTablesLocalStorageKey="knownVirtualTables",this.changeNotifier=new EventTarget}pushToSyncQueue(r){let i=JSON.parse(localStorage.getItem("syncQueue"))??[];i.push(r),localStorage.setItem("syncQueue",JSON.stringify(i))}knownVirtualTables(){return(JSON.parse(localStorage.getItem(this.knownVirtualTablesLocalStorageKey))??[]).filter(i=>!!i)}dropTable(r){localStorage.removeItem(r)}updateTable(r,i){let o=localStorage.getItem(r);i!==o&&(this.dropTable(r),localStorage.setItem(r,i),this.changeNotifier.dispatchEvent(new Event("change")))}subRoutes(){return this.config.isCustomServerUrlSet()?this.config.getCustomServerUrl().split("/").length-1:0}applyApiRequest(r){let i=r.url.split("/")[this.subRoutes()+1],o=Number(r.url.split("/")[2]),a=r.body;localStorage.getItem(i)===null&&this.updateTable(i,"[]"),this.addToKnownTables(i);let s=this.tableValue(i);if(r.method==="GET"&&o){if(i==="goals"&&r.url.split("/").length>3){let l=r.url.split("/")[3];return this.tableValue(l).filter(f=>f.Goal==o)}return s.find(l=>l.ClientId==o)}if(r.method==="POST"){this.pushToSyncQueue(r);let l=JSON.parse(JSON.stringify(a));l.ClientId=this.nextTableId(i),s.push(l),this.updateTable(i,JSON.stringify(s))}if(r.method==="DELETE"){this.pushToSyncQueue(r);let l=s.findIndex(u=>u.ClientId==o);s.splice(l,1),this.updateTable(i,JSON.stringify(s))}if(r.method==="PUT"){this.pushToSyncQueue(r);let l=s.findIndex(u=>u.ClientId==o);s[l]=a,this.updateTable(i,JSON.stringify(s))}return this.tableValue(i)}tableValue(r){return JSON.parse(localStorage.getItem(r))??[]}nextTableId(r){let i=this.tableValue(r);return i.length===0?1:Math.max(...i.map(o=>o.ClientId))+1}addToKnownTables(r){let i=JSON.parse(localStorage.getItem(this.knownVirtualTablesLocalStorageKey))??[];i.includes(r)||(i.push(r),localStorage.setItem(this.knownVirtualTablesLocalStorageKey,JSON.stringify(i)))}};t.\u0275fac=function(i){return new(i||t)(le(Do))},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var w6=(()=>{let t=class t extends yr{constructor(r,i,o,a){super(),this.http=r,this.pingService=i,this.config=o,this.virtualDatabase=a,this.connectionStatus=!1,this.ticksSinceLastSync=0,this.syncQueueLocalStorageKey="syncQueue",this.timer=Lw(3e3),this.timer.subscribe(()=>{this.pingService.hasServerConnection().pipe(de(1)).subscribe(s=>{this.connectionStatus=s,this.ticksSinceLastSync>=5&&this.connectionStatus&&(this.attemptSync(),this.ticksSinceLastSync=0),this.connectionStatus&&this.ticksSinceLastSync++})})}attemptSync(){console.log("Pushing changes to database");let r=JSON.parse(localStorage.getItem("syncQueue"))??[],i=r.length;if(i===0){this.syncFromDatabase();return}this.shouldFlushSyncQueue()&&r.forEach((o,a)=>{let s=o.method,c=o.body,l=vt(o.url),u=()=>{let f=r.indexOf(o);r.splice(f,1),localStorage.setItem(this.syncQueueLocalStorageKey,JSON.stringify(r)),a===i-1&&this.syncFromDatabase()};s==="POST"?this.http.post(l,c).pipe(de(1)).subscribe(()=>u()):s==="PUT"?this.http.put(l,c).pipe(de(1)).subscribe(()=>u()):s==="DELETE"&&this.http.delete(l).pipe(de(1)).subscribe(()=>u())})}syncFromDatabase(){if(!this.config.isCustomServerUrlSet()||!this.connectionStatus)return;console.log("Fetching changes from database"),this.virtualDatabase.knownVirtualTables().forEach(i=>{let o=vt(`/${i}`);this.http.get(o).pipe(de(1)).subscribe(a=>{let s=a;this.virtualDatabase.updateTable(i,JSON.stringify(s.data))})})}shouldFlushSyncQueue(){let r=JSON.parse(localStorage.getItem("syncQueue"))??[],i=this.config.isCustomServerUrlSet(),o=navigator.onLine,a=this.connectionStatus;return r.length>0&&i&&o&&a}};t.\u0275fac=function(i){return new(i||t)(le(Ui),le(_U),le(Do),le(C1))},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var TU=(()=>{let t=class t{constructor(r){this.syncQueueService=r,this.syncQueueService.attemptSync()}};t.\u0275fac=function(i){return new(i||t)(j(w6))},t.\u0275cmp=xe({type:t,selectors:[["app-root"]],standalone:!0,features:[ya([w6]),Ce],decls:4,vars:0,consts:[[1,"light-dark"],[1,"main-content"]],template:function(i,o){i&1&&(H(0,"div",0),dt(1,"app-navbar"),H(2,"div",1),dt(3,"router-outlet"),N()())},dependencies:[NU,tz],styles:[".main-content[_ngcontent-%COMP%]{position:relative;margin:auto;width:60%;margin-top:2rem}@media screen and (max-width: 768px){.main-content[_ngcontent-%COMP%]{width:calc(100% - 2.4rem);margin-left:1.2rem}}"]});let e=t;return e})();function IU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IU(Object(n),!0).forEach(function(r){ir(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sg(e){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sg(e)}function Pfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $fe(e,t,n){return t&&FU(e.prototype,t),n&&FU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ir(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sz(e,t){return Ufe(e)||Gfe(e,t)||cj(e,t)||Wfe()}function H5(e){return Bfe(e)||jfe(e)||cj(e)||qfe()}function Bfe(e){if(Array.isArray(e))return pz(e)}function Ufe(e){if(Array.isArray(e))return e}function jfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(c){o=!0,s=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function cj(e,t){if(e){if(typeof e=="string")return pz(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pz(e,t)}}function pz(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var RU=function(){},Ez={},lj={},uj=null,fj={mark:RU,measure:RU};try{typeof window<"u"&&(Ez=window),typeof document<"u"&&(lj=document),typeof MutationObserver<"u"&&(uj=MutationObserver),typeof performance<"u"&&(fj=performance)}catch{}var Yfe=Ez.navigator||{},OU=Yfe.userAgent,PU=OU===void 0?"":OU,n3=Ez,on=lj,$U=uj,Q9=fj,zWe=!!n3.document,Ts=!!on.documentElement&&!!on.head&&typeof on.addEventListener=="function"&&typeof on.createElement=="function",dj=~PU.indexOf("MSIE")||~PU.indexOf("Trident/"),K9,Z9,J9,eg,tg,Ns="___FONT_AWESOME___",hz=16,pj="fa",hj="svg-inline--fa",Y4="data-fa-i2svg",mz="data-fa-pseudo-element",Xfe="data-fa-pseudo-element-pending",Dz="data-prefix",zz="data-icon",BU="fontawesome-i2svg",Qfe="async",Kfe=["HTML","HEAD","STYLE","SCRIPT"],mj=function(){try{return!0}catch{return!1}}(),rn="classic",En="sharp",Hz=[rn,En];function L5(e){return new Proxy(e,{get:function(n,r){return r in n?n[r]:n[rn]}})}var w5=L5((K9={},ir(K9,rn,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),ir(K9,En,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),K9)),S5=L5((Z9={},ir(Z9,rn,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),ir(Z9,En,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),Z9)),E5=L5((J9={},ir(J9,rn,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),ir(J9,En,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),J9)),Zfe=L5((eg={},ir(eg,rn,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),ir(eg,En,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),eg)),Jfe=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,gj="fa-layers-text",e8e=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,t8e=L5((tg={},ir(tg,rn,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),ir(tg,En,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),tg)),vj=[1,2,3,4,5,6,7,8,9,10],n8e=vj.concat([11,12,13,14,15,16,17,18,19,20]),r8e=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],q4={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},D5=new Set;Object.keys(S5[rn]).map(D5.add.bind(D5));Object.keys(S5[En]).map(D5.add.bind(D5));var i8e=[].concat(Hz,H5(D5),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",q4.GROUP,q4.SWAP_OPACITY,q4.PRIMARY,q4.SECONDARY]).concat(vj.map(function(e){return"".concat(e,"x")})).concat(n8e.map(function(e){return"w-".concat(e)})),b5=n3.FontAwesomeConfig||{};function o8e(e){var t=on.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function a8e(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}on&&typeof on.querySelector=="function"&&(UU=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]],UU.forEach(function(e){var t=Sz(e,2),n=t[0],r=t[1],i=a8e(o8e(n));i!=null&&(b5[r]=i)}));var UU,yj={styleDefault:"solid",familyDefault:"classic",cssPrefix:pj,replacementClass:hj,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};b5.familyPrefix&&(b5.cssPrefix=b5.familyPrefix);var z6=ye(ye({},yj),b5);z6.autoReplaceSvg||(z6.observeMutations=!1);var He={};Object.keys(yj).forEach(function(e){Object.defineProperty(He,e,{enumerable:!0,set:function(n){z6[e]=n,M5.forEach(function(r){return r(He)})},get:function(){return z6[e]}})});Object.defineProperty(He,"familyPrefix",{enumerable:!0,set:function(t){z6.cssPrefix=t,M5.forEach(function(n){return n(He)})},get:function(){return z6.cssPrefix}});n3.FontAwesomeConfig=He;var M5=[];function s8e(e){return M5.push(e),function(){M5.splice(M5.indexOf(e),1)}}var t3=hz,Ma={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function c8e(e){if(!(!e||!Ts)){var t=on.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=on.head.childNodes,r=null,i=n.length-1;i>-1;i--){var o=n[i],a=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(r=o)}return on.head.insertBefore(t,r),e}}var l8e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function z5(){for(var e=12,t="";e-- >0;)t+=l8e[Math.random()*62|0];return t}function H6(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function Lz(e){return e.classList?H6(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function xj(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u8e(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,'="').concat(xj(e[n]),'" ')},"").trim()}function ug(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")},"")}function Az(e){return e.size!==Ma.size||e.x!==Ma.x||e.y!==Ma.y||e.rotate!==Ma.rotate||e.flipX||e.flipY}function f8e(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(t.x*32,", ").concat(t.y*32,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)"),c={transform:"".concat(o," ").concat(a," ").concat(s)},l={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:c,path:l}}function d8e(e){var t=e.transform,n=e.width,r=n===void 0?hz:n,i=e.height,o=i===void 0?hz:i,a=e.startCentered,s=a===void 0?!1:a,c="";return s&&dj?c+="translate(".concat(t.x/t3-r/2,"em, ").concat(t.y/t3-o/2,"em) "):s?c+="translate(calc(-50% + ".concat(t.x/t3,"em), calc(-50% + ").concat(t.y/t3,"em)) "):c+="translate(".concat(t.x/t3,"em, ").concat(t.y/t3,"em) "),c+="scale(".concat(t.size/t3*(t.flipX?-1:1),", ").concat(t.size/t3*(t.flipY?-1:1),") "),c+="rotate(".concat(t.rotate,"deg) "),c}var p8e=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function Cj(){var e=pj,t=hj,n=He.cssPrefix,r=He.replacementClass,i=p8e;if(n!==e||r!==t){var o=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(o,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(s,".".concat(r))}return i}var jU=!1;function lz(){He.autoAddCss&&!jU&&(c8e(Cj()),jU=!0)}var h8e={mixout:function(){return{dom:{css:Cj,insertCss:lz}}},hooks:function(){return{beforeDOMElementCreation:function(){lz()},beforeI2svg:function(){lz()}}}},_s=n3||{};_s[Ns]||(_s[Ns]={});_s[Ns].styles||(_s[Ns].styles={});_s[Ns].hooks||(_s[Ns].hooks={});_s[Ns].shims||(_s[Ns].shims=[]);var d2=_s[Ns],bj=[],m8e=function e(){on.removeEventListener("DOMContentLoaded",e),cg=1,bj.map(function(t){return t()})},cg=!1;Ts&&(cg=(on.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(on.readyState),cg||on.addEventListener("DOMContentLoaded",m8e));function g8e(e){Ts&&(cg?setTimeout(e,0):bj.push(e))}function A5(e){var t=e.tag,n=e.attributes,r=n===void 0?{}:n,i=e.children,o=i===void 0?[]:i;return typeof e=="string"?xj(e):"<".concat(t," ").concat(u8e(r),">").concat(o.map(A5).join(""),"</").concat(t,">")}function GU(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}var v8e=function(t,n){return function(r,i,o,a){return t.call(n,r,i,o,a)}},uz=function(t,n,r,i){var o=Object.keys(t),a=o.length,s=i!==void 0?v8e(n,i):n,c,l,u;for(r===void 0?(c=1,u=t[o[0]]):(c=0,u=r);c<a;c++)l=o[c],u=s(u,t[l],l,t);return u};function y8e(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);(o&64512)==56320?t.push(((i&1023)<<10)+(o&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}function gz(e){var t=y8e(e);return t.length===1?t[0].toString(16):null}function x8e(e,t){var n=e.length,r=e.charCodeAt(t),i;return r>=55296&&r<=56319&&n>t+1&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function qU(e){return Object.keys(e).reduce(function(t,n){var r=e[n],i=!!r.icon;return i?t[r.iconName]=r.icon:t[n]=r,t},{})}function vz(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,o=qU(t);typeof d2.hooks.addPack=="function"&&!i?d2.hooks.addPack(e,qU(t)):d2.styles[e]=ye(ye({},d2.styles[e]||{}),o),e==="fas"&&vz("fa",t)}var ng,rg,ig,S6=d2.styles,C8e=d2.shims,b8e=(ng={},ir(ng,rn,Object.values(E5[rn])),ir(ng,En,Object.values(E5[En])),ng),Vz=null,Mj={},wj={},Sj={},Ej={},Dj={},M8e=(rg={},ir(rg,rn,Object.keys(w5[rn])),ir(rg,En,Object.keys(w5[En])),rg);function w8e(e){return~i8e.indexOf(e)}function S8e(e,t){var n=t.split("-"),r=n[0],i=n.slice(1).join("-");return r===e&&i!==""&&!w8e(i)?i:null}var zj=function(){var t=function(o){return uz(S6,function(a,s,c){return a[c]=uz(s,o,{}),a},{})};Mj=t(function(i,o,a){if(o[3]&&(i[o[3]]=a),o[2]){var s=o[2].filter(function(c){return typeof c=="number"});s.forEach(function(c){i[c.toString(16)]=a})}return i}),wj=t(function(i,o,a){if(i[a]=a,o[2]){var s=o[2].filter(function(c){return typeof c=="string"});s.forEach(function(c){i[c]=a})}return i}),Dj=t(function(i,o,a){var s=o[2];return i[a]=a,s.forEach(function(c){i[c]=a}),i});var n="far"in S6||He.autoFetchSvg,r=uz(C8e,function(i,o){var a=o[0],s=o[1],c=o[2];return s==="far"&&!n&&(s="fas"),typeof a=="string"&&(i.names[a]={prefix:s,iconName:c}),typeof a=="number"&&(i.unicodes[a.toString(16)]={prefix:s,iconName:c}),i},{names:{},unicodes:{}});Sj=r.names,Ej=r.unicodes,Vz=fg(He.styleDefault,{family:He.familyDefault})};s8e(function(e){Vz=fg(e.styleDefault,{family:He.familyDefault})});zj();function Nz(e,t){return(Mj[e]||{})[t]}function E8e(e,t){return(wj[e]||{})[t]}function W4(e,t){return(Dj[e]||{})[t]}function Hj(e){return Sj[e]||{prefix:null,iconName:null}}function D8e(e){var t=Ej[e],n=Nz("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function r3(){return Vz}var _z=function(){return{prefix:null,iconName:null,rest:[]}};function fg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.family,r=n===void 0?rn:n,i=w5[r][e],o=S5[r][e]||S5[r][i],a=e in d2.styles?e:null;return o||a||null}var WU=(ig={},ir(ig,rn,Object.keys(E5[rn])),ir(ig,En,Object.keys(E5[En])),ig);function dg(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,i=r===void 0?!1:r,o=(t={},ir(t,rn,"".concat(He.cssPrefix,"-").concat(rn)),ir(t,En,"".concat(He.cssPrefix,"-").concat(En)),t),a=null,s=rn;(e.includes(o[rn])||e.some(function(l){return WU[rn].includes(l)}))&&(s=rn),(e.includes(o[En])||e.some(function(l){return WU[En].includes(l)}))&&(s=En);var c=e.reduce(function(l,u){var f=S8e(He.cssPrefix,u);if(S6[u]?(u=b8e[s].includes(u)?Zfe[s][u]:u,a=u,l.prefix=u):M8e[s].indexOf(u)>-1?(a=u,l.prefix=fg(u,{family:s})):f?l.iconName=f:u!==He.replacementClass&&u!==o[rn]&&u!==o[En]&&l.rest.push(u),!i&&l.prefix&&l.iconName){var d=a==="fa"?Hj(l.iconName):{},p=W4(l.prefix,l.iconName);d.prefix&&(a=null),l.iconName=d.iconName||p||l.iconName,l.prefix=d.prefix||l.prefix,l.prefix==="far"&&!S6.far&&S6.fas&&!He.autoFetchSvg&&(l.prefix="fas")}return l},_z());return(e.includes("fa-brands")||e.includes("fab"))&&(c.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(c.prefix="fad"),!c.prefix&&s===En&&(S6.fass||He.autoFetchSvg)&&(c.prefix="fass",c.iconName=W4(c.prefix,c.iconName)||c.iconName),(c.prefix==="fa"||a==="fa")&&(c.prefix=r3()||"fas"),c}var z8e=function(){function e(){Pfe(this,e),this.definitions={}}return $fe(e,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.reduce(this._pullDefinitions,{});Object.keys(a).forEach(function(s){n.definitions[s]=ye(ye({},n.definitions[s]||{}),a[s]),vz(s,a[s]);var c=E5[rn][s];c&&vz(c,a[s]),zj()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(o){var a=i[o],s=a.prefix,c=a.iconName,l=a.icon,u=l[2];n[s]||(n[s]={}),u.length>0&&u.forEach(function(f){typeof f=="string"&&(n[s][f]=l)}),n[s][c]=l}),n}}]),e}(),YU=[],E6={},D6={},H8e=Object.keys(D6);function L8e(e,t){var n=t.mixoutsTo;return YU=e,E6={},Object.keys(D6).forEach(function(r){H8e.indexOf(r)===-1&&delete D6[r]}),YU.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(a){typeof i[a]=="function"&&(n[a]=i[a]),sg(i[a])==="object"&&Object.keys(i[a]).forEach(function(s){n[a]||(n[a]={}),n[a][s]=i[a][s]})}),r.hooks){var o=r.hooks();Object.keys(o).forEach(function(a){E6[a]||(E6[a]=[]),E6[a].push(o[a])})}r.provides&&r.provides(D6)}),n}function yz(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=E6[e]||[];return o.forEach(function(a){t=a.apply(null,[t].concat(r))}),t}function X4(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=E6[e]||[];i.forEach(function(o){o.apply(null,n)})}function ks(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return D6[e]?D6[e].apply(null,t):void 0}function xz(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,n=e.prefix||r3();if(t)return t=W4(n,t)||t,GU(Lj.definitions,n,t)||GU(d2.styles,n,t)}var Lj=new z8e,A8e=function(){He.autoReplaceSvg=!1,He.observeMutations=!1,X4("noAuto")},V8e={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ts?(X4("beforeI2svg",t),ks("pseudoElements2svg",t),ks("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot;He.autoReplaceSvg===!1&&(He.autoReplaceSvg=!0),He.observeMutations=!0,g8e(function(){_8e({autoReplaceSvgRoot:n}),X4("watch",t)})}},N8e={icon:function(t){if(t===null)return null;if(sg(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:W4(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var n=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],r=fg(t[0]);return{prefix:r,iconName:W4(r,n)||n}}if(typeof t=="string"&&(t.indexOf("".concat(He.cssPrefix,"-"))>-1||t.match(Jfe))){var i=dg(t.split(" "),{skipLookups:!0});return{prefix:i.prefix||r3(),iconName:W4(i.prefix,i.iconName)||i.iconName}}if(typeof t=="string"){var o=r3();return{prefix:o,iconName:W4(o,t)||t}}}},K1={noAuto:A8e,config:He,dom:V8e,parse:N8e,library:Lj,findIconDefinition:xz,toHtml:A5},_8e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot,r=n===void 0?on:n;(Object.keys(d2.styles).length>0||He.autoFetchSvg)&&Ts&&He.autoReplaceSvg&&K1.dom.i2svg({node:r})};function pg(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(r){return A5(r)})}}),Object.defineProperty(e,"node",{get:function(){if(Ts){var r=on.createElement("div");return r.innerHTML=e.html,r.children}}}),e}function k8e(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,o=e.styles,a=e.transform;if(Az(a)&&n.found&&!r.found){var s=n.width,c=n.height,l={x:s/c/2,y:.5};i.style=ug(ye(ye({},o),{},{"transform-origin":"".concat(l.x+a.x/16,"em ").concat(l.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}function T8e(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,o=e.symbol,a=o===!0?"".concat(t,"-").concat(He.cssPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ye(ye({},i),{},{id:a}),children:r}]}]}function kz(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,o=e.iconName,a=e.transform,s=e.symbol,c=e.title,l=e.maskId,u=e.titleId,f=e.extra,d=e.watchable,p=d===void 0?!1:d,h=r.found?r:n,m=h.width,g=h.height,v=i==="fak",y=[He.replacementClass,o?"".concat(He.cssPrefix,"-").concat(o):""].filter(function(D){return f.classes.indexOf(D)===-1}).filter(function(D){return D!==""||!!D}).concat(f.classes).join(" "),C={children:[],attributes:ye(ye({},f.attributes),{},{"data-prefix":i,"data-icon":o,class:y,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},b=v&&!~f.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};p&&(C.attributes[Y4]=""),c&&(C.children.push({tag:"title",attributes:{id:C.attributes["aria-labelledby"]||"title-".concat(u||z5())},children:[c]}),delete C.attributes.title);var M=ye(ye({},C),{},{prefix:i,iconName:o,main:n,mask:r,maskId:l,transform:a,symbol:s,styles:ye(ye({},b),f.styles)}),S=r.found&&n.found?ks("generateAbstractMask",M)||{children:[],attributes:{}}:ks("generateAbstractIcon",M)||{children:[],attributes:{}},w=S.children,E=S.attributes;return M.children=w,M.attributes=E,s?T8e(M):k8e(M)}function XU(e){var t=e.content,n=e.width,r=e.height,i=e.transform,o=e.title,a=e.extra,s=e.watchable,c=s===void 0?!1:s,l=ye(ye(ye({},a.attributes),o?{title:o}:{}),{},{class:a.classes.join(" ")});c&&(l[Y4]="");var u=ye({},a.styles);Az(i)&&(u.transform=d8e({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var f=ug(u);f.length>0&&(l.style=f);var d=[];return d.push({tag:"span",attributes:l,children:[t]}),o&&d.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),d}function I8e(e){var t=e.content,n=e.title,r=e.extra,i=ye(ye(ye({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),o=ug(r.styles);o.length>0&&(i.style=o);var a=[];return a.push({tag:"span",attributes:i,children:[t]}),n&&a.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),a}var fz=d2.styles;function Cz(e){var t=e[0],n=e[1],r=e.slice(4),i=Sz(r,1),o=i[0],a=null;return Array.isArray(o)?a={tag:"g",attributes:{class:"".concat(He.cssPrefix,"-").concat(q4.GROUP)},children:[{tag:"path",attributes:{class:"".concat(He.cssPrefix,"-").concat(q4.SECONDARY),fill:"currentColor",d:o[0]}},{tag:"path",attributes:{class:"".concat(He.cssPrefix,"-").concat(q4.PRIMARY),fill:"currentColor",d:o[1]}}]}:a={tag:"path",attributes:{fill:"currentColor",d:o}},{found:!0,width:t,height:n,icon:a}}var F8e={found:!1,width:512,height:512};function R8e(e,t){!mj&&!He.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function bz(e,t){var n=t;return t==="fa"&&He.styleDefault!==null&&(t=r3()),new Promise(function(r,i){var o={found:!1,width:512,height:512,icon:ks("missingIconAbstract")||{}};if(n==="fa"){var a=Hj(e)||{};e=a.iconName||e,t=a.prefix||t}if(e&&t&&fz[t]&&fz[t][e]){var s=fz[t][e];return r(Cz(s))}R8e(e,t),r(ye(ye({},F8e),{},{icon:He.showMissingIcons&&e?ks("missingIconAbstract")||{}:{}}))})}var QU=function(){},Mz=He.measurePerformance&&Q9&&Q9.mark&&Q9.measure?Q9:{mark:QU,measure:QU},C5='FA "6.5.1"',O8e=function(t){return Mz.mark("".concat(C5," ").concat(t," begins")),function(){return Aj(t)}},Aj=function(t){Mz.mark("".concat(C5," ").concat(t," ends")),Mz.measure("".concat(C5," ").concat(t),"".concat(C5," ").concat(t," begins"),"".concat(C5," ").concat(t," ends"))},Tz={begin:O8e,end:Aj},og=function(){};function KU(e){var t=e.getAttribute?e.getAttribute(Y4):null;return typeof t=="string"}function P8e(e){var t=e.getAttribute?e.getAttribute(Dz):null,n=e.getAttribute?e.getAttribute(zz):null;return t&&n}function $8e(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(He.replacementClass)}function B8e(){if(He.autoReplaceSvg===!0)return ag.replace;var e=ag[He.autoReplaceSvg];return e||ag.replace}function U8e(e){return on.createElementNS("http://www.w3.org/2000/svg",e)}function j8e(e){return on.createElement(e)}function Vj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.ceFn,r=n===void 0?e.tag==="svg"?U8e:j8e:n;if(typeof e=="string")return on.createTextNode(e);var i=r(e.tag);Object.keys(e.attributes||[]).forEach(function(a){i.setAttribute(a,e.attributes[a])});var o=e.children||[];return o.forEach(function(a){i.appendChild(Vj(a,{ceFn:r}))}),i}function G8e(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var ag={replace:function(t){var n=t[0];if(n.parentNode)if(t[1].forEach(function(i){n.parentNode.insertBefore(Vj(i),n)}),n.getAttribute(Y4)===null&&He.keepOriginalSource){var r=on.createComment(G8e(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(t){var n=t[0],r=t[1];if(~Lz(n).indexOf(He.replacementClass))return ag.replace(t);var i=new RegExp("".concat(He.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var o=r[0].attributes.class.split(" ").reduce(function(s,c){return c===He.replacementClass||c.match(i)?s.toSvg.push(c):s.toNode.push(c),s},{toNode:[],toSvg:[]});r[0].attributes.class=o.toSvg.join(" "),o.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",o.toNode.join(" "))}var a=r.map(function(s){return A5(s)}).join(`
`);n.setAttribute(Y4,""),n.innerHTML=a}};function ZU(e){e()}function Nj(e,t){var n=typeof t=="function"?t:og;if(e.length===0)n();else{var r=ZU;He.mutateApproach===Qfe&&(r=n3.requestAnimationFrame||ZU),r(function(){var i=B8e(),o=Tz.begin("mutate");e.map(i),o(),n()})}}var Iz=!1;function _j(){Iz=!0}function wz(){Iz=!1}var lg=null;function JU(e){if($U&&He.observeMutations){var t=e.treeCallback,n=t===void 0?og:t,r=e.nodeCallback,i=r===void 0?og:r,o=e.pseudoElementsCallback,a=o===void 0?og:o,s=e.observeMutationsRoot,c=s===void 0?on:s;lg=new $U(function(l){if(!Iz){var u=r3();H6(l).forEach(function(f){if(f.type==="childList"&&f.addedNodes.length>0&&!KU(f.addedNodes[0])&&(He.searchPseudoElements&&a(f.target),n(f.target)),f.type==="attributes"&&f.target.parentNode&&He.searchPseudoElements&&a(f.target.parentNode),f.type==="attributes"&&KU(f.target)&&~r8e.indexOf(f.attributeName))if(f.attributeName==="class"&&P8e(f.target)){var d=dg(Lz(f.target)),p=d.prefix,h=d.iconName;f.target.setAttribute(Dz,p||u),h&&f.target.setAttribute(zz,h)}else $8e(f.target)&&i(f.target)})}}),Ts&&lg.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function q8e(){lg&&lg.disconnect()}function W8e(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce(function(r,i){var o=i.split(":"),a=o[0],s=o.slice(1);return a&&s.length>0&&(r[a]=s.join(":").trim()),r},{})),n}function Y8e(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=e.innerText!==void 0?e.innerText.trim():"",i=dg(Lz(e));return i.prefix||(i.prefix=r3()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=E8e(i.prefix,e.innerText)||Nz(i.prefix,gz(e.innerText))),!i.iconName&&He.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function X8e(e){var t=H6(e.attributes).reduce(function(i,o){return i.name!=="class"&&i.name!=="style"&&(i[o.name]=o.value),i},{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return He.autoA11y&&(n?t["aria-labelledby"]="".concat(He.replacementClass,"-title-").concat(r||z5()):(t["aria-hidden"]="true",t.focusable="false")),t}function Q8e(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ma,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function ej(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=Y8e(e),r=n.iconName,i=n.prefix,o=n.rest,a=X8e(e),s=yz("parseNodeAttributes",{},e),c=t.styleParser?W8e(e):[];return ye({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:Ma,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:o,styles:c,attributes:a}},s)}var K8e=d2.styles;function kj(e){var t=He.autoReplaceSvg==="nest"?ej(e,{styleParser:!1}):ej(e);return~t.extra.classes.indexOf(gj)?ks("generateLayersText",e,t):ks("generateSvgReplacementMutation",e,t)}var i3=new Set;Hz.map(function(e){i3.add("fa-".concat(e))});Object.keys(w5[rn]).map(i3.add.bind(i3));Object.keys(w5[En]).map(i3.add.bind(i3));i3=H5(i3);function tj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ts)return Promise.resolve();var n=on.documentElement.classList,r=function(f){return n.add("".concat(BU,"-").concat(f))},i=function(f){return n.remove("".concat(BU,"-").concat(f))},o=He.autoFetchSvg?i3:Hz.map(function(u){return"fa-".concat(u)}).concat(Object.keys(K8e));o.includes("fa")||o.push("fa");var a=[".".concat(gj,":not([").concat(Y4,"])")].concat(o.map(function(u){return".".concat(u,":not([").concat(Y4,"])")})).join(", ");if(a.length===0)return Promise.resolve();var s=[];try{s=H6(e.querySelectorAll(a))}catch{}if(s.length>0)r("pending"),i("complete");else return Promise.resolve();var c=Tz.begin("onTree"),l=s.reduce(function(u,f){try{var d=kj(f);d&&u.push(d)}catch(p){mj||p.name==="MissingIcon"&&console.error(p)}return u},[]);return new Promise(function(u,f){Promise.all(l).then(function(d){Nj(d,function(){r("active"),r("complete"),i("pending"),typeof t=="function"&&t(),c(),u()})}).catch(function(d){c(),f(d)})})}function Z8e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;kj(e).then(function(n){n&&Nj([n],t)})}function J8e(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(t||{}).icon?t:xz(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:xz(i||{})),e(r,ye(ye({},n),{},{mask:i}))}}var e5e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?Ma:r,o=n.symbol,a=o===void 0?!1:o,s=n.mask,c=s===void 0?null:s,l=n.maskId,u=l===void 0?null:l,f=n.title,d=f===void 0?null:f,p=n.titleId,h=p===void 0?null:p,m=n.classes,g=m===void 0?[]:m,v=n.attributes,y=v===void 0?{}:v,C=n.styles,b=C===void 0?{}:C;if(t){var M=t.prefix,S=t.iconName,w=t.icon;return pg(ye({type:"icon"},t),function(){return X4("beforeDOMElementCreation",{iconDefinition:t,params:n}),He.autoA11y&&(d?y["aria-labelledby"]="".concat(He.replacementClass,"-title-").concat(h||z5()):(y["aria-hidden"]="true",y.focusable="false")),kz({icons:{main:Cz(w),mask:c?Cz(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:M,iconName:S,transform:ye(ye({},Ma),i),symbol:a,title:d,maskId:u,titleId:h,extra:{attributes:y,styles:b,classes:g}})})}},t5e={mixout:function(){return{icon:J8e(e5e)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=tj,n.nodeCallback=Z8e,n}}},provides:function(t){t.i2svg=function(n){var r=n.node,i=r===void 0?on:r,o=n.callback,a=o===void 0?function(){}:o;return tj(i,a)},t.generateSvgReplacementMutation=function(n,r){var i=r.iconName,o=r.title,a=r.titleId,s=r.prefix,c=r.transform,l=r.symbol,u=r.mask,f=r.maskId,d=r.extra;return new Promise(function(p,h){Promise.all([bz(i,s),u.iconName?bz(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=Sz(m,2),v=g[0],y=g[1];p([n,kz({icons:{main:v,mask:y},prefix:s,iconName:i,transform:c,symbol:l,maskId:f,title:o,titleId:a,extra:d,watchable:!0})])}).catch(h)})},t.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,o=n.main,a=n.transform,s=n.styles,c=ug(s);c.length>0&&(i.style=c);var l;return Az(a)&&(l=ks("generateAbstractTransformGrouping",{main:o,transform:a,containerWidth:o.width,iconWidth:o.width})),r.push(l||o.icon),{children:r,attributes:i}}}},n5e={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,o=i===void 0?[]:i;return pg({type:"layer"},function(){X4("beforeDOMElementCreation",{assembler:n,params:r});var a=[];return n(function(s){Array.isArray(s)?s.map(function(c){a=a.concat(c.abstract)}):a=a.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(He.cssPrefix,"-layers")].concat(H5(o)).join(" ")},children:a}]})}}}},r5e={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,o=i===void 0?null:i,a=r.classes,s=a===void 0?[]:a,c=r.attributes,l=c===void 0?{}:c,u=r.styles,f=u===void 0?{}:u;return pg({type:"counter",content:n},function(){return X4("beforeDOMElementCreation",{content:n,params:r}),I8e({content:n.toString(),title:o,extra:{attributes:l,styles:f,classes:["".concat(He.cssPrefix,"-layers-counter")].concat(H5(s))}})})}}}},i5e={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,o=i===void 0?Ma:i,a=r.title,s=a===void 0?null:a,c=r.classes,l=c===void 0?[]:c,u=r.attributes,f=u===void 0?{}:u,d=r.styles,p=d===void 0?{}:d;return pg({type:"text",content:n},function(){return X4("beforeDOMElementCreation",{content:n,params:r}),XU({content:n,transform:ye(ye({},Ma),o),title:s,extra:{attributes:f,styles:p,classes:["".concat(He.cssPrefix,"-layers-text")].concat(H5(l))}})})}}},provides:function(t){t.generateLayersText=function(n,r){var i=r.title,o=r.transform,a=r.extra,s=null,c=null;if(dj){var l=parseInt(getComputedStyle(n).fontSize,10),u=n.getBoundingClientRect();s=u.width/l,c=u.height/l}return He.autoA11y&&!i&&(a.attributes["aria-hidden"]="true"),Promise.resolve([n,XU({content:n.innerHTML,width:s,height:c,transform:o,title:i,extra:a,watchable:!0})])}}},o5e=new RegExp('"',"ug"),nj=[1105920,1112319];function a5e(e){var t=e.replace(o5e,""),n=x8e(t,0),r=n>=nj[0]&&n<=nj[1],i=t.length===2?t[0]===t[1]:!1;return{value:gz(i?t[0]:t),isSecondary:r||i}}function rj(e,t){var n="".concat(Xfe).concat(t.replace(":","-"));return new Promise(function(r,i){if(e.getAttribute(n)!==null)return r();var o=H6(e.children),a=o.filter(function(w){return w.getAttribute(mz)===t})[0],s=n3.getComputedStyle(e,t),c=s.getPropertyValue("font-family").match(e8e),l=s.getPropertyValue("font-weight"),u=s.getPropertyValue("content");if(a&&!c)return e.removeChild(a),r();if(c&&u!=="none"&&u!==""){var f=s.getPropertyValue("content"),d=~["Sharp"].indexOf(c[2])?En:rn,p=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?S5[d][c[2].toLowerCase()]:t8e[d][l],h=a5e(f),m=h.value,g=h.isSecondary,v=c[0].startsWith("FontAwesome"),y=Nz(p,m),C=y;if(v){var b=D8e(m);b.iconName&&b.prefix&&(y=b.iconName,p=b.prefix)}if(y&&!g&&(!a||a.getAttribute(Dz)!==p||a.getAttribute(zz)!==C)){e.setAttribute(n,C),a&&e.removeChild(a);var M=Q8e(),S=M.extra;S.attributes[mz]=t,bz(y,p).then(function(w){var E=kz(ye(ye({},M),{},{icons:{main:w,mask:_z()},prefix:p,iconName:C,extra:S,watchable:!0})),D=on.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(D,e.firstChild):e.appendChild(D),D.outerHTML=E.map(function(z){return A5(z)}).join(`
`),e.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function s5e(e){return Promise.all([rj(e,"::before"),rj(e,"::after")])}function c5e(e){return e.parentNode!==document.head&&!~Kfe.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(mz)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function ij(e){if(Ts)return new Promise(function(t,n){var r=H6(e.querySelectorAll("*")).filter(c5e).map(s5e),i=Tz.begin("searchPseudoElements");_j(),Promise.all(r).then(function(){i(),wz(),t()}).catch(function(){i(),wz(),n()})})}var l5e={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=ij,n}}},provides:function(t){t.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?on:r;He.searchPseudoElements&&ij(i)}}},oj=!1,u5e={mixout:function(){return{dom:{unwatch:function(){_j(),oj=!0}}}},hooks:function(){return{bootstrap:function(){JU(yz("mutationObserverCallbacks",{}))},noAuto:function(){q8e()},watch:function(n){var r=n.observeMutationsRoot;oj?wz():JU(yz("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},aj=function(t){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(r,i){var o=i.toLowerCase().split("-"),a=o[0],s=o.slice(1).join("-");if(a&&s==="h")return r.flipX=!0,r;if(a&&s==="v")return r.flipY=!0,r;if(s=parseFloat(s),isNaN(s))return r;switch(a){case"grow":r.size=r.size+s;break;case"shrink":r.size=r.size-s;break;case"left":r.x=r.x-s;break;case"right":r.x=r.x+s;break;case"up":r.y=r.y-s;break;case"down":r.y=r.y+s;break;case"rotate":r.rotate=r.rotate+s;break}return r},n)},f5e={mixout:function(){return{parse:{transform:function(n){return aj(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=aj(i)),n}}},provides:function(t){t.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,o=n.containerWidth,a=n.iconWidth,s={transform:"translate(".concat(o/2," 256)")},c="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),f={transform:"".concat(c," ").concat(l," ").concat(u)},d={transform:"translate(".concat(a/2*-1," -256)")},p={outer:s,inner:f,path:d};return{tag:"g",attributes:ye({},p.outer),children:[{tag:"g",attributes:ye({},p.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:ye(ye({},r.icon.attributes),p.path)}]}]}}}},dz={x:0,y:0,width:"100%",height:"100%"};function sj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function d5e(e){return e.tag==="g"?e.children:[e]}var p5e={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),o=i?dg(i.split(" ").map(function(a){return a.trim()})):_z();return o.prefix||(o.prefix=r3()),n.mask=o,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(t){t.generateAbstractMask=function(n){var r=n.children,i=n.attributes,o=n.main,a=n.mask,s=n.maskId,c=n.transform,l=o.width,u=o.icon,f=a.width,d=a.icon,p=f8e({transform:c,containerWidth:f,iconWidth:l}),h={tag:"rect",attributes:ye(ye({},dz),{},{fill:"white"})},m=u.children?{children:u.children.map(sj)}:{},g={tag:"g",attributes:ye({},p.inner),children:[sj(ye({tag:u.tag,attributes:ye(ye({},u.attributes),p.path)},m))]},v={tag:"g",attributes:ye({},p.outer),children:[g]},y="mask-".concat(s||z5()),C="clip-".concat(s||z5()),b={tag:"mask",attributes:ye(ye({},dz),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,v]},M={tag:"defs",children:[{tag:"clipPath",attributes:{id:C},children:d5e(d)},b]};return r.push(M,{tag:"rect",attributes:ye({fill:"currentColor","clip-path":"url(#".concat(C,")"),mask:"url(#".concat(y,")")},dz)}),{children:r,attributes:i}}}},h5e={provides:function(t){var n=!1;n3.matchMedia&&(n=n3.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},o={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:ye(ye({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var a=ye(ye({},o),{},{attributeName:"opacity"}),s={tag:"circle",attributes:ye(ye({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||s.children.push({tag:"animate",attributes:ye(ye({},o),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:ye(ye({},a),{},{values:"1;0;1;1;0;1;"})}),r.push(s),r.push({tag:"path",attributes:ye(ye({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:ye(ye({},a),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:ye(ye({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:ye(ye({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},m5e={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),o=i===null?!1:i===""?!0:i;return n.symbol=o,n}}}},g5e=[h8e,t5e,n5e,r5e,i5e,l5e,u5e,f5e,p5e,h5e,m5e];L8e(g5e,{mixoutsTo:K1});var HWe=K1.noAuto,LWe=K1.config,AWe=K1.library,VWe=K1.dom,Tj=K1.parse,NWe=K1.findIconDefinition,_We=K1.toHtml,Ij=K1.icon,kWe=K1.layer,v5e=K1.text,y5e=K1.counter;var x5e=["*"],C5e=e=>{throw new Error(`Could not find icon with iconName=${e.iconName} and prefix=${e.prefix} in the icon library.`)},b5e=()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")},M5e=e=>{let t={[`fa-${e.animation}`]:e.animation!=null&&!e.animation.startsWith("spin"),"fa-spin":e.animation==="spin"||e.animation==="spin-reverse","fa-spin-pulse":e.animation==="spin-pulse"||e.animation==="spin-pulse-reverse","fa-spin-reverse":e.animation==="spin-reverse"||e.animation==="spin-pulse-reverse","fa-pulse":e.animation==="spin-pulse"||e.animation==="spin-pulse-reverse","fa-fw":e.fixedWidth,"fa-border":e.border,"fa-inverse":e.inverse,"fa-layers-counter":e.counter,"fa-flip-horizontal":e.flip==="horizontal"||e.flip==="both","fa-flip-vertical":e.flip==="vertical"||e.flip==="both",[`fa-${e.size}`]:e.size!==null,[`fa-rotate-${e.rotate}`]:e.rotate!==null,[`fa-pull-${e.pull}`]:e.pull!==null,[`fa-stack-${e.stackItemSize}`]:e.stackItemSize!=null};return Object.keys(t).map(n=>t[n]?n:null).filter(n=>n)},w5e=e=>e.prefix!==void 0&&e.iconName!==void 0,S5e=(e,t)=>w5e(e)?e:typeof e=="string"?{prefix:t,iconName:e}:{prefix:e[0],iconName:e[1]},E5e=(()=>{let t=class t{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),D5e=(()=>{let t=class t{constructor(){this.definitions={}}addIcons(...r){for(let i of r){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(let o of i.icon[2])typeof o=="string"&&(this.definitions[i.prefix][o]=i)}}addIconPacks(...r){for(let i of r){let o=Object.keys(i).map(a=>i[a]);this.addIcons(...o)}}getIconDefinition(r,i){return r in this.definitions&&i in this.definitions[r]?this.definitions[r][i]:null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),z5e=(()=>{let t=class t{constructor(){this.stackItemSize="1x"}ngOnChanges(r){if("size"in r)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=kt({type:t,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},standalone:!0,features:[wo]});let e=t;return e})(),H5e=(()=>{let t=class t{constructor(r,i){this.renderer=r,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(r){"size"in r&&(r.size.currentValue!=null&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${r.size.currentValue}`),r.size.previousValue!=null&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${r.size.previousValue}`))}};t.\u0275fac=function(i){return new(i||t)(j(X1),j(Br))},t.\u0275cmp=xe({type:t,selectors:[["fa-stack"]],inputs:{size:"size"},standalone:!0,features:[wo,Ce],ngContentSelectors:x5e,decls:1,vars:0,template:function(i,o){i&1&&(Y$(),X$(0))},encapsulation:2});let e=t;return e})(),hg=(()=>{let t=class t{set spin(r){this.animation=r?"spin":void 0}set pulse(r){this.animation=r?"spin-pulse":void 0}constructor(r,i,o,a,s){this.sanitizer=r,this.config=i,this.iconLibrary=o,this.stackItem=a,this.classes=[],s!=null&&a==null&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(r){if(this.icon==null&&this.config.fallbackIcon==null){b5e();return}if(r){let i=this.icon!=null?this.icon:this.config.fallbackIcon,o=this.findIconDefinition(i);if(o!=null){let a=this.buildParams();this.renderIcon(o,a)}}}render(){this.ngOnChanges({})}findIconDefinition(r){let i=S5e(r,this.config.defaultPrefix);if("icon"in i)return i;let o=this.iconLibrary.getIconDefinition(i.prefix,i.iconName);return o??(C5e(i),null)}buildParams(){let r={flip:this.flip,animation:this.animation,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:typeof this.fixedWidth=="boolean"?this.fixedWidth:this.config.fixedWidth,stackItemSize:this.stackItem!=null?this.stackItem.stackItemSize:null},i=typeof this.transform=="string"?Tj.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...M5e(r),...this.classes],mask:this.mask!=null?this.findIconDefinition(this.mask):null,styles:this.styles!=null?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(r,i){let o=Ij(r,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(o.html.join(`
`))}};t.\u0275fac=function(i){return new(i||t)(j(MD),j(E5e),j(D5e),j(z5e,8),j(H5e,8))},t.\u0275cmp=xe({type:t,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(i,o){i&2&&(UE("innerHTML",o.renderedIconHTML,t$),a6("title",o.title))},inputs:{icon:"icon",title:"title",animation:"animation",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},standalone:!0,features:[wo,Ce],decls:0,vars:0,template:function(i,o){},encapsulation:2});let e=t;return e})();var Fj=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=$i({type:t}),t.\u0275inj=Bi({});let e=t;return e})();var qj=(()=>{let t=class t{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};t.\u0275fac=function(i){return new(i||t)(j(X1),j(Br))},t.\u0275dir=kt({type:t});let e=t;return e})(),T5=(()=>{let t=class t extends qj{};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=ga(t)))(o||t)}})(),t.\u0275dir=kt({type:t,features:[rr]});let e=t;return e})(),V6=new ke(""),L5e={provide:V6,useExisting:ha(()=>Q4),multi:!0},Q4=(()=>{let t=class t extends T5{writeValue(r){this.setProperty("checked",r)}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=ga(t)))(o||t)}})(),t.\u0275dir=kt({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){i&1&&Fe("change",function(s){return o.onChange(s.target.checked)})("blur",function(){return o.onTouched()})},features:[ya([L5e]),rr]});let e=t;return e})(),A5e={provide:V6,useExisting:ha(()=>b1),multi:!0};function V5e(){let e=xa()?xa().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var N5e=new ke(""),b1=(()=>{let t=class t extends qj{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!V5e())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};t.\u0275fac=function(i){return new(i||t)(j(X1),j(Br),j(N5e,8))},t.\u0275dir=kt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Fe("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[ya([A5e]),rr]});let e=t;return e})();var Wj=new ke(""),Yj=new ke("");function Xj(e){return e!=null}function Qj(e){return Xc(e)?Kt(e):e}function Kj(e){let t={};return e.forEach(n=>{t=n!=null?x(x({},t),n):t}),Object.keys(t).length===0?null:t}function Zj(e,t){return t.map(n=>n(e))}function _5e(e){return!e.validate}function Jj(e){return e.map(t=>_5e(t)?t:n=>t.validate(n))}function k5e(e){if(!e)return null;let t=e.filter(Xj);return t.length==0?null:function(n){return Kj(Zj(n,t))}}function Rz(e){return e!=null?k5e(Jj(e)):null}function T5e(e){if(!e)return null;let t=e.filter(Xj);return t.length==0?null:function(n){let r=Zj(n,t).map(Qj);return Hw(r).pipe(We(Kj))}}function Oz(e){return e!=null?T5e(Jj(e)):null}function Rj(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function I5e(e){return e._rawValidators}function F5e(e){return e._rawAsyncValidators}function Fz(e){return e?Array.isArray(e)?e:[e]:[]}function gg(e,t){return Array.isArray(e)?e.includes(t):e===t}function Oj(e,t){let n=Fz(t);return Fz(e).forEach(i=>{gg(n,i)||n.push(i)}),n}function Pj(e,t){return Fz(t).filter(n=>!gg(e,n))}var vg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Rz(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Oz(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},A6=class extends vg{get formDirective(){return null}get path(){return null}},k5=class extends vg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},yg=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},R5e={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},JWe=k(x({},R5e),{"[class.ng-submitted]":"isSubmitted"}),hi=(()=>{let t=class t extends yg{constructor(r){super(r)}};t.\u0275fac=function(i){return new(i||t)(j(k5,2))},t.\u0275dir=kt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&B8("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[rr]});let e=t;return e})(),wa=(()=>{let t=class t extends yg{constructor(r){super(r)}};t.\u0275fac=function(i){return new(i||t)(j(A6,10))},t.\u0275dir=kt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&B8("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[rr]});let e=t;return e})();var V5="VALID",mg="INVALID",L6="PENDING",N5="DISABLED";function eG(e){return(bg(e)?e.validators:e)||null}function O5e(e){return Array.isArray(e)?Rz(e):e||null}function tG(e,t){return(bg(t)?t.asyncValidators:e)||null}function P5e(e){return Array.isArray(e)?Oz(e):e||null}function bg(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function $5e(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new ze(1e3,"");if(!r[n])throw new ze(1001,"")}function B5e(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new ze(1002,"")})}var xg=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===V5}get invalid(){return this.status===mg}get pending(){return this.status==L6}get disabled(){return this.status===N5}get enabled(){return this.status!==N5}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Oj(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Oj(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Pj(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Pj(t,this._rawAsyncValidators))}hasValidator(t){return gg(this._rawValidators,t)}hasAsyncValidator(t){return gg(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=L6,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=N5,this.errors=null,this._forEachChild(r=>{r.disable(k(x({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(k(x({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=V5,this._forEachChild(r=>{r.enable(k(x({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(k(x({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===V5||this.status===L6)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?N5:V5}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=L6,this._hasOwnPendingAsyncValidator=!0;let n=Qj(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new vn,this.statusChanges=new vn}_calculateStatus(){return this._allControlsDisabled()?N5:this.errors?mg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(L6)?L6:this._anyControlsHaveStatus(mg)?mg:V5}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){bg(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=O5e(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=P5e(this._rawAsyncValidators)}},Cg=class extends xg{constructor(t,n,r){super(eG(n),tG(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){B5e(this,!0,t),Object.keys(t).forEach(r=>{$5e(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Pz=new ke("CallSetDisabledState",{providedIn:"root",factory:()=>$z}),$z="always";function U5e(e,t){return[...t.path,e]}function nG(e,t,n=$z){rG(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),G5e(e,t),W5e(e,t),q5e(e,t),j5e(e,t)}function $j(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function j5e(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function rG(e,t){let n=I5e(e);t.validator!==null?e.setValidators(Rj(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=F5e(e);t.asyncValidator!==null?e.setAsyncValidators(Rj(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();$j(t._rawValidators,i),$j(t._rawAsyncValidators,i)}function G5e(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&iG(e,t)})}function q5e(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&iG(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function iG(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function W5e(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function Y5e(e,t){e==null,rG(e,t)}function X5e(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function Q5e(e){return Object.getPrototypeOf(e.constructor)===T5}function K5e(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Z5e(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===b1?n=o:Q5e(o)?r=o:i=o}),i||r||n||null}var J5e={provide:A6,useExisting:ha(()=>p2)},_5=Promise.resolve(),p2=(()=>{let t=class t extends A6{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new vn,this.form=new Cg({},Rz(r),Oz(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){_5.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),nG(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){_5.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){_5.then(()=>{let i=this._findContainer(r.path),o=new Cg({});Y5e(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){_5.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){_5.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,K5e(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};t.\u0275fac=function(i){return new(i||t)(j(Wj,10),j(Yj,10),j(Pz,8))},t.\u0275dir=kt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&Fe("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{options:[Pr.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ya([J5e]),rr]});let e=t;return e})();function Bj(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Uj(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var ede=class extends xg{constructor(t=null,n,r){super(eG(n),tG(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),bg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Uj(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Bj(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Bj(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Uj(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var tde={provide:k5,useExisting:ha(()=>jr)},jj=Promise.resolve(),jr=(()=>{let t=class t extends k5{constructor(r,i,o,a,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this.control=new ede,this._registered=!1,this.name="",this.update=new vn,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=Z5e(this,a)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),X5e(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){nG(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){jj.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&$4(i);jj.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?U5e(r,this._parent):[r]}};t.\u0275fac=function(i){return new(i||t)(j(A6,9),j(Wj,10),j(Yj,10),j(V6,10),j(zs,8),j(Pz,8))},t.\u0275dir=kt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Pr.None,"disabled","isDisabled"],model:[Pr.None,"ngModel","model"],options:[Pr.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ya([tde]),rr,wo]});let e=t;return e})(),Sa=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=kt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let e=t;return e})(),nde={provide:V6,useExisting:ha(()=>Bz),multi:!0},Bz=(()=>{let t=class t extends T5{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=ga(t)))(o||t)}})(),t.\u0275dir=kt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&Fe("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},features:[ya([nde]),rr]});let e=t;return e})();var rde={provide:V6,useExisting:ha(()=>N6),multi:!0};function oG(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function ide(e){return e.split(":")[0]}var N6=(()=>{let t=class t extends T5{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),o=oG(i,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=ide(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=ga(t)))(o||t)}})(),t.\u0275dir=kt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&Fe("change",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[ya([rde]),rr]});let e=t;return e})(),Mg=(()=>{let t=class t{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(oG(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(i){return new(i||t)(j(Br),j(X1),j(N6,9))},t.\u0275dir=kt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let e=t;return e})(),ode={provide:V6,useExisting:ha(()=>aG),multi:!0};function Gj(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function ade(e){return e.split(":")[0]}var aG=(()=>{let t=class t extends T5{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let o=r.map(a=>this._getOptionId(a));i=(a,s)=>{a._setSelected(o.indexOf(s.toString())>-1)}}else i=(o,a)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let o=[],a=i.selectedOptions;if(a!==void 0){let s=a;for(let c=0;c<s.length;c++){let l=s[c],u=this._getOptionValue(l.value);o.push(u)}}else{let s=i.options;for(let c=0;c<s.length;c++){let l=s[c];if(l.selected){let u=this._getOptionValue(l.value);o.push(u)}}}this.value=o,r(o)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=ade(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=ga(t)))(o||t)}})(),t.\u0275dir=kt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&Fe("change",function(s){return o.onChange(s.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[ya([ode]),rr]});let e=t;return e})(),wg=(()=>{let t=class t{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(Gj(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(Gj(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(i){return new(i||t)(j(Br),j(X1),j(aG,9))},t.\u0275dir=kt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let e=t;return e})();var sde=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=$i({type:t}),t.\u0275inj=Bi({});let e=t;return e})();var xr=(()=>{let t=class t{static withConfig(r){return{ngModule:t,providers:[{provide:Pz,useValue:r.callSetDisabledState??$z}]}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=$i({type:t}),t.\u0275inj=Bi({imports:[sde]});let e=t;return e})();var Ea=class{constructor(t){Object.assign(this,t)}toString(){return JSON.stringify(this)}get ViewUrl(){throw new Error("ViewUrl not implemented")}get EditUrl(){throw new Error("EditUrl not implemented")}get DeleteUrl(){throw new Error("DeleteUrl not implemented")}};var or=class extends Ea{constructor(t){super(t)}get ViewUrl(){return["/goals",this.ClientId]}get EditUrl(){return["/goals",this.ClientId,"edit"]}get DeleteUrl(){return["/goals",this.ClientId,"delete"]}};var Gn=(()=>{let t=class t extends yr{constructor(r){super(),this.http=r}listGoals(){let r=vt("/goals");return this.http.get(r)}findGoals(r){let i=vt(`/goals?q=${r}`);return this.http.get(i)}getGoal(r){let i=vt(`/goals/${r}`);return this.http.get(i)}createGoal(r){let i=vt("/goals");return this.http.post(i,r)}updateGoal(r){let i=vt(`/goals/${r.ClientId}`);return this.http.put(i,r)}deleteGoal(r){let i=vt(`/goals/${r}`);return this.http.delete(i)}getGoalTasks(r){let i=vt(`/goals/${r}/tasks`);return this.http.get(i)}getGoalHabits(r){let i=vt(`/goals/${r}/habits`);return this.http.get(i)}};t.\u0275fac=function(i){return new(i||t)(le(Ui))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})();var sG=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(de(1)).subscribe(i=>{this.model=new or(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteGoal(this.model?.ClientId).pipe(de(1)).subscribe(()=>this.router.navigateByUrl("/goals"))}};t.\u0275fac=function(i){return new(i||t)(j(Gn),j(Vt),j(Yt))},t.\u0275cmp=xe({type:t,selectors:[["app-delete-page"]],standalone:!0,features:[Ce],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(H(0,"h1"),T(1),N(),H(2,"p"),T(3,` Deleting this model will make it unrecoverable.
`),N(),H(4,"button",0),Fe("click",function(){return o.deleteModel()}),T(5),N()),i&2&&(R(),Me("Delete ",o.model==null?null:o.model.Name,"?"),R(4),Me(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();var mi=class extends Ea{constructor(t){super(t)}get ViewUrl(){return["/habits",this.ClientId]}get EditUrl(){return["/habits",this.ClientId,"edit"]}get DeleteUrl(){return["/habits",this.ClientId,"delete"]}get TimesCompletedToday(){let t=new Date().toLocaleDateString("en-GB").split("T")[0];return this.CompletedDates?.filter(n=>n===t).length??0}get IsCompletedToday(){return this.IsQuantifiable?this.TimesCompletedToday>=this.TargetValue:this.TimesCompletedToday>0}get FormattedCompletedDates(){let t=[];if(this.AntiHabit){let n=new Date,r=new Date(this.CreatedAt);for(let i=r;i<=n;i.setDate(i.getDate()+1)){let o=i.toLocaleDateString("en-GB").split("T")[0];(!this.CompletedDates||!this.CompletedDates.includes(o))&&t.push(o)}}else t=this.CompletedDates?.map(n=>new Date(n).toLocaleDateString("en-GB").split("T")[0]??[]);return t??[]}};var ji=class extends Ea{constructor(t){super(t),this.Importance=1}get ViewUrl(){return["/tasks",this.ClientId]}get EditUrl(){return["/tasks",this.ClientId,"edit"]}get DeleteUrl(){return["/tasks",this.ClientId,"delete"]}get ImportanceHuman(){let t={1:"Low",2:"Low-Medium",3:"Medium",4:"Medium-High",5:"High"};return this.Importance in t?t[this.Importance]:"Unknown Importance"}get isOverdue(){let t=new Date,n=new Date(this.CompleteBy);return t>n}};function cde(e,t){if(e&1&&(H(0,"pre",4),T(1),N()),e&2){let n=Pe();R(),Sn(n.model==null?null:n.model.Description)}}function lde(e,t){if(e&1&&(H(0,"li")(1,"a",5),T(2),N()()),e&2){let n=t.$implicit;R(),ae("routerLink",n.ViewUrl),R(),Me(" ",n.Name," ")}}function ude(e,t){if(e&1&&(H(0,"li")(1,"a",5),T(2),N()()),e&2){let n=t.$implicit;R(),ae("routerLink",n.ViewUrl),R(),Me(" ",n.Name," ")}}var cG=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(de(1)).subscribe(i=>{this.model=new or(i.data),this.api.getGoalHabits(r).pipe(de(1)).subscribe(o=>{this.associatedHabits=o.data.map(a=>new mi(a))}),this.api.getGoalTasks(r).pipe(de(1)).subscribe(o=>{this.associatedTasks=o.data.map(a=>new ji(a))})})}};t.\u0275fac=function(i){return new(i||t)(j(Gn),j(Vt))},t.\u0275cmp=xe({type:t,selectors:[["app-goal-page"]],standalone:!0,features:[Ce],decls:17,vars:9,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right","uk-margin-small-top",3,"routerLink"],[1,"uk-button-danger","uk-button","uk-margin-small-top",3,"routerLink"],["class","uk-text-default"],[4,"ngFor","ngForOf"],[1,"uk-text-default"],[3,"routerLink"]],template:function(i,o){i&1&&(H(0,"h1"),T(1),N(),H(2,"button",0),T(3),N(),H(4,"button",1),T(5),N(),qe(6,cde,2,1,"pre",2),H(7,"p"),T(8),N(),H(9,"p"),T(10,"Associated Habits:"),N(),H(11,"ul"),qe(12,lde,3,2,"li",3),N(),H(13,"p"),T(14,"Associated Tasks:"),N(),H(15,"ul"),qe(16,ude,3,2,"li",3),N()),i&2&&(R(),Me("Goal: ",o.model==null?null:o.model.Name,""),R(),ae("routerLink",o.model==null?null:o.model.EditUrl),R(),Me(" Edit: ",o.model==null?null:o.model.Name,`
`),R(),ae("routerLink",o.model==null?null:o.model.DeleteUrl),R(),Me(" Delete: ",o.model==null?null:o.model.Name,`
`),R(),ui(6,o.model!=null&&o.model.Description?6:-1),R(2),Me(" Complete By: ",o.model==null?null:o.model.CompleteBy,`
`),R(4),ae("ngForOf",o.associatedHabits),R(4),ae("ngForOf",o.associatedTasks))},dependencies:[un,gr],encapsulation:2});let e=t;return e})();function fde(e,t){if(e&1&&(y1(0),H(1,"p",10),T(2),N(),x1()),e&2){let n=Pe().$implicit;R(2),Me(" ",n.Description," ")}}function dde(e,t){if(e&1){let n=fi();H(0,"tr")(1,"td")(2,"input",6),Wt("ngModelChange",function(i){let a=tr(n).$implicit;return Zt(a.Completed,i)||(a.Completed=i),nr(i)}),Fe("change",function(){let o=tr(n).$implicit,a=Pe();return nr(a.updateGoal(o))}),N()(),H(3,"td")(4,"a",7),T(5),N()(),H(6,"td",3),qe(7,fde,3,1,"ng-container",8),N(),H(8,"td")(9,"a",9),T(10,"View"),N()()()}if(e&2){let n=t.$implicit;Pe();let r=O4(21);R(2),qt("ngModel",n.Completed),R(2),ae("routerLink",n.ViewUrl),R(),Me(" ",n.Name," "),R(2),ae("ngIf",n.Description)("ngIfElse",r),R(2),ae("routerLink",n.ViewUrl)}}function pde(e,t){e&1&&(H(0,"i"),T(1,"No description provided."),N())}var lG=(()=>{let t=class t{constructor(r,i){this.api=r,this.virtualDb=i,this.goals=[]}ngOnInit(){this.updateGoals(),this.virtualDb.changeNotifier.addEventListener("change",()=>this.updateGoals())}updateGoals(){this.api.listGoals().pipe(de(1)).subscribe(r=>{this.goals=r.data.map(i=>new or(i))})}updateGoal(r){this.api.updateGoal(r).pipe(de(1)).subscribe(i=>{r=new or(i.data)})}};t.\u0275fac=function(i){return new(i||t)(j(Gn),j(C1))},t.\u0275cmp=xe({type:t,selectors:[["app-goals-page"]],standalone:!0,features:[Ce],decls:22,vars:1,consts:[[1,"list-header"],["routerLink","/goals/new",1,"uk-button","uk-button-primary"],[1,"uk-table","uk-table-striped"],[1,"hide-in-mobile"],[4,"ngFor","ngForOf"],["defaultDescription",""],["type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange","change"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[4,"ngIf","ngIfElse"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],[1,"description"]],template:function(i,o){i&1&&(H(0,"div",0)(1,"h1"),T(2,"Goals"),N(),H(3,"section")(4,"nav")(5,"a",1),T(6,"New Goal"),N()()()(),H(7,"section")(8,"table",2)(9,"thead")(10,"tr"),dt(11,"th"),H(12,"th"),T(13,"Name"),N(),H(14,"th",3),T(15,"Description"),N(),H(16,"th"),T(17,"Action"),N()()(),H(18,"tbody"),qe(19,dde,11,6,"tr",4),N()()(),qe(20,pde,2,0,"ng-template",null,5,Ls)),i&2&&(R(19),ae("ngForOf",o.goals))},dependencies:[un,gr,xr,Q4,hi,jr,di],styles:["p.description[_ngcontent-%COMP%]{text-wrap:nowrap;padding-right:10rem;width:28rem;overflow:hidden}"]});let e=t;return e})();var _6=(()=>{let t=class t{constructor(){this.model={}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=kt({type:t,selectors:[["app-abstract-form"]],inputs:{creating:"creating",model:"model"},standalone:!0});let e=t;return e})();var Sg=(()=>{let t=class t extends yr{constructor(r){super(),this.http=r}getHabitsForGoal(r){let i=vt("/ai/habits");return this.http.post(i,r)}getTasksForGoal(r){let i=vt("/ai/tasks");return this.http.post(i,r)}};t.\u0275fac=function(i){return new(i||t)(le(Ui))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})();var M1=(()=>{let t=class t extends yr{constructor(r){super(),this.http=r}getHabits(){let r=vt("/habits");return this.http.get(r)}getHabit(r){let i=vt(`/habits/${r}`);return this.http.get(i)}createHabit(r){let i=vt("/habits");return this.http.post(i,r)}updateHabit(r){let i=vt(`/habits/${r.ClientId}`);return this.http.put(i,r)}deleteHabit(r){let i=vt(`/habits/${r}`);return this.http.delete(i)}};t.\u0275fac=function(i){return new(i||t)(le(Ui))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})();var w1=(()=>{let t=class t extends yr{constructor(r){super(),this.http=r}getTodaysRemainingTasks(){throw new Error("Not implemented")}getTasks(){let r=vt("/tasks");return this.http.get(r)}getTask(r){let i=vt(`/tasks/${r}`);return this.http.get(i)}createTask(r){let i=vt("/tasks");return this.http.post(i,r)}updateTask(r){let i=vt(`/tasks/${r.ClientId}`);return this.http.put(i,r)}deleteTask(r){let i=vt(`/tasks/${r}`);return this.http.delete(i)}};t.\u0275fac=function(i){return new(i||t)(le(Ui))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})();function mde(e,t){e&1&&(H(0,"h1"),T(1,"Create Goal"),N())}function gde(e,t){if(e&1&&(H(0,"h1"),T(1),N()),e&2){let n=Pe();R(),Me("Edit Goal: ",n.model.Name,"")}}function vde(e,t){if(e&1){let n=fi();H(0,"li")(1,"button",9),Fe("click",function(){let o=tr(n).$implicit,a=Pe(2);return nr(a.addSuggestedTask(o))}),T(2),N()()}if(e&2){let n=t.$implicit;R(2),Me(" Add ",n.Name," ")}}function yde(e,t){if(e&1&&(H(0,"div")(1,"h2"),T(2,"Suggested Tasks"),N(),H(3,"ul",7),qe(4,vde,3,1,"li",8),N()()),e&2){let n=Pe();R(4),ae("ngForOf",n.aiTasks)}}function xde(e,t){if(e&1){let n=fi();H(0,"li")(1,"button",9),Fe("click",function(){let o=tr(n).$implicit,a=Pe(2);return nr(a.addSuggestedHabit(o))}),T(2),N()()}if(e&2){let n=t.$implicit;R(2),Me(" Add ",n.Name," ")}}function Cde(e,t){if(e&1&&(H(0,"div")(1,"h2"),T(2,"Suggested Habits"),N(),H(3,"ul",7),qe(4,xde,3,1,"li",8),N()()),e&2){let n=Pe();R(4),ae("ngForOf",n.aiHabits)}}var Eg=(()=>{let t=class t extends _6{constructor(r,i,o,a,s){super(),this.api=r,this.gptApi=i,this.habitsApi=o,this.tasksApi=a,this.router=s,this.aiHabits=[],this.aiTasks=[]}submitForm(){let r=new or(this.model);this.creating?this.api.createGoal(r).pipe(de(1)).subscribe(()=>{this.router.navigate(["/goals"])}):this.api.updateGoal(r).pipe(de(1)).subscribe(()=>{this.router.navigate(r.ViewUrl)})}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString("en-GB")}getAiTasksAndHabits(){if(!this.model.Name){console.error("Goal name is required to generate AI tasks and habits.");return}this.gptApi.getHabitsForGoal(this.model).pipe(de(1)).subscribe(r=>{this.aiHabits=r.data.map(i=>new mi(i))}),this.gptApi.getTasksForGoal(this.model).pipe(de(1)).subscribe(r=>{this.aiTasks=r.data.map(i=>new ji(i))})}addSuggestedHabit(r){(this.model?.ClientId||this.model?.ClientId==="0")&&(r.Goal=this.model.ClientId),this.habitsApi.createHabit(r).pipe(de(1)).subscribe(()=>{this.aiHabits=this.aiHabits.filter(i=>i.Name!==r.Name)})}addSuggestedTask(r){(this.model?.ClientId||this.model?.ClientId==="0")&&(r.Goal=this.model.ClientId),this.tasksApi.createTask(r).pipe(de(1)).subscribe(()=>{this.aiTasks=this.aiTasks.filter(i=>i.Name!==r.Name)})}};t.\u0275fac=function(i){return new(i||t)(j(Gn),j(Sg),j(M1),j(w1),j(Yt))},t.\u0275cmp=xe({type:t,selectors:[["app-goal-form"]],standalone:!0,features:[rr,Ce],decls:20,vars:6,consts:[[1,"uk-form-label"],["name","name","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["name","description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","date",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"],["type","button",1,"uk-button","uk-button-default","uk-margin-top","uk-margin-bottom",3,"click"],[4,"ngIf"],[1,"uk-list","uk-list-disc"],[4,"ngFor","ngForOf"],["type","button",1,"uk-button","uk-button-small","uk-button-default",3,"click"]],template:function(i,o){i&1&&(qe(0,mde,2,0,"h1")(1,gde,2,1),H(2,"form")(3,"label",0),T(4," Goal Name "),H(5,"input",1),Wt("ngModelChange",function(s){return Zt(o.model.Name,s)||(o.model.Name=s),s}),N()(),H(6,"label",0),T(7," Goal Description "),H(8,"textarea",2),Wt("ngModelChange",function(s){return Zt(o.model.Description,s)||(o.model.Description=s),s}),N()(),H(9,"label",0),T(10," Complete By "),H(11,"input",3),Fe("change",function(s){return o.updateCompleteBy(s)}),N()(),H(12,"button",4),Fe("click",function(){return o.submitForm()}),T(13),N(),dt(14,"hr"),H(15,"div")(16,"button",5),Fe("click",function(){return o.getAiTasksAndHabits()}),T(17," Generate AI Tasks and Habits "),N(),qe(18,yde,5,1,"div",6)(19,Cde,5,1,"div",6),N()()),i&2&&(ui(0,o.creating?0:1),R(5),qt("ngModel",o.model.Name),R(3),qt("ngModel",o.model.Description),R(5),Me(" ",o.creating?"Create":"Update"," Goal "),R(5),ae("ngIf",o.aiTasks.length>0),R(),ae("ngIf",o.aiHabits.length>0))},dependencies:[xr,Sa,b1,hi,wa,jr,p2,l6,gr,di]});let e=t;return e})();var uG=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-new-goal-page"]],standalone:!0,features:[Ce],decls:1,vars:1,consts:[[3,"creating"]],template:function(i,o){i&1&&dt(0,"app-goal-form",0),i&2&&ae("creating",!0)},dependencies:[Eg],encapsulation:2});let e=t;return e})();var fG=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(de(1)).subscribe(i=>{this.model=new mi(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteHabit(this.model?.ClientId).pipe(de(1)).subscribe(()=>this.router.navigateByUrl("/"))}};t.\u0275fac=function(i){return new(i||t)(j(M1),j(Vt),j(Yt))},t.\u0275cmp=xe({type:t,selectors:[["app-delete-habit-page"]],standalone:!0,features:[Ce],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(H(0,"h1"),T(1),N(),H(2,"p"),T(3,` Deleting this model will make it unrecoverable.
`),N(),H(4,"button",0),Fe("click",function(){return o.deleteModel()}),T(5),N()),i&2&&(R(),Me("Delete ",o.model==null?null:o.model.Name,"?"),R(4),Me(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();var Dg={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]};var zg={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]};var dG={$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:"container",data:{values:[]},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"date",timeUnit:"date",type:"ordinal",title:"Day",axis:{tickCount:{timeUnit:"day",step:1}}},y:{field:"date",timeUnit:"month",type:"ordinal",title:"Month",scale:{domain:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},color:{field:"count",type:"quantitative",title:"Count",condition:{test:"datum.count === 0",value:"transparent"},legend:null}}};var Uz={};mr(Uz,{JsonPatchError:()=>Dn,_areEquals:()=>R5,applyOperation:()=>K4,applyPatch:()=>F6,applyReducer:()=>Dde,deepClone:()=>Sde,getValueByPointer:()=>Ng,validate:()=>hG,validator:()=>_g});var Mde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wde=Object.prototype.hasOwnProperty;function Lg(e,t){return wde.call(e,t)}function Ag(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Lg(e,i)&&r.push(i);return r}function Gr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Vg(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Da(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function I5(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Hg(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Hg(e[t]))return!0}else if(typeof e=="object"){for(var r=Ag(e),i=r.length,o=0;o<i;o++)if(Hg(e[r[o]]))return!0}}return!1}function pG(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var F5=function(e){Mde(t,e);function t(n,r,i,o,a){var s=this.constructor,c=e.call(this,pG(n,{name:r,index:i,operation:o,tree:a}))||this;return c.name=r,c.index=i,c.operation=o,c.tree=a,Object.setPrototypeOf(c,s.prototype),c.message=pG(n,{name:r,index:i,operation:o,tree:a}),c}return t}(Error);var Dn=F5,Sde=Gr,I6={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Ng(n,this.path);r&&(r=Gr(r));var i=K4(n,{op:"remove",path:this.from}).removed;return K4(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Ng(n,this.from);return K4(n,{op:"add",path:this.path,value:Gr(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:R5(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Ede={add:function(e,t,n){return Vg(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:I6.move,copy:I6.copy,test:I6.test,_get:I6._get};function Ng(e,t){if(t=="")return e;var n={op:"_get",path:t};return K4(e,n),n.value}function K4(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):_g(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=Ng(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=R5(e,t.value),a.test===!1)throw new Dn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new Dn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}}else{r||(e=Gr(e));var s=t.path||"",c=s.split("/"),l=e,u=1,f=c.length,d=void 0,p=void 0,h=void 0;for(typeof n=="function"?h=n:h=_g;;){if(p=c[u],p&&p.indexOf("~")!=-1&&(p=I5(p)),i&&(p=="__proto__"||p=="prototype"&&u>0&&c[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[p]===void 0?d=c.slice(0,u).join("/"):u==f-1&&(d=t.path),d!==void 0&&h(t,0,e,d)),u++,Array.isArray(l)){if(p==="-")p=l.length;else{if(n&&!Vg(p))throw new Dn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);Vg(p)&&(p=~~p)}if(u>=f){if(n&&t.op==="add"&&p>l.length)throw new Dn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var a=Ede[t.op].call(t,l,p,e);if(a.test===!1)throw new Dn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(u>=f){var a=I6[t.op].call(t,l,p,e);if(a.test===!1)throw new Dn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}if(l=l[p],n&&u<f&&(!l||typeof l!="object"))throw new Dn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function F6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Dn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Gr(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=K4(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function Dde(e,t,n){var r=K4(e,t);if(r.test===!1)throw new Dn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function _g(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Dn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(I6[e.op]){if(typeof e.path!="string")throw new Dn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Dn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Dn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Dn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Hg(e.value))throw new Dn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Dn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Dn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},s=hG([a],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new Dn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Dn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function hG(e,t,n){try{if(!Array.isArray(e))throw new Dn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)F6(Gr(t),Gr(e),n||!0);else{n=n||_g;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Dn)return i;throw i}}function R5(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,a;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!R5(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var s=Object.keys(e);if(o=s.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(s[i]))return!1;for(i=o;i--!==0;)if(a=s[i],!R5(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}var Wz={};mr(Wz,{compare:()=>kde,generate:()=>jz,observe:()=>_de,unobserve:()=>Nde});var Gz=new WeakMap,zde=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Hde=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Lde(e){return Gz.get(e)}function Ade(e,t){return e.observers.get(t)}function Vde(e,t){e.observers.delete(t.callback)}function Nde(e,t){t.unobserve()}function _de(e,t){var n=[],r,i=Lde(e);if(!i)i=new zde(e),Gz.set(e,i);else{var o=Ade(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Gr(e),t){r.callback=t,r.next=null;var a=function(){jz(r)},s=function(){clearTimeout(r.next),r.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return r.patches=n,r.object=e,r.unobserve=function(){jz(r),clearTimeout(r.next),Vde(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},i.observers.set(t,new Hde(t,r)),r}function jz(e,t){t===void 0&&(t=!1);var n=Gz.get(e.object);qz(n.value,e.object,e.patches,"",t),e.patches.length&&F6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function qz(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=Ag(t),a=Ag(e),s=!1,c=!1,l=a.length-1;l>=0;l--){var u=a[l],f=e[u];if(Lg(t,u)&&!(t[u]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof f=="object"&&f!=null&&typeof d=="object"&&d!=null&&Array.isArray(f)===Array.isArray(d)?qz(f,d,n,r+"/"+Da(u),i):f!==d&&(s=!0,i&&n.push({op:"test",path:r+"/"+Da(u),value:Gr(f)}),n.push({op:"replace",path:r+"/"+Da(u),value:Gr(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Da(u),value:Gr(f)}),n.push({op:"remove",path:r+"/"+Da(u)}),c=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}),s=!0)}if(!(!c&&o.length==a.length))for(var l=0;l<o.length;l++){var u=o[l];!Lg(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Da(u),value:Gr(t[u])})}}}function kde(e,t,n){n===void 0&&(n=!1);var r=[];return qz(e,t,r,"",n),r}var tXe=Object.assign({},Uz,Wz,{JsonPatchError:F5,deepClone:Gr,escapePathComponent:Da,unescapePathComponent:I5});var rw=_ae(gG());var ZT={};mr(ZT,{Bounds:()=>Hn,CanvasHandler:()=>nc,CanvasRenderer:()=>M7,DATE:()=>Qi,DAY:()=>qr,DAYOFYEAR:()=>Va,Dataflow:()=>v3,Debug:()=>Xz,Error:()=>P5,EventStream:()=>eu,Gradient:()=>SV,GroupItem:()=>z7,HOURS:()=>z1,Handler:()=>R3,HybridHandler:()=>KV,HybridRenderer:()=>Gy,Info:()=>Yz,Item:()=>D7,MILLISECONDS:()=>No,MINUTES:()=>H1,MONTH:()=>Wr,Marks:()=>Ji,MultiPulse:()=>fv,None:()=>xG,Operator:()=>Tt,Parameters:()=>Sd,Pulse:()=>Ws,QUARTER:()=>Xi,RenderType:()=>rc,Renderer:()=>no,ResourceLoader:()=>HV,SECONDS:()=>eo,SVGHandler:()=>jV,SVGRenderer:()=>tx,SVGStringRenderer:()=>QV,Scenegraph:()=>ex,TIME_UNITS:()=>Kg,Transform:()=>$,View:()=>ET,WEEK:()=>qn,Warn:()=>Ig,YEAR:()=>br,accessor:()=>gi,accessorFields:()=>ar,accessorName:()=>an,array:()=>te,ascending:()=>q5,bandwidthNRD:()=>mv,bin:()=>vL,bootstrapCI:()=>yL,boundClip:()=>JV,boundContext:()=>H7,boundItem:()=>gV,boundMark:()=>JX,boundStroke:()=>Ua,changeset:()=>Xs,clampRange:()=>nH,codegenExpression:()=>fC,compare:()=>G5,constant:()=>fn,cumulativeLogNormal:()=>bv,cumulativeNormal:()=>zd,cumulativeUniform:()=>Ev,dayofyear:()=>jH,debounce:()=>W5,defaultLocale:()=>Cd,definition:()=>dv,densityLogNormal:()=>Cv,densityNormal:()=>gv,densityUniform:()=>Sv,domChild:()=>fr,domClear:()=>Ro,domCreate:()=>N3,domFind:()=>UV,dotbin:()=>xL,error:()=>B,expressionFunction:()=>Nn,extend:()=>Te,extent:()=>Gi,extentIndex:()=>rH,falsy:()=>Fs,fastmap:()=>a3,field:()=>Cr,flush:()=>iH,font:()=>Zy,fontFamily:()=>V7,fontSize:()=>ja,format:()=>iv,formatLocale:()=>xd,formats:()=>uL,hasOwnProperty:()=>he,id:()=>R6,identity:()=>zn,inferType:()=>Rq,inferTypes:()=>Oq,ingest:()=>lt,inherits:()=>ee,inrange:()=>s3,interpolate:()=>u7,interpolateColors:()=>vu,interpolateRange:()=>by,intersect:()=>ZV,intersectBoxLine:()=>xu,intersectPath:()=>LV,intersectPoint:()=>AV,intersectRule:()=>BX,isArray:()=>F,isBoolean:()=>S1,isDate:()=>m2,isFunction:()=>Ie,isIterable:()=>oH,isNumber:()=>Be,isObject:()=>ne,isRegExp:()=>aH,isString:()=>Q,isTuple:()=>ll,key:()=>Y5,lerp:()=>sH,lineHeight:()=>I3,loader:()=>Z6,locale:()=>nv,logger:()=>$5,lruCache:()=>cH,markup:()=>XV,merge:()=>lH,mergeConfig:()=>Ha,multiLineOffset:()=>Ky,one:()=>za,pad:()=>uH,panLinear:()=>Qz,panLog:()=>Kz,panPow:()=>Zz,panSymlog:()=>Jz,parse:()=>tne,parseExpression:()=>Xu,parseSelector:()=>Di,path:()=>pl,pathCurves:()=>EV,pathEqual:()=>AQ,pathParse:()=>_l,pathRectangle:()=>FX,pathRender:()=>Cu,pathSymbols:()=>IX,pathTrail:()=>RX,peek:()=>Ye,point:()=>N7,projection:()=>rp,quantileLogNormal:()=>Mv,quantileNormal:()=>Hd,quantileUniform:()=>Dv,quantiles:()=>pv,quantizeInterpolator:()=>My,quarter:()=>eH,quartiles:()=>hv,random:()=>Ki,randomInteger:()=>Xhe,randomKDE:()=>yv,randomLCG:()=>Yhe,randomLogNormal:()=>CL,randomMixture:()=>bL,randomNormal:()=>vv,randomUniform:()=>ML,read:()=>dL,regressionConstant:()=>zv,regressionExp:()=>SL,regressionLinear:()=>Lv,regressionLoess:()=>zL,regressionLog:()=>wL,regressionPoly:()=>DL,regressionPow:()=>EL,regressionQuad:()=>Av,renderModule:()=>_7,repeat:()=>O5,resetDefaultLocale:()=>kq,resetSVGClipId:()=>PX,resetSVGDefIds:()=>_ye,responseType:()=>fL,runtimeContext:()=>gC,sampleCurve:()=>nu,sampleLogNormal:()=>xv,sampleNormal:()=>Dd,sampleUniform:()=>wv,scale:()=>pt,sceneEqual:()=>eN,sceneFromJSON:()=>tQ,scenePickVisit:()=>Iy,sceneToJSON:()=>eQ,sceneVisit:()=>w2,sceneZOrder:()=>VV,scheme:()=>f7,serializeXML:()=>yQ,setHybridRendererOptions:()=>Lye,setRandom:()=>qhe,span:()=>Os,splitAccessPath:()=>zo,stringValue:()=>Z,textMetrics:()=>L1,timeBin:()=>eL,timeFloor:()=>YH,timeFormatLocale:()=>cl,timeInterval:()=>js,timeOffset:()=>QH,timeSequence:()=>ZH,timeUnitSpecifier:()=>BH,timeUnits:()=>Zg,toBoolean:()=>X5,toDate:()=>Q5,toNumber:()=>Rn,toSet:()=>cr,toString:()=>K5,transform:()=>gL,transforms:()=>Ys,truncate:()=>fH,truthy:()=>sr,tupleid:()=>De,typeParsers:()=>sL,utcFloor:()=>XH,utcInterval:()=>Gs,utcOffset:()=>KH,utcSequence:()=>JH,utcdayofyear:()=>qH,utcquarter:()=>tH,utcweek:()=>WH,version:()=>GLe,visitArray:()=>Ps,week:()=>GH,writeConfig:()=>Rs,zero:()=>h2,zoomLinear:()=>B5,zoomLog:()=>U5,zoomPow:()=>O6,zoomSymlog:()=>j5});function gi(e,t,n){return e.fields=t||[],e.fname=n,e}function an(e){return e==null?null:e.fname}function ar(e){return e==null?null:e.fields}function yG(e){return e.length===1?Ide(e[0]):Fde(e)}var Ide=e=>function(t){return t[e]},Fde=e=>{let t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function B(e){throw Error(e)}function zo(e){let t=[],n=e.length,r=null,i=0,o="",a,s,c;e=e+"";function l(){t.push(o+e.substring(a,s)),o="",a=s+1}for(a=s=0;s<n;++s)if(c=e[s],c==="\\")o+=e.substring(a,s++),a=s;else if(c===r)l(),r=null,i=-1;else{if(r)continue;a===i&&c==='"'||a===i&&c==="'"?(a=s+1,r=c):c==="."&&!i?s>a?l():a=s+1:c==="["?(s>a&&l(),i=a=s+1):c==="]"&&(i||B("Access path missing open bracket: "+e),i>0&&l(),i=0,a=s+1)}return i&&B("Access path missing closing bracket: "+e),r&&B("Access path missing closing quote: "+e),s>a&&(s++,l()),t}function Cr(e,t,n){let r=zo(e);return e=r.length===1?r[0]:e,gi((n&&n.get||yG)(r),[e],t||e)}var R6=Cr("id"),zn=gi(e=>e,[],"identity"),h2=gi(()=>0,[],"zero"),za=gi(()=>1,[],"one"),sr=gi(()=>!0,[],"true"),Fs=gi(()=>!1,[],"false");function Rde(e,t,n){let r=[t].concat([].slice.call(n));console[e].apply(console,r)}var xG=0,P5=1,Ig=2,Yz=3,Xz=4;function $5(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Rde,r=e||xG;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=P5&&n(t||"error","ERROR",arguments),this},warn(){return r>=Ig&&n(t||"warn","WARN",arguments),this},info(){return r>=Yz&&n(t||"log","INFO",arguments),this},debug(){return r>=Xz&&n(t||"log","DEBUG",arguments),this}}}var F=Array.isArray;function ne(e){return e===Object(e)}var vG=e=>e!=="__proto__";function Ha(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(let o in i)if(o==="signals")r.signals=Ode(r.signals,i.signals);else{let a=o==="legend"?{layout:1}:o==="style"?!0:null;Rs(r,o,i[o],a)}return r},{})}function Rs(e,t,n,r){if(!vG(t))return;let i,o;if(ne(n)&&!F(n)){o=ne(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Rs(o,i,n[i]):vG(i)&&(o[i]=n[i])}else e[t]=n}function Ode(e,t){if(e==null)return t;let n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function Ye(e){return e[e.length-1]}function Rn(e){return e==null||e===""?null:+e}var CG=e=>t=>e*Math.exp(t),bG=e=>t=>Math.log(e*t),MG=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),wG=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Tg=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Fg(e,t,n,r){let i=n(e[0]),o=n(Ye(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function Qz(e,t){return Fg(e,t,Rn,zn)}function Kz(e,t){var n=Math.sign(e[0]);return Fg(e,t,bG(n),CG(n))}function Zz(e,t,n){return Fg(e,t,Tg(n),Tg(1/n))}function Jz(e,t,n){return Fg(e,t,MG(n),wG(n))}function Rg(e,t,n,r,i){let o=r(e[0]),a=r(Ye(e)),s=t!=null?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function B5(e,t,n){return Rg(e,t,n,Rn,zn)}function U5(e,t,n){let r=Math.sign(e[0]);return Rg(e,t,n,bG(r),CG(r))}function O6(e,t,n,r){return Rg(e,t,n,Tg(r),Tg(1/r))}function j5(e,t,n,r){return Rg(e,t,n,MG(r),wG(r))}function eH(e){return 1+~~(new Date(e).getMonth()/3)}function tH(e){return 1+~~(new Date(e).getUTCMonth()/3)}function te(e){return e!=null?F(e)?e:[e]:[]}function nH(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Ie(e){return typeof e=="function"}var Pde="descending";function G5(e,t,n){n=n||{},t=te(t)||[];let r=[],i=[],o={},a=n.comparator||$de;return te(e).forEach((s,c)=>{s!=null&&(r.push(t[c]===Pde?-1:1),i.push(s=Ie(s)?s:Cr(s,null,n)),(ar(s)||[]).forEach(l=>o[l]=1))}),i.length===0?null:gi(a(i,r),Object.keys(o))}var q5=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),$de=(e,t)=>e.length===1?Bde(e[0],t[0]):Ude(e,t,e.length),Bde=(e,t)=>function(n,r){return q5(e(n),e(r))*t},Ude=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;a===0&&++s<n;)o=e[s],a=q5(o(r),o(i));return a*t[s]});function fn(e){return Ie(e)?e:()=>e}function W5(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Te(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Gi(e,t){let n=0,r,i,o,a;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=a=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>a&&(a=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=a=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>a&&(a=i))}return[o,a]}function rH(e,t){let n=e.length,r=-1,i,o,a,s,c;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=c=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,c=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=c=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,c=r))}return[s,c]}var jde=Object.prototype.hasOwnProperty;function he(e,t){return jde.call(e,t)}var kg={};function a3(e){let t={},n;function r(o){return he(t,o)&&t[o]!==kg}let i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,a){return r(o)||(++i.size,t[o]===kg&&--i.empty),t[o]=a,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=kg),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){let o={},a=0;for(let s in t){let c=t[s];c!==kg&&(!n||!n(c))&&(o[s]=c,++a)}i.size=a,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function iH(e,t,n,r,i,o){if(!n&&n!==0)return o;let a=+n,s=e[0],c=Ye(e),l;c<s&&(l=s,s=c,c=l),l=Math.abs(t-s);let u=Math.abs(c-t);return l<u&&l<=a?r:u<=a?i:o}function ee(e,t,n){let r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Te(r,n)}function s3(e,t,n,r){let i=t[0],o=t[t.length-1],a;return i>o&&(a=i,i=o,o=a),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function S1(e){return typeof e=="boolean"}function m2(e){return Object.prototype.toString.call(e)==="[object Date]"}function oH(e){return e&&Ie(e[Symbol.iterator])}function Be(e){return typeof e=="number"}function aH(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Q(e){return typeof e=="string"}function Y5(e,t,n){e&&(e=t?te(e).map(s=>s.replace(/\\(.)/g,"$1")):te(e));let r=e&&e.length,i=n&&n.get||yG,o=s=>i(t?[s]:zo(s)),a;if(!r)a=function(){return""};else if(r===1){let s=o(e[0]);a=function(c){return""+s(c)}}else{let s=e.map(o);a=function(c){let l=""+s[0](c),u=0;for(;++u<r;)l+="|"+s[u](c);return l}}return gi(a,e,"key")}function sH(e,t){let n=e[0],r=Ye(e),i=+t;return i?i===1?r:n+i*(r-n):n}var Gde=1e4;function cH(e){e=+e||Gde;let t,n,r,i=()=>{t={},n={},r=0},o=(a,s)=>(++r>e&&(n=t,t={},r=1),t[a]=s);return i(),{clear:i,has:a=>he(t,a)||he(n,a),get:a=>he(t,a)?t[a]:he(n,a)?o(a,n[a]):void 0,set:(a,s)=>he(t,a)?t[a]=s:o(a,s)}}function lH(e,t,n,r){let i=t.length,o=n.length;if(!o)return t;if(!i)return n;let a=r||new t.constructor(i+o),s=0,c=0,l=0;for(;s<i&&c<o;++l)a[l]=e(t[s],n[c])>0?n[c++]:t[s++];for(;s<i;++s,++l)a[l]=t[s];for(;c<o;++c,++l)a[l]=n[c];return a}function O5(e,t){let n="";for(;--t>=0;)n+=e;return n}function uH(e,t,n,r){let i=n||" ",o=e+"",a=t-o.length;return a<=0?o:r==="left"?O5(i,a)+o:r==="center"?O5(i,~~(a/2))+o+O5(i,Math.ceil(a/2)):o+O5(i,a)}function Os(e){return e&&Ye(e)-e[0]||0}function Z(e){return F(e)?"["+e.map(Z)+"]":ne(e)||Q(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function X5(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}var qde=e=>Be(e)||m2(e)?e:Date.parse(e);function Q5(e,t){return t=t||qde,e==null||e===""?null:t(e)}function K5(e){return e==null||e===""?null:e+""}function cr(e){let t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function fH(e,t,n,r){let i=r??"\u2026",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:n==="left"?i+o.slice(a-s):n==="center"?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function Ps(e,t,n){if(e)if(t){let r=e.length;for(let i=0;i<r;++i){let o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var SG={},dH={},pH=34,Z5=10,hH=13;function DG(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Wde(e,t){var n=DG(e);return function(r,i){return t(n(r),i,e)}}function EG(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function E1(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Yde(e){return e<0?"-"+E1(-e,6):e>9999?"+"+E1(e,6):E1(e,4)}function Xde(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Yde(e.getUTCFullYear(),4)+"-"+E1(e.getUTCMonth()+1,2)+"-"+E1(e.getUTCDate(),2)+(i?"T"+E1(t,2)+":"+E1(n,2)+":"+E1(r,2)+"."+E1(i,3)+"Z":r?"T"+E1(t,2)+":"+E1(n,2)+":"+E1(r,2)+"Z":n||t?"T"+E1(t,2)+":"+E1(n,2)+"Z":"")}function mH(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var p,h,m=i(f,function(g,v){if(p)return p(g,v-1);h=g,p=d?Wde(g,d):DG(g)});return m.columns=h||[],m}function i(f,d){var p=[],h=f.length,m=0,g=0,v,y=h<=0,C=!1;f.charCodeAt(h-1)===Z5&&--h,f.charCodeAt(h-1)===hH&&--h;function b(){if(y)return dH;if(C)return C=!1,SG;var S,w=m,E;if(f.charCodeAt(w)===pH){for(;m++<h&&f.charCodeAt(m)!==pH||f.charCodeAt(++m)===pH;);return(S=m)>=h?y=!0:(E=f.charCodeAt(m++))===Z5?C=!0:E===hH&&(C=!0,f.charCodeAt(m)===Z5&&++m),f.slice(w+1,S-1).replace(/""/g,'"')}for(;m<h;){if((E=f.charCodeAt(S=m++))===Z5)C=!0;else if(E===hH)C=!0,f.charCodeAt(m)===Z5&&++m;else if(E!==n)continue;return f.slice(w,S)}return y=!0,f.slice(w,h)}for(;(v=b())!==dH;){for(var M=[];v!==SG&&v!==dH;)M.push(v),v=b();d&&(M=d(M,g++))==null||p.push(M)}return p}function o(f,d){return f.map(function(p){return d.map(function(h){return u(p[h])}).join(e)})}function a(f,d){return d==null&&(d=EG(f)),[d.map(u).join(e)].concat(o(f,d)).join(`
`)}function s(f,d){return d==null&&(d=EG(f)),o(f,d).join(`
`)}function c(f){return f.map(l).join(`
`)}function l(f){return f.map(u).join(e)}function u(f){return f==null?"":f instanceof Date?Xde(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:c,formatRow:l,formatValue:u}}function gH(e){return e}function Og(e){if(e==null)return gH;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(s,c){c||(t=n=0);var l=2,u=s.length,f=new Array(u);for(f[0]=(t+=s[0])*r+o,f[1]=(n+=s[1])*i+a;l<u;)f[l]=s[l],++l;return f}}function zG(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function vH(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return HG(e,n)})}:HG(e,t)}function HG(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=Pg(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function Pg(e,t){var n=Og(e.transform),r=e.arcs;function i(u,f){f.length&&f.pop();for(var d=r[u<0?~u:u],p=0,h=d.length;p<h;++p)f.push(n(d[p],p));u<0&&zG(f,h)}function o(u){return n(u)}function a(u){for(var f=[],d=0,p=u.length;d<p;++d)i(u[d],f);return f.length<2&&f.push(f[0]),f}function s(u){for(var f=a(u);f.length<4;)f.push(f[0]);return f}function c(u){return u.map(s)}function l(u){var f=u.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(l)};case"Point":d=o(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(o);break;case"LineString":d=a(u.arcs);break;case"MultiLineString":d=u.arcs.map(a);break;case"Polygon":d=c(u.arcs);break;case"MultiPolygon":d=u.arcs.map(c);break;default:return null}return{type:f,coordinates:d}}return l(t)}function yH(e,t){var n={},r={},i={},o=[],a=-1;t.forEach(function(l,u){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++a],t[a]=l,t[u]=d)}),t.forEach(function(l){var u=s(l),f=u[0],d=u[1],p,h;if(p=i[f])if(delete i[p.end],p.push(l),p.end=d,h=r[d]){delete r[h.start];var m=h===p?p:p.concat(h);r[m.start=p.start]=i[m.end=h.end]=m}else r[p.start]=i[p.end]=p;else if(p=r[d])if(delete r[p.start],p.unshift(l),p.start=f,h=i[f]){delete i[h.end];var g=h===p?p:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[p.start]=i[p.end]=p;else p=[l],r[p.start=f]=i[p.end=d]=p});function s(l){var u=e.arcs[l<0?~l:l],f=u[0],d;return e.transform?(d=[0,0],u.forEach(function(p){d[0]+=p[0],d[1]+=p[1]})):d=u[u.length-1],l<0?[d,f]:[f,d]}function c(l,u){for(var f in l){var d=l[f];delete u[d.start],delete d.start,delete d.end,d.forEach(function(p){n[p<0?~p:p]=1}),o.push(d)}}return c(i,r),c(r,i),t.forEach(function(l){n[l<0?~l:l]||o.push([l])}),o}function xH(e){return Pg(e,LG.apply(this,arguments))}function LG(e,t,n){var r,i,o;if(arguments.length>1)r=Qde(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:yH(e,r)}}function Qde(e,t,n){var r=[],i=[],o;function a(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function s(f){f.forEach(a)}function c(f){f.forEach(s)}function l(f){f.forEach(c)}function u(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(u);break;case"LineString":s(f.arcs);break;case"MultiLineString":case"Polygon":c(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return u(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function vi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function CH(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Z1(e){let t,n,r;e.length!==2?(t=vi,n=(s,c)=>vi(e(s),c),r=(s,c)=>e(s)-c):(t=e===vi||e===CH?e:Jde,n=e,r=e);function i(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{let f=l+u>>>1;n(s[f],c)<0?l=f+1:u=f}while(l<u)}return l}function o(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{let f=l+u>>>1;n(s[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function a(s,c,l=0,u=s.length){let f=i(s,c,l,u-1);return f>l&&r(s[f-1],c)>-r(s[f],c)?f-1:f}return{left:i,center:a,right:o}}function Jde(){return 0}function J5(e){return e===null?NaN:+e}function*AG(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}var VG=Z1(vi),Z4=VG.right,bH=VG.left,e7e=Z1(J5).center,g2=Z4;function MH(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i))}if(n>1)return o/(n-1)}function $g(e,t){let n=MH(e,t);return n&&Math.sqrt(n)}var dn=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){let n=this._partials,r=0;for(let i=0;i<this._n&&i<32;i++){let o=n[i],a=t+o,s=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);s&&(n[r++]=s),t=a}return n[r]=t,this._n=r+1,this}valueOf(){let t=this._partials,n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}};var P6=class extends Map{constructor(t,n=kG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let[r,i]of t)this.set(r,i)}get(t){return super.get(wH(this,t))}has(t){return super.has(wH(this,t))}set(t,n){return super.set(NG(this,t),n)}delete(t){return super.delete(_G(this,t))}},$s=class extends Set{constructor(t,n=kG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let r of t)this.add(r)}has(t){return super.has(wH(this,t))}add(t){return super.add(NG(this,t))}delete(t){return super.delete(_G(this,t))}};function wH({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function NG({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function _G({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function kG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Bg(e,t){return Array.from(t,n=>e[n])}function TG(e=vi){if(e===vi)return SH;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{let r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function SH(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var t7e=Math.sqrt(50),n7e=Math.sqrt(10),r7e=Math.sqrt(2);function Ug(e,t,n){let r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=t7e?10:o>=n7e?5:o>=r7e?2:1,s,c,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(e*l),c=Math.round(t*l),s/l<e&&++s,c/l>t&&--c,l=-l):(l=Math.pow(10,i)*a,s=Math.round(e/l),c=Math.round(t/l),s*l<e&&++s,c*l>t&&--c),c<s&&.5<=n&&n<2?Ug(e,t,n*2):[s,c,l]}function J4(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];let r=t<e,[i,o,a]=r?Ug(t,e,n):Ug(e,t,n);if(!(o>=i))return[];let s=o-i+1,c=new Array(s);if(r)if(a<0)for(let l=0;l<s;++l)c[l]=(o-l)/-a;else for(let l=0;l<s;++l)c[l]=(o-l)*a;else if(a<0)for(let l=0;l<s;++l)c[l]=(i+l)/-a;else for(let l=0;l<s;++l)c[l]=(i+l)*a;return c}function ed(e,t,n){return t=+t,e=+e,n=+n,Ug(e,t,n)[2]}function qi(e,t,n){t=+t,e=+e,n=+n;let r=t<e,i=r?ed(t,e,n):ed(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Ho(e,t){let n;if(t===void 0)for(let r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function el(e,t){let n;if(t===void 0)for(let r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function jg(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?SH:TG(i);r>n;){if(r-n>600){let c=r-n+1,l=t-n+1,u=Math.log(c),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(c-f)/c)*(l-c/2<0?-1:1),p=Math.max(n,Math.floor(t-l*f/c+d)),h=Math.min(r,Math.floor(t+(c-l)*f/c+d));jg(e,t,p,h,i)}let o=e[t],a=n,s=r;for(td(e,n,t),i(e[r],o)>0&&td(e,n,r);a<s;){for(td(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}i(e[n],o)===0?td(e,n,s):(++s,td(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function td(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function tl(e,t,n){if(e=Float64Array.from(AG(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return el(e);if(t>=1)return Ho(e);var r,i=(r-1)*t,o=Math.floor(i),a=Ho(jg(e,o).subarray(0,o+1)),s=el(e.subarray(o+1));return a+(s-a)*(i-o)}}function nd(e,t,n=J5){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(i-o)}}function Gg(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function $6(e,t){return tl(e,.5,t)}function*o7e(e){for(let t of e)yield*hR(t)}function B6(e){return Array.from(o7e(e))}function On(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function U6(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function qg(e,...t){e=new $s(e),t=t.map(a7e);e:for(let n of e)for(let r of t)if(!r.has(n)){e.delete(n);continue e}return e}function a7e(e){return e instanceof $s?e:new $s(e)}function Wg(...e){let t=new $s;for(let n of e)for(let r of n)t.add(r);return t}function IG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function nl(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function La(e){return e=nl(Math.abs(e)),e?e[1]:NaN}function FG(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function RG(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var s7e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function J1(e){if(!(t=s7e.exec(e)))throw new Error("invalid format: "+e);var t;return new Yg({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}J1.prototype=Yg.prototype;function Yg(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Yg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function OG(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var EH;function PG(e,t){var n=nl(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(EH=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+nl(e,Math.max(0,t+o-1))[0]}function DH(e,t){var n=nl(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var zH={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:IG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>DH(e*100,t),r:DH,s:PG,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function HH(e){return e}var $G=Array.prototype.map,BG=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function rd(e){var t=e.grouping===void 0||e.thousands===void 0?HH:FG($G.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?HH:RG($G.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(f){f=J1(f);var d=f.fill,p=f.align,h=f.sign,m=f.symbol,g=f.zero,v=f.width,y=f.comma,C=f.precision,b=f.trim,M=f.type;M==="n"?(y=!0,M="g"):zH[M]||(C===void 0&&(C=12),b=!0,M="g"),(g||d==="0"&&p==="=")&&(g=!0,d="0",p="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",w=m==="$"?r:/[%p]/.test(M)?a:"",E=zH[M],D=/[defgprs%]/.test(M);C=C===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function z(L){var G=S,A=w,_,V,I;if(M==="c")A=E(L)+A,L="";else{L=+L;var W=L<0||1/L<0;if(L=isNaN(L)?c:E(Math.abs(L),C),b&&(L=OG(L)),W&&+L==0&&h!=="+"&&(W=!1),G=(W?h==="("?h:s:h==="-"||h==="("?"":h)+G,A=(M==="s"?BG[8+EH/3]:"")+A+(W&&h==="("?")":""),D){for(_=-1,V=L.length;++_<V;)if(I=L.charCodeAt(_),48>I||I>57){A=(I===46?i+L.slice(_+1):L.slice(_))+A,L=L.slice(0,_);break}}}y&&!g&&(L=t(L,1/0));var X=G.length+L.length+A.length,J=X<v?new Array(v-X+1).join(d):"";switch(y&&g&&(L=t(J+L,J.length?v-A.length:1/0),J=""),p){case"<":L=G+L+A+J;break;case"=":L=G+J+L+A;break;case"^":L=J.slice(0,X=J.length>>1)+G+L+A+J.slice(X);break;default:L=J+G+L+A;break}return o(L)}return z.toString=function(){return f+""},z}function u(f,d){var p=l((f=J1(f),f.type="f",f)),h=Math.max(-8,Math.min(8,Math.floor(La(d)/3)))*3,m=Math.pow(10,-h),g=BG[8+h/3];return function(v){return p(m*v)+g}}return{format:l,formatPrefix:u}}var Xg,c3,j6;LH({thousands:",",grouping:[3],currency:["$",""]});function LH(e){return Xg=rd(e),c3=Xg.format,j6=Xg.formatPrefix,Xg}function id(e){return Math.max(0,-La(Math.abs(e)))}function od(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(La(t)/3)))*3-La(Math.abs(e)))}function ad(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,La(t)-La(e))+1}var AH=new Date,VH=new Date;function Xt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{let a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{let c=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return c;let l;do c.push(l=new Date(+o)),t(o,s),e(o);while(l<o&&o<a);return c},i.filter=o=>Xt(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(AH.setTime(+o),VH.setTime(+a),e(AH),e(VH),Math.floor(n(AH,VH))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}var v2=Xt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);v2.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Xt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):v2);var UG=v2.range;var yi=Xt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*1e3)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds()),jG=yi.range;var l3=Xt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getMinutes()),c7e=l3.range,u3=Xt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes()),l7e=u3.range;var f3=Xt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3-e.getMinutes()*6e4)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getHours()),u7e=f3.range,d3=Xt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours()),f7e=d3.range;var D1=Xt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1),d7e=D1.range,Lo=Xt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1),p7e=Lo.range,Qg=Xt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5)),h7e=Qg.range;function ol(e){return Xt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/6048e5)}var Ao=ol(0),G6=ol(1),qG=ol(2),WG=ol(3),p3=ol(4),YG=ol(5),XG=ol(6),QG=Ao.range,m7e=G6.range,g7e=qG.range,v7e=WG.range,y7e=p3.range,x7e=YG.range,C7e=XG.range;function al(e){return Xt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/6048e5)}var Vo=al(0),q6=al(1),KG=al(2),ZG=al(3),h3=al(4),JG=al(5),eq=al(6),tq=Vo.range,b7e=q6.range,M7e=KG.range,w7e=ZG.range,S7e=h3.range,E7e=JG.range,D7e=eq.range;var Bs=Xt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),z7e=Bs.range,Us=Xt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),H7e=Us.range;var Wi=Xt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Wi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Xt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});var L7e=Wi.range,Yi=Xt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Yi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Xt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});var A7e=Yi.range;function rq(e,t,n,r,i,o){let a=[[yi,1,1e3],[yi,5,5*1e3],[yi,15,15*1e3],[yi,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[r,1,864e5],[r,2,2*864e5],[n,1,6048e5],[t,1,2592e6],[t,3,3*2592e6],[e,1,31536e6]];function s(l,u,f){let d=u<l;d&&([l,u]=[u,l]);let p=f&&typeof f.range=="function"?f:c(l,u,f),h=p?p.range(l,+u+1):[];return d?h.reverse():h}function c(l,u,f){let d=Math.abs(u-l)/f,p=Z1(([,,g])=>g).right(a,d);if(p===a.length)return e.every(qi(l/31536e6,u/31536e6,f));if(p===0)return v2.every(Math.max(qi(l,u,f),1));let[h,m]=a[d/a[p-1][2]<a[p][2]/d?p-1:p];return h.every(m)}return[s,c]}var[NH,_H]=rq(Yi,Us,Vo,Qg,d3,u3),[kH,TH]=rq(Wi,Bs,Ao,D1,f3,l3);var br="year",Xi="quarter",Wr="month",qn="week",Qi="date",qr="day",Va="dayofyear",z1="hours",H1="minutes",eo="seconds",No="milliseconds",Kg=[br,Xi,Wr,qn,Qi,qr,Va,z1,H1,eo,No],IH=Kg.reduce((e,t,n)=>(e[t]=1+n,e),{});function Zg(e){let t=te(e).slice(),n={};return t.length||B("Missing time unit."),t.forEach(i=>{he(IH,i)?n[i]=1:B(`Invalid time unit: ${i}.`)}),(n[qn]||n[qr]?1:0)+(n[Xi]||n[Wr]||n[Qi]?1:0)+(n[Va]?1:0)>1&&B(`Incompatible time units: ${e}`),t.sort((i,o)=>IH[i]-IH[o]),t}var N7e={[br]:"%Y ",[Xi]:"Q%q ",[Wr]:"%b ",[Qi]:"%d ",[qn]:"W%U ",[qr]:"%a ",[Va]:"%j ",[z1]:"%H:00",[H1]:"00:%M",[eo]:":%S",[No]:".%L",[`${br}-${Wr}`]:"%Y-%m ",[`${br}-${Wr}-${Qi}`]:"%Y-%m-%d ",[`${z1}-${H1}`]:"%H:%M"};function BH(e,t){let n=Te({},N7e,t),r=Zg(e),i=r.length,o="",a=0,s,c;for(a=0;a<i;)for(s=r.length;s>a;--s)if(c=r.slice(a,s).join("-"),n[c]!=null){o+=n[c],a=s;break}return o.trim()}var sl=new Date;function UH(e){return sl.setFullYear(e),sl.setMonth(0),sl.setDate(1),sl.setHours(0,0,0,0),sl}function jH(e){return aq(new Date(e))}function GH(e){return FH(new Date(e))}function aq(e){return D1.count(UH(e.getFullYear())-1,e)}function FH(e){return Ao.count(UH(e.getFullYear())-1,e)}function RH(e){return UH(e).getDay()}function _7e(e,t,n,r,i,o,a){if(0<=e&&e<100){let s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function qH(e){return sq(new Date(e))}function WH(e){return OH(new Date(e))}function sq(e){let t=Date.UTC(e.getUTCFullYear(),0,1);return Lo.count(t-1,e)}function OH(e){let t=Date.UTC(e.getUTCFullYear(),0,1);return Vo.count(t-1,e)}function PH(e){return sl.setTime(Date.UTC(e,0,1)),sl.getUTCDay()}function k7e(e,t,n,r,i,o,a){if(0<=e&&e<100){let s=new Date(Date.UTC(-1,t,n,r,i,o,a));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(e,t,n,r,i,o,a))}function cq(e,t,n,r,i){let o=t||1,a=Ye(e),s=(v,y,C)=>(C=C||v,T7e(n[C],r[C],v===a&&o,y)),c=new Date,l=cr(e),u=l[br]?s(br):fn(2012),f=l[Wr]?s(Wr):l[Xi]?s(Xi):h2,d=l[qn]&&l[qr]?s(qr,1,qn+qr):l[qn]?s(qn,1):l[qr]?s(qr,1):l[Qi]?s(Qi,1):l[Va]?s(Va,1):za,p=l[z1]?s(z1):h2,h=l[H1]?s(H1):h2,m=l[eo]?s(eo):h2,g=l[No]?s(No):h2;return function(v){c.setTime(+v);let y=u(c);return i(y,f(c),d(c,y),p(c),h(c),m(c),g(c))}}function T7e(e,t,n,r){let i=n<=1?e:r?(o,a)=>r+n*Math.floor((e(o,a)-r)/n):(o,a)=>n*Math.floor(e(o,a)/n);return t?(o,a)=>t(i(o,a),a):i}function W6(e,t,n){return t+e*7-(n+6)%7}var I7e={[br]:e=>e.getFullYear(),[Xi]:e=>Math.floor(e.getMonth()/3),[Wr]:e=>e.getMonth(),[Qi]:e=>e.getDate(),[z1]:e=>e.getHours(),[H1]:e=>e.getMinutes(),[eo]:e=>e.getSeconds(),[No]:e=>e.getMilliseconds(),[Va]:e=>aq(e),[qn]:e=>FH(e),[qn+qr]:(e,t)=>W6(FH(e),e.getDay(),RH(t)),[qr]:(e,t)=>W6(1,e.getDay(),RH(t))},F7e={[Xi]:e=>3*e,[qn]:(e,t)=>W6(e,0,RH(t))};function YH(e,t){return cq(e,t||1,I7e,F7e,_7e)}var R7e={[br]:e=>e.getUTCFullYear(),[Xi]:e=>Math.floor(e.getUTCMonth()/3),[Wr]:e=>e.getUTCMonth(),[Qi]:e=>e.getUTCDate(),[z1]:e=>e.getUTCHours(),[H1]:e=>e.getUTCMinutes(),[eo]:e=>e.getUTCSeconds(),[No]:e=>e.getUTCMilliseconds(),[Va]:e=>sq(e),[qn]:e=>OH(e),[qr]:(e,t)=>W6(1,e.getUTCDay(),PH(t)),[qn+qr]:(e,t)=>W6(OH(e),e.getUTCDay(),PH(t))},O7e={[Xi]:e=>3*e,[qn]:(e,t)=>W6(e,0,PH(t))};function XH(e,t){return cq(e,t||1,R7e,O7e,k7e)}var P7e={[br]:Wi,[Xi]:Bs.every(3),[Wr]:Bs,[qn]:Ao,[Qi]:D1,[qr]:D1,[Va]:D1,[z1]:f3,[H1]:l3,[eo]:yi,[No]:v2},$7e={[br]:Yi,[Xi]:Us.every(3),[Wr]:Us,[qn]:Vo,[Qi]:Lo,[qr]:Lo,[Va]:Lo,[z1]:d3,[H1]:u3,[eo]:yi,[No]:v2};function js(e){return P7e[e]}function Gs(e){return $7e[e]}function lq(e,t,n){return e?e.offset(t,n):void 0}function QH(e,t,n){return lq(js(e),t,n)}function KH(e,t,n){return lq(Gs(e),t,n)}function uq(e,t,n,r){return e?e.range(t,n,r):void 0}function ZH(e,t,n,r){return uq(js(e),t,n,r)}function JH(e,t,n,r){return uq(Gs(e),t,n,r)}var ld=1e3,ud=ld*60,fd=ud*60,Jg=fd*24,B7e=Jg*7,iq=Jg*30,$H=Jg*365,fq=[br,Wr,Qi,z1,H1,eo,No],dd=fq.slice(0,-1),pd=dd.slice(0,-1),hd=pd.slice(0,-1),U7e=hd.slice(0,-1),j7e=[br,qn],oq=[br,Wr],dq=[br],cd=[[dd,1,ld],[dd,5,5*ld],[dd,15,15*ld],[dd,30,30*ld],[pd,1,ud],[pd,5,5*ud],[pd,15,15*ud],[pd,30,30*ud],[hd,1,fd],[hd,3,3*fd],[hd,6,6*fd],[hd,12,12*fd],[U7e,1,Jg],[j7e,1,B7e],[oq,1,iq],[oq,3,3*iq],[dq,1,$H]];function eL(e){let t=e.extent,n=e.maxbins||40,r=Math.abs(Os(t))/n,i=Z1(s=>s[2]).right(cd,r),o,a;return i===cd.length?(o=dq,a=qi(t[0]/$H,t[1]/$H,n)):i?(i=cd[r/cd[i-1][2]<cd[i][2]/r?i-1:i],o=i[0],a=i[1]):(o=fq,a=Math.max(qi(t[0],t[1],n),1)),{units:o,step:a}}function tL(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function nL(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function md(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Y6(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,c=e.shortMonths,l=gd(i),u=vd(i),f=gd(o),d=vd(o),p=gd(a),h=vd(a),m=gd(s),g=vd(s),v=gd(c),y=vd(c),C={a:W,A:X,b:J,B:Se,c:null,d:yq,e:yq,f:ppe,g:wpe,G:Epe,H:upe,I:fpe,j:dpe,L:wq,m:hpe,M:mpe,p:Ee,q:Je,Q:bq,s:Mq,S:gpe,u:vpe,U:ype,V:xpe,w:Cpe,W:bpe,x:null,X:null,y:Mpe,Y:Spe,Z:Dpe,"%":Cq},b={a:Dt,A:ut,b:Qt,B:ms,c:null,d:xq,e:xq,f:Ape,g:Ppe,G:Bpe,H:zpe,I:Hpe,j:Lpe,L:Eq,m:Vpe,M:Npe,p:A0,q:y4,Q:bq,s:Mq,S:_pe,u:kpe,U:Tpe,V:Ipe,w:Fpe,W:Rpe,x:null,X:null,y:Ope,Y:$pe,Z:Upe,"%":Cq},M={a:z,A:L,b:G,B:A,c:_,d:gq,e:gq,f:ape,g:mq,G:hq,H:vq,I:vq,j:npe,L:ope,m:tpe,M:rpe,p:D,q:epe,Q:cpe,s:lpe,S:ipe,u:X7e,U:Q7e,V:K7e,w:Y7e,W:Z7e,x:V,X:I,y:mq,Y:hq,Z:J7e,"%":spe};C.x=S(n,C),C.X=S(r,C),C.c=S(t,C),b.x=S(n,b),b.X=S(r,b),b.c=S(t,b);function S(ve,et){return function(ot){var oe=[],Rr=-1,At=0,ai=ve.length,si,oa,C8;for(ot instanceof Date||(ot=new Date(+ot));++Rr<ai;)ve.charCodeAt(Rr)===37&&(oe.push(ve.slice(At,Rr)),(oa=pq[si=ve.charAt(++Rr)])!=null?si=ve.charAt(++Rr):oa=si==="e"?" ":"0",(C8=et[si])&&(si=C8(ot,oa)),oe.push(si),At=Rr+1);return oe.push(ve.slice(At,Rr)),oe.join("")}}function w(ve,et){return function(ot){var oe=md(1900,void 0,1),Rr=E(oe,ve,ot+="",0),At,ai;if(Rr!=ot.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(et&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(At=nL(md(oe.y,0,1)),ai=At.getUTCDay(),At=ai>4||ai===0?q6.ceil(At):q6(At),At=Lo.offset(At,(oe.V-1)*7),oe.y=At.getUTCFullYear(),oe.m=At.getUTCMonth(),oe.d=At.getUTCDate()+(oe.w+6)%7):(At=tL(md(oe.y,0,1)),ai=At.getDay(),At=ai>4||ai===0?G6.ceil(At):G6(At),At=D1.offset(At,(oe.V-1)*7),oe.y=At.getFullYear(),oe.m=At.getMonth(),oe.d=At.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),ai="Z"in oe?nL(md(oe.y,0,1)).getUTCDay():tL(md(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(ai+5)%7:oe.w+oe.U*7-(ai+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,nL(oe)):tL(oe)}}function E(ve,et,ot,oe){for(var Rr=0,At=et.length,ai=ot.length,si,oa;Rr<At;){if(oe>=ai)return-1;if(si=et.charCodeAt(Rr++),si===37){if(si=et.charAt(Rr++),oa=M[si in pq?et.charAt(Rr++):si],!oa||(oe=oa(ve,ot,oe))<0)return-1}else if(si!=ot.charCodeAt(oe++))return-1}return oe}function D(ve,et,ot){var oe=l.exec(et.slice(ot));return oe?(ve.p=u.get(oe[0].toLowerCase()),ot+oe[0].length):-1}function z(ve,et,ot){var oe=p.exec(et.slice(ot));return oe?(ve.w=h.get(oe[0].toLowerCase()),ot+oe[0].length):-1}function L(ve,et,ot){var oe=f.exec(et.slice(ot));return oe?(ve.w=d.get(oe[0].toLowerCase()),ot+oe[0].length):-1}function G(ve,et,ot){var oe=v.exec(et.slice(ot));return oe?(ve.m=y.get(oe[0].toLowerCase()),ot+oe[0].length):-1}function A(ve,et,ot){var oe=m.exec(et.slice(ot));return oe?(ve.m=g.get(oe[0].toLowerCase()),ot+oe[0].length):-1}function _(ve,et,ot){return E(ve,t,et,ot)}function V(ve,et,ot){return E(ve,n,et,ot)}function I(ve,et,ot){return E(ve,r,et,ot)}function W(ve){return a[ve.getDay()]}function X(ve){return o[ve.getDay()]}function J(ve){return c[ve.getMonth()]}function Se(ve){return s[ve.getMonth()]}function Ee(ve){return i[+(ve.getHours()>=12)]}function Je(ve){return 1+~~(ve.getMonth()/3)}function Dt(ve){return a[ve.getUTCDay()]}function ut(ve){return o[ve.getUTCDay()]}function Qt(ve){return c[ve.getUTCMonth()]}function ms(ve){return s[ve.getUTCMonth()]}function A0(ve){return i[+(ve.getUTCHours()>=12)]}function y4(ve){return 1+~~(ve.getUTCMonth()/3)}return{format:function(ve){var et=S(ve+="",C);return et.toString=function(){return ve},et},parse:function(ve){var et=w(ve+="",!1);return et.toString=function(){return ve},et},utcFormat:function(ve){var et=S(ve+="",b);return et.toString=function(){return ve},et},utcParse:function(ve){var et=w(ve+="",!0);return et.toString=function(){return ve},et}}}var pq={"-":"",_:" ",0:"0"},Mr=/^\s*\d+/,G7e=/^%/,q7e=/[\\^$*+?|[\]().{}]/g;function zt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function W7e(e){return e.replace(q7e,"\\$&")}function gd(e){return new RegExp("^(?:"+e.map(W7e).join("|")+")","i")}function vd(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Y7e(e,t,n){var r=Mr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function X7e(e,t,n){var r=Mr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Q7e(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function K7e(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Z7e(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function hq(e,t,n){var r=Mr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function mq(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function J7e(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function epe(e,t,n){var r=Mr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function tpe(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function gq(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function npe(e,t,n){var r=Mr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function vq(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function rpe(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ipe(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ope(e,t,n){var r=Mr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ape(e,t,n){var r=Mr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function spe(e,t,n){var r=G7e.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function cpe(e,t,n){var r=Mr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function lpe(e,t,n){var r=Mr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function yq(e,t){return zt(e.getDate(),t,2)}function upe(e,t){return zt(e.getHours(),t,2)}function fpe(e,t){return zt(e.getHours()%12||12,t,2)}function dpe(e,t){return zt(1+D1.count(Wi(e),e),t,3)}function wq(e,t){return zt(e.getMilliseconds(),t,3)}function ppe(e,t){return wq(e,t)+"000"}function hpe(e,t){return zt(e.getMonth()+1,t,2)}function mpe(e,t){return zt(e.getMinutes(),t,2)}function gpe(e,t){return zt(e.getSeconds(),t,2)}function vpe(e){var t=e.getDay();return t===0?7:t}function ype(e,t){return zt(Ao.count(Wi(e)-1,e),t,2)}function Sq(e){var t=e.getDay();return t>=4||t===0?p3(e):p3.ceil(e)}function xpe(e,t){return e=Sq(e),zt(p3.count(Wi(e),e)+(Wi(e).getDay()===4),t,2)}function Cpe(e){return e.getDay()}function bpe(e,t){return zt(G6.count(Wi(e)-1,e),t,2)}function Mpe(e,t){return zt(e.getFullYear()%100,t,2)}function wpe(e,t){return e=Sq(e),zt(e.getFullYear()%100,t,2)}function Spe(e,t){return zt(e.getFullYear()%1e4,t,4)}function Epe(e,t){var n=e.getDay();return e=n>=4||n===0?p3(e):p3.ceil(e),zt(e.getFullYear()%1e4,t,4)}function Dpe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+zt(t/60|0,"0",2)+zt(t%60,"0",2)}function xq(e,t){return zt(e.getUTCDate(),t,2)}function zpe(e,t){return zt(e.getUTCHours(),t,2)}function Hpe(e,t){return zt(e.getUTCHours()%12||12,t,2)}function Lpe(e,t){return zt(1+Lo.count(Yi(e),e),t,3)}function Eq(e,t){return zt(e.getUTCMilliseconds(),t,3)}function Ape(e,t){return Eq(e,t)+"000"}function Vpe(e,t){return zt(e.getUTCMonth()+1,t,2)}function Npe(e,t){return zt(e.getUTCMinutes(),t,2)}function _pe(e,t){return zt(e.getUTCSeconds(),t,2)}function kpe(e){var t=e.getUTCDay();return t===0?7:t}function Tpe(e,t){return zt(Vo.count(Yi(e)-1,e),t,2)}function Dq(e){var t=e.getUTCDay();return t>=4||t===0?h3(e):h3.ceil(e)}function Ipe(e,t){return e=Dq(e),zt(h3.count(Yi(e),e)+(Yi(e).getUTCDay()===4),t,2)}function Fpe(e){return e.getUTCDay()}function Rpe(e,t){return zt(q6.count(Yi(e)-1,e),t,2)}function Ope(e,t){return zt(e.getUTCFullYear()%100,t,2)}function Ppe(e,t){return e=Dq(e),zt(e.getUTCFullYear()%100,t,2)}function $pe(e,t){return zt(e.getUTCFullYear()%1e4,t,4)}function Bpe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?h3(e):h3.ceil(e),zt(e.getUTCFullYear()%1e4,t,4)}function Upe(){return"+0000"}function Cq(){return"%"}function bq(e){return+e}function Mq(e){return Math.floor(+e/1e3)}var X6,Q6,ev,K6,tv;rL({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function rL(e){return X6=Y6(e),Q6=X6.format,ev=X6.parse,K6=X6.utcFormat,tv=X6.utcParse,X6}function yd(e){let t={};return n=>t[n]||(t[n]=e(n))}function jpe(e,t){return n=>{let r=e(n),i=r.indexOf(t);if(i<0)return r;let o=Gpe(r,i),a=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+a}}function Gpe(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function Hq(e){let t=yd(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){let i=J1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return jpe(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,a){a=J1(a??",f");let s=qi(r,i,o),c=Math.max(Math.abs(r),Math.abs(i)),l;if(a.precision==null)switch(a.type){case"s":return isNaN(l=od(s,c))||(a.precision=l),n(a,c);case"":case"e":case"g":case"p":case"r":{isNaN(l=ad(s,c))||(a.precision=l-(a.type==="e"));break}case"f":case"%":{isNaN(l=id(s))||(a.precision=l-(a.type==="%")*2);break}}return t(a)}}}var iL;Lq();function Lq(){return iL=Hq({format:c3,formatPrefix:j6})}function Aq(e){return Hq(rd(e))}function xd(e){return arguments.length?iL=Aq(e):iL}function zq(e,t,n){n=n||{},ne(n)||B(`Invalid time multi-format specifier: ${n}`);let r=t(eo),i=t(H1),o=t(z1),a=t(Qi),s=t(qn),c=t(Wr),l=t(Xi),u=t(br),f=e(n[No]||".%L"),d=e(n[eo]||":%S"),p=e(n[H1]||"%I:%M"),h=e(n[z1]||"%I %p"),m=e(n[Qi]||n[qr]||"%a %d"),g=e(n[qn]||"%b %d"),v=e(n[Wr]||"%B"),y=e(n[Xi]||"%B"),C=e(n[br]||"%Y");return b=>(r(b)<b?f:i(b)<b?d:o(b)<b?p:a(b)<b?h:c(b)<b?s(b)<b?m:g:u(b)<b?l(b)<b?v:y:C)(b)}function Vq(e){let t=yd(e.format),n=yd(e.utcFormat);return{timeFormat:r=>Q(r)?t(r):zq(t,js,r),utcFormat:r=>Q(r)?n(r):zq(n,Gs,r),timeParse:yd(e.parse),utcParse:yd(e.utcParse)}}var oL;Nq();function Nq(){return oL=Vq({format:Q6,parse:ev,utcFormat:K6,utcParse:tv})}function _q(e){return Vq(Y6(e))}function cl(e){return arguments.length?oL=_q(e):oL}var aL=(e,t)=>Te({},e,t);function nv(e,t){let n=e?Aq(e):xd(),r=t?_q(t):cl();return aL(n,r)}function Cd(e,t){let n=arguments.length;return n&&n!==2&&B("defaultLocale expects either zero or two arguments."),n?aL(xd(e),cl(t)):aL(xd(),cl())}function kq(){return Lq(),Nq(),Cd()}var qpe=/^(data:|([A-Za-z]+:)?\/\/)/,Wpe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Ype=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Tq="file://";function Xpe(e,t){return n=>({options:n||{},sanitize:Kpe,load:Qpe,fileAccess:!!t,file:Zpe(t),http:ehe(e)})}function Qpe(e,t){return jt(this,null,function*(){let n=yield this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)})}function Kpe(e,t){return jt(this,null,function*(){t=Te({},this.options,t);let n=this.fileAccess,r={href:null},i,o,a,s=Wpe.test(e.replace(Ype,""));(e==null||typeof e!="string"||!s)&&B("Sanitize failure, invalid URI: "+Z(e));let c=qpe.test(e);return(a=t.baseURL)&&!c&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),o=(i=e.startsWith(Tq))||t.mode==="file"||t.mode!=="http"&&!c&&n,i?e=e.slice(Tq.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r})}function Zpe(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):Jpe}function Jpe(){return jt(this,null,function*(){B("No file system access.")})}function ehe(e){return e?function(t,n){return jt(this,null,function*(){let r=Te({},this.options.http,n),i=n&&n.response,o=yield e(t,r);return o.ok?Ie(o[i])?o[i]():o.text():B(o.status+""+o.statusText)})}:the}function the(){return jt(this,null,function*(){B("No HTTP fetch method available.")})}var nhe=e=>e!=null&&e===e,rhe=e=>e==="true"||e==="false"||e===!0||e===!1,ihe=e=>!Number.isNaN(Date.parse(e)),Fq=e=>!Number.isNaN(+e)&&!(e instanceof Date),ohe=e=>Fq(e)&&Number.isInteger(+e),sL={boolean:X5,integer:Rn,number:Rn,date:Q5,string:K5,unknown:zn},rv=[rhe,ohe,Fq,ihe],ahe=["boolean","integer","number","date"];function Rq(e,t){if(!e||!e.length)return"unknown";let n=e.length,r=rv.length,i=rv.map((o,a)=>a+1);for(let o=0,a=0,s,c;o<n;++o)for(c=t?e[o][t]:e[o],s=0;s<r;++s)if(i[s]&&nhe(c)&&!rv[s](c)&&(i[s]=0,++a,a===rv.length))return"string";return ahe[i.reduce((o,a)=>o===0?a:o,0)-1]}function Oq(e,t){return t.reduce((n,r)=>(n[r]=Rq(e,r),n),{})}function Iq(e){let t=function(n,r){let i={delimiter:e};return cL(n,r?Te(r,i):i)};return t.responseType="text",t}function cL(e,t){return t.header&&(e=t.header.map(Z).join(t.delimiter)+`
`+e),mH(t.delimiter).parse(e+"")}cL.responseType="text";function she(e){return typeof Buffer=="function"&&Ie(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function lL(e,t){let n=t&&t.property?Cr(t.property):zn;return ne(e)&&!she(e)?che(n(e),t):n(JSON.parse(e))}lL.responseType="json";function che(e,t){return!F(e)&&oH(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}var lhe={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function Pq(e,t){let n,r,i,o;return e=lL(e,t),t&&t.feature?(n=vH,i=t.feature):t&&t.mesh?(n=xH,i=t.mesh,o=lhe[t.filter]):B("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):B("Invalid TopoJSON object: "+i),r&&r.features||[r]}Pq.responseType="json";var iv={dsv:cL,csv:Iq(","),tsv:Iq("	"),json:lL,topojson:Pq};function uL(e,t){return arguments.length>1?(iv[e]=t,this):he(iv,e)?iv[e]:null}function fL(e){let t=uL(e);return t&&t.responseType||"text"}function dL(e,t,n,r){t=t||{};let i=uL(t.type||"json");return i||B("Unknown data format type: "+t.type),e=i(e,t),t.parse&&uhe(e,t.parse,n,r),he(e,"columns")&&delete e.columns,e}function uhe(e,t,n,r){if(!e.length)return;let i=cl();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),a,s,c,l,u,f;t==="auto"&&(t=Oq(e,o)),o=Object.keys(t);let d=o.map(p=>{let h=t[p],m,g;if(h&&(h.startsWith("date:")||h.startsWith("utc:")))return m=h.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!sL[h])throw Error("Illegal format pattern: "+p+":"+h);return sL[h]});for(c=0,u=e.length,f=o.length;c<u;++c)for(a=e[c],l=0;l<f;++l)s=o[l],a[s]=d[l](a[s])}var Z6=Xpe(typeof fetch<"u"&&fetch,null);function cv(e){let t=e||zn,n=[],r={};return n.add=i=>{let o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{let o=t(i);if(r[o]){r[o]=0;let a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}function wd(e,t){return jt(this,null,function*(){try{yield t(e)}catch(n){e.error(n)}})}var Wq=Symbol("vega_id"),fhe=1;function ll(e){return!!(e&&De(e))}function De(e){return e[Wq]}function Yq(e,t){return e[Wq]=t,e}function lt(e){let t=e===Object(e)?e:{data:e};return De(t)?t:Yq(t,fhe++)}function lv(e){return ul(e,lt({}))}function ul(e,t){for(let n in e)t[n]=e[n];return t}function uv(e,t){return Yq(t,De(e))}function _a(e,t){return e?t?(n,r)=>e(n,r)||De(t(n))-De(t(r)):(n,r)=>e(n,r)||De(n)-De(r):null}function hL(e){return e&&e.constructor===Xs}function Xs(){let e=[],t=[],n=[],r=[],i=[],o=null,a=!1;return{constructor:Xs,insert(s){let c=te(s),l=c.length;for(let u=0;u<l;++u)e.push(c[u]);return this},remove(s){let c=Ie(s)?r:t,l=te(s),u=l.length;for(let f=0;f<u;++f)c.push(l[f]);return this},modify(s,c,l){let u={field:c,value:fn(l)};return Ie(s)?(u.filter=s,i.push(u)):(u.tuple=s,n.push(u)),this},encode(s,c){return Ie(s)?i.push({filter:s,field:c}):n.push({tuple:s,field:c}),this},clean(s){return o=s,this},reflow(){return a=!0,this},pulse(s,c){let l={},u={},f,d,p,h,m,g;for(f=0,d=c.length;f<d;++f)l[De(c[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[De(m)]=-1;for(f=0,d=r.length;f<d;++f)h=r[f],c.forEach(y=>{h(y)&&(l[De(y)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=De(m),l[g]?l[g]=1:s.add.push(lt(e[f]));for(f=0,d=c.length;f<d;++f)m=c[f],l[De(m)]<0&&s.rem.push(m);function v(y,C,b){b?y[C]=b(y):s.encode=C,a||(u[De(y)]=y)}for(f=0,d=n.length;f<d;++f)p=n[f],m=p.tuple,h=p.field,g=l[De(m)],g>0&&(v(m,h,p.value),s.modifies(h));for(f=0,d=i.length;f<d;++f)p=i[f],h=p.filter,c.forEach(y=>{h(y)&&l[De(y)]>0&&v(y,p.field,p.value)}),s.modifies(p.field);if(a)s.mod=t.length||r.length?c.filter(y=>l[De(y)]>0):c.slice();else for(g in u)s.mod.push(u[g]);return(o||o==null&&(t.length||r.length))&&s.clean(!0),s}}}var av="_:mod:_";function Sd(){Object.defineProperty(this,av,{writable:!0,value:{}})}Sd.prototype={set(e,t,n,r){let i=this,o=i[e],a=i[av];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=F(n)?1+n.length:-1),i},modified(e,t){let n=this[av];if(arguments.length){if(F(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(let r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[av]={},this}};var dhe=0,phe="pulse",hhe=new Sd,mhe=1,ghe=2;function Tt(e,t,n,r){this.id=++dhe,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function $q(e){return function(t){let n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Tt.prototype={targets(){return this._targets||(this._targets=cv(R6))},set(e){return this.value!==e?(this.value=e,1):0},skip:$q(mhe),modified:$q(ghe),parameters(e,t,n){t=t!==!1;let r=this._argval=this._argval||new Sd,i=this._argops=this._argops||[],o=[],a,s,c,l,u=(f,d,p)=>{p instanceof Tt?(p!==this&&(t&&p.targets().add(this),o.push(p)),i.push({op:p,name:f,index:d})):r.set(f,d,p)};for(a in e)if(s=e[a],a===phe)te(s).forEach(f=>{f instanceof Tt?f!==this&&(f.targets().add(this),o.push(f)):B("Pulse parameters must be operator instances.")}),this.source=s;else if(F(s))for(r.set(a,-1,Array(c=s.length)),l=0;l<c;++l)u(a,l,s[l]);else u(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){let t=this._argval||hhe,n=this._argops,r,i,o,a;if(n){let s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){let e=this._argops,t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){let t=this._update;if(t){let n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function vhe(e,t,n,r){let i=1,o;return e instanceof Tt?o=e:e&&e.prototype instanceof Tt?o=new e:Ie(e)?o=new Tt(null,e):(i=0,o=new Tt(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function yhe(e,t){let n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}var xhe=0;function eu(e,t,n){this.id=++xhe,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function m3(e,t,n){return new eu(e,t,n)}eu.prototype={_filter:sr,_apply:zn,targets(){return this._targets||(this._targets=cv(R6))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){let t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){let t=m3(e);return this.targets().add(t),t},apply(e){let t=m3(null,e);return this.targets().add(t),t},merge(){let e=m3();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{let n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){let t=m3();return this.targets().add(m3(null,null,W5(e,n=>{let r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(m3(null,null,()=>n=!0)),t.targets().add(m3(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=sr,this._targets=null}};function Che(e,t,n,r){let i=this,o=m3(n,r),a=function(l){l.dataflow=i;try{o.receive(l)}catch(u){i.error(u)}finally{i.run()}},s;typeof e=="string"&&typeof document<"u"?s=document.querySelectorAll(e):s=te(e);let c=s.length;for(let l=0;l<c;++l)s[l].addEventListener(t,a);return o}function bhe(e,t){let n=this.locale();return dL(e,t,n.timeParse,n.utcParse)}function Mhe(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}function whe(e,t){return jt(this,null,function*(){let n=this,r=0,i;try{i=yield n.loader().load(e,{context:"dataflow",response:fL(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}})}function She(e,t,n){return jt(this,null,function*(){let r=this,i=r._pending||Ehe(r);i.requests+=1;let o=yield r.request(t,n);return r.pulse(e,r.changeset().remove(sr).insert(o.data||[])),i.done(),o})}function Ehe(e){let t,n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}var Dhe={skip:!0};function zhe(e,t,n,r,i){return(e instanceof Tt?Lhe:Hhe)(this,e,t,n,r,i),this}function Hhe(e,t,n,r,i,o){let a=Te({},o,Dhe),s,c;Ie(n)||(n=fn(n)),r===void 0?s=l=>e.touch(n(l)):Ie(r)?(c=new Tt(null,r,i,!1),s=l=>{c.evaluate(l);let u=n(l),f=c.value;hL(f)?e.pulse(u,f,o):e.update(u,f,a)}):s=l=>e.update(n(l),r,a),t.apply(s)}function Lhe(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{let a=o||{},s=new Tt(null,Ahe(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}function Ahe(e,t){return t=Ie(t)?t:fn(t),e?function(n,r){let i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function Vhe(e){e.rank=++this._rank}function Nhe(e){let t=[e],n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&B("Cycle detected in dataflow graph.")}var sv={},Na=1,g3=2,qs=4,_he=Na|g3,Bq=Na|qs,J6=Na|g3|qs,Uq=8,bd=16,jq=32,Gq=64;function Ws(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function pL(e,t){let n=[];return Ps(e,t,r=>n.push(r)),n}function qq(e,t){let n={};return e.visit(t,r=>{n[De(r)]=1}),r=>n[De(r)]?null:r}function ov(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Ws.prototype={StopPropagation:sv,ADD:Na,REM:g3,MOD:qs,ADD_REM:_he,ADD_MOD:Bq,ALL:J6,REFLOW:Uq,SOURCE:bd,NO_SOURCE:jq,NO_FIELDS:Gq,fork(e){return new Ws(this.dataflow).init(this,e)},clone(){let e=this.fork(J6);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(J6|bd)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Ws(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){let n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Gq)&&(n.fields=e.fields),t&Na?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&g3?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&qs?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&jq?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){let t=e||J6;return t&Na&&this.add.length||t&g3&&this.rem.length||t&qs&&this.mod.length},reflow(e){if(e)return this.fork(J6).reflow();let t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(qs,qq(this,Na))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){let t=this.fields||(this.fields={});return F(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){let n=this.fields;return(t||this.mod.length)&&n?arguments.length?F(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){let n=this;return e&Na&&(n.addF=ov(n.addF,t)),e&g3&&(n.remF=ov(n.remF,t)),e&qs&&(n.modF=ov(n.modF,t)),e&bd&&(n.srcF=ov(n.srcF,t)),n},materialize(e){e=e||J6;let t=this;return e&Na&&t.addF&&(t.add=pL(t.add,t.addF),t.addF=null),e&g3&&t.remF&&(t.rem=pL(t.rem,t.remF),t.remF=null),e&qs&&t.modF&&(t.mod=pL(t.mod,t.modF),t.modF=null),e&bd&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){let n=this,r=t;if(e&bd)return Ps(n.source,n.srcF,r),n;e&Na&&Ps(n.add,n.addF,r),e&g3&&Ps(n.rem,n.remF,r),e&qs&&Ps(n.mod,n.modF,r);let i=n.source;if(e&Uq&&i){let o=n.add.length+n.mod.length;o===i.length||(o?Ps(i,qq(n,Bq),r):Ps(i,n.srcF,r))}return n}};function fv(e,t,n,r){let i=this,o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(let a of n)if(a.stamp===t){if(a.fields){let s=i.fields||(i.fields={});for(let c in a.fields)s[c]=1}a.changed(i.ADD)&&(o|=i.ADD),a.changed(i.REM)&&(o|=i.REM),a.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}ee(fv,Ws,{fork(e){let t=new Ws(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){let t=this,n=t.fields;return n&&t.changes&t.MOD?F(e)?e.some(r=>n[r]):n[e]:0},filter(){B("MultiPulse does not support filtering.")},materialize(){B("MultiPulse does not support materialization.")},visit(e,t){let n=this,r=n.pulses,i=r.length,o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});function khe(e,t,n){return jt(this,null,function*(){let r=this,i=[];if(r._pulse)return Xq(r);if(r._pending&&(yield r._pending),t&&(yield wd(r,t)),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;let o=++r._clock;r._pulse=new Ws(r,o,e),r._touched.forEach(u=>r._enqueue(u,!0)),r._touched=cv(R6);let a=0,s,c,l;try{for(;r._heap.size()>0;){if(s=r._heap.pop(),s.rank!==s.qrank){r._enqueue(s,!0);continue}c=s.run(r._getPulse(s,e)),c.then?c=yield c:c.async&&(i.push(c.async),c=sv),c!==sv&&s._targets&&s._targets.forEach(u=>r._enqueue(u)),++a}}catch(u){r._heap.clear(),l=u}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${a} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){let u=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<u.length;++f)yield wd(r,u[f].callback)}return n&&(yield wd(r,n)),i.length&&Promise.all(i).then(u=>r.runAsync(null,()=>{u.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r})}function The(e,t,n){return jt(this,null,function*(){for(;this._running;)yield this._running;let r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running})}function Ihe(e,t,n){return this._pulse?Xq(this):(this.evaluate(e,t,n),this)}function Fhe(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function Xq(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Rhe(e,t){let n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Ohe(e,t){let n=e.source,r=this._clock;return n&&F(n)?new fv(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Phe(this._pulse,n&&n.pulse)}function Phe(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==sv&&(e.source=t.source),e)}var mL={skip:!1,force:!1};function $he(e,t){let n=t||mL;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Bhe(e,t,n){let r=n||mL;return(e.set(t)||r.force)&&this.touch(e,r),this}function Uhe(e,t,n){this.touch(e,n||mL);let r=new Ws(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function jhe(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),Qq(t,0,t.length-1,e)),pop:()=>{let n=t.pop(),r;return t.length?(r=t[0],t[0]=n,Ghe(t,0,e)):r=n,r}}}function Qq(e,t,n,r){let i,o,a=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(a,i)<0){e[n]=i,n=o;continue}break}return e[n]=a}function Ghe(e,t,n){let r=t,i=e.length,o=e[t],a=(t<<1)+1,s;for(;a<i;)s=a+1,s<i&&n(e[a],e[s])>=0&&(a=s),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=o,Qq(e,r,t,n)}function v3(){this.logger($5()),this.logLevel(P5),this._clock=0,this._rank=0,this._locale=Cd();try{this._loader=Z6()}catch{}this._touched=cv(R6),this._input={},this._pulse=null,this._heap=jhe((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Md(e){return function(){return this._log[e].apply(this,arguments)}}v3.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Md("error"),warn:Md("warn"),info:Md("info"),debug:Md("debug"),logLevel:Md("level"),cleanThreshold:1e4,add:vhe,connect:yhe,rank:Vhe,rerank:Nhe,pulse:Uhe,touch:$he,update:Bhe,changeset:Xs,ingest:Mhe,parse:bhe,preload:She,request:whe,events:Che,on:zhe,evaluate:khe,run:Ihe,runAsync:The,runAfter:Fhe,_enqueue:Rhe,_getPulse:Ohe};function $(e,t){Tt.call(this,e,null,t)}ee($,Tt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){let t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});var Ys={};function dv(e){let t=gL(e);return t&&t.Definition||null}function gL(e){return e=e&&e.toLowerCase(),he(Ys,e)?Ys[e]:null}var nA={};mr(nA,{aggregate:()=>y3,bin:()=>NL,collect:()=>_L,compare:()=>cW,countpattern:()=>kL,cross:()=>TL,density:()=>IL,dotbin:()=>RL,expression:()=>pW,extent:()=>OL,facet:()=>Nv,field:()=>hW,filter:()=>$L,flatten:()=>BL,fold:()=>UL,formula:()=>jL,generate:()=>mW,impute:()=>GL,joinaggregate:()=>qL,kde:()=>WL,key:()=>gW,load:()=>vW,lookup:()=>YL,multiextent:()=>yW,multivalues:()=>xW,params:()=>CW,pivot:()=>XL,prefacet:()=>bW,project:()=>QL,proxy:()=>MW,quantile:()=>KL,relay:()=>wW,sample:()=>ZL,sequence:()=>JL,sieve:()=>SW,subflow:()=>PL,timeunit:()=>eA,tupleindex:()=>DW,values:()=>zW,window:()=>tA});function*Jq(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function pv(e,t,n){let r=Float64Array.from(Jq(e,n));return r.sort(vi),t.map(i=>nd(r,i))}function hv(e,t){return pv(e,[.25,.5,.75],t)}function mv(e,t){let n=e.length,r=$g(e,t),i=hv(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function vL(e){let t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2],o=e.extent[0],a=e.extent[1],s,c,l,u,f,d,p=e.span||a-o||Math.abs(o)||1;if(e.step)s=e.step;else if(e.steps){for(u=p/t,f=0,d=e.steps.length;f<d&&e.steps[f]<u;++f);s=e.steps[Math.max(0,f-1)]}else{for(c=Math.ceil(Math.log(t)/r),l=e.minstep||0,s=Math.max(l,Math.pow(n,Math.round(Math.log(p)/r)-c));Math.ceil(p/s)>t;)s*=n;for(f=0,d=i.length;f<d;++f)u=s/i[f],u>=l&&p/u<=t&&(s=u)}u=Math.log(s);let h=u>=0?0:~~(-u/r)+1,m=Math.pow(n,-h-1);return(e.nice||e.nice===void 0)&&(u=Math.floor(o/s+m)*s,o=o<u?u-s:u,a=Math.ceil(a/s)*s),{start:o,stop:a===o?o+s:a,step:s}}var Ki=Math.random;function qhe(e){Ki=e}function yL(e,t,n,r){if(!e.length)return[void 0,void 0];let i=Float64Array.from(Jq(e,r)),o=i.length,a=t,s,c,l,u;for(l=0,u=Array(a);l<a;++l){for(s=0,c=0;c<o;++c)s+=i[~~(Ki()*o)];u[l]=s/o}return u.sort(vi),[tl(u,n/2),tl(u,1-n/2)]}function xL(e,t,n,r){r=r||(d=>d);let i=e.length,o=new Float64Array(i),a=0,s=1,c=r(e[0]),l=c,u=c+t,f;for(;s<i;++s){if(f=r(e[s]),f>=u){for(l=(c+l)/2;a<s;++a)o[a]=l;u=f+t,c=f}l=f}for(l=(c+l)/2;a<s;++a)o[a]=l;return n?Whe(o,t+t/4):o}function Whe(e,t){let n=e.length,r=0,i=1,o,a;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(a=i+(r+o-i-i>>1);a<i;)e[a++]=e[i];for(;a>i;)e[a--]=e[r]}r=i,i=o}return e}function Yhe(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Xhe(e,t){t==null&&(t=e,e=0);let n,r,i,o={min(a){return arguments.length?(n=a||0,i=r-n,o):n},max(a){return arguments.length?(r=a||0,i=r-n,o):r},sample(){return n+Math.floor(i*Ki())},pdf(a){return a===Math.floor(a)&&a>=n&&a<r?1/i:0},cdf(a){let s=Math.floor(a);return s<n?0:s>=r?1:(s-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return o.min(e).max(t)}var eW=Math.sqrt(2*Math.PI),Qhe=Math.SQRT2,Ed=NaN;function Dd(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(Ed===Ed)n=Ed,Ed=NaN;else{do n=Ki()*2-1,r=Ki()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,Ed=r*o}return e+n*t}function gv(e,t,n){n=n??1;let r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*eW)}function zd(e,t,n){t=t||0,n=n??1;let r=(e-t)/n,i=Math.abs(r),o;if(i>37)o=0;else{let a=Math.exp(-i*i/2),s;i<7.07106781186547?(s=.0352624965998911*i+.700383064443688,s=s*i+6.37396220353165,s=s*i+33.912866078383,s=s*i+112.079291497871,s=s*i+221.213596169931,s=s*i+220.206867912376,o=a*s,s=.0883883476483184*i+1.75566716318264,s=s*i+16.064177579207,s=s*i+86.7807322029461,s=s*i+296.564248779674,s=s*i+637.333633378831,s=s*i+793.826512519948,s=s*i+440.413735824752,o=o/s):(s=i+.65,s=i+4/s,s=i+3/s,s=i+2/s,s=i+1/s,o=a/s/2.506628274631)}return r>0?1-o:o}function Hd(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Qhe*Khe(2*e-1)}function Khe(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function vv(e,t){let n,r,i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>Dd(n,r),pdf:o=>gv(o,n,r),cdf:o=>zd(o,n,r),icdf:o=>Hd(o,n,r)};return i.mean(e).stdev(t)}function yv(e,t){let n=vv(),r=0,i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=mv(e)),i):t},sample(){return e[~~(Ki()*r)]+t*n.sample()},pdf(o){let a=0,s=0;for(;s<r;++s)a+=n.pdf((o-e[s])/t);return a/t/r},cdf(o){let a=0,s=0;for(;s<r;++s)a+=n.cdf((o-e[s])/t);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function xv(e,t){return e=e||0,t=t??1,Math.exp(e+Dd()*t)}function Cv(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;let r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*eW*e)}function bv(e,t,n){return zd(Math.log(e),t,n)}function Mv(e,t,n){return Math.exp(Hd(e,t,n))}function CL(e,t){let n,r,i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>xv(n,r),pdf:o=>Cv(o,n,r),cdf:o=>bv(o,n,r),icdf:o=>Mv(o,n,r)};return i.mean(e).stdev(t)}function bL(e,t){let n=0,r;function i(a){let s=[],c=0,l;for(l=0;l<n;++l)c+=s[l]=a[l]==null?1:+a[l];for(l=0;l<n;++l)s[l]/=c;return s}let o={weights(a){return arguments.length?(r=i(t=a||[]),o):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),o.weights(t)):e},sample(){let a=Ki(),s=e[n-1],c=r[0],l=0;for(;l<n-1;c+=r[++l])if(a<c){s=e[l];break}return s.sample()},pdf(a){let s=0,c=0;for(;c<n;++c)s+=r[c]*e[c].pdf(a);return s},cdf(a){let s=0,c=0;for(;c<n;++c)s+=r[c]*e[c].cdf(a);return s},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function wv(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Ki()}function Sv(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Ev(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Dv(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function ML(e,t){let n,r,i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>wv(n,r),pdf:o=>Sv(o,n,r),cdf:o=>Ev(o,n,r),icdf:o=>Dv(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function zv(e,t,n){let r=0,i=0;for(let o of e){let a=n(o);t(o)==null||a==null||isNaN(a)||(r+=(a-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Ld(e,t,n,r){let i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function Hv(e,t,n,r){e=e.filter(p=>{let h=t(p),m=n(p);return h!=null&&(h=+h)>=h&&m!=null&&(m=+m)>=m}),r&&e.sort((p,h)=>t(p)-t(h));let i=e.length,o=new Float64Array(i),a=new Float64Array(i),s=0,c=0,l=0,u,f,d;for(d of e)o[s]=u=+t(d),a[s]=f=+n(d),++s,c+=(u-c)/s,l+=(f-l)/s;for(s=0;s<i;++s)o[s]-=c,a[s]-=l;return[o,a,c,l]}function Ad(e,t,n,r){let i=-1,o,a;for(let s of e)o=t(s),a=n(s),o!=null&&(o=+o)>=o&&a!=null&&(a=+a)>=a&&r(o,a,++i)}function tu(e,t,n,r,i){let o=0,a=0;return Ad(e,t,n,(s,c)=>{let l=c-i(s),u=c-r;o+=l*l,a+=u*u}),1-o/a}function Lv(e,t,n){let r=0,i=0,o=0,a=0,s=0;Ad(e,t,n,(u,f)=>{++s,r+=(u-r)/s,i+=(f-i)/s,o+=(u*f-o)/s,a+=(u*u-a)/s});let c=Ld(r,i,o,a),l=u=>c[0]+c[1]*u;return{coef:c,predict:l,rSquared:tu(e,t,n,i,l)}}function wL(e,t,n){let r=0,i=0,o=0,a=0,s=0;Ad(e,t,n,(u,f)=>{++s,u=Math.log(u),r+=(u-r)/s,i+=(f-i)/s,o+=(u*f-o)/s,a+=(u*u-a)/s});let c=Ld(r,i,o,a),l=u=>c[0]+c[1]*Math.log(u);return{coef:c,predict:l,rSquared:tu(e,t,n,i,l)}}function SL(e,t,n){let[r,i,o,a]=Hv(e,t,n),s=0,c=0,l=0,u=0,f=0,d,p,h;Ad(e,t,n,(y,C)=>{d=r[f++],p=Math.log(C),h=d*C,s+=(C*p-s)/f,c+=(h-c)/f,l+=(h*p-l)/f,u+=(d*h-u)/f});let[m,g]=Ld(c/a,s/a,l/a,u/a),v=y=>Math.exp(m+g*(y-o));return{coef:[Math.exp(m-g*o),g],predict:v,rSquared:tu(e,t,n,a,v)}}function EL(e,t,n){let r=0,i=0,o=0,a=0,s=0,c=0;Ad(e,t,n,(f,d)=>{let p=Math.log(f),h=Math.log(d);++c,r+=(p-r)/c,i+=(h-i)/c,o+=(p*h-o)/c,a+=(p*p-a)/c,s+=(d-s)/c});let l=Ld(r,i,o,a),u=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:u,rSquared:tu(e,t,n,s,u)}}function Av(e,t,n){let[r,i,o,a]=Hv(e,t,n),s=r.length,c=0,l=0,u=0,f=0,d=0,p,h,m,g;for(p=0;p<s;)h=r[p],m=i[p++],g=h*h,c+=(g-c)/p,l+=(g*h-l)/p,u+=(g*g-u)/p,f+=(h*m-f)/p,d+=(g*m-d)/p;let v=u-c*c,y=c*v-l*l,C=(d*c-f*l)/y,b=(f*v-d*l)/y,M=-C*c,S=w=>(w=w-o,C*w*w+b*w+M+a);return{coef:[M-b*o+C*o*o+a,b-2*C*o,C],predict:S,rSquared:tu(e,t,n,a,S)}}function DL(e,t,n,r){if(r===0)return zv(e,t,n);if(r===1)return Lv(e,t,n);if(r===2)return Av(e,t,n);let[i,o,a,s]=Hv(e,t,n),c=i.length,l=[],u=[],f=r+1,d,p,h,m,g;for(d=0;d<f;++d){for(h=0,m=0;h<c;++h)m+=Math.pow(i[h],d)*o[h];for(l.push(m),g=new Float64Array(f),p=0;p<f;++p){for(h=0,m=0;h<c;++h)m+=Math.pow(i[h],d+p);g[p]=m}u.push(g)}u.push(l);let v=Jhe(u),y=C=>{C-=a;let b=s+v[0]+v[1]*C+v[2]*C*C;for(d=3;d<f;++d)b+=v[d]*Math.pow(C,d);return b};return{coef:Zhe(f,v,-a,s),predict:y,rSquared:tu(e,t,n,s,y)}}function Zhe(e,t,n,r){let i=Array(e),o,a,s,c;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],c=1,i[o]+=s,a=1;a<=o;++a)c*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*c;return i[0]+=r,i}function Jhe(e){let t=e.length-1,n=[],r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}var Kq=2,Zq=1e-12;function zL(e,t,n,r){let[i,o,a,s]=Hv(e,t,n,!0),c=i.length,l=Math.max(2,~~(r*c)),u=new Float64Array(c),f=new Float64Array(c),d=new Float64Array(c).fill(1);for(let p=-1;++p<=Kq;){let h=[0,l-1];for(let g=0;g<c;++g){let v=i[g],y=h[0],C=h[1],b=v-i[y]>i[C]-v?y:C,M=0,S=0,w=0,E=0,D=0,z=1/Math.abs(i[b]-v||1);for(let A=y;A<=C;++A){let _=i[A],V=o[A],I=eme(Math.abs(v-_)*z)*d[A],W=_*I;M+=I,S+=W,w+=V*I,E+=V*W,D+=_*W}let[L,G]=Ld(S/M,w/M,E/M,D/M);u[g]=L+G*v,f[g]=Math.abs(o[g]-u[g]),tme(i,g+1,h)}if(p===Kq)break;let m=$6(f);if(Math.abs(m)<Zq)break;for(let g=0,v,y;g<c;++g)v=f[g]/(6*m),d[g]=v>=1?Zq:(y=1-v*v)*y}return nme(i,u,a,s)}function eme(e){return(e=1-e*e*e)*e*e}function tme(e,t,n){let r=e[t],i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function nme(e,t,n,r){let i=e.length,o=[],a=0,s=0,c=[],l;for(;a<i;++a)l=e[a]+n,c[0]===l?c[1]+=(t[a]-c[1])/++s:(s=0,c[1]+=r,c=[l,t[a]],o.push(c));return c[1]+=r,o}var rme=.5*Math.PI/180;function nu(e,t,n,r){n=n||25,r=Math.max(n,r||200);let i=m=>[m,e(m)],o=t[0],a=t[1],s=a-o,c=s/r,l=[i(o)],u=[];if(n===r){for(let m=1;m<r;++m)l.push(i(o+m/n*s));return l.push(i(a)),l}else{u.push(i(a));for(let m=n;--m>0;)u.push(i(o+m/n*s))}let f=l[0],d=u[u.length-1],p=1/s,h=ime(f[1],u);for(;d;){let m=i((f[0]+d[0])/2);m[0]-f[0]>=c&&ome(f,m,d,p,h)>rme?u.push(m):(f=d,l.push(d),u.pop()),d=u[u.length-1]}return l}function ime(e,t){let n=e,r=e,i=t.length;for(let o=0;o<i;++o){let a=t[o][1];a<n&&(n=a),a>r&&(r=a)}return 1/(r-n)}function ome(e,t,n,r,i){let o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),a=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-a)}function ame(e){return t=>{let n=e.length,r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function AL(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:ame(e)}function rW(e,t,n){return n||e+(t?"_"+t:"")}var HL=()=>{},sme={init:HL,add:HL,rem:HL,idx:0},Vd={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},_d=Object.keys(Vd).filter(e=>e!=="__count__");function cme(e,t){return(n,r)=>Te({name:e,aggregate_param:r,out:n||e},sme,t)}[..._d,"__count__"].forEach(e=>{Vd[e]=cme(e,Vd[e])});function iW(e,t,n){return Vd[e](n,t)}function oW(e,t){return e.idx-t.idx}function lme(e){let t={};e.forEach(r=>t[r.name]=r);let n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=Vd[i]())})};return e.forEach(n),Object.values(t).sort(oW)}function ume(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function fme(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function dme(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function pme(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function aW(e,t){let n=t||zn,r=lme(e),i=e.slice().sort(oW);function o(a){this._ops=r,this._out=i,this.cell=a,this.init()}return o.prototype.init=ume,o.prototype.add=fme,o.prototype.rem=dme,o.prototype.set=pme,o.prototype.get=n,o.fields=e.map(a=>a.out),o}function VL(e){this._key=e?Cr(e):De,this.reset()}var Yr=VL.prototype;Yr.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Yr.add=function(e){this._add.push(e)};Yr.rem=function(e){this._rem.push(e)};Yr.values=function(){if(this._get=null,this._rem.length===0)return this._add;let e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={},s,c,l;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,c=0;s<r;++s)a[n(l=e[s])]?a[n(l)]=0:o[c++]=l;return this._rem=[],this._add=o};Yr.distinct=function(e){let t=this.values(),n={},r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",he(n,o)||(n[o]=1,++i);return i};Yr.extent=function(e){if(this._get!==e||!this._ext){let t=this.values(),n=rH(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Yr.argmin=function(e){return this.extent(e)[0]||{}};Yr.argmax=function(e){return this.extent(e)[1]||{}};Yr.min=function(e){let t=this.extent(e)[0];return t!=null?e(t):void 0};Yr.max=function(e){let t=this.extent(e)[1];return t!=null?e(t):void 0};Yr.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=hv(this.values(),e),this._get=e),this._q};Yr.q1=function(e){return this.quartile(e)[0]};Yr.q2=function(e){return this.quartile(e)[1]};Yr.q3=function(e){return this.quartile(e)[2]};Yr.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=yL(this.values(),1e3,.05,e),this._get=e),this._ci};Yr.ci0=function(e){return this.ci(e)[0]};Yr.ci1=function(e){return this.ci(e)[1]};function y3(e){$.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}y3.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:_d},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ee(y3,$,{transform(e,t){let n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){let e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(s){let c,l,u,f;for(c in s)for(u=s[c].tuple,l=0;l<i;++l)r[l][f=u[n[l]]]=f}o(e._prev),o(t);function a(s,c,l){let u=n[l],f=r[l++];for(let d in f){let p=s?s+"|"+d:d;c[u]=f[d],l<i?a(p,c,l):t[p]||e.cell(p,c)}}a("",{},0)},init(e){let t=this._inputs=[],n=this._outputs=[],r={};function i(y){let C=te(ar(y)),b=C.length,M=0,S;for(;M<b;++M)r[S=C[M]]||(r[S]=1,t.push(S))}this._dims=te(e.groupby),this._dnames=this._dims.map(y=>{let C=an(y);return i(y),n.push(C),C}),this.cellkey=e.key?e.key:AL(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];let o=e.fields||[null],a=e.ops||["count"],s=e.aggregate_params||[null],c=e.as||[],l=o.length,u={},f,d,p,h,m,g,v;for(l!==a.length&&B("Unmatched number of fields and aggregate ops."),v=0;v<l;++v){if(f=o[v],d=a[v],p=s[v]||null,f==null&&d!=="count"&&B("Null aggregate field specified."),m=an(f),g=rW(d,m,c[v]),n.push(g),d==="count"){this._counts.push(g);continue}h=u[m],h||(i(f),h=u[m]=[],h.field=f,this._measures.push(h)),d!=="count"&&(this._countOnly=!1),h.push(iW(d,p,g))}return this._measures=this._measures.map(y=>aW(y,y.field)),Object.create(null)},cellkey:AL(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){let n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){let r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new VL),n},newtuple(e,t){let n=this._dnames,r=this._dims,i=r.length,o={};for(let a=0;a<i;++a)o[n[a]]=r[a](e);return t?uv(t.tuple,o):lt(o)},clean(){let e=this.value;for(let t in e)e[t].num===0&&delete e[t]},add(e){let t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);let r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){let t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);let r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){let t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){let r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){let t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod,c,l,u,f;if(r)for(l in r)c=r[l],(!i||c.num)&&a.push(c.tuple);for(u=0,f=this._alen;u<f;++u)o.push(this.celltuple(t[u])),t[u]=null;for(u=0,f=this._mlen;u<f;++u)c=n[u],(c.num===0&&i?a:s).push(this.celltuple(c)),n[u]=null;return this._alen=this._mlen=0,this._prev=null,e}});var hme=1e-14;function NL(e){$.call(this,null,e)}NL.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ee(NL,$,{transform(e,t){let n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,a=e.as||["bin0","bin1"],s=a[0],c=a[1],l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(ar(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?u=>{let f=r(u);u[s]=f,u[c]=f==null?null:i+o*(1+(f-i)/o)}:u=>u[s]=r(u)),t.modifies(n?a:s)},_bins(e){if(this.value&&!e.modified())return this.value;let t=e.field,n=vL(e),r=n.step,i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,a,s;(a=e.anchor)!=null&&(s=a-(i+r*Math.floor((a-i)/r)),i+=s,o+=s);let c=function(l){let u=Rn(t(l));return u==null?null:u<i?-1/0:u>o?1/0:(u=Math.max(i,Math.min(u,o-r)),i+r*Math.floor(hme+(u-i)/r))};return c.start=i,c.stop=n.stop,c.step=r,this.value=gi(c,ar(t),e.name||"bin_"+an(t))}});function sW(e,t,n){let r=e,i=t||[],o=n||[],a={},s=0;return{add:c=>o.push(c),remove:c=>a[r(c)]=++s,size:()=>i.length,data:(c,l)=>(s&&(i=i.filter(u=>!a[r(u)]),a={},s=0),l&&c&&i.sort(c),o.length&&(i=c?lH(c,i,o.sort(c)):i.concat(o),o=[]),i)}}function _L(e){$.call(this,[],e)}_L.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ee(_L,$,{transform(e,t){let n=t.fork(t.ALL),r=sW(De,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(_a(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function cW(e){Tt.call(this,null,mme,e)}ee(cW,Tt);function mme(e){return this.value&&!e.modified()?this.value:G5(e.fields,e.orders)}function kL(e){$.call(this,null,e)}kL.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function gme(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ee(kL,$,{transform(e,t){let n=f=>d=>{for(var p=gme(s(d),e.case,o)||[],h,m=0,g=p.length;m<g;++m)a.test(h=p[m])||f(h)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,c=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),u=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,u)),this._finish(t,c)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){let n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS),s,c,l;for(s in n)c=r[s],l=n[s]||0,!c&&l?(r[s]=c=lt({}),c[i]=s,c[o]=l,a.add.push(c)):l===0?(c&&a.rem.push(c),n[s]=null,r[s]=null):c[o]!==l&&(c[o]=l,a.mod.push(c));return a.modifies(t)}});function TL(e){$.call(this,null,e)}TL.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ee(TL,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter"),s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=vme(s,i,o,e.filter||sr)):n.mod=s,n.source=this.value,n.modifies(r)}});function vme(e,t,n,r){for(var i=[],o={},a=e.length,s=0,c,l;s<a;++s)for(o[t]=l=e[s],c=0;c<a;++c)o[n]=e[c],r(o)&&(i.push(lt(o)),o={},o[t]=l);return i}var tW={kde:yv,mixture:bL,normal:vv,lognormal:CL,uniform:ML},yme="distributions",nW="function",xme="field";function lW(e,t){let n=e[nW];he(tW,n)||B("Unknown distribution function: "+n);let r=tW[n]();for(let i in e)i===xme?r.data((e.from||t()).map(e[i])):i===yme?r[i](e[i].map(o=>lW(o,t))):typeof r[i]===nW&&r[i](e[i]);return r}function IL(e){$.call(this,null,e)}var uW=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Cme={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:uW},{name:"weights",type:"number",array:!0}]};IL.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:uW.concat(Cme)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ee(IL,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=lW(e.distribution,bme(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200,a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&B("Invalid density method: "+a),!e.extent&&!r.data&&B("Missing density extent parameter."),a=r[a];let s=e.as||["value","density"],c=e.extent||Gi(r.data()),l=nu(a,c,i,o).map(u=>{let f={};return f[s[0]]=u[0],f[s[1]]=u[1],lt(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function bme(e){return()=>e.materialize(e.SOURCE).source}function fW(e,t){return e?e.map((n,r)=>t[r]||an(n)):null}function FL(e,t,n){let r=[],i=f=>f(c),o,a,s,c,l,u;if(t==null)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)c=e[a],l=t.map(i),u=o[l],u||(o[l]=u=[],u.dims=l,r.push(u)),u.push(n(c));return r}var dW="bin";function RL(e){$.call(this,null,e)}RL.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:dW}]};var Mme=(e,t)=>Os(Gi(e,t))/30;ee(RL,$,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;let n=t.materialize(t.SOURCE).source,r=FL(t.source,e.groupby,zn),i=e.smooth||!1,o=e.field,a=e.step||Mme(n,o),s=_a((h,m)=>o(h)-o(m)),c=e.as||dW,l=r.length,u=1/0,f=-1/0,d=0,p;for(;d<l;++d){let h=r[d].sort(s);p=-1;for(let m of xL(h,a,i,o))m<u&&(u=m),m>f&&(f=m),h[++p][c]=m}return this.value={start:u,stop:f,step:a},t.reflow(!0).modifies(c)}});function pW(e){Tt.call(this,null,wme,e),this.modified(!0)}ee(pW,Tt);function wme(e){let t=e.expr;return this.value&&!e.modified("expr")?this.value:gi(n=>t(n,e),ar(t),an(t))}function OL(e){$.call(this,[void 0,void 0],e)}OL.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ee(OL,$,{transform(e,t){let n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field"),o=n[0],a=n[1];if((i||o==null)&&(o=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,s=>{let c=Rn(r(s));c!=null&&(c<o&&(o=c),c>a&&(a=c))}),!Number.isFinite(o)||!Number.isFinite(a)){let s=an(r);s&&(s=` for field "${s}"`),t.dataflow.warn(`Infinite extent${s}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}});function PL(e,t){Tt.call(this,e),this.parent=t,this.count=0}ee(PL,Tt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Nv(e){$.call(this,{},e),this._keys=a3();let t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ee(Nv,$,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){let i=this.value,o=he(i,e)&&i[e],a,s;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(s=r||(s=this._group[e])&&s.tuple,a=n.dataflow,o=new PL(n.fork(n.NO_SOURCE),this),a.add(o).connect(t(a,e,s)),i[e]=o,this.activate(o)),o},clean(){let e=this.value,t=0;for(let n in e)if(e[n].count===0){let r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){let n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){let t=this._targets,n=t.length,r=e?e.length:0,i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){let n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,a=e.modified("key"),s=c=>this.subflow(c,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,c=>{let l=De(c),u=o.get(l);u!==void 0&&(o.delete(l),s(u).rem(c))}),t.visit(t.ADD,c=>{let l=r(c);o.set(De(c),l),s(l).add(c)}),a||t.modified(r.fields)?t.visit(t.MOD,c=>{let l=De(c),u=o.get(l),f=r(c);u===f?s(f).mod(c):(o.set(l,f),s(u).rem(c),s(f).add(c))}):t.changed(t.MOD)&&t.visit(t.MOD,c=>{s(o.get(De(c))).mod(c)}),a&&t.visit(t.REFLOW,c=>{let l=De(c),u=o.get(l),f=r(c);u!==f&&(o.set(l,f),s(u).rem(c),s(f).add(c))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function hW(e){Tt.call(this,null,Sme,e)}ee(hW,Tt);function Sme(e){return this.value&&!e.modified()?this.value:F(e.name)?te(e.name).map(t=>Cr(t)):Cr(e.name,e.as)}function $L(e){$.call(this,a3(),e)}$L.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ee($L,$,{transform(e,t){let n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,c=e.expr,l=!0;t.visit(t.REM,f=>{let d=De(f);r.has(d)?r.delete(d):a.push(f)}),t.visit(t.ADD,f=>{c(f,e)?o.push(f):r.set(De(f),1)});function u(f){let d=De(f),p=c(f,e),h=r.get(d);p&&h?(r.delete(d),o.push(f)):!p&&!h?(r.set(d,1),a.push(f)):l&&p&&!h&&s.push(f)}return t.visit(t.MOD,u),e.modified()&&(l=!1,t.visit(t.REFLOW,u)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function BL(e){$.call(this,[],e)}BL.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ee(BL,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=fW(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,s=>{let c=r.map(h=>h(s)),l=c.reduce((h,m)=>Math.max(h,m.length),0),u=0,f,d,p;for(;u<l;++u){for(d=lv(s),f=0;f<a;++f)d[i[f]]=(p=c[f][u])==null?null:p;o&&(d[o]=u),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function UL(e){$.call(this,[],e)}UL.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ee(UL,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(an),o=e.as||["key","value"],a=o[0],s=o[1],c=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let u=0,f;u<c;++u)f=lv(l),f[a]=i[u],f[s]=r[u](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function jL(e){$.call(this,null,e)}jL.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ee(jL,$,{transform(e,t){let n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,a=>a[r]=n(a,e))}});function mW(e){$.call(this,[],e)}ee(mW,$,{transform(e,t){let n=t.fork(t.ALL),r=e.generator,i=this.value,o=e.size-i.length,a,s,c;if(o>0){for(a=[];--o>=0;)a.push(c=lt(r(e))),i.push(c);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else s=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(s):s,i=i.slice(-o);return n.source=this.value=i,n}});var Vv={value:"value",median:$6,mean:Gg,min:el,max:Ho},Eme=[];function GL(e){$.call(this,[],e)}GL.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Dme(e){var t=e.method||Vv.value,n;if(Vv[t]==null)B("Unrecognized imputation method: "+t);else return t===Vv.value?(n=e.value!==void 0?e.value:0,()=>n):Vv[t]}function zme(e){let t=e.field;return n=>n?t(n):NaN}ee(GL,$,{transform(e,t){var n=t.fork(t.ALL),r=Dme(e),i=zme(e),o=an(e.field),a=an(e.key),s=(e.groupby||[]).map(an),c=Hme(t.source,e.groupby,e.key,e.keyvals),l=[],u=this.value,f=c.domain.length,d,p,h,m,g,v,y,C,b,M;for(g=0,C=c.length;g<C;++g)for(d=c[g],h=d.values,p=NaN,y=0;y<f;++y)if(d[y]==null){for(m=c.domain[y],M={_impute:!0},v=0,b=h.length;v<b;++v)M[s[v]]=h[v];M[a]=m,M[o]=Number.isNaN(p)?p=r(d,i):p,l.push(lt(M))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),u.length&&(n.rem=n.materialize(n.REM).rem.concat(u)),this.value=l,n}});function Hme(e,t,n,r){var i=v=>v(g),o=[],a=r?r.slice():[],s={},c={},l,u,f,d,p,h,m,g;for(a.forEach((v,y)=>s[v]=y+1),d=0,m=e.length;d<m;++d)g=e[d],h=n(g),p=s[h]||(s[h]=a.push(h)),u=(l=t?t.map(i):Eme)+"",(f=c[u])||(f=c[u]=[],o.push(f),f.values=l),f[p-1]=g;return o.domain=a,o}function qL(e){y3.call(this,e)}qL.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:_d},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ee(qL,y3,{transform(e,t){let n=this,r=e.modified(),i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{Te(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){let e=this._adds,t=this._mods,n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function WL(e){$.call(this,null,e)}WL.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ee(WL,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=FL(r,e.groupby,e.field),o=(e.groupby||[]).map(an),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",c=e.as||["value","density"],l=[],u=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;s!=="pdf"&&s!=="cdf"&&B("Invalid density method: "+s),e.resolve==="shared"&&(u||(u=Gi(r,e.field)),f=d=e.steps||d),i.forEach(p=>{let h=yv(p,a)[s],m=e.counts?p.length:1,g=u||Gi(p);nu(h,g,f,d).forEach(v=>{let y={};for(let C=0;C<o.length;++C)y[o[C]]=p.dims[C];y[c[0]]=v[0],y[c[1]]=v[1]*m,l.push(lt(y))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function gW(e){Tt.call(this,null,Lme,e)}ee(gW,Tt);function Lme(e){return this.value&&!e.modified()?this.value:Y5(e.fields,e.flat)}function vW(e){$.call(this,[],e),this._pending=null}ee(vW,$,{transform(e,t){let n=t.dataflow;return this._pending?LL(this,t,this._pending):Ame(e)?t.StopPropagation:e.values?LL(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=te(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>LL(this,t,te(r.data)))}});function Ame(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function LL(e,t,n){n.forEach(lt);let r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function YL(e){$.call(this,{},e)}YL.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ee(YL,$,{transform(e,t){let n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,a=e.modified(),s=n.length,c=a?t.SOURCE:t.ADD,l=t,u=e.as,f,d,p;return i?(d=i.length,s>1&&!u&&B('Multi-field lookup requires explicit "as" parameter.'),u&&u.length!==s*d&&B('The "as" parameter has too few output field names.'),u=u||i.map(an),f=function(h){for(var m=0,g=0,v,y;m<s;++m)if(y=r.get(n[m](h)),y==null)for(v=0;v<d;++v,++g)h[u[g]]=o;else for(v=0;v<d;++v,++g)h[u[g]]=i[v](y)}):(u||B("Missing output field names."),f=function(h){for(var m=0,g;m<s;++m)g=r.get(n[m](h)),h[u[m]]=g??o}),a?l=t.reflow(!0):(p=n.some(h=>t.modified(h.fields)),c|=p?t.MOD:0),t.visit(c,f),l.modifies(u)}});function yW(e){Tt.call(this,null,Vme,e)}ee(yW,Tt);function Vme(e){if(this.value&&!e.modified())return this.value;let t=e.extents,n=t.length,r=1/0,i=-1/0,o,a;for(o=0;o<n;++o)a=t[o],a[0]<r&&(r=a[0]),a[1]>i&&(i=a[1]);return[r,i]}function xW(e){Tt.call(this,null,Nme,e)}ee(xW,Tt);function Nme(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function CW(e){$.call(this,null,e)}ee(CW,$,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function XL(e){y3.call(this,e)}XL.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:_d,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ee(XL,y3,{_transform:y3.prototype.transform,transform(e,t){return this._transform(_me(e,t),t)}});function _me(e,t){let n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=ar(n).concat(ar(r)),a=Tme(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>i),fields:a.map(s=>kme(s,n,r,o)),as:a.map(s=>s+""),modified:e.modified.bind(e)}}function kme(e,t,n,r){return gi(i=>t(i)===e?n(i):NaN,r,e+"")}function Tme(e,t,n){let r={},i=[];return n.visit(n.SOURCE,o=>{let a=e(o);r[a]||(r[a]=1,i.push(a))}),i.sort(q5),t?i.slice(0,t):i}function bW(e){Nv.call(this,e)}ee(bW,Nv,{transform(e,t){let n=e.subflow,r=e.field,i=o=>this.subflow(De(o),n,t,o);return(e.modified("field")||r&&t.modified(ar(r)))&&B("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{let a=i(o);r(o).forEach(s=>a.mod(s))}),t.visit(t.ADD,o=>{let a=i(o);r(o).forEach(s=>a.add(lt(s)))}),t.visit(t.REM,o=>{let a=i(o);r(o).forEach(s=>a.rem(s))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function QL(e){$.call(this,null,e)}QL.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ee(QL,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.fields,i=fW(e.fields,e.as||[]),o=r?(s,c)=>Ime(s,c,r,i):ul,a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,s=>{let c=De(s);n.rem.push(a[c]),a[c]=null}),t.visit(t.ADD,s=>{let c=o(s,lt({}));a[De(s)]=c,n.add.push(c)}),t.visit(t.MOD,s=>{n.mod.push(o(s,a[De(s)]))}),n}});function Ime(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function MW(e){$.call(this,null,e)}ee(MW,$,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function KL(e){$.call(this,null,e)}KL.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};var Fme=1e-14;ee(KL,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;let i=t.materialize(t.SOURCE).source,o=FL(i,e.groupby,e.field),a=(e.groupby||[]).map(an),s=[],c=e.step||.01,l=e.probs||On(c/2,1-Fme,c),u=l.length;return o.forEach(f=>{let d=pv(f,l);for(let p=0;p<u;++p){let h={};for(let m=0;m<a.length;++m)h[a[m]]=f.dims[m];h[r[0]]=l[p],h[r[1]]=d[p],s.push(lt(h))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}});function wW(e){$.call(this,null,e)}ee(wW,$,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{let o=De(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{let o=lv(i);r[De(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{let o=r[De(i)];for(let a in i)o[a]=i[a],n.modifies(a);n.mod.push(o)})),n}});function ZL(e){$.call(this,[],e),this.count=0}ZL.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ee(ZL,$,{transform(e,t){let n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((u,f)=>(u[De(f)]=1,u),{}),a=this.value,s=this.count,c=0;function l(u){let f,d;a.length<i?a.push(u):(d=~~((s+1)*Ki()),d<a.length&&d>=c&&(f=a[d],o[De(f)]&&n.rem.push(f),a[d]=u)),++s}if(t.rem.length&&(t.visit(t.REM,u=>{let f=De(u);o[f]&&(o[f]=-1,n.rem.push(u)),--s}),a=a.filter(u=>o[De(u)]!==-1)),(t.rem.length||r)&&a.length<i&&t.source&&(c=s=a.length,t.visit(t.SOURCE,u=>{o[De(u)]||l(u)}),c=-1),r&&a.length>i){let u=a.length-i;for(let f=0;f<u;++f)o[De(a[f])]=-1,n.rem.push(a[f]);a=a.slice(u)}return t.mod.length&&t.visit(t.MOD,u=>{o[De(u)]&&n.mod.push(u)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||c<0)&&(n.add=a.filter(u=>!o[De(u)])),this.count=s,this.value=n.source=a,n}});function JL(e){$.call(this,null,e)}JL.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ee(JL,$,{transform(e,t){if(this.value&&!e.modified())return;let n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=On(e.start,e.stop,e.step||1).map(i=>{let o={};return o[r]=i,lt(o)}),n.add=t.add.concat(this.value),n}});function SW(e){$.call(this,null,e),this.modified(!0)}ee(SW,$,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function eA(e){$.call(this,null,e)}var EW=["unit0","unit1"];eA.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Kg,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:EW}]};ee(eA,$,{transform(e,t){let n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),a=(i?Gs:js)(o.unit).offset,s=e.as||EW,c=s[0],l=s[1],u=o.step,f=o.start||1/0,d=o.stop||-1/0,p=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ar(n)))&&(t=t.reflow(!0),p=t.SOURCE,f=1/0,d=-1/0),t.visit(p,h=>{let m=n(h),g,v;m==null?(h[c]=null,r&&(h[l]=null)):(h[c]=g=v=o(m),r&&(h[l]=v=a(g,u)),g<f&&(f=g),v>d&&(d=v))}),o.start=f,o.stop=d,t.modifies(r?s:c)},_floor(e,t){let n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:eL({extent:e.extent||Gi(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=Zg(r),a=this.value||{},s=(n?XH:YH)(o,i);return s.unit=Ye(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}});function DW(e){$.call(this,a3(),e)}ee(DW,$,{transform(e,t){let n=t.dataflow,r=e.field,i=this.value,o=s=>i.set(r(s),s),a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,s=>i.delete(r(s))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function zW(e){$.call(this,null,e)}ee(zW,$,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(_a(e.sort)):t.source).map(e.field))}});function Rme(e,t,n,r){let i=Nd[e](t,n);return{init:i.init||h2,update:function(o,a){a[r]=i.next(o)}}}var Nd={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{let n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{let n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){let e=Nd.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{let n=t.data,r=t.compare,i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||B("ntile num must be greater than zero.");let n=Nd.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{let r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{let r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||B("nth_value nth must be greater than zero."),{next:n=>{let r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{let r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{let i=r.data;return r.index<=n?t:(n=Ome(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Ome(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}var Pme=Object.keys(Nd);function HW(e){let t=te(e.ops),n=te(e.fields),r=te(e.params),i=te(e.aggregate_params),o=te(e.as),a=this.outputs=[],s=this.windows=[],c={},l={},u=[],f=[],d=!0;function p(h){te(ar(h)).forEach(m=>c[m]=1)}p(e.sort),t.forEach((h,m)=>{let g=n[m],v=r[m],y=i[m]||null,C=an(g),b=rW(h,C,o[m]);if(p(g),a.push(b),he(Nd,h))s.push(Rme(h,g,v,b));else{if(g==null&&h!=="count"&&B("Null aggregate field specified."),h==="count"){u.push(b);return}d=!1;let M=l[C];M||(M=l[C]=[],M.field=g,f.push(M)),M.push(iW(h,y,b))}}),(u.length||f.length)&&(this.cell=$me(f,u,d)),this.inputs=Object.keys(c)}var LW=HW.prototype;LW.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};LW.update=function(e,t){let n=this.cell,r=this.windows,i=e.data,o=r&&r.length,a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)};function $me(e,t,n){e=e.map(c=>aW(c,c.field));let r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new VL;return r.add=function(c){if(r.num+=1,!n){s&&s.add(c);for(let l=0;l<i;++l)o[l].add(o[l].get(c),c)}},r.rem=function(c){if(r.num-=1,!n){s&&s.rem(c);for(let l=0;l<i;++l)o[l].rem(o[l].get(c),c)}},r.set=function(c){let l,u;for(s&&s.values(),l=0,u=t.length;l<u;++l)c[t[l]]=r.num;if(!n)for(l=0,u=o.length;l<u;++l)o[l].set(c)},r.init=function(){r.num=0,s&&s.reset();for(let c=0;c<i;++c)o[c].init()},r}function tA(e){$.call(this,{},e),this._mlen=0,this._mods=[]}tA.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Pme.concat(_d)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ee(tA,$,{transform(e,t){this.stamp=t.stamp;let n=e.modified(),r=_a(e.sort),i=AL(e.groupby),o=s=>this.group(i(s)),a=this.state;(!a||n)&&(a=this.state=new HW(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,s=>o(s).add(s))):(t.visit(t.REM,s=>o(s).remove(s)),t.visit(t.ADD,s=>o(s).add(s)));for(let s=0,c=this._mlen;s<c;++s)Bme(this._mods[s],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=sW(De),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Bme(e,t,n,r){let i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),c=s.length,l=o?Z1(i):null,u={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||fn(-1)};t.init();for(let f=0;f<c;++f)Ume(u,a,f,c),o&&jme(u,l),t.update(u,s[f])}function Ume(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function jme(e,t){let n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}var uN={};mr(uN,{bound:()=>XQ,identifier:()=>lN,mark:()=>QQ,overlap:()=>KQ,render:()=>JQ,viewlayout:()=>tK});function xt(e){return function(){return e}}var rA=Math.abs,Xr=Math.atan2,x3=Math.cos,AW=Math.max,_v=Math.min,y2=Math.sin,Qs=Math.sqrt,wr=1e-12,C3=Math.PI,kd=C3/2,kv=2*C3;function VW(e){return e>1?0:e<-1?C3:Math.acos(e)}function iA(e){return e>=1?kd:e<=-1?-kd:Math.asin(e)}var oA=Math.PI,aA=2*oA,fl=1e-6,Gme=aA-fl;function NW(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function qme(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return NW;let n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}var dl=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?NW:qme(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,c=r-t,l=i-n,u=a-t,f=s-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>fl)if(!(Math.abs(f*c-l*u)>fl)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-a,h=i-s,m=c*c+l*l,g=p*p+h*h,v=Math.sqrt(m),y=Math.sqrt(d),C=o*Math.tan((oA-Math.acos((m+d-g)/(2*v*y)))/2),b=C/y,M=C/v;Math.abs(b-1)>fl&&this._append`L${t+b*u},${n+b*f}`,this._append`A${o},${o},0,0,${+(f*p>u*h)},${this._x1=t+M*c},${this._y1=n+M*l}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),c=r*Math.sin(i),l=t+s,u=n+c,f=1^a,d=a?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>fl||Math.abs(this._y1-u)>fl)&&this._append`L${l},${u}`,r&&(d<0&&(d=d%aA+aA),d>Gme?this._append`A${r},${r},0,1,${f},${t-s},${n-c}A${r},${r},0,1,${f},${this._x1=l},${this._y1=u}`:d>fl&&this._append`A${r},${r},0,${+(d>=oA)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function pl(){return new dl}pl.prototype=dl.prototype;function b3(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{let r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new dl(t)}function Wme(e){return e.innerRadius}function Yme(e){return e.outerRadius}function Xme(e){return e.startAngle}function Qme(e){return e.endAngle}function Kme(e){return e&&e.padAngle}function Zme(e,t,n,r,i,o,a,s){var c=n-e,l=r-t,u=a-i,f=s-o,d=f*c-u*l;if(!(d*d<wr))return d=(u*(t-o)-f*(e-i))/d,[e+d*c,t+d*l]}function Tv(e,t,n,r,i,o,a){var s=e-n,c=t-r,l=(a?o:-o)/Qs(s*s+c*c),u=l*c,f=-l*s,d=e+u,p=t+f,h=n+u,m=r+f,g=(d+h)/2,v=(p+m)/2,y=h-d,C=m-p,b=y*y+C*C,M=i-o,S=d*m-h*p,w=(C<0?-1:1)*Qs(AW(0,M*M*b-S*S)),E=(S*C-y*w)/b,D=(-S*y-C*w)/b,z=(S*C+y*w)/b,L=(-S*y+C*w)/b,G=E-g,A=D-v,_=z-g,V=L-v;return G*G+A*A>_*_+V*V&&(E=z,D=L),{cx:E,cy:D,x01:-u,y01:-f,x11:E*(i/M-1),y11:D*(i/M-1)}}function sA(){var e=Wme,t=Yme,n=xt(0),r=null,i=Xme,o=Qme,a=Kme,s=null,c=b3(l);function l(){var u,f,d=+e.apply(this,arguments),p=+t.apply(this,arguments),h=i.apply(this,arguments)-kd,m=o.apply(this,arguments)-kd,g=rA(m-h),v=m>h;if(s||(s=u=c()),p<d&&(f=p,p=d,d=f),!(p>wr))s.moveTo(0,0);else if(g>kv-wr)s.moveTo(p*x3(h),p*y2(h)),s.arc(0,0,p,h,m,!v),d>wr&&(s.moveTo(d*x3(m),d*y2(m)),s.arc(0,0,d,m,h,v));else{var y=h,C=m,b=h,M=m,S=g,w=g,E=a.apply(this,arguments)/2,D=E>wr&&(r?+r.apply(this,arguments):Qs(d*d+p*p)),z=_v(rA(p-d)/2,+n.apply(this,arguments)),L=z,G=z,A,_;if(D>wr){var V=iA(D/d*y2(E)),I=iA(D/p*y2(E));(S-=V*2)>wr?(V*=v?1:-1,b+=V,M-=V):(S=0,b=M=(h+m)/2),(w-=I*2)>wr?(I*=v?1:-1,y+=I,C-=I):(w=0,y=C=(h+m)/2)}var W=p*x3(y),X=p*y2(y),J=d*x3(M),Se=d*y2(M);if(z>wr){var Ee=p*x3(C),Je=p*y2(C),Dt=d*x3(b),ut=d*y2(b),Qt;if(g<C3)if(Qt=Zme(W,X,Dt,ut,Ee,Je,J,Se)){var ms=W-Qt[0],A0=X-Qt[1],y4=Ee-Qt[0],ve=Je-Qt[1],et=1/y2(VW((ms*y4+A0*ve)/(Qs(ms*ms+A0*A0)*Qs(y4*y4+ve*ve)))/2),ot=Qs(Qt[0]*Qt[0]+Qt[1]*Qt[1]);L=_v(z,(d-ot)/(et-1)),G=_v(z,(p-ot)/(et+1))}else L=G=0}w>wr?G>wr?(A=Tv(Dt,ut,W,X,p,G,v),_=Tv(Ee,Je,J,Se,p,G,v),s.moveTo(A.cx+A.x01,A.cy+A.y01),G<z?s.arc(A.cx,A.cy,G,Xr(A.y01,A.x01),Xr(_.y01,_.x01),!v):(s.arc(A.cx,A.cy,G,Xr(A.y01,A.x01),Xr(A.y11,A.x11),!v),s.arc(0,0,p,Xr(A.cy+A.y11,A.cx+A.x11),Xr(_.cy+_.y11,_.cx+_.x11),!v),s.arc(_.cx,_.cy,G,Xr(_.y11,_.x11),Xr(_.y01,_.x01),!v))):(s.moveTo(W,X),s.arc(0,0,p,y,C,!v)):s.moveTo(W,X),!(d>wr)||!(S>wr)?s.lineTo(J,Se):L>wr?(A=Tv(J,Se,Ee,Je,d,-L,v),_=Tv(W,X,Dt,ut,d,-L,v),s.lineTo(A.cx+A.x01,A.cy+A.y01),L<z?s.arc(A.cx,A.cy,L,Xr(A.y01,A.x01),Xr(_.y01,_.x01),!v):(s.arc(A.cx,A.cy,L,Xr(A.y01,A.x01),Xr(A.y11,A.x11),!v),s.arc(0,0,d,Xr(A.cy+A.y11,A.cx+A.x11),Xr(_.cy+_.y11,_.cx+_.x11),v),s.arc(_.cx,_.cy,L,Xr(_.y11,_.x11),Xr(_.y01,_.x01),!v))):s.arc(0,0,d,M,b,v)}if(s.closePath(),u)return s=null,u+""||null}return l.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-C3/2;return[x3(f)*u,y2(f)*u]},l.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:xt(+u),l):e},l.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:xt(+u),l):t},l.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:xt(+u),l):n},l.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:xt(+u),l):r},l.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:xt(+u),l):i},l.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:xt(+u),l):o},l.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:xt(+u),l):a},l.context=function(u){return arguments.length?(s=u??null,l):s},l}var yJe=Array.prototype.slice;function Iv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _W(e){this._context=e}_W.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function hl(e){return new _W(e)}function Fv(e){return e[0]}function Rv(e){return e[1]}function Td(e,t){var n=xt(!0),r=null,i=hl,o=null,a=b3(s);e=typeof e=="function"?e:e===void 0?Fv:xt(e),t=typeof t=="function"?t:t===void 0?Rv:xt(t);function s(c){var l,u=(c=Iv(c)).length,f,d=!1,p;for(r==null&&(o=i(p=a())),l=0;l<=u;++l)!(l<u&&n(f=c[l],l,c))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,l,c),+t(f,l,c));if(p)return o=null,p+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:xt(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:xt(+c),s):t},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:xt(!!c),s):n},s.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),s):i},s.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),s):r},s}function Ov(e,t,n){var r=null,i=xt(!0),o=null,a=hl,s=null,c=b3(l);e=typeof e=="function"?e:e===void 0?Fv:xt(+e),t=typeof t=="function"?t:t===void 0?xt(0):xt(+t),n=typeof n=="function"?n:n===void 0?Rv:xt(+n);function l(f){var d,p,h,m=(f=Iv(f)).length,g,v=!1,y,C=new Array(m),b=new Array(m);for(o==null&&(s=a(y=c())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===v)if(v=!v)p=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=d-1;h>=p;--h)s.point(C[h],b[h]);s.lineEnd(),s.areaEnd()}v&&(C[d]=+e(g,d,f),b[d]=+t(g,d,f),s.point(r?+r(g,d,f):C[d],n?+n(g,d,f):b[d]))}if(y)return s=null,y+""||null}function u(){return Td().defined(i).curve(a).context(o)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:xt(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:xt(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:xt(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:xt(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:xt(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:xt(+f),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:xt(!!f),l):i},l.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),l):a},l.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),l):o},l}var kW={draw(e,t){let n=Qs(t/C3);e.moveTo(n,0),e.arc(0,0,n,0,kv)}};function Pv(e,t){let n=null,r=b3(i);e=typeof e=="function"?e:xt(e||kW),t=typeof t=="function"?t:xt(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:xt(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:xt(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function _o(){}function ru(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Id(e){this._context=e}Id.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ru(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ru(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cA(e){return new Id(e)}function TW(e){this._context=e}TW.prototype={areaStart:_o,areaEnd:_o,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ru(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lA(e){return new TW(e)}function IW(e){this._context=e}IW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ru(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function uA(e){return new IW(e)}function FW(e,t){this._basis=new Id(e),this._beta=t}FW.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,a=t[n]-i,s=-1,c;++s<=n;)c=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+c*o),this._beta*t[s]+(1-this._beta)*(i+c*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var fA=function e(t){function n(r){return t===1?new Id(r):new FW(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function iu(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function $v(e,t){this._context=e,this._k=(1-t)/6}$v.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:iu(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:iu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var dA=function e(t){function n(r){return new $v(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Bv(e,t){this._context=e,this._k=(1-t)/6}Bv.prototype={areaStart:_o,areaEnd:_o,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:iu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var pA=function e(t){function n(r){return new Bv(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Uv(e,t){this._context=e,this._k=(1-t)/6}Uv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:iu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var hA=function e(t){function n(r){return new Uv(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Fd(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>wr){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>wr){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*l+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function RW(e,t){this._context=e,this._alpha=t}RW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Fd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var mA=function e(t){function n(r){return t?new RW(r,t):new $v(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function OW(e,t){this._context=e,this._alpha=t}OW.prototype={areaStart:_o,areaEnd:_o,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Fd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var gA=function e(t){function n(r){return t?new OW(r,t):new Bv(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function PW(e,t){this._context=e,this._alpha=t}PW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Fd(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var vA=function e(t){function n(r){return t?new PW(r,t):new Uv(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function $W(e){this._context=e}$W.prototype={areaStart:_o,areaEnd:_o,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function yA(e){return new $W(e)}function BW(e){return e<0?-1:1}function UW(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(BW(o)+BW(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function jW(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function xA(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function jv(e){this._context=e}jv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xA(this,this._t0,jW(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,xA(this,jW(this,n=UW(this,e,t)),n);break;default:xA(this,this._t0,n=UW(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function GW(e){this._context=new qW(e)}(GW.prototype=Object.create(jv.prototype)).point=function(e,t){jv.prototype.point.call(this,t,e)};function qW(e){this._context=e}qW.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function CA(e){return new jv(e)}function bA(e){return new GW(e)}function YW(e){this._context=e}YW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=WW(e),i=WW(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function WW(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function MA(e){return new YW(e)}function Gv(e,t){this._context=e,this._t=t}Gv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function wA(e){return new Gv(e,.5)}function SA(e){return new Gv(e,0)}function EA(e){return new Gv(e,1)}function ko(e,t){if(typeof document<"u"&&document.createElement){let n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}var XW=()=>typeof Image<"u"?Image:null;function Wn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ka(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}var ou=Symbol("implicit");function ml(){var e=new P6,t=[],n=[],r=ou;function i(o){let a=e.get(o);if(a===void 0){if(r!==ou)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new P6;for(let a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return ml(t,n).unknown(r)},Wn.apply(i,arguments),i}var OA={};mr(OA,{interpolate:()=>xi,interpolateArray:()=>bY,interpolateBasis:()=>Jv,interpolateBasisClosed:()=>ey,interpolateCubehelix:()=>OY,interpolateCubehelixLong:()=>PY,interpolateDate:()=>ny,interpolateDiscrete:()=>MY,interpolateHcl:()=>IY,interpolateHclLong:()=>FY,interpolateHsl:()=>_Y,interpolateHslLong:()=>kY,interpolateHue:()=>wY,interpolateLab:()=>RA,interpolateNumber:()=>Ci,interpolateNumberArray:()=>uu,interpolateObject:()=>ry,interpolateRgb:()=>$d,interpolateRgbBasis:()=>xY,interpolateRgbBasisClosed:()=>CY,interpolateRound:()=>Ra,interpolateString:()=>iy,interpolateTransformCss:()=>HY,interpolateTransformSvg:()=>LY,interpolateZoom:()=>VY,piecewise:()=>Ml,quantize:()=>$Y});function Ks(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function M3(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ia(){}var w3=.7,yl=1/w3,au="\\s*([+-]?\\d+)\\s*",Rd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ta="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",e9e=/^#([0-9a-f]{3,8})$/,t9e=new RegExp(`^rgb\\(${au},${au},${au}\\)$`),n9e=new RegExp(`^rgb\\(${Ta},${Ta},${Ta}\\)$`),r9e=new RegExp(`^rgba\\(${au},${au},${au},${Rd}\\)$`),i9e=new RegExp(`^rgba\\(${Ta},${Ta},${Ta},${Rd}\\)$`),o9e=new RegExp(`^hsl\\(${Rd},${Ta},${Ta}\\)$`),a9e=new RegExp(`^hsla\\(${Rd},${Ta},${Ta},${Rd}\\)$`),QW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ks(Ia,S3,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:KW,formatHex:KW,formatHex8:s9e,formatHsl:c9e,formatRgb:ZW,toString:ZW});function KW(){return this.rgb().formatHex()}function s9e(){return this.rgb().formatHex8()}function c9e(){return iY(this).formatHsl()}function ZW(){return this.rgb().formatRgb()}function S3(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=e9e.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?JW(t):n===3?new Yn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?qv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?qv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=t9e.exec(e))?new Yn(t[1],t[2],t[3],1):(t=n9e.exec(e))?new Yn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=r9e.exec(e))?qv(t[1],t[2],t[3],t[4]):(t=i9e.exec(e))?qv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=o9e.exec(e))?nY(t[1],t[2]/100,t[3]/100,1):(t=a9e.exec(e))?nY(t[1],t[2]/100,t[3]/100,t[4]):QW.hasOwnProperty(e)?JW(QW[e]):e==="transparent"?new Yn(NaN,NaN,NaN,0):null}function JW(e){return new Yn(e>>16&255,e>>8&255,e&255,1)}function qv(e,t,n,r){return r<=0&&(e=t=n=NaN),new Yn(e,t,n,r)}function Od(e){return e instanceof Ia||(e=S3(e)),e?(e=e.rgb(),new Yn(e.r,e.g,e.b,e.opacity)):new Yn}function To(e,t,n,r){return arguments.length===1?Od(e):new Yn(e,t,n,r??1)}function Yn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ks(Yn,To,M3(Ia,{brighter(e){return e=e==null?yl:Math.pow(yl,e),new Yn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?w3:Math.pow(w3,e),new Yn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yn(vl(this.r),vl(this.g),vl(this.b),Yv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eY,formatHex:eY,formatHex8:l9e,formatRgb:tY,toString:tY}));function eY(){return`#${gl(this.r)}${gl(this.g)}${gl(this.b)}`}function l9e(){return`#${gl(this.r)}${gl(this.g)}${gl(this.b)}${gl((isNaN(this.opacity)?1:this.opacity)*255)}`}function tY(){let e=Yv(this.opacity);return`${e===1?"rgb(":"rgba("}${vl(this.r)}, ${vl(this.g)}, ${vl(this.b)}${e===1?")":`, ${e})`}`}function Yv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function gl(e){return e=vl(e),(e<16?"0":"")+e.toString(16)}function nY(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new x2(e,t,n,r)}function iY(e){if(e instanceof x2)return new x2(e.h,e.s,e.l,e.opacity);if(e instanceof Ia||(e=S3(e)),!e)return new x2;if(e instanceof x2)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new x2(a,s,c,e.opacity)}function xl(e,t,n,r){return arguments.length===1?iY(e):new x2(e,t,n,r??1)}function x2(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ks(x2,xl,M3(Ia,{brighter(e){return e=e==null?yl:Math.pow(yl,e),new x2(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?w3:Math.pow(w3,e),new x2(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Yn(DA(e>=240?e-240:e+120,i,r),DA(e,i,r),DA(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new x2(rY(this.h),Wv(this.s),Wv(this.l),Yv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=Yv(this.opacity);return`${e===1?"hsl(":"hsla("}${rY(this.h)}, ${Wv(this.s)*100}%, ${Wv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rY(e){return e=(e||0)%360,e<0?e+360:e}function Wv(e){return Math.max(0,Math.min(1,e||0))}function DA(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var Xv=Math.PI/180,Qv=180/Math.PI;var Kv=18,oY=.96422,aY=1,sY=.82521,cY=4/29,su=6/29,lY=3*su*su,u9e=su*su*su;function uY(e){if(e instanceof Fa)return new Fa(e.l,e.a,e.b,e.opacity);if(e instanceof Zs)return fY(e);e instanceof Yn||(e=Od(e));var t=AA(e.r),n=AA(e.g),r=AA(e.b),i=zA((.2225045*t+.7168786*n+.0606169*r)/aY),o,a;return t===n&&n===r?o=a=i:(o=zA((.4360747*t+.3850649*n+.1430804*r)/oY),a=zA((.0139322*t+.0971045*n+.7141733*r)/sY)),new Fa(116*i-16,500*(o-i),200*(i-a),e.opacity)}function E3(e,t,n,r){return arguments.length===1?uY(e):new Fa(e,t,n,r??1)}function Fa(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Ks(Fa,E3,M3(Ia,{brighter(e){return new Fa(this.l+Kv*(e??1),this.a,this.b,this.opacity)},darker(e){return new Fa(this.l-Kv*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=oY*HA(t),e=aY*HA(e),n=sY*HA(n),new Yn(LA(3.1338561*t-1.6168667*e-.4906146*n),LA(-.9787684*t+1.9161415*e+.033454*n),LA(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function zA(e){return e>u9e?Math.pow(e,1/3):e/lY+cY}function HA(e){return e>su?e*e*e:lY*(e-cY)}function LA(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function AA(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function f9e(e){if(e instanceof Zs)return new Zs(e.h,e.c,e.l,e.opacity);if(e instanceof Fa||(e=uY(e)),e.a===0&&e.b===0)return new Zs(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Qv;return new Zs(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Cl(e,t,n,r){return arguments.length===1?f9e(e):new Zs(e,t,n,r??1)}function Zs(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function fY(e){if(isNaN(e.h))return new Fa(e.l,0,0,e.opacity);var t=e.h*Xv;return new Fa(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Ks(Zs,Cl,M3(Ia,{brighter(e){return new Zs(this.h,this.c,this.l+Kv*(e??1),this.opacity)},darker(e){return new Zs(this.h,this.c,this.l-Kv*(e??1),this.opacity)},rgb(){return fY(this).rgb()}}));var mY=-.14861,VA=1.78277,NA=-.29227,Zv=-.90649,Pd=1.97294,dY=Pd*Zv,pY=Pd*VA,hY=VA*NA-Zv*mY;function d9e(e){if(e instanceof bl)return new bl(e.h,e.s,e.l,e.opacity);e instanceof Yn||(e=Od(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(hY*r+dY*t-pY*n)/(hY+dY-pY),o=r-i,a=(Pd*(n-i)-NA*o)/Zv,s=Math.sqrt(a*a+o*o)/(Pd*i*(1-i)),c=s?Math.atan2(a,o)*Qv-120:NaN;return new bl(c<0?c+360:c,s,i,e.opacity)}function cu(e,t,n,r){return arguments.length===1?d9e(e):new bl(e,t,n,r??1)}function bl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ks(bl,cu,M3(Ia,{brighter(e){return e=e==null?yl:Math.pow(yl,e),new bl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?w3:Math.pow(w3,e),new bl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Xv,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Yn(255*(t+n*(mY*r+VA*i)),255*(t+n*(NA*r+Zv*i)),255*(t+n*(Pd*r)),this.opacity)}}));function _A(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function Jv(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return _A((n-r/t)*t,a,i,o,s)}}function ey(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return _A((n-r/t)*t,i,o,a,s)}}var lu=e=>()=>e;function gY(e,t){return function(n){return e+n*t}}function p9e(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function D3(e,t){var n=t-e;return n?gY(e,n>180||n<-180?n-360*Math.round(n/360):n):lu(isNaN(e)?t:e)}function vY(e){return(e=+e)==1?pn:function(t,n){return n-t?p9e(t,n,e):lu(isNaN(t)?n:t)}}function pn(e,t){var n=t-e;return n?gY(e,n):lu(isNaN(e)?t:e)}var $d=function e(t){var n=vY(t);function r(i,o){var a=n((i=To(i)).r,(o=To(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),l=pn(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function yY(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=To(t[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=e(r),i=e(i),o=e(o),s.opacity=1,function(c){return s.r=r(c),s.g=i(c),s.b=o(c),s+""}}}var xY=yY(Jv),CY=yY(ey);function uu(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function ty(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function bY(e,t){return(ty(t)?uu:kA)(e,t)}function kA(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=xi(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function ny(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ci(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ry(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=xi(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var IA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,TA=new RegExp(IA.source,"g");function h9e(e){return function(){return e}}function m9e(e){return function(t){return e(t)+""}}function iy(e,t){var n=IA.lastIndex=TA.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(e=e+"",t=t+"";(r=IA.exec(e))&&(i=TA.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:Ci(r,i)})),n=TA.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?m9e(c[0].x):h9e(t):(t=c.length,function(l){for(var u=0,f;u<t;++u)s[(f=c[u]).i]=f.x(l);return s.join("")})}function xi(e,t){var n=typeof t,r;return t==null||n==="boolean"?lu(t):(n==="number"?Ci:n==="string"?(r=S3(t))?(t=r,$d):iy:t instanceof S3?$d:t instanceof Date?ny:ty(t)?uu:Array.isArray(t)?kA:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ry:Ci)(e,t)}function MY(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function wY(e,t){var n=D3(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Ra(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var SY=180/Math.PI,oy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function FA(e,t,n,r,i,o){var a,s,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*SY,skewX:Math.atan(c)*SY,scaleX:a,scaleY:s}}var ay;function EY(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?oy:FA(t.a,t.b,t.c,t.d,t.e,t.f)}function DY(e){return e==null?oy:(ay||(ay=document.createElementNS("http://www.w3.org/2000/svg","g")),ay.setAttribute("transform",e),(e=ay.transform.baseVal.consolidate())?(e=e.matrix,FA(e.a,e.b,e.c,e.d,e.e,e.f)):oy)}function zY(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,d,p,h){if(l!==f||u!==d){var m=p.push("translate(",null,t,null,n);h.push({i:m-4,x:Ci(l,f)},{i:m-2,x:Ci(u,d)})}else(f||d)&&p.push("translate("+f+t+d+n)}function a(l,u,f,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ci(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function s(l,u,f,d){l!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ci(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,d,p,h){if(l!==f||u!==d){var m=p.push(i(p)+"scale(",null,",",null,")");h.push({i:m-4,x:Ci(l,f)},{i:m-2,x:Ci(u,d)})}else(f!==1||d!==1)&&p.push(i(p)+"scale("+f+","+d+")")}return function(l,u){var f=[],d=[];return l=e(l),u=e(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,d),a(l.rotate,u.rotate,f,d),s(l.skewX,u.skewX,f,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,d),l=u=null,function(p){for(var h=-1,m=d.length,g;++h<m;)f[(g=d[h]).i]=g.x(p);return f.join("")}}}var HY=zY(EY,"px, ","px)","deg)"),LY=zY(DY,", ",")",")");var g9e=1e-12;function AY(e){return((e=Math.exp(e))+1/e)/2}function v9e(e){return((e=Math.exp(e))-1/e)/2}function y9e(e){return((e=Math.exp(2*e))-1)/(e+1)}var VY=function e(t,n,r){function i(o,a){var s=o[0],c=o[1],l=o[2],u=a[0],f=a[1],d=a[2],p=u-s,h=f-c,m=p*p+h*h,g,v;if(m<g9e)v=Math.log(d/l)/t,g=function(w){return[s+w*p,c+w*h,l*Math.exp(t*w*v)]};else{var y=Math.sqrt(m),C=(d*d-l*l+r*m)/(2*l*n*y),b=(d*d-l*l-r*m)/(2*d*n*y),M=Math.log(Math.sqrt(C*C+1)-C),S=Math.log(Math.sqrt(b*b+1)-b);v=(S-M)/t,g=function(w){var E=w*v,D=AY(M),z=l/(n*y)*(D*y9e(t*E+M)-v9e(M));return[s+z*p,c+z*h,l*D/AY(t*E+M)]}}return g.duration=v*1e3*t/Math.SQRT2,g}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return e(a,s,c)},i}(Math.SQRT2,2,4);function NY(e){return function(t,n){var r=e((t=xl(t)).h,(n=xl(n)).h),i=pn(t.s,n.s),o=pn(t.l,n.l),a=pn(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=o(s),t.opacity=a(s),t+""}}}var _Y=NY(D3),kY=NY(pn);function RA(e,t){var n=pn((e=E3(e)).l,(t=E3(t)).l),r=pn(e.a,t.a),i=pn(e.b,t.b),o=pn(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=o(a),e+""}}function TY(e){return function(t,n){var r=e((t=Cl(t)).h,(n=Cl(n)).h),i=pn(t.c,n.c),o=pn(t.l,n.l),a=pn(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=o(s),t.opacity=a(s),t+""}}}var IY=TY(D3),FY=TY(pn);function RY(e){return function t(n){n=+n;function r(i,o){var a=e((i=cu(i)).h,(o=cu(o)).h),s=pn(i.s,o.s),c=pn(i.l,o.l),l=pn(i.opacity,o.opacity);return function(u){return i.h=a(u),i.s=s(u),i.l=c(Math.pow(u,n)),i.opacity=l(u),i+""}}return r.gamma=t,r}(1)}var OY=RY(D3),PY=RY(pn);function Ml(e,t){t===void 0&&(t=e,e=xi);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function $Y(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function PA(e){return function(){return e}}function fu(e){return+e}var BY=[0,1];function Qr(e){return e}function $A(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:PA(isNaN(t)?NaN:.5)}function x9e(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function C9e(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=$A(i,r),o=n(a,o)):(r=$A(r,i),o=n(o,a)),function(s){return o(r(s))}}function b9e(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=$A(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var c=g2(e,s,1,r)-1;return o[c](i[c](s))}}function Oa(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function wl(){var e=BY,t=BY,n=xi,r,i,o,a=Qr,s,c,l;function u(){var d=Math.min(e.length,t.length);return a!==Qr&&(a=x9e(e[0],e[d-1])),s=d>2?b9e:C9e,c=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(c||(c=s(e.map(r),t,n)))(r(a(d)))}return f.invert=function(d){return a(i((l||(l=s(t,e.map(r),Ci)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,fu),u()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Ra,u()},f.clamp=function(d){return arguments.length?(a=d?!0:Qr,u()):a!==Qr},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,p){return r=d,i=p,u()}}function Bd(){return wl()(Qr,Qr)}function du(e,t,n,r){var i=qi(e,t,n),o;switch(r=J1(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=od(i,a))&&(r.precision=o),j6(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=ad(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=id(i))&&(r.precision=o-(r.type==="%")*2);break}}return c3(r)}function to(e){var t=e.domain;return e.ticks=function(n){var r=t();return J4(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return du(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],s=r[o],c,l,u=10;for(s<a&&(l=a,a=s,s=l,l=i,i=o,o=l);u-- >0;){if(l=ed(a,s,n),l===c)return r[i]=a,r[o]=s,t(r);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;c=l}return e},e}function Ud(){var e=Bd();return e.copy=function(){return Oa(e,Ud())},Wn.apply(e,arguments),to(e)}function jd(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,fu),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return jd(e).unknown(t)},e=arguments.length?Array.from(e,fu):[0,1],to(n)}function Gd(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function UY(e){return Math.log(e)}function jY(e){return Math.exp(e)}function M9e(e){return-Math.log(-e)}function w9e(e){return-Math.exp(-e)}function S9e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function E9e(e){return e===10?S9e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function D9e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function GY(e){return(t,n)=>-e(-t,n)}function qd(e){let t=e(UY,jY),n=t.domain,r=10,i,o;function a(){return i=D9e(r),o=E9e(r),n()[0]<0?(i=GY(i),o=GY(o),e(M9e,w9e)):e(UY,jY),t}return t.base=function(s){return arguments.length?(r=+s,a()):r},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=s=>{let c=n(),l=c[0],u=c[c.length-1],f=u<l;f&&([l,u]=[u,l]);let d=i(l),p=i(u),h,m,g=s==null?10:+s,v=[];if(!(r%1)&&p-d<g){if(d=Math.floor(d),p=Math.ceil(p),l>0){for(;d<=p;++d)for(h=1;h<r;++h)if(m=d<0?h/o(-d):h*o(d),!(m<l)){if(m>u)break;v.push(m)}}else for(;d<=p;++d)for(h=r-1;h>=1;--h)if(m=d>0?h/o(-d):h*o(d),!(m<l)){if(m>u)break;v.push(m)}v.length*2<g&&(v=J4(l,u,g))}else v=J4(d,p,Math.min(p-d,g)).map(o);return f?v.reverse():v},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=J1(c)).precision==null&&(c.trim=!0),c=c3(c)),s===1/0)return c;let l=Math.max(1,r*s/t.ticks().length);return u=>{let f=u/o(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=l?c(u):""}},t.nice=()=>n(Gd(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),t}function Wd(){let e=qd(wl()).domain([1,10]);return e.copy=()=>Oa(e,Wd()).base(e.base()),Wn.apply(e,arguments),e}function qY(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function WY(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Yd(e){var t=1,n=e(qY(t),WY(t));return n.constant=function(r){return arguments.length?e(qY(t=+r),WY(t)):t},to(n)}function Xd(){var e=Yd(wl());return e.copy=function(){return Oa(e,Xd()).constant(e.constant())},Wn.apply(e,arguments)}function YY(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function z9e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function H9e(e){return e<0?-e*e:e*e}function Qd(e){var t=e(Qr,Qr),n=1;function r(){return n===1?e(Qr,Qr):n===.5?e(z9e,H9e):e(YY(n),YY(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},to(t)}function pu(){var e=Qd(wl());return e.copy=function(){return Oa(e,pu()).exponent(e.exponent())},Wn.apply(e,arguments),e}function BA(){return pu.apply(null,arguments).exponent(.5)}function Kd(){var e=[],t=[],n=[],r;function i(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=nd(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:t[g2(n,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(vi),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return Kd().domain(e).range(t).unknown(r)},Wn.apply(o,arguments)}function Zd(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function a(c){return c!=null&&c<=c?i[g2(r,c,0,n)]:o}function s(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return a}return a.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},a.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,s()):i.slice()},a.invertExtent=function(c){var l=i.indexOf(c);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},a.unknown=function(c){return arguments.length&&(o=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return Zd().domain([e,t]).range(i).unknown(o)},Wn.apply(to(a),arguments)}function Jd(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[g2(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Jd().domain(e).range(t).unknown(n)},Wn.apply(i,arguments)}function L9e(e){return new Date(e)}function A9e(e){return e instanceof Date?+e:+new Date(+e)}function sy(e,t,n,r,i,o,a,s,c,l){var u=Bd(),f=u.invert,d=u.domain,p=l(".%L"),h=l(":%S"),m=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),y=l("%b %d"),C=l("%B"),b=l("%Y");function M(S){return(c(S)<S?p:s(S)<S?h:a(S)<S?m:o(S)<S?g:r(S)<S?i(S)<S?v:y:n(S)<S?C:b)(S)}return u.invert=function(S){return new Date(f(S))},u.domain=function(S){return arguments.length?d(Array.from(S,A9e)):d().map(L9e)},u.ticks=function(S){var w=d();return e(w[0],w[w.length-1],S??10)},u.tickFormat=function(S,w){return w==null?M:l(w)},u.nice=function(S){var w=d();return(!S||typeof S.range!="function")&&(S=t(w[0],w[w.length-1],S??10)),S?d(Gd(w,S)):u},u.copy=function(){return Oa(u,sy(e,t,n,r,i,o,a,s,c,l))},u}function cy(){return Wn.apply(sy(kH,TH,Wi,Bs,Ao,D1,f3,l3,yi,Q6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ly(){return Wn.apply(sy(NH,_H,Yi,Us,Vo,Lo,d3,u3,yi,K6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function uy(){var e=0,t=1,n,r,i,o,a=Qr,s=!1,c;function l(f){return f==null||isNaN(f=+f)?c:a(i===0?.5:(f=(o(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(s=!!f,l):s},l.interpolator=function(f){return arguments.length?(a=f,l):a};function u(f){return function(d){var p,h;return arguments.length?([p,h]=d,a=f(p,h),l):[a(0),a(1)]}}return l.range=u(xi),l.rangeRound=u(Ra),l.unknown=function(f){return arguments.length?(c=f,l):c},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Js(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function hu(){var e=to(uy()(Qr));return e.copy=function(){return Js(e,hu())},ka.apply(e,arguments)}function fy(){var e=qd(uy()).domain([1,10]);return e.copy=function(){return Js(e,fy()).base(e.base())},ka.apply(e,arguments)}function dy(){var e=Yd(uy());return e.copy=function(){return Js(e,dy()).constant(e.constant())},ka.apply(e,arguments)}function e7(){var e=Qd(uy());return e.copy=function(){return Js(e,e7()).exponent(e.exponent())},ka.apply(e,arguments)}function UA(){return e7.apply(null,arguments).exponent(.5)}function py(){var e=0,t=.5,n=1,r=1,i,o,a,s,c,l=Qr,u,f=!1,d;function p(m){return isNaN(m=+m)?d:(m=.5+((m=+u(m))-o)*(r*m<r*o?s:c),l(f?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,n]=m,i=u(e=+e),o=u(t=+t),a=u(n=+n),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,p):[e,t,n]},p.clamp=function(m){return arguments.length?(f=!!m,p):f},p.interpolator=function(m){return arguments.length?(l=m,p):l};function h(m){return function(g){var v,y,C;return arguments.length?([v,y,C]=g,l=Ml(m,[v,y,C]),p):[l(0),l(.5),l(1)]}}return p.range=h(xi),p.rangeRound=h(Ra),p.unknown=function(m){return arguments.length?(d=m,p):d},function(m){return u=m,i=m(e),o=m(t),a=m(n),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,p}}function t7(){var e=to(py()(Qr));return e.copy=function(){return Js(e,t7())},ka.apply(e,arguments)}function hy(){var e=qd(py()).domain([.1,1,10]);return e.copy=function(){return Js(e,hy()).base(e.base())},ka.apply(e,arguments)}function my(){var e=Yd(py());return e.copy=function(){return Js(e,my()).constant(e.constant())},ka.apply(e,arguments)}function n7(){var e=Qd(py());return e.copy=function(){return Js(e,n7()).exponent(e.exponent())},ka.apply(e,arguments)}function jA(){return n7.apply(null,arguments).exponent(.5)}function r7(e,t,n){let r=e-t+n*2;return e?r>0?r:1:0}var N9e="identity",El="linear",Pa="log",mu="pow",gu="sqrt",i7="symlog",z3="time",H3="utc",C2="sequential",Dl="diverging",Sl="quantile",o7="quantize",a7="threshold",vy="ordinal",yy="point",qA="band",xy="bin-ordinal",lr="continuous",s7="discrete",c7="discretizing",Io="interpolating",WA="temporal";function _9e(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function k9e(e){return function(t){let n=e.range(),r=t[0],i=t[1],o=-1,a,s,c,l;for(i<r&&(s=r,r=i,i=s),c=0,l=n.length;c<l;++c)n[c]>=r&&n[c]<=i&&(o<0&&(o=c),a=c);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function YA(){let e=ml().unknown(void 0),t=e.domain,n=e.range,r=[0,1],i,o,a=!1,s=0,c=0,l=.5;delete e.unknown;function u(){let f=t().length,d=r[1]<r[0],p=r[1-d],h=r7(f,s,c),m=r[d-0];i=(p-m)/(h||1),a&&(i=Math.floor(i)),m+=(p-m-i*(f-s))*l,o=i*(1-s),a&&(m=Math.round(m),o=Math.round(o));let g=On(f).map(v=>m+i*v);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),u()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],u()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,u()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,u()):a},e.padding=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),s=c,u()):s},e.paddingInner=function(f){return arguments.length?(s=Math.max(0,Math.min(1,f)),u()):s},e.paddingOuter=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),u()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;let d=r[1]<r[0],p=d?n().reverse():n(),h=p.length-1,m=+f[0],g=+f[1],v,y,C;if(!(m!==m||g!==g)&&(g<m&&(C=m,m=g,g=C),!(g<p[0]||m>r[1-d])))return v=Math.max(0,Z4(p,m)-1),y=m===g?v:Z4(p,g)-1,m-p[v]>o+1e-10&&++v,d&&(C=v,v=h-y,y=h-C),v>y?void 0:t().slice(v,y+1)},e.invert=function(f){let d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return YA().domain(t()).range(r).round(a).paddingInner(s).paddingOuter(c).align(l)},u()}function ZY(e){let t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return ZY(t())},e}function T9e(){return ZY(YA().paddingInner(1))}var I9e=Array.prototype.map;function F9e(e){return I9e.call(e,Rn)}var R9e=Array.prototype.slice;function JY(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(g2(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=F9e(r),n):e.slice()},n.range=function(r){return arguments.length?(t=R9e.call(r),n):t.slice()},n.tickFormat=function(r,i){return du(e[0],Ye(e),r??10,i)},n.copy=function(){return JY().domain(n.domain()).range(n.range())},n}var gy=new Map,eX=Symbol("vega_scale");function XA(e){return e[eX]=!0,e}function tX(e){return e&&e[eX]===!0}function O9e(e,t,n){let r=function(){let o=t();return o.invertRange||(o.invertRange=o.invert?_9e(o):o.invertExtent?k9e(o):void 0),o.type=e,XA(o)};return r.metadata=cr(te(n)),r}function pt(e,t,n){return arguments.length>1?(gy.set(e,O9e(e,t,n)),this):QA(e)?gy.get(e):void 0}pt(N9e,jd);pt(El,Ud,lr);pt(Pa,Wd,[lr,Pa]);pt(mu,pu,lr);pt(gu,BA,lr);pt(i7,Xd,lr);pt(z3,cy,[lr,WA]);pt(H3,ly,[lr,WA]);pt(C2,hu,[lr,Io]);pt(`${C2}-${El}`,hu,[lr,Io]);pt(`${C2}-${Pa}`,fy,[lr,Io,Pa]);pt(`${C2}-${mu}`,e7,[lr,Io]);pt(`${C2}-${gu}`,UA,[lr,Io]);pt(`${C2}-${i7}`,dy,[lr,Io]);pt(`${Dl}-${El}`,t7,[lr,Io]);pt(`${Dl}-${Pa}`,hy,[lr,Io,Pa]);pt(`${Dl}-${mu}`,n7,[lr,Io]);pt(`${Dl}-${gu}`,jA,[lr,Io]);pt(`${Dl}-${i7}`,my,[lr,Io]);pt(Sl,Kd,[c7,Sl]);pt(o7,Zd,c7);pt(a7,Jd,c7);pt(xy,JY,[s7,c7]);pt(vy,ml,s7);pt(qA,YA,s7);pt(yy,T9e,s7);function QA(e){return gy.has(e)}function zl(e,t){let n=gy.get(e);return n&&n.metadata[t]}function l7(e){return zl(e,lr)}function L3(e){return zl(e,s7)}function Cy(e){return zl(e,c7)}function KA(e){return zl(e,Pa)}function P9e(e){return zl(e,WA)}function ZA(e){return zl(e,Io)}function JA(e){return zl(e,Sl)}var $9e=["clamp","base","constant","exponent"];function by(e,t){let n=t[0],r=Ye(t)-n;return function(i){return e(n+i*r)}}function vu(e,t,n){return Ml(u7(t||"rgb",n),e)}function My(e,t){let n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function wy(e,t,n){let r=n-t,i,o,a;return!r||!Number.isFinite(r)?fn(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=pt(o)().domain([t,n]).range([0,1]),$9e.forEach(s=>e[s]?a[s](e[s]()):0),a)}function u7(e,t){let n=OA[B9e(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function B9e(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}var U9e={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},j9e={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function nX(e){let t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function rX(e,t){for(let n in e)f7(n,t(e[n]))}var XY={};rX(j9e,nX);rX(U9e,e=>vu(nX(e)));function f7(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(XY[e]=t,this):XY[e]}var d7="symbol",G9e="discrete",iX="gradient",q9e=e=>F(e)?e.map(t=>String(t)):String(e),W9e=(e,t)=>e[1]-t[1],Y9e=(e,t)=>t[1]-e[1];function Sy(e,t,n){let r;return Be(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Os(e.domain())/n||1)+1))),ne(t)&&(r=t.step,t=t.interval),Q(t)&&(t=e.type===z3?js(t):e.type==H3?Gs(t):B("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function eV(e,t,n){let r=e.range(),i=r[0],o=Ye(r),a=W9e;if(i>o&&(r=o,o=i,i=r,a=Y9e),i=Math.floor(i),o=Math.ceil(o),t=t.map(s=>[s,e(s)]).filter(s=>i<=s[1]&&s[1]<=o).sort(a).map(s=>s[0]),n>0&&t.length>1){let s=[t[0],Ye(t)];for(;t.length>n&&t.length>=3;)t=t.filter((c,l)=>!(l%2));t.length<3&&(t=s)}return t}function Ey(e,t){return e.bins?eV(e,e.bins):e.ticks?e.ticks(t):e.domain()}function tV(e,t,n,r,i,o){let a=t.type,s=q9e;if(a===z3||i===z3)s=e.timeFormat(r);else if(a===H3||i===H3)s=e.utcFormat(r);else if(KA(a)){let c=e.formatFloat(r);if(o||t.bins)s=c;else{let l=oX(t,n,!1);s=u=>l(u)?c(u):""}}else if(t.tickFormat){let c=t.domain();s=e.formatSpan(c[0],c[c.length-1],n,r)}else r&&(s=e.format(r));return s}function oX(e,t,n){let r=Ey(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=c=>{let l=c/Math.pow(i,Math.round(Math.log(c)/o));return l*i<i-.5&&(l*=i),l<=a};return n?r.filter(s):s}var GA={[Sl]:"quantiles",[o7]:"thresholds",[a7]:"domain"},aX={[Sl]:"quantiles",[o7]:"domain"};function nV(e,t){return e.bins?K9e(e.bins):e.type===Pa?oX(e,t,!0):GA[e.type]?Q9e(e[GA[e.type]]()):Ey(e,t)}function X9e(e,t,n){let r=t[aX[t.type]](),i=r.length,o=i>1?r[1]-r[0]:r[0],a;for(a=1;a<i;++a)o=Math.min(o,r[a]-r[a-1]);return e.formatSpan(0,o,3*10,n)}function Q9e(e){let t=[-1/0].concat(e);return t.max=1/0,t}function K9e(e){let t=e.slice(0,-1);return t.max=Ye(e),t}var Z9e=e=>GA[e.type]||e.bins;function rV(e,t,n,r,i,o,a){let s=aX[t.type]&&o!==z3&&o!==H3?X9e(e,t,i):tV(e,t,n,i,o,a);return r===d7&&Z9e(t)?J9e(s):r===G9e?ege(s):tge(s)}var J9e=e=>(t,n,r)=>{let i=QY(r[n+1],QY(r.max,1/0)),o=KY(t,e),a=KY(i,e);return o&&a?o+" \u2013 "+a:a?"< "+a:"\u2265 "+o},QY=(e,t)=>e??t,ege=e=>(t,n)=>n?e(t):null,tge=e=>t=>e(t),KY=(e,t)=>Number.isFinite(e)?t(e):null;function sX(e){let t=e.domain(),n=t.length-1,r=+t[0],i=+Ye(t),o=i-r;if(e.type===a7){let a=n?o/n:.1;r-=a,i+=a,o=i-r}return a=>(a-r)/o}function nge(e,t,n,r){let i=r||t.type;return Q(n)&&P9e(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===z3?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===H3?e.utcFormat("%A, %d %B %Y, %X UTC"):rV(e,t,5,null,n,r,!0)}function iV(e,t,n){n=n||{};let r=Math.max(3,n.maxlen||7),i=nge(e,t,n.format,n.formatType);if(Cy(t.type)){let o=nV(t).slice(1).map(i),a=o.length;return`${a} boundar${a===1?"y":"ies"}: ${o.join(", ")}`}else if(L3(t.type)){let o=t.domain(),a=o.length,s=a>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${a} value${a===1?"":"s"}: ${s}`}else{let o=t.domain();return`values from ${i(o[0])} to ${i(Ye(o))}`}}var _X=0;function rge(){_X=0}var ky="p_";function wV(e){return e&&e.gradient}function kX(e,t,n){let r=e.gradient,i=e.id,o=r==="radial"?ky:"";return i||(i=e.id="gradient_"+_X++,r==="radial"?(e.x1=$a(e.x1,.5),e.y1=$a(e.y1,.5),e.r1=$a(e.r1,0),e.x2=$a(e.x2,.5),e.y2=$a(e.y2,.5),e.r2=$a(e.r2,.5),o=ky):(e.x1=$a(e.x1,0),e.y1=$a(e.y1,0),e.x2=$a(e.x2,1),e.y2=$a(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function $a(e,t){return e??t}function SV(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}var cX={basis:{curve:cA},"basis-closed":{curve:lA},"basis-open":{curve:uA},bundle:{curve:fA,tension:"beta",value:.85},cardinal:{curve:dA,tension:"tension",value:0},"cardinal-open":{curve:hA,tension:"tension",value:0},"cardinal-closed":{curve:pA,tension:"tension",value:0},"catmull-rom":{curve:mA,tension:"alpha",value:.5},"catmull-rom-closed":{curve:gA,tension:"alpha",value:.5},"catmull-rom-open":{curve:vA,tension:"alpha",value:.5},linear:{curve:hl},"linear-closed":{curve:yA},monotone:{horizontal:bA,vertical:CA},natural:{curve:MA},step:{curve:wA},"step-after":{curve:EA},"step-before":{curve:SA}};function EV(e,t,n){var r=he(cX,e)&&cX[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}var ige={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},oge=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,age=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,sge=/^((\s+,?\s*)|(,\s*))/,cge=/^[01]/;function _l(e){let t=[];return(e.match(oge)||[]).forEach(r=>{let i=r[0],o=i.toLowerCase(),a=ige[o],s=lge(o,a,r.slice(1).trim()),c=s.length;if(c<a||c&&c%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...s.slice(0,a)]),c!==a){o==="m"&&(i=i==="M"?"L":"l");for(let l=a;l<c;l+=a)t.push([i,...s.slice(l,l+a)])}}),t}function lge(e,t,n){let r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){let a=e==="a"&&(o===3||o===4)?cge:age,s=n.slice(i).match(a);if(s===null)throw Error("Invalid SVG path, incorrect parameter type");i+=s[0].length,r.push(+s[0]);let c=n.slice(i).match(sge);c!==null&&(i+=c[0].length)}return r}var T3=Math.PI/180,uge=1e-14,Hl=Math.PI/2,Ba=Math.PI*2,yu=Math.sqrt(3)/2,oV={},aV={},TX=[].join;function fge(e,t,n,r,i,o,a,s,c){let l=TX.call(arguments);if(oV[l])return oV[l];let u=a*T3,f=Math.sin(u),d=Math.cos(u);n=Math.abs(n),r=Math.abs(r);let p=d*(s-e)*.5+f*(c-t)*.5,h=d*(c-t)*.5-f*(s-e)*.5,m=p*p/(n*n)+h*h/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);let g=d/n,v=f/n,y=-f/r,C=d/r,b=g*s+v*c,M=y*s+C*c,S=g*e+v*t,w=y*e+C*t,D=1/((S-b)*(S-b)+(w-M)*(w-M))-.25;D<0&&(D=0);let z=Math.sqrt(D);o==i&&(z=-z);let L=.5*(b+S)-z*(w-M),G=.5*(M+w)+z*(S-b),A=Math.atan2(M-G,b-L),V=Math.atan2(w-G,S-L)-A;V<0&&o===1?V+=Ba:V>0&&o===0&&(V-=Ba);let I=Math.ceil(Math.abs(V/(Hl+.001))),W=[];for(let X=0;X<I;++X){let J=A+X*V/I,Se=A+(X+1)*V/I;W[X]=[L,G,J,Se,n,r,f,d]}return oV[l]=W}function dge(e){let t=TX.call(e);if(aV[t])return aV[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7];let u=l*a,f=-c*s,d=c*a,p=l*s,h=Math.cos(i),m=Math.sin(i),g=Math.cos(o),v=Math.sin(o),y=.5*(o-i),C=Math.sin(y*.5),b=8/3*C*C/Math.sin(y),M=n+h-b*m,S=r+m+b*h,w=n+g,E=r+v,D=w+b*v,z=E-b*g;return aV[t]=[u*M+f*S,d*M+p*S,u*D+f*z,d*D+p*z,u*w+f*E,d*w+p*E]}var Fo=["l",0,0,0,0,0,0,0];function pge(e,t,n){let r=Fo[0]=e[0];if(r==="a"||r==="A")Fo[1]=t*e[1],Fo[2]=n*e[2],Fo[3]=e[3],Fo[4]=e[4],Fo[5]=e[5],Fo[6]=t*e[6],Fo[7]=n*e[7];else if(r==="h"||r==="H")Fo[1]=t*e[1];else if(r==="v"||r==="V")Fo[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)Fo[i]=(i%2==1?t:n)*e[i];return Fo}function Cu(e,t,n,r,i,o){var a,s=null,c=0,l=0,u=0,f=0,d,p,h,m,g=0,v=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var y=0,C=t.length;y<C;++y){switch(a=t[y],(i!==1||o!==1)&&(a=pge(a,i,o)),a[0]){case"l":c+=a[1],l+=a[2],e.lineTo(c+n,l+r);break;case"L":c=a[1],l=a[2],e.lineTo(c+n,l+r);break;case"h":c+=a[1],e.lineTo(c+n,l+r);break;case"H":c=a[1],e.lineTo(c+n,l+r);break;case"v":l+=a[1],e.lineTo(c+n,l+r);break;case"V":l=a[1],e.lineTo(c+n,l+r);break;case"m":c+=a[1],l+=a[2],g=c,v=l,e.moveTo(c+n,l+r);break;case"M":c=a[1],l=a[2],g=c,v=l,e.moveTo(c+n,l+r);break;case"c":d=c+a[5],p=l+a[6],u=c+a[3],f=l+a[4],e.bezierCurveTo(c+a[1]+n,l+a[2]+r,u+n,f+r,d+n,p+r),c=d,l=p;break;case"C":c=a[5],l=a[6],u=a[3],f=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,u+n,f+r,c+n,l+r);break;case"s":d=c+a[3],p=l+a[4],u=2*c-u,f=2*l-f,e.bezierCurveTo(u+n,f+r,c+a[1]+n,l+a[2]+r,d+n,p+r),u=c+a[1],f=l+a[2],c=d,l=p;break;case"S":d=a[3],p=a[4],u=2*c-u,f=2*l-f,e.bezierCurveTo(u+n,f+r,a[1]+n,a[2]+r,d+n,p+r),c=d,l=p,u=a[1],f=a[2];break;case"q":d=c+a[3],p=l+a[4],u=c+a[1],f=l+a[2],e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p;break;case"Q":d=a[3],p=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,d+n,p+r),c=d,l=p,u=a[1],f=a[2];break;case"t":d=c+a[1],p=l+a[2],s[0].match(/[QqTt]/)===null?(u=c,f=l):s[0]==="t"?(u=2*c-h,f=2*l-m):s[0]==="q"&&(u=2*c-u,f=2*l-f),h=u,m=f,e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p,u=c+a[1],f=l+a[2];break;case"T":d=a[1],p=a[2],u=2*c-u,f=2*l-f,e.quadraticCurveTo(u+n,f+r,d+n,p+r),c=d,l=p;break;case"a":lX(e,c+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+c+n,a[7]+l+r]),c+=a[6],l+=a[7];break;case"A":lX(e,c+n,l+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),c=a[6],l=a[7];break;case"z":case"Z":c=g,l=v,e.closePath();break}s=a}}function lX(e,t,n,r){let i=fge(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){let a=dge(i[o]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}var uX=.5773502691896257,fX={circle:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Ba)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=yu*n,i=r-n*uX,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=yu*n,i=r-n*uX;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=yu*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=yu*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=yu*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=yu*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){let n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function IX(e){return he(fX,e)?fX[e]:hge(e)}var sV={};function hge(e){if(!he(sV,e)){let t=_l(e);sV[e]={draw:function(n,r){Cu(n,t,0,0,Math.sqrt(r)/2)}}}return sV[e]}var A3=.448084975506;function mge(e){return e.x}function gge(e){return e.y}function vge(e){return e.width}function yge(e){return e.height}function ec(e){return typeof e=="function"?e:()=>+e}function Dy(e,t,n){return Math.max(t,Math.min(e,n))}function FX(){var e=mge,t=gge,n=vge,r=yge,i=ec(0),o=i,a=i,s=i,c=null;function l(u,f,d){var p,h=f??+e.call(this,u),m=d??+t.call(this,u),g=+n.call(this,u),v=+r.call(this,u),y=Math.min(g,v)/2,C=Dy(+i.call(this,u),0,y),b=Dy(+o.call(this,u),0,y),M=Dy(+a.call(this,u),0,y),S=Dy(+s.call(this,u),0,y);if(c||(c=p=pl()),C<=0&&b<=0&&M<=0&&S<=0)c.rect(h,m,g,v);else{var w=h+g,E=m+v;c.moveTo(h+C,m),c.lineTo(w-b,m),c.bezierCurveTo(w-A3*b,m,w,m+A3*b,w,m+b),c.lineTo(w,E-S),c.bezierCurveTo(w,E-A3*S,w-A3*S,E,w-S,E),c.lineTo(h+M,E),c.bezierCurveTo(h+A3*M,E,h,E-A3*M,h,E-M),c.lineTo(h,m+C),c.bezierCurveTo(h,m+A3*C,h+A3*C,m,h+C,m),c.closePath()}if(p)return c=null,p+""||null}return l.x=function(u){return arguments.length?(e=ec(u),l):e},l.y=function(u){return arguments.length?(t=ec(u),l):t},l.width=function(u){return arguments.length?(n=ec(u),l):n},l.height=function(u){return arguments.length?(r=ec(u),l):r},l.cornerRadius=function(u,f,d,p){return arguments.length?(i=ec(u),o=f!=null?ec(f):i,s=d!=null?ec(d):i,a=p!=null?ec(p):o,l):i},l.context=function(u){return arguments.length?(c=u??null,l):c},l}function RX(){var e,t,n,r,i=null,o,a,s,c;function l(f,d,p){let h=p/2;if(o){var m=s-d,g=f-a;if(m||g){var v=Math.hypot(m,g),y=(m/=v)*c,C=(g/=v)*c,b=Math.atan2(g,m);i.moveTo(a-y,s-C),i.lineTo(f-m*h,d-g*h),i.arc(f,d,h,b-Math.PI,b),i.lineTo(a+y,s+C),i.arc(a,s,c,b,b+Math.PI)}else i.arc(f,d,h,0,Ba);i.closePath()}else o=1;a=f,s=d,c=h}function u(f){var d,p=f.length,h,m=!1,g;for(i==null&&(i=g=pl()),d=0;d<=p;++d)!(d<p&&r(h=f[d],d,f))===m&&(m=!m)&&(o=0),m&&l(+e(h,d,f),+t(h,d,f),+n(h,d,f));if(g)return i=null,g+""||null}return u.x=function(f){return arguments.length?(e=f,u):e},u.y=function(f){return arguments.length?(t=f,u):t},u.size=function(f){return arguments.length?(n=f,u):n},u.defined=function(f){return arguments.length?(r=f,u):r},u.context=function(f){return arguments.length?(f==null?i=null:i=f,u):i},u}function w7(e,t){return e??t}var S7=e=>e.x||0,E7=e=>e.y||0,xge=e=>e.width||0,Cge=e=>e.height||0,bge=e=>(e.x||0)+(e.width||0),Mge=e=>(e.y||0)+(e.height||0),wge=e=>e.startAngle||0,Sge=e=>e.endAngle||0,Ege=e=>e.padAngle||0,Dge=e=>e.innerRadius||0,zge=e=>e.outerRadius||0,Hge=e=>e.cornerRadius||0,Lge=e=>w7(e.cornerRadiusTopLeft,e.cornerRadius)||0,Age=e=>w7(e.cornerRadiusTopRight,e.cornerRadius)||0,Vge=e=>w7(e.cornerRadiusBottomRight,e.cornerRadius)||0,Nge=e=>w7(e.cornerRadiusBottomLeft,e.cornerRadius)||0,_ge=e=>w7(e.size,64),kge=e=>e.size||1,qy=e=>e.defined!==!1,Tge=e=>IX(e.shape||"circle"),Ige=sA().startAngle(wge).endAngle(Sge).padAngle(Ege).innerRadius(Dge).outerRadius(zge).cornerRadius(Hge),Fge=Ov().x(S7).y1(E7).y0(Mge).defined(qy),Rge=Ov().y(E7).x1(S7).x0(bge).defined(qy),Oge=Td().x(S7).y(E7).defined(qy),Pge=FX().x(S7).y(E7).width(xge).height(Cge).cornerRadius(Lge,Age,Vge,Nge),$ge=Pv().type(Tge).size(_ge),Bge=RX().x(S7).y(E7).defined(qy).size(kge);function DV(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Uge(e,t){return Ige.context(e)(t)}function jge(e,t){let n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Rge:Fge).curve(EV(r,n.orient,n.tension)).context(e)(t)}function Gge(e,t){let n=t[0],r=n.interpolate||"linear";return Oge.curve(EV(r,n.orient,n.tension)).context(e)(t)}function wu(e,t,n,r){return Pge.context(e)(t,n,r)}function qge(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Wge(e,t){return $ge.context(e)(t)}function Yge(e,t){return Bge.context(e)(t)}var OX=1;function PX(){OX=1}function zV(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+OX++),a=i.clipping[o]||(i.clipping[o]={id:o});return Ie(r)?a.path=r(null):DV(n)?a.path=wu(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function Hn(e){this.clear(),e&&this.union(e)}Hn.prototype={clone(){return new Hn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){let r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),c=Math.sin(e),l=t-t*s+n*c,u=n-t*c-n*s;return[s*r-c*i+l,c*r+s*i+u,s*r-c*a+l,c*r+s*a+u,s*o-c*i+l,c*o+s*i+u,s*o-c*a+l,c*o+s*a+u]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function D7(e){this.mark=e,this.bounds=this.bounds||new Hn}function z7(e){D7.call(this,e),this.items=this.items||[]}ee(z7,D7);function HV(e){this._pending=0,this._loader=e||Z6()}function dX(e){e._pending+=1}function p7(e){e._pending-=1}HV.prototype={pending(){return this._pending},sanitizeURL(e){let t=this;return dX(t),t._loader.sanitize(e,{context:"href"}).then(n=>(p7(t),n)).catch(()=>(p7(t),null))},loadImage(e){let t=this,n=XW();return dX(t),t._loader.sanitize(e,{context:"image"}).then(r=>{let i=r.href;if(!i||!n)throw{url:i};let o=new n,a=he(r,"crossOrigin")?r.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>p7(t),o.onerror=()=>p7(t),o.src=i,o}).catch(r=>(p7(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){let e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function Ua(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){let r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?Xge(t,r):0))}return e}function Xge(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}var Qge=Ba-1e-8,Wy,zy,Hy,Vl,dV,Ly,pV,hV,V3=(e,t)=>Wy.add(e,t),Ay=(e,t)=>V3(zy=e,Hy=t),pX=e=>V3(e,Wy.y1),hX=e=>V3(Wy.x1,e),Ll=(e,t)=>dV*e+pV*t,Al=(e,t)=>Ly*e+hV*t,cV=(e,t)=>V3(Ll(e,t),Al(e,t)),lV=(e,t)=>Ay(Ll(e,t),Al(e,t));function H7(e,t){return Wy=e,t?(Vl=t*T3,dV=hV=Math.cos(Vl),Ly=Math.sin(Vl),pV=-Ly):(dV=hV=1,Vl=Ly=pV=0),Kge}var Kge={beginPath(){},closePath(){},moveTo:lV,lineTo:lV,rect(e,t,n,r){Vl?(cV(e+n,t),cV(e+n,t+r),cV(e,t+r),lV(e,t)):(V3(e+n,t+r),Ay(e,t))},quadraticCurveTo(e,t,n,r){let i=Ll(e,t),o=Al(e,t),a=Ll(n,r),s=Al(n,r);mX(zy,i,a,pX),mX(Hy,o,s,hX),Ay(a,s)},bezierCurveTo(e,t,n,r,i,o){let a=Ll(e,t),s=Al(e,t),c=Ll(n,r),l=Al(n,r),u=Ll(i,o),f=Al(i,o);gX(zy,a,c,u,pX),gX(Hy,s,l,f,hX),Ay(u,f)},arc(e,t,n,r,i,o){if(r+=Vl,i+=Vl,zy=n*Math.cos(i)+e,Hy=n*Math.sin(i)+t,Math.abs(i-r)>Qge)V3(e-n,t-n),V3(e+n,t+n);else{let a=l=>V3(n*Math.cos(l)+e,n*Math.sin(l)+t),s,c;if(a(r),a(i),i!==r)if(r=r%Ba,r<0&&(r+=Ba),i=i%Ba,i<0&&(i+=Ba),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=Ba,s=r-r%Hl,c=0;c<4&&s>i;++c,s-=Hl)a(s);else for(s=r-r%Hl+Hl,c=0;c<4&&s<i;++c,s=s+Hl)a(s)}}};function mX(e,t,n,r){let i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function gX(e,t,n,r,i){let o=r-e+3*t-3*n,a=e+n-2*t,s=e-t,c=0,l=0,u;Math.abs(o)>uge?(u=a*a+s*o,u>=0&&(u=Math.sqrt(u),c=(-a+u)/o,l=(-a-u)/o)):c=.5*s/a,0<c&&c<1&&i(vX(c,e,t,n,r)),0<l&&l<1&&i(vX(l,e,t,n,r))}function vX(e,t,n,r,i){let o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var k3=(k3=ko(1,1))?k3.getContext("2d"):null,mV=new Hn;function LV(e){return function(t,n){if(!k3)return!0;e(k3,t),mV.clear().union(t.bounds).intersect(n).round();let{x1:r,y1:i,x2:o,y2:a}=mV;for(let s=i;s<=a;++s)for(let c=r;c<=o;++c)if(k3.isPointInPath(c,s))return!0;return!1}}function AV(e,t){return t.contains(e.x||0,e.y||0)}function $X(e,t){let n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(mV.set(n,r,n+i,r+o))}function BX(e,t){let n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return xu(t,n,r,i,o)}function xu(e,t,n,r,i){let{x1:o,y1:a,x2:s,y2:c}=e,l=r-t,u=i-n,f=0,d=1,p,h,m,g;for(g=0;g<4;++g){if(g===0&&(p=-l,h=-(o-t)),g===1&&(p=l,h=s-t),g===2&&(p=-u,h=-(a-n)),g===3&&(p=u,h=c-n),Math.abs(p)<1e-10&&h<0)return!1;if(m=h/p,p<0){if(m>d)return!1;m>f&&(f=m)}else if(p>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function bu(e,t){e.globalCompositeOperation=t.blend||"source-over"}function b2(e,t){return e??t}function yX(e,t){let n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Zge(e,t,n){let r=n.width(),i=n.height(),o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+b2(t.x1,.5)*r,n.y1+b2(t.y1,.5)*i,Math.max(r,i)*b2(t.r1,0),n.x1+b2(t.x2,.5)*r,n.y1+b2(t.y2,.5)*i,Math.max(r,i)*b2(t.r2,.5));else{let a=b2(t.x1,0),s=b2(t.y1,0),c=b2(t.x2,1),l=b2(t.y2,0);if(a===c||s===l||r===i)o=e.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+c*r,n.y1+l*i);else{let u=ko(Math.ceil(r),Math.ceil(i)),f=u.getContext("2d");return f.scale(r,i),f.fillStyle=yX(f.createLinearGradient(a,s,c,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(u,"no-repeat")}}return yX(o,t.stops)}function UX(e,t,n){return wV(n)?Zge(e,n,t.bounds):n}function Ty(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=UX(e,t,t.fill),!0):!1}var Jge=[];function Mu(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=UX(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Jge),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function eve(e,t){return e.zindex-t.zindex||e.index-t.index}function VV(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(eve)}function w2(e,t){var n=e.items,r,i;if(!n||!n.length)return;let o=VV(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function Iy(e,t){var n=e.items,r,i;if(!n||!n.length)return null;let o=VV(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function NV(e){return function(t,n,r){w2(n,i=>{(!r||r.intersects(i.bounds))&&jX(e,t,i,i)})}}function tve(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&jX(e,t,n.items[0],n.items)}}function jX(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(bu(t,n),n.fill&&Ty(t,n,i)&&t.fill(),n.stroke&&Mu(t,n,i)&&t.stroke()))}function Yy(e){return e=e||sr,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,Iy(n,s=>{let c=s.bounds;if(!(c&&!c.contains(o,a)||!c)&&e(t,s,r,i,o,a))return s})}}function L7(e,t){return function(n,r,i,o){var a=Array.isArray(r)?r[0]:r,s=t??a.fill,c=a.stroke&&n.isPointInStroke,l,u;return c&&(l=a.strokeWidth,u=a.strokeCap,n.lineWidth=l??1,n.lineCap=u??"butt"),e(n,r)?!1:s&&n.isPointInPath(i,o)||c&&n.isPointInStroke(i,o)}}function _V(e){return Yy(L7(e))}function Nl(e,t){return"translate("+e+","+t+")"}function kV(e){return"rotate("+e+")"}function nve(e,t){return"scale("+e+","+t+")"}function GX(e){return Nl(e.x||0,e.y||0)}function rve(e){return Nl(e.x||0,e.y||0)+(e.angle?" "+kV(e.angle):"")}function ive(e){return Nl(e.x||0,e.y||0)+(e.angle?" "+kV(e.angle):"")+(e.scaleX||e.scaleY?" "+nve(e.scaleX||1,e.scaleY||1):"")}function TV(e,t,n){function r(a,s){a("transform",rve(s)),a("d",t(null,s))}function i(a,s){return t(H7(a,s.angle),s),Ua(a,s).translate(s.x||0,s.y||0)}function o(a,s){var c=s.x||0,l=s.y||0,u=s.angle||0;a.translate(c,l),u&&a.rotate(u*=T3),a.beginPath(),t(a,s),u&&a.rotate(-u),a.translate(-c,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:NV(o),pick:_V(o),isect:n||LV(o)}}var ove=TV("arc",Uge);function ave(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,a,s;--i>=0;)e[i].defined!==!1&&(s=Math.abs(e[i][r]-n),s<o&&(o=s,a=e[i]));return a}function sve(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,a;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],a=i*i+o*o,a<n))return e[r];return null}function cve(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function IV(e,t,n){function r(c,l){var u=l.mark.items;u.length&&c("d",t(null,u))}function i(c,l){var u=l.items;return u.length===0?c:(t(H7(c),u),Ua(c,u[0]))}function o(c,l){c.beginPath(),t(c,l)}let a=L7(o);function s(c,l,u,f,d,p){var h=l.items,m=l.bounds;return!h||!h.length||m&&!m.contains(d,p)?null:(u*=c.pixelRatio,f*=c.pixelRatio,a(c,h,u,f)?h[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:tve(o),pick:s,isect:AV,tip:n}}var lve=IV("area",jge,ave);function uve(e,t){var n=t.clip;e.save(),Ie(n)?(e.beginPath(),n(e),e.clip()):qX(e,t.group)}function qX(e,t){e.beginPath(),DV(t)?wu(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function WX(e){let t=b2(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function fve(e,t){e("transform",GX(t))}function YX(e,t){let n=WX(t);e("d",wu(null,t,n,n))}function dve(e,t){e("class","background"),e("aria-hidden",!0),YX(e,t)}function pve(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?YX(e,t):e("d","")}function hve(e,t,n){let r=t.clip?zV(n,t,t):null;e("clip-path",r)}function mve(e,t){if(!t.clip&&t.items){let n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Ua(e,t),e.translate(t.x||0,t.y||0)}function x7(e,t,n,r){let i=WX(t);e.beginPath(),wu(e,t,(n||0)+i,(r||0)+i)}var gve=L7(x7),vve=L7(x7,!1),yve=L7(x7,!0);function xve(e,t,n,r){w2(t,i=>{let o=i.x||0,a=i.y||0,s=i.strokeForeground,c=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&c&&(x7(e,i,o,a),bu(e,i),i.fill&&Ty(e,i,c)&&e.fill(),i.stroke&&!s&&Mu(e,i,c)&&e.stroke()),e.save(),e.translate(o,a),i.clip&&qX(e,i),n&&n.translate(-o,-a),w2(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(o,a),e.restore(),s&&i.stroke&&c&&(x7(e,i,o,a),bu(e,i),Mu(e,i,c)&&e.stroke())})}function Cve(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;let a=n*e.pixelRatio,s=r*e.pixelRatio;return Iy(t,c=>{let l,u,f,d=c.bounds;if(d&&!d.contains(i,o))return;u=c.x||0,f=c.y||0;let p=u+(c.width||0),h=f+(c.height||0),m=c.clip;if(m&&(i<u||i>p||o<f||o>h))return;if(e.save(),e.translate(u,f),u=i-u,f=o-f,m&&DV(c)&&!yve(e,c,a,s))return e.restore(),null;let g=c.strokeForeground,v=t.interactive!==!1;return v&&g&&c.stroke&&vve(e,c,a,s)?(e.restore(),c):(l=Iy(c,y=>bve(y,u,f)?this.pick(y,n,r,u,f):null),!l&&v&&(c.fill||!g&&c.stroke)&&gve(e,c,a,s)&&(l=c),e.restore(),l||null)})}function bve(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Mve={type:"group",tag:"g",nested:!1,attr:fve,bound:mve,draw:xve,pick:Cve,isect:$X,content:hve,background:dve,foreground:pve},C7={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function FV(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function RV(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function OV(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function Xy(e,t){return e==="center"?t/2:e==="right"?t:0}function Qy(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function wve(e,t,n){let r=FV(t,n),i=RV(t,r),o=OV(t,r),a=(t.x||0)-Xy(t.align,i),s=(t.y||0)-Qy(t.baseline,o),c=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",c,C7["xmlns:xlink"],"xlink:href"),e("transform",Nl(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Sve(e,t){let n=t.image,r=RV(t,n),i=OV(t,n),o=(t.x||0)-Xy(t.align,r),a=(t.y||0)-Qy(t.baseline,i);return e.set(o,a,o+r,a+i)}function Eve(e,t,n){w2(t,r=>{if(n&&!n.intersects(r.bounds))return;let i=FV(r,this),o=RV(r,i),a=OV(r,i);if(o===0||a===0)return;let s=(r.x||0)-Xy(r.align,o),c=(r.y||0)-Qy(r.baseline,a),l,u,f,d;r.aspect!==!1&&(u=i.width/i.height,f=r.width/r.height,u===u&&f===f&&u!==f&&(f<u?(d=o/u,c+=(a-d)/2,a=d):(d=a*u,s+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(bu(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,s,c,o,a))})}var Dve={type:"image",tag:"image",nested:!1,attr:wve,bound:Sve,draw:Eve,pick:Yy(),isect:sr,get:FV,xOffset:Xy,yOffset:Qy},zve=IV("line",Gge,sve);function Hve(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",ive(t)),e("d",t.path)}function Vy(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*T3,c=t.pathCache;(!c||c.path!==n)&&((t.pathCache=c=_l(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),Cu(e,c,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):Cu(e,c,r,i,o,a)}function Lve(e,t){return Vy(H7(e,t.angle),t)?e.set(0,0,0,0):Ua(e,t,!0)}var Ave={type:"path",tag:"path",nested:!1,attr:Hve,bound:Lve,draw:NV(Vy),pick:_V(Vy),isect:LV(Vy)};function Vve(e,t){e("d",wu(null,t))}function Nve(e,t){var n,r;return Ua(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function xX(e,t){e.beginPath(),wu(e,t)}var _ve={type:"rect",tag:"path",nested:!1,attr:Vve,bound:Nve,draw:NV(xX),pick:_V(xX),isect:$X};function kve(e,t){e("transform",GX(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Tve(e,t){var n,r;return Ua(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function XX(e,t,n){var r,i,o,a;return t.stroke&&Mu(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0):!1}function Ive(e,t,n){w2(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&XX(e,r,i)&&(bu(e,r),e.stroke())}})}function Fve(e,t,n,r){return e.isPointInStroke?XX(e,t,1)&&e.isPointInStroke(n,r):!1}var Rve={type:"rule",tag:"line",nested:!1,attr:kve,bound:Tve,draw:Ive,pick:Yy(Fve),isect:BX},Ove=TV("shape",qge),Pve=TV("symbol",Wge,AV),CX=cH(),L1={height:ja,measureWidth:PV,estimateWidth:Fy,width:Fy,canvas:QX};QX(!0);function QX(e){L1.width=e&&k3?PV:Fy}function Fy(e,t){return KX(F3(e,t),ja(e))}function KX(e,t){return~~(.8*e.length*t)}function PV(e,t){return ja(e)<=0||!(t=F3(e,t))?0:ZX(t,Zy(e))}function ZX(e,t){let n=`(${t}) ${e}`,r=CX.get(n);return r===void 0&&(k3.font=t,r=k3.measureText(e).width,CX.set(n,r)),r}function ja(e){return e.fontSize!=null?+e.fontSize||0:11}function I3(e){return e.lineHeight!=null?e.lineHeight:ja(e)+2}function $ve(e){return F(e)?e.length>1?e:e[0]:e}function A7(e){return $ve(e.lineBreak&&e.text&&!F(e.text)?e.text.split(e.lineBreak):e.text)}function Ky(e){let t=A7(e);return(F(t)?t.length-1:0)*I3(e)}function F3(e,t){let n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Uve(e,n):n}function Bve(e){if(L1.width===PV){let t=Zy(e);return n=>ZX(n,t)}else if(L1.width===Fy){let t=ja(e);return n=>KX(n,t)}else return t=>L1.width(e,t)}function Uve(e,t){var n=+e.limit,r=Bve(e);if(r(t)<n)return t;var i=e.ellipsis||"\u2026",o=e.dir==="rtl",a=0,s=t.length,c;if(n-=r(i),o){for(;a<s;)c=a+s>>>1,r(t.slice(c))>n?a=c+1:s=c;return i+t.slice(a)}else{for(;a<s;)c=1+(a+s>>>1),r(t.slice(0,c))<n?a=c:s=c-1;return t.slice(0,a)+i}}function V7(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Zy(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ja(e)+"px "+V7(e,t)}function $V(e){var t=e.baseline,n=ja(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*I3(e):t==="line-bottom"?.29*n-.5*I3(e):0)}var jve={left:"start",center:"middle",right:"end"},g7=new Hn;function Jy(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Hl,t+=r*Math.cos(i),n+=r*Math.sin(i)),g7.x1=t,g7.y1=n,g7}function Gve(e,t){var n=t.dx||0,r=(t.dy||0)+$V(t),i=Jy(t),o=i.x1,a=i.y1,s=t.angle||0,c;e("text-anchor",jve[t.align]||"start"),s?(c=Nl(o,a)+" "+kV(s),(n||r)&&(c+=" "+Nl(n,r))):c=Nl(o+n,a+r),e("transform",c)}function BV(e,t,n){var r=L1.height(t),i=t.align,o=Jy(t),a=o.x1,s=o.y1,c=t.dx||0,l=(t.dy||0)+$V(t)-Math.round(.8*r),u=A7(t),f;if(F(u)?(r+=I3(t)*(u.length-1),f=u.reduce((d,p)=>Math.max(d,L1.width(t,p)),0)):f=L1.width(t,u),i==="center"?c-=f/2:i==="right"&&(c-=f),e.set(c+=a,l+=s,c+f,l+r),t.angle&&!n)e.rotate(t.angle*T3,a,s);else if(n===2)return e.rotatedPoints(t.angle*T3,a,s);return e}function qve(e,t,n){w2(t,r=>{var i=r.opacity==null?1:r.opacity,o,a,s,c,l,u,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=Zy(r),e.textAlign=r.align||"left",o=Jy(r),a=o.x1,s=o.y1,r.angle&&(e.save(),e.translate(a,s),e.rotate(r.angle*T3),a=s=0),a+=r.dx||0,s+=(r.dy||0)+$V(r),u=A7(r),bu(e,r),F(u))for(l=I3(r),c=0;c<u.length;++c)f=F3(r,u[c]),r.fill&&Ty(e,r,i)&&e.fillText(f,a,s),r.stroke&&Mu(e,r,i)&&e.strokeText(f,a,s),s+=l;else f=F3(r,u),r.fill&&Ty(e,r,i)&&e.fillText(f,a,s),r.stroke&&Mu(e,r,i)&&e.strokeText(f,a,s);r.angle&&e.restore()}})}function Wve(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=Jy(t),s=a.x1,c=a.y1,l=BV(g7,t,1),u=-t.angle*T3,f=Math.cos(u),d=Math.sin(u),p=f*i-d*o+(s-f*s+d*c),h=d*i+f*o+(c-d*s-f*c);return l.contains(p,h)}function Yve(e,t){let n=BV(g7,e,2);return xu(t,n[0],n[1],n[2],n[3])||xu(t,n[0],n[1],n[4],n[5])||xu(t,n[4],n[5],n[6],n[7])||xu(t,n[2],n[3],n[6],n[7])}var Xve={type:"text",tag:"text",nested:!1,attr:Gve,bound:BV,draw:qve,pick:Yy(Wve),isect:Yve},Qve=IV("trail",Yge,cve),Ji={arc:ove,area:lve,group:Mve,image:Dve,line:zve,path:Ave,rect:_ve,rule:Rve,shape:Ove,symbol:Pve,text:Xve,trail:Qve};function gV(e,t,n){var r=Ji[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Hn),e,n)}var bX={mark:null};function JX(e,t,n){var r=Ji[e.marktype],i=r.bound,o=e.items,a=o&&o.length,s,c,l,u;if(r.nested)return a?l=o[0]:(bX.mark=e,l=bX),u=gV(l,i,n),t=t&&t.union(u)||u,t;if(t=t||e.bounds&&e.bounds.clear()||new Hn,a)for(s=0,c=o.length;s<c;++s)t.union(gV(o[s],i,n));return e.bounds=t}var Kve=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function eQ(e,t){return JSON.stringify(e,Kve,t)}function tQ(e){let t=typeof e=="string"?JSON.parse(e):e;return nQ(t)}function nQ(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&nQ(n[i]);return t&&JX(e),e}function ex(e){arguments.length?this.root=tQ(e):(this.root=rQ({marktype:"group",name:"root",role:"frame"}),this.root.items=[new z7(this.root)])}ex.prototype={toJSON(e){return eQ(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];let r=rQ(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function rQ(e,t){let n={bounds:new Hn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function N3(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function UV(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function fr(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=N3(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function Ro(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function iQ(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function N7(e,t){let n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Zve(e,t,n,r){var i=e&&e.mark,o,a;if(i&&(o=Ji[i.marktype]).tip){for(a=N7(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=o.tip(i.items,a)}return e}function R3(e,t){this._active=null,this._handlers={},this._loader=e||Z6(),this._tooltip=t||Jve}function Jve(e,t,n,r){e.element().setAttribute("title",r||"")}R3.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){let t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(let r in t)n.push(...t[r]);return n},eventName(e){let t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{let i=new MouseEvent(e.type,e),o=N3(null,"a");for(let a in r)o.setAttribute(a,r[a]);o.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=Zve(t,e,this.canvas(),this._origin);let r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){let t=this.canvas();if(!t)return;let n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),a=i.height(),s=i.x1+r[0]+n.left,c=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,c+=e.y||0;return{x:s,y:c,width:o,height:a,left:s,top:c,right:s+o,bottom:c+a}}};function no(e){this._el=null,this._bgcolor=null,this._loader=new HV(e)}no.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e,t){let n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){let n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){let i=n._call;n._ready=n._loader.ready().then(o=>{o&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};var eye="keydown",tye="keypress",nye="keyup",oQ="dragenter",Ny="dragleave",aQ="dragover",vV="pointerdown",rye="pointerup",Ry="pointermove",v7="pointerout",sQ="pointerover",yV="mousedown",iye="mouseup",cQ="mousemove",xV="mouseout",lQ="mouseover",Oy="click",oye="dblclick",aye="wheel",uQ="mousewheel",Py="touchstart",$y="touchmove",By="touchend",sye=[eye,tye,nye,oQ,Ny,aQ,vV,rye,Ry,v7,sQ,yV,iye,cQ,xV,lQ,Oy,oye,aye,uQ,Py,$y,By],CV=Ry,b7=v7,bV=Oy;function nc(e,t){R3.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}var cye=e=>e===Py||e===$y||e===By?[Py,$y,By]:[e];function MX(e,t){cye(t).forEach(n=>lye(e,n))}function lye(e,t){let n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function m7(e,t,n){t.forEach(r=>e.fire(r,n))}function wX(e,t,n){return function(r){let i=this._active,o=this.pickEvent(r);o===i?m7(this,e,r):((!i||!i.exit)&&m7(this,n,r),this._active=o,m7(this,t,r),m7(this,e,r))}}function SX(e){return function(t){m7(this,e,t),this._active=null}}ee(nc,R3,{initialize(e,t,n){return this._canvas=e&&UV(e,"canvas"),[Oy,yV,vV,Ry,v7,Ny].forEach(r=>MX(this,r)),R3.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:sye,DOMMouseScroll(e){this.fire(uQ,e)},pointermove:wX([Ry,cQ],[sQ,lQ],[v7,xV]),dragover:wX([aQ],[oQ],[Ny]),pointerout:SX([v7,xV]),dragleave:SX([Ny]),pointerdown(e){this._down=this._active,this.fire(vV,e)},mousedown(e){this._down=this._active,this.fire(yV,e)},click(e){this._down===this._active&&(this.fire(Oy,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Py,e,!0)},touchmove(e){this.fire($y,e,!0)},touchend(e){this.fire(By,e,!0),this._touch=null},fire(e,t,n){let r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===bV&&r&&r.href?this.handleHref(t,r,r.href):(e===CV||e===b7)&&this.handleTooltip(t,r,e!==b7),i)for(let o=0,a=i.length;o<a;++o)i[o].handler.call(this._obj,t,r)},on(e,t){let n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(MX(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){let n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){let t=N7(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){let o=this.context();return Ji[e.marktype].pick.call(this,o,e,t,n,r,i)}});function uye(){return typeof window<"u"&&window.devicePixelRatio||1}function fye(e,t,n,r,i,o){let a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,s=e.getContext("2d"),c=a?uye():i;e.width=t*c,e.height=n*c;for(let l in o)s[l]=o[l];return a&&c!==1&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=c,s.setTransform(c,0,0,c,c*r[0],c*r[1]),e}function M7(e){no.call(this,e),this._options={},this._redraw=!1,this._dirty=new Hn,this._tempb=new Hn}var EX=no.prototype,dye=(e,t,n)=>new Hn().set(0,0,t,n).translate(-e[0],-e[1]);function pye(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}ee(M7,no,{initialize(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:ko(1,1,this._options.type),e&&this._canvas&&(Ro(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),EX.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(EX.resize.call(this,e,t,n,r),this._canvas)fye(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let i=this._options.externalContext;i||B("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){let t=this._tempb.clear().union(e.bounds),n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){let n=this.context(),r=this._origin,i=this._width,o=this._height,a=this._dirty,s=dye(r,i,o);n.save();let c=this._redraw||a.empty()?(this._redraw=!1,s.expand(1)):pye(n,s.intersect(a),r);return this.clear(-r[0],-r[1],i,o),this.draw(n,e,c,t),n.restore(),a.clear(),this},draw(e,t,n,r){if(t.marktype!=="group"&&r!=null&&!r.includes(t.marktype))return;let i=Ji[t.marktype];t.clip&&uve(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()},clear(e,t,n,r){let i=this._options,o=this.context();i.type!=="pdf"&&!i.externalContext&&o.clearRect(e,t,n,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});function jV(e,t){R3.call(this,e,t);let n=this;n._hrefHandler=MV(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=MV(n,(r,i)=>{n.handleTooltip(r,i,r.type!==b7)})}var MV=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};ee(jV,R3,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(bV,this._hrefHandler),r.removeEventListener(CV,this._tooltipHandler),r.removeEventListener(b7,this._tooltipHandler)),this._svg=r=e&&UV(e,"svg"),r&&(r.addEventListener(bV,this._hrefHandler),r.addEventListener(CV,this._tooltipHandler),r.addEventListener(b7,this._tooltipHandler)),R3.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){let n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){let o={type:e,handler:t,listener:MV(this,t)};(r[n]||(r[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){let n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});var fQ="aria-hidden",GV="aria-label",qV="role",WV="aria-roledescription",dQ="graphics-object",YV="graphics-symbol",pQ=(e,t,n)=>({[qV]:e,[WV]:t,[GV]:n||void 0}),hye=cr(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),DX={axis:{desc:"axis",caption:vye},legend:{desc:"legend",caption:yye},"title-text":{desc:"title",caption:e=>`Title text '${HX(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${HX(e)}'`}},zX={ariaRole:qV,ariaRoleDescription:WV,description:GV};function hQ(e,t){let n=t.aria===!1;if(e(fQ,n||void 0),n||t.description==null)for(let r in zX)e(zX[r],void 0);else{let r=t.mark.marktype;e(GV,t.description),e(qV,t.ariaRole||(r==="group"?dQ:YV)),e(WV,t.ariaRoleDescription||`${r} mark`)}}function mQ(e){return e.aria===!1?{[fQ]:!0}:hye[e.role]?null:DX[e.role]?gye(e,DX[e.role]):mye(e)}function mye(e){let t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return pQ(n?dQ:YV,`${t} mark container`,e.description)}function gye(e,t){try{let n=e.items[0],r=t.caption||(()=>"");return pQ(t.role||YV,t.desc,n.description||r(n))}catch{return null}}function HX(e){return te(e.text).join(" ")}function vye(e){let t=e.datum,n=e.orient,r=t.title?gQ(e):null,i=e.context,o=i.scales[t.scale].value,a=i.dataflow.locale(),s=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${L3(s)?"discrete":s} scale with ${iV(a,o,e)}`}function yye(e){let t=e.datum,n=t.title?gQ(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),a=e.context,s=a.scales[i[o[0]]].value,c=a.dataflow.locale();return Cye(r)+(n?` titled '${n}'`:"")+` for ${xye(o)} with ${iV(c,s,e)}`}function gQ(e){try{return te(Ye(e.items).items[0].text).join(" ")}catch{return null}}function xye(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Ye(e)}function Cye(e){return e.length?e[0].toUpperCase()+e.slice(1):e}var vQ=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),bye=e=>vQ(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function XV(){let e="",t="",n="",r=[],i=()=>t=n="",o=c=>{t&&(e+=`${t}>${n}`,i()),r.push(c)},a=(c,l)=>(l!=null&&(t+=` ${c}="${bye(l)}"`),s),s={open(c){o(c),t="<"+c;for(var l=arguments.length,u=new Array(l>1?l-1:0),f=1;f<l;f++)u[f-1]=arguments[f];for(let d of u)for(let p in d)a(p,d[p]);return s},close(){let c=r.pop();return t?e+=t+(n?`>${n}</${c}>`:"/>"):e+=`</${c}>`,i(),s},attr:a,text:c=>(n+=vQ(c),s),toString:()=>e};return s}var yQ=e=>xQ(XV(),e)+"";function xQ(e,t){if(e.open(t.tagName),t.hasAttributes()){let n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){let n=t.childNodes;for(let r of n)r.nodeType===3?e.text(r.nodeValue):xQ(e,r)}return e.close()}var Uy={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},jy={blend:"mix-blend-mode"},CQ={fill:"none","stroke-miterlimit":10},h7=0,LX="http://www.w3.org/2000/xmlns/",ur=C7.xmlns;function tx(e){no.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var uV=no.prototype;ee(tx,no,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=fr(e,0,"svg",ur),this._svg.setAttributeNS(LX,"xmlns",ur),this._svg.setAttributeNS(LX,"xmlns:xlink",C7["xmlns:xlink"]),this._svg.setAttribute("version",C7.version),this._svg.setAttribute("class","marks"),Ro(e,1),this._root=fr(this._svg,h7,"g",ur),_3(this._root,CQ),Ro(this._svg,h7+1)),this.background(this._bgcolor),uV.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),uV.background.apply(this,arguments)},resize(e,t,n,r){return uV.resize.call(this,e,t,n,r),this._svg&&(_3(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){let e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=fr(e,h7,"rect",ur),_3(n,{width:this._width,height:this._height,fill:t}));let r=yQ(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Ro(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;let e=this._dirty;if(!e.length||!this._dirtyID)return!0;let t=++this._dirtyID,n,r,i,o,a,s,c;for(a=0,s=e.length;a<s;++a)if(n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=Ji[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,AX(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){o.nested&&r.items.length?(c=r.items[0],c._svg&&this._update(o,c._svg,c)):n._svg&&(c=n._svg.parentNode,c&&c.removeChild(n._svg)),n._svg=null;continue}n=o.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,AX(n,t)):this._update(o,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,r){if(!this.isDirty(t))return t._svg;let i=this._svg,o=t.marktype,a=Ji[o],s=t.interactive===!1?"none":null,c=a.tag==="g",l=VX(t,e,n,"g",i);if(o!=="group"&&r!=null&&!r.includes(o))return Ro(l,0),t._svg;l.setAttribute("class",iQ(t));let u=mQ(t);for(let h in u)Zi(l,h,u[h]);c||Zi(l,"pointer-events",s),Zi(l,"clip-path",t.clip?zV(this,t,t.group):null);let f=null,d=0,p=h=>{let m=this.isDirty(h),g=VX(h,l,f,a.tag,i);m&&(this._update(a,g,h),c&&Sye(this,g,h,r)),f=g,++d};return a.nested?t.items.length&&p(t.items[0]):w2(t,p),Ro(l,d),l},_update(e,t,n){tc=t,bi=t.__values__,hQ(y7,n),e.attr(y7,n,this);let r=Dye[e.type];r&&r.call(this,e,t,n),tc&&this.style(tc,n)},style(e,t){if(t!=null){for(let n in Uy){let r=n==="font"?V7(t):t[n];if(r===bi[n])continue;let i=Uy[n];r==null?e.removeAttribute(i):(wV(r)&&(r=kX(r,this._defs.gradient,bQ())),e.setAttribute(i,r+"")),bi[n]=r}for(let n in jy)_y(e,jy[n],t[n])}},defs(){let e=this._svg,t=this._defs,n=t.el,r=0;for(let i in t.gradient)n||(t.el=n=fr(e,h7+1,"defs",ur)),r=Mye(n,t.gradient[i],r);for(let i in t.clipping)n||(t.el=n=fr(e,h7+1,"defs",ur)),r=wye(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):Ro(n,r))},_clearDefs(){let e=this._defs;e.gradient={},e.clipping={}}});function AX(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Mye(e,t,n){let r,i,o;if(t.gradient==="radial"){let a=fr(e,n++,"pattern",ur);_3(a,{id:ky+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=fr(a,0,"rect",ur),_3(a,{width:1,height:1,fill:`url(${bQ()}#${t.id})`}),e=fr(e,n++,"radialGradient",ur),_3(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=fr(e,n++,"linearGradient",ur),_3(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=fr(e,r,"stop",ur),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return Ro(e,r),n}function wye(e,t,n){let r;return e=fr(e,n,"clipPath",ur),e.setAttribute("id",t.id),t.path?(r=fr(e,0,"path",ur),r.setAttribute("d",t.path)):(r=fr(e,0,"rect",ur),_3(r,{x:0,y:0,width:t.width,height:t.height})),Ro(e,1),n+1}function Sye(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;w2(n,a=>{i=e.mark(t,a,i,r),++o}),Ro(t,1+o)}function VX(e,t,n,r,i){let o=e._svg,a;if(!o&&(a=t.ownerDocument,o=N3(a,r,ur),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){let s=N3(a,"path",ur);o.appendChild(s),s.__data__=e;let c=N3(a,"g",ur);o.appendChild(c),c.__data__=e;let l=N3(a,"path",ur);o.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(o.ownerSVGElement!==i||Eye(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function Eye(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}var tc=null,bi=null,Dye={group(e,t,n){let r=tc=t.childNodes[2];bi=r.__values__,e.foreground(y7,n,this),bi=t.__values__,tc=t.childNodes[1],e.content(y7,n,this);let i=tc=t.childNodes[0];e.background(y7,n,this);let o=n.mark.interactive===!1?"none":null;if(o!==bi.events&&(Zi(r,"pointer-events",o),Zi(i,"pointer-events",o),bi.events=o),n.strokeForeground&&n.stroke){let a=n.fill;Zi(r,"display",null),this.style(i,n),Zi(i,"stroke",null),a&&(n.fill=null),bi=r.__values__,this.style(r,n),a&&(n.fill=a),tc=null}else Zi(r,"display","none")},image(e,t,n){n.smooth===!1?(_y(t,"image-rendering","optimizeSpeed"),_y(t,"image-rendering","pixelated")):_y(t,"image-rendering",null)},text(e,t,n){let r=A7(n),i,o,a,s;F(r)?(o=r.map(c=>F3(n,c)),i=o.join(`
`),i!==bi.text&&(Ro(t,0),a=t.ownerDocument,s=I3(n),o.forEach((c,l)=>{let u=N3(a,"tspan",ur);u.__data__=n,u.textContent=c,l&&(u.setAttribute("x",0),u.setAttribute("dy",s)),t.appendChild(u)}),bi.text=i)):(o=F3(n,r),o!==bi.text&&(t.textContent=o,bi.text=o)),Zi(t,"font-family",V7(n)),Zi(t,"font-size",ja(n)+"px"),Zi(t,"font-style",n.fontStyle),Zi(t,"font-variant",n.fontVariant),Zi(t,"font-weight",n.fontWeight)}};function y7(e,t,n){t!==bi[e]&&(n?zye(tc,e,t,n):Zi(tc,e,t),bi[e]=t)}function _y(e,t,n){n!==bi[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),bi[t]=n)}function _3(e,t){for(let n in t)Zi(e,n,t[n])}function Zi(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function zye(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function bQ(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function QV(e){no.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}ee(QV,no,{svg(){return this._text},_render(e){let t=XV();t.open("svg",Te({},C7,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",CQ,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){let n=Ji[t.marktype],r=n.tag,i=[hQ,n.attr];e.open("g",{class:iQ(t),"clip-path":t.clip?zV(this,t,t.group):null},mQ(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});let o=a=>{let s=this.href(a);if(s&&e.open("a",s),e.open(r,this.attr(t,a,i,r!=="g"?r:null)),r==="text"){let c=A7(a);if(F(c)){let l={x:0,dy:I3(a)};for(let u=0;u<c.length;++u)e.open("tspan",u?l:null).text(F3(a,c[u])).close()}else e.text(F3(a,c))}else if(r==="g"){let c=a.strokeForeground,l=a.fill,u=a.stroke;c&&u&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),w2(a,f=>this.mark(e,f)),e.close(),c&&u?(l&&(a.fill=null),a.stroke=u,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),l&&(a.fill=l)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),s&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):w2(t,o),e.close()},href(e){let t=e.href,n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){let i={},o=(a,s,c,l)=>{i[l||a]=s};return Array.isArray(n)?n.forEach(a=>a(o,t,this)):n(o,t,this),r&&Hye(i,t,e,r,this._defs),i},defs(e){let t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(let i in t){let o=t[i],a=o.stops;o.gradient==="radial"?(e.open("pattern",{id:ky+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:i,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let s=0;s<a.length;++s)e.open("stop",{offset:a[s].offset,"stop-color":a[s].color}).close();e.close()}for(let i in n){let o=n[i];e.open("clipPath",{id:i}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});function Hye(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=V7(t),e["font-size"]=ja(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(let a in Uy){let s=t[a],c=Uy[a];s==="transparent"&&(c==="fill"||c==="stroke")||s!=null&&(wV(s)&&(s=kX(s,i.gradient,"")),e[c]=s)}for(let a in jy){let s=t[a];s!=null&&(o=o||[],o.push(`${jy[a]}: ${s};`))}return o&&(e.style=o.join(" ")),e}var M2={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Lye(e){M2.svgMarkTypes=e.svgMarkTypes??["text"],M2.svgOnTop=e.svgOnTop??!0,M2.debug=e.debug??!1}function Gy(e){no.call(this,e),this._svgRenderer=new tx(e),this._canvasRenderer=new M7(e)}var NX=no.prototype;ee(Gy,no,{initialize(e,t,n,r,i){this._root_el=fr(e,0,"div");let o=fr(this._root_el,0,"div"),a=fr(this._root_el,1,"div");return this._root_el.style.position="relative",M2.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=M2.svgOnTop?a:o,this._canvasEl=M2.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),NX.initialize.call(this,e,t,n,r,i)},dirty(e){return M2.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){let r=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(i=>!M2.svgMarkTypes.includes(i));this._svgRenderer.render(e,M2.svgMarkTypes),this._canvasRenderer.render(e,r)},resize(e,t,n,r){return NX.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background(e){return M2.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function KV(e,t){nc.call(this,e,t)}ee(KV,nc,{initialize(e,t,n){let r=fr(fr(e,0,"div"),M2.svgOnTop?0:1,"div");return nc.prototype.initialize.call(this,r,t,n)}});var MQ="canvas",wQ="hybrid",SQ="png",EQ="svg",DQ="none",rc={Canvas:MQ,PNG:SQ,SVG:EQ,Hybrid:wQ,None:DQ},kl={};kl[MQ]=kl[SQ]={renderer:M7,headless:M7,handler:nc};kl[EQ]={renderer:tx,headless:QV,handler:jV};kl[wQ]={renderer:Gy,headless:Gy,handler:KV};kl[DQ]={};function _7(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(kl[e]=t,this):kl[e]}function ZV(e,t,n){let r=[],i=new Hn().union(t),o=e.marktype;return o?zQ(e,i,n,r):o==="group"?HQ(e,i,n,r):B("Intersect scene must be mark node or group item.")}function zQ(e,t,n,r){if(Aye(e,t,n)){let i=e.items,o=e.marktype,a=i.length,s=0;if(o==="group")for(;s<a;++s)HQ(i[s],t,n,r);else for(let c=Ji[o].isect;s<a;++s){let l=i[s];LQ(l,t,c)&&r.push(l)}}return r}function Aye(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function HQ(e,t,n,r){n&&n(e.mark)&&LQ(e,t,Ji.group.isect)&&r.push(e);let i=e.items,o=i&&i.length;if(o){let a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let c=0;c<o;++c)zQ(i[c],t,n,r);t.translate(a,s)}return r}function LQ(e,t,n){let r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}var fV=new Hn;function JV(e){let t=e.clip;if(Ie(t))t(H7(fV.clear()));else if(t)fV.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(fV)}var Vye=1e-9;function eN(e,t,n){return e===t?!0:n==="path"?AQ(e,t):e instanceof Date&&t instanceof Date?+e==+t:Be(e)&&Be(t)?Math.abs(e-t)<=Vye:!e||!t||!ne(e)&&!ne(t)?e==t:Nye(e,t)}function AQ(e,t){return eN(_l(e),_l(t))}function Nye(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!eN(e[i],t[i],i))return!1;return typeof e==typeof t}function _ye(){PX(),rge()}var Du="top",S2="left",E2="right",$3="bottom",kye="top-left",Tye="top-right",Iye="bottom-left",Fye="bottom-right",rN="start",tN="middle",e1="end",Rye="x",Oye="y",ax="group",iN="axis",oN="title",Pye="frame",$ye="scope",aN="legend",PQ="row-header",$Q="row-footer",BQ="row-title",UQ="column-header",jQ="column-footer",GQ="column-title",Bye="padding",Uye="symbol",qQ="fit",WQ="fit-x",YQ="fit-y",jye="pad",sN="none",nx="all",nN="each",cN="flush",O3="column",P3="row";function XQ(e){$.call(this,null,e)}ee(XQ,$,{transform(e,t){let n=t.dataflow,r=e.mark,i=r.marktype,o=Ji[i],a=o.bound,s=r.bounds,c;if(o.nested)r.items.length&&n.dirty(r.items[0]),s=rx(r,a),r.items.forEach(l=>{l.bounds.clear().union(s)});else if(i===ax||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),s.clear(),r.items.forEach(l=>s.union(rx(l,a))),r.role){case iN:case aN:case oN:t.reflow()}else c=t.changed(t.REM),t.visit(t.ADD,l=>{s.union(rx(l,a))}),t.visit(t.MOD,l=>{c=c||s.alignsWith(l.bounds),n.dirty(l),s.union(rx(l,a))}),c&&(s.clear(),r.items.forEach(l=>s.union(l.bounds)));return JV(r),t.modifies("bounds")}});function rx(e,t,n){return t(e.bounds.clear(),e,n)}var VQ=":vega_identifier:";function lN(e){$.call(this,0,e)}lN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ee(lN,$,{transform(e,t){let n=Gye(t.dataflow),r=e.as,i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function Gye(e){return e._signals[VQ]||(e._signals[VQ]=e.add(0))}function QQ(e){$.call(this,null,e)}ee(QQ,$,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,qye(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);let r=n.marktype===ax?z7:D7;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function qye(e){let t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function KQ(e){$.call(this,null,e)}var NQ={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!ZQ(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},ZQ=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),_Q=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(ZQ(i,o=e[n].bounds,t))return!0},Wye=e=>{let t=e.bounds;return t.width()>1&&t.height()>1},Yye=(e,t,n)=>{var r=e.range(),i=new Hn;return t===Du||t===$3?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},kQ=e=>(e.forEach(t=>t.opacity=1),e),TQ=(e,t)=>e.reflow(t.modified()).modifies("opacity");ee(KQ,$,{transform(e,t){let n=NQ[e.method]||NQ.parity,r=e.separation||0,i=t.materialize(t.SOURCE).source,o,a;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(kQ(i),t=TQ(t,e)),t;if(i=i.filter(Wye),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=kQ(i),t=TQ(t,e),o.length>=3&&_Q(o,r)){do o=n(o,r);while(o.length>=3&&_Q(o,r));o.length<3&&!Ye(i).opacity&&(o.length>1&&(Ye(o).opacity=0),Ye(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=Yye(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(c=>{a(c)||(c.opacity=0)}));let s=o[0].mark.bounds.clear();return i.forEach(c=>{c.opacity&&s.union(c.bounds)}),t}});function JQ(e){$.call(this,null,e)}ee(JQ,$,{transform(e,t){let n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){let r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});var Mi=new Hn;function Eu(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Xye(e){var t=e.items[0].orient;return t===S2||t===E2}function Qye(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Kye(e,t,n,r){var i=t.items[0],o=i.datum,a=i.translate!=null?i.translate:.5,s=i.orient,c=Qye(o),l=i.range,u=i.offset,f=i.position,d=i.minExtent,p=i.maxExtent,h=o.title&&i.items[c[2]].items[0],m=i.titlePadding,g=i.bounds,v=h&&Ky(h),y=0,C=0,b,M;switch(Mi.clear().union(g),g.clear(),(b=c[0])>-1&&g.union(i.items[b].bounds),(b=c[1])>-1&&g.union(i.items[b].bounds),s){case Du:y=f||0,C=-u,M=Math.max(d,Math.min(p,-g.y1)),g.add(0,-M).add(l,0),h&&ix(e,h,M,m,v,0,-1,g);break;case S2:y=-u,C=f||0,M=Math.max(d,Math.min(p,-g.x1)),g.add(-M,0).add(0,l),h&&ix(e,h,M,m,v,1,-1,g);break;case E2:y=n+u,C=f||0,M=Math.max(d,Math.min(p,g.x2)),g.add(0,0).add(M,l),h&&ix(e,h,M,m,v,1,1,g);break;case $3:y=f||0,C=r+u,M=Math.max(d,Math.min(p,g.y2)),g.add(0,0).add(l,M),h&&ix(e,h,M,m,0,0,1,g);break;default:y=i.x,C=i.y}return Ua(g.translate(y,C),i),Eu(i,"x",y+a)|Eu(i,"y",C+a)&&(i.bounds=Mi,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function ix(e,t,n,r,i,o,a,s){let c=t.bounds;if(t.auto){let l=a*(n+i+r),u=0,f=0;e.dirty(t),o?u=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(c.translate(-u,-f)),e.dirty(t)}s.union(c)}var IQ=(e,t)=>Math.floor(Math.min(e,t)),FQ=(e,t)=>Math.ceil(Math.max(e,t));function Zye(e){var t=e.items,n=t.length,r=0,i,o;let a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===ax)switch(i.role){case iN:case aN:case oN:break;case PQ:a.rowheaders.push(...o);break;case $Q:a.rowfooters.push(...o);break;case UQ:a.colheaders.push(...o);break;case jQ:a.colfooters.push(...o);break;case BQ:a.rowtitle=o[0];break;case GQ:a.coltitle=o[0];break;default:a.marks.push(...o)}return a}function Jye(e){return new Hn().set(0,0,e.width||0,e.height||0)}function exe(e){let t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function hn(e,t,n){let r=ne(e)?e[t]:e;return r??(n!==void 0?n:0)}function RQ(e){return e<0?Math.ceil(-e):0}function eK(e,t,n){var r=!n.nodirty,i=n.bounds===cN?Jye:exe,o=Mi.set(0,0,0,0),a=hn(n.align,O3),s=hn(n.align,P3),c=hn(n.padding,O3),l=hn(n.padding,P3),u=n.columns||t.length,f=u<=0?1:Math.ceil(t.length/u),d=t.length,p=Array(d),h=Array(u),m=0,g=Array(d),v=Array(f),y=0,C=Array(d),b=Array(d),M=Array(d),S,w,E,D,z,L,G,A,_,V,I;for(w=0;w<u;++w)h[w]=0;for(w=0;w<f;++w)v[w]=0;for(w=0;w<d;++w)L=t[w],z=M[w]=i(L),L.x=L.x||0,C[w]=0,L.y=L.y||0,b[w]=0,E=w%u,D=~~(w/u),m=Math.max(m,G=Math.ceil(z.x2)),y=Math.max(y,A=Math.ceil(z.y2)),h[E]=Math.max(h[E],G),v[D]=Math.max(v[D],A),p[w]=c+RQ(z.x1),g[w]=l+RQ(z.y1),r&&e.dirty(t[w]);for(w=0;w<d;++w)w%u===0&&(p[w]=0),w<u&&(g[w]=0);if(a===nN)for(E=1;E<u;++E){for(I=0,w=E;w<d;w+=u)I<p[w]&&(I=p[w]);for(w=E;w<d;w+=u)p[w]=I+h[E-1]}else if(a===nx){for(I=0,w=0;w<d;++w)w%u&&I<p[w]&&(I=p[w]);for(w=0;w<d;++w)w%u&&(p[w]=I+m)}else for(a=!1,E=1;E<u;++E)for(w=E;w<d;w+=u)p[w]+=h[E-1];if(s===nN)for(D=1;D<f;++D){for(I=0,w=D*u,S=w+u;w<S;++w)I<g[w]&&(I=g[w]);for(w=D*u;w<S;++w)g[w]=I+v[D-1]}else if(s===nx){for(I=0,w=u;w<d;++w)I<g[w]&&(I=g[w]);for(w=u;w<d;++w)g[w]=I+y}else for(s=!1,D=1;D<f;++D)for(w=D*u,S=w+u;w<S;++w)g[w]+=v[D-1];for(_=0,w=0;w<d;++w)_=p[w]+(w%u?_:0),C[w]+=_-t[w].x;for(E=0;E<u;++E)for(V=0,w=E;w<d;w+=u)V+=g[w],b[w]+=V-t[w].y;if(a&&hn(n.center,O3)&&f>1)for(w=0;w<d;++w)z=a===nx?m:h[w%u],_=z-M[w].x2-t[w].x-C[w],_>0&&(C[w]+=_/2);if(s&&hn(n.center,P3)&&u!==1)for(w=0;w<d;++w)z=s===nx?y:v[~~(w/u)],V=z-M[w].y2-t[w].y-b[w],V>0&&(b[w]+=V/2);for(w=0;w<d;++w)o.union(M[w].translate(C[w],b[w]));switch(_=hn(n.anchor,Rye),V=hn(n.anchor,Oye),hn(n.anchor,O3)){case e1:_-=o.width();break;case tN:_-=o.width()/2}switch(hn(n.anchor,P3)){case e1:V-=o.height();break;case tN:V-=o.height()/2}for(_=Math.round(_),V=Math.round(V),o.clear(),w=0;w<d;++w)t[w].mark.bounds.clear();for(w=0;w<d;++w)L=t[w],L.x+=C[w]+=_,L.y+=b[w]+=V,o.union(L.mark.bounds.union(L.bounds.translate(C[w],b[w]))),r&&e.dirty(L);return o}function txe(e,t,n){var r=Zye(t),i=r.marks,o=n.bounds===cN?nxe:rxe,a=n.offset,s=n.columns||i.length,c=s<=0?1:Math.ceil(i.length/s),l=c*s,u,f,d,p,h,m,g;let v=eK(e,i,n);v.empty()&&v.set(0,0,0,0),r.rowheaders&&(m=hn(n.headerBand,P3,null),u=ox(e,r.rowheaders,i,s,c,-hn(a,"rowHeader"),IQ,0,o,"x1",0,s,1,m)),r.colheaders&&(m=hn(n.headerBand,O3,null),f=ox(e,r.colheaders,i,s,s,-hn(a,"columnHeader"),IQ,1,o,"y1",0,1,s,m)),r.rowfooters&&(m=hn(n.footerBand,P3,null),d=ox(e,r.rowfooters,i,s,c,hn(a,"rowFooter"),FQ,0,o,"x2",s-1,s,1,m)),r.colfooters&&(m=hn(n.footerBand,O3,null),p=ox(e,r.colfooters,i,s,s,hn(a,"columnFooter"),FQ,1,o,"y2",l-s,1,s,m)),r.rowtitle&&(h=hn(n.titleAnchor,P3),g=hn(a,"rowTitle"),g=h===e1?d+g:u-g,m=hn(n.titleBand,P3,.5),OQ(e,r.rowtitle,g,0,v,m)),r.coltitle&&(h=hn(n.titleAnchor,O3),g=hn(a,"columnTitle"),g=h===e1?p+g:f-g,m=hn(n.titleBand,O3,.5),OQ(e,r.coltitle,g,1,v,m))}function nxe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function rxe(e,t){return e.bounds[t]}function ox(e,t,n,r,i,o,a,s,c,l,u,f,d,p){var h=n.length,m=0,g=0,v,y,C,b,M,S,w,E,D;if(!h)return m;for(v=u;v<h;v+=f)n[v]&&(m=a(m,c(n[v],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=o,y=0,b=t.length;y<b;++y)e.dirty(t[y]),t[y].mark.bounds.clear();for(v=u,y=0,b=t.length;y<b;++y,v+=f){for(S=t[y],M=S.mark.bounds,C=v;C>=0&&(w=n[C])==null;C-=d);s?(E=p==null?w.x:Math.round(w.bounds.x1+p*w.bounds.width()),D=m):(E=m,D=p==null?w.y:Math.round(w.bounds.y1+p*w.bounds.height())),M.union(S.bounds.translate(E-(S.x||0),D-(S.y||0))),S.x=E,S.y=D,e.dirty(S),g=a(g,M[l])}return g}function OQ(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function ixe(e,t){let n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function oxe(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function axe(e,t,n,r,i,o,a){let s=ixe(n,t),c=oxe(e,s("offset",0)),l=s("anchor",rN),u=l===e1?1:l===tN?.5:0,f={align:nN,bounds:s("bounds",cN),columns:s("direction")==="vertical"?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case S2:f.anchor={x:Math.floor(r.x1)-c,column:e1,y:u*(a||r.height()+2*r.y1),row:l};break;case E2:f.anchor={x:Math.ceil(r.x2)+c,y:u*(a||r.height()+2*r.y1),row:l};break;case Du:f.anchor={y:Math.floor(i.y1)-c,row:e1,x:u*(o||i.width()+2*i.x1),column:l};break;case $3:f.anchor={y:Math.ceil(i.y2)+c,x:u*(o||i.width()+2*i.x1),column:l};break;case kye:f.anchor={x:c,y:c};break;case Tye:f.anchor={x:o-c,y:c,column:e1};break;case Iye:f.anchor={x:c,y:a-c,row:e1};break;case Fye:f.anchor={x:o-c,y:a-c,column:e1,row:e1};break}return f}function sxe(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,a=n.x,s=n.y,c,l;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),lxe(e,n,n.items[0].items[0]),o=cxe(n,o),c=2*n.padding,l=2*n.padding,o.empty()||(c=Math.ceil(o.width()+c),l=Math.ceil(o.height()+l)),r.type===Uye&&uxe(n.items[0].items[0].items[0].items),i!==sN&&(n.x=a=0,n.y=s=0),n.width=c,n.height=l,Ua(o.set(a,s,a+c,s+l),n),n.mark.bounds.clear().union(o),n}function cxe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function lxe(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&k7(e,n,i,o);else{var a=t.items[1].items[0],s=a.anchor,c=t.titlePadding||0,l=r-a.x,u=r-a.y;switch(a.orient){case S2:i+=Math.ceil(a.bounds.width())+c;break;case E2:case $3:break;default:o+=a.bounds.height()+c}switch((i||o)&&k7(e,n,i,o),a.orient){case S2:u+=Su(t,n,a,s,1,1);break;case E2:l+=Su(t,n,a,e1,0,0)+c,u+=Su(t,n,a,s,1,1);break;case $3:l+=Su(t,n,a,s,0,0),u+=Su(t,n,a,e1,-1,0,1)+c;break;default:l+=Su(t,n,a,s,0,0)}(l||u)&&k7(e,a,l,u),(l=Math.round(a.bounds.x1-r))<0&&(k7(e,n,-l,0),k7(e,a,-l,0))}}function Su(e,t,n,r,i,o,a){let s=e.datum.type!=="symbol",c=n.datum.vgrad,l=s&&(o||!c)&&!a?t.items[0]:t,u=l.bounds[i?"y2":"x2"]-e.padding,f=c&&o?u:0,d=c&&o?0:u,p=i<=0?0:Ky(n);return Math.round(r===rN?f:r===e1?d-p:.5*(u-p))}function k7(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function uxe(e){let t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function fxe(e,t,n,r,i){var o=t.items[0],a=o.frame,s=o.orient,c=o.anchor,l=o.offset,u=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],p=s===S2||s===E2?r:n,h=0,m=0,g=0,v=0,y=0,C;if(a!==ax?s===S2?(h=i.y2,p=i.y1):s===E2?(h=i.y1,p=i.y2):(h=i.x1,p=i.x2):s===S2&&(h=r,p=0),C=c===rN?h:c===e1?p:(h+p)/2,d&&d.text){switch(s){case Du:case $3:y=f.bounds.height()+u;break;case S2:v=f.bounds.width()+u;break;case E2:v=-f.bounds.width()-u;break}Mi.clear().union(d.bounds),Mi.translate(v-(d.x||0),y-(d.y||0)),Eu(d,"x",v)|Eu(d,"y",y)&&(e.dirty(d),d.bounds.clear().union(Mi),d.mark.bounds.clear().union(Mi),e.dirty(d)),Mi.clear().union(d.bounds)}else Mi.clear();switch(Mi.union(f.bounds),s){case Du:m=C,g=i.y1-Mi.height()-l;break;case S2:m=i.x1-Mi.width()-l,g=C;break;case E2:m=i.x2+Mi.width()+l,g=C;break;case $3:m=C,g=i.y2+l;break;default:m=o.x,g=o.y}return Eu(o,"x",m)|Eu(o,"y",g)&&(Mi.translate(m,g),e.dirty(o),o.bounds.clear().union(Mi),t.bounds.clear().union(Mi),e.dirty(o)),o.bounds}function tK(e){$.call(this,null,e)}ee(tK,$,{transform(e,t){let n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&txe(n,r,e.layout),pxe(n,r,e)}),dxe(e.mark.group)?t.reflow():t}});function dxe(e){return e&&e.mark.role!=="legend-entry"}function pxe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),a=new Hn().set(0,0,i,o),s=a.clone(),c=a.clone(),l=[],u,f,d,p,h,m;for(h=0,m=r.length;h<m;++h)switch(f=r[h],f.role){case iN:p=Xye(f)?s:c,p.union(Kye(e,f,i,o));break;case oN:u=f;break;case aN:l.push(sxe(e,f));break;case Pye:case $ye:case PQ:case $Q:case BQ:case UQ:case jQ:case GQ:s.union(f.bounds),c.union(f.bounds);break;default:a.union(f.bounds)}if(l.length){let g={};l.forEach(v=>{d=v.orient||E2,d!==sN&&(g[d]||(g[d]=[])).push(v)});for(let v in g){let y=g[v];eK(e,y,axe(y,v,n.legends,s,c,i,o))}l.forEach(v=>{let y=v.bounds;if(y.equals(v._bounds)||(v.bounds=v._bounds,e.dirty(v),v.bounds=y,e.dirty(v)),n.autosize&&(n.autosize.type===qQ||n.autosize.type===WQ||n.autosize.type===YQ))switch(v.orient){case S2:case E2:a.add(y.x1,0).add(y.x2,0);break;case Du:case $3:a.add(0,y.y1).add(0,y.y2)}else a.union(y)})}a.union(s).union(c),u&&a.union(fxe(e,u,i,o,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),hxe(e,t,a,n)}function hxe(e,t,n,r){let i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,c=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),u=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1)),d=Math.max(0,Math.ceil(n.x2-c)),p=Math.max(0,Math.ceil(n.y2-u));if(i.contains===Bye){let h=e.padding();a-=h.left+h.right,s-=h.top+h.bottom}o===sN?(l=0,f=0,c=a,u=s):o===qQ?(c=Math.max(0,a-l-d),u=Math.max(0,s-f-p)):o===WQ?(c=Math.max(0,a-l-d),s=u+f+p):o===YQ?(a=c+l+d,u=Math.max(0,s-f-p)):o===jye&&(a=c+l+d,s=u+f+p),e._resizeView(a,s,c,u,[l,f],i.resize)}var mN={};mr(mN,{axisticks:()=>oK,datajoin:()=>aK,encode:()=>sK,legendentries:()=>cK,linkpath:()=>dN,pie:()=>pN,scale:()=>pK,sortitems:()=>mK,stack:()=>hN});function oK(e){$.call(this,null,e)}ee(oK,$,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,s=Sy(o,a,e.minstep),c=e.format||tV(n,o,s,e.formatSpecifier,e.formatType,!!e.values),l=e.values?eV(o,e.values,s):Ey(o,s);return i&&(r.rem=i),i=l.map((u,f)=>lt({index:f/(l.length-1||1),value:u,label:c(u)})),e.extra&&i.length&&i.push(lt({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function aK(e){$.call(this,null,e)}function mxe(){return lt({})}function gxe(e){let t=a3().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ee(aK,$,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||mxe,o=e.key||De,a=this.value;return F(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&B("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=gxe(o)),t.visit(t.ADD,s=>{let c=o(s),l=a.get(c);l?l.exit?(a.empty--,r.add.push(l)):r.mod.push(l):(l=i(s),a.set(c,l),r.add.push(l)),l.datum=s,l.exit=!1}),t.visit(t.MOD,s=>{let c=o(s),l=a.get(c);l&&(l.datum=s,r.mod.push(l))}),t.visit(t.REM,s=>{let c=o(s),l=a.get(c);s===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}});function sK(e){$.call(this,null,e)}ee(sK,$,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(F(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var a=o==="enter",s=i.update||Fs,c=i.enter||Fs,l=i.exit||Fs,u=(o&&!a?i[o]:s)||Fs;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{c(f,e),s(f,e)}),n.modifies(c.output),n.modifies(s.output),u!==Fs&&u!==s&&(t.visit(t.ADD,f=>{u(f,e)}),n.modifies(u.output))),t.changed(t.REM)&&l!==Fs&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),a||u!==Fs){let f=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(f,d=>{let p=c(d,e)||r;(u(d,e)||p)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)):t.visit(f,d=>{(u(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)}return n.changed()?n:t.StopPropagation}});function cK(e){$.call(this,[],e)}ee(cK,$,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||d7,a=e.scale,s=+e.limit,c=Sy(a,e.count==null?5:e.count,e.minstep),l=!!e.values||o===d7,u=e.format||rV(n,a,c,o,e.formatSpecifier,e.formatType,l),f=e.values||nV(a,c),d,p,h,m,g;return i&&(r.rem=i),o===d7?(s&&f.length>s?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,s-1),g=!0):i=f,Ie(h=e.size)?(!e.values&&a(i[0])===0&&(i=i.slice(1)),m=i.reduce((v,y)=>Math.max(v,h(y,e)),0)):h=fn(m=h||8),i=i.map((v,y)=>lt({index:y,label:u(v,y,i),value:v,offset:m,size:h(v,e)})),g&&(g=f[i.length],i.push(lt({index:i.length,label:`\u2026${f.length-i.length} entries`,value:g,offset:m,size:h(g,e)})))):o===iX?(d=a.domain(),p=wy(a,d[0],Ye(d)),f.length<3&&!e.values&&d[0]!==Ye(d)&&(f=[d[0],Ye(d)]),i=f.map((v,y)=>lt({index:y,label:u(v,y,f),value:v,perc:p(v)}))):(h=f.length-1,p=sX(a),i=f.map((v,y)=>lt({index:y,label:u(v,y,f),value:v,perc:y?p(v):0,perc2:y===h?1:p(f[y+1])}))),r.source=i,r.add=i,this.value=i,r}});var vxe=e=>e.source.x,yxe=e=>e.source.y,xxe=e=>e.target.x,Cxe=e=>e.target.y;function dN(e){$.call(this,{},e)}dN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ee(dN,$,{transform(e,t){var n=e.sourceX||vxe,r=e.sourceY||yxe,i=e.targetX||xxe,o=e.targetY||Cxe,a=e.as||"path",s=e.orient||"vertical",c=e.shape||"line",l=nK.get(c+"-"+s)||nK.get(c);return l||B("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,u=>{u[a]=l(n(u),r(u),i(u),o(u))}),t.reflow(e.modified()).modifies(a)}});var lK=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,bxe=(e,t,n,r)=>lK(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),uK=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.hypot(i,o)/2,s=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+s+" 0 1 "+n+","+r},Mxe=(e,t,n,r)=>uK(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),fK=(e,t,n,r)=>{let i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},wxe=(e,t,n,r)=>fK(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Sxe=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,Exe=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,Dxe=(e,t,n,r)=>{let i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),c=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(c?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},zxe=(e,t,n,r)=>{let i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},Hxe=(e,t,n,r)=>{let i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},Lxe=(e,t,n,r)=>{let i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),c=(t+r)/2;return"M"+t*i+","+t*o+"C"+c*i+","+c*o+" "+c*a+","+c*s+" "+r*a+","+r*s},nK=a3({line:lK,"line-radial":bxe,arc:uK,"arc-radial":Mxe,curve:fK,"curve-radial":wxe,"orthogonal-horizontal":Sxe,"orthogonal-vertical":Exe,"orthogonal-radial":Dxe,"diagonal-horizontal":zxe,"diagonal-vertical":Hxe,"diagonal-radial":Lxe});function pN(e){$.call(this,null,e)}pN.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ee(pN,$,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||za,a=e.startAngle||0,s=e.endAngle!=null?e.endAngle:2*Math.PI,c=t.source,l=c.map(o),u=l.length,f=a,d=(s-a)/U6(l),p=On(u),h,m,g;for(e.sort&&p.sort((v,y)=>l[v]-l[y]),h=0;h<u;++h)g=l[p[h]],m=c[p[h]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});var Axe=5;function Vxe(e){let t=e.type;return!e.bins&&(t===El||t===mu||t===gu)}function dK(e){return l7(e)&&e!==C2}var Nxe=cr(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function pK(e){$.call(this,null,e),this.modified(!0)}ee(pK,$,{transform(e,t){var n=t.dataflow,r=this.value,i=_xe(e);(!r||i!==r.type)&&(this.value=r=pt(i)());for(i in e)if(!Nxe[i]){if(i==="padding"&&dK(r.type))continue;Ie(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Oxe(r,e,Rxe(r,e,Txe(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function _xe(e){var t=e.type,n="",r;return t===C2?C2+"-"+El:(kxe(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?C2+"-":r===3?Dl+"-":""),(n+t||El).toLowerCase())}function kxe(e){let t=e.type;return l7(t)&&t!==z3&&t!==H3&&(e.scheme||e.range&&e.range.length&&e.range.every(Q))}function Txe(e,t,n){let r=Ixe(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,a=t.zero||t.zero===void 0&&Vxe(e),s,c;if(!i)return 0;if(dK(o)&&t.padding&&i[0]!==Ye(i)&&(i=Fxe(o,i,t.range,t.padding,t.exponent,t.constant)),(a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(s=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[s]<0&&(i[s]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[s]=t.domainMax),t.domainMid!=null)){c=t.domainMid;let l=c>i[s]?s+1:c<i[0]?0:s;l!==s&&n.warn("Scale domainMid exceeds domain min or max.",c),i.splice(l,0,c)}return e.domain(hK(o,i,n)),o===vy&&e.unknown(t.domainImplicit?ou:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Sy(e,t.nice)||null),i.length}function Ixe(e,t,n){return t?(e.domain(hK(e.type,t,n)),t.length):-1}function Fxe(e,t,n,r,i,o){var a=Math.abs(Ye(n)-n[0]),s=a/(a-2*r),c=e===Pa?U5(t,null,s):e===gu?O6(t,null,s,.5):e===mu?O6(t,null,s,i||1):e===i7?j5(t,null,s,o||1):B5(t,null,s);return t=t.slice(),t[0]=c[0],t[t.length-1]=c[1],t}function hK(e,t,n){if(KA(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Z(t))}return t}function Rxe(e,t,n){let r=t.bins;if(r&&!F(r)){let i=e.domain(),o=i[0],a=Ye(i),s=r.step,c=r.start==null?o:r.start,l=r.stop==null?a:r.stop;s||B("Scale bins parameter missing step property."),c<o&&(c=s*Math.ceil(o/s)),l>a&&(l=s*Math.floor(a/s)),r=On(c,l+s/2,s)}return r?e.bins=r:e.bins&&delete e.bins,e.type===xy&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Oxe(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=Pxe(r,t,n);else if(t.scheme&&(o=$xe(r,t,n),Ie(o))){if(e.interpolator)return e.interpolator(o);B(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&ZA(r))return e.interpolator(vu(fN(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(u7(t.interpolate,t.interpolateGamma)):Ie(e.round)?e.round(i):Ie(e.rangeRound)&&e.interpolate(i?Ra:xi),o&&e.range(fN(o,t.reverse))}function Pxe(e,t,n){e!==qA&&e!==yy&&B("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===yy?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*r7(n,i,r)]}function $xe(e,t,n){var r=t.schemeExtent,i,o;return F(t.scheme)?o=vu(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=f7(i),o||B(`Unrecognized scheme name: ${t.scheme}`)),n=e===a7?n+1:e===xy?n-1:e===Sl||e===o7?+t.schemeCount||Axe:n,ZA(e)?rK(o,r,t.reverse):Ie(o)?My(rK(o,r),n):e===vy?o:o.slice(0,n)}function rK(e,t,n){return Ie(e)&&(t||n)?by(e,fN(t||[0,1],n)):e}function fN(e,t){return t?e.slice().reverse():e}function mK(e){$.call(this,null,e)}ee(mK,$,{transform(e,t){let n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(_a(e.sort)),this.modified(n),t}});var iK="zero",gK="center",vK="normalize",yK=["y0","y1"];function hN(e){$.call(this,null,e)}hN.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:iK,values:[iK,gK,vK]},{name:"as",type:"string",array:!0,length:2,default:yK}]};ee(hN,$,{transform(e,t){var n=e.as||yK,r=n[0],i=n[1],o=_a(e.sort),a=e.field||za,s=e.offset===gK?Bxe:e.offset===vK?Uxe:jxe,c,l,u,f;for(c=Gxe(t.source,e.groupby,o,a),l=0,u=c.length,f=c.max;l<u;++l)s(c[l],f,a,r,i);return t.reflow(e.modified()).modifies(n)}});function Bxe(e,t,n,r,i){for(var o=(t-e.sum)/2,a=e.length,s=0,c;s<a;++s)c=e[s],c[r]=o,c[i]=o+=Math.abs(n(c))}function Uxe(e,t,n,r,i){for(var o=1/e.sum,a=0,s=e.length,c=0,l=0,u;c<s;++c)u=e[c],u[r]=a,u[i]=a=o*(l+=Math.abs(n(u)))}function jxe(e,t,n,r,i){for(var o=0,a=0,s=e.length,c=0,l,u;c<s;++c)u=e[c],l=+n(u),l<0?(u[r]=a,u[i]=a+=l):(u[r]=o,u[i]=o+=l)}function Gxe(e,t,n,r){var i=[],o=m=>m(u),a,s,c,l,u,f,d,p,h;if(t==null)i.push(e.slice());else for(a={},s=0,c=e.length;s<c;++s)u=e[s],f=t.map(o),d=a[f],d||(a[f]=d=[],i.push(d)),d.push(u);for(f=0,h=0,l=i.length;f<l;++f){for(d=i[f],s=0,p=0,c=d.length;s<c;++s)p+=Math.abs(r(d[s]));d.sum=p,p>h&&(h=p),n&&d.sort(n)}return i.max=h,i}var __={};mr(__,{contour:()=>E_,geojson:()=>z_,geopath:()=>H_,geopoint:()=>L_,geoshape:()=>A_,graticule:()=>V_,heatmap:()=>N_,isocontour:()=>w_,kde2d:()=>S_,projection:()=>HZ});var ge=1e-6,Tl=1e-12,je=Math.PI,Ot=je/2,zu=je/4,Pn=je*2,Pt=180/je,$e=je/180,Oe=Math.abs,Oo=Math.atan,Ln=Math.atan2,me=Math.cos,T7=Math.ceil,sx=Math.exp;var cx=Math.hypot,Il=Math.log,lx=Math.pow,pe=Math.sin,wi=Math.sign||function(e){return e>0?1:e<0?-1:0},$t=Math.sqrt,Hu=Math.tan;function ux(e){return e>1?0:e<-1?je:Math.acos(e)}function sn(e){return e>1?Ot:e<-1?-Ot:Math.asin(e)}function cn(){}function fx(e,t){e&&CK.hasOwnProperty(e.type)&&CK[e.type](e,t)}var xK={Feature:function(e,t){fx(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)fx(n[r].geometry,t)}},CK={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){gN(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)gN(n[r],t,0)},Polygon:function(e,t){bK(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)bK(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)fx(n[r],t)}};function gN(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function bK(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)gN(e[n],t,1);t.polygonEnd()}function A1(e,t){e&&xK.hasOwnProperty(e.type)?xK[e.type](e,t):fx(e,t)}var I7=new dn,dx=new dn,MK,wK,vN,yN,xN,D2={point:cn,lineStart:cn,lineEnd:cn,polygonStart:function(){I7=new dn,D2.lineStart=qxe,D2.lineEnd=Wxe},polygonEnd:function(){var e=+I7;dx.add(e<0?Pn+e:e),this.lineStart=this.lineEnd=this.point=cn},sphere:function(){dx.add(Pn)}};function qxe(){D2.point=Yxe}function Wxe(){SK(MK,wK)}function Yxe(e,t){D2.point=SK,MK=e,wK=t,e*=$e,t*=$e,vN=e,yN=me(t=t/2+zu),xN=pe(t)}function SK(e,t){e*=$e,t*=$e,t=t/2+zu;var n=e-vN,r=n>=0?1:-1,i=r*n,o=me(t),a=pe(t),s=xN*a,c=yN*o+s*me(i),l=s*r*pe(i);I7.add(Ln(l,c)),vN=e,yN=o,xN=a}function CN(e){return dx=new dn,A1(e,D2),dx*2}function Fl(e){return[Ln(e[1],e[0]),sn(e[2])]}function Po(e){var t=e[0],n=e[1],r=me(n);return[r*me(t),r*pe(t),pe(n)]}function F7(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ic(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function px(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function R7(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Rl(e){var t=$t(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var yn,V1,An,io,Ol,HK,LK,Lu,O7,B3,ac,oc={point:bN,lineStart:EK,lineEnd:DK,polygonStart:function(){oc.point=VK,oc.lineStart=Xxe,oc.lineEnd=Qxe,O7=new dn,D2.polygonStart()},polygonEnd:function(){D2.polygonEnd(),oc.point=bN,oc.lineStart=EK,oc.lineEnd=DK,I7<0?(yn=-(An=180),V1=-(io=90)):O7>ge?io=90:O7<-ge&&(V1=-90),ac[0]=yn,ac[1]=An},sphere:function(){yn=-(An=180),V1=-(io=90)}};function bN(e,t){B3.push(ac=[yn=e,An=e]),t<V1&&(V1=t),t>io&&(io=t)}function AK(e,t){var n=Po([e*$e,t*$e]);if(Lu){var r=ic(Lu,n),i=[r[1],-r[0],0],o=ic(i,r);Rl(o),o=Fl(o);var a=e-Ol,s=a>0?1:-1,c=o[0]*Pt*s,l,u=Oe(a)>180;u^(s*Ol<c&&c<s*e)?(l=o[1]*Pt,l>io&&(io=l)):(c=(c+360)%360-180,u^(s*Ol<c&&c<s*e)?(l=-o[1]*Pt,l<V1&&(V1=l)):(t<V1&&(V1=t),t>io&&(io=t))),u?e<Ol?ro(yn,e)>ro(yn,An)&&(An=e):ro(e,An)>ro(yn,An)&&(yn=e):An>=yn?(e<yn&&(yn=e),e>An&&(An=e)):e>Ol?ro(yn,e)>ro(yn,An)&&(An=e):ro(e,An)>ro(yn,An)&&(yn=e)}else B3.push(ac=[yn=e,An=e]);t<V1&&(V1=t),t>io&&(io=t),Lu=n,Ol=e}function EK(){oc.point=AK}function DK(){ac[0]=yn,ac[1]=An,oc.point=bN,Lu=null}function VK(e,t){if(Lu){var n=e-Ol;O7.add(Oe(n)>180?n+(n>0?360:-360):n)}else HK=e,LK=t;D2.point(e,t),AK(e,t)}function Xxe(){D2.lineStart()}function Qxe(){VK(HK,LK),D2.lineEnd(),Oe(O7)>ge&&(yn=-(An=180)),ac[0]=yn,ac[1]=An,Lu=null}function ro(e,t){return(t-=e)<0?t+360:t}function Kxe(e,t){return e[0]-t[0]}function zK(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function MN(e){var t,n,r,i,o,a,s;if(io=An=-(yn=V1=1/0),B3=[],A1(e,oc),n=B3.length){for(B3.sort(Kxe),t=1,r=B3[0],o=[r];t<n;++t)i=B3[t],zK(r,i[0])||zK(r,i[1])?(ro(r[0],i[1])>ro(r[0],r[1])&&(r[1]=i[1]),ro(i[0],r[1])>ro(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(s=ro(r[1],i[0]))>a&&(a=s,yn=i[0],An=r[1])}return B3=ac=null,yn===1/0||V1===1/0?[[NaN,NaN],[NaN,NaN]]:[[yn,V1],[An,io]]}var P7,hx,mx,gx,vx,yx,xx,Cx,wN,SN,EN,kK,TK,t1,n1,r1,z2={sphere:cn,point:DN,lineStart:NK,lineEnd:_K,polygonStart:function(){z2.lineStart=eCe,z2.lineEnd=tCe},polygonEnd:function(){z2.lineStart=NK,z2.lineEnd=_K}};function DN(e,t){e*=$e,t*=$e;var n=me(t);$7(n*me(e),n*pe(e),pe(t))}function $7(e,t,n){++P7,mx+=(e-mx)/P7,gx+=(t-gx)/P7,vx+=(n-vx)/P7}function NK(){z2.point=Zxe}function Zxe(e,t){e*=$e,t*=$e;var n=me(t);t1=n*me(e),n1=n*pe(e),r1=pe(t),z2.point=Jxe,$7(t1,n1,r1)}function Jxe(e,t){e*=$e,t*=$e;var n=me(t),r=n*me(e),i=n*pe(e),o=pe(t),a=Ln($t((a=n1*o-r1*i)*a+(a=r1*r-t1*o)*a+(a=t1*i-n1*r)*a),t1*r+n1*i+r1*o);hx+=a,yx+=a*(t1+(t1=r)),xx+=a*(n1+(n1=i)),Cx+=a*(r1+(r1=o)),$7(t1,n1,r1)}function _K(){z2.point=DN}function eCe(){z2.point=nCe}function tCe(){IK(kK,TK),z2.point=DN}function nCe(e,t){kK=e,TK=t,e*=$e,t*=$e,z2.point=IK;var n=me(t);t1=n*me(e),n1=n*pe(e),r1=pe(t),$7(t1,n1,r1)}function IK(e,t){e*=$e,t*=$e;var n=me(t),r=n*me(e),i=n*pe(e),o=pe(t),a=n1*o-r1*i,s=r1*r-t1*o,c=t1*i-n1*r,l=cx(a,s,c),u=sn(l),f=l&&-u/l;wN.add(f*a),SN.add(f*s),EN.add(f*c),hx+=u,yx+=u*(t1+(t1=r)),xx+=u*(n1+(n1=i)),Cx+=u*(r1+(r1=o)),$7(t1,n1,r1)}function zN(e){P7=hx=mx=gx=vx=yx=xx=Cx=0,wN=new dn,SN=new dn,EN=new dn,A1(e,z2);var t=+wN,n=+SN,r=+EN,i=cx(t,n,r);return i<Tl&&(t=yx,n=xx,r=Cx,hx<ge&&(t=mx,n=gx,r=vx),i=cx(t,n,r),i<Tl)?[NaN,NaN]:[Ln(n,t)*Pt,sn(r/i)*Pt]}function B7(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function HN(e,t){return Oe(e)>je&&(e-=Math.round(e/Pn)*Pn),[e,t]}HN.invert=HN;function LN(e,t,n){return(e%=Pn)?t||n?B7(RK(e),OK(t,n)):RK(e):t||n?OK(t,n):HN}function FK(e){return function(t,n){return t+=e,Oe(t)>je&&(t-=Math.round(t/Pn)*Pn),[t,n]}}function RK(e){var t=FK(e);return t.invert=FK(-e),t}function OK(e,t){var n=me(e),r=pe(e),i=me(t),o=pe(t);function a(s,c){var l=me(c),u=me(s)*l,f=pe(s)*l,d=pe(c),p=d*n+u*r;return[Ln(f*i-p*o,u*n-d*r),sn(p*i+f*o)]}return a.invert=function(s,c){var l=me(c),u=me(s)*l,f=pe(s)*l,d=pe(c),p=d*i-f*o;return[Ln(f*i+d*o,u*n+p*r),sn(p*n-u*r)]},a}function PK(e){e=LN(e[0]*$e,e[1]*$e,e.length>2?e[2]*$e:0);function t(n){return n=e(n[0]*$e,n[1]*$e),n[0]*=Pt,n[1]*=Pt,n}return t.invert=function(n){return n=e.invert(n[0]*$e,n[1]*$e),n[0]*=Pt,n[1]*=Pt,n},t}function BK(e,t,n,r,i,o){if(n){var a=me(t),s=pe(t),c=r*n;i==null?(i=t+r*Pn,o=t-c/2):(i=$K(a,i),o=$K(a,o),(r>0?i<o:i>o)&&(i+=r*Pn));for(var l,u=i;r>0?u>o:u<o;u-=c)l=Fl([a,-s*me(u),-s*pe(u)]),e.point(l[0],l[1])}}function $K(e,t){t=Po(t),t[0]-=e,Rl(t);var n=ux(-t[1]);return((-t[2]<0?-n:n)+Pn-ge)%Pn}function bx(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:cn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Au(e,t){return Oe(e[0]-t[0])<ge&&Oe(e[1]-t[1])<ge}function Mx(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function wx(e,t,n,r,i){var o=[],a=[],s,c;if(e.forEach(function(h){if(!((m=h.length-1)<=0)){var m,g=h[0],v=h[m],y;if(Au(g,v)){if(!g[2]&&!v[2]){for(i.lineStart(),s=0;s<m;++s)i.point((g=h[s])[0],g[1]);i.lineEnd();return}v[0]+=2*ge}o.push(y=new Mx(g,h,null,!0)),a.push(y.o=new Mx(g,null,y,!1)),o.push(y=new Mx(v,h,null,!1)),a.push(y.o=new Mx(v,null,y,!0))}}),!!o.length){for(a.sort(t),UK(o),UK(a),s=0,c=a.length;s<c;++s)a[s].e=n=!n;for(var l=o[0],u,f;;){for(var d=l,p=!0;d.v;)if((d=d.n)===l)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,c=u.length;s<c;++s)i.point((f=u[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(u=d.p.z,s=u.length-1;s>=0;--s)i.point((f=u[s])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,u=d.z,p=!p}while(!d.v);i.lineEnd()}}}function UK(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function AN(e){return Oe(e[0])<=je?e[0]:wi(e[0])*((Oe(e[0])+je)%Pn-je)}function jK(e,t){var n=AN(t),r=t[1],i=pe(r),o=[pe(n),-me(n),0],a=0,s=0,c=new dn;i===1?r=Ot+ge:i===-1&&(r=-Ot-ge);for(var l=0,u=e.length;l<u;++l)if(d=(f=e[l]).length)for(var f,d,p=f[d-1],h=AN(p),m=p[1]/2+zu,g=pe(m),v=me(m),y=0;y<d;++y,h=b,g=S,v=w,p=C){var C=f[y],b=AN(C),M=C[1]/2+zu,S=pe(M),w=me(M),E=b-h,D=E>=0?1:-1,z=D*E,L=z>je,G=g*S;if(c.add(Ln(G*D*pe(z),v*w+G*me(z))),a+=L?E+D*Pn:E,L^h>=n^b>=n){var A=ic(Po(p),Po(C));Rl(A);var _=ic(o,A);Rl(_);var V=(L^E>=0?-1:1)*sn(_[2]);(r>V||r===V&&(A[0]||A[1]))&&(s+=L^E>=0?1:-1)}}return(a<-ge||a<ge&&c<-Tl)^s&1}function Sx(e,t,n,r){return function(i){var o=t(i),a=bx(),s=t(a),c=!1,l,u,f,d={point:p,lineStart:m,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=C,u=[],l=[]},polygonEnd:function(){d.point=p,d.lineStart=m,d.lineEnd=g,u=B6(u);var b=jK(l,r);u.length?(c||(i.polygonStart(),c=!0),wx(u,iCe,b,n,i)):b&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),u=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(b,M){e(b,M)&&i.point(b,M)}function h(b,M){o.point(b,M)}function m(){d.point=h,o.lineStart()}function g(){d.point=p,o.lineEnd()}function v(b,M){f.push([b,M]),s.point(b,M)}function y(){s.lineStart(),f=[]}function C(){v(f[0][0],f[0][1]),s.lineEnd();var b=s.clean(),M=a.result(),S,w=M.length,E,D,z;if(f.pop(),l.push(f),f=null,!!w){if(b&1){if(D=M[0],(E=D.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),S=0;S<E;++S)i.point((z=D[S])[0],z[1]);i.lineEnd()}return}w>1&&b&2&&M.push(M.pop().concat(M.shift())),u.push(M.filter(rCe))}}return d}}function rCe(e){return e.length>1}function iCe(e,t){return((e=e.x)[0]<0?e[1]-Ot-ge:Ot-e[1])-((t=t.x)[0]<0?t[1]-Ot-ge:Ot-t[1])}var VN=Sx(function(){return!0},oCe,sCe,[-je,-Ot]);function oCe(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var s=o>0?je:-je,c=Oe(o-t);Oe(c-je)<ge?(e.point(t,n=(n+a)/2>0?Ot:-Ot),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),i=0):r!==s&&c>=je&&(Oe(t-r)<ge&&(t-=r*ge),Oe(o-s)<ge&&(o-=s*ge),n=aCe(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=o,n=a),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function aCe(e,t,n,r){var i,o,a=pe(e-n);return Oe(a)>ge?Oo((pe(t)*(o=me(r))*pe(n)-pe(r)*(i=me(t))*pe(e))/(i*o*a)):(t+r)/2}function sCe(e,t,n,r){var i;if(e==null)i=n*Ot,r.point(-je,i),r.point(0,i),r.point(je,i),r.point(je,0),r.point(je,-i),r.point(0,-i),r.point(-je,-i),r.point(-je,0),r.point(-je,i);else if(Oe(e[0]-t[0])>ge){var o=e[0]<t[0]?je:-je;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function GK(e){var t=me(e),n=6*$e,r=t>0,i=Oe(t)>ge;function o(u,f,d,p){BK(p,e,n,d,u,f)}function a(u,f){return me(u)*me(f)>t}function s(u){var f,d,p,h,m;return{lineStart:function(){h=p=!1,m=1},point:function(g,v){var y=[g,v],C,b=a(g,v),M=r?b?0:l(g,v):b?l(g+(g<0?je:-je),v):0;if(!f&&(h=p=b)&&u.lineStart(),b!==p&&(C=c(f,y),(!C||Au(f,C)||Au(y,C))&&(y[2]=1)),b!==p)m=0,b?(u.lineStart(),C=c(y,f),u.point(C[0],C[1])):(C=c(f,y),u.point(C[0],C[1],2),u.lineEnd()),f=C;else if(i&&f&&r^b){var S;!(M&d)&&(S=c(y,f,!0))&&(m=0,r?(u.lineStart(),u.point(S[0][0],S[0][1]),u.point(S[1][0],S[1][1]),u.lineEnd()):(u.point(S[1][0],S[1][1]),u.lineEnd(),u.lineStart(),u.point(S[0][0],S[0][1],3)))}b&&(!f||!Au(f,y))&&u.point(y[0],y[1]),f=y,p=b,d=M},lineEnd:function(){p&&u.lineEnd(),f=null},clean:function(){return m|(h&&p)<<1}}}function c(u,f,d){var p=Po(u),h=Po(f),m=[1,0,0],g=ic(p,h),v=F7(g,g),y=g[0],C=v-y*y;if(!C)return!d&&u;var b=t*v/C,M=-t*y/C,S=ic(m,g),w=R7(m,b),E=R7(g,M);px(w,E);var D=S,z=F7(w,D),L=F7(D,D),G=z*z-L*(F7(w,w)-1);if(!(G<0)){var A=$t(G),_=R7(D,(-z-A)/L);if(px(_,w),_=Fl(_),!d)return _;var V=u[0],I=f[0],W=u[1],X=f[1],J;I<V&&(J=V,V=I,I=J);var Se=I-V,Ee=Oe(Se-je)<ge,Je=Ee||Se<ge;if(!Ee&&X<W&&(J=W,W=X,X=J),Je?Ee?W+X>0^_[1]<(Oe(_[0]-V)<ge?W:X):W<=_[1]&&_[1]<=X:Se>je^(V<=_[0]&&_[0]<=I)){var Dt=R7(D,(-z+A)/L);return px(Dt,w),[_,Fl(Dt)]}}}function l(u,f){var d=r?e:je-e,p=0;return u<-d?p|=1:u>d&&(p|=2),f<-d?p|=4:f>d&&(p|=8),p}return Sx(a,s,o,r?[0,-e]:[-je,e-je])}function qK(e,t,n,r,i,o){var a=e[0],s=e[1],c=t[0],l=t[1],u=0,f=1,d=c-a,p=l-s,h;if(h=n-a,!(!d&&h>0)){if(h/=d,d<0){if(h<u)return;h<f&&(f=h)}else if(d>0){if(h>f)return;h>u&&(u=h)}if(h=i-a,!(!d&&h<0)){if(h/=d,d<0){if(h>f)return;h>u&&(u=h)}else if(d>0){if(h<u)return;h<f&&(f=h)}if(h=r-s,!(!p&&h>0)){if(h/=p,p<0){if(h<u)return;h<f&&(f=h)}else if(p>0){if(h>f)return;h>u&&(u=h)}if(h=o-s,!(!p&&h<0)){if(h/=p,p<0){if(h>f)return;h>u&&(u=h)}else if(p>0){if(h<u)return;h<f&&(f=h)}return u>0&&(e[0]=a+u*d,e[1]=s+u*p),f<1&&(t[0]=a+f*d,t[1]=s+f*p),!0}}}}}var U7=1e9,Ex=-U7;function j7(e,t,n,r){function i(l,u){return e<=l&&l<=n&&t<=u&&u<=r}function o(l,u,f,d){var p=0,h=0;if(l==null||(p=a(l,f))!==(h=a(u,f))||c(l,u)<0^f>0)do d.point(p===0||p===3?e:n,p>1?r:t);while((p=(p+f+4)%4)!==h);else d.point(u[0],u[1])}function a(l,u){return Oe(l[0]-e)<ge?u>0?0:3:Oe(l[0]-n)<ge?u>0?2:1:Oe(l[1]-t)<ge?u>0?1:0:u>0?3:2}function s(l,u){return c(l.x,u.x)}function c(l,u){var f=a(l,1),d=a(u,1);return f!==d?f-d:f===0?u[1]-l[1]:f===1?l[0]-u[0]:f===2?l[1]-u[1]:u[0]-l[0]}return function(l){var u=l,f=bx(),d,p,h,m,g,v,y,C,b,M,S,w={point:E,lineStart:G,lineEnd:A,polygonStart:z,polygonEnd:L};function E(V,I){i(V,I)&&u.point(V,I)}function D(){for(var V=0,I=0,W=p.length;I<W;++I)for(var X=p[I],J=1,Se=X.length,Ee=X[0],Je,Dt,ut=Ee[0],Qt=Ee[1];J<Se;++J)Je=ut,Dt=Qt,Ee=X[J],ut=Ee[0],Qt=Ee[1],Dt<=r?Qt>r&&(ut-Je)*(r-Dt)>(Qt-Dt)*(e-Je)&&++V:Qt<=r&&(ut-Je)*(r-Dt)<(Qt-Dt)*(e-Je)&&--V;return V}function z(){u=f,d=[],p=[],S=!0}function L(){var V=D(),I=S&&V,W=(d=B6(d)).length;(I||W)&&(l.polygonStart(),I&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),W&&wx(d,s,V,o,l),l.polygonEnd()),u=l,d=p=h=null}function G(){w.point=_,p&&p.push(h=[]),M=!0,b=!1,y=C=NaN}function A(){d&&(_(m,g),v&&b&&f.rejoin(),d.push(f.result())),w.point=E,b&&u.lineEnd()}function _(V,I){var W=i(V,I);if(p&&h.push([V,I]),M)m=V,g=I,v=W,M=!1,W&&(u.lineStart(),u.point(V,I));else if(W&&b)u.point(V,I);else{var X=[y=Math.max(Ex,Math.min(U7,y)),C=Math.max(Ex,Math.min(U7,C))],J=[V=Math.max(Ex,Math.min(U7,V)),I=Math.max(Ex,Math.min(U7,I))];qK(X,J,e,t,n,r)?(b||(u.lineStart(),u.point(X[0],X[1])),u.point(J[0],J[1]),W||u.lineEnd(),S=!1):W&&(u.lineStart(),u.point(V,I),S=!1)}y=V,C=I,b=W}return w}}function WK(e,t,n){var r=On(e,t-ge,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function YK(e,t,n){var r=On(e,t-ge,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function Dx(){var e,t,n,r,i,o,a,s,c=10,l=c,u=90,f=360,d,p,h,m,g=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return On(T7(r/u)*u,n,u).map(h).concat(On(T7(s/f)*f,a,f).map(m)).concat(On(T7(t/c)*c,e,c).filter(function(C){return Oe(C%u)>ge}).map(d)).concat(On(T7(o/l)*l,i,l).filter(function(C){return Oe(C%f)>ge}).map(p))}return v.lines=function(){return y().map(function(C){return{type:"LineString",coordinates:C}})},v.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(m(a).slice(1),h(n).reverse().slice(1),m(s).reverse().slice(1))]}},v.extent=function(C){return arguments.length?v.extentMajor(C).extentMinor(C):v.extentMinor()},v.extentMajor=function(C){return arguments.length?(r=+C[0][0],n=+C[1][0],s=+C[0][1],a=+C[1][1],r>n&&(C=r,r=n,n=C),s>a&&(C=s,s=a,a=C),v.precision(g)):[[r,s],[n,a]]},v.extentMinor=function(C){return arguments.length?(t=+C[0][0],e=+C[1][0],o=+C[0][1],i=+C[1][1],t>e&&(C=t,t=e,e=C),o>i&&(C=o,o=i,i=C),v.precision(g)):[[t,o],[e,i]]},v.step=function(C){return arguments.length?v.stepMajor(C).stepMinor(C):v.stepMinor()},v.stepMajor=function(C){return arguments.length?(u=+C[0],f=+C[1],v):[u,f]},v.stepMinor=function(C){return arguments.length?(c=+C[0],l=+C[1],v):[c,l]},v.precision=function(C){return arguments.length?(g=+C,d=WK(o,i,90),p=YK(t,e,g),h=WK(s,a,90),m=YK(r,n,g),v):g},v.extentMajor([[-180,-90+ge],[180,90-ge]]).extentMinor([[-180,-80-ge],[180,80+ge]])}var U3=e=>e;var NN=new dn,_N=new dn,XK,QK,kN,TN,j3={point:cn,lineStart:cn,lineEnd:cn,polygonStart:function(){j3.lineStart=cCe,j3.lineEnd=uCe},polygonEnd:function(){j3.lineStart=j3.lineEnd=j3.point=cn,NN.add(Oe(_N)),_N=new dn},result:function(){var e=NN/2;return NN=new dn,e}};function cCe(){j3.point=lCe}function lCe(e,t){j3.point=KK,XK=kN=e,QK=TN=t}function KK(e,t){_N.add(TN*e-kN*t),kN=e,TN=t}function uCe(){KK(XK,QK)}var IN=j3;var Vu=1/0,zx=Vu,G7=-Vu,Hx=G7,fCe={point:dCe,lineStart:cn,lineEnd:cn,polygonStart:cn,polygonEnd:cn,result:function(){var e=[[Vu,zx],[G7,Hx]];return G7=Hx=-(zx=Vu=1/0),e}};function dCe(e,t){e<Vu&&(Vu=e),e>G7&&(G7=e),t<zx&&(zx=t),t>Hx&&(Hx=t)}var Nu=fCe;var FN=0,RN=0,q7=0,Lx=0,Ax=0,_u=0,ON=0,PN=0,W7=0,eZ,tZ,Ga,qa,H2={point:Pl,lineStart:ZK,lineEnd:JK,polygonStart:function(){H2.lineStart=mCe,H2.lineEnd=gCe},polygonEnd:function(){H2.point=Pl,H2.lineStart=ZK,H2.lineEnd=JK},result:function(){var e=W7?[ON/W7,PN/W7]:_u?[Lx/_u,Ax/_u]:q7?[FN/q7,RN/q7]:[NaN,NaN];return FN=RN=q7=Lx=Ax=_u=ON=PN=W7=0,e}};function Pl(e,t){FN+=e,RN+=t,++q7}function ZK(){H2.point=pCe}function pCe(e,t){H2.point=hCe,Pl(Ga=e,qa=t)}function hCe(e,t){var n=e-Ga,r=t-qa,i=$t(n*n+r*r);Lx+=i*(Ga+e)/2,Ax+=i*(qa+t)/2,_u+=i,Pl(Ga=e,qa=t)}function JK(){H2.point=Pl}function mCe(){H2.point=vCe}function gCe(){nZ(eZ,tZ)}function vCe(e,t){H2.point=nZ,Pl(eZ=Ga=e,tZ=qa=t)}function nZ(e,t){var n=e-Ga,r=t-qa,i=$t(n*n+r*r);Lx+=i*(Ga+e)/2,Ax+=i*(qa+t)/2,_u+=i,i=qa*e-Ga*t,ON+=i*(Ga+e),PN+=i*(qa+t),W7+=i*3,Pl(Ga=e,qa=t)}var $N=H2;function Vx(e){this._context=e}Vx.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Pn);break}}},result:cn};var UN=new dn,BN,rZ,iZ,Y7,X7,Nx={point:cn,lineStart:function(){Nx.point=yCe},lineEnd:function(){BN&&oZ(rZ,iZ),Nx.point=cn},polygonStart:function(){BN=!0},polygonEnd:function(){BN=null},result:function(){var e=+UN;return UN=new dn,e}};function yCe(e,t){Nx.point=oZ,rZ=Y7=e,iZ=X7=t}function oZ(e,t){Y7-=e,X7-=t,UN.add($t(Y7*Y7+X7*X7)),Y7=e,X7=t}var jN=Nx;var aZ,_x,sZ,cZ,Q7=class{constructor(t){this._append=t==null?lZ:xCe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==sZ||this._append!==_x){let r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,sZ=r,_x=this._append,cZ=this._,this._=i}this._+=cZ;break}}}result(){let t=this._;return this._="",t.length?t:null}};function lZ(e){let t=1;this._+=e[0];for(let n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function xCe(e){let t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return lZ;if(t!==aZ){let n=10**t;aZ=t,_x=function(i){let o=1;this._+=i[0];for(let a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return _x}function kx(e,t){let n=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),A1(s,i(o))),o.result()}return a.area=function(s){return A1(s,i(IN)),IN.result()},a.measure=function(s){return A1(s,i(jN)),jN.result()},a.bounds=function(s){return A1(s,i(Nu)),Nu.result()},a.centroid=function(s){return A1(s,i($N)),$N.result()},a.projection=function(s){return arguments.length?(i=s==null?(e=null,U3):(e=s).stream,a):e},a.context=function(s){return arguments.length?(o=s==null?(t=null,new Q7(n)):new Vx(t=s),typeof r!="function"&&o.pointRadius(r),a):t},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{let c=Math.floor(s);if(!(c>=0))throw new RangeError(`invalid digits: ${s}`);n=c}return t===null&&(o=new Q7(n)),a},a.projection(e).digits(n).context(t)}function $l(e){return function(t){var n=new GN;for(var r in e)n[r]=e[r];return n.stream=t,n}}function GN(){}GN.prototype={constructor:GN,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function qN(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),A1(n,e.stream(Nu)),t(Nu.result()),r!=null&&e.clipExtent(r),e}function Bl(e,t,n){return qN(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,c=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,c])},n)}function ku(e,t,n){return Bl(e,[[0,0],t],n)}function Tu(e,t,n){return qN(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];e.scale(150*o).translate([a,s])},n)}function Iu(e,t,n){return qN(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,s])},n)}var uZ=16,CCe=me(30*$e);function WN(e,t){return+t?MCe(e,t):bCe(e)}function bCe(e){return $l({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function MCe(e,t){function n(r,i,o,a,s,c,l,u,f,d,p,h,m,g){var v=l-r,y=u-i,C=v*v+y*y;if(C>4*t&&m--){var b=a+d,M=s+p,S=c+h,w=$t(b*b+M*M+S*S),E=sn(S/=w),D=Oe(Oe(S)-1)<ge||Oe(o-f)<ge?(o+f)/2:Ln(M,b),z=e(D,E),L=z[0],G=z[1],A=L-r,_=G-i,V=y*A-v*_;(V*V/C>t||Oe((v*A+y*_)/C-.5)>.3||a*d+s*p+c*h<CCe)&&(n(r,i,o,a,s,c,L,G,D,b/=w,M/=w,S,m,g),g.point(L,G),n(L,G,D,b,M,S,l,u,f,d,p,h,m,g))}}return function(r){var i,o,a,s,c,l,u,f,d,p,h,m,g={point:v,lineStart:y,lineEnd:b,polygonStart:function(){r.polygonStart(),g.lineStart=M},polygonEnd:function(){r.polygonEnd(),g.lineStart=y}};function v(E,D){E=e(E,D),r.point(E[0],E[1])}function y(){f=NaN,g.point=C,r.lineStart()}function C(E,D){var z=Po([E,D]),L=e(E,D);n(f,d,u,p,h,m,f=L[0],d=L[1],u=E,p=z[0],h=z[1],m=z[2],uZ,r),r.point(f,d)}function b(){g.point=v,r.lineEnd()}function M(){y(),g.point=S,g.lineEnd=w}function S(E,D){C(i=E,D),o=f,a=d,s=p,c=h,l=m,g.point=C}function w(){n(f,d,u,p,h,m,o,a,i,s,c,l,uZ,r),g.lineEnd=b,b()}return g}}var wCe=$l({point:function(e,t){this.stream.point(e*$e,t*$e)}});function SCe(e){return $l({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function ECe(e,t,n,r,i){function o(a,s){return a*=r,s*=i,[t+e*a,n-e*s]}return o.invert=function(a,s){return[(a-t)/e*r,(n-s)/e*i]},o}function fZ(e,t,n,r,i,o){if(!o)return ECe(e,t,n,r,i);var a=me(o),s=pe(o),c=a*e,l=s*e,u=a/e,f=s/e,d=(s*n-a*t)/e,p=(s*t+a*n)/e;function h(m,g){return m*=r,g*=i,[c*m-l*g+t,n-l*m-c*g]}return h.invert=function(m,g){return[r*(u*m-f*g+d),i*(p-f*m-u*g)]},h}function Vn(e){return Tx(function(){return e})()}function Tx(e){var t,n=150,r=480,i=250,o=0,a=0,s=0,c=0,l=0,u,f=0,d=1,p=1,h=null,m=VN,g=null,v,y,C,b=U3,M=.5,S,w,E,D,z;function L(V){return E(V[0]*$e,V[1]*$e)}function G(V){return V=E.invert(V[0],V[1]),V&&[V[0]*Pt,V[1]*Pt]}L.stream=function(V){return D&&z===V?D:D=wCe(SCe(u)(m(S(b(z=V)))))},L.preclip=function(V){return arguments.length?(m=V,h=void 0,_()):m},L.postclip=function(V){return arguments.length?(b=V,g=v=y=C=null,_()):b},L.clipAngle=function(V){return arguments.length?(m=+V?GK(h=V*$e):(h=null,VN),_()):h*Pt},L.clipExtent=function(V){return arguments.length?(b=V==null?(g=v=y=C=null,U3):j7(g=+V[0][0],v=+V[0][1],y=+V[1][0],C=+V[1][1]),_()):g==null?null:[[g,v],[y,C]]},L.scale=function(V){return arguments.length?(n=+V,A()):n},L.translate=function(V){return arguments.length?(r=+V[0],i=+V[1],A()):[r,i]},L.center=function(V){return arguments.length?(o=V[0]%360*$e,a=V[1]%360*$e,A()):[o*Pt,a*Pt]},L.rotate=function(V){return arguments.length?(s=V[0]%360*$e,c=V[1]%360*$e,l=V.length>2?V[2]%360*$e:0,A()):[s*Pt,c*Pt,l*Pt]},L.angle=function(V){return arguments.length?(f=V%360*$e,A()):f*Pt},L.reflectX=function(V){return arguments.length?(d=V?-1:1,A()):d<0},L.reflectY=function(V){return arguments.length?(p=V?-1:1,A()):p<0},L.precision=function(V){return arguments.length?(S=WN(w,M=V*V),_()):$t(M)},L.fitExtent=function(V,I){return Bl(L,V,I)},L.fitSize=function(V,I){return ku(L,V,I)},L.fitWidth=function(V,I){return Tu(L,V,I)},L.fitHeight=function(V,I){return Iu(L,V,I)};function A(){var V=fZ(n,0,0,d,p,f).apply(null,t(o,a)),I=fZ(n,r-V[0],i-V[1],d,p,f);return u=LN(s,c,l),w=B7(t,I),E=B7(u,w),S=WN(w,M),_()}function _(){return D=z=null,L}return function(){return t=e.apply(this,arguments),L.invert=t.invert&&G,A()}}function Fu(e){var t=0,n=je/3,r=Tx(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*$e,n=o[1]*$e):[t*Pt,n*Pt]},i}function dZ(e){var t=me(e);function n(r,i){return[r*t,pe(i)/t]}return n.invert=function(r,i){return[r/t,sn(i*t)]},n}function pZ(e,t){var n=pe(e),r=(n+pe(t))/2;if(Oe(r)<ge)return dZ(e);var i=1+n*(2*r-n),o=$t(i)/r;function a(s,c){var l=$t(i-2*r*pe(c))/r;return[l*pe(s*=r),o-l*me(s)]}return a.invert=function(s,c){var l=o-c,u=Ln(s,Oe(l))*wi(l);return l*r<0&&(u-=je*wi(s)*wi(l)),[u/r,sn((i-(s*s+l*l)*r*r)/(2*r))]},a}function G3(){return Fu(pZ).scale(155.424).center([0,33.6442])}function K7(){return G3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function DCe(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function YN(){var e,t,n=K7(),r,i=G3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=G3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,c,l={point:function(d,p){c=[d,p]}};function u(d){var p=d[0],h=d[1];return c=null,r.point(p,h),c||(o.point(p,h),c)||(s.point(p,h),c)}u.invert=function(d){var p=n.scale(),h=n.translate(),m=(d[0]-h[0])/p,g=(d[1]-h[1])/p;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(d)},u.stream=function(d){return e&&t===d?e:e=DCe([n.stream(t=d),i.stream(d),a.stream(d)])},u.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),a.precision(d),f()):n.precision()},u.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),a.scale(d),u.translate(n.translate())):n.scale()},u.translate=function(d){if(!arguments.length)return n.translate();var p=n.scale(),h=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[h-.455*p,m-.238*p],[h+.455*p,m+.238*p]]).stream(l),o=i.translate([h-.307*p,m+.201*p]).clipExtent([[h-.425*p+ge,m+.12*p+ge],[h-.214*p-ge,m+.234*p-ge]]).stream(l),s=a.translate([h-.205*p,m+.212*p]).clipExtent([[h-.214*p+ge,m+.166*p+ge],[h-.115*p-ge,m+.234*p-ge]]).stream(l),f()},u.fitExtent=function(d,p){return Bl(u,d,p)},u.fitSize=function(d,p){return ku(u,d,p)},u.fitWidth=function(d,p){return Tu(u,d,p)},u.fitHeight=function(d,p){return Iu(u,d,p)};function f(){return e=t=null,u}return u.scale(1070)}function Ix(e){return function(t,n){var r=me(t),i=me(n),o=e(r*i);return o===1/0?[2,0]:[o*i*pe(t),o*pe(n)]}}function Wa(e){return function(t,n){var r=$t(t*t+n*n),i=e(r),o=pe(i),a=me(i);return[Ln(t*o,r*a),sn(r&&n*o/r)]}}var XN=Ix(function(e){return $t(2/(1+e))});XN.invert=Wa(function(e){return 2*sn(e/2)});function QN(){return Vn(XN).scale(124.75).clipAngle(180-.001)}var KN=Ix(function(e){return(e=ux(e))&&e/pe(e)});KN.invert=Wa(function(e){return e});function ZN(){return Vn(KN).scale(79.4188).clipAngle(180-.001)}function Ru(e,t){return[e,Il(Hu((Ot+t)/2))]}Ru.invert=function(e,t){return[e,2*Oo(sx(t))-Ot]};function JN(){return e_(Ru).scale(961/Pn)}function e_(e){var t=Vn(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,s,c,l;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?a=s=c=l=null:(a=+f[0][0],s=+f[0][1],c=+f[1][0],l=+f[1][1]),u()):a==null?null:[[a,s],[c,l]]};function u(){var f=je*r(),d=t(PK(t.rotate()).invert([0,0]));return o(a==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===Ru?[[Math.max(d[0]-f,a),s],[Math.min(d[0]+f,c),l]]:[[a,Math.max(d[1]-f,s)],[c,Math.min(d[1]+f,l)]])}return u()}function Fx(e){return Hu((Ot+e)/2)}function hZ(e,t){var n=me(e),r=e===t?pe(e):Il(n/me(t))/Il(Fx(t)/Fx(e)),i=n*lx(Fx(e),r)/r;if(!r)return Ru;function o(a,s){i>0?s<-Ot+ge&&(s=-Ot+ge):s>Ot-ge&&(s=Ot-ge);var c=i/lx(Fx(s),r);return[c*pe(r*a),i-c*me(r*a)]}return o.invert=function(a,s){var c=i-s,l=wi(r)*$t(a*a+c*c),u=Ln(a,Oe(c))*wi(c);return c*r<0&&(u-=je*wi(a)*wi(c)),[u/r,2*Oo(lx(i/l,1/r))-Ot]},o}function t_(){return Fu(hZ).scale(109.5).parallels([30,30])}function Ou(e,t){return[e,t]}Ou.invert=Ou;function n_(){return Vn(Ou).scale(152.63)}function mZ(e,t){var n=me(e),r=e===t?pe(e):(n-me(t))/(t-e),i=n/r+e;if(Oe(r)<ge)return Ou;function o(a,s){var c=i-s,l=r*a;return[c*pe(l),i-c*me(l)]}return o.invert=function(a,s){var c=i-s,l=Ln(a,Oe(c))*wi(c);return c*r<0&&(l-=je*wi(a)*wi(c)),[l/r,i-wi(r)*$t(a*a+c*c)]},o}function r_(){return Fu(mZ).scale(131.154).center([0,13.9389])}var Z7=1.340264,J7=-.081106,ep=893e-6,tp=.003796,Rx=$t(3)/2,zCe=12;function i_(e,t){var n=sn(Rx*pe(t)),r=n*n,i=r*r*r;return[e*me(n)/(Rx*(Z7+3*J7*r+i*(7*ep+9*tp*r))),n*(Z7+J7*r+i*(ep+tp*r))]}i_.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,s,c;o<zCe&&(s=n*(Z7+J7*r+i*(ep+tp*r))-t,c=Z7+3*J7*r+i*(7*ep+9*tp*r),n-=a=s/c,r=n*n,i=r*r*r,!(Oe(a)<Tl));++o);return[Rx*e*(Z7+3*J7*r+i*(7*ep+9*tp*r))/me(n),sn(pe(n)/Rx)]};function o_(){return Vn(i_).scale(177.158)}function a_(e,t){var n=me(t),r=me(e)*n;return[n*pe(e)/r,pe(t)/r]}a_.invert=Wa(Oo);function s_(){return Vn(a_).scale(144.049).clipAngle(60)}function c_(){var e=1,t=0,n=0,r=1,i=1,o=0,a,s,c=null,l,u,f,d=1,p=1,h=$l({point:function(b,M){var S=C([b,M]);this.stream.point(S[0],S[1])}}),m=U3,g,v;function y(){return d=e*r,p=e*i,g=v=null,C}function C(b){var M=b[0]*d,S=b[1]*p;if(o){var w=S*a-M*s;M=M*a+S*s,S=w}return[M+t,S+n]}return C.invert=function(b){var M=b[0]-t,S=b[1]-n;if(o){var w=S*a+M*s;M=M*a-S*s,S=w}return[M/d,S/p]},C.stream=function(b){return g&&v===b?g:g=h(m(v=b))},C.postclip=function(b){return arguments.length?(m=b,c=l=u=f=null,y()):m},C.clipExtent=function(b){return arguments.length?(m=b==null?(c=l=u=f=null,U3):j7(c=+b[0][0],l=+b[0][1],u=+b[1][0],f=+b[1][1]),y()):c==null?null:[[c,l],[u,f]]},C.scale=function(b){return arguments.length?(e=+b,y()):e},C.translate=function(b){return arguments.length?(t=+b[0],n=+b[1],y()):[t,n]},C.angle=function(b){return arguments.length?(o=b%360*$e,s=pe(o),a=me(o),y()):o*Pt},C.reflectX=function(b){return arguments.length?(r=b?-1:1,y()):r<0},C.reflectY=function(b){return arguments.length?(i=b?-1:1,y()):i<0},C.fitExtent=function(b,M){return Bl(C,b,M)},C.fitSize=function(b,M){return ku(C,b,M)},C.fitWidth=function(b,M){return Tu(C,b,M)},C.fitHeight=function(b,M){return Iu(C,b,M)},C}function l_(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}l_.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,a=o*o;n-=i=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(Oe(i)>ge&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function u_(){return Vn(l_).scale(175.295)}function f_(e,t){return[me(t)*pe(e),pe(t)]}f_.invert=Wa(sn);function d_(){return Vn(f_).scale(249.5).clipAngle(90+ge)}function p_(e,t){var n=me(t),r=1+me(e)*n;return[n*pe(e)/r,pe(t)/r]}p_.invert=Wa(function(e){return 2*Oo(e)});function h_(){return Vn(p_).scale(250).clipAngle(142)}function m_(e,t){return[Il(Hu((Ot+t)/2)),-e]}m_.invert=function(e,t){return[-t,2*Oo(sx(e))-Ot]};function g_(){var e=e_(m_),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var gZ=Math.abs;var Px=Math.cos;var np=Math.sin;var vZ=1e-6;var q3=Math.PI,Ox=q3/2,gat=q3/4;var v_=yZ(2),vat=yZ(q3),yat=q3*2,xat=180/q3,Cat=q3/180;function y_(e){return e>1?Ox:e<-1?-Ox:Math.asin(e)}function yZ(e){return e>0?Math.sqrt(e):0}function HCe(e,t){var n=e*np(t),r=30,i;do t-=i=(t+np(t)-n)/(1+Px(t));while(gZ(i)>vZ&&--r>0);return t/2}function LCe(e,t,n){function r(i,o){return[e*i*Px(o=HCe(n,o)),t*np(o)]}return r.invert=function(i,o){return o=y_(o/t),[i/(e*Px(o)),y_((2*o+np(2*o))/n)]},r}var xZ=LCe(v_/Ox,v_,q3);function x_(){return Vn(xZ).scale(169.529)}var ACe=kx(),Bx=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function VCe(e,t){return function n(){let r=t();return r.type=e,r.path=kx().projection(r),r.copy=r.copy||function(){let i=n();return Bx.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},XA(r)}}function rp(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?($x[e]=VCe(e,t),this):$x[e]||null}function C_(e){return e&&e.path||ACe}var $x={albers:K7,albersusa:YN,azimuthalequalarea:QN,azimuthalequidistant:ZN,conicconformal:t_,conicequalarea:G3,conicequidistant:r_,equalEarth:o_,equirectangular:n_,gnomonic:s_,identity:c_,mercator:JN,mollweide:x_,naturalEarth1:u_,orthographic:d_,stereographic:h_,transversemercator:g_};for(let e in $x)rp(e,$x[e]);function NCe(){}var sc=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function MZ(){var e=1,t=1,n=s;function r(c,l){return l.map(u=>i(c,u))}function i(c,l){var u=[],f=[];return o(c,l,d=>{n(d,c,l),_Ce(d)>0?u.push([d]):f.push(d)}),f.forEach(d=>{for(var p=0,h=u.length,m;p<h;++p)if(kCe((m=u[p])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:u}}function o(c,l,u){var f=new Array,d=new Array,p,h,m,g,v,y;for(p=h=-1,g=c[0]>=l,sc[g<<1].forEach(C);++p<e-1;)m=g,g=c[p+1]>=l,sc[m|g<<1].forEach(C);for(sc[g<<0].forEach(C);++h<t-1;){for(p=-1,g=c[h*e+e]>=l,v=c[h*e]>=l,sc[g<<1|v<<2].forEach(C);++p<e-1;)m=g,g=c[h*e+e+p+1]>=l,y=v,v=c[h*e+p+1]>=l,sc[m|g<<1|v<<2|y<<3].forEach(C);sc[g|v<<3].forEach(C)}for(p=-1,v=c[h*e]>=l,sc[v<<2].forEach(C);++p<e-1;)y=v,v=c[h*e+p+1]>=l,sc[v<<2|y<<3].forEach(C);sc[v<<3].forEach(C);function C(b){var M=[b[0][0]+p,b[0][1]+h],S=[b[1][0]+p,b[1][1]+h],w=a(M),E=a(S),D,z;(D=d[w])?(z=f[E])?(delete d[D.end],delete f[z.start],D===z?(D.ring.push(S),u(D.ring)):f[D.start]=d[z.end]={start:D.start,end:z.end,ring:D.ring.concat(z.ring)}):(delete d[D.end],D.ring.push(S),d[D.end=E]=D):(D=f[E])?(z=d[w])?(delete f[D.start],delete d[z.end],D===z?(D.ring.push(S),u(D.ring)):f[z.start]=d[D.end]={start:z.start,end:D.end,ring:z.ring.concat(D.ring)}):(delete f[D.start],D.ring.unshift(M),f[D.start=w]=D):f[w]=d[E]={start:w,end:E,ring:[M,S]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function s(c,l,u){c.forEach(f=>{var d=f[0],p=f[1],h=d|0,m=p|0,g,v=l[m*e+h];d>0&&d<e&&h===d&&(g=l[m*e+h-1],f[0]=d+(u-g)/(v-g)-.5),p>0&&p<t&&m===p&&(g=l[(m-1)*e+h],f[1]=p+(u-g)/(v-g)-.5)})}return r.contour=i,r.size=function(c){if(!arguments.length)return[e,t];var l=Math.floor(c[0]),u=Math.floor(c[1]);return l>=0&&u>=0||B("invalid size"),e=l,t=u,r},r.smooth=function(c){return arguments.length?(n=c?s:NCe,r):n===s},r}function _Ce(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function kCe(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=TCe(e,t[n]))return i;return 0}function TCe(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var c=e[o],l=c[0],u=c[1],f=e[s],d=f[0],p=f[1];if(ICe(c,f,t))return 0;u>r!=p>r&&n<(d-l)*(r-u)/(p-u)+l&&(i=-i)}return i}function ICe(e,t,n){var r;return FCe(e,t,n)&&RCe(e[r=+(e[0]===t[0])],n[r],t[r])}function FCe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function RCe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function wZ(e,t,n){return function(r){var i=Gi(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,c=t?qi(o,a,e):s/(e+1);return On(o+c,a,c)}}function w_(e){$.call(this,null,e)}w_.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ee(w_,$,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||zn,o=MZ().smooth(e.smooth!==!1),a=e.thresholds||OCe(r,i,e),s=e.as===null?null:e.as||"contour",c=[];return r.forEach(l=>{let u=i(l),f=o.size([u.width,u.height])(u.values,F(a)?a:a(u.values));PCe(f,u,l,e),f.forEach(d=>{c.push(ul(l,lt(s!=null?{[s]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function OCe(e,t,n){let r=wZ(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Ho(t(i).values)))}function PCe(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Ie(i)&&(i=i(n,r)),Ie(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;let a=(Be(i)?i:i[0])||1,s=(Be(i)?i:i[1])||1,c=o&&o[0]||0,l=o&&o[1]||0;e.forEach(SZ(t,a,s,c,l))}function SZ(e,t,n,r,i){let o=e.x1||0,a=e.y1||0,s=t*n<0;function c(f){f.forEach(l)}function l(f){s&&f.reverse(),f.forEach(u)}function u(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-a)*n+i}return function(f){return f.coordinates.forEach(c),f}}function CZ(e,t,n){let r=e>=0?e:mv(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function b_(e){return Ie(e)?e:fn(+e)}function EZ(){var e=c=>c[0],t=c=>c[1],n=za,r=[-1,-1],i=960,o=500,a=2;function s(c,l){let u=CZ(r[0],c,e)>>a,f=CZ(r[1],c,t)>>a,d=u?u+2:0,p=f?f+2:0,h=2*d+(i>>a),m=2*p+(o>>a),g=new Float32Array(h*m),v=new Float32Array(h*m),y=g;c.forEach(b=>{let M=d+(+e(b)>>a),S=p+(+t(b)>>a);M>=0&&M<h&&S>=0&&S<m&&(g[M+S*h]+=+n(b))}),u>0&&f>0?(Pu(h,m,g,v,u),$u(h,m,v,g,f),Pu(h,m,g,v,u),$u(h,m,v,g,f),Pu(h,m,g,v,u),$u(h,m,v,g,f)):u>0?(Pu(h,m,g,v,u),Pu(h,m,v,g,u),Pu(h,m,g,v,u),y=v):f>0&&($u(h,m,g,v,f),$u(h,m,v,g,f),$u(h,m,g,v,f),y=v);let C=l?Math.pow(2,-2*a):1/U6(y);for(let b=0,M=h*m;b<M;++b)y[b]*=C;return{values:y,scale:1<<a,width:h,height:m,x1:d,y1:p,x2:d+(i>>a),y2:p+(o>>a)}}return s.x=function(c){return arguments.length?(e=b_(c),s):e},s.y=function(c){return arguments.length?(t=b_(c),s):t},s.weight=function(c){return arguments.length?(n=b_(c),s):n},s.size=function(c){if(!arguments.length)return[i,o];var l=+c[0],u=+c[1];return l>=0&&u>=0||B("invalid size"),i=l,o=u,s},s.cellSize=function(c){return arguments.length?((c=+c)>=1||B("invalid cell size"),a=Math.floor(Math.log(c)/Math.LN2),s):1<<a},s.bandwidth=function(c){return arguments.length?(c=te(c),c.length===1&&(c=[+c[0],+c[0]]),c.length!==2&&B("invalid bandwidth"),r=c,s):r},s}function Pu(e,t,n,r,i){let o=(i<<1)+1;for(let a=0;a<t;++a)for(let s=0,c=0;s<e+i;++s)s<e&&(c+=n[s+a*e]),s>=i&&(s>=o&&(c-=n[s-o+a*e]),r[s-i+a*e]=c/Math.min(s+1,e-1+o-s,o))}function $u(e,t,n,r,i){let o=(i<<1)+1;for(let a=0;a<e;++a)for(let s=0,c=0;s<t+i;++s)s<t&&(c+=n[a+s*e]),s>=i&&(s>=o&&(c-=n[a+(s-o)*e]),r[a+(s-i)*e]=c/Math.min(s+1,t-1+o-s,o))}function S_(e){$.call(this,null,e)}S_.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var $Ce=["x","y","weight","size","cellSize","bandwidth"];function DZ(e,t){return $Ce.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ee(S_,$,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=BCe(r,e.groupby),o=(e.groupby||[]).map(an),a=DZ(EZ(),e),s=e.as||"grid",c=[];function l(u,f){for(let d=0;d<o.length;++d)u[o[d]]=f[d];return u}return c=i.map(u=>lt(l({[s]:a(u,e.counts)},u.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function BCe(e,t){var n=[],r=u=>u(s),i,o,a,s,c,l;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],c=t.map(r),l=i[c],l||(i[c]=l=[],l.dims=c,n.push(l)),l.push(s);return n}function E_(e){$.call(this,null,e)}E_.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ee(E_,$,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=MZ().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||wZ(e.count||10,e.nice,!!i),a=e.size,s,c;return i||(i=t.materialize(t.SOURCE).source,s=DZ(EZ(),e)(i,!0),c=SZ(s,s.scale||1,s.scale||1,0,0),a=[s.width,s.height],i=s.values),o=F(o)?o:o(i),i=r.size(a)(i,o),c&&i.forEach(c),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(lt),n}});var M_="Feature",D_="FeatureCollection",UCe="MultiPoint";function z_(e){$.call(this,null,e)}z_.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ee(z_,$,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],a=i&&i[1],s=e.geojson||!i&&zn,c=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(ar(s))||o&&t.modified(ar(o))||a&&t.modified(ar(a)),(!this.value||l)&&(c=t.SOURCE,this._features=n=[],this._points=r=[]),s&&t.visit(c,u=>n.push(s(u))),o&&a&&(t.visit(c,u=>{var f=o(u),d=a(u);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:M_,geometry:{type:UCe,coordinates:r}})),this.value={type:D_,features:n}}});function H_(e){$.call(this,null,e)}H_.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ee(H_,$,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||zn,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=C_(e.projection),n.materialize().reflow()):a=i===zn||t.modified(i.fields)?n.ADD_MOD:n.ADD;let s=jCe(r,e.pointRadius);return n.visit(a,c=>c[o]=r(i(c))),r.pointRadius(s),n.modifies(o)}});function jCe(e,t){let n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function L_(e){$.call(this,null,e)}L_.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ee(L_,$,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],a=o[0],s=o[1],c;function l(u){let f=n([r(u),i(u)]);f?(u[a]=f[0],u[s]=f[1]):(u[a]=void 0,u[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(c=t.modified(r.fields)||t.modified(i.fields),t.visit(c?t.ADD_MOD:t.ADD,l)),t.modifies(o)}});function A_(e){$.call(this,null,e)}A_.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ee(A_,$,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=GCe(C_(e.projection),e.field||Cr("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,a=>a[i]=r),n.modifies(i)}});function GCe(e,t,n){let r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),a=e.pointRadius(n)(t(i));return e.pointRadius(o),a};return r.context=i=>(e.context(i),r),r}function V_(e){$.call(this,[],e),this.generator=Dx()}V_.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ee(V_,$,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(let o in e)Ie(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(uv(n[0],i)):t.add.push(lt(i)),n[0]=i,t}});function N_(e){$.call(this,null,e)}N_.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ee(N_,$,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||zn,o=WCe(e.opacity,e),a=qCe(e.color,e),s=e.as||"image",c={$x:0,$y:0,$value:0,$max:r?Ho(n.map(l=>Ho(i(l).values))):0};return n.forEach(l=>{let u=i(l),f=Te({},l,c);r||(f.$max=Ho(u.values||[])),l[s]=YCe(u,f,a.dep?a:fn(a(f)),o.dep?o:fn(o(f)))}),t.reflow(!0).modifies(s)}});function qCe(e,t){let n;return Ie(e)?(n=r=>To(e(r,t)),n.dep=zZ(e)):n=fn(To(e||"#888")),n}function WCe(e,t){let n;return Ie(e)?(n=r=>e(r,t),n.dep=zZ(e)):e?n=fn(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function zZ(e){if(!Ie(e))return!1;let t=cr(ar(e));return t.$x||t.$y||t.$value||t.$max}function YCe(e,t,n,r){let i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,c=e.x2||i,l=e.y2||o,u=e.values,f=u?g=>u[g]:h2,d=ko(c-a,l-s),p=d.getContext("2d"),h=p.getImageData(0,0,c-a,l-s),m=h.data;for(let g=s,v=0;g<l;++g){t.$y=g-s;for(let y=a,C=g*i;y<c;++y,v+=4){t.$x=y-a,t.$value=f(y+C);let b=n(t);m[v+0]=b.r,m[v+1]=b.g,m[v+2]=b.b,m[v+3]=~~(255*r(t))}}return p.putImageData(h,0,0),d}function HZ(e){$.call(this,null,e),this.modified(!0)}ee(HZ,$,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=QCe(e.type),Bx.forEach(r=>{e[r]!=null&&bZ(n,r,e[r])})):Bx.forEach(r=>{e.modified(r)&&bZ(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&XCe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function XCe(e,t){let n=KCe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function QCe(e){let t=rp((e||"mercator").toLowerCase());return t||B("Unrecognized projection type: "+e),t()}function bZ(e,t,n){Ie(e[t])&&e[t](n)}function KCe(e){return e=te(e),e.length===1?e[0]:{type:D_,features:e.reduce((t,n)=>t.concat(ZCe(n)),[])}}function ZCe(e){return e.type===D_?e.features:te(e).filter(t=>t!=null).map(t=>t.type===M_?t:{type:M_,geometry:t})}var W_={};mr(W_,{force:()=>q_});function k_(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,a=n.length,s,c=0,l=0;for(o=0;o<a;++o)s=n[o],c+=s.x,l+=s.y;for(c=(c/a-e)*r,l=(l/a-t)*r,o=0;o<a;++o)s=n[o],s.x-=c,s.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function LZ(e){let t=+this._x.call(null,e),n=+this._y.call(null,e);return AZ(this.cover(t,n),t,n,e)}function AZ(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,a={data:r},s=e._x0,c=e._y0,l=e._x1,u=e._y1,f,d,p,h,m,g,v,y;if(!o)return e._root=a,e;for(;o.length;)if((m=t>=(f=(s+l)/2))?s=f:l=f,(g=n>=(d=(c+u)/2))?c=d:u=d,i=o,!(o=o[v=g<<1|m]))return i[v]=a,e;if(p=+e._x.call(null,o.data),h=+e._y.call(null,o.data),t===p&&n===h)return a.next=o,i?i[v]=a:e._root=a,e;do i=i?i[v]=new Array(4):e._root=new Array(4),(m=t>=(f=(s+l)/2))?s=f:l=f,(g=n>=(d=(c+u)/2))?c=d:u=d;while((v=g<<1|m)===(y=(h>=d)<<1|p>=f));return i[y]=o,i[v]=a,e}function VZ(e){var t,n,r=e.length,i,o,a=new Array(r),s=new Array(r),c=1/0,l=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=i,s[n]=o,i<c&&(c=i),i>u&&(u=i),o<l&&(l=o),o>f&&(f=o));if(c>u||l>f)return this;for(this.cover(c,l).cover(u,f),n=0;n<r;++n)AZ(this,a[n],s[n],e[n]);return this}function NZ(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a=i-n||1,s=this._root,c,l;n>e||e>=i||r>t||t>=o;)switch(l=(t<r)<<1|e<n,c=new Array(4),c[l]=s,s=c,a*=2,l){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function _Z(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function kZ(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Sr(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function TZ(e,t,n){var r,i=this._x0,o=this._y0,a,s,c,l,u=this._x1,f=this._y1,d=[],p=this._root,h,m;for(p&&d.push(new Sr(p,i,o,u,f)),n==null?n=1/0:(i=e-n,o=t-n,u=e+n,f=t+n,n*=n);h=d.pop();)if(!(!(p=h.node)||(a=h.x0)>u||(s=h.y0)>f||(c=h.x1)<i||(l=h.y1)<o))if(p.length){var g=(a+c)/2,v=(s+l)/2;d.push(new Sr(p[3],g,v,c,l),new Sr(p[2],a,v,g,l),new Sr(p[1],g,s,c,v),new Sr(p[0],a,s,g,v)),(m=(t>=v)<<1|e>=g)&&(h=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=h)}else{var y=e-+this._x.call(null,p.data),C=t-+this._y.call(null,p.data),b=y*y+C*C;if(b<n){var M=Math.sqrt(n=b);i=e-M,o=t-M,u=e+M,f=t+M,r=p.data}}return r}function IZ(e){if(isNaN(u=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,a=this._x0,s=this._y0,c=this._x1,l=this._y1,u,f,d,p,h,m,g,v;if(!n)return this;if(n.length)for(;;){if((h=u>=(d=(a+c)/2))?a=d:c=d,(m=f>=(p=(s+l)/2))?s=p:l=p,t=n,!(n=n[g=m<<1|h]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,v=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[g]=o:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=o,this)}function FZ(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function RZ(){return this._root}function OZ(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function PZ(e){var t=[],n,r=this._root,i,o,a,s,c;for(r&&t.push(new Sr(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,a=n.y0,s=n.x1,c=n.y1)&&r.length){var l=(o+s)/2,u=(a+c)/2;(i=r[3])&&t.push(new Sr(i,l,u,s,c)),(i=r[2])&&t.push(new Sr(i,o,u,l,c)),(i=r[1])&&t.push(new Sr(i,l,a,s,u)),(i=r[0])&&t.push(new Sr(i,o,a,l,u))}return this}function $Z(e){var t=[],n=[],r;for(this._root&&t.push(new Sr(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,c=r.x1,l=r.y1,u=(a+c)/2,f=(s+l)/2;(o=i[0])&&t.push(new Sr(o,a,s,u,f)),(o=i[1])&&t.push(new Sr(o,u,s,c,f)),(o=i[2])&&t.push(new Sr(o,a,f,u,l)),(o=i[3])&&t.push(new Sr(o,u,f,c,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function BZ(e){return e[0]}function UZ(e){return arguments.length?(this._x=e,this):this._x}function jZ(e){return e[1]}function GZ(e){return arguments.length?(this._y=e,this):this._y}function Ul(e,t,n){var r=new T_(t??BZ,n??jZ,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function T_(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function qZ(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var i1=Ul.prototype=T_.prototype;i1.copy=function(){var e=new T_(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=qZ(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=qZ(r));return e};i1.add=LZ;i1.addAll=VZ;i1.cover=NZ;i1.data=_Z;i1.extent=kZ;i1.find=TZ;i1.remove=IZ;i1.removeAll=FZ;i1.root=RZ;i1.size=OZ;i1.visit=PZ;i1.visitAfter=$Z;i1.x=UZ;i1.y=GZ;function Xn(e){return function(){return e}}function L2(e){return(e()-.5)*1e-6}function JCe(e){return e.x+e.vx}function ebe(e){return e.y+e.vy}function I_(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=Xn(e==null?1:+e));function a(){for(var l,u=t.length,f,d,p,h,m,g,v=0;v<o;++v)for(f=Ul(t,JCe,ebe).visitAfter(s),l=0;l<u;++l)d=t[l],m=n[d.index],g=m*m,p=d.x+d.vx,h=d.y+d.vy,f.visit(y);function y(C,b,M,S,w){var E=C.data,D=C.r,z=m+D;if(E){if(E.index>d.index){var L=p-E.x-E.vx,G=h-E.y-E.vy,A=L*L+G*G;A<z*z&&(L===0&&(L=L2(r),A+=L*L),G===0&&(G=L2(r),A+=G*G),A=(z-(A=Math.sqrt(A)))/A*i,d.vx+=(L*=A)*(z=(D*=D)/(g+D)),d.vy+=(G*=A)*z,E.vx-=L*(z=1-z),E.vy-=G*z)}return}return b>p+z||S<p-z||M>h+z||w<h-z}}function s(l){if(l.data)return l.r=n[l.data.index];for(var u=l.r=0;u<4;++u)l[u]&&l[u].r>l.r&&(l.r=l[u].r)}function c(){if(t){var l,u=t.length,f;for(n=new Array(u),l=0;l<u;++l)f=t[l],n[f.index]=+e(f,l,t)}}return a.initialize=function(l,u){t=l,r=u,c()},a.iterations=function(l){return arguments.length?(o=+l,a):o},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Xn(+l),c(),a):e},a}function tbe(e){return e.index}function WZ(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function F_(e){var t=tbe,n=f,r,i=Xn(30),o,a,s,c,l,u=1;e==null&&(e=[]);function f(g){return 1/Math.min(s[g.source.index],s[g.target.index])}function d(g){for(var v=0,y=e.length;v<u;++v)for(var C=0,b,M,S,w,E,D,z;C<y;++C)b=e[C],M=b.source,S=b.target,w=S.x+S.vx-M.x-M.vx||L2(l),E=S.y+S.vy-M.y-M.vy||L2(l),D=Math.sqrt(w*w+E*E),D=(D-o[C])/D*g*r[C],w*=D,E*=D,S.vx-=w*(z=c[C]),S.vy-=E*z,M.vx+=w*(z=1-z),M.vy+=E*z}function p(){if(a){var g,v=a.length,y=e.length,C=new Map(a.map((M,S)=>[t(M,S,a),M])),b;for(g=0,s=new Array(v);g<y;++g)b=e[g],b.index=g,typeof b.source!="object"&&(b.source=WZ(C,b.source)),typeof b.target!="object"&&(b.target=WZ(C,b.target)),s[b.source.index]=(s[b.source.index]||0)+1,s[b.target.index]=(s[b.target.index]||0)+1;for(g=0,c=new Array(y);g<y;++g)b=e[g],c[g]=s[b.source.index]/(s[b.source.index]+s[b.target.index]);r=new Array(y),h(),o=new Array(y),m()}}function h(){if(a)for(var g=0,v=e.length;g<v;++g)r[g]=+n(e[g],g,e)}function m(){if(a)for(var g=0,v=e.length;g<v;++g)o[g]=+i(e[g],g,e)}return d.initialize=function(g,v){a=g,l=v,p()},d.links=function(g){return arguments.length?(e=g,p(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(u=+g,d):u},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Xn(+g),h(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Xn(+g),m(),d):i},d}var nbe={value:()=>{}};function XZ(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ux(n)}function Ux(e){this._=e}function rbe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ux.prototype=XZ.prototype={constructor:Ux,on:function(e,t){var n=this._,r=rbe(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=ibe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=YZ(n[i],e.name,t);else if(t==null)for(i in n)n[i]=YZ(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ux(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function ibe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function YZ(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=nbe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var R_=XZ;var Bu=0,op=0,ip=0,KZ=1e3,jx,ap,Gx=0,jl=0,qx=0,sp=typeof performance=="object"&&performance.now?performance:Date,ZZ=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function lp(){return jl||(ZZ(obe),jl=sp.now()+qx)}function obe(){jl=0}function cp(){this._call=this._time=this._next=null}cp.prototype=Wx.prototype={constructor:cp,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?lp():+n)+(t==null?0:+t),!this._next&&ap!==this&&(ap?ap._next=this:jx=this,ap=this),this._call=e,this._time=n,O_()},stop:function(){this._call&&(this._call=null,this._time=1/0,O_())}};function Wx(e,t,n){var r=new cp;return r.restart(e,t,n),r}function JZ(){lp(),++Bu;for(var e=jx,t;e;)(t=jl-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Bu}function QZ(){jl=(Gx=sp.now())+qx,Bu=op=0;try{JZ()}finally{Bu=0,sbe(),jl=0}}function abe(){var e=sp.now(),t=e-Gx;t>KZ&&(qx-=t,Gx=e)}function sbe(){for(var e,t=jx,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:jx=n);ap=e,O_(r)}function O_(e){if(!Bu){op&&(op=clearTimeout(op));var t=e-jl;t>24?(e<1/0&&(op=setTimeout(QZ,e-sp.now()-qx)),ip&&(ip=clearInterval(ip))):(ip||(Gx=sp.now(),ip=setInterval(abe,KZ)),Bu=1,ZZ(QZ))}}function P_(e,t,n){var r=new cp,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,a,s){a=+a,s=s==null?lp():+s,r._restart(function c(l){l+=i,r._restart(c,i+=a,s),o(l)},a,s)},r.restart(e,t,n),r)}function eJ(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function tJ(e){return e.x}function nJ(e){return e.y}var cbe=10,lbe=Math.PI*(3-Math.sqrt(5));function $_(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,c=Wx(f),l=R_("tick","end"),u=eJ();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(c.stop(),l.call("end",t))}function d(m){var g,v=e.length,y;m===void 0&&(m=1);for(var C=0;C<m;++C)for(n+=(o-n)*i,s.forEach(function(b){b(n)}),g=0;g<v;++g)y=e[g],y.fx==null?y.x+=y.vx*=a:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=a:(y.y=y.fy,y.vy=0);return t}function p(){for(var m=0,g=e.length,v;m<g;++m){if(v=e[m],v.index=m,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var y=cbe*Math.sqrt(.5+m),C=m*lbe;v.x=y*Math.cos(C),v.y=y*Math.sin(C)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function h(m){return m.initialize&&m.initialize(e,u),m}return p(),t={tick:d,restart:function(){return c.restart(f),t},stop:function(){return c.stop(),t},nodes:function(m){return arguments.length?(e=m,p(),s.forEach(h),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(o=+m,t):o},velocityDecay:function(m){return arguments.length?(a=1-m,t):1-a},randomSource:function(m){return arguments.length?(u=m,s.forEach(h),t):u},force:function(m,g){return arguments.length>1?(g==null?s.delete(m):s.set(m,h(g)),t):s.get(m)},find:function(m,g,v){var y=0,C=e.length,b,M,S,w,E;for(v==null?v=1/0:v*=v,y=0;y<C;++y)w=e[y],b=m-w.x,M=g-w.y,S=b*b+M*M,S<v&&(E=w,v=S);return E},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function B_(){var e,t,n,r,i=Xn(-30),o,a=1,s=1/0,c=.81;function l(p){var h,m=e.length,g=Ul(e,tJ,nJ).visitAfter(f);for(r=p,h=0;h<m;++h)t=e[h],g.visit(d)}function u(){if(e){var p,h=e.length,m;for(o=new Array(h),p=0;p<h;++p)m=e[p],o[m.index]=+i(m,p,e)}}function f(p){var h=0,m,g,v=0,y,C,b;if(p.length){for(y=C=b=0;b<4;++b)(m=p[b])&&(g=Math.abs(m.value))&&(h+=m.value,v+=g,y+=g*m.x,C+=g*m.y);p.x=y/v,p.y=C/v}else{m=p,m.x=m.data.x,m.y=m.data.y;do h+=o[m.data.index];while(m=m.next)}p.value=h}function d(p,h,m,g){if(!p.value)return!0;var v=p.x-t.x,y=p.y-t.y,C=g-h,b=v*v+y*y;if(C*C/c<b)return b<s&&(v===0&&(v=L2(n),b+=v*v),y===0&&(y=L2(n),b+=y*y),b<a&&(b=Math.sqrt(a*b)),t.vx+=v*p.value*r/b,t.vy+=y*p.value*r/b),!0;if(p.length||b>=s)return;(p.data!==t||p.next)&&(v===0&&(v=L2(n),b+=v*v),y===0&&(y=L2(n),b+=y*y),b<a&&(b=Math.sqrt(a*b)));do p.data!==t&&(C=o[p.data.index]*r/b,t.vx+=v*C,t.vy+=y*C);while(p=p.next)}return l.initialize=function(p,h){e=p,n=h,u()},l.strength=function(p){return arguments.length?(i=typeof p=="function"?p:Xn(+p),u(),l):i},l.distanceMin=function(p){return arguments.length?(a=p*p,l):Math.sqrt(a)},l.distanceMax=function(p){return arguments.length?(s=p*p,l):Math.sqrt(s)},l.theta=function(p){return arguments.length?(c=p*p,l):Math.sqrt(c)},l}function U_(e){var t=Xn(.1),n,r,i;typeof e!="function"&&(e=Xn(e==null?0:+e));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vx+=(i[c]-u.x)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:Xn(+s),a(),o):t},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:Xn(+s),a(),o):e},o}function j_(e){var t=Xn(.1),n,r,i;typeof e!="function"&&(e=Xn(e==null?0:+e));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vy+=(i[c]-u.y)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:Xn(+s),a(),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:Xn(+s),a(),o):e},o}var rJ={center:k_,collide:I_,nbody:B_,link:F_,x:U_,y:j_},up="forces",G_=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],ube=["static","iterations"],iJ=["x","y","vx","vy"];function q_(e){$.call(this,null,e)}q_.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:iJ}]};ee(q_,$,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(G_),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&oJ(n,e,0,t)):(this.value=n=dbe(t.source,e),n.on("tick",fbe(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(ube)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){let n=t.dataflow;for(let s=this._argops,c=0,l=s.length,u;c<l;++c)if(u=s[c],!(u.name!==up||u.op._argval.force!=="link")){for(var r=u.op._argops,i=0,o=r.length,a;i<o;++i)if(r[i].name==="links"&&(a=r[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(iJ)}});function fbe(e,t){return()=>e.touch(t).run()}function dbe(e,t){let n=$_(e),r=n.stop,i=n.restart,o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),oJ(n,t,!0).on("end",()=>o=!0)}function oJ(e,t,n,r){var i=te(t.forces),o,a,s,c;for(o=0,a=G_.length;o<a;++o)s=G_[o],s!==up&&t.modified(s)&&e[s](t[s]);for(o=0,a=i.length;o<a;++o)c=up+o,s=n||t.modified(up,o)?hbe(i[o]):r&&pbe(i[o],r)?e.force(c):null,s&&e.force(c,s);for(a=e.numForces||0;o<a;++o)e.force(up+o,null);return e.numForces=i.length,e}function pbe(e,t){var n,r;for(n in e)if(Ie(r=e[n])&&t.modified(ar(r)))return 1;return 0}function hbe(e){var t,n;he(rJ,e.force)||B("Unrecognized force: "+e.force),t=rJ[e.force]();for(n in e)Ie(t[n])&&mbe(t[n],e[n],e);return t}function mbe(e,t,n){e(Ie(t)?r=>t(r,n):t)}var Sk={};mr(Sk,{nest:()=>vk,pack:()=>yk,partition:()=>xk,stratify:()=>Ck,tree:()=>bk,treelinks:()=>Mk,treemap:()=>wk});function gbe(e,t){return e.parent===t.parent?1:2}function vbe(e){return e.reduce(ybe,0)/e.length}function ybe(e,t){return e+t.x}function xbe(e){return 1+e.reduce(Cbe,0)}function Cbe(e,t){return Math.max(e,t.y)}function bbe(e){for(var t;t=e.children;)e=t[0];return e}function Mbe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Y_(){var e=gbe,t=1,n=1,r=!1;function i(o){var a,s=0;o.eachAfter(function(d){var p=d.children;p?(d.x=vbe(p),d.y=xbe(p)):(d.x=a?s+=e(d,a):0,d.y=0,a=d)});var c=bbe(o),l=Mbe(o),u=c.x-e(c,l)/2,f=l.x+e(l,c)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-u)/(f-u)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function wbe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function aJ(){return this.eachAfter(wbe)}function sJ(e,t){let n=-1;for(let r of this)e.call(t,r,++n,this);return this}function cJ(e,t){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function lJ(e,t){for(var n=this,r=[n],i=[],o,a,s,c=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)e.call(t,n,++c,this);return this}function uJ(e,t){let n=-1;for(let r of this)if(e.call(t,r,++n,this))return r}function fJ(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function dJ(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function pJ(e){for(var t=this,n=Sbe(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Sbe(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function hJ(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function mJ(){return Array.from(this)}function gJ(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function vJ(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*yJ(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function Uu(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=zbe)):t===void 0&&(t=Dbe);for(var n=new cc(e),r,i=[n],o,a,s,c;r=i.pop();)if((a=t(r.data))&&(c=(a=Array.from(a)).length))for(r.children=a,s=c-1;s>=0;--s)i.push(o=a[s]=new cc(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(X_)}function Ebe(){return Uu(this).eachBefore(Hbe)}function Dbe(e){return e.children}function zbe(e){return Array.isArray(e)?e[1]:null}function Hbe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function X_(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function cc(e){this.data=e,this.depth=this.height=0,this.parent=null}cc.prototype=Uu.prototype={constructor:cc,count:aJ,each:sJ,eachAfter:lJ,eachBefore:cJ,find:uJ,sum:fJ,sort:dJ,path:pJ,ancestors:hJ,descendants:mJ,leaves:gJ,links:vJ,copy:Ebe,[Symbol.iterator]:yJ};function ju(e){return e==null?null:Q_(e)}function Q_(e){if(typeof e!="function")throw new Error;return e}function lc(){return 0}function W3(e){return function(){return e}}function xJ(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function CJ(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bJ(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function MJ(e,t){for(var n=0,r=(e=bJ(Array.from(e),t)).length,i=[],o,a;n<r;)o=e[n],a&&wJ(a,o)?++n:(a=Abe(i=Lbe(i,o)),n=0);return a}function Lbe(e,t){var n,r;if(K_(t,e))return[t];for(n=0;n<e.length;++n)if(Yx(t,e[n])&&K_(fp(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Yx(fp(e[n],e[r]),t)&&Yx(fp(e[n],t),e[r])&&Yx(fp(e[r],t),e[n])&&K_(SJ(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Yx(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function wJ(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function K_(e,t){for(var n=0;n<t.length;++n)if(!wJ(e,t[n]))return!1;return!0}function Abe(e){switch(e.length){case 1:return Vbe(e[0]);case 2:return fp(e[0],e[1]);case 3:return SJ(e[0],e[1],e[2])}}function Vbe(e){return{x:e.x,y:e.y,r:e.r}}function fp(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,c=o-n,l=a-r,u=s-i,f=Math.sqrt(c*c+l*l);return{x:(n+o+c/f*u)/2,y:(r+a+l/f*u)/2,r:(f+i+s)/2}}function SJ(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,c=t.r,l=n.x,u=n.y,f=n.r,d=r-a,p=r-l,h=i-s,m=i-u,g=c-o,v=f-o,y=r*r+i*i-o*o,C=y-a*a-s*s+c*c,b=y-l*l-u*u+f*f,M=p*h-d*m,S=(h*b-m*C)/(M*2)-r,w=(m*g-h*v)/M,E=(p*C-d*b)/(M*2)-i,D=(d*v-p*g)/M,z=w*w+D*D-1,L=2*(o+S*w+E*D),G=S*S+E*E-o*o,A=-(Math.abs(z)>1e-6?(L+Math.sqrt(L*L-4*z*G))/(2*z):G/L);return{x:r+S+w*A,y:i+E+D*A,r:A}}function EJ(e,t,n){var r=e.x-t.x,i,o,a=e.y-t.y,s,c,l=r*r+a*a;l?(o=t.r+n.r,o*=o,c=e.r+n.r,c*=c,o>c?(i=(l+c-o)/(2*l),s=Math.sqrt(Math.max(0,c/l-i*i)),n.x=e.x-i*r-s*a,n.y=e.y-i*a+s*r):(i=(l+o-c)/(2*l),s=Math.sqrt(Math.max(0,o/l-i*i)),n.x=t.x+i*r-s*a,n.y=t.y+i*a+s*r)):(n.x=t.x+n.r,n.y=t.y)}function DJ(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function zJ(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function Xx(e){this._=e,this.next=null,this.previous=null}function HJ(e,t){if(!(o=(e=CJ(e)).length))return 0;var n,r,i,o,a,s,c,l,u,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;EJ(r,n,i=e[2]),n=new Xx(n),r=new Xx(r),i=new Xx(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(c=3;c<o;++c){EJ(n._,r._,i=e[c]),i=new Xx(i),l=r.next,u=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(DJ(l._,i._)){r=l,n.next=r,r.previous=n,--c;continue e}f+=l._.r,l=l.next}else{if(DJ(u._,i._)){n=u,n.next=r,r.previous=n,--c;continue e}d+=u._.r,u=u.previous}while(l!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=zJ(n);(i=i.next)!==r;)(s=zJ(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=MJ(n,t),c=0;c<o;++c)n=e[c],n.x-=i.x,n.y-=i.y;return i.r}function Nbe(e){return Math.sqrt(e.value)}function J_(){var e=null,t=1,n=1,r=lc;function i(o){let a=xJ();return o.x=t/2,o.y=n/2,e?o.eachBefore(LJ(e)).eachAfter(Z_(r,.5,a)).eachBefore(AJ(1)):o.eachBefore(LJ(Nbe)).eachAfter(Z_(lc,1,a)).eachAfter(Z_(r,o.r/Math.min(t,n),a)).eachBefore(AJ(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=ju(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:W3(+o),i):r},i}function LJ(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Z_(e,t,n){return function(r){if(i=r.children){var i,o,a=i.length,s=e(r)*t||0,c;if(s)for(o=0;o<a;++o)i[o].r+=s;if(c=HJ(i,n),s)for(o=0;o<a;++o)i[o].r-=s;r.r=c+s}}}function AJ(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Qx(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function A2(e,t,n,r,i){for(var o=e.children,a,s=-1,c=o.length,l=e.value&&(r-t)/e.value;++s<c;)a=o[s],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*l}function ek(){var e=1,t=1,n=0,r=!1;function i(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/s,a.eachBefore(o(t,s)),r&&a.eachBefore(Qx),a}function o(a,s){return function(c){c.children&&A2(c,c.x0,a*(c.depth+1)/s,c.x1,a*(c.depth+2)/s);var l=c.x0,u=c.y0,f=c.x1-n,d=c.y1-n;f<l&&(l=f=(l+f)/2),d<u&&(u=d=(u+d)/2),c.x0=l,c.y0=u,c.x1=f,c.y1=d}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var _be={depth:-1},VJ={},tk={};function kbe(e){return e.id}function Tbe(e){return e.parentId}function Kx(){var e=kbe,t=Tbe,n;function r(i){var o=Array.from(i),a=e,s=t,c,l,u,f,d,p,h,m,g=new Map;if(n!=null){let v=o.map((b,M)=>Ibe(n(b,M,i))),y=v.map(NJ),C=new Set(v).add("");for(let b of y)C.has(b)||(C.add(b),v.push(b),y.push(NJ(b)),o.push(tk));a=(b,M)=>v[M],s=(b,M)=>y[M]}for(u=0,c=o.length;u<c;++u)l=o[u],p=o[u]=new cc(l),(h=a(l,u,i))!=null&&(h+="")&&(m=p.id=h,g.set(m,g.has(m)?VJ:p)),(h=s(l,u,i))!=null&&(h+="")&&(p.parent=h);for(u=0;u<c;++u)if(p=o[u],h=p.parent){if(d=g.get(h),!d)throw new Error("missing: "+h);if(d===VJ)throw new Error("ambiguous: "+h);d.children?d.children.push(p):d.children=[p],p.parent=d}else{if(f)throw new Error("multiple roots");f=p}if(!f)throw new Error("no root");if(n!=null){for(;f.data===tk&&f.children.length===1;)f=f.children[0],--c;for(let v=o.length-1;v>=0&&(p=o[v],p.data===tk);--v)p.data=null}if(f.parent=_be,f.eachBefore(function(v){v.depth=v.parent.depth+1,--c}).eachBefore(X_),f.parent=null,c>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=ju(i),r):e},r.parentId=function(i){return arguments.length?(t=ju(i),r):t},r.path=function(i){return arguments.length?(n=ju(i),r):n},r}function Ibe(e){e=`${e}`;let t=e.length;return nk(e,t-1)&&!nk(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function NJ(e){let t=e.length;if(t<2)return"";for(;--t>1&&!nk(e,t););return e.slice(0,t)}function nk(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Fbe(e,t){return e.parent===t.parent?1:2}function rk(e){var t=e.children;return t?t[0]:e.t}function ik(e){var t=e.children;return t?t[t.length-1]:e.t}function Rbe(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Obe(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function Pbe(e,t,n){return e.a.parent===t.parent?e.a:n}function Zx(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Zx.prototype=Object.create(cc.prototype);function $be(e){for(var t=new Zx(e,0),n,r=[t],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new Zx(o[a],a)),i.parent=n;return(t.parent=new Zx(null,0)).children=[t],t}function ok(){var e=Fbe,t=1,n=1,r=null;function i(l){var u=$be(l);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)l.eachBefore(c);else{var f=l,d=l,p=l;l.eachBefore(function(y){y.x<f.x&&(f=y),y.x>d.x&&(d=y),y.depth>p.depth&&(p=y)});var h=f===d?1:e(f,d)/2,m=h-f.x,g=t/(d.x+h+m),v=n/(p.depth||1);l.eachBefore(function(y){y.x=(y.x+m)*g,y.y=y.depth*v})}return l}function o(l){var u=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(u){Obe(l);var p=(u[0].z+u[u.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-p):l.z=p}else d&&(l.z=d.z+e(l._,d._));l.parent.A=s(l,d,l.parent.A||f[0])}function a(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function s(l,u,f){if(u){for(var d=l,p=l,h=u,m=d.parent.children[0],g=d.m,v=p.m,y=h.m,C=m.m,b;h=ik(h),d=rk(d),h&&d;)m=rk(m),p=ik(p),p.a=l,b=h.z+y-d.z-g+e(h._,d._),b>0&&(Rbe(Pbe(h,l,f),l,b),g+=b,v+=b),y+=h.m,g+=d.m,C+=m.m,v+=p.m;h&&!ik(p)&&(p.t=h,p.m+=y-v),d&&!rk(m)&&(m.t=d,m.m+=g-C,f=l)}return f}function c(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function uc(e,t,n,r,i){for(var o=e.children,a,s=-1,c=o.length,l=e.value&&(i-n)/e.value;++s<c;)a=o[s],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*l}var ak=(1+Math.sqrt(5))/2;function sk(e,t,n,r,i,o){for(var a=[],s=t.children,c,l,u=0,f=0,d=s.length,p,h,m=t.value,g,v,y,C,b,M,S;u<d;){p=i-n,h=o-r;do g=s[f++].value;while(!g&&f<d);for(v=y=g,M=Math.max(h/p,p/h)/(m*e),S=g*g*M,b=Math.max(y/S,S/v);f<d;++f){if(g+=l=s[f].value,l<v&&(v=l),l>y&&(y=l),S=g*g*M,C=Math.max(y/S,S/v),C>b){g-=l;break}b=C}a.push(c={value:g,dice:p<h,children:s.slice(u,f)}),c.dice?A2(c,n,r,i,m?r+=h*g/m:o):uc(c,n,r,m?n+=p*g/m:i,o),m-=g,u=f}return a}var dp=function e(t){function n(r,i,o,a,s){sk(t,r,i,o,a,s)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(ak);function ck(){var e=dp,t=!1,n=1,r=1,i=[0],o=lc,a=lc,s=lc,c=lc,l=lc;function u(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(Qx),d}function f(d){var p=i[d.depth],h=d.x0+p,m=d.y0+p,g=d.x1-p,v=d.y1-p;g<h&&(h=g=(h+g)/2),v<m&&(m=v=(m+v)/2),d.x0=h,d.y0=m,d.x1=g,d.y1=v,d.children&&(p=i[d.depth+1]=o(d)/2,h+=l(d)-p,m+=a(d)-p,g-=s(d)-p,v-=c(d)-p,g<h&&(h=g=(h+g)/2),v<m&&(m=v=(m+v)/2),e(d,h,m,g,v))}return u.round=function(d){return arguments.length?(t=!!d,u):t},u.size=function(d){return arguments.length?(n=+d[0],r=+d[1],u):[n,r]},u.tile=function(d){return arguments.length?(e=Q_(d),u):e},u.padding=function(d){return arguments.length?u.paddingInner(d).paddingOuter(d):u.paddingInner()},u.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:W3(+d),u):o},u.paddingOuter=function(d){return arguments.length?u.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):u.paddingTop()},u.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:W3(+d),u):a},u.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:W3(+d),u):s},u.paddingBottom=function(d){return arguments.length?(c=typeof d=="function"?d:W3(+d),u):c},u.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:W3(+d),u):l},u}function lk(e,t,n,r,i){var o=e.children,a,s=o.length,c,l=new Array(s+1);for(l[0]=c=a=0;a<s;++a)l[a+1]=c+=o[a].value;u(0,s,e.value,t,n,r,i);function u(f,d,p,h,m,g,v){if(f>=d-1){var y=o[f];y.x0=h,y.y0=m,y.x1=g,y.y1=v;return}for(var C=l[f],b=p/2+C,M=f+1,S=d-1;M<S;){var w=M+S>>>1;l[w]<b?M=w+1:S=w}b-l[M-1]<l[M]-b&&f+1<M&&--M;var E=l[M]-C,D=p-E;if(g-h>v-m){var z=p?(h*D+g*E)/p:g;u(f,M,E,h,m,z,v),u(M,d,D,z,m,g,v)}else{var L=p?(m*D+v*E)/p:v;u(f,M,E,h,m,g,L),u(M,d,D,h,L,g,v)}}}function uk(e,t,n,r,i){(e.depth&1?uc:A2)(e,t,n,r,i)}var fk=function e(t){function n(r,i,o,a,s){if((c=r._squarify)&&c.ratio===t)for(var c,l,u,f,d=-1,p,h=c.length,m=r.value;++d<h;){for(l=c[d],u=l.children,f=l.value=0,p=u.length;f<p;++f)l.value+=u[f].value;l.dice?A2(l,i,o,a,m?o+=(s-o)*l.value/m:s):uc(l,i,o,m?i+=(a-i)*l.value/m:a,s),m-=l.value}else r._squarify=c=sk(t,r,i,o,a,s),c.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(ak);function dk(e,t,n){let r={};return e.each(i=>{let o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function vk(e){$.call(this,null,e)}vk.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var Bbe=e=>e.values;ee(vk,$,{transform(e,t){t.source||B("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(a=>{a.children&&ll(a.data)&&i.rem.push(a.data)}),this.value=o=Uu({values:te(e.keys).reduce((a,s)=>(a.key(s),a),Ube()).entries(i.source)},Bbe),n&&o.each(a=>{a.children&&(a=lt(a.data),i.add.push(a),i.source.push(a))}),dk(o,De,De)),i.source.root=o,i}});function Ube(){let e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;let a=i.length,s=e[o++],c={},l={},u=-1,f,d,p;for(;++u<a;)f=s(d=i[u])+"",(p=c[f])?p.push(d):c[f]=[d];for(f in c)l[f]=n(c[f],o);return l}function r(i,o){if(++o>e.length)return i;let a=[];for(let s in i)a.push({key:s,values:r(i[s],o)});return a}return t}function fc(e){$.call(this,null,e)}var jbe=(e,t)=>e.parent===t.parent?1:2;ee(fc,$,{transform(e,t){(!t.source||!t.source.root)&&B(this.constructor.name+" transform requires a backing tree data source.");let n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(_a(e.sort,a=>a.data)),Gbe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?jbe:za);try{this.value=n(i)}catch(a){B(a)}return i.each(a=>qbe(a,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function Gbe(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function qbe(e,t,n){let r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}var pk=["x","y","r","depth","children"];function yk(e){fc.call(this,e)}yk.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:pk.length,default:pk}]};ee(yk,fc,{layout:J_,params:["radius","size","padding"],fields:pk});var hk=["x0","y0","x1","y1","depth","children"];function xk(e){fc.call(this,e)}xk.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:hk.length,default:hk}]};ee(xk,fc,{layout:ek,params:["size","round","padding"],fields:hk});function Ck(e){$.call(this,null,e)}Ck.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ee(Ck,$,{transform(e,t){t.source||B("Stratify transform requires an upstream data source.");let n=this.value,r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?dk(Kx().id(e.key).parentId(e.parentKey)(i.source),e.key,sr):dk(Kx()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});var _J={tidy:ok,cluster:Y_},mk=["x","y","depth","children"];function bk(e){fc.call(this,e)}bk.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:mk.length,default:mk}]};ee(bk,fc,{layout(e){let t=e||"tidy";if(he(_J,t))return _J[t]();B("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:mk});function Mk(e){$.call(this,[],e)}Mk.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ee(Mk,$,{transform(e,t){let n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||B("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,a=>o[De(a)]=1),r.each(a=>{let s=a.data,c=a.parent&&a.parent.data;c&&o[De(s)]&&o[De(c)]&&i.add.push(lt({source:c,target:s}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>o[De(a)]=1),n.forEach(a=>{(o[De(a.source)]||o[De(a.target)])&&i.mod.push(a)})),i}});var kJ={binary:lk,dice:A2,slice:uc,slicedice:uk,squarify:dp,resquarify:fk},gk=["x0","y0","x1","y1","depth","children"];function wk(e){fc.call(this,e)}wk.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:gk.length,default:gk}]};ee(wk,fc,{layout(){let e=ck();return e.ratio=t=>{let n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{he(kJ,t)?e.tile(kJ[t]):B("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:gk});var Tk={};mr(Tk,{label:()=>kk});var Ek=4278190080;function Wbe(e,t){let n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function Ybe(e,t,n,r,i){let o=e.width,a=e.height,s=r||i,c=ko(o,a).getContext("2d"),l=ko(o,a).getContext("2d"),u=s&&ko(o,a).getContext("2d");n.forEach(E=>Jx(c,E,!1)),Jx(l,t,!1),s&&Jx(u,t,!0);let f=Dk(c,o,a),d=Dk(l,o,a),p=s&&Dk(u,o,a),h=e.bitmap(),m=s&&e.bitmap(),g,v,y,C,b,M,S,w;for(v=0;v<a;++v)for(g=0;g<o;++g)b=v*o+g,M=f[b]&Ek,w=d[b]&Ek,S=s&&p[b]&Ek,(M||S||w)&&(y=e(g),C=e(v),!i&&(M||w)&&h.set(y,C),s&&(M||S)&&m.set(y,C));return[h,m]}function Dk(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function Jx(e,t,n){if(!t.length)return;let r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>Jx(e,o.items,n))}):Ji[r].draw(e,{items:n?t.map(Xbe):t})}function Xbe(e){let t=ul(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?k(x({},t),{strokeOpacity:1,stroke:"#000",fillOpacity:0}):t}var dc=5,o1=31,pp=32,Y3=new Uint32Array(pp+1),V2=new Uint32Array(pp+1);V2[0]=0;Y3[0]=~V2[0];for(let e=1;e<=pp;++e)V2[e]=V2[e-1]<<1|1,Y3[e]=~V2[e];function Qbe(e,t){let n=new Uint32Array(~~((e*t+pp)/pp));function r(o,a){n[o]|=a}function i(o,a){n[o]&=a}return{array:n,get:(o,a)=>{let s=a*e+o;return n[s>>>dc]&1<<(s&o1)},set:(o,a)=>{let s=a*e+o;r(s>>>dc,1<<(s&o1))},clear:(o,a)=>{let s=a*e+o;i(s>>>dc,~(1<<(s&o1)))},getRange:(o,a,s,c)=>{let l=c,u,f,d,p;for(;l>=a;--l)if(u=l*e+o,f=l*e+s,d=u>>>dc,p=f>>>dc,d===p){if(n[d]&Y3[u&o1]&V2[(f&o1)+1])return!0}else{if(n[d]&Y3[u&o1]||n[p]&V2[(f&o1)+1])return!0;for(let h=d+1;h<p;++h)if(n[h])return!0}return!1},setRange:(o,a,s,c)=>{let l,u,f,d,p;for(;a<=c;++a)if(l=a*e+o,u=a*e+s,f=l>>>dc,d=u>>>dc,f===d)r(f,Y3[l&o1]&V2[(u&o1)+1]);else for(r(f,Y3[l&o1]),r(d,V2[(u&o1)+1]),p=f+1;p<d;++p)r(p,4294967295)},clearRange:(o,a,s,c)=>{let l,u,f,d,p;for(;a<=c;++a)if(l=a*e+o,u=a*e+s,f=l>>>dc,d=u>>>dc,f===d)i(f,V2[l&o1]|Y3[(u&o1)+1]);else for(i(f,V2[l&o1]),i(d,Y3[(u&o1)+1]),p=f+1;p<d;++p)i(p,0)},outOfBounds:(o,a,s,c)=>o<0||a<0||c>=t||s>=e}}function Kbe(e,t,n){let r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=s=>~~((s+n)/r);return a.invert=s=>s*r-n,a.bitmap=()=>Qbe(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function Zbe(e,t,n,r){let i=e.width,o=e.height;return function(a){let s=a.datum.datum.items[r].items,c=s.length,l=a.datum.fontSize,u=L1.width(a.datum,a.datum.text),f=0,d,p,h,m,g,v,y;for(let C=0;C<c;++C)d=s[C].x,h=s[C].y,p=s[C].x2===void 0?d:s[C].x2,m=s[C].y2===void 0?h:s[C].y2,g=(d+p)/2,v=(h+m)/2,y=Math.abs(p-d+m-h),y>=f&&(f=y,a.x=g,a.y=v);return g=u/2,v=l/2,d=a.x-g,p=a.x+g,h=a.y-v,m=a.y+v,a.align="center",d<0&&p<=i?a.align="left":0<=d&&i<p&&(a.align="right"),a.baseline="middle",h<0&&m<=o?a.baseline="top":0<=h&&o<m&&(a.baseline="bottom"),!0}}function eC(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function X3(e,t,n,r,i,o,a,s){let c=i*o/(r*2),l=e(t-c),u=e(t+c),f=e(n-(o=o/2)),d=e(n+o);return a.outOfBounds(l,f,u,d)||a.getRange(l,f,u,d)||s&&s.getRange(l,f,u,d)}function Jbe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1];function c(l,u,f,d,p){let h=e.invert(l),m=e.invert(u),g=f,v=o,y;if(!eC(h,m,d,p,i,o)&&!X3(e,h,m,p,d,g,a,s)&&!X3(e,h,m,p,d,p,a,null)){for(;v-g>=1;)y=(g+v)/2,X3(e,h,m,p,d,y,a,s)?v=y:g=y;if(g>f)return[h,m,g,!0]}}return function(l){let u=l.datum.datum.items[r].items,f=u.length,d=l.datum.fontSize,p=L1.width(l.datum,l.datum.text),h=n?d:0,m=!1,g=!1,v=0,y,C,b,M,S,w,E,D,z,L,G,A,_,V,I,W,X;for(let J=0;J<f;++J){for(y=u[J].x,b=u[J].y,C=u[J].x2===void 0?y:u[J].x2,M=u[J].y2===void 0?b:u[J].y2,y>C&&(X=y,y=C,C=X),b>M&&(X=b,b=M,M=X),z=e(y),G=e(C),L=~~((z+G)/2),A=e(b),V=e(M),_=~~((A+V)/2),E=L;E>=z;--E)for(D=_;D>=A;--D)W=c(E,D,h,p,d),W&&([l.x,l.y,h,m]=W);for(E=L;E<=G;++E)for(D=_;D<=V;++D)W=c(E,D,h,p,d),W&&([l.x,l.y,h,m]=W);!m&&!n&&(I=Math.abs(C-y+M-b),S=(y+C)/2,w=(b+M)/2,I>=v&&!eC(S,w,p,d,i,o)&&!X3(e,S,w,d,p,d,a,null)&&(v=I,l.x=S,l.y=w,g=!0))}return m||g?(S=p/2,w=d/2,a.setRange(e(l.x-S),e(l.y-w),e(l.x+S),e(l.y+w)),l.align="center",l.baseline="middle",!0):!1}}var eMe=[-1,-1,1,1],tMe=[-1,1,-1,1];function nMe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1],c=e.bitmap();return function(l){let u=l.datum.datum.items[r].items,f=u.length,d=l.datum.fontSize,p=L1.width(l.datum,l.datum.text),h=[],m=n?d:0,g=!1,v=!1,y=0,C,b,M,S,w,E,D,z,L,G,A,_;for(let V=0;V<f;++V){for(C=u[V].x,M=u[V].y,b=u[V].x2===void 0?C:u[V].x2,S=u[V].y2===void 0?M:u[V].y2,h.push([e((C+b)/2),e((M+S)/2)]);h.length;)if([D,z]=h.pop(),!(a.get(D,z)||s.get(D,z)||c.get(D,z))){c.set(D,z);for(let I=0;I<4;++I)w=D+eMe[I],E=z+tMe[I],c.outOfBounds(w,E,w,E)||h.push([w,E]);if(w=e.invert(D),E=e.invert(z),L=m,G=o,!eC(w,E,p,d,i,o)&&!X3(e,w,E,d,p,L,a,s)&&!X3(e,w,E,d,p,d,a,null)){for(;G-L>=1;)A=(L+G)/2,X3(e,w,E,d,p,A,a,s)?G=A:L=A;L>m&&(l.x=w,l.y=E,m=L,g=!0)}}!g&&!n&&(_=Math.abs(b-C+S-M),w=(C+b)/2,E=(M+S)/2,_>=y&&!eC(w,E,p,d,i,o)&&!X3(e,w,E,d,p,d,a,null)&&(y=_,l.x=w,l.y=E,v=!0))}return g||v?(w=p/2,E=d/2,a.setRange(e(l.x-w),e(l.y-E),e(l.x+w),e(l.y+E)),l.align="center",l.baseline="middle",!0):!1}}var rMe=["right","center","left"],iMe=["bottom","middle","top"];function oMe(e,t,n,r){let i=e.width,o=e.height,a=t[0],s=t[1],c=r.length;return function(l){let u=l.boundary,f=l.datum.fontSize;if(u[2]<0||u[5]<0||u[0]>i||u[3]>o)return!1;let d=l.textWidth??0,p,h,m,g,v,y,C,b,M,S,w,E,D,z,L;for(let G=0;G<c;++G){if(p=(n[G]&3)-1,h=(n[G]>>>2&3)-1,m=p===0&&h===0||r[G]<0,g=p&&h?Math.SQRT1_2:1,v=r[G]<0?-1:1,y=u[1+p]+r[G]*p*g,w=u[4+h]+v*f*h/2+r[G]*h*g,b=w-f/2,M=w+f/2,E=e(y),z=e(b),L=e(M),!d)if(TJ(E,E,z,L,a,s,y,y,b,M,u,m))d=L1.width(l.datum,l.datum.text);else continue;if(S=y+v*d*p/2,y=S-d/2,C=S+d/2,E=e(y),D=e(C),TJ(E,D,z,L,a,s,y,C,b,M,u,m))return l.x=p?p*v<0?C:y:S,l.y=h?h*v<0?M:b:w,l.align=rMe[p*v+1],l.baseline=iMe[h*v+1],a.setRange(E,z,D,L),!0}return!1}}function TJ(e,t,n,r,i,o,a,s,c,l,u,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}var zk=0,Hk=4,Lk=8,Ak=0,Vk=1,Nk=2,aMe={"top-left":zk+Ak,top:zk+Vk,"top-right":zk+Nk,left:Hk+Ak,middle:Hk+Vk,right:Hk+Nk,"bottom-left":Lk+Ak,bottom:Lk+Vk,"bottom-right":Lk+Nk},sMe={naive:Zbe,"reduced-search":Jbe,floodfill:nMe};function cMe(e,t,n,r,i,o,a,s,c,l,u){if(!e.length)return e;let f=Math.max(r.length,i.length),d=lMe(r,f),p=uMe(i,f),h=fMe(e[0].datum),m=h==="group"&&e[0].datum.items[c].marktype,g=m==="area",v=dMe(h,m,s,c),y=l===null||l===1/0,C=g&&u==="naive",b=-1,M=-1,S=e.map(z=>{let L=y?L1.width(z,z.text):void 0;return b=Math.max(b,L),M=Math.max(M,z.fontSize),{datum:z,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(z),textWidth:L}});l=l===null||l===1/0?Math.max(b,M)+Math.max(...r):l;let w=Kbe(t[0],t[1],l),E;if(!C){n&&S.sort((G,A)=>n(G.datum,A.datum));let z=!1;for(let G=0;G<p.length&&!z;++G)z=p[G]===5||d[G]<0;let L=(h&&a||g)&&e.map(G=>G.datum);E=o.length||L?Ybe(w,L||[],o,z,g):Wbe(w,a&&S)}let D=g?sMe[u](w,E,a,c):oMe(w,E,p,d);return S.forEach(z=>z.opacity=+D(z)),S}function lMe(e,t){let n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function uMe(e,t){let n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=aMe[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function fMe(e){return e&&e.mark&&e.mark.marktype}function dMe(e,t,n,r){let i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{let a=o.datum.items[r].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:o=>{let a=o.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}var _k=["x","y","opacity","align","baseline"],IJ=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function kk(e){$.call(this,null,e)}kk.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:IJ},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:_k.length,default:_k}]};ee(kk,$,{transform(e,t){function n(o){let a=e[o];return Ie(a)&&t.modified(a.fields)}let r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&B("Size parameter should be specified as a [width, height] array.");let i=e.as||_k;return cMe(t.materialize(t.SOURCE).source||[],e.size,e.sort,te(e.offset==null?1:e.offset),te(e.anchor||IJ),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{let a=o.datum;a[i[0]]=o.x,a[i[1]]=o.y,a[i[2]]=o.opacity,a[i[3]]=o.align,a[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});var Ok={};mr(Ok,{loess:()=>Fk,regression:()=>Rk});function FJ(e,t){var n=[],r=function(u){return u(s)},i,o,a,s,c,l;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],c=t.map(r),l=i[c],l||(i[c]=l=[],l.dims=c,n.push(l)),l.push(s);return n}function Fk(e){$.call(this,null,e)}Fk.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ee(Fk,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=FJ(r,e.groupby),o=(e.groupby||[]).map(an),a=o.length,s=e.as||[an(e.x),an(e.y)],c=[];i.forEach(l=>{zL(l,e.x,e.y,e.bandwidth||.3).forEach(u=>{let f={};for(let d=0;d<a;++d)f[o[d]]=l.dims[d];f[s[0]]=u[0],f[s[1]]=u[1],c.push(lt(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});var Ik={constant:zv,linear:Lv,log:wL,exp:SL,pow:EL,quad:Av,poly:DL},pMe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Rk(e){$.call(this,null,e)}Rk.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Ik)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ee(Rk,$,{transform(e,t){let n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let r=t.materialize(t.SOURCE).source,i=FJ(r,e.groupby),o=(e.groupby||[]).map(an),a=e.method||"linear",s=e.order==null?3:e.order,c=pMe(a,s),l=e.as||[an(e.x),an(e.y)],u=Ik[a],f=[],d=e.extent;he(Ik,a)||B("Invalid regression method: "+a),d!=null&&a==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(p=>{if(p.length<=c){t.dataflow.warn("Skipping regression with more parameters than data points.");return}let m=u(p,e.x,e.y,s);if(e.params){f.push(lt({keys:p.dims,coef:m.coef,rSquared:m.rSquared}));return}let g=d||Gi(p,e.x),v=y=>{let C={};for(let b=0;b<o.length;++b)C[o[b]]=p.dims[b];C[l[0]]=y[0],C[l[1]]=y[1],f.push(lt(C))};a==="linear"||a==="constant"?g.forEach(y=>v([y,m.predict(y)])):nu(m.predict,g,25,200).forEach(v)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});var Bk={};mr(Bk,{voronoi:()=>$k});var Ct=11102230246251565e-32,Qn=134217729,hp=(3+8*Ct)*Ct;function Gl(e,t,n,r,i){let o,a,s,c,l=t[0],u=r[0],f=0,d=0;u>l==u>-l?(o=l,l=t[++f]):(o=u,u=r[++d]);let p=0;if(f<e&&d<n)for(u>l==u>-l?(a=l+o,s=o-(a-l),l=t[++f]):(a=u+o,s=o-(a-u),u=r[++d]),o=a,s!==0&&(i[p++]=s);f<e&&d<n;)u>l==u>-l?(a=o+l,c=a-o,s=o-(a-c)+(l-c),l=t[++f]):(a=o+u,c=a-o,s=o-(a-c)+(u-c),u=r[++d]),o=a,s!==0&&(i[p++]=s);for(;f<e;)a=o+l,c=a-o,s=o-(a-c)+(l-c),l=t[++f],o=a,s!==0&&(i[p++]=s);for(;d<n;)a=o+u,c=a-o,s=o-(a-c)+(u-c),u=r[++d],o=a,s!==0&&(i[p++]=s);return(o!==0||p===0)&&(i[p++]=o),p}function mp(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function re(e){return new Float64Array(e)}var hMe=(3+16*Ct)*Ct,mMe=(2+12*Ct)*Ct,gMe=(9+64*Ct)*Ct*Ct,Gu=re(4),RJ=re(8),OJ=re(12),PJ=re(16),a1=re(4);function vMe(e,t,n,r,i,o,a){let s,c,l,u,f,d,p,h,m,g,v,y,C,b,M,S,w,E,D=e-i,z=n-i,L=t-o,G=r-o;b=D*G,d=Qn*D,p=d-(d-D),h=D-p,d=Qn*G,m=d-(d-G),g=G-m,M=h*g-(b-p*m-h*m-p*g),S=L*z,d=Qn*L,p=d-(d-L),h=L-p,d=Qn*z,m=d-(d-z),g=z-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,Gu[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,Gu[1]=C-(v+f)+(f-S),E=y+v,f=E-y,Gu[2]=y-(E-f)+(v-f),Gu[3]=E;let A=mp(4,Gu),_=mMe*a;if(A>=_||-A>=_||(f=e-D,s=e-(D+f)+(f-i),f=n-z,l=n-(z+f)+(f-i),f=t-L,c=t-(L+f)+(f-o),f=r-G,u=r-(G+f)+(f-o),s===0&&c===0&&l===0&&u===0)||(_=gMe*a+hp*Math.abs(A),A+=D*u+G*s-(L*l+z*c),A>=_||-A>=_))return A;b=s*G,d=Qn*s,p=d-(d-s),h=s-p,d=Qn*G,m=d-(d-G),g=G-m,M=h*g-(b-p*m-h*m-p*g),S=c*z,d=Qn*c,p=d-(d-c),h=c-p,d=Qn*z,m=d-(d-z),g=z-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,a1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,a1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,a1[2]=y-(E-f)+(v-f),a1[3]=E;let V=Gl(4,Gu,4,a1,RJ);b=D*u,d=Qn*D,p=d-(d-D),h=D-p,d=Qn*u,m=d-(d-u),g=u-m,M=h*g-(b-p*m-h*m-p*g),S=L*l,d=Qn*L,p=d-(d-L),h=L-p,d=Qn*l,m=d-(d-l),g=l-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,a1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,a1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,a1[2]=y-(E-f)+(v-f),a1[3]=E;let I=Gl(V,RJ,4,a1,OJ);b=s*u,d=Qn*s,p=d-(d-s),h=s-p,d=Qn*u,m=d-(d-u),g=u-m,M=h*g-(b-p*m-h*m-p*g),S=c*l,d=Qn*c,p=d-(d-c),h=c-p,d=Qn*l,m=d-(d-l),g=l-m,w=h*g-(S-p*m-h*m-p*g),v=M-w,f=M-v,a1[0]=M-(v+f)+(f-w),y=b+v,f=y-b,C=b-(y-f)+(v-f),v=C-S,f=C-v,a1[1]=C-(v+f)+(f-S),E=y+v,f=E-y,a1[2]=y-(E-f)+(v-f),a1[3]=E;let W=Gl(I,OJ,4,a1,PJ);return PJ[W-1]}function qu(e,t,n,r,i,o){let a=(t-o)*(n-i),s=(e-i)*(r-o),c=a-s,l=Math.abs(a+s);return Math.abs(c)>=hMe*l?c:-vMe(e,t,n,r,i,o,l)}var Q3t=(7+56*Ct)*Ct,K3t=(3+28*Ct)*Ct,Z3t=(26+288*Ct)*Ct*Ct,J3t=re(4),e4t=re(4),t4t=re(4),n4t=re(4),r4t=re(4),i4t=re(4),o4t=re(4),a4t=re(4),s4t=re(4),c4t=re(8),l4t=re(8),u4t=re(8),f4t=re(4),d4t=re(8),p4t=re(8),h4t=re(8),m4t=re(12),g4t=re(192),v4t=re(192);var C4t=(10+96*Ct)*Ct,b4t=(4+48*Ct)*Ct,M4t=(44+576*Ct)*Ct*Ct,w4t=re(4),S4t=re(4),E4t=re(4),D4t=re(4),z4t=re(4),H4t=re(4),L4t=re(4),A4t=re(4),V4t=re(8),N4t=re(8),_4t=re(8),k4t=re(8),T4t=re(8),I4t=re(8),F4t=re(8),R4t=re(8),O4t=re(8),P4t=re(4),$4t=re(4),B4t=re(4),U4t=re(8),j4t=re(16),G4t=re(16),q4t=re(16),W4t=re(32),Y4t=re(32),X4t=re(48),Q4t=re(64),K4t=re(1152),Z4t=re(1152);var nlt=(16+224*Ct)*Ct,rlt=(5+72*Ct)*Ct,ilt=(71+1408*Ct)*Ct*Ct,olt=re(4),alt=re(4),slt=re(4),clt=re(4),llt=re(4),ult=re(4),flt=re(4),dlt=re(4),plt=re(4),hlt=re(4),mlt=re(24),glt=re(24),vlt=re(24),ylt=re(24),xlt=re(24),Clt=re(24),blt=re(24),Mlt=re(24),wlt=re(24),Slt=re(24),Elt=re(1152),Dlt=re(1152),zlt=re(1152),Hlt=re(1152),Llt=re(1152),Alt=re(2304),Vlt=re(2304),Nlt=re(3456),_lt=re(5760),klt=re(8),Tlt=re(8),Ilt=re(8),Flt=re(16),Rlt=re(24),Olt=re(48),Plt=re(48),$lt=re(96),Blt=re(192),Ult=re(384),jlt=re(384),Glt=re(384),qlt=re(768);var Wlt=re(96),Ylt=re(96),Xlt=re(96),Qlt=re(1152);var BJ=Math.pow(2,-52),tC=new Uint32Array(512),vp=class e{static from(t,n=wMe,r=SMe){let i=t.length,o=new Float64Array(i*2);for(let a=0;a<i;a++){let s=t[a];o[2*a]=n(s),o[2*a+1]=r(s)}return new e(o)}constructor(t){let n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;let r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){let{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,a=t.length>>1,s=1/0,c=1/0,l=-1/0,u=-1/0;for(let D=0;D<a;D++){let z=t[2*D],L=t[2*D+1];z<s&&(s=z),L<c&&(c=L),z>l&&(l=z),L>u&&(u=L),this._ids[D]=D}let f=(s+l)/2,d=(c+u)/2,p,h,m;for(let D=0,z=1/0;D<a;D++){let L=Pk(f,d,t[2*D],t[2*D+1]);L<z&&(p=D,z=L)}let g=t[2*p],v=t[2*p+1];for(let D=0,z=1/0;D<a;D++){if(D===p)continue;let L=Pk(g,v,t[2*D],t[2*D+1]);L<z&&L>0&&(h=D,z=L)}let y=t[2*h],C=t[2*h+1],b=1/0;for(let D=0;D<a;D++){if(D===p||D===h)continue;let z=bMe(g,v,y,C,t[2*D],t[2*D+1]);z<b&&(m=D,b=z)}let M=t[2*m],S=t[2*m+1];if(b===1/0){for(let L=0;L<a;L++)this._dists[L]=t[2*L]-t[0]||t[2*L+1]-t[1];Wu(this._ids,this._dists,0,a-1);let D=new Uint32Array(a),z=0;for(let L=0,G=-1/0;L<a;L++){let A=this._ids[L],_=this._dists[A];_>G&&(D[z++]=A,G=_)}this.hull=D.subarray(0,z),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(qu(g,v,y,C,M,S)<0){let D=h,z=y,L=C;h=m,y=M,C=S,m=D,M=z,S=L}let w=MMe(g,v,y,C,M,S);this._cx=w.x,this._cy=w.y;for(let D=0;D<a;D++)this._dists[D]=Pk(t[2*D],t[2*D+1],w.x,w.y);Wu(this._ids,this._dists,0,a-1),this._hullStart=p;let E=3;r[p]=n[m]=h,r[h]=n[p]=m,r[m]=n[h]=p,i[p]=0,i[h]=1,i[m]=2,o.fill(-1),o[this._hashKey(g,v)]=p,o[this._hashKey(y,C)]=h,o[this._hashKey(M,S)]=m,this.trianglesLen=0,this._addTriangle(p,h,m,-1,-1,-1);for(let D=0,z,L;D<this._ids.length;D++){let G=this._ids[D],A=t[2*G],_=t[2*G+1];if(D>0&&Math.abs(A-z)<=BJ&&Math.abs(_-L)<=BJ||(z=A,L=_,G===p||G===h||G===m))continue;let V=0;for(let Se=0,Ee=this._hashKey(A,_);Se<this._hashSize&&(V=o[(Ee+Se)%this._hashSize],!(V!==-1&&V!==r[V]));Se++);V=n[V];let I=V,W;for(;W=r[I],qu(A,_,t[2*I],t[2*I+1],t[2*W],t[2*W+1])>=0;)if(I=W,I===V){I=-1;break}if(I===-1)continue;let X=this._addTriangle(I,G,r[I],-1,-1,i[I]);i[G]=this._legalize(X+2),i[I]=X,E++;let J=r[I];for(;W=r[J],qu(A,_,t[2*J],t[2*J+1],t[2*W],t[2*W+1])<0;)X=this._addTriangle(J,G,W,i[G],-1,i[J]),i[G]=this._legalize(X+2),r[J]=J,E--,J=W;if(I===V)for(;W=n[I],qu(A,_,t[2*W],t[2*W+1],t[2*I],t[2*I+1])<0;)X=this._addTriangle(W,G,I,-1,i[I],i[W]),this._legalize(X+2),i[W]=X,r[I]=I,E--,I=W;this._hullStart=n[G]=I,r[I]=n[J]=G,r[G]=J,o[this._hashKey(A,_)]=G,o[this._hashKey(t[2*I],t[2*I+1])]=I}this.hull=new Uint32Array(E);for(let D=0,z=this._hullStart;D<E;D++)this.hull[D]=z,z=r[z];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(xMe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){let{_triangles:n,_halfedges:r,coords:i}=this,o=0,a=0;for(;;){let s=r[t],c=t-t%3;if(a=c+(t+2)%3,s===-1){if(o===0)break;t=tC[--o];continue}let l=s-s%3,u=c+(t+1)%3,f=l+(s+2)%3,d=n[a],p=n[t],h=n[u],m=n[f];if(CMe(i[2*d],i[2*d+1],i[2*p],i[2*p+1],i[2*h],i[2*h+1],i[2*m],i[2*m+1])){n[t]=m,n[s]=d;let v=r[f];if(v===-1){let C=this._hullStart;do{if(this._hullTri[C]===f){this._hullTri[C]=t;break}C=this._hullPrev[C]}while(C!==this._hullStart)}this._link(t,v),this._link(s,r[a]),this._link(a,f);let y=l+(s+1)%3;o<tC.length&&(tC[o++]=y)}else{if(o===0)break;t=tC[--o]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,a){let s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=n,this._triangles[s+2]=r,this._link(s,i),this._link(s+1,o),this._link(s+2,a),this.trianglesLen+=3,s}};function xMe(e,t){let n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Pk(e,t,n,r){let i=e-n,o=t-r;return i*i+o*o}function CMe(e,t,n,r,i,o,a,s){let c=e-a,l=t-s,u=n-a,f=r-s,d=i-a,p=o-s,h=c*c+l*l,m=u*u+f*f,g=d*d+p*p;return c*(f*g-m*p)-l*(u*g-m*d)+h*(u*p-f*d)<0}function bMe(e,t,n,r,i,o){let a=n-e,s=r-t,c=i-e,l=o-t,u=a*a+s*s,f=c*c+l*l,d=.5/(a*l-s*c),p=(l*u-s*f)*d,h=(a*f-c*u)*d;return p*p+h*h}function MMe(e,t,n,r,i,o){let a=n-e,s=r-t,c=i-e,l=o-t,u=a*a+s*s,f=c*c+l*l,d=.5/(a*l-s*c),p=e+(l*u-s*f)*d,h=t+(a*f-c*u)*d;return{x:p,y:h}}function Wu(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){let o=e[i],a=t[o],s=i-1;for(;s>=n&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=o}else{let i=n+r>>1,o=n+1,a=r;gp(e,i,o),t[e[n]]>t[e[r]]&&gp(e,n,r),t[e[o]]>t[e[r]]&&gp(e,o,r),t[e[n]]>t[e[o]]&&gp(e,n,o);let s=e[o],c=t[s];for(;;){do o++;while(t[e[o]]<c);do a--;while(t[e[a]]>c);if(a<o)break;gp(e,o,a)}e[n+1]=e[a],e[a]=s,r-o+1>=a-n?(Wu(e,t,o,r),Wu(e,t,n,a-1)):(Wu(e,t,n,a-1),Wu(e,t,o,r))}}function gp(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function wMe(e){return e[0]}function SMe(e){return e[1]}var N2=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;let i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}};var ql=class{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}};var nC=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this,o,a,s=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,v=r.length,y,C;m<v;m+=3,g+=2){let b=r[m]*2,M=r[m+1]*2,S=r[m+2]*2,w=t[b],E=t[b+1],D=t[M],z=t[M+1],L=t[S],G=t[S+1],A=D-w,_=z-E,V=L-w,I=G-E,W=(A*I-_*V)*2;if(Math.abs(W)<1e-9){if(o===void 0){o=a=0;for(let J of n)o+=t[J*2],a+=t[J*2+1];o/=n.length,a/=n.length}let X=1e9*Math.sign((o-w)*I-(a-E)*V);y=(w+L)/2-X*I,C=(E+G)/2+X*V}else{let X=1/W,J=A*A+_*_,Se=V*V+I*I;y=w+(I*J-_*Se)*X,C=E+(A*Se-V*J)*X}s[g]=y,s[g+1]=C}let c=n[n.length-1],l,u=c*4,f,d=t[2*c],p,h=t[2*c+1];i.fill(0);for(let m=0;m<n.length;++m)c=n[m],l=u,f=d,p=h,u=c*4,d=t[2*c],h=t[2*c+1],i[l+2]=i[u]=p-h,i[l+3]=i[u+1]=d-f}render(t){let n=t==null?t=new N2:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:a,vectors:s}=this;if(o.length<=1)return null;for(let u=0,f=r.length;u<f;++u){let d=r[u];if(d<u)continue;let p=Math.floor(u/3)*2,h=Math.floor(d/3)*2,m=a[p],g=a[p+1],v=a[h],y=a[h+1];this._renderSegment(m,g,v,y,t)}let c,l=o[o.length-1];for(let u=0;u<o.length;++u){c=l,l=o[u];let f=Math.floor(i[l]/3)*2,d=a[f],p=a[f+1],h=c*4,m=this._project(d,p,s[h+2],s[h+3]);m&&this._renderSegment(d,p,m[0],m[1],t)}return n&&n.value()}renderBounds(t){let n=t==null?t=new N2:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){let r=n==null?n=new N2:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let a=2;a<o;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),r&&r.value()}*cellPolygons(){let{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){let i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){let n=new ql;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let a,s=this._regioncode(t,n),c=this._regioncode(r,i);s===0&&c===0?(o.moveTo(t,n),o.lineTo(r,i)):(a=this._clipSegment(t,n,r,i,s,c))&&(o.moveTo(a[0],a[1]),o.lineTo(a[2],a[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){let n=this._clip(t);if(n)for(let r of this.delaunay.neighbors(t)){let i=this._clip(r);if(i){e:for(let o=0,a=n.length;o<a;o+=2)for(let s=0,c=i.length;s<c;s+=2)if(n[o]===i[s]&&n[o+1]===i[s+1]&&n[(o+2)%a]===i[(s+c-2)%c]&&n[(o+3)%a]===i[(s+c-1)%c]){yield r;break e}}}}_cell(t){let{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,a=r[t];if(a===-1)return null;let s=[],c=a;do{let l=Math.floor(c/3);if(s.push(n[l*2],n[l*2+1]),c=c%3===2?c-2:c+1,o[c]!==t)break;c=i[c]}while(c!==a&&c!==-1);return s}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let n=this._cell(t);if(n===null)return null;let{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){let r=n.length,i=null,o,a,s=n[r-2],c=n[r-1],l,u=this._regioncode(s,c),f,d=0;for(let p=0;p<r;p+=2)if(o=s,a=c,s=n[p],c=n[p+1],l=u,u=this._regioncode(s,c),l===0&&u===0)f=d,d=0,i?i.push(s,c):i=[s,c];else{let h,m,g,v,y;if(l===0){if((h=this._clipSegment(o,a,s,c,l,u))===null)continue;[m,g,v,y]=h}else{if((h=this._clipSegment(s,c,o,a,u,l))===null)continue;[v,y,m,g]=h,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(v,y),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(v,y):i=[v,y]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,a){let s=o<a;for(s&&([t,n,r,i,o,a]=[r,i,t,n,a,o]);;){if(o===0&&a===0)return s?[r,i,t,n]:[t,n,r,i];if(o&a)return null;let c,l,u=o||a;u&8?(c=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):u&4?(c=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):u&2?(l=n+(i-n)*(this.xmax-t)/(r-t),c=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),c=this.xmin),o?(t=c,n=l,o=this._regioncode(t,n)):(r=c,i=l,a=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,a){let s=Array.from(n),c;if((c=this._project(s[0],s[1],r,i))&&s.unshift(c[0],c[1]),(c=this._project(s[s.length-2],s[s.length-1],o,a))&&s.push(c[0],c[1]),s=this._clipFinite(t,s))for(let l=0,u=s.length,f,d=this._edgecode(s[u-2],s[u-1]);l<u;l+=2)f=d,d=this._edgecode(s[l],s[l+1]),f&&d&&(l=this._edge(t,f,d,s,l),u=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,n,r,i,o){for(;n!==r;){let a,s;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,s=this.ymin;break}(i[o]!==a||i[o+1]!==s)&&this.contains(t,a,s)&&(i.splice(o,0,a,s),o+=2)}return o}_project(t,n,r,i){let o=1/0,a,s,c;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<o&&(c=this.ymin,s=t+(o=a)*r)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<o&&(c=this.ymax,s=t+(o=a)*r)}if(r>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/r)<o&&(s=this.xmax,c=n+(o=a)*i)}else if(r<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/r)<o&&(s=this.xmin,c=n+(o=a)*i)}return[s,c]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){let r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};var EMe=2*Math.PI,Yu=Math.pow;function DMe(e){return e[0]}function zMe(e){return e[1]}function HMe(e){let{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){let i=2*t[r],o=2*t[r+1],a=2*t[r+2];if((n[a]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function LMe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}var yp=class e{static from(t,n=DMe,r=zMe,i){return new e("length"in t?AMe(t,n,r,i):Float64Array.from(VMe(t,n,r,i)))}constructor(t){this._delaunator=new vp(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&HMe(t)){this.collinear=Int32Array.from({length:n.length/2},(d,p)=>p).sort((d,p)=>n[2*d]-n[2*p]||n[2*d+1]-n[2*p+1]);let c=this.collinear[0],l=this.collinear[this.collinear.length-1],u=[n[2*c],n[2*c+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let d=0,p=n.length/2;d<p;++d){let h=LMe(n[2*d],n[2*d+1],f);n[2*d]=h[0],n[2*d+1]=h[1]}this._delaunator=new vp(n)}else delete this.collinear;let r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let c=0,l=r.length;c<l;++c){let u=o[c%3===2?c-2:c+1];(r[c]===-1||a[u]===-1)&&(a[u]=c)}for(let c=0,l=i.length;c<l;++c)s[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],a[i[0]]=1,i.length===2&&(a[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new nC(this,t)}*neighbors(t){let{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:a,collinear:s}=this;if(s){let f=s.indexOf(t);f>0&&(yield s[f-1]),f<s.length-1&&(yield s[f+1]);return}let c=n[t];if(c===-1)return;let l=c,u=-1;do{if(yield u=a[l],l=l%3===2?l-2:l+1,a[l]!==t)return;if(l=o[l],l===-1){let f=r[(i[t]+1)%r.length];f!==u&&(yield f);return}}while(l!==c)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;let i=r,o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){let{inedges:i,hull:o,_hullIndex:a,halfedges:s,triangles:c,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let u=t,f=Yu(n-l[t*2],2)+Yu(r-l[t*2+1],2),d=i[t],p=d;do{let h=c[p],m=Yu(n-l[h*2],2)+Yu(r-l[h*2+1],2);if(m<f&&(f=m,u=h),p=p%3===2?p-2:p+1,c[p]!==t)break;if(p=s[p],p===-1){if(p=o[(a[t]+1)%o.length],p!==h&&Yu(n-l[p*2],2)+Yu(r-l[p*2+1],2)<f)return p;break}}while(p!==d);return u}render(t){let n=t==null?t=new N2:void 0,{points:r,halfedges:i,triangles:o}=this;for(let a=0,s=i.length;a<s;++a){let c=i[a];if(c<a)continue;let l=o[a]*2,u=o[c]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;let r=t==null?t=new N2:void 0,{points:i}=this;for(let o=0,a=i.length;o<a;o+=2){let s=i[o],c=i[o+1];t.moveTo(s+n,c),t.arc(s,c,n,0,EMe)}return r&&r.value()}renderHull(t){let n=t==null?t=new N2:void 0,{hull:r,points:i}=this,o=r[0]*2,a=r.length;t.moveTo(i[o],i[o+1]);for(let s=1;s<a;++s){let c=2*r[s];t.lineTo(i[c],i[c+1])}return t.closePath(),n&&n.value()}hullPolygon(){let t=new ql;return this.renderHull(t),t.value()}renderTriangle(t,n){let r=n==null?n=new N2:void 0,{points:i,triangles:o}=this,a=o[t*=3]*2,s=o[t+1]*2,c=o[t+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[s],i[s+1]),n.lineTo(i[c],i[c+1]),n.closePath(),r&&r.value()}*trianglePolygons(){let{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){let n=new ql;return this.renderTriangle(t,n),n.value()}};function AMe(e,t,n,r){let i=e.length,o=new Float64Array(i*2);for(let a=0;a<i;++a){let s=e[a];o[a*2]=t.call(r,s,a,e),o[a*2+1]=n.call(r,s,a,e)}return o}function*VMe(e,t,n,r){let i=0;for(let o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function $k(e){$.call(this,null,e)}$k.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var NMe=[-1e5,-1e5,1e5,1e5];ee($k,$,{transform(e,t){let n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:NMe;let o=this.value=yp.from(r,e.x,e.y).voronoi(i);for(let a=0,s=r.length;a<s;++a){let c=o.cellPolygon(a);r[a][n]=c&&!kMe(c)?_Me(c):null}return t.reflow(e.modified()).modifies(n)}});function _Me(e){let t=e[0][0],n=e[0][1],r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function kMe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}var Gk={};mr(Gk,{wordcloud:()=>jk});var Uk=Math.PI/180,xp=64,rC=2048;function TMe(){var e=[256,256],t,n,r,i,o,a,s,c=UJ,l=[],u=Math.random,f={};f.layout=function(){for(var h=d(ko()),m=$Me((e[0]>>5)*e[1]),g=null,v=l.length,y=-1,C=[],b=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:o(S),rotate:a(S),size:~~(r(S)+1e-14),padding:s(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,w)=>w.size-S.size);++y<v;){var M=b[y];M.x=e[0]*(u()+.5)>>1,M.y=e[1]*(u()+.5)>>1,IMe(h,M,b,y),M.hasText&&p(m,M,g)&&(C.push(M),g?RMe(g,M):g=[{x:M.x+M.x0,y:M.y+M.y0},{x:M.x+M.x1,y:M.y+M.y1}],M.x-=e[0]>>1,M.y-=e[1]>>1)}return C};function d(h){h.width=h.height=1;var m=Math.sqrt(h.getContext("2d").getImageData(0,0,1,1).data.length>>2);h.width=(xp<<5)/m,h.height=rC/m;var g=h.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function p(h,m,g){for(var v=m.x,y=m.y,C=Math.sqrt(e[0]*e[0]+e[1]*e[1]),b=c(e),M=u()<.5?1:-1,S=-M,w,E,D;(w=b(S+=M))&&(E=~~w[0],D=~~w[1],!(Math.min(Math.abs(E),Math.abs(D))>=C));)if(m.x=v+E,m.y=y+D,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!FMe(m,h,e[0]))&&(!g||OMe(m,g))){for(var z=m.sprite,L=m.width>>5,G=e[0]>>5,A=m.x-(L<<4),_=A&127,V=32-_,I=m.y1-m.y0,W=(m.y+m.y0)*G+(A>>5),X,J=0;J<I;J++){X=0;for(var Se=0;Se<=L;Se++)h[W+Se]|=X<<V|(Se<L?(X=z[J*L+Se])>>>_:0);W+=G}return m.sprite=null,!0}return!1}return f.words=function(h){return arguments.length?(l=h,f):l},f.size=function(h){return arguments.length?(e=[+h[0],+h[1]],f):e},f.font=function(h){return arguments.length?(n=Wl(h),f):n},f.fontStyle=function(h){return arguments.length?(i=Wl(h),f):i},f.fontWeight=function(h){return arguments.length?(o=Wl(h),f):o},f.rotate=function(h){return arguments.length?(a=Wl(h),f):a},f.text=function(h){return arguments.length?(t=Wl(h),f):t},f.spiral=function(h){return arguments.length?(c=BMe[h]||h,f):c},f.fontSize=function(h){return arguments.length?(r=Wl(h),f):r},f.padding=function(h){return arguments.length?(s=Wl(h),f):s},f.random=function(h){return arguments.length?(u=h,f):u},f}function IMe(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(xp<<5)/o,rC/o);var a=0,s=0,c=0,l=n.length,u,f,d,p,h;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,u=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*Uk),g=Math.cos(t.rotate*Uk),v=u*g,y=u*m,C=d*g,b=d*m;u=Math.max(Math.abs(v+b),Math.abs(v-b))+31>>5<<5,d=~~Math.max(Math.abs(y+C),Math.abs(y-C))}else u=u+31>>5<<5;if(d>c&&(c=d),a+u>=xp<<5&&(a=0,s+=c,c=0),s+d>=rC)break;i.translate((a+(u>>1))/o,(s+(d>>1))/o),t.rotate&&i.rotate(t.rotate*Uk),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=u,t.height=d,t.xoff=a,t.yoff=s,t.x1=u>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=u}for(var M=i.getImageData(0,0,(xp<<5)/o,rC/o).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(u=t.width,f=u>>5,d=t.y1-t.y0,p=0;p<d*f;p++)S[p]=0;if(a=t.xoff,a==null)return;s=t.yoff;var w=0,E=-1;for(h=0;h<d;h++){for(p=0;p<u;p++){var D=f*h+(p>>5),z=M[(s+h)*(xp<<5)+(a+p)<<2]?1<<31-p%32:0;S[D]|=z,w|=z}w?E=h:(t.y0++,d--,h--,s++)}t.y1=t.y0+E,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function FMe(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),a=o&127,s=32-a,c=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),u,f=0;f<c;f++){u=0;for(var d=0;d<=i;d++)if((u<<s|(d<i?(u=r[f*i+d])>>>a:0))&t[l+d])return!0;l+=n}return!1}function RMe(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function OMe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function UJ(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function PMe(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var a=o<0?-1:1;switch(Math.sqrt(1+4*a*o)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function $Me(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Wl(e){return typeof e=="function"?e:function(){return e}}var BMe={archimedean:UJ,rectangular:PMe},jJ=["x","y","font","fontSize","fontStyle","fontWeight","angle"],UMe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function jk(e){$.call(this,TMe(),e)}jk.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:jJ}]};ee(jk,$,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&B("Wordcloud size dimensions must be non-zero.");function n(h){let m=e[h];return Ie(m)&&t.modified(m.fields)}let r=e.modified();if(!(r||t.changed(t.ADD_REM)||UMe.some(n)))return;let i=t.materialize(t.SOURCE).source,o=this.value,a=e.as||jJ,s=e.fontSize||14,c;if(Ie(s)?c=e.fontSizeRange:s=fn(s),c){let h=s,m=pt("sqrt")().domain(Gi(i,h)).range(c);s=g=>m(h(g))}i.forEach(h=>{h[a[0]]=NaN,h[a[1]]=NaN,h[a[3]]=0});let l=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(Ki).layout(),u=o.size(),f=u[0]>>1,d=u[1]>>1,p=l.length;for(let h=0,m,g;h<p;++h)m=l[h],g=m.datum,g[a[0]]=m.x+f,g[a[1]]=m.y+d,g[a[2]]=m.font,g[a[3]]=m.size,g[a[4]]=m.style,g[a[5]]=m.weight,g[a[6]]=m.rotate;return t.reflow(r).modifies(a)}});var Yk={};mr(Yk,{crossfilter:()=>qk,resolvefilter:()=>Wk});var jMe=e=>new Uint8Array(e),GMe=e=>new Uint16Array(e),Cp=e=>new Uint32Array(e);function qMe(){let e=8,t=[],n=Cp(0),r=iC(0,e),i=iC(0,e);return{data:()=>t,seen:()=>n=WMe(n,t.length),add(o){for(let a=0,s=t.length,c=o.length,l;a<c;++a)l=o[a],l._index=s++,t.push(l)},remove(o,a){let s=t.length,c=Array(s-o),l=t,u,f,d;for(f=0;!a[f]&&f<s;++f)c[f]=t[f],l[f]=f;for(d=f;f<s;++f)u=t[f],a[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],c[d]=u,u._index=d++),r[f]=0;return t=c,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,a){r[o]|=a},clear(o,a){r[o]&=~a},resize(o,a){let s=r.length;(o>s||a>e)&&(e=Math.max(a,e),r=iC(o,e,r),i=iC(o,e))}}}function WMe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function iC(e,t,n){let r=(t<257?jMe:t<65537?GMe:Cp)(e);return n&&r.set(n),r}function GJ(e,t,n){let r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){let a=this,s=a.bisect(a.range,i.value),c=i.index,l=s[0],u=s[1],f=c.length,d;for(d=0;d<l;++d)o[c[d]]|=r;for(d=u;d<f;++d)o[c[d]]|=r;return a}}}function qJ(){let e=Cp(0),t=[],n=0;function r(s,c,l){if(!c.length)return[];let u=n,f=c.length,d=Cp(f),p=Array(f),h,m,g;for(g=0;g<f;++g)p[g]=s(c[g]),d[g]=g;if(p=YMe(p,d),u)h=t,m=e,t=Array(u+f),e=Cp(u+f),XMe(l,h,m,u,p,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=p,e=d}return n=u+f,{index:d,value:p}}function i(s,c){let l=n,u,f,d;for(f=0;!c[e[f]]&&f<l;++f);for(d=f;f<l;++f)c[u=e[f]]||(e[d]=u,t[d]=t[f],++d);n=l-s}function o(s){for(let c=0,l=n;c<l;++c)e[c]=s[e[c]]}function a(s,c){let l;return c?l=c.length:(c=t,l=n),[bH(c,s[0],0,l),Z4(c,s[1],0,l)]}return{insert:r,remove:i,bisect:a,reindex:o,index:()=>e,size:()=>n}}function YMe(e,t){return e.sort.call(t,(n,r)=>{let i=e[n],o=e[r];return i<o?-1:i>o?1:0}),Bg(e,t)}function XMe(e,t,n,r,i,o,a,s,c){let l=0,u=0,f;for(f=0;l<r&&u<a;++f)t[l]<i[u]?(s[f]=t[l],c[f]=n[l++]):(s[f]=i[u],c[f]=o[u++]+e);for(;l<r;++l,++f)s[f]=t[l],c[f]=n[l];for(;u<a;++u,++f)s[f]=i[u],c[f]=o[u]+e}function qk(e){$.call(this,qMe(),e),this._indices=null,this._dims=null}qk.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ee(qk,$,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){let n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length,s=0,c,l;for(;s<a;++s)c=n[s].fname,l=i[c]||(i[c]=qJ()),o.push(GJ(l,s,r[s]));return this.eval(e,t)},reinit(e,t){let n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,c=s.curr(),l=s.prev(),u=s.all(),f=n.rem=n.add,d=n.mod,p=i.length,h={},m,g,v,y,C,b,M,S,w;if(l.set(c),t.rem.length&&(C=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(b={},y=t.mod,M=0,S=y.length;M<S;++M)b[y[M]._index]=1;for(M=0;M<p;++M)w=r[M],(!a[M]||e.modified("fields",M)||t.modified(w.fields))&&(v=w.fname,(m=h[v])||(o[v]=g=qJ(),h[v]=m=g.insert(w,t.source,0)),a[M]=GJ(g,M,i[M]).onAdd(m,c));for(M=0,S=s.data().length;M<S;++M)C[M]||(l[M]!==c[M]?f.push(M):b[M]&&c[M]!==u&&d.push(M));return s.mask=(1<<p)-1,n},eval(e,t){let n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){let r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,c={},l=n.add,u=i.size()+r.length,f=o.length,d=i.size(),p,h,m;i.resize(u,f),i.add(r);let g=i.curr(),v=i.prev(),y=i.all();for(p=0;p<f;++p)h=s[p].fname,m=c[h]||(c[h]=a[h].insert(s[p],r,d)),o[p].onAdd(m,g);for(;d<u;++d)v[d]=y,g[d]!==y&&l.push(d)},modify(e,t){let n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod,s,c,l;for(s=0,c=a.length;s<c;++s)l=a[s]._index,i[l]!==o&&n.push(l)},remove(e,t,n){let r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),c={},l=n.rem,u=t.rem,f,d,p,h;for(f=0,d=u.length;f<d;++f)p=u[f]._index,c[p]=1,a[p]=h=o[p],o[p]=s,h!==s&&l.push(p);for(p in r)r[p].remove(d,c);return this.reindex(t,d,c),c},reindex(e,t,n){let r=this._indices,i=this.value;e.runAfter(()=>{let o=i.remove(t,n);for(let a in r)r[a].reindex(o)})},update(e,t,n){let r=this._dims,i=e.query,o=t.stamp,a=r.length,s=0,c,l;for(n.filters=0,l=0;l<a;++l)e.modified("query",l)&&(c=l,++s);if(s===1)s=r[c].one,this.incrementOne(r[c],i[c],n.add,n.rem);else for(l=0,s=0;l<a;++l)e.modified("query",l)&&(s|=r[l].one,this.incrementAll(r[l],i[l],o,n.add),n.rem=n.add);return s},incrementAll(e,t,n,r){let i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),c=e.index(),l=e.bisect(e.range),u=e.bisect(t),f=u[0],d=u[1],p=l[0],h=l[1],m=e.one,g,v,y;if(f<p)for(g=f,v=Math.min(p,d);g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;else if(f>p)for(g=p,v=Math.min(f,h);g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;if(d>h)for(g=Math.max(f,h),v=d;g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;else if(d<h)for(g=Math.max(p,d),v=h;g<v;++g)y=c[g],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=m;e.range=t.slice()},incrementOne(e,t,n,r){let i=this.value,o=i.curr(),a=e.index(),s=e.bisect(e.range),c=e.bisect(t),l=c[0],u=c[1],f=s[0],d=s[1],p=e.one,h,m,g;if(l<f)for(h=l,m=Math.min(f,u);h<m;++h)g=a[h],o[g]^=p,n.push(g);else if(l>f)for(h=f,m=Math.min(l,d);h<m;++h)g=a[h],o[g]^=p,r.push(g);if(u>d)for(h=Math.max(l,d),m=u;h<m;++h)g=a[h],o[g]^=p,n.push(g);else if(u<d)for(h=Math.max(f,u),m=d;h<m;++h)g=a[h],o[g]^=p,r.push(g);e.range=t.slice()}});function Wk(e){$.call(this,null,e)}Wk.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ee(Wk,$,{transform(e,t){let n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;let o=t.fork(t.ALL),a=r.data(),s=r.curr(),c=r.prev(),l=u=>s[u]&n?null:a[u];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,u=>{let f=s[u]&n;return!f&&f^c[u]&n?a[u]:null}),o.filter(o.REM,u=>{let f=s[u]&n;return f&&!(f^(f^c[u]&n))?a[u]:null})):(o.filter(o.ADD,l),o.filter(o.REM,u=>(s[u]&n)===i?a[u]:null)),o.filter(o.SOURCE,u=>l(u._index))}});var QMe="RawCode",hc="Literal",KMe="Property",ZMe="Identifier",JMe="ArrayExpression",ewe="BinaryExpression",eT="CallExpression",twe="ConditionalExpression",nwe="LogicalExpression",rwe="MemberExpression",iwe="ObjectExpression",owe="UnaryExpression";function _2(e){this.type=e}_2.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=awe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function awe(e){switch(e.type){case JMe:return e.elements;case ewe:case nwe:return[e.left,e.right];case eT:return[e.callee].concat(e.arguments);case twe:return[e.test,e.consequent,e.alternate];case rwe:return[e.object,e.property];case iwe:return e.properties;case KMe:return[e.key,e.value];case owe:return[e.argument];case ZMe:case hc:case QMe:default:return[]}}var Ya,we,q,Si,It,sC=1,Ep=2,Yl=3,Q3=4,cC=5,Ql=6,N1=7,Dp=8,swe=9;Ya={};Ya[sC]="Boolean";Ya[Ep]="<end>";Ya[Yl]="Identifier";Ya[Q3]="Keyword";Ya[cC]="Null";Ya[Ql]="Numeric";Ya[N1]="Punctuator";Ya[Dp]="String";Ya[swe]="RegularExpression";var cwe="ArrayExpression",lwe="BinaryExpression",uwe="CallExpression",fwe="ConditionalExpression",eee="Identifier",dwe="Literal",pwe="LogicalExpression",hwe="MemberExpression",mwe="ObjectExpression",gwe="Property",vwe="UnaryExpression",Er="Unexpected token %0",ywe="Unexpected number",xwe="Unexpected string",Cwe="Unexpected identifier",bwe="Unexpected reserved word",Mwe="Unexpected end of input",Zk="Invalid regular expression",Xk="Invalid regular expression: missing /",tee="Octal literals are not allowed in strict mode.",wwe="Duplicate data property in object literal not allowed in strict mode",Kr="ILLEGAL",wp="Disabled.",Swe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Ewe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function lC(e,t){if(!e)throw new Error("ASSERT: "+t)}function pc(e){return e>=48&&e<=57}function tT(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Mp(e){return"01234567".indexOf(e)>=0}function Dwe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Sp(e){return e===10||e===13||e===8232||e===8233}function zp(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Swe.test(String.fromCharCode(e))}function aC(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Ewe.test(String.fromCharCode(e))}var zwe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function nee(){for(;q<Si;){let e=we.charCodeAt(q);if(Dwe(e)||Sp(e))++q;else break}}function Jk(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)q<Si&&tT(we[q])?(r=we[q++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Ht({},Er,Kr);return String.fromCharCode(i)}function Hwe(){var e,t,n,r;for(e=we[q],t=0,e==="}"&&Ht({},Er,Kr);q<Si&&(e=we[q++],!!tT(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Ht({},Er,Kr),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function ree(){var e,t;for(e=we.charCodeAt(q++),t=String.fromCharCode(e),e===92&&(we.charCodeAt(q)!==117&&Ht({},Er,Kr),++q,e=Jk("u"),(!e||e==="\\"||!zp(e.charCodeAt(0)))&&Ht({},Er,Kr),t=e);q<Si&&(e=we.charCodeAt(q),!!aC(e));)++q,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),we.charCodeAt(q)!==117&&Ht({},Er,Kr),++q,e=Jk("u"),(!e||e==="\\"||!aC(e.charCodeAt(0)))&&Ht({},Er,Kr),t+=e);return t}function Lwe(){var e,t;for(e=q++;q<Si;){if(t=we.charCodeAt(q),t===92)return q=e,ree();if(aC(t))++q;else break}return we.slice(e,q)}function Awe(){var e,t,n;return e=q,t=we.charCodeAt(q)===92?ree():Lwe(),t.length===1?n=Yl:zwe.hasOwnProperty(t)?n=Q3:t==="null"?n=cC:t==="true"||t==="false"?n=sC:n=Yl,{type:n,value:t,start:e,end:q}}function Qk(){var e=q,t=we.charCodeAt(q),n,r=we[q],i,o,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++q,{type:N1,value:String.fromCharCode(t),start:e,end:q};default:if(n=we.charCodeAt(q+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return q+=2,{type:N1,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:q};case 33:case 61:return q+=2,we.charCodeAt(q)===61&&++q,{type:N1,value:we.slice(e,q),start:e,end:q}}}if(a=we.substr(q,4),a===">>>=")return q+=4,{type:N1,value:a,start:e,end:q};if(o=a.substr(0,3),o===">>>"||o==="<<="||o===">>=")return q+=3,{type:N1,value:o,start:e,end:q};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return q+=2,{type:N1,value:i,start:e,end:q};if(i==="//"&&Ht({},Er,Kr),"<>=!+-*%&|^/".indexOf(r)>=0)return++q,{type:N1,value:r,start:e,end:q};Ht({},Er,Kr)}function Vwe(e){let t="";for(;q<Si&&tT(we[q]);)t+=we[q++];return t.length===0&&Ht({},Er,Kr),zp(we.charCodeAt(q))&&Ht({},Er,Kr),{type:Ql,value:parseInt("0x"+t,16),start:e,end:q}}function Nwe(e){let t="0"+we[q++];for(;q<Si&&Mp(we[q]);)t+=we[q++];return(zp(we.charCodeAt(q))||pc(we.charCodeAt(q)))&&Ht({},Er,Kr),{type:Ql,value:parseInt(t,8),octal:!0,start:e,end:q}}function WJ(){var e,t,n;if(n=we[q],lC(pc(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=q,e="",n!=="."){if(e=we[q++],n=we[q],e==="0"){if(n==="x"||n==="X")return++q,Vwe(t);if(Mp(n))return Nwe(t);n&&pc(n.charCodeAt(0))&&Ht({},Er,Kr)}for(;pc(we.charCodeAt(q));)e+=we[q++];n=we[q]}if(n==="."){for(e+=we[q++];pc(we.charCodeAt(q));)e+=we[q++];n=we[q]}if(n==="e"||n==="E")if(e+=we[q++],n=we[q],(n==="+"||n==="-")&&(e+=we[q++]),pc(we.charCodeAt(q)))for(;pc(we.charCodeAt(q));)e+=we[q++];else Ht({},Er,Kr);return zp(we.charCodeAt(q))&&Ht({},Er,Kr),{type:Ql,value:parseFloat(e),start:t,end:q}}function _we(){var e="",t,n,r,i,o=!1;for(t=we[q],lC(t==="'"||t==='"',"String literal must starts with a quote"),n=q,++q;q<Si;)if(r=we[q++],r===t){t="";break}else if(r==="\\")if(r=we[q++],!r||!Sp(r.charCodeAt(0)))switch(r){case"u":case"x":we[q]==="{"?(++q,e+=Hwe()):e+=Jk(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Mp(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),q<Si&&Mp(we[q])&&(o=!0,i=i*8+"01234567".indexOf(we[q++]),"0123".indexOf(r)>=0&&q<Si&&Mp(we[q])&&(i=i*8+"01234567".indexOf(we[q++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&we[q]===`
`&&++q;else{if(Sp(r.charCodeAt(0)))break;e+=r}return t!==""&&Ht({},Er,Kr),{type:Dp,value:e,octal:o,start:n,end:q}}function kwe(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Ht({},Zk)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ht({},Zk)}try{return new RegExp(e,t)}catch{return null}}function Twe(){var e,t,n,r,i;for(e=we[q],lC(e==="/","Regular expression literal must start with a slash"),t=we[q++],n=!1,r=!1;q<Si;)if(e=we[q++],t+=e,e==="\\")e=we[q++],Sp(e.charCodeAt(0))&&Ht({},Xk),t+=e;else if(Sp(e.charCodeAt(0)))Ht({},Xk);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Ht({},Xk),i=t.substr(1,t.length-2),{value:i,literal:t}}function Iwe(){var e,t,n;for(t="",n="";q<Si&&(e=we[q],!!aC(e.charCodeAt(0)));)++q,e==="\\"&&q<Si?Ht({},Er,Kr):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ht({},Zk,n),{value:n,literal:t}}function Fwe(){var e,t,n,r;return It=null,nee(),e=q,t=Twe(),n=Iwe(),r=kwe(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:q}}function Rwe(e){return e.type===Yl||e.type===Q3||e.type===sC||e.type===cC}function iee(){if(nee(),q>=Si)return{type:Ep,start:q,end:q};let e=we.charCodeAt(q);return zp(e)?Awe():e===40||e===41||e===59?Qk():e===39||e===34?_we():e===46?pc(we.charCodeAt(q+1))?WJ():Qk():pc(e)?WJ():Qk()}function _1(){let e=It;return q=e.end,It=iee(),q=e.end,e}function oee(){let e=q;It=iee(),q=e}function Owe(e){let t=new _2(cwe);return t.elements=e,t}function YJ(e,t,n){let r=new _2(e==="||"||e==="&&"?pwe:lwe);return r.operator=e,r.left=t,r.right=n,r}function Pwe(e,t){let n=new _2(uwe);return n.callee=e,n.arguments=t,n}function $we(e,t,n){let r=new _2(fwe);return r.test=e,r.consequent=t,r.alternate=n,r}function nT(e){let t=new _2(eee);return t.name=e,t}function bp(e){let t=new _2(dwe);return t.value=e.value,t.raw=we.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function XJ(e,t,n){let r=new _2(hwe);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Bwe(e){let t=new _2(mwe);return t.properties=e,t}function QJ(e,t,n){let r=new _2(gwe);return r.key=t,r.value=n,r.kind=e,r}function Uwe(e,t){let n=new _2(vwe);return n.operator=e,n.argument=t,n.prefix=!0,n}function Ht(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,a)=>(lC(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=q,n.description=i,n}function uC(e){e.type===Ep&&Ht(e,Mwe),e.type===Ql&&Ht(e,ywe),e.type===Dp&&Ht(e,xwe),e.type===Yl&&Ht(e,Cwe),e.type===Q3&&Ht(e,bwe),Ht(e,Er,e.value)}function Ei(e){let t=_1();(t.type!==N1||t.value!==e)&&uC(t)}function ln(e){return It.type===N1&&It.value===e}function Kk(e){return It.type===Q3&&It.value===e}function jwe(){let e=[];for(q=It.start,Ei("[");!ln("]");)ln(",")?(_1(),e.push(null)):(e.push(Xl()),ln("]")||Ei(","));return _1(),Owe(e)}function KJ(){q=It.start;let e=_1();return e.type===Dp||e.type===Ql?(e.octal&&Ht(e,tee),bp(e)):nT(e.value)}function Gwe(){var e,t,n,r;if(q=It.start,e=It,e.type===Yl)return n=KJ(),Ei(":"),r=Xl(),QJ("init",n,r);if(e.type===Ep||e.type===N1)uC(e);else return t=KJ(),Ei(":"),r=Xl(),QJ("init",t,r)}function qwe(){var e=[],t,n,r,i={},o=String;for(q=It.start,Ei("{");!ln("}");)t=Gwe(),t.key.type===eee?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Ht({},wwe):i[r]=!0,e.push(t),ln("}")||Ei(",");return Ei("}"),Bwe(e)}function Wwe(){Ei("(");let e=rT();return Ei(")"),e}var Ywe={if:1};function Xwe(){var e,t,n;if(ln("("))return Wwe();if(ln("["))return jwe();if(ln("{"))return qwe();if(e=It.type,q=It.start,e===Yl||Ywe[It.value])n=nT(_1().value);else if(e===Dp||e===Ql)It.octal&&Ht(It,tee),n=bp(_1());else{if(e===Q3)throw new Error(wp);e===sC?(t=_1(),t.value=t.value==="true",n=bp(t)):e===cC?(t=_1(),t.value=null,n=bp(t)):ln("/")||ln("/=")?(n=bp(Fwe()),oee()):uC(_1())}return n}function Qwe(){let e=[];if(Ei("("),!ln(")"))for(;q<Si&&(e.push(Xl()),!ln(")"));)Ei(",");return Ei(")"),e}function Kwe(){q=It.start;let e=_1();return Rwe(e)||uC(e),nT(e.value)}function Zwe(){return Ei("."),Kwe()}function Jwe(){Ei("[");let e=rT();return Ei("]"),e}function eSe(){var e,t,n;for(e=Xwe();;)if(ln("."))n=Zwe(),e=XJ(".",e,n);else if(ln("("))t=Qwe(),e=Pwe(e,t);else if(ln("["))n=Jwe(),e=XJ("[",e,n);else break;return e}function ZJ(){let e=eSe();if(It.type===N1&&(ln("++")||ln("--")))throw new Error(wp);return e}function oC(){var e,t;if(It.type!==N1&&It.type!==Q3)t=ZJ();else{if(ln("++")||ln("--"))throw new Error(wp);if(ln("+")||ln("-")||ln("~")||ln("!"))e=_1(),t=oC(),t=Uwe(e.value,t);else{if(Kk("delete")||Kk("void")||Kk("typeof"))throw new Error(wp);t=ZJ()}}return t}function JJ(e){let t=0;if(e.type!==N1&&e.type!==Q3)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function tSe(){var e,t,n,r,i,o,a,s,c,l;if(e=It,c=oC(),r=It,i=JJ(r),i===0)return c;for(r.prec=i,_1(),t=[e,It],a=oC(),o=[c,r,a];(i=JJ(It))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,c=o.pop(),t.pop(),n=YJ(s,c,a),o.push(n);r=_1(),r.prec=i,o.push(r),t.push(It),n=oC(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=YJ(o[l-1].value,o[l-2],n),l-=2;return n}function Xl(){var e,t,n;return e=tSe(),ln("?")&&(_1(),t=Xl(),Ei(":"),n=Xl(),e=$we(e,t,n)),e}function rT(){let e=Xl();if(ln(","))throw new Error(wp);return e}function Xu(e){we=e,q=0,Si=we.length,It=null,oee();let t=rT();if(It.type!==Ep)throw new Error("Unexpect token after expression.");return t}var iT={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function oT(e){function t(a,s,c,l){let u=e(s[0]);return c&&(u=c+"("+u+")",c.lastIndexOf("new ",0)===0&&(u="("+u+")")),u+"."+a+(l<0?"":l===0?"()":"("+s.slice(1).map(e).join(",")+")")}function n(a,s,c){return l=>t(a,l,s,c)}let r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&B("Missing arguments to clamp function."),a.length>3&&B("Too many arguments to clamp function.");let s=a.map(e);return"Math.max("+s[1]+", Math.min("+s[2]+","+s[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(a){a.length<3&&B("Missing arguments to if function."),a.length>3&&B("Too many arguments to if function.");let s=a.map(e);return"("+s[0]+"?"+s[1]+":"+s[2]+")"}}}function nSe(e){let t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function fC(e){e=e||{};let t=e.allowed?cr(e.allowed):{},n=e.forbidden?cr(e.forbidden):{},r=e.constants||iT,i=(e.functions||oT)(f),o=e.globalvar,a=e.fieldvar,s=Ie(o)?o:h=>`${o}["${h}"]`,c={},l={},u=0;function f(h){if(Q(h))return h;let m=d[h.type];return m==null&&B("Unsupported type: "+h.type),m(h)}let d={Literal:h=>h.raw,Identifier:h=>{let m=h.name;return u>0?m:he(n,m)?B("Illegal identifier: "+m):he(r,m)?r[m]:he(t,m)?m:(c[m]=1,s(m))},MemberExpression:h=>{let m=!h.computed,g=f(h.object);m&&(u+=1);let v=f(h.property);return g===a&&(l[nSe(v)]=1),m&&(u-=1),g+(m?"."+v:"["+v+"]")},CallExpression:h=>{h.callee.type!=="Identifier"&&B("Illegal callee type: "+h.callee.type);let m=h.callee.name,g=h.arguments,v=he(i,m)&&i[m];return v||B("Unrecognized function: "+m),Ie(v)?v(g):v+"("+g.map(f).join(",")+")"},ArrayExpression:h=>"["+h.elements.map(f).join(",")+"]",BinaryExpression:h=>"("+f(h.left)+" "+h.operator+" "+f(h.right)+")",UnaryExpression:h=>"("+h.operator+f(h.argument)+")",ConditionalExpression:h=>"("+f(h.test)+"?"+f(h.consequent)+":"+f(h.alternate)+")",LogicalExpression:h=>"("+f(h.left)+h.operator+f(h.right)+")",ObjectExpression:h=>"{"+h.properties.map(f).join(",")+"}",Property:h=>{u+=1;let m=f(h.key);return u-=1,m+":"+f(h.value)}};function p(h){let m={code:f(h),globals:Object.keys(c),fields:Object.keys(l)};return c={},l={},m}return p.functions=i,p.constants=r,p}var aee=Symbol("vega_selection_getter");function uee(e){return(!e.getter||!e.getter[aee])&&(e.getter=Cr(e.field),e.getter[aee]=!0),e.getter}var sT="intersect",see="union",rSe="vlMulti",iSe="vlPoint",cee="or",oSe="and",Xa="_vgsid_",Hp=Cr(Xa),aSe="E",sSe="R",cSe="R-E",lSe="R-LE",uSe="R-RE",dC="index:unit";function lee(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,a,s;o<i;++o)if(s=n[o],a=uee(s)(e),m2(a)&&(a=Rn(a)),m2(r[o])&&(r[o]=Rn(r[o])),F(r[o])&&m2(r[o][0])&&(r[o]=r[o].map(Rn)),s.type===aSe){if(F(r[o])?r[o].indexOf(a)<0:a!==r[o])return!1}else if(s.type===sSe){if(!s3(a,r[o]))return!1}else if(s.type===uSe){if(!s3(a,r[o],!0,!1))return!1}else if(s.type===cSe){if(!s3(a,r[o],!1,!1))return!1}else if(s.type===lSe&&!s3(a,r[o],!1,!0))return!1;return!0}function fee(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[dC]&&r[dC].value:void 0,a=n===sT,s=i.length,c=0,l,u,f,d,p;c<s;++c)if(l=i[c],o&&a){if(u=u||{},f=u[d=l.unit]||0,f===-1)continue;if(p=lee(t,l),u[d]=p?-1:++f,p&&o.size===1)return!0;if(!p&&f===o.get(d).count)return!1}else if(p=lee(t,l),a^p)return p;return s&&a}var dee=Z1(Hp),fSe=dee.left,dSe=dee.right;function pee(e,t,n){let r=this.context.data[e],i=r?r.values.value:[],o=r?r[dC]&&r[dC].value:void 0,a=n===sT,s=Hp(t),c=fSe(i,s);if(c===i.length||Hp(i[c])!==s)return!1;if(o&&a){if(o.size===1)return!0;if(dSe(i,s)-c<o.size)return!1}return!0}function hee(e,t){return e.map(n=>Te(t.fields?{values:t.fields.map(r=>uee(r)(n.datum))}:{[Xa]:Hp(n.datum)},t))}function mee(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],a={},s={},c={},l,u,f,d,p,h,m,g,v,y,C=o.length,b=0,M,S;b<C;++b)if(l=o[b],d=l.unit,u=l.fields,f=l.values,u&&f){for(M=0,S=u.length;M<S;++M)p=u[M],m=a[p.field]||(a[p.field]={}),g=m[d]||(m[d]=[]),c[p.field]=v=p.type.charAt(0),y=aT[`${v}_union`],m[d]=y(g,te(f[M]));n&&(g=s[d]||(s[d]=[]),g.push(te(f).reduce((w,E,D)=>(w[u[D].field]=E,w),{})))}else p=Xa,h=Hp(l),m=a[p]||(a[p]={}),g=m[d]||(m[d]=[]),g.push(h),n&&(g=s[d]||(s[d]=[]),g.push({[Xa]:h}));if(t=t||see,a[Xa]?a[Xa]=aT[`${Xa}_${t}`](...Object.values(a[Xa])):Object.keys(a).forEach(w=>{a[w]=Object.keys(a[w]).map(E=>a[w][E]).reduce((E,D)=>E===void 0?D:aT[`${c[w]}_${t}`](E,D))}),o=Object.keys(s),n&&o.length){let w=r?iSe:rSe;a[w]=t===see?{[cee]:o.reduce((E,D)=>(E.push(...s[D]),E),[])}:{[oSe]:o.map(E=>({[cee]:s[E]}))}}return a}var aT={[`${Xa}_union`]:Wg,[`${Xa}_intersect`]:qg,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Rn(t[0]),r=Rn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Rn(t[0]),r=Rn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}},pSe=":",hSe="@";function pC(e,t,n,r){t[0].type!==hc&&B("First argument to selection functions must be a string literal.");let i=t[0].value,o=t.length>=2&&Ye(t).value,a="unit",s=hSe+a,c=pSe+i;o===sT&&!he(r,s)&&(r[s]=n.getData(i).indataRef(n,a)),he(r,c)||(r[c]=n.getData(i).tuplesRef())}function xee(e){let t=this.context.data[e];return t?t.values.value:[]}function mSe(e,t,n){let r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function gSe(e,t){let n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(sr).insert(t)),1}function vSe(e,t,n){if(e){let r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}var Lp=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},ySe=Lp("format"),Cee=Lp("timeFormat"),xSe=Lp("utcFormat"),CSe=Lp("timeParse"),bSe=Lp("utcParse"),hC=new Date(2e3,0,1);function mC(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(hC.setYear(2e3),hC.setMonth(e),hC.setDate(t),Cee.call(this,hC,n))}function MSe(e){return mC.call(this,e,1,"%B")}function wSe(e){return mC.call(this,e,1,"%b")}function SSe(e){return mC.call(this,0,2+e,"%A")}function ESe(e){return mC.call(this,0,2+e,"%a")}var DSe=":",zSe="@",lT="%",bee="$";function dT(e,t,n,r){t[0].type!==hc&&B("First argument to data functions must be a string literal.");let i=t[0].value,o=DSe+i;if(!he(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function HSe(e,t,n,r){t[0].type!==hc&&B("First argument to indata must be a string literal."),t[1].type!==hc&&B("Second argument to indata must be a string literal.");let i=t[0].value,o=t[1].value,a=zSe+o;he(a,r)||(r[a]=n.getData(i).indataRef(n,o))}function s1(e,t,n,r){if(t[0].type===hc)gee(n,r,t[0].value);else for(e in n.scales)gee(n,r,e)}function gee(e,t,n){let r=lT+n;if(!he(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Qa(e,t){if(Ie(e))return e;if(Q(e)){let n=t.scales[e];return n&&tX(n.value)?n.value:void 0}}function LSe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=s1,n._range=s1,n._scale=s1;let r=i=>"_["+(i.type===hc?Z(lT+i.value):Z(lT)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function pT(e,t){return function(n,r,i){if(n){let o=Qa(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}var ASe=pT("area",CN),VSe=pT("bounds",MN),NSe=pT("centroid",zN);function _Se(e,t){let n=Qa(e,(t||this).context);return n&&n.scale()}function kSe(e){let t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function hT(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function TSe(){return hT(this.context.dataflow,"warn",arguments)}function ISe(){return hT(this.context.dataflow,"info",arguments)}function FSe(){return hT(this.context.dataflow,"debug",arguments)}function cT(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function uT(e){let t=To(e),n=cT(t.r),r=cT(t.g),i=cT(t.b);return .2126*n+.7152*r+.0722*i}function RSe(e,t){let n=uT(e),r=uT(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function OSe(){let e=[].slice.call(arguments);return e.unshift({}),Te(...e)}function Mee(e,t){return e===t||e!==e&&t!==t?!0:F(e)?F(t)&&e.length===t.length?PSe(e,t):!1:ne(e)&&ne(t)?wee(e,t):!1}function PSe(e,t){for(let n=0,r=e.length;n<r;++n)if(!Mee(e[n],t[n]))return!1;return!0}function wee(e,t){for(let n in e)if(!Mee(e[n],t[n]))return!1;return!0}function vee(e){return t=>wee(e,t)}function $Se(e,t,n,r,i,o){let a=this.context.dataflow,s=this.context.data[e],c=s.input,l=a.stamp(),u=s.changes,f,d;if(a._trigger===!1||!(c.value.length||t||r))return 0;if((!u||u.stamp<l)&&(s.changes=u=a.changeset(),u.stamp=l,a.runAfter(()=>{s.modified=!0,a.pulse(c,u).run()},!0,1)),n&&(f=n===!0?sr:F(n)||ll(n)?n:vee(n),u.remove(f)),t&&u.insert(t),r&&(f=vee(r),c.value.some(f)?u.remove(f):u.insert(r)),i)for(d in o)u.modify(i,d,o[d]);return 1}function BSe(e){let t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function USe(e){let t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}var yee={};function jSe(e,t){let n=yee[t]||(yee[t]=Cr(t));return F(e)?e.map(n):n(e)}function mT(e){return F(e)||ArrayBuffer.isView(e)?e:null}function gT(e){return mT(e)||(Q(e)?e:null)}function GSe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return mT(e).join(...n)}function qSe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gT(e).indexOf(...n)}function WSe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gT(e).lastIndexOf(...n)}function YSe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gT(e).slice(...n)}function XSe(e,t,n){return Ie(n)&&B("Function argument passed to replace."),String(e).replace(t,n)}function QSe(e){return mT(e).slice().reverse()}function KSe(e,t,n){return r7(e||0,t||0,n||0)}function ZSe(e,t){let n=Qa(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function JSe(e,t){let n=Qa(e,(t||this).context);return n?n.copy():void 0}function eEe(e,t){let n=Qa(e,(t||this).context);return n?n.domain():[]}function tEe(e,t,n){let r=Qa(e,(n||this).context);return r?F(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function nEe(e,t){let n=Qa(e,(t||this).context);return n&&n.range?n.range():[]}function rEe(e,t,n){let r=Qa(e,(n||this).context);return r?r(t):void 0}function iEe(e,t,n,r,i){e=Qa(e,(i||this).context);let o=SV(t,n),a=e.domain(),s=a[0],c=Ye(a),l=zn;return c-s?l=wy(e,s,c):e=(e.interpolator?pt("sequential")().interpolator(e.interpolator()):pt("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,c=1]),e.ticks&&(a=e.ticks(+r||15),s!==a[0]&&a.unshift(s),c!==Ye(a)&&a.push(c)),a.forEach(u=>o.stop(l(u),e(u))),o}function oEe(e,t,n){let r=Qa(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function aEe(e){let t=null;return function(n){return n?Cu(n,t=t||_l(e)):e}}var See=e=>e.data;function Eee(e,t){let n=xee.call(t,e);return n.root&&n.root.lookup||{}}function sEe(e,t,n){let r=Eee(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(See):void 0}function cEe(e,t){let n=Eee(e,this)[t];return n?n.ancestors().map(See):void 0}var Dee=()=>typeof window<"u"&&window||null;function lEe(){let e=Dee();return e?e.screen:{}}function uEe(){let e=Dee();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function fEe(){let e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function zee(e,t,n){if(!e)return[];let[r,i]=e,o=new Hn().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return ZV(a,o,dEe(t))}function dEe(e){let t=null;if(e){let n=te(e.marktype),r=te(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function pEe(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=te(e);let i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function hEe(e){return te(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function mEe(e,t,n){let{x:r,y:i,mark:o}=n,a=new Hn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(let[c,l]of t)c<a.x1&&(a.x1=c),c>a.x2&&(a.x2=c),l<a.y1&&(a.y1=l),l>a.y2&&(a.y2=l);return a.translate(r,i),zee([[a.x1,a.y1],[a.x2,a.y2]],e,o).filter(c=>gEe(c.x,c.y,t))}function gEe(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){let[a,s]=n[o],[c,l]=n[i];l>t!=s>t&&e<(a-c)*(t-l)/(s-l)+c&&r++}return r&1}var Qu={random(){return Ki()},cumulativeNormal:zd,cumulativeLogNormal:bv,cumulativeUniform:Ev,densityNormal:gv,densityLogNormal:Cv,densityUniform:Sv,quantileNormal:Hd,quantileLogNormal:Mv,quantileUniform:Dv,sampleNormal:Dd,sampleLogNormal:xv,sampleUniform:wv,isArray:F,isBoolean:S1,isDate:m2,isDefined(e){return e!==void 0},isNumber:Be,isObject:ne,isRegExp:aH,isString:Q,isTuple:ll,isValid(e){return e!=null&&e===e},toBoolean:X5,toDate(e){return Q5(e)},toNumber:Rn,toString:K5,indexof:qSe,join:GSe,lastindexof:WSe,replace:XSe,reverse:QSe,slice:YSe,flush:iH,lerp:sH,merge:OSe,pad:uH,peek:Ye,pluck:jSe,span:Os,inrange:s3,truncate:fH,rgb:To,lab:E3,hcl:Cl,hsl:xl,luminance:uT,contrast:RSe,sequence:On,format:ySe,utcFormat:xSe,utcParse:bSe,utcOffset:KH,utcSequence:JH,timeFormat:Cee,timeParse:CSe,timeOffset:QH,timeSequence:ZH,timeUnitSpecifier:BH,monthFormat:MSe,monthAbbrevFormat:wSe,dayFormat:SSe,dayAbbrevFormat:ESe,quarter:eH,utcquarter:tH,week:GH,utcweek:WH,dayofyear:jH,utcdayofyear:qH,warn:TSe,info:ISe,debug:FSe,extent(e){return Gi(e)},inScope:kSe,intersect:zee,clampRange:nH,pinchDistance:BSe,pinchAngle:USe,screen:lEe,containerSize:fEe,windowSize:uEe,bandspace:KSe,setdata:gSe,pathShape:aEe,panLinear:Qz,panLog:Kz,panPow:Zz,panSymlog:Jz,zoomLinear:B5,zoomLog:U5,zoomPow:O6,zoomSymlog:j5,encode:vSe,modify:$Se,lassoAppend:pEe,lassoPath:hEe,intersectLasso:mEe},vEe=["view","item","group","xy","x","y"],yEe="event.vega.",Hee="this.",vT={},Lee={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Z(bee+e)}]`,functions:xEe,constants:iT,visitors:vT},fT=fC(Lee);function xEe(e){let t=oT(e);vEe.forEach(n=>t[n]=yEe+n);for(let n in Qu)t[n]=Hee+n;return Te(t,LSe(e,Qu,vT)),t}function Nn(e,t,n){return arguments.length===1?Qu[e]:(Qu[e]=t,n&&(vT[e]=n),fT&&(fT.functions[e]=Hee+e),this)}Nn("bandwidth",ZSe,s1);Nn("copy",JSe,s1);Nn("domain",eEe,s1);Nn("range",nEe,s1);Nn("invert",tEe,s1);Nn("scale",rEe,s1);Nn("gradient",iEe,s1);Nn("geoArea",ASe,s1);Nn("geoBounds",VSe,s1);Nn("geoCentroid",NSe,s1);Nn("geoShape",oEe,s1);Nn("geoScale",_Se,s1);Nn("indata",mSe,HSe);Nn("data",xee,dT);Nn("treePath",sEe,dT);Nn("treeAncestors",cEe,dT);Nn("vlSelectionTest",fee,pC);Nn("vlSelectionIdTest",pee,pC);Nn("vlSelectionResolve",mee,pC);Nn("vlSelectionTuples",hee);function k2(e,t){let n={},r;try{e=Q(e)?e:Z(e)+"",r=Xu(e)}catch{B("Expression parse error: "+e)}r.visit(o=>{if(o.type!==eT)return;let a=o.callee.name,s=Lee.visitors[a];s&&s(a,o.arguments,t,n)});let i=fT(r);return i.globals.forEach(o=>{let a=bee+o;!he(n,a)&&t.getSignal(o)&&(n[a]=t.signalRef(o))}),{$expr:Te({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function CEe(e){let t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}var bEe=cr(["rule"]),Aee=cr(["group","image","rect"]);function MEe(e,t){let n="";return bEe[t]||(e.x2&&(e.x?(Aee[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Aee[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function yT(e){return(e+"").toLowerCase()}function wEe(e){return yT(e)==="operator"}function SEe(e){return yT(e)==="collect"}function Ap(e,t,n){n.endsWith(";")||(n="return("+n+");");let r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function EEe(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var DEe={operator:(e,t)=>Ap(e,["_"],t.code),parameter:(e,t)=>Ap(e,["datum","_"],t.code),event:(e,t)=>Ap(e,["event"],t.code),handler:(e,t)=>{let n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Ap(e,["_","event"],n)},encode:(e,t)=>{let{marktype:n,channels:r}=t,i="var o=item,datum=o.datum,m=0,$;";for(let o in r){let a="o["+Z(o)+"]";i+=`$=${r[o].code};if(${a}!==$)${a}=$,m=1;`}return i+=MEe(r,n),i+="return m;",Ap(e,["item","_"],i)},codegen:{get(e){let t=`[${e.map(Z).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n,r=(o,a)=>{let s=t[a],c,l;return o.path?(c=`a${o.path}`,l=`b${o.path}`):((n=n||{})["f"+a]=o,c=`this.f${a}(a)`,l=`this.f${a}(b)`),EEe(c,l,-s,s)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function zEe(e){let t=this;wEe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function HEe(e){let t=this;if(e.params){let n=t.get(e.id);n||B("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function LEe(e,t){t=t||{};let n=this;for(let r in e){let i=e[r];t[r]=F(i)?i.map(o=>Vee(o,n,t)):Vee(i,n,t)}return t}function Vee(e,t,n){if(!e||!ne(e))return e;for(let r=0,i=Nee.length,o;r<i;++r)if(o=Nee[r],he(e,o.key))return o.parse(e,t,n);return e}var Nee=[{key:"$ref",parse:AEe},{key:"$key",parse:NEe},{key:"$expr",parse:VEe},{key:"$field",parse:_Ee},{key:"$encode",parse:TEe},{key:"$compare",parse:kEe},{key:"$context",parse:IEe},{key:"$subflow",parse:FEe},{key:"$tupleid",parse:REe}];function AEe(e,t){return t.get(e.$ref)||B("Operator not defined: "+e.$ref)}function VEe(e,t,n){e.$params&&t.parseParameters(e.$params,n);let r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=gi(t.parameterExpression(e.$expr),e.$fields))}function NEe(e,t){let n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Y5(e.$key,e.$flat,t.expr.codegen))}function _Ee(e,t){if(!e.$field)return null;let n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Cr(e.$field,e.$name,t.expr.codegen))}function kEe(e,t){let n="c:"+e.$compare+"_"+e.$order,r=te(e.$compare).map(i=>i&&i.$tupleid?De:i);return t.fn[n]||(t.fn[n]=G5(r,e.$order,t.expr.codegen))}function TEe(e,t){let n=e.$encode,r={};for(let i in n){let o=n[i];r[i]=gi(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function IEe(e,t){return t}function FEe(e,t){let n=e.$subflow;return function(r,i,o){let a=t.fork().parse(n),s=a.get(n.operators[0].id),c=a.signals.parent;return c&&c.set(o),s.detachSubflow=()=>t.detach(a),s}}function REe(){return De}function OEe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&B("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function PEe(e){var t=this,n=ne(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,a=void 0;r||B("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(a=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,a)}var $Ee={skip:!0};function BEe(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{let a=t.signals[o];e.signals(o,a)&&(r[o]=a.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{let a=t.data[o];e.data(o,a)&&(i[o]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function UEe(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],$Ee)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(sr).insert(r[o]))}),(e.subcontext||[]).forEach((o,a)=>{let s=t.subcontext[a];s&&s.setState(o)})}function gC(e,t,n,r){return new kee(e,t,n,r)}function kee(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||DEe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function _ee(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}kee.prototype=_ee.prototype={fork(){let e=new _ee(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);let t=Object.keys(e.nodes);for(let n of t)e.nodes[n]._targets=null;for(let n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){let n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),SEe(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(let o in e.data){let a=n.data[o]||(n.data[o]={});e.data[o].forEach(s=>a[s]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[yT(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:CEe,parseOperator:zEe,parseOperatorParameters:HEe,parseParameters:LEe,parseStream:OEe,parseUpdate:PEe,getState:BEe,setState:UEe};function jEe(e){let t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Uee(t,e.description()))}function Uee(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function GEe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}var xT="default";function qEe(e){let t=e._signals.cursor||(e._signals.cursor=e.add({user:xT,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{let i=t.value,o=i?Q(i)?i:i.user:xT,a=r.item&&r.item.cursor||null;return i&&o===i.user&&a==i.item?i:{user:o,item:a}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Q(r)||(i=r.item,r=r.user),bT(e,r&&r!==xT?r:i||r),i},{cursor:t})}function bT(e,t){let n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function xC(e,t){var n=e._runtime.data;return he(n,t)||B("Unrecognized data set: "+t),n[t]}function WEe(e,t){return arguments.length<2?xC(this,e).values.value:bC.call(this,e,Xs().remove(sr).insert(t))}function bC(e,t){hL(t)||B("Second argument to changes must be a changeset.");let n=xC(this,e);return n.modified=!0,this.pulse(n.input,t)}function YEe(e,t){return bC.call(this,e,Xs().insert(t))}function XEe(e,t){return bC.call(this,e,Xs().remove(t))}function jee(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Gee(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function MC(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function QEe(e){var t=MC(e),n=jee(e),r=Gee(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function KEe(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,a,s;return i&&(s=MC(e),a=t.changedTouches?t.changedTouches[0]:t,o=N7(a,i),o[0]-=s[0],o[1]-=s[1]),t.dataflow=e,t.item=n,t.vega=ZEe(e,n,o),t}function ZEe(e,t,n){let r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(a){var s=r,c;if(a){for(c=t;c;c=c.mark.group)if(c.mark.name===a){s=c;break}}return s&&s.mark&&s.mark.interactive?s:{}}function o(a){if(!a)return n;Q(a)&&(a=i(a));let s=n.slice();for(;a;)s[0]-=a.x||0,s[1]-=a.y||0,a=a.mark&&a.mark.group;return s}return{view:fn(e),item:fn(t||{}),group:i,xy:o,x:a=>o(a)[0],y:a=>o(a)[1]}}var Tee="view",JEe="timer",eDe="window",tDe={trap:!1};function nDe(e){let t=Te({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{F(r[o])&&(r[o]=cr(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function qee(e,t,n,r){e._eventListeners.push({type:n,sources:te(t),handler:r})}function rDe(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function vC(e,t,n){let r=e._eventConfig&&e._eventConfig[t];return r===!1||ne(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function iDe(e,t,n){var r=this,i=new eu(n),o=function(l,u){r.runAsync(null,()=>{e===Tee&&rDe(r,t)&&l.preventDefault(),i.receive(KEe(r,l,u))})},a;if(e===JEe)vC(r,"timer",t)&&r.timer(o,t);else if(e===Tee)vC(r,"view",t)&&r.addEventListener(t,o,tDe);else if(e===eDe?vC(r,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&vC(r,"selector",t)&&(a=Array.from(document.querySelectorAll(e))),!a)r.warn("Can not resolve event source: "+e);else{for(var s=0,c=a.length;s<c;++s)a[s].addEventListener(t,o);qee(r,a,t,o)}return i}function Iee(e){return e.item}function Fee(e){return e.item.mark.source}function Ree(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function oDe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Iee),Fee,Ree(e)),this.on(this.events("view","pointerout",Iee),Fee,Ree(t)),this}function aDe(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,o;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(o=n[r],i=o.sources.length;--i>=0;)o.sources[i].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this}function oo(e,t,n){let r=document.createElement(e);for(let i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}var sDe="vega-bind",cDe="vega-bind-name",lDe="vega-bind-radio";function uDe(e,t,n){if(!t)return;let r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,a)})}},r.debounce&&(i.update=W5(r.debounce,i.update))),(r.input==null&&r.element?fDe:pDe)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function fDe(e,t,n,r){let i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),qee(r,t,i,o),e.set=a=>{t.value=a,t.dispatchEvent(dDe(i))}}function dDe(e){return typeof Event<"u"?new Event(e):{type:e}}function pDe(e,t,n,r){let i=r.signal(n.signal),o=oo("div",{class:sDe}),a=n.input==="radio"?o:o.appendChild(oo("label"));a.appendChild(oo("span",{class:cDe},n.name||n.signal)),t.appendChild(o);let s=hDe;switch(n.input){case"checkbox":s=mDe;break;case"select":s=gDe;break;case"radio":s=vDe;break;case"range":s=yDe;break}s(e,a,n,i)}function hDe(e,t,n,r){let i=oo("input");for(let o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function mDe(e,t,n,r){let i={type:"checkbox",name:n.signal};r&&(i.checked=!0);let o=oo("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=a=>o.checked=!!a||null}function gDe(e,t,n,r){let i=oo("select",{name:n.signal}),o=n.labels||[];n.options.forEach((a,s)=>{let c={value:a};CC(a,r)&&(c.selected=!0),i.appendChild(oo("option",c,(o[s]||a)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=a=>{for(let s=0,c=n.options.length;s<c;++s)if(CC(n.options[s],a)){i.selectedIndex=s;return}}}function vDe(e,t,n,r){let i=oo("span",{class:lDe}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((a,s)=>{let c={type:"radio",name:n.signal,value:a};CC(a,r)&&(c.checked=!0);let l=oo("input",c);l.addEventListener("change",()=>e.update(a));let u=oo("label",{},(o[s]||a)+"");return u.prepend(l),i.appendChild(u),l}),e.set=a=>{let s=e.elements,c=s.length;for(let l=0;l<c;++l)CC(s[l].value,a)&&(s[l].checked=!0)}}function yDe(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;let i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||qi(o,i,100),s=oo("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;let c=oo("span",{},+r);t.appendChild(s),t.appendChild(c);let l=()=>{c.textContent=s.value,e.update(+s.value)};s.addEventListener("input",l),s.addEventListener("change",l),e.elements=[s],e.set=u=>{s.value=u,c.textContent=u}}function CC(e,t){return e===t||e+""==t+""}function Wee(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,jee(e),Gee(e),MC(e),i,o).background(e.background())}function MT(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function xDe(e,t,n,r){let i=new r(e.loader(),MT(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,MC(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function CDe(e,t){let n=this,r=n._renderType,i=n._eventConfig.bind,o=_7(r);e=n._el=e?CT(n,e,!0):null,jEe(n),o||n.error("Unrecognized renderer type: "+r);let a=o.handler||nc,s=e?o.renderer:o.headless;return n._renderer=s?Wee(n,n._renderer,e,s):null,n._handler=xDe(n,n._handler,e,a),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=CT(n,t,!0):e.appendChild(oo("form",{class:"vega-bindings"})),n._bind.forEach(c=>{c.param.element&&i!=="container"&&(c.element=CT(n,c.param.element,!!c.param.input))}),n._bind.forEach(c=>{uDe(n,c.element||t,c)})),n}function CT(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}var Vp=e=>+e||0,bDe=e=>({top:e,bottom:e,left:e,right:e});function Oee(e){return ne(e)?{top:Vp(e.top),bottom:Vp(e.bottom),left:Vp(e.left),right:Vp(e.right)}:bDe(Vp(e))}function wT(e,t,n,r){return jt(this,null,function*(){let i=_7(t),o=i&&i.headless;return o||B("Unrecognized renderer type: "+t),yield e.runAsync(),Wee(e,null,null,o,n,r).renderAsync(e._scenegraph.root)})}function MDe(e,t){return jt(this,null,function*(){e!==rc.Canvas&&e!==rc.SVG&&e!==rc.PNG&&B("Unrecognized image type: "+e);let n=yield wT(this,e,t);return e===rc.SVG?wDe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")})}function wDe(e,t){let n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function SDe(e,t){return jt(this,null,function*(){return(yield wT(this,rc.Canvas,e,t)).canvas()})}function EDe(e){return jt(this,null,function*(){return(yield wT(this,rc.SVG,e)).svg()})}function DDe(e,t,n){return gC(e,Ys,Qu,n).parse(t)}function zDe(e){var t=this._runtime.scales;return he(t,e)||B("Unrecognized scale or projection: "+e),t[e].value}var Yee="width",Xee="height",ST="padding",Pee={skip:!0};function Qee(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===ST?r.left+r.right:0)}function Kee(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===ST?r.top+r.bottom:0)}function HDe(e){var t=e._signals,n=t[Yee],r=t[Xee],i=t[ST];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,s=>{e._width=s.size,e._viewWidth=Qee(e,s.size),o()},{size:n}),e._resizeHeight=e.add(null,s=>{e._height=s.size,e._viewHeight=Kee(e,s.size),o()},{size:r});let a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function LDe(e,t,n,r,i,o){this.runAfter(a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(Yee,n,Pee),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(Xee,r,Pee),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter(c=>c.resize())},!1,1)}function ADe(e){return this._runtime.getState(e||{data:VDe,signals:NDe,recurse:!0})}function VDe(e,t){return t.modified&&F(t.input.value)&&!e.startsWith("_:vega:_")}function NDe(e,t){return!(e==="parent"||t instanceof Ys.proxy)}function _De(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function kDe(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(P_(n,t))}function TDe(e,t,n,r){let i=e.element();i&&i.setAttribute("title",IDe(r))}function IDe(e){return e==null?"":F(e)?Zee(e):ne(e)&&!m2(e)?FDe(e):e+""}function FDe(e){return Object.keys(e).map(t=>{let n=e[t];return t+": "+(F(n)?Zee(n):Jee(n))}).join(`
`)}function Zee(e){return"["+e.map(Jee).join(", ")+"]"}function Jee(e){return F(e)?"[\u2026]":ne(e)&&!m2(e)?"{\u2026}":e}function RDe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null,t=()=>{e?.();let n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function ET(e,t){let n=this;if(t=t||{},v3.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){let o=Te({},e.locale,t.locale);n.locale(nv(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||rc.Canvas,n._scenegraph=new ex;let r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||TDe,n._redraw=!0,n._handler=new nc().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=nDe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);let i=DDe(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:Te({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Qee(n,n._width),n._viewHeight=Kee(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,HDe(n),GEe(n),qEe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function yC(e,t){return he(e._signals,t)?e._signals[t]:B("Unrecognized signal name: "+Z(t))}function ete(e,t){let n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function $ee(e,t,n,r){let i=ete(n,r);return i||(i=MT(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Bee(e,t,n){let r=ete(t,n);return r&&t._targets.remove(r),e}ee(ET,v3,{evaluate(e,t,n){return jt(this,null,function*(){if(yield v3.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,QEe(this)),yield this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&wd(this,n),this})},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){let t=e!=null?e+"":null;return t!==this._desc&&Uee(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){let r=yC(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Oee(e)):Oee(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(_7(e)||B("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(v3.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(yC(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:LDe,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=MT(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){let t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return $ee(this,e,yC(this,e),t)},removeSignalListener(e,t){return Bee(this,yC(this,e),t)},addDataListener(e,t){return $ee(this,e,xC(this,e).values,t)},removeDataListener(e,t){return Bee(this,xC(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){let t=bT(this,null);this._globalCursor=!!e,t&&bT(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:kDe,events:iDe,finalize:aDe,hover:oDe,data:WEe,change:bC,insert:YEe,remove:XEe,scale:zDe,initialize:CDe,toImageURL:MDe,toCanvas:SDe,toSVG:EDe,getState:ADe,setState:_De,_watchPixelRatio:RDe});var ODe="view",wC="[",SC="]",tte="{",nte="}",PDe=":",rte=",",$De="@",BDe=">",UDe=/[[\]{}]/,jDe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},ite,ote;function Di(e,t,n){return ite=t||ODe,ote=n||jDe,ate(e.trim()).map(DT)}function GDe(e){return ote[e]}function Np(e,t,n,r,i){let o=e.length,a=0,s;for(;t<o;++t){if(s=e[t],!a&&s===n)return t;i&&i.indexOf(s)>=0?--a:r&&r.indexOf(s)>=0&&++a}return t}function ate(e){let t=[],n=e.length,r=0,i=0;for(;i<n;)i=Np(e,i,rte,wC+tte,SC+nte),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function DT(e){return e[0]==="["?qDe(e):WDe(e)}function qDe(e){let t=e.length,n=1,r;if(n=Np(e,n,SC,wC,SC),n===t)throw"Empty between selector: "+e;if(r=ate(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==BDe)throw"Expected '>' after between selector: "+e;r=r.map(DT);let i=DT(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function WDe(e){let t={source:ite},n=[],r=[0,0],i=0,o=0,a=e.length,s=0,c,l;if(e[a-1]===nte){if(s=e.lastIndexOf(tte),s>=0){try{r=YDe(e.substring(s+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,s).trim(),a=e.length}else throw"Unmatched right brace: "+e;s=0}if(!a)throw e;if(e[0]===$De&&(i=++s),c=Np(e,s,PDe),c<a&&(n.push(e.substring(o,c).trim()),o=s=++c),s=Np(e,s,wC),s===a)n.push(e.substring(o,a).trim());else if(n.push(e.substring(o,s).trim()),l=[],o=++s,o===a)throw"Unmatched left bracket: "+e;for(;s<a;){if(s=Np(e,s,SC),s===a)throw"Unmatched left bracket: "+e;if(l.push(e.substring(o,s).trim()),s<a-1&&e[++s]!==wC)throw"Expected left bracket: "+e;o=++s}if(!(a=n.length)||UDe.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],i?t.markname=n[0].slice(1):GDe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function YDe(e){let t=e.split(rte);if(!e.length||t.length>2)throw e;return t.map(n=>{let r=+n;if(r!==r)throw e;return r})}function XDe(e){return ne(e)?e:{type:e||"pad"}}var _p=e=>+e||0,QDe=e=>({top:e,bottom:e,left:e,right:e});function KDe(e){return ne(e)?e.signal?e:{top:_p(e.top),bottom:_p(e.bottom),left:_p(e.left),right:_p(e.right)}:QDe(_p(e))}var Dr=e=>ne(e)&&!F(e)?Te({},e):{value:e};function ste(e,t,n,r){return n!=null?(ne(n)&&!F(n)||F(n)&&n.length&&ne(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Zr(e,t,n){for(let r in t)ste(e,r,t[r]);for(let r in n)ste(e,r,n[r],"update")}function nf(e,t,n){for(let r in t)n&&he(n,r)||(e[r]=Te(e[r]||{},t[r]));return e}function Zu(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}var FT="mark",RT="frame",OT="scope",ZDe="axis",JDe="axis-domain",eze="axis-grid",tze="axis-label",nze="axis-tick",rze="axis-title",ize="legend",oze="legend-band",aze="legend-entry",sze="legend-gradient",Dte="legend-label",cze="legend-symbol",lze="legend-title",uze="title",fze="title-text",dze="title-subtitle";function pze(e,t,n,r,i){let o={},a={},s,c,l,u;c="lineBreak",t==="text"&&i[c]!=null&&!Zu(c,e)&&zT(o,c,i[c]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),u=n===RT?i.group:n===FT?Te({},i.mark,i[t]):null;for(c in u)l=Zu(c,e)||(c==="fill"||c==="stroke")&&(Zu("fill",e)||Zu("stroke",e)),l||zT(o,c,u[c]);te(r).forEach(f=>{let d=i.style&&i.style[f];for(let p in d)Zu(p,e)||zT(o,p,d[p])}),e=Te({},e);for(c in o)u=o[c],u.signal?(s=s||{})[c]=u:a[c]=u;return e.enter=Te(a,e.enter),s&&(e.update=Te(s,e.update)),e}function zT(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}var zte=e=>Q(e)?Z(e):e.signal?`(${e.signal})`:Hte(e);function NC(e){if(e.gradient!=null)return mze(e);let t=e.signal?`(${e.signal})`:e.color?hze(e.color):e.field!=null?Hte(e.field):e.value!==void 0?Z(e.value):void 0;return e.scale!=null&&(t=gze(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${DC(e.exponent)})`),e.mult!=null&&(t+=`*${DC(e.mult)}`),e.offset!=null&&(t+=`+${DC(e.offset)}`),e.round&&(t=`round(${t})`),t}var EC=(e,t,n,r)=>`(${e}(${[t,n,r].map(NC).join(",")})+'')`;function hze(e){return e.c?EC("hcl",e.h,e.c,e.l):e.h||e.s?EC("hsl",e.h,e.s,e.l):e.l||e.a?EC("lab",e.l,e.a,e.b):e.r||e.g||e.b?EC("rgb",e.r,e.g,e.b):null}function mze(e){let t=[e.start,e.stop,e.count].map(n=>n==null?null:Z(n));for(;t.length&&Ye(t)==null;)t.pop();return t.unshift(zte(e.gradient)),`gradient(${t.join(",")})`}function DC(e){return ne(e)?"("+NC(e)+")":e}function Hte(e){return Lte(ne(e)?e:{datum:e})}function Lte(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):B("Invalid field reference: "+Z(e));return e.signal||(r=Q(r)?zo(r).map(Z).join("]["):Lte(r)),t+"["+r+"]"}function gze(e,t){let n=zte(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+DC(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function vze(e){let t="";return e.forEach(n=>{let r=NC(n);t+=n.test?`(${n.test})?${r}:`:r}),Ye(t)===":"&&(t+="null"),t}function Ate(e,t,n,r,i,o){let a={};o=o||{},o.encoders={$encode:a},e=pze(e,t,n,r,i.config);for(let s in e)a[s]=yze(e[s],t,o,i);return o}function yze(e,t,n,r){let i={},o={};for(let a in e)e[a]!=null&&(i[a]=Cze(xze(e[a]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function xze(e){return F(e)?vze(e):NC(e)}function Cze(e,t,n,r){let i=k2(e,t);return i.$fields.forEach(o=>r[o]=1),Te(n,i.$params),i.$expr}var bze="outer",Mze=["value","update","init","react","bind"];function cte(e,t){B(e+' for "outer" push: '+Z(t))}function Vte(e,t){let n=e.name;if(e.push===bze)t.signals[n]||cte("No prior signal definition",n),Mze.forEach(r=>{e[r]!==void 0&&cte("Invalid property ",r)});else{let r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function AT(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function _C(e,t,n,r){return new AT(e,t,n,r)}function VC(e,t){return _C("operator",e,t)}function Ne(e){let t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Ip(e,t){return t?{$field:e,$name:t}:{$field:e}}var VT=Ip("key");function lte(e,t){return{$compare:e,$order:t}}function wze(e,t){let n={$key:e};return t&&(n.$flat=!0),n}var Sze="ascending",Eze="descending";function Dze(e){return ne(e)?(e.order===Eze?"-":"+")+kC(e.op,e.field):""}function kC(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}var PT="scope",NT="view";function dr(e){return e&&e.signal}function zze(e){return e&&e.expr}function zC(e){if(dr(e))return!0;if(ne(e)){for(let t in e)if(zC(e[t]))return!0}return!1}function T2(e,t){return e??t}function Zl(e){return e&&e.signal||e}var ute="timer";function Fp(e,t){return(e.merge?Lze:e.stream?Aze:e.type?Vze:B("Invalid stream specification: "+Z(e)))(e,t)}function Hze(e){return e===PT?NT:e||NT}function Lze(e,t){let n=e.merge.map(i=>Fp(i,t)),r=$T({merge:n},e,t);return t.addStream(r).id}function Aze(e,t){let n=Fp(e.stream,t),r=$T({stream:n},e,t);return t.addStream(r).id}function Vze(e,t){let n;e.type===ute?(n=t.event(ute,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Hze(e.source),e.type);let r=$T({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function $T(e,t,n){let r=t.between;return r&&(r.length!==2&&B('Stream "between" parameter must have 2 entries: '+Z(t)),e.between=[Fp(r[0],n),Fp(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Nze(t.marktype,t.markname,t.markrole)),t.source===PT&&r.push("inScope(event.item)"),r.length&&(e.filter=k2("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Nze(e,t,n){let r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}var _ze={code:"_.$value",ast:{type:"Identifier",value:"value"}};function kze(e,t,n){let r=e.encode,i={target:n},o=e.events,a=e.update,s=[];o||B("Signal update missing events specification."),Q(o)&&(o=Di(o,t.isSubscope()?PT:NT)),o=te(o).filter(c=>c.signal||c.scale?(s.push(c),0):1),s.length>1&&(s=[Ize(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),r!=null&&(a&&B("Signal encode and update are mutually exclusive."),a="encode(item(),"+Z(r)+")"),i.update=Q(a)?k2(a,t):a.expr!=null?k2(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:_ze,$params:{$value:t.signalRef(a.signal)}}:B("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach(c=>t.addUpdate(Te(Tze(c,t),i)))}function Tze(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Fp(e,t)}}function Ize(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Fze(e,t){let n=t.getSignal(e.name),r=e.update;e.init&&(r?B("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=k2(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>kze(i,t,n.id))}var Bt=e=>(t,n,r)=>_C(e,n,t||void 0,r),Nte=Bt("aggregate"),Rze=Bt("axisticks"),_te=Bt("bound"),F2=Bt("collect"),fte=Bt("compare"),Oze=Bt("datajoin"),kte=Bt("encode"),Pze=Bt("expression"),$ze=Bt("facet"),Bze=Bt("field"),Uze=Bt("key"),jze=Bt("legendentries"),Gze=Bt("load"),qze=Bt("mark"),Wze=Bt("multiextent"),Yze=Bt("multivalues"),Xze=Bt("overlap"),Qze=Bt("params"),Tte=Bt("prefacet"),Kze=Bt("projection"),Zze=Bt("proxy"),Jze=Bt("relay"),Ite=Bt("render"),eHe=Bt("scale"),e0=Bt("sieve"),tHe=Bt("sortitems"),Fte=Bt("viewlayout"),nHe=Bt("values"),rHe=0,Rte={min:"min",max:"max",count:"sum"};function iHe(e,t){let n=e.type||"linear";QA(n)||B("Unrecognized scale type: "+Z(n)),t.addScale(e.name,{type:n,domain:void 0})}function oHe(e,t){let n=t.getScale(e.name).params,r;n.domain=Ote(e.domain,e,t),e.range!=null&&(n.range=$te(e,t,n)),e.interpolate!=null&&mHe(e.interpolate,n),e.nice!=null&&(n.nice=hHe(e.nice,t)),e.bins!=null&&(n.bins=pHe(e.bins,t));for(r in e)he(n,r)||r==="name"||(n[r]=$o(e[r],t))}function $o(e,t){return ne(e)?e.signal?t.signalRef(e.signal):B("Unsupported object: "+Z(e)):e}function HC(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>$o(n,t))}function TC(e){B("Can not find data set: "+Z(e))}function Ote(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&B("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(F(e)?aHe:e.fields?cHe:sHe)(e,t,n)}function aHe(e,t,n){return e.map(r=>$o(r,n))}function sHe(e,t,n){let r=n.getData(e.data);return r||TC(e.data),L3(t.type)?r.valuesRef(n,e.field,Pte(e.sort,!1)):JA(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function cHe(e,t,n){let r=e.data,i=e.fields.reduce((o,a)=>(a=Q(a)?{data:r,field:a}:F(a)||a.signal?lHe(a,n):a,o.push(a),o),[]);return(L3(t.type)?uHe:JA(t.type)?fHe:dHe)(e,n,i)}function lHe(e,t){let n="_:vega:_"+rHe++,r=F2({});if(F(e))r.value={$ingest:e};else if(e.signal){let i="setdata("+Z(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,e0({})]),{data:n,field:"data"}}function uHe(e,t,n){let r=Pte(e.sort,!0),i,o,a=n.map(l=>{let u=t.getData(l.data);return u||TC(l.data),u.countsRef(t,l.field,r)}),s={groupby:VT,pulse:a};r&&(i=r.op||"count",o=r.field?kC(i,r.field):"count",s.ops=[Rte[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(Nte(s));let c=t.add(F2({pulse:Ne(i)}));return o=t.add(nHe({field:VT,sort:t.sortRef(r),pulse:Ne(c)})),Ne(o)}function Pte(e,t){return e&&(!e.field&&!e.op?ne(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?B("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Rte[e.op]&&B("Multiple domain scales can not be sorted using "+e.op)),e}function fHe(e,t,n){let r=n.map(i=>{let o=t.getData(i.data);return o||TC(i.data),o.domainRef(t,i.field)});return Ne(t.add(Yze({values:r})))}function dHe(e,t,n){let r=n.map(i=>{let o=t.getData(i.data);return o||TC(i.data),o.extentRef(t,i.field)});return Ne(t.add(Wze({extents:r})))}function pHe(e,t){return e.signal||F(e)?HC(e,t):t.objectProperty(e)}function hHe(e,t){return e.signal?t.signalRef(e.signal):ne(e)?{interval:$o(e.interval),step:$o(e.step)}:$o(e)}function mHe(e,t){t.interpolate=$o(e.type||e),e.gamma!=null&&(t.interpolateGamma=$o(e.gamma))}function $te(e,t,n){let r=t.config.range,i=e.range;if(i.signal)return t.signalRef(i.signal);if(Q(i)){if(r&&he(r,i))return e=Te({},e,{range:r[i]}),$te(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=L3(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:B("Unrecognized scale range value: "+Z(i))}else if(i.scheme){n.scheme=F(i.scheme)?HC(i.scheme,t):$o(i.scheme,t),i.extent&&(n.schemeExtent=HC(i.extent,t)),i.count&&(n.schemeCount=$o(i.count,t));return}else if(i.step){n.rangeStep=$o(i.step,t);return}else{if(L3(e.type)&&!F(i))return Ote(i,e,t);F(i)||B("Unsupported range type: "+Z(i))}return i.map(o=>(F(o)?HC:$o)(o,t))}function gHe(e,t){let n=t.config.projection||{},r={};for(let i in e)i!=="name"&&(r[i]=_T(e[i],i,t));for(let i in n)r[i]==null&&(r[i]=_T(n[i],i,t));t.addProjection(e.name,r)}function _T(e,t,n){return F(e)?e.map(r=>_T(r,t,n)):ne(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:B("Unsupported parameter object: "+Z(e)):e}var R2="top",rf="left",of="right",K3="bottom",Bte="center",vHe="vertical",yHe="start",xHe="middle",CHe="end",kT="index",BT="label",bHe="offset",tf="perc",MHe="perc2",Bo="value",Op="guide-label",UT="guide-title",wHe="group-title",SHe="group-subtitle",dte="symbol",LC="gradient",TT="discrete",IT="size",EHe="shape",DHe="fill",zHe="stroke",HHe="strokeWidth",LHe="strokeDash",AHe="opacity",jT=[IT,EHe,DHe,zHe,HHe,LHe,AHe],Pp={name:1,style:1,interactive:1},bt={value:0},Uo={value:1},IC="group",Ute="rect",GT="rule",VHe="symbol",t0="text";function Rp(e){return e.type=IC,e.interactive=e.interactive||!1,e}function k1(e,t){let n=(r,i)=>T2(e[r],T2(t[r],i));return n.isVertical=r=>vHe===T2(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>T2(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>T2(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>T2(e.columns,T2(t.columns,+n.isVertical(!0))),n}function jte(e,t){let n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function NHe(e,t,n){let r=t.config.style[n];return r&&r[e]}function FC(e,t,n){return`item.anchor === '${yHe}' ? ${e} : item.anchor === '${CHe}' ? ${t} : ${n}`}var qT=FC(Z(rf),Z(of),Z(Bte));function _He(e){let t=e("tickBand"),n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ne(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function Gte(e,t){return t?e?ne(e)?Object.assign({},e,{offset:Gte(e.offset,t)}):{value:e,offset:t}:t:e}function ao(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=nf(e.encode,t,Pp)):e.interactive=!1,e}function kHe(e,t,n,r){let i=k1(e,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength(),c,l,u,f,d;o?(l=[0,1],u=[0,0],f=a,d=s):(l=[0,0],u=[1,0],f=s,d=a);let p={enter:c={opacity:bt,x:bt,y:bt,width:Dr(f),height:Dr(d)},update:Te({},c,{opacity:Uo,fill:{gradient:t,start:l,stop:u}}),exit:{opacity:bt}};return Zr(p,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),ao({type:Ute,role:sze,encode:p},r)}function THe(e,t,n,r,i){let o=k1(e,n),a=o.isVertical(),s=o.gradientThickness(),c=o.gradientLength(),l,u,f,d,p="";a?(l="y",f="y2",u="x",d="width",p="1-"):(l="x",f="x2",u="y",d="height");let h={opacity:bt,fill:{scale:t,field:Bo}};h[l]={signal:p+"datum."+tf,mult:c},h[u]=bt,h[f]={signal:p+"datum."+MHe,mult:c},h[d]=Dr(s);let m={enter:h,update:Te({},h,{opacity:Uo}),exit:{opacity:bt}};return Zr(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),ao({type:Ute,role:oze,key:Bo,from:i,encode:m},r)}var IHe=`datum.${tf}<=0?"${rf}":datum.${tf}>=1?"${of}":"${Bte}"`,FHe=`datum.${tf}<=0?"${K3}":datum.${tf}>=1?"${R2}":"${xHe}"`;function pte(e,t,n,r){let i=k1(e,t),o=i.isVertical(),a=Dr(i.gradientThickness()),s=i.gradientLength(),c=i("labelOverlap"),l,u,f,d,p="",h={enter:l={opacity:bt},update:u={opacity:Uo,text:{field:BT}},exit:{opacity:bt}};return Zr(h,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:T2(e.labelLimit,t.gradientLabelLimit)}),o?(l.align={value:"left"},l.baseline=u.baseline={signal:FHe},f="y",d="x",p="1-"):(l.align=u.align={signal:IHe},l.baseline={value:"top"},f="x",d="y"),l[f]=u[f]={signal:p+"datum."+tf,mult:s},l[d]=u[d]=a,a.offset=T2(e.labelOffset,t.gradientLabelOffset)||0,c=c?{separation:i("labelSeparation"),method:c,order:"datum."+kT}:void 0,ao({type:t0,role:Dte,style:Op,key:Bo,from:r,encode:h,overlap:c},n)}function RHe(e,t,n,r,i){let o=k1(e,t),a=n.entries,s=!!(a&&a.interactive),c=a?a.name:void 0,l=o("clipHeight"),u=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${bHe} : datum.${IT}`,p=l?Dr(l):{field:IT},h=`datum.${kT}`,m=`max(1, ${i})`,g,v,y,C,b;p.mult=.5,g={enter:v={opacity:bt,x:{signal:d,mult:.5,offset:u},y:p},update:y={opacity:Uo,x:v.x,y:v.y},exit:{opacity:bt}};let M=null,S=null;e.fill||(M=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),Zr(g,{fill:o("symbolFillColor",M),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",S),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),jT.forEach(z=>{e[z]&&(y[z]=v[z]={scale:e[z],field:Bo})});let w=ao({type:VHe,role:cze,key:Bo,from:f,clip:l?!0:void 0,encode:g},n.symbols),E=Dr(u);E.offset=o("labelOffset"),g={enter:v={opacity:bt,x:{signal:d,offset:E},y:p},update:y={opacity:Uo,text:{field:BT},x:v.x,y:v.y},exit:{opacity:bt}},Zr(g,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});let D=ao({type:t0,role:Dte,style:Op,key:Bo,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:bt,height:l?Dr(l):bt,opacity:bt},exit:{opacity:bt},update:y={opacity:Uo,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(C=`ceil(item.mark.items.length / ${m})`,y.row.signal=`${h}%${C}`,y.column.signal=`floor(${h} / ${C})`,b={field:["row",h]}):(y.row.signal=`floor(${h} / ${m})`,y.column.signal=`${h} % ${m}`,b={field:h}),y.column.signal=`(${i})?${y.column.signal}:${h}`,r={facet:{data:r,name:"value",groupby:kT}},Rp({role:OT,from:r,encode:nf(g,a,Pp),marks:[w,D],name:c,interactive:s,sort:b})}function OHe(e,t){let n=k1(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}var WT='item.orient === "left"',YT='item.orient === "right"',RC=`(${WT} || ${YT})`,PHe=`datum.vgrad && ${RC}`,$He=FC('"top"','"bottom"','"middle"'),BHe=FC('"right"','"left"','"center"'),UHe=`datum.vgrad && ${YT} ? (${BHe}) : (${RC} && !(datum.vgrad && ${WT})) ? "left" : ${qT}`,jHe=`item._anchor || (${RC} ? "middle" : "start")`,GHe=`${PHe} ? (${WT} ? -90 : 90) : 0`,qHe=`${RC} ? (datum.vgrad ? (${YT} ? "bottom" : "top") : ${$He}) : "top"`;function WHe(e,t,n,r){let i=k1(e,t),o={enter:{opacity:bt},update:{opacity:Uo,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:bt}};return Zr(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:jHe},angle:{signal:GHe},align:{signal:UHe},baseline:{signal:qHe},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),ao({type:t0,role:lze,style:UT,from:r,encode:o},n)}function YHe(e,t){let n;return ne(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+hte(e.path)+")":e.sphere&&(n="geoShape("+hte(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function hte(e){return ne(e)&&e.signal?e.signal:Z(e)}function qte(e){let t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===IC?OT:t||FT}function XHe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||qte(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function QHe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function XT(e,t){let n=dv(e.type);n||B("Unrecognized transform type: "+Z(e.type));let r=_C(n.type.toLowerCase(),null,Wte(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Wte(e,t,n){let r={},i=e.params.length;for(let o=0;o<i;++o){let a=e.params[o];r[a.name]=KHe(a,t,n)}return r}function KHe(e,t,n){let r=e.type,i=t[e.name];if(r==="index")return ZHe(e,t,n);if(i===void 0){e.required&&B("Missing required "+Z(t.type)+" parameter: "+Z(e.name));return}else{if(r==="param")return JHe(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!dr(i)?i.map(o=>mte(e,o,n)):mte(e,i,n)}function mte(e,t,n){let r=e.type;if(dr(t))return vte(r)?B("Expression references can not be signals."):HT(r)?n.fieldRef(t):yte(r)?n.compareRef(t):n.signalRef(t.signal);{let i=e.expr||HT(r);return i&&eLe(t)?n.exprRef(t.expr,t.as):i&&tLe(t)?Ip(t.field,t.as):vte(r)?k2(t,n):nLe(r)?Ne(n.getData(t).values):HT(r)?Ip(t):yte(r)?n.compareRef(t):t}}function ZHe(e,t,n){return Q(t.from)||B('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function JHe(e,t,n){let r=t[e.name];return e.array?(F(r)||B("Expected an array of sub-parameters. Instead: "+Z(r)),r.map(i=>gte(e,i,n))):gte(e,r,n)}function gte(e,t,n){let r=e.params.length,i;for(let a=0;a<r;++a){i=e.params[a];for(let s in i.key)if(i.key[s]!==t[s]){i=null;break}if(i)break}i||B("Unsupported parameter: "+Z(t));let o=Te(Wte(i,t,n),i.key);return Ne(n.add(Qze(o)))}var eLe=e=>e&&e.expr,tLe=e=>e&&e.field,nLe=e=>e==="data",vte=e=>e==="expr",HT=e=>e==="field",yte=e=>e==="compare";function rLe(e,t,n){let r,i,o,a,s;return e?(r=e.facet)&&(t||B("Only group marks can be faceted."),r.field!=null?a=s=AC(r,n):(e.data?s=Ne(n.getData(e.data).aggregate):(o=XT(Te({type:"aggregate",groupby:te(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=AC(r,n),a=s=Ne(n.add(o))),i=n.keyRef(r.groupby,!0))):a=Ne(n.add(F2(null,[{}]))),a||(a=AC(e,n)),{key:i,pulse:a,parent:s}}function AC(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ne(t.getData(e.data).output)}function Jl(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Jl.fromEntries=function(e,t){let n=t.length,r=t[n-1],i=t[n-2],o=t[0],a=null,s=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=Ne(t[s-1]),e.add(t[s]),t[s].type==="aggregate"&&(a=t[s]);return new Jl(e,o,i,r,a)};function Yte(e){return Q(e)?e:null}function xte(e,t,n){let r=kC(n.op,n.field),i;if(t.ops){for(let o=0,a=t.as.length;o<a;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function kp(e,t,n,r,i,o,a){let s=t[n]||(t[n]={}),c=Dze(o),l=Yte(i),u,f;if(l!=null&&(e=t.scope,l=l+(c?"|"+c:""),u=s[l]),!u){let d=o?{field:VT,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:Ne(t.output)};c&&(d.sort=e.sortRef(o)),f=e.add(_C(r,void 0,d)),a&&(t.index[i]=f),u=Ne(f),l!=null&&(s[l]=u)}return u}Jl.prototype={countsRef(e,t,n){let r=this,i=r.counts||(r.counts={}),o=Yte(t),a,s,c;return o!=null&&(e=r.scope,a=i[o]),a?n&&n.field&&xte(e,a.agg.params,n):(c={groupby:e.fieldRef(t,"key"),pulse:Ne(r.output)},n&&n.field&&xte(e,c,n),s=e.add(Nte(c)),a=e.add(F2({pulse:Ne(s)})),a={agg:s,ref:Ne(a)},o!=null&&(i[o]=a)),a.ref},tuplesRef(){return Ne(this.values)},extentRef(e,t){return kp(e,this,"extent","extent",t,!1)},domainRef(e,t){return kp(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return kp(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return kp(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return kp(e,this,"indata","tupleindex",t,!0,!0)}};function iLe(e,t,n){let r=e.from.facet,i=r.name,o=AC(r,t),a;r.name||B("Facet must have a name: "+Z(r)),r.data||B("Facet must reference a data set: "+Z(r)),r.field?a=t.add(Tte({field:t.fieldRef(r.field),pulse:o})):r.groupby?a=t.add($ze({key:t.keyRef(r.groupby),group:Ne(t.proxy(n.parent)),pulse:o})):B("Facet must specify groupby or field: "+Z(r));let s=t.fork(),c=s.add(F2()),l=s.add(e0({pulse:Ne(c)}));s.addData(i,new Jl(s,c,c,l)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}function oLe(e,t,n){let r=t.add(Tte({pulse:n.pulse})),i=t.fork();i.add(e0()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function Xte(e,t,n){let r=e.remove,i=e.insert,o=e.toggle,a=e.modify,s=e.values,c=t.add(VC()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,o,a,s].map(f=>f??"null").join(",")+"),0)",u=k2(l,t);c.update=u.$expr,c.params=u.$params}function OC(e,t){let n=qte(e),r=e.type===IC,i=e.from&&e.from.facet,o=e.overlap,a=e.layout||n===OT||n===RT,s,c,l,u,f,d,p,h=n===FT||a||i,m=rLe(e.from,r,t);c=t.add(Oze({key:m.key||(e.key?Ip(e.key):void 0),pulse:m.pulse,clean:!r}));let g=Ne(c);c=l=t.add(F2({pulse:g})),c=t.add(qze({markdef:XHe(e),interactive:QHe(e.interactive,t),clip:YHe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ne(c)}));let v=Ne(c);c=u=t.add(kte(Ate(e.encode,e.type,n,e.style,t,{mod:!1,pulse:v}))),c.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{let w=XT(S,t),E=w.metadata;(E.generates||E.changes)&&B("Mark transforms should not generate new data."),E.nomod||(u.params.mod=!0),w.params.pulse=Ne(c),t.add(c=w)}),e.sort&&(c=t.add(tHe({sort:t.compareRef(e.sort),pulse:Ne(c)})));let y=Ne(c);(i||a)&&(a=t.add(Fte({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:y})),d=Ne(a));let C=t.add(_te({mark:v,pulse:d||y}));p=Ne(C),r&&(h&&(s=t.operators,s.pop(),a&&s.pop()),t.pushState(y,d||p,g),i?iLe(e,t,m):h?oLe(e,t,m):t.parse(e),t.popState(),h&&(a&&s.push(a),s.push(C))),o&&(p=aLe(o,p,t));let b=t.add(Ite({pulse:p})),M=t.add(e0({pulse:Ne(b)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new Jl(t,l,b,M)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&B("Marks only support modify triggers."),Xte(S,t,f)}))}function aLe(e,t,n){let r=e.method,i=e.bound,o=e.separation,a={separation:dr(o)?n.signalRef(o.signal):o,method:dr(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),i){let s=i.tolerance;a.boundTolerance=dr(s)?n.signalRef(s.signal):+s,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return Ne(n.add(Xze(a)))}function sLe(e,t){let n=t.config.legend,r=e.encode||{},i=k1(e,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,c=o.style,l={},u=0,f,d,p;jT.forEach(C=>e[C]?(l[C]=e[C],u=u||e[C]):0),u||B("Missing valid scale for legend.");let h=cLe(e,t.scaleType(u)),m={title:e.title!=null,scales:l,type:h,vgrad:h!=="symbol"&&i.isVertical()},g=Ne(t.add(F2(null,[m]))),v={enter:{x:{value:0},y:{value:0}}},y=Ne(t.add(jze(d={type:h,scale:t.scaleRef(u),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return h===LC?(p=[kHe(e,u,n,r.gradient),pte(e,n,r.labels,y)],d.count=d.count||t.signalRef(`max(2,2*floor((${Zl(i.gradientLength())})/100))`)):h===TT?p=[THe(e,u,n,r.gradient,y),pte(e,n,r.labels,y)]:(f=OHe(e,n),p=[RHe(e,n,r,y,Zl(f.columns))],d.size=fLe(e,t,p[0].marks)),p=[Rp({role:aze,from:g,encode:v,marks:p,layout:f,interactive:s})],m.title&&p.push(WHe(e,n,r.title,g)),OC(Rp({role:ize,from:g,encode:nf(uLe(i,e,n),o,Pp),marks:p,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:c}),t)}function cLe(e,t){let n=e.type||dte;return!e.type&&lLe(e)===1&&(e.fill||e.stroke)&&(n=l7(t)?LC:Cy(t)?TT:dte),n!==LC?n:Cy(t)?TT:LC}function lLe(e){return jT.reduce((t,n)=>t+(e[n]?1:0),0)}function uLe(e,t,n){let r={enter:{},update:{}};return Zr(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function fLe(e,t,n){let r=Zl(Cte("size",e,n)),i=Zl(Cte("strokeWidth",e,n)),o=Zl(dLe(n[1].encode,t,Op));return k2(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function Cte(e,t,n){return t[e]?`scale("${t[e]}",datum)`:jte(e,n[0].encode)}function dLe(e,t,n){return jte("fontSize",e)||NHe("fontSize",t,n)}var pLe=`item.orient==="${rf}"?-90:item.orient==="${of}"?90:0`;function hLe(e,t){e=Q(e)?{text:e}:e;let n=k1(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,c=[],l={},u=Ne(t.add(F2(null,[l])));return c.push(vLe(e,n,mLe(e),u)),e.subtitle&&c.push(yLe(e,n,r.subtitle,u)),OC(Rp({role:uze,from:u,encode:gLe(n,i),marks:c,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function mLe(e){let t=e.encode;return t&&t.title||Te({name:e.name,interactive:e.interactive,style:e.style},t)}function gLe(e,t){let n={enter:{},update:{}};return Zr(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:qT},angle:{signal:pLe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),nf(n,t,Pp)}function vLe(e,t,n,r){let i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Zr(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),ao({type:t0,role:fze,style:wHe,from:r,encode:a},n)}function yLe(e,t,n,r){let i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Zr(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),ao({type:t0,role:dze,style:SHe,from:r,encode:a},n)}function xLe(e,t){let n=[];e.transform&&e.transform.forEach(r=>{n.push(XT(r,t))}),e.on&&e.on.forEach(r=>{Xte(r,t,e.name)}),t.addDataPipeline(e.name,CLe(e,t,n))}function CLe(e,t,n){let r=[],i=null,o=!1,a=!1,s,c,l,u,f;for(e.values?dr(e.values)||zC(e.format)?(r.push(bte(t,e)),r.push(i=Kl())):r.push(i=Kl({$ingest:e.values,$format:e.format})):e.url?zC(e.url)||zC(e.format)?(r.push(bte(t,e)),r.push(i=Kl())):r.push(i=Kl({$request:e.url,$format:e.format})):e.source&&(i=s=te(e.source).map(d=>Ne(t.getData(d).output)),r.push(null)),c=0,l=n.length;c<l;++c)u=n[c],f=u.metadata,!i&&!f.source&&r.push(i=Kl()),r.push(u),f.generates&&(a=!0),f.modifies&&!a&&(o=!0),f.source?i=u:f.changes&&(i=null);return s&&(l=s.length-1,r[0]=Jze({derive:o,pulse:l?s:s[0]}),(o||l)&&r.splice(1,0,Kl())),i||r.push(Kl()),r.push(e0({})),r}function Kl(e){let t=F2({},e);return t.metadata={source:!0},t}function bte(e,t){return Gze({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}var Qte=e=>e===K3||e===R2,PC=(e,t,n)=>dr(e)?SLe(e.signal,t,n):e===rf||e===R2?t:n,zr=(e,t,n)=>dr(e)?MLe(e.signal,t,n):Qte(e)?t:n,I2=(e,t,n)=>dr(e)?wLe(e.signal,t,n):Qte(e)?n:t,Kte=(e,t,n)=>dr(e)?ELe(e.signal,t,n):e===R2?{value:t}:{value:n},bLe=(e,t,n)=>dr(e)?DLe(e.signal,t,n):e===of?{value:t}:{value:n},MLe=(e,t,n)=>Zte(`${e} === '${R2}' || ${e} === '${K3}'`,t,n),wLe=(e,t,n)=>Zte(`${e} !== '${R2}' && ${e} !== '${K3}'`,t,n),SLe=(e,t,n)=>QT(`${e} === '${rf}' || ${e} === '${R2}'`,t,n),ELe=(e,t,n)=>QT(`${e} === '${R2}'`,t,n),DLe=(e,t,n)=>QT(`${e} === '${of}'`,t,n),Zte=(e,t,n)=>(t=t!=null?Dr(t):t,n=n!=null?Dr(n):n,Mte(t)&&Mte(n)?(t=t?t.signal||Z(t.value):null,n=n?n.signal||Z(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Te({test:e},t)].concat(n||[])),Mte=e=>e==null||Object.keys(e).length===1,QT=(e,t,n)=>({signal:`${e} ? (${Ju(t)}) : (${Ju(n)})`}),zLe=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${rf}' ? (${Ju(r)}) : `:"")+(n!=null?`${e} === '${K3}' ? (${Ju(n)}) : `:"")+(i!=null?`${e} === '${of}' ? (${Ju(i)}) : `:"")+(t!=null?`${e} === '${R2}' ? (${Ju(t)}) : `:"")+"(null)"}),Ju=e=>dr(e)?e.signal:e==null?null:Z(e),HLe=(e,t)=>t===0?0:dr(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},ef=(e,t)=>{let n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Ku(e,t,n,r){let i;if(t&&he(t,e))return t[e];if(he(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[UT][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Op][i]}return null}function wte(e){let t={};for(let n of e)if(n)for(let r in n)t[r]=1;return Object.keys(t)}function LLe(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,s,c,l;if(dr(a)){let f=wte([n.axisX,n.axisY]),d=wte([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);s={};for(l of f)s[l]=zr(a,Ku(l,n.axisX,i,r),Ku(l,n.axisY,i,r));c={};for(l of d)c[l]=zLe(a.signal,Ku(l,n.axisTop,i,r),Ku(l,n.axisBottom,i,r),Ku(l,n.axisLeft,i,r),Ku(l,n.axisRight,i,r))}else s=a===R2||a===K3?n.axisX:n.axisY,c=n["axis"+a[0].toUpperCase()+a.slice(1)];return s||c||o?Te({},i,s,c,o):i}function ALe(e,t,n,r){let i=k1(e,t),o=e.orient,a,s,c={enter:a={opacity:bt},update:s={opacity:Uo},exit:{opacity:bt}};Zr(c,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});let l=Ste(e,0),u=Ste(e,1);return a.x=s.x=zr(o,l,bt),a.x2=s.x2=zr(o,u),a.y=s.y=I2(o,l,bt),a.y2=s.y2=I2(o,u),ao({type:GT,role:JDe,from:r,encode:c},n)}function Ste(e,t){return{scale:e.scale,range:t}}function VLe(e,t,n,r,i){let o=k1(e,t),a=e.orient,s=e.gridScale,c=PC(a,1,-1),l=NLe(e.offset,c),u,f,d,p={enter:u={opacity:bt},update:d={opacity:Uo},exit:f={opacity:bt}};Zr(p,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});let h={scale:e.scale,field:Bo,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},m=zr(a,{signal:"height"},{signal:"width"}),g=s?{scale:s,range:0,mult:c,offset:l}:{value:0,offset:l},v=s?{scale:s,range:1,mult:c,offset:l}:Te(m,{mult:c,offset:l});return u.x=d.x=zr(a,h,g),u.y=d.y=I2(a,h,g),u.x2=d.x2=I2(a,v),u.y2=d.y2=zr(a,v),f.x=zr(a,h),f.y=I2(a,h),ao({type:GT,role:eze,key:Bo,from:r,encode:p},n)}function NLe(e,t){if(t!==1)if(!ne(e))e=dr(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Te({},e);for(;n.mult!=null;)if(ne(n.mult))n=n.mult=Te({},n.mult);else return n.mult=dr(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function _Le(e,t,n,r,i,o){let a=k1(e,t),s=e.orient,c=PC(s,-1,1),l,u,f,d={enter:l={opacity:bt},update:f={opacity:Uo},exit:u={opacity:bt}};Zr(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});let p=Dr(i);p.mult=c;let h={scale:e.scale,field:Bo,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return f.y=l.y=zr(s,bt,h),f.y2=l.y2=zr(s,p),u.x=zr(s,h),f.x=l.x=I2(s,bt,h),f.x2=l.x2=I2(s,p),u.y=I2(s,h),ao({type:GT,role:nze,key:Bo,from:r,encode:d},n)}function LT(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function kLe(e,t,n,r,i,o){let a=k1(e,t),s=e.orient,c=e.scale,l=PC(s,-1,1),u=Zl(a("labelFlush")),f=Zl(a("labelFlushOffset")),d=a("labelAlign"),p=a("labelBaseline"),h=u===0||!!u,m,g=Dr(i);g.mult=l,g.offset=Dr(a("labelPadding")||0),g.offset.mult=l;let v={scale:c,field:Bo,band:.5,offset:Gte(o.offset,a("labelOffset"))},y=zr(s,h?LT(c,u,'"left"','"right"','"center"'):{value:"center"},bLe(s,"left","right")),C=zr(s,Kte(s,"bottom","top"),h?LT(c,u,'"top"','"bottom"','"middle"'):{value:"middle"}),b=LT(c,u,`-(${f})`,f,0);h=h&&f;let M={opacity:bt,x:zr(s,v,g),y:I2(s,v,g)},S={enter:M,update:m={opacity:Uo,text:{field:BT},x:M.x,y:M.y,align:y,baseline:C},exit:{opacity:bt,x:M.x,y:M.y}};Zr(S,{dx:!d&&h?zr(s,b):null,dy:!p&&h?I2(s,b):null}),Zr(S,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:p});let w=a("labelBound"),E=a("labelOverlap");return E=E||w?{separation:a("labelSeparation"),method:E,order:"datum.index",bound:w?{scale:c,orient:s,tolerance:w}:null}:void 0,m.align!==y&&(m.align=ef(m.align,y)),m.baseline!==C&&(m.baseline=ef(m.baseline,C)),ao({type:t0,role:tze,style:Op,key:Bo,from:r,encode:S,overlap:E},n)}function TLe(e,t,n,r){let i=k1(e,t),o=e.orient,a=PC(o,-1,1),s,c,l={enter:s={opacity:bt,anchor:Dr(i("titleAnchor",null)),align:{signal:qT}},update:c=Te({},s,{opacity:Uo,text:Dr(e.title)}),exit:{opacity:bt}},u={signal:`lerp(range("${e.scale}"), ${FC(0,1,.5)})`};return c.x=zr(o,u),c.y=I2(o,u),s.angle=zr(o,bt,HLe(a,90)),s.baseline=zr(o,Kte(o,K3,R2),{value:K3}),c.angle=s.angle,c.baseline=s.baseline,Zr(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),ILe(i,o,l,n),l.update.align=ef(l.update.align,s.align),l.update.angle=ef(l.update.angle,s.angle),l.update.baseline=ef(l.update.baseline,s.baseline),ao({type:t0,role:rze,style:UT,from:r,encode:l},n)}function ILe(e,t,n,r){let i=(s,c)=>s!=null?(n.update[c]=ef(Dr(s),n.update[c]),!1):!Zu(c,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?Dr(a):zr(t,Dr(a),Dr(o))}function FLe(e,t){let n=LLe(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,c=k1(e,n),l=_He(c),u={scale:e.scale,ticks:!!c("ticks"),labels:!!c("labels"),grid:!!c("grid"),domain:!!c("domain"),title:e.title!=null},f=Ne(t.add(F2({},[u]))),d=Ne(t.add(Rze({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),p=[],h;return u.grid&&p.push(VLe(e,n,r.grid,d,l)),u.ticks&&(h=c("tickSize"),p.push(_Le(e,n,r.ticks,d,h,l))),u.labels&&(h=u.ticks?h:0,p.push(kLe(e,n,r.labels,d,h,l))),u.domain&&p.push(ALe(e,n,r.domain,f)),u.title&&p.push(TLe(e,n,r.title,f)),OC(Rp({role:ZDe,from:f,encode:nf(RLe(c,e),i,Pp),marks:p,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:o,interactive:a,style:s}),t)}function RLe(e,t){let n={enter:{},update:{}};return Zr(n,{orient:e("orient"),offset:e("offset")||0,position:T2(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Jte(e,t,n){let r=te(e.signals),i=te(e.scales);return n||r.forEach(o=>Vte(o,t)),te(e.projections).forEach(o=>gHe(o,t)),i.forEach(o=>iHe(o,t)),te(e.data).forEach(o=>xLe(o,t)),i.forEach(o=>oHe(o,t)),(n||r).forEach(o=>Fze(o,t)),te(e.axes).forEach(o=>FLe(o,t)),te(e.marks).forEach(o=>OC(o,t)),te(e.legends).forEach(o=>sLe(o,t)),e.title&&hLe(e.title,t),t.parseLambdas(),t}var OLe=e=>nf({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function PLe(e,t){let n=t.config,r=Ne(t.root=t.add(VC())),i=$Le(e,n);i.forEach(l=>Vte(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;let o=t.add(F2()),a=t.add(kte(Ate(OLe(e.encode),IC,RT,e.style,t,{pulse:Ne(o)}))),s=t.add(Fte({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Ne(a)}));t.operators.pop(),t.pushState(Ne(a),Ne(s),null),Jte(e,t,i),t.operators.push(s);let c=t.add(_te({mark:r,pulse:Ne(s)}));return c=t.add(Ite({pulse:Ne(c)})),c=t.add(e0({pulse:Ne(c)})),t.addData("root",new Jl(t,o,o,c)),t}function Tp(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function $Le(e,t){let n=a=>T2(e[a],t[a]),r=[Tp("background",n("background")),Tp("autosize",XDe(n("autosize"))),Tp("padding",KDe(n("padding"))),Tp("width",n("width")||0),Tp("height",n("height")||0)],i=r.reduce((a,s)=>(a[s.name]=s,a),{}),o={};return te(e.signals).forEach(a=>{he(i,a.name)?a=Te(i[a.name],a):r.push(a),o[a.name]=a}),te(t.signals).forEach(a=>{!he(o,a.name)&&!he(i,a.name)&&r.push(a)}),r}function ene(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Ete(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}ene.prototype=Ete.prototype={parse(e){return Jte(e,this)},fork(){return new Ete(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){let t=e instanceof AT?Ne(e):e;return this.add(Zze({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let a,s;r&&(a=r.data||(r.data={}),s=a[i]||(a[i]=[]),s.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(let r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Ne(this.add(e0({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ne(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Ye(this._parent)},encode(){return Ye(this._encode)},lookup(){return Ye(this._lookup)},markpath(){let e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Q(e))return Ip(e,t);e.signal||B("Unsupported field reference: "+Z(e));let n=e.signal,r=this.field[n];if(!r){let i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Ne(this.add(Bze(i)))}return r},compareRef(e){let t=!1,n=o=>dr(o)?(t=!0,this.signalRef(o.signal)):zze(o)?(t=!0,this.exprRef(o.expr)):o,r=te(e.field).map(n),i=te(e.order).map(n);return t?Ne(this.add(fte({fields:r,orders:i}))):lte(r,i)},keyRef(e,t){let n=!1,r=o=>dr(o)?(n=!0,Ne(i[o.signal])):o,i=this.signals;return e=te(e).map(r),n?Ne(this.add(Uze({fields:e,flat:t}))):wze(e,t)},sortRef(e){if(!e)return e;let t=kC(e.op,e.field),n=e.order||Sze;return n.signal?Ne(this.add(fte({fields:t,orders:this.signalRef(n.signal)}))):lte(t,n)},event(e,t){let n=e+":"+t;if(!this.events[n]){let r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return he(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&B("Duplicate signal name: "+Z(e));let n=t instanceof AT?t:this.add(VC(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||B("Unrecognized signal name: "+Z(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ne(this.signals[e]):(he(this.lambdas,e)||(this.lambdas[e]=this.add(VC(null))),Ne(this.lambdas[e]))},parseLambdas(){let e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){let r=e[t],i=k2(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ne(e)?e:this.signalRef(e.signal||KT(e))},exprRef(e,t){let n={expr:k2(e,this)};return t&&(n.expr.$name=t),Ne(this.add(Pze(n)))},addBinding(e,t){this.bindings||B("Nested signals do not support binding: "+Z(e)),this.bindings.push(Te({signal:e},t))},addScaleProj(e,t){he(this.scales,e)&&B("Duplicate scale or projection name: "+Z(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,eHe(t))},addProjection(e,t){this.addScaleProj(e,Kze(t))},getScale(e){return this.scales[e]||B("Unrecognized scale name: "+Z(e)),this.scales[e]},scaleRef(e){return Ne(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return he(this.data,e)&&B("Duplicate data set name: "+Z(e)),this.data[e]=t},getData(e){return this.data[e]||B("Undefined data set name: "+Z(e)),this.data[e]},addDataPipeline(e,t){return he(this.data,e)&&B("Duplicate data set name: "+Z(e)),this.addData(e,Jl.fromEntries(this,t))}};function KT(e){return(F(e)?BLe:ULe)(e)}function BLe(e){let t=e.length,n="[";for(let r=0;r<t;++r){let i=e[r];n+=(r>0?",":"")+(ne(i)?i.signal||KT(i):Z(i))}return n+"]"}function ULe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Z(r)+":"+(ne(i)?i.signal||KT(i):Z(i));return t+"}"}function jLe(){let e="sans-serif",r="#4c78a8",i="#000",o="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function tne(e,t,n){return ne(e)||B("Input Vega specification must be an object."),t=Ha(jLe(),t,e.config),PLe(e,new ene(t,n)).toRuntime()}var GLe="5.28.0";Te(Ys,nA,uN,mN,__,W_,Tk,Sk,Ok,Bk,Gk,Yk);function qLe(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var WLe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},YLe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},XLe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e},QLe=Array.prototype.slice,n0=(e,t,n)=>{let r=n?n(t[0]):t[0];return r[e].apply(r,QLe.call(t,1))},KLe=(e,t,n,r,i,o,a)=>new Date(e,t||0,n??1,r||0,i||0,o||0,a||0),ZLe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:KLe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return n0("join",arguments)},indexof:function(){return n0("indexOf",arguments)},lastindexof:function(){return n0("lastIndexOf",arguments)},slice:function(){return n0("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return n0("substring",arguments,String)},split:function(){return n0("split",arguments,String)},replace:function(){return n0("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)},JLe=["view","item","group","xy","x","y"],JT=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&JT.add(setImmediate);var eAe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{let n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:WLe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{let n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);let i=e(t.property);if(n&&(e.memberDepth-=1),JT.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{let n=t.arguments,r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||ZLe[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>YLe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>XLe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;let i=e(r.key);return e.memberDepth-=1,JT.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function $p(e,t,n,r,i,o){let a=s=>eAe[s.type](a,s);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=r,a.event=i,a.item=o,JLe.forEach(s=>a.fn[s]=function(){return i.vega[s](...arguments)}),a(e)}var nne={operator(e,t){let n=t.ast,r=e.functions;return i=>$p(n,r,i)},parameter(e,t){let n=t.ast,r=e.functions;return(i,o)=>$p(n,r,o,i)},event(e,t){let n=t.ast,r=e.functions;return i=>$p(n,r,void 0,void 0,i)},handler(e,t){let n=t.ast,r=e.functions;return(i,o)=>{let a=o.item&&o.item.datum;return $p(n,r,i,a,o)}},encode(e,t){let{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(a,s)=>{let c=a.datum,l=0,u;for(let f in r)u=$p(r[f].ast,i,s,c,void 0,a),a[f]!==u&&(a[f]=u,l=1);return n!=="rule"&&qLe(a,r,o),l}}};var qF={};mr(qF,{accessPathDepth:()=>r0,accessPathWithDatum:()=>jp,compile:()=>f2e,contains:()=>Ae,deepEqual:()=>Hr,deleteNestedProperty:()=>Up,duplicate:()=>fe,entries:()=>T1,every:()=>GC,fieldIntersection:()=>WC,flatAccessWithDatum:()=>iI,getFirstDefined:()=>ct,hasIntersection:()=>qC,hash:()=>be,internalField:()=>aI,isBoolean:()=>sf,isEmpty:()=>Ke,isEqual:()=>rAe,isInternalField:()=>ane,isNullOrFalse:()=>jC,isNumeric:()=>qp,keys:()=>O,logicalExpr:()=>af,mergeDeep:()=>nI,never:()=>tI,normalize:()=>iM,normalizeAngle:()=>e4,omit:()=>_n,pick:()=>mc,prefixGenerator:()=>eI,removePathFromField:()=>Gp,replaceAll:()=>O2,replacePathInField:()=>Kn,resetIdCounter:()=>oAe,setEqual:()=>rI,some:()=>Ka,stringify:()=>mt,titleCase:()=>J3,unique:()=>zi,uniqueId:()=>oI,vals:()=>Jt,varName:()=>ht,version:()=>ITe});var rne={name:"vega-lite",author:'Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',version:"5.16.3",collaborators:["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-Lite is a concise high-level language for interactive visualization.",keywords:["vega","chart","visualization"],main:"build/vega-lite.js",unpkg:"build/vega-lite.min.js",jsdelivr:"build/vega-lite.min.js",module:"build/src/index",types:"build/src/index.d.ts",bin:{vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},files:["bin","build","src","vega-lite*","tsconfig.json"],scripts:{changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@babel/core":"^7.22.10","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-alias":"^5.0.0","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^25.0.4","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.2.1","@rollup/plugin-terser":"^0.4.3","@types/chai":"^4.3.5","@types/d3":"^7.4.0","@types/jest":"^29.5.4","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^6.4.1","@typescript-eslint/parser":"^6.4.1",ajv:"^8.12.0","ajv-formats":"^2.1.1",chai:"^4.3.7",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.0.0",d3:"^7.8.5","del-cli":"^5.0.0",eslint:"^8.47.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.8.0",jest:"^29.6.3","jest-dev-server":"^9.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.0.2",puppeteer:"^15.0.0","release-it":"^16.1.5",rollup:"^3.28.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3",serve:"^14.2.1",terser:"^5.19.2","ts-jest":"^29.1.1","ts-json-schema-generator":"^1.3.0",typescript:"~5.2.2","vega-cli":"^5.25.0","vega-datasets":"^2.7.0","vega-embed":"^6.22.2","vega-tooltip":"^0.33.0","yaml-front-matter":"^4.1.1"},dependencies:{"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},peerDependencies:{vega:"^5.24.0"},engines:{node:">=18"}};function $C(e){return!!e.or}function BC(e){return!!e.and}function UC(e){return!!e.not}function Bp(e,t){if(UC(e))Bp(e.not,t);else if(BC(e))for(let n of e.and)Bp(n,t);else if($C(e))for(let n of e.or)Bp(n,t);else t(e)}function Z3(e,t){return UC(e)?{not:Z3(e.not,t)}:BC(e)?{and:e.and.map(n=>Z3(n,t))}:$C(e)?{or:e.or.map(n=>Z3(n,t))}:t(e)}var fe=structuredClone;function tI(e){throw new Error(e)}function mc(e,t){let n={};for(let r of t)he(e,r)&&(n[r]=e[r]);return n}function _n(e,t){let n=x({},e);for(let r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>mt(e)).join(",")})`};function be(e){if(Be(e))return e;let t=Q(e)?e:mt(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function jC(e){return e===!1||e===null}function Ae(e,t){return e.includes(t)}function Ka(e,t){let n=0;for(let[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function GC(e,t){let n=0;for(let[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function nI(e,...t){for(let n of t)nAe(e,n??{});return e}function nAe(e,t){for(let n of O(t))Rs(e,n,t[n],!0)}function zi(e,t){let n=[],r={},i;for(let o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function rAe(e,t){let n=O(e),r=O(t);if(n.length!==r.length)return!1;for(let i of n)if(e[i]!==t[i])return!1;return!0}function rI(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function qC(e,t){for(let n of e)if(t.has(n))return!0;return!1}function eI(e){let t=new Set;for(let n of e){let i=zo(n).map((a,s)=>s===0?a:`[${a}]`),o=i.map((a,s)=>i.slice(0,s+1).join(""));for(let a of o)t.add(a)}return t}function WC(e,t){return e===void 0||t===void 0?!0:qC(eI(e),eI(t))}function Ke(e){return O(e).length===0}var O=Object.keys,Jt=Object.values,T1=Object.entries;function sf(e){return e===!0||e===!1}function ht(e){let t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function af(e,t){return UC(e)?`!(${af(e.not,t)})`:BC(e)?`(${e.and.map(n=>af(n,t)).join(") && (")})`:$C(e)?`(${e.or.map(n=>af(n,t)).join(") || (")})`:t(e)}function Up(e,t){if(t.length===0)return!0;let n=t.shift();return n in e&&Up(e[n],t)&&delete e[n],Ke(e)}function J3(e){return e.charAt(0).toUpperCase()+e.substr(1)}function jp(e,t="datum"){let n=zo(e),r=[];for(let i=1;i<=n.length;i++){let o=`[${n.slice(0,i).map(Z).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function iI(e,t="datum"){return`${t}[${Z(zo(e).join("."))}]`}function iAe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Kn(e){return`${zo(e).map(iAe).join("\\.")}`}function O2(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Gp(e){return`${zo(e).join(".")}`}function r0(e){return e?zo(e).length:0}function ct(...e){for(let t of e)if(t!==void 0)return t}var one=42;function oI(e){let t=++one;return e?String(e)+t:t}function oAe(){one=42}function aI(e){return ane(e)?e:`__${e}`}function ane(e){return e.startsWith("__")}function e4(e){if(e!==void 0)return(e%360+360)%360}function qp(e){return Be(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}var ine=Object.getPrototypeOf(structuredClone({}));function Hr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Hr(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Hr(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==ine.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==ine.toString)return e.toString()===t.toString();let i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){let o=i[r];if(!Hr(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function mt(e){let t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");let a=t.push(r)-1,s=Object.keys(r).sort();for(o="",i=0;i<s.length;i++){let c=s[i],l=n(r[c]);l&&(o&&(o+=","),o+=JSON.stringify(c)+":"+l)}return t.splice(a,1),`{${o}}`}(e)}var I1="row",F1="column",cf="facet",Mt="x",en="y",R1="x2",so="y2",jo="xOffset",Za="yOffset",Hi="radius",P2="radius2",Jr="theta",$2="theta2",ei="latitude",ti="longitude",Li="latitude2",ni="longitude2",kn="color",Ai="fill",Vi="stroke",xn="shape",O1="size",B2="angle",c1="opacity",co="fillOpacity",lo="strokeOpacity",uo="strokeWidth",fo="strokeDash",i0="text",t4="order",o0="detail",lf="key",gc="tooltip",uf="href",ff="url",df="description",aAe={x:1,y:1,x2:1,y2:1},dne={theta:1,theta2:1,radius:1,radius2:1};function sI(e){return e in dne}var cI={longitude:1,longitude2:1,latitude:1,latitude2:1};function XC(e){switch(e){case ei:return"y";case Li:return"y2";case ti:return"x";case ni:return"x2"}}function QC(e){return e in cI}var pne=O(cI),lI=k(x(x(x({},aAe),dne),cI),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function vc(e){return e===kn||e===Ai||e===Vi}var hne={row:1,column:1,facet:1},Lr=O(hne),uI=x(x({},lI),hne),mne=O(uI),sne=uI,{order:U6t,detail:j6t,tooltip:G6t}=sne,gne=ie(sne,["order","detail","tooltip"]),cne=gne,{row:q6t,column:W6t,facet:Y6t}=cne,vne=ie(cne,["row","column","facet"]),X6t=O(gne),Q6t=O(vne);function yne(e){return!!vne[e]}function KC(e){return!!uI[e]}var xne=[R1,so,Li,ni,$2,P2];function ZC(e){return po(e)!==e}function po(e){switch(e){case R1:return Mt;case so:return en;case Li:return ei;case ni:return ti;case $2:return Jr;case P2:return Hi}return e}function Go(e){if(sI(e))switch(e){case Jr:return"startAngle";case $2:return"endAngle";case Hi:return"outerRadius";case P2:return"innerRadius"}return e}function Ar(e){switch(e){case Mt:return R1;case en:return so;case ei:return Li;case ti:return ni;case Jr:return $2;case Hi:return P2}}function Cn(e){switch(e){case Mt:case R1:return"width";case en:case so:return"height"}}function fI(e){switch(e){case Mt:return"xOffset";case en:return"yOffset";case R1:return"x2Offset";case so:return"y2Offset";case Jr:return"thetaOffset";case Hi:return"radiusOffset";case $2:return"theta2Offset";case P2:return"radius2Offset"}}function pf(e){switch(e){case Mt:return"xOffset";case en:return"yOffset"}}function Cne(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}var bne=O(lI),lne=lI,{x:K6t,y:Z6t,x2:J6t,y2:eut,xOffset:tut,yOffset:nut,latitude:rut,longitude:iut,latitude2:out,longitude2:aut,theta:sut,theta2:cut,radius:lut,radius2:uut}=lne,dI=ie(lne,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),Mne=O(dI),pI={x:1,y:1},pr=O(pI);function wt(e){return e in pI}var JC={theta:1,radius:1},wne=O(JC);function n4(e){return e==="width"?Mt:en}var hI={xOffset:1,yOffset:1},fut=O(hI);function yc(e){return e in hI}var une=dI,{text:dut,tooltip:put,href:hut,url:mut,description:gut,detail:vut,key:yut,order:xut}=une,Sne=ie(une,["text","tooltip","href","url","description","detail","key","order"]),Ene=O(Sne);function Dne(e){return!!dI[e]}function zne(e){switch(e){case kn:case Ai:case Vi:case O1:case xn:case c1:case uo:case fo:return!0;case co:case lo:case B2:return!1}}var Hne=x(x(x(x({},pI),JC),hI),Sne),r4=O(Hne);function Vr(e){return!!Hne[e]}function Lne(e,t){return cAe(e)[t]}var Ane={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},fne=Ane,{geoshape:Cut}=fne,sAe=ie(fne,["geoshape"]);function cAe(e){switch(e){case kn:case Ai:case Vi:case df:case o0:case lf:case gc:case uf:case t4:case c1:case co:case lo:case uo:case cf:case I1:case F1:return Ane;case Mt:case en:case jo:case Za:case ei:case ti:return sAe;case R1:case so:case Li:case ni:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case O1:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case fo:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case xn:return{point:"always",geoshape:"always"};case i0:return{text:"always"};case B2:return{point:"always",square:"always",text:"always"};case ff:return{image:"always"};case Jr:return{text:"always",arc:"always"};case Hi:return{text:"always",arc:"always"};case $2:case P2:return{arc:"always"}}}function eb(e){switch(e){case Mt:case en:case Jr:case Hi:case jo:case Za:case O1:case B2:case uo:case c1:case co:case lo:case R1:case so:case $2:case P2:return;case cf:case I1:case F1:case xn:case fo:case i0:case gc:case uf:case ff:case df:return"discrete";case kn:case Ai:case Vi:return"flexible";case ei:case ti:case Li:case ni:case o0:case lf:case t4:return}}var uAe={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Vne={count:1,min:1,max:1};function ho(e){return!!e&&!!e.argmin}function qo(e){return!!e&&!!e.argmax}function hf(e){return Q(e)&&!!uAe[e]}var fAe=new Set(["count","valid","missing","distinct"]);function tb(e){return Q(e)&&fAe.has(e)}function Nne(e){return Q(e)&&Ae(["min","max"],e)}var _ne=new Set(["count","sum","distinct","valid","missing"]),kne=new Set(["mean","average","median","q1","q3","min","max"]);function nb(e){return S1(e)&&(e=gf(e,void 0)),"bin"+O(e).map(t=>mf(e[t])?ht(`_${t}_${T1(e[t])}`):ht(`_${t}_${e[t]}`)).join("")}function rt(e){return e===!0||U2(e)&&!e.binned}function tn(e){return e==="binned"||U2(e)&&e.binned===!0}function U2(e){return ne(e)}function mf(e){return e?.param}function mI(e){switch(e){case I1:case F1:case O1:case kn:case Ai:case Vi:case uo:case c1:case co:case lo:case xn:return 6;case fo:return 4;default:return 10}}function i4(e){return!!e?.expr}function Zn(e){let t=O(e||{}),n={};for(let r of t)n[r]=Nr(e[r]);return n}function rb(e){let b=e,{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:a,color:s,subtitleColor:c,subtitleFont:l,subtitleFontSize:u,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:p,subtitlePadding:h}=b,m=ie(b,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),g=x(x({},m),s?{fill:s}:{}),v=x(x(x(x(x(x({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),o!==void 0?{angle:o}:{}),a!==void 0?{limit:a}:{}),y=x(x(x(x(x(x(x({},c?{subtitleColor:c}:{}),l?{subtitleFont:l}:{}),u?{subtitleFontSize:u}:{}),f?{subtitleFontStyle:f}:{}),d?{subtitleFontWeight:d}:{}),p?{subtitleLineHeight:p}:{}),h?{subtitlePadding:h}:{}),C=mc(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:C,nonMarkTitleProperties:v,subtitle:y}}function j2(e){return Q(e)||F(e)&&Q(e[0])}function se(e){return!!e?.signal}function Ni(e){return!!e.step}function Tne(e){return F(e)?!1:"fields"in e&&!("data"in e)}function Ine(e){return F(e)?!1:"fields"in e&&"data"in e}function G2(e){return F(e)?!1:"field"in e&&"data"in e}var dAe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Fne=O(dAe),Rne={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},ib=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function ob(e){let t=F(e.condition)?e.condition.map(One):One(e.condition);return k(x({},Nr(e)),{condition:t})}function Nr(e){if(i4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return e}function One(e){if(i4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return e}function it(e){if(i4(e)){let t=e,{expr:n}=t,r=ie(t,["expr"]);return x({signal:n},r)}return se(e)?e:e!==void 0?{value:e}:void 0}function Pne(e){return se(e)?e.signal:Z(e)}function gI(e){return se(e)?e.signal:Z(e.value)}function l1(e){return se(e)?e.signal:e==null?null:Z(e)}function $ne(e,t,n){for(let r of n){let i=mo(r,t.markDef,t.config);i!==void 0&&(e[r]=it(i))}return e}function vI(e){return[].concat(e.type,e.style??[])}function Ge(e,t,n,r={}){let{vgChannel:i,ignoreVgConfig:o}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:mo(e,t,n,r)}function mo(e,t,n,{vgChannel:r}={}){return ct(r?Wp(e,t,n.style):void 0,Wp(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function Wp(e,t,n){return yI(e,vI(t),n)}function yI(e,t,n){t=te(t);let r;for(let i of t){let o=n[i];o&&o[e]!==void 0&&(r=o[e])}return r}function ab(e,t){return te(e).reduce((n,r)=>(n.field.push(K(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function xI(e,t){let n=[...e];return t.forEach(r=>{for(let i of n)if(Hr(i,r))return;n.push(r)}),n}function CI(e,t){return Hr(e,t)||!t?e:e?[...te(e),...te(t)].join(", "):t}function sb(e,t){let n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((j2(n)||se(n))&&(j2(r)||se(r)))return{explicit:e.explicit,value:CI(n,r)};if(j2(n)||se(n))return{explicit:e.explicit,value:n};if(j2(r)||se(r))return{explicit:e.explicit,value:r};if(!j2(n)&&!se(n)&&!j2(r)&&!se(r))return{explicit:e.explicit,value:xI(n,r)};throw new Error("It should never reach here")}var P={};mr(P,{ADD_SAME_CHILD_TWICE:()=>TAe,CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN:()=>sVe,CONCAT_CANNOT_SHARE_AXIS:()=>NAe,FACETED_INDEPENDENT_DIFFERENT_SOURCES:()=>SVe,FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES:()=>EVe,FACETED_INDEPENDENT_SAME_SOURCE:()=>DVe,FIT_NON_SINGLE:()=>hAe,INTERVAL_INITIALIZED_WITH_POS:()=>LAe,INVALID_CHANNEL_FOR_AXIS:()=>zVe,LEGEND_BINDINGS_MUST_HAVE_PROJECTION:()=>EAe,LINE_WITH_VARYING_SIZE:()=>QAe,MORE_THAN_ONE_SORT:()=>wVe,NEEDS_SAME_SELECTION:()=>HAe,NO_FIELDS_NEEDS_AS:()=>FAe,REPLACE_ANGLE_WITH_THETA:()=>PAe,SCALE_BINDINGS_CONTINUOUS:()=>SAe,cannotApplySizeToNonOrientedMark:()=>pVe,cannotLookupVariableParameter:()=>DAe,cannotProjectAggregate:()=>CAe,cannotProjectOnChannelWithoutField:()=>xAe,cannotStackNonLinearScale:()=>LVe,cannotStackRangedMark:()=>HVe,cannotUseRelativeBandSizeWithNonBandScale:()=>lVe,cannotUseScalePropertyWithNonColor:()=>cVe,channelRequiredForBinned:()=>FVe,channelShouldBeDiscrete:()=>eVe,channelShouldBeDiscreteOrDiscretizing:()=>tVe,channelShouldNotBeUsedForBinned:()=>RVe,columnsNotSupportByRowCol:()=>VAe,containerSizeNonSingle:()=>mAe,containerSizeNotCompatibleWithAutosize:()=>gAe,customFormatTypeNotAllowed:()=>RAe,differentParse:()=>kAe,discreteChannelCannotEncode:()=>rVe,domainRequiredForThresholdScale:()=>OVe,domainSortDropped:()=>MVe,droppedDay:()=>NVe,droppingColor:()=>WAe,droppingFit:()=>vAe,emptyFieldDef:()=>XAe,errorBand1DNotSupport:()=>IVe,errorBarCenterAndExtentAreNotNeeded:()=>_Ve,errorBarCenterIsUsedWithWrongExtent:()=>kVe,errorBarContinuousAxisHasCustomizedAggregate:()=>TVe,facetChannelDropped:()=>nVe,incompatibleChannel:()=>KAe,independentScaleMeansIndependentGuide:()=>bVe,invalidAggregate:()=>GAe,invalidEncodingChannel:()=>JAe,invalidFieldType:()=>UAe,invalidFieldTypeForCountAggregate:()=>jAe,invalidSpec:()=>pAe,invalidTimeUnit:()=>VVe,invalidTransformIgnored:()=>IAe,lineWithRange:()=>oVe,mergeConflictingDomainProperty:()=>CVe,mergeConflictingProperty:()=>xVe,missingFieldType:()=>qAe,nearestNotSupportForContinuous:()=>bAe,noSameUnitLookup:()=>zAe,noSuchRepeatedValue:()=>AAe,offsetEncodingScaleIgnored:()=>ZAe,offsetNestedInsideContinuousPositionScaleDropped:()=>$Ae,orientOverridden:()=>aVe,primitiveChannelDef:()=>BAe,projectionOverridden:()=>OAe,rangeMarkAlignmentCannotBeExpression:()=>iVe,relativeBandSizeNotSupported:()=>YAe,scalePropertyNotWorkWithScaleType:()=>gVe,scaleTypeNotWorkWithChannel:()=>hVe,scaleTypeNotWorkWithFieldDef:()=>mVe,scaleTypeNotWorkWithMark:()=>vVe,selectionNotFound:()=>wAe,selectionNotSupported:()=>MAe,stackNonSummativeAggregate:()=>AVe,stepDropped:()=>yVe,unaggregateDomainHasNoEffectForRawField:()=>uVe,unaggregateDomainWithNonSharedDomainOp:()=>fVe,unaggregatedDomainWithLogScale:()=>dVe,unknownField:()=>yAe,unrecognizedParse:()=>_Ae});function pAe(e){return`Invalid specification ${mt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}var hAe='Autosize "fit" only works for single views and layered views.';function mAe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function gAe(e){let t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function vAe(e){return e?`Dropping "fit-${e}" because spec has discrete ${Cn(e)}.`:'Dropping "fit" because spec has discrete size.'}function yAe(e){return`Unknown field for ${e}. Cannot calculate view size.`}function xAe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function CAe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function bAe(e){return`The "nearest" transform is not supported for ${e} marks.`}function MAe(e){return`Selection not supported for ${e} yet.`}function wAe(e){return`Cannot find a selection named "${e}".`}var SAe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",EAe="Legend bindings are only supported for selections over an individual field or encoding channel.";function DAe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function zAe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}var HAe="The same selection must be used to override scale domains in a layered view.",LAe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function AAe(e){return`Unknown repeated value "${e}".`}function VAe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}var NAe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function _Ae(e){return`Unrecognized parse "${e}".`}function kAe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}var TAe="Attempt to add the same child twice.";function IAe(e){return`Ignoring an invalid transform: ${mt(e)}.`}var FAe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function RAe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function OAe(e){let{parentProjection:t,projection:n}=e;return`Layer's shared projection ${mt(t)} is overridden by a child projection ${mt(n)}.`}var PAe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function $Ae(e){return`${e}Offset dropped because ${e} is continuous`}function BAe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${mt(n)}}.`}function UAe(e){return`Invalid field type "${e}".`}function jAe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function GAe(e){return`Invalid aggregation operator "${e}".`}function qAe(e,t){return`Missing type for channel "${e}", using "${t}" instead.`}function WAe(e,t){let{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function YAe(e){return`Position range does not support relative band size for ${e}.`}function XAe(e,t){return`Dropping ${mt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}var QAe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function KAe(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function ZAe(e){return`${e} encoding has no scale, so specified scale is ignored.`}function JAe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function eVe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function tVe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function nVe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function rVe(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function iVe(e){return`The ${e} for range marks cannot be an expression`}function oVe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function aVe(e,t){return`Specified orient "${e}" overridden with "${t}".`}var sVe="Custom domain scale cannot be unioned with default field-based domain.";function cVe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function lVe(e){return`Cannot use the relative band size with ${e} scale.`}function uVe(e){return`Using unaggregated domain with raw field has no effect (${mt(e)}).`}function fVe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function dVe(e){return`Unaggregated domain is currently unsupported for log scale (${mt(e)}).`}function pVe(e){return`Cannot apply size to non-oriented mark "${e}".`}function hVe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function mVe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function gVe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function vVe(e,t){return`Scale type "${t}" does not work with mark "${e}".`}function yVe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function xVe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${mt(n)} and ${mt(r)}). Using ${mt(n)}.`}function CVe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${mt(n)} and ${mt(r)}). Using the union of the two domains.`}function bVe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function MVe(e){return`Dropping sort property ${mt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}var wVe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",SVe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",EVe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",DVe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",zVe="Invalid channel for axis.";function HVe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function LVe(e){return`Cannot stack non-linear scale (${e}).`}function AVe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function VVe(e,t){return`Invalid ${e}: ${mt(t)}.`}function NVe(e){return`Dropping day from datetime ${mt(e)} as day cannot be combined with other units.`}function _Ve(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function kVe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function TVe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function IVe(e){return`1D error band does not support ${e}.`}function FVe(e){return`Channel ${e} is required for "binned" bin.`}function RVe(e){return`Channel ${e} should not be used with "binned" bin.`}function OVe(e){return`Domain for ${e} is required for threshold scale.`}var PVe,Bne=$5(Ig),vf=Bne;PVe=new WeakMap;function Une(e){return vf=e,vf}function jne(){return vf=Bne,vf}function U(...e){vf.warn(...e)}function Gne(...e){vf.debug(...e)}function Wo(e){if(e&&ne(e)){for(let t of cb)if(t in e)return!0}return!1}var qne=["january","february","march","april","may","june","july","august","september","october","november","december"],$Ve=qne.map(e=>e.substr(0,3)),Wne=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],BVe=Wne.map(e=>e.substr(0,3));function UVe(e){if(qp(e)&&(e=+e),Be(e))return e>4&&U(P.invalidTimeUnit("quarter",e)),e-1;throw new Error(P.invalidTimeUnit("quarter",e))}function jVe(e){if(qp(e)&&(e=+e),Be(e))return e-1;{let t=e.toLowerCase(),n=qne.indexOf(t);if(n!==-1)return n;let r=t.substr(0,3),i=$Ve.indexOf(r);if(i!==-1)return i;throw new Error(P.invalidTimeUnit("month",e))}}function GVe(e){if(qp(e)&&(e=+e),Be(e))return e%7;{let t=e.toLowerCase(),n=Wne.indexOf(t);if(n!==-1)return n;let r=t.substr(0,3),i=BVe.indexOf(r);if(i!==-1)return i;throw new Error(P.invalidTimeUnit("day",e))}}function bI(e,t){let n=[];if(t&&e.day!==void 0&&O(e).length>1&&(U(P.droppedDay(e)),e=fe(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){let r=t?jVe(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){let r=t?UVe(e.quarter):e.quarter;n.push(Be(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){let r=t?GVe(e.day):e.day;n.push(Be(r)?r+1:`${r}+1`)}else n.push(1);for(let r of["hours","minutes","seconds","milliseconds"]){let i=e[r];n.push(typeof i>"u"?0:i)}return n}function q2(e){let n=bI(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Yne(e){let n=bI(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Xne(e){let t=bI(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}var Qne={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},cb=O(Qne);function Kne(e){return!!Qne[e]}var qVe={binnedyear:1,binnedyearquarter:1,binnedyearquartermonth:1,binnedyearmonth:1,binnedyearmonthdate:1,binnedyearmonthdatehours:1,binnedyearmonthdatehoursminutes:1,binnedyearmonthdatehoursminutesseconds:1,binnedyearweek:1,binnedyearweekday:1,binnedyearweekdayhours:1,binnedyearweekdayhoursminutes:1,binnedyearweekdayhoursminutesseconds:1,binnedyeardayofyear:1},WVe={binnedutcyear:1,binnedutcyearquarter:1,binnedutcyearquartermonth:1,binnedutcyearmonth:1,binnedutcyearmonthdate:1,binnedutcyearmonthdatehours:1,binnedutcyearmonthdatehoursminutes:1,binnedutcyearmonthdatehoursminutesseconds:1,binnedutcyearweek:1,binnedutcyearweekday:1,binnedutcyearweekdayhours:1,binnedutcyearweekdayhoursminutes:1,binnedutcyearweekdayhoursminutesseconds:1,binnedutcyeardayofyear:1},ift=x(x({},qVe),WVe);function W2(e){return ne(e)?e.binned:Zne(e)}function Zne(e){return e&&e.startsWith("binned")}function MI(e){return e.startsWith("utc")}function YVe(e){return e.substring(3)}var XVe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function yf(e){return cb.filter(t=>Jne(e,t))}function wI(e){let t=yf(e);return t[t.length-1]}function Jne(e,t){let n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function ere(e,t,{end:n}={end:!1}){let r=jp(t),i=MI(e)?"utc":"";function o(c){return c==="quarter"?`(${i}quarter(${r})-1)`:`${i}${c}(${r})`}let a,s={};for(let c of cb)Jne(e,c)&&(s[c]=o(c),a=c);return n&&(s[a]+="+1"),Yne(s)}function SI(e){if(!e)return;let t=yf(e);return`timeUnitSpecifier(${mt(t)}, ${mt(XVe)})`}function tre(e,t,n){if(!e)return;let r=SI(e);return`${n||MI(e)?"utc":"time"}Format(${t}, ${r})`}function nn(e){if(!e)return;let t;return Q(e)?Zne(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ne(e)&&(t=x(x({},e),e.unit?{unit:e.unit}:{})),MI(t.unit)&&(t.utc=!0,t.unit=YVe(t.unit)),t}function nre(e){let r=nn(e),{utc:t}=r,n=ie(r,["utc"]);return n.unit?(t?"utc":"")+O(n).map(i=>ht(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+O(n).map(i=>ht(`_${i}_${n[i]}`)).join("")}function lb(e,t=n=>n){let n=nn(e),r=wI(n.unit);if(r&&r!=="day"){let i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:a}=EI(r,n.step),s=k(x({},i),{[a]:+i[a]+o});return`${t(q2(s))} - ${t(q2(i))}`}}var QVe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function KVe(e){return!!QVe[e]}function EI(e,t=1){if(KVe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function rre(e){return e?.param}function ub(e){return!!e?.field&&e.equal!==void 0}function fb(e){return!!e?.field&&e.lt!==void 0}function db(e){return!!e?.field&&e.lte!==void 0}function pb(e){return!!e?.field&&e.gt!==void 0}function hb(e){return!!e?.field&&e.gte!==void 0}function mb(e){if(e?.field){if(F(e.range)&&e.range.length===2)return!0;if(se(e.range))return!0}return!1}function gb(e){return!!e?.field&&(F(e.oneOf)||F(e.in))}function ZVe(e){return!!e?.field&&e.valid!==void 0}function DI(e){return gb(e)||ub(e)||mb(e)||fb(e)||pb(e)||db(e)||hb(e)}function Ja(e,t){return a0(e,{timeUnit:t,wrapTime:!0})}function JVe(e,t){return e.map(n=>Ja(n,t))}function vb(e,t=!0){let{field:n}=e,r=nn(e.timeUnit),{unit:i,binned:o}=r||{},a=K(e,{expr:"datum"}),s=i?`time(${o?a:ere(i,n)})`:a;if(ub(e))return`${s}===${Ja(e.equal,i)}`;if(fb(e)){let c=e.lt;return`${s}<${Ja(c,i)}`}else if(pb(e)){let c=e.gt;return`${s}>${Ja(c,i)}`}else if(db(e)){let c=e.lte;return`${s}<=${Ja(c,i)}`}else if(hb(e)){let c=e.gte;return`${s}>=${Ja(c,i)}`}else{if(gb(e))return`indexof([${JVe(e.oneOf,i).join(",")}], ${s}) !== -1`;if(ZVe(e))return Yp(s,e.valid);if(mb(e)){let{range:c}=e,l=se(c)?{signal:`${c.signal}[0]`}:c[0],u=se(c)?{signal:`${c.signal}[1]`}:c[1];if(l!==null&&u!==null&&t)return"inrange("+s+", ["+Ja(l,i)+", "+Ja(u,i)+"])";let f=[];return l!==null&&f.push(`${s} >= ${Ja(l,i)}`),u!==null&&f.push(`${s} <= ${Ja(u,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${mt(e)}`)}function Yp(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function ire(e){return DI(e)&&e.timeUnit?k(x({},e),{timeUnit:nn(e.timeUnit)}):e}var xf={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function ore(e){return e==="quantitative"||e==="temporal"}function yb(e){return e==="ordinal"||e==="nominal"}var Yo=xf.quantitative,Xp=xf.ordinal,es=xf.temporal,Qp=xf.nominal,Y2=xf.geojson,mft=O(xf);function are(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Yo:return"quantitative";case"t":case es:return"temporal";case"o":case Xp:return"ordinal";case"n":case Qp:return"nominal";case Y2:return"geojson"}}var _r={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},Kp={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},Mft=O(Kp);function cre(e,t){let n=Kp[e],r=Kp[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}var eNe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function zI(e){return eNe[e]}var lre=new Set(["linear","log","pow","sqrt","symlog"]),ure=new Set([...lre,"time","utc"]);function HI(e){return lre.has(e)}var fre=new Set(["quantile","quantize","threshold"]),tNe=new Set([...ure,...fre,"sequential","identity"]),nNe=new Set(["ordinal","bin-ordinal","point","band"]);function Ft(e){return nNe.has(e)}function Tn(e){return tNe.has(e)}function P1(e){return ure.has(e)}function xc(e){return fre.has(e)}var dre={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function pre(e){return!Q(e)&&!!e.name}function LI(e){return e?.param}function hre(e){return e?.unionWith}function mre(e){return ne(e)&&"field"in e}var gre={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},wft=O(gre),sre=gre,{type:Sft,domain:Eft,range:Dft,rangeMax:zft,rangeMin:Hft,scheme:Lft}=sre,rNe=ie(sre,["type","domain","range","rangeMax","rangeMin","scheme"]),vre=O(rNe);function Zp(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return P1(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return P1(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return P1(e);case"nice":return P1(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Tn(e)&&!Ae(["log","time","utc","threshold","quantile"],e)}}function xb(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return vc(e)?void 0:P.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function yre(e,t){return Ae([Xp,Qp],t)?e===void 0||Ft(e):t===es?Ae([_r.TIME,_r.UTC,void 0],e):t===Yo?HI(e)||xc(e)||e===void 0:!0}function xre(e,t,n=!1){if(!Vr(e))return!1;switch(e){case Mt:case en:case jo:case Za:case Jr:case Hi:return P1(t)||t==="band"?!0:t==="point"?!n:!1;case O1:case uo:case c1:case co:case lo:case B2:return P1(t)||xc(t)||Ae(["band","point","ordinal"],t);case kn:case Ai:case Vi:return t!=="band";case fo:case xn:return t==="ordinal"||xc(t)}}var u1={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},AI=u1.arc,s0=u1.area,c0=u1.bar,Cre=u1.image,l0=u1.line,Cf=u1.point,bre=u1.rect,bf=u1.rule,Cb=u1.text,Jp=u1.tick,Mre=u1.trail,eh=u1.circle,th=u1.square,bb=u1.geoshape;function _i(e){return["line","area","trail"].includes(e)}function Cc(e){return["rect","bar","image","arc"].includes(e)}var wre=new Set(O(u1));function ri(e){return e.type}var iNe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],oNe=["fill","fillOpacity"],Sre=[...iNe,...oNe],aNe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},VI=O(aNe),Ere={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},Dre={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},sNe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Mb=O(sNe);function ts(e){return e&&e.band!=null}var zre={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Hre=5,Lre={binSpacing:1,continuousBandSize:Hre,minBandSize:.25,timeUnitBandPosition:.5},Are={binSpacing:0,continuousBandSize:Hre,minBandSize:.25,timeUnitBandPosition:.5},Vre={thickness:1};function Nre(e){return ri(e)?e.type:e}function wf(e){let{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,a=rh(e);return Y(n)&&!tb(n.aggregate)&&i&&P1(i.get("type"))?lNe({fieldDef:n,channel:t,markDef:r,ref:a,config:o}):a}function lNe({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return _i(n.type)?r:Ge("invalid",n,i)===null?[uNe(e,t),r]:r}function uNe(e,t){let n=nh(e,!0),i=po(t)==="y"?{field:{group:"height"}}:{value:0};return x({test:n},i)}function nh(e,t=!0){return Yp(Q(e)?e:K(e,{expr:"datum"}),!t)}function _re(e){let{datum:t}=e;return Wo(t)?q2(t):`${mt(t)}`}function ns(e,t,n,r){let i={};if(t&&(i.scale=t),ki(e)){let{datum:o}=e;Wo(o)?i.signal=q2(o):se(o)?i.signal=o.signal:i4(o)?i.signal=o.expr:i.value=o}else i.field=K(e,n);if(r){let{offset:o,band:a}=r;o&&(i.offset=o),a&&(i.band=a)}return i}function Mf({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:a=.5}){let s=!se(a)&&0<a&&a<1?"datum":void 0,c=K(t,{expr:s,suffix:i}),l=n!==void 0?K(n,{expr:s}):K(t,{suffix:o,expr:s}),u={};if(a===0||a===1){u.scale=e;let f=a===0?c:l;u.field=f}else{let f=se(a)?`(1-${a.signal}) * ${c} + ${a.signal} * ${l}`:`${1-a} * ${c} + ${a} * ${l}`;u.signal=`scale("${e}", ${f})`}return r&&(u.offset=r),u}function kre({scaleName:e,fieldDef:t}){let n=K(t,{expr:"datum"}),r=K(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function rh({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:c,defaultRef:l,bandPosition:u}){if(t){if(_e(t)){let f=a?.get("type");if(bn(t)){u??(u=$1({fieldDef:t,fieldDef2:n,markDef:r,config:i}));let{bin:d,timeUnit:p,type:h}=t;if(rt(d)||u&&p&&h===es)return s?.impute?ns(t,o,{binSuffix:"mid"},{offset:c}):u&&!Ft(f)?Mf({scaleName:o,fieldOrDatumDef:t,bandPosition:u,offset:c}):ns(t,o,rs(t,e)?{binSuffix:"range"}:{},{offset:c});if(tn(d)){if(Y(n))return Mf({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:u,offset:c});{let m=e===Mt?R1:so;U(P.channelRequiredForBinned(m))}}}return ns(t,o,Ft(f)?{binSuffix:"range"}:{},{offset:c,band:f==="band"?u??t.bandPosition??.5:void 0})}else if(Jn(t)){let f=t.value,d=c?{offset:c}:{};return x(x({},u0(e,f)),d)}}return Ie(l)&&(l=l()),l&&x(x({},l),c?{offset:c}:{})}function u0(e,t){return Ae(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ae(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:it(t)}function is(e){return e&&e!=="number"&&e!=="time"}function Ire(e,t,n){return`${e}(${t}${n?`, ${mt(n)}`:""})`}var fNe=" \u2013 ";function Sf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){if(is(n))return go({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});let a=Fre(e,r,i),s=bc(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(s==="quantitative"){if(i&&o.normalizedNumberFormatType)return go({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return go({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(s==="temporal"&&o.timeFormatType&&Y(e)&&e.timeUnit===void 0)return go({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(wc(e)){let c=pNe({field:a,timeUnit:Y(e)?nn(e.timeUnit)?.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:Xo(e)&&e.scale?.type===_r.UTC});return c?{signal:c}:void 0}if(t=NI({type:s,specifiedFormat:t,config:o,normalizeStack:i}),Y(e)&&rt(e.bin)){let c=K(e,{expr:r,binSuffix:"end"});return{signal:f0(a,c,t,n,o)}}else return t||bc(e)==="quantitative"?{signal:`${Rre(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function Fre(e,t,n){return Y(e)?n?`${K(e,{expr:t,suffix:"end"})}-${K(e,{expr:t,suffix:"start"})}`:K(e,{expr:t}):_re(e)}function go({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a??(a=Fre(e,r,i)),a!=="datum.value"&&Y(e)&&rt(e.bin)){let s=K(e,{expr:r,binSuffix:"end"});return{signal:f0(a,s,t,n,o)}}return{signal:Ire(n,a,t)}}function Sb(e,t,n,r,i,o){if(!(Q(r)&&is(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&bc(e)==="quantitative"&&(i.normalizedNumberFormatType&&Mc(e)&&e.stack==="normalize"||i.numberFormatType))){if(Mc(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return NI({type:"quantitative",config:i,normalizeStack:!0});if(wc(e)){let a=Y(e)?nn(e.timeUnit)?.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:dNe({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return NI({type:t,specifiedFormat:n,config:i})}}function Eb(e,t,n){if(e&&(se(e)||e==="number"||e==="time"))return e;if(wc(t)&&n!=="time"&&n!=="utc")return Y(t)&&nn(t?.timeUnit)?.utc?"utc":"time"}function NI({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Q(t))return t;if(e===Yo)return r?n.normalizedNumberFormat:n.numberFormat}function dNe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:SI(t)}:r?void 0:n.timeFormat)}function Rre(e,t){return`format(${e}, "${t||""}")`}function Tre(e,t,n,r){return is(n)?Ire(n,e,t):Rre(e,(Q(t)?t:void 0)??r.numberFormat)}function f0(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return f0(e,t,i.numberFormat,i.numberFormatType,i);let o=Tre(e,n,r,i),a=Tre(t,n,r,i);return`${Yp(e,!1)} ? "null" : ${o} + "${fNe}" + ${a}`}function pNe({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Q(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):tre(t,e,o)}var o4="min",hNe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function _I(e){return e in hNe}function Db(e){return!!e?.encoding}function kr(e){return e&&(e.op==="count"||!!e.field)}function zb(e){return e&&F(e)}function os(e){return"row"in e||"column"in e}function Hb(e){return!!e&&"header"in e}function Sc(e){return"facet"in e}function Ore(e){return e.param}function Pre(e){return e&&!Q(e)&&"repeat"in e}function kI(e){let{field:t,timeUnit:n,bin:r,aggregate:i}=e;return k(x(x(x({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:t})}function Ab(e){return"sort"in e}function $1({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(_e(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Y(e)){let{timeUnit:i,bin:o}=e;if(i&&!t)return mo("timeUnitBandPosition",n,r);if(rt(o))return .5}}function TI({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){let s=Cn(e),c=Ge(a?"size":s,r,i,{vgChannel:s});if(c!==void 0)return c;if(Y(t)){let{timeUnit:l,bin:u}=t;if(l&&!n)return{band:mo("timeUnitBandSize",r,i)};if(rt(u)&&!Ft(o))return{band:1}}if(Cc(r.type))return o?Ft(o)?i[r.type]?.discreteBandSize||{band:1}:i[r.type]?.continuousBandSize:i[r.type]?.discreteBandSize}function Vb(e,t,n,r){return rt(e.bin)||e.timeUnit&&bn(e)&&e.type==="temporal"?$1({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Nb(e){return e&&!!e.sort&&!e.field}function a4(e){return e&&"condition"in e}function Df(e){let t=e?.condition;return!!t&&!F(t)&&Y(t)}function s4(e){let t=e?.condition;return!!t&&!F(t)&&_e(t)}function $re(e){let t=e?.condition;return!!t&&(F(t)||Jn(t))}function Y(e){return e&&(!!e.field||e.aggregate==="count")}function bc(e){return e?.type}function ki(e){return e&&"datum"in e}function X2(e){return bn(e)&&!ih(e)||oh(e)}function II(e){return bn(e)&&e.type==="quantitative"&&!e.bin||oh(e)}function oh(e){return ki(e)&&Be(e.datum)}function _e(e){return Y(e)||ki(e)}function bn(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Jn(e){return e&&"value"in e&&"value"in e}function Xo(e){return e&&("scale"in e||"sort"in e)}function Mc(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function Bre(e){return e&&"legend"in e}function Ure(e){return e&&("format"in e||"formatType"in e)}function jre(e){return _n(e,["legend","axis","header","scale"])}function mNe(e){return"op"in e}function K(e,t={}){let n=e.field,r=t.prefix,i=t.suffix,o="";if(vNe(e))n=aI("count");else{let a;if(!t.nofn)if(mNe(e))a=e.op;else{let{bin:s,aggregate:c,timeUnit:l}=e;rt(s)?(a=nb(s),i=(t.binSuffix??"")+(t.suffix??"")):c?qo(c)?(o=`["${n}"]`,n=`argmax_${c.argmax}`):ho(c)?(o=`["${n}"]`,n=`argmin_${c.argmin}`):a=String(c):l&&!W2(l)&&(a=nre(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}a&&(n=n?`${a}_${n}`:a)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?Gp(n):t.expr?iI(n,t.expr)+o:Kn(n)+o}function ih(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Y(e)&&!!e.bin;case"temporal":return!1}throw new Error(P.invalidFieldType(e.type))}function gNe(e){return Xo(e)&&xc(e.scale?.type)}function vNe(e){return e.aggregate==="count"}function yNe(e,t){let{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(rt(r))return`${n} (binned)`;if(i&&!W2(i)){let a=nn(i)?.unit;if(a)return`${n} (${yf(a).join("-")})`}else if(o)return qo(o)?`${n} for max ${o.argmax}`:ho(o)?`${n} for min ${o.argmin}`:`${J3(o)} of ${n}`;return n}function xNe(e){let{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(qo(t))return`${i} for argmax(${t.argmax})`;if(ho(t))return`${i} for argmin(${t.argmin})`;let o=r&&!W2(r)?nn(r):void 0,a=t||o?.unit||o?.maxbins&&"timeunit"||rt(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}var Gre=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return xNe(e);default:return yNe(e,t)}},qre=Gre;function FI(e){qre=e}function Wre(){FI(Gre)}function as(e,t,{allowDisabling:n,includeDefault:r=!0}){let i=_b(e)?.title;if(!Y(e))return i??e.title;let o=e,a=r?ah(o,t):void 0;return n?ct(i,o.title,a):i??o.title??a}function _b(e){if(Mc(e)&&e.axis)return e.axis;if(Bre(e)&&e.legend)return e.legend;if(Hb(e)&&e.header)return e.header}function ah(e,t){return qre(e,t)}function zf(e){if(Ure(e)){let{format:t,formatType:n}=e;return{format:t,formatType:n}}else{let t=_b(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function CNe(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Ab(e)&&F(e.sort))return"ordinal";let{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!qo(n)&&!ho(n))return"quantitative";if(Xo(e)&&e.scale?.type)switch(Kp[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function ii(e){if(Y(e))return e;if(Df(e))return e.condition}function _t(e){if(_e(e))return e;if(s4(e))return e.condition}function RI(e,t,n,r={}){if(Q(e)||Be(e)||S1(e)){let i=Q(e)?"string":Be(e)?"number":"boolean";return U(P.primitiveChannelDef(t,i,e)),{value:e}}return _e(e)?Lb(e,t,n,r):s4(e)?k(x({},e),{condition:Lb(e.condition,t,n,r)}):e}function Lb(e,t,n,r){if(Ure(e)){let i=e,{format:a,formatType:s}=i,c=ie(i,["format","formatType"]);if(is(s)&&!n.customFormatTypes)return U(P.customFormatTypeNotAllowed(t)),Lb(c,t,n,r)}else{let a=Mc(e)?"axis":Bre(e)?"legend":Hb(e)?"header":null;if(a&&e[a]){let o=e[a],{format:s,formatType:c}=o,l=ie(o,["format","formatType"]);if(is(c)&&!n.customFormatTypes)return U(P.customFormatTypeNotAllowed(t)),Lb(k(x({},e),{[a]:l}),t,n,r)}}return Y(e)?sh(e,t,r):bNe(e)}function bNe(e){let t=e.type;if(t)return e;let{datum:n}=e;return t=Be(n)?"quantitative":Q(n)?"nominal":Wo(n)?"temporal":void 0,k(x({},e),{type:t})}function sh(e,t,{compositeMark:n=!1}={}){let{aggregate:r,timeUnit:i,bin:o,field:a}=e,s=x({},e);if(!n&&r&&!hf(r)&&!qo(r)&&!ho(r)&&(U(P.invalidAggregate(r)),delete s.aggregate),i&&(s.timeUnit=nn(i)),a&&(s.field=`${a}`),rt(o)&&(s.bin=gf(o,t)),tn(o)&&!wt(t)&&U(P.channelShouldNotBeUsedForBinned(t)),bn(s)){let{type:l}=s,u=are(l);l!==u&&(s.type=u),l!=="quantitative"&&tb(r)&&(U(P.invalidFieldTypeForCountAggregate(l,r)),s.type="quantitative")}else if(!ZC(t)){let l=CNe(s,t);s.type=l}if(bn(s)){let{compatible:l,warning:u}=MNe(s,t)||{};l===!1&&U(u)}if(Ab(s)&&Q(s.sort)){let{sort:l}=s;if(_I(l))return k(x({},s),{sort:{encoding:l}});let u=l.substr(1);if(l.charAt(0)==="-"&&_I(u))return k(x({},s),{sort:{encoding:u,order:"descending"}})}if(Hb(s)){let{header:l}=s;if(l){let c=l,{orient:u}=c,f=ie(c,["orient"]);if(u)return k(x({},s),{header:k(x({},f),{labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u})})}}return s}function gf(e,t){return S1(e)?{maxbins:mI(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?k(x({},e),{maxbins:mI(t)}):e}var Ef={compatible:!0};function MNe(e,t){let n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case I1:case F1:case cf:return ih(e)?Ef:{compatible:!1,warning:P.channelShouldBeDiscrete(t)};case Mt:case en:case jo:case Za:case kn:case Ai:case Vi:case i0:case o0:case lf:case gc:case uf:case ff:case B2:case Jr:case Hi:case df:return Ef;case ti:case ni:case ei:case Li:return n!==Yo?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Ef;case c1:case co:case lo:case uo:case O1:case $2:case P2:case R1:case so:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Ef;case xn:case fo:return!ih(e)&&!gNe(e)?{compatible:!1,warning:P.channelShouldBeDiscreteOrDiscretizing(t)}:Ef;case t4:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Ef}}function wc(e){let{formatType:t}=zf(e);return t==="time"||!t&&wNe(e)}function wNe(e){return e&&(e.type==="temporal"||Y(e)&&!!e.timeUnit)}function a0(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){let o=t&&nn(t)?.unit,a=o||n==="temporal",s;return i4(e)?s=e.expr:se(e)?s=e.signal:Wo(e)?(a=!0,s=q2(e)):(Q(e)||Be(e))&&a&&(s=`datetime(${mt(e)})`,Kne(o)&&(Be(e)&&e<1e4||Q(e)&&isNaN(Date.parse(e)))&&(s=q2({[o]:e}))),s?r&&a?`time(${s})`:s:i?void 0:mt(e)}function kb(e,t){let{type:n}=e;return t.map(r=>{let i=Y(e)&&!W2(e.timeUnit)?e.timeUnit:void 0,o=a0(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function rs(e,t){return rt(e.bin)?Vr(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}var OI={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Ec(e){return e?.condition}var Tb=["domain","grid","labels","ticks","title"],Yre={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},PI={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Xre=k(x({},PI),{style:1,labelExpr:1,encoding:1});function $I(e){return!!Xre[e]}var D8t=O(Xre),ENe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},BI=O(ENe);function hr(e){return"mark"in e}var ss=class{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return hr(t)?Nre(t.mark)===this.name:!1}};function cs(e,t){let n=e&&e[t];return n?F(n)?Ka(n,r=>!!r.field):Y(n)||Df(n):!1}function UI(e,t){let n=e&&e[t];return n?F(n)?Ka(n,r=>!!r.field):Y(n)||ki(n)||s4(n):!1}function Ib(e,t){if(wt(t)){let n=e[t];if((Y(n)||ki(n))&&(yb(n.type)||Y(n)&&n.timeUnit)){let r=pf(t);return UI(e,r)}}return!1}function Hf(e){return Ka(mne,t=>{if(cs(e,t)){let n=e[t];if(F(n))return Ka(n,r=>!!r.aggregate);{let r=ii(n);return r&&!!r.aggregate}}return!1})}function Fb(e,t){let n=[],r=[],i=[],o=[],a={};return ch(e,(s,c)=>{if(Y(s)){let l=s,{field:u,aggregate:f,bin:d,timeUnit:p}=l,h=ie(l,["field","aggregate","bin","timeUnit"]);if(f||p||d){let g=_b(s)?.title,v=K(s,{forAs:!0}),y=k(x(x({},g?[]:{title:as(s,t,{allowDisabling:!0})}),h),{field:v});if(f){let C;if(qo(f)?(C="argmax",v=K({op:"argmax",field:f.argmax},{forAs:!0}),y.field=`${v}.${u}`):ho(f)?(C="argmin",v=K({op:"argmin",field:f.argmin},{forAs:!0}),y.field=`${v}.${u}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(C=f),C){let b={op:C,as:v};u&&(b.field=u),o.push(b)}}else if(n.push(v),bn(s)&&rt(d)){if(r.push({bin:d,field:u,as:v}),n.push(K(s,{binSuffix:"end"})),rs(s,c)&&n.push(K(s,{binSuffix:"range"})),wt(c)){let C={field:`${v}_end`};a[`${c}2`]=C}y.bin="binned",ZC(c)||(y.type=Yo)}else if(p&&!W2(p)){i.push({timeUnit:p,field:u,as:v});let C=bn(s)&&s.type!==es&&"time";C&&(c===i0||c===gc?y.formatType=C:Dne(c)?y.legend=x({formatType:C},y.legend):wt(c)&&(y.axis=x({formatType:C},y.axis)))}a[c]=y}else n.push(u),a[c]=e[c]}else a[c]=e[c]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function DNe(e,t,n){let r=Lne(t,n);if(r){if(r==="binned"){let i=e[t===R1?Mt:en];return!!(Y(i)&&Y(e[t])&&tn(i.bin))}}else return!1;return!0}function Qre(e,t,n,r){let i={};for(let o of O(e))KC(o)||U(P.invalidEncodingChannel(o));for(let o of bne){if(!e[o])continue;let a=e[o];if(yc(o)){let s=Cne(o),c=i[s];if(Y(c)&&ore(c.type)&&Y(a)&&!c.timeUnit){U(P.offsetNestedInsideContinuousPositionScaleDropped(s));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(U(P.REPLACE_ANGLE_WITH_THETA),o=Jr),!DNe(e,o,t)){U(P.incompatibleChannel(o,t));continue}if(o===O1&&t==="line"&&ii(e[o])?.aggregate){U(P.LINE_WITH_VARYING_SIZE);continue}if(o===kn&&(n?"fill"in e:"stroke"in e)){U(P.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===o0||o===t4&&!F(a)&&!Jn(a)||o===gc&&F(a)){if(a){if(o===t4){let s=e[o];if(Nb(s)){i[o]=s;continue}}i[o]=te(a).reduce((s,c)=>(Y(c)?s.push(sh(c,o)):U(P.emptyFieldDef(c,o)),s),[])}}else{if(o===gc&&a===null)i[o]=null;else if(!Y(a)&&!ki(a)&&!Jn(a)&&!a4(a)&&!se(a)){U(P.emptyFieldDef(a,o));continue}i[o]=RI(a,o,r)}}return i}function c4(e,t){let n={};for(let r of O(e)){let i=RI(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Kre(e){let t=[];for(let n of O(e))if(cs(e,n)){let r=e[n],i=te(r);for(let o of i)Y(o)?t.push(o):Df(o)&&t.push(o.condition)}return t}function ch(e,t,n){if(e)for(let r of O(e)){let i=e[r];if(F(i))for(let o of i)t.call(n,o,r);else t.call(n,i,r)}}function Zre(e,t,n,r){return e?O(e).reduce((i,o)=>{let a=e[o];return F(a)?a.reduce((s,c)=>t.call(r,s,c,o),i):t.call(r,i,a,o)},n):n}function Rb(e,t){return O(t).reduce((n,r)=>{switch(r){case Mt:case en:case uf:case df:case ff:case R1:case so:case jo:case Za:case Jr:case $2:case Hi:case P2:case ei:case ti:case Li:case ni:case i0:case xn:case B2:case gc:return n;case t4:if(e==="line"||e==="trail")return n;case o0:case lf:{let i=t[r];if(F(i)||Y(i))for(let o of te(i))o.aggregate||n.push(K(o,{}));return n}case O1:if(e==="trail")return n;case kn:case Ai:case Vi:case c1:case co:case lo:case fo:case uo:{let i=ii(t[r]);return i&&!i.aggregate&&n.push(K(i,{})),n}}},[])}function Jre(e){let o=e,{tooltip:t}=o,n=ie(o,["tooltip"]);if(!t)return{filteredEncoding:n};let r,i;if(F(t)){for(let a of t)a.aggregate?(r||(r=[]),r.push(a)):(i||(i=[]),i.push(a));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return F(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function lh(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};let i=e.map(({fieldPrefix:a,titlePrefix:s})=>{let c=r?` of ${Pb(t)}`:"";return{field:a+t.field,type:t.type,title:se(s)?{signal:`${s}"${escape(c)}"`}:s+c}}),o=Kre(n).map(jre);return{tooltip:[...i,...zi(o,be)]}}function Pb(e){let{title:t,field:n}=e;return ct(t,n)}function Lf(e,t,n,r,i){let{scale:o,axis:a}=n;return({partName:s,mark:c,positionPrefix:l,endPositionPrefix:u=void 0,extraEncoding:f={}})=>{let d=Pb(n);return jI(e,s,i,{mark:c,encoding:x(x(x({[t]:x(x(x({field:`${l}_${n.field}`,type:n.type},d!==void 0?{title:d}:{}),o!==void 0?{scale:o}:{}),a!==void 0?{axis:a}:{})},Q(u)?{[`${t}2`]:{field:`${u}_${n.field}`}}:{}),r),f)})}}function jI(e,t,n,r){let{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||e[t]===void 0&&n[t]?[k(x({},r),{mark:x(k(x(x(x(x(x({},n[t]),i?{clip:i}:{}),o?{color:o}:{}),a?{opacity:a}:{}),ri(r.mark)?r.mark:{type:r.mark}),{style:`${s}-${String(t)}`}),S1(e[t])?{}:e[t])})]:[]}function $b(e,t,n){let{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],c=r[`${i}Error2`];return{continuousAxisChannelDef:Ob(o,n),continuousAxisChannelDef2:Ob(a,n),continuousAxisChannelDefError:Ob(s,n),continuousAxisChannelDefError2:Ob(c,n),continuousAxis:i}}function Ob(e,t){if(e?.aggregate){let n=e,{aggregate:r}=n,i=ie(n,["aggregate"]);return r!==t&&U(P.errorBarContinuousAxisHasCustomizedAggregate(r,t)),i}else return e}function Bb(e,t){let{mark:n,encoding:r}=e,{x:i,y:o}=r;if(ri(n)&&n.orient)return n.orient;if(X2(i)){if(X2(o)){let a=Y(i)&&i.aggregate,s=Y(o)&&o.aggregate;if(!a&&s===t)return"vertical";if(!s&&a===t)return"horizontal";if(a===t&&s===t)throw new Error("Both x and y cannot have aggregate");return wc(o)&&!wc(i)?"horizontal":"vertical"}return"horizontal"}else{if(X2(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}var uh="boxplot",eie=["box","median","outliers","rule","ticks"],tie=new ss(uh,GI);function nie(e){return Be(e)?"tukey":e}function GI(e,{config:t}){e=k(x({},e),{encoding:c4(e.encoding,t)});let si=e,{mark:n,encoding:r,params:i,projection:o}=si,a=ie(si,["mark","encoding","params","projection"]),s=ri(n)?n:{type:n};i&&U(P.selectionNotSupported("boxplot"));let c=s.extent??t.boxplot.extent,l=Ge("size",s,t),u=s.invalid,f=nie(c),{bins:d,timeUnits:p,transform:h,continuousAxisChannelDef:m,continuousAxis:g,groupby:v,aggregate:y,encodingWithoutContinuousAxis:C,ticksOrient:b,boxOrient:M,customTooltipWithoutAggregatedField:S}=HNe(e,c,t),oa=C,{color:w,size:E}=oa,D=ie(oa,["color","size"]),z=Sae=>Lf(s,g,m,Sae,t.boxplot),L=z(D),G=z(C),A=z(x(x({},D),E?{size:E}:{})),_=lh([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,C),V={type:"tick",color:"black",opacity:1,orient:b,invalid:u,aria:!1},I=f==="min-max"?_:lh([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,C),W=[...L({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:I}),...L({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:I}),...L({partName:"ticks",mark:V,positionPrefix:"lower_whisker",extraEncoding:I}),...L({partName:"ticks",mark:V,positionPrefix:"upper_whisker",extraEncoding:I})],X=[...f!=="tukey"?W:[],...G({partName:"box",mark:k(x({type:"bar"},l?{size:l}:{}),{orient:M,invalid:u,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:_}),...A({partName:"median",mark:k(x(x({type:"tick",invalid:u},ne(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),l?{size:l}:{}),{orient:b,aria:!1}),positionPrefix:"mid_box",extraEncoding:_})];if(f==="min-max")return k(x({},a),{transform:(a.transform??[]).concat(h),layer:X});let J=`datum["lower_box_${m.field}"]`,Se=`datum["upper_box_${m.field}"]`,Ee=`(${Se} - ${J})`,Je=`${J} - ${c} * ${Ee}`,Dt=`${Se} + ${c} * ${Ee}`,ut=`datum["${m.field}"]`,Qt={joinaggregate:rie(m.field),groupby:v},ms={transform:[{filter:`(${Je} <= ${ut}) && (${ut} <= ${Dt})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...y],groupby:v}],layer:W},C8=D,{tooltip:A0}=C8,y4=ie(C8,["tooltip"]),{scale:ve,axis:et}=m,ot=Pb(m),oe=_n(et,["title"]),Rr=jI(s,"outliers",t.boxplot,{transform:[{filter:`(${ut} < ${Je}) || (${ut} > ${Dt})`}],mark:"point",encoding:x(x(x({[g]:x(x(x({field:m.field,type:m.type},ot!==void 0?{title:ot}:{}),ve!==void 0?{scale:ve}:{}),Ke(oe)?{}:{axis:oe})},y4),w?{color:w}:{}),S?{tooltip:S}:{})})[0],At,ai=[...d,...p,Qt];return Rr?At={transform:ai,layer:[Rr,ms]}:(At=ms,At.transform.unshift(...ai)),k(x({},a),{layer:[At,{transform:h,layer:X}]})}function rie(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function HNe(e,t,n){let r=Bb(e,uh),{continuousAxisChannelDef:i,continuousAxis:o}=$b(e,r,uh),a=i.field,s=nie(t),c=[...rie(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:(s==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(s==="min-max"?"upper_whisker_":"max_")+a}],l=s==="min-max"||s==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],S=e.encoding,{[o]:u}=S,f=ie(S,[x4(o)]),{customTooltipWithoutAggregatedField:d,filteredEncoding:p}=Jre(f),{bins:h,timeUnits:m,aggregate:g,groupby:v,encoding:y}=Fb(p,n),C=r==="vertical"?"horizontal":"vertical",b=r,M=[...h,...m,{aggregate:[...g,...c],groupby:v},...l];return{bins:h,timeUnits:m,transform:M,groupby:v,aggregate:g,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:y,ticksOrient:C,boxOrient:b,customTooltipWithoutAggregatedField:d}}var Ub="errorbar",oie=["ticks","rule"],aie=new ss(Ub,qI);function qI(e,{config:t}){e=k(x({},e),{encoding:c4(e.encoding,t)});let{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:c,tooltipEncoding:l}=WI(e,Ub,t);delete o.size;let u=Lf(s,i,r,o,t.errorbar),f=s.thickness,d=s.size,p=x(x({type:"tick",orient:a,aria:!1},f!==void 0?{thickness:f}:{}),d!==void 0?{size:d}:{}),h=[...u({partName:"ticks",mark:p,positionPrefix:"lower",extraEncoding:l}),...u({partName:"ticks",mark:p,positionPrefix:"upper",extraEncoding:l}),...u({partName:"rule",mark:x({type:"rule",ariaRoleDescription:"errorbar"},f!==void 0?{size:f}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return x(k(x({},c),{transform:n}),h.length>1?{layer:h}:x({},h[0]))}function LNe(e,t){let{encoding:n}=e;if(ANe(n))return{orient:Bb(e,t),inputType:"raw"};let r=VNe(n),i=NNe(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);let s=n.x2,c=n.y2;if(_e(s)&&_e(c))throw new Error(`${t} cannot have both x2 and y2`);if(_e(s)){if(X2(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(_e(c)){if(X2(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{let s=n.xError,c=n.xError2,l=n.yError,u=n.yError2;if(_e(c)&&!_e(s))throw new Error(`${t} cannot have xError2 without xError`);if(_e(u)&&!_e(l))throw new Error(`${t} cannot have yError2 without yError`);if(_e(s)&&_e(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(_e(s)){if(X2(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(_e(l)){if(X2(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function ANe(e){return(_e(e.x)||_e(e.y))&&!_e(e.x2)&&!_e(e.y2)&&!_e(e.xError)&&!_e(e.xError2)&&!_e(e.yError)&&!_e(e.yError2)}function VNe(e){return _e(e.x2)||_e(e.y2)}function NNe(e){return _e(e.xError)||_e(e.xError2)||_e(e.yError)||_e(e.yError2)}function WI(e,t,n){var X,J,Se;let W=e,{mark:r,encoding:i,params:o,projection:a}=W,s=ie(W,["mark","encoding","params","projection"]),c=ri(r)?r:{type:r};o&&U(P.selectionNotSupported(t));let{orient:l,inputType:u}=LNe(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:h,continuousAxis:m}=$b(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:v,tooltipSummary:y,tooltipTitleWithFieldName:C}=_Ne(c,f,d,p,h,u,t,n),Ee=i,{[m]:b,[X=m==="x"?"x2":"y2"]:M,[J=m==="x"?"xError":"yError"]:S,[Se=m==="x"?"xError2":"yError2"]:w}=Ee,E=ie(Ee,[x4(m),x4(X),x4(J),x4(Se)]),{bins:D,timeUnits:z,aggregate:L,groupby:G,encoding:A}=Fb(E,n),_=[...L,...g],V=u!=="raw"?[]:G,I=lh(y,f,A,C);return{transform:[...s.transform??[],...D,...z,..._.length===0?[]:[{aggregate:_,groupby:V}],...v],groupby:V,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:A,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:s,tooltipEncoding:I}}function _Ne(e,t,n,r,i,o,a,s){let c=[],l=[],u=t.field,f,d=!1;if(o==="raw"){let p=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":s.errorbar.center,h=e.extent?e.extent:p==="mean"?"stderr":"iqr";if(p==="median"!=(h==="iqr")&&U(P.errorBarCenterIsUsedWithWrongExtent(p,h,a)),h==="stderr"||h==="stdev")c=[{op:h,field:u,as:`extent_${u}`},{op:p,field:u,as:`center_${u}`}],l=[{calculate:`datum["center_${u}"] + datum["extent_${u}"]`,as:`upper_${u}`},{calculate:`datum["center_${u}"] - datum["extent_${u}"]`,as:`lower_${u}`}],f=[{fieldPrefix:"center_",titlePrefix:J3(p)},{fieldPrefix:"upper_",titlePrefix:iie(p,h,"+")},{fieldPrefix:"lower_",titlePrefix:iie(p,h,"-")}],d=!0;else{let m,g,v;h==="ci"?(m="mean",g="ci0",v="ci1"):(m="median",g="q1",v="q3"),c=[{op:g,field:u,as:`lower_${u}`},{op:v,field:u,as:`upper_${u}`},{op:m,field:u,as:`center_${u}`}],f=[{fieldPrefix:"upper_",titlePrefix:as({field:u,aggregate:v,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:as({field:u,aggregate:g,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:as({field:u,aggregate:m,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&U(P.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${u}`},{calculate:`datum["${u}"]`,as:`lower_${u}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:u}],l=[{calculate:`datum["${u}"] + datum["${r.field}"]`,as:`upper_${u}`}],i?l.push({calculate:`datum["${u}"] + datum["${i.field}"]`,as:`lower_${u}`}):l.push({calculate:`datum["${u}"] - datum["${r.field}"]`,as:`lower_${u}`}));for(let p of l)f.push({fieldPrefix:p.as.substring(0,6),titlePrefix:O2(O2(p.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:c,tooltipSummary:f,tooltipTitleWithFieldName:d}}function iie(e,t,n){return`${J3(e)} ${n} ${t}`}var jb="errorband",sie=["band","borders"],cie=new ss(jb,YI);function YI(e,{config:t}){e=k(x({},e),{encoding:c4(e.encoding,t)});let{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:c}=WI(e,jb,t),l=a,u=Lf(l,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0,d={type:f?"area":"rect"},p={type:f?"line":"rule"},h=x(x({},l.interpolate?{interpolate:l.interpolate}:{}),l.tension&&l.interpolate?{tension:l.tension}:{});return f?(d=k(x(x({},d),h),{ariaRoleDescription:"errorband"}),p=k(x(x({},p),h),{aria:!1})):l.interpolate?U(P.errorBand1DNotSupport("interpolate")):l.tension&&U(P.errorBand1DNotSupport("tension")),k(x({},s),{transform:n,layer:[...u({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c}),...u({partName:"borders",mark:p,positionPrefix:"lower",extraEncoding:c}),...u({partName:"borders",mark:p,positionPrefix:"upper",extraEncoding:c})]})}var lie={};function XI(e,t,n){let r=new ss(e,t);lie[e]={normalizer:r,parts:n}}function uie(){return O(lie)}XI(uh,GI,eie);XI(Ub,qI,oie);XI(jb,YI,sie);var fie=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"];var QI={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},KI={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},die=O(QI),pie=O(KI),kNe={header:1,headerRow:1,headerColumn:1,headerFacet:1},ZI=O(kNe);var Gb=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],hie={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},JI={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},V5t=O(JI);var oi="_vgsid_",mie={point:{on:"click",fields:[oi],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function fh(e){return e==="legend"||!!e?.legend}function qb(e){return fh(e)&&ne(e)}function Af(e){return!!e?.select}function Wb(e){let t=[];for(let r of e||[]){if(Af(r))continue;let n=r,{expr:i,bind:o}=n,a=ie(n,["expr","bind"]);if(o&&i){let s=k(x({},a),{bind:o,init:i});t.push(s)}else{let s=x(x(x({},a),i?{update:i}:{}),o?{bind:o}:{});t.push(s)}}return t}function eF(e){return l4(e)||Vf(e)||dh(e)}function dh(e){return"concat"in e}function l4(e){return"vconcat"in e}function Vf(e){return"hconcat"in e}function tF({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function B1(e){return ne(e)&&e.step!==void 0}function nF(e){return e.view||e.width||e.height}var rF=20,TNe={align:1,bounds:1,center:1,columns:1,spacing:1},INe=O(TNe);function gie(e,t,n){let r=n[t],i={},{spacing:o,columns:a}=r;o!==void 0&&(i.spacing=o),a!==void 0&&(Sc(e)&&!os(e.facet)||dh(e))&&(i.columns=a),l4(e)&&(i.columns=1);for(let s of INe)if(e[s]!==void 0)if(s==="spacing"){let c=e[s];i[s]=Be(c)?c:{row:c.row??o,column:c.column??o}}else i[s]=e[s];return i}function ph(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function d0(e,t){let n=Nf(e,t);return B1(n)?n.step:xie}function Nf(e,t){let n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ct(n,{step:e.step})}var xie=20,FNe={continuousWidth:200,continuousHeight:200,step:xie};var RNe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:FNe,mark:Dre,arc:{},area:{},bar:Lre,circle:{},geoshape:{},image:{},line:{},point:{},rect:Are,rule:{color:"black"},square:{},text:{color:"black"},tick:Vre,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:dre,projection:{},legend:hie,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:mie,style:{},title:{},facet:{spacing:rF},concat:{spacing:rF},normalizedNumberFormat:".0%"},Dc=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],vie={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},yie={blue:Dc[0],orange:Dc[1],red:Dc[2],teal:Dc[3],green:Dc[4],yellow:Dc[5],purple:Dc[6],pink:Dc[7],brown:Dc[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function ONe(e={}){return{signals:[{name:"color",value:ne(e)?x(x({},yie),e):yie}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function PNe(e){return{signals:[{name:"fontSize",value:ne(e)?x(x({},vie),e):vie}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function $Ne(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function Cie(e){let t=O(e||{}),n={};for(let r of t){let i=e[r];n[r]=Ec(i)?ob(i):Nr(i)}return n}function BNe(e){let t=O(e),n={};for(let r of t)n[r]=Cie(e[r]);return n}var UNe=[...Mb,...BI,...ZI,"background","padding","legend","lineBreak","scale","style","title","view"];function Yb(e={}){let c=e,{color:t,font:n,fontSize:r,selection:i}=c,o=ie(c,["color","font","fontSize","selection"]),a=Ha({},fe(RNe),n?$Ne(n):{},t?ONe(t):{},r?PNe(r):{},o||{});i&&Rs(a,"selection",i,!0);let s=_n(a,UNe);for(let l of["background","lineBreak","padding"])a[l]&&(s[l]=Nr(a[l]));for(let l of Mb)a[l]&&(s[l]=Zn(a[l]));for(let l of BI)a[l]&&(s[l]=Cie(a[l]));for(let l of ZI)a[l]&&(s[l]=Zn(a[l]));return a.legend&&(s.legend=Zn(a.legend)),a.scale&&(s.scale=Zn(a.scale)),a.style&&(s.style=BNe(a.style)),a.title&&(s.title=Zn(a.title)),a.view&&(s.view=Zn(a.view)),s}var jNe=new Set(["view",...wre]),GNe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],qNe=x({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},Ere);function bie(e){e=fe(e);for(let t of GNe)delete e[t];if(e.axis)for(let t in e.axis)Ec(e.axis[t])&&delete e.axis[t];if(e.legend)for(let t of fie)delete e.legend[t];if(e.mark){for(let t of VI)delete e.mark[t];e.mark.tooltip&&ne(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(Wb(e.params)),delete e.params);for(let t of jNe){for(let r of VI)delete e[t][r];let n=qNe[t];if(n)for(let r of n)delete e[t][r];YNe(e,t)}for(let t of uie())delete e[t];WNe(e);for(let t in e)ne(e[t])&&Ke(e[t])&&delete e[t];return Ke(e)?void 0:e}function WNe(e){let{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=rb(e.title);Ke(t)||(e.style["group-title"]=x(x({},e.style["group-title"]),t)),Ke(n)||(e.style["group-subtitle"]=x(x({},e.style["group-subtitle"]),n)),Ke(r)?delete e.title:e.title=r}function YNe(e,t,n,r){let i=r?e[t][r]:e[t];t==="view"&&(n="cell");let o=x(x({},i),e.style[n??t]);Ke(o)||(e.style[n??t]=o),r||delete e[t]}function zc(e){return"layer"in e}function iF(e){return"repeat"in e}function Mie(e){return!F(e.repeat)&&e.repeat.layer}var u4=class{map(t,n){return Sc(t)?this.mapFacet(t,n):iF(t)?this.mapRepeat(t,n):Vf(t)?this.mapHConcat(t,n):l4(t)?this.mapVConcat(t,n):dh(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(zc(t))return this.mapLayer(t,n);if(hr(t))return this.mapUnit(t,n);throw new Error(P.invalidSpec(t))}mapLayer(t,n){return k(x({},t),{layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))})}mapHConcat(t,n){return k(x({},t),{hconcat:t.hconcat.map(r=>this.map(r,n))})}mapVConcat(t,n){return k(x({},t),{vconcat:t.vconcat.map(r=>this.map(r,n))})}mapConcat(t,n){let o=t,{concat:r}=o,i=ie(o,["concat"]);return k(x({},i),{concat:r.map(a=>this.map(a,n))})}mapFacet(t,n){return k(x({},t),{spec:this.map(t.spec,n)})}mapRepeat(t,n){return k(x({},t),{spec:this.map(t.spec,n)})}};var XNe={zero:1,center:1,normalize:1};function QNe(e){return e in XNe}var KNe=new Set([AI,c0,s0,bf,Cf,eh,th,l0,Cb,Jp]),ZNe=new Set([c0,s0,AI]);function _f(e){return Y(e)&&bc(e)==="quantitative"&&!e.bin}function wie(e,t,{orient:n,type:r}){let i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),a=e[t],s=e[i];if(Y(a)&&Y(s))if(_f(a)&&_f(s)){if(a.stack)return t;if(s.stack)return i;let c=Y(a)&&!!a.aggregate,l=Y(s)&&!!s.aggregate;if(c!==l)return c?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(_f(a))return t;if(_f(s))return i}else{if(_f(a))return o&&n==="vertical"?void 0:t;if(_f(s))return o&&n==="horizontal"?void 0:i}}function JNe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function Xb(e,t){let n=ri(e)?e:{type:e},r=n.type;if(!KNe.has(r))return null;let i=wie(t,"x",n)||wie(t,"theta",n);if(!i)return null;let o=t[i],a=Y(o)?K(o,{}):void 0,s=JNe(i),c=[],l=new Set;if(t[s]){let m=t[s],g=Y(m)?K(m,{}):void 0;g&&g!==a&&(c.push(s),l.add(g))}let u=s==="x"?"xOffset":"yOffset",f=t[u],d=Y(f)?K(f,{}):void 0;d&&d!==a&&(c.push(u),l.add(d));let p=Mne.reduce((m,g)=>{if(g!=="tooltip"&&cs(t,g)){let v=t[g];for(let y of te(v)){let C=ii(y);if(C.aggregate)continue;let b=K(C,{});(!b||!l.has(b))&&m.push({channel:g,fieldDef:C})}}return m},[]),h;return o.stack!==void 0?S1(o.stack)?h=o.stack?"zero":null:h=o.stack:ZNe.has(r)&&(h="zero"),!h||!QNe(h)||Hf(t)&&p.length===0?null:o?.scale?.type&&o?.scale?.type!==_r.LINEAR?(o?.stack&&U(P.cannotStackNonLinearScale(o.scale.type)),null):_e(t[Ar(i)])?(o.stack!==void 0&&U(P.cannotStackRangedMark(i)),null):(Y(o)&&o.aggregate&&!_ne.has(o.aggregate)&&U(P.stackNonSummativeAggregate(o.aggregate)),{groupbyChannels:c,groupbyFields:l,fieldChannel:i,impute:o.impute===null?!1:_i(r),stackBy:p,offset:h})}function Qb(e,t,n){let r=Zn(e),i=Ge("orient",r,n);if(r.orient=n_e(r.type,t,i),i!==void 0&&i!==r.orient&&U(P.orientOverridden(r.orient,i)),r.type==="bar"&&r.orient){let s=Ge("cornerRadiusEnd",r,n);if(s!==void 0){let c=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:zre[r.orient];for(let l of c)r[l]=s;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}return Ge("opacity",r,n)===void 0&&(r.opacity=t_e(r.type,t)),Ge("cursor",r,n)===void 0&&(r.cursor=e_e(r,t,n)),r}function e_e(e,t,n){return t.href||e.href||Ge("href",e,n)?"pointer":e.cursor}function t_e(e,t){if(Ae([Cf,Jp,eh,th],e)&&!Hf(t))return .7}function Sie(e,t,{graticule:n}){if(n)return!1;let r=mo("filled",e,t),i=e.type;return ct(r,i!==Cf&&i!==l0&&i!==bf)}function n_e(e,t,n){switch(e){case Cf:case eh:case th:case Cb:case bre:case Cre:return}let{x:r,y:i,x2:o,y2:a}=t;switch(e){case c0:if(Y(r)&&(tn(r.bin)||Y(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Y(i)&&(tn(i.bin)||Y(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o)return(Y(r)&&r.type===Yo&&!rt(r.bin)||oh(r))&&Y(i)&&tn(i.bin)?"horizontal":"vertical";if(!a)return(Y(i)&&i.type===Yo&&!rt(i.bin)||oh(i))&&Y(r)&&tn(r.bin)?"vertical":"horizontal"}case bf:if(o&&!(Y(r)&&tn(r.bin))&&a&&!(Y(i)&&tn(i.bin)))return;case s0:if(a)return Y(i)&&tn(i.bin)?"horizontal":"vertical";if(o)return Y(r)&&tn(r.bin)?"vertical":"horizontal";if(e===bf){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case l0:case Jp:{let s=II(r),c=II(i);if(n)return n;if(s&&!c)return e!=="tick"?"horizontal":"vertical";if(!s&&c)return e!=="tick"?"vertical":"horizontal";if(s&&c)return"vertical";{let l=bn(r)&&r.type===es,u=bn(i)&&i.type===es;if(l&&!u)return"vertical";if(!l&&u)return"horizontal"}return}}return"vertical"}function r_e(e){let i=e,{point:t,line:n}=i,r=ie(i,["point","line"]);return O(r).length>1?r:r.type}function i_e(e){for(let t of["line","area","rule","trail"])e[t]&&(e=k(x({},e),{[t]:_n(e[t],["point","line"])}));return e}function oF(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ne(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ne(t.point)?t.point:{}:void 0}function Eie(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}var Kb=class{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(hr(t)){let{mark:r,encoding:i}=t,o=ri(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!oF(o,n[o.type],i);case"area":return!!oF(o,n[o.type],i)||!!Eie(o,n[o.type])}}return!1}run(t,n,r){let{config:i}=n,y=t,{params:o,projection:a,mark:s,name:c,encoding:l}=y,u=ie(y,["params","projection","mark","name","encoding"]),f=c4(l,i),d=ri(s)?s:{type:s},p=oF(d,i[d.type],f),h=d.type==="area"&&Eie(d,i[d.type]),m=[k(x({name:c},o?{params:o}:{}),{mark:r_e(x(x({},d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{}),d)),encoding:_n(f,["shape"])})],g=Xb(Qb(d,f,i),f),v=f;if(g){let{fieldChannel:C,offset:b}=g;v=k(x({},f),{[C]:x(x({},f[C]),b?{stack:b}:{})})}return v=_n(v,["y2","x2"]),h&&m.push(k(x({},a?{projection:a}:{}),{mark:x(x({type:"line"},mc(d,["clip","interpolate","tension","tooltip"])),h),encoding:v})),p&&m.push(k(x({},a?{projection:a}:{}),{mark:x(x({type:"point",opacity:1,filled:!0},mc(d,["clip","tooltip"])),p),encoding:v})),r(k(x({},u),{layer:m}),k(x({},n),{config:i_e(i)}))}};function Hie(e,t){return t?os(e)?Aie(e,t):Lie(e,t):e}function Zb(e,t){return t?Aie(e,t):e}function aF(e,t,n){let r=t[e];if(Pre(r)){if(r.repeat in n)return k(x({},t),{[e]:n[r.repeat]});U(P.noSuchRepeatedValue(r.repeat));return}return t}function Lie(e,t){if(e=aF("field",e,t),e!==void 0){if(e===null)return null;if(Ab(e)&&kr(e.sort)){let n=aF("field",e.sort,t);e=x(x({},e),n?{sort:n}:{})}return e}}function Die(e,t){if(Y(e))return Lie(e,t);{let n=aF("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function zie(e,t){if(_e(e)){let r=Die(e,t);if(r)return r;if(a4(e))return{condition:e.condition}}else{if(s4(e)){let r=Die(e.condition,t);if(r)return k(x({},e),{condition:r});{let n=e,{condition:i}=n;return ie(n,["condition"])}}return e}}function Aie(e,t){let n={};for(let r in e)if(he(e,r)){let i=e[r];if(F(i))n[r]=i.map(o=>zie(o,t)).filter(o=>o);else{let o=zie(i,t);o!==void 0&&(n[r]=o)}}return n}var Jb=class{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(hr(t)){let{encoding:n,mark:r}=t;if(r==="line"||ri(r)&&r.type==="line")for(let i of xne){let o=po(i),a=n[o];if(n[i]&&(Y(a)&&!tn(a.bin)||ki(a)))return!0}}return!1}run(t,n,r){let{encoding:i,mark:o}=t;return U(P.lineWithRange(!!i.x2,!!i.y2)),r(k(x({},t),{mark:ne(o)?k(x({},o),{type:"rule"}):"rule"}),n)}};var eM=class extends u4{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[tie,aie,cie,new Kb,new Jb]}map(t,n){if(hr(t)){let r=cs(t.encoding,I1),i=cs(t.encoding,F1),o=cs(t.encoding,cf);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){let{parentEncoding:r,parentProjection:i}=n,o=Zb(t.encoding,n.repeater),a=x(x(x({},t),t.name?{name:[n.repeaterPrefix,t.name].filter(c=>c).join("_")}:{}),o?{encoding:o}:{});if(r||i)return this.mapUnitWithParentEncodingOrProjection(a,n);let s=this.mapLayerOrUnit.bind(this);for(let c of this.nonFacetUnitNormalizers)if(c.hasMatchingType(a,n.config))return c.run(a,n,s);return a}mapRepeat(t,n){return Mie(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){let f=t,{repeat:r,spec:i}=f,o=ie(f,["repeat","spec"]),{row:a,column:s,layer:c}=r,{repeater:l={},repeaterPrefix:u=""}=n;return a||s?this.mapRepeat(k(x({},t),{repeat:x(x({},a?{row:a}:{}),s?{column:s}:{}),spec:{repeat:{layer:c},spec:i}}),n):k(x({},o),{layer:c.map(d=>{let p=k(x({},l),{layer:d}),h=`${(i.name?`${i.name}_`:"")+u}child__layer_${ht(d)}`,m=this.mapLayerOrUnit(i,k(x({},n),{repeater:p,repeaterPrefix:h}));return m.name=h,m})})}mapNonLayerRepeat(t,n){let h=t,{repeat:r,spec:i,data:o}=h,a=ie(h,["repeat","spec","data"]);!F(r)&&t.columns&&(t=_n(t,["columns"]),U(P.columnsNotSupportByRowCol("repeat")));let s=[],{repeater:c={},repeaterPrefix:l=""}=n,u=!F(r)&&r.row||[c?c.row:null],f=!F(r)&&r.column||[c?c.column:null],d=F(r)&&r||[c?c.repeat:null];for(let m of d)for(let g of u)for(let v of f){let y={repeat:m,row:g,column:v,layer:c.layer},C=(i.name?`${i.name}_`:"")+l+"child__"+(F(r)?`${ht(m)}`:(r.row?`row_${ht(g)}`:"")+(r.column?`column_${ht(v)}`:"")),b=this.map(i,k(x({},n),{repeater:y,repeaterPrefix:C}));b.name=C,s.push(_n(b,["data"]))}let p=F(r)?t.columns:r.column?r.column.length:1;return k(x({data:i.data??o,align:"all"},a),{columns:p,concat:s})}mapFacet(t,n){let{facet:r}=t;return os(r)&&t.columns&&(t=_n(t,["columns"]),U(P.columnsNotSupportByRowCol("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){let{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:a,config:s}=n,c=Nie({parentProjection:a,projection:i}),l=Vie({parentEncoding:o,encoding:Zb(r,n.repeater)});return this.mapUnit(x(x(x({},t),c?{projection:c}:{}),l?{encoding:l}:{}),{config:s})}mapFacetedUnit(t,n){let y=t.encoding,{row:r,column:i,facet:o}=y,a=ie(y,["row","column","facet"]),C=t,{mark:s,width:c,projection:l,height:u,view:f,params:d,encoding:p}=C,h=ie(C,["mark","width","projection","height","view","params","encoding"]),{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),v=Zb(a,n.repeater);return this.mapFacet(k(x(x({},h),g),{facet:m,spec:x(k(x(x(x(x({},c?{width:c}:{}),u?{height:u}:{}),f?{view:f}:{}),l?{projection:l}:{}),{mark:s,encoding:v}),d?{params:d}:{})}),n)}getFacetMappingAndLayout(t,n){let{row:r,column:i,facet:o}=t;if(r||i){o&&U(P.facetChannelDropped([...r?[I1]:[],...i?[F1]:[]]));let c={},l={};for(let u of[I1,F1]){let f=t[u];if(f){let a=f,{align:d,center:p,spacing:h,columns:m}=a,g=ie(a,["align","center","spacing","columns"]);c[u]=g;for(let v of["align","center","spacing"])f[v]!==void 0&&(l[v]??(l[v]={}),l[v][u]=f[v])}}return{facetMapping:c,layout:l}}else{let s=o,{align:c,center:l,spacing:u,columns:f}=s,d=ie(s,["align","center","spacing","columns"]);return{facetMapping:Hie(d,n.repeater),layout:x(x(x(x({},c?{align:c}:{}),l?{center:l}:{}),u?{spacing:u}:{}),f?{columns:f}:{})}}}mapLayer(t,o){var a=o,{parentEncoding:n,parentProjection:r}=a,i=ie(a,["parentEncoding","parentProjection"]);let f=t,{encoding:s,projection:c}=f,l=ie(f,["encoding","projection"]),u=k(x({},i),{parentEncoding:Vie({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Nie({parentProjection:r,projection:c})});return super.mapLayer(x(x({},l),t.name?{name:[u.repeaterPrefix,t.name].filter(d=>d).join("_")}:{}),u)}};function Vie({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){let i=new Set([...O(e),...O(t)]);for(let o of i){let a=t[o],s=e[o];if(_e(a)){let c=x(x({},s),a);r[o]=c}else s4(a)?r[o]=k(x({},a),{condition:x(x({},s),a.condition)}):a||a===null?r[o]=a:(n||Jn(s)||se(s)||_e(s)||F(s))&&(r[o]=s)}}else r=t;return!r||Ke(r)?void 0:r}function Nie(e){let{parentProjection:t,projection:n}=e;return t&&n&&U(P.projectionOverridden({parentProjection:t,projection:n})),n??t}function hh(e){return"filter"in e}function _ie(e){return e?.stop!==void 0}function tM(e){return"lookup"in e}function kie(e){return"data"in e}function Tie(e){return"param"in e}function Iie(e){return"pivot"in e}function Fie(e){return"density"in e}function Rie(e){return"quantile"in e}function Oie(e){return"regression"in e}function Pie(e){return"loess"in e}function $ie(e){return"sample"in e}function Bie(e){return"window"in e}function Uie(e){return"joinaggregate"in e}function jie(e){return"flatten"in e}function Gie(e){return"calculate"in e}function nM(e){return"bin"in e}function qie(e){return"impute"in e}function Wie(e){return"timeUnit"in e}function Yie(e){return"aggregate"in e}function Xie(e){return"stack"in e}function Qie(e){return"fold"in e}function Kie(e){return"extent"in e&&!("density"in e)}function Zie(e){return e.map(t=>hh(t)?{filter:Z3(t.filter,ire)}:t)}var rM=class extends u4{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Jie(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Jie(t,n),t.encoding){let r={};for(let[i,o]of T1(t.encoding))r[i]=e1e(o,n);t=k(x({},t),{encoding:r})}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){let o=t,{selection:r}=o,i=ie(o,["selection"]);return r?k(x({},i),{params:T1(r).map(([a,s])=>{let d=s,{init:c,bind:l,empty:u}=d,f=ie(d,["init","bind","empty"]);f.type==="single"?(f.type="point",f.toggle=!1):f.type==="multi"&&(f.type="point"),n.emptySelections[a]=u!=="none";for(let p of Jt(n.selectionPredicates[a]??{}))p.empty=u!=="none";return{name:a,value:c,select:f,bind:l}})}):t}};function Jie(e,t){let i=e,{transform:n}=i,r=ie(i,["transform"]);if(n){let o=n.map(a=>{if(hh(a))return{filter:sF(a,t)};if(nM(a)&&U2(a.bin))return k(x({},a),{bin:t1e(a.bin)});if(tM(a)){let s=a.from,{selection:c}=s,l=ie(s,["selection"]);return c?k(x({},a),{from:x({param:c},l)}):a}return a});return k(x({},r),{transform:o})}return e}function e1e(e,t){let n=fe(e);if(Y(n)&&U2(n.bin)&&(n.bin=t1e(n.bin)),Xo(n)&&n.scale?.domain?.selection){let r=n.scale.domain,{selection:o}=r,a=ie(r,["selection"]);n.scale.domain=x(x({},a),o?{param:o}:{})}if(a4(n))if(F(n.condition))n.condition=n.condition.map(o=>{let u=o,{selection:a,param:s,test:c}=u,l=ie(u,["selection","param","test"]);return s?o:k(x({},l),{test:sF(o,t)})});else{let i=e1e(n.condition,t),{selection:o,param:a,test:s}=i,c=ie(i,["selection","param","test"]);n.condition=a?n.condition:k(x({},c),{test:sF(n.condition,t)})}return n}function t1e(e){let t=e.extent;if(t?.selection){let n=t,{selection:r}=n,i=ie(n,["selection"]);return k(x({},e),{extent:k(x({},i),{param:r})})}return e}function sF(e,t){let n=r=>Z3(r,i=>{var o;let a=t.emptySelections[i]??!0,s={param:i,empty:a};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(s),s});return e.selection?n(e.selection):Z3(e.test||e.filter,r=>r.selection?n(r.selection):r)}var kf=class extends u4{map(t,n){let r=n.selections??[];if(t.params&&!hr(t)){let i=[];for(let o of t.params)Af(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){let r=n.selections;if(!r||!r.length)return t;let i=(n.path??[]).concat(t.name),o=[];for(let a of r)if(!a.views||!a.views.length)o.push(a);else for(let s of a.views)(Q(s)&&(s===t.name||i.includes(s))||F(s)&&s.map(c=>i.indexOf(c)).every((c,l,u)=>c!==-1&&(l===0||c>u[l-1])))&&o.push(a);return o.length&&(t.params=o),t}};for(let e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){let t=kf.prototype[e];kf.prototype[e]=function(n,r){return t.call(this,n,o_e(n,r))}}function o_e(e,t){return e.name?k(x({},t),{path:(t.path??[]).concat(e.name)}):t}function iM(e,t){t===void 0&&(t=Yb(e.config));let n=l_e(e,t),{width:r,height:i}=e,o=u_e(n,{width:r,height:i,autosize:e.autosize},t);return x(x({},n),o?{autosize:o}:{})}var a_e=new eM,s_e=new rM,c_e=new kf;function l_e(e,t={}){let n={config:t};return c_e.map(a_e.map(s_e.map(e,n),n),n)}function n1e(e){return Q(e)?{type:e}:e??{}}function u_e(e,t,n){let{width:r,height:i}=t,o=hr(e)||zc(e),a={};o?r=="container"&&i=="container"?(a.type="fit",a.contains="padding"):r=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(r=="container"&&(U(P.containerSizeNonSingle("width")),r=void 0),i=="container"&&(U(P.containerSizeNonSingle("height")),i=void 0));let s=x(x(x({type:"pad"},a),n?n1e(n.autosize):{}),n1e(e.autosize));if(s.type==="fit"&&!o&&(U(P.FIT_NON_SINGLE),s.type="pad"),r=="container"&&!(s.type=="fit"||s.type=="fit-x")&&U(P.containerSizeNotCompatibleWithAutosize("width")),i=="container"&&!(s.type=="fit"||s.type=="fit-y")&&U(P.containerSizeNotCompatibleWithAutosize("height")),!Hr(s,{type:"pad"}))return s}function r1e(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function i1e(e){return e?`fit-${n4(e)}`:"fit"}var f_e=["background","padding"];function cF(e,t){let n={};for(let r of f_e)e&&e[r]!==void 0&&(n[r]=Nr(e[r]));return t&&(n.params=e.params),n}var Ti=class e{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new e(fe(this.explicit),fe(this.implicit))}combine(){return x(x({},this.explicit),this.implicit)}get(t){return ct(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(let n of O(t.combine())){let r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}};function Qo(e){return{explicit:!0,value:e}}function Ii(e){return{explicit:!1,value:e}}function oM(e){return(t,n,r,i)=>{let o=e(t.value,n.value);return o>0?t:o<0?n:Tf(t,n,r,i)}}function Tf(e,t,n,r){return e.explicit&&t.explicit&&U(P.mergeConflictingProperty(n,r,e.value,t.value)),e}function U1(e,t,n,r,i=Tf){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Hr(e.value,t.value)?e:i(e,t,n,r)}var aM=class extends Ti{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){let t=super.clone();return t.parseNothing=this.parseNothing,t}};function Hc(e){return"url"in e}function p0(e){return"values"in e}function sM(e){return"name"in e&&!Hc(e)&&!p0(e)&&!Q2(e)}function Q2(e){return e&&(lF(e)||uF(e)||mh(e))}function lF(e){return"sequence"in e}function uF(e){return"sphere"in e}function mh(e){return"graticule"in e}var St=function(e){return e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e}(St||{});function fF(e){let o=e,{signals:t,hasLegend:n,index:r}=o,i=ie(o,["signals","hasLegend","index"]);return i.field=Kn(i.field),i}function Lc(e,t=!0,n=zn){if(F(e)){let r=e.map(i=>Lc(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Wo(e))return n(t?q2(e):Xne(e));return t?n(mt(e)):e}function o1e(e,t){for(let n of Jt(e.component.selection??{})){let r=n.name,i=`${r}${f1}, ${n.resolve==="global"?"true":`{unit: ${Z2(e)}}`}`;for(let o of If)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+f1e,on:[{events:{signal:n.name+f1},update:`modify(${Z(n.name+K2)}, ${i})`}]})}return pF(t)}function a1e(e,t){if(e.component.selection&&O(e.component.selection).length){let n=Z(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Di("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return pF(t)}function s1e(e,t){let n=!1;for(let r of Jt(e.component.selection??{})){let i=r.name,o=Z(i+K2);if(t.filter(s=>s.name===i).length===0){let s=r.resolve==="global"?"union":r.resolve,c=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${cM}(${o}, ${Z(s)}${c}`})}n=!0;for(let s of If)s.defined(r)&&s.topLevelSignals&&(t=s.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),pF(t)}function c1e(e,t){let n=[...t],r=Z2(e,{escape:!1});for(let i of Jt(e.component.selection??{})){let o={name:i.name+K2};if(i.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:oi}}]),i.init){let s=i.project.items.map(fF);o.values=i.project.hasSelectionId?i.init.map(c=>({unit:r,[oi]:Lc(c,!1)[0]})):i.init.map(c=>({unit:r,fields:s,values:Lc(c,!1)}))}n.filter(s=>s.name===i.name+K2).length||n.push(o)}return n}function dF(e,t){for(let n of Jt(e.component.selection??{}))for(let r of If)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function l1e(e,t){for(let n of e.children)Et(n)&&(t=dF(n,t));return t}function u1e(e,t,n,r){let i=lM(e,t.param,t);return{signal:Tn(n.get("type"))&&F(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function pF(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}var Le=class{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){U(P.ADD_SAME_CHILD_TWICE);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){let n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(let n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){let n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){let t=this._parent,n=t.parent;for(let i of this._children)i.parent=t;this._children=[],t.removeChild(this);let r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}},Mn=class extends Le{clone(){let t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${oI()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}};function hF(e){return e.as!==void 0}function d1e(e){return`${e}_end`}var Ko=class e extends Le{clone(){return new e(null,fe(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){let r=n.reduceFieldDef((i,o,a)=>{let{field:s,timeUnit:c}=o;if(c){let l;if(W2(c)){if(Et(n)){let{mark:u,markDef:f,config:d}=n,p=$1({fieldDef:o,markDef:f,config:d});(Cc(u)||p)&&(l={timeUnit:nn(c),field:s})}}else l={as:K(o,{forAs:!0}),field:s,timeUnit:c};if(Et(n)){let{mark:u,markDef:f,config:d}=n,p=$1({fieldDef:o,markDef:f,config:d});Cc(u)&&wt(a)&&p!==.5&&(l.rectBandPosition=p)}l&&(i[be(l)]=l)}return i},{});return Ke(r)?null:new e(t,r)}static makeFromTransform(t,n){let s=x({},n),{timeUnit:r}=s,i=ie(s,["timeUnit"]),o=nn(r),a=k(x({},i),{timeUnit:o});return new e(t,{[be(a)]:a})}merge(t){this.timeUnits=x({},this.timeUnits);for(let n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(let n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){let n={};for(let[r,i]of T1(this.timeUnits)){let o=hF(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Jt(this.timeUnits).map(t=>hF(t)?t.as:d1e(t.field)))}dependentFields(){return new Set(Jt(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${be(this.timeUnits)}`}assemble(){let t=[];for(let r of Jt(this.timeUnits)){let{rectBandPosition:i}=r,o=nn(r.timeUnit);if(hF(r)){let{field:a,as:s}=r,n=o,{unit:c,utc:l}=n,u=ie(n,["unit","utc"]),f=[s,`${s}_end`];t.push(k(x(x(x({field:Kn(a),type:"timeunit"},c?{units:yf(c)}:{}),l?{timezone:"utc"}:{}),u),{as:f})),t.push(...p1e(f,i,o))}else if(r){let{field:a}=r,s=a.replaceAll("\\.","."),c=m1e({timeUnit:o,field:s}),l=d1e(s);t.push({type:"formula",expr:c,as:l}),t.push(...p1e([s,l],i,o))}}return t}},h0="offsetted_rect_start",m0="offsetted_rect_end";function m1e({timeUnit:e,field:t,reverse:n}){let{unit:r,utc:i}=e,o=wI(r),{part:a,step:s}=EI(o,e.step);return`${i?"utcOffset":"timeOffset"}('${a}', datum['${t}'], ${n?-s:s})`}function p1e([e,t],n,r){if(n!==void 0&&n!==.5){let i=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:h1e([m1e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${h0}`},{type:"formula",expr:h1e([i,o],n+.5),as:`${e}_${m0}`}]}return[]}function h1e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}var Ac="_tuple_fields",mF=class{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}},d_e={defined:()=>!0,parse:(e,t,n)=>{let r=t.name,i=t.project??(t.project=new mF),o={},a={},s=new Set,c=(h,m)=>{let g=m==="visual"?h.channel:h.field,v=ht(`${r}_${g}`);for(let y=1;s.has(v);y++)v=ht(`${r}_${g}_${y}`);return s.add(v),{[m]:v}},l=t.type,u=e.config.selection[l],f=n.value!==void 0?te(n.value):null,{fields:d,encodings:p}=ne(n.select)?n.select:{};if(!d&&!p&&f){for(let h of f)if(ne(h))for(let m of O(h))yne(m)?(p||(p=[])).push(m):l==="interval"?(U(P.INTERVAL_INITIALIZED_WITH_POS),p=u.encodings):(d??(d=[])).push(m)}!d&&!p&&(p=u.encodings,"fields"in u&&(d=u.fields));for(let h of p??[]){let m=e.fieldDef(h);if(m){let g=m.field;if(m.aggregate){U(P.cannotProjectAggregate(h,m.aggregate));continue}else if(!g){U(P.cannotProjectOnChannelWithoutField(h));continue}if(m.timeUnit&&!W2(m.timeUnit)){g=e.vgField(h);let v={timeUnit:m.timeUnit,as:g,field:m.field};a[be(v)]=v}if(!o[g]){let v=l==="interval"&&Vr(h)&&Tn(e.getScaleComponent(h).get("type"))?"R":m.bin?"R-RE":"E",y={field:g,channel:h,type:v,index:i.items.length};y.signals=x(x({},c(y,"data")),c(y,"visual")),i.items.push(o[g]=y),i.hasField[g]=o[g],i.hasSelectionId=i.hasSelectionId||g===oi,QC(h)?(y.geoChannel=h,y.channel=XC(h),i.hasChannel[y.channel]=o[g]):i.hasChannel[h]=o[g]}}else U(P.cannotProjectOnChannelWithoutField(h))}for(let h of d??[]){if(i.hasField[h])continue;let m={type:"E",field:h,index:i.items.length};m.signals=x({},c(m,"data")),i.items.push(m),i.hasField[h]=m,i.hasSelectionId=i.hasSelectionId||h===oi}f&&(t.init=f.map(h=>i.items.map(m=>ne(h)?h[m.geoChannel||m.channel]!==void 0?h[m.geoChannel||m.channel]:h[m.field]:h))),Ke(a)||(i.timeUnit=new Ko(null,a))},signals:(e,t,n)=>{let r=t.name+Ac;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(fF)})}},g1e=d_e;var p_e={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{let n=t.scales=[];for(let r of t.project.items){let i=r.channel;if(!Vr(i))continue;let o=e.getScaleComponent(i),a=o?o.get("type"):void 0;if(!o||!Tn(a)){U(P.SCALE_BINDINGS_CONTINUOUS);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{let r=t.scales.filter(a=>n.filter(s=>s.name===a.signals.data).length===0);if(!e.parent||v1e(e)||r.length===0)return n;let i=n.filter(a=>a.name===t.name)[0],o=i.update;if(o.indexOf(cM)>=0)i.update=`{${r.map(a=>`${Z(Kn(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(let a of r){let s=`${Z(Kn(a.field))}: ${a.signals.data}`;o.includes(s)||(o=`${o.substring(0,o.length-1)}, ${s}}`)}i.update=o}return n.concat(r.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!v1e(e))for(let r of t.scales){let i=n.filter(o=>o.name===r.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}},vo=p_e;function gh(e,t){return`domain(${Z(e.scaleName(t))})`}function v1e(e){return e.parent&&Zo(e.parent)&&!e.parent.parent}var Vc="_brush",y1e="_scale_trigger",vh="geo_interval_init_tick",x1e="_init",h_e="_center",m_e={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){let i=x({},ne(n.select)?n.select:{});i.fields=[oi],i.encodings||(i.encodings=n.value?O(n.value):[ti,ei]),n.select=x({type:"interval"},i)}if(t.translate&&!vo.defined(t)){let i=`!event.item || event.item.mark.name !== ${Z(t.name+Vc)}`;for(let o of t.events){if(!o.between){U(`${o} is not an ordered event stream for interval selections.`);continue}let a=te((r=o.between[0]).filter??(r.filter=[]));a.indexOf(i)<0&&a.push(i)}}},signals:(e,t,n)=>{let r=t.name,i=r+f1,o=Jt(t.project.hasChannel).filter(s=>s.channel===Mt||s.channel===en),a=t.init?t.init[0]:null;if(n.push(...o.reduce((s,c)=>s.concat(g_e(e,t,c,a&&a[c.index])),[])),e.hasProjection){let s=Z(e.projectionName()),c=e.projectionName()+h_e,{x:l,y:u}=t.project.hasChannel,f=l&&l.signals.visual,d=u&&u.signals.visual,p=l?a&&a[l.index]:`${c}[0]`,h=u?a&&a[u.index]:`${c}[1]`,m=M=>e.getSizeSignalRef(M).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;a&&(n.unshift({name:r+x1e,init:`[scale(${s}, [${l?p[0]:p}, ${u?h[0]:h}]), scale(${s}, [${l?p[1]:p}, ${u?h[1]:h}])]`}),(!l||!u)&&(n.find(S=>S.name===c)||n.unshift({name:c,update:`invert(${s}, [${m("width")}/2, ${m("height")}/2])`})));let v=`intersect(${g}, {markname: ${Z(e.getName("marks"))}}, unit.mark)`,y=`{unit: ${Z2(e)}}`,C=`vlSelectionTuples(${v}, ${y})`,b=o.map(M=>M.signals.visual);return n.concat({name:i,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...a?[{signal:vh}]:[]],update:C}]})}else{if(!vo.defined(t)){let l=r+y1e,u=o.map(f=>{let d=f.channel,{data:p,visual:h}=f.signals,m=Z(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),v=Tn(g)?"+":"";return`(!isArray(${p}) || (${v}invert(${m}, ${h})[0] === ${v}${p}[0] && ${v}invert(${m}, ${h})[1] === ${v}${p}[1]))`});u.length&&n.push({name:l,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:u.join(" && ")+` ? ${l} : {}`}]})}let s=o.map(l=>l.signals.data),c=`unit: ${Z2(e)}, fields: ${r+Ac}, values`;return n.concat(x(x({name:i},a?{init:`{${c}: ${Lc(a)}}`}:{}),s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${c}: [${s}]} : null`}]}:{}))}},topLevelSignals:(e,t,n)=>(Et(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===vh).length||n.unshift({name:vh,value:null,on:[{events:"timer{1}",update:`${vh} === null ? {} : ${vh}`}]})),n),marks:(e,t,n)=>{let r=t.name,{x:i,y:o}=t.project.hasChannel,a=i?.signals.visual,s=o?.signals.visual,c=`data(${Z(t.name+K2)})`;if(vo.defined(t)||!i&&!o)return n;let l={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:o!==void 0?{signal:`${s}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${s}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(let g of O(l))l[g]=[x({test:`${c}.length && ${c}[0].unit === ${Z2(e)}`},l[g]),{value:0}];let m=t.mark,{fill:u,fillOpacity:f,cursor:d}=m,p=ie(m,["fill","fillOpacity","cursor"]),h=O(p).reduce((g,v)=>(g[v]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,o!==void 0&&`${s}[0] !== ${s}[1]`].filter(y=>y).join(" && "),value:p[v]},{value:null}],g),{});return[{name:`${r+Vc}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:u},fillOpacity:{value:f}},update:l}},...n,{name:r+Vc,type:"rect",clip:!0,encode:{enter:k(x({},d?{cursor:{value:d}}:{}),{fill:{value:"transparent"}}),update:x(x({},l),h)}}]}},C1e=m_e;function g_e(e,t,n,r){let i=!e.hasProjection,o=n.channel,a=n.signals.visual,s=Z(i?e.scaleName(o):e.projectionName()),c=d=>`scale(${s}, ${d})`,l=e.getSizeSignalRef(o===Mt?"width":"height").signal,u=`${o}(unit)`,f=t.events.reduce((d,p)=>[...d,{events:p.between[0],update:`[${u}, ${u}]`},{events:p,update:`[${a}[0], clamp(${u}, 0, ${l})]`}],[]);if(i){let d=n.signals.data,p=vo.defined(t),h=e.getScaleComponent(o),m=h?h.get("type"):void 0,g=r?{init:Lc(r,!0,c)}:{value:[]};return f.push({events:{signal:t.name+y1e},update:Tn(m)?`[${c(`${d}[0]`)}, ${c(`${d}[1]`)}]`:"[0, 0]"}),p?[{name:d,on:[]}]:[k(x({name:a},g),{on:f}),k(x({name:d},r?{init:Lc(r)}:{}),{on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${s}, ${a})`}]})]}else{let d=o===Mt?0:1,p=t.name+x1e,h=r?{init:`[${p}[0][${d}], ${p}[1][${d}]]`}:{value:[]};return[k(x({name:a},h),{on:f})]}}var v_e={defined:e=>e.type==="point",signals:(e,t,n)=>{let r=t.name,i=r+Ac,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=Jt(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Vc):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),c=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${s?` && ${s}`:""}`,l=`unit: ${Z2(e)}, `;if(t.project.hasSelectionId)l+=`${oi}: ${a}[${Z(oi)}]`;else{let f=o.items.map(d=>e.fieldDef(d.channel)?.bin?`[${a}[${Z(e.vgField(d.channel,{}))}], ${a}[${Z(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${a}[${Z(d.field)}]`).join(", ");l+=`fields: ${i}, values: [${f}]`}let u=t.events;return n.concat([{name:r+f1,on:u?[{events:u,update:`${c} ? {${l}} : null`,force:!0}]:[]}])}},b1e=v_e;function j1(e,t,n,r){let i=a4(t)&&t.condition,o=r(t);if(i){let s=te(i).map(c=>{let l=r(c);if(Ore(c)){let{param:u,empty:f}=c,d=uM(e,{param:u,empty:f});return x({test:d},l)}else{let u=g0(e,c.test);return x({test:u},l)}});return{[n]:[...s,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function f4(e,t="text"){let n=e.encoding[t];return j1(e,n,t,r=>Ff(r,e.config))}function Ff(e,t,n="datum"){if(e){if(Jn(e))return it(e.value);if(_e(e)){let{format:r,formatType:i}=zf(e);return Sf({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Rf(e,t={}){let{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if(F(a))return{tooltip:gF({tooltip:a},o,i,t)};{let s=t.reactiveGeom?"datum.datum":"datum";return j1(e,a,"tooltip",c=>{let l=Ff(c,i,s);if(l)return l;if(c===null)return;let u=Ge("tooltip",r,i);if(u===!0&&(u={content:"encoding"}),Q(u))return{value:u};if(ne(u))return se(u)?u:u.content==="encoding"?gF(n,o,i,t):{signal:s}})}}function vF(e,t,n,{reactiveGeom:r}={}){let i=x(x({},n),n.tooltipFormat),o={},a=r?"datum.datum":"datum",s=[];function c(u,f){let d=po(f),p=bn(u)?u:k(x({},u),{type:e[d].type}),h=p.title||ah(p,i),m=te(h).join(", ").replaceAll(/"/g,'\\"'),g;if(wt(f)){let v=f==="x"?"x2":"y2",y=ii(e[v]);if(tn(p.bin)&&y){let C=K(p,{expr:a}),b=K(y,{expr:a}),{format:M,formatType:S}=zf(p);g=f0(C,b,M,S,i),o[v]=!0}}if((wt(f)||f===Jr||f===Hi)&&t&&t.fieldChannel===f&&t.offset==="normalize"){let{format:v,formatType:y}=zf(p);g=Sf({fieldOrDatumDef:p,format:v,formatType:y,expr:a,config:i,normalizeStack:!0}).signal}g??(g=Ff(p,i,a).signal),s.push({channel:f,key:m,value:g})}ch(e,(u,f)=>{Y(u)?c(u,f):Df(u)&&c(u.condition,f)});let l={};for(let{channel:u,key:f,value:d}of s)!o[u]&&!l[f]&&(l[f]=d);return l}function gF(e,t,n,{reactiveGeom:r}={}){let i=vF(e,t,n,{reactiveGeom:r}),o=T1(i).map(([a,s])=>`"${a}": ${s}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function yF(e){let{markDef:t,config:n}=e,r=Ge("aria",t,n);return r===!1?{}:x(x(x({},r?{aria:r}:{}),y_e(e)),x_e(e))}function y_e(e){let{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};let i=Ge("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in Rne?{}:{ariaRoleDescription:{value:t}}}function x_e(e){let{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return j1(e,o,"description",c=>Ff(c,e.config));let a=Ge("description",n,r);if(a!=null)return{description:it(a)};if(r.aria===!1)return{};let s=vF(t,i,r);if(!Ke(s))return{description:{signal:T1(s).map(([c,l],u)=>`"${u>0?"; ":""}${c}: " + (${l})`).join(" + ")}}}function Ut(e,t,n={}){let{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n,{defaultRef:s,defaultValue:c}=n;s===void 0&&(c??(c=Ge(e,r,o,{vgChannel:a,ignoreVgConfig:!0})),c!==void 0&&(s=it(c)));let l=i[e];return j1(t,l,a??e,u=>rh({channel:e,channelDef:u,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s}))}function Of(e,t={filled:void 0}){let{markDef:n,encoding:r,config:i}=e,{type:o}=n,a=t.filled??Ge("filled",n,i),s=Ae(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,c=Ge(a===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[a===!0&&"color"]??s,l=Ge(a===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[a===!1&&"color"],u=a?"fill":"stroke",f=x(x({},c?{fill:it(c)}:{}),l?{stroke:it(l)}:{});return n.color&&(a?n.fill:n.stroke)&&U(P.droppingColor("property",{fill:"fill"in n,stroke:"stroke"in n})),x(x(x(x({},f),Ut("color",e,{vgChannel:u,defaultValue:a?c:l})),Ut("fill",e,{defaultValue:r.fill?c:void 0})),Ut("stroke",e,{defaultValue:r.stroke?l:void 0}))}function M1e(e){let{encoding:t,mark:n}=e,r=t.order;return!_i(n)&&Jn(r)?j1(e,r,"zindex",i=>it(i.value)):{}}function Nc({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){let o=`${e}Offset`,a=t[o],s=n[o];if((o==="xOffset"||o==="yOffset")&&s)return{offsetType:"encoding",offset:rh({channel:o,channelDef:s,markDef:t,config:r?.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:it(a),bandPosition:i})};let c=t[o];return c?{offsetType:"visual",offset:c}:{}}function mn(e,t,{defaultPos:n,vgChannel:r}){let{encoding:i,markDef:o,config:a,stack:s}=t,c=i[e],l=i[Ar(e)],u=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:p}=Nc({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),h=yh({model:t,defaultPos:n,channel:e,scaleName:u,scale:f}),m=!c&&wt(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:C_e({channel:e,channelDef:c,channel2Def:l,markDef:o,config:a,scaleName:u,scale:f,stack:s,offset:d,defaultRef:h,bandPosition:p==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function C_e(e){let{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(_e(n)&&i&&t===i.fieldChannel){if(Y(n)){let s=n.bandPosition;if(s===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(s=.5),s!==void 0)return Mf({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:s,offset:o})}return ns(n,r,{suffix:"end"},{offset:o})}return wf(e)}function yh({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){let{markDef:o,config:a}=e;return()=>{let s=po(n),c=Go(n),l=Ge(n,o,a,{vgChannel:c});if(l!==void 0)return u0(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){let u=i.get("type");if(!Ae([_r.LOG,_r.TIME,_r.UTC],u)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return s==="y"?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{let u=e[Cn(n)];return k(x({},u),{mult:.5})}}}}var b_e={left:"x",center:"xc",right:"x2"},M_e={top:"y",middle:"yc",bottom:"y2"};function fM(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Go(e);let i=e==="x"?"align":"baseline",o=Ge(i,t,n),a;return se(o)?(U(P.rangeMarkAlignmentCannotBeExpression(i)),a=void 0):a=o,e==="x"?b_e[a||(r==="top"?"left":"center")]:M_e[a||r]}function d4(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?xh(e,t,{defaultPos:n,defaultPos2:r}):mn(e,t,{defaultPos:n})}function xh(e,t,{defaultPos:n,defaultPos2:r}){let{markDef:i,config:o}=t,a=Ar(e),s=Cn(e),c=w_e(t,r,a),l=c[s]?fM(e,i,o):Go(e);return x(x({},mn(e,t,{defaultPos:n,vgChannel:l})),c)}function w_e(e,t,n){let{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,c=po(n),l=Cn(n),u=Go(n),f=r[c],d=e.scaleName(c),p=e.getScaleComponent(c),{offset:h}=n in r||n in o?Nc({channel:n,markDef:o,encoding:r,model:e}):Nc({channel:c,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){let g=Cn(n),v=e.markDef[g];return v!=null?{[g]:{value:v}}:{[u]:{field:e.getName(n)}}}let m=S_e({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:s,scaleName:d,scale:p,stack:a,offset:h,defaultRef:void 0});return m!==void 0?{[u]:m}:dM(n,o)||dM(n,{[n]:Wp(n,o,s.style),[l]:Wp(l,o,s.style)})||dM(n,s[i])||dM(n,s.mark)||{[u]:yh({model:e,defaultPos:t,channel:n,scaleName:d,scale:p})()}}function S_e({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:c,defaultRef:l}){return _e(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?ns(t,o,{suffix:"start"},{offset:c}):wf({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:c,defaultRef:l})}function dM(e,t){let n=Cn(e),r=Go(e);if(t[r]!==void 0)return{[r]:u0(e,t[r])};if(t[e]!==void 0)return{[r]:u0(e,t[e])};if(t[n]){let i=t[n];if(ts(i))U(P.relativeBandSizeNotSupported(n));else return{[n]:u0(e,i)}}}function G1(e,t){let{config:n,encoding:r,markDef:i}=e,o=i.type,a=Ar(t),s=Cn(t),c=r[t],l=r[a],u=e.getScaleComponent(t),f=u?u.get("type"):void 0,d=i.orient,p=r[s]??r.size??Ge("size",i,n,{vgChannel:s}),h=fI(t),m=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Y(c)&&(rt(c.bin)||tn(c.bin)||c.timeUnit&&!l)&&!(p&&!ts(p))&&!r[h]&&!Ft(f)?z_e({fieldDef:c,fieldDef2:l,channel:t,model:e}):(_e(c)&&Ft(f)||m)&&!l?D_e(c,t,e):xh(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function E_e(e,t,n,r,i,o,a){if(ts(i))if(n){let c=n.get("type");if(c==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);let u=mo("minBandSize",{type:a},r);return{signal:u?`max(${l1(u)}, ${l})`:l}}else i.band!==1&&(U(P.cannotUseRelativeBandSizeWithNonBandScale(c)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(se(i))return i;if(i)return{value:i}}if(n){let c=n.get("range");if(Ni(c)&&Be(c.step))return{value:c.step-2}}if(!o){let{bandPaddingInner:c,barBandPaddingInner:l,rectBandPaddingInner:u}=r.scale,f=ct(c,a==="bar"?l:u);if(se(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Be(f))return{signal:`${1-f} * ${e}`}}return{value:d0(r.view,e)-2}}function D_e(e,t,n){let{markDef:r,encoding:i,config:o,stack:a}=n,s=r.orient,c=n.scaleName(t),l=n.getScaleComponent(t),u=Cn(t),f=Ar(t),d=fI(t),p=n.scaleName(d),h=n.getScaleComponent(pf(t)),m=s==="horizontal"&&t==="y"||s==="vertical"&&t==="x",g;(i.size||r.size)&&(m?g=Ut("size",n,{vgChannel:u,defaultRef:it(r.size)}):U(P.cannotApplySizeToNonOrientedMark(r.type)));let v=!!g,y=TI({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(l||h)?.get("type"),useVlSizeChannel:m});g=g||{[u]:E_e(u,p||c,h||l,o,y,!!e,r.type)};let C=(l||h)?.get("type")==="band"&&ts(y)&&!v?"top":"middle",b=fM(t,r,o,C),M=b==="xc"||b==="yc",{offset:S,offsetType:w}=Nc({channel:t,markDef:r,encoding:i,model:n,bandPosition:M?.5:0}),E=wf({channel:t,channelDef:e,markDef:r,config:o,scaleName:c,scale:l,stack:a,offset:S,defaultRef:yh({model:n,defaultPos:"mid",channel:t,scaleName:c,scale:l}),bandPosition:M?w==="encoding"?0:.5:se(y)?{signal:`(1-${y})/2`}:ts(y)?(1-y.band)/2:0});if(u)return x({[b]:E},g);{let D=Go(f),z=g[u],L=S?k(x({},z),{offset:S}):z;return{[b]:E,[D]:F(E)?[E[0],k(x({},E[1]),{offset:L})]:k(x({},E),{offset:L})}}}function w1e(e,t,n,r,i,o,a){if(sI(e))return 0;let s=e==="x"||e==="y2",c=s?-t/2:t/2;if(se(n)||se(i)||se(r)||o){let l=l1(n),u=l1(i),f=l1(r),d=l1(o),h=o?`(${a} < ${d} ? ${s?"":"-"}0.5 * (${d} - (${a})) : ${c})`:c,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",v=u?`(${u} + ${h})`:h;return{signal:m+g+v}}else return i=i||0,r+(n?-i-c:+i+c)}function z_e({fieldDef:e,fieldDef2:t,channel:n,model:r}){let{config:i,markDef:o,encoding:a}=r,s=r.getScaleComponent(n),c=r.scaleName(n),l=s?s.get("type"):void 0,u=s.get("reverse"),f=TI({channel:n,fieldDef:e,markDef:o,config:i,scaleType:l}),p=r.component.axes[n]?.[0]?.get("translate")??.5,h=wt(n)?Ge("binSpacing",o,i)??0:0,m=Ar(n),g=Go(n),v=Go(m),y=mo("minBandSize",o,i),{offset:C}=Nc({channel:n,markDef:o,encoding:a,model:r,bandPosition:0}),{offset:b}=Nc({channel:m,markDef:o,encoding:a,model:r,bandPosition:0}),M=kre({fieldDef:e,scaleName:c}),S=w1e(n,h,u,p,C,y,M),w=w1e(m,h,u,p,b??C,y,M),E=se(f)?{signal:`(1-${f.signal})/2`}:ts(f)?(1-f.band)/2:.5,D=$1({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(rt(e.bin)||e.timeUnit){let z=e.timeUnit&&D!==.5;return{[v]:S1e({fieldDef:e,scaleName:c,bandPosition:E,offset:w,useRectOffsetField:z}),[g]:S1e({fieldDef:e,scaleName:c,bandPosition:se(E)?{signal:`1-${E.signal}`}:1-E,offset:S,useRectOffsetField:z})}}else if(tn(e.bin)){let z=ns(e,c,{},{offset:w});if(Y(t))return{[v]:z,[g]:ns(t,c,{},{offset:S})};if(U2(e.bin)&&e.bin.step)return{[v]:z,[g]:{signal:`scale("${c}", ${K(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}U(P.channelRequiredForBinned(m))}function S1e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return Mf(x({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r},i?{startSuffix:h0,endSuffix:m0}:{}))}var H_e=new Set(["aria","width","height"]);function gn(e,t){let{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Of(e):{};return x(x(x(x(x(x(x(x(x(x(x(x({},L_e(e.markDef,t)),E1e(e,"fill",n)),E1e(e,"stroke",r)),Ut("opacity",e)),Ut("fillOpacity",e)),Ut("strokeOpacity",e)),Ut("strokeWidth",e)),Ut("strokeDash",e)),M1e(e)),Rf(e)),f4(e,"href")),yF(e))}function E1e(e,t,n){let{config:r,mark:i,markDef:o}=e;if(Ge("invalid",o,r)==="hide"&&n&&!_i(i)){let s=A_e(e,{invalid:!0,channels:r4});if(s)return{[t]:[{test:s,value:null},...te(n)]}}return n?{[t]:n}:{}}function L_e(e,t){return Fne.reduce((n,r)=>(!H_e.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=it(e[r])),n),{})}function A_e(e,{invalid:t=!1,channels:n}){let r=n.reduce((o,a)=>{let s=e.getScaleComponent(a);if(s){let c=s.get("type"),l=e.vgField(a,{expr:"datum"});l&&Tn(c)&&(o[l]=!0)}return o},{}),i=O(r);if(i.length>0){let o=t?"||":"&&";return i.map(a=>nh(a,t)).join(` ${o} `)}}function Pf(e){let{config:t,markDef:n}=e;if(Ge("invalid",n,t)){let i=V_e(e,{channels:pr});if(i)return{defined:{signal:i}}}return{}}function V_e(e,{invalid:t=!1,channels:n}){let r=n.reduce((o,a)=>{let s=e.getScaleComponent(a);if(s){let c=s.get("type"),l=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});l&&Tn(c)&&(o[l]=!0)}return o},{}),i=O(r);if(i.length>0){let o=t?"||":"&&";return i.map(a=>nh(a,t)).join(` ${o} `)}}function pM(e,t){if(t!==void 0)return{[e]:it(t)}}var xF="voronoi",N_e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(let n of t.events)n.markname=e.getName(xF)},marks:(e,t,n)=>{let{x:r,y:i}=t.project.hasChannel,o=e.mark;if(_i(o))return U(P.nearestNotSupportForContinuous(o)),n;let a={name:e.getName(xF),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:x({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},Rf(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},s=0,c=!1;return n.forEach((l,u)=>{let f=l.name??"";f===e.component.mark[0].name?s=u:f.indexOf(xF)>=0&&(c=!0)}),c||n.splice(s+1,0,a),n}},hM=N_e;var __e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!fh(e.bind),parse:(e,t,n)=>gM(t,n),topLevelSignals:(e,t,n)=>{let r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],s=hM.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((c,l)=>{let u=ht(`${r}_${c.field}`);n.filter(d=>d.name===u).length||n.unshift(k(x({name:u},a?{init:Lc(a[l])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${Z(c.field)}] : null`}]:[],bind:o[c.field]??o[c.channel]??o}))}),n},signals:(e,t,n)=>{let r=t.name,i=t.project,o=n.filter(l=>l.name===r+f1)[0],a=r+Ac,s=i.items.map(l=>ht(`${r}_${l.field}`)),c=s.map(l=>`${l} !== null`).join(" && ");return s.length&&(o.update=`${c} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},mM=__e;var $f="_toggle",k_e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+$f,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{let n=t.name+f1,r=t.name+$f;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Z2(e)}}, `)+`${r} ? ${n} : null`}},vM=k_e;var T_e={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Q(t.clear)?Di(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(mM.defined(t))for(let r of t.project.items){let i=n.findIndex(o=>o.name===ht(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(let i of t.project.items){let o=n.findIndex(a=>a.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){let a=n.findIndex(s=>s.name===i.signals.data);r(a,"null")}}else{let i=n.findIndex(o=>o.name===t.name+f1);r(i,"null"),vM.defined(t)&&(i=n.findIndex(o=>o.name===t.name+$f),r(i,"false"))}return n}},D1e=T_e;var z1e={defined:e=>{let t=e.resolve==="global"&&e.bind&&fh(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==oi;return t&&!n&&U(P.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),t&&n},parse:(e,t,n)=>{let r=fe(n);if(r.select=Q(r.select)?{type:r.select,toggle:t.toggle}:k(x({},r.select),{toggle:t.toggle}),gM(t,r),ne(n.select)&&(n.select.on||n.select.clear)){let a='event.item && indexof(event.item.mark.role, "legend") < 0';for(let s of t.events)s.filter=te(s.filter??[]),s.filter.includes(a)||s.filter.push(a)}let i=qb(t.bind)?t.bind.legend:"click",o=Q(i)?Di(i,"view"):te(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{let r=t.name,i=qb(t.bind)&&t.bind.legend,o=a=>s=>{let c=fe(s);return c.markname=a,c};for(let a of t.project.items){if(!a.hasLegend)continue;let s=`${ht(a.field)}_legend`,c=`${r}_${s}`;if(n.filter(u=>u.name===c).length===0){let u=i.merge.map(o(`${s}_symbols`)).concat(i.merge.map(o(`${s}_labels`))).concat(i.merge.map(o(`${s}_entries`)));n.unshift(k(x({name:c},t.init?{}:{value:null}),{on:[{events:u,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${c}`,force:!0}]}))}}return n},signals:(e,t,n)=>{let r=t.name,i=t.project,o=n.find(d=>d.name===r+f1),a=r+Ac,s=i.items.filter(d=>d.hasLegend).map(d=>ht(`${r}_${ht(d.field)}_legend`)),l=`${s.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map(d=>({signal:d})),update:l}):s.length>0&&(o.update=l,delete o.value,delete o.on);let u=n.find(d=>d.name===r+$f),f=qb(t.bind)&&t.bind.legend;return u&&(t.events?u.on.push(k(x({},u.on[0]),{events:f})):u.on[0].events=f),n}},H1e=z1e;function L1e(e,t,n){let r=e.fieldDef(t)?.field;for(let i of Jt(e.component.selection??{})){let o=i.project.hasField[r]??i.project.hasChannel[t];if(o&&z1e.defined(i)){let a=n.get("selections")??[];a.push(i.name),n.set("selections",a,!1),o.hasLegend=!0}}}var V1e="_translate_anchor",N1e="_translate_delta",I_e={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{let r=t.name,i=vo.defined(t),o=r+V1e,{x:a,y:s}=t.project.hasChannel,c=Di(t.translate,"scope");return i||(c=c.map(l=>(l.between[0].markname=r+Vc,l))),n.push({name:o,value:{},on:[{events:c.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?`, extent_x: ${i?gh(e,Mt):`slice(${a.signals.visual})`}`:"")+(s!==void 0?`, extent_y: ${i?gh(e,en):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+N1e,value:{},on:[{events:c,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),a!==void 0&&A1e(e,t,a,"width",n),s!==void 0&&A1e(e,t,s,"height",n),n}},_1e=I_e;function A1e(e,t,n,r,i){let o=t.name,a=o+V1e,s=o+N1e,c=n.channel,l=vo.defined(t),u=i.filter(M=>M.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(c),p=d&&d.get("type"),h=d&&d.get("reverse"),m=l?c===Mt?h?"":"-":h?"-":"":"",g=`${a}.extent_${c}`,v=`${m}${s}.${c} / ${l?`${f}`:`span(${g})`}`,y=!l||!d?"panLinear":p==="log"?"panLog":p==="symlog"?"panSymlog":p==="pow"?"panPow":"panLinear",C=l?p==="pow"?`, ${d.get("exponent")??1}`:p==="symlog"?`, ${d.get("constant")??1}`:"":"",b=`${y}(${g}, ${v}${C})`;u.on.push({events:{signal:s},update:l?b:`clampRange(${b}, 0, ${f})`})}var T1e="_zoom_anchor",I1e="_zoom_delta",F_e={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{let r=t.name,i=vo.defined(t),o=r+I1e,{x:a,y:s}=t.project.hasChannel,c=Z(e.scaleName(Mt)),l=Z(e.scaleName(en)),u=Di(t.zoom,"scope");return i||(u=u.map(f=>(f.markname=r+Vc,f))),n.push({name:r+T1e,on:[{events:u,update:i?"{"+[c?`x: invert(${c}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:u,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&k1e(e,t,a,"width",n),s!==void 0&&k1e(e,t,s,"height",n),n}},F1e=F_e;function k1e(e,t,n,r,i){let o=t.name,a=n.channel,s=vo.defined(t),c=i.filter(y=>y.name===n.signals[s?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,u=e.getScaleComponent(a),f=u&&u.get("type"),d=s?gh(e,a):c.name,p=o+I1e,h=`${o}${T1e}.${a}`,m=!s||!u?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=s?f==="pow"?`, ${u.get("exponent")??1}`:f==="symlog"?`, ${u.get("constant")??1}`:"":"",v=`${m}(${d}, ${h}, ${p}${g})`;c.on.push({events:{signal:p},update:s?v:`clampRange(${v}, 0, ${l})`})}var K2="_store",f1="_tuple",f1e="_modify";var cM="vlSelectionResolve",If=[b1e,C1e,g1e,vM,mM,vo,H1e,D1e,_1e,F1e,hM];function R_e(e){let t=e.parent;for(;t&&!Tr(t);)t=t.parent;return t}function Z2(e,{escape:t}={escape:!0}){let n=t?Z(e.name):e.name,r=R_e(e);if(r){let{facet:i}=r;for(let o of Lr)i[o]&&(n+=` + '__facet_${o}_' + (facet[${Z(r.vgField(o))}])`)}return n}function Ch(e){return Jt(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function gM(e,t){(Q(t.select)||!t.select.on)&&delete e.events,(Q(t.select)||!t.select.clear)&&delete e.clear,(Q(t.select)||!t.select.toggle)&&delete e.toggle}function CF(e){let t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...CF(e.object)),t.push(...CF(e.property))),t)}function R1e(e){return e.object.type==="MemberExpression"?R1e(e.object):e.object.name==="datum"}function yM(e){let t=Xu(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&R1e(r)&&n.add(CF(r).slice(1).join("."))}),n}var ls=class e extends Le{clone(){return new e(null,this.model,fe(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=g0(this.model,this.filter,this),this._dependentFields=yM(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}};function O1e(e,t){let n={},r=e.config.selection;if(!t||!t.length)return n;for(let i of t){let o=ht(i.name),a=i.select,s=Q(a)?a:a.type,c=ne(a)?fe(a):{type:s},l=r[s];for(let d in l)d==="fields"||d==="encodings"||(d==="mark"&&(c[d]=x(x({},l[d]),c[d])),(c[d]===void 0||c[d]===!0)&&(c[d]=fe(l[d]??c[d])));let u=n[o]=k(x({},c),{name:o,type:s,init:i.value,bind:i.bind,events:Q(c.on)?Di(c.on,"scope"):te(fe(c.on))}),f=fe(i);for(let d of If)d.defined(u)&&d.parse&&d.parse(e,u,f)}return n}function uM(e,t,n,r="datum"){let i=Q(t)?t:t.param,o=ht(i),a=Z(o+K2),s;try{s=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(s.project.timeUnit){let d=n??e.component.data.raw,p=s.project.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p}let c=s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=s.resolve==="global"?")":`, ${Z(s.resolve)})`,u=`${c}${a}, ${r}${l}`,f=`length(data(${a}))`;return t.empty===!1?`${f} && ${u}`:`!${f} || ${u}`}function lM(e,t,n){let r=ht(t),i=n.encoding,o=n.field,a;try{a=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=a.project.items[0].field,a.project.items.length>1&&U(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Z(o)}.`);else if(i&&!o){let s=a.project.items.filter(c=>c.channel===i);!s.length||s.length>1?(o=a.project.items[0].field,U((s.length?"Multiple ":"No ")+`matching ${Z(i)} encoding found for selection ${Z(n.param)}. Using "field": ${Z(o)}.`)):o=s[0].field}return`${a.name}[${Z(Kn(o))}]`}function P1e(e,t){for(let[n,r]of T1(e.component.selection??{})){let i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Mn(new ls(t,e,{param:n}),i,St.Lookup,e.component.data.outputNodeRefCounts)}}function g0(e,t,n){return af(t,r=>Q(r)?r:rre(r)?uM(e,r,n):vb(r))}function O_e(e,t){if(e)return F(e)&&!j2(e)?e.map(n=>ah(n,t)).join(", "):e}function bF(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function Bf(e,t,n,r={header:!1}){let f=e.combine(),{disable:i,orient:o,scale:a,labelExpr:s,title:c,zindex:l}=f,u=ie(f,["disable","orient","scale","labelExpr","title","zindex"]);if(!i){for(let p in u){let h=Yre[p],m=u[p];if(h&&h!==t&&h!=="both")delete u[p];else if(Ec(m)){let d=m,{condition:g}=d,v=ie(d,["condition"]),y=te(g),C=OI[p];if(C){let{vgProp:b,part:M}=C,S=[...y.map(w=>{let z=w,{test:E}=z,D=ie(z,["test"]);return x({test:g0(null,E)},D)}),v];bF(u,M,b,S),delete u[p]}else if(C===null){let b={signal:y.map(M=>{let E=M,{test:S}=E,w=ie(E,["test"]);return`${g0(null,S)} ? ${gI(w)} : `}).join("")+gI(v)};u[p]=b}}else if(se(m)){let g=OI[p];if(g){let{vgProp:v,part:y}=g;bF(u,y,v,m),delete u[p]}}Ae(["labelAlign","labelBaseline"],p)&&u[p]===null&&delete u[p]}if(t==="grid"){if(!u.grid)return;if(u.encode){let{grid:p}=u.encode;u.encode=x({},p?{grid:p}:{}),Ke(u.encode)&&delete u.encode}return k(x({scale:a,orient:o},u),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ct(l,0)})}else{if(!r.header&&e.mainExtracted)return;if(s!==void 0){let h=s;u.encode?.labels?.update&&se(u.encode.labels.update.text)&&(h=O2(s,"datum.label",u.encode.labels.update.text.signal)),bF(u,"labels","text",{signal:h})}if(u.labelAlign===null&&delete u.labelAlign,u.encode){for(let h of Tb)e.hasAxisPart(h)||delete u.encode[h];Ke(u.encode)&&delete u.encode}let p=O_e(c,n);return k(x(x(x({scale:a,orient:o,grid:!1},p?{title:p}:{}),u),n.aria===!1?{aria:!1}:{}),{zindex:ct(l,0)})}}}function xM(e){let{axes:t}=e.component,n=[];for(let r of pr)if(t[r]){for(let i of t[r])if(!i.get("disable")&&!i.get("gridScale")){let o=r==="x"?"height":"width",a=e.getSizeSignalRef(o).signal;o!==a&&n.push({name:o,update:a})}}return n}function $1e(e,t){let{x:n=[],y:r=[]}=e;return[...n.map(i=>Bf(i,"grid",t)),...r.map(i=>Bf(i,"grid",t)),...n.map(i=>Bf(i,"main",t)),...r.map(i=>Bf(i,"main",t))].filter(i=>i)}function B1e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){let o=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},s=t[n==="x"?"axisTop":"axisRight"]||{},c=new Set([...O(a),...O(s)]),l={};for(let u of c.values())l[u]={signal:`${r.signal} === "${o}" ? ${l1(a[u])} : ${l1(s[u])}`};return l}return t[i]})])}function U1e(e,t,n,r){let i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:HI(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",a=se(n)?"axisOrient":`axis${J3(n)}`,s=[...i,...i.map(l=>o+l.substr(4))],c=["axis",a,o];return{vlOnlyAxisConfig:B1e(s,r,e,n),vgAxisConfig:B1e(c,r,e,n),axisConfigStyle:P_e([...c,...s],r)}}function P_e(e,t){let n=[{}];for(let r of e){let i=t[r]?.style;if(i){i=te(i);for(let o of i)n.push(t.style[o])}}return Object.assign.apply(null,n)}function bh(e,t,n,r={}){let i=yI(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(let o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(r[o]?.[e]!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}var wF={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??$_e(n,e),gridScale:({model:e,channel:t})=>B_e(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||EF(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||SF(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??U_e(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??j_e(t.type,n,Y(t)&&!!t.timeUnit,Y(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{let o=e==="x"?"width":e==="y"?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??G_e({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},tickMinStep:q_e,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;let r=DF(t,n);if(r!==void 0)return r;let i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",a=t.fieldDef(o);return xI(i?[kI(i)]:[],Y(a)?[kI(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>W_e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Y_e(n,t)};function $_e(e,t){return!Ft(e)&&Y(t)&&!rt(t?.bin)&&!tn(t?.bin)}function B_e(e,t){let n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function j1e(e,t,n,r,i){let o=t?.labelAngle;if(o!==void 0)return se(o)?o:e4(o);{let{configValue:a}=bh("labelAngle",r,t?.style,i);return a!==void 0?e4(a):n===Mt&&Ae([Qp,Xp],e.type)&&!(Y(e)&&e.timeUnit)?270:void 0}}function MF(e){return`(((${e.signal} % 360) + 360) % 360)`}function SF(e,t,n,r){if(e!==void 0)if(n==="x"){if(se(e)){let i=MF(e),o=se(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(se(t)){let i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(se(e)){let i=MF(e),o=se(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(se(t)){let i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function EF(e,t,n){if(e===void 0)return;let r=n==="x",i=r?0:90,o=r?"bottom":"left";if(se(e)){let a=MF(e),s=se(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${a} + 90)`:a} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${s} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(se(t)){let a=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${a} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function U_e(e,t){if(t==="x"&&Ae(["quantitative","temporal"],e))return!0}function j_e(e,t,n,r){if(n&&!ne(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function G1e(e){return e==="x"?"bottom":"left"}function G_e({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){if(!r&&!Ft(t)&&t!=="log"){if(Y(e)){if(rt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ae(["month","hours","day","quarter"],nn(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function q_e({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Y(t)){let{timeUnit:n}=t;if(n){let r=lb(n);if(r)return{signal:r}}}}function DF(e,t){let n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;if(o&&a)return CI(o,a);if(o)return o;if(a)return a;if(o!==void 0)return o;if(a!==void 0)return a}function W_e(e,t){let n=e.values;if(F(n))return kb(t,n);if(se(n))return n}function Y_e(e,t){return e==="rect"&&ih(t)?1:0}var v0=class e extends Le{clone(){return new e(null,fe(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=yM(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Xo(r)&&zb(r.sort)){let{field:o,timeUnit:a}=r,s=r.sort,c=s.map((l,u)=>`${vb({field:o,timeUnit:a,equal:l})} ? ${u} : `).join("")+s.length;t=new e(t,{calculate:c,as:us(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${be(this.transform)}`}};function us(e,t,n){return K(e,x({prefix:t,suffix:"sort_index"},n??{}))}function Uf(e,t){return Ae(["top","bottom"],t)?"column":Ae(["left","right"],t)||e==="row"?"row":"column"}function _c(e,t,n,r){let i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ct((t||{})[e],i[e],n.header[e])}function Mh(e,t,n,r){let i={};for(let o of e){let a=_c(o,t||{},n,r);a!==void 0&&(i[o]=a)}return i}var jf=["row","column"],Gf=["header","footer"];function q1e(e,t){let n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=Mh(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),c=Uf(t,s),l=e4(a);return{name:`${t}-title`,type:"group",role:`${c}-title`,title:x(x(x(k(x({text:n},t==="row"?{orient:"left"}:{}),{style:"guide-title"}),Y1e(l,c)),W1e(c,l,o)),K1e(r,i,t,die,QI))}}function W1e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}let r=EF(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Y1e(e,t){let n=SF(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function X1e(e,t){let n=e.component.layoutHeaders[t],r=[];for(let i of Gf)if(n[i])for(let o of n[i]){let a=Q_e(e,t,i,n,o);a!=null&&r.push(a)}return r}function X_e(e,t){let{sort:n}=e;return kr(n)?{field:K(n,{expr:"datum"}),order:n.order??"ascending"}:F(n)?{field:us(e,t,{expr:"datum"}),order:"ascending"}:{field:K(e,{expr:"datum"}),order:n??"ascending"}}function CM(e,t,n){let{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:c}=Mh(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Sf({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,u=Uf(t,s);return x(x(x(k(x({text:{signal:c?O2(O2(c,"datum.label",l),"datum.value",K(e,{expr:"parent"})):l}},t==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),Y1e(o,u)),W1e(u,o,a)),K1e(n,e,t,pie,KI))}function Q_e(e,t,n,r,i){if(i){let o=null,{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){let{labelOrient:f}=Mh(["labelOrient"],a.header,s,t);(t==="row"&&!Ae(["top","bottom"],f)||t==="column"&&!Ae(["left","right"],f))&&(o=CM(a,t,s))}let c=Tr(e)&&!os(e.facet),l=i.axes,u=l?.length>0;if(o||u){let f=t==="row"?"height":"width";return x(x(x(x(x({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:X_e(a,t)}:{}),u&&c?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{}),u?{axes:l}:{})}}return null}var K_e={column:{start:0,end:1},row:{start:1,end:0}};function Z_e(e,t){return K_e[t][e]}function Q1e(e,t){let n={};for(let r of Lr){let i=e[r];if(i?.facetFieldDef){let{titleAnchor:o,titleOrient:a}=Mh(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),s=Uf(r,a),c=Z_e(o,s);c!==void 0&&(n[s]=c)}}return Ke(n)?void 0:n}function K1e(e,t,n,r,i){let o={};for(let a of r){if(!i[a])continue;let s=_c(a,t?.header,e,n);s!==void 0&&(o[i[a]]=s)}return o}function qf(e){return[...bM(e,"width"),...bM(e,"height"),...bM(e,"childWidth"),...bM(e,"childHeight")]}function bM(e,t){let n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];let i=e.getSizeSignalRef(t).signal;if(r==="step"){let o=e.getScaleComponent(n);if(o){let a=o.get("type"),s=o.get("range");if(Ft(a)&&Ni(s)){let c=e.scaleName(n);return Tr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Z1e(c,s)]:[Z1e(c,s),{name:i,update:zF(c,o,`domain('${c}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){let o=i.endsWith("width"),a=o?"containerSize()[0]":"containerSize()[1]",s=ph(e.config.view,o?"width":"height"),c=`isFinite(${a}) ? ${a} : ${s}`;return[{name:i,init:c,on:[{update:c,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Z1e(e,t){let n=`${e}_step`;return se(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function zF(e,t,n){let r=t.get("type"),i=t.get("padding"),o=ct(t.get("paddingOuter"),i),a=t.get("paddingInner");return a=r==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${l1(a)}, ${l1(o)}) * ${e}_step`}function MM(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function wM(e,t){return O(e).reduce((n,r)=>{let i=e[r];return x(x({},n),j1(t,i,r,o=>it(o.value)))},{})}function SM(e,t){if(Tr(t))return e==="theta"?"independent":"shared";if(Zo(t))return"shared";if(Yf(t))return wt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Wf(e,t){let n=e.scale[t],r=wt(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&U(P.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}var J_e=k(x({},JI),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),HF=O(J_e),EM=class extends Ti{};var LF={symbols:eke,gradient:tke,labels:nke,entries:rke};function eke(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;let{markDef:a,encoding:s,config:c,mark:l}=n,u=a.filled&&l!=="trail",f=x(x({},$ne({},n,Sre)),Of(n,{filled:u})),d=i.get("symbolOpacity")??c.legend.symbolOpacity,p=i.get("symbolFillColor")??c.legend.symbolFillColor,h=i.get("symbolStrokeColor")??c.legend.symbolStrokeColor,m=d===void 0?J1e(s.opacity)??a.opacity:void 0;if(f.fill){if(r==="fill"||u&&r===kn)delete f.fill;else if(f.fill.field)p?delete f.fill:(f.fill=it(c.legend.symbolBaseFillColor??"black"),f.fillOpacity=it(m??1));else if(F(f.fill)){let g=DM(s.fill??s.color)??a.fill??(u&&a.color);g&&(f.fill=it(g))}}if(f.stroke){if(r==="stroke"||!u&&r===kn)delete f.stroke;else if(f.stroke.field||h)delete f.stroke;else if(F(f.stroke)){let g=ct(DM(s.stroke||s.color),a.stroke,u?a.color:void 0);g&&(f.stroke={value:g})}}if(r!==c1){let g=Y(t)&&toe(n,i,t);g?f.opacity=[x({test:g},it(m??1)),it(c.legend.unselectedOpacity)]:m&&(f.opacity=it(m))}return f=x(x({},f),e),Ke(f)?void 0:f}function tke(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;let{config:i,markDef:o,encoding:a}=t,s={},l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?J1e(a.opacity)||o.opacity:void 0;return l&&(s.opacity=it(l)),s=x(x({},s),e),Ke(s)?void 0:s}function nke(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){let o=n.legend(r)||{},a=n.config,s=Y(t)?toe(n,i,t):void 0,c=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:l,formatType:u}=o,f;is(u)?f=go({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:u,config:a}):l===void 0&&u===void 0&&a.customFormatTypes&&(t.type==="quantitative"&&a.numberFormatType?f=go({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):t.type==="temporal"&&a.timeFormatType&&Y(t)&&t.timeUnit===void 0&&(f=go({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));let d=x(x(x({},c?{opacity:c}:{}),f?{text:f}:{}),e);return Ke(d)?void 0:d}function rke(e,{legendCmpt:t}){return t.get("selections")?.length?k(x({},e),{fill:{value:"transparent"}}):e}function J1e(e){return eoe(e,(t,n)=>Math.max(t,n.value))}function DM(e){return eoe(e,(t,n)=>ct(t,n.value))}function eoe(e,t){if($re(e))return te(e.condition).reduce(t,e.value);if(Jn(e))return e.value}function toe(e,t,n){let r=t.get("selections");if(!r?.length)return;let i=Z(n.field);return r.map(o=>`(!length(data(${Z(ht(o)+K2)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}var AF={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{let{format:r,formatType:i}=t;return Sb(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{let{formatType:r}=e;return Eb(r,t,n)},gradientLength:e=>{let{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??cke(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??lke(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??oke(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>as(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(vc(n)&&P1(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>ike(t,e)};function ike(e,t){let n=e.values;if(F(n))return kb(t,n);if(se(n))return n}function oke(e,t,n,r){if(t!=="shape"){let i=DM(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function roe(e){let{legend:t}=e;return ct(t.type,ake(e))}function ake({channel:e,timeUnit:t,scaleType:n}){if(vc(e)){if(Ae(["quarter","month","day"],t))return"symbol";if(P1(n))return"gradient"}return"symbol"}function ioe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??ske(n,t)}function ske(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function cke({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){let{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:c}=e;if(P1(i))return n==="horizontal"?r==="top"||r==="bottom"?noe(t,"width",a,o):a:noe(t,"height",c,s)}function noe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function lke(e){if(Ae(["quantile","threshold","log","symlog"],e))return"greedy"}function VF(e){let t=Et(e)?uke(e):hke(e);return e.component.legends=t,t}function uke(e){let{encoding:t}=e,n={};for(let r of[kn,...Gb]){let i=_t(t[r]);!i||!e.getScaleComponent(r)||r===xn&&Y(i)&&i.type===Y2||(n[r]=pke(e,r))}return n}function fke(e,t){let n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function dke(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===r?.title)return!0}return e===(n||{})[t]}function pke(e,t){let n=e.legend(t),{markDef:r,encoding:i,config:o}=e,a=o.legend,s=new EM({},fke(e,t));L1e(e,t,s);let c=n!==void 0?!n:a.disable;if(s.set("disable",c,n!==void 0),c)return s;n=n||{};let l=e.getScaleComponent(t).get("type"),u=_t(i[t]),f=Y(u)?nn(u.timeUnit)?.unit:void 0,d=n.orient||o.legend.orient||"right",p=roe({legend:n,channel:t,timeUnit:f,scaleType:l}),h=ioe({legend:n,legendType:p,orient:d,legendConfig:a}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:u,legendConfig:a,config:o,scaleType:l,orient:d,legendType:p,direction:h};for(let b of HF){if(p==="gradient"&&b.startsWith("symbol")||p==="symbol"&&b.startsWith("gradient"))continue;let M=b in AF?AF[b](m):n[b];if(M!==void 0){let S=dke(M,b,n,e.fieldDef(t));(S||o.legend[b]===void 0)&&s.set(b,M,S)}}let g=n?.encoding??{},v=s.get("selections"),y={},C={fieldOrDatumDef:u,model:e,channel:t,legendCmpt:s,legendType:p};for(let b of["labels","legend","title","symbols","gradient","entries"]){let M=wM(g[b]??{},e),S=b in LF?LF[b](M,C):M;S!==void 0&&!Ke(S)&&(y[b]=k(x(x({},v?.length&&Y(u)?{name:`${ht(u.field)}_legend_${b}`}:{}),v?.length?{interactive:!!v}:{}),{update:S}))}return Ke(y)||s.set("encode",y,!!n?.encoding),s}function hke(e){let{legends:t,resolve:n}=e.component;for(let r of e.children){VF(r);for(let i of O(r.component.legends))n.legend[i]=Wf(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=NF(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(let r of O(t))for(let i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function NF(e,t){if(!e)return t.clone();let n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(let o of HF){let a=U1(e.getWithExplicit(o),t.getWithExplicit(o),o,"legend",(s,c)=>{switch(o){case"symbolType":return mke(s,c);case"title":return sb(s,c);case"type":return i=!0,Ii("symbol")}return Tf(s,c,o,"legend")});e.setWithExplicit(o,a)}return i&&(e.implicit?.encode?.gradient&&Up(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&Up(e.explicit,["encode","gradient"])),e}function mke(e,t){return t.value==="circle"?t:e}function gke(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function zM(e){let t=e.component.legends,n={};for(let i of O(t)){let o=e.getScaleComponent(i),a=mt(o.get("domains"));if(n[a])for(let s of n[a])NF(s,t[i])||n[a].push(t[i]);else n[a]=[t[i].clone()]}return Jt(n).flat().map(i=>vke(i,e.config)).filter(i=>i!==void 0)}function vke(e,t){let a=e.combine(),{disable:n,labelExpr:r,selections:i}=a,o=ie(a,["disable","labelExpr","selections"]);if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),o.encode?.symbols){let s=o.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!o.stroke&&(s.stroke={value:"transparent"});for(let c of Gb)o[c]&&delete s[c]}if(o.title||delete o.title,r!==void 0){let s=r;o.encode?.labels?.update&&se(o.encode.labels.update.text)&&(s=O2(r,"datum.label",o.encode.labels.update.text.signal)),gke(o,"labels","text",{signal:s})}return o}}function ooe(e){return Zo(e)||Yf(e)?yke(e):aoe(e)}function yke(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),aoe(e))}function aoe(e){let t=e.component.projection;if(!t||t.merged)return[];let n=t.combine(),{name:r}=n;if(t.data){let i={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},o=t.data.reduce((a,s)=>{let c=se(s)?s.signal:`data('${e.lookupDataSource(s)}')`;return Ae(a,c)||a.push(c),a},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[x({name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}else return[x({name:r,translate:{signal:"[width / 2, height / 2]"}},n)]}var soe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];var wh=class extends Ti{constructor(t,n,r,i){super(x({},n),{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}};function _F(e){e.component.projection=Et(e)?xke(e):Mke(e)}function xke(e){if(e.hasProjection){let t=Zn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Cke(e):void 0,o=new wh(e.projectionName(!0),x(x({},Zn(e.config.projection)??{}),t??{}),r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function Cke(e){let t=[],{encoding:n}=e;for(let r of[[ti,ei],[ni,Li]])(_t(n[r[0]])||_t(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(xn)&&e.typedFieldDef(xn).type===Y2&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(St.Main)),t}function bke(e,t){let n=GC(soe,i=>!!(!he(e.explicit,i)&&!he(t.explicit,i)||he(e.explicit,i)&&he(t.explicit,i)&&Hr(e.get(i),t.get(i))));if(Hr(e.size,t.size)){if(n)return e;if(Hr(e.explicit,{}))return t;if(Hr(t.explicit,{}))return e}return null}function Mke(e){if(e.children.length===0)return;let t;for(let r of e.children)_F(r);let n=GC(e.children,r=>{let i=r.component.projection;if(i)if(t){let o=bke(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){let r=e.projectionName(!0),i=new wh(r,t.specifiedProjection,t.size,fe(t.data));for(let o of e.children){let a=o.component.projection;a&&(a.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(a.get("name"),r),a.merged=!0)}return i}}function wke(e,t,n,r){if(rs(t,n)){let i=Et(e)?e.axis(n)??e.legend(n)??{}:{},o=K(t,{expr:"datum"}),a=K(t,{expr:"datum",binSuffix:"end"});return{formulaAs:K(t,{binSuffix:"range",forAs:!0}),formula:f0(o,a,i.format,i.formatType,r)}}return{}}function loe(e,t){return`${nb(e)}_${t}`}function Ske(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Xf(e,t,n){let r=gf(n,void 0)??{},i=loe(r,t);return e.getName(`${i}_bins`)}function Eke(e){return"as"in e}function coe(e,t,n){let r,i;Eke(e)?r=Q(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[K(e,{forAs:!0}),K(e,{binSuffix:"end",forAs:!0})];let o=x({},gf(t,void 0)),a=loe(o,e.field),{signal:s,extentSignal:c}=Ske(n,a);if(mf(o.extent)){let u=o.extent;i=lM(n,u.param,u),delete o.extent}let l=x(x(x({bin:o,field:e.field,as:[r]},s?{signal:s}:{}),c?{extentSignal:c}:{}),i?{span:i}:{});return{key:a,binComponent:l}}var J2=class e extends Le{clone(){return new e(null,fe(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){let r=n.reduceFieldDef((i,o,a)=>{if(bn(o)&&rt(o.bin)){let{key:s,binComponent:c}=coe(o,o.bin,n);i[s]=x(x(x({},c),i[s]),wke(n,o,a,n.config))}return i},{});return Ke(r)?null:new e(t,r)}static makeFromTransform(t,n,r){let{key:i,binComponent:o}=coe(n,n.bin,r);return new e(t,{[i]:o})}merge(t,n){for(let r of O(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=zi([...this.bins[r].as,...t.bins[r].as],be)):this.bins[r]=t.bins[r];for(let r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Jt(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Jt(this.bins).map(t=>t.field))}hash(){return`Bin ${be(this.bins)}`}assemble(){return Jt(this.bins).flatMap(t=>{let n=[],[r,...i]=t.as,c=t.bin,{extent:o}=c,a=ie(c,["extent"]),s=x(x(x({type:"bin",field:Kn(t.field),as:r,signal:t.signal},mf(o)?{extent:null}:{extent:o}),t.span?{span:{signal:`span(${t.span})`}}:{}),a);!o&&t.extentSignal&&(n.push({type:"extent",field:Kn(t.field),signal:t.extentSignal}),s.extent={signal:t.extentSignal}),n.push(s);for(let l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:K({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}};function Dke(e,t,n,r){let i=Et(r)?r.encoding[Ar(t)]:void 0;if(bn(n)&&Et(r)&&Vb(n,i,r.markDef,r.config)){e.add(K(n,{})),e.add(K(n,{suffix:"end"}));let{mark:o,markDef:a,config:s}=r,c=$1({fieldDef:n,markDef:a,config:s});Cc(o)&&c!==.5&&wt(t)&&(e.add(K(n,{suffix:h0})),e.add(K(n,{suffix:m0}))),n.bin&&rs(n,t)&&e.add(K(n,{binSuffix:"range"}))}else if(QC(t)){let o=XC(t);e.add(r.getName(o))}else e.add(K(n));return Xo(n)&&mre(n.scale?.range)&&e.add(n.scale.range.field),e}function zke(e,t){for(let n of O(t)){let r=t[n];for(let i of O(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}var yo=class e extends Le{clone(){return new e(null,new Set(this.dimensions),fe(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(a=>{a.aggregate&&(r=!0)});let i={},o=new Set;return!r||(n.forEachFieldDef((a,s)=>{let{aggregate:c,field:l}=a;if(c)if(c==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([K(a,{forAs:!0})]);else{if(ho(c)||qo(c)){let u=ho(c)?"argmin":"argmax",f=c[u];i[f]??(i[f]={}),i[f][u]=new Set([K({op:u,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][c]=new Set([K(a,{forAs:!0})]);Vr(s)&&n.scaleDomain(s)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([K({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([K({field:l,aggregate:"max"},{forAs:!0})]))}else Dke(o,s,a,n)}),o.size+O(i).length===0)?null:new e(t,o,i)}static makeFromTransform(t,n){let r=new Set,i={};for(let o of n.aggregate){let{op:a,field:s,as:c}=o;a&&(a==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([c||K(o,{forAs:!0})])):(i[s]??(i[s]={}),i[s][a]=new Set([c||K(o,{forAs:!0})])))}for(let o of n.groupby??[])r.add(o);return r.size+O(i).length===0?null:new e(t,r,i)}merge(t){return rI(this.dimensions,t.dimensions)?(zke(this.measures,t.measures),!0):(Gne("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...O(this.measures)])}producedFields(){let t=new Set;for(let n of O(this.measures))for(let r of O(this.measures[n])){let i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${be({dimensions:this.dimensions,measures:this.measures})}`}assemble(){let t=[],n=[],r=[];for(let o of O(this.measures))for(let a of O(this.measures[o]))for(let s of this.measures[o][a])r.push(s),t.push(a),n.push(o==="*"?null:Kn(o));return{type:"aggregate",groupby:[...this.dimensions].map(Kn),ops:t,fields:n,as:r}}};var e2=class extends Le{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(let o of Lr){let a=n.facet[o];if(a){let{bin:s,sort:c}=a;this[o]=x({name:n.getName(`${o}_domain`),fields:[K(a),...rt(s)?[K(a,{binSuffix:"end"})]:[]]},kr(c)?{sortField:c}:F(c)?{sortIndexField:us(a,o)}:{})}}this.childModel=n.child}hash(){let t="Facet";for(let n of Lr)this[n]&&(t+=` ${n.charAt(0)}:${be(this[n])}`);return t}get fields(){let t=[];for(let n of Lr)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){let t=new Set(this.fields);for(let n of Lr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){let t={};for(let n of pr){let r=this.childModel.component.scales[n];if(r&&!r.merged){let i=r.get("type"),o=r.get("range");if(Ft(i)&&Ni(o)){let a=p4(this.childModel,n),s=Qf(a);s?t[n]=s:U(P.unknownField(n))}}}return t}assembleRowColumnHeaderData(t,n,r){let i={row:"y",column:"x",facet:void 0}[t],o=[],a=[],s=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),a.push("max")):(o.push(r[i]),a.push("distinct")),s.push(`distinct_${r[i]}`));let{sortField:c,sortIndexField:l}=this[t];if(c){let{op:u=o4,field:f}=c;o.push(f),a.push(u),s.push(K(c,{forAs:!0}))}else l&&(o.push(l),a.push("max"),s.push(l));return{name:this[t].name,source:n??this.data,transform:[x({type:"aggregate",groupby:this[t].fields},o.length?{fields:o,ops:a,as:s}:{})]}}assembleFacetHeaderData(t){let{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(let c of jf){for(let l of Gf){let u=(r[c]&&r[c][l])??[];for(let f of u)if(f.axes?.length>0){o[c]=!0;break}}if(o[c]){let l=`length(data("${this.facet.name}"))`,u=c==="row"?n?{signal:`ceil(${l} / ${n})`}:1:n?{signal:`min(${l}, ${n})`}:{signal:l};i.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:u}]})}}let{row:a,column:s}=o;return(a||s)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){let t=[],n=null,r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:a}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;let s=[].concat(r.x??[],r.y??[]),c=s.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:c}]})}for(let s of[F1,I1])this[s]&&t.push(this.assembleRowColumnHeaderData(s,n,r));if(a){let s=this.assembleFacetHeaderData(r);s&&t.push(...s)}return t}};function uoe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Hke(e,t){let n=jp(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){let r=uoe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){let r=uoe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return U(P.unrecognizedParse(t)),null}function foe(e){let t={};return Bp(e.filter,n=>{if(DI(n)){let r=null;ub(n)?r=Nr(n.equal):db(n)?r=Nr(n.lte):fb(n)?r=Nr(n.lt):pb(n)?r=Nr(n.gt):hb(n)?r=Nr(n.gte):mb(n)?r=n.range[0]:gb(n)&&(r=(n.oneOf??n.in)[0]),r&&(Wo(r)?t[n.field]="date":Be(r)?t[n.field]="number":Q(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function doe(e){let t={};function n(r){wc(r)?t[r.field]="date":r.type==="quantitative"&&Nne(r.aggregate)?t[r.field]="number":r0(r.field)>1?r.field in t||(t[r.field]="flatten"):Xo(r)&&kr(r.sort)&&r0(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Et(e)||Tr(e))&&e.forEachFieldDef((r,i)=>{if(bn(r))n(r);else{let o=po(i),a=e.fieldDef(o);n(k(x({},r),{type:a.type}))}}),Et(e)){let{mark:r,markDef:i,encoding:o}=e;if(_i(r)&&!e.encoding.order){let a=i.orient==="horizontal"?"y":"x",s=o[a];Y(s)&&s.type==="quantitative"&&!(s.field in t)&&(t[s.field]="number")}}return t}function poe(e){let t={};if(Et(e)&&e.component.selection)for(let n of O(e.component.selection)){let r=e.component.selection[n];for(let i of r.project.items)!i.channel&&r0(i.field)>1&&(t[i.field]="flatten")}return t}var Ir=class e extends Le{clone(){return new e(null,fe(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${be(this._parse)}`}static makeExplicit(t,n,r){let i={},o=n.data;return!Q2(o)&&o?.format?.parse&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(let s of O(r)){let c=i.getWithExplicit(s);c.value!==void 0&&(c.explicit||c.value===r[s]||c.value==="derived"||r[s]==="flatten"?delete r[s]:U(P.differentParse(s,r[s],c.value)))}for(let s of O(n)){let c=i.get(s);c!==void 0&&(c===n[s]?delete n[s]:U(P.differentParse(s,n[s],c)))}let o=new Ti(n,r);i.copyAll(o);let a={};for(let s of O(o.combine())){let c=o.get(s);c!==null&&(a[s]=c)}return O(a).length===0||i.parseNothing?null:new e(t,a)}get parse(){return this._parse}merge(t){this._parse=x(x({},this._parse),t.parse),t.remove()}assembleFormatParse(){let t={};for(let n of O(this._parse)){let r=this._parse[n];r0(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(O(this._parse))}dependentFields(){return new Set(O(this._parse))}assembleTransforms(t=!1){return O(this._parse).filter(n=>t?r0(n)>1:!0).map(n=>{let r=Hke(n,this._parse[n]);return r?{type:"formula",expr:r,as:Gp(n)}:null}).filter(n=>n!==null)}};var ea=class e extends Le{clone(){return new e(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([oi])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:oi}}};var h4=class e extends Le{clone(){return new e(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${be(this.params)}`}assemble(){return x({type:"graticule"},this.params===!0?{}:this.params)}};var m4=class e extends Le{clone(){return new e(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${be(this.params)}`}assemble(){return x({type:"sequence"},this.params)}};var q1=class extends Le{constructor(t){super(null),t??(t={name:"source"});let n;if(Q2(t)||(n=t.format?x({},_n(t.format,["parse"])):{}),p0(t))this._data={values:t.values};else if(Hc(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Ae(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else uF(t)?this._data={values:[{type:"Sphere"}]}:(sM(t)||Q2(t))&&(this._data={});this._generator=Q2(t),t.name&&(this._name=t.name),n&&!Ke(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return k(x({name:this._name},this._data),{transform:[]})}};var hoe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Lke=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Sh;function HM(e){return e instanceof q1||e instanceof h4||e instanceof m4}var Kf=class{constructor(){Sh.set(this,void 0),hoe(this,Sh,!1,"f")}setModified(){hoe(this,Sh,!0,"f")}get modifiedFlag(){return Lke(this,Sh,"f")}};Sh=new WeakMap;var fs=class extends Kf{getNodeDepths(t,n,r){r.set(t,n);for(let i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){let r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(let i of r)this.run(i[0]);return this.modifiedFlag}},Zf=class extends Kf{optimize(t){this.run(t);for(let n of t.children)this.optimize(n);return this.modifiedFlag}};var LM=class extends Zf{mergeNodes(t,n){let r=n.shift();for(let i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){let n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(let i of O(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}},AM=class extends Zf{constructor(t){super(),this.requiresSelectionId=t&&Ch(t)}run(t){t instanceof ea&&(this.requiresSelectionId&&(HM(t.parent)||t.parent instanceof yo||t.parent instanceof Ir)||(this.setModified(),t.remove()))}},VM=class extends Kf{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Ko&&(r=t.producedFields(),qC(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(let i of t.children)this.run(i,new Set([...n,...r]))}},NM=class extends Zf{constructor(){super()}run(t){t instanceof Mn&&!t.isRequired()&&(this.setModified(),t.remove())}},_M=class extends fs{run(t){if(!HM(t)&&!(t.numChildren()>1)){for(let n of t.children)if(n instanceof Ir)if(t instanceof Ir)this.setModified(),t.merge(n);else{if(WC(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}},kM=class extends fs{run(t){let n=[...t.children],r=t.children.filter(i=>i instanceof Ir);if(t.numChildren()>1&&r.length>=1){let i={},o=new Set;for(let a of r){let s=a.parse;for(let c of O(s))c in i?i[c]!==s[c]&&o.add(c):i[c]=s[c]}for(let a of o)delete i[a];if(!Ke(i)){this.setModified();let a=new Ir(t,i);for(let s of n){if(s instanceof Ir)for(let c of O(i))delete s.parse[c];t.removeChild(s),s.parent=a,s instanceof Ir&&O(s.parse).length===0&&s.remove()}}}}},TM=class extends fs{run(t){t instanceof Mn||t.numChildren()>0||t instanceof e2||t instanceof q1||(this.setModified(),t.remove())}},IM=class extends fs{run(t){let n=t.children.filter(i=>i instanceof Ko),r=n.pop();for(let i of n)this.setModified(),r.merge(i)}},FM=class extends fs{run(t){let n=t.children.filter(i=>i instanceof yo),r={};for(let i of n){let o=be(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(let i of O(r)){let o=r[i];if(o.length>1){let a=o.pop();for(let s of o)a.merge(s)&&(t.removeChild(s),s.parent=a,s.remove(),this.setModified())}}}},RM=class extends fs{constructor(t){super(),this.model=t}run(t){let n=!(HM(t)||t instanceof ls||t instanceof Ir||t instanceof ea),r=[],i=[];for(let o of t.children)o instanceof J2&&(n&&!WC(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){let o=r.pop();for(let a of r)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof J2?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){let o=i.pop();for(let a of i)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}},OM=class extends fs{run(t){let n=[...t.children];if(!Ka(n,a=>a instanceof Mn)||t.numChildren()<=1)return;let i=[],o;for(let a of n)if(a instanceof Mn){let s=a;for(;s.numChildren()===1;){let[c]=s.children;if(c instanceof Mn)s=c;else break}i.push(...s.children),o?(t.removeChild(a),a.parent=o.parent,o.parent.removeChild(o),o.parent=s,this.setModified()):o=s}else i.push(a);if(i.length){this.setModified();for(let a of i)a.parent.removeChild(a),a.parent=o}}};var ta=class e extends Le{clone(){return new e(null,fe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=zi(this.transform.groupby.concat(t),n=>n)}dependentFields(){let t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??K(t)}hash(){return`JoinAggregateTransform ${be(this.transform)}`}assemble(){let t=[],n=[],r=[];for(let o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);let i=this.transform.groupby;return x({type:"joinaggregate",as:r,ops:n,fields:t},i!==void 0?{groupby:i}:{})}};function Vke(e){return e.stack.stackBy.reduce((t,n)=>{let r=n.fieldDef,i=K(r);return i&&t.push(i),t},[])}function Nke(e){return F(e)&&e.every(t=>Q(t))&&e.length>1}var ds=class e extends Le{clone(){return new e(null,fe(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){let{stack:r,groupby:i,as:o,offset:a="zero"}=n,s=[],c=[];if(n.sort!==void 0)for(let f of n.sort)s.push(f.field),c.push(ct(f.order,"ascending"));let l={field:s,order:c},u;return Nke(o)?u=o:Q(o)?u=[o,`${o}_end`]:u=[`${n.stack}_start`,`${n.stack}_end`],new e(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:a,sort:l,facetby:[],as:u})}static makeFromEncoding(t,n){let r=n.stack,{encoding:i}=n;if(!r)return null;let{groupbyChannels:o,fieldChannel:a,offset:s,impute:c}=r,l=o.map(p=>{let h=i[p];return ii(h)}).filter(p=>!!p),u=Vke(n),f=n.encoding.order,d;if(F(f)||Y(f))d=ab(f);else{let p=Nb(f)?f.sort:a==="y"?"descending":"ascending";d=u.reduce((h,m)=>(h.field.push(m),h.order.push(p),h),{field:[],order:[]})}return new e(t,{dimensionFieldDefs:l,stackField:n.vgField(a),facetby:[],stackby:u,sort:d,offset:s,impute:c,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){let t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${be(this._stack)}`}getGroupbyFields(){let{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[K(i,{binSuffix:"mid"})]:[K(i,{}),K(i,{binSuffix:"end"})]:[K(i)]).flat():r??[]}assemble(){let t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:a,offset:s,impute:c,as:l}=this._stack;if(c)for(let u of r){let{bandPosition:f=.5,bin:d}=u;if(d){let p=K(u,{expr:"datum"}),h=K(u,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${p}+${1-f}*${h}`,as:K(u,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:K(u,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:l,offset:s}),t}};var kc=class e extends Le{clone(){return new e(null,fe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=zi(this.transform.groupby.concat(t),n=>n)}dependentFields(){let t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??K(t)}hash(){return`WindowTransform ${be(this.transform)}`}assemble(){let t=[],n=[],r=[],i=[];for(let f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);let o=this.transform.frame,a=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>hf(f)))return x({type:"joinaggregate",as:r,ops:n,fields:t},a!==void 0?{groupby:a}:{});let s=[],c=[];if(this.transform.sort!==void 0)for(let f of this.transform.sort)s.push(f.field),c.push(f.order??"ascending");let l={field:s,order:c},u=this.transform.ignorePeers;return x(x(x({type:"window",params:i,as:r,ops:n,fields:t,sort:l},u!==void 0?{ignorePeers:u}:{}),a!==void 0?{groupby:a}:{}),o!==void 0?{frame:o}:{})}};function _ke(e){function t(n){if(!(n instanceof e2)){let r=n.clone();if(r instanceof Mn){let i=Eh+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof yo||r instanceof ds||r instanceof kc||r instanceof ta)&&r.addDimensions(e.fields);for(let i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function PM(e){if(e instanceof e2)if(e.numChildren()===1&&!(e.children[0]instanceof Mn)){let t=e.children[0];(t instanceof yo||t instanceof ds||t instanceof kc||t instanceof ta)&&t.addDimensions(e.fields),t.swapWithParent(),PM(e)}else{let t=e.model.component.data.main;moe(t);let n=_ke(e),r=e.children.map(n).flat();for(let i of r)i.parent=t}else e.children.map(PM)}function moe(e){if(e instanceof Mn&&e.type===St.Main&&e.numChildren()===1){let t=e.children[0];t instanceof e2||(t.swapWithParent(),moe(e))}}var Eh="scale_",$M=5;function kF(e){for(let t of e){for(let n of t.children)if(n.parent!==t)return!1;if(!kF(t.children))return!1}return!0}function na(e,t){let n=!1;for(let r of t)n=e.optimize(r)||n;return n}function goe(e,t,n){let r=e.sources,i=!1;return i=na(new NM,r)||i,i=na(new AM(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=na(new TM,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=na(new _M,r)||i,i=na(new RM(t),r)||i,i=na(new VM,r)||i,i=na(new kM,r)||i,i=na(new FM,r)||i,i=na(new IM,r)||i,i=na(new LM,r)||i,i=na(new OM,r)||i),e.sources=r,i}function voe(e,t){kF(e.sources);let n=0,r=0;for(let i=0;i<$M&&goe(e,t,!0);i++)n++;e.sources.map(PM);for(let i=0;i<$M&&goe(e,t,!1);i++)r++;kF(e.sources),Math.max(n,r)===$M&&U(`Maximum optimization runs(${$M}) reached.`)}var $n=class e{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new e(()=>t(n))}};function RF(e){Et(e)?kke(e):Tke(e)}function kke(e){let t=e.component.scales;for(let n of O(t)){let r=Fke(e,n);if(t[n].setWithExplicit("domains",r),Oke(e,n),e.component.data.isFaceted){let o=e;for(;!Tr(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(let s of r.value)G2(s)&&(s.data=Eh+s.data.replace(Eh,""))}}}function Tke(e){for(let n of e.children)RF(n);let t=e.component.scales;for(let n of O(t)){let r,i=null;for(let o of e.children){let a=o.component.scales[n];if(a){r===void 0?r=a.getWithExplicit("domains"):r=U1(r,a.getWithExplicit("domains"),"domains","scale",FF);let s=a.get("selectionExtent");i&&s&&i.param!==s.param&&U(P.NEEDS_SAME_SELECTION),i=s}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Ike(e,t,n,r){if(e==="unaggregated"){let{valid:i,reason:o}=yoe(t,n);if(!i){U(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){let{valid:i}=yoe(t,n);if(i)return"unaggregated"}return e}function Fke(e,t){let n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Ike(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=k(x({},e.specifiedScales[t]),{domain:i})),t==="x"&&_t(r.x2)?_t(r.x)?U1(g4(n,i,e,"x"),g4(n,i,e,"x2"),"domain","scale",FF):g4(n,i,e,"x2"):t==="y"&&_t(r.y2)?_t(r.y)?U1(g4(n,i,e,"y"),g4(n,i,e,"y2"),"domain","scale",FF):g4(n,i,e,"y2"):g4(n,i,e,t)}function Rke(e,t,n){return e.map(r=>({signal:`{data: ${a0(r,{timeUnit:n,type:t})}}`}))}function TF(e,t,n){let r=nn(n)?.unit;return t==="temporal"||r?Rke(e,t,r):[e]}function g4(e,t,n,r){let{encoding:i,markDef:o,mark:a,config:s,stack:c}=n,l=_t(i[r]),{type:u}=l,f=l.timeUnit;if(hre(t)){let h=g4(e,void 0,n,r),m=TF(t.unionWith,u,f);return Qo([...m,...h.value])}else{if(se(t))return Qo([t]);if(t&&t!=="unaggregated"&&!LI(t))return Qo(TF(t,u,f))}if(c&&r===c.fieldChannel){if(c.offset==="normalize")return Ii([[0,1]]);let h=n.requestDataName(St.Main);return Ii([{data:h,field:n.vgField(r,{suffix:"start"})},{data:h,field:n.vgField(r,{suffix:"end"})}])}let d=Vr(r)&&Y(l)?Pke(n,r,e):void 0;if(ki(l)){let h=TF([l.datum],u,f);return Ii(h)}let p=l;if(t==="unaggregated"){let h=n.requestDataName(St.Main),{field:m}=l;return Ii([{data:h,field:K({field:m,aggregate:"min"})},{data:h,field:K({field:m,aggregate:"max"})}])}else if(rt(p.bin)){if(Ft(e))return e==="bin-ordinal"?Ii([]):Ii([{data:sf(d)?n.requestDataName(St.Main):n.requestDataName(St.Raw),field:n.vgField(r,rs(p,r)?{binSuffix:"range"}:{}),sort:d===!0||!ne(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{let{bin:h}=p;if(rt(h)){let m=Xf(n,p.field,h);return Ii([new $n(()=>{let g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Ii([{data:n.requestDataName(St.Main),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Ae(["time","utc"],e)){let h=i[Ar(r)];if(Vb(p,h,o,s)){let m=n.requestDataName(St.Main),g=$1({fieldDef:p,fieldDef2:h,markDef:o,config:s}),v=Cc(a)&&g!==.5&&wt(r);return Ii([{data:m,field:n.vgField(r,v?{suffix:h0}:{})},{data:m,field:n.vgField(r,{suffix:v?m0:"end"})}])}}return d?Ii([{data:sf(d)?n.requestDataName(St.Main):n.requestDataName(St.Raw),field:n.vgField(r),sort:d}]):Ii([{data:n.requestDataName(St.Main),field:n.vgField(r)}])}function IF(e,t){let{op:n,field:r,order:i}=e;return x(x({op:n??(t?"sum":o4)},r?{field:Kn(r)}:{}),i?{order:i}:{})}function Oke(e,t){let n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t)?.bin,o=LI(r)&&r,a=U2(i)&&mf(i.extent)&&i.extent;(o||a)&&n.set("selectionExtent",o??a,!0)}function Pke(e,t,n){if(!Ft(n))return;let r=e.fieldDef(t),i=r.sort;if(zb(i))return{op:"min",field:us(r,t),order:"ascending"};let{stack:o}=e,a=o?new Set([...o.groupbyFields,...o.stackBy.map(s=>s.fieldDef.field)]):void 0;if(kr(i)){let s=o&&!a.has(i.field);return IF(i,s)}else if(Db(i)){let{encoding:s,order:c}=i,l=e.fieldDef(s),{aggregate:u,field:f}=l,d=o&&!a.has(f);if(ho(u)||qo(u))return IF({field:K(l),order:c},d);if(hf(u)||!u)return IF({op:u,field:f,order:c},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ae(["ascending",void 0],i))return!0}}function yoe(e,t){let{aggregate:n,type:r}=e;return n?Q(n)&&!kne.has(n)?{valid:!1,reason:P.unaggregateDomainWithNonSharedDomainOp(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:P.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:P.unaggregateDomainHasNoEffectForRawField(e)}}function FF(e,t,n,r){return e.explicit&&t.explicit&&U(P.mergeConflictingDomainProperty(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function $ke(e){let t=zi(e.map(a=>{if(G2(a)){let s=a,{sort:c}=s;return ie(s,["sort"])}return a}),be),n=zi(e.map(a=>{if(G2(a)){let s=a.sort;return s!==void 0&&!sf(s)&&("op"in s&&s.op==="count"&&delete s.field,s.order==="ascending"&&delete s.order),s}}).filter(a=>a!==void 0),be);if(t.length===0)return;if(t.length===1){let a=e[0];if(G2(a)&&n.length>0){let s=n[0];if(n.length>1){U(P.MORE_THAN_ONE_SORT);let c=n.filter(l=>ne(l)&&"op"in l&&l.op!=="min");n.every(l=>ne(l)&&"op"in l)&&c.length===1?s=c[0]:s=!0}else if(ne(s)&&"field"in s){let c=s.field;a.field===c&&(s=s.order?{order:s.order}:!0)}return k(x({},a),{sort:s})}return a}let r=zi(n.map(a=>sf(a)||!("op"in a)||Q(a.op)&&a.op in Vne?a:(U(P.domainSortDropped(a)),!0)),be),i;r.length===1?i=r[0]:r.length>1&&(U(P.MORE_THAN_ONE_SORT),i=!0);let o=zi(e.map(a=>G2(a)?a.data:null),a=>a);return o.length===1&&o[0]!==null?x({data:o[0],fields:t.map(s=>s.field)},i?{sort:i}:{}):x({fields:t},i?{sort:i}:{})}function Qf(e){if(G2(e)&&Q(e.field))return e.field;if(Tne(e)){let t;for(let n of e.fields)if(G2(n)&&Q(n.field)){if(!t)t=n.field;else if(t!==n.field)return U(P.FACETED_INDEPENDENT_DIFFERENT_SOURCES),t}return U(P.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),t}else if(Ine(e)){U(P.FACETED_INDEPENDENT_SAME_SOURCE);let t=e.fields[0];return Q(t)?t:void 0}}function p4(e,t){let r=e.component.scales[t].get("domains").map(i=>(G2(i)&&(i.data=e.lookupDataSource(i.data)),i));return $ke(r)}function OF(e){return Zo(e)||Yf(e)?e.children.reduce((t,n)=>t.concat(OF(n)),xoe(e)):xoe(e)}function xoe(e){return O(e.component.scales).reduce((t,n)=>{let r=e.component.scales[n];if(r.merged)return t;let i=r.combine(),m=i,{name:o,type:a,selectionExtent:s,domains:c,range:l,reverse:u}=m,f=ie(m,["name","type","selectionExtent","domains","range","reverse"]),d=Bke(i.range,o,n,e),p=p4(e,n),h=s?u1e(e,s,r,p):null;return t.push(x(x(k(x(x({name:o,type:a},p?{domain:p}:{}),h?{domainRaw:h}:{}),{range:d}),u!==void 0?{reverse:u}:{}),f)),t},[])}function Bke(e,t,n,r){if(wt(n)){if(Ni(e))return{step:{signal:`${t}_step`}}}else if(ne(e)&&G2(e))return k(x({},e),{data:r.lookupDataSource(e.data)});return e}var Dh=class extends Ti{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:Ka(this.get("domains"),t=>F(t)&&t.length===2&&Be(t[0])&&t[0]<=0&&Be(t[1])&&t[1]>=0)}};var Uke=["range","scheme"];function woe(e){let t=e.component.scales;for(let n of r4){let r=t[n];if(!r)continue;let i=jke(n,e);r.setWithExplicit("range",i)}}function Coe(e,t){let n=e.fieldDef(t);if(n?.bin){let{bin:r,field:i}=n,o=Cn(t),a=e.getName(o);if(ne(r)&&r.binned&&r.step!==void 0)return new $n(()=>{let s=e.scaleName(t),c=`(domain("${s}")[1] - domain("${s}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${c})`});if(rt(r)){let s=Xf(e,i,r);return new $n(()=>{let c=e.getSignalName(s),l=`(${c}.stop - ${c}.start) / ${c}.step`;return`${e.getSignalName(a)} / (${l})`})}}}function jke(e,t){let n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(let f of Uke)if(n[f]!==void 0){let d=Zp(o,f),p=xb(e,f);if(!d)U(P.scalePropertyNotWorkWithScaleType(o,f,e));else if(p)U(p);else switch(f){case"range":{let h=n.range;if(F(h)){if(wt(e))return Qo(h.map(m=>{if(m==="width"||m==="height"){let g=t.getName(m),v=t.getSignalName.bind(t);return $n.fromName(v,g)}return m}))}else if(ne(h))return Qo({data:t.requestDataName(St.Main),field:h.field,sort:{op:"min",field:t.vgField(e)}});return Qo(h)}case"scheme":return Qo(Gke(n[f]))}}let a=e===Mt||e==="xOffset"?"width":"height",s=r[a];if(B1(s)){if(wt(e))if(Ft(o)){let f=Eoe(s,t,e);if(f)return Qo({step:f})}else U(P.stepDropped(a));else if(yc(e)){let f=e===jo?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){let h=Doe(s,o);if(h)return Qo(h)}}}let{rangeMin:c,rangeMax:l}=n,u=qke(e,t);return(c!==void 0||l!==void 0)&&Zp(o,"rangeMin")&&F(u)&&u.length===2?Qo([c??u[0],l??u[1]]):Ii(u)}function Gke(e){return pre(e)?x({scheme:e.name},_n(e,["name"])):{scheme:e}}function Soe(e,t,n,{center:r}={}){let i=Cn(e),o=t.getName(i),a=t.getSignalName.bind(t);return e===en&&Tn(n)?r?[$n.fromName(s=>`${a(s)}/2`,o),$n.fromName(s=>`-${a(s)}/2`,o)]:[$n.fromName(a,o),0]:r?[$n.fromName(s=>`-${a(s)}/2`,o),$n.fromName(s=>`${a(s)}/2`,o)]:[0,$n.fromName(a,o)]}function qke(e,t){let{size:n,config:r,mark:i,encoding:o}=t,{type:a}=_t(o[e]),c=t.getScaleComponent(e).get("type"),{domain:l,domainMid:u}=t.specifiedScales[e];switch(e){case Mt:case en:{if(Ae(["point","band"],c)){let f=zoe(e,n,r.view);if(B1(f))return{step:Eoe(f,t,e)}}return Soe(e,t,c)}case jo:case Za:return Wke(e,t,c);case O1:{let f=t.component.scales[e].get("zero"),d=Hoe(i,f,r),p=Qke(i,n,t,r);return xc(c)?Xke(d,p,Yke(c,r,l,e)):[d,p]}case Jr:return[0,Math.PI*2];case B2:return[0,360];case Hi:return[0,new $n(()=>{let f=t.getSignalName("width"),d=t.getSignalName("height");return`min(${f},${d})/2`})];case uo:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case fo:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case xn:return"symbol";case kn:case Ai:case Vi:return c==="ordinal"?a==="nominal"?"category":"ordinal":u!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case c1:case co:case lo:return[r.scale.minOpacity,r.scale.maxOpacity]}}function Eoe(e,t,n){let{encoding:r}=t,i=t.getScaleComponent(n),o=pf(n),a=r[o];if(tF({step:e,offsetIsDiscrete:_e(a)&&yb(a.type)})==="offset"&&UI(r,o)){let c=t.getScaleComponent(o),u=`domain('${t.scaleName(o)}').length`;if(c.get("type")==="band"){let d=c.get("paddingInner")??c.get("padding")??0,p=c.get("paddingOuter")??c.get("padding")??0;u=`bandspace(${u}, ${d}, ${p})`}let f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${u} / (1-${Pne(f)})`}}else return e.step}function Doe(e,t){if(tF({step:e,offsetIsDiscrete:Ft(t)})==="offset")return{step:e.step}}function Wke(e,t,n){let r=e===jo?"x":"y",i=t.getScaleComponent(r);if(!i)return Soe(r,t,n,{center:!0});let o=i.get("type"),a=t.scaleName(r),{markDef:s,config:c}=t;if(o==="band"){let l=zoe(r,t.size,t.config.view);if(B1(l)){let u=Doe(l,n);if(u)return u}return[0,{signal:`bandwidth('${a}')`}]}else{let l=t.encoding[r];if(Y(l)&&l.timeUnit){let u=lb(l.timeUnit,h=>`scale('${a}', ${h})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=$1({fieldDef:l,markDef:s,config:c})-.5,p=d!==0?` + ${d}`:"";if(f){let h=se(f)?`${f.signal}/2`+p:`${f/2+d}`,m=se(f)?`(1 - ${f.signal}/2)`+p:`${1-f/2+d}`;return[{signal:`${h} * (${u})`},{signal:`${m} * (${u})`}]}return[0,{signal:u}]}return tI(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function zoe(e,t,n){let r=e===Mt?"width":"height",i=t[r];return i||Nf(n,r)}function Yke(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&F(n)?n.length+1:(U(P.domainRequiredForThresholdScale(r)),3)}}function Xke(e,t,n){let r=()=>{let i=l1(t),o=l1(e),a=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${a}, ${a})`};return se(t)?new $n(r):{signal:r()}}function Hoe(e,t,n){if(t)return se(t)?{signal:`${t.signal} ? 0 : ${Hoe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(P.incompatibleChannel("size",e))}var boe=.95;function Qke(e,t,n,r){let i={x:Coe(n,"x"),y:Coe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;let o=Moe(t,i,r.view);return Be(o)?o-1:new $n(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;let o=Moe(t,i,r.view);return Be(o)?Math.pow(boe*o,2):new $n(()=>`pow(${boe} * ${o.signal}, 2)`)}}throw new Error(P.incompatibleChannel("size",e))}function Moe(e,t,n){let r=B1(e.width)?e.width.step:d0(n,"width"),i=B1(e.height)?e.height.step:d0(n,"height");return t.x||t.y?new $n(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function PF(e,t){Et(e)?Kke(e,t):Aoe(e,t)}function Kke(e,t){let n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(let s of O(n)){let c=a[s],l=n[s],u=e.getScaleComponent(s),f=_t(i[s]),d=c[t],p=u.get("type"),h=u.get("padding"),m=u.get("paddingInner"),g=Zp(p,t),v=xb(s,t);if(d!==void 0&&(g?v&&U(v):U(P.scalePropertyNotWorkWithScaleType(p,t,s))),g&&v===void 0)if(d!==void 0){let y=f.timeUnit,C=f.type;switch(t){case"domainMax":case"domainMin":Wo(c[t])||C==="temporal"||y?l.set(t,{signal:a0(c[t],{type:C,timeUnit:y})},!0):l.set(t,c[t],!0);break;default:l.copyKeyFromObject(t,c)}}else{let y=t in Loe?Loe[t]({model:e,channel:s,fieldOrDatumDef:f,scaleType:p,scalePadding:h,scalePaddingInner:m,domain:c.domain,domainMin:c.domainMin,domainMax:c.domainMax,markDef:o,config:r,hasNestedOffsetScale:Ib(i,s),hasSecondaryRangeChannel:!!i[Ar(s)]}):r.scale[t];y!==void 0&&l.set(t,y,!1)}}}var Loe={bins:({model:e,fieldOrDatumDef:t})=>Y(t)?Zke(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Jke(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>eTe(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>tTe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>nTe(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>rTe(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{let i=Y(e)?e.sort:void 0;return iTe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:a})=>oTe(e,t,n,r,i,o.scale,a)};function $F(e){Et(e)?woe(e):Aoe(e,"range")}function Aoe(e,t){let n=e.component.scales;for(let r of e.children)t==="range"?$F(r):PF(r,t);for(let r of O(n)){let i;for(let o of e.children){let a=o.component.scales[r];if(a){let s=a.getWithExplicit(t);i=U1(i,s,t,"scale",oM((c,l)=>{switch(t){case"range":return c.step&&l.step?c.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Zke(e,t){let n=t.bin;if(rt(n)){let r=Xf(e,t.field,n);return new $n(()=>e.getSignalName(r))}else if(tn(n)&&U2(n)&&n.step!==void 0)return{step:n.step}}function Jke(e,t){if(Ae([kn,Ai,Vi],e)&&t!=="nominal")return"hcl"}function eTe(e,t,n,r,i,o){if(!(ii(o)?.bin||F(n)||i!=null||r!=null||Ae([_r.TIME,_r.UTC],e)))return wt(t)?!0:void 0}function tTe(e,t,n,r,i,o){if(wt(e)){if(P1(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;let{type:a,orient:s}=i;if(a==="bar"&&!(Y(r)&&(r.bin||r.timeUnit))&&(s==="vertical"&&e==="x"||s==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===_r.POINT)return n.pointPadding}}function nTe(e,t,n,r,i,o=!1){if(e===void 0){if(wt(t)){let{bandPaddingInner:a,barBandPaddingInner:s,rectBandPaddingInner:c,bandWithNestedOffsetPaddingInner:l}=i;return o?l:ct(a,n==="bar"?s:c)}else if(yc(t)&&r===_r.BAND)return i.offsetBandPaddingInner}}function rTe(e,t,n,r,i,o=!1){if(e===void 0){if(wt(t)){let{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:s}=i;if(o)return s;if(n===_r.BAND)return ct(a,se(r)?{signal:`${r.signal}/2`}:r/2)}else if(yc(t)){if(n===_r.POINT)return .5;if(n===_r.BAND)return i.offsetBandPaddingOuter}}}function iTe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Tn(e)&&t==="descending"?se(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Tn(e)&&t==="descending")return!0}function oTe(e,t,n,r,i,o,a){if(!!n&&n!=="unaggregated"&&Tn(i)){if(F(n)){let c=n[0],l=n[n.length-1];if(Be(c)&&c<=0&&Be(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!xc(i))return!0;if(!(Y(t)&&t.bin)&&Ae([...pr,...wne],e)){let{orient:c,type:l}=r;return Ae(["bar","area","line","trail"],l)&&(c==="horizontal"&&e==="y"||c==="vertical"&&e==="x")?!1:Ae(["bar","area"],l)&&!a?!0:o?.zero}return!1}function Voe(e,t,n,r,i=!1){let o=aTe(t,n,r,i),{type:a}=e;return Vr(t)?a!==void 0?xre(t,a)?Y(n)&&!yre(a,n.type)?(U(P.scaleTypeNotWorkWithFieldDef(a,o)),o):a:(U(P.scaleTypeNotWorkWithChannel(t,a,o)),o):o:null}function aTe(e,t,n,r){switch(t.type){case"nominal":case"ordinal":{if(vc(e)||eb(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&U(P.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(wt(e)||yc(e)){if(Ae(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in JC)return"band";let i=n[Cn(e)];return ts(i)||Mc(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return vc(e)?"time":eb(e)==="discrete"?(U(P.discreteChannelCannotEncode(e,"temporal")),"ordinal"):Y(t)&&t.timeUnit&&nn(t.timeUnit).utc?"utc":"time";case"quantitative":return vc(e)?Y(t)&&rt(t.bin)?"bin-ordinal":"linear":eb(e)==="discrete"?(U(P.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(P.invalidFieldType(t.type))}function Noe(e,{ignoreRange:t}={}){_oe(e),RF(e);for(let n of vre)PF(e,n);t||$F(e)}function _oe(e){Et(e)?e.component.scales=sTe(e):e.component.scales=lTe(e)}function sTe(e){let{encoding:t,mark:n,markDef:r}=e,i={};for(let o of r4){let a=_t(t[o]);if(a&&n===bb&&o===xn&&a.type===Y2)continue;let s=a&&a.scale;if(a&&s!==null&&s!==!1){s??(s={});let c=Ib(t,o),l=Voe(s,o,a,r,c);i[o]=new Dh(e.scaleName(`${o}`,!0),{value:l,explicit:s.type===l})}}return i}var cTe=oM((e,t)=>zI(e)-zI(t));function lTe(e){var t;let n=e.component.scales={},r={},i=e.component.resolve;for(let o of e.children){_oe(o);for(let a of O(o.component.scales))if((t=i.scale)[a]??(t[a]=SM(a,e)),i.scale[a]==="shared"){let s=r[a],c=o.component.scales[a].getWithExplicit("type");s?cre(s.value,c.value)?r[a]=U1(s,c,"type","scale",cTe):(i.scale[a]="independent",delete r[a]):r[a]=c}}for(let o of O(r)){let a=e.scaleName(o,!0),s=r[o];n[o]=new Dh(a,s);for(let c of e.children){let l=c.component.scales[o];l&&(c.renameScale(l.get("name"),a),l.merged=!0)}}return n}var zh=class{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}};function Et(e){return e?.type==="unit"}function Tr(e){return e?.type==="facet"}function Yf(e){return e?.type==="concat"}function Zo(e){return e?.type==="layer"}var y0=class{constructor(t,n,r,i,o,a,s){this.type=n,this.parent=r,this.config=o,this.correctDataNames=c=>(c.from?.data&&(c.from.data=this.lookupDataSource(c.from.data)),c.from?.facet?.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c),this.parent=r,this.config=o,this.view=Zn(s),this.name=t.name??i,this.title=j2(t.title)?{text:t.title}:t.title?Zn(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new zh,this.projectionNameMap=r?r.projectionNameMap:new zh,this.signalNameMap=r?r.signalNameMap:new zh,this.data=t.data,this.description=t.description,this.transforms=Zie(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:gie(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:Sc(t)||r?.component.data.isFaceted&&t.data===void 0},layoutSize:new Ti,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:x({scale:{},axis:{},legend:{}},a?fe(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Noe(this)}parseProjection(){_F(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){VF(this)}assembleEncodeFromView(t){let o=t,{style:n}=o,r=ie(o,["style"]),i={};for(let a of O(r)){let s=r[a];s!==void 0&&(i[a]=it(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=it(this.description)),this.type==="unit"||this.type==="layer")?x({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n??{}):Ke(n)?void 0:n}assembleLayout(){if(!this.layout)return;let a=this.layout,{spacing:t}=a,n=ie(a,["spacing"]),{component:r,config:i}=this,o=Q1e(r.layoutHeaders,i);return x(x(x({padding:t},this.assembleDefaultLayout()),n),o?{titleBand:o}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){let{layoutHeaders:t}=this.component,n=[];for(let r of Lr)t[r].title&&n.push(q1e(this,r));for(let r of jf)n=n.concat(X1e(this,r));return n}assembleAxes(){return $1e(this.component.axes,this.config)}assembleLegends(){return zM(this)}assembleProjections(){return ooe(this)}assembleTitle(){let i=this.title??{},{encoding:t}=i,n=ie(i,["encoding"]),r=x(x(x({},rb(this.config.title).nonMarkTitleProperties),n),t?{encode:{update:t}}:{});if(r.text)return Ae(["unit","layer"],this.type)?Ae(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Ke(r)?void 0:r}assembleGroup(t=[]){let n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);let r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());let i=!this.parent||Tr(this.parent)?OF(this):[];i.length>0&&(n.scales=i);let o=this.assembleAxes();o.length>0&&(n.axes=o);let a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return ht((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(St[t].toLowerCase())}requestDataName(t){let n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Tr(this.parent)){let n=MM(t),r=n4(n),i=this.component.scales[r];if(i&&!i.merged){let o=i.get("type"),a=i.get("range");if(Ft(o)&&Ni(a)){let s=i.get("name"),c=p4(this,r),l=Qf(c);if(l){let u=K({aggregate:"distinct",field:l},{expr:"datum"});return{signal:zF(s,i,u)}}else return U(P.unknownField(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){let n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(KC(t)&&Vr(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");let n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(P.selectionNotFound(n));return r}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}},Jf=class extends y0{vgField(t,n={}){let r=this.fieldDef(t);if(r)return K(r,n)}reduceFieldDef(t,n){return Zre(this.getMapping(),(r,i,o)=>{let a=ii(i);return a?t(r,a,o):r},n)}forEachFieldDef(t,n){ch(this.getMapping(),(r,i)=>{let o=ii(r);o&&t(o,i)},n)}};var e8=class e extends Le{clone(){return new e(null,fe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=fe(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${be(this.transform)}`}assemble(){let i=this.transform,{density:t}=i,n=ie(i,["density"]),r=x({type:"kde",field:t},n);return this.transform.groupby&&(r.resolve="shared"),r}};var t8=class e extends Le{clone(){return new e(null,fe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=fe(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${be(this.transform)}`}assemble(){let{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}};var n8=class e extends Le{clone(){return new e(null,x({},this.filter))}constructor(t,n){super(t),this.filter=n}static make(t,n){let{config:r,mark:i,markDef:o}=n;if(Ge("invalid",o,r)!=="filter")return null;let s=n.reduceFieldDef((c,l,u)=>{let f=Vr(u)&&n.getScaleComponent(u);if(f){let d=f.get("type");Tn(d)&&l.aggregate!=="count"&&!_i(i)&&(c[l.field]=l)}return c},{});return O(s).length?new e(t,s):null}dependentFields(){return new Set(O(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${be(this.filter)}`}assemble(){let t=O(this.filter).reduce((n,r)=>{let i=this.filter[r],o=K(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):i.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}};var r8=class e extends Le{clone(){return new e(this.parent,fe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=fe(n);let{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,a)=>i[a]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${be(this.transform)}`}assemble(){let{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}};var i8=class e extends Le{clone(){return new e(null,fe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=fe(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${be(this.transform)}`}assemble(){let{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}};var o8=class e extends Le{clone(){return new e(null,fe(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(let i of[[ti,ei],[ni,Li]]){let o=i.map(a=>{let s=_t(n.encoding[a]);return Y(s)?s.field:ki(s)?{expr:`${s.datum}`}:Jn(s)?{expr:`${s.value}`}:void 0});(o[0]||o[1])&&(t=new e(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(xn)){let i=n.typedFieldDef(xn);i.type===Y2&&(t=new e(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){let t=(this.fields??[]).filter(Q);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${be(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],k(x(x({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}};var a8=class e extends Le{clone(){return new e(null,this.projection,fe(this.fields),fe(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(let r of[[ti,ei],[ni,Li]]){let i=r.map(a=>{let s=_t(n.encoding[a]);return Y(s)?s.field:ki(s)?{expr:`${s.datum}`}:Jn(s)?{expr:`${s.value}`}:void 0}),o=r[0]===ni?"2":"";(i[0]||i[1])&&(t=new e(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Q))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${be(this.fields)} ${be(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}};var x0=class e extends Le{clone(){return new e(null,fe(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){let{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new e(t,n)}static makeFromEncoding(t,n){let r=n.encoding,i=r.x,o=r.y;if(Y(i)&&Y(o)){let a=i.impute?i:o.impute?o:void 0;if(a===void 0)return;let s=i.impute?o:o.impute?i:void 0,{method:c,value:l,frame:u,keyvals:f}=a.impute,d=Rb(n.mark,r);return new e(t,x(x(x(x(x({impute:a.field,key:s.field},c?{method:c}:{}),l!==void 0?{value:l}:{}),u?{frame:u}:{}),f!==void 0?{keyvals:f}:{}),d.length?{groupby:d}:{}))}return null}hash(){return`Impute ${be(this.transform)}`}assemble(){let{impute:t,key:n,keyvals:r,method:i,groupby:o,value:a,frame:s=[null,null]}=this.transform,c=k(x(k(x({type:"impute",field:t,key:n},r?{keyvals:_ie(r)?this.processSequence(r):r}:{}),{method:"value"}),o?{groupby:o}:{}),{value:!i||i==="value"?a:null});if(i&&i!=="value"){let l=x({type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:s,ignorePeers:!1},o?{groupby:o}:{}),u={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[c,l,u]}else return[c]}};var s8=class e extends Le{clone(){return new e(null,fe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=fe(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${be(this.transform)}`}assemble(){let o=this.transform,{loess:t,on:n}=o,r=ie(o,["loess","on"]);return x({type:"loess",x:n,y:t},r)}};var c8=class e extends Le{clone(){return new e(null,fe(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){let o=n.component.data.sources,{from:a}=r,s=null;if(kie(a)){let c=BF(a.data,o);c||(c=new q1(a.data),o.push(c));let l=n.getName(`lookup_${i}`);s=new Mn(c,l,St.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=s}else if(Tie(a)){let c=a.param;r=x({as:c},r);let l;try{l=n.getSelectionComponent(ht(c),c)}catch{throw new Error(P.cannotLookupVariableParameter(c))}if(s=l.materialized,!s)throw new Error(P.noSameUnitLookup(c))}return new e(t,r,s.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?te(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${be({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=x({values:this.transform.from.fields},this.transform.as?{as:te(this.transform.as)}:{});else{let n=this.transform.as;Q(n)||(U(P.NO_FIELDS_NEEDS_AS),n="_lookup"),t={as:[n]}}return x(x({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}};var l8=class e extends Le{clone(){return new e(null,fe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=fe(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${be(this.transform)}`}assemble(){let i=this.transform,{quantile:t}=i,n=ie(i,["quantile"]);return x({type:"quantile",field:t},n)}};var u8=class e extends Le{clone(){return new e(null,fe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=fe(n);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${be(this.transform)}`}assemble(){let o=this.transform,{regression:t,on:n}=o,r=ie(o,["regression","on"]);return x({type:"regression",x:n,y:t},r)}};var f8=class e extends Le{clone(){return new e(null,fe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=zi((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${be(this.transform)}`}assemble(){let{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return x(x(x({type:"pivot",field:t,value:n},i!==void 0?{limit:i}:{}),o!==void 0?{op:o}:{}),r!==void 0?{groupby:r}:{})}};var d8=class e extends Le{clone(){return new e(null,fe(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${be(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}};function koe(e){let t=0;function n(r,i){if(r instanceof q1&&!r.isGenerator&&!Hc(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Ir&&(r.parent instanceof q1&&!i.source?(i.format=k(x({},i.format??{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof e2){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof h4||r instanceof m4||r instanceof n8||r instanceof ls||r instanceof v0||r instanceof a8||r instanceof yo||r instanceof c8||r instanceof kc||r instanceof ta||r instanceof i8||r instanceof r8||r instanceof e8||r instanceof s8||r instanceof l8||r instanceof u8||r instanceof ea||r instanceof d8||r instanceof f8||r instanceof t8)&&i.transform.push(r.assemble()),(r instanceof J2||r instanceof Ko||r instanceof x0||r instanceof ds||r instanceof o8)&&i.transform.push(...r.assemble()),r instanceof Mn&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Mn?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Mn&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(let a of r.children)n(a,{name:null,source:o,transform:[]});break}}}return n}function Toe(e){let t=[],n=koe(t);for(let r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Ioe(e,t){let n=[],r=koe(n),i=0;for(let a of e.sources){a.hasName()||(a.dataName=`source_${i++}`);let s=a.assemble();r(a,s)}for(let a of n)a.transform.length===0&&delete a.transform;let o=0;for(let[a,s]of n.entries())(s.transform??[]).length===0&&!s.source&&n.splice(o++,0,n.splice(a,1)[0]);for(let a of n)for(let s of a.transform??[])s.type==="lookup"&&(s.from=e.outputNodes[s.from].getSource());for(let a of n)a.name in t&&(a.values=t[a.name]);return n}function uTe(e){return e==="top"||e==="left"||se(e)?"header":"footer"}function Roe(e){for(let t of Lr)fTe(e,t);Foe(e,"x"),Foe(e,"y")}function fTe(e,t){let{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){let a=n[t],s=_c("title",null,r,t),c=as(a,r,{allowDisabling:!0,includeDefault:s===void 0||!!s});i.component.layoutHeaders[t].title&&(c=F(c)?c.join(", "):c,c+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);let l=_c("labelOrient",a.header,r,t),u=a.header!==null?ct(a.header?.labels,r.header.labels,!0):!1,f=Ae(["bottom","right"],l)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?c:null,facetFieldDef:a,[f]:t==="facet"?[]:[Ooe(e,t,u)]}}}function Ooe(e,t,n){let r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Foe(e,t){let{child:n}=e;if(n.component.axes[t]){let{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Wf(i,t),i.axis[t]==="shared"){let o=t==="x"?"column":"row",a=r[o];for(let s of n.component.axes[t]){let c=uTe(s.get("orient"));a[c]??(a[c]=[Ooe(e,o,!1)]);let l=Bf(s,"main",e.config,{header:!0});l&&a[c][0].axes.push(l),s.mainExtracted=!0}}}}function Poe(e){UM(e),BM(e,"width"),BM(e,"height")}function $oe(e){UM(e);let t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";BM(e,t),BM(e,n)}function UM(e){for(let t of e.children)t.parseLayoutSize()}function BM(e,t){let n=MM(t),r=n4(n),i=e.component.resolve,o=e.component.layoutSize,a;for(let s of e.children){let c=s.component.layoutSize.getWithExplicit(n),l=i.scale[r]??SM(r,e);if(l==="independent"&&c.value==="step"){a=void 0;break}if(a){if(l==="independent"&&a.value!==c.value){a=void 0;break}a=U1(a,c,n,"")}else a=c}if(a){for(let s of e.children)e.renameSignal(s.getName(n),e.getName(t)),s.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function Boe(e){let{size:t,component:n}=e;for(let r of pr){let i=Cn(r);if(t[i]){let o=t[i];n.layoutSize.set(i,B1(o)?"step":o,!0)}else{let o=dTe(e,i);n.layoutSize.set(i,o,!1)}}}function dTe(e,t){let n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){let o=i.get("type"),a=i.get("range");if(Ft(o)){let s=Nf(r.view,t);return Ni(a)||B1(s)?"step":s}else return ph(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return ph(r.view,t);{let o=Nf(r.view,t);return B1(o)?o.step:o}}}function jM(e,t,n){return K(t,x({suffix:`by_${K(e)}`},n??{}))}var GM=class e extends Jf{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=p8(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!os(t))return{facet:this.initFacetFieldDef(t,"facet")};let n=O(t),r={};for(let i of n){if(![I1,F1].includes(i)){U(P.incompatibleChannel(i,"facet"));break}let o=t[i];if(o.field===void 0){U(P.emptyFieldDef(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){let r=sh(t,n);return r.header?r.header=Zn(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=v4(this),this.child.parseData()}parseLayoutSize(){UM(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Roe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){let t={};for(let n of Lr)for(let r of Gf){let i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:a}=i;if(a){let s=_c("titleOrient",a.header,this.config,n);if(["right","bottom"].includes(s)){let c=Uf(n,s);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[c]="end"}}if(o?.[0]){let s=n==="row"?"height":"width",c=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(s)&&(t[c]??(t[c]={}),t[c][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){let{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0,i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),k(x(x({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof e))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof e?x(x({},this.channelHasField("column")?{encode:{update:{columns:{field:K(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){let t=[],n=[],r=[];if(this.child instanceof e){if(this.child.channelHasField("column")){let i=K(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(let i of pr){let o=this.child.component.scales[i];if(o&&!o.merged){let a=o.get("type"),s=o.get("range");if(Ft(a)&&Ni(s)){let c=p4(this.child,i),l=Qf(c);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):U(P.unknownField(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){let{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:a,as:s}=this.getCardinalityAggregateForChild(),c=[];for(let u of Lr){let f=this.facet[u];if(f){c.push(K(f));let{bin:d,sort:p}=f;if(rt(d)&&c.push(K(f,{binSuffix:"end"})),kr(p)){let{field:h,op:m=o4}=p,g=jM(f,p);r&&i?(o.push(g),a.push("max"),s.push(g)):(o.push(h),a.push(m),s.push(g))}else if(F(p)){let h=us(f,u);o.push(h),a.push("max"),s.push(h)}}}let l=!!r&&!!i;return x({name:t,data:n,groupby:c},l||o.length>0?{aggregate:x(x({},l?{cross:l}:{}),o.length?{fields:o,ops:a,as:s}:{})}:{})}facetSortFields(t){let{facet:n}=this,r=n[t];return r?kr(r.sort)?[jM(r,r.sort,{expr:"datum"})]:F(r.sort)?[us(r,t,{expr:"datum"})]:[K(r,{expr:"datum"})]:[]}facetSortOrder(t){let{facet:n}=this,r=n[t];if(r){let{sort:i}=r;return[(kr(i)?i.order:!F(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){let{facet:t,config:n}=this;if(t.facet)return CM(t.facet,"facet",n);let r={row:["top","bottom"],column:["left","right"]};for(let i of jf)if(t[i]){let o=_c("labelOrient",t[i]?.header,n,i);if(r[i].includes(o))return CM(t[i],i,n)}}assembleMarks(){let{child:t}=this,n=this.component.data.facetRoot,r=Toe(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[x(x(x(k(x(x({name:this.getName("cell"),type:"group"},o?{title:o}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:Lr.map(c=>this.facetSortFields(c)).flat(),order:Lr.map(c=>this.facetSortOrder(c)).flat()}}),r.length>0?{data:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup(a1e(this,[])))]}getMapping(){return this.facet}};function Uoe(e,t){let{row:n,column:r}=t;if(n&&r){let i=null;for(let o of[n,r])if(kr(o.sort)){let{field:a,op:s=o4}=o.sort;e=i=new ta(e,{joinaggregate:[{op:s,field:a,as:jM(o,o.sort,{forAs:!0})}],groupby:[K(o)]})}return i}return null}function BF(e,t){for(let n of t){let r=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;let i=e.format?.mesh,o=r.format?.feature;if(i&&o)continue;let a=e.format?.feature;if((a||o)&&a!==o)continue;let s=r.format?.mesh;if(!((i||s)&&i!==s)){if(p0(e)&&p0(r)){if(Hr(e.values,r.values))return n}else if(Hc(e)&&Hc(r)){if(e.url===r.url)return n}else if(sM(e)&&e.name===n.dataName)return n}}return null}function pTe(e,t){if(e.data||!e.parent){if(e.data===null){let r=new q1({values:[]});return t.push(r),r}let n=BF(e.data,t);if(n)return Q2(e.data)||(n.data.format=nI({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{let r=new q1(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function hTe(e,t,n){let r=0;for(let i of t.transforms){let o,a;if(Gie(i))a=e=new v0(e,i),o="derived";else if(hh(i)){let s=foe(i);a=e=Ir.makeWithAncestors(e,{},s,n)??e,e=new ls(e,t,i.filter)}else if(nM(i))a=e=J2.makeFromTransform(e,i,t),o="number";else if(Wie(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new Ir(e,{[i.field]:o}),n.set(i.field,o,!1)),a=e=Ko.makeFromTransform(e,i);else if(Yie(i))a=e=yo.makeFromTransform(e,i),o="number",Ch(t)&&(e=new ea(e));else if(tM(i))a=e=c8.make(e,t,i,r++),o="derived";else if(Bie(i))a=e=new kc(e,i),o="number";else if(Uie(i))a=e=new ta(e,i),o="number";else if(Xie(i))a=e=ds.makeFromTransform(e,i),o="derived";else if(Qie(i))a=e=new i8(e,i),o="derived";else if(Kie(i))a=e=new t8(e,i),o="derived";else if(jie(i))a=e=new r8(e,i),o="derived";else if(Iie(i))a=e=new f8(e,i),o="derived";else if($ie(i))e=new d8(e,i);else if(qie(i))a=e=x0.makeFromTransform(e,i),o="derived";else if(Fie(i))a=e=new e8(e,i),o="derived";else if(Rie(i))a=e=new l8(e,i),o="derived";else if(Oie(i))a=e=new u8(e,i),o="derived";else if(Pie(i))a=e=new s8(e,i),o="derived";else{U(P.invalidTransformIgnored(i));continue}if(a&&o!==void 0)for(let s of a.producedFields()??[])n.set(s,o,!1)}return e}function v4(e){let t=pTe(e,e.component.data.sources),{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,a=!(i&&(Q2(i)||Hc(i)||p0(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new aM;Q2(i)?(lF(i)?t=new m4(t,i.sequence):mh(i)&&(t=new h4(t,i.graticule)),a.parseNothing=!0):i?.format?.parse===null&&(a.parseNothing=!0),t=Ir.makeExplicit(t,e,a)??t,t=new ea(t);let s=e.parent&&Zo(e.parent);(Et(e)||Tr(e))&&s&&(t=J2.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=hTe(t,e,a));let c=poe(e),l=doe(e);t=Ir.makeWithAncestors(t,{},x(x({},c),l),a)??t,Et(e)&&(t=o8.parseAll(t,e),t=a8.parseAll(t,e)),(Et(e)||Tr(e))&&(s||(t=J2.makeFromEncoding(t,e)??t),t=Ko.makeFromEncoding(t,e)??t,t=v0.parseAllForSortIndex(t,e));let u=e.getDataName(St.Raw),f=new Mn(t,u,St.Raw,r);if(n[u]=f,t=f,Et(e)){let m=yo.makeFromEncoding(t,e);m&&(t=m,Ch(e)&&(t=new ea(t))),t=x0.makeFromEncoding(t,e)??t,t=ds.makeFromEncoding(t,e)??t}Et(e)&&(t=n8.make(t,e)??t);let d=e.getDataName(St.Main),p=new Mn(t,d,St.Main,r);n[d]=p,t=p,Et(e)&&P1e(e,p);let h=null;if(Tr(e)){let m=e.getName("facet");t=Uoe(t,e.facet)??t,h=new e2(t,e,m,p.getSource()),n[m]=h}return k(x({},e.component.data),{outputNodes:n,outputNodeRefCounts:r,raw:f,main:p,facetRoot:h,ancestorParse:a})}var qM=class extends y0{constructor(t,n,r,i){super(t,"concat",n,r,i,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&U(P.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(t).map((o,a)=>p8(o,this,this.getName(`concat_${a}`),void 0,i))}parseData(){this.component.data=v4(this);for(let t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(let t of this.children){t.parseSelections();for(let n of O(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(let t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(let t of this.children)t.parseAxesAndHeaders()}getChildren(t){return l4(t)?t.vconcat:Vf(t)?t.hconcat:t.concat}parseLayoutSize(){$oe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){let t=qf(this);for(let n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{let n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return x(x(x(x({type:"group",name:t.getName("group")},n?{title:n}:{}),r?{style:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){let t=this.layout.columns;return k(x({},t!=null?{columns:t}:{}),{bounds:"full",align:"each"})}};function mTe(e){return e===!1||e===null}var gTe=k(x({disable:1,gridScale:1,scale:1},PI),{labelExpr:1,encode:1}),UF=O(gTe),WM=class e extends Ti{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new e(fe(this.explicit),fe(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!mTe(this.get(t))}hasOrientSignalRef(){return se(this.explicit.orient)}};function joe(e,t,n){let{encoding:r,config:i}=e,o=_t(r[t])??_t(r[Ar(t)]),a=e.axis(t)||{},{format:s,formatType:c}=a;if(is(c))return x({text:go({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:c,config:i})},n);if(s===void 0&&c===void 0&&i.customFormatTypes){if(bc(o)==="quantitative"){if(Mc(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return x({text:go({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i})},n);if(i.numberFormatType)return x({text:go({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i})},n)}if(bc(o)==="temporal"&&i.timeFormatType&&Y(o)&&!o.timeUnit)return x({text:go({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i})},n)}return n}function Goe(e){return pr.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[wTe(n,e)]),t),{})}var yTe={bottom:"top",top:"bottom",left:"right",right:"left"};function qoe(e){let{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(let i of e.children){i.parseAxesAndHeaders();for(let o of O(i.component.axes))n.axis[o]=Wf(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=xTe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(let i of pr){for(let o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(let a of o.component.axes[i]){let{value:s,explicit:c}=a.getWithExplicit("orient");if(!se(s)){if(r[s]>0&&!c){let l=yTe[s];r[s]>r[l]&&a.set("orient",l,!1)}r[s]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(let[o,a]of(t[i]||[]).entries())o>0&&a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function xTe(e,t){if(e){if(e.length!==t.length)return;let n=e.length;for(let r=0;r<n;r++){let i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){let a=i.getWithExplicit("orient"),s=o.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;e[r]=CTe(i,o)}}}else return t.map(n=>n.clone());return e}function CTe(e,t){for(let n of UF){let r=U1(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return sb(i,o);case"gridScale":return{explicit:i.explicit,value:ct(i.value,o.value)}}return Tf(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function bTe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(se(n.labelAngle)?n.labelAngle:e4(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===DF(r,i))return!0}return e===n[t]}var MTe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function wTe(e,t){let n=t.axis(e),r=new WM,i=_t(t.encoding[e]),{mark:o,config:a}=t,s=n?.orient||a[e==="x"?"axisX":"axisY"]?.orient||a.axis?.orient||G1e(e),c=t.getScaleComponent(e).get("type"),l=U1e(e,c,s,t.config),u=n!==void 0?!n:bh("disable",a.style,n?.style,l).configValue;if(r.set("disable",u,n!==void 0),u)return r;n=n||{};let f=j1e(i,n,e,a.style,l),d=Eb(n.formatType,i,c),p=Sb(i,i.type,n.format,n.formatType,a,!0),h={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:c,orient:s,labelAngle:f,format:p,formatType:d,mark:o,config:a};for(let v of UF){let y=v in wF?wF[v](h):$I(v)?n[v]:void 0,C=y!==void 0,b=bTe(y,v,n,t,e);if(C&&b)r.set(v,y,b);else{let{configValue:M=void 0,configFrom:S=void 0}=$I(v)&&v!=="values"?bh(v,a.style,n.style,l):{},w=M!==void 0;C&&!w?r.set(v,y,b):(S!=="vgAxisConfig"||MTe.has(v)&&w||Ec(M)||se(M))&&r.set(v,M,!1)}}let m=n.encoding??{},g=Tb.reduce((v,y)=>{if(!r.hasAxisPart(y))return v;let C=wM(m[y]??{},t),b=y==="labels"?joe(t,e,C):C;return b!==void 0&&!Ke(b)&&(v[y]={update:b}),v},{});return Ke(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Woe({encoding:e,size:t}){for(let n of pr){let r=Cn(n);B1(t[r])&&X2(e[n])&&(delete t[r],U(P.stepDropped(r)))}return t}var Yoe={vgMark:"arc",encodeEntry:e=>x(x(x(x(x({},gn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),mn("x",e,{defaultPos:"mid"})),mn("y",e,{defaultPos:"mid"})),G1(e,"radius")),G1(e,"theta"))};var Xoe={vgMark:"area",encodeEntry:e=>x(x(x(x({},gn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),d4("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"})),d4("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"})),Pf(e))};var Qoe={vgMark:"rect",encodeEntry:e=>x(x(x({},gn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),G1(e,"x")),G1(e,"y"))};var Koe={vgMark:"shape",encodeEntry:e=>x({},gn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{let{encoding:t}=e,n=t.shape;return[x({type:"geoshape",projection:e.projectionName()},n&&Y(n)&&n.type===Y2?{field:K(n,{expr:"datum"})}:{})]}};var Zoe={vgMark:"image",encodeEntry:e=>x(x(x(x({},gn(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),G1(e,"x")),G1(e,"y")),f4(e,"url"))};var Joe={vgMark:"line",encodeEntry:e=>x(x(x(x(x({},gn(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),mn("x",e,{defaultPos:"mid"})),mn("y",e,{defaultPos:"mid"})),Ut("size",e,{vgChannel:"strokeWidth"})),Pf(e))},e2e={vgMark:"trail",encodeEntry:e=>x(x(x(x(x({},gn(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),mn("x",e,{defaultPos:"mid"})),mn("y",e,{defaultPos:"mid"})),Ut("size",e)),Pf(e))};function jF(e,t){let{config:n}=e;return x(x(x(x(x(x({},gn(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),mn("x",e,{defaultPos:"mid"})),mn("y",e,{defaultPos:"mid"})),Ut("size",e)),Ut("angle",e)),STe(e,n,t))}function STe(e,t,n){return n?{shape:{value:n}}:Ut("shape",e)}var t2e={vgMark:"symbol",encodeEntry:e=>jF(e)},n2e={vgMark:"symbol",encodeEntry:e=>jF(e,"circle")},r2e={vgMark:"symbol",encodeEntry:e=>jF(e,"square")};var i2e={vgMark:"rect",encodeEntry:e=>x(x(x({},gn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),G1(e,"x")),G1(e,"y"))};var o2e={vgMark:"rule",encodeEntry:e=>{let{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:x(x(x(x({},gn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),d4("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),d4("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),Ut("size",e,{vgChannel:"strokeWidth"}))}};var a2e={vgMark:"text",encodeEntry:e=>{let{config:t,encoding:n}=e;return x(x(x(x(x(x(x(x(x(x({},gn(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),mn("x",e,{defaultPos:"mid"})),mn("y",e,{defaultPos:"mid"})),f4(e)),Ut("size",e,{vgChannel:"fontSize"})),Ut("angle",e)),pM("align",ETe(e.markDef,n,t))),pM("baseline",DTe(e.markDef,n,t))),mn("radius",e,{defaultPos:null})),mn("theta",e,{defaultPos:null}))}};function ETe(e,t,n){if(Ge("align",e,n)===void 0)return"center"}function DTe(e,t,n){if(Ge("baseline",e,n)===void 0)return"middle"}var s2e={vgMark:"rect",encodeEntry:e=>{let{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",o=r==="horizontal"?"height":"width";return k(x(x(x(x({},gn(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),mn("x",e,{defaultPos:"mid",vgChannel:"xc"})),mn("y",e,{defaultPos:"mid",vgChannel:"yc"})),Ut("size",e,{defaultValue:zTe(e),vgChannel:i})),{[o]:it(Ge("thickness",n,t))})}};function zTe(e){let{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",o=e.getScaleComponent(r==="horizontal"?"x":"y"),a=Ge("size",n,t,{vgChannel:i})??t.tick.bandSize;if(a!==void 0)return a;{let s=o?o.get("range"):void 0;return s&&Ni(s)&&Be(s.step)?s.step*3/4:d0(t.view,i)*3/4}}var YM={arc:Yoe,area:Xoe,bar:Qoe,circle:n2e,geoshape:Koe,image:Zoe,line:Joe,point:t2e,rect:i2e,rule:o2e,square:r2e,text:a2e,tick:s2e,trail:e2e};function u2e(e){if(Ae([l0,s0,Mre],e.mark)){let t=Rb(e.mark,e.encoding);if(t.length>0)return HTe(e,t)}else if(e.mark===c0){let t=ib.some(n=>Ge(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return LTe(e)}return GF(e)}var c2e="faceted_path_";function HTe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:c2e+e.requestDataName(St.Main),data:e.requestDataName(St.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:GF(e,{fromPrefix:c2e})}]}var l2e="stack_group_";function LTe(e){let[t]=GF(e,{fromPrefix:l2e}),n=e.scaleName(e.stack.fieldChannel),r=(l={})=>e.vgField(e.stack.fieldChannel,l),i=(l,u)=>{let f=[r({prefix:"min",suffix:"start",expr:u}),r({prefix:"max",suffix:"start",expr:u}),r({prefix:"min",suffix:"end",expr:u}),r({prefix:"max",suffix:"end",expr:u})];return`${l}(${f.map(d=>`scale('${n}',${d})`).join(",")})`},o,a;e.stack.fieldChannel==="x"?(o=k(x({},mc(t.encode.update,["y","yc","y2","height",...ib])),{x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}}),a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update=k(x({},_n(t.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(o=k(x({},mc(t.encode.update,["x","xc","x2","width"])),{y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}}),a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update=k(x({},_n(t.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(let l of ib){let u=mo(l,e.markDef,e.config);t.encode.update[l]?(o[l]=t.encode.update[l],delete t.encode.update[l]):u&&(o[l]=it(u)),u&&(t.encode.update[l]={value:0})}let s=[];if(e.stack.groupbyChannels?.length>0)for(let l of e.stack.groupbyChannels){let u=e.fieldDef(l),f=K(u);f&&s.push(f),(u?.bin||u?.timeUnit)&&s.push(K(u,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((l,u)=>{if(t.encode.update[u])return k(x({},l),{[u]:t.encode.update[u]});{let f=mo(u,e.markDef,e.config);return f!==void 0?k(x({},l),{[u]:it(f)}):l}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(St.Main),name:l2e+e.requestDataName(St.Main),groupby:s,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}function ATe(e){let{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,a=t.order;if(!(!F(a)&&Jn(a)&&jC(a.value)||!a&&jC(Ge("order",i,o)))){if((F(a)||Y(a))&&!n)return ab(a,{expr:"datum"});if(_i(r)){let s=i.orient==="horizontal"?"y":"x",c=t[s];if(Y(c)){let l=c.sort;if(F(l))return{field:K(c,{prefix:s,suffix:"sort_index",expr:"datum"})};if(kr(l))return{field:K({aggregate:Hf(e.encoding)?l.op:void 0,field:l.field},{expr:"datum"})};if(Db(l)){let u=e.fieldDef(l.encoding);return{field:K(u,{expr:"datum"}),order:l.order}}else return l===null?void 0:{field:K(c,{binSuffix:e.stack?.impute?"mid":void 0,expr:"datum"})}}return}}}function GF(e,t={fromPrefix:""}){let{mark:n,markDef:r,encoding:i,config:o}=e,a=ct(r.clip,VTe(e),NTe(e)),s=vI(r),c=i.key,l=ATe(e),u=_Te(e),f=Ge("aria",r,o),d=YM[n].postEncodingTransform?YM[n].postEncodingTransform(e):null;return[x(k(x(x(x(x(x(x({name:e.getName("marks"),type:YM[n].vgMark},a?{clip:!0}:{}),s?{style:s}:{}),c?{key:c.field}:{}),l?{sort:l}:{}),u||{}),f===!1?{aria:f}:{}),{from:{data:t.fromPrefix+e.requestDataName(St.Main)},encode:{update:YM[n].encodeEntry(e)}}),d?{transform:d}:{})]}function VTe(e){let t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function NTe(e){let t=e.component.projection;return t&&!t.isFit?!0:void 0}function _Te(e){if(!e.component.selection)return null;let t=O(e.component.selection).length,n=t,r=e.parent;for(;r&&n===0;)n=O(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip}:null}var h8=class extends Jf{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,nF(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];let a=ri(t.mark)?x({},t.mark):{type:t.mark},s=a.type;a.filled===void 0&&(a.filled=Sie(a,o,{graticule:t.data&&mh(t.data)}));let c=this.encoding=Qre(t.encoding||{},s,a.filled,o);this.markDef=Qb(a,c,o),this.size=Woe({encoding:c,size:nF(t)?x(x(x({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):i}),this.stack=Xb(this.markDef,c),this.specifiedScales=this.initScales(s,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegends(c),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Af(l))}get hasProjection(){let{encoding:t}=this,n=this.mark===bb,r=t&&pne.some(i=>_e(t[i]));return n||r}scaleDomain(t){let n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return r4.reduce((r,i)=>{let o=_t(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){let{domain:n,range:r}=t,i=Zn(t);return F(n)&&(i.domain=n.map(Nr)),F(r)&&(i.range=r.map(Nr)),i}initAxes(t){return pr.reduce((n,r)=>{let i=t[r];if(_e(i)||r===Mt&&_e(t.x2)||r===en&&_e(t.y2)){let o=_e(i)?i.axis:void 0;n[r]=o&&this.initAxis(x({},o))}return n},{})}initAxis(t){let n=O(t),r={};for(let i of n){let o=t[i];r[i]=Ec(o)?ob(o):Nr(o)}return r}initLegends(t){return Ene.reduce((n,r)=>{let i=_t(t[r]);if(i&&zne(r)){let o=i.legend;n[r]=o&&Zn(o)}return n},{})}parseData(){this.component.data=v4(this)}parseLayoutSize(){Boe(this)}parseSelections(){this.component.selection=O1e(this,this.selection)}parseMarkGroup(){this.component.mark=u2e(this)}parseAxesAndHeaders(){this.component.axes=Goe(this)}assembleSelectionTopLevelSignals(t){return s1e(this,t)}assembleSignals(){return[...xM(this),...o1e(this,[])]}assembleSelectionData(t){return c1e(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return qf(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Zo(this.parent))&&(t=dF(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){let{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return cs(this.encoding,t)}fieldDef(t){let n=this.encoding[t];return ii(n)}typedFieldDef(t){let n=this.fieldDef(t);return bn(n)?n:null}};var XM=class e extends y0{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);let a=x(x(x({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((s,c)=>{if(zc(s))return new e(s,this,this.getName(`layer_${c}`),a,o);if(hr(s))return new h8(s,this,this.getName(`layer_${c}`),a,o);throw new Error(P.invalidSpec(s))})}parseData(){this.component.data=v4(this);for(let t of this.children)t.parseData()}parseLayoutSize(){Poe(this)}parseSelections(){this.component.selection={};for(let t of this.children){t.parseSelections();for(let n of O(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(let t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){qoe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),xM(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),qf(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){let t=new Set;for(let r of this.children)for(let i of te(r.assembleGroupStyle()))t.add(i);let n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(let n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return l1e(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),zM(this))}};function p8(e,t,n,r,i){if(Sc(e))return new GM(e,t,n,i);if(zc(e))return new XM(e,t,n,r,i);if(hr(e))return new h8(e,t,n,r,i);if(eF(e))return new qM(e,t,n,i);throw new Error(P.invalidSpec(e))}function f2e(e,t={}){t.logger&&Une(t.logger),t.fieldTitle&&FI(t.fieldTitle);try{let n=Yb(Ha(t.config,e.config)),r=iM(e,n),i=p8(r,null,"",void 0,n);return i.parse(),voe(i.component.data,i),{spec:TTe(i,kTe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&jne(),t.fieldTitle&&Wre()}}function kTe(e,t,n,r){let i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Q(t)&&(t={type:t}),i&&o&&r1e(t.type)){if(i==="step"&&o==="step")U(P.droppingFit()),t.type="pad";else if(i==="step"||o==="step"){let a=i==="step"?"width":"height";U(P.droppingFit(n4(a)));let s=a==="width"?"height":"width";t.type=i1e(s)}}return x(x(x({},O(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t}),cF(n,!1)),cF(e,!0))}function TTe(e,t,n={},r){let i=e.config?bie(e.config):void 0,o=[].concat(e.assembleSelectionData([]),Ioe(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),c=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0),u=e.assembleLayoutSignals();u=u.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);let p=t,{params:f}=p,d=ie(p,["params"]);return x(x(x(x(k(x(x(x(x(x({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),d),s?{title:s}:{}),c?{style:c}:{}),l?{encode:{update:l}}:{}),{data:o}),a.length>0?{projections:a}:{}),e.assembleGroup([...u,...e.assembleSelectionTopLevelSignals([]),...Wb(f)])),i?{config:i}:{}),r?{usermeta:r}:{})}var ITe=rne.version;function FTe(e){let[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var WF=FTe;var JF={};mr(JF,{carbong10:()=>kIe,carbong100:()=>IIe,carbong90:()=>TIe,carbonwhite:()=>_Ie,dark:()=>rIe,excel:()=>iIe,fivethirtyeight:()=>sIe,ggplot2:()=>cIe,googlecharts:()=>CIe,latimes:()=>dIe,powerbi:()=>AIe,quartz:()=>pIe,urbaninstitute:()=>xIe,version:()=>FIe,vox:()=>hIe});var RTe="vega-themes",OTe="2.14.0",PTe="Themes for stylized Vega and Vega-Lite visualizations.",$Te=["vega","vega-lite","themes","style"],BTe="BSD-3-Clause",UTe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},jTe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],GTe="build/vega-themes.js",qTe="build/vega-themes.module.js",WTe="build/vega-themes.min.js",YTe="build/vega-themes.min.js",XTe="build/vega-themes.module.d.ts",QTe={type:"git",url:"https://github.com/vega/vega-themes.git"},KTe=["src","build"],ZTe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},JTe={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},eIe={vega:"*","vega-lite":"*"},tIe={},nIe={name:RTe,version:OTe,description:PTe,keywords:$Te,license:BTe,author:UTe,contributors:jTe,main:GTe,module:qTe,unpkg:WTe,jsdelivr:YTe,types:XTe,repository:QTe,files:KTe,scripts:ZTe,devDependencies:JTe,peerDependencies:eIe,dependencies:tIe},m8="#fff",d2e="#888",rIe={background:"#333",view:{stroke:d2e},title:{color:m8,subtitleColor:m8},style:{"guide-label":{fill:m8},"guide-title":{fill:m8}},axis:{domainColor:m8,gridColor:d2e,tickColor:m8}},C0="#4572a7",iIe={background:"#fff",arc:{fill:C0},area:{fill:C0},line:{stroke:C0,strokeWidth:2},path:{stroke:C0},rect:{fill:C0},shape:{stroke:C0},symbol:{fill:C0,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},b0="#30a2da",YF="#cbcbcb",oIe="#999",aIe="#333",p2e="#f0f0f0",h2e="#333",sIe={arc:{fill:b0},area:{fill:b0},axis:{domainColor:YF,grid:!0,gridColor:YF,gridWidth:1,labelColor:oIe,labelFontSize:10,titleColor:aIe,tickColor:YF,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:p2e,group:{fill:p2e},legend:{labelColor:h2e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:h2e,titleFontSize:14,titlePadding:10},line:{stroke:b0,strokeWidth:2},path:{stroke:b0,strokeWidth:.5},rect:{fill:b0},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:b0},bar:{binSpacing:2,fill:b0,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},M0="#000",cIe={group:{fill:"#e5e5e5"},arc:{fill:M0},area:{fill:M0},line:{stroke:M0},path:{stroke:M0},rect:{fill:M0},shape:{stroke:M0},symbol:{fill:M0,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},lIe=22,uIe="normal",m2e="Benton Gothic, sans-serif",g2e=11.5,fIe="normal",w0="#82c6df",XF="Benton Gothic Bold, sans-serif",v2e="normal",y2e=13,Hh={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},dIe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:XF,fontSize:lIe,fontWeight:uIe},arc:{fill:w0},area:{fill:w0},line:{stroke:w0,strokeWidth:2},path:{stroke:w0},rect:{fill:w0},shape:{stroke:w0},symbol:{fill:w0,size:30},axis:{labelFont:m2e,labelFontSize:g2e,labelFontWeight:fIe,titleFont:XF,titleFontSize:y2e,titleFontWeight:v2e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:m2e,labelFontSize:g2e,symbolType:"square",titleFont:XF,titleFontSize:y2e,titleFontWeight:v2e},range:{category:Hh["category-6"],diverging:Hh["fireandice-6"],heatmap:Hh["fire-7"],ordinal:Hh["fire-7"],ramp:Hh["fire-7"]}},S0="#ab5787",QM="#979797",pIe={background:"#f9f9f9",arc:{fill:S0},area:{fill:S0},line:{stroke:S0},path:{stroke:S0},rect:{fill:S0},shape:{stroke:S0},symbol:{fill:S0,size:30},axis:{domainColor:QM,domainWidth:.5,gridWidth:.2,labelColor:QM,tickColor:QM,tickWidth:.2,titleColor:QM},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},E0="#3e5c69",hIe={background:"#fff",arc:{fill:E0},area:{fill:E0},line:{stroke:E0},path:{stroke:E0},rect:{fill:E0},shape:{stroke:E0},symbol:{fill:E0},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},t2="#1696d2",x2e="#000000",mIe="#FFFFFF",KM="Lato",QF="Lato",gIe="Lato",vIe="#DEDDDD",yIe=18,Lh={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},xIe={background:mIe,title:{anchor:"start",fontSize:yIe,font:KM},axisX:{domain:!0,domainColor:x2e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:QF,labelAngle:0,tickColor:x2e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:KM},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:vIe,gridWidth:1,labelFontSize:12,labelFont:QF,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:KM,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:QF,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:KM,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Lh["six-groups-cat-1"],diverging:Lh["diverging-colors"],heatmap:Lh["diverging-colors"],ordinal:Lh["six-groups-seq"],ramp:Lh["shades-blue"]},area:{fill:t2},rect:{fill:t2},line:{color:t2,stroke:t2,strokeWidth:5},trail:{color:t2,stroke:t2,strokeWidth:0,size:1},path:{stroke:t2,strokeWidth:.5},point:{filled:!0},text:{font:gIe,color:t2,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:t2,stroke:null}},arc:{fill:t2},shape:{stroke:t2},symbol:{fill:t2,size:30}},D0="#3366CC",C2e="#ccc",ZM="Arial, sans-serif",CIe={arc:{fill:D0},area:{fill:D0},path:{stroke:D0},rect:{fill:D0},shape:{stroke:D0},symbol:{stroke:D0},circle:{fill:D0},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:ZM,fontSize:12},"guide-title":{font:ZM,fontSize:12},"group-title":{font:ZM,fontSize:12}},title:{font:ZM,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:C2e,tickColor:C2e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},ZF=e=>e*(1/3+1),b2e=ZF(9),M2e=ZF(10),w2e=ZF(12),Ah="Segoe UI",S2e="wf_standard-font, helvetica, arial, sans-serif",E2e="#252423",Vh="#605E5C",D2e="transparent",bIe="#C8C6C4",ra="#118DFF",MIe="#12239E",wIe="#E66C37",SIe="#6B007B",EIe="#E044A7",DIe="#744EC2",zIe="#D9B300",HIe="#D64550",L2e=ra,A2e="#DEEFFF",z2e=[A2e,L2e],LIe=[A2e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",L2e],AIe={view:{stroke:D2e},background:D2e,font:Ah,header:{titleFont:S2e,titleFontSize:w2e,titleColor:E2e,labelFont:Ah,labelFontSize:M2e,labelColor:Vh},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Vh,labelFontSize:b2e,titleFont:S2e,titleColor:E2e,titleFontSize:w2e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:bIe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ra},line:{stroke:ra,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Ah,fontSize:b2e,fill:Vh},arc:{fill:ra},area:{fill:ra,line:!0,opacity:.6},path:{stroke:ra},rect:{fill:ra},point:{fill:ra,filled:!0,size:75},shape:{stroke:ra},symbol:{fill:ra,strokeWidth:1.5,size:50},legend:{titleFont:Ah,titleFontWeight:"bold",titleColor:Vh,labelFont:Ah,labelFontSize:M2e,labelColor:Vh,symbolType:"circle",symbolSize:75},range:{category:[ra,MIe,wIe,SIe,EIe,DIe,zIe,HIe],diverging:z2e,heatmap:z2e,ordinal:LIe}},KF='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',H2e=400,VIe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],NIe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function JM({type:e,background:t}){let n=e==="dark"?"#161616":"#ffffff",r=e==="dark"?"#f4f4f4":"#161616",i=e==="dark"?VIe:NIe,o=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:KF,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:KF,fill:r,fontWeight:H2e},"guide-title":{font:KF,fill:r,fontWeight:H2e}},range:{category:i,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}var _Ie=JM({type:"light",background:"#ffffff"}),kIe=JM({type:"light",background:"#f4f4f4"}),TIe=JM({type:"dark",background:"#262626"}),IIe=JM({type:"dark",background:"#161616"}),FIe=nIe.version;var RIe="vega-tooltip",OIe="0.34.0",PIe="A tooltip plugin for Vega-Lite and Vega visualizations.",$Ie=["vega-lite","vega","tooltip"],BIe={type:"git",url:"https://github.com/vega/vega-tooltip.git"},UIe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},jIe=["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],GIe="BSD-3-Clause",qIe={url:"https://github.com/vega/vega-tooltip/issues"},WIe="https://github.com/vega/vega-tooltip#readme",YIe="build/vega-tooltip.js",XIe="build/vega-tooltip.module.js",QIe="build/vega-tooltip.min.js",KIe="build/vega-tooltip.min.js",ZIe="build/vega-tooltip.module.d.ts",JIe=["src","build","types"],eFe={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"rimraf build && rimraf src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prepare:"yarn copy:data",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},tFe={"@babel/core":"^7.22.10","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.10","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@types/jest":"^29.5.3","@typescript-eslint/eslint-plugin":"^6.3.0","@typescript-eslint/parser":"^6.3.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.46.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","gh-pages":"^6.1.0",jest:"^29.6.2","jest-environment-jsdom":"^29.6.2",path:"^0.12.7",prettier:"^3.0.1","release-it":"^16.1.3",rollup:"^4.6.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.3",sass:"^1.64.2",typescript:"~5.3.2","vega-datasets":"^2.7.0","vega-typings":"^0.24.2"},nFe={"vega-util":"^1.17.2"},rFe={name:RIe,version:OIe,description:PIe,keywords:$Ie,repository:BIe,author:UIe,collaborators:jIe,license:GIe,bugs:qIe,homepage:WIe,main:YIe,module:XIe,unpkg:QIe,jsdelivr:KIe,types:ZIe,files:JIe,scripts:eFe,devDependencies:tFe,dependencies:nFe};function iFe(e,t,n,r){if(F(e))return`[${e.map(o=>t(Q(o)?o:V2e(o,n))).join(", ")}]`;if(ne(e)){let o="",i=e,{title:a,image:s}=i,c=ie(i,["title","image"]);a&&(o+=`<h2>${t(a)}</h2>`),s&&(o+=`<img src="${new URL(t(s),r||location.href).href}">`);let l=Object.keys(c);if(l.length>0){o+="<table>";for(let u of l){let f=c[u];f!==void 0&&(ne(f)&&(f=V2e(f,n)),o+=`<tr><td class="key">${t(u)}</td><td class="value">${t(f)}</td></tr>`)}o+="</table>"}return o||"{}"}return t(e)}function oFe(e){let t=[];return function(n,r){if(typeof r!="object"||r===null)return r;let i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function V2e(e,t){return JSON.stringify(e,oFe(t))}var aFe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`,N2e="vg-tooltip-element",sFe={offsetX:10,offsetY:10,id:N2e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:cFe,maxDepth:2,formatTooltip:iFe,baseURL:""};function cFe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function lFe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return aFe.toString().replace(N2e,e)}function uFe(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}var ew=class{constructor(t){this.options=x(x({},sFe),t);let n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){let r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=lFe(n);let i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);let{x:o,y:a}=uFe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${a}px`,this.el.style.left=`${o}px`}},CAt=rFe.version;function fFe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var eR,_2e;function dFe(){return _2e||(_2e=1,eR=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),eR}var pFe=Lt;Lt.Node=L0;Lt.create=Lt;function Lt(e){var t=this;if(t instanceof Lt||(t=new Lt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}Lt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Lt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Lt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Lt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)mFe(this,arguments[e]);return this.length};Lt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)gFe(this,arguments[e]);return this.length};Lt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Lt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Lt.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};Lt.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};Lt.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Lt.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Lt.prototype.map=function(e,t){t=t||this;for(var n=new Lt,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};Lt.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Lt,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};Lt.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};Lt.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};Lt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Lt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Lt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Lt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};Lt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Lt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};Lt.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var o=[],r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=hFe(this,i,n[r]);return o};Lt.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function hFe(e,t,n){var r=t===e.head?new L0(n,null,t,e):new L0(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function mFe(e,t){e.tail=new L0(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function gFe(e,t){e.head=new L0(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function L0(e,t,n,r){if(!(this instanceof L0))return new L0(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{dFe()(Lt)}catch{}var vFe=pFe,z0=Symbol("max"),Ic=Symbol("length"),g8=Symbol("lengthCalculator"),kh=Symbol("allowStale"),H0=Symbol("maxAge"),Tc=Symbol("dispose"),k2e=Symbol("noDisposeOnSet"),Fr=Symbol("lruList"),ia=Symbol("cache"),W2e=Symbol("updateAgeOnGet"),tR=()=>1,oR=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[z0]=t.max||1/0;let n=t.length||tR;if(this[g8]=typeof n!="function"?tR:n,this[kh]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[H0]=t.maxAge||0,this[Tc]=t.dispose,this[k2e]=t.noDisposeOnSet||!1,this[W2e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[z0]=t||1/0,Nh(this)}get max(){return this[z0]}set allowStale(t){this[kh]=!!t}get allowStale(){return this[kh]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[H0]=t,Nh(this)}get maxAge(){return this[H0]}set lengthCalculator(t){typeof t!="function"&&(t=tR),t!==this[g8]&&(this[g8]=t,this[Ic]=0,this[Fr].forEach(n=>{n.length=this[g8](n.value,n.key),this[Ic]+=n.length})),Nh(this)}get lengthCalculator(){return this[g8]}get length(){return this[Ic]}get itemCount(){return this[Fr].length}rforEach(t,n){n=n||this;for(let r=this[Fr].tail;r!==null;){let i=r.prev;T2e(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Fr].head;r!==null;){let i=r.next;T2e(this,t,r,n),r=i}}keys(){return this[Fr].toArray().map(t=>t.key)}values(){return this[Fr].toArray().map(t=>t.value)}reset(){this[Tc]&&this[Fr]&&this[Fr].length&&this[Fr].forEach(t=>this[Tc](t.key,t.value)),this[ia]=new Map,this[Fr]=new vFe,this[Ic]=0}dump(){return this[Fr].map(t=>iw(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Fr]}set(t,n,r){if(r=r||this[H0],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,o=this[g8](n,t);if(this[ia].has(t)){if(o>this[z0])return y8(this,this[ia].get(t)),!1;let c=this[ia].get(t).value;return this[Tc]&&(this[k2e]||this[Tc](t,c.value)),c.now=i,c.maxAge=r,c.value=n,this[Ic]+=o-c.length,c.length=o,this.get(t),Nh(this),!0}let a=new aR(t,n,o,i,r);return a.length>this[z0]?(this[Tc]&&this[Tc](t,n),!1):(this[Ic]+=a.length,this[Fr].unshift(a),this[ia].set(t,this[Fr].head),Nh(this),!0)}has(t){if(!this[ia].has(t))return!1;let n=this[ia].get(t).value;return!iw(this,n)}get(t){return nR(this,t,!0)}peek(t){return nR(this,t,!1)}pop(){let t=this[Fr].tail;return t?(y8(this,t),t.value):null}del(t){y8(this,this[ia].get(t))}load(t){this.reset();let n=Date.now();for(let r=t.length-1;r>=0;r--){let i=t[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let a=o-n;a>0&&this.set(i.k,i.v,a)}}}prune(){this[ia].forEach((t,n)=>nR(this,n,!1))}},nR=(e,t,n)=>{let r=e[ia].get(t);if(r){let i=r.value;if(iw(e,i)){if(y8(e,r),!e[kh])return}else n&&(e[W2e]&&(r.value.now=Date.now()),e[Fr].unshiftNode(r));return i.value}},iw=(e,t)=>{if(!t||!t.maxAge&&!e[H0])return!1;let n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[H0]&&n>e[H0]},Nh=e=>{if(e[Ic]>e[z0])for(let t=e[Fr].tail;e[Ic]>e[z0]&&t!==null;){let n=t.prev;y8(e,t),t=n}},y8=(e,t)=>{if(t){let n=t.value;e[Tc]&&e[Tc](n.key,n.value),e[Ic]-=n.length,e[ia].delete(n.key),e[Fr].removeNode(t)}},aR=class{constructor(t,n,r,i,o){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}},T2e=(e,t,n,r)=>{let i=n.value;iw(e,i)&&(y8(e,n),e[kh]||(i=void 0)),i&&t.call(r,i.value,i.key,e)},yFe=oR,xFe=Object.freeze({loose:!0}),CFe=Object.freeze({}),bFe=e=>e?typeof e!="object"?xFe:e:CFe,cR=bFe,sR={exports:{}},MFe="2.0.0",Y2e=256,wFe=Number.MAX_SAFE_INTEGER||9007199254740991,SFe=16,EFe=Y2e-6,DFe=["major","premajor","minor","preminor","patch","prepatch","prerelease"],lR={MAX_LENGTH:Y2e,MAX_SAFE_COMPONENT_LENGTH:SFe,MAX_SAFE_BUILD_LENGTH:EFe,MAX_SAFE_INTEGER:wFe,RELEASE_TYPES:DFe,SEMVER_SPEC_VERSION:MFe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},zFe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},aw=zFe;(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=lR,o=aw;t=e.exports={};let a=t.re=[],s=t.safeRe=[],c=t.src=[],l=t.t={},u=0,f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],p=m=>{for(let[g,v]of d)m=m.split(`${g}*`).join(`${g}{0,${v}}`).split(`${g}+`).join(`${g}{1,${v}}`);return m},h=(m,g,v)=>{let y=p(g),C=u++;o(m,C,g),l[m]=C,c[C]=g,a[C]=new RegExp(g,v?"g":void 0),s[C]=new RegExp(y,v?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),h("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${f}+`),h("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),h("FULL",`^${c[l.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),h("LOOSE",`^${c[l.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),h("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),h("COERCERTL",c[l.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(sR,sR.exports);var uR=sR.exports,I2e=/^[0-9]+$/,X2e=(e,t)=>{let n=I2e.test(e),r=I2e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},HFe=(e,t)=>X2e(t,e),LFe={compareIdentifiers:X2e,rcompareIdentifiers:HFe},tw=aw,{MAX_LENGTH:F2e,MAX_SAFE_INTEGER:nw}=lR,{safeRe:R2e,t:O2e}=uR,AFe=cR,{compareIdentifiers:v8}=LFe,VFe=class ps{constructor(t,n){if(n=AFe(n),t instanceof ps){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>F2e)throw new TypeError(`version is longer than ${F2e} characters`);tw("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=t.trim().match(n.loose?R2e[O2e.LOOSE]:R2e[O2e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>nw||this.major<0)throw new TypeError("Invalid major version");if(this.minor>nw||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>nw||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<nw)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(tw("SemVer.compare",this.version,this.options,t),!(t instanceof ps)){if(typeof t=="string"&&t===this.version)return 0;t=new ps(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof ps||(t=new ps(t,this.options)),v8(this.major,t.major)||v8(this.minor,t.minor)||v8(this.patch,t.patch)}comparePre(t){if(t instanceof ps||(t=new ps(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=t.prerelease[n];if(tw("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return v8(r,i)}while(++n)}compareBuild(t){t instanceof ps||(t=new ps(t,this.options));let n=0;do{let r=this.build[n],i=t.build[n];if(tw("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return v8(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),v8(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}},fR=VFe,P2e=fR,NFe=(e,t,n)=>new P2e(e,n).compare(new P2e(t,n)),x8=NFe,_Fe=x8,kFe=(e,t,n)=>_Fe(e,t,n)===0,TFe=kFe,IFe=x8,FFe=(e,t,n)=>IFe(e,t,n)!==0,RFe=FFe,OFe=x8,PFe=(e,t,n)=>OFe(e,t,n)>0,$Fe=PFe,BFe=x8,UFe=(e,t,n)=>BFe(e,t,n)>=0,jFe=UFe,GFe=x8,qFe=(e,t,n)=>GFe(e,t,n)<0,WFe=qFe,YFe=x8,XFe=(e,t,n)=>YFe(e,t,n)<=0,QFe=XFe,KFe=TFe,ZFe=RFe,JFe=$Fe,eRe=jFe,tRe=WFe,nRe=QFe,rRe=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return KFe(e,n,r);case"!=":return ZFe(e,n,r);case">":return JFe(e,n,r);case">=":return eRe(e,n,r);case"<":return tRe(e,n,r);case"<=":return nRe(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}},iRe=rRe,rR,$2e;function oRe(){if($2e)return rR;$2e=1;let e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,f){if(f=n(f),u instanceof t){if(u.loose===!!f.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),a("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(u){let f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=u.match(f);if(!d)throw new TypeError(`Invalid comparator: ${u}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new s(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(a("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new s(u,this.options)}catch{return!1}return o(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new c(this.value,f).test(u.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||o(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||o(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}rR=t;let n=cR,{safeRe:r,t:i}=uR,o=iRe,a=aw,s=fR,c=Q2e();return rR}var iR,B2e;function Q2e(){if(B2e)return iR;B2e=1;class e{constructor(_,V){if(V=r(V),_ instanceof e)return _.loose===!!V.loose&&_.includePrerelease===!!V.includePrerelease?_:new e(_.raw,V);if(_ instanceof i)return this.raw=_.value,this.set=[[_]],this.format(),this;if(this.options=V,this.loose=!!V.loose,this.includePrerelease=!!V.includePrerelease,this.raw=_.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(I=>this.parseRange(I.trim())).filter(I=>I.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let I=this.set[0];if(this.set=this.set.filter(W=>!h(W[0])),this.set.length===0)this.set=[I];else if(this.set.length>1){for(let W of this.set)if(W.length===1&&m(W[0])){this.set=[W];break}}}this.format()}format(){return this.range=this.set.map(_=>_.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(_){let I=((this.options.includePrerelease&&d)|(this.options.loose&&p))+":"+_,W=n.get(I);if(W)return W;let X=this.options.loose,J=X?s[c.HYPHENRANGELOOSE]:s[c.HYPHENRANGE];_=_.replace(J,L(this.options.includePrerelease)),o("hyphen replace",_),_=_.replace(s[c.COMPARATORTRIM],l),o("comparator trim",_),_=_.replace(s[c.TILDETRIM],u),o("tilde trim",_),_=_.replace(s[c.CARETTRIM],f),o("caret trim",_);let Se=_.split(" ").map(ut=>v(ut,this.options)).join(" ").split(/\s+/).map(ut=>z(ut,this.options));X&&(Se=Se.filter(ut=>(o("loose invalid filter",ut,this.options),!!ut.match(s[c.COMPARATORLOOSE])))),o("range list",Se);let Ee=new Map,Je=Se.map(ut=>new i(ut,this.options));for(let ut of Je){if(h(ut))return[ut];Ee.set(ut.value,ut)}Ee.size>1&&Ee.has("")&&Ee.delete("");let Dt=[...Ee.values()];return n.set(I,Dt),Dt}intersects(_,V){if(!(_ instanceof e))throw new TypeError("a Range is required");return this.set.some(I=>g(I,V)&&_.set.some(W=>g(W,V)&&I.every(X=>W.every(J=>X.intersects(J,V)))))}test(_){if(!_)return!1;if(typeof _=="string")try{_=new a(_,this.options)}catch{return!1}for(let V=0;V<this.set.length;V++)if(G(this.set[V],_,this.options))return!0;return!1}}iR=e;let t=yFe,n=new t({max:1e3}),r=cR,i=oRe(),o=aw,a=fR,{safeRe:s,t:c,comparatorTrimReplace:l,tildeTrimReplace:u,caretTrimReplace:f}=uR,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:p}=lR,h=A=>A.value==="<0.0.0-0",m=A=>A.value==="",g=(A,_)=>{let V=!0,I=A.slice(),W=I.pop();for(;V&&I.length;)V=I.every(X=>W.intersects(X,_)),W=I.pop();return V},v=(A,_)=>(o("comp",A,_),A=M(A,_),o("caret",A),A=C(A,_),o("tildes",A),A=w(A,_),o("xrange",A),A=D(A,_),o("stars",A),A),y=A=>!A||A.toLowerCase()==="x"||A==="*",C=(A,_)=>A.trim().split(/\s+/).map(V=>b(V,_)).join(" "),b=(A,_)=>{let V=_.loose?s[c.TILDELOOSE]:s[c.TILDE];return A.replace(V,(I,W,X,J,Se)=>{o("tilde",A,I,W,X,J,Se);let Ee;return y(W)?Ee="":y(X)?Ee=`>=${W}.0.0 <${+W+1}.0.0-0`:y(J)?Ee=`>=${W}.${X}.0 <${W}.${+X+1}.0-0`:Se?(o("replaceTilde pr",Se),Ee=`>=${W}.${X}.${J}-${Se} <${W}.${+X+1}.0-0`):Ee=`>=${W}.${X}.${J} <${W}.${+X+1}.0-0`,o("tilde return",Ee),Ee})},M=(A,_)=>A.trim().split(/\s+/).map(V=>S(V,_)).join(" "),S=(A,_)=>{o("caret",A,_);let V=_.loose?s[c.CARETLOOSE]:s[c.CARET],I=_.includePrerelease?"-0":"";return A.replace(V,(W,X,J,Se,Ee)=>{o("caret",A,W,X,J,Se,Ee);let Je;return y(X)?Je="":y(J)?Je=`>=${X}.0.0${I} <${+X+1}.0.0-0`:y(Se)?X==="0"?Je=`>=${X}.${J}.0${I} <${X}.${+J+1}.0-0`:Je=`>=${X}.${J}.0${I} <${+X+1}.0.0-0`:Ee?(o("replaceCaret pr",Ee),X==="0"?J==="0"?Je=`>=${X}.${J}.${Se}-${Ee} <${X}.${J}.${+Se+1}-0`:Je=`>=${X}.${J}.${Se}-${Ee} <${X}.${+J+1}.0-0`:Je=`>=${X}.${J}.${Se}-${Ee} <${+X+1}.0.0-0`):(o("no pr"),X==="0"?J==="0"?Je=`>=${X}.${J}.${Se}${I} <${X}.${J}.${+Se+1}-0`:Je=`>=${X}.${J}.${Se}${I} <${X}.${+J+1}.0-0`:Je=`>=${X}.${J}.${Se} <${+X+1}.0.0-0`),o("caret return",Je),Je})},w=(A,_)=>(o("replaceXRanges",A,_),A.split(/\s+/).map(V=>E(V,_)).join(" ")),E=(A,_)=>{A=A.trim();let V=_.loose?s[c.XRANGELOOSE]:s[c.XRANGE];return A.replace(V,(I,W,X,J,Se,Ee)=>{o("xRange",A,I,W,X,J,Se,Ee);let Je=y(X),Dt=Je||y(J),ut=Dt||y(Se),Qt=ut;return W==="="&&Qt&&(W=""),Ee=_.includePrerelease?"-0":"",Je?W===">"||W==="<"?I="<0.0.0-0":I="*":W&&Qt?(Dt&&(J=0),Se=0,W===">"?(W=">=",Dt?(X=+X+1,J=0,Se=0):(J=+J+1,Se=0)):W==="<="&&(W="<",Dt?X=+X+1:J=+J+1),W==="<"&&(Ee="-0"),I=`${W+X}.${J}.${Se}${Ee}`):Dt?I=`>=${X}.0.0${Ee} <${+X+1}.0.0-0`:ut&&(I=`>=${X}.${J}.0${Ee} <${X}.${+J+1}.0-0`),o("xRange return",I),I})},D=(A,_)=>(o("replaceStars",A,_),A.trim().replace(s[c.STAR],"")),z=(A,_)=>(o("replaceGTE0",A,_),A.trim().replace(s[_.includePrerelease?c.GTE0PRE:c.GTE0],"")),L=A=>(_,V,I,W,X,J,Se,Ee,Je,Dt,ut,Qt,ms)=>(y(I)?V="":y(W)?V=`>=${I}.0.0${A?"-0":""}`:y(X)?V=`>=${I}.${W}.0${A?"-0":""}`:J?V=`>=${V}`:V=`>=${V}${A?"-0":""}`,y(Je)?Ee="":y(Dt)?Ee=`<${+Je+1}.0.0-0`:y(ut)?Ee=`<${Je}.${+Dt+1}.0-0`:Qt?Ee=`<=${Je}.${Dt}.${ut}-${Qt}`:A?Ee=`<${Je}.${Dt}.${+ut+1}-0`:Ee=`<=${Ee}`,`${V} ${Ee}`.trim()),G=(A,_,V)=>{for(let I=0;I<A.length;I++)if(!A[I].test(_))return!1;if(_.prerelease.length&&!V.includePrerelease){for(let I=0;I<A.length;I++)if(o(A[I].semver),A[I].semver!==i.ANY&&A[I].semver.prerelease.length>0){let W=A[I].semver;if(W.major===_.major&&W.minor===_.minor&&W.patch===_.patch)return!0}return!1}return!0};return iR}var aRe=Q2e(),sRe=(e,t,n)=>{try{t=new aRe(t,n)}catch{return!1}return t.test(e)},cRe=sRe,K2e=fFe(cRe);function lRe(e,t,n){let r=e.open(t),i=1e4,o=250,{origin:a}=new URL(t),s=~~(i/o);function c(u){u.source===r&&(s=0,e.removeEventListener("message",c,!1))}e.addEventListener("message",c,!1);function l(){s<=0||(r.postMessage(n,a),setTimeout(l,o),s-=1)}setTimeout(l,o)}var uRe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Z2e(e,...t){for(let n of t)fRe(e,n);return e}function fRe(e,t){for(let n of Object.keys(t))Rs(e,n,t[n],!0)}var dRe="vega-embed",pRe="6.24.0",hRe="Publish Vega visualizations as embedded web components.",mRe=["vega","data","visualization","component","embed"],gRe={type:"git",url:"http://github.com/vega/vega-embed.git"},vRe={name:"UW Interactive Data Lab",url:"http://idl.cs.washington.edu"},yRe=[{name:"Dominik Moritz",url:"https://www.domoritz.de"}],xRe={url:"https://github.com/vega/vega-embed/issues"},CRe="https://github.com/vega/vega-embed#readme",bRe="BSD-3-Clause",MRe="build/vega-embed.js",wRe="build/vega-embed.module.js",SRe="build/vega-embed.min.js",ERe="build/vega-embed.min.js",DRe="build/vega-embed.module.d.ts",zRe=["src","build","patches"],HRe={"@babel/core":"^7.23.6","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.23.6","@babel/preset-env":"^7.23.6","@babel/preset-typescript":"^7.23.3","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-commonjs":"25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/jest":"^29.5.11","@types/semver":"^7.5.6","@typescript-eslint/eslint-plugin":"^6.14.0","@typescript-eslint/parser":"^6.14.0","browser-sync":"^2.29.3",concurrently:"^8.2.2","del-cli":"^5.1.0",eslint:"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.6.0","eslint-plugin-prettier":"^5.0.1",jest:"^29.7.0","jest-canvas-mock":"^2.5.2","jest-environment-jsdom":"^29.7.0","patch-package":"^8.0.0","postinstall-postinstall":"^2.1.0",prettier:"^3.1.1","release-it":"^17.0.1",rollup:"4.9.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",sass:"^1.69.5",typescript:"^5.3.3",vega:"^5.22.1","vega-lite":"^5.2.0"},LRe={vega:"^5.21.0","vega-lite":"*"},ARe={"fast-json-patch":"^3.1.1","json-stringify-pretty-compact":"^3.0.0",semver:"^7.5.4",tslib:"^2.6.2","vega-interpreter":"^1.0.5","vega-schema-url-parser":"^2.2.0","vega-themes":"^2.14.0","vega-tooltip":"^0.34.0"},VRe=["yallist"],NRe={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"del-cli build src/style.ts",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start --directory -s -f build *.html",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},_Re={name:dRe,version:pRe,description:hRe,keywords:mRe,repository:gRe,author:vRe,contributors:yRe,bugs:xRe,homepage:CRe,license:bRe,main:MRe,module:wRe,unpkg:SRe,jsdelivr:ERe,types:DRe,files:zRe,devDependencies:HRe,peerDependencies:LRe,dependencies:ARe,bundledDependencies:VRe,scripts:NRe},HAt=_Re.version,hs=ZT,Th=qF,U2e=typeof window<"u"?window:void 0;Th===void 0&&U2e?.vl?.compile&&(Th=U2e.vl);var kRe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},TRe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},_h={vega:"Vega","vega-lite":"Vega-Lite"},ow={vega:hs.version,"vega-lite":Th?Th.version:"not available"},IRe={vega:e=>e,"vega-lite":(e,t)=>Th.compile(e,{config:t}).spec},FRe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,RRe="chart-wrapper";function ORe(e){return typeof e=="function"}function j2e(e,t,n,r){let i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+o),a.document.title=`${_h[r]} JSON Source`}function PRe(e,t){if(e.$schema){let n=WF(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${_h[n.library]}, but mode argument sets ${_h[t]??t}.`);let r=n.library;return K2e(ow[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${_h[r]} ${n.version}, but the current version of ${_h[r]} is v${ow[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function J2e(e){return!!(e&&"load"in e)}function G2e(e){return J2e(e)?e:hs.loader(e)}function $Re(e){let t=e.usermeta?.embedOptions??{};return Q(t.defaultStyle)&&(t.defaultStyle=!1),t}function eae(r,i){return jt(this,arguments,function*(e,t,n={}){let o,a;Q(t)?(a=G2e(n.loader),o=JSON.parse(yield a.load(t))):o=t;let s=$Re(o),c=s.loader;(!a||c)&&(a=G2e(n.loader??c));let l=yield q2e(s,a),u=yield q2e(n,a),f=k(x({},Z2e(u,l)),{config:Ha(u.config??{},l.config??{})});return yield URe(e,o,f,a)})}function q2e(e,t){return jt(this,null,function*(){let n=Q(e.config)?JSON.parse(yield t.load(e.config)):e.config??{},r=Q(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return x(x(x({},e),r?{patch:r}:{}),n?{config:n}:{})})}function BRe(e){let t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}function URe(i,o){return jt(this,arguments,function*(e,t,n={},r){let a=n.theme?Ha(JF[n.theme],n.config??{}):n.config,s=S1(n.actions)?n.actions:Z2e({},kRe,n.actions??{}),c=x(x({},TRe),n.i18n),l=n.renderer??"canvas",u=n.logLevel??hs.Warn,f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){let w="vega-embed-style",{root:E,rootContainer:D}=BRe(d);if(!E.getElementById(w)){let z=document.createElement("style");z.id=w,z.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?uRe.toString():n.defaultStyle,D.appendChild(z)}}let p=PRe(t,n.mode),h=IRe[p](t,a);if(p==="vega-lite"&&h.$schema){let w=WF(h.$schema);K2e(ow.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${ow.vega}.`)}d.classList.add("vega-embed"),s&&d.classList.add("has-actions"),d.innerHTML="";let m=d;if(s){let w=document.createElement("div");w.classList.add(RRe),d.appendChild(w),m=w}let g=n.patch;if(g&&(h=g instanceof Function?g(h):F6(h,g,!0,!1).newDocument),n.formatLocale&&hs.formatLocale(n.formatLocale),n.timeFormatLocale&&hs.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(let w in n.expressionFunctions){let E=n.expressionFunctions[w];"fn"in E?hs.expressionFunction(w,E.fn,E.visitor):E instanceof Function&&hs.expressionFunction(w,E)}let{ast:v}=n,y=hs.parse(h,p==="vega-lite"?{}:a,{ast:v}),C=new(n.viewClass||hs.View)(y,x({loader:r,logLevel:u,renderer:l},v?{expr:hs.expressionInterpreter??n.expr??nne}:{}));if(C.addSignalListener("autosize",(w,E)=>{let{type:D}=E;D=="fit-x"?(m.classList.add("fit-x"),m.classList.remove("fit-y")):D=="fit-y"?(m.classList.remove("fit-x"),m.classList.add("fit-y")):D=="fit"?m.classList.add("fit-x","fit-y"):m.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){let{loader:w,tooltip:E}=n,D=w&&!J2e(w)?w?.baseURL:void 0,z=ORe(E)?E:new ew(x({baseURL:D},E===!0?{}:E)).call;C.tooltip(z)}let{hover:b}=n;if(b===void 0&&(b=p==="vega"),b){let{hoverSet:w,updateSet:E}=typeof b=="boolean"?{}:b;C.hover(w,E)}n&&(n.width!=null&&C.width(n.width),n.height!=null&&C.height(n.height),n.padding!=null&&C.padding(n.padding)),yield C.initialize(m,n.bind).runAsync();let M;if(s!==!1){let w=d;if(n.defaultStyle!==!1||n.forceActionsMenu){let D=document.createElement("details");D.title=c.CLICK_TO_VIEW_ACTIONS,d.append(D),w=D;let z=document.createElement("summary");z.innerHTML=FRe,D.append(z),M=L=>{D.contains(L.target)||D.removeAttribute("open")},document.addEventListener("click",M)}let E=document.createElement("div");if(w.append(E),E.classList.add("vega-actions"),s===!0||s.export!==!1){for(let D of["svg","png"])if(s===!0||s.export===!0||s.export[D]){let z=c[`${D.toUpperCase()}_ACTION`],L=document.createElement("a"),G=ne(n.scaleFactor)?n.scaleFactor[D]:n.scaleFactor;L.text=z,L.href="#",L.target="_blank",L.download=`${f}.${D}`,L.addEventListener("mousedown",function(A){return jt(this,null,function*(){A.preventDefault();let _=yield C.toImageURL(D,G);this.href=_})}),E.append(L)}}if(s===!0||s.source!==!1){let D=document.createElement("a");D.text=c.SOURCE_ACTION,D.href="#",D.addEventListener("click",function(z){j2e((0,rw.default)(t),n.sourceHeader??"",n.sourceFooter??"",p),z.preventDefault()}),E.append(D)}if(p==="vega-lite"&&(s===!0||s.compiled!==!1)){let D=document.createElement("a");D.text=c.COMPILED_ACTION,D.href="#",D.addEventListener("click",function(z){j2e((0,rw.default)(h),n.sourceHeader??"",n.sourceFooter??"","vega"),z.preventDefault()}),E.append(D)}if(s===!0||s.editor!==!1){let D=n.editorUrl??"https://vega.github.io/editor/",z=document.createElement("a");z.text=c.EDITOR_ACTION,z.href="#",z.addEventListener("click",function(L){lRe(window,D,{config:a,mode:p,renderer:l,spec:(0,rw.default)(t)}),L.preventDefault()}),E.append(z)}}function S(){M&&document.removeEventListener("click",M),C.finalize()}return{view:C,spec:t,vgSpec:h,finalize:S,embedOptions:n}})}var tae=(()=>{let t=class t{constructor(){this.data=[],this.spec=dG}ngAfterViewInit(){return jt(this,null,function*(){this.spec=this.addDataToSpec(this.data,this.spec),this.chart=yield eae("#calendar-element",this.spec)})}addDataToSpec(r,i){let o=i;return o.data.values=this.formatData(r),o}formatData(r){let i=Array.from(new Set(r)),o=i.map(u=>new Date(u).getFullYear()),a=Math.min(...o),s=Math.max(...o),c={};for(let u=a;u<=s;u++)for(let f=1;f<=12;f++)for(let d=1;d<=31;d++){let p=new Date(u,f-1,d).toLocaleDateString("en-GB").split("T")[0];c[p]=0}for(let u of i){let f=new Date(u).toLocaleDateString("en-GB").split("T")[0];c[f]+=1}return Object.entries(c).map(([u,f])=>({date:u,count:f}))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-calendar-heatmap"]],inputs:{data:"data"},standalone:!0,features:[Ce],decls:1,vars:0,consts:[["id","calendar-element"]],template:function(i,o){i&1&&dt(0,"div",0)},styles:["#calendar-element[_ngcontent-%COMP%]{position:relative;width:100%}"]});let e=t;return e})();function jRe(e,t){if(e&1&&(H(0,"pre"),T(1),N()),e&2){let n=Pe();R(),Sn(n.model==null?null:n.model.Description)}}function GRe(e,t){if(e&1&&(H(0,"p"),T(1),N()),e&2){let n=Pe();R(),U8(" Completed Value: ",n.model==null?null:n.model.TimesCompletedToday," / ",n.model==null?null:n.model.TargetValue,`
`)}}function qRe(e,t){if(e&1&&(H(0,"p"),T(1," Associated Goal: "),H(2,"a",5),T(3),N()()),e&2){let n=Pe();R(2),ae("routerLink",n.goalModel.ViewUrl),R(),Me(" ",n.goalModel.Name," ")}}function WRe(e,t){if(e&1&&(H(0,"li"),T(1),N()),e&2){let n=t.$implicit;R(),Me(" ",n," ")}}function YRe(e,t){if(e&1&&(y1(0),dt(1,"app-calendar-heatmap",6),x1()),e&2){let n=Pe();R(),ae("data",n.model.FormattedCompletedDates)}}var nae=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.goalApi=o,this.faCheck=zg,this.faXmark=Dg,this.recentCompletedDates=[]}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(de(1)).subscribe(i=>{this.model=new mi(i.data);let o=this.model?.CompletedDates??[],a=Array.from(new Set(o));this.recentCompletedDates=a.slice(-7)??[],this.model?.Goal&&this.goalApi.getGoal(this.model?.Goal).pipe(de(1)).subscribe(s=>{this.goalModel=new or(s.data)})})}};t.\u0275fac=function(i){return new(i||t)(j(M1),j(Vt),j(Gn))},t.\u0275cmp=xe({type:t,selectors:[["app-habit-page"]],standalone:!0,features:[Ce],decls:17,vars:11,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right","uk-margin-small-top",3,"routerLink"],[1,"uk-button-danger","uk-button","uk-margin-small-top",3,"routerLink"],[3,"icon"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"routerLink"],[3,"data"]],template:function(i,o){i&1&&(H(0,"h1"),T(1),N(),H(2,"button",0),T(3),N(),H(4,"button",1),T(5),N(),qe(6,jRe,2,1,"pre"),H(7,"p"),T(8," Is Anti Habit: "),dt(9,"fa-icon",2),N(),qe(10,GRe,2,2,"p",3)(11,qRe,4,2,"p",3),H(12,"h2"),T(13,"Completed Dates"),N(),H(14,"ul"),qe(15,WRe,2,1,"li",4),N(),qe(16,YRe,2,1,"ng-container",3)),i&2&&(R(),Me("Habit: ",o.model==null?null:o.model.Name,""),R(),ae("routerLink",o.model==null?null:o.model.EditUrl),R(),Me(" Edit: ",o.model==null?null:o.model.Name,`
`),R(),ae("routerLink",o.model==null?null:o.model.DeleteUrl),R(),Me(" Delete: ",o.model==null?null:o.model.Name,`
`),R(),ui(6,o.model!=null&&o.model.Description?6:-1),R(3),ae("icon",o.model!=null&&o.model.AntiHabit?o.faCheck:o.faXmark),R(),ae("ngIf",o.model==null?null:o.model.IsQuantifiable),R(),ae("ngIf",o.goalModel),R(4),ae("ngForOf",o.recentCompletedDates),R(),ae("ngIf",o.model))},dependencies:[un,hg,di,gr,tae],encapsulation:2});let e=t;return e})();var rae=(()=>{let t=class t{constructor(){}onRightClick(r){r.preventDefault()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=kt({type:t,selectors:[["","appNoContextMenu",""]],hostBindings:function(i,o){i&1&&Fe("contextmenu",function(s){return o.onRightClick(s)})},standalone:!0});let e=t;return e})();function XRe(e,t){if(e&1){let n=fi();H(0,"input",12),Fe("change",function(){tr(n);let i=Pe().$implicit,o=Pe();return nr(o.changeState.emit(i))}),N()}if(e&2){let n=Pe().$implicit;ae("checked",n.IsCompletedToday)}}function QRe(e,t){if(e&1){let n=fi();H(0,"button",13),Fe("click",function(){tr(n);let i=Pe().$implicit,o=Pe();return nr(o.changeState.emit(i))})("contextmenu",function(){tr(n);let i=Pe().$implicit,o=Pe();return nr(o.decrementState.emit(i))}),T(1),N()}if(e&2){let n=Pe().$implicit,r;R(),Me(" ",(r=n==null?null:n.TimesCompletedToday)!==null&&r!==void 0?r:0," ")}}function KRe(e,t){if(e&1&&(y1(0),H(1,"p",14),T(2),N(),x1()),e&2){let n=Pe().$implicit;R(2),Me(" ",n.Description," ")}}function ZRe(e,t){if(e&1&&(H(0,"tr")(1,"td"),qe(2,XRe,1,1,"input",7)(3,QRe,2,1),N(),H(4,"td")(5,"a",8),T(6),N()(),H(7,"td",1),qe(8,KRe,3,1,"ng-container",9),N(),H(9,"td",2),dt(10,"fa-icon",10),N(),H(11,"td")(12,"a",11),T(13,"View"),N()()()),e&2){let n=t.$implicit,r=Pe(),i=O4(19);R(2),ui(2,!n.IsQuantifiable||n.IsCompletedToday?2:3),R(3),ae("routerLink",n.ViewUrl),R(),Sn(n.Name),R(2),ae("ngIf",n.Description)("ngIfElse",i),R(2),ae("icon",n.AntiHabit?r.faCheck:r.faXmark),R(2),ae("routerLink",n.ViewUrl)}}function JRe(e,t){}function eOe(e,t){}function tOe(e,t){e&1&&(H(0,"i"),T(1,"No description"),N())}var iae=(()=>{let t=class t{constructor(){this.faCheck=zg,this.faXmark=Dg,this.models=[],this.changeState=new vn,this.decrementState=new vn}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-habits-table"]],inputs:{models:"models"},outputs:{changeState:"changeState",decrementState:"decrementState"},standalone:!0,features:[Ce],decls:20,vars:1,consts:[[1,"uk-table","uk-table-striped","uk-table-middle"],[1,"hide-in-mobile"],[1,"centered"],[4,"ngFor","ngForOf"],["quantifiableAction",""],["booleanAction",""],["defaultDescription",""],["type","checkbox","class","uk-checkbox",3,"checked"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[4,"ngIf","ngIfElse"],[3,"icon"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],["type","checkbox",1,"uk-checkbox",3,"checked","change"],["appNoContextMenu","",1,"uk-button","uk-button-default","increment-button",3,"click","contextmenu"],[1,"description"]],template:function(i,o){i&1&&(H(0,"table",0)(1,"thead")(2,"tr"),dt(3,"th"),H(4,"th"),T(5,"Name"),N(),H(6,"th",1),T(7,"Description"),N(),H(8,"th",2),T(9,"Anti"),N(),H(10,"th"),T(11,"Action"),N()()(),H(12,"tbody"),qe(13,ZRe,14,7,"tr",3),N()(),qe(14,JRe,0,0,"ng-template",null,4,Ls)(16,eOe,0,0,"ng-template",null,5,Ls)(18,tOe,2,0,"ng-template",null,6,Ls)),i&2&&(R(13),ae("ngForOf",o.models))},dependencies:[gr,rae,un,di,hg],styles:["p.description[_ngcontent-%COMP%]{text-wrap:nowrap;padding-right:10rem;width:28rem;overflow:hidden}.increment-button[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:center;align-items:center;padding:0rem;height:1.6rem;width:1.6rem;border:1px solid #999}.centered[_ngcontent-%COMP%]{display:flex;justify-content:center}"]});let e=t;return e})();function nOe(e,t){if(e&1){let n=fi();H(0,"section")(1,"h2"),T(2,"Completed Habits"),N(),H(3,"app-habits-table",4),Fe("changeState",function(i){tr(n);let o=Pe();return nr(o.uncompleteHabit(i))}),N()()}if(e&2){let n=Pe();R(3),ae("models",n.completedHabits)}}var oae=(()=>{let t=class t{constructor(r,i){this.api=r,this.virtualDb=i,this.habits=[]}get inCompleteHabits(){return this.habits.filter(r=>!this.isCompletedToday(r))}get completedHabits(){return this.habits.filter(r=>!r.AntiHabit&&this.isCompletedToday(r))}get failedAntiHabits(){return this.habits.filter(r=>r.AntiHabit&&this.isCompletedToday(r))}ngOnInit(){this.updateHabits(),this.virtualDb.changeNotifier.addEventListener("change",()=>this.updateHabits())}updateHabits(){console.debug("fetch new habits"),this.api.getHabits().pipe(de(1)).subscribe(r=>{this.habits=r.data.map(i=>new mi(i))})}completeHabit(r){r.CompletedDates?.length||(r.CompletedDates=[]),r.CompletedDates.push(new Date().toLocaleDateString("en-GB")),this.api.updateHabit(r).pipe(de(1)).subscribe(i=>{r=new mi(i.data)})}uncompleteHabit(r){let i=new Date().toLocaleDateString("en-GB"),o=r.CompletedDates.findIndex(a=>{let s=new Date(a).toLocaleDateString("en-GB");return i===s});r.CompletedDates.splice(o,1),this.api.updateHabit(r).pipe(de(1)).subscribe(a=>{r=new mi(a.data)})}isCompletedToday(r){return r.IsCompletedToday}};t.\u0275fac=function(i){return new(i||t)(j(M1),j(C1))},t.\u0275cmp=xe({type:t,selectors:[["app-list-page"]],standalone:!0,features:[Ce],decls:10,vars:2,consts:[[1,"list-header"],["routerLink","/habits/new",1,"uk-button","uk-button-primary"],[3,"models","changeState","decrementState"],[4,"ngIf"],[3,"models","changeState"]],template:function(i,o){i&1&&(H(0,"div",0)(1,"h1"),T(2,"Habits"),N(),H(3,"nav")(4,"a",1),T(5,"New Habit"),N()()(),H(6,"main")(7,"section")(8,"app-habits-table",2),Fe("changeState",function(s){return o.completeHabit(s)})("decrementState",function(s){return o.uncompleteHabit(s)}),N()(),qe(9,nOe,4,1,"section",3),N()),i&2&&(R(8),ae("models",o.inCompleteHabits),R(),ae("ngIf",o.completedHabits.length>0))},dependencies:[un,iae,di]});let e=t;return e})();function rOe(e,t){e&1&&(H(0,"h1"),T(1,"Create Habit"),N())}function iOe(e,t){if(e&1&&(H(0,"h1"),T(1),N()),e&2){let n=Pe();R(),Me("Edit Habit: ",n.model.Name,"")}}function oOe(e,t){if(e&1&&(y1(0),H(1,"option",10),T(2),N(),x1()),e&2){let n=t.$implicit;R(),ae("value",n.ClientId),R(),Sn(n.Name)}}function aOe(e,t){if(e&1){let n=fi();H(0,"div",11)(1,"label"),T(2," Target Value "),H(3,"input",12),Wt("ngModelChange",function(i){tr(n);let o=Pe();return Zt(o.model.TargetValue,i)||(o.model.TargetValue=i),nr(i)}),N()()()}if(e&2){let n=Pe();R(3),qt("ngModel",n.model.TargetValue)}}var sw=(()=>{let t=class t extends _6{constructor(r,i,o){super(),this.router=r,this.api=i,this.goalApi=o,this.goals$=new Fn([])}ngOnInit(){this.goalApi.listGoals().pipe(de(1)).subscribe(r=>this.goals$.next(r.data.map(i=>new or(i))))}submitForm(){let r=new mi(this.model);this.creating?this.api.createHabit(r).pipe(de(1)).subscribe(()=>this.router.navigate(["/"])):this.api.updateHabit(r).pipe(de(1)).subscribe(()=>this.router.navigate(r.ViewUrl))}};t.\u0275fac=function(i){return new(i||t)(j(Yt),j(M1),j(Gn))},t.\u0275cmp=xe({type:t,selectors:[["app-habit-form"]],standalone:!0,features:[rr,Ce],decls:25,vars:11,consts:[[1,"uk-form-label"],["name","name","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["name","description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],["name","goal",1,"uk-select",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["id","boolean-selectors"],["name","anti-habit","type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange"],["name","quantifiable-habit","type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange"],["class","uk-form-label target-value",4,"ngIf"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"],[3,"value"],[1,"uk-form-label","target-value"],["name","target-value","type","number","placeholder","eg. 5 (km run)",1,"uk-input",3,"ngModel","ngModelChange"]],template:function(i,o){i&1&&(qe(0,rOe,2,0,"h1")(1,iOe,2,1),H(2,"form")(3,"label",0),T(4," Habit Name "),H(5,"input",1),Wt("ngModelChange",function(s){return Zt(o.model.Name,s)||(o.model.Name=s),s}),N()(),H(6,"label",0),T(7," Habit Description "),H(8,"textarea",2),Wt("ngModelChange",function(s){return Zt(o.model.Description,s)||(o.model.Description=s),s}),N()(),H(9,"label",0),T(10," Associated Goal "),H(11,"select",3),Wt("ngModelChange",function(s){return Zt(o.model.Goal,s)||(o.model.Goal=s),s}),qe(12,oOe,3,2,"ng-container",4),d9(13,"async"),N()(),H(14,"div",5)(15,"label",0)(16,"input",6),Wt("ngModelChange",function(s){return Zt(o.model.AntiHabit,s)||(o.model.AntiHabit=s),s}),N(),T(17," Anti Habit "),N(),H(18,"label",0)(19,"input",7),Wt("ngModelChange",function(s){return Zt(o.model.IsQuantifiable,s)||(o.model.IsQuantifiable=s),s}),N(),T(20," Quantifiable "),N()(),qe(21,aOe,4,1,"div",8),H(22,"div")(23,"button",9),Fe("click",function(){return o.submitForm()}),T(24),N()()()),i&2&&(ui(0,o.creating?0:1),R(5),qt("ngModel",o.model.Name),R(3),qt("ngModel",o.model.Description),R(3),qt("ngModel",o.model.Goal),R(),ae("ngForOf",p9(13,9,o.goals$)),R(4),qt("ngModel",o.model.AntiHabit),R(3),qt("ngModel",o.model.IsQuantifiable),R(2),ae("ngIf",o.model.IsQuantifiable),R(3),Me(" ",o.creating?"Create":"Update"," Habit "))},dependencies:[xr,Sa,Mg,wg,b1,Bz,Q4,N6,hi,wa,jr,p2,gr,di,M9],styles:["#boolean-selectors[_ngcontent-%COMP%]{margin-top:.5rem;margin-right:.5rem}#boolean-selectors[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:1rem}.target-value[_ngcontent-%COMP%]{margin-top:1rem}"]});let e=t;return e})();var aae=(()=>{let t=class t{constructor(){this.partialModel={CreatedAt:new Date().toLocaleDateString("en-GB")}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-new-page"]],standalone:!0,features:[Ce],decls:1,vars:2,consts:[[3,"creating","model"]],template:function(i,o){i&1&&dt(0,"app-habit-form",0),i&2&&ae("creating",!0)("model",o.partialModel)},dependencies:[sw],encapsulation:2});let e=t;return e})();var sae=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-schedule-page"]],standalone:!0,features:[Ce],decls:2,vars:0,template:function(i,o){i&1&&(H(0,"h1"),T(1,"Schedule"),N())},encapsulation:2});let e=t;return e})();var cae=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(de(1)).subscribe(i=>{this.model=new ji(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteTask(this.model?.ClientId).pipe(de(1)).subscribe(()=>this.router.navigateByUrl("/tasks"))}};t.\u0275fac=function(i){return new(i||t)(j(w1),j(Vt),j(Yt))},t.\u0275cmp=xe({type:t,selectors:[["app-delete-task-page"]],standalone:!0,features:[Ce],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(H(0,"h1"),T(1),N(),H(2,"p"),T(3,` Deleting this model will make it unrecoverable.
`),N(),H(4,"button",0),Fe("click",function(){return o.deleteModel()}),T(5),N()),i&2&&(R(),Me("Delete ",o.model==null?null:o.model.Name,"?"),R(4),Me(" Delete ",o.model==null?null:o.model.Name,`
`))},encapsulation:2});let e=t;return e})();function sOe(e,t){if(e&1&&(y1(0),H(1,"p",10),T(2),N(),x1()),e&2){let n=Pe().$implicit;R(2),Me(" ",n.Description," ")}}function cOe(e,t){if(e&1&&(y1(0),T(1),x1()),e&2){let n=Pe().$implicit;R(),Me(" ",n.CompleteBy," ")}}var lOe=e=>({"uk-text-danger":e});function uOe(e,t){if(e&1){let n=fi();H(0,"tr")(1,"td")(2,"input",5),Wt("ngModelChange",function(i){let a=tr(n).$implicit;return Zt(a.Completed,i)||(a.Completed=i),nr(i)}),Fe("change",function(){let o=tr(n).$implicit,a=Pe();return nr(a.changeState.emit(o))}),N()(),H(3,"td")(4,"a",6),T(5),N()(),H(6,"td",1),qe(7,sOe,3,1,"ng-container",7),N(),H(8,"td",1),T(9),N(),H(10,"td",8),qe(11,cOe,2,1,"ng-container",7),N(),H(12,"td")(13,"a",9),T(14,"View"),N()()()}if(e&2){let n=t.$implicit;Pe();let r=O4(17),i=O4(19);R(2),qt("ngModel",n.Completed),R(2),ae("routerLink",n.ViewUrl),R(),Me(" ",n.Name," "),R(2),ae("ngIf",n.Description)("ngIfElse",r),R(2),Sn(n.ImportanceHuman),R(),ae("ngClass",eB(10,lOe,n.isOverdue)),R(),ae("ngIf",n.CompleteBy)("ngIfElse",i),R(2),ae("routerLink",n.ViewUrl)}}function fOe(e,t){e&1&&(H(0,"i"),T(1,"No description"),N())}function dOe(e,t){e&1&&(H(0,"i"),T(1,"No date set"),N())}var lae=(()=>{let t=class t{constructor(){this.models=[],this.changeState=new vn}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-tasks-table"]],inputs:{models:"models"},outputs:{changeState:"changeState"},standalone:!0,features:[Ce],decls:20,vars:1,consts:[[1,"uk-table","uk-table-striped"],[1,"hide-in-mobile"],[4,"ngFor","ngForOf"],["defaultDescription",""],["defaultCompleteBy",""],["type","checkbox",1,"uk-checkbox",3,"ngModel","ngModelChange","change"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[4,"ngIf","ngIfElse"],[3,"ngClass"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"],[1,"description"]],template:function(i,o){i&1&&(H(0,"table",0)(1,"thead")(2,"tr"),dt(3,"th"),H(4,"th"),T(5,"Name"),N(),H(6,"th",1),T(7,"Description"),N(),H(8,"th",1),T(9,"Importance"),N(),H(10,"th"),T(11,"Due Date"),N(),H(12,"th"),T(13,"Action"),N()()(),H(14,"tbody"),qe(15,uOe,15,12,"tr",2),N()(),qe(16,fOe,2,0,"ng-template",null,3,Ls)(18,dOe,2,0,"ng-template",null,4,Ls)),i&2&&(R(15),ae("ngForOf",o.models))},dependencies:[gr,vB,xr,Q4,hi,jr,un,di]});let e=t;return e})();function pOe(e,t){if(e&1){let n=fi();H(0,"section")(1,"h2"),T(2,"Completed Tasks"),N(),H(3,"app-tasks-table",3),Fe("changeState",function(i){tr(n);let o=Pe();return nr(o.updateTask(i))}),N()()}if(e&2){let n=Pe();R(3),ae("models",n.completedTasks)}}var uae=(()=>{let t=class t{constructor(r,i){this.api=r,this.virtualDb=i,this.tasks=[]}get completedTasks(){return this.tasks.filter(r=>r.Completed)}get incompleteTasks(){return this.tasks.filter(r=>!r.Completed)}ngOnInit(){this.updateTasks(),this.virtualDb.changeNotifier.addEventListener("change",()=>this.updateTasks())}updateTasks(){this.api.getTasks().pipe(de(1)).subscribe(r=>{this.tasks=r.data.map(i=>new ji(i))})}updateTask(r){this.api.updateTask(r).pipe(de(1)).subscribe(i=>{r=new ji(i.data)})}};t.\u0275fac=function(i){return new(i||t)(j(w1),j(C1))},t.\u0275cmp=xe({type:t,selectors:[["app-tasks-page"]],standalone:!0,features:[Ce],decls:9,vars:2,consts:[[1,"list-header"],["routerLink","/tasks/new",1,"uk-button","uk-button-primary"],[1,"incompleteTasks.length",">","0"],[3,"models","changeState"],[4,"ngIf"]],template:function(i,o){i&1&&(H(0,"div",0)(1,"h1"),T(2,"Tasks"),N(),H(3,"nav")(4,"a",1),T(5,"New Task"),N()()(),H(6,"section",2)(7,"app-tasks-table",3),Fe("changeState",function(s){return o.updateTask(s)}),N()(),qe(8,pOe,4,1,"section",4)),i&2&&(R(7),ae("models",o.incompleteTasks),R(),ae("ngIf",o.completedTasks.length>0))},dependencies:[un,lae,di],styles:[".overdue-task[_ngcontent-%COMP%]{color:#f5222d}"]});let e=t;return e})();function hOe(e,t){e&1&&(H(0,"h1"),T(1,"Create a New Task"),N())}function mOe(e,t){if(e&1&&(H(0,"h1"),T(1),N()),e&2){let n=Pe();R(),Me("Edit Task: ",n.model.Name,"")}}function gOe(e,t){if(e&1&&(y1(0),H(1,"option",13),T(2),N(),x1()),e&2){let n=t.$implicit;R(),ae("value",n.ClientId),R(),Sn(n.Name)}}var cw=(()=>{let t=class t extends _6{constructor(r,i,o){super(),this.api=r,this.goalApi=i,this.router=o,this.goals$=new Fn([])}ngOnInit(){this.goalApi.listGoals().pipe(de(1)).subscribe(r=>this.goals$.next(r.data.map(i=>new or(i))))}submitForm(){let r=new ji(this.model);this.creating?this.api.createTask(r).pipe(de(1)).subscribe(()=>this.router.navigate(["/tasks"])):this.api.updateTask(r).pipe(de(1)).subscribe(()=>this.router.navigate(r.ViewUrl))}updateImportance(r){let i=r.target.value;this.model.Importance=parseInt(i,10)}updateCompleteBy(r){let i=new Date(r.target.value);this.model.CompleteBy=i.toLocaleDateString("en-GB")}};t.\u0275fac=function(i){return new(i||t)(j(w1),j(Gn),j(Yt))},t.\u0275cmp=xe({type:t,selectors:[["app-task-form"]],standalone:!0,features:[rr,Ce],decls:32,vars:8,consts:[[1,"uk-form-label"],["name","name","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["name","description","rows","10",1,"uk-textarea",3,"ngModel","ngModelChange"],[1,"uk-select",3,"change"],["value","1","selected",""],["value","2"],["value","3"],["value","4"],["value","5"],["name","associated-goal",1,"uk-select",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","date",1,"uk-input",3,"change"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"],[3,"value"]],template:function(i,o){i&1&&(qe(0,hOe,2,0,"h1")(1,mOe,2,1),H(2,"form")(3,"label",0),T(4," Task Name "),H(5,"input",1),Wt("ngModelChange",function(s){return Zt(o.model.Name,s)||(o.model.Name=s),s}),N()(),H(6,"label",0),T(7," Task Description "),H(8,"textarea",2),Wt("ngModelChange",function(s){return Zt(o.model.Description,s)||(o.model.Description=s),s}),N()(),H(9,"label",0),T(10," Importance "),H(11,"select",3),Fe("change",function(s){return o.updateImportance(s)}),H(12,"option",4),T(13,"Low"),N(),H(14,"option",5),T(15,"Low-Medium"),N(),H(16,"option",6),T(17,"Medium"),N(),H(18,"option",7),T(19,"Medium-High"),N(),H(20,"option",8),T(21,"High"),N()()(),H(22,"label",0),T(23," Associated Goal "),H(24,"select",9),Wt("ngModelChange",function(s){return Zt(o.model.Goal,s)||(o.model.Goal=s),s}),qe(25,gOe,3,2,"ng-container",10),d9(26,"async"),N()(),H(27,"label",0),T(28," Complete By "),H(29,"input",11),Fe("change",function(s){return o.updateCompleteBy(s)}),N()(),H(30,"button",12),Fe("click",function(){return o.submitForm()}),T(31),N()()),i&2&&(ui(0,o.creating?0:1),R(5),qt("ngModel",o.model.Name),R(3),qt("ngModel",o.model.Description),R(16),qt("ngModel",o.model.Goal),R(),ae("ngForOf",p9(26,6,o.goals$)),R(6),Me(" ",o.creating?"Create":"Update"," Task "))},dependencies:[xr,Sa,Mg,wg,b1,N6,hi,wa,jr,p2,gr,M9]});let e=t;return e})();var fae=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=xe({type:t,selectors:[["app-new-task-page"]],standalone:!0,features:[Ce],decls:1,vars:1,consts:[[3,"creating"]],template:function(i,o){i&1&&dt(0,"app-task-form",0),i&2&&ae("creating",!0)},dependencies:[cw],encapsulation:2});let e=t;return e})();function vOe(e,t){if(e&1&&(H(0,"pre",4),T(1),N()),e&2){let n=Pe();R(),Sn(n.model==null?null:n.model.Description)}}var dae=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.goalApi=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(de(1)).subscribe(i=>{this.model=new ji(i.data),this.goalApi.getGoal(this.model?.Goal).pipe(de(1)).subscribe(o=>{this.goalModel=new or(o.data)})})}};t.\u0275fac=function(i){return new(i||t)(j(w1),j(Vt),j(Gn))},t.\u0275cmp=xe({type:t,selectors:[["app-task-page"]],standalone:!0,features:[Ce],decls:15,vars:11,consts:[[1,"uk-button-secondary","uk-button","uk-margin-small-right","uk-margin-small-top",3,"routerLink"],[1,"uk-button-danger","uk-button","uk-margin-small-top",3,"routerLink"],["class","uk-text-default"],[3,"routerLink"],[1,"uk-text-default"]],template:function(i,o){i&1&&(H(0,"h1"),T(1),N(),H(2,"button",0),T(3),N(),H(4,"button",1),T(5),N(),qe(6,vOe,2,1,"pre",2),H(7,"p"),T(8),N(),H(9,"p"),T(10),N(),H(11,"p"),T(12," Associated Goal: "),H(13,"a",3),T(14),N()()),i&2&&(R(),U8(" Task: ",o.model==null?null:o.model.Name," (",o.model!=null&&o.model.Completed?"Completed":"Incomplete",`)
`),R(),ae("routerLink",o.model==null?null:o.model.EditUrl),R(),Me(" Edit: ",o.model==null?null:o.model.Name,`
`),R(),ae("routerLink",o.model==null?null:o.model.DeleteUrl),R(),Me(" Delete: ",o.model==null?null:o.model.Name,`
`),R(),ui(6,o.model!=null&&o.model.Description?6:-1),R(2),Me("Importance: ",o.model==null?null:o.model.ImportanceHuman,""),R(2),Me("Complete By: ",o.model==null?null:o.model.CompleteBy,""),R(3),ae("routerLink",o.goalModel==null?null:o.goalModel.ViewUrl),R(),Me(" ",o.goalModel==null?null:o.goalModel.Name," "))},dependencies:[un],encapsulation:2});let e=t;return e})();var n2=class extends Ea{constructor(t){super(t)}get ViewUrl(){return["/logbook",this.ClientId]}get EditUrl(){return["/logbook",this.ClientId,"edit"]}get DeleteUrl(){return["/logbook",this.ClientId,"delete"]}};var r2=(()=>{let t=class t extends yr{constructor(r){super(),this.http=r}getLogbooks(){let r=vt("/logbooks");return this.http.get(r)}getLogbook(r){let i=vt(`/logbooks/${r}`);return this.http.get(i)}createLogbook(r){let i=vt("/logbooks");return this.http.post(i,r)}updateLogbook(r){let i=vt(`/logbooks/${r.ClientId}`);return this.http.put(i,r)}deleteLogbook(r){let i=vt(`/logbooks/${r}`);return this.http.delete(i)}};t.\u0275fac=function(i){return new(i||t)(le(Ui))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})();function yOe(e,t){if(e&1&&(H(0,"tr")(1,"td")(2,"a",4),T(3),N()(),H(4,"td"),T(5),N(),H(6,"td")(7,"a",5),T(8," View "),N()()()),e&2){let n=t.$implicit;R(2),ae("routerLink",n.ViewUrl),R(),Me(" ",n.Name," "),R(2),Sn(n.CreatedAt),R(2),ae("routerLink",n.ViewUrl)}}var pae=(()=>{let t=class t{constructor(r,i){this.api=r,this.virtualDb=i,this.logbooks=[]}ngOnInit(){this.updateLogbooks(),this.virtualDb.changeNotifier.addEventListener("change",()=>this.updateLogbooks())}updateLogbooks(){this.api.getLogbooks().pipe(de(1)).subscribe(r=>{this.logbooks=r.data.map(i=>new n2(i))})}};t.\u0275fac=function(i){return new(i||t)(j(r2),j(C1))},t.\u0275cmp=xe({type:t,selectors:[["app-list"]],standalone:!0,features:[Ce],decls:19,vars:1,consts:[[1,"list-header"],["routerLink","/logbook/new",1,"uk-button","uk-button-primary"],[1,"uk-table"],[4,"ngFor","ngForOf"],[1,"uk-link","uk-text-secondary",3,"routerLink"],[1,"uk-button","uk-button-small","uk-button-default","uk-margin-small-right",3,"routerLink"]],template:function(i,o){i&1&&(H(0,"div",0)(1,"h1"),T(2,"Logbook"),N(),H(3,"section")(4,"nav")(5,"a",1),T(6,"New Entry"),N()()()(),H(7,"section")(8,"table",2)(9,"thead")(10,"tr")(11,"th"),T(12,"Name"),N(),H(13,"th"),T(14,"Created"),N(),H(15,"th"),T(16,"Action"),N()()(),H(17,"tbody"),qe(18,yOe,9,4,"tr",3),N()()()),i&2&&(R(18),ae("ngForOf",o.logbooks))},dependencies:[un,gr]});let e=t;return e})();var hae=(()=>{let t=class t{constructor(r,i){this.router=r,this.api=i,this.model={CreatedAt:new Date().toLocaleDateString("en-GB")}}submitForm(){let r=new n2(this.model);this.api.createLogbook(r).subscribe(()=>this.router.navigateByUrl("/logbook"))}};t.\u0275fac=function(i){return new(i||t)(j(Yt),j(r2))},t.\u0275cmp=xe({type:t,selectors:[["app-new"]],standalone:!0,features:[Ce],decls:12,vars:2,consts:[["action",""],["ngForm",""],["for","new-task-input",1,"uk-form-label"],["id","new-task-input","name","new-task-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","new-task-description",1,"uk-form-label"],["id","new-task-description","name","new-task-description","rows","20",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(H(0,"h1"),T(1,"New Logbook"),N(),H(2,"form",0,1)(4,"label",2),T(5,"Logbook Name"),N(),H(6,"input",3),Wt("ngModelChange",function(s){return Zt(o.model.Name,s)||(o.model.Name=s),s}),N(),H(7,"label",4),T(8," Content "),N(),H(9,"textarea",5),Wt("ngModelChange",function(s){return Zt(o.model.Content,s)||(o.model.Content=s),s}),N(),H(10,"button",6),Fe("click",function(){return o.submitForm()}),T(11," Add Logbook Entry "),N()()),i&2&&(R(6),qt("ngModel",o.model.Name),R(3),qt("ngModel",o.model.Content))},dependencies:[xr,Sa,b1,hi,wa,jr,p2]});let e=t;return e})();function xOe(e,t){if(e&1&&(H(0,"pre"),T(1),N()),e&2){let n=Pe();R(),Sn(n.model==null?null:n.model.Content)}}function COe(e,t){e&1&&(H(0,"p"),T(1,"No content"),N())}var mae=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getLogbook(r).pipe(de(1)).subscribe(i=>{this.model=new n2(i.data)})}};t.\u0275fac=function(i){return new(i||t)(j(r2),j(Vt))},t.\u0275cmp=xe({type:t,selectors:[["app-show"]],standalone:!0,features:[Ce],decls:11,vars:7,consts:[[1,"uk-button","uk-button-secondary","uk-margin-small-right",3,"routerLink"],[1,"uk-button","uk-button-danger",3,"routerLink"],[1,"uk-text-default"]],template:function(i,o){i&1&&(H(0,"h1"),T(1),N(),H(2,"button",0),T(3),N(),H(4,"button",1),T(5),N(),H(6,"div",2),T(7),N(),dt(8,"hr"),qe(9,xOe,2,1,"pre")(10,COe,2,0)),i&2&&(R(),Sn(o.model==null?null:o.model.Name),R(),ae("routerLink",o.model==null?null:o.model.EditUrl),R(),Me(" Edit: ",o.model==null?null:o.model.Name,`
`),R(),ae("routerLink",o.model==null?null:o.model.DeleteUrl),R(),Me(" Delete: ",o.model==null?null:o.model.Name,`
`),R(2),Me("Created: ",o.model==null?null:o.model.CreatedAt,""),R(2),ui(9,o.model!=null&&o.model.Content?9:10))},dependencies:[un]});let e=t;return e})();var gae=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getLogbook(r).pipe(de(1)).subscribe(i=>{this.model=new n2(i.data)})}deleteModel(){if(!this.model)throw new Error("Model is not defined");this.api.deleteLogbook(this.model?.ClientId).pipe(de(1)).subscribe(()=>this.router.navigateByUrl("/logbook"))}};t.\u0275fac=function(i){return new(i||t)(j(r2),j(Vt),j(Yt))},t.\u0275cmp=xe({type:t,selectors:[["app-delete"]],standalone:!0,features:[Ce],decls:6,vars:2,consts:[[1,"uk-button","uk-button-danger",3,"click"]],template:function(i,o){i&1&&(H(0,"h1"),T(1),N(),H(2,"p"),T(3,` Deleting this model will make it unrecoverable.
`),N(),H(4,"button",0),Fe("click",function(){return o.deleteModel()}),T(5),N()),i&2&&(R(),Me("Delete ",o.model==null?null:o.model.Name,"?"),R(4),Me(" Delete ",o.model==null?null:o.model.Name,`
`))}});let e=t;return e})();var vae=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getGoal(r).pipe(de(1)).subscribe(i=>{this.model=i.data})}};t.\u0275fac=function(i){return new(i||t)(j(Gn),j(Vt))},t.\u0275cmp=xe({type:t,selectors:[["app-update"]],standalone:!0,features:[Ce],decls:1,vars:2,consts:[[3,"creating","model"]],template:function(i,o){i&1&&dt(0,"app-goal-form",0),i&2&&ae("creating",!1)("model",o.model)},dependencies:[Eg],encapsulation:2});let e=t;return e})();var yae=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getHabit(r).pipe(de(1)).subscribe(i=>{this.model=i.data})}};t.\u0275fac=function(i){return new(i||t)(j(M1),j(Vt))},t.\u0275cmp=xe({type:t,selectors:[["app-update"]],standalone:!0,features:[Ce],decls:1,vars:2,consts:[[3,"creating","model"]],template:function(i,o){i&1&&dt(0,"app-habit-form",0),i&2&&ae("creating",!1)("model",o.model)},dependencies:[sw],encapsulation:2});let e=t;return e})();var xae=(()=>{let t=class t{constructor(r,i){this.api=r,this.route=i,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getTask(r).pipe(de(1)).subscribe(i=>{this.model=i.data})}};t.\u0275fac=function(i){return new(i||t)(j(w1),j(Vt))},t.\u0275cmp=xe({type:t,selectors:[["app-update"]],standalone:!0,features:[Ce],decls:1,vars:2,consts:[[3,"creating","model"]],template:function(i,o){i&1&&dt(0,"app-task-form",0),i&2&&ae("creating",!1)("model",o.model)},dependencies:[cw],encapsulation:2});let e=t;return e})();var Cae=(()=>{let t=class t{constructor(r){this.configService=r,this.customServerUrl=this.configService.getCustomServerUrl()??"",this.formFeedback=""}saveCustomServerUrl(){this.customServerUrl.endsWith("/")&&(this.customServerUrl=this.customServerUrl.slice(0,-1)),this.customServerUrl.includes("://")||(this.customServerUrl="http://"+this.customServerUrl),this.customServerUrl?(this.configService.setCustomServerUrl(this.customServerUrl),this.formFeedback="Custom server URL saved!"):this.formFeedback="Please enter a valid server URL."}clearCustomServerUrl(){this.customServerUrl="",this.configService.clearCustomServerUrl(),this.formFeedback="Custom server URL cleared!"}};t.\u0275fac=function(i){return new(i||t)(j(Do))},t.\u0275cmp=xe({type:t,selectors:[["app-configure"]],standalone:!0,features:[Ce],decls:30,vars:2,consts:[["href","https://github.com/hudson-newey/habit-tracker/tree/main/server"],["href","https://github.com/hudson-newey/habit-tracker"],["type","text","placeholder","Server URL",1,"uk-input",3,"ngModel","ngModelChange"],[1,"action-buttons"],["id","save-server-button",1,"uk-button","uk-button-primary",3,"click"],["id","remove-server-button",1,"uk-button","uk-button-danger",3,"click"],[1,"uk-text-secondary"]],template:function(i,o){i&1&&(H(0,"h1"),T(1,"Configure"),N(),H(2,"p"),T(3," This web app is intended to be used with the GoLang API found "),H(4,"a",0),T(5,"on GitHub"),N(),T(6,`.
`),N(),H(7,"p"),T(8,` It is possible to use this app without the API, but you will not be able to sync your Todo items and Habits between devices.
`),N(),H(9,"p"),T(10,` The architecture of the API means that you don't always have to have access to the server. You can set up the server on a Raspberry Pi at home (not exposed to the internet), set the server url to a local IP, and the app will automatically sync your data when you are connected to the same network.
`),N(),H(11,"p"),T(12," You are free to use this GitHub pages hosted version of the application with your own hosted server (or without) by inputting the custom URL below, or you can host your own instance of the server, client and mobile application using the code available "),H(13,"a",1),T(14,"here"),N(),T(15,`.
`),N(),H(16,"section")(17,"h2"),T(18,"Custom Server URL"),N(),H(19,"p"),T(20," If you are using a custom server, please input the URL below. If you are using the goal tracker without device syncing, you can leave this blank. "),N(),H(21,"input",2),Wt("ngModelChange",function(s){return Zt(o.customServerUrl,s)||(o.customServerUrl=s),s}),N(),H(22,"div",3)(23,"button",4),Fe("click",function(){return o.saveCustomServerUrl()}),T(24," Save "),N(),H(25,"button",5),Fe("click",function(){return o.clearCustomServerUrl()}),T(26," Remove Server "),N()(),dt(27,"div"),H(28,"p",6),T(29),N()()),i&2&&(R(21),qt("ngModel",o.customServerUrl),R(8),Sn(o.formFeedback))},dependencies:[xr,b1,hi,jr],styles:[".action-buttons[_ngcontent-%COMP%]{margin-top:.5rem}.action-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:.5rem}"]});let e=t;return e})();var bae=(()=>{let t=class t{constructor(r,i,o){this.api=r,this.route=i,this.router=o,this.model={}}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");this.api.getLogbook(r).pipe(de(1)).subscribe(i=>{this.model=i.data})}submitForm(){let r=new n2(this.model);this.api.updateLogbook(r).pipe(de(1)).subscribe(()=>{this.router.navigate(r.ViewUrl)})}};t.\u0275fac=function(i){return new(i||t)(j(r2),j(Vt),j(Yt))},t.\u0275cmp=xe({type:t,selectors:[["app-edit"]],standalone:!0,features:[Ce],decls:12,vars:3,consts:[["action",""],["ngForm",""],["for","logbook-name-input",1,"uk-form-label"],["id","logbook-name-input","name","logbook-name-input","type","text",1,"uk-input",3,"ngModel","ngModelChange"],["for","logbook-content-input",1,"uk-form-label"],["id","logbook-content-input","name","logbook-content-input","rows","20",1,"uk-textarea",3,"ngModel","ngModelChange"],["type","submit",1,"uk-button","uk-button-primary","uk-margin-top",3,"click"]],template:function(i,o){i&1&&(H(0,"h1"),T(1),N(),H(2,"form",0,1)(4,"label",2),T(5,"Logbook Name"),N(),H(6,"input",3),Wt("ngModelChange",function(s){return Zt(o.model.Name,s)||(o.model.Name=s),s}),N(),H(7,"label",4),T(8,"Logbook Content"),N(),H(9,"textarea",5),Wt("ngModelChange",function(s){return Zt(o.model.Content,s)||(o.model.Content=s),s}),N(),H(10,"button",6),Fe("click",function(){return o.submitForm()}),T(11," Update Logbook Entry "),N()()),i&2&&(R(),Me("Edit: ",o.model.Name,""),R(5),qt("ngModel",o.model.Name),R(3),qt("ngModel",o.model.Content))},dependencies:[xr,Sa,b1,hi,wa,jr,p2]});let e=t;return e})();var bOe=[{path:"goals",component:lG},{path:"goals/new",component:uG},{path:"goals/:id",component:cG},{path:"goals/:id/delete",component:sG},{path:"goals/:id/edit",component:vae},{path:"",component:oae},{path:"habits/new",component:aae},{path:"habits/:id",component:nae},{path:"habits/:id/delete",component:fG},{path:"habits/:id/edit",component:yae},{path:"tasks",component:uae},{path:"tasks/new",component:fae},{path:"tasks/:id",component:dae},{path:"tasks/:id/delete",component:cae},{path:"tasks/:id/edit",component:xae},{path:"logbook",component:pae},{path:"logbook/new",component:hae},{path:"logbook/:id",component:mae},{path:"logbook/:id/delete",component:gae},{path:"logbook/:id/edit",component:bae},{path:"schedule",component:sae},{path:"configure",component:Cae}],Mae=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=$i({type:t}),t.\u0275inj=Bi({imports:[cz.forRoot(bOe),cz]});let e=t;return e})();var wae=(()=>{let t=class t{constructor(r,i,o){this.config=r,this.virtualDb=i,this.syncService=o}intercept(r,i){if(this.config.isCustomServerUrlSet()&&this.syncService.connectionStatus||r.url.endsWith("ping"))return i.handle(r);let o=this.virtualDb.applyApiRequest(r);return Ve(new f6({status:200,body:{data:o}}))}};t.\u0275fac=function(i){return new(i||t)(le(Do),le(C1),le(w6))},t.\u0275prov=ce({token:t,factory:t.\u0275fac});let e=t;return e})();var MOe=[M1,Gn,w1,Do,r2,Sg,C1];RB(TU,{providers:[gE(l6,PB,Mae,xr,Fj),{provide:dD,useClass:wae,multi:!0},...MOe,LB(AB())]}).catch(e=>console.error(e));
